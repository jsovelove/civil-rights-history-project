(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ua(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var mT={exports:{}},Zh={},gT={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zu=Symbol.for("react.element"),ZP=Symbol.for("react.portal"),eR=Symbol.for("react.fragment"),tR=Symbol.for("react.strict_mode"),nR=Symbol.for("react.profiler"),rR=Symbol.for("react.provider"),iR=Symbol.for("react.context"),sR=Symbol.for("react.forward_ref"),oR=Symbol.for("react.suspense"),aR=Symbol.for("react.memo"),lR=Symbol.for("react.lazy"),L0=Symbol.iterator;function uR(t){return t===null||typeof t!="object"?null:(t=L0&&t[L0]||t["@@iterator"],typeof t=="function"?t:null)}var vT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yT=Object.assign,_T={};function Ba(t,e,r){this.props=t,this.context=e,this.refs=_T,this.updater=r||vT}Ba.prototype.isReactComponent={};Ba.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ba.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wT(){}wT.prototype=Ba.prototype;function Cv(t,e,r){this.props=t,this.context=e,this.refs=_T,this.updater=r||vT}var Av=Cv.prototype=new wT;Av.constructor=Cv;yT(Av,Ba.prototype);Av.isPureReactComponent=!0;var O0=Array.isArray,bT=Object.prototype.hasOwnProperty,Pv={current:null},xT={key:!0,ref:!0,__self:!0,__source:!0};function ET(t,e,r){var i,s={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)bT.call(e,i)&&!xT.hasOwnProperty(i)&&(s[i]=e[i]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:zu,type:t,key:o,ref:a,props:s,_owner:Pv.current}}function cR(t,e){return{$$typeof:zu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Rv(t){return typeof t=="object"&&t!==null&&t.$$typeof===zu}function dR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var j0=/\/+/g;function Ep(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dR(""+t.key):e.toString(36)}function vd(t,e,r,i,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case zu:case ZP:a=!0}}if(a)return a=t,s=s(a),t=i===""?"."+Ep(a,0):i,O0(s)?(r="",t!=null&&(r=t.replace(j0,"$&/")+"/"),vd(s,e,r,"",function(c){return c})):s!=null&&(Rv(s)&&(s=cR(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(j0,"$&/")+"/")+t)),e.push(s)),1;if(a=0,i=i===""?".":i+":",O0(t))for(var l=0;l<t.length;l++){o=t[l];var u=i+Ep(o,l);a+=vd(o,e,r,u,s)}else if(u=uR(t),typeof u=="function")for(t=u.call(t),l=0;!(o=t.next()).done;)o=o.value,u=i+Ep(o,l++),a+=vd(o,e,r,u,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Vc(t,e,r){if(t==null)return t;var i=[],s=0;return vd(t,i,"","",function(o){return e.call(r,o,s++)}),i}function hR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Rn={current:null},yd={transition:null},fR={ReactCurrentDispatcher:Rn,ReactCurrentBatchConfig:yd,ReactCurrentOwner:Pv};function TT(){throw Error("act(...) is not supported in production builds of React.")}He.Children={map:Vc,forEach:function(t,e,r){Vc(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Vc(t,function(){e++}),e},toArray:function(t){return Vc(t,function(e){return e})||[]},only:function(t){if(!Rv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};He.Component=Ba;He.Fragment=eR;He.Profiler=nR;He.PureComponent=Cv;He.StrictMode=tR;He.Suspense=oR;He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fR;He.act=TT;He.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=yT({},t.props),s=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Pv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)bT.call(e,u)&&!xT.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:zu,type:t.type,key:s,ref:o,props:i,_owner:a}};He.createContext=function(t){return t={$$typeof:iR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:rR,_context:t},t.Consumer=t};He.createElement=ET;He.createFactory=function(t){var e=ET.bind(null,t);return e.type=t,e};He.createRef=function(){return{current:null}};He.forwardRef=function(t){return{$$typeof:sR,render:t}};He.isValidElement=Rv;He.lazy=function(t){return{$$typeof:lR,_payload:{_status:-1,_result:t},_init:hR}};He.memo=function(t,e){return{$$typeof:aR,type:t,compare:e===void 0?null:e}};He.startTransition=function(t){var e=yd.transition;yd.transition={};try{t()}finally{yd.transition=e}};He.unstable_act=TT;He.useCallback=function(t,e){return Rn.current.useCallback(t,e)};He.useContext=function(t){return Rn.current.useContext(t)};He.useDebugValue=function(){};He.useDeferredValue=function(t){return Rn.current.useDeferredValue(t)};He.useEffect=function(t,e){return Rn.current.useEffect(t,e)};He.useId=function(){return Rn.current.useId()};He.useImperativeHandle=function(t,e,r){return Rn.current.useImperativeHandle(t,e,r)};He.useInsertionEffect=function(t,e){return Rn.current.useInsertionEffect(t,e)};He.useLayoutEffect=function(t,e){return Rn.current.useLayoutEffect(t,e)};He.useMemo=function(t,e){return Rn.current.useMemo(t,e)};He.useReducer=function(t,e,r){return Rn.current.useReducer(t,e,r)};He.useRef=function(t){return Rn.current.useRef(t)};He.useState=function(t){return Rn.current.useState(t)};He.useSyncExternalStore=function(t,e,r){return Rn.current.useSyncExternalStore(t,e,r)};He.useTransition=function(){return Rn.current.useTransition()};He.version="18.3.1";gT.exports=He;var N=gT.exports;const Be=Ua(N);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pR=N,mR=Symbol.for("react.element"),gR=Symbol.for("react.fragment"),vR=Object.prototype.hasOwnProperty,yR=pR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_R={key:!0,ref:!0,__self:!0,__source:!0};function ST(t,e,r){var i,s={},o=null,a=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)vR.call(e,i)&&!_R.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:mR,type:t,key:o,ref:a,props:s,_owner:yR.current}}Zh.Fragment=gR;Zh.jsx=ST;Zh.jsxs=ST;mT.exports=Zh;var m=mT.exports,Vm={},IT={exports:{}},sr={},kT={exports:{}},CT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(G,K){var re=G.length;G.push(K);e:for(;0<re;){var se=re-1>>>1,W=G[se];if(0<s(W,K))G[se]=K,G[re]=W,re=se;else break e}}function r(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var K=G[0],re=G.pop();if(re!==K){G[0]=re;e:for(var se=0,W=G.length,$=W>>>1;se<$;){var J=2*(se+1)-1,X=G[J],de=J+1,ye=G[de];if(0>s(X,re))de<W&&0>s(ye,X)?(G[se]=ye,G[de]=re,se=de):(G[se]=X,G[J]=re,se=J);else if(de<W&&0>s(ye,re))G[se]=ye,G[de]=re,se=de;else break e}}return K}function s(G,K){var re=G.sortIndex-K.sortIndex;return re!==0?re:G.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,f=null,p=3,g=!1,b=!1,R=!1,P=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(G){for(var K=r(c);K!==null;){if(K.callback===null)i(c);else if(K.startTime<=G)i(c),K.sortIndex=K.expirationTime,e(u,K);else break;K=r(c)}}function L(G){if(R=!1,T(G),!b)if(r(u)!==null)b=!0,Z(F);else{var K=r(c);K!==null&&oe(L,K.startTime-G)}}function F(G,K){b=!1,R&&(R=!1,x(I),I=-1),g=!0;var re=p;try{for(T(K),f=r(u);f!==null&&(!(f.expirationTime>K)||G&&!y());){var se=f.callback;if(typeof se=="function"){f.callback=null,p=f.priorityLevel;var W=se(f.expirationTime<=K);K=t.unstable_now(),typeof W=="function"?f.callback=W:f===r(u)&&i(u),T(K)}else i(u);f=r(u)}if(f!==null)var $=!0;else{var J=r(c);J!==null&&oe(L,J.startTime-K),$=!1}return $}finally{f=null,p=re,g=!1}}var V=!1,D=null,I=-1,E=5,w=-1;function y(){return!(t.unstable_now()-w<E)}function C(){if(D!==null){var G=t.unstable_now();w=G;var K=!0;try{K=D(!0,G)}finally{K?A():(V=!1,D=null)}}else V=!1}var A;if(typeof _=="function")A=function(){_(C)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,Q=z.port2;z.port1.onmessage=C,A=function(){Q.postMessage(null)}}else A=function(){P(C,0)};function Z(G){D=G,V||(V=!0,A())}function oe(G,K){I=P(function(){G(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(G){G.callback=null},t.unstable_continueExecution=function(){b||g||(b=!0,Z(F))},t.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<G?Math.floor(1e3/G):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(G){switch(p){case 1:case 2:case 3:var K=3;break;default:K=p}var re=p;p=K;try{return G()}finally{p=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(G,K){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var re=p;p=G;try{return K()}finally{p=re}},t.unstable_scheduleCallback=function(G,K,re){var se=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?se+re:se):re=se,G){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=re+W,G={id:h++,callback:K,priorityLevel:G,startTime:re,expirationTime:W,sortIndex:-1},re>se?(G.sortIndex=re,e(c,G),r(u)===null&&G===r(c)&&(R?(x(I),I=-1):R=!0,oe(L,re-se))):(G.sortIndex=W,e(u,G),b||g||(b=!0,Z(F))),G},t.unstable_shouldYield=y,t.unstable_wrapCallback=function(G){var K=p;return function(){var re=p;p=K;try{return G.apply(this,arguments)}finally{p=re}}}})(CT);kT.exports=CT;var wR=kT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bR=N,rr=wR;function le(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var AT=new Set,lu={};function _o(t,e){va(t,e),va(t+"Capture",e)}function va(t,e){for(lu[t]=e,t=0;t<e.length;t++)AT.add(e[t])}var Ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Fm=Object.prototype.hasOwnProperty,xR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,V0={},F0={};function ER(t){return Fm.call(F0,t)?!0:Fm.call(V0,t)?!1:xR.test(t)?F0[t]=!0:(V0[t]=!0,!1)}function TR(t,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function SR(t,e,r,i){if(e===null||typeof e>"u"||TR(t,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nn(t,e,r,i,s,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var cn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){cn[t]=new Nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];cn[e]=new Nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){cn[t]=new Nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){cn[t]=new Nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){cn[t]=new Nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){cn[t]=new Nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){cn[t]=new Nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){cn[t]=new Nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){cn[t]=new Nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Nv=/[\-:]([a-z])/g;function Dv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Nv,Dv);cn[e]=new Nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Nv,Dv);cn[e]=new Nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Nv,Dv);cn[e]=new Nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){cn[t]=new Nn(t,1,!1,t.toLowerCase(),null,!1,!1)});cn.xlinkHref=new Nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){cn[t]=new Nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Mv(t,e,r,i){var s=cn.hasOwnProperty(e)?cn[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SR(e,r,s,i)&&(r=null),i||s===null?ER(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,i=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,i?t.setAttributeNS(i,e,r):t.setAttribute(e,r))))}var Di=bR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fc=Symbol.for("react.element"),qo=Symbol.for("react.portal"),Go=Symbol.for("react.fragment"),Lv=Symbol.for("react.strict_mode"),Um=Symbol.for("react.profiler"),PT=Symbol.for("react.provider"),RT=Symbol.for("react.context"),Ov=Symbol.for("react.forward_ref"),Bm=Symbol.for("react.suspense"),$m=Symbol.for("react.suspense_list"),jv=Symbol.for("react.memo"),Ki=Symbol.for("react.lazy"),NT=Symbol.for("react.offscreen"),U0=Symbol.iterator;function pl(t){return t===null||typeof t!="object"?null:(t=U0&&t[U0]||t["@@iterator"],typeof t=="function"?t:null)}var Ct=Object.assign,Tp;function Dl(t){if(Tp===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Tp=e&&e[1]||""}return`
`+Tp+t}var Sp=!1;function Ip(t,e){if(!t||Sp)return"";Sp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),o=i.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{Sp=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Dl(t):""}function IR(t){switch(t.tag){case 5:return Dl(t.type);case 16:return Dl("Lazy");case 13:return Dl("Suspense");case 19:return Dl("SuspenseList");case 0:case 2:case 15:return t=Ip(t.type,!1),t;case 11:return t=Ip(t.type.render,!1),t;case 1:return t=Ip(t.type,!0),t;default:return""}}function zm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Go:return"Fragment";case qo:return"Portal";case Um:return"Profiler";case Lv:return"StrictMode";case Bm:return"Suspense";case $m:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case RT:return(t.displayName||"Context")+".Consumer";case PT:return(t._context.displayName||"Context")+".Provider";case Ov:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case jv:return e=t.displayName||null,e!==null?e:zm(t.type)||"Memo";case Ki:e=t._payload,t=t._init;try{return zm(t(e))}catch{}}return null}function kR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zm(e);case 8:return e===Lv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Es(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function DT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CR(t){var e=DT(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Uc(t){t._valueTracker||(t._valueTracker=CR(t))}function MT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return t&&(i=DT(t)?t.checked?"true":"false":t.value),t=i,t!==r?(e.setValue(t),!0):!1}function qd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Hm(t,e){var r=e.checked;return Ct({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function B0(t,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=Es(e.value!=null?e.value:r),t._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function LT(t,e){e=e.checked,e!=null&&Mv(t,"checked",e,!1)}function Wm(t,e){LT(t,e);var r=Es(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?qm(t,e.type,r):e.hasOwnProperty("defaultValue")&&qm(t,e.type,Es(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function $0(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function qm(t,e,r){(e!=="number"||qd(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Ml=Array.isArray;function sa(t,e,r,i){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&i&&(t[r].defaultSelected=!0)}else{for(r=""+Es(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Gm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(le(91));return Ct({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function z0(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(le(92));if(Ml(r)){if(1<r.length)throw Error(le(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Es(r)}}function OT(t,e){var r=Es(e.value),i=Es(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),i!=null&&(t.defaultValue=""+i)}function H0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function jT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Km(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?jT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bc,VT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bc=Bc||document.createElement("div"),Bc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function uu(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Wl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AR=["Webkit","ms","Moz","O"];Object.keys(Wl).forEach(function(t){AR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wl[e]=Wl[t]})});function FT(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Wl.hasOwnProperty(t)&&Wl[t]?(""+e).trim():e+"px"}function UT(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=FT(r,e[r],i);r==="float"&&(r="cssFloat"),i?t.setProperty(r,s):t[r]=s}}var PR=Ct({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ym(t,e){if(e){if(PR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(le(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(le(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(le(61))}if(e.style!=null&&typeof e.style!="object")throw Error(le(62))}}function Xm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qm=null;function Vv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jm=null,oa=null,aa=null;function W0(t){if(t=qu(t)){if(typeof Jm!="function")throw Error(le(280));var e=t.stateNode;e&&(e=sf(e),Jm(t.stateNode,t.type,e))}}function BT(t){oa?aa?aa.push(t):aa=[t]:oa=t}function $T(){if(oa){var t=oa,e=aa;if(aa=oa=null,W0(t),e)for(t=0;t<e.length;t++)W0(e[t])}}function zT(t,e){return t(e)}function HT(){}var kp=!1;function WT(t,e,r){if(kp)return t(e,r);kp=!0;try{return zT(t,e,r)}finally{kp=!1,(oa!==null||aa!==null)&&(HT(),$T())}}function cu(t,e){var r=t.stateNode;if(r===null)return null;var i=sf(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(le(231,e,typeof r));return r}var Zm=!1;if(Ei)try{var ml={};Object.defineProperty(ml,"passive",{get:function(){Zm=!0}}),window.addEventListener("test",ml,ml),window.removeEventListener("test",ml,ml)}catch{Zm=!1}function RR(t,e,r,i,s,o,a,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(h){this.onError(h)}}var ql=!1,Gd=null,Kd=!1,eg=null,NR={onError:function(t){ql=!0,Gd=t}};function DR(t,e,r,i,s,o,a,l,u){ql=!1,Gd=null,RR.apply(NR,arguments)}function MR(t,e,r,i,s,o,a,l,u){if(DR.apply(this,arguments),ql){if(ql){var c=Gd;ql=!1,Gd=null}else throw Error(le(198));Kd||(Kd=!0,eg=c)}}function wo(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function qT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function q0(t){if(wo(t)!==t)throw Error(le(188))}function LR(t){var e=t.alternate;if(!e){if(e=wo(t),e===null)throw Error(le(188));return e!==t?null:t}for(var r=t,i=e;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){r=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return q0(s),t;if(o===i)return q0(s),e;o=o.sibling}throw Error(le(188))}if(r.return!==i.return)r=s,i=o;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,i=o;break}if(l===i){a=!0,i=s,r=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===r){a=!0,r=o,i=s;break}if(l===i){a=!0,i=o,r=s;break}l=l.sibling}if(!a)throw Error(le(189))}}if(r.alternate!==i)throw Error(le(190))}if(r.tag!==3)throw Error(le(188));return r.stateNode.current===r?t:e}function GT(t){return t=LR(t),t!==null?KT(t):null}function KT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=KT(t);if(e!==null)return e;t=t.sibling}return null}var XT=rr.unstable_scheduleCallback,G0=rr.unstable_cancelCallback,OR=rr.unstable_shouldYield,jR=rr.unstable_requestPaint,Lt=rr.unstable_now,VR=rr.unstable_getCurrentPriorityLevel,Fv=rr.unstable_ImmediatePriority,QT=rr.unstable_UserBlockingPriority,Yd=rr.unstable_NormalPriority,FR=rr.unstable_LowPriority,JT=rr.unstable_IdlePriority,ef=null,Qr=null;function UR(t){if(Qr&&typeof Qr.onCommitFiberRoot=="function")try{Qr.onCommitFiberRoot(ef,t,void 0,(t.current.flags&128)===128)}catch{}}var Fr=Math.clz32?Math.clz32:zR,BR=Math.log,$R=Math.LN2;function zR(t){return t>>>=0,t===0?32:31-(BR(t)/$R|0)|0}var $c=64,zc=4194304;function Ll(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xd(t,e){var r=t.pendingLanes;if(r===0)return 0;var i=0,s=t.suspendedLanes,o=t.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?i=Ll(l):(o&=a,o!==0&&(i=Ll(o)))}else a=r&~s,a!==0?i=Ll(a):o!==0&&(i=Ll(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)r=31-Fr(e),s=1<<r,i|=t[r],e&=~s;return i}function HR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WR(t,e){for(var r=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Fr(o),l=1<<a,u=s[a];u===-1?(!(l&r)||l&i)&&(s[a]=HR(l,e)):u<=e&&(t.expiredLanes|=l),o&=~l}}function tg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ZT(){var t=$c;return $c<<=1,!($c&4194240)&&($c=64),t}function Cp(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Hu(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Fr(e),t[e]=r}function qR(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Fr(r),o=1<<s;e[s]=0,i[s]=-1,t[s]=-1,r&=~o}}function Uv(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var i=31-Fr(r),s=1<<i;s&e|t[i]&e&&(t[i]|=e),r&=~s}}var st=0;function eS(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var tS,Bv,nS,rS,iS,ng=!1,Hc=[],os=null,as=null,ls=null,du=new Map,hu=new Map,Qi=[],GR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function K0(t,e){switch(t){case"focusin":case"focusout":os=null;break;case"dragenter":case"dragleave":as=null;break;case"mouseover":case"mouseout":ls=null;break;case"pointerover":case"pointerout":du.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hu.delete(e.pointerId)}}function gl(t,e,r,i,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=qu(e),e!==null&&Bv(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function KR(t,e,r,i,s){switch(e){case"focusin":return os=gl(os,t,e,r,i,s),!0;case"dragenter":return as=gl(as,t,e,r,i,s),!0;case"mouseover":return ls=gl(ls,t,e,r,i,s),!0;case"pointerover":var o=s.pointerId;return du.set(o,gl(du.get(o)||null,t,e,r,i,s)),!0;case"gotpointercapture":return o=s.pointerId,hu.set(o,gl(hu.get(o)||null,t,e,r,i,s)),!0}return!1}function sS(t){var e=Zs(t.target);if(e!==null){var r=wo(e);if(r!==null){if(e=r.tag,e===13){if(e=qT(r),e!==null){t.blockedOn=e,iS(t.priority,function(){nS(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _d(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=rg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var i=new r.constructor(r.type,r);Qm=i,r.target.dispatchEvent(i),Qm=null}else return e=qu(r),e!==null&&Bv(e),t.blockedOn=r,!1;e.shift()}return!0}function Y0(t,e,r){_d(t)&&r.delete(e)}function YR(){ng=!1,os!==null&&_d(os)&&(os=null),as!==null&&_d(as)&&(as=null),ls!==null&&_d(ls)&&(ls=null),du.forEach(Y0),hu.forEach(Y0)}function vl(t,e){t.blockedOn===e&&(t.blockedOn=null,ng||(ng=!0,rr.unstable_scheduleCallback(rr.unstable_NormalPriority,YR)))}function fu(t){function e(s){return vl(s,t)}if(0<Hc.length){vl(Hc[0],t);for(var r=1;r<Hc.length;r++){var i=Hc[r];i.blockedOn===t&&(i.blockedOn=null)}}for(os!==null&&vl(os,t),as!==null&&vl(as,t),ls!==null&&vl(ls,t),du.forEach(e),hu.forEach(e),r=0;r<Qi.length;r++)i=Qi[r],i.blockedOn===t&&(i.blockedOn=null);for(;0<Qi.length&&(r=Qi[0],r.blockedOn===null);)sS(r),r.blockedOn===null&&Qi.shift()}var la=Di.ReactCurrentBatchConfig,Qd=!0;function XR(t,e,r,i){var s=st,o=la.transition;la.transition=null;try{st=1,$v(t,e,r,i)}finally{st=s,la.transition=o}}function QR(t,e,r,i){var s=st,o=la.transition;la.transition=null;try{st=4,$v(t,e,r,i)}finally{st=s,la.transition=o}}function $v(t,e,r,i){if(Qd){var s=rg(t,e,r,i);if(s===null)Vp(t,e,i,Jd,r),K0(t,i);else if(KR(s,t,e,r,i))i.stopPropagation();else if(K0(t,i),e&4&&-1<GR.indexOf(t)){for(;s!==null;){var o=qu(s);if(o!==null&&tS(o),o=rg(t,e,r,i),o===null&&Vp(t,e,i,Jd,r),o===s)break;s=o}s!==null&&i.stopPropagation()}else Vp(t,e,i,null,r)}}var Jd=null;function rg(t,e,r,i){if(Jd=null,t=Vv(i),t=Zs(t),t!==null)if(e=wo(t),e===null)t=null;else if(r=e.tag,r===13){if(t=qT(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jd=t,null}function oS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VR()){case Fv:return 1;case QT:return 4;case Yd:case FR:return 16;case JT:return 536870912;default:return 16}default:return 16}}var rs=null,zv=null,wd=null;function aS(){if(wd)return wd;var t,e=zv,r=e.length,i,s="value"in rs?rs.value:rs.textContent,o=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(i=1;i<=a&&e[r-i]===s[o-i];i++);return wd=s.slice(t,1<i?1-i:void 0)}function bd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wc(){return!0}function X0(){return!1}function or(t){function e(r,i,s,o,a){this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Wc:X0,this.isPropagationStopped=X0,this}return Ct(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Wc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Wc)},persist:function(){},isPersistent:Wc}),e}var $a={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hv=or($a),Wu=Ct({},$a,{view:0,detail:0}),JR=or(Wu),Ap,Pp,yl,tf=Ct({},Wu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yl&&(yl&&t.type==="mousemove"?(Ap=t.screenX-yl.screenX,Pp=t.screenY-yl.screenY):Pp=Ap=0,yl=t),Ap)},movementY:function(t){return"movementY"in t?t.movementY:Pp}}),Q0=or(tf),ZR=Ct({},tf,{dataTransfer:0}),eN=or(ZR),tN=Ct({},Wu,{relatedTarget:0}),Rp=or(tN),nN=Ct({},$a,{animationName:0,elapsedTime:0,pseudoElement:0}),rN=or(nN),iN=Ct({},$a,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sN=or(iN),oN=Ct({},$a,{data:0}),J0=or(oN),aN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=uN[t])?!!e[t]:!1}function Wv(){return cN}var dN=Ct({},Wu,{key:function(t){if(t.key){var e=aN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wv,charCode:function(t){return t.type==="keypress"?bd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hN=or(dN),fN=Ct({},tf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Z0=or(fN),pN=Ct({},Wu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wv}),mN=or(pN),gN=Ct({},$a,{propertyName:0,elapsedTime:0,pseudoElement:0}),vN=or(gN),yN=Ct({},tf,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),_N=or(yN),wN=[9,13,27,32],qv=Ei&&"CompositionEvent"in window,Gl=null;Ei&&"documentMode"in document&&(Gl=document.documentMode);var bN=Ei&&"TextEvent"in window&&!Gl,lS=Ei&&(!qv||Gl&&8<Gl&&11>=Gl),ew=" ",tw=!1;function uS(t,e){switch(t){case"keyup":return wN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ko=!1;function xN(t,e){switch(t){case"compositionend":return cS(e);case"keypress":return e.which!==32?null:(tw=!0,ew);case"textInput":return t=e.data,t===ew&&tw?null:t;default:return null}}function EN(t,e){if(Ko)return t==="compositionend"||!qv&&uS(t,e)?(t=aS(),wd=zv=rs=null,Ko=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lS&&e.locale!=="ko"?null:e.data;default:return null}}var TN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!TN[t.type]:e==="textarea"}function dS(t,e,r,i){BT(i),e=Zd(e,"onChange"),0<e.length&&(r=new Hv("onChange","change",null,r,i),t.push({event:r,listeners:e}))}var Kl=null,pu=null;function SN(t){xS(t,0)}function nf(t){var e=Qo(t);if(MT(e))return t}function IN(t,e){if(t==="change")return e}var hS=!1;if(Ei){var Np;if(Ei){var Dp="oninput"in document;if(!Dp){var rw=document.createElement("div");rw.setAttribute("oninput","return;"),Dp=typeof rw.oninput=="function"}Np=Dp}else Np=!1;hS=Np&&(!document.documentMode||9<document.documentMode)}function iw(){Kl&&(Kl.detachEvent("onpropertychange",fS),pu=Kl=null)}function fS(t){if(t.propertyName==="value"&&nf(pu)){var e=[];dS(e,pu,t,Vv(t)),WT(SN,e)}}function kN(t,e,r){t==="focusin"?(iw(),Kl=e,pu=r,Kl.attachEvent("onpropertychange",fS)):t==="focusout"&&iw()}function CN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nf(pu)}function AN(t,e){if(t==="click")return nf(e)}function PN(t,e){if(t==="input"||t==="change")return nf(e)}function RN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Br=typeof Object.is=="function"?Object.is:RN;function mu(t,e){if(Br(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!Fm.call(e,s)||!Br(t[s],e[s]))return!1}return!0}function sw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ow(t,e){var r=sw(t);t=0;for(var i;r;){if(r.nodeType===3){if(i=t+r.textContent.length,t<=e&&i>=e)return{node:r,offset:e-t};t=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=sw(r)}}function pS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?pS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function mS(){for(var t=window,e=qd();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=qd(t.document)}return e}function Gv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function NN(t){var e=mS(),r=t.focusedElem,i=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&pS(r.ownerDocument.documentElement,r)){if(i!==null&&Gv(r)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!t.extend&&o>i&&(s=i,i=o,o=s),s=ow(r,o);var a=ow(r,i);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var DN=Ei&&"documentMode"in document&&11>=document.documentMode,Yo=null,ig=null,Yl=null,sg=!1;function aw(t,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;sg||Yo==null||Yo!==qd(i)||(i=Yo,"selectionStart"in i&&Gv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Yl&&mu(Yl,i)||(Yl=i,i=Zd(ig,"onSelect"),0<i.length&&(e=new Hv("onSelect","select",null,e,r),t.push({event:e,listeners:i}),e.target=Yo)))}function qc(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Xo={animationend:qc("Animation","AnimationEnd"),animationiteration:qc("Animation","AnimationIteration"),animationstart:qc("Animation","AnimationStart"),transitionend:qc("Transition","TransitionEnd")},Mp={},gS={};Ei&&(gS=document.createElement("div").style,"AnimationEvent"in window||(delete Xo.animationend.animation,delete Xo.animationiteration.animation,delete Xo.animationstart.animation),"TransitionEvent"in window||delete Xo.transitionend.transition);function rf(t){if(Mp[t])return Mp[t];if(!Xo[t])return t;var e=Xo[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in gS)return Mp[t]=e[r];return t}var vS=rf("animationend"),yS=rf("animationiteration"),_S=rf("animationstart"),wS=rf("transitionend"),bS=new Map,lw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ms(t,e){bS.set(t,e),_o(e,[t])}for(var Lp=0;Lp<lw.length;Lp++){var Op=lw[Lp],MN=Op.toLowerCase(),LN=Op[0].toUpperCase()+Op.slice(1);Ms(MN,"on"+LN)}Ms(vS,"onAnimationEnd");Ms(yS,"onAnimationIteration");Ms(_S,"onAnimationStart");Ms("dblclick","onDoubleClick");Ms("focusin","onFocus");Ms("focusout","onBlur");Ms(wS,"onTransitionEnd");va("onMouseEnter",["mouseout","mouseover"]);va("onMouseLeave",["mouseout","mouseover"]);va("onPointerEnter",["pointerout","pointerover"]);va("onPointerLeave",["pointerout","pointerover"]);_o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_o("onBeforeInput",["compositionend","keypress","textInput","paste"]);_o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ON=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ol));function uw(t,e,r){var i=t.type||"unknown-event";t.currentTarget=r,MR(i,e,void 0,t),t.currentTarget=null}function xS(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var i=t[r],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==o&&s.isPropagationStopped())break e;uw(s,l,c),o=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,c=l.currentTarget,l=l.listener,u!==o&&s.isPropagationStopped())break e;uw(s,l,c),o=u}}}if(Kd)throw t=eg,Kd=!1,eg=null,t}function gt(t,e){var r=e[cg];r===void 0&&(r=e[cg]=new Set);var i=t+"__bubble";r.has(i)||(ES(e,t,2,!1),r.add(i))}function jp(t,e,r){var i=0;e&&(i|=4),ES(r,t,i,e)}var Gc="_reactListening"+Math.random().toString(36).slice(2);function gu(t){if(!t[Gc]){t[Gc]=!0,AT.forEach(function(r){r!=="selectionchange"&&(ON.has(r)||jp(r,!1,t),jp(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gc]||(e[Gc]=!0,jp("selectionchange",!1,e))}}function ES(t,e,r,i){switch(oS(e)){case 1:var s=XR;break;case 4:s=QR;break;default:s=$v}r=s.bind(null,e,r,t),s=void 0,!Zm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Vp(t,e,r,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Zs(l),a===null)return;if(u=a.tag,u===5||u===6){i=o=a;continue e}l=l.parentNode}}i=i.return}WT(function(){var c=o,h=Vv(r),f=[];e:{var p=bS.get(t);if(p!==void 0){var g=Hv,b=t;switch(t){case"keypress":if(bd(r)===0)break e;case"keydown":case"keyup":g=hN;break;case"focusin":b="focus",g=Rp;break;case"focusout":b="blur",g=Rp;break;case"beforeblur":case"afterblur":g=Rp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Q0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=eN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=mN;break;case vS:case yS:case _S:g=rN;break;case wS:g=vN;break;case"scroll":g=JR;break;case"wheel":g=_N;break;case"copy":case"cut":case"paste":g=sN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Z0}var R=(e&4)!==0,P=!R&&t==="scroll",x=R?p!==null?p+"Capture":null:p;R=[];for(var _=c,T;_!==null;){T=_;var L=T.stateNode;if(T.tag===5&&L!==null&&(T=L,x!==null&&(L=cu(_,x),L!=null&&R.push(vu(_,L,T)))),P)break;_=_.return}0<R.length&&(p=new g(p,b,null,r,h),f.push({event:p,listeners:R}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&r!==Qm&&(b=r.relatedTarget||r.fromElement)&&(Zs(b)||b[Ti]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(b=r.relatedTarget||r.toElement,g=c,b=b?Zs(b):null,b!==null&&(P=wo(b),b!==P||b.tag!==5&&b.tag!==6)&&(b=null)):(g=null,b=c),g!==b)){if(R=Q0,L="onMouseLeave",x="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(R=Z0,L="onPointerLeave",x="onPointerEnter",_="pointer"),P=g==null?p:Qo(g),T=b==null?p:Qo(b),p=new R(L,_+"leave",g,r,h),p.target=P,p.relatedTarget=T,L=null,Zs(h)===c&&(R=new R(x,_+"enter",b,r,h),R.target=T,R.relatedTarget=P,L=R),P=L,g&&b)t:{for(R=g,x=b,_=0,T=R;T;T=Lo(T))_++;for(T=0,L=x;L;L=Lo(L))T++;for(;0<_-T;)R=Lo(R),_--;for(;0<T-_;)x=Lo(x),T--;for(;_--;){if(R===x||x!==null&&R===x.alternate)break t;R=Lo(R),x=Lo(x)}R=null}else R=null;g!==null&&cw(f,p,g,R,!1),b!==null&&P!==null&&cw(f,P,b,R,!0)}}e:{if(p=c?Qo(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var F=IN;else if(nw(p))if(hS)F=PN;else{F=CN;var V=kN}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(F=AN);if(F&&(F=F(t,c))){dS(f,F,r,h);break e}V&&V(t,p,c),t==="focusout"&&(V=p._wrapperState)&&V.controlled&&p.type==="number"&&qm(p,"number",p.value)}switch(V=c?Qo(c):window,t){case"focusin":(nw(V)||V.contentEditable==="true")&&(Yo=V,ig=c,Yl=null);break;case"focusout":Yl=ig=Yo=null;break;case"mousedown":sg=!0;break;case"contextmenu":case"mouseup":case"dragend":sg=!1,aw(f,r,h);break;case"selectionchange":if(DN)break;case"keydown":case"keyup":aw(f,r,h)}var D;if(qv)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Ko?uS(t,r)&&(I="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(lS&&r.locale!=="ko"&&(Ko||I!=="onCompositionStart"?I==="onCompositionEnd"&&Ko&&(D=aS()):(rs=h,zv="value"in rs?rs.value:rs.textContent,Ko=!0)),V=Zd(c,I),0<V.length&&(I=new J0(I,t,null,r,h),f.push({event:I,listeners:V}),D?I.data=D:(D=cS(r),D!==null&&(I.data=D)))),(D=bN?xN(t,r):EN(t,r))&&(c=Zd(c,"onBeforeInput"),0<c.length&&(h=new J0("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:c}),h.data=D))}xS(f,e)})}function vu(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Zd(t,e){for(var r=e+"Capture",i=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=cu(t,r),o!=null&&i.unshift(vu(t,o,s)),o=cu(t,e),o!=null&&i.push(vu(t,o,s))),t=t.return}return i}function Lo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function cw(t,e,r,i,s){for(var o=e._reactName,a=[];r!==null&&r!==i;){var l=r,u=l.alternate,c=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&c!==null&&(l=c,s?(u=cu(r,o),u!=null&&a.unshift(vu(r,u,l))):s||(u=cu(r,o),u!=null&&a.push(vu(r,u,l)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var jN=/\r\n?/g,VN=/\u0000|\uFFFD/g;function dw(t){return(typeof t=="string"?t:""+t).replace(jN,`
`).replace(VN,"")}function Kc(t,e,r){if(e=dw(e),dw(t)!==e&&r)throw Error(le(425))}function eh(){}var og=null,ag=null;function lg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ug=typeof setTimeout=="function"?setTimeout:void 0,FN=typeof clearTimeout=="function"?clearTimeout:void 0,hw=typeof Promise=="function"?Promise:void 0,UN=typeof queueMicrotask=="function"?queueMicrotask:typeof hw<"u"?function(t){return hw.resolve(null).then(t).catch(BN)}:ug;function BN(t){setTimeout(function(){throw t})}function Fp(t,e){var r=e,i=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(i===0){t.removeChild(s),fu(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=s}while(r);fu(e)}function us(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function fw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var za=Math.random().toString(36).slice(2),Xr="__reactFiber$"+za,yu="__reactProps$"+za,Ti="__reactContainer$"+za,cg="__reactEvents$"+za,$N="__reactListeners$"+za,zN="__reactHandles$"+za;function Zs(t){var e=t[Xr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ti]||r[Xr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=fw(t);t!==null;){if(r=t[Xr])return r;t=fw(t)}return e}t=r,r=t.parentNode}return null}function qu(t){return t=t[Xr]||t[Ti],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Qo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(le(33))}function sf(t){return t[yu]||null}var dg=[],Jo=-1;function Ls(t){return{current:t}}function vt(t){0>Jo||(t.current=dg[Jo],dg[Jo]=null,Jo--)}function ft(t,e){Jo++,dg[Jo]=t.current,t.current=e}var Ts={},En=Ls(Ts),$n=Ls(!1),oo=Ts;function ya(t,e){var r=t.type.contextTypes;if(!r)return Ts;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function zn(t){return t=t.childContextTypes,t!=null}function th(){vt($n),vt(En)}function pw(t,e,r){if(En.current!==Ts)throw Error(le(168));ft(En,e),ft($n,r)}function TS(t,e,r){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(le(108,kR(t)||"Unknown",s));return Ct({},r,i)}function nh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ts,oo=En.current,ft(En,t),ft($n,$n.current),!0}function mw(t,e,r){var i=t.stateNode;if(!i)throw Error(le(169));r?(t=TS(t,e,oo),i.__reactInternalMemoizedMergedChildContext=t,vt($n),vt(En),ft(En,t)):vt($n),ft($n,r)}var pi=null,of=!1,Up=!1;function SS(t){pi===null?pi=[t]:pi.push(t)}function HN(t){of=!0,SS(t)}function Os(){if(!Up&&pi!==null){Up=!0;var t=0,e=st;try{var r=pi;for(st=1;t<r.length;t++){var i=r[t];do i=i(!0);while(i!==null)}pi=null,of=!1}catch(s){throw pi!==null&&(pi=pi.slice(t+1)),XT(Fv,Os),s}finally{st=e,Up=!1}}return null}var Zo=[],ea=0,rh=null,ih=0,mr=[],gr=0,ao=null,mi=1,gi="";function Gs(t,e){Zo[ea++]=ih,Zo[ea++]=rh,rh=t,ih=e}function IS(t,e,r){mr[gr++]=mi,mr[gr++]=gi,mr[gr++]=ao,ao=t;var i=mi;t=gi;var s=32-Fr(i)-1;i&=~(1<<s),r+=1;var o=32-Fr(e)+s;if(30<o){var a=s-s%5;o=(i&(1<<a)-1).toString(32),i>>=a,s-=a,mi=1<<32-Fr(e)+s|r<<s|i,gi=o+t}else mi=1<<o|r<<s|i,gi=t}function Kv(t){t.return!==null&&(Gs(t,1),IS(t,1,0))}function Yv(t){for(;t===rh;)rh=Zo[--ea],Zo[ea]=null,ih=Zo[--ea],Zo[ea]=null;for(;t===ao;)ao=mr[--gr],mr[gr]=null,gi=mr[--gr],mr[gr]=null,mi=mr[--gr],mr[gr]=null}var Zn=null,Xn=null,wt=!1,Or=null;function kS(t,e){var r=yr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function gw(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Zn=t,Xn=us(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Zn=t,Xn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ao!==null?{id:mi,overflow:gi}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=yr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Zn=t,Xn=null,!0):!1;default:return!1}}function hg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fg(t){if(wt){var e=Xn;if(e){var r=e;if(!gw(t,e)){if(hg(t))throw Error(le(418));e=us(r.nextSibling);var i=Zn;e&&gw(t,e)?kS(i,r):(t.flags=t.flags&-4097|2,wt=!1,Zn=t)}}else{if(hg(t))throw Error(le(418));t.flags=t.flags&-4097|2,wt=!1,Zn=t}}}function vw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Zn=t}function Yc(t){if(t!==Zn)return!1;if(!wt)return vw(t),wt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!lg(t.type,t.memoizedProps)),e&&(e=Xn)){if(hg(t))throw CS(),Error(le(418));for(;e;)kS(t,e),e=us(e.nextSibling)}if(vw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(le(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Xn=us(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Xn=null}}else Xn=Zn?us(t.stateNode.nextSibling):null;return!0}function CS(){for(var t=Xn;t;)t=us(t.nextSibling)}function _a(){Xn=Zn=null,wt=!1}function Xv(t){Or===null?Or=[t]:Or.push(t)}var WN=Di.ReactCurrentBatchConfig;function _l(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(le(309));var i=r.stateNode}if(!i)throw Error(le(147,t));var s=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(le(284));if(!r._owner)throw Error(le(290,t))}return t}function Xc(t,e){throw t=Object.prototype.toString.call(e),Error(le(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function yw(t){var e=t._init;return e(t._payload)}function AS(t){function e(x,_){if(t){var T=x.deletions;T===null?(x.deletions=[_],x.flags|=16):T.push(_)}}function r(x,_){if(!t)return null;for(;_!==null;)e(x,_),_=_.sibling;return null}function i(x,_){for(x=new Map;_!==null;)_.key!==null?x.set(_.key,_):x.set(_.index,_),_=_.sibling;return x}function s(x,_){return x=fs(x,_),x.index=0,x.sibling=null,x}function o(x,_,T){return x.index=T,t?(T=x.alternate,T!==null?(T=T.index,T<_?(x.flags|=2,_):T):(x.flags|=2,_)):(x.flags|=1048576,_)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,_,T,L){return _===null||_.tag!==6?(_=Gp(T,x.mode,L),_.return=x,_):(_=s(_,T),_.return=x,_)}function u(x,_,T,L){var F=T.type;return F===Go?h(x,_,T.props.children,L,T.key):_!==null&&(_.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Ki&&yw(F)===_.type)?(L=s(_,T.props),L.ref=_l(x,_,T),L.return=x,L):(L=Cd(T.type,T.key,T.props,null,x.mode,L),L.ref=_l(x,_,T),L.return=x,L)}function c(x,_,T,L){return _===null||_.tag!==4||_.stateNode.containerInfo!==T.containerInfo||_.stateNode.implementation!==T.implementation?(_=Kp(T,x.mode,L),_.return=x,_):(_=s(_,T.children||[]),_.return=x,_)}function h(x,_,T,L,F){return _===null||_.tag!==7?(_=so(T,x.mode,L,F),_.return=x,_):(_=s(_,T),_.return=x,_)}function f(x,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Gp(""+_,x.mode,T),_.return=x,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Fc:return T=Cd(_.type,_.key,_.props,null,x.mode,T),T.ref=_l(x,null,_),T.return=x,T;case qo:return _=Kp(_,x.mode,T),_.return=x,_;case Ki:var L=_._init;return f(x,L(_._payload),T)}if(Ml(_)||pl(_))return _=so(_,x.mode,T,null),_.return=x,_;Xc(x,_)}return null}function p(x,_,T,L){var F=_!==null?_.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return F!==null?null:l(x,_,""+T,L);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Fc:return T.key===F?u(x,_,T,L):null;case qo:return T.key===F?c(x,_,T,L):null;case Ki:return F=T._init,p(x,_,F(T._payload),L)}if(Ml(T)||pl(T))return F!==null?null:h(x,_,T,L,null);Xc(x,T)}return null}function g(x,_,T,L,F){if(typeof L=="string"&&L!==""||typeof L=="number")return x=x.get(T)||null,l(_,x,""+L,F);if(typeof L=="object"&&L!==null){switch(L.$$typeof){case Fc:return x=x.get(L.key===null?T:L.key)||null,u(_,x,L,F);case qo:return x=x.get(L.key===null?T:L.key)||null,c(_,x,L,F);case Ki:var V=L._init;return g(x,_,T,V(L._payload),F)}if(Ml(L)||pl(L))return x=x.get(T)||null,h(_,x,L,F,null);Xc(_,L)}return null}function b(x,_,T,L){for(var F=null,V=null,D=_,I=_=0,E=null;D!==null&&I<T.length;I++){D.index>I?(E=D,D=null):E=D.sibling;var w=p(x,D,T[I],L);if(w===null){D===null&&(D=E);break}t&&D&&w.alternate===null&&e(x,D),_=o(w,_,I),V===null?F=w:V.sibling=w,V=w,D=E}if(I===T.length)return r(x,D),wt&&Gs(x,I),F;if(D===null){for(;I<T.length;I++)D=f(x,T[I],L),D!==null&&(_=o(D,_,I),V===null?F=D:V.sibling=D,V=D);return wt&&Gs(x,I),F}for(D=i(x,D);I<T.length;I++)E=g(D,x,I,T[I],L),E!==null&&(t&&E.alternate!==null&&D.delete(E.key===null?I:E.key),_=o(E,_,I),V===null?F=E:V.sibling=E,V=E);return t&&D.forEach(function(y){return e(x,y)}),wt&&Gs(x,I),F}function R(x,_,T,L){var F=pl(T);if(typeof F!="function")throw Error(le(150));if(T=F.call(T),T==null)throw Error(le(151));for(var V=F=null,D=_,I=_=0,E=null,w=T.next();D!==null&&!w.done;I++,w=T.next()){D.index>I?(E=D,D=null):E=D.sibling;var y=p(x,D,w.value,L);if(y===null){D===null&&(D=E);break}t&&D&&y.alternate===null&&e(x,D),_=o(y,_,I),V===null?F=y:V.sibling=y,V=y,D=E}if(w.done)return r(x,D),wt&&Gs(x,I),F;if(D===null){for(;!w.done;I++,w=T.next())w=f(x,w.value,L),w!==null&&(_=o(w,_,I),V===null?F=w:V.sibling=w,V=w);return wt&&Gs(x,I),F}for(D=i(x,D);!w.done;I++,w=T.next())w=g(D,x,I,w.value,L),w!==null&&(t&&w.alternate!==null&&D.delete(w.key===null?I:w.key),_=o(w,_,I),V===null?F=w:V.sibling=w,V=w);return t&&D.forEach(function(C){return e(x,C)}),wt&&Gs(x,I),F}function P(x,_,T,L){if(typeof T=="object"&&T!==null&&T.type===Go&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Fc:e:{for(var F=T.key,V=_;V!==null;){if(V.key===F){if(F=T.type,F===Go){if(V.tag===7){r(x,V.sibling),_=s(V,T.props.children),_.return=x,x=_;break e}}else if(V.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Ki&&yw(F)===V.type){r(x,V.sibling),_=s(V,T.props),_.ref=_l(x,V,T),_.return=x,x=_;break e}r(x,V);break}else e(x,V);V=V.sibling}T.type===Go?(_=so(T.props.children,x.mode,L,T.key),_.return=x,x=_):(L=Cd(T.type,T.key,T.props,null,x.mode,L),L.ref=_l(x,_,T),L.return=x,x=L)}return a(x);case qo:e:{for(V=T.key;_!==null;){if(_.key===V)if(_.tag===4&&_.stateNode.containerInfo===T.containerInfo&&_.stateNode.implementation===T.implementation){r(x,_.sibling),_=s(_,T.children||[]),_.return=x,x=_;break e}else{r(x,_);break}else e(x,_);_=_.sibling}_=Kp(T,x.mode,L),_.return=x,x=_}return a(x);case Ki:return V=T._init,P(x,_,V(T._payload),L)}if(Ml(T))return b(x,_,T,L);if(pl(T))return R(x,_,T,L);Xc(x,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,_!==null&&_.tag===6?(r(x,_.sibling),_=s(_,T),_.return=x,x=_):(r(x,_),_=Gp(T,x.mode,L),_.return=x,x=_),a(x)):r(x,_)}return P}var wa=AS(!0),PS=AS(!1),sh=Ls(null),oh=null,ta=null,Qv=null;function Jv(){Qv=ta=oh=null}function Zv(t){var e=sh.current;vt(sh),t._currentValue=e}function pg(t,e,r){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===r)break;t=t.return}}function ua(t,e){oh=t,Qv=ta=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Bn=!0),t.firstContext=null)}function Er(t){var e=t._currentValue;if(Qv!==t)if(t={context:t,memoizedValue:e,next:null},ta===null){if(oh===null)throw Error(le(308));ta=t,oh.dependencies={lanes:0,firstContext:t}}else ta=ta.next=t;return e}var eo=null;function ey(t){eo===null?eo=[t]:eo.push(t)}function RS(t,e,r,i){var s=e.interleaved;return s===null?(r.next=r,ey(e)):(r.next=s.next,s.next=r),e.interleaved=r,Si(t,i)}function Si(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Yi=!1;function ty(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function NS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function cs(t,e,r){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ze&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Si(t,r)}return s=i.interleaved,s===null?(e.next=e,ey(i)):(e.next=s.next,s.next=e),i.interleaved=e,Si(t,r)}function xd(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,Uv(t,r)}}function _w(t,e){var r=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?s=o=e:o=o.next=e}else s=o=e;r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function ah(t,e,r,i){var s=t.updateQueue;Yi=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,a===null?o=c:a.next=c,a=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=u))}if(o!==null){var f=s.baseState;a=0,h=c=u=null,l=o;do{var p=l.lane,g=l.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,R=l;switch(p=e,g=r,R.tag){case 1:if(b=R.payload,typeof b=="function"){f=b.call(g,f,p);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=R.payload,p=typeof b=="function"?b.call(g,f,p):b,p==null)break e;f=Ct({},f,p);break e;case 2:Yi=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(c=h=g,u=f):h=h.next=g,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(u=f),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);uo|=a,t.lanes=a,t.memoizedState=f}}function ww(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=r,typeof s!="function")throw Error(le(191,s));s.call(i)}}}var Gu={},Jr=Ls(Gu),_u=Ls(Gu),wu=Ls(Gu);function to(t){if(t===Gu)throw Error(le(174));return t}function ny(t,e){switch(ft(wu,e),ft(_u,t),ft(Jr,Gu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Km(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Km(e,t)}vt(Jr),ft(Jr,e)}function ba(){vt(Jr),vt(_u),vt(wu)}function DS(t){to(wu.current);var e=to(Jr.current),r=Km(e,t.type);e!==r&&(ft(_u,t),ft(Jr,r))}function ry(t){_u.current===t&&(vt(Jr),vt(_u))}var St=Ls(0);function lh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bp=[];function iy(){for(var t=0;t<Bp.length;t++)Bp[t]._workInProgressVersionPrimary=null;Bp.length=0}var Ed=Di.ReactCurrentDispatcher,$p=Di.ReactCurrentBatchConfig,lo=0,kt=null,Ut=null,Xt=null,uh=!1,Xl=!1,bu=0,qN=0;function vn(){throw Error(le(321))}function sy(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Br(t[r],e[r]))return!1;return!0}function oy(t,e,r,i,s,o){if(lo=o,kt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ed.current=t===null||t.memoizedState===null?XN:QN,t=r(i,s),Xl){o=0;do{if(Xl=!1,bu=0,25<=o)throw Error(le(301));o+=1,Xt=Ut=null,e.updateQueue=null,Ed.current=JN,t=r(i,s)}while(Xl)}if(Ed.current=ch,e=Ut!==null&&Ut.next!==null,lo=0,Xt=Ut=kt=null,uh=!1,e)throw Error(le(300));return t}function ay(){var t=bu!==0;return bu=0,t}function Gr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xt===null?kt.memoizedState=Xt=t:Xt=Xt.next=t,Xt}function Tr(){if(Ut===null){var t=kt.alternate;t=t!==null?t.memoizedState:null}else t=Ut.next;var e=Xt===null?kt.memoizedState:Xt.next;if(e!==null)Xt=e,Ut=t;else{if(t===null)throw Error(le(310));Ut=t,t={memoizedState:Ut.memoizedState,baseState:Ut.baseState,baseQueue:Ut.baseQueue,queue:Ut.queue,next:null},Xt===null?kt.memoizedState=Xt=t:Xt=Xt.next=t}return Xt}function xu(t,e){return typeof e=="function"?e(t):e}function zp(t){var e=Tr(),r=e.queue;if(r===null)throw Error(le(311));r.lastRenderedReducer=t;var i=Ut,s=i.baseQueue,o=r.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}i.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,i=i.baseState;var l=a=null,u=null,c=o;do{var h=c.lane;if((lo&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=f,a=i):u=u.next=f,kt.lanes|=h,uo|=h}c=c.next}while(c!==null&&c!==o);u===null?a=i:u.next=l,Br(i,e.memoizedState)||(Bn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=u,r.lastRenderedState=i}if(t=r.interleaved,t!==null){s=t;do o=s.lane,kt.lanes|=o,uo|=o,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Hp(t){var e=Tr(),r=e.queue;if(r===null)throw Error(le(311));r.lastRenderedReducer=t;var i=r.dispatch,s=r.pending,o=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do o=t(o,a.action),a=a.next;while(a!==s);Br(o,e.memoizedState)||(Bn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,i]}function MS(){}function LS(t,e){var r=kt,i=Tr(),s=e(),o=!Br(i.memoizedState,s);if(o&&(i.memoizedState=s,Bn=!0),i=i.queue,ly(VS.bind(null,r,i,t),[t]),i.getSnapshot!==e||o||Xt!==null&&Xt.memoizedState.tag&1){if(r.flags|=2048,Eu(9,jS.bind(null,r,i,s,e),void 0,null),Qt===null)throw Error(le(349));lo&30||OS(r,e,s)}return s}function OS(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=kt.updateQueue,e===null?(e={lastEffect:null,stores:null},kt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function jS(t,e,r,i){e.value=r,e.getSnapshot=i,FS(e)&&US(t)}function VS(t,e,r){return r(function(){FS(e)&&US(t)})}function FS(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Br(t,r)}catch{return!0}}function US(t){var e=Si(t,1);e!==null&&Ur(e,t,1,-1)}function bw(t){var e=Gr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xu,lastRenderedState:t},e.queue=t,t=t.dispatch=YN.bind(null,kt,t),[e.memoizedState,t]}function Eu(t,e,r,i){return t={tag:t,create:e,destroy:r,deps:i,next:null},e=kt.updateQueue,e===null?(e={lastEffect:null,stores:null},kt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(i=r.next,r.next=t,t.next=i,e.lastEffect=t)),t}function BS(){return Tr().memoizedState}function Td(t,e,r,i){var s=Gr();kt.flags|=t,s.memoizedState=Eu(1|e,r,void 0,i===void 0?null:i)}function af(t,e,r,i){var s=Tr();i=i===void 0?null:i;var o=void 0;if(Ut!==null){var a=Ut.memoizedState;if(o=a.destroy,i!==null&&sy(i,a.deps)){s.memoizedState=Eu(e,r,o,i);return}}kt.flags|=t,s.memoizedState=Eu(1|e,r,o,i)}function xw(t,e){return Td(8390656,8,t,e)}function ly(t,e){return af(2048,8,t,e)}function $S(t,e){return af(4,2,t,e)}function zS(t,e){return af(4,4,t,e)}function HS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function WS(t,e,r){return r=r!=null?r.concat([t]):null,af(4,4,HS.bind(null,e,t),r)}function uy(){}function qS(t,e){var r=Tr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&sy(e,i[1])?i[0]:(r.memoizedState=[t,e],t)}function GS(t,e){var r=Tr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&sy(e,i[1])?i[0]:(t=t(),r.memoizedState=[t,e],t)}function KS(t,e,r){return lo&21?(Br(r,e)||(r=ZT(),kt.lanes|=r,uo|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Bn=!0),t.memoizedState=r)}function GN(t,e){var r=st;st=r!==0&&4>r?r:4,t(!0);var i=$p.transition;$p.transition={};try{t(!1),e()}finally{st=r,$p.transition=i}}function YS(){return Tr().memoizedState}function KN(t,e,r){var i=hs(t);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},XS(t))QS(e,r);else if(r=RS(t,e,r,i),r!==null){var s=Cn();Ur(r,t,i,s),JS(r,e,i)}}function YN(t,e,r){var i=hs(t),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(XS(t))QS(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,r);if(s.hasEagerState=!0,s.eagerState=l,Br(l,a)){var u=e.interleaved;u===null?(s.next=s,ey(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=RS(t,e,s,i),r!==null&&(s=Cn(),Ur(r,t,i,s),JS(r,e,i))}}function XS(t){var e=t.alternate;return t===kt||e!==null&&e===kt}function QS(t,e){Xl=uh=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function JS(t,e,r){if(r&4194240){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,Uv(t,r)}}var ch={readContext:Er,useCallback:vn,useContext:vn,useEffect:vn,useImperativeHandle:vn,useInsertionEffect:vn,useLayoutEffect:vn,useMemo:vn,useReducer:vn,useRef:vn,useState:vn,useDebugValue:vn,useDeferredValue:vn,useTransition:vn,useMutableSource:vn,useSyncExternalStore:vn,useId:vn,unstable_isNewReconciler:!1},XN={readContext:Er,useCallback:function(t,e){return Gr().memoizedState=[t,e===void 0?null:e],t},useContext:Er,useEffect:xw,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Td(4194308,4,HS.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Td(4194308,4,t,e)},useInsertionEffect:function(t,e){return Td(4,2,t,e)},useMemo:function(t,e){var r=Gr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var i=Gr();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=KN.bind(null,kt,t),[i.memoizedState,t]},useRef:function(t){var e=Gr();return t={current:t},e.memoizedState=t},useState:bw,useDebugValue:uy,useDeferredValue:function(t){return Gr().memoizedState=t},useTransition:function(){var t=bw(!1),e=t[0];return t=GN.bind(null,t[1]),Gr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var i=kt,s=Gr();if(wt){if(r===void 0)throw Error(le(407));r=r()}else{if(r=e(),Qt===null)throw Error(le(349));lo&30||OS(i,e,r)}s.memoizedState=r;var o={value:r,getSnapshot:e};return s.queue=o,xw(VS.bind(null,i,o,t),[t]),i.flags|=2048,Eu(9,jS.bind(null,i,o,r,e),void 0,null),r},useId:function(){var t=Gr(),e=Qt.identifierPrefix;if(wt){var r=gi,i=mi;r=(i&~(1<<32-Fr(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=bu++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=qN++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},QN={readContext:Er,useCallback:qS,useContext:Er,useEffect:ly,useImperativeHandle:WS,useInsertionEffect:$S,useLayoutEffect:zS,useMemo:GS,useReducer:zp,useRef:BS,useState:function(){return zp(xu)},useDebugValue:uy,useDeferredValue:function(t){var e=Tr();return KS(e,Ut.memoizedState,t)},useTransition:function(){var t=zp(xu)[0],e=Tr().memoizedState;return[t,e]},useMutableSource:MS,useSyncExternalStore:LS,useId:YS,unstable_isNewReconciler:!1},JN={readContext:Er,useCallback:qS,useContext:Er,useEffect:ly,useImperativeHandle:WS,useInsertionEffect:$S,useLayoutEffect:zS,useMemo:GS,useReducer:Hp,useRef:BS,useState:function(){return Hp(xu)},useDebugValue:uy,useDeferredValue:function(t){var e=Tr();return Ut===null?e.memoizedState=t:KS(e,Ut.memoizedState,t)},useTransition:function(){var t=Hp(xu)[0],e=Tr().memoizedState;return[t,e]},useMutableSource:MS,useSyncExternalStore:LS,useId:YS,unstable_isNewReconciler:!1};function Mr(t,e){if(t&&t.defaultProps){e=Ct({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function mg(t,e,r,i){e=t.memoizedState,r=r(i,e),r=r==null?e:Ct({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var lf={isMounted:function(t){return(t=t._reactInternals)?wo(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var i=Cn(),s=hs(t),o=wi(i,s);o.payload=e,r!=null&&(o.callback=r),e=cs(t,o,s),e!==null&&(Ur(e,t,s,i),xd(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var i=Cn(),s=hs(t),o=wi(i,s);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=cs(t,o,s),e!==null&&(Ur(e,t,s,i),xd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Cn(),i=hs(t),s=wi(r,i);s.tag=2,e!=null&&(s.callback=e),e=cs(t,s,i),e!==null&&(Ur(e,t,i,r),xd(e,t,i))}};function Ew(t,e,r,i,s,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!mu(r,i)||!mu(s,o):!0}function ZS(t,e,r){var i=!1,s=Ts,o=e.contextType;return typeof o=="object"&&o!==null?o=Er(o):(s=zn(e)?oo:En.current,i=e.contextTypes,o=(i=i!=null)?ya(t,s):Ts),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lf,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function Tw(t,e,r,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==t&&lf.enqueueReplaceState(e,e.state,null)}function gg(t,e,r,i){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},ty(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Er(o):(o=zn(e)?oo:En.current,s.context=ya(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(mg(t,e,o,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&lf.enqueueReplaceState(s,s.state,null),ah(t,r,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function xa(t,e){try{var r="",i=e;do r+=IR(i),i=i.return;while(i);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function Wp(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function vg(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var ZN=typeof WeakMap=="function"?WeakMap:Map;function e1(t,e,r){r=wi(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){hh||(hh=!0,kg=i),vg(t,e)},r}function t1(t,e,r){r=wi(-1,r),r.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;r.payload=function(){return i(s)},r.callback=function(){vg(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){vg(t,e),typeof i!="function"&&(ds===null?ds=new Set([this]):ds.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function Sw(t,e,r){var i=t.pingCache;if(i===null){i=t.pingCache=new ZN;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(r)||(s.add(r),t=fD.bind(null,t,e,r),e.then(t,t))}function Iw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function kw(t,e,r,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=wi(-1,1),e.tag=2,cs(r,e,1))),r.lanes|=1),t)}var eD=Di.ReactCurrentOwner,Bn=!1;function kn(t,e,r,i){e.child=t===null?PS(e,null,r,i):wa(e,t.child,r,i)}function Cw(t,e,r,i,s){r=r.render;var o=e.ref;return ua(e,s),i=oy(t,e,r,i,o,s),r=ay(),t!==null&&!Bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ii(t,e,s)):(wt&&r&&Kv(e),e.flags|=1,kn(t,e,i,s),e.child)}function Aw(t,e,r,i,s){if(t===null){var o=r.type;return typeof o=="function"&&!vy(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,n1(t,e,o,i,s)):(t=Cd(r.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:mu,r(a,i)&&t.ref===e.ref)return Ii(t,e,s)}return e.flags|=1,t=fs(o,i),t.ref=e.ref,t.return=e,e.child=t}function n1(t,e,r,i,s){if(t!==null){var o=t.memoizedProps;if(mu(o,i)&&t.ref===e.ref)if(Bn=!1,e.pendingProps=i=o,(t.lanes&s)!==0)t.flags&131072&&(Bn=!0);else return e.lanes=t.lanes,Ii(t,e,s)}return yg(t,e,r,i,s)}function r1(t,e,r){var i=e.pendingProps,s=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ft(ra,Yn),Yn|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ft(ra,Yn),Yn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:r,ft(ra,Yn),Yn|=i}else o!==null?(i=o.baseLanes|r,e.memoizedState=null):i=r,ft(ra,Yn),Yn|=i;return kn(t,e,s,r),e.child}function i1(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function yg(t,e,r,i,s){var o=zn(r)?oo:En.current;return o=ya(e,o),ua(e,s),r=oy(t,e,r,i,o,s),i=ay(),t!==null&&!Bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ii(t,e,s)):(wt&&i&&Kv(e),e.flags|=1,kn(t,e,r,s),e.child)}function Pw(t,e,r,i,s){if(zn(r)){var o=!0;nh(e)}else o=!1;if(ua(e,s),e.stateNode===null)Sd(t,e),ZS(e,r,i),gg(e,r,i,s),i=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=Er(c):(c=zn(r)?oo:En.current,c=ya(e,c));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==i||u!==c)&&Tw(e,a,i,c),Yi=!1;var p=e.memoizedState;a.state=p,ah(e,i,a,s),u=e.memoizedState,l!==i||p!==u||$n.current||Yi?(typeof h=="function"&&(mg(e,r,h,i),u=e.memoizedState),(l=Yi||Ew(e,r,l,i,p,u,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),a.props=i,a.state=u,a.context=c,i=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,NS(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Mr(e.type,l),a.props=c,f=e.pendingProps,p=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=Er(u):(u=zn(r)?oo:En.current,u=ya(e,u));var g=r.getDerivedStateFromProps;(h=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||p!==u)&&Tw(e,a,i,u),Yi=!1,p=e.memoizedState,a.state=p,ah(e,i,a,s);var b=e.memoizedState;l!==f||p!==b||$n.current||Yi?(typeof g=="function"&&(mg(e,r,g,i),b=e.memoizedState),(c=Yi||Ew(e,r,c,i,p,b,u)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,b,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,b,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=b),a.props=i,a.state=b,a.context=u,i=c):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return _g(t,e,r,i,o,s)}function _g(t,e,r,i,s,o){i1(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return s&&mw(e,r,!1),Ii(t,e,o);i=e.stateNode,eD.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=wa(e,t.child,null,o),e.child=wa(e,null,l,o)):kn(t,e,l,o),e.memoizedState=i.state,s&&mw(e,r,!0),e.child}function s1(t){var e=t.stateNode;e.pendingContext?pw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&pw(t,e.context,!1),ny(t,e.containerInfo)}function Rw(t,e,r,i,s){return _a(),Xv(s),e.flags|=256,kn(t,e,r,i),e.child}var wg={dehydrated:null,treeContext:null,retryLane:0};function bg(t){return{baseLanes:t,cachePool:null,transitions:null}}function o1(t,e,r){var i=e.pendingProps,s=St.current,o=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ft(St,s&1),t===null)return fg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=df(a,i,0,null),t=so(t,i,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=bg(r),e.memoizedState=wg,t):cy(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return tD(t,e,a,i,l,s,r);if(o){o=i.fallback,a=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:i.children};return!(a&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=fs(s,u),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=fs(l,o):(o=so(o,a,r,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?bg(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~r,e.memoizedState=wg,i}return o=t.child,t=o.sibling,i=fs(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=i,e.memoizedState=null,i}function cy(t,e){return e=df({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qc(t,e,r,i){return i!==null&&Xv(i),wa(e,t.child,null,r),t=cy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function tD(t,e,r,i,s,o,a){if(r)return e.flags&256?(e.flags&=-257,i=Wp(Error(le(422))),Qc(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=df({mode:"visible",children:i.children},s,0,null),o=so(o,s,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&wa(e,t.child,null,a),e.child.memoizedState=bg(a),e.memoizedState=wg,o);if(!(e.mode&1))return Qc(t,e,a,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,o=Error(le(419)),i=Wp(o,i,void 0),Qc(t,e,a,i)}if(l=(a&t.childLanes)!==0,Bn||l){if(i=Qt,i!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Si(t,s),Ur(i,t,s,-1))}return gy(),i=Wp(Error(le(421))),Qc(t,e,a,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=pD.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,Xn=us(s.nextSibling),Zn=e,wt=!0,Or=null,t!==null&&(mr[gr++]=mi,mr[gr++]=gi,mr[gr++]=ao,mi=t.id,gi=t.overflow,ao=e),e=cy(e,i.children),e.flags|=4096,e)}function Nw(t,e,r){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),pg(t.return,e,r)}function qp(t,e,r,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=r,o.tailMode=s)}function a1(t,e,r){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(kn(t,e,i.children,r),i=St.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Nw(t,r,e);else if(t.tag===19)Nw(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ft(St,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&lh(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),qp(e,!1,s,r,o);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&lh(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}qp(e,!0,r,null,o);break;case"together":qp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ii(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),uo|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(le(153));if(e.child!==null){for(t=e.child,r=fs(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=fs(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function nD(t,e,r){switch(e.tag){case 3:s1(e),_a();break;case 5:DS(e);break;case 1:zn(e.type)&&nh(e);break;case 4:ny(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;ft(sh,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ft(St,St.current&1),e.flags|=128,null):r&e.child.childLanes?o1(t,e,r):(ft(St,St.current&1),t=Ii(t,e,r),t!==null?t.sibling:null);ft(St,St.current&1);break;case 19:if(i=(r&e.childLanes)!==0,t.flags&128){if(i)return a1(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ft(St,St.current),i)break;return null;case 22:case 23:return e.lanes=0,r1(t,e,r)}return Ii(t,e,r)}var l1,xg,u1,c1;l1=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};xg=function(){};u1=function(t,e,r,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,to(Jr.current);var o=null;switch(r){case"input":s=Hm(t,s),i=Hm(t,i),o=[];break;case"select":s=Ct({},s,{value:void 0}),i=Ct({},i,{value:void 0}),o=[];break;case"textarea":s=Gm(t,s),i=Gm(t,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=eh)}Ym(r,i);var a;r=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(lu.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var u=i[c];if(l=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(o||(o=[]),o.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(lu.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&gt("scroll",t),o||l===u||(o=[])):(o=o||[]).push(c,u))}r&&(o=o||[]).push("style",r);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};c1=function(t,e,r,i){r!==i&&(e.flags|=4)};function wl(t,e){if(!wt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function yn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,i=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=r,e}function rD(t,e,r){var i=e.pendingProps;switch(Yv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yn(e),null;case 1:return zn(e.type)&&th(),yn(e),null;case 3:return i=e.stateNode,ba(),vt($n),vt(En),iy(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Yc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Or!==null&&(Pg(Or),Or=null))),xg(t,e),yn(e),null;case 5:ry(e);var s=to(wu.current);if(r=e.type,t!==null&&e.stateNode!=null)u1(t,e,r,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(le(166));return yn(e),null}if(t=to(Jr.current),Yc(e)){i=e.stateNode,r=e.type;var o=e.memoizedProps;switch(i[Xr]=e,i[yu]=o,t=(e.mode&1)!==0,r){case"dialog":gt("cancel",i),gt("close",i);break;case"iframe":case"object":case"embed":gt("load",i);break;case"video":case"audio":for(s=0;s<Ol.length;s++)gt(Ol[s],i);break;case"source":gt("error",i);break;case"img":case"image":case"link":gt("error",i),gt("load",i);break;case"details":gt("toggle",i);break;case"input":B0(i,o),gt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},gt("invalid",i);break;case"textarea":z0(i,o),gt("invalid",i)}Ym(r,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?i.textContent!==l&&(o.suppressHydrationWarning!==!0&&Kc(i.textContent,l,t),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Kc(i.textContent,l,t),s=["children",""+l]):lu.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&gt("scroll",i)}switch(r){case"input":Uc(i),$0(i,o,!0);break;case"textarea":Uc(i),H0(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=eh)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=jT(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(r,{is:i.is}):(t=a.createElement(r),r==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,r),t[Xr]=e,t[yu]=i,l1(t,e,!1,!1),e.stateNode=t;e:{switch(a=Xm(r,i),r){case"dialog":gt("cancel",t),gt("close",t),s=i;break;case"iframe":case"object":case"embed":gt("load",t),s=i;break;case"video":case"audio":for(s=0;s<Ol.length;s++)gt(Ol[s],t);s=i;break;case"source":gt("error",t),s=i;break;case"img":case"image":case"link":gt("error",t),gt("load",t),s=i;break;case"details":gt("toggle",t),s=i;break;case"input":B0(t,i),s=Hm(t,i),gt("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Ct({},i,{value:void 0}),gt("invalid",t);break;case"textarea":z0(t,i),s=Gm(t,i),gt("invalid",t);break;default:s=i}Ym(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?UT(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&VT(t,u)):o==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&uu(t,u):typeof u=="number"&&uu(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(lu.hasOwnProperty(o)?u!=null&&o==="onScroll"&&gt("scroll",t):u!=null&&Mv(t,o,u,a))}switch(r){case"input":Uc(t),$0(t,i,!1);break;case"textarea":Uc(t),H0(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Es(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?sa(t,!!i.multiple,o,!1):i.defaultValue!=null&&sa(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=eh)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return yn(e),null;case 6:if(t&&e.stateNode!=null)c1(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(le(166));if(r=to(wu.current),to(Jr.current),Yc(e)){if(i=e.stateNode,r=e.memoizedProps,i[Xr]=e,(o=i.nodeValue!==r)&&(t=Zn,t!==null))switch(t.tag){case 3:Kc(i.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Kc(i.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Xr]=e,e.stateNode=i}return yn(e),null;case 13:if(vt(St),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(wt&&Xn!==null&&e.mode&1&&!(e.flags&128))CS(),_a(),e.flags|=98560,o=!1;else if(o=Yc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(le(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(le(317));o[Xr]=e}else _a(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;yn(e),o=!1}else Or!==null&&(Pg(Or),Or=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||St.current&1?zt===0&&(zt=3):gy())),e.updateQueue!==null&&(e.flags|=4),yn(e),null);case 4:return ba(),xg(t,e),t===null&&gu(e.stateNode.containerInfo),yn(e),null;case 10:return Zv(e.type._context),yn(e),null;case 17:return zn(e.type)&&th(),yn(e),null;case 19:if(vt(St),o=e.memoizedState,o===null)return yn(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)wl(o,!1);else{if(zt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=lh(t),a!==null){for(e.flags|=128,wl(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)o=r,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ft(St,St.current&1|2),e.child}t=t.sibling}o.tail!==null&&Lt()>Ea&&(e.flags|=128,i=!0,wl(o,!1),e.lanes=4194304)}else{if(!i)if(t=lh(a),t!==null){if(e.flags|=128,i=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),wl(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!wt)return yn(e),null}else 2*Lt()-o.renderingStartTime>Ea&&r!==1073741824&&(e.flags|=128,i=!0,wl(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(r=o.last,r!==null?r.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Lt(),e.sibling=null,r=St.current,ft(St,i?r&1|2:r&1),e):(yn(e),null);case 22:case 23:return my(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Yn&1073741824&&(yn(e),e.subtreeFlags&6&&(e.flags|=8192)):yn(e),null;case 24:return null;case 25:return null}throw Error(le(156,e.tag))}function iD(t,e){switch(Yv(e),e.tag){case 1:return zn(e.type)&&th(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ba(),vt($n),vt(En),iy(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ry(e),null;case 13:if(vt(St),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(le(340));_a()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return vt(St),null;case 4:return ba(),null;case 10:return Zv(e.type._context),null;case 22:case 23:return my(),null;case 24:return null;default:return null}}var Jc=!1,bn=!1,sD=typeof WeakSet=="function"?WeakSet:Set,ve=null;function na(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Nt(t,e,i)}else r.current=null}function Eg(t,e,r){try{r()}catch(i){Nt(t,e,i)}}var Dw=!1;function oD(t,e){if(og=Qd,t=mS(),Gv(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,l=-1,u=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==r||s!==0&&f.nodeType!==3||(l=a+s),f!==o||i!==0&&f.nodeType!==3||(u=a+i),f.nodeType===3&&(a+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===r&&++c===s&&(l=a),p===o&&++h===i&&(u=a),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(ag={focusedElem:t,selectionRange:r},Qd=!1,ve=e;ve!==null;)if(e=ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ve=t;else for(;ve!==null;){e=ve;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var R=b.memoizedProps,P=b.memoizedState,x=e.stateNode,_=x.getSnapshotBeforeUpdate(e.elementType===e.type?R:Mr(e.type,R),P);x.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(L){Nt(e,e.return,L)}if(t=e.sibling,t!==null){t.return=e.return,ve=t;break}ve=e.return}return b=Dw,Dw=!1,b}function Ql(t,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&Eg(e,r,o)}s=s.next}while(s!==i)}}function uf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function Tg(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function d1(t){var e=t.alternate;e!==null&&(t.alternate=null,d1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Xr],delete e[yu],delete e[cg],delete e[$N],delete e[zN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function h1(t){return t.tag===5||t.tag===3||t.tag===4}function Mw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||h1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sg(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=eh));else if(i!==4&&(t=t.child,t!==null))for(Sg(t,e,r),t=t.sibling;t!==null;)Sg(t,e,r),t=t.sibling}function Ig(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Ig(t,e,r),t=t.sibling;t!==null;)Ig(t,e,r),t=t.sibling}var sn=null,Lr=!1;function zi(t,e,r){for(r=r.child;r!==null;)f1(t,e,r),r=r.sibling}function f1(t,e,r){if(Qr&&typeof Qr.onCommitFiberUnmount=="function")try{Qr.onCommitFiberUnmount(ef,r)}catch{}switch(r.tag){case 5:bn||na(r,e);case 6:var i=sn,s=Lr;sn=null,zi(t,e,r),sn=i,Lr=s,sn!==null&&(Lr?(t=sn,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):sn.removeChild(r.stateNode));break;case 18:sn!==null&&(Lr?(t=sn,r=r.stateNode,t.nodeType===8?Fp(t.parentNode,r):t.nodeType===1&&Fp(t,r),fu(t)):Fp(sn,r.stateNode));break;case 4:i=sn,s=Lr,sn=r.stateNode.containerInfo,Lr=!0,zi(t,e,r),sn=i,Lr=s;break;case 0:case 11:case 14:case 15:if(!bn&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&Eg(r,e,a),s=s.next}while(s!==i)}zi(t,e,r);break;case 1:if(!bn&&(na(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(l){Nt(r,e,l)}zi(t,e,r);break;case 21:zi(t,e,r);break;case 22:r.mode&1?(bn=(i=bn)||r.memoizedState!==null,zi(t,e,r),bn=i):zi(t,e,r);break;default:zi(t,e,r)}}function Lw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new sD),e.forEach(function(i){var s=mD.bind(null,t,i);r.has(i)||(r.add(i),i.then(s,s))})}}function Rr(t,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];try{var o=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:sn=l.stateNode,Lr=!1;break e;case 3:sn=l.stateNode.containerInfo,Lr=!0;break e;case 4:sn=l.stateNode.containerInfo,Lr=!0;break e}l=l.return}if(sn===null)throw Error(le(160));f1(o,a,s),sn=null,Lr=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Nt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)p1(e,t),e=e.sibling}function p1(t,e){var r=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Rr(e,t),qr(t),i&4){try{Ql(3,t,t.return),uf(3,t)}catch(R){Nt(t,t.return,R)}try{Ql(5,t,t.return)}catch(R){Nt(t,t.return,R)}}break;case 1:Rr(e,t),qr(t),i&512&&r!==null&&na(r,r.return);break;case 5:if(Rr(e,t),qr(t),i&512&&r!==null&&na(r,r.return),t.flags&32){var s=t.stateNode;try{uu(s,"")}catch(R){Nt(t,t.return,R)}}if(i&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,a=r!==null?r.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&LT(s,o),Xm(l,a);var c=Xm(l,o);for(a=0;a<u.length;a+=2){var h=u[a],f=u[a+1];h==="style"?UT(s,f):h==="dangerouslySetInnerHTML"?VT(s,f):h==="children"?uu(s,f):Mv(s,h,f,c)}switch(l){case"input":Wm(s,o);break;case"textarea":OT(s,o);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?sa(s,!!o.multiple,g,!1):p!==!!o.multiple&&(o.defaultValue!=null?sa(s,!!o.multiple,o.defaultValue,!0):sa(s,!!o.multiple,o.multiple?[]:"",!1))}s[yu]=o}catch(R){Nt(t,t.return,R)}}break;case 6:if(Rr(e,t),qr(t),i&4){if(t.stateNode===null)throw Error(le(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(R){Nt(t,t.return,R)}}break;case 3:if(Rr(e,t),qr(t),i&4&&r!==null&&r.memoizedState.isDehydrated)try{fu(e.containerInfo)}catch(R){Nt(t,t.return,R)}break;case 4:Rr(e,t),qr(t);break;case 13:Rr(e,t),qr(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(fy=Lt())),i&4&&Lw(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(bn=(c=bn)||h,Rr(e,t),bn=c):Rr(e,t),qr(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(ve=t,h=t.child;h!==null;){for(f=ve=h;ve!==null;){switch(p=ve,g=p.child,p.tag){case 0:case 11:case 14:case 15:Ql(4,p,p.return);break;case 1:na(p,p.return);var b=p.stateNode;if(typeof b.componentWillUnmount=="function"){i=p,r=p.return;try{e=i,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(R){Nt(i,r,R)}}break;case 5:na(p,p.return);break;case 22:if(p.memoizedState!==null){jw(f);continue}}g!==null?(g.return=p,ve=g):jw(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,c?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=FT("display",a))}catch(R){Nt(t,t.return,R)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(R){Nt(t,t.return,R)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Rr(e,t),qr(t),i&4&&Lw(t);break;case 21:break;default:Rr(e,t),qr(t)}}function qr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(h1(r)){var i=r;break e}r=r.return}throw Error(le(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(uu(s,""),i.flags&=-33);var o=Mw(t);Ig(t,o,s);break;case 3:case 4:var a=i.stateNode.containerInfo,l=Mw(t);Sg(t,l,a);break;default:throw Error(le(161))}}catch(u){Nt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function aD(t,e,r){ve=t,m1(t)}function m1(t,e,r){for(var i=(t.mode&1)!==0;ve!==null;){var s=ve,o=s.child;if(s.tag===22&&i){var a=s.memoizedState!==null||Jc;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||bn;l=Jc;var c=bn;if(Jc=a,(bn=u)&&!c)for(ve=s;ve!==null;)a=ve,u=a.child,a.tag===22&&a.memoizedState!==null?Vw(s):u!==null?(u.return=a,ve=u):Vw(s);for(;o!==null;)ve=o,m1(o),o=o.sibling;ve=s,Jc=l,bn=c}Ow(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ve=o):Ow(t)}}function Ow(t){for(;ve!==null;){var e=ve;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:bn||uf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!bn)if(r===null)i.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Mr(e.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&ww(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}ww(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&fu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}bn||e.flags&512&&Tg(e)}catch(p){Nt(e,e.return,p)}}if(e===t){ve=null;break}if(r=e.sibling,r!==null){r.return=e.return,ve=r;break}ve=e.return}}function jw(t){for(;ve!==null;){var e=ve;if(e===t){ve=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ve=r;break}ve=e.return}}function Vw(t){for(;ve!==null;){var e=ve;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{uf(4,e)}catch(u){Nt(e,r,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(u){Nt(e,s,u)}}var o=e.return;try{Tg(e)}catch(u){Nt(e,o,u)}break;case 5:var a=e.return;try{Tg(e)}catch(u){Nt(e,a,u)}}}catch(u){Nt(e,e.return,u)}if(e===t){ve=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ve=l;break}ve=e.return}}var lD=Math.ceil,dh=Di.ReactCurrentDispatcher,dy=Di.ReactCurrentOwner,wr=Di.ReactCurrentBatchConfig,Ze=0,Qt=null,Ft=null,un=0,Yn=0,ra=Ls(0),zt=0,Tu=null,uo=0,cf=0,hy=0,Jl=null,Fn=null,fy=0,Ea=1/0,fi=null,hh=!1,kg=null,ds=null,Zc=!1,is=null,fh=0,Zl=0,Cg=null,Id=-1,kd=0;function Cn(){return Ze&6?Lt():Id!==-1?Id:Id=Lt()}function hs(t){return t.mode&1?Ze&2&&un!==0?un&-un:WN.transition!==null?(kd===0&&(kd=ZT()),kd):(t=st,t!==0||(t=window.event,t=t===void 0?16:oS(t.type)),t):1}function Ur(t,e,r,i){if(50<Zl)throw Zl=0,Cg=null,Error(le(185));Hu(t,r,i),(!(Ze&2)||t!==Qt)&&(t===Qt&&(!(Ze&2)&&(cf|=r),zt===4&&Ji(t,un)),Hn(t,i),r===1&&Ze===0&&!(e.mode&1)&&(Ea=Lt()+500,of&&Os()))}function Hn(t,e){var r=t.callbackNode;WR(t,e);var i=Xd(t,t===Qt?un:0);if(i===0)r!==null&&G0(r),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(r!=null&&G0(r),e===1)t.tag===0?HN(Fw.bind(null,t)):SS(Fw.bind(null,t)),UN(function(){!(Ze&6)&&Os()}),r=null;else{switch(eS(i)){case 1:r=Fv;break;case 4:r=QT;break;case 16:r=Yd;break;case 536870912:r=JT;break;default:r=Yd}r=E1(r,g1.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function g1(t,e){if(Id=-1,kd=0,Ze&6)throw Error(le(327));var r=t.callbackNode;if(ca()&&t.callbackNode!==r)return null;var i=Xd(t,t===Qt?un:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=ph(t,i);else{e=i;var s=Ze;Ze|=2;var o=y1();(Qt!==t||un!==e)&&(fi=null,Ea=Lt()+500,io(t,e));do try{dD();break}catch(l){v1(t,l)}while(!0);Jv(),dh.current=o,Ze=s,Ft!==null?e=0:(Qt=null,un=0,e=zt)}if(e!==0){if(e===2&&(s=tg(t),s!==0&&(i=s,e=Ag(t,s))),e===1)throw r=Tu,io(t,0),Ji(t,i),Hn(t,Lt()),r;if(e===6)Ji(t,i);else{if(s=t.current.alternate,!(i&30)&&!uD(s)&&(e=ph(t,i),e===2&&(o=tg(t),o!==0&&(i=o,e=Ag(t,o))),e===1))throw r=Tu,io(t,0),Ji(t,i),Hn(t,Lt()),r;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(le(345));case 2:Ks(t,Fn,fi);break;case 3:if(Ji(t,i),(i&130023424)===i&&(e=fy+500-Lt(),10<e)){if(Xd(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Cn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ug(Ks.bind(null,t,Fn,fi),e);break}Ks(t,Fn,fi);break;case 4:if(Ji(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var a=31-Fr(i);o=1<<a,a=e[a],a>s&&(s=a),i&=~o}if(i=s,i=Lt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*lD(i/1960))-i,10<i){t.timeoutHandle=ug(Ks.bind(null,t,Fn,fi),i);break}Ks(t,Fn,fi);break;case 5:Ks(t,Fn,fi);break;default:throw Error(le(329))}}}return Hn(t,Lt()),t.callbackNode===r?g1.bind(null,t):null}function Ag(t,e){var r=Jl;return t.current.memoizedState.isDehydrated&&(io(t,e).flags|=256),t=ph(t,e),t!==2&&(e=Fn,Fn=r,e!==null&&Pg(e)),t}function Pg(t){Fn===null?Fn=t:Fn.push.apply(Fn,t)}function uD(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var s=r[i],o=s.getSnapshot;s=s.value;try{if(!Br(o(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ji(t,e){for(e&=~hy,e&=~cf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Fr(e),i=1<<r;t[r]=-1,e&=~i}}function Fw(t){if(Ze&6)throw Error(le(327));ca();var e=Xd(t,0);if(!(e&1))return Hn(t,Lt()),null;var r=ph(t,e);if(t.tag!==0&&r===2){var i=tg(t);i!==0&&(e=i,r=Ag(t,i))}if(r===1)throw r=Tu,io(t,0),Ji(t,e),Hn(t,Lt()),r;if(r===6)throw Error(le(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ks(t,Fn,fi),Hn(t,Lt()),null}function py(t,e){var r=Ze;Ze|=1;try{return t(e)}finally{Ze=r,Ze===0&&(Ea=Lt()+500,of&&Os())}}function co(t){is!==null&&is.tag===0&&!(Ze&6)&&ca();var e=Ze;Ze|=1;var r=wr.transition,i=st;try{if(wr.transition=null,st=1,t)return t()}finally{st=i,wr.transition=r,Ze=e,!(Ze&6)&&Os()}}function my(){Yn=ra.current,vt(ra)}function io(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,FN(r)),Ft!==null)for(r=Ft.return;r!==null;){var i=r;switch(Yv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&th();break;case 3:ba(),vt($n),vt(En),iy();break;case 5:ry(i);break;case 4:ba();break;case 13:vt(St);break;case 19:vt(St);break;case 10:Zv(i.type._context);break;case 22:case 23:my()}r=r.return}if(Qt=t,Ft=t=fs(t.current,null),un=Yn=e,zt=0,Tu=null,hy=cf=uo=0,Fn=Jl=null,eo!==null){for(e=0;e<eo.length;e++)if(r=eo[e],i=r.interleaved,i!==null){r.interleaved=null;var s=i.next,o=r.pending;if(o!==null){var a=o.next;o.next=s,i.next=a}r.pending=i}eo=null}return t}function v1(t,e){do{var r=Ft;try{if(Jv(),Ed.current=ch,uh){for(var i=kt.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}uh=!1}if(lo=0,Xt=Ut=kt=null,Xl=!1,bu=0,dy.current=null,r===null||r.return===null){zt=1,Tu=e,Ft=null;break}e:{var o=t,a=r.return,l=r,u=e;if(e=un,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Iw(a);if(g!==null){g.flags&=-257,kw(g,a,l,o,e),g.mode&1&&Sw(o,c,e),e=g,u=c;var b=e.updateQueue;if(b===null){var R=new Set;R.add(u),e.updateQueue=R}else b.add(u);break e}else{if(!(e&1)){Sw(o,c,e),gy();break e}u=Error(le(426))}}else if(wt&&l.mode&1){var P=Iw(a);if(P!==null){!(P.flags&65536)&&(P.flags|=256),kw(P,a,l,o,e),Xv(xa(u,l));break e}}o=u=xa(u,l),zt!==4&&(zt=2),Jl===null?Jl=[o]:Jl.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var x=e1(o,u,e);_w(o,x);break e;case 1:l=u;var _=o.type,T=o.stateNode;if(!(o.flags&128)&&(typeof _.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(ds===null||!ds.has(T)))){o.flags|=65536,e&=-e,o.lanes|=e;var L=t1(o,l,e);_w(o,L);break e}}o=o.return}while(o!==null)}w1(r)}catch(F){e=F,Ft===r&&r!==null&&(Ft=r=r.return);continue}break}while(!0)}function y1(){var t=dh.current;return dh.current=ch,t===null?ch:t}function gy(){(zt===0||zt===3||zt===2)&&(zt=4),Qt===null||!(uo&268435455)&&!(cf&268435455)||Ji(Qt,un)}function ph(t,e){var r=Ze;Ze|=2;var i=y1();(Qt!==t||un!==e)&&(fi=null,io(t,e));do try{cD();break}catch(s){v1(t,s)}while(!0);if(Jv(),Ze=r,dh.current=i,Ft!==null)throw Error(le(261));return Qt=null,un=0,zt}function cD(){for(;Ft!==null;)_1(Ft)}function dD(){for(;Ft!==null&&!OR();)_1(Ft)}function _1(t){var e=x1(t.alternate,t,Yn);t.memoizedProps=t.pendingProps,e===null?w1(t):Ft=e,dy.current=null}function w1(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=iD(r,e),r!==null){r.flags&=32767,Ft=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{zt=6,Ft=null;return}}else if(r=rD(r,e,Yn),r!==null){Ft=r;return}if(e=e.sibling,e!==null){Ft=e;return}Ft=e=t}while(e!==null);zt===0&&(zt=5)}function Ks(t,e,r){var i=st,s=wr.transition;try{wr.transition=null,st=1,hD(t,e,r,i)}finally{wr.transition=s,st=i}return null}function hD(t,e,r,i){do ca();while(is!==null);if(Ze&6)throw Error(le(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(le(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(qR(t,o),t===Qt&&(Ft=Qt=null,un=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Zc||(Zc=!0,E1(Yd,function(){return ca(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=wr.transition,wr.transition=null;var a=st;st=1;var l=Ze;Ze|=4,dy.current=null,oD(t,r),p1(r,t),NN(ag),Qd=!!og,ag=og=null,t.current=r,aD(r),jR(),Ze=l,st=a,wr.transition=o}else t.current=r;if(Zc&&(Zc=!1,is=t,fh=s),o=t.pendingLanes,o===0&&(ds=null),UR(r.stateNode),Hn(t,Lt()),e!==null)for(i=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(hh)throw hh=!1,t=kg,kg=null,t;return fh&1&&t.tag!==0&&ca(),o=t.pendingLanes,o&1?t===Cg?Zl++:(Zl=0,Cg=t):Zl=0,Os(),null}function ca(){if(is!==null){var t=eS(fh),e=wr.transition,r=st;try{if(wr.transition=null,st=16>t?16:t,is===null)var i=!1;else{if(t=is,is=null,fh=0,Ze&6)throw Error(le(331));var s=Ze;for(Ze|=4,ve=t.current;ve!==null;){var o=ve,a=o.child;if(ve.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(ve=c;ve!==null;){var h=ve;switch(h.tag){case 0:case 11:case 15:Ql(8,h,o)}var f=h.child;if(f!==null)f.return=h,ve=f;else for(;ve!==null;){h=ve;var p=h.sibling,g=h.return;if(d1(h),h===c){ve=null;break}if(p!==null){p.return=g,ve=p;break}ve=g}}}var b=o.alternate;if(b!==null){var R=b.child;if(R!==null){b.child=null;do{var P=R.sibling;R.sibling=null,R=P}while(R!==null)}}ve=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ve=a;else e:for(;ve!==null;){if(o=ve,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Ql(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,ve=x;break e}ve=o.return}}var _=t.current;for(ve=_;ve!==null;){a=ve;var T=a.child;if(a.subtreeFlags&2064&&T!==null)T.return=a,ve=T;else e:for(a=_;ve!==null;){if(l=ve,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:uf(9,l)}}catch(F){Nt(l,l.return,F)}if(l===a){ve=null;break e}var L=l.sibling;if(L!==null){L.return=l.return,ve=L;break e}ve=l.return}}if(Ze=s,Os(),Qr&&typeof Qr.onPostCommitFiberRoot=="function")try{Qr.onPostCommitFiberRoot(ef,t)}catch{}i=!0}return i}finally{st=r,wr.transition=e}}return!1}function Uw(t,e,r){e=xa(r,e),e=e1(t,e,1),t=cs(t,e,1),e=Cn(),t!==null&&(Hu(t,1,e),Hn(t,e))}function Nt(t,e,r){if(t.tag===3)Uw(t,t,r);else for(;e!==null;){if(e.tag===3){Uw(e,t,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ds===null||!ds.has(i))){t=xa(r,t),t=t1(e,t,1),e=cs(e,t,1),t=Cn(),e!==null&&(Hu(e,1,t),Hn(e,t));break}}e=e.return}}function fD(t,e,r){var i=t.pingCache;i!==null&&i.delete(e),e=Cn(),t.pingedLanes|=t.suspendedLanes&r,Qt===t&&(un&r)===r&&(zt===4||zt===3&&(un&130023424)===un&&500>Lt()-fy?io(t,0):hy|=r),Hn(t,e)}function b1(t,e){e===0&&(t.mode&1?(e=zc,zc<<=1,!(zc&130023424)&&(zc=4194304)):e=1);var r=Cn();t=Si(t,e),t!==null&&(Hu(t,e,r),Hn(t,r))}function pD(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),b1(t,r)}function mD(t,e){var r=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(le(314))}i!==null&&i.delete(e),b1(t,r)}var x1;x1=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||$n.current)Bn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Bn=!1,nD(t,e,r);Bn=!!(t.flags&131072)}else Bn=!1,wt&&e.flags&1048576&&IS(e,ih,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Sd(t,e),t=e.pendingProps;var s=ya(e,En.current);ua(e,r),s=oy(null,e,i,t,s,r);var o=ay();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zn(i)?(o=!0,nh(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ty(e),s.updater=lf,e.stateNode=s,s._reactInternals=e,gg(e,i,t,r),e=_g(null,e,i,!0,o,r)):(e.tag=0,wt&&o&&Kv(e),kn(null,e,s,r),e=e.child),e;case 16:i=e.elementType;e:{switch(Sd(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=vD(i),t=Mr(i,t),s){case 0:e=yg(null,e,i,t,r);break e;case 1:e=Pw(null,e,i,t,r);break e;case 11:e=Cw(null,e,i,t,r);break e;case 14:e=Aw(null,e,i,Mr(i.type,t),r);break e}throw Error(le(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Mr(i,s),yg(t,e,i,s,r);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Mr(i,s),Pw(t,e,i,s,r);case 3:e:{if(s1(e),t===null)throw Error(le(387));i=e.pendingProps,o=e.memoizedState,s=o.element,NS(t,e),ah(e,i,null,r);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=xa(Error(le(423)),e),e=Rw(t,e,i,r,s);break e}else if(i!==s){s=xa(Error(le(424)),e),e=Rw(t,e,i,r,s);break e}else for(Xn=us(e.stateNode.containerInfo.firstChild),Zn=e,wt=!0,Or=null,r=PS(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(_a(),i===s){e=Ii(t,e,r);break e}kn(t,e,i,r)}e=e.child}return e;case 5:return DS(e),t===null&&fg(e),i=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,a=s.children,lg(i,s)?a=null:o!==null&&lg(i,o)&&(e.flags|=32),i1(t,e),kn(t,e,a,r),e.child;case 6:return t===null&&fg(e),null;case 13:return o1(t,e,r);case 4:return ny(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=wa(e,null,i,r):kn(t,e,i,r),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Mr(i,s),Cw(t,e,i,s,r);case 7:return kn(t,e,e.pendingProps,r),e.child;case 8:return kn(t,e,e.pendingProps.children,r),e.child;case 12:return kn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,a=s.value,ft(sh,i._currentValue),i._currentValue=a,o!==null)if(Br(o.value,a)){if(o.children===s.children&&!$n.current){e=Ii(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(o.tag===1){u=wi(-1,r&-r),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=r,u=o.alternate,u!==null&&(u.lanes|=r),pg(o.return,r,e),l.lanes|=r;break}u=u.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(le(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),pg(a,r,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}kn(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,ua(e,r),s=Er(s),i=i(s),e.flags|=1,kn(t,e,i,r),e.child;case 14:return i=e.type,s=Mr(i,e.pendingProps),s=Mr(i.type,s),Aw(t,e,i,s,r);case 15:return n1(t,e,e.type,e.pendingProps,r);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Mr(i,s),Sd(t,e),e.tag=1,zn(i)?(t=!0,nh(e)):t=!1,ua(e,r),ZS(e,i,s),gg(e,i,s,r),_g(null,e,i,!0,t,r);case 19:return a1(t,e,r);case 22:return r1(t,e,r)}throw Error(le(156,e.tag))};function E1(t,e){return XT(t,e)}function gD(t,e,r,i){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function yr(t,e,r,i){return new gD(t,e,r,i)}function vy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function vD(t){if(typeof t=="function")return vy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ov)return 11;if(t===jv)return 14}return 2}function fs(t,e){var r=t.alternate;return r===null?(r=yr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Cd(t,e,r,i,s,o){var a=2;if(i=t,typeof t=="function")vy(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Go:return so(r.children,s,o,e);case Lv:a=8,s|=8;break;case Um:return t=yr(12,r,e,s|2),t.elementType=Um,t.lanes=o,t;case Bm:return t=yr(13,r,e,s),t.elementType=Bm,t.lanes=o,t;case $m:return t=yr(19,r,e,s),t.elementType=$m,t.lanes=o,t;case NT:return df(r,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case PT:a=10;break e;case RT:a=9;break e;case Ov:a=11;break e;case jv:a=14;break e;case Ki:a=16,i=null;break e}throw Error(le(130,t==null?t:typeof t,""))}return e=yr(a,r,e,s),e.elementType=t,e.type=i,e.lanes=o,e}function so(t,e,r,i){return t=yr(7,t,i,e),t.lanes=r,t}function df(t,e,r,i){return t=yr(22,t,i,e),t.elementType=NT,t.lanes=r,t.stateNode={isHidden:!1},t}function Gp(t,e,r){return t=yr(6,t,null,e),t.lanes=r,t}function Kp(t,e,r){return e=yr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function yD(t,e,r,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cp(0),this.expirationTimes=Cp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cp(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yy(t,e,r,i,s,o,a,l,u){return t=new yD(t,e,r,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=yr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ty(o),t}function _D(t,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:r}}function T1(t){if(!t)return Ts;t=t._reactInternals;e:{if(wo(t)!==t||t.tag!==1)throw Error(le(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(le(171))}if(t.tag===1){var r=t.type;if(zn(r))return TS(t,r,e)}return e}function S1(t,e,r,i,s,o,a,l,u){return t=yy(r,i,!0,t,s,o,a,l,u),t.context=T1(null),r=t.current,i=Cn(),s=hs(r),o=wi(i,s),o.callback=e??null,cs(r,o,s),t.current.lanes=s,Hu(t,s,i),Hn(t,i),t}function hf(t,e,r,i){var s=e.current,o=Cn(),a=hs(s);return r=T1(r),e.context===null?e.context=r:e.pendingContext=r,e=wi(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=cs(s,e,a),t!==null&&(Ur(t,s,a,o),xd(t,s,a)),a}function mh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Bw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function _y(t,e){Bw(t,e),(t=t.alternate)&&Bw(t,e)}function wD(){return null}var I1=typeof reportError=="function"?reportError:function(t){console.error(t)};function wy(t){this._internalRoot=t}ff.prototype.render=wy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(le(409));hf(t,e,null,null)};ff.prototype.unmount=wy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;co(function(){hf(null,t,null,null)}),e[Ti]=null}};function ff(t){this._internalRoot=t}ff.prototype.unstable_scheduleHydration=function(t){if(t){var e=rS();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Qi.length&&e!==0&&e<Qi[r].priority;r++);Qi.splice(r,0,t),r===0&&sS(t)}};function by(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function $w(){}function bD(t,e,r,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var c=mh(a);o.call(c)}}var a=S1(e,i,t,0,null,!1,!1,"",$w);return t._reactRootContainer=a,t[Ti]=a.current,gu(t.nodeType===8?t.parentNode:t),co(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var c=mh(u);l.call(c)}}var u=yy(t,0,!1,null,null,!1,!1,"",$w);return t._reactRootContainer=u,t[Ti]=u.current,gu(t.nodeType===8?t.parentNode:t),co(function(){hf(e,u,r,i)}),u}function mf(t,e,r,i,s){var o=r._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var u=mh(a);l.call(u)}}hf(e,a,t,s)}else a=bD(r,e,t,s,i);return mh(a)}tS=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Ll(e.pendingLanes);r!==0&&(Uv(e,r|1),Hn(e,Lt()),!(Ze&6)&&(Ea=Lt()+500,Os()))}break;case 13:co(function(){var i=Si(t,1);if(i!==null){var s=Cn();Ur(i,t,1,s)}}),_y(t,1)}};Bv=function(t){if(t.tag===13){var e=Si(t,134217728);if(e!==null){var r=Cn();Ur(e,t,134217728,r)}_y(t,134217728)}};nS=function(t){if(t.tag===13){var e=hs(t),r=Si(t,e);if(r!==null){var i=Cn();Ur(r,t,e,i)}_y(t,e)}};rS=function(){return st};iS=function(t,e){var r=st;try{return st=t,e()}finally{st=r}};Jm=function(t,e,r){switch(e){case"input":if(Wm(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==t&&i.form===t.form){var s=sf(i);if(!s)throw Error(le(90));MT(i),Wm(i,s)}}}break;case"textarea":OT(t,r);break;case"select":e=r.value,e!=null&&sa(t,!!r.multiple,e,!1)}};zT=py;HT=co;var xD={usingClientEntryPoint:!1,Events:[qu,Qo,sf,BT,$T,py]},bl={findFiberByHostInstance:Zs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ED={bundleType:bl.bundleType,version:bl.version,rendererPackageName:bl.rendererPackageName,rendererConfig:bl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Di.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=GT(t),t===null?null:t.stateNode},findFiberByHostInstance:bl.findFiberByHostInstance||wD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ed.isDisabled&&ed.supportsFiber)try{ef=ed.inject(ED),Qr=ed}catch{}}sr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xD;sr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!by(e))throw Error(le(200));return _D(t,e,null,r)};sr.createRoot=function(t,e){if(!by(t))throw Error(le(299));var r=!1,i="",s=I1;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=yy(t,1,!1,null,null,r,!1,i,s),t[Ti]=e.current,gu(t.nodeType===8?t.parentNode:t),new wy(e)};sr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(le(188)):(t=Object.keys(t).join(","),Error(le(268,t)));return t=GT(e),t=t===null?null:t.stateNode,t};sr.flushSync=function(t){return co(t)};sr.hydrate=function(t,e,r){if(!pf(e))throw Error(le(200));return mf(null,t,e,!0,r)};sr.hydrateRoot=function(t,e,r){if(!by(t))throw Error(le(405));var i=r!=null&&r.hydratedSources||null,s=!1,o="",a=I1;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=S1(e,null,t,1,r??null,s,!1,o,a),t[Ti]=e.current,gu(t),i)for(t=0;t<i.length;t++)r=i[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new ff(e)};sr.render=function(t,e,r){if(!pf(e))throw Error(le(200));return mf(null,t,e,!1,r)};sr.unmountComponentAtNode=function(t){if(!pf(t))throw Error(le(40));return t._reactRootContainer?(co(function(){mf(null,null,t,!1,function(){t._reactRootContainer=null,t[Ti]=null})}),!0):!1};sr.unstable_batchedUpdates=py;sr.unstable_renderSubtreeIntoContainer=function(t,e,r,i){if(!pf(r))throw Error(le(200));if(t==null||t._reactInternals===void 0)throw Error(le(38));return mf(t,e,r,!1,i)};sr.version="18.3.1-next-f1338f8080-20240426";function k1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(k1)}catch(t){console.error(t)}}k1(),IT.exports=sr;var xy=IT.exports;const TD=Ua(xy);var zw=xy;Vm.createRoot=zw.createRoot,Vm.hydrateRoot=zw.hydrateRoot;var Ey={};Object.defineProperty(Ey,"__esModule",{value:!0});Ey.parse=RD;Ey.serialize=ND;const SD=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,ID=/^[\u0021-\u003A\u003C-\u007E]*$/,kD=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,CD=/^[\u0020-\u003A\u003D-\u007E]*$/,AD=Object.prototype.toString,PD=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function RD(t,e){const r=new PD,i=t.length;if(i<2)return r;const s=(e==null?void 0:e.decode)||DD;let o=0;do{const a=t.indexOf("=",o);if(a===-1)break;const l=t.indexOf(";",o),u=l===-1?i:l;if(a>u){o=t.lastIndexOf(";",a-1)+1;continue}const c=Hw(t,o,a),h=Ww(t,a,c),f=t.slice(c,h);if(r[f]===void 0){let p=Hw(t,a+1,u),g=Ww(t,u,p);const b=s(t.slice(p,g));r[f]=b}o=u+1}while(o<i);return r}function Hw(t,e,r){do{const i=t.charCodeAt(e);if(i!==32&&i!==9)return e}while(++e<r);return r}function Ww(t,e,r){for(;e>r;){const i=t.charCodeAt(--e);if(i!==32&&i!==9)return e+1}return r}function ND(t,e,r){const i=(r==null?void 0:r.encode)||encodeURIComponent;if(!SD.test(t))throw new TypeError(`argument name is invalid: ${t}`);const s=i(e);if(!ID.test(s))throw new TypeError(`argument val is invalid: ${e}`);let o=t+"="+s;if(!r)return o;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);o+="; Max-Age="+r.maxAge}if(r.domain){if(!kD.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);o+="; Domain="+r.domain}if(r.path){if(!CD.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);o+="; Path="+r.path}if(r.expires){if(!MD(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.partitioned&&(o+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"none":o+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return o}function DD(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function MD(t){return AD.call(t)==="[object Date]"}/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var qw="popstate";function LD(t={}){function e(s,o){let{pathname:a="/",search:l="",hash:u=""}=bo(s.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Rg("",{pathname:a,search:l,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(s,o){let a=s.document.querySelector("base"),l="";if(a&&a.getAttribute("href")){let u=s.location.href,c=u.indexOf("#");l=c===-1?u:u.slice(0,c)}return l+"#"+(typeof o=="string"?o:Su(o))}function i(s,o){ir(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return jD(e,r,i,t)}function xt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ir(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function OD(){return Math.random().toString(36).substring(2,10)}function Gw(t,e){return{usr:t.state,key:t.key,idx:e}}function Rg(t,e,r=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?bo(e):e,state:r,key:e&&e.key||i||OD()}}function Su({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function bo(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function jD(t,e,r,i={}){let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,l="POP",u=null,c=h();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function h(){return(a.state||{idx:null}).idx}function f(){l="POP";let P=h(),x=P==null?null:P-c;c=P,u&&u({action:l,location:R.location,delta:x})}function p(P,x){l="PUSH";let _=Rg(R.location,P,x);r&&r(_,P),c=h()+1;let T=Gw(_,c),L=R.createHref(_);try{a.pushState(T,"",L)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;s.location.assign(L)}o&&u&&u({action:l,location:R.location,delta:1})}function g(P,x){l="REPLACE";let _=Rg(R.location,P,x);r&&r(_,P),c=h();let T=Gw(_,c),L=R.createHref(_);a.replaceState(T,"",L),o&&u&&u({action:l,location:R.location,delta:0})}function b(P){let x=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof P=="string"?P:Su(P);return _=_.replace(/ $/,"%20"),xt(x,`No window.location.(origin|href) available to create URL for href: ${_}`),new URL(_,x)}let R={get action(){return l},get location(){return t(s,a)},listen(P){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(qw,f),u=P,()=>{s.removeEventListener(qw,f),u=null}},createHref(P){return e(s,P)},createURL:b,encodeLocation(P){let x=b(P);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:p,replace:g,go(P){return a.go(P)}};return R}function C1(t,e,r="/"){return VD(t,e,r,!1)}function VD(t,e,r,i){let s=typeof e=="string"?bo(e):e,o=Ss(s.pathname||"/",r);if(o==null)return null;let a=A1(t);FD(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let c=XD(o);l=KD(a[u],c,i)}return l}function A1(t,e=[],r=[],i=""){let s=(o,a,l)=>{let u={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(xt(u.relativePath.startsWith(i),`Absolute route path "${u.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(i.length));let c=bi([i,u.relativePath]),h=r.concat(u);o.children&&o.children.length>0&&(xt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),A1(o.children,e,h,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:qD(c,o.index),routesMeta:h})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let u of P1(o.path))s(o,a,u)}),e}function P1(t){let e=t.split("/");if(e.length===0)return[];let[r,...i]=e,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let a=P1(i.join("/")),l=[];return l.push(...a.map(u=>u===""?o:[o,u].join("/"))),s&&l.push(...a),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function FD(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:GD(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var UD=/^:[\w-]+$/,BD=3,$D=2,zD=1,HD=10,WD=-2,Kw=t=>t==="*";function qD(t,e){let r=t.split("/"),i=r.length;return r.some(Kw)&&(i+=WD),e&&(i+=$D),r.filter(s=>!Kw(s)).reduce((s,o)=>s+(UD.test(o)?BD:o===""?zD:HD),i)}function GD(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function KD(t,e,r=!1){let{routesMeta:i}=t,s={},o="/",a=[];for(let l=0;l<i.length;++l){let u=i[l],c=l===i.length-1,h=o==="/"?e:e.slice(o.length)||"/",f=gh({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),p=u.route;if(!f&&c&&r&&!i[i.length-1].route.index&&(f=gh({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:bi([o,f.pathname]),pathnameBase:e2(bi([o,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(o=bi([o,f.pathnameBase]))}return a}function gh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,i]=YD(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:i.reduce((c,{paramName:h,isOptional:f},p)=>{if(h==="*"){let b=l[p]||"";a=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const g=l[p];return f&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:a,pattern:t}}function YD(t,e=!1,r=!0){ir(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function XD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ir(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ss(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=t.charAt(r);return i&&i!=="/"?null:t.slice(r)||"/"}function QD(t,e="/"){let{pathname:r,search:i="",hash:s=""}=typeof t=="string"?bo(t):t;return{pathname:r?r.startsWith("/")?r:JD(r,e):e,search:t2(i),hash:n2(s)}}function JD(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Yp(t,e,r,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ZD(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Ty(t){let e=ZD(t);return e.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase)}function Sy(t,e,r,i=!1){let s;typeof t=="string"?s=bo(t):(s={...t},xt(!s.pathname||!s.pathname.includes("?"),Yp("?","pathname","search",s)),xt(!s.pathname||!s.pathname.includes("#"),Yp("#","pathname","hash",s)),xt(!s.search||!s.search.includes("#"),Yp("#","search","hash",s)));let o=t===""||s.pathname==="",a=o?"/":s.pathname,l;if(a==null)l=r;else{let f=e.length-1;if(!i&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}l=f>=0?e[f]:"/"}let u=QD(s,l),c=a&&a!=="/"&&a.endsWith("/"),h=(o||a===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}var bi=t=>t.join("/").replace(/\/\/+/g,"/"),e2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),t2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,n2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function r2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var R1=["POST","PUT","PATCH","DELETE"];new Set(R1);var i2=["GET",...R1];new Set(i2);var Ha=N.createContext(null);Ha.displayName="DataRouter";var gf=N.createContext(null);gf.displayName="DataRouterState";var N1=N.createContext({isTransitioning:!1});N1.displayName="ViewTransition";var s2=N.createContext(new Map);s2.displayName="Fetchers";var o2=N.createContext(null);o2.displayName="Await";var zr=N.createContext(null);zr.displayName="Navigation";var Ku=N.createContext(null);Ku.displayName="Location";var li=N.createContext({outlet:null,matches:[],isDataRoute:!1});li.displayName="Route";var Iy=N.createContext(null);Iy.displayName="RouteError";function a2(t,{relative:e}={}){xt(Wa(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=N.useContext(zr),{hash:s,pathname:o,search:a}=Yu(t,{relative:e}),l=o;return r!=="/"&&(l=o==="/"?r:bi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Wa(){return N.useContext(Ku)!=null}function Ir(){return xt(Wa(),"useLocation() may be used only in the context of a <Router> component."),N.useContext(Ku).location}var D1="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function M1(t){N.useContext(zr).static||N.useLayoutEffect(t)}function qn(){let{isDataRoute:t}=N.useContext(li);return t?w2():l2()}function l2(){xt(Wa(),"useNavigate() may be used only in the context of a <Router> component.");let t=N.useContext(Ha),{basename:e,navigator:r}=N.useContext(zr),{matches:i}=N.useContext(li),{pathname:s}=Ir(),o=JSON.stringify(Ty(i)),a=N.useRef(!1);return M1(()=>{a.current=!0}),N.useCallback((u,c={})=>{if(ir(a.current,D1),!a.current)return;if(typeof u=="number"){r.go(u);return}let h=Sy(u,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:bi([e,h.pathname])),(c.replace?r.replace:r.push)(h,c.state,c)},[e,r,o,s,t])}N.createContext(null);function Yu(t,{relative:e}={}){let{matches:r}=N.useContext(li),{pathname:i}=Ir(),s=JSON.stringify(Ty(r));return N.useMemo(()=>Sy(t,JSON.parse(s),i,e==="path"),[t,s,i,e])}function u2(t,e){return L1(t,e)}function L1(t,e,r,i){var _;xt(Wa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=N.useContext(zr),{matches:a}=N.useContext(li),l=a[a.length-1],u=l?l.params:{},c=l?l.pathname:"/",h=l?l.pathnameBase:"/",f=l&&l.route;{let T=f&&f.path||"";O1(c,!f||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let p=Ir(),g;if(e){let T=typeof e=="string"?bo(e):e;xt(h==="/"||((_=T.pathname)==null?void 0:_.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${T.pathname}" was given in the \`location\` prop.`),g=T}else g=p;let b=g.pathname||"/",R=b;if(h!=="/"){let T=h.replace(/^\//,"").split("/");R="/"+b.replace(/^\//,"").split("/").slice(T.length).join("/")}let P=!o&&r&&r.matches&&r.matches.length>0?r.matches:C1(t,{pathname:R});ir(f||P!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),ir(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=p2(P&&P.map(T=>Object.assign({},T,{params:Object.assign({},u,T.params),pathname:bi([h,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?h:bi([h,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),a,r,i);return e&&x?N.createElement(Ku.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},x):x}function c2(){let t=_2(),e=r2(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=N.createElement(N.Fragment,null,N.createElement("p",null," Hey developer "),N.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",N.createElement("code",{style:o},"ErrorBoundary")," or"," ",N.createElement("code",{style:o},"errorElement")," prop on your route.")),N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),r?N.createElement("pre",{style:s},r):null,a)}var d2=N.createElement(c2,null),h2=class extends N.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?N.createElement(li.Provider,{value:this.props.routeContext},N.createElement(Iy.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function f2({routeContext:t,match:e,children:r}){let i=N.useContext(Ha);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),N.createElement(li.Provider,{value:t},r)}function p2(t,e=[],r=null,i=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,o=r==null?void 0:r.errors;if(o!=null){let u=s.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id])!==void 0);xt(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let a=!1,l=-1;if(r)for(let u=0;u<s.length;u++){let c=s[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(l=u),c.route.id){let{loaderData:h,errors:f}=r,p=c.route.loader&&!h.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||p){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((u,c,h)=>{let f,p=!1,g=null,b=null;r&&(f=o&&c.route.id?o[c.route.id]:void 0,g=c.route.errorElement||d2,a&&(l<0&&h===0?(O1("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,b=null):l===h&&(p=!0,b=c.route.hydrateFallbackElement||null)));let R=e.concat(s.slice(0,h+1)),P=()=>{let x;return f?x=g:p?x=b:c.route.Component?x=N.createElement(c.route.Component,null):c.route.element?x=c.route.element:x=u,N.createElement(f2,{match:c,routeContext:{outlet:u,matches:R,isDataRoute:r!=null},children:x})};return r&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?N.createElement(h2,{location:r.location,revalidation:r.revalidation,component:g,error:f,children:P(),routeContext:{outlet:null,matches:R,isDataRoute:!0}}):P()},null)}function ky(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function m2(t){let e=N.useContext(Ha);return xt(e,ky(t)),e}function g2(t){let e=N.useContext(gf);return xt(e,ky(t)),e}function v2(t){let e=N.useContext(li);return xt(e,ky(t)),e}function Cy(t){let e=v2(t),r=e.matches[e.matches.length-1];return xt(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function y2(){return Cy("useRouteId")}function _2(){var i;let t=N.useContext(Iy),e=g2("useRouteError"),r=Cy("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[r]}function w2(){let{router:t}=m2("useNavigate"),e=Cy("useNavigate"),r=N.useRef(!1);return M1(()=>{r.current=!0}),N.useCallback(async(s,o={})=>{ir(r.current,D1),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...o}))},[t,e])}var Yw={};function O1(t,e,r){!e&&!Yw[t]&&(Yw[t]=!0,ir(!1,r))}N.memo(b2);function b2({routes:t,future:e,state:r}){return L1(t,void 0,r,e)}function j1({to:t,replace:e,state:r,relative:i}){xt(Wa(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=N.useContext(zr);ir(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=N.useContext(li),{pathname:a}=Ir(),l=qn(),u=Sy(t,Ty(o),a,i==="path"),c=JSON.stringify(u);return N.useEffect(()=>{l(JSON.parse(c),{replace:e,state:r,relative:i})},[l,c,i,e,r]),null}function Nr(t){xt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function x2({basename:t="/",children:e=null,location:r,navigationType:i="POP",navigator:s,static:o=!1}){xt(!Wa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=N.useMemo(()=>({basename:a,navigator:s,static:o,future:{}}),[a,s,o]);typeof r=="string"&&(r=bo(r));let{pathname:u="/",search:c="",hash:h="",state:f=null,key:p="default"}=r,g=N.useMemo(()=>{let b=Ss(u,a);return b==null?null:{location:{pathname:b,search:c,hash:h,state:f,key:p},navigationType:i}},[a,u,c,h,f,p,i]);return ir(g!=null,`<Router basename="${a}"> is not able to match the URL "${u}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:N.createElement(zr.Provider,{value:l},N.createElement(Ku.Provider,{children:e,value:g}))}function E2({children:t,location:e}){return u2(Ng(t),e)}function Ng(t,e=[]){let r=[];return N.Children.forEach(t,(i,s)=>{if(!N.isValidElement(i))return;let o=[...e,s];if(i.type===N.Fragment){r.push.apply(r,Ng(i.props.children,o));return}xt(i.type===Nr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Ng(i.props.children,o)),r.push(a)}),r}var Ad="get",Pd="application/x-www-form-urlencoded";function vf(t){return t!=null&&typeof t.tagName=="string"}function T2(t){return vf(t)&&t.tagName.toLowerCase()==="button"}function S2(t){return vf(t)&&t.tagName.toLowerCase()==="form"}function I2(t){return vf(t)&&t.tagName.toLowerCase()==="input"}function k2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function C2(t,e){return t.button===0&&(!e||e==="_self")&&!k2(t)}function Dg(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let i=t[r];return e.concat(Array.isArray(i)?i.map(s=>[r,s]):[[r,i]])},[]))}function A2(t,e){let r=Dg(t);return e&&e.forEach((i,s)=>{r.has(s)||e.getAll(s).forEach(o=>{r.append(s,o)})}),r}var td=null;function P2(){if(td===null)try{new FormData(document.createElement("form"),0),td=!1}catch{td=!0}return td}var R2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xp(t){return t!=null&&!R2.has(t)?(ir(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Pd}"`),null):t}function N2(t,e){let r,i,s,o,a;if(S2(t)){let l=t.getAttribute("action");i=l?Ss(l,e):null,r=t.getAttribute("method")||Ad,s=Xp(t.getAttribute("enctype"))||Pd,o=new FormData(t)}else if(T2(t)||I2(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||l.getAttribute("action");if(i=u?Ss(u,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||Ad,s=Xp(t.getAttribute("formenctype"))||Xp(l.getAttribute("enctype"))||Pd,o=new FormData(l,t),!P2()){let{name:c,type:h,value:f}=t;if(h==="image"){let p=c?`${c}.`:"";o.append(`${p}x`,"0"),o.append(`${p}y`,"0")}else c&&o.append(c,f)}}else{if(vf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Ad,i=null,s=Pd,a=t}return o&&s==="text/plain"&&(a=o,o=void 0),{action:i,method:r.toLowerCase(),encType:s,formData:o,body:a}}function Ay(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function D2(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function M2(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function L2(t,e,r){let i=await Promise.all(t.map(async s=>{let o=e.routes[s.route.id];if(o){let a=await D2(o,r);return a.links?a.links():[]}return[]}));return F2(i.flat(1).filter(M2).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Xw(t,e,r,i,s,o){let a=(u,c)=>r[c]?u.route.id!==r[c].route.id:!0,l=(u,c)=>{var h;return r[c].pathname!==u.pathname||((h=r[c].route.path)==null?void 0:h.endsWith("*"))&&r[c].params["*"]!==u.params["*"]};return o==="assets"?e.filter((u,c)=>a(u,c)||l(u,c)):o==="data"?e.filter((u,c)=>{var f;let h=i.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(a(u,c)||l(u,c))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function O2(t,e){return j2(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function j2(t){return[...new Set(t)]}function V2(t){let e={},r=Object.keys(t).sort();for(let i of r)e[i]=t[i];return e}function F2(t,e){let r=new Set;return new Set(e),t.reduce((i,s)=>{let o=JSON.stringify(V2(s));return r.has(o)||(r.add(o),i.push({key:o,link:s})),i},[])}function U2(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function B2(){let t=N.useContext(Ha);return Ay(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function $2(){let t=N.useContext(gf);return Ay(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Py=N.createContext(void 0);Py.displayName="FrameworkContext";function V1(){let t=N.useContext(Py);return Ay(t,"You must render this element inside a <HydratedRouter> element"),t}function z2(t,e){let r=N.useContext(Py),[i,s]=N.useState(!1),[o,a]=N.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:c,onMouseLeave:h,onTouchStart:f}=e,p=N.useRef(null);N.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let R=x=>{x.forEach(_=>{a(_.isIntersecting)})},P=new IntersectionObserver(R,{threshold:.5});return p.current&&P.observe(p.current),()=>{P.disconnect()}}},[t]),N.useEffect(()=>{if(i){let R=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(R)}}},[i]);let g=()=>{s(!0)},b=()=>{s(!1),a(!1)};return r?t!=="intent"?[o,p,{}]:[o,p,{onFocus:xl(l,g),onBlur:xl(u,b),onMouseEnter:xl(c,g),onMouseLeave:xl(h,b),onTouchStart:xl(f,g)}]:[!1,p,{}]}function xl(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function H2({page:t,...e}){let{router:r}=B2(),i=N.useMemo(()=>C1(r.routes,t,r.basename),[r.routes,t,r.basename]);return i?N.createElement(q2,{page:t,matches:i,...e}):null}function W2(t){let{manifest:e,routeModules:r}=V1(),[i,s]=N.useState([]);return N.useEffect(()=>{let o=!1;return L2(t,e,r).then(a=>{o||s(a)}),()=>{o=!0}},[t,e,r]),i}function q2({page:t,matches:e,...r}){let i=Ir(),{manifest:s,routeModules:o}=V1(),{loaderData:a,matches:l}=$2(),u=N.useMemo(()=>Xw(t,e,l,s,i,"data"),[t,e,l,s,i]),c=N.useMemo(()=>Xw(t,e,l,s,i,"assets"),[t,e,l,s,i]),h=N.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let g=new Set,b=!1;if(e.forEach(P=>{var _;let x=s.routes[P.route.id];!x||!x.hasLoader||(!u.some(T=>T.route.id===P.route.id)&&P.route.id in a&&((_=o[P.route.id])!=null&&_.shouldRevalidate)||x.hasClientLoader?b=!0:g.add(P.route.id))}),g.size===0)return[];let R=U2(t);return b&&g.size>0&&R.searchParams.set("_routes",e.filter(P=>g.has(P.route.id)).map(P=>P.route.id).join(",")),[R.pathname+R.search]},[a,i,s,u,e,t,o]),f=N.useMemo(()=>O2(c,s),[c,s]),p=W2(c);return N.createElement(N.Fragment,null,h.map(g=>N.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...r})),f.map(g=>N.createElement("link",{key:g,rel:"modulepreload",href:g,...r})),p.map(({key:g,link:b})=>N.createElement("link",{key:g,...b})))}function G2(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var F1=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{F1&&(window.__reactRouterVersion="7.1.5")}catch{}function K2({basename:t,children:e,window:r}){let i=N.useRef();i.current==null&&(i.current=LD({window:r,v5Compat:!0}));let s=i.current,[o,a]=N.useState({action:s.action,location:s.location}),l=N.useCallback(u=>{N.startTransition(()=>a(u))},[a]);return N.useLayoutEffect(()=>s.listen(l),[s,l]),N.createElement(x2,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s})}var U1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vh=N.forwardRef(function({onClick:e,discover:r="render",prefetch:i="none",relative:s,reloadDocument:o,replace:a,state:l,target:u,to:c,preventScrollReset:h,viewTransition:f,...p},g){let{basename:b}=N.useContext(zr),R=typeof c=="string"&&U1.test(c),P,x=!1;if(typeof c=="string"&&R&&(P=c,F1))try{let E=new URL(window.location.href),w=c.startsWith("//")?new URL(E.protocol+c):new URL(c),y=Ss(w.pathname,b);w.origin===E.origin&&y!=null?c=y+w.search+w.hash:x=!0}catch{ir(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let _=a2(c,{relative:s}),[T,L,F]=z2(i,p),V=J2(c,{replace:a,state:l,target:u,preventScrollReset:h,relative:s,viewTransition:f});function D(E){e&&e(E),E.defaultPrevented||V(E)}let I=N.createElement("a",{...p,...F,href:P||_,onClick:x||o?e:D,ref:G2(g,L),target:u,"data-discover":!R&&r==="render"?"true":void 0});return T&&!R?N.createElement(N.Fragment,null,I,N.createElement(H2,{page:_})):I});vh.displayName="Link";var Y2=N.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:i="",end:s=!1,style:o,to:a,viewTransition:l,children:u,...c},h){let f=Yu(a,{relative:c.relative}),p=Ir(),g=N.useContext(gf),{navigator:b,basename:R}=N.useContext(zr),P=g!=null&&rM(f)&&l===!0,x=b.encodeLocation?b.encodeLocation(f).pathname:f.pathname,_=p.pathname,T=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;r||(_=_.toLowerCase(),T=T?T.toLowerCase():null,x=x.toLowerCase()),T&&R&&(T=Ss(T,R)||T);const L=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let F=_===x||!s&&_.startsWith(x)&&_.charAt(L)==="/",V=T!=null&&(T===x||!s&&T.startsWith(x)&&T.charAt(x.length)==="/"),D={isActive:F,isPending:V,isTransitioning:P},I=F?e:void 0,E;typeof i=="function"?E=i(D):E=[i,F?"active":null,V?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let w=typeof o=="function"?o(D):o;return N.createElement(vh,{...c,"aria-current":I,className:E,ref:h,style:w,to:a,viewTransition:l},typeof u=="function"?u(D):u)});Y2.displayName="NavLink";var X2=N.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:i,replace:s,state:o,method:a=Ad,action:l,onSubmit:u,relative:c,preventScrollReset:h,viewTransition:f,...p},g)=>{let b=tM(),R=nM(l,{relative:c}),P=a.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&U1.test(l),_=T=>{if(u&&u(T),T.defaultPrevented)return;T.preventDefault();let L=T.nativeEvent.submitter,F=(L==null?void 0:L.getAttribute("formmethod"))||a;b(L||T.currentTarget,{fetcherKey:e,method:F,navigate:r,replace:s,state:o,relative:c,preventScrollReset:h,viewTransition:f})};return N.createElement("form",{ref:g,method:P,action:R,onSubmit:i?u:_,...p,"data-discover":!x&&t==="render"?"true":void 0})});X2.displayName="Form";function Q2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function B1(t){let e=N.useContext(Ha);return xt(e,Q2(t)),e}function J2(t,{target:e,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}={}){let l=qn(),u=Ir(),c=Yu(t,{relative:o});return N.useCallback(h=>{if(C2(h,e)){h.preventDefault();let f=r!==void 0?r:Su(u)===Su(c);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,c,r,i,e,t,s,o,a])}function yf(t){ir(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=N.useRef(Dg(t)),r=N.useRef(!1),i=Ir(),s=N.useMemo(()=>A2(i.search,r.current?null:e.current),[i.search]),o=qn(),a=N.useCallback((l,u)=>{const c=Dg(typeof l=="function"?l(s):l);r.current=!0,o("?"+c,u)},[o,s]);return[s,a]}var Z2=0,eM=()=>`__${String(++Z2)}__`;function tM(){let{router:t}=B1("useSubmit"),{basename:e}=N.useContext(zr),r=y2();return N.useCallback(async(i,s={})=>{let{action:o,method:a,encType:l,formData:u,body:c}=N2(i,e);if(s.navigate===!1){let h=s.fetcherKey||eM();await t.fetch(h,r,s.action||o,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||a,formEncType:s.encType||l,flushSync:s.flushSync})}else await t.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||a,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function nM(t,{relative:e}={}){let{basename:r}=N.useContext(zr),i=N.useContext(li);xt(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o={...Yu(t||".",{relative:e})},a=Ir();if(t==null){o.search=a.search;let l=new URLSearchParams(o.search),u=l.getAll("index");if(u.some(h=>h==="")){l.delete("index"),u.filter(f=>f).forEach(f=>l.append("index",f));let h=l.toString();o.search=h?`?${h}`:""}}return(!t||t===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:bi([r,o.pathname])),Su(o)}function rM(t,e={}){let r=N.useContext(N1);xt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=B1("useViewTransitionState"),s=Yu(t,{relative:e.relative});if(!r.isTransitioning)return!1;let o=Ss(r.currentLocation.pathname,i)||r.currentLocation.pathname,a=Ss(r.nextLocation.pathname,i)||r.nextLocation.pathname;return gh(s.pathname,a)!=null||gh(s.pathname,o)!=null}new TextEncoder;var Qw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1=function(t){const e=[];let r=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},iM=function(t){const e=[];let r=0,i=0;for(;r<t.length;){const s=t[r++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[r++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[r++],a=t[r++],l=t[r++],u=((s&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const o=t[r++],a=t[r++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|a&63)}}return e.join("")},z1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,h=o>>2,f=(o&3)<<4|l>>4;let p=(l&15)<<2|c>>6,g=c&63;u||(g=64,a||(p=64)),i.push(r[h],r[f],r[p],r[g])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray($1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,o==null||l==null||c==null||f==null)throw new sM;const p=o<<2|l>>4;if(i.push(p),c!==64){const g=l<<4&240|c>>2;if(i.push(g),f!==64){const b=c<<6&192|f;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oM=function(t){const e=$1(t);return z1.encodeByteArray(e,!0)},yh=function(t){return oM(t).replace(/\./g,"")},H1=function(t){try{return z1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=()=>aM().__FIREBASE_DEFAULTS__,uM=()=>{if(typeof process>"u"||typeof Qw>"u")return;const t=Qw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&H1(t[1]);return e&&JSON.parse(e)},_f=()=>{try{return lM()||uM()||cM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},W1=t=>{var e,r;return(r=(e=_f())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},dM=t=>{const e=W1(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),i]:[e.substring(0,r),i]},q1=()=>{var t;return(t=_f())===null||t===void 0?void 0:t.config},G1=t=>{var e;return(e=_f())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,i)=>{r?this.reject(r):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[yh(JSON.stringify(r)),yh(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tn())}function mM(){var t;const e=(t=_f())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function vM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function yM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _M(){const t=Tn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function wM(){return!mM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function bM(){try{return typeof indexedDB=="object"}catch{return!1}}function xM(){return new Promise((t,e)=>{try{let r=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EM="FirebaseError";class Mi extends Error{constructor(e,r,i){super(r),this.code=e,this.customData=i,this.name=EM,Object.setPrototypeOf(this,Mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xu.prototype.create)}}class Xu{constructor(e,r,i){this.service=e,this.serviceName=r,this.errors=i}create(e,...r){const i=r[0]||{},s=`${this.service}/${e}`,o=this.errors[e],a=o?TM(o,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Mi(s,l,i)}}function TM(t,e){return t.replace(SM,(r,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const SM=/\{\$([^}]+)}/g;function IM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function _h(t,e){if(t===e)return!0;const r=Object.keys(t),i=Object.keys(e);for(const s of r){if(!i.includes(s))return!1;const o=t[s],a=e[s];if(Jw(o)&&Jw(a)){if(!_h(o,a))return!1}else if(o!==a)return!1}for(const s of i)if(!r.includes(s))return!1;return!0}function Jw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(t){const e=[];for(const[r,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function jl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Vl(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function kM(t,e){const r=new CM(t,e);return r.subscribe.bind(r)}class CM{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,i){let s;if(e===void 0&&r===void 0&&i===void 0)throw new Error("Missing Observer.");AM(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:i},s.next===void 0&&(s.next=Qp),s.error===void 0&&(s.error=Qp),s.complete===void 0&&(s.complete=Qp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AM(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Qp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dn(t){return t&&t._delegate?t._delegate:t}class ho{constructor(e,r,i){this.name=e,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PM=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const i=new hM;if(this.instancesDeferred.set(r,i),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(NM(e))try{this.getOrInitializeService({instanceIdentifier:Ys})}catch{}for(const[r,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=Ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ys){return this.instances.has(e)}getOptions(e=Ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:r});for(const[o,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);i===l&&a.resolve(s)}return s}onInit(e,r){var i;const s=this.normalizeInstanceIdentifier(r),o=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(s,o);const a=this.instances.get(s);return a&&e(a,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,r){const i=this.onInitCallbacks.get(r);if(i)for(const s of i)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:RM(e),options:r}),this.instances.set(e,i),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Ys){return this.component?this.component.multipleInstances?e:Ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function RM(t){return t===Ys?void 0:t}function NM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new PM(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(We||(We={}));const MM={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},LM=We.INFO,OM={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},jM=(t,e,...r)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=OM[e];if(s)console[s](`[${i}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ry{constructor(e){this.name=e,this._logLevel=LM,this._logHandler=jM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?MM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const VM=(t,e)=>e.some(r=>t instanceof r);let Zw,eb;function FM(){return Zw||(Zw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UM(){return eb||(eb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K1=new WeakMap,Mg=new WeakMap,Y1=new WeakMap,Jp=new WeakMap,Ny=new WeakMap;function BM(t){const e=new Promise((r,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{r(ps(t.result)),s()},a=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&K1.set(r,t)}).catch(()=>{}),Ny.set(e,t),e}function $M(t){if(Mg.has(t))return;const e=new Promise((r,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{r(),s()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Mg.set(t,e)}let Lg={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Mg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Y1.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ps(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zM(t){Lg=t(Lg)}function HM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const i=t.call(Zp(this),e,...r);return Y1.set(i,e.sort?e.sort():[e]),ps(i)}:UM().includes(t)?function(...e){return t.apply(Zp(this),e),ps(K1.get(this))}:function(...e){return ps(t.apply(Zp(this),e))}}function WM(t){return typeof t=="function"?HM(t):(t instanceof IDBTransaction&&$M(t),VM(t,FM())?new Proxy(t,Lg):t)}function ps(t){if(t instanceof IDBRequest)return BM(t);if(Jp.has(t))return Jp.get(t);const e=WM(t);return e!==t&&(Jp.set(t,e),Ny.set(e,t)),e}const Zp=t=>Ny.get(t);function qM(t,e,{blocked:r,upgrade:i,blocking:s,terminated:o}={}){const a=indexedDB.open(t,e),l=ps(a);return i&&a.addEventListener("upgradeneeded",u=>{i(ps(a.result),u.oldVersion,u.newVersion,ps(a.transaction),u)}),r&&a.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const GM=["get","getKey","getAll","getAllKeys","count"],KM=["put","add","delete","clear"],em=new Map;function tb(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(em.get(e))return em.get(e);const r=e.replace(/FromIndex$/,""),i=e!==r,s=KM.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(s||GM.includes(r)))return;const o=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let c=u.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[r](...l),s&&u.done]))[0]};return em.set(e,o),o}zM(t=>({...t,get:(e,r,i)=>tb(e,r)||t.get(e,r,i),has:(e,r)=>!!tb(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(XM(r)){const i=r.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(r=>r).join(" ")}}function XM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Og="@firebase/app",nb="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new Ry("@firebase/app"),QM="@firebase/app-compat",JM="@firebase/analytics-compat",ZM="@firebase/analytics",eL="@firebase/app-check-compat",tL="@firebase/app-check",nL="@firebase/auth",rL="@firebase/auth-compat",iL="@firebase/database",sL="@firebase/data-connect",oL="@firebase/database-compat",aL="@firebase/functions",lL="@firebase/functions-compat",uL="@firebase/installations",cL="@firebase/installations-compat",dL="@firebase/messaging",hL="@firebase/messaging-compat",fL="@firebase/performance",pL="@firebase/performance-compat",mL="@firebase/remote-config",gL="@firebase/remote-config-compat",vL="@firebase/storage",yL="@firebase/storage-compat",_L="@firebase/firestore",wL="@firebase/vertexai",bL="@firebase/firestore-compat",xL="firebase",EL="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="[DEFAULT]",TL={[Og]:"fire-core",[QM]:"fire-core-compat",[ZM]:"fire-analytics",[JM]:"fire-analytics-compat",[tL]:"fire-app-check",[eL]:"fire-app-check-compat",[nL]:"fire-auth",[rL]:"fire-auth-compat",[iL]:"fire-rtdb",[sL]:"fire-data-connect",[oL]:"fire-rtdb-compat",[aL]:"fire-fn",[lL]:"fire-fn-compat",[uL]:"fire-iid",[cL]:"fire-iid-compat",[dL]:"fire-fcm",[hL]:"fire-fcm-compat",[fL]:"fire-perf",[pL]:"fire-perf-compat",[mL]:"fire-rc",[gL]:"fire-rc-compat",[vL]:"fire-gcs",[yL]:"fire-gcs-compat",[_L]:"fire-fst",[bL]:"fire-fst-compat",[wL]:"fire-vertex","fire-js":"fire-js",[xL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=new Map,SL=new Map,Vg=new Map;function rb(t,e){try{t.container.addComponent(e)}catch(r){ki.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Ta(t){const e=t.name;if(Vg.has(e))return ki.debug(`There were multiple attempts to register component ${e}.`),!1;Vg.set(e,t);for(const r of wh.values())rb(r,t);for(const r of SL.values())rb(r,t);return!0}function Dy(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function jr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ms=new Xu("app","Firebase",IL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{constructor(e,r,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ho("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ms.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qa=EL;function X1(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:jg,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw ms.create("bad-app-name",{appName:String(s)});if(r||(r=q1()),!r)throw ms.create("no-options");const o=wh.get(s);if(o){if(_h(r,o.options)&&_h(i,o.config))return o;throw ms.create("duplicate-app",{appName:s})}const a=new DM(s);for(const u of Vg.values())a.addComponent(u);const l=new kL(r,i,a);return wh.set(s,l),l}function Q1(t=jg){const e=wh.get(t);if(!e&&t===jg&&q1())return X1();if(!e)throw ms.create("no-app",{appName:t});return e}function gs(t,e,r){var i;let s=(i=TL[t])!==null&&i!==void 0?i:t;r&&(s+=`-${r}`);const o=s.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const l=[`Unable to register library "${s}" with version "${e}":`];o&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ki.warn(l.join(" "));return}Ta(new ho(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL="firebase-heartbeat-database",AL=1,Iu="firebase-heartbeat-store";let tm=null;function J1(){return tm||(tm=qM(CL,AL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Iu)}catch(r){console.warn(r)}}}}).catch(t=>{throw ms.create("idb-open",{originalErrorMessage:t.message})})),tm}async function PL(t){try{const r=(await J1()).transaction(Iu),i=await r.objectStore(Iu).get(Z1(t));return await r.done,i}catch(e){if(e instanceof Mi)ki.warn(e.message);else{const r=ms.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ki.warn(r.message)}}}async function ib(t,e){try{const i=(await J1()).transaction(Iu,"readwrite");await i.objectStore(Iu).put(e,Z1(t)),await i.done}catch(r){if(r instanceof Mi)ki.warn(r.message);else{const i=ms.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});ki.warn(i.message)}}}function Z1(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL=1024,NL=30;class DL{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new LL(r),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=sb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>NL){const a=OL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ki.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=sb(),{heartbeatsToSend:i,unsentEntries:s}=ML(this._heartbeatsCache.heartbeats),o=yh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(r){return ki.warn(r),""}}}function sb(){return new Date().toISOString().substring(0,10)}function ML(t,e=RL){const r=[];let i=t.slice();for(const s of t){const o=r.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),ob(r)>e){o.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),ob(r)>e){r.pop();break}i=i.slice(1)}return{heartbeatsToSend:r,unsentEntries:i}}class LL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return bM()?xM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await PL(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return ib(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return ib(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function ob(t){return yh(JSON.stringify({version:2,heartbeats:t})).length}function OL(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let i=1;i<t.length;i++)t[i].date<r&&(r=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(t){Ta(new ho("platform-logger",e=>new YM(e),"PRIVATE")),Ta(new ho("heartbeat",e=>new DL(e),"PRIVATE")),gs(Og,nb,t),gs(Og,nb,"esm2017"),gs("fire-js","")}jL("");function My(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r}function eI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const VL=eI,tI=new Xu("auth","Firebase",eI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new Ry("@firebase/auth");function FL(t,...e){bh.logLevel<=We.WARN&&bh.warn(`Auth (${qa}): ${t}`,...e)}function Rd(t,...e){bh.logLevel<=We.ERROR&&bh.error(`Auth (${qa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(t,...e){throw Ly(t,...e)}function Zr(t,...e){return Ly(t,...e)}function nI(t,e,r){const i=Object.assign(Object.assign({},VL()),{[e]:r});return new Xu("auth","Firebase",i).create(e,{appName:t.name})}function vs(t){return nI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ly(t,...e){if(typeof t!="string"){const r=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(r,...i)}return tI.create(t,...e)}function Ce(t,e,...r){if(!t)throw Ly(e,...r)}function vi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Rd(e),new Error(e)}function Ci(t,e){t||vi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function UL(){return ab()==="http:"||ab()==="https:"}function ab(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(UL()||vM()||"connection"in navigator)?navigator.onLine:!0}function $L(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,r){this.shortDelay=e,this.longDelay=r,Ci(r>e,"Short delay should be less than long delay!"),this.isMobile=pM()||yM()}get(){return BL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t,e){Ci(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{static initialize(e,r,i){this.fetchImpl=e,r&&(this.headersImpl=r),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL=new Ju(3e4,6e4);function xo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function js(t,e,r,i,s={}){return iI(t,s,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const l=Qu(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},o);return gM()||(c.referrerPolicy="no-referrer"),rI.fetch()(sI(t,t.config.apiHost,r,l),c)})}async function iI(t,e,r){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},zL),e);try{const s=new qL(t),o=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw nd(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const l=o.ok?a.errorMessage:a.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw nd(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw nd(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw nd(t,"user-disabled",a);const h=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw nI(t,h,c);$r(t,h)}}catch(s){if(s instanceof Mi)throw s;$r(t,"network-request-failed",{message:String(s)})}}async function wf(t,e,r,i,s={}){const o=await js(t,e,r,i,s);return"mfaPendingCredential"in o&&$r(t,"multi-factor-auth-required",{_serverResponse:o}),o}function sI(t,e,r,i){const s=`${e}${r}?${i}`;return t.config.emulator?Oy(t.config,s):`${t.config.apiScheme}://${s}`}function WL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class qL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,i)=>{this.timer=setTimeout(()=>i(Zr(this.auth,"network-request-failed")),HL.get())})}}function nd(t,e,r){const i={appName:t.name};r.email&&(i.email=r.email),r.phoneNumber&&(i.phoneNumber=r.phoneNumber);const s=Zr(t,e,i);return s.customData._tokenResponse=r,s}function lb(t){return t!==void 0&&t.enterprise!==void 0}class GL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return WL(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function KL(t,e){return js(t,"GET","/v2/recaptchaConfig",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YL(t,e){return js(t,"POST","/v1/accounts:delete",e)}async function oI(t,e){return js(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function XL(t,e=!1){const r=dn(t),i=await r.getIdToken(e),s=jy(i);Ce(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:eu(nm(s.auth_time)),issuedAtTime:eu(nm(s.iat)),expirationTime:eu(nm(s.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function nm(t){return Number(t)*1e3}function jy(t){const[e,r,i]=t.split(".");if(e===void 0||r===void 0||i===void 0)return Rd("JWT malformed, contained fewer than 3 sections"),null;try{const s=H1(r);return s?JSON.parse(s):(Rd("Failed to decode base64 JWT payload"),null)}catch(s){return Rd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ub(t){const e=jy(t);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ku(t,e,r=!1){if(r)return e;try{return await e}catch(i){throw i instanceof Mi&&QL(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function QL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=eu(this.lastLoginAt),this.creationTime=eu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xh(t){var e;const r=t.auth,i=await t.getIdToken(),s=await ku(t,oI(r,{idToken:i}));Ce(s==null?void 0:s.users.length,r,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?aI(o.providerUserInfo):[],l=eO(t.providerData,a),u=t.isAnonymous,c=!(t.email&&o.passwordHash)&&!(l!=null&&l.length),h=u?c:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Ug(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function ZL(t){const e=dn(t);await xh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function eO(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function aI(t){return t.map(e=>{var{providerId:r}=e,i=My(e,["providerId"]);return{providerId:r,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tO(t,e){const r=await iI(t,{},async()=>{const i=Qu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,a=sI(t,s,"/v1/token",`key=${o}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",rI.fetch()(a,{method:"POST",headers:l,body:i})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function nO(t,e){return js(t,"POST","/v2/accounts:revokeToken",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ub(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const r=ub(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:i,refreshToken:s,expiresIn:o}=await tO(e,r);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,r,i){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,r){const{refreshToken:i,accessToken:s,expirationTime:o}=r,a=new da;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),s&&(Ce(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),o&&(Ce(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new da,this.toJSON())}_performRefresh(){return vi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hi(t,e){Ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class yi{constructor(e){var{uid:r,auth:i,stsTokenManager:s}=e,o=My(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new JL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ug(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const r=await ku(this,this.stsTokenManager.getToken(this.auth,e));return Ce(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return XL(this,e)}reload(){return ZL(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new yi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),r&&await xh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jr(this.auth.app))return Promise.reject(vs(this.auth));const e=await this.getIdToken();return await ku(this,YL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var i,s,o,a,l,u,c,h;const f=(i=r.displayName)!==null&&i!==void 0?i:void 0,p=(s=r.email)!==null&&s!==void 0?s:void 0,g=(o=r.phoneNumber)!==null&&o!==void 0?o:void 0,b=(a=r.photoURL)!==null&&a!==void 0?a:void 0,R=(l=r.tenantId)!==null&&l!==void 0?l:void 0,P=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,x=(c=r.createdAt)!==null&&c!==void 0?c:void 0,_=(h=r.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:T,emailVerified:L,isAnonymous:F,providerData:V,stsTokenManager:D}=r;Ce(T&&D,e,"internal-error");const I=da.fromJSON(this.name,D);Ce(typeof T=="string",e,"internal-error"),Hi(f,e.name),Hi(p,e.name),Ce(typeof L=="boolean",e,"internal-error"),Ce(typeof F=="boolean",e,"internal-error"),Hi(g,e.name),Hi(b,e.name),Hi(R,e.name),Hi(P,e.name),Hi(x,e.name),Hi(_,e.name);const E=new yi({uid:T,auth:e,email:p,emailVerified:L,displayName:f,isAnonymous:F,photoURL:b,phoneNumber:g,tenantId:R,stsTokenManager:I,createdAt:x,lastLoginAt:_});return V&&Array.isArray(V)&&(E.providerData=V.map(w=>Object.assign({},w))),P&&(E._redirectEventId=P),E}static async _fromIdTokenResponse(e,r,i=!1){const s=new da;s.updateFromServerResponse(r);const o=new yi({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await xh(o),o}static async _fromGetAccountInfoResponse(e,r,i){const s=r.users[0];Ce(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?aI(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),l=new da;l.updateFromIdToken(i);const u=new yi({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Ug(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb=new Map;function _i(t){Ci(t instanceof Function,"Expected a class definition");let e=cb.get(t);return e?(Ci(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,cb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}lI.type="NONE";const db=lI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(t,e,r){return`firebase:${t}:${e}:${r}`}class ha{constructor(e,r,i){this.persistence=e,this.auth=r,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=Nd(this.userKey,s.apiKey,o),this.fullPersistenceKey=Nd("persistence",s.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?yi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,i="authUser"){if(!r.length)return new ha(_i(db),e,i);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let o=s[0]||_i(db);const a=Nd(i,e.config.apiKey,e.name);let l=null;for(const c of r)try{const h=await c._get(a);if(h){const f=yi._fromJSON(e,h);c!==o&&(l=f),o=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new ha(o,e,i):(o=u[0],l&&await o._set(a,l.toJSON()),await Promise.all(r.map(async c=>{if(c!==o)try{await c._remove(a)}catch{}})),new ha(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(uI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(pI(e))return"Blackberry";if(mI(e))return"Webos";if(cI(e))return"Safari";if((e.includes("chrome/")||dI(e))&&!e.includes("edge/"))return"Chrome";if(fI(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(r);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function uI(t=Tn()){return/firefox\//i.test(t)}function cI(t=Tn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dI(t=Tn()){return/crios\//i.test(t)}function hI(t=Tn()){return/iemobile/i.test(t)}function fI(t=Tn()){return/android/i.test(t)}function pI(t=Tn()){return/blackberry/i.test(t)}function mI(t=Tn()){return/webos/i.test(t)}function Vy(t=Tn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function rO(t=Tn()){var e;return Vy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function iO(){return _M()&&document.documentMode===10}function gI(t=Tn()){return Vy(t)||fI(t)||mI(t)||pI(t)||/windows phone/i.test(t)||hI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vI(t,e=[]){let r;switch(t){case"Browser":r=hb(Tn());break;case"Worker":r=`${hb(Tn())}-${t}`;break;default:r=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${qa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const i=o=>new Promise((a,l)=>{try{const u=e(o);a(u)}catch(u){l(u)}});i.onAbort=r,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const i of this.queue)await i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oO(t,e={}){return js(t,"GET","/v2/passwordPolicy",xo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aO=6;class lO{constructor(e){var r,i,s,o;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:aO,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,i,s,o,a,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,r){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(r.meetsMinPasswordLength=e.length>=i),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,r,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uO{constructor(e,r,i,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fb(this),this.idTokenSubscription=new fb(this),this.beforeStateQueue=new sO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=_i(r)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await ha.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await oI(this,{idToken:e}),i=await yi._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(jr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(s=u.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await xh(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$L()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jr(this.app))return Promise.reject(vs(this));const r=e?dn(e):null;return r&&Ce(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jr(this.app)?Promise.reject(vs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jr(this.app)?Promise.reject(vs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_i(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oO(this),r=new lO(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xu("auth","Firebase",e())}onAuthStateChanged(e,r,i){return this.registerStateListener(this.authStateSubscription,e,r,i)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,i){return this.registerStateListener(this.idTokenSubscription,e,r,i)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(i.tenantId=this.tenantId),await nO(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const i=await this.getOrInitRedirectPersistenceManager(r);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&_i(e)||this._popupRedirectResolver;Ce(r,this,"argument-error"),this.redirectPersistenceManager=await ha.create(this,[_i(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,i;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,i,s){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(l,this,"internal-error"),l.then(()=>{a||o(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,i,s);return()=>{a=!0,u()}}else{const u=e.addObserver(r);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=vI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(r["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;if(jr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&FL(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Ga(t){return dn(t)}class fb{constructor(e){this.auth=e,this.observer=null,this.addObserver=kM(r=>this.observer=r)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function cO(t){bf=t}function yI(t){return bf.loadJS(t)}function dO(){return bf.recaptchaEnterpriseScript}function hO(){return bf.gapiScript}function fO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class pO{constructor(){this.enterprise=new mO}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class mO{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const gO="recaptcha-enterprise",_I="NO_RECAPTCHA";class vO{constructor(e){this.type=gO,this.auth=Ga(e)}async verify(e="verify",r=!1){async function i(o){if(!r){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,l)=>{KL(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new GL(u);return o.tenantId==null?o._agentRecaptchaConfig=c:o._tenantRecaptchaConfigs[o.tenantId]=c,a(c.siteKey)}}).catch(u=>{l(u)})})}function s(o,a,l){const u=window.grecaptcha;lb(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(c=>{a(c)}).catch(()=>{a(_I)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new pO().execute("siteKey",{action:"verify"}):new Promise((o,a)=>{i(this.auth).then(l=>{if(!r&&lb(window.grecaptcha))s(l,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=dO();u.length!==0&&(u+=l),yI(u).then(()=>{s(l,o,a)}).catch(c=>{a(c)})}}).catch(l=>{a(l)})})}}async function pb(t,e,r,i=!1,s=!1){const o=new vO(t);let a;if(s)a=_I;else try{a=await o.verify(r)}catch{a=await o.verify(r,!0)}const l=Object.assign({},e);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,c=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function mb(t,e,r,i,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await pb(t,e,r,r==="getOobCode");return i(t,a)}else return i(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await pb(t,e,r,r==="getOobCode");return i(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yO(t,e){const r=Dy(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),o=r.getOptions();if(_h(o,e??{}))return s;$r(s,"already-initialized")}return r.initialize({options:e})}function _O(t,e){const r=(e==null?void 0:e.persistence)||[],i=(Array.isArray(r)?r:[r]).map(_i);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function wO(t,e,r){const i=Ga(t);Ce(i._canInitEmulator,i,"emulator-config-failed"),Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=wI(e),{host:a,port:l}=bO(e),u=l===null?"":`:${l}`;i.config.emulator={url:`${o}//${a}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})}),xO()}function wI(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function bO(t){const e=wI(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const i=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:gb(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:gb(a)}}}function gb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function xO(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return vi("not implemented")}_getIdTokenResponse(e){return vi("not implemented")}_linkToIdToken(e,r){return vi("not implemented")}_getReauthenticationResolver(e){return vi("not implemented")}}async function EO(t,e){return js(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TO(t,e){return wf(t,"POST","/v1/accounts:signInWithPassword",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SO(t,e){return wf(t,"POST","/v1/accounts:signInWithEmailLink",xo(t,e))}async function IO(t,e){return wf(t,"POST","/v1/accounts:signInWithEmailLink",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu extends Fy{constructor(e,r,i,s=null){super("password",i),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new Cu(e,r,"password")}static _fromEmailAndCode(e,r,i=null){return new Cu(e,r,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mb(e,r,"signInWithPassword",TO);case"emailLink":return SO(e,{email:this._email,oobCode:this._password});default:$r(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const i={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return mb(e,i,"signUpPassword",EO);case"emailLink":return IO(e,{idToken:r,email:this._email,oobCode:this._password});default:$r(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fa(t,e){return wf(t,"POST","/v1/accounts:signInWithIdp",xo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO="http://localhost";class fo extends Fy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new fo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):$r("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=r,o=My(r,["providerId","signInMethod"]);if(!i||!s)return null;const a=new fo(i,s);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return fa(e,r)}_linkToIdToken(e,r){const i=this.buildRequest();return i.idToken=r,fa(e,i)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,fa(e,r)}buildRequest(){const e={requestUri:kO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Qu(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function AO(t){const e=jl(Vl(t)).link,r=e?jl(Vl(e)).deep_link_id:null,i=jl(Vl(t)).deep_link_id;return(i?jl(Vl(i)).link:null)||i||r||e||t}class Uy{constructor(e){var r,i,s,o,a,l;const u=jl(Vl(e)),c=(r=u.apiKey)!==null&&r!==void 0?r:null,h=(i=u.oobCode)!==null&&i!==void 0?i:null,f=CO((s=u.mode)!==null&&s!==void 0?s:null);Ce(c&&h&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=AO(e);try{return new Uy(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(){this.providerId=Ka.PROVIDER_ID}static credential(e,r){return Cu._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const i=Uy.parseLink(r);return Ce(i,"argument-error"),Cu._fromEmailAndCode(e,i.code,i.tenantId)}}Ka.PROVIDER_ID="password";Ka.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ka.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu extends bI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends Zu{constructor(){super("facebook.com")}static credential(e){return fo._fromParams({providerId:Zi.PROVIDER_ID,signInMethod:Zi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Zi.credentialFromTaggedObject(e)}static credentialFromError(e){return Zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Zi.credential(e.oauthAccessToken)}catch{return null}}}Zi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Zi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class es extends Zu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return fo._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:i}=e;if(!r&&!i)return null;try{return es.credential(r,i)}catch{return null}}}es.GOOGLE_SIGN_IN_METHOD="google.com";es.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts extends Zu{constructor(){super("github.com")}static credential(e){return fo._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ts.credential(e.oauthAccessToken)}catch{return null}}}ts.GITHUB_SIGN_IN_METHOD="github.com";ts.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends Zu{constructor(){super("twitter.com")}static credential(e,r){return fo._fromParams({providerId:ns.PROVIDER_ID,signInMethod:ns.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return ns.credentialFromTaggedObject(e)}static credentialFromError(e){return ns.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:i}=e;if(!r||!i)return null;try{return ns.credential(r,i)}catch{return null}}}ns.TWITTER_SIGN_IN_METHOD="twitter.com";ns.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,i,s=!1){const o=await yi._fromIdTokenResponse(e,i,s),a=vb(i);return new Sa({user:o,providerId:a,_tokenResponse:i,operationType:r})}static async _forOperation(e,r,i){await e._updateTokensIfNecessary(i,!0);const s=vb(i);return new Sa({user:e,providerId:s,_tokenResponse:i,operationType:r})}}function vb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh extends Mi{constructor(e,r,i,s){var o;super(r.code,r.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Eh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:r.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,r,i,s){return new Eh(e,r,i,s)}}function xI(t,e,r,i){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Eh._fromErrorAndOperation(t,o,e,i):o})}async function PO(t,e,r=!1){const i=await ku(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Sa._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RO(t,e,r=!1){const{auth:i}=t;if(jr(i.app))return Promise.reject(vs(i));const s="reauthenticate";try{const o=await ku(t,xI(i,s,e,t),r);Ce(o.idToken,i,"internal-error");const a=jy(o.idToken);Ce(a,i,"internal-error");const{sub:l}=a;return Ce(t.uid===l,i,"user-mismatch"),Sa._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&$r(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EI(t,e,r=!1){if(jr(t.app))return Promise.reject(vs(t));const i="signIn",s=await xI(t,i,e),o=await Sa._fromIdTokenResponse(t,i,s);return r||await t._updateCurrentUser(o.user),o}async function NO(t,e){return EI(Ga(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DO(t){const e=Ga(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function MO(t,e,r){return jr(t.app)?Promise.reject(vs(t)):NO(dn(t),Ka.credential(e,r)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&DO(t),i})}function LO(t,e,r,i){return dn(t).onIdTokenChanged(e,r,i)}function OO(t,e,r){return dn(t).beforeAuthStateChanged(e,r)}function jO(t,e,r,i){return dn(t).onAuthStateChanged(e,r,i)}function VO(t){return dn(t).signOut()}const Th="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Th,"1"),this.storage.removeItem(Th),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FO=1e3,UO=10;class SI extends TI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=gI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&e(r,s,i)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);iO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,UO):s()}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:i}),!0)})},FO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}SI.type="LOCAL";const BO=SI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II extends TI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}II.type="SESSION";const kI=II;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $O(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const i=new xf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async c=>c(r.origin,o)),u=await $O(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(t="",e=10){let r="";for(let i=0;i<e;i++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,u)=>{const c=By("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(p.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(){return window}function HO(t){ei().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(){return typeof ei().WorkerGlobalScope<"u"&&typeof ei().importScripts=="function"}async function WO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function GO(){return CI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI="firebaseLocalStorageDb",KO=1,Sh="firebaseLocalStorage",PI="fbase_key";class ec{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Ef(t,e){return t.transaction([Sh],e?"readwrite":"readonly").objectStore(Sh)}function YO(){const t=indexedDB.deleteDatabase(AI);return new ec(t).toPromise()}function Bg(){const t=indexedDB.open(AI,KO);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Sh,{keyPath:PI})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Sh)?e(i):(i.close(),await YO(),e(await Bg()))})})}async function yb(t,e,r){const i=Ef(t,!0).put({[PI]:e,value:r});return new ec(i).toPromise()}async function XO(t,e){const r=Ef(t,!1).get(e),i=await new ec(r).toPromise();return i===void 0?null:i.value}function _b(t,e){const r=Ef(t,!0).delete(e);return new ec(r).toPromise()}const QO=800,JO=3;class RI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Bg(),this.db)}async _withRetries(e){let r=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(r++>JO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return CI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xf._getInstance(GO()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await WO(),!this.activeServiceWorker)return;this.sender=new zO(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Bg();return await yb(e,Th,"1"),await _b(e,Th),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>yb(i,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(i=>XO(i,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>_b(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Ef(s,!1).getAll();return new ec(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),QO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}RI.type="LOCAL";const ZO=RI;new Ju(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ej(t,e){return e?_i(e):(Ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y extends Fy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fa(e,this._buildIdpRequest())}_linkToIdToken(e,r){return fa(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return fa(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function tj(t){return EI(t.auth,new $y(t),t.bypassAuthState)}function nj(t){const{auth:e,user:r}=t;return Ce(r,e,"internal-error"),RO(r,new $y(t),t.bypassAuthState)}async function rj(t){const{auth:e,user:r}=t;return Ce(r,e,"internal-error"),PO(r,new $y(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e,r,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return tj;case"linkViaPopup":case"linkViaRedirect":return rj;case"reauthViaPopup":case"reauthViaRedirect":return nj;default:$r(this.auth,"internal-error")}}resolve(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij=new Ju(2e3,1e4);class ia extends NI{constructor(e,r,i,s,o){super(e,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,ia.currentPopupAction&&ia.currentPopupAction.cancel(),ia.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Ci(this.filter.length===1,"Popup operations only handle one event");const e=By();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Zr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Zr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ia.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ij.get())};e()}}ia.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sj="pendingRedirect",Dd=new Map;class oj extends NI{constructor(e,r,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,i),this.eventId=null}async execute(){let e=Dd.get(this.auth._key());if(!e){try{const i=await aj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(r){e=()=>Promise.reject(r)}Dd.set(this.auth._key(),e)}return this.bypassAuthState||Dd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function aj(t,e){const r=cj(e),i=uj(t);if(!await i._isAvailable())return!1;const s=await i._get(r)==="true";return await i._remove(r),s}function lj(t,e){Dd.set(t._key(),e)}function uj(t){return _i(t._redirectPersistence)}function cj(t){return Nd(sj,t.config.apiKey,t.name)}async function dj(t,e,r=!1){if(jr(t.app))return Promise.reject(vs(t));const i=Ga(t),s=ej(i,e),a=await new oj(i,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=10*60*1e3;class fj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(r=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!pj(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var i;if(e.error&&!DI(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";r.onError(Zr(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const i=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hj&&this.cachedEventUids.clear(),this.cachedEventUids.has(wb(e))}saveEventToCache(e){this.cachedEventUids.add(wb(e)),this.lastProcessedEventTime=Date.now()}}function wb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function DI({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function pj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DI(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mj(t,e={}){return js(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vj=/^https?/;async function yj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await mj(t);for(const r of e)try{if(_j(r))return}catch{}$r(t,"unauthorized-domain")}function _j(t){const e=Fg(),{protocol:r,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===i}if(!vj.test(r))return!1;if(gj.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=new Ju(3e4,6e4);function bb(){const t=ei().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function bj(t){return new Promise((e,r)=>{var i,s,o;function a(){bb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bb(),r(Zr(t,"network-request-failed"))},timeout:wj.get()})}if(!((s=(i=ei().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=ei().gapi)===null||o===void 0)&&o.load)a();else{const l=fO("iframefcb");return ei()[l]=()=>{gapi.load?a():r(Zr(t,"network-request-failed"))},yI(`${hO()}?onload=${l}`).catch(u=>r(u))}}).catch(e=>{throw Md=null,e})}let Md=null;function xj(t){return Md=Md||bj(t),Md}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ej=new Ju(5e3,15e3),Tj="__/auth/iframe",Sj="emulator/auth/iframe",Ij={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Cj(t){const e=t.config;Ce(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Oy(e,Sj):`https://${t.config.authDomain}/${Tj}`,i={apiKey:e.apiKey,appName:t.name,v:qa},s=kj.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${r}?${Qu(i).slice(1)}`}async function Aj(t){const e=await xj(t),r=ei().gapi;return Ce(r,t,"internal-error"),e.open({where:document.body,url:Cj(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ij,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const a=Zr(t,"network-request-failed"),l=ei().setTimeout(()=>{o(a)},Ej.get());function u(){ei().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Rj=500,Nj=600,Dj="_blank",Mj="http://localhost";class xb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Lj(t,e,r,i=Rj,s=Nj){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u=Object.assign(Object.assign({},Pj),{width:i.toString(),height:s.toString(),top:o,left:a}),c=Tn().toLowerCase();r&&(l=dI(c)?Dj:r),uI(c)&&(e=e||Mj,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[g,b])=>`${p}${g}=${b},`,"");if(rO(c)&&l!=="_self")return Oj(e||"",l),new xb(null);const f=window.open(e||"",l,h);Ce(f,t,"popup-blocked");try{f.focus()}catch{}return new xb(f)}function Oj(t,e){const r=document.createElement("a");r.href=t,r.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jj="__/auth/handler",Vj="emulator/auth/handler",Fj=encodeURIComponent("fac");async function Eb(t,e,r,i,s,o){Ce(t.config.authDomain,t,"auth-domain-config-required"),Ce(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:qa,eventId:s};if(e instanceof bI){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",IM(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof Zu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),c=u?`#${Fj}=${encodeURIComponent(u)}`:"";return`${Uj(t)}?${Qu(l).slice(1)}${c}`}function Uj({config:t}){return t.emulator?Oy(t,Vj):`https://${t.authDomain}/${jj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm="webStorageSupport";class Bj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=kI,this._completeRedirectFn=dj,this._overrideRedirectResult=lj}async _openPopup(e,r,i,s){var o;Ci((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await Eb(e,r,i,Fg(),s);return Lj(e,a,By())}async _openRedirect(e,r,i,s){await this._originValidation(e);const o=await Eb(e,r,i,Fg(),s);return HO(o),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:o}=this.eventManagers[r];return s?Promise.resolve(s):(Ci(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[r]={promise:i},i.catch(()=>{delete this.eventManagers[r]}),i}async initAndGetManager(e){const r=await Aj(e),i=new fj(e);return r.register("authEvent",s=>(Ce(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=r,i}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(rm,{type:rm},s=>{var o;const a=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[rm];a!==void 0&&r(!!a),$r(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=yj(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return gI()||cI()||Vy()}}const $j=Bj;var Tb="@firebase/auth",Sb="1.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Wj(t){Ta(new ho("auth",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;Ce(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:vI(t)},c=new uO(i,s,o,u);return _O(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,i)=>{e.getProvider("auth-internal").initialize()})),Ta(new ho("auth-internal",e=>{const r=Ga(e.getProvider("auth").getImmediate());return(i=>new zj(i))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),gs(Tb,Sb,Hj(t)),gs(Tb,Sb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj=5*60,Gj=G1("authIdTokenMaxAge")||qj;let Ib=null;const Kj=t=>async e=>{const r=e&&await e.getIdTokenResult(),i=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>Gj)return;const s=r==null?void 0:r.token;Ib!==s&&(Ib=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Yj(t=Q1()){const e=Dy(t,"auth");if(e.isInitialized())return e.getImmediate();const r=yO(t,{popupRedirectResolver:$j,persistence:[ZO,BO,kI]}),i=G1("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=Kj(o.toString());OO(r,a,()=>a(r.currentUser)),LO(r,l=>a(l))}}const s=W1("auth");return s&&wO(r,`http://${s}`),r}function Xj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}cO({loadJS(t){return new Promise((e,r)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=Zr("internal-error");o.customData=s,r(o)},i.type="text/javascript",i.charset="UTF-8",Xj().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Wj("Browser");var Qj="firebase",Jj="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */gs(Qj,Jj,"app");var kb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ys,MI;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(D,I){function E(){}E.prototype=I.prototype,D.D=I.prototype,D.prototype=new E,D.prototype.constructor=D,D.C=function(w,y,C){for(var A=Array(arguments.length-2),z=2;z<arguments.length;z++)A[z-2]=arguments[z];return I.prototype[y].apply(w,A)}}function r(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,r),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(D,I,E){E||(E=0);var w=Array(16);if(typeof I=="string")for(var y=0;16>y;++y)w[y]=I.charCodeAt(E++)|I.charCodeAt(E++)<<8|I.charCodeAt(E++)<<16|I.charCodeAt(E++)<<24;else for(y=0;16>y;++y)w[y]=I[E++]|I[E++]<<8|I[E++]<<16|I[E++]<<24;I=D.g[0],E=D.g[1],y=D.g[2];var C=D.g[3],A=I+(C^E&(y^C))+w[0]+3614090360&4294967295;I=E+(A<<7&4294967295|A>>>25),A=C+(y^I&(E^y))+w[1]+3905402710&4294967295,C=I+(A<<12&4294967295|A>>>20),A=y+(E^C&(I^E))+w[2]+606105819&4294967295,y=C+(A<<17&4294967295|A>>>15),A=E+(I^y&(C^I))+w[3]+3250441966&4294967295,E=y+(A<<22&4294967295|A>>>10),A=I+(C^E&(y^C))+w[4]+4118548399&4294967295,I=E+(A<<7&4294967295|A>>>25),A=C+(y^I&(E^y))+w[5]+1200080426&4294967295,C=I+(A<<12&4294967295|A>>>20),A=y+(E^C&(I^E))+w[6]+2821735955&4294967295,y=C+(A<<17&4294967295|A>>>15),A=E+(I^y&(C^I))+w[7]+4249261313&4294967295,E=y+(A<<22&4294967295|A>>>10),A=I+(C^E&(y^C))+w[8]+1770035416&4294967295,I=E+(A<<7&4294967295|A>>>25),A=C+(y^I&(E^y))+w[9]+2336552879&4294967295,C=I+(A<<12&4294967295|A>>>20),A=y+(E^C&(I^E))+w[10]+4294925233&4294967295,y=C+(A<<17&4294967295|A>>>15),A=E+(I^y&(C^I))+w[11]+2304563134&4294967295,E=y+(A<<22&4294967295|A>>>10),A=I+(C^E&(y^C))+w[12]+1804603682&4294967295,I=E+(A<<7&4294967295|A>>>25),A=C+(y^I&(E^y))+w[13]+4254626195&4294967295,C=I+(A<<12&4294967295|A>>>20),A=y+(E^C&(I^E))+w[14]+2792965006&4294967295,y=C+(A<<17&4294967295|A>>>15),A=E+(I^y&(C^I))+w[15]+1236535329&4294967295,E=y+(A<<22&4294967295|A>>>10),A=I+(y^C&(E^y))+w[1]+4129170786&4294967295,I=E+(A<<5&4294967295|A>>>27),A=C+(E^y&(I^E))+w[6]+3225465664&4294967295,C=I+(A<<9&4294967295|A>>>23),A=y+(I^E&(C^I))+w[11]+643717713&4294967295,y=C+(A<<14&4294967295|A>>>18),A=E+(C^I&(y^C))+w[0]+3921069994&4294967295,E=y+(A<<20&4294967295|A>>>12),A=I+(y^C&(E^y))+w[5]+3593408605&4294967295,I=E+(A<<5&4294967295|A>>>27),A=C+(E^y&(I^E))+w[10]+38016083&4294967295,C=I+(A<<9&4294967295|A>>>23),A=y+(I^E&(C^I))+w[15]+3634488961&4294967295,y=C+(A<<14&4294967295|A>>>18),A=E+(C^I&(y^C))+w[4]+3889429448&4294967295,E=y+(A<<20&4294967295|A>>>12),A=I+(y^C&(E^y))+w[9]+568446438&4294967295,I=E+(A<<5&4294967295|A>>>27),A=C+(E^y&(I^E))+w[14]+3275163606&4294967295,C=I+(A<<9&4294967295|A>>>23),A=y+(I^E&(C^I))+w[3]+4107603335&4294967295,y=C+(A<<14&4294967295|A>>>18),A=E+(C^I&(y^C))+w[8]+1163531501&4294967295,E=y+(A<<20&4294967295|A>>>12),A=I+(y^C&(E^y))+w[13]+2850285829&4294967295,I=E+(A<<5&4294967295|A>>>27),A=C+(E^y&(I^E))+w[2]+4243563512&4294967295,C=I+(A<<9&4294967295|A>>>23),A=y+(I^E&(C^I))+w[7]+1735328473&4294967295,y=C+(A<<14&4294967295|A>>>18),A=E+(C^I&(y^C))+w[12]+2368359562&4294967295,E=y+(A<<20&4294967295|A>>>12),A=I+(E^y^C)+w[5]+4294588738&4294967295,I=E+(A<<4&4294967295|A>>>28),A=C+(I^E^y)+w[8]+2272392833&4294967295,C=I+(A<<11&4294967295|A>>>21),A=y+(C^I^E)+w[11]+1839030562&4294967295,y=C+(A<<16&4294967295|A>>>16),A=E+(y^C^I)+w[14]+4259657740&4294967295,E=y+(A<<23&4294967295|A>>>9),A=I+(E^y^C)+w[1]+2763975236&4294967295,I=E+(A<<4&4294967295|A>>>28),A=C+(I^E^y)+w[4]+1272893353&4294967295,C=I+(A<<11&4294967295|A>>>21),A=y+(C^I^E)+w[7]+4139469664&4294967295,y=C+(A<<16&4294967295|A>>>16),A=E+(y^C^I)+w[10]+3200236656&4294967295,E=y+(A<<23&4294967295|A>>>9),A=I+(E^y^C)+w[13]+681279174&4294967295,I=E+(A<<4&4294967295|A>>>28),A=C+(I^E^y)+w[0]+3936430074&4294967295,C=I+(A<<11&4294967295|A>>>21),A=y+(C^I^E)+w[3]+3572445317&4294967295,y=C+(A<<16&4294967295|A>>>16),A=E+(y^C^I)+w[6]+76029189&4294967295,E=y+(A<<23&4294967295|A>>>9),A=I+(E^y^C)+w[9]+3654602809&4294967295,I=E+(A<<4&4294967295|A>>>28),A=C+(I^E^y)+w[12]+3873151461&4294967295,C=I+(A<<11&4294967295|A>>>21),A=y+(C^I^E)+w[15]+530742520&4294967295,y=C+(A<<16&4294967295|A>>>16),A=E+(y^C^I)+w[2]+3299628645&4294967295,E=y+(A<<23&4294967295|A>>>9),A=I+(y^(E|~C))+w[0]+4096336452&4294967295,I=E+(A<<6&4294967295|A>>>26),A=C+(E^(I|~y))+w[7]+1126891415&4294967295,C=I+(A<<10&4294967295|A>>>22),A=y+(I^(C|~E))+w[14]+2878612391&4294967295,y=C+(A<<15&4294967295|A>>>17),A=E+(C^(y|~I))+w[5]+4237533241&4294967295,E=y+(A<<21&4294967295|A>>>11),A=I+(y^(E|~C))+w[12]+1700485571&4294967295,I=E+(A<<6&4294967295|A>>>26),A=C+(E^(I|~y))+w[3]+2399980690&4294967295,C=I+(A<<10&4294967295|A>>>22),A=y+(I^(C|~E))+w[10]+4293915773&4294967295,y=C+(A<<15&4294967295|A>>>17),A=E+(C^(y|~I))+w[1]+2240044497&4294967295,E=y+(A<<21&4294967295|A>>>11),A=I+(y^(E|~C))+w[8]+1873313359&4294967295,I=E+(A<<6&4294967295|A>>>26),A=C+(E^(I|~y))+w[15]+4264355552&4294967295,C=I+(A<<10&4294967295|A>>>22),A=y+(I^(C|~E))+w[6]+2734768916&4294967295,y=C+(A<<15&4294967295|A>>>17),A=E+(C^(y|~I))+w[13]+1309151649&4294967295,E=y+(A<<21&4294967295|A>>>11),A=I+(y^(E|~C))+w[4]+4149444226&4294967295,I=E+(A<<6&4294967295|A>>>26),A=C+(E^(I|~y))+w[11]+3174756917&4294967295,C=I+(A<<10&4294967295|A>>>22),A=y+(I^(C|~E))+w[2]+718787259&4294967295,y=C+(A<<15&4294967295|A>>>17),A=E+(C^(y|~I))+w[9]+3951481745&4294967295,D.g[0]=D.g[0]+I&4294967295,D.g[1]=D.g[1]+(y+(A<<21&4294967295|A>>>11))&4294967295,D.g[2]=D.g[2]+y&4294967295,D.g[3]=D.g[3]+C&4294967295}i.prototype.u=function(D,I){I===void 0&&(I=D.length);for(var E=I-this.blockSize,w=this.B,y=this.h,C=0;C<I;){if(y==0)for(;C<=E;)s(this,D,C),C+=this.blockSize;if(typeof D=="string"){for(;C<I;)if(w[y++]=D.charCodeAt(C++),y==this.blockSize){s(this,w),y=0;break}}else for(;C<I;)if(w[y++]=D[C++],y==this.blockSize){s(this,w),y=0;break}}this.h=y,this.o+=I},i.prototype.v=function(){var D=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);D[0]=128;for(var I=1;I<D.length-8;++I)D[I]=0;var E=8*this.o;for(I=D.length-8;I<D.length;++I)D[I]=E&255,E/=256;for(this.u(D),D=Array(16),I=E=0;4>I;++I)for(var w=0;32>w;w+=8)D[E++]=this.g[I]>>>w&255;return D};function o(D,I){var E=l;return Object.prototype.hasOwnProperty.call(E,D)?E[D]:E[D]=I(D)}function a(D,I){this.h=I;for(var E=[],w=!0,y=D.length-1;0<=y;y--){var C=D[y]|0;w&&C==I||(E[y]=C,w=!1)}this.g=E}var l={};function u(D){return-128<=D&&128>D?o(D,function(I){return new a([I|0],0>I?-1:0)}):new a([D|0],0>D?-1:0)}function c(D){if(isNaN(D)||!isFinite(D))return f;if(0>D)return P(c(-D));for(var I=[],E=1,w=0;D>=E;w++)I[w]=D/E|0,E*=4294967296;return new a(I,0)}function h(D,I){if(D.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(D.charAt(0)=="-")return P(h(D.substring(1),I));if(0<=D.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(I,8)),w=f,y=0;y<D.length;y+=8){var C=Math.min(8,D.length-y),A=parseInt(D.substring(y,y+C),I);8>C?(C=c(Math.pow(I,C)),w=w.j(C).add(c(A))):(w=w.j(E),w=w.add(c(A)))}return w}var f=u(0),p=u(1),g=u(16777216);t=a.prototype,t.m=function(){if(R(this))return-P(this).m();for(var D=0,I=1,E=0;E<this.g.length;E++){var w=this.i(E);D+=(0<=w?w:4294967296+w)*I,I*=4294967296}return D},t.toString=function(D){if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(b(this))return"0";if(R(this))return"-"+P(this).toString(D);for(var I=c(Math.pow(D,6)),E=this,w="";;){var y=L(E,I).g;E=x(E,y.j(I));var C=((0<E.g.length?E.g[0]:E.h)>>>0).toString(D);if(E=y,b(E))return C+w;for(;6>C.length;)C="0"+C;w=C+w}},t.i=function(D){return 0>D?0:D<this.g.length?this.g[D]:this.h};function b(D){if(D.h!=0)return!1;for(var I=0;I<D.g.length;I++)if(D.g[I]!=0)return!1;return!0}function R(D){return D.h==-1}t.l=function(D){return D=x(this,D),R(D)?-1:b(D)?0:1};function P(D){for(var I=D.g.length,E=[],w=0;w<I;w++)E[w]=~D.g[w];return new a(E,~D.h).add(p)}t.abs=function(){return R(this)?P(this):this},t.add=function(D){for(var I=Math.max(this.g.length,D.g.length),E=[],w=0,y=0;y<=I;y++){var C=w+(this.i(y)&65535)+(D.i(y)&65535),A=(C>>>16)+(this.i(y)>>>16)+(D.i(y)>>>16);w=A>>>16,C&=65535,A&=65535,E[y]=A<<16|C}return new a(E,E[E.length-1]&-2147483648?-1:0)};function x(D,I){return D.add(P(I))}t.j=function(D){if(b(this)||b(D))return f;if(R(this))return R(D)?P(this).j(P(D)):P(P(this).j(D));if(R(D))return P(this.j(P(D)));if(0>this.l(g)&&0>D.l(g))return c(this.m()*D.m());for(var I=this.g.length+D.g.length,E=[],w=0;w<2*I;w++)E[w]=0;for(w=0;w<this.g.length;w++)for(var y=0;y<D.g.length;y++){var C=this.i(w)>>>16,A=this.i(w)&65535,z=D.i(y)>>>16,Q=D.i(y)&65535;E[2*w+2*y]+=A*Q,_(E,2*w+2*y),E[2*w+2*y+1]+=C*Q,_(E,2*w+2*y+1),E[2*w+2*y+1]+=A*z,_(E,2*w+2*y+1),E[2*w+2*y+2]+=C*z,_(E,2*w+2*y+2)}for(w=0;w<I;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=I;w<2*I;w++)E[w]=0;return new a(E,0)};function _(D,I){for(;(D[I]&65535)!=D[I];)D[I+1]+=D[I]>>>16,D[I]&=65535,I++}function T(D,I){this.g=D,this.h=I}function L(D,I){if(b(I))throw Error("division by zero");if(b(D))return new T(f,f);if(R(D))return I=L(P(D),I),new T(P(I.g),P(I.h));if(R(I))return I=L(D,P(I)),new T(P(I.g),I.h);if(30<D.g.length){if(R(D)||R(I))throw Error("slowDivide_ only works with positive integers.");for(var E=p,w=I;0>=w.l(D);)E=F(E),w=F(w);var y=V(E,1),C=V(w,1);for(w=V(w,2),E=V(E,2);!b(w);){var A=C.add(w);0>=A.l(D)&&(y=y.add(E),C=A),w=V(w,1),E=V(E,1)}return I=x(D,y.j(I)),new T(y,I)}for(y=f;0<=D.l(I);){for(E=Math.max(1,Math.floor(D.m()/I.m())),w=Math.ceil(Math.log(E)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),C=c(E),A=C.j(I);R(A)||0<A.l(D);)E-=w,C=c(E),A=C.j(I);b(C)&&(C=p),y=y.add(C),D=x(D,A)}return new T(y,D)}t.A=function(D){return L(this,D).h},t.and=function(D){for(var I=Math.max(this.g.length,D.g.length),E=[],w=0;w<I;w++)E[w]=this.i(w)&D.i(w);return new a(E,this.h&D.h)},t.or=function(D){for(var I=Math.max(this.g.length,D.g.length),E=[],w=0;w<I;w++)E[w]=this.i(w)|D.i(w);return new a(E,this.h|D.h)},t.xor=function(D){for(var I=Math.max(this.g.length,D.g.length),E=[],w=0;w<I;w++)E[w]=this.i(w)^D.i(w);return new a(E,this.h^D.h)};function F(D){for(var I=D.g.length+1,E=[],w=0;w<I;w++)E[w]=D.i(w)<<1|D.i(w-1)>>>31;return new a(E,D.h)}function V(D,I){var E=I>>5;I%=32;for(var w=D.g.length-E,y=[],C=0;C<w;C++)y[C]=0<I?D.i(C+E)>>>I|D.i(C+E+1)<<32-I:D.i(C+E);return new a(y,D.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,MI=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=h,ys=a}).apply(typeof kb<"u"?kb:typeof self<"u"?self:typeof window<"u"?window:{});var rd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var LI,Fl,OI,Ld,$g,jI,VI,FI;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,v,S){return d==Array.prototype||d==Object.prototype||(d[v]=S.value),d};function r(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof rd=="object"&&rd];for(var v=0;v<d.length;++v){var S=d[v];if(S&&S.Math==Math)return S}throw Error("Cannot find global object")}var i=r(this);function s(d,v){if(v)e:{var S=i;d=d.split(".");for(var O=0;O<d.length-1;O++){var H=d[O];if(!(H in S))break e;S=S[H]}d=d[d.length-1],O=S[d],v=v(O),v!=O&&v!=null&&e(S,d,{configurable:!0,writable:!0,value:v})}}function o(d,v){d instanceof String&&(d+="");var S=0,O=!1,H={next:function(){if(!O&&S<d.length){var Y=S++;return{value:v(Y,d[Y]),done:!1}}return O=!0,{done:!0,value:void 0}}};return H[Symbol.iterator]=function(){return H},H}s("Array.prototype.values",function(d){return d||function(){return o(this,function(v,S){return S})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(d){var v=typeof d;return v=v!="object"?v:d?Array.isArray(d)?"array":v:"null",v=="array"||v=="object"&&typeof d.length=="number"}function c(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function h(d,v,S){return d.call.apply(d.bind,arguments)}function f(d,v,S){if(!d)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var H=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(H,O),d.apply(v,H)}}return function(){return d.apply(v,arguments)}}function p(d,v,S){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function g(d,v){var S=Array.prototype.slice.call(arguments,1);return function(){var O=S.slice();return O.push.apply(O,arguments),d.apply(this,O)}}function b(d,v){function S(){}S.prototype=v.prototype,d.aa=v.prototype,d.prototype=new S,d.prototype.constructor=d,d.Qb=function(O,H,Y){for(var he=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)he[ct-2]=arguments[ct];return v.prototype[H].apply(O,he)}}function R(d){const v=d.length;if(0<v){const S=Array(v);for(let O=0;O<v;O++)S[O]=d[O];return S}return[]}function P(d,v){for(let S=1;S<arguments.length;S++){const O=arguments[S];if(u(O)){const H=d.length||0,Y=O.length||0;d.length=H+Y;for(let he=0;he<Y;he++)d[H+he]=O[he]}else d.push(O)}}class x{constructor(v,S){this.i=v,this.j=S,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function _(d){return/^[\s\xa0]*$/.test(d)}function T(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function L(d){return L[" "](d),d}L[" "]=function(){};var F=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function V(d,v,S){for(const O in d)v.call(S,d[O],O,d)}function D(d,v){for(const S in d)v.call(void 0,d[S],S,d)}function I(d){const v={};for(const S in d)v[S]=d[S];return v}const E="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(d,v){let S,O;for(let H=1;H<arguments.length;H++){O=arguments[H];for(S in O)d[S]=O[S];for(let Y=0;Y<E.length;Y++)S=E[Y],Object.prototype.hasOwnProperty.call(O,S)&&(d[S]=O[S])}}function y(d){var v=1;d=d.split(":");const S=[];for(;0<v&&d.length;)S.push(d.shift()),v--;return d.length&&S.push(d.join(":")),S}function C(d){l.setTimeout(()=>{throw d},0)}function A(){var d=K;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class z{constructor(){this.h=this.g=null}add(v,S){const O=Q.get();O.set(v,S),this.h?this.h.next=O:this.g=O,this.h=O}}var Q=new x(()=>new Z,d=>d.reset());class Z{constructor(){this.next=this.g=this.h=null}set(v,S){this.h=v,this.g=S,this.next=null}reset(){this.next=this.g=this.h=null}}let oe,G=!1,K=new z,re=()=>{const d=l.Promise.resolve(void 0);oe=()=>{d.then(se)}};var se=()=>{for(var d;d=A();){try{d.h.call(d.g)}catch(S){C(S)}var v=Q;v.j(d),100>v.h&&(v.h++,d.next=v.g,v.g=d)}G=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const S=()=>{};l.addEventListener("test",S,v),l.removeEventListener("test",S,v)}catch{}return d}();function X(d,v){if($.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var S=this.type=d.type,O=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget){if(F){e:{try{L(v.nodeName);var H=!0;break e}catch{}H=!1}H||(v=null)}}else S=="mouseover"?v=d.fromElement:S=="mouseout"&&(v=d.toElement);this.relatedTarget=v,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:de[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&X.aa.h.call(this)}}b(X,$);var de={2:"touch",3:"pen",4:"mouse"};X.prototype.h=function(){X.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ye="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function Le(d,v,S,O,H){this.listener=d,this.proxy=null,this.src=v,this.type=S,this.capture=!!O,this.ha=H,this.key=++Fe,this.da=this.fa=!1}function te(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ue(d){this.src=d,this.g={},this.h=0}ue.prototype.add=function(d,v,S,O,H){var Y=d.toString();d=this.g[Y],d||(d=this.g[Y]=[],this.h++);var he=je(d,v,O,H);return-1<he?(v=d[he],S||(v.fa=!1)):(v=new Le(v,this.src,Y,!!O,H),v.fa=S,d.push(v)),v};function xe(d,v){var S=v.type;if(S in d.g){var O=d.g[S],H=Array.prototype.indexOf.call(O,v,void 0),Y;(Y=0<=H)&&Array.prototype.splice.call(O,H,1),Y&&(te(v),d.g[S].length==0&&(delete d.g[S],d.h--))}}function je(d,v,S,O){for(var H=0;H<d.length;++H){var Y=d[H];if(!Y.da&&Y.listener==v&&Y.capture==!!S&&Y.ha==O)return H}return-1}var $e="closure_lm_"+(1e6*Math.random()|0),tt={};function M(d,v,S,O,H){if(Array.isArray(v)){for(var Y=0;Y<v.length;Y++)M(d,v[Y],S,O,H);return null}return S=it(S),d&&d[ye]?d.K(v,S,c(O)?!!O.capture:!1,H):j(d,v,S,!1,O,H)}function j(d,v,S,O,H,Y){if(!v)throw Error("Invalid event type");var he=c(H)?!!H.capture:!!H,ct=Ue(d);if(ct||(d[$e]=ct=new ue(d)),S=ct.add(v,S,O,he,Y),S.proxy)return S;if(O=U(),S.proxy=O,O.src=d,O.listener=S,d.addEventListener)J||(H=he),H===void 0&&(H=!1),d.addEventListener(v.toString(),O,H);else if(d.attachEvent)d.attachEvent(me(v.toString()),O);else if(d.addListener&&d.removeListener)d.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return S}function U(){function d(S){return v.call(d.src,d.listener,S)}const v=Pe;return d}function q(d,v,S,O,H){if(Array.isArray(v))for(var Y=0;Y<v.length;Y++)q(d,v[Y],S,O,H);else O=c(O)?!!O.capture:!!O,S=it(S),d&&d[ye]?(d=d.i,v=String(v).toString(),v in d.g&&(Y=d.g[v],S=je(Y,S,O,H),-1<S&&(te(Y[S]),Array.prototype.splice.call(Y,S,1),Y.length==0&&(delete d.g[v],d.h--)))):d&&(d=Ue(d))&&(v=d.g[v.toString()],d=-1,v&&(d=je(v,S,O,H)),(S=-1<d?v[d]:null)&&ie(S))}function ie(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[ye])xe(v.i,d);else{var S=d.type,O=d.proxy;v.removeEventListener?v.removeEventListener(S,O,d.capture):v.detachEvent?v.detachEvent(me(S),O):v.addListener&&v.removeListener&&v.removeListener(O),(S=Ue(v))?(xe(S,d),S.h==0&&(S.src=null,v[$e]=null)):te(d)}}}function me(d){return d in tt?tt[d]:tt[d]="on"+d}function Pe(d,v){if(d.da)d=!0;else{v=new X(v,this);var S=d.listener,O=d.ha||d.src;d.fa&&ie(d),d=S.call(O,v)}return d}function Ue(d){return d=d[$e],d instanceof ue?d:null}var Xe="__closure_events_fn_"+(1e9*Math.random()>>>0);function it(d){return typeof d=="function"?d:(d[Xe]||(d[Xe]=function(v){return d.handleEvent(v)}),d[Xe])}function Oe(){W.call(this),this.i=new ue(this),this.M=this,this.F=null}b(Oe,W),Oe.prototype[ye]=!0,Oe.prototype.removeEventListener=function(d,v,S,O){q(this,d,v,S,O)};function pt(d,v){var S,O=d.F;if(O)for(S=[];O;O=O.F)S.push(O);if(d=d.M,O=v.type||v,typeof v=="string")v=new $(v,d);else if(v instanceof $)v.target=v.target||d;else{var H=v;v=new $(O,d),w(v,H)}if(H=!0,S)for(var Y=S.length-1;0<=Y;Y--){var he=v.g=S[Y];H=ur(he,O,!0,v)&&H}if(he=v.g=d,H=ur(he,O,!0,v)&&H,H=ur(he,O,!1,v)&&H,S)for(Y=0;Y<S.length;Y++)he=v.g=S[Y],H=ur(he,O,!1,v)&&H}Oe.prototype.N=function(){if(Oe.aa.N.call(this),this.i){var d=this.i,v;for(v in d.g){for(var S=d.g[v],O=0;O<S.length;O++)te(S[O]);delete d.g[v],d.h--}}this.F=null},Oe.prototype.K=function(d,v,S,O){return this.i.add(String(d),v,!1,S,O)},Oe.prototype.L=function(d,v,S,O){return this.i.add(String(d),v,!0,S,O)};function ur(d,v,S,O){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();for(var H=!0,Y=0;Y<v.length;++Y){var he=v[Y];if(he&&!he.da&&he.capture==S){var ct=he.listener,nn=he.ha||he.src;he.fa&&xe(d.i,he),H=ct.call(nn,O)!==!1&&H}}return H&&!O.defaultPrevented}function Wr(d,v,S){if(typeof d=="function")S&&(d=p(d,S));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:l.setTimeout(d,v||0)}function Vi(d){d.g=Wr(()=>{d.g=null,d.i&&(d.i=!1,Vi(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class Dt extends W{constructor(v,S){super(),this.m=v,this.l=S,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Vi(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function cr(d){W.call(this),this.h=d,this.g={}}b(cr,W);var fe=[];function be(d){V(d.g,function(v,S){this.g.hasOwnProperty(S)&&ie(v)},d),d.g={}}cr.prototype.N=function(){cr.aa.N.call(this),be(this)},cr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var we=l.JSON.stringify,Ne=l.JSON.parse,De=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function nt(){}nt.prototype.h=null;function qt(d){return d.h||(d.h=d.i())}function Gn(){}var kr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function dr(){$.call(this,"d")}b(dr,$);function fn(){$.call(this,"c")}b(fn,$);var hr={},Et=null;function fr(){return Et=Et||new Oe}hr.La="serverreachability";function Fi(d){$.call(this,hr.La,d)}b(Fi,$);function Ui(d){const v=fr();pt(v,new Fi(v))}hr.STAT_EVENT="statevent";function Co(d,v){$.call(this,hr.STAT_EVENT,d),this.stat=v}b(Co,$);function Gt(d){const v=fr();pt(v,new Co(v,d))}hr.Ma="timingevent";function il(d,v){$.call(this,hr.Ma,d),this.size=v}b(il,$);function Bs(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},v)}function pn(){this.g=!0}pn.prototype.xa=function(){this.g=!1};function Ao(d,v,S,O,H,Y){d.info(function(){if(d.g)if(Y)for(var he="",ct=Y.split("&"),nn=0;nn<ct.length;nn++){var et=ct[nn].split("=");if(1<et.length){var mn=et[0];et=et[1];var gn=mn.split("_");he=2<=gn.length&&gn[1]=="type"?he+(mn+"="+et+"&"):he+(mn+"=redacted&")}}else he=null;else he=Y;return"XMLHTTP REQ ("+O+") [attempt "+H+"]: "+v+`
`+S+`
`+he})}function xc(d,v,S,O,H,Y,he){d.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+H+"]: "+v+`
`+S+`
`+Y+" "+he})}function ui(d,v,S,O){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ec(d,S)+(O?" "+O:"")})}function sl(d,v){d.info(function(){return"TIMEOUT: "+v})}pn.prototype.info=function(){};function Ec(d,v){if(!d.g)return v;if(!v)return null;try{var S=JSON.parse(v);if(S){for(d=0;d<S.length;d++)if(Array.isArray(S[d])){var O=S[d];if(!(2>O.length)){var H=O[1];if(Array.isArray(H)&&!(1>H.length)){var Y=H[0];if(Y!="noop"&&Y!="stop"&&Y!="close")for(var he=1;he<H.length;he++)H[he]=""}}}}return we(S)}catch{return v}}var Ln={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ol={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Po;function $s(){}b($s,nt),$s.prototype.g=function(){return new XMLHttpRequest},$s.prototype.i=function(){return{}},Po=new $s;function Cr(d,v,S,O){this.j=d,this.i=v,this.l=S,this.R=O||1,this.U=new cr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tc}function Tc(){this.i=null,this.g="",this.h=!1}var Ee={},B={};function ae(d,v,S){d.L=1,d.v=Cc(ci(v)),d.m=S,d.P=!0,_e(d,null)}function _e(d,v){d.F=Date.now(),Pt(d),d.A=ci(d.v);var S=d.A,O=d.R;Array.isArray(O)||(O=[String(O)]),f0(S.i,"t",O),d.C=0,S=d.j.J,d.h=new Tc,d.g=R0(d.j,S?v:null,!d.m),0<d.O&&(d.M=new Dt(p(d.Y,d,d.g),d.O)),v=d.U,S=d.g,O=d.ca;var H="readystatechange";Array.isArray(H)||(H&&(fe[0]=H.toString()),H=fe);for(var Y=0;Y<H.length;Y++){var he=M(S,H[Y],O||v.handleEvent,!1,v.h||v);if(!he)break;v.g[he.key]=he}v=d.H?I(d.H):{},d.m?(d.u||(d.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,v)):(d.u="GET",d.g.ea(d.A,d.u,null,v)),Ui(),Ao(d.i,d.u,d.A,d.l,d.R,d.m)}Cr.prototype.ca=function(d){d=d.target;const v=this.M;v&&di(d)==3?v.j():this.Y(d)},Cr.prototype.Y=function(d){try{if(d==this.g)e:{const gn=di(this.g);var v=this.g.Ba();const Mo=this.g.Z();if(!(3>gn)&&(gn!=3||this.g&&(this.h.h||this.g.oa()||w0(this.g)))){this.J||gn!=4||v==7||(v==8||0>=Mo?Ui(3):Ui(2)),On(this);var S=this.g.Z();this.X=S;t:if(ut(this)){var O=w0(this.g);d="";var H=O.length,Y=di(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Tt(this),Ar(this);var he="";break t}this.h.i=new l.TextDecoder}for(v=0;v<H;v++)this.h.h=!0,d+=this.h.i.decode(O[v],{stream:!(Y&&v==H-1)});O.length=0,this.h.g+=d,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=S==200,xc(this.i,this.u,this.A,this.l,this.R,gn,S),this.o){if(this.T&&!this.K){t:{if(this.g){var ct,nn=this.g;if((ct=nn.g?nn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(ct)){var et=ct;break t}}et=null}if(S=et)ui(this.i,this.l,S,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ro(this,S);else{this.o=!1,this.s=3,Gt(12),Tt(this),Ar(this);break e}}if(this.P){S=!0;let Pr;for(;!this.J&&this.C<he.length;)if(Pr=Kt(this,he),Pr==B){gn==4&&(this.s=4,Gt(14),S=!1),ui(this.i,this.l,null,"[Incomplete Response]");break}else if(Pr==Ee){this.s=4,Gt(15),ui(this.i,this.l,he,"[Invalid Chunk]"),S=!1;break}else ui(this.i,this.l,Pr,null),Ro(this,Pr);if(ut(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),gn!=4||he.length!=0||this.h.h||(this.s=1,Gt(16),S=!1),this.o=this.o&&S,!S)ui(this.i,this.l,he,"[Invalid Chunked Response]"),Tt(this),Ar(this);else if(0<he.length&&!this.W){this.W=!0;var mn=this.j;mn.g==this&&mn.ba&&!mn.M&&(mn.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),bp(mn),mn.M=!0,Gt(11))}}else ui(this.i,this.l,he,null),Ro(this,he);gn==4&&Tt(this),this.o&&!this.J&&(gn==4?k0(this.j,this):(this.o=!1,Pt(this)))}else QP(this.g),S==400&&0<he.indexOf("Unknown SID")?(this.s=3,Gt(12)):(this.s=0,Gt(13)),Tt(this),Ar(this)}}}catch{}finally{}};function ut(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Kt(d,v){var S=d.C,O=v.indexOf(`
`,S);return O==-1?B:(S=Number(v.substring(S,O)),isNaN(S)?Ee:(O+=1,O+S>v.length?B:(v=v.slice(O,O+S),d.C=O+S,v)))}Cr.prototype.cancel=function(){this.J=!0,Tt(this)};function Pt(d){d.S=Date.now()+d.I,tn(d,d.I)}function tn(d,v){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Bs(p(d.ba,d),v)}function On(d){d.B&&(l.clearTimeout(d.B),d.B=null)}Cr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(sl(this.i,this.A),this.L!=2&&(Ui(),Gt(17)),Tt(this),this.s=2,Ar(this)):tn(this,this.S-d)};function Ar(d){d.j.G==0||d.J||k0(d.j,d)}function Tt(d){On(d);var v=d.M;v&&typeof v.ma=="function"&&v.ma(),d.M=null,be(d.U),d.g&&(v=d.g,d.g=null,v.abort(),v.ma())}function Ro(d,v){try{var S=d.j;if(S.G!=0&&(S.g==d||gp(S.h,d))){if(!d.K&&gp(S.h,d)&&S.G==3){try{var O=S.Da.g.parse(v)}catch{O=null}if(Array.isArray(O)&&O.length==3){var H=O;if(H[0]==0){e:if(!S.u){if(S.g)if(S.g.F+3e3<d.F)Mc(S),Nc(S);else break e;wp(S),Gt(18)}}else S.za=H[1],0<S.za-S.T&&37500>H[2]&&S.F&&S.v==0&&!S.C&&(S.C=Bs(p(S.Za,S),6e3));if(1>=i0(S.h)&&S.ca){try{S.ca()}catch{}S.ca=void 0}}else Hs(S,11)}else if((d.K||S.g==d)&&Mc(S),!_(v))for(H=S.Da.g.parse(v),v=0;v<H.length;v++){let et=H[v];if(S.T=et[0],et=et[1],S.G==2)if(et[0]=="c"){S.K=et[1],S.ia=et[2];const mn=et[3];mn!=null&&(S.la=mn,S.j.info("VER="+S.la));const gn=et[4];gn!=null&&(S.Aa=gn,S.j.info("SVER="+S.Aa));const Mo=et[5];Mo!=null&&typeof Mo=="number"&&0<Mo&&(O=1.5*Mo,S.L=O,S.j.info("backChannelRequestTimeoutMs_="+O)),O=S;const Pr=d.g;if(Pr){const Oc=Pr.g?Pr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oc){var Y=O.h;Y.g||Oc.indexOf("spdy")==-1&&Oc.indexOf("quic")==-1&&Oc.indexOf("h2")==-1||(Y.j=Y.l,Y.g=new Set,Y.h&&(vp(Y,Y.h),Y.h=null))}if(O.D){const xp=Pr.g?Pr.g.getResponseHeader("X-HTTP-Session-Id"):null;xp&&(O.ya=xp,mt(O.I,O.D,xp))}}S.G=3,S.l&&S.l.ua(),S.ba&&(S.R=Date.now()-d.F,S.j.info("Handshake RTT: "+S.R+"ms")),O=S;var he=d;if(O.qa=P0(O,O.J?O.ia:null,O.W),he.K){s0(O.h,he);var ct=he,nn=O.L;nn&&(ct.I=nn),ct.B&&(On(ct),Pt(ct)),O.g=he}else S0(O);0<S.i.length&&Dc(S)}else et[0]!="stop"&&et[0]!="close"||Hs(S,7);else S.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?Hs(S,7):_p(S):et[0]!="noop"&&S.l&&S.l.ta(et),S.v=0)}}Ui(4)}catch{}}var Sc=class{constructor(d,v){this.g=d,this.map=v}};function n0(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function r0(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function i0(d){return d.h?1:d.g?d.g.size:0}function gp(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function vp(d,v){d.g?d.g.add(v):d.h=v}function s0(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}n0.prototype.cancel=function(){if(this.i=o0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function o0(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const S of d.g.values())v=v.concat(S.D);return v}return R(d.i)}function OP(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var v=[],S=d.length,O=0;O<S;O++)v.push(d[O]);return v}v=[],S=0;for(O in d)v[S++]=d[O];return v}function jP(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var v=[];d=d.length;for(var S=0;S<d;S++)v.push(S);return v}v=[],S=0;for(const O in d)v[S++]=O;return v}}}function a0(d,v){if(d.forEach&&typeof d.forEach=="function")d.forEach(v,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,v,void 0);else for(var S=jP(d),O=OP(d),H=O.length,Y=0;Y<H;Y++)v.call(void 0,O[Y],S&&S[Y],d)}var l0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function VP(d,v){if(d){d=d.split("&");for(var S=0;S<d.length;S++){var O=d[S].indexOf("="),H=null;if(0<=O){var Y=d[S].substring(0,O);H=d[S].substring(O+1)}else Y=d[S];v(Y,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function zs(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof zs){this.h=d.h,Ic(this,d.j),this.o=d.o,this.g=d.g,kc(this,d.s),this.l=d.l;var v=d.i,S=new ul;S.i=v.i,v.g&&(S.g=new Map(v.g),S.h=v.h),u0(this,S),this.m=d.m}else d&&(v=String(d).match(l0))?(this.h=!1,Ic(this,v[1]||"",!0),this.o=al(v[2]||""),this.g=al(v[3]||"",!0),kc(this,v[4]),this.l=al(v[5]||"",!0),u0(this,v[6]||"",!0),this.m=al(v[7]||"")):(this.h=!1,this.i=new ul(null,this.h))}zs.prototype.toString=function(){var d=[],v=this.j;v&&d.push(ll(v,c0,!0),":");var S=this.g;return(S||v=="file")&&(d.push("//"),(v=this.o)&&d.push(ll(v,c0,!0),"@"),d.push(encodeURIComponent(String(S)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),S=this.s,S!=null&&d.push(":",String(S))),(S=this.l)&&(this.g&&S.charAt(0)!="/"&&d.push("/"),d.push(ll(S,S.charAt(0)=="/"?BP:UP,!0))),(S=this.i.toString())&&d.push("?",S),(S=this.m)&&d.push("#",ll(S,zP)),d.join("")};function ci(d){return new zs(d)}function Ic(d,v,S){d.j=S?al(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function kc(d,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);d.s=v}else d.s=null}function u0(d,v,S){v instanceof ul?(d.i=v,HP(d.i,d.h)):(S||(v=ll(v,$P)),d.i=new ul(v,d.h))}function mt(d,v,S){d.i.set(v,S)}function Cc(d){return mt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function al(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ll(d,v,S){return typeof d=="string"?(d=encodeURI(d).replace(v,FP),S&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function FP(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var c0=/[#\/\?@]/g,UP=/[#\?:]/g,BP=/[#\?]/g,$P=/[#\?@]/g,zP=/#/g;function ul(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Bi(d){d.g||(d.g=new Map,d.h=0,d.i&&VP(d.i,function(v,S){d.add(decodeURIComponent(v.replace(/\+/g," ")),S)}))}t=ul.prototype,t.add=function(d,v){Bi(this),this.i=null,d=No(this,d);var S=this.g.get(d);return S||this.g.set(d,S=[]),S.push(v),this.h+=1,this};function d0(d,v){Bi(d),v=No(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function h0(d,v){return Bi(d),v=No(d,v),d.g.has(v)}t.forEach=function(d,v){Bi(this),this.g.forEach(function(S,O){S.forEach(function(H){d.call(v,H,O,this)},this)},this)},t.na=function(){Bi(this);const d=Array.from(this.g.values()),v=Array.from(this.g.keys()),S=[];for(let O=0;O<v.length;O++){const H=d[O];for(let Y=0;Y<H.length;Y++)S.push(v[O])}return S},t.V=function(d){Bi(this);let v=[];if(typeof d=="string")h0(this,d)&&(v=v.concat(this.g.get(No(this,d))));else{d=Array.from(this.g.values());for(let S=0;S<d.length;S++)v=v.concat(d[S])}return v},t.set=function(d,v){return Bi(this),this.i=null,d=No(this,d),h0(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},t.get=function(d,v){return d?(d=this.V(d),0<d.length?String(d[0]):v):v};function f0(d,v,S){d0(d,v),0<S.length&&(d.i=null,d.g.set(No(d,v),R(S)),d.h+=S.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(var S=0;S<v.length;S++){var O=v[S];const Y=encodeURIComponent(String(O)),he=this.V(O);for(O=0;O<he.length;O++){var H=Y;he[O]!==""&&(H+="="+encodeURIComponent(String(he[O]))),d.push(H)}}return this.i=d.join("&")};function No(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function HP(d,v){v&&!d.j&&(Bi(d),d.i=null,d.g.forEach(function(S,O){var H=O.toLowerCase();O!=H&&(d0(this,O),f0(this,H,S))},d)),d.j=v}function WP(d,v){const S=new pn;if(l.Image){const O=new Image;O.onload=g($i,S,"TestLoadImage: loaded",!0,v,O),O.onerror=g($i,S,"TestLoadImage: error",!1,v,O),O.onabort=g($i,S,"TestLoadImage: abort",!1,v,O),O.ontimeout=g($i,S,"TestLoadImage: timeout",!1,v,O),l.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=d}else v(!1)}function qP(d,v){const S=new pn,O=new AbortController,H=setTimeout(()=>{O.abort(),$i(S,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:O.signal}).then(Y=>{clearTimeout(H),Y.ok?$i(S,"TestPingServer: ok",!0,v):$i(S,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(H),$i(S,"TestPingServer: error",!1,v)})}function $i(d,v,S,O,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),O(S)}catch{}}function GP(){this.g=new De}function KP(d,v,S){const O=S||"";try{a0(d,function(H,Y){let he=H;c(H)&&(he=we(H)),v.push(O+Y+"="+encodeURIComponent(he))})}catch(H){throw v.push(O+"type="+encodeURIComponent("_badmap")),H}}function Ac(d){this.l=d.Ub||null,this.j=d.eb||!1}b(Ac,nt),Ac.prototype.g=function(){return new Pc(this.l,this.j)},Ac.prototype.i=function(d){return function(){return d}}({});function Pc(d,v){Oe.call(this),this.D=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Pc,Oe),t=Pc.prototype,t.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=v,this.readyState=1,dl(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(v.body=d),(this.D||l).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,cl(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,dl(this)),this.g&&(this.readyState=3,dl(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;p0(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function p0(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?cl(this):dl(this),this.readyState==3&&p0(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,cl(this))},t.Qa=function(d){this.g&&(this.response=d,cl(this))},t.ga=function(){this.g&&cl(this)};function cl(d){d.readyState=4,d.l=null,d.j=null,d.v=null,dl(d)}t.setRequestHeader=function(d,v){this.u.append(d,v)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var S=v.next();!S.done;)S=S.value,d.push(S[0]+": "+S[1]),S=v.next();return d.join(`\r
`)};function dl(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Pc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function m0(d){let v="";return V(d,function(S,O){v+=O,v+=":",v+=S,v+=`\r
`}),v}function yp(d,v,S){e:{for(O in S){var O=!1;break e}O=!0}O||(S=m0(S),typeof d=="string"?S!=null&&encodeURIComponent(String(S)):mt(d,v,S))}function Rt(d){Oe.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(Rt,Oe);var YP=/^https?$/i,XP=["POST","PUT"];t=Rt.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,v,S,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Po.g(),this.v=this.o?qt(this.o):qt(Po),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(Y){g0(this,Y);return}if(d=S||"",S=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var H in O)S.set(H,O[H]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const Y of O.keys())S.set(Y,O.get(Y));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(S.keys()).find(Y=>Y.toLowerCase()=="content-type"),H=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(XP,v,void 0))||O||H||S.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Y,he]of S)this.g.setRequestHeader(Y,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_0(this),this.u=!0,this.g.send(d),this.u=!1}catch(Y){g0(this,Y)}};function g0(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.m=5,v0(d),Rc(d)}function v0(d){d.A||(d.A=!0,pt(d,"complete"),pt(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,pt(this,"complete"),pt(this,"abort"),Rc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rc(this,!0)),Rt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?y0(this):this.bb())},t.bb=function(){y0(this)};function y0(d){if(d.h&&typeof a<"u"&&(!d.v[1]||di(d)!=4||d.Z()!=2)){if(d.u&&di(d)==4)Wr(d.Ea,0,d);else if(pt(d,"readystatechange"),di(d)==4){d.h=!1;try{const he=d.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var S;if(!(S=v)){var O;if(O=he===0){var H=String(d.D).match(l0)[1]||null;!H&&l.self&&l.self.location&&(H=l.self.location.protocol.slice(0,-1)),O=!YP.test(H?H.toLowerCase():"")}S=O}if(S)pt(d,"complete"),pt(d,"success");else{d.m=6;try{var Y=2<di(d)?d.g.statusText:""}catch{Y=""}d.l=Y+" ["+d.Z()+"]",v0(d)}}finally{Rc(d)}}}}function Rc(d,v){if(d.g){_0(d);const S=d.g,O=d.v[0]?()=>{}:null;d.g=null,d.v=null,v||pt(d,"ready");try{S.onreadystatechange=O}catch{}}}function _0(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function di(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<di(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),Ne(v)}};function w0(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function QP(d){const v={};d=(d.g&&2<=di(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<d.length;O++){if(_(d[O]))continue;var S=y(d[O]);const H=S[0];if(S=S[1],typeof S!="string")continue;S=S.trim();const Y=v[H]||[];v[H]=Y,Y.push(S)}D(v,function(O){return O.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hl(d,v,S){return S&&S.internalChannelParams&&S.internalChannelParams[d]||v}function b0(d){this.Aa=0,this.i=[],this.j=new pn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hl("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hl("baseRetryDelayMs",5e3,d),this.cb=hl("retryDelaySeedMs",1e4,d),this.Wa=hl("forwardChannelMaxRetries",2,d),this.wa=hl("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new n0(d&&d.concurrentRequestLimit),this.Da=new GP,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=b0.prototype,t.la=8,t.G=1,t.connect=function(d,v,S,O){Gt(0),this.W=d,this.H=v||{},S&&O!==void 0&&(this.H.OSID=S,this.H.OAID=O),this.F=this.X,this.I=P0(this,null,this.W),Dc(this)};function _p(d){if(x0(d),d.G==3){var v=d.U++,S=ci(d.I);if(mt(S,"SID",d.K),mt(S,"RID",v),mt(S,"TYPE","terminate"),fl(d,S),v=new Cr(d,d.j,v),v.L=2,v.v=Cc(ci(S)),S=!1,l.navigator&&l.navigator.sendBeacon)try{S=l.navigator.sendBeacon(v.v.toString(),"")}catch{}!S&&l.Image&&(new Image().src=v.v,S=!0),S||(v.g=R0(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Pt(v)}A0(d)}function Nc(d){d.g&&(bp(d),d.g.cancel(),d.g=null)}function x0(d){Nc(d),d.u&&(l.clearTimeout(d.u),d.u=null),Mc(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function Dc(d){if(!r0(d.h)&&!d.s){d.s=!0;var v=d.Ga;oe||re(),G||(oe(),G=!0),K.add(v,d),d.B=0}}function JP(d,v){return i0(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=v.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Bs(p(d.Ga,d,v),C0(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const H=new Cr(this,this.j,d);let Y=this.o;if(this.S&&(Y?(Y=I(Y),w(Y,this.S)):Y=this.S),this.m!==null||this.O||(H.H=Y,Y=null),this.P)e:{for(var v=0,S=0;S<this.i.length;S++){t:{var O=this.i[S];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(v+=O,4096<v){v=S;break e}if(v===4096||S===this.i.length-1){v=S+1;break e}}v=1e3}else v=1e3;v=T0(this,H,v),S=ci(this.I),mt(S,"RID",d),mt(S,"CVER",22),this.D&&mt(S,"X-HTTP-Session-Id",this.D),fl(this,S),Y&&(this.O?v="headers="+encodeURIComponent(String(m0(Y)))+"&"+v:this.m&&yp(S,this.m,Y)),vp(this.h,H),this.Ua&&mt(S,"TYPE","init"),this.P?(mt(S,"$req",v),mt(S,"SID","null"),H.T=!0,ae(H,S,null)):ae(H,S,v),this.G=2}}else this.G==3&&(d?E0(this,d):this.i.length==0||r0(this.h)||E0(this))};function E0(d,v){var S;v?S=v.l:S=d.U++;const O=ci(d.I);mt(O,"SID",d.K),mt(O,"RID",S),mt(O,"AID",d.T),fl(d,O),d.m&&d.o&&yp(O,d.m,d.o),S=new Cr(d,d.j,S,d.B+1),d.m===null&&(S.H=d.o),v&&(d.i=v.D.concat(d.i)),v=T0(d,S,1e3),S.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),vp(d.h,S),ae(S,O,v)}function fl(d,v){d.H&&V(d.H,function(S,O){mt(v,O,S)}),d.l&&a0({},function(S,O){mt(v,O,S)})}function T0(d,v,S){S=Math.min(d.i.length,S);var O=d.l?p(d.l.Na,d.l,d):null;e:{var H=d.i;let Y=-1;for(;;){const he=["count="+S];Y==-1?0<S?(Y=H[0].g,he.push("ofs="+Y)):Y=0:he.push("ofs="+Y);let ct=!0;for(let nn=0;nn<S;nn++){let et=H[nn].g;const mn=H[nn].map;if(et-=Y,0>et)Y=Math.max(0,H[nn].g-100),ct=!1;else try{KP(mn,he,"req"+et+"_")}catch{O&&O(mn)}}if(ct){O=he.join("&");break e}}}return d=d.i.splice(0,S),v.D=d,O}function S0(d){if(!d.g&&!d.u){d.Y=1;var v=d.Fa;oe||re(),G||(oe(),G=!0),K.add(v,d),d.v=0}}function wp(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Bs(p(d.Fa,d),C0(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,I0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Bs(p(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Gt(10),Nc(this),I0(this))};function bp(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function I0(d){d.g=new Cr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var v=ci(d.qa);mt(v,"RID","rpc"),mt(v,"SID",d.K),mt(v,"AID",d.T),mt(v,"CI",d.F?"0":"1"),!d.F&&d.ja&&mt(v,"TO",d.ja),mt(v,"TYPE","xmlhttp"),fl(d,v),d.m&&d.o&&yp(v,d.m,d.o),d.L&&(d.g.I=d.L);var S=d.g;d=d.ia,S.L=1,S.v=Cc(ci(v)),S.m=null,S.P=!0,_e(S,d)}t.Za=function(){this.C!=null&&(this.C=null,Nc(this),wp(this),Gt(19))};function Mc(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function k0(d,v){var S=null;if(d.g==v){Mc(d),bp(d),d.g=null;var O=2}else if(gp(d.h,v))S=v.D,s0(d.h,v),O=1;else return;if(d.G!=0){if(v.o)if(O==1){S=v.m?v.m.length:0,v=Date.now()-v.F;var H=d.B;O=fr(),pt(O,new il(O,S)),Dc(d)}else S0(d);else if(H=v.s,H==3||H==0&&0<v.X||!(O==1&&JP(d,v)||O==2&&wp(d)))switch(S&&0<S.length&&(v=d.h,v.i=v.i.concat(S)),H){case 1:Hs(d,5);break;case 4:Hs(d,10);break;case 3:Hs(d,6);break;default:Hs(d,2)}}}function C0(d,v){let S=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(S*=2),S*v}function Hs(d,v){if(d.j.info("Error code "+v),v==2){var S=p(d.fb,d),O=d.Xa;const H=!O;O=new zs(O||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ic(O,"https"),Cc(O),H?WP(O.toString(),S):qP(O.toString(),S)}else Gt(2);d.G=0,d.l&&d.l.sa(v),A0(d),x0(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Gt(2)):(this.j.info("Failed to ping google.com"),Gt(1))};function A0(d){if(d.G=0,d.ka=[],d.l){const v=o0(d.h);(v.length!=0||d.i.length!=0)&&(P(d.ka,v),P(d.ka,d.i),d.h.i.length=0,R(d.i),d.i.length=0),d.l.ra()}}function P0(d,v,S){var O=S instanceof zs?ci(S):new zs(S);if(O.g!="")v&&(O.g=v+"."+O.g),kc(O,O.s);else{var H=l.location;O=H.protocol,v=v?v+"."+H.hostname:H.hostname,H=+H.port;var Y=new zs(null);O&&Ic(Y,O),v&&(Y.g=v),H&&kc(Y,H),S&&(Y.l=S),O=Y}return S=d.D,v=d.ya,S&&v&&mt(O,S,v),mt(O,"VER",d.la),fl(d,O),O}function R0(d,v,S){if(v&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Ca&&!d.pa?new Rt(new Ac({eb:S})):new Rt(d.pa),v.Ha(d.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function N0(){}t=N0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Lc(){}Lc.prototype.g=function(d,v){return new Kn(d,v)};function Kn(d,v){Oe.call(this),this.g=new b0(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(d?d["X-WebChannel-Client-Profile"]=v.va:d={"X-WebChannel-Client-Profile":v.va}),this.g.S=d,(d=v&&v.Sb)&&!_(d)&&(this.g.m=d),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!_(v)&&(this.g.D=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Do(this)}b(Kn,Oe),Kn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Kn.prototype.close=function(){_p(this.g)},Kn.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var S={};S.__data__=d,d=S}else this.u&&(S={},S.__data__=we(d),d=S);v.i.push(new Sc(v.Ya++,d)),v.G==3&&Dc(v)},Kn.prototype.N=function(){this.g.l=null,delete this.j,_p(this.g),delete this.g,Kn.aa.N.call(this)};function D0(d){dr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const S in v){d=S;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}b(D0,dr);function M0(){fn.call(this),this.status=1}b(M0,fn);function Do(d){this.g=d}b(Do,N0),Do.prototype.ua=function(){pt(this.g,"a")},Do.prototype.ta=function(d){pt(this.g,new D0(d))},Do.prototype.sa=function(d){pt(this.g,new M0)},Do.prototype.ra=function(){pt(this.g,"b")},Lc.prototype.createWebChannel=Lc.prototype.g,Kn.prototype.send=Kn.prototype.o,Kn.prototype.open=Kn.prototype.m,Kn.prototype.close=Kn.prototype.close,FI=function(){return new Lc},VI=function(){return fr()},jI=hr,$g={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ln.NO_ERROR=0,Ln.TIMEOUT=8,Ln.HTTP_ERROR=6,Ld=Ln,ol.COMPLETE="complete",OI=ol,Gn.EventType=kr,kr.OPEN="a",kr.CLOSE="b",kr.ERROR="c",kr.MESSAGE="d",Oe.prototype.listen=Oe.prototype.K,Fl=Gn,Rt.prototype.listenOnce=Rt.prototype.L,Rt.prototype.getLastError=Rt.prototype.Ka,Rt.prototype.getLastErrorCode=Rt.prototype.Ba,Rt.prototype.getStatus=Rt.prototype.Z,Rt.prototype.getResponseJson=Rt.prototype.Oa,Rt.prototype.getResponseText=Rt.prototype.oa,Rt.prototype.send=Rt.prototype.ea,Rt.prototype.setWithCredentials=Rt.prototype.Ha,LI=Rt}).apply(typeof rd<"u"?rd:typeof self<"u"?self:typeof window<"u"?window:{});const Cb="@firebase/firestore",Ab="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}wn.UNAUTHENTICATED=new wn(null),wn.GOOGLE_CREDENTIALS=new wn("google-credentials-uid"),wn.FIRST_PARTY=new wn("first-party-uid"),wn.MOCK_USER=new wn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ya="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po=new Ry("@firebase/firestore");function Bo(){return po.logLevel}function ge(t,...e){if(po.logLevel<=We.DEBUG){const r=e.map(zy);po.debug(`Firestore (${Ya}): ${t}`,...r)}}function Ai(t,...e){if(po.logLevel<=We.ERROR){const r=e.map(zy);po.error(`Firestore (${Ya}): ${t}`,...r)}}function Ia(t,...e){if(po.logLevel<=We.WARN){const r=e.map(zy);po.warn(`Firestore (${Ya}): ${t}`,...r)}}function zy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(t="Unexpected state"){const e=`FIRESTORE (${Ya}) INTERNAL ASSERTION FAILED: `+t;throw Ai(e),new Error(e)}function rt(t,e){t||Ae()}function Me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Te extends Mi{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Zj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(wn.UNAUTHENTICATED))}shutdown(){}}class eV{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class tV{constructor(e){this.t=e,this.currentUser=wn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){rt(this.o===void 0);let i=this.i;const s=u=>this.i!==i?(i=this.i,r(u)):Promise.resolve();let o=new xi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new xi,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new xi)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(rt(typeof i.accessToken=="string"),new UI(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return rt(e===null||typeof e=="string"),new wn(e)}}class nV{constructor(e,r,i){this.l=e,this.h=r,this.P=i,this.type="FirstParty",this.user=wn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class rV{constructor(e,r,i){this.l=e,this.h=r,this.P=i}getToken(){return Promise.resolve(new nV(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(wn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Pb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class iV{constructor(e,r){this.A=r,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,jr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,r){rt(this.o===void 0);const i=o=>{o.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,ge("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Pb(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(rt(typeof r.token=="string"),this.R=r.token,new Pb(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let i=0;i<t;i++)r[i]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=sV(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<r&&(i+=e.charAt(s[o]%62))}return i}}function Ge(t,e){return t<e?-1:t>e?1:0}function ka(t,e,r){return t.length===e.length&&t.every((i,s)=>r(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb=-62135596800,Nb=1e6;class Ht{static now(){return Ht.fromMillis(Date.now())}static fromDate(e){return Ht.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),i=Math.floor((e-1e3*r)*Nb);return new Ht(r,i)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Te(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Te(ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<Rb)throw new Te(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Te(ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nb}_compareTo(e){return this.seconds===e.seconds?Ge(this.nanoseconds,e.nanoseconds):Ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Rb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new Ht(0,0))}static max(){return new Re(new Ht(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db="__name__";class Kr{constructor(e,r,i){r===void 0?r=0:r>e.length&&Ae(),i===void 0?i=e.length-r:i>e.length-r&&Ae(),this.segments=e,this.offset=r,this.len=i}get length(){return this.len}isEqual(e){return Kr.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Kr?e.forEach(i=>{r.push(i)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,i=this.limit();r<i;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const i=Math.min(e.length,r.length);for(let s=0;s<i;s++){const o=Kr.compareSegments(e.get(s),r.get(s));if(o!==0)return o}return Math.sign(e.length-r.length)}static compareSegments(e,r){const i=Kr.isNumericId(e),s=Kr.isNumericId(r);return i&&!s?-1:!i&&s?1:i&&s?Kr.extractNumericId(e).compare(Kr.extractNumericId(r)):e<r?-1:e>r?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ys.fromString(e.substring(4,e.length-2))}}class bt extends Kr{construct(e,r,i){return new bt(e,r,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const i of e){if(i.indexOf("//")>=0)throw new Te(ne.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);r.push(...i.split("/").filter(s=>s.length>0))}return new bt(r)}static emptyPath(){return new bt([])}}const oV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class an extends Kr{construct(e,r,i){return new an(e,r,i)}static isValidIdentifier(e){return oV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),an.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Db}static keyField(){return new an([Db])}static fromServerFormat(e){const r=[];let i="",s=0;const o=()=>{if(i.length===0)throw new Te(ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(i),i=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Te(ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Te(ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(o(),s++)}if(o(),a)throw new Te(ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new an(r)}static emptyPath(){return new an([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(bt.fromString(e))}static fromName(e){return new Ie(bt.fromString(e).popFirst(5))}static empty(){return new Ie(bt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&bt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return bt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new bt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au=-1;function aV(t,e){const r=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Re.fromTimestamp(i===1e9?new Ht(r+1,0):new Ht(r,i));return new Is(s,Ie.empty(),e)}function lV(t){return new Is(t.readTime,t.key,Au)}class Is{constructor(e,r,i){this.readTime=e,this.documentKey=r,this.largestBatchId=i}static min(){return new Is(Re.min(),Ie.empty(),Au)}static max(){return new Is(Re.max(),Ie.empty(),Au)}}function uV(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Ie.comparator(t.documentKey,e.documentKey),r!==0?r:Ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(t){if(t.code!==ne.FAILED_PRECONDITION||t.message!==cV)throw t;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new ee((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(r,o).next(i,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof ee?r:ee.resolve(r)}catch(r){return ee.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):ee.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):ee.reject(r)}static resolve(e){return new ee((r,i)=>{r(e)})}static reject(e){return new ee((r,i)=>{i(e)})}static waitFor(e){return new ee((r,i)=>{let s=0,o=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++o,a&&o===s&&r()},u=>i(u))}),a=!0,o===s&&r()})}static or(e){let r=ee.resolve(!1);for(const i of e)r=r.next(s=>s?ee.resolve(s):i());return r}static forEach(e,r){const i=[];return e.forEach((s,o)=>{i.push(r.call(this,s,o))}),this.waitFor(i)}static mapArray(e,r){return new ee((i,s)=>{const o=e.length,a=new Array(o);let l=0;for(let u=0;u<o;u++){const c=u;r(e[c]).next(h=>{a[c]=h,++l,l===o&&i(a)},h=>s(h))}})}static doWhile(e,r){return new ee((i,s)=>{const o=()=>{e()===!0?r().next(()=>{o()},s):i()};o()})}}function hV(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Qa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tf{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Tf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy=-1;function Sf(t){return t==null}function Ih(t){return t===0&&1/t==-1/0}function fV(t){return typeof t=="number"&&Number.isInteger(t)&&!Ih(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="";function pV(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=Mb(e)),e=mV(t.get(r),e);return Mb(e)}function mV(t,e){let r=e;const i=t.length;for(let s=0;s<i;s++){const o=t.charAt(s);switch(o){case"\0":r+="";break;case $I:r+="";break;default:r+=o}}return r}function Mb(t){return t+$I+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lb(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Vs(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function zI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,r){this.comparator=e,this.root=r||on.EMPTY}insert(e,r){return new At(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,on.BLACK,null,null))}remove(e){return new At(this.comparator,this.root.remove(e,this.comparator).copy(null,null,on.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}indexOf(e){let r=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return r+i.left.size;s<0?i=i.left:(r+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,i)=>(e(r,i),!1))}toString(){const e=[];return this.inorderTraversal((r,i)=>(e.push(`${r}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new id(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new id(this.root,e,this.comparator,!1)}getReverseIterator(){return new id(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new id(this.root,e,this.comparator,!0)}}class id{constructor(e,r,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=r?i(e.key,r):1,r&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class on{constructor(e,r,i,s,o){this.key=e,this.value=r,this.color=i??on.RED,this.left=s??on.EMPTY,this.right=o??on.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,i,s,o){return new on(e??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,r,i),null):o===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return on.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let i,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return on.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,on.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,on.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ae();const e=this.left.check();if(e!==this.right.check())throw Ae();return e+(this.isRed()?0:1)}}on.EMPTY=null,on.RED=!0,on.BLACK=!1;on.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae()}get value(){throw Ae()}get color(){throw Ae()}get left(){throw Ae()}get right(){throw Ae()}copy(e,r,i,s,o){return this}insert(e,r,i){return new on(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.comparator=e,this.data=new At(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,i)=>(e(r),!1))}forEachInRange(e,r){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let i;for(i=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Ob(this.data.getIterator())}getIteratorFrom(e){return new Ob(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(i=>{r=r.add(i)}),r}isEqual(e){if(!(e instanceof Wt)||this.size!==e.size)return!1;const r=this.data.getIterator(),i=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Wt(this.comparator);return r.data=e,r}}class Ob{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.fields=e,e.sort(an.comparator)}static empty(){return new Qn([])}unionWith(e){let r=new Wt(an.comparator);for(const i of this.fields)r=r.add(i);for(const i of e)r=r.add(i);return new Qn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return ka(this.fields,e.fields,(r,i)=>r.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new HI("Invalid base64 string: "+o):o}}(e);return new hn(r)}static fromUint8Array(e){const r=function(s){let o="";for(let a=0;a<s.length;++a)o+=String.fromCharCode(s[a]);return o}(e);return new hn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const i=new Uint8Array(r.length);for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hn.EMPTY_BYTE_STRING=new hn("");const gV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ks(t){if(rt(!!t),typeof t=="string"){let e=0;const r=gV.exec(t);if(rt(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Mt(t.seconds),nanos:Mt(t.nanos)}}function Mt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Cs(t){return typeof t=="string"?hn.fromBase64String(t):hn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI="server_timestamp",qI="__type__",GI="__previous_value__",KI="__local_write_time__";function Wy(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[qI])===null||r===void 0?void 0:r.stringValue)===WI}function If(t){const e=t.mapValue.fields[GI];return Wy(e)?If(e):e}function Pu(t){const e=ks(t.mapValue.fields[KI].timestampValue);return new Ht(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e,r,i,s,o,a,l,u,c){this.databaseId=e,this.appId=r,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}const kh="(default)";class Ru{constructor(e,r){this.projectId=e,this.database=r||kh}static empty(){return new Ru("","")}get isDefaultDatabase(){return this.database===kh}isEqual(e){return e instanceof Ru&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YI="__type__",yV="__max__",sd={mapValue:{}},XI="__vector__",Ch="value";function As(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wy(t)?4:wV(t)?9007199254740991:_V(t)?10:11:Ae()}function si(t,e){if(t===e)return!0;const r=As(t);if(r!==As(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pu(t).isEqual(Pu(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const a=ks(s.timestampValue),l=ks(o.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Cs(s.bytesValue).isEqual(Cs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return Mt(s.geoPointValue.latitude)===Mt(o.geoPointValue.latitude)&&Mt(s.geoPointValue.longitude)===Mt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Mt(s.integerValue)===Mt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const a=Mt(s.doubleValue),l=Mt(o.doubleValue);return a===l?Ih(a)===Ih(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return ka(t.arrayValue.values||[],e.arrayValue.values||[],si);case 10:case 11:return function(s,o){const a=s.mapValue.fields||{},l=o.mapValue.fields||{};if(Lb(a)!==Lb(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!si(a[u],l[u])))return!1;return!0}(t,e);default:return Ae()}}function Nu(t,e){return(t.values||[]).find(r=>si(r,e))!==void 0}function Ca(t,e){if(t===e)return 0;const r=As(t),i=As(e);if(r!==i)return Ge(r,i);switch(r){case 0:case 9007199254740991:return 0;case 1:return Ge(t.booleanValue,e.booleanValue);case 2:return function(o,a){const l=Mt(o.integerValue||o.doubleValue),u=Mt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return jb(t.timestampValue,e.timestampValue);case 4:return jb(Pu(t),Pu(e));case 5:return Ge(t.stringValue,e.stringValue);case 6:return function(o,a){const l=Cs(o),u=Cs(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const l=o.split("/"),u=a.split("/");for(let c=0;c<l.length&&c<u.length;c++){const h=Ge(l[c],u[c]);if(h!==0)return h}return Ge(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const l=Ge(Mt(o.latitude),Mt(a.latitude));return l!==0?l:Ge(Mt(o.longitude),Mt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Vb(t.arrayValue,e.arrayValue);case 10:return function(o,a){var l,u,c,h;const f=o.fields||{},p=a.fields||{},g=(l=f[Ch])===null||l===void 0?void 0:l.arrayValue,b=(u=p[Ch])===null||u===void 0?void 0:u.arrayValue,R=Ge(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0);return R!==0?R:Vb(g,b)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===sd.mapValue&&a===sd.mapValue)return 0;if(o===sd.mapValue)return 1;if(a===sd.mapValue)return-1;const l=o.fields||{},u=Object.keys(l),c=a.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const p=Ge(u[f],h[f]);if(p!==0)return p;const g=Ca(l[u[f]],c[h[f]]);if(g!==0)return g}return Ge(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Ae()}}function jb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ge(t,e);const r=ks(t),i=ks(e),s=Ge(r.seconds,i.seconds);return s!==0?s:Ge(r.nanos,i.nanos)}function Vb(t,e){const r=t.values||[],i=e.values||[];for(let s=0;s<r.length&&s<i.length;++s){const o=Ca(r[s],i[s]);if(o)return o}return Ge(r.length,i.length)}function Aa(t){return zg(t)}function zg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=ks(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Cs(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Ie.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=zg(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${zg(r.fields[a])}`;return s+"}"}(t.mapValue):Ae()}function Od(t){switch(As(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=If(t);return e?16+Od(e):16;case 5:return 2*t.stringValue.length;case 6:return Cs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+Od(o),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return Vs(i.fields,(o,a)=>{s+=o.length+Od(a)}),s}(t.mapValue);default:throw Ae()}}function Hg(t){return!!t&&"integerValue"in t}function qy(t){return!!t&&"arrayValue"in t}function Fb(t){return!!t&&"nullValue"in t}function Ub(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jd(t){return!!t&&"mapValue"in t}function _V(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[YI])===null||r===void 0?void 0:r.stringValue)===XI}function tu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Vs(t.mapValue.fields,(r,i)=>e.mapValue.fields[r]=tu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=tu(t.arrayValue.values[r]);return e}return Object.assign({},t)}function wV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===yV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let i=0;i<e.length-1;++i)if(r=(r.mapValue.fields||{})[e.get(i)],!jd(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=tu(r)}setAll(e){let r=an.emptyPath(),i={},s=[];e.forEach((a,l)=>{if(!r.isImmediateParentOf(l)){const u=this.getFieldsMap(r);this.applyChanges(u,i,s),i={},s=[],r=l.popLast()}a?i[l.lastSegment()]=tu(a):s.push(l.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,i,s)}delete(e){const r=this.field(e.popLast());jd(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return si(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=r.mapValue.fields[e.get(i)];jd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(i)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,i){Vs(r,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new Un(tu(this.value))}}function QI(t){const e=[];return Vs(t.fields,(r,i)=>{const s=new an([r]);if(jd(i)){const o=QI(i.mapValue).fields;if(o.length===0)e.push(s);else for(const a of o)e.push(s.child(a))}else e.push(s)}),new Qn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,r,i,s,o,a,l){this.key=e,this.documentType=r,this.version=i,this.readTime=s,this.createTime=o,this.data=a,this.documentState=l}static newInvalidDocument(e){return new xn(e,0,Re.min(),Re.min(),Re.min(),Un.empty(),0)}static newFoundDocument(e,r,i,s){return new xn(e,1,r,Re.min(),i,s,0)}static newNoDocument(e,r){return new xn(e,2,r,Re.min(),Re.min(),Un.empty(),0)}static newUnknownDocument(e,r){return new xn(e,3,r,Re.min(),Re.min(),Un.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,r){this.position=e,this.inclusive=r}}function Bb(t,e,r){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],a=t.position[s];if(o.field.isKeyField()?i=Ie.comparator(Ie.fromName(a.referenceValue),r.key):i=Ca(a,r.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function $b(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!si(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ph{constructor(e,r="asc"){this.field=e,this.dir=r}}function bV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JI{}class $t extends JI{constructor(e,r,i){super(),this.field=e,this.op=r,this.value=i}static create(e,r,i){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,i):new EV(e,r,i):r==="array-contains"?new IV(e,i):r==="in"?new kV(e,i):r==="not-in"?new CV(e,i):r==="array-contains-any"?new AV(e,i):new $t(e,r,i)}static createKeyFieldInFilter(e,r,i){return r==="in"?new TV(e,i):new SV(e,i)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Ca(r,this.value)):r!==null&&As(this.value)===As(r)&&this.matchesComparison(Ca(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class oi extends JI{constructor(e,r){super(),this.filters=e,this.op=r,this.ce=null}static create(e,r){return new oi(e,r)}matches(e){return ZI(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function ZI(t){return t.op==="and"}function ek(t){return xV(t)&&ZI(t)}function xV(t){for(const e of t.filters)if(e instanceof oi)return!1;return!0}function Wg(t){if(t instanceof $t)return t.field.canonicalString()+t.op.toString()+Aa(t.value);if(ek(t))return t.filters.map(e=>Wg(e)).join(",");{const e=t.filters.map(r=>Wg(r)).join(",");return`${t.op}(${e})`}}function tk(t,e){return t instanceof $t?function(i,s){return s instanceof $t&&i.op===s.op&&i.field.isEqual(s.field)&&si(i.value,s.value)}(t,e):t instanceof oi?function(i,s){return s instanceof oi&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,a,l)=>o&&tk(a,s.filters[l]),!0):!1}(t,e):void Ae()}function nk(t){return t instanceof $t?function(r){return`${r.field.canonicalString()} ${r.op} ${Aa(r.value)}`}(t):t instanceof oi?function(r){return r.op.toString()+" {"+r.getFilters().map(nk).join(" ,")+"}"}(t):"Filter"}class EV extends $t{constructor(e,r,i){super(e,r,i),this.key=Ie.fromName(i.referenceValue)}matches(e){const r=Ie.comparator(e.key,this.key);return this.matchesComparison(r)}}class TV extends $t{constructor(e,r){super(e,"in",r),this.keys=rk("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class SV extends $t{constructor(e,r){super(e,"not-in",r),this.keys=rk("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function rk(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(i=>Ie.fromName(i.referenceValue))}class IV extends $t{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return qy(r)&&Nu(r.arrayValue,this.value)}}class kV extends $t{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Nu(this.value.arrayValue,r)}}class CV extends $t{constructor(e,r){super(e,"not-in",r)}matches(e){if(Nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Nu(this.value.arrayValue,r)}}class AV extends $t{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!qy(r)||!r.arrayValue.values)&&r.arrayValue.values.some(i=>Nu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PV{constructor(e,r=null,i=[],s=[],o=null,a=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=a,this.endAt=l,this.le=null}}function zb(t,e=null,r=[],i=[],s=null,o=null,a=null){return new PV(t,e,r,i,s,o,a)}function Gy(t){const e=Me(t);if(e.le===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(i=>Wg(i)).join(","),r+="|ob:",r+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Sf(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>Aa(i)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>Aa(i)).join(",")),e.le=r}return e.le}function Ky(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!bV(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!tk(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!$b(t.startAt,e.startAt)&&$b(t.endAt,e.endAt)}function qg(t){return Ie.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,r=null,i=[],s=[],o=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function RV(t,e,r,i,s,o,a,l){return new kf(t,e,r,i,s,o,a,l)}function Yy(t){return new kf(t)}function Hb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function NV(t){return t.collectionGroup!==null}function nu(t){const e=Me(t);if(e.he===null){e.he=[];const r=new Set;for(const o of e.explicitOrderBy)e.he.push(o),r.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new Wt(an.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(o=>{r.has(o.canonicalString())||o.isKeyField()||e.he.push(new Ph(o,i))}),r.has(an.keyField().canonicalString())||e.he.push(new Ph(an.keyField(),i))}return e.he}function ti(t){const e=Me(t);return e.Pe||(e.Pe=MV(e,nu(t))),e.Pe}function MV(t,e){if(t.limitType==="F")return zb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Ph(s.field,o)});const r=t.endAt?new Ah(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ah(t.startAt.position,t.startAt.inclusive):null;return zb(t.path,t.collectionGroup,e,t.filters,t.limit,r,i)}}function Gg(t,e,r){return new kf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Cf(t,e){return Ky(ti(t),ti(e))&&t.limitType===e.limitType}function ik(t){return`${Gy(ti(t))}|lt:${t.limitType}`}function $o(t){return`Query(target=${function(r){let i=r.path.canonicalString();return r.collectionGroup!==null&&(i+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(i+=`, filters: [${r.filters.map(s=>nk(s)).join(", ")}]`),Sf(r.limit)||(i+=", limit: "+r.limit),r.orderBy.length>0&&(i+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(i+=", startAt: ",i+=r.startAt.inclusive?"b:":"a:",i+=r.startAt.position.map(s=>Aa(s)).join(",")),r.endAt&&(i+=", endAt: ",i+=r.endAt.inclusive?"a:":"b:",i+=r.endAt.position.map(s=>Aa(s)).join(",")),`Target(${i})`}(ti(t))}; limitType=${t.limitType})`}function Af(t,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Ie.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,s){for(const o of nu(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(a,l,u){const c=Bb(a,l,u);return a.inclusive?c<=0:c<0}(i.startAt,nu(i),s)||i.endAt&&!function(a,l,u){const c=Bb(a,l,u);return a.inclusive?c>=0:c>0}(i.endAt,nu(i),s))}(t,e)}function LV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function sk(t){return(e,r)=>{let i=!1;for(const s of nu(t)){const o=OV(s,e,r);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function OV(t,e,r){const i=t.field.isKeyField()?Ie.comparator(e.key,r.key):function(o,a,l){const u=a.data.field(o),c=l.data.field(o);return u!==null&&c!==null?Ca(u,c):Ae()}(t.field,e,r);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,r){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,r]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[r]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Vs(this.inner,(r,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return zI(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jV=new At(Ie.comparator);function Pi(){return jV}const ok=new At(Ie.comparator);function Ul(...t){let e=ok;for(const r of t)e=e.insert(r.key,r);return e}function ak(t){let e=ok;return t.forEach((r,i)=>e=e.insert(r,i.overlayedDocument)),e}function no(){return ru()}function lk(){return ru()}function ru(){return new Eo(t=>t.toString(),(t,e)=>t.isEqual(e))}const VV=new At(Ie.comparator),FV=new Wt(Ie.comparator);function qe(...t){let e=FV;for(const r of t)e=e.add(r);return e}const UV=new Wt(Ge);function BV(){return UV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ih(e)?"-0":e}}function uk(t){return{integerValue:""+t}}function $V(t,e){return fV(e)?uk(e):Xy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(){this._=void 0}}function zV(t,e,r){return t instanceof Rh?function(s,o){const a={fields:{[qI]:{stringValue:WI},[KI]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Wy(o)&&(o=If(o)),o&&(a.fields[GI]=o),{mapValue:a}}(r,e):t instanceof Du?dk(t,e):t instanceof Mu?hk(t,e):function(s,o){const a=ck(s,o),l=Wb(a)+Wb(s.Ie);return Hg(a)&&Hg(s.Ie)?uk(l):Xy(s.serializer,l)}(t,e)}function HV(t,e,r){return t instanceof Du?dk(t,e):t instanceof Mu?hk(t,e):r}function ck(t,e){return t instanceof Nh?function(i){return Hg(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Rh extends Pf{}class Du extends Pf{constructor(e){super(),this.elements=e}}function dk(t,e){const r=fk(e);for(const i of t.elements)r.some(s=>si(s,i))||r.push(i);return{arrayValue:{values:r}}}class Mu extends Pf{constructor(e){super(),this.elements=e}}function hk(t,e){let r=fk(e);for(const i of t.elements)r=r.filter(s=>!si(s,i));return{arrayValue:{values:r}}}class Nh extends Pf{constructor(e,r){super(),this.serializer=e,this.Ie=r}}function Wb(t){return Mt(t.integerValue||t.doubleValue)}function fk(t){return qy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function WV(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Du&&s instanceof Du||i instanceof Mu&&s instanceof Mu?ka(i.elements,s.elements,si):i instanceof Nh&&s instanceof Nh?si(i.Ie,s.Ie):i instanceof Rh&&s instanceof Rh}(t.transform,e.transform)}class qV{constructor(e,r){this.version=e,this.transformResults=r}}class ni{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ni}static exists(e){return new ni(void 0,e)}static updateTime(e){return new ni(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Rf{}function pk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new gk(t.key,ni.none()):new tc(t.key,t.data,ni.none());{const r=t.data,i=Un.empty();let s=new Wt(an.comparator);for(let o of e.fields)if(!s.has(o)){let a=r.field(o);a===null&&o.length>1&&(o=o.popLast(),a=r.field(o)),a===null?i.delete(o):i.set(o,a),s=s.add(o)}return new Fs(t.key,i,new Qn(s.toArray()),ni.none())}}function GV(t,e,r){t instanceof tc?function(s,o,a){const l=s.value.clone(),u=Gb(s.fieldTransforms,o,a.transformResults);l.setAll(u),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Fs?function(s,o,a){if(!Vd(s.precondition,o))return void o.convertToUnknownDocument(a.version);const l=Gb(s.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(mk(s)),u.setAll(l),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,r):function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function iu(t,e,r,i){return t instanceof tc?function(o,a,l,u){if(!Vd(o.precondition,a))return l;const c=o.value.clone(),h=Kb(o.fieldTransforms,u,a);return c.setAll(h),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,r,i):t instanceof Fs?function(o,a,l,u){if(!Vd(o.precondition,a))return l;const c=Kb(o.fieldTransforms,u,a),h=a.data;return h.setAll(mk(o)),h.setAll(c),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,r,i):function(o,a,l){return Vd(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,r)}function KV(t,e){let r=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),o=ck(i.transform,s||null);o!=null&&(r===null&&(r=Un.empty()),r.set(i.field,o))}return r||null}function qb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&ka(i,s,(o,a)=>WV(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class tc extends Rf{constructor(e,r,i,s=[]){super(),this.key=e,this.value=r,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Fs extends Rf{constructor(e,r,i,s,o=[]){super(),this.key=e,this.data=r,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function mk(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const i=t.data.field(r);e.set(r,i)}}),e}function Gb(t,e,r){const i=new Map;rt(t.length===r.length);for(let s=0;s<r.length;s++){const o=t[s],a=o.transform,l=e.data.field(o.field);i.set(o.field,HV(a,l,r[s]))}return i}function Kb(t,e,r){const i=new Map;for(const s of t){const o=s.transform,a=r.data.field(s.field);i.set(s.field,zV(o,a,e))}return i}class gk extends Rf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YV extends Rf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XV{constructor(e,r,i,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,r){const i=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&GV(o,e,i[s])}}applyToLocalView(e,r){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(r=iu(i,e,r,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(r=iu(i,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const i=lk();return this.mutations.forEach(s=>{const o=e.get(s.key),a=o.overlayedDocument;let l=this.applyToLocalView(a,o.mutatedFields);l=r.has(s.key)?null:l;const u=pk(a,l);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(Re.min())}),i}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),qe())}isEqual(e){return this.batchId===e.batchId&&ka(this.mutations,e.mutations,(r,i)=>qb(r,i))&&ka(this.baseMutations,e.baseMutations,(r,i)=>qb(r,i))}}class Qy{constructor(e,r,i,s){this.batch=e,this.commitVersion=r,this.mutationResults=i,this.docVersions=s}static from(e,r,i){rt(e.mutations.length===i.length);let s=function(){return VV}();const o=e.mutations;for(let a=0;a<o.length;a++)s=s.insert(o[a].key,i[a].version);return new Qy(e,r,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,Qe;function ZV(t){switch(t){case ne.OK:return Ae();case ne.CANCELLED:case ne.UNKNOWN:case ne.DEADLINE_EXCEEDED:case ne.RESOURCE_EXHAUSTED:case ne.INTERNAL:case ne.UNAVAILABLE:case ne.UNAUTHENTICATED:return!1;case ne.INVALID_ARGUMENT:case ne.NOT_FOUND:case ne.ALREADY_EXISTS:case ne.PERMISSION_DENIED:case ne.FAILED_PRECONDITION:case ne.ABORTED:case ne.OUT_OF_RANGE:case ne.UNIMPLEMENTED:case ne.DATA_LOSS:return!0;default:return Ae()}}function vk(t){if(t===void 0)return Ai("GRPC error has no .code"),ne.UNKNOWN;switch(t){case jt.OK:return ne.OK;case jt.CANCELLED:return ne.CANCELLED;case jt.UNKNOWN:return ne.UNKNOWN;case jt.DEADLINE_EXCEEDED:return ne.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return ne.RESOURCE_EXHAUSTED;case jt.INTERNAL:return ne.INTERNAL;case jt.UNAVAILABLE:return ne.UNAVAILABLE;case jt.UNAUTHENTICATED:return ne.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return ne.INVALID_ARGUMENT;case jt.NOT_FOUND:return ne.NOT_FOUND;case jt.ALREADY_EXISTS:return ne.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return ne.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return ne.FAILED_PRECONDITION;case jt.ABORTED:return ne.ABORTED;case jt.OUT_OF_RANGE:return ne.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return ne.UNIMPLEMENTED;case jt.DATA_LOSS:return ne.DATA_LOSS;default:return Ae()}}(Qe=jt||(jt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e4(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4=new ys([4294967295,4294967295],0);function Yb(t){const e=e4().encode(t),r=new MI;return r.update(e),new Uint8Array(r.digest())}function Xb(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ys([r,i],0),new ys([s,o],0)]}class Jy{constructor(e,r,i){if(this.bitmap=e,this.padding=r,this.hashCount=i,r<0||r>=8)throw new Bl(`Invalid padding: ${r}`);if(i<0)throw new Bl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Bl(`Invalid hash count: ${i}`);if(e.length===0&&r!==0)throw new Bl(`Invalid padding when bitmap length is 0: ${r}`);this.Ee=8*e.length-r,this.de=ys.fromNumber(this.Ee)}Ae(e,r,i){let s=e.add(r.multiply(ys.fromNumber(i)));return s.compare(t4)===1&&(s=new ys([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const r=Yb(e),[i,s]=Xb(r);for(let o=0;o<this.hashCount;o++){const a=this.Ae(i,s,o);if(!this.Re(a))return!1}return!0}static create(e,r,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new Jy(o,s,r);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.Ee===0)return;const r=Yb(e),[i,s]=Xb(r);for(let o=0;o<this.hashCount;o++){const a=this.Ae(i,s,o);this.Ve(a)}}Ve(e){const r=Math.floor(e/8),i=e%8;this.bitmap[r]|=1<<i}}class Bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,r,i,s,o){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,r,i){const s=new Map;return s.set(e,nc.createSynthesizedTargetChangeForCurrentChange(e,r,i)),new Nf(Re.min(),s,new At(Ge),Pi(),qe())}}class nc{constructor(e,r,i,s,o){this.resumeToken=e,this.current=r,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,r,i){return new nc(i,r,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,r,i,s){this.me=e,this.removedTargetIds=r,this.key=i,this.fe=s}}class yk{constructor(e,r){this.targetId=e,this.ge=r}}class _k{constructor(e,r,i=hn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=i,this.cause=s}}class Qb{constructor(){this.pe=0,this.ye=Jb(),this.we=hn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=qe(),r=qe(),i=qe();return this.ye.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:i=i.add(s);break;default:Ae()}}),new nc(this.we,this.Se,e,r,i)}Me(){this.be=!1,this.ye=Jb()}xe(e,r){this.be=!0,this.ye=this.ye.insert(e,r)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,rt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class n4{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Pi(),this.$e=od(),this.Ke=od(),this.Ue=new At(Ge)}We(e){for(const r of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(r,e.fe):this.ze(r,e.key,e.fe);for(const r of e.removedTargetIds)this.ze(r,e.key,e.fe)}je(e){this.forEachTarget(e,r=>{const i=this.He(r);switch(e.state){case 0:this.Je(r)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(r);break;case 3:this.Je(r)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(r)&&(this.Ye(r),i.Ce(e.resumeToken));break;default:Ae()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.qe.forEach((i,s)=>{this.Je(s)&&r(s)})}Ze(e){const r=e.targetId,i=e.ge.count,s=this.Xe(r);if(s){const o=s.target;if(qg(o))if(i===0){const a=new Ie(o.path);this.ze(r,a,xn.newNoDocument(a,Re.min()))}else rt(i===1);else{const a=this.et(r);if(a!==i){const l=this.tt(e),u=l?this.nt(l,e,a):1;if(u!==0){this.Ye(r);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(r,c)}}}}}tt(e){const r=e.ge.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=r;let a,l;try{a=Cs(i).toUint8Array()}catch(u){if(u instanceof HI)return Ia("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Jy(a,s,o)}catch(u){return Ia(u instanceof Bl?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ee===0?null:l}nt(e,r,i){return r.ge.count===i-this.st(e,r.targetId)?0:2}st(e,r){const i=this.ke.getRemoteKeysForTarget(r);let s=0;return i.forEach(o=>{const a=this.ke.it(),l=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.ze(r,o,null),s++)}),s}ot(e){const r=new Map;this.qe.forEach((o,a)=>{const l=this.Xe(a);if(l){if(o.current&&qg(l.target)){const u=new Ie(l.target.path);this._t(u).has(a)||this.ut(a,u)||this.ze(a,u,xn.newNoDocument(u,e))}o.ve&&(r.set(a,o.Fe()),o.Me())}});let i=qe();this.Ke.forEach((o,a)=>{let l=!0;a.forEachWhile(u=>{const c=this.Xe(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(o))}),this.Qe.forEach((o,a)=>a.setReadTime(e));const s=new Nf(e,r,this.Ue,this.Qe,i);return this.Qe=Pi(),this.$e=od(),this.Ke=od(),this.Ue=new At(Ge),s}Ge(e,r){if(!this.Je(e))return;const i=this.ut(e,r.key)?2:0;this.He(e).xe(r.key,i),this.Qe=this.Qe.insert(r.key,r),this.$e=this.$e.insert(r.key,this._t(r.key).add(e)),this.Ke=this.Ke.insert(r.key,this.ct(r.key).add(e))}ze(e,r,i){if(!this.Je(e))return;const s=this.He(e);this.ut(e,r)?s.xe(r,1):s.Oe(r),this.Ke=this.Ke.insert(r,this.ct(r).delete(e)),this.Ke=this.Ke.insert(r,this.ct(r).add(e)),i&&(this.Qe=this.Qe.insert(r,i))}removeTarget(e){this.qe.delete(e)}et(e){const r=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let r=this.qe.get(e);return r||(r=new Qb,this.qe.set(e,r)),r}ct(e){let r=this.Ke.get(e);return r||(r=new Wt(Ge),this.Ke=this.Ke.insert(e,r)),r}_t(e){let r=this.$e.get(e);return r||(r=new Wt(Ge),this.$e=this.$e.insert(e,r)),r}Je(e){const r=this.Xe(e)!==null;return r||ge("WatchChangeAggregator","Detected inactive target",e),r}Xe(e){const r=this.qe.get(e);return r&&r.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Qb),this.ke.getRemoteKeysForTarget(e).forEach(r=>{this.ze(e,r,null)})}ut(e,r){return this.ke.getRemoteKeysForTarget(e).has(r)}}function od(){return new At(Ie.comparator)}function Jb(){return new At(Ie.comparator)}const r4={asc:"ASCENDING",desc:"DESCENDING"},i4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},s4={and:"AND",or:"OR"};class o4{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Kg(t,e){return t.useProto3Json||Sf(e)?e:{value:e}}function Dh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function a4(t,e){return Dh(t,e.toTimestamp())}function ri(t){return rt(!!t),Re.fromTimestamp(function(r){const i=ks(r);return new Ht(i.seconds,i.nanos)}(t))}function Zy(t,e){return Yg(t,e).canonicalString()}function Yg(t,e){const r=function(s){return new bt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function bk(t){const e=bt.fromString(t);return rt(Ik(e)),e}function Xg(t,e){return Zy(t.databaseId,e.path)}function im(t,e){const r=bk(e);if(r.get(1)!==t.databaseId.projectId)throw new Te(ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Te(ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Ie(Ek(r))}function xk(t,e){return Zy(t.databaseId,e)}function l4(t){const e=bk(t);return e.length===4?bt.emptyPath():Ek(e)}function Qg(t){return new bt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ek(t){return rt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Zb(t,e,r){return{name:Xg(t,e),fields:r.value.mapValue.fields}}function u4(t,e){let r;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(c,h){return c.useProto3Json?(rt(h===void 0||typeof h=="string"),hn.fromBase64String(h||"")):(rt(h===void 0||h instanceof Buffer||h instanceof Uint8Array),hn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(c){const h=c.code===void 0?ne.UNKNOWN:vk(c.code);return new Te(h,c.message||"")}(a);r=new _k(i,s,o,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=im(t,i.document.name),o=ri(i.document.updateTime),a=i.document.createTime?ri(i.document.createTime):Re.min(),l=new Un({mapValue:{fields:i.document.fields}}),u=xn.newFoundDocument(s,o,a,l),c=i.targetIds||[],h=i.removedTargetIds||[];r=new Fd(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=im(t,i.document),o=i.readTime?ri(i.readTime):Re.min(),a=xn.newNoDocument(s,o),l=i.removedTargetIds||[];r=new Fd([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=im(t,i.document),o=i.removedTargetIds||[];r=new Fd([],o,s,null)}else{if(!("filter"in e))return Ae();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,a=new JV(s,o),l=i.targetId;r=new yk(l,a)}}return r}function c4(t,e){let r;if(e instanceof tc)r={update:Zb(t,e.key,e.value)};else if(e instanceof gk)r={delete:Xg(t,e.key)};else if(e instanceof Fs)r={update:Zb(t,e.key,e.data),updateMask:_4(e.fieldMask)};else{if(!(e instanceof YV))return Ae();r={verify:Xg(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const l=a.transform;if(l instanceof Rh)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Du)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Mu)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Nh)return{fieldPath:a.field.canonicalString(),increment:l.Ie};throw Ae()}(0,i))),e.precondition.isNone||(r.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:a4(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ae()}(t,e.precondition)),r}function d4(t,e){return t&&t.length>0?(rt(e!==void 0),t.map(r=>function(s,o){let a=s.updateTime?ri(s.updateTime):ri(o);return a.isEqual(Re.min())&&(a=ri(o)),new qV(a,s.transformResults||[])}(r,e))):[]}function h4(t,e){return{documents:[xk(t,e.path)]}}function f4(t,e){const r={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),r.structuredQuery.from=[{collectionId:i.lastSegment()}]),r.parent=xk(t,s);const o=function(c){if(c.length!==0)return Sk(oi.create(c,"and"))}(e.filters);o&&(r.structuredQuery.where=o);const a=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:zo(p.field),direction:g4(p.dir)}}(h))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const l=Kg(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ht:r,parent:s}}function p4(t){let e=l4(t.parent);const r=t.structuredQuery,i=r.from?r.from.length:0;let s=null;if(i>0){rt(i===1);const h=r.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let o=[];r.where&&(o=function(f){const p=Tk(f);return p instanceof oi&&ek(p)?p.getFilters():[p]}(r.where));let a=[];r.orderBy&&(a=function(f){return f.map(p=>function(b){return new Ph(Ho(b.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(p))}(r.orderBy));let l=null;r.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,Sf(p)?null:p}(r.limit));let u=null;r.startAt&&(u=function(f){const p=!!f.before,g=f.values||[];return new Ah(g,p)}(r.startAt));let c=null;return r.endAt&&(c=function(f){const p=!f.before,g=f.values||[];return new Ah(g,p)}(r.endAt)),RV(e,s,a,o,l,"F",u,c)}function m4(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function Tk(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const i=Ho(r.unaryFilter.field);return $t.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Ho(r.unaryFilter.field);return $t.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ho(r.unaryFilter.field);return $t.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Ho(r.unaryFilter.field);return $t.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Ae()}}(t):t.fieldFilter!==void 0?function(r){return $t.create(Ho(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ae()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return oi.create(r.compositeFilter.filters.map(i=>Tk(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ae()}}(r.compositeFilter.op))}(t):Ae()}function g4(t){return r4[t]}function v4(t){return i4[t]}function y4(t){return s4[t]}function zo(t){return{fieldPath:t.canonicalString()}}function Ho(t){return an.fromServerFormat(t.fieldPath)}function Sk(t){return t instanceof $t?function(r){if(r.op==="=="){if(Ub(r.value))return{unaryFilter:{field:zo(r.field),op:"IS_NAN"}};if(Fb(r.value))return{unaryFilter:{field:zo(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Ub(r.value))return{unaryFilter:{field:zo(r.field),op:"IS_NOT_NAN"}};if(Fb(r.value))return{unaryFilter:{field:zo(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(r.field),op:v4(r.op),value:r.value}}}(t):t instanceof oi?function(r){const i=r.getFilters().map(s=>Sk(s));return i.length===1?i[0]:{compositeFilter:{op:y4(r.op),filters:i}}}(t):Ae()}function _4(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Ik(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ss{constructor(e,r,i,s,o=Re.min(),a=Re.min(),l=hn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w4{constructor(e){this.Tt=e}}function b4(t){const e=p4({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(){this.Tn=new E4}addToCollectionParentIndex(e,r){return this.Tn.add(r),ee.resolve()}getCollectionParents(e,r){return ee.resolve(this.Tn.getEntries(r))}addFieldIndex(e,r){return ee.resolve()}deleteFieldIndex(e,r){return ee.resolve()}deleteAllFieldIndexes(e){return ee.resolve()}createTargetIndexes(e,r){return ee.resolve()}getDocumentsMatchingTarget(e,r){return ee.resolve(null)}getIndexType(e,r){return ee.resolve(0)}getFieldIndexes(e,r){return ee.resolve([])}getNextCollectionGroupToUpdate(e){return ee.resolve(null)}getMinOffset(e,r){return ee.resolve(Is.min())}getMinOffsetFromCollectionGroup(e,r){return ee.resolve(Is.min())}updateCollectionGroup(e,r,i){return ee.resolve()}updateIndexEntries(e,r){return ee.resolve()}}class E4{constructor(){this.index={}}add(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r]||new Wt(bt.comparator),o=!s.has(i);return this.index[r]=s.add(i),o}has(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Wt(bt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kk=41943040;class Vn{static withCacheSize(e){return new Vn(e,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(kk,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pa{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Pa(0)}static Un(){return new Pa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="LruGarbageCollector",T4=1048576;function nx([t,e],[r,i]){const s=Ge(t,r);return s===0?Ge(e,i):s}class S4{constructor(e){this.Hn=e,this.buffer=new Wt(nx),this.Jn=0}Yn(){return++this.Jn}Zn(e){const r=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(r);else{const i=this.buffer.last();nx(r,i)<0&&(this.buffer=this.buffer.delete(i).add(r))}}get maxValue(){return this.buffer.last()[0]}}class I4{constructor(e,r,i){this.garbageCollector=e,this.asyncQueue=r,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ge(tx,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Qa(r)?ge(tx,"Ignoring IndexedDB error during garbage collection: ",r):await Xa(r)}await this.er(3e5)})}}class k4{constructor(e,r){this.tr=e,this.params=r}calculateTargetCount(e,r){return this.tr.nr(e).next(i=>Math.floor(r/100*i))}nthSequenceNumber(e,r){if(r===0)return ee.resolve(Tf.ae);const i=new S4(r);return this.tr.forEachTarget(e,s=>i.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>i.Zn(s))).next(()=>i.maxValue)}removeTargets(e,r,i){return this.tr.removeTargets(e,r,i)}removeOrphanedDocuments(e,r){return this.tr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),ee.resolve(ex)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),ex):this.ir(e,r))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,r){let i,s,o,a,l,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(i=f,l=Date.now(),this.removeTargets(e,i,r))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(f=>(c=Date.now(),Bo()<=We.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${o} targets in `+(u-l)+`ms
	Removed ${f} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),ee.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:f})))}}function C4(t,e){return new k4(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A4{constructor(){this.changes=new Eo(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const i=this.changes.get(r);return i!==void 0?ee.resolve(i):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P4{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(e,r,i,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,r){let i=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(i!==null&&iu(i.mutation,s,Qn.empty(),Ht.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.getLocalViewOfDocuments(e,i,qe()).next(()=>i))}getLocalViewOfDocuments(e,r,i=qe()){const s=no();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,i).next(o=>{let a=Ul();return o.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const i=no();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,qe()))}populateOverlays(e,r,i){const s=[];return i.forEach(o=>{r.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((a,l)=>{r.set(a,l)})})}computeViews(e,r,i,s){let o=Pi();const a=ru(),l=function(){return ru()}();return r.forEach((u,c)=>{const h=i.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Fs)?o=o.insert(c.key,c):h!==void 0?(a.set(c.key,h.mutation.getFieldMask()),iu(h.mutation,c,h.mutation.getFieldMask(),Ht.now())):a.set(c.key,Qn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,h)=>a.set(c,h)),r.forEach((c,h)=>{var f;return l.set(c,new P4(h,(f=a.get(c))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,r){const i=ru();let s=new At((a,l)=>a-l),o=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const l of a)l.keys().forEach(u=>{const c=r.get(u);if(c===null)return;let h=i.get(u)||Qn.empty();h=l.applyToLocalView(c,h),i.set(u,h);const f=(s.get(l.batchId)||qe()).add(u);s=s.insert(l.batchId,f)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,h=u.value,f=lk();h.forEach(p=>{if(!o.has(p)){const g=pk(r.get(p),i.get(p));g!==null&&f.set(p,g),o=o.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,f))}return ee.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,r,i,s){return function(a){return Ie.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):NV(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,i,s):this.getDocumentsMatchingCollectionQuery(e,r,i,s)}getNextDocuments(e,r,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,i,s).next(o=>{const a=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,i.largestBatchId,s-o.size):ee.resolve(no());let l=Au,u=o;return a.next(c=>ee.forEach(c,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),o.get(h)?ee.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,qe())).next(h=>({batchId:l,changes:ak(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Ie(r)).next(i=>{let s=Ul();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,i,s){const o=r.collectionGroup;let a=Ul();return this.indexManager.getCollectionParents(e,o).next(l=>ee.forEach(l,u=>{const c=function(f,p){return new kf(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,i,s).next(h=>{h.forEach((f,p)=>{a=a.insert(f,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,i,o,s))).next(a=>{o.forEach((u,c)=>{const h=c.getKey();a.get(h)===null&&(a=a.insert(h,xn.newInvalidDocument(h)))});let l=Ul();return a.forEach((u,c)=>{const h=o.get(u);h!==void 0&&iu(h.mutation,c,Qn.empty(),Ht.now()),Af(r,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N4{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,r){return ee.resolve(this.dr.get(r))}saveBundleMetadata(e,r){return this.dr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:ri(s.createTime)}}(r)),ee.resolve()}getNamedQuery(e,r){return ee.resolve(this.Ar.get(r))}saveNamedQuery(e,r){return this.Ar.set(r.name,function(s){return{name:s.name,query:b4(s.bundledQuery),readTime:ri(s.readTime)}}(r)),ee.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(){this.overlays=new At(Ie.comparator),this.Rr=new Map}getOverlay(e,r){return ee.resolve(this.overlays.get(r))}getOverlays(e,r){const i=no();return ee.forEach(r,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,r,i){return i.forEach((s,o)=>{this.Et(e,r,o)}),ee.resolve()}removeOverlaysForBatchId(e,r,i){const s=this.Rr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(i)),ee.resolve()}getOverlaysForCollection(e,r,i){const s=no(),o=r.length+1,a=new Ie(r.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>i&&s.set(u.getKey(),u)}return ee.resolve(s)}getOverlaysForCollectionGroup(e,r,i,s){let o=new At((c,h)=>c-h);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>i){let h=o.get(c.largestBatchId);h===null&&(h=no(),o=o.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const l=no(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>l.set(c,h)),!(l.size()>=s)););return ee.resolve(l)}Et(e,r,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.Rr.get(s.largestBatchId).delete(i.key);this.Rr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new QV(r,i));let o=this.Rr.get(r);o===void 0&&(o=qe(),this.Rr.set(r,o)),this.Rr.set(r,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(){this.sessionToken=hn.EMPTY_BYTE_STRING}getSessionToken(e){return ee.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,ee.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(){this.Vr=new Wt(Yt.mr),this.gr=new Wt(Yt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,r){const i=new Yt(e,r);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,r){e.forEach(i=>this.addReference(i,r))}removeReference(e,r){this.wr(new Yt(e,r))}Sr(e,r){e.forEach(i=>this.removeReference(i,r))}br(e){const r=new Ie(new bt([])),i=new Yt(r,e),s=new Yt(r,e+1),o=[];return this.gr.forEachInRange([i,s],a=>{this.wr(a),o.push(a.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const r=new Ie(new bt([])),i=new Yt(r,e),s=new Yt(r,e+1);let o=qe();return this.gr.forEachInRange([i,s],a=>{o=o.add(a.key)}),o}containsKey(e){const r=new Yt(e,0),i=this.Vr.firstAfterOrEqual(r);return i!==null&&e.isEqual(i.key)}}class Yt{constructor(e,r){this.key=e,this.Cr=r}static mr(e,r){return Ie.comparator(e.key,r.key)||Ge(e.Cr,r.Cr)}static pr(e,r){return Ge(e.Cr,r.Cr)||Ie.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Fr=1,this.Mr=new Wt(Yt.mr)}checkEmpty(e){return ee.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,i,s){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new XV(o,r,i,s);this.mutationQueue.push(a);for(const l of s)this.Mr=this.Mr.add(new Yt(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ee.resolve(a)}lookupMutationBatch(e,r){return ee.resolve(this.Or(r))}getNextMutationBatchAfterBatchId(e,r){const i=r+1,s=this.Nr(i),o=s<0?0:s;return ee.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ee.resolve(this.mutationQueue.length===0?Hy:this.Fr-1)}getAllMutationBatches(e){return ee.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const i=new Yt(r,0),s=new Yt(r,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([i,s],a=>{const l=this.Or(a.Cr);o.push(l)}),ee.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,r){let i=new Wt(Ge);return r.forEach(s=>{const o=new Yt(s,0),a=new Yt(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,a],l=>{i=i.add(l.Cr)})}),ee.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,r){const i=r.path,s=i.length+1;let o=i;Ie.isDocumentKey(o)||(o=o.child(""));const a=new Yt(new Ie(o),0);let l=new Wt(Ge);return this.Mr.forEachWhile(u=>{const c=u.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(l=l.add(u.Cr)),!0)},a),ee.resolve(this.Br(l))}Br(e){const r=[];return e.forEach(i=>{const s=this.Or(i);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){rt(this.Lr(r.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return ee.forEach(r.mutations,s=>{const o=new Yt(s.key,r.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,r){const i=new Yt(r,0),s=this.Mr.firstAfterOrEqual(i);return ee.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ee.resolve()}Lr(e,r){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const r=this.Nr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(e){this.kr=e,this.docs=function(){return new At(Ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const i=r.key,s=this.docs.get(i),o=s?s.size:0,a=this.kr(r);return this.docs=this.docs.insert(i,{document:r.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const i=this.docs.get(r);return ee.resolve(i?i.document.mutableCopy():xn.newInvalidDocument(r))}getEntries(e,r){let i=Pi();return r.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():xn.newInvalidDocument(s))}),ee.resolve(i)}getDocumentsMatchingQuery(e,r,i,s){let o=Pi();const a=r.path,l=new Ie(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||uV(lV(h),i)<=0||(s.has(h.key)||Af(r,h))&&(o=o.insert(h.key,h.mutableCopy()))}return ee.resolve(o)}getAllFromCollectionGroup(e,r,i,s){Ae()}qr(e,r){return ee.forEach(this.docs,i=>r(i))}newChangeBuffer(e){return new j4(this)}getSize(e){return ee.resolve(this.size)}}class j4 extends A4{constructor(e){super(),this.Ir=e}applyChanges(e){const r=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?r.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(i)}),ee.waitFor(r)}getFromCache(e,r){return this.Ir.getEntry(e,r)}getAllFromCache(e,r){return this.Ir.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V4{constructor(e){this.persistence=e,this.Qr=new Eo(r=>Gy(r),Ky),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.$r=0,this.Kr=new e_,this.targetCount=0,this.Ur=Pa.Kn()}forEachTarget(e,r){return this.Qr.forEach((i,s)=>r(s)),ee.resolve()}getLastRemoteSnapshotVersion(e){return ee.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ee.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),ee.resolve(this.highestTargetId)}setTargetsMetadata(e,r,i){return i&&(this.lastRemoteSnapshotVersion=i),r>this.$r&&(this.$r=r),ee.resolve()}zn(e){this.Qr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Ur=new Pa(r),this.highestTargetId=r),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,r){return this.zn(r),this.targetCount+=1,ee.resolve()}updateTargetData(e,r){return this.zn(r),ee.resolve()}removeTargetData(e,r){return this.Qr.delete(r.target),this.Kr.br(r.targetId),this.targetCount-=1,ee.resolve()}removeTargets(e,r,i){let s=0;const o=[];return this.Qr.forEach((a,l)=>{l.sequenceNumber<=r&&i.get(l.targetId)===null&&(this.Qr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),ee.waitFor(o).next(()=>s)}getTargetCount(e){return ee.resolve(this.targetCount)}getTargetData(e,r){const i=this.Qr.get(r)||null;return ee.resolve(i)}addMatchingKeys(e,r,i){return this.Kr.yr(r,i),ee.resolve()}removeMatchingKeys(e,r,i){this.Kr.Sr(r,i);const s=this.persistence.referenceDelegate,o=[];return s&&r.forEach(a=>{o.push(s.markPotentiallyOrphaned(e,a))}),ee.waitFor(o)}removeMatchingKeysForTargetId(e,r){return this.Kr.br(r),ee.resolve()}getMatchingKeysForTargetId(e,r){const i=this.Kr.vr(r);return ee.resolve(i)}containsKey(e,r){return ee.resolve(this.Kr.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ck{constructor(e,r){this.Wr={},this.overlays={},this.Gr=new Tf(0),this.zr=!1,this.zr=!0,this.jr=new M4,this.referenceDelegate=e(this),this.Hr=new V4(this),this.indexManager=new x4,this.remoteDocumentCache=function(s){return new O4(s)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new w4(r),this.Yr=new N4(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new D4,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let i=this.Wr[e.toKey()];return i||(i=new L4(r,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,r,i){ge("MemoryPersistence","Starting transaction:",e);const s=new F4(this.Gr.next());return this.referenceDelegate.Zr(),i(s).next(o=>this.referenceDelegate.Xr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}ei(e,r){return ee.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,r)))}}class F4 extends dV{constructor(e){super(),this.currentSequenceNumber=e}}class t_{constructor(e){this.persistence=e,this.ti=new e_,this.ni=null}static ri(e){return new t_(e)}get ii(){if(this.ni)return this.ni;throw Ae()}addReference(e,r,i){return this.ti.addReference(i,r),this.ii.delete(i.toString()),ee.resolve()}removeReference(e,r,i){return this.ti.removeReference(i,r),this.ii.add(i.toString()),ee.resolve()}markPotentiallyOrphaned(e,r){return this.ii.add(r.toString()),ee.resolve()}removeTarget(e,r){this.ti.br(r.targetId).forEach(s=>this.ii.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(o=>this.ii.add(o.toString()))}).next(()=>i.removeTargetData(e,r))}Zr(){this.ni=new Set}Xr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ee.forEach(this.ii,i=>{const s=Ie.fromPath(i);return this.si(e,s).next(o=>{o||r.removeEntry(s,Re.min())})}).next(()=>(this.ni=null,r.apply(e)))}updateLimboDocument(e,r){return this.si(e,r).next(i=>{i?this.ii.delete(r.toString()):this.ii.add(r.toString())})}Jr(e){return 0}si(e,r){return ee.or([()=>ee.resolve(this.ti.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.ei(e,r)])}}class Mh{constructor(e,r){this.persistence=e,this.oi=new Eo(i=>pV(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=C4(this,r)}static ri(e,r){return new Mh(e,r)}Zr(){}Xr(e){return ee.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}nr(e){const r=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>r.next(s=>i+s))}sr(e){let r=0;return this.rr(e,i=>{r++}).next(()=>r)}rr(e,r){return ee.forEach(this.oi,(i,s)=>this.ar(e,i,s).next(o=>o?ee.resolve():r(s)))}removeTargets(e,r,i){return this.persistence.getTargetCache().removeTargets(e,r,i)}removeOrphanedDocuments(e,r){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.qr(e,a=>this.ar(e,a,r).next(l=>{l||(i++,o.removeEntry(a,Re.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,r){return this.oi.set(r,e.currentSequenceNumber),ee.resolve()}removeTarget(e,r){const i=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,r,i){return this.oi.set(i,e.currentSequenceNumber),ee.resolve()}removeReference(e,r,i){return this.oi.set(i,e.currentSequenceNumber),ee.resolve()}updateLimboDocument(e,r){return this.oi.set(r,e.currentSequenceNumber),ee.resolve()}Jr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Od(e.data.value)),r}ar(e,r,i){return ee.or([()=>this.persistence.ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.oi.get(r);return ee.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,r,i,s){this.targetId=e,this.fromCache=r,this.Hi=i,this.Ji=s}static Yi(e,r){let i=qe(),s=qe();for(const o of r.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new n_(e,r.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B4{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return wM()?8:hV(Tn())>0?6:4}()}initialize(e,r){this.ns=e,this.indexManager=r,this.Zi=!0}getDocumentsMatchingQuery(e,r,i,s){const o={result:null};return this.rs(e,r).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ss(e,r,s,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new U4;return this._s(e,r,a).next(l=>{if(o.result=l,this.Xi)return this.us(e,r,a,l.size)})}).next(()=>o.result)}us(e,r,i,s){return i.documentReadCount<this.es?(Bo()<=We.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",$o(r),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ee.resolve()):(Bo()<=We.DEBUG&&ge("QueryEngine","Query:",$o(r),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ts*s?(Bo()<=We.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",$o(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ti(r))):ee.resolve())}rs(e,r){if(Hb(r))return ee.resolve(null);let i=ti(r);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Gg(r,null,"F"),i=ti(r)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=qe(...o);return this.ns.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const c=this.cs(r,l);return this.ls(r,c,a,u.readTime)?this.rs(e,Gg(r,null,"F")):this.hs(e,c,r,u)}))})))}ss(e,r,i,s){return Hb(r)||s.isEqual(Re.min())?ee.resolve(null):this.ns.getDocuments(e,i).next(o=>{const a=this.cs(r,o);return this.ls(r,a,i,s)?ee.resolve(null):(Bo()<=We.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),$o(r)),this.hs(e,a,r,aV(s,Au)).next(l=>l))})}cs(e,r){let i=new Wt(sk(e));return r.forEach((s,o)=>{Af(e,o)&&(i=i.add(o))}),i}ls(e,r,i,s){if(e.limit===null)return!1;if(i.size!==r.size)return!0;const o=e.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}_s(e,r,i){return Bo()<=We.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",$o(r)),this.ns.getDocumentsMatchingQuery(e,r,Is.min(),i)}hs(e,r,i,s){return this.ns.getDocumentsMatchingQuery(e,i,s).next(o=>(r.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r_="LocalStore",$4=3e8;class z4{constructor(e,r,i,s){this.persistence=e,this.Ps=r,this.serializer=s,this.Ts=new At(Ge),this.Is=new Eo(o=>Gy(o),Ky),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new R4(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ts))}}function H4(t,e,r,i){return new z4(t,e,r,i)}async function Ak(t,e){const r=Me(t);return await r.persistence.runTransaction("Handle user change","readonly",i=>{let s;return r.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,r.As(e),r.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],l=[];let u=qe();for(const c of s){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of o){l.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return r.localDocuments.getDocuments(i,u).next(c=>({Rs:c,removedBatchIds:a,addedBatchIds:l}))})})}function W4(t,e){const r=Me(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=r.ds.newChangeBuffer({trackRemovals:!0});return function(l,u,c,h){const f=c.batch,p=f.keys();let g=ee.resolve();return p.forEach(b=>{g=g.next(()=>h.getEntry(u,b)).next(R=>{const P=c.docVersions.get(b);rt(P!==null),R.version.compareTo(P)<0&&(f.applyToRemoteDocument(R,c),R.isValidDocument()&&(R.setReadTime(c.commitVersion),h.addEntry(R)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(u,f))}(r,i,e,o).next(()=>o.apply(i)).next(()=>r.mutationQueue.performConsistencyCheck(i)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=qe();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>r.localDocuments.getDocuments(i,s))})}function Pk(t){const e=Me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Hr.getLastRemoteSnapshotVersion(r))}function q4(t,e){const r=Me(t),i=e.snapshotVersion;let s=r.Ts;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=r.ds.newChangeBuffer({trackRemovals:!0});s=r.Ts;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(r.Hr.removeMatchingKeys(o,h.removedDocuments,f).next(()=>r.Hr.addMatchingKeys(o,h.addedDocuments,f)));let g=p.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(hn.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,i)),s=s.insert(f,g),function(R,P,x){return R.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=$4?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(p,g,h)&&l.push(r.Hr.updateTargetData(o,g))});let u=Pi(),c=qe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(o,h))}),l.push(G4(o,a,e.documentUpdates).next(h=>{u=h.Vs,c=h.fs})),!i.isEqual(Re.min())){const h=r.Hr.getLastRemoteSnapshotVersion(o).next(f=>r.Hr.setTargetsMetadata(o,o.currentSequenceNumber,i));l.push(h)}return ee.waitFor(l).next(()=>a.apply(o)).next(()=>r.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(r.Ts=s,o))}function G4(t,e,r){let i=qe(),s=qe();return r.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=Pi();return r.forEach((l,u)=>{const c=o.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Re.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):ge(r_,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Vs:a,fs:s}})}function K4(t,e){const r=Me(t);return r.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Hy),r.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Y4(t,e){const r=Me(t);return r.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return r.Hr.getTargetData(i,e).next(o=>o?(s=o,ee.resolve(s)):r.Hr.allocateTargetId(i).next(a=>(s=new ss(e,a,"TargetPurposeListen",i.currentSequenceNumber),r.Hr.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=r.Ts.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Ts=r.Ts.insert(i.targetId,i),r.Is.set(e,i.targetId)),i})}async function Jg(t,e,r){const i=Me(t),s=i.Ts.get(e),o=r?"readwrite":"readwrite-primary";try{r||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Qa(a))throw a;ge(r_,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ts=i.Ts.remove(e),i.Is.delete(s.target)}function rx(t,e,r){const i=Me(t);let s=Re.min(),o=qe();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,c,h){const f=Me(u),p=f.Is.get(h);return p!==void 0?ee.resolve(f.Ts.get(p)):f.Hr.getTargetData(c,h)}(i,a,ti(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(a,l.targetId).next(u=>{o=u})}).next(()=>i.Ps.getDocumentsMatchingQuery(a,e,r?s:Re.min(),r?o:qe())).next(l=>(X4(i,LV(e),l),{documents:l,gs:o})))}function X4(t,e,r){let i=t.Es.get(e)||Re.min();r.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Es.set(e,i)}class ix{constructor(){this.activeTargetIds=BV()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Q4{constructor(){this.ho=new ix,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,i){}addLocalQueryTarget(e,r=!0){return r&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,r,i){this.Po[e]=r}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new ix,Promise.resolve()}handleUserChange(e,r,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J4{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="ConnectivityMonitor";class ox{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ge(sx,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ge(sx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad=null;function Zg(){return ad===null?ad=function(){return 268435456+Math.round(2147483648*Math.random())}():ad++,"0x"+ad.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sm="RestConnection",Z4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class eF{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=r+"://"+e.host,this.yo=`projects/${i}/databases/${s}`,this.wo=this.databaseId.database===kh?`project_id=${i}`:`project_id=${i}&database_id=${s}`}So(e,r,i,s,o){const a=Zg(),l=this.bo(e,r.toUriEncodedString());ge(sm,`Sending RPC '${e}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,s,o),this.vo(e,l,u,i).then(c=>(ge(sm,`Received RPC '${e}' ${a}: `,c),c),c=>{throw Ia(sm,`RPC '${e}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}Co(e,r,i,s,o,a){return this.So(e,r,i,s,o)}Do(e,r,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ya}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}bo(e,r){const i=Z4[e];return`${this.po}/v1/${r}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tF{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n="WebChannelConnection";class nF extends eF{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,r,i,s){const o=Zg();return new Promise((a,l)=>{const u=new LI;u.setWithCredentials(!0),u.listenOnce(OI.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ld.NO_ERROR:const h=u.getResponseJson();ge(_n,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Ld.TIMEOUT:ge(_n,`RPC '${e}' ${o} timed out`),l(new Te(ne.DEADLINE_EXCEEDED,"Request time out"));break;case Ld.HTTP_ERROR:const f=u.getStatus();if(ge(_n,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const b=function(P){const x=P.toLowerCase().replace(/_/g,"-");return Object.values(ne).indexOf(x)>=0?x:ne.UNKNOWN}(g.status);l(new Te(b,g.message))}else l(new Te(ne.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Te(ne.UNAVAILABLE,"Connection failed."));break;default:Ae()}}finally{ge(_n,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(s);ge(_n,`RPC '${e}' ${o} sending request:`,s),u.send(r,"POST",c,i,15)})}Wo(e,r,i){const s=Zg(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=FI(),l=VI(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,r,i),u.encodeInitMessageHeaders=!0;const h=o.join("");ge(_n,`Creating RPC '${e}' stream ${s}: ${h}`,u);const f=a.createWebChannel(h,u);let p=!1,g=!1;const b=new tF({Fo:P=>{g?ge(_n,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(p||(ge(_n,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),ge(_n,`RPC '${e}' stream ${s} sending:`,P),f.send(P))},Mo:()=>f.close()}),R=(P,x,_)=>{P.listen(x,T=>{try{_(T)}catch(L){setTimeout(()=>{throw L},0)}})};return R(f,Fl.EventType.OPEN,()=>{g||(ge(_n,`RPC '${e}' stream ${s} transport opened.`),b.Qo())}),R(f,Fl.EventType.CLOSE,()=>{g||(g=!0,ge(_n,`RPC '${e}' stream ${s} transport closed`),b.Ko())}),R(f,Fl.EventType.ERROR,P=>{g||(g=!0,Ia(_n,`RPC '${e}' stream ${s} transport errored:`,P),b.Ko(new Te(ne.UNAVAILABLE,"The operation could not be completed")))}),R(f,Fl.EventType.MESSAGE,P=>{var x;if(!g){const _=P.data[0];rt(!!_);const T=_,L=(T==null?void 0:T.error)||((x=T[0])===null||x===void 0?void 0:x.error);if(L){ge(_n,`RPC '${e}' stream ${s} received error:`,L);const F=L.status;let V=function(E){const w=jt[E];if(w!==void 0)return vk(w)}(F),D=L.message;V===void 0&&(V=ne.INTERNAL,D="Unknown error status: "+F+" with message "+L.message),g=!0,b.Ko(new Te(V,D)),f.close()}else ge(_n,`RPC '${e}' stream ${s} received:`,_),b.Uo(_)}}),R(l,jI.STAT_EVENT,P=>{P.stat===$g.PROXY?ge(_n,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===$g.NOPROXY&&ge(_n,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.$o()},0),b}}function om(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(t){return new o4(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rk{constructor(e,r,i=1e3,s=1.5,o=6e4){this.Ti=e,this.timerId=r,this.Go=i,this.zo=s,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const r=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),s=Math.max(0,r-i);s>0&&ge("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${r} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax="PersistentStream";class Nk{constructor(e,r,i,s,o,a,l,u){this.Ti=e,this.n_=i,this.r_=s,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new Rk(e,r)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,r){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():r&&r.code===ne.RESOURCE_EXHAUSTED?(Ai(r.toString()),Ai("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):r&&r.code===ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(r)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),r=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.i_===r&&this.V_(i,s)},i=>{e(()=>{const s=new Te(ne.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(s)})})}V_(e,r){const i=this.R_(this.i_);this.stream=this.f_(e,r),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{i(()=>this.m_(s))}),this.stream.onMessage(s=>{i(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ge(ax,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return r=>{this.Ti.enqueueAndForget(()=>this.i_===e?r():(ge(ax,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rF extends Nk{constructor(e,r,i,s,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,s,a),this.serializer=o}f_(e,r){return this.connection.Wo("Listen",e,r)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const r=u4(this.serializer,e),i=function(o){if(!("targetChange"in o))return Re.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Re.min():a.readTime?ri(a.readTime):Re.min()}(e);return this.listener.p_(r,i)}y_(e){const r={};r.database=Qg(this.serializer),r.addTarget=function(o,a){let l;const u=a.target;if(l=qg(u)?{documents:h4(o,u)}:{query:f4(o,u).ht},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=wk(o,a.resumeToken);const c=Kg(o,a.expectedCount);c!==null&&(l.expectedCount=c)}else if(a.snapshotVersion.compareTo(Re.min())>0){l.readTime=Dh(o,a.snapshotVersion.toTimestamp());const c=Kg(o,a.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const i=m4(this.serializer,e);i&&(r.labels=i),this.I_(r)}w_(e){const r={};r.database=Qg(this.serializer),r.removeTarget=e,this.I_(r)}}class iF extends Nk{constructor(e,r,i,s,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,s,a),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,r){return this.connection.Wo("Write",e,r)}g_(e){return rt(!!e.streamToken),this.lastStreamToken=e.streamToken,rt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const r=d4(e.writeResults,e.commitTime),i=ri(e.commitTime);return this.listener.v_(i,r)}C_(){const e={};e.database=Qg(this.serializer),this.I_(e)}b_(e){const r={streamToken:this.lastStreamToken,writes:e.map(i=>c4(this.serializer,i))};this.I_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{}class oF extends sF{constructor(e,r,i,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=i,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new Te(ne.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,r,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.So(e,Yg(r,i),s,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Te(ne.UNKNOWN,o.toString())})}Co(e,r,i,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Co(e,Yg(r,i),s,a,l,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Te(ne.UNKNOWN,a.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class aF{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ai(r),this.N_=!1):ge("OnlineStateTracker",r)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="RemoteStore";class lF{constructor(e,r,i,s,o){this.localStore=e,this.datastore=r,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(a=>{i.enqueueAndForget(async()=>{To(this)&&(ge(mo,"Restarting streams for network reachability change."),await async function(u){const c=Me(u);c.W_.add(4),await rc(c),c.j_.set("Unknown"),c.W_.delete(4),await Mf(c)}(this))})}),this.j_=new aF(i,s)}}async function Mf(t){if(To(t))for(const e of t.G_)await e(!0)}async function rc(t){for(const e of t.G_)await e(!1)}function Dk(t,e){const r=Me(t);r.U_.has(e.targetId)||(r.U_.set(e.targetId,e),a_(r)?o_(r):Ja(r).c_()&&s_(r,e))}function i_(t,e){const r=Me(t),i=Ja(r);r.U_.delete(e),i.c_()&&Mk(r,e),r.U_.size===0&&(i.c_()?i.P_():To(r)&&r.j_.set("Unknown"))}function s_(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Ja(t).y_(e)}function Mk(t,e){t.H_.Ne(e),Ja(t).w_(e)}function o_(t){t.H_=new n4({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.U_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),Ja(t).start(),t.j_.B_()}function a_(t){return To(t)&&!Ja(t).u_()&&t.U_.size>0}function To(t){return Me(t).W_.size===0}function Lk(t){t.H_=void 0}async function uF(t){t.j_.set("Online")}async function cF(t){t.U_.forEach((e,r)=>{s_(t,e)})}async function dF(t,e){Lk(t),a_(t)?(t.j_.q_(e),o_(t)):t.j_.set("Unknown")}async function hF(t,e,r){if(t.j_.set("Online"),e instanceof _k&&e.state===2&&e.cause)try{await async function(s,o){const a=o.cause;for(const l of o.targetIds)s.U_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.U_.delete(l),s.H_.removeTarget(l))}(t,e)}catch(i){ge(mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Lh(t,i)}else if(e instanceof Fd?t.H_.We(e):e instanceof yk?t.H_.Ze(e):t.H_.je(e),!r.isEqual(Re.min()))try{const i=await Pk(t.localStore);r.compareTo(i)>=0&&await function(o,a){const l=o.H_.ot(a);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=o.U_.get(c);h&&o.U_.set(c,h.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,c)=>{const h=o.U_.get(u);if(!h)return;o.U_.set(u,h.withResumeToken(hn.EMPTY_BYTE_STRING,h.snapshotVersion)),Mk(o,u);const f=new ss(h.target,u,c,h.sequenceNumber);s_(o,f)}),o.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(i){ge(mo,"Failed to raise snapshot:",i),await Lh(t,i)}}async function Lh(t,e,r){if(!Qa(e))throw e;t.W_.add(1),await rc(t),t.j_.set("Offline"),r||(r=()=>Pk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ge(mo,"Retrying IndexedDB access"),await r(),t.W_.delete(1),await Mf(t)})}function Ok(t,e){return e().catch(r=>Lh(t,r,e))}async function Lf(t){const e=Me(t),r=Ps(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:Hy;for(;fF(e);)try{const s=await K4(e.localStore,i);if(s===null){e.K_.length===0&&r.P_();break}i=s.batchId,pF(e,s)}catch(s){await Lh(e,s)}jk(e)&&Vk(e)}function fF(t){return To(t)&&t.K_.length<10}function pF(t,e){t.K_.push(e);const r=Ps(t);r.c_()&&r.S_&&r.b_(e.mutations)}function jk(t){return To(t)&&!Ps(t).u_()&&t.K_.length>0}function Vk(t){Ps(t).start()}async function mF(t){Ps(t).C_()}async function gF(t){const e=Ps(t);for(const r of t.K_)e.b_(r.mutations)}async function vF(t,e,r){const i=t.K_.shift(),s=Qy.from(i,e,r);await Ok(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Lf(t)}async function yF(t,e){e&&Ps(t).S_&&await async function(i,s){if(function(a){return ZV(a)&&a!==ne.ABORTED}(s.code)){const o=i.K_.shift();Ps(i).h_(),await Ok(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Lf(i)}}(t,e),jk(t)&&Vk(t)}async function lx(t,e){const r=Me(t);r.asyncQueue.verifyOperationInProgress(),ge(mo,"RemoteStore received new credentials");const i=To(r);r.W_.add(3),await rc(r),i&&r.j_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.W_.delete(3),await Mf(r)}async function _F(t,e){const r=Me(t);e?(r.W_.delete(2),await Mf(r)):e||(r.W_.add(2),await rc(r),r.j_.set("Unknown"))}function Ja(t){return t.J_||(t.J_=function(r,i,s){const o=Me(r);return o.M_(),new rF(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{xo:uF.bind(null,t),No:cF.bind(null,t),Lo:dF.bind(null,t),p_:hF.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),a_(t)?o_(t):t.j_.set("Unknown")):(await t.J_.stop(),Lk(t))})),t.J_}function Ps(t){return t.Y_||(t.Y_=function(r,i,s){const o=Me(r);return o.M_(),new iF(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:mF.bind(null,t),Lo:yF.bind(null,t),D_:gF.bind(null,t),v_:vF.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await Lf(t)):(await t.Y_.stop(),t.K_.length>0&&(ge(mo,`Stopping write stream with ${t.K_.length} pending writes`),t.K_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_{constructor(e,r,i,s,o){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,i,s,o){const a=Date.now()+i,l=new l_(e,r,a,s,o);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Te(ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function u_(t,e){if(Ai("AsyncQueue",`${e}: ${t}`),Qa(t))return new Te(ne.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pa{static emptySet(e){return new pa(e.comparator)}constructor(e){this.comparator=e?(r,i)=>e(r,i)||Ie.comparator(r.key,i.key):(r,i)=>Ie.comparator(r.key,i.key),this.keyedMap=Ul(),this.sortedSet=new At(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,i)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof pa)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const i=new pa;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=r,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux{constructor(){this.Z_=new At(Ie.comparator)}track(e){const r=e.doc.key,i=this.Z_.get(r);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(r,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(r,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(r,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(r,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(r):e.type===1&&i.type===2?this.Z_=this.Z_.insert(r,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(r,{type:2,doc:e.doc}):Ae():this.Z_=this.Z_.insert(r,e)}X_(){const e=[];return this.Z_.inorderTraversal((r,i)=>{e.push(i)}),e}}class Ra{constructor(e,r,i,s,o,a,l,u,c){this.query=e,this.docs=r,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,r,i,s,o){const a=[];return r.forEach(l=>{a.push({type:0,doc:l})}),new Ra(e,r,pa.emptySet(r),a,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,i=e.docChanges;if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==i[s].type||!r[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class bF{constructor(){this.queries=cx(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(r,i){const s=Me(r),o=s.queries;s.queries=cx(),o.forEach((a,l)=>{for(const u of l.ta)u.onError(i)})})(this,new Te(ne.ABORTED,"Firestore shutting down"))}}function cx(){return new Eo(t=>ik(t),Cf)}async function Fk(t,e){const r=Me(t);let i=3;const s=e.query;let o=r.queries.get(s);o?!o.na()&&e.ra()&&(i=2):(o=new wF,i=e.ra()?0:1);try{switch(i){case 0:o.ea=await r.onListen(s,!0);break;case 1:o.ea=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const l=u_(a,`Initialization of query '${$o(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,o),o.ta.push(e),e.sa(r.onlineState),o.ea&&e.oa(o.ea)&&c_(r)}async function Uk(t,e){const r=Me(t),i=e.query;let s=3;const o=r.queries.get(i);if(o){const a=o.ta.indexOf(e);a>=0&&(o.ta.splice(a,1),o.ta.length===0?s=e.ra()?0:1:!o.na()&&e.ra()&&(s=2))}switch(s){case 0:return r.queries.delete(i),r.onUnlisten(i,!0);case 1:return r.queries.delete(i),r.onUnlisten(i,!1);case 2:return r.onLastRemoteStoreUnlisten(i);default:return}}function xF(t,e){const r=Me(t);let i=!1;for(const s of e){const o=s.query,a=r.queries.get(o);if(a){for(const l of a.ta)l.oa(s)&&(i=!0);a.ea=s}}i&&c_(r)}function EF(t,e,r){const i=Me(t),s=i.queries.get(e);if(s)for(const o of s.ta)o.onError(r);i.queries.delete(e)}function c_(t){t.ia.forEach(e=>{e.next()})}var ev,dx;(dx=ev||(ev={}))._a="default",dx.Cache="cache";class Bk{constructor(e,r,i){this.query=e,this.aa=r,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Ra(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.ua?this.la(e)&&(this.aa.next(e),r=!0):this.ha(e,this.onlineState)&&(this.Pa(e),r=!0),this.ca=e,r}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let r=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),r=!0),r}ha(e,r){if(!e.fromCache||!this.ra())return!0;const i=r!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}la(e){if(e.docChanges.length>0)return!0;const r=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}Pa(e){e=Ra.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==ev.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e){this.key=e}}class zk{constructor(e){this.key=e}}class TF{constructor(e,r){this.query=e,this.fa=r,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=qe(),this.mutatedKeys=qe(),this.ya=sk(e),this.wa=new pa(this.ya)}get Sa(){return this.fa}ba(e,r){const i=r?r.Da:new ux,s=r?r.wa:this.wa;let o=r?r.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),g=Af(this.query,f)?f:null,b=!!p&&this.mutatedKeys.has(p.key),R=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let P=!1;p&&g?p.data.isEqual(g.data)?b!==R&&(i.track({type:3,doc:g}),P=!0):this.va(p,g)||(i.track({type:2,doc:g}),P=!0,(u&&this.ya(g,u)>0||c&&this.ya(g,c)<0)&&(l=!0)):!p&&g?(i.track({type:0,doc:g}),P=!0):p&&!g&&(i.track({type:1,doc:p}),P=!0,(u||c)&&(l=!0)),P&&(g?(a=a.add(g),o=R?o.add(h):o.delete(h)):(a=a.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),i.track({type:1,doc:h})}return{wa:a,Da:i,ls:l,mutatedKeys:o}}va(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,i,s){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const a=e.Da.X_();a.sort((h,f)=>function(g,b){const R=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae()}};return R(g)-R(b)}(h.type,f.type)||this.ya(h.doc,f.doc)),this.Ca(i),s=s!=null&&s;const l=r&&!s?this.Fa():[],u=this.pa.size===0&&this.current&&!s?1:0,c=u!==this.ga;return this.ga=u,a.length!==0||c?{snapshot:new Ra(this.query,e.wa,o,a,e.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new ux,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(r=>this.fa=this.fa.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.fa=this.fa.delete(r)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=qe(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const r=[];return e.forEach(i=>{this.pa.has(i)||r.push(new zk(i))}),this.pa.forEach(i=>{e.has(i)||r.push(new $k(i))}),r}Oa(e){this.fa=e.gs,this.pa=qe();const r=this.ba(e.documents);return this.applyChanges(r,!0)}Na(){return Ra.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const d_="SyncEngine";class SF{constructor(e,r,i){this.query=e,this.targetId=r,this.view=i}}class IF{constructor(e){this.key=e,this.Ba=!1}}class kF{constructor(e,r,i,s,o,a){this.localStore=e,this.remoteStore=r,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new Eo(l=>ik(l),Cf),this.qa=new Map,this.Qa=new Set,this.$a=new At(Ie.comparator),this.Ka=new Map,this.Ua=new e_,this.Wa={},this.Ga=new Map,this.za=Pa.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function CF(t,e,r=!0){const i=Yk(t);let s;const o=i.ka.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Na()):s=await Hk(i,e,r,!0),s}async function AF(t,e){const r=Yk(t);await Hk(r,e,!0,!1)}async function Hk(t,e,r,i){const s=await Y4(t.localStore,ti(e)),o=s.targetId,a=t.sharedClientState.addLocalQueryTarget(o,r);let l;return i&&(l=await PF(t,e,o,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&Dk(t.remoteStore,s),l}async function PF(t,e,r,i,s){t.Ha=(f,p,g)=>async function(R,P,x,_){let T=P.view.ba(x);T.ls&&(T=await rx(R.localStore,P.query,!1).then(({documents:D})=>P.view.ba(D,T)));const L=_&&_.targetChanges.get(P.targetId),F=_&&_.targetMismatches.get(P.targetId)!=null,V=P.view.applyChanges(T,R.isPrimaryClient,L,F);return fx(R,P.targetId,V.Ma),V.snapshot}(t,f,p,g);const o=await rx(t.localStore,e,!0),a=new TF(e,o.gs),l=a.ba(o.documents),u=nc.createSynthesizedTargetChangeForCurrentChange(r,i&&t.onlineState!=="Offline",s),c=a.applyChanges(l,t.isPrimaryClient,u);fx(t,r,c.Ma);const h=new SF(e,r,a);return t.ka.set(e,h),t.qa.has(r)?t.qa.get(r).push(e):t.qa.set(r,[e]),c.snapshot}async function RF(t,e,r){const i=Me(t),s=i.ka.get(e),o=i.qa.get(s.targetId);if(o.length>1)return i.qa.set(s.targetId,o.filter(a=>!Cf(a,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Jg(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),r&&i_(i.remoteStore,s.targetId),tv(i,s.targetId)}).catch(Xa)):(tv(i,s.targetId),await Jg(i.localStore,s.targetId,!0))}async function NF(t,e){const r=Me(t),i=r.ka.get(e),s=r.qa.get(i.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(i.targetId),i_(r.remoteStore,i.targetId))}async function DF(t,e,r){const i=UF(t);try{const s=await function(a,l){const u=Me(a),c=Ht.now(),h=l.reduce((g,b)=>g.add(b.key),qe());let f,p;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=Pi(),R=qe();return u.ds.getEntries(g,h).next(P=>{b=P,b.forEach((x,_)=>{_.isValidDocument()||(R=R.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,b)).next(P=>{f=P;const x=[];for(const _ of l){const T=KV(_,f.get(_.key).overlayedDocument);T!=null&&x.push(new Fs(_.key,T,QI(T.value.mapValue),ni.exists(!0)))}return u.mutationQueue.addMutationBatch(g,c,x,l)}).next(P=>{p=P;const x=P.applyToLocalDocumentSet(f,R);return u.documentOverlayCache.saveOverlays(g,P.batchId,x)})}).then(()=>({batchId:p.batchId,changes:ak(f)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let c=a.Wa[a.currentUser.toKey()];c||(c=new At(Ge)),c=c.insert(l,u),a.Wa[a.currentUser.toKey()]=c}(i,s.batchId,r),await ic(i,s.changes),await Lf(i.remoteStore)}catch(s){const o=u_(s,"Failed to persist write");r.reject(o)}}async function Wk(t,e){const r=Me(t);try{const i=await q4(r.localStore,e);e.targetChanges.forEach((s,o)=>{const a=r.Ka.get(o);a&&(rt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.Ba=!0:s.modifiedDocuments.size>0?rt(a.Ba):s.removedDocuments.size>0&&(rt(a.Ba),a.Ba=!1))}),await ic(r,i,e)}catch(i){await Xa(i)}}function hx(t,e,r){const i=Me(t);if(i.isPrimaryClient&&r===0||!i.isPrimaryClient&&r===1){const s=[];i.ka.forEach((o,a)=>{const l=a.view.sa(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=Me(a);u.onlineState=l;let c=!1;u.queries.forEach((h,f)=>{for(const p of f.ta)p.sa(l)&&(c=!0)}),c&&c_(u)}(i.eventManager,e),s.length&&i.La.p_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function MF(t,e,r){const i=Me(t);i.sharedClientState.updateQueryState(e,"rejected",r);const s=i.Ka.get(e),o=s&&s.key;if(o){let a=new At(Ie.comparator);a=a.insert(o,xn.newNoDocument(o,Re.min()));const l=qe().add(o),u=new Nf(Re.min(),new Map,new At(Ge),a,l);await Wk(i,u),i.$a=i.$a.remove(o),i.Ka.delete(e),h_(i)}else await Jg(i.localStore,e,!1).then(()=>tv(i,e,r)).catch(Xa)}async function LF(t,e){const r=Me(t),i=e.batch.batchId;try{const s=await W4(r.localStore,e);Gk(r,i,null),qk(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),await ic(r,s)}catch(s){await Xa(s)}}async function OF(t,e,r){const i=Me(t);try{const s=await function(a,l){const u=Me(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,l).next(f=>(rt(f!==null),h=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(i.localStore,e);Gk(i,e,r),qk(i,e),i.sharedClientState.updateMutationState(e,"rejected",r),await ic(i,s)}catch(s){await Xa(s)}}function qk(t,e){(t.Ga.get(e)||[]).forEach(r=>{r.resolve()}),t.Ga.delete(e)}function Gk(t,e,r){const i=Me(t);let s=i.Wa[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(r?o.reject(r):o.resolve(),s=s.remove(e)),i.Wa[i.currentUser.toKey()]=s}}function tv(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.qa.get(e))t.ka.delete(i),r&&t.La.Ja(i,r);t.qa.delete(e),t.isPrimaryClient&&t.Ua.br(e).forEach(i=>{t.Ua.containsKey(i)||Kk(t,i)})}function Kk(t,e){t.Qa.delete(e.path.canonicalString());const r=t.$a.get(e);r!==null&&(i_(t.remoteStore,r),t.$a=t.$a.remove(e),t.Ka.delete(r),h_(t))}function fx(t,e,r){for(const i of r)i instanceof $k?(t.Ua.addReference(i.key,e),jF(t,i)):i instanceof zk?(ge(d_,"Document no longer in limbo: "+i.key),t.Ua.removeReference(i.key,e),t.Ua.containsKey(i.key)||Kk(t,i.key)):Ae()}function jF(t,e){const r=e.key,i=r.path.canonicalString();t.$a.get(r)||t.Qa.has(i)||(ge(d_,"New document in limbo: "+r),t.Qa.add(i),h_(t))}function h_(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const r=new Ie(bt.fromString(e)),i=t.za.next();t.Ka.set(i,new IF(r)),t.$a=t.$a.insert(r,i),Dk(t.remoteStore,new ss(ti(Yy(r.path)),i,"TargetPurposeLimboResolution",Tf.ae))}}async function ic(t,e,r){const i=Me(t),s=[],o=[],a=[];i.ka.isEmpty()||(i.ka.forEach((l,u)=>{a.push(i.Ha(u,e,r).then(c=>{var h;if((c||r)&&i.isPrimaryClient){const f=c?!c.fromCache:(h=r==null?void 0:r.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){s.push(c);const f=n_.Yi(u.targetId,c);o.push(f)}}))}),await Promise.all(a),i.La.p_(s),await async function(u,c){const h=Me(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>ee.forEach(c,p=>ee.forEach(p.Hi,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>ee.forEach(p.Ji,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!Qa(f))throw f;ge(r_,"Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const g=h.Ts.get(p),b=g.snapshotVersion,R=g.withLastLimboFreeSnapshotVersion(b);h.Ts=h.Ts.insert(p,R)}}}(i.localStore,o))}async function VF(t,e){const r=Me(t);if(!r.currentUser.isEqual(e)){ge(d_,"User change. New user:",e.toKey());const i=await Ak(r.localStore,e);r.currentUser=e,function(o,a){o.Ga.forEach(l=>{l.forEach(u=>{u.reject(new Te(ne.CANCELLED,a))})}),o.Ga.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ic(r,i.Rs)}}function FF(t,e){const r=Me(t),i=r.Ka.get(e);if(i&&i.Ba)return qe().add(i.key);{let s=qe();const o=r.qa.get(e);if(!o)return s;for(const a of o){const l=r.ka.get(a);s=s.unionWith(l.view.Sa)}return s}}function Yk(t){const e=Me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Wk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=FF.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=MF.bind(null,e),e.La.p_=xF.bind(null,e.eventManager),e.La.Ja=EF.bind(null,e.eventManager),e}function UF(t){const e=Me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=OF.bind(null,e),e}class Oh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Df(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,r){return null}nu(e,r){return null}eu(e){return H4(this.persistence,new B4,e.initialUser,this.serializer)}Xa(e){return new Ck(t_.ri,this.serializer)}Za(e){return new Q4}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Oh.provider={build:()=>new Oh};class BF extends Oh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,r){rt(this.persistence.referenceDelegate instanceof Mh);const i=this.persistence.referenceDelegate.garbageCollector;return new I4(i,e.asyncQueue,r)}Xa(e){const r=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new Ck(i=>Mh.ri(i,r),this.serializer)}}class nv{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>hx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=VF.bind(null,this.syncEngine),await _F(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new bF}()}createDatastore(e){const r=Df(e.databaseInfo.databaseId),i=function(o){return new nF(o)}(e.databaseInfo);return function(o,a,l,u){return new oF(o,a,l,u)}(e.authCredentials,e.appCheckCredentials,i,r)}createRemoteStore(e){return function(i,s,o,a,l){return new lF(i,s,o,a,l)}(this.localStore,this.datastore,e.asyncQueue,r=>hx(this.syncEngine,r,0),function(){return ox.D()?new ox:new J4}())}createSyncEngine(e,r){return function(s,o,a,l,u,c,h){const f=new kF(s,o,a,l,u,c);return h&&(f.ja=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const o=Me(s);ge(mo,"RemoteStore shutting down."),o.W_.add(5),await rc(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}nv.provider={build:()=>new nv};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Ai("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs="FirestoreClient";class $F{constructor(e,r,i,s,o){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=i,this.databaseInfo=s,this.user=wn.UNAUTHENTICATED,this.clientId=BI.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{ge(Rs,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(ge(Rs,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=u_(r,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function am(t,e){t.asyncQueue.verifyOperationInProgress(),ge(Rs,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let i=r.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await Ak(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function px(t,e){t.asyncQueue.verifyOperationInProgress();const r=await zF(t);ge(Rs,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(i=>lx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>lx(e.remoteStore,s)),t._onlineComponents=e}async function zF(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ge(Rs,"Using user provided OfflineComponentProvider");try{await am(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===ne.FAILED_PRECONDITION||s.code===ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Ia("Error using user provided cache. Falling back to memory cache: "+r),await am(t,new Oh)}}else ge(Rs,"Using default OfflineComponentProvider"),await am(t,new BF(void 0));return t._offlineComponents}async function Qk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ge(Rs,"Using user provided OnlineComponentProvider"),await px(t,t._uninitializedComponentsProvider._online)):(ge(Rs,"Using default OnlineComponentProvider"),await px(t,new nv))),t._onlineComponents}function HF(t){return Qk(t).then(e=>e.syncEngine)}async function Jk(t){const e=await Qk(t),r=e.eventManager;return r.onListen=CF.bind(null,e.syncEngine),r.onUnlisten=RF.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=AF.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=NF.bind(null,e.syncEngine),r}function WF(t,e,r={}){const i=new xi;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,l,u,c){const h=new Xk({next:p=>{h.su(),a.enqueueAndForget(()=>Uk(o,f));const g=p.docs.has(l);!g&&p.fromCache?c.reject(new Te(ne.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&u&&u.source==="server"?c.reject(new Te(ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new Bk(Yy(l.path),h,{includeMetadataChanges:!0,Ta:!0});return Fk(o,f)}(await Jk(t),t.asyncQueue,e,r,i)),i.promise}function qF(t,e,r={}){const i=new xi;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,l,u,c){const h=new Xk({next:p=>{h.su(),a.enqueueAndForget(()=>Uk(o,f)),p.fromCache&&u.source==="server"?c.reject(new Te(ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new Bk(l,h,{includeMetadataChanges:!0,Ta:!0});return Fk(o,f)}(await Jk(t),t.asyncQueue,e,r,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eC(t,e,r){if(!r)throw new Te(ne.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function GF(t,e,r,i){if(e===!0&&i===!0)throw new Te(ne.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function gx(t){if(!Ie.isDocumentKey(t))throw new Te(ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function vx(t){if(Ie.isDocumentKey(t))throw new Te(ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function f_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ae()}function Ri(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Te(ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=f_(t);throw new Te(ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="firestore.googleapis.com",yx=!0;class _x{constructor(e){var r,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Te(ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tC,this.ssl=yx}else this.host=e.host,this.ssl=(r=e.ssl)!==null&&r!==void 0?r:yx;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=kk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<T4)throw new Te(ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}GF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zk((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Te(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Te(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Te(ne.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Of{constructor(e,r,i,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new _x({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Te(ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Te(ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new _x(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Zj;switch(i.type){case"firstParty":return new rV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Te(ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const i=mx.get(r);i&&(ge("ComponentProvider","Removing Datastore"),mx.delete(r),i.terminate())}(this),Promise.resolve()}}function KF(t,e,r,i={}){var s;const o=(t=Ri(t,Of))._getSettings(),a=`${e}:${r}`;if(o.host!==tC&&o.host!==a&&Ia("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let l,u;if(typeof i.mockUserToken=="string")l=i.mockUserToken,u=wn.MOCK_USER;else{l=fM(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Te(ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new wn(c)}t._authCredentials=new eV(new UI(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,r,i){this.converter=r,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new jf(this.firestore,e,this._query)}}class Wn{constructor(e,r,i){this.converter=r,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class _s extends jf{constructor(e,r,i){super(e,r,Yy(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new Ie(e))}withConverter(e){return new _s(this.firestore,e,this._path)}}function Ot(t,e,...r){if(t=dn(t),eC("collection","path",e),t instanceof Of){const i=bt.fromString(e,...r);return vx(i),new _s(t,null,i)}{if(!(t instanceof Wn||t instanceof _s))throw new Te(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(bt.fromString(e,...r));return vx(i),new _s(t.firestore,null,i)}}function Ns(t,e,...r){if(t=dn(t),arguments.length===1&&(e=BI.newId()),eC("doc","path",e),t instanceof Of){const i=bt.fromString(e,...r);return gx(i),new Wn(t,null,new Ie(i))}{if(!(t instanceof Wn||t instanceof _s))throw new Te(ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(bt.fromString(e,...r));return gx(i),new Wn(t.firestore,t instanceof _s?t.converter:null,new Ie(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx="AsyncQueue";class bx{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new Rk(this,"async_queue_retry"),this.Su=()=>{const i=om();i&&ge(wx,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=e;const r=om();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const r=om();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const r=new xi;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Qa(e))throw e;ge(wx,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const r=this.bu.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(i);throw Ai("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.pu=!1,i))));return this.bu=r,r}enqueueAfterDelay(e,r,i){this.Du(),this.wu.indexOf(e)>-1&&(r=0);const s=l_.createAndSchedule(this,e,r,i,o=>this.Fu(o));return this.fu.push(s),s}Du(){this.gu&&Ae()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const r of this.fu)if(r.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((r,i)=>r.targetTimeMs-i.targetTimeMs);for(const r of this.fu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const r=this.fu.indexOf(e);this.fu.splice(r,1)}}class sc extends Of{constructor(e,r,i,s){super(e,r,i,s),this.type="firestore",this._queue=new bx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new bx(e),this._firestoreClient=void 0,await e}}}function YF(t,e){const r=typeof t=="object"?t:Q1(),i=typeof t=="string"?t:kh,s=Dy(r,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=dM("firestore");o&&KF(s,...o)}return s}function p_(t){if(t._terminated)throw new Te(ne.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||XF(t),t._firestoreClient}function XF(t){var e,r,i;const s=t._freezeSettings(),o=function(l,u,c,h){return new vV(l,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Zk(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new $F(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Na(hn.fromBase64String(e))}catch(r){throw new Te(ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Na(hn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Te(ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new an(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Te(ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Te(ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ge(this._lat,e._lat)||Ge(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v_{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QF=/^__.*__$/;class JF{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return this.fieldMask!==null?new Fs(e,this.data,this.fieldMask,r,this.fieldTransforms):new tc(e,this.data,r,this.fieldTransforms)}}class nC{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return new Fs(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function rC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae()}}class y_{constructor(e,r,i,s,o,a){this.settings=e,this.databaseId=r,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new y_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var r;const i=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.ku({path:i,Qu:!1});return s.$u(e),s}Ku(e){var r;const i=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.ku({path:i,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return jh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(rC(this.Lu)&&QF.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class ZF{constructor(e,r,i){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=i||Df(e)}ju(e,r,i,s=!1){return new y_({Lu:e,methodName:r,zu:i,path:an.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function iC(t){const e=t._freezeSettings(),r=Df(t._databaseId);return new ZF(t._databaseId,!!e.ignoreUndefinedProperties,r)}function e3(t,e,r,i,s,o={}){const a=t.ju(o.merge||o.mergeFields?2:0,e,r,s);__("Data must be an object, but it was:",a,i);const l=sC(i,a);let u,c;if(o.merge)u=new Qn(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){const h=[];for(const f of o.mergeFields){const p=rv(e,f,r);if(!a.contains(p))throw new Te(ne.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);aC(h,p)||h.push(p)}u=new Qn(h),c=a.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=a.fieldTransforms;return new JF(new Un(l),u,c)}class Ff extends m_{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ff}}function t3(t,e,r,i){const s=t.ju(1,e,r);__("Data must be an object, but it was:",s,i);const o=[],a=Un.empty();Vs(i,(u,c)=>{const h=w_(e,u,r);c=dn(c);const f=s.Ku(h);if(c instanceof Ff)o.push(h);else{const p=Uf(c,f);p!=null&&(o.push(h),a.set(h,p))}});const l=new Qn(o);return new nC(a,l,s.fieldTransforms)}function n3(t,e,r,i,s,o){const a=t.ju(1,e,r),l=[rv(e,i,r)],u=[s];if(o.length%2!=0)throw new Te(ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<o.length;p+=2)l.push(rv(e,o[p])),u.push(o[p+1]);const c=[],h=Un.empty();for(let p=l.length-1;p>=0;--p)if(!aC(c,l[p])){const g=l[p];let b=u[p];b=dn(b);const R=a.Ku(g);if(b instanceof Ff)c.push(g);else{const P=Uf(b,R);P!=null&&(c.push(g),h.set(g,P))}}const f=new Qn(c);return new nC(h,f,a.fieldTransforms)}function Uf(t,e){if(oC(t=dn(t)))return __("Unsupported field value:",e,t),sC(t,e);if(t instanceof m_)return function(i,s){if(!rC(s.Lu))throw s.Wu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,s){const o=[];let a=0;for(const l of i){let u=Uf(l,s.Uu(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,s){if((i=dn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return $V(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=Ht.fromDate(i);return{timestampValue:Dh(s.serializer,o)}}if(i instanceof Ht){const o=new Ht(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Dh(s.serializer,o)}}if(i instanceof g_)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Na)return{bytesValue:wk(s.serializer,i._byteString)};if(i instanceof Wn){const o=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw s.Wu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Zy(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof v_)return function(a,l){return{mapValue:{fields:{[YI]:{stringValue:XI},[Ch]:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw l.Wu("VectorValues must only contain numeric values.");return Xy(l.serializer,c)})}}}}}}(i,s);throw s.Wu(`Unsupported field value: ${f_(i)}`)}(t,e)}function sC(t,e){const r={};return zI(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vs(t,(i,s)=>{const o=Uf(s,e.qu(i));o!=null&&(r[i]=o)}),{mapValue:{fields:r}}}function oC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ht||t instanceof g_||t instanceof Na||t instanceof Wn||t instanceof m_||t instanceof v_)}function __(t,e,r){if(!oC(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const i=f_(r);throw i==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+i)}}function rv(t,e,r){if((e=dn(e))instanceof Vf)return e._internalPath;if(typeof e=="string")return w_(t,e);throw jh("Field path arguments must be of type string or ",t,!1,void 0,r)}const r3=new RegExp("[~\\*/\\[\\]]");function w_(t,e,r){if(e.search(r3)>=0)throw jh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Vf(...e.split("."))._internalPath}catch{throw jh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function jh(t,e,r,i,s){const o=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new Te(ne.INVALID_ARGUMENT,l+t+u)}function aC(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,r,i,s,o){this._firestore=e,this._userDataWriter=r,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new i3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(uC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class i3 extends lC{data(){return super.data()}}function uC(t,e){return typeof e=="string"?w_(t,e):e instanceof Vf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Te(ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class o3{convertValue(e,r="none"){switch(As(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const i={};return Vs(e,(s,o)=>{i[s]=this.convertValue(o,r)}),i}convertVectorValue(e){var r,i,s;const o=(s=(i=(r=e.fields)===null||r===void 0?void 0:r[Ch].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(a=>Mt(a.doubleValue));return new v_(o)}convertGeoPoint(e){return new g_(Mt(e.latitude),Mt(e.longitude))}convertArray(e,r){return(e.values||[]).map(i=>this.convertValue(i,r))}convertServerTimestamp(e,r){switch(r){case"previous":const i=If(e);return i==null?null:this.convertValue(i,r);case"estimate":return this.convertTimestamp(Pu(e));default:return null}}convertTimestamp(e){const r=ks(e);return new Ht(r.seconds,r.nanos)}convertDocumentKey(e,r){const i=bt.fromString(e);rt(Ik(i));const s=new Ru(i.get(1),i.get(3)),o=new Ie(i.popFirst(5));return s.isEqual(r)||Ai(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(t,e,r){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class cC extends lC{constructor(e,r,i,s,o,a){super(e,r,i,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Ud(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const i=this._document.data.field(uC("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}}}class Ud extends cC{data(e={}){return super.data(e)}}class l3{constructor(e,r,i,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new $l(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(i=>{e.call(r,new Ud(this._firestore,this._userDataWriter,i.key,i,new $l(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Te(ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new Ud(s._firestore,s._userDataWriter,l.doc.key,l.doc,new $l(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const u=new Ud(s._firestore,s._userDataWriter,l.doc.key,l.doc,new $l(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return l.type!==0&&(c=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:u3(l.type),doc:u,oldIndex:c,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function u3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iv(t){t=Ri(t,Wn);const e=Ri(t.firestore,sc);return WF(p_(e),t._key).then(r=>c3(e,t,r))}class dC extends o3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Na(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,r)}}function Bt(t){t=Ri(t,jf);const e=Ri(t.firestore,sc),r=p_(e),i=new dC(e);return s3(t._query),qF(r,t._query).then(s=>new l3(e,i,t,s))}function xx(t,e,r){t=Ri(t,Wn);const i=Ri(t.firestore,sc),s=a3(t.converter,e);return hC(i,[e3(iC(i),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,ni.none())])}function sv(t,e,r,...i){t=Ri(t,Wn);const s=Ri(t.firestore,sc),o=iC(s);let a;return a=typeof(e=dn(e))=="string"||e instanceof Vf?n3(o,"updateDoc",t._key,e,r,i):t3(o,"updateDoc",t._key,e),hC(s,[a.toMutation(t._key,ni.exists(!0))])}function hC(t,e){return function(i,s){const o=new xi;return i.asyncQueue.enqueueAndForget(async()=>DF(await HF(i),s,o)),o.promise}(p_(t),e)}function c3(t,e,r){const i=r.docs.get(e._key),s=new dC(t);return new cC(t,s,e._key,i,new $l(r.hasPendingWrites,r.fromCache),e.converter)}(function(e,r=!0){(function(s){Ya=s})(qa),Ta(new ho("firestore",(i,{instanceIdentifier:s,options:o})=>{const a=i.getProvider("app").getImmediate(),l=new sc(new tV(i.getProvider("auth-internal")),new iV(a,i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Te(ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ru(c.options.projectId,h)}(a,s),a);return o=Object.assign({useFetchStreams:r},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),gs(Cb,Ab,e),gs(Cb,Ab,"esm2017")})();const d3={apiKey:"AIzaSyDGolxlZNoEzk7z46ZMtSk9YsP32MlH45Q",authDomain:"llm-hyper-audio.firebaseapp.com",projectId:"llm-hyper-audio",storageBucket:"llm-hyper-audio.firebasestorage.app",messagingSenderId:"530304773274",appId:"1:530304773274:web:1764f58974d6c2fd060323",measurementId:"G-HFEKE65YC6"},fC=X1(d3),dt=YF(fC),lm=Yj(fC),pC=N.createContext();function oc(){const t=N.useContext(pC);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function h3({children:t}){const[e,r]=N.useState(null),[i,s]=N.useState(!0),[o,a]=N.useState(null);N.useEffect(()=>{console.log("Setting up auth listener");const h=jO(lm,f=>{console.log("Auth state changed:",f?f.email:"No user"),r(f),s(!1)},f=>{console.error("Auth state change error:",f),a(f.message),s(!1)});return()=>h()},[]);const c={user:e,loading:i,error:o,login:async(h,f)=>{try{a(null),console.log("Attempting login with:",h);const p=await MO(lm,h,f);return r(p.user),p.user}catch(p){throw console.error("Login error:",p),a(p.message),p}},logout:async()=>{try{a(null),console.log("Logging out user"),await VO(lm),r(null)}catch(h){throw console.error("Logout error:",h),a(h.message),h}},isAuthenticated:!!e};return m.jsx(pC.Provider,{value:c,children:t})}const f3=N.createContext();function p3({children:t}){const[e,r]=N.useState(null),[i,s]=N.useState([]),[o,a]=N.useState(!1),[l,u]=N.useState(0),x={currentVideo:e,setCurrentVideo:r,playlist:i,setPlaylist:s,isPlaying:o,setIsPlaying:a,currentTime:l,setCurrentTime:u,addToPlaylist:_=>{s(T=>[...T,_])},removeFromPlaylist:_=>{s(T=>T.filter(L=>L.id!==_))},clearPlaylist:()=>{s([]),r(null)},playVideo:_=>{r(_),a(!0)},pauseVideo:()=>{a(!1)},nextVideo:()=>{const _=i.findIndex(T=>T.id===(e==null?void 0:e.id));_<i.length-1&&r(i[_+1])},previousVideo:()=>{const _=i.findIndex(T=>T.id===(e==null?void 0:e.id));_>0&&r(i[_-1])},updatePlaylistOrder:_=>{s(_)}};return m.jsx(f3.Provider,{value:x,children:t})}/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mC=(...t)=>t.filter((e,r,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var g3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=N.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:s="",children:o,iconNode:a,...l},u)=>N.createElement("svg",{ref:u,...g3,width:e,height:e,stroke:t,strokeWidth:i?Number(r)*24/Number(e):r,className:mC("lucide",s),...l},[...a.map(([c,h])=>N.createElement(c,h)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=(t,e)=>{const r=N.forwardRef(({className:i,...s},o)=>N.createElement(v3,{ref:o,iconNode:e,className:mC(`lucide-${m3(t)}`,i),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],_3=ar("ChevronDown",y3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],b3=ar("ChevronRight",w3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],E3=ar("ChevronUp",x3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],b_=ar("Clock",T3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],gC=ar("FileText",S3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],k3=ar("House",I3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],A3=ar("List",C3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],R3=ar("LogOut",P3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],D3=ar("Menu",N3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M3=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],vC=ar("Search",M3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],x_=ar("Tag",L3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Ex=ar("Upload",O3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],V3=ar("X",j3);function F3(){const{user:t,logout:e}=oc(),r=Ir(),[i,s]=N.useState(!1),o=()=>{s(!i)},a=[{path:"/",label:"Home",icon:m.jsx(k3,{size:20})},{path:"/content-directory",label:"Directory",icon:m.jsx(A3,{size:20})},{path:"/transcript-summary",label:"Summarizer",icon:m.jsx(gC,{size:20})}],l=u=>r.pathname===u;return m.jsxs(m.Fragment,{children:[m.jsx("button",{className:"fixed top-4 left-4 w-12 h-12 rounded-lg bg-white border-none shadow-sm cursor-pointer flex justify-center items-center text-gray-600 z-[51] transition-colors duration-200 ease-in-out",onClick:o,children:m.jsx(D3,{size:24})}),m.jsx("div",{className:`fixed inset-0 z-[49] transition-opacity duration-300 ease-in-out ${i?"pointer-events-auto":"pointer-events-none"}`,onClick:o}),m.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-white border-r border-gray-200 shadow-lg transition-transform duration-300 ease-in-out z-50 flex flex-col p-4 ${i?"translate-x-0":"-translate-x-full"}`,children:[m.jsx("button",{className:"absolute top-4 right-4 p-2 rounded-md bg-gray-100 border-none cursor-pointer flex justify-center items-center text-gray-600",onClick:o,children:m.jsx(V3,{size:20})}),m.jsxs("div",{className:"flex-1 overflow-auto mt-10",children:[m.jsxs("div",{children:[a.map(u=>m.jsxs(vh,{to:u.path,className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l(u.path)?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[m.jsx("span",{className:"flex mr-3 text-inherit",children:u.icon}),m.jsx("span",{children:u.label})]},u.path)),m.jsxs(vh,{to:"/search",className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l("/search")?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[m.jsx("span",{className:"flex mr-3 text-inherit",children:m.jsx(vC,{size:20})}),m.jsx("span",{children:"Search"})]})]}),m.jsx("div",{className:"h-px bg-gray-200 my-4"}),m.jsx("div",{children:t&&m.jsxs("button",{onClick:()=>{e(),s(!1)},className:"flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out text-gray-500 font-normal w-full text-left border-none bg-transparent",children:[m.jsx("span",{className:"flex mr-3 text-inherit",children:m.jsx(R3,{size:20})}),m.jsx("span",{children:"Logout"})]})})]})]})]})}function Wi({children:t}){const{loading:e}=oc();return e?m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):m.jsxs("div",{className:"flex flex-row h-screen w-full overflow-hidden bg-white",children:[m.jsx("div",{className:"flex-none w-16",children:m.jsx(F3,{})}),m.jsx("div",{className:"flex-grow overflow-y-auto",children:m.jsx("main",{className:"py-6 px-6 w-full",children:t})})]})}function qi({children:t}){const{user:e,loading:r}=oc(),i=Ir();return r?m.jsx("div",{className:"flex justify-center items-center min-h-screen",children:m.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):e?t:m.jsx(j1,{to:"/login",state:{from:i},replace:!0})}var yC={exports:{}},U3="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",B3=U3,$3=B3;function _C(){}function wC(){}wC.resetWarningCache=_C;var z3=function(){function t(i,s,o,a,l,u){if(u!==$3){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:wC,resetWarningCache:_C};return r.PropTypes=r,r};yC.exports=z3();var H3=yC.exports;const lt=Ua(H3);var bC={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var o="",a=0;a<arguments.length;a++){var l=arguments[a];l&&(o=s(o,i(l)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return r.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var l in o)e.call(o,l)&&o[l]&&(a=s(a,l));return a}function s(o,a){return a?o?o+" "+a:o+a:o}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(bC);var W3=bC.exports;const xC=Ua(W3);var q3=["top","left","transform","className","children","innerRef"];function ov(){return ov=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ov.apply(this,arguments)}function G3(t,e){if(t==null)return{};var r={},i=Object.keys(t),s,o;for(o=0;o<i.length;o++)s=i[o],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function Vh(t){var e=t.top,r=e===void 0?0:e,i=t.left,s=i===void 0?0:i,o=t.transform,a=t.className,l=t.children,u=t.innerRef,c=G3(t,q3);return Be.createElement("g",ov({ref:u,className:xC("visx-group",a),transform:o||"translate("+s+", "+r+")"},c),l)}Vh.propTypes={top:lt.number,left:lt.number,transform:lt.string,className:lt.string,children:lt.node,innerRef:lt.oneOfType([lt.string,lt.func,lt.object])};var K3=Array.prototype.slice;function Y3(t){for(var e=t.length,r,i;e;)i=Math.random()*e--|0,r=t[e],t[e]=t[i],t[i]=r;return t}function X3(t){for(var e=0,r=(t=Y3(K3.call(t))).length,i=[],s,o;e<r;)s=t[e],o&&EC(o,s)?++e:(o=J3(i=Q3(i,s)),e=0);return o}function Q3(t,e){var r,i;if(um(e,t))return[e];for(r=0;r<t.length;++r)if(ld(e,t[r])&&um(zl(t[r],e),t))return[t[r],e];for(r=0;r<t.length-1;++r)for(i=r+1;i<t.length;++i)if(ld(zl(t[r],t[i]),e)&&ld(zl(t[r],e),t[i])&&ld(zl(t[i],e),t[r])&&um(TC(t[r],t[i],e),t))return[t[r],t[i],e];throw new Error}function ld(t,e){var r=t.r-e.r,i=e.x-t.x,s=e.y-t.y;return r<0||r*r<i*i+s*s}function EC(t,e){var r=t.r-e.r+1e-6,i=e.x-t.x,s=e.y-t.y;return r>0&&r*r>i*i+s*s}function um(t,e){for(var r=0;r<e.length;++r)if(!EC(t,e[r]))return!1;return!0}function J3(t){switch(t.length){case 1:return Z3(t[0]);case 2:return zl(t[0],t[1]);case 3:return TC(t[0],t[1],t[2])}}function Z3(t){return{x:t.x,y:t.y,r:t.r}}function zl(t,e){var r=t.x,i=t.y,s=t.r,o=e.x,a=e.y,l=e.r,u=o-r,c=a-i,h=l-s,f=Math.sqrt(u*u+c*c);return{x:(r+o+u/f*h)/2,y:(i+a+c/f*h)/2,r:(f+s+l)/2}}function TC(t,e,r){var i=t.x,s=t.y,o=t.r,a=e.x,l=e.y,u=e.r,c=r.x,h=r.y,f=r.r,p=i-a,g=i-c,b=s-l,R=s-h,P=u-o,x=f-o,_=i*i+s*s-o*o,T=_-a*a-l*l+u*u,L=_-c*c-h*h+f*f,F=g*b-p*R,V=(b*L-R*T)/(F*2)-i,D=(R*P-b*x)/F,I=(g*T-p*L)/(F*2)-s,E=(p*x-g*P)/F,w=D*D+E*E-1,y=2*(o+V*D+I*E),C=V*V+I*I-o*o,A=-(w?(y+Math.sqrt(y*y-4*w*C))/(2*w):C/y);return{x:i+V+D*A,y:s+I+E*A,r:A}}function Tx(t,e,r){var i=t.x-e.x,s,o,a=t.y-e.y,l,u,c=i*i+a*a;c?(o=e.r+r.r,o*=o,u=t.r+r.r,u*=u,o>u?(s=(c+u-o)/(2*c),l=Math.sqrt(Math.max(0,u/c-s*s)),r.x=t.x-s*i-l*a,r.y=t.y-s*a+l*i):(s=(c+o-u)/(2*c),l=Math.sqrt(Math.max(0,o/c-s*s)),r.x=e.x+s*i-l*a,r.y=e.y+s*a+l*i)):(r.x=e.x+r.r,r.y=e.y)}function Sx(t,e){var r=t.r+e.r-1e-6,i=e.x-t.x,s=e.y-t.y;return r>0&&r*r>i*i+s*s}function Ix(t){var e=t._,r=t.next._,i=e.r+r.r,s=(e.x*r.r+r.x*e.r)/i,o=(e.y*r.r+r.y*e.r)/i;return s*s+o*o}function ud(t){this._=t,this.next=null,this.previous=null}function e6(t){if(!(s=t.length))return 0;var e,r,i,s,o,a,l,u,c,h,f;if(e=t[0],e.x=0,e.y=0,!(s>1))return e.r;if(r=t[1],e.x=-r.r,r.x=e.r,r.y=0,!(s>2))return e.r+r.r;Tx(r,e,i=t[2]),e=new ud(e),r=new ud(r),i=new ud(i),e.next=i.previous=r,r.next=e.previous=i,i.next=r.previous=e;e:for(l=3;l<s;++l){Tx(e._,r._,i=t[l]),i=new ud(i),u=r.next,c=e.previous,h=r._.r,f=e._.r;do if(h<=f){if(Sx(u._,i._)){r=u,e.next=r,r.previous=e,--l;continue e}h+=u._.r,u=u.next}else{if(Sx(c._,i._)){e=c,e.next=r,r.previous=e,--l;continue e}f+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=e,i.next=r,e.next=r.previous=r=i,o=Ix(e);(i=i.next)!==r;)(a=Ix(i))<o&&(e=i,o=a);r=e.next}for(e=[r._],i=r;(i=i.next)!==r;)e.push(i._);for(i=X3(e),l=0;l<s;++l)e=t[l],e.x-=i.x,e.y-=i.y;return i.r}function t6(t){return t==null?null:n6(t)}function n6(t){if(typeof t!="function")throw new Error;return t}function kx(){return 0}function r6(t){return function(){return t}}function i6(t){return Math.sqrt(t.value)}function s6(){var t=null,e=1,r=1,i=kx;function s(o){return o.x=e/2,o.y=r/2,t?o.eachBefore(Cx(t)).eachAfter(cm(i,.5)).eachBefore(Ax(1)):o.eachBefore(Cx(i6)).eachAfter(cm(kx,1)).eachAfter(cm(i,o.r/Math.min(e,r))).eachBefore(Ax(Math.min(e,r)/(2*o.r))),o}return s.radius=function(o){return arguments.length?(t=t6(o),s):t},s.size=function(o){return arguments.length?(e=+o[0],r=+o[1],s):[e,r]},s.padding=function(o){return arguments.length?(i=typeof o=="function"?o:r6(+o),s):i},s}function Cx(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function cm(t,e){return function(r){if(i=r.children){var i,s,o=i.length,a=t(r)*e||0,l;if(a)for(s=0;s<o;++s)i[s].r+=a;if(l=e6(i),a)for(s=0;s<o;++s)i[s].r-=a;r.r=l+a}}}function Ax(t){return function(e){var r=e.parent;e.r*=t,r&&(e.x=r.x+t*e.x,e.y=r.y+t*e.y)}}function IC(t){var e=t.node,r=e===void 0?{x:0,y:0,r:15}:e;return Be.createElement("circle",{cx:r.x,cy:r.y,r:r.r||15,fill:"#21D4FD"})}IC.propTypes={node:lt.shape({x:lt.number.isRequired,y:lt.number.isRequired,r:lt.number})};function kC(t){var e=t.top,r=t.left,i=t.className,s=t.root,o=t.radius,a=t.size,l=t.padding,u=t.children,c=t.nodeComponent,h=c===void 0?IC:c,f=s6();a&&f.size(a),o!==void 0&&f.radius(o),l&&f.padding(l);var p=f(s);return u?Be.createElement(Be.Fragment,null,u(p)):Be.createElement(Vh,{top:e,left:r,className:xC("visx-pack",i)},h&&p.descendants().map(function(g,b){return Be.createElement(Vh,{key:"pack-node-"+b},Be.createElement(h,{node:g}))}))}kC.propTypes={children:lt.func,top:lt.number,left:lt.number,className:lt.string,radius:lt.func,padding:lt.number};function o6(t){var e=0,r=t.children,i=r&&r.length;if(!i)e=1;else for(;--i>=0;)e+=r[i].value;t.value=e}function a6(){return this.eachAfter(o6)}function l6(t,e){let r=-1;for(const i of this)t.call(e,i,++r,this);return this}function u6(t,e){for(var r=this,i=[r],s,o,a=-1;r=i.pop();)if(t.call(e,r,++a,this),s=r.children)for(o=s.length-1;o>=0;--o)i.push(s[o]);return this}function c6(t,e){for(var r=this,i=[r],s=[],o,a,l,u=-1;r=i.pop();)if(s.push(r),o=r.children)for(a=0,l=o.length;a<l;++a)i.push(o[a]);for(;r=s.pop();)t.call(e,r,++u,this);return this}function d6(t,e){let r=-1;for(const i of this)if(t.call(e,i,++r,this))return i}function h6(t){return this.eachAfter(function(e){for(var r=+t(e.data)||0,i=e.children,s=i&&i.length;--s>=0;)r+=i[s].value;e.value=r})}function f6(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function p6(t){for(var e=this,r=m6(e,t),i=[e];e!==r;)e=e.parent,i.push(e);for(var s=i.length;t!==r;)i.splice(s,0,t),t=t.parent;return i}function m6(t,e){if(t===e)return t;var r=t.ancestors(),i=e.ancestors(),s=null;for(t=r.pop(),e=i.pop();t===e;)s=t,t=r.pop(),e=i.pop();return s}function g6(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function v6(){return Array.from(this)}function y6(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function _6(){var t=this,e=[];return t.each(function(r){r!==t&&e.push({source:r.parent,target:r})}),e}function*w6(){var t=this,e,r=[t],i,s,o;do for(e=r.reverse(),r=[];t=e.pop();)if(yield t,i=t.children)for(s=0,o=i.length;s<o;++s)r.push(i[s]);while(r.length)}function E_(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=E6)):e===void 0&&(e=x6);for(var r=new Fh(t),i,s=[r],o,a,l,u;i=s.pop();)if((a=e(i.data))&&(u=(a=Array.from(a)).length))for(i.children=a,l=u-1;l>=0;--l)s.push(o=a[l]=new Fh(a[l])),o.parent=i,o.depth=i.depth+1;return r.eachBefore(S6)}function b6(){return E_(this).eachBefore(T6)}function x6(t){return t.children}function E6(t){return Array.isArray(t)?t[1]:null}function T6(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function S6(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Fh(t){this.data=t,this.depth=this.height=0,this.parent=null}Fh.prototype=E_.prototype={constructor:Fh,count:a6,each:l6,eachAfter:c6,eachBefore:u6,find:d6,sum:h6,sort:f6,path:p6,ancestors:g6,descendants:v6,leaves:y6,links:_6,copy:b6,[Symbol.iterator]:w6};var Px=function(){function t(r){var i=r.x,s=i===void 0?0:i,o=r.y,a=o===void 0?0:o;this.x=0,this.y=0,this.x=s,this.y=a}var e=t.prototype;return e.value=function(){return{x:this.x,y:this.y}},e.toArray=function(){return[this.x,this.y]},t}();function I6(t){return!!t&&t instanceof Element}function k6(t){return!!t&&(t instanceof SVGElement||"ownerSVGElement"in t)}function C6(t){return!!t&&"createSVGPoint"in t}function A6(t){return!!t&&"getScreenCTM"in t}function P6(t){return!!t&&"changedTouches"in t}function R6(t){return!!t&&"clientX"in t}function N6(t){return!!t&&(t instanceof Event||"nativeEvent"in t&&t.nativeEvent instanceof Event)}function su(){return su=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},su.apply(this,arguments)}var dm={x:0,y:0};function D6(t){if(!t)return su({},dm);if(P6(t))return t.changedTouches.length>0?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:su({},dm);if(R6(t))return{x:t.clientX,y:t.clientY};var e=t==null?void 0:t.target,r=e&&"getBoundingClientRect"in e?e.getBoundingClientRect():null;return r?{x:r.x+r.width/2,y:r.y+r.height/2}:su({},dm)}function Rx(t,e){if(!t||!e)return null;var r=D6(e),i=k6(t)?t.ownerSVGElement:t,s=A6(i)?i.getScreenCTM():null;if(C6(i)&&s){var o=i.createSVGPoint();return o.x=r.x,o.y=r.y,o=o.matrixTransform(s.inverse()),new Px({x:o.x,y:o.y})}var a=t.getBoundingClientRect();return new Px({x:r.x-a.left-t.clientLeft,y:r.y-a.top-t.clientTop})}function hm(t,e){if(I6(t)&&e)return Rx(t,e);if(N6(t)){var r=t,i=r.target;if(i)return Rx(i,r)}return null}function M6(t,e,r){return Math.max(e,Math.min(t,r))}const yt={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function Nx(t,e,r){return e===0||Math.abs(e)===1/0?Math.pow(t,r*5):t*e*r/(e+r*t)}function Dx(t,e,r,i=.15){return i===0?M6(t,e,r):t<e?-Nx(e-t,r-e,i)+e:t>r?+Nx(t-r,r-e,i)+r:t}function L6(t,[e,r],[i,s]){const[[o,a],[l,u]]=t;return[Dx(e,o,a,i),Dx(r,l,u,s)]}function O6(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function j6(t){var e=O6(t,"string");return typeof e=="symbol"?e:String(e)}function Vt(t,e,r){return e=j6(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Mx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function It(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Mx(Object(r),!0).forEach(function(i){Vt(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mx(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}const CC={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Lx(t){return t?t[0].toUpperCase()+t.slice(1):""}const V6=["enter","leave"];function F6(t=!1,e){return t&&!V6.includes(e)}function U6(t,e="",r=!1){const i=CC[t],s=i&&i[e]||e;return"on"+Lx(t)+Lx(s)+(F6(r,s)?"Capture":"")}const B6=["gotpointercapture","lostpointercapture"];function $6(t){let e=t.substring(2).toLowerCase();const r=!!~e.indexOf("passive");r&&(e=e.replace("passive",""));const i=B6.includes(e)?"capturecapture":"capture",s=!!~e.indexOf(i);return s&&(e=e.replace("capture","")),{device:e,capture:s,passive:r}}function z6(t,e=""){const r=CC[t],i=r&&r[e]||e;return t+i}function Bf(t){return"touches"in t}function AC(t){return Bf(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function H6(t){return Array.from(t.touches).filter(e=>{var r,i;return e.target===t.currentTarget||((r=t.currentTarget)===null||r===void 0||(i=r.contains)===null||i===void 0?void 0:i.call(r,e.target))})}function W6(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function PC(t){return Bf(t)?W6(t)[0]:t}function av(t,e){try{const r=e.clientX-t.clientX,i=e.clientY-t.clientY,s=(e.clientX+t.clientX)/2,o=(e.clientY+t.clientY)/2,a=Math.hypot(r,i);return{angle:-(Math.atan2(r,i)*180)/Math.PI,distance:a,origin:[s,o]}}catch{}return null}function q6(t){return H6(t).map(e=>e.identifier)}function Ox(t,e){const[r,i]=Array.from(t.touches).filter(s=>e.includes(s.identifier));return av(r,i)}function fm(t){const e=PC(t);return Bf(t)?e.identifier:e.pointerId}function Da(t){const e=PC(t);return[e.clientX,e.clientY]}const jx=40,Vx=800;function RC(t){let{deltaX:e,deltaY:r,deltaMode:i}=t;return i===1?(e*=jx,r*=jx):i===2&&(e*=Vx,r*=Vx),[e,r]}function G6(t){var e,r;const{scrollX:i,scrollY:s,scrollLeft:o,scrollTop:a}=t.currentTarget;return[(e=i??o)!==null&&e!==void 0?e:0,(r=s??a)!==null&&r!==void 0?r:0]}function K6(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:r,altKey:i,metaKey:s,ctrlKey:o}=t;Object.assign(e,{shiftKey:r,altKey:i,metaKey:s,ctrlKey:o})}return e}function Uh(t,...e){return typeof t=="function"?t(...e):t}function Y6(){}function X6(...t){return t.length===0?Y6:t.length===1?t[0]:function(){let e;for(const r of t)e=r.apply(this,arguments)||e;return e}}function Fx(t,e){return Object.assign({},e,t||{})}const Q6=32;class NC{constructor(e,r,i){this.ctrl=e,this.args=r,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:r,ingKey:i,args:s}=this;r[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=s,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const r=this.state,i=this.config;r._active||(this.reset(),this.computeInitial(),r._active=!0,r.target=e.target,r.currentTarget=e.currentTarget,r.lastOffset=i.from?Uh(i.from,r):r.offset,r.offset=r.lastOffset,r.startTime=r.timeStamp=e.timeStamp)}computeValues(e){const r=this.state;r._values=e,r.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:r,config:i,shared:s}=this;r.args=this.args;let o=0;if(e&&(r.event=e,i.preventDefault&&e.cancelable&&r.event.preventDefault(),r.type=e.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,K6(e)),s.down=s.pressed=s.buttons%2===1||s.touches>0,o=e.timeStamp-r.timeStamp,r.timeStamp=e.timeStamp,r.elapsedTime=r.timeStamp-r.startTime),r._active){const V=r._delta.map(Math.abs);yt.addTo(r._distance,V)}this.axisIntent&&this.axisIntent(e);const[a,l]=r._movement,[u,c]=i.threshold,{_step:h,values:f}=r;if(i.hasCustomTransform?(h[0]===!1&&(h[0]=Math.abs(a)>=u&&f[0]),h[1]===!1&&(h[1]=Math.abs(l)>=c&&f[1])):(h[0]===!1&&(h[0]=Math.abs(a)>=u&&Math.sign(a)*u),h[1]===!1&&(h[1]=Math.abs(l)>=c&&Math.sign(l)*c)),r.intentional=h[0]!==!1||h[1]!==!1,!r.intentional)return;const p=[0,0];if(i.hasCustomTransform){const[V,D]=f;p[0]=h[0]!==!1?V-h[0]:0,p[1]=h[1]!==!1?D-h[1]:0}else p[0]=h[0]!==!1?a-h[0]:0,p[1]=h[1]!==!1?l-h[1]:0;this.restrictToAxis&&!r._blocked&&this.restrictToAxis(p);const g=r.offset,b=r._active&&!r._blocked||r.active;b&&(r.first=r._active&&!r.active,r.last=!r._active&&r.active,r.active=s[this.ingKey]=r._active,e&&(r.first&&("bounds"in i&&(r._bounds=Uh(i.bounds,r)),this.setup&&this.setup()),r.movement=p,this.computeOffset()));const[R,P]=r.offset,[[x,_],[T,L]]=r._bounds;r.overflow=[R<x?-1:R>_?1:0,P<T?-1:P>L?1:0],r._movementBound[0]=r.overflow[0]?r._movementBound[0]===!1?r._movement[0]:r._movementBound[0]:!1,r._movementBound[1]=r.overflow[1]?r._movementBound[1]===!1?r._movement[1]:r._movementBound[1]:!1;const F=r._active?i.rubberband||[0,0]:[0,0];if(r.offset=L6(r._bounds,r.offset,F),r.delta=yt.sub(r.offset,g),this.computeMovement(),b&&(!r.last||o>Q6)){r.delta=yt.sub(r.offset,g);const V=r.delta.map(Math.abs);yt.addTo(r.distance,V),r.direction=r.delta.map(Math.sign),r._direction=r._delta.map(Math.sign),!r.first&&o>0&&(r.velocity=[V[0]/o,V[1]/o],r.timeDelta=o)}}emit(){const e=this.state,r=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const s=this.handler(It(It(It({},r),e),{},{[this.aliasKey]:e.values}));s!==void 0&&(e.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function J6([t,e],r){const i=Math.abs(t),s=Math.abs(e);if(i>s&&i>r)return"x";if(s>i&&s>r)return"y"}class ac extends NC{constructor(...e){super(...e),Vt(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=yt.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=yt.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const r=this.state,i=this.config;if(!r.axis&&e){const s=typeof i.axisThreshold=="object"?i.axisThreshold[AC(e)]:i.axisThreshold;r.axis=J6(r._movement,s)}r._blocked=(i.lockDirection||!!i.axis)&&!r.axis||!!i.axis&&i.axis!==r.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const Z6=t=>t,Ux=.15,DC={enabled(t=!0){return t},eventOptions(t,e,r){return It(It({},r.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[Ux,Ux];case!1:return[0,0];default:return yt.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return yt.toVector(t)},transform(t,e,r){const i=t||r.shared.transform;return this.hasCustomTransform=!!i,i||Z6},threshold(t){return yt.toVector(t,0)}},eU=0,So=It(It({},DC),{},{axis(t,e,{axis:r}){if(this.lockDirection=r==="lock",!this.lockDirection)return r},axisThreshold(t=eU){return t},bounds(t={}){if(typeof t=="function")return o=>So.bounds(t(o));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:r=1/0,top:i=-1/0,bottom:s=1/0}=t;return[[e,r],[i,s]]}}),Bx={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class tU extends ac{constructor(...e){super(...e),Vt(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const r=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),s={left:r.left-i.left+e.offset[0],right:r.right-i.right+e.offset[0],top:r.top-i.top+e.offset[1],bottom:r.bottom-i.bottom+e.offset[1]};e._bounds=So.bounds(s)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const r=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(r.pointerButtons)?!r.pointerButtons.includes(e.buttons):r.pointerButtons!==-1&&r.pointerButtons!==e.buttons))return;const s=this.ctrl.setEventIds(e);r.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(s&&s.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=fm(e),i._pointerActive=!0,this.computeValues(Da(e)),this.computeInitial(),r.preventScrollAxis&&AC(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):r.delay>0?(this.setupDelayTrigger(e),r.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const r=this.state;r._active=!0,r._preventScroll=!0,r._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const r=this.state,i=this.config;if(!r._pointerActive)return;const s=fm(e);if(r._pointerId!==void 0&&s!==r._pointerId)return;const o=Da(e);if(document.pointerLockElement===e.target?r._delta=[e.movementX,e.movementY]:(r._delta=yt.sub(o,r._values),this.computeValues(o)),yt.addTo(r._movement,r._delta),this.compute(e),r._delayed&&r.intentional){this.timeoutStore.remove("dragDelay"),r.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!r._preventScroll)if(r.axis)if(r.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){r._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const r=this.state,i=this.config;if(!r._active||!r._pointerActive)return;const s=fm(e);if(r._pointerId!==void 0&&s!==r._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[o,a]=r._distance;if(r.tap=o<=i.tapsThreshold&&a<=i.tapsThreshold,r.tap&&i.filterTaps)r._force=!0;else{const[l,u]=r._delta,[c,h]=r._movement,[f,p]=i.swipe.velocity,[g,b]=i.swipe.distance,R=i.swipe.duration;if(r.elapsedTime<R){const P=Math.abs(l/r.timeDelta),x=Math.abs(u/r.timeDelta);P>f&&Math.abs(c)>g&&(r.swipe[0]=Math.sign(l)),x>p&&Math.abs(h)>b&&(r.swipe[1]=Math.sign(u))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const r=this.config,i=r.device;r.pointerLock&&e.currentTarget.requestPointerLock(),r.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,nU(e);const r=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",r),this.eventStore.add(this.sharedConfig.window,"touch","cancel",r),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const r=Bx[e.key];if(r){const i=this.state,s=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=r(this.config.keyboardDisplacement,s),i._keyboardActive=!0,yt.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in Bx&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const r=this.config.device;e(r,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(r,"change",this.pointerMove.bind(this)),e(r,"end",this.pointerUp.bind(this)),e(r,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function nU(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const lc=typeof window<"u"&&window.document&&window.document.createElement;function MC(){return lc&&"ontouchstart"in window}function rU(){return MC()||lc&&window.navigator.maxTouchPoints>1}function iU(){return lc&&"onpointerdown"in window}function sU(){return lc&&"exitPointerLock"in window.document}function oU(){try{return"constructor"in GestureEvent}catch{return!1}}const vr={isBrowser:lc,gesture:oU(),touch:MC(),touchscreen:rU(),pointer:iU(),pointerLock:sU()},aU=250,lU=180,uU=.5,cU=50,dU=250,hU=10,$x={mouse:0,touch:0,pen:8},fU=It(It({},So),{},{device(t,e,{pointer:{touch:r=!1,lock:i=!1,mouse:s=!1}={}}){return this.pointerLock=i&&vr.pointerLock,vr.touch&&r?"touch":this.pointerLock?"mouse":vr.pointer&&!s?"pointer":vr.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:r}){if(this.preventScrollDelay=typeof r=="number"?r:r||r===void 0&&t?aU:void 0,!(!vr.touchscreen||r===!1))return t||(r!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:r=!0,buttons:i=1,keys:s=!0}={}}){return this.pointerButtons=i,this.keys=s,!this.pointerLock&&this.device==="pointer"&&r},threshold(t,e,{filterTaps:r=!1,tapsThreshold:i=3,axis:s=void 0}){const o=yt.toVector(t,r?i:s?1:0);return this.filterTaps=r,this.tapsThreshold=i,o},swipe({velocity:t=uU,distance:e=cU,duration:r=dU}={}){return{velocity:this.transform(yt.toVector(t)),distance:this.transform(yt.toVector(e)),duration:r}},delay(t=0){switch(t){case!0:return lU;case!1:return 0;default:return t}},axisThreshold(t){return t?It(It({},$x),t):$x},keyboardDisplacement(t=hU){return t}});function LC(t){const[e,r]=t.overflow,[i,s]=t._delta,[o,a]=t._direction;(e<0&&i>0&&o<0||e>0&&i<0&&o>0)&&(t._movement[0]=t._movementBound[0]),(r<0&&s>0&&a<0||r>0&&s<0&&a>0)&&(t._movement[1]=t._movementBound[1])}const pU=30,mU=100;class gU extends NC{constructor(...e){super(...e),Vt(this,"ingKey","pinching"),Vt(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:r,lastOffset:i}=this.state;e==="wheel"?this.state.offset=yt.add(r,i):this.state.offset=[(1+r[0])*i[0],r[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:r}=this.state;this.state.movement=[e[0]/r[0],e[1]-r[1]]}axisIntent(){const e=this.state,[r,i]=e._movement;if(!e.axis){const s=Math.abs(r)*pU-Math.abs(i);s<0?e.axis="angle":s>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const r=this.state,i=this.ctrl.touchIds;if(r._active&&r._touchIds.every(o=>i.has(o))||i.size<2)return;this.start(e),r._touchIds=Array.from(i).slice(0,2);const s=Ox(e,r._touchIds);s&&this.pinchStart(e,s)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const r=this.state,i=r._pointerEvents,s=this.ctrl.pointerIds;if(r._active&&Array.from(i.keys()).every(a=>s.has(a))||(i.size<2&&i.set(e.pointerId,e),r._pointerEvents.size<2))return;this.start(e);const o=av(...Array.from(i.values()));o&&this.pinchStart(e,o)}pinchStart(e,r){const i=this.state;i.origin=r.origin,this.computeValues([r.distance,r.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const r=Ox(e,this.state._touchIds);r&&this.pinchMove(e,r)}pointerMove(e){const r=this.state._pointerEvents;if(r.has(e.pointerId)&&r.set(e.pointerId,e),!this.state._active)return;const i=av(...Array.from(r.values()));i&&this.pinchMove(e,i)}pinchMove(e,r){const i=this.state,s=i._values[1],o=r.angle-s;let a=0;Math.abs(o)>270&&(a+=Math.sign(o)),this.computeValues([r.distance,r.angle-360*a]),i.origin=r.origin,i.turns=a,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(r=>!this.ctrl.touchIds.has(r))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const r=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}r._pointerEvents.has(e.pointerId)&&r._pointerEvents.delete(e.pointerId),r._active&&r._pointerEvents.size<2&&(r._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const r=this.state;r._active||(this.start(e),this.computeValues([e.scale,e.rotation]),r.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const r=this.state;this.computeValues([e.scale,e.rotation]),r.origin=[e.clientX,e.clientY];const i=r._movement;r._movement=[e.scale-1,e.rotation],r._delta=yt.sub(r._movement,i),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const r=this.config.modifierKey;r&&(Array.isArray(r)?!r.find(i=>e[i]):!e[r])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-RC(e)[1]/mU*i.offset[0],0],yt.addTo(i._movement,i._delta),LC(i),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const r=this.config.device;r&&(e(r,"start",this[r+"Start"].bind(this)),e(r,"change",this[r+"Move"].bind(this)),e(r,"end",this[r+"End"].bind(this)),e(r,"cancel",this[r+"End"].bind(this)),e("lostPointerCapture","",this[r+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const vU=It(It({},DC),{},{device(t,e,{shared:r,pointer:{touch:i=!1}={}}){if(r.target&&!vr.touch&&vr.gesture)return"gesture";if(vr.touch&&i)return"touch";if(vr.touchscreen){if(vr.pointer)return"pointer";if(vr.touch)return"touch"}},bounds(t,e,{scaleBounds:r={},angleBounds:i={}}){const s=a=>{const l=Fx(Uh(r,a),{min:-1/0,max:1/0});return[l.min,l.max]},o=a=>{const l=Fx(Uh(i,a),{min:-1/0,max:1/0});return[l.min,l.max]};return typeof r!="function"&&typeof i!="function"?[s(),o()]:a=>[s(a),o(a)]},threshold(t,e,r){return this.lockDirection=r.axis==="lock",yt.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});class yU extends ac{constructor(...e){super(...e),Vt(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(Da(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const r=Da(e),i=this.state;i._delta=yt.sub(r,i._values),yt.addTo(i._movement,i._delta),this.computeValues(r),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const _U=It(It({},So),{},{mouseOnly:(t=!0)=>t});class wU extends ac{constructor(...e){super(...e),Vt(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const r=this.state,i=G6(e);r._delta=yt.sub(i,r._values),yt.addTo(r._movement,r._delta),this.computeValues(i),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const bU=So;class xU extends ac{constructor(...e){super(...e),Vt(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const r=this.state;r._delta=RC(e),yt.addTo(r._movement,r._delta),LC(r),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const EU=So;class TU extends ac{constructor(...e){super(...e),Vt(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(Da(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const r=this.state;if(!r._active)return;r._active=!1;const i=Da(e);r._movement=r._delta=yt.sub(i,r._values),this.computeValues(i),this.compute(e),r.delta=r.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const SU=It(It({},So),{},{mouseOnly:(t=!0)=>t}),T_=new Map,lv=new Map;function IU(t){T_.set(t.key,t.engine),lv.set(t.key,t.resolver)}const kU={key:"drag",engine:tU,resolver:fU},CU={key:"hover",engine:TU,resolver:SU},AU={key:"move",engine:yU,resolver:_U},PU={key:"pinch",engine:gU,resolver:vU},RU={key:"scroll",engine:wU,resolver:bU},NU={key:"wheel",engine:xU,resolver:EU};function DU(t,e){if(t==null)return{};var r={},i=Object.keys(t),s,o;for(o=0;o<i.length;o++)s=i[o],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function MU(t,e){if(t==null)return{};var r=DU(t,e),i,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)i=o[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}const LU={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=vr.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},OU=["target","eventOptions","window","enabled","transform"];function Bd(t={},e){const r={};for(const[i,s]of Object.entries(e))switch(typeof s){case"function":r[i]=s.call(r,t[i],i,t);break;case"object":r[i]=Bd(t[i],s);break;case"boolean":s&&(r[i]=t[i]);break}return r}function jU(t,e,r={}){const i=t,{target:s,eventOptions:o,window:a,enabled:l,transform:u}=i,c=MU(i,OU);if(r.shared=Bd({target:s,eventOptions:o,window:a,enabled:l,transform:u},LU),e){const h=lv.get(e);r[e]=Bd(It({shared:r.shared},c),h)}else for(const h in c){const f=lv.get(h);f&&(r[h]=Bd(It({shared:r.shared},c[h]),f))}return r}class OC{constructor(e,r){Vt(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=r}add(e,r,i,s,o){const a=this._listeners,l=z6(r,i),u=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=It(It({},u),o);e.addEventListener(l,s,c);const h=()=>{e.removeEventListener(l,s,c),a.delete(h)};return a.add(h),h}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class VU{constructor(){Vt(this,"_timeouts",new Map)}add(e,r,i=140,...s){this.remove(e),this._timeouts.set(e,window.setTimeout(r,i,...s))}remove(e){const r=this._timeouts.get(e);r&&window.clearTimeout(r)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class FU{constructor(e){Vt(this,"gestures",new Set),Vt(this,"_targetEventStore",new OC(this)),Vt(this,"gestureEventStores",{}),Vt(this,"gestureTimeoutStores",{}),Vt(this,"handlers",{}),Vt(this,"config",{}),Vt(this,"pointerIds",new Set),Vt(this,"touchIds",new Set),Vt(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),UU(this,e)}setEventIds(e){if(Bf(e))return this.touchIds=new Set(q6(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,r){this.handlers=e,this.nativeHandlers=r}applyConfig(e,r){this.config=jU(e,r,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const r=this.config.shared,i={};let s;if(!(r.target&&(s=r.target(),!s))){if(r.enabled){for(const a of this.gestures){const l=this.config[a],u=zx(i,l.eventOptions,!!s);if(l.enabled){const c=T_.get(a);new c(this,e,a).bind(u)}}const o=zx(i,r.eventOptions,!!s);for(const a in this.nativeHandlers)o(a,"",l=>this.nativeHandlers[a](It(It({},this.state.shared),{},{event:l,args:e})),void 0,!0)}for(const o in i)i[o]=X6(...i[o]);if(!s)return i;for(const o in i){const{device:a,capture:l,passive:u}=$6(o);this._targetEventStore.add(s,a,"",i[o],{capture:l,passive:u})}}}}function Oo(t,e){t.gestures.add(e),t.gestureEventStores[e]=new OC(t,e),t.gestureTimeoutStores[e]=new VU}function UU(t,e){e.drag&&Oo(t,"drag"),e.wheel&&Oo(t,"wheel"),e.scroll&&Oo(t,"scroll"),e.move&&Oo(t,"move"),e.pinch&&Oo(t,"pinch"),e.hover&&Oo(t,"hover")}const zx=(t,e,r)=>(i,s,o,a={},l=!1)=>{var u,c;const h=(u=a.capture)!==null&&u!==void 0?u:e.capture,f=(c=a.passive)!==null&&c!==void 0?c:e.passive;let p=l?i:U6(i,s,h);r&&f&&(p+="Passive"),t[p]=t[p]||[],t[p].push(o)},BU=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function $U(t){const e={},r={},i=new Set;for(let s in t)BU.test(s)?(i.add(RegExp.lastMatch),r[s]=t[s]):e[s]=t[s];return[r,e,i]}function jo(t,e,r,i,s,o){if(!t.has(r)||!T_.has(i))return;const a=r+"Start",l=r+"End",u=c=>{let h;return c.first&&a in e&&e[a](c),r in e&&(h=e[r](c)),c.last&&l in e&&e[l](c),h};s[i]=u,o[i]=o[i]||{}}function zU(t,e){const[r,i,s]=$U(t),o={};return jo(s,r,"onDrag","drag",o,e),jo(s,r,"onWheel","wheel",o,e),jo(s,r,"onScroll","scroll",o,e),jo(s,r,"onPinch","pinch",o,e),jo(s,r,"onMove","move",o,e),jo(s,r,"onHover","hover",o,e),{handlers:o,config:e,nativeHandlers:i}}function HU(t,e={},r,i){const s=Be.useMemo(()=>new FU(t),[]);if(s.applyHandlers(t,i),s.applyConfig(e,r),Be.useEffect(s.effect.bind(s)),Be.useEffect(()=>s.clean.bind(s),[]),e.target===void 0)return s.bind.bind(s)}function WU(t){return t.forEach(IU),function(r,i){const{handlers:s,nativeHandlers:o,config:a}=zU(r,i||{});return HU(s,a,void 0,o)}}function qU(t,e){return WU([kU,PU,RU,NU,AU,CU])(t,e||{})}function GU(){return{scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0}}function jC(t){var e=t.scaleX,r=e===void 0?1:e,i=t.scaleY,s=i===void 0?1:i,o=t.translateX,a=o===void 0?0:o,l=t.translateY,u=l===void 0?0:l,c=t.skewX,h=c===void 0?0:c,f=t.skewY,p=f===void 0?0:f;return{scaleX:r,scaleY:s,translateX:a,translateY:u,skewX:h,skewY:p}}function VC(t){var e=t.scaleX,r=t.scaleY,i=t.translateX,s=t.translateY,o=t.skewX,a=t.skewY,l=e*r-a*o;return{scaleX:r/l,scaleY:e/l,translateX:(r*i-o*s)/-l,translateY:(a*i-e*s)/l,skewX:o/-l,skewY:a/-l}}function FC(t,e){var r=e.x,i=e.y;return{x:t.scaleX*r+t.skewX*i+t.translateX,y:t.skewY*r+t.scaleY*i+t.translateY}}function pm(t,e){var r=e.x,i=e.y;return FC(VC(t),{x:r,y:i})}function KU(t,e){e===void 0&&(e=void 0);var r=e||t;return jC({scaleX:t,scaleY:r})}function mm(t,e){return jC({translateX:t,translateY:e})}function Hx(t,e){return{scaleX:t.scaleX*e.scaleX+t.skewX*e.skewY,scaleY:t.skewY*e.skewX+t.scaleY*e.scaleY,translateX:t.scaleX*e.translateX+t.skewX*e.translateY+t.translateX,translateY:t.skewY*e.translateX+t.scaleY*e.translateY+t.translateY,skewX:t.scaleX*e.skewX+t.skewX*e.scaleY,skewY:t.skewY*e.scaleX+t.scaleY*e.skewY}}function uv(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];switch(e.length){case 0:throw new Error("composeMatrices() requires arguments: was called with no args");case 1:return e[0];case 2:return Hx(e[0],e[1]);default:{var i=e[0],s=e[1],o=e.slice(2),a=Hx(i,s);return uv.apply(void 0,[a].concat(o))}}}function cv(){return cv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},cv.apply(this,arguments)}var YU={scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0},XU=function(e){return-e.deltaY>0?{scaleX:1.1,scaleY:1.1}:{scaleX:.9,scaleY:.9}},QU=function(e){var r=e.offset,i=r[0],s=e.lastOffset,o=s[0];return{scaleX:i-o<0?.9:1.1,scaleY:i-o<0?.9:1.1}};function UC(t){var e=t.scaleXMin,r=e===void 0?0:e,i=t.scaleXMax,s=i===void 0?1/0:i,o=t.scaleYMin,a=o===void 0?0:o,l=t.scaleYMax,u=l===void 0?1/0:l,c=t.initialTransformMatrix,h=c===void 0?YU:c,f=t.wheelDelta,p=f===void 0?XU:f,g=t.pinchDelta,b=g===void 0?QU:g,R=t.width,P=t.height,x=t.constrain,_=t.children,T=N.useRef(null),L=N.useRef(h),F=N.useState(h),V=F[0],D=F[1],I=N.useState(!1),E=I[0],w=I[1],y=N.useState(void 0),C=y[0],A=y[1],z=N.useState(void 0),Q=z[0],Z=z[1],oe=N.useCallback(function(j,U){if(x)return x(j,U);var q=j.scaleX,ie=j.scaleY,me=q>s||q<r,Pe=ie>u||ie<a;return me||Pe?U:j},[x,r,s,a,u]),G=N.useCallback(function(j){D(function(U){var q=oe(j,U);return L.current=q,q})},[oe]),K=N.useCallback(function(j){var U=j.x,q=j.y;return FC(V,{x:U,y:q})},[V]),re=N.useCallback(function(j){var U=j.x,q=j.y;return pm(V,{x:U,y:q})},[V]),se=N.useCallback(function(){G(h)},[h,G]),W=N.useCallback(function(j){var U=j.scaleX,q=j.scaleY,ie=j.point,me=q||U,Pe=ie||{x:R/2,y:P/2},Ue=pm(L.current,Pe),Xe=uv(L.current,mm(Ue.x,Ue.y),KU(U,me),mm(-Ue.x,-Ue.y));if(G(Xe),E){var it=L.current,Oe=it.translateX,pt=it.translateY;Z(ie),A({translateX:Oe,translateY:pt})}},[P,R,E,G]),$=N.useCallback(function(j){var U=j.translateX,q=j.translateY,ie=uv(V,mm(U,q));G(ie)},[G,V]),J=N.useCallback(function(j){var U=j.translateX,q=j.translateY,ie=cv({},V,{translateX:U,translateY:q});G(ie)},[G,V]),X=N.useCallback(function(j){var U=j.x,q=j.y,ie=pm(V,{x:U,y:q});J({translateX:ie.x,translateY:ie.y})},[J,V]),de=N.useCallback(function(){return VC(V)},[V]),ye=N.useCallback(function(){var j=de(),U=j.translateX,q=j.translateY,ie=j.scaleX,me=j.scaleY,Pe=j.skewX,Ue=j.skewY;return"matrix("+ie+", "+Ue+", "+Pe+", "+me+", "+U+", "+q+")"},[de]),Fe=N.useCallback(function(j){var U=V.translateX,q=V.translateY;Z(hm(j)||void 0),A({translateX:U,translateY:q}),w(!0)},[V]),Le=N.useCallback(function(j,U){var q,ie;if(!(!E||!Q||!C)){var me=hm(j),Pe=me?-(Q.x-me.x):-Q.x,Ue=me?-(Q.y-me.y):-Q.y,Xe=C.translateX+Pe;U!=null&&U.offsetX&&(Xe+=(q=U==null?void 0:U.offsetX)!=null?q:0);var it=C.translateY+Ue;U!=null&&U.offsetY&&(it+=(ie=U==null?void 0:U.offsetY)!=null?ie:0),J({translateX:Xe,translateY:it})}},[E,J,Q,C]),te=N.useCallback(function(){Z(void 0),A(void 0),w(!1)},[]),ue=N.useCallback(function(j){j.preventDefault();var U=hm(j)||void 0,q=p(j),ie=q.scaleX,me=q.scaleY;W({scaleX:ie,scaleY:me,point:U})},[W,p]),xe=N.useCallback(function(j){var U=j.origin,q=U[0],ie=U[1],me=j.memo,Pe=me;if(T.current){var Ue,Xe=(Ue=Pe)!=null?Ue:T.current.getBoundingClientRect(),it=Xe.top,Oe=Xe.left;Pe||(Pe={top:it,left:Oe});var pt=b(j),ur=pt.scaleX,Wr=pt.scaleY;W({scaleX:ur,scaleY:Wr,point:{x:q-Oe,y:ie-it}})}return Pe},[W,b]),je=N.useCallback(function(){var j=V.translateX,U=V.translateY,q=V.scaleX,ie=V.scaleY,me=V.skewX,Pe=V.skewY;return"matrix("+q+", "+Pe+", "+me+", "+ie+", "+j+", "+U+")"},[V]),$e=N.useCallback(function(){var j={x:R/2,y:P/2},U=re(j);$({translateX:U.x-j.x,translateY:U.y-j.y})},[P,R,re,$]),tt=N.useCallback(function(){G(GU())},[G]);qU({onDragStart:function(U){var q=U.event;q instanceof KeyboardEvent||Fe(q)},onDrag:function(U){var q=U.event,ie=U.pinching,me=U.cancel;ie?(me(),te()):q instanceof KeyboardEvent||Le(q)},onDragEnd:te,onPinch:xe,onWheel:function(U){var q=U.event,ie=U.active,me=U.pinching;me||!ie||ue(q)}},{target:T,eventOptions:{passive:!1},drag:{filterTaps:!0}});var M={initialTransformMatrix:h,transformMatrix:V,isDragging:E,center:$e,clear:tt,scale:W,translate:$,translateTo:X,setTranslate:J,setTransformMatrix:G,reset:se,handleWheel:ue,handlePinch:xe,dragEnd:te,dragMove:Le,dragStart:Fe,toString:je,invert:de,toStringInvert:ye,applyToPoint:K,applyInverseToPoint:re,containerRef:T};return Be.createElement(Be.Fragment,null,_(M))}UC.propTypes={width:lt.number.isRequired,height:lt.number.isRequired,wheelDelta:lt.func,scaleXMin:lt.number,scaleXMax:lt.number,scaleYMin:lt.number,scaleYMax:lt.number,constrain:lt.func,children:lt.func.isRequired};function JU(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var BC=JU,ZU=typeof jc=="object"&&jc&&jc.Object===Object&&jc,eB=ZU,tB=eB,nB=typeof self=="object"&&self&&self.Object===Object&&self,rB=tB||nB||Function("return this")(),$C=rB,iB=$C,sB=function(){return iB.Date.now()},oB=sB,aB=/\s/;function lB(t){for(var e=t.length;e--&&aB.test(t.charAt(e)););return e}var uB=lB,cB=uB,dB=/^\s+/;function hB(t){return t&&t.slice(0,cB(t)+1).replace(dB,"")}var fB=hB,pB=$C,mB=pB.Symbol,zC=mB,Wx=zC,HC=Object.prototype,gB=HC.hasOwnProperty,vB=HC.toString,El=Wx?Wx.toStringTag:void 0;function yB(t){var e=gB.call(t,El),r=t[El];try{t[El]=void 0;var i=!0}catch{}var s=vB.call(t);return i&&(e?t[El]=r:delete t[El]),s}var _B=yB,wB=Object.prototype,bB=wB.toString;function xB(t){return bB.call(t)}var EB=xB,qx=zC,TB=_B,SB=EB,IB="[object Null]",kB="[object Undefined]",Gx=qx?qx.toStringTag:void 0;function CB(t){return t==null?t===void 0?kB:IB:Gx&&Gx in Object(t)?TB(t):SB(t)}var AB=CB;function PB(t){return t!=null&&typeof t=="object"}var RB=PB,NB=AB,DB=RB,MB="[object Symbol]";function LB(t){return typeof t=="symbol"||DB(t)&&NB(t)==MB}var OB=LB,jB=fB,Kx=BC,VB=OB,Yx=NaN,FB=/^[-+]0x[0-9a-f]+$/i,UB=/^0b[01]+$/i,BB=/^0o[0-7]+$/i,$B=parseInt;function zB(t){if(typeof t=="number")return t;if(VB(t))return Yx;if(Kx(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Kx(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=jB(t);var r=UB.test(t);return r||BB.test(t)?$B(t.slice(2),r?2:8):FB.test(t)?Yx:+t}var HB=zB,WB=BC,gm=oB,Xx=HB,qB="Expected a function",GB=Math.max,KB=Math.min;function YB(t,e,r){var i,s,o,a,l,u,c=0,h=!1,f=!1,p=!0;if(typeof t!="function")throw new TypeError(qB);e=Xx(e)||0,WB(r)&&(h=!!r.leading,f="maxWait"in r,o=f?GB(Xx(r.maxWait)||0,e):o,p="trailing"in r?!!r.trailing:p);function g(V){var D=i,I=s;return i=s=void 0,c=V,a=t.apply(I,D),a}function b(V){return c=V,l=setTimeout(x,e),h?g(V):a}function R(V){var D=V-u,I=V-c,E=e-D;return f?KB(E,o-I):E}function P(V){var D=V-u,I=V-c;return u===void 0||D>=e||D<0||f&&I>=o}function x(){var V=gm();if(P(V))return _(V);l=setTimeout(x,R(V))}function _(V){return l=void 0,p&&i?g(V):(i=s=void 0,a)}function T(){l!==void 0&&clearTimeout(l),c=0,i=u=s=l=void 0}function L(){return l===void 0?a:_(gm())}function F(){var V=gm(),D=P(V);if(i=arguments,s=this,u=V,D){if(l===void 0)return b(u);if(f)return clearTimeout(l),l=setTimeout(x,e),g(u)}return l===void 0&&(l=setTimeout(x,e)),a}return F.cancel=T,F.flush=L,F}var XB=YB;const QB=Ua(XB),Vo={top:40,right:40,bottom:40,left:40};function JB(t,e){const r=t.split(" "),i=[];let s="";return r.forEach(o=>{(s+" "+o).trim().length>e&&s?(i.push(s),s=o):s=s?`${s} ${o}`:o}),s&&i.push(s),i}function ZB(){var y;const[t,e]=N.useState(null),[r,i]=N.useState(!0),[s,o]=N.useState(null),[a,l]=N.useState(null),[u,c]=N.useState(null),[h,f]=N.useState({width:window.innerWidth,height:window.innerHeight}),[p,g]=N.useState(150),[b,R]=N.useState(""),[P,x]=N.useState(2),_=qn(),T=N.useCallback(QB(C=>{l(C)},50),[]);N.useEffect(()=>{const C=()=>{f({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",C),()=>window.removeEventListener("resize",C)},[]),N.useEffect(()=>{(async()=>{try{const A={},Q=(await Bt(Ot(dt,"interviewSummaries"))).docs.map(async G=>{const K=Ot(dt,"interviewSummaries",G.id,"subSummaries");(await Bt(K)).forEach(se=>{const W=se.data();W.keywords&&W.keywords.split(",").map($=>$.trim().toLowerCase()).forEach($=>{A[$]=(A[$]||0)+1})})});await Promise.all(Q);const Z=Object.fromEntries(Object.entries(A).filter(([G,K])=>K>1)),oe={name:"keywords",children:Object.entries(Z).map(([G,K])=>({name:G,value:K}))};e(oe),i(!1)}catch(A){console.error("Error fetching data:",A),o("Error loading data"),i(!1)}})()},[]);const L=N.useMemo(()=>{if(!t)return null;let C=t.children;b&&(C=C.filter(Z=>Z.name.toLowerCase().includes(b.toLowerCase()))),C=C.filter(Z=>Z.value>=P),C=[...C].sort((Z,oe)=>oe.value-Z.value);const A=C.slice(0,p),z=C.slice(p),Q={name:"keywords",children:A};if(z.length>0&&!b){const Z=z.reduce((G,K)=>G+K.value,0),oe=z.length;Q.children.push({name:`${oe} more keywords`,value:Z,isOthers:!0})}return Q},[t,p,b,P]);if(r)return m.jsxs("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:[m.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),m.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]});if(s)return m.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-50 px-6",children:m.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg max-w-xl text-center",children:s})});if(!L)return null;const F=E_(L).sum(C=>C.value).sort((C,A)=>A.value-C.value),{width:V,height:D}=h,I=V-Vo.left-Vo.right,E=D-Vo.top-Vo.bottom,w=C=>{if(C.data.isOthers){g(A=>A+50);return}u&&u.name===C.data.name?c(null):c({name:C.data.name,value:C.data.value,x:C.x,y:C.y,r:C.r})};return F.children&&Math.max(...F.children.map(C=>C.value)),m.jsxs("div",{className:"w-full h-screen relative bg-gray-50 font-sans overflow-hidden",children:[m.jsxs("div",{className:"absolute top-4 left-4 z-40 bg-white bg-opacity-90 p-4 rounded-lg shadow-sm w-72",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Keyword Visualization"}),m.jsx("div",{className:"mb-3",children:m.jsx("input",{type:"text",placeholder:"Search keywords...",value:b,onChange:C=>R(C.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Visible Keywords"}),m.jsxs("select",{value:p,onChange:C=>g(Number(C.target.value)),className:"w-full px-2 py-1.5 border border-gray-300 rounded-md text-sm",children:[m.jsx("option",{value:"50",children:"Top 50"}),m.jsx("option",{value:"100",children:"Top 100"}),m.jsx("option",{value:"150",children:"Top 150"}),m.jsx("option",{value:"200",children:"Top 200"}),m.jsx("option",{value:"300",children:"Top 300"}),m.jsx("option",{value:"500",children:"Top 500"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Min. Frequency"}),m.jsxs("select",{value:P,onChange:C=>x(Number(C.target.value)),className:"w-full px-2 py-1.5 border border-gray-300 rounded-md text-sm",children:[m.jsx("option",{value:"2",children:"2+"}),m.jsx("option",{value:"3",children:"3+"}),m.jsx("option",{value:"5",children:"5+"}),m.jsx("option",{value:"10",children:"10+"})]})]})]}),m.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Showing ",((y=F.children)==null?void 0:y.length)||0," keywords",t&&t.children&&` of ${t.children.length} total`,m.jsx("br",{}),m.jsx("span",{className:"italic",children:"Only keywords with multiple clips are included"})]})]}),u&&m.jsxs("div",{className:"absolute top-36 left-4 z-50 bg-white rounded-xl shadow-md p-4 max-w-xs border border-gray-200",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 m-0",children:u.name}),m.jsx("button",{onClick:()=>c(null),className:"bg-transparent border-0 text-gray-500 text-base cursor-pointer p-1 flex items-center justify-center rounded hover:bg-gray-100 hover:text-gray-900 transition-colors",children:""})]}),m.jsxs("p",{className:"text-sm text-gray-600 mt-2 mb-4",children:["This topic appears ",m.jsx("strong",{children:u.value})," times across all interviews."]}),m.jsx("div",{children:m.jsxs("button",{onClick:()=>_(`/playlist-builder?keywords=${encodeURIComponent(u.name)}`),className:"w-full py-2.5 px-4 bg-blue-600 text-white font-medium text-sm rounded-lg cursor-pointer flex items-center justify-center hover:bg-blue-700 transition-colors shadow-sm",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4 mr-2",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),"Watch related segments"]})})]}),m.jsx(UC,{width:V,height:D,scaleXMin:.5,scaleXMax:3,scaleYMin:.5,scaleYMax:3,initialTransformMatrix:{scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0},children:C=>m.jsxs("div",{className:"w-full h-full overflow-hidden relative touch-none flex justify-center items-center",children:[m.jsxs("svg",{width:"100%",height:"100%",ref:C.containerRef,className:"bg-white rounded-xl shadow-md mx-4 my-4 mt-20",children:[m.jsx("rect",{width:"100%",height:"100%",fill:"#ffffff",rx:14,onClick:()=>{C.reset(),c(null)}}),m.jsx(kC,{root:F,size:[I,E],padding:16,children:A=>{const z=A.descendants().filter(Q=>!Q.children);return m.jsx(Vh,{transform:C.toString(),top:Vo.top+(E/2-A.r),left:Vo.left+(I/2-A.r),children:z.map((Q,Z)=>{const oe=Math.max(Q.r,20),G=u&&u.name===Q.data.name,K=Q.data.isOthers,re=Math.min(oe/3.5,14),se=Math.max(5,Math.floor(oe/3)),W=JB(Q.data.name,se),$=re,J=W.length>1?-((W.length-1)*$)/2:0,X=G?"#2563eb":K?"#9ca3af":"#d1d5db",de=G?3:1,ye=G?"#f0f7ff":K?"#f3f4f6":"#ffffff";return m.jsxs("g",{transform:`translate(${Q.x}, ${Q.y})`,onMouseEnter:()=>T({name:Q.data.name,value:Q.data.value,x:Q.x,y:Q.y,isOthers:Q.data.isOthers}),onMouseLeave:()=>T(null),onClick:()=>w(Q),className:"cursor-pointer",children:[m.jsx("circle",{r:oe,fill:ye,stroke:X,strokeWidth:de,style:{transition:"fill 0.3s, stroke 0.3s, stroke-width 0.3s"}}),m.jsx("text",{textAnchor:"middle",fontSize:re,fontWeight:G?"bold":"normal",fill:K?"#6b7280":"#111827",pointerEvents:"none",style:{fontFamily:"Inter, system-ui, sans-serif"},children:W.map((Fe,Le)=>m.jsx("tspan",{x:"0",dy:Le===0?J:$,children:Fe},Le))})]},`circle-${Z}`)})})}})]}),a&&!u&&m.jsxs("div",{className:"absolute bg-gray-900 bg-opacity-90 text-white p-2 px-3 rounded-lg pointer-events-none text-sm z-50 shadow-md max-w-xs",style:{left:C.transformMatrix.translateX+a.x*C.transformMatrix.scaleX,top:C.transformMatrix.translateY+a.y*C.transformMatrix.scaleY-20},children:[m.jsx("div",{className:"font-semibold",children:a.name}),m.jsxs("div",{children:[a.value," mentions"]}),m.jsx("div",{className:"text-xs mt-1 text-blue-200",children:a.isOthers?"Click to show more keywords":"Click to explore"})]})]})}),m.jsxs("div",{className:"absolute bottom-4 right-4 bg-white bg-opacity-90 py-2 px-3 rounded-lg text-xs text-gray-600 shadow-sm flex items-center",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3.5 h-3.5 mr-1.5 text-gray-500",children:m.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})}),m.jsx("span",{children:"Scroll to zoom  Drag to pan  Click bubble to select"})]})]})}const e$="modulepreload",t$=function(t){return"/civil-rights-history-project/"+t},Qx={},n$=function(e,r,i){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(u=>{if(u=t$(u),u in Qx)return;Qx[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":e$,c||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),c)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})},r$=N.lazy(()=>n$(()=>import("./MapComponent-rRLYWoW-.js").then(t=>t.M),[]));function i$(){const[t,e]=N.useState(!0),[r,i]=N.useState(null),[s,o]=N.useState([]);N.useEffect(()=>{u()},[]);const a=async c=>{try{await new Promise(p=>setTimeout(p,1e3));const f=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(c)}`)).json();if(f.length>0)return[parseFloat(f[0].lat),parseFloat(f[0].lon)]}catch(h){console.error("Error fetching coordinates:",h)}return null},l=c=>{if(!c)return null;const h=/(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,f=c==null?void 0:c.match(h);return f&&f[1]?f[1]:null},u=async()=>{try{e(!0);const c=await Bt(Ot(dt,"interviewSummaries")),h=[];for(const f of c.docs){const p=f.data(),{birthplace:g,name:b,videoEmbedLink:R}=p;if(g){const P=await a(g);if(P){const x=l(R),_=x?`https://img.youtube.com/vi/${x}/default.jpg`:"";h.push({position:P,name:b,birthplace:g,thumbnailURL:_,documentName:f.id})}}}console.log("Markers data:",h),o(h),e(!1)}catch(c){console.error("Error fetching birthplaces:",c),i("Failed to load map data"),e(!1)}};return r?m.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:m.jsx("div",{className:"text-red-500",children:r})}):m.jsxs("div",{className:"map-container",children:[!t&&s.length>0&&m.jsx(N.Suspense,{fallback:m.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:m.jsx(r$,{markers:s})}),t&&m.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})]})}const ai=navigator?navigator.userAgent.toLowerCase():"no-user-agent-specified",Ma=document?document.documentElement:null,s$=ai?ai.indexOf("phantom")!==-1:!1,uc=window&&"ActiveXObject"in window;uc&&ai.match(/MSIE 9/i);const $f=ai.indexOf("webkit")!==-1;ai.indexOf("android");const o$=ai.search("android [23]")!==-1,Io=window?typeof window.orientation<"u":!1,a$=navigator&&window?navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&!window.PointerEvent:!1,l$=navigator&&window?window.PointerEvent&&navigator.pointerEnabled&&navigator.maxTouchPoints:a$,WC=window?window.opera:!1;ai.indexOf("gecko");const La=ai.indexOf("gecko")!==-1&&!$f&&!WC&&!uc;ai.indexOf("chrome");const u$=ai.indexOf("edge/")!==-1;Ma&&uc&&"transition"in Ma.style;window&&"WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix;Ma&&"MozPerspective"in Ma.style;Ma&&"OTransition"in Ma.style;let Jx=window?"devicePixelRatio"in window&&window.devicePixelRatio>1:!1;if(!Jx&&window&&"matchMedia"in window){let t=window.matchMedia("(min-resolution:144dpi)");Jx=t&&t.matches}const ii=window&&!window.L_NO_TOUCH&&!s$&&(l$||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);function c$(){var t=window.innerWidth,e=window.innerHeight,r="portrait";return t>e&&(r="landscape"),r}function cc(t){return typeof t=="string"?document.getElementById(t):t}function pe(t,e,r){var i=document.createElement(t);return i.className=e,r&&r.appendChild(i),i}function Hl(t,e){var r=pe("button",t,e);return r.type="button",r}function dv(t){for(var e={x:0,y:0};t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;return e}function qC(t){for(var e=document.documentElement.style,r=0;r<t.length;r++)if(t[r]in e)return t[r];return!1}qC(["transition","webkitTransition","OTransition","MozTransition","msTransition"]);qC(["transformProperty","WebkitTransform","OTransform","MozTransform","msTransform"]);class Ke extends Error{constructor(e,r){super(),this.name="TLError",this.message=e||"error",this.message_key=this.message,this.detail=r||""}}const Zx={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function GC(t){Zx[t.toLowerCase()]&&(t=Zx[t.toLowerCase()]);var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(i,s,o,a){return s+s+o+o+a+a});var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null}function ot(t,e){var r;for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}function d$(t){return t==null?!1:t==!0||String(t).toLowerCase()=="true"||Number(t)==1}function Wo(t){for(var e=Array.prototype.slice.call(arguments,1),r=0,i=e.length,s;r<i;r++)s=e[r]||{},ot(t,s);return t}const KC=[];function h$(t){KC.push(t)}function Ye(t){KC.forEach(e=>{try{e(t)}catch(r){console&&console.log&&console.log("Error handling trace",r)}})}function hi(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}const eE=function(){var t=0,e="_tl_id";return function(r){return r[e]=r[e]||++t,r[e]}}();function er(t){return t&&typeof t.replace=="function"?t.replace(/^\s+|\s+$/g,""):""}function Dn(t,...e){for(let i of e)for(var r of Object.getOwnPropertyNames(i.prototype))t.prototype[r]=i.prototype[r]}function f$(t,e){if(e||(e=go(6)),!(e in t))return e;var r=e.match(/^(.+)(-\d+)?$/)[1],i=[];for(let o in t)o.match(/^(.+?)(-\d+)?$/)[1]==r&&i.push(o);e=r+"-"+(i.length+1);for(var s=i.length;i.indexOf(e)!=-1;s++)e=r+"-"+s;return e}function p$(t){var e=[];if(Object.keys)e=Object.keys(t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);for(var i=0;i<e.length;i++){var s=e[i];if(t[s]!=null&&typeof t[s]!="string"||er(t[s]).length!=0)return!1}return!0}function vm(t){t=er(t),t=t.toLowerCase();for(var e="/_,:;",r="aaaaaeeeeeiiiiooooouuuunc------",i=0,s=e.length;i<s;i++)t=t.replace(new RegExp(e.charAt(i),"g"),r.charAt(i));return t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),t=t.replace(/^([0-9])/,"_$1"),t}function go(t,e){var r=function(o){return Math.floor(Math.random()*o)},i=function(){var o="abcdefghijklmnopqurstuvwxyz";return o.substr(r(32),1)},s=function(o){for(var a="",l=0;l<o;l++)a+=i();return a};return e?e+"-"+s(t):"tl-"+s(t)}function m$(t,e,r){for(var i=0;i<t.length;i++)if(e<t[i])return t[i];return e}function g$(t,e,r){for(var i=t.length-1;i>=0;i--)if(e>t[i])return t[i];return e}function v$(t){return t==parseFloat(t)?!(t%2):void 0}function YC(t,e,r,i){for(var s=i||0,o=0;o<e.length;o++)e[o].data[r]==t&&(s=o);return s}function ma(t){return t&&(t=t.replace(/<a\b[^>]*>/i,""),t=t.replace(/<\/a>/i,""),t)}function y$(t,e){t.data=Wo({},t.data,e),t.data.unique_id===""&&(t.data.unique_id=go(6))}function _$(t){return t.match(/<p>[\s\S]*?<\/p>/)?t:"<p>"+t+"</p>"}function Oa(t){return t=t.replace(/(<[^>]*>)+/g,""),t.replace('"',"'")}function hv(t,e,r){var i=function(l,u,c){c||(c="");var h=30;return u&&u.length>h&&(u=u.substring(0,h)+""),c+"<a class='tl-makelink' href='"+l+"' onclick='void(0)'>"+u+"</a>"},s=/\b(?:https?|ftp):\/\/([a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|])/gim,o=/(^|[^\/>])(www\.[\S]+(\b|$))/gim,a=/([a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+)/gim;return t.replace(s,function(l,u,c,h){if(c>0){var f=h[c-1];if(f=='"'||f=="'"||f=="=")return l}return i(l,u)}).replace(o,function(l,u,c,h,f){return i("http://"+c,c,u)}).replace(a,function(l,u,c,h){return i("mailto:"+u,u)})}function zf(t){return t.replace(/(.*)www.dropbox.com\/(.*)/,"$1dl.dropboxusercontent.com/$2")}const ko={square:t=>{var e={w:0,h:0};return t.w>t.h&&t.h>0?(e.h=t.h,e.w=t.h):(e.w=t.w,e.h=t.w),e},r16_9:t=>t.w!==null&&t.w!==""?Math.round(t.w/16*9):t.h!==null&&t.h!==""?Math.round(t.h/9*16):0,r4_3:t=>{if(t.w!==null&&t.w!=="")return Math.round(t.w/4*3);if(t.h!==null&&t.h!=="")return Math.round(t.h/3*4)}};function w$(t){var e,r=[],i,s;e=t.toString(),e.match("&#038;")?e=e.replace("&#038;","&"):e.match("&#38;")?e=e.replace("&#38;","&"):e.match("&amp;")&&(e=e.replace("&amp;","&")),s=e.slice(e.indexOf("?")+1).split("&");for(var o=0;o<s.length;o++)i=s[o].split("="),r.push(i[0]),r[i[0]]=i[1];return r}function b$(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r+"="+t[r]);return"?"+e.join("&")}function x$(t,e){if(typeof t<"u"){var r=0;for(var i in t){if(e===r)return t[i];r++}return""}else return""}let E$=function(t){var e="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",r=e.length;return{encode:function(i){if(typeof i!="number"||i!==parseInt(i))throw'"encode" only accepts integers.';for(var s="";i;){var o=i%r;i=Math.floor(i/r),s=e[o].toString()+s}return s},decode:function(i){if(typeof i!="string")throw'"decode" only accepts strings.';for(var s=0;i;){var o=e.indexOf(i[0]);if(o<0)throw`"decode" can't find "`+i[0]+'" in the alphabet: "'+e+'"';var a=i.length-1;s+=o*Math.pow(r,a),i=i.substring(1)}return s}}}();function ym(t){if(typeof t=="string"){let s=t.match(/^\s*(\d+h)?(\d+m)?(\d+s)?\s*/i);if(s){var e=parseInt(s[1])||0,r=parseInt(s[2])||0,i=parseInt(s[3])||0;return i+r*60+e*60*60}}else if(typeof t=="number")return t;return 0}function T$(t){var e=new DOMParser().parseFromString(t,"text/html");return e.body.textContent||""}function S$(t){}function Hf(t){var e=new S$;return e.get(t)}function Lu(t){return t==1?1:1-Math.pow(2,-10*t)}function Za(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}let Bh=function(){};Bh.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments)},r=function(){};r.prototype=this.prototype;var i=new r;i.constructor=e,e.prototype=i,e.superclass=this.prototype;for(var s in this)this.hasOwnProperty(s)&&s!=="prototype"&&s!=="superclass"&&(e[s]=this[s]);return t.statics&&(Wo(e,t.statics),delete t.statics),t.includes&&(Wo.apply(null,[i].concat(t.includes)),delete t.includes),t.options&&i.options&&(t.options=Wo({},i.options,t.options)),Wo(i,t),e.extend=Bh.extend,e.include=function(o){Wo(this.prototype,o)},e};class Mn{on(e,r,i){if(!r)throw new Ke("No callback function provided");var s=this._tl_events=this._tl_events||{};return s[e]=s[e]||[],s[e].push({action:r,context:i||this}),this}addEventListener(e,r,i){return this.on(e,r,i)}hasEventListeners(e){var r="_tl_events";return r in this&&e in this[r]&&this[r][e].length>0}removeEventListener(e,r,i){if(!this.hasEventListeners(e))return this;for(var s=0,o=this._tl_events,a=o[e].length;s<a;s++)if(o[e][s].action===r&&(!i||o[e][s].context===i))return o[e].splice(s,1),this;return this}off(e,r,i){return this.removeEventListener(e,r,i)}fire(e,r){if(!this.hasEventListeners(e))return this;for(var i=ot({type:e,target:this},r),s=this._tl_events[e].slice(),o=0,a=s.length;o<a;o++)s[o].action?s[o].action.call(s[o].context||this,i):Ye(`no action defined for ${e} listener`);return this}}function Ni(t,e){return I$(t,e)}const I$=function(){var t=document,e=window,r=e.performance,i=r&&(r.now||r.webkitNow||r.msNow||r.mozNow),s=i?function(){return i.call(r)}:function(){return+new Date},o=t.documentElement,a=!1,l=1e3,u=/^rgb\(|#/,c=/^([+\-])=([\d\.]+)/,h=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,f=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,p=/scale\(((?:[+\-]=)?([\d\.]+))\)/,g=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,b=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,R={lineHeight:1,zoom:1,zIndex:1,opacity:1,transform:1},P=function(){var W=t.createElement("a").style,$=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],J;for(J=0;J<$.length;J++)if($[J]in W)return $[J]}(),x=function(){return typeof t.createElement("a").style.opacity<"u"}(),_=t.defaultView&&t.defaultView.getComputedStyle?function(W,$){$=$=="transform"?P:$,$=A($);var J=null,X=t.defaultView.getComputedStyle(W,"");return X&&(J=X[$]),W.style[$]||J}:o.currentStyle?function(W,$){if($=A($),$=="opacity"){var J=100;try{J=W.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch{try{J=W.filters("alpha").opacity}catch{}}return J/100}var X=W.currentStyle?W.currentStyle[$]:null;return W.style[$]||X}:function(W,$){return W.style[A($)]},T=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||function(W){e.setTimeout(function(){W(+new Date)},17)}}(),L=[];T(function(W){a=W>1e12!=s()>1e12});function F(W,$,J){if(Array.prototype.indexOf)return W.indexOf($);for(J=0;J<W.length;++J)if(W[J]===$)return J}function V(W){var $,J=L.length;for(i&&W>1e12&&(W=s()),a&&(W=s()),$=J;$--;)L[$](W);L.length&&T(V)}function D(W){L.push(W)===1&&T(V)}function I(W){var $,J=F(L,W);J>=0&&($=L.slice(J+1),L.length=J,L=L.concat($))}function E(W,$){var J={},X;return(X=W.match(f))&&(J.rotate=re(X[1],$?$.rotate:null)),(X=W.match(p))&&(J.scale=re(X[1],$?$.scale:null)),(X=W.match(g))&&(J.skewx=re(X[1],$?$.skewx:null),J.skewy=re(X[3],$?$.skewy:null)),(X=W.match(b))&&(J.translatex=re(X[1],$?$.translatex:null),J.translatey=re(X[3],$?$.translatey:null)),J}function w(W){var $="";return"rotate"in W&&($+="rotate("+W.rotate+"deg) "),"scale"in W&&($+="scale("+W.scale+") "),"translatex"in W&&($+="translate("+W.translatex+"px,"+W.translatey+"px) "),"skewx"in W&&($+="skew("+W.skewx+"deg,"+W.skewy+"deg)"),$}function y(W,$,J){return"#"+(1<<24|W<<16|$<<8|J).toString(16).slice(1)}function C(W){var $=W.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return($?y($[1],$[2],$[3]):W).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function A(W){return W.replace(/-(.)/g,function($,J){return J.toUpperCase()})}function z(W){return typeof W=="function"}function Q(W){return Math.sin(W*Math.PI/2)}function Z(W,$,J,X,de,ye){X=z(X)?X:se.easings[X]||Q;var Fe=W||l,Le=this,te=ye-de,ue=s(),xe=0,je=0;function $e(tt){var M=tt-ue;if(M>Fe||xe)return ye=isFinite(ye)?ye:1,xe?je&&$(ye):$(ye),I($e),J&&J.apply(Le);isFinite(ye)?$(te*X(M/Fe)+de):$(X(M/Fe))}return D($e),{stop:function(tt){xe=1,je=tt,tt||(J=null)}}}function oe(W,$){var J=W.length,X=[],de,ye;for(de=0;de<J;++de)X[de]=[W[de][0],W[de][1]];for(ye=1;ye<J;++ye)for(de=0;de<J-ye;++de)X[de][0]=(1-$)*X[de][0]+$*X[parseInt(de+1,10)][0],X[de][1]=(1-$)*X[de][1]+$*X[parseInt(de+1,10)][1];return[X[0][0],X[0][1]]}function G(W,$,J){var X=[],de,ye,Fe,Le;for(de=0;de<6;de++)Fe=Math.min(15,parseInt($.charAt(de),16)),Le=Math.min(15,parseInt(J.charAt(de),16)),ye=Math.floor((Le-Fe)*W+Fe),ye=ye>15?15:ye<0?0:ye,X[de]=ye.toString(16);return"#"+X.join("")}function K(W,$,J,X,de,ye,Fe){if(de=="transform"){Fe={};for(var Le in J[ye][de])Fe[Le]=Le in X[ye][de]?Math.round(((X[ye][de][Le]-J[ye][de][Le])*W+J[ye][de][Le])*l)/l:J[ye][de][Le];return Fe}else return typeof J[ye][de]=="string"?G(W,J[ye][de],X[ye][de]):(Fe=Math.round(((X[ye][de]-J[ye][de])*W+J[ye][de])*l)/l,de in R||(Fe+=$[ye][de]||"px"),Fe)}function re(W,$,J,X,de){return(J=c.exec(W))?(de=parseFloat(J[2]))&&$+(J[1]=="+"?1:-1)*de:parseFloat(W)}function se(W,$){var J=W?J=isFinite(W.length)?W:[W]:[],X,de=$.complete,ye=$.duration,Fe=$.easing,Le=$.bezier,te=[],ue=[],xe=[],je=[],$e,tt;for(Le&&($e=$.left,tt=$.top,delete $.right,delete $.bottom,delete $.left,delete $.top),X=J.length;X--;){if(te[X]={},ue[X]={},xe[X]={},Le){var M=_(J[X],"left"),j=_(J[X],"top"),U=[re(z($e)?$e(J[X]):$e||0,parseFloat(M)),re(z(tt)?tt(J[X]):tt||0,parseFloat(j))];je[X]=z(Le)?Le(J[X],U):Le,je[X].push(U),je[X].unshift([parseInt(M,10),parseInt(j,10)])}for(var q in $){switch(q){case"complete":case"duration":case"easing":case"bezier":continue}var ie=_(J[X],q),me,Pe=z($[q])?$[q](J[X]):$[q];if(typeof Pe=="string"&&u.test(Pe)&&!u.test(ie)){delete $[q];continue}te[X][q]=q=="transform"?E(ie):typeof Pe=="string"&&u.test(Pe)?C(ie).slice(1):parseFloat(ie),ue[X][q]=q=="transform"?E(Pe,te[X][q]):typeof Pe=="string"&&Pe.charAt(0)=="#"?C(Pe).slice(1):re(Pe,parseFloat(ie)),typeof Pe=="string"&&(me=Pe.match(h))&&(xe[X][q]=me[1])}}return Z.apply(J,[ye,function(Ue,Xe,it){for(X=J.length;X--;){Le&&(it=oe(je[X],Ue),J[X].style.left=it[0]+"px",J[X].style.top=it[1]+"px");for(var Oe in $)Xe=K(Ue,xe,te,ue,Oe,X),Oe=="transform"?J[X].style[P]=w(Xe):Oe=="opacity"&&!x?J[X].style.filter="alpha(opacity="+Xe*100+")":J[X].style[A(Oe)]=Xe}},de,Fe])}return se.tween=Z,se.getStyle=_,se.bezier=oe,se.transform=P,se.parseTransform=E,se.formatTransform=w,se.easings={},se}();class Li{show(e){e||(this._el.container.style.display="block")}hide(e){this._el.container.style.display="none"}addTo(e){e.appendChild(this._el.container),this.onAdd()}removeFrom(e){e.removeChild(this._el.container),this.onRemove()}animatePosition(e,r){var i={duration:this.options.duration,easing:this.options.ease};for(var s in e)e.hasOwnProperty(s)&&(i[s]=e[s]+"px");this.animator&&this.animator.stop(),this.animator=Ni(r,i)}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}setPosition(e,r){for(var i in e)e.hasOwnProperty(i)&&(r?r.style[i]=e[i]+"px":this._el.container.style[i]=e[i]+"px")}getPosition(){return dv(this._el.container)}}let k$=class{constructor(e,r,i){this._el={drag:e,move:e},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},i&&(this._el.move=i),this.options={enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:!1,right:!1},momentum_multiplier:2e3,duration:1e3,ease:Za},this.animator=null,this.dragevent=this.mousedrag,ii&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},ot(this.options,r)}enable(e){this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){Ve.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Ve.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(e){this.options.constraint=e}_onDragStart(e){ii?e.originalEvent?(this.data.pagex.start=e.originalEvent.touches[0].screenX,this.data.pagey.start=e.originalEvent.touches[0].screenY):(this.data.pagex.start=e.targetTouches[0].screenX,this.data.pagey.start=e.targetTouches[0].screenY):(this.data.pagex.start=e.pageX,this.data.pagey.start=e.pageY),this.options.enable.x&&(this._el.move.style.left=this.data.pagex.start-this._el.move.offsetWidth/2+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.pagey.start-this._el.move.offsetHeight/2+"px"),this.data.pos.start=dv(this._el.drag),this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),Ve.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Ve.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(e){this.data.sliding=!1,Ve.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Ve.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(e){e.preventDefault(),this.data.sliding=!0,ii?e.originalEvent?(this.data.pagex.end=e.originalEvent.touches[0].screenX,this.data.pagey.end=e.originalEvent.touches[0].screenY):(this.data.pagex.end=e.targetTouches[0].screenX,this.data.pagey.end=e.targetTouches[0].screenY):(this.data.pagex.end=e.pageX,this.data.pagey.end=e.pageY),this.data.pos.end=dv(this._el.drag),this.data.new_pos.x=-(this.data.pagex.start-this.data.pagex.end-this.data.pos.start.x),this.data.new_pos.y=-(this.data.pagey.start-this.data.pagey.end-this.data.pos.start.y),this.options.enable.x&&(this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var e={x:0,y:0,time:0},r={x:0,y:0,time:0},i=!1;e.time=(new Date().getTime()-this.data.time.start)*10,r.time=(new Date().getTime()-this.data.time.start)*10,r.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),r.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),e.x=Math.round(r.x/r.time),e.y=Math.round(r.y/r.time),this.data.new_pos.x=Math.min(this.data.pos.end.x+e.x),this.data.new_pos.y=Math.min(this.data.pos.end.y+e.y),this.options.enable.x?this.data.new_pos.x<0&&(this.data.new_pos.x=0):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,r.time<3e3&&(i=!0),Math.abs(r.x)>1e4&&(this.data.direction="left",r.x>0&&(this.data.direction="right")),Math.abs(r.y)>1e4&&(this.data.direction="up",r.y>0&&(this.data.direction="down")),this._animateMomentum(),i&&this.fire("swipe_"+this.data.direction,this.data)}_animateMomentum(){var e={x:this.data.new_pos.x,y:this.data.new_pos.y},r={duration:this.options.duration,easing:Lu};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(e.y>this.options.constraint.bottom?e.y=this.options.constraint.bottom:e.y<this.options.constraint.top&&(e.y=this.options.constraint.top)),r.top=Math.floor(e.y)+"px"),this.options.enable.x&&((this.options.constraint.left||this.options.constraint.right)&&(e.x>this.options.constraint.left?e.x=this.options.constraint.left:e.x<this.options.constraint.right&&(e.x=this.options.constraint.right)),r.left=Math.floor(e.x)+"px"),this.animator=Ni(this._el.move,r),this.fire("momentum",this.data)}};Dn(Mn);var Ve={addListener:function(t,e,r,i){var s=eE(r),o="_tl_"+e+s;if(!t[o]){var a=function(c){return r.call(i||t,c||Ve._getEvent())};if(ii&&e==="dblclick"&&this.addDoubleTapListener)this.addDoubleTapListener(t,a,s);else if("addEventListener"in t)if(e==="mousewheel")t.addEventListener("DOMMouseScroll",a,!1),t.addEventListener(e,a,!1);else if(e==="mouseenter"||e==="mouseleave"){var l=a,u=e==="mouseenter"?"mouseover":"mouseout";a=function(c){if(Ve._checkMouse(t,c))return l(c)},t.addEventListener(u,a,!1)}else t.addEventListener(e,a,!1);else"attachEvent"in t&&t.attachEvent("on"+e,a);t[o]=a}},removeListener:function(t,e,r){var i=eE(r),s="_tl_"+e+i,o=t[s];o&&(ii&&e==="dblclick"&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,i):"removeEventListener"in t?e==="mousewheel"?(t.removeEventListener("DOMMouseScroll",o,!1),t.removeEventListener(e,o,!1)):e==="mouseenter"||e==="mouseleave"?t.removeEventListener(e==="mouseenter"?"mouseover":"mouseout",o,!1):t.removeEventListener(e,o,!1):"detachEvent"in t&&t.detachEvent("on"+e,o),t[s]=null)},_checkMouse:function(t,e){var r=e.relatedTarget;if(!r)return!0;try{for(;r&&r!==t;)r=r.parentNode}catch{return!1}return r!==t},_getEvent:function(){var t=window.event;if(!t)for(var e=arguments.callee.caller;e&&(t=e.arguments[0],!(t&&window.Event===t.constructor));)e=e.caller;return t},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},disableClickPropagation:function(t){Ve.addListener(t,k$.START,Ve.stopPropagation),Ve.addListener(t,"click",Ve.stopPropagation),Ve.addListener(t,"dblclick",Ve.stopPropagation)},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stop:function(t){Ve.preventDefault(t),Ve.stopPropagation(t)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e}},Oi=function(){var t,e,r,i,s=[],o=s.slice,a=s.filter,l=window.document,u={},c={},h={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},f=/^\s*<(\w+|!)[^>]*>/,p=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,g=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,b=/^(?:body|html)$/i,R=/([A-Z])/g,P=["val","css","html","text","data","width","height","offset"],x=["after","prepend","before","append"],_=l.createElement("table"),T=l.createElement("tr"),L={tr:l.createElement("tbody"),tbody:_,thead:_,tfoot:_,td:T,th:T,"*":l.createElement("div")},F=/complete|loaded|interactive/,V=/^[\w-]*$/,D={},I=D.toString,E={},w,y,C=l.createElement("div"),A={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},z=Array.isArray||function(M){return M instanceof Array};E.matches=function(M,j){if(!j||!M||M.nodeType!==1)return!1;var U=M.webkitMatchesSelector||M.mozMatchesSelector||M.oMatchesSelector||M.matchesSelector;if(U)return U.call(M,j);var q,ie=M.parentNode,me=!ie;return me&&(ie=C).appendChild(M),q=~E.qsa(ie,j).indexOf(M),me&&C.removeChild(M),q};function Q(M){return M==null?String(M):D[I.call(M)]||"object"}function Z(M){return Q(M)=="function"}function oe(M){return M!=null&&M==M.window}function G(M){return M!=null&&M.nodeType==M.DOCUMENT_NODE}function K(M){return Q(M)=="object"}function re(M){return K(M)&&!oe(M)&&Object.getPrototypeOf(M)==Object.prototype}function se(M){return typeof M.length=="number"}function W(M){return a.call(M,function(j){return j!=null})}function $(M){return M.length>0?r.fn.concat.apply([],M):M}w=function(M){return M.replace(/-+(.)?/g,function(j,U){return U?U.toUpperCase():""})};function J(M){return M.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}y=function(M){return a.call(M,function(j,U){return M.indexOf(j)==U})};function X(M){return M in c?c[M]:c[M]=new RegExp("(^|\\s)"+M+"(\\s|$)")}function de(M,j){return typeof j=="number"&&!h[J(M)]?j+"px":j}function ye(M){var j,U;return u[M]||(j=l.createElement(M),l.body.appendChild(j),U=getComputedStyle(j,"").getPropertyValue("display"),j.parentNode.removeChild(j),U=="none"&&(U="block"),u[M]=U),u[M]}function Fe(M){return"children"in M?o.call(M.children):r.map(M.childNodes,function(j){if(j.nodeType==1)return j})}E.fragment=function(M,j,U){var q,ie,me;return p.test(M)&&(q=r(l.createElement(RegExp.$1))),q||(M.replace&&(M=M.replace(g,"<$1></$2>")),j===t&&(j=f.test(M)&&RegExp.$1),j in L||(j="*"),me=L[j],me.innerHTML=""+M,q=r.each(o.call(me.childNodes),function(){me.removeChild(this)})),re(U)&&(ie=r(q),r.each(U,function(Pe,Ue){P.indexOf(Pe)>-1?ie[Pe](Ue):ie.attr(Pe,Ue)})),q},E.Z=function(M,j){return M=M||[],M.__proto__=r.fn,M.selector=j||"",M},E.isZ=function(M){return M instanceof E.Z},E.init=function(M,j){var U;if(M)if(typeof M=="string")if(M=M.trim(),M[0]=="<"&&f.test(M))U=E.fragment(M,RegExp.$1,j),M=null;else{if(j!==t)return r(j).find(M);U=E.qsa(l,M)}else{if(Z(M))return r(l).ready(M);if(E.isZ(M))return M;if(z(M))U=W(M);else if(K(M))U=[M],M=null;else if(f.test(M))U=E.fragment(M.trim(),RegExp.$1,j),M=null;else{if(j!==t)return r(j).find(M);U=E.qsa(l,M)}}else return E.Z();return E.Z(U,M)},r=function(M,j){return E.init(M,j)};function Le(M,j,U){for(e in j)U&&(re(j[e])||z(j[e]))?(re(j[e])&&!re(M[e])&&(M[e]={}),z(j[e])&&!z(M[e])&&(M[e]=[]),Le(M[e],j[e],U)):j[e]!==t&&(M[e]=j[e])}r.extend=function(M){var j,U=o.call(arguments,1);return typeof M=="boolean"&&(j=M,M=U.shift()),U.forEach(function(q){Le(M,q,j)}),M},E.qsa=function(M,j){var U,q=j[0]=="#",ie=!q&&j[0]==".",me=q||ie?j.slice(1):j,Pe=V.test(me);return G(M)&&Pe&&q?(U=M.getElementById(me))?[U]:[]:M.nodeType!==1&&M.nodeType!==9?[]:o.call(Pe&&!q?ie?M.getElementsByClassName(me):M.getElementsByTagName(j):M.querySelectorAll(j))};function te(M,j){return j==null?r(M):r(M).filter(j)}r.contains=function(M,j){return M!==j&&M.contains(j)};function ue(M,j,U,q){return Z(j)?j.call(M,U,q):j}function xe(M,j,U){U==null?M.removeAttribute(j):M.setAttribute(j,U)}function je(M,j){var U=M.className,q=U&&U.baseVal!==t;if(j===t)return q?U.baseVal:U;q?U.baseVal=j:M.className=j}function $e(M){var j;try{return M&&(M=="true"||(M=="false"?!1:M=="null"?null:!/^0/.test(M)&&!isNaN(j=Number(M))?j:/^[\[\{]/.test(M)?r.parseJSON(M):M))}catch{return M}}r.type=Q,r.isFunction=Z,r.isWindow=oe,r.isArray=z,r.isPlainObject=re,r.isEmptyObject=function(M){var j;for(j in M)return!1;return!0},r.inArray=function(M,j,U){return s.indexOf.call(j,M,U)},r.camelCase=w,r.trim=function(M){return M==null?"":String.prototype.trim.call(M)},r.uuid=0,r.support={},r.expr={},r.map=function(M,j){var U,q=[],ie,me;if(se(M))for(ie=0;ie<M.length;ie++)U=j(M[ie],ie),U!=null&&q.push(U);else for(me in M)U=j(M[me],me),U!=null&&q.push(U);return $(q)},r.each=function(M,j){var U,q;if(se(M)){for(U=0;U<M.length;U++)if(j.call(M[U],U,M[U])===!1)return M}else for(q in M)if(j.call(M[q],q,M[q])===!1)return M;return M},r.grep=function(M,j){return a.call(M,j)},window.JSON&&(r.parseJSON=JSON.parse),r.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(M,j){D["[object "+j+"]"]=j.toLowerCase()}),r.fn={forEach:s.forEach,reduce:s.reduce,push:s.push,sort:s.sort,indexOf:s.indexOf,concat:s.concat,map:function(M){return r(r.map(this,function(j,U){return M.call(j,U,j)}))},slice:function(){return r(o.apply(this,arguments))},ready:function(M){return F.test(l.readyState)&&l.body?M(r):l.addEventListener("DOMContentLoaded",function(){M(r)},!1),this},get:function(M){return M===t?o.call(this):this[M>=0?M:M+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(M){return s.every.call(this,function(j,U){return M.call(j,U,j)!==!1}),this},filter:function(M){return Z(M)?this.not(this.not(M)):r(a.call(this,function(j){return E.matches(j,M)}))},add:function(M,j){return r(y(this.concat(r(M,j))))},is:function(M){return this.length>0&&E.matches(this[0],M)},not:function(M){var j=[];if(Z(M)&&M.call!==t)this.each(function(q){M.call(this,q)||j.push(this)});else{var U=typeof M=="string"?this.filter(M):se(M)&&Z(M.item)?o.call(M):r(M);this.forEach(function(q){U.indexOf(q)<0&&j.push(q)})}return r(j)},has:function(M){return this.filter(function(){return K(M)?r.contains(this,M):r(this).find(M).size()})},eq:function(M){return M===-1?this.slice(M):this.slice(M,+M+1)},first:function(){var M=this[0];return M&&!K(M)?M:r(M)},last:function(){var M=this[this.length-1];return M&&!K(M)?M:r(M)},find:function(M){var j,U=this;return typeof M=="object"?j=r(M).filter(function(){var q=this;return s.some.call(U,function(ie){return r.contains(ie,q)})}):this.length==1?j=r(E.qsa(this[0],M)):j=this.map(function(){return E.qsa(this,M)}),j},closest:function(M,j){var U=this[0],q=!1;for(typeof M=="object"&&(q=r(M));U&&!(q?q.indexOf(U)>=0:E.matches(U,M));)U=U!==j&&!G(U)&&U.parentNode;return r(U)},parents:function(M){for(var j=[],U=this;U.length>0;)U=r.map(U,function(q){if((q=q.parentNode)&&!G(q)&&j.indexOf(q)<0)return j.push(q),q});return te(j,M)},parent:function(M){return te(y(this.pluck("parentNode")),M)},children:function(M){return te(this.map(function(){return Fe(this)}),M)},contents:function(){return this.map(function(){return o.call(this.childNodes)})},siblings:function(M){return te(this.map(function(j,U){return a.call(Fe(U.parentNode),function(q){return q!==U})}),M)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(M){return r.map(this,function(j){return j[M]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=ye(this.nodeName))})},replaceWith:function(M){return this.before(M).remove()},wrap:function(M){var j=Z(M);if(this[0]&&!j)var U=r(M).get(0),q=U.parentNode||this.length>1;return this.each(function(ie){r(this).wrapAll(j?M.call(this,ie):q?U.cloneNode(!0):U)})},wrapAll:function(M){if(this[0]){r(this[0]).before(M=r(M));for(var j;(j=M.children()).length;)M=j.first();r(M).append(this)}return this},wrapInner:function(M){var j=Z(M);return this.each(function(U){var q=r(this),ie=q.contents(),me=j?M.call(this,U):M;ie.length?ie.wrapAll(me):q.append(me)})},unwrap:function(){return this.parent().each(function(){r(this).replaceWith(r(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(M){return this.each(function(){var j=r(this);(M===t?j.css("display")=="none":M)?j.show():j.hide()})},prev:function(M){return r(this.pluck("previousElementSibling")).filter(M||"*")},next:function(M){return r(this.pluck("nextElementSibling")).filter(M||"*")},html:function(M){return arguments.length===0?this.length>0?this[0].innerHTML:null:this.each(function(j){var U=this.innerHTML;r(this).empty().append(ue(this,M,j,U))})},text:function(M){return arguments.length===0?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=M===t?"":""+M})},attr:function(M,j){var U;return typeof M=="string"&&j===t?this.length==0||this[0].nodeType!==1?t:M=="value"&&this[0].nodeName=="INPUT"?this.val():!(U=this[0].getAttribute(M))&&M in this[0]?this[0][M]:U:this.each(function(q){if(this.nodeType===1)if(K(M))for(e in M)xe(this,e,M[e]);else xe(this,M,ue(this,j,q,this.getAttribute(M)))})},removeAttr:function(M){return this.each(function(){this.nodeType===1&&xe(this,M)})},prop:function(M,j){return M=A[M]||M,j===t?this[0]&&this[0][M]:this.each(function(U){this[M]=ue(this,j,U,this[M])})},data:function(M,j){var U=this.attr("data-"+M.replace(R,"-$1").toLowerCase(),j);return U!==null?$e(U):t},val:function(M){return arguments.length===0?this[0]&&(this[0].multiple?r(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(j){this.value=ue(this,M,j,this.value)})},offset:function(M){if(M)return this.each(function(U){var q=r(this),ie=ue(this,M,U,q.offset()),me=q.offsetParent().offset(),Pe={top:ie.top-me.top,left:ie.left-me.left};q.css("position")=="static"&&(Pe.position="relative"),q.css(Pe)});if(this.length==0)return null;var j=this[0].getBoundingClientRect();return{left:j.left+window.pageXOffset,top:j.top+window.pageYOffset,width:Math.round(j.width),height:Math.round(j.height)}},css:function(M,j){if(arguments.length<2){var U=this[0],q=getComputedStyle(U,"");if(!U)return;if(typeof M=="string")return U.style[w(M)]||q.getPropertyValue(M);if(z(M)){var ie={};return r.each(z(M)?M:[M],function(Pe,Ue){ie[Ue]=U.style[w(Ue)]||q.getPropertyValue(Ue)}),ie}}var me="";if(Q(M)=="string")!j&&j!==0?this.each(function(){this.style.removeProperty(J(M))}):me=J(M)+":"+de(M,j);else for(e in M)!M[e]&&M[e]!==0?this.each(function(){this.style.removeProperty(J(e))}):me+=J(e)+":"+de(e,M[e])+";";return this.each(function(){this.style.cssText+=";"+me})},index:function(M){return M?this.indexOf(r(M)[0]):this.parent().children().indexOf(this[0])},hasClass:function(M){return M?s.some.call(this,function(j){return this.test(je(j))},X(M)):!1},addClass:function(M){return M?this.each(function(j){i=[];var U=je(this),q=ue(this,M,j,U);q.split(/\s+/g).forEach(function(ie){r(this).hasClass(ie)||i.push(ie)},this),i.length&&je(this,U+(U?" ":"")+i.join(" "))}):this},removeClass:function(M){return this.each(function(j){if(M===t)return je(this,"");i=je(this),ue(this,M,j,i).split(/\s+/g).forEach(function(U){i=i.replace(X(U)," ")}),je(this,i.trim())})},toggleClass:function(M,j){return M?this.each(function(U){var q=r(this),ie=ue(this,M,U,je(this));ie.split(/\s+/g).forEach(function(me){(j===t?!q.hasClass(me):j)?q.addClass(me):q.removeClass(me)})}):this},scrollTop:function(M){if(this.length){var j="scrollTop"in this[0];return M===t?j?this[0].scrollTop:this[0].pageYOffset:this.each(j?function(){this.scrollTop=M}:function(){this.scrollTo(this.scrollX,M)})}},scrollLeft:function(M){if(this.length){var j="scrollLeft"in this[0];return M===t?j?this[0].scrollLeft:this[0].pageXOffset:this.each(j?function(){this.scrollLeft=M}:function(){this.scrollTo(M,this.scrollY)})}},position:function(){if(this.length){var M=this[0],j=this.offsetParent(),U=this.offset(),q=b.test(j[0].nodeName)?{top:0,left:0}:j.offset();return U.top-=parseFloat(r(M).css("margin-top"))||0,U.left-=parseFloat(r(M).css("margin-left"))||0,q.top+=parseFloat(r(j[0]).css("border-top-width"))||0,q.left+=parseFloat(r(j[0]).css("border-left-width"))||0,{top:U.top-q.top,left:U.left-q.left}}},offsetParent:function(){return this.map(function(){for(var M=this.offsetParent||l.body;M&&!b.test(M.nodeName)&&r(M).css("position")=="static";)M=M.offsetParent;return M})}},r.fn.detach=r.fn.remove,["width","height"].forEach(function(M){var j=M.replace(/./,function(U){return U[0].toUpperCase()});r.fn[M]=function(U){var q,ie=this[0];return U===t?oe(ie)?ie["inner"+j]:G(ie)?ie.documentElement["scroll"+j]:(q=this.offset())&&q[M]:this.each(function(me){ie=r(this),ie.css(M,ue(this,U,me,ie[M]()))})}});function tt(M,j){j(M);for(var U in M.childNodes)tt(M.childNodes[U],j)}return x.forEach(function(M,j){var U=j%2;r.fn[M]=function(){var q,ie=r.map(arguments,function(Ue){return q=Q(Ue),q=="object"||q=="array"||Ue==null?Ue:E.fragment(Ue)}),me,Pe=this.length>1;return ie.length<1?this:this.each(function(Ue,Xe){me=U?Xe:Xe.parentNode,Xe=j==0?Xe.nextSibling:j==1?Xe.firstChild:j==2?Xe:null,ie.forEach(function(it){if(Pe)it=it.cloneNode(!0);else if(!me)return r(it).remove();tt(me.insertBefore(it,Xe),function(Oe){Oe.nodeName!=null&&Oe.nodeName.toUpperCase()==="SCRIPT"&&(!Oe.type||Oe.type==="text/javascript")&&!Oe.src&&window.eval.call(window,Oe.innerHTML)})})})},r.fn[U?M+"To":"insert"+(j?"Before":"After")]=function(q){return r(q)[M](this),this}}),E.Z.prototype=r.fn,E.uniq=y,E.deserializeValue=$e,r.zepto=E,r}();window.Zepto=Oi;window.$===void 0&&(window.$=Oi);(function(t){t.zepto.qsa;var e=1,r,i=Array.prototype.slice,s=t.isFunction,o=function(E){return typeof E=="string"},a={},l={},u="onfocusin"in window,c={focus:"focusin",blur:"focusout"},h={mouseenter:"mouseover",mouseleave:"mouseout"};l.click=l.mousedown=l.mouseup=l.mousemove="MouseEvents";function f(E){return E._zid||(E._zid=e++)}function p(E,w,y,C){if(w=g(w),w.ns)var A=b(w.ns);return(a[f(E)]||[]).filter(function(z){return z&&(!w.e||z.e==w.e)&&(!w.ns||A.test(z.ns))&&(!y||f(z.fn)===f(y))&&(!C||z.sel==C)})}function g(E){var w=(""+E).split(".");return{e:w[0],ns:w.slice(1).sort().join(" ")}}function b(E){return new RegExp("(?:^| )"+E.replace(" "," .* ?")+"(?: |$)")}function R(E,w){return E.del&&!u&&E.e in c||!!w}function P(E){return h[E]||u&&c[E]||E}function x(E,w,y,C,A,z,Q){var Z=f(E),oe=a[Z]||(a[Z]=[]);w.split(/\s/).forEach(function(G){if(G=="ready")return t(document).ready(y);var K=g(G);K.fn=y,K.sel=A,K.e in h&&(y=function(se){var W=se.relatedTarget;if(!W||W!==this&&!t.contains(this,W))return K.fn.apply(this,arguments)}),K.del=z;var re=z||y;K.proxy=function(se){if(se=D(se),!se.isImmediatePropagationStopped()){se.data=C;var W=re.apply(E,se._args==r?[se]:[se].concat(se._args));return W===!1&&(se.preventDefault(),se.stopPropagation()),W}},K.i=oe.length,oe.push(K),"addEventListener"in E&&E.addEventListener(P(K.e),K.proxy,R(K,Q))})}function _(E,w,y,C,A){var z=f(E);(w||"").split(/\s/).forEach(function(Q){p(E,Q,y,C).forEach(function(Z){delete a[z][Z.i],"removeEventListener"in E&&E.removeEventListener(P(Z.e),Z.proxy,R(Z,A))})})}t.event={add:x,remove:_},t.proxy=function(E,w){if(s(E)){var y=function(){return E.apply(w,arguments)};return y._zid=f(E),y}else{if(o(w))return t.proxy(E[w],E);throw new TypeError("expected function")}},t.fn.bind=function(E,w,y){return this.on(E,w,y)},t.fn.unbind=function(E,w){return this.off(E,w)},t.fn.one=function(E,w,y,C){return this.on(E,w,y,C,1)};var T=function(){return!0},L=function(){return!1},F=/^([A-Z]|returnValue$|layer[XY]$)/,V={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function D(E,w){return(w||!E.isDefaultPrevented)&&(w||(w=E),t.each(V,function(y,C){var A=w[y];E[y]=function(){return this[C]=T,A&&A.apply(w,arguments)},E[C]=L}),(w.defaultPrevented!==r?w.defaultPrevented:"returnValue"in w?w.returnValue===!1:w.getPreventDefault&&w.getPreventDefault())&&(E.isDefaultPrevented=T)),E}function I(E){var w,y={originalEvent:E};for(w in E)!F.test(w)&&E[w]!==r&&(y[w]=E[w]);return D(y,E)}t.fn.delegate=function(E,w,y){return this.on(w,E,y)},t.fn.undelegate=function(E,w,y){return this.off(w,E,y)},t.fn.live=function(E,w){return t(document.body).delegate(this.selector,E,w),this},t.fn.die=function(E,w){return t(document.body).undelegate(this.selector,E,w),this},t.fn.on=function(E,w,y,C,A){var z,Q,Z=this;return E&&!o(E)?(t.each(E,function(oe,G){Z.on(oe,w,y,G,A)}),Z):(!o(w)&&!s(C)&&C!==!1&&(C=y,y=w,w=r),(s(y)||y===!1)&&(C=y,y=r),C===!1&&(C=L),Z.each(function(oe,G){A&&(z=function(K){return _(G,K.type,C),C.apply(this,arguments)}),w&&(Q=function(K){var re,se=t(K.target).closest(w,G).get(0);if(se&&se!==G)return re=t.extend(I(K),{currentTarget:se,liveFired:G}),(z||C).apply(se,[re].concat(i.call(arguments,1)))}),x(G,E,C,y,w,Q||z)}))},t.fn.off=function(E,w,y){var C=this;return E&&!o(E)?(t.each(E,function(A,z){C.off(A,w,z)}),C):(!o(w)&&!s(y)&&y!==!1&&(y=w,w=r),y===!1&&(y=L),C.each(function(){_(this,E,y,w)}))},t.fn.trigger=function(E,w){return E=o(E)||t.isPlainObject(E)?t.Event(E):D(E),E._args=w,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(E):t(this).triggerHandler(E,w)})},t.fn.triggerHandler=function(E,w){var y,C;return this.each(function(A,z){y=I(o(E)?t.Event(E):E),y._args=w,y.target=z,t.each(p(z,E.type||E),function(Q,Z){if(C=Z.proxy(y),y.isImmediatePropagationStopped())return!1})}),C},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(E){t.fn[E]=function(w){return w?this.bind(E,w):this.trigger(E)}}),["focus","blur"].forEach(function(E){t.fn[E]=function(w){return w?this.bind(E,w):this.each(function(){try{this[E]()}catch{}}),this}}),t.Event=function(E,w){o(E)||(w=E,E=w.type);var y=document.createEvent(l[E]||"Events"),C=!0;if(w)for(var A in w)A=="bubbles"?C=!!w[A]:y[A]=w[A];return y.initEvent(E,C,!0),D(y)}})(Oi);(function(t){var e=0,r=window.document,i,s,o=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,a=/^(?:text|application)\/javascript/i,l=/^(?:text|application)\/xml/i,u="application/json",c="text/html",h=/^\s*$/;function f(w,y,C){var A=t.Event(y);return t(w).trigger(A,C),!A.isDefaultPrevented()}function p(w,y,C,A){if(w.global)return f(y||r,C,A)}t.active=0;function g(w){w.global&&t.active++===0&&p(w,null,"ajaxStart")}function b(w){w.global&&!--t.active&&p(w,null,"ajaxStop")}function R(w,y){var C=y.context;if(y.beforeSend.call(C,w,y)===!1||p(y,C,"ajaxBeforeSend",[w,y])===!1)return!1;p(y,C,"ajaxSend",[w,y])}function P(w,y,C,A){var z=C.context,Q="success";C.success.call(z,w,Q,y),A&&A.resolveWith(z,[w,Q,y]),p(C,z,"ajaxSuccess",[y,C,w]),_(Q,y,C)}function x(w,y,C,A,z){var Q=A.context;A.error.call(Q,C,y,w),z&&z.rejectWith(Q,[C,y,w]),p(A,Q,"ajaxError",[C,A,w||y]),_(y,C,A)}function _(w,y,C){var A=C.context;C.complete.call(A,y,w),p(C,A,"ajaxComplete",[y,C]),b(C)}function T(){}t.ajaxJSONP=function(w,y){if(!("type"in w))return t.ajax(w);var C=w.jsonpCallback,A=(t.isFunction(C)?C():C)||"jsonp"+ ++e,z=r.createElement("script"),Q=window[A],Z,oe=function(re){t(z).triggerHandler("error",re||"abort")},G={abort:oe},K;return y&&y.promise(G),t(z).on("load error",function(re,se){clearTimeout(K),t(z).off().remove(),re.type=="error"||!Z?x(null,se||"error",G,w,y):P(Z[0],G,w,y),window[A]=Q,Z&&t.isFunction(Q)&&Q(Z[0]),Q=Z=void 0}),R(G,w)===!1?(oe("abort"),G):(window[A]=function(){Z=arguments},z.src=w.url.replace(/\?(.+)=\?/,"?$1="+A),r.head.appendChild(z),w.timeout>0&&(K=setTimeout(function(){oe("timeout")},w.timeout)),G)},t.ajaxSettings={type:"GET",beforeSend:T,success:T,error:T,complete:T,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:u,xml:"application/xml, text/xml",html:c,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0};function L(w){return w&&(w=w.split(";",2)[0]),w&&(w==c?"html":w==u?"json":a.test(w)?"script":l.test(w)&&"xml")||"text"}function F(w,y){return y==""?w:(w+"&"+y).replace(/[&?]{1,2}/,"?")}function V(w){w.processData&&w.data&&t.type(w.data)!="string"&&(w.data=t.param(w.data,w.traditional)),w.data&&(!w.type||w.type.toUpperCase()=="GET")&&(w.url=F(w.url,w.data),w.data=void 0)}t.ajax=function(w){var y=t.extend({},w||{}),C=t.Deferred&&t.Deferred();for(i in t.ajaxSettings)y[i]===void 0&&(y[i]=t.ajaxSettings[i]);g(y),y.crossDomain||(y.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(y.url)&&RegExp.$2!=window.location.host),y.url||(y.url=window.location.toString()),V(y),y.cache===!1&&(y.url=F(y.url,"_="+Date.now()));var A=y.dataType,z=/\?.+=\?/.test(y.url);if(A=="jsonp"||z)return z||(y.url=F(y.url,y.jsonp?y.jsonp+"=?":y.jsonp===!1?"":"callback=?")),t.ajaxJSONP(y,C);var Q=y.accepts[A],Z={},oe=function($,J){Z[$.toLowerCase()]=[$,J]},G=/^([\w-]+:)\/\//.test(y.url)?RegExp.$1:window.location.protocol,K=y.xhr(),re=K.setRequestHeader,se;if(C&&C.promise(K),y.crossDomain||oe("X-Requested-With","XMLHttpRequest"),oe("Accept",Q||"*/*"),(Q=y.mimeType||Q)&&(Q.indexOf(",")>-1&&(Q=Q.split(",",2)[0]),K.overrideMimeType&&K.overrideMimeType(Q)),(y.contentType||y.contentType!==!1&&y.data&&y.type.toUpperCase()!="GET")&&oe("Content-Type",y.contentType||"application/x-www-form-urlencoded"),y.headers)for(s in y.headers)oe(s,y.headers[s]);if(K.setRequestHeader=oe,K.onreadystatechange=function(){if(K.readyState==4){K.onreadystatechange=T,clearTimeout(se);var $,J=!1;if(K.status>=200&&K.status<300||K.status==304||K.status==0&&G=="file:"){A=A||L(y.mimeType||K.getResponseHeader("content-type")),$=K.responseText;try{A=="script"?(0,eval)($):A=="xml"?$=K.responseXML:A=="json"&&($=h.test($)?null:t.parseJSON($))}catch(X){J=X}J?x(J,"parsererror",K,y,C):P($,K,y,C)}else x(K.statusText||null,K.status?"error":"abort",K,y,C)}},R(K,y)===!1)return K.abort(),x(null,"abort",K,y,C),K;if(y.xhrFields)for(s in y.xhrFields)K[s]=y.xhrFields[s];var W="async"in y?y.async:!0;K.open(y.type,y.url,W,y.username,y.password);for(s in Z)re.apply(K,Z[s]);return y.timeout>0&&(se=setTimeout(function(){K.onreadystatechange=T,K.abort(),x(null,"timeout",K,y,C)},y.timeout)),K.send(y.data?y.data:null),K};function D(w,y,C,A){var z=!t.isFunction(y);return{url:w,data:z?y:void 0,success:z?t.isFunction(C)?C:void 0:y,dataType:z&&A||C}}t.get=function(w,y,C,A){return t.ajax(D.apply(null,arguments))},t.post=function(w,y,C,A){var z=D.apply(null,arguments);return z.type="POST",t.ajax(z)},t.getJSON=function(w,y,C){var A=D.apply(null,arguments);return A.dataType="json",t.ajax(A)},t.fetchJSON=function(w){var y=new XMLHttpRequest;return new Promise(function(C,A){y.onreadystatechange=function(){try{if(y.readyState!==4)return;if(y.status>=200&&y.status<300){var z=JSON.parse(y.responseText);C(z)}else A({status:y.status,statusText:y.statusText})}catch(Q){A({status:400,statusText:`Error fetching JSON from ${w}: ${Q}`})}},y.open("GET",w,!0),y.send()})},t.fn.load=function(w,y,C){if(!this.length)return this;var A=this,z=w.split(/\s/),Q,Z=D(w,y,C),oe=Z.success;return z.length>1&&(Z.url=z[0],Q=z[1]),Z.success=function(G){A.html(Q?t("<div>").html(G.replace(o,"")).find(Q):G),oe&&oe.apply(A,arguments)},t.ajax(Z),this};var I=encodeURIComponent;function E(w,y,C,A){var z,Q=t.isArray(y),Z=t.isPlainObject(y);t.each(y,function(oe,G){z=t.type(G),A&&(oe=C?A:A+"["+(Z||z=="object"||z=="array"?oe:"")+"]"),!A&&Q?w.add(G.name,G.value):z=="array"||!C&&z=="object"?E(w,G,C,oe):w.add(oe,G)})}t.param=function(w,y){var C=[];return C.add=function(A,z){this.push(I(A)+"="+I(z))},E(C,w,y),C.join("&").replace(/%20/g,"+")}})(Oi);(function(t){t.fn.serializeArray=function(){var e=[],r;return t([].slice.call(this.get(0).elements)).each(function(){r=t(this);var i=r.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&i!="submit"&&i!="reset"&&i!="button"&&(i!="radio"&&i!="checkbox"||this.checked)&&e.push({name:r.attr("name"),value:r.val()})}),e},t.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(r){e.push(encodeURIComponent(r.name)+"="+encodeURIComponent(r.value))}),e.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var r=t.Event("submit");this.eq(0).trigger(r),r.isDefaultPrevented()||this.get(0).submit()}return this}})(Oi);(function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(r,i){return r=r||[],t.extend(r,t.fn),r.selector=i||"",r.__Z=!0,r},isZ:function(r){return t.type(r)==="array"&&"__Z"in r}});try{getComputedStyle(void 0)}catch{var e=getComputedStyle;window.getComputedStyle=function(i,s){try{return e(i,s)}catch{return null}}}})(Oi);const $h=Oi.getJSON,el=Oi.ajax,Wf=Oi.fetchJSON,Yr=[["millisecond",1,function(t){}],["second",1e3,function(t){t.setMilliseconds(0)}],["minute",1e3*60,function(t){t.setSeconds(0)}],["hour",1e3*60*60,function(t){t.setMinutes(0)}],["day",1e3*60*60*24,function(t){t.setHours(0)}],["month",1e3*60*60*24*30,function(t){t.setDate(1)}],["year",1e3*60*60*24*365,function(t){t.setMonth(0)}],["decade",1e3*60*60*24*365*10,function(t){var e=t.getFullYear();t.setFullYear(e-e%10)}],["century",1e3*60*60*24*365*100,function(t){var e=t.getFullYear();t.setFullYear(e-e%100)}],["millennium",1e3*60*60*24*365*1e3,function(t){var e=t.getFullYear();t.setFullYear(e-e%1e3)}]],Ws=["millisecond","second","minute","hour","day","month","year"],tE=/^([\+-]?\d+?)(-\d{2}?)?(-\d{2}?)?$/,C$=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,nE={base:{millisecond:"time_short",second:"time",minute:"time_no_seconds_small_date",hour:"time_no_seconds_small_date",day:"full",month:"month",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"},short:{millisecond:"time_short",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"}},qf=Bh.extend({initialize:function(t,e,r){typeof t=="number"?this.data={format:"yyyy mmmm",date_obj:new Date(t)}:Date==t.constructor?this.data={format:"yyyy mmmm",date_obj:t}:(this.data=JSON.parse(JSON.stringify(t)),this._createDateObj()),t.format&&!e&&(e=t.format),this._setFormat(e,r)},setDateFormat:function(t){this.data.format=t},getDisplayDate:function(t,e){if(this.data.display_date)return this.data.display_date;t||(t=br.fallback),t.constructor!=br&&(Ye("First argument to getDisplayDate must be type Language"),t=br.fallback);var r=e||this.data.format;return t.formatDate(this.data.date_obj,r)},getMillisecond:function(){return this.getTime()},getTime:function(){return this.data.date_obj.getTime()},isBefore:function(t){if(!this.data.date_obj.constructor==t.data.date_obj.constructor)throw new Ke("date_compare_err");return"isBefore"in this.data.date_obj?this.data.date_obj.isBefore(t.data.date_obj):this.data.date_obj<t.data.date_obj},isAfter:function(t){if(!this.data.date_obj.constructor==t.data.date_obj.constructor)throw new Ke("date_compare_err");return"isAfter"in this.data.date_obj?this.data.date_obj.isAfter(t.data.date_obj):this.data.date_obj>t.data.date_obj},floor:function(t){for(var e=new Date(this.data.date_obj.getTime()),r=0;r<Yr.length;r++)if(Yr[r][2](e),Yr[r][0]==t)return new qf(e);throw new Ke("invalid_scale_err",t)},_getDateData:function(){var t={year:0,month:1,day:1,hour:0,minute:0,second:0,millisecond:0};ot(t,this.data);for(var e in Ws){var r=er(t[Ws[e]]);if(!r.match(/^-?\d*$/))throw new Ke("invalid_date_err",Ws[e]+" = '"+t[Ws[e]]+"'");var i=parseInt(t[Ws[e]]);isNaN(i)&&(i=e==4||e==5?1:0),t[Ws[e]]=i}return t.month>0&&t.month<=12&&(t.month=t.month-1),t},_createDateObj:function(){var t=this._getDateData();this.data.date_obj=new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond),this.data.date_obj.getFullYear()!=t.year&&this.data.date_obj.setFullYear(t.year)},findBestFormat:function(t){for(var e=Ws,r=0;r<e.length;r++)if(this.data[e[r]])return t?t in nE||(t="short"):t="base",nE[t][e[r]];return""},_setFormat:function(t,e){t?this.data.format=t:this.data.format||(this.data.format=this.findBestFormat()),e?this.data.format_short=e:this.data.format_short||(this.data.format_short=this.findBestFormat(!0))},getFullYear:function(){return this.data.date_obj.getFullYear()}});function rE(t){if(t.match(tE)){var e=t.match(tE).slice(1),r={year:e[0].replace("+","")};return e[1]&&(r.month=e[1].replace("-","")),e[2]&&(r.day=e[2].replace("-","")),r}if(t.match(C$))return cls.parseISODate(t);if(t.match(/^\-?\d+$/))return{year:t};var i={};if(t.match(/\d+\/\d+\/\d+/)){var s=t.match(/\d+\/\d+\/\d+/)[0];t=er(t.replace(s,""));var o=s.split("/");i.month=o[0],i.day=o[1],i.year=o[2]}if(t.match(/\d+\/\d+/)){var s=t.match(/\d+\/\d+/)[0];t=er(t.replace(s,""));var o=s.split("/");i.month=o[0],i.year=o[1]}if(t.match(":")){var a=t.split(":");if(i.hour=a[0],i.minute=a[1],a[2]){let l=a[2].split(".");i.second=l[0],i.millisecond=l[1]}}return i}const Ou=Bh.extend({initialize:function(t){if(this.year=parseInt(t),isNaN(this.year))throw new Ke("invalid_year_err",t)},isBefore:function(t){return this.year<t.year},isAfter:function(t){return this.year>t.year},getTime:function(){return this.year}}),fv=1e6,pv=fv*10,mv=pv*10,iE=mv*10;function Gi(t){return function(e){var r=e.getTime();return new Ou(Math.floor(r/t)*t)}}const $d=[["year",1,new Gi(1)],["decade",10,new Gi(10)],["century",100,new Gi(100)],["millennium",1e3,new Gi(1e3)],["age",fv,new Gi(fv)],["epoch",pv,new Gi(pv)],["era",mv,new Gi(mv)],["eon",iE,new Gi(iE)]],Gf=qf.extend({initialize:function(t,e,r){Ou==t.constructor?this.data={date_obj:t}:(this.data=JSON.parse(JSON.stringify(t)),this._createDateObj()),t.format&&!e&&(e=t.format),this._setFormat(e,r)},_createDateObj:function(){var t=this._getDateData();this.data.date_obj=new Ou(t.year)},floor:function(t){for(var e=0;e<$d.length;e++)if($d[e][0]==t){var r=$d[e][2](this.data.date_obj);return new Gf(r)}throw new Ke("invalid_scale_err",t)},getFullYear:function(){return this.data.date_obj.getTime()}}),sE=new RegExp(/\$\{(.+?)\}/g);class br{constructor(e,r){for(let o in Xi.en)this[o]=Xi.en[o];if(e&&typeof e=="string"&&e!="en"){var i=e;if(!(i in Xi)){console.log(`Expected language ${i} to be cached. Did you call the constructor directly?`);var s=XC(i,r);Wf(s).then(o=>{Xi[i]=o}).catch(o=>{console.log(`Error loading language [${s}] ${o.statusText} [${o.status}]`)})}ot(this,Xi[i])}}mergeData(e){for(k in Xi.en)e[k]&&(typeof this[k]=="object"?ot(e[k],this[k]):this[k]=e[k])}formatBigYear(e,r){var i=e.year,s=this.bigdateformats[r]||this.bigdateformats.fallback;if(s){for(var o=0;o<s.length;o++){var a=s[o];if(Math.abs(i/a[0])>1)return oE(Math.abs(i/a[0]),a[1])}return i.toString()}else return Ye("Language file dateformats missing cosmological. Falling back."),oE(i,r)}_(e,r){let i=this.messages[e]||br.fallback.messages[e]||e;if(i.match(sE)){if(!r)throw new Ke("template_message_without_context");for(let s of i.matchAll(sE)){if(!(s[1]in r))throw new Ke("template_message_without_context");i=i.replace(s[0],r[s[1]])}}return i}formatDate(e,r){return e.constructor==Date?this.formatJSDate(e,r):e.constructor==Ou?this.formatBigYear(e,r):e.data&&e.data.date_obj?this.formatDate(e.data.date_obj,r):(Ye("Unfamiliar date presented for formatting"),e.toString())}formatJSDate(e,r){var i=this,s=function(L,F){var V=i.period_labels[L];if(V)var L=F<12?V[0]:V[1];return"<span class='tl-timeaxis-timesuffix'>"+L+"</span>"},o=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,a=/[^-+\dA-Z]/g;r||(r="full");var l=this.dateformats[r]||br.fallback.dateformats[r];l||(l=r);var u="get",c=e[u+"Date"](),h=e[u+"Day"](),f=e[u+"Month"](),p=e[u+"FullYear"](),g=e[u+"Hours"](),b=e[u+"Minutes"](),R=e[u+"Seconds"](),P=e[u+"Milliseconds"](),x=e.getTimezoneOffset(),_={d:c,dd:hi(c),ddd:this.date.day_abbr[h],dddd:this.date.day[h],m:f+1,mm:hi(f+1),mmm:this.date.month_abbr[f],mmmm:this.date.month[f],yy:String(p).slice(2),yyyy:p<0&&this.has_negative_year_modifier()?Math.abs(p):p,h:g%12||12,hh:hi(g%12||12),H:g,HH:hi(g),M:b,MM:hi(b),s:R,ss:hi(R),l:hi(P,3),L:hi(P>99?Math.round(P/10):P),t:s("t",g),tt:s("tt",g),T:s("T",g),TT:s("TT",g),Z:(String(e).match(o)||[""]).pop().replace(a,""),o:(x>0?"-":"+")+hi(Math.floor(Math.abs(x)/60)*100+Math.abs(x)%60,4),S:["th","st","nd","rd"][c%10>3?0:(c%100-c%10!=10)*c%10]},T=l.replace(br.DATE_FORMAT_TOKENS,function(L){return L in _?_[L]:L.slice(1,L.length-1)});return this._applyEra(T,p)}has_negative_year_modifier(){return!!(this.era_labels.negative_year.prefix||this.era_labels.negative_year.suffix)}_applyEra(e,r){var i=r<0?this.era_labels.negative_year:this.era_labels.positive_year,s="";return i.prefix&&(s+="<span>"+i.prefix+"</span> "),s+=e,i.suffix&&(s+=" <span>"+i.suffix+"</span>"),s}}async function A$(t,e){var r=XC(t,e);try{if(!Xi[t]){let i=await Wf(r);Xi[t]=i}return new br(t,e)}catch(i){return console.log(`Error loading language [${r}] ${i.statusText}`),null}}function XC(t,e){if(/\.json$/.test(t))var r=t;else{var i="/locale/"+t+".json";/\/$/.test(e)&&(i=i.substr(1));var r=e+i}return r}function oE(t,e){if(e.match(/%(\.(\d+))?f/)){var r=e.match(/%(\.(\d+))?f/),i=r[0];return r[2]&&(t=t.toFixed(r[2])),e.replace(i,t)}return e}br.fallback={messages:{}};br.DATE_FORMAT_TOKENS=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g;var Xi={en:{name:"English (built-in)",lang:"en",api:{wikipedia:"en"},messages:{loading:"Loading",wikipedia:"From Wikipedia, the free encyclopedia",error:"Error",return_to_title:"Return to Title",go_to_end:"Go to the last slide",loading_content:"Loading Content",loading_timeline:"Loading Timeline... ",swipe_to_navigate:"Swipe to Navigate<br><span class='tl-button'>OK</span>",zoom_in:"Zoom in",zoom_out:"Zoom out",unknown_read_err:"An unexpected error occurred trying to read your spreadsheet data",invalid_url_err:"Unable to read Timeline data. Make sure your URL is for a Google Spreadsheet or a Timeline JSON file.",network_err:"Unable to read your Google Spreadsheet. Make sure you have published it to the web.",missing_start_date_err:"Missing start_date",invalid_start_time_without_date:"Invalid configuration: time cannot be used without date.",invalid_end_time_without_date:"Invalid configuration: end time cannot be used without end date.",date_compare_err:"Can't compare timeline date objects on different scales",invalid_scale_err:"Invalid scale",invalid_date_err:"Invalid date: month, day and year must be numbers.",invalid_separator_error:"Invalid time: misuse of : or . as separator.",invalid_hour_err:"Invalid time (hour)",invalid_minute_err:"Invalid time (minute)",invalid_second_err:"Invalid time (second)",invalid_fractional_err:"Invalid time (fractional seconds)",invalid_second_fractional_err:"Invalid time (seconds and fractional seconds)",invalid_year_err:"Invalid year",flickr_notfound_err:"Photo not found or private",flickr_invalidurl_err:"Invalid Flickr URL",imgur_invalidurl_err:"Invalid Imgur URL",twitter_load_err:"Unable to load Tweet",twitterembed_invalidurl_err:"Invalid Twitter Embed url",wikipedia_load_err:"Unable to load Wikipedia entry",wikipedia_image_load_err:"Unable to load Wikipedia image data",spotify_invalid_url:"Invalid Spotify URL",invalid_rgb_err:"Invalid RGB argument",time_scale_scale_err:"Don't know how to get date from time for scale",axis_helper_no_options_err:"Axis helper must be configured with options",axis_helper_scale_err:"No AxisHelper available for scale",invalid_integer_option:"Invalid option valuemust be a whole number.",instagram_bad_request:"Invalid or private Instagram URL",template_message_without_context:"Required variables not provided for template translation message",aria_label_timeline:"Timeline",aria_label_timeline_navigation:"Timeline navigation",aria_label_timeline_content:"Timeline content",aria_label_zoomin:"Show less than ${start} to ${end}",aria_label_zoomout:"Show more than ${start} to ${end}"},date:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbr:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_abbr:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."]},era_labels:{positive_year:{prefix:"",suffix:""},negative_year:{prefix:"",suffix:"BCE"}},period_labels:{t:["a","p"],tt:["am","pm"],T:["A","P"],TT:["AM","PM"]},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time:"h:MM:ss TT' <small>'mmmm d',' yyyy'</small>'",time_short:"h:MM:ss TT",time_no_seconds_short:"h:MM TT",time_no_minutes_short:"h TT",time_no_seconds_small_date:"h:MM TT' <small>'mmmm d',' yyyy'</small>'",time_milliseconds:"l",full_long:"mmm d',' yyyy 'at' h:MM TT",full_long_small_date:"h:MM TT' <small>mmm d',' yyyy'</small>'"},bigdateformats:{fallback:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]],compact:[[1e9,"%.2f bya"],[1e6,"%.1f mya"],[1e3,"%.1f kya"],[1,"%f years ago"]],verbose:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]]}}};let S_=new br;br.fallback=S_;class ji{setLanguage(e){this.language=e}getLanguage(){if(this.language){if(typeof this.language=="object")return this.language;Ye(`I18NMixins.getLanguage: this.language should be object, but is ${typeof this.language}`)}return S_}_(e,r){return this.getLanguage()._(e,r)}}class Kf{constructor(e,r,i){i&&this.setLanguage(i),this._el={parent:{},container:{},message_container:{},loading_icon:{},message:{}},this.options={width:600,height:600,message_class:"tl-message",message_icon_class:"tl-loading-icon"},this.container=e,ot(this.options,r),this._el.container=pe("div",this.options.message_class),e&&(e.appendChild(this._el.container),this._el.parent=e),this.animator={},this._initLayout(),this._initEvents()}updateMessage(e){e?this._el.message.innerHTML=e:this._el.message.innerHTML=this._("loading"),!this._el.parent.atributes&&this.container.attributes&&(this.container.appendChild(this._el.container),this._el.parent=this.container)}updateDisplay(e,r){}_onMouseClick(){this.fire("clicked",this.options)}_onRemove(){this._el.parent={}}_initLayout(){this._el.message_container=pe("div","tl-message-container",this._el.container),this._el.loading_icon=pe("div",this.options.message_icon_class,this._el.message_container),this._el.message=pe("div","tl-message-content",this._el.message_container),this.updateMessage()}_initEvents(){Ve.addListener(this._el.container,"click",this._onMouseClick,this),Ve.addListener(this,"removed",this._onRemove,this)}}Dn(Kf,ji,Mn,Li);function cd(t,r){var r=r||"start_date";t.sort(function(i,s){return i[r].isBefore(s[r])?-1:i[r].isAfter(s[r])?1:0})}function aE(t){var e={hour:null,minute:null,second:null,millisecond:null},r=null,i=t.match(/(\s*[AaPp]\.?[Mm]\.?\s*)$/);i&&(r=er(i[0]),t=er(t.substring(0,t.lastIndexOf(r))));var s=[],o=t.match(/^\s*(\d{1,2})(\d{2})\s*$/);if(o?s=o.slice(1):(s=t.split(":"),s.length==1&&(s=t.split("."))),s.length>4)throw new Ke("invalid_separator_error");let a=s[0];if(e.hour=parseInt(a),r&&r.toLowerCase()[0]=="p"&&e.hour!=12?e.hour+=12:r&&r.toLowerCase()[0]=="a"&&e.hour==12&&(e.hour=0),isNaN(e.hour)||e.hour<0||e.hour>23)throw new Ke("invalid_hour_err",a);if(s.length>1){let c=s[1];if(e.minute=parseInt(c),isNaN(e.minute))throw new Ke("invalid_minute_err",c)}if(s.length>2){var l=s[2].split(/[\.,]/);if(s=l.concat(s.slice(3)),s.length>2)throw new Ke("invalid_second_fractional_err");if(e.second=parseInt(s[0]),isNaN(e.second))throw new Ke("invalid_second_err",s[0]);if(s.length==2){var u=parseInt(s[1]);if(isNaN(u))throw new Ke("invalid_fractional_err",s[1]);e.millisecond=100*u}}return e}const P$=new RegExp("(^-?\\d+$|^$)");function lE(t){try{return Object.keys(t).forEach(e=>{let r=t[e];if(r&&r.match&&!r.match(P$))throw`invalid value ${r} for ${e}`}),!0}catch{return!1}}const uE={human:qf,cosmological:Gf};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:QC,setPrototypeOf:cE,isFrozen:R$,getPrototypeOf:N$,getOwnPropertyDescriptor:D$}=Object;let{freeze:An,seal:Sr,create:JC}=Object,{apply:gv,construct:vv}=typeof Reflect<"u"&&Reflect;An||(An=function(e){return e});Sr||(Sr=function(e){return e});gv||(gv=function(e,r,i){return e.apply(r,i)});vv||(vv=function(e,r){return new e(...r)});const dd=Pn(Array.prototype.forEach),M$=Pn(Array.prototype.lastIndexOf),dE=Pn(Array.prototype.pop),Tl=Pn(Array.prototype.push),L$=Pn(Array.prototype.splice),zd=Pn(String.prototype.toLowerCase),_m=Pn(String.prototype.toString),hE=Pn(String.prototype.match),Sl=Pn(String.prototype.replace),O$=Pn(String.prototype.indexOf),j$=Pn(String.prototype.trim),Dr=Pn(Object.prototype.hasOwnProperty),Sn=Pn(RegExp.prototype.test),Il=V$(TypeError);function Pn(t){return function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return gv(t,e,i)}}function V$(t){return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return vv(t,r)}}function ze(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zd;cE&&cE(t,null);let i=e.length;for(;i--;){let s=e[i];if(typeof s=="string"){const o=r(s);o!==s&&(R$(e)||(e[i]=o),s=o)}t[s]=!0}return t}function F$(t){for(let e=0;e<t.length;e++)Dr(t,e)||(t[e]=null);return t}function Xs(t){const e=JC(null);for(const[r,i]of QC(t))Dr(t,r)&&(Array.isArray(i)?e[r]=F$(i):i&&typeof i=="object"&&i.constructor===Object?e[r]=Xs(i):e[r]=i);return e}function kl(t,e){for(;t!==null;){const i=D$(t,e);if(i){if(i.get)return Pn(i.get);if(typeof i.value=="function")return Pn(i.value)}t=N$(t)}function r(){return null}return r}const fE=An(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),wm=An(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),bm=An(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),U$=An(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),xm=An(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),B$=An(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),pE=An(["#text"]),mE=An(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Em=An(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),gE=An(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),hd=An(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),$$=Sr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),z$=Sr(/<%[\w\W]*|[\w\W]*%>/gm),H$=Sr(/\$\{[\w\W]*/gm),W$=Sr(/^data-[\-\w.\u00B7-\uFFFF]+$/),q$=Sr(/^aria-[\-\w]+$/),ZC=Sr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),G$=Sr(/^(?:\w+script|data):/i),K$=Sr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),eA=Sr(/^html$/i),Y$=Sr(/^[a-z][.\w]*(-[.\w]+)+$/i);var vE=Object.freeze({__proto__:null,ARIA_ATTR:q$,ATTR_WHITESPACE:K$,CUSTOM_ELEMENT:Y$,DATA_ATTR:W$,DOCTYPE_NAME:eA,ERB_EXPR:z$,IS_ALLOWED_URI:ZC,IS_SCRIPT_OR_DATA:G$,MUSTACHE_EXPR:$$,TMPLIT_EXPR:H$});const Cl={element:1,text:3,progressingInstruction:7,comment:8,document:9},X$=function(){return typeof window>"u"?null:window},Q$=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const s="data-tt-policy-suffix";r&&r.hasAttribute(s)&&(i=r.getAttribute(s));const o="dompurify"+(i?"#"+i:"");try{return e.createPolicy(o,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}},yE=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function tA(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:X$();const e=Ee=>tA(Ee);if(e.version="3.2.4",e.removed=[],!t||!t.document||t.document.nodeType!==Cl.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const i=r,s=i.currentScript,{DocumentFragment:o,HTMLTemplateElement:a,Node:l,Element:u,NodeFilter:c,NamedNodeMap:h=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:g}=t,b=u.prototype,R=kl(b,"cloneNode"),P=kl(b,"remove"),x=kl(b,"nextSibling"),_=kl(b,"childNodes"),T=kl(b,"parentNode");if(typeof a=="function"){const Ee=r.createElement("template");Ee.content&&Ee.content.ownerDocument&&(r=Ee.content.ownerDocument)}let L,F="";const{implementation:V,createNodeIterator:D,createDocumentFragment:I,getElementsByTagName:E}=r,{importNode:w}=i;let y=yE();e.isSupported=typeof QC=="function"&&typeof T=="function"&&V&&V.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:C,ERB_EXPR:A,TMPLIT_EXPR:z,DATA_ATTR:Q,ARIA_ATTR:Z,IS_SCRIPT_OR_DATA:oe,ATTR_WHITESPACE:G,CUSTOM_ELEMENT:K}=vE;let{IS_ALLOWED_URI:re}=vE,se=null;const W=ze({},[...fE,...wm,...bm,...xm,...pE]);let $=null;const J=ze({},[...mE,...Em,...gE,...hd]);let X=Object.seal(JC(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),de=null,ye=null,Fe=!0,Le=!0,te=!1,ue=!0,xe=!1,je=!0,$e=!1,tt=!1,M=!1,j=!1,U=!1,q=!1,ie=!0,me=!1;const Pe="user-content-";let Ue=!0,Xe=!1,it={},Oe=null;const pt=ze({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ur=null;const Wr=ze({},["audio","video","img","source","image","track"]);let Vi=null;const Dt=ze({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),cr="http://www.w3.org/1998/Math/MathML",fe="http://www.w3.org/2000/svg",be="http://www.w3.org/1999/xhtml";let we=be,Ne=!1,De=null;const nt=ze({},[cr,fe,be],_m);let qt=ze({},["mi","mo","mn","ms","mtext"]),Gn=ze({},["annotation-xml"]);const kr=ze({},["title","style","font","a","script"]);let dr=null;const fn=["application/xhtml+xml","text/html"],hr="text/html";let Et=null,fr=null;const Fi=r.createElement("form"),Ui=function(B){return B instanceof RegExp||B instanceof Function},Co=function(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(fr&&fr===B)){if((!B||typeof B!="object")&&(B={}),B=Xs(B),dr=fn.indexOf(B.PARSER_MEDIA_TYPE)===-1?hr:B.PARSER_MEDIA_TYPE,Et=dr==="application/xhtml+xml"?_m:zd,se=Dr(B,"ALLOWED_TAGS")?ze({},B.ALLOWED_TAGS,Et):W,$=Dr(B,"ALLOWED_ATTR")?ze({},B.ALLOWED_ATTR,Et):J,De=Dr(B,"ALLOWED_NAMESPACES")?ze({},B.ALLOWED_NAMESPACES,_m):nt,Vi=Dr(B,"ADD_URI_SAFE_ATTR")?ze(Xs(Dt),B.ADD_URI_SAFE_ATTR,Et):Dt,ur=Dr(B,"ADD_DATA_URI_TAGS")?ze(Xs(Wr),B.ADD_DATA_URI_TAGS,Et):Wr,Oe=Dr(B,"FORBID_CONTENTS")?ze({},B.FORBID_CONTENTS,Et):pt,de=Dr(B,"FORBID_TAGS")?ze({},B.FORBID_TAGS,Et):{},ye=Dr(B,"FORBID_ATTR")?ze({},B.FORBID_ATTR,Et):{},it=Dr(B,"USE_PROFILES")?B.USE_PROFILES:!1,Fe=B.ALLOW_ARIA_ATTR!==!1,Le=B.ALLOW_DATA_ATTR!==!1,te=B.ALLOW_UNKNOWN_PROTOCOLS||!1,ue=B.ALLOW_SELF_CLOSE_IN_ATTR!==!1,xe=B.SAFE_FOR_TEMPLATES||!1,je=B.SAFE_FOR_XML!==!1,$e=B.WHOLE_DOCUMENT||!1,j=B.RETURN_DOM||!1,U=B.RETURN_DOM_FRAGMENT||!1,q=B.RETURN_TRUSTED_TYPE||!1,M=B.FORCE_BODY||!1,ie=B.SANITIZE_DOM!==!1,me=B.SANITIZE_NAMED_PROPS||!1,Ue=B.KEEP_CONTENT!==!1,Xe=B.IN_PLACE||!1,re=B.ALLOWED_URI_REGEXP||ZC,we=B.NAMESPACE||be,qt=B.MATHML_TEXT_INTEGRATION_POINTS||qt,Gn=B.HTML_INTEGRATION_POINTS||Gn,X=B.CUSTOM_ELEMENT_HANDLING||{},B.CUSTOM_ELEMENT_HANDLING&&Ui(B.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(X.tagNameCheck=B.CUSTOM_ELEMENT_HANDLING.tagNameCheck),B.CUSTOM_ELEMENT_HANDLING&&Ui(B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(X.attributeNameCheck=B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),B.CUSTOM_ELEMENT_HANDLING&&typeof B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(X.allowCustomizedBuiltInElements=B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),xe&&(Le=!1),U&&(j=!0),it&&(se=ze({},pE),$=[],it.html===!0&&(ze(se,fE),ze($,mE)),it.svg===!0&&(ze(se,wm),ze($,Em),ze($,hd)),it.svgFilters===!0&&(ze(se,bm),ze($,Em),ze($,hd)),it.mathMl===!0&&(ze(se,xm),ze($,gE),ze($,hd))),B.ADD_TAGS&&(se===W&&(se=Xs(se)),ze(se,B.ADD_TAGS,Et)),B.ADD_ATTR&&($===J&&($=Xs($)),ze($,B.ADD_ATTR,Et)),B.ADD_URI_SAFE_ATTR&&ze(Vi,B.ADD_URI_SAFE_ATTR,Et),B.FORBID_CONTENTS&&(Oe===pt&&(Oe=Xs(Oe)),ze(Oe,B.FORBID_CONTENTS,Et)),Ue&&(se["#text"]=!0),$e&&ze(se,["html","head","body"]),se.table&&(ze(se,["tbody"]),delete de.tbody),B.TRUSTED_TYPES_POLICY){if(typeof B.TRUSTED_TYPES_POLICY.createHTML!="function")throw Il('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof B.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Il('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');L=B.TRUSTED_TYPES_POLICY,F=L.createHTML("")}else L===void 0&&(L=Q$(g,s)),L!==null&&typeof F=="string"&&(F=L.createHTML(""));An&&An(B),fr=B}},Gt=ze({},[...wm,...bm,...U$]),il=ze({},[...xm,...B$]),Bs=function(B){let ae=T(B);(!ae||!ae.tagName)&&(ae={namespaceURI:we,tagName:"template"});const _e=zd(B.tagName),ut=zd(ae.tagName);return De[B.namespaceURI]?B.namespaceURI===fe?ae.namespaceURI===be?_e==="svg":ae.namespaceURI===cr?_e==="svg"&&(ut==="annotation-xml"||qt[ut]):!!Gt[_e]:B.namespaceURI===cr?ae.namespaceURI===be?_e==="math":ae.namespaceURI===fe?_e==="math"&&Gn[ut]:!!il[_e]:B.namespaceURI===be?ae.namespaceURI===fe&&!Gn[ut]||ae.namespaceURI===cr&&!qt[ut]?!1:!il[_e]&&(kr[_e]||!Gt[_e]):!!(dr==="application/xhtml+xml"&&De[B.namespaceURI]):!1},pn=function(B){Tl(e.removed,{element:B});try{T(B).removeChild(B)}catch{P(B)}},Ao=function(B,ae){try{Tl(e.removed,{attribute:ae.getAttributeNode(B),from:ae})}catch{Tl(e.removed,{attribute:null,from:ae})}if(ae.removeAttribute(B),B==="is")if(j||U)try{pn(ae)}catch{}else try{ae.setAttribute(B,"")}catch{}},xc=function(B){let ae=null,_e=null;if(M)B="<remove></remove>"+B;else{const Pt=hE(B,/^[\r\n\t ]+/);_e=Pt&&Pt[0]}dr==="application/xhtml+xml"&&we===be&&(B='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+B+"</body></html>");const ut=L?L.createHTML(B):B;if(we===be)try{ae=new p().parseFromString(ut,dr)}catch{}if(!ae||!ae.documentElement){ae=V.createDocument(we,"template",null);try{ae.documentElement.innerHTML=Ne?F:ut}catch{}}const Kt=ae.body||ae.documentElement;return B&&_e&&Kt.insertBefore(r.createTextNode(_e),Kt.childNodes[0]||null),we===be?E.call(ae,$e?"html":"body")[0]:$e?ae.documentElement:Kt},ui=function(B){return D.call(B.ownerDocument||B,B,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},sl=function(B){return B instanceof f&&(typeof B.nodeName!="string"||typeof B.textContent!="string"||typeof B.removeChild!="function"||!(B.attributes instanceof h)||typeof B.removeAttribute!="function"||typeof B.setAttribute!="function"||typeof B.namespaceURI!="string"||typeof B.insertBefore!="function"||typeof B.hasChildNodes!="function")},Ec=function(B){return typeof l=="function"&&B instanceof l};function Ln(Ee,B,ae){dd(Ee,_e=>{_e.call(e,B,ae,fr)})}const ol=function(B){let ae=null;if(Ln(y.beforeSanitizeElements,B,null),sl(B))return pn(B),!0;const _e=Et(B.nodeName);if(Ln(y.uponSanitizeElement,B,{tagName:_e,allowedTags:se}),B.hasChildNodes()&&!Ec(B.firstElementChild)&&Sn(/<[/\w]/g,B.innerHTML)&&Sn(/<[/\w]/g,B.textContent)||B.nodeType===Cl.progressingInstruction||je&&B.nodeType===Cl.comment&&Sn(/<[/\w]/g,B.data))return pn(B),!0;if(!se[_e]||de[_e]){if(!de[_e]&&$s(_e)&&(X.tagNameCheck instanceof RegExp&&Sn(X.tagNameCheck,_e)||X.tagNameCheck instanceof Function&&X.tagNameCheck(_e)))return!1;if(Ue&&!Oe[_e]){const ut=T(B)||B.parentNode,Kt=_(B)||B.childNodes;if(Kt&&ut){const Pt=Kt.length;for(let tn=Pt-1;tn>=0;--tn){const On=R(Kt[tn],!0);On.__removalCount=(B.__removalCount||0)+1,ut.insertBefore(On,x(B))}}}return pn(B),!0}return B instanceof u&&!Bs(B)||(_e==="noscript"||_e==="noembed"||_e==="noframes")&&Sn(/<\/no(script|embed|frames)/i,B.innerHTML)?(pn(B),!0):(xe&&B.nodeType===Cl.text&&(ae=B.textContent,dd([C,A,z],ut=>{ae=Sl(ae,ut," ")}),B.textContent!==ae&&(Tl(e.removed,{element:B.cloneNode()}),B.textContent=ae)),Ln(y.afterSanitizeElements,B,null),!1)},Po=function(B,ae,_e){if(ie&&(ae==="id"||ae==="name")&&(_e in r||_e in Fi))return!1;if(!(Le&&!ye[ae]&&Sn(Q,ae))){if(!(Fe&&Sn(Z,ae))){if(!$[ae]||ye[ae]){if(!($s(B)&&(X.tagNameCheck instanceof RegExp&&Sn(X.tagNameCheck,B)||X.tagNameCheck instanceof Function&&X.tagNameCheck(B))&&(X.attributeNameCheck instanceof RegExp&&Sn(X.attributeNameCheck,ae)||X.attributeNameCheck instanceof Function&&X.attributeNameCheck(ae))||ae==="is"&&X.allowCustomizedBuiltInElements&&(X.tagNameCheck instanceof RegExp&&Sn(X.tagNameCheck,_e)||X.tagNameCheck instanceof Function&&X.tagNameCheck(_e))))return!1}else if(!Vi[ae]){if(!Sn(re,Sl(_e,G,""))){if(!((ae==="src"||ae==="xlink:href"||ae==="href")&&B!=="script"&&O$(_e,"data:")===0&&ur[B])){if(!(te&&!Sn(oe,Sl(_e,G,"")))){if(_e)return!1}}}}}}return!0},$s=function(B){return B!=="annotation-xml"&&hE(B,K)},Cr=function(B){Ln(y.beforeSanitizeAttributes,B,null);const{attributes:ae}=B;if(!ae||sl(B))return;const _e={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:$,forceKeepAttr:void 0};let ut=ae.length;for(;ut--;){const Kt=ae[ut],{name:Pt,namespaceURI:tn,value:On}=Kt,Ar=Et(Pt);let Tt=Pt==="value"?On:j$(On);if(_e.attrName=Ar,_e.attrValue=Tt,_e.keepAttr=!0,_e.forceKeepAttr=void 0,Ln(y.uponSanitizeAttribute,B,_e),Tt=_e.attrValue,me&&(Ar==="id"||Ar==="name")&&(Ao(Pt,B),Tt=Pe+Tt),je&&Sn(/((--!?|])>)|<\/(style|title)/i,Tt)){Ao(Pt,B);continue}if(_e.forceKeepAttr||(Ao(Pt,B),!_e.keepAttr))continue;if(!ue&&Sn(/\/>/i,Tt)){Ao(Pt,B);continue}xe&&dd([C,A,z],Sc=>{Tt=Sl(Tt,Sc," ")});const Ro=Et(B.nodeName);if(Po(Ro,Ar,Tt)){if(L&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!tn)switch(g.getAttributeType(Ro,Ar)){case"TrustedHTML":{Tt=L.createHTML(Tt);break}case"TrustedScriptURL":{Tt=L.createScriptURL(Tt);break}}try{tn?B.setAttributeNS(tn,Pt,Tt):B.setAttribute(Pt,Tt),sl(B)?pn(B):dE(e.removed)}catch{}}}Ln(y.afterSanitizeAttributes,B,null)},Tc=function Ee(B){let ae=null;const _e=ui(B);for(Ln(y.beforeSanitizeShadowDOM,B,null);ae=_e.nextNode();)Ln(y.uponSanitizeShadowNode,ae,null),ol(ae),Cr(ae),ae.content instanceof o&&Ee(ae.content);Ln(y.afterSanitizeShadowDOM,B,null)};return e.sanitize=function(Ee){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=null,_e=null,ut=null,Kt=null;if(Ne=!Ee,Ne&&(Ee="<!-->"),typeof Ee!="string"&&!Ec(Ee))if(typeof Ee.toString=="function"){if(Ee=Ee.toString(),typeof Ee!="string")throw Il("dirty is not a string, aborting")}else throw Il("toString is not a function");if(!e.isSupported)return Ee;if(tt||Co(B),e.removed=[],typeof Ee=="string"&&(Xe=!1),Xe){if(Ee.nodeName){const On=Et(Ee.nodeName);if(!se[On]||de[On])throw Il("root node is forbidden and cannot be sanitized in-place")}}else if(Ee instanceof l)ae=xc("<!---->"),_e=ae.ownerDocument.importNode(Ee,!0),_e.nodeType===Cl.element&&_e.nodeName==="BODY"||_e.nodeName==="HTML"?ae=_e:ae.appendChild(_e);else{if(!j&&!xe&&!$e&&Ee.indexOf("<")===-1)return L&&q?L.createHTML(Ee):Ee;if(ae=xc(Ee),!ae)return j?null:q?F:""}ae&&M&&pn(ae.firstChild);const Pt=ui(Xe?Ee:ae);for(;ut=Pt.nextNode();)ol(ut),Cr(ut),ut.content instanceof o&&Tc(ut.content);if(Xe)return Ee;if(j){if(U)for(Kt=I.call(ae.ownerDocument);ae.firstChild;)Kt.appendChild(ae.firstChild);else Kt=ae;return($.shadowroot||$.shadowrootmode)&&(Kt=w.call(i,Kt,!0)),Kt}let tn=$e?ae.outerHTML:ae.innerHTML;return $e&&se["!doctype"]&&ae.ownerDocument&&ae.ownerDocument.doctype&&ae.ownerDocument.doctype.name&&Sn(eA,ae.ownerDocument.doctype.name)&&(tn="<!DOCTYPE "+ae.ownerDocument.doctype.name+`>
`+tn),xe&&dd([C,A,z],On=>{tn=Sl(tn,On," ")}),L&&q?L.createHTML(tn):tn},e.setConfig=function(){let Ee=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Co(Ee),tt=!0},e.clearConfig=function(){fr=null,tt=!1},e.isValidAttribute=function(Ee,B,ae){fr||Co({});const _e=Et(Ee),ut=Et(B);return Po(_e,ut,ae)},e.addHook=function(Ee,B){typeof B=="function"&&Tl(y[Ee],B)},e.removeHook=function(Ee,B){if(B!==void 0){const ae=M$(y[Ee],B);return ae===-1?void 0:L$(y[Ee],ae,1)[0]}return dE(y[Ee])},e.removeHooks=function(Ee){y[Ee]=[]},e.removeAllHooks=function(){y=yE()},e}var Yf=tA();const J$={text:["headline","text"],media:["caption","credit"]},Z$={start_date:["display_date"],end_date:["display_date"],slide:["display_date","group"],date:["display_date"]};Yf.addHook("afterSanitizeAttributes",function(t){if(t.nodeName=="A"&&"href"in t){"target"in t.attributes||t.setAttribute("target","_blank");let e=t.attributes.rel;e?e.value.indexOf("noopener")==-1&&t.setAttribute("rel",`noopener ${e.value}`):t.setAttribute("rel","noopener")}});function _E(t,e,r){Object.keys(r).forEach(i=>{var s=i=="slide"?t:t[i];s&&r[i].forEach(o=>{typeof s[o]<"u"&&(s[o]=e(s[o]))})})}function e5(t){return Yf.sanitize(t,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder","target"]})}class Js{constructor(e){if(this.title="",this.scale="",this.events=[],this.eras=[],this.event_dict={},this.messages={errors:[],warnings:[]},typeof e=="object"&&e.events){if(this.scale=e.scale,this.events=[],this._ensureValidScale(e.events),e.title){var r=this._assignID(e.title);this._tidyFields(e.title),this.title=e.title,this.event_dict[r]=this.title}for(var i=0;i<e.events.length;i++)try{this.addEvent(e.events[i],!0)}catch(s){this.logError(s)}e.eras&&e.eras.forEach((s,o)=>{try{this.addEra(s)}catch(a){this.logError("Era "+o+": "+a)}}),cd(this.events),cd(this.eras)}}logError(e){Ye(`logError: ${e}`),this.messages.errors.push(e)}getErrors(e){return e?this.messages.errors.join(e):this.messages.errors}validate(){(typeof this.events>"u"||typeof this.events.length>"u"||this.events.length==0)&&this.logError("Timeline configuration has no events.");for(var e=0;e<this.eras.length;e++)if(typeof this.eras[e].start_date>"u"||typeof this.eras[e].end_date>"u"){var r;this.eras[e].headline?r=this.eras[e].headline:r="era "+(e+1),this.logError("All eras must have start and end dates. ["+r+"]")}}isValid(){return this.messages.errors.length==0}addEvent(e,r){var i=this._assignID(e);return typeof e.start_date>"u"?(Ye("Missing start date, skipping event"),console.log(e),null):(this._processDates(e),this._tidyFields(e),this.events.push(e),this.event_dict[i]=e,r||cd(this.events),i)}addEra(e){var r=this._assignID(e);if(typeof e.start_date>"u")throw new Ke("missing_start_date_err",r);this._processDates(e),this._tidyFields(e),this.eras.push({start_date:e.start_date,end_date:e.end_date,headline:e.text.headline})}_assignID(e){var r=e.unique_id;return er(r)||(r=e.text?vm(e.text.headline):null),e.unique_id=f$(this.event_dict,r),e.unique_id}_makeUniqueIdentifiers(e,r){for(var i=[e],s=0;s<r.length;s++)er(r[s].unique_id)&&(r[s].unique_id=vm(r[s].unique_id),i.indexOf(r[s].unique_id)==-1?i.push(r[s].unique_id):r[s].unique_id="");if(i.length!=r.length+1){for(var s=0;s<r.length;s++)if(!r[s].unique_id){var o=r[s].text?vm(r[s].text.headline):null;o||(o=go(6)),i.indexOf(o)!=-1&&(o=o+"-"+s),i.push(o),r[s].unique_id=o}}}_ensureValidScale(e){if(!this.scale){this.scale="human";for(var r=0;r<e.length;r++){if(e[r].scale=="cosmological"){this.scale="cosmological";break}if(e[r].start_date&&typeof e[r].start_date.year<"u"){var i=new Gf(e[r].start_date),s=i.data.date_obj.year;if(s<-271820||s>275759){this.scale="cosmological";break}}}Ye(`Determining scale dynamically: ${this.scale}`)}var o=uE[this.scale];o||this.logError("Don't know how to process dates on scale "+this.scale)}_processDates(e){var r=uE[this.scale];if(!(e.start_date instanceof r)){var i=e.start_date;if(e.start_date=new r(i),typeof e.end_date<"u"&&!(e.end_date instanceof r)){var s=e.end_date,o=!0;for(let a in i)o=o&&i[a]==s[a];o?(Ye("End date same as start date is redundant; dropping end date"),delete e.end_date):e.end_date=new r(s)}}}getEarliestDate(){var e=this.events[0].start_date;return this.eras&&this.eras.length>0&&this.eras[0].start_date.isBefore(e)?this.eras[0].start_date:e}getLatestDate(){for(var e=[],r=0;r<this.events.length;r++)this.events[r].end_date?e.push({date:this.events[r].end_date}):e.push({date:this.events[r].start_date});for(var r=0;r<this.eras.length;r++)this.eras[r].end_date?e.push({date:this.eras[r].end_date}):e.push({date:this.eras[r].start_date});return cd(e,"date"),e.slice(-1)[0].date}_tidyFields(e){function r(i,s,o){o||(o=""),i.hasOwnProperty(s)||(i[s]=o)}e.group&&(e.group=er(e.group)),e.text||(e.text={}),r(e.text,"text"),r(e.text,"headline"),_E(e,e5,J$),_E(e,T$,Z$)}}function t5(t,e){return t==null?"":(e=e||`
`,t.charAt(t.length-e.length)!==e?t:t.substring(0,t.length-e.length))}async function n5(t){return new Promise((e,r)=>{if(t.data){var i=nA(rA(t.data,t),t);i.useMemoryStore=!0,e(i)}else t.url&&window.fetch(t.url,{mode:"cors"}).then(function(s){if(s.status!=200){s.headers.get("content-type")=="application/json"?s.text().then(o=>{r(JSON.parse(o))}):r({status_code:s.status,message:`Error fetching CSV: [${s.status} ${s.statusText}]`});return}return s.text?s.text():s}).then(function(s){if(s){var o=s5(s,t);o.useMemoryStore=!0,e(o)}}).catch(s=>{r({status_code:500,message:`Error fetching CSV: ${s}`})})})}function nA(t,e){return e=e||{},e.noHeaderRow!==!0&&t.length>0?{fields:t[0].map((r,i)=>r&&r.trim?r.trim():`untitled${i}`),records:t.slice(1)}:{records:t}}function r5(t){var e={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var r in t)r==="trim"?e.skipinitialspace=t.trim:e[r.toLowerCase()]=t[r];return e}function rA(t,e){(!e||e&&!e.lineterminator)&&(t=i5(t,e));var r=r5(e);t=t5(t,r.lineterminator);var i="",s=!1,o=!1,a="",l=[],u=[],c,h;for(h=function(f){return o!==!0&&(f===""?f=null:r.skipinitialspace===!0&&(f=f.trim())),f},c=0;c<t.length;c+=1)i=t.charAt(c),s===!1&&(i===r.delimiter||i===r.lineterminator)?(a=h(a),l.push(a),i===r.lineterminator&&(u.push(l),l=[]),a="",o=!1):i!==r.quotechar?a+=i:s?t.charAt(c+1)===r.quotechar?(a+=r.quotechar,c+=1):s=!1:(s=!0,o=!0);return a=h(a),l.push(a),u.push(l),r.skipinitialrows&&(u=u.slice(r.skipinitialrows)),u}function i5(t,e){return e&&!e.lineterminator?t.replace(/(\r\n|\n|\r)/gm,`
`):t}function s5(t,e){let r=nA(rA(t,e)),i=[];return r.records.forEach(s=>{let o={};r.fields.forEach((a,l)=>o[a]=s[l]),i.push(o)}),i}function Fo(t){if(t)return t.replace(/[\s,]+/g,"")}function o5(t){let e={key:null,worksheet:0};var r=/\bkey=([-_A-Za-z0-9]+)&?/i,i=/docs.google.com\/spreadsheets(.*?)\/d\//;if(t.match(r))e.key=t.match(r)[1];else if(t.match(i)){var s=t.search(i)+t.match(i)[0].length,o=t.substr(s);e.key=o.split("/")[0],t.match(/\?gid=(\d+)/)&&(e.worksheet=t.match(/\?gid=(\d+)/)[1])}else t.match(/^\b[-_A-Za-z0-9]+$/)&&(e.key=t);return e.key?e:null}function a5(t){return typeof t!="string"?"":t.match(/^(https?:)?\/\/?/)?{url:t}:{color:t}}function l5(t){let e={};Object.keys(t).forEach(i=>{e[i]=er(t[i])});var r={media:{caption:e["Media Caption"]||"",credit:e["Media Credit"]||"",url:e.Media||"",thumbnail:e["Media Thumbnail"]||"",alt:e["Alt Text"]||""},text:{headline:e.Headline||"",text:e.Text||""},display_date:e["Display Date"]||"",group:e.Group||e.Tag||"",background:a5(e.Background),type:e.Type||""};if(Object.keys(e).includes("Start Date")||Object.keys(e).includes("End Date"))e["Start Date"]&&(r.start_date=rE(e["Start Date"])),e["End Date"]&&(r.end_date=rE(e["End Date"]));else{if(e.Year&&(r.start_date={year:Fo(e.Year),month:Fo(e.Month)||"",day:Fo(e.Day)||""}),e["End Year"]&&(r.end_date={year:Fo(e["End Year"])||"",month:Fo(e["End Month"])||"",day:Fo(e["End Day"])||""}),e.Time)if(r.start_date)ot(r.start_date,aE(e.Time));else throw new Ke("invalid_start_time_without_date");if(e["End Time"])if(r.end_date)ot(r.end_date,aE(e["End Time"]));else throw new Ke("invalid_end_time_without_date");if(r.start_date&&!lE(r.start_date))throw new Ke("invalid_date_err");if(r.end_date&&!lE(r.end_date))throw new Ke("invalid_date_err")}return r}async function u5(t,e){let r=[];t=c5(t),await n5({url:`${e}${t}`}).then(s=>{r=s}).catch(s=>{if(s.proxy_err_code=="response_not_csv")throw new Ke("Timeline could not read the data for your timeline. Make sure you have published it to the web.");let o="undefined error";throw Array.isArray(s.message)?o=s.message.join("<br>"):o=String(s.message),new Ke(o)});let i={events:[],errors:[],warnings:[],eras:[]};return r.forEach((s,o)=>{try{if(!p$(s)){let a=l5(s);f5(a,i)}}catch(a){if(a.constructor==Ke)i.errors.push(a);else{a.message&&(a=a.message);let l=s.Headline||o;i.errors.push(a+`[${l}]`)}}}),i}function c5(t){if(t=t.trim(),t.match(/^[a-zA-Z0-9-_]+$/))return`https://docs.google.com/spreadsheets/d/${t}/pub?output=csv`;if(t.startsWith("https://docs.google.com/spreadsheets/")){if(t.match(/\/pub\?output=csv$/))return t;let e=new URL(t),r=new URLSearchParams(e.search);r.set("output","csv"),r.get("gid")&&r.set("single","true"),e.search=`?${r.toString()}`;let i=e.pathname.substr(0,e.pathname.lastIndexOf("/"));return e.pathname=`${i}/pub`,e.toString()}throw new Ke("invalid_url_err",t)}async function d5(t,e){if(!e.sheets_proxy)throw new Ke("Proxy option must be set to read data from Google");var r=await u5(t,e.sheets_proxy);if(r)return r}async function h5(t,e){let r=null,i={};if(typeof e=="function"?r=e:typeof e=="object"&&(i=e,r=e.callback,typeof i.callback=="function"&&(r=i.callback)),!r)throw new Ke("Second argument to makeConfig must be either a function or an object which includes a 'callback' property with a 'function' type value");var s,o,a=o5(t);if(a){try{o=await d5(t,i)}catch(u){s=new Js,u.name=="NetworkError"?s.logError(new Ke("network_err")):u.name=="TLError"?s.logError(u):s.logError(new Ke("unknown_read_err",u.name)),r(s);return}if(s=new Js(o),o.errors)for(var l=0;l<o.errors.length;l++)s.logError(o.errors[l]);r(s)}else el({url:t,dataType:"json",success:function(u){try{s=new Js(u)}catch(c){s=new Js,s.logError(c)}r(s)},error:function(u,c,h){if(s=new Js,c=="parsererror")var h=new Ke("invalid_url_err");else var h=new Ke("unknown_read_err",c);s.logError(h),r(s)}})}function f5(t,e){var r="event";typeof t.type<"u"&&(r=t.type,delete t.type),r=="title"?e.title?(e.warnings.push("Multiple title slides detected."),e.events.push(t)):e.title=t:r=="era"?e.eras.push(t):e.events.push(t)}class p5{constructor(e){if(e)this.scale=e.scale,this.minor=e.minor,this.major=e.major;else throw new Ke("axis_helper_no_options_err")}getPixelsPerTick(e){return e*this.minor.factor}getMajorTicks(e){return this._getTicks(e,this.major)}getMinorTicks(e){return this._getTicks(e,this.minor)}_getTicks(e,r){for(var i=e._scaled_padding*r.factor,s=e._earliest-i,o=e._latest+i,a=[],l=s;l<o;l+=r.factor)a.push(e.getDateFromTime(l).floor(r.name));return{name:r.name,ticks:a}}}var yv={},iA=function(t,e){yv[t]=[];for(var r=0;r<e.length-1;r++){var i=e[r],s=e[r+1];yv[t].push(new p5({scale:i[3],minor:{name:i[0],factor:i[1]},major:{name:s[0],factor:s[1]}}))}};iA("human",Yr);iA("cosmological",$d);function m5(t,e){typeof e!="number"&&(e=100);var r=t.getScale(),i=yv[r];if(!i)throw new Ke("axis_helper_scale_err",r);for(var s=null,o=0;o<i.length;o++){var a=i[o],l=a.getPixelsPerTick(t._pixels_per_milli);if(l>e){if(s==null)return a;var u=Math.abs(e-l),c=Math.abs(e-l);return u<c?a:s}s=a}return i[i.length-1]}const g5={millisecond:"time_milliseconds",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"compact",epoch:"compact",era:"compact",eon:"compact",eon2:"compact"};class wE{constructor(e,r){var i=e.events;this._scale=e.scale,r=ot({display_width:500,screen_multiplier:3,max_rows:null},r),this._display_width=r.display_width,this._screen_multiplier=r.screen_multiplier,this._pixel_width=this._screen_multiplier*this._display_width,this._group_labels=void 0,this._positions=[],this._pixels_per_milli=0,this._earliest=e.getEarliestDate().getTime(),this._latest=e.getLatestDate().getTime(),this._span_in_millis=this._latest-this._earliest,this._span_in_millis<=0&&(this._span_in_millis=this._computeDefaultSpan(e)),this._average=this._span_in_millis/i.length,this._pixels_per_milli=this.getPixelWidth()/this._span_in_millis,this._axis_helper=m5(this),this._scaled_padding=1/this.getPixelsPerTick()*(this._display_width/2),this._computePositionInfo(i,r.max_rows)}_computeDefaultSpan(e){if(e.scale=="human"){for(var r={},i=0;i<e.events.length;i++){var s=e.events[i].start_date.findBestFormat();r[s]=r[s]?r[s]+1:1}for(var i=Yr.length-1;i>=0;i--)if(r.hasOwnProperty(Yr[i][0])){var o=Yr[Yr.length-1];return Yr[i+1]&&(o=Yr[i+1]),o[1]}return 365*24*60*60*1e3}return 2e5}getGroupLabels(){return this._group_labels||[]}getScale(){return this._scale}getNumberOfRows(){return this._number_of_rows}getPixelWidth(){return this._pixel_width}getPosition(e){return(e-this._earliest)*this._pixels_per_milli}getPositionInfo(e){return this._positions[e]}getPixelsPerTick(){return this._axis_helper.getPixelsPerTick(this._pixels_per_milli)}getTicks(){return{major:this._axis_helper.getMajorTicks(this),minor:this._axis_helper.getMinorTicks(this)}}getDateFromTime(e){if(this._scale=="human")return new qf(e);if(this._scale=="cosmological")return new Gf(new Ou(e));throw new Ke("time_scale_scale_err",this._scale)}getMajorScale(){return this._axis_helper.major.name}getMinorScale(){return this._axis_helper.minor.name}_assessGroups(e){for(var r=[],i=!1,s=0;s<e.length;s++)e[s].group&&(r.indexOf(e[s].group)<0?r.push(e[s].group):i=!0);return r.length&&i&&r.push(""),r}_computeRowInfo(e,r){for(var i=[],s=0,o=0;o<e.length;o++){var a=e[o],l=[];delete a.row;for(var u=0;u<i.length;u++)if(l.push(i[u].end-a.start),l[u]<=0){a.row=u,i[u]=a;break}if(typeof a.row>"u")if(r===null)a.row=i.length,i.push(a);else if(r>0)a.row=i.length,i.push(a),r--;else{var c=Math.min.apply(null,l),h=l.indexOf(c);a.row=h,a.end>i[h].end&&(i[h]=a),s++}}return{n_rows:i.length,n_overlaps:s}}_computePositionInfo(e,r,i){i=i||100;for(var s=[],o=!1,a=0;a<e.length;a++){var l={start:this.getPosition(e[a].start_date.getTime())};if(this._positions.push(l),typeof e[a].end_date<"u"){var u=this.getPosition(e[a].end_date.getTime());l.width=u-l.start,l.width>i?l.end=l.start+l.width:l.end=l.start+i}else l.width=i,l.end=l.start+i;e[a].group?s.indexOf(e[a].group)<0&&s.push(e[a].group):o=!0}if(s.length){o&&s.push("");for(var h=[],a=0;a<s.length;a++)h[a]={label:s[a],idx:a,positions:[],n_rows:1,n_overlaps:0};for(var a=0;a<this._positions.length;a++){var l=this._positions[a];l.group=s.indexOf(e[a].group||""),l.row=0;for(var f=h[l.group],p=f.positions.length-1;p>=0;p--)f.positions[p].end>l.start&&f.n_overlaps++;f.positions.push(l)}for(var g=s.length;;){var b=Math.max(0,r-g);if(!b||(h.sort(function(_,T){return _.n_overlaps>T.n_overlaps?-1:_.n_overlaps<T.n_overlaps?1:_.idx-T.idx}),!h[0].n_overlaps))break;for(var g=0,a=0;a<h.length;a++){var f=h[a];if(f.n_overlaps&&b){var R=this._computeRowInfo(f.positions,f.n_rows+1);f.n_rows=R.n_rows,f.n_overlaps=R.n_overlaps,b--}g+=f.n_rows}}this._number_of_rows=g,this._group_labels=[],h.sort(function(x,_){return x.idx-_.idx});for(var a=0,P=0;a<h.length;a++){this._group_labels.push({label:h[a].label,rows:h[a].n_rows});for(var p=0;p<h[a].positions.length;p++){var l=h[a].positions[p];l.row+=P}P+=h[a].n_rows}}else{var c=this._computeRowInfo(this._positions,r);this._number_of_rows=c.n_rows}}getAxisTickDateFormat(e){return this._scale=="cosmological"?"compact":g5[e]}}class sA{constructor(e){this._el={parent:{},container:{},message:{}},this.options={width:600,height:600},this.data={label:"",rows:1},this._el.container=pe("div","tl-timegroup"),ot(this.data,e),this.animator={},this._initLayout(),this._initEvents()}updateDisplay(e,r){}setRowPosition(e,r){this.options.height=r*this.data.rows,this.setPosition({top:e}),this._el.container.style.height=this.options.height+"px"}setAlternateRowColor(e,r){var i="tl-timegroup";e&&(i+=" tl-timegroup-alternate"),r&&(i+=" tl-timegroup-hidden"),this._el.container.className=i}_onMouseClick(){this.fire("clicked",this.options)}_initLayout(){this._el.message=pe("div","tl-timegroup-message",this._el.container),this._el.message.innerHTML=this.data.label}_initEvents(){Ve.addListener(this._el.container,"click",this._onMouseClick,this)}_updateDisplay(e,r,i){}}Dn(sA,Mn,Li);class oA{constructor(e,r,i,s){this.start_date=e,this.end_date=r,this.headline=i,this._el={container:{},background:{},content_container:{},content:{},text:{}},this._text={},this._state={loaded:!1},this.options={duration:1e3,ease:Hf,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,ot(this.options,s),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(e){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.start_date.getTime()}getEndTime(){return this.end_date?this.end_date.getTime():!1}setHeight(e){var r=12,i=1;this._el.content_container.style.height=e+"px",this._el.content.className="tl-timeera-content",$f?(i=Math.floor(e/(r+2)),i<1&&(i=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=i):(i=e/r,i>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=i*r+"px")}setWidth(e){this.end_date&&(this._el.container.style.width=e+"px",e>this.options.marker_width_min?(this._el.content_container.style.width=e+"px",this._el.content_container.className="tl-timeera-content-container tl-timeera-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timeera-content-container"))}setClass(e){this._el.container.className=e}setRowPosition(e,r){this.setPosition({top:e}),r<56&&this._el.content_container.remove("tl-timeera-content-container-small")}setColor(e){this._el.container.className="tl-timeera tl-timeera-color"+e}_initLayout(){this._el.container=pe("div","tl-timeera"),this.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timeera tl-timeera-with-end"),this._el.content_container=pe("div","tl-timeera-content-container",this._el.container),this._el.background=pe("div","tl-timeera-background",this._el.content_container),this._el.content=pe("div","tl-timeera-content",this._el.content_container),this._el.text=pe("div","tl-timeera-text",this._el.content),this._text=pe("h2","tl-headline",this._el.text),this.headline&&this.headline!=""&&(this._text.innerHTML=ma(this.headline)),this.onLoaded()}_initEvents(){}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}Dn(oA,Mn,Li);function v5(t){const e=t.getBoundingClientRect();return e.left>=0&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}class aA{constructor(e,r,i){i&&this.setLanguage(i),this._el={container:{},content_container:{},major:{},minor:{}},this._text={},this._state={loaded:!1},this.data={},this.options={duration:1e3,ease:Hf,width:600,height:600},this.active=!1,this.animator={},this.axis_helper={},this.minor_ticks=[],this.major_ticks=[],typeof e=="object"?this._el.container=e:this._el.container=cc(e),ot(this.options,r),this._initLayout(),this._initEvents()}show(){}hide(){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}getLeft(){return this._el.container.style.left.slice(0,-2)}drawTicks(e,r){var i=e.getTicks();this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor",this._el.major.style.opacity=0,this._el.minor.style.opacity=0,this.major_ticks=this._createTickElements(i.major.ticks,this._el.major,e.getAxisTickDateFormat(i.major.name)),this.minor_ticks=this._createTickElements(i.minor.ticks,this._el.minor,e.getAxisTickDateFormat(i.minor.name),i.major.ticks),this.positionTicks(e,r,!0),this._el.major.className="tl-timeaxis-major tl-animate-opacity tl-timeaxis-animate-opacity",this._el.minor.className="tl-timeaxis-minor tl-animate-opacity tl-timeaxis-animate-opacity",this._el.major.style.opacity=1,this._el.minor.style.opacity=1}_createTickElements(e,r,i,s){r.innerHTML="";var o={},a=new Date(-1,13,-30);if(o[a.getTime()]=!0,s)for(var l=0;l<s.length;l++)o[s[l].getTime()]=!0;for(var u=[],l=0;l<e.length;l++){var c=e[l];if(!(c.getTime()in o)){var h=pe("div","tl-timeaxis-tick",r),f=pe("span","tl-timeaxis-tick-text tl-animate-opacity",h);let g=c.getDisplayDate(this.getLanguage(),i);f.innerHTML=g,u.push({tick:h,tick_text:f,display_date:g,date:c})}}return u}positionTicks(e,r,i){i?(this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor"):(this._el.major.className="tl-timeaxis-major tl-timeaxis-animate",this._el.minor.className="tl-timeaxis-minor tl-timeaxis-animate"),this._positionTickArray(this.major_ticks,e,r),this._positionTickArray(this.minor_ticks,e,r)}_positionTickArray(e,r,i){if(e[1]&&e[0]){var s=r.getPosition(e[1].date.getMillisecond())-r.getPosition(e[0].date.getMillisecond()),o=1;s<i&&(o=Math.round(i/r.getPixelsPerTick()));for(var a=1,l=0;l<e.length;l++){var u=e[l];u.tick.style.left=r.getPosition(u.date.getMillisecond())+"px",u.tick_text.innerHTML=u.display_date,o>1?a>=o?(a=1,u.tick_text.style.opacity=1,u.tick.className="tl-timeaxis-tick"):(a++,u.tick_text.style.opacity=0,u.tick.className="tl-timeaxis-tick tl-timeaxis-tick-hidden"):(u.tick_text.style.opacity=1,u.tick.className="tl-timeaxis-tick")}}}getVisibleTicks(){return{major:this._getVisibleTickArray(this.major_ticks),minor:this._getVisibleTickArray(this.minor_ticks)}}_getVisibleTickArray(e){return e.filter(({tick:r})=>v5(r))}_initLayout(){this._el.content_container=pe("div","tl-timeaxis-content-container",this._el.container),this._el.major=pe("div","tl-timeaxis-major",this._el.content_container),this._el.minor=pe("div","tl-timeaxis-minor",this._el.content_container),this.onLoaded()}_initEvents(){}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}Dn(aA,Mn,Li,ji);class lA{constructor(e,r,i){this._el={container:{},content_container:{},content:{},headline_container:{},headline:{},date:{}},this.options={title:!1},this.data={unique_id:"",headline:"headline",text:"text"},y$(this,e),ot(this.options,r),this._el.container=pe("div","tl-text"),this._el.container.id=this.data.unique_id,this._initLayout(),i&&i.appendChild(this._el.container)}show(){}hide(){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}headlineHeight(){return this._el.headline.offsetHeight+40}addDateText(e){this._el.date.innerHTML=e}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){if(this._el.content_container=pe("div","tl-text-content-container",this._el.container),this._el.headline_container=pe("div","tl-text-headline-container",this._el.content_container),this.data.headline!=""){var e="tl-headline";this.options.title&&(e="tl-headline tl-headline-title"),this._el.headline=pe("h2",e,this._el.headline_container),this._el.headline.innerHTML=this.data.headline}if(this._el.date=pe("h3","tl-headline-date",this._el.headline_container),this.data.text!=""){var r="";r+=_$(this.options.autolink==!0?hv(this.data.text):this.data.text),this._el.content=pe("div","tl-text-content",this._el.content_container),this._el.content.innerHTML=r}this.onLoaded()}}Dn(lA,Mn);class _t{constructor(e,r,i){i&&this.setLanguage(i),this._el={container:{},content_container:{},content:{},content_item:{},content_link:{},caption:null,credit:null,parent:{},link:null},this.player=null,this.timer=null,this.load_timer=null,this.message=null,this.media_id=null,this._state={loaded:!1,show_meta:!1,media_loaded:!1},this.data={unique_id:null,url:null,credit:null,caption:null,credit_alternate:null,caption_alternate:null,link:null,link_target:null},this.options={api_key_flickr:"bd3a7c45ddd52f3101825d41563a6125",api_key_googlemaps:"AIzaSyB9dW8e_iRrATFa8g24qB6BDBGdkrLDZYI",api_key_embedly:"",credit_height:0,caption_height:0,background:0},this.animator={},ot(this.options,r),ot(this.data,e),this.options.background||(this._el.container=pe("div","tl-media"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._initLayout())}loadMedia(){var e=this;if(!this._state.loaded)try{this.load_timer=setTimeout(function(){e.loadingMessage(),e._loadMedia(),e._updateDisplay()},1200)}catch(r){Ye("Error loading media for ",this._media),Ye(r)}}_updateMessage(e){this.message&&this.message.updateMessage(e)}loadingMessage(){this._updateMessage(this._("loading")+" "+this.options.media_name)}errorMessage(e){e?e=this._("error")+": "+e:e=this._("error"),this._updateMessage(e)}updateMediaDisplay(e){this._state.loaded&&!this.options.background&&(Io?this._el.content_item.style.maxHeight=this.options.height/2+"px":this._el.content_item.style.maxHeight=this.options.height-this.options.credit_height-this.options.caption_height-30+"px",this._el.container.style.maxWidth=this.options.width+"px",La&&this._el.content_item.offsetWidth>this._el.content_item.offsetHeight,this._updateMediaDisplay(e),this._state.media_loaded&&(this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")))}_loadMedia(){this.onLoaded()}_updateMediaDisplay(e){La&&(this._el.content_item.style.maxWidth=this.options.width+"px",this._el.content_item.style.width="auto")}_getMeta(){}_getImageURL(e,r){return""}show(){}hide(){}addTo(e){e.appendChild(this._el.container),this.onAdd()}removeFrom(e){e.removeChild(this._el.container),this.onRemove()}getImageURL(e,r){return this._getImageURL(e,r)}updateDisplay(e,r,i){this._updateDisplay(e,r,i)}stopMedia(){try{this._stopMedia()}catch(e){Ye(`stopMedia() exception: ${e}`)}}loadErrorDisplay(e){try{this._el.content.removeChild(this._el.content_item)}catch{}this._el.content_item=pe("div","tl-media-item tl-media-loaderror",this._el.content),this._el.content_item.innerHTML="<div class='tl-icon-"+this.options.media_type+"'></div><p>"+e+"</p>",this.onLoaded(!0)}onLoaded(e){this._state.loaded=!0,this.fire("loaded",this.data),this.message&&this.message.hide(),e||this.options.background||this.showMeta(),this.updateDisplay()}onMediaLoaded(e){this._state.media_loaded=!0,this.fire("media_loaded",this.data),this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")}showMeta(e,r){this._state.show_meta=!0,this.data.credit&&this.data.credit!=""&&(this._el.credit=pe("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.options.autolink==!0?hv(this.data.credit):this.data.credit,this.options.credit_height=this._el.credit.offsetHeight),this.data.caption&&this.data.caption!=""&&(this._el.caption=pe("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.options.autolink==!0?hv(this.data.caption):this.data.caption,this.options.caption_height=this._el.caption.offsetHeight),(!this.data.caption||!this.data.credit)&&this.getMeta()}getMeta(){this._getMeta()}updateMeta(){!this.data.credit&&this.data.credit_alternate&&(this._el.credit=pe("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.data.credit_alternate,this.options.credit_height=this._el.credit.offsetHeight),!this.data.caption&&this.data.caption_alternate&&(this._el.caption=pe("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.data.caption_alternate,this.options.caption_height=this._el.caption.offsetHeight),this.updateDisplay()}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){this.message=new Kf(this._el.container,this.options,this.getLanguage()),this._el.content_container=pe("div","tl-media-content-container",this._el.container),this.data.link&&this.data.link!=""?(this._el.link=pe("a","tl-media-link",this._el.content_container),this._el.link.href=this.data.link,this.data.link_target&&this.data.link_target!=""?this._el.link.target=this.data.link_target:this._el.link.target="_blank",this._el.link.target=="_blank"&&this._el.link.setAttribute("rel","noopener"),this._el.content=pe("div","tl-media-content",this._el.link)):this._el.content=pe("div","tl-media-content",this._el.content_container)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r),i&&(this.options.layout=i),this._el.credit&&(this.options.credit_height=this._el.credit.offsetHeight),this._el.caption&&(this.options.caption_height=this._el.caption.offsetHeight+5),this.updateMediaDisplay(this.options.layout)}domCreate(...e){return pe(...e)}_stopMedia(){}}Dn(_t,Mn,ji);let bE=class extends _t{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=this,r="tl-media-item tl-media-image tl-media-shadow";(this.data.url.match(/.png(\?.*)?$/)||this.data.url.match(/.svg(\?.*)?$/))&&(r="tl-media-item tl-media-image"),this._el.content_item=this.domCreate("img",r,this._el.content),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=Oa(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=Oa(this.data.caption)),this._el.content_item.addEventListener("load",function(i){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL()}getImageURL(e,r){return zf(this.data.url)}_updateMediaDisplay(e){La&&(this._el.content_item.style.width="auto")}};class y5{constructor(e){this.doc=e,this.pending={},this.queue={css:[],js:[]},this.styleSheets=e.styleSheets,this.env=this.getEnv(),this.head=this.doc.head||this.doc.getElementsByTagName("head")[0],this.pollCount=0}createNode(e,r){var i=this.doc.createElement(e),s;for(s in r)r.hasOwnProperty(s)&&i.setAttribute(s,r[s]);return i}finish(e){var r=this.pending[e],i,s;r&&(i=r.callback,s=r.urls,s.shift(),this.pollCount=0,s.length||(i&&i.call(r.context,r.obj),this.pending[e]=null,this.queue[e].length&&this.load(e)))}getEnv(){var e=navigator.userAgent,r={async:this.doc.createElement("script").async===!0};return(r.webkit=/AppleWebKit\//.test(e))||(r.ie=/MSIE/.test(e))||(r.opera=/Opera/.test(e))||(r.gecko=/Gecko\//.test(e))||(r.unknown=!0),r}load(e,r,i,s,o){var a=(function(){this.finish(e)}).bind(this),l=e==="css",u=[],c,h,f,p,g,b;if(r)if(r=typeof r=="string"?[r]:r.concat(),l||this.env.async||this.env.gecko||this.env.opera)this.queue[e].push({urls:r,callback:i,obj:s,context:o});else for(c=0,h=r.length;c<h;++c)this.queue[e].push({urls:[r[c]],callback:c===h-1?i:null,obj:s,context:o});if(!(this.pending[e]||!(p=this.pending[e]=this.queue[e].shift()))){for(g=p.urls,c=0,h=g.length;c<h;++c)b=g[c],l?f=this.env.gecko?this.createNode("style"):this.createNode("link",{href:b,rel:"stylesheet"}):(f=this.createNode("script",{src:b}),f.async=!1),f.className="lazyload",f.setAttribute("charset","utf-8"),this.env.ie&&!l?f.onreadystatechange=function(){/loaded|complete/.test(f.readyState)&&(f.onreadystatechange=null,a())}:l&&(this.env.gecko||this.env.webkit)?this.env.webkit?(p.urls[c]=f.href,this.pollWebKit()):(f.innerHTML='@import "'+b+'";',this.pollGecko(f)):f.onload=f.onerror=a,u.push(f);for(c=0,h=u.length;c<h;++c)this.head.appendChild(u[c])}}pollGecko(e){var r;try{r=!!e.sheet.cssRules}catch{if(this.pollCount+=1,this.pollCount<200){var i=this;setTimeout(function(){i.pollGecko(e)},50)}else r&&this.finish("css");return}this.finish("css")}pollWebKit(){var e=this.pending.css,r;if(e){for(r=this.styleSheets.length;--r>=0;)if(this.styleSheets[r].href===e.urls[0]){this.finish("css");break}this.pollCount+=1,e&&(this.pollCount<200?setTimeout(this.pollWebKit.bind(this),50):this.finish("css"))}}css(e,r,i,s){this.load("css",e,r,i,s)}js(e,r,i,s){this.load("js",e,r,i,s)}}function vo(t,e,r,i){uA.js(t,e,r,i)}function Tm(t,e,r,i){uA.css(t,e,r,i)}let uA=new y5(document);class _5 extends _t{_loadMedia(){var e=this,r;this.youtube_loaded=!1,this._el.content_item=this.domCreate("div","tl-media-item tl-media-youtube tl-media-shadow",this._el.content),this._el.content_item.id=go(7),r=w$(this.data.url),this.media_id={},this.data.url.match("v=")?this.media_id.id=r.v:this.data.url.match("/embed/")?this.media_id.id=this.data.url.split("embed/")[1].split(/[?&]/)[0]:this.data.url.match(/v\/|v=|youtu\.be\//)?this.media_id.id=this.data.url.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0]:Ye("YOUTUBE IN URL BUT NOT A VALID VIDEO"),this.data.url.match("start=")?this.media_id.start=ym(this.data.url.split("start=")[1]):this.data.url.match("t=")&&(this.media_id.start=ym(this.data.url.split("t=")[1])),this.data.url.match("end=")&&(this.media_id.end=ym(this.data.url.split("end=")[1])),this.media_id.hd=typeof r.hd<"u",vo("https://www.youtube.com/iframe_api",function(){e.createMedia()})}_updateMediaDisplay(){this._el.content_item.style.height=ko.r16_9({w:this.options.width})+"px",this._el.content_item.style.width=this.options.width+"px"}_stopMedia(){if(this.youtube_loaded)try{this.player.getPlayerState()==YT.PlayerState.PLAYING&&this.player.pauseVideo()}catch(e){Ye(e)}}createMedia(){var e=this;clearTimeout(this.timer),typeof YT<"u"&&typeof YT.Player<"u"?this.player=new YT.Player(this._el.content_item.id,{playerVars:{enablejsapi:1,color:"white",controls:1,start:this.media_id.start,end:this.media_id.end,fs:1},videoId:this.media_id.id,events:{onReady:function(){e.onPlayerReady(),e.onLoaded()},onStateChange:e.onStateChange}}):this.timer=setTimeout(function(){e.createMedia()},1e3)}onPlayerReady(e){this.youtube_loaded=!0,this._el.content_item=document.getElementById(this._el.content_item.id),this.onMediaLoaded()}onStateChange(e){e.data==YT.PlayerState.ENDED&&(e.target.seekTo(0),e.target.pauseVideo())}}class w5 extends _t{_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-map tl-media-shadow",this._el.content),this.media_id=this.data.url,this.mapframe=this.domCreate("iframe","",this._el.content_item),this.mapframe.width="100%",this.mapframe.height="100%",this.mapframe.frameBorder="0",this.mapframe.src=this.makeGoogleMapsEmbedURL(this.media_id,this.options.api_key_googlemaps),this.onLoaded()}_updateMediaDisplay(){if(this._state.loaded){var e=ko.square({w:this._el.content_item.offsetWidth});this._el.content_item.style.height=e.h+"px"}}makeGoogleMapsEmbedURL(e,r){var i=!1;function s(f){function p(R,P){if(R.slice(-1)=="z")P.zoom=R;else if(R.slice(-1)=="m")P.zoom=14,P.maptype="satellite";else if(R.slice(-1)=="t"){if(i=!0,b=="place")var x=f.match(h.place)[3]+","+f.match(h.place)[4];else{var x=P.center;delete P.center}P={},P.location=x,streetview_params=R.split(",");for(let T in o.streetview){var _=parseInt(T)+1;o.streetview[T]=="pitch"&&streetview_params[_]=="90t"?P[o.streetview[T]]=0:P[o.streetview[T]]=streetview_params[_].slice(0,-1)}}return P}function g(R,P){var x={},_=P[1],T=P[P.length-1];for(let F in o[R]){var L=parseInt(F)+2;o[R][F]=="center"?x[o[R][F]]=P[L]+","+P[++L]:x[o[R][F]]=P[L]}return x=p(T,x),x.key=r,i==!0&&(R="streetview"),_+"/embed/v1/"+R+b$(x)}let b="view";return f.match(h.place)?b="place":f.match(h.directions)?b="directions":f.match(h.search)&&(b="search"),g(b,f.match(h[b]))}var o={view:["center"],place:["q","center"],directions:["origin","destination","center"],search:["q","center"],streetview:["fov","heading","pitch"]},a=/(https:\/\/.+google.+?\/maps)/,l=/@([-\d.]+),([-\d.]+)/,u=/([\w\W]+)/,c=/,((?:[-\d.]+[zmayht],?)*)/,h={view:new RegExp(a.source+"/"+l.source+c.source),place:new RegExp(a.source+"/place/"+u.source+"/"+l.source+c.source),directions:new RegExp(a.source+"/dir/"+u.source+"/"+u.source+"/"+l.source+c.source),search:new RegExp(a.source+"/search/"+u.source+"/"+l.source+c.source)};return s(e)}}class b5 extends _t{constructor(e,r,i){super(e,r,i),this.blockquote=Yf.sanitize(this.data.url)}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-blockquote",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this._el.content_item.innerHTML=this.blockquote,this.onLoaded()}updateMediaDisplay(){}}class x5 extends _t{_loadMedia(){var e,r,i=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-wikipedia",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.media_id=this.data.url.split("wiki/")[1].split("#")[0].replace("_"," "),this.media_id=this.media_id.replace(" ","%20"),r=this.data.url.split("//")[1].split(".wikipedia")[0],e="https://"+r+".wikipedia.org/w/api.php?action=query&prop=extracts|pageimages&redirects=&titles="+this.media_id+"&exintro=1&format=json&callback=?",el({type:"GET",url:e,dataType:"json",success:function(s){i.createMedia(s)},error:function(s,o){var a="";a+=i._("wikipedia_load_err")+"<br/>"+i.media_id+"<br/>"+o,i.loadErrorDisplay(a)}})}createMedia(e){var r="";if(e.query){var i="",r={entry:{},title:"",text:"",extract:"",paragraphs:1,page_image:"",text_array:[]};r.entry=x$(e.query.pages,0),r.extract=r.entry.extract,r.title=r.entry.title,r.page_image=r.entry.thumbnail,r.extract.match("<p>")?r.text_array=r.extract.split("<p>"):r.text_array.push(r.extract);for(var s=0;s<r.text_array.length;s++)s+1<=r.paragraphs&&s+1<r.text_array.length&&(r.text+="<p>"+r.text_array[s+1]);i+="<span class='tl-icon-wikipedia'></span>",i+="<div class='tl-wikipedia-title'><h4><a href='"+this.data.url+"' target='_blank' rel='noopener'>"+r.title+"</a></h4>",i+="<span class='tl-wikipedia-source'>"+this._("wikipedia")+"</span></div>",r.page_image,i+=r.text,r.extract.match("REDIRECT")||(this._el.content_item.innerHTML=i,this.onLoaded())}}updateMediaDisplay(){}}function E5(t){if(t.match(/^.+#\/media\/.+/))return`File:${t.split("#")[1].split(":")[1]}`;if(t.match(/^.*commons.wikimedia.org\/wiki\/File:.+/)){let e=t.split("/");return e[e.length-1]}return null}function T5(t){let e={};if(t.query&&t.query.pages){let r=Object.keys(t.query.pages);e.page_id=r[0];let i=t.query.pages[e.page_id];e.url=i.imageinfo[0].thumburl,i.entityterms&&i.entityterms.label&&(e.label=i.entityterms.label[0])}return e}class xE extends _t{_loadMedia(){var e,r=Math.round(this.options.width)||1e3,i=this.getLanguage().lang.toLowerCase(),s=this;try{this.establishMediaID(),e=`https://commons.wikimedia.org/w/api.php?action=query&titles=${this.media_id}&prop=imageinfo|entityterms&iiprop=url&&iiurlwidth=${r}&format=json&origin=*&wbetlanguage=${i}`,$h(e,function(o){let a=T5(o);a.url?(s.base_image_url=a.url,s.page_id=a.page_id,!s.data.alt&&a.label&&(s.data.alt=a.label),s.options.background||s.createMedia(),s.onLoaded()):s.loadErrorDisplay(s._("wikipedia_image_load_err"))})}catch(o){s.loadErrorDisplay(s._(o.message_key))}}establishMediaID(){let e=E5(this.data.url);if(e)this.media_id=e;else throw new Ke("Invalid Wikipedia Image URL")}createMedia(){var e=this;if(this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-wikipedia-image tl-media-shadow",this._el.content),this.data.alt)this._el.content_item.alt=this.data.alt;else if(this.page_id){let r=`M${this.page_id}`,i=`https://commons.wikimedia.org/w/api.php?action=wbgetentities&format=json&ids=${r}&format=json&origin=*`;Wf(i).then(s=>{if(s.entities&&s.entities[r]){let o=s.entities[r].labels,a=e.getLanguage().lang.toLowerCase(),l=null;o[a]?l=o[a]:a.length>2&&o[a.substr(0,2)]?l=o[a.substr(0,2)]:o.en&&(l=o.en),l?(console.log(`wikibase_id: ${e.media_id} alt ${l.value}`),e.data.alt=l.value,e._el.content_item.alt=e.data.alt):console.log(`wikibase_id: ${e.media_id} ain't got no alt`)}})}this.data.title&&(this._el.content_item.title=this.data.title),this._el.content_item.addEventListener("load",function(r){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}_getImageURL(e,r){if(e&&this.base_image_url){let i=this.base_image_url.match(/(\/[\d\.]+px-)/);if(i)return e=Math.round(e),this.base_image_url.replace(i[1],`/${e}px-`)}return this.base_image_url}}class S5 extends _t{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-soundcloud tl-media-shadow",this._el.content),this.media_id=this.data.url,e="https://soundcloud.com/oembed?url="+this.media_id+"&format=js&callback=?",$h(e,function(i){vo("https://w.soundcloud.com/player/api.js",function(){r.createMedia(i)})})}createMedia(e){this._el.content_item.innerHTML=e.html,self.widget=SC.Widget(this._el.content_item.querySelector("iframe")),this.soundCloudCreated=!0,this.onLoaded()}_stopMedia(){this.soundCloudCreated&&self.widget.pause()}}class I5 extends _t{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vimeo tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0];var i=null;this.data.url.match(/#t=([^&]+).*/)&&(i=this.data.url.match(/#t=([^&]+).*/)[1]),e="https://player.vimeo.com/video/"+this.media_id+"?api=1&title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff",i&&(e=e+="&amp;#t="+i),this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(s){r.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=ko.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player&&this.player.contentWindow&&this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(e){Ye(e)}}}class k5 extends _t{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-dailymotion",this._el.content),this.data.url.indexOf("dai.ly/")!=-1?this.media_id=this.data.url.substr(this.data.url.indexOf("dai.ly/")+7):this.data.url.match("video")?this.media_id=this.data.url.split("video/")[1].split(/[?&]/)[0]:this.media_id=this.data.url.split("embed/")[1].split(/[?&]/)[0],this.media_id.indexOf("_")!=-1&&(this.media_id=this.media_id.split("_")[0]),e="https://www.dailymotion.com/embed/video/"+this.media_id+"?api=postMessage",this._el.content_item.innerHTML="<iframe autostart='false' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._state.loaded&&(this._el.content_item.style.height=ko.r16_9({w:this._el.content_item.offsetWidth})+"px")}_stopMedia(){this._state.loaded&&this._el.content_item.querySelector("iframe").contentWindow.postMessage('{"command":"pause","parameters":[]}',"*")}}class C5 extends _t{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vine tl-media-shadow",this._el.content),this.media_id=this.data.url.split("vine.co/v/")[1],e="https://vine.co/v/"+this.media_id+"/embed/simple",this._el.content_item.innerHTML="<iframe frameborder='0' width='100%' height='100%' src='"+e+"'></iframe><script async src='https://platform.vine.co/static/scripts/embed.js' charset='utf-8'><\/script>",this.onLoaded()}_updateMediaDisplay(){var e=ko.square({w:this._el.content_item.offsetWidth,h:this.options.height});this._el.content_item.style.height=e.h+"px"}_stopMedia(){this._el.content_item.querySelector("iframe").contentWindow.postMessage("pause","*")}}class A5 extends _t{_loadMedia(){var e,r=this;if(this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.data.url.match("^(https?:)?/*(www.)?(twitter|x).com"))this.data.url.match("status/")?this.media_id=this.data.url.split("status/")[1]:this.data.url.match("statuses/")?this.media_id=this.data.url.split("statuses/")[1]:this.media_id="";else if(this.data.url.match(`<blockquote class=['"]twitter-tweet['"]`)){var i=this.data.url.match(/(status|statuses)\/(\d+)/);if(i&&i.length>2)this.media_id=i[2];else{r.loadErrorDisplay(r._("twitterembed_invalidurl_err"));return}}e="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",el({type:"GET",url:e,dataType:"json",success:function(s){r.createMedia(s)},error:function(s,o){var a="";a+=r._("twitter_load_err")+"<br/>"+r.media_id+"<br/>"+o,r.loadErrorDisplay(a)}})}createMedia(e){var r="",i="",s="",o="",a="",l="",u=this;i=e.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=e.author_url.split("twitter.com/")[1],o=e.html.split("</p>&mdash;")[1].split('<a href="')[1],a=o.split('">')[0],l=o.split('">')[1].split("</a>")[0],i=i.replace(/<a href/ig,'<a target="_blank" rel="noopener" href'),i.includes("pic.twitter.com")||i.includes("pic.x.com")?(vo("https://platform.twitter.com/widgets.js",function(){twttr.widgets.createTweet(u.media_id,u._el.content_item,{conversation:"none",linkColor:"#cc0000",theme:"light"})}),this.onLoaded()):(r+=i,r+="<div class='vcard'>",r+="<a href='"+a+"' class='twitter-date' rel='noopener' target='_blank'>"+l+"</a>",r+="<img src='' class='tl-media-item tl-media-image'></a>",r+="<div class='author'>",r+="<a class='screen-name url' href='"+e.author_url+"' rel='noopener' target='_blank'>",r+="<span class='avatar'></span>",r+="<span class='fn'>"+e.author_name+" <span class='tl-icon-twitter'></span></span>",r+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",r+="</a>",r+="</div>",r+="</div>",this._el.content_item.innerHTML=r,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class P5 extends _t{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text";var i=this.data.url.match(/(status|statuses)\/(\d+)/);if(i&&i.length>2)this.media_id=i[2];else{r.loadErrorDisplay(r._("twitterembed_invalidurl_err"));return}e="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",window.twttr=function(s,o,a){var l,u=s.getElementsByTagName(o)[0],c=window.twttr||{};return s.getElementById(a)||(l=s.createElement(o),l.id=a,l.src="https://platform.twitter.com/widgets.js",u.parentNode.insertBefore(l,u),c._e=[],c.ready=function(h){c._e.push(h)}),c}(document,"script","twitter-wjs"),el({type:"GET",url:e,dataType:"json",success(s){r.createMedia(s)},error:function(s,o){var a="";a+=r._("twitter_load_err")+"<br/>"+r.media_id+"<br/>"+o,r.loadErrorDisplay(a)}})}createMedia(e){var r="",i="",s="",o="",a="",l="";i=e.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=e.author_url.split("twitter.com/")[1],o=e.html.split("</p>&mdash;")[1].split('<a href="')[1],a=o.split('">')[0],l=o.split('">')[1].split("</a>")[0],i=i.replace(/<a href/ig,'<a target="_blank" rel="noopener" href');let u=this.media_id;i.includes("pic.twitter.com")?(twttr.ready(function(c){r=document.getElementsByClassName("tl-media-twitter")[0];var h=String(u);twttr.widgets.createTweet(h,r,{conversation:"none",linkColor:"#cc0000",theme:"light"}).then(function(f){this.onLoaded()})}),this._el.content_item.innerHTML=r,this.onLoaded()):(r+=i,r+="<div class='vcard'>",r+="<a href='"+a+"' class='twitter-date' rel='noopener' target='_blank'>"+l+"</a>",r+="<div class='author'>",r+="<a class='screen-name url' href='"+e.author_url+"' rel='noopener' target='_blank'>",r+="<span class='avatar'></span>",r+="<span class='fn'>"+e.author_name+" <span class='tl-icon-twitter'></span></span>",r+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",r+="</a>",r+="</div>",r+="</div>",this._el.content_item.innerHTML=r,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class EE extends _t{_loadMedia(){var e,r=this;try{this.establishMediaID(),e="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",$h(e,function(i){i.stat=="ok"?(r.sizes=i.sizes.size,r.options.background||r.createMedia(),r.onLoaded()):r.loadErrorDisplay(r._("flickr_notfound_err"))})}catch(i){r.loadErrorDisplay(r._(i.message_key))}}establishMediaID(){if(this.data.url.match(/flic.kr\/.+/i)){var e=this.data.url.split("/").slice(-1)[0];this.media_id=E$.decode(e)}else{var r="flickr.com/photos/",i=this.data.url.indexOf(r);if(i==-1)throw new Ke("flickr_invalidurl_err");var s=i+r.length;this.media_id=this.data.url.substr(s).split("/")[1]}}createMedia(){var e=this;this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-flickr tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=Oa(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=Oa(this.data.caption)),this._el.content_item.addEventListener("load",function(r){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}getImageURL(e,r){for(var i=this.size_label(r),s=this.sizes[this.sizes.length-2].source,o=0;o<this.sizes.length;o++)this.sizes[o].label==i&&(s=this.sizes[o].source);return s}_getMeta(){var e=this,r;r="https://api.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",$h(r,function(i){e.data.credit_alternate="<a href='"+e.data.url+"' target='_blank' rel='noopener'>"+i.photo.owner.realname+"</a>",e.data.caption_alternate=i.photo.title._content+" "+i.photo.description._content,e.updateMeta()})}size_label(e){var r="";return e<=75?e<=0?r="Large":r="Thumbnail":e<=180?r="Small":e<=240?r="Small 320":e<=375?r="Medium":e<=480?r="Medium 640":(e<=600,r="Large"),r}}class R5 extends _t{_loadMedia(){var e=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-documentcloud tl-media-shadow",this._el.content),this._el.content_item.id=go(7),this.data.url.match(/\.html$/)?this.data.url=this._transformURL(this.data.url):this.data.url.match(/.(json|js)$/)||Ye("DOCUMENT CLOUD IN URL BUT INVALID SUFFIX"),vo(["https://assets.documentcloud.org/viewer/loader.js","https://assets.documentcloud.org/viewer/viewer.js"],function(){e.createMedia()})}_transformURL(e){return e.replace(/(.*)\.html$/,"$1.js")}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}createMedia(){DV.load(this.data.url,{container:"#"+this._el.content_item.id,showSidebar:!1}),this.onLoaded()}}const N5="830b21071290df4f81a35c56abbea096",D5="704270473831239",M5=`${D5}|${N5}`,TE=`https://graph.facebook.com/v8.0/instagram_oembed?access_token=${M5}&fields=html,thumbnail_url,author_name&url=`;function L5(t){this.oembed_response=t,this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-instagram tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=Oa(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=Oa(this.data.caption)),this._el.content_item.addEventListener("load",(function(e){this.onMediaLoaded()}).bind(this)),this._el.content_item.src=t.thumbnail_url,this.onLoaded()}function O5(t){let e=`${t.statusText} [${t.status}]`;t.status==400&&(e=this._("instagram_bad_request")),this.loadErrorDisplay(e)}class j5 extends _t{_loadMedia(){this.media_id=this.data.url.split("/p/")[1].split("/")[0],this.options.background||this.createMedia()}createMedia(){this.oembed_response=null;let e=`${TE}${this.data.url}`;try{el({url:e,dataType:"json",success:L5,error:O5,context:this})}catch(r){console.log(`Instagram: error fetching ${e}`),console.log(r);debugger}}getImageURL(){if(this.oembed_response&&this.oembed_response.thumbnail_url)return this.oembed_response.thumbnail_url;Wf(`${TE}${this.data.url}`).then(e=>e.thumbnail_url).catch(e=>{Ye(`Instagram getImageURL Error: ${e.status} ${e.statusText}`)})}_getMeta(){this.oembed_response&&this.oembed_response.author_name&&(this.data.credit_alternate=`Instagram: <a href="https://instagram.com/${this.oembed_response.author_name}" target="_blank">@${this.oembed_response.author_name}</a>`),this.updateMeta()}sizes(e){var r="";return e<=150?r="t":e<=306?r="m":r="l",r}}class V5 extends _t{_loadMedia(){this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-profile tl-media-shadow",this._el.content),this._el.content_item.src=this.data.url,this.onLoaded()}_updateMediaDisplay(e){La&&(this._el.content_item.style.maxWidth=this.options.width/2-40+"px")}}class F5 extends _t{_loadMedia(){var e;if(this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this.data.url.match(/open\?id=([^&]+)/)){var r=this.data.url.match(/open\?id=([^&]+)/)[1];e="https://drive.google.com/file/d/"+r+"/preview"}else if(this.data.url.match(/file\/d\/([^/]*)\/?/)){var r=this.data.url.match(/file\/d\/([^/]*)\/?/)[1];e="https://drive.google.com/file/d/"+r+"/preview"}else e=this.data.url;this._el.content_item.innerHTML="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}function U5(t){return t.match(/^spotify:/)?t:(t=new URL(t),`spotify${t.pathname.replace(/\/$/,"").replace(/\//g,":")}`)}class B5 extends _t{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-spotify",this._el.content),this.media_id=U5(this.data.url),this.media_id?(e="https://embed.spotify.com/?uri="+this.media_id+"&theme=white&view=coverart",this.player=this.domCreate("iframe","tl-media-shadow",this._el.content_item),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.onLoaded()):this.loadErrorDisplay(this._("spotify_invalid_url"))}_updateMediaDisplay(e){var r=this.options.height,i=0,s=0;Io?r=this.options.height/2:r=this.options.height-this.options.credit_height-this.options.caption_height-30,this._el.content_item.style.maxHeight="none",Ye(r),Ye(this.options.width),r>this.options.width?(Ye("height is greater"),i=this.options.width+80+"px",s=this.options.width+"px"):(Ye("width is greater"),Ye(this.options.width),i=r+"px",s=r-80+"px"),this.player.style.width=s,this.player.style.height=i,this._el.credit&&(this._el.credit.style.width=s),this._el.caption&&(this._el.caption.style.width=s)}_stopMedia(){}}class $5 extends _t{constructor(e,r,i){super(e,r,i),this.iframe=Yf.sanitize(this.data.url,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder"]})}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this._el.content_item.innerHTML=this.iframe,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class z5 extends _t{_loadMedia(){try{var e=this;if(this.data.url.match(`<blockquote class=['"]imgur-embed-pub['"]`)){var r=this.data.url.match(/(imgur\.com)\/(\w+)/);this.media_id=r[2],this.data.url="http://imgur.com/gallery/"+this.media_id}else this.data.url&&(this.media_id=this.data.url.split("/").slice(-1)[0]);vo(["https://s.imgur.com/min/embed.js"],function(){e.createMedia()})}catch{this.loadErrorDisplay(this._("imgur_invalidurl_err"))}}createMedia(){var e=this,r="https://api.imgur.com/oembed.json?url="+this.data.url;this._el.content_item=this.domCreate("div","tl-media-item tl-media-image tl-media-imgur",this._el.content),el({type:"GET",url:r,dataType:"json",success:function(i){try{e._el.content_item.innerHTML=i.html,setInterval(function(){document.querySelector("blockquote.imgur-embed-pub")==null?clearInterval():(imgurEmbed.createIframe(),document.getElementById("imageElement").removeAttribute("style"),document.getElementById("image").removeAttribute("style"))},2e3)}catch{Ye("Error processing imgur ajax response")}},error:function(i,s,o){s=="parsererror"?e.loadErrorDisplay(e._("imgur_invalidurl_err")):e.loadErrorDisplay(e._("unknown_read_err",s))}}),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.width=this.options.width+"px",this._el.content_item.style.height=ko.r16_9({w:this.options.width})+"px"}}class H5 extends _t{_loadMedia(){var e=zf(this.data.url);this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content);var r="";uc||u$||e.match(/dl.dropboxusercontent.com/)?r="<iframe class='doc' frameborder='0' width='100%' height='100%' src='//docs.google.com/viewer?url="+e+"&amp;embedded=true'></iframe>":r="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this._el.content_item.innerHTML=r,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class W5 extends _t{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=zf(this.data.url),r=this,r=this,i="tl-media-item tl-media-audio tl-media-shadow";this._el.content_item=this.domCreate("audio",i,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){r.onMediaLoaded()}),this._el.source_item.src=e,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 audio with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(e){La&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(e,r){var i=e.match(r),s="audio/";switch(i[1]){case"mp3":s+="mpeg";break;case"wav":s+="wav";break;case"m4a":s+="mp4";break;default:s="audio";break}return s}}class q5 extends _t{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=zf(this.data.url),r=this,r=this,i="tl-media-item tl-media-video tl-media-shadow";this._el.content_item=this.domCreate("video",i,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){r.onMediaLoaded()}),this._el.source_item.src=e,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 video with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(e){La&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(e,r){var i=e.match(r),s="video/";switch(i[1]){case"mp4":s+="mp4";break;case"webm":s+="webm";break;default:s="video";break}return s}}class G5 extends _t{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-wistia tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/https?:\/\/(.+)?(wistia\.com|wi\.st)\/medias\/(.*)/)[3],Ye(`Wistia: media_id: ${this.media_id}`),e="https://fast.wistia.com/embed/iframe/"+this.media_id+"?version=v1&controlsVisibleOnLoad=true&playerColor=aae3d8",this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(i){r.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=ko.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(e){Ye(e)}}}function zh(t,e){var r={},i=[{type:"youtube",name:"YouTube",match_str:"^(https?:)?/*(www.|m.)?youtube|youtu.be",cls:_5},{type:"vimeo",name:"Vimeo",match_str:"^(https?:)?/*(player.)?vimeo.com",cls:I5},{type:"dailymotion",name:"DailyMotion",match_str:"^(https?:)?/*(www.)?(dailymotion.com|dai.ly)",cls:k5},{type:"vine",name:"Vine",match_str:"^(https?:)?/*(www.)?vine.co",cls:C5},{type:"soundcloud",name:"SoundCloud",match_str:"^(https?:)?/*(player.)?soundcloud.com",cls:S5},{type:"twitter",name:"Twitter",match_str:"^(https?:)?/*(www.)?(twitter|x).com",cls:A5},{type:"twitterembed",name:"TwitterEmbed",match_str:`<blockquote class=['"]twitter-tweet['"]`,cls:P5},{type:"googlemaps",name:"Google Map",match_str:/google.+?\/maps\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/search\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/place\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/dir\/([\w\W]+)\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)/,cls:w5},{type:"flickr",name:"Flickr",match_str:"^(https?:)?/*(www.)?flickr.com/photos",cls:EE},{type:"flickr",name:"Flickr",match_str:"^(https?://)?flic.kr/.*",cls:EE},{type:"instagram",name:"Instagram",match_str:/^(https?:)?\/*(www.)?(instagr.am|^(https?:)?\/*(www.)?instagram.com)\/p\//,cls:j5},{type:"profile",name:"Profile",match_str:/^(https?:)?\/*(www.)?instagr.am\/[a-zA-Z0-9]{2,}|^(https?:)?\/*(www.)?instagram.com\/[a-zA-Z0-9]{2,}/,cls:V5},{type:"documentcloud",name:"Document Cloud",match_str:/documentcloud.org\//,cls:R5},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://.+.wiki[mp]edia.org.+#/media/.+.(jpg|jpeg|png|gif|svg|webp)",cls:xE},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://commons.wikimedia.org/wiki/File:.+.(jpg|jpeg|png|gif|svg|webp)",cls:xE},{type:"wikipedia",name:"Wikipedia",match_str:"^(https?:)?/.+.wikipedia.org",cls:x5},{type:"image",name:"Image",match_str:/(jpg|jpeg|png|gif|svg|webp)(\?.*)?$/i,cls:bE},{type:"imgur",name:"Imgur",match_str:/^.*imgur.com\/.+$|<blockquote class=['\"]imgur-embed-pub['\"]/i,cls:z5},{type:"googledocs",name:"Google Doc",match_str:"^(https?:)?/*[^.]*.google.com/[^/]*/d/[^/]*/[^/]*?usp=shar.*|^(https?:)?/*drive.google.com/open?id=[^&]*&authuser=0|^(https?:)?//*drive.google.com/open\\?id=[^&]*|^(https?:)?/*[^.]*.googledrive.com/host/[^/]*/",cls:F5},{type:"pdf",name:"PDF",match_str:/^.*\.pdf(\?.*)?(\#.*)?/,cls:H5},{type:"spotify",name:"spotify",match_str:"spotify",cls:B5},{type:"iframe",name:"iFrame",match_str:"iframe",cls:$5},{type:"blockquote",name:"Quote",match_str:"blockquote",cls:b5},{type:"video",name:"Video",match_str:/(mp4|webm)(\?.*)?$/i,cls:q5},{type:"wistia",name:"Wistia",match_str:/https?:\/\/(.+)?(wistia\.com|wi\.st)\/.*/i,cls:G5},{type:"audio",name:"Audio",match_str:/(mp3|wav|m4a)(\?.*)?$/i,cls:W5},{type:"imageblank",name:"Imageblank",match_str:"",cls:bE}];if(e){if(t instanceof Array)return!1;for(var s=0;s<i.length;s++)switch(i[s].type){case"flickr":case"image":case"instagram":if(t.url.match(i[s].match_str))return r=i[s],r;break}}else for(var s=0;s<i.length;s++)if(t.url.match(i[s].match_str))return i[s];return!1}class cA{constructor(e,r){this._el={container:{},content_container:{},media_container:{},timespan:{},line_left:{},line_right:{},content:{},text:{},media:{}},this._text={},this._state={loaded:!1},this.data={unique_id:"",background:null,date:{year:0,month:0,day:0,hour:0,minute:0,second:0,millisecond:0,thumbnail:"",format:""},text:{headline:"",text:""},media:null},this.options={duration:1e3,ease:Hf,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,this.ariaLabel="",ot(this.options,r),ot(this.data,e),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(e){this.active=e,this.active&&this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end tl-timemarker-active":this.active?this._el.container.className="tl-timemarker tl-timemarker-active":this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end":this._el.container.className="tl-timemarker",this._el.container.ariaLabel=this.ariaLabel,this.active?this._el.container.ariaLabel+=", shown":this._el.container.ariaLabel+=", press space to show"}setFocus(e={preventScroll:!0}){this._el.container.focus(e)}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}loadMedia(){this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0)}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.data.start_date.getTime()}getEndTime(){return this.data.end_date?this.data.end_date.getTime():!1}setHeight(e){var r=12,i=1;this._el.content_container.style.height=e+"px",this._el.timespan_content.style.height=e+"px",e<=30?this._el.content.className="tl-timemarker-content tl-timemarker-content-small":this._el.content.className="tl-timemarker-content",e<=56?this._el.content_container.classList.add("tl-timemarker-content-container-small"):this._el.content_container.classList.remove("tl-timemarker-content-container-small"),$f?(i=Math.floor(e/(r+2)),i<1&&(i=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=i):(i=e/r,i>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=i*r+"px")}setWidth(e){this.data.end_date&&(this._el.container.style.width=e+"px",e>this.options.marker_width_min?(this._el.content_container.style.width=e+"px",this._el.content_container.className="tl-timemarker-content-container tl-timemarker-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timemarker-content-container"))}setClass(e){this._el.container.className=e}setRowPosition(e,r){this.setPosition({top:e}),this._el.timespan.style.height=r+"px"}getFormattedDate(){if(er(this.data.display_date).length>0)return this.data.display_date;let e="";return this.data.end_date&&(e=" to "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(e=(e?"from ":"")+this.data.start_date.getDisplayDate(this.getLanguage())+e),e}_onMarkerClick(e){this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerKeydown(e){/Space|Enter/.test(e.code)&&this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerBlur(e){this.fire("markerblur",{unique_id:this.data.unique_id})}_initLayout(){if(this._el.container=pe("div","tl-timemarker"),this._el.container.setAttribute("tabindex","-1"),this.data.unique_id&&(this._el.container.id=this.data.unique_id+"-marker"),this.data.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timemarker tl-timemarker-with-end"),this._el.timespan=pe("div","tl-timemarker-timespan",this._el.container),this._el.timespan_content=pe("div","tl-timemarker-timespan-content",this._el.timespan),this._el.content_container=pe("div","tl-timemarker-content-container",this._el.container),this._el.content=pe("div","tl-timemarker-content",this._el.content_container),this._el.line_left=pe("div","tl-timemarker-line-left",this._el.timespan),this._el.line_right=pe("div","tl-timemarker-line-right",this._el.timespan),this.data.media){this._el.media_container=pe("div","tl-timemarker-media-container",this._el.content);var e={url:this.data.media.thumbnail},r=this.data.media.thumbnail?zh(e,!0):null;if(r){var i=new r.cls(e);i.on("loaded",(function(){this._el.media=pe("img","tl-timemarker-media",this._el.media_container),this._el.media.src=i.getImageURL()}).bind(this)),i.loadMedia()}else{var s=zh(this.data.media).type;this._el.media=pe("span","tl-icon-"+s,this._el.media_container)}}this._el.text=pe("div","tl-timemarker-text",this._el.content),this._text=pe("h2","tl-headline",this._el.text),this.data.text.headline&&this.data.text.headline!=""?this._text.innerHTML=ma(this.data.text.headline):this.data.text.text&&this.data.text.text!=""?this._text.innerHTML=ma(this.data.text.text):this.data.media&&this.data.media.caption&&this.data.media.caption!=""&&(this._text.innerHTML=ma(this.data.media.caption));const o=this.getFormattedDate();this.ariaLabel=`${this._text.innerHTML}, ${o}`,this.onLoaded()}_initEvents(){Ve.addListener(this._el.container,"click",this._onMarkerClick,this),Ve.addListener(this._el.container,"keydown",this._onMarkerKeydown,this),Ve.addListener(this._el.container,"blur",this._onMarkerBlur,this)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}Dn(cA,ji,Mn,Li);class I_{constructor(e,r,i){this._el={drag:e,move:e},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},r&&(this._el.move=r),this.options={snap:!1,enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:0,right:!1},momentum_multiplier:2e3,duration:1e3,ease:Za},this.animator=null,this.dragevent=this.mousedrag,ii&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},ot(this.options,i)}enable(e){Ve.addListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Ve.addListener(this._el.drag,this.dragevent.up,this._onDragEnd,this),this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){Ve.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Ve.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(e){this.options.constraint=e}_onDragStart(e){this.animator&&this.animator.stop(),ii?e.originalEvent?(this.data.pagex.start=e.originalEvent.touches[0].screenX,this.data.pagey.start=e.originalEvent.touches[0].screenY):(this.data.pagex.start=e.targetTouches[0].screenX,this.data.pagey.start=e.targetTouches[0].screenY):(this.data.pagex.start=e.pageX,this.data.pagey.start=e.pageY),this.options.enable.x,this.options.enable.y,this.data.pos.start={x:this._el.move.offsetLeft,y:this._el.move.offsetTop},this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),Ve.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Ve.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(e){this.data.sliding=!1,Ve.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Ve.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(e){var r={x:0,y:0};this.data.sliding=!0,ii?e.originalEvent?(this.data.pagex.end=e.originalEvent.touches[0].screenX,this.data.pagey.end=e.originalEvent.touches[0].screenY):(this.data.pagex.end=e.targetTouches[0].screenX,this.data.pagey.end=e.targetTouches[0].screenY):(this.data.pagex.end=e.pageX,this.data.pagey.end=e.pageY),r.x=this.data.pagex.start-this.data.pagex.end,r.y=this.data.pagey.start-this.data.pagey.end,this.data.pos.end={x:this._el.drag.offsetLeft,y:this._el.drag.offsetTop},this.data.new_pos.x=-(r.x-this.data.pos.start.x),this.data.new_pos.y=-(r.y-this.data.pos.start.y),this.options.enable.x&&Math.abs(r.x)>Math.abs(r.y)&&(e.preventDefault(),this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&Math.abs(r.y)>Math.abs(r.y)&&(e.preventDefault(),this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var e={x:0,y:0,time:0},r={x:0,y:0,time:0},i={x:!1,y:!1},s=!1;this.data.direction=null,e.time=(new Date().getTime()-this.data.time.start)*10,r.time=(new Date().getTime()-this.data.time.start)*10,r.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),r.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),e.x=Math.round(r.x/r.time),e.y=Math.round(r.y/r.time),this.data.new_pos.x=Math.min(this.data.new_pos.x+e.x),this.data.new_pos.y=Math.min(this.data.new_pos.y+e.y),this.options.enable.x?this.options.constraint.left&&this.data.new_pos.x>this.options.constraint.left&&(this.data.new_pos.x=this.options.constraint.left):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,r.time<2e3&&(s=!0),this.options.enable.x&&this.options.enable.y?Math.abs(r.x)>Math.abs(r.y)?i.x=!0:i.y=!0:this.options.enable.x?Math.abs(r.x)>Math.abs(r.y)&&(i.x=!0):Math.abs(r.y)>Math.abs(r.x)&&(i.y=!0),i.x&&(Math.abs(r.x)>this._el.drag.offsetWidth/2&&(s=!0),Math.abs(r.x)>1e4&&(this.data.direction="left",r.x>0&&(this.data.direction="right"))),i.y&&(Math.abs(r.y)>this._el.drag.offsetHeight/2&&(s=!0),Math.abs(r.y)>1e4&&(this.data.direction="up",r.y>0&&(this.data.direction="down"))),r.time<1e3||this._animateMomentum(),s&&this.data.direction?this.fire("swipe_"+this.data.direction,this.data):this.data.direction?this.fire("swipe_nodirection",this.data):this.options.snap&&(this.animator.stop(),this.animator=Ni(this._el.move,{top:this.data.pos.start.y,left:this.data.pos.start.x,duration:this.options.duration,easing:Lu}))}_animateMomentum(){var e={x:this.data.new_pos.x,y:this.data.new_pos.y},r={duration:this.options.duration,easing:Lu};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(e.y>this.options.constraint.bottom?e.y=this.options.constraint.bottom:e.y<this.options.constraint.top&&(e.y=this.options.constraint.top)),r.top=Math.floor(e.y)+"px"),this.options.enable.x&&(this.options.constraint.left&&e.x>=this.options.constraint.left&&(e.x=this.options.constraint.left),this.options.constraint.right&&e.x<this.options.constraint.right&&(e.x=this.options.constraint.right),r.left=Math.floor(e.x)+"px"),this.animator=Ni(this._el.move,r),this.fire("momentum",this.data)}}Dn(I_,Mn);class dA{constructor(e,r,i,s){this.language=s,this._el={parent:{},container:{},slider:{},slider_background:{},line:{},marker_container_mask:{},marker_container:{},marker_item_container:{},timeaxis:{},timeaxis_background:{}},this.collapsed=!1,typeof e=="object"?this._el.container=e:this._el.container=cc(e),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","application"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline_navigation")),this._el.container.setAttribute("aria-description",'Navigate between markers with arrow keys. Press "Home" for the first and "End" for the last markers'),this.config=r,this.options={width:600,height:600,duration:1e3,ease:Za,has_groups:!1,optimal_tick_width:50,scale_factor:2,marker_padding:5,timenav_height_min:150,marker_height_min:30,marker_width_min:100,zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89]},this.animator=null,this.ready=!1,this._markers=[],this._eras=[],this.has_eras=!1,this._groups=[],this._calculated_row_height=100,this.current_id="",this.current_focused_id="",this.timescale={},this.timeaxis={},this.max_rows=6,this.animate_css=!1,this._swipable,ot(this.options,i)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this._onLoaded()}positionMarkers(e){for(var r=0;r<this._markers.length;r++){var i=this.timescale.getPositionInfo(r);e?this._markers[r].setClass("tl-timemarker tl-timemarker-fast"):this._markers[r].setClass("tl-timemarker"),this._markers[r].setPosition({left:i.start}),this._markers[r].setWidth(i.width)}}updateDisplay(e,r,i){let s=!1;e&&(this.options.width==0&&e>0&&(s=!0),this.options.width=e),r&&r!=this.options.height&&(this.options.height=r,this.timescale=this._getTimeScale()),this._assignRowsToMarkers(),this._el.slider_background.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._el.slider_background.style.left=-(this.options.width/2)+"px",this._el.slider.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._swipable.updateConstraint({top:!1,bottom:!1,left:this.options.width/2,right:-(this.timescale.getPixelWidth()-this.options.width/2)}),s&&this._drawTimeline(),this.goToId(this.current_id,!0)}_getTimeScale(){var e=0;try{e=parseInt(this.options.marker_height_min)}catch{Ye("Invalid value for marker_height_min option."),e=30}return e==0&&(Ye("marker_height_min option must not be zero."),e=30),this.max_rows=Math.round((this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding)/e),this.max_rows<1&&(this.max_rows=1),new wE(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows})}_updateTimeScale(e){this.options.scale_factor=e,this._updateDrawTimeline()}zoomIn(){var e=m$(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(e)}zoomOut(){var e=g$(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(e)}setZoom(e){var r=this.options.zoom_sequence[e];typeof r=="number"?this.setZoomFactor(r):console.warn("Invalid zoom level. Please use an index number between 0 and "+(this.options.zoom_sequence.length-1))}setZoomFactor(e){e<=this.options.zoom_sequence[0]?this.fire("zoomtoggle",{zoom:"out",show:!1}):this.fire("zoomtoggle",{zoom:"out",show:!0}),e>=this.options.zoom_sequence[this.options.zoom_sequence.length-1]?this.fire("zoomtoggle",{zoom:"in",show:!1}):this.fire("zoomtoggle",{zoom:"in",show:!0}),e==0&&(console.warn("Zoom factor must be greater than zero. Using 0.1"),e=.1),this.options.scale_factor=e,this.goToId(this.current_id,!this._updateDrawTimeline(!0),!0)}_createGroups(){this._groups=[];var e=this.timescale.getGroupLabels();if(e){this.options.has_groups=!0;for(var r=0;r<e.length;r++)this._createGroup(e[r])}}_createGroup(e){var r=new sA(e);this._addGroup(r),this._groups.push(r)}_addGroup(e){e.addTo(this._el.container)}_positionGroups(){if(this.options.has_groups){var e=this.options.height-this._el.timeaxis_background.offsetHeight,r=Math.floor(e/this.timescale.getNumberOfRows()-this.options.marker_padding);this.timescale.getGroupLabels();for(var i=0,s=0;i<this._groups.length;i++){var o=Math.floor(s*(r+this.options.marker_padding)),a=!1;o>e-this.options.marker_padding&&(a=!0),this._groups[i].setRowPosition(o,this._calculated_row_height+this.options.marker_padding/2),this._groups[i].setAlternateRowColor(v$(i),a),s+=this._groups[i].data.rows}}}_addMarker(e){e.addTo(this._el.marker_item_container),e.on("markerclick",this._onMarkerClick,this),e.on("added",this._onMarkerAdded,this)}_createMarker(e,r){var i=new cA(e,this.options);this._addMarker(i),r<0?this._markers.push(i):this._markers.splice(r,0,i)}_createMarkers(e){for(var r=0;r<e.length;r++)this._createMarker(e[r],-1)}_removeMarker(e){e.removeFrom(this._el.marker_item_container)}_destroyMarker(e){this._removeMarker(this._markers[e]),this._markers.splice(e,1)}_calculateMarkerHeight(e){return e/this.timescale.getNumberOfRows()-this.options.marker_padding}_calculateRowHeight(e){return e/this.timescale.getNumberOfRows()}_calculateAvailableHeight(){return this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding}_calculateMinimumTimeNavHeight(){return this.timescale.getNumberOfRows()*this.options.marker_height_min+this._el.timeaxis_background.offsetHeight+this.options.marker_padding}getMinimumHeight(){return this._calculateMinimumTimeNavHeight()}_assignRowsToMarkers(){var e=this._calculateAvailableHeight(),r=this._calculateMarkerHeight(e);this._positionGroups(),this._calculated_row_height=this._calculateRowHeight(e);for(var i=0;i<this._markers.length;i++){this._markers[i].setHeight(r);var s=this.timescale.getPositionInfo(i).row,o=Math.floor(s*(r+this.options.marker_padding))+this.options.marker_padding,a=e-o+this.options.marker_padding;this._markers[i].setRowPosition(o,a)}}_resetMarkersActive(){for(var e=0;e<this._markers.length;e++)this._markers[e].setActive(!1)}_resetMarkersBlurListeners(){for(var e=0;e<this._markers.length;e++)this._markers[e].off("markerblur",this._onMarkerBlur,this)}_findMarkerIndex(e){var r=-1;return(typeof e=="string"||e instanceof String)&&(r=YC(e,this._markers,"unique_id",r)),r}_createEras(e){for(var r=0;r<e.length;r++){var i=e[r],s=new oA(i.start_date,i.end_date,i.headline,this.options);this._eras.push(s),s.addTo(this._el.marker_item_container),s.on("added",this._onEraAdded,this)}}_positionEras(e){for(var r=0,i=0;i<this._eras.length;i++){var s={start:0,end:0,width:0};s.start=this.timescale.getPosition(this._eras[i].start_date.getTime()),s.end=this.timescale.getPosition(this._eras[i].end_date.getTime()),s.width=s.end-s.start,e?this._eras[i].setClass("tl-timeera tl-timeera-fast"):this._eras[i].setClass("tl-timeera"),this._eras[i].setPosition({left:s.start}),this._eras[i].setWidth(s.width),r++,r>5&&(r=0),this._eras[i].setColor(r)}}createMarker(e,r){this._createMarker(e,r)}createMarkers(e){this._createMarkers(e)}destroyMarker(e){this._destroyMarker(e)}destroyMarkerId(e){this.destroyMarker(this._findMarkerIndex(e))}goTo(e,r,i){var s=this.options.ease,o=this.options.duration,a=e<0?0:e;this._resetMarkersActive(),e>=0&&e<this._markers.length&&this._markers[e].setActive(!0),this.animateMovement(a,r,i,o,s),e>=0&&e<this._markers.length?this.current_id=this.current_focused_id=this._markers[e].data.unique_id:this.current_id=this.current_focused_id="",this._setLabelWithCurrentMarker()}goToId(e,r,i){this.goTo(this._findMarkerIndex(e),r,i)}focusOn(e,r,i){const s=this.options.ease,o=this.options.duration,a=e<0?0:e;this.animateMovement(a,r,i,o,s),this._resetMarkersBlurListeners(),e>=0&&e<this._markers.length&&(this._markers[e].setFocus(),this.current_focused_id=this._markers[e].data.unique_id,this._markers[e].on("markerblur",this._onMarkerBlur,this))}focusNext(){const e=this._findMarkerIndex(this.current_focused_id);e+1<this._markers.length?this.focusOn(e+1):this.focusOn(e)}focusPrevious(){const e=this._findMarkerIndex(this.current_focused_id);e-1>=0?this.focusOn(e-1):this.focusOn(e)}animateMovement(e,r,i,s,o){this.animator&&this.animator.stop(),r?(this._el.slider.className="tl-timenav-slider",this._el.slider.style.left=-this._markers[e].getLeft()+this.options.width/2+"px"):i?(this._el.slider.className="tl-timenav-slider tl-timenav-slider-animate",this.animate_css=!0,this._el.slider.style.left=-this._markers[e].getLeft()+this.options.width/2+"px"):(this._el.slider.className="tl-timenav-slider",this.animator=Ni(this._el.slider,{left:-this._markers[e].getLeft()+this.options.width/2+"px",duration:s,easing:o})),e>=0&&e<this._markers.length?this.current_id=this._markers[e].data.unique_id:this.current_id="",this._dispatchVisibleTicksChange()}goToId(e,r,i){this.goTo(this._findMarkerIndex(e),r,i)}_dispatchVisibleTicksChange(){this.ticks_change_timeout&&(clearTimeout(this.ticks_change_timeout),this.ticks_change_timeout=null),this.ticks_change_timeout=setTimeout(()=>{const e=this.timeaxis.getVisibleTicks();this.fire("visible_ticks_change",{visible_ticks:e})},this.options.duration)}_onLoaded(){this.ready=!0,this.fire("loaded",this.config)}_onMarkerAdded(e){this.fire("dateAdded",this.config)}_onEraAdded(e){this.fire("eraAdded",this.config)}_onMarkerRemoved(e){this.fire("dateRemoved",this.config)}_onMarkerClick(e){this.goToId(e.unique_id),this.fire("change",{unique_id:e.unique_id})}_onMarkerBlur(e){this.current_focused_id!==this.current_id&&this.focusOn(this._findMarkerIndex(this.current_id))}_onMouseScroll(e){var r=0,i=0,s={right:-(this.timescale.getPixelWidth()-this.options.width/2),left:this.options.width/2};e||(e=window.event),e.originalEvent&&(e=e.originalEvent),typeof e.wheelDeltaX<"u"&&(r=e.wheelDeltaY/6,Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)?r=e.wheelDeltaX/6:r=0),r&&(e.preventDefault&&e.preventDefault(),e.returnValue=!1),i=parseInt(this._el.slider.style.left.replace("px",""))+r,i>s.left?i=s.left:i<s.right&&(i=s.right),this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1),this._el.slider.style.left=i+"px"}_onDragMove(e){this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1)}_onKeydown(e){switch(Ve.stopPropagation(e),e.key){case"ArrowUp":case"ArrowRight":{this.focusNext();break}case"ArrowDown":case"ArrowLeft":{this.focusPrevious();break}case"Home":{this.focusOn(0);break}case"End":{this.focusOn(this._markers.length-1);break}}}_drawTimeline(e){this.timescale=this._getTimeScale(),this.timeaxis.drawTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(e),this._assignRowsToMarkers(),this._createGroups(),this._positionGroups(),this.has_eras&&this._positionEras(e)}_updateDrawTimeline(e){var r=!1;if(e){var i=new wE(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows});this.timescale.getMajorScale()==i.getMajorScale()&&this.timescale.getMinorScale()==i.getMinorScale()&&(r=!0)}else r=!0;return r?(this.timescale=this._getTimeScale(),this.timeaxis.positionTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(),this._assignRowsToMarkers(),this._positionGroups(),this.has_eras&&this._positionEras(),this.updateDisplay()):this._drawTimeline(!0),r}_setLabelWithCurrentMarker(){const e=this._markers[this._findMarkerIndex(this.current_focused_id)],r=e&&e.ariaLabel?`, ${e.ariaLabel}, shown`:"";this._el.container.setAttribute("aria-label",`Timeline navigation ${r}`)}_initLayout(){this._el.line=pe("div","tl-timenav-line",this._el.container),this._el.slider=pe("div","tl-timenav-slider",this._el.container),this._el.slider_background=pe("div","tl-timenav-slider-background",this._el.slider),this._el.marker_container_mask=pe("div","tl-timenav-container-mask",this._el.slider),this._el.marker_container=pe("div","tl-timenav-container",this._el.marker_container_mask),this._el.marker_item_container=pe("div","tl-timenav-item-container",this._el.marker_container),this._el.timeaxis=pe("div","tl-timeaxis",this._el.slider),this._el.timeaxis_background=pe("div","tl-timeaxis-background",this._el.container),this.timeaxis=new aA(this._el.timeaxis,this.options,this.language),this._swipable=new I_(this._el.slider_background,this._el.slider,{enable:{x:!0,y:!1},constraint:{top:!1,bottom:!1,left:this.options.width/2,right:!1},snap:!1}),this._swipable.enable()}_initEvents(){this._swipable.on("dragmove",this._onDragMove,this),Ve.addListener(this._el.container,"mousewheel",this._onMouseScroll,this),Ve.addListener(this._el.container,"DOMMouseScroll",this._onMouseScroll,this),Ve.addListener(this._el.container,"keydown",this._onKeydown,this)}_initData(){this._createMarkers(this.config.events),this.config.eras&&this.config.eras.length>0&&(this.has_eras=!0,this._createEras(this.config.eras)),this._drawTimeline()}}Dn(dA,Mn,Li,ji);var Sm=function(){function t(e,r){for(var i=0;i<r.length;i++){var s=r[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();function Im(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(function(){if(typeof window>"u"||typeof Element>"u")return;var t=Array.prototype.slice,e=Element.prototype.matches||Element.prototype.msMatchesSelector,r=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","details","summary","iframe","object","embed","video","[contenteditable]"].join(","),i=function(){function c(h,f){Im(this,c),this._inertManager=f,this._rootElement=h,this._managedNodes=new Set,this._rootElement.hasAttribute("aria-hidden")?this._savedAriaHidden=this._rootElement.getAttribute("aria-hidden"):this._savedAriaHidden=null,this._rootElement.setAttribute("aria-hidden","true"),this._makeSubtreeUnfocusable(this._rootElement),this._observer=new MutationObserver(this._onMutation.bind(this)),this._observer.observe(this._rootElement,{attributes:!0,childList:!0,subtree:!0})}return Sm(c,[{key:"destructor",value:function(){this._observer.disconnect(),this._rootElement&&(this._savedAriaHidden!==null?this._rootElement.setAttribute("aria-hidden",this._savedAriaHidden):this._rootElement.removeAttribute("aria-hidden")),this._managedNodes.forEach(function(f){this._unmanageNode(f.node)},this),this._observer=null,this._rootElement=null,this._managedNodes=null,this._inertManager=null}},{key:"_makeSubtreeUnfocusable",value:function(f){var p=this;a(f,function(P){return p._visitNode(P)});var g=document.activeElement;if(!document.body.contains(f)){for(var b=f,R=void 0;b;){if(b.nodeType===Node.DOCUMENT_FRAGMENT_NODE){R=b;break}b=b.parentNode}R&&(g=R.activeElement)}f.contains(g)&&(g.blur(),g===document.activeElement&&document.body.focus())}},{key:"_visitNode",value:function(f){if(f.nodeType===Node.ELEMENT_NODE){var p=f;p!==this._rootElement&&p.hasAttribute("inert")&&this._adoptInertRoot(p),(e.call(p,r)||p.hasAttribute("tabindex"))&&this._manageNode(p)}}},{key:"_manageNode",value:function(f){var p=this._inertManager.register(f,this);this._managedNodes.add(p)}},{key:"_unmanageNode",value:function(f){var p=this._inertManager.deregister(f,this);p&&this._managedNodes.delete(p)}},{key:"_unmanageSubtree",value:function(f){var p=this;a(f,function(g){return p._unmanageNode(g)})}},{key:"_adoptInertRoot",value:function(f){var p=this._inertManager.getInertRoot(f);p||(this._inertManager.setInert(f,!0),p=this._inertManager.getInertRoot(f)),p.managedNodes.forEach(function(g){this._manageNode(g.node)},this)}},{key:"_onMutation",value:function(f,p){f.forEach(function(g){var b=g.target;if(g.type==="childList")t.call(g.addedNodes).forEach(function(P){this._makeSubtreeUnfocusable(P)},this),t.call(g.removedNodes).forEach(function(P){this._unmanageSubtree(P)},this);else if(g.type==="attributes"){if(g.attributeName==="tabindex")this._manageNode(b);else if(b!==this._rootElement&&g.attributeName==="inert"&&b.hasAttribute("inert")){this._adoptInertRoot(b);var R=this._inertManager.getInertRoot(b);this._managedNodes.forEach(function(P){b.contains(P.node)&&R._manageNode(P.node)})}}},this)}},{key:"managedNodes",get:function(){return new Set(this._managedNodes)}},{key:"hasSavedAriaHidden",get:function(){return this._savedAriaHidden!==null}},{key:"savedAriaHidden",set:function(f){this._savedAriaHidden=f},get:function(){return this._savedAriaHidden}}]),c}(),s=function(){function c(h,f){Im(this,c),this._node=h,this._overrodeFocusMethod=!1,this._inertRoots=new Set([f]),this._savedTabIndex=null,this._destroyed=!1,this.ensureUntabbable()}return Sm(c,[{key:"destructor",value:function(){if(this._throwIfDestroyed(),this._node&&this._node.nodeType===Node.ELEMENT_NODE){var f=this._node;this._savedTabIndex!==null?f.setAttribute("tabindex",this._savedTabIndex):f.removeAttribute("tabindex"),this._overrodeFocusMethod&&delete f.focus}this._node=null,this._inertRoots=null,this._destroyed=!0}},{key:"_throwIfDestroyed",value:function(){if(this.destroyed)throw new Error("Trying to access destroyed InertNode")}},{key:"ensureUntabbable",value:function(){if(this.node.nodeType===Node.ELEMENT_NODE){var f=this.node;if(e.call(f,r)){if(f.tabIndex===-1&&this.hasSavedTabIndex)return;f.hasAttribute("tabindex")&&(this._savedTabIndex=f.tabIndex),f.setAttribute("tabindex","-1"),f.nodeType===Node.ELEMENT_NODE&&(f.focus=function(){},this._overrodeFocusMethod=!0)}else f.hasAttribute("tabindex")&&(this._savedTabIndex=f.tabIndex,f.removeAttribute("tabindex"))}}},{key:"addInertRoot",value:function(f){this._throwIfDestroyed(),this._inertRoots.add(f)}},{key:"removeInertRoot",value:function(f){this._throwIfDestroyed(),this._inertRoots.delete(f),this._inertRoots.size===0&&this.destructor()}},{key:"destroyed",get:function(){return this._destroyed}},{key:"hasSavedTabIndex",get:function(){return this._savedTabIndex!==null}},{key:"node",get:function(){return this._throwIfDestroyed(),this._node}},{key:"savedTabIndex",set:function(f){this._throwIfDestroyed(),this._savedTabIndex=f},get:function(){return this._throwIfDestroyed(),this._savedTabIndex}}]),c}(),o=function(){function c(h){if(Im(this,c),!h)throw new Error("Missing required argument; InertManager needs to wrap a document.");this._document=h,this._managedNodes=new Map,this._inertRoots=new Map,this._observer=new MutationObserver(this._watchForInert.bind(this)),l(h.head||h.body||h.documentElement),h.readyState==="loading"?h.addEventListener("DOMContentLoaded",this._onDocumentLoaded.bind(this)):this._onDocumentLoaded()}return Sm(c,[{key:"setInert",value:function(f,p){if(p){if(this._inertRoots.has(f))return;var g=new i(f,this);if(f.setAttribute("inert",""),this._inertRoots.set(f,g),!this._document.body.contains(f))for(var b=f.parentNode;b;)b.nodeType===11&&l(b),b=b.parentNode}else{if(!this._inertRoots.has(f))return;var R=this._inertRoots.get(f);R.destructor(),this._inertRoots.delete(f),f.removeAttribute("inert")}}},{key:"getInertRoot",value:function(f){return this._inertRoots.get(f)}},{key:"register",value:function(f,p){var g=this._managedNodes.get(f);return g!==void 0?g.addInertRoot(p):g=new s(f,p),this._managedNodes.set(f,g),g}},{key:"deregister",value:function(f,p){var g=this._managedNodes.get(f);return g?(g.removeInertRoot(p),g.destroyed&&this._managedNodes.delete(f),g):null}},{key:"_onDocumentLoaded",value:function(){var f=t.call(this._document.querySelectorAll("[inert]"));f.forEach(function(p){this.setInert(p,!0)},this),this._observer.observe(this._document.body||this._document.documentElement,{attributes:!0,subtree:!0,childList:!0})}},{key:"_watchForInert",value:function(f,p){var g=this;f.forEach(function(b){switch(b.type){case"childList":t.call(b.addedNodes).forEach(function(x){if(x.nodeType===Node.ELEMENT_NODE){var _=t.call(x.querySelectorAll("[inert]"));e.call(x,"[inert]")&&_.unshift(x),_.forEach(function(T){this.setInert(T,!0)},g)}},g);break;case"attributes":if(b.attributeName!=="inert")return;var R=b.target,P=R.hasAttribute("inert");g.setInert(R,P);break}},this)}}]),c}();function a(c,h,f){if(c.nodeType==Node.ELEMENT_NODE){var p=c;h&&h(p);var g=p.shadowRoot;if(g){a(g,h);return}if(p.localName=="content"){for(var b=p,R=b.getDistributedNodes?b.getDistributedNodes():[],P=0;P<R.length;P++)a(R[P],h);return}if(p.localName=="slot"){for(var x=p,_=x.assignedNodes?x.assignedNodes({flatten:!0}):[],T=0;T<_.length;T++)a(_[T],h);return}}for(var L=c.firstChild;L!=null;)a(L,h),L=L.nextSibling}function l(c){if(!c.querySelector("style#inert-style, link#inert-style")){var h=document.createElement("style");h.setAttribute("id","inert-style"),h.textContent=`
[inert] {
  pointer-events: none;
  cursor: default;
}

[inert], [inert] * {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
`,c.appendChild(h)}}if(!HTMLElement.prototype.hasOwnProperty("inert")){var u=new o(document);Object.defineProperty(HTMLElement.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(h){u.setInert(this,h)}})}})();class hA{constructor(e,r,i,s){s&&this.setLanguage(s),this._el={container:{},scroll_container:{},background:{},content_container:{},content:{}},this._media=null,this._mediaclass={},this._text={},this._background_media=null,this._state={loaded:!1},this.has={headline:!1,text:!1,media:!1,title:!1,background:{image:!1,color:!1,color_value:""}},this.has.title=i,this.data={unique_id:null,background:null,start_date:null,end_date:null,location:null,text:null,media:null,autolink:!0},this.options={duration:1e3,slide_padding_lr:40,ease:Hf,width:600,height:600,skinny_size:650,media_name:""},this.active=!1,this.animator={},ot(this.options,r),ot(this.data,e),this._initLayout(),this._initEvents()}show(){this.animator=Ni(this._el.slider_container,{left:-(this._el.container.offsetWidth*n)+"px",duration:this.options.duration,easing:this.options.ease})}hide(){}setActive(e){this.active=e,this.active?(this.data.background&&this.fire("background_change",this.has.background),this._setInteractive(!0),this.loadMedia()):(this.stopMedia(),this._setInteractive(!1))}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r,i){var s,o=this.options.slide_padding_lr,a=this.options.slide_padding_lr;e?this.options.width=e:this.options.width=this._el.container.offsetWidth,s=this.options.width-this.options.slide_padding_lr*2,Io&&this.options.width<=this.options.skinny_size?(o=0,a=0,s=this.options.width):i=="landscape"||this.options.width<=this.options.skinny_size&&(o=50,a=50,s=this.options.width-o-a),this._el.content.style.paddingLeft=o+"px",this._el.content.style.paddingRight=a+"px",this._el.content.style.width=s+"px",r?this.options.height=r:this.options.height=this._el.container.offsetHeight,this._media&&(!this.has.text&&this.has.headline?this._media.updateDisplay(s,this.options.height-this._text.headlineHeight(),i):!this.has.text&&!this.has.headline?this._media.updateDisplay(s,this.options.height,i):this.options.width<=this.options.skinny_size?this._media.updateDisplay(s,this.options.height,i):this._media.updateDisplay(s/2,this.options.height,i)),this._updateBackgroundDisplay()}loadMedia(){var e=this;this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0),this._background_media&&!this._background_media._state.loaded&&(this._background_media.on("loaded",function(){e._updateBackgroundDisplay()}),this._background_media.loadMedia())}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getBackground(){return this.has.background}scrollToTop(){this._el.container.scrollTop=0}getFormattedDate(){if(er(this.data.display_date).length>0)return this.data.display_date;var e="";return this.has.title||(this.data.end_date&&(e=" &mdash; "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(e=this.data.start_date.getDisplayDate(this.getLanguage())+e)),e}_initLayout(){if(this._el.container=pe("div","tl-slide"),this.has.title&&(this._el.container.className="tl-slide tl-slide-titleslide"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._el.scroll_container=pe("div","tl-slide-scrollable-container",this._el.container),this._el.content_container=pe("div","tl-slide-content-container",this._el.scroll_container),this._el.content=pe("div","tl-slide-content",this._el.content_container),this._el.background=pe("div","tl-slide-background",this._el.container),this.data.background){if(this.data.background.url){var e=zh(this.data.background,!0);e&&(this._background_media=new e.cls(this.data.background,{background:1}),this.has.background.image=!0,this._el.container.className+=" tl-full-image-background",this.has.background.color_value="#000",this._el.background.style.display="block"),this.data.background.alt&&(this._el.background.setAttribute("role","img"),this._el.background.setAttribute("aria-label",this.data.background.alt))}this.data.background.color&&(this.has.background.color=!0,this._el.container.className+=" tl-full-color-background",this.has.background.color_value=this.data.background.color),this.data.background.text_background&&(this._el.container.className+=" tl-text-background")}this.data.media&&this.data.media.url&&this.data.media.url!=""&&(this.has.media=!0),this.data.text&&this.data.text.text&&(this.has.text=!0),this.data.text&&this.data.text.headline&&(this.has.headline=!0),this.has.media&&(this.data.media.mediatype=zh(this.data.media),this.options.media_name=this.data.media.mediatype.name,this.options.media_type=this.data.media.mediatype.type,this.options.autolink=this.data.autolink,this._media=new this.data.media.mediatype.cls(this.data.media,this.options,this.getLanguage())),(this.has.text||this.has.headline)&&(this._text=new lA(this.data.text,{title:this.has.title,language:this.getLanguage(),autolink:this.data.autolink}),this._text.addDateText(this.getFormattedDate())),!this.has.text&&!this.has.headline&&this.has.media?(this._el.container.classList.add("tl-slide-media-only"),this._media.addTo(this._el.content)):this.has.headline&&this.has.media&&!this.has.text?(this._el.container.classList.add("tl-slide-media-only"),this._text.addTo(this._el.content),this._media.addTo(this._el.content)):this.has.text&&this.has.media?(this._text.addTo(this._el.content),this._media.addTo(this._el.content)):(this.has.text||this.has.headline)&&(this._el.container.classList.add("tl-slide-text-only"),this._text.addTo(this._el.content)),this.onLoaded()}_initEvents(){}_updateBackgroundDisplay(){this._background_media&&this._background_media._state.loaded&&(this._el.background.style.backgroundImage="url('"+this._background_media.getImageURL(this.options.width,this.options.height)+"')")}_setInteractive(e){e?this._el.container.removeAttribute("inert"):this._el.container.setAttribute("inert",!0)}}Dn(hA,ji,Mn,Li);class _v{constructor(e,r,i){this._el={container:{},content_container:{},icon:{},title:{},description:{}},this.mediatype={},this.data={title:"Navigation",description:"Description",date:"Date"},this.options={direction:"previous"},this.animator=null,ot(this.options,r),ot(this.data,e),this._el.container=Hl("tl-slidenav-"+this.options.direction),Io&&this._el.container.setAttribute("ontouchstart"," "),this._initLayout(),this._initEvents(),i&&i.appendChild(this._el.container)}update(e){var r={title:"",description:"",date:e.getFormattedDate()};e.data.text&&e.data.text.headline&&(r.title=e.data.text.headline),this._update(r)}setColor(e){e?this._el.content_container.className="tl-slidenav-content-container tl-slidenav-inverted":this._el.content_container.className="tl-slidenav-content-container"}_onMouseClick(){this.fire("clicked",this.options)}_update(e){this.data=ot(this.data,e);const r=ma(this.data.title);this._el.title.innerHTML=r;const i=ma(this.data.date);this._el.description.innerHTML=i,this._el.container.setAttribute("aria-label",`${this.options.direction}, ${r}, ${i}`)}_initLayout(){this._el.content_container=pe("div","tl-slidenav-content-container",this._el.container),this._el.icon=pe("div","tl-slidenav-icon",this._el.content_container),this._el.title=pe("div","tl-slidenav-title",this._el.content_container),this._el.description=pe("div","tl-slidenav-description",this._el.content_container),this._el.icon.innerHTML="&nbsp;",this._update()}_initEvents(){Ve.addListener(this._el.container,"click",this._onMouseClick,this)}}Dn(_v,Li,Mn);class fA{constructor(e,r,i,s){s&&this.setLanguage(s),this._el={container:{},background:{},slider_container_mask:{},slider_container:{},slider_item_container:{}},this._nav={},this._nav.previous={},this._nav.next={},this.slide_spacing=0,this._slides=[],this._swipable,this.preloadTimer,this._message,this.current_id="",this.data={},this.options={id:"",layout:"portrait",width:600,height:600,default_bg_color:{r:255,g:255,b:255},slide_padding_lr:40,start_at_slide:1,slide_default_fade:"0%",duration:1e3,ease:Za,dragging:!0,trackResize:!0},typeof e=="object"?(this._el.container=e,this.options.id=go(6,"tl")):(this.options.id=e,this._el.container=cc(e)),this._el.container.id||(this._el.container.id=this.options.id),this.animator=null,ot(this.options,i),ot(this.data,r)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this.goTo(this.options.start_at_slide),this._onLoaded()}_addSlide(e){e.addTo(this._el.slider_item_container),e.on("added",this._onSlideAdded,this),e.on("background_change",this._onBackgroundChange,this)}_createSlide(e,r,i){var s=new hA(e,this.options,r,this.getLanguage());this._addSlide(s),i<0?this._slides.push(s):this._slides.splice(i,0,s)}_createSlides(e){for(var r=0;r<e.length;r++)e[r].unique_id==""&&(e[r].unique_id=go(6,"tl-slide")),this._createSlide(e[r],!1,-1)}_removeSlide(e){e.removeFrom(this._el.slider_item_container),e.off("added",this._onSlideRemoved,this),e.off("background_change",this._onBackgroundChange)}_destroySlide(e){this._removeSlide(this._slides[e]),this._slides.splice(e,1)}_findSlideIndex(e){var r=e;return(typeof e=="string"||e instanceof String)&&(r=YC(e,this._slides,"unique_id")),r}updateDisplay(e,r,i,s){var o,a;typeof s>"u"?a=this.options.layout:a=s,this.options.layout=a,e?this.options.width=e:this.options.width=this._el.container.offsetWidth,r?this.options.height=r:this.options.height=this._el.container.offsetHeight,this.slide_spacing=this.options.width*2,o=this.options.height/2,this._nav.next.setPosition({top:o}),this._nav.previous.setPosition({top:o});for(var l=0;l<this._slides.length;l++)this._slides[l].updateDisplay(this.options.width,this.options.height,a),this._slides[l].setPosition({left:this.slide_spacing*l,top:0});this.goToId(this.current_id,!0,!0)}createSlide(e,r){this._createSlide(e,!1,r)}createSlides(e){this._createSlides(e)}destroySlide(e){this._destroySlide(e)}destroySlideId(e){this.destroySlide(this._findSlideIndex(e))}goTo(e,r,i){e=parseInt(e),isNaN(e)&&(e=0);var s=this;this.changeBackground({color_value:"",image:!1}),this.preloadTimer&&clearTimeout(this.preloadTimer);for(var o=0;o<this._slides.length;o++)this._slides[o].setActive(!1);e<this._slides.length&&e>=0&&(this.current_id=this._slides[e].data.unique_id,this.animator&&this.animator.stop(),this._swipable&&this._swipable.stopMomentum(),r?(this._el.slider_container.style.left=-(this.slide_spacing*e)+"px",this._onSlideChange(i)):this.animator=Ni(this._el.slider_container,{left:-(this.slide_spacing*e)+"px",duration:this.options.duration,easing:this.options.ease,complete:this._onSlideChange(i)}),this._slides[e].setActive(!0),this._slides[e+1]?(this.showNav(this._nav.next,!0),this._nav.next.update(this._slides[e+1])):this.showNav(this._nav.next,!1),this._slides[e-1]?(this.showNav(this._nav.previous,!0),this._nav.previous.update(this._slides[e-1])):this.showNav(this._nav.previous,!1),this.preloadTimer=setTimeout(function(){s.preloadSlides(e)},this.options.duration))}goToId(e,r,i){this.goTo(this._findSlideIndex(e),r,i)}preloadSlides(e){this._slides[e+1]&&(this._slides[e+1].loadMedia(),this._slides[e+1].scrollToTop()),this._slides[e+2]&&(this._slides[e+2].loadMedia(),this._slides[e+2].scrollToTop()),this._slides[e-1]&&(this._slides[e-1].loadMedia(),this._slides[e-1].scrollToTop()),this._slides[e-2]&&(this._slides[e-2].loadMedia(),this._slides[e-2].scrollToTop())}next(){var e=this._findSlideIndex(this.current_id);e+1<this._slides.length?this.goTo(e+1):this.goTo(e)}previous(){var e=this._findSlideIndex(this.current_id);e-1>=0?this.goTo(e-1):this.goTo(e)}showNav(e,r){this.options.width<=500&&Io?e.hide():r?e.show():e.hide()}changeBackground(e){var r={r:256,g:256,b:256};e.color_value&&e.color_value!=""?(r=GC(e.color_value),r||(Ye("Invalid color value "+e.color_value),r=this.options.default_bg_color)):(r=this.options.default_bg_color,e.color_value="rgb("+r.r+" , "+r.g+", "+r.b+")"),r.r+""+r.g+r.b,this._el.background.style.backgroundImage="none",e.color_value?this._el.background.style.backgroundColor=e.color_value:this._el.background.style.backgroundColor="transparent",r.r<255||r.g<255||r.b<255||e.image?(this._nav.next.setColor(!0),this._nav.previous.setColor(!0)):(this._nav.next.setColor(!1),this._nav.previous.setColor(!1))}_updateDrawSlides(){for(var e=this.options.layout,r=0;r<this._slides.length;r++)this._slides[r].updateDisplay(this.options.width,this.options.height,e),this._slides[r].setPosition({left:this.slide_spacing*r,top:0});this.goToId(this.current_id,!0,!1)}_initLayout(){this._el.container.classList.add("tl-storyslider"),this._nav.previous=new _v({title:"Previous",description:"description"},{direction:"previous"},this._el.container),this._nav.next=new _v({title:"Next",description:"description"},{direction:"next"},this._el.container),this._el.slider_container_mask=pe("div","tl-slider-container-mask",this._el.container),this._el.background=pe("div","tl-slider-background tl-animate",this._el.container),this._el.slider_container=pe("div","tl-slider-container tlanimate",this._el.slider_container_mask),this._el.slider_item_container=pe("div","tl-slider-item-container",this._el.slider_container),this._el.slider_container.setAttribute("aria-live","polite"),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this._el.slider_container.style.left="0px",ii&&(this._swipable=new I_(this._el.slider_container_mask,this._el.slider_container,{enable:{x:!0,y:!1},snap:!0}),this._swipable.enable(),this._message=new Kf(this._el.container,{message_class:"tl-message-full",message_icon_class:"tl-icon-swipe-left"},this.getLanguage()),this._message.updateMessage(this._("swipe_to_navigate")),this._message.addTo(this._el.container))}_initEvents(){this._nav.next.on("clicked",this._onNavigation,this),this._nav.previous.on("clicked",this._onNavigation,this),this._message&&this._message.on("clicked",this._onMessageClick,this),this._swipable&&(this._swipable.on("swipe_left",this._onNavigation,this),this._swipable.on("swipe_right",this._onNavigation,this),this._swipable.on("swipe_nodirection",this._onSwipeNoDirection,this))}_initData(){this.data.title&&this._createSlide(this.data.title,!0,-1),this._createSlides(this.data.events)}_onBackgroundChange(e){var r=this._findSlideIndex(this.current_id),i=this._slides[r].getBackground();this.changeBackground(e),this.fire("colorchange",i)}_onMessageClick(e){this._message.hide()}_onSwipeNoDirection(e){this.goToId(this.current_id)}_onNavigation(e){e.direction=="next"||e.direction=="left"?this.next():(e.direction=="previous"||e.direction=="right")&&this.previous(),this.fire("nav_"+e.direction,this.data)}_onSlideAdded(e){Ye("slideadded"),this.fire("slideAdded",this.data)}_onSlideRemoved(e){this.fire("slideRemoved",this.data)}_onSlideChange(e){e||this.fire("change",{unique_id:this.current_id})}_onMouseClick(e){}_fireMouseEvent(e){if(this._loaded){var r=e.type;r=r==="mouseenter"?"mouseover":r==="mouseleave"?"mouseout":r,this.hasEventListeners(r)&&(r==="contextmenu"&&Ve.preventDefault(e),this.fire(r,{latlng:"something",layerPoint:"something else"}))}}_onLoaded(){this.fire("loaded",this.data)}}Dn(fA,ji,Mn);class pA{constructor(e,r,i,s){this._el={parent:{},container:{},button_forwardtoend:{},button_backtostart:{},button_zoomin:{},button_zoomout:{},arrow:{},line:{},coverbar:{},grip:{}},this.collapsed=!1,typeof e=="object"?this._el.container=e:this._el.container=cc(e),r&&(this._el.parent=r),this.data={visible_ticks_dates:{}},this.options={width:600,height:600,duration:1e3,ease:Za,menubar_default_y:0},this.animator={},this.setLanguage(s),ot(this.options,i),this._initLayout(),this._initEvents()}show(e){this.options.duration}hide(e){}toogleZoomIn(e){e?this._el.button_zoomin.removeAttribute("disabled"):this._el.button_zoomin.setAttribute("disabled",!0)}toogleZoomOut(e){e?this._el.button_zoomout.removeAttribute("disabled"):this._el.button_zoomout.setAttribute("disabled",!0)}changeVisibleTicks(e){const r=e.minor;if(!r.length){this.data.visible_ticks_dates={};return}const s=r[0].date.getFullYear(),a=r[r.length-1].date.getFullYear();this.data.visible_ticks_dates={start:s,end:a},this._updateZoomAriaLabels()}setSticky(e){this.options.menubar_default_y=e}setColor(e){e?this._el.container.className="tl-menubar tl-menubar-inverted":this._el.container.className="tl-menubar"}updateDisplay(e,r,i,s){this._updateDisplay(e,r,i,s)}_onButtonZoomIn(e){this.fire("zoom_in",e)}_onButtonZoomOut(e){this.fire("zoom_out",e)}_onButtonForwardToEnd(e){this.fire("forward_to_end",e)}_onButtonBackToStart(e){this.fire("back_to_start",e)}_initLayout(){this._el.button_zoomin=Hl("tl-menubar-button",this._el.container),this._el.button_zoomout=Hl("tl-menubar-button",this._el.container),this._el.button_forwardtoend=Hl("tl-menubar-button",this._el.container),this._el.button_backtostart=Hl("tl-menubar-button",this._el.container),Io&&this._el.container.setAttribute("ontouchstart"," "),this._el.button_backtostart.innerHTML="<span class='tl-icon-goback'></span>",this._el.button_backtostart.setAttribute("aria-label",this._("return_to_title")),this._el.button_forwardtoend.innerHTML="<span class='tl-icon-goend'></span>",this._el.button_forwardtoend.setAttribute("aria-label",this._("go_to_end")),this._el.button_zoomin.innerHTML="<span class='tl-icon-zoom-in'></span>",this._el.button_zoomin.setAttribute("aria-label",this._("zoom_in")),this._el.button_zoomout.innerHTML="<span class='tl-icon-zoom-out'></span>",this._el.button_zoomout.setAttribute("aria-label",this._("zoom_out"))}_initEvents(){Ve.addListener(this._el.button_forwardtoend,"click",this._onButtonForwardToEnd,this),Ve.addListener(this._el.button_backtostart,"click",this._onButtonBackToStart,this),Ve.addListener(this._el.button_zoomin,"click",this._onButtonZoomIn,this),Ve.addListener(this._el.button_zoomout,"click",this._onButtonZoomOut,this)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}_updateZoomAriaLabels(){Object.keys(this.data.visible_ticks_dates).length==0?(this._el.button_zoomin.setAttribute("aria-description",""),this._el.button_zoomout.setAttribute("aria-description","")):(this._el.button_zoomin.setAttribute("aria-description",this._("aria_label_zoomin",this.data.visible_ticks_dates)),this._el.button_zoomout.setAttribute("aria-description",this._("aria_label_zoomout",this.data.visible_ticks_dates)))}}Dn(pA,Li,Mn,ji);let wv=null;if(document){let t=document.getElementsByTagName("script");t&&t.length>0&&(wv=t[t.length-1].src)}function K5(t){return function(e){if(t.config){var r=e.key,i=t._getSlideIndex(self.current_id),s=t.config.events.length-1,o=t.config.title?s+1:s,a=0;r=="ArrowLeft"?i!=a&&t.goToPrev():r=="ArrowRight"&&i!=o&&t.goToNext()}}}class mA{constructor(e,r,i){if(i||(i={}),this.ready=!1,this._el={container:cc(e),storyslider:{},timenav:{},menubar:{}},i.lang&&!i.language&&(i.language=i.lang),this.language=S_,this._storyslider={},this._timenav={},this._menubar={},this._loaded={storyslider:!1,timenav:!1},this.config=null,this.options={script_path:"https://cdn.knightlab.com/libs/timeline3/latest/js/",height:this._el.container.offsetHeight,width:this._el.container.offsetWidth,debug:!1,font:"default",is_embed:!1,is_full_embed:!1,hash_bookmark:!1,default_bg_color:{r:255,g:255,b:255},scale_factor:2,layout:"landscape",timenav_position:"bottom",optimal_tick_width:60,base_class:"tl-timeline",timenav_height:null,timenav_height_percentage:25,timenav_mobile_height_percentage:40,timenav_height_min:175,marker_height_min:30,marker_width_min:100,marker_padding:5,start_at_slide:0,start_at_end:!1,menubar_height:0,skinny_size:650,medium_size:800,use_bc:!1,duration:1e3,ease:Za,dragging:!0,trackResize:!0,map_type:"stamen:toner-lite",slide_padding_lr:100,slide_default_fade:"0%",zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89],language:"en",ga_measurement_id:null,ga_property_id:null,track_events:["back_to_start","nav_next","nav_previous","zoom_in","zoom_out"],theme:null,sheets_proxy:"https://sheets-proxy.knightlab.com/proxy/",soundcite:!1},this.animator_timenav=null,this.animator_storyslider=null,this.animator_menubar=null,this.message=new Kf(this._el.container,{message_class:"tl-message-full"}),typeof i.default_bg_color=="string"){var s=GC(i.default_bg_color);s?i.default_bg_color=s:(delete i.default_bg_color,Ye("Invalid default background color. Ignoring."))}ot(this.options,i),this.options.script_path||(this.options.script_path=this.determineScriptPath()),i.soundcite&&this.on("ready",()=>{Ye("Loading Soundcite resources "),Tm("https://cdn.knightlab.com/libs/soundcite/latest/css/player.css"),vo("https://cdn.knightlab.com/libs/soundcite/latest/js/soundcite.min.js")}),this._loadStyles(),document.addEventListener("keydown",K5(this)),window.addEventListener("resize",(function(o){this.updateDisplay()}).bind(this)),this.options.debug&&h$(console.log),this._el.container.classList.add("tl-timeline"),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","region"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline")),this.options.is_embed&&this._el.container.classList.add("tl-timeline-embed"),this.options.is_full_embed&&this._el.container.classList.add("tl-timeline-full-embed"),this._loadLanguage(r)}_loadStyles(){let e=null,r=null;if(this.options.font&&(this.options.font.indexOf("http")==0||this.options.font.match(/\.css$/)))e=this.options.font;else if(this.options.font){let i="../css/fonts/font."+this.options.font.toLowerCase()+".css";e=new URL(i,this.options.script_path).toString()}if(e&&Tm(e),this.options.theme&&(this.options.theme.indexOf("http")==0||this.options.theme.match(/\.css$/)))r=this.options.theme;else if(this.options.theme){let i="../css/themes/timeline.theme."+this.options.theme.toLowerCase()+".css";r=new URL(i,this.options.script_path).toString()}r&&Tm(r)}_loadLanguage(e){try{var r=this.options.language,i=this.options.script_path;A$(r,i).then(s=>{s?(this.language=s,this.message.setLanguage(this.language),this.showMessage(this._("loading_timeline"))):this.showMessage(`Error loading ${r}`),this._initData(e)})}catch(s){this.showMessage(this._translateError(s))}}_initData(e){typeof e=="string"?h5(e,{callback:(function(r){this.setConfig(r)}).bind(this),sheets_proxy:this.options.sheets_proxy}):Js==e.constructor?this.setConfig(e):this.setConfig(new Js(e))}_translateError(e){return e.hasOwnProperty("stack")&&Ye(e.stack),e.message_key?this._(e.message_key)+(e.detail?" ["+e.detail+"]":""):e}showMessage(e){this.message?this.message.updateMessage(e):(Ye("No message display available."),Ye(e))}determineScriptPath(){let e=null;if(wv)e=wv;else{let r=document.getElementById("timeline-script-tag");r&&(e=r.src)}if(!e){let r=document.getElementsByTagName("script");for(let i=r.length-1;i>=0;i--)if(r[i].src){e=r[i].src;break}}return e?e.substr(0,e.lastIndexOf("/")+1):""}setConfig(e){if(this.config=e,this.config.isValid()&&(this.config.validate(),this._validateOptions()),this.config.isValid())try{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this._onDataLoaded.bind(this)):this._onDataLoaded()}catch(o){this.showMessage("<strong>"+this._("error")+":</strong> "+this._translateError(o))}else{for(var r=[],i=0,s=this.config.getErrors();i<s.length;i++)r.push(this._translateError(s[i]));this.showMessage("<strong>"+this._("error")+":</strong> "+r.join("<br>"))}}_onDataLoaded(){this.fire("dataloaded"),this._initLayout(),this._initEvents(),this._initAnalytics(),this.message&&this.message.hide();let e=(i,s)=>{i.reduce((o,a)=>o||a.isIntersecting,!1)&&this.updateDisplay()};new IntersectionObserver(e.bind(this)).observe(this._el.container),this.ready=!0,this.fire("ready")}_initLayout(){this.message.removeFrom(this._el.container),this._el.container.innerHTML="",this.options.timenav_position=="top"?(this._el.timenav=pe("div","tl-timenav",this._el.container),this._el.menubar=pe("div","tl-menubar",this._el.container),this._el.storyslider=pe("div","tl-storyslider",this._el.container)):(this._el.storyslider=pe("div","tl-storyslider",this._el.container),this._el.timenav=pe("div","tl-timenav",this._el.container),this._el.menubar=pe("div","tl-menubar",this._el.container)),this._el.attribution=pe("div","tl-attribution",this._el.container),this._el.attribution.innerHTML="<a href='https://timeline.knightlab.com' target='_blank' rel='noopener'><span class='tl-knightlab-logo'></span>TimelineJS</a>",this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.timenav_height=this._calculateTimeNavHeight(this.options.timenav_height),this._timenav=new dA(this._el.timenav,this.config,this.options,this.language),this._timenav.on("loaded",this._onTimeNavLoaded,this),this._timenav.options.height=this.options.timenav_height,this._timenav.init(),this.options.initial_zoom&&this.setZoom(this.options.initial_zoom),this._storyslider=new fA(this._el.storyslider,this.config,this.options,this.language),this._el.storyslider.setAttribute("role","group"),this._el.storyslider.setAttribute("aria-label",this._("aria_label_timeline_content")),this._storyslider.on("loaded",this._onStorySliderLoaded,this),this._storyslider.init(),this._menubar=new pA(this._el.menubar,this._el.container,this.options,this.getLanguage()),this.options.layout=="portrait"?this.options.storyslider_height=this.options.height-this.options.timenav_height-1:this.options.storyslider_height=this.options.height-1,this._updateDisplay()}_initEvents(){this._timenav.on("change",this._onTimeNavChange,this),this._timenav.on("zoomtoggle",this._onZoomToggle,this),this._timenav.on("visible_ticks_change",this._onVisibleTicksChange,this),this._storyslider.on("change",this._onSlideChange,this),this._storyslider.on("colorchange",this._onColorChange,this),this._storyslider.on("nav_next",this._onStorySliderNext,this),this._storyslider.on("nav_previous",this._onStorySliderPrevious,this),this._menubar.on("zoom_in",this._onZoomIn,this),this._menubar.on("zoom_out",this._onZoomOut,this),this._menubar.on("forward_to_end",this._onForwardToEnd,this),this._menubar.on("back_to_start",this._onBackToStart,this)}_onColorChange(e){this.fire("color_change",{unique_id:this.current_id},this)}_onSlideChange(e){this.current_id!=e.unique_id&&(this.current_id=e.unique_id,this._timenav.goToId(this.current_id),this._onChange(e))}_onTimeNavChange(e){this.current_id!=e.unique_id&&(this.current_id=e.unique_id,this._storyslider.goToId(this.current_id),this._onChange(e))}_onZoomToggle(e){e.zoom=="in"?this._menubar.toogleZoomIn(e.show):e.zoom=="out"&&this._menubar.toogleZoomOut(e.show)}_onChange(e){this.fire("change",{unique_id:this.current_id},this),this.options.hash_bookmark&&this.current_id&&this._updateHashBookmark(this.current_id)}_onVisibleTicksChange(e){this._menubar.changeVisibleTicks(e.visible_ticks)}_onForwardToEnd(e){this.goToEnd(),this.fire("forward_to_end",{unique_id:this.current_id},this)}_onBackToStart(e){this.goToStart(),this.fire("back_to_start",{unique_id:this.current_id},this)}_onZoomIn(e){this._timenav.zoomIn(),this.fire("zoom_in",{zoom_level:this._timenav.options.scale_factor},this)}_onZoomOut(e){this._timenav.zoomOut(),this.fire("zoom_out",{zoom_level:this._timenav.options.scale_factor},this)}_onTimeNavLoaded(){this._loaded.timenav=!0,this._onLoaded()}_onStorySliderLoaded(){this._loaded.storyslider=!0,this._onLoaded()}_onStorySliderNext(e){this.fire("nav_next",e)}_onStorySliderPrevious(e){this.fire("nav_previous",e)}_updateDisplay(e,r,i){var s=this.options.duration,o=this.options.base_class,a=0;i&&(s=i),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.width<=this.options.skinny_size?(o+=" tl-skinny",this.options.layout="portrait"):this.options.width<=this.options.medium_size?(o+=" tl-medium",this.options.layout="landscape"):this.options.layout="landscape",ii&&(this.options.layout=c$()),Io?(o+=" tl-mobile",this.options.timenav_height=this._calculateTimeNavHeight(e,this.options.timenav_mobile_height_percentage)):this.options.timenav_height=this._calculateTimeNavHeight(e),this.options.layout=="portrait"?o+=" tl-layout-portrait":o+=" tl-layout-landscape",this.options.storyslider_height=this.options.height-this.options.timenav_height,this.options.timenav_position=="top"?a=Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-39/2:a=Math.round(this.options.storyslider_height+1+Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-35/2),r?(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this.animator_storyslider&&this.animator_storyslider.stop(),this.animator_storyslider=Ni(this._el.storyslider,{height:this.options.storyslider_height+"px",duration:s/2,easing:Lu}),this.animator_menubar&&this.animator_menubar.stop(),this.animator_menubar=Ni(this._el.menubar,{top:a+"px",duration:s/2,easing:Lu})):(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this._el.storyslider.style.height=this.options.storyslider_height+"px",this._el.menubar.style.top=a+"px"),this.message&&this.message.updateDisplay(this.options.width,this.options.height),this._timenav.updateDisplay(this.options.width,this.options.timenav_height,r),this._storyslider.updateDisplay(this.options.width,this.options.storyslider_height,r,this.options.layout),this.language.direction=="rtl"&&(o+=" tl-rtl"),this._el.container.className=o}_calculateTimeNavHeight(e,r){var i=0;return(this.options.timenav_height_percentage||r)&&(r?i=Math.round(this.options.height/100*r):i=Math.round(this.options.height/100*this.options.timenav_height_percentage)),this._timenav.ready&&this.options.timenav_height_min<this._timenav.getMinimumHeight()&&(this.options.timenav_height_min=this._timenav.getMinimumHeight()),i<this.options.timenav_height_min&&(i=this.options.timenav_height_min),i=i-this.options.marker_padding*2,i}_validateOptions(){for(var e=["timenav_height","timenav_height_min","marker_height_min","marker_width_min","marker_padding","start_at_slide","slide_padding_lr"],r=0;r<e.length;r++){var i=e[r],s=this.options[i];let o=!0;typeof s=="number"?o=s==parseInt(s):typeof s=="string"&&(o=s.match(/^\s*(\-?\d+)?\s*$/)),o||this.config.logError({message_key:"invalid_integer_option",detail:i})}}_getSlideIndex(e){if(this.config){if(this.config.title&&this.config.title.unique_id==e)return 0;for(var r=0;r<this.config.events.length;r++)if(e==this.config.events[r].unique_id)return this.config.title?r+1:r}return-1}_getEventIndex(e){for(var r=0;r<this.config.events.length;r++)if(e==this.config.events[r].unique_id)return r;return-1}_onLoaded(){if(this._loaded.storyslider&&this._loaded.timenav&&(this.fire("loaded",this.config),d$(this.options.start_at_end)||this.options.start_at_slide>this.config.events.length?this.goToEnd():this.goTo(this.options.start_at_slide),this.options.hash_bookmark)){window.location.hash!=""?this.goToId(window.location.hash.replace("#event-","")):this._updateHashBookmark(this.current_id);let e=this;window.addEventListener("hashchange",function(){window.location.hash.indexOf("#event-")==0&&e.goToId(window.location.hash.replace("#event-",""))},!1)}}_updateHashBookmark(e){if(e){var r="#event-"+e.toString();window.history.replaceState(null,"Browsing TimelineJS",r),this.fire("hash_updated",{unique_id:this.current_id,hashbookmark:"#event-"+e.toString()},this)}}zoomIn(){this._timenav.zoomIn()}zoomOut(){this._timenav.zoomOut()}setZoom(e){this._timenav.setZoom(e)}goToId(e){this.current_id!=e&&(this.current_id=e,this._timenav.goToId(this.current_id),this._storyslider.goToId(this.current_id,!1,!0),this.fire("change",{unique_id:this.current_id},this))}goTo(e){if(!(e<0))try{this.config.title?e===0?this.goToId(this.config.title.unique_id):this.goToId(this.config.events[e-1].unique_id):this.goToId(this.config.events[e].unique_id)}catch{return}}goToStart(){this.goTo(0)}goToEnd(){var e=this.config.events.length-1;this.goTo(this.config.title?e+1:e)}goToPrev(){this.goTo(this._getSlideIndex(this.current_id)-1),this.focusContainer()}goToNext(){this.goTo(this._getSlideIndex(this.current_id)+1),this.focusContainer()}add(e){var r=this.config.addEvent(e),i=this._getEventIndex(r),s=this.config.events[i];this._storyslider.createSlide(s,this.config.title?i+1:i),this._storyslider._updateDrawSlides(),this._timenav.createMarker(s,i),this._timenav._updateDrawTimeline(!1),this.fire("added",{unique_id:r})}remove(e){if(e>=0&&e<this.config.events.length){this.config.events[e].unique_id==this.current_id&&(e<this.config.events.length-1?this.goTo(e+1):this.goTo(e-1));var r=this.config.events.splice(e,1);delete this.config.event_dict[r[0].unique_id],this._storyslider.destroySlide(this.config.title?e+1:e),this._storyslider._updateDrawSlides(),this._timenav.destroyMarker(e),this._timenav._updateDrawTimeline(!1),this.fire("removed",{unique_id:r[0].unique_id})}}removeId(e){this.remove(this._getEventIndex(e))}getData(e){if(this.config.title){if(e==0)return this.config.title;if(e>0&&e<=this.config.events.length)return this.config.events[e-1]}else if(e>=0&&e<this.config.events.length)return this.config.events[e];return null}getDataById(e){return this.getData(this._getSlideIndex(e))}getSlide(e){return e>=0&&e<this._storyslider._slides.length?this._storyslider._slides[e]:null}getSlideById(e){return this.getSlide(this._getSlideIndex(e))}getCurrentSlide(){return this.getSlideById(this.current_id)}updateDisplay(){this.ready?this._updateDisplay():Ye("updateDisplay called but timeline is not in ready state")}focusContainer(){this._el.container.focus()}_initGoogleAnalytics(e){vo(`https://www.googletagmanager.com/gtag/js?id=${e}`),window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",e)}_initAnalytics(){let e=this.options.ga_measurement_id||this.options.ga_property_id||null;if(e){this._initGoogleAnalytics(e);var r=this.options.track_events;for(let s=0;s<r.length;s++){var i=r[s];this.addEventListener(i,function(o){gtag("event",o.type)})}}}}Dn(mA,ji,Mn);function Y5(){const t=N.useRef(null),[e,r]=N.useState(null),[i,s]=N.useState(!0),[o,a]=N.useState(null),l=qn(),u=N.useRef();u.current=l,N.useEffect(()=>{async function f(){try{const p=await Bt(Ot(dt,"timelineEvents")),g=c(p);r({title:{media:{url:"",caption:"",credit:""},text:{headline:"Civil Rights Movement Timeline",text:"Key events from the Civil Rights Movement, identified from interviews from the Library of Congress Civil Rights History Project."}},events:g}),s(!1)}catch(p){console.error("Error fetching timeline data:",p),a("Failed to load timeline events."),s(!1)}}f()},[]),N.useEffect(()=>{if(e&&t.current){t.current.innerHTML="";try{new mA(t.current,e),setTimeout(h,1e3)}catch(f){console.error("Error initializing Timeline.js:",f),a("Failed to initialize timeline.")}}},[e]);const c=f=>f.docs.map(p=>{const g=p.data(),b=new Date(g.date),R=g.keywords?g.keywords.split(",").map(x=>x.trim()):[],P=`
        ${g.description||""}
        <br><br>
        <button 
          class="relevant-interviews-button" 
          data-keywords="${encodeURIComponent(R.join(","))}"
          style="background-color: #2563eb; color: white; padding: 10px 16px; border: none; border-radius: 8px; cursor: pointer; display: flex; align-items: center; font-family: inherit; font-size: 14px; font-weight: 500; transition: background-color 0.2s; box-shadow: 0 1px 3px rgba(0,0,0,0.1);"
          onmouseover="this.style.backgroundColor = '#1d4ed8'"
          onmouseout="this.style.backgroundColor = '#2563eb'"
        >
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" style="width: 20px; height: 20px; margin-right: 8px;">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
          </svg>
          Relevant Interviews
        </button>
      `;return{start_date:{year:b.getFullYear(),month:b.getMonth()+1,day:b.getDate()},text:{headline:g.title,text:P},media:{url:g.mediaUrl||"",caption:g.mediaCaption||"",credit:g.mediaCredit||""}}}),h=()=>{document.querySelectorAll(".relevant-interviews-button").forEach(f=>{f.addEventListener("click",function(p){p.preventDefault(),p.stopPropagation();const g=this.dataset.keywords;g&&u.current(`/playlist-builder?keywords=${g}`)})})};return i?m.jsxs("div",{className:"flex justify-center items-center h-96 bg-gray-50",children:[m.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),m.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):o?m.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg text-center mx-auto my-6 max-w-xl",children:o}):m.jsxs("div",{className:"w-full max-w-7xl mx-auto p-6 bg-gray-50 font-sans",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Civil Rights Timeline"}),m.jsx("p",{className:"text-base leading-relaxed text-gray-600",children:"Explore key events from the Civil Rights Movement, with links to relevant interview recordings."})]}),m.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden p-0 mb-6",children:m.jsx("div",{ref:t,id:"timeline-embed",style:{height:"600px",width:"100%",position:"relative"}})}),m.jsx("div",{className:"bg-indigo-50 rounded-xl p-4 px-6 border-l-4 border-indigo-500",children:m.jsxs("p",{className:"text-sm leading-relaxed text-indigo-800 m-0",children:[m.jsx("strong",{children:"Tip:"}),' Click on any event to see details, and use the "Relevant Interviews" button to find related interview recordings.']})})]})}function X5(){const[t,e]=N.useState([]),[r,i]=N.useState(!0),[s,o]=N.useState(null),[a,l]=N.useState(""),[u,c]=N.useState(null),[h,f]=N.useState(!1),p=qn();N.useEffect(()=>{R()},[]),N.useEffect(()=>{u&&f(!0)},[u]);const g=()=>{f(!1)},b=I=>{const E=I==null?void 0:I.match(/embed\/([a-zA-Z0-9_-]+)/);return E?E[1]:null},R=async()=>{try{i(!0);const I=await Bt(Ot(dt,"interviewSummaries")),E=[];I.forEach(w=>{const y=w.data(),C=b(y.videoEmbedLink);E.push({id:w.id,name:y.name||"Unknown Name",role:y.role||"Unknown Role",videoEmbedLink:y.videoEmbedLink,thumbnailUrl:C?`https://img.youtube.com/vi/${C}/hqdefault.jpg`:null})}),e(E),i(!1)}catch(I){console.error("Error fetching people:",I),o("Failed to load interview subjects"),i(!1)}},P=()=>{if(!u)return;const I=t.filter(w=>w.name.toLowerCase().includes(a.toLowerCase())),E=I.findIndex(w=>w.id===u.id);E>0?c(I[E-1]):c(I[I.length-1])},x=()=>{if(!u)return;const I=t.filter(w=>w.name.toLowerCase().includes(a.toLowerCase())),E=I.findIndex(w=>w.id===u.id);E<I.length-1?c(I[E+1]):c(I[0])};N.useEffect(()=>{const I=E=>{h&&(E.key==="ArrowLeft"?P():E.key==="ArrowRight"?x():E.key==="Escape"&&g())};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[h,u,a]);const _=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("polyline",{points:"15 18 9 12 15 6"})}),T=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("polyline",{points:"9 18 15 12 9 6"})}),L=()=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),m.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),F=({person:I,isOpen:E,onClose:w,onPrev:y,onNext:C})=>{if(!E||!I)return null;const A=z=>{z.target===z.currentTarget&&w()};return m.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:[m.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60",onClick:A}),m.jsx("button",{className:"absolute left-4 md:left-8 z-50 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:z=>{z.stopPropagation(),y()},"aria-label":"Previous person",children:m.jsx(_,{})}),m.jsx("button",{className:"absolute right-4 md:right-8 z-50 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:z=>{z.stopPropagation(),C()},"aria-label":"Next person",children:m.jsx(T,{})}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-md w-full overflow-hidden animate-fadeIn z-50 relative",children:[m.jsxs("div",{className:"relative",children:[I.thumbnailUrl&&m.jsx("div",{className:"w-full h-48 overflow-hidden",children:m.jsx("img",{src:I.thumbnailUrl,alt:I.name,className:"w-full h-full object-cover scale-125"})}),m.jsx("button",{className:"absolute top-2 right-2 bg-black bg-opacity-60 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:w,"aria-label":"Close",children:m.jsx(L,{})})]}),m.jsxs("div",{className:"p-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:I.name}),m.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:I.role}),m.jsx("button",{onClick:()=>p(`/interview-player?documentName=${encodeURIComponent(I.id)}`),className:"w-full bg-blue-600 text-white px-4 py-3 rounded-md hover:bg-blue-700 transition-colors duration-200 font-medium",children:"View Interview"})]})]})]})},V=({person:I})=>{const E=(u==null?void 0:u.id)===I.id;return m.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[m.jsx("div",{}),m.jsx("div",{className:`w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 rounded-md 
                    overflow-hidden shadow-md cursor-pointer transition-all duration-200
                    ${E?"ring-4 ring-blue-500":"hover:ring-2 hover:ring-blue-300"}`,onClick:()=>c(I),style:{touchAction:"manipulation"},children:I.thumbnailUrl?m.jsx("div",{className:"w-full h-full overflow-hidden",children:m.jsx("img",{src:I.thumbnailUrl,alt:I.name,className:"w-full h-full object-cover object-center scale-150",draggable:!1,loading:"lazy"})}):m.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:m.jsx("span",{className:"text-gray-400 text-xs",children:"No photo"})})}),m.jsx("div",{className:"text-center w-full",children:m.jsx("p",{className:`text-xs sm:text-sm truncate max-w-full ${E?"font-bold text-blue-600":"text-gray-700"}`,children:I.name})})]})};if(r)return m.jsx("div",{className:"flex justify-center items-center h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(s)return m.jsx("div",{className:"flex justify-center items-center h-screen",children:m.jsx("div",{className:"text-red-500",children:s})});if(t.length===0)return m.jsx("div",{className:"flex justify-center items-center h-screen",children:m.jsx("div",{className:"text-gray-500",children:"No interview subjects found"})});const D=t.filter(I=>I.name.toLowerCase().includes(a.toLowerCase()));return m.jsxs("div",{className:"container mx-auto px-4 py-8 min-h-screen",children:[m.jsxs("div",{className:"mb-6 max-w-xl mx-auto text-center",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:a?`${D.length} of ${t.length} People`:`${t.length} People`}),m.jsx("input",{type:"text",value:a,onChange:I=>l(I.target.value),placeholder:"Search by name...",className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring focus:border-blue-300"})]}),m.jsx("div",{className:"max-w-6xl mx-auto",children:m.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 gap-x-4 gap-y-6",children:D.map(I=>m.jsx(V,{person:I},I.id))})}),m.jsx(F,{person:u,isOpen:h,onClose:g,onPrev:P,onNext:x})]})}function Q5({activeVisualization:t}){return m.jsxs("div",{className:"w-full max-w-5xl mx-auto p-6 bg-white shadow-md rounded-md",children:[t==="keywords"&&m.jsx(ZB,{}),t==="map"&&m.jsx(i$,{}),t==="timeline"&&m.jsx(Y5,{}),t==="people"&&m.jsx(X5,{})]})}function J5(){const[t,e]=N.useState("timeline"),{user:r}=oc(),i=["timeline","keywords","map"];return m.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[m.jsx("div",{className:"text-center mb-8",children:m.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text mb-6",children:"Civil Rights History Project"})}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden transition-all duration-300 mb-6",children:[m.jsx("div",{className:"border-b border-gray-200",children:m.jsx("ul",{className:"flex flex-wrap m-0 p-0 list-none",children:i.map(s=>m.jsx("li",{className:"flex-1",children:m.jsx("button",{onClick:()=>e(s),className:`w-full py-4 px-1 text-sm text-center transition-all duration-300 cursor-pointer border-0 ${t===s?"bg-indigo-50 text-blue-800 font-semibold border-b-2 border-blue-600":"bg-transparent text-gray-500 font-normal border-b-0"}`,children:s.charAt(0).toUpperCase()+s.slice(1)})},s))})}),m.jsx("div",{className:"p-6",children:m.jsx(Q5,{activeVisualization:t})})]})]})}function Z5(){var g,b;const[t,e]=N.useState(""),[r,i]=N.useState(""),[s,o]=N.useState(!1),[a,l]=N.useState(""),{login:u}=oc(),c=qn(),f=((b=(g=Ir().state)==null?void 0:g.from)==null?void 0:b.pathname)||"/",p=async R=>{if(R.preventDefault(),!t||!r){l("Please enter both email and password");return}try{o(!0),l(""),await u(t,r),c(f,{replace:!0})}catch(P){console.error("Login error:",P);let x="Failed to log in";P.code==="auth/invalid-email"?x="Invalid email address":P.code==="auth/user-not-found"?x="No account found with this email":P.code==="auth/wrong-password"?x="Incorrect password":P.code==="auth/too-many-requests"&&(x="Too many failed login attempts. Please try again later"),l(x)}finally{o(!1)}};return m.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6 font-sans",children:[m.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-4",children:"Sign in to your account"}),m.jsx("p",{className:"text-sm text-center text-gray-500 mt-2",children:"Enter your credentials to access your account"})]}),a&&m.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mb-6 rounded",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-red-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm text-red-700",children:a})})]})}),m.jsxs("form",{className:"mt-6",onSubmit:p,children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),m.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:R=>e(R.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"you@example.com"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),m.jsx("a",{href:"#",className:"text-xs text-blue-600 hover:text-blue-700 transition-colors",children:"Forgot password?"})]}),m.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:r,onChange:R=>i(R.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:""})]}),m.jsx("div",{className:"mt-8",children:m.jsx("button",{type:"submit",disabled:s,className:`w-full flex justify-center items-center py-3 px-4 relative bg-blue-600 text-white text-sm font-medium border-0 rounded-lg shadow-sm transition-colors ${s?"opacity-70 cursor-not-allowed":"hover:bg-blue-700 cursor-pointer"}`,children:s?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"absolute left-6 flex items-center",children:m.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),m.jsx("span",{children:"Signing in..."})]}):m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"absolute left-6 flex items-center",children:m.jsx("svg",{className:"h-5 w-5 text-blue-200",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),m.jsx("span",{children:"Sign in"})]})})}),m.jsx("div",{className:"mt-6 text-center",children:m.jsxs("p",{className:"text-sm text-gray-500",children:["Don't have an account?"," ",m.jsx("a",{href:"#",className:"text-blue-600 font-medium hover:text-blue-700 transition-colors",children:"Sign up"})]})})]})]}),m.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})}function Hd(t){return t?t.split(",").map(e=>e.trim().toLowerCase()).filter(e=>e.length>0):[]}function ga(t){if(!t)return null;const e=t.match(/embed\/([a-zA-Z0-9_-]+)/);return e?e[1]:null}function SE(t){if(!t)return 0;const e=t.split(":").map(Number);return e.length===2?e[0]*60+e[1]:e.length===3?e[0]*3600+e[1]*60+e[2]:0}function Al(t){if(t==null)return"0:00";const e=Math.floor(t/3600),r=Math.floor(t%3600/60),i=Math.floor(t%60);return e>0?`${e}:${r.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`:`${r}:${i.toString().padStart(2,"0")}`}function ro(t){if(!t)return{startSeconds:0,endSeconds:0};const e=t.split("-").map(s=>s.trim());if(e.length!==2)return{startSeconds:0,endSeconds:0};const r=SE(e[0]),i=SE(e[1]);return{startSeconds:r,endSeconds:i}}const ez=({videoQueue:t,currentVideoIndex:e,setCurrentVideoIndex:r,currentTime:i,totalDuration:s,onSeek:o})=>{const a=N.useRef(null),l=N.useRef(null),[u,c]=N.useState(0),[h,f]=N.useState(0),[p,g]=N.useState(null),[b,R]=N.useState(null),P=N.useRef(null),[x,_]=N.useState(0),T=8;N.useEffect(()=>{let w=0;for(let C=0;C<e;C++)if(t[C]){const{startSeconds:A,endSeconds:z}=ro(t[C].timestamp);w+=z-A||300}const y=Math.max(0,i);if(w+=y,f(w),s&&s>0){const C=w/s*100;c(Math.min(Math.max(0,C),100))}L()},[t,e,i,s]);const L=()=>{e<x?_(Math.max(0,e)):e>=x+T&&_(Math.max(0,e-T+1))},F=t.map((w,y)=>{const{startSeconds:C,endSeconds:A}=ro(w.timestamp),z=A-C||300,Q=z/s*100,Z=ga(w.videoEmbedLink);return{id:y,width:Q,duration:z,isActive:y===e,videoId:Z,name:w.name||"Untitled"}}),V=F.slice(x,x+T),D=(w,y)=>{if(y!==e){r(y);return}const C=P.current;if(!C)return;const A=C.getBoundingClientRect(),Q=(w.clientX-A.left)/A.width,Z=F[e];if(!Z)return;const oe=Q*Z.duration;o&&o(oe)},I=w=>{if(p!==e)return;const y=P.current;if(!y)return;const C=y.getBoundingClientRect(),z=(w.clientX-C.left)/C.width;R(z)},E=()=>{R(null)};return m.jsxs("div",{children:[m.jsx("div",{ref:a,style:{position:"relative",width:"100%",backgroundColor:"#e5e7eb",marginBottom:"10px",borderRadius:"8px",overflow:"hidden",padding:"10px",boxSizing:"border-box",border:"1px solid #d1d5db",display:"flex"},children:V.map(w=>{const y=w.id,C=w.isActive;return m.jsxs("div",{onClick:A=>D(A,y),onMouseEnter:()=>g(y),onMouseLeave:()=>{g(null),E()},onMouseMove:C?I:null,style:{width:`${100/V.length}%`,minWidth:"60px",padding:"0 2px",boxSizing:"border-box",position:"relative",cursor:"pointer"},ref:C?P:null,children:[m.jsxs("div",{style:{position:"relative",overflow:"hidden",borderRadius:"6px",border:`2px solid ${C?"#3b82f6":"#d1d5db"}`,height:"70px",boxShadow:C?"0 2px 5px rgba(0,0,0,0.2)":"none"},children:[m.jsx("img",{src:`https://img.youtube.com/vi/${w.videoId}/mqdefault.jpg`,alt:`Thumbnail for segment ${y+1}`,style:{width:"100%",maxHeight:"80px",objectFit:"contain",borderRadius:"6px"},onError:A=>{A.target.src="https://via.placeholder.com/120x60?text=No+Thumbnail"}}),C&&m.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${i/w.duration*100}%`,backgroundColor:"rgba(59, 130, 246, 0.4)",transition:"width 0.2s linear"}}),C&&b!==null&&m.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${b*100}%`,backgroundColor:"rgba(239, 68, 68, 0.4)",pointerEvents:"none",zIndex:5}}),C&&b!==null&&m.jsx("div",{style:{position:"absolute",top:"5px",left:`${b*100}%`,transform:"translateX(-50%)",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",zIndex:6,pointerEvents:"none"},children:Al(b*w.duration)}),m.jsx("div",{style:{position:"absolute",bottom:"0",left:"0",right:"0",backgroundColor:"rgba(0,0,0,0.6)",color:"white",fontSize:"11px",textAlign:"center",padding:"2px 0"},children:Al(w.duration)})]}),p===y&&m.jsxs("div",{style:{position:"absolute",top:"-30px",left:"50%",transform:"translateX(-50%)",backgroundColor:"#1f2937",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",zIndex:50,whiteSpace:"nowrap"},children:[w.name," (",Al(w.duration),")"]}),m.jsx("div",{style:{position:"absolute",top:"5px",left:"5px",backgroundColor:"rgba(0,0,0,0.7)",color:"white",borderRadius:"50%",width:"18px",height:"18px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"bold"},children:y+1})]},`thumb-${y}`)})}),m.jsxs("div",{style:{position:"relative",width:"100%",height:"8px",backgroundColor:"#d1d5db",borderRadius:"4px",overflow:"hidden",marginBottom:"10px",cursor:"pointer"},onClick:w=>{const y=w.currentTarget.getBoundingClientRect(),A=(w.clientX-y.left)/y.width;let z=0,Q=0,Z=0;for(let oe=0;oe<F.length;oe++){const G=F[oe].width/100;if(A>=z&&A<=z+G){Q=oe,Z=(A-z)/G*F[oe].duration;break}z+=G}Q!==e&&r(Q),o&&Q===e&&o(Z)},children:[F.map(w=>m.jsx("div",{style:{width:`${w.width}%`,height:"100%",backgroundColor:"transparent",borderRight:w.id<F.length-1?"1px solid #c4c4c4":"none",position:"relative",zIndex:2}},`bar-${w.id}`)),m.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${u}%`,backgroundColor:"#3b82f6",transition:"width 0.2s linear",zIndex:1}}),m.jsx("div",{ref:l,style:{position:"absolute",top:"-3px",left:`${u}%`,transform:"translateX(-50%)",width:"4px",height:"14px",backgroundColor:"red",borderRadius:"2px",zIndex:10,transition:"left 0.1s linear"},children:m.jsx("div",{style:{position:"absolute",top:"-4px",left:"50%",transform:"translate(-50%, -50%)",width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"red"}})})]}),m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 10px",backgroundColor:"#f3f4f6",borderRadius:"4px",fontSize:"12px",marginBottom:"10px"},children:[m.jsx("div",{children:Al(h)}),m.jsxs("div",{style:{fontWeight:"bold"},children:["Clip ",e+1,"/",t.length," (",u.toFixed(1),"%)"]}),m.jsx("div",{children:Al(s)})]})]})},gA=({onPrevious:t,onPlay:e,onPause:r,onNext:i,isPlaying:s,hasPrevious:o,hasNext:a})=>m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"24px",padding:"12px",backgroundColor:"#f3f4f6",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",margin:"20px auto",border:"2px solid #d1d5db",maxWidth:"320px"},children:[m.jsx("button",{onClick:t,disabled:!o,style:{padding:"12px",borderRadius:"9999px",backgroundColor:o?"#3b82f6":"#9ca3af",color:"white",border:"none",cursor:o?"pointer":"not-allowed",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),m.jsx("button",{onClick:s?r:e,style:{padding:"16px",borderRadius:"9999px",backgroundColor:"#3b82f6",color:"white",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:s?m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6"})}):m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})}),m.jsx("button",{onClick:i,disabled:!a,style:{padding:"12px",borderRadius:"9999px",backgroundColor:a?"#3b82f6":"#9ca3af",color:"white",border:"none",cursor:a?"pointer":"not-allowed",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),tz=({nextKeyword:t,thumbnailUrl:e,onPlay:r})=>m.jsxs("div",{style:{width:"240px",backgroundColor:"#f3f4f6",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",border:"2px solid #d1d5db",overflow:"hidden"},children:[m.jsx("div",{className:"relative",children:m.jsxs("div",{style:{width:"100%",height:"120px",backgroundImage:e?`url(${e})`:"none",backgroundColor:e?"transparent":"#e5e7eb",backgroundSize:"cover",backgroundPosition:"center"},children:[!e&&m.jsx("div",{className:"flex items-center justify-center h-full",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"text-gray-400",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsx("button",{onClick:r,style:{padding:"12px",borderRadius:"9999px",backgroundColor:"#3b82f6",color:"white",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})})})]})}),m.jsxs("div",{style:{padding:"12px"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[m.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",color:"#374151",margin:0},children:"Up Next"}),m.jsx("span",{style:{backgroundColor:"#dbeafe",color:"#1e40af",fontSize:"12px",fontWeight:"500",padding:"2px 8px",borderRadius:"4px"},children:t})]}),m.jsx("p",{style:{fontSize:"12px",color:"#6b7280",margin:0},children:"Plays automatically when current playlist ends"})]})]}),nz=({onClick:t})=>m.jsx("button",{onClick:t,className:"flex items-center justify-center p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 focus:outline-none transition-colors duration-200",title:"Shuffle and get new clips",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{d:"M8 5a1 1 0 100 2h5.586l-1.293 1.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L13.586 5H8zM12 15a1 1 0 100-2H6.414l1.293-1.293a1 1 0 10-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L6.414 15H12z"})})}),rz=({isOpen:t,onConfirm:e,onCancel:r,message:i})=>t?m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm mx-auto",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Confirmation"}),m.jsx("p",{className:"text-sm text-gray-600 mb-4",children:i}),m.jsxs("div",{className:"flex justify-end space-x-3",children:[m.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),m.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Confirm"})]})]})}):null,iz=({metadata:t,onMetadataUpdate:e})=>{const[r,i]=N.useState(!1),[s,o]=N.useState(!1),[a,l]=N.useState({}),[u,c]=N.useState(!1),[h,f]=N.useState(null),[p,g]=N.useState(!1);if(!t)return null;const b=()=>{l({...t}),o(!0),f(null),g(!1)},R=(D,I)=>{l(E=>({...E,[D]:I}))},P=async()=>{try{c(!0),f(null);let D;if(t.documentName&&t.id)D=Ns(dt,"interviewSummaries",t.documentName,"subSummaries",t.id);else{console.error("Unable to determine document path"),f("Unable to determine document path for saving"),c(!1);return}const I={...a};delete I.id,delete I.documentName,await sv(D,I),e&&e(a),g(!0),c(!1),setTimeout(()=>{o(!1),g(!1)},1500)}catch(D){console.error("Error updating document:",D),f(`Error saving changes: ${D.message}`),c(!1)}},x=()=>{o(!1),l({}),f(null),g(!1)},_=["summary"],T=Object.keys(t).filter(D=>!_.includes(D)&&t[D]!==void 0),L=["id","documentName","createdAt","updatedAt"],F=D=>!L.includes(D),V=(D,I)=>{const E=F(D);return typeof I=="boolean"?m.jsxs("select",{disabled:!E,value:a[D].toString(),onChange:w=>R(D,w.target.value==="true"),className:`w-full px-2 py-1 text-sm border rounded ${E?"border-blue-300":"bg-gray-100"}`,children:[m.jsx("option",{value:"true",children:"True"}),m.jsx("option",{value:"false",children:"False"})]}):typeof I=="number"?m.jsx("input",{type:"number",disabled:!E,value:a[D],onChange:w=>R(D,Number(w.target.value)),className:`w-full px-2 py-1 text-sm border rounded ${E?"border-blue-300":"bg-gray-100"}`}):typeof I=="object"?m.jsx("textarea",{disabled:!0,value:JSON.stringify(I,null,2),className:"w-full px-2 py-1 text-sm border rounded bg-gray-100",rows:3}):m.jsx("input",{type:"text",disabled:!E,value:a[D]||"",onChange:w=>R(D,w.target.value),className:`w-full px-2 py-1 text-sm border rounded ${E?"border-blue-300":"bg-gray-100"}`})};return m.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6 border border-gray-100",children:[m.jsxs("div",{className:"flex justify-between items-center mb-3",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Clip Metadata"}),m.jsx("div",{className:"flex space-x-2",children:s?m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:P,disabled:u,className:"px-3 py-1 bg-blue-600 text-white text-sm font-medium rounded hover:bg-blue-700 transition-colors disabled:bg-blue-300",children:u?"Saving...":"Save"}),m.jsx("button",{onClick:x,disabled:u,className:"px-3 py-1 bg-gray-200 text-gray-800 text-sm font-medium rounded hover:bg-gray-300 transition-colors disabled:bg-gray-100",children:"Cancel"})]}):m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:b,className:"px-3 py-1 bg-gray-100 text-blue-600 hover:bg-gray-200 text-sm font-medium rounded transition-colors",children:"Edit"}),m.jsx("button",{onClick:()=>i(!r),className:"px-3 py-1 text-blue-600 hover:text-blue-800 text-sm font-medium",children:r?"Show Less":"Show All"})]})})]}),p&&m.jsx("div",{className:"mb-3 p-2 bg-green-100 text-green-800 text-sm rounded",children:"Changes saved successfully"}),h&&m.jsx("div",{className:"mb-3 p-2 bg-red-100 text-red-800 text-sm rounded",children:h}),m.jsx("div",{className:"grid grid-cols-2 gap-4",children:["id","documentName","timestamp","keywords"].map(D=>t[D]&&m.jsxs("div",{className:"mb-2",children:[m.jsxs("span",{className:"block text-sm font-medium text-gray-500",children:[D,":"]}),s?V(D,t[D]):m.jsx("span",{className:"block text-sm text-gray-800 break-words",children:typeof t[D]=="object"?JSON.stringify(t[D]):String(t[D])})]},D))}),r&&m.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:m.jsx("div",{className:"grid grid-cols-2 gap-4",children:T.filter(D=>!["id","documentName","timestamp","keywords"].includes(D)).map(D=>m.jsxs("div",{className:"mb-2",children:[m.jsxs("span",{className:"block text-sm font-medium text-gray-500",children:[D,":"]}),s?V(D,t[D]):m.jsx("span",{className:"block text-sm text-gray-800 break-words",children:typeof t[D]=="object"?JSON.stringify(t[D]):String(t[D])})]},D))})})]})},sz=({currentKeyword:t,excludeIds:e=[],onAddToPlaylist:r})=>{const[i,s]=N.useState([]),[o,a]=N.useState(!0),[l,u]=N.useState(null);N.useEffect(()=>{t&&c(t)},[t,e.toString()]);const c=async p=>{try{a(!0);const g=Hd(p);if(g.length===0){s([]),a(!1);return}const b=await Bt(Ot(dt,"interviewSummaries")),R=[];for(const _ of b.docs){const T=_.id,L=_.data(),F=L.videoEmbedLink,V=h(F),D=Ot(dt,"interviewSummaries",T,"subSummaries");(await Bt(D)).forEach(E=>{const w=E.data(),y=(w.keywords||"").split(",").map(A=>A.trim().toLowerCase());g.some(A=>y.includes(A))&&!e.includes(E.id)&&R.push({id:E.id,documentId:`${T}_${E.id}`,documentName:T,...w,...L,thumbnailUrl:V,_debug_parentVideoEmbedLink:F})})}const P=R.filter(_=>_.thumbnailUrl).length;console.log(`Found thumbnails for ${P} out of ${R.length} clips`);const x=Array.from(new Map(R.map(_=>[`${_.id}_${_.documentName}`,_])).values());s(x),a(!1)}catch(g){console.error("Error fetching related clips:",g),u("Error loading related clips"),a(!1)}},h=p=>{if(!p)return null;try{let g=ga(p);if(!g){if(p.includes("youtube.com/watch"))g=new URL(p).searchParams.get("v");else if(p.includes("youtube.com/embed/")){const b=p.split("youtube.com/embed/");b.length>1&&(g=b[1].split("?")[0])}else if(p.includes("youtu.be/")){const b=p.split("youtu.be/");b.length>1&&(g=b[1].split("?")[0])}else if(p.includes("<iframe")&&p.includes("src=")){const b=p.match(/src=["'](.*?)["']/);if(b&&b[1])return h(b[1])}}if(g)return`https://img.youtube.com/vi/${g}/mqdefault.jpg`;console.log("Could not extract video ID from:",p)}catch(g){console.error("Error extracting video ID for thumbnail:",g,"from link:",p)}return null},f=p=>{r&&r(p)};return o?m.jsx("div",{className:"py-4",children:m.jsx("div",{className:"flex justify-center items-center",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})})}):l?m.jsx("div",{className:"p-4 bg-red-50 text-red-700 rounded-md",children:l}):i.length===0?null:m.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-sm p-6",children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Related Clips"}),m.jsx("div",{className:"overflow-x-auto pb-4",children:m.jsx("div",{className:"flex space-x-4",style:{minWidth:"min-content"},children:i.map((p,g)=>m.jsxs("div",{className:"flex-shrink-0 w-64 bg-gray-50 rounded-md overflow-hidden shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>f(p),children:[p.thumbnailUrl?m.jsxs("div",{className:"relative pb-[56.25%] bg-gray-200",children:[m.jsx("img",{src:p.thumbnailUrl,alt:p.name||"Video thumbnail",className:"absolute top-0 left-0 w-full h-full object-cover",onError:b=>{console.log("Thumbnail failed to load:",p.thumbnailUrl),b.target.onerror=null,b.target.style.display="none",b.target.parentElement.innerHTML=`
                        <div class="absolute top-0 left-0 w-full h-full flex items-center justify-center bg-gray-200">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                          </svg>
                        </div>
                      `}}),m.jsx("div",{className:"absolute inset-0 flex items-center justify-center hover:bg-black hover:bg-opacity-30 transition-all",children:m.jsx("span",{className:"text-white font-medium rounded-full p-2 bg-blue-600 opacity-0 hover:opacity-100 transition-opacity",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})})]}):m.jsxs("div",{className:"h-36 bg-gray-200 flex flex-col items-center justify-center",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),m.jsx("span",{className:"text-gray-500 text-sm",children:"Video Preview"})]}),m.jsxs("div",{className:"p-3",children:[m.jsx("h4",{className:"font-medium text-gray-900 line-clamp-1",title:p.name,children:p.name||"Unnamed clip"}),m.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-1",title:p.topic||"",children:p.topic||"No topic"}),p.timestamp&&m.jsx("p",{className:"text-xs text-gray-400 mt-1",children:p.timestamp}),m.jsx("button",{className:"mt-2 w-full py-1 px-2 bg-blue-50 text-blue-600 text-sm font-medium rounded hover:bg-blue-100 transition-colors",children:"Add to Playlist"})]})]},`${p.documentId||`${p.id}_${p.documentName}`}_${g}`))})})]})},oz=({video:t,onVideoEnd:e,onPlay:r,onPause:i,onTimeUpdate:s,isPlaying:o,seekToTime:a})=>{const l=N.useRef(null),u=N.useRef(null),c=N.useRef(null),[h,f]=N.useState(!1),[p,g]=N.useState(null),b=N.useRef(null),R=()=>{if(!t)return{startSeconds:0,endSeconds:0};try{const{startSeconds:P,endSeconds:x}=ro(t.timestamp),_=Number.isFinite(P)?Math.max(0,P):0,T=Number.isFinite(x)&&x>_?x:_+300;return console.log(`Video boundaries: ${_}s to ${T}s (duration: ${T-_}s)`),{startSeconds:_,endSeconds:T}}catch(P){return console.error("Error parsing timestamp:",P,"Using defaults"),{startSeconds:0,endSeconds:300}}};return N.useEffect(()=>{if(!t||!u.current)return;const P=ga(t.videoEmbedLink);if(!P){console.error("Invalid video embed link:",t.videoEmbedLink);return}const{startSeconds:x}=R(),_=()=>{l.current&&l.current.destroy();try{l.current=new window.YT.Player(u.current,{height:"405",width:"720",videoId:P,playerVars:{autoplay:1,controls:0,rel:0,modestbranding:1,start:x,enablejsapi:1},events:{onReady:T=>{console.log("YouTube Player Ready");const L=T.target.getDuration();if(console.log(`Video actual duration: ${L}s`),x>=L&&(console.error(`Invalid timestamp: start time (${x}s) is beyond video duration (${L}s)`),T.target.seekTo(0,!0),t&&t.id&&e)){console.warn(`Skipping invalid clip with ID: ${t.id}`),setTimeout(()=>{e()},500);return}s&&s(0),f(!0),T.target.seekTo(Math.min(x,L-1),!0),o?T.target.playVideo():T.target.pauseVideo()},onStateChange:T=>{const L=T.data;if(g(L),L===window.YT.PlayerState.PLAYING){if(s){const F=T.target.getCurrentTime();Math.max(0,F-x)<1&&s(0)}r&&r()}else L===window.YT.PlayerState.PAUSED?i&&i():L===window.YT.PlayerState.ENDED&&e&&e()},onError:T=>{console.error("YouTube player error:",T.data),e&&(console.warn("Video error detected, skipping to next clip"),setTimeout(()=>{e()},500))}}})}catch(T){console.error("Error creating YouTube player:",T)}};if(window.YT&&window.YT.Player)_();else{const T=document.createElement("script");T.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=_;const L=document.getElementsByTagName("script")[0];L.parentNode.insertBefore(T,L)}return()=>{l.current&&(l.current.destroy(),l.current=null),f(!1)}},[t]),N.useEffect(()=>{if(!(!h||!l.current))try{o?l.current.playVideo():l.current.pauseVideo()}catch(P){console.error("Error controlling player:",P)}},[o,h]),N.useEffect(()=>{if(!(!h||!l.current||a===void 0||a===null)&&b.current!==a)try{const{startSeconds:P}=R(),x=P+a;console.log(`Seeking to ${a}s within clip (absolute: ${x}s)`),l.current.seekTo(x,!0),b.current=a}catch(P){console.error("Error seeking:",P)}},[a,h]),N.useEffect(()=>{if(!h||!l.current)return;const{startSeconds:P,endSeconds:x}=R(),_=x-P;return(()=>{try{if(l.current&&l.current.getCurrentTime){const L=l.current.getCurrentTime(),F=Math.max(0,L-P);s&&F>=0&&s(F)}}catch(L){console.error("Error syncing time immediately:",L)}})(),c.current&&(clearInterval(c.current),c.current=null),o&&(c.current=setInterval(()=>{try{if(!l.current||!l.current.getCurrentTime)return;const L=l.current.getCurrentTime(),F=Math.max(0,L-P);if(l.current.getPlayerState()!==window.YT.PlayerState.PLAYING)return;s&&s(F),F>=_-.5&&(console.log(`Reached end of clip: ${F}s / ${_}s`),e&&(clearInterval(c.current),c.current=null,e()))}catch(L){console.error("Error in time tracking:",L)}},250)),()=>{c.current&&(clearInterval(c.current),c.current=null)}},[o,h,t]),m.jsxs("div",{className:"video-player-wrapper relative",children:[m.jsx("div",{ref:u,className:"rounded-lg shadow-lg bg-black w-full aspect-video"}),!h&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})})]})},az=()=>{const[t]=yf(),e=qn(),[r,i]=N.useState(""),[s,o]=N.useState([]),[a,l]=N.useState(0),[u,c]=N.useState(!0),[h,f]=N.useState(null),[p,g]=N.useState(!0),[b,R]=N.useState(0),[P,x]=N.useState(0),[_,T]=N.useState(0),[L,F]=N.useState(!1),[V,D]=N.useState(null),[I,E]=N.useState(!1),w=N.useRef(null),[y,C]=N.useState(!1),[A,z]=N.useState(0),[Q,Z]=N.useState([]),[oe,G]=N.useState({}),[K,re]=N.useState(""),[se,W]=N.useState(""),[$,J]=N.useState(!1),X=N.useRef(null);N.useEffect(()=>{if(s.length>0){const fe=s.reduce((be,we)=>{const{startSeconds:Ne,endSeconds:De}=ro(we.timestamp);return be+(De-Ne||300)},0);console.log("Calculated total duration:",fe),T(fe)}},[s]),N.useEffect(()=>{const fe=t.get("keywords");fe&&(console.log(`Found keyword: ${fe}`),i(fe))},[t]),N.useEffect(()=>{r&&(console.log(`Searching videos for: ${r}`),Ue())},[r]),N.useEffect(()=>{r&&oe[r]?z(oe[r]):r&&de(r)},[r,oe]);const de=async fe=>{if(fe)try{let be=0;const we=await Bt(Ot(dt,"interviewSummaries"));for(const Ne of we.docs){const De=Ne.id,nt=Ot(dt,"interviewSummaries",De,"subSummaries");(await Bt(nt)).forEach(Gn=>{(Gn.data().keywords||"").split(",").map(fn=>fn.trim().toLowerCase()).includes(fe.toLowerCase())&&be++})}console.log(`Total clips for keyword "${fe}": ${be}`),z(be),G(Ne=>({...Ne,[fe]:be}))}catch(be){console.error("Error counting clips:",be)}};N.useEffect(()=>()=>{w.current&&clearTimeout(w.current)},[]);const ye=fe=>{if(s.some(we=>we.id===fe.id)){console.log("Clip is already in the playlist:",fe.id),E({message:"This clip is already in your playlist",type:"info"}),w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{E(!1)},3e3);return}o(we=>[...we,fe]),E({message:"Clip added to playlist",type:"success"}),w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{E(!1)},3e3),console.log("Added clip to playlist:",fe.id)},Fe=async()=>{if(!y)try{C(!0);const fe=Hd(r),be=await Xe(fe),we=s.map(De=>De.id),Ne=be.filter(De=>!we.includes(De.id));Ne.length===0?E({message:"All available clips are already in your playlist",type:"info"}):(o(De=>[...De,...Ne]),E({message:`Added ${Ne.length} clips to playlist`,type:"success"})),w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{E(!1)},3e3)}catch(fe){console.error("Error adding all clips:",fe),E({message:"Error adding clips to playlist",type:"error"})}finally{C(!1)}};N.useEffect(()=>{xe()},[]),N.useEffect(()=>{Q.length>0&&r&&je()},[Q,r,oe]),N.useEffect(()=>($&&K&&(X.current&&clearTimeout(X.current),X.current=setTimeout(()=>{console.log(`Navigating to next playlist: ${K}`),e(`?keywords=${encodeURIComponent(K)}`),J(!1)},3e3)),()=>{X.current&&clearTimeout(X.current)}),[$,K,e]),N.useEffect(()=>{s.length>0&&(R(0),D(null),console.log("Video index changed to:",a))},[a]);const Le=()=>{if(!s.length)return 0;let fe=0;for(let be=0;be<a;be++){const{startSeconds:we,endSeconds:Ne}=ro(s[be].timestamp);fe+=Ne-we||300}return fe},te=fe=>{R(fe),x(Le()+fe)},ue=fe=>{console.log(`Seeking to ${fe}s within current video`),D(fe)},xe=async()=>{try{const fe={},be=await Bt(Ot(dt,"interviewSummaries"));for(const Ne of be.docs){const De=Ne.id,nt=Ot(dt,"interviewSummaries",De,"subSummaries");(await Bt(nt)).forEach(Gn=>{(Gn.data().keywords||"").split(",").map(fn=>fn.trim().toLowerCase()).forEach(fn=>{fn&&(fe[fn]=(fe[fn]||0)+1)})})}const we=Object.keys(fe).filter(Ne=>fe[Ne]>1);console.log(`Found ${we.length} keywords with multiple clips out of ${Object.keys(fe).length} total keywords`),Z(we),G(fe)}catch(fe){console.error("Error fetching available keywords:",fe)}},je=()=>{if(Q.length===0)return;const fe=Q.filter(Ne=>Ne!==r);if(fe.length===0)return;const be=Math.floor(Math.random()*fe.length),we=fe[be];console.log(`Selected next keyword: ${we} with ${oe[we]||"?"} clips`),re(we),$e(we)},$e=async fe=>{try{const be=Hd(fe);if(be.length===0)return;const we=await Xe(be);if(we.length>0){const Ne=we[0];if(Ne.videoEmbedLink){const De=ga(Ne.videoEmbedLink);if(De){const nt=`https://img.youtube.com/vi/${De}/mqdefault.jpg`;W(nt);return}}}W("")}catch(be){console.error("Error fetching thumbnail:",be),W("")}},tt=()=>{K&&e(`?keywords=${encodeURIComponent(K)}`)},M=()=>{F(!0)},j=()=>{F(!1),Ue()},U=()=>{F(!1)},q=fe=>{o(be=>{const we=[...be];return we[a]={...we[a],...fe},we})},ie=fe=>fe.sort(()=>Math.random()-.5),me=async fe=>new Promise(be=>{try{const we=document.createElement("div");we.style.position="absolute",we.style.left="-9999px",we.style.top="-9999px",document.body.appendChild(we);const Ne=new window.YT.Player(we,{height:"1",width:"1",videoId:fe,events:{onReady:De=>{try{const nt=De.target.getDuration();console.log(`Got duration for video ${fe}: ${nt}s`),be(nt)}catch(nt){console.error(`Error getting duration for ${fe}:`,nt),be(0)}finally{if(Ne)try{Ne.destroy()}catch(nt){console.error("Error destroying temp player:",nt)}we.parentNode&&document.body.removeChild(we)}},onError:()=>{console.error(`Could not load video ${fe} for duration check`),we.parentNode&&document.body.removeChild(we),be(0)}}});setTimeout(()=>{if(Ne)try{Ne.destroy()}catch(De){console.error("Error destroying temp player on timeout:",De)}we.parentNode&&document.body.removeChild(we),be(0)},1e4)}catch(we){console.error("Error in duration check:",we),be(0)}}),Pe=async fe=>{try{const be=ga(fe.videoEmbedLink);if(!be)return!1;const{startSeconds:we}=ro(fe.timestamp);if(isNaN(we)||we<0)return!1;if(!window.YT||!window.YT.Player)return console.warn("YouTube API not loaded yet, can't validate duration"),!0;const Ne=await me(be),De=Ne>0&&we<Ne-5;return De||console.warn(`Invalid timestamp detected: ${fe.timestamp} exceeds video duration ${Ne}s for video ID ${be}`),De}catch(be){return console.error("Error validating video timestamp:",be),!1}},Ue=async()=>{try{c(!0);const fe=Hd(r);if(fe.length===0){f("Please enter at least one keyword"),c(!1);return}let be=await Xe(fe);if(be.length>0){be=be.filter(De=>{try{const{startSeconds:nt,endSeconds:qt}=ro(De.timestamp);return isNaN(nt)||nt<0?(console.warn(`Filtering out video with invalid start time: ${De.id}, ${De.timestamp}`),!1):qt&&qt<=nt?(console.warn(`Filtering out video with invalid time range: ${De.id}, ${De.timestamp}`),!1):!0}catch{return console.warn(`Filtering out video with unparseable timestamp: ${De.id}, ${De.timestamp}`),!1}});const we=ie(be).slice(0,Math.min(10,be.length));console.log(`Checking durations for ${we.length} candidate videos...`),(!window.YT||!window.YT.Player)&&(console.log("Loading YouTube API..."),await new Promise(De=>{const nt=document.createElement("script");nt.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=()=>{console.log("YouTube API ready"),De()};const qt=document.getElementsByTagName("script")[0];qt.parentNode.insertBefore(nt,qt),setTimeout(De,5e3)}));const Ne=[];for(const De of we){if(Ne.length>=3)break;await Pe(De)&&Ne.push(De)}Ne.length>0?(console.log(`Selected ${Ne.length} valid videos from ${we.length} candidates`),o(Ne),l(0),g(!0),R(0),x(0),J(!1)):f("No videos with valid timestamps found for this keyword")}else f("No videos found for this keyword");c(!1)}catch(fe){console.error("Error searching videos:",fe),f("Error searching videos"),c(!1)}},Xe=async fe=>{const be=await Bt(Ot(dt,"interviewSummaries")),we=[];for(const Ne of be.docs){const De=Ne.id,nt=Ne.data(),qt=nt.videoEmbedLink,Gn=qt?`https://img.youtube.com/vi/${ga(qt)}/mqdefault.jpg`:null,kr=Ot(dt,"interviewSummaries",De,"subSummaries");(await Bt(kr)).forEach(fn=>{const hr=fn.data(),Et=(hr.keywords||"").split(",").map(Fi=>Fi.trim().toLowerCase());fe.some(Fi=>Et.includes(Fi))&&we.push({id:fn.id,documentName:De,...hr,...nt,thumbnailUrl:Gn})})}return we},it=()=>{a<s.length-1&&(l(a+1),g(!0))},Oe=()=>{a>0&&(l(a-1),g(!0))},pt=()=>{console.log(`Video end triggered for index ${a}/${s.length-1}`),setTimeout(()=>{a<s.length-1?(console.log(`Advancing to next video: ${a+1}`),l(a+1)):(console.log("Playlist ended, preparing to play next keyword"),J(!0))},500)},ur=()=>{g(!0)},Wr=()=>{g(!1)},Vi=()=>!s.length||a>=s.length?null:s[a];if(u)return m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(h)return m.jsx("div",{className:"max-w-7xl mx-auto p-4",children:m.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:m.jsx("p",{children:h})})});const Dt=Vi(),cr=s.length>0;return m.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[I&&m.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-3 rounded-md shadow-md transition-all duration-300 ${I.type==="success"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:m.jsxs("div",{className:"flex items-center",children:[I.type==="success"?m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2h-1V9z",clipRule:"evenodd"})}),m.jsx("span",{children:I.message})]})}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:r}),m.jsx("div",{className:"flex items-center space-x-4",children:m.jsxs("div",{className:"flex items-center",children:[m.jsxs("span",{className:"text-blue-800 font-medium",children:[A," total clip",A!==1?"s":""," available"]}),m.jsx("span",{className:"mx-2 text-gray-400",children:""}),m.jsxs("span",{className:"text-gray-600",children:[s.length," clip",s.length!==1?"s":""," in current playlist"]})]})})]}),m.jsxs("div",{className:"relative",children:[K&&m.jsx("div",{className:"absolute top-0 right-0 z-10",children:m.jsx(tz,{nextKeyword:K,thumbnailUrl:se,onPlay:tt})}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[m.jsx("div",{className:"w-full max-w-2xl mx-auto relative rounded-lg overflow-hidden",children:Dt?m.jsx(oz,{video:Dt,onVideoEnd:pt,onPlay:ur,onPause:Wr,onTimeUpdate:te,isPlaying:p,seekToTime:V}):m.jsx("div",{className:"flex items-center justify-center w-full h-64 bg-gray-200 rounded-lg text-gray-600 font-medium",children:"No videos available"})}),cr&&m.jsx("div",{className:"mt-6 mb-4 w-full max-w-2xl mx-auto",children:m.jsx(ez,{videoQueue:s,currentVideoIndex:a,setCurrentVideoIndex:l,currentTime:b,totalDuration:_,onSeek:ue})}),m.jsxs("div",{className:"w-full max-w-2xl mx-auto py-3 mt-5",children:[m.jsx("div",{className:"flex justify-center items-center mb-4",children:m.jsx(gA,{onPrevious:Oe,onPlay:ur,onPause:Wr,onNext:it,isPlaying:p,hasPrevious:a>0,hasNext:a<s.length-1})}),m.jsxs("div",{className:"flex justify-center items-center space-x-4",children:[m.jsx(nz,{onClick:M}),m.jsx("button",{onClick:Fe,disabled:y,className:`flex items-center justify-center ${y?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"} text-white px-4 py-2 rounded-md text-sm font-medium transition-colors w-44`,title:"Add all remaining clips with this keyword to your playlist",children:y?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding..."]}):"Listen to Full Playlist"})]})]})]}),Dt&&m.jsx(iz,{metadata:Dt,onMetadataUpdate:q}),Dt&&m.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:m.jsx("span",{onClick:()=>e(`/interview-player?documentName=${encodeURIComponent(Dt.documentName)}`),className:"hover:text-blue-600 hover:underline transition-colors cursor-pointer",children:Dt.name})}),m.jsx("p",{className:"text-sm italic text-gray-500 mb-4",children:Dt.role}),m.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 mb-4",children:m.jsx("p",{className:"m-0 text-base leading-relaxed text-gray-700",children:Dt.summary})}),Dt.keywords&&Dt.keywords.length>0&&m.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:(Array.isArray(Dt.keywords)?Dt.keywords:Dt.keywords.split(",").map(fe=>fe.trim())).map((fe,be)=>m.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs flex items-center gap-1 cursor-pointer hover:bg-blue-200 transition-colors",onClick:()=>e(`/playlist-builder?keywords=${encodeURIComponent(fe)}`),children:[m.jsx(x_,{size:12})," ",fe]},be))}),m.jsx("div",{className:"mt-4",children:m.jsx("button",{className:"text-sm text-blue-600 hover:underline hover:text-blue-800 transition-colors",onClick:()=>e(`/clip-player?documentName=${encodeURIComponent(Dt.documentName)}&clipId=${encodeURIComponent(Dt.id)}`),children:" View this clip as a standalone page"})})]})]}),r&&s.length>0&&m.jsx(sz,{currentKeyword:r,excludeIds:s.map(fe=>fe.id),onAddToPlaylist:ye}),m.jsx(rz,{isOpen:L,onConfirm:j,onCancel:U,message:"Are you sure you want to hear a new set of clips on this topic?"})]})};function bv(t,e){return bv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},bv(t,e)}function vA(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,bv(t,e)}function ke(){return ke=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ke.apply(null,arguments)}function ju(t){"@babel/helpers - typeof";return ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ju(t)}function lz(t,e){if(ju(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(ju(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uz(t){var e=lz(t,"string");return ju(e)=="symbol"?e:e+""}function cz(t,e,r){return(e=uz(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function IE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function kE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?IE(Object(r),!0).forEach(function(i){cz(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IE(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function jn(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var CE=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),AE=function(){return Math.random().toString(36).substring(7).split("").join(".")},PE={INIT:"@@redux/INIT"+AE(),REPLACE:"@@redux/REPLACE"+AE()};function dz(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function yA(t,e,r){var i;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(jn(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(jn(1));return r(yA)(t,e)}if(typeof t!="function")throw new Error(jn(2));var s=t,o=e,a=[],l=a,u=!1;function c(){l===a&&(l=a.slice())}function h(){if(u)throw new Error(jn(3));return o}function f(R){if(typeof R!="function")throw new Error(jn(4));if(u)throw new Error(jn(5));var P=!0;return c(),l.push(R),function(){if(P){if(u)throw new Error(jn(6));P=!1,c();var _=l.indexOf(R);l.splice(_,1),a=null}}}function p(R){if(!dz(R))throw new Error(jn(7));if(typeof R.type>"u")throw new Error(jn(8));if(u)throw new Error(jn(9));try{u=!0,o=s(o,R)}finally{u=!1}for(var P=a=l,x=0;x<P.length;x++){var _=P[x];_()}return R}function g(R){if(typeof R!="function")throw new Error(jn(10));s=R,p({type:PE.REPLACE})}function b(){var R,P=f;return R={subscribe:function(_){if(typeof _!="object"||_===null)throw new Error(jn(11));function T(){_.next&&_.next(h())}T();var L=P(T);return{unsubscribe:L}}},R[CE]=function(){return this},R}return p({type:PE.INIT}),i={dispatch:p,subscribe:f,getState:h,replaceReducer:g},i[CE]=b,i}function RE(t,e){return function(){return e(t.apply(this,arguments))}}function NE(t,e){if(typeof t=="function")return RE(t,e);if(typeof t!="object"||t===null)throw new Error(jn(16));var r={};for(var i in t){var s=t[i];typeof s=="function"&&(r[i]=RE(s,e))}return r}function _A(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(i){return i}:e.length===1?e[0]:e.reduce(function(i,s){return function(){return i(s.apply(void 0,arguments))}})}function hz(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(i){return function(){var s=i.apply(void 0,arguments),o=function(){throw new Error(jn(15))},a={getState:s.getState,dispatch:function(){return o.apply(void 0,arguments)}},l=e.map(function(u){return u(a)});return o=_A.apply(void 0,l)(s.dispatch),kE(kE({},s),{},{dispatch:o})}}}var wA=Be.createContext(null);function fz(t){t()}var bA=fz,pz=function(e){return bA=e},mz=function(){return bA};function gz(){var t=mz(),e=null,r=null;return{clear:function(){e=null,r=null},notify:function(){t(function(){for(var s=e;s;)s.callback(),s=s.next})},get:function(){for(var s=[],o=e;o;)s.push(o),o=o.next;return s},subscribe:function(s){var o=!0,a=r={callback:s,next:null,prev:r};return a.prev?a.prev.next=a:e=a,function(){!o||e===null||(o=!1,a.next?a.next.prev=a.prev:r=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var DE={notify:function(){},get:function(){return[]}};function xA(t,e){var r,i=DE;function s(f){return u(),i.subscribe(f)}function o(){i.notify()}function a(){h.onStateChange&&h.onStateChange()}function l(){return!!r}function u(){r||(r=e?e.addNestedSub(a):t.subscribe(a),i=gz())}function c(){r&&(r(),r=void 0,i.clear(),i=DE)}var h={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:a,isSubscribed:l,trySubscribe:u,tryUnsubscribe:c,getListeners:function(){return i}};return h}var EA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?N.useLayoutEffect:N.useEffect;function vz(t){var e=t.store,r=t.context,i=t.children,s=N.useMemo(function(){var l=xA(e);return{store:e,subscription:l}},[e]),o=N.useMemo(function(){return e.getState()},[e]);EA(function(){var l=s.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==e.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[s,o]);var a=r||wA;return Be.createElement(a.Provider,{value:s},i)}function Hh(t,e){if(t==null)return{};var r={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;r[i]=t[i]}return r}var TA={exports:{}},at={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var en=typeof Symbol=="function"&&Symbol.for,k_=en?Symbol.for("react.element"):60103,C_=en?Symbol.for("react.portal"):60106,Xf=en?Symbol.for("react.fragment"):60107,Qf=en?Symbol.for("react.strict_mode"):60108,Jf=en?Symbol.for("react.profiler"):60114,Zf=en?Symbol.for("react.provider"):60109,ep=en?Symbol.for("react.context"):60110,A_=en?Symbol.for("react.async_mode"):60111,tp=en?Symbol.for("react.concurrent_mode"):60111,np=en?Symbol.for("react.forward_ref"):60112,rp=en?Symbol.for("react.suspense"):60113,yz=en?Symbol.for("react.suspense_list"):60120,ip=en?Symbol.for("react.memo"):60115,sp=en?Symbol.for("react.lazy"):60116,_z=en?Symbol.for("react.block"):60121,wz=en?Symbol.for("react.fundamental"):60117,bz=en?Symbol.for("react.responder"):60118,xz=en?Symbol.for("react.scope"):60119;function lr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case k_:switch(t=t.type,t){case A_:case tp:case Xf:case Jf:case Qf:case rp:return t;default:switch(t=t&&t.$$typeof,t){case ep:case np:case sp:case ip:case Zf:return t;default:return e}}case C_:return e}}}function SA(t){return lr(t)===tp}at.AsyncMode=A_;at.ConcurrentMode=tp;at.ContextConsumer=ep;at.ContextProvider=Zf;at.Element=k_;at.ForwardRef=np;at.Fragment=Xf;at.Lazy=sp;at.Memo=ip;at.Portal=C_;at.Profiler=Jf;at.StrictMode=Qf;at.Suspense=rp;at.isAsyncMode=function(t){return SA(t)||lr(t)===A_};at.isConcurrentMode=SA;at.isContextConsumer=function(t){return lr(t)===ep};at.isContextProvider=function(t){return lr(t)===Zf};at.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===k_};at.isForwardRef=function(t){return lr(t)===np};at.isFragment=function(t){return lr(t)===Xf};at.isLazy=function(t){return lr(t)===sp};at.isMemo=function(t){return lr(t)===ip};at.isPortal=function(t){return lr(t)===C_};at.isProfiler=function(t){return lr(t)===Jf};at.isStrictMode=function(t){return lr(t)===Qf};at.isSuspense=function(t){return lr(t)===rp};at.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Xf||t===tp||t===Jf||t===Qf||t===rp||t===yz||typeof t=="object"&&t!==null&&(t.$$typeof===sp||t.$$typeof===ip||t.$$typeof===Zf||t.$$typeof===ep||t.$$typeof===np||t.$$typeof===wz||t.$$typeof===bz||t.$$typeof===xz||t.$$typeof===_z)};at.typeOf=lr;TA.exports=at;var Ez=TA.exports,P_=Ez,Tz={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Sz={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Iz={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},IA={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},R_={};R_[P_.ForwardRef]=Iz;R_[P_.Memo]=IA;function ME(t){return P_.isMemo(t)?IA:R_[t.$$typeof]||Tz}var kz=Object.defineProperty,Cz=Object.getOwnPropertyNames,LE=Object.getOwnPropertySymbols,Az=Object.getOwnPropertyDescriptor,Pz=Object.getPrototypeOf,OE=Object.prototype;function kA(t,e,r){if(typeof e!="string"){if(OE){var i=Pz(e);i&&i!==OE&&kA(t,i,r)}var s=Cz(e);LE&&(s=s.concat(LE(e)));for(var o=ME(t),a=ME(e),l=0;l<s.length;++l){var u=s[l];if(!Sz[u]&&!(r&&r[u])&&!(a&&a[u])&&!(o&&o[u])){var c=Az(e,u);try{kz(t,u,c)}catch{}}}}return t}var Rz=kA;const jE=Ua(Rz);var CA={exports:{}},ht={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var op=60103,ap=60106,dc=60107,hc=60108,fc=60114,pc=60109,mc=60110,gc=60112,vc=60113,N_=60120,yc=60115,_c=60116,AA=60121,PA=60122,RA=60117,NA=60129,DA=60131;if(typeof Symbol=="function"&&Symbol.for){var rn=Symbol.for;op=rn("react.element"),ap=rn("react.portal"),dc=rn("react.fragment"),hc=rn("react.strict_mode"),fc=rn("react.profiler"),pc=rn("react.provider"),mc=rn("react.context"),gc=rn("react.forward_ref"),vc=rn("react.suspense"),N_=rn("react.suspense_list"),yc=rn("react.memo"),_c=rn("react.lazy"),AA=rn("react.block"),PA=rn("react.server.block"),RA=rn("react.fundamental"),NA=rn("react.debug_trace_mode"),DA=rn("react.legacy_hidden")}function Hr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case op:switch(t=t.type,t){case dc:case fc:case hc:case vc:case N_:return t;default:switch(t=t&&t.$$typeof,t){case mc:case gc:case _c:case yc:case pc:return t;default:return e}}case ap:return e}}}var Nz=pc,Dz=op,Mz=gc,Lz=dc,Oz=_c,jz=yc,Vz=ap,Fz=fc,Uz=hc,Bz=vc;ht.ContextConsumer=mc;ht.ContextProvider=Nz;ht.Element=Dz;ht.ForwardRef=Mz;ht.Fragment=Lz;ht.Lazy=Oz;ht.Memo=jz;ht.Portal=Vz;ht.Profiler=Fz;ht.StrictMode=Uz;ht.Suspense=Bz;ht.isAsyncMode=function(){return!1};ht.isConcurrentMode=function(){return!1};ht.isContextConsumer=function(t){return Hr(t)===mc};ht.isContextProvider=function(t){return Hr(t)===pc};ht.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===op};ht.isForwardRef=function(t){return Hr(t)===gc};ht.isFragment=function(t){return Hr(t)===dc};ht.isLazy=function(t){return Hr(t)===_c};ht.isMemo=function(t){return Hr(t)===yc};ht.isPortal=function(t){return Hr(t)===ap};ht.isProfiler=function(t){return Hr(t)===fc};ht.isStrictMode=function(t){return Hr(t)===hc};ht.isSuspense=function(t){return Hr(t)===vc};ht.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===dc||t===fc||t===NA||t===hc||t===vc||t===N_||t===DA||typeof t=="object"&&t!==null&&(t.$$typeof===_c||t.$$typeof===yc||t.$$typeof===pc||t.$$typeof===mc||t.$$typeof===gc||t.$$typeof===RA||t.$$typeof===AA||t[0]===PA)};ht.typeOf=Hr;CA.exports=ht;var $z=CA.exports,zz=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Hz=["reactReduxForwardedRef"],Wz=[],qz=[null,null];function Gz(t,e){var r=t[1];return[e.payload,r+1]}function VE(t,e,r){EA(function(){return t.apply(void 0,e)},r)}function Kz(t,e,r,i,s,o,a){t.current=i,e.current=s,r.current=!1,o.current&&(o.current=null,a())}function Yz(t,e,r,i,s,o,a,l,u,c){if(t){var h=!1,f=null,p=function(){if(!h){var R=e.getState(),P,x;try{P=i(R,s.current)}catch(_){x=_,f=_}x||(f=null),P===o.current?a.current||u():(o.current=P,l.current=P,a.current=!0,c({type:"STORE_UPDATED",payload:{error:x}}))}};r.onStateChange=p,r.trySubscribe(),p();var g=function(){if(h=!0,r.tryUnsubscribe(),r.onStateChange=null,f)throw f};return g}}var Xz=function(){return[null,0]};function Qz(t,e){e===void 0&&(e={});var r=e,i=r.getDisplayName,s=i===void 0?function(T){return"ConnectAdvanced("+T+")"}:i,o=r.methodName,a=o===void 0?"connectAdvanced":o,l=r.renderCountProp,u=l===void 0?void 0:l,c=r.shouldHandleStateChanges,h=c===void 0?!0:c,f=r.storeKey,p=f===void 0?"store":f;r.withRef;var g=r.forwardRef,b=g===void 0?!1:g,R=r.context,P=R===void 0?wA:R,x=Hh(r,zz),_=P;return function(L){var F=L.displayName||L.name||"Component",V=s(F),D=ke({},x,{getDisplayName:s,methodName:a,renderCountProp:u,shouldHandleStateChanges:h,storeKey:p,displayName:V,wrappedComponentName:F,WrappedComponent:L}),I=x.pure;function E(z){return t(z.dispatch,D)}var w=I?N.useMemo:function(z){return z()};function y(z){var Q=N.useMemo(function(){var q=z.reactReduxForwardedRef,ie=Hh(z,Hz);return[z.context,q,ie]},[z]),Z=Q[0],oe=Q[1],G=Q[2],K=N.useMemo(function(){return Z&&Z.Consumer&&$z.isContextConsumer(Be.createElement(Z.Consumer,null))?Z:_},[Z,_]),re=N.useContext(K),se=!!z.store&&!!z.store.getState&&!!z.store.dispatch;re&&re.store;var W=se?z.store:re.store,$=N.useMemo(function(){return E(W)},[W]),J=N.useMemo(function(){if(!h)return qz;var q=xA(W,se?null:re.subscription),ie=q.notifyNestedSubs.bind(q);return[q,ie]},[W,se,re]),X=J[0],de=J[1],ye=N.useMemo(function(){return se?re:ke({},re,{subscription:X})},[se,re,X]),Fe=N.useReducer(Gz,Wz,Xz),Le=Fe[0],te=Le[0],ue=Fe[1];if(te&&te.error)throw te.error;var xe=N.useRef(),je=N.useRef(G),$e=N.useRef(),tt=N.useRef(!1),M=w(function(){return $e.current&&G===je.current?$e.current:$(W.getState(),G)},[W,te,G]);VE(Kz,[je,xe,tt,G,M,$e,de]),VE(Yz,[h,W,X,$,je,xe,tt,$e,de,ue],[W,X,$]);var j=N.useMemo(function(){return Be.createElement(L,ke({},M,{ref:oe}))},[oe,L,M]),U=N.useMemo(function(){return h?Be.createElement(K.Provider,{value:ye},j):j},[K,j,ye]);return U}var C=I?Be.memo(y):y;if(C.WrappedComponent=L,C.displayName=y.displayName=V,b){var A=Be.forwardRef(function(Q,Z){return Be.createElement(C,ke({},Q,{reactReduxForwardedRef:Z}))});return A.displayName=V,A.WrappedComponent=L,jE(A,L)}return jE(C,L)}}function FE(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function km(t,e){if(FE(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(e,r[s])||!FE(t[r[s]],e[r[s]]))return!1;return!0}function Jz(t,e){var r={},i=function(a){var l=t[a];typeof l=="function"&&(r[a]=function(){return e(l.apply(void 0,arguments))})};for(var s in t)i(s);return r}function D_(t){return function(r,i){var s=t(r,i);function o(){return s}return o.dependsOnOwnProps=!1,o}}function UE(t){return t.dependsOnOwnProps!==null&&t.dependsOnOwnProps!==void 0?!!t.dependsOnOwnProps:t.length!==1}function MA(t,e){return function(i,s){s.displayName;var o=function(l,u){return o.dependsOnOwnProps?o.mapToProps(l,u):o.mapToProps(l)};return o.dependsOnOwnProps=!0,o.mapToProps=function(l,u){o.mapToProps=t,o.dependsOnOwnProps=UE(t);var c=o(l,u);return typeof c=="function"&&(o.mapToProps=c,o.dependsOnOwnProps=UE(c),c=o(l,u)),c},o}}function Zz(t){return typeof t=="function"?MA(t):void 0}function e9(t){return t?void 0:D_(function(e){return{dispatch:e}})}function t9(t){return t&&typeof t=="object"?D_(function(e){return Jz(t,e)}):void 0}const n9=[Zz,e9,t9];function r9(t){return typeof t=="function"?MA(t):void 0}function i9(t){return t?void 0:D_(function(){return{}})}const s9=[r9,i9];function o9(t,e,r){return ke({},r,t,e)}function a9(t){return function(r,i){i.displayName;var s=i.pure,o=i.areMergedPropsEqual,a=!1,l;return function(c,h,f){var p=t(c,h,f);return a?(!s||!o(p,l))&&(l=p):(a=!0,l=p),l}}}function l9(t){return typeof t=="function"?a9(t):void 0}function u9(t){return t?void 0:function(){return o9}}const c9=[l9,u9];var d9=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function h9(t,e,r,i){return function(o,a){return r(t(o,a),e(i,a),a)}}function f9(t,e,r,i,s){var o=s.areStatesEqual,a=s.areOwnPropsEqual,l=s.areStatePropsEqual,u=!1,c,h,f,p,g;function b(T,L){return c=T,h=L,f=t(c,h),p=e(i,h),g=r(f,p,h),u=!0,g}function R(){return f=t(c,h),e.dependsOnOwnProps&&(p=e(i,h)),g=r(f,p,h),g}function P(){return t.dependsOnOwnProps&&(f=t(c,h)),e.dependsOnOwnProps&&(p=e(i,h)),g=r(f,p,h),g}function x(){var T=t(c,h),L=!l(T,f);return f=T,L&&(g=r(f,p,h)),g}function _(T,L){var F=!a(L,h),V=!o(T,c,L,h);return c=T,h=L,F&&V?R():F?P():V?x():g}return function(L,F){return u?_(L,F):b(L,F)}}function p9(t,e){var r=e.initMapStateToProps,i=e.initMapDispatchToProps,s=e.initMergeProps,o=Hh(e,d9),a=r(t,o),l=i(t,o),u=s(t,o),c=o.pure?f9:h9;return c(a,l,u,t,o)}var m9=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Cm(t,e,r){for(var i=e.length-1;i>=0;i--){var s=e[i](t);if(s)return s}return function(o,a){throw new Error("Invalid value of type "+typeof t+" for "+r+" argument when connecting component "+a.wrappedComponentName+".")}}function g9(t,e){return t===e}function v9(t){var e=t===void 0?{}:t,r=e.connectHOC,i=r===void 0?Qz:r,s=e.mapStateToPropsFactories,o=s===void 0?s9:s,a=e.mapDispatchToPropsFactories,l=a===void 0?n9:a,u=e.mergePropsFactories,c=u===void 0?c9:u,h=e.selectorFactory,f=h===void 0?p9:h;return function(g,b,R,P){P===void 0&&(P={});var x=P,_=x.pure,T=_===void 0?!0:_,L=x.areStatesEqual,F=L===void 0?g9:L,V=x.areOwnPropsEqual,D=V===void 0?km:V,I=x.areStatePropsEqual,E=I===void 0?km:I,w=x.areMergedPropsEqual,y=w===void 0?km:w,C=Hh(x,m9),A=Cm(g,o,"mapStateToProps"),z=Cm(b,l,"mapDispatchToProps"),Q=Cm(R,c,"mergeProps");return i(f,ke({methodName:"connect",getDisplayName:function(oe){return"Connect("+oe+")"},shouldHandleStateChanges:!!g,initMapStateToProps:A,initMapDispatchToProps:z,initMergeProps:Q,pure:T,areStatesEqual:F,areOwnPropsEqual:D,areStatePropsEqual:E,areMergedPropsEqual:y},C))}}const LA=v9();pz(xy.unstable_batchedUpdates);function y9(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function OA(t,e){var r=N.useState(function(){return{inputs:e,result:t()}})[0],i=N.useRef(!0),s=N.useRef(r),o=i.current||!!(e&&s.current.inputs&&y9(e,s.current.inputs)),a=o?s.current:{inputs:e,result:t()};return N.useEffect(function(){i.current=!1,s.current=a},[a]),a.result}function _9(t,e){return OA(function(){return t},e)}var Je=OA,Se=_9,w9="Invariant failed";function b9(t,e){throw new Error(w9)}var Vr=function(e){var r=e.top,i=e.right,s=e.bottom,o=e.left,a=i-o,l=s-r,u={top:r,right:i,bottom:s,left:o,width:a,height:l,x:o,y:r,center:{x:(i+o)/2,y:(s+r)/2}};return u},M_=function(e,r){return{top:e.top-r.top,left:e.left-r.left,bottom:e.bottom+r.bottom,right:e.right+r.right}},BE=function(e,r){return{top:e.top+r.top,left:e.left+r.left,bottom:e.bottom-r.bottom,right:e.right-r.right}},x9=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},Am={top:0,right:0,bottom:0,left:0},L_=function(e){var r=e.borderBox,i=e.margin,s=i===void 0?Am:i,o=e.border,a=o===void 0?Am:o,l=e.padding,u=l===void 0?Am:l,c=Vr(M_(r,s)),h=Vr(BE(r,a)),f=Vr(BE(h,u));return{marginBox:c,borderBox:Vr(r),paddingBox:h,contentBox:f,margin:s,border:a,padding:u}},pr=function(e){var r=e.slice(0,-2),i=e.slice(-2);if(i!=="px")return 0;var s=Number(r);return isNaN(s)&&b9(),s},E9=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Wh=function(e,r){var i=e.borderBox,s=e.border,o=e.margin,a=e.padding,l=x9(i,r);return L_({borderBox:l,border:s,margin:o,padding:a})},qh=function(e,r){return r===void 0&&(r=E9()),Wh(e,r)},jA=function(e,r){var i={top:pr(r.marginTop),right:pr(r.marginRight),bottom:pr(r.marginBottom),left:pr(r.marginLeft)},s={top:pr(r.paddingTop),right:pr(r.paddingRight),bottom:pr(r.paddingBottom),left:pr(r.paddingLeft)},o={top:pr(r.borderTopWidth),right:pr(r.borderRightWidth),bottom:pr(r.borderBottomWidth),left:pr(r.borderLeftWidth)};return L_({borderBox:e,margin:i,padding:s,border:o})},VA=function(e){var r=e.getBoundingClientRect(),i=window.getComputedStyle(e);return jA(r,i)},$E=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function T9(t,e){return!!(t===e||$E(t)&&$E(e))}function S9(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!T9(t[r],e[r]))return!1;return!0}function Jt(t,e){e===void 0&&(e=S9);var r,i=[],s,o=!1;function a(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return o&&r===this&&e(l,i)||(s=t.apply(this,l),o=!0,r=this,i=l),s}return a}var Vu=function(e){var r=[],i=null,s=function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];r=l,!i&&(i=requestAnimationFrame(function(){i=null,e.apply(void 0,r)}))};return s.cancel=function(){i&&(cancelAnimationFrame(i),i=null)},s};function FA(t,e){}FA.bind(null,"warn");FA.bind(null,"error");function ws(){}function I9(t,e){return ke({},t,{},e)}function _r(t,e,r){var i=e.map(function(s){var o=I9(r,s.options);return t.addEventListener(s.eventName,s.fn,o),function(){t.removeEventListener(s.eventName,s.fn,o)}});return function(){i.forEach(function(o){o()})}}var k9="Invariant failed";function Gh(t){this.message=t}Gh.prototype.toString=function(){return this.message};function ce(t,e){throw new Gh(k9)}var C9=function(t){vA(e,t);function e(){for(var i,s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return i=t.call.apply(t,[this].concat(o))||this,i.callbacks=null,i.unbind=ws,i.onWindowError=function(l){var u=i.getCallbacks();u.isDragging()&&u.tryAbort();var c=l.error;c instanceof Gh&&l.preventDefault()},i.getCallbacks=function(){if(!i.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return i.callbacks},i.setCallbacks=function(l){i.callbacks=l},i}var r=e.prototype;return r.componentDidMount=function(){this.unbind=_r(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(s){if(s instanceof Gh){this.setState({});return}throw s},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},e}(Be.Component),A9=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Kh=function(e){return e+1},P9=function(e){return`
  You have lifted an item in position `+Kh(e.source.index)+`
`},UA=function(e,r){var i=e.droppableId===r.droppableId,s=Kh(e.index),o=Kh(r.index);return i?`
      You have moved the item from position `+s+`
      to position `+o+`
    `:`
    You have moved the item from position `+s+`
    in list `+e.droppableId+`
    to list `+r.droppableId+`
    in position `+o+`
  `},BA=function(e,r,i){var s=r.droppableId===i.droppableId;return s?`
      The item `+e+`
      has been combined with `+i.draggableId:`
      The item `+e+`
      in list `+r.droppableId+`
      has been combined with `+i.draggableId+`
      in list `+i.droppableId+`
    `},R9=function(e){var r=e.destination;if(r)return UA(e.source,r);var i=e.combine;return i?BA(e.draggableId,e.source,i):"You are over an area that cannot be dropped on"},zE=function(e){return`
  The item has returned to its starting position
  of `+Kh(e.index)+`
`},N9=function(e){if(e.reason==="CANCEL")return`
      Movement cancelled.
      `+zE(e.source)+`
    `;var r=e.destination,i=e.combine;return r?`
      You have dropped the item.
      `+UA(e.source,r)+`
    `:i?`
      You have dropped the item.
      `+BA(e.draggableId,e.source,i)+`
    `:`
    The item has been dropped while not over a drop area.
    `+zE(e.source)+`
  `},Wd={dragHandleUsageInstructions:A9,onDragStart:P9,onDragUpdate:R9,onDragEnd:N9},Zt={x:0,y:0},ln=function(e,r){return{x:e.x+r.x,y:e.y+r.y}},Jn=function(e,r){return{x:e.x-r.x,y:e.y-r.y}},bs=function(e,r){return e.x===r.x&&e.y===r.y},tl=function(e){return{x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}},yo=function(e,r,i){var s;return i===void 0&&(i=0),s={},s[e]=r,s[e==="x"?"y":"x"]=i,s},Fu=function(e,r){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))},HE=function(e,r){return Math.min.apply(Math,r.map(function(i){return Fu(e,i)}))},$A=function(e){return function(r){return{x:e(r.x),y:e(r.y)}}},D9=function(t,e){var r=Vr({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return r.width<=0||r.height<=0?null:r},wc=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},WE=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},M9={top:0,right:0,bottom:0,left:0},L9=function(e,r){return r?wc(e,r.scroll.diff.displacement):e},O9=function(e,r,i){if(i&&i.increasedBy){var s;return ke({},e,(s={},s[r.end]=e[r.end]+i.increasedBy[r.line],s))}return e},j9=function(e,r){return r&&r.shouldClipSubject?D9(r.pageMarginBox,e):Vr(e)},ja=function(t){var e=t.page,r=t.withPlaceholder,i=t.axis,s=t.frame,o=L9(e.marginBox,s),a=O9(o,i,r),l=j9(a,s);return{page:e,withPlaceholder:r,active:l}},O_=function(t,e){t.frame||ce();var r=t.frame,i=Jn(e,r.scroll.initial),s=tl(i),o=ke({},r,{scroll:{initial:r.scroll.initial,current:e,diff:{value:i,displacement:s},max:r.scroll.max}}),a=ja({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:o}),l=ke({},t,{frame:o,subject:a});return l};function Yh(t){return Object.values?Object.values(t):Object.keys(t).map(function(e){return t[e]})}function j_(t,e){if(t.findIndex)return t.findIndex(e);for(var r=0;r<t.length;r++)if(e(t[r]))return r;return-1}function Us(t,e){if(t.find)return t.find(e);var r=j_(t,e);if(r!==-1)return t[r]}function zA(t){return Array.prototype.slice.call(t)}var HA=Jt(function(t){return t.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),WA=Jt(function(t){return t.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),lp=Jt(function(t){return Yh(t)}),V9=Jt(function(t){return Yh(t)}),nl=Jt(function(t,e){var r=V9(e).filter(function(i){return t===i.descriptor.droppableId}).sort(function(i,s){return i.descriptor.index-s.descriptor.index});return r});function V_(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function up(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var cp=Jt(function(t,e){return e.filter(function(r){return r.descriptor.id!==t.descriptor.id})}),F9=function(t){var e=t.isMovingForward,r=t.draggable,i=t.destination,s=t.insideDestination,o=t.previousImpact;if(!i.isCombineEnabled)return null;var a=V_(o);if(!a)return null;function l(R){var P={type:"COMBINE",combine:{draggableId:R,droppableId:i.descriptor.id}};return ke({},o,{at:P})}var u=o.displaced.all,c=u.length?u[0]:null;if(e)return c?l(c):null;var h=cp(r,s);if(!c){if(!h.length)return null;var f=h[h.length-1];return l(f.descriptor.id)}var p=j_(h,function(R){return R.descriptor.id===c});p===-1&&ce();var g=p-1;if(g<0)return null;var b=h[g];return l(b.descriptor.id)},rl=function(t,e){return t.descriptor.droppableId===e.descriptor.id},qA={point:Zt,value:0},Uu={invisible:{},visible:{},all:[]},U9={displaced:Uu,displacedBy:qA,at:null},xr=function(t,e){return function(r){return t<=r&&r<=e}},GA=function(t){var e=xr(t.top,t.bottom),r=xr(t.left,t.right);return function(i){var s=e(i.top)&&e(i.bottom)&&r(i.left)&&r(i.right);if(s)return!0;var o=e(i.top)||e(i.bottom),a=r(i.left)||r(i.right),l=o&&a;if(l)return!0;var u=i.top<t.top&&i.bottom>t.bottom,c=i.left<t.left&&i.right>t.right,h=u&&c;if(h)return!0;var f=u&&a||c&&o;return f}},B9=function(t){var e=xr(t.top,t.bottom),r=xr(t.left,t.right);return function(i){var s=e(i.top)&&e(i.bottom)&&r(i.left)&&r(i.right);return s}},F_={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},KA={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},$9=function(t){return function(e){var r=xr(e.top,e.bottom),i=xr(e.left,e.right);return function(s){return t===F_?r(s.top)&&r(s.bottom):i(s.left)&&i(s.right)}}},z9=function(e,r){var i=r.frame?r.frame.scroll.diff.displacement:Zt;return wc(e,i)},H9=function(e,r,i){return r.subject.active?i(r.subject.active)(e):!1},W9=function(e,r,i){return i(r)(e)},U_=function(e){var r=e.target,i=e.destination,s=e.viewport,o=e.withDroppableDisplacement,a=e.isVisibleThroughFrameFn,l=o?z9(r,i):r;return H9(l,i,a)&&W9(l,s,a)},q9=function(e){return U_(ke({},e,{isVisibleThroughFrameFn:GA}))},YA=function(e){return U_(ke({},e,{isVisibleThroughFrameFn:B9}))},G9=function(e){return U_(ke({},e,{isVisibleThroughFrameFn:$9(e.destination.axis)}))},K9=function(e,r,i){if(typeof i=="boolean")return i;if(!r)return!0;var s=r.invisible,o=r.visible;if(s[e])return!1;var a=o[e];return a?a.shouldAnimate:!0};function Y9(t,e){var r=t.page.marginBox,i={top:e.point.y,right:0,bottom:0,left:e.point.x};return Vr(M_(r,i))}function Bu(t){var e=t.afterDragging,r=t.destination,i=t.displacedBy,s=t.viewport,o=t.forceShouldAnimate,a=t.last;return e.reduce(function(u,c){var h=Y9(c,i),f=c.descriptor.id;u.all.push(f);var p=q9({target:h,destination:r,viewport:s,withDroppableDisplacement:!0});if(!p)return u.invisible[c.descriptor.id]=!0,u;var g=K9(f,a,o),b={draggableId:f,shouldAnimate:g};return u.visible[f]=b,u},{all:[],visible:{},invisible:{}})}function X9(t,e){if(!t.length)return 0;var r=t[t.length-1].descriptor.index;return e.inHomeList?r:r+1}function qE(t){var e=t.insideDestination,r=t.inHomeList,i=t.displacedBy,s=t.destination,o=X9(e,{inHomeList:r});return{displaced:Uu,displacedBy:i,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:o}}}}function Xh(t){var e=t.draggable,r=t.insideDestination,i=t.destination,s=t.viewport,o=t.displacedBy,a=t.last,l=t.index,u=t.forceShouldAnimate,c=rl(e,i);if(l==null)return qE({insideDestination:r,inHomeList:c,displacedBy:o,destination:i});var h=Us(r,function(R){return R.descriptor.index===l});if(!h)return qE({insideDestination:r,inHomeList:c,displacedBy:o,destination:i});var f=cp(e,r),p=r.indexOf(h),g=f.slice(p),b=Bu({afterDragging:g,destination:i,displacedBy:o,last:a,viewport:s.frame,forceShouldAnimate:u});return{displaced:b,displacedBy:o,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:l}}}}function Ds(t,e){return!!e.effected[t]}var Q9=function(t){var e=t.isMovingForward,r=t.destination,i=t.draggables,s=t.combine,o=t.afterCritical;if(!r.isCombineEnabled)return null;var a=s.draggableId,l=i[a],u=l.descriptor.index,c=Ds(a,o);return c?e?u:u-1:e?u+1:u},J9=function(t){var e=t.isMovingForward,r=t.isInHomeList,i=t.insideDestination,s=t.location;if(!i.length)return null;var o=s.index,a=e?o+1:o-1,l=i[0].descriptor.index,u=i[i.length-1].descriptor.index,c=r?u:u+1;return a<l||a>c?null:a},Z9=function(t){var e=t.isMovingForward,r=t.isInHomeList,i=t.draggable,s=t.draggables,o=t.destination,a=t.insideDestination,l=t.previousImpact,u=t.viewport,c=t.afterCritical,h=l.at;if(h||ce(),h.type==="REORDER"){var f=J9({isMovingForward:e,isInHomeList:r,location:h.destination,insideDestination:a});return f==null?null:Xh({draggable:i,insideDestination:a,destination:o,viewport:u,last:l.displaced,displacedBy:l.displacedBy,index:f})}var p=Q9({isMovingForward:e,destination:o,displaced:l.displaced,draggables:s,combine:h.combine,afterCritical:c});return p==null?null:Xh({draggable:i,insideDestination:a,destination:o,viewport:u,last:l.displaced,displacedBy:l.displacedBy,index:p})},eH=function(t){var e=t.displaced,r=t.afterCritical,i=t.combineWith,s=t.displacedBy,o=!!(e.visible[i]||e.invisible[i]);return Ds(i,r)?o?Zt:tl(s.point):o?s.point:Zt},tH=function(t){var e=t.afterCritical,r=t.impact,i=t.draggables,s=up(r);s||ce();var o=s.draggableId,a=i[o].page.borderBox.center,l=eH({displaced:r.displaced,afterCritical:e,combineWith:o,displacedBy:r.displacedBy});return ln(a,l)},XA=function(e,r){return r.margin[e.start]+r.borderBox[e.size]/2},nH=function(e,r){return r.margin[e.end]+r.borderBox[e.size]/2},B_=function(e,r,i){return r[e.crossAxisStart]+i.margin[e.crossAxisStart]+i.borderBox[e.crossAxisSize]/2},GE=function(e){var r=e.axis,i=e.moveRelativeTo,s=e.isMoving;return yo(r.line,i.marginBox[r.end]+XA(r,s),B_(r,i.marginBox,s))},KE=function(e){var r=e.axis,i=e.moveRelativeTo,s=e.isMoving;return yo(r.line,i.marginBox[r.start]-nH(r,s),B_(r,i.marginBox,s))},rH=function(e){var r=e.axis,i=e.moveInto,s=e.isMoving;return yo(r.line,i.contentBox[r.start]+XA(r,s),B_(r,i.contentBox,s))},iH=function(t){var e=t.impact,r=t.draggable,i=t.draggables,s=t.droppable,o=t.afterCritical,a=nl(s.descriptor.id,i),l=r.page,u=s.axis;if(!a.length)return rH({axis:u,moveInto:s.page,isMoving:l});var c=e.displaced,h=e.displacedBy,f=c.all[0];if(f){var p=i[f];if(Ds(f,o))return KE({axis:u,moveRelativeTo:p.page,isMoving:l});var g=Wh(p.page,h.point);return KE({axis:u,moveRelativeTo:g,isMoving:l})}var b=a[a.length-1];if(b.descriptor.id===r.descriptor.id)return l.borderBox.center;if(Ds(b.descriptor.id,o)){var R=Wh(b.page,tl(o.displacedBy.point));return GE({axis:u,moveRelativeTo:R,isMoving:l})}return GE({axis:u,moveRelativeTo:b.page,isMoving:l})},xv=function(t,e){var r=t.frame;return r?ln(e,r.scroll.diff.displacement):e},sH=function(e){var r=e.impact,i=e.draggable,s=e.droppable,o=e.draggables,a=e.afterCritical,l=i.page.borderBox.center,u=r.at;return!s||!u?l:u.type==="REORDER"?iH({impact:r,draggable:i,draggables:o,droppable:s,afterCritical:a}):tH({impact:r,draggables:o,afterCritical:a})},dp=function(t){var e=sH(t),r=t.droppable,i=r?xv(r,e):e;return i},QA=function(t,e){var r=Jn(e,t.scroll.initial),i=tl(r),s=Vr({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),o={frame:s,scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:r,displacement:i}}};return o};function YE(t,e){return t.map(function(r){return e[r]})}function oH(t,e){for(var r=0;r<e.length;r++){var i=e[r].visible[t];if(i)return i}return null}var aH=function(t){var e=t.impact,r=t.viewport,i=t.destination,s=t.draggables,o=t.maxScrollChange,a=QA(r,ln(r.scroll.current,o)),l=i.frame?O_(i,ln(i.frame.scroll.current,o)):i,u=e.displaced,c=Bu({afterDragging:YE(u.all,s),destination:i,displacedBy:e.displacedBy,viewport:a.frame,last:u,forceShouldAnimate:!1}),h=Bu({afterDragging:YE(u.all,s),destination:l,displacedBy:e.displacedBy,viewport:r.frame,last:u,forceShouldAnimate:!1}),f={},p={},g=[u,c,h];u.all.forEach(function(R){var P=oH(R,g);if(P){p[R]=P;return}f[R]=!0});var b=ke({},e,{displaced:{all:u.all,invisible:f,visible:p}});return b},lH=function(t,e){return ln(t.scroll.diff.displacement,e)},$_=function(t){var e=t.pageBorderBoxCenter,r=t.draggable,i=t.viewport,s=lH(i,e),o=Jn(s,r.page.borderBox.center);return ln(r.client.borderBox.center,o)},JA=function(t){var e=t.draggable,r=t.destination,i=t.newPageBorderBoxCenter,s=t.viewport,o=t.withDroppableDisplacement,a=t.onlyOnMainAxis,l=a===void 0?!1:a,u=Jn(i,e.page.borderBox.center),c=wc(e.page.borderBox,u),h={target:c,destination:r,withDroppableDisplacement:o,viewport:s};return l?G9(h):YA(h)},uH=function(t){var e=t.isMovingForward,r=t.draggable,i=t.destination,s=t.draggables,o=t.previousImpact,a=t.viewport,l=t.previousPageBorderBoxCenter,u=t.previousClientSelection,c=t.afterCritical;if(!i.isEnabled)return null;var h=nl(i.descriptor.id,s),f=rl(r,i),p=F9({isMovingForward:e,draggable:r,destination:i,insideDestination:h,previousImpact:o})||Z9({isMovingForward:e,isInHomeList:f,draggable:r,draggables:s,destination:i,insideDestination:h,previousImpact:o,viewport:a,afterCritical:c});if(!p)return null;var g=dp({impact:p,draggable:r,droppable:i,draggables:s,afterCritical:c}),b=JA({draggable:r,destination:i,newPageBorderBoxCenter:g,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(b){var R=$_({pageBorderBoxCenter:g,draggable:r,viewport:a});return{clientSelection:R,impact:p,scrollJumpRequest:null}}var P=Jn(g,l),x=aH({impact:p,viewport:a,destination:i,draggables:s,maxScrollChange:P});return{clientSelection:u,impact:x,scrollJumpRequest:P}},In=function(e){var r=e.subject.active;return r||ce(),r},cH=function(t){var e=t.isMovingForward,r=t.pageBorderBoxCenter,i=t.source,s=t.droppables,o=t.viewport,a=i.subject.active;if(!a)return null;var l=i.axis,u=xr(a[l.start],a[l.end]),c=lp(s).filter(function(f){return f!==i}).filter(function(f){return f.isEnabled}).filter(function(f){return!!f.subject.active}).filter(function(f){return GA(o.frame)(In(f))}).filter(function(f){var p=In(f);return e?a[l.crossAxisEnd]<p[l.crossAxisEnd]:p[l.crossAxisStart]<a[l.crossAxisStart]}).filter(function(f){var p=In(f),g=xr(p[l.start],p[l.end]);return u(p[l.start])||u(p[l.end])||g(a[l.start])||g(a[l.end])}).sort(function(f,p){var g=In(f)[l.crossAxisStart],b=In(p)[l.crossAxisStart];return e?g-b:b-g}).filter(function(f,p,g){return In(f)[l.crossAxisStart]===In(g[0])[l.crossAxisStart]});if(!c.length)return null;if(c.length===1)return c[0];var h=c.filter(function(f){var p=xr(In(f)[l.start],In(f)[l.end]);return p(r[l.line])});return h.length===1?h[0]:h.length>1?h.sort(function(f,p){return In(f)[l.start]-In(p)[l.start]})[0]:c.sort(function(f,p){var g=HE(r,WE(In(f))),b=HE(r,WE(In(p)));return g!==b?g-b:In(f)[l.start]-In(p)[l.start]})[0]},XE=function(e,r){var i=e.page.borderBox.center;return Ds(e.descriptor.id,r)?Jn(i,r.displacedBy.point):i},dH=function(e,r){var i=e.page.borderBox;return Ds(e.descriptor.id,r)?wc(i,tl(r.displacedBy.point)):i},hH=function(t){var e=t.pageBorderBoxCenter,r=t.viewport,i=t.destination,s=t.insideDestination,o=t.afterCritical,a=s.filter(function(l){return YA({target:dH(l,o),destination:i,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(l,u){var c=Fu(e,xv(i,XE(l,o))),h=Fu(e,xv(i,XE(u,o)));return c<h?-1:h<c?1:l.descriptor.index-u.descriptor.index});return a[0]||null},bc=Jt(function(e,r){var i=r[e.line];return{value:i,point:yo(e.line,i)}}),fH=function(e,r,i){var s=e.axis;if(e.descriptor.mode==="virtual")return yo(s.line,r[s.line]);var o=e.subject.page.contentBox[s.size],a=nl(e.descriptor.id,i),l=a.reduce(function(h,f){return h+f.client.marginBox[s.size]},0),u=l+r[s.line],c=u-o;return c<=0?null:yo(s.line,c)},ZA=function(e,r){return ke({},e,{scroll:ke({},e.scroll,{max:r})})},eP=function(e,r,i){var s=e.frame;rl(r,e)&&ce(),e.subject.withPlaceholder&&ce();var o=bc(e.axis,r.displaceBy).point,a=fH(e,o,i),l={placeholderSize:o,increasedBy:a,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){var u=ja({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:e.frame});return ke({},e,{subject:u})}var c=a?ln(s.scroll.max,a):s.scroll.max,h=ZA(s,c),f=ja({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:h});return ke({},e,{subject:f,frame:h})},pH=function(e){var r=e.subject.withPlaceholder;r||ce();var i=e.frame;if(!i){var s=ja({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return ke({},e,{subject:s})}var o=r.oldFrameMaxScroll;o||ce();var a=ZA(i,o),l=ja({page:e.subject.page,axis:e.axis,frame:a,withPlaceholder:null});return ke({},e,{subject:l,frame:a})},mH=function(t){var e=t.previousPageBorderBoxCenter,r=t.moveRelativeTo,i=t.insideDestination,s=t.draggable,o=t.draggables,a=t.destination,l=t.viewport,u=t.afterCritical;if(!r){if(i.length)return null;var c={displaced:Uu,displacedBy:qA,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},h=dp({impact:c,draggable:s,droppable:a,draggables:o,afterCritical:u}),f=rl(s,a)?a:eP(a,s,o),p=JA({draggable:s,destination:f,newPageBorderBoxCenter:h,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return p?c:null}var g=e[a.axis.line]<=r.page.borderBox.center[a.axis.line],b=function(){var P=r.descriptor.index;return r.descriptor.id===s.descriptor.id||g?P:P+1}(),R=bc(a.axis,s.displaceBy);return Xh({draggable:s,insideDestination:i,destination:a,viewport:l,displacedBy:R,last:Uu,index:b})},gH=function(t){var e=t.isMovingForward,r=t.previousPageBorderBoxCenter,i=t.draggable,s=t.isOver,o=t.draggables,a=t.droppables,l=t.viewport,u=t.afterCritical,c=cH({isMovingForward:e,pageBorderBoxCenter:r,source:s,droppables:a,viewport:l});if(!c)return null;var h=nl(c.descriptor.id,o),f=hH({pageBorderBoxCenter:r,viewport:l,destination:c,insideDestination:h,afterCritical:u}),p=mH({previousPageBorderBoxCenter:r,destination:c,draggable:i,draggables:o,moveRelativeTo:f,insideDestination:h,viewport:l,afterCritical:u});if(!p)return null;var g=dp({impact:p,draggable:i,droppable:c,draggables:o,afterCritical:u}),b=$_({pageBorderBoxCenter:g,draggable:i,viewport:l});return{clientSelection:b,impact:p,scrollJumpRequest:null}},tr=function(t){var e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null},vH=function(e,r){var i=tr(e);return i?r[i]:null},yH=function(t){var e=t.state,r=t.type,i=vH(e.impact,e.dimensions.droppables),s=!!i,o=e.dimensions.droppables[e.critical.droppable.id],a=i||o,l=a.axis.direction,u=l==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||l==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(u&&!s)return null;var c=r==="MOVE_DOWN"||r==="MOVE_RIGHT",h=e.dimensions.draggables[e.critical.draggable.id],f=e.current.page.borderBoxCenter,p=e.dimensions,g=p.draggables,b=p.droppables;return u?uH({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:h,destination:a,draggables:g,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):gH({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:h,isOver:a,draggables:g,droppables:b,viewport:e.viewport,afterCritical:e.afterCritical})};function Qs(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function tP(t){var e=xr(t.top,t.bottom),r=xr(t.left,t.right);return function(s){return e(s.y)&&r(s.x)}}function _H(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function wH(t){var e=t.pageBorderBox,r=t.draggable,i=t.candidates,s=r.page.borderBox.center,o=i.map(function(a){var l=a.axis,u=yo(a.axis.line,e.center[l.line],a.page.borderBox.center[l.crossAxisLine]);return{id:a.descriptor.id,distance:Fu(s,u)}}).sort(function(a,l){return l.distance-a.distance});return o[0]?o[0].id:null}function bH(t){var e=t.pageBorderBox,r=t.draggable,i=t.droppables,s=lp(i).filter(function(o){if(!o.isEnabled)return!1;var a=o.subject.active;if(!a||!_H(e,a))return!1;if(tP(a)(e.center))return!0;var l=o.axis,u=a.center[l.crossAxisLine],c=e[l.crossAxisStart],h=e[l.crossAxisEnd],f=xr(a[l.crossAxisStart],a[l.crossAxisEnd]),p=f(c),g=f(h);return!p&&!g?!0:p?c<u:h>u});return s.length?s.length===1?s[0].descriptor.id:wH({pageBorderBox:e,draggable:r,candidates:s}):null}var nP=function(e,r){return Vr(wc(e,r))},xH=function(t,e){var r=t.frame;return r?nP(e,r.scroll.diff.value):e};function rP(t){var e=t.displaced,r=t.id;return!!(e.visible[r]||e.invisible[r])}function EH(t){var e=t.draggable,r=t.closest,i=t.inHomeList;return r?i&&r.descriptor.index>e.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var TH=function(t){var e=t.pageBorderBoxWithDroppableScroll,r=t.draggable,i=t.destination,s=t.insideDestination,o=t.last,a=t.viewport,l=t.afterCritical,u=i.axis,c=bc(i.axis,r.displaceBy),h=c.value,f=e[u.start],p=e[u.end],g=cp(r,s),b=Us(g,function(P){var x=P.descriptor.id,_=P.page.borderBox.center[u.line],T=Ds(x,l),L=rP({displaced:o,id:x});return T?L?p<=_:f<_-h:L?p<=_+h:f<_}),R=EH({draggable:r,closest:b,inHomeList:rl(r,i)});return Xh({draggable:r,insideDestination:s,destination:i,viewport:a,last:o,displacedBy:c,index:R})},SH=4,IH=function(t){var e=t.draggable,r=t.pageBorderBoxWithDroppableScroll,i=t.previousImpact,s=t.destination,o=t.insideDestination,a=t.afterCritical;if(!s.isCombineEnabled)return null;var l=s.axis,u=bc(s.axis,e.displaceBy),c=u.value,h=r[l.start],f=r[l.end],p=cp(e,o),g=Us(p,function(R){var P=R.descriptor.id,x=R.page.borderBox,_=x[l.size],T=_/SH,L=Ds(P,a),F=rP({displaced:i.displaced,id:P});return L?F?f>x[l.start]+T&&f<x[l.end]-T:h>x[l.start]-c+T&&h<x[l.end]-c-T:F?f>x[l.start]+c+T&&f<x[l.end]+c-T:h>x[l.start]+T&&h<x[l.end]-T});if(!g)return null;var b={displacedBy:u,displaced:i.displaced,at:{type:"COMBINE",combine:{draggableId:g.descriptor.id,droppableId:s.descriptor.id}}};return b},iP=function(t){var e=t.pageOffset,r=t.draggable,i=t.draggables,s=t.droppables,o=t.previousImpact,a=t.viewport,l=t.afterCritical,u=nP(r.page.borderBox,e),c=bH({pageBorderBox:u,draggable:r,droppables:s});if(!c)return U9;var h=s[c],f=nl(h.descriptor.id,i),p=xH(h,u);return IH({pageBorderBoxWithDroppableScroll:p,draggable:r,previousImpact:o,destination:h,insideDestination:f,afterCritical:l})||TH({pageBorderBoxWithDroppableScroll:p,draggable:r,destination:h,insideDestination:f,last:o.displaced,viewport:a,afterCritical:l})},z_=function(t,e){var r;return ke({},t,(r={},r[e.descriptor.id]=e,r))},kH=function(e){var r=e.previousImpact,i=e.impact,s=e.droppables,o=tr(r),a=tr(i);if(!o||o===a)return s;var l=s[o];if(!l.subject.withPlaceholder)return s;var u=pH(l);return z_(s,u)},CH=function(t){var e=t.draggable,r=t.draggables,i=t.droppables,s=t.previousImpact,o=t.impact,a=kH({previousImpact:s,impact:o,droppables:i}),l=tr(o);if(!l)return a;var u=i[l];if(rl(e,u)||u.subject.withPlaceholder)return a;var c=eP(u,e,r);return z_(a,c)},ou=function(t){var e=t.state,r=t.clientSelection,i=t.dimensions,s=t.viewport,o=t.impact,a=t.scrollJumpRequest,l=s||e.viewport,u=i||e.dimensions,c=r||e.current.client.selection,h=Jn(c,e.initial.client.selection),f={offset:h,selection:c,borderBoxCenter:ln(e.initial.client.borderBoxCenter,h)},p={selection:ln(f.selection,l.scroll.current),borderBoxCenter:ln(f.borderBoxCenter,l.scroll.current),offset:ln(f.offset,l.scroll.diff.value)},g={client:f,page:p};if(e.phase==="COLLECTING")return ke({phase:"COLLECTING"},e,{dimensions:u,viewport:l,current:g});var b=u.draggables[e.critical.draggable.id],R=o||iP({pageOffset:p.offset,draggable:b,draggables:u.draggables,droppables:u.droppables,previousImpact:e.impact,viewport:l,afterCritical:e.afterCritical}),P=CH({draggable:b,impact:R,previousImpact:e.impact,draggables:u.draggables,droppables:u.droppables}),x=ke({},e,{current:g,dimensions:{draggables:u.draggables,droppables:P},impact:R,viewport:l,scrollJumpRequest:a||null,forceShouldAnimate:a?!1:null});return x};function AH(t,e){return t.map(function(r){return e[r]})}var sP=function(t){var e=t.impact,r=t.viewport,i=t.draggables,s=t.destination,o=t.forceShouldAnimate,a=e.displaced,l=AH(a.all,i),u=Bu({afterDragging:l,destination:s,displacedBy:e.displacedBy,viewport:r.frame,forceShouldAnimate:o,last:a});return ke({},e,{displaced:u})},oP=function(t){var e=t.impact,r=t.draggable,i=t.droppable,s=t.draggables,o=t.viewport,a=t.afterCritical,l=dp({impact:e,draggable:r,draggables:s,droppable:i,afterCritical:a});return $_({pageBorderBoxCenter:l,draggable:r,viewport:o})},aP=function(t){var e=t.state,r=t.dimensions,i=t.viewport;e.movementMode!=="SNAP"&&ce();var s=e.impact,o=i||e.viewport,a=r||e.dimensions,l=a.draggables,u=a.droppables,c=l[e.critical.draggable.id],h=tr(s);h||ce();var f=u[h],p=sP({impact:s,viewport:o,destination:f,draggables:l}),g=oP({impact:p,draggable:c,droppable:f,draggables:l,viewport:o,afterCritical:e.afterCritical});return ou({impact:p,clientSelection:g,state:e,dimensions:a,viewport:o})},PH=function(t){return{index:t.index,droppableId:t.droppableId}},lP=function(t){var e=t.draggable,r=t.home,i=t.draggables,s=t.viewport,o=bc(r.axis,e.displaceBy),a=nl(r.descriptor.id,i),l=a.indexOf(e);l===-1&&ce();var u=a.slice(l+1),c=u.reduce(function(g,b){return g[b.descriptor.id]=!0,g},{}),h={inVirtualList:r.descriptor.mode==="virtual",displacedBy:o,effected:c},f=Bu({afterDragging:u,destination:r,displacedBy:o,last:null,viewport:s.frame,forceShouldAnimate:!1}),p={displaced:f,displacedBy:o,at:{type:"REORDER",destination:PH(e.descriptor)}};return{impact:p,afterCritical:h}},RH=function(t,e){return{draggables:t.draggables,droppables:z_(t.droppables,e)}},NH=function(t){var e=t.draggable,r=t.offset,i=t.initialWindowScroll,s=Wh(e.client,r),o=qh(s,i),a=ke({},e,{placeholder:ke({},e.placeholder,{client:s}),client:s,page:o});return a},DH=function(t){var e=t.frame;return e||ce(),e},MH=function(t){var e=t.additions,r=t.updatedDroppables,i=t.viewport,s=i.scroll.diff.value;return e.map(function(o){var a=o.descriptor.droppableId,l=r[a],u=DH(l),c=u.scroll.diff.value,h=ln(s,c),f=NH({draggable:o,offset:h,initialWindowScroll:i.scroll.initial});return f})},LH=function(t){var e=t.state,r=t.published,i=r.modified.map(function(T){var L=e.dimensions.droppables[T.droppableId],F=O_(L,T.scroll);return F}),s=ke({},e.dimensions.droppables,{},HA(i)),o=WA(MH({additions:r.additions,updatedDroppables:s,viewport:e.viewport})),a=ke({},e.dimensions.draggables,{},o);r.removals.forEach(function(T){delete a[T]});var l={droppables:s,draggables:a},u=tr(e.impact),c=u?l.droppables[u]:null,h=l.draggables[e.critical.draggable.id],f=l.droppables[e.critical.droppable.id],p=lP({draggable:h,home:f,draggables:a,viewport:e.viewport}),g=p.impact,b=p.afterCritical,R=c&&c.isCombineEnabled?e.impact:g,P=iP({pageOffset:e.current.page.offset,draggable:l.draggables[e.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:R,viewport:e.viewport,afterCritical:b}),x=ke({phase:"DRAGGING"},e,{phase:"DRAGGING",impact:P,onLiftImpact:g,dimensions:l,afterCritical:b,forceShouldAnimate:!1});if(e.phase==="COLLECTING")return x;var _=ke({phase:"DROP_PENDING"},x,{phase:"DROP_PENDING",reason:e.reason,isWaiting:!1});return _},Ev=function(e){return e.movementMode==="SNAP"},Pm=function(e,r,i){var s=RH(e.dimensions,r);return!Ev(e)||i?ou({state:e,dimensions:s}):aP({state:e,dimensions:s})};function Rm(t){return t.isDragging&&t.movementMode==="SNAP"?ke({phase:"DRAGGING"},t,{scrollJumpRequest:null}):t}var QE={phase:"IDLE",completed:null,shouldFlush:!1},OH=function(t,e){if(t===void 0&&(t=QE),e.type==="FLUSH")return ke({},QE,{shouldFlush:!0});if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&ce();var r=e.payload,i=r.critical,s=r.clientSelection,o=r.viewport,a=r.dimensions,l=r.movementMode,u=a.draggables[i.draggable.id],c=a.droppables[i.droppable.id],h={selection:s,borderBoxCenter:u.client.borderBox.center,offset:Zt},f={client:h,page:{selection:ln(h.selection,o.scroll.initial),borderBoxCenter:ln(h.selection,o.scroll.initial),offset:ln(h.selection,o.scroll.diff.value)}},p=lp(a.droppables).every(function(ue){return!ue.isFixedOnPage}),g=lP({draggable:u,home:c,draggables:a.draggables,viewport:o}),b=g.impact,R=g.afterCritical,P={phase:"DRAGGING",isDragging:!0,critical:i,movementMode:l,dimensions:a,initial:f,current:f,isWindowScrollAllowed:p,impact:b,afterCritical:R,onLiftImpact:b,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null};return P}if(e.type==="COLLECTION_STARTING"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&ce();var x=ke({phase:"COLLECTING"},t,{phase:"COLLECTING"});return x}if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||ce(),LH({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;Qs(t)||ce();var _=e.payload.client;return bs(_,t.current.client.selection)?t:ou({state:t,clientSelection:_,impact:Ev(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return Rm(t);Qs(t)||ce();var T=e.payload,L=T.id,F=T.newScroll,V=t.dimensions.droppables[L];if(!V)return t;var D=O_(V,F);return Pm(t,D,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;Qs(t)||ce();var I=e.payload,E=I.id,w=I.isEnabled,y=t.dimensions.droppables[E];y||ce(),y.isEnabled===w&&ce();var C=ke({},y,{isEnabled:w});return Pm(t,C,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;Qs(t)||ce();var A=e.payload,z=A.id,Q=A.isCombineEnabled,Z=t.dimensions.droppables[z];Z||ce(),Z.isCombineEnabled===Q&&ce();var oe=ke({},Z,{isCombineEnabled:Q});return Pm(t,oe,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;Qs(t)||ce(),t.isWindowScrollAllowed||ce();var G=e.payload.newScroll;if(bs(t.viewport.scroll.current,G))return Rm(t);var K=QA(t.viewport,G);return Ev(t)?aP({state:t,viewport:K}):ou({state:t,viewport:K})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Qs(t))return t;var re=e.payload.maxScroll;if(bs(re,t.viewport.scroll.max))return t;var se=ke({},t.viewport,{scroll:ke({},t.viewport.scroll,{max:re})});return ke({phase:"DRAGGING"},t,{viewport:se})}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&ce();var W=yH({state:t,type:e.type});return W?ou({state:t,impact:W.impact,clientSelection:W.clientSelection,scrollJumpRequest:W.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){var $=e.payload.reason;t.phase!=="COLLECTING"&&ce();var J=ke({phase:"DROP_PENDING"},t,{phase:"DROP_PENDING",isWaiting:!0,reason:$});return J}if(e.type==="DROP_ANIMATE"){var X=e.payload,de=X.completed,ye=X.dropDuration,Fe=X.newHomeClientOffset;t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||ce();var Le={phase:"DROP_ANIMATING",completed:de,dropDuration:ye,newHomeClientOffset:Fe,dimensions:t.dimensions};return Le}if(e.type==="DROP_COMPLETE"){var te=e.payload.completed;return{phase:"IDLE",completed:te,shouldFlush:!1}}return t},jH=function(e){return{type:"BEFORE_INITIAL_CAPTURE",payload:e}},VH=function(e){return{type:"LIFT",payload:e}},FH=function(e){return{type:"INITIAL_PUBLISH",payload:e}},UH=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},BH=function(){return{type:"COLLECTION_STARTING",payload:null}},$H=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},zH=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},HH=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},uP=function(e){return{type:"MOVE",payload:e}},WH=function(e){return{type:"MOVE_BY_WINDOW_SCROLL",payload:e}},qH=function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}},GH=function(){return{type:"MOVE_UP",payload:null}},KH=function(){return{type:"MOVE_DOWN",payload:null}},YH=function(){return{type:"MOVE_RIGHT",payload:null}},XH=function(){return{type:"MOVE_LEFT",payload:null}},H_=function(){return{type:"FLUSH",payload:null}},QH=function(e){return{type:"DROP_ANIMATE",payload:e}},W_=function(e){return{type:"DROP_COMPLETE",payload:e}},cP=function(e){return{type:"DROP",payload:e}},JH=function(e){return{type:"DROP_PENDING",payload:e}},dP=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},ZH=function(t){return function(e){var r=e.getState,i=e.dispatch;return function(s){return function(o){if(o.type!=="LIFT"){s(o);return}var a=o.payload,l=a.id,u=a.clientSelection,c=a.movementMode,h=r();h.phase==="DROP_ANIMATING"&&i(W_({completed:h.completed})),r().phase!=="IDLE"&&ce(),i(H_()),i(jH({draggableId:l,movementMode:c}));var f={shouldPublishImmediately:c==="SNAP"},p={draggableId:l,scrollOptions:f},g=t.startPublishing(p),b=g.critical,R=g.dimensions,P=g.viewport;i(FH({critical:b,dimensions:R,clientSelection:u,movementMode:c,viewport:P}))}}}},e8=function(t){return function(){return function(e){return function(r){r.type==="INITIAL_PUBLISH"&&t.dragging(),r.type==="DROP_ANIMATE"&&t.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&t.resting(),e(r)}}}},q_={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},$u={opacity:{drop:0,combining:.7},scale:{drop:.75}},G_={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},qs=G_.outOfTheWay+"s "+q_.outOfTheWay,au={fluid:"opacity "+qs,snap:"transform "+qs+", opacity "+qs,drop:function(e){var r=e+"s "+q_.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+qs,placeholder:"height "+qs+", width "+qs+", margin "+qs},JE=function(e){return bs(e,Zt)?null:"translate("+e.x+"px, "+e.y+"px)"},Tv={moveTo:JE,drop:function(e,r){var i=JE(e);return i?r?i+" scale("+$u.scale.drop+")":i:null}},Sv=G_.minDropTime,hP=G_.maxDropTime,t8=hP-Sv,ZE=1500,n8=.6,r8=function(t){var e=t.current,r=t.destination,i=t.reason,s=Fu(e,r);if(s<=0)return Sv;if(s>=ZE)return hP;var o=s/ZE,a=Sv+t8*o,l=i==="CANCEL"?a*n8:a;return Number(l.toFixed(2))},i8=function(t){var e=t.impact,r=t.draggable,i=t.dimensions,s=t.viewport,o=t.afterCritical,a=i.draggables,l=i.droppables,u=tr(e),c=u?l[u]:null,h=l[r.descriptor.droppableId],f=oP({impact:e,draggable:r,draggables:a,afterCritical:o,droppable:c||h,viewport:s}),p=Jn(f,r.client.borderBox.center);return p},s8=function(t){var e=t.draggables,r=t.reason,i=t.lastImpact,s=t.home,o=t.viewport,a=t.onLiftImpact;if(!i.at||r!=="DROP"){var l=sP({draggables:e,impact:a,destination:s,viewport:o,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(i.at.type==="REORDER")return{impact:i,didDropInsideDroppable:!0};var u=ke({},i,{displaced:Uu});return{impact:u,didDropInsideDroppable:!0}},o8=function(t){var e=t.getState,r=t.dispatch;return function(i){return function(s){if(s.type!=="DROP"){i(s);return}var o=e(),a=s.payload.reason;if(o.phase==="COLLECTING"){r(JH({reason:a}));return}if(o.phase!=="IDLE"){var l=o.phase==="DROP_PENDING"&&o.isWaiting;l&&ce(),o.phase==="DRAGGING"||o.phase==="DROP_PENDING"||ce();var u=o.critical,c=o.dimensions,h=c.draggables[o.critical.draggable.id],f=s8({reason:a,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),p=f.impact,g=f.didDropInsideDroppable,b=g?V_(p):null,R=g?up(p):null,P={index:u.draggable.index,droppableId:u.droppable.id},x={draggableId:h.descriptor.id,type:h.descriptor.type,source:P,reason:a,mode:o.movementMode,destination:b,combine:R},_=i8({impact:p,draggable:h,dimensions:c,viewport:o.viewport,afterCritical:o.afterCritical}),T={critical:o.critical,afterCritical:o.afterCritical,result:x,impact:p},L=!bs(o.current.client.offset,_)||!!x.combine;if(!L){r(W_({completed:T}));return}var F=r8({current:o.current.client.offset,destination:_,reason:a}),V={newHomeClientOffset:_,dropDuration:F,completed:T};r(QH(V))}}}},fP=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function a8(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||t()}}}function l8(t){var e=t.onWindowScroll;function r(){e(fP())}var i=Vu(r),s=a8(i),o=ws;function a(){return o!==ws}function l(){a()&&ce(),o=_r(window,[s])}function u(){a()||ce(),i.cancel(),o(),o=ws}return{start:l,stop:u,isActive:a}}var u8=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},c8=function(t){var e=l8({onWindowScroll:function(i){t.dispatch(WH({newScroll:i}))}});return function(r){return function(i){!e.isActive()&&i.type==="INITIAL_PUBLISH"&&e.start(),e.isActive()&&u8(i)&&e.stop(),r(i)}}},d8=function(t){var e=!1,r=!1,i=setTimeout(function(){r=!0}),s=function(a){e||r||(e=!0,t(a),clearTimeout(i))};return s.wasCalled=function(){return e},s},h8=function(){var t=[],e=function(o){var a=j_(t,function(c){return c.timerId===o});a===-1&&ce();var l=t.splice(a,1),u=l[0];u.callback()},r=function(o){var a=setTimeout(function(){return e(a)}),l={timerId:a,callback:o};t.push(l)},i=function(){if(t.length){var o=[].concat(t);t.length=0,o.forEach(function(a){clearTimeout(a.timerId),a.callback()})}};return{add:r,flush:i}},f8=function(e,r){return e==null&&r==null?!0:e==null||r==null?!1:e.droppableId===r.droppableId&&e.index===r.index},p8=function(e,r){return e==null&&r==null?!0:e==null||r==null?!1:e.draggableId===r.draggableId&&e.droppableId===r.droppableId},m8=function(e,r){if(e===r)return!0;var i=e.draggable.id===r.draggable.id&&e.draggable.droppableId===r.draggable.droppableId&&e.draggable.type===r.draggable.type&&e.draggable.index===r.draggable.index,s=e.droppable.id===r.droppable.id&&e.droppable.type===r.droppable.type;return i&&s},Pl=function(e,r){r()},fd=function(e,r){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:r}},Nm=function(e,r,i,s){if(!e){i(s(r));return}var o=d8(i),a={announce:o};e(r,a),o.wasCalled()||i(s(r))},g8=function(t,e){var r=h8(),i=null,s=function(p,g){i&&ce(),Pl("onBeforeCapture",function(){var b=t().onBeforeCapture;if(b){var R={draggableId:p,mode:g};b(R)}})},o=function(p,g){i&&ce(),Pl("onBeforeDragStart",function(){var b=t().onBeforeDragStart;b&&b(fd(p,g))})},a=function(p,g){i&&ce();var b=fd(p,g);i={mode:g,lastCritical:p,lastLocation:b.source,lastCombine:null},r.add(function(){Pl("onDragStart",function(){return Nm(t().onDragStart,b,e,Wd.onDragStart)})})},l=function(p,g){var b=V_(g),R=up(g);i||ce();var P=!m8(p,i.lastCritical);P&&(i.lastCritical=p);var x=!f8(i.lastLocation,b);x&&(i.lastLocation=b);var _=!p8(i.lastCombine,R);if(_&&(i.lastCombine=R),!(!P&&!x&&!_)){var T=ke({},fd(p,i.mode),{combine:R,destination:b});r.add(function(){Pl("onDragUpdate",function(){return Nm(t().onDragUpdate,T,e,Wd.onDragUpdate)})})}},u=function(){i||ce(),r.flush()},c=function(p){i||ce(),i=null,Pl("onDragEnd",function(){return Nm(t().onDragEnd,p,e,Wd.onDragEnd)})},h=function(){if(i){var p=ke({},fd(i.lastCritical,i.mode),{combine:null,destination:null,reason:"CANCEL"});c(p)}};return{beforeCapture:s,beforeStart:o,start:a,update:l,flush:u,drop:c,abort:h}},v8=function(t,e){var r=g8(t,e);return function(i){return function(s){return function(o){if(o.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(o.type==="INITIAL_PUBLISH"){var a=o.payload.critical;r.beforeStart(a,o.payload.movementMode),s(o),r.start(a,o.payload.movementMode);return}if(o.type==="DROP_COMPLETE"){var l=o.payload.completed.result;r.flush(),s(o),r.drop(l);return}if(s(o),o.type==="FLUSH"){r.abort();return}var u=i.getState();u.phase==="DRAGGING"&&r.update(u.critical,u.impact)}}}},y8=function(t){return function(e){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){e(r);return}var i=t.getState();i.phase!=="DROP_ANIMATING"&&ce(),t.dispatch(W_({completed:i.completed}))}}},_8=function(t){var e=null,r=null;function i(){r&&(cancelAnimationFrame(r),r=null),e&&(e(),e=null)}return function(s){return function(o){if((o.type==="FLUSH"||o.type==="DROP_COMPLETE"||o.type==="DROP_ANIMATION_FINISHED")&&i(),s(o),o.type==="DROP_ANIMATE"){var a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var u=t.getState();u.phase==="DROP_ANIMATING"&&t.dispatch(dP())}};r=requestAnimationFrame(function(){r=null,e=_r(window,[a])})}}}},w8=function(t){return function(){return function(e){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&t.stopPublishing(),e(r)}}}},b8=function(t){var e=!1;return function(){return function(r){return function(i){if(i.type==="INITIAL_PUBLISH"){e=!0,t.tryRecordFocus(i.payload.critical.draggable.id),r(i),t.tryRestoreFocusRecorded();return}if(r(i),!!e){if(i.type==="FLUSH"){e=!1,t.tryRestoreFocusRecorded();return}if(i.type==="DROP_COMPLETE"){e=!1;var s=i.payload.completed.result;s.combine&&t.tryShiftRecord(s.draggableId,s.combine.draggableId),t.tryRestoreFocusRecorded()}}}}}},x8=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},E8=function(t){return function(e){return function(r){return function(i){if(x8(i)){t.stop(),r(i);return}if(i.type==="INITIAL_PUBLISH"){r(i);var s=e.getState();s.phase!=="DRAGGING"&&ce(),t.start(s);return}r(i),t.scroll(e.getState())}}}},T8=function(t){return function(e){return function(r){if(e(r),r.type==="PUBLISH_WHILE_DRAGGING"){var i=t.getState();i.phase==="DROP_PENDING"&&(i.isWaiting||t.dispatch(cP({reason:i.reason})))}}}},S8=_A,I8=function(t){var e=t.dimensionMarshal,r=t.focusMarshal,i=t.styleMarshal,s=t.getResponders,o=t.announce,a=t.autoScroller;return yA(OH,S8(hz(e8(i),w8(e),ZH(e),o8,y8,_8,T8,E8(a),c8,b8(r),v8(s,o))))},Dm=function(){return{additions:{},removals:{},modified:{}}};function k8(t){var e=t.registry,r=t.callbacks,i=Dm(),s=null,o=function(){s||(r.collectionStarting(),s=requestAnimationFrame(function(){s=null;var h=i,f=h.additions,p=h.removals,g=h.modified,b=Object.keys(f).map(function(x){return e.draggable.getById(x).getDimension(Zt)}).sort(function(x,_){return x.descriptor.index-_.descriptor.index}),R=Object.keys(g).map(function(x){var _=e.droppable.getById(x),T=_.callbacks.getScrollWhileDragging();return{droppableId:x,scroll:T}}),P={additions:b,removals:Object.keys(p),modified:R};i=Dm(),r.publish(P)}))},a=function(h){var f=h.descriptor.id;i.additions[f]=h,i.modified[h.descriptor.droppableId]=!0,i.removals[f]&&delete i.removals[f],o()},l=function(h){var f=h.descriptor;i.removals[f.id]=!0,i.modified[f.droppableId]=!0,i.additions[f.id]&&delete i.additions[f.id],o()},u=function(){s&&(cancelAnimationFrame(s),s=null,i=Dm())};return{add:a,remove:l,stop:u}}var pP=function(t){var e=t.scrollHeight,r=t.scrollWidth,i=t.height,s=t.width,o=Jn({x:r,y:e},{x:s,y:i}),a={x:Math.max(0,o.x),y:Math.max(0,o.y)};return a},mP=function(){var t=document.documentElement;return t||ce(),t},gP=function(){var t=mP(),e=pP({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight});return e},C8=function(){var t=fP(),e=gP(),r=t.y,i=t.x,s=mP(),o=s.clientWidth,a=s.clientHeight,l=i+o,u=r+a,c=Vr({top:r,left:i,right:l,bottom:u}),h={frame:c,scroll:{initial:t,current:t,max:e,diff:{value:Zt,displacement:Zt}}};return h},A8=function(t){var e=t.critical,r=t.scrollOptions,i=t.registry,s=C8(),o=s.scroll.current,a=e.droppable,l=i.droppable.getAllByType(a.type).map(function(f){return f.callbacks.getDimensionAndWatchScroll(o,r)}),u=i.draggable.getAllByType(e.draggable.type).map(function(f){return f.getDimension(o)}),c={draggables:WA(u),droppables:HA(l)},h={dimensions:c,critical:e,viewport:s};return h};function eT(t,e,r){if(r.descriptor.id===e.id||r.descriptor.type!==e.type)return!1;var i=t.droppable.getById(r.descriptor.droppableId);return i.descriptor.mode==="virtual"}var P8=function(t,e){var r=null,i=k8({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),s=function(g,b){t.droppable.exists(g)||ce(),r&&e.updateDroppableIsEnabled({id:g,isEnabled:b})},o=function(g,b){r&&(t.droppable.exists(g)||ce(),e.updateDroppableIsCombineEnabled({id:g,isCombineEnabled:b}))},a=function(g,b){r&&(t.droppable.exists(g)||ce(),e.updateDroppableScroll({id:g,newScroll:b}))},l=function(g,b){r&&t.droppable.getById(g).callbacks.scroll(b)},u=function(){if(r){i.stop();var g=r.critical.droppable;t.droppable.getAllByType(g.type).forEach(function(b){return b.callbacks.dragStopped()}),r.unsubscribe(),r=null}},c=function(g){r||ce();var b=r.critical.draggable;g.type==="ADDITION"&&eT(t,b,g.value)&&i.add(g.value),g.type==="REMOVAL"&&eT(t,b,g.value)&&i.remove(g.value)},h=function(g){r&&ce();var b=t.draggable.getById(g.draggableId),R=t.droppable.getById(b.descriptor.droppableId),P={draggable:b.descriptor,droppable:R.descriptor},x=t.subscribe(c);return r={critical:P,unsubscribe:x},A8({critical:P,registry:t,scrollOptions:g.scrollOptions})},f={updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:o,scrollDroppable:l,updateDroppableScroll:a,startPublishing:h,stopPublishing:u};return f},vP=function(t,e){return t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP"},R8=function(t){window.scrollBy(t.x,t.y)},N8=Jt(function(t){return lp(t).filter(function(e){return!(!e.isEnabled||!e.frame)})}),D8=function(e,r){var i=Us(N8(r),function(s){return s.frame||ce(),tP(s.frame.pageMarginBox)(e)});return i},M8=function(t){var e=t.center,r=t.destination,i=t.droppables;if(r){var s=i[r];return s.frame?s:null}var o=D8(e,i);return o},xs={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(e){return Math.pow(e,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},L8=function(t,e){var r=t[e.size]*xs.startFromPercentage,i=t[e.size]*xs.maxScrollAtPercentage,s={startScrollingFrom:r,maxScrollValueAt:i};return s},yP=function(t){var e=t.startOfRange,r=t.endOfRange,i=t.current,s=r-e;if(s===0)return 0;var o=i-e,a=o/s;return a},K_=1,O8=function(t,e){if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return xs.maxPixelScroll;if(t===e.startScrollingFrom)return K_;var r=yP({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),i=1-r,s=xs.maxPixelScroll*xs.ease(i);return Math.ceil(s)},tT=xs.durationDampening.accelerateAt,nT=xs.durationDampening.stopDampeningAt,j8=function(t,e){var r=e,i=nT,s=Date.now(),o=s-r;if(o>=nT)return t;if(o<tT)return K_;var a=yP({startOfRange:tT,endOfRange:i,current:o}),l=t*xs.ease(a);return Math.ceil(l)},rT=function(t){var e=t.distanceToEdge,r=t.thresholds,i=t.dragStartTime,s=t.shouldUseTimeDampening,o=O8(e,r);return o===0?0:s?Math.max(j8(o,i),K_):o},iT=function(t){var e=t.container,r=t.distanceToEdges,i=t.dragStartTime,s=t.axis,o=t.shouldUseTimeDampening,a=L8(e,s),l=r[s.end]<r[s.start];return l?rT({distanceToEdge:r[s.end],thresholds:a,dragStartTime:i,shouldUseTimeDampening:o}):-1*rT({distanceToEdge:r[s.start],thresholds:a,dragStartTime:i,shouldUseTimeDampening:o})},V8=function(t){var e=t.container,r=t.subject,i=t.proposedScroll,s=r.height>e.height,o=r.width>e.width;return!o&&!s?i:o&&s?null:{x:o?0:i.x,y:s?0:i.y}},F8=$A(function(t){return t===0?0:t}),_P=function(t){var e=t.dragStartTime,r=t.container,i=t.subject,s=t.center,o=t.shouldUseTimeDampening,a={top:s.y-r.top,right:r.right-s.x,bottom:r.bottom-s.y,left:s.x-r.left},l=iT({container:r,distanceToEdges:a,dragStartTime:e,axis:F_,shouldUseTimeDampening:o}),u=iT({container:r,distanceToEdges:a,dragStartTime:e,axis:KA,shouldUseTimeDampening:o}),c=F8({x:u,y:l});if(bs(c,Zt))return null;var h=V8({container:r,subject:i,proposedScroll:c});return h?bs(h,Zt)?null:h:null},U8=$A(function(t){return t===0?0:t>0?1:-1}),Y_=function(){var t=function(r,i){return r<0?r:r>i?r-i:0};return function(e){var r=e.current,i=e.max,s=e.change,o=ln(r,s),a={x:t(o.x,i.x),y:t(o.y,i.y)};return bs(a,Zt)?null:a}}(),wP=function(e){var r=e.max,i=e.current,s=e.change,o={x:Math.max(i.x,r.x),y:Math.max(i.y,r.y)},a=U8(s),l=Y_({max:o,current:i,change:a});return!l||a.x!==0&&l.x===0||a.y!==0&&l.y===0},X_=function(e,r){return wP({current:e.scroll.current,max:e.scroll.max,change:r})},B8=function(e,r){if(!X_(e,r))return null;var i=e.scroll.max,s=e.scroll.current;return Y_({current:s,max:i,change:r})},Q_=function(e,r){var i=e.frame;return i?wP({current:i.scroll.current,max:i.scroll.max,change:r}):!1},$8=function(e,r){var i=e.frame;return!i||!Q_(e,r)?null:Y_({current:i.scroll.current,max:i.scroll.max,change:r})},z8=function(t){var e=t.viewport,r=t.subject,i=t.center,s=t.dragStartTime,o=t.shouldUseTimeDampening,a=_P({dragStartTime:s,container:e.frame,subject:r,center:i,shouldUseTimeDampening:o});return a&&X_(e,a)?a:null},H8=function(t){var e=t.droppable,r=t.subject,i=t.center,s=t.dragStartTime,o=t.shouldUseTimeDampening,a=e.frame;if(!a)return null;var l=_P({dragStartTime:s,container:a.pageMarginBox,subject:r,center:i,shouldUseTimeDampening:o});return l&&Q_(e,l)?l:null},sT=function(t){var e=t.state,r=t.dragStartTime,i=t.shouldUseTimeDampening,s=t.scrollWindow,o=t.scrollDroppable,a=e.current.page.borderBoxCenter,l=e.dimensions.draggables[e.critical.draggable.id],u=l.page.marginBox;if(e.isWindowScrollAllowed){var c=e.viewport,h=z8({dragStartTime:r,viewport:c,subject:u,center:a,shouldUseTimeDampening:i});if(h){s(h);return}}var f=M8({center:a,destination:tr(e.impact),droppables:e.dimensions.droppables});if(f){var p=H8({dragStartTime:r,droppable:f,subject:u,center:a,shouldUseTimeDampening:i});p&&o(f.descriptor.id,p)}},W8=function(t){var e=t.scrollWindow,r=t.scrollDroppable,i=Vu(e),s=Vu(r),o=null,a=function(h){o||ce();var f=o,p=f.shouldUseTimeDampening,g=f.dragStartTime;sT({state:h,scrollWindow:i,scrollDroppable:s,dragStartTime:g,shouldUseTimeDampening:p})},l=function(h){o&&ce();var f=Date.now(),p=!1,g=function(){p=!0};sT({state:h,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:g,scrollDroppable:g}),o={dragStartTime:f,shouldUseTimeDampening:p},p&&a(h)},u=function(){o&&(i.cancel(),s.cancel(),o=null)};return{start:l,stop:u,scroll:a}},q8=function(t){var e=t.move,r=t.scrollDroppable,i=t.scrollWindow,s=function(c,h){var f=ln(c.current.client.selection,h);e({client:f})},o=function(c,h){if(!Q_(c,h))return h;var f=$8(c,h);if(!f)return r(c.descriptor.id,h),null;var p=Jn(h,f);r(c.descriptor.id,p);var g=Jn(h,p);return g},a=function(c,h,f){if(!c||!X_(h,f))return f;var p=B8(h,f);if(!p)return i(f),null;var g=Jn(f,p);i(g);var b=Jn(f,g);return b},l=function(c){var h=c.scrollJumpRequest;if(h){var f=tr(c.impact);f||ce();var p=o(c.dimensions.droppables[f],h);if(p){var g=c.viewport,b=a(c.isWindowScrollAllowed,g,p);b&&s(c,b)}}};return l},G8=function(t){var e=t.scrollDroppable,r=t.scrollWindow,i=t.move,s=W8({scrollWindow:r,scrollDroppable:e}),o=q8({move:i,scrollWindow:r,scrollDroppable:e}),a=function(c){if(c.phase==="DRAGGING"){if(c.movementMode==="FLUID"){s.scroll(c);return}c.scrollJumpRequest&&o(c)}},l={scroll:a,start:s.start,stop:s.stop};return l},Va="data-rbd",Fa=function(){var t=Va+"-drag-handle";return{base:t,draggableId:t+"-draggable-id",contextId:t+"-context-id"}}(),Iv=function(){var t=Va+"-draggable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),K8=function(){var t=Va+"-droppable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),oT={contextId:Va+"-scroll-container-context-id"},Y8=function(e){return function(r){return"["+r+'="'+e+'"]'}},Rl=function(e,r){return e.map(function(i){var s=i.styles[r];return s?i.selector+" { "+s+" }":""}).join(" ")},X8="pointer-events: none;",Q8=function(t){var e=Y8(t),r=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(Fa.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:X8,dropAnimating:l}}}(),i=function(){var l=`
      transition: `+au.outOfTheWay+`;
    `;return{selector:e(Iv.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),s={selector:e(K8.contextId),styles:{always:"overflow-anchor: none;"}},o={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},a=[i,r,s,o];return{always:Rl(a,"always"),resting:Rl(a,"resting"),dragging:Rl(a,"dragging"),dropAnimating:Rl(a,"dropAnimating"),userCancel:Rl(a,"userCancel")}},nr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?N.useLayoutEffect:N.useEffect,Mm=function(){var e=document.querySelector("head");return e||ce(),e},aT=function(e){var r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.type="text/css",r};function J8(t,e){var r=Je(function(){return Q8(t)},[t]),i=N.useRef(null),s=N.useRef(null),o=Se(Jt(function(f){var p=s.current;p||ce(),p.textContent=f}),[]),a=Se(function(f){var p=i.current;p||ce(),p.textContent=f},[]);nr(function(){!i.current&&!s.current||ce();var f=aT(e),p=aT(e);return i.current=f,s.current=p,f.setAttribute(Va+"-always",t),p.setAttribute(Va+"-dynamic",t),Mm().appendChild(f),Mm().appendChild(p),a(r.always),o(r.resting),function(){var g=function(R){var P=R.current;P||ce(),Mm().removeChild(P),R.current=null};g(i),g(s)}},[e,a,o,r.always,r.resting,t]);var l=Se(function(){return o(r.dragging)},[o,r.dragging]),u=Se(function(f){if(f==="DROP"){o(r.dropAnimating);return}o(r.userCancel)},[o,r.dropAnimating,r.userCancel]),c=Se(function(){s.current&&o(r.resting)},[o,r.resting]),h=Je(function(){return{dragging:l,dropping:u,resting:c}},[l,u,c]);return h}var bP=function(t){return t&&t.ownerDocument?t.ownerDocument.defaultView:window};function hp(t){return t instanceof bP(t).HTMLElement}function Z8(t,e){var r="["+Fa.contextId+'="'+t+'"]',i=zA(document.querySelectorAll(r));if(!i.length)return null;var s=Us(i,function(o){return o.getAttribute(Fa.draggableId)===e});return!s||!hp(s)?null:s}function eW(t){var e=N.useRef({}),r=N.useRef(null),i=N.useRef(null),s=N.useRef(!1),o=Se(function(p,g){var b={id:p,focus:g};return e.current[p]=b,function(){var P=e.current,x=P[p];x!==b&&delete P[p]}},[]),a=Se(function(p){var g=Z8(t,p);g&&g!==document.activeElement&&g.focus()},[t]),l=Se(function(p,g){r.current===p&&(r.current=g)},[]),u=Se(function(){i.current||s.current&&(i.current=requestAnimationFrame(function(){i.current=null;var p=r.current;p&&a(p)}))},[a]),c=Se(function(p){r.current=null;var g=document.activeElement;g&&g.getAttribute(Fa.draggableId)===p&&(r.current=p)},[]);nr(function(){return s.current=!0,function(){s.current=!1;var p=i.current;p&&cancelAnimationFrame(p)}},[]);var h=Je(function(){return{register:o,tryRecordFocus:c,tryRestoreFocusRecorded:u,tryShiftRecord:l}},[o,c,u,l]);return h}function tW(){var t={draggables:{},droppables:{}},e=[];function r(f){return e.push(f),function(){var g=e.indexOf(f);g!==-1&&e.splice(g,1)}}function i(f){e.length&&e.forEach(function(p){return p(f)})}function s(f){return t.draggables[f]||null}function o(f){var p=s(f);return p||ce(),p}var a={register:function(p){t.draggables[p.descriptor.id]=p,i({type:"ADDITION",value:p})},update:function(p,g){var b=t.draggables[g.descriptor.id];b&&b.uniqueId===p.uniqueId&&(delete t.draggables[g.descriptor.id],t.draggables[p.descriptor.id]=p)},unregister:function(p){var g=p.descriptor.id,b=s(g);b&&p.uniqueId===b.uniqueId&&(delete t.draggables[g],i({type:"REMOVAL",value:p}))},getById:o,findById:s,exists:function(p){return!!s(p)},getAllByType:function(p){return Yh(t.draggables).filter(function(g){return g.descriptor.type===p})}};function l(f){return t.droppables[f]||null}function u(f){var p=l(f);return p||ce(),p}var c={register:function(p){t.droppables[p.descriptor.id]=p},unregister:function(p){var g=l(p.descriptor.id);g&&p.uniqueId===g.uniqueId&&delete t.droppables[p.descriptor.id]},getById:u,findById:l,exists:function(p){return!!l(p)},getAllByType:function(p){return Yh(t.droppables).filter(function(g){return g.descriptor.type===p})}};function h(){t.draggables={},t.droppables={},e.length=0}return{draggable:a,droppable:c,subscribe:r,clean:h}}function nW(){var t=Je(tW,[]);return N.useEffect(function(){return function(){requestAnimationFrame(t.clean)}},[t]),t}var J_=Be.createContext(null),Qh=function(){var t=document.body;return t||ce(),t},rW={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},iW=function(e){return"rbd-announcement-"+e};function sW(t){var e=Je(function(){return iW(t)},[t]),r=N.useRef(null);N.useEffect(function(){var o=document.createElement("div");return r.current=o,o.id=e,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),ke(o.style,rW),Qh().appendChild(o),function(){setTimeout(function(){var u=Qh();u.contains(o)&&u.removeChild(o),o===r.current&&(r.current=null)})}},[e]);var i=Se(function(s){var o=r.current;if(o){o.textContent=s;return}},[]);return i}var oW=0,aW={separator:"::"};function Z_(t,e){return e===void 0&&(e=aW),Je(function(){return""+t+e.separator+oW++},[e.separator,t])}function lW(t){var e=t.contextId,r=t.uniqueId;return"rbd-hidden-text-"+e+"-"+r}function uW(t){var e=t.contextId,r=t.text,i=Z_("hidden-text",{separator:"-"}),s=Je(function(){return lW({contextId:e,uniqueId:i})},[i,e]);return N.useEffect(function(){var a=document.createElement("div");return a.id=s,a.textContent=r,a.style.display="none",Qh().appendChild(a),function(){var u=Qh();u.contains(a)&&u.removeChild(a)}},[s,r]),s}var fp=Be.createContext(null);function xP(t){var e=N.useRef(t);return N.useEffect(function(){e.current=t}),e}function cW(){var t=null;function e(){return!!t}function r(a){return a===t}function i(a){t&&ce();var l={abandon:a};return t=l,l}function s(){t||ce(),t=null}function o(){t&&(t.abandon(),s())}return{isClaimed:e,isActive:r,claim:i,release:s,tryAbandon:o}}var dW=9,hW=13,e0=27,EP=32,fW=33,pW=34,mW=35,gW=36,vW=37,yW=38,_W=39,wW=40,pd,bW=(pd={},pd[hW]=!0,pd[dW]=!0,pd),TP=function(t){bW[t.keyCode]&&t.preventDefault()},pp=function(){var t="visibilitychange";if(typeof document>"u")return t;var e=[t,"ms"+t,"webkit"+t,"moz"+t,"o"+t],r=Us(e,function(i){return"on"+i in document});return r||t}(),SP=0,lT=5;function xW(t,e){return Math.abs(e.x-t.x)>=lT||Math.abs(e.y-t.y)>=lT}var uT={type:"IDLE"};function EW(t){var e=t.cancel,r=t.completed,i=t.getPhase,s=t.setPhase;return[{eventName:"mousemove",fn:function(a){var l=a.button,u=a.clientX,c=a.clientY;if(l===SP){var h={x:u,y:c},f=i();if(f.type==="DRAGGING"){a.preventDefault(),f.actions.move(h);return}f.type!=="PENDING"&&ce();var p=f.point;if(xW(p,h)){a.preventDefault();var g=f.actions.fluidLift(h);s({type:"DRAGGING",actions:g})}}}},{eventName:"mouseup",fn:function(a){var l=i();if(l.type!=="DRAGGING"){e();return}a.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(a){i().type==="DRAGGING"&&a.preventDefault(),e()}},{eventName:"keydown",fn:function(a){var l=i();if(l.type==="PENDING"){e();return}if(a.keyCode===e0){a.preventDefault(),e();return}TP(a)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){i().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:function(a){var l=i();if(l.type==="IDLE"&&ce(),l.actions.shouldRespectForcePress()){e();return}a.preventDefault()}},{eventName:pp,fn:e}]}function TW(t){var e=N.useRef(uT),r=N.useRef(ws),i=Je(function(){return{eventName:"mousedown",fn:function(f){if(!f.defaultPrevented&&f.button===SP&&!(f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)){var p=t.findClosestDraggableId(f);if(p){var g=t.tryGetLock(p,a,{sourceEvent:f});if(g){f.preventDefault();var b={x:f.clientX,y:f.clientY};r.current(),c(g,b)}}}}}},[t]),s=Je(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(f){if(!f.defaultPrevented){var p=t.findClosestDraggableId(f);if(p){var g=t.findOptionsForDraggable(p);g&&(g.shouldRespectForcePress||t.canGetLock(p)&&f.preventDefault())}}}}},[t]),o=Se(function(){var f={passive:!1,capture:!0};r.current=_r(window,[s,i],f)},[s,i]),a=Se(function(){var h=e.current;h.type!=="IDLE"&&(e.current=uT,r.current(),o())},[o]),l=Se(function(){var h=e.current;a(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[a]),u=Se(function(){var f={capture:!0,passive:!1},p=EW({cancel:l,completed:a,getPhase:function(){return e.current},setPhase:function(b){e.current=b}});r.current=_r(window,p,f)},[l,a]),c=Se(function(f,p){e.current.type!=="IDLE"&&ce(),e.current={type:"PENDING",point:p,actions:f},u()},[u]);nr(function(){return o(),function(){r.current()}},[o])}var Uo;function SW(){}var IW=(Uo={},Uo[pW]=!0,Uo[fW]=!0,Uo[gW]=!0,Uo[mW]=!0,Uo);function kW(t,e){function r(){e(),t.cancel()}function i(){e(),t.drop()}return[{eventName:"keydown",fn:function(o){if(o.keyCode===e0){o.preventDefault(),r();return}if(o.keyCode===EP){o.preventDefault(),i();return}if(o.keyCode===wW){o.preventDefault(),t.moveDown();return}if(o.keyCode===yW){o.preventDefault(),t.moveUp();return}if(o.keyCode===_W){o.preventDefault(),t.moveRight();return}if(o.keyCode===vW){o.preventDefault(),t.moveLeft();return}if(IW[o.keyCode]){o.preventDefault();return}TP(o)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:pp,fn:r}]}function CW(t){var e=N.useRef(SW),r=Je(function(){return{eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==EP)return;var a=t.findClosestDraggableId(o);if(!a)return;var l=t.tryGetLock(a,h,{sourceEvent:o});if(!l)return;o.preventDefault();var u=!0,c=l.snapLift();e.current();function h(){u||ce(),u=!1,e.current(),i()}e.current=_r(window,kW(c,h),{capture:!0,passive:!1})}}},[t]),i=Se(function(){var o={passive:!1,capture:!0};e.current=_r(window,[r],o)},[r]);nr(function(){return i(),function(){e.current()}},[i])}var Lm={type:"IDLE"},AW=120,PW=.15;function RW(t){var e=t.cancel,r=t.getPhase;return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:function(s){s.preventDefault()}},{eventName:"keydown",fn:function(s){if(r().type!=="DRAGGING"){e();return}s.keyCode===e0&&s.preventDefault(),e()}},{eventName:pp,fn:e}]}function NW(t){var e=t.cancel,r=t.completed,i=t.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(o){var a=i();if(a.type!=="DRAGGING"){e();return}a.hasMoved=!0;var l=o.touches[0],u=l.clientX,c=l.clientY,h={x:u,y:c};o.preventDefault(),a.actions.move(h)}},{eventName:"touchend",fn:function(o){var a=i();if(a.type!=="DRAGGING"){e();return}o.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(o){if(i().type!=="DRAGGING"){e();return}o.preventDefault(),e()}},{eventName:"touchforcechange",fn:function(o){var a=i();a.type==="IDLE"&&ce();var l=o.touches[0];if(l){var u=l.force>=PW;if(u){var c=a.actions.shouldRespectForcePress();if(a.type==="PENDING"){c&&e();return}if(c){if(a.hasMoved){o.preventDefault();return}e();return}o.preventDefault()}}}},{eventName:pp,fn:e}]}function DW(t){var e=N.useRef(Lm),r=N.useRef(ws),i=Se(function(){return e.current},[]),s=Se(function(g){e.current=g},[]),o=Je(function(){return{eventName:"touchstart",fn:function(g){if(!g.defaultPrevented){var b=t.findClosestDraggableId(g);if(b){var R=t.tryGetLock(b,l,{sourceEvent:g});if(R){var P=g.touches[0],x=P.clientX,_=P.clientY,T={x,y:_};r.current(),f(R,T)}}}}}},[t]),a=Se(function(){var g={capture:!0,passive:!1};r.current=_r(window,[o],g)},[o]),l=Se(function(){var p=e.current;p.type!=="IDLE"&&(p.type==="PENDING"&&clearTimeout(p.longPressTimerId),s(Lm),r.current(),a())},[a,s]),u=Se(function(){var p=e.current;l(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[l]),c=Se(function(){var g={capture:!0,passive:!1},b={cancel:u,completed:l,getPhase:i},R=_r(window,NW(b),g),P=_r(window,RW(b),g);r.current=function(){R(),P()}},[u,i,l]),h=Se(function(){var g=i();g.type!=="PENDING"&&ce();var b=g.actions.fluidLift(g.point);s({type:"DRAGGING",actions:b,hasMoved:!1})},[i,s]),f=Se(function(g,b){i().type!=="IDLE"&&ce();var R=setTimeout(h,AW);s({type:"PENDING",point:b,actions:g,longPressTimerId:R}),c()},[c,i,s,h]);nr(function(){return a(),function(){r.current();var b=i();b.type==="PENDING"&&(clearTimeout(b.longPressTimerId),s(Lm))}},[i,a,s]),nr(function(){var g=_r(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return g},[])}var MW={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function IP(t,e){if(e==null)return!1;var r=!!MW[e.tagName.toLowerCase()];if(r)return!0;var i=e.getAttribute("contenteditable");return i==="true"||i===""?!0:e===t?!1:IP(t,e.parentElement)}function LW(t,e){var r=e.target;return hp(r)?IP(t,r):!1}var OW=function(t){return Vr(t.getBoundingClientRect()).center};function jW(t){return t instanceof bP(t).Element}var VW=function(){var t="matches";if(typeof document>"u")return t;var e=[t,"msMatchesSelector","webkitMatchesSelector"],r=Us(e,function(i){return i in Element.prototype});return r||t}();function kP(t,e){return t==null?null:t[VW](e)?t:kP(t.parentElement,e)}function FW(t,e){return t.closest?t.closest(e):kP(t,e)}function UW(t){return"["+Fa.contextId+'="'+t+'"]'}function BW(t,e){var r=e.target;if(!jW(r))return null;var i=UW(t),s=FW(r,i);return!s||!hp(s)?null:s}function $W(t,e){var r=BW(t,e);return r?r.getAttribute(Fa.draggableId):null}function zW(t,e){var r="["+Iv.contextId+'="'+t+'"]',i=zA(document.querySelectorAll(r)),s=Us(i,function(o){return o.getAttribute(Iv.id)===e});return!s||!hp(s)?null:s}function HW(t){t.preventDefault()}function md(t){var e=t.expected,r=t.phase,i=t.isLockActive;return t.shouldWarn,!(!i()||e!==r)}function CP(t){var e=t.lockAPI,r=t.store,i=t.registry,s=t.draggableId;if(e.isClaimed())return!1;var o=i.draggable.findById(s);return!(!o||!o.options.isEnabled||!vP(r.getState(),s))}function WW(t){var e=t.lockAPI,r=t.contextId,i=t.store,s=t.registry,o=t.draggableId,a=t.forceSensorStop,l=t.sourceEvent,u=CP({lockAPI:e,store:i,registry:s,draggableId:o});if(!u)return null;var c=s.draggable.getById(o),h=zW(r,c.descriptor.id);if(!h||l&&!c.options.canDragInteractiveElements&&LW(h,l))return null;var f=e.claim(a||ws),p="PRE_DRAG";function g(){return c.options.shouldRespectForcePress}function b(){return e.isActive(f)}function R(V,D){md({expected:V,phase:p,isLockActive:b,shouldWarn:!0})&&i.dispatch(D())}var P=R.bind(null,"DRAGGING");function x(V){function D(){e.release(),p="COMPLETED"}p!=="PRE_DRAG"&&(D(),p!=="PRE_DRAG"&&ce()),i.dispatch(VH(V.liftActionArgs)),p="DRAGGING";function I(E,w){if(w===void 0&&(w={shouldBlockNextClick:!1}),V.cleanup(),w.shouldBlockNextClick){var y=_r(window,[{eventName:"click",fn:HW,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(y)}D(),i.dispatch(cP({reason:E}))}return ke({isActive:function(){return md({expected:"DRAGGING",phase:p,isLockActive:b,shouldWarn:!1})},shouldRespectForcePress:g,drop:function(w){return I("DROP",w)},cancel:function(w){return I("CANCEL",w)}},V.actions)}function _(V){var D=Vu(function(E){P(function(){return uP({client:E})})}),I=x({liftActionArgs:{id:o,clientSelection:V,movementMode:"FLUID"},cleanup:function(){return D.cancel()},actions:{move:D}});return ke({},I,{move:D})}function T(){var V={moveUp:function(){return P(GH)},moveRight:function(){return P(YH)},moveDown:function(){return P(KH)},moveLeft:function(){return P(XH)}};return x({liftActionArgs:{id:o,clientSelection:OW(h),movementMode:"SNAP"},cleanup:ws,actions:V})}function L(){var V=md({expected:"PRE_DRAG",phase:p,isLockActive:b,shouldWarn:!0});V&&e.release()}var F={isActive:function(){return md({expected:"PRE_DRAG",phase:p,isLockActive:b,shouldWarn:!1})},shouldRespectForcePress:g,fluidLift:_,snapLift:T,abort:L};return F}var qW=[TW,CW,DW];function GW(t){var e=t.contextId,r=t.store,i=t.registry,s=t.customSensors,o=t.enableDefaultSensors,a=[].concat(o?qW:[],s||[]),l=N.useState(function(){return cW()})[0],u=Se(function(_,T){_.isDragging&&!T.isDragging&&l.tryAbandon()},[l]);nr(function(){var _=r.getState(),T=r.subscribe(function(){var L=r.getState();u(_,L),_=L});return T},[l,r,u]),nr(function(){return l.tryAbandon},[l.tryAbandon]);for(var c=Se(function(x){return CP({lockAPI:l,registry:i,store:r,draggableId:x})},[l,i,r]),h=Se(function(x,_,T){return WW({lockAPI:l,registry:i,contextId:e,store:r,draggableId:x,forceSensorStop:_,sourceEvent:T&&T.sourceEvent?T.sourceEvent:null})},[e,l,i,r]),f=Se(function(x){return $W(e,x)},[e]),p=Se(function(x){var _=i.draggable.findById(x);return _?_.options:null},[i.draggable]),g=Se(function(){l.isClaimed()&&(l.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(H_()))},[l,r]),b=Se(l.isClaimed,[l]),R=Je(function(){return{canGetLock:c,tryGetLock:h,findClosestDraggableId:f,findOptionsForDraggable:p,tryReleaseLock:g,isLockClaimed:b}},[c,h,f,p,g,b]),P=0;P<a.length;P++)a[P](R)}var KW=function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}};function Nl(t){return t.current||ce(),t.current}function YW(t){var e=t.contextId,r=t.setCallbacks,i=t.sensors,s=t.nonce,o=t.dragHandleUsageInstructions,a=N.useRef(null),l=xP(t),u=Se(function(){return KW(l.current)},[l]),c=sW(e),h=uW({contextId:e,text:o}),f=J8(e,s),p=Se(function(E){Nl(a).dispatch(E)},[]),g=Je(function(){return NE({publishWhileDragging:UH,updateDroppableScroll:$H,updateDroppableIsEnabled:zH,updateDroppableIsCombineEnabled:HH,collectionStarting:BH},p)},[p]),b=nW(),R=Je(function(){return P8(b,g)},[b,g]),P=Je(function(){return G8(ke({scrollWindow:R8,scrollDroppable:R.scrollDroppable},NE({move:uP},p)))},[R.scrollDroppable,p]),x=eW(e),_=Je(function(){return I8({announce:c,autoScroller:P,dimensionMarshal:R,focusMarshal:x,getResponders:u,styleMarshal:f})},[c,P,R,x,u,f]);a.current=_;var T=Se(function(){var E=Nl(a),w=E.getState();w.phase!=="IDLE"&&E.dispatch(H_())},[]),L=Se(function(){var E=Nl(a).getState();return E.isDragging||E.phase==="DROP_ANIMATING"},[]),F=Je(function(){return{isDragging:L,tryAbort:T}},[L,T]);r(F);var V=Se(function(E){return vP(Nl(a).getState(),E)},[]),D=Se(function(){return Qs(Nl(a).getState())},[]),I=Je(function(){return{marshal:R,focus:x,contextId:e,canLift:V,isMovementAllowed:D,dragHandleUsageInstructionsId:h,registry:b}},[e,R,h,x,V,D,b]);return GW({contextId:e,store:_,registry:b,customSensors:i,enableDefaultSensors:t.enableDefaultSensors!==!1}),N.useEffect(function(){return T},[T]),Be.createElement(fp.Provider,{value:I},Be.createElement(vz,{context:J_,store:_},t.children))}var XW=0;function QW(){return Je(function(){return""+XW++},[])}function JW(t){var e=QW(),r=t.dragHandleUsageInstructions||Wd.dragHandleUsageInstructions;return Be.createElement(C9,null,function(i){return Be.createElement(YW,{nonce:t.nonce,contextId:e,setCallbacks:i,dragHandleUsageInstructions:r,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd},t.children)})}var AP=function(e){return function(r){return e===r}},ZW=AP("scroll"),eq=AP("auto"),cT=function(e,r){return r(e.overflowX)||r(e.overflowY)},tq=function(e){var r=window.getComputedStyle(e),i={overflowX:r.overflowX,overflowY:r.overflowY};return cT(i,ZW)||cT(i,eq)},nq=function(){return!1},rq=function t(e){return e==null?null:e===document.body?nq()?e:null:e===document.documentElement?null:tq(e)?e:t(e.parentElement)},kv=function(t){return{x:t.scrollLeft,y:t.scrollTop}},iq=function t(e){if(!e)return!1;var r=window.getComputedStyle(e);return r.position==="fixed"?!0:t(e.parentElement)},sq=function(t){var e=rq(t),r=iq(t);return{closestScrollable:e,isFixedOnPage:r}},oq=function(t){var e=t.descriptor,r=t.isEnabled,i=t.isCombineEnabled,s=t.isFixedOnPage,o=t.direction,a=t.client,l=t.page,u=t.closest,c=function(){if(!u)return null;var g=u.scrollSize,b=u.client,R=pP({scrollHeight:g.scrollHeight,scrollWidth:g.scrollWidth,height:b.paddingBox.height,width:b.paddingBox.width});return{pageMarginBox:u.page.marginBox,frameClient:b,scrollSize:g,shouldClipSubject:u.shouldClipSubject,scroll:{initial:u.scroll,current:u.scroll,max:R,diff:{value:Zt,displacement:Zt}}}}(),h=o==="vertical"?F_:KA,f=ja({page:l,withPlaceholder:null,axis:h,frame:c}),p={descriptor:e,isCombineEnabled:i,isFixedOnPage:s,axis:h,isEnabled:r,client:a,page:l,frame:c,subject:f};return p},aq=function(e,r){var i=VA(e);if(!r||e!==r)return i;var s=i.paddingBox.top-r.scrollTop,o=i.paddingBox.left-r.scrollLeft,a=s+r.scrollHeight,l=o+r.scrollWidth,u={top:s,right:l,bottom:a,left:o},c=M_(u,i.border),h=L_({borderBox:c,margin:i.margin,border:i.border,padding:i.padding});return h},lq=function(t){var e=t.ref,r=t.descriptor,i=t.env,s=t.windowScroll,o=t.direction,a=t.isDropDisabled,l=t.isCombineEnabled,u=t.shouldClipSubject,c=i.closestScrollable,h=aq(e,c),f=qh(h,s),p=function(){if(!c)return null;var b=VA(c),R={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:b,page:qh(b,s),scroll:kv(c),scrollSize:R,shouldClipSubject:u}}(),g=oq({descriptor:r,isEnabled:!a,isCombineEnabled:l,isFixedOnPage:i.isFixedOnPage,direction:o,client:h,page:f,closest:p});return g},uq={passive:!1},cq={passive:!0},dT=function(t){return t.shouldPublishImmediately?uq:cq};function Jh(t){var e=N.useContext(t);return e||ce(),e}var gd=function(e){return e&&e.env.closestScrollable||null};function dq(t){var e=N.useRef(null),r=Jh(fp),i=Z_("droppable"),s=r.registry,o=r.marshal,a=xP(t),l=Je(function(){return{id:t.droppableId,type:t.type,mode:t.mode}},[t.droppableId,t.mode,t.type]),u=N.useRef(l),c=Je(function(){return Jt(function(L,F){e.current||ce();var V={x:L,y:F};o.updateDroppableScroll(l.id,V)})},[l.id,o]),h=Se(function(){var L=e.current;return!L||!L.env.closestScrollable?Zt:kv(L.env.closestScrollable)},[]),f=Se(function(){var L=h();c(L.x,L.y)},[h,c]),p=Je(function(){return Vu(f)},[f]),g=Se(function(){var L=e.current,F=gd(L);L&&F||ce();var V=L.scrollOptions;if(V.shouldPublishImmediately){f();return}p()},[p,f]),b=Se(function(L,F){e.current&&ce();var V=a.current,D=V.getDroppableRef();D||ce();var I=sq(D),E={ref:D,descriptor:l,env:I,scrollOptions:F};e.current=E;var w=lq({ref:D,descriptor:l,env:I,windowScroll:L,direction:V.direction,isDropDisabled:V.isDropDisabled,isCombineEnabled:V.isCombineEnabled,shouldClipSubject:!V.ignoreContainerClipping}),y=I.closestScrollable;return y&&(y.setAttribute(oT.contextId,r.contextId),y.addEventListener("scroll",g,dT(E.scrollOptions))),w},[r.contextId,l,g,a]),R=Se(function(){var L=e.current,F=gd(L);return L&&F||ce(),kv(F)},[]),P=Se(function(){var L=e.current;L||ce();var F=gd(L);e.current=null,F&&(p.cancel(),F.removeAttribute(oT.contextId),F.removeEventListener("scroll",g,dT(L.scrollOptions)))},[g,p]),x=Se(function(L){var F=e.current;F||ce();var V=gd(F);V||ce(),V.scrollTop+=L.y,V.scrollLeft+=L.x},[]),_=Je(function(){return{getDimensionAndWatchScroll:b,getScrollWhileDragging:R,dragStopped:P,scroll:x}},[P,b,R,x]),T=Je(function(){return{uniqueId:i,descriptor:l,callbacks:_}},[_,l,i]);nr(function(){return u.current=T.descriptor,s.droppable.register(T),function(){e.current&&P(),s.droppable.unregister(T)}},[_,l,P,T,o,s.droppable]),nr(function(){e.current&&o.updateDroppableIsEnabled(u.current.id,!t.isDropDisabled)},[t.isDropDisabled,o]),nr(function(){e.current&&o.updateDroppableIsCombineEnabled(u.current.id,t.isCombineEnabled)},[t.isCombineEnabled,o])}function Om(){}var hT={width:0,height:0,margin:M9},hq=function(e){var r=e.isAnimatingOpenOnMount,i=e.placeholder,s=e.animate;return r||s==="close"?hT:{height:i.client.borderBox.height,width:i.client.borderBox.width,margin:i.client.margin}},fq=function(e){var r=e.isAnimatingOpenOnMount,i=e.placeholder,s=e.animate,o=hq({isAnimatingOpenOnMount:r,placeholder:i,animate:s});return{display:i.display,boxSizing:"border-box",width:o.width,height:o.height,marginTop:o.margin.top,marginRight:o.margin.right,marginBottom:o.margin.bottom,marginLeft:o.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:s!=="none"?au.placeholder:null}};function pq(t){var e=N.useRef(null),r=Se(function(){e.current&&(clearTimeout(e.current),e.current=null)},[]),i=t.animate,s=t.onTransitionEnd,o=t.onClose,a=t.contextId,l=N.useState(t.animate==="open"),u=l[0],c=l[1];N.useEffect(function(){return u?i!=="open"?(r(),c(!1),Om):e.current?Om:(e.current=setTimeout(function(){e.current=null,c(!1)}),r):Om},[i,u,r]);var h=Se(function(p){p.propertyName==="height"&&(s(),i==="close"&&o())},[i,o,s]),f=fq({isAnimatingOpenOnMount:u,animate:t.animate,placeholder:t.placeholder});return Be.createElement(t.placeholder.tagName,{style:f,"data-rbd-placeholder-context-id":a,onTransitionEnd:h,ref:t.innerRef})}var mq=Be.memo(pq),t0=Be.createContext(null),gq=function(t){vA(e,t);function e(){for(var i,s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return i=t.call.apply(t,[this].concat(o))||this,i.state={isVisible:!!i.props.on,data:i.props.on,animate:i.props.shouldAnimate&&i.props.on?"open":"none"},i.onClose=function(){i.state.animate==="close"&&i.setState({isVisible:!1})},i}e.getDerivedStateFromProps=function(s,o){return s.shouldAnimate?s.on?{isVisible:!0,data:s.on,animate:"open"}:o.isVisible?{isVisible:!0,data:o.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!s.on,data:s.on,animate:"none"}};var r=e.prototype;return r.render=function(){if(!this.state.isVisible)return null;var s={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(s)},e}(Be.PureComponent),fT={dragging:5e3,dropAnimating:4500},vq=function(e,r){return r?au.drop(r.duration):e?au.snap:au.fluid},yq=function(e,r){return e?r?$u.opacity.drop:$u.opacity.combining:null},_q=function(e){return e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP"};function wq(t){var e=t.dimension,r=e.client,i=t.offset,s=t.combineWith,o=t.dropping,a=!!s,l=_q(t),u=!!o,c=u?Tv.drop(i,a):Tv.moveTo(i),h={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:vq(l,o),transform:c,opacity:yq(a,u),zIndex:u?fT.dropAnimating:fT.dragging,pointerEvents:"none"};return h}function bq(t){return{transform:Tv.moveTo(t.offset),transition:t.shouldAnimateDisplacement?null:"none"}}function xq(t){return t.type==="DRAGGING"?wq(t):bq(t)}function Eq(t,e,r){r===void 0&&(r=Zt);var i=window.getComputedStyle(e),s=e.getBoundingClientRect(),o=jA(s,i),a=qh(o,r),l={client:o,tagName:e.tagName.toLowerCase(),display:i.display},u={x:o.marginBox.width,y:o.marginBox.height},c={descriptor:t,placeholder:l,displaceBy:u,client:o,page:a};return c}function Tq(t){var e=Z_("draggable"),r=t.descriptor,i=t.registry,s=t.getDraggableRef,o=t.canDragInteractiveElements,a=t.shouldRespectForcePress,l=t.isEnabled,u=Je(function(){return{canDragInteractiveElements:o,shouldRespectForcePress:a,isEnabled:l}},[o,l,a]),c=Se(function(g){var b=s();return b||ce(),Eq(r,b,g)},[r,s]),h=Je(function(){return{uniqueId:e,descriptor:r,options:u,getDimension:c}},[r,c,u,e]),f=N.useRef(h),p=N.useRef(!0);nr(function(){return i.draggable.register(f.current),function(){return i.draggable.unregister(f.current)}},[i.draggable]),nr(function(){if(p.current){p.current=!1;return}var g=f.current;f.current=h,i.draggable.update(h,g)},[h,i.draggable])}function Sq(t){t.preventDefault()}function Iq(t){var e=N.useRef(null),r=Se(function(E){e.current=E},[]),i=Se(function(){return e.current},[]),s=Jh(fp),o=s.contextId,a=s.dragHandleUsageInstructionsId,l=s.registry,u=Jh(t0),c=u.type,h=u.droppableId,f=Je(function(){return{id:t.draggableId,index:t.index,type:c,droppableId:h}},[t.draggableId,t.index,c,h]),p=t.children,g=t.draggableId,b=t.isEnabled,R=t.shouldRespectForcePress,P=t.canDragInteractiveElements,x=t.isClone,_=t.mapped,T=t.dropAnimationFinished;if(!x){var L=Je(function(){return{descriptor:f,registry:l,getDraggableRef:i,canDragInteractiveElements:P,shouldRespectForcePress:R,isEnabled:b}},[f,l,i,P,R,b]);Tq(L)}var F=Je(function(){return b?{tabIndex:0,role:"button","aria-describedby":a,"data-rbd-drag-handle-draggable-id":g,"data-rbd-drag-handle-context-id":o,draggable:!1,onDragStart:Sq}:null},[o,a,g,b]),V=Se(function(E){_.type==="DRAGGING"&&_.dropping&&E.propertyName==="transform"&&T()},[T,_]),D=Je(function(){var E=xq(_),w=_.type==="DRAGGING"&&_.dropping?V:null,y={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":o,"data-rbd-draggable-id":g,style:E,onTransitionEnd:w},dragHandleProps:F};return y},[o,F,g,_,V,r]),I=Je(function(){return{draggableId:f.id,type:f.type,source:{index:f.index,droppableId:f.droppableId}}},[f.droppableId,f.id,f.index,f.type]);return p(D,_.snapshot,I)}var PP=function(t,e){return t===e},RP=function(t){var e=t.combine,r=t.destination;return r?r.droppableId:e?e.droppableId:null},kq=function(e){return e.combine?e.combine.draggableId:null},Cq=function(e){return e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null};function Aq(){var t=Jt(function(s,o){return{x:s,y:o}}),e=Jt(function(s,o,a,l,u){return{isDragging:!0,isClone:o,isDropAnimating:!!u,dropAnimation:u,mode:s,draggingOver:a,combineWith:l,combineTargetFor:null}}),r=Jt(function(s,o,a,l,u,c,h){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:u,combineWith:c,mode:o,offset:s,dimension:a,forceShouldAnimate:h,snapshot:e(o,l,u,c,null)}}}),i=function(o,a){if(o.isDragging){if(o.critical.draggable.id!==a.draggableId)return null;var l=o.current.client.offset,u=o.dimensions.draggables[a.draggableId],c=tr(o.impact),h=Cq(o.impact),f=o.forceShouldAnimate;return r(t(l.x,l.y),o.movementMode,u,a.isClone,c,h,f)}if(o.phase==="DROP_ANIMATING"){var p=o.completed;if(p.result.draggableId!==a.draggableId)return null;var g=a.isClone,b=o.dimensions.draggables[a.draggableId],R=p.result,P=R.mode,x=RP(R),_=kq(R),T=o.dropDuration,L={duration:T,curve:q_.drop,moveTo:o.newHomeClientOffset,opacity:_?$u.opacity.drop:null,scale:_?$u.scale.drop:null};return{mapped:{type:"DRAGGING",offset:o.newHomeClientOffset,dimension:b,dropping:L,draggingOver:x,combineWith:_,mode:P,forceShouldAnimate:null,snapshot:e(P,g,x,_,L)}}}return null};return i}function NP(t){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}var Pq={mapped:{type:"SECONDARY",offset:Zt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:NP(null)}};function Rq(){var t=Jt(function(a,l){return{x:a,y:l}}),e=Jt(NP),r=Jt(function(a,l,u){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:a,combineTargetFor:l,shouldAnimateDisplacement:u,snapshot:e(l)}}}),i=function(l){return l?r(Zt,l,!0):null},s=function(l,u,c,h){var f=c.displaced.visible[l],p=!!(h.inVirtualList&&h.effected[l]),g=up(c),b=g&&g.draggableId===l?u:null;if(!f){if(!p)return i(b);if(c.displaced.invisible[l])return null;var R=tl(h.displacedBy.point),P=t(R.x,R.y);return r(P,b,!0)}if(p)return i(b);var x=c.displacedBy.point,_=t(x.x,x.y);return r(_,b,f.shouldAnimate)},o=function(l,u){if(l.isDragging)return l.critical.draggable.id===u.draggableId?null:s(u.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var c=l.completed;return c.result.draggableId===u.draggableId?null:s(u.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null};return o}var Nq=function(){var e=Aq(),r=Rq(),i=function(o,a){return e(o,a)||r(o,a)||Pq};return i},Dq={dropAnimationFinished:dP},Mq=LA(Nq,Dq,null,{context:J_,pure:!0,areStatePropsEqual:PP})(Iq);function DP(t){var e=Jh(t0),r=e.isUsingCloneFor;return r===t.draggableId&&!t.isClone?null:Be.createElement(Mq,t)}function Lq(t){var e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,r=!!t.disableInteractiveElementBlocking,i=!!t.shouldRespectForcePress;return Be.createElement(DP,ke({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:r,shouldRespectForcePress:i}))}function Oq(t){var e=N.useContext(fp);e||ce();var r=e.contextId,i=e.isMovementAllowed,s=N.useRef(null),o=N.useRef(null),a=t.children,l=t.droppableId,u=t.type,c=t.mode,h=t.direction,f=t.ignoreContainerClipping,p=t.isDropDisabled,g=t.isCombineEnabled,b=t.snapshot,R=t.useClone,P=t.updateViewportMaxScroll,x=t.getContainerForClone,_=Se(function(){return s.current},[]),T=Se(function(y){s.current=y},[]);Se(function(){return o.current},[]);var L=Se(function(y){o.current=y},[]),F=Se(function(){i()&&P({maxScroll:gP()})},[i,P]);dq({droppableId:l,type:u,mode:c,direction:h,isDropDisabled:p,isCombineEnabled:g,ignoreContainerClipping:f,getDroppableRef:_});var V=Be.createElement(gq,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},function(y){var C=y.onClose,A=y.data,z=y.animate;return Be.createElement(mq,{placeholder:A,onClose:C,innerRef:L,animate:z,contextId:r,onTransitionEnd:F})}),D=Je(function(){return{innerRef:T,placeholder:V,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":r}}},[r,l,V,T]),I=R?R.dragging.draggableId:null,E=Je(function(){return{droppableId:l,type:u,isUsingCloneFor:I}},[l,I,u]);function w(){if(!R)return null;var y=R.dragging,C=R.render,A=Be.createElement(DP,{draggableId:y.draggableId,index:y.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(z,Q){return C(z,Q,y)});return TD.createPortal(A,x())}return Be.createElement(t0.Provider,{value:E},a(D,b),w())}var jm=function(e,r){return e===r.droppable.type},pT=function(e,r){return r.draggables[e.draggable.id]},jq=function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=ke({},e,{shouldAnimatePlaceholder:!1}),i=Jt(function(a){return{draggableId:a.id,type:a.type,source:{index:a.index,droppableId:a.droppableId}}}),s=Jt(function(a,l,u,c,h,f){var p=h.descriptor.id,g=h.descriptor.droppableId===a;if(g){var b=f?{render:f,dragging:i(h.descriptor)}:null,R={isDraggingOver:u,draggingOverWith:u?p:null,draggingFromThisWith:p,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!1,snapshot:R,useClone:b}}if(!l)return r;if(!c)return e;var P={isDraggingOver:u,draggingOverWith:p,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!0,snapshot:P,useClone:null}}),o=function(l,u){var c=u.droppableId,h=u.type,f=!u.isDropDisabled,p=u.renderClone;if(l.isDragging){var g=l.critical;if(!jm(h,g))return r;var b=pT(g,l.dimensions),R=tr(l.impact)===c;return s(c,f,R,R,b,p)}if(l.phase==="DROP_ANIMATING"){var P=l.completed;if(!jm(h,P.critical))return r;var x=pT(P.critical,l.dimensions);return s(c,f,RP(P.result)===c,tr(P.impact)===c,x,p)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var _=l.completed;if(!jm(h,_.critical))return r;var T=tr(_.impact)===c,L=!!(_.impact.at&&_.impact.at.type==="COMBINE"),F=_.critical.droppable.id===c;return T?L?e:r:F?e:r}return r};return o},Vq={updateViewportMaxScroll:qH};function Fq(){return document.body||ce(),document.body}var Uq={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Fq},MP=LA(jq,Vq,null,{context:J_,pure:!0,areStatePropsEqual:PP})(Oq);MP.defaultProps=Uq;function Bq(){const[t]=yf(),[e,r]=N.useState([]),[i,s]=N.useState(0),[o,a]=N.useState(!0),[l,u]=N.useState(null),[c,h]=N.useState(!1),[f,p]=N.useState(!1),[g,b]=N.useState("");N.useRef(null),N.useRef(null),N.useEffect(()=>{const L=t.get("keywords");L&&searchAndBuildPlaylist(L)},[t]);const R=L=>{const F=L==null?void 0:L.match(/embed\/([a-zA-Z0-9_-]+)/);return F?F[1]:null},P=L=>{if(!L.destination)return;const F=Array.from(e),[V]=F.splice(L.source.index,1);F.splice(L.destination.index,0,V);const D=F.map((I,E)=>({...I,playlistOrder:E}));r(D),x(D)},x=async L=>{try{const F=t.get("keywords"),V=Ns(dt,"keywordPlaylists",F);await sv(V,{items:L.map(D=>({documentName:D.documentName,playlistOrder:D.playlistOrder}))})}catch(F){console.error("Error saving playlist order:",F)}},_=()=>{p(!0),b(document.getElementById("overallSummaryContent").innerText)},T=async()=>{try{const L=t.get("keywords"),F=Ns(dt,"keywordSummaries",L);await sv(F,{summary:g}),document.getElementById("overallSummaryContent").innerText=g,p(!1)}catch(L){console.error("Error saving description:",L)}};return m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[m.jsx("div",{className:"lg:col-span-1",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Playlist Info"}),m.jsxs("p",{id:"totalDuration",children:["Total Duration: ",formatTime(getTotalPlaylistDuration(e))]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("h3",{className:"text-xl font-semibold",children:"Playlist Summary"}),m.jsx("button",{onClick:_,className:"text-blue-500 hover:text-blue-700",children:" Edit"})]}),f?m.jsxs("div",{className:"space-y-2",children:[m.jsx("textarea",{value:g,onChange:L=>b(L.target.value),className:"w-full h-40 p-2 border rounded"}),m.jsxs("div",{className:"flex justify-end space-x-2",children:[m.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),m.jsx("button",{onClick:T,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"})]})]}):m.jsx("p",{id:"overallSummaryContent",className:"text-gray-700"})]})]})}),m.jsx("div",{className:"lg:col-span-2",children:m.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:currentVideo&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("h2",{className:"text-2xl font-bold",children:currentVideo.name}),m.jsx("p",{className:"text-gray-600",children:currentVideo.role})]}),m.jsx("div",{id:"player",className:"w-full aspect-video mb-4"}),m.jsx(JW,{onDragEnd:P,children:m.jsx(MP,{droppableId:"timeline",direction:"horizontal",children:L=>m.jsx("div",{ref:L.innerRef,...L.droppableProps,className:"relative h-20 bg-gray-100 rounded mb-4",children:m.jsxs("div",{className:"absolute inset-0 flex",children:[e.map((F,V)=>m.jsx(Lq,{draggableId:`${F.documentName}-${V}`,index:V,children:(D,I)=>m.jsx("div",{ref:D.innerRef,...D.draggableProps,...D.dragHandleProps,className:`relative h-full cursor-move transition-colors
                                    ${V===i?"bg-blue-500":"bg-gray-300"}
                                    ${I.isDragging?"ring-2 ring-blue-400":""}`,style:{...D.draggableProps.style,width:`${LP(F)/$q(e)*100}%`},children:m.jsx("img",{src:`https://img.youtube.com/vi/${R(F.videoEmbedLink)}/default.jpg`,alt:"Thumbnail",className:"absolute inset-0 w-full h-full object-cover opacity-50"})})},`${F.documentName}-${V}`)),L.placeholder]})})})}),m.jsxs("div",{className:"flex justify-center space-x-4",children:[m.jsx("button",{onClick:handleSkipPrevious,disabled:i===0,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:m.jsx("span",{className:"material-icons",children:"skip_previous"})}),m.jsx("button",{onClick:handlePlayPause,className:"p-2 rounded-full bg-blue-500 hover:bg-blue-600 text-white",children:m.jsx("span",{id:"playPauseIcon",className:"material-icons",children:"pause"})}),m.jsx("button",{onClick:handleSkipNext,disabled:i===e.length-1,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:m.jsx("span",{className:"material-icons",children:"skip_next"})})]}),m.jsxs("div",{className:"mt-6",children:[m.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Summary"}),m.jsx("p",{className:"text-gray-700",children:currentVideo.summary})]})]})})})]})})}function LP(t){const e=convertTimestampToSeconds(extractStartTimestamp(t.timestamp));return convertTimestampToSeconds(extractStartTimestamp(t.timestamp.split(" - ")[1]))-e}function $q(t){return t.reduce((e,r)=>e+LP(r),0)}function zq(){const[t,e]=N.useState(!1),[r,i]=N.useState(null),[s,o]=N.useState(null),a=N.useRef(null),[l,u]=N.useState(null),[c,h]=N.useState(1),f=async(x,_)=>{try{e(!0),i(null);const T=prompt("Enter the name of the document for this interview:");if(!T){i("Document name is required");return}const L=await p(x),F=await g(L);await R(T.trim(),F),o(F),h(2)}catch(T){console.error("Error processing files:",T),i("Failed to process transcript")}finally{e(!1)}},p=x=>new Promise((_,T)=>{const L=new FileReader;L.onload=F=>_(F.target.result),L.onerror=F=>T(F),L.readAsText(x)});console.log(void 0);const g=async(x,_=3,T=2e3)=>{try{const V=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer undefined"},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:`
        You are an assistant that processes interview transcripts into structured summaries with timestamps and keywords.
        
        Always output the content in the following strict format:
        Overall Summary:
        [Provide a concise overall summary here.]
        
        Key Points:
        1. Title: [First key topic]
           Timestamp: [Start time - End time]
           Keywords: [Comma-separated list of keywords]
           Summary: [Provide a short summary of the first key topic.]
      `},{role:"user",content:`Here is a transcript:
${x}

Generate an overall summary, key points with timestamps, and keywords.`}],max_tokens:1e3})});if(!V.ok){if(V.status===429&&_>0)return console.warn(`Rate limit exceeded. Retrying in ${T}ms...`),await new Promise(I=>setTimeout(I,T)),g(x,_-1,T*2);throw new Error(`API request failed: ${V.statusText}`)}const D=await V.json();return b(D.choices[0].message.content)}catch(L){throw console.error("Error communicating with OpenAI API:",L),L}},b=x=>{const _=x.match(/Overall Summary:\s*(.+)/i),T=_?_[1].trim():"No summary found.",L=[],F=/\d+\.\s*Title:\s*(.+?)\s*Timestamp:\s*(.+?)\s*Keywords:\s*(.+?)\s*Summary:\s*(.+?)(?=\d+\.|$)/gs;let V;for(;(V=F.exec(x))!==null;)L.push({topic:V[1].trim(),timestamp:V[2].trim(),keywords:V[3].trim(),summary:V[4].trim()});return{overallSummary:T,keyPoints:L}},R=async(x,_)=>{try{const T=Ns(Ot(dt,"interviewSummaries"),x);await xx(T,{documentName:x,mainSummary:_.overallSummary,createdAt:new Date});for(const L of _.keyPoints){const F=L.topic.replace(/[^a-zA-Z0-9-_]/g,"_"),V=Ns(Ot(dt,"interviewSummaries",x,"subSummaries"),F);await xx(V,{topic:L.topic,timestamp:L.timestamp,keywords:L.keywords,summary:L.summary})}}catch(T){throw console.error("Error storing processed transcript:",T),T}},P=x=>{if(!a.current)return;const _=x.split(" - ")[0],T=_.split(":").map(Number);if(T.length!==2||T.some(isNaN)){console.error("Invalid timestamp format:",_);return}const L=T[0],F=T[1],V=L*60+F;isFinite(V)&&(a.current.currentTime=V,a.current.play())};return m.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("h1",{className:"text-2xl font-bold mb-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text",children:"Transcript Summarizer"}),m.jsx("p",{className:"text-base leading-relaxed text-gray-600 max-w-3xl",children:"Upload interview transcripts to generate AI-powered summaries with timestamps and keywords"})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[c===1&&m.jsxs("div",{className:"p-8",children:[m.jsxs("div",{className:"mb-8",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-900 flex items-center",children:[m.jsx(gC,{className:"mr-2 text-blue-600",size:20}),"Upload Interview Files"]}),m.jsxs("div",{className:"flex flex-col gap-6",children:[m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Transcript File (.txt)"}),m.jsx("div",{className:"flex items-center justify-center w-full",children:m.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer bg-white hover:bg-gray-100 transition-colors p-4",children:[m.jsxs("div",{className:"flex flex-col items-center justify-center",children:[m.jsx(Ex,{className:"w-10 h-10 mb-3 text-gray-400"}),m.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[m.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),m.jsx("p",{className:"text-xs text-gray-500",children:"Upload your interview transcript file (TXT)"})]}),m.jsx("input",{type:"file",accept:".txt",className:"hidden",onChange:x=>{var _;return((_=x.target.files)==null?void 0:_[0])&&f(x.target.files[0],null)}})]})})]}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Audio File (optional)"}),m.jsx("div",{className:"flex items-center justify-center w-full",children:m.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer bg-white hover:bg-gray-100 transition-colors p-4",children:[m.jsxs("div",{className:"flex flex-col items-center justify-center",children:[m.jsx(Ex,{className:"w-10 h-10 mb-3 text-gray-400"}),m.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[m.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),m.jsx("p",{className:"text-xs text-gray-500",children:"MP3, WAV, or other audio formats"})]}),m.jsx("input",{type:"file",accept:"audio/*",className:"hidden",onChange:x=>{var _;return((_=x.target.files)==null?void 0:_[0])&&u(URL.createObjectURL(x.target.files[0]))}})]})})]})]})]}),l&&m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[m.jsx("h3",{className:"text-base font-medium mb-3 text-gray-900",children:"Audio Preview"}),m.jsx("audio",{ref:a,src:l,controls:!0,className:"w-full"})]})]}),t&&m.jsxs("div",{className:"flex flex-col justify-center items-center py-20",children:[m.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-500 rounded-full animate-spin mb-4"}),m.jsx("p",{className:"text-gray-500 animate-pulse",children:"Processing transcript..."}),m.jsx("style",{children:`
              @keyframes spin {
                to { transform: rotate(360deg); }
              }
              @keyframes pulse {
                0%, 100% { opacity: 1; }
                50% { opacity: 0.5; }
              }
            `})]}),r&&m.jsx("div",{className:"m-8 bg-red-100 border border-red-300 text-red-700 px-6 py-4 rounded-lg",children:m.jsxs("div",{className:"flex",children:[m.jsx("svg",{className:"w-6 h-6 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Error"}),m.jsx("p",{className:"text-sm",children:r})]})]})}),c===2&&s&&m.jsxs("div",{children:[l&&m.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6",children:m.jsx("audio",{ref:a,src:l,controls:!0,className:"w-full"})}),m.jsxs("div",{className:"p-8 border-b border-gray-200",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Overall Summary"}),m.jsx("p",{className:"text-gray-600 leading-relaxed text-base",children:s.overallSummary})]}),m.jsxs("div",{className:"p-8",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:"Key Points"}),m.jsx("div",{className:"flex flex-col gap-6",children:s.keyPoints.map((x,_)=>m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 transition-all duration-300 shadow-sm hover:shadow-md",children:[m.jsxs("div",{className:"flex items-start mb-4",children:[m.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 mr-3 flex-shrink-0 font-semibold",children:_+1}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:x.topic})]}),m.jsxs("div",{className:"flex items-center mb-4 text-blue-600 hover:text-blue-800 cursor-pointer transition-colors",onClick:()=>P(x.timestamp),children:[m.jsx(b_,{size:16,className:"mr-2"}),m.jsx("span",{className:"font-medium",children:x.timestamp})]}),m.jsx("div",{className:"mb-4",children:m.jsxs("div",{className:"flex items-start mb-2",children:[m.jsx(x_,{size:16,className:"mr-2 text-gray-500 mt-0.5"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:x.keywords.split(",").map((T,L)=>m.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-xs rounded-full font-medium",children:T.trim()},L))})]})}),m.jsx("p",{className:"text-gray-600 leading-relaxed text-sm",children:x.summary})]},_))})]}),m.jsx("div",{className:"p-8 border-t border-gray-200 flex justify-center",children:m.jsxs("button",{onClick:()=>{h(1),o(null),u(null),i(null)},className:"flex items-center px-6 py-3 bg-gray-100 text-gray-600 font-medium rounded-lg hover:bg-gray-200 transition-colors",children:[m.jsx(b3,{className:"w-5 h-5 mr-2 transform rotate-180"}),"Process Another Transcript"]})})]})]})]})}function Hq(){const[t,e]=N.useState(""),r=qn(),i=s=>{s.preventDefault(),t.trim()?r(`/playlist-builder?keywords=${encodeURIComponent(t)}`):alert("Please enter at least one keyword.")};return m.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans flex flex-col items-center justify-center",children:[m.jsxs("div",{className:"w-full max-w-3xl text-center mb-16",children:[m.jsx("h1",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text",children:"Search Interviews"}),m.jsx("p",{className:"text-base leading-relaxed text-gray-600 mb-10 max-w-xl mx-auto",children:"Enter keywords separated by commas to find relevant interviews and create custom playlists"}),m.jsx("form",{onSubmit:i,className:"w-full",children:m.jsxs("div",{className:"relative w-full",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:m.jsx(vC,{className:"w-5 h-5 text-gray-500"})}),m.jsx("input",{type:"text",value:t,onChange:s=>e(s.target.value),placeholder:"civil rights, voting, education...",className:"w-full pl-12 pr-32 py-5 border border-gray-200 bg-white rounded-xl shadow-sm outline-none text-base text-gray-900 transition-all duration-300 focus:shadow-blue-300 focus:ring-2 focus:ring-blue-500"}),m.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-medium rounded-lg shadow-sm border-none cursor-pointer transition-all duration-300 hover:from-blue-700 hover:to-indigo-700 hover:shadow-md",children:"Search"})]})})]}),m.jsx("div",{className:"w-full max-w-3xl",children:m.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Popular Keywords"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:["civil rights","voting","education","segregation","protests","leadership","communities","legislation","equality","freedom"].map(s=>m.jsx("button",{onClick:()=>{e(s),r(`/playlist-builder?keywords=${encodeURIComponent(s)}`)},className:"px-4 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm border-none cursor-pointer transition-colors duration-200 hover:bg-blue-100 hover:text-blue-800",children:s},s))})]})})]})}function Wq(){const[t]=yf(),e=qn(),r=t.get("documentName"),[i,s]=N.useState(!0),[o,a]=N.useState(null),[l,u]=N.useState(null),[c,h]=N.useState([]),[f,p]=N.useState(null),[g,b]=N.useState(!1),[R,P]=N.useState(!1),[x,_]=N.useState(!1),[T,L]=N.useState(0),[F,V]=N.useState(0),[D,I]=N.useState(0),[E,w]=N.useState(null),[y,C]=N.useState(null),A=N.useRef(null),z=N.useRef(null),Q=te=>{if(!te)return null;const ue=te.match(/(?:embed\/|watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return ue?ue[1]:null},Z=te=>{if(!te)return 0;const xe=te.split(" - ")[0].replace(/[\[\]]/g,"").trim().split(":").map(Number);return xe.length===3?xe[0]*3600+xe[1]*60+xe[2]:xe.length===2?xe[0]*60+xe[1]:0},oe=te=>Array.isArray(te)?te:typeof te=="string"?te.split(",").map(ue=>ue.trim()):[],G=te=>{if(!c||c.length===0)return 0;for(let ue=c.length-1;ue>=0;ue--)if(Z(c[ue].timestamp)<=te)return ue;return 0};N.useEffect(()=>{if(!r){a("Document name is missing"),s(!1);return}async function te(){try{s(!0);const ue=Ns(dt,"interviewSummaries",r),xe=await iv(ue);if(!xe.exists()){a("Interview not found"),s(!1);return}const je=xe.data();u(je);const $e=Ot(dt,"interviewSummaries",r,"subSummaries"),tt=await Bt($e),M=[];tt.forEach(j=>{M.push({id:j.id,...j.data()})}),M.sort((j,U)=>Z(j.timestamp)-Z(U.timestamp)),h(M),s(!1)}catch(ue){console.error("Error fetching interview data:",ue),a("Failed to load interview data"),s(!1)}}te()},[r]),N.useEffect(()=>{if(window.YT&&window.YT.Player){P(!0);return}const te=document.createElement("script");te.src="https://www.youtube.com/iframe_api",te.async=!0,te.onload=()=>{window.YT&&window.YT.Player&&P(!0)},document.body.appendChild(te),window.onYouTubeIframeAPIReady=()=>{P(!0)}},[]),N.useEffect(()=>{if(!R||!(l!=null&&l.videoEmbedLink)||!y)return;const te=Q(l.videoEmbedLink);if(!te){console.error("Invalid YouTube video link");return}return A.current&&typeof A.current.destroy=="function"&&(A.current.destroy(),b(!1)),A.current=new window.YT.Player(y,{videoId:te,width:"100%",height:"100%",playerVars:{autoplay:0,controls:0,rel:0,modestbranding:1},events:{onReady:ue=>{b(!0),V(ue.target.getDuration()),console.log("Player is ready with duration:",ue.target.getDuration())},onStateChange:ue=>{_(ue.data===window.YT.PlayerState.PLAYING),ue.data===window.YT.PlayerState.ENDED&&_(!1)},onError:ue=>{console.error("YouTube player error:",ue.data)}}}),z.current=setInterval(()=>{if(A.current&&typeof A.current.getCurrentTime=="function"){const ue=A.current.getCurrentTime();L(ue);const xe=G(ue);xe!==D&&I(xe)}},500),()=>{z.current&&clearInterval(z.current),A.current&&typeof A.current.destroy=="function"&&(A.current.destroy(),A.current=null)}},[R,l,y]),N.useEffect(()=>{E!==null&&A.current&&typeof A.current.seekTo=="function"&&(A.current.seekTo(E,!0),w(null))},[E]);const K=te=>{console.log("Seeking to",te,"seconds"),w(te),A.current&&typeof A.current.seekTo=="function"&&(A.current.seekTo(te,!0),A.current.playVideo(),_(!0))},re=te=>{p(f===te?null:te)},se=()=>{A.current&&typeof A.current.playVideo=="function"&&(A.current.playVideo(),_(!0))},W=()=>{A.current&&typeof A.current.pauseVideo=="function"&&(A.current.pauseVideo(),_(!1))},$=()=>{if(D<c.length-1){const te=c[D+1],ue=Z(te.timestamp);K(ue),I(D+1)}},J=()=>{if(D>0){const te=c[D-1],ue=Z(te.timestamp);K(ue),I(D-1)}},X=({summary:te,index:ue,isOpen:xe,isActive:je})=>{const $e=N.useRef(null),[tt,M]=N.useState(0);N.useEffect(()=>{xe&&$e.current&&M($e.current.scrollHeight)},[xe]);const j=Z(te.timestamp),U=oe(te.keywords),q=ue===D;return m.jsxs("div",{className:`accordion-item border-b border-gray-200 ${q?"border-l-4 border-l-blue-500":""}`,children:[m.jsxs("button",{onClick:()=>re(ue),className:`w-full flex items-center justify-between p-4 text-left transition-colors ${xe?"bg-blue-50 text-blue-700":q?"bg-blue-50/50 text-blue-600":"text-gray-800 hover:bg-gray-50"}`,children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center font-bold mr-3 ${q?"bg-blue-500 text-white":"bg-blue-100 text-blue-700"}`,children:ue+1}),m.jsx("span",{className:"font-bold",children:te.topic})]}),xe?m.jsx(E3,{size:18}):m.jsx(_3,{size:18})]}),m.jsx("div",{style:{height:xe?tt||"auto":0,overflow:"hidden",transition:"height 0.3s ease",maxHeight:xe?"1000px":"0"},children:m.jsxs("div",{ref:$e,className:"p-4 bg-gray-50",children:[m.jsxs("button",{onClick:ie=>{ie.stopPropagation(),K(j)},className:`flex items-center mb-4 text-blue-600 hover:text-blue-800 transition-colors ${g?"cursor-pointer":"opacity-50 cursor-wait"}`,disabled:!g,children:[m.jsx(b_,{size:16,className:"mr-2"}),m.jsx("span",{className:"font-bold",children:te.timestamp?te.timestamp.split(" - ")[0].replace(/[\[\]]/g,"").trim():"Unknown time"})]}),U.length>0&&m.jsx("div",{className:"mb-4 text-sm flex flex-wrap",children:U.map((ie,me)=>m.jsx("span",{className:"mr-2 mb-2 px-2.5 py-0.5 bg-blue-100 text-blue-800 rounded-full text-xs cursor-pointer hover:bg-blue-200 transition-colors",onClick:Pe=>{Pe.stopPropagation(),e(`/playlist-builder?keywords=${encodeURIComponent(ie)}`)},children:ie},me))}),m.jsx("p",{className:"text-gray-700 leading-relaxed",children:te.summary}),m.jsx("div",{className:"mt-4",children:m.jsx("button",{className:"text-sm text-blue-600 hover:underline hover:text-blue-800 transition-colors",onClick:ie=>{ie.stopPropagation(),e(`/clip-player?documentName=${encodeURIComponent(r)}&clipId=${encodeURIComponent(te.id)}`)},children:" View this clip as a standalone page"})})]})})]})},de=te=>{if(isNaN(te))return"00:00";const ue=Math.floor(te/3600),xe=Math.floor(te%3600/60),je=Math.floor(te%60);return ue>0?`${ue.toString().padStart(2,"0")}:${xe.toString().padStart(2,"0")}:${je.toString().padStart(2,"0")}`:`${xe.toString().padStart(2,"0")}:${je.toString().padStart(2,"0")}`},ye=()=>c.map((te,ue)=>({id:te.id||ue,label:te.topic||`Segment ${ue+1}`,timestamp:te.timestamp,startSeconds:Z(te.timestamp),endSeconds:ue<c.length-1?Z(c[ue+1].timestamp):F,summary:te.summary}));if(i)return m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})});if(o)return m.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-xl",children:m.jsxs("p",{children:[m.jsx("strong",{children:"Error:"})," ",o]})});const Fe=ye(),Le=c.length>0;return m.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 p-6",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:(l==null?void 0:l.name)||r}),m.jsxs("p",{className:"text-gray-600",children:[(l==null?void 0:l.role)&&m.jsx("span",{className:"italic",children:l.role}),c.length>0&&m.jsx("span",{className:"mx-2 text-gray-400",children:""}),c.length>0&&m.jsxs("span",{children:[c.length," segments"]})]})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[m.jsxs("div",{className:"w-full max-w-2xl mx-auto relative rounded-lg overflow-hidden",style:{height:"360px"},children:[m.jsx("div",{className:"absolute inset-0 bg-black",ref:C}),!g&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 pointer-events-none",children:m.jsx("div",{className:"w-10 h-10 border-4 border-white/50 border-t-white rounded-full animate-spin"})})]}),Le&&g&&m.jsxs("div",{className:"mt-6 mb-4 w-full max-w-2xl mx-auto",children:[m.jsxs("div",{className:"relative w-full h-2 bg-gray-200 rounded-full overflow-hidden cursor-pointer",onClick:te=>{const ue=te.currentTarget.getBoundingClientRect(),je=(te.clientX-ue.left)/ue.width*F;K(je)},onMouseMove:te=>{if(te.buttons===1){const ue=te.currentTarget.getBoundingClientRect(),je=(te.clientX-ue.left)/ue.width*F;K(je)}},children:[m.jsx("div",{className:"absolute top-0 left-0 h-full bg-blue-500",style:{width:`${T/F*100}%`}}),Fe.map((te,ue)=>m.jsx("div",{className:"absolute top-0 w-0.5 h-full bg-gray-400 cursor-pointer",style:{left:`${te.startSeconds/F*100}%`},onClick:xe=>{xe.stopPropagation(),K(te.startSeconds)},title:te.label},ue))]}),m.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[m.jsx("span",{children:de(T)}),m.jsx("span",{children:de(F)})]})]}),m.jsx("div",{className:"w-full max-w-2xl mx-auto flex justify-center items-center py-3 mt-5",children:m.jsx(gA,{onPrevious:J,onPlay:se,onPause:W,onNext:$,isPlaying:x,hasPrevious:D>0,hasNext:D<c.length-1})}),Le&&c[D]&&m.jsxs("div",{className:"w-full max-w-2xl mx-auto mt-6 pt-4 border-t border-gray-200",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:c[D].topic||`Segment ${D+1}`}),oe(c[D].keywords).length>0&&m.jsx("div",{className:"mb-3 flex flex-wrap",children:oe(c[D].keywords).map((te,ue)=>m.jsx("span",{className:"mr-2 mb-2 px-2.5 py-0.5 bg-blue-100 text-blue-800 rounded-full text-xs cursor-pointer hover:bg-blue-200 transition-colors",onClick:()=>e(`/playlist-builder?keywords=${encodeURIComponent(te)}`),children:te},ue))}),m.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:m.jsx("p",{className:"m-0 text-base leading-relaxed text-gray-700",children:c[D].summary})})]})]}),m.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Overview"}),m.jsx("p",{className:"text-gray-700 leading-relaxed",children:(l==null?void 0:l.mainSummary)||"No summary available"})]})}),m.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[m.jsx("div",{className:"p-4 border-b border-gray-200",children:m.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Interview Segments"})}),c.map((te,ue)=>m.jsx(X,{summary:te,index:ue,isOpen:f===ue,isActive:D===ue},te.id||ue)),c.length===0&&m.jsx("div",{className:"p-6 text-center text-gray-500",children:"No segments available for this interview"})]})]})}function qq(){var x;const[t]=yf(),e=qn(),r=t.get("documentName"),i=t.get("clipId"),[s,o]=N.useState(null),[a,l]=N.useState(null),[u,c]=N.useState(null),[h,f]=N.useState(!1),p=N.useRef(null),g=_=>{const T=_==null?void 0:_.match(/(?:embed\/|watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return(T==null?void 0:T[1])||null},b=_=>{if(!_)return 0;const L=_.split(" - ")[0].replace(/[\[\]]/g,"").trim().split(":").map(Number);return L.length===3?L[0]*3600+L[1]*60+L[2]:L[0]*60+L[1]};N.useEffect(()=>{(async()=>{try{const T=await iv(Ns(dt,"interviewSummaries",r)),L=await iv(Ns(dt,"interviewSummaries",r,"subSummaries",i));if(!T.exists()||!L.exists()){c("Clip or interview not found");return}o(T.data()),l(L.data())}catch(T){console.error(T),c("Failed to load data")}})()},[r,i]),N.useEffect(()=>{if(window.YT&&window.YT.Player)return;const _=document.createElement("script");_.src="https://www.youtube.com/iframe_api",document.body.appendChild(_),window.onYouTubeIframeAPIReady=()=>R()},[]);const R=()=>{if(!(s!=null&&s.videoEmbedLink)||!p.current)return;const _=g(s.videoEmbedLink),T=b(a==null?void 0:a.timestamp);new window.YT.Player(p.current,{videoId:_,width:"100%",height:"360",playerVars:{autoplay:1,start:T,controls:1,modestbranding:1},events:{onReady:()=>f(!0)}})};if(N.useEffect(()=>{var _;s&&a&&((_=window.YT)!=null&&_.Player)&&R()},[s,a]),u)return m.jsx("div",{className:"p-6 text-red-600",children:u});if(!s||!a)return m.jsx("div",{className:"p-6",children:"Loading..."});const P=Array.isArray(a.keywords)?a.keywords:((x=a.keywords)==null?void 0:x.split(","))||[];return m.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-6",children:[m.jsx("div",{children:m.jsx("h1",{className:"text-3xl font-bold text-blue-700 hover:underline cursor-pointer",onClick:()=>e(`/interview-player?documentName=${encodeURIComponent(r)}`),children:s.name})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("h2",{className:"text-2xl font-semibold text-blue-800",children:a.topic}),m.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[m.jsx(b_,{size:16,className:"mr-2"}),m.jsx("span",{children:a.timestamp})]}),P.length>0&&m.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:P.map((_,T)=>m.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs flex items-center gap-1 cursor-pointer hover:bg-blue-200",onClick:()=>e(`/playlist-builder?keywords=${encodeURIComponent(_)}`),children:[m.jsx(x_,{size:12})," ",_]},T))})]}),m.jsx("div",{className:"rounded-lg overflow-hidden bg-black mt-6",children:m.jsx("div",{ref:p})}),m.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mt-4",children:m.jsx("p",{className:"text-gray-800 leading-relaxed",children:a.summary})}),s.role&&m.jsx("div",{className:"text-gray-600 text-lg mt-6 italic",children:s.role})]})}function Gq({onViewAllClips:t}){const[e,r]=N.useState(!0),[i,s]=N.useState(null),[o,a]=N.useState([]),[l,u]=N.useState(null),[c,h]=N.useState(""),[f,p]=N.useState([]),g=qn(),{cache:b,updateCache:R,addSearchToCache:P,getSearchFromCache:x}=N.useContext(mp);N.useEffect(()=>{b.keywords?(console.log("Using cached keyword data"),a(b.keywords),r(!1)):_()},[b.keywords]),N.useEffect(()=>{if(c){const y=x("keywords",c);if(y)console.log("Using cached keyword search results"),p(y);else{const C=o.filter(A=>A.keyword.toLowerCase().includes(c.toLowerCase()));p(C),P("keywords",c,C)}}else p(o)},[c,o]);const _=async()=>{try{r(!0);const y={},C=await Bt(Ot(dt,"interviewSummaries"));for(const z of C.docs){const Q=z.id,Z=z.data(),oe=Ot(dt,"interviewSummaries",Q,"subSummaries");(await Bt(oe)).forEach(K=>{const re=K.data();re.keywords&&re.keywords.split(",").map(W=>W.trim().toLowerCase()).forEach(W=>{y[W]||(y[W]={count:0,summaries:[]}),y[W].count++;const $={...re,id:K.id,documentName:Q,videoEmbedLink:Z.videoEmbedLink,personName:Z.name||"Unknown",thumbnailUrl:Z.videoEmbedLink?`https://img.youtube.com/vi/${T(Z.videoEmbedLink)}/mqdefault.jpg`:null};y[W].summaries.push($)})})}const A=Object.entries(y).filter(([z,Q])=>Q.count>1).map(([z,Q])=>{let Z=0;return Q.summaries.forEach(oe=>{if(oe.timestamp&&oe.timestamp.includes(" - ")){const G=L(oe.timestamp),K=L(oe.timestamp.split(" - ")[1]);Z+=Math.max(0,F(K)-F(G))}}),{keyword:z,count:Q.count,totalLengthSeconds:Z,summaries:Q.summaries}}).sort((z,Q)=>Q.count-z.count);a(A),p(A),R("keywords",A),r(!1)}catch(y){console.error("Error fetching keywords:",y),s("Failed to load keyword data"),r(!1)}},T=y=>{if(!y)return null;const C=/^.*(youtu.be\/|v\/|e\/|u\/\w+\/|embed\/|v=)([^#&?]*).*/,A=y.match(C);return A&&A[2].length===11?A[2]:null},L=y=>{const C=y.match(/(?:\[)?(\d{1,2}:\d{2}(?::\d{2})?)/);return C?C[1]:"00:00"},F=y=>{const C=y.split(":").map(Number);return C.length===2?C[0]*60+C[1]:C.length===3?C[0]*3600+C[1]*60+C[2]:0},V=y=>{u(l===y?null:y)},D=y=>{g(`/playlist-builder?keywords=${encodeURIComponent(y)}`)},I=y=>{g(`/playlist-editor?keywords=${encodeURIComponent(y)}`)},E=(y,C)=>{g(`/clip-player?documentName=${encodeURIComponent(y)}&clipId=${encodeURIComponent(C)}`)};if(e)return m.jsx("div",{className:"flex justify-center items-center h-64 bg-gray-50",children:m.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"})});if(i)return m.jsx("div",{className:"flex justify-center items-center h-64 bg-gray-50",children:m.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg shadow-sm",children:i})});return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"mb-6",children:m.jsxs("div",{className:"max-w-md",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter Keywords"}),m.jsx("input",{type:"text",placeholder:"Type to filter...",value:c,onChange:y=>h(y.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})}),m.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:f.length===0?m.jsx("div",{className:"p-6 text-center text-gray-500",children:"No keywords found matching your search."}):m.jsx("ul",{className:"list-none m-0 p-0 border-t border-gray-100",children:f.map(y=>m.jsx("li",{className:"border-b border-gray-100 transition-colors hover:bg-gray-50",children:m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-blue-600 mb-2 cursor-pointer transition-colors hover:text-blue-800",onClick:()=>V(y.keyword),children:y.keyword}),m.jsxs("div",{className:"my-2",children:[m.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-blue-100 text-blue-800 text-xs font-medium mr-2",children:[y.count," clips"]}),m.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-green-100 text-green-800 text-xs font-medium",children:[w(y.totalLengthSeconds)," total length"]})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs("button",{onClick:()=>D(y.keyword),className:"inline-flex items-center px-3 py-2 border-0 rounded-md bg-blue-600 text-white text-sm font-medium cursor-pointer transition-colors hover:bg-blue-700",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"mr-1.5",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Play"]}),m.jsxs("button",{onClick:()=>I(y.keyword),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md bg-white text-gray-600 text-sm font-medium cursor-pointer transition-colors hover:bg-gray-50",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"mr-1.5",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]})]})]}),l===y.keyword&&m.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h4",{className:"text-base font-medium text-gray-600",children:"Clips with this keyword:"}),m.jsxs("button",{onClick:()=>t(y.keyword),className:"text-blue-600 text-sm font-medium flex items-center hover:text-blue-800",children:["View all ",y.count," clips",m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-1",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:y.summaries.slice(0,6).map((C,A)=>m.jsxs("div",{className:"bg-gray-50 rounded-lg shadow overflow-hidden hover:shadow-md transition-shadow cursor-pointer",onClick:()=>E(C.documentName,C.id),children:[m.jsxs("div",{className:"relative pb-[56.25%] bg-gray-200",children:[C.thumbnailUrl?m.jsx("img",{src:C.thumbnailUrl,alt:C.topic||C.documentName,className:"absolute inset-0 w-full h-full object-cover"}):m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-300",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),m.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-3",children:m.jsx("span",{className:"text-white text-xs font-medium",children:C.timestamp})})]}),m.jsxs("div",{className:"p-3",children:[m.jsx("h4",{className:"text-sm font-medium text-blue-600 mb-1 line-clamp-1",children:C.topic||"Untitled Clip"}),m.jsx("p",{className:"text-xs text-gray-500 mb-2",children:C.personName}),m.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:C.summary})]})]},A))}),m.jsx("div",{className:"md:hidden mt-4 text-center",children:m.jsxs("button",{onClick:()=>t(y.keyword),className:"inline-flex items-center px-4 py-2 border-0 rounded-md bg-blue-600 text-white text-sm font-medium cursor-pointer transition-colors hover:bg-blue-700",children:["View all ",y.count," clips"]})})]})]})},y.keyword))})})]});function w(y){const C=Math.floor(y/3600),A=Math.floor(y%3600/60),z=y%60;return C>0?`${C}:${A.toString().padStart(2,"0")}:${z.toString().padStart(2,"0")}`:`${A}:${z.toString().padStart(2,"0")}`}}function Kq({initialSearchTerm:t=""}){const[e,r]=N.useState(t),[i,s]=N.useState([]),[o,a]=N.useState(!1),[l,u]=N.useState(!1),[c,h]=N.useState(null),f=qn(),{getSearchFromCache:p,addSearchToCache:g}=N.useContext(mp);N.useEffect(()=>{t&&(r(t),b(t))},[t]);const b=async(_=e)=>{if(!_.trim()){s([]),u(!1);return}u(!0);const T=p("clips",_);if(T){console.log("Using cached clip search results"),s(T);return}a(!0);try{const L=_.split(",").map(V=>V.trim().toLowerCase()),F=await R(L);s(F),g("clips",_,F)}catch(L){console.error("Error searching for clips:",L),h("Failed to search for clips")}finally{a(!1)}},R=async _=>{const T=await Bt(Ot(dt,"interviewSummaries")),L=[];for(const F of T.docs){const V=F.id,D=F.data(),I=D.videoEmbedLink,E=I?`https://img.youtube.com/vi/${P(I)}/mqdefault.jpg`:null,w=Ot(dt,"interviewSummaries",V,"subSummaries");(await Bt(w)).forEach(C=>{const A=C.data(),z=(A.keywords||"").split(",").map(Z=>Z.trim().toLowerCase());_.some(Z=>z.includes(Z))&&L.push({id:C.id,documentName:V,personName:D.name||"Unknown",...A,...D,thumbnailUrl:E})})}return L},P=_=>{if(!_)return null;const T=/^.*(youtu.be\/|v\/|e\/|u\/\w+\/|embed\/|v=)([^#&?]*).*/,L=_.match(T);return L&&L[2].length===11?L[2]:null},x=(_,T)=>{f(`/clip-player?documentName=${encodeURIComponent(_)}&clipId=${encodeURIComponent(T)}`)};return c?m.jsx("div",{className:"flex justify-center items-center h-64 bg-gray-50",children:m.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg shadow-sm",children:c})}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"mb-6",children:m.jsxs("div",{className:"max-w-lg",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Clips by Keywords"}),m.jsxs("div",{className:"flex",children:[m.jsx("input",{type:"text",placeholder:"Enter keywords (comma separated)...",value:e,onChange:_=>r(_.target.value),className:"flex-grow px-4 py-2.5 border border-gray-300 rounded-l-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",onKeyDown:_=>{_.key==="Enter"&&b()}}),m.jsx("button",{onClick:()=>b(),className:"px-4 py-2.5 bg-blue-600 text-white rounded-r-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:"Search"})]})]})}),m.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:o?m.jsx("div",{className:"p-12 flex justify-center",children:m.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"})}):l?i.length===0?m.jsx("div",{className:"p-6 text-center text-gray-500",children:"No clips found matching your search keywords."}):m.jsxs("div",{className:"p-4",children:[m.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Found ",i.length," clip",i.length!==1?"s":""]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(_=>m.jsxs("div",{className:"bg-gray-50 rounded-lg shadow overflow-hidden hover:shadow-md transition-shadow cursor-pointer",onClick:()=>x(_.documentName,_.id),children:[m.jsxs("div",{className:"relative pb-[56.25%] bg-gray-200",children:[_.thumbnailUrl?m.jsx("img",{src:_.thumbnailUrl,alt:_.topic||_.documentName,className:"absolute inset-0 w-full h-full object-cover"}):m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-300",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),m.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-3",children:m.jsx("span",{className:"text-white text-xs font-medium",children:_.timestamp})})]}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"text-base font-medium text-blue-600 mb-1 line-clamp-1",children:_.topic||"Untitled Clip"}),m.jsx("p",{className:"text-sm text-gray-500 mb-2 font-medium",children:_.personName}),m.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:_.summary}),m.jsx("div",{className:"flex flex-wrap gap-1",children:(_.keywords||"").split(",").map((T,L)=>m.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-blue-100 text-blue-800 text-xs font-medium",children:T.trim()},L))})]})]},_.id))})]}):m.jsx("div",{className:"p-6 text-center text-gray-500",children:"Enter keywords above to search for relevant clips."})})]})}function Yq(){const[t,e]=N.useState([]),[r,i]=N.useState(!0),[s,o]=N.useState(null),[a,l]=N.useState(""),[u,c]=N.useState([]),[h,f]=N.useState(null),[p,g]=N.useState(!1),b=qn(),{cache:R,updateCache:P}=N.useContext(mp);N.useEffect(()=>{R.people?(console.log("Using cached people data"),e(R.people),c(R.people),i(!1)):T()},[R.people]),N.useEffect(()=>{if(a){const y=t.filter(C=>C.name.toLowerCase().includes(a.toLowerCase()));c(y)}else c(t)},[a,t]),N.useEffect(()=>{h&&g(!0)},[h]);const x=()=>{g(!1)},_=y=>{const C=y==null?void 0:y.match(/embed\/([a-zA-Z0-9_-]+)/);return C?C[1]:null},T=async()=>{try{i(!0);const y=await Bt(Ot(dt,"interviewSummaries")),C=[];y.forEach(A=>{const z=A.data(),Q=_(z.videoEmbedLink);C.push({id:A.id,name:z.name||"Unknown Name",role:z.role||"Unknown Role",videoEmbedLink:z.videoEmbedLink,thumbnailUrl:Q?`https://img.youtube.com/vi/${Q}/hqdefault.jpg`:null})}),e(C),c(C),P("people",C),i(!1)}catch(y){console.error("Error fetching people:",y),o("Failed to load interview subjects"),i(!1)}},L=()=>{if(!h)return;const y=u.findIndex(C=>C.id===h.id);y>0?f(u[y-1]):f(u[u.length-1])},F=()=>{if(!h)return;const y=u.findIndex(C=>C.id===h.id);y<u.length-1?f(u[y+1]):f(u[0])};N.useEffect(()=>{const y=C=>{p&&(C.key==="ArrowLeft"?L():C.key==="ArrowRight"?F():C.key==="Escape"&&x())};return window.addEventListener("keydown",y),()=>window.removeEventListener("keydown",y)},[p,h,u]);const V=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("polyline",{points:"15 18 9 12 15 6"})}),D=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("polyline",{points:"9 18 15 12 9 6"})}),I=()=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),m.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),E=({person:y,isOpen:C,onClose:A,onPrev:z,onNext:Q})=>{if(!C||!y)return null;const Z=oe=>{oe.target===oe.currentTarget&&A()};return m.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:[m.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60",onClick:Z}),m.jsx("button",{className:"absolute left-4 md:left-8 z-50 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:oe=>{oe.stopPropagation(),z()},"aria-label":"Previous person",children:m.jsx(V,{})}),m.jsx("button",{className:"absolute right-4 md:right-8 z-50 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:oe=>{oe.stopPropagation(),Q()},"aria-label":"Next person",children:m.jsx(D,{})}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-md w-full overflow-hidden animate-fadeIn z-50 relative",children:[m.jsxs("div",{className:"relative",children:[y.thumbnailUrl&&m.jsx("div",{className:"w-full h-48 overflow-hidden",children:m.jsx("img",{src:y.thumbnailUrl,alt:y.name,className:"w-full h-full object-cover scale-125"})}),m.jsx("button",{className:"absolute top-2 right-2 bg-black bg-opacity-60 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:A,"aria-label":"Close",children:m.jsx(I,{})})]}),m.jsxs("div",{className:"p-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:y.name}),m.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:y.role}),m.jsx("button",{onClick:()=>b(`/interview-player?documentName=${encodeURIComponent(y.id)}`),className:"w-full bg-blue-600 text-white px-4 py-3 rounded-md hover:bg-blue-700 transition-colors duration-200 font-medium",children:"View Interview"})]})]})]})},w=({person:y})=>{const C=(h==null?void 0:h.id)===y.id;return m.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[m.jsx("div",{}),m.jsx("div",{className:`w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 rounded-md 
                    overflow-hidden shadow-md cursor-pointer transition-all duration-200
                    ${C?"ring-4 ring-blue-500":"hover:ring-2 hover:ring-blue-300"}`,onClick:()=>f(y),style:{touchAction:"manipulation"},children:y.thumbnailUrl?m.jsx("div",{className:"w-full h-full overflow-hidden",children:m.jsx("img",{src:y.thumbnailUrl,alt:y.name,className:"w-full h-full object-cover object-center scale-150",draggable:!1,loading:"lazy"})}):m.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:m.jsx("span",{className:"text-gray-400 text-xs",children:"No photo"})})}),m.jsx("div",{className:"text-center w-full",children:m.jsx("p",{className:`text-xs sm:text-sm truncate max-w-full ${C?"font-bold text-blue-600":"text-gray-700"}`,children:y.name})})]})};return r?m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):s?m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"text-red-500",children:s})}):t.length===0?m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"text-gray-500",children:"No interview subjects found"})}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"mb-6 max-w-xl mx-auto",children:m.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:a?`${u.length} of ${t.length} People`:`${t.length} People`}),m.jsx("input",{type:"text",value:a,onChange:y=>l(y.target.value),placeholder:"Search by name...",className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring focus:border-blue-300"})]})})}),m.jsx("div",{className:"bg-white rounded-xl shadow-md p-6",children:m.jsx("div",{className:"max-w-6xl mx-auto",children:m.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 gap-x-4 gap-y-6",children:u.map(y=>m.jsx(w,{person:y},y.id))})})}),m.jsx(E,{person:h,isOpen:p,onClose:x,onPrev:L,onNext:F})]})}const mp=N.createContext(null);function Xq(){const[t,e]=N.useState("keywords"),[r,i]=N.useState(""),[s,o]=N.useState({keywordCount:0,clipCount:0,totalDuration:0,peopleCount:0}),[a,l]=N.useState({keywords:null,keywordSearches:{},clipSearches:{},people:null,lastFetched:{keywords:null,people:null}});N.useEffect(()=>{try{const g=sessionStorage.getItem("directoryCache");if(g){const b=JSON.parse(g),P=new Date().getTime()-(b.timestamp||0),x=60*60*1e3;P<x?(l(_=>({..._,...b.data})),console.log("Restored cache from session storage")):(console.log("Cache expired, will fetch fresh data"),sessionStorage.removeItem("directoryCache"))}}catch(g){console.error("Error loading cache from session storage:",g)}},[]),N.useEffect(()=>{try{if(!a.keywords&&!a.people&&Object.keys(a.keywordSearches).length===0&&Object.keys(a.clipSearches).length===0)return;sessionStorage.setItem("directoryCache",JSON.stringify({data:a,timestamp:new Date().getTime()}))}catch(g){console.error("Error saving cache to session storage:",g)}},[a]),N.useEffect(()=>{var b,R,P,x;const g={keywordCount:((b=a.keywords)==null?void 0:b.length)||0,clipCount:((R=a.keywords)==null?void 0:R.reduce((_,T)=>_+T.count,0))||0,totalDuration:((P=a.keywords)==null?void 0:P.reduce((_,T)=>_+T.totalLengthSeconds,0))||0,peopleCount:((x=a.people)==null?void 0:x.length)||0};o(g)},[a.keywords,a.people]);const u=(g,b)=>{l(R=>({...R,[g]:b,lastFetched:{...R.lastFetched,[g]:new Date().getTime()}}))},c=(g,b,R)=>{const P=g==="keywords"?"keywordSearches":"clipSearches";l(x=>({...x,[P]:{...x[P],[b.toLowerCase()]:{results:R,timestamp:new Date().getTime()}}}))},h=(g,b)=>{const P=a[g==="keywords"?"keywordSearches":"clipSearches"][b.toLowerCase()];if(!P)return null;const _=new Date().getTime()-P.timestamp,T=30*60*1e3;return _<T?P.results:null},f=g=>{e("clips"),setTimeout(()=>{i(g?g.trim():"")},10)},p=g=>{const b=Math.floor(g/3600),R=Math.floor(g%3600/60),P=g%60;return b>0?`${b}:${R.toString().padStart(2,"0")}:${P.toString().padStart(2,"0")}`:`${R}:${P.toString().padStart(2,"0")}`};return m.jsx(mp.Provider,{value:{cache:a,updateCache:u,addSearchToCache:c,getSearchFromCache:h},children:m.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Directory"}),m.jsx("p",{className:"text-base text-gray-600 max-w-3xl leading-relaxed",children:"Browse and search through keywords, clips, and people from the Civil Rights History Collection."})]}),m.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[m.jsxs("div",{className:"flex flex-col items-center p-4 bg-blue-50 rounded-lg",children:[m.jsx("div",{className:"text-2xl font-bold text-blue-800 mb-2",children:s.keywordCount}),m.jsx("div",{className:"text-sm text-gray-500",children:"Total Keywords"})]}),m.jsxs("div",{className:"flex flex-col items-center p-4 bg-green-50 rounded-lg",children:[m.jsx("div",{className:"text-2xl font-bold text-green-800 mb-2",children:s.clipCount}),m.jsx("div",{className:"text-sm text-gray-500",children:"Total Clips"})]}),m.jsxs("div",{className:"flex flex-col items-center p-4 bg-purple-50 rounded-lg",children:[m.jsx("div",{className:"text-2xl font-bold text-purple-800 mb-2",children:p(s.totalDuration)}),m.jsx("div",{className:"text-sm text-gray-500",children:"Total Content Duration"})]}),m.jsxs("div",{className:"flex flex-col items-center p-4 bg-amber-50 rounded-lg",children:[m.jsx("div",{className:"text-2xl font-bold text-amber-800 mb-2",children:s.peopleCount}),m.jsx("div",{className:"text-sm text-gray-500",children:"Total People"})]})]})}),m.jsx("div",{className:"border-b border-gray-200 mb-6",children:m.jsxs("nav",{className:"-mb-px flex space-x-8",children:[m.jsx("button",{onClick:()=>e("keywords"),className:`pb-4 px-1 border-b-2 font-medium text-sm ${t==="keywords"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Keywords"}),m.jsx("button",{onClick:()=>e("clips"),className:`pb-4 px-1 border-b-2 font-medium text-sm ${t==="clips"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Clips"}),m.jsx("button",{onClick:()=>e("people"),className:`pb-4 px-1 border-b-2 font-medium text-sm ${t==="people"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"People"})]})}),t==="keywords"&&m.jsx(Gq,{onViewAllClips:f}),t==="clips"&&m.jsx(Kq,{initialSearchTerm:r}),t==="people"&&m.jsx(Yq,{})]})})}function Qq(){return m.jsxs(E2,{children:[m.jsx(Nr,{path:"/login",element:m.jsx(Z5,{})}),m.jsx(Nr,{path:"/",element:m.jsx(qi,{children:m.jsx(Wi,{children:m.jsx(J5,{})})})}),m.jsx(Nr,{path:"/playlist-builder",element:m.jsx(qi,{children:m.jsx(Wi,{children:m.jsx(az,{})})})}),m.jsx(Nr,{path:"/playlist-editor",element:m.jsx(qi,{children:m.jsx(Wi,{children:m.jsx(Bq,{})})})}),m.jsx(Nr,{path:"/content-directory",element:m.jsx(qi,{children:m.jsx(Wi,{children:m.jsx(Xq,{})})})}),m.jsx(Nr,{path:"/transcript-summary",element:m.jsx(qi,{children:m.jsx(Wi,{children:m.jsx(zq,{})})})}),m.jsx(Nr,{path:"/search",element:m.jsx(qi,{children:m.jsx(Wi,{children:m.jsx(Hq,{})})})}),m.jsx(Nr,{path:"/interview-player",element:m.jsx(qi,{children:m.jsx(Wi,{children:m.jsx(Wq,{})})})}),m.jsx(Nr,{path:"/clip-player",element:m.jsx(qi,{children:m.jsx(Wi,{children:m.jsx(qq,{})})})}),m.jsx(Nr,{path:"*",element:m.jsx(j1,{to:"/",replace:!0})})]})}Vm.createRoot(document.getElementById("root")).render(m.jsx(Be.StrictMode,{children:m.jsx(K2,{children:m.jsx(h3,{children:m.jsx(p3,{children:m.jsx(Qq,{})})})})}));export{Be as R,n$ as _,xy as a,jc as c,Ua as g,m as j,N as r};
