const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MapComponent-B8wuiXjp.js","assets/leaflet-src-CagAOcw8.js","assets/index-CSysyOVV.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var sf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ua(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var RL={exports:{}},Ym={},PL={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nh=Symbol.for("react.element"),SB=Symbol.for("react.portal"),TB=Symbol.for("react.fragment"),IB=Symbol.for("react.strict_mode"),CB=Symbol.for("react.profiler"),kB=Symbol.for("react.provider"),NB=Symbol.for("react.context"),AB=Symbol.for("react.forward_ref"),RB=Symbol.for("react.suspense"),PB=Symbol.for("react.memo"),DB=Symbol.for("react.lazy"),dC=Symbol.iterator;function MB(t){return t===null||typeof t!="object"?null:(t=dC&&t[dC]||t["@@iterator"],typeof t=="function"?t:null)}var DL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ML=Object.assign,LL={};function Cu(t,e,r){this.props=t,this.context=e,this.refs=LL,this.updater=r||DL}Cu.prototype.isReactComponent={};Cu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Cu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function OL(){}OL.prototype=Cu.prototype;function _2(t,e,r){this.props=t,this.context=e,this.refs=LL,this.updater=r||DL}var w2=_2.prototype=new OL;w2.constructor=_2;ML(w2,Cu.prototype);w2.isPureReactComponent=!0;var hC=Array.isArray,jL=Object.prototype.hasOwnProperty,b2={current:null},VL={key:!0,ref:!0,__self:!0,__source:!0};function FL(t,e,r){var i,s={},a=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)jL.call(e,i)&&!VL.hasOwnProperty(i)&&(s[i]=e[i]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:nh,type:t,key:a,ref:o,props:s,_owner:b2.current}}function LB(t,e){return{$$typeof:nh,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function x2(t){return typeof t=="object"&&t!==null&&t.$$typeof===nh}function OB(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var fC=/\/+/g;function Xv(t,e){return typeof t=="object"&&t!==null&&t.key!=null?OB(""+t.key):e.toString(36)}function Xf(t,e,r,i,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case nh:case SB:o=!0}}if(o)return o=t,s=s(o),t=i===""?"."+Xv(o,0):i,hC(s)?(r="",t!=null&&(r=t.replace(fC,"$&/")+"/"),Xf(s,e,r,"",function(c){return c})):s!=null&&(x2(s)&&(s=LB(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(fC,"$&/")+"/")+t)),e.push(s)),1;if(o=0,i=i===""?".":i+":",hC(t))for(var l=0;l<t.length;l++){a=t[l];var u=i+Xv(a,l);o+=Xf(a,e,r,u,s)}else if(u=MB(t),typeof u=="function")for(t=u.call(t),l=0;!(a=t.next()).done;)a=a.value,u=i+Xv(a,l++),o+=Xf(a,e,r,u,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function af(t,e,r){if(t==null)return t;var i=[],s=0;return Xf(t,i,"","",function(a){return e.call(r,a,s++)}),i}function jB(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ir={current:null},Qf={transition:null},VB={ReactCurrentDispatcher:ir,ReactCurrentBatchConfig:Qf,ReactCurrentOwner:b2};function $L(){throw Error("act(...) is not supported in production builds of React.")}tt.Children={map:af,forEach:function(t,e,r){af(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return af(t,function(){e++}),e},toArray:function(t){return af(t,function(e){return e})||[]},only:function(t){if(!x2(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};tt.Component=Cu;tt.Fragment=TB;tt.Profiler=CB;tt.PureComponent=_2;tt.StrictMode=IB;tt.Suspense=RB;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VB;tt.act=$L;tt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=ML({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=b2.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)jL.call(e,u)&&!VL.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:nh,type:t.type,key:s,ref:a,props:i,_owner:o}};tt.createContext=function(t){return t={$$typeof:NB,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kB,_context:t},t.Consumer=t};tt.createElement=FL;tt.createFactory=function(t){var e=FL.bind(null,t);return e.type=t,e};tt.createRef=function(){return{current:null}};tt.forwardRef=function(t){return{$$typeof:AB,render:t}};tt.isValidElement=x2;tt.lazy=function(t){return{$$typeof:DB,_payload:{_status:-1,_result:t},_init:jB}};tt.memo=function(t,e){return{$$typeof:PB,type:t,compare:e===void 0?null:e}};tt.startTransition=function(t){var e=Qf.transition;Qf.transition={};try{t()}finally{Qf.transition=e}};tt.unstable_act=$L;tt.useCallback=function(t,e){return ir.current.useCallback(t,e)};tt.useContext=function(t){return ir.current.useContext(t)};tt.useDebugValue=function(){};tt.useDeferredValue=function(t){return ir.current.useDeferredValue(t)};tt.useEffect=function(t,e){return ir.current.useEffect(t,e)};tt.useId=function(){return ir.current.useId()};tt.useImperativeHandle=function(t,e,r){return ir.current.useImperativeHandle(t,e,r)};tt.useInsertionEffect=function(t,e){return ir.current.useInsertionEffect(t,e)};tt.useLayoutEffect=function(t,e){return ir.current.useLayoutEffect(t,e)};tt.useMemo=function(t,e){return ir.current.useMemo(t,e)};tt.useReducer=function(t,e,r){return ir.current.useReducer(t,e,r)};tt.useRef=function(t){return ir.current.useRef(t)};tt.useState=function(t){return ir.current.useState(t)};tt.useSyncExternalStore=function(t,e,r){return ir.current.useSyncExternalStore(t,e,r)};tt.useTransition=function(){return ir.current.useTransition()};tt.version="18.3.1";PL.exports=tt;var S=PL.exports;const te=Ua(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var FB=S,$B=Symbol.for("react.element"),UB=Symbol.for("react.fragment"),BB=Object.prototype.hasOwnProperty,zB=FB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qB={key:!0,ref:!0,__self:!0,__source:!0};function UL(t,e,r){var i,s={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)BB.call(e,i)&&!qB.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:$B,type:t,key:a,ref:o,props:s,_owner:zB.current}}Ym.Fragment=UB;Ym.jsx=UL;Ym.jsxs=UL;RL.exports=Ym;var p=RL.exports,ux={},BL={exports:{}},Lr={},zL={exports:{}},qL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,F){var W=q.length;q.push(F);e:for(;0<W;){var Q=W-1>>>1,H=q[Q];if(0<s(H,F))q[Q]=F,q[W]=H,W=Q;else break e}}function r(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var F=q[0],W=q.pop();if(W!==F){q[0]=W;e:for(var Q=0,H=q.length,X=H>>>1;Q<X;){var J=2*(Q+1)-1,ee=q[J],se=J+1,ce=q[se];if(0>s(ee,W))se<H&&0>s(ce,ee)?(q[Q]=ce,q[se]=W,Q=se):(q[Q]=ee,q[J]=W,Q=J);else if(se<H&&0>s(ce,W))q[Q]=ce,q[se]=W,Q=se;else break e}}return F}function s(q,F){var W=q.sortIndex-F.sortIndex;return W!==0?W:q.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],d=1,h=null,f=3,m=!1,v=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(q){for(var F=r(c);F!==null;){if(F.callback===null)i(c);else if(F.startTime<=q)i(c),F.sortIndex=F.expirationTime,e(u,F);else break;F=r(c)}}function N(q){if(y=!1,E(q),!v)if(r(u)!==null)v=!0,U(M);else{var F=r(c);F!==null&&Y(N,F.startTime-q)}}function M(q,F){v=!1,y&&(y=!1,_(D),D=-1),m=!0;var W=f;try{for(E(F),h=r(u);h!==null&&(!(h.expirationTime>F)||q&&!x());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,f=h.priorityLevel;var H=Q(h.expirationTime<=F);F=t.unstable_now(),typeof H=="function"?h.callback=H:h===r(u)&&i(u),E(F)}else i(u);h=r(u)}if(h!==null)var X=!0;else{var J=r(c);J!==null&&Y(N,J.startTime-F),X=!1}return X}finally{h=null,f=W,m=!1}}var O=!1,A=null,D=-1,T=5,I=-1;function x(){return!(t.unstable_now()-I<T)}function R(){if(A!==null){var q=t.unstable_now();I=q;var F=!0;try{F=A(!0,q)}finally{F?P():(O=!1,A=null)}}else O=!1}var P;if(typeof w=="function")P=function(){w(R)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,$=j.port2;j.port1.onmessage=R,P=function(){$.postMessage(null)}}else P=function(){b(R,0)};function U(q){A=q,O||(O=!0,P())}function Y(q,F){D=b(function(){q(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,U(M))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(q){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var W=f;f=F;try{return q()}finally{f=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,F){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var W=f;f=q;try{return F()}finally{f=W}},t.unstable_scheduleCallback=function(q,F,W){var Q=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Q+W:Q):W=Q,q){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=W+H,q={id:d++,callback:F,priorityLevel:q,startTime:W,expirationTime:H,sortIndex:-1},W>Q?(q.sortIndex=W,e(c,q),r(u)===null&&q===r(c)&&(y?(_(D),D=-1):y=!0,Y(N,W-Q))):(q.sortIndex=H,e(u,q),v||m||(v=!0,U(M))),q},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(q){var F=f;return function(){var W=f;f=F;try{return q.apply(this,arguments)}finally{f=W}}}})(qL);zL.exports=qL;var HB=zL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WB=S,Pr=HB;function ve(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var HL=new Set,hd={};function $o(t,e){Zl(t,e),Zl(t+"Capture",e)}function Zl(t,e){for(hd[t]=e,t=0;t<e.length;t++)HL.add(e[t])}var ys=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cx=Object.prototype.hasOwnProperty,GB=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pC={},mC={};function KB(t){return cx.call(mC,t)?!0:cx.call(pC,t)?!1:GB.test(t)?mC[t]=!0:(pC[t]=!0,!1)}function YB(t,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function XB(t,e,r,i){if(e===null||typeof e>"u"||YB(t,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sr(t,e,r,i,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Mn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Mn[t]=new sr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Mn[e]=new sr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Mn[t]=new sr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Mn[t]=new sr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Mn[t]=new sr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Mn[t]=new sr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Mn[t]=new sr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Mn[t]=new sr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Mn[t]=new sr(t,5,!1,t.toLowerCase(),null,!1,!1)});var E2=/[\-:]([a-z])/g;function S2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(E2,S2);Mn[e]=new sr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(E2,S2);Mn[e]=new sr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(E2,S2);Mn[e]=new sr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Mn[t]=new sr(t,1,!1,t.toLowerCase(),null,!1,!1)});Mn.xlinkHref=new sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Mn[t]=new sr(t,1,!1,t.toLowerCase(),null,!0,!0)});function T2(t,e,r,i){var s=Mn.hasOwnProperty(e)?Mn[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(XB(e,r,s,i)&&(r=null),i||s===null?KB(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,i=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,i?t.setAttributeNS(i,e,r):t.setAttribute(e,r))))}var Rs=WB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,of=Symbol.for("react.element"),El=Symbol.for("react.portal"),Sl=Symbol.for("react.fragment"),I2=Symbol.for("react.strict_mode"),dx=Symbol.for("react.profiler"),WL=Symbol.for("react.provider"),GL=Symbol.for("react.context"),C2=Symbol.for("react.forward_ref"),hx=Symbol.for("react.suspense"),fx=Symbol.for("react.suspense_list"),k2=Symbol.for("react.memo"),Ys=Symbol.for("react.lazy"),KL=Symbol.for("react.offscreen"),gC=Symbol.iterator;function rc(t){return t===null||typeof t!="object"?null:(t=gC&&t[gC]||t["@@iterator"],typeof t=="function"?t:null)}var Ht=Object.assign,Qv;function Cc(t){if(Qv===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Qv=e&&e[1]||""}return`
`+Qv+t}var Jv=!1;function Zv(t,e){if(!t||Jv)return"";Jv=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),a=i.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Jv=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Cc(t):""}function QB(t){switch(t.tag){case 5:return Cc(t.type);case 16:return Cc("Lazy");case 13:return Cc("Suspense");case 19:return Cc("SuspenseList");case 0:case 2:case 15:return t=Zv(t.type,!1),t;case 11:return t=Zv(t.type.render,!1),t;case 1:return t=Zv(t.type,!0),t;default:return""}}function px(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Sl:return"Fragment";case El:return"Portal";case dx:return"Profiler";case I2:return"StrictMode";case hx:return"Suspense";case fx:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case GL:return(t.displayName||"Context")+".Consumer";case WL:return(t._context.displayName||"Context")+".Provider";case C2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k2:return e=t.displayName||null,e!==null?e:px(t.type)||"Memo";case Ys:e=t._payload,t=t._init;try{return px(t(e))}catch{}}return null}function JB(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return px(e);case 8:return e===I2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Aa(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function YL(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function ZB(t){var e=YL(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function lf(t){t._valueTracker||(t._valueTracker=ZB(t))}function XL(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return t&&(i=YL(t)?t.checked?"true":"false":t.value),t=i,t!==r?(e.setValue(t),!0):!1}function kp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mx(t,e){var r=e.checked;return Ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function vC(t,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=Aa(e.value!=null?e.value:r),t._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function QL(t,e){e=e.checked,e!=null&&T2(t,"checked",e,!1)}function gx(t,e){QL(t,e);var r=Aa(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vx(t,e.type,r):e.hasOwnProperty("defaultValue")&&vx(t,e.type,Aa(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function yC(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function vx(t,e,r){(e!=="number"||kp(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var kc=Array.isArray;function Vl(t,e,r,i){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&i&&(t[r].defaultSelected=!0)}else{for(r=""+Aa(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function yx(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ve(91));return Ht({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function _C(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ve(92));if(kc(r)){if(1<r.length)throw Error(ve(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Aa(r)}}function JL(t,e){var r=Aa(e.value),i=Aa(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),i!=null&&(t.defaultValue=""+i)}function wC(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ZL(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _x(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ZL(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var uf,e6=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(uf=uf||document.createElement("div"),uf.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=uf.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fd(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Gc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ez=["Webkit","ms","Moz","O"];Object.keys(Gc).forEach(function(t){ez.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Gc[e]=Gc[t]})});function t6(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Gc.hasOwnProperty(t)&&Gc[t]?(""+e).trim():e+"px"}function n6(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=t6(r,e[r],i);r==="float"&&(r="cssFloat"),i?t.setProperty(r,s):t[r]=s}}var tz=Ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wx(t,e){if(e){if(tz[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ve(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ve(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ve(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ve(62))}}function bx(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xx=null;function N2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ex=null,Fl=null,$l=null;function bC(t){if(t=sh(t)){if(typeof Ex!="function")throw Error(ve(280));var e=t.stateNode;e&&(e=eg(e),Ex(t.stateNode,t.type,e))}}function r6(t){Fl?$l?$l.push(t):$l=[t]:Fl=t}function i6(){if(Fl){var t=Fl,e=$l;if($l=Fl=null,bC(t),e)for(t=0;t<e.length;t++)bC(e[t])}}function s6(t,e){return t(e)}function a6(){}var ey=!1;function o6(t,e,r){if(ey)return t(e,r);ey=!0;try{return s6(t,e,r)}finally{ey=!1,(Fl!==null||$l!==null)&&(a6(),i6())}}function pd(t,e){var r=t.stateNode;if(r===null)return null;var i=eg(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ve(231,e,typeof r));return r}var Sx=!1;if(ys)try{var ic={};Object.defineProperty(ic,"passive",{get:function(){Sx=!0}}),window.addEventListener("test",ic,ic),window.removeEventListener("test",ic,ic)}catch{Sx=!1}function nz(t,e,r,i,s,a,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var Kc=!1,Np=null,Ap=!1,Tx=null,rz={onError:function(t){Kc=!0,Np=t}};function iz(t,e,r,i,s,a,o,l,u){Kc=!1,Np=null,nz.apply(rz,arguments)}function sz(t,e,r,i,s,a,o,l,u){if(iz.apply(this,arguments),Kc){if(Kc){var c=Np;Kc=!1,Np=null}else throw Error(ve(198));Ap||(Ap=!0,Tx=c)}}function Uo(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function l6(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function xC(t){if(Uo(t)!==t)throw Error(ve(188))}function az(t){var e=t.alternate;if(!e){if(e=Uo(t),e===null)throw Error(ve(188));return e!==t?null:t}for(var r=t,i=e;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(i=s.return,i!==null){r=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return xC(s),t;if(a===i)return xC(s),e;a=a.sibling}throw Error(ve(188))}if(r.return!==i.return)r=s,i=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,i=a;break}if(l===i){o=!0,i=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,i=s;break}if(l===i){o=!0,i=a,r=s;break}l=l.sibling}if(!o)throw Error(ve(189))}}if(r.alternate!==i)throw Error(ve(190))}if(r.tag!==3)throw Error(ve(188));return r.stateNode.current===r?t:e}function u6(t){return t=az(t),t!==null?c6(t):null}function c6(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=c6(t);if(e!==null)return e;t=t.sibling}return null}var d6=Pr.unstable_scheduleCallback,EC=Pr.unstable_cancelCallback,oz=Pr.unstable_shouldYield,lz=Pr.unstable_requestPaint,Jt=Pr.unstable_now,uz=Pr.unstable_getCurrentPriorityLevel,A2=Pr.unstable_ImmediatePriority,h6=Pr.unstable_UserBlockingPriority,Rp=Pr.unstable_NormalPriority,cz=Pr.unstable_LowPriority,f6=Pr.unstable_IdlePriority,Xm=null,Di=null;function dz(t){if(Di&&typeof Di.onCommitFiberRoot=="function")try{Di.onCommitFiberRoot(Xm,t,void 0,(t.current.flags&128)===128)}catch{}}var pi=Math.clz32?Math.clz32:pz,hz=Math.log,fz=Math.LN2;function pz(t){return t>>>=0,t===0?32:31-(hz(t)/fz|0)|0}var cf=64,df=4194304;function Nc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pp(t,e){var r=t.pendingLanes;if(r===0)return 0;var i=0,s=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?i=Nc(l):(a&=o,a!==0&&(i=Nc(a)))}else o=r&~s,o!==0?i=Nc(o):a!==0&&(i=Nc(a));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(i&4&&(i|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)r=31-pi(e),s=1<<r,i|=t[r],e&=~s;return i}function mz(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gz(t,e){for(var r=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-pi(a),l=1<<o,u=s[o];u===-1?(!(l&r)||l&i)&&(s[o]=mz(l,e)):u<=e&&(t.expiredLanes|=l),a&=~l}}function Ix(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function p6(){var t=cf;return cf<<=1,!(cf&4194240)&&(cf=64),t}function ty(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function rh(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pi(e),t[e]=r}function vz(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-pi(r),a=1<<s;e[s]=0,i[s]=-1,t[s]=-1,r&=~a}}function R2(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var i=31-pi(r),s=1<<i;s&e|t[i]&e&&(t[i]|=e),r&=~s}}var _t=0;function m6(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var g6,P2,v6,y6,_6,Cx=!1,hf=[],ha=null,fa=null,pa=null,md=new Map,gd=new Map,ea=[],yz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function TC(t,e){switch(t){case"focusin":case"focusout":ha=null;break;case"dragenter":case"dragleave":fa=null;break;case"mouseover":case"mouseout":pa=null;break;case"pointerover":case"pointerout":md.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gd.delete(e.pointerId)}}function sc(t,e,r,i,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:a,targetContainers:[s]},e!==null&&(e=sh(e),e!==null&&P2(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function _z(t,e,r,i,s){switch(e){case"focusin":return ha=sc(ha,t,e,r,i,s),!0;case"dragenter":return fa=sc(fa,t,e,r,i,s),!0;case"mouseover":return pa=sc(pa,t,e,r,i,s),!0;case"pointerover":var a=s.pointerId;return md.set(a,sc(md.get(a)||null,t,e,r,i,s)),!0;case"gotpointercapture":return a=s.pointerId,gd.set(a,sc(gd.get(a)||null,t,e,r,i,s)),!0}return!1}function w6(t){var e=ho(t.target);if(e!==null){var r=Uo(e);if(r!==null){if(e=r.tag,e===13){if(e=l6(r),e!==null){t.blockedOn=e,_6(t.priority,function(){v6(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jf(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=kx(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var i=new r.constructor(r.type,r);xx=i,r.target.dispatchEvent(i),xx=null}else return e=sh(r),e!==null&&P2(e),t.blockedOn=r,!1;e.shift()}return!0}function IC(t,e,r){Jf(t)&&r.delete(e)}function wz(){Cx=!1,ha!==null&&Jf(ha)&&(ha=null),fa!==null&&Jf(fa)&&(fa=null),pa!==null&&Jf(pa)&&(pa=null),md.forEach(IC),gd.forEach(IC)}function ac(t,e){t.blockedOn===e&&(t.blockedOn=null,Cx||(Cx=!0,Pr.unstable_scheduleCallback(Pr.unstable_NormalPriority,wz)))}function vd(t){function e(s){return ac(s,t)}if(0<hf.length){ac(hf[0],t);for(var r=1;r<hf.length;r++){var i=hf[r];i.blockedOn===t&&(i.blockedOn=null)}}for(ha!==null&&ac(ha,t),fa!==null&&ac(fa,t),pa!==null&&ac(pa,t),md.forEach(e),gd.forEach(e),r=0;r<ea.length;r++)i=ea[r],i.blockedOn===t&&(i.blockedOn=null);for(;0<ea.length&&(r=ea[0],r.blockedOn===null);)w6(r),r.blockedOn===null&&ea.shift()}var Ul=Rs.ReactCurrentBatchConfig,Dp=!0;function bz(t,e,r,i){var s=_t,a=Ul.transition;Ul.transition=null;try{_t=1,D2(t,e,r,i)}finally{_t=s,Ul.transition=a}}function xz(t,e,r,i){var s=_t,a=Ul.transition;Ul.transition=null;try{_t=4,D2(t,e,r,i)}finally{_t=s,Ul.transition=a}}function D2(t,e,r,i){if(Dp){var s=kx(t,e,r,i);if(s===null)dy(t,e,i,Mp,r),TC(t,i);else if(_z(s,t,e,r,i))i.stopPropagation();else if(TC(t,i),e&4&&-1<yz.indexOf(t)){for(;s!==null;){var a=sh(s);if(a!==null&&g6(a),a=kx(t,e,r,i),a===null&&dy(t,e,i,Mp,r),a===s)break;s=a}s!==null&&i.stopPropagation()}else dy(t,e,i,null,r)}}var Mp=null;function kx(t,e,r,i){if(Mp=null,t=N2(i),t=ho(t),t!==null)if(e=Uo(t),e===null)t=null;else if(r=e.tag,r===13){if(t=l6(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Mp=t,null}function b6(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(uz()){case A2:return 1;case h6:return 4;case Rp:case cz:return 16;case f6:return 536870912;default:return 16}default:return 16}}var la=null,M2=null,Zf=null;function x6(){if(Zf)return Zf;var t,e=M2,r=e.length,i,s="value"in la?la.value:la.textContent,a=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(i=1;i<=o&&e[r-i]===s[a-i];i++);return Zf=s.slice(t,1<i?1-i:void 0)}function ep(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ff(){return!0}function CC(){return!1}function Or(t){function e(r,i,s,a,o){this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ff:CC,this.isPropagationStopped=CC,this}return Ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ff)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ff)},persist:function(){},isPersistent:ff}),e}var ku={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},L2=Or(ku),ih=Ht({},ku,{view:0,detail:0}),Ez=Or(ih),ny,ry,oc,Qm=Ht({},ih,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:O2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oc&&(oc&&t.type==="mousemove"?(ny=t.screenX-oc.screenX,ry=t.screenY-oc.screenY):ry=ny=0,oc=t),ny)},movementY:function(t){return"movementY"in t?t.movementY:ry}}),kC=Or(Qm),Sz=Ht({},Qm,{dataTransfer:0}),Tz=Or(Sz),Iz=Ht({},ih,{relatedTarget:0}),iy=Or(Iz),Cz=Ht({},ku,{animationName:0,elapsedTime:0,pseudoElement:0}),kz=Or(Cz),Nz=Ht({},ku,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Az=Or(Nz),Rz=Ht({},ku,{data:0}),NC=Or(Rz),Pz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Dz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Lz(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Mz[t])?!!e[t]:!1}function O2(){return Lz}var Oz=Ht({},ih,{key:function(t){if(t.key){var e=Pz[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ep(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Dz[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:O2,charCode:function(t){return t.type==="keypress"?ep(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ep(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),jz=Or(Oz),Vz=Ht({},Qm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),AC=Or(Vz),Fz=Ht({},ih,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:O2}),$z=Or(Fz),Uz=Ht({},ku,{propertyName:0,elapsedTime:0,pseudoElement:0}),Bz=Or(Uz),zz=Ht({},Qm,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qz=Or(zz),Hz=[9,13,27,32],j2=ys&&"CompositionEvent"in window,Yc=null;ys&&"documentMode"in document&&(Yc=document.documentMode);var Wz=ys&&"TextEvent"in window&&!Yc,E6=ys&&(!j2||Yc&&8<Yc&&11>=Yc),RC=" ",PC=!1;function S6(t,e){switch(t){case"keyup":return Hz.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function T6(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Tl=!1;function Gz(t,e){switch(t){case"compositionend":return T6(e);case"keypress":return e.which!==32?null:(PC=!0,RC);case"textInput":return t=e.data,t===RC&&PC?null:t;default:return null}}function Kz(t,e){if(Tl)return t==="compositionend"||!j2&&S6(t,e)?(t=x6(),Zf=M2=la=null,Tl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return E6&&e.locale!=="ko"?null:e.data;default:return null}}var Yz={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function DC(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Yz[t.type]:e==="textarea"}function I6(t,e,r,i){r6(i),e=Lp(e,"onChange"),0<e.length&&(r=new L2("onChange","change",null,r,i),t.push({event:r,listeners:e}))}var Xc=null,yd=null;function Xz(t){j6(t,0)}function Jm(t){var e=kl(t);if(XL(e))return t}function Qz(t,e){if(t==="change")return e}var C6=!1;if(ys){var sy;if(ys){var ay="oninput"in document;if(!ay){var MC=document.createElement("div");MC.setAttribute("oninput","return;"),ay=typeof MC.oninput=="function"}sy=ay}else sy=!1;C6=sy&&(!document.documentMode||9<document.documentMode)}function LC(){Xc&&(Xc.detachEvent("onpropertychange",k6),yd=Xc=null)}function k6(t){if(t.propertyName==="value"&&Jm(yd)){var e=[];I6(e,yd,t,N2(t)),o6(Xz,e)}}function Jz(t,e,r){t==="focusin"?(LC(),Xc=e,yd=r,Xc.attachEvent("onpropertychange",k6)):t==="focusout"&&LC()}function Zz(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jm(yd)}function e7(t,e){if(t==="click")return Jm(e)}function t7(t,e){if(t==="input"||t==="change")return Jm(e)}function n7(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vi=typeof Object.is=="function"?Object.is:n7;function _d(t,e){if(vi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!cx.call(e,s)||!vi(t[s],e[s]))return!1}return!0}function OC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jC(t,e){var r=OC(t);t=0;for(var i;r;){if(r.nodeType===3){if(i=t+r.textContent.length,t<=e&&i>=e)return{node:r,offset:e-t};t=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=OC(r)}}function N6(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?N6(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function A6(){for(var t=window,e=kp();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=kp(t.document)}return e}function V2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function r7(t){var e=A6(),r=t.focusedElem,i=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&N6(r.ownerDocument.documentElement,r)){if(i!==null&&V2(r)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,a=Math.min(i.start,s);i=i.end===void 0?a:Math.min(i.end,s),!t.extend&&a>i&&(s=i,i=a,a=s),s=jC(r,a);var o=jC(r,i);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var i7=ys&&"documentMode"in document&&11>=document.documentMode,Il=null,Nx=null,Qc=null,Ax=!1;function VC(t,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ax||Il==null||Il!==kp(i)||(i=Il,"selectionStart"in i&&V2(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Qc&&_d(Qc,i)||(Qc=i,i=Lp(Nx,"onSelect"),0<i.length&&(e=new L2("onSelect","select",null,e,r),t.push({event:e,listeners:i}),e.target=Il)))}function pf(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Cl={animationend:pf("Animation","AnimationEnd"),animationiteration:pf("Animation","AnimationIteration"),animationstart:pf("Animation","AnimationStart"),transitionend:pf("Transition","TransitionEnd")},oy={},R6={};ys&&(R6=document.createElement("div").style,"AnimationEvent"in window||(delete Cl.animationend.animation,delete Cl.animationiteration.animation,delete Cl.animationstart.animation),"TransitionEvent"in window||delete Cl.transitionend.transition);function Zm(t){if(oy[t])return oy[t];if(!Cl[t])return t;var e=Cl[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in R6)return oy[t]=e[r];return t}var P6=Zm("animationend"),D6=Zm("animationiteration"),M6=Zm("animationstart"),L6=Zm("transitionend"),O6=new Map,FC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ba(t,e){O6.set(t,e),$o(e,[t])}for(var ly=0;ly<FC.length;ly++){var uy=FC[ly],s7=uy.toLowerCase(),a7=uy[0].toUpperCase()+uy.slice(1);Ba(s7,"on"+a7)}Ba(P6,"onAnimationEnd");Ba(D6,"onAnimationIteration");Ba(M6,"onAnimationStart");Ba("dblclick","onDoubleClick");Ba("focusin","onFocus");Ba("focusout","onBlur");Ba(L6,"onTransitionEnd");Zl("onMouseEnter",["mouseout","mouseover"]);Zl("onMouseLeave",["mouseout","mouseover"]);Zl("onPointerEnter",["pointerout","pointerover"]);Zl("onPointerLeave",["pointerout","pointerover"]);$o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$o("onBeforeInput",["compositionend","keypress","textInput","paste"]);$o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),o7=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ac));function $C(t,e,r){var i=t.type||"unknown-event";t.currentTarget=r,sz(i,e,void 0,t),t.currentTarget=null}function j6(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var i=t[r],s=i.event;i=i.listeners;e:{var a=void 0;if(e)for(var o=i.length-1;0<=o;o--){var l=i[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==a&&s.isPropagationStopped())break e;$C(s,l,c),a=u}else for(o=0;o<i.length;o++){if(l=i[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==a&&s.isPropagationStopped())break e;$C(s,l,c),a=u}}}if(Ap)throw t=Tx,Ap=!1,Tx=null,t}function Dt(t,e){var r=e[Lx];r===void 0&&(r=e[Lx]=new Set);var i=t+"__bubble";r.has(i)||(V6(e,t,2,!1),r.add(i))}function cy(t,e,r){var i=0;e&&(i|=4),V6(r,t,i,e)}var mf="_reactListening"+Math.random().toString(36).slice(2);function wd(t){if(!t[mf]){t[mf]=!0,HL.forEach(function(r){r!=="selectionchange"&&(o7.has(r)||cy(r,!1,t),cy(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mf]||(e[mf]=!0,cy("selectionchange",!1,e))}}function V6(t,e,r,i){switch(b6(e)){case 1:var s=bz;break;case 4:s=xz;break;default:s=D2}r=s.bind(null,e,r,t),s=void 0,!Sx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function dy(t,e,r,i,s){var a=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ho(l),o===null)return;if(u=o.tag,u===5||u===6){i=a=o;continue e}l=l.parentNode}}i=i.return}o6(function(){var c=a,d=N2(r),h=[];e:{var f=O6.get(t);if(f!==void 0){var m=L2,v=t;switch(t){case"keypress":if(ep(r)===0)break e;case"keydown":case"keyup":m=jz;break;case"focusin":v="focus",m=iy;break;case"focusout":v="blur",m=iy;break;case"beforeblur":case"afterblur":m=iy;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=kC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Tz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=$z;break;case P6:case D6:case M6:m=kz;break;case L6:m=Bz;break;case"scroll":m=Ez;break;case"wheel":m=qz;break;case"copy":case"cut":case"paste":m=Az;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=AC}var y=(e&4)!==0,b=!y&&t==="scroll",_=y?f!==null?f+"Capture":null:f;y=[];for(var w=c,E;w!==null;){E=w;var N=E.stateNode;if(E.tag===5&&N!==null&&(E=N,_!==null&&(N=pd(w,_),N!=null&&y.push(bd(w,N,E)))),b)break;w=w.return}0<y.length&&(f=new m(f,v,null,r,d),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&r!==xx&&(v=r.relatedTarget||r.fromElement)&&(ho(v)||v[_s]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=r.relatedTarget||r.toElement,m=c,v=v?ho(v):null,v!==null&&(b=Uo(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(y=kC,N="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(y=AC,N="onPointerLeave",_="onPointerEnter",w="pointer"),b=m==null?f:kl(m),E=v==null?f:kl(v),f=new y(N,w+"leave",m,r,d),f.target=b,f.relatedTarget=E,N=null,ho(d)===c&&(y=new y(_,w+"enter",v,r,d),y.target=E,y.relatedTarget=b,N=y),b=N,m&&v)t:{for(y=m,_=v,w=0,E=y;E;E=ll(E))w++;for(E=0,N=_;N;N=ll(N))E++;for(;0<w-E;)y=ll(y),w--;for(;0<E-w;)_=ll(_),E--;for(;w--;){if(y===_||_!==null&&y===_.alternate)break t;y=ll(y),_=ll(_)}y=null}else y=null;m!==null&&UC(h,f,m,y,!1),v!==null&&b!==null&&UC(h,b,v,y,!0)}}e:{if(f=c?kl(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var M=Qz;else if(DC(f))if(C6)M=t7;else{M=Zz;var O=Jz}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=e7);if(M&&(M=M(t,c))){I6(h,M,r,d);break e}O&&O(t,f,c),t==="focusout"&&(O=f._wrapperState)&&O.controlled&&f.type==="number"&&vx(f,"number",f.value)}switch(O=c?kl(c):window,t){case"focusin":(DC(O)||O.contentEditable==="true")&&(Il=O,Nx=c,Qc=null);break;case"focusout":Qc=Nx=Il=null;break;case"mousedown":Ax=!0;break;case"contextmenu":case"mouseup":case"dragend":Ax=!1,VC(h,r,d);break;case"selectionchange":if(i7)break;case"keydown":case"keyup":VC(h,r,d)}var A;if(j2)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Tl?S6(t,r)&&(D="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(D="onCompositionStart");D&&(E6&&r.locale!=="ko"&&(Tl||D!=="onCompositionStart"?D==="onCompositionEnd"&&Tl&&(A=x6()):(la=d,M2="value"in la?la.value:la.textContent,Tl=!0)),O=Lp(c,D),0<O.length&&(D=new NC(D,t,null,r,d),h.push({event:D,listeners:O}),A?D.data=A:(A=T6(r),A!==null&&(D.data=A)))),(A=Wz?Gz(t,r):Kz(t,r))&&(c=Lp(c,"onBeforeInput"),0<c.length&&(d=new NC("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=A))}j6(h,e)})}function bd(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Lp(t,e){for(var r=e+"Capture",i=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=pd(t,r),a!=null&&i.unshift(bd(t,a,s)),a=pd(t,e),a!=null&&i.push(bd(t,a,s))),t=t.return}return i}function ll(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function UC(t,e,r,i,s){for(var a=e._reactName,o=[];r!==null&&r!==i;){var l=r,u=l.alternate,c=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&c!==null&&(l=c,s?(u=pd(r,a),u!=null&&o.unshift(bd(r,u,l))):s||(u=pd(r,a),u!=null&&o.push(bd(r,u,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var l7=/\r\n?/g,u7=/\u0000|\uFFFD/g;function BC(t){return(typeof t=="string"?t:""+t).replace(l7,`
`).replace(u7,"")}function gf(t,e,r){if(e=BC(e),BC(t)!==e&&r)throw Error(ve(425))}function Op(){}var Rx=null,Px=null;function Dx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Mx=typeof setTimeout=="function"?setTimeout:void 0,c7=typeof clearTimeout=="function"?clearTimeout:void 0,zC=typeof Promise=="function"?Promise:void 0,d7=typeof queueMicrotask=="function"?queueMicrotask:typeof zC<"u"?function(t){return zC.resolve(null).then(t).catch(h7)}:Mx;function h7(t){setTimeout(function(){throw t})}function hy(t,e){var r=e,i=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(i===0){t.removeChild(s),vd(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=s}while(r);vd(e)}function ma(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function qC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Nu=Math.random().toString(36).slice(2),Ri="__reactFiber$"+Nu,xd="__reactProps$"+Nu,_s="__reactContainer$"+Nu,Lx="__reactEvents$"+Nu,f7="__reactListeners$"+Nu,p7="__reactHandles$"+Nu;function ho(t){var e=t[Ri];if(e)return e;for(var r=t.parentNode;r;){if(e=r[_s]||r[Ri]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=qC(t);t!==null;){if(r=t[Ri])return r;t=qC(t)}return e}t=r,r=t.parentNode}return null}function sh(t){return t=t[Ri]||t[_s],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function kl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ve(33))}function eg(t){return t[xd]||null}var Ox=[],Nl=-1;function za(t){return{current:t}}function Mt(t){0>Nl||(t.current=Ox[Nl],Ox[Nl]=null,Nl--)}function kt(t,e){Nl++,Ox[Nl]=t.current,t.current=e}var Ra={},Kn=za(Ra),pr=za(!1),So=Ra;function eu(t,e){var r=t.type.contextTypes;if(!r)return Ra;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=e[a];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function mr(t){return t=t.childContextTypes,t!=null}function jp(){Mt(pr),Mt(Kn)}function HC(t,e,r){if(Kn.current!==Ra)throw Error(ve(168));kt(Kn,e),kt(pr,r)}function F6(t,e,r){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(ve(108,JB(t)||"Unknown",s));return Ht({},r,i)}function Vp(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ra,So=Kn.current,kt(Kn,t),kt(pr,pr.current),!0}function WC(t,e,r){var i=t.stateNode;if(!i)throw Error(ve(169));r?(t=F6(t,e,So),i.__reactInternalMemoizedMergedChildContext=t,Mt(pr),Mt(Kn),kt(Kn,t)):Mt(pr),kt(pr,r)}var is=null,tg=!1,fy=!1;function $6(t){is===null?is=[t]:is.push(t)}function m7(t){tg=!0,$6(t)}function qa(){if(!fy&&is!==null){fy=!0;var t=0,e=_t;try{var r=is;for(_t=1;t<r.length;t++){var i=r[t];do i=i(!0);while(i!==null)}is=null,tg=!1}catch(s){throw is!==null&&(is=is.slice(t+1)),d6(A2,qa),s}finally{_t=e,fy=!1}}return null}var Al=[],Rl=0,Fp=null,$p=0,Ur=[],Br=0,To=null,ss=1,as="";function ro(t,e){Al[Rl++]=$p,Al[Rl++]=Fp,Fp=t,$p=e}function U6(t,e,r){Ur[Br++]=ss,Ur[Br++]=as,Ur[Br++]=To,To=t;var i=ss;t=as;var s=32-pi(i)-1;i&=~(1<<s),r+=1;var a=32-pi(e)+s;if(30<a){var o=s-s%5;a=(i&(1<<o)-1).toString(32),i>>=o,s-=o,ss=1<<32-pi(e)+s|r<<s|i,as=a+t}else ss=1<<a|r<<s|i,as=t}function F2(t){t.return!==null&&(ro(t,1),U6(t,1,0))}function $2(t){for(;t===Fp;)Fp=Al[--Rl],Al[Rl]=null,$p=Al[--Rl],Al[Rl]=null;for(;t===To;)To=Ur[--Br],Ur[Br]=null,as=Ur[--Br],Ur[Br]=null,ss=Ur[--Br],Ur[Br]=null}var kr=null,Tr=null,Vt=!1,ci=null;function B6(t,e){var r=Hr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function GC(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,kr=t,Tr=ma(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,kr=t,Tr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=To!==null?{id:ss,overflow:as}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Hr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,kr=t,Tr=null,!0):!1;default:return!1}}function jx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Vx(t){if(Vt){var e=Tr;if(e){var r=e;if(!GC(t,e)){if(jx(t))throw Error(ve(418));e=ma(r.nextSibling);var i=kr;e&&GC(t,e)?B6(i,r):(t.flags=t.flags&-4097|2,Vt=!1,kr=t)}}else{if(jx(t))throw Error(ve(418));t.flags=t.flags&-4097|2,Vt=!1,kr=t}}}function KC(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;kr=t}function vf(t){if(t!==kr)return!1;if(!Vt)return KC(t),Vt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Dx(t.type,t.memoizedProps)),e&&(e=Tr)){if(jx(t))throw z6(),Error(ve(418));for(;e;)B6(t,e),e=ma(e.nextSibling)}if(KC(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ve(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Tr=ma(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Tr=null}}else Tr=kr?ma(t.stateNode.nextSibling):null;return!0}function z6(){for(var t=Tr;t;)t=ma(t.nextSibling)}function tu(){Tr=kr=null,Vt=!1}function U2(t){ci===null?ci=[t]:ci.push(t)}var g7=Rs.ReactCurrentBatchConfig;function lc(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ve(309));var i=r.stateNode}if(!i)throw Error(ve(147,t));var s=i,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(ve(284));if(!r._owner)throw Error(ve(290,t))}return t}function yf(t,e){throw t=Object.prototype.toString.call(e),Error(ve(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function YC(t){var e=t._init;return e(t._payload)}function q6(t){function e(_,w){if(t){var E=_.deletions;E===null?(_.deletions=[w],_.flags|=16):E.push(w)}}function r(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function i(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function s(_,w){return _=_a(_,w),_.index=0,_.sibling=null,_}function a(_,w,E){return _.index=E,t?(E=_.alternate,E!==null?(E=E.index,E<w?(_.flags|=2,w):E):(_.flags|=2,w)):(_.flags|=1048576,w)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,w,E,N){return w===null||w.tag!==6?(w=wy(E,_.mode,N),w.return=_,w):(w=s(w,E),w.return=_,w)}function u(_,w,E,N){var M=E.type;return M===Sl?d(_,w,E.props.children,N,E.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ys&&YC(M)===w.type)?(N=s(w,E.props),N.ref=lc(_,w,E),N.return=_,N):(N=op(E.type,E.key,E.props,null,_.mode,N),N.ref=lc(_,w,E),N.return=_,N)}function c(_,w,E,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=by(E,_.mode,N),w.return=_,w):(w=s(w,E.children||[]),w.return=_,w)}function d(_,w,E,N,M){return w===null||w.tag!==7?(w=bo(E,_.mode,N,M),w.return=_,w):(w=s(w,E),w.return=_,w)}function h(_,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=wy(""+w,_.mode,E),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case of:return E=op(w.type,w.key,w.props,null,_.mode,E),E.ref=lc(_,null,w),E.return=_,E;case El:return w=by(w,_.mode,E),w.return=_,w;case Ys:var N=w._init;return h(_,N(w._payload),E)}if(kc(w)||rc(w))return w=bo(w,_.mode,E,null),w.return=_,w;yf(_,w)}return null}function f(_,w,E,N){var M=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return M!==null?null:l(_,w,""+E,N);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case of:return E.key===M?u(_,w,E,N):null;case El:return E.key===M?c(_,w,E,N):null;case Ys:return M=E._init,f(_,w,M(E._payload),N)}if(kc(E)||rc(E))return M!==null?null:d(_,w,E,N,null);yf(_,E)}return null}function m(_,w,E,N,M){if(typeof N=="string"&&N!==""||typeof N=="number")return _=_.get(E)||null,l(w,_,""+N,M);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case of:return _=_.get(N.key===null?E:N.key)||null,u(w,_,N,M);case El:return _=_.get(N.key===null?E:N.key)||null,c(w,_,N,M);case Ys:var O=N._init;return m(_,w,E,O(N._payload),M)}if(kc(N)||rc(N))return _=_.get(E)||null,d(w,_,N,M,null);yf(w,N)}return null}function v(_,w,E,N){for(var M=null,O=null,A=w,D=w=0,T=null;A!==null&&D<E.length;D++){A.index>D?(T=A,A=null):T=A.sibling;var I=f(_,A,E[D],N);if(I===null){A===null&&(A=T);break}t&&A&&I.alternate===null&&e(_,A),w=a(I,w,D),O===null?M=I:O.sibling=I,O=I,A=T}if(D===E.length)return r(_,A),Vt&&ro(_,D),M;if(A===null){for(;D<E.length;D++)A=h(_,E[D],N),A!==null&&(w=a(A,w,D),O===null?M=A:O.sibling=A,O=A);return Vt&&ro(_,D),M}for(A=i(_,A);D<E.length;D++)T=m(A,_,D,E[D],N),T!==null&&(t&&T.alternate!==null&&A.delete(T.key===null?D:T.key),w=a(T,w,D),O===null?M=T:O.sibling=T,O=T);return t&&A.forEach(function(x){return e(_,x)}),Vt&&ro(_,D),M}function y(_,w,E,N){var M=rc(E);if(typeof M!="function")throw Error(ve(150));if(E=M.call(E),E==null)throw Error(ve(151));for(var O=M=null,A=w,D=w=0,T=null,I=E.next();A!==null&&!I.done;D++,I=E.next()){A.index>D?(T=A,A=null):T=A.sibling;var x=f(_,A,I.value,N);if(x===null){A===null&&(A=T);break}t&&A&&x.alternate===null&&e(_,A),w=a(x,w,D),O===null?M=x:O.sibling=x,O=x,A=T}if(I.done)return r(_,A),Vt&&ro(_,D),M;if(A===null){for(;!I.done;D++,I=E.next())I=h(_,I.value,N),I!==null&&(w=a(I,w,D),O===null?M=I:O.sibling=I,O=I);return Vt&&ro(_,D),M}for(A=i(_,A);!I.done;D++,I=E.next())I=m(A,_,D,I.value,N),I!==null&&(t&&I.alternate!==null&&A.delete(I.key===null?D:I.key),w=a(I,w,D),O===null?M=I:O.sibling=I,O=I);return t&&A.forEach(function(R){return e(_,R)}),Vt&&ro(_,D),M}function b(_,w,E,N){if(typeof E=="object"&&E!==null&&E.type===Sl&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case of:e:{for(var M=E.key,O=w;O!==null;){if(O.key===M){if(M=E.type,M===Sl){if(O.tag===7){r(_,O.sibling),w=s(O,E.props.children),w.return=_,_=w;break e}}else if(O.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Ys&&YC(M)===O.type){r(_,O.sibling),w=s(O,E.props),w.ref=lc(_,O,E),w.return=_,_=w;break e}r(_,O);break}else e(_,O);O=O.sibling}E.type===Sl?(w=bo(E.props.children,_.mode,N,E.key),w.return=_,_=w):(N=op(E.type,E.key,E.props,null,_.mode,N),N.ref=lc(_,w,E),N.return=_,_=N)}return o(_);case El:e:{for(O=E.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){r(_,w.sibling),w=s(w,E.children||[]),w.return=_,_=w;break e}else{r(_,w);break}else e(_,w);w=w.sibling}w=by(E,_.mode,N),w.return=_,_=w}return o(_);case Ys:return O=E._init,b(_,w,O(E._payload),N)}if(kc(E))return v(_,w,E,N);if(rc(E))return y(_,w,E,N);yf(_,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(r(_,w.sibling),w=s(w,E),w.return=_,_=w):(r(_,w),w=wy(E,_.mode,N),w.return=_,_=w),o(_)):r(_,w)}return b}var nu=q6(!0),H6=q6(!1),Up=za(null),Bp=null,Pl=null,B2=null;function z2(){B2=Pl=Bp=null}function q2(t){var e=Up.current;Mt(Up),t._currentValue=e}function Fx(t,e,r){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===r)break;t=t.return}}function Bl(t,e){Bp=t,B2=Pl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(hr=!0),t.firstContext=null)}function Jr(t){var e=t._currentValue;if(B2!==t)if(t={context:t,memoizedValue:e,next:null},Pl===null){if(Bp===null)throw Error(ve(308));Pl=t,Bp.dependencies={lanes:0,firstContext:t}}else Pl=Pl.next=t;return e}var fo=null;function H2(t){fo===null?fo=[t]:fo.push(t)}function W6(t,e,r,i){var s=e.interleaved;return s===null?(r.next=r,H2(e)):(r.next=s.next,s.next=r),e.interleaved=r,ws(t,i)}function ws(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Xs=!1;function W2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function G6(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ga(t,e,r){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,dt&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,ws(t,r)}return s=i.interleaved,s===null?(e.next=e,H2(i)):(e.next=s.next,s.next=e),i.interleaved=e,ws(t,r)}function tp(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,R2(t,r)}}function XC(t,e){var r=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=e:a=a.next=e}else s=a=e;r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:i.shared,effects:i.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function zp(t,e,r,i){var s=t.updateQueue;Xs=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?a=c:o.next=c,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(a!==null){var h=s.baseState;o=0,d=c=u=null,l=a;do{var f=l.lane,m=l.eventTime;if((i&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,y=l;switch(f=e,m=r,y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(m,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,f=typeof v=="function"?v.call(m,h,f):v,f==null)break e;h=Ht({},h,f);break e;case 2:Xs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=m,u=h):d=d.next=m,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(u=h),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);Co|=o,t.lanes=o,t.memoizedState=h}}function QC(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=r,typeof s!="function")throw Error(ve(191,s));s.call(i)}}}var ah={},Mi=za(ah),Ed=za(ah),Sd=za(ah);function po(t){if(t===ah)throw Error(ve(174));return t}function G2(t,e){switch(kt(Sd,e),kt(Ed,t),kt(Mi,ah),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_x(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_x(e,t)}Mt(Mi),kt(Mi,e)}function ru(){Mt(Mi),Mt(Ed),Mt(Sd)}function K6(t){po(Sd.current);var e=po(Mi.current),r=_x(e,t.type);e!==r&&(kt(Ed,t),kt(Mi,r))}function K2(t){Ed.current===t&&(Mt(Mi),Mt(Ed))}var Bt=za(0);function qp(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var py=[];function Y2(){for(var t=0;t<py.length;t++)py[t]._workInProgressVersionPrimary=null;py.length=0}var np=Rs.ReactCurrentDispatcher,my=Rs.ReactCurrentBatchConfig,Io=0,qt=null,cn=null,wn=null,Hp=!1,Jc=!1,Td=0,v7=0;function Bn(){throw Error(ve(321))}function X2(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!vi(t[r],e[r]))return!1;return!0}function Q2(t,e,r,i,s,a){if(Io=a,qt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,np.current=t===null||t.memoizedState===null?b7:x7,t=r(i,s),Jc){a=0;do{if(Jc=!1,Td=0,25<=a)throw Error(ve(301));a+=1,wn=cn=null,e.updateQueue=null,np.current=E7,t=r(i,s)}while(Jc)}if(np.current=Wp,e=cn!==null&&cn.next!==null,Io=0,wn=cn=qt=null,Hp=!1,e)throw Error(ve(300));return t}function J2(){var t=Td!==0;return Td=0,t}function ki(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wn===null?qt.memoizedState=wn=t:wn=wn.next=t,wn}function Zr(){if(cn===null){var t=qt.alternate;t=t!==null?t.memoizedState:null}else t=cn.next;var e=wn===null?qt.memoizedState:wn.next;if(e!==null)wn=e,cn=t;else{if(t===null)throw Error(ve(310));cn=t,t={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},wn===null?qt.memoizedState=wn=t:wn=wn.next=t}return wn}function Id(t,e){return typeof e=="function"?e(t):e}function gy(t){var e=Zr(),r=e.queue;if(r===null)throw Error(ve(311));r.lastRenderedReducer=t;var i=cn,s=i.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}i.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,i=i.baseState;var l=o=null,u=null,c=a;do{var d=c.lane;if((Io&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,o=i):u=u.next=h,qt.lanes|=d,Co|=d}c=c.next}while(c!==null&&c!==a);u===null?o=i:u.next=l,vi(i,e.memoizedState)||(hr=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=u,r.lastRenderedState=i}if(t=r.interleaved,t!==null){s=t;do a=s.lane,qt.lanes|=a,Co|=a,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function vy(t){var e=Zr(),r=e.queue;if(r===null)throw Error(ve(311));r.lastRenderedReducer=t;var i=r.dispatch,s=r.pending,a=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);vi(a,e.memoizedState)||(hr=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,i]}function Y6(){}function X6(t,e){var r=qt,i=Zr(),s=e(),a=!vi(i.memoizedState,s);if(a&&(i.memoizedState=s,hr=!0),i=i.queue,Z2(Z6.bind(null,r,i,t),[t]),i.getSnapshot!==e||a||wn!==null&&wn.memoizedState.tag&1){if(r.flags|=2048,Cd(9,J6.bind(null,r,i,s,e),void 0,null),xn===null)throw Error(ve(349));Io&30||Q6(r,e,s)}return s}function Q6(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=qt.updateQueue,e===null?(e={lastEffect:null,stores:null},qt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function J6(t,e,r,i){e.value=r,e.getSnapshot=i,eO(e)&&tO(t)}function Z6(t,e,r){return r(function(){eO(e)&&tO(t)})}function eO(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!vi(t,r)}catch{return!0}}function tO(t){var e=ws(t,1);e!==null&&mi(e,t,1,-1)}function JC(t){var e=ki();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Id,lastRenderedState:t},e.queue=t,t=t.dispatch=w7.bind(null,qt,t),[e.memoizedState,t]}function Cd(t,e,r,i){return t={tag:t,create:e,destroy:r,deps:i,next:null},e=qt.updateQueue,e===null?(e={lastEffect:null,stores:null},qt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(i=r.next,r.next=t,t.next=i,e.lastEffect=t)),t}function nO(){return Zr().memoizedState}function rp(t,e,r,i){var s=ki();qt.flags|=t,s.memoizedState=Cd(1|e,r,void 0,i===void 0?null:i)}function ng(t,e,r,i){var s=Zr();i=i===void 0?null:i;var a=void 0;if(cn!==null){var o=cn.memoizedState;if(a=o.destroy,i!==null&&X2(i,o.deps)){s.memoizedState=Cd(e,r,a,i);return}}qt.flags|=t,s.memoizedState=Cd(1|e,r,a,i)}function ZC(t,e){return rp(8390656,8,t,e)}function Z2(t,e){return ng(2048,8,t,e)}function rO(t,e){return ng(4,2,t,e)}function iO(t,e){return ng(4,4,t,e)}function sO(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function aO(t,e,r){return r=r!=null?r.concat([t]):null,ng(4,4,sO.bind(null,e,t),r)}function eS(){}function oO(t,e){var r=Zr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&X2(e,i[1])?i[0]:(r.memoizedState=[t,e],t)}function lO(t,e){var r=Zr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&X2(e,i[1])?i[0]:(t=t(),r.memoizedState=[t,e],t)}function uO(t,e,r){return Io&21?(vi(r,e)||(r=p6(),qt.lanes|=r,Co|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,hr=!0),t.memoizedState=r)}function y7(t,e){var r=_t;_t=r!==0&&4>r?r:4,t(!0);var i=my.transition;my.transition={};try{t(!1),e()}finally{_t=r,my.transition=i}}function cO(){return Zr().memoizedState}function _7(t,e,r){var i=ya(t);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},dO(t))hO(e,r);else if(r=W6(t,e,r,i),r!==null){var s=er();mi(r,t,i,s),fO(r,e,i)}}function w7(t,e,r){var i=ya(t),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(dO(t))hO(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,r);if(s.hasEagerState=!0,s.eagerState=l,vi(l,o)){var u=e.interleaved;u===null?(s.next=s,H2(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=W6(t,e,s,i),r!==null&&(s=er(),mi(r,t,i,s),fO(r,e,i))}}function dO(t){var e=t.alternate;return t===qt||e!==null&&e===qt}function hO(t,e){Jc=Hp=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function fO(t,e,r){if(r&4194240){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,R2(t,r)}}var Wp={readContext:Jr,useCallback:Bn,useContext:Bn,useEffect:Bn,useImperativeHandle:Bn,useInsertionEffect:Bn,useLayoutEffect:Bn,useMemo:Bn,useReducer:Bn,useRef:Bn,useState:Bn,useDebugValue:Bn,useDeferredValue:Bn,useTransition:Bn,useMutableSource:Bn,useSyncExternalStore:Bn,useId:Bn,unstable_isNewReconciler:!1},b7={readContext:Jr,useCallback:function(t,e){return ki().memoizedState=[t,e===void 0?null:e],t},useContext:Jr,useEffect:ZC,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,rp(4194308,4,sO.bind(null,e,t),r)},useLayoutEffect:function(t,e){return rp(4194308,4,t,e)},useInsertionEffect:function(t,e){return rp(4,2,t,e)},useMemo:function(t,e){var r=ki();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var i=ki();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=_7.bind(null,qt,t),[i.memoizedState,t]},useRef:function(t){var e=ki();return t={current:t},e.memoizedState=t},useState:JC,useDebugValue:eS,useDeferredValue:function(t){return ki().memoizedState=t},useTransition:function(){var t=JC(!1),e=t[0];return t=y7.bind(null,t[1]),ki().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var i=qt,s=ki();if(Vt){if(r===void 0)throw Error(ve(407));r=r()}else{if(r=e(),xn===null)throw Error(ve(349));Io&30||Q6(i,e,r)}s.memoizedState=r;var a={value:r,getSnapshot:e};return s.queue=a,ZC(Z6.bind(null,i,a,t),[t]),i.flags|=2048,Cd(9,J6.bind(null,i,a,r,e),void 0,null),r},useId:function(){var t=ki(),e=xn.identifierPrefix;if(Vt){var r=as,i=ss;r=(i&~(1<<32-pi(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=Td++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=v7++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},x7={readContext:Jr,useCallback:oO,useContext:Jr,useEffect:Z2,useImperativeHandle:aO,useInsertionEffect:rO,useLayoutEffect:iO,useMemo:lO,useReducer:gy,useRef:nO,useState:function(){return gy(Id)},useDebugValue:eS,useDeferredValue:function(t){var e=Zr();return uO(e,cn.memoizedState,t)},useTransition:function(){var t=gy(Id)[0],e=Zr().memoizedState;return[t,e]},useMutableSource:Y6,useSyncExternalStore:X6,useId:cO,unstable_isNewReconciler:!1},E7={readContext:Jr,useCallback:oO,useContext:Jr,useEffect:Z2,useImperativeHandle:aO,useInsertionEffect:rO,useLayoutEffect:iO,useMemo:lO,useReducer:vy,useRef:nO,useState:function(){return vy(Id)},useDebugValue:eS,useDeferredValue:function(t){var e=Zr();return cn===null?e.memoizedState=t:uO(e,cn.memoizedState,t)},useTransition:function(){var t=vy(Id)[0],e=Zr().memoizedState;return[t,e]},useMutableSource:Y6,useSyncExternalStore:X6,useId:cO,unstable_isNewReconciler:!1};function oi(t,e){if(t&&t.defaultProps){e=Ht({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function $x(t,e,r,i){e=t.memoizedState,r=r(i,e),r=r==null?e:Ht({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var rg={isMounted:function(t){return(t=t._reactInternals)?Uo(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var i=er(),s=ya(t),a=fs(i,s);a.payload=e,r!=null&&(a.callback=r),e=ga(t,a,s),e!==null&&(mi(e,t,s,i),tp(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var i=er(),s=ya(t),a=fs(i,s);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=ga(t,a,s),e!==null&&(mi(e,t,s,i),tp(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=er(),i=ya(t),s=fs(r,i);s.tag=2,e!=null&&(s.callback=e),e=ga(t,s,i),e!==null&&(mi(e,t,i,r),tp(e,t,i))}};function ek(t,e,r,i,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,a,o):e.prototype&&e.prototype.isPureReactComponent?!_d(r,i)||!_d(s,a):!0}function pO(t,e,r){var i=!1,s=Ra,a=e.contextType;return typeof a=="object"&&a!==null?a=Jr(a):(s=mr(e)?So:Kn.current,i=e.contextTypes,a=(i=i!=null)?eu(t,s):Ra),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rg,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function tk(t,e,r,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==t&&rg.enqueueReplaceState(e,e.state,null)}function Ux(t,e,r,i){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},W2(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=Jr(a):(a=mr(e)?So:Kn.current,s.context=eu(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&($x(t,e,a,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&rg.enqueueReplaceState(s,s.state,null),zp(t,r,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function iu(t,e){try{var r="",i=e;do r+=QB(i),i=i.return;while(i);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function yy(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Bx(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var S7=typeof WeakMap=="function"?WeakMap:Map;function mO(t,e,r){r=fs(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){Kp||(Kp=!0,Jx=i),Bx(t,e)},r}function gO(t,e,r){r=fs(-1,r),r.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;r.payload=function(){return i(s)},r.callback=function(){Bx(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Bx(t,e),typeof i!="function"&&(va===null?va=new Set([this]):va.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function nk(t,e,r){var i=t.pingCache;if(i===null){i=t.pingCache=new S7;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(r)||(s.add(r),t=V7.bind(null,t,e,r),e.then(t,t))}function rk(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ik(t,e,r,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=fs(-1,1),e.tag=2,ga(r,e,1))),r.lanes|=1),t)}var T7=Rs.ReactCurrentOwner,hr=!1;function Zn(t,e,r,i){e.child=t===null?H6(e,null,r,i):nu(e,t.child,r,i)}function sk(t,e,r,i,s){r=r.render;var a=e.ref;return Bl(e,s),i=Q2(t,e,r,i,a,s),r=J2(),t!==null&&!hr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,bs(t,e,s)):(Vt&&r&&F2(e),e.flags|=1,Zn(t,e,i,s),e.child)}function ak(t,e,r,i,s){if(t===null){var a=r.type;return typeof a=="function"&&!lS(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,vO(t,e,a,i,s)):(t=op(r.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:_d,r(o,i)&&t.ref===e.ref)return bs(t,e,s)}return e.flags|=1,t=_a(a,i),t.ref=e.ref,t.return=e,e.child=t}function vO(t,e,r,i,s){if(t!==null){var a=t.memoizedProps;if(_d(a,i)&&t.ref===e.ref)if(hr=!1,e.pendingProps=i=a,(t.lanes&s)!==0)t.flags&131072&&(hr=!0);else return e.lanes=t.lanes,bs(t,e,s)}return zx(t,e,r,i,s)}function yO(t,e,r){var i=e.pendingProps,s=i.children,a=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(Ml,Er),Er|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,kt(Ml,Er),Er|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=a!==null?a.baseLanes:r,kt(Ml,Er),Er|=i}else a!==null?(i=a.baseLanes|r,e.memoizedState=null):i=r,kt(Ml,Er),Er|=i;return Zn(t,e,s,r),e.child}function _O(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function zx(t,e,r,i,s){var a=mr(r)?So:Kn.current;return a=eu(e,a),Bl(e,s),r=Q2(t,e,r,i,a,s),i=J2(),t!==null&&!hr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,bs(t,e,s)):(Vt&&i&&F2(e),e.flags|=1,Zn(t,e,r,s),e.child)}function ok(t,e,r,i,s){if(mr(r)){var a=!0;Vp(e)}else a=!1;if(Bl(e,s),e.stateNode===null)ip(t,e),pO(e,r,i),Ux(e,r,i,s),i=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=Jr(c):(c=mr(r)?So:Kn.current,c=eu(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||u!==c)&&tk(e,o,i,c),Xs=!1;var f=e.memoizedState;o.state=f,zp(e,i,o,s),u=e.memoizedState,l!==i||f!==u||pr.current||Xs?(typeof d=="function"&&($x(e,r,d,i),u=e.memoizedState),(l=Xs||ek(e,r,l,i,f,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),o.props=i,o.state=u,o.context=c,i=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,G6(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:oi(e.type,l),o.props=c,h=e.pendingProps,f=o.context,u=r.contextType,typeof u=="object"&&u!==null?u=Jr(u):(u=mr(r)?So:Kn.current,u=eu(e,u));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==u)&&tk(e,o,i,u),Xs=!1,f=e.memoizedState,o.state=f,zp(e,i,o,s);var v=e.memoizedState;l!==h||f!==v||pr.current||Xs?(typeof m=="function"&&($x(e,r,m,i),v=e.memoizedState),(c=Xs||ek(e,r,c,i,f,v,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=u,i=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return qx(t,e,r,i,a,s)}function qx(t,e,r,i,s,a){_O(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&WC(e,r,!1),bs(t,e,a);i=e.stateNode,T7.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=nu(e,t.child,null,a),e.child=nu(e,null,l,a)):Zn(t,e,l,a),e.memoizedState=i.state,s&&WC(e,r,!0),e.child}function wO(t){var e=t.stateNode;e.pendingContext?HC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&HC(t,e.context,!1),G2(t,e.containerInfo)}function lk(t,e,r,i,s){return tu(),U2(s),e.flags|=256,Zn(t,e,r,i),e.child}var Hx={dehydrated:null,treeContext:null,retryLane:0};function Wx(t){return{baseLanes:t,cachePool:null,transitions:null}}function bO(t,e,r){var i=e.pendingProps,s=Bt.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),kt(Bt,s&1),t===null)return Vx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,a?(i=e.mode,a=e.child,o={mode:"hidden",children:o},!(i&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=ag(o,i,0,null),t=bo(t,i,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Wx(r),e.memoizedState=Hx,t):tS(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return I7(t,e,o,i,l,s,r);if(a){a=i.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=_a(s,u),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=_a(l,a):(a=bo(a,o,r,null),a.flags|=2),a.return=e,i.return=e,i.sibling=a,e.child=i,i=a,a=e.child,o=t.child.memoizedState,o=o===null?Wx(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=Hx,i}return a=t.child,t=a.sibling,i=_a(a,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=i,e.memoizedState=null,i}function tS(t,e){return e=ag({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function _f(t,e,r,i){return i!==null&&U2(i),nu(e,t.child,null,r),t=tS(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function I7(t,e,r,i,s,a,o){if(r)return e.flags&256?(e.flags&=-257,i=yy(Error(ve(422))),_f(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=i.fallback,s=e.mode,i=ag({mode:"visible",children:i.children},s,0,null),a=bo(a,s,o,null),a.flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,e.mode&1&&nu(e,t.child,null,o),e.child.memoizedState=Wx(o),e.memoizedState=Hx,a);if(!(e.mode&1))return _f(t,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,a=Error(ve(419)),i=yy(a,i,void 0),_f(t,e,o,i)}if(l=(o&t.childLanes)!==0,hr||l){if(i=xn,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,ws(t,s),mi(i,t,s,-1))}return oS(),i=yy(Error(ve(421))),_f(t,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=F7.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Tr=ma(s.nextSibling),kr=e,Vt=!0,ci=null,t!==null&&(Ur[Br++]=ss,Ur[Br++]=as,Ur[Br++]=To,ss=t.id,as=t.overflow,To=e),e=tS(e,i.children),e.flags|=4096,e)}function uk(t,e,r){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Fx(t.return,e,r)}function _y(t,e,r,i,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=r,a.tailMode=s)}function xO(t,e,r){var i=e.pendingProps,s=i.revealOrder,a=i.tail;if(Zn(t,e,i.children,r),i=Bt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&uk(t,r,e);else if(t.tag===19)uk(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(kt(Bt,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&qp(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),_y(e,!1,s,r,a);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&qp(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}_y(e,!0,r,null,a);break;case"together":_y(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ip(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function bs(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Co|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ve(153));if(e.child!==null){for(t=e.child,r=_a(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=_a(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function C7(t,e,r){switch(e.tag){case 3:wO(e),tu();break;case 5:K6(e);break;case 1:mr(e.type)&&Vp(e);break;case 4:G2(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;kt(Up,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(kt(Bt,Bt.current&1),e.flags|=128,null):r&e.child.childLanes?bO(t,e,r):(kt(Bt,Bt.current&1),t=bs(t,e,r),t!==null?t.sibling:null);kt(Bt,Bt.current&1);break;case 19:if(i=(r&e.childLanes)!==0,t.flags&128){if(i)return xO(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),kt(Bt,Bt.current),i)break;return null;case 22:case 23:return e.lanes=0,yO(t,e,r)}return bs(t,e,r)}var EO,Gx,SO,TO;EO=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Gx=function(){};SO=function(t,e,r,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,po(Mi.current);var a=null;switch(r){case"input":s=mx(t,s),i=mx(t,i),a=[];break;case"select":s=Ht({},s,{value:void 0}),i=Ht({},i,{value:void 0}),a=[];break;case"textarea":s=yx(t,s),i=yx(t,i),a=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Op)}wx(r,i);var o;r=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(hd.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in i){var u=i[c];if(l=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(a||(a=[]),a.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(hd.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Dt("scroll",t),a||l===u||(a=[])):(a=a||[]).push(c,u))}r&&(a=a||[]).push("style",r);var c=a;(e.updateQueue=c)&&(e.flags|=4)}};TO=function(t,e,r,i){r!==i&&(e.flags|=4)};function uc(t,e){if(!Vt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function zn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,i=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=r,e}function k7(t,e,r){var i=e.pendingProps;switch($2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(e),null;case 1:return mr(e.type)&&jp(),zn(e),null;case 3:return i=e.stateNode,ru(),Mt(pr),Mt(Kn),Y2(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(vf(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ci!==null&&(tE(ci),ci=null))),Gx(t,e),zn(e),null;case 5:K2(e);var s=po(Sd.current);if(r=e.type,t!==null&&e.stateNode!=null)SO(t,e,r,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ve(166));return zn(e),null}if(t=po(Mi.current),vf(e)){i=e.stateNode,r=e.type;var a=e.memoizedProps;switch(i[Ri]=e,i[xd]=a,t=(e.mode&1)!==0,r){case"dialog":Dt("cancel",i),Dt("close",i);break;case"iframe":case"object":case"embed":Dt("load",i);break;case"video":case"audio":for(s=0;s<Ac.length;s++)Dt(Ac[s],i);break;case"source":Dt("error",i);break;case"img":case"image":case"link":Dt("error",i),Dt("load",i);break;case"details":Dt("toggle",i);break;case"input":vC(i,a),Dt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Dt("invalid",i);break;case"textarea":_C(i,a),Dt("invalid",i)}wx(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?i.textContent!==l&&(a.suppressHydrationWarning!==!0&&gf(i.textContent,l,t),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&gf(i.textContent,l,t),s=["children",""+l]):hd.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Dt("scroll",i)}switch(r){case"input":lf(i),yC(i,a,!0);break;case"textarea":lf(i),wC(i);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(i.onclick=Op)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ZL(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(r,{is:i.is}):(t=o.createElement(r),r==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,r),t[Ri]=e,t[xd]=i,EO(t,e,!1,!1),e.stateNode=t;e:{switch(o=bx(r,i),r){case"dialog":Dt("cancel",t),Dt("close",t),s=i;break;case"iframe":case"object":case"embed":Dt("load",t),s=i;break;case"video":case"audio":for(s=0;s<Ac.length;s++)Dt(Ac[s],t);s=i;break;case"source":Dt("error",t),s=i;break;case"img":case"image":case"link":Dt("error",t),Dt("load",t),s=i;break;case"details":Dt("toggle",t),s=i;break;case"input":vC(t,i),s=mx(t,i),Dt("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Ht({},i,{value:void 0}),Dt("invalid",t);break;case"textarea":_C(t,i),s=yx(t,i),Dt("invalid",t);break;default:s=i}wx(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?n6(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&e6(t,u)):a==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&fd(t,u):typeof u=="number"&&fd(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(hd.hasOwnProperty(a)?u!=null&&a==="onScroll"&&Dt("scroll",t):u!=null&&T2(t,a,u,o))}switch(r){case"input":lf(t),yC(t,i,!1);break;case"textarea":lf(t),wC(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Aa(i.value));break;case"select":t.multiple=!!i.multiple,a=i.value,a!=null?Vl(t,!!i.multiple,a,!1):i.defaultValue!=null&&Vl(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Op)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return zn(e),null;case 6:if(t&&e.stateNode!=null)TO(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ve(166));if(r=po(Sd.current),po(Mi.current),vf(e)){if(i=e.stateNode,r=e.memoizedProps,i[Ri]=e,(a=i.nodeValue!==r)&&(t=kr,t!==null))switch(t.tag){case 3:gf(i.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&gf(i.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Ri]=e,e.stateNode=i}return zn(e),null;case 13:if(Mt(Bt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Vt&&Tr!==null&&e.mode&1&&!(e.flags&128))z6(),tu(),e.flags|=98560,a=!1;else if(a=vf(e),i!==null&&i.dehydrated!==null){if(t===null){if(!a)throw Error(ve(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ve(317));a[Ri]=e}else tu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;zn(e),a=!1}else ci!==null&&(tE(ci),ci=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Bt.current&1?hn===0&&(hn=3):oS())),e.updateQueue!==null&&(e.flags|=4),zn(e),null);case 4:return ru(),Gx(t,e),t===null&&wd(e.stateNode.containerInfo),zn(e),null;case 10:return q2(e.type._context),zn(e),null;case 17:return mr(e.type)&&jp(),zn(e),null;case 19:if(Mt(Bt),a=e.memoizedState,a===null)return zn(e),null;if(i=(e.flags&128)!==0,o=a.rendering,o===null)if(i)uc(a,!1);else{if(hn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=qp(t),o!==null){for(e.flags|=128,uc(a,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)a=r,t=i,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return kt(Bt,Bt.current&1|2),e.child}t=t.sibling}a.tail!==null&&Jt()>su&&(e.flags|=128,i=!0,uc(a,!1),e.lanes=4194304)}else{if(!i)if(t=qp(o),t!==null){if(e.flags|=128,i=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),uc(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Vt)return zn(e),null}else 2*Jt()-a.renderingStartTime>su&&r!==1073741824&&(e.flags|=128,i=!0,uc(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Jt(),e.sibling=null,r=Bt.current,kt(Bt,i?r&1|2:r&1),e):(zn(e),null);case 22:case 23:return aS(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Er&1073741824&&(zn(e),e.subtreeFlags&6&&(e.flags|=8192)):zn(e),null;case 24:return null;case 25:return null}throw Error(ve(156,e.tag))}function N7(t,e){switch($2(e),e.tag){case 1:return mr(e.type)&&jp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ru(),Mt(pr),Mt(Kn),Y2(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return K2(e),null;case 13:if(Mt(Bt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ve(340));tu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Mt(Bt),null;case 4:return ru(),null;case 10:return q2(e.type._context),null;case 22:case 23:return aS(),null;case 24:return null;default:return null}}var wf=!1,Wn=!1,A7=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function Dl(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Kt(t,e,i)}else r.current=null}function Kx(t,e,r){try{r()}catch(i){Kt(t,e,i)}}var ck=!1;function R7(t,e){if(Rx=Dp,t=A6(),V2(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,u=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==a||i!==0&&h.nodeType!==3||(u=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===r&&++c===s&&(l=o),f===a&&++d===i&&(u=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(Px={focusedElem:t,selectionRange:r},Dp=!1,Pe=e;Pe!==null;)if(e=Pe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Pe=t;else for(;Pe!==null;){e=Pe;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,b=v.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?y:oi(e.type,y),b);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ve(163))}}catch(N){Kt(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,Pe=t;break}Pe=e.return}return v=ck,ck=!1,v}function Zc(t,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&Kx(e,r,a)}s=s.next}while(s!==i)}}function ig(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function Yx(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function IO(t){var e=t.alternate;e!==null&&(t.alternate=null,IO(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ri],delete e[xd],delete e[Lx],delete e[f7],delete e[p7])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function CO(t){return t.tag===5||t.tag===3||t.tag===4}function dk(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||CO(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Xx(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Op));else if(i!==4&&(t=t.child,t!==null))for(Xx(t,e,r),t=t.sibling;t!==null;)Xx(t,e,r),t=t.sibling}function Qx(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Qx(t,e,r),t=t.sibling;t!==null;)Qx(t,e,r),t=t.sibling}var An=null,li=!1;function qs(t,e,r){for(r=r.child;r!==null;)kO(t,e,r),r=r.sibling}function kO(t,e,r){if(Di&&typeof Di.onCommitFiberUnmount=="function")try{Di.onCommitFiberUnmount(Xm,r)}catch{}switch(r.tag){case 5:Wn||Dl(r,e);case 6:var i=An,s=li;An=null,qs(t,e,r),An=i,li=s,An!==null&&(li?(t=An,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):An.removeChild(r.stateNode));break;case 18:An!==null&&(li?(t=An,r=r.stateNode,t.nodeType===8?hy(t.parentNode,r):t.nodeType===1&&hy(t,r),vd(t)):hy(An,r.stateNode));break;case 4:i=An,s=li,An=r.stateNode.containerInfo,li=!0,qs(t,e,r),An=i,li=s;break;case 0:case 11:case 14:case 15:if(!Wn&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Kx(r,e,o),s=s.next}while(s!==i)}qs(t,e,r);break;case 1:if(!Wn&&(Dl(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(l){Kt(r,e,l)}qs(t,e,r);break;case 21:qs(t,e,r);break;case 22:r.mode&1?(Wn=(i=Wn)||r.memoizedState!==null,qs(t,e,r),Wn=i):qs(t,e,r);break;default:qs(t,e,r)}}function hk(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new A7),e.forEach(function(i){var s=$7.bind(null,t,i);r.has(i)||(r.add(i),i.then(s,s))})}}function si(t,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:An=l.stateNode,li=!1;break e;case 3:An=l.stateNode.containerInfo,li=!0;break e;case 4:An=l.stateNode.containerInfo,li=!0;break e}l=l.return}if(An===null)throw Error(ve(160));kO(a,o,s),An=null,li=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Kt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)NO(e,t),e=e.sibling}function NO(t,e){var r=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(si(e,t),Ti(t),i&4){try{Zc(3,t,t.return),ig(3,t)}catch(y){Kt(t,t.return,y)}try{Zc(5,t,t.return)}catch(y){Kt(t,t.return,y)}}break;case 1:si(e,t),Ti(t),i&512&&r!==null&&Dl(r,r.return);break;case 5:if(si(e,t),Ti(t),i&512&&r!==null&&Dl(r,r.return),t.flags&32){var s=t.stateNode;try{fd(s,"")}catch(y){Kt(t,t.return,y)}}if(i&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&QL(s,a),bx(l,o);var c=bx(l,a);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];d==="style"?n6(s,h):d==="dangerouslySetInnerHTML"?e6(s,h):d==="children"?fd(s,h):T2(s,d,h,c)}switch(l){case"input":gx(s,a);break;case"textarea":JL(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?Vl(s,!!a.multiple,m,!1):f!==!!a.multiple&&(a.defaultValue!=null?Vl(s,!!a.multiple,a.defaultValue,!0):Vl(s,!!a.multiple,a.multiple?[]:"",!1))}s[xd]=a}catch(y){Kt(t,t.return,y)}}break;case 6:if(si(e,t),Ti(t),i&4){if(t.stateNode===null)throw Error(ve(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(y){Kt(t,t.return,y)}}break;case 3:if(si(e,t),Ti(t),i&4&&r!==null&&r.memoizedState.isDehydrated)try{vd(e.containerInfo)}catch(y){Kt(t,t.return,y)}break;case 4:si(e,t),Ti(t);break;case 13:si(e,t),Ti(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(iS=Jt())),i&4&&hk(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Wn=(c=Wn)||d,si(e,t),Wn=c):si(e,t),Ti(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Pe=t,d=t.child;d!==null;){for(h=Pe=d;Pe!==null;){switch(f=Pe,m=f.child,f.tag){case 0:case 11:case 14:case 15:Zc(4,f,f.return);break;case 1:Dl(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){i=f,r=f.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){Kt(i,r,y)}}break;case 5:Dl(f,f.return);break;case 22:if(f.memoizedState!==null){pk(h);continue}}m!==null?(m.return=f,Pe=m):pk(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=t6("display",o))}catch(y){Kt(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){Kt(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:si(e,t),Ti(t),i&4&&hk(t);break;case 21:break;default:si(e,t),Ti(t)}}function Ti(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(CO(r)){var i=r;break e}r=r.return}throw Error(ve(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(fd(s,""),i.flags&=-33);var a=dk(t);Qx(t,a,s);break;case 3:case 4:var o=i.stateNode.containerInfo,l=dk(t);Xx(t,l,o);break;default:throw Error(ve(161))}}catch(u){Kt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function P7(t,e,r){Pe=t,AO(t)}function AO(t,e,r){for(var i=(t.mode&1)!==0;Pe!==null;){var s=Pe,a=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||wf;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Wn;l=wf;var c=Wn;if(wf=o,(Wn=u)&&!c)for(Pe=s;Pe!==null;)o=Pe,u=o.child,o.tag===22&&o.memoizedState!==null?mk(s):u!==null?(u.return=o,Pe=u):mk(s);for(;a!==null;)Pe=a,AO(a),a=a.sibling;Pe=s,wf=l,Wn=c}fk(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,Pe=a):fk(t)}}function fk(t){for(;Pe!==null;){var e=Pe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wn||ig(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Wn)if(r===null)i.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:oi(e.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&QC(e,a,i);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}QC(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&vd(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ve(163))}Wn||e.flags&512&&Yx(e)}catch(f){Kt(e,e.return,f)}}if(e===t){Pe=null;break}if(r=e.sibling,r!==null){r.return=e.return,Pe=r;break}Pe=e.return}}function pk(t){for(;Pe!==null;){var e=Pe;if(e===t){Pe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Pe=r;break}Pe=e.return}}function mk(t){for(;Pe!==null;){var e=Pe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{ig(4,e)}catch(u){Kt(e,r,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(u){Kt(e,s,u)}}var a=e.return;try{Yx(e)}catch(u){Kt(e,a,u)}break;case 5:var o=e.return;try{Yx(e)}catch(u){Kt(e,o,u)}}}catch(u){Kt(e,e.return,u)}if(e===t){Pe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Pe=l;break}Pe=e.return}}var D7=Math.ceil,Gp=Rs.ReactCurrentDispatcher,nS=Rs.ReactCurrentOwner,Yr=Rs.ReactCurrentBatchConfig,dt=0,xn=null,an=null,Dn=0,Er=0,Ml=za(0),hn=0,kd=null,Co=0,sg=0,rS=0,ed=null,cr=null,iS=0,su=1/0,rs=null,Kp=!1,Jx=null,va=null,bf=!1,ua=null,Yp=0,td=0,Zx=null,sp=-1,ap=0;function er(){return dt&6?Jt():sp!==-1?sp:sp=Jt()}function ya(t){return t.mode&1?dt&2&&Dn!==0?Dn&-Dn:g7.transition!==null?(ap===0&&(ap=p6()),ap):(t=_t,t!==0||(t=window.event,t=t===void 0?16:b6(t.type)),t):1}function mi(t,e,r,i){if(50<td)throw td=0,Zx=null,Error(ve(185));rh(t,r,i),(!(dt&2)||t!==xn)&&(t===xn&&(!(dt&2)&&(sg|=r),hn===4&&ta(t,Dn)),gr(t,i),r===1&&dt===0&&!(e.mode&1)&&(su=Jt()+500,tg&&qa()))}function gr(t,e){var r=t.callbackNode;gz(t,e);var i=Pp(t,t===xn?Dn:0);if(i===0)r!==null&&EC(r),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(r!=null&&EC(r),e===1)t.tag===0?m7(gk.bind(null,t)):$6(gk.bind(null,t)),d7(function(){!(dt&6)&&qa()}),r=null;else{switch(m6(i)){case 1:r=A2;break;case 4:r=h6;break;case 16:r=Rp;break;case 536870912:r=f6;break;default:r=Rp}r=VO(r,RO.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function RO(t,e){if(sp=-1,ap=0,dt&6)throw Error(ve(327));var r=t.callbackNode;if(zl()&&t.callbackNode!==r)return null;var i=Pp(t,t===xn?Dn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Xp(t,i);else{e=i;var s=dt;dt|=2;var a=DO();(xn!==t||Dn!==e)&&(rs=null,su=Jt()+500,wo(t,e));do try{O7();break}catch(l){PO(t,l)}while(!0);z2(),Gp.current=a,dt=s,an!==null?e=0:(xn=null,Dn=0,e=hn)}if(e!==0){if(e===2&&(s=Ix(t),s!==0&&(i=s,e=eE(t,s))),e===1)throw r=kd,wo(t,0),ta(t,i),gr(t,Jt()),r;if(e===6)ta(t,i);else{if(s=t.current.alternate,!(i&30)&&!M7(s)&&(e=Xp(t,i),e===2&&(a=Ix(t),a!==0&&(i=a,e=eE(t,a))),e===1))throw r=kd,wo(t,0),ta(t,i),gr(t,Jt()),r;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(ve(345));case 2:io(t,cr,rs);break;case 3:if(ta(t,i),(i&130023424)===i&&(e=iS+500-Jt(),10<e)){if(Pp(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){er(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Mx(io.bind(null,t,cr,rs),e);break}io(t,cr,rs);break;case 4:if(ta(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var o=31-pi(i);a=1<<o,o=e[o],o>s&&(s=o),i&=~a}if(i=s,i=Jt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*D7(i/1960))-i,10<i){t.timeoutHandle=Mx(io.bind(null,t,cr,rs),i);break}io(t,cr,rs);break;case 5:io(t,cr,rs);break;default:throw Error(ve(329))}}}return gr(t,Jt()),t.callbackNode===r?RO.bind(null,t):null}function eE(t,e){var r=ed;return t.current.memoizedState.isDehydrated&&(wo(t,e).flags|=256),t=Xp(t,e),t!==2&&(e=cr,cr=r,e!==null&&tE(e)),t}function tE(t){cr===null?cr=t:cr.push.apply(cr,t)}function M7(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var s=r[i],a=s.getSnapshot;s=s.value;try{if(!vi(a(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ta(t,e){for(e&=~rS,e&=~sg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-pi(e),i=1<<r;t[r]=-1,e&=~i}}function gk(t){if(dt&6)throw Error(ve(327));zl();var e=Pp(t,0);if(!(e&1))return gr(t,Jt()),null;var r=Xp(t,e);if(t.tag!==0&&r===2){var i=Ix(t);i!==0&&(e=i,r=eE(t,i))}if(r===1)throw r=kd,wo(t,0),ta(t,e),gr(t,Jt()),r;if(r===6)throw Error(ve(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,io(t,cr,rs),gr(t,Jt()),null}function sS(t,e){var r=dt;dt|=1;try{return t(e)}finally{dt=r,dt===0&&(su=Jt()+500,tg&&qa())}}function ko(t){ua!==null&&ua.tag===0&&!(dt&6)&&zl();var e=dt;dt|=1;var r=Yr.transition,i=_t;try{if(Yr.transition=null,_t=1,t)return t()}finally{_t=i,Yr.transition=r,dt=e,!(dt&6)&&qa()}}function aS(){Er=Ml.current,Mt(Ml)}function wo(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,c7(r)),an!==null)for(r=an.return;r!==null;){var i=r;switch($2(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&jp();break;case 3:ru(),Mt(pr),Mt(Kn),Y2();break;case 5:K2(i);break;case 4:ru();break;case 13:Mt(Bt);break;case 19:Mt(Bt);break;case 10:q2(i.type._context);break;case 22:case 23:aS()}r=r.return}if(xn=t,an=t=_a(t.current,null),Dn=Er=e,hn=0,kd=null,rS=sg=Co=0,cr=ed=null,fo!==null){for(e=0;e<fo.length;e++)if(r=fo[e],i=r.interleaved,i!==null){r.interleaved=null;var s=i.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,i.next=o}r.pending=i}fo=null}return t}function PO(t,e){do{var r=an;try{if(z2(),np.current=Wp,Hp){for(var i=qt.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Hp=!1}if(Io=0,wn=cn=qt=null,Jc=!1,Td=0,nS.current=null,r===null||r.return===null){hn=1,kd=e,an=null;break}e:{var a=t,o=r.return,l=r,u=e;if(e=Dn,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=rk(o);if(m!==null){m.flags&=-257,ik(m,o,l,a,e),m.mode&1&&nk(a,c,e),e=m,u=c;var v=e.updateQueue;if(v===null){var y=new Set;y.add(u),e.updateQueue=y}else v.add(u);break e}else{if(!(e&1)){nk(a,c,e),oS();break e}u=Error(ve(426))}}else if(Vt&&l.mode&1){var b=rk(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),ik(b,o,l,a,e),U2(iu(u,l));break e}}a=u=iu(u,l),hn!==4&&(hn=2),ed===null?ed=[a]:ed.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var _=mO(a,u,e);XC(a,_);break e;case 1:l=u;var w=a.type,E=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(va===null||!va.has(E)))){a.flags|=65536,e&=-e,a.lanes|=e;var N=gO(a,l,e);XC(a,N);break e}}a=a.return}while(a!==null)}LO(r)}catch(M){e=M,an===r&&r!==null&&(an=r=r.return);continue}break}while(!0)}function DO(){var t=Gp.current;return Gp.current=Wp,t===null?Wp:t}function oS(){(hn===0||hn===3||hn===2)&&(hn=4),xn===null||!(Co&268435455)&&!(sg&268435455)||ta(xn,Dn)}function Xp(t,e){var r=dt;dt|=2;var i=DO();(xn!==t||Dn!==e)&&(rs=null,wo(t,e));do try{L7();break}catch(s){PO(t,s)}while(!0);if(z2(),dt=r,Gp.current=i,an!==null)throw Error(ve(261));return xn=null,Dn=0,hn}function L7(){for(;an!==null;)MO(an)}function O7(){for(;an!==null&&!oz();)MO(an)}function MO(t){var e=jO(t.alternate,t,Er);t.memoizedProps=t.pendingProps,e===null?LO(t):an=e,nS.current=null}function LO(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=N7(r,e),r!==null){r.flags&=32767,an=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{hn=6,an=null;return}}else if(r=k7(r,e,Er),r!==null){an=r;return}if(e=e.sibling,e!==null){an=e;return}an=e=t}while(e!==null);hn===0&&(hn=5)}function io(t,e,r){var i=_t,s=Yr.transition;try{Yr.transition=null,_t=1,j7(t,e,r,i)}finally{Yr.transition=s,_t=i}return null}function j7(t,e,r,i){do zl();while(ua!==null);if(dt&6)throw Error(ve(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ve(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(vz(t,a),t===xn&&(an=xn=null,Dn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||bf||(bf=!0,VO(Rp,function(){return zl(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Yr.transition,Yr.transition=null;var o=_t;_t=1;var l=dt;dt|=4,nS.current=null,R7(t,r),NO(r,t),r7(Px),Dp=!!Rx,Px=Rx=null,t.current=r,P7(r),lz(),dt=l,_t=o,Yr.transition=a}else t.current=r;if(bf&&(bf=!1,ua=t,Yp=s),a=t.pendingLanes,a===0&&(va=null),dz(r.stateNode),gr(t,Jt()),e!==null)for(i=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(Kp)throw Kp=!1,t=Jx,Jx=null,t;return Yp&1&&t.tag!==0&&zl(),a=t.pendingLanes,a&1?t===Zx?td++:(td=0,Zx=t):td=0,qa(),null}function zl(){if(ua!==null){var t=m6(Yp),e=Yr.transition,r=_t;try{if(Yr.transition=null,_t=16>t?16:t,ua===null)var i=!1;else{if(t=ua,ua=null,Yp=0,dt&6)throw Error(ve(331));var s=dt;for(dt|=4,Pe=t.current;Pe!==null;){var a=Pe,o=a.child;if(Pe.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(Pe=c;Pe!==null;){var d=Pe;switch(d.tag){case 0:case 11:case 15:Zc(8,d,a)}var h=d.child;if(h!==null)h.return=d,Pe=h;else for(;Pe!==null;){d=Pe;var f=d.sibling,m=d.return;if(IO(d),d===c){Pe=null;break}if(f!==null){f.return=m,Pe=f;break}Pe=m}}}var v=a.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}Pe=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Pe=o;else e:for(;Pe!==null;){if(a=Pe,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Zc(9,a,a.return)}var _=a.sibling;if(_!==null){_.return=a.return,Pe=_;break e}Pe=a.return}}var w=t.current;for(Pe=w;Pe!==null;){o=Pe;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,Pe=E;else e:for(o=w;Pe!==null;){if(l=Pe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ig(9,l)}}catch(M){Kt(l,l.return,M)}if(l===o){Pe=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,Pe=N;break e}Pe=l.return}}if(dt=s,qa(),Di&&typeof Di.onPostCommitFiberRoot=="function")try{Di.onPostCommitFiberRoot(Xm,t)}catch{}i=!0}return i}finally{_t=r,Yr.transition=e}}return!1}function vk(t,e,r){e=iu(r,e),e=mO(t,e,1),t=ga(t,e,1),e=er(),t!==null&&(rh(t,1,e),gr(t,e))}function Kt(t,e,r){if(t.tag===3)vk(t,t,r);else for(;e!==null;){if(e.tag===3){vk(e,t,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(va===null||!va.has(i))){t=iu(r,t),t=gO(e,t,1),e=ga(e,t,1),t=er(),e!==null&&(rh(e,1,t),gr(e,t));break}}e=e.return}}function V7(t,e,r){var i=t.pingCache;i!==null&&i.delete(e),e=er(),t.pingedLanes|=t.suspendedLanes&r,xn===t&&(Dn&r)===r&&(hn===4||hn===3&&(Dn&130023424)===Dn&&500>Jt()-iS?wo(t,0):rS|=r),gr(t,e)}function OO(t,e){e===0&&(t.mode&1?(e=df,df<<=1,!(df&130023424)&&(df=4194304)):e=1);var r=er();t=ws(t,e),t!==null&&(rh(t,e,r),gr(t,r))}function F7(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),OO(t,r)}function $7(t,e){var r=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ve(314))}i!==null&&i.delete(e),OO(t,r)}var jO;jO=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||pr.current)hr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return hr=!1,C7(t,e,r);hr=!!(t.flags&131072)}else hr=!1,Vt&&e.flags&1048576&&U6(e,$p,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;ip(t,e),t=e.pendingProps;var s=eu(e,Kn.current);Bl(e,r),s=Q2(null,e,i,t,s,r);var a=J2();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,mr(i)?(a=!0,Vp(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,W2(e),s.updater=rg,e.stateNode=s,s._reactInternals=e,Ux(e,i,t,r),e=qx(null,e,i,!0,a,r)):(e.tag=0,Vt&&a&&F2(e),Zn(null,e,s,r),e=e.child),e;case 16:i=e.elementType;e:{switch(ip(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=B7(i),t=oi(i,t),s){case 0:e=zx(null,e,i,t,r);break e;case 1:e=ok(null,e,i,t,r);break e;case 11:e=sk(null,e,i,t,r);break e;case 14:e=ak(null,e,i,oi(i.type,t),r);break e}throw Error(ve(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:oi(i,s),zx(t,e,i,s,r);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:oi(i,s),ok(t,e,i,s,r);case 3:e:{if(wO(e),t===null)throw Error(ve(387));i=e.pendingProps,a=e.memoizedState,s=a.element,G6(t,e),zp(e,i,null,r);var o=e.memoizedState;if(i=o.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=iu(Error(ve(423)),e),e=lk(t,e,i,r,s);break e}else if(i!==s){s=iu(Error(ve(424)),e),e=lk(t,e,i,r,s);break e}else for(Tr=ma(e.stateNode.containerInfo.firstChild),kr=e,Vt=!0,ci=null,r=H6(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(tu(),i===s){e=bs(t,e,r);break e}Zn(t,e,i,r)}e=e.child}return e;case 5:return K6(e),t===null&&Vx(e),i=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,Dx(i,s)?o=null:a!==null&&Dx(i,a)&&(e.flags|=32),_O(t,e),Zn(t,e,o,r),e.child;case 6:return t===null&&Vx(e),null;case 13:return bO(t,e,r);case 4:return G2(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=nu(e,null,i,r):Zn(t,e,i,r),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:oi(i,s),sk(t,e,i,s,r);case 7:return Zn(t,e,e.pendingProps,r),e.child;case 8:return Zn(t,e,e.pendingProps.children,r),e.child;case 12:return Zn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,kt(Up,i._currentValue),i._currentValue=o,a!==null)if(vi(a.value,o)){if(a.children===s.children&&!pr.current){e=bs(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(a.tag===1){u=fs(-1,r&-r),u.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}a.lanes|=r,u=a.alternate,u!==null&&(u.lanes|=r),Fx(a.return,r,e),l.lanes|=r;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ve(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),Fx(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Zn(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,Bl(e,r),s=Jr(s),i=i(s),e.flags|=1,Zn(t,e,i,r),e.child;case 14:return i=e.type,s=oi(i,e.pendingProps),s=oi(i.type,s),ak(t,e,i,s,r);case 15:return vO(t,e,e.type,e.pendingProps,r);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:oi(i,s),ip(t,e),e.tag=1,mr(i)?(t=!0,Vp(e)):t=!1,Bl(e,r),pO(e,i,s),Ux(e,i,s,r),qx(null,e,i,!0,t,r);case 19:return xO(t,e,r);case 22:return yO(t,e,r)}throw Error(ve(156,e.tag))};function VO(t,e){return d6(t,e)}function U7(t,e,r,i){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hr(t,e,r,i){return new U7(t,e,r,i)}function lS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function B7(t){if(typeof t=="function")return lS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===C2)return 11;if(t===k2)return 14}return 2}function _a(t,e){var r=t.alternate;return r===null?(r=Hr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function op(t,e,r,i,s,a){var o=2;if(i=t,typeof t=="function")lS(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Sl:return bo(r.children,s,a,e);case I2:o=8,s|=8;break;case dx:return t=Hr(12,r,e,s|2),t.elementType=dx,t.lanes=a,t;case hx:return t=Hr(13,r,e,s),t.elementType=hx,t.lanes=a,t;case fx:return t=Hr(19,r,e,s),t.elementType=fx,t.lanes=a,t;case KL:return ag(r,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case WL:o=10;break e;case GL:o=9;break e;case C2:o=11;break e;case k2:o=14;break e;case Ys:o=16,i=null;break e}throw Error(ve(130,t==null?t:typeof t,""))}return e=Hr(o,r,e,s),e.elementType=t,e.type=i,e.lanes=a,e}function bo(t,e,r,i){return t=Hr(7,t,i,e),t.lanes=r,t}function ag(t,e,r,i){return t=Hr(22,t,i,e),t.elementType=KL,t.lanes=r,t.stateNode={isHidden:!1},t}function wy(t,e,r){return t=Hr(6,t,null,e),t.lanes=r,t}function by(t,e,r){return e=Hr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function z7(t,e,r,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ty(0),this.expirationTimes=ty(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ty(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function uS(t,e,r,i,s,a,o,l,u){return t=new z7(t,e,r,l,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Hr(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},W2(a),t}function q7(t,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:El,key:i==null?null:""+i,children:t,containerInfo:e,implementation:r}}function FO(t){if(!t)return Ra;t=t._reactInternals;e:{if(Uo(t)!==t||t.tag!==1)throw Error(ve(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(mr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ve(171))}if(t.tag===1){var r=t.type;if(mr(r))return F6(t,r,e)}return e}function $O(t,e,r,i,s,a,o,l,u){return t=uS(r,i,!0,t,s,a,o,l,u),t.context=FO(null),r=t.current,i=er(),s=ya(r),a=fs(i,s),a.callback=e??null,ga(r,a,s),t.current.lanes=s,rh(t,s,i),gr(t,i),t}function og(t,e,r,i){var s=e.current,a=er(),o=ya(s);return r=FO(r),e.context===null?e.context=r:e.pendingContext=r,e=fs(a,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ga(s,e,o),t!==null&&(mi(t,s,o,a),tp(t,s,o)),o}function Qp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yk(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function cS(t,e){yk(t,e),(t=t.alternate)&&yk(t,e)}function H7(){return null}var UO=typeof reportError=="function"?reportError:function(t){console.error(t)};function dS(t){this._internalRoot=t}lg.prototype.render=dS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ve(409));og(t,e,null,null)};lg.prototype.unmount=dS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ko(function(){og(null,t,null,null)}),e[_s]=null}};function lg(t){this._internalRoot=t}lg.prototype.unstable_scheduleHydration=function(t){if(t){var e=y6();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ea.length&&e!==0&&e<ea[r].priority;r++);ea.splice(r,0,t),r===0&&w6(t)}};function hS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ug(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _k(){}function W7(t,e,r,i,s){if(s){if(typeof i=="function"){var a=i;i=function(){var c=Qp(o);a.call(c)}}var o=$O(e,i,t,0,null,!1,!1,"",_k);return t._reactRootContainer=o,t[_s]=o.current,wd(t.nodeType===8?t.parentNode:t),ko(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var c=Qp(u);l.call(c)}}var u=uS(t,0,!1,null,null,!1,!1,"",_k);return t._reactRootContainer=u,t[_s]=u.current,wd(t.nodeType===8?t.parentNode:t),ko(function(){og(e,u,r,i)}),u}function cg(t,e,r,i,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var u=Qp(o);l.call(u)}}og(e,o,t,s)}else o=W7(r,e,t,s,i);return Qp(o)}g6=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Nc(e.pendingLanes);r!==0&&(R2(e,r|1),gr(e,Jt()),!(dt&6)&&(su=Jt()+500,qa()))}break;case 13:ko(function(){var i=ws(t,1);if(i!==null){var s=er();mi(i,t,1,s)}}),cS(t,1)}};P2=function(t){if(t.tag===13){var e=ws(t,134217728);if(e!==null){var r=er();mi(e,t,134217728,r)}cS(t,134217728)}};v6=function(t){if(t.tag===13){var e=ya(t),r=ws(t,e);if(r!==null){var i=er();mi(r,t,e,i)}cS(t,e)}};y6=function(){return _t};_6=function(t,e){var r=_t;try{return _t=t,e()}finally{_t=r}};Ex=function(t,e,r){switch(e){case"input":if(gx(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==t&&i.form===t.form){var s=eg(i);if(!s)throw Error(ve(90));XL(i),gx(i,s)}}}break;case"textarea":JL(t,r);break;case"select":e=r.value,e!=null&&Vl(t,!!r.multiple,e,!1)}};s6=sS;a6=ko;var G7={usingClientEntryPoint:!1,Events:[sh,kl,eg,r6,i6,sS]},cc={findFiberByHostInstance:ho,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},K7={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=u6(t),t===null?null:t.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||H7,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xf.isDisabled&&xf.supportsFiber)try{Xm=xf.inject(K7),Di=xf}catch{}}Lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=G7;Lr.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hS(e))throw Error(ve(200));return q7(t,e,null,r)};Lr.createRoot=function(t,e){if(!hS(t))throw Error(ve(299));var r=!1,i="",s=UO;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=uS(t,1,!1,null,null,r,!1,i,s),t[_s]=e.current,wd(t.nodeType===8?t.parentNode:t),new dS(e)};Lr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ve(188)):(t=Object.keys(t).join(","),Error(ve(268,t)));return t=u6(e),t=t===null?null:t.stateNode,t};Lr.flushSync=function(t){return ko(t)};Lr.hydrate=function(t,e,r){if(!ug(e))throw Error(ve(200));return cg(null,t,e,!0,r)};Lr.hydrateRoot=function(t,e,r){if(!hS(t))throw Error(ve(405));var i=r!=null&&r.hydratedSources||null,s=!1,a="",o=UO;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=$O(e,null,t,1,r??null,s,!1,a,o),t[_s]=e.current,wd(t),i)for(t=0;t<i.length;t++)r=i[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new lg(e)};Lr.render=function(t,e,r){if(!ug(e))throw Error(ve(200));return cg(null,t,e,!1,r)};Lr.unmountComponentAtNode=function(t){if(!ug(t))throw Error(ve(40));return t._reactRootContainer?(ko(function(){cg(null,null,t,!1,function(){t._reactRootContainer=null,t[_s]=null})}),!0):!1};Lr.unstable_batchedUpdates=sS;Lr.unstable_renderSubtreeIntoContainer=function(t,e,r,i){if(!ug(r))throw Error(ve(200));if(t==null||t._reactInternals===void 0)throw Error(ve(38));return cg(t,e,r,!1,i)};Lr.version="18.3.1-next-f1338f8080-20240426";function BO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(BO)}catch(t){console.error(t)}}BO(),BL.exports=Lr;var fS=BL.exports;const Y7=Ua(fS);var wk=fS;ux.createRoot=wk.createRoot,ux.hydrateRoot=wk.hydrateRoot;var pS={};Object.defineProperty(pS,"__esModule",{value:!0});pS.parse=nq;pS.serialize=rq;const X7=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,Q7=/^[\u0021-\u003A\u003C-\u007E]*$/,J7=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Z7=/^[\u0020-\u003A\u003D-\u007E]*$/,eq=Object.prototype.toString,tq=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function nq(t,e){const r=new tq,i=t.length;if(i<2)return r;const s=(e==null?void 0:e.decode)||iq;let a=0;do{const o=t.indexOf("=",a);if(o===-1)break;const l=t.indexOf(";",a),u=l===-1?i:l;if(o>u){a=t.lastIndexOf(";",o-1)+1;continue}const c=bk(t,a,o),d=xk(t,o,c),h=t.slice(c,d);if(r[h]===void 0){let f=bk(t,o+1,u),m=xk(t,u,f);const v=s(t.slice(f,m));r[h]=v}a=u+1}while(a<i);return r}function bk(t,e,r){do{const i=t.charCodeAt(e);if(i!==32&&i!==9)return e}while(++e<r);return r}function xk(t,e,r){for(;e>r;){const i=t.charCodeAt(--e);if(i!==32&&i!==9)return e+1}return r}function rq(t,e,r){const i=(r==null?void 0:r.encode)||encodeURIComponent;if(!X7.test(t))throw new TypeError(`argument name is invalid: ${t}`);const s=i(e);if(!Q7.test(s))throw new TypeError(`argument val is invalid: ${e}`);let a=t+"="+s;if(!r)return a;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);a+="; Max-Age="+r.maxAge}if(r.domain){if(!J7.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);a+="; Domain="+r.domain}if(r.path){if(!Z7.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);a+="; Path="+r.path}if(r.expires){if(!sq(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.partitioned&&(a+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return a}function iq(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function sq(t){return eq.call(t)==="[object Date]"}/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ek="popstate";function aq(t={}){function e(s,a){let{pathname:o="/",search:l="",hash:u=""}=Bo(s.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),nE("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=s.location.href,c=u.indexOf("#");l=c===-1?u:u.slice(0,c)}return l+"#"+(typeof a=="string"?a:Nd(a))}function i(s,a){Dr(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return lq(e,r,i,t)}function $t(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Dr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function oq(){return Math.random().toString(36).substring(2,10)}function Sk(t,e){return{usr:t.state,key:t.key,idx:e}}function nE(t,e,r=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Bo(e):e,state:r,key:e&&e.key||i||oq()}}function Nd({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Bo(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function lq(t,e,r,i={}){let{window:s=document.defaultView,v5Compat:a=!1}=i,o=s.history,l="POP",u=null,c=d();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function d(){return(o.state||{idx:null}).idx}function h(){l="POP";let b=d(),_=b==null?null:b-c;c=b,u&&u({action:l,location:y.location,delta:_})}function f(b,_){l="PUSH";let w=nE(y.location,b,_);r&&r(w,b),c=d()+1;let E=Sk(w,c),N=y.createHref(w);try{o.pushState(E,"",N)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(N)}a&&u&&u({action:l,location:y.location,delta:1})}function m(b,_){l="REPLACE";let w=nE(y.location,b,_);r&&r(w,b),c=d();let E=Sk(w,c),N=y.createHref(w);o.replaceState(E,"",N),a&&u&&u({action:l,location:y.location,delta:0})}function v(b){let _=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof b=="string"?b:Nd(b);return w=w.replace(/ $/,"%20"),$t(_,`No window.location.(origin|href) available to create URL for href: ${w}`),new URL(w,_)}let y={get action(){return l},get location(){return t(s,o)},listen(b){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Ek,h),u=b,()=>{s.removeEventListener(Ek,h),u=null}},createHref(b){return e(s,b)},createURL:v,encodeLocation(b){let _=v(b);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:m,go(b){return o.go(b)}};return y}function zO(t,e,r="/"){return uq(t,e,r,!1)}function uq(t,e,r,i){let s=typeof e=="string"?Bo(e):e,a=Pa(s.pathname||"/",r);if(a==null)return null;let o=qO(t);cq(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=bq(a);l=_q(o[u],c,i)}return l}function qO(t,e=[],r=[],i=""){let s=(a,o,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&($t(u.relativePath.startsWith(i),`Absolute route path "${u.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(i.length));let c=ps([i,u.relativePath]),d=r.concat(u);a.children&&a.children.length>0&&($t(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),qO(a.children,e,d,c)),!(a.path==null&&!a.index)&&e.push({path:c,score:vq(c,a.index),routesMeta:d})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let u of HO(a.path))s(a,o,u)}),e}function HO(t){let e=t.split("/");if(e.length===0)return[];let[r,...i]=e,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let o=HO(i.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function cq(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:yq(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var dq=/^:[\w-]+$/,hq=3,fq=2,pq=1,mq=10,gq=-2,Tk=t=>t==="*";function vq(t,e){let r=t.split("/"),i=r.length;return r.some(Tk)&&(i+=gq),e&&(i+=fq),r.filter(s=>!Tk(s)).reduce((s,a)=>s+(dq.test(a)?hq:a===""?pq:mq),i)}function yq(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function _q(t,e,r=!1){let{routesMeta:i}=t,s={},a="/",o=[];for(let l=0;l<i.length;++l){let u=i[l],c=l===i.length-1,d=a==="/"?e:e.slice(a.length)||"/",h=Jp({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),f=u.route;if(!h&&c&&r&&!i[i.length-1].route.index&&(h=Jp({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:ps([a,h.pathname]),pathnameBase:Tq(ps([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=ps([a,h.pathnameBase]))}return o}function Jp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,i]=wq(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:i.reduce((c,{paramName:d,isOptional:h},f)=>{if(d==="*"){let v=l[f]||"";o=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const m=l[f];return h&&!m?c[d]=void 0:c[d]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:o,pattern:t}}function wq(t,e=!1,r=!0){Dr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function bq(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Dr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Pa(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=t.charAt(r);return i&&i!=="/"?null:t.slice(r)||"/"}function xq(t,e="/"){let{pathname:r,search:i="",hash:s=""}=typeof t=="string"?Bo(t):t;return{pathname:r?r.startsWith("/")?r:Eq(r,e):e,search:Iq(i),hash:Cq(s)}}function Eq(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function xy(t,e,r,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Sq(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function mS(t){let e=Sq(t);return e.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase)}function gS(t,e,r,i=!1){let s;typeof t=="string"?s=Bo(t):(s={...t},$t(!s.pathname||!s.pathname.includes("?"),xy("?","pathname","search",s)),$t(!s.pathname||!s.pathname.includes("#"),xy("#","pathname","hash",s)),$t(!s.search||!s.search.includes("#"),xy("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=r;else{let h=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?e[h]:"/"}let u=xq(s,l),c=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}var ps=t=>t.join("/").replace(/\/\/+/g,"/"),Tq=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Iq=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Cq=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kq(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var WO=["POST","PUT","PATCH","DELETE"];new Set(WO);var Nq=["GET",...WO];new Set(Nq);var Au=S.createContext(null);Au.displayName="DataRouter";var dg=S.createContext(null);dg.displayName="DataRouterState";var GO=S.createContext({isTransitioning:!1});GO.displayName="ViewTransition";var Aq=S.createContext(new Map);Aq.displayName="Fetchers";var Rq=S.createContext(null);Rq.displayName="Await";var _i=S.createContext(null);_i.displayName="Navigation";var oh=S.createContext(null);oh.displayName="Location";var Wi=S.createContext({outlet:null,matches:[],isDataRoute:!1});Wi.displayName="Route";var vS=S.createContext(null);vS.displayName="RouteError";function Pq(t,{relative:e}={}){$t(Ru(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=S.useContext(_i),{hash:s,pathname:a,search:o}=lh(t,{relative:e}),l=a;return r!=="/"&&(l=a==="/"?r:ps([r,a])),i.createHref({pathname:l,search:o,hash:s})}function Ru(){return S.useContext(oh)!=null}function ti(){return $t(Ru(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(oh).location}var KO="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function YO(t){S.useContext(_i).static||S.useLayoutEffect(t)}function yr(){let{isDataRoute:t}=S.useContext(Wi);return t?Hq():Dq()}function Dq(){$t(Ru(),"useNavigate() may be used only in the context of a <Router> component.");let t=S.useContext(Au),{basename:e,navigator:r}=S.useContext(_i),{matches:i}=S.useContext(Wi),{pathname:s}=ti(),a=JSON.stringify(mS(i)),o=S.useRef(!1);return YO(()=>{o.current=!0}),S.useCallback((u,c={})=>{if(Dr(o.current,KO),!o.current)return;if(typeof u=="number"){r.go(u);return}let d=gS(u,JSON.parse(a),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:ps([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,a,s,t])}S.createContext(null);function lh(t,{relative:e}={}){let{matches:r}=S.useContext(Wi),{pathname:i}=ti(),s=JSON.stringify(mS(r));return S.useMemo(()=>gS(t,JSON.parse(s),i,e==="path"),[t,s,i,e])}function Mq(t,e){return XO(t,e)}function XO(t,e,r,i){var w;$t(Ru(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:a}=S.useContext(_i),{matches:o}=S.useContext(Wi),l=o[o.length-1],u=l?l.params:{},c=l?l.pathname:"/",d=l?l.pathnameBase:"/",h=l&&l.route;{let E=h&&h.path||"";QO(c,!h||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let f=ti(),m;if(e){let E=typeof e=="string"?Bo(e):e;$t(d==="/"||((w=E.pathname)==null?void 0:w.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${E.pathname}" was given in the \`location\` prop.`),m=E}else m=f;let v=m.pathname||"/",y=v;if(d!=="/"){let E=d.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(E.length).join("/")}let b=!a&&r&&r.matches&&r.matches.length>0?r.matches:zO(t,{pathname:y});Dr(h||b!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Dr(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=Fq(b&&b.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:ps([d,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?d:ps([d,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,r,i);return e&&_?S.createElement(oh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},_):_}function Lq(){let t=qq(),e=kq(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=S.createElement(S.Fragment,null,S.createElement("p",null,"💿 Hey developer 👋"),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:a},"ErrorBoundary")," or"," ",S.createElement("code",{style:a},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),r?S.createElement("pre",{style:s},r):null,o)}var Oq=S.createElement(Lq,null),jq=class extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?S.createElement(Wi.Provider,{value:this.props.routeContext},S.createElement(vS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Vq({routeContext:t,match:e,children:r}){let i=S.useContext(Au);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),S.createElement(Wi.Provider,{value:t},r)}function Fq(t,e=[],r=null,i=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,a=r==null?void 0:r.errors;if(a!=null){let u=s.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id])!==void 0);$t(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let o=!1,l=-1;if(r)for(let u=0;u<s.length;u++){let c=s[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(l=u),c.route.id){let{loaderData:d,errors:h}=r,f=c.route.loader&&!d.hasOwnProperty(c.route.id)&&(!h||h[c.route.id]===void 0);if(c.route.lazy||f){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((u,c,d)=>{let h,f=!1,m=null,v=null;r&&(h=a&&c.route.id?a[c.route.id]:void 0,m=c.route.errorElement||Oq,o&&(l<0&&d===0?(QO("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,v=null):l===d&&(f=!0,v=c.route.hydrateFallbackElement||null)));let y=e.concat(s.slice(0,d+1)),b=()=>{let _;return h?_=m:f?_=v:c.route.Component?_=S.createElement(c.route.Component,null):c.route.element?_=c.route.element:_=u,S.createElement(Vq,{match:c,routeContext:{outlet:u,matches:y,isDataRoute:r!=null},children:_})};return r&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?S.createElement(jq,{location:r.location,revalidation:r.revalidation,component:m,error:h,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}function yS(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $q(t){let e=S.useContext(Au);return $t(e,yS(t)),e}function Uq(t){let e=S.useContext(dg);return $t(e,yS(t)),e}function Bq(t){let e=S.useContext(Wi);return $t(e,yS(t)),e}function _S(t){let e=Bq(t),r=e.matches[e.matches.length-1];return $t(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function zq(){return _S("useRouteId")}function qq(){var i;let t=S.useContext(vS),e=Uq("useRouteError"),r=_S("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[r]}function Hq(){let{router:t}=$q("useNavigate"),e=_S("useNavigate"),r=S.useRef(!1);return YO(()=>{r.current=!0}),S.useCallback(async(s,a={})=>{Dr(r.current,KO),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...a}))},[t,e])}var Ik={};function QO(t,e,r){!e&&!Ik[t]&&(Ik[t]=!0,Dr(!1,r))}S.memo(Wq);function Wq({routes:t,future:e,state:r}){return XO(t,void 0,r,e)}function JO({to:t,replace:e,state:r,relative:i}){$t(Ru(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=S.useContext(_i);Dr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=S.useContext(Wi),{pathname:o}=ti(),l=yr(),u=gS(t,mS(a),o,i==="path"),c=JSON.stringify(u);return S.useEffect(()=>{l(JSON.parse(c),{replace:e,state:r,relative:i})},[l,c,i,e,r]),null}function xr(t){$t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Gq({basename:t="/",children:e=null,location:r,navigationType:i="POP",navigator:s,static:a=!1}){$t(!Ru(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=S.useMemo(()=>({basename:o,navigator:s,static:a,future:{}}),[o,s,a]);typeof r=="string"&&(r=Bo(r));let{pathname:u="/",search:c="",hash:d="",state:h=null,key:f="default"}=r,m=S.useMemo(()=>{let v=Pa(u,o);return v==null?null:{location:{pathname:v,search:c,hash:d,state:h,key:f},navigationType:i}},[o,u,c,d,h,f,i]);return Dr(m!=null,`<Router basename="${o}"> is not able to match the URL "${u}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:S.createElement(_i.Provider,{value:l},S.createElement(oh.Provider,{children:e,value:m}))}function Kq({children:t,location:e}){return Mq(rE(t),e)}function rE(t,e=[]){let r=[];return S.Children.forEach(t,(i,s)=>{if(!S.isValidElement(i))return;let a=[...e,s];if(i.type===S.Fragment){r.push.apply(r,rE(i.props.children,a));return}$t(i.type===xr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),$t(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=rE(i.props.children,a)),r.push(o)}),r}var lp="get",up="application/x-www-form-urlencoded";function hg(t){return t!=null&&typeof t.tagName=="string"}function Yq(t){return hg(t)&&t.tagName.toLowerCase()==="button"}function Xq(t){return hg(t)&&t.tagName.toLowerCase()==="form"}function Qq(t){return hg(t)&&t.tagName.toLowerCase()==="input"}function Jq(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Zq(t,e){return t.button===0&&(!e||e==="_self")&&!Jq(t)}function iE(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let i=t[r];return e.concat(Array.isArray(i)?i.map(s=>[r,s]):[[r,i]])},[]))}function eH(t,e){let r=iE(t);return e&&e.forEach((i,s)=>{r.has(s)||e.getAll(s).forEach(a=>{r.append(s,a)})}),r}var Ef=null;function tH(){if(Ef===null)try{new FormData(document.createElement("form"),0),Ef=!1}catch{Ef=!0}return Ef}var nH=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ey(t){return t!=null&&!nH.has(t)?(Dr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${up}"`),null):t}function rH(t,e){let r,i,s,a,o;if(Xq(t)){let l=t.getAttribute("action");i=l?Pa(l,e):null,r=t.getAttribute("method")||lp,s=Ey(t.getAttribute("enctype"))||up,a=new FormData(t)}else if(Yq(t)||Qq(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||l.getAttribute("action");if(i=u?Pa(u,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||lp,s=Ey(t.getAttribute("formenctype"))||Ey(l.getAttribute("enctype"))||up,a=new FormData(l,t),!tH()){let{name:c,type:d,value:h}=t;if(d==="image"){let f=c?`${c}.`:"";a.append(`${f}x`,"0"),a.append(`${f}y`,"0")}else c&&a.append(c,h)}}else{if(hg(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=lp,i=null,s=up,o=t}return a&&s==="text/plain"&&(o=a,a=void 0),{action:i,method:r.toLowerCase(),encType:s,formData:a,body:o}}function wS(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function iH(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function sH(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function aH(t,e,r){let i=await Promise.all(t.map(async s=>{let a=e.routes[s.route.id];if(a){let o=await iH(a,r);return o.links?o.links():[]}return[]}));return cH(i.flat(1).filter(sH).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Ck(t,e,r,i,s,a){let o=(u,c)=>r[c]?u.route.id!==r[c].route.id:!0,l=(u,c)=>{var d;return r[c].pathname!==u.pathname||((d=r[c].route.path)==null?void 0:d.endsWith("*"))&&r[c].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,c)=>o(u,c)||l(u,c)):a==="data"?e.filter((u,c)=>{var h;let d=i.routes[u.route.id];if(!d||!d.hasLoader)return!1;if(o(u,c)||l(u,c))return!0;if(u.route.shouldRevalidate){let f=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function oH(t,e){return lH(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function lH(t){return[...new Set(t)]}function uH(t){let e={},r=Object.keys(t).sort();for(let i of r)e[i]=t[i];return e}function cH(t,e){let r=new Set;return new Set(e),t.reduce((i,s)=>{let a=JSON.stringify(uH(s));return r.has(a)||(r.add(a),i.push({key:a,link:s})),i},[])}function dH(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function hH(){let t=S.useContext(Au);return wS(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function fH(){let t=S.useContext(dg);return wS(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var bS=S.createContext(void 0);bS.displayName="FrameworkContext";function ZO(){let t=S.useContext(bS);return wS(t,"You must render this element inside a <HydratedRouter> element"),t}function pH(t,e){let r=S.useContext(bS),[i,s]=S.useState(!1),[a,o]=S.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:c,onMouseLeave:d,onTouchStart:h}=e,f=S.useRef(null);S.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let y=_=>{_.forEach(w=>{o(w.isIntersecting)})},b=new IntersectionObserver(y,{threshold:.5});return f.current&&b.observe(f.current),()=>{b.disconnect()}}},[t]),S.useEffect(()=>{if(i){let y=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(y)}}},[i]);let m=()=>{s(!0)},v=()=>{s(!1),o(!1)};return r?t!=="intent"?[a,f,{}]:[a,f,{onFocus:dc(l,m),onBlur:dc(u,v),onMouseEnter:dc(c,m),onMouseLeave:dc(d,v),onTouchStart:dc(h,m)}]:[!1,f,{}]}function dc(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function mH({page:t,...e}){let{router:r}=hH(),i=S.useMemo(()=>zO(r.routes,t,r.basename),[r.routes,t,r.basename]);return i?S.createElement(vH,{page:t,matches:i,...e}):null}function gH(t){let{manifest:e,routeModules:r}=ZO(),[i,s]=S.useState([]);return S.useEffect(()=>{let a=!1;return aH(t,e,r).then(o=>{a||s(o)}),()=>{a=!0}},[t,e,r]),i}function vH({page:t,matches:e,...r}){let i=ti(),{manifest:s,routeModules:a}=ZO(),{loaderData:o,matches:l}=fH(),u=S.useMemo(()=>Ck(t,e,l,s,i,"data"),[t,e,l,s,i]),c=S.useMemo(()=>Ck(t,e,l,s,i,"assets"),[t,e,l,s,i]),d=S.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let m=new Set,v=!1;if(e.forEach(b=>{var w;let _=s.routes[b.route.id];!_||!_.hasLoader||(!u.some(E=>E.route.id===b.route.id)&&b.route.id in o&&((w=a[b.route.id])!=null&&w.shouldRevalidate)||_.hasClientLoader?v=!0:m.add(b.route.id))}),m.size===0)return[];let y=dH(t);return v&&m.size>0&&y.searchParams.set("_routes",e.filter(b=>m.has(b.route.id)).map(b=>b.route.id).join(",")),[y.pathname+y.search]},[o,i,s,u,e,t,a]),h=S.useMemo(()=>oH(c,s),[c,s]),f=gH(c);return S.createElement(S.Fragment,null,d.map(m=>S.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...r})),h.map(m=>S.createElement("link",{key:m,rel:"modulepreload",href:m,...r})),f.map(({key:m,link:v})=>S.createElement("link",{key:m,...v})))}function yH(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var ej=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{ej&&(window.__reactRouterVersion="7.1.5")}catch{}function _H({basename:t,children:e,window:r}){let i=S.useRef();i.current==null&&(i.current=aq({window:r,v5Compat:!0}));let s=i.current,[a,o]=S.useState({action:s.action,location:s.location}),l=S.useCallback(u=>{S.startTransition(()=>o(u))},[o]);return S.useLayoutEffect(()=>s.listen(l),[s,l]),S.createElement(Gq,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:s})}var tj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,nd=S.forwardRef(function({onClick:e,discover:r="render",prefetch:i="none",relative:s,reloadDocument:a,replace:o,state:l,target:u,to:c,preventScrollReset:d,viewTransition:h,...f},m){let{basename:v}=S.useContext(_i),y=typeof c=="string"&&tj.test(c),b,_=!1;if(typeof c=="string"&&y&&(b=c,ej))try{let T=new URL(window.location.href),I=c.startsWith("//")?new URL(T.protocol+c):new URL(c),x=Pa(I.pathname,v);I.origin===T.origin&&x!=null?c=x+I.search+I.hash:_=!0}catch{Dr(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=Pq(c,{relative:s}),[E,N,M]=pH(i,f),O=EH(c,{replace:o,state:l,target:u,preventScrollReset:d,relative:s,viewTransition:h});function A(T){e&&e(T),T.defaultPrevented||O(T)}let D=S.createElement("a",{...f,...M,href:b||w,onClick:_||a?e:A,ref:yH(m,N),target:u,"data-discover":!y&&r==="render"?"true":void 0});return E&&!y?S.createElement(S.Fragment,null,D,S.createElement(mH,{page:w})):D});nd.displayName="Link";var wH=S.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:i="",end:s=!1,style:a,to:o,viewTransition:l,children:u,...c},d){let h=lh(o,{relative:c.relative}),f=ti(),m=S.useContext(dg),{navigator:v,basename:y}=S.useContext(_i),b=m!=null&&kH(h)&&l===!0,_=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,w=f.pathname,E=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(w=w.toLowerCase(),E=E?E.toLowerCase():null,_=_.toLowerCase()),E&&y&&(E=Pa(E,y)||E);const N=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let M=w===_||!s&&w.startsWith(_)&&w.charAt(N)==="/",O=E!=null&&(E===_||!s&&E.startsWith(_)&&E.charAt(_.length)==="/"),A={isActive:M,isPending:O,isTransitioning:b},D=M?e:void 0,T;typeof i=="function"?T=i(A):T=[i,M?"active":null,O?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let I=typeof a=="function"?a(A):a;return S.createElement(nd,{...c,"aria-current":D,className:T,ref:d,style:I,to:o,viewTransition:l},typeof u=="function"?u(A):u)});wH.displayName="NavLink";var bH=S.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:i,replace:s,state:a,method:o=lp,action:l,onSubmit:u,relative:c,preventScrollReset:d,viewTransition:h,...f},m)=>{let v=IH(),y=CH(l,{relative:c}),b=o.toLowerCase()==="get"?"get":"post",_=typeof l=="string"&&tj.test(l),w=E=>{if(u&&u(E),E.defaultPrevented)return;E.preventDefault();let N=E.nativeEvent.submitter,M=(N==null?void 0:N.getAttribute("formmethod"))||o;v(N||E.currentTarget,{fetcherKey:e,method:M,navigate:r,replace:s,state:a,relative:c,preventScrollReset:d,viewTransition:h})};return S.createElement("form",{ref:m,method:b,action:y,onSubmit:i?u:w,...f,"data-discover":!_&&t==="render"?"true":void 0})});bH.displayName="Form";function xH(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function nj(t){let e=S.useContext(Au);return $t(e,xH(t)),e}function EH(t,{target:e,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}={}){let l=yr(),u=ti(),c=lh(t,{relative:a});return S.useCallback(d=>{if(Zq(d,e)){d.preventDefault();let h=r!==void 0?r:Nd(u)===Nd(c);l(t,{replace:h,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[u,l,c,r,i,e,t,s,a,o])}function fg(t){Dr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=S.useRef(iE(t)),r=S.useRef(!1),i=ti(),s=S.useMemo(()=>eH(i.search,r.current?null:e.current),[i.search]),a=yr(),o=S.useCallback((l,u)=>{const c=iE(typeof l=="function"?l(s):l);r.current=!0,a("?"+c,u)},[a,s]);return[s,o]}var SH=0,TH=()=>`__${String(++SH)}__`;function IH(){let{router:t}=nj("useSubmit"),{basename:e}=S.useContext(_i),r=zq();return S.useCallback(async(i,s={})=>{let{action:a,method:o,encType:l,formData:u,body:c}=rH(i,e);if(s.navigate===!1){let d=s.fetcherKey||TH();await t.fetch(d,r,s.action||a,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await t.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function CH(t,{relative:e}={}){let{basename:r}=S.useContext(_i),i=S.useContext(Wi);$t(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a={...lh(t||".",{relative:e})},o=ti();if(t==null){a.search=o.search;let l=new URLSearchParams(a.search),u=l.getAll("index");if(u.some(d=>d==="")){l.delete("index"),u.filter(h=>h).forEach(h=>l.append("index",h));let d=l.toString();a.search=d?`?${d}`:""}}return(!t||t===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:ps([r,a.pathname])),Nd(a)}function kH(t,e={}){let r=S.useContext(GO);$t(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=nj("useViewTransitionState"),s=lh(t,{relative:e.relative});if(!r.isTransitioning)return!1;let a=Pa(r.currentLocation.pathname,i)||r.currentLocation.pathname,o=Pa(r.nextLocation.pathname,i)||r.nextLocation.pathname;return Jp(s.pathname,o)!=null||Jp(s.pathname,a)!=null}new TextEncoder;var kk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj=function(t){const e=[];let r=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},NH=function(t){const e=[];let r=0,i=0;for(;r<t.length;){const s=t[r++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[r++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[r++],o=t[r++],l=t[r++],u=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const a=t[r++],o=t[r++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},ij={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,d=a>>2,h=(a&3)<<4|l>>4;let f=(l&15)<<2|c>>6,m=c&63;u||(m=64,o||(f=64)),i.push(r[d],r[h],r[f],r[m])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(rj(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):NH(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const a=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const h=s<t.length?r[t.charAt(s)]:64;if(++s,a==null||l==null||c==null||h==null)throw new AH;const f=a<<2|l>>4;if(i.push(f),c!==64){const m=l<<4&240|c>>2;if(i.push(m),h!==64){const v=c<<6&192|h;i.push(v)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RH=function(t){const e=rj(t);return ij.encodeByteArray(e,!0)},Zp=function(t){return RH(t).replace(/\./g,"")},sj=function(t){try{return ij.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PH(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DH=()=>PH().__FIREBASE_DEFAULTS__,MH=()=>{if(typeof process>"u"||typeof kk>"u")return;const t=kk.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},LH=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sj(t[1]);return e&&JSON.parse(e)},pg=()=>{try{return DH()||MH()||LH()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},aj=t=>{var e,r;return(r=(e=pg())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},OH=t=>{const e=aj(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),i]:[e.substring(0,r),i]},oj=()=>{var t;return(t=pg())===null||t===void 0?void 0:t.config},lj=t=>{var e;return(e=pg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jH{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,i)=>{r?this.reject(r):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VH(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Zp(JSON.stringify(r)),Zp(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function FH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yn())}function $H(){var t;const e=(t=pg())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UH(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function BH(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function zH(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function qH(){const t=Yn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function HH(){return!$H()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function WH(){try{return typeof indexedDB=="object"}catch{return!1}}function GH(){return new Promise((t,e)=>{try{let r=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KH="FirebaseError";class Ps extends Error{constructor(e,r,i){super(r),this.code=e,this.customData=i,this.name=KH,Object.setPrototypeOf(this,Ps.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,uh.prototype.create)}}class uh{constructor(e,r,i){this.service=e,this.serviceName=r,this.errors=i}create(e,...r){const i=r[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?YH(a,i):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Ps(s,l,i)}}function YH(t,e){return t.replace(XH,(r,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const XH=/\{\$([^}]+)}/g;function QH(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function em(t,e){if(t===e)return!0;const r=Object.keys(t),i=Object.keys(e);for(const s of r){if(!i.includes(s))return!1;const a=t[s],o=e[s];if(Nk(a)&&Nk(o)){if(!em(a,o))return!1}else if(a!==o)return!1}for(const s of i)if(!r.includes(s))return!1;return!0}function Nk(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ch(t){const e=[];for(const[r,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Rc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Pc(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function JH(t,e){const r=new ZH(t,e);return r.subscribe.bind(r)}class ZH{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,i){let s;if(e===void 0&&r===void 0&&i===void 0)throw new Error("Missing Observer.");eW(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:i},s.next===void 0&&(s.next=Sy),s.error===void 0&&(s.error=Sy),s.complete===void 0&&(s.complete=Sy);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eW(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Sy(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ln(t){return t&&t._delegate?t._delegate:t}class No{constructor(e,r,i){this.name=e,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const so="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tW=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const i=new jH;if(this.instancesDeferred.set(r,i),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rW(e))try{this.getOrInitializeService({instanceIdentifier:so})}catch{}for(const[r,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=so){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=so){return this.instances.has(e)}getOptions(e=so){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:r});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);i===l&&o.resolve(s)}return s}onInit(e,r){var i;const s=this.normalizeInstanceIdentifier(r),a=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&e(o,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const i=this.onInitCallbacks.get(r);if(i)for(const s of i)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:nW(e),options:r}),this.instances.set(e,i),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=so){return this.component?this.component.multipleInstances?e:so:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function nW(t){return t===so?void 0:t}function rW(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iW{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new tW(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(rt||(rt={}));const sW={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},aW=rt.INFO,oW={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},lW=(t,e,...r)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=oW[e];if(s)console[s](`[${i}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class xS{constructor(e){this.name=e,this._logLevel=aW,this._logHandler=lW,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?sW[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}}const uW=(t,e)=>e.some(r=>t instanceof r);let Ak,Rk;function cW(){return Ak||(Ak=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dW(){return Rk||(Rk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const uj=new WeakMap,sE=new WeakMap,cj=new WeakMap,Ty=new WeakMap,ES=new WeakMap;function hW(t){const e=new Promise((r,i)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(wa(t.result)),s()},o=()=>{i(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&uj.set(r,t)}).catch(()=>{}),ES.set(e,t),e}function fW(t){if(sE.has(t))return;const e=new Promise((r,i)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),s()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});sE.set(t,e)}let aE={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return sE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||cj.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return wa(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function pW(t){aE=t(aE)}function mW(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const i=t.call(Iy(this),e,...r);return cj.set(i,e.sort?e.sort():[e]),wa(i)}:dW().includes(t)?function(...e){return t.apply(Iy(this),e),wa(uj.get(this))}:function(...e){return wa(t.apply(Iy(this),e))}}function gW(t){return typeof t=="function"?mW(t):(t instanceof IDBTransaction&&fW(t),uW(t,cW())?new Proxy(t,aE):t)}function wa(t){if(t instanceof IDBRequest)return hW(t);if(Ty.has(t))return Ty.get(t);const e=gW(t);return e!==t&&(Ty.set(t,e),ES.set(e,t)),e}const Iy=t=>ES.get(t);function vW(t,e,{blocked:r,upgrade:i,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=wa(o);return i&&o.addEventListener("upgradeneeded",u=>{i(wa(o.result),u.oldVersion,u.newVersion,wa(o.transaction),u)}),r&&o.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{a&&u.addEventListener("close",()=>a()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const yW=["get","getKey","getAll","getAllKeys","count"],_W=["put","add","delete","clear"],Cy=new Map;function Pk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Cy.get(e))return Cy.get(e);const r=e.replace(/FromIndex$/,""),i=e!==r,s=_W.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(s||yW.includes(r)))return;const a=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[r](...l),s&&u.done]))[0]};return Cy.set(e,a),a}pW(t=>({...t,get:(e,r,i)=>Pk(e,r)||t.get(e,r,i),has:(e,r)=>!!Pk(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wW{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(bW(r)){const i=r.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(r=>r).join(" ")}}function bW(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const oE="@firebase/app",Dk="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs=new xS("@firebase/app"),xW="@firebase/app-compat",EW="@firebase/analytics-compat",SW="@firebase/analytics",TW="@firebase/app-check-compat",IW="@firebase/app-check",CW="@firebase/auth",kW="@firebase/auth-compat",NW="@firebase/database",AW="@firebase/data-connect",RW="@firebase/database-compat",PW="@firebase/functions",DW="@firebase/functions-compat",MW="@firebase/installations",LW="@firebase/installations-compat",OW="@firebase/messaging",jW="@firebase/messaging-compat",VW="@firebase/performance",FW="@firebase/performance-compat",$W="@firebase/remote-config",UW="@firebase/remote-config-compat",BW="@firebase/storage",zW="@firebase/storage-compat",qW="@firebase/firestore",HW="@firebase/vertexai",WW="@firebase/firestore-compat",GW="firebase",KW="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lE="[DEFAULT]",YW={[oE]:"fire-core",[xW]:"fire-core-compat",[SW]:"fire-analytics",[EW]:"fire-analytics-compat",[IW]:"fire-app-check",[TW]:"fire-app-check-compat",[CW]:"fire-auth",[kW]:"fire-auth-compat",[NW]:"fire-rtdb",[AW]:"fire-data-connect",[RW]:"fire-rtdb-compat",[PW]:"fire-fn",[DW]:"fire-fn-compat",[MW]:"fire-iid",[LW]:"fire-iid-compat",[OW]:"fire-fcm",[jW]:"fire-fcm-compat",[VW]:"fire-perf",[FW]:"fire-perf-compat",[$W]:"fire-rc",[UW]:"fire-rc-compat",[BW]:"fire-gcs",[zW]:"fire-gcs-compat",[qW]:"fire-fst",[WW]:"fire-fst-compat",[HW]:"fire-vertex","fire-js":"fire-js",[GW]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tm=new Map,XW=new Map,uE=new Map;function Mk(t,e){try{t.container.addComponent(e)}catch(r){xs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function au(t){const e=t.name;if(uE.has(e))return xs.debug(`There were multiple attempts to register component ${e}.`),!1;uE.set(e,t);for(const r of tm.values())Mk(r,t);for(const r of XW.values())Mk(r,t);return!0}function SS(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function di(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QW={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ba=new uh("app","Firebase",QW);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JW{constructor(e,r,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new No("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ba.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=KW;function dj(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:lE,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw ba.create("bad-app-name",{appName:String(s)});if(r||(r=oj()),!r)throw ba.create("no-options");const a=tm.get(s);if(a){if(em(r,a.options)&&em(i,a.config))return a;throw ba.create("duplicate-app",{appName:s})}const o=new iW(s);for(const u of uE.values())o.addComponent(u);const l=new JW(r,i,o);return tm.set(s,l),l}function hj(t=lE){const e=tm.get(t);if(!e&&t===lE&&oj())return dj();if(!e)throw ba.create("no-app",{appName:t});return e}function xa(t,e,r){var i;let s=(i=YW[t])!==null&&i!==void 0?i:t;r&&(s+=`-${r}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${s}" with version "${e}":`];a&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),xs.warn(l.join(" "));return}au(new No(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZW="firebase-heartbeat-database",eG=1,Ad="firebase-heartbeat-store";let ky=null;function fj(){return ky||(ky=vW(ZW,eG,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ad)}catch(r){console.warn(r)}}}}).catch(t=>{throw ba.create("idb-open",{originalErrorMessage:t.message})})),ky}async function tG(t){try{const r=(await fj()).transaction(Ad),i=await r.objectStore(Ad).get(pj(t));return await r.done,i}catch(e){if(e instanceof Ps)xs.warn(e.message);else{const r=ba.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});xs.warn(r.message)}}}async function Lk(t,e){try{const i=(await fj()).transaction(Ad,"readwrite");await i.objectStore(Ad).put(e,pj(t)),await i.done}catch(r){if(r instanceof Ps)xs.warn(r.message);else{const i=ba.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});xs.warn(i.message)}}}function pj(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nG=1024,rG=30;class iG{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new aG(r),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Ok();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>rG){const o=oG(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){xs.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Ok(),{heartbeatsToSend:i,unsentEntries:s}=sG(this._heartbeatsCache.heartbeats),a=Zp(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return xs.warn(r),""}}}function Ok(){return new Date().toISOString().substring(0,10)}function sG(t,e=nG){const r=[];let i=t.slice();for(const s of t){const a=r.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),jk(r)>e){a.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),jk(r)>e){r.pop();break}i=i.slice(1)}return{heartbeatsToSend:r,unsentEntries:i}}class aG{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return WH()?GH().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await tG(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return Lk(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return Lk(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function jk(t){return Zp(JSON.stringify({version:2,heartbeats:t})).length}function oG(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let i=1;i<t.length;i++)t[i].date<r&&(r=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lG(t){au(new No("platform-logger",e=>new wW(e),"PRIVATE")),au(new No("heartbeat",e=>new iG(e),"PRIVATE")),xa(oE,Dk,t),xa(oE,Dk,"esm2017"),xa("fire-js","")}lG("");function TS(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r}function mj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const uG=mj,gj=new uh("auth","Firebase",mj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm=new xS("@firebase/auth");function cG(t,...e){nm.logLevel<=rt.WARN&&nm.warn(`Auth (${Pu}): ${t}`,...e)}function cp(t,...e){nm.logLevel<=rt.ERROR&&nm.error(`Auth (${Pu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(t,...e){throw IS(t,...e)}function Li(t,...e){return IS(t,...e)}function vj(t,e,r){const i=Object.assign(Object.assign({},uG()),{[e]:r});return new uh("auth","Firebase",i).create(e,{appName:t.name})}function Ea(t){return vj(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function IS(t,...e){if(typeof t!="string"){const r=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(r,...i)}return gj.create(t,...e)}function qe(t,e,...r){if(!t)throw IS(e,...r)}function os(t){const e="INTERNAL ASSERTION FAILED: "+t;throw cp(e),new Error(e)}function Es(t,e){t||os(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function dG(){return Vk()==="http:"||Vk()==="https:"}function Vk(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(dG()||BH()||"connection"in navigator)?navigator.onLine:!0}function fG(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dh{constructor(e,r){this.shortDelay=e,this.longDelay=r,Es(r>e,"Short delay should be less than long delay!"),this.isMobile=FH()||zH()}get(){return hG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(t,e){Es(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{static initialize(e,r,i){this.fetchImpl=e,r&&(this.headersImpl=r),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;os("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;os("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;os("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mG=new dh(3e4,6e4);function zo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ha(t,e,r,i,s={}){return _j(t,s,async()=>{let a={},o={};i&&(e==="GET"?o=i:a={body:JSON.stringify(i)});const l=ch(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},a);return UH()||(c.referrerPolicy="no-referrer"),yj.fetch()(wj(t,t.config.apiHost,r,l),c)})}async function _j(t,e,r){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},pG),e);try{const s=new vG(t),a=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Sf(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Sf(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Sf(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Sf(t,"user-disabled",o);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw vj(t,d,c);yi(t,d)}}catch(s){if(s instanceof Ps)throw s;yi(t,"network-request-failed",{message:String(s)})}}async function mg(t,e,r,i,s={}){const a=await Ha(t,e,r,i,s);return"mfaPendingCredential"in a&&yi(t,"multi-factor-auth-required",{_serverResponse:a}),a}function wj(t,e,r,i){const s=`${e}${r}?${i}`;return t.config.emulator?CS(t.config,s):`${t.config.apiScheme}://${s}`}function gG(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vG{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,i)=>{this.timer=setTimeout(()=>i(Li(this.auth,"network-request-failed")),mG.get())})}}function Sf(t,e,r){const i={appName:t.name};r.email&&(i.email=r.email),r.phoneNumber&&(i.phoneNumber=r.phoneNumber);const s=Li(t,e,i);return s.customData._tokenResponse=r,s}function Fk(t){return t!==void 0&&t.enterprise!==void 0}class yG{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return gG(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function _G(t,e){return Ha(t,"GET","/v2/recaptchaConfig",zo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wG(t,e){return Ha(t,"POST","/v1/accounts:delete",e)}async function bj(t,e){return Ha(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bG(t,e=!1){const r=Ln(t),i=await r.getIdToken(e),s=kS(i);qe(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:rd(Ny(s.auth_time)),issuedAtTime:rd(Ny(s.iat)),expirationTime:rd(Ny(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Ny(t){return Number(t)*1e3}function kS(t){const[e,r,i]=t.split(".");if(e===void 0||r===void 0||i===void 0)return cp("JWT malformed, contained fewer than 3 sections"),null;try{const s=sj(r);return s?JSON.parse(s):(cp("Failed to decode base64 JWT payload"),null)}catch(s){return cp("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function $k(t){const e=kS(t);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rd(t,e,r=!1){if(r)return e;try{return await e}catch(i){throw i instanceof Ps&&xG(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function xG({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EG{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=rd(this.lastLoginAt),this.creationTime=rd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rm(t){var e;const r=t.auth,i=await t.getIdToken(),s=await Rd(t,bj(r,{idToken:i}));qe(s==null?void 0:s.users.length,r,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?xj(a.providerUserInfo):[],l=TG(t.providerData,o),u=t.isAnonymous,c=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),d=u?c:!1,h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new dE(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function SG(t){const e=Ln(t);await rm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TG(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function xj(t){return t.map(e=>{var{providerId:r}=e,i=TS(e,["providerId"]);return{providerId:r,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IG(t,e){const r=await _j(t,{},async()=>{const i=ch({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=wj(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",yj.fetch()(o,{method:"POST",headers:l,body:i})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function CG(t,e){return Ha(t,"POST","/v2/accounts:revokeToken",zo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):$k(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const r=$k(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:i,refreshToken:s,expiresIn:a}=await IG(e,r);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,r,i){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,r){const{refreshToken:i,accessToken:s,expirationTime:a}=r,o=new ql;return i&&(qe(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),s&&(qe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(qe(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ql,this.toJSON())}_performRefresh(){return os("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hs(t,e){qe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ls{constructor(e){var{uid:r,auth:i,stsTokenManager:s}=e,a=TS(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new EG(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new dE(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await Rd(this,this.stsTokenManager.getToken(this.auth,e));return qe(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return bG(this,e)}reload(){return SG(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new ls(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),r&&await rm(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(di(this.auth.app))return Promise.reject(Ea(this.auth));const e=await this.getIdToken();return await Rd(this,wG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var i,s,a,o,l,u,c,d;const h=(i=r.displayName)!==null&&i!==void 0?i:void 0,f=(s=r.email)!==null&&s!==void 0?s:void 0,m=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,v=(o=r.photoURL)!==null&&o!==void 0?o:void 0,y=(l=r.tenantId)!==null&&l!==void 0?l:void 0,b=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,_=(c=r.createdAt)!==null&&c!==void 0?c:void 0,w=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:E,emailVerified:N,isAnonymous:M,providerData:O,stsTokenManager:A}=r;qe(E&&A,e,"internal-error");const D=ql.fromJSON(this.name,A);qe(typeof E=="string",e,"internal-error"),Hs(h,e.name),Hs(f,e.name),qe(typeof N=="boolean",e,"internal-error"),qe(typeof M=="boolean",e,"internal-error"),Hs(m,e.name),Hs(v,e.name),Hs(y,e.name),Hs(b,e.name),Hs(_,e.name),Hs(w,e.name);const T=new ls({uid:E,auth:e,email:f,emailVerified:N,displayName:h,isAnonymous:M,photoURL:v,phoneNumber:m,tenantId:y,stsTokenManager:D,createdAt:_,lastLoginAt:w});return O&&Array.isArray(O)&&(T.providerData=O.map(I=>Object.assign({},I))),b&&(T._redirectEventId=b),T}static async _fromIdTokenResponse(e,r,i=!1){const s=new ql;s.updateFromServerResponse(r);const a=new ls({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await rm(a),a}static async _fromGetAccountInfoResponse(e,r,i){const s=r.users[0];qe(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?xj(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new ql;l.updateFromIdToken(i);const u=new ls({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new dE(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=new Map;function us(t){Es(t instanceof Function,"Expected a class definition");let e=Uk.get(t);return e?(Es(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Uk.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}Ej.type="NONE";const Bk=Ej;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(t,e,r){return`firebase:${t}:${e}:${r}`}class Hl{constructor(e,r,i){this.persistence=e,this.auth=r,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=dp(this.userKey,s.apiKey,a),this.fullPersistenceKey=dp("persistence",s.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ls._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,i="authUser"){if(!r.length)return new Hl(us(Bk),e,i);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let a=s[0]||us(Bk);const o=dp(i,e.config.apiKey,e.name);let l=null;for(const c of r)try{const d=await c._get(o);if(d){const h=ls._fromJSON(e,d);c!==a&&(l=h),a=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new Hl(a,e,i):(a=u[0],l&&await a._set(o,l.toJSON()),await Promise.all(r.map(async c=>{if(c!==a)try{await c._remove(o)}catch{}})),new Hl(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Cj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Sj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Nj(e))return"Blackberry";if(Aj(e))return"Webos";if(Tj(e))return"Safari";if((e.includes("chrome/")||Ij(e))&&!e.includes("edge/"))return"Chrome";if(kj(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(r);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Sj(t=Yn()){return/firefox\//i.test(t)}function Tj(t=Yn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ij(t=Yn()){return/crios\//i.test(t)}function Cj(t=Yn()){return/iemobile/i.test(t)}function kj(t=Yn()){return/android/i.test(t)}function Nj(t=Yn()){return/blackberry/i.test(t)}function Aj(t=Yn()){return/webos/i.test(t)}function NS(t=Yn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function kG(t=Yn()){var e;return NS(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function NG(){return qH()&&document.documentMode===10}function Rj(t=Yn()){return NS(t)||kj(t)||Aj(t)||Nj(t)||/windows phone/i.test(t)||Cj(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(t,e=[]){let r;switch(t){case"Browser":r=zk(Yn());break;case"Worker":r=`${zk(Yn())}-${t}`;break;default:r=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Pu}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AG{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const i=a=>new Promise((o,l)=>{try{const u=e(a);o(u)}catch(u){l(u)}});i.onAbort=r,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const i of this.queue)await i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RG(t,e={}){return Ha(t,"GET","/v2/passwordPolicy",zo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PG=6;class DG{constructor(e){var r,i,s,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:PG,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,i,s,a,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,r){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(r.meetsMinPasswordLength=e.length>=i),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,r,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MG{constructor(e,r,i,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new qk(this),this.idTokenSubscription=new qk(this),this.beforeStateQueue=new AG(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=us(r)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await Hl.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await bj(this,{idToken:e}),i=await ls._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(di(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await rm(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=fG()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(di(this.app))return Promise.reject(Ea(this));const r=e?Ln(e):null;return r&&qe(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return di(this.app)?Promise.reject(Ea(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return di(this.app)?Promise.reject(Ea(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(us(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await RG(this),r=new DG(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new uh("auth","Firebase",e())}onAuthStateChanged(e,r,i){return this.registerStateListener(this.authStateSubscription,e,r,i)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,i){return this.registerStateListener(this.idTokenSubscription,e,r,i)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(i.tenantId=this.tenantId),await CG(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const i=await this.getOrInitRedirectPersistenceManager(r);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&us(e)||this._popupRedirectResolver;qe(r,this,"argument-error"),this.redirectPersistenceManager=await Hl.create(this,[us(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,i;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,i,s){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,i,s);return()=>{o=!0,u()}}else{const u=e.addObserver(r);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(r["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;if(di(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&cG(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Du(t){return Ln(t)}class qk{constructor(e){this.auth=e,this.observer=null,this.addObserver=JH(r=>this.observer=r)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function LG(t){gg=t}function Dj(t){return gg.loadJS(t)}function OG(){return gg.recaptchaEnterpriseScript}function jG(){return gg.gapiScript}function VG(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class FG{constructor(){this.enterprise=new $G}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class $G{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const UG="recaptcha-enterprise",Mj="NO_RECAPTCHA";class BG{constructor(e){this.type=UG,this.auth=Du(e)}async verify(e="verify",r=!1){async function i(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{_G(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new yG(u);return a.tenantId==null?a._agentRecaptchaConfig=c:a._tenantRecaptchaConfigs[a.tenantId]=c,o(c.siteKey)}}).catch(u=>{l(u)})})}function s(a,o,l){const u=window.grecaptcha;Fk(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(c=>{o(c)}).catch(()=>{o(Mj)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new FG().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{i(this.auth).then(l=>{if(!r&&Fk(window.grecaptcha))s(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=OG();u.length!==0&&(u+=l),Dj(u).then(()=>{s(l,a,o)}).catch(c=>{o(c)})}}).catch(l=>{o(l)})})}}async function Hk(t,e,r,i=!1,s=!1){const a=new BG(t);let o;if(s)o=Mj;else try{o=await a.verify(r)}catch{o=await a.verify(r,!0)}const l=Object.assign({},e);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,c=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Wk(t,e,r,i,s){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Hk(t,e,r,r==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Hk(t,e,r,r==="getOobCode");return i(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zG(t,e){const r=SS(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),a=r.getOptions();if(em(a,e??{}))return s;yi(s,"already-initialized")}return r.initialize({options:e})}function qG(t,e){const r=(e==null?void 0:e.persistence)||[],i=(Array.isArray(r)?r:[r]).map(us);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function HG(t,e,r){const i=Du(t);qe(i._canInitEmulator,i,"emulator-config-failed"),qe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=Lj(e),{host:o,port:l}=WG(e),u=l===null?"":`:${l}`;i.config.emulator={url:`${a}//${o}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),GG()}function Lj(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function WG(t){const e=Lj(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const i=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:Gk(i.substr(a.length+1))}}else{const[a,o]=i.split(":");return{host:a,port:Gk(o)}}}function Gk(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function GG(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AS{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return os("not implemented")}_getIdTokenResponse(e){return os("not implemented")}_linkToIdToken(e,r){return os("not implemented")}_getReauthenticationResolver(e){return os("not implemented")}}async function KG(t,e){return Ha(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YG(t,e){return mg(t,"POST","/v1/accounts:signInWithPassword",zo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XG(t,e){return mg(t,"POST","/v1/accounts:signInWithEmailLink",zo(t,e))}async function QG(t,e){return mg(t,"POST","/v1/accounts:signInWithEmailLink",zo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pd extends AS{constructor(e,r,i,s=null){super("password",i),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new Pd(e,r,"password")}static _fromEmailAndCode(e,r,i=null){return new Pd(e,r,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wk(e,r,"signInWithPassword",YG);case"emailLink":return XG(e,{email:this._email,oobCode:this._password});default:yi(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const i={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Wk(e,i,"signUpPassword",KG);case"emailLink":return QG(e,{idToken:r,email:this._email,oobCode:this._password});default:yi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wl(t,e){return mg(t,"POST","/v1/accounts:signInWithIdp",zo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JG="http://localhost";class Ao extends AS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Ao(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):yi("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=r,a=TS(r,["providerId","signInMethod"]);if(!i||!s)return null;const o=new Ao(i,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return Wl(e,r)}_linkToIdToken(e,r){const i=this.buildRequest();return i.idToken=r,Wl(e,i)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Wl(e,r)}buildRequest(){const e={requestUri:JG,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=ch(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZG(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function eK(t){const e=Rc(Pc(t)).link,r=e?Rc(Pc(e)).deep_link_id:null,i=Rc(Pc(t)).deep_link_id;return(i?Rc(Pc(i)).link:null)||i||r||e||t}class RS{constructor(e){var r,i,s,a,o,l;const u=Rc(Pc(e)),c=(r=u.apiKey)!==null&&r!==void 0?r:null,d=(i=u.oobCode)!==null&&i!==void 0?i:null,h=ZG((s=u.mode)!==null&&s!==void 0?s:null);qe(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=eK(e);try{return new RS(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(){this.providerId=Mu.PROVIDER_ID}static credential(e,r){return Pd._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const i=RS.parseLink(r);return qe(i,"argument-error"),Pd._fromEmailAndCode(e,i.code,i.tenantId)}}Mu.PROVIDER_ID="password";Mu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Mu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh extends Oj{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na extends hh{constructor(){super("facebook.com")}static credential(e){return Ao._fromParams({providerId:na.PROVIDER_ID,signInMethod:na.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return na.credentialFromTaggedObject(e)}static credentialFromError(e){return na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return na.credential(e.oauthAccessToken)}catch{return null}}}na.FACEBOOK_SIGN_IN_METHOD="facebook.com";na.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ra extends hh{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Ao._fromParams({providerId:ra.PROVIDER_ID,signInMethod:ra.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return ra.credentialFromTaggedObject(e)}static credentialFromError(e){return ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:i}=e;if(!r&&!i)return null;try{return ra.credential(r,i)}catch{return null}}}ra.GOOGLE_SIGN_IN_METHOD="google.com";ra.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends hh{constructor(){super("github.com")}static credential(e){return Ao._fromParams({providerId:ia.PROVIDER_ID,signInMethod:ia.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ia.credentialFromTaggedObject(e)}static credentialFromError(e){return ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ia.credential(e.oauthAccessToken)}catch{return null}}}ia.GITHUB_SIGN_IN_METHOD="github.com";ia.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends hh{constructor(){super("twitter.com")}static credential(e,r){return Ao._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return sa.credentialFromTaggedObject(e)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:i}=e;if(!r||!i)return null;try{return sa.credential(r,i)}catch{return null}}}sa.TWITTER_SIGN_IN_METHOD="twitter.com";sa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,i,s=!1){const a=await ls._fromIdTokenResponse(e,i,s),o=Kk(i);return new ou({user:a,providerId:o,_tokenResponse:i,operationType:r})}static async _forOperation(e,r,i){await e._updateTokensIfNecessary(i,!0);const s=Kk(i);return new ou({user:e,providerId:s,_tokenResponse:i,operationType:r})}}function Kk(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im extends Ps{constructor(e,r,i,s){var a;super(r.code,r.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,im.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,r,i,s){return new im(e,r,i,s)}}function jj(t,e,r,i){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?im._fromErrorAndOperation(t,a,e,i):a})}async function tK(t,e,r=!1){const i=await Rd(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return ou._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nK(t,e,r=!1){const{auth:i}=t;if(di(i.app))return Promise.reject(Ea(i));const s="reauthenticate";try{const a=await Rd(t,jj(i,s,e,t),r);qe(a.idToken,i,"internal-error");const o=kS(a.idToken);qe(o,i,"internal-error");const{sub:l}=o;return qe(t.uid===l,i,"user-mismatch"),ou._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&yi(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vj(t,e,r=!1){if(di(t.app))return Promise.reject(Ea(t));const i="signIn",s=await jj(t,i,e),a=await ou._fromIdTokenResponse(t,i,s);return r||await t._updateCurrentUser(a.user),a}async function rK(t,e){return Vj(Du(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iK(t){const e=Du(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function sK(t,e,r){return di(t.app)?Promise.reject(Ea(t)):rK(Ln(t),Mu.credential(e,r)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&iK(t),i})}function aK(t,e,r,i){return Ln(t).onIdTokenChanged(e,r,i)}function oK(t,e,r){return Ln(t).beforeAuthStateChanged(e,r)}function lK(t,e,r,i){return Ln(t).onAuthStateChanged(e,r,i)}function uK(t){return Ln(t).signOut()}const sm="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(sm,"1"),this.storage.removeItem(sm),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cK=1e3,dK=10;class $j extends Fj{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Rj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&e(r,s,i)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const i=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(i);!r&&this.localCache[i]===o||this.notifyListeners(i,o)},a=this.storage.getItem(i);NG()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,dK):s()}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:i}),!0)})},cK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}$j.type="LOCAL";const hK=$j;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj extends Fj{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}Uj.type="SESSION";const Bj=Uj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fK(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const i=new vg(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:i,eventType:s,data:a}=r.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(o).map(async c=>c(r.origin,a)),u=await fK(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(t="",e=10){let r="";for(let i=0;i<e;i++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pK{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,u)=>{const c=PS("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(f.data.response);break;default:clearTimeout(d),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(){return window}function mK(t){Oi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(){return typeof Oi().WorkerGlobalScope<"u"&&typeof Oi().importScripts=="function"}async function gK(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function vK(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function yK(){return zj()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qj="firebaseLocalStorageDb",_K=1,am="firebaseLocalStorage",Hj="fbase_key";class fh{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function yg(t,e){return t.transaction([am],e?"readwrite":"readonly").objectStore(am)}function wK(){const t=indexedDB.deleteDatabase(qj);return new fh(t).toPromise()}function hE(){const t=indexedDB.open(qj,_K);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(am,{keyPath:Hj})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(am)?e(i):(i.close(),await wK(),e(await hE()))})})}async function Yk(t,e,r){const i=yg(t,!0).put({[Hj]:e,value:r});return new fh(i).toPromise()}async function bK(t,e){const r=yg(t,!1).get(e),i=await new fh(r).toPromise();return i===void 0?null:i.value}function Xk(t,e){const r=yg(t,!0).delete(e);return new fh(r).toPromise()}const xK=800,EK=3;class Wj{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await hE(),this.db)}async _withRetries(e){let r=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(r++>EK)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zj()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vg._getInstance(yK()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await gK(),!this.activeServiceWorker)return;this.sender=new pK(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||vK()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await hE();return await Yk(e,sm,"1"),await Xk(e,sm),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>Yk(i,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(i=>bK(i,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>Xk(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=yg(s,!1).getAll();return new fh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Wj.type="LOCAL";const SK=Wj;new dh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TK(t,e){return e?us(e):(qe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DS extends AS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wl(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Wl(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Wl(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function IK(t){return Vj(t.auth,new DS(t),t.bypassAuthState)}function CK(t){const{auth:e,user:r}=t;return qe(r,e,"internal-error"),nK(r,new DS(t),t.bypassAuthState)}async function kK(t){const{auth:e,user:r}=t;return qe(r,e,"internal-error"),tK(r,new DS(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e,r,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:i,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:r,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return IK;case"linkViaPopup":case"linkViaRedirect":return kK;case"reauthViaPopup":case"reauthViaRedirect":return CK;default:yi(this.auth,"internal-error")}}resolve(e){Es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Es(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NK=new dh(2e3,1e4);class Ll extends Gj{constructor(e,r,i,s,a){super(e,r,s,a),this.provider=i,this.authWindow=null,this.pollId=null,Ll.currentPopupAction&&Ll.currentPopupAction.cancel(),Ll.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){Es(this.filter.length===1,"Popup operations only handle one event");const e=PS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Li(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Li(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ll.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Li(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NK.get())};e()}}Ll.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AK="pendingRedirect",hp=new Map;class RK extends Gj{constructor(e,r,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,i),this.eventId=null}async execute(){let e=hp.get(this.auth._key());if(!e){try{const i=await PK(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(r){e=()=>Promise.reject(r)}hp.set(this.auth._key(),e)}return this.bypassAuthState||hp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function PK(t,e){const r=LK(e),i=MK(t);if(!await i._isAvailable())return!1;const s=await i._get(r)==="true";return await i._remove(r),s}function DK(t,e){hp.set(t._key(),e)}function MK(t){return us(t._redirectPersistence)}function LK(t){return dp(AK,t.config.apiKey,t.name)}async function OK(t,e,r=!1){if(di(t.app))return Promise.reject(Ea(t));const i=Du(t),s=TK(i,e),o=await new RK(i,s,r).execute();return o&&!r&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jK=10*60*1e3;class VK{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(r=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!FK(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var i;if(e.error&&!Kj(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";r.onError(Li(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const i=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=jK&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qk(e))}saveEventToCache(e){this.cachedEventUids.add(Qk(e)),this.lastProcessedEventTime=Date.now()}}function Qk(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Kj({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function FK(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kj(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $K(t,e={}){return Ha(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,BK=/^https?/;async function zK(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $K(t);for(const r of e)try{if(qK(r))return}catch{}yi(t,"unauthorized-domain")}function qK(t){const e=cE(),{protocol:r,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===i}if(!BK.test(r))return!1;if(UK.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HK=new dh(3e4,6e4);function Jk(){const t=Oi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function WK(t){return new Promise((e,r)=>{var i,s,a;function o(){Jk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Jk(),r(Li(t,"network-request-failed"))},timeout:HK.get()})}if(!((s=(i=Oi().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Oi().gapi)===null||a===void 0)&&a.load)o();else{const l=VG("iframefcb");return Oi()[l]=()=>{gapi.load?o():r(Li(t,"network-request-failed"))},Dj(`${jG()}?onload=${l}`).catch(u=>r(u))}}).catch(e=>{throw fp=null,e})}let fp=null;function GK(t){return fp=fp||WK(t),fp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KK=new dh(5e3,15e3),YK="__/auth/iframe",XK="emulator/auth/iframe",QK={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JK=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZK(t){const e=t.config;qe(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?CS(e,XK):`https://${t.config.authDomain}/${YK}`,i={apiKey:e.apiKey,appName:t.name,v:Pu},s=JK.get(t.config.apiHost);s&&(i.eid=s);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${r}?${ch(i).slice(1)}`}async function eY(t){const e=await GK(t),r=Oi().gapi;return qe(r,t,"internal-error"),e.open({where:document.body,url:ZK(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:QK,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const o=Li(t,"network-request-failed"),l=Oi().setTimeout(()=>{a(o)},KK.get());function u(){Oi().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tY={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nY=500,rY=600,iY="_blank",sY="http://localhost";class Zk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function aY(t,e,r,i=nY,s=rY){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u=Object.assign(Object.assign({},tY),{width:i.toString(),height:s.toString(),top:a,left:o}),c=Yn().toLowerCase();r&&(l=Ij(c)?iY:r),Sj(c)&&(e=e||sY,u.scrollbars="yes");const d=Object.entries(u).reduce((f,[m,v])=>`${f}${m}=${v},`,"");if(kG(c)&&l!=="_self")return oY(e||"",l),new Zk(null);const h=window.open(e||"",l,d);qe(h,t,"popup-blocked");try{h.focus()}catch{}return new Zk(h)}function oY(t,e){const r=document.createElement("a");r.href=t,r.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lY="__/auth/handler",uY="emulator/auth/handler",cY=encodeURIComponent("fac");async function eN(t,e,r,i,s,a){qe(t.config.authDomain,t,"auth-domain-config-required"),qe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:Pu,eventId:s};if(e instanceof Oj){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",QH(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof hh){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await t._getAppCheckToken(),c=u?`#${cY}=${encodeURIComponent(u)}`:"";return`${dY(t)}?${ch(l).slice(1)}${c}`}function dY({config:t}){return t.emulator?CS(t,uY):`https://${t.authDomain}/${lY}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay="webStorageSupport";class hY{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Bj,this._completeRedirectFn=OK,this._overrideRedirectResult=DK}async _openPopup(e,r,i,s){var a;Es((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await eN(e,r,i,cE(),s);return aY(e,o,PS())}async _openRedirect(e,r,i,s){await this._originValidation(e);const a=await eN(e,r,i,cE(),s);return mK(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:a}=this.eventManagers[r];return s?Promise.resolve(s):(Es(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[r]={promise:i},i.catch(()=>{delete this.eventManagers[r]}),i}async initAndGetManager(e){const r=await eY(e),i=new VK(e);return r.register("authEvent",s=>(qe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=r,i}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Ay,{type:Ay},s=>{var a;const o=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Ay];o!==void 0&&r(!!o),yi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=zK(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return Rj()||Tj()||NS()}}const fY=hY;var tN="@firebase/auth",nN="1.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pY{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mY(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function gY(t){au(new No("auth",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=i.options;qe(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pj(t)},c=new MG(i,s,a,u);return qG(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,i)=>{e.getProvider("auth-internal").initialize()})),au(new No("auth-internal",e=>{const r=Du(e.getProvider("auth").getImmediate());return(i=>new pY(i))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),xa(tN,nN,mY(t)),xa(tN,nN,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vY=5*60,yY=lj("authIdTokenMaxAge")||vY;let rN=null;const _Y=t=>async e=>{const r=e&&await e.getIdTokenResult(),i=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>yY)return;const s=r==null?void 0:r.token;rN!==s&&(rN=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function wY(t=hj()){const e=SS(t,"auth");if(e.isInitialized())return e.getImmediate();const r=zG(t,{popupRedirectResolver:fY,persistence:[SK,hK,Bj]}),i=lj("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const o=_Y(a.toString());oK(r,o,()=>o(r.currentUser)),aK(r,l=>o(l))}}const s=aj("auth");return s&&HG(r,`http://${s}`),r}function bY(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}LG({loadJS(t){return new Promise((e,r)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const a=Li("internal-error");a.customData=s,r(a)},i.type="text/javascript",i.charset="UTF-8",bY().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});gY("Browser");var xY="firebase",EY="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xa(xY,EY,"app");var iN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Sa,Yj;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,D){function T(){}T.prototype=D.prototype,A.D=D.prototype,A.prototype=new T,A.prototype.constructor=A,A.C=function(I,x,R){for(var P=Array(arguments.length-2),j=2;j<arguments.length;j++)P[j-2]=arguments[j];return D.prototype[x].apply(I,P)}}function r(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,r),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,D,T){T||(T=0);var I=Array(16);if(typeof D=="string")for(var x=0;16>x;++x)I[x]=D.charCodeAt(T++)|D.charCodeAt(T++)<<8|D.charCodeAt(T++)<<16|D.charCodeAt(T++)<<24;else for(x=0;16>x;++x)I[x]=D[T++]|D[T++]<<8|D[T++]<<16|D[T++]<<24;D=A.g[0],T=A.g[1],x=A.g[2];var R=A.g[3],P=D+(R^T&(x^R))+I[0]+3614090360&4294967295;D=T+(P<<7&4294967295|P>>>25),P=R+(x^D&(T^x))+I[1]+3905402710&4294967295,R=D+(P<<12&4294967295|P>>>20),P=x+(T^R&(D^T))+I[2]+606105819&4294967295,x=R+(P<<17&4294967295|P>>>15),P=T+(D^x&(R^D))+I[3]+3250441966&4294967295,T=x+(P<<22&4294967295|P>>>10),P=D+(R^T&(x^R))+I[4]+4118548399&4294967295,D=T+(P<<7&4294967295|P>>>25),P=R+(x^D&(T^x))+I[5]+1200080426&4294967295,R=D+(P<<12&4294967295|P>>>20),P=x+(T^R&(D^T))+I[6]+2821735955&4294967295,x=R+(P<<17&4294967295|P>>>15),P=T+(D^x&(R^D))+I[7]+4249261313&4294967295,T=x+(P<<22&4294967295|P>>>10),P=D+(R^T&(x^R))+I[8]+1770035416&4294967295,D=T+(P<<7&4294967295|P>>>25),P=R+(x^D&(T^x))+I[9]+2336552879&4294967295,R=D+(P<<12&4294967295|P>>>20),P=x+(T^R&(D^T))+I[10]+4294925233&4294967295,x=R+(P<<17&4294967295|P>>>15),P=T+(D^x&(R^D))+I[11]+2304563134&4294967295,T=x+(P<<22&4294967295|P>>>10),P=D+(R^T&(x^R))+I[12]+1804603682&4294967295,D=T+(P<<7&4294967295|P>>>25),P=R+(x^D&(T^x))+I[13]+4254626195&4294967295,R=D+(P<<12&4294967295|P>>>20),P=x+(T^R&(D^T))+I[14]+2792965006&4294967295,x=R+(P<<17&4294967295|P>>>15),P=T+(D^x&(R^D))+I[15]+1236535329&4294967295,T=x+(P<<22&4294967295|P>>>10),P=D+(x^R&(T^x))+I[1]+4129170786&4294967295,D=T+(P<<5&4294967295|P>>>27),P=R+(T^x&(D^T))+I[6]+3225465664&4294967295,R=D+(P<<9&4294967295|P>>>23),P=x+(D^T&(R^D))+I[11]+643717713&4294967295,x=R+(P<<14&4294967295|P>>>18),P=T+(R^D&(x^R))+I[0]+3921069994&4294967295,T=x+(P<<20&4294967295|P>>>12),P=D+(x^R&(T^x))+I[5]+3593408605&4294967295,D=T+(P<<5&4294967295|P>>>27),P=R+(T^x&(D^T))+I[10]+38016083&4294967295,R=D+(P<<9&4294967295|P>>>23),P=x+(D^T&(R^D))+I[15]+3634488961&4294967295,x=R+(P<<14&4294967295|P>>>18),P=T+(R^D&(x^R))+I[4]+3889429448&4294967295,T=x+(P<<20&4294967295|P>>>12),P=D+(x^R&(T^x))+I[9]+568446438&4294967295,D=T+(P<<5&4294967295|P>>>27),P=R+(T^x&(D^T))+I[14]+3275163606&4294967295,R=D+(P<<9&4294967295|P>>>23),P=x+(D^T&(R^D))+I[3]+4107603335&4294967295,x=R+(P<<14&4294967295|P>>>18),P=T+(R^D&(x^R))+I[8]+1163531501&4294967295,T=x+(P<<20&4294967295|P>>>12),P=D+(x^R&(T^x))+I[13]+2850285829&4294967295,D=T+(P<<5&4294967295|P>>>27),P=R+(T^x&(D^T))+I[2]+4243563512&4294967295,R=D+(P<<9&4294967295|P>>>23),P=x+(D^T&(R^D))+I[7]+1735328473&4294967295,x=R+(P<<14&4294967295|P>>>18),P=T+(R^D&(x^R))+I[12]+2368359562&4294967295,T=x+(P<<20&4294967295|P>>>12),P=D+(T^x^R)+I[5]+4294588738&4294967295,D=T+(P<<4&4294967295|P>>>28),P=R+(D^T^x)+I[8]+2272392833&4294967295,R=D+(P<<11&4294967295|P>>>21),P=x+(R^D^T)+I[11]+1839030562&4294967295,x=R+(P<<16&4294967295|P>>>16),P=T+(x^R^D)+I[14]+4259657740&4294967295,T=x+(P<<23&4294967295|P>>>9),P=D+(T^x^R)+I[1]+2763975236&4294967295,D=T+(P<<4&4294967295|P>>>28),P=R+(D^T^x)+I[4]+1272893353&4294967295,R=D+(P<<11&4294967295|P>>>21),P=x+(R^D^T)+I[7]+4139469664&4294967295,x=R+(P<<16&4294967295|P>>>16),P=T+(x^R^D)+I[10]+3200236656&4294967295,T=x+(P<<23&4294967295|P>>>9),P=D+(T^x^R)+I[13]+681279174&4294967295,D=T+(P<<4&4294967295|P>>>28),P=R+(D^T^x)+I[0]+3936430074&4294967295,R=D+(P<<11&4294967295|P>>>21),P=x+(R^D^T)+I[3]+3572445317&4294967295,x=R+(P<<16&4294967295|P>>>16),P=T+(x^R^D)+I[6]+76029189&4294967295,T=x+(P<<23&4294967295|P>>>9),P=D+(T^x^R)+I[9]+3654602809&4294967295,D=T+(P<<4&4294967295|P>>>28),P=R+(D^T^x)+I[12]+3873151461&4294967295,R=D+(P<<11&4294967295|P>>>21),P=x+(R^D^T)+I[15]+530742520&4294967295,x=R+(P<<16&4294967295|P>>>16),P=T+(x^R^D)+I[2]+3299628645&4294967295,T=x+(P<<23&4294967295|P>>>9),P=D+(x^(T|~R))+I[0]+4096336452&4294967295,D=T+(P<<6&4294967295|P>>>26),P=R+(T^(D|~x))+I[7]+1126891415&4294967295,R=D+(P<<10&4294967295|P>>>22),P=x+(D^(R|~T))+I[14]+2878612391&4294967295,x=R+(P<<15&4294967295|P>>>17),P=T+(R^(x|~D))+I[5]+4237533241&4294967295,T=x+(P<<21&4294967295|P>>>11),P=D+(x^(T|~R))+I[12]+1700485571&4294967295,D=T+(P<<6&4294967295|P>>>26),P=R+(T^(D|~x))+I[3]+2399980690&4294967295,R=D+(P<<10&4294967295|P>>>22),P=x+(D^(R|~T))+I[10]+4293915773&4294967295,x=R+(P<<15&4294967295|P>>>17),P=T+(R^(x|~D))+I[1]+2240044497&4294967295,T=x+(P<<21&4294967295|P>>>11),P=D+(x^(T|~R))+I[8]+1873313359&4294967295,D=T+(P<<6&4294967295|P>>>26),P=R+(T^(D|~x))+I[15]+4264355552&4294967295,R=D+(P<<10&4294967295|P>>>22),P=x+(D^(R|~T))+I[6]+2734768916&4294967295,x=R+(P<<15&4294967295|P>>>17),P=T+(R^(x|~D))+I[13]+1309151649&4294967295,T=x+(P<<21&4294967295|P>>>11),P=D+(x^(T|~R))+I[4]+4149444226&4294967295,D=T+(P<<6&4294967295|P>>>26),P=R+(T^(D|~x))+I[11]+3174756917&4294967295,R=D+(P<<10&4294967295|P>>>22),P=x+(D^(R|~T))+I[2]+718787259&4294967295,x=R+(P<<15&4294967295|P>>>17),P=T+(R^(x|~D))+I[9]+3951481745&4294967295,A.g[0]=A.g[0]+D&4294967295,A.g[1]=A.g[1]+(x+(P<<21&4294967295|P>>>11))&4294967295,A.g[2]=A.g[2]+x&4294967295,A.g[3]=A.g[3]+R&4294967295}i.prototype.u=function(A,D){D===void 0&&(D=A.length);for(var T=D-this.blockSize,I=this.B,x=this.h,R=0;R<D;){if(x==0)for(;R<=T;)s(this,A,R),R+=this.blockSize;if(typeof A=="string"){for(;R<D;)if(I[x++]=A.charCodeAt(R++),x==this.blockSize){s(this,I),x=0;break}}else for(;R<D;)if(I[x++]=A[R++],x==this.blockSize){s(this,I),x=0;break}}this.h=x,this.o+=D},i.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var D=1;D<A.length-8;++D)A[D]=0;var T=8*this.o;for(D=A.length-8;D<A.length;++D)A[D]=T&255,T/=256;for(this.u(A),A=Array(16),D=T=0;4>D;++D)for(var I=0;32>I;I+=8)A[T++]=this.g[D]>>>I&255;return A};function a(A,D){var T=l;return Object.prototype.hasOwnProperty.call(T,A)?T[A]:T[A]=D(A)}function o(A,D){this.h=D;for(var T=[],I=!0,x=A.length-1;0<=x;x--){var R=A[x]|0;I&&R==D||(T[x]=R,I=!1)}this.g=T}var l={};function u(A){return-128<=A&&128>A?a(A,function(D){return new o([D|0],0>D?-1:0)}):new o([A|0],0>A?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return h;if(0>A)return b(c(-A));for(var D=[],T=1,I=0;A>=T;I++)D[I]=A/T|0,T*=4294967296;return new o(D,0)}function d(A,D){if(A.length==0)throw Error("number format error: empty string");if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(A.charAt(0)=="-")return b(d(A.substring(1),D));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(D,8)),I=h,x=0;x<A.length;x+=8){var R=Math.min(8,A.length-x),P=parseInt(A.substring(x,x+R),D);8>R?(R=c(Math.pow(D,R)),I=I.j(R).add(c(P))):(I=I.j(T),I=I.add(c(P)))}return I}var h=u(0),f=u(1),m=u(16777216);t=o.prototype,t.m=function(){if(y(this))return-b(this).m();for(var A=0,D=1,T=0;T<this.g.length;T++){var I=this.i(T);A+=(0<=I?I:4294967296+I)*D,D*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(v(this))return"0";if(y(this))return"-"+b(this).toString(A);for(var D=c(Math.pow(A,6)),T=this,I="";;){var x=N(T,D).g;T=_(T,x.j(D));var R=((0<T.g.length?T.g[0]:T.h)>>>0).toString(A);if(T=x,v(T))return R+I;for(;6>R.length;)R="0"+R;I=R+I}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function v(A){if(A.h!=0)return!1;for(var D=0;D<A.g.length;D++)if(A.g[D]!=0)return!1;return!0}function y(A){return A.h==-1}t.l=function(A){return A=_(this,A),y(A)?-1:v(A)?0:1};function b(A){for(var D=A.g.length,T=[],I=0;I<D;I++)T[I]=~A.g[I];return new o(T,~A.h).add(f)}t.abs=function(){return y(this)?b(this):this},t.add=function(A){for(var D=Math.max(this.g.length,A.g.length),T=[],I=0,x=0;x<=D;x++){var R=I+(this.i(x)&65535)+(A.i(x)&65535),P=(R>>>16)+(this.i(x)>>>16)+(A.i(x)>>>16);I=P>>>16,R&=65535,P&=65535,T[x]=P<<16|R}return new o(T,T[T.length-1]&-2147483648?-1:0)};function _(A,D){return A.add(b(D))}t.j=function(A){if(v(this)||v(A))return h;if(y(this))return y(A)?b(this).j(b(A)):b(b(this).j(A));if(y(A))return b(this.j(b(A)));if(0>this.l(m)&&0>A.l(m))return c(this.m()*A.m());for(var D=this.g.length+A.g.length,T=[],I=0;I<2*D;I++)T[I]=0;for(I=0;I<this.g.length;I++)for(var x=0;x<A.g.length;x++){var R=this.i(I)>>>16,P=this.i(I)&65535,j=A.i(x)>>>16,$=A.i(x)&65535;T[2*I+2*x]+=P*$,w(T,2*I+2*x),T[2*I+2*x+1]+=R*$,w(T,2*I+2*x+1),T[2*I+2*x+1]+=P*j,w(T,2*I+2*x+1),T[2*I+2*x+2]+=R*j,w(T,2*I+2*x+2)}for(I=0;I<D;I++)T[I]=T[2*I+1]<<16|T[2*I];for(I=D;I<2*D;I++)T[I]=0;return new o(T,0)};function w(A,D){for(;(A[D]&65535)!=A[D];)A[D+1]+=A[D]>>>16,A[D]&=65535,D++}function E(A,D){this.g=A,this.h=D}function N(A,D){if(v(D))throw Error("division by zero");if(v(A))return new E(h,h);if(y(A))return D=N(b(A),D),new E(b(D.g),b(D.h));if(y(D))return D=N(A,b(D)),new E(b(D.g),D.h);if(30<A.g.length){if(y(A)||y(D))throw Error("slowDivide_ only works with positive integers.");for(var T=f,I=D;0>=I.l(A);)T=M(T),I=M(I);var x=O(T,1),R=O(I,1);for(I=O(I,2),T=O(T,2);!v(I);){var P=R.add(I);0>=P.l(A)&&(x=x.add(T),R=P),I=O(I,1),T=O(T,1)}return D=_(A,x.j(D)),new E(x,D)}for(x=h;0<=A.l(D);){for(T=Math.max(1,Math.floor(A.m()/D.m())),I=Math.ceil(Math.log(T)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),R=c(T),P=R.j(D);y(P)||0<P.l(A);)T-=I,R=c(T),P=R.j(D);v(R)&&(R=f),x=x.add(R),A=_(A,P)}return new E(x,A)}t.A=function(A){return N(this,A).h},t.and=function(A){for(var D=Math.max(this.g.length,A.g.length),T=[],I=0;I<D;I++)T[I]=this.i(I)&A.i(I);return new o(T,this.h&A.h)},t.or=function(A){for(var D=Math.max(this.g.length,A.g.length),T=[],I=0;I<D;I++)T[I]=this.i(I)|A.i(I);return new o(T,this.h|A.h)},t.xor=function(A){for(var D=Math.max(this.g.length,A.g.length),T=[],I=0;I<D;I++)T[I]=this.i(I)^A.i(I);return new o(T,this.h^A.h)};function M(A){for(var D=A.g.length+1,T=[],I=0;I<D;I++)T[I]=A.i(I)<<1|A.i(I-1)>>>31;return new o(T,A.h)}function O(A,D){var T=D>>5;D%=32;for(var I=A.g.length-T,x=[],R=0;R<I;R++)x[R]=0<D?A.i(R+T)>>>D|A.i(R+T+1)<<32-D:A.i(R+T);return new o(x,A.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Yj=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Sa=o}).apply(typeof iN<"u"?iN:typeof self<"u"?self:typeof window<"u"?window:{});var Tf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Xj,Dc,Qj,pp,fE,Jj,Zj,e5;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,C,L){return g==Array.prototype||g==Object.prototype||(g[C]=L.value),g};function r(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tf=="object"&&Tf];for(var C=0;C<g.length;++C){var L=g[C];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var i=r(this);function s(g,C){if(C)e:{var L=i;g=g.split(".");for(var z=0;z<g.length-1;z++){var ne=g[z];if(!(ne in L))break e;L=L[ne]}g=g[g.length-1],z=L[g],C=C(z),C!=z&&C!=null&&e(L,g,{configurable:!0,writable:!0,value:C})}}function a(g,C){g instanceof String&&(g+="");var L=0,z=!1,ne={next:function(){if(!z&&L<g.length){var ae=L++;return{value:C(ae,g[ae]),done:!1}}return z=!0,{done:!0,value:void 0}}};return ne[Symbol.iterator]=function(){return ne},ne}s("Array.prototype.values",function(g){return g||function(){return a(this,function(C,L){return L})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(g){var C=typeof g;return C=C!="object"?C:g?Array.isArray(g)?"array":C:"null",C=="array"||C=="object"&&typeof g.length=="number"}function c(g){var C=typeof g;return C=="object"&&g!=null||C=="function"}function d(g,C,L){return g.call.apply(g.bind,arguments)}function h(g,C,L){if(!g)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var ne=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ne,z),g.apply(C,ne)}}return function(){return g.apply(C,arguments)}}function f(g,C,L){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function m(g,C){var L=Array.prototype.slice.call(arguments,1);return function(){var z=L.slice();return z.push.apply(z,arguments),g.apply(this,z)}}function v(g,C){function L(){}L.prototype=C.prototype,g.aa=C.prototype,g.prototype=new L,g.prototype.constructor=g,g.Qb=function(z,ne,ae){for(var xe=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)xe[Tt-2]=arguments[Tt];return C.prototype[ne].apply(z,xe)}}function y(g){const C=g.length;if(0<C){const L=Array(C);for(let z=0;z<C;z++)L[z]=g[z];return L}return[]}function b(g,C){for(let L=1;L<arguments.length;L++){const z=arguments[L];if(u(z)){const ne=g.length||0,ae=z.length||0;g.length=ne+ae;for(let xe=0;xe<ae;xe++)g[ne+xe]=z[xe]}else g.push(z)}}class _{constructor(C,L){this.i=C,this.j=L,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function w(g){return/^[\s\xa0]*$/.test(g)}function E(){var g=l.navigator;return g&&(g=g.userAgent)?g:""}function N(g){return N[" "](g),g}N[" "]=function(){};var M=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function O(g,C,L){for(const z in g)C.call(L,g[z],z,g)}function A(g,C){for(const L in g)C.call(void 0,g[L],L,g)}function D(g){const C={};for(const L in g)C[L]=g[L];return C}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(g,C){let L,z;for(let ne=1;ne<arguments.length;ne++){z=arguments[ne];for(L in z)g[L]=z[L];for(let ae=0;ae<T.length;ae++)L=T[ae],Object.prototype.hasOwnProperty.call(z,L)&&(g[L]=z[L])}}function x(g){var C=1;g=g.split(":");const L=[];for(;0<C&&g.length;)L.push(g.shift()),C--;return g.length&&L.push(g.join(":")),L}function R(g){l.setTimeout(()=>{throw g},0)}function P(){var g=F;let C=null;return g.g&&(C=g.g,g.g=g.g.next,g.g||(g.h=null),C.next=null),C}class j{constructor(){this.h=this.g=null}add(C,L){const z=$.get();z.set(C,L),this.h?this.h.next=z:this.g=z,this.h=z}}var $=new _(()=>new U,g=>g.reset());class U{constructor(){this.next=this.g=this.h=null}set(C,L){this.h=C,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,q=!1,F=new j,W=()=>{const g=l.Promise.resolve(void 0);Y=()=>{g.then(Q)}};var Q=()=>{for(var g;g=P();){try{g.h.call(g.g)}catch(L){R(L)}var C=$;C.j(g),100>C.h&&(C.h++,g.next=C.g,C.g=g)}q=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(g,C){this.type=g,this.g=this.target=C,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var g=!1,C=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const L=()=>{};l.addEventListener("test",L,C),l.removeEventListener("test",L,C)}catch{}return g}();function ee(g,C){if(X.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var L=this.type=g.type,z=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=C,C=g.relatedTarget){if(M){e:{try{N(C.nodeName);var ne=!0;break e}catch{}ne=!1}ne||(C=null)}}else L=="mouseover"?C=g.fromElement:L=="mouseout"&&(C=g.toElement);this.relatedTarget=C,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:se[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&ee.aa.h.call(this)}}v(ee,X);var se={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),Se=0;function Ee(g,C,L,z,ne){this.listener=g,this.proxy=null,this.src=C,this.type=L,this.capture=!!z,this.ha=ne,this.key=++Se,this.da=this.fa=!1}function ie(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function ue(g){this.src=g,this.g={},this.h=0}ue.prototype.add=function(g,C,L,z,ne){var ae=g.toString();g=this.g[ae],g||(g=this.g[ae]=[],this.h++);var xe=ke(g,C,z,ne);return-1<xe?(C=g[xe],L||(C.fa=!1)):(C=new Ee(C,this.src,ae,!!z,ne),C.fa=L,g.push(C)),C};function ge(g,C){var L=C.type;if(L in g.g){var z=g.g[L],ne=Array.prototype.indexOf.call(z,C,void 0),ae;(ae=0<=ne)&&Array.prototype.splice.call(z,ne,1),ae&&(ie(C),g.g[L].length==0&&(delete g.g[L],g.h--))}}function ke(g,C,L,z){for(var ne=0;ne<g.length;++ne){var ae=g[ne];if(!ae.da&&ae.listener==C&&ae.capture==!!L&&ae.ha==z)return ne}return-1}var Re="closure_lm_"+(1e6*Math.random()|0),_e={};function V(g,C,L,z,ne){if(Array.isArray(C)){for(var ae=0;ae<C.length;ae++)V(g,C[ae],L,z,ne);return null}return L=Be(L),g&&g[ce]?g.K(C,L,c(z)?!!z.capture:!1,ne):B(g,C,L,!1,z,ne)}function B(g,C,L,z,ne,ae){if(!C)throw Error("Invalid event type");var xe=c(ne)?!!ne.capture:!!ne,Tt=ye(g);if(Tt||(g[Re]=Tt=new ue(g)),L=Tt.add(C,L,z,xe,ae),L.proxy)return L;if(z=G(),L.proxy=z,z.src=g,z.listener=L,g.addEventListener)J||(ne=xe),ne===void 0&&(ne=!1),g.addEventListener(C.toString(),z,ne);else if(g.attachEvent)g.attachEvent(le(C.toString()),z);else if(g.addListener&&g.removeListener)g.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return L}function G(){function g(L){return C.call(g.src,g.listener,L)}const C=he;return g}function K(g,C,L,z,ne){if(Array.isArray(C))for(var ae=0;ae<C.length;ae++)K(g,C[ae],L,z,ne);else z=c(z)?!!z.capture:!!z,L=Be(L),g&&g[ce]?(g=g.i,C=String(C).toString(),C in g.g&&(ae=g.g[C],L=ke(ae,L,z,ne),-1<L&&(ie(ae[L]),Array.prototype.splice.call(ae,L,1),ae.length==0&&(delete g.g[C],g.h--)))):g&&(g=ye(g))&&(C=g.g[C.toString()],g=-1,C&&(g=ke(C,L,z,ne)),(L=-1<g?C[g]:null)&&re(L))}function re(g){if(typeof g!="number"&&g&&!g.da){var C=g.src;if(C&&C[ce])ge(C.i,g);else{var L=g.type,z=g.proxy;C.removeEventListener?C.removeEventListener(L,z,g.capture):C.detachEvent?C.detachEvent(le(L),z):C.addListener&&C.removeListener&&C.removeListener(z),(L=ye(C))?(ge(L,g),L.h==0&&(L.src=null,C[Re]=null)):ie(g)}}}function le(g){return g in _e?_e[g]:_e[g]="on"+g}function he(g,C){if(g.da)g=!0;else{C=new ee(C,this);var L=g.listener,z=g.ha||g.src;g.fa&&re(g),g=L.call(z,C)}return g}function ye(g){return g=g[Re],g instanceof ue?g:null}var Ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function Be(g){return typeof g=="function"?g:(g[Ie]||(g[Ie]=function(C){return g.handleEvent(C)}),g[Ie])}function Oe(){H.call(this),this.i=new ue(this),this.M=this,this.F=null}v(Oe,H),Oe.prototype[ce]=!0,Oe.prototype.removeEventListener=function(g,C,L,z){K(this,g,C,L,z)};function ze(g,C){var L,z=g.F;if(z)for(L=[];z;z=z.F)L.push(z);if(g=g.M,z=C.type||C,typeof C=="string")C=new X(C,g);else if(C instanceof X)C.target=C.target||g;else{var ne=C;C=new X(z,g),I(C,ne)}if(ne=!0,L)for(var ae=L.length-1;0<=ae;ae--){var xe=C.g=L[ae];ne=lt(xe,z,!0,C)&&ne}if(xe=C.g=g,ne=lt(xe,z,!0,C)&&ne,ne=lt(xe,z,!1,C)&&ne,L)for(ae=0;ae<L.length;ae++)xe=C.g=L[ae],ne=lt(xe,z,!1,C)&&ne}Oe.prototype.N=function(){if(Oe.aa.N.call(this),this.i){var g=this.i,C;for(C in g.g){for(var L=g.g[C],z=0;z<L.length;z++)ie(L[z]);delete g.g[C],g.h--}}this.F=null},Oe.prototype.K=function(g,C,L,z){return this.i.add(String(g),C,!1,L,z)},Oe.prototype.L=function(g,C,L,z){return this.i.add(String(g),C,!0,L,z)};function lt(g,C,L,z){if(C=g.i.g[String(C)],!C)return!0;C=C.concat();for(var ne=!0,ae=0;ae<C.length;++ae){var xe=C[ae];if(xe&&!xe.da&&xe.capture==L){var Tt=xe.listener,kn=xe.ha||xe.src;xe.fa&&ge(g.i,xe),ne=Tt.call(kn,z)!==!1&&ne}}return ne&&!z.defaultPrevented}function vt(g,C,L){if(typeof g=="function")L&&(g=f(g,L));else if(g&&typeof g.handleEvent=="function")g=f(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:l.setTimeout(g,C||0)}function At(g){g.g=vt(()=>{g.g=null,g.i&&(g.i=!1,At(g))},g.l);const C=g.h;g.h=null,g.m.apply(null,C)}class Ke extends H{constructor(C,L){super(),this.m=C,this.l=L,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:At(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ne(g){H.call(this),this.h=g,this.g={}}v(Ne,H);var oe=[];function pe(g){O(g.g,function(C,L){this.g.hasOwnProperty(L)&&re(C)},g),g.g={}}Ne.prototype.N=function(){Ne.aa.N.call(this),pe(this)},Ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var be=l.JSON.stringify,Le=l.JSON.parse,Ce=class{stringify(g){return l.JSON.stringify(g,void 0)}parse(g){return l.JSON.parse(g,void 0)}};function We(){}We.prototype.h=null;function yt(g){return g.h||(g.h=g.i())}function ft(){}var gn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xt(){X.call(this,"d")}v(Xt,X);function xt(){X.call(this,"c")}v(xt,X);var jn={},St=null;function vn(){return St=St||new Oe}jn.La="serverreachability";function Fr(g){X.call(this,jn.La,g)}v(Fr,X);function Si(g){const C=vn();ze(C,new Fr(C))}jn.STAT_EVENT="statevent";function Vs(g,C){X.call(this,jn.STAT_EVENT,g),this.stat=C}v(Vs,X);function Zt(g){const C=vn();ze(C,new Vs(C,g))}jn.Ma="timingevent";function Qa(g,C){X.call(this,jn.Ma,g),this.size=C}v(Qa,X);function Yi(g,C){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){g()},C)}function yn(){this.g=!0}yn.prototype.xa=function(){this.g=!1};function Fs(g,C,L,z,ne,ae){g.info(function(){if(g.g)if(ae)for(var xe="",Tt=ae.split("&"),kn=0;kn<Tt.length;kn++){var ht=Tt[kn].split("=");if(1<ht.length){var $n=ht[0];ht=ht[1];var Un=$n.split("_");xe=2<=Un.length&&Un[1]=="type"?xe+($n+"="+ht+"&"):xe+($n+"=redacted&")}}else xe=null;else xe=ae;return"XMLHTTP REQ ("+z+") [attempt "+ne+"]: "+C+`
`+L+`
`+xe})}function el(g,C,L,z,ne,ae,xe){g.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+ne+"]: "+C+`
`+L+`
`+ae+" "+xe})}function ri(g,C,L,z){g.info(function(){return"XMLHTTP TEXT ("+C+"): "+tl(g,L)+(z?" "+z:"")})}function Ja(g,C){g.info(function(){return"TIMEOUT: "+C})}yn.prototype.info=function(){};function tl(g,C){if(!g.g)return C;if(!C)return null;try{var L=JSON.parse(C);if(L){for(g=0;g<L.length;g++)if(Array.isArray(L[g])){var z=L[g];if(!(2>z.length)){var ne=z[1];if(Array.isArray(ne)&&!(1>ne.length)){var ae=ne[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(var xe=1;xe<ne.length;xe++)ne[xe]=""}}}}return be(L)}catch{return C}}var Vn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},$s={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Us;function Xi(){}v(Xi,We),Xi.prototype.g=function(){return new XMLHttpRequest},Xi.prototype.i=function(){return{}},Us=new Xi;function _r(g,C,L,z){this.j=g,this.i=C,this.l=L,this.R=z||1,this.U=new Ne(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new nl}function nl(){this.i=null,this.g="",this.h=!1}var je={},Z={};function me(g,C,L){g.L=1,g.v=Yh(Ji(C)),g.m=L,g.P=!0,Me(g,null)}function Me(g,C){g.F=Date.now(),jt(g),g.A=Ji(g.v);var L=g.A,z=g.R;Array.isArray(z)||(z=[String(z)]),zI(L.i,"t",z),g.C=0,L=g.j.J,g.h=new nl,g.g=oC(g.j,L?C:null,!g.m),0<g.O&&(g.M=new Ke(f(g.Y,g,g.g),g.O)),C=g.U,L=g.g,z=g.ca;var ne="readystatechange";Array.isArray(ne)||(ne&&(oe[0]=ne.toString()),ne=oe);for(var ae=0;ae<ne.length;ae++){var xe=V(L,ne[ae],z||C.handleEvent,!1,C.h||C);if(!xe)break;C.g[xe.key]=xe}C=g.H?D(g.H):{},g.m?(g.u||(g.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,C)):(g.u="GET",g.g.ea(g.A,g.u,null,C)),Si(),Fs(g.i,g.u,g.A,g.l,g.R,g.m)}_r.prototype.ca=function(g){g=g.target;const C=this.M;C&&Zi(g)==3?C.j():this.Y(g)},_r.prototype.Y=function(g){try{if(g==this.g)e:{const Un=Zi(this.g);var C=this.g.Ba();const ol=this.g.Z();if(!(3>Un)&&(Un!=3||this.g&&(this.h.h||this.g.oa()||XI(this.g)))){this.J||Un!=4||C==7||(C==8||0>=ol?Si(3):Si(2)),Fn(this);var L=this.g.Z();this.X=L;t:if(mt(this)){var z=XI(this.g);g="";var ne=z.length,ae=Zi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rt(this),wr(this);var xe="";break t}this.h.i=new l.TextDecoder}for(C=0;C<ne;C++)this.h.h=!0,g+=this.h.i.decode(z[C],{stream:!(ae&&C==ne-1)});z.length=0,this.h.g+=g,this.C=0,xe=this.h.g}else xe=this.g.oa();if(this.o=L==200,el(this.i,this.u,this.A,this.l,this.R,Un,L),this.o){if(this.T&&!this.K){t:{if(this.g){var Tt,kn=this.g;if((Tt=kn.g?kn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Tt)){var ht=Tt;break t}}ht=null}if(L=ht)ri(this.i,this.l,L,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qi(this,L);else{this.o=!1,this.s=3,Zt(12),Rt(this),wr(this);break e}}if(this.P){L=!0;let ii;for(;!this.J&&this.C<xe.length;)if(ii=en(this,xe),ii==Z){Un==4&&(this.s=4,Zt(14),L=!1),ri(this.i,this.l,null,"[Incomplete Response]");break}else if(ii==je){this.s=4,Zt(15),ri(this.i,this.l,xe,"[Invalid Chunk]"),L=!1;break}else ri(this.i,this.l,ii,null),Qi(this,ii);if(mt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Un!=4||xe.length!=0||this.h.h||(this.s=1,Zt(16),L=!1),this.o=this.o&&L,!L)ri(this.i,this.l,xe,"[Invalid Chunked Response]"),Rt(this),wr(this);else if(0<xe.length&&!this.W){this.W=!0;var $n=this.j;$n.g==this&&$n.ba&&!$n.M&&($n.j.info("Great, no buffering proxy detected. Bytes received: "+xe.length),Kv($n),$n.M=!0,Zt(11))}}else ri(this.i,this.l,xe,null),Qi(this,xe);Un==4&&Rt(this),this.o&&!this.J&&(Un==4?rC(this.j,this):(this.o=!1,jt(this)))}else xB(this.g),L==400&&0<xe.indexOf("Unknown SID")?(this.s=3,Zt(12)):(this.s=0,Zt(13)),Rt(this),wr(this)}}}catch{}finally{}};function mt(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function en(g,C){var L=g.C,z=C.indexOf(`
`,L);return z==-1?Z:(L=Number(C.substring(L,z)),isNaN(L)?je:(z+=1,z+L>C.length?Z:(C=C.slice(z,z+L),g.C=z+L,C)))}_r.prototype.cancel=function(){this.J=!0,Rt(this)};function jt(g){g.S=Date.now()+g.I,un(g,g.I)}function un(g,C){if(g.B!=null)throw Error("WatchDog timer not null");g.B=Yi(f(g.ba,g),C)}function Fn(g){g.B&&(l.clearTimeout(g.B),g.B=null)}_r.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(Ja(this.i,this.A),this.L!=2&&(Si(),Zt(17)),Rt(this),this.s=2,wr(this)):un(this,this.S-g)};function wr(g){g.j.G==0||g.J||rC(g.j,g)}function Rt(g){Fn(g);var C=g.M;C&&typeof C.ma=="function"&&C.ma(),g.M=null,pe(g.U),g.g&&(C=g.g,g.g=null,C.abort(),C.ma())}function Qi(g,C){try{var L=g.j;if(L.G!=0&&(L.g==g||zv(L.h,g))){if(!g.K&&zv(L.h,g)&&L.G==3){try{var z=L.Da.g.parse(C)}catch{z=null}if(Array.isArray(z)&&z.length==3){var ne=z;if(ne[0]==0){e:if(!L.u){if(L.g)if(L.g.F+3e3<g.F)tf(L),Zh(L);else break e;Gv(L),Zt(18)}}else L.za=ne[1],0<L.za-L.T&&37500>ne[2]&&L.F&&L.v==0&&!L.C&&(L.C=Yi(f(L.Za,L),6e3));if(1>=il(L.h)&&L.ca){try{L.ca()}catch{}L.ca=void 0}}else eo(L,11)}else if((g.K||L.g==g)&&tf(L),!w(C))for(ne=L.Da.g.parse(C),C=0;C<ne.length;C++){let ht=ne[C];if(L.T=ht[0],ht=ht[1],L.G==2)if(ht[0]=="c"){L.K=ht[1],L.ia=ht[2];const $n=ht[3];$n!=null&&(L.la=$n,L.j.info("VER="+L.la));const Un=ht[4];Un!=null&&(L.Aa=Un,L.j.info("SVER="+L.Aa));const ol=ht[5];ol!=null&&typeof ol=="number"&&0<ol&&(z=1.5*ol,L.L=z,L.j.info("backChannelRequestTimeoutMs_="+z)),z=L;const ii=g.g;if(ii){const rf=ii.g?ii.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(rf){var ae=z.h;ae.g||rf.indexOf("spdy")==-1&&rf.indexOf("quic")==-1&&rf.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(qv(ae,ae.h),ae.h=null))}if(z.D){const Yv=ii.g?ii.g.getResponseHeader("X-HTTP-Session-Id"):null;Yv&&(z.ya=Yv,Pt(z.I,z.D,Yv))}}L.G=3,L.l&&L.l.ua(),L.ba&&(L.R=Date.now()-g.F,L.j.info("Handshake RTT: "+L.R+"ms")),z=L;var xe=g;if(z.qa=aC(z,z.J?z.ia:null,z.W),xe.K){LI(z.h,xe);var Tt=xe,kn=z.L;kn&&(Tt.I=kn),Tt.B&&(Fn(Tt),jt(Tt)),z.g=xe}else tC(z);0<L.i.length&&ef(L)}else ht[0]!="stop"&&ht[0]!="close"||eo(L,7);else L.G==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?eo(L,7):Wv(L):ht[0]!="noop"&&L.l&&L.l.ta(ht),L.v=0)}}Si(4)}catch{}}var rl=class{constructor(g,C){this.g=g,this.map=C}};function Hh(g){this.l=g||10,l.PerformanceNavigationTiming?(g=l.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wh(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function il(g){return g.h?1:g.g?g.g.size:0}function zv(g,C){return g.h?g.h==C:g.g?g.g.has(C):!1}function qv(g,C){g.g?g.g.add(C):g.h=C}function LI(g,C){g.h&&g.h==C?g.h=null:g.g&&g.g.has(C)&&g.g.delete(C)}Hh.prototype.cancel=function(){if(this.i=OI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function OI(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let C=g.i;for(const L of g.g.values())C=C.concat(L.D);return C}return y(g.i)}function oB(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(u(g)){for(var C=[],L=g.length,z=0;z<L;z++)C.push(g[z]);return C}C=[],L=0;for(z in g)C[L++]=g[z];return C}function lB(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(u(g)||typeof g=="string"){var C=[];g=g.length;for(var L=0;L<g;L++)C.push(L);return C}C=[],L=0;for(const z in g)C[L++]=z;return C}}}function jI(g,C){if(g.forEach&&typeof g.forEach=="function")g.forEach(C,void 0);else if(u(g)||typeof g=="string")Array.prototype.forEach.call(g,C,void 0);else for(var L=lB(g),z=oB(g),ne=z.length,ae=0;ae<ne;ae++)C.call(void 0,z[ae],L&&L[ae],g)}var VI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function uB(g,C){if(g){g=g.split("&");for(var L=0;L<g.length;L++){var z=g[L].indexOf("="),ne=null;if(0<=z){var ae=g[L].substring(0,z);ne=g[L].substring(z+1)}else ae=g[L];C(ae,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function Za(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof Za){this.h=g.h,Gh(this,g.j),this.o=g.o,this.g=g.g,Kh(this,g.s),this.l=g.l;var C=g.i,L=new Ju;L.i=C.i,C.g&&(L.g=new Map(C.g),L.h=C.h),FI(this,L),this.m=g.m}else g&&(C=String(g).match(VI))?(this.h=!1,Gh(this,C[1]||"",!0),this.o=Xu(C[2]||""),this.g=Xu(C[3]||"",!0),Kh(this,C[4]),this.l=Xu(C[5]||"",!0),FI(this,C[6]||"",!0),this.m=Xu(C[7]||"")):(this.h=!1,this.i=new Ju(null,this.h))}Za.prototype.toString=function(){var g=[],C=this.j;C&&g.push(Qu(C,$I,!0),":");var L=this.g;return(L||C=="file")&&(g.push("//"),(C=this.o)&&g.push(Qu(C,$I,!0),"@"),g.push(encodeURIComponent(String(L)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.s,L!=null&&g.push(":",String(L))),(L=this.l)&&(this.g&&L.charAt(0)!="/"&&g.push("/"),g.push(Qu(L,L.charAt(0)=="/"?hB:dB,!0))),(L=this.i.toString())&&g.push("?",L),(L=this.m)&&g.push("#",Qu(L,pB)),g.join("")};function Ji(g){return new Za(g)}function Gh(g,C,L){g.j=L?Xu(C,!0):C,g.j&&(g.j=g.j.replace(/:$/,""))}function Kh(g,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);g.s=C}else g.s=null}function FI(g,C,L){C instanceof Ju?(g.i=C,mB(g.i,g.h)):(L||(C=Qu(C,fB)),g.i=new Ju(C,g.h))}function Pt(g,C,L){g.i.set(C,L)}function Yh(g){return Pt(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Xu(g,C){return g?C?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Qu(g,C,L){return typeof g=="string"?(g=encodeURI(g).replace(C,cB),L&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function cB(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var $I=/[#\/\?@]/g,dB=/[#\?:]/g,hB=/[#\?]/g,fB=/[#\?@]/g,pB=/#/g;function Ju(g,C){this.h=this.g=null,this.i=g||null,this.j=!!C}function Bs(g){g.g||(g.g=new Map,g.h=0,g.i&&uB(g.i,function(C,L){g.add(decodeURIComponent(C.replace(/\+/g," ")),L)}))}t=Ju.prototype,t.add=function(g,C){Bs(this),this.i=null,g=sl(this,g);var L=this.g.get(g);return L||this.g.set(g,L=[]),L.push(C),this.h+=1,this};function UI(g,C){Bs(g),C=sl(g,C),g.g.has(C)&&(g.i=null,g.h-=g.g.get(C).length,g.g.delete(C))}function BI(g,C){return Bs(g),C=sl(g,C),g.g.has(C)}t.forEach=function(g,C){Bs(this),this.g.forEach(function(L,z){L.forEach(function(ne){g.call(C,ne,z,this)},this)},this)},t.na=function(){Bs(this);const g=Array.from(this.g.values()),C=Array.from(this.g.keys()),L=[];for(let z=0;z<C.length;z++){const ne=g[z];for(let ae=0;ae<ne.length;ae++)L.push(C[z])}return L},t.V=function(g){Bs(this);let C=[];if(typeof g=="string")BI(this,g)&&(C=C.concat(this.g.get(sl(this,g))));else{g=Array.from(this.g.values());for(let L=0;L<g.length;L++)C=C.concat(g[L])}return C},t.set=function(g,C){return Bs(this),this.i=null,g=sl(this,g),BI(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[C]),this.h+=1,this},t.get=function(g,C){return g?(g=this.V(g),0<g.length?String(g[0]):C):C};function zI(g,C,L){UI(g,C),0<L.length&&(g.i=null,g.g.set(sl(g,C),y(L)),g.h+=L.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],C=Array.from(this.g.keys());for(var L=0;L<C.length;L++){var z=C[L];const ae=encodeURIComponent(String(z)),xe=this.V(z);for(z=0;z<xe.length;z++){var ne=ae;xe[z]!==""&&(ne+="="+encodeURIComponent(String(xe[z]))),g.push(ne)}}return this.i=g.join("&")};function sl(g,C){return C=String(C),g.j&&(C=C.toLowerCase()),C}function mB(g,C){C&&!g.j&&(Bs(g),g.i=null,g.g.forEach(function(L,z){var ne=z.toLowerCase();z!=ne&&(UI(this,z),zI(this,ne,L))},g)),g.j=C}function gB(g,C){const L=new yn;if(l.Image){const z=new Image;z.onload=m(zs,L,"TestLoadImage: loaded",!0,C,z),z.onerror=m(zs,L,"TestLoadImage: error",!1,C,z),z.onabort=m(zs,L,"TestLoadImage: abort",!1,C,z),z.ontimeout=m(zs,L,"TestLoadImage: timeout",!1,C,z),l.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=g}else C(!1)}function vB(g,C){const L=new yn,z=new AbortController,ne=setTimeout(()=>{z.abort(),zs(L,"TestPingServer: timeout",!1,C)},1e4);fetch(g,{signal:z.signal}).then(ae=>{clearTimeout(ne),ae.ok?zs(L,"TestPingServer: ok",!0,C):zs(L,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(ne),zs(L,"TestPingServer: error",!1,C)})}function zs(g,C,L,z,ne){try{ne&&(ne.onload=null,ne.onerror=null,ne.onabort=null,ne.ontimeout=null),z(L)}catch{}}function yB(){this.g=new Ce}function _B(g,C,L){const z=L||"";try{jI(g,function(ne,ae){let xe=ne;c(ne)&&(xe=be(ne)),C.push(z+ae+"="+encodeURIComponent(xe))})}catch(ne){throw C.push(z+"type="+encodeURIComponent("_badmap")),ne}}function Xh(g){this.l=g.Ub||null,this.j=g.eb||!1}v(Xh,We),Xh.prototype.g=function(){return new Qh(this.l,this.j)},Xh.prototype.i=function(g){return function(){return g}}({});function Qh(g,C){Oe.call(this),this.D=g,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Qh,Oe),t=Qh.prototype,t.open=function(g,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=C,this.readyState=1,ec(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(C.body=g),(this.D||l).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Zu(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,ec(this)),this.g&&(this.readyState=3,ec(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qI(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function qI(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var C=g.value?g.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!g.done}))&&(this.response=this.responseText+=C)}g.done?Zu(this):ec(this),this.readyState==3&&qI(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,Zu(this))},t.Qa=function(g){this.g&&(this.response=g,Zu(this))},t.ga=function(){this.g&&Zu(this)};function Zu(g){g.readyState=4,g.l=null,g.j=null,g.v=null,ec(g)}t.setRequestHeader=function(g,C){this.u.append(g,C)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],C=this.h.entries();for(var L=C.next();!L.done;)L=L.value,g.push(L[0]+": "+L[1]),L=C.next();return g.join(`\r
`)};function ec(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Qh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function HI(g){let C="";return O(g,function(L,z){C+=z,C+=":",C+=L,C+=`\r
`}),C}function Hv(g,C,L){e:{for(z in L){var z=!1;break e}z=!0}z||(L=HI(L),typeof g=="string"?L!=null&&encodeURIComponent(String(L)):Pt(g,C,L))}function Gt(g){Oe.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Gt,Oe);var wB=/^https?$/i,bB=["POST","PUT"];t=Gt.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,C,L,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);C=C?C.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Us.g(),this.v=this.o?yt(this.o):yt(Us),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(C,String(g),!0),this.B=!1}catch(ae){WI(this,ae);return}if(g=L||"",L=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var ne in z)L.set(ne,z[ne]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const ae of z.keys())L.set(ae,z.get(ae));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(L.keys()).find(ae=>ae.toLowerCase()=="content-type"),ne=l.FormData&&g instanceof l.FormData,!(0<=Array.prototype.indexOf.call(bB,C,void 0))||z||ne||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,xe]of L)this.g.setRequestHeader(ae,xe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{YI(this),this.u=!0,this.g.send(g),this.u=!1}catch(ae){WI(this,ae)}};function WI(g,C){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=C,g.m=5,GI(g),Jh(g)}function GI(g){g.A||(g.A=!0,ze(g,"complete"),ze(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,ze(this,"complete"),ze(this,"abort"),Jh(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jh(this,!0)),Gt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?KI(this):this.bb())},t.bb=function(){KI(this)};function KI(g){if(g.h&&typeof o<"u"&&(!g.v[1]||Zi(g)!=4||g.Z()!=2)){if(g.u&&Zi(g)==4)vt(g.Ea,0,g);else if(ze(g,"readystatechange"),Zi(g)==4){g.h=!1;try{const xe=g.Z();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var L;if(!(L=C)){var z;if(z=xe===0){var ne=String(g.D).match(VI)[1]||null;!ne&&l.self&&l.self.location&&(ne=l.self.location.protocol.slice(0,-1)),z=!wB.test(ne?ne.toLowerCase():"")}L=z}if(L)ze(g,"complete"),ze(g,"success");else{g.m=6;try{var ae=2<Zi(g)?g.g.statusText:""}catch{ae=""}g.l=ae+" ["+g.Z()+"]",GI(g)}}finally{Jh(g)}}}}function Jh(g,C){if(g.g){YI(g);const L=g.g,z=g.v[0]?()=>{}:null;g.g=null,g.v=null,C||ze(g,"ready");try{L.onreadystatechange=z}catch{}}}function YI(g){g.I&&(l.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function Zi(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<Zi(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var C=this.g.responseText;return g&&C.indexOf(g)==0&&(C=C.substring(g.length)),Le(C)}};function XI(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function xB(g){const C={};g=(g.g&&2<=Zi(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<g.length;z++){if(w(g[z]))continue;var L=x(g[z]);const ne=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const ae=C[ne]||[];C[ne]=ae,ae.push(L)}A(C,function(z){return z.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function tc(g,C,L){return L&&L.internalChannelParams&&L.internalChannelParams[g]||C}function QI(g){this.Aa=0,this.i=[],this.j=new yn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=tc("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=tc("baseRetryDelayMs",5e3,g),this.cb=tc("retryDelaySeedMs",1e4,g),this.Wa=tc("forwardChannelMaxRetries",2,g),this.wa=tc("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new Hh(g&&g.concurrentRequestLimit),this.Da=new yB,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=QI.prototype,t.la=8,t.G=1,t.connect=function(g,C,L,z){Zt(0),this.W=g,this.H=C||{},L&&z!==void 0&&(this.H.OSID=L,this.H.OAID=z),this.F=this.X,this.I=aC(this,null,this.W),ef(this)};function Wv(g){if(JI(g),g.G==3){var C=g.U++,L=Ji(g.I);if(Pt(L,"SID",g.K),Pt(L,"RID",C),Pt(L,"TYPE","terminate"),nc(g,L),C=new _r(g,g.j,C),C.L=2,C.v=Yh(Ji(L)),L=!1,l.navigator&&l.navigator.sendBeacon)try{L=l.navigator.sendBeacon(C.v.toString(),"")}catch{}!L&&l.Image&&(new Image().src=C.v,L=!0),L||(C.g=oC(C.j,null),C.g.ea(C.v)),C.F=Date.now(),jt(C)}sC(g)}function Zh(g){g.g&&(Kv(g),g.g.cancel(),g.g=null)}function JI(g){Zh(g),g.u&&(l.clearTimeout(g.u),g.u=null),tf(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&l.clearTimeout(g.s),g.s=null)}function ef(g){if(!Wh(g.h)&&!g.s){g.s=!0;var C=g.Ga;Y||W(),q||(Y(),q=!0),F.add(C,g),g.B=0}}function EB(g,C){return il(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=C.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=Yi(f(g.Ga,g,C),iC(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const ne=new _r(this,this.j,g);let ae=this.o;if(this.S&&(ae?(ae=D(ae),I(ae,this.S)):ae=this.S),this.m!==null||this.O||(ne.H=ae,ae=null),this.P)e:{for(var C=0,L=0;L<this.i.length;L++){t:{var z=this.i[L];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(C+=z,4096<C){C=L;break e}if(C===4096||L===this.i.length-1){C=L+1;break e}}C=1e3}else C=1e3;C=eC(this,ne,C),L=Ji(this.I),Pt(L,"RID",g),Pt(L,"CVER",22),this.D&&Pt(L,"X-HTTP-Session-Id",this.D),nc(this,L),ae&&(this.O?C="headers="+encodeURIComponent(String(HI(ae)))+"&"+C:this.m&&Hv(L,this.m,ae)),qv(this.h,ne),this.Ua&&Pt(L,"TYPE","init"),this.P?(Pt(L,"$req",C),Pt(L,"SID","null"),ne.T=!0,me(ne,L,null)):me(ne,L,C),this.G=2}}else this.G==3&&(g?ZI(this,g):this.i.length==0||Wh(this.h)||ZI(this))};function ZI(g,C){var L;C?L=C.l:L=g.U++;const z=Ji(g.I);Pt(z,"SID",g.K),Pt(z,"RID",L),Pt(z,"AID",g.T),nc(g,z),g.m&&g.o&&Hv(z,g.m,g.o),L=new _r(g,g.j,L,g.B+1),g.m===null&&(L.H=g.o),C&&(g.i=C.D.concat(g.i)),C=eC(g,L,1e3),L.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),qv(g.h,L),me(L,z,C)}function nc(g,C){g.H&&O(g.H,function(L,z){Pt(C,z,L)}),g.l&&jI({},function(L,z){Pt(C,z,L)})}function eC(g,C,L){L=Math.min(g.i.length,L);var z=g.l?f(g.l.Na,g.l,g):null;e:{var ne=g.i;let ae=-1;for(;;){const xe=["count="+L];ae==-1?0<L?(ae=ne[0].g,xe.push("ofs="+ae)):ae=0:xe.push("ofs="+ae);let Tt=!0;for(let kn=0;kn<L;kn++){let ht=ne[kn].g;const $n=ne[kn].map;if(ht-=ae,0>ht)ae=Math.max(0,ne[kn].g-100),Tt=!1;else try{_B($n,xe,"req"+ht+"_")}catch{z&&z($n)}}if(Tt){z=xe.join("&");break e}}}return g=g.i.splice(0,L),C.D=g,z}function tC(g){if(!g.g&&!g.u){g.Y=1;var C=g.Fa;Y||W(),q||(Y(),q=!0),F.add(C,g),g.v=0}}function Gv(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=Yi(f(g.Fa,g),iC(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,nC(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Yi(f(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Zt(10),Zh(this),nC(this))};function Kv(g){g.A!=null&&(l.clearTimeout(g.A),g.A=null)}function nC(g){g.g=new _r(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var C=Ji(g.qa);Pt(C,"RID","rpc"),Pt(C,"SID",g.K),Pt(C,"AID",g.T),Pt(C,"CI",g.F?"0":"1"),!g.F&&g.ja&&Pt(C,"TO",g.ja),Pt(C,"TYPE","xmlhttp"),nc(g,C),g.m&&g.o&&Hv(C,g.m,g.o),g.L&&(g.g.I=g.L);var L=g.g;g=g.ia,L.L=1,L.v=Yh(Ji(C)),L.m=null,L.P=!0,Me(L,g)}t.Za=function(){this.C!=null&&(this.C=null,Zh(this),Gv(this),Zt(19))};function tf(g){g.C!=null&&(l.clearTimeout(g.C),g.C=null)}function rC(g,C){var L=null;if(g.g==C){tf(g),Kv(g),g.g=null;var z=2}else if(zv(g.h,C))L=C.D,LI(g.h,C),z=1;else return;if(g.G!=0){if(C.o)if(z==1){L=C.m?C.m.length:0,C=Date.now()-C.F;var ne=g.B;z=vn(),ze(z,new Qa(z,L)),ef(g)}else tC(g);else if(ne=C.s,ne==3||ne==0&&0<C.X||!(z==1&&EB(g,C)||z==2&&Gv(g)))switch(L&&0<L.length&&(C=g.h,C.i=C.i.concat(L)),ne){case 1:eo(g,5);break;case 4:eo(g,10);break;case 3:eo(g,6);break;default:eo(g,2)}}}function iC(g,C){let L=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(L*=2),L*C}function eo(g,C){if(g.j.info("Error code "+C),C==2){var L=f(g.fb,g),z=g.Xa;const ne=!z;z=new Za(z||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Gh(z,"https"),Yh(z),ne?gB(z.toString(),L):vB(z.toString(),L)}else Zt(2);g.G=0,g.l&&g.l.sa(C),sC(g),JI(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Zt(2)):(this.j.info("Failed to ping google.com"),Zt(1))};function sC(g){if(g.G=0,g.ka=[],g.l){const C=OI(g.h);(C.length!=0||g.i.length!=0)&&(b(g.ka,C),b(g.ka,g.i),g.h.i.length=0,y(g.i),g.i.length=0),g.l.ra()}}function aC(g,C,L){var z=L instanceof Za?Ji(L):new Za(L);if(z.g!="")C&&(z.g=C+"."+z.g),Kh(z,z.s);else{var ne=l.location;z=ne.protocol,C=C?C+"."+ne.hostname:ne.hostname,ne=+ne.port;var ae=new Za(null);z&&Gh(ae,z),C&&(ae.g=C),ne&&Kh(ae,ne),L&&(ae.l=L),z=ae}return L=g.D,C=g.ya,L&&C&&Pt(z,L,C),Pt(z,"VER",g.la),nc(g,z),z}function oC(g,C,L){if(C&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=g.Ca&&!g.pa?new Gt(new Xh({eb:L})):new Gt(g.pa),C.Ha(g.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function lC(){}t=lC.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function nf(){}nf.prototype.g=function(g,C){return new br(g,C)};function br(g,C){Oe.call(this),this.g=new QI(C),this.l=g,this.h=C&&C.messageUrlParams||null,g=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(g?g["X-WebChannel-Content-Type"]=C.messageContentType:g={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(g?g["X-WebChannel-Client-Profile"]=C.va:g={"X-WebChannel-Client-Profile":C.va}),this.g.S=g,(g=C&&C.Sb)&&!w(g)&&(this.g.m=g),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!w(C)&&(this.g.D=C,g=this.h,g!==null&&C in g&&(g=this.h,C in g&&delete g[C])),this.j=new al(this)}v(br,Oe),br.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},br.prototype.close=function(){Wv(this.g)},br.prototype.o=function(g){var C=this.g;if(typeof g=="string"){var L={};L.__data__=g,g=L}else this.u&&(L={},L.__data__=be(g),g=L);C.i.push(new rl(C.Ya++,g)),C.G==3&&ef(C)},br.prototype.N=function(){this.g.l=null,delete this.j,Wv(this.g),delete this.g,br.aa.N.call(this)};function uC(g){Xt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var C=g.__sm__;if(C){e:{for(const L in C){g=L;break e}g=void 0}(this.i=g)&&(g=this.i,C=C!==null&&g in C?C[g]:void 0),this.data=C}else this.data=g}v(uC,Xt);function cC(){xt.call(this),this.status=1}v(cC,xt);function al(g){this.g=g}v(al,lC),al.prototype.ua=function(){ze(this.g,"a")},al.prototype.ta=function(g){ze(this.g,new uC(g))},al.prototype.sa=function(g){ze(this.g,new cC)},al.prototype.ra=function(){ze(this.g,"b")},nf.prototype.createWebChannel=nf.prototype.g,br.prototype.send=br.prototype.o,br.prototype.open=br.prototype.m,br.prototype.close=br.prototype.close,e5=function(){return new nf},Zj=function(){return vn()},Jj=jn,fE={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vn.NO_ERROR=0,Vn.TIMEOUT=8,Vn.HTTP_ERROR=6,pp=Vn,$s.COMPLETE="complete",Qj=$s,ft.EventType=gn,gn.OPEN="a",gn.CLOSE="b",gn.ERROR="c",gn.MESSAGE="d",Oe.prototype.listen=Oe.prototype.K,Dc=ft,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,Xj=Gt}).apply(typeof Tf<"u"?Tf:typeof self<"u"?self:typeof window<"u"?window:{});const sN="@firebase/firestore",aN="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Hn.UNAUTHENTICATED=new Hn(null),Hn.GOOGLE_CREDENTIALS=new Hn("google-credentials-uid"),Hn.FIRST_PARTY=new Hn("first-party-uid"),Hn.MOCK_USER=new Hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lu="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ro=new xS("@firebase/firestore");function yl(){return Ro.logLevel}function Ae(t,...e){if(Ro.logLevel<=rt.DEBUG){const r=e.map(MS);Ro.debug(`Firestore (${Lu}): ${t}`,...r)}}function Ss(t,...e){if(Ro.logLevel<=rt.ERROR){const r=e.map(MS);Ro.error(`Firestore (${Lu}): ${t}`,...r)}}function Po(t,...e){if(Ro.logLevel<=rt.WARN){const r=e.map(MS);Ro.warn(`Firestore (${Lu}): ${t}`,...r)}}function MS(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t="Unexpected state"){const e=`FIRESTORE (${Lu}) INTERNAL ASSERTION FAILED: `+t;throw Ss(e),new Error(e)}function gt(t,e){t||He()}function Xe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends Ps{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ms{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t5{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class n5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Hn.UNAUTHENTICATED))}shutdown(){}}class SY{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class TY{constructor(e){this.t=e,this.currentUser=Hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){gt(this.o===void 0);let i=this.i;const s=u=>this.i!==i?(i=this.i,r(u)):Promise.resolve();let a=new ms;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ms,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ms)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(i=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(gt(typeof i.accessToken=="string"),new t5(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gt(e===null||typeof e=="string"),new Hn(e)}}class IY{constructor(e,r,i){this.l=e,this.h=r,this.P=i,this.type="FirstParty",this.user=Hn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class CY{constructor(e,r,i){this.l=e,this.h=r,this.P=i}getToken(){return Promise.resolve(new IY(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class kY{constructor(e,r){this.A=r,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,di(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,r){gt(this.o===void 0);const i=a=>{a.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,Ae("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const s=a=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new oN(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(gt(typeof r.token=="string"),this.R=r.token,new oN(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NY(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let i=0;i<t;i++)r[i]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=NY(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<r&&(i+=e.charAt(s[a]%62))}return i}}function st(t,e){return t<e?-1:t>e?1:0}function lu(t,e,r){return t.length===e.length&&t.every((i,s)=>r(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lN=-62135596800,uN=1e6;class on{static now(){return on.fromMillis(Date.now())}static fromDate(e){return on.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),i=Math.floor((e-1e3*r)*uN);return new on(r,i)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Ve(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ve(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<lN)throw new Ve(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/uN}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-lN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{static fromTimestamp(e){return new Ge(e)}static min(){return new Ge(new on(0,0))}static max(){return new Ge(new on(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN="__name__";class Ni{constructor(e,r,i){r===void 0?r=0:r>e.length&&He(),i===void 0?i=e.length-r:i>e.length-r&&He(),this.segments=e,this.offset=r,this.len=i}get length(){return this.len}isEqual(e){return Ni.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Ni?e.forEach(i=>{r.push(i)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,i=this.limit();r<i;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const i=Math.min(e.length,r.length);for(let s=0;s<i;s++){const a=Ni.compareSegments(e.get(s),r.get(s));if(a!==0)return a}return Math.sign(e.length-r.length)}static compareSegments(e,r){const i=Ni.isNumericId(e),s=Ni.isNumericId(r);return i&&!s?-1:!i&&s?1:i&&s?Ni.extractNumericId(e).compare(Ni.extractNumericId(r)):e<r?-1:e>r?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Sa.fromString(e.substring(4,e.length-2))}}class Ft extends Ni{construct(e,r,i){return new Ft(e,r,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ve(fe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);r.push(...i.split("/").filter(s=>s.length>0))}return new Ft(r)}static emptyPath(){return new Ft([])}}const AY=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bn extends Ni{construct(e,r,i){return new bn(e,r,i)}static isValidIdentifier(e){return AY.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===cN}static keyField(){return new bn([cN])}static fromServerFormat(e){const r=[];let i="",s=0;const a=()=>{if(i.length===0)throw new Ve(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(i),i=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Ve(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ve(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(i+=l,s++):(a(),s++)}if(a(),o)throw new Ve(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bn(r)}static emptyPath(){return new bn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Ft.fromString(e))}static fromName(e){return new $e(Ft.fromString(e).popFirst(5))}static empty(){return new $e(Ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Ft.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Ft(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dd=-1;function RY(t,e){const r=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Ge.fromTimestamp(i===1e9?new on(r+1,0):new on(r,i));return new Da(s,$e.empty(),e)}function PY(t){return new Da(t.readTime,t.key,Dd)}class Da{constructor(e,r,i){this.readTime=e,this.documentKey=r,this.largestBatchId=i}static min(){return new Da(Ge.min(),$e.empty(),Dd)}static max(){return new Da(Ge.max(),$e.empty(),Dd)}}function DY(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=$e.comparator(t.documentKey,e.documentKey),r!==0?r:st(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class LY{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ou(t){if(t.code!==fe.FAILED_PRECONDITION||t.message!==MY)throw t;Ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&He(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new de((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(r,a).next(i,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof de?r:de.resolve(r)}catch(r){return de.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):de.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):de.reject(r)}static resolve(e){return new de((r,i)=>{r(e)})}static reject(e){return new de((r,i)=>{i(e)})}static waitFor(e){return new de((r,i)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&r()},u=>i(u))}),o=!0,a===s&&r()})}static or(e){let r=de.resolve(!1);for(const i of e)r=r.next(s=>s?de.resolve(s):i());return r}static forEach(e,r){const i=[];return e.forEach((s,a)=>{i.push(r.call(this,s,a))}),this.waitFor(i)}static mapArray(e,r){return new de((i,s)=>{const a=e.length,o=new Array(a);let l=0;for(let u=0;u<a;u++){const c=u;r(e[c]).next(d=>{o[c]=d,++l,l===a&&i(o)},d=>s(d))}})}static doWhile(e,r){return new de((i,s)=>{const a=()=>{e()===!0?r().next(()=>{a()},s):i()};a()})}}function OY(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function ju(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}_g.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OS=-1;function wg(t){return t==null}function om(t){return t===0&&1/t==-1/0}function jY(t){return typeof t=="number"&&Number.isInteger(t)&&!om(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5="";function VY(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=dN(e)),e=FY(t.get(r),e);return dN(e)}function FY(t,e){let r=e;const i=t.length;for(let s=0;s<i;s++){const a=t.charAt(s);switch(a){case"\0":r+="";break;case r5:r+="";break;default:r+=a}}return r}function dN(t){return t+r5+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hN(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Wa(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function i5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,r){this.comparator=e,this.root=r||Rn.EMPTY}insert(e,r){return new Wt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Rn.BLACK,null,null))}remove(e){return new Wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}indexOf(e){let r=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return r+i.left.size;s<0?i=i.left:(r+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,i)=>(e(r,i),!1))}toString(){const e=[];return this.inorderTraversal((r,i)=>(e.push(`${r}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new If(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new If(this.root,e,this.comparator,!1)}getReverseIterator(){return new If(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new If(this.root,e,this.comparator,!0)}}class If{constructor(e,r,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?i(e.key,r):1,r&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rn{constructor(e,r,i,s,a){this.key=e,this.value=r,this.color=i??Rn.RED,this.left=s??Rn.EMPTY,this.right=a??Rn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,i,s,a){return new Rn(e??this.key,r??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,r,i),null):a===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Rn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let i,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Rn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw He();const e=this.left.check();if(e!==this.right.check())throw He();return e+(this.isRed()?0:1)}}Rn.EMPTY=null,Rn.RED=!0,Rn.BLACK=!1;Rn.EMPTY=new class{constructor(){this.size=0}get key(){throw He()}get value(){throw He()}get color(){throw He()}get left(){throw He()}get right(){throw He()}copy(e,r,i,s,a){return this}insert(e,r,i){return new Rn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.comparator=e,this.data=new Wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,i)=>(e(r),!1))}forEachInRange(e,r){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let i;for(i=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new fN(this.data.getIterator())}getIteratorFrom(e){return new fN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(i=>{r=r.add(i)}),r}isEqual(e){if(!(e instanceof fn)||this.size!==e.size)return!1;const r=this.data.getIterator(),i=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new fn(this.comparator);return r.data=e,r}}class fN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e){this.fields=e,e.sort(bn.comparator)}static empty(){return new Ir([])}unionWith(e){let r=new fn(bn.comparator);for(const i of this.fields)r=r.add(i);for(const i of e)r=r.add(i);return new Ir(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return lu(this.fields,e.fields,(r,i)=>r.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new s5("Invalid base64 string: "+a):a}}(e);return new Sn(r)}static fromUint8Array(e){const r=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new Sn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const i=new Uint8Array(r.length);for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sn.EMPTY_BYTE_STRING=new Sn("");const $Y=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ma(t){if(gt(!!t),typeof t=="string"){let e=0;const r=$Y.exec(t);if(gt(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Qt(t.seconds),nanos:Qt(t.nanos)}}function Qt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function La(t){return typeof t=="string"?Sn.fromBase64String(t):Sn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a5="server_timestamp",o5="__type__",l5="__previous_value__",u5="__local_write_time__";function jS(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[o5])===null||r===void 0?void 0:r.stringValue)===a5}function bg(t){const e=t.mapValue.fields[l5];return jS(e)?bg(e):e}function Md(t){const e=Ma(t.mapValue.fields[u5].timestampValue);return new on(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UY{constructor(e,r,i,s,a,o,l,u,c){this.databaseId=e,this.appId=r,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}const lm="(default)";class uu{constructor(e,r){this.projectId=e,this.database=r||lm}static empty(){return new uu("","")}get isDefaultDatabase(){return this.database===lm}isEqual(e){return e instanceof uu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5="__type__",BY="__max__",Cf={mapValue:{}},d5="__vector__",um="value";function Oa(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?jS(t)?4:qY(t)?9007199254740991:zY(t)?10:11:He()}function Bi(t,e){if(t===e)return!0;const r=Oa(t);if(r!==Oa(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Md(t).isEqual(Md(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=Ma(s.timestampValue),l=Ma(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return La(s.bytesValue).isEqual(La(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return Qt(s.geoPointValue.latitude)===Qt(a.geoPointValue.latitude)&&Qt(s.geoPointValue.longitude)===Qt(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Qt(s.integerValue)===Qt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=Qt(s.doubleValue),l=Qt(a.doubleValue);return o===l?om(o)===om(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return lu(t.arrayValue.values||[],e.arrayValue.values||[],Bi);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(hN(o)!==hN(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Bi(o[u],l[u])))return!1;return!0}(t,e);default:return He()}}function Ld(t,e){return(t.values||[]).find(r=>Bi(r,e))!==void 0}function cu(t,e){if(t===e)return 0;const r=Oa(t),i=Oa(e);if(r!==i)return st(r,i);switch(r){case 0:case 9007199254740991:return 0;case 1:return st(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=Qt(a.integerValue||a.doubleValue),u=Qt(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return pN(t.timestampValue,e.timestampValue);case 4:return pN(Md(t),Md(e));case 5:return st(t.stringValue,e.stringValue);case 6:return function(a,o){const l=La(a),u=La(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const d=st(l[c],u[c]);if(d!==0)return d}return st(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=st(Qt(a.latitude),Qt(o.latitude));return l!==0?l:st(Qt(a.longitude),Qt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return mN(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,u,c,d;const h=a.fields||{},f=o.fields||{},m=(l=h[um])===null||l===void 0?void 0:l.arrayValue,v=(u=f[um])===null||u===void 0?void 0:u.arrayValue,y=st(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0);return y!==0?y:mN(m,v)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===Cf.mapValue&&o===Cf.mapValue)return 0;if(a===Cf.mapValue)return 1;if(o===Cf.mapValue)return-1;const l=a.fields||{},u=Object.keys(l),c=o.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let h=0;h<u.length&&h<d.length;++h){const f=st(u[h],d[h]);if(f!==0)return f;const m=cu(l[u[h]],c[d[h]]);if(m!==0)return m}return st(u.length,d.length)}(t.mapValue,e.mapValue);default:throw He()}}function pN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return st(t,e);const r=Ma(t),i=Ma(e),s=st(r.seconds,i.seconds);return s!==0?s:st(r.nanos,i.nanos)}function mN(t,e){const r=t.values||[],i=e.values||[];for(let s=0;s<r.length&&s<i.length;++s){const a=cu(r[s],i[s]);if(a)return a}return st(r.length,i.length)}function du(t){return pE(t)}function pE(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Ma(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return La(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return $e.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let i="[",s=!0;for(const a of r.values||[])s?s=!1:i+=",",i+=pE(a);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",a=!0;for(const o of i)a?a=!1:s+=",",s+=`${o}:${pE(r.fields[o])}`;return s+"}"}(t.mapValue):He()}function mp(t){switch(Oa(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bg(t);return e?16+mp(e):16;case 5:return 2*t.stringValue.length;case 6:return La(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,a)=>s+mp(a),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return Wa(i.fields,(a,o)=>{s+=a.length+mp(o)}),s}(t.mapValue);default:throw He()}}function mE(t){return!!t&&"integerValue"in t}function VS(t){return!!t&&"arrayValue"in t}function gN(t){return!!t&&"nullValue"in t}function vN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gp(t){return!!t&&"mapValue"in t}function zY(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[c5])===null||r===void 0?void 0:r.stringValue)===d5}function id(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Wa(t.mapValue.fields,(r,i)=>e.mapValue.fields[r]=id(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=id(t.arrayValue.values[r]);return e}return Object.assign({},t)}function qY(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===BY}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.value=e}static empty(){return new dr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let i=0;i<e.length-1;++i)if(r=(r.mapValue.fields||{})[e.get(i)],!gp(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=id(r)}setAll(e){let r=bn.emptyPath(),i={},s=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const u=this.getFieldsMap(r);this.applyChanges(u,i,s),i={},s=[],r=l.popLast()}o?i[l.lastSegment()]=id(o):s.push(l.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,i,s)}delete(e){const r=this.field(e.popLast());gp(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Bi(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=r.mapValue.fields[e.get(i)];gp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(i)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,i){Wa(r,(s,a)=>e[s]=a);for(const s of i)delete e[s]}clone(){return new dr(id(this.value))}}function h5(t){const e=[];return Wa(t.fields,(r,i)=>{const s=new bn([r]);if(gp(i)){const a=h5(i.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new Ir(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,r,i,s,a,o,l){this.key=e,this.documentType=r,this.version=i,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Gn(e,0,Ge.min(),Ge.min(),Ge.min(),dr.empty(),0)}static newFoundDocument(e,r,i,s){return new Gn(e,1,r,Ge.min(),i,s,0)}static newNoDocument(e,r){return new Gn(e,2,r,Ge.min(),Ge.min(),dr.empty(),0)}static newUnknownDocument(e,r){return new Gn(e,3,r,Ge.min(),Ge.min(),dr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e,r){this.position=e,this.inclusive=r}}function yN(t,e,r){let i=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?i=$e.comparator($e.fromName(o.referenceValue),r.key):i=cu(o,r.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function _N(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Bi(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,r="asc"){this.field=e,this.dir=r}}function HY(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f5{}class dn extends f5{constructor(e,r,i){super(),this.field=e,this.op=r,this.value=i}static create(e,r,i){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,i):new GY(e,r,i):r==="array-contains"?new XY(e,i):r==="in"?new QY(e,i):r==="not-in"?new JY(e,i):r==="array-contains-any"?new ZY(e,i):new dn(e,r,i)}static createKeyFieldInFilter(e,r,i){return r==="in"?new KY(e,i):new YY(e,i)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(cu(r,this.value)):r!==null&&Oa(this.value)===Oa(r)&&this.matchesComparison(cu(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zi extends f5{constructor(e,r){super(),this.filters=e,this.op=r,this.ce=null}static create(e,r){return new zi(e,r)}matches(e){return p5(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function p5(t){return t.op==="and"}function m5(t){return WY(t)&&p5(t)}function WY(t){for(const e of t.filters)if(e instanceof zi)return!1;return!0}function gE(t){if(t instanceof dn)return t.field.canonicalString()+t.op.toString()+du(t.value);if(m5(t))return t.filters.map(e=>gE(e)).join(",");{const e=t.filters.map(r=>gE(r)).join(",");return`${t.op}(${e})`}}function g5(t,e){return t instanceof dn?function(i,s){return s instanceof dn&&i.op===s.op&&i.field.isEqual(s.field)&&Bi(i.value,s.value)}(t,e):t instanceof zi?function(i,s){return s instanceof zi&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((a,o,l)=>a&&g5(o,s.filters[l]),!0):!1}(t,e):void He()}function v5(t){return t instanceof dn?function(r){return`${r.field.canonicalString()} ${r.op} ${du(r.value)}`}(t):t instanceof zi?function(r){return r.op.toString()+" {"+r.getFilters().map(v5).join(" ,")+"}"}(t):"Filter"}class GY extends dn{constructor(e,r,i){super(e,r,i),this.key=$e.fromName(i.referenceValue)}matches(e){const r=$e.comparator(e.key,this.key);return this.matchesComparison(r)}}class KY extends dn{constructor(e,r){super(e,"in",r),this.keys=y5("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class YY extends dn{constructor(e,r){super(e,"not-in",r),this.keys=y5("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function y5(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(i=>$e.fromName(i.referenceValue))}class XY extends dn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return VS(r)&&Ld(r.arrayValue,this.value)}}class QY extends dn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Ld(this.value.arrayValue,r)}}class JY extends dn{constructor(e,r){super(e,"not-in",r)}matches(e){if(Ld(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Ld(this.value.arrayValue,r)}}class ZY extends dn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!VS(r)||!r.arrayValue.values)&&r.arrayValue.values.some(i=>Ld(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eX{constructor(e,r=null,i=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.le=null}}function wN(t,e=null,r=[],i=[],s=null,a=null,o=null){return new eX(t,e,r,i,s,a,o)}function FS(t){const e=Xe(t);if(e.le===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(i=>gE(i)).join(","),r+="|ob:",r+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),wg(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>du(i)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>du(i)).join(",")),e.le=r}return e.le}function $S(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!HY(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!g5(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!_N(t.startAt,e.startAt)&&_N(t.endAt,e.endAt)}function vE(t){return $e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e,r=null,i=[],s=[],a=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function tX(t,e,r,i,s,a,o,l){return new xg(t,e,r,i,s,a,o,l)}function US(t){return new xg(t)}function bN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nX(t){return t.collectionGroup!==null}function sd(t){const e=Xe(t);if(e.he===null){e.he=[];const r=new Set;for(const a of e.explicitOrderBy)e.he.push(a),r.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new fn(bn.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.he.push(new dm(a,i))}),r.has(bn.keyField().canonicalString())||e.he.push(new dm(bn.keyField(),i))}return e.he}function ji(t){const e=Xe(t);return e.Pe||(e.Pe=rX(e,sd(t))),e.Pe}function rX(t,e){if(t.limitType==="F")return wN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new dm(s.field,a)});const r=t.endAt?new cm(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new cm(t.startAt.position,t.startAt.inclusive):null;return wN(t.path,t.collectionGroup,e,t.filters,t.limit,r,i)}}function yE(t,e,r){return new xg(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Eg(t,e){return $S(ji(t),ji(e))&&t.limitType===e.limitType}function _5(t){return`${FS(ji(t))}|lt:${t.limitType}`}function _l(t){return`Query(target=${function(r){let i=r.path.canonicalString();return r.collectionGroup!==null&&(i+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(i+=`, filters: [${r.filters.map(s=>v5(s)).join(", ")}]`),wg(r.limit)||(i+=", limit: "+r.limit),r.orderBy.length>0&&(i+=`, orderBy: [${r.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),r.startAt&&(i+=", startAt: ",i+=r.startAt.inclusive?"b:":"a:",i+=r.startAt.position.map(s=>du(s)).join(",")),r.endAt&&(i+=", endAt: ",i+=r.endAt.inclusive?"a:":"b:",i+=r.endAt.position.map(s=>du(s)).join(",")),`Target(${i})`}(ji(t))}; limitType=${t.limitType})`}function Sg(t,e){return e.isFoundDocument()&&function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):$e.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(t,e)&&function(i,s){for(const a of sd(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(o,l,u){const c=yN(o,l,u);return o.inclusive?c<=0:c<0}(i.startAt,sd(i),s)||i.endAt&&!function(o,l,u){const c=yN(o,l,u);return o.inclusive?c>=0:c>0}(i.endAt,sd(i),s))}(t,e)}function iX(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function w5(t){return(e,r)=>{let i=!1;for(const s of sd(t)){const a=sX(s,e,r);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function sX(t,e,r){const i=t.field.isKeyField()?$e.comparator(e.key,r.key):function(a,o,l){const u=o.data.field(a),c=l.data.field(a);return u!==null&&c!==null?cu(u,c):He()}(t.field,e,r);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return He()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,r]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[r]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Wa(this.inner,(r,i)=>{for(const[s,a]of i)e(s,a)})}isEmpty(){return i5(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aX=new Wt($e.comparator);function Ts(){return aX}const b5=new Wt($e.comparator);function Mc(...t){let e=b5;for(const r of t)e=e.insert(r.key,r);return e}function x5(t){let e=b5;return t.forEach((r,i)=>e=e.insert(r,i.overlayedDocument)),e}function mo(){return ad()}function E5(){return ad()}function ad(){return new qo(t=>t.toString(),(t,e)=>t.isEqual(e))}const oX=new Wt($e.comparator),lX=new fn($e.comparator);function it(...t){let e=lX;for(const r of t)e=e.add(r);return e}const uX=new fn(st);function cX(){return uX}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:om(e)?"-0":e}}function S5(t){return{integerValue:""+t}}function dX(t,e){return jY(e)?S5(e):BS(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(){this._=void 0}}function hX(t,e,r){return t instanceof hm?function(s,a){const o={fields:{[o5]:{stringValue:a5},[u5]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&jS(a)&&(a=bg(a)),a&&(o.fields[l5]=a),{mapValue:o}}(r,e):t instanceof Od?I5(t,e):t instanceof jd?C5(t,e):function(s,a){const o=T5(s,a),l=xN(o)+xN(s.Ie);return mE(o)&&mE(s.Ie)?S5(l):BS(s.serializer,l)}(t,e)}function fX(t,e,r){return t instanceof Od?I5(t,e):t instanceof jd?C5(t,e):r}function T5(t,e){return t instanceof fm?function(i){return mE(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class hm extends Tg{}class Od extends Tg{constructor(e){super(),this.elements=e}}function I5(t,e){const r=k5(e);for(const i of t.elements)r.some(s=>Bi(s,i))||r.push(i);return{arrayValue:{values:r}}}class jd extends Tg{constructor(e){super(),this.elements=e}}function C5(t,e){let r=k5(e);for(const i of t.elements)r=r.filter(s=>!Bi(s,i));return{arrayValue:{values:r}}}class fm extends Tg{constructor(e,r){super(),this.serializer=e,this.Ie=r}}function xN(t){return Qt(t.integerValue||t.doubleValue)}function k5(t){return VS(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function pX(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Od&&s instanceof Od||i instanceof jd&&s instanceof jd?lu(i.elements,s.elements,Bi):i instanceof fm&&s instanceof fm?Bi(i.Ie,s.Ie):i instanceof hm&&s instanceof hm}(t.transform,e.transform)}class mX{constructor(e,r){this.version=e,this.transformResults=r}}class Vi{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Vi}static exists(e){return new Vi(void 0,e)}static updateTime(e){return new Vi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ig{}function N5(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new R5(t.key,Vi.none()):new ph(t.key,t.data,Vi.none());{const r=t.data,i=dr.empty();let s=new fn(bn.comparator);for(let a of e.fields)if(!s.has(a)){let o=r.field(a);o===null&&a.length>1&&(a=a.popLast(),o=r.field(a)),o===null?i.delete(a):i.set(a,o),s=s.add(a)}return new Ga(t.key,i,new Ir(s.toArray()),Vi.none())}}function gX(t,e,r){t instanceof ph?function(s,a,o){const l=s.value.clone(),u=SN(s.fieldTransforms,a,o.transformResults);l.setAll(u),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Ga?function(s,a,o){if(!vp(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=SN(s.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(A5(s)),u.setAll(l),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,r):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function od(t,e,r,i){return t instanceof ph?function(a,o,l,u){if(!vp(a.precondition,o))return l;const c=a.value.clone(),d=TN(a.fieldTransforms,u,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,r,i):t instanceof Ga?function(a,o,l,u){if(!vp(a.precondition,o))return l;const c=TN(a.fieldTransforms,u,o),d=o.data;return d.setAll(A5(a)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(h=>h.field))}(t,e,r,i):function(a,o,l){return vp(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function vX(t,e){let r=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),a=T5(i.transform,s||null);a!=null&&(r===null&&(r=dr.empty()),r.set(i.field,a))}return r||null}function EN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&lu(i,s,(a,o)=>pX(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ph extends Ig{constructor(e,r,i,s=[]){super(),this.key=e,this.value=r,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ga extends Ig{constructor(e,r,i,s,a=[]){super(),this.key=e,this.data=r,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function A5(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const i=t.data.field(r);e.set(r,i)}}),e}function SN(t,e,r){const i=new Map;gt(t.length===r.length);for(let s=0;s<r.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);i.set(a.field,fX(o,l,r[s]))}return i}function TN(t,e,r){const i=new Map;for(const s of t){const a=s.transform,o=r.data.field(s.field);i.set(s.field,hX(a,o,e))}return i}class R5 extends Ig{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yX extends Ig{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _X{constructor(e,r,i,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,r){const i=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&gX(a,e,i[s])}}applyToLocalView(e,r){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(r=od(i,e,r,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(r=od(i,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const i=E5();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=r.has(s.key)?null:l;const u=N5(o,l);u!==null&&i.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Ge.min())}),i}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),it())}isEqual(e){return this.batchId===e.batchId&&lu(this.mutations,e.mutations,(r,i)=>EN(r,i))&&lu(this.baseMutations,e.baseMutations,(r,i)=>EN(r,i))}}class zS{constructor(e,r,i,s){this.batch=e,this.commitVersion=r,this.mutationResults=i,this.docVersions=s}static from(e,r,i){gt(e.mutations.length===i.length);let s=function(){return oX}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,i[o].version);return new zS(e,r,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wX{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bX{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tn,ut;function xX(t){switch(t){case fe.OK:return He();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return He()}}function P5(t){if(t===void 0)return Ss("GRPC error has no .code"),fe.UNKNOWN;switch(t){case tn.OK:return fe.OK;case tn.CANCELLED:return fe.CANCELLED;case tn.UNKNOWN:return fe.UNKNOWN;case tn.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case tn.INTERNAL:return fe.INTERNAL;case tn.UNAVAILABLE:return fe.UNAVAILABLE;case tn.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case tn.NOT_FOUND:return fe.NOT_FOUND;case tn.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case tn.ABORTED:return fe.ABORTED;case tn.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case tn.DATA_LOSS:return fe.DATA_LOSS;default:return He()}}(ut=tn||(tn={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EX(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SX=new Sa([4294967295,4294967295],0);function IN(t){const e=EX().encode(t),r=new Yj;return r.update(e),new Uint8Array(r.digest())}function CN(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Sa([r,i],0),new Sa([s,a],0)]}class qS{constructor(e,r,i){if(this.bitmap=e,this.padding=r,this.hashCount=i,r<0||r>=8)throw new Lc(`Invalid padding: ${r}`);if(i<0)throw new Lc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Lc(`Invalid hash count: ${i}`);if(e.length===0&&r!==0)throw new Lc(`Invalid padding when bitmap length is 0: ${r}`);this.Ee=8*e.length-r,this.de=Sa.fromNumber(this.Ee)}Ae(e,r,i){let s=e.add(r.multiply(Sa.fromNumber(i)));return s.compare(SX)===1&&(s=new Sa([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const r=IN(e),[i,s]=CN(r);for(let a=0;a<this.hashCount;a++){const o=this.Ae(i,s,a);if(!this.Re(o))return!1}return!0}static create(e,r,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new qS(a,s,r);return i.forEach(l=>o.insert(l)),o}insert(e){if(this.Ee===0)return;const r=IN(e),[i,s]=CN(r);for(let a=0;a<this.hashCount;a++){const o=this.Ae(i,s,a);this.Ve(o)}}Ve(e){const r=Math.floor(e/8),i=e%8;this.bitmap[r]|=1<<i}}class Lc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,r,i,s,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,i){const s=new Map;return s.set(e,mh.createSynthesizedTargetChangeForCurrentChange(e,r,i)),new Cg(Ge.min(),s,new Wt(st),Ts(),it())}}class mh{constructor(e,r,i,s,a){this.resumeToken=e,this.current=r,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,i){return new mh(i,r,it(),it(),it())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yp{constructor(e,r,i,s){this.me=e,this.removedTargetIds=r,this.key=i,this.fe=s}}class D5{constructor(e,r){this.targetId=e,this.ge=r}}class M5{constructor(e,r,i=Sn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=i,this.cause=s}}class kN{constructor(){this.pe=0,this.ye=NN(),this.we=Sn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=it(),r=it(),i=it();return this.ye.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:i=i.add(s);break;default:He()}}),new mh(this.we,this.Se,e,r,i)}Me(){this.be=!1,this.ye=NN()}xe(e,r){this.be=!0,this.ye=this.ye.insert(e,r)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,gt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class TX{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ts(),this.$e=kf(),this.Ke=kf(),this.Ue=new Wt(st)}We(e){for(const r of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(r,e.fe):this.ze(r,e.key,e.fe);for(const r of e.removedTargetIds)this.ze(r,e.key,e.fe)}je(e){this.forEachTarget(e,r=>{const i=this.He(r);switch(e.state){case 0:this.Je(r)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(r);break;case 3:this.Je(r)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(r)&&(this.Ye(r),i.Ce(e.resumeToken));break;default:He()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.qe.forEach((i,s)=>{this.Je(s)&&r(s)})}Ze(e){const r=e.targetId,i=e.ge.count,s=this.Xe(r);if(s){const a=s.target;if(vE(a))if(i===0){const o=new $e(a.path);this.ze(r,o,Gn.newNoDocument(o,Ge.min()))}else gt(i===1);else{const o=this.et(r);if(o!==i){const l=this.tt(e),u=l?this.nt(l,e,o):1;if(u!==0){this.Ye(r);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(r,c)}}}}}tt(e){const r=e.ge.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=r;let o,l;try{o=La(i).toUint8Array()}catch(u){if(u instanceof s5)return Po("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new qS(o,s,a)}catch(u){return Po(u instanceof Lc?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ee===0?null:l}nt(e,r,i){return r.ge.count===i-this.st(e,r.targetId)?0:2}st(e,r){const i=this.ke.getRemoteKeysForTarget(r);let s=0;return i.forEach(a=>{const o=this.ke.it(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.ze(r,a,null),s++)}),s}ot(e){const r=new Map;this.qe.forEach((a,o)=>{const l=this.Xe(o);if(l){if(a.current&&vE(l.target)){const u=new $e(l.target.path);this._t(u).has(o)||this.ut(o,u)||this.ze(o,u,Gn.newNoDocument(u,e))}a.ve&&(r.set(o,a.Fe()),a.Me())}});let i=it();this.Ke.forEach((a,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Xe(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(a))}),this.Qe.forEach((a,o)=>o.setReadTime(e));const s=new Cg(e,r,this.Ue,this.Qe,i);return this.Qe=Ts(),this.$e=kf(),this.Ke=kf(),this.Ue=new Wt(st),s}Ge(e,r){if(!this.Je(e))return;const i=this.ut(e,r.key)?2:0;this.He(e).xe(r.key,i),this.Qe=this.Qe.insert(r.key,r),this.$e=this.$e.insert(r.key,this._t(r.key).add(e)),this.Ke=this.Ke.insert(r.key,this.ct(r.key).add(e))}ze(e,r,i){if(!this.Je(e))return;const s=this.He(e);this.ut(e,r)?s.xe(r,1):s.Oe(r),this.Ke=this.Ke.insert(r,this.ct(r).delete(e)),this.Ke=this.Ke.insert(r,this.ct(r).add(e)),i&&(this.Qe=this.Qe.insert(r,i))}removeTarget(e){this.qe.delete(e)}et(e){const r=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let r=this.qe.get(e);return r||(r=new kN,this.qe.set(e,r)),r}ct(e){let r=this.Ke.get(e);return r||(r=new fn(st),this.Ke=this.Ke.insert(e,r)),r}_t(e){let r=this.$e.get(e);return r||(r=new fn(st),this.$e=this.$e.insert(e,r)),r}Je(e){const r=this.Xe(e)!==null;return r||Ae("WatchChangeAggregator","Detected inactive target",e),r}Xe(e){const r=this.qe.get(e);return r&&r.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new kN),this.ke.getRemoteKeysForTarget(e).forEach(r=>{this.ze(e,r,null)})}ut(e,r){return this.ke.getRemoteKeysForTarget(e).has(r)}}function kf(){return new Wt($e.comparator)}function NN(){return new Wt($e.comparator)}const IX={asc:"ASCENDING",desc:"DESCENDING"},CX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kX={and:"AND",or:"OR"};class NX{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function _E(t,e){return t.useProto3Json||wg(e)?e:{value:e}}function pm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function L5(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function AX(t,e){return pm(t,e.toTimestamp())}function Fi(t){return gt(!!t),Ge.fromTimestamp(function(r){const i=Ma(r);return new on(i.seconds,i.nanos)}(t))}function HS(t,e){return wE(t,e).canonicalString()}function wE(t,e){const r=function(s){return new Ft(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function O5(t){const e=Ft.fromString(t);return gt(U5(e)),e}function bE(t,e){return HS(t.databaseId,e.path)}function Ry(t,e){const r=O5(e);if(r.get(1)!==t.databaseId.projectId)throw new Ve(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Ve(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new $e(V5(r))}function j5(t,e){return HS(t.databaseId,e)}function RX(t){const e=O5(t);return e.length===4?Ft.emptyPath():V5(e)}function xE(t){return new Ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function V5(t){return gt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function AN(t,e,r){return{name:bE(t,e),fields:r.value.mapValue.fields}}function PX(t,e){let r;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:He()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(c,d){return c.useProto3Json?(gt(d===void 0||typeof d=="string"),Sn.fromBase64String(d||"")):(gt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Sn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const d=c.code===void 0?fe.UNKNOWN:P5(c.code);return new Ve(d,c.message||"")}(o);r=new M5(i,s,a,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Ry(t,i.document.name),a=Fi(i.document.updateTime),o=i.document.createTime?Fi(i.document.createTime):Ge.min(),l=new dr({mapValue:{fields:i.document.fields}}),u=Gn.newFoundDocument(s,a,o,l),c=i.targetIds||[],d=i.removedTargetIds||[];r=new yp(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Ry(t,i.document),a=i.readTime?Fi(i.readTime):Ge.min(),o=Gn.newNoDocument(s,a),l=i.removedTargetIds||[];r=new yp([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Ry(t,i.document),a=i.removedTargetIds||[];r=new yp([],a,s,null)}else{if(!("filter"in e))return He();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,o=new bX(s,a),l=i.targetId;r=new D5(l,o)}}return r}function DX(t,e){let r;if(e instanceof ph)r={update:AN(t,e.key,e.value)};else if(e instanceof R5)r={delete:bE(t,e.key)};else if(e instanceof Ga)r={update:AN(t,e.key,e.data),updateMask:BX(e.fieldMask)};else{if(!(e instanceof yX))return He();r={verify:bE(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(i=>function(a,o){const l=o.transform;if(l instanceof hm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Od)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof jd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof fm)return{fieldPath:o.field.canonicalString(),increment:l.Ie};throw He()}(0,i))),e.precondition.isNone||(r.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:AX(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:He()}(t,e.precondition)),r}function MX(t,e){return t&&t.length>0?(gt(e!==void 0),t.map(r=>function(s,a){let o=s.updateTime?Fi(s.updateTime):Fi(a);return o.isEqual(Ge.min())&&(o=Fi(a)),new mX(o,s.transformResults||[])}(r,e))):[]}function LX(t,e){return{documents:[j5(t,e.path)]}}function OX(t,e){const r={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),r.structuredQuery.from=[{collectionId:i.lastSegment()}]),r.parent=j5(t,s);const a=function(c){if(c.length!==0)return $5(zi.create(c,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:wl(f.field),direction:FX(f.dir)}}(d))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=_E(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ht:r,parent:s}}function jX(t){let e=RX(t.parent);const r=t.structuredQuery,i=r.from?r.from.length:0;let s=null;if(i>0){gt(i===1);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let a=[];r.where&&(a=function(h){const f=F5(h);return f instanceof zi&&m5(f)?f.getFilters():[f]}(r.where));let o=[];r.orderBy&&(o=function(h){return h.map(f=>function(v){return new dm(bl(v.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(r.orderBy));let l=null;r.limit&&(l=function(h){let f;return f=typeof h=="object"?h.value:h,wg(f)?null:f}(r.limit));let u=null;r.startAt&&(u=function(h){const f=!!h.before,m=h.values||[];return new cm(m,f)}(r.startAt));let c=null;return r.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new cm(m,f)}(r.endAt)),tX(e,s,o,a,l,"F",u,c)}function VX(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function F5(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const i=bl(r.unaryFilter.field);return dn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=bl(r.unaryFilter.field);return dn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=bl(r.unaryFilter.field);return dn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=bl(r.unaryFilter.field);return dn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return He()}}(t):t.fieldFilter!==void 0?function(r){return dn.create(bl(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return He()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return zi.create(r.compositeFilter.filters.map(i=>F5(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return He()}}(r.compositeFilter.op))}(t):He()}function FX(t){return IX[t]}function $X(t){return CX[t]}function UX(t){return kX[t]}function wl(t){return{fieldPath:t.canonicalString()}}function bl(t){return bn.fromServerFormat(t.fieldPath)}function $5(t){return t instanceof dn?function(r){if(r.op==="=="){if(vN(r.value))return{unaryFilter:{field:wl(r.field),op:"IS_NAN"}};if(gN(r.value))return{unaryFilter:{field:wl(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(vN(r.value))return{unaryFilter:{field:wl(r.field),op:"IS_NOT_NAN"}};if(gN(r.value))return{unaryFilter:{field:wl(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:wl(r.field),op:$X(r.op),value:r.value}}}(t):t instanceof zi?function(r){const i=r.getFilters().map(s=>$5(s));return i.length===1?i[0]:{compositeFilter:{op:UX(r.op),filters:i}}}(t):He()}function BX(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function U5(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca{constructor(e,r,i,s,a=Ge.min(),o=Ge.min(),l=Sn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new ca(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new ca(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ca(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ca(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zX{constructor(e){this.Tt=e}}function qX(t){const e=jX({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?yE(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HX{constructor(){this.Tn=new WX}addToCollectionParentIndex(e,r){return this.Tn.add(r),de.resolve()}getCollectionParents(e,r){return de.resolve(this.Tn.getEntries(r))}addFieldIndex(e,r){return de.resolve()}deleteFieldIndex(e,r){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,r){return de.resolve()}getDocumentsMatchingTarget(e,r){return de.resolve(null)}getIndexType(e,r){return de.resolve(0)}getFieldIndexes(e,r){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,r){return de.resolve(Da.min())}getMinOffsetFromCollectionGroup(e,r){return de.resolve(Da.min())}updateCollectionGroup(e,r,i){return de.resolve()}updateIndexEntries(e,r){return de.resolve()}}class WX{constructor(){this.index={}}add(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r]||new fn(Ft.comparator),a=!s.has(i);return this.index[r]=s.add(i),a}has(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r];return s&&s.has(i)}getEntries(e){return(this.index[e]||new fn(Ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},B5=41943040;class ur{static withCacheSize(e){return new ur(e,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ur.DEFAULT_COLLECTION_PERCENTILE=10,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ur.DEFAULT=new ur(B5,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ur.DISABLED=new ur(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new hu(0)}static Un(){return new hu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN="LruGarbageCollector",GX=1048576;function DN([t,e],[r,i]){const s=st(t,r);return s===0?st(e,i):s}class KX{constructor(e){this.Hn=e,this.buffer=new fn(DN),this.Jn=0}Yn(){return++this.Jn}Zn(e){const r=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(r);else{const i=this.buffer.last();DN(r,i)<0&&(this.buffer=this.buffer.delete(i).add(r))}}get maxValue(){return this.buffer.last()[0]}}class YX{constructor(e,r,i){this.garbageCollector=e,this.asyncQueue=r,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){Ae(PN,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){ju(r)?Ae(PN,"Ignoring IndexedDB error during garbage collection: ",r):await Ou(r)}await this.er(3e5)})}}class XX{constructor(e,r){this.tr=e,this.params=r}calculateTargetCount(e,r){return this.tr.nr(e).next(i=>Math.floor(r/100*i))}nthSequenceNumber(e,r){if(r===0)return de.resolve(_g.ae);const i=new KX(r);return this.tr.forEachTarget(e,s=>i.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>i.Zn(s))).next(()=>i.maxValue)}removeTargets(e,r,i){return this.tr.removeTargets(e,r,i)}removeOrphanedDocuments(e,r){return this.tr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(RN)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),RN):this.ir(e,r))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,r){let i,s,a,o,l,u,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(i=h,l=Date.now(),this.removeTargets(e,i,r))).next(h=>(a=h,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(h=>(c=Date.now(),yl()<=rt.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${a} targets in `+(u-l)+`ms
	Removed ${h} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:h})))}}function QX(t,e){return new XX(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JX{constructor(){this.changes=new qo(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Gn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const i=this.changes.get(r);return i!==void 0?de.resolve(i):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZX{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eQ{constructor(e,r,i,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,r){let i=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(i!==null&&od(i.mutation,s,Ir.empty(),on.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.getLocalViewOfDocuments(e,i,it()).next(()=>i))}getLocalViewOfDocuments(e,r,i=it()){const s=mo();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,i).next(a=>{let o=Mc();return a.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const i=mo();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,it()))}populateOverlays(e,r,i){const s=[];return i.forEach(a=>{r.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,i,s){let a=Ts();const o=ad(),l=function(){return ad()}();return r.forEach((u,c)=>{const d=i.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Ga)?a=a.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),od(d.mutation,c,d.mutation.getFieldMask(),on.now())):o.set(c.key,Ir.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((c,d)=>o.set(c,d)),r.forEach((c,d)=>{var h;return l.set(c,new ZX(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),l))}recalculateAndSaveOverlays(e,r){const i=ad();let s=new Wt((o,l)=>o-l),a=it();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=r.get(u);if(c===null)return;let d=i.get(u)||Ir.empty();d=l.applyToLocalView(c,d),i.set(u,d);const h=(s.get(l.batchId)||it()).add(u);s=s.insert(l.batchId,h)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,d=u.value,h=E5();d.forEach(f=>{if(!a.has(f)){const m=N5(r.get(f),i.get(f));m!==null&&h.set(f,m),a=a.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return de.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,r,i,s){return function(o){return $e.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):nX(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,i,s):this.getDocumentsMatchingCollectionQuery(e,r,i,s)}getNextDocuments(e,r,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,i,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,i.largestBatchId,s-a.size):de.resolve(mo());let l=Dd,u=a;return o.next(c=>de.forEach(c,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),a.get(d)?de.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{u=u.insert(d,f)}))).next(()=>this.populateOverlays(e,c,a)).next(()=>this.computeViews(e,u,c,it())).next(d=>({batchId:l,changes:x5(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new $e(r)).next(i=>{let s=Mc();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,i,s){const a=r.collectionGroup;let o=Mc();return this.indexManager.getCollectionParents(e,a).next(l=>de.forEach(l,u=>{const c=function(h,f){return new xg(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,c,i,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,i.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,i,a,s))).next(o=>{a.forEach((u,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Gn.newInvalidDocument(d)))});let l=Mc();return o.forEach((u,c)=>{const d=a.get(u);d!==void 0&&od(d.mutation,c,Ir.empty(),on.now()),Sg(r,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tQ{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,r){return de.resolve(this.dr.get(r))}saveBundleMetadata(e,r){return this.dr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Fi(s.createTime)}}(r)),de.resolve()}getNamedQuery(e,r){return de.resolve(this.Ar.get(r))}saveNamedQuery(e,r){return this.Ar.set(r.name,function(s){return{name:s.name,query:qX(s.bundledQuery),readTime:Fi(s.readTime)}}(r)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nQ{constructor(){this.overlays=new Wt($e.comparator),this.Rr=new Map}getOverlay(e,r){return de.resolve(this.overlays.get(r))}getOverlays(e,r){const i=mo();return de.forEach(r,s=>this.getOverlay(e,s).next(a=>{a!==null&&i.set(s,a)})).next(()=>i)}saveOverlays(e,r,i){return i.forEach((s,a)=>{this.Et(e,r,a)}),de.resolve()}removeOverlaysForBatchId(e,r,i){const s=this.Rr.get(i);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Rr.delete(i)),de.resolve()}getOverlaysForCollection(e,r,i){const s=mo(),a=r.length+1,o=new $e(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===a&&u.largestBatchId>i&&s.set(u.getKey(),u)}return de.resolve(s)}getOverlaysForCollectionGroup(e,r,i,s){let a=new Wt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>i){let d=a.get(c.largestBatchId);d===null&&(d=mo(),a=a.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const l=mo(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>l.set(c,d)),!(l.size()>=s)););return de.resolve(l)}Et(e,r,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.Rr.get(s.largestBatchId).delete(i.key);this.Rr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new wX(r,i));let a=this.Rr.get(r);a===void 0&&(a=it(),this.Rr.set(r,a)),this.Rr.set(r,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rQ{constructor(){this.sessionToken=Sn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WS{constructor(){this.Vr=new fn(_n.mr),this.gr=new fn(_n.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,r){const i=new _n(e,r);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,r){e.forEach(i=>this.addReference(i,r))}removeReference(e,r){this.wr(new _n(e,r))}Sr(e,r){e.forEach(i=>this.removeReference(i,r))}br(e){const r=new $e(new Ft([])),i=new _n(r,e),s=new _n(r,e+1),a=[];return this.gr.forEachInRange([i,s],o=>{this.wr(o),a.push(o.key)}),a}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const r=new $e(new Ft([])),i=new _n(r,e),s=new _n(r,e+1);let a=it();return this.gr.forEachInRange([i,s],o=>{a=a.add(o.key)}),a}containsKey(e){const r=new _n(e,0),i=this.Vr.firstAfterOrEqual(r);return i!==null&&e.isEqual(i.key)}}class _n{constructor(e,r){this.key=e,this.Cr=r}static mr(e,r){return $e.comparator(e.key,r.key)||st(e.Cr,r.Cr)}static pr(e,r){return st(e.Cr,r.Cr)||$e.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iQ{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Fr=1,this.Mr=new fn(_n.mr)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,i,s){const a=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new _X(a,r,i,s);this.mutationQueue.push(o);for(const l of s)this.Mr=this.Mr.add(new _n(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return de.resolve(o)}lookupMutationBatch(e,r){return de.resolve(this.Or(r))}getNextMutationBatchAfterBatchId(e,r){const i=r+1,s=this.Nr(i),a=s<0?0:s;return de.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?OS:this.Fr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const i=new _n(r,0),s=new _n(r,Number.POSITIVE_INFINITY),a=[];return this.Mr.forEachInRange([i,s],o=>{const l=this.Or(o.Cr);a.push(l)}),de.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let i=new fn(st);return r.forEach(s=>{const a=new _n(s,0),o=new _n(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([a,o],l=>{i=i.add(l.Cr)})}),de.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,r){const i=r.path,s=i.length+1;let a=i;$e.isDocumentKey(a)||(a=a.child(""));const o=new _n(new $e(a),0);let l=new fn(st);return this.Mr.forEachWhile(u=>{const c=u.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(l=l.add(u.Cr)),!0)},o),de.resolve(this.Br(l))}Br(e){const r=[];return e.forEach(i=>{const s=this.Or(i);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){gt(this.Lr(r.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return de.forEach(r.mutations,s=>{const a=new _n(s.key,r.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,r){const i=new _n(r,0),s=this.Mr.firstAfterOrEqual(i);return de.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}Lr(e,r){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const r=this.Nr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sQ{constructor(e){this.kr=e,this.docs=function(){return new Wt($e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const i=r.key,s=this.docs.get(i),a=s?s.size:0,o=this.kr(r);return this.docs=this.docs.insert(i,{document:r.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const i=this.docs.get(r);return de.resolve(i?i.document.mutableCopy():Gn.newInvalidDocument(r))}getEntries(e,r){let i=Ts();return r.forEach(s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():Gn.newInvalidDocument(s))}),de.resolve(i)}getDocumentsMatchingQuery(e,r,i,s){let a=Ts();const o=r.path,l=new $e(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||DY(PY(d),i)<=0||(s.has(d.key)||Sg(r,d))&&(a=a.insert(d.key,d.mutableCopy()))}return de.resolve(a)}getAllFromCollectionGroup(e,r,i,s){He()}qr(e,r){return de.forEach(this.docs,i=>r(i))}newChangeBuffer(e){return new aQ(this)}getSize(e){return de.resolve(this.size)}}class aQ extends JX{constructor(e){super(),this.Ir=e}applyChanges(e){const r=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?r.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(i)}),de.waitFor(r)}getFromCache(e,r){return this.Ir.getEntry(e,r)}getAllFromCache(e,r){return this.Ir.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oQ{constructor(e){this.persistence=e,this.Qr=new qo(r=>FS(r),$S),this.lastRemoteSnapshotVersion=Ge.min(),this.highestTargetId=0,this.$r=0,this.Kr=new WS,this.targetCount=0,this.Ur=hu.Kn()}forEachTarget(e,r){return this.Qr.forEach((i,s)=>r(s)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,r,i){return i&&(this.lastRemoteSnapshotVersion=i),r>this.$r&&(this.$r=r),de.resolve()}zn(e){this.Qr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Ur=new hu(r),this.highestTargetId=r),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,r){return this.zn(r),this.targetCount+=1,de.resolve()}updateTargetData(e,r){return this.zn(r),de.resolve()}removeTargetData(e,r){return this.Qr.delete(r.target),this.Kr.br(r.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,r,i){let s=0;const a=[];return this.Qr.forEach((o,l)=>{l.sequenceNumber<=r&&i.get(l.targetId)===null&&(this.Qr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),de.waitFor(a).next(()=>s)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,r){const i=this.Qr.get(r)||null;return de.resolve(i)}addMatchingKeys(e,r,i){return this.Kr.yr(r,i),de.resolve()}removeMatchingKeys(e,r,i){this.Kr.Sr(r,i);const s=this.persistence.referenceDelegate,a=[];return s&&r.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),de.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this.Kr.br(r),de.resolve()}getMatchingKeysForTargetId(e,r){const i=this.Kr.vr(r);return de.resolve(i)}containsKey(e,r){return de.resolve(this.Kr.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z5{constructor(e,r){this.Wr={},this.overlays={},this.Gr=new _g(0),this.zr=!1,this.zr=!0,this.jr=new rQ,this.referenceDelegate=e(this),this.Hr=new oQ(this),this.indexManager=new HX,this.remoteDocumentCache=function(s){return new sQ(s)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new zX(r),this.Yr=new tQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new nQ,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let i=this.Wr[e.toKey()];return i||(i=new iQ(r,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,r,i){Ae("MemoryPersistence","Starting transaction:",e);const s=new lQ(this.Gr.next());return this.referenceDelegate.Zr(),i(s).next(a=>this.referenceDelegate.Xr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}ei(e,r){return de.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,r)))}}class lQ extends LY{constructor(e){super(),this.currentSequenceNumber=e}}class GS{constructor(e){this.persistence=e,this.ti=new WS,this.ni=null}static ri(e){return new GS(e)}get ii(){if(this.ni)return this.ni;throw He()}addReference(e,r,i){return this.ti.addReference(i,r),this.ii.delete(i.toString()),de.resolve()}removeReference(e,r,i){return this.ti.removeReference(i,r),this.ii.add(i.toString()),de.resolve()}markPotentiallyOrphaned(e,r){return this.ii.add(r.toString()),de.resolve()}removeTarget(e,r){this.ti.br(r.targetId).forEach(s=>this.ii.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(a=>this.ii.add(a.toString()))}).next(()=>i.removeTargetData(e,r))}Zr(){this.ni=new Set}Xr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.ii,i=>{const s=$e.fromPath(i);return this.si(e,s).next(a=>{a||r.removeEntry(s,Ge.min())})}).next(()=>(this.ni=null,r.apply(e)))}updateLimboDocument(e,r){return this.si(e,r).next(i=>{i?this.ii.delete(r.toString()):this.ii.add(r.toString())})}Jr(e){return 0}si(e,r){return de.or([()=>de.resolve(this.ti.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.ei(e,r)])}}class mm{constructor(e,r){this.persistence=e,this.oi=new qo(i=>VY(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=QX(this,r)}static ri(e,r){return new mm(e,r)}Zr(){}Xr(e){return de.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}nr(e){const r=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>r.next(s=>i+s))}sr(e){let r=0;return this.rr(e,i=>{r++}).next(()=>r)}rr(e,r){return de.forEach(this.oi,(i,s)=>this.ar(e,i,s).next(a=>a?de.resolve():r(s)))}removeTargets(e,r,i){return this.persistence.getTargetCache().removeTargets(e,r,i)}removeOrphanedDocuments(e,r){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.qr(e,o=>this.ar(e,o,r).next(l=>{l||(i++,a.removeEntry(o,Ge.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,r){return this.oi.set(r,e.currentSequenceNumber),de.resolve()}removeTarget(e,r){const i=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,r,i){return this.oi.set(i,e.currentSequenceNumber),de.resolve()}removeReference(e,r,i){return this.oi.set(i,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,r){return this.oi.set(r,e.currentSequenceNumber),de.resolve()}Jr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=mp(e.data.value)),r}ar(e,r,i){return de.or([()=>this.persistence.ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.oi.get(r);return de.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,r,i,s){this.targetId=e,this.fromCache=r,this.Hi=i,this.Ji=s}static Yi(e,r){let i=it(),s=it();for(const a of r.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new KS(e,r.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uQ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cQ{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return HH()?8:OY(Yn())>0?6:4}()}initialize(e,r){this.ns=e,this.indexManager=r,this.Zi=!0}getDocumentsMatchingQuery(e,r,i,s){const a={result:null};return this.rs(e,r).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ss(e,r,s,i).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new uQ;return this._s(e,r,o).next(l=>{if(a.result=l,this.Xi)return this.us(e,r,o,l.size)})}).next(()=>a.result)}us(e,r,i,s){return i.documentReadCount<this.es?(yl()<=rt.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",_l(r),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),de.resolve()):(yl()<=rt.DEBUG&&Ae("QueryEngine","Query:",_l(r),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ts*s?(yl()<=rt.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",_l(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ji(r))):de.resolve())}rs(e,r){if(bN(r))return de.resolve(null);let i=ji(r);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=yE(r,null,"F"),i=ji(r)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const o=it(...a);return this.ns.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const c=this.cs(r,l);return this.ls(r,c,o,u.readTime)?this.rs(e,yE(r,null,"F")):this.hs(e,c,r,u)}))})))}ss(e,r,i,s){return bN(r)||s.isEqual(Ge.min())?de.resolve(null):this.ns.getDocuments(e,i).next(a=>{const o=this.cs(r,a);return this.ls(r,o,i,s)?de.resolve(null):(yl()<=rt.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),_l(r)),this.hs(e,o,r,RY(s,Dd)).next(l=>l))})}cs(e,r){let i=new fn(w5(e));return r.forEach((s,a)=>{Sg(e,a)&&(i=i.add(a))}),i}ls(e,r,i,s){if(e.limit===null)return!1;if(i.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}_s(e,r,i){return yl()<=rt.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",_l(r)),this.ns.getDocumentsMatchingQuery(e,r,Da.min(),i)}hs(e,r,i,s){return this.ns.getDocumentsMatchingQuery(e,i,s).next(a=>(r.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="LocalStore",dQ=3e8;class hQ{constructor(e,r,i,s){this.persistence=e,this.Ps=r,this.serializer=s,this.Ts=new Wt(st),this.Is=new qo(a=>FS(a),$S),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eQ(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ts))}}function fQ(t,e,r,i){return new hQ(t,e,r,i)}async function q5(t,e){const r=Xe(t);return await r.persistence.runTransaction("Handle user change","readonly",i=>{let s;return r.mutationQueue.getAllMutationBatches(i).next(a=>(s=a,r.As(e),r.mutationQueue.getAllMutationBatches(i))).next(a=>{const o=[],l=[];let u=it();for(const c of s){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of a){l.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return r.localDocuments.getDocuments(i,u).next(c=>({Rs:c,removedBatchIds:o,addedBatchIds:l}))})})}function pQ(t,e){const r=Xe(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),a=r.ds.newChangeBuffer({trackRemovals:!0});return function(l,u,c,d){const h=c.batch,f=h.keys();let m=de.resolve();return f.forEach(v=>{m=m.next(()=>d.getEntry(u,v)).next(y=>{const b=c.docVersions.get(v);gt(b!==null),y.version.compareTo(b)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),d.addEntry(y)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(u,h))}(r,i,e,a).next(()=>a.apply(i)).next(()=>r.mutationQueue.performConsistencyCheck(i)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=it();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>r.localDocuments.getDocuments(i,s))})}function H5(t){const e=Xe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Hr.getLastRemoteSnapshotVersion(r))}function mQ(t,e){const r=Xe(t),i=e.snapshotVersion;let s=r.Ts;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=r.ds.newChangeBuffer({trackRemovals:!0});s=r.Ts;const l=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;l.push(r.Hr.removeMatchingKeys(a,d.removedDocuments,h).next(()=>r.Hr.addMatchingKeys(a,d.addedDocuments,h)));let m=f.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Sn.EMPTY_BYTE_STRING,Ge.min()).withLastLimboFreeSnapshotVersion(Ge.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,i)),s=s.insert(h,m),function(y,b,_){return y.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=dQ?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,m,d)&&l.push(r.Hr.updateTargetData(a,m))});let u=Ts(),c=it();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(a,d))}),l.push(gQ(a,o,e.documentUpdates).next(d=>{u=d.Vs,c=d.fs})),!i.isEqual(Ge.min())){const d=r.Hr.getLastRemoteSnapshotVersion(a).next(h=>r.Hr.setTargetsMetadata(a,a.currentSequenceNumber,i));l.push(d)}return de.waitFor(l).next(()=>o.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,u,c)).next(()=>u)}).then(a=>(r.Ts=s,a))}function gQ(t,e,r){let i=it(),s=it();return r.forEach(a=>i=i.add(a)),e.getEntries(t,i).next(a=>{let o=Ts();return r.forEach((l,u)=>{const c=a.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Ge.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):Ae(YS,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Vs:o,fs:s}})}function vQ(t,e){const r=Xe(t);return r.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=OS),r.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function yQ(t,e){const r=Xe(t);return r.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return r.Hr.getTargetData(i,e).next(a=>a?(s=a,de.resolve(s)):r.Hr.allocateTargetId(i).next(o=>(s=new ca(e,o,"TargetPurposeListen",i.currentSequenceNumber),r.Hr.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=r.Ts.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Ts=r.Ts.insert(i.targetId,i),r.Is.set(e,i.targetId)),i})}async function EE(t,e,r){const i=Xe(t),s=i.Ts.get(e),a=r?"readwrite":"readwrite-primary";try{r||await i.persistence.runTransaction("Release target",a,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ju(o))throw o;Ae(YS,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ts=i.Ts.remove(e),i.Is.delete(s.target)}function MN(t,e,r){const i=Xe(t);let s=Ge.min(),a=it();return i.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,d){const h=Xe(u),f=h.Is.get(d);return f!==void 0?de.resolve(h.Ts.get(f)):h.Hr.getTargetData(c,d)}(i,o,ji(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(o,l.targetId).next(u=>{a=u})}).next(()=>i.Ps.getDocumentsMatchingQuery(o,e,r?s:Ge.min(),r?a:it())).next(l=>(_Q(i,iX(e),l),{documents:l,gs:a})))}function _Q(t,e,r){let i=t.Es.get(e)||Ge.min();r.forEach((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),t.Es.set(e,i)}class LN{constructor(){this.activeTargetIds=cX()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wQ{constructor(){this.ho=new LN,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,i){}addLocalQueryTarget(e,r=!0){return r&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,r,i){this.Po[e]=r}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new LN,Promise.resolve()}handleUserChange(e,r,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bQ{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ON="ConnectivityMonitor";class jN{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Ae(ON,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Ae(ON,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nf=null;function SE(){return Nf===null?Nf=function(){return 268435456+Math.round(2147483648*Math.random())}():Nf++,"0x"+Nf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="RestConnection",xQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class EQ{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=r+"://"+e.host,this.yo=`projects/${i}/databases/${s}`,this.wo=this.databaseId.database===lm?`project_id=${i}`:`project_id=${i}&database_id=${s}`}So(e,r,i,s,a){const o=SE(),l=this.bo(e,r.toUriEncodedString());Ae(Py,`Sending RPC '${e}' ${o}:`,l,i);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,s,a),this.vo(e,l,u,i).then(c=>(Ae(Py,`Received RPC '${e}' ${o}: `,c),c),c=>{throw Po(Py,`RPC '${e}' ${o} failed with error: `,c,"url: ",l,"request:",i),c})}Co(e,r,i,s,a,o){return this.So(e,r,i,s,a)}Do(e,r,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Lu}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>e[a]=s),i&&i.headers.forEach((s,a)=>e[a]=s)}bo(e,r){const i=xQ[e];return`${this.po}/v1/${r}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SQ{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn="WebChannelConnection";class TQ extends EQ{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,r,i,s){const a=SE();return new Promise((o,l)=>{const u=new Xj;u.setWithCredentials(!0),u.listenOnce(Qj.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case pp.NO_ERROR:const d=u.getResponseJson();Ae(qn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case pp.TIMEOUT:Ae(qn,`RPC '${e}' ${a} timed out`),l(new Ve(fe.DEADLINE_EXCEEDED,"Request time out"));break;case pp.HTTP_ERROR:const h=u.getStatus();if(Ae(qn,`RPC '${e}' ${a} failed with status:`,h,"response text:",u.getResponseText()),h>0){let f=u.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const v=function(b){const _=b.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(_)>=0?_:fe.UNKNOWN}(m.status);l(new Ve(v,m.message))}else l(new Ve(fe.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Ve(fe.UNAVAILABLE,"Connection failed."));break;default:He()}}finally{Ae(qn,`RPC '${e}' ${a} completed.`)}});const c=JSON.stringify(s);Ae(qn,`RPC '${e}' ${a} sending request:`,s),u.send(r,"POST",c,i,15)})}Wo(e,r,i){const s=SE(),a=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=e5(),l=Zj(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,r,i),u.encodeInitMessageHeaders=!0;const d=a.join("");Ae(qn,`Creating RPC '${e}' stream ${s}: ${d}`,u);const h=o.createWebChannel(d,u);let f=!1,m=!1;const v=new SQ({Fo:b=>{m?Ae(qn,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(f||(Ae(qn,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),Ae(qn,`RPC '${e}' stream ${s} sending:`,b),h.send(b))},Mo:()=>h.close()}),y=(b,_,w)=>{b.listen(_,E=>{try{w(E)}catch(N){setTimeout(()=>{throw N},0)}})};return y(h,Dc.EventType.OPEN,()=>{m||(Ae(qn,`RPC '${e}' stream ${s} transport opened.`),v.Qo())}),y(h,Dc.EventType.CLOSE,()=>{m||(m=!0,Ae(qn,`RPC '${e}' stream ${s} transport closed`),v.Ko())}),y(h,Dc.EventType.ERROR,b=>{m||(m=!0,Po(qn,`RPC '${e}' stream ${s} transport errored:`,b),v.Ko(new Ve(fe.UNAVAILABLE,"The operation could not be completed")))}),y(h,Dc.EventType.MESSAGE,b=>{var _;if(!m){const w=b.data[0];gt(!!w);const E=w,N=(E==null?void 0:E.error)||((_=E[0])===null||_===void 0?void 0:_.error);if(N){Ae(qn,`RPC '${e}' stream ${s} received error:`,N);const M=N.status;let O=function(T){const I=tn[T];if(I!==void 0)return P5(I)}(M),A=N.message;O===void 0&&(O=fe.INTERNAL,A="Unknown error status: "+M+" with message "+N.message),m=!0,v.Ko(new Ve(O,A)),h.close()}else Ae(qn,`RPC '${e}' stream ${s} received:`,w),v.Uo(w)}}),y(l,Jj.STAT_EVENT,b=>{b.stat===fE.PROXY?Ae(qn,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===fE.NOPROXY&&Ae(qn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.$o()},0),v}}function Dy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t){return new NX(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W5{constructor(e,r,i=1e3,s=1.5,a=6e4){this.Ti=e,this.timerId=r,this.Go=i,this.zo=s,this.jo=a,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const r=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),s=Math.max(0,r-i);s>0&&Ae("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${r} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN="PersistentStream";class G5{constructor(e,r,i,s,a,o,l,u){this.Ti=e,this.n_=i,this.r_=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new W5(e,r)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,r){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():r&&r.code===fe.RESOURCE_EXHAUSTED?(Ss(r.toString()),Ss("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):r&&r.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(r)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),r=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.i_===r&&this.V_(i,s)},i=>{e(()=>{const s=new Ve(fe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(s)})})}V_(e,r){const i=this.R_(this.i_);this.stream=this.f_(e,r),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{i(()=>this.m_(s))}),this.stream.onMessage(s=>{i(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return Ae(VN,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return r=>{this.Ti.enqueueAndForget(()=>this.i_===e?r():(Ae(VN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class IQ extends G5{constructor(e,r,i,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,s,o),this.serializer=a}f_(e,r){return this.connection.Wo("Listen",e,r)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const r=PX(this.serializer,e),i=function(a){if(!("targetChange"in a))return Ge.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Ge.min():o.readTime?Fi(o.readTime):Ge.min()}(e);return this.listener.p_(r,i)}y_(e){const r={};r.database=xE(this.serializer),r.addTarget=function(a,o){let l;const u=o.target;if(l=vE(u)?{documents:LX(a,u)}:{query:OX(a,u).ht},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=L5(a,o.resumeToken);const c=_E(a,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ge.min())>0){l.readTime=pm(a,o.snapshotVersion.toTimestamp());const c=_E(a,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const i=VX(this.serializer,e);i&&(r.labels=i),this.I_(r)}w_(e){const r={};r.database=xE(this.serializer),r.removeTarget=e,this.I_(r)}}class CQ extends G5{constructor(e,r,i,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,s,o),this.serializer=a}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,r){return this.connection.Wo("Write",e,r)}g_(e){return gt(!!e.streamToken),this.lastStreamToken=e.streamToken,gt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){gt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const r=MX(e.writeResults,e.commitTime),i=Fi(e.commitTime);return this.listener.v_(i,r)}C_(){const e={};e.database=xE(this.serializer),this.I_(e)}b_(e){const r={streamToken:this.lastStreamToken,writes:e.map(i=>DX(this.serializer,i))};this.I_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kQ{}class NQ extends kQ{constructor(e,r,i,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=i,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new Ve(fe.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,r,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.So(e,wE(r,i),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ve(fe.UNKNOWN,a.toString())})}Co(e,r,i,s,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Co(e,wE(r,i),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ve(fe.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class AQ{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ss(r),this.N_=!1):Ae("OnlineStateTracker",r)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do="RemoteStore";class RQ{constructor(e,r,i,s,a){this.localStore=e,this.datastore=r,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=a,this.z_.To(o=>{i.enqueueAndForget(async()=>{Ho(this)&&(Ae(Do,"Restarting streams for network reachability change."),await async function(u){const c=Xe(u);c.W_.add(4),await gh(c),c.j_.set("Unknown"),c.W_.delete(4),await Ng(c)}(this))})}),this.j_=new AQ(i,s)}}async function Ng(t){if(Ho(t))for(const e of t.G_)await e(!0)}async function gh(t){for(const e of t.G_)await e(!1)}function K5(t,e){const r=Xe(t);r.U_.has(e.targetId)||(r.U_.set(e.targetId,e),ZS(r)?JS(r):Vu(r).c_()&&QS(r,e))}function XS(t,e){const r=Xe(t),i=Vu(r);r.U_.delete(e),i.c_()&&Y5(r,e),r.U_.size===0&&(i.c_()?i.P_():Ho(r)&&r.j_.set("Unknown"))}function QS(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ge.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Vu(t).y_(e)}function Y5(t,e){t.H_.Ne(e),Vu(t).w_(e)}function JS(t){t.H_=new TX({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.U_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),Vu(t).start(),t.j_.B_()}function ZS(t){return Ho(t)&&!Vu(t).u_()&&t.U_.size>0}function Ho(t){return Xe(t).W_.size===0}function X5(t){t.H_=void 0}async function PQ(t){t.j_.set("Online")}async function DQ(t){t.U_.forEach((e,r)=>{QS(t,e)})}async function MQ(t,e){X5(t),ZS(t)?(t.j_.q_(e),JS(t)):t.j_.set("Unknown")}async function LQ(t,e,r){if(t.j_.set("Online"),e instanceof M5&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.U_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.U_.delete(l),s.H_.removeTarget(l))}(t,e)}catch(i){Ae(Do,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await gm(t,i)}else if(e instanceof yp?t.H_.We(e):e instanceof D5?t.H_.Ze(e):t.H_.je(e),!r.isEqual(Ge.min()))try{const i=await H5(t.localStore);r.compareTo(i)>=0&&await function(a,o){const l=a.H_.ot(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=a.U_.get(c);d&&a.U_.set(c,d.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const d=a.U_.get(u);if(!d)return;a.U_.set(u,d.withResumeToken(Sn.EMPTY_BYTE_STRING,d.snapshotVersion)),Y5(a,u);const h=new ca(d.target,u,c,d.sequenceNumber);QS(a,h)}),a.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(i){Ae(Do,"Failed to raise snapshot:",i),await gm(t,i)}}async function gm(t,e,r){if(!ju(e))throw e;t.W_.add(1),await gh(t),t.j_.set("Offline"),r||(r=()=>H5(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ae(Do,"Retrying IndexedDB access"),await r(),t.W_.delete(1),await Ng(t)})}function Q5(t,e){return e().catch(r=>gm(t,r,e))}async function Ag(t){const e=Xe(t),r=ja(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:OS;for(;OQ(e);)try{const s=await vQ(e.localStore,i);if(s===null){e.K_.length===0&&r.P_();break}i=s.batchId,jQ(e,s)}catch(s){await gm(e,s)}J5(e)&&Z5(e)}function OQ(t){return Ho(t)&&t.K_.length<10}function jQ(t,e){t.K_.push(e);const r=ja(t);r.c_()&&r.S_&&r.b_(e.mutations)}function J5(t){return Ho(t)&&!ja(t).u_()&&t.K_.length>0}function Z5(t){ja(t).start()}async function VQ(t){ja(t).C_()}async function FQ(t){const e=ja(t);for(const r of t.K_)e.b_(r.mutations)}async function $Q(t,e,r){const i=t.K_.shift(),s=zS.from(i,e,r);await Q5(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ag(t)}async function UQ(t,e){e&&ja(t).S_&&await async function(i,s){if(function(o){return xX(o)&&o!==fe.ABORTED}(s.code)){const a=i.K_.shift();ja(i).h_(),await Q5(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Ag(i)}}(t,e),J5(t)&&Z5(t)}async function FN(t,e){const r=Xe(t);r.asyncQueue.verifyOperationInProgress(),Ae(Do,"RemoteStore received new credentials");const i=Ho(r);r.W_.add(3),await gh(r),i&&r.j_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.W_.delete(3),await Ng(r)}async function BQ(t,e){const r=Xe(t);e?(r.W_.delete(2),await Ng(r)):e||(r.W_.add(2),await gh(r),r.j_.set("Unknown"))}function Vu(t){return t.J_||(t.J_=function(r,i,s){const a=Xe(r);return a.M_(),new IQ(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{xo:PQ.bind(null,t),No:DQ.bind(null,t),Lo:MQ.bind(null,t),p_:LQ.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),ZS(t)?JS(t):t.j_.set("Unknown")):(await t.J_.stop(),X5(t))})),t.J_}function ja(t){return t.Y_||(t.Y_=function(r,i,s){const a=Xe(r);return a.M_(),new CQ(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:VQ.bind(null,t),Lo:UQ.bind(null,t),D_:FQ.bind(null,t),v_:$Q.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await Ag(t)):(await t.Y_.stop(),t.K_.length>0&&(Ae(Do,`Stopping write stream with ${t.K_.length} pending writes`),t.K_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,r,i,s,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new ms,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,i,s,a){const o=Date.now()+i,l=new eT(e,r,o,s,a);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function tT(t,e){if(Ss("AsyncQueue",`${e}: ${t}`),ju(t))return new Ve(fe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl{static emptySet(e){return new Gl(e.comparator)}constructor(e){this.comparator=e?(r,i)=>e(r,i)||$e.comparator(r.key,i.key):(r,i)=>$e.comparator(r.key,i.key),this.keyedMap=Mc(),this.sortedSet=new Wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,i)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Gl)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const i=new Gl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=r,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $N{constructor(){this.Z_=new Wt($e.comparator)}track(e){const r=e.doc.key,i=this.Z_.get(r);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(r,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(r,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(r,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(r,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(r):e.type===1&&i.type===2?this.Z_=this.Z_.insert(r,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(r,{type:2,doc:e.doc}):He():this.Z_=this.Z_.insert(r,e)}X_(){const e=[];return this.Z_.inorderTraversal((r,i)=>{e.push(i)}),e}}class fu{constructor(e,r,i,s,a,o,l,u,c){this.query=e,this.docs=r,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,r,i,s,a){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new fu(e,r,Gl.emptySet(r),o,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,i=e.docChanges;if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==i[s].type||!r[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zQ{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class qQ{constructor(){this.queries=UN(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(r,i){const s=Xe(r),a=s.queries;s.queries=UN(),a.forEach((o,l)=>{for(const u of l.ta)u.onError(i)})})(this,new Ve(fe.ABORTED,"Firestore shutting down"))}}function UN(){return new qo(t=>_5(t),Eg)}async function e8(t,e){const r=Xe(t);let i=3;const s=e.query;let a=r.queries.get(s);a?!a.na()&&e.ra()&&(i=2):(a=new zQ,i=e.ra()?0:1);try{switch(i){case 0:a.ea=await r.onListen(s,!0);break;case 1:a.ea=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(o){const l=tT(o,`Initialization of query '${_l(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,a),a.ta.push(e),e.sa(r.onlineState),a.ea&&e.oa(a.ea)&&nT(r)}async function t8(t,e){const r=Xe(t),i=e.query;let s=3;const a=r.queries.get(i);if(a){const o=a.ta.indexOf(e);o>=0&&(a.ta.splice(o,1),a.ta.length===0?s=e.ra()?0:1:!a.na()&&e.ra()&&(s=2))}switch(s){case 0:return r.queries.delete(i),r.onUnlisten(i,!0);case 1:return r.queries.delete(i),r.onUnlisten(i,!1);case 2:return r.onLastRemoteStoreUnlisten(i);default:return}}function HQ(t,e){const r=Xe(t);let i=!1;for(const s of e){const a=s.query,o=r.queries.get(a);if(o){for(const l of o.ta)l.oa(s)&&(i=!0);o.ea=s}}i&&nT(r)}function WQ(t,e,r){const i=Xe(t),s=i.queries.get(e);if(s)for(const a of s.ta)a.onError(r);i.queries.delete(e)}function nT(t){t.ia.forEach(e=>{e.next()})}var TE,BN;(BN=TE||(TE={}))._a="default",BN.Cache="cache";class n8{constructor(e,r,i){this.query=e,this.aa=r,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new fu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.ua?this.la(e)&&(this.aa.next(e),r=!0):this.ha(e,this.onlineState)&&(this.Pa(e),r=!0),this.ca=e,r}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let r=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),r=!0),r}ha(e,r){if(!e.fromCache||!this.ra())return!0;const i=r!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}la(e){if(e.docChanges.length>0)return!0;const r=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}Pa(e){e=fu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==TE.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(e){this.key=e}}class i8{constructor(e){this.key=e}}class GQ{constructor(e,r){this.query=e,this.fa=r,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=it(),this.mutatedKeys=it(),this.ya=w5(e),this.wa=new Gl(this.ya)}get Sa(){return this.fa}ba(e,r){const i=r?r.Da:new $N,s=r?r.wa:this.wa;let a=r?r.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),m=Sg(this.query,h)?h:null,v=!!f&&this.mutatedKeys.has(f.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let b=!1;f&&m?f.data.isEqual(m.data)?v!==y&&(i.track({type:3,doc:m}),b=!0):this.va(f,m)||(i.track({type:2,doc:m}),b=!0,(u&&this.ya(m,u)>0||c&&this.ya(m,c)<0)&&(l=!0)):!f&&m?(i.track({type:0,doc:m}),b=!0):f&&!m&&(i.track({type:1,doc:f}),b=!0,(u||c)&&(l=!0)),b&&(m?(o=o.add(m),a=y?a.add(d):a.delete(d)):(o=o.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),a=a.delete(d.key),i.track({type:1,doc:d})}return{wa:o,Da:i,ls:l,mutatedKeys:a}}va(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,i,s){const a=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((d,h)=>function(m,v){const y=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He()}};return y(m)-y(v)}(d.type,h.type)||this.ya(d.doc,h.doc)),this.Ca(i),s=s!=null&&s;const l=r&&!s?this.Fa():[],u=this.pa.size===0&&this.current&&!s?1:0,c=u!==this.ga;return this.ga=u,o.length!==0||c?{snapshot:new fu(this.query,e.wa,a,o,e.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new $N,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(r=>this.fa=this.fa.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.fa=this.fa.delete(r)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=it(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const r=[];return e.forEach(i=>{this.pa.has(i)||r.push(new i8(i))}),this.pa.forEach(i=>{e.has(i)||r.push(new r8(i))}),r}Oa(e){this.fa=e.gs,this.pa=it();const r=this.ba(e.documents);return this.applyChanges(r,!0)}Na(){return fu.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const rT="SyncEngine";class KQ{constructor(e,r,i){this.query=e,this.targetId=r,this.view=i}}class YQ{constructor(e){this.key=e,this.Ba=!1}}class XQ{constructor(e,r,i,s,a,o){this.localStore=e,this.remoteStore=r,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new qo(l=>_5(l),Eg),this.qa=new Map,this.Qa=new Set,this.$a=new Wt($e.comparator),this.Ka=new Map,this.Ua=new WS,this.Wa={},this.Ga=new Map,this.za=hu.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function QQ(t,e,r=!0){const i=c8(t);let s;const a=i.ka.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Na()):s=await s8(i,e,r,!0),s}async function JQ(t,e){const r=c8(t);await s8(r,e,!0,!1)}async function s8(t,e,r,i){const s=await yQ(t.localStore,ji(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,r);let l;return i&&(l=await ZQ(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&r&&K5(t.remoteStore,s),l}async function ZQ(t,e,r,i,s){t.Ha=(h,f,m)=>async function(y,b,_,w){let E=b.view.ba(_);E.ls&&(E=await MN(y.localStore,b.query,!1).then(({documents:A})=>b.view.ba(A,E)));const N=w&&w.targetChanges.get(b.targetId),M=w&&w.targetMismatches.get(b.targetId)!=null,O=b.view.applyChanges(E,y.isPrimaryClient,N,M);return qN(y,b.targetId,O.Ma),O.snapshot}(t,h,f,m);const a=await MN(t.localStore,e,!0),o=new GQ(e,a.gs),l=o.ba(a.documents),u=mh.createSynthesizedTargetChangeForCurrentChange(r,i&&t.onlineState!=="Offline",s),c=o.applyChanges(l,t.isPrimaryClient,u);qN(t,r,c.Ma);const d=new KQ(e,r,o);return t.ka.set(e,d),t.qa.has(r)?t.qa.get(r).push(e):t.qa.set(r,[e]),c.snapshot}async function eJ(t,e,r){const i=Xe(t),s=i.ka.get(e),a=i.qa.get(s.targetId);if(a.length>1)return i.qa.set(s.targetId,a.filter(o=>!Eg(o,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await EE(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),r&&XS(i.remoteStore,s.targetId),IE(i,s.targetId)}).catch(Ou)):(IE(i,s.targetId),await EE(i.localStore,s.targetId,!0))}async function tJ(t,e){const r=Xe(t),i=r.ka.get(e),s=r.qa.get(i.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(i.targetId),XS(r.remoteStore,i.targetId))}async function nJ(t,e,r){const i=uJ(t);try{const s=await function(o,l){const u=Xe(o),c=on.now(),d=l.reduce((m,v)=>m.add(v.key),it());let h,f;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=Ts(),y=it();return u.ds.getEntries(m,d).next(b=>{v=b,v.forEach((_,w)=>{w.isValidDocument()||(y=y.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,v)).next(b=>{h=b;const _=[];for(const w of l){const E=vX(w,h.get(w.key).overlayedDocument);E!=null&&_.push(new Ga(w.key,E,h5(E.value.mapValue),Vi.exists(!0)))}return u.mutationQueue.addMutationBatch(m,c,_,l)}).next(b=>{f=b;const _=b.applyToLocalDocumentSet(h,y);return u.documentOverlayCache.saveOverlays(m,b.batchId,_)})}).then(()=>({batchId:f.batchId,changes:x5(h)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let c=o.Wa[o.currentUser.toKey()];c||(c=new Wt(st)),c=c.insert(l,u),o.Wa[o.currentUser.toKey()]=c}(i,s.batchId,r),await vh(i,s.changes),await Ag(i.remoteStore)}catch(s){const a=tT(s,"Failed to persist write");r.reject(a)}}async function a8(t,e){const r=Xe(t);try{const i=await mQ(r.localStore,e);e.targetChanges.forEach((s,a)=>{const o=r.Ka.get(a);o&&(gt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ba=!0:s.modifiedDocuments.size>0?gt(o.Ba):s.removedDocuments.size>0&&(gt(o.Ba),o.Ba=!1))}),await vh(r,i,e)}catch(i){await Ou(i)}}function zN(t,e,r){const i=Xe(t);if(i.isPrimaryClient&&r===0||!i.isPrimaryClient&&r===1){const s=[];i.ka.forEach((a,o)=>{const l=o.view.sa(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=Xe(o);u.onlineState=l;let c=!1;u.queries.forEach((d,h)=>{for(const f of h.ta)f.sa(l)&&(c=!0)}),c&&nT(u)}(i.eventManager,e),s.length&&i.La.p_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function rJ(t,e,r){const i=Xe(t);i.sharedClientState.updateQueryState(e,"rejected",r);const s=i.Ka.get(e),a=s&&s.key;if(a){let o=new Wt($e.comparator);o=o.insert(a,Gn.newNoDocument(a,Ge.min()));const l=it().add(a),u=new Cg(Ge.min(),new Map,new Wt(st),o,l);await a8(i,u),i.$a=i.$a.remove(a),i.Ka.delete(e),iT(i)}else await EE(i.localStore,e,!1).then(()=>IE(i,e,r)).catch(Ou)}async function iJ(t,e){const r=Xe(t),i=e.batch.batchId;try{const s=await pQ(r.localStore,e);l8(r,i,null),o8(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),await vh(r,s)}catch(s){await Ou(s)}}async function sJ(t,e,r){const i=Xe(t);try{const s=await function(o,l){const u=Xe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,l).next(h=>(gt(h!==null),d=h.keys(),u.mutationQueue.removeMutationBatch(c,h))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(i.localStore,e);l8(i,e,r),o8(i,e),i.sharedClientState.updateMutationState(e,"rejected",r),await vh(i,s)}catch(s){await Ou(s)}}function o8(t,e){(t.Ga.get(e)||[]).forEach(r=>{r.resolve()}),t.Ga.delete(e)}function l8(t,e,r){const i=Xe(t);let s=i.Wa[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(r?a.reject(r):a.resolve(),s=s.remove(e)),i.Wa[i.currentUser.toKey()]=s}}function IE(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.qa.get(e))t.ka.delete(i),r&&t.La.Ja(i,r);t.qa.delete(e),t.isPrimaryClient&&t.Ua.br(e).forEach(i=>{t.Ua.containsKey(i)||u8(t,i)})}function u8(t,e){t.Qa.delete(e.path.canonicalString());const r=t.$a.get(e);r!==null&&(XS(t.remoteStore,r),t.$a=t.$a.remove(e),t.Ka.delete(r),iT(t))}function qN(t,e,r){for(const i of r)i instanceof r8?(t.Ua.addReference(i.key,e),aJ(t,i)):i instanceof i8?(Ae(rT,"Document no longer in limbo: "+i.key),t.Ua.removeReference(i.key,e),t.Ua.containsKey(i.key)||u8(t,i.key)):He()}function aJ(t,e){const r=e.key,i=r.path.canonicalString();t.$a.get(r)||t.Qa.has(i)||(Ae(rT,"New document in limbo: "+r),t.Qa.add(i),iT(t))}function iT(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const r=new $e(Ft.fromString(e)),i=t.za.next();t.Ka.set(i,new YQ(r)),t.$a=t.$a.insert(r,i),K5(t.remoteStore,new ca(ji(US(r.path)),i,"TargetPurposeLimboResolution",_g.ae))}}async function vh(t,e,r){const i=Xe(t),s=[],a=[],o=[];i.ka.isEmpty()||(i.ka.forEach((l,u)=>{o.push(i.Ha(u,e,r).then(c=>{var d;if((c||r)&&i.isPrimaryClient){const h=c?!c.fromCache:(d=r==null?void 0:r.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){s.push(c);const h=KS.Yi(u.targetId,c);a.push(h)}}))}),await Promise.all(o),i.La.p_(s),await async function(u,c){const d=Xe(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>de.forEach(c,f=>de.forEach(f.Hi,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>de.forEach(f.Ji,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!ju(h))throw h;Ae(YS,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=d.Ts.get(f),v=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(v);d.Ts=d.Ts.insert(f,y)}}}(i.localStore,a))}async function oJ(t,e){const r=Xe(t);if(!r.currentUser.isEqual(e)){Ae(rT,"User change. New user:",e.toKey());const i=await q5(r.localStore,e);r.currentUser=e,function(a,o){a.Ga.forEach(l=>{l.forEach(u=>{u.reject(new Ve(fe.CANCELLED,o))})}),a.Ga.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await vh(r,i.Rs)}}function lJ(t,e){const r=Xe(t),i=r.Ka.get(e);if(i&&i.Ba)return it().add(i.key);{let s=it();const a=r.qa.get(e);if(!a)return s;for(const o of a){const l=r.ka.get(o);s=s.unionWith(l.view.Sa)}return s}}function c8(t){const e=Xe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=a8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lJ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=rJ.bind(null,e),e.La.p_=HQ.bind(null,e.eventManager),e.La.Ja=WQ.bind(null,e.eventManager),e}function uJ(t){const e=Xe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iJ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sJ.bind(null,e),e}class vm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kg(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,r){return null}nu(e,r){return null}eu(e){return fQ(this.persistence,new cQ,e.initialUser,this.serializer)}Xa(e){return new z5(GS.ri,this.serializer)}Za(e){return new wQ}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vm.provider={build:()=>new vm};class cJ extends vm{constructor(e){super(),this.cacheSizeBytes=e}tu(e,r){gt(this.persistence.referenceDelegate instanceof mm);const i=this.persistence.referenceDelegate.garbageCollector;return new YX(i,e.asyncQueue,r)}Xa(e){const r=this.cacheSizeBytes!==void 0?ur.withCacheSize(this.cacheSizeBytes):ur.DEFAULT;return new z5(i=>mm.ri(i,r),this.serializer)}}class CE{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>zN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=oJ.bind(null,this.syncEngine),await BQ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qQ}()}createDatastore(e){const r=kg(e.databaseInfo.databaseId),i=function(a){return new TQ(a)}(e.databaseInfo);return function(a,o,l,u){return new NQ(a,o,l,u)}(e.authCredentials,e.appCheckCredentials,i,r)}createRemoteStore(e){return function(i,s,a,o,l){return new RQ(i,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>zN(this.syncEngine,r,0),function(){return jN.D()?new jN:new bQ}())}createSyncEngine(e,r){return function(s,a,o,l,u,c,d){const h=new XQ(s,a,o,l,u,c);return d&&(h.ja=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const a=Xe(s);Ae(Do,"RemoteStore shutting down."),a.W_.add(5),await gh(a),a.z_.shutdown(),a.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}CE.provider={build:()=>new CE};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d8{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Ss("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Va="FirestoreClient";class dJ{constructor(e,r,i,s,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=i,this.databaseInfo=s,this.user=Hn.UNAUTHENTICATED,this.clientId=LS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async o=>{Ae(Va,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(Ae(Va,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ms;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=tT(r,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function My(t,e){t.asyncQueue.verifyOperationInProgress(),Ae(Va,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let i=r.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await q5(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function HN(t,e){t.asyncQueue.verifyOperationInProgress();const r=await hJ(t);Ae(Va,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(i=>FN(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>FN(e.remoteStore,s)),t._onlineComponents=e}async function hJ(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ae(Va,"Using user provided OfflineComponentProvider");try{await My(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===fe.FAILED_PRECONDITION||s.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Po("Error using user provided cache. Falling back to memory cache: "+r),await My(t,new vm)}}else Ae(Va,"Using default OfflineComponentProvider"),await My(t,new cJ(void 0));return t._offlineComponents}async function h8(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ae(Va,"Using user provided OnlineComponentProvider"),await HN(t,t._uninitializedComponentsProvider._online)):(Ae(Va,"Using default OnlineComponentProvider"),await HN(t,new CE))),t._onlineComponents}function fJ(t){return h8(t).then(e=>e.syncEngine)}async function f8(t){const e=await h8(t),r=e.eventManager;return r.onListen=QQ.bind(null,e.syncEngine),r.onUnlisten=eJ.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=JQ.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=tJ.bind(null,e.syncEngine),r}function pJ(t,e,r={}){const i=new ms;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,c){const d=new d8({next:f=>{d.su(),o.enqueueAndForget(()=>t8(a,h));const m=f.docs.has(l);!m&&f.fromCache?c.reject(new Ve(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&u&&u.source==="server"?c.reject(new Ve(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new n8(US(l.path),d,{includeMetadataChanges:!0,Ta:!0});return e8(a,h)}(await f8(t),t.asyncQueue,e,r,i)),i.promise}function mJ(t,e,r={}){const i=new ms;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,c){const d=new d8({next:f=>{d.su(),o.enqueueAndForget(()=>t8(a,h)),f.fromCache&&u.source==="server"?c.reject(new Ve(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new n8(l,d,{includeMetadataChanges:!0,Ta:!0});return e8(a,h)}(await f8(t),t.asyncQueue,e,r,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p8(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8(t,e,r){if(!r)throw new Ve(fe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function g8(t,e,r,i){if(e===!0&&i===!0)throw new Ve(fe.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function GN(t){if(!$e.isDocumentKey(t))throw new Ve(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function KN(t){if($e.isDocumentKey(t))throw new Ve(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function sT(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":He()}function qi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ve(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=sT(t);throw new Ve(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v8="firestore.googleapis.com",YN=!0;class XN{constructor(e){var r,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ve(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=v8,this.ssl=YN}else this.host=e.host,this.ssl=(r=e.ssl)!==null&&r!==void 0?r:YN;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=B5;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<GX)throw new Ve(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}g8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=p8((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ve(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ve(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ve(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rg{constructor(e,r,i,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new XN({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ve(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ve(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new XN(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new n5;switch(i.type){case"firstParty":return new CY(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ve(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const i=WN.get(r);i&&(Ae("ComponentProvider","Removing Datastore"),WN.delete(r),i.terminate())}(this),Promise.resolve()}}function y8(t,e,r,i={}){var s;const a=(t=qi(t,Rg))._getSettings(),o=`${e}:${r}`;if(a.host!==v8&&a.host!==o&&Po("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){let l,u;if(typeof i.mockUserToken=="string")l=i.mockUserToken,u=Hn.MOCK_USER;else{l=VH(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Ve(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Hn(c)}t._authCredentials=new SY(new t5(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,r,i){this.converter=r,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new yh(this.firestore,e,this._query)}}class tr{constructor(e,r,i){this.converter=r,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tr(this.firestore,e,this._key)}}class gs extends yh{constructor(e,r,i){super(e,r,US(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tr(this.firestore,null,new $e(e))}withConverter(e){return new gs(this.firestore,e,this._path)}}function rn(t,e,...r){if(t=Ln(t),m8("collection","path",e),t instanceof Rg){const i=Ft.fromString(e,...r);return KN(i),new gs(t,null,i)}{if(!(t instanceof tr||t instanceof gs))throw new Ve(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ft.fromString(e,...r));return KN(i),new gs(t.firestore,null,i)}}function Is(t,e,...r){if(t=Ln(t),arguments.length===1&&(e=LS.newId()),m8("doc","path",e),t instanceof Rg){const i=Ft.fromString(e,...r);return GN(i),new tr(t,null,new $e(i))}{if(!(t instanceof tr||t instanceof gs))throw new Ve(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ft.fromString(e,...r));return GN(i),new tr(t.firestore,t instanceof gs?t.converter:null,new $e(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN="AsyncQueue";class JN{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new W5(this,"async_queue_retry"),this.Su=()=>{const i=Dy();i&&Ae(QN,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=e;const r=Dy();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const r=Dy();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const r=new ms;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!ju(e))throw e;Ae(QN,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const r=this.bu.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(i);throw Ss("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.pu=!1,i))));return this.bu=r,r}enqueueAfterDelay(e,r,i){this.Du(),this.wu.indexOf(e)>-1&&(r=0);const s=eT.createAndSchedule(this,e,r,i,a=>this.Fu(a));return this.fu.push(s),s}Du(){this.gu&&He()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const r of this.fu)if(r.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((r,i)=>r.targetTimeMs-i.targetTimeMs);for(const r of this.fu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const r=this.fu.indexOf(e);this.fu.splice(r,1)}}class Fu extends Rg{constructor(e,r,i,s){super(e,r,i,s),this.type="firestore",this._queue=new JN,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new JN(e),this._firestoreClient=void 0,await e}}}function _8(t,e){const r=typeof t=="object"?t:hj(),i=typeof t=="string"?t:lm,s=SS(r,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=OH("firestore");a&&y8(s,...a)}return s}function Pg(t){if(t._terminated)throw new Ve(fe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||gJ(t),t._firestoreClient}function gJ(t){var e,r,i;const s=t._freezeSettings(),a=function(l,u,c,d){return new UY(l,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,p8(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new dJ(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mo(Sn.fromBase64String(e))}catch(r){throw new Ve(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Mo(Sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Ve(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Ve(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Ve(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vJ=/^__.*__$/;class yJ{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return this.fieldMask!==null?new Ga(e,this.data,this.fieldMask,r,this.fieldTransforms):new ph(e,this.data,r,this.fieldTransforms)}}class w8{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return new Ga(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function b8(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He()}}class aT{constructor(e,r,i,s,a,o){this.settings=e,this.databaseId=r,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Bu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new aT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var r;const i=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.ku({path:i,Qu:!1});return s.$u(e),s}Ku(e){var r;const i=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.ku({path:i,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return ym(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(b8(this.Lu)&&vJ.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class _J{constructor(e,r,i){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=i||kg(e)}ju(e,r,i,s=!1){return new aT({Lu:e,methodName:r,zu:i,path:bn.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function x8(t){const e=t._freezeSettings(),r=kg(t._databaseId);return new _J(t._databaseId,!!e.ignoreUndefinedProperties,r)}function wJ(t,e,r,i,s,a={}){const o=t.ju(a.merge||a.mergeFields?2:0,e,r,s);oT("Data must be an object, but it was:",o,i);const l=E8(i,o);let u,c;if(a.merge)u=new Ir(o.fieldMask),c=o.fieldTransforms;else if(a.mergeFields){const d=[];for(const h of a.mergeFields){const f=kE(e,h,r);if(!o.contains(f))throw new Ve(fe.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);T8(d,f)||d.push(f)}u=new Ir(d),c=o.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,c=o.fieldTransforms;return new yJ(new dr(l),u,c)}class Og extends Dg{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Og}}function bJ(t,e,r,i){const s=t.ju(1,e,r);oT("Data must be an object, but it was:",s,i);const a=[],o=dr.empty();Wa(i,(u,c)=>{const d=lT(e,u,r);c=Ln(c);const h=s.Ku(d);if(c instanceof Og)a.push(d);else{const f=jg(c,h);f!=null&&(a.push(d),o.set(d,f))}});const l=new Ir(a);return new w8(o,l,s.fieldTransforms)}function xJ(t,e,r,i,s,a){const o=t.ju(1,e,r),l=[kE(e,i,r)],u=[s];if(a.length%2!=0)throw new Ve(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<a.length;f+=2)l.push(kE(e,a[f])),u.push(a[f+1]);const c=[],d=dr.empty();for(let f=l.length-1;f>=0;--f)if(!T8(c,l[f])){const m=l[f];let v=u[f];v=Ln(v);const y=o.Ku(m);if(v instanceof Og)c.push(m);else{const b=jg(v,y);b!=null&&(c.push(m),d.set(m,b))}}const h=new Ir(c);return new w8(d,h,o.fieldTransforms)}function jg(t,e){if(S8(t=Ln(t)))return oT("Unsupported field value:",e,t),E8(t,e);if(t instanceof Dg)return function(i,s){if(!b8(s.Lu))throw s.Wu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,s){const a=[];let o=0;for(const l of i){let u=jg(l,s.Uu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(i,s){if((i=Ln(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return dX(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=on.fromDate(i);return{timestampValue:pm(s.serializer,a)}}if(i instanceof on){const a=new on(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:pm(s.serializer,a)}}if(i instanceof Mg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Mo)return{bytesValue:L5(s.serializer,i._byteString)};if(i instanceof tr){const a=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(a))throw s.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:HS(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Lg)return function(o,l){return{mapValue:{fields:{[c5]:{stringValue:d5},[um]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Wu("VectorValues must only contain numeric values.");return BS(l.serializer,c)})}}}}}}(i,s);throw s.Wu(`Unsupported field value: ${sT(i)}`)}(t,e)}function E8(t,e){const r={};return i5(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Wa(t,(i,s)=>{const a=jg(s,e.qu(i));a!=null&&(r[i]=a)}),{mapValue:{fields:r}}}function S8(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof on||t instanceof Mg||t instanceof Mo||t instanceof tr||t instanceof Dg||t instanceof Lg)}function oT(t,e,r){if(!S8(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const i=sT(r);throw i==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+i)}}function kE(t,e,r){if((e=Ln(e))instanceof _h)return e._internalPath;if(typeof e=="string")return lT(t,e);throw ym("Field path arguments must be of type string or ",t,!1,void 0,r)}const EJ=new RegExp("[~\\*/\\[\\]]");function lT(t,e,r){if(e.search(EJ)>=0)throw ym(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new _h(...e.split("."))._internalPath}catch{throw ym(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function ym(t,e,r,i,s){const a=i&&!i.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${i}`),o&&(u+=` in document ${s}`),u+=")"),new Ve(fe.INVALID_ARGUMENT,l+t+u)}function T8(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I8{constructor(e,r,i,s,a){this._firestore=e,this._userDataWriter=r,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new tr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SJ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(C8("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class SJ extends I8{data(){return super.data()}}function C8(t,e){return typeof e=="string"?lT(t,e):e instanceof _h?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TJ(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ve(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class k8{convertValue(e,r="none"){switch(Oa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(La(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw He()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const i={};return Wa(e,(s,a)=>{i[s]=this.convertValue(a,r)}),i}convertVectorValue(e){var r,i,s;const a=(s=(i=(r=e.fields)===null||r===void 0?void 0:r[um].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(o=>Qt(o.doubleValue));return new Lg(a)}convertGeoPoint(e){return new Mg(Qt(e.latitude),Qt(e.longitude))}convertArray(e,r){return(e.values||[]).map(i=>this.convertValue(i,r))}convertServerTimestamp(e,r){switch(r){case"previous":const i=bg(e);return i==null?null:this.convertValue(i,r);case"estimate":return this.convertTimestamp(Md(e));default:return null}}convertTimestamp(e){const r=Ma(e);return new on(r.seconds,r.nanos)}convertDocumentKey(e,r){const i=Ft.fromString(e);gt(U5(i));const s=new uu(i.get(1),i.get(3)),a=new $e(i.popFirst(5));return s.isEqual(r)||Ss(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IJ(t,e,r){let i;return i=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uT extends I8{constructor(e,r,i,s,a,o){super(e,r,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new ld(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const i=this._document.data.field(C8("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}}}class ld extends uT{data(e={}){return super.data(e)}}class N8{constructor(e,r,i,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new Ol(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(i=>{e.call(r,new ld(this._firestore,this._userDataWriter,i.key,i,new Ol(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ve(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new ld(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ol(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const u=new ld(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ol(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:CJ(l.type),doc:u,oldIndex:c,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function CJ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(t){t=qi(t,tr);const e=qi(t.firestore,Fu);return pJ(Pg(e),t._key).then(r=>NJ(e,t,r))}class A8 extends k8{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mo(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new tr(this.firestore,null,r)}}function sn(t){t=qi(t,yh);const e=qi(t.firestore,Fu),r=Pg(e),i=new A8(e);return TJ(t._query),mJ(r,t._query).then(s=>new N8(e,i,t,s))}function kJ(t,e,r){t=qi(t,tr);const i=qi(t.firestore,Fu),s=IJ(t.converter,e,r);return cT(i,[wJ(x8(i),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Vi.none())])}function _m(t,e,r,...i){t=qi(t,tr);const s=qi(t.firestore,Fu),a=x8(s);let o;return o=typeof(e=Ln(e))=="string"||e instanceof _h?xJ(a,"updateDoc",t._key,e,r,i):bJ(a,"updateDoc",t._key,e),cT(s,[o.toMutation(t._key,Vi.exists(!0))])}function cT(t,e){return function(i,s){const a=new ms;return i.asyncQueue.enqueueAndForget(async()=>nJ(await fJ(i),s,a)),a.promise}(Pg(t),e)}function NJ(t,e,r){const i=r.docs.get(e._key),s=new A8(t);return new uT(t,s,e._key,i,new Ol(r.hasPendingWrites,r.fromCache),e.converter)}(function(e,r=!0){(function(s){Lu=s})(Pu),au(new No("firestore",(i,{instanceIdentifier:s,options:a})=>{const o=i.getProvider("app").getImmediate(),l=new Fu(new TY(i.getProvider("auth-internal")),new kY(o,i.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ve(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uu(c.options.projectId,d)}(o,s),o);return a=Object.assign({useFetchStreams:r},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),xa(sN,aN,e),xa(sN,aN,"esm2017")})();const AJ=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:k8,Bytes:Mo,CollectionReference:gs,DocumentReference:tr,DocumentSnapshot:uT,FieldPath:_h,FieldValue:Dg,Firestore:Fu,FirestoreError:Ve,GeoPoint:Mg,Query:yh,QueryDocumentSnapshot:ld,QuerySnapshot:N8,SnapshotMetadata:Ol,Timestamp:on,VectorValue:Lg,_AutoId:LS,_ByteString:Sn,_DatabaseId:uu,_DocumentKey:$e,_EmptyAuthCredentialsProvider:n5,_FieldPath:bn,_cast:qi,_logWarn:Po,_validateIsNotUsedTogether:g8,collection:rn,connectFirestoreEmulator:y8,doc:Is,ensureFirestoreConfigured:Pg,executeWrite:cT,getDoc:pu,getDocs:sn,getFirestore:_8,setDoc:kJ,updateDoc:_m},Symbol.toStringTag,{value:"Module"})),RJ={apiKey:"AIzaSyDGolxlZNoEzk7z46ZMtSk9YsP32MlH45Q",authDomain:"llm-hyper-audio.firebaseapp.com",projectId:"llm-hyper-audio",storageBucket:"llm-hyper-audio.firebasestorage.app",messagingSenderId:"530304773274",appId:"1:530304773274:web:1764f58974d6c2fd060323",measurementId:"G-HFEKE65YC6"},R8=dj(RJ),It=_8(R8),Ly=wY(R8),P8=S.createContext();function wh(){const t=S.useContext(P8);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function PJ({children:t}){const[e,r]=S.useState(null),[i,s]=S.useState(!0),[a,o]=S.useState(null);S.useEffect(()=>{console.log("Setting up auth listener");const d=lK(Ly,h=>{console.log("Auth state changed:",h?h.email:"No user"),r(h),s(!1)},h=>{console.error("Auth state change error:",h),o(h.message),s(!1)});return()=>d()},[]);const c={user:e,loading:i,error:a,login:async(d,h)=>{try{o(null),console.log("Attempting login with:",d);const f=await sK(Ly,d,h);return r(f.user),f.user}catch(f){throw console.error("Login error:",f),o(f.message),f}},logout:async()=>{try{o(null),console.log("Logging out user"),await uK(Ly),r(null)}catch(d){throw console.error("Logout error:",d),o(d.message),d}},isAuthenticated:!!e};return p.jsx(P8.Provider,{value:c,children:t})}/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DJ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),D8=(...t)=>t.filter((e,r,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var MJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LJ=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:s="",children:a,iconNode:o,...l},u)=>S.createElement("svg",{ref:u,...MJ,width:e,height:e,stroke:t,strokeWidth:i?Number(r)*24/Number(e):r,className:D8("lucide",s),...l},[...o.map(([c,d])=>S.createElement(c,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pn=(t,e)=>{const r=S.forwardRef(({className:i,...s},a)=>S.createElement(LJ,{ref:a,iconNode:e,className:D8(`lucide-${DJ(t)}`,i),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OJ=[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]],jJ=pn("Braces",OJ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VJ=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],FJ=pn("ChartNoAxesColumnIncreasing",VJ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $J=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],UJ=pn("ChevronDown",$J);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BJ=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],zJ=pn("ChevronUp",BJ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],M8=pn("Clock",qJ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HJ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],L8=pn("FileText",HJ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],GJ=pn("House",WJ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KJ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],YJ=pn("Info",KJ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XJ=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],QJ=pn("List",XJ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JJ=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],ZJ=pn("LogOut",JJ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eZ=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],tZ=pn("Map",eZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nZ=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],rZ=pn("Menu",nZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iZ=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],sZ=pn("Mic",iZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aZ=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],dT=pn("Search",aZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oZ=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],lZ=pn("SquarePen",oZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uZ=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],O8=pn("Tag",uZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cZ=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],dZ=pn("Video",cZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hZ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fZ=pn("X",hZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pZ=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],mZ=pn("Zap",pZ);function gZ(){const{user:t,logout:e}=wh(),r=ti(),[i,s]=S.useState(!1),a=()=>{s(!i)},o=[{path:"/",label:"Home",icon:p.jsx(GJ,{size:20})},{path:"/content-directory",label:"Directory",icon:p.jsx(QJ,{size:20})},{path:"/transcript-summary",label:"Summarizer",icon:p.jsx(L8,{size:20})}],l=u=>r.pathname===u;return p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"fixed top-4 left-4 w-12 h-12 rounded-lg bg-white border-none shadow-sm cursor-pointer flex justify-center items-center text-gray-600 z-[51] transition-colors duration-200 ease-in-out",onClick:a,children:p.jsx(rZ,{size:24})}),p.jsx("div",{className:`fixed inset-0 z-[49] transition-opacity duration-300 ease-in-out ${i?"pointer-events-auto":"pointer-events-none"}`,onClick:a}),p.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-white border-r border-gray-200 shadow-lg transition-transform duration-300 ease-in-out z-50 flex flex-col p-4 ${i?"translate-x-0":"-translate-x-full"}`,children:[p.jsx("button",{className:"absolute top-4 right-4 p-2 rounded-md bg-gray-100 border-none cursor-pointer flex justify-center items-center text-gray-600",onClick:a,children:p.jsx(fZ,{size:20})}),p.jsxs("div",{className:"flex-1 overflow-auto mt-10",children:[p.jsxs("div",{children:[o.map(u=>p.jsxs(nd,{to:u.path,className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l(u.path)?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[p.jsx("span",{className:"flex mr-3 text-inherit",children:u.icon}),p.jsx("span",{children:u.label})]},u.path)),p.jsxs(nd,{to:"/search",className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l("/search")?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[p.jsx("span",{className:"flex mr-3 text-inherit",children:p.jsx(dT,{size:20})}),p.jsx("span",{children:"Search"})]}),p.jsxs(nd,{to:"/semantic-search",className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l("/semantic-search")?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[p.jsx("span",{className:"flex mr-3 text-inherit",children:p.jsx(jJ,{size:20})}),p.jsx("span",{children:"Semantic Search"})]})]}),p.jsx("div",{className:"h-px bg-gray-200 my-4"}),p.jsx("div",{children:t&&p.jsxs("button",{onClick:()=>{e(),s(!1)},className:"flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out text-gray-500 font-normal w-full text-left border-none bg-transparent",children:[p.jsx("span",{className:"flex mr-3 text-inherit",children:p.jsx(ZJ,{size:20})}),p.jsx("span",{children:"Logout"})]})})]})]})]})}function Ii({children:t}){const{loading:e}=wh();return e?p.jsx("div",{className:"min-h-screen flex items-center justify-center",children:p.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):p.jsxs("div",{className:"flex flex-row h-screen w-full overflow-hidden bg-white",children:[p.jsx("div",{className:"flex-none w-16",children:p.jsx(gZ,{})}),p.jsx("div",{className:"flex-grow overflow-y-auto",children:p.jsx("main",{className:"py-6 px-6 w-full",children:t})})]})}function Ci({children:t}){const{user:e,loading:r}=wh(),i=ti();return r?p.jsx("div",{className:"flex justify-center items-center min-h-screen",children:p.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):e?t:p.jsx(JO,{to:"/login",state:{from:i},replace:!0})}var j8={exports:{}},vZ="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",yZ=vZ,_Z=yZ;function V8(){}function F8(){}F8.resetWarningCache=V8;var wZ=function(){function t(i,s,a,o,l,u){if(u!==_Z){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:F8,resetWarningCache:V8};return r.PropTypes=r,r};j8.exports=wZ();var bZ=j8.exports;const Et=Ua(bZ);var $8={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var a="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(a=s(a,i(l)))}return a}function i(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return r.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var o="";for(var l in a)e.call(a,l)&&a[l]&&(o=s(o,l));return o}function s(a,o){return o?a?a+" "+o:a+o:a}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})($8);var xZ=$8.exports;const U8=Ua(xZ);var EZ=["top","left","transform","className","children","innerRef"];function NE(){return NE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},NE.apply(this,arguments)}function SZ(t,e){if(t==null)return{};var r={},i=Object.keys(t),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function mu(t){var e=t.top,r=e===void 0?0:e,i=t.left,s=i===void 0?0:i,a=t.transform,o=t.className,l=t.children,u=t.innerRef,c=SZ(t,EZ);return te.createElement("g",NE({ref:u,className:U8("visx-group",o),transform:a||"translate("+s+", "+r+")"},c),l)}mu.propTypes={top:Et.number,left:Et.number,transform:Et.string,className:Et.string,children:Et.node,innerRef:Et.oneOfType([Et.string,Et.func,Et.object])};var TZ=Array.prototype.slice;function IZ(t){for(var e=t.length,r,i;e;)i=Math.random()*e--|0,r=t[e],t[e]=t[i],t[i]=r;return t}function CZ(t){for(var e=0,r=(t=IZ(TZ.call(t))).length,i=[],s,a;e<r;)s=t[e],a&&B8(a,s)?++e:(a=NZ(i=kZ(i,s)),e=0);return a}function kZ(t,e){var r,i;if(Oy(e,t))return[e];for(r=0;r<t.length;++r)if(Af(e,t[r])&&Oy(Oc(t[r],e),t))return[t[r],e];for(r=0;r<t.length-1;++r)for(i=r+1;i<t.length;++i)if(Af(Oc(t[r],t[i]),e)&&Af(Oc(t[r],e),t[i])&&Af(Oc(t[i],e),t[r])&&Oy(z8(t[r],t[i],e),t))return[t[r],t[i],e];throw new Error}function Af(t,e){var r=t.r-e.r,i=e.x-t.x,s=e.y-t.y;return r<0||r*r<i*i+s*s}function B8(t,e){var r=t.r-e.r+1e-6,i=e.x-t.x,s=e.y-t.y;return r>0&&r*r>i*i+s*s}function Oy(t,e){for(var r=0;r<e.length;++r)if(!B8(t,e[r]))return!1;return!0}function NZ(t){switch(t.length){case 1:return AZ(t[0]);case 2:return Oc(t[0],t[1]);case 3:return z8(t[0],t[1],t[2])}}function AZ(t){return{x:t.x,y:t.y,r:t.r}}function Oc(t,e){var r=t.x,i=t.y,s=t.r,a=e.x,o=e.y,l=e.r,u=a-r,c=o-i,d=l-s,h=Math.sqrt(u*u+c*c);return{x:(r+a+u/h*d)/2,y:(i+o+c/h*d)/2,r:(h+s+l)/2}}function z8(t,e,r){var i=t.x,s=t.y,a=t.r,o=e.x,l=e.y,u=e.r,c=r.x,d=r.y,h=r.r,f=i-o,m=i-c,v=s-l,y=s-d,b=u-a,_=h-a,w=i*i+s*s-a*a,E=w-o*o-l*l+u*u,N=w-c*c-d*d+h*h,M=m*v-f*y,O=(v*N-y*E)/(M*2)-i,A=(y*b-v*_)/M,D=(m*E-f*N)/(M*2)-s,T=(f*_-m*b)/M,I=A*A+T*T-1,x=2*(a+O*A+D*T),R=O*O+D*D-a*a,P=-(I?(x+Math.sqrt(x*x-4*I*R))/(2*I):R/x);return{x:i+O+A*P,y:s+D+T*P,r:P}}function ZN(t,e,r){var i=t.x-e.x,s,a,o=t.y-e.y,l,u,c=i*i+o*o;c?(a=e.r+r.r,a*=a,u=t.r+r.r,u*=u,a>u?(s=(c+u-a)/(2*c),l=Math.sqrt(Math.max(0,u/c-s*s)),r.x=t.x-s*i-l*o,r.y=t.y-s*o+l*i):(s=(c+a-u)/(2*c),l=Math.sqrt(Math.max(0,a/c-s*s)),r.x=e.x+s*i-l*o,r.y=e.y+s*o+l*i)):(r.x=e.x+r.r,r.y=e.y)}function eA(t,e){var r=t.r+e.r-1e-6,i=e.x-t.x,s=e.y-t.y;return r>0&&r*r>i*i+s*s}function tA(t){var e=t._,r=t.next._,i=e.r+r.r,s=(e.x*r.r+r.x*e.r)/i,a=(e.y*r.r+r.y*e.r)/i;return s*s+a*a}function Rf(t){this._=t,this.next=null,this.previous=null}function RZ(t){if(!(s=t.length))return 0;var e,r,i,s,a,o,l,u,c,d,h;if(e=t[0],e.x=0,e.y=0,!(s>1))return e.r;if(r=t[1],e.x=-r.r,r.x=e.r,r.y=0,!(s>2))return e.r+r.r;ZN(r,e,i=t[2]),e=new Rf(e),r=new Rf(r),i=new Rf(i),e.next=i.previous=r,r.next=e.previous=i,i.next=r.previous=e;e:for(l=3;l<s;++l){ZN(e._,r._,i=t[l]),i=new Rf(i),u=r.next,c=e.previous,d=r._.r,h=e._.r;do if(d<=h){if(eA(u._,i._)){r=u,e.next=r,r.previous=e,--l;continue e}d+=u._.r,u=u.next}else{if(eA(c._,i._)){e=c,e.next=r,r.previous=e,--l;continue e}h+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=e,i.next=r,e.next=r.previous=r=i,a=tA(e);(i=i.next)!==r;)(o=tA(i))<a&&(e=i,a=o);r=e.next}for(e=[r._],i=r;(i=i.next)!==r;)e.push(i._);for(i=CZ(e),l=0;l<s;++l)e=t[l],e.x-=i.x,e.y-=i.y;return i.r}function PZ(t){return t==null?null:DZ(t)}function DZ(t){if(typeof t!="function")throw new Error;return t}function nA(){return 0}function MZ(t){return function(){return t}}function LZ(t){return Math.sqrt(t.value)}function OZ(){var t=null,e=1,r=1,i=nA;function s(a){return a.x=e/2,a.y=r/2,t?a.eachBefore(rA(t)).eachAfter(jy(i,.5)).eachBefore(iA(1)):a.eachBefore(rA(LZ)).eachAfter(jy(nA,1)).eachAfter(jy(i,a.r/Math.min(e,r))).eachBefore(iA(Math.min(e,r)/(2*a.r))),a}return s.radius=function(a){return arguments.length?(t=PZ(a),s):t},s.size=function(a){return arguments.length?(e=+a[0],r=+a[1],s):[e,r]},s.padding=function(a){return arguments.length?(i=typeof a=="function"?a:MZ(+a),s):i},s}function rA(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function jy(t,e){return function(r){if(i=r.children){var i,s,a=i.length,o=t(r)*e||0,l;if(o)for(s=0;s<a;++s)i[s].r+=o;if(l=RZ(i),o)for(s=0;s<a;++s)i[s].r-=o;r.r=l+o}}}function iA(t){return function(e){var r=e.parent;e.r*=t,r&&(e.x=r.x+t*e.x,e.y=r.y+t*e.y)}}function q8(t){var e=t.node,r=e===void 0?{x:0,y:0,r:15}:e;return te.createElement("circle",{cx:r.x,cy:r.y,r:r.r||15,fill:"#21D4FD"})}q8.propTypes={node:Et.shape({x:Et.number.isRequired,y:Et.number.isRequired,r:Et.number})};function hT(t){var e=t.top,r=t.left,i=t.className,s=t.root,a=t.radius,o=t.size,l=t.padding,u=t.children,c=t.nodeComponent,d=c===void 0?q8:c,h=OZ();o&&h.size(o),a!==void 0&&h.radius(a),l&&h.padding(l);var f=h(s);return u?te.createElement(te.Fragment,null,u(f)):te.createElement(mu,{top:e,left:r,className:U8("visx-pack",i)},d&&f.descendants().map(function(m,v){return te.createElement(mu,{key:"pack-node-"+v},te.createElement(d,{node:m}))}))}hT.propTypes={children:Et.func,top:Et.number,left:Et.number,className:Et.string,radius:Et.func,padding:Et.number};function jZ(t){var e=0,r=t.children,i=r&&r.length;if(!i)e=1;else for(;--i>=0;)e+=r[i].value;t.value=e}function VZ(){return this.eachAfter(jZ)}function FZ(t,e){let r=-1;for(const i of this)t.call(e,i,++r,this);return this}function $Z(t,e){for(var r=this,i=[r],s,a,o=-1;r=i.pop();)if(t.call(e,r,++o,this),s=r.children)for(a=s.length-1;a>=0;--a)i.push(s[a]);return this}function UZ(t,e){for(var r=this,i=[r],s=[],a,o,l,u=-1;r=i.pop();)if(s.push(r),a=r.children)for(o=0,l=a.length;o<l;++o)i.push(a[o]);for(;r=s.pop();)t.call(e,r,++u,this);return this}function BZ(t,e){let r=-1;for(const i of this)if(t.call(e,i,++r,this))return i}function zZ(t){return this.eachAfter(function(e){for(var r=+t(e.data)||0,i=e.children,s=i&&i.length;--s>=0;)r+=i[s].value;e.value=r})}function qZ(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function HZ(t){for(var e=this,r=WZ(e,t),i=[e];e!==r;)e=e.parent,i.push(e);for(var s=i.length;t!==r;)i.splice(s,0,t),t=t.parent;return i}function WZ(t,e){if(t===e)return t;var r=t.ancestors(),i=e.ancestors(),s=null;for(t=r.pop(),e=i.pop();t===e;)s=t,t=r.pop(),e=i.pop();return s}function GZ(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function KZ(){return Array.from(this)}function YZ(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function XZ(){var t=this,e=[];return t.each(function(r){r!==t&&e.push({source:r.parent,target:r})}),e}function*QZ(){var t=this,e,r=[t],i,s,a;do for(e=r.reverse(),r=[];t=e.pop();)if(yield t,i=t.children)for(s=0,a=i.length;s<a;++s)r.push(i[s]);while(r.length)}function Vg(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=eee)):e===void 0&&(e=ZZ);for(var r=new Vd(t),i,s=[r],a,o,l,u;i=s.pop();)if((o=e(i.data))&&(u=(o=Array.from(o)).length))for(i.children=o,l=u-1;l>=0;--l)s.push(a=o[l]=new Vd(o[l])),a.parent=i,a.depth=i.depth+1;return r.eachBefore(H8)}function JZ(){return Vg(this).eachBefore(tee)}function ZZ(t){return t.children}function eee(t){return Array.isArray(t)?t[1]:null}function tee(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function H8(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Vd(t){this.data=t,this.depth=this.height=0,this.parent=null}Vd.prototype=Vg.prototype={constructor:Vd,count:VZ,each:FZ,eachAfter:UZ,eachBefore:$Z,find:BZ,sum:zZ,sort:qZ,path:HZ,ancestors:GZ,descendants:KZ,leaves:YZ,links:XZ,copy:JZ,[Symbol.iterator]:QZ};function Vy(t){return t==null?null:nee(t)}function nee(t){if(typeof t!="function")throw new Error;return t}var ree={depth:-1},sA={},Fy={};function iee(t){return t.id}function see(t){return t.parentId}function aee(){var t=iee,e=see,r;function i(s){var a=Array.from(s),o=t,l=e,u,c,d,h,f,m,v,y,b=new Map;if(r!=null){const _=a.map((N,M)=>oee(r(N,M,s))),w=_.map(aA),E=new Set(_).add("");for(const N of w)E.has(N)||(E.add(N),_.push(N),w.push(aA(N)),a.push(Fy));o=(N,M)=>_[M],l=(N,M)=>w[M]}for(d=0,u=a.length;d<u;++d)c=a[d],m=a[d]=new Vd(c),(v=o(c,d,s))!=null&&(v+="")&&(y=m.id=v,b.set(y,b.has(y)?sA:m)),(v=l(c,d,s))!=null&&(v+="")&&(m.parent=v);for(d=0;d<u;++d)if(m=a[d],v=m.parent){if(f=b.get(v),!f)throw new Error("missing: "+v);if(f===sA)throw new Error("ambiguous: "+v);f.children?f.children.push(m):f.children=[m],m.parent=f}else{if(h)throw new Error("multiple roots");h=m}if(!h)throw new Error("no root");if(r!=null){for(;h.data===Fy&&h.children.length===1;)h=h.children[0],--u;for(let _=a.length-1;_>=0&&(m=a[_],m.data===Fy);--_)m.data=null}if(h.parent=ree,h.eachBefore(function(_){_.depth=_.parent.depth+1,--u}).eachBefore(H8),h.parent=null,u>0)throw new Error("cycle");return h}return i.id=function(s){return arguments.length?(t=Vy(s),i):t},i.parentId=function(s){return arguments.length?(e=Vy(s),i):e},i.path=function(s){return arguments.length?(r=Vy(s),i):r},i}function oee(t){t=`${t}`;let e=t.length;return AE(t,e-1)&&!AE(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function aA(t){let e=t.length;if(e<2)return"";for(;--e>1&&!AE(t,e););return t.slice(0,e)}function AE(t,e){if(t[e]==="/"){let r=0;for(;e>0&&t[--e]==="\\";)++r;if(!(r&1))return!0}return!1}var oA=function(){function t(r){var i=r.x,s=i===void 0?0:i,a=r.y,o=a===void 0?0:a;this.x=0,this.y=0,this.x=s,this.y=o}var e=t.prototype;return e.value=function(){return{x:this.x,y:this.y}},e.toArray=function(){return[this.x,this.y]},t}();function lee(t){return!!t&&t instanceof Element}function uee(t){return!!t&&(t instanceof SVGElement||"ownerSVGElement"in t)}function cee(t){return!!t&&"createSVGPoint"in t}function dee(t){return!!t&&"getScreenCTM"in t}function hee(t){return!!t&&"changedTouches"in t}function fee(t){return!!t&&"clientX"in t}function pee(t){return!!t&&(t instanceof Event||"nativeEvent"in t&&t.nativeEvent instanceof Event)}function ud(){return ud=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ud.apply(this,arguments)}var $y={x:0,y:0};function mee(t){if(!t)return ud({},$y);if(hee(t))return t.changedTouches.length>0?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:ud({},$y);if(fee(t))return{x:t.clientX,y:t.clientY};var e=t==null?void 0:t.target,r=e&&"getBoundingClientRect"in e?e.getBoundingClientRect():null;return r?{x:r.x+r.width/2,y:r.y+r.height/2}:ud({},$y)}function lA(t,e){if(!t||!e)return null;var r=mee(e),i=uee(t)?t.ownerSVGElement:t,s=dee(i)?i.getScreenCTM():null;if(cee(i)&&s){var a=i.createSVGPoint();return a.x=r.x,a.y=r.y,a=a.matrixTransform(s.inverse()),new oA({x:a.x,y:a.y})}var o=t.getBoundingClientRect();return new oA({x:r.x-o.left-t.clientLeft,y:r.y-o.top-t.clientTop})}function Uy(t,e){if(lee(t)&&e)return lA(t,e);if(pee(t)){var r=t,i=r.target;if(i)return lA(i,r)}return null}function gee(t,e,r){return Math.max(e,Math.min(t,r))}const Lt={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function uA(t,e,r){return e===0||Math.abs(e)===1/0?Math.pow(t,r*5):t*e*r/(e+r*t)}function cA(t,e,r,i=.15){return i===0?gee(t,e,r):t<e?-uA(e-t,r-e,i)+e:t>r?+uA(t-r,r-e,i)+r:t}function vee(t,[e,r],[i,s]){const[[a,o],[l,u]]=t;return[cA(e,a,o,i),cA(r,l,u,s)]}function yee(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function _ee(t){var e=yee(t,"string");return typeof e=="symbol"?e:String(e)}function nn(t,e,r){return e=_ee(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function zt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dA(Object(r),!0).forEach(function(i){nn(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dA(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}const W8={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function hA(t){return t?t[0].toUpperCase()+t.slice(1):""}const wee=["enter","leave"];function bee(t=!1,e){return t&&!wee.includes(e)}function xee(t,e="",r=!1){const i=W8[t],s=i&&i[e]||e;return"on"+hA(t)+hA(s)+(bee(r,s)?"Capture":"")}const Eee=["gotpointercapture","lostpointercapture"];function See(t){let e=t.substring(2).toLowerCase();const r=!!~e.indexOf("passive");r&&(e=e.replace("passive",""));const i=Eee.includes(e)?"capturecapture":"capture",s=!!~e.indexOf(i);return s&&(e=e.replace("capture","")),{device:e,capture:s,passive:r}}function Tee(t,e=""){const r=W8[t],i=r&&r[e]||e;return t+i}function Fg(t){return"touches"in t}function G8(t){return Fg(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function Iee(t){return Array.from(t.touches).filter(e=>{var r,i;return e.target===t.currentTarget||((r=t.currentTarget)===null||r===void 0||(i=r.contains)===null||i===void 0?void 0:i.call(r,e.target))})}function Cee(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function K8(t){return Fg(t)?Cee(t)[0]:t}function RE(t,e){try{const r=e.clientX-t.clientX,i=e.clientY-t.clientY,s=(e.clientX+t.clientX)/2,a=(e.clientY+t.clientY)/2,o=Math.hypot(r,i);return{angle:-(Math.atan2(r,i)*180)/Math.PI,distance:o,origin:[s,a]}}catch{}return null}function kee(t){return Iee(t).map(e=>e.identifier)}function fA(t,e){const[r,i]=Array.from(t.touches).filter(s=>e.includes(s.identifier));return RE(r,i)}function By(t){const e=K8(t);return Fg(t)?e.identifier:e.pointerId}function gu(t){const e=K8(t);return[e.clientX,e.clientY]}const pA=40,mA=800;function Y8(t){let{deltaX:e,deltaY:r,deltaMode:i}=t;return i===1?(e*=pA,r*=pA):i===2&&(e*=mA,r*=mA),[e,r]}function Nee(t){var e,r;const{scrollX:i,scrollY:s,scrollLeft:a,scrollTop:o}=t.currentTarget;return[(e=i??a)!==null&&e!==void 0?e:0,(r=s??o)!==null&&r!==void 0?r:0]}function Aee(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:r,altKey:i,metaKey:s,ctrlKey:a}=t;Object.assign(e,{shiftKey:r,altKey:i,metaKey:s,ctrlKey:a})}return e}function wm(t,...e){return typeof t=="function"?t(...e):t}function Ree(){}function Pee(...t){return t.length===0?Ree:t.length===1?t[0]:function(){let e;for(const r of t)e=r.apply(this,arguments)||e;return e}}function gA(t,e){return Object.assign({},e,t||{})}const Dee=32;class X8{constructor(e,r,i){this.ctrl=e,this.args=r,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:r,ingKey:i,args:s}=this;r[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=s,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const r=this.state,i=this.config;r._active||(this.reset(),this.computeInitial(),r._active=!0,r.target=e.target,r.currentTarget=e.currentTarget,r.lastOffset=i.from?wm(i.from,r):r.offset,r.offset=r.lastOffset,r.startTime=r.timeStamp=e.timeStamp)}computeValues(e){const r=this.state;r._values=e,r.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:r,config:i,shared:s}=this;r.args=this.args;let a=0;if(e&&(r.event=e,i.preventDefault&&e.cancelable&&r.event.preventDefault(),r.type=e.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,Aee(e)),s.down=s.pressed=s.buttons%2===1||s.touches>0,a=e.timeStamp-r.timeStamp,r.timeStamp=e.timeStamp,r.elapsedTime=r.timeStamp-r.startTime),r._active){const O=r._delta.map(Math.abs);Lt.addTo(r._distance,O)}this.axisIntent&&this.axisIntent(e);const[o,l]=r._movement,[u,c]=i.threshold,{_step:d,values:h}=r;if(i.hasCustomTransform?(d[0]===!1&&(d[0]=Math.abs(o)>=u&&h[0]),d[1]===!1&&(d[1]=Math.abs(l)>=c&&h[1])):(d[0]===!1&&(d[0]=Math.abs(o)>=u&&Math.sign(o)*u),d[1]===!1&&(d[1]=Math.abs(l)>=c&&Math.sign(l)*c)),r.intentional=d[0]!==!1||d[1]!==!1,!r.intentional)return;const f=[0,0];if(i.hasCustomTransform){const[O,A]=h;f[0]=d[0]!==!1?O-d[0]:0,f[1]=d[1]!==!1?A-d[1]:0}else f[0]=d[0]!==!1?o-d[0]:0,f[1]=d[1]!==!1?l-d[1]:0;this.restrictToAxis&&!r._blocked&&this.restrictToAxis(f);const m=r.offset,v=r._active&&!r._blocked||r.active;v&&(r.first=r._active&&!r.active,r.last=!r._active&&r.active,r.active=s[this.ingKey]=r._active,e&&(r.first&&("bounds"in i&&(r._bounds=wm(i.bounds,r)),this.setup&&this.setup()),r.movement=f,this.computeOffset()));const[y,b]=r.offset,[[_,w],[E,N]]=r._bounds;r.overflow=[y<_?-1:y>w?1:0,b<E?-1:b>N?1:0],r._movementBound[0]=r.overflow[0]?r._movementBound[0]===!1?r._movement[0]:r._movementBound[0]:!1,r._movementBound[1]=r.overflow[1]?r._movementBound[1]===!1?r._movement[1]:r._movementBound[1]:!1;const M=r._active?i.rubberband||[0,0]:[0,0];if(r.offset=vee(r._bounds,r.offset,M),r.delta=Lt.sub(r.offset,m),this.computeMovement(),v&&(!r.last||a>Dee)){r.delta=Lt.sub(r.offset,m);const O=r.delta.map(Math.abs);Lt.addTo(r.distance,O),r.direction=r.delta.map(Math.sign),r._direction=r._delta.map(Math.sign),!r.first&&a>0&&(r.velocity=[O[0]/a,O[1]/a],r.timeDelta=a)}}emit(){const e=this.state,r=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const s=this.handler(zt(zt(zt({},r),e),{},{[this.aliasKey]:e.values}));s!==void 0&&(e.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Mee([t,e],r){const i=Math.abs(t),s=Math.abs(e);if(i>s&&i>r)return"x";if(s>i&&s>r)return"y"}class bh extends X8{constructor(...e){super(...e),nn(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Lt.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Lt.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const r=this.state,i=this.config;if(!r.axis&&e){const s=typeof i.axisThreshold=="object"?i.axisThreshold[G8(e)]:i.axisThreshold;r.axis=Mee(r._movement,s)}r._blocked=(i.lockDirection||!!i.axis)&&!r.axis||!!i.axis&&i.axis!==r.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const Lee=t=>t,vA=.15,Q8={enabled(t=!0){return t},eventOptions(t,e,r){return zt(zt({},r.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[vA,vA];case!1:return[0,0];default:return Lt.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return Lt.toVector(t)},transform(t,e,r){const i=t||r.shared.transform;return this.hasCustomTransform=!!i,i||Lee},threshold(t){return Lt.toVector(t,0)}},Oee=0,Wo=zt(zt({},Q8),{},{axis(t,e,{axis:r}){if(this.lockDirection=r==="lock",!this.lockDirection)return r},axisThreshold(t=Oee){return t},bounds(t={}){if(typeof t=="function")return a=>Wo.bounds(t(a));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:r=1/0,top:i=-1/0,bottom:s=1/0}=t;return[[e,r],[i,s]]}}),yA={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class jee extends bh{constructor(...e){super(...e),nn(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const r=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),s={left:r.left-i.left+e.offset[0],right:r.right-i.right+e.offset[0],top:r.top-i.top+e.offset[1],bottom:r.bottom-i.bottom+e.offset[1]};e._bounds=Wo.bounds(s)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const r=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(r.pointerButtons)?!r.pointerButtons.includes(e.buttons):r.pointerButtons!==-1&&r.pointerButtons!==e.buttons))return;const s=this.ctrl.setEventIds(e);r.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(s&&s.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=By(e),i._pointerActive=!0,this.computeValues(gu(e)),this.computeInitial(),r.preventScrollAxis&&G8(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):r.delay>0?(this.setupDelayTrigger(e),r.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const r=this.state;r._active=!0,r._preventScroll=!0,r._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const r=this.state,i=this.config;if(!r._pointerActive)return;const s=By(e);if(r._pointerId!==void 0&&s!==r._pointerId)return;const a=gu(e);if(document.pointerLockElement===e.target?r._delta=[e.movementX,e.movementY]:(r._delta=Lt.sub(a,r._values),this.computeValues(a)),Lt.addTo(r._movement,r._delta),this.compute(e),r._delayed&&r.intentional){this.timeoutStore.remove("dragDelay"),r.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!r._preventScroll)if(r.axis)if(r.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){r._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const r=this.state,i=this.config;if(!r._active||!r._pointerActive)return;const s=By(e);if(r._pointerId!==void 0&&s!==r._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[a,o]=r._distance;if(r.tap=a<=i.tapsThreshold&&o<=i.tapsThreshold,r.tap&&i.filterTaps)r._force=!0;else{const[l,u]=r._delta,[c,d]=r._movement,[h,f]=i.swipe.velocity,[m,v]=i.swipe.distance,y=i.swipe.duration;if(r.elapsedTime<y){const b=Math.abs(l/r.timeDelta),_=Math.abs(u/r.timeDelta);b>h&&Math.abs(c)>m&&(r.swipe[0]=Math.sign(l)),_>f&&Math.abs(d)>v&&(r.swipe[1]=Math.sign(u))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const r=this.config,i=r.device;r.pointerLock&&e.currentTarget.requestPointerLock(),r.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,Vee(e);const r=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",r),this.eventStore.add(this.sharedConfig.window,"touch","cancel",r),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const r=yA[e.key];if(r){const i=this.state,s=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=r(this.config.keyboardDisplacement,s),i._keyboardActive=!0,Lt.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in yA&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const r=this.config.device;e(r,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(r,"change",this.pointerMove.bind(this)),e(r,"end",this.pointerUp.bind(this)),e(r,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function Vee(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const xh=typeof window<"u"&&window.document&&window.document.createElement;function J8(){return xh&&"ontouchstart"in window}function Fee(){return J8()||xh&&window.navigator.maxTouchPoints>1}function $ee(){return xh&&"onpointerdown"in window}function Uee(){return xh&&"exitPointerLock"in window.document}function Bee(){try{return"constructor"in GestureEvent}catch{return!1}}const zr={isBrowser:xh,gesture:Bee(),touch:J8(),touchscreen:Fee(),pointer:$ee(),pointerLock:Uee()},zee=250,qee=180,Hee=.5,Wee=50,Gee=250,Kee=10,_A={mouse:0,touch:0,pen:8},Yee=zt(zt({},Wo),{},{device(t,e,{pointer:{touch:r=!1,lock:i=!1,mouse:s=!1}={}}){return this.pointerLock=i&&zr.pointerLock,zr.touch&&r?"touch":this.pointerLock?"mouse":zr.pointer&&!s?"pointer":zr.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:r}){if(this.preventScrollDelay=typeof r=="number"?r:r||r===void 0&&t?zee:void 0,!(!zr.touchscreen||r===!1))return t||(r!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:r=!0,buttons:i=1,keys:s=!0}={}}){return this.pointerButtons=i,this.keys=s,!this.pointerLock&&this.device==="pointer"&&r},threshold(t,e,{filterTaps:r=!1,tapsThreshold:i=3,axis:s=void 0}){const a=Lt.toVector(t,r?i:s?1:0);return this.filterTaps=r,this.tapsThreshold=i,a},swipe({velocity:t=Hee,distance:e=Wee,duration:r=Gee}={}){return{velocity:this.transform(Lt.toVector(t)),distance:this.transform(Lt.toVector(e)),duration:r}},delay(t=0){switch(t){case!0:return qee;case!1:return 0;default:return t}},axisThreshold(t){return t?zt(zt({},_A),t):_A},keyboardDisplacement(t=Kee){return t}});function Z8(t){const[e,r]=t.overflow,[i,s]=t._delta,[a,o]=t._direction;(e<0&&i>0&&a<0||e>0&&i<0&&a>0)&&(t._movement[0]=t._movementBound[0]),(r<0&&s>0&&o<0||r>0&&s<0&&o>0)&&(t._movement[1]=t._movementBound[1])}const Xee=30,Qee=100;class Jee extends X8{constructor(...e){super(...e),nn(this,"ingKey","pinching"),nn(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:r,lastOffset:i}=this.state;e==="wheel"?this.state.offset=Lt.add(r,i):this.state.offset=[(1+r[0])*i[0],r[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:r}=this.state;this.state.movement=[e[0]/r[0],e[1]-r[1]]}axisIntent(){const e=this.state,[r,i]=e._movement;if(!e.axis){const s=Math.abs(r)*Xee-Math.abs(i);s<0?e.axis="angle":s>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const r=this.state,i=this.ctrl.touchIds;if(r._active&&r._touchIds.every(a=>i.has(a))||i.size<2)return;this.start(e),r._touchIds=Array.from(i).slice(0,2);const s=fA(e,r._touchIds);s&&this.pinchStart(e,s)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const r=this.state,i=r._pointerEvents,s=this.ctrl.pointerIds;if(r._active&&Array.from(i.keys()).every(o=>s.has(o))||(i.size<2&&i.set(e.pointerId,e),r._pointerEvents.size<2))return;this.start(e);const a=RE(...Array.from(i.values()));a&&this.pinchStart(e,a)}pinchStart(e,r){const i=this.state;i.origin=r.origin,this.computeValues([r.distance,r.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const r=fA(e,this.state._touchIds);r&&this.pinchMove(e,r)}pointerMove(e){const r=this.state._pointerEvents;if(r.has(e.pointerId)&&r.set(e.pointerId,e),!this.state._active)return;const i=RE(...Array.from(r.values()));i&&this.pinchMove(e,i)}pinchMove(e,r){const i=this.state,s=i._values[1],a=r.angle-s;let o=0;Math.abs(a)>270&&(o+=Math.sign(a)),this.computeValues([r.distance,r.angle-360*o]),i.origin=r.origin,i.turns=o,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(r=>!this.ctrl.touchIds.has(r))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const r=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}r._pointerEvents.has(e.pointerId)&&r._pointerEvents.delete(e.pointerId),r._active&&r._pointerEvents.size<2&&(r._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const r=this.state;r._active||(this.start(e),this.computeValues([e.scale,e.rotation]),r.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const r=this.state;this.computeValues([e.scale,e.rotation]),r.origin=[e.clientX,e.clientY];const i=r._movement;r._movement=[e.scale-1,e.rotation],r._delta=Lt.sub(r._movement,i),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const r=this.config.modifierKey;r&&(Array.isArray(r)?!r.find(i=>e[i]):!e[r])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-Y8(e)[1]/Qee*i.offset[0],0],Lt.addTo(i._movement,i._delta),Z8(i),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const r=this.config.device;r&&(e(r,"start",this[r+"Start"].bind(this)),e(r,"change",this[r+"Move"].bind(this)),e(r,"end",this[r+"End"].bind(this)),e(r,"cancel",this[r+"End"].bind(this)),e("lostPointerCapture","",this[r+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const Zee=zt(zt({},Q8),{},{device(t,e,{shared:r,pointer:{touch:i=!1}={}}){if(r.target&&!zr.touch&&zr.gesture)return"gesture";if(zr.touch&&i)return"touch";if(zr.touchscreen){if(zr.pointer)return"pointer";if(zr.touch)return"touch"}},bounds(t,e,{scaleBounds:r={},angleBounds:i={}}){const s=o=>{const l=gA(wm(r,o),{min:-1/0,max:1/0});return[l.min,l.max]},a=o=>{const l=gA(wm(i,o),{min:-1/0,max:1/0});return[l.min,l.max]};return typeof r!="function"&&typeof i!="function"?[s(),a()]:o=>[s(o),a(o)]},threshold(t,e,r){return this.lockDirection=r.axis==="lock",Lt.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});class ete extends bh{constructor(...e){super(...e),nn(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(gu(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const r=gu(e),i=this.state;i._delta=Lt.sub(r,i._values),Lt.addTo(i._movement,i._delta),this.computeValues(r),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const tte=zt(zt({},Wo),{},{mouseOnly:(t=!0)=>t});class nte extends bh{constructor(...e){super(...e),nn(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const r=this.state,i=Nee(e);r._delta=Lt.sub(i,r._values),Lt.addTo(r._movement,r._delta),this.computeValues(i),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const rte=Wo;class ite extends bh{constructor(...e){super(...e),nn(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const r=this.state;r._delta=Y8(e),Lt.addTo(r._movement,r._delta),Z8(r),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const ste=Wo;class ate extends bh{constructor(...e){super(...e),nn(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(gu(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const r=this.state;if(!r._active)return;r._active=!1;const i=gu(e);r._movement=r._delta=Lt.sub(i,r._values),this.computeValues(i),this.compute(e),r.delta=r.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const ote=zt(zt({},Wo),{},{mouseOnly:(t=!0)=>t}),fT=new Map,PE=new Map;function lte(t){fT.set(t.key,t.engine),PE.set(t.key,t.resolver)}const ute={key:"drag",engine:jee,resolver:Yee},cte={key:"hover",engine:ate,resolver:ote},dte={key:"move",engine:ete,resolver:tte},hte={key:"pinch",engine:Jee,resolver:Zee},fte={key:"scroll",engine:nte,resolver:rte},pte={key:"wheel",engine:ite,resolver:ste};function mte(t,e){if(t==null)return{};var r={},i=Object.keys(t),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function gte(t,e){if(t==null)return{};var r=mte(t,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}const vte={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=zr.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},yte=["target","eventOptions","window","enabled","transform"];function _p(t={},e){const r={};for(const[i,s]of Object.entries(e))switch(typeof s){case"function":r[i]=s.call(r,t[i],i,t);break;case"object":r[i]=_p(t[i],s);break;case"boolean":s&&(r[i]=t[i]);break}return r}function _te(t,e,r={}){const i=t,{target:s,eventOptions:a,window:o,enabled:l,transform:u}=i,c=gte(i,yte);if(r.shared=_p({target:s,eventOptions:a,window:o,enabled:l,transform:u},vte),e){const d=PE.get(e);r[e]=_p(zt({shared:r.shared},c),d)}else for(const d in c){const h=PE.get(d);h&&(r[d]=_p(zt({shared:r.shared},c[d]),h))}return r}class eV{constructor(e,r){nn(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=r}add(e,r,i,s,a){const o=this._listeners,l=Tee(r,i),u=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=zt(zt({},u),a);e.addEventListener(l,s,c);const d=()=>{e.removeEventListener(l,s,c),o.delete(d)};return o.add(d),d}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class wte{constructor(){nn(this,"_timeouts",new Map)}add(e,r,i=140,...s){this.remove(e),this._timeouts.set(e,window.setTimeout(r,i,...s))}remove(e){const r=this._timeouts.get(e);r&&window.clearTimeout(r)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class bte{constructor(e){nn(this,"gestures",new Set),nn(this,"_targetEventStore",new eV(this)),nn(this,"gestureEventStores",{}),nn(this,"gestureTimeoutStores",{}),nn(this,"handlers",{}),nn(this,"config",{}),nn(this,"pointerIds",new Set),nn(this,"touchIds",new Set),nn(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),xte(this,e)}setEventIds(e){if(Fg(e))return this.touchIds=new Set(kee(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,r){this.handlers=e,this.nativeHandlers=r}applyConfig(e,r){this.config=_te(e,r,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const r=this.config.shared,i={};let s;if(!(r.target&&(s=r.target(),!s))){if(r.enabled){for(const o of this.gestures){const l=this.config[o],u=wA(i,l.eventOptions,!!s);if(l.enabled){const c=fT.get(o);new c(this,e,o).bind(u)}}const a=wA(i,r.eventOptions,!!s);for(const o in this.nativeHandlers)a(o,"",l=>this.nativeHandlers[o](zt(zt({},this.state.shared),{},{event:l,args:e})),void 0,!0)}for(const a in i)i[a]=Pee(...i[a]);if(!s)return i;for(const a in i){const{device:o,capture:l,passive:u}=See(a);this._targetEventStore.add(s,o,"",i[a],{capture:l,passive:u})}}}}function ul(t,e){t.gestures.add(e),t.gestureEventStores[e]=new eV(t,e),t.gestureTimeoutStores[e]=new wte}function xte(t,e){e.drag&&ul(t,"drag"),e.wheel&&ul(t,"wheel"),e.scroll&&ul(t,"scroll"),e.move&&ul(t,"move"),e.pinch&&ul(t,"pinch"),e.hover&&ul(t,"hover")}const wA=(t,e,r)=>(i,s,a,o={},l=!1)=>{var u,c;const d=(u=o.capture)!==null&&u!==void 0?u:e.capture,h=(c=o.passive)!==null&&c!==void 0?c:e.passive;let f=l?i:xee(i,s,d);r&&h&&(f+="Passive"),t[f]=t[f]||[],t[f].push(a)},Ete=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function Ste(t){const e={},r={},i=new Set;for(let s in t)Ete.test(s)?(i.add(RegExp.lastMatch),r[s]=t[s]):e[s]=t[s];return[r,e,i]}function cl(t,e,r,i,s,a){if(!t.has(r)||!fT.has(i))return;const o=r+"Start",l=r+"End",u=c=>{let d;return c.first&&o in e&&e[o](c),r in e&&(d=e[r](c)),c.last&&l in e&&e[l](c),d};s[i]=u,a[i]=a[i]||{}}function Tte(t,e){const[r,i,s]=Ste(t),a={};return cl(s,r,"onDrag","drag",a,e),cl(s,r,"onWheel","wheel",a,e),cl(s,r,"onScroll","scroll",a,e),cl(s,r,"onPinch","pinch",a,e),cl(s,r,"onMove","move",a,e),cl(s,r,"onHover","hover",a,e),{handlers:a,config:e,nativeHandlers:i}}function Ite(t,e={},r,i){const s=te.useMemo(()=>new bte(t),[]);if(s.applyHandlers(t,i),s.applyConfig(e,r),te.useEffect(s.effect.bind(s)),te.useEffect(()=>s.clean.bind(s),[]),e.target===void 0)return s.bind.bind(s)}function Cte(t){return t.forEach(lte),function(r,i){const{handlers:s,nativeHandlers:a,config:o}=Tte(r,i||{});return Ite(s,o,void 0,a)}}function kte(t,e){return Cte([ute,hte,fte,pte,dte,cte])(t,e||{})}function Nte(){return{scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0}}function tV(t){var e=t.scaleX,r=e===void 0?1:e,i=t.scaleY,s=i===void 0?1:i,a=t.translateX,o=a===void 0?0:a,l=t.translateY,u=l===void 0?0:l,c=t.skewX,d=c===void 0?0:c,h=t.skewY,f=h===void 0?0:h;return{scaleX:r,scaleY:s,translateX:o,translateY:u,skewX:d,skewY:f}}function nV(t){var e=t.scaleX,r=t.scaleY,i=t.translateX,s=t.translateY,a=t.skewX,o=t.skewY,l=e*r-o*a;return{scaleX:r/l,scaleY:e/l,translateX:(r*i-a*s)/-l,translateY:(o*i-e*s)/l,skewX:a/-l,skewY:o/-l}}function rV(t,e){var r=e.x,i=e.y;return{x:t.scaleX*r+t.skewX*i+t.translateX,y:t.skewY*r+t.scaleY*i+t.translateY}}function zy(t,e){var r=e.x,i=e.y;return rV(nV(t),{x:r,y:i})}function Ate(t,e){e===void 0&&(e=void 0);var r=e||t;return tV({scaleX:t,scaleY:r})}function qy(t,e){return tV({translateX:t,translateY:e})}function bA(t,e){return{scaleX:t.scaleX*e.scaleX+t.skewX*e.skewY,scaleY:t.skewY*e.skewX+t.scaleY*e.scaleY,translateX:t.scaleX*e.translateX+t.skewX*e.translateY+t.translateX,translateY:t.skewY*e.translateX+t.scaleY*e.translateY+t.translateY,skewX:t.scaleX*e.skewX+t.skewX*e.scaleY,skewY:t.skewY*e.scaleX+t.scaleY*e.skewY}}function DE(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];switch(e.length){case 0:throw new Error("composeMatrices() requires arguments: was called with no args");case 1:return e[0];case 2:return bA(e[0],e[1]);default:{var i=e[0],s=e[1],a=e.slice(2),o=bA(i,s);return DE.apply(void 0,[o].concat(a))}}}function ME(){return ME=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ME.apply(this,arguments)}var Rte={scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0},Pte=function(e){return-e.deltaY>0?{scaleX:1.1,scaleY:1.1}:{scaleX:.9,scaleY:.9}},Dte=function(e){var r=e.offset,i=r[0],s=e.lastOffset,a=s[0];return{scaleX:i-a<0?.9:1.1,scaleY:i-a<0?.9:1.1}};function pT(t){var e=t.scaleXMin,r=e===void 0?0:e,i=t.scaleXMax,s=i===void 0?1/0:i,a=t.scaleYMin,o=a===void 0?0:a,l=t.scaleYMax,u=l===void 0?1/0:l,c=t.initialTransformMatrix,d=c===void 0?Rte:c,h=t.wheelDelta,f=h===void 0?Pte:h,m=t.pinchDelta,v=m===void 0?Dte:m,y=t.width,b=t.height,_=t.constrain,w=t.children,E=S.useRef(null),N=S.useRef(d),M=S.useState(d),O=M[0],A=M[1],D=S.useState(!1),T=D[0],I=D[1],x=S.useState(void 0),R=x[0],P=x[1],j=S.useState(void 0),$=j[0],U=j[1],Y=S.useCallback(function(B,G){if(_)return _(B,G);var K=B.scaleX,re=B.scaleY,le=K>s||K<r,he=re>u||re<o;return le||he?G:B},[_,r,s,o,u]),q=S.useCallback(function(B){A(function(G){var K=Y(B,G);return N.current=K,K})},[Y]),F=S.useCallback(function(B){var G=B.x,K=B.y;return rV(O,{x:G,y:K})},[O]),W=S.useCallback(function(B){var G=B.x,K=B.y;return zy(O,{x:G,y:K})},[O]),Q=S.useCallback(function(){q(d)},[d,q]),H=S.useCallback(function(B){var G=B.scaleX,K=B.scaleY,re=B.point,le=K||G,he=re||{x:y/2,y:b/2},ye=zy(N.current,he),Ie=DE(N.current,qy(ye.x,ye.y),Ate(G,le),qy(-ye.x,-ye.y));if(q(Ie),T){var Be=N.current,Oe=Be.translateX,ze=Be.translateY;U(re),P({translateX:Oe,translateY:ze})}},[b,y,T,q]),X=S.useCallback(function(B){var G=B.translateX,K=B.translateY,re=DE(O,qy(G,K));q(re)},[q,O]),J=S.useCallback(function(B){var G=B.translateX,K=B.translateY,re=ME({},O,{translateX:G,translateY:K});q(re)},[q,O]),ee=S.useCallback(function(B){var G=B.x,K=B.y,re=zy(O,{x:G,y:K});J({translateX:re.x,translateY:re.y})},[J,O]),se=S.useCallback(function(){return nV(O)},[O]),ce=S.useCallback(function(){var B=se(),G=B.translateX,K=B.translateY,re=B.scaleX,le=B.scaleY,he=B.skewX,ye=B.skewY;return"matrix("+re+", "+ye+", "+he+", "+le+", "+G+", "+K+")"},[se]),Se=S.useCallback(function(B){var G=O.translateX,K=O.translateY;U(Uy(B)||void 0),P({translateX:G,translateY:K}),I(!0)},[O]),Ee=S.useCallback(function(B,G){var K,re;if(!(!T||!$||!R)){var le=Uy(B),he=le?-($.x-le.x):-$.x,ye=le?-($.y-le.y):-$.y,Ie=R.translateX+he;G!=null&&G.offsetX&&(Ie+=(K=G==null?void 0:G.offsetX)!=null?K:0);var Be=R.translateY+ye;G!=null&&G.offsetY&&(Be+=(re=G==null?void 0:G.offsetY)!=null?re:0),J({translateX:Ie,translateY:Be})}},[T,J,$,R]),ie=S.useCallback(function(){U(void 0),P(void 0),I(!1)},[]),ue=S.useCallback(function(B){B.preventDefault();var G=Uy(B)||void 0,K=f(B),re=K.scaleX,le=K.scaleY;H({scaleX:re,scaleY:le,point:G})},[H,f]),ge=S.useCallback(function(B){var G=B.origin,K=G[0],re=G[1],le=B.memo,he=le;if(E.current){var ye,Ie=(ye=he)!=null?ye:E.current.getBoundingClientRect(),Be=Ie.top,Oe=Ie.left;he||(he={top:Be,left:Oe});var ze=v(B),lt=ze.scaleX,vt=ze.scaleY;H({scaleX:lt,scaleY:vt,point:{x:K-Oe,y:re-Be}})}return he},[H,v]),ke=S.useCallback(function(){var B=O.translateX,G=O.translateY,K=O.scaleX,re=O.scaleY,le=O.skewX,he=O.skewY;return"matrix("+K+", "+he+", "+le+", "+re+", "+B+", "+G+")"},[O]),Re=S.useCallback(function(){var B={x:y/2,y:b/2},G=W(B);X({translateX:G.x-B.x,translateY:G.y-B.y})},[b,y,W,X]),_e=S.useCallback(function(){q(Nte())},[q]);kte({onDragStart:function(G){var K=G.event;K instanceof KeyboardEvent||Se(K)},onDrag:function(G){var K=G.event,re=G.pinching,le=G.cancel;re?(le(),ie()):K instanceof KeyboardEvent||Ee(K)},onDragEnd:ie,onPinch:ge,onWheel:function(G){var K=G.event,re=G.active,le=G.pinching;le||!re||ue(K)}},{target:E,eventOptions:{passive:!1},drag:{filterTaps:!0}});var V={initialTransformMatrix:d,transformMatrix:O,isDragging:T,center:Re,clear:_e,scale:H,translate:X,translateTo:ee,setTranslate:J,setTransformMatrix:q,reset:Q,handleWheel:ue,handlePinch:ge,dragEnd:ie,dragMove:Ee,dragStart:Se,toString:ke,invert:se,toStringInvert:ce,applyToPoint:F,applyInverseToPoint:W,containerRef:E};return te.createElement(te.Fragment,null,w(V))}pT.propTypes={width:Et.number.isRequired,height:Et.number.isRequired,wheelDelta:Et.func,scaleXMin:Et.number,scaleXMax:Et.number,scaleYMin:Et.number,scaleYMax:Et.number,constrain:Et.func,children:Et.func.isRequired};function Mte(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var jr=Mte,Lte=typeof sf=="object"&&sf&&sf.Object===Object&&sf,iV=Lte,Ote=iV,jte=typeof self=="object"&&self&&self.Object===Object&&self,Vte=Ote||jte||Function("return this")(),wi=Vte,Fte=wi,$te=function(){return Fte.Date.now()},sV=$te,Ute=/\s/;function Bte(t){for(var e=t.length;e--&&Ute.test(t.charAt(e)););return e}var zte=Bte,qte=zte,Hte=/^\s+/;function Wte(t){return t&&t.slice(0,qte(t)+1).replace(Hte,"")}var Gte=Wte,Kte=wi,Yte=Kte.Symbol,$u=Yte,xA=$u,aV=Object.prototype,Xte=aV.hasOwnProperty,Qte=aV.toString,hc=xA?xA.toStringTag:void 0;function Jte(t){var e=Xte.call(t,hc),r=t[hc];try{t[hc]=void 0;var i=!0}catch{}var s=Qte.call(t);return i&&(e?t[hc]=r:delete t[hc]),s}var Zte=Jte,ene=Object.prototype,tne=ene.toString;function nne(t){return tne.call(t)}var rne=nne,EA=$u,ine=Zte,sne=rne,ane="[object Null]",one="[object Undefined]",SA=EA?EA.toStringTag:void 0;function lne(t){return t==null?t===void 0?one:ane:SA&&SA in Object(t)?ine(t):sne(t)}var Go=lne;function une(t){return t!=null&&typeof t=="object"}var Gi=une,cne=Go,dne=Gi,hne="[object Symbol]";function fne(t){return typeof t=="symbol"||dne(t)&&cne(t)==hne}var Uu=fne,pne=Gte,TA=jr,mne=Uu,IA=NaN,gne=/^[-+]0x[0-9a-f]+$/i,vne=/^0b[01]+$/i,yne=/^0o[0-7]+$/i,_ne=parseInt;function wne(t){if(typeof t=="number")return t;if(mne(t))return IA;if(TA(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=TA(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=pne(t);var r=vne.test(t);return r||yne.test(t)?_ne(t.slice(2),r?2:8):gne.test(t)?IA:+t}var oV=wne,bne=jr,Hy=sV,CA=oV,xne="Expected a function",Ene=Math.max,Sne=Math.min;function Tne(t,e,r){var i,s,a,o,l,u,c=0,d=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(xne);e=CA(e)||0,bne(r)&&(d=!!r.leading,h="maxWait"in r,a=h?Ene(CA(r.maxWait)||0,e):a,f="trailing"in r?!!r.trailing:f);function m(O){var A=i,D=s;return i=s=void 0,c=O,o=t.apply(D,A),o}function v(O){return c=O,l=setTimeout(_,e),d?m(O):o}function y(O){var A=O-u,D=O-c,T=e-A;return h?Sne(T,a-D):T}function b(O){var A=O-u,D=O-c;return u===void 0||A>=e||A<0||h&&D>=a}function _(){var O=Hy();if(b(O))return w(O);l=setTimeout(_,y(O))}function w(O){return l=void 0,f&&i?m(O):(i=s=void 0,o)}function E(){l!==void 0&&clearTimeout(l),c=0,i=u=s=l=void 0}function N(){return l===void 0?o:w(Hy())}function M(){var O=Hy(),A=b(O);if(i=arguments,s=this,u=O,A){if(l===void 0)return v(u);if(h)return clearTimeout(l),l=setTimeout(_,e),m(u)}return l===void 0&&(l=setTimeout(_,e)),o}return M.cancel=E,M.flush=N,M}var Ine=Tne;const Cne=Ua(Ine),dl={top:40,right:40,bottom:40,left:40};function kne(t,e){const r=t.split(" "),i=[];let s="";return r.forEach(a=>{(s+" "+a).trim().length>e&&s?(i.push(s),s=a):s=s?`${s} ${a}`:a}),s&&i.push(s),i}function Nne(){var x;const[t,e]=S.useState(null),[r,i]=S.useState(!0),[s,a]=S.useState(null),[o,l]=S.useState(null),[u,c]=S.useState(null),[d,h]=S.useState({width:window.innerWidth,height:window.innerHeight}),[f,m]=S.useState(150),[v,y]=S.useState(""),[b,_]=S.useState(2),w=yr(),E=S.useCallback(Cne(R=>{l(R)},50),[]);S.useEffect(()=>{const R=()=>{h({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[]),S.useEffect(()=>{(async()=>{try{const P={},$=(await sn(rn(It,"interviewSummaries"))).docs.map(async q=>{const F=rn(It,"interviewSummaries",q.id,"subSummaries");(await sn(F)).forEach(Q=>{const H=Q.data();H.keywords&&H.keywords.split(",").map(X=>X.trim().toLowerCase()).forEach(X=>{P[X]=(P[X]||0)+1})})});await Promise.all($);const U=Object.fromEntries(Object.entries(P).filter(([q,F])=>F>1)),Y={name:"keywords",children:Object.entries(U).map(([q,F])=>({name:q,value:F}))};e(Y),i(!1)}catch(P){console.error("Error fetching data:",P),a("Error loading data"),i(!1)}})()},[]);const N=S.useMemo(()=>{if(!t)return null;let R=t.children;v&&(R=R.filter(U=>U.name.toLowerCase().includes(v.toLowerCase()))),R=R.filter(U=>U.value>=b),R=[...R].sort((U,Y)=>Y.value-U.value);const P=R.slice(0,f),j=R.slice(f),$={name:"keywords",children:P};if(j.length>0&&!v){const U=j.reduce((q,F)=>q+F.value,0),Y=j.length;$.children.push({name:`${Y} more keywords`,value:U,isOthers:!0})}return $},[t,f,v,b]);if(r)return p.jsxs("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:[p.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),p.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]});if(s)return p.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-50 px-6",children:p.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg max-w-xl text-center",children:s})});if(!N)return null;const M=Vg(N).sum(R=>R.value).sort((R,P)=>P.value-R.value),{width:O,height:A}=d,D=O-dl.left-dl.right,T=A-dl.top-dl.bottom,I=R=>{if(R.data.isOthers){m(P=>P+50);return}u&&u.name===R.data.name?c(null):c({name:R.data.name,value:R.data.value,x:R.x,y:R.y,r:R.r})};return M.children&&Math.max(...M.children.map(R=>R.value)),p.jsxs("div",{className:"w-full h-screen relative bg-gray-50 font-sans overflow-hidden",children:[p.jsxs("div",{className:"absolute top-4 left-4 z-40 bg-white bg-opacity-90 p-4 rounded-lg shadow-sm w-72",children:[p.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Keyword Visualization"}),p.jsx("div",{className:"mb-3",children:p.jsx("input",{type:"text",placeholder:"Search keywords...",value:v,onChange:R=>y(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Visible Keywords"}),p.jsxs("select",{value:f,onChange:R=>m(Number(R.target.value)),className:"w-full px-2 py-1.5 border border-gray-300 rounded-md text-sm",children:[p.jsx("option",{value:"50",children:"Top 50"}),p.jsx("option",{value:"100",children:"Top 100"}),p.jsx("option",{value:"150",children:"Top 150"}),p.jsx("option",{value:"200",children:"Top 200"}),p.jsx("option",{value:"300",children:"Top 300"}),p.jsx("option",{value:"500",children:"Top 500"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Min. Frequency"}),p.jsxs("select",{value:b,onChange:R=>_(Number(R.target.value)),className:"w-full px-2 py-1.5 border border-gray-300 rounded-md text-sm",children:[p.jsx("option",{value:"2",children:"2+"}),p.jsx("option",{value:"3",children:"3+"}),p.jsx("option",{value:"5",children:"5+"}),p.jsx("option",{value:"10",children:"10+"})]})]})]}),p.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Showing ",((x=M.children)==null?void 0:x.length)||0," keywords",t&&t.children&&` of ${t.children.length} total`,p.jsx("br",{}),p.jsx("span",{className:"italic",children:"Only keywords with multiple clips are included"})]})]}),u&&p.jsxs("div",{className:"absolute top-36 left-4 z-50 bg-white rounded-xl shadow-md p-4 max-w-xs border border-gray-200",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-900 m-0",children:u.name}),p.jsx("button",{onClick:()=>c(null),className:"bg-transparent border-0 text-gray-500 text-base cursor-pointer p-1 flex items-center justify-center rounded hover:bg-gray-100 hover:text-gray-900 transition-colors",children:"✕"})]}),p.jsxs("p",{className:"text-sm text-gray-600 mt-2 mb-4",children:["This topic appears ",p.jsx("strong",{children:u.value})," times across all interviews."]}),p.jsx("div",{children:p.jsxs("button",{onClick:()=>w(`/playlist-builder?keywords=${encodeURIComponent(u.name)}`),className:"w-full py-2.5 px-4 bg-blue-600 text-white font-medium text-sm rounded-lg cursor-pointer flex items-center justify-center hover:bg-blue-700 transition-colors shadow-sm",children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4 mr-2",children:p.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),"Watch related segments"]})})]}),p.jsx(pT,{width:O,height:A,scaleXMin:.5,scaleXMax:3,scaleYMin:.5,scaleYMax:3,initialTransformMatrix:{scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0},children:R=>p.jsxs("div",{className:"w-full h-full overflow-hidden relative touch-none flex justify-center items-center",children:[p.jsxs("svg",{width:"100%",height:"100%",ref:R.containerRef,className:"bg-white rounded-xl shadow-md mx-4 my-4 mt-20",children:[p.jsx("rect",{width:"100%",height:"100%",fill:"#ffffff",rx:14,onClick:()=>{R.reset(),c(null)}}),p.jsx(hT,{root:M,size:[D,T],padding:16,children:P=>{const j=P.descendants().filter($=>!$.children);return p.jsx(mu,{transform:R.toString(),top:dl.top+(T/2-P.r),left:dl.left+(D/2-P.r),children:j.map(($,U)=>{const Y=Math.max($.r,20),q=u&&u.name===$.data.name,F=$.data.isOthers,W=Math.min(Y/3.5,14),Q=Math.max(5,Math.floor(Y/3)),H=kne($.data.name,Q),X=W,J=H.length>1?-((H.length-1)*X)/2:0,ee=q?"#2563eb":F?"#9ca3af":"#d1d5db",se=q?3:1,ce=q?"#f0f7ff":F?"#f3f4f6":"#ffffff";return p.jsxs("g",{transform:`translate(${$.x}, ${$.y})`,onMouseEnter:()=>E({name:$.data.name,value:$.data.value,x:$.x,y:$.y,isOthers:$.data.isOthers}),onMouseLeave:()=>E(null),onClick:()=>I($),className:"cursor-pointer",children:[p.jsx("circle",{r:Y,fill:ce,stroke:ee,strokeWidth:se,style:{transition:"fill 0.3s, stroke 0.3s, stroke-width 0.3s"}}),p.jsx("text",{textAnchor:"middle",fontSize:W,fontWeight:q?"bold":"normal",fill:F?"#6b7280":"#111827",pointerEvents:"none",style:{fontFamily:"Inter, system-ui, sans-serif"},children:H.map((Se,Ee)=>p.jsx("tspan",{x:"0",dy:Ee===0?J:X,children:Se},Ee))})]},`circle-${U}`)})})}})]}),o&&!u&&p.jsxs("div",{className:"absolute bg-gray-900 bg-opacity-90 text-white p-2 px-3 rounded-lg pointer-events-none text-sm z-50 shadow-md max-w-xs",style:{left:R.transformMatrix.translateX+o.x*R.transformMatrix.scaleX,top:R.transformMatrix.translateY+o.y*R.transformMatrix.scaleY-20},children:[p.jsx("div",{className:"font-semibold",children:o.name}),p.jsxs("div",{children:[o.value," mentions"]}),p.jsx("div",{className:"text-xs mt-1 text-blue-200",children:o.isOthers?"Click to show more keywords":"Click to explore"})]})]})}),p.jsxs("div",{className:"absolute bottom-4 right-4 bg-white bg-opacity-90 py-2 px-3 rounded-lg text-xs text-gray-600 shadow-sm flex items-center",children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3.5 h-3.5 mr-1.5 text-gray-500",children:p.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})}),p.jsx("span",{children:"Scroll to zoom • Drag to pan • Click bubble to select"})]})]})}const Ane="modulepreload",Rne=function(t){return"/civil-rights-history-project/"+t},kA={},bm=function(e,r,i){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(u=>{if(u=Rne(u),u in kA)return;kA[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":Ane,c||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),c)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},Pne=S.lazy(()=>bm(()=>import("./MapComponent-B8wuiXjp.js"),__vite__mapDeps([0,1])));function Dne(){const[t,e]=S.useState(!0),[r,i]=S.useState(null),[s,a]=S.useState([]);S.useEffect(()=>{u()},[]);const o=async c=>{try{await new Promise(f=>setTimeout(f,1e3));const h=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(c)}`)).json();if(h.length>0)return[parseFloat(h[0].lat),parseFloat(h[0].lon)]}catch(d){console.error("Error fetching coordinates:",d)}return null},l=c=>{if(!c)return null;const d=/(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,h=c==null?void 0:c.match(d);return h&&h[1]?h[1]:null},u=async()=>{try{e(!0);const c=await sn(rn(It,"interviewSummaries")),d=[];for(const h of c.docs){const f=h.data(),{birthplace:m,name:v,videoEmbedLink:y}=f;if(m){const b=await o(m);if(b){const _=l(y),w=_?`https://img.youtube.com/vi/${_}/default.jpg`:"";d.push({position:b,name:v,birthplace:m,thumbnailURL:w,documentName:h.id})}}}console.log("Markers data:",d),a(d),e(!1)}catch(c){console.error("Error fetching birthplaces:",c),i("Failed to load map data"),e(!1)}};return r?p.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:p.jsx("div",{className:"text-red-500",children:r})}):p.jsxs("div",{className:"map-container",children:[!t&&s.length>0&&p.jsx(S.Suspense,{fallback:p.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:p.jsx(Pne,{markers:s})}),t&&p.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})]})}const Hi=navigator?navigator.userAgent.toLowerCase():"no-user-agent-specified",vu=document?document.documentElement:null,Mne=Hi?Hi.indexOf("phantom")!==-1:!1,Eh=window&&"ActiveXObject"in window;Eh&&Hi.match(/MSIE 9/i);const $g=Hi.indexOf("webkit")!==-1;Hi.indexOf("android");const Lne=Hi.search("android [23]")!==-1,Ko=window?typeof window.orientation<"u":!1,One=navigator&&window?navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&!window.PointerEvent:!1,jne=navigator&&window?window.PointerEvent&&navigator.pointerEnabled&&navigator.maxTouchPoints:One,lV=window?window.opera:!1;Hi.indexOf("gecko");const yu=Hi.indexOf("gecko")!==-1&&!$g&&!lV&&!Eh;Hi.indexOf("chrome");const Vne=Hi.indexOf("edge/")!==-1;vu&&Eh&&"transition"in vu.style;window&&"WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix;vu&&"MozPerspective"in vu.style;vu&&"OTransition"in vu.style;let NA=window?"devicePixelRatio"in window&&window.devicePixelRatio>1:!1;if(!NA&&window&&"matchMedia"in window){let t=window.matchMedia("(min-resolution:144dpi)");NA=t&&t.matches}const $i=window&&!window.L_NO_TOUCH&&!Mne&&(jne||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);function Fne(){var t=window.innerWidth,e=window.innerHeight,r="portrait";return t>e&&(r="landscape"),r}function Sh(t){return typeof t=="string"?document.getElementById(t):t}function Te(t,e,r){var i=document.createElement(t);return i.className=e,r&&r.appendChild(i),i}function jc(t,e){var r=Te("button",t,e);return r.type="button",r}function LE(t){for(var e={x:0,y:0};t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;return e}function uV(t){for(var e=document.documentElement.style,r=0;r<t.length;r++)if(t[r]in e)return t[r];return!1}uV(["transition","webkitTransition","OTransition","MozTransition","msTransition"]);uV(["transformProperty","WebkitTransform","OTransform","MozTransform","msTransform"]);class at extends Error{constructor(e,r){super(),this.name="TLError",this.message=e||"error",this.message_key=this.message,this.detail=r||""}}const AA={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function cV(t){AA[t.toLowerCase()]&&(t=AA[t.toLowerCase()]);var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(i,s,a,o){return s+s+a+a+o+o});var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null}function wt(t,e){var r;for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}function $ne(t){return t==null?!1:t==!0||String(t).toLowerCase()=="true"||Number(t)==1}function xl(t){for(var e=Array.prototype.slice.call(arguments,1),r=0,i=e.length,s;r<i;r++)s=e[r]||{},wt(t,s);return t}const dV=[];function Une(t){dV.push(t)}function ot(t){dV.forEach(e=>{try{e(t)}catch(r){console&&console.log&&console.log("Error handling trace",r)}})}function es(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}const RA=function(){var t=0,e="_tl_id";return function(r){return r[e]=r[e]||++t,r[e]}}();function Nr(t){return t&&typeof t.replace=="function"?t.replace(/^\s+|\s+$/g,""):""}function ar(t,...e){for(let i of e)for(var r of Object.getOwnPropertyNames(i.prototype))t.prototype[r]=i.prototype[r]}function Bne(t,e){if(e||(e=Lo(6)),!(e in t))return e;var r=e.match(/^(.+)(-\d+)?$/)[1],i=[];for(let a in t)a.match(/^(.+?)(-\d+)?$/)[1]==r&&i.push(a);e=r+"-"+(i.length+1);for(var s=i.length;i.indexOf(e)!=-1;s++)e=r+"-"+s;return e}function zne(t){var e=[];if(Object.keys)e=Object.keys(t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);for(var i=0;i<e.length;i++){var s=e[i];if(t[s]!=null&&typeof t[s]!="string"||Nr(t[s]).length!=0)return!1}return!0}function Wy(t){t=Nr(t),t=t.toLowerCase();for(var e="ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;",r="aaaaaeeeeeiiiiooooouuuunc------",i=0,s=e.length;i<s;i++)t=t.replace(new RegExp(e.charAt(i),"g"),r.charAt(i));return t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),t=t.replace(/^([0-9])/,"_$1"),t}function Lo(t,e){var r=function(a){return Math.floor(Math.random()*a)},i=function(){var a="abcdefghijklmnopqurstuvwxyz";return a.substr(r(32),1)},s=function(a){for(var o="",l=0;l<a;l++)o+=i();return o};return e?e+"-"+s(t):"tl-"+s(t)}function qne(t,e,r){for(var i=0;i<t.length;i++)if(e<t[i])return t[i];return e}function Hne(t,e,r){for(var i=t.length-1;i>=0;i--)if(e>t[i])return t[i];return e}function Wne(t){return t==parseFloat(t)?!(t%2):void 0}function hV(t,e,r,i){for(var s=i||0,a=0;a<e.length;a++)e[a].data[r]==t&&(s=a);return s}function Kl(t){return t&&(t=t.replace(/<a\b[^>]*>/i,""),t=t.replace(/<\/a>/i,""),t)}function Gne(t,e){t.data=xl({},t.data,e),t.data.unique_id===""&&(t.data.unique_id=Lo(6))}function Kne(t){return t.match(/<p>[\s\S]*?<\/p>/)?t:"<p>"+t+"</p>"}function _u(t){return t=t.replace(/(<[^>]*>)+/g,""),t.replace('"',"'")}function OE(t,e,r){var i=function(l,u,c){c||(c="");var d=30;return u&&u.length>d&&(u=u.substring(0,d)+"…"),c+"<a class='tl-makelink' href='"+l+"' onclick='void(0)'>"+u+"</a>"},s=/\b(?:https?|ftp):\/\/([a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|])/gim,a=/(^|[^\/>])(www\.[\S]+(\b|$))/gim,o=/([a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+)/gim;return t.replace(s,function(l,u,c,d){if(c>0){var h=d[c-1];if(h=='"'||h=="'"||h=="=")return l}return i(l,u)}).replace(a,function(l,u,c,d,h){return i("http://"+c,c,u)}).replace(o,function(l,u,c,d){return i("mailto:"+u,u)})}function Ug(t){return t.replace(/(.*)www.dropbox.com\/(.*)/,"$1dl.dropboxusercontent.com/$2")}const Yo={square:t=>{var e={w:0,h:0};return t.w>t.h&&t.h>0?(e.h=t.h,e.w=t.h):(e.w=t.w,e.h=t.w),e},r16_9:t=>t.w!==null&&t.w!==""?Math.round(t.w/16*9):t.h!==null&&t.h!==""?Math.round(t.h/9*16):0,r4_3:t=>{if(t.w!==null&&t.w!=="")return Math.round(t.w/4*3);if(t.h!==null&&t.h!=="")return Math.round(t.h/3*4)}};function Yne(t){var e,r=[],i,s;e=t.toString(),e.match("&#038;")?e=e.replace("&#038;","&"):e.match("&#38;")?e=e.replace("&#38;","&"):e.match("&amp;")&&(e=e.replace("&amp;","&")),s=e.slice(e.indexOf("?")+1).split("&");for(var a=0;a<s.length;a++)i=s[a].split("="),r.push(i[0]),r[i[0]]=i[1];return r}function Xne(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r+"="+t[r]);return"?"+e.join("&")}function Qne(t,e){if(typeof t<"u"){var r=0;for(var i in t){if(e===r)return t[i];r++}return""}else return""}let Jne=function(t){var e="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",r=e.length;return{encode:function(i){if(typeof i!="number"||i!==parseInt(i))throw'"encode" only accepts integers.';for(var s="";i;){var a=i%r;i=Math.floor(i/r),s=e[a].toString()+s}return s},decode:function(i){if(typeof i!="string")throw'"decode" only accepts strings.';for(var s=0;i;){var a=e.indexOf(i[0]);if(a<0)throw`"decode" can't find "`+i[0]+'" in the alphabet: "'+e+'"';var o=i.length-1;s+=a*Math.pow(r,o),i=i.substring(1)}return s}}}();function Gy(t){if(typeof t=="string"){let s=t.match(/^\s*(\d+h)?(\d+m)?(\d+s)?\s*/i);if(s){var e=parseInt(s[1])||0,r=parseInt(s[2])||0,i=parseInt(s[3])||0;return i+r*60+e*60*60}}else if(typeof t=="number")return t;return 0}function Zne(t){var e=new DOMParser().parseFromString(t,"text/html");return e.body.textContent||""}function ere(t){}function Bg(t){var e=new ere;return e.get(t)}function Fd(t){return t==1?1:1-Math.pow(2,-10*t)}function Bu(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}let xm=function(){};xm.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments)},r=function(){};r.prototype=this.prototype;var i=new r;i.constructor=e,e.prototype=i,e.superclass=this.prototype;for(var s in this)this.hasOwnProperty(s)&&s!=="prototype"&&s!=="superclass"&&(e[s]=this[s]);return t.statics&&(xl(e,t.statics),delete t.statics),t.includes&&(xl.apply(null,[i].concat(t.includes)),delete t.includes),t.options&&i.options&&(t.options=xl({},i.options,t.options)),xl(i,t),e.extend=xm.extend,e.include=function(a){xl(this.prototype,a)},e};class or{on(e,r,i){if(!r)throw new at("No callback function provided");var s=this._tl_events=this._tl_events||{};return s[e]=s[e]||[],s[e].push({action:r,context:i||this}),this}addEventListener(e,r,i){return this.on(e,r,i)}hasEventListeners(e){var r="_tl_events";return r in this&&e in this[r]&&this[r][e].length>0}removeEventListener(e,r,i){if(!this.hasEventListeners(e))return this;for(var s=0,a=this._tl_events,o=a[e].length;s<o;s++)if(a[e][s].action===r&&(!i||a[e][s].context===i))return a[e].splice(s,1),this;return this}off(e,r,i){return this.removeEventListener(e,r,i)}fire(e,r){if(!this.hasEventListeners(e))return this;for(var i=wt({type:e,target:this},r),s=this._tl_events[e].slice(),a=0,o=s.length;a<o;a++)s[a].action?s[a].action.call(s[a].context||this,i):ot(`no action defined for ${e} listener`);return this}}function Cs(t,e){return tre(t,e)}const tre=function(){var t=document,e=window,r=e.performance,i=r&&(r.now||r.webkitNow||r.msNow||r.mozNow),s=i?function(){return i.call(r)}:function(){return+new Date},a=t.documentElement,o=!1,l=1e3,u=/^rgb\(|#/,c=/^([+\-])=([\d\.]+)/,d=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,h=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,f=/scale\(((?:[+\-]=)?([\d\.]+))\)/,m=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,v=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,y={lineHeight:1,zoom:1,zIndex:1,opacity:1,transform:1},b=function(){var H=t.createElement("a").style,X=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],J;for(J=0;J<X.length;J++)if(X[J]in H)return X[J]}(),_=function(){return typeof t.createElement("a").style.opacity<"u"}(),w=t.defaultView&&t.defaultView.getComputedStyle?function(H,X){X=X=="transform"?b:X,X=P(X);var J=null,ee=t.defaultView.getComputedStyle(H,"");return ee&&(J=ee[X]),H.style[X]||J}:a.currentStyle?function(H,X){if(X=P(X),X=="opacity"){var J=100;try{J=H.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch{try{J=H.filters("alpha").opacity}catch{}}return J/100}var ee=H.currentStyle?H.currentStyle[X]:null;return H.style[X]||ee}:function(H,X){return H.style[P(X)]},E=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||function(H){e.setTimeout(function(){H(+new Date)},17)}}(),N=[];E(function(H){o=H>1e12!=s()>1e12});function M(H,X,J){if(Array.prototype.indexOf)return H.indexOf(X);for(J=0;J<H.length;++J)if(H[J]===X)return J}function O(H){var X,J=N.length;for(i&&H>1e12&&(H=s()),o&&(H=s()),X=J;X--;)N[X](H);N.length&&E(O)}function A(H){N.push(H)===1&&E(O)}function D(H){var X,J=M(N,H);J>=0&&(X=N.slice(J+1),N.length=J,N=N.concat(X))}function T(H,X){var J={},ee;return(ee=H.match(h))&&(J.rotate=W(ee[1],X?X.rotate:null)),(ee=H.match(f))&&(J.scale=W(ee[1],X?X.scale:null)),(ee=H.match(m))&&(J.skewx=W(ee[1],X?X.skewx:null),J.skewy=W(ee[3],X?X.skewy:null)),(ee=H.match(v))&&(J.translatex=W(ee[1],X?X.translatex:null),J.translatey=W(ee[3],X?X.translatey:null)),J}function I(H){var X="";return"rotate"in H&&(X+="rotate("+H.rotate+"deg) "),"scale"in H&&(X+="scale("+H.scale+") "),"translatex"in H&&(X+="translate("+H.translatex+"px,"+H.translatey+"px) "),"skewx"in H&&(X+="skew("+H.skewx+"deg,"+H.skewy+"deg)"),X}function x(H,X,J){return"#"+(1<<24|H<<16|X<<8|J).toString(16).slice(1)}function R(H){var X=H.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(X?x(X[1],X[2],X[3]):H).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function P(H){return H.replace(/-(.)/g,function(X,J){return J.toUpperCase()})}function j(H){return typeof H=="function"}function $(H){return Math.sin(H*Math.PI/2)}function U(H,X,J,ee,se,ce){ee=j(ee)?ee:Q.easings[ee]||$;var Se=H||l,Ee=this,ie=ce-se,ue=s(),ge=0,ke=0;function Re(_e){var V=_e-ue;if(V>Se||ge)return ce=isFinite(ce)?ce:1,ge?ke&&X(ce):X(ce),D(Re),J&&J.apply(Ee);isFinite(ce)?X(ie*ee(V/Se)+se):X(ee(V/Se))}return A(Re),{stop:function(_e){ge=1,ke=_e,_e||(J=null)}}}function Y(H,X){var J=H.length,ee=[],se,ce;for(se=0;se<J;++se)ee[se]=[H[se][0],H[se][1]];for(ce=1;ce<J;++ce)for(se=0;se<J-ce;++se)ee[se][0]=(1-X)*ee[se][0]+X*ee[parseInt(se+1,10)][0],ee[se][1]=(1-X)*ee[se][1]+X*ee[parseInt(se+1,10)][1];return[ee[0][0],ee[0][1]]}function q(H,X,J){var ee=[],se,ce,Se,Ee;for(se=0;se<6;se++)Se=Math.min(15,parseInt(X.charAt(se),16)),Ee=Math.min(15,parseInt(J.charAt(se),16)),ce=Math.floor((Ee-Se)*H+Se),ce=ce>15?15:ce<0?0:ce,ee[se]=ce.toString(16);return"#"+ee.join("")}function F(H,X,J,ee,se,ce,Se){if(se=="transform"){Se={};for(var Ee in J[ce][se])Se[Ee]=Ee in ee[ce][se]?Math.round(((ee[ce][se][Ee]-J[ce][se][Ee])*H+J[ce][se][Ee])*l)/l:J[ce][se][Ee];return Se}else return typeof J[ce][se]=="string"?q(H,J[ce][se],ee[ce][se]):(Se=Math.round(((ee[ce][se]-J[ce][se])*H+J[ce][se])*l)/l,se in y||(Se+=X[ce][se]||"px"),Se)}function W(H,X,J,ee,se){return(J=c.exec(H))?(se=parseFloat(J[2]))&&X+(J[1]=="+"?1:-1)*se:parseFloat(H)}function Q(H,X){var J=H?J=isFinite(H.length)?H:[H]:[],ee,se=X.complete,ce=X.duration,Se=X.easing,Ee=X.bezier,ie=[],ue=[],ge=[],ke=[],Re,_e;for(Ee&&(Re=X.left,_e=X.top,delete X.right,delete X.bottom,delete X.left,delete X.top),ee=J.length;ee--;){if(ie[ee]={},ue[ee]={},ge[ee]={},Ee){var V=w(J[ee],"left"),B=w(J[ee],"top"),G=[W(j(Re)?Re(J[ee]):Re||0,parseFloat(V)),W(j(_e)?_e(J[ee]):_e||0,parseFloat(B))];ke[ee]=j(Ee)?Ee(J[ee],G):Ee,ke[ee].push(G),ke[ee].unshift([parseInt(V,10),parseInt(B,10)])}for(var K in X){switch(K){case"complete":case"duration":case"easing":case"bezier":continue}var re=w(J[ee],K),le,he=j(X[K])?X[K](J[ee]):X[K];if(typeof he=="string"&&u.test(he)&&!u.test(re)){delete X[K];continue}ie[ee][K]=K=="transform"?T(re):typeof he=="string"&&u.test(he)?R(re).slice(1):parseFloat(re),ue[ee][K]=K=="transform"?T(he,ie[ee][K]):typeof he=="string"&&he.charAt(0)=="#"?R(he).slice(1):W(he,parseFloat(re)),typeof he=="string"&&(le=he.match(d))&&(ge[ee][K]=le[1])}}return U.apply(J,[ce,function(ye,Ie,Be){for(ee=J.length;ee--;){Ee&&(Be=Y(ke[ee],ye),J[ee].style.left=Be[0]+"px",J[ee].style.top=Be[1]+"px");for(var Oe in X)Ie=F(ye,ge,ie,ue,Oe,ee),Oe=="transform"?J[ee].style[b]=I(Ie):Oe=="opacity"&&!_?J[ee].style.filter="alpha(opacity="+Ie*100+")":J[ee].style[P(Oe)]=Ie}},se,Se])}return Q.tween=U,Q.getStyle=w,Q.bezier=Y,Q.transform=b,Q.parseTransform=T,Q.formatTransform=I,Q.easings={},Q}();class Ds{show(e){e||(this._el.container.style.display="block")}hide(e){this._el.container.style.display="none"}addTo(e){e.appendChild(this._el.container),this.onAdd()}removeFrom(e){e.removeChild(this._el.container),this.onRemove()}animatePosition(e,r){var i={duration:this.options.duration,easing:this.options.ease};for(var s in e)e.hasOwnProperty(s)&&(i[s]=e[s]+"px");this.animator&&this.animator.stop(),this.animator=Cs(r,i)}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}setPosition(e,r){for(var i in e)e.hasOwnProperty(i)&&(r?r.style[i]=e[i]+"px":this._el.container.style[i]=e[i]+"px")}getPosition(){return LE(this._el.container)}}let nre=class{constructor(e,r,i){this._el={drag:e,move:e},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},i&&(this._el.move=i),this.options={enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:!1,right:!1},momentum_multiplier:2e3,duration:1e3,ease:Bu},this.animator=null,this.dragevent=this.mousedrag,$i&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},wt(this.options,r)}enable(e){this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){Qe.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Qe.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(e){this.options.constraint=e}_onDragStart(e){$i?e.originalEvent?(this.data.pagex.start=e.originalEvent.touches[0].screenX,this.data.pagey.start=e.originalEvent.touches[0].screenY):(this.data.pagex.start=e.targetTouches[0].screenX,this.data.pagey.start=e.targetTouches[0].screenY):(this.data.pagex.start=e.pageX,this.data.pagey.start=e.pageY),this.options.enable.x&&(this._el.move.style.left=this.data.pagex.start-this._el.move.offsetWidth/2+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.pagey.start-this._el.move.offsetHeight/2+"px"),this.data.pos.start=LE(this._el.drag),this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),Qe.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Qe.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(e){this.data.sliding=!1,Qe.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Qe.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(e){e.preventDefault(),this.data.sliding=!0,$i?e.originalEvent?(this.data.pagex.end=e.originalEvent.touches[0].screenX,this.data.pagey.end=e.originalEvent.touches[0].screenY):(this.data.pagex.end=e.targetTouches[0].screenX,this.data.pagey.end=e.targetTouches[0].screenY):(this.data.pagex.end=e.pageX,this.data.pagey.end=e.pageY),this.data.pos.end=LE(this._el.drag),this.data.new_pos.x=-(this.data.pagex.start-this.data.pagex.end-this.data.pos.start.x),this.data.new_pos.y=-(this.data.pagey.start-this.data.pagey.end-this.data.pos.start.y),this.options.enable.x&&(this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var e={x:0,y:0,time:0},r={x:0,y:0,time:0},i=!1;e.time=(new Date().getTime()-this.data.time.start)*10,r.time=(new Date().getTime()-this.data.time.start)*10,r.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),r.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),e.x=Math.round(r.x/r.time),e.y=Math.round(r.y/r.time),this.data.new_pos.x=Math.min(this.data.pos.end.x+e.x),this.data.new_pos.y=Math.min(this.data.pos.end.y+e.y),this.options.enable.x?this.data.new_pos.x<0&&(this.data.new_pos.x=0):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,r.time<3e3&&(i=!0),Math.abs(r.x)>1e4&&(this.data.direction="left",r.x>0&&(this.data.direction="right")),Math.abs(r.y)>1e4&&(this.data.direction="up",r.y>0&&(this.data.direction="down")),this._animateMomentum(),i&&this.fire("swipe_"+this.data.direction,this.data)}_animateMomentum(){var e={x:this.data.new_pos.x,y:this.data.new_pos.y},r={duration:this.options.duration,easing:Fd};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(e.y>this.options.constraint.bottom?e.y=this.options.constraint.bottom:e.y<this.options.constraint.top&&(e.y=this.options.constraint.top)),r.top=Math.floor(e.y)+"px"),this.options.enable.x&&((this.options.constraint.left||this.options.constraint.right)&&(e.x>this.options.constraint.left?e.x=this.options.constraint.left:e.x<this.options.constraint.right&&(e.x=this.options.constraint.right)),r.left=Math.floor(e.x)+"px"),this.animator=Cs(this._el.move,r),this.fire("momentum",this.data)}};ar(or);var Qe={addListener:function(t,e,r,i){var s=RA(r),a="_tl_"+e+s;if(!t[a]){var o=function(c){return r.call(i||t,c||Qe._getEvent())};if($i&&e==="dblclick"&&this.addDoubleTapListener)this.addDoubleTapListener(t,o,s);else if("addEventListener"in t)if(e==="mousewheel")t.addEventListener("DOMMouseScroll",o,!1),t.addEventListener(e,o,!1);else if(e==="mouseenter"||e==="mouseleave"){var l=o,u=e==="mouseenter"?"mouseover":"mouseout";o=function(c){if(Qe._checkMouse(t,c))return l(c)},t.addEventListener(u,o,!1)}else t.addEventListener(e,o,!1);else"attachEvent"in t&&t.attachEvent("on"+e,o);t[a]=o}},removeListener:function(t,e,r){var i=RA(r),s="_tl_"+e+i,a=t[s];a&&($i&&e==="dblclick"&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,i):"removeEventListener"in t?e==="mousewheel"?(t.removeEventListener("DOMMouseScroll",a,!1),t.removeEventListener(e,a,!1)):e==="mouseenter"||e==="mouseleave"?t.removeEventListener(e==="mouseenter"?"mouseover":"mouseout",a,!1):t.removeEventListener(e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a),t[s]=null)},_checkMouse:function(t,e){var r=e.relatedTarget;if(!r)return!0;try{for(;r&&r!==t;)r=r.parentNode}catch{return!1}return r!==t},_getEvent:function(){var t=window.event;if(!t)for(var e=arguments.callee.caller;e&&(t=e.arguments[0],!(t&&window.Event===t.constructor));)e=e.caller;return t},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},disableClickPropagation:function(t){Qe.addListener(t,nre.START,Qe.stopPropagation),Qe.addListener(t,"click",Qe.stopPropagation),Qe.addListener(t,"dblclick",Qe.stopPropagation)},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stop:function(t){Qe.preventDefault(t),Qe.stopPropagation(t)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e}},Ms=function(){var t,e,r,i,s=[],a=s.slice,o=s.filter,l=window.document,u={},c={},d={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},h=/^\s*<(\w+|!)[^>]*>/,f=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,m=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,v=/^(?:body|html)$/i,y=/([A-Z])/g,b=["val","css","html","text","data","width","height","offset"],_=["after","prepend","before","append"],w=l.createElement("table"),E=l.createElement("tr"),N={tr:l.createElement("tbody"),tbody:w,thead:w,tfoot:w,td:E,th:E,"*":l.createElement("div")},M=/complete|loaded|interactive/,O=/^[\w-]*$/,A={},D=A.toString,T={},I,x,R=l.createElement("div"),P={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},j=Array.isArray||function(V){return V instanceof Array};T.matches=function(V,B){if(!B||!V||V.nodeType!==1)return!1;var G=V.webkitMatchesSelector||V.mozMatchesSelector||V.oMatchesSelector||V.matchesSelector;if(G)return G.call(V,B);var K,re=V.parentNode,le=!re;return le&&(re=R).appendChild(V),K=~T.qsa(re,B).indexOf(V),le&&R.removeChild(V),K};function $(V){return V==null?String(V):A[D.call(V)]||"object"}function U(V){return $(V)=="function"}function Y(V){return V!=null&&V==V.window}function q(V){return V!=null&&V.nodeType==V.DOCUMENT_NODE}function F(V){return $(V)=="object"}function W(V){return F(V)&&!Y(V)&&Object.getPrototypeOf(V)==Object.prototype}function Q(V){return typeof V.length=="number"}function H(V){return o.call(V,function(B){return B!=null})}function X(V){return V.length>0?r.fn.concat.apply([],V):V}I=function(V){return V.replace(/-+(.)?/g,function(B,G){return G?G.toUpperCase():""})};function J(V){return V.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}x=function(V){return o.call(V,function(B,G){return V.indexOf(B)==G})};function ee(V){return V in c?c[V]:c[V]=new RegExp("(^|\\s)"+V+"(\\s|$)")}function se(V,B){return typeof B=="number"&&!d[J(V)]?B+"px":B}function ce(V){var B,G;return u[V]||(B=l.createElement(V),l.body.appendChild(B),G=getComputedStyle(B,"").getPropertyValue("display"),B.parentNode.removeChild(B),G=="none"&&(G="block"),u[V]=G),u[V]}function Se(V){return"children"in V?a.call(V.children):r.map(V.childNodes,function(B){if(B.nodeType==1)return B})}T.fragment=function(V,B,G){var K,re,le;return f.test(V)&&(K=r(l.createElement(RegExp.$1))),K||(V.replace&&(V=V.replace(m,"<$1></$2>")),B===t&&(B=h.test(V)&&RegExp.$1),B in N||(B="*"),le=N[B],le.innerHTML=""+V,K=r.each(a.call(le.childNodes),function(){le.removeChild(this)})),W(G)&&(re=r(K),r.each(G,function(he,ye){b.indexOf(he)>-1?re[he](ye):re.attr(he,ye)})),K},T.Z=function(V,B){return V=V||[],V.__proto__=r.fn,V.selector=B||"",V},T.isZ=function(V){return V instanceof T.Z},T.init=function(V,B){var G;if(V)if(typeof V=="string")if(V=V.trim(),V[0]=="<"&&h.test(V))G=T.fragment(V,RegExp.$1,B),V=null;else{if(B!==t)return r(B).find(V);G=T.qsa(l,V)}else{if(U(V))return r(l).ready(V);if(T.isZ(V))return V;if(j(V))G=H(V);else if(F(V))G=[V],V=null;else if(h.test(V))G=T.fragment(V.trim(),RegExp.$1,B),V=null;else{if(B!==t)return r(B).find(V);G=T.qsa(l,V)}}else return T.Z();return T.Z(G,V)},r=function(V,B){return T.init(V,B)};function Ee(V,B,G){for(e in B)G&&(W(B[e])||j(B[e]))?(W(B[e])&&!W(V[e])&&(V[e]={}),j(B[e])&&!j(V[e])&&(V[e]=[]),Ee(V[e],B[e],G)):B[e]!==t&&(V[e]=B[e])}r.extend=function(V){var B,G=a.call(arguments,1);return typeof V=="boolean"&&(B=V,V=G.shift()),G.forEach(function(K){Ee(V,K,B)}),V},T.qsa=function(V,B){var G,K=B[0]=="#",re=!K&&B[0]==".",le=K||re?B.slice(1):B,he=O.test(le);return q(V)&&he&&K?(G=V.getElementById(le))?[G]:[]:V.nodeType!==1&&V.nodeType!==9?[]:a.call(he&&!K?re?V.getElementsByClassName(le):V.getElementsByTagName(B):V.querySelectorAll(B))};function ie(V,B){return B==null?r(V):r(V).filter(B)}r.contains=function(V,B){return V!==B&&V.contains(B)};function ue(V,B,G,K){return U(B)?B.call(V,G,K):B}function ge(V,B,G){G==null?V.removeAttribute(B):V.setAttribute(B,G)}function ke(V,B){var G=V.className,K=G&&G.baseVal!==t;if(B===t)return K?G.baseVal:G;K?G.baseVal=B:V.className=B}function Re(V){var B;try{return V&&(V=="true"||(V=="false"?!1:V=="null"?null:!/^0/.test(V)&&!isNaN(B=Number(V))?B:/^[\[\{]/.test(V)?r.parseJSON(V):V))}catch{return V}}r.type=$,r.isFunction=U,r.isWindow=Y,r.isArray=j,r.isPlainObject=W,r.isEmptyObject=function(V){var B;for(B in V)return!1;return!0},r.inArray=function(V,B,G){return s.indexOf.call(B,V,G)},r.camelCase=I,r.trim=function(V){return V==null?"":String.prototype.trim.call(V)},r.uuid=0,r.support={},r.expr={},r.map=function(V,B){var G,K=[],re,le;if(Q(V))for(re=0;re<V.length;re++)G=B(V[re],re),G!=null&&K.push(G);else for(le in V)G=B(V[le],le),G!=null&&K.push(G);return X(K)},r.each=function(V,B){var G,K;if(Q(V)){for(G=0;G<V.length;G++)if(B.call(V[G],G,V[G])===!1)return V}else for(K in V)if(B.call(V[K],K,V[K])===!1)return V;return V},r.grep=function(V,B){return o.call(V,B)},window.JSON&&(r.parseJSON=JSON.parse),r.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(V,B){A["[object "+B+"]"]=B.toLowerCase()}),r.fn={forEach:s.forEach,reduce:s.reduce,push:s.push,sort:s.sort,indexOf:s.indexOf,concat:s.concat,map:function(V){return r(r.map(this,function(B,G){return V.call(B,G,B)}))},slice:function(){return r(a.apply(this,arguments))},ready:function(V){return M.test(l.readyState)&&l.body?V(r):l.addEventListener("DOMContentLoaded",function(){V(r)},!1),this},get:function(V){return V===t?a.call(this):this[V>=0?V:V+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(V){return s.every.call(this,function(B,G){return V.call(B,G,B)!==!1}),this},filter:function(V){return U(V)?this.not(this.not(V)):r(o.call(this,function(B){return T.matches(B,V)}))},add:function(V,B){return r(x(this.concat(r(V,B))))},is:function(V){return this.length>0&&T.matches(this[0],V)},not:function(V){var B=[];if(U(V)&&V.call!==t)this.each(function(K){V.call(this,K)||B.push(this)});else{var G=typeof V=="string"?this.filter(V):Q(V)&&U(V.item)?a.call(V):r(V);this.forEach(function(K){G.indexOf(K)<0&&B.push(K)})}return r(B)},has:function(V){return this.filter(function(){return F(V)?r.contains(this,V):r(this).find(V).size()})},eq:function(V){return V===-1?this.slice(V):this.slice(V,+V+1)},first:function(){var V=this[0];return V&&!F(V)?V:r(V)},last:function(){var V=this[this.length-1];return V&&!F(V)?V:r(V)},find:function(V){var B,G=this;return typeof V=="object"?B=r(V).filter(function(){var K=this;return s.some.call(G,function(re){return r.contains(re,K)})}):this.length==1?B=r(T.qsa(this[0],V)):B=this.map(function(){return T.qsa(this,V)}),B},closest:function(V,B){var G=this[0],K=!1;for(typeof V=="object"&&(K=r(V));G&&!(K?K.indexOf(G)>=0:T.matches(G,V));)G=G!==B&&!q(G)&&G.parentNode;return r(G)},parents:function(V){for(var B=[],G=this;G.length>0;)G=r.map(G,function(K){if((K=K.parentNode)&&!q(K)&&B.indexOf(K)<0)return B.push(K),K});return ie(B,V)},parent:function(V){return ie(x(this.pluck("parentNode")),V)},children:function(V){return ie(this.map(function(){return Se(this)}),V)},contents:function(){return this.map(function(){return a.call(this.childNodes)})},siblings:function(V){return ie(this.map(function(B,G){return o.call(Se(G.parentNode),function(K){return K!==G})}),V)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(V){return r.map(this,function(B){return B[V]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=ce(this.nodeName))})},replaceWith:function(V){return this.before(V).remove()},wrap:function(V){var B=U(V);if(this[0]&&!B)var G=r(V).get(0),K=G.parentNode||this.length>1;return this.each(function(re){r(this).wrapAll(B?V.call(this,re):K?G.cloneNode(!0):G)})},wrapAll:function(V){if(this[0]){r(this[0]).before(V=r(V));for(var B;(B=V.children()).length;)V=B.first();r(V).append(this)}return this},wrapInner:function(V){var B=U(V);return this.each(function(G){var K=r(this),re=K.contents(),le=B?V.call(this,G):V;re.length?re.wrapAll(le):K.append(le)})},unwrap:function(){return this.parent().each(function(){r(this).replaceWith(r(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(V){return this.each(function(){var B=r(this);(V===t?B.css("display")=="none":V)?B.show():B.hide()})},prev:function(V){return r(this.pluck("previousElementSibling")).filter(V||"*")},next:function(V){return r(this.pluck("nextElementSibling")).filter(V||"*")},html:function(V){return arguments.length===0?this.length>0?this[0].innerHTML:null:this.each(function(B){var G=this.innerHTML;r(this).empty().append(ue(this,V,B,G))})},text:function(V){return arguments.length===0?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=V===t?"":""+V})},attr:function(V,B){var G;return typeof V=="string"&&B===t?this.length==0||this[0].nodeType!==1?t:V=="value"&&this[0].nodeName=="INPUT"?this.val():!(G=this[0].getAttribute(V))&&V in this[0]?this[0][V]:G:this.each(function(K){if(this.nodeType===1)if(F(V))for(e in V)ge(this,e,V[e]);else ge(this,V,ue(this,B,K,this.getAttribute(V)))})},removeAttr:function(V){return this.each(function(){this.nodeType===1&&ge(this,V)})},prop:function(V,B){return V=P[V]||V,B===t?this[0]&&this[0][V]:this.each(function(G){this[V]=ue(this,B,G,this[V])})},data:function(V,B){var G=this.attr("data-"+V.replace(y,"-$1").toLowerCase(),B);return G!==null?Re(G):t},val:function(V){return arguments.length===0?this[0]&&(this[0].multiple?r(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(B){this.value=ue(this,V,B,this.value)})},offset:function(V){if(V)return this.each(function(G){var K=r(this),re=ue(this,V,G,K.offset()),le=K.offsetParent().offset(),he={top:re.top-le.top,left:re.left-le.left};K.css("position")=="static"&&(he.position="relative"),K.css(he)});if(this.length==0)return null;var B=this[0].getBoundingClientRect();return{left:B.left+window.pageXOffset,top:B.top+window.pageYOffset,width:Math.round(B.width),height:Math.round(B.height)}},css:function(V,B){if(arguments.length<2){var G=this[0],K=getComputedStyle(G,"");if(!G)return;if(typeof V=="string")return G.style[I(V)]||K.getPropertyValue(V);if(j(V)){var re={};return r.each(j(V)?V:[V],function(he,ye){re[ye]=G.style[I(ye)]||K.getPropertyValue(ye)}),re}}var le="";if($(V)=="string")!B&&B!==0?this.each(function(){this.style.removeProperty(J(V))}):le=J(V)+":"+se(V,B);else for(e in V)!V[e]&&V[e]!==0?this.each(function(){this.style.removeProperty(J(e))}):le+=J(e)+":"+se(e,V[e])+";";return this.each(function(){this.style.cssText+=";"+le})},index:function(V){return V?this.indexOf(r(V)[0]):this.parent().children().indexOf(this[0])},hasClass:function(V){return V?s.some.call(this,function(B){return this.test(ke(B))},ee(V)):!1},addClass:function(V){return V?this.each(function(B){i=[];var G=ke(this),K=ue(this,V,B,G);K.split(/\s+/g).forEach(function(re){r(this).hasClass(re)||i.push(re)},this),i.length&&ke(this,G+(G?" ":"")+i.join(" "))}):this},removeClass:function(V){return this.each(function(B){if(V===t)return ke(this,"");i=ke(this),ue(this,V,B,i).split(/\s+/g).forEach(function(G){i=i.replace(ee(G)," ")}),ke(this,i.trim())})},toggleClass:function(V,B){return V?this.each(function(G){var K=r(this),re=ue(this,V,G,ke(this));re.split(/\s+/g).forEach(function(le){(B===t?!K.hasClass(le):B)?K.addClass(le):K.removeClass(le)})}):this},scrollTop:function(V){if(this.length){var B="scrollTop"in this[0];return V===t?B?this[0].scrollTop:this[0].pageYOffset:this.each(B?function(){this.scrollTop=V}:function(){this.scrollTo(this.scrollX,V)})}},scrollLeft:function(V){if(this.length){var B="scrollLeft"in this[0];return V===t?B?this[0].scrollLeft:this[0].pageXOffset:this.each(B?function(){this.scrollLeft=V}:function(){this.scrollTo(V,this.scrollY)})}},position:function(){if(this.length){var V=this[0],B=this.offsetParent(),G=this.offset(),K=v.test(B[0].nodeName)?{top:0,left:0}:B.offset();return G.top-=parseFloat(r(V).css("margin-top"))||0,G.left-=parseFloat(r(V).css("margin-left"))||0,K.top+=parseFloat(r(B[0]).css("border-top-width"))||0,K.left+=parseFloat(r(B[0]).css("border-left-width"))||0,{top:G.top-K.top,left:G.left-K.left}}},offsetParent:function(){return this.map(function(){for(var V=this.offsetParent||l.body;V&&!v.test(V.nodeName)&&r(V).css("position")=="static";)V=V.offsetParent;return V})}},r.fn.detach=r.fn.remove,["width","height"].forEach(function(V){var B=V.replace(/./,function(G){return G[0].toUpperCase()});r.fn[V]=function(G){var K,re=this[0];return G===t?Y(re)?re["inner"+B]:q(re)?re.documentElement["scroll"+B]:(K=this.offset())&&K[V]:this.each(function(le){re=r(this),re.css(V,ue(this,G,le,re[V]()))})}});function _e(V,B){B(V);for(var G in V.childNodes)_e(V.childNodes[G],B)}return _.forEach(function(V,B){var G=B%2;r.fn[V]=function(){var K,re=r.map(arguments,function(ye){return K=$(ye),K=="object"||K=="array"||ye==null?ye:T.fragment(ye)}),le,he=this.length>1;return re.length<1?this:this.each(function(ye,Ie){le=G?Ie:Ie.parentNode,Ie=B==0?Ie.nextSibling:B==1?Ie.firstChild:B==2?Ie:null,re.forEach(function(Be){if(he)Be=Be.cloneNode(!0);else if(!le)return r(Be).remove();_e(le.insertBefore(Be,Ie),function(Oe){Oe.nodeName!=null&&Oe.nodeName.toUpperCase()==="SCRIPT"&&(!Oe.type||Oe.type==="text/javascript")&&!Oe.src&&window.eval.call(window,Oe.innerHTML)})})})},r.fn[G?V+"To":"insert"+(B?"Before":"After")]=function(K){return r(K)[V](this),this}}),T.Z.prototype=r.fn,T.uniq=x,T.deserializeValue=Re,r.zepto=T,r}();window.Zepto=Ms;window.$===void 0&&(window.$=Ms);(function(t){t.zepto.qsa;var e=1,r,i=Array.prototype.slice,s=t.isFunction,a=function(T){return typeof T=="string"},o={},l={},u="onfocusin"in window,c={focus:"focusin",blur:"focusout"},d={mouseenter:"mouseover",mouseleave:"mouseout"};l.click=l.mousedown=l.mouseup=l.mousemove="MouseEvents";function h(T){return T._zid||(T._zid=e++)}function f(T,I,x,R){if(I=m(I),I.ns)var P=v(I.ns);return(o[h(T)]||[]).filter(function(j){return j&&(!I.e||j.e==I.e)&&(!I.ns||P.test(j.ns))&&(!x||h(j.fn)===h(x))&&(!R||j.sel==R)})}function m(T){var I=(""+T).split(".");return{e:I[0],ns:I.slice(1).sort().join(" ")}}function v(T){return new RegExp("(?:^| )"+T.replace(" "," .* ?")+"(?: |$)")}function y(T,I){return T.del&&!u&&T.e in c||!!I}function b(T){return d[T]||u&&c[T]||T}function _(T,I,x,R,P,j,$){var U=h(T),Y=o[U]||(o[U]=[]);I.split(/\s/).forEach(function(q){if(q=="ready")return t(document).ready(x);var F=m(q);F.fn=x,F.sel=P,F.e in d&&(x=function(Q){var H=Q.relatedTarget;if(!H||H!==this&&!t.contains(this,H))return F.fn.apply(this,arguments)}),F.del=j;var W=j||x;F.proxy=function(Q){if(Q=A(Q),!Q.isImmediatePropagationStopped()){Q.data=R;var H=W.apply(T,Q._args==r?[Q]:[Q].concat(Q._args));return H===!1&&(Q.preventDefault(),Q.stopPropagation()),H}},F.i=Y.length,Y.push(F),"addEventListener"in T&&T.addEventListener(b(F.e),F.proxy,y(F,$))})}function w(T,I,x,R,P){var j=h(T);(I||"").split(/\s/).forEach(function($){f(T,$,x,R).forEach(function(U){delete o[j][U.i],"removeEventListener"in T&&T.removeEventListener(b(U.e),U.proxy,y(U,P))})})}t.event={add:_,remove:w},t.proxy=function(T,I){if(s(T)){var x=function(){return T.apply(I,arguments)};return x._zid=h(T),x}else{if(a(I))return t.proxy(T[I],T);throw new TypeError("expected function")}},t.fn.bind=function(T,I,x){return this.on(T,I,x)},t.fn.unbind=function(T,I){return this.off(T,I)},t.fn.one=function(T,I,x,R){return this.on(T,I,x,R,1)};var E=function(){return!0},N=function(){return!1},M=/^([A-Z]|returnValue$|layer[XY]$)/,O={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function A(T,I){return(I||!T.isDefaultPrevented)&&(I||(I=T),t.each(O,function(x,R){var P=I[x];T[x]=function(){return this[R]=E,P&&P.apply(I,arguments)},T[R]=N}),(I.defaultPrevented!==r?I.defaultPrevented:"returnValue"in I?I.returnValue===!1:I.getPreventDefault&&I.getPreventDefault())&&(T.isDefaultPrevented=E)),T}function D(T){var I,x={originalEvent:T};for(I in T)!M.test(I)&&T[I]!==r&&(x[I]=T[I]);return A(x,T)}t.fn.delegate=function(T,I,x){return this.on(I,T,x)},t.fn.undelegate=function(T,I,x){return this.off(I,T,x)},t.fn.live=function(T,I){return t(document.body).delegate(this.selector,T,I),this},t.fn.die=function(T,I){return t(document.body).undelegate(this.selector,T,I),this},t.fn.on=function(T,I,x,R,P){var j,$,U=this;return T&&!a(T)?(t.each(T,function(Y,q){U.on(Y,I,x,q,P)}),U):(!a(I)&&!s(R)&&R!==!1&&(R=x,x=I,I=r),(s(x)||x===!1)&&(R=x,x=r),R===!1&&(R=N),U.each(function(Y,q){P&&(j=function(F){return w(q,F.type,R),R.apply(this,arguments)}),I&&($=function(F){var W,Q=t(F.target).closest(I,q).get(0);if(Q&&Q!==q)return W=t.extend(D(F),{currentTarget:Q,liveFired:q}),(j||R).apply(Q,[W].concat(i.call(arguments,1)))}),_(q,T,R,x,I,$||j)}))},t.fn.off=function(T,I,x){var R=this;return T&&!a(T)?(t.each(T,function(P,j){R.off(P,I,j)}),R):(!a(I)&&!s(x)&&x!==!1&&(x=I,I=r),x===!1&&(x=N),R.each(function(){w(this,T,x,I)}))},t.fn.trigger=function(T,I){return T=a(T)||t.isPlainObject(T)?t.Event(T):A(T),T._args=I,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(T):t(this).triggerHandler(T,I)})},t.fn.triggerHandler=function(T,I){var x,R;return this.each(function(P,j){x=D(a(T)?t.Event(T):T),x._args=I,x.target=j,t.each(f(j,T.type||T),function($,U){if(R=U.proxy(x),x.isImmediatePropagationStopped())return!1})}),R},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(T){t.fn[T]=function(I){return I?this.bind(T,I):this.trigger(T)}}),["focus","blur"].forEach(function(T){t.fn[T]=function(I){return I?this.bind(T,I):this.each(function(){try{this[T]()}catch{}}),this}}),t.Event=function(T,I){a(T)||(I=T,T=I.type);var x=document.createEvent(l[T]||"Events"),R=!0;if(I)for(var P in I)P=="bubbles"?R=!!I[P]:x[P]=I[P];return x.initEvent(T,R,!0),A(x)}})(Ms);(function(t){var e=0,r=window.document,i,s,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,o=/^(?:text|application)\/javascript/i,l=/^(?:text|application)\/xml/i,u="application/json",c="text/html",d=/^\s*$/;function h(I,x,R){var P=t.Event(x);return t(I).trigger(P,R),!P.isDefaultPrevented()}function f(I,x,R,P){if(I.global)return h(x||r,R,P)}t.active=0;function m(I){I.global&&t.active++===0&&f(I,null,"ajaxStart")}function v(I){I.global&&!--t.active&&f(I,null,"ajaxStop")}function y(I,x){var R=x.context;if(x.beforeSend.call(R,I,x)===!1||f(x,R,"ajaxBeforeSend",[I,x])===!1)return!1;f(x,R,"ajaxSend",[I,x])}function b(I,x,R,P){var j=R.context,$="success";R.success.call(j,I,$,x),P&&P.resolveWith(j,[I,$,x]),f(R,j,"ajaxSuccess",[x,R,I]),w($,x,R)}function _(I,x,R,P,j){var $=P.context;P.error.call($,R,x,I),j&&j.rejectWith($,[R,x,I]),f(P,$,"ajaxError",[R,P,I||x]),w(x,R,P)}function w(I,x,R){var P=R.context;R.complete.call(P,x,I),f(R,P,"ajaxComplete",[x,R]),v(R)}function E(){}t.ajaxJSONP=function(I,x){if(!("type"in I))return t.ajax(I);var R=I.jsonpCallback,P=(t.isFunction(R)?R():R)||"jsonp"+ ++e,j=r.createElement("script"),$=window[P],U,Y=function(W){t(j).triggerHandler("error",W||"abort")},q={abort:Y},F;return x&&x.promise(q),t(j).on("load error",function(W,Q){clearTimeout(F),t(j).off().remove(),W.type=="error"||!U?_(null,Q||"error",q,I,x):b(U[0],q,I,x),window[P]=$,U&&t.isFunction($)&&$(U[0]),$=U=void 0}),y(q,I)===!1?(Y("abort"),q):(window[P]=function(){U=arguments},j.src=I.url.replace(/\?(.+)=\?/,"?$1="+P),r.head.appendChild(j),I.timeout>0&&(F=setTimeout(function(){Y("timeout")},I.timeout)),q)},t.ajaxSettings={type:"GET",beforeSend:E,success:E,error:E,complete:E,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:u,xml:"application/xml, text/xml",html:c,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0};function N(I){return I&&(I=I.split(";",2)[0]),I&&(I==c?"html":I==u?"json":o.test(I)?"script":l.test(I)&&"xml")||"text"}function M(I,x){return x==""?I:(I+"&"+x).replace(/[&?]{1,2}/,"?")}function O(I){I.processData&&I.data&&t.type(I.data)!="string"&&(I.data=t.param(I.data,I.traditional)),I.data&&(!I.type||I.type.toUpperCase()=="GET")&&(I.url=M(I.url,I.data),I.data=void 0)}t.ajax=function(I){var x=t.extend({},I||{}),R=t.Deferred&&t.Deferred();for(i in t.ajaxSettings)x[i]===void 0&&(x[i]=t.ajaxSettings[i]);m(x),x.crossDomain||(x.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(x.url)&&RegExp.$2!=window.location.host),x.url||(x.url=window.location.toString()),O(x),x.cache===!1&&(x.url=M(x.url,"_="+Date.now()));var P=x.dataType,j=/\?.+=\?/.test(x.url);if(P=="jsonp"||j)return j||(x.url=M(x.url,x.jsonp?x.jsonp+"=?":x.jsonp===!1?"":"callback=?")),t.ajaxJSONP(x,R);var $=x.accepts[P],U={},Y=function(X,J){U[X.toLowerCase()]=[X,J]},q=/^([\w-]+:)\/\//.test(x.url)?RegExp.$1:window.location.protocol,F=x.xhr(),W=F.setRequestHeader,Q;if(R&&R.promise(F),x.crossDomain||Y("X-Requested-With","XMLHttpRequest"),Y("Accept",$||"*/*"),($=x.mimeType||$)&&($.indexOf(",")>-1&&($=$.split(",",2)[0]),F.overrideMimeType&&F.overrideMimeType($)),(x.contentType||x.contentType!==!1&&x.data&&x.type.toUpperCase()!="GET")&&Y("Content-Type",x.contentType||"application/x-www-form-urlencoded"),x.headers)for(s in x.headers)Y(s,x.headers[s]);if(F.setRequestHeader=Y,F.onreadystatechange=function(){if(F.readyState==4){F.onreadystatechange=E,clearTimeout(Q);var X,J=!1;if(F.status>=200&&F.status<300||F.status==304||F.status==0&&q=="file:"){P=P||N(x.mimeType||F.getResponseHeader("content-type")),X=F.responseText;try{P=="script"?(0,eval)(X):P=="xml"?X=F.responseXML:P=="json"&&(X=d.test(X)?null:t.parseJSON(X))}catch(ee){J=ee}J?_(J,"parsererror",F,x,R):b(X,F,x,R)}else _(F.statusText||null,F.status?"error":"abort",F,x,R)}},y(F,x)===!1)return F.abort(),_(null,"abort",F,x,R),F;if(x.xhrFields)for(s in x.xhrFields)F[s]=x.xhrFields[s];var H="async"in x?x.async:!0;F.open(x.type,x.url,H,x.username,x.password);for(s in U)W.apply(F,U[s]);return x.timeout>0&&(Q=setTimeout(function(){F.onreadystatechange=E,F.abort(),_(null,"timeout",F,x,R)},x.timeout)),F.send(x.data?x.data:null),F};function A(I,x,R,P){var j=!t.isFunction(x);return{url:I,data:j?x:void 0,success:j?t.isFunction(R)?R:void 0:x,dataType:j&&P||R}}t.get=function(I,x,R,P){return t.ajax(A.apply(null,arguments))},t.post=function(I,x,R,P){var j=A.apply(null,arguments);return j.type="POST",t.ajax(j)},t.getJSON=function(I,x,R){var P=A.apply(null,arguments);return P.dataType="json",t.ajax(P)},t.fetchJSON=function(I){var x=new XMLHttpRequest;return new Promise(function(R,P){x.onreadystatechange=function(){try{if(x.readyState!==4)return;if(x.status>=200&&x.status<300){var j=JSON.parse(x.responseText);R(j)}else P({status:x.status,statusText:x.statusText})}catch($){P({status:400,statusText:`Error fetching JSON from ${I}: ${$}`})}},x.open("GET",I,!0),x.send()})},t.fn.load=function(I,x,R){if(!this.length)return this;var P=this,j=I.split(/\s/),$,U=A(I,x,R),Y=U.success;return j.length>1&&(U.url=j[0],$=j[1]),U.success=function(q){P.html($?t("<div>").html(q.replace(a,"")).find($):q),Y&&Y.apply(P,arguments)},t.ajax(U),this};var D=encodeURIComponent;function T(I,x,R,P){var j,$=t.isArray(x),U=t.isPlainObject(x);t.each(x,function(Y,q){j=t.type(q),P&&(Y=R?P:P+"["+(U||j=="object"||j=="array"?Y:"")+"]"),!P&&$?I.add(q.name,q.value):j=="array"||!R&&j=="object"?T(I,q,R,Y):I.add(Y,q)})}t.param=function(I,x){var R=[];return R.add=function(P,j){this.push(D(P)+"="+D(j))},T(R,I,x),R.join("&").replace(/%20/g,"+")}})(Ms);(function(t){t.fn.serializeArray=function(){var e=[],r;return t([].slice.call(this.get(0).elements)).each(function(){r=t(this);var i=r.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&i!="submit"&&i!="reset"&&i!="button"&&(i!="radio"&&i!="checkbox"||this.checked)&&e.push({name:r.attr("name"),value:r.val()})}),e},t.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(r){e.push(encodeURIComponent(r.name)+"="+encodeURIComponent(r.value))}),e.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var r=t.Event("submit");this.eq(0).trigger(r),r.isDefaultPrevented()||this.get(0).submit()}return this}})(Ms);(function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(r,i){return r=r||[],t.extend(r,t.fn),r.selector=i||"",r.__Z=!0,r},isZ:function(r){return t.type(r)==="array"&&"__Z"in r}});try{getComputedStyle(void 0)}catch{var e=getComputedStyle;window.getComputedStyle=function(i,s){try{return e(i,s)}catch{return null}}}})(Ms);const Em=Ms.getJSON,zu=Ms.ajax,zg=Ms.fetchJSON,Ai=[["millisecond",1,function(t){}],["second",1e3,function(t){t.setMilliseconds(0)}],["minute",1e3*60,function(t){t.setSeconds(0)}],["hour",1e3*60*60,function(t){t.setMinutes(0)}],["day",1e3*60*60*24,function(t){t.setHours(0)}],["month",1e3*60*60*24*30,function(t){t.setDate(1)}],["year",1e3*60*60*24*365,function(t){t.setMonth(0)}],["decade",1e3*60*60*24*365*10,function(t){var e=t.getFullYear();t.setFullYear(e-e%10)}],["century",1e3*60*60*24*365*100,function(t){var e=t.getFullYear();t.setFullYear(e-e%100)}],["millennium",1e3*60*60*24*365*1e3,function(t){var e=t.getFullYear();t.setFullYear(e-e%1e3)}]],to=["millisecond","second","minute","hour","day","month","year"],PA=/^([\+-]?\d+?)(-\d{2}?)?(-\d{2}?)?$/,rre=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,DA={base:{millisecond:"time_short",second:"time",minute:"time_no_seconds_small_date",hour:"time_no_seconds_small_date",day:"full",month:"month",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"},short:{millisecond:"time_short",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"}},qg=xm.extend({initialize:function(t,e,r){typeof t=="number"?this.data={format:"yyyy mmmm",date_obj:new Date(t)}:Date==t.constructor?this.data={format:"yyyy mmmm",date_obj:t}:(this.data=JSON.parse(JSON.stringify(t)),this._createDateObj()),t.format&&!e&&(e=t.format),this._setFormat(e,r)},setDateFormat:function(t){this.data.format=t},getDisplayDate:function(t,e){if(this.data.display_date)return this.data.display_date;t||(t=Xr.fallback),t.constructor!=Xr&&(ot("First argument to getDisplayDate must be type Language"),t=Xr.fallback);var r=e||this.data.format;return t.formatDate(this.data.date_obj,r)},getMillisecond:function(){return this.getTime()},getTime:function(){return this.data.date_obj.getTime()},isBefore:function(t){if(!this.data.date_obj.constructor==t.data.date_obj.constructor)throw new at("date_compare_err");return"isBefore"in this.data.date_obj?this.data.date_obj.isBefore(t.data.date_obj):this.data.date_obj<t.data.date_obj},isAfter:function(t){if(!this.data.date_obj.constructor==t.data.date_obj.constructor)throw new at("date_compare_err");return"isAfter"in this.data.date_obj?this.data.date_obj.isAfter(t.data.date_obj):this.data.date_obj>t.data.date_obj},floor:function(t){for(var e=new Date(this.data.date_obj.getTime()),r=0;r<Ai.length;r++)if(Ai[r][2](e),Ai[r][0]==t)return new qg(e);throw new at("invalid_scale_err",t)},_getDateData:function(){var t={year:0,month:1,day:1,hour:0,minute:0,second:0,millisecond:0};wt(t,this.data);for(var e in to){var r=Nr(t[to[e]]);if(!r.match(/^-?\d*$/))throw new at("invalid_date_err",to[e]+" = '"+t[to[e]]+"'");var i=parseInt(t[to[e]]);isNaN(i)&&(i=e==4||e==5?1:0),t[to[e]]=i}return t.month>0&&t.month<=12&&(t.month=t.month-1),t},_createDateObj:function(){var t=this._getDateData();this.data.date_obj=new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond),this.data.date_obj.getFullYear()!=t.year&&this.data.date_obj.setFullYear(t.year)},findBestFormat:function(t){for(var e=to,r=0;r<e.length;r++)if(this.data[e[r]])return t?t in DA||(t="short"):t="base",DA[t][e[r]];return""},_setFormat:function(t,e){t?this.data.format=t:this.data.format||(this.data.format=this.findBestFormat()),e?this.data.format_short=e:this.data.format_short||(this.data.format_short=this.findBestFormat(!0))},getFullYear:function(){return this.data.date_obj.getFullYear()}});function MA(t){if(t.match(PA)){var e=t.match(PA).slice(1),r={year:e[0].replace("+","")};return e[1]&&(r.month=e[1].replace("-","")),e[2]&&(r.day=e[2].replace("-","")),r}if(t.match(rre))return cls.parseISODate(t);if(t.match(/^\-?\d+$/))return{year:t};var i={};if(t.match(/\d+\/\d+\/\d+/)){var s=t.match(/\d+\/\d+\/\d+/)[0];t=Nr(t.replace(s,""));var a=s.split("/");i.month=a[0],i.day=a[1],i.year=a[2]}if(t.match(/\d+\/\d+/)){var s=t.match(/\d+\/\d+/)[0];t=Nr(t.replace(s,""));var a=s.split("/");i.month=a[0],i.year=a[1]}if(t.match(":")){var o=t.split(":");if(i.hour=o[0],i.minute=o[1],o[2]){let l=o[2].split(".");i.second=l[0],i.millisecond=l[1]}}return i}const $d=xm.extend({initialize:function(t){if(this.year=parseInt(t),isNaN(this.year))throw new at("invalid_year_err",t)},isBefore:function(t){return this.year<t.year},isAfter:function(t){return this.year>t.year},getTime:function(){return this.year}}),jE=1e6,VE=jE*10,FE=VE*10,LA=FE*10;function Ws(t){return function(e){var r=e.getTime();return new $d(Math.floor(r/t)*t)}}const wp=[["year",1,new Ws(1)],["decade",10,new Ws(10)],["century",100,new Ws(100)],["millennium",1e3,new Ws(1e3)],["age",jE,new Ws(jE)],["epoch",VE,new Ws(VE)],["era",FE,new Ws(FE)],["eon",LA,new Ws(LA)]],Hg=qg.extend({initialize:function(t,e,r){$d==t.constructor?this.data={date_obj:t}:(this.data=JSON.parse(JSON.stringify(t)),this._createDateObj()),t.format&&!e&&(e=t.format),this._setFormat(e,r)},_createDateObj:function(){var t=this._getDateData();this.data.date_obj=new $d(t.year)},floor:function(t){for(var e=0;e<wp.length;e++)if(wp[e][0]==t){var r=wp[e][2](this.data.date_obj);return new Hg(r)}throw new at("invalid_scale_err",t)},getFullYear:function(){return this.data.date_obj.getTime()}}),OA=new RegExp(/\$\{(.+?)\}/g);class Xr{constructor(e,r){for(let a in Qs.en)this[a]=Qs.en[a];if(e&&typeof e=="string"&&e!="en"){var i=e;if(!(i in Qs)){console.log(`Expected language ${i} to be cached. Did you call the constructor directly?`);var s=fV(i,r);zg(s).then(a=>{Qs[i]=a}).catch(a=>{console.log(`Error loading language [${s}] ${a.statusText} [${a.status}]`)})}wt(this,Qs[i])}}mergeData(e){for(k in Qs.en)e[k]&&(typeof this[k]=="object"?wt(e[k],this[k]):this[k]=e[k])}formatBigYear(e,r){var i=e.year,s=this.bigdateformats[r]||this.bigdateformats.fallback;if(s){for(var a=0;a<s.length;a++){var o=s[a];if(Math.abs(i/o[0])>1)return jA(Math.abs(i/o[0]),o[1])}return i.toString()}else return ot("Language file dateformats missing cosmological. Falling back."),jA(i,r)}_(e,r){let i=this.messages[e]||Xr.fallback.messages[e]||e;if(i.match(OA)){if(!r)throw new at("template_message_without_context");for(let s of i.matchAll(OA)){if(!(s[1]in r))throw new at("template_message_without_context");i=i.replace(s[0],r[s[1]])}}return i}formatDate(e,r){return e.constructor==Date?this.formatJSDate(e,r):e.constructor==$d?this.formatBigYear(e,r):e.data&&e.data.date_obj?this.formatDate(e.data.date_obj,r):(ot("Unfamiliar date presented for formatting"),e.toString())}formatJSDate(e,r){var i=this,s=function(N,M){var O=i.period_labels[N];if(O)var N=M<12?O[0]:O[1];return"<span class='tl-timeaxis-timesuffix'>"+N+"</span>"},a=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,o=/[^-+\dA-Z]/g;r||(r="full");var l=this.dateformats[r]||Xr.fallback.dateformats[r];l||(l=r);var u="get",c=e[u+"Date"](),d=e[u+"Day"](),h=e[u+"Month"](),f=e[u+"FullYear"](),m=e[u+"Hours"](),v=e[u+"Minutes"](),y=e[u+"Seconds"](),b=e[u+"Milliseconds"](),_=e.getTimezoneOffset(),w={d:c,dd:es(c),ddd:this.date.day_abbr[d],dddd:this.date.day[d],m:h+1,mm:es(h+1),mmm:this.date.month_abbr[h],mmmm:this.date.month[h],yy:String(f).slice(2),yyyy:f<0&&this.has_negative_year_modifier()?Math.abs(f):f,h:m%12||12,hh:es(m%12||12),H:m,HH:es(m),M:v,MM:es(v),s:y,ss:es(y),l:es(b,3),L:es(b>99?Math.round(b/10):b),t:s("t",m),tt:s("tt",m),T:s("T",m),TT:s("TT",m),Z:(String(e).match(a)||[""]).pop().replace(o,""),o:(_>0?"-":"+")+es(Math.floor(Math.abs(_)/60)*100+Math.abs(_)%60,4),S:["th","st","nd","rd"][c%10>3?0:(c%100-c%10!=10)*c%10]},E=l.replace(Xr.DATE_FORMAT_TOKENS,function(N){return N in w?w[N]:N.slice(1,N.length-1)});return this._applyEra(E,f)}has_negative_year_modifier(){return!!(this.era_labels.negative_year.prefix||this.era_labels.negative_year.suffix)}_applyEra(e,r){var i=r<0?this.era_labels.negative_year:this.era_labels.positive_year,s="";return i.prefix&&(s+="<span>"+i.prefix+"</span> "),s+=e,i.suffix&&(s+=" <span>"+i.suffix+"</span>"),s}}async function ire(t,e){var r=fV(t,e);try{if(!Qs[t]){let i=await zg(r);Qs[t]=i}return new Xr(t,e)}catch(i){return console.log(`Error loading language [${r}] ${i.statusText}`),null}}function fV(t,e){if(/\.json$/.test(t))var r=t;else{var i="/locale/"+t+".json";/\/$/.test(e)&&(i=i.substr(1));var r=e+i}return r}function jA(t,e){if(e.match(/%(\.(\d+))?f/)){var r=e.match(/%(\.(\d+))?f/),i=r[0];return r[2]&&(t=t.toFixed(r[2])),e.replace(i,t)}return e}Xr.fallback={messages:{}};Xr.DATE_FORMAT_TOKENS=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g;var Qs={en:{name:"English (built-in)",lang:"en",api:{wikipedia:"en"},messages:{loading:"Loading",wikipedia:"From Wikipedia, the free encyclopedia",error:"Error",return_to_title:"Return to Title",go_to_end:"Go to the last slide",loading_content:"Loading Content",loading_timeline:"Loading Timeline... ",swipe_to_navigate:"Swipe to Navigate<br><span class='tl-button'>OK</span>",zoom_in:"Zoom in",zoom_out:"Zoom out",unknown_read_err:"An unexpected error occurred trying to read your spreadsheet data",invalid_url_err:"Unable to read Timeline data. Make sure your URL is for a Google Spreadsheet or a Timeline JSON file.",network_err:"Unable to read your Google Spreadsheet. Make sure you have published it to the web.",missing_start_date_err:"Missing start_date",invalid_start_time_without_date:"Invalid configuration: time cannot be used without date.",invalid_end_time_without_date:"Invalid configuration: end time cannot be used without end date.",date_compare_err:"Can't compare timeline date objects on different scales",invalid_scale_err:"Invalid scale",invalid_date_err:"Invalid date: month, day and year must be numbers.",invalid_separator_error:"Invalid time: misuse of : or . as separator.",invalid_hour_err:"Invalid time (hour)",invalid_minute_err:"Invalid time (minute)",invalid_second_err:"Invalid time (second)",invalid_fractional_err:"Invalid time (fractional seconds)",invalid_second_fractional_err:"Invalid time (seconds and fractional seconds)",invalid_year_err:"Invalid year",flickr_notfound_err:"Photo not found or private",flickr_invalidurl_err:"Invalid Flickr URL",imgur_invalidurl_err:"Invalid Imgur URL",twitter_load_err:"Unable to load Tweet",twitterembed_invalidurl_err:"Invalid Twitter Embed url",wikipedia_load_err:"Unable to load Wikipedia entry",wikipedia_image_load_err:"Unable to load Wikipedia image data",spotify_invalid_url:"Invalid Spotify URL",invalid_rgb_err:"Invalid RGB argument",time_scale_scale_err:"Don't know how to get date from time for scale",axis_helper_no_options_err:"Axis helper must be configured with options",axis_helper_scale_err:"No AxisHelper available for scale",invalid_integer_option:"Invalid option value—must be a whole number.",instagram_bad_request:"Invalid or private Instagram URL",template_message_without_context:"Required variables not provided for template translation message",aria_label_timeline:"Timeline",aria_label_timeline_navigation:"Timeline navigation",aria_label_timeline_content:"Timeline content",aria_label_zoomin:"Show less than ${start} to ${end}",aria_label_zoomout:"Show more than ${start} to ${end}"},date:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbr:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_abbr:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."]},era_labels:{positive_year:{prefix:"",suffix:""},negative_year:{prefix:"",suffix:"BCE"}},period_labels:{t:["a","p"],tt:["am","pm"],T:["A","P"],TT:["AM","PM"]},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time:"h:MM:ss TT' <small>'mmmm d',' yyyy'</small>'",time_short:"h:MM:ss TT",time_no_seconds_short:"h:MM TT",time_no_minutes_short:"h TT",time_no_seconds_small_date:"h:MM TT' <small>'mmmm d',' yyyy'</small>'",time_milliseconds:"l",full_long:"mmm d',' yyyy 'at' h:MM TT",full_long_small_date:"h:MM TT' <small>mmm d',' yyyy'</small>'"},bigdateformats:{fallback:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]],compact:[[1e9,"%.2f bya"],[1e6,"%.1f mya"],[1e3,"%.1f kya"],[1,"%f years ago"]],verbose:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]]}}};let mT=new Xr;Xr.fallback=mT;class Ls{setLanguage(e){this.language=e}getLanguage(){if(this.language){if(typeof this.language=="object")return this.language;ot(`I18NMixins.getLanguage: this.language should be object, but is ${typeof this.language}`)}return mT}_(e,r){return this.getLanguage()._(e,r)}}class Wg{constructor(e,r,i){i&&this.setLanguage(i),this._el={parent:{},container:{},message_container:{},loading_icon:{},message:{}},this.options={width:600,height:600,message_class:"tl-message",message_icon_class:"tl-loading-icon"},this.container=e,wt(this.options,r),this._el.container=Te("div",this.options.message_class),e&&(e.appendChild(this._el.container),this._el.parent=e),this.animator={},this._initLayout(),this._initEvents()}updateMessage(e){e?this._el.message.innerHTML=e:this._el.message.innerHTML=this._("loading"),!this._el.parent.atributes&&this.container.attributes&&(this.container.appendChild(this._el.container),this._el.parent=this.container)}updateDisplay(e,r){}_onMouseClick(){this.fire("clicked",this.options)}_onRemove(){this._el.parent={}}_initLayout(){this._el.message_container=Te("div","tl-message-container",this._el.container),this._el.loading_icon=Te("div",this.options.message_icon_class,this._el.message_container),this._el.message=Te("div","tl-message-content",this._el.message_container),this.updateMessage()}_initEvents(){Qe.addListener(this._el.container,"click",this._onMouseClick,this),Qe.addListener(this,"removed",this._onRemove,this)}}ar(Wg,Ls,or,Ds);function Pf(t,r){var r=r||"start_date";t.sort(function(i,s){return i[r].isBefore(s[r])?-1:i[r].isAfter(s[r])?1:0})}function VA(t){var e={hour:null,minute:null,second:null,millisecond:null},r=null,i=t.match(/(\s*[AaPp]\.?[Mm]\.?\s*)$/);i&&(r=Nr(i[0]),t=Nr(t.substring(0,t.lastIndexOf(r))));var s=[],a=t.match(/^\s*(\d{1,2})(\d{2})\s*$/);if(a?s=a.slice(1):(s=t.split(":"),s.length==1&&(s=t.split("."))),s.length>4)throw new at("invalid_separator_error");let o=s[0];if(e.hour=parseInt(o),r&&r.toLowerCase()[0]=="p"&&e.hour!=12?e.hour+=12:r&&r.toLowerCase()[0]=="a"&&e.hour==12&&(e.hour=0),isNaN(e.hour)||e.hour<0||e.hour>23)throw new at("invalid_hour_err",o);if(s.length>1){let c=s[1];if(e.minute=parseInt(c),isNaN(e.minute))throw new at("invalid_minute_err",c)}if(s.length>2){var l=s[2].split(/[\.,]/);if(s=l.concat(s.slice(3)),s.length>2)throw new at("invalid_second_fractional_err");if(e.second=parseInt(s[0]),isNaN(e.second))throw new at("invalid_second_err",s[0]);if(s.length==2){var u=parseInt(s[1]);if(isNaN(u))throw new at("invalid_fractional_err",s[1]);e.millisecond=100*u}}return e}const sre=new RegExp("(^-?\\d+$|^$)");function FA(t){try{return Object.keys(t).forEach(e=>{let r=t[e];if(r&&r.match&&!r.match(sre))throw`invalid value ${r} for ${e}`}),!0}catch{return!1}}const $A={human:qg,cosmological:Hg};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:pV,setPrototypeOf:UA,isFrozen:are,getPrototypeOf:ore,getOwnPropertyDescriptor:lre}=Object;let{freeze:nr,seal:ei,create:mV}=Object,{apply:$E,construct:UE}=typeof Reflect<"u"&&Reflect;nr||(nr=function(e){return e});ei||(ei=function(e){return e});$E||($E=function(e,r,i){return e.apply(r,i)});UE||(UE=function(e,r){return new e(...r)});const Df=rr(Array.prototype.forEach),ure=rr(Array.prototype.lastIndexOf),BA=rr(Array.prototype.pop),fc=rr(Array.prototype.push),cre=rr(Array.prototype.splice),bp=rr(String.prototype.toLowerCase),Ky=rr(String.prototype.toString),zA=rr(String.prototype.match),pc=rr(String.prototype.replace),dre=rr(String.prototype.indexOf),hre=rr(String.prototype.trim),ai=rr(Object.prototype.hasOwnProperty),Qn=rr(RegExp.prototype.test),mc=fre(TypeError);function rr(t){return function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return $E(t,e,i)}}function fre(t){return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return UE(t,r)}}function et(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:bp;UA&&UA(t,null);let i=e.length;for(;i--;){let s=e[i];if(typeof s=="string"){const a=r(s);a!==s&&(are(e)||(e[i]=a),s=a)}t[s]=!0}return t}function pre(t){for(let e=0;e<t.length;e++)ai(t,e)||(t[e]=null);return t}function ao(t){const e=mV(null);for(const[r,i]of pV(t))ai(t,r)&&(Array.isArray(i)?e[r]=pre(i):i&&typeof i=="object"&&i.constructor===Object?e[r]=ao(i):e[r]=i);return e}function gc(t,e){for(;t!==null;){const i=lre(t,e);if(i){if(i.get)return rr(i.get);if(typeof i.value=="function")return rr(i.value)}t=ore(t)}function r(){return null}return r}const qA=nr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Yy=nr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Xy=nr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),mre=nr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Qy=nr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),gre=nr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),HA=nr(["#text"]),WA=nr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Jy=nr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),GA=nr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Mf=nr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),vre=ei(/\{\{[\w\W]*|[\w\W]*\}\}/gm),yre=ei(/<%[\w\W]*|[\w\W]*%>/gm),_re=ei(/\$\{[\w\W]*/gm),wre=ei(/^data-[\-\w.\u00B7-\uFFFF]+$/),bre=ei(/^aria-[\-\w]+$/),gV=ei(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),xre=ei(/^(?:\w+script|data):/i),Ere=ei(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),vV=ei(/^html$/i),Sre=ei(/^[a-z][.\w]*(-[.\w]+)+$/i);var KA=Object.freeze({__proto__:null,ARIA_ATTR:bre,ATTR_WHITESPACE:Ere,CUSTOM_ELEMENT:Sre,DATA_ATTR:wre,DOCTYPE_NAME:vV,ERB_EXPR:yre,IS_ALLOWED_URI:gV,IS_SCRIPT_OR_DATA:xre,MUSTACHE_EXPR:vre,TMPLIT_EXPR:_re});const vc={element:1,text:3,progressingInstruction:7,comment:8,document:9},Tre=function(){return typeof window>"u"?null:window},Ire=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const s="data-tt-policy-suffix";r&&r.hasAttribute(s)&&(i=r.getAttribute(s));const a="dompurify"+(i?"#"+i:"");try{return e.createPolicy(a,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},YA=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function yV(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Tre();const e=je=>yV(je);if(e.version="3.2.4",e.removed=[],!t||!t.document||t.document.nodeType!==vc.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const i=r,s=i.currentScript,{DocumentFragment:a,HTMLTemplateElement:o,Node:l,Element:u,NodeFilter:c,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:f,trustedTypes:m}=t,v=u.prototype,y=gc(v,"cloneNode"),b=gc(v,"remove"),_=gc(v,"nextSibling"),w=gc(v,"childNodes"),E=gc(v,"parentNode");if(typeof o=="function"){const je=r.createElement("template");je.content&&je.content.ownerDocument&&(r=je.content.ownerDocument)}let N,M="";const{implementation:O,createNodeIterator:A,createDocumentFragment:D,getElementsByTagName:T}=r,{importNode:I}=i;let x=YA();e.isSupported=typeof pV=="function"&&typeof E=="function"&&O&&O.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:R,ERB_EXPR:P,TMPLIT_EXPR:j,DATA_ATTR:$,ARIA_ATTR:U,IS_SCRIPT_OR_DATA:Y,ATTR_WHITESPACE:q,CUSTOM_ELEMENT:F}=KA;let{IS_ALLOWED_URI:W}=KA,Q=null;const H=et({},[...qA,...Yy,...Xy,...Qy,...HA]);let X=null;const J=et({},[...WA,...Jy,...GA,...Mf]);let ee=Object.seal(mV(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),se=null,ce=null,Se=!0,Ee=!0,ie=!1,ue=!0,ge=!1,ke=!0,Re=!1,_e=!1,V=!1,B=!1,G=!1,K=!1,re=!0,le=!1;const he="user-content-";let ye=!0,Ie=!1,Be={},Oe=null;const ze=et({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let lt=null;const vt=et({},["audio","video","img","source","image","track"]);let At=null;const Ke=et({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ne="http://www.w3.org/1998/Math/MathML",oe="http://www.w3.org/2000/svg",pe="http://www.w3.org/1999/xhtml";let be=pe,Le=!1,Ce=null;const We=et({},[Ne,oe,pe],Ky);let yt=et({},["mi","mo","mn","ms","mtext"]),ft=et({},["annotation-xml"]);const gn=et({},["title","style","font","a","script"]);let Xt=null;const xt=["application/xhtml+xml","text/html"],jn="text/html";let St=null,vn=null;const Fr=r.createElement("form"),Si=function(Z){return Z instanceof RegExp||Z instanceof Function},Vs=function(){let Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(vn&&vn===Z)){if((!Z||typeof Z!="object")&&(Z={}),Z=ao(Z),Xt=xt.indexOf(Z.PARSER_MEDIA_TYPE)===-1?jn:Z.PARSER_MEDIA_TYPE,St=Xt==="application/xhtml+xml"?Ky:bp,Q=ai(Z,"ALLOWED_TAGS")?et({},Z.ALLOWED_TAGS,St):H,X=ai(Z,"ALLOWED_ATTR")?et({},Z.ALLOWED_ATTR,St):J,Ce=ai(Z,"ALLOWED_NAMESPACES")?et({},Z.ALLOWED_NAMESPACES,Ky):We,At=ai(Z,"ADD_URI_SAFE_ATTR")?et(ao(Ke),Z.ADD_URI_SAFE_ATTR,St):Ke,lt=ai(Z,"ADD_DATA_URI_TAGS")?et(ao(vt),Z.ADD_DATA_URI_TAGS,St):vt,Oe=ai(Z,"FORBID_CONTENTS")?et({},Z.FORBID_CONTENTS,St):ze,se=ai(Z,"FORBID_TAGS")?et({},Z.FORBID_TAGS,St):{},ce=ai(Z,"FORBID_ATTR")?et({},Z.FORBID_ATTR,St):{},Be=ai(Z,"USE_PROFILES")?Z.USE_PROFILES:!1,Se=Z.ALLOW_ARIA_ATTR!==!1,Ee=Z.ALLOW_DATA_ATTR!==!1,ie=Z.ALLOW_UNKNOWN_PROTOCOLS||!1,ue=Z.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ge=Z.SAFE_FOR_TEMPLATES||!1,ke=Z.SAFE_FOR_XML!==!1,Re=Z.WHOLE_DOCUMENT||!1,B=Z.RETURN_DOM||!1,G=Z.RETURN_DOM_FRAGMENT||!1,K=Z.RETURN_TRUSTED_TYPE||!1,V=Z.FORCE_BODY||!1,re=Z.SANITIZE_DOM!==!1,le=Z.SANITIZE_NAMED_PROPS||!1,ye=Z.KEEP_CONTENT!==!1,Ie=Z.IN_PLACE||!1,W=Z.ALLOWED_URI_REGEXP||gV,be=Z.NAMESPACE||pe,yt=Z.MATHML_TEXT_INTEGRATION_POINTS||yt,ft=Z.HTML_INTEGRATION_POINTS||ft,ee=Z.CUSTOM_ELEMENT_HANDLING||{},Z.CUSTOM_ELEMENT_HANDLING&&Si(Z.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ee.tagNameCheck=Z.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Z.CUSTOM_ELEMENT_HANDLING&&Si(Z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ee.attributeNameCheck=Z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Z.CUSTOM_ELEMENT_HANDLING&&typeof Z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ee.allowCustomizedBuiltInElements=Z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ge&&(Ee=!1),G&&(B=!0),Be&&(Q=et({},HA),X=[],Be.html===!0&&(et(Q,qA),et(X,WA)),Be.svg===!0&&(et(Q,Yy),et(X,Jy),et(X,Mf)),Be.svgFilters===!0&&(et(Q,Xy),et(X,Jy),et(X,Mf)),Be.mathMl===!0&&(et(Q,Qy),et(X,GA),et(X,Mf))),Z.ADD_TAGS&&(Q===H&&(Q=ao(Q)),et(Q,Z.ADD_TAGS,St)),Z.ADD_ATTR&&(X===J&&(X=ao(X)),et(X,Z.ADD_ATTR,St)),Z.ADD_URI_SAFE_ATTR&&et(At,Z.ADD_URI_SAFE_ATTR,St),Z.FORBID_CONTENTS&&(Oe===ze&&(Oe=ao(Oe)),et(Oe,Z.FORBID_CONTENTS,St)),ye&&(Q["#text"]=!0),Re&&et(Q,["html","head","body"]),Q.table&&(et(Q,["tbody"]),delete se.tbody),Z.TRUSTED_TYPES_POLICY){if(typeof Z.TRUSTED_TYPES_POLICY.createHTML!="function")throw mc('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Z.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw mc('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=Z.TRUSTED_TYPES_POLICY,M=N.createHTML("")}else N===void 0&&(N=Ire(m,s)),N!==null&&typeof M=="string"&&(M=N.createHTML(""));nr&&nr(Z),vn=Z}},Zt=et({},[...Yy,...Xy,...mre]),Qa=et({},[...Qy,...gre]),Yi=function(Z){let me=E(Z);(!me||!me.tagName)&&(me={namespaceURI:be,tagName:"template"});const Me=bp(Z.tagName),mt=bp(me.tagName);return Ce[Z.namespaceURI]?Z.namespaceURI===oe?me.namespaceURI===pe?Me==="svg":me.namespaceURI===Ne?Me==="svg"&&(mt==="annotation-xml"||yt[mt]):!!Zt[Me]:Z.namespaceURI===Ne?me.namespaceURI===pe?Me==="math":me.namespaceURI===oe?Me==="math"&&ft[mt]:!!Qa[Me]:Z.namespaceURI===pe?me.namespaceURI===oe&&!ft[mt]||me.namespaceURI===Ne&&!yt[mt]?!1:!Qa[Me]&&(gn[Me]||!Zt[Me]):!!(Xt==="application/xhtml+xml"&&Ce[Z.namespaceURI]):!1},yn=function(Z){fc(e.removed,{element:Z});try{E(Z).removeChild(Z)}catch{b(Z)}},Fs=function(Z,me){try{fc(e.removed,{attribute:me.getAttributeNode(Z),from:me})}catch{fc(e.removed,{attribute:null,from:me})}if(me.removeAttribute(Z),Z==="is")if(B||G)try{yn(me)}catch{}else try{me.setAttribute(Z,"")}catch{}},el=function(Z){let me=null,Me=null;if(V)Z="<remove></remove>"+Z;else{const jt=zA(Z,/^[\r\n\t ]+/);Me=jt&&jt[0]}Xt==="application/xhtml+xml"&&be===pe&&(Z='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Z+"</body></html>");const mt=N?N.createHTML(Z):Z;if(be===pe)try{me=new f().parseFromString(mt,Xt)}catch{}if(!me||!me.documentElement){me=O.createDocument(be,"template",null);try{me.documentElement.innerHTML=Le?M:mt}catch{}}const en=me.body||me.documentElement;return Z&&Me&&en.insertBefore(r.createTextNode(Me),en.childNodes[0]||null),be===pe?T.call(me,Re?"html":"body")[0]:Re?me.documentElement:en},ri=function(Z){return A.call(Z.ownerDocument||Z,Z,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Ja=function(Z){return Z instanceof h&&(typeof Z.nodeName!="string"||typeof Z.textContent!="string"||typeof Z.removeChild!="function"||!(Z.attributes instanceof d)||typeof Z.removeAttribute!="function"||typeof Z.setAttribute!="function"||typeof Z.namespaceURI!="string"||typeof Z.insertBefore!="function"||typeof Z.hasChildNodes!="function")},tl=function(Z){return typeof l=="function"&&Z instanceof l};function Vn(je,Z,me){Df(je,Me=>{Me.call(e,Z,me,vn)})}const $s=function(Z){let me=null;if(Vn(x.beforeSanitizeElements,Z,null),Ja(Z))return yn(Z),!0;const Me=St(Z.nodeName);if(Vn(x.uponSanitizeElement,Z,{tagName:Me,allowedTags:Q}),Z.hasChildNodes()&&!tl(Z.firstElementChild)&&Qn(/<[/\w]/g,Z.innerHTML)&&Qn(/<[/\w]/g,Z.textContent)||Z.nodeType===vc.progressingInstruction||ke&&Z.nodeType===vc.comment&&Qn(/<[/\w]/g,Z.data))return yn(Z),!0;if(!Q[Me]||se[Me]){if(!se[Me]&&Xi(Me)&&(ee.tagNameCheck instanceof RegExp&&Qn(ee.tagNameCheck,Me)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(Me)))return!1;if(ye&&!Oe[Me]){const mt=E(Z)||Z.parentNode,en=w(Z)||Z.childNodes;if(en&&mt){const jt=en.length;for(let un=jt-1;un>=0;--un){const Fn=y(en[un],!0);Fn.__removalCount=(Z.__removalCount||0)+1,mt.insertBefore(Fn,_(Z))}}}return yn(Z),!0}return Z instanceof u&&!Yi(Z)||(Me==="noscript"||Me==="noembed"||Me==="noframes")&&Qn(/<\/no(script|embed|frames)/i,Z.innerHTML)?(yn(Z),!0):(ge&&Z.nodeType===vc.text&&(me=Z.textContent,Df([R,P,j],mt=>{me=pc(me,mt," ")}),Z.textContent!==me&&(fc(e.removed,{element:Z.cloneNode()}),Z.textContent=me)),Vn(x.afterSanitizeElements,Z,null),!1)},Us=function(Z,me,Me){if(re&&(me==="id"||me==="name")&&(Me in r||Me in Fr))return!1;if(!(Ee&&!ce[me]&&Qn($,me))){if(!(Se&&Qn(U,me))){if(!X[me]||ce[me]){if(!(Xi(Z)&&(ee.tagNameCheck instanceof RegExp&&Qn(ee.tagNameCheck,Z)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(Z))&&(ee.attributeNameCheck instanceof RegExp&&Qn(ee.attributeNameCheck,me)||ee.attributeNameCheck instanceof Function&&ee.attributeNameCheck(me))||me==="is"&&ee.allowCustomizedBuiltInElements&&(ee.tagNameCheck instanceof RegExp&&Qn(ee.tagNameCheck,Me)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(Me))))return!1}else if(!At[me]){if(!Qn(W,pc(Me,q,""))){if(!((me==="src"||me==="xlink:href"||me==="href")&&Z!=="script"&&dre(Me,"data:")===0&&lt[Z])){if(!(ie&&!Qn(Y,pc(Me,q,"")))){if(Me)return!1}}}}}}return!0},Xi=function(Z){return Z!=="annotation-xml"&&zA(Z,F)},_r=function(Z){Vn(x.beforeSanitizeAttributes,Z,null);const{attributes:me}=Z;if(!me||Ja(Z))return;const Me={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:X,forceKeepAttr:void 0};let mt=me.length;for(;mt--;){const en=me[mt],{name:jt,namespaceURI:un,value:Fn}=en,wr=St(jt);let Rt=jt==="value"?Fn:hre(Fn);if(Me.attrName=wr,Me.attrValue=Rt,Me.keepAttr=!0,Me.forceKeepAttr=void 0,Vn(x.uponSanitizeAttribute,Z,Me),Rt=Me.attrValue,le&&(wr==="id"||wr==="name")&&(Fs(jt,Z),Rt=he+Rt),ke&&Qn(/((--!?|])>)|<\/(style|title)/i,Rt)){Fs(jt,Z);continue}if(Me.forceKeepAttr||(Fs(jt,Z),!Me.keepAttr))continue;if(!ue&&Qn(/\/>/i,Rt)){Fs(jt,Z);continue}ge&&Df([R,P,j],rl=>{Rt=pc(Rt,rl," ")});const Qi=St(Z.nodeName);if(Us(Qi,wr,Rt)){if(N&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!un)switch(m.getAttributeType(Qi,wr)){case"TrustedHTML":{Rt=N.createHTML(Rt);break}case"TrustedScriptURL":{Rt=N.createScriptURL(Rt);break}}try{un?Z.setAttributeNS(un,jt,Rt):Z.setAttribute(jt,Rt),Ja(Z)?yn(Z):BA(e.removed)}catch{}}}Vn(x.afterSanitizeAttributes,Z,null)},nl=function je(Z){let me=null;const Me=ri(Z);for(Vn(x.beforeSanitizeShadowDOM,Z,null);me=Me.nextNode();)Vn(x.uponSanitizeShadowNode,me,null),$s(me),_r(me),me.content instanceof a&&je(me.content);Vn(x.afterSanitizeShadowDOM,Z,null)};return e.sanitize=function(je){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},me=null,Me=null,mt=null,en=null;if(Le=!je,Le&&(je="<!-->"),typeof je!="string"&&!tl(je))if(typeof je.toString=="function"){if(je=je.toString(),typeof je!="string")throw mc("dirty is not a string, aborting")}else throw mc("toString is not a function");if(!e.isSupported)return je;if(_e||Vs(Z),e.removed=[],typeof je=="string"&&(Ie=!1),Ie){if(je.nodeName){const Fn=St(je.nodeName);if(!Q[Fn]||se[Fn])throw mc("root node is forbidden and cannot be sanitized in-place")}}else if(je instanceof l)me=el("<!---->"),Me=me.ownerDocument.importNode(je,!0),Me.nodeType===vc.element&&Me.nodeName==="BODY"||Me.nodeName==="HTML"?me=Me:me.appendChild(Me);else{if(!B&&!ge&&!Re&&je.indexOf("<")===-1)return N&&K?N.createHTML(je):je;if(me=el(je),!me)return B?null:K?M:""}me&&V&&yn(me.firstChild);const jt=ri(Ie?je:me);for(;mt=jt.nextNode();)$s(mt),_r(mt),mt.content instanceof a&&nl(mt.content);if(Ie)return je;if(B){if(G)for(en=D.call(me.ownerDocument);me.firstChild;)en.appendChild(me.firstChild);else en=me;return(X.shadowroot||X.shadowrootmode)&&(en=I.call(i,en,!0)),en}let un=Re?me.outerHTML:me.innerHTML;return Re&&Q["!doctype"]&&me.ownerDocument&&me.ownerDocument.doctype&&me.ownerDocument.doctype.name&&Qn(vV,me.ownerDocument.doctype.name)&&(un="<!DOCTYPE "+me.ownerDocument.doctype.name+`>
`+un),ge&&Df([R,P,j],Fn=>{un=pc(un,Fn," ")}),N&&K?N.createHTML(un):un},e.setConfig=function(){let je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Vs(je),_e=!0},e.clearConfig=function(){vn=null,_e=!1},e.isValidAttribute=function(je,Z,me){vn||Vs({});const Me=St(je),mt=St(Z);return Us(Me,mt,me)},e.addHook=function(je,Z){typeof Z=="function"&&fc(x[je],Z)},e.removeHook=function(je,Z){if(Z!==void 0){const me=ure(x[je],Z);return me===-1?void 0:cre(x[je],me,1)[0]}return BA(x[je])},e.removeHooks=function(je){x[je]=[]},e.removeAllHooks=function(){x=YA()},e}var Gg=yV();const Cre={text:["headline","text"],media:["caption","credit"]},kre={start_date:["display_date"],end_date:["display_date"],slide:["display_date","group"],date:["display_date"]};Gg.addHook("afterSanitizeAttributes",function(t){if(t.nodeName=="A"&&"href"in t){"target"in t.attributes||t.setAttribute("target","_blank");let e=t.attributes.rel;e?e.value.indexOf("noopener")==-1&&t.setAttribute("rel",`noopener ${e.value}`):t.setAttribute("rel","noopener")}});function XA(t,e,r){Object.keys(r).forEach(i=>{var s=i=="slide"?t:t[i];s&&r[i].forEach(a=>{typeof s[a]<"u"&&(s[a]=e(s[a]))})})}function Nre(t){return Gg.sanitize(t,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder","target"]})}class uo{constructor(e){if(this.title="",this.scale="",this.events=[],this.eras=[],this.event_dict={},this.messages={errors:[],warnings:[]},typeof e=="object"&&e.events){if(this.scale=e.scale,this.events=[],this._ensureValidScale(e.events),e.title){var r=this._assignID(e.title);this._tidyFields(e.title),this.title=e.title,this.event_dict[r]=this.title}for(var i=0;i<e.events.length;i++)try{this.addEvent(e.events[i],!0)}catch(s){this.logError(s)}e.eras&&e.eras.forEach((s,a)=>{try{this.addEra(s)}catch(o){this.logError("Era "+a+": "+o)}}),Pf(this.events),Pf(this.eras)}}logError(e){ot(`logError: ${e}`),this.messages.errors.push(e)}getErrors(e){return e?this.messages.errors.join(e):this.messages.errors}validate(){(typeof this.events>"u"||typeof this.events.length>"u"||this.events.length==0)&&this.logError("Timeline configuration has no events.");for(var e=0;e<this.eras.length;e++)if(typeof this.eras[e].start_date>"u"||typeof this.eras[e].end_date>"u"){var r;this.eras[e].headline?r=this.eras[e].headline:r="era "+(e+1),this.logError("All eras must have start and end dates. ["+r+"]")}}isValid(){return this.messages.errors.length==0}addEvent(e,r){var i=this._assignID(e);return typeof e.start_date>"u"?(ot("Missing start date, skipping event"),console.log(e),null):(this._processDates(e),this._tidyFields(e),this.events.push(e),this.event_dict[i]=e,r||Pf(this.events),i)}addEra(e){var r=this._assignID(e);if(typeof e.start_date>"u")throw new at("missing_start_date_err",r);this._processDates(e),this._tidyFields(e),this.eras.push({start_date:e.start_date,end_date:e.end_date,headline:e.text.headline})}_assignID(e){var r=e.unique_id;return Nr(r)||(r=e.text?Wy(e.text.headline):null),e.unique_id=Bne(this.event_dict,r),e.unique_id}_makeUniqueIdentifiers(e,r){for(var i=[e],s=0;s<r.length;s++)Nr(r[s].unique_id)&&(r[s].unique_id=Wy(r[s].unique_id),i.indexOf(r[s].unique_id)==-1?i.push(r[s].unique_id):r[s].unique_id="");if(i.length!=r.length+1){for(var s=0;s<r.length;s++)if(!r[s].unique_id){var a=r[s].text?Wy(r[s].text.headline):null;a||(a=Lo(6)),i.indexOf(a)!=-1&&(a=a+"-"+s),i.push(a),r[s].unique_id=a}}}_ensureValidScale(e){if(!this.scale){this.scale="human";for(var r=0;r<e.length;r++){if(e[r].scale=="cosmological"){this.scale="cosmological";break}if(e[r].start_date&&typeof e[r].start_date.year<"u"){var i=new Hg(e[r].start_date),s=i.data.date_obj.year;if(s<-271820||s>275759){this.scale="cosmological";break}}}ot(`Determining scale dynamically: ${this.scale}`)}var a=$A[this.scale];a||this.logError("Don't know how to process dates on scale "+this.scale)}_processDates(e){var r=$A[this.scale];if(!(e.start_date instanceof r)){var i=e.start_date;if(e.start_date=new r(i),typeof e.end_date<"u"&&!(e.end_date instanceof r)){var s=e.end_date,a=!0;for(let o in i)a=a&&i[o]==s[o];a?(ot("End date same as start date is redundant; dropping end date"),delete e.end_date):e.end_date=new r(s)}}}getEarliestDate(){var e=this.events[0].start_date;return this.eras&&this.eras.length>0&&this.eras[0].start_date.isBefore(e)?this.eras[0].start_date:e}getLatestDate(){for(var e=[],r=0;r<this.events.length;r++)this.events[r].end_date?e.push({date:this.events[r].end_date}):e.push({date:this.events[r].start_date});for(var r=0;r<this.eras.length;r++)this.eras[r].end_date?e.push({date:this.eras[r].end_date}):e.push({date:this.eras[r].start_date});return Pf(e,"date"),e.slice(-1)[0].date}_tidyFields(e){function r(i,s,a){a||(a=""),i.hasOwnProperty(s)||(i[s]=a)}e.group&&(e.group=Nr(e.group)),e.text||(e.text={}),r(e.text,"text"),r(e.text,"headline"),XA(e,Nre,Cre),XA(e,Zne,kre)}}function Are(t,e){return t==null?"":(e=e||`
`,t.charAt(t.length-e.length)!==e?t:t.substring(0,t.length-e.length))}async function Rre(t){return new Promise((e,r)=>{if(t.data){var i=_V(wV(t.data,t),t);i.useMemoryStore=!0,e(i)}else t.url&&window.fetch(t.url,{mode:"cors"}).then(function(s){if(s.status!=200){s.headers.get("content-type")=="application/json"?s.text().then(a=>{r(JSON.parse(a))}):r({status_code:s.status,message:`Error fetching CSV: [${s.status} ${s.statusText}]`});return}return s.text?s.text():s}).then(function(s){if(s){var a=Mre(s,t);a.useMemoryStore=!0,e(a)}}).catch(s=>{r({status_code:500,message:`Error fetching CSV: ${s}`})})})}function _V(t,e){return e=e||{},e.noHeaderRow!==!0&&t.length>0?{fields:t[0].map((r,i)=>r&&r.trim?r.trim():`untitled${i}`),records:t.slice(1)}:{records:t}}function Pre(t){var e={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var r in t)r==="trim"?e.skipinitialspace=t.trim:e[r.toLowerCase()]=t[r];return e}function wV(t,e){(!e||e&&!e.lineterminator)&&(t=Dre(t,e));var r=Pre(e);t=Are(t,r.lineterminator);var i="",s=!1,a=!1,o="",l=[],u=[],c,d;for(d=function(h){return a!==!0&&(h===""?h=null:r.skipinitialspace===!0&&(h=h.trim())),h},c=0;c<t.length;c+=1)i=t.charAt(c),s===!1&&(i===r.delimiter||i===r.lineterminator)?(o=d(o),l.push(o),i===r.lineterminator&&(u.push(l),l=[]),o="",a=!1):i!==r.quotechar?o+=i:s?t.charAt(c+1)===r.quotechar?(o+=r.quotechar,c+=1):s=!1:(s=!0,a=!0);return o=d(o),l.push(o),u.push(l),r.skipinitialrows&&(u=u.slice(r.skipinitialrows)),u}function Dre(t,e){return e&&!e.lineterminator?t.replace(/(\r\n|\n|\r)/gm,`
`):t}function Mre(t,e){let r=_V(wV(t,e)),i=[];return r.records.forEach(s=>{let a={};r.fields.forEach((o,l)=>a[o]=s[l]),i.push(a)}),i}function hl(t){if(t)return t.replace(/[\s,]+/g,"")}function Lre(t){let e={key:null,worksheet:0};var r=/\bkey=([-_A-Za-z0-9]+)&?/i,i=/docs.google.com\/spreadsheets(.*?)\/d\//;if(t.match(r))e.key=t.match(r)[1];else if(t.match(i)){var s=t.search(i)+t.match(i)[0].length,a=t.substr(s);e.key=a.split("/")[0],t.match(/\?gid=(\d+)/)&&(e.worksheet=t.match(/\?gid=(\d+)/)[1])}else t.match(/^\b[-_A-Za-z0-9]+$/)&&(e.key=t);return e.key?e:null}function Ore(t){return typeof t!="string"?"":t.match(/^(https?:)?\/\/?/)?{url:t}:{color:t}}function jre(t){let e={};Object.keys(t).forEach(i=>{e[i]=Nr(t[i])});var r={media:{caption:e["Media Caption"]||"",credit:e["Media Credit"]||"",url:e.Media||"",thumbnail:e["Media Thumbnail"]||"",alt:e["Alt Text"]||""},text:{headline:e.Headline||"",text:e.Text||""},display_date:e["Display Date"]||"",group:e.Group||e.Tag||"",background:Ore(e.Background),type:e.Type||""};if(Object.keys(e).includes("Start Date")||Object.keys(e).includes("End Date"))e["Start Date"]&&(r.start_date=MA(e["Start Date"])),e["End Date"]&&(r.end_date=MA(e["End Date"]));else{if(e.Year&&(r.start_date={year:hl(e.Year),month:hl(e.Month)||"",day:hl(e.Day)||""}),e["End Year"]&&(r.end_date={year:hl(e["End Year"])||"",month:hl(e["End Month"])||"",day:hl(e["End Day"])||""}),e.Time)if(r.start_date)wt(r.start_date,VA(e.Time));else throw new at("invalid_start_time_without_date");if(e["End Time"])if(r.end_date)wt(r.end_date,VA(e["End Time"]));else throw new at("invalid_end_time_without_date");if(r.start_date&&!FA(r.start_date))throw new at("invalid_date_err");if(r.end_date&&!FA(r.end_date))throw new at("invalid_date_err")}return r}async function Vre(t,e){let r=[];t=Fre(t),await Rre({url:`${e}${t}`}).then(s=>{r=s}).catch(s=>{if(s.proxy_err_code=="response_not_csv")throw new at("Timeline could not read the data for your timeline. Make sure you have published it to the web.");let a="undefined error";throw Array.isArray(s.message)?a=s.message.join("<br>"):a=String(s.message),new at(a)});let i={events:[],errors:[],warnings:[],eras:[]};return r.forEach((s,a)=>{try{if(!zne(s)){let o=jre(s);Bre(o,i)}}catch(o){if(o.constructor==at)i.errors.push(o);else{o.message&&(o=o.message);let l=s.Headline||a;i.errors.push(o+`[${l}]`)}}}),i}function Fre(t){if(t=t.trim(),t.match(/^[a-zA-Z0-9-_]+$/))return`https://docs.google.com/spreadsheets/d/${t}/pub?output=csv`;if(t.startsWith("https://docs.google.com/spreadsheets/")){if(t.match(/\/pub\?output=csv$/))return t;let e=new URL(t),r=new URLSearchParams(e.search);r.set("output","csv"),r.get("gid")&&r.set("single","true"),e.search=`?${r.toString()}`;let i=e.pathname.substr(0,e.pathname.lastIndexOf("/"));return e.pathname=`${i}/pub`,e.toString()}throw new at("invalid_url_err",t)}async function $re(t,e){if(!e.sheets_proxy)throw new at("Proxy option must be set to read data from Google");var r=await Vre(t,e.sheets_proxy);if(r)return r}async function Ure(t,e){let r=null,i={};if(typeof e=="function"?r=e:typeof e=="object"&&(i=e,r=e.callback,typeof i.callback=="function"&&(r=i.callback)),!r)throw new at("Second argument to makeConfig must be either a function or an object which includes a 'callback' property with a 'function' type value");var s,a,o=Lre(t);if(o){try{a=await $re(t,i)}catch(u){s=new uo,u.name=="NetworkError"?s.logError(new at("network_err")):u.name=="TLError"?s.logError(u):s.logError(new at("unknown_read_err",u.name)),r(s);return}if(s=new uo(a),a.errors)for(var l=0;l<a.errors.length;l++)s.logError(a.errors[l]);r(s)}else zu({url:t,dataType:"json",success:function(u){try{s=new uo(u)}catch(c){s=new uo,s.logError(c)}r(s)},error:function(u,c,d){if(s=new uo,c=="parsererror")var d=new at("invalid_url_err");else var d=new at("unknown_read_err",c);s.logError(d),r(s)}})}function Bre(t,e){var r="event";typeof t.type<"u"&&(r=t.type,delete t.type),r=="title"?e.title?(e.warnings.push("Multiple title slides detected."),e.events.push(t)):e.title=t:r=="era"?e.eras.push(t):e.events.push(t)}class zre{constructor(e){if(e)this.scale=e.scale,this.minor=e.minor,this.major=e.major;else throw new at("axis_helper_no_options_err")}getPixelsPerTick(e){return e*this.minor.factor}getMajorTicks(e){return this._getTicks(e,this.major)}getMinorTicks(e){return this._getTicks(e,this.minor)}_getTicks(e,r){for(var i=e._scaled_padding*r.factor,s=e._earliest-i,a=e._latest+i,o=[],l=s;l<a;l+=r.factor)o.push(e.getDateFromTime(l).floor(r.name));return{name:r.name,ticks:o}}}var BE={},bV=function(t,e){BE[t]=[];for(var r=0;r<e.length-1;r++){var i=e[r],s=e[r+1];BE[t].push(new zre({scale:i[3],minor:{name:i[0],factor:i[1]},major:{name:s[0],factor:s[1]}}))}};bV("human",Ai);bV("cosmological",wp);function qre(t,e){typeof e!="number"&&(e=100);var r=t.getScale(),i=BE[r];if(!i)throw new at("axis_helper_scale_err",r);for(var s=null,a=0;a<i.length;a++){var o=i[a],l=o.getPixelsPerTick(t._pixels_per_milli);if(l>e){if(s==null)return o;var u=Math.abs(e-l),c=Math.abs(e-l);return u<c?o:s}s=o}return i[i.length-1]}const Hre={millisecond:"time_milliseconds",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"compact",epoch:"compact",era:"compact",eon:"compact",eon2:"compact"};class QA{constructor(e,r){var i=e.events;this._scale=e.scale,r=wt({display_width:500,screen_multiplier:3,max_rows:null},r),this._display_width=r.display_width,this._screen_multiplier=r.screen_multiplier,this._pixel_width=this._screen_multiplier*this._display_width,this._group_labels=void 0,this._positions=[],this._pixels_per_milli=0,this._earliest=e.getEarliestDate().getTime(),this._latest=e.getLatestDate().getTime(),this._span_in_millis=this._latest-this._earliest,this._span_in_millis<=0&&(this._span_in_millis=this._computeDefaultSpan(e)),this._average=this._span_in_millis/i.length,this._pixels_per_milli=this.getPixelWidth()/this._span_in_millis,this._axis_helper=qre(this),this._scaled_padding=1/this.getPixelsPerTick()*(this._display_width/2),this._computePositionInfo(i,r.max_rows)}_computeDefaultSpan(e){if(e.scale=="human"){for(var r={},i=0;i<e.events.length;i++){var s=e.events[i].start_date.findBestFormat();r[s]=r[s]?r[s]+1:1}for(var i=Ai.length-1;i>=0;i--)if(r.hasOwnProperty(Ai[i][0])){var a=Ai[Ai.length-1];return Ai[i+1]&&(a=Ai[i+1]),a[1]}return 365*24*60*60*1e3}return 2e5}getGroupLabels(){return this._group_labels||[]}getScale(){return this._scale}getNumberOfRows(){return this._number_of_rows}getPixelWidth(){return this._pixel_width}getPosition(e){return(e-this._earliest)*this._pixels_per_milli}getPositionInfo(e){return this._positions[e]}getPixelsPerTick(){return this._axis_helper.getPixelsPerTick(this._pixels_per_milli)}getTicks(){return{major:this._axis_helper.getMajorTicks(this),minor:this._axis_helper.getMinorTicks(this)}}getDateFromTime(e){if(this._scale=="human")return new qg(e);if(this._scale=="cosmological")return new Hg(new $d(e));throw new at("time_scale_scale_err",this._scale)}getMajorScale(){return this._axis_helper.major.name}getMinorScale(){return this._axis_helper.minor.name}_assessGroups(e){for(var r=[],i=!1,s=0;s<e.length;s++)e[s].group&&(r.indexOf(e[s].group)<0?r.push(e[s].group):i=!0);return r.length&&i&&r.push(""),r}_computeRowInfo(e,r){for(var i=[],s=0,a=0;a<e.length;a++){var o=e[a],l=[];delete o.row;for(var u=0;u<i.length;u++)if(l.push(i[u].end-o.start),l[u]<=0){o.row=u,i[u]=o;break}if(typeof o.row>"u")if(r===null)o.row=i.length,i.push(o);else if(r>0)o.row=i.length,i.push(o),r--;else{var c=Math.min.apply(null,l),d=l.indexOf(c);o.row=d,o.end>i[d].end&&(i[d]=o),s++}}return{n_rows:i.length,n_overlaps:s}}_computePositionInfo(e,r,i){i=i||100;for(var s=[],a=!1,o=0;o<e.length;o++){var l={start:this.getPosition(e[o].start_date.getTime())};if(this._positions.push(l),typeof e[o].end_date<"u"){var u=this.getPosition(e[o].end_date.getTime());l.width=u-l.start,l.width>i?l.end=l.start+l.width:l.end=l.start+i}else l.width=i,l.end=l.start+i;e[o].group?s.indexOf(e[o].group)<0&&s.push(e[o].group):a=!0}if(s.length){a&&s.push("");for(var d=[],o=0;o<s.length;o++)d[o]={label:s[o],idx:o,positions:[],n_rows:1,n_overlaps:0};for(var o=0;o<this._positions.length;o++){var l=this._positions[o];l.group=s.indexOf(e[o].group||""),l.row=0;for(var h=d[l.group],f=h.positions.length-1;f>=0;f--)h.positions[f].end>l.start&&h.n_overlaps++;h.positions.push(l)}for(var m=s.length;;){var v=Math.max(0,r-m);if(!v||(d.sort(function(w,E){return w.n_overlaps>E.n_overlaps?-1:w.n_overlaps<E.n_overlaps?1:w.idx-E.idx}),!d[0].n_overlaps))break;for(var m=0,o=0;o<d.length;o++){var h=d[o];if(h.n_overlaps&&v){var y=this._computeRowInfo(h.positions,h.n_rows+1);h.n_rows=y.n_rows,h.n_overlaps=y.n_overlaps,v--}m+=h.n_rows}}this._number_of_rows=m,this._group_labels=[],d.sort(function(_,w){return _.idx-w.idx});for(var o=0,b=0;o<d.length;o++){this._group_labels.push({label:d[o].label,rows:d[o].n_rows});for(var f=0;f<d[o].positions.length;f++){var l=d[o].positions[f];l.row+=b}b+=d[o].n_rows}}else{var c=this._computeRowInfo(this._positions,r);this._number_of_rows=c.n_rows}}getAxisTickDateFormat(e){return this._scale=="cosmological"?"compact":Hre[e]}}class xV{constructor(e){this._el={parent:{},container:{},message:{}},this.options={width:600,height:600},this.data={label:"",rows:1},this._el.container=Te("div","tl-timegroup"),wt(this.data,e),this.animator={},this._initLayout(),this._initEvents()}updateDisplay(e,r){}setRowPosition(e,r){this.options.height=r*this.data.rows,this.setPosition({top:e}),this._el.container.style.height=this.options.height+"px"}setAlternateRowColor(e,r){var i="tl-timegroup";e&&(i+=" tl-timegroup-alternate"),r&&(i+=" tl-timegroup-hidden"),this._el.container.className=i}_onMouseClick(){this.fire("clicked",this.options)}_initLayout(){this._el.message=Te("div","tl-timegroup-message",this._el.container),this._el.message.innerHTML=this.data.label}_initEvents(){Qe.addListener(this._el.container,"click",this._onMouseClick,this)}_updateDisplay(e,r,i){}}ar(xV,or,Ds);class EV{constructor(e,r,i,s){this.start_date=e,this.end_date=r,this.headline=i,this._el={container:{},background:{},content_container:{},content:{},text:{}},this._text={},this._state={loaded:!1},this.options={duration:1e3,ease:Bg,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,wt(this.options,s),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(e){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.start_date.getTime()}getEndTime(){return this.end_date?this.end_date.getTime():!1}setHeight(e){var r=12,i=1;this._el.content_container.style.height=e+"px",this._el.content.className="tl-timeera-content",$g?(i=Math.floor(e/(r+2)),i<1&&(i=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=i):(i=e/r,i>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=i*r+"px")}setWidth(e){this.end_date&&(this._el.container.style.width=e+"px",e>this.options.marker_width_min?(this._el.content_container.style.width=e+"px",this._el.content_container.className="tl-timeera-content-container tl-timeera-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timeera-content-container"))}setClass(e){this._el.container.className=e}setRowPosition(e,r){this.setPosition({top:e}),r<56&&this._el.content_container.remove("tl-timeera-content-container-small")}setColor(e){this._el.container.className="tl-timeera tl-timeera-color"+e}_initLayout(){this._el.container=Te("div","tl-timeera"),this.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timeera tl-timeera-with-end"),this._el.content_container=Te("div","tl-timeera-content-container",this._el.container),this._el.background=Te("div","tl-timeera-background",this._el.content_container),this._el.content=Te("div","tl-timeera-content",this._el.content_container),this._el.text=Te("div","tl-timeera-text",this._el.content),this._text=Te("h2","tl-headline",this._el.text),this.headline&&this.headline!=""&&(this._text.innerHTML=Kl(this.headline)),this.onLoaded()}_initEvents(){}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}ar(EV,or,Ds);function Wre(t){const e=t.getBoundingClientRect();return e.left>=0&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}class SV{constructor(e,r,i){i&&this.setLanguage(i),this._el={container:{},content_container:{},major:{},minor:{}},this._text={},this._state={loaded:!1},this.data={},this.options={duration:1e3,ease:Bg,width:600,height:600},this.active=!1,this.animator={},this.axis_helper={},this.minor_ticks=[],this.major_ticks=[],typeof e=="object"?this._el.container=e:this._el.container=Sh(e),wt(this.options,r),this._initLayout(),this._initEvents()}show(){}hide(){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}getLeft(){return this._el.container.style.left.slice(0,-2)}drawTicks(e,r){var i=e.getTicks();this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor",this._el.major.style.opacity=0,this._el.minor.style.opacity=0,this.major_ticks=this._createTickElements(i.major.ticks,this._el.major,e.getAxisTickDateFormat(i.major.name)),this.minor_ticks=this._createTickElements(i.minor.ticks,this._el.minor,e.getAxisTickDateFormat(i.minor.name),i.major.ticks),this.positionTicks(e,r,!0),this._el.major.className="tl-timeaxis-major tl-animate-opacity tl-timeaxis-animate-opacity",this._el.minor.className="tl-timeaxis-minor tl-animate-opacity tl-timeaxis-animate-opacity",this._el.major.style.opacity=1,this._el.minor.style.opacity=1}_createTickElements(e,r,i,s){r.innerHTML="";var a={},o=new Date(-1,13,-30);if(a[o.getTime()]=!0,s)for(var l=0;l<s.length;l++)a[s[l].getTime()]=!0;for(var u=[],l=0;l<e.length;l++){var c=e[l];if(!(c.getTime()in a)){var d=Te("div","tl-timeaxis-tick",r),h=Te("span","tl-timeaxis-tick-text tl-animate-opacity",d);let m=c.getDisplayDate(this.getLanguage(),i);h.innerHTML=m,u.push({tick:d,tick_text:h,display_date:m,date:c})}}return u}positionTicks(e,r,i){i?(this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor"):(this._el.major.className="tl-timeaxis-major tl-timeaxis-animate",this._el.minor.className="tl-timeaxis-minor tl-timeaxis-animate"),this._positionTickArray(this.major_ticks,e,r),this._positionTickArray(this.minor_ticks,e,r)}_positionTickArray(e,r,i){if(e[1]&&e[0]){var s=r.getPosition(e[1].date.getMillisecond())-r.getPosition(e[0].date.getMillisecond()),a=1;s<i&&(a=Math.round(i/r.getPixelsPerTick()));for(var o=1,l=0;l<e.length;l++){var u=e[l];u.tick.style.left=r.getPosition(u.date.getMillisecond())+"px",u.tick_text.innerHTML=u.display_date,a>1?o>=a?(o=1,u.tick_text.style.opacity=1,u.tick.className="tl-timeaxis-tick"):(o++,u.tick_text.style.opacity=0,u.tick.className="tl-timeaxis-tick tl-timeaxis-tick-hidden"):(u.tick_text.style.opacity=1,u.tick.className="tl-timeaxis-tick")}}}getVisibleTicks(){return{major:this._getVisibleTickArray(this.major_ticks),minor:this._getVisibleTickArray(this.minor_ticks)}}_getVisibleTickArray(e){return e.filter(({tick:r})=>Wre(r))}_initLayout(){this._el.content_container=Te("div","tl-timeaxis-content-container",this._el.container),this._el.major=Te("div","tl-timeaxis-major",this._el.content_container),this._el.minor=Te("div","tl-timeaxis-minor",this._el.content_container),this.onLoaded()}_initEvents(){}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}ar(SV,or,Ds,Ls);class TV{constructor(e,r,i){this._el={container:{},content_container:{},content:{},headline_container:{},headline:{},date:{}},this.options={title:!1},this.data={unique_id:"",headline:"headline",text:"text"},Gne(this,e),wt(this.options,r),this._el.container=Te("div","tl-text"),this._el.container.id=this.data.unique_id,this._initLayout(),i&&i.appendChild(this._el.container)}show(){}hide(){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}headlineHeight(){return this._el.headline.offsetHeight+40}addDateText(e){this._el.date.innerHTML=e}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){if(this._el.content_container=Te("div","tl-text-content-container",this._el.container),this._el.headline_container=Te("div","tl-text-headline-container",this._el.content_container),this.data.headline!=""){var e="tl-headline";this.options.title&&(e="tl-headline tl-headline-title"),this._el.headline=Te("h2",e,this._el.headline_container),this._el.headline.innerHTML=this.data.headline}if(this._el.date=Te("h3","tl-headline-date",this._el.headline_container),this.data.text!=""){var r="";r+=Kne(this.options.autolink==!0?OE(this.data.text):this.data.text),this._el.content=Te("div","tl-text-content",this._el.content_container),this._el.content.innerHTML=r}this.onLoaded()}}ar(TV,or);class Ot{constructor(e,r,i){i&&this.setLanguage(i),this._el={container:{},content_container:{},content:{},content_item:{},content_link:{},caption:null,credit:null,parent:{},link:null},this.player=null,this.timer=null,this.load_timer=null,this.message=null,this.media_id=null,this._state={loaded:!1,show_meta:!1,media_loaded:!1},this.data={unique_id:null,url:null,credit:null,caption:null,credit_alternate:null,caption_alternate:null,link:null,link_target:null},this.options={api_key_flickr:"bd3a7c45ddd52f3101825d41563a6125",api_key_googlemaps:"AIzaSyB9dW8e_iRrATFa8g24qB6BDBGdkrLDZYI",api_key_embedly:"",credit_height:0,caption_height:0,background:0},this.animator={},wt(this.options,r),wt(this.data,e),this.options.background||(this._el.container=Te("div","tl-media"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._initLayout())}loadMedia(){var e=this;if(!this._state.loaded)try{this.load_timer=setTimeout(function(){e.loadingMessage(),e._loadMedia(),e._updateDisplay()},1200)}catch(r){ot("Error loading media for ",this._media),ot(r)}}_updateMessage(e){this.message&&this.message.updateMessage(e)}loadingMessage(){this._updateMessage(this._("loading")+" "+this.options.media_name)}errorMessage(e){e?e=this._("error")+": "+e:e=this._("error"),this._updateMessage(e)}updateMediaDisplay(e){this._state.loaded&&!this.options.background&&(Ko?this._el.content_item.style.maxHeight=this.options.height/2+"px":this._el.content_item.style.maxHeight=this.options.height-this.options.credit_height-this.options.caption_height-30+"px",this._el.container.style.maxWidth=this.options.width+"px",yu&&this._el.content_item.offsetWidth>this._el.content_item.offsetHeight,this._updateMediaDisplay(e),this._state.media_loaded&&(this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")))}_loadMedia(){this.onLoaded()}_updateMediaDisplay(e){yu&&(this._el.content_item.style.maxWidth=this.options.width+"px",this._el.content_item.style.width="auto")}_getMeta(){}_getImageURL(e,r){return""}show(){}hide(){}addTo(e){e.appendChild(this._el.container),this.onAdd()}removeFrom(e){e.removeChild(this._el.container),this.onRemove()}getImageURL(e,r){return this._getImageURL(e,r)}updateDisplay(e,r,i){this._updateDisplay(e,r,i)}stopMedia(){try{this._stopMedia()}catch(e){ot(`stopMedia() exception: ${e}`)}}loadErrorDisplay(e){try{this._el.content.removeChild(this._el.content_item)}catch{}this._el.content_item=Te("div","tl-media-item tl-media-loaderror",this._el.content),this._el.content_item.innerHTML="<div class='tl-icon-"+this.options.media_type+"'></div><p>"+e+"</p>",this.onLoaded(!0)}onLoaded(e){this._state.loaded=!0,this.fire("loaded",this.data),this.message&&this.message.hide(),e||this.options.background||this.showMeta(),this.updateDisplay()}onMediaLoaded(e){this._state.media_loaded=!0,this.fire("media_loaded",this.data),this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")}showMeta(e,r){this._state.show_meta=!0,this.data.credit&&this.data.credit!=""&&(this._el.credit=Te("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.options.autolink==!0?OE(this.data.credit):this.data.credit,this.options.credit_height=this._el.credit.offsetHeight),this.data.caption&&this.data.caption!=""&&(this._el.caption=Te("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.options.autolink==!0?OE(this.data.caption):this.data.caption,this.options.caption_height=this._el.caption.offsetHeight),(!this.data.caption||!this.data.credit)&&this.getMeta()}getMeta(){this._getMeta()}updateMeta(){!this.data.credit&&this.data.credit_alternate&&(this._el.credit=Te("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.data.credit_alternate,this.options.credit_height=this._el.credit.offsetHeight),!this.data.caption&&this.data.caption_alternate&&(this._el.caption=Te("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.data.caption_alternate,this.options.caption_height=this._el.caption.offsetHeight),this.updateDisplay()}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){this.message=new Wg(this._el.container,this.options,this.getLanguage()),this._el.content_container=Te("div","tl-media-content-container",this._el.container),this.data.link&&this.data.link!=""?(this._el.link=Te("a","tl-media-link",this._el.content_container),this._el.link.href=this.data.link,this.data.link_target&&this.data.link_target!=""?this._el.link.target=this.data.link_target:this._el.link.target="_blank",this._el.link.target=="_blank"&&this._el.link.setAttribute("rel","noopener"),this._el.content=Te("div","tl-media-content",this._el.link)):this._el.content=Te("div","tl-media-content",this._el.content_container)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r),i&&(this.options.layout=i),this._el.credit&&(this.options.credit_height=this._el.credit.offsetHeight),this._el.caption&&(this.options.caption_height=this._el.caption.offsetHeight+5),this.updateMediaDisplay(this.options.layout)}domCreate(...e){return Te(...e)}_stopMedia(){}}ar(Ot,or,Ls);let JA=class extends Ot{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=this,r="tl-media-item tl-media-image tl-media-shadow";(this.data.url.match(/.png(\?.*)?$/)||this.data.url.match(/.svg(\?.*)?$/))&&(r="tl-media-item tl-media-image"),this._el.content_item=this.domCreate("img",r,this._el.content),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=_u(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=_u(this.data.caption)),this._el.content_item.addEventListener("load",function(i){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL()}getImageURL(e,r){return Ug(this.data.url)}_updateMediaDisplay(e){yu&&(this._el.content_item.style.width="auto")}};class Gre{constructor(e){this.doc=e,this.pending={},this.queue={css:[],js:[]},this.styleSheets=e.styleSheets,this.env=this.getEnv(),this.head=this.doc.head||this.doc.getElementsByTagName("head")[0],this.pollCount=0}createNode(e,r){var i=this.doc.createElement(e),s;for(s in r)r.hasOwnProperty(s)&&i.setAttribute(s,r[s]);return i}finish(e){var r=this.pending[e],i,s;r&&(i=r.callback,s=r.urls,s.shift(),this.pollCount=0,s.length||(i&&i.call(r.context,r.obj),this.pending[e]=null,this.queue[e].length&&this.load(e)))}getEnv(){var e=navigator.userAgent,r={async:this.doc.createElement("script").async===!0};return(r.webkit=/AppleWebKit\//.test(e))||(r.ie=/MSIE/.test(e))||(r.opera=/Opera/.test(e))||(r.gecko=/Gecko\//.test(e))||(r.unknown=!0),r}load(e,r,i,s,a){var o=(function(){this.finish(e)}).bind(this),l=e==="css",u=[],c,d,h,f,m,v;if(r)if(r=typeof r=="string"?[r]:r.concat(),l||this.env.async||this.env.gecko||this.env.opera)this.queue[e].push({urls:r,callback:i,obj:s,context:a});else for(c=0,d=r.length;c<d;++c)this.queue[e].push({urls:[r[c]],callback:c===d-1?i:null,obj:s,context:a});if(!(this.pending[e]||!(f=this.pending[e]=this.queue[e].shift()))){for(m=f.urls,c=0,d=m.length;c<d;++c)v=m[c],l?h=this.env.gecko?this.createNode("style"):this.createNode("link",{href:v,rel:"stylesheet"}):(h=this.createNode("script",{src:v}),h.async=!1),h.className="lazyload",h.setAttribute("charset","utf-8"),this.env.ie&&!l?h.onreadystatechange=function(){/loaded|complete/.test(h.readyState)&&(h.onreadystatechange=null,o())}:l&&(this.env.gecko||this.env.webkit)?this.env.webkit?(f.urls[c]=h.href,this.pollWebKit()):(h.innerHTML='@import "'+v+'";',this.pollGecko(h)):h.onload=h.onerror=o,u.push(h);for(c=0,d=u.length;c<d;++c)this.head.appendChild(u[c])}}pollGecko(e){var r;try{r=!!e.sheet.cssRules}catch{if(this.pollCount+=1,this.pollCount<200){var i=this;setTimeout(function(){i.pollGecko(e)},50)}else r&&this.finish("css");return}this.finish("css")}pollWebKit(){var e=this.pending.css,r;if(e){for(r=this.styleSheets.length;--r>=0;)if(this.styleSheets[r].href===e.urls[0]){this.finish("css");break}this.pollCount+=1,e&&(this.pollCount<200?setTimeout(this.pollWebKit.bind(this),50):this.finish("css"))}}css(e,r,i,s){this.load("css",e,r,i,s)}js(e,r,i,s){this.load("js",e,r,i,s)}}function Oo(t,e,r,i){IV.js(t,e,r,i)}function Zy(t,e,r,i){IV.css(t,e,r,i)}let IV=new Gre(document);class Kre extends Ot{_loadMedia(){var e=this,r;this.youtube_loaded=!1,this._el.content_item=this.domCreate("div","tl-media-item tl-media-youtube tl-media-shadow",this._el.content),this._el.content_item.id=Lo(7),r=Yne(this.data.url),this.media_id={},this.data.url.match("v=")?this.media_id.id=r.v:this.data.url.match("/embed/")?this.media_id.id=this.data.url.split("embed/")[1].split(/[?&]/)[0]:this.data.url.match(/v\/|v=|youtu\.be\//)?this.media_id.id=this.data.url.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0]:ot("YOUTUBE IN URL BUT NOT A VALID VIDEO"),this.data.url.match("start=")?this.media_id.start=Gy(this.data.url.split("start=")[1]):this.data.url.match("t=")&&(this.media_id.start=Gy(this.data.url.split("t=")[1])),this.data.url.match("end=")&&(this.media_id.end=Gy(this.data.url.split("end=")[1])),this.media_id.hd=typeof r.hd<"u",Oo("https://www.youtube.com/iframe_api",function(){e.createMedia()})}_updateMediaDisplay(){this._el.content_item.style.height=Yo.r16_9({w:this.options.width})+"px",this._el.content_item.style.width=this.options.width+"px"}_stopMedia(){if(this.youtube_loaded)try{this.player.getPlayerState()==YT.PlayerState.PLAYING&&this.player.pauseVideo()}catch(e){ot(e)}}createMedia(){var e=this;clearTimeout(this.timer),typeof YT<"u"&&typeof YT.Player<"u"?this.player=new YT.Player(this._el.content_item.id,{playerVars:{enablejsapi:1,color:"white",controls:1,start:this.media_id.start,end:this.media_id.end,fs:1},videoId:this.media_id.id,events:{onReady:function(){e.onPlayerReady(),e.onLoaded()},onStateChange:e.onStateChange}}):this.timer=setTimeout(function(){e.createMedia()},1e3)}onPlayerReady(e){this.youtube_loaded=!0,this._el.content_item=document.getElementById(this._el.content_item.id),this.onMediaLoaded()}onStateChange(e){e.data==YT.PlayerState.ENDED&&(e.target.seekTo(0),e.target.pauseVideo())}}class Yre extends Ot{_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-map tl-media-shadow",this._el.content),this.media_id=this.data.url,this.mapframe=this.domCreate("iframe","",this._el.content_item),this.mapframe.width="100%",this.mapframe.height="100%",this.mapframe.frameBorder="0",this.mapframe.src=this.makeGoogleMapsEmbedURL(this.media_id,this.options.api_key_googlemaps),this.onLoaded()}_updateMediaDisplay(){if(this._state.loaded){var e=Yo.square({w:this._el.content_item.offsetWidth});this._el.content_item.style.height=e.h+"px"}}makeGoogleMapsEmbedURL(e,r){var i=!1;function s(h){function f(y,b){if(y.slice(-1)=="z")b.zoom=y;else if(y.slice(-1)=="m")b.zoom=14,b.maptype="satellite";else if(y.slice(-1)=="t"){if(i=!0,v=="place")var _=h.match(d.place)[3]+","+h.match(d.place)[4];else{var _=b.center;delete b.center}b={},b.location=_,streetview_params=y.split(",");for(let E in a.streetview){var w=parseInt(E)+1;a.streetview[E]=="pitch"&&streetview_params[w]=="90t"?b[a.streetview[E]]=0:b[a.streetview[E]]=streetview_params[w].slice(0,-1)}}return b}function m(y,b){var _={},w=b[1],E=b[b.length-1];for(let M in a[y]){var N=parseInt(M)+2;a[y][M]=="center"?_[a[y][M]]=b[N]+","+b[++N]:_[a[y][M]]=b[N]}return _=f(E,_),_.key=r,i==!0&&(y="streetview"),w+"/embed/v1/"+y+Xne(_)}let v="view";return h.match(d.place)?v="place":h.match(d.directions)?v="directions":h.match(d.search)&&(v="search"),m(v,h.match(d[v]))}var a={view:["center"],place:["q","center"],directions:["origin","destination","center"],search:["q","center"],streetview:["fov","heading","pitch"]},o=/(https:\/\/.+google.+?\/maps)/,l=/@([-\d.]+),([-\d.]+)/,u=/([\w\W]+)/,c=/,((?:[-\d.]+[zmayht],?)*)/,d={view:new RegExp(o.source+"/"+l.source+c.source),place:new RegExp(o.source+"/place/"+u.source+"/"+l.source+c.source),directions:new RegExp(o.source+"/dir/"+u.source+"/"+u.source+"/"+l.source+c.source),search:new RegExp(o.source+"/search/"+u.source+"/"+l.source+c.source)};return s(e)}}class Xre extends Ot{constructor(e,r,i){super(e,r,i),this.blockquote=Gg.sanitize(this.data.url)}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-blockquote",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this._el.content_item.innerHTML=this.blockquote,this.onLoaded()}updateMediaDisplay(){}}class Qre extends Ot{_loadMedia(){var e,r,i=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-wikipedia",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.media_id=this.data.url.split("wiki/")[1].split("#")[0].replace("_"," "),this.media_id=this.media_id.replace(" ","%20"),r=this.data.url.split("//")[1].split(".wikipedia")[0],e="https://"+r+".wikipedia.org/w/api.php?action=query&prop=extracts|pageimages&redirects=&titles="+this.media_id+"&exintro=1&format=json&callback=?",zu({type:"GET",url:e,dataType:"json",success:function(s){i.createMedia(s)},error:function(s,a){var o="";o+=i._("wikipedia_load_err")+"<br/>"+i.media_id+"<br/>"+a,i.loadErrorDisplay(o)}})}createMedia(e){var r="";if(e.query){var i="",r={entry:{},title:"",text:"",extract:"",paragraphs:1,page_image:"",text_array:[]};r.entry=Qne(e.query.pages,0),r.extract=r.entry.extract,r.title=r.entry.title,r.page_image=r.entry.thumbnail,r.extract.match("<p>")?r.text_array=r.extract.split("<p>"):r.text_array.push(r.extract);for(var s=0;s<r.text_array.length;s++)s+1<=r.paragraphs&&s+1<r.text_array.length&&(r.text+="<p>"+r.text_array[s+1]);i+="<span class='tl-icon-wikipedia'></span>",i+="<div class='tl-wikipedia-title'><h4><a href='"+this.data.url+"' target='_blank' rel='noopener'>"+r.title+"</a></h4>",i+="<span class='tl-wikipedia-source'>"+this._("wikipedia")+"</span></div>",r.page_image,i+=r.text,r.extract.match("REDIRECT")||(this._el.content_item.innerHTML=i,this.onLoaded())}}updateMediaDisplay(){}}function Jre(t){if(t.match(/^.+#\/media\/.+/))return`File:${t.split("#")[1].split(":")[1]}`;if(t.match(/^.*commons.wikimedia.org\/wiki\/File:.+/)){let e=t.split("/");return e[e.length-1]}return null}function Zre(t){let e={};if(t.query&&t.query.pages){let r=Object.keys(t.query.pages);e.page_id=r[0];let i=t.query.pages[e.page_id];e.url=i.imageinfo[0].thumburl,i.entityterms&&i.entityterms.label&&(e.label=i.entityterms.label[0])}return e}class ZA extends Ot{_loadMedia(){var e,r=Math.round(this.options.width)||1e3,i=this.getLanguage().lang.toLowerCase(),s=this;try{this.establishMediaID(),e=`https://commons.wikimedia.org/w/api.php?action=query&titles=${this.media_id}&prop=imageinfo|entityterms&iiprop=url&&iiurlwidth=${r}&format=json&origin=*&wbetlanguage=${i}`,Em(e,function(a){let o=Zre(a);o.url?(s.base_image_url=o.url,s.page_id=o.page_id,!s.data.alt&&o.label&&(s.data.alt=o.label),s.options.background||s.createMedia(),s.onLoaded()):s.loadErrorDisplay(s._("wikipedia_image_load_err"))})}catch(a){s.loadErrorDisplay(s._(a.message_key))}}establishMediaID(){let e=Jre(this.data.url);if(e)this.media_id=e;else throw new at("Invalid Wikipedia Image URL")}createMedia(){var e=this;if(this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-wikipedia-image tl-media-shadow",this._el.content),this.data.alt)this._el.content_item.alt=this.data.alt;else if(this.page_id){let r=`M${this.page_id}`,i=`https://commons.wikimedia.org/w/api.php?action=wbgetentities&format=json&ids=${r}&format=json&origin=*`;zg(i).then(s=>{if(s.entities&&s.entities[r]){let a=s.entities[r].labels,o=e.getLanguage().lang.toLowerCase(),l=null;a[o]?l=a[o]:o.length>2&&a[o.substr(0,2)]?l=a[o.substr(0,2)]:a.en&&(l=a.en),l?(console.log(`wikibase_id: ${e.media_id} alt ${l.value}`),e.data.alt=l.value,e._el.content_item.alt=e.data.alt):console.log(`wikibase_id: ${e.media_id} ain't got no alt`)}})}this.data.title&&(this._el.content_item.title=this.data.title),this._el.content_item.addEventListener("load",function(r){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}_getImageURL(e,r){if(e&&this.base_image_url){let i=this.base_image_url.match(/(\/[\d\.]+px-)/);if(i)return e=Math.round(e),this.base_image_url.replace(i[1],`/${e}px-`)}return this.base_image_url}}class eie extends Ot{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-soundcloud tl-media-shadow",this._el.content),this.media_id=this.data.url,e="https://soundcloud.com/oembed?url="+this.media_id+"&format=js&callback=?",Em(e,function(i){Oo("https://w.soundcloud.com/player/api.js",function(){r.createMedia(i)})})}createMedia(e){this._el.content_item.innerHTML=e.html,self.widget=SC.Widget(this._el.content_item.querySelector("iframe")),this.soundCloudCreated=!0,this.onLoaded()}_stopMedia(){this.soundCloudCreated&&self.widget.pause()}}class tie extends Ot{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vimeo tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0];var i=null;this.data.url.match(/#t=([^&]+).*/)&&(i=this.data.url.match(/#t=([^&]+).*/)[1]),e="https://player.vimeo.com/video/"+this.media_id+"?api=1&title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff",i&&(e=e+="&amp;#t="+i),this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(s){r.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=Yo.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player&&this.player.contentWindow&&this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(e){ot(e)}}}class nie extends Ot{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-dailymotion",this._el.content),this.data.url.indexOf("dai.ly/")!=-1?this.media_id=this.data.url.substr(this.data.url.indexOf("dai.ly/")+7):this.data.url.match("video")?this.media_id=this.data.url.split("video/")[1].split(/[?&]/)[0]:this.media_id=this.data.url.split("embed/")[1].split(/[?&]/)[0],this.media_id.indexOf("_")!=-1&&(this.media_id=this.media_id.split("_")[0]),e="https://www.dailymotion.com/embed/video/"+this.media_id+"?api=postMessage",this._el.content_item.innerHTML="<iframe autostart='false' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._state.loaded&&(this._el.content_item.style.height=Yo.r16_9({w:this._el.content_item.offsetWidth})+"px")}_stopMedia(){this._state.loaded&&this._el.content_item.querySelector("iframe").contentWindow.postMessage('{"command":"pause","parameters":[]}',"*")}}class rie extends Ot{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vine tl-media-shadow",this._el.content),this.media_id=this.data.url.split("vine.co/v/")[1],e="https://vine.co/v/"+this.media_id+"/embed/simple",this._el.content_item.innerHTML="<iframe frameborder='0' width='100%' height='100%' src='"+e+"'></iframe><script async src='https://platform.vine.co/static/scripts/embed.js' charset='utf-8'><\/script>",this.onLoaded()}_updateMediaDisplay(){var e=Yo.square({w:this._el.content_item.offsetWidth,h:this.options.height});this._el.content_item.style.height=e.h+"px"}_stopMedia(){this._el.content_item.querySelector("iframe").contentWindow.postMessage("pause","*")}}class iie extends Ot{_loadMedia(){var e,r=this;if(this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.data.url.match("^(https?:)?/*(www.)?(twitter|x).com"))this.data.url.match("status/")?this.media_id=this.data.url.split("status/")[1]:this.data.url.match("statuses/")?this.media_id=this.data.url.split("statuses/")[1]:this.media_id="";else if(this.data.url.match(`<blockquote class=['"]twitter-tweet['"]`)){var i=this.data.url.match(/(status|statuses)\/(\d+)/);if(i&&i.length>2)this.media_id=i[2];else{r.loadErrorDisplay(r._("twitterembed_invalidurl_err"));return}}e="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",zu({type:"GET",url:e,dataType:"json",success:function(s){r.createMedia(s)},error:function(s,a){var o="";o+=r._("twitter_load_err")+"<br/>"+r.media_id+"<br/>"+a,r.loadErrorDisplay(o)}})}createMedia(e){var r="",i="",s="",a="",o="",l="",u=this;i=e.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=e.author_url.split("twitter.com/")[1],a=e.html.split("</p>&mdash;")[1].split('<a href="')[1],o=a.split('">')[0],l=a.split('">')[1].split("</a>")[0],i=i.replace(/<a href/ig,'<a target="_blank" rel="noopener" href'),i.includes("pic.twitter.com")||i.includes("pic.x.com")?(Oo("https://platform.twitter.com/widgets.js",function(){twttr.widgets.createTweet(u.media_id,u._el.content_item,{conversation:"none",linkColor:"#cc0000",theme:"light"})}),this.onLoaded()):(r+=i,r+="<div class='vcard'>",r+="<a href='"+o+"' class='twitter-date' rel='noopener' target='_blank'>"+l+"</a>",r+="<img src='' class='tl-media-item tl-media-image'></a>",r+="<div class='author'>",r+="<a class='screen-name url' href='"+e.author_url+"' rel='noopener' target='_blank'>",r+="<span class='avatar'></span>",r+="<span class='fn'>"+e.author_name+" <span class='tl-icon-twitter'></span></span>",r+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",r+="</a>",r+="</div>",r+="</div>",this._el.content_item.innerHTML=r,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class sie extends Ot{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text";var i=this.data.url.match(/(status|statuses)\/(\d+)/);if(i&&i.length>2)this.media_id=i[2];else{r.loadErrorDisplay(r._("twitterembed_invalidurl_err"));return}e="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",window.twttr=function(s,a,o){var l,u=s.getElementsByTagName(a)[0],c=window.twttr||{};return s.getElementById(o)||(l=s.createElement(a),l.id=o,l.src="https://platform.twitter.com/widgets.js",u.parentNode.insertBefore(l,u),c._e=[],c.ready=function(d){c._e.push(d)}),c}(document,"script","twitter-wjs"),zu({type:"GET",url:e,dataType:"json",success(s){r.createMedia(s)},error:function(s,a){var o="";o+=r._("twitter_load_err")+"<br/>"+r.media_id+"<br/>"+a,r.loadErrorDisplay(o)}})}createMedia(e){var r="",i="",s="",a="",o="",l="";i=e.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=e.author_url.split("twitter.com/")[1],a=e.html.split("</p>&mdash;")[1].split('<a href="')[1],o=a.split('">')[0],l=a.split('">')[1].split("</a>")[0],i=i.replace(/<a href/ig,'<a target="_blank" rel="noopener" href');let u=this.media_id;i.includes("pic.twitter.com")?(twttr.ready(function(c){r=document.getElementsByClassName("tl-media-twitter")[0];var d=String(u);twttr.widgets.createTweet(d,r,{conversation:"none",linkColor:"#cc0000",theme:"light"}).then(function(h){this.onLoaded()})}),this._el.content_item.innerHTML=r,this.onLoaded()):(r+=i,r+="<div class='vcard'>",r+="<a href='"+o+"' class='twitter-date' rel='noopener' target='_blank'>"+l+"</a>",r+="<div class='author'>",r+="<a class='screen-name url' href='"+e.author_url+"' rel='noopener' target='_blank'>",r+="<span class='avatar'></span>",r+="<span class='fn'>"+e.author_name+" <span class='tl-icon-twitter'></span></span>",r+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",r+="</a>",r+="</div>",r+="</div>",this._el.content_item.innerHTML=r,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class eR extends Ot{_loadMedia(){var e,r=this;try{this.establishMediaID(),e="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",Em(e,function(i){i.stat=="ok"?(r.sizes=i.sizes.size,r.options.background||r.createMedia(),r.onLoaded()):r.loadErrorDisplay(r._("flickr_notfound_err"))})}catch(i){r.loadErrorDisplay(r._(i.message_key))}}establishMediaID(){if(this.data.url.match(/flic.kr\/.+/i)){var e=this.data.url.split("/").slice(-1)[0];this.media_id=Jne.decode(e)}else{var r="flickr.com/photos/",i=this.data.url.indexOf(r);if(i==-1)throw new at("flickr_invalidurl_err");var s=i+r.length;this.media_id=this.data.url.substr(s).split("/")[1]}}createMedia(){var e=this;this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-flickr tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=_u(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=_u(this.data.caption)),this._el.content_item.addEventListener("load",function(r){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}getImageURL(e,r){for(var i=this.size_label(r),s=this.sizes[this.sizes.length-2].source,a=0;a<this.sizes.length;a++)this.sizes[a].label==i&&(s=this.sizes[a].source);return s}_getMeta(){var e=this,r;r="https://api.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",Em(r,function(i){e.data.credit_alternate="<a href='"+e.data.url+"' target='_blank' rel='noopener'>"+i.photo.owner.realname+"</a>",e.data.caption_alternate=i.photo.title._content+" "+i.photo.description._content,e.updateMeta()})}size_label(e){var r="";return e<=75?e<=0?r="Large":r="Thumbnail":e<=180?r="Small":e<=240?r="Small 320":e<=375?r="Medium":e<=480?r="Medium 640":(e<=600,r="Large"),r}}class aie extends Ot{_loadMedia(){var e=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-documentcloud tl-media-shadow",this._el.content),this._el.content_item.id=Lo(7),this.data.url.match(/\.html$/)?this.data.url=this._transformURL(this.data.url):this.data.url.match(/.(json|js)$/)||ot("DOCUMENT CLOUD IN URL BUT INVALID SUFFIX"),Oo(["https://assets.documentcloud.org/viewer/loader.js","https://assets.documentcloud.org/viewer/viewer.js"],function(){e.createMedia()})}_transformURL(e){return e.replace(/(.*)\.html$/,"$1.js")}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}createMedia(){DV.load(this.data.url,{container:"#"+this._el.content_item.id,showSidebar:!1}),this.onLoaded()}}const oie="830b21071290df4f81a35c56abbea096",lie="704270473831239",uie=`${lie}|${oie}`,tR=`https://graph.facebook.com/v8.0/instagram_oembed?access_token=${uie}&fields=html,thumbnail_url,author_name&url=`;function cie(t){this.oembed_response=t,this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-instagram tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=_u(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=_u(this.data.caption)),this._el.content_item.addEventListener("load",(function(e){this.onMediaLoaded()}).bind(this)),this._el.content_item.src=t.thumbnail_url,this.onLoaded()}function die(t){let e=`${t.statusText} [${t.status}]`;t.status==400&&(e=this._("instagram_bad_request")),this.loadErrorDisplay(e)}class hie extends Ot{_loadMedia(){this.media_id=this.data.url.split("/p/")[1].split("/")[0],this.options.background||this.createMedia()}createMedia(){this.oembed_response=null;let e=`${tR}${this.data.url}`;try{zu({url:e,dataType:"json",success:cie,error:die,context:this})}catch(r){console.log(`Instagram: error fetching ${e}`),console.log(r);debugger}}getImageURL(){if(this.oembed_response&&this.oembed_response.thumbnail_url)return this.oembed_response.thumbnail_url;zg(`${tR}${this.data.url}`).then(e=>e.thumbnail_url).catch(e=>{ot(`Instagram getImageURL Error: ${e.status} ${e.statusText}`)})}_getMeta(){this.oembed_response&&this.oembed_response.author_name&&(this.data.credit_alternate=`Instagram: <a href="https://instagram.com/${this.oembed_response.author_name}" target="_blank">@${this.oembed_response.author_name}</a>`),this.updateMeta()}sizes(e){var r="";return e<=150?r="t":e<=306?r="m":r="l",r}}class fie extends Ot{_loadMedia(){this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-profile tl-media-shadow",this._el.content),this._el.content_item.src=this.data.url,this.onLoaded()}_updateMediaDisplay(e){yu&&(this._el.content_item.style.maxWidth=this.options.width/2-40+"px")}}class pie extends Ot{_loadMedia(){var e;if(this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this.data.url.match(/open\?id=([^&]+)/)){var r=this.data.url.match(/open\?id=([^&]+)/)[1];e="https://drive.google.com/file/d/"+r+"/preview"}else if(this.data.url.match(/file\/d\/([^/]*)\/?/)){var r=this.data.url.match(/file\/d\/([^/]*)\/?/)[1];e="https://drive.google.com/file/d/"+r+"/preview"}else e=this.data.url;this._el.content_item.innerHTML="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}function mie(t){return t.match(/^spotify:/)?t:(t=new URL(t),`spotify${t.pathname.replace(/\/$/,"").replace(/\//g,":")}`)}class gie extends Ot{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-spotify",this._el.content),this.media_id=mie(this.data.url),this.media_id?(e="https://embed.spotify.com/?uri="+this.media_id+"&theme=white&view=coverart",this.player=this.domCreate("iframe","tl-media-shadow",this._el.content_item),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.onLoaded()):this.loadErrorDisplay(this._("spotify_invalid_url"))}_updateMediaDisplay(e){var r=this.options.height,i=0,s=0;Ko?r=this.options.height/2:r=this.options.height-this.options.credit_height-this.options.caption_height-30,this._el.content_item.style.maxHeight="none",ot(r),ot(this.options.width),r>this.options.width?(ot("height is greater"),i=this.options.width+80+"px",s=this.options.width+"px"):(ot("width is greater"),ot(this.options.width),i=r+"px",s=r-80+"px"),this.player.style.width=s,this.player.style.height=i,this._el.credit&&(this._el.credit.style.width=s),this._el.caption&&(this._el.caption.style.width=s)}_stopMedia(){}}class vie extends Ot{constructor(e,r,i){super(e,r,i),this.iframe=Gg.sanitize(this.data.url,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder"]})}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this._el.content_item.innerHTML=this.iframe,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class yie extends Ot{_loadMedia(){try{var e=this;if(this.data.url.match(`<blockquote class=['"]imgur-embed-pub['"]`)){var r=this.data.url.match(/(imgur\.com)\/(\w+)/);this.media_id=r[2],this.data.url="http://imgur.com/gallery/"+this.media_id}else this.data.url&&(this.media_id=this.data.url.split("/").slice(-1)[0]);Oo(["https://s.imgur.com/min/embed.js"],function(){e.createMedia()})}catch{this.loadErrorDisplay(this._("imgur_invalidurl_err"))}}createMedia(){var e=this,r="https://api.imgur.com/oembed.json?url="+this.data.url;this._el.content_item=this.domCreate("div","tl-media-item tl-media-image tl-media-imgur",this._el.content),zu({type:"GET",url:r,dataType:"json",success:function(i){try{e._el.content_item.innerHTML=i.html,setInterval(function(){document.querySelector("blockquote.imgur-embed-pub")==null?clearInterval():(imgurEmbed.createIframe(),document.getElementById("imageElement").removeAttribute("style"),document.getElementById("image").removeAttribute("style"))},2e3)}catch{ot("Error processing imgur ajax response")}},error:function(i,s,a){s=="parsererror"?e.loadErrorDisplay(e._("imgur_invalidurl_err")):e.loadErrorDisplay(e._("unknown_read_err",s))}}),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.width=this.options.width+"px",this._el.content_item.style.height=Yo.r16_9({w:this.options.width})+"px"}}class _ie extends Ot{_loadMedia(){var e=Ug(this.data.url);this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content);var r="";Eh||Vne||e.match(/dl.dropboxusercontent.com/)?r="<iframe class='doc' frameborder='0' width='100%' height='100%' src='//docs.google.com/viewer?url="+e+"&amp;embedded=true'></iframe>":r="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this._el.content_item.innerHTML=r,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class wie extends Ot{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=Ug(this.data.url),r=this,r=this,i="tl-media-item tl-media-audio tl-media-shadow";this._el.content_item=this.domCreate("audio",i,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){r.onMediaLoaded()}),this._el.source_item.src=e,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 audio with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(e){yu&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(e,r){var i=e.match(r),s="audio/";switch(i[1]){case"mp3":s+="mpeg";break;case"wav":s+="wav";break;case"m4a":s+="mp4";break;default:s="audio";break}return s}}class bie extends Ot{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=Ug(this.data.url),r=this,r=this,i="tl-media-item tl-media-video tl-media-shadow";this._el.content_item=this.domCreate("video",i,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){r.onMediaLoaded()}),this._el.source_item.src=e,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 video with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(e){yu&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(e,r){var i=e.match(r),s="video/";switch(i[1]){case"mp4":s+="mp4";break;case"webm":s+="webm";break;default:s="video";break}return s}}class xie extends Ot{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-wistia tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/https?:\/\/(.+)?(wistia\.com|wi\.st)\/medias\/(.*)/)[3],ot(`Wistia: media_id: ${this.media_id}`),e="https://fast.wistia.com/embed/iframe/"+this.media_id+"?version=v1&controlsVisibleOnLoad=true&playerColor=aae3d8",this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(i){r.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=Yo.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(e){ot(e)}}}function Sm(t,e){var r={},i=[{type:"youtube",name:"YouTube",match_str:"^(https?:)?/*(www.|m.)?youtube|youtu.be",cls:Kre},{type:"vimeo",name:"Vimeo",match_str:"^(https?:)?/*(player.)?vimeo.com",cls:tie},{type:"dailymotion",name:"DailyMotion",match_str:"^(https?:)?/*(www.)?(dailymotion.com|dai.ly)",cls:nie},{type:"vine",name:"Vine",match_str:"^(https?:)?/*(www.)?vine.co",cls:rie},{type:"soundcloud",name:"SoundCloud",match_str:"^(https?:)?/*(player.)?soundcloud.com",cls:eie},{type:"twitter",name:"Twitter",match_str:"^(https?:)?/*(www.)?(twitter|x).com",cls:iie},{type:"twitterembed",name:"TwitterEmbed",match_str:`<blockquote class=['"]twitter-tweet['"]`,cls:sie},{type:"googlemaps",name:"Google Map",match_str:/google.+?\/maps\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/search\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/place\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/dir\/([\w\W]+)\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)/,cls:Yre},{type:"flickr",name:"Flickr",match_str:"^(https?:)?/*(www.)?flickr.com/photos",cls:eR},{type:"flickr",name:"Flickr",match_str:"^(https?://)?flic.kr/.*",cls:eR},{type:"instagram",name:"Instagram",match_str:/^(https?:)?\/*(www.)?(instagr.am|^(https?:)?\/*(www.)?instagram.com)\/p\//,cls:hie},{type:"profile",name:"Profile",match_str:/^(https?:)?\/*(www.)?instagr.am\/[a-zA-Z0-9]{2,}|^(https?:)?\/*(www.)?instagram.com\/[a-zA-Z0-9]{2,}/,cls:fie},{type:"documentcloud",name:"Document Cloud",match_str:/documentcloud.org\//,cls:aie},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://.+.wiki[mp]edia.org.+#/media/.+.(jpg|jpeg|png|gif|svg|webp)",cls:ZA},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://commons.wikimedia.org/wiki/File:.+.(jpg|jpeg|png|gif|svg|webp)",cls:ZA},{type:"wikipedia",name:"Wikipedia",match_str:"^(https?:)?/.+.wikipedia.org",cls:Qre},{type:"image",name:"Image",match_str:/(jpg|jpeg|png|gif|svg|webp)(\?.*)?$/i,cls:JA},{type:"imgur",name:"Imgur",match_str:/^.*imgur.com\/.+$|<blockquote class=['\"]imgur-embed-pub['\"]/i,cls:yie},{type:"googledocs",name:"Google Doc",match_str:"^(https?:)?/*[^.]*.google.com/[^/]*/d/[^/]*/[^/]*?usp=shar.*|^(https?:)?/*drive.google.com/open?id=[^&]*&authuser=0|^(https?:)?//*drive.google.com/open\\?id=[^&]*|^(https?:)?/*[^.]*.googledrive.com/host/[^/]*/",cls:pie},{type:"pdf",name:"PDF",match_str:/^.*\.pdf(\?.*)?(\#.*)?/,cls:_ie},{type:"spotify",name:"spotify",match_str:"spotify",cls:gie},{type:"iframe",name:"iFrame",match_str:"iframe",cls:vie},{type:"blockquote",name:"Quote",match_str:"blockquote",cls:Xre},{type:"video",name:"Video",match_str:/(mp4|webm)(\?.*)?$/i,cls:bie},{type:"wistia",name:"Wistia",match_str:/https?:\/\/(.+)?(wistia\.com|wi\.st)\/.*/i,cls:xie},{type:"audio",name:"Audio",match_str:/(mp3|wav|m4a)(\?.*)?$/i,cls:wie},{type:"imageblank",name:"Imageblank",match_str:"",cls:JA}];if(e){if(t instanceof Array)return!1;for(var s=0;s<i.length;s++)switch(i[s].type){case"flickr":case"image":case"instagram":if(t.url.match(i[s].match_str))return r=i[s],r;break}}else for(var s=0;s<i.length;s++)if(t.url.match(i[s].match_str))return i[s];return!1}class CV{constructor(e,r){this._el={container:{},content_container:{},media_container:{},timespan:{},line_left:{},line_right:{},content:{},text:{},media:{}},this._text={},this._state={loaded:!1},this.data={unique_id:"",background:null,date:{year:0,month:0,day:0,hour:0,minute:0,second:0,millisecond:0,thumbnail:"",format:""},text:{headline:"",text:""},media:null},this.options={duration:1e3,ease:Bg,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,this.ariaLabel="",wt(this.options,r),wt(this.data,e),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(e){this.active=e,this.active&&this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end tl-timemarker-active":this.active?this._el.container.className="tl-timemarker tl-timemarker-active":this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end":this._el.container.className="tl-timemarker",this._el.container.ariaLabel=this.ariaLabel,this.active?this._el.container.ariaLabel+=", shown":this._el.container.ariaLabel+=", press space to show"}setFocus(e={preventScroll:!0}){this._el.container.focus(e)}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}loadMedia(){this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0)}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.data.start_date.getTime()}getEndTime(){return this.data.end_date?this.data.end_date.getTime():!1}setHeight(e){var r=12,i=1;this._el.content_container.style.height=e+"px",this._el.timespan_content.style.height=e+"px",e<=30?this._el.content.className="tl-timemarker-content tl-timemarker-content-small":this._el.content.className="tl-timemarker-content",e<=56?this._el.content_container.classList.add("tl-timemarker-content-container-small"):this._el.content_container.classList.remove("tl-timemarker-content-container-small"),$g?(i=Math.floor(e/(r+2)),i<1&&(i=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=i):(i=e/r,i>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=i*r+"px")}setWidth(e){this.data.end_date&&(this._el.container.style.width=e+"px",e>this.options.marker_width_min?(this._el.content_container.style.width=e+"px",this._el.content_container.className="tl-timemarker-content-container tl-timemarker-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timemarker-content-container"))}setClass(e){this._el.container.className=e}setRowPosition(e,r){this.setPosition({top:e}),this._el.timespan.style.height=r+"px"}getFormattedDate(){if(Nr(this.data.display_date).length>0)return this.data.display_date;let e="";return this.data.end_date&&(e=" to "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(e=(e?"from ":"")+this.data.start_date.getDisplayDate(this.getLanguage())+e),e}_onMarkerClick(e){this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerKeydown(e){/Space|Enter/.test(e.code)&&this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerBlur(e){this.fire("markerblur",{unique_id:this.data.unique_id})}_initLayout(){if(this._el.container=Te("div","tl-timemarker"),this._el.container.setAttribute("tabindex","-1"),this.data.unique_id&&(this._el.container.id=this.data.unique_id+"-marker"),this.data.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timemarker tl-timemarker-with-end"),this._el.timespan=Te("div","tl-timemarker-timespan",this._el.container),this._el.timespan_content=Te("div","tl-timemarker-timespan-content",this._el.timespan),this._el.content_container=Te("div","tl-timemarker-content-container",this._el.container),this._el.content=Te("div","tl-timemarker-content",this._el.content_container),this._el.line_left=Te("div","tl-timemarker-line-left",this._el.timespan),this._el.line_right=Te("div","tl-timemarker-line-right",this._el.timespan),this.data.media){this._el.media_container=Te("div","tl-timemarker-media-container",this._el.content);var e={url:this.data.media.thumbnail},r=this.data.media.thumbnail?Sm(e,!0):null;if(r){var i=new r.cls(e);i.on("loaded",(function(){this._el.media=Te("img","tl-timemarker-media",this._el.media_container),this._el.media.src=i.getImageURL()}).bind(this)),i.loadMedia()}else{var s=Sm(this.data.media).type;this._el.media=Te("span","tl-icon-"+s,this._el.media_container)}}this._el.text=Te("div","tl-timemarker-text",this._el.content),this._text=Te("h2","tl-headline",this._el.text),this.data.text.headline&&this.data.text.headline!=""?this._text.innerHTML=Kl(this.data.text.headline):this.data.text.text&&this.data.text.text!=""?this._text.innerHTML=Kl(this.data.text.text):this.data.media&&this.data.media.caption&&this.data.media.caption!=""&&(this._text.innerHTML=Kl(this.data.media.caption));const a=this.getFormattedDate();this.ariaLabel=`${this._text.innerHTML}, ${a}`,this.onLoaded()}_initEvents(){Qe.addListener(this._el.container,"click",this._onMarkerClick,this),Qe.addListener(this._el.container,"keydown",this._onMarkerKeydown,this),Qe.addListener(this._el.container,"blur",this._onMarkerBlur,this)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}ar(CV,Ls,or,Ds);class gT{constructor(e,r,i){this._el={drag:e,move:e},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},r&&(this._el.move=r),this.options={snap:!1,enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:0,right:!1},momentum_multiplier:2e3,duration:1e3,ease:Bu},this.animator=null,this.dragevent=this.mousedrag,$i&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},wt(this.options,i)}enable(e){Qe.addListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Qe.addListener(this._el.drag,this.dragevent.up,this._onDragEnd,this),this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){Qe.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Qe.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(e){this.options.constraint=e}_onDragStart(e){this.animator&&this.animator.stop(),$i?e.originalEvent?(this.data.pagex.start=e.originalEvent.touches[0].screenX,this.data.pagey.start=e.originalEvent.touches[0].screenY):(this.data.pagex.start=e.targetTouches[0].screenX,this.data.pagey.start=e.targetTouches[0].screenY):(this.data.pagex.start=e.pageX,this.data.pagey.start=e.pageY),this.options.enable.x,this.options.enable.y,this.data.pos.start={x:this._el.move.offsetLeft,y:this._el.move.offsetTop},this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),Qe.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Qe.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(e){this.data.sliding=!1,Qe.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Qe.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(e){var r={x:0,y:0};this.data.sliding=!0,$i?e.originalEvent?(this.data.pagex.end=e.originalEvent.touches[0].screenX,this.data.pagey.end=e.originalEvent.touches[0].screenY):(this.data.pagex.end=e.targetTouches[0].screenX,this.data.pagey.end=e.targetTouches[0].screenY):(this.data.pagex.end=e.pageX,this.data.pagey.end=e.pageY),r.x=this.data.pagex.start-this.data.pagex.end,r.y=this.data.pagey.start-this.data.pagey.end,this.data.pos.end={x:this._el.drag.offsetLeft,y:this._el.drag.offsetTop},this.data.new_pos.x=-(r.x-this.data.pos.start.x),this.data.new_pos.y=-(r.y-this.data.pos.start.y),this.options.enable.x&&Math.abs(r.x)>Math.abs(r.y)&&(e.preventDefault(),this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&Math.abs(r.y)>Math.abs(r.y)&&(e.preventDefault(),this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var e={x:0,y:0,time:0},r={x:0,y:0,time:0},i={x:!1,y:!1},s=!1;this.data.direction=null,e.time=(new Date().getTime()-this.data.time.start)*10,r.time=(new Date().getTime()-this.data.time.start)*10,r.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),r.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),e.x=Math.round(r.x/r.time),e.y=Math.round(r.y/r.time),this.data.new_pos.x=Math.min(this.data.new_pos.x+e.x),this.data.new_pos.y=Math.min(this.data.new_pos.y+e.y),this.options.enable.x?this.options.constraint.left&&this.data.new_pos.x>this.options.constraint.left&&(this.data.new_pos.x=this.options.constraint.left):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,r.time<2e3&&(s=!0),this.options.enable.x&&this.options.enable.y?Math.abs(r.x)>Math.abs(r.y)?i.x=!0:i.y=!0:this.options.enable.x?Math.abs(r.x)>Math.abs(r.y)&&(i.x=!0):Math.abs(r.y)>Math.abs(r.x)&&(i.y=!0),i.x&&(Math.abs(r.x)>this._el.drag.offsetWidth/2&&(s=!0),Math.abs(r.x)>1e4&&(this.data.direction="left",r.x>0&&(this.data.direction="right"))),i.y&&(Math.abs(r.y)>this._el.drag.offsetHeight/2&&(s=!0),Math.abs(r.y)>1e4&&(this.data.direction="up",r.y>0&&(this.data.direction="down"))),r.time<1e3||this._animateMomentum(),s&&this.data.direction?this.fire("swipe_"+this.data.direction,this.data):this.data.direction?this.fire("swipe_nodirection",this.data):this.options.snap&&(this.animator.stop(),this.animator=Cs(this._el.move,{top:this.data.pos.start.y,left:this.data.pos.start.x,duration:this.options.duration,easing:Fd}))}_animateMomentum(){var e={x:this.data.new_pos.x,y:this.data.new_pos.y},r={duration:this.options.duration,easing:Fd};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(e.y>this.options.constraint.bottom?e.y=this.options.constraint.bottom:e.y<this.options.constraint.top&&(e.y=this.options.constraint.top)),r.top=Math.floor(e.y)+"px"),this.options.enable.x&&(this.options.constraint.left&&e.x>=this.options.constraint.left&&(e.x=this.options.constraint.left),this.options.constraint.right&&e.x<this.options.constraint.right&&(e.x=this.options.constraint.right),r.left=Math.floor(e.x)+"px"),this.animator=Cs(this._el.move,r),this.fire("momentum",this.data)}}ar(gT,or);class kV{constructor(e,r,i,s){this.language=s,this._el={parent:{},container:{},slider:{},slider_background:{},line:{},marker_container_mask:{},marker_container:{},marker_item_container:{},timeaxis:{},timeaxis_background:{}},this.collapsed=!1,typeof e=="object"?this._el.container=e:this._el.container=Sh(e),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","application"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline_navigation")),this._el.container.setAttribute("aria-description",'Navigate between markers with arrow keys. Press "Home" for the first and "End" for the last markers'),this.config=r,this.options={width:600,height:600,duration:1e3,ease:Bu,has_groups:!1,optimal_tick_width:50,scale_factor:2,marker_padding:5,timenav_height_min:150,marker_height_min:30,marker_width_min:100,zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89]},this.animator=null,this.ready=!1,this._markers=[],this._eras=[],this.has_eras=!1,this._groups=[],this._calculated_row_height=100,this.current_id="",this.current_focused_id="",this.timescale={},this.timeaxis={},this.max_rows=6,this.animate_css=!1,this._swipable,wt(this.options,i)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this._onLoaded()}positionMarkers(e){for(var r=0;r<this._markers.length;r++){var i=this.timescale.getPositionInfo(r);e?this._markers[r].setClass("tl-timemarker tl-timemarker-fast"):this._markers[r].setClass("tl-timemarker"),this._markers[r].setPosition({left:i.start}),this._markers[r].setWidth(i.width)}}updateDisplay(e,r,i){let s=!1;e&&(this.options.width==0&&e>0&&(s=!0),this.options.width=e),r&&r!=this.options.height&&(this.options.height=r,this.timescale=this._getTimeScale()),this._assignRowsToMarkers(),this._el.slider_background.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._el.slider_background.style.left=-(this.options.width/2)+"px",this._el.slider.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._swipable.updateConstraint({top:!1,bottom:!1,left:this.options.width/2,right:-(this.timescale.getPixelWidth()-this.options.width/2)}),s&&this._drawTimeline(),this.goToId(this.current_id,!0)}_getTimeScale(){var e=0;try{e=parseInt(this.options.marker_height_min)}catch{ot("Invalid value for marker_height_min option."),e=30}return e==0&&(ot("marker_height_min option must not be zero."),e=30),this.max_rows=Math.round((this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding)/e),this.max_rows<1&&(this.max_rows=1),new QA(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows})}_updateTimeScale(e){this.options.scale_factor=e,this._updateDrawTimeline()}zoomIn(){var e=qne(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(e)}zoomOut(){var e=Hne(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(e)}setZoom(e){var r=this.options.zoom_sequence[e];typeof r=="number"?this.setZoomFactor(r):console.warn("Invalid zoom level. Please use an index number between 0 and "+(this.options.zoom_sequence.length-1))}setZoomFactor(e){e<=this.options.zoom_sequence[0]?this.fire("zoomtoggle",{zoom:"out",show:!1}):this.fire("zoomtoggle",{zoom:"out",show:!0}),e>=this.options.zoom_sequence[this.options.zoom_sequence.length-1]?this.fire("zoomtoggle",{zoom:"in",show:!1}):this.fire("zoomtoggle",{zoom:"in",show:!0}),e==0&&(console.warn("Zoom factor must be greater than zero. Using 0.1"),e=.1),this.options.scale_factor=e,this.goToId(this.current_id,!this._updateDrawTimeline(!0),!0)}_createGroups(){this._groups=[];var e=this.timescale.getGroupLabels();if(e){this.options.has_groups=!0;for(var r=0;r<e.length;r++)this._createGroup(e[r])}}_createGroup(e){var r=new xV(e);this._addGroup(r),this._groups.push(r)}_addGroup(e){e.addTo(this._el.container)}_positionGroups(){if(this.options.has_groups){var e=this.options.height-this._el.timeaxis_background.offsetHeight,r=Math.floor(e/this.timescale.getNumberOfRows()-this.options.marker_padding);this.timescale.getGroupLabels();for(var i=0,s=0;i<this._groups.length;i++){var a=Math.floor(s*(r+this.options.marker_padding)),o=!1;a>e-this.options.marker_padding&&(o=!0),this._groups[i].setRowPosition(a,this._calculated_row_height+this.options.marker_padding/2),this._groups[i].setAlternateRowColor(Wne(i),o),s+=this._groups[i].data.rows}}}_addMarker(e){e.addTo(this._el.marker_item_container),e.on("markerclick",this._onMarkerClick,this),e.on("added",this._onMarkerAdded,this)}_createMarker(e,r){var i=new CV(e,this.options);this._addMarker(i),r<0?this._markers.push(i):this._markers.splice(r,0,i)}_createMarkers(e){for(var r=0;r<e.length;r++)this._createMarker(e[r],-1)}_removeMarker(e){e.removeFrom(this._el.marker_item_container)}_destroyMarker(e){this._removeMarker(this._markers[e]),this._markers.splice(e,1)}_calculateMarkerHeight(e){return e/this.timescale.getNumberOfRows()-this.options.marker_padding}_calculateRowHeight(e){return e/this.timescale.getNumberOfRows()}_calculateAvailableHeight(){return this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding}_calculateMinimumTimeNavHeight(){return this.timescale.getNumberOfRows()*this.options.marker_height_min+this._el.timeaxis_background.offsetHeight+this.options.marker_padding}getMinimumHeight(){return this._calculateMinimumTimeNavHeight()}_assignRowsToMarkers(){var e=this._calculateAvailableHeight(),r=this._calculateMarkerHeight(e);this._positionGroups(),this._calculated_row_height=this._calculateRowHeight(e);for(var i=0;i<this._markers.length;i++){this._markers[i].setHeight(r);var s=this.timescale.getPositionInfo(i).row,a=Math.floor(s*(r+this.options.marker_padding))+this.options.marker_padding,o=e-a+this.options.marker_padding;this._markers[i].setRowPosition(a,o)}}_resetMarkersActive(){for(var e=0;e<this._markers.length;e++)this._markers[e].setActive(!1)}_resetMarkersBlurListeners(){for(var e=0;e<this._markers.length;e++)this._markers[e].off("markerblur",this._onMarkerBlur,this)}_findMarkerIndex(e){var r=-1;return(typeof e=="string"||e instanceof String)&&(r=hV(e,this._markers,"unique_id",r)),r}_createEras(e){for(var r=0;r<e.length;r++){var i=e[r],s=new EV(i.start_date,i.end_date,i.headline,this.options);this._eras.push(s),s.addTo(this._el.marker_item_container),s.on("added",this._onEraAdded,this)}}_positionEras(e){for(var r=0,i=0;i<this._eras.length;i++){var s={start:0,end:0,width:0};s.start=this.timescale.getPosition(this._eras[i].start_date.getTime()),s.end=this.timescale.getPosition(this._eras[i].end_date.getTime()),s.width=s.end-s.start,e?this._eras[i].setClass("tl-timeera tl-timeera-fast"):this._eras[i].setClass("tl-timeera"),this._eras[i].setPosition({left:s.start}),this._eras[i].setWidth(s.width),r++,r>5&&(r=0),this._eras[i].setColor(r)}}createMarker(e,r){this._createMarker(e,r)}createMarkers(e){this._createMarkers(e)}destroyMarker(e){this._destroyMarker(e)}destroyMarkerId(e){this.destroyMarker(this._findMarkerIndex(e))}goTo(e,r,i){var s=this.options.ease,a=this.options.duration,o=e<0?0:e;this._resetMarkersActive(),e>=0&&e<this._markers.length&&this._markers[e].setActive(!0),this.animateMovement(o,r,i,a,s),e>=0&&e<this._markers.length?this.current_id=this.current_focused_id=this._markers[e].data.unique_id:this.current_id=this.current_focused_id="",this._setLabelWithCurrentMarker()}goToId(e,r,i){this.goTo(this._findMarkerIndex(e),r,i)}focusOn(e,r,i){const s=this.options.ease,a=this.options.duration,o=e<0?0:e;this.animateMovement(o,r,i,a,s),this._resetMarkersBlurListeners(),e>=0&&e<this._markers.length&&(this._markers[e].setFocus(),this.current_focused_id=this._markers[e].data.unique_id,this._markers[e].on("markerblur",this._onMarkerBlur,this))}focusNext(){const e=this._findMarkerIndex(this.current_focused_id);e+1<this._markers.length?this.focusOn(e+1):this.focusOn(e)}focusPrevious(){const e=this._findMarkerIndex(this.current_focused_id);e-1>=0?this.focusOn(e-1):this.focusOn(e)}animateMovement(e,r,i,s,a){this.animator&&this.animator.stop(),r?(this._el.slider.className="tl-timenav-slider",this._el.slider.style.left=-this._markers[e].getLeft()+this.options.width/2+"px"):i?(this._el.slider.className="tl-timenav-slider tl-timenav-slider-animate",this.animate_css=!0,this._el.slider.style.left=-this._markers[e].getLeft()+this.options.width/2+"px"):(this._el.slider.className="tl-timenav-slider",this.animator=Cs(this._el.slider,{left:-this._markers[e].getLeft()+this.options.width/2+"px",duration:s,easing:a})),e>=0&&e<this._markers.length?this.current_id=this._markers[e].data.unique_id:this.current_id="",this._dispatchVisibleTicksChange()}goToId(e,r,i){this.goTo(this._findMarkerIndex(e),r,i)}_dispatchVisibleTicksChange(){this.ticks_change_timeout&&(clearTimeout(this.ticks_change_timeout),this.ticks_change_timeout=null),this.ticks_change_timeout=setTimeout(()=>{const e=this.timeaxis.getVisibleTicks();this.fire("visible_ticks_change",{visible_ticks:e})},this.options.duration)}_onLoaded(){this.ready=!0,this.fire("loaded",this.config)}_onMarkerAdded(e){this.fire("dateAdded",this.config)}_onEraAdded(e){this.fire("eraAdded",this.config)}_onMarkerRemoved(e){this.fire("dateRemoved",this.config)}_onMarkerClick(e){this.goToId(e.unique_id),this.fire("change",{unique_id:e.unique_id})}_onMarkerBlur(e){this.current_focused_id!==this.current_id&&this.focusOn(this._findMarkerIndex(this.current_id))}_onMouseScroll(e){var r=0,i=0,s={right:-(this.timescale.getPixelWidth()-this.options.width/2),left:this.options.width/2};e||(e=window.event),e.originalEvent&&(e=e.originalEvent),typeof e.wheelDeltaX<"u"&&(r=e.wheelDeltaY/6,Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)?r=e.wheelDeltaX/6:r=0),r&&(e.preventDefault&&e.preventDefault(),e.returnValue=!1),i=parseInt(this._el.slider.style.left.replace("px",""))+r,i>s.left?i=s.left:i<s.right&&(i=s.right),this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1),this._el.slider.style.left=i+"px"}_onDragMove(e){this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1)}_onKeydown(e){switch(Qe.stopPropagation(e),e.key){case"ArrowUp":case"ArrowRight":{this.focusNext();break}case"ArrowDown":case"ArrowLeft":{this.focusPrevious();break}case"Home":{this.focusOn(0);break}case"End":{this.focusOn(this._markers.length-1);break}}}_drawTimeline(e){this.timescale=this._getTimeScale(),this.timeaxis.drawTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(e),this._assignRowsToMarkers(),this._createGroups(),this._positionGroups(),this.has_eras&&this._positionEras(e)}_updateDrawTimeline(e){var r=!1;if(e){var i=new QA(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows});this.timescale.getMajorScale()==i.getMajorScale()&&this.timescale.getMinorScale()==i.getMinorScale()&&(r=!0)}else r=!0;return r?(this.timescale=this._getTimeScale(),this.timeaxis.positionTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(),this._assignRowsToMarkers(),this._positionGroups(),this.has_eras&&this._positionEras(),this.updateDisplay()):this._drawTimeline(!0),r}_setLabelWithCurrentMarker(){const e=this._markers[this._findMarkerIndex(this.current_focused_id)],r=e&&e.ariaLabel?`, ${e.ariaLabel}, shown`:"";this._el.container.setAttribute("aria-label",`Timeline navigation ${r}`)}_initLayout(){this._el.line=Te("div","tl-timenav-line",this._el.container),this._el.slider=Te("div","tl-timenav-slider",this._el.container),this._el.slider_background=Te("div","tl-timenav-slider-background",this._el.slider),this._el.marker_container_mask=Te("div","tl-timenav-container-mask",this._el.slider),this._el.marker_container=Te("div","tl-timenav-container",this._el.marker_container_mask),this._el.marker_item_container=Te("div","tl-timenav-item-container",this._el.marker_container),this._el.timeaxis=Te("div","tl-timeaxis",this._el.slider),this._el.timeaxis_background=Te("div","tl-timeaxis-background",this._el.container),this.timeaxis=new SV(this._el.timeaxis,this.options,this.language),this._swipable=new gT(this._el.slider_background,this._el.slider,{enable:{x:!0,y:!1},constraint:{top:!1,bottom:!1,left:this.options.width/2,right:!1},snap:!1}),this._swipable.enable()}_initEvents(){this._swipable.on("dragmove",this._onDragMove,this),Qe.addListener(this._el.container,"mousewheel",this._onMouseScroll,this),Qe.addListener(this._el.container,"DOMMouseScroll",this._onMouseScroll,this),Qe.addListener(this._el.container,"keydown",this._onKeydown,this)}_initData(){this._createMarkers(this.config.events),this.config.eras&&this.config.eras.length>0&&(this.has_eras=!0,this._createEras(this.config.eras)),this._drawTimeline()}}ar(kV,or,Ds,Ls);var e0=function(){function t(e,r){for(var i=0;i<r.length;i++){var s=r[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();function t0(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(function(){if(typeof window>"u"||typeof Element>"u")return;var t=Array.prototype.slice,e=Element.prototype.matches||Element.prototype.msMatchesSelector,r=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","details","summary","iframe","object","embed","video","[contenteditable]"].join(","),i=function(){function c(d,h){t0(this,c),this._inertManager=h,this._rootElement=d,this._managedNodes=new Set,this._rootElement.hasAttribute("aria-hidden")?this._savedAriaHidden=this._rootElement.getAttribute("aria-hidden"):this._savedAriaHidden=null,this._rootElement.setAttribute("aria-hidden","true"),this._makeSubtreeUnfocusable(this._rootElement),this._observer=new MutationObserver(this._onMutation.bind(this)),this._observer.observe(this._rootElement,{attributes:!0,childList:!0,subtree:!0})}return e0(c,[{key:"destructor",value:function(){this._observer.disconnect(),this._rootElement&&(this._savedAriaHidden!==null?this._rootElement.setAttribute("aria-hidden",this._savedAriaHidden):this._rootElement.removeAttribute("aria-hidden")),this._managedNodes.forEach(function(h){this._unmanageNode(h.node)},this),this._observer=null,this._rootElement=null,this._managedNodes=null,this._inertManager=null}},{key:"_makeSubtreeUnfocusable",value:function(h){var f=this;o(h,function(b){return f._visitNode(b)});var m=document.activeElement;if(!document.body.contains(h)){for(var v=h,y=void 0;v;){if(v.nodeType===Node.DOCUMENT_FRAGMENT_NODE){y=v;break}v=v.parentNode}y&&(m=y.activeElement)}h.contains(m)&&(m.blur(),m===document.activeElement&&document.body.focus())}},{key:"_visitNode",value:function(h){if(h.nodeType===Node.ELEMENT_NODE){var f=h;f!==this._rootElement&&f.hasAttribute("inert")&&this._adoptInertRoot(f),(e.call(f,r)||f.hasAttribute("tabindex"))&&this._manageNode(f)}}},{key:"_manageNode",value:function(h){var f=this._inertManager.register(h,this);this._managedNodes.add(f)}},{key:"_unmanageNode",value:function(h){var f=this._inertManager.deregister(h,this);f&&this._managedNodes.delete(f)}},{key:"_unmanageSubtree",value:function(h){var f=this;o(h,function(m){return f._unmanageNode(m)})}},{key:"_adoptInertRoot",value:function(h){var f=this._inertManager.getInertRoot(h);f||(this._inertManager.setInert(h,!0),f=this._inertManager.getInertRoot(h)),f.managedNodes.forEach(function(m){this._manageNode(m.node)},this)}},{key:"_onMutation",value:function(h,f){h.forEach(function(m){var v=m.target;if(m.type==="childList")t.call(m.addedNodes).forEach(function(b){this._makeSubtreeUnfocusable(b)},this),t.call(m.removedNodes).forEach(function(b){this._unmanageSubtree(b)},this);else if(m.type==="attributes"){if(m.attributeName==="tabindex")this._manageNode(v);else if(v!==this._rootElement&&m.attributeName==="inert"&&v.hasAttribute("inert")){this._adoptInertRoot(v);var y=this._inertManager.getInertRoot(v);this._managedNodes.forEach(function(b){v.contains(b.node)&&y._manageNode(b.node)})}}},this)}},{key:"managedNodes",get:function(){return new Set(this._managedNodes)}},{key:"hasSavedAriaHidden",get:function(){return this._savedAriaHidden!==null}},{key:"savedAriaHidden",set:function(h){this._savedAriaHidden=h},get:function(){return this._savedAriaHidden}}]),c}(),s=function(){function c(d,h){t0(this,c),this._node=d,this._overrodeFocusMethod=!1,this._inertRoots=new Set([h]),this._savedTabIndex=null,this._destroyed=!1,this.ensureUntabbable()}return e0(c,[{key:"destructor",value:function(){if(this._throwIfDestroyed(),this._node&&this._node.nodeType===Node.ELEMENT_NODE){var h=this._node;this._savedTabIndex!==null?h.setAttribute("tabindex",this._savedTabIndex):h.removeAttribute("tabindex"),this._overrodeFocusMethod&&delete h.focus}this._node=null,this._inertRoots=null,this._destroyed=!0}},{key:"_throwIfDestroyed",value:function(){if(this.destroyed)throw new Error("Trying to access destroyed InertNode")}},{key:"ensureUntabbable",value:function(){if(this.node.nodeType===Node.ELEMENT_NODE){var h=this.node;if(e.call(h,r)){if(h.tabIndex===-1&&this.hasSavedTabIndex)return;h.hasAttribute("tabindex")&&(this._savedTabIndex=h.tabIndex),h.setAttribute("tabindex","-1"),h.nodeType===Node.ELEMENT_NODE&&(h.focus=function(){},this._overrodeFocusMethod=!0)}else h.hasAttribute("tabindex")&&(this._savedTabIndex=h.tabIndex,h.removeAttribute("tabindex"))}}},{key:"addInertRoot",value:function(h){this._throwIfDestroyed(),this._inertRoots.add(h)}},{key:"removeInertRoot",value:function(h){this._throwIfDestroyed(),this._inertRoots.delete(h),this._inertRoots.size===0&&this.destructor()}},{key:"destroyed",get:function(){return this._destroyed}},{key:"hasSavedTabIndex",get:function(){return this._savedTabIndex!==null}},{key:"node",get:function(){return this._throwIfDestroyed(),this._node}},{key:"savedTabIndex",set:function(h){this._throwIfDestroyed(),this._savedTabIndex=h},get:function(){return this._throwIfDestroyed(),this._savedTabIndex}}]),c}(),a=function(){function c(d){if(t0(this,c),!d)throw new Error("Missing required argument; InertManager needs to wrap a document.");this._document=d,this._managedNodes=new Map,this._inertRoots=new Map,this._observer=new MutationObserver(this._watchForInert.bind(this)),l(d.head||d.body||d.documentElement),d.readyState==="loading"?d.addEventListener("DOMContentLoaded",this._onDocumentLoaded.bind(this)):this._onDocumentLoaded()}return e0(c,[{key:"setInert",value:function(h,f){if(f){if(this._inertRoots.has(h))return;var m=new i(h,this);if(h.setAttribute("inert",""),this._inertRoots.set(h,m),!this._document.body.contains(h))for(var v=h.parentNode;v;)v.nodeType===11&&l(v),v=v.parentNode}else{if(!this._inertRoots.has(h))return;var y=this._inertRoots.get(h);y.destructor(),this._inertRoots.delete(h),h.removeAttribute("inert")}}},{key:"getInertRoot",value:function(h){return this._inertRoots.get(h)}},{key:"register",value:function(h,f){var m=this._managedNodes.get(h);return m!==void 0?m.addInertRoot(f):m=new s(h,f),this._managedNodes.set(h,m),m}},{key:"deregister",value:function(h,f){var m=this._managedNodes.get(h);return m?(m.removeInertRoot(f),m.destroyed&&this._managedNodes.delete(h),m):null}},{key:"_onDocumentLoaded",value:function(){var h=t.call(this._document.querySelectorAll("[inert]"));h.forEach(function(f){this.setInert(f,!0)},this),this._observer.observe(this._document.body||this._document.documentElement,{attributes:!0,subtree:!0,childList:!0})}},{key:"_watchForInert",value:function(h,f){var m=this;h.forEach(function(v){switch(v.type){case"childList":t.call(v.addedNodes).forEach(function(_){if(_.nodeType===Node.ELEMENT_NODE){var w=t.call(_.querySelectorAll("[inert]"));e.call(_,"[inert]")&&w.unshift(_),w.forEach(function(E){this.setInert(E,!0)},m)}},m);break;case"attributes":if(v.attributeName!=="inert")return;var y=v.target,b=y.hasAttribute("inert");m.setInert(y,b);break}},this)}}]),c}();function o(c,d,h){if(c.nodeType==Node.ELEMENT_NODE){var f=c;d&&d(f);var m=f.shadowRoot;if(m){o(m,d);return}if(f.localName=="content"){for(var v=f,y=v.getDistributedNodes?v.getDistributedNodes():[],b=0;b<y.length;b++)o(y[b],d);return}if(f.localName=="slot"){for(var _=f,w=_.assignedNodes?_.assignedNodes({flatten:!0}):[],E=0;E<w.length;E++)o(w[E],d);return}}for(var N=c.firstChild;N!=null;)o(N,d),N=N.nextSibling}function l(c){if(!c.querySelector("style#inert-style, link#inert-style")){var d=document.createElement("style");d.setAttribute("id","inert-style"),d.textContent=`
[inert] {
  pointer-events: none;
  cursor: default;
}

[inert], [inert] * {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
`,c.appendChild(d)}}if(!HTMLElement.prototype.hasOwnProperty("inert")){var u=new a(document);Object.defineProperty(HTMLElement.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(d){u.setInert(this,d)}})}})();class NV{constructor(e,r,i,s){s&&this.setLanguage(s),this._el={container:{},scroll_container:{},background:{},content_container:{},content:{}},this._media=null,this._mediaclass={},this._text={},this._background_media=null,this._state={loaded:!1},this.has={headline:!1,text:!1,media:!1,title:!1,background:{image:!1,color:!1,color_value:""}},this.has.title=i,this.data={unique_id:null,background:null,start_date:null,end_date:null,location:null,text:null,media:null,autolink:!0},this.options={duration:1e3,slide_padding_lr:40,ease:Bg,width:600,height:600,skinny_size:650,media_name:""},this.active=!1,this.animator={},wt(this.options,r),wt(this.data,e),this._initLayout(),this._initEvents()}show(){this.animator=Cs(this._el.slider_container,{left:-(this._el.container.offsetWidth*n)+"px",duration:this.options.duration,easing:this.options.ease})}hide(){}setActive(e){this.active=e,this.active?(this.data.background&&this.fire("background_change",this.has.background),this._setInteractive(!0),this.loadMedia()):(this.stopMedia(),this._setInteractive(!1))}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r,i){var s,a=this.options.slide_padding_lr,o=this.options.slide_padding_lr;e?this.options.width=e:this.options.width=this._el.container.offsetWidth,s=this.options.width-this.options.slide_padding_lr*2,Ko&&this.options.width<=this.options.skinny_size?(a=0,o=0,s=this.options.width):i=="landscape"||this.options.width<=this.options.skinny_size&&(a=50,o=50,s=this.options.width-a-o),this._el.content.style.paddingLeft=a+"px",this._el.content.style.paddingRight=o+"px",this._el.content.style.width=s+"px",r?this.options.height=r:this.options.height=this._el.container.offsetHeight,this._media&&(!this.has.text&&this.has.headline?this._media.updateDisplay(s,this.options.height-this._text.headlineHeight(),i):!this.has.text&&!this.has.headline?this._media.updateDisplay(s,this.options.height,i):this.options.width<=this.options.skinny_size?this._media.updateDisplay(s,this.options.height,i):this._media.updateDisplay(s/2,this.options.height,i)),this._updateBackgroundDisplay()}loadMedia(){var e=this;this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0),this._background_media&&!this._background_media._state.loaded&&(this._background_media.on("loaded",function(){e._updateBackgroundDisplay()}),this._background_media.loadMedia())}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getBackground(){return this.has.background}scrollToTop(){this._el.container.scrollTop=0}getFormattedDate(){if(Nr(this.data.display_date).length>0)return this.data.display_date;var e="";return this.has.title||(this.data.end_date&&(e=" &mdash; "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(e=this.data.start_date.getDisplayDate(this.getLanguage())+e)),e}_initLayout(){if(this._el.container=Te("div","tl-slide"),this.has.title&&(this._el.container.className="tl-slide tl-slide-titleslide"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._el.scroll_container=Te("div","tl-slide-scrollable-container",this._el.container),this._el.content_container=Te("div","tl-slide-content-container",this._el.scroll_container),this._el.content=Te("div","tl-slide-content",this._el.content_container),this._el.background=Te("div","tl-slide-background",this._el.container),this.data.background){if(this.data.background.url){var e=Sm(this.data.background,!0);e&&(this._background_media=new e.cls(this.data.background,{background:1}),this.has.background.image=!0,this._el.container.className+=" tl-full-image-background",this.has.background.color_value="#000",this._el.background.style.display="block"),this.data.background.alt&&(this._el.background.setAttribute("role","img"),this._el.background.setAttribute("aria-label",this.data.background.alt))}this.data.background.color&&(this.has.background.color=!0,this._el.container.className+=" tl-full-color-background",this.has.background.color_value=this.data.background.color),this.data.background.text_background&&(this._el.container.className+=" tl-text-background")}this.data.media&&this.data.media.url&&this.data.media.url!=""&&(this.has.media=!0),this.data.text&&this.data.text.text&&(this.has.text=!0),this.data.text&&this.data.text.headline&&(this.has.headline=!0),this.has.media&&(this.data.media.mediatype=Sm(this.data.media),this.options.media_name=this.data.media.mediatype.name,this.options.media_type=this.data.media.mediatype.type,this.options.autolink=this.data.autolink,this._media=new this.data.media.mediatype.cls(this.data.media,this.options,this.getLanguage())),(this.has.text||this.has.headline)&&(this._text=new TV(this.data.text,{title:this.has.title,language:this.getLanguage(),autolink:this.data.autolink}),this._text.addDateText(this.getFormattedDate())),!this.has.text&&!this.has.headline&&this.has.media?(this._el.container.classList.add("tl-slide-media-only"),this._media.addTo(this._el.content)):this.has.headline&&this.has.media&&!this.has.text?(this._el.container.classList.add("tl-slide-media-only"),this._text.addTo(this._el.content),this._media.addTo(this._el.content)):this.has.text&&this.has.media?(this._text.addTo(this._el.content),this._media.addTo(this._el.content)):(this.has.text||this.has.headline)&&(this._el.container.classList.add("tl-slide-text-only"),this._text.addTo(this._el.content)),this.onLoaded()}_initEvents(){}_updateBackgroundDisplay(){this._background_media&&this._background_media._state.loaded&&(this._el.background.style.backgroundImage="url('"+this._background_media.getImageURL(this.options.width,this.options.height)+"')")}_setInteractive(e){e?this._el.container.removeAttribute("inert"):this._el.container.setAttribute("inert",!0)}}ar(NV,Ls,or,Ds);class zE{constructor(e,r,i){this._el={container:{},content_container:{},icon:{},title:{},description:{}},this.mediatype={},this.data={title:"Navigation",description:"Description",date:"Date"},this.options={direction:"previous"},this.animator=null,wt(this.options,r),wt(this.data,e),this._el.container=jc("tl-slidenav-"+this.options.direction),Ko&&this._el.container.setAttribute("ontouchstart"," "),this._initLayout(),this._initEvents(),i&&i.appendChild(this._el.container)}update(e){var r={title:"",description:"",date:e.getFormattedDate()};e.data.text&&e.data.text.headline&&(r.title=e.data.text.headline),this._update(r)}setColor(e){e?this._el.content_container.className="tl-slidenav-content-container tl-slidenav-inverted":this._el.content_container.className="tl-slidenav-content-container"}_onMouseClick(){this.fire("clicked",this.options)}_update(e){this.data=wt(this.data,e);const r=Kl(this.data.title);this._el.title.innerHTML=r;const i=Kl(this.data.date);this._el.description.innerHTML=i,this._el.container.setAttribute("aria-label",`${this.options.direction}, ${r}, ${i}`)}_initLayout(){this._el.content_container=Te("div","tl-slidenav-content-container",this._el.container),this._el.icon=Te("div","tl-slidenav-icon",this._el.content_container),this._el.title=Te("div","tl-slidenav-title",this._el.content_container),this._el.description=Te("div","tl-slidenav-description",this._el.content_container),this._el.icon.innerHTML="&nbsp;",this._update()}_initEvents(){Qe.addListener(this._el.container,"click",this._onMouseClick,this)}}ar(zE,Ds,or);class AV{constructor(e,r,i,s){s&&this.setLanguage(s),this._el={container:{},background:{},slider_container_mask:{},slider_container:{},slider_item_container:{}},this._nav={},this._nav.previous={},this._nav.next={},this.slide_spacing=0,this._slides=[],this._swipable,this.preloadTimer,this._message,this.current_id="",this.data={},this.options={id:"",layout:"portrait",width:600,height:600,default_bg_color:{r:255,g:255,b:255},slide_padding_lr:40,start_at_slide:1,slide_default_fade:"0%",duration:1e3,ease:Bu,dragging:!0,trackResize:!0},typeof e=="object"?(this._el.container=e,this.options.id=Lo(6,"tl")):(this.options.id=e,this._el.container=Sh(e)),this._el.container.id||(this._el.container.id=this.options.id),this.animator=null,wt(this.options,i),wt(this.data,r)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this.goTo(this.options.start_at_slide),this._onLoaded()}_addSlide(e){e.addTo(this._el.slider_item_container),e.on("added",this._onSlideAdded,this),e.on("background_change",this._onBackgroundChange,this)}_createSlide(e,r,i){var s=new NV(e,this.options,r,this.getLanguage());this._addSlide(s),i<0?this._slides.push(s):this._slides.splice(i,0,s)}_createSlides(e){for(var r=0;r<e.length;r++)e[r].unique_id==""&&(e[r].unique_id=Lo(6,"tl-slide")),this._createSlide(e[r],!1,-1)}_removeSlide(e){e.removeFrom(this._el.slider_item_container),e.off("added",this._onSlideRemoved,this),e.off("background_change",this._onBackgroundChange)}_destroySlide(e){this._removeSlide(this._slides[e]),this._slides.splice(e,1)}_findSlideIndex(e){var r=e;return(typeof e=="string"||e instanceof String)&&(r=hV(e,this._slides,"unique_id")),r}updateDisplay(e,r,i,s){var a,o;typeof s>"u"?o=this.options.layout:o=s,this.options.layout=o,e?this.options.width=e:this.options.width=this._el.container.offsetWidth,r?this.options.height=r:this.options.height=this._el.container.offsetHeight,this.slide_spacing=this.options.width*2,a=this.options.height/2,this._nav.next.setPosition({top:a}),this._nav.previous.setPosition({top:a});for(var l=0;l<this._slides.length;l++)this._slides[l].updateDisplay(this.options.width,this.options.height,o),this._slides[l].setPosition({left:this.slide_spacing*l,top:0});this.goToId(this.current_id,!0,!0)}createSlide(e,r){this._createSlide(e,!1,r)}createSlides(e){this._createSlides(e)}destroySlide(e){this._destroySlide(e)}destroySlideId(e){this.destroySlide(this._findSlideIndex(e))}goTo(e,r,i){e=parseInt(e),isNaN(e)&&(e=0);var s=this;this.changeBackground({color_value:"",image:!1}),this.preloadTimer&&clearTimeout(this.preloadTimer);for(var a=0;a<this._slides.length;a++)this._slides[a].setActive(!1);e<this._slides.length&&e>=0&&(this.current_id=this._slides[e].data.unique_id,this.animator&&this.animator.stop(),this._swipable&&this._swipable.stopMomentum(),r?(this._el.slider_container.style.left=-(this.slide_spacing*e)+"px",this._onSlideChange(i)):this.animator=Cs(this._el.slider_container,{left:-(this.slide_spacing*e)+"px",duration:this.options.duration,easing:this.options.ease,complete:this._onSlideChange(i)}),this._slides[e].setActive(!0),this._slides[e+1]?(this.showNav(this._nav.next,!0),this._nav.next.update(this._slides[e+1])):this.showNav(this._nav.next,!1),this._slides[e-1]?(this.showNav(this._nav.previous,!0),this._nav.previous.update(this._slides[e-1])):this.showNav(this._nav.previous,!1),this.preloadTimer=setTimeout(function(){s.preloadSlides(e)},this.options.duration))}goToId(e,r,i){this.goTo(this._findSlideIndex(e),r,i)}preloadSlides(e){this._slides[e+1]&&(this._slides[e+1].loadMedia(),this._slides[e+1].scrollToTop()),this._slides[e+2]&&(this._slides[e+2].loadMedia(),this._slides[e+2].scrollToTop()),this._slides[e-1]&&(this._slides[e-1].loadMedia(),this._slides[e-1].scrollToTop()),this._slides[e-2]&&(this._slides[e-2].loadMedia(),this._slides[e-2].scrollToTop())}next(){var e=this._findSlideIndex(this.current_id);e+1<this._slides.length?this.goTo(e+1):this.goTo(e)}previous(){var e=this._findSlideIndex(this.current_id);e-1>=0?this.goTo(e-1):this.goTo(e)}showNav(e,r){this.options.width<=500&&Ko?e.hide():r?e.show():e.hide()}changeBackground(e){var r={r:256,g:256,b:256};e.color_value&&e.color_value!=""?(r=cV(e.color_value),r||(ot("Invalid color value "+e.color_value),r=this.options.default_bg_color)):(r=this.options.default_bg_color,e.color_value="rgb("+r.r+" , "+r.g+", "+r.b+")"),r.r+""+r.g+r.b,this._el.background.style.backgroundImage="none",e.color_value?this._el.background.style.backgroundColor=e.color_value:this._el.background.style.backgroundColor="transparent",r.r<255||r.g<255||r.b<255||e.image?(this._nav.next.setColor(!0),this._nav.previous.setColor(!0)):(this._nav.next.setColor(!1),this._nav.previous.setColor(!1))}_updateDrawSlides(){for(var e=this.options.layout,r=0;r<this._slides.length;r++)this._slides[r].updateDisplay(this.options.width,this.options.height,e),this._slides[r].setPosition({left:this.slide_spacing*r,top:0});this.goToId(this.current_id,!0,!1)}_initLayout(){this._el.container.classList.add("tl-storyslider"),this._nav.previous=new zE({title:"Previous",description:"description"},{direction:"previous"},this._el.container),this._nav.next=new zE({title:"Next",description:"description"},{direction:"next"},this._el.container),this._el.slider_container_mask=Te("div","tl-slider-container-mask",this._el.container),this._el.background=Te("div","tl-slider-background tl-animate",this._el.container),this._el.slider_container=Te("div","tl-slider-container tlanimate",this._el.slider_container_mask),this._el.slider_item_container=Te("div","tl-slider-item-container",this._el.slider_container),this._el.slider_container.setAttribute("aria-live","polite"),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this._el.slider_container.style.left="0px",$i&&(this._swipable=new gT(this._el.slider_container_mask,this._el.slider_container,{enable:{x:!0,y:!1},snap:!0}),this._swipable.enable(),this._message=new Wg(this._el.container,{message_class:"tl-message-full",message_icon_class:"tl-icon-swipe-left"},this.getLanguage()),this._message.updateMessage(this._("swipe_to_navigate")),this._message.addTo(this._el.container))}_initEvents(){this._nav.next.on("clicked",this._onNavigation,this),this._nav.previous.on("clicked",this._onNavigation,this),this._message&&this._message.on("clicked",this._onMessageClick,this),this._swipable&&(this._swipable.on("swipe_left",this._onNavigation,this),this._swipable.on("swipe_right",this._onNavigation,this),this._swipable.on("swipe_nodirection",this._onSwipeNoDirection,this))}_initData(){this.data.title&&this._createSlide(this.data.title,!0,-1),this._createSlides(this.data.events)}_onBackgroundChange(e){var r=this._findSlideIndex(this.current_id),i=this._slides[r].getBackground();this.changeBackground(e),this.fire("colorchange",i)}_onMessageClick(e){this._message.hide()}_onSwipeNoDirection(e){this.goToId(this.current_id)}_onNavigation(e){e.direction=="next"||e.direction=="left"?this.next():(e.direction=="previous"||e.direction=="right")&&this.previous(),this.fire("nav_"+e.direction,this.data)}_onSlideAdded(e){ot("slideadded"),this.fire("slideAdded",this.data)}_onSlideRemoved(e){this.fire("slideRemoved",this.data)}_onSlideChange(e){e||this.fire("change",{unique_id:this.current_id})}_onMouseClick(e){}_fireMouseEvent(e){if(this._loaded){var r=e.type;r=r==="mouseenter"?"mouseover":r==="mouseleave"?"mouseout":r,this.hasEventListeners(r)&&(r==="contextmenu"&&Qe.preventDefault(e),this.fire(r,{latlng:"something",layerPoint:"something else"}))}}_onLoaded(){this.fire("loaded",this.data)}}ar(AV,Ls,or);class RV{constructor(e,r,i,s){this._el={parent:{},container:{},button_forwardtoend:{},button_backtostart:{},button_zoomin:{},button_zoomout:{},arrow:{},line:{},coverbar:{},grip:{}},this.collapsed=!1,typeof e=="object"?this._el.container=e:this._el.container=Sh(e),r&&(this._el.parent=r),this.data={visible_ticks_dates:{}},this.options={width:600,height:600,duration:1e3,ease:Bu,menubar_default_y:0},this.animator={},this.setLanguage(s),wt(this.options,i),this._initLayout(),this._initEvents()}show(e){this.options.duration}hide(e){}toogleZoomIn(e){e?this._el.button_zoomin.removeAttribute("disabled"):this._el.button_zoomin.setAttribute("disabled",!0)}toogleZoomOut(e){e?this._el.button_zoomout.removeAttribute("disabled"):this._el.button_zoomout.setAttribute("disabled",!0)}changeVisibleTicks(e){const r=e.minor;if(!r.length){this.data.visible_ticks_dates={};return}const s=r[0].date.getFullYear(),o=r[r.length-1].date.getFullYear();this.data.visible_ticks_dates={start:s,end:o},this._updateZoomAriaLabels()}setSticky(e){this.options.menubar_default_y=e}setColor(e){e?this._el.container.className="tl-menubar tl-menubar-inverted":this._el.container.className="tl-menubar"}updateDisplay(e,r,i,s){this._updateDisplay(e,r,i,s)}_onButtonZoomIn(e){this.fire("zoom_in",e)}_onButtonZoomOut(e){this.fire("zoom_out",e)}_onButtonForwardToEnd(e){this.fire("forward_to_end",e)}_onButtonBackToStart(e){this.fire("back_to_start",e)}_initLayout(){this._el.button_zoomin=jc("tl-menubar-button",this._el.container),this._el.button_zoomout=jc("tl-menubar-button",this._el.container),this._el.button_forwardtoend=jc("tl-menubar-button",this._el.container),this._el.button_backtostart=jc("tl-menubar-button",this._el.container),Ko&&this._el.container.setAttribute("ontouchstart"," "),this._el.button_backtostart.innerHTML="<span class='tl-icon-goback'></span>",this._el.button_backtostart.setAttribute("aria-label",this._("return_to_title")),this._el.button_forwardtoend.innerHTML="<span class='tl-icon-goend'></span>",this._el.button_forwardtoend.setAttribute("aria-label",this._("go_to_end")),this._el.button_zoomin.innerHTML="<span class='tl-icon-zoom-in'></span>",this._el.button_zoomin.setAttribute("aria-label",this._("zoom_in")),this._el.button_zoomout.innerHTML="<span class='tl-icon-zoom-out'></span>",this._el.button_zoomout.setAttribute("aria-label",this._("zoom_out"))}_initEvents(){Qe.addListener(this._el.button_forwardtoend,"click",this._onButtonForwardToEnd,this),Qe.addListener(this._el.button_backtostart,"click",this._onButtonBackToStart,this),Qe.addListener(this._el.button_zoomin,"click",this._onButtonZoomIn,this),Qe.addListener(this._el.button_zoomout,"click",this._onButtonZoomOut,this)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}_updateZoomAriaLabels(){Object.keys(this.data.visible_ticks_dates).length==0?(this._el.button_zoomin.setAttribute("aria-description",""),this._el.button_zoomout.setAttribute("aria-description","")):(this._el.button_zoomin.setAttribute("aria-description",this._("aria_label_zoomin",this.data.visible_ticks_dates)),this._el.button_zoomout.setAttribute("aria-description",this._("aria_label_zoomout",this.data.visible_ticks_dates)))}}ar(RV,Ds,or,Ls);let qE=null;if(document){let t=document.getElementsByTagName("script");t&&t.length>0&&(qE=t[t.length-1].src)}function Eie(t){return function(e){if(t.config){var r=e.key,i=t._getSlideIndex(self.current_id),s=t.config.events.length-1,a=t.config.title?s+1:s,o=0;r=="ArrowLeft"?i!=o&&t.goToPrev():r=="ArrowRight"&&i!=a&&t.goToNext()}}}class PV{constructor(e,r,i){if(i||(i={}),this.ready=!1,this._el={container:Sh(e),storyslider:{},timenav:{},menubar:{}},i.lang&&!i.language&&(i.language=i.lang),this.language=mT,this._storyslider={},this._timenav={},this._menubar={},this._loaded={storyslider:!1,timenav:!1},this.config=null,this.options={script_path:"https://cdn.knightlab.com/libs/timeline3/latest/js/",height:this._el.container.offsetHeight,width:this._el.container.offsetWidth,debug:!1,font:"default",is_embed:!1,is_full_embed:!1,hash_bookmark:!1,default_bg_color:{r:255,g:255,b:255},scale_factor:2,layout:"landscape",timenav_position:"bottom",optimal_tick_width:60,base_class:"tl-timeline",timenav_height:null,timenav_height_percentage:25,timenav_mobile_height_percentage:40,timenav_height_min:175,marker_height_min:30,marker_width_min:100,marker_padding:5,start_at_slide:0,start_at_end:!1,menubar_height:0,skinny_size:650,medium_size:800,use_bc:!1,duration:1e3,ease:Bu,dragging:!0,trackResize:!0,map_type:"stamen:toner-lite",slide_padding_lr:100,slide_default_fade:"0%",zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89],language:"en",ga_measurement_id:null,ga_property_id:null,track_events:["back_to_start","nav_next","nav_previous","zoom_in","zoom_out"],theme:null,sheets_proxy:"https://sheets-proxy.knightlab.com/proxy/",soundcite:!1},this.animator_timenav=null,this.animator_storyslider=null,this.animator_menubar=null,this.message=new Wg(this._el.container,{message_class:"tl-message-full"}),typeof i.default_bg_color=="string"){var s=cV(i.default_bg_color);s?i.default_bg_color=s:(delete i.default_bg_color,ot("Invalid default background color. Ignoring."))}wt(this.options,i),this.options.script_path||(this.options.script_path=this.determineScriptPath()),i.soundcite&&this.on("ready",()=>{ot("Loading Soundcite resources "),Zy("https://cdn.knightlab.com/libs/soundcite/latest/css/player.css"),Oo("https://cdn.knightlab.com/libs/soundcite/latest/js/soundcite.min.js")}),this._loadStyles(),document.addEventListener("keydown",Eie(this)),window.addEventListener("resize",(function(a){this.updateDisplay()}).bind(this)),this.options.debug&&Une(console.log),this._el.container.classList.add("tl-timeline"),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","region"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline")),this.options.is_embed&&this._el.container.classList.add("tl-timeline-embed"),this.options.is_full_embed&&this._el.container.classList.add("tl-timeline-full-embed"),this._loadLanguage(r)}_loadStyles(){let e=null,r=null;if(this.options.font&&(this.options.font.indexOf("http")==0||this.options.font.match(/\.css$/)))e=this.options.font;else if(this.options.font){let i="../css/fonts/font."+this.options.font.toLowerCase()+".css";e=new URL(i,this.options.script_path).toString()}if(e&&Zy(e),this.options.theme&&(this.options.theme.indexOf("http")==0||this.options.theme.match(/\.css$/)))r=this.options.theme;else if(this.options.theme){let i="../css/themes/timeline.theme."+this.options.theme.toLowerCase()+".css";r=new URL(i,this.options.script_path).toString()}r&&Zy(r)}_loadLanguage(e){try{var r=this.options.language,i=this.options.script_path;ire(r,i).then(s=>{s?(this.language=s,this.message.setLanguage(this.language),this.showMessage(this._("loading_timeline"))):this.showMessage(`Error loading ${r}`),this._initData(e)})}catch(s){this.showMessage(this._translateError(s))}}_initData(e){typeof e=="string"?Ure(e,{callback:(function(r){this.setConfig(r)}).bind(this),sheets_proxy:this.options.sheets_proxy}):uo==e.constructor?this.setConfig(e):this.setConfig(new uo(e))}_translateError(e){return e.hasOwnProperty("stack")&&ot(e.stack),e.message_key?this._(e.message_key)+(e.detail?" ["+e.detail+"]":""):e}showMessage(e){this.message?this.message.updateMessage(e):(ot("No message display available."),ot(e))}determineScriptPath(){let e=null;if(qE)e=qE;else{let r=document.getElementById("timeline-script-tag");r&&(e=r.src)}if(!e){let r=document.getElementsByTagName("script");for(let i=r.length-1;i>=0;i--)if(r[i].src){e=r[i].src;break}}return e?e.substr(0,e.lastIndexOf("/")+1):""}setConfig(e){if(this.config=e,this.config.isValid()&&(this.config.validate(),this._validateOptions()),this.config.isValid())try{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this._onDataLoaded.bind(this)):this._onDataLoaded()}catch(a){this.showMessage("<strong>"+this._("error")+":</strong> "+this._translateError(a))}else{for(var r=[],i=0,s=this.config.getErrors();i<s.length;i++)r.push(this._translateError(s[i]));this.showMessage("<strong>"+this._("error")+":</strong> "+r.join("<br>"))}}_onDataLoaded(){this.fire("dataloaded"),this._initLayout(),this._initEvents(),this._initAnalytics(),this.message&&this.message.hide();let e=(i,s)=>{i.reduce((a,o)=>a||o.isIntersecting,!1)&&this.updateDisplay()};new IntersectionObserver(e.bind(this)).observe(this._el.container),this.ready=!0,this.fire("ready")}_initLayout(){this.message.removeFrom(this._el.container),this._el.container.innerHTML="",this.options.timenav_position=="top"?(this._el.timenav=Te("div","tl-timenav",this._el.container),this._el.menubar=Te("div","tl-menubar",this._el.container),this._el.storyslider=Te("div","tl-storyslider",this._el.container)):(this._el.storyslider=Te("div","tl-storyslider",this._el.container),this._el.timenav=Te("div","tl-timenav",this._el.container),this._el.menubar=Te("div","tl-menubar",this._el.container)),this._el.attribution=Te("div","tl-attribution",this._el.container),this._el.attribution.innerHTML="<a href='https://timeline.knightlab.com' target='_blank' rel='noopener'><span class='tl-knightlab-logo'></span>TimelineJS</a>",this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.timenav_height=this._calculateTimeNavHeight(this.options.timenav_height),this._timenav=new kV(this._el.timenav,this.config,this.options,this.language),this._timenav.on("loaded",this._onTimeNavLoaded,this),this._timenav.options.height=this.options.timenav_height,this._timenav.init(),this.options.initial_zoom&&this.setZoom(this.options.initial_zoom),this._storyslider=new AV(this._el.storyslider,this.config,this.options,this.language),this._el.storyslider.setAttribute("role","group"),this._el.storyslider.setAttribute("aria-label",this._("aria_label_timeline_content")),this._storyslider.on("loaded",this._onStorySliderLoaded,this),this._storyslider.init(),this._menubar=new RV(this._el.menubar,this._el.container,this.options,this.getLanguage()),this.options.layout=="portrait"?this.options.storyslider_height=this.options.height-this.options.timenav_height-1:this.options.storyslider_height=this.options.height-1,this._updateDisplay()}_initEvents(){this._timenav.on("change",this._onTimeNavChange,this),this._timenav.on("zoomtoggle",this._onZoomToggle,this),this._timenav.on("visible_ticks_change",this._onVisibleTicksChange,this),this._storyslider.on("change",this._onSlideChange,this),this._storyslider.on("colorchange",this._onColorChange,this),this._storyslider.on("nav_next",this._onStorySliderNext,this),this._storyslider.on("nav_previous",this._onStorySliderPrevious,this),this._menubar.on("zoom_in",this._onZoomIn,this),this._menubar.on("zoom_out",this._onZoomOut,this),this._menubar.on("forward_to_end",this._onForwardToEnd,this),this._menubar.on("back_to_start",this._onBackToStart,this)}_onColorChange(e){this.fire("color_change",{unique_id:this.current_id},this)}_onSlideChange(e){this.current_id!=e.unique_id&&(this.current_id=e.unique_id,this._timenav.goToId(this.current_id),this._onChange(e))}_onTimeNavChange(e){this.current_id!=e.unique_id&&(this.current_id=e.unique_id,this._storyslider.goToId(this.current_id),this._onChange(e))}_onZoomToggle(e){e.zoom=="in"?this._menubar.toogleZoomIn(e.show):e.zoom=="out"&&this._menubar.toogleZoomOut(e.show)}_onChange(e){this.fire("change",{unique_id:this.current_id},this),this.options.hash_bookmark&&this.current_id&&this._updateHashBookmark(this.current_id)}_onVisibleTicksChange(e){this._menubar.changeVisibleTicks(e.visible_ticks)}_onForwardToEnd(e){this.goToEnd(),this.fire("forward_to_end",{unique_id:this.current_id},this)}_onBackToStart(e){this.goToStart(),this.fire("back_to_start",{unique_id:this.current_id},this)}_onZoomIn(e){this._timenav.zoomIn(),this.fire("zoom_in",{zoom_level:this._timenav.options.scale_factor},this)}_onZoomOut(e){this._timenav.zoomOut(),this.fire("zoom_out",{zoom_level:this._timenav.options.scale_factor},this)}_onTimeNavLoaded(){this._loaded.timenav=!0,this._onLoaded()}_onStorySliderLoaded(){this._loaded.storyslider=!0,this._onLoaded()}_onStorySliderNext(e){this.fire("nav_next",e)}_onStorySliderPrevious(e){this.fire("nav_previous",e)}_updateDisplay(e,r,i){var s=this.options.duration,a=this.options.base_class,o=0;i&&(s=i),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.width<=this.options.skinny_size?(a+=" tl-skinny",this.options.layout="portrait"):this.options.width<=this.options.medium_size?(a+=" tl-medium",this.options.layout="landscape"):this.options.layout="landscape",$i&&(this.options.layout=Fne()),Ko?(a+=" tl-mobile",this.options.timenav_height=this._calculateTimeNavHeight(e,this.options.timenav_mobile_height_percentage)):this.options.timenav_height=this._calculateTimeNavHeight(e),this.options.layout=="portrait"?a+=" tl-layout-portrait":a+=" tl-layout-landscape",this.options.storyslider_height=this.options.height-this.options.timenav_height,this.options.timenav_position=="top"?o=Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-39/2:o=Math.round(this.options.storyslider_height+1+Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-35/2),r?(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this.animator_storyslider&&this.animator_storyslider.stop(),this.animator_storyslider=Cs(this._el.storyslider,{height:this.options.storyslider_height+"px",duration:s/2,easing:Fd}),this.animator_menubar&&this.animator_menubar.stop(),this.animator_menubar=Cs(this._el.menubar,{top:o+"px",duration:s/2,easing:Fd})):(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this._el.storyslider.style.height=this.options.storyslider_height+"px",this._el.menubar.style.top=o+"px"),this.message&&this.message.updateDisplay(this.options.width,this.options.height),this._timenav.updateDisplay(this.options.width,this.options.timenav_height,r),this._storyslider.updateDisplay(this.options.width,this.options.storyslider_height,r,this.options.layout),this.language.direction=="rtl"&&(a+=" tl-rtl"),this._el.container.className=a}_calculateTimeNavHeight(e,r){var i=0;return(this.options.timenav_height_percentage||r)&&(r?i=Math.round(this.options.height/100*r):i=Math.round(this.options.height/100*this.options.timenav_height_percentage)),this._timenav.ready&&this.options.timenav_height_min<this._timenav.getMinimumHeight()&&(this.options.timenav_height_min=this._timenav.getMinimumHeight()),i<this.options.timenav_height_min&&(i=this.options.timenav_height_min),i=i-this.options.marker_padding*2,i}_validateOptions(){for(var e=["timenav_height","timenav_height_min","marker_height_min","marker_width_min","marker_padding","start_at_slide","slide_padding_lr"],r=0;r<e.length;r++){var i=e[r],s=this.options[i];let a=!0;typeof s=="number"?a=s==parseInt(s):typeof s=="string"&&(a=s.match(/^\s*(\-?\d+)?\s*$/)),a||this.config.logError({message_key:"invalid_integer_option",detail:i})}}_getSlideIndex(e){if(this.config){if(this.config.title&&this.config.title.unique_id==e)return 0;for(var r=0;r<this.config.events.length;r++)if(e==this.config.events[r].unique_id)return this.config.title?r+1:r}return-1}_getEventIndex(e){for(var r=0;r<this.config.events.length;r++)if(e==this.config.events[r].unique_id)return r;return-1}_onLoaded(){if(this._loaded.storyslider&&this._loaded.timenav&&(this.fire("loaded",this.config),$ne(this.options.start_at_end)||this.options.start_at_slide>this.config.events.length?this.goToEnd():this.goTo(this.options.start_at_slide),this.options.hash_bookmark)){window.location.hash!=""?this.goToId(window.location.hash.replace("#event-","")):this._updateHashBookmark(this.current_id);let e=this;window.addEventListener("hashchange",function(){window.location.hash.indexOf("#event-")==0&&e.goToId(window.location.hash.replace("#event-",""))},!1)}}_updateHashBookmark(e){if(e){var r="#event-"+e.toString();window.history.replaceState(null,"Browsing TimelineJS",r),this.fire("hash_updated",{unique_id:this.current_id,hashbookmark:"#event-"+e.toString()},this)}}zoomIn(){this._timenav.zoomIn()}zoomOut(){this._timenav.zoomOut()}setZoom(e){this._timenav.setZoom(e)}goToId(e){this.current_id!=e&&(this.current_id=e,this._timenav.goToId(this.current_id),this._storyslider.goToId(this.current_id,!1,!0),this.fire("change",{unique_id:this.current_id},this))}goTo(e){if(!(e<0))try{this.config.title?e===0?this.goToId(this.config.title.unique_id):this.goToId(this.config.events[e-1].unique_id):this.goToId(this.config.events[e].unique_id)}catch{return}}goToStart(){this.goTo(0)}goToEnd(){var e=this.config.events.length-1;this.goTo(this.config.title?e+1:e)}goToPrev(){this.goTo(this._getSlideIndex(this.current_id)-1),this.focusContainer()}goToNext(){this.goTo(this._getSlideIndex(this.current_id)+1),this.focusContainer()}add(e){var r=this.config.addEvent(e),i=this._getEventIndex(r),s=this.config.events[i];this._storyslider.createSlide(s,this.config.title?i+1:i),this._storyslider._updateDrawSlides(),this._timenav.createMarker(s,i),this._timenav._updateDrawTimeline(!1),this.fire("added",{unique_id:r})}remove(e){if(e>=0&&e<this.config.events.length){this.config.events[e].unique_id==this.current_id&&(e<this.config.events.length-1?this.goTo(e+1):this.goTo(e-1));var r=this.config.events.splice(e,1);delete this.config.event_dict[r[0].unique_id],this._storyslider.destroySlide(this.config.title?e+1:e),this._storyslider._updateDrawSlides(),this._timenav.destroyMarker(e),this._timenav._updateDrawTimeline(!1),this.fire("removed",{unique_id:r[0].unique_id})}}removeId(e){this.remove(this._getEventIndex(e))}getData(e){if(this.config.title){if(e==0)return this.config.title;if(e>0&&e<=this.config.events.length)return this.config.events[e-1]}else if(e>=0&&e<this.config.events.length)return this.config.events[e];return null}getDataById(e){return this.getData(this._getSlideIndex(e))}getSlide(e){return e>=0&&e<this._storyslider._slides.length?this._storyslider._slides[e]:null}getSlideById(e){return this.getSlide(this._getSlideIndex(e))}getCurrentSlide(){return this.getSlideById(this.current_id)}updateDisplay(){this.ready?this._updateDisplay():ot("updateDisplay called but timeline is not in ready state")}focusContainer(){this._el.container.focus()}_initGoogleAnalytics(e){Oo(`https://www.googletagmanager.com/gtag/js?id=${e}`),window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",e)}_initAnalytics(){let e=this.options.ga_measurement_id||this.options.ga_property_id||null;if(e){this._initGoogleAnalytics(e);var r=this.options.track_events;for(let s=0;s<r.length;s++){var i=r[s];this.addEventListener(i,function(a){gtag("event",a.type)})}}}}ar(PV,Ls,or);function Sie(){const t=S.useRef(null),[e,r]=S.useState(null),[i,s]=S.useState(!0),[a,o]=S.useState(null),l=yr(),u=S.useRef();u.current=l,S.useEffect(()=>{async function h(){try{const f=await sn(rn(It,"timelineEvents")),m=c(f);r({title:{media:{url:"",caption:"",credit:""},text:{headline:"Civil Rights Movement Timeline",text:"Key events from the Civil Rights Movement, identified from interviews from the Library of Congress Civil Rights History Project."}},events:m}),s(!1)}catch(f){console.error("Error fetching timeline data:",f),o("Failed to load timeline events."),s(!1)}}h()},[]),S.useEffect(()=>{if(e&&t.current){t.current.innerHTML="";try{new PV(t.current,e),setTimeout(d,1e3)}catch(h){console.error("Error initializing Timeline.js:",h),o("Failed to initialize timeline.")}}},[e]);const c=h=>h.docs.map(f=>{const m=f.data(),v=new Date(m.date),y=m.keywords?m.keywords.split(",").map(_=>_.trim()):[],b=`
        ${m.description||""}
        <br><br>
        <button 
          class="relevant-interviews-button" 
          data-keywords="${encodeURIComponent(y.join(","))}"
          style="background-color: #2563eb; color: white; padding: 10px 16px; border: none; border-radius: 8px; cursor: pointer; display: flex; align-items: center; font-family: inherit; font-size: 14px; font-weight: 500; transition: background-color 0.2s; box-shadow: 0 1px 3px rgba(0,0,0,0.1);"
          onmouseover="this.style.backgroundColor = '#1d4ed8'"
          onmouseout="this.style.backgroundColor = '#2563eb'"
        >
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" style="width: 20px; height: 20px; margin-right: 8px;">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
          </svg>
          Relevant Interviews
        </button>
      `;return{start_date:{year:v.getFullYear(),month:v.getMonth()+1,day:v.getDate()},text:{headline:m.title,text:b},media:{url:m.mediaUrl||"",caption:m.mediaCaption||"",credit:m.mediaCredit||""}}}),d=()=>{document.querySelectorAll(".relevant-interviews-button").forEach(h=>{h.addEventListener("click",function(f){f.preventDefault(),f.stopPropagation();const m=this.dataset.keywords;m&&u.current(`/playlist-builder?keywords=${m}`)})})};return i?p.jsxs("div",{className:"flex justify-center items-center h-96 bg-gray-50",children:[p.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),p.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):a?p.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg text-center mx-auto my-6 max-w-xl",children:a}):p.jsxs("div",{className:"w-full max-w-7xl mx-auto p-6 bg-gray-50 font-sans",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Civil Rights Timeline"}),p.jsx("p",{className:"text-base leading-relaxed text-gray-600",children:"Explore key events from the Civil Rights Movement, with links to relevant interview recordings."})]}),p.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden p-0 mb-6",children:p.jsx("div",{ref:t,id:"timeline-embed",style:{height:"600px",width:"100%",position:"relative"}})}),p.jsx("div",{className:"bg-indigo-50 rounded-xl p-4 px-6 border-l-4 border-indigo-500",children:p.jsxs("p",{className:"text-sm leading-relaxed text-indigo-800 m-0",children:[p.jsx("strong",{children:"Tip:"}),' Click on any event to see details, and use the "Relevant Interviews" button to find related interview recordings.']})})]})}function Tie({activeVisualization:t}){return p.jsxs("div",{className:"w-full max-w-5xl mx-auto p-6 bg-white shadow-md rounded-md",children:[t==="keywords"&&p.jsx(Nne,{}),t==="map"&&p.jsx(Dne,{}),t==="timeline"&&p.jsx(Sie,{})]})}function Iie(){const[t,e]=S.useState("timeline"),{user:r}=wh(),i=["timeline","keywords","map"];return p.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[p.jsx("div",{className:"text-center mb-8",children:p.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text mb-6",children:"Civil Rights History Project"})}),p.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden transition-all duration-300 mb-6",children:[p.jsx("div",{className:"border-b border-gray-200",children:p.jsx("ul",{className:"flex flex-wrap m-0 p-0 list-none",children:i.map(s=>p.jsx("li",{className:"flex-1",children:p.jsx("button",{onClick:()=>e(s),className:`w-full py-4 px-1 text-sm text-center transition-all duration-300 cursor-pointer border-0 ${t===s?"bg-indigo-50 text-blue-800 font-semibold border-b-2 border-blue-600":"bg-transparent text-gray-500 font-normal border-b-0"}`,children:s.charAt(0).toUpperCase()+s.slice(1)})},s))})}),p.jsx("div",{className:"p-6",children:p.jsx(Tie,{activeVisualization:t})})]})]})}function Cie(){var m,v;const[t,e]=S.useState(""),[r,i]=S.useState(""),[s,a]=S.useState(!1),[o,l]=S.useState(""),{login:u}=wh(),c=yr(),h=((v=(m=ti().state)==null?void 0:m.from)==null?void 0:v.pathname)||"/",f=async y=>{if(y.preventDefault(),!t||!r){l("Please enter both email and password");return}try{a(!0),l(""),await u(t,r),c(h,{replace:!0})}catch(b){console.error("Login error:",b);let _="Failed to log in";b.code==="auth/invalid-email"?_="Invalid email address":b.code==="auth/user-not-found"?_="No account found with this email":b.code==="auth/wrong-password"?_="Incorrect password":b.code==="auth/too-many-requests"&&(_="Too many failed login attempts. Please try again later"),l(_)}finally{a(!1)}};return p.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6 font-sans",children:[p.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[p.jsxs("div",{className:"mb-8",children:[p.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-4",children:"Sign in to your account"}),p.jsx("p",{className:"text-sm text-center text-gray-500 mt-2",children:"Enter your credentials to access your account"})]}),o&&p.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mb-6 rounded",children:p.jsxs("div",{className:"flex",children:[p.jsx("div",{className:"flex-shrink-0",children:p.jsx("svg",{className:"h-5 w-5 text-red-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),p.jsx("div",{className:"ml-3",children:p.jsx("p",{className:"text-sm text-red-700",children:o})})]})}),p.jsxs("form",{className:"mt-6",onSubmit:f,children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),p.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:y=>e(y.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"you@example.com"})]}),p.jsxs("div",{className:"mb-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),p.jsx("a",{href:"#",className:"text-xs text-blue-600 hover:text-blue-700 transition-colors",children:"Forgot password?"})]}),p.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:r,onChange:y=>i(y.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"••••••••"})]}),p.jsx("div",{className:"mt-8",children:p.jsx("button",{type:"submit",disabled:s,className:`w-full flex justify-center items-center py-3 px-4 relative bg-blue-600 text-white text-sm font-medium border-0 rounded-lg shadow-sm transition-colors ${s?"opacity-70 cursor-not-allowed":"hover:bg-blue-700 cursor-pointer"}`,children:s?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"absolute left-6 flex items-center",children:p.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),p.jsx("span",{children:"Signing in..."})]}):p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"absolute left-6 flex items-center",children:p.jsx("svg",{className:"h-5 w-5 text-blue-200",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),p.jsx("span",{children:"Sign in"})]})})}),p.jsx("div",{className:"mt-6 text-center",children:p.jsxs("p",{className:"text-sm text-gray-500",children:["Don't have an account?"," ",p.jsx("a",{href:"#",className:"text-blue-600 font-medium hover:text-blue-700 transition-colors",children:"Sign up"})]})})]})]}),p.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})}function xp(t){return t?t.split(",").map(e=>e.trim().toLowerCase()).filter(e=>e.length>0):[]}function Yl(t){if(!t)return null;const e=t.match(/embed\/([a-zA-Z0-9_-]+)/);return e?e[1]:null}function nR(t){if(!t)return 0;const e=t.split(":").map(Number);return e.length===2?e[0]*60+e[1]:e.length===3?e[0]*3600+e[1]*60+e[2]:0}function yc(t){if(t==null)return"0:00";const e=Math.floor(t/3600),r=Math.floor(t%3600/60),i=Math.floor(t%60);return e>0?`${e}:${r.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`:`${r}:${i.toString().padStart(2,"0")}`}function go(t){if(!t)return{startSeconds:0,endSeconds:0};const e=t.split("-").map(s=>s.trim());if(e.length!==2)return{startSeconds:0,endSeconds:0};const r=nR(e[0]),i=nR(e[1]);return{startSeconds:r,endSeconds:i}}const kie=({videoQueue:t,currentVideoIndex:e,setCurrentVideoIndex:r,currentTime:i,totalDuration:s,onSeek:a})=>{const o=S.useRef(null),l=S.useRef(null),[u,c]=S.useState(0),[d,h]=S.useState(0),[f,m]=S.useState(null),[v,y]=S.useState(null),b=S.useRef(null),[_,w]=S.useState(0),E=8;S.useEffect(()=>{let I=0;for(let R=0;R<e;R++)if(t[R]){const{startSeconds:P,endSeconds:j}=go(t[R].timestamp);I+=j-P||300}const x=Math.max(0,i);if(I+=x,h(I),s&&s>0){const R=I/s*100;c(Math.min(Math.max(0,R),100))}N()},[t,e,i,s]);const N=()=>{e<_?w(Math.max(0,e)):e>=_+E&&w(Math.max(0,e-E+1))},M=t.map((I,x)=>{const{startSeconds:R,endSeconds:P}=go(I.timestamp),j=P-R||300,$=j/s*100,U=Yl(I.videoEmbedLink);return{id:x,width:$,duration:j,isActive:x===e,videoId:U,name:I.name||"Untitled"}}),O=M.slice(_,_+E),A=(I,x)=>{if(x!==e){r(x);return}const R=b.current;if(!R)return;const P=R.getBoundingClientRect(),$=(I.clientX-P.left)/P.width,U=M[e];if(!U)return;const Y=$*U.duration;a&&a(Y)},D=I=>{if(f!==e)return;const x=b.current;if(!x)return;const R=x.getBoundingClientRect(),j=(I.clientX-R.left)/R.width;y(j)},T=()=>{y(null)};return p.jsxs("div",{children:[p.jsx("div",{ref:o,style:{position:"relative",width:"100%",backgroundColor:"#e5e7eb",marginBottom:"10px",borderRadius:"8px",overflow:"hidden",padding:"10px",boxSizing:"border-box",border:"1px solid #d1d5db",display:"flex"},children:O.map(I=>{const x=I.id,R=I.isActive;return p.jsxs("div",{onClick:P=>A(P,x),onMouseEnter:()=>m(x),onMouseLeave:()=>{m(null),T()},onMouseMove:R?D:null,style:{width:`${100/O.length}%`,minWidth:"60px",padding:"0 2px",boxSizing:"border-box",position:"relative",cursor:"pointer"},ref:R?b:null,children:[p.jsxs("div",{style:{position:"relative",overflow:"hidden",borderRadius:"6px",border:`2px solid ${R?"#3b82f6":"#d1d5db"}`,height:"70px",boxShadow:R?"0 2px 5px rgba(0,0,0,0.2)":"none"},children:[p.jsx("img",{src:`https://img.youtube.com/vi/${I.videoId}/mqdefault.jpg`,alt:`Thumbnail for segment ${x+1}`,style:{width:"100%",maxHeight:"80px",objectFit:"contain",borderRadius:"6px"},onError:P=>{P.target.src="https://via.placeholder.com/120x60?text=No+Thumbnail"}}),R&&p.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${i/I.duration*100}%`,backgroundColor:"rgba(59, 130, 246, 0.4)",transition:"width 0.2s linear"}}),R&&v!==null&&p.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${v*100}%`,backgroundColor:"rgba(239, 68, 68, 0.4)",pointerEvents:"none",zIndex:5}}),R&&v!==null&&p.jsx("div",{style:{position:"absolute",top:"5px",left:`${v*100}%`,transform:"translateX(-50%)",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",zIndex:6,pointerEvents:"none"},children:yc(v*I.duration)}),p.jsx("div",{style:{position:"absolute",bottom:"0",left:"0",right:"0",backgroundColor:"rgba(0,0,0,0.6)",color:"white",fontSize:"11px",textAlign:"center",padding:"2px 0"},children:yc(I.duration)})]}),f===x&&p.jsxs("div",{style:{position:"absolute",top:"-30px",left:"50%",transform:"translateX(-50%)",backgroundColor:"#1f2937",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",zIndex:50,whiteSpace:"nowrap"},children:[I.name," (",yc(I.duration),")"]}),p.jsx("div",{style:{position:"absolute",top:"5px",left:"5px",backgroundColor:"rgba(0,0,0,0.7)",color:"white",borderRadius:"50%",width:"18px",height:"18px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"bold"},children:x+1})]},`thumb-${x}`)})}),p.jsxs("div",{style:{position:"relative",width:"100%",height:"8px",backgroundColor:"#d1d5db",borderRadius:"4px",overflow:"hidden",marginBottom:"10px",cursor:"pointer"},onClick:I=>{const x=I.currentTarget.getBoundingClientRect(),P=(I.clientX-x.left)/x.width;let j=0,$=0,U=0;for(let Y=0;Y<M.length;Y++){const q=M[Y].width/100;if(P>=j&&P<=j+q){$=Y,U=(P-j)/q*M[Y].duration;break}j+=q}$!==e&&r($),a&&$===e&&a(U)},children:[M.map(I=>p.jsx("div",{style:{width:`${I.width}%`,height:"100%",backgroundColor:"transparent",borderRight:I.id<M.length-1?"1px solid #c4c4c4":"none",position:"relative",zIndex:2}},`bar-${I.id}`)),p.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${u}%`,backgroundColor:"#3b82f6",transition:"width 0.2s linear",zIndex:1}}),p.jsx("div",{ref:l,style:{position:"absolute",top:"-3px",left:`${u}%`,transform:"translateX(-50%)",width:"4px",height:"14px",backgroundColor:"red",borderRadius:"2px",zIndex:10,transition:"left 0.1s linear"},children:p.jsx("div",{style:{position:"absolute",top:"-4px",left:"50%",transform:"translate(-50%, -50%)",width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"red"}})})]}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 10px",backgroundColor:"#f3f4f6",borderRadius:"4px",fontSize:"12px",marginBottom:"10px"},children:[p.jsx("div",{children:yc(d)}),p.jsxs("div",{style:{fontWeight:"bold"},children:["Clip ",e+1,"/",t.length," (",u.toFixed(1),"%)"]}),p.jsx("div",{children:yc(s)})]})]})},MV=({onPrevious:t,onPlay:e,onPause:r,onNext:i,isPlaying:s,hasPrevious:a,hasNext:o})=>p.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"24px",padding:"12px",backgroundColor:"#f3f4f6",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",margin:"20px auto",border:"2px solid #d1d5db",maxWidth:"320px"},children:[p.jsx("button",{onClick:t,disabled:!a,style:{padding:"12px",borderRadius:"9999px",backgroundColor:a?"#3b82f6":"#9ca3af",color:"white",border:"none",cursor:a?"pointer":"not-allowed",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),p.jsx("button",{onClick:s?r:e,style:{padding:"16px",borderRadius:"9999px",backgroundColor:"#3b82f6",color:"white",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:s?p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6"})}):p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})}),p.jsx("button",{onClick:i,disabled:!o,style:{padding:"12px",borderRadius:"9999px",backgroundColor:o?"#3b82f6":"#9ca3af",color:"white",border:"none",cursor:o?"pointer":"not-allowed",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),Nie=({nextKeyword:t,thumbnailUrl:e,onPlay:r})=>p.jsxs("div",{style:{width:"240px",backgroundColor:"#f3f4f6",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",border:"2px solid #d1d5db",overflow:"hidden"},children:[p.jsx("div",{className:"relative",children:p.jsxs("div",{style:{width:"100%",height:"120px",backgroundImage:e?`url(${e})`:"none",backgroundColor:e?"transparent":"#e5e7eb",backgroundSize:"cover",backgroundPosition:"center"},children:[!e&&p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"text-gray-400",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),p.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:p.jsx("button",{onClick:r,style:{padding:"12px",borderRadius:"9999px",backgroundColor:"#3b82f6",color:"white",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})})})]})}),p.jsxs("div",{style:{padding:"12px"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[p.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",color:"#374151",margin:0},children:"Up Next"}),p.jsx("span",{style:{backgroundColor:"#dbeafe",color:"#1e40af",fontSize:"12px",fontWeight:"500",padding:"2px 8px",borderRadius:"4px"},children:t})]}),p.jsx("p",{style:{fontSize:"12px",color:"#6b7280",margin:0},children:"Plays automatically when current playlist ends"})]})]}),Aie=({onClick:t})=>p.jsx("button",{onClick:t,className:"flex items-center justify-center p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 focus:outline-none transition-colors duration-200",title:"Shuffle and get new clips",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{d:"M8 5a1 1 0 100 2h5.586l-1.293 1.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L13.586 5H8zM12 15a1 1 0 100-2H6.414l1.293-1.293a1 1 0 10-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L6.414 15H12z"})})}),Rie=({isOpen:t,onConfirm:e,onCancel:r,message:i})=>t?p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm mx-auto",children:[p.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Confirmation"}),p.jsx("p",{className:"text-sm text-gray-600 mb-4",children:i}),p.jsxs("div",{className:"flex justify-end space-x-3",children:[p.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),p.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Confirm"})]})]})}):null,Pie=({metadata:t,onMetadataUpdate:e})=>{const[r,i]=S.useState(!1),[s,a]=S.useState(!1),[o,l]=S.useState({}),[u,c]=S.useState(!1),[d,h]=S.useState(null),[f,m]=S.useState(!1);if(!t)return null;const v=()=>{l({...t}),a(!0),h(null),m(!1)},y=(A,D)=>{l(T=>({...T,[A]:D}))},b=async()=>{try{c(!0),h(null);let A;if(t.documentName&&t.id)A=Is(It,"interviewSummaries",t.documentName,"subSummaries",t.id);else{console.error("Unable to determine document path"),h("Unable to determine document path for saving"),c(!1);return}const D={...o};delete D.id,delete D.documentName,await _m(A,D),e&&e(o),m(!0),c(!1),setTimeout(()=>{a(!1),m(!1)},1500)}catch(A){console.error("Error updating document:",A),h(`Error saving changes: ${A.message}`),c(!1)}},_=()=>{a(!1),l({}),h(null),m(!1)},w=["summary"],E=Object.keys(t).filter(A=>!w.includes(A)&&t[A]!==void 0),N=["id","documentName","createdAt","updatedAt"],M=A=>!N.includes(A),O=(A,D)=>{const T=M(A);return typeof D=="boolean"?p.jsxs("select",{disabled:!T,value:o[A].toString(),onChange:I=>y(A,I.target.value==="true"),className:`w-full px-2 py-1 text-sm border rounded ${T?"border-blue-300":"bg-gray-100"}`,children:[p.jsx("option",{value:"true",children:"True"}),p.jsx("option",{value:"false",children:"False"})]}):typeof D=="number"?p.jsx("input",{type:"number",disabled:!T,value:o[A],onChange:I=>y(A,Number(I.target.value)),className:`w-full px-2 py-1 text-sm border rounded ${T?"border-blue-300":"bg-gray-100"}`}):typeof D=="object"?p.jsx("textarea",{disabled:!0,value:JSON.stringify(D,null,2),className:"w-full px-2 py-1 text-sm border rounded bg-gray-100",rows:3}):p.jsx("input",{type:"text",disabled:!T,value:o[A]||"",onChange:I=>y(A,I.target.value),className:`w-full px-2 py-1 text-sm border rounded ${T?"border-blue-300":"bg-gray-100"}`})};return p.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6 border border-gray-100",children:[p.jsxs("div",{className:"flex justify-between items-center mb-3",children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Clip Metadata"}),p.jsx("div",{className:"flex space-x-2",children:s?p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:b,disabled:u,className:"px-3 py-1 bg-blue-600 text-white text-sm font-medium rounded hover:bg-blue-700 transition-colors disabled:bg-blue-300",children:u?"Saving...":"Save"}),p.jsx("button",{onClick:_,disabled:u,className:"px-3 py-1 bg-gray-200 text-gray-800 text-sm font-medium rounded hover:bg-gray-300 transition-colors disabled:bg-gray-100",children:"Cancel"})]}):p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:v,className:"px-3 py-1 bg-gray-100 text-blue-600 hover:bg-gray-200 text-sm font-medium rounded transition-colors",children:"Edit"}),p.jsx("button",{onClick:()=>i(!r),className:"px-3 py-1 text-blue-600 hover:text-blue-800 text-sm font-medium",children:r?"Show Less":"Show All"})]})})]}),f&&p.jsx("div",{className:"mb-3 p-2 bg-green-100 text-green-800 text-sm rounded",children:"Changes saved successfully"}),d&&p.jsx("div",{className:"mb-3 p-2 bg-red-100 text-red-800 text-sm rounded",children:d}),p.jsx("div",{className:"grid grid-cols-2 gap-4",children:["id","documentName","timestamp","keywords"].map(A=>t[A]&&p.jsxs("div",{className:"mb-2",children:[p.jsxs("span",{className:"block text-sm font-medium text-gray-500",children:[A,":"]}),s?O(A,t[A]):p.jsx("span",{className:"block text-sm text-gray-800 break-words",children:typeof t[A]=="object"?JSON.stringify(t[A]):String(t[A])})]},A))}),r&&p.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:p.jsx("div",{className:"grid grid-cols-2 gap-4",children:E.filter(A=>!["id","documentName","timestamp","keywords"].includes(A)).map(A=>p.jsxs("div",{className:"mb-2",children:[p.jsxs("span",{className:"block text-sm font-medium text-gray-500",children:[A,":"]}),s?O(A,t[A]):p.jsx("span",{className:"block text-sm text-gray-800 break-words",children:typeof t[A]=="object"?JSON.stringify(t[A]):String(t[A])})]},A))})})]})},Die=({currentKeyword:t,excludeIds:e=[],onAddToPlaylist:r})=>{const[i,s]=S.useState([]),[a,o]=S.useState(!0),[l,u]=S.useState(null);S.useEffect(()=>{t&&c(t)},[t,e.toString()]);const c=async f=>{try{o(!0);const m=xp(f);if(m.length===0){s([]),o(!1);return}const v=await sn(rn(It,"interviewSummaries")),y=[];for(const w of v.docs){const E=w.id,N=w.data(),M=N.videoEmbedLink,O=d(M),A=rn(It,"interviewSummaries",E,"subSummaries");(await sn(A)).forEach(T=>{const I=T.data(),x=(I.keywords||"").split(",").map(P=>P.trim().toLowerCase());m.some(P=>x.includes(P))&&!e.includes(T.id)&&y.push({id:T.id,documentId:`${E}_${T.id}`,documentName:E,...I,...N,thumbnailUrl:O,_debug_parentVideoEmbedLink:M})})}const b=y.filter(w=>w.thumbnailUrl).length;console.log(`Found thumbnails for ${b} out of ${y.length} clips`);const _=Array.from(new Map(y.map(w=>[`${w.id}_${w.documentName}`,w])).values());s(_),o(!1)}catch(m){console.error("Error fetching related clips:",m),u("Error loading related clips"),o(!1)}},d=f=>{if(!f)return null;try{let m=Yl(f);if(!m){if(f.includes("youtube.com/watch"))m=new URL(f).searchParams.get("v");else if(f.includes("youtube.com/embed/")){const v=f.split("youtube.com/embed/");v.length>1&&(m=v[1].split("?")[0])}else if(f.includes("youtu.be/")){const v=f.split("youtu.be/");v.length>1&&(m=v[1].split("?")[0])}else if(f.includes("<iframe")&&f.includes("src=")){const v=f.match(/src=["'](.*?)["']/);if(v&&v[1])return d(v[1])}}if(m)return`https://img.youtube.com/vi/${m}/mqdefault.jpg`;console.log("Could not extract video ID from:",f)}catch(m){console.error("Error extracting video ID for thumbnail:",m,"from link:",f)}return null},h=f=>{r&&r(f)};return a?p.jsx("div",{className:"py-4",children:p.jsx("div",{className:"flex justify-center items-center",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})})}):l?p.jsx("div",{className:"p-4 bg-red-50 text-red-700 rounded-md",children:l}):i.length===0?null:p.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-sm p-6",children:[p.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Related Clips"}),p.jsx("div",{className:"overflow-x-auto pb-4",children:p.jsx("div",{className:"flex space-x-4",style:{minWidth:"min-content"},children:i.map((f,m)=>p.jsxs("div",{className:"flex-shrink-0 w-64 bg-gray-50 rounded-md overflow-hidden shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>h(f),children:[f.thumbnailUrl?p.jsxs("div",{className:"relative pb-[56.25%] bg-gray-200",children:[p.jsx("img",{src:f.thumbnailUrl,alt:f.name||"Video thumbnail",className:"absolute top-0 left-0 w-full h-full object-cover",onError:v=>{console.log("Thumbnail failed to load:",f.thumbnailUrl),v.target.onerror=null,v.target.style.display="none",v.target.parentElement.innerHTML=`
                        <div class="absolute top-0 left-0 w-full h-full flex items-center justify-center bg-gray-200">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                          </svg>
                        </div>
                      `}}),p.jsx("div",{className:"absolute inset-0 flex items-center justify-center hover:bg-black hover:bg-opacity-30 transition-all",children:p.jsx("span",{className:"text-white font-medium rounded-full p-2 bg-blue-600 opacity-0 hover:opacity-100 transition-opacity",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})})]}):p.jsxs("div",{className:"h-36 bg-gray-200 flex flex-col items-center justify-center",children:[p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),p.jsx("span",{className:"text-gray-500 text-sm",children:"Video Preview"})]}),p.jsxs("div",{className:"p-3",children:[p.jsx("h4",{className:"font-medium text-gray-900 line-clamp-1",title:f.name,children:f.name||"Unnamed clip"}),p.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-1",title:f.topic||"",children:f.topic||"No topic"}),f.timestamp&&p.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.timestamp}),p.jsx("button",{className:"mt-2 w-full py-1 px-2 bg-blue-50 text-blue-600 text-sm font-medium rounded hover:bg-blue-100 transition-colors",children:"Add to Playlist"})]})]},`${f.documentId||`${f.id}_${f.documentName}`}_${m}`))})})]})},Mie=({video:t,onVideoEnd:e,onPlay:r,onPause:i,onTimeUpdate:s,isPlaying:a,seekToTime:o})=>{const l=S.useRef(null),u=S.useRef(null),c=S.useRef(null),[d,h]=S.useState(!1),[f,m]=S.useState(null),v=S.useRef(null),y=()=>{if(!t)return{startSeconds:0,endSeconds:0};try{const{startSeconds:b,endSeconds:_}=go(t.timestamp),w=Number.isFinite(b)?Math.max(0,b):0,E=Number.isFinite(_)&&_>w?_:w+300;return console.log(`Video boundaries: ${w}s to ${E}s (duration: ${E-w}s)`),{startSeconds:w,endSeconds:E}}catch(b){return console.error("Error parsing timestamp:",b,"Using defaults"),{startSeconds:0,endSeconds:300}}};return S.useEffect(()=>{if(!t||!u.current)return;const b=Yl(t.videoEmbedLink);if(!b){console.error("Invalid video embed link:",t.videoEmbedLink);return}const{startSeconds:_}=y(),w=()=>{l.current&&l.current.destroy();try{l.current=new window.YT.Player(u.current,{height:"405",width:"720",videoId:b,playerVars:{autoplay:1,controls:0,rel:0,modestbranding:1,start:_,enablejsapi:1},events:{onReady:E=>{console.log("YouTube Player Ready");const N=E.target.getDuration();if(console.log(`Video actual duration: ${N}s`),_>=N&&(console.error(`Invalid timestamp: start time (${_}s) is beyond video duration (${N}s)`),E.target.seekTo(0,!0),t&&t.id&&e)){console.warn(`Skipping invalid clip with ID: ${t.id}`),setTimeout(()=>{e()},500);return}s&&s(0),h(!0),E.target.seekTo(Math.min(_,N-1),!0),a?E.target.playVideo():E.target.pauseVideo()},onStateChange:E=>{const N=E.data;if(m(N),N===window.YT.PlayerState.PLAYING){if(s){const M=E.target.getCurrentTime();Math.max(0,M-_)<1&&s(0)}r&&r()}else N===window.YT.PlayerState.PAUSED?i&&i():N===window.YT.PlayerState.ENDED&&e&&e()},onError:E=>{console.error("YouTube player error:",E.data),e&&(console.warn("Video error detected, skipping to next clip"),setTimeout(()=>{e()},500))}}})}catch(E){console.error("Error creating YouTube player:",E)}};if(window.YT&&window.YT.Player)w();else{const E=document.createElement("script");E.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=w;const N=document.getElementsByTagName("script")[0];N.parentNode.insertBefore(E,N)}return()=>{l.current&&(l.current.destroy(),l.current=null),h(!1)}},[t]),S.useEffect(()=>{if(!(!d||!l.current))try{a?l.current.playVideo():l.current.pauseVideo()}catch(b){console.error("Error controlling player:",b)}},[a,d]),S.useEffect(()=>{if(!(!d||!l.current||o===void 0||o===null)&&v.current!==o)try{const{startSeconds:b}=y(),_=b+o;console.log(`Seeking to ${o}s within clip (absolute: ${_}s)`),l.current.seekTo(_,!0),v.current=o}catch(b){console.error("Error seeking:",b)}},[o,d]),S.useEffect(()=>{if(!d||!l.current)return;const{startSeconds:b,endSeconds:_}=y(),w=_-b;return(()=>{try{if(l.current&&l.current.getCurrentTime){const N=l.current.getCurrentTime(),M=Math.max(0,N-b);s&&M>=0&&s(M)}}catch(N){console.error("Error syncing time immediately:",N)}})(),c.current&&(clearInterval(c.current),c.current=null),a&&(c.current=setInterval(()=>{try{if(!l.current||!l.current.getCurrentTime)return;const N=l.current.getCurrentTime(),M=Math.max(0,N-b);if(l.current.getPlayerState()!==window.YT.PlayerState.PLAYING)return;s&&s(M),M>=w-.5&&(console.log(`Reached end of clip: ${M}s / ${w}s`),e&&(clearInterval(c.current),c.current=null,e()))}catch(N){console.error("Error in time tracking:",N)}},250)),()=>{c.current&&(clearInterval(c.current),c.current=null)}},[a,d,t]),p.jsxs("div",{className:"video-player-wrapper relative",children:[p.jsx("div",{ref:u,className:"rounded-lg shadow-lg bg-black w-full aspect-video"}),!d&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})})]})},Lie=()=>{const[t]=fg(),e=yr(),[r,i]=S.useState(""),[s,a]=S.useState([]),[o,l]=S.useState(0),[u,c]=S.useState(!0),[d,h]=S.useState(null),[f,m]=S.useState(0),[v,y]=S.useState(!0),[b,_]=S.useState(0),[w,E]=S.useState(0),[N,M]=S.useState(0),[O,A]=S.useState(null),[D,T]=S.useState(!1),[I,x]=S.useState(!1),[R,P]=S.useState(!1),[j,$]=S.useState([]),[U,Y]=S.useState({}),[q,F]=S.useState(""),[W,Q]=S.useState(""),[H,X]=S.useState(!1),J=S.useRef(null),ee=S.useRef(null);S.useEffect(()=>{if(s.length>0){const oe=s.reduce((pe,be)=>{const{startSeconds:Le,endSeconds:Ce}=go(be.timestamp);return pe+(Ce-Le||300)},0);console.log("Calculated total duration:",oe),M(oe)}},[s]),S.useEffect(()=>{const oe=t.get("keywords");oe&&(console.log(`Found keyword: ${oe}`),i(oe))},[t]),S.useEffect(()=>{r&&(console.log(`Searching videos for: ${r}`),ye())},[r]),S.useEffect(()=>{r&&U[r]?m(U[r]):r&&se(r)},[r,U]);const se=async oe=>{if(oe)try{let pe=0;const be=await sn(rn(It,"interviewSummaries"));for(const Le of be.docs){const Ce=Le.id,We=rn(It,"interviewSummaries",Ce,"subSummaries");(await sn(We)).forEach(ft=>{(ft.data().keywords||"").split(",").map(xt=>xt.trim().toLowerCase()).includes(oe.toLowerCase())&&pe++})}console.log(`Total clips for keyword "${oe}": ${pe}`),m(pe),Y(Le=>({...Le,[oe]:pe}))}catch(pe){console.error("Error counting clips:",pe)}};S.useEffect(()=>()=>{J.current&&clearTimeout(J.current)},[]);const ce=oe=>{if(s.some(be=>be.id===oe.id)){console.log("Clip is already in the playlist:",oe.id),x({message:"This clip is already in your playlist",type:"info"}),J.current&&clearTimeout(J.current),J.current=setTimeout(()=>{x(!1)},3e3);return}a(be=>[...be,oe]),x({message:"Clip added to playlist",type:"success"}),J.current&&clearTimeout(J.current),J.current=setTimeout(()=>{x(!1)},3e3),console.log("Added clip to playlist:",oe.id)},Se=async()=>{if(!R)try{P(!0);const oe=xp(r),pe=await Ie(oe),be=s.map(Ce=>Ce.id),Le=pe.filter(Ce=>!be.includes(Ce.id));Le.length===0?x({message:"All available clips are already in your playlist",type:"info"}):(a(Ce=>[...Ce,...Le]),x({message:`Added ${Le.length} clips to playlist`,type:"success"})),J.current&&clearTimeout(J.current),J.current=setTimeout(()=>{x(!1)},3e3)}catch(oe){console.error("Error adding all clips:",oe),x({message:"Error adding clips to playlist",type:"error"})}finally{P(!1)}};S.useEffect(()=>{ge()},[]),S.useEffect(()=>{j.length>0&&r&&ke()},[j,r,U]),S.useEffect(()=>(H&&q&&(ee.current&&clearTimeout(ee.current),ee.current=setTimeout(()=>{console.log(`Navigating to next playlist: ${q}`),e(`?keywords=${encodeURIComponent(q)}`),X(!1)},3e3)),()=>{ee.current&&clearTimeout(ee.current)}),[H,q,e]),S.useEffect(()=>{s.length>0&&(_(0),A(null),console.log("Video index changed to:",o))},[o]);const Ee=()=>{if(!s.length)return 0;let oe=0;for(let pe=0;pe<o;pe++){const{startSeconds:be,endSeconds:Le}=go(s[pe].timestamp);oe+=Le-be||300}return oe},ie=oe=>{_(oe),E(Ee()+oe)},ue=oe=>{console.log(`Seeking to ${oe}s within current video`),A(oe)},ge=async()=>{try{const oe={},pe=await sn(rn(It,"interviewSummaries"));for(const Le of pe.docs){const Ce=Le.id,We=rn(It,"interviewSummaries",Ce,"subSummaries");(await sn(We)).forEach(ft=>{(ft.data().keywords||"").split(",").map(xt=>xt.trim().toLowerCase()).forEach(xt=>{xt&&(oe[xt]=(oe[xt]||0)+1)})})}const be=Object.keys(oe).filter(Le=>oe[Le]>1);console.log(`Found ${be.length} keywords with multiple clips out of ${Object.keys(oe).length} total keywords`),$(be),Y(oe)}catch(oe){console.error("Error fetching available keywords:",oe)}},ke=()=>{if(j.length===0)return;const oe=j.filter(Le=>Le!==r);if(oe.length===0)return;const pe=Math.floor(Math.random()*oe.length),be=oe[pe];console.log(`Selected next keyword: ${be} with ${U[be]||"?"} clips`),F(be),Re(be)},Re=async oe=>{try{const pe=xp(oe);if(pe.length===0)return;const be=await Ie(pe);if(be.length>0){const Le=be[0];if(Le.videoEmbedLink){const Ce=Yl(Le.videoEmbedLink);if(Ce){const We=`https://img.youtube.com/vi/${Ce}/mqdefault.jpg`;Q(We);return}}}Q("")}catch(pe){console.error("Error fetching thumbnail:",pe),Q("")}},_e=()=>{q&&e(`?keywords=${encodeURIComponent(q)}`)},V=()=>{T(!0)},B=()=>{T(!1),ye()},G=()=>{T(!1)},K=oe=>{a(pe=>{const be=[...pe];return be[o]={...be[o],...oe},be})},re=oe=>oe.sort(()=>Math.random()-.5),le=async oe=>new Promise(pe=>{try{const be=document.createElement("div");be.style.position="absolute",be.style.left="-9999px",be.style.top="-9999px",document.body.appendChild(be);const Le=new window.YT.Player(be,{height:"1",width:"1",videoId:oe,events:{onReady:Ce=>{try{const We=Ce.target.getDuration();console.log(`Got duration for video ${oe}: ${We}s`),pe(We)}catch(We){console.error(`Error getting duration for ${oe}:`,We),pe(0)}finally{if(Le)try{Le.destroy()}catch(We){console.error("Error destroying temp player:",We)}be.parentNode&&document.body.removeChild(be)}},onError:()=>{console.error(`Could not load video ${oe} for duration check`),be.parentNode&&document.body.removeChild(be),pe(0)}}});setTimeout(()=>{if(Le)try{Le.destroy()}catch(Ce){console.error("Error destroying temp player on timeout:",Ce)}be.parentNode&&document.body.removeChild(be),pe(0)},1e4)}catch(be){console.error("Error in duration check:",be),pe(0)}}),he=async oe=>{try{const pe=Yl(oe.videoEmbedLink);if(!pe)return!1;const{startSeconds:be}=go(oe.timestamp);if(isNaN(be)||be<0)return!1;if(!window.YT||!window.YT.Player)return console.warn("YouTube API not loaded yet, can't validate duration"),!0;const Le=await le(pe),Ce=Le>0&&be<Le-5;return Ce||console.warn(`Invalid timestamp detected: ${oe.timestamp} exceeds video duration ${Le}s for video ID ${pe}`),Ce}catch(pe){return console.error("Error validating video timestamp:",pe),!1}},ye=async()=>{try{c(!0);const oe=xp(r);if(oe.length===0){h("Please enter at least one keyword"),c(!1);return}let pe=await Ie(oe);if(pe.length>0){pe=pe.filter(Ce=>{try{const{startSeconds:We,endSeconds:yt}=go(Ce.timestamp);return isNaN(We)||We<0?(console.warn(`Filtering out video with invalid start time: ${Ce.id}, ${Ce.timestamp}`),!1):yt&&yt<=We?(console.warn(`Filtering out video with invalid time range: ${Ce.id}, ${Ce.timestamp}`),!1):!0}catch{return console.warn(`Filtering out video with unparseable timestamp: ${Ce.id}, ${Ce.timestamp}`),!1}});const be=re(pe).slice(0,Math.min(10,pe.length));console.log(`Checking durations for ${be.length} candidate videos...`),(!window.YT||!window.YT.Player)&&(console.log("Loading YouTube API..."),await new Promise(Ce=>{const We=document.createElement("script");We.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=()=>{console.log("YouTube API ready"),Ce()};const yt=document.getElementsByTagName("script")[0];yt.parentNode.insertBefore(We,yt),setTimeout(Ce,5e3)}));const Le=[];for(const Ce of be){if(Le.length>=3)break;await he(Ce)&&Le.push(Ce)}Le.length>0?(console.log(`Selected ${Le.length} valid videos from ${be.length} candidates`),a(Le),l(0),y(!0),_(0),E(0),X(!1)):h("No videos with valid timestamps found for this keyword")}else h("No videos found for this keyword");c(!1)}catch(oe){console.error("Error searching videos:",oe),h("Error searching videos"),c(!1)}},Ie=async oe=>{const pe=await sn(rn(It,"interviewSummaries")),be=[];for(const Le of pe.docs){const Ce=Le.id,We=Le.data(),yt=We.videoEmbedLink,ft=yt?`https://img.youtube.com/vi/${Yl(yt)}/mqdefault.jpg`:null,gn=rn(It,"interviewSummaries",Ce,"subSummaries");(await sn(gn)).forEach(xt=>{const jn=xt.data(),St=(jn.keywords||"").split(",").map(Fr=>Fr.trim().toLowerCase());oe.some(Fr=>St.includes(Fr))&&be.push({id:xt.id,documentName:Ce,...jn,...We,thumbnailUrl:ft})})}return be},Be=()=>{o<s.length-1&&(l(o+1),y(!0))},Oe=()=>{o>0&&(l(o-1),y(!0))},ze=()=>{console.log(`Video end triggered for index ${o}/${s.length-1}`),setTimeout(()=>{o<s.length-1?(console.log(`Advancing to next video: ${o+1}`),l(o+1)):(console.log("Playlist ended, preparing to play next keyword"),X(!0))},500)},lt=()=>{y(!0)},vt=()=>{y(!1)},At=()=>!s.length||o>=s.length?null:s[o];if(u)return p.jsx("div",{className:"flex justify-center items-center h-64",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(d)return p.jsx("div",{className:"max-w-7xl mx-auto p-4",children:p.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:p.jsx("p",{children:d})})});const Ke=At(),Ne=s.length>0;return p.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[I&&p.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-3 rounded-md shadow-md transition-all duration-300 ${I.type==="success"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:p.jsxs("div",{className:"flex items-center",children:[I.type==="success"?p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2h-1V9z",clipRule:"evenodd"})}),p.jsx("span",{children:I.message})]})}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:r}),p.jsx("div",{className:"flex items-center space-x-4",children:p.jsxs("div",{className:"flex items-center",children:[p.jsxs("span",{className:"text-blue-800 font-medium",children:[f," total clip",f!==1?"s":""," available"]}),p.jsx("span",{className:"mx-2 text-gray-400",children:"•"}),p.jsxs("span",{className:"text-gray-600",children:[s.length," clip",s.length!==1?"s":""," in current playlist"]})]})})]}),p.jsxs("div",{className:"relative",children:[q&&p.jsx("div",{className:"absolute top-0 right-0 z-10",children:p.jsx(Nie,{nextKeyword:q,thumbnailUrl:W,onPlay:_e})}),p.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[p.jsx("div",{className:"w-full max-w-2xl mx-auto relative rounded-lg overflow-hidden",children:Ke?p.jsx(Mie,{video:Ke,onVideoEnd:ze,onPlay:lt,onPause:vt,onTimeUpdate:ie,isPlaying:v,seekToTime:O}):p.jsx("div",{className:"flex items-center justify-center w-full h-64 bg-gray-200 rounded-lg text-gray-600 font-medium",children:"No videos available"})}),Ne&&p.jsx("div",{className:"mt-6 mb-4 w-full max-w-2xl mx-auto",children:p.jsx(kie,{videoQueue:s,currentVideoIndex:o,setCurrentVideoIndex:l,currentTime:b,totalDuration:N,onSeek:ue})}),p.jsxs("div",{className:"w-full max-w-2xl mx-auto py-3 mt-5",children:[p.jsx("div",{className:"flex justify-center items-center mb-4",children:p.jsx(MV,{onPrevious:Oe,onPlay:lt,onPause:vt,onNext:Be,isPlaying:v,hasPrevious:o>0,hasNext:o<s.length-1})}),p.jsxs("div",{className:"flex justify-center items-center space-x-4",children:[p.jsx(Aie,{onClick:V}),p.jsx("button",{onClick:Se,disabled:R,className:`flex items-center justify-center ${R?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"} text-white px-4 py-2 rounded-md text-sm font-medium transition-colors w-44`,title:"Add all remaining clips with this keyword to your playlist",children:R?p.jsxs(p.Fragment,{children:[p.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding..."]}):"Listen to Full Playlist"})]})]})]}),Ke&&p.jsx(Pie,{metadata:Ke,onMetadataUpdate:K}),Ke&&p.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:p.jsx("span",{onClick:()=>e(`/interview-player?documentName=${encodeURIComponent(Ke.documentName)}`),className:"hover:text-blue-600 hover:underline transition-colors cursor-pointer",children:Ke.name})}),p.jsx("p",{className:"text-sm italic text-gray-500 mb-4",children:Ke.role}),p.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 mb-4",children:p.jsx("p",{className:"m-0 text-base leading-relaxed text-gray-700",children:Ke.summary})}),Ke.keywords&&Ke.keywords.length>0&&p.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:(Array.isArray(Ke.keywords)?Ke.keywords:Ke.keywords.split(",").map(oe=>oe.trim())).map((oe,pe)=>p.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs flex items-center gap-1 cursor-pointer hover:bg-blue-200 transition-colors",onClick:()=>e(`/playlist-builder?keywords=${encodeURIComponent(oe)}`),children:[p.jsx(O8,{size:12})," ",oe]},pe))}),p.jsx("div",{className:"mt-4",children:p.jsx("button",{className:"text-sm text-blue-600 hover:underline hover:text-blue-800 transition-colors",onClick:()=>e(`/clip-player?documentName=${encodeURIComponent(Ke.documentName)}&clipId=${encodeURIComponent(Ke.id)}`),children:"▶ View this clip as a standalone page"})})]})]}),r&&s.length>0&&p.jsx(Die,{currentKeyword:r,excludeIds:s.map(oe=>oe.id),onAddToPlaylist:ce}),p.jsx(Rie,{isOpen:D,onConfirm:B,onCancel:G,message:"Are you sure you want to hear a new set of clips on this topic?"})]})};function HE(t,e){return HE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},HE(t,e)}function LV(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,HE(t,e)}function Ue(){return Ue=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ue.apply(null,arguments)}function Ud(t){"@babel/helpers - typeof";return Ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ud(t)}function Oie(t,e){if(Ud(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(Ud(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function jie(t){var e=Oie(t,"string");return Ud(e)=="symbol"?e:e+""}function Vie(t,e,r){return(e=jie(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function iR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rR(Object(r),!0).forEach(function(i){Vie(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rR(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function lr(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var sR=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),aR=function(){return Math.random().toString(36).substring(7).split("").join(".")},oR={INIT:"@@redux/INIT"+aR(),REPLACE:"@@redux/REPLACE"+aR()};function Fie(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function OV(t,e,r){var i;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(lr(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(lr(1));return r(OV)(t,e)}if(typeof t!="function")throw new Error(lr(2));var s=t,a=e,o=[],l=o,u=!1;function c(){l===o&&(l=o.slice())}function d(){if(u)throw new Error(lr(3));return a}function h(y){if(typeof y!="function")throw new Error(lr(4));if(u)throw new Error(lr(5));var b=!0;return c(),l.push(y),function(){if(b){if(u)throw new Error(lr(6));b=!1,c();var w=l.indexOf(y);l.splice(w,1),o=null}}}function f(y){if(!Fie(y))throw new Error(lr(7));if(typeof y.type>"u")throw new Error(lr(8));if(u)throw new Error(lr(9));try{u=!0,a=s(a,y)}finally{u=!1}for(var b=o=l,_=0;_<b.length;_++){var w=b[_];w()}return y}function m(y){if(typeof y!="function")throw new Error(lr(10));s=y,f({type:oR.REPLACE})}function v(){var y,b=h;return y={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(lr(11));function E(){w.next&&w.next(d())}E();var N=b(E);return{unsubscribe:N}}},y[sR]=function(){return this},y}return f({type:oR.INIT}),i={dispatch:f,subscribe:h,getState:d,replaceReducer:m},i[sR]=v,i}function lR(t,e){return function(){return e(t.apply(this,arguments))}}function uR(t,e){if(typeof t=="function")return lR(t,e);if(typeof t!="object"||t===null)throw new Error(lr(16));var r={};for(var i in t){var s=t[i];typeof s=="function"&&(r[i]=lR(s,e))}return r}function jV(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(i){return i}:e.length===1?e[0]:e.reduce(function(i,s){return function(){return i(s.apply(void 0,arguments))}})}function $ie(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(i){return function(){var s=i.apply(void 0,arguments),a=function(){throw new Error(lr(15))},o={getState:s.getState,dispatch:function(){return a.apply(void 0,arguments)}},l=e.map(function(u){return u(o)});return a=jV.apply(void 0,l)(s.dispatch),iR(iR({},s),{},{dispatch:a})}}}var VV=te.createContext(null);function Uie(t){t()}var FV=Uie,Bie=function(e){return FV=e},zie=function(){return FV};function qie(){var t=zie(),e=null,r=null;return{clear:function(){e=null,r=null},notify:function(){t(function(){for(var s=e;s;)s.callback(),s=s.next})},get:function(){for(var s=[],a=e;a;)s.push(a),a=a.next;return s},subscribe:function(s){var a=!0,o=r={callback:s,next:null,prev:r};return o.prev?o.prev.next=o:e=o,function(){!a||e===null||(a=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var cR={notify:function(){},get:function(){return[]}};function $V(t,e){var r,i=cR;function s(h){return u(),i.subscribe(h)}function a(){i.notify()}function o(){d.onStateChange&&d.onStateChange()}function l(){return!!r}function u(){r||(r=e?e.addNestedSub(o):t.subscribe(o),i=qie())}function c(){r&&(r(),r=void 0,i.clear(),i=cR)}var d={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:o,isSubscribed:l,trySubscribe:u,tryUnsubscribe:c,getListeners:function(){return i}};return d}var UV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?S.useLayoutEffect:S.useEffect;function Hie(t){var e=t.store,r=t.context,i=t.children,s=S.useMemo(function(){var l=$V(e);return{store:e,subscription:l}},[e]),a=S.useMemo(function(){return e.getState()},[e]);UV(function(){var l=s.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[s,a]);var o=r||VV;return te.createElement(o.Provider,{value:s},i)}function Tm(t,e){if(t==null)return{};var r={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;r[i]=t[i]}return r}var BV={exports:{}},bt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cn=typeof Symbol=="function"&&Symbol.for,vT=Cn?Symbol.for("react.element"):60103,yT=Cn?Symbol.for("react.portal"):60106,Kg=Cn?Symbol.for("react.fragment"):60107,Yg=Cn?Symbol.for("react.strict_mode"):60108,Xg=Cn?Symbol.for("react.profiler"):60114,Qg=Cn?Symbol.for("react.provider"):60109,Jg=Cn?Symbol.for("react.context"):60110,_T=Cn?Symbol.for("react.async_mode"):60111,Zg=Cn?Symbol.for("react.concurrent_mode"):60111,ev=Cn?Symbol.for("react.forward_ref"):60112,tv=Cn?Symbol.for("react.suspense"):60113,Wie=Cn?Symbol.for("react.suspense_list"):60120,nv=Cn?Symbol.for("react.memo"):60115,rv=Cn?Symbol.for("react.lazy"):60116,Gie=Cn?Symbol.for("react.block"):60121,Kie=Cn?Symbol.for("react.fundamental"):60117,Yie=Cn?Symbol.for("react.responder"):60118,Xie=Cn?Symbol.for("react.scope"):60119;function Vr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case vT:switch(t=t.type,t){case _T:case Zg:case Kg:case Xg:case Yg:case tv:return t;default:switch(t=t&&t.$$typeof,t){case Jg:case ev:case rv:case nv:case Qg:return t;default:return e}}case yT:return e}}}function zV(t){return Vr(t)===Zg}bt.AsyncMode=_T;bt.ConcurrentMode=Zg;bt.ContextConsumer=Jg;bt.ContextProvider=Qg;bt.Element=vT;bt.ForwardRef=ev;bt.Fragment=Kg;bt.Lazy=rv;bt.Memo=nv;bt.Portal=yT;bt.Profiler=Xg;bt.StrictMode=Yg;bt.Suspense=tv;bt.isAsyncMode=function(t){return zV(t)||Vr(t)===_T};bt.isConcurrentMode=zV;bt.isContextConsumer=function(t){return Vr(t)===Jg};bt.isContextProvider=function(t){return Vr(t)===Qg};bt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===vT};bt.isForwardRef=function(t){return Vr(t)===ev};bt.isFragment=function(t){return Vr(t)===Kg};bt.isLazy=function(t){return Vr(t)===rv};bt.isMemo=function(t){return Vr(t)===nv};bt.isPortal=function(t){return Vr(t)===yT};bt.isProfiler=function(t){return Vr(t)===Xg};bt.isStrictMode=function(t){return Vr(t)===Yg};bt.isSuspense=function(t){return Vr(t)===tv};bt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Kg||t===Zg||t===Xg||t===Yg||t===tv||t===Wie||typeof t=="object"&&t!==null&&(t.$$typeof===rv||t.$$typeof===nv||t.$$typeof===Qg||t.$$typeof===Jg||t.$$typeof===ev||t.$$typeof===Kie||t.$$typeof===Yie||t.$$typeof===Xie||t.$$typeof===Gie)};bt.typeOf=Vr;BV.exports=bt;var Qie=BV.exports,wT=Qie,Jie={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Zie={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ese={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},qV={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},bT={};bT[wT.ForwardRef]=ese;bT[wT.Memo]=qV;function dR(t){return wT.isMemo(t)?qV:bT[t.$$typeof]||Jie}var tse=Object.defineProperty,nse=Object.getOwnPropertyNames,hR=Object.getOwnPropertySymbols,rse=Object.getOwnPropertyDescriptor,ise=Object.getPrototypeOf,fR=Object.prototype;function HV(t,e,r){if(typeof e!="string"){if(fR){var i=ise(e);i&&i!==fR&&HV(t,i,r)}var s=nse(e);hR&&(s=s.concat(hR(e)));for(var a=dR(t),o=dR(e),l=0;l<s.length;++l){var u=s[l];if(!Zie[u]&&!(r&&r[u])&&!(o&&o[u])&&!(a&&a[u])){var c=rse(e,u);try{tse(t,u,c)}catch{}}}}return t}var sse=HV;const pR=Ua(sse);var WV={exports:{}},Ct={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iv=60103,sv=60106,Th=60107,Ih=60108,Ch=60114,kh=60109,Nh=60110,Ah=60112,Rh=60113,xT=60120,Ph=60115,Dh=60116,GV=60121,KV=60122,YV=60117,XV=60129,QV=60131;if(typeof Symbol=="function"&&Symbol.for){var Nn=Symbol.for;iv=Nn("react.element"),sv=Nn("react.portal"),Th=Nn("react.fragment"),Ih=Nn("react.strict_mode"),Ch=Nn("react.profiler"),kh=Nn("react.provider"),Nh=Nn("react.context"),Ah=Nn("react.forward_ref"),Rh=Nn("react.suspense"),xT=Nn("react.suspense_list"),Ph=Nn("react.memo"),Dh=Nn("react.lazy"),GV=Nn("react.block"),KV=Nn("react.server.block"),YV=Nn("react.fundamental"),XV=Nn("react.debug_trace_mode"),QV=Nn("react.legacy_hidden")}function bi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case iv:switch(t=t.type,t){case Th:case Ch:case Ih:case Rh:case xT:return t;default:switch(t=t&&t.$$typeof,t){case Nh:case Ah:case Dh:case Ph:case kh:return t;default:return e}}case sv:return e}}}var ase=kh,ose=iv,lse=Ah,use=Th,cse=Dh,dse=Ph,hse=sv,fse=Ch,pse=Ih,mse=Rh;Ct.ContextConsumer=Nh;Ct.ContextProvider=ase;Ct.Element=ose;Ct.ForwardRef=lse;Ct.Fragment=use;Ct.Lazy=cse;Ct.Memo=dse;Ct.Portal=hse;Ct.Profiler=fse;Ct.StrictMode=pse;Ct.Suspense=mse;Ct.isAsyncMode=function(){return!1};Ct.isConcurrentMode=function(){return!1};Ct.isContextConsumer=function(t){return bi(t)===Nh};Ct.isContextProvider=function(t){return bi(t)===kh};Ct.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===iv};Ct.isForwardRef=function(t){return bi(t)===Ah};Ct.isFragment=function(t){return bi(t)===Th};Ct.isLazy=function(t){return bi(t)===Dh};Ct.isMemo=function(t){return bi(t)===Ph};Ct.isPortal=function(t){return bi(t)===sv};Ct.isProfiler=function(t){return bi(t)===Ch};Ct.isStrictMode=function(t){return bi(t)===Ih};Ct.isSuspense=function(t){return bi(t)===Rh};Ct.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Th||t===Ch||t===XV||t===Ih||t===Rh||t===xT||t===QV||typeof t=="object"&&t!==null&&(t.$$typeof===Dh||t.$$typeof===Ph||t.$$typeof===kh||t.$$typeof===Nh||t.$$typeof===Ah||t.$$typeof===YV||t.$$typeof===GV||t[0]===KV)};Ct.typeOf=bi;WV.exports=Ct;var gse=WV.exports,vse=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],yse=["reactReduxForwardedRef"],_se=[],wse=[null,null];function bse(t,e){var r=t[1];return[e.payload,r+1]}function mR(t,e,r){UV(function(){return t.apply(void 0,e)},r)}function xse(t,e,r,i,s,a,o){t.current=i,e.current=s,r.current=!1,a.current&&(a.current=null,o())}function Ese(t,e,r,i,s,a,o,l,u,c){if(t){var d=!1,h=null,f=function(){if(!d){var y=e.getState(),b,_;try{b=i(y,s.current)}catch(w){_=w,h=w}_||(h=null),b===a.current?o.current||u():(a.current=b,l.current=b,o.current=!0,c({type:"STORE_UPDATED",payload:{error:_}}))}};r.onStateChange=f,r.trySubscribe(),f();var m=function(){if(d=!0,r.tryUnsubscribe(),r.onStateChange=null,h)throw h};return m}}var Sse=function(){return[null,0]};function Tse(t,e){e===void 0&&(e={});var r=e,i=r.getDisplayName,s=i===void 0?function(E){return"ConnectAdvanced("+E+")"}:i,a=r.methodName,o=a===void 0?"connectAdvanced":a,l=r.renderCountProp,u=l===void 0?void 0:l,c=r.shouldHandleStateChanges,d=c===void 0?!0:c,h=r.storeKey,f=h===void 0?"store":h;r.withRef;var m=r.forwardRef,v=m===void 0?!1:m,y=r.context,b=y===void 0?VV:y,_=Tm(r,vse),w=b;return function(N){var M=N.displayName||N.name||"Component",O=s(M),A=Ue({},_,{getDisplayName:s,methodName:o,renderCountProp:u,shouldHandleStateChanges:d,storeKey:f,displayName:O,wrappedComponentName:M,WrappedComponent:N}),D=_.pure;function T(j){return t(j.dispatch,A)}var I=D?S.useMemo:function(j){return j()};function x(j){var $=S.useMemo(function(){var K=j.reactReduxForwardedRef,re=Tm(j,yse);return[j.context,K,re]},[j]),U=$[0],Y=$[1],q=$[2],F=S.useMemo(function(){return U&&U.Consumer&&gse.isContextConsumer(te.createElement(U.Consumer,null))?U:w},[U,w]),W=S.useContext(F),Q=!!j.store&&!!j.store.getState&&!!j.store.dispatch;W&&W.store;var H=Q?j.store:W.store,X=S.useMemo(function(){return T(H)},[H]),J=S.useMemo(function(){if(!d)return wse;var K=$V(H,Q?null:W.subscription),re=K.notifyNestedSubs.bind(K);return[K,re]},[H,Q,W]),ee=J[0],se=J[1],ce=S.useMemo(function(){return Q?W:Ue({},W,{subscription:ee})},[Q,W,ee]),Se=S.useReducer(bse,_se,Sse),Ee=Se[0],ie=Ee[0],ue=Se[1];if(ie&&ie.error)throw ie.error;var ge=S.useRef(),ke=S.useRef(q),Re=S.useRef(),_e=S.useRef(!1),V=I(function(){return Re.current&&q===ke.current?Re.current:X(H.getState(),q)},[H,ie,q]);mR(xse,[ke,ge,_e,q,V,Re,se]),mR(Ese,[d,H,ee,X,ke,ge,_e,Re,se,ue],[H,ee,X]);var B=S.useMemo(function(){return te.createElement(N,Ue({},V,{ref:Y}))},[Y,N,V]),G=S.useMemo(function(){return d?te.createElement(F.Provider,{value:ce},B):B},[F,B,ce]);return G}var R=D?te.memo(x):x;if(R.WrappedComponent=N,R.displayName=x.displayName=O,v){var P=te.forwardRef(function($,U){return te.createElement(R,Ue({},$,{reactReduxForwardedRef:U}))});return P.displayName=O,P.WrappedComponent=N,pR(P,N)}return pR(R,N)}}function gR(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function n0(t,e){if(gR(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(e,r[s])||!gR(t[r[s]],e[r[s]]))return!1;return!0}function Ise(t,e){var r={},i=function(o){var l=t[o];typeof l=="function"&&(r[o]=function(){return e(l.apply(void 0,arguments))})};for(var s in t)i(s);return r}function ET(t){return function(r,i){var s=t(r,i);function a(){return s}return a.dependsOnOwnProps=!1,a}}function vR(t){return t.dependsOnOwnProps!==null&&t.dependsOnOwnProps!==void 0?!!t.dependsOnOwnProps:t.length!==1}function JV(t,e){return function(i,s){s.displayName;var a=function(l,u){return a.dependsOnOwnProps?a.mapToProps(l,u):a.mapToProps(l)};return a.dependsOnOwnProps=!0,a.mapToProps=function(l,u){a.mapToProps=t,a.dependsOnOwnProps=vR(t);var c=a(l,u);return typeof c=="function"&&(a.mapToProps=c,a.dependsOnOwnProps=vR(c),c=a(l,u)),c},a}}function Cse(t){return typeof t=="function"?JV(t):void 0}function kse(t){return t?void 0:ET(function(e){return{dispatch:e}})}function Nse(t){return t&&typeof t=="object"?ET(function(e){return Ise(t,e)}):void 0}const Ase=[Cse,kse,Nse];function Rse(t){return typeof t=="function"?JV(t):void 0}function Pse(t){return t?void 0:ET(function(){return{}})}const Dse=[Rse,Pse];function Mse(t,e,r){return Ue({},r,t,e)}function Lse(t){return function(r,i){i.displayName;var s=i.pure,a=i.areMergedPropsEqual,o=!1,l;return function(c,d,h){var f=t(c,d,h);return o?(!s||!a(f,l))&&(l=f):(o=!0,l=f),l}}}function Ose(t){return typeof t=="function"?Lse(t):void 0}function jse(t){return t?void 0:function(){return Mse}}const Vse=[Ose,jse];var Fse=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function $se(t,e,r,i){return function(a,o){return r(t(a,o),e(i,o),o)}}function Use(t,e,r,i,s){var a=s.areStatesEqual,o=s.areOwnPropsEqual,l=s.areStatePropsEqual,u=!1,c,d,h,f,m;function v(E,N){return c=E,d=N,h=t(c,d),f=e(i,d),m=r(h,f,d),u=!0,m}function y(){return h=t(c,d),e.dependsOnOwnProps&&(f=e(i,d)),m=r(h,f,d),m}function b(){return t.dependsOnOwnProps&&(h=t(c,d)),e.dependsOnOwnProps&&(f=e(i,d)),m=r(h,f,d),m}function _(){var E=t(c,d),N=!l(E,h);return h=E,N&&(m=r(h,f,d)),m}function w(E,N){var M=!o(N,d),O=!a(E,c,N,d);return c=E,d=N,M&&O?y():M?b():O?_():m}return function(N,M){return u?w(N,M):v(N,M)}}function Bse(t,e){var r=e.initMapStateToProps,i=e.initMapDispatchToProps,s=e.initMergeProps,a=Tm(e,Fse),o=r(t,a),l=i(t,a),u=s(t,a),c=a.pure?Use:$se;return c(o,l,u,t,a)}var zse=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function r0(t,e,r){for(var i=e.length-1;i>=0;i--){var s=e[i](t);if(s)return s}return function(a,o){throw new Error("Invalid value of type "+typeof t+" for "+r+" argument when connecting component "+o.wrappedComponentName+".")}}function qse(t,e){return t===e}function Hse(t){var e=t===void 0?{}:t,r=e.connectHOC,i=r===void 0?Tse:r,s=e.mapStateToPropsFactories,a=s===void 0?Dse:s,o=e.mapDispatchToPropsFactories,l=o===void 0?Ase:o,u=e.mergePropsFactories,c=u===void 0?Vse:u,d=e.selectorFactory,h=d===void 0?Bse:d;return function(m,v,y,b){b===void 0&&(b={});var _=b,w=_.pure,E=w===void 0?!0:w,N=_.areStatesEqual,M=N===void 0?qse:N,O=_.areOwnPropsEqual,A=O===void 0?n0:O,D=_.areStatePropsEqual,T=D===void 0?n0:D,I=_.areMergedPropsEqual,x=I===void 0?n0:I,R=Tm(_,zse),P=r0(m,a,"mapStateToProps"),j=r0(v,l,"mapDispatchToProps"),$=r0(y,c,"mergeProps");return i(h,Ue({methodName:"connect",getDisplayName:function(Y){return"Connect("+Y+")"},shouldHandleStateChanges:!!m,initMapStateToProps:P,initMapDispatchToProps:j,initMergeProps:$,pure:E,areStatesEqual:M,areOwnPropsEqual:A,areStatePropsEqual:T,areMergedPropsEqual:x},R))}}const ZV=Hse();Bie(fS.unstable_batchedUpdates);function Wse(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function eF(t,e){var r=S.useState(function(){return{inputs:e,result:t()}})[0],i=S.useRef(!0),s=S.useRef(r),a=i.current||!!(e&&s.current.inputs&&Wse(e,s.current.inputs)),o=a?s.current:{inputs:e,result:t()};return S.useEffect(function(){i.current=!1,s.current=o},[o]),o.result}function Gse(t,e){return eF(function(){return t},e)}var ct=eF,Fe=Gse,Kse="Invariant failed";function Yse(t,e){throw new Error(Kse)}var fi=function(e){var r=e.top,i=e.right,s=e.bottom,a=e.left,o=i-a,l=s-r,u={top:r,right:i,bottom:s,left:a,width:o,height:l,x:a,y:r,center:{x:(i+a)/2,y:(s+r)/2}};return u},ST=function(e,r){return{top:e.top-r.top,left:e.left-r.left,bottom:e.bottom+r.bottom,right:e.right+r.right}},yR=function(e,r){return{top:e.top+r.top,left:e.left+r.left,bottom:e.bottom-r.bottom,right:e.right-r.right}},Xse=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},i0={top:0,right:0,bottom:0,left:0},TT=function(e){var r=e.borderBox,i=e.margin,s=i===void 0?i0:i,a=e.border,o=a===void 0?i0:a,l=e.padding,u=l===void 0?i0:l,c=fi(ST(r,s)),d=fi(yR(r,o)),h=fi(yR(d,u));return{marginBox:c,borderBox:fi(r),paddingBox:d,contentBox:h,margin:s,border:o,padding:u}},$r=function(e){var r=e.slice(0,-2),i=e.slice(-2);if(i!=="px")return 0;var s=Number(r);return isNaN(s)&&Yse(),s},Qse=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Im=function(e,r){var i=e.borderBox,s=e.border,a=e.margin,o=e.padding,l=Xse(i,r);return TT({borderBox:l,border:s,margin:a,padding:o})},Cm=function(e,r){return r===void 0&&(r=Qse()),Im(e,r)},tF=function(e,r){var i={top:$r(r.marginTop),right:$r(r.marginRight),bottom:$r(r.marginBottom),left:$r(r.marginLeft)},s={top:$r(r.paddingTop),right:$r(r.paddingRight),bottom:$r(r.paddingBottom),left:$r(r.paddingLeft)},a={top:$r(r.borderTopWidth),right:$r(r.borderRightWidth),bottom:$r(r.borderBottomWidth),left:$r(r.borderLeftWidth)};return TT({borderBox:e,margin:i,padding:s,border:a})},nF=function(e){var r=e.getBoundingClientRect(),i=window.getComputedStyle(e);return tF(r,i)},_R=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function Jse(t,e){return!!(t===e||_R(t)&&_R(e))}function Zse(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!Jse(t[r],e[r]))return!1;return!0}function En(t,e){e===void 0&&(e=Zse);var r,i=[],s,a=!1;function o(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return a&&r===this&&e(l,i)||(s=t.apply(this,l),a=!0,r=this,i=l),s}return o}var Bd=function(e){var r=[],i=null,s=function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];r=l,!i&&(i=requestAnimationFrame(function(){i=null,e.apply(void 0,r)}))};return s.cancel=function(){i&&(cancelAnimationFrame(i),i=null)},s};function rF(t,e){}rF.bind(null,"warn");rF.bind(null,"error");function Ta(){}function eae(t,e){return Ue({},t,{},e)}function Wr(t,e,r){var i=e.map(function(s){var a=eae(r,s.options);return t.addEventListener(s.eventName,s.fn,a),function(){t.removeEventListener(s.eventName,s.fn,a)}});return function(){i.forEach(function(a){a()})}}var tae="Invariant failed";function km(t){this.message=t}km.prototype.toString=function(){return this.message};function we(t,e){throw new km(tae)}var nae=function(t){LV(e,t);function e(){for(var i,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return i=t.call.apply(t,[this].concat(a))||this,i.callbacks=null,i.unbind=Ta,i.onWindowError=function(l){var u=i.getCallbacks();u.isDragging()&&u.tryAbort();var c=l.error;c instanceof km&&l.preventDefault()},i.getCallbacks=function(){if(!i.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return i.callbacks},i.setCallbacks=function(l){i.callbacks=l},i}var r=e.prototype;return r.componentDidMount=function(){this.unbind=Wr(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(s){if(s instanceof km){this.setState({});return}throw s},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},e}(te.Component),rae=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Nm=function(e){return e+1},iae=function(e){return`
  You have lifted an item in position `+Nm(e.source.index)+`
`},iF=function(e,r){var i=e.droppableId===r.droppableId,s=Nm(e.index),a=Nm(r.index);return i?`
      You have moved the item from position `+s+`
      to position `+a+`
    `:`
    You have moved the item from position `+s+`
    in list `+e.droppableId+`
    to list `+r.droppableId+`
    in position `+a+`
  `},sF=function(e,r,i){var s=r.droppableId===i.droppableId;return s?`
      The item `+e+`
      has been combined with `+i.draggableId:`
      The item `+e+`
      in list `+r.droppableId+`
      has been combined with `+i.draggableId+`
      in list `+i.droppableId+`
    `},sae=function(e){var r=e.destination;if(r)return iF(e.source,r);var i=e.combine;return i?sF(e.draggableId,e.source,i):"You are over an area that cannot be dropped on"},wR=function(e){return`
  The item has returned to its starting position
  of `+Nm(e.index)+`
`},aae=function(e){if(e.reason==="CANCEL")return`
      Movement cancelled.
      `+wR(e.source)+`
    `;var r=e.destination,i=e.combine;return r?`
      You have dropped the item.
      `+iF(e.source,r)+`
    `:i?`
      You have dropped the item.
      `+sF(e.draggableId,e.source,i)+`
    `:`
    The item has been dropped while not over a drop area.
    `+wR(e.source)+`
  `},Ep={dragHandleUsageInstructions:rae,onDragStart:iae,onDragUpdate:sae,onDragEnd:aae},Tn={x:0,y:0},Pn=function(e,r){return{x:e.x+r.x,y:e.y+r.y}},Cr=function(e,r){return{x:e.x-r.x,y:e.y-r.y}},Ia=function(e,r){return e.x===r.x&&e.y===r.y},qu=function(e){return{x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}},jo=function(e,r,i){var s;return i===void 0&&(i=0),s={},s[e]=r,s[e==="x"?"y":"x"]=i,s},zd=function(e,r){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))},bR=function(e,r){return Math.min.apply(Math,r.map(function(i){return zd(e,i)}))},aF=function(e){return function(r){return{x:e(r.x),y:e(r.y)}}},oae=function(t,e){var r=fi({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return r.width<=0||r.height<=0?null:r},Mh=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},xR=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},lae={top:0,right:0,bottom:0,left:0},uae=function(e,r){return r?Mh(e,r.scroll.diff.displacement):e},cae=function(e,r,i){if(i&&i.increasedBy){var s;return Ue({},e,(s={},s[r.end]=e[r.end]+i.increasedBy[r.line],s))}return e},dae=function(e,r){return r&&r.shouldClipSubject?oae(r.pageMarginBox,e):fi(e)},wu=function(t){var e=t.page,r=t.withPlaceholder,i=t.axis,s=t.frame,a=uae(e.marginBox,s),o=cae(a,i,r),l=dae(o,s);return{page:e,withPlaceholder:r,active:l}},IT=function(t,e){t.frame||we();var r=t.frame,i=Cr(e,r.scroll.initial),s=qu(i),a=Ue({},r,{scroll:{initial:r.scroll.initial,current:e,diff:{value:i,displacement:s},max:r.scroll.max}}),o=wu({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:a}),l=Ue({},t,{frame:a,subject:o});return l};function Am(t){return Object.values?Object.values(t):Object.keys(t).map(function(e){return t[e]})}function CT(t,e){if(t.findIndex)return t.findIndex(e);for(var r=0;r<t.length;r++)if(e(t[r]))return r;return-1}function Ka(t,e){if(t.find)return t.find(e);var r=CT(t,e);if(r!==-1)return t[r]}function oF(t){return Array.prototype.slice.call(t)}var lF=En(function(t){return t.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),uF=En(function(t){return t.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),av=En(function(t){return Am(t)}),hae=En(function(t){return Am(t)}),Hu=En(function(t,e){var r=hae(e).filter(function(i){return t===i.descriptor.droppableId}).sort(function(i,s){return i.descriptor.index-s.descriptor.index});return r});function kT(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function ov(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var lv=En(function(t,e){return e.filter(function(r){return r.descriptor.id!==t.descriptor.id})}),fae=function(t){var e=t.isMovingForward,r=t.draggable,i=t.destination,s=t.insideDestination,a=t.previousImpact;if(!i.isCombineEnabled)return null;var o=kT(a);if(!o)return null;function l(y){var b={type:"COMBINE",combine:{draggableId:y,droppableId:i.descriptor.id}};return Ue({},a,{at:b})}var u=a.displaced.all,c=u.length?u[0]:null;if(e)return c?l(c):null;var d=lv(r,s);if(!c){if(!d.length)return null;var h=d[d.length-1];return l(h.descriptor.id)}var f=CT(d,function(y){return y.descriptor.id===c});f===-1&&we();var m=f-1;if(m<0)return null;var v=d[m];return l(v.descriptor.id)},Wu=function(t,e){return t.descriptor.droppableId===e.descriptor.id},cF={point:Tn,value:0},qd={invisible:{},visible:{},all:[]},pae={displaced:qd,displacedBy:cF,at:null},Qr=function(t,e){return function(r){return t<=r&&r<=e}},dF=function(t){var e=Qr(t.top,t.bottom),r=Qr(t.left,t.right);return function(i){var s=e(i.top)&&e(i.bottom)&&r(i.left)&&r(i.right);if(s)return!0;var a=e(i.top)||e(i.bottom),o=r(i.left)||r(i.right),l=a&&o;if(l)return!0;var u=i.top<t.top&&i.bottom>t.bottom,c=i.left<t.left&&i.right>t.right,d=u&&c;if(d)return!0;var h=u&&o||c&&a;return h}},mae=function(t){var e=Qr(t.top,t.bottom),r=Qr(t.left,t.right);return function(i){var s=e(i.top)&&e(i.bottom)&&r(i.left)&&r(i.right);return s}},NT={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},hF={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},gae=function(t){return function(e){var r=Qr(e.top,e.bottom),i=Qr(e.left,e.right);return function(s){return t===NT?r(s.top)&&r(s.bottom):i(s.left)&&i(s.right)}}},vae=function(e,r){var i=r.frame?r.frame.scroll.diff.displacement:Tn;return Mh(e,i)},yae=function(e,r,i){return r.subject.active?i(r.subject.active)(e):!1},_ae=function(e,r,i){return i(r)(e)},AT=function(e){var r=e.target,i=e.destination,s=e.viewport,a=e.withDroppableDisplacement,o=e.isVisibleThroughFrameFn,l=a?vae(r,i):r;return yae(l,i,o)&&_ae(l,s,o)},wae=function(e){return AT(Ue({},e,{isVisibleThroughFrameFn:dF}))},fF=function(e){return AT(Ue({},e,{isVisibleThroughFrameFn:mae}))},bae=function(e){return AT(Ue({},e,{isVisibleThroughFrameFn:gae(e.destination.axis)}))},xae=function(e,r,i){if(typeof i=="boolean")return i;if(!r)return!0;var s=r.invisible,a=r.visible;if(s[e])return!1;var o=a[e];return o?o.shouldAnimate:!0};function Eae(t,e){var r=t.page.marginBox,i={top:e.point.y,right:0,bottom:0,left:e.point.x};return fi(ST(r,i))}function Hd(t){var e=t.afterDragging,r=t.destination,i=t.displacedBy,s=t.viewport,a=t.forceShouldAnimate,o=t.last;return e.reduce(function(u,c){var d=Eae(c,i),h=c.descriptor.id;u.all.push(h);var f=wae({target:d,destination:r,viewport:s,withDroppableDisplacement:!0});if(!f)return u.invisible[c.descriptor.id]=!0,u;var m=xae(h,o,a),v={draggableId:h,shouldAnimate:m};return u.visible[h]=v,u},{all:[],visible:{},invisible:{}})}function Sae(t,e){if(!t.length)return 0;var r=t[t.length-1].descriptor.index;return e.inHomeList?r:r+1}function ER(t){var e=t.insideDestination,r=t.inHomeList,i=t.displacedBy,s=t.destination,a=Sae(e,{inHomeList:r});return{displaced:qd,displacedBy:i,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:a}}}}function Rm(t){var e=t.draggable,r=t.insideDestination,i=t.destination,s=t.viewport,a=t.displacedBy,o=t.last,l=t.index,u=t.forceShouldAnimate,c=Wu(e,i);if(l==null)return ER({insideDestination:r,inHomeList:c,displacedBy:a,destination:i});var d=Ka(r,function(y){return y.descriptor.index===l});if(!d)return ER({insideDestination:r,inHomeList:c,displacedBy:a,destination:i});var h=lv(e,r),f=r.indexOf(d),m=h.slice(f),v=Hd({afterDragging:m,destination:i,displacedBy:a,last:o,viewport:s.frame,forceShouldAnimate:u});return{displaced:v,displacedBy:a,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:l}}}}function Fa(t,e){return!!e.effected[t]}var Tae=function(t){var e=t.isMovingForward,r=t.destination,i=t.draggables,s=t.combine,a=t.afterCritical;if(!r.isCombineEnabled)return null;var o=s.draggableId,l=i[o],u=l.descriptor.index,c=Fa(o,a);return c?e?u:u-1:e?u+1:u},Iae=function(t){var e=t.isMovingForward,r=t.isInHomeList,i=t.insideDestination,s=t.location;if(!i.length)return null;var a=s.index,o=e?a+1:a-1,l=i[0].descriptor.index,u=i[i.length-1].descriptor.index,c=r?u:u+1;return o<l||o>c?null:o},Cae=function(t){var e=t.isMovingForward,r=t.isInHomeList,i=t.draggable,s=t.draggables,a=t.destination,o=t.insideDestination,l=t.previousImpact,u=t.viewport,c=t.afterCritical,d=l.at;if(d||we(),d.type==="REORDER"){var h=Iae({isMovingForward:e,isInHomeList:r,location:d.destination,insideDestination:o});return h==null?null:Rm({draggable:i,insideDestination:o,destination:a,viewport:u,last:l.displaced,displacedBy:l.displacedBy,index:h})}var f=Tae({isMovingForward:e,destination:a,displaced:l.displaced,draggables:s,combine:d.combine,afterCritical:c});return f==null?null:Rm({draggable:i,insideDestination:o,destination:a,viewport:u,last:l.displaced,displacedBy:l.displacedBy,index:f})},kae=function(t){var e=t.displaced,r=t.afterCritical,i=t.combineWith,s=t.displacedBy,a=!!(e.visible[i]||e.invisible[i]);return Fa(i,r)?a?Tn:qu(s.point):a?s.point:Tn},Nae=function(t){var e=t.afterCritical,r=t.impact,i=t.draggables,s=ov(r);s||we();var a=s.draggableId,o=i[a].page.borderBox.center,l=kae({displaced:r.displaced,afterCritical:e,combineWith:a,displacedBy:r.displacedBy});return Pn(o,l)},pF=function(e,r){return r.margin[e.start]+r.borderBox[e.size]/2},Aae=function(e,r){return r.margin[e.end]+r.borderBox[e.size]/2},RT=function(e,r,i){return r[e.crossAxisStart]+i.margin[e.crossAxisStart]+i.borderBox[e.crossAxisSize]/2},SR=function(e){var r=e.axis,i=e.moveRelativeTo,s=e.isMoving;return jo(r.line,i.marginBox[r.end]+pF(r,s),RT(r,i.marginBox,s))},TR=function(e){var r=e.axis,i=e.moveRelativeTo,s=e.isMoving;return jo(r.line,i.marginBox[r.start]-Aae(r,s),RT(r,i.marginBox,s))},Rae=function(e){var r=e.axis,i=e.moveInto,s=e.isMoving;return jo(r.line,i.contentBox[r.start]+pF(r,s),RT(r,i.contentBox,s))},Pae=function(t){var e=t.impact,r=t.draggable,i=t.draggables,s=t.droppable,a=t.afterCritical,o=Hu(s.descriptor.id,i),l=r.page,u=s.axis;if(!o.length)return Rae({axis:u,moveInto:s.page,isMoving:l});var c=e.displaced,d=e.displacedBy,h=c.all[0];if(h){var f=i[h];if(Fa(h,a))return TR({axis:u,moveRelativeTo:f.page,isMoving:l});var m=Im(f.page,d.point);return TR({axis:u,moveRelativeTo:m,isMoving:l})}var v=o[o.length-1];if(v.descriptor.id===r.descriptor.id)return l.borderBox.center;if(Fa(v.descriptor.id,a)){var y=Im(v.page,qu(a.displacedBy.point));return SR({axis:u,moveRelativeTo:y,isMoving:l})}return SR({axis:u,moveRelativeTo:v.page,isMoving:l})},WE=function(t,e){var r=t.frame;return r?Pn(e,r.scroll.diff.displacement):e},Dae=function(e){var r=e.impact,i=e.draggable,s=e.droppable,a=e.draggables,o=e.afterCritical,l=i.page.borderBox.center,u=r.at;return!s||!u?l:u.type==="REORDER"?Pae({impact:r,draggable:i,draggables:a,droppable:s,afterCritical:o}):Nae({impact:r,draggables:a,afterCritical:o})},uv=function(t){var e=Dae(t),r=t.droppable,i=r?WE(r,e):e;return i},mF=function(t,e){var r=Cr(e,t.scroll.initial),i=qu(r),s=fi({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),a={frame:s,scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:r,displacement:i}}};return a};function IR(t,e){return t.map(function(r){return e[r]})}function Mae(t,e){for(var r=0;r<e.length;r++){var i=e[r].visible[t];if(i)return i}return null}var Lae=function(t){var e=t.impact,r=t.viewport,i=t.destination,s=t.draggables,a=t.maxScrollChange,o=mF(r,Pn(r.scroll.current,a)),l=i.frame?IT(i,Pn(i.frame.scroll.current,a)):i,u=e.displaced,c=Hd({afterDragging:IR(u.all,s),destination:i,displacedBy:e.displacedBy,viewport:o.frame,last:u,forceShouldAnimate:!1}),d=Hd({afterDragging:IR(u.all,s),destination:l,displacedBy:e.displacedBy,viewport:r.frame,last:u,forceShouldAnimate:!1}),h={},f={},m=[u,c,d];u.all.forEach(function(y){var b=Mae(y,m);if(b){f[y]=b;return}h[y]=!0});var v=Ue({},e,{displaced:{all:u.all,invisible:h,visible:f}});return v},Oae=function(t,e){return Pn(t.scroll.diff.displacement,e)},PT=function(t){var e=t.pageBorderBoxCenter,r=t.draggable,i=t.viewport,s=Oae(i,e),a=Cr(s,r.page.borderBox.center);return Pn(r.client.borderBox.center,a)},gF=function(t){var e=t.draggable,r=t.destination,i=t.newPageBorderBoxCenter,s=t.viewport,a=t.withDroppableDisplacement,o=t.onlyOnMainAxis,l=o===void 0?!1:o,u=Cr(i,e.page.borderBox.center),c=Mh(e.page.borderBox,u),d={target:c,destination:r,withDroppableDisplacement:a,viewport:s};return l?bae(d):fF(d)},jae=function(t){var e=t.isMovingForward,r=t.draggable,i=t.destination,s=t.draggables,a=t.previousImpact,o=t.viewport,l=t.previousPageBorderBoxCenter,u=t.previousClientSelection,c=t.afterCritical;if(!i.isEnabled)return null;var d=Hu(i.descriptor.id,s),h=Wu(r,i),f=fae({isMovingForward:e,draggable:r,destination:i,insideDestination:d,previousImpact:a})||Cae({isMovingForward:e,isInHomeList:h,draggable:r,draggables:s,destination:i,insideDestination:d,previousImpact:a,viewport:o,afterCritical:c});if(!f)return null;var m=uv({impact:f,draggable:r,droppable:i,draggables:s,afterCritical:c}),v=gF({draggable:r,destination:i,newPageBorderBoxCenter:m,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(v){var y=PT({pageBorderBoxCenter:m,draggable:r,viewport:o});return{clientSelection:y,impact:f,scrollJumpRequest:null}}var b=Cr(m,l),_=Lae({impact:f,viewport:o,destination:i,draggables:s,maxScrollChange:b});return{clientSelection:u,impact:_,scrollJumpRequest:b}},Jn=function(e){var r=e.subject.active;return r||we(),r},Vae=function(t){var e=t.isMovingForward,r=t.pageBorderBoxCenter,i=t.source,s=t.droppables,a=t.viewport,o=i.subject.active;if(!o)return null;var l=i.axis,u=Qr(o[l.start],o[l.end]),c=av(s).filter(function(h){return h!==i}).filter(function(h){return h.isEnabled}).filter(function(h){return!!h.subject.active}).filter(function(h){return dF(a.frame)(Jn(h))}).filter(function(h){var f=Jn(h);return e?o[l.crossAxisEnd]<f[l.crossAxisEnd]:f[l.crossAxisStart]<o[l.crossAxisStart]}).filter(function(h){var f=Jn(h),m=Qr(f[l.start],f[l.end]);return u(f[l.start])||u(f[l.end])||m(o[l.start])||m(o[l.end])}).sort(function(h,f){var m=Jn(h)[l.crossAxisStart],v=Jn(f)[l.crossAxisStart];return e?m-v:v-m}).filter(function(h,f,m){return Jn(h)[l.crossAxisStart]===Jn(m[0])[l.crossAxisStart]});if(!c.length)return null;if(c.length===1)return c[0];var d=c.filter(function(h){var f=Qr(Jn(h)[l.start],Jn(h)[l.end]);return f(r[l.line])});return d.length===1?d[0]:d.length>1?d.sort(function(h,f){return Jn(h)[l.start]-Jn(f)[l.start]})[0]:c.sort(function(h,f){var m=bR(r,xR(Jn(h))),v=bR(r,xR(Jn(f)));return m!==v?m-v:Jn(h)[l.start]-Jn(f)[l.start]})[0]},CR=function(e,r){var i=e.page.borderBox.center;return Fa(e.descriptor.id,r)?Cr(i,r.displacedBy.point):i},Fae=function(e,r){var i=e.page.borderBox;return Fa(e.descriptor.id,r)?Mh(i,qu(r.displacedBy.point)):i},$ae=function(t){var e=t.pageBorderBoxCenter,r=t.viewport,i=t.destination,s=t.insideDestination,a=t.afterCritical,o=s.filter(function(l){return fF({target:Fae(l,a),destination:i,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(l,u){var c=zd(e,WE(i,CR(l,a))),d=zd(e,WE(i,CR(u,a)));return c<d?-1:d<c?1:l.descriptor.index-u.descriptor.index});return o[0]||null},Lh=En(function(e,r){var i=r[e.line];return{value:i,point:jo(e.line,i)}}),Uae=function(e,r,i){var s=e.axis;if(e.descriptor.mode==="virtual")return jo(s.line,r[s.line]);var a=e.subject.page.contentBox[s.size],o=Hu(e.descriptor.id,i),l=o.reduce(function(d,h){return d+h.client.marginBox[s.size]},0),u=l+r[s.line],c=u-a;return c<=0?null:jo(s.line,c)},vF=function(e,r){return Ue({},e,{scroll:Ue({},e.scroll,{max:r})})},yF=function(e,r,i){var s=e.frame;Wu(r,e)&&we(),e.subject.withPlaceholder&&we();var a=Lh(e.axis,r.displaceBy).point,o=Uae(e,a,i),l={placeholderSize:a,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){var u=wu({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:e.frame});return Ue({},e,{subject:u})}var c=o?Pn(s.scroll.max,o):s.scroll.max,d=vF(s,c),h=wu({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:d});return Ue({},e,{subject:h,frame:d})},Bae=function(e){var r=e.subject.withPlaceholder;r||we();var i=e.frame;if(!i){var s=wu({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return Ue({},e,{subject:s})}var a=r.oldFrameMaxScroll;a||we();var o=vF(i,a),l=wu({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return Ue({},e,{subject:l,frame:o})},zae=function(t){var e=t.previousPageBorderBoxCenter,r=t.moveRelativeTo,i=t.insideDestination,s=t.draggable,a=t.draggables,o=t.destination,l=t.viewport,u=t.afterCritical;if(!r){if(i.length)return null;var c={displaced:qd,displacedBy:cF,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},d=uv({impact:c,draggable:s,droppable:o,draggables:a,afterCritical:u}),h=Wu(s,o)?o:yF(o,s,a),f=gF({draggable:s,destination:h,newPageBorderBoxCenter:d,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return f?c:null}var m=e[o.axis.line]<=r.page.borderBox.center[o.axis.line],v=function(){var b=r.descriptor.index;return r.descriptor.id===s.descriptor.id||m?b:b+1}(),y=Lh(o.axis,s.displaceBy);return Rm({draggable:s,insideDestination:i,destination:o,viewport:l,displacedBy:y,last:qd,index:v})},qae=function(t){var e=t.isMovingForward,r=t.previousPageBorderBoxCenter,i=t.draggable,s=t.isOver,a=t.draggables,o=t.droppables,l=t.viewport,u=t.afterCritical,c=Vae({isMovingForward:e,pageBorderBoxCenter:r,source:s,droppables:o,viewport:l});if(!c)return null;var d=Hu(c.descriptor.id,a),h=$ae({pageBorderBoxCenter:r,viewport:l,destination:c,insideDestination:d,afterCritical:u}),f=zae({previousPageBorderBoxCenter:r,destination:c,draggable:i,draggables:a,moveRelativeTo:h,insideDestination:d,viewport:l,afterCritical:u});if(!f)return null;var m=uv({impact:f,draggable:i,droppable:c,draggables:a,afterCritical:u}),v=PT({pageBorderBoxCenter:m,draggable:i,viewport:l});return{clientSelection:v,impact:f,scrollJumpRequest:null}},Ar=function(t){var e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null},Hae=function(e,r){var i=Ar(e);return i?r[i]:null},Wae=function(t){var e=t.state,r=t.type,i=Hae(e.impact,e.dimensions.droppables),s=!!i,a=e.dimensions.droppables[e.critical.droppable.id],o=i||a,l=o.axis.direction,u=l==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||l==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(u&&!s)return null;var c=r==="MOVE_DOWN"||r==="MOVE_RIGHT",d=e.dimensions.draggables[e.critical.draggable.id],h=e.current.page.borderBoxCenter,f=e.dimensions,m=f.draggables,v=f.droppables;return u?jae({isMovingForward:c,previousPageBorderBoxCenter:h,draggable:d,destination:o,draggables:m,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):qae({isMovingForward:c,previousPageBorderBoxCenter:h,draggable:d,isOver:o,draggables:m,droppables:v,viewport:e.viewport,afterCritical:e.afterCritical})};function oo(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function _F(t){var e=Qr(t.top,t.bottom),r=Qr(t.left,t.right);return function(s){return e(s.y)&&r(s.x)}}function Gae(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function Kae(t){var e=t.pageBorderBox,r=t.draggable,i=t.candidates,s=r.page.borderBox.center,a=i.map(function(o){var l=o.axis,u=jo(o.axis.line,e.center[l.line],o.page.borderBox.center[l.crossAxisLine]);return{id:o.descriptor.id,distance:zd(s,u)}}).sort(function(o,l){return l.distance-o.distance});return a[0]?a[0].id:null}function Yae(t){var e=t.pageBorderBox,r=t.draggable,i=t.droppables,s=av(i).filter(function(a){if(!a.isEnabled)return!1;var o=a.subject.active;if(!o||!Gae(e,o))return!1;if(_F(o)(e.center))return!0;var l=a.axis,u=o.center[l.crossAxisLine],c=e[l.crossAxisStart],d=e[l.crossAxisEnd],h=Qr(o[l.crossAxisStart],o[l.crossAxisEnd]),f=h(c),m=h(d);return!f&&!m?!0:f?c<u:d>u});return s.length?s.length===1?s[0].descriptor.id:Kae({pageBorderBox:e,draggable:r,candidates:s}):null}var wF=function(e,r){return fi(Mh(e,r))},Xae=function(t,e){var r=t.frame;return r?wF(e,r.scroll.diff.value):e};function bF(t){var e=t.displaced,r=t.id;return!!(e.visible[r]||e.invisible[r])}function Qae(t){var e=t.draggable,r=t.closest,i=t.inHomeList;return r?i&&r.descriptor.index>e.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var Jae=function(t){var e=t.pageBorderBoxWithDroppableScroll,r=t.draggable,i=t.destination,s=t.insideDestination,a=t.last,o=t.viewport,l=t.afterCritical,u=i.axis,c=Lh(i.axis,r.displaceBy),d=c.value,h=e[u.start],f=e[u.end],m=lv(r,s),v=Ka(m,function(b){var _=b.descriptor.id,w=b.page.borderBox.center[u.line],E=Fa(_,l),N=bF({displaced:a,id:_});return E?N?f<=w:h<w-d:N?f<=w+d:h<w}),y=Qae({draggable:r,closest:v,inHomeList:Wu(r,i)});return Rm({draggable:r,insideDestination:s,destination:i,viewport:o,last:a,displacedBy:c,index:y})},Zae=4,eoe=function(t){var e=t.draggable,r=t.pageBorderBoxWithDroppableScroll,i=t.previousImpact,s=t.destination,a=t.insideDestination,o=t.afterCritical;if(!s.isCombineEnabled)return null;var l=s.axis,u=Lh(s.axis,e.displaceBy),c=u.value,d=r[l.start],h=r[l.end],f=lv(e,a),m=Ka(f,function(y){var b=y.descriptor.id,_=y.page.borderBox,w=_[l.size],E=w/Zae,N=Fa(b,o),M=bF({displaced:i.displaced,id:b});return N?M?h>_[l.start]+E&&h<_[l.end]-E:d>_[l.start]-c+E&&d<_[l.end]-c-E:M?h>_[l.start]+c+E&&h<_[l.end]+c-E:d>_[l.start]+E&&d<_[l.end]-E});if(!m)return null;var v={displacedBy:u,displaced:i.displaced,at:{type:"COMBINE",combine:{draggableId:m.descriptor.id,droppableId:s.descriptor.id}}};return v},xF=function(t){var e=t.pageOffset,r=t.draggable,i=t.draggables,s=t.droppables,a=t.previousImpact,o=t.viewport,l=t.afterCritical,u=wF(r.page.borderBox,e),c=Yae({pageBorderBox:u,draggable:r,droppables:s});if(!c)return pae;var d=s[c],h=Hu(d.descriptor.id,i),f=Xae(d,u);return eoe({pageBorderBoxWithDroppableScroll:f,draggable:r,previousImpact:a,destination:d,insideDestination:h,afterCritical:l})||Jae({pageBorderBoxWithDroppableScroll:f,draggable:r,destination:d,insideDestination:h,last:a.displaced,viewport:o,afterCritical:l})},DT=function(t,e){var r;return Ue({},t,(r={},r[e.descriptor.id]=e,r))},toe=function(e){var r=e.previousImpact,i=e.impact,s=e.droppables,a=Ar(r),o=Ar(i);if(!a||a===o)return s;var l=s[a];if(!l.subject.withPlaceholder)return s;var u=Bae(l);return DT(s,u)},noe=function(t){var e=t.draggable,r=t.draggables,i=t.droppables,s=t.previousImpact,a=t.impact,o=toe({previousImpact:s,impact:a,droppables:i}),l=Ar(a);if(!l)return o;var u=i[l];if(Wu(e,u)||u.subject.withPlaceholder)return o;var c=yF(u,e,r);return DT(o,c)},cd=function(t){var e=t.state,r=t.clientSelection,i=t.dimensions,s=t.viewport,a=t.impact,o=t.scrollJumpRequest,l=s||e.viewport,u=i||e.dimensions,c=r||e.current.client.selection,d=Cr(c,e.initial.client.selection),h={offset:d,selection:c,borderBoxCenter:Pn(e.initial.client.borderBoxCenter,d)},f={selection:Pn(h.selection,l.scroll.current),borderBoxCenter:Pn(h.borderBoxCenter,l.scroll.current),offset:Pn(h.offset,l.scroll.diff.value)},m={client:h,page:f};if(e.phase==="COLLECTING")return Ue({phase:"COLLECTING"},e,{dimensions:u,viewport:l,current:m});var v=u.draggables[e.critical.draggable.id],y=a||xF({pageOffset:f.offset,draggable:v,draggables:u.draggables,droppables:u.droppables,previousImpact:e.impact,viewport:l,afterCritical:e.afterCritical}),b=noe({draggable:v,impact:y,previousImpact:e.impact,draggables:u.draggables,droppables:u.droppables}),_=Ue({},e,{current:m,dimensions:{draggables:u.draggables,droppables:b},impact:y,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return _};function roe(t,e){return t.map(function(r){return e[r]})}var EF=function(t){var e=t.impact,r=t.viewport,i=t.draggables,s=t.destination,a=t.forceShouldAnimate,o=e.displaced,l=roe(o.all,i),u=Hd({afterDragging:l,destination:s,displacedBy:e.displacedBy,viewport:r.frame,forceShouldAnimate:a,last:o});return Ue({},e,{displaced:u})},SF=function(t){var e=t.impact,r=t.draggable,i=t.droppable,s=t.draggables,a=t.viewport,o=t.afterCritical,l=uv({impact:e,draggable:r,draggables:s,droppable:i,afterCritical:o});return PT({pageBorderBoxCenter:l,draggable:r,viewport:a})},TF=function(t){var e=t.state,r=t.dimensions,i=t.viewport;e.movementMode!=="SNAP"&&we();var s=e.impact,a=i||e.viewport,o=r||e.dimensions,l=o.draggables,u=o.droppables,c=l[e.critical.draggable.id],d=Ar(s);d||we();var h=u[d],f=EF({impact:s,viewport:a,destination:h,draggables:l}),m=SF({impact:f,draggable:c,droppable:h,draggables:l,viewport:a,afterCritical:e.afterCritical});return cd({impact:f,clientSelection:m,state:e,dimensions:o,viewport:a})},ioe=function(t){return{index:t.index,droppableId:t.droppableId}},IF=function(t){var e=t.draggable,r=t.home,i=t.draggables,s=t.viewport,a=Lh(r.axis,e.displaceBy),o=Hu(r.descriptor.id,i),l=o.indexOf(e);l===-1&&we();var u=o.slice(l+1),c=u.reduce(function(m,v){return m[v.descriptor.id]=!0,m},{}),d={inVirtualList:r.descriptor.mode==="virtual",displacedBy:a,effected:c},h=Hd({afterDragging:u,destination:r,displacedBy:a,last:null,viewport:s.frame,forceShouldAnimate:!1}),f={displaced:h,displacedBy:a,at:{type:"REORDER",destination:ioe(e.descriptor)}};return{impact:f,afterCritical:d}},soe=function(t,e){return{draggables:t.draggables,droppables:DT(t.droppables,e)}},aoe=function(t){var e=t.draggable,r=t.offset,i=t.initialWindowScroll,s=Im(e.client,r),a=Cm(s,i),o=Ue({},e,{placeholder:Ue({},e.placeholder,{client:s}),client:s,page:a});return o},ooe=function(t){var e=t.frame;return e||we(),e},loe=function(t){var e=t.additions,r=t.updatedDroppables,i=t.viewport,s=i.scroll.diff.value;return e.map(function(a){var o=a.descriptor.droppableId,l=r[o],u=ooe(l),c=u.scroll.diff.value,d=Pn(s,c),h=aoe({draggable:a,offset:d,initialWindowScroll:i.scroll.initial});return h})},uoe=function(t){var e=t.state,r=t.published,i=r.modified.map(function(E){var N=e.dimensions.droppables[E.droppableId],M=IT(N,E.scroll);return M}),s=Ue({},e.dimensions.droppables,{},lF(i)),a=uF(loe({additions:r.additions,updatedDroppables:s,viewport:e.viewport})),o=Ue({},e.dimensions.draggables,{},a);r.removals.forEach(function(E){delete o[E]});var l={droppables:s,draggables:o},u=Ar(e.impact),c=u?l.droppables[u]:null,d=l.draggables[e.critical.draggable.id],h=l.droppables[e.critical.droppable.id],f=IF({draggable:d,home:h,draggables:o,viewport:e.viewport}),m=f.impact,v=f.afterCritical,y=c&&c.isCombineEnabled?e.impact:m,b=xF({pageOffset:e.current.page.offset,draggable:l.draggables[e.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:y,viewport:e.viewport,afterCritical:v}),_=Ue({phase:"DRAGGING"},e,{phase:"DRAGGING",impact:b,onLiftImpact:m,dimensions:l,afterCritical:v,forceShouldAnimate:!1});if(e.phase==="COLLECTING")return _;var w=Ue({phase:"DROP_PENDING"},_,{phase:"DROP_PENDING",reason:e.reason,isWaiting:!1});return w},GE=function(e){return e.movementMode==="SNAP"},s0=function(e,r,i){var s=soe(e.dimensions,r);return!GE(e)||i?cd({state:e,dimensions:s}):TF({state:e,dimensions:s})};function a0(t){return t.isDragging&&t.movementMode==="SNAP"?Ue({phase:"DRAGGING"},t,{scrollJumpRequest:null}):t}var kR={phase:"IDLE",completed:null,shouldFlush:!1},coe=function(t,e){if(t===void 0&&(t=kR),e.type==="FLUSH")return Ue({},kR,{shouldFlush:!0});if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&we();var r=e.payload,i=r.critical,s=r.clientSelection,a=r.viewport,o=r.dimensions,l=r.movementMode,u=o.draggables[i.draggable.id],c=o.droppables[i.droppable.id],d={selection:s,borderBoxCenter:u.client.borderBox.center,offset:Tn},h={client:d,page:{selection:Pn(d.selection,a.scroll.initial),borderBoxCenter:Pn(d.selection,a.scroll.initial),offset:Pn(d.selection,a.scroll.diff.value)}},f=av(o.droppables).every(function(ue){return!ue.isFixedOnPage}),m=IF({draggable:u,home:c,draggables:o.draggables,viewport:a}),v=m.impact,y=m.afterCritical,b={phase:"DRAGGING",isDragging:!0,critical:i,movementMode:l,dimensions:o,initial:h,current:h,isWindowScrollAllowed:f,impact:v,afterCritical:y,onLiftImpact:v,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null};return b}if(e.type==="COLLECTION_STARTING"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&we();var _=Ue({phase:"COLLECTING"},t,{phase:"COLLECTING"});return _}if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||we(),uoe({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;oo(t)||we();var w=e.payload.client;return Ia(w,t.current.client.selection)?t:cd({state:t,clientSelection:w,impact:GE(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return a0(t);oo(t)||we();var E=e.payload,N=E.id,M=E.newScroll,O=t.dimensions.droppables[N];if(!O)return t;var A=IT(O,M);return s0(t,A,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;oo(t)||we();var D=e.payload,T=D.id,I=D.isEnabled,x=t.dimensions.droppables[T];x||we(),x.isEnabled===I&&we();var R=Ue({},x,{isEnabled:I});return s0(t,R,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;oo(t)||we();var P=e.payload,j=P.id,$=P.isCombineEnabled,U=t.dimensions.droppables[j];U||we(),U.isCombineEnabled===$&&we();var Y=Ue({},U,{isCombineEnabled:$});return s0(t,Y,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;oo(t)||we(),t.isWindowScrollAllowed||we();var q=e.payload.newScroll;if(Ia(t.viewport.scroll.current,q))return a0(t);var F=mF(t.viewport,q);return GE(t)?TF({state:t,viewport:F}):cd({state:t,viewport:F})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!oo(t))return t;var W=e.payload.maxScroll;if(Ia(W,t.viewport.scroll.max))return t;var Q=Ue({},t.viewport,{scroll:Ue({},t.viewport.scroll,{max:W})});return Ue({phase:"DRAGGING"},t,{viewport:Q})}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&we();var H=Wae({state:t,type:e.type});return H?cd({state:t,impact:H.impact,clientSelection:H.clientSelection,scrollJumpRequest:H.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){var X=e.payload.reason;t.phase!=="COLLECTING"&&we();var J=Ue({phase:"DROP_PENDING"},t,{phase:"DROP_PENDING",isWaiting:!0,reason:X});return J}if(e.type==="DROP_ANIMATE"){var ee=e.payload,se=ee.completed,ce=ee.dropDuration,Se=ee.newHomeClientOffset;t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||we();var Ee={phase:"DROP_ANIMATING",completed:se,dropDuration:ce,newHomeClientOffset:Se,dimensions:t.dimensions};return Ee}if(e.type==="DROP_COMPLETE"){var ie=e.payload.completed;return{phase:"IDLE",completed:ie,shouldFlush:!1}}return t},doe=function(e){return{type:"BEFORE_INITIAL_CAPTURE",payload:e}},hoe=function(e){return{type:"LIFT",payload:e}},foe=function(e){return{type:"INITIAL_PUBLISH",payload:e}},poe=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},moe=function(){return{type:"COLLECTION_STARTING",payload:null}},goe=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},voe=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},yoe=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},CF=function(e){return{type:"MOVE",payload:e}},_oe=function(e){return{type:"MOVE_BY_WINDOW_SCROLL",payload:e}},woe=function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}},boe=function(){return{type:"MOVE_UP",payload:null}},xoe=function(){return{type:"MOVE_DOWN",payload:null}},Eoe=function(){return{type:"MOVE_RIGHT",payload:null}},Soe=function(){return{type:"MOVE_LEFT",payload:null}},MT=function(){return{type:"FLUSH",payload:null}},Toe=function(e){return{type:"DROP_ANIMATE",payload:e}},LT=function(e){return{type:"DROP_COMPLETE",payload:e}},kF=function(e){return{type:"DROP",payload:e}},Ioe=function(e){return{type:"DROP_PENDING",payload:e}},NF=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},Coe=function(t){return function(e){var r=e.getState,i=e.dispatch;return function(s){return function(a){if(a.type!=="LIFT"){s(a);return}var o=a.payload,l=o.id,u=o.clientSelection,c=o.movementMode,d=r();d.phase==="DROP_ANIMATING"&&i(LT({completed:d.completed})),r().phase!=="IDLE"&&we(),i(MT()),i(doe({draggableId:l,movementMode:c}));var h={shouldPublishImmediately:c==="SNAP"},f={draggableId:l,scrollOptions:h},m=t.startPublishing(f),v=m.critical,y=m.dimensions,b=m.viewport;i(foe({critical:v,dimensions:y,clientSelection:u,movementMode:c,viewport:b}))}}}},koe=function(t){return function(){return function(e){return function(r){r.type==="INITIAL_PUBLISH"&&t.dragging(),r.type==="DROP_ANIMATE"&&t.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&t.resting(),e(r)}}}},OT={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Wd={opacity:{drop:0,combining:.7},scale:{drop:.75}},jT={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},no=jT.outOfTheWay+"s "+OT.outOfTheWay,dd={fluid:"opacity "+no,snap:"transform "+no+", opacity "+no,drop:function(e){var r=e+"s "+OT.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+no,placeholder:"height "+no+", width "+no+", margin "+no},NR=function(e){return Ia(e,Tn)?null:"translate("+e.x+"px, "+e.y+"px)"},KE={moveTo:NR,drop:function(e,r){var i=NR(e);return i?r?i+" scale("+Wd.scale.drop+")":i:null}},YE=jT.minDropTime,AF=jT.maxDropTime,Noe=AF-YE,AR=1500,Aoe=.6,Roe=function(t){var e=t.current,r=t.destination,i=t.reason,s=zd(e,r);if(s<=0)return YE;if(s>=AR)return AF;var a=s/AR,o=YE+Noe*a,l=i==="CANCEL"?o*Aoe:o;return Number(l.toFixed(2))},Poe=function(t){var e=t.impact,r=t.draggable,i=t.dimensions,s=t.viewport,a=t.afterCritical,o=i.draggables,l=i.droppables,u=Ar(e),c=u?l[u]:null,d=l[r.descriptor.droppableId],h=SF({impact:e,draggable:r,draggables:o,afterCritical:a,droppable:c||d,viewport:s}),f=Cr(h,r.client.borderBox.center);return f},Doe=function(t){var e=t.draggables,r=t.reason,i=t.lastImpact,s=t.home,a=t.viewport,o=t.onLiftImpact;if(!i.at||r!=="DROP"){var l=EF({draggables:e,impact:o,destination:s,viewport:a,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(i.at.type==="REORDER")return{impact:i,didDropInsideDroppable:!0};var u=Ue({},i,{displaced:qd});return{impact:u,didDropInsideDroppable:!0}},Moe=function(t){var e=t.getState,r=t.dispatch;return function(i){return function(s){if(s.type!=="DROP"){i(s);return}var a=e(),o=s.payload.reason;if(a.phase==="COLLECTING"){r(Ioe({reason:o}));return}if(a.phase!=="IDLE"){var l=a.phase==="DROP_PENDING"&&a.isWaiting;l&&we(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||we();var u=a.critical,c=a.dimensions,d=c.draggables[a.critical.draggable.id],h=Doe({reason:o,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),f=h.impact,m=h.didDropInsideDroppable,v=m?kT(f):null,y=m?ov(f):null,b={index:u.draggable.index,droppableId:u.droppable.id},_={draggableId:d.descriptor.id,type:d.descriptor.type,source:b,reason:o,mode:a.movementMode,destination:v,combine:y},w=Poe({impact:f,draggable:d,dimensions:c,viewport:a.viewport,afterCritical:a.afterCritical}),E={critical:a.critical,afterCritical:a.afterCritical,result:_,impact:f},N=!Ia(a.current.client.offset,w)||!!_.combine;if(!N){r(LT({completed:E}));return}var M=Roe({current:a.current.client.offset,destination:w,reason:o}),O={newHomeClientOffset:w,dropDuration:M,completed:E};r(Toe(O))}}}},RF=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function Loe(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||t()}}}function Ooe(t){var e=t.onWindowScroll;function r(){e(RF())}var i=Bd(r),s=Loe(i),a=Ta;function o(){return a!==Ta}function l(){o()&&we(),a=Wr(window,[s])}function u(){o()||we(),i.cancel(),a(),a=Ta}return{start:l,stop:u,isActive:o}}var joe=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},Voe=function(t){var e=Ooe({onWindowScroll:function(i){t.dispatch(_oe({newScroll:i}))}});return function(r){return function(i){!e.isActive()&&i.type==="INITIAL_PUBLISH"&&e.start(),e.isActive()&&joe(i)&&e.stop(),r(i)}}},Foe=function(t){var e=!1,r=!1,i=setTimeout(function(){r=!0}),s=function(o){e||r||(e=!0,t(o),clearTimeout(i))};return s.wasCalled=function(){return e},s},$oe=function(){var t=[],e=function(a){var o=CT(t,function(c){return c.timerId===a});o===-1&&we();var l=t.splice(o,1),u=l[0];u.callback()},r=function(a){var o=setTimeout(function(){return e(o)}),l={timerId:o,callback:a};t.push(l)},i=function(){if(t.length){var a=[].concat(t);t.length=0,a.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:r,flush:i}},Uoe=function(e,r){return e==null&&r==null?!0:e==null||r==null?!1:e.droppableId===r.droppableId&&e.index===r.index},Boe=function(e,r){return e==null&&r==null?!0:e==null||r==null?!1:e.draggableId===r.draggableId&&e.droppableId===r.droppableId},zoe=function(e,r){if(e===r)return!0;var i=e.draggable.id===r.draggable.id&&e.draggable.droppableId===r.draggable.droppableId&&e.draggable.type===r.draggable.type&&e.draggable.index===r.draggable.index,s=e.droppable.id===r.droppable.id&&e.droppable.type===r.droppable.type;return i&&s},_c=function(e,r){r()},Lf=function(e,r){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:r}},o0=function(e,r,i,s){if(!e){i(s(r));return}var a=Foe(i),o={announce:a};e(r,o),a.wasCalled()||i(s(r))},qoe=function(t,e){var r=$oe(),i=null,s=function(f,m){i&&we(),_c("onBeforeCapture",function(){var v=t().onBeforeCapture;if(v){var y={draggableId:f,mode:m};v(y)}})},a=function(f,m){i&&we(),_c("onBeforeDragStart",function(){var v=t().onBeforeDragStart;v&&v(Lf(f,m))})},o=function(f,m){i&&we();var v=Lf(f,m);i={mode:m,lastCritical:f,lastLocation:v.source,lastCombine:null},r.add(function(){_c("onDragStart",function(){return o0(t().onDragStart,v,e,Ep.onDragStart)})})},l=function(f,m){var v=kT(m),y=ov(m);i||we();var b=!zoe(f,i.lastCritical);b&&(i.lastCritical=f);var _=!Uoe(i.lastLocation,v);_&&(i.lastLocation=v);var w=!Boe(i.lastCombine,y);if(w&&(i.lastCombine=y),!(!b&&!_&&!w)){var E=Ue({},Lf(f,i.mode),{combine:y,destination:v});r.add(function(){_c("onDragUpdate",function(){return o0(t().onDragUpdate,E,e,Ep.onDragUpdate)})})}},u=function(){i||we(),r.flush()},c=function(f){i||we(),i=null,_c("onDragEnd",function(){return o0(t().onDragEnd,f,e,Ep.onDragEnd)})},d=function(){if(i){var f=Ue({},Lf(i.lastCritical,i.mode),{combine:null,destination:null,reason:"CANCEL"});c(f)}};return{beforeCapture:s,beforeStart:a,start:o,update:l,flush:u,drop:c,abort:d}},Hoe=function(t,e){var r=qoe(t,e);return function(i){return function(s){return function(a){if(a.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(a.type==="INITIAL_PUBLISH"){var o=a.payload.critical;r.beforeStart(o,a.payload.movementMode),s(a),r.start(o,a.payload.movementMode);return}if(a.type==="DROP_COMPLETE"){var l=a.payload.completed.result;r.flush(),s(a),r.drop(l);return}if(s(a),a.type==="FLUSH"){r.abort();return}var u=i.getState();u.phase==="DRAGGING"&&r.update(u.critical,u.impact)}}}},Woe=function(t){return function(e){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){e(r);return}var i=t.getState();i.phase!=="DROP_ANIMATING"&&we(),t.dispatch(LT({completed:i.completed}))}}},Goe=function(t){var e=null,r=null;function i(){r&&(cancelAnimationFrame(r),r=null),e&&(e(),e=null)}return function(s){return function(a){if((a.type==="FLUSH"||a.type==="DROP_COMPLETE"||a.type==="DROP_ANIMATION_FINISHED")&&i(),s(a),a.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var u=t.getState();u.phase==="DROP_ANIMATING"&&t.dispatch(NF())}};r=requestAnimationFrame(function(){r=null,e=Wr(window,[o])})}}}},Koe=function(t){return function(){return function(e){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&t.stopPublishing(),e(r)}}}},Yoe=function(t){var e=!1;return function(){return function(r){return function(i){if(i.type==="INITIAL_PUBLISH"){e=!0,t.tryRecordFocus(i.payload.critical.draggable.id),r(i),t.tryRestoreFocusRecorded();return}if(r(i),!!e){if(i.type==="FLUSH"){e=!1,t.tryRestoreFocusRecorded();return}if(i.type==="DROP_COMPLETE"){e=!1;var s=i.payload.completed.result;s.combine&&t.tryShiftRecord(s.draggableId,s.combine.draggableId),t.tryRestoreFocusRecorded()}}}}}},Xoe=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},Qoe=function(t){return function(e){return function(r){return function(i){if(Xoe(i)){t.stop(),r(i);return}if(i.type==="INITIAL_PUBLISH"){r(i);var s=e.getState();s.phase!=="DRAGGING"&&we(),t.start(s);return}r(i),t.scroll(e.getState())}}}},Joe=function(t){return function(e){return function(r){if(e(r),r.type==="PUBLISH_WHILE_DRAGGING"){var i=t.getState();i.phase==="DROP_PENDING"&&(i.isWaiting||t.dispatch(kF({reason:i.reason})))}}}},Zoe=jV,ele=function(t){var e=t.dimensionMarshal,r=t.focusMarshal,i=t.styleMarshal,s=t.getResponders,a=t.announce,o=t.autoScroller;return OV(coe,Zoe($ie(koe(i),Koe(e),Coe(e),Moe,Woe,Goe,Joe,Qoe(o),Voe,Yoe(r),Hoe(s,a))))},l0=function(){return{additions:{},removals:{},modified:{}}};function tle(t){var e=t.registry,r=t.callbacks,i=l0(),s=null,a=function(){s||(r.collectionStarting(),s=requestAnimationFrame(function(){s=null;var d=i,h=d.additions,f=d.removals,m=d.modified,v=Object.keys(h).map(function(_){return e.draggable.getById(_).getDimension(Tn)}).sort(function(_,w){return _.descriptor.index-w.descriptor.index}),y=Object.keys(m).map(function(_){var w=e.droppable.getById(_),E=w.callbacks.getScrollWhileDragging();return{droppableId:_,scroll:E}}),b={additions:v,removals:Object.keys(f),modified:y};i=l0(),r.publish(b)}))},o=function(d){var h=d.descriptor.id;i.additions[h]=d,i.modified[d.descriptor.droppableId]=!0,i.removals[h]&&delete i.removals[h],a()},l=function(d){var h=d.descriptor;i.removals[h.id]=!0,i.modified[h.droppableId]=!0,i.additions[h.id]&&delete i.additions[h.id],a()},u=function(){s&&(cancelAnimationFrame(s),s=null,i=l0())};return{add:o,remove:l,stop:u}}var PF=function(t){var e=t.scrollHeight,r=t.scrollWidth,i=t.height,s=t.width,a=Cr({x:r,y:e},{x:s,y:i}),o={x:Math.max(0,a.x),y:Math.max(0,a.y)};return o},DF=function(){var t=document.documentElement;return t||we(),t},MF=function(){var t=DF(),e=PF({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight});return e},nle=function(){var t=RF(),e=MF(),r=t.y,i=t.x,s=DF(),a=s.clientWidth,o=s.clientHeight,l=i+a,u=r+o,c=fi({top:r,left:i,right:l,bottom:u}),d={frame:c,scroll:{initial:t,current:t,max:e,diff:{value:Tn,displacement:Tn}}};return d},rle=function(t){var e=t.critical,r=t.scrollOptions,i=t.registry,s=nle(),a=s.scroll.current,o=e.droppable,l=i.droppable.getAllByType(o.type).map(function(h){return h.callbacks.getDimensionAndWatchScroll(a,r)}),u=i.draggable.getAllByType(e.draggable.type).map(function(h){return h.getDimension(a)}),c={draggables:uF(u),droppables:lF(l)},d={dimensions:c,critical:e,viewport:s};return d};function RR(t,e,r){if(r.descriptor.id===e.id||r.descriptor.type!==e.type)return!1;var i=t.droppable.getById(r.descriptor.droppableId);return i.descriptor.mode==="virtual"}var ile=function(t,e){var r=null,i=tle({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),s=function(m,v){t.droppable.exists(m)||we(),r&&e.updateDroppableIsEnabled({id:m,isEnabled:v})},a=function(m,v){r&&(t.droppable.exists(m)||we(),e.updateDroppableIsCombineEnabled({id:m,isCombineEnabled:v}))},o=function(m,v){r&&(t.droppable.exists(m)||we(),e.updateDroppableScroll({id:m,newScroll:v}))},l=function(m,v){r&&t.droppable.getById(m).callbacks.scroll(v)},u=function(){if(r){i.stop();var m=r.critical.droppable;t.droppable.getAllByType(m.type).forEach(function(v){return v.callbacks.dragStopped()}),r.unsubscribe(),r=null}},c=function(m){r||we();var v=r.critical.draggable;m.type==="ADDITION"&&RR(t,v,m.value)&&i.add(m.value),m.type==="REMOVAL"&&RR(t,v,m.value)&&i.remove(m.value)},d=function(m){r&&we();var v=t.draggable.getById(m.draggableId),y=t.droppable.getById(v.descriptor.droppableId),b={draggable:v.descriptor,droppable:y.descriptor},_=t.subscribe(c);return r={critical:b,unsubscribe:_},rle({critical:b,registry:t,scrollOptions:m.scrollOptions})},h={updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:a,scrollDroppable:l,updateDroppableScroll:o,startPublishing:d,stopPublishing:u};return h},LF=function(t,e){return t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP"},sle=function(t){window.scrollBy(t.x,t.y)},ale=En(function(t){return av(t).filter(function(e){return!(!e.isEnabled||!e.frame)})}),ole=function(e,r){var i=Ka(ale(r),function(s){return s.frame||we(),_F(s.frame.pageMarginBox)(e)});return i},lle=function(t){var e=t.center,r=t.destination,i=t.droppables;if(r){var s=i[r];return s.frame?s:null}var a=ole(e,i);return a},Ca={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(e){return Math.pow(e,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},ule=function(t,e){var r=t[e.size]*Ca.startFromPercentage,i=t[e.size]*Ca.maxScrollAtPercentage,s={startScrollingFrom:r,maxScrollValueAt:i};return s},OF=function(t){var e=t.startOfRange,r=t.endOfRange,i=t.current,s=r-e;if(s===0)return 0;var a=i-e,o=a/s;return o},VT=1,cle=function(t,e){if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return Ca.maxPixelScroll;if(t===e.startScrollingFrom)return VT;var r=OF({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),i=1-r,s=Ca.maxPixelScroll*Ca.ease(i);return Math.ceil(s)},PR=Ca.durationDampening.accelerateAt,DR=Ca.durationDampening.stopDampeningAt,dle=function(t,e){var r=e,i=DR,s=Date.now(),a=s-r;if(a>=DR)return t;if(a<PR)return VT;var o=OF({startOfRange:PR,endOfRange:i,current:a}),l=t*Ca.ease(o);return Math.ceil(l)},MR=function(t){var e=t.distanceToEdge,r=t.thresholds,i=t.dragStartTime,s=t.shouldUseTimeDampening,a=cle(e,r);return a===0?0:s?Math.max(dle(a,i),VT):a},LR=function(t){var e=t.container,r=t.distanceToEdges,i=t.dragStartTime,s=t.axis,a=t.shouldUseTimeDampening,o=ule(e,s),l=r[s.end]<r[s.start];return l?MR({distanceToEdge:r[s.end],thresholds:o,dragStartTime:i,shouldUseTimeDampening:a}):-1*MR({distanceToEdge:r[s.start],thresholds:o,dragStartTime:i,shouldUseTimeDampening:a})},hle=function(t){var e=t.container,r=t.subject,i=t.proposedScroll,s=r.height>e.height,a=r.width>e.width;return!a&&!s?i:a&&s?null:{x:a?0:i.x,y:s?0:i.y}},fle=aF(function(t){return t===0?0:t}),jF=function(t){var e=t.dragStartTime,r=t.container,i=t.subject,s=t.center,a=t.shouldUseTimeDampening,o={top:s.y-r.top,right:r.right-s.x,bottom:r.bottom-s.y,left:s.x-r.left},l=LR({container:r,distanceToEdges:o,dragStartTime:e,axis:NT,shouldUseTimeDampening:a}),u=LR({container:r,distanceToEdges:o,dragStartTime:e,axis:hF,shouldUseTimeDampening:a}),c=fle({x:u,y:l});if(Ia(c,Tn))return null;var d=hle({container:r,subject:i,proposedScroll:c});return d?Ia(d,Tn)?null:d:null},ple=aF(function(t){return t===0?0:t>0?1:-1}),FT=function(){var t=function(r,i){return r<0?r:r>i?r-i:0};return function(e){var r=e.current,i=e.max,s=e.change,a=Pn(r,s),o={x:t(a.x,i.x),y:t(a.y,i.y)};return Ia(o,Tn)?null:o}}(),VF=function(e){var r=e.max,i=e.current,s=e.change,a={x:Math.max(i.x,r.x),y:Math.max(i.y,r.y)},o=ple(s),l=FT({max:a,current:i,change:o});return!l||o.x!==0&&l.x===0||o.y!==0&&l.y===0},$T=function(e,r){return VF({current:e.scroll.current,max:e.scroll.max,change:r})},mle=function(e,r){if(!$T(e,r))return null;var i=e.scroll.max,s=e.scroll.current;return FT({current:s,max:i,change:r})},UT=function(e,r){var i=e.frame;return i?VF({current:i.scroll.current,max:i.scroll.max,change:r}):!1},gle=function(e,r){var i=e.frame;return!i||!UT(e,r)?null:FT({current:i.scroll.current,max:i.scroll.max,change:r})},vle=function(t){var e=t.viewport,r=t.subject,i=t.center,s=t.dragStartTime,a=t.shouldUseTimeDampening,o=jF({dragStartTime:s,container:e.frame,subject:r,center:i,shouldUseTimeDampening:a});return o&&$T(e,o)?o:null},yle=function(t){var e=t.droppable,r=t.subject,i=t.center,s=t.dragStartTime,a=t.shouldUseTimeDampening,o=e.frame;if(!o)return null;var l=jF({dragStartTime:s,container:o.pageMarginBox,subject:r,center:i,shouldUseTimeDampening:a});return l&&UT(e,l)?l:null},OR=function(t){var e=t.state,r=t.dragStartTime,i=t.shouldUseTimeDampening,s=t.scrollWindow,a=t.scrollDroppable,o=e.current.page.borderBoxCenter,l=e.dimensions.draggables[e.critical.draggable.id],u=l.page.marginBox;if(e.isWindowScrollAllowed){var c=e.viewport,d=vle({dragStartTime:r,viewport:c,subject:u,center:o,shouldUseTimeDampening:i});if(d){s(d);return}}var h=lle({center:o,destination:Ar(e.impact),droppables:e.dimensions.droppables});if(h){var f=yle({dragStartTime:r,droppable:h,subject:u,center:o,shouldUseTimeDampening:i});f&&a(h.descriptor.id,f)}},_le=function(t){var e=t.scrollWindow,r=t.scrollDroppable,i=Bd(e),s=Bd(r),a=null,o=function(d){a||we();var h=a,f=h.shouldUseTimeDampening,m=h.dragStartTime;OR({state:d,scrollWindow:i,scrollDroppable:s,dragStartTime:m,shouldUseTimeDampening:f})},l=function(d){a&&we();var h=Date.now(),f=!1,m=function(){f=!0};OR({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:m,scrollDroppable:m}),a={dragStartTime:h,shouldUseTimeDampening:f},f&&o(d)},u=function(){a&&(i.cancel(),s.cancel(),a=null)};return{start:l,stop:u,scroll:o}},wle=function(t){var e=t.move,r=t.scrollDroppable,i=t.scrollWindow,s=function(c,d){var h=Pn(c.current.client.selection,d);e({client:h})},a=function(c,d){if(!UT(c,d))return d;var h=gle(c,d);if(!h)return r(c.descriptor.id,d),null;var f=Cr(d,h);r(c.descriptor.id,f);var m=Cr(d,f);return m},o=function(c,d,h){if(!c||!$T(d,h))return h;var f=mle(d,h);if(!f)return i(h),null;var m=Cr(h,f);i(m);var v=Cr(h,m);return v},l=function(c){var d=c.scrollJumpRequest;if(d){var h=Ar(c.impact);h||we();var f=a(c.dimensions.droppables[h],d);if(f){var m=c.viewport,v=o(c.isWindowScrollAllowed,m,f);v&&s(c,v)}}};return l},ble=function(t){var e=t.scrollDroppable,r=t.scrollWindow,i=t.move,s=_le({scrollWindow:r,scrollDroppable:e}),a=wle({move:i,scrollWindow:r,scrollDroppable:e}),o=function(c){if(c.phase==="DRAGGING"){if(c.movementMode==="FLUID"){s.scroll(c);return}c.scrollJumpRequest&&a(c)}},l={scroll:o,start:s.start,stop:s.stop};return l},bu="data-rbd",xu=function(){var t=bu+"-drag-handle";return{base:t,draggableId:t+"-draggable-id",contextId:t+"-context-id"}}(),XE=function(){var t=bu+"-draggable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),xle=function(){var t=bu+"-droppable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),jR={contextId:bu+"-scroll-container-context-id"},Ele=function(e){return function(r){return"["+r+'="'+e+'"]'}},wc=function(e,r){return e.map(function(i){var s=i.styles[r];return s?i.selector+" { "+s+" }":""}).join(" ")},Sle="pointer-events: none;",Tle=function(t){var e=Ele(t),r=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(xu.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:Sle,dropAnimating:l}}}(),i=function(){var l=`
      transition: `+dd.outOfTheWay+`;
    `;return{selector:e(XE.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),s={selector:e(xle.contextId),styles:{always:"overflow-anchor: none;"}},a={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[i,r,s,a];return{always:wc(o,"always"),resting:wc(o,"resting"),dragging:wc(o,"dragging"),dropAnimating:wc(o,"dropAnimating"),userCancel:wc(o,"userCancel")}},Rr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?S.useLayoutEffect:S.useEffect,u0=function(){var e=document.querySelector("head");return e||we(),e},VR=function(e){var r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.type="text/css",r};function Ile(t,e){var r=ct(function(){return Tle(t)},[t]),i=S.useRef(null),s=S.useRef(null),a=Fe(En(function(h){var f=s.current;f||we(),f.textContent=h}),[]),o=Fe(function(h){var f=i.current;f||we(),f.textContent=h},[]);Rr(function(){!i.current&&!s.current||we();var h=VR(e),f=VR(e);return i.current=h,s.current=f,h.setAttribute(bu+"-always",t),f.setAttribute(bu+"-dynamic",t),u0().appendChild(h),u0().appendChild(f),o(r.always),a(r.resting),function(){var m=function(y){var b=y.current;b||we(),u0().removeChild(b),y.current=null};m(i),m(s)}},[e,o,a,r.always,r.resting,t]);var l=Fe(function(){return a(r.dragging)},[a,r.dragging]),u=Fe(function(h){if(h==="DROP"){a(r.dropAnimating);return}a(r.userCancel)},[a,r.dropAnimating,r.userCancel]),c=Fe(function(){s.current&&a(r.resting)},[a,r.resting]),d=ct(function(){return{dragging:l,dropping:u,resting:c}},[l,u,c]);return d}var FF=function(t){return t&&t.ownerDocument?t.ownerDocument.defaultView:window};function cv(t){return t instanceof FF(t).HTMLElement}function Cle(t,e){var r="["+xu.contextId+'="'+t+'"]',i=oF(document.querySelectorAll(r));if(!i.length)return null;var s=Ka(i,function(a){return a.getAttribute(xu.draggableId)===e});return!s||!cv(s)?null:s}function kle(t){var e=S.useRef({}),r=S.useRef(null),i=S.useRef(null),s=S.useRef(!1),a=Fe(function(f,m){var v={id:f,focus:m};return e.current[f]=v,function(){var b=e.current,_=b[f];_!==v&&delete b[f]}},[]),o=Fe(function(f){var m=Cle(t,f);m&&m!==document.activeElement&&m.focus()},[t]),l=Fe(function(f,m){r.current===f&&(r.current=m)},[]),u=Fe(function(){i.current||s.current&&(i.current=requestAnimationFrame(function(){i.current=null;var f=r.current;f&&o(f)}))},[o]),c=Fe(function(f){r.current=null;var m=document.activeElement;m&&m.getAttribute(xu.draggableId)===f&&(r.current=f)},[]);Rr(function(){return s.current=!0,function(){s.current=!1;var f=i.current;f&&cancelAnimationFrame(f)}},[]);var d=ct(function(){return{register:a,tryRecordFocus:c,tryRestoreFocusRecorded:u,tryShiftRecord:l}},[a,c,u,l]);return d}function Nle(){var t={draggables:{},droppables:{}},e=[];function r(h){return e.push(h),function(){var m=e.indexOf(h);m!==-1&&e.splice(m,1)}}function i(h){e.length&&e.forEach(function(f){return f(h)})}function s(h){return t.draggables[h]||null}function a(h){var f=s(h);return f||we(),f}var o={register:function(f){t.draggables[f.descriptor.id]=f,i({type:"ADDITION",value:f})},update:function(f,m){var v=t.draggables[m.descriptor.id];v&&v.uniqueId===f.uniqueId&&(delete t.draggables[m.descriptor.id],t.draggables[f.descriptor.id]=f)},unregister:function(f){var m=f.descriptor.id,v=s(m);v&&f.uniqueId===v.uniqueId&&(delete t.draggables[m],i({type:"REMOVAL",value:f}))},getById:a,findById:s,exists:function(f){return!!s(f)},getAllByType:function(f){return Am(t.draggables).filter(function(m){return m.descriptor.type===f})}};function l(h){return t.droppables[h]||null}function u(h){var f=l(h);return f||we(),f}var c={register:function(f){t.droppables[f.descriptor.id]=f},unregister:function(f){var m=l(f.descriptor.id);m&&f.uniqueId===m.uniqueId&&delete t.droppables[f.descriptor.id]},getById:u,findById:l,exists:function(f){return!!l(f)},getAllByType:function(f){return Am(t.droppables).filter(function(m){return m.descriptor.type===f})}};function d(){t.draggables={},t.droppables={},e.length=0}return{draggable:o,droppable:c,subscribe:r,clean:d}}function Ale(){var t=ct(Nle,[]);return S.useEffect(function(){return function(){requestAnimationFrame(t.clean)}},[t]),t}var BT=te.createContext(null),Pm=function(){var t=document.body;return t||we(),t},Rle={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Ple=function(e){return"rbd-announcement-"+e};function Dle(t){var e=ct(function(){return Ple(t)},[t]),r=S.useRef(null);S.useEffect(function(){var a=document.createElement("div");return r.current=a,a.id=e,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),Ue(a.style,Rle),Pm().appendChild(a),function(){setTimeout(function(){var u=Pm();u.contains(a)&&u.removeChild(a),a===r.current&&(r.current=null)})}},[e]);var i=Fe(function(s){var a=r.current;if(a){a.textContent=s;return}},[]);return i}var Mle=0,Lle={separator:"::"};function zT(t,e){return e===void 0&&(e=Lle),ct(function(){return""+t+e.separator+Mle++},[e.separator,t])}function Ole(t){var e=t.contextId,r=t.uniqueId;return"rbd-hidden-text-"+e+"-"+r}function jle(t){var e=t.contextId,r=t.text,i=zT("hidden-text",{separator:"-"}),s=ct(function(){return Ole({contextId:e,uniqueId:i})},[i,e]);return S.useEffect(function(){var o=document.createElement("div");return o.id=s,o.textContent=r,o.style.display="none",Pm().appendChild(o),function(){var u=Pm();u.contains(o)&&u.removeChild(o)}},[s,r]),s}var dv=te.createContext(null);function $F(t){var e=S.useRef(t);return S.useEffect(function(){e.current=t}),e}function Vle(){var t=null;function e(){return!!t}function r(o){return o===t}function i(o){t&&we();var l={abandon:o};return t=l,l}function s(){t||we(),t=null}function a(){t&&(t.abandon(),s())}return{isClaimed:e,isActive:r,claim:i,release:s,tryAbandon:a}}var Fle=9,$le=13,qT=27,UF=32,Ule=33,Ble=34,zle=35,qle=36,Hle=37,Wle=38,Gle=39,Kle=40,Of,Yle=(Of={},Of[$le]=!0,Of[Fle]=!0,Of),BF=function(t){Yle[t.keyCode]&&t.preventDefault()},hv=function(){var t="visibilitychange";if(typeof document>"u")return t;var e=[t,"ms"+t,"webkit"+t,"moz"+t,"o"+t],r=Ka(e,function(i){return"on"+i in document});return r||t}(),zF=0,FR=5;function Xle(t,e){return Math.abs(e.x-t.x)>=FR||Math.abs(e.y-t.y)>=FR}var $R={type:"IDLE"};function Qle(t){var e=t.cancel,r=t.completed,i=t.getPhase,s=t.setPhase;return[{eventName:"mousemove",fn:function(o){var l=o.button,u=o.clientX,c=o.clientY;if(l===zF){var d={x:u,y:c},h=i();if(h.type==="DRAGGING"){o.preventDefault(),h.actions.move(d);return}h.type!=="PENDING"&&we();var f=h.point;if(Xle(f,d)){o.preventDefault();var m=h.actions.fluidLift(d);s({type:"DRAGGING",actions:m})}}}},{eventName:"mouseup",fn:function(o){var l=i();if(l.type!=="DRAGGING"){e();return}o.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(o){i().type==="DRAGGING"&&o.preventDefault(),e()}},{eventName:"keydown",fn:function(o){var l=i();if(l.type==="PENDING"){e();return}if(o.keyCode===qT){o.preventDefault(),e();return}BF(o)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){i().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:function(o){var l=i();if(l.type==="IDLE"&&we(),l.actions.shouldRespectForcePress()){e();return}o.preventDefault()}},{eventName:hv,fn:e}]}function Jle(t){var e=S.useRef($R),r=S.useRef(Ta),i=ct(function(){return{eventName:"mousedown",fn:function(h){if(!h.defaultPrevented&&h.button===zF&&!(h.ctrlKey||h.metaKey||h.shiftKey||h.altKey)){var f=t.findClosestDraggableId(h);if(f){var m=t.tryGetLock(f,o,{sourceEvent:h});if(m){h.preventDefault();var v={x:h.clientX,y:h.clientY};r.current(),c(m,v)}}}}}},[t]),s=ct(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(h){if(!h.defaultPrevented){var f=t.findClosestDraggableId(h);if(f){var m=t.findOptionsForDraggable(f);m&&(m.shouldRespectForcePress||t.canGetLock(f)&&h.preventDefault())}}}}},[t]),a=Fe(function(){var h={passive:!1,capture:!0};r.current=Wr(window,[s,i],h)},[s,i]),o=Fe(function(){var d=e.current;d.type!=="IDLE"&&(e.current=$R,r.current(),a())},[a]),l=Fe(function(){var d=e.current;o(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[o]),u=Fe(function(){var h={capture:!0,passive:!1},f=Qle({cancel:l,completed:o,getPhase:function(){return e.current},setPhase:function(v){e.current=v}});r.current=Wr(window,f,h)},[l,o]),c=Fe(function(h,f){e.current.type!=="IDLE"&&we(),e.current={type:"PENDING",point:f,actions:h},u()},[u]);Rr(function(){return a(),function(){r.current()}},[a])}var fl;function Zle(){}var eue=(fl={},fl[Ble]=!0,fl[Ule]=!0,fl[qle]=!0,fl[zle]=!0,fl);function tue(t,e){function r(){e(),t.cancel()}function i(){e(),t.drop()}return[{eventName:"keydown",fn:function(a){if(a.keyCode===qT){a.preventDefault(),r();return}if(a.keyCode===UF){a.preventDefault(),i();return}if(a.keyCode===Kle){a.preventDefault(),t.moveDown();return}if(a.keyCode===Wle){a.preventDefault(),t.moveUp();return}if(a.keyCode===Gle){a.preventDefault(),t.moveRight();return}if(a.keyCode===Hle){a.preventDefault(),t.moveLeft();return}if(eue[a.keyCode]){a.preventDefault();return}BF(a)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:hv,fn:r}]}function nue(t){var e=S.useRef(Zle),r=ct(function(){return{eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==UF)return;var o=t.findClosestDraggableId(a);if(!o)return;var l=t.tryGetLock(o,d,{sourceEvent:a});if(!l)return;a.preventDefault();var u=!0,c=l.snapLift();e.current();function d(){u||we(),u=!1,e.current(),i()}e.current=Wr(window,tue(c,d),{capture:!0,passive:!1})}}},[t]),i=Fe(function(){var a={passive:!1,capture:!0};e.current=Wr(window,[r],a)},[r]);Rr(function(){return i(),function(){e.current()}},[i])}var c0={type:"IDLE"},rue=120,iue=.15;function sue(t){var e=t.cancel,r=t.getPhase;return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:function(s){s.preventDefault()}},{eventName:"keydown",fn:function(s){if(r().type!=="DRAGGING"){e();return}s.keyCode===qT&&s.preventDefault(),e()}},{eventName:hv,fn:e}]}function aue(t){var e=t.cancel,r=t.completed,i=t.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(a){var o=i();if(o.type!=="DRAGGING"){e();return}o.hasMoved=!0;var l=a.touches[0],u=l.clientX,c=l.clientY,d={x:u,y:c};a.preventDefault(),o.actions.move(d)}},{eventName:"touchend",fn:function(a){var o=i();if(o.type!=="DRAGGING"){e();return}a.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(a){if(i().type!=="DRAGGING"){e();return}a.preventDefault(),e()}},{eventName:"touchforcechange",fn:function(a){var o=i();o.type==="IDLE"&&we();var l=a.touches[0];if(l){var u=l.force>=iue;if(u){var c=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){c&&e();return}if(c){if(o.hasMoved){a.preventDefault();return}e();return}a.preventDefault()}}}},{eventName:hv,fn:e}]}function oue(t){var e=S.useRef(c0),r=S.useRef(Ta),i=Fe(function(){return e.current},[]),s=Fe(function(m){e.current=m},[]),a=ct(function(){return{eventName:"touchstart",fn:function(m){if(!m.defaultPrevented){var v=t.findClosestDraggableId(m);if(v){var y=t.tryGetLock(v,l,{sourceEvent:m});if(y){var b=m.touches[0],_=b.clientX,w=b.clientY,E={x:_,y:w};r.current(),h(y,E)}}}}}},[t]),o=Fe(function(){var m={capture:!0,passive:!1};r.current=Wr(window,[a],m)},[a]),l=Fe(function(){var f=e.current;f.type!=="IDLE"&&(f.type==="PENDING"&&clearTimeout(f.longPressTimerId),s(c0),r.current(),o())},[o,s]),u=Fe(function(){var f=e.current;l(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[l]),c=Fe(function(){var m={capture:!0,passive:!1},v={cancel:u,completed:l,getPhase:i},y=Wr(window,aue(v),m),b=Wr(window,sue(v),m);r.current=function(){y(),b()}},[u,i,l]),d=Fe(function(){var m=i();m.type!=="PENDING"&&we();var v=m.actions.fluidLift(m.point);s({type:"DRAGGING",actions:v,hasMoved:!1})},[i,s]),h=Fe(function(m,v){i().type!=="IDLE"&&we();var y=setTimeout(d,rue);s({type:"PENDING",point:v,actions:m,longPressTimerId:y}),c()},[c,i,s,d]);Rr(function(){return o(),function(){r.current();var v=i();v.type==="PENDING"&&(clearTimeout(v.longPressTimerId),s(c0))}},[i,o,s]),Rr(function(){var m=Wr(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return m},[])}var lue={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function qF(t,e){if(e==null)return!1;var r=!!lue[e.tagName.toLowerCase()];if(r)return!0;var i=e.getAttribute("contenteditable");return i==="true"||i===""?!0:e===t?!1:qF(t,e.parentElement)}function uue(t,e){var r=e.target;return cv(r)?qF(t,r):!1}var cue=function(t){return fi(t.getBoundingClientRect()).center};function due(t){return t instanceof FF(t).Element}var hue=function(){var t="matches";if(typeof document>"u")return t;var e=[t,"msMatchesSelector","webkitMatchesSelector"],r=Ka(e,function(i){return i in Element.prototype});return r||t}();function HF(t,e){return t==null?null:t[hue](e)?t:HF(t.parentElement,e)}function fue(t,e){return t.closest?t.closest(e):HF(t,e)}function pue(t){return"["+xu.contextId+'="'+t+'"]'}function mue(t,e){var r=e.target;if(!due(r))return null;var i=pue(t),s=fue(r,i);return!s||!cv(s)?null:s}function gue(t,e){var r=mue(t,e);return r?r.getAttribute(xu.draggableId):null}function vue(t,e){var r="["+XE.contextId+'="'+t+'"]',i=oF(document.querySelectorAll(r)),s=Ka(i,function(a){return a.getAttribute(XE.id)===e});return!s||!cv(s)?null:s}function yue(t){t.preventDefault()}function jf(t){var e=t.expected,r=t.phase,i=t.isLockActive;return t.shouldWarn,!(!i()||e!==r)}function WF(t){var e=t.lockAPI,r=t.store,i=t.registry,s=t.draggableId;if(e.isClaimed())return!1;var a=i.draggable.findById(s);return!(!a||!a.options.isEnabled||!LF(r.getState(),s))}function _ue(t){var e=t.lockAPI,r=t.contextId,i=t.store,s=t.registry,a=t.draggableId,o=t.forceSensorStop,l=t.sourceEvent,u=WF({lockAPI:e,store:i,registry:s,draggableId:a});if(!u)return null;var c=s.draggable.getById(a),d=vue(r,c.descriptor.id);if(!d||l&&!c.options.canDragInteractiveElements&&uue(d,l))return null;var h=e.claim(o||Ta),f="PRE_DRAG";function m(){return c.options.shouldRespectForcePress}function v(){return e.isActive(h)}function y(O,A){jf({expected:O,phase:f,isLockActive:v,shouldWarn:!0})&&i.dispatch(A())}var b=y.bind(null,"DRAGGING");function _(O){function A(){e.release(),f="COMPLETED"}f!=="PRE_DRAG"&&(A(),f!=="PRE_DRAG"&&we()),i.dispatch(hoe(O.liftActionArgs)),f="DRAGGING";function D(T,I){if(I===void 0&&(I={shouldBlockNextClick:!1}),O.cleanup(),I.shouldBlockNextClick){var x=Wr(window,[{eventName:"click",fn:yue,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(x)}A(),i.dispatch(kF({reason:T}))}return Ue({isActive:function(){return jf({expected:"DRAGGING",phase:f,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:m,drop:function(I){return D("DROP",I)},cancel:function(I){return D("CANCEL",I)}},O.actions)}function w(O){var A=Bd(function(T){b(function(){return CF({client:T})})}),D=_({liftActionArgs:{id:a,clientSelection:O,movementMode:"FLUID"},cleanup:function(){return A.cancel()},actions:{move:A}});return Ue({},D,{move:A})}function E(){var O={moveUp:function(){return b(boe)},moveRight:function(){return b(Eoe)},moveDown:function(){return b(xoe)},moveLeft:function(){return b(Soe)}};return _({liftActionArgs:{id:a,clientSelection:cue(d),movementMode:"SNAP"},cleanup:Ta,actions:O})}function N(){var O=jf({expected:"PRE_DRAG",phase:f,isLockActive:v,shouldWarn:!0});O&&e.release()}var M={isActive:function(){return jf({expected:"PRE_DRAG",phase:f,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:m,fluidLift:w,snapLift:E,abort:N};return M}var wue=[Jle,nue,oue];function bue(t){var e=t.contextId,r=t.store,i=t.registry,s=t.customSensors,a=t.enableDefaultSensors,o=[].concat(a?wue:[],s||[]),l=S.useState(function(){return Vle()})[0],u=Fe(function(w,E){w.isDragging&&!E.isDragging&&l.tryAbandon()},[l]);Rr(function(){var w=r.getState(),E=r.subscribe(function(){var N=r.getState();u(w,N),w=N});return E},[l,r,u]),Rr(function(){return l.tryAbandon},[l.tryAbandon]);for(var c=Fe(function(_){return WF({lockAPI:l,registry:i,store:r,draggableId:_})},[l,i,r]),d=Fe(function(_,w,E){return _ue({lockAPI:l,registry:i,contextId:e,store:r,draggableId:_,forceSensorStop:w,sourceEvent:E&&E.sourceEvent?E.sourceEvent:null})},[e,l,i,r]),h=Fe(function(_){return gue(e,_)},[e]),f=Fe(function(_){var w=i.draggable.findById(_);return w?w.options:null},[i.draggable]),m=Fe(function(){l.isClaimed()&&(l.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(MT()))},[l,r]),v=Fe(l.isClaimed,[l]),y=ct(function(){return{canGetLock:c,tryGetLock:d,findClosestDraggableId:h,findOptionsForDraggable:f,tryReleaseLock:m,isLockClaimed:v}},[c,d,h,f,m,v]),b=0;b<o.length;b++)o[b](y)}var xue=function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}};function bc(t){return t.current||we(),t.current}function Eue(t){var e=t.contextId,r=t.setCallbacks,i=t.sensors,s=t.nonce,a=t.dragHandleUsageInstructions,o=S.useRef(null),l=$F(t),u=Fe(function(){return xue(l.current)},[l]),c=Dle(e),d=jle({contextId:e,text:a}),h=Ile(e,s),f=Fe(function(T){bc(o).dispatch(T)},[]),m=ct(function(){return uR({publishWhileDragging:poe,updateDroppableScroll:goe,updateDroppableIsEnabled:voe,updateDroppableIsCombineEnabled:yoe,collectionStarting:moe},f)},[f]),v=Ale(),y=ct(function(){return ile(v,m)},[v,m]),b=ct(function(){return ble(Ue({scrollWindow:sle,scrollDroppable:y.scrollDroppable},uR({move:CF},f)))},[y.scrollDroppable,f]),_=kle(e),w=ct(function(){return ele({announce:c,autoScroller:b,dimensionMarshal:y,focusMarshal:_,getResponders:u,styleMarshal:h})},[c,b,y,_,u,h]);o.current=w;var E=Fe(function(){var T=bc(o),I=T.getState();I.phase!=="IDLE"&&T.dispatch(MT())},[]),N=Fe(function(){var T=bc(o).getState();return T.isDragging||T.phase==="DROP_ANIMATING"},[]),M=ct(function(){return{isDragging:N,tryAbort:E}},[N,E]);r(M);var O=Fe(function(T){return LF(bc(o).getState(),T)},[]),A=Fe(function(){return oo(bc(o).getState())},[]),D=ct(function(){return{marshal:y,focus:_,contextId:e,canLift:O,isMovementAllowed:A,dragHandleUsageInstructionsId:d,registry:v}},[e,y,d,_,O,A,v]);return bue({contextId:e,store:w,registry:v,customSensors:i,enableDefaultSensors:t.enableDefaultSensors!==!1}),S.useEffect(function(){return E},[E]),te.createElement(dv.Provider,{value:D},te.createElement(Hie,{context:BT,store:w},t.children))}var Sue=0;function Tue(){return ct(function(){return""+Sue++},[])}function Iue(t){var e=Tue(),r=t.dragHandleUsageInstructions||Ep.dragHandleUsageInstructions;return te.createElement(nae,null,function(i){return te.createElement(Eue,{nonce:t.nonce,contextId:e,setCallbacks:i,dragHandleUsageInstructions:r,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd},t.children)})}var GF=function(e){return function(r){return e===r}},Cue=GF("scroll"),kue=GF("auto"),UR=function(e,r){return r(e.overflowX)||r(e.overflowY)},Nue=function(e){var r=window.getComputedStyle(e),i={overflowX:r.overflowX,overflowY:r.overflowY};return UR(i,Cue)||UR(i,kue)},Aue=function(){return!1},Rue=function t(e){return e==null?null:e===document.body?Aue()?e:null:e===document.documentElement?null:Nue(e)?e:t(e.parentElement)},QE=function(t){return{x:t.scrollLeft,y:t.scrollTop}},Pue=function t(e){if(!e)return!1;var r=window.getComputedStyle(e);return r.position==="fixed"?!0:t(e.parentElement)},Due=function(t){var e=Rue(t),r=Pue(t);return{closestScrollable:e,isFixedOnPage:r}},Mue=function(t){var e=t.descriptor,r=t.isEnabled,i=t.isCombineEnabled,s=t.isFixedOnPage,a=t.direction,o=t.client,l=t.page,u=t.closest,c=function(){if(!u)return null;var m=u.scrollSize,v=u.client,y=PF({scrollHeight:m.scrollHeight,scrollWidth:m.scrollWidth,height:v.paddingBox.height,width:v.paddingBox.width});return{pageMarginBox:u.page.marginBox,frameClient:v,scrollSize:m,shouldClipSubject:u.shouldClipSubject,scroll:{initial:u.scroll,current:u.scroll,max:y,diff:{value:Tn,displacement:Tn}}}}(),d=a==="vertical"?NT:hF,h=wu({page:l,withPlaceholder:null,axis:d,frame:c}),f={descriptor:e,isCombineEnabled:i,isFixedOnPage:s,axis:d,isEnabled:r,client:o,page:l,frame:c,subject:h};return f},Lue=function(e,r){var i=nF(e);if(!r||e!==r)return i;var s=i.paddingBox.top-r.scrollTop,a=i.paddingBox.left-r.scrollLeft,o=s+r.scrollHeight,l=a+r.scrollWidth,u={top:s,right:l,bottom:o,left:a},c=ST(u,i.border),d=TT({borderBox:c,margin:i.margin,border:i.border,padding:i.padding});return d},Oue=function(t){var e=t.ref,r=t.descriptor,i=t.env,s=t.windowScroll,a=t.direction,o=t.isDropDisabled,l=t.isCombineEnabled,u=t.shouldClipSubject,c=i.closestScrollable,d=Lue(e,c),h=Cm(d,s),f=function(){if(!c)return null;var v=nF(c),y={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:v,page:Cm(v,s),scroll:QE(c),scrollSize:y,shouldClipSubject:u}}(),m=Mue({descriptor:r,isEnabled:!o,isCombineEnabled:l,isFixedOnPage:i.isFixedOnPage,direction:a,client:d,page:h,closest:f});return m},jue={passive:!1},Vue={passive:!0},BR=function(t){return t.shouldPublishImmediately?jue:Vue};function Dm(t){var e=S.useContext(t);return e||we(),e}var Vf=function(e){return e&&e.env.closestScrollable||null};function Fue(t){var e=S.useRef(null),r=Dm(dv),i=zT("droppable"),s=r.registry,a=r.marshal,o=$F(t),l=ct(function(){return{id:t.droppableId,type:t.type,mode:t.mode}},[t.droppableId,t.mode,t.type]),u=S.useRef(l),c=ct(function(){return En(function(N,M){e.current||we();var O={x:N,y:M};a.updateDroppableScroll(l.id,O)})},[l.id,a]),d=Fe(function(){var N=e.current;return!N||!N.env.closestScrollable?Tn:QE(N.env.closestScrollable)},[]),h=Fe(function(){var N=d();c(N.x,N.y)},[d,c]),f=ct(function(){return Bd(h)},[h]),m=Fe(function(){var N=e.current,M=Vf(N);N&&M||we();var O=N.scrollOptions;if(O.shouldPublishImmediately){h();return}f()},[f,h]),v=Fe(function(N,M){e.current&&we();var O=o.current,A=O.getDroppableRef();A||we();var D=Due(A),T={ref:A,descriptor:l,env:D,scrollOptions:M};e.current=T;var I=Oue({ref:A,descriptor:l,env:D,windowScroll:N,direction:O.direction,isDropDisabled:O.isDropDisabled,isCombineEnabled:O.isCombineEnabled,shouldClipSubject:!O.ignoreContainerClipping}),x=D.closestScrollable;return x&&(x.setAttribute(jR.contextId,r.contextId),x.addEventListener("scroll",m,BR(T.scrollOptions))),I},[r.contextId,l,m,o]),y=Fe(function(){var N=e.current,M=Vf(N);return N&&M||we(),QE(M)},[]),b=Fe(function(){var N=e.current;N||we();var M=Vf(N);e.current=null,M&&(f.cancel(),M.removeAttribute(jR.contextId),M.removeEventListener("scroll",m,BR(N.scrollOptions)))},[m,f]),_=Fe(function(N){var M=e.current;M||we();var O=Vf(M);O||we(),O.scrollTop+=N.y,O.scrollLeft+=N.x},[]),w=ct(function(){return{getDimensionAndWatchScroll:v,getScrollWhileDragging:y,dragStopped:b,scroll:_}},[b,v,y,_]),E=ct(function(){return{uniqueId:i,descriptor:l,callbacks:w}},[w,l,i]);Rr(function(){return u.current=E.descriptor,s.droppable.register(E),function(){e.current&&b(),s.droppable.unregister(E)}},[w,l,b,E,a,s.droppable]),Rr(function(){e.current&&a.updateDroppableIsEnabled(u.current.id,!t.isDropDisabled)},[t.isDropDisabled,a]),Rr(function(){e.current&&a.updateDroppableIsCombineEnabled(u.current.id,t.isCombineEnabled)},[t.isCombineEnabled,a])}function d0(){}var zR={width:0,height:0,margin:lae},$ue=function(e){var r=e.isAnimatingOpenOnMount,i=e.placeholder,s=e.animate;return r||s==="close"?zR:{height:i.client.borderBox.height,width:i.client.borderBox.width,margin:i.client.margin}},Uue=function(e){var r=e.isAnimatingOpenOnMount,i=e.placeholder,s=e.animate,a=$ue({isAnimatingOpenOnMount:r,placeholder:i,animate:s});return{display:i.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:s!=="none"?dd.placeholder:null}};function Bue(t){var e=S.useRef(null),r=Fe(function(){e.current&&(clearTimeout(e.current),e.current=null)},[]),i=t.animate,s=t.onTransitionEnd,a=t.onClose,o=t.contextId,l=S.useState(t.animate==="open"),u=l[0],c=l[1];S.useEffect(function(){return u?i!=="open"?(r(),c(!1),d0):e.current?d0:(e.current=setTimeout(function(){e.current=null,c(!1)}),r):d0},[i,u,r]);var d=Fe(function(f){f.propertyName==="height"&&(s(),i==="close"&&a())},[i,a,s]),h=Uue({isAnimatingOpenOnMount:u,animate:t.animate,placeholder:t.placeholder});return te.createElement(t.placeholder.tagName,{style:h,"data-rbd-placeholder-context-id":o,onTransitionEnd:d,ref:t.innerRef})}var zue=te.memo(Bue),HT=te.createContext(null),que=function(t){LV(e,t);function e(){for(var i,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return i=t.call.apply(t,[this].concat(a))||this,i.state={isVisible:!!i.props.on,data:i.props.on,animate:i.props.shouldAnimate&&i.props.on?"open":"none"},i.onClose=function(){i.state.animate==="close"&&i.setState({isVisible:!1})},i}e.getDerivedStateFromProps=function(s,a){return s.shouldAnimate?s.on?{isVisible:!0,data:s.on,animate:"open"}:a.isVisible?{isVisible:!0,data:a.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!s.on,data:s.on,animate:"none"}};var r=e.prototype;return r.render=function(){if(!this.state.isVisible)return null;var s={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(s)},e}(te.PureComponent),qR={dragging:5e3,dropAnimating:4500},Hue=function(e,r){return r?dd.drop(r.duration):e?dd.snap:dd.fluid},Wue=function(e,r){return e?r?Wd.opacity.drop:Wd.opacity.combining:null},Gue=function(e){return e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP"};function Kue(t){var e=t.dimension,r=e.client,i=t.offset,s=t.combineWith,a=t.dropping,o=!!s,l=Gue(t),u=!!a,c=u?KE.drop(i,o):KE.moveTo(i),d={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Hue(l,a),transform:c,opacity:Wue(o,u),zIndex:u?qR.dropAnimating:qR.dragging,pointerEvents:"none"};return d}function Yue(t){return{transform:KE.moveTo(t.offset),transition:t.shouldAnimateDisplacement?null:"none"}}function Xue(t){return t.type==="DRAGGING"?Kue(t):Yue(t)}function Que(t,e,r){r===void 0&&(r=Tn);var i=window.getComputedStyle(e),s=e.getBoundingClientRect(),a=tF(s,i),o=Cm(a,r),l={client:a,tagName:e.tagName.toLowerCase(),display:i.display},u={x:a.marginBox.width,y:a.marginBox.height},c={descriptor:t,placeholder:l,displaceBy:u,client:a,page:o};return c}function Jue(t){var e=zT("draggable"),r=t.descriptor,i=t.registry,s=t.getDraggableRef,a=t.canDragInteractiveElements,o=t.shouldRespectForcePress,l=t.isEnabled,u=ct(function(){return{canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:l}},[a,l,o]),c=Fe(function(m){var v=s();return v||we(),Que(r,v,m)},[r,s]),d=ct(function(){return{uniqueId:e,descriptor:r,options:u,getDimension:c}},[r,c,u,e]),h=S.useRef(d),f=S.useRef(!0);Rr(function(){return i.draggable.register(h.current),function(){return i.draggable.unregister(h.current)}},[i.draggable]),Rr(function(){if(f.current){f.current=!1;return}var m=h.current;h.current=d,i.draggable.update(d,m)},[d,i.draggable])}function Zue(t){t.preventDefault()}function ece(t){var e=S.useRef(null),r=Fe(function(T){e.current=T},[]),i=Fe(function(){return e.current},[]),s=Dm(dv),a=s.contextId,o=s.dragHandleUsageInstructionsId,l=s.registry,u=Dm(HT),c=u.type,d=u.droppableId,h=ct(function(){return{id:t.draggableId,index:t.index,type:c,droppableId:d}},[t.draggableId,t.index,c,d]),f=t.children,m=t.draggableId,v=t.isEnabled,y=t.shouldRespectForcePress,b=t.canDragInteractiveElements,_=t.isClone,w=t.mapped,E=t.dropAnimationFinished;if(!_){var N=ct(function(){return{descriptor:h,registry:l,getDraggableRef:i,canDragInteractiveElements:b,shouldRespectForcePress:y,isEnabled:v}},[h,l,i,b,y,v]);Jue(N)}var M=ct(function(){return v?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":m,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:Zue}:null},[a,o,m,v]),O=Fe(function(T){w.type==="DRAGGING"&&w.dropping&&T.propertyName==="transform"&&E()},[E,w]),A=ct(function(){var T=Xue(w),I=w.type==="DRAGGING"&&w.dropping?O:null,x={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":m,style:T,onTransitionEnd:I},dragHandleProps:M};return x},[a,M,m,w,O,r]),D=ct(function(){return{draggableId:h.id,type:h.type,source:{index:h.index,droppableId:h.droppableId}}},[h.droppableId,h.id,h.index,h.type]);return f(A,w.snapshot,D)}var KF=function(t,e){return t===e},YF=function(t){var e=t.combine,r=t.destination;return r?r.droppableId:e?e.droppableId:null},tce=function(e){return e.combine?e.combine.draggableId:null},nce=function(e){return e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null};function rce(){var t=En(function(s,a){return{x:s,y:a}}),e=En(function(s,a,o,l,u){return{isDragging:!0,isClone:a,isDropAnimating:!!u,dropAnimation:u,mode:s,draggingOver:o,combineWith:l,combineTargetFor:null}}),r=En(function(s,a,o,l,u,c,d){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:u,combineWith:c,mode:a,offset:s,dimension:o,forceShouldAnimate:d,snapshot:e(a,l,u,c,null)}}}),i=function(a,o){if(a.isDragging){if(a.critical.draggable.id!==o.draggableId)return null;var l=a.current.client.offset,u=a.dimensions.draggables[o.draggableId],c=Ar(a.impact),d=nce(a.impact),h=a.forceShouldAnimate;return r(t(l.x,l.y),a.movementMode,u,o.isClone,c,d,h)}if(a.phase==="DROP_ANIMATING"){var f=a.completed;if(f.result.draggableId!==o.draggableId)return null;var m=o.isClone,v=a.dimensions.draggables[o.draggableId],y=f.result,b=y.mode,_=YF(y),w=tce(y),E=a.dropDuration,N={duration:E,curve:OT.drop,moveTo:a.newHomeClientOffset,opacity:w?Wd.opacity.drop:null,scale:w?Wd.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:v,dropping:N,draggingOver:_,combineWith:w,mode:b,forceShouldAnimate:null,snapshot:e(b,m,_,w,N)}}}return null};return i}function XF(t){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}var ice={mapped:{type:"SECONDARY",offset:Tn,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:XF(null)}};function sce(){var t=En(function(o,l){return{x:o,y:l}}),e=En(XF),r=En(function(o,l,u){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:u,snapshot:e(l)}}}),i=function(l){return l?r(Tn,l,!0):null},s=function(l,u,c,d){var h=c.displaced.visible[l],f=!!(d.inVirtualList&&d.effected[l]),m=ov(c),v=m&&m.draggableId===l?u:null;if(!h){if(!f)return i(v);if(c.displaced.invisible[l])return null;var y=qu(d.displacedBy.point),b=t(y.x,y.y);return r(b,v,!0)}if(f)return i(v);var _=c.displacedBy.point,w=t(_.x,_.y);return r(w,v,h.shouldAnimate)},a=function(l,u){if(l.isDragging)return l.critical.draggable.id===u.draggableId?null:s(u.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var c=l.completed;return c.result.draggableId===u.draggableId?null:s(u.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null};return a}var ace=function(){var e=rce(),r=sce(),i=function(a,o){return e(a,o)||r(a,o)||ice};return i},oce={dropAnimationFinished:NF},lce=ZV(ace,oce,null,{context:BT,pure:!0,areStatePropsEqual:KF})(ece);function QF(t){var e=Dm(HT),r=e.isUsingCloneFor;return r===t.draggableId&&!t.isClone?null:te.createElement(lce,t)}function uce(t){var e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,r=!!t.disableInteractiveElementBlocking,i=!!t.shouldRespectForcePress;return te.createElement(QF,Ue({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:r,shouldRespectForcePress:i}))}function cce(t){var e=S.useContext(dv);e||we();var r=e.contextId,i=e.isMovementAllowed,s=S.useRef(null),a=S.useRef(null),o=t.children,l=t.droppableId,u=t.type,c=t.mode,d=t.direction,h=t.ignoreContainerClipping,f=t.isDropDisabled,m=t.isCombineEnabled,v=t.snapshot,y=t.useClone,b=t.updateViewportMaxScroll,_=t.getContainerForClone,w=Fe(function(){return s.current},[]),E=Fe(function(x){s.current=x},[]);Fe(function(){return a.current},[]);var N=Fe(function(x){a.current=x},[]),M=Fe(function(){i()&&b({maxScroll:MF()})},[i,b]);Fue({droppableId:l,type:u,mode:c,direction:d,isDropDisabled:f,isCombineEnabled:m,ignoreContainerClipping:h,getDroppableRef:w});var O=te.createElement(que,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},function(x){var R=x.onClose,P=x.data,j=x.animate;return te.createElement(zue,{placeholder:P,onClose:R,innerRef:N,animate:j,contextId:r,onTransitionEnd:M})}),A=ct(function(){return{innerRef:E,placeholder:O,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":r}}},[r,l,O,E]),D=y?y.dragging.draggableId:null,T=ct(function(){return{droppableId:l,type:u,isUsingCloneFor:D}},[l,D,u]);function I(){if(!y)return null;var x=y.dragging,R=y.render,P=te.createElement(QF,{draggableId:x.draggableId,index:x.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(j,$){return R(j,$,x)});return Y7.createPortal(P,_())}return te.createElement(HT.Provider,{value:T},o(A,v),I())}var h0=function(e,r){return e===r.droppable.type},HR=function(e,r){return r.draggables[e.draggable.id]},dce=function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=Ue({},e,{shouldAnimatePlaceholder:!1}),i=En(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),s=En(function(o,l,u,c,d,h){var f=d.descriptor.id,m=d.descriptor.droppableId===o;if(m){var v=h?{render:h,dragging:i(d.descriptor)}:null,y={isDraggingOver:u,draggingOverWith:u?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:y,useClone:v}}if(!l)return r;if(!c)return e;var b={isDraggingOver:u,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:b,useClone:null}}),a=function(l,u){var c=u.droppableId,d=u.type,h=!u.isDropDisabled,f=u.renderClone;if(l.isDragging){var m=l.critical;if(!h0(d,m))return r;var v=HR(m,l.dimensions),y=Ar(l.impact)===c;return s(c,h,y,y,v,f)}if(l.phase==="DROP_ANIMATING"){var b=l.completed;if(!h0(d,b.critical))return r;var _=HR(b.critical,l.dimensions);return s(c,h,YF(b.result)===c,Ar(b.impact)===c,_,f)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var w=l.completed;if(!h0(d,w.critical))return r;var E=Ar(w.impact)===c,N=!!(w.impact.at&&w.impact.at.type==="COMBINE"),M=w.critical.droppable.id===c;return E?N?e:r:M?e:r}return r};return a},hce={updateViewportMaxScroll:woe};function fce(){return document.body||we(),document.body}var pce={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:fce},JF=ZV(dce,hce,null,{context:BT,pure:!0,areStatePropsEqual:KF})(cce);JF.defaultProps=pce;function mce(){const[t]=fg(),[e,r]=S.useState([]),[i,s]=S.useState(0),[a,o]=S.useState(!0),[l,u]=S.useState(null),[c,d]=S.useState(!1),[h,f]=S.useState(!1),[m,v]=S.useState("");S.useRef(null),S.useRef(null),S.useEffect(()=>{const N=t.get("keywords");N&&searchAndBuildPlaylist(N)},[t]);const y=N=>{const M=N==null?void 0:N.match(/embed\/([a-zA-Z0-9_-]+)/);return M?M[1]:null},b=N=>{if(!N.destination)return;const M=Array.from(e),[O]=M.splice(N.source.index,1);M.splice(N.destination.index,0,O);const A=M.map((D,T)=>({...D,playlistOrder:T}));r(A),_(A)},_=async N=>{try{const M=t.get("keywords"),O=Is(It,"keywordPlaylists",M);await _m(O,{items:N.map(A=>({documentName:A.documentName,playlistOrder:A.playlistOrder}))})}catch(M){console.error("Error saving playlist order:",M)}},w=()=>{f(!0),v(document.getElementById("overallSummaryContent").innerText)},E=async()=>{try{const N=t.get("keywords"),M=Is(It,"keywordSummaries",N);await _m(M,{summary:m}),document.getElementById("overallSummaryContent").innerText=m,f(!1)}catch(N){console.error("Error saving description:",N)}};return p.jsx("div",{className:"container mx-auto px-4 py-8",children:p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[p.jsx("div",{className:"lg:col-span-1",children:p.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Playlist Info"}),p.jsxs("p",{id:"totalDuration",children:["Total Duration: ",formatTime(getTotalPlaylistDuration(e))]})]}),p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("h3",{className:"text-xl font-semibold",children:"Playlist Summary"}),p.jsx("button",{onClick:w,className:"text-blue-500 hover:text-blue-700",children:"✏️ Edit"})]}),h?p.jsxs("div",{className:"space-y-2",children:[p.jsx("textarea",{value:m,onChange:N=>v(N.target.value),className:"w-full h-40 p-2 border rounded"}),p.jsxs("div",{className:"flex justify-end space-x-2",children:[p.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),p.jsx("button",{onClick:E,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"})]})]}):p.jsx("p",{id:"overallSummaryContent",className:"text-gray-700"})]})]})}),p.jsx("div",{className:"lg:col-span-2",children:p.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:currentVideo&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("h2",{className:"text-2xl font-bold",children:currentVideo.name}),p.jsx("p",{className:"text-gray-600",children:currentVideo.role})]}),p.jsx("div",{id:"player",className:"w-full aspect-video mb-4"}),p.jsx(Iue,{onDragEnd:b,children:p.jsx(JF,{droppableId:"timeline",direction:"horizontal",children:N=>p.jsx("div",{ref:N.innerRef,...N.droppableProps,className:"relative h-20 bg-gray-100 rounded mb-4",children:p.jsxs("div",{className:"absolute inset-0 flex",children:[e.map((M,O)=>p.jsx(uce,{draggableId:`${M.documentName}-${O}`,index:O,children:(A,D)=>p.jsx("div",{ref:A.innerRef,...A.draggableProps,...A.dragHandleProps,className:`relative h-full cursor-move transition-colors
                                    ${O===i?"bg-blue-500":"bg-gray-300"}
                                    ${D.isDragging?"ring-2 ring-blue-400":""}`,style:{...A.draggableProps.style,width:`${ZF(M)/gce(e)*100}%`},children:p.jsx("img",{src:`https://img.youtube.com/vi/${y(M.videoEmbedLink)}/default.jpg`,alt:"Thumbnail",className:"absolute inset-0 w-full h-full object-cover opacity-50"})})},`${M.documentName}-${O}`)),N.placeholder]})})})}),p.jsxs("div",{className:"flex justify-center space-x-4",children:[p.jsx("button",{onClick:handleSkipPrevious,disabled:i===0,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:p.jsx("span",{className:"material-icons",children:"skip_previous"})}),p.jsx("button",{onClick:handlePlayPause,className:"p-2 rounded-full bg-blue-500 hover:bg-blue-600 text-white",children:p.jsx("span",{id:"playPauseIcon",className:"material-icons",children:"pause"})}),p.jsx("button",{onClick:handleSkipNext,disabled:i===e.length-1,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:p.jsx("span",{className:"material-icons",children:"skip_next"})})]}),p.jsxs("div",{className:"mt-6",children:[p.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Summary"}),p.jsx("p",{className:"text-gray-700",children:currentVideo.summary})]})]})})})]})})}function ZF(t){const e=convertTimestampToSeconds(extractStartTimestamp(t.timestamp));return convertTimestampToSeconds(extractStartTimestamp(t.timestamp.split(" - ")[1]))-e}function gce(t){return t.reduce((e,r)=>e+ZF(r),0)}function On(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let r=0,i;r<t.length;r++)(i=On(t[r]))!==""&&(e+=(e&&" ")+i);else for(let r in t)t[r]&&(e+=(e&&" ")+r);return e}var e9={exports:{}},t9={},n9={exports:{}},r9={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eu=S;function vce(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yce=typeof Object.is=="function"?Object.is:vce,_ce=Eu.useState,wce=Eu.useEffect,bce=Eu.useLayoutEffect,xce=Eu.useDebugValue;function Ece(t,e){var r=e(),i=_ce({inst:{value:r,getSnapshot:e}}),s=i[0].inst,a=i[1];return bce(function(){s.value=r,s.getSnapshot=e,f0(s)&&a({inst:s})},[t,r,e]),wce(function(){return f0(s)&&a({inst:s}),t(function(){f0(s)&&a({inst:s})})},[t]),xce(r),r}function f0(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!yce(t,r)}catch{return!0}}function Sce(t,e){return e()}var Tce=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Sce:Ece;r9.useSyncExternalStore=Eu.useSyncExternalStore!==void 0?Eu.useSyncExternalStore:Tce;n9.exports=r9;var Ice=n9.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fv=S,Cce=Ice;function kce(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nce=typeof Object.is=="function"?Object.is:kce,Ace=Cce.useSyncExternalStore,Rce=fv.useRef,Pce=fv.useEffect,Dce=fv.useMemo,Mce=fv.useDebugValue;t9.useSyncExternalStoreWithSelector=function(t,e,r,i,s){var a=Rce(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=Dce(function(){function u(m){if(!c){if(c=!0,d=m,m=i(m),s!==void 0&&o.hasValue){var v=o.value;if(s(v,m))return h=v}return h=m}if(v=h,Nce(d,m))return v;var y=i(m);return s!==void 0&&s(v,y)?(d=m,v):(d=m,h=y)}var c=!1,d,h,f=r===void 0?null:r;return[function(){return u(e())},f===null?void 0:function(){return u(f())}]},[e,r,i,s]);var l=Ace(t,a[0],a[1]);return Pce(function(){o.hasValue=!0,o.value=l},[l]),Mce(l),l};e9.exports=t9;var Lce=e9.exports;const Oce=Ua(Lce),jce={},WR=t=>{let e;const r=new Set,i=(d,h)=>{const f=typeof d=="function"?d(e):d;if(!Object.is(f,e)){const m=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),r.forEach(v=>v(e,m))}},s=()=>e,u={setState:i,getState:s,getInitialState:()=>c,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(jce?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},c=e=t(i,s,u);return u},Vce=t=>t?WR(t):WR,{useDebugValue:Fce}=te,{useSyncExternalStoreWithSelector:$ce}=Oce,Uce=t=>t;function i9(t,e=Uce,r){const i=$ce(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return Fce(i),i}const GR=(t,e)=>{const r=Vce(t),i=(s,a=e)=>i9(r,s,a);return Object.assign(i,r),i},Bce=(t,e)=>t?GR(t,e):GR;function In(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[i,s]of t)if(!Object.is(s,e.get(i)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!1;for(const i of r)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(t[i],e[i]))return!1;return!0}var zce={value:()=>{}};function pv(){for(var t=0,e=arguments.length,r={},i;t<e;++t){if(!(i=arguments[t]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new Sp(r)}function Sp(t){this._=t}function qce(t,e){return t.trim().split(/^|\s+/).map(function(r){var i="",s=r.indexOf(".");if(s>=0&&(i=r.slice(s+1),r=r.slice(0,s)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}Sp.prototype=pv.prototype={constructor:Sp,on:function(t,e){var r=this._,i=qce(t+"",r),s,a=-1,o=i.length;if(arguments.length<2){for(;++a<o;)if((s=(t=i[a]).type)&&(s=Hce(r[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(s=(t=i[a]).type)r[s]=KR(r[s],t.name,e);else if(e==null)for(s in r)r[s]=KR(r[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Sp(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var r=new Array(s),i=0,s,a;i<s;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],i=0,s=a.length;i<s;++i)a[i].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],s=0,a=i.length;s<a;++s)i[s].value.apply(e,r)}};function Hce(t,e){for(var r=0,i=t.length,s;r<i;++r)if((s=t[r]).name===e)return s.value}function KR(t,e,r){for(var i=0,s=t.length;i<s;++i)if(t[i].name===e){t[i]=zce,t=t.slice(0,i).concat(t.slice(i+1));break}return r!=null&&t.push({name:e,value:r}),t}var JE="http://www.w3.org/1999/xhtml";const YR={svg:"http://www.w3.org/2000/svg",xhtml:JE,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function mv(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),YR.hasOwnProperty(e)?{space:YR[e],local:t}:t}function Wce(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===JE&&e.documentElement.namespaceURI===JE?e.createElement(t):e.createElementNS(r,t)}}function Gce(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function s9(t){var e=mv(t);return(e.local?Gce:Wce)(e)}function Kce(){}function WT(t){return t==null?Kce:function(){return this.querySelector(t)}}function Yce(t){typeof t!="function"&&(t=WT(t));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var a=e[s],o=a.length,l=i[s]=new Array(o),u,c,d=0;d<o;++d)(u=a[d])&&(c=t.call(u,u.__data__,d,a))&&("__data__"in u&&(c.__data__=u.__data__),l[d]=c);return new Mr(i,this._parents)}function Xce(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Qce(){return[]}function a9(t){return t==null?Qce:function(){return this.querySelectorAll(t)}}function Jce(t){return function(){return Xce(t.apply(this,arguments))}}function Zce(t){typeof t=="function"?t=Jce(t):t=a9(t);for(var e=this._groups,r=e.length,i=[],s=[],a=0;a<r;++a)for(var o=e[a],l=o.length,u,c=0;c<l;++c)(u=o[c])&&(i.push(t.call(u,u.__data__,c,o)),s.push(u));return new Mr(i,s)}function o9(t){return function(){return this.matches(t)}}function l9(t){return function(e){return e.matches(t)}}var ede=Array.prototype.find;function tde(t){return function(){return ede.call(this.children,t)}}function nde(){return this.firstElementChild}function rde(t){return this.select(t==null?nde:tde(typeof t=="function"?t:l9(t)))}var ide=Array.prototype.filter;function sde(){return Array.from(this.children)}function ade(t){return function(){return ide.call(this.children,t)}}function ode(t){return this.selectAll(t==null?sde:ade(typeof t=="function"?t:l9(t)))}function lde(t){typeof t!="function"&&(t=o9(t));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var a=e[s],o=a.length,l=i[s]=[],u,c=0;c<o;++c)(u=a[c])&&t.call(u,u.__data__,c,a)&&l.push(u);return new Mr(i,this._parents)}function u9(t){return new Array(t.length)}function ude(){return new Mr(this._enter||this._groups.map(u9),this._parents)}function Mm(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Mm.prototype={constructor:Mm,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function cde(t){return function(){return t}}function dde(t,e,r,i,s,a){for(var o=0,l,u=e.length,c=a.length;o<c;++o)(l=e[o])?(l.__data__=a[o],i[o]=l):r[o]=new Mm(t,a[o]);for(;o<u;++o)(l=e[o])&&(s[o]=l)}function hde(t,e,r,i,s,a,o){var l,u,c=new Map,d=e.length,h=a.length,f=new Array(d),m;for(l=0;l<d;++l)(u=e[l])&&(f[l]=m=o.call(u,u.__data__,l,e)+"",c.has(m)?s[l]=u:c.set(m,u));for(l=0;l<h;++l)m=o.call(t,a[l],l,a)+"",(u=c.get(m))?(i[l]=u,u.__data__=a[l],c.delete(m)):r[l]=new Mm(t,a[l]);for(l=0;l<d;++l)(u=e[l])&&c.get(f[l])===u&&(s[l]=u)}function fde(t){return t.__data__}function pde(t,e){if(!arguments.length)return Array.from(this,fde);var r=e?hde:dde,i=this._parents,s=this._groups;typeof t!="function"&&(t=cde(t));for(var a=s.length,o=new Array(a),l=new Array(a),u=new Array(a),c=0;c<a;++c){var d=i[c],h=s[c],f=h.length,m=mde(t.call(d,d&&d.__data__,c,i)),v=m.length,y=l[c]=new Array(v),b=o[c]=new Array(v),_=u[c]=new Array(f);r(d,h,y,b,_,m,e);for(var w=0,E=0,N,M;w<v;++w)if(N=y[w]){for(w>=E&&(E=w+1);!(M=b[E])&&++E<v;);N._next=M||null}}return o=new Mr(o,i),o._enter=l,o._exit=u,o}function mde(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function gde(){return new Mr(this._exit||this._groups.map(u9),this._parents)}function vde(t,e,r){var i=this.enter(),s=this,a=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),r==null?a.remove():r(a),i&&s?i.merge(s).order():s}function yde(t){for(var e=t.selection?t.selection():t,r=this._groups,i=e._groups,s=r.length,a=i.length,o=Math.min(s,a),l=new Array(s),u=0;u<o;++u)for(var c=r[u],d=i[u],h=c.length,f=l[u]=new Array(h),m,v=0;v<h;++v)(m=c[v]||d[v])&&(f[v]=m);for(;u<s;++u)l[u]=r[u];return new Mr(l,this._parents)}function _de(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var i=t[e],s=i.length-1,a=i[s],o;--s>=0;)(o=i[s])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function wde(t){t||(t=bde);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),c,d=0;d<l;++d)(c=o[d])&&(u[d]=c);u.sort(e)}return new Mr(s,this._parents).order()}function bde(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function xde(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ede(){return Array.from(this)}function Sde(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i=t[e],s=0,a=i.length;s<a;++s){var o=i[s];if(o)return o}return null}function Tde(){let t=0;for(const e of this)++t;return t}function Ide(){return!this.node()}function Cde(t){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var s=e[r],a=0,o=s.length,l;a<o;++a)(l=s[a])&&t.call(l,l.__data__,a,s);return this}function kde(t){return function(){this.removeAttribute(t)}}function Nde(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ade(t,e){return function(){this.setAttribute(t,e)}}function Rde(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Pde(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function Dde(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function Mde(t,e){var r=mv(t);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((e==null?r.local?Nde:kde:typeof e=="function"?r.local?Dde:Pde:r.local?Rde:Ade)(r,e))}function c9(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Lde(t){return function(){this.style.removeProperty(t)}}function Ode(t,e,r){return function(){this.style.setProperty(t,e,r)}}function jde(t,e,r){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,r)}}function Vde(t,e,r){return arguments.length>1?this.each((e==null?Lde:typeof e=="function"?jde:Ode)(t,e,r??"")):Su(this.node(),t)}function Su(t,e){return t.style.getPropertyValue(e)||c9(t).getComputedStyle(t,null).getPropertyValue(e)}function Fde(t){return function(){delete this[t]}}function $de(t,e){return function(){this[t]=e}}function Ude(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function Bde(t,e){return arguments.length>1?this.each((e==null?Fde:typeof e=="function"?Ude:$de)(t,e)):this.node()[t]}function d9(t){return t.trim().split(/^|\s+/)}function GT(t){return t.classList||new h9(t)}function h9(t){this._node=t,this._names=d9(t.getAttribute("class")||"")}h9.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function f9(t,e){for(var r=GT(t),i=-1,s=e.length;++i<s;)r.add(e[i])}function p9(t,e){for(var r=GT(t),i=-1,s=e.length;++i<s;)r.remove(e[i])}function zde(t){return function(){f9(this,t)}}function qde(t){return function(){p9(this,t)}}function Hde(t,e){return function(){(e.apply(this,arguments)?f9:p9)(this,t)}}function Wde(t,e){var r=d9(t+"");if(arguments.length<2){for(var i=GT(this.node()),s=-1,a=r.length;++s<a;)if(!i.contains(r[s]))return!1;return!0}return this.each((typeof e=="function"?Hde:e?zde:qde)(r,e))}function Gde(){this.textContent=""}function Kde(t){return function(){this.textContent=t}}function Yde(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Xde(t){return arguments.length?this.each(t==null?Gde:(typeof t=="function"?Yde:Kde)(t)):this.node().textContent}function Qde(){this.innerHTML=""}function Jde(t){return function(){this.innerHTML=t}}function Zde(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function ehe(t){return arguments.length?this.each(t==null?Qde:(typeof t=="function"?Zde:Jde)(t)):this.node().innerHTML}function the(){this.nextSibling&&this.parentNode.appendChild(this)}function nhe(){return this.each(the)}function rhe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ihe(){return this.each(rhe)}function she(t){var e=typeof t=="function"?t:s9(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function ahe(){return null}function ohe(t,e){var r=typeof t=="function"?t:s9(t),i=e==null?ahe:typeof e=="function"?e:WT(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function lhe(){var t=this.parentNode;t&&t.removeChild(this)}function uhe(){return this.each(lhe)}function che(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function dhe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function hhe(t){return this.select(t?dhe:che)}function fhe(t){return arguments.length?this.property("__data__",t):this.node().__data__}function phe(t){return function(e){t.call(this,e,this.__data__)}}function mhe(t){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{type:e,name:r}})}function ghe(t){return function(){var e=this.__on;if(e){for(var r=0,i=-1,s=e.length,a;r<s;++r)a=e[r],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++i]=a;++i?e.length=i:delete this.__on}}}function vhe(t,e,r){return function(){var i=this.__on,s,a=phe(e);if(i){for(var o=0,l=i.length;o<l;++o)if((s=i[o]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=r),s.value=e;return}}this.addEventListener(t.type,a,r),s={type:t.type,name:t.name,value:e,listener:a,options:r},i?i.push(s):this.__on=[s]}}function yhe(t,e,r){var i=mhe(t+""),s,a=i.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,c=l.length,d;u<c;++u)for(s=0,d=l[u];s<a;++s)if((o=i[s]).type===d.type&&o.name===d.name)return d.value}return}for(l=e?vhe:ghe,s=0;s<a;++s)this.each(l(i[s],e,r));return this}function m9(t,e,r){var i=c9(t),s=i.CustomEvent;typeof s=="function"?s=new s(e,r):(s=i.document.createEvent("Event"),r?(s.initEvent(e,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function _he(t,e){return function(){return m9(this,t,e)}}function whe(t,e){return function(){return m9(this,t,e.apply(this,arguments))}}function bhe(t,e){return this.each((typeof e=="function"?whe:_he)(t,e))}function*xhe(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i=t[e],s=0,a=i.length,o;s<a;++s)(o=i[s])&&(yield o)}var g9=[null];function Mr(t,e){this._groups=t,this._parents=e}function Oh(){return new Mr([[document.documentElement]],g9)}function Ehe(){return this}Mr.prototype=Oh.prototype={constructor:Mr,select:Yce,selectAll:Zce,selectChild:rde,selectChildren:ode,filter:lde,data:pde,enter:ude,exit:gde,join:vde,merge:yde,selection:Ehe,order:_de,sort:wde,call:xde,nodes:Ede,node:Sde,size:Tde,empty:Ide,each:Cde,attr:Mde,style:Vde,property:Bde,classed:Wde,text:Xde,html:ehe,raise:nhe,lower:ihe,append:she,insert:ohe,remove:uhe,clone:hhe,datum:fhe,on:yhe,dispatch:bhe,[Symbol.iterator]:xhe};function qr(t){return typeof t=="string"?new Mr([[document.querySelector(t)]],[document.documentElement]):new Mr([[t]],g9)}function She(t){let e;for(;e=t.sourceEvent;)t=e;return t}function ui(t,e){if(t=She(t),e===void 0&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const The={passive:!1},Gd={capture:!0,passive:!1};function p0(t){t.stopImmediatePropagation()}function Xl(t){t.preventDefault(),t.stopImmediatePropagation()}function v9(t){var e=t.document.documentElement,r=qr(t).on("dragstart.drag",Xl,Gd);"onselectstart"in e?r.on("selectstart.drag",Xl,Gd):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function y9(t,e){var r=t.document.documentElement,i=qr(t).on("dragstart.drag",null);e&&(i.on("click.drag",Xl,Gd),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Ff=t=>()=>t;function ZE(t,{sourceEvent:e,subject:r,target:i,identifier:s,active:a,x:o,y:l,dx:u,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}ZE.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Ihe(t){return!t.ctrlKey&&!t.button}function Che(){return this.parentNode}function khe(t,e){return e??{x:t.x,y:t.y}}function Nhe(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ahe(){var t=Ihe,e=Che,r=khe,i=Nhe,s={},a=pv("start","drag","end"),o=0,l,u,c,d,h=0;function f(N){N.on("mousedown.drag",m).filter(i).on("touchstart.drag",b).on("touchmove.drag",_,The).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(N,M){if(!(d||!t.call(this,N,M))){var O=E(this,e.call(this,N,M),N,M,"mouse");O&&(qr(N.view).on("mousemove.drag",v,Gd).on("mouseup.drag",y,Gd),v9(N.view),p0(N),c=!1,l=N.clientX,u=N.clientY,O("start",N))}}function v(N){if(Xl(N),!c){var M=N.clientX-l,O=N.clientY-u;c=M*M+O*O>h}s.mouse("drag",N)}function y(N){qr(N.view).on("mousemove.drag mouseup.drag",null),y9(N.view,c),Xl(N),s.mouse("end",N)}function b(N,M){if(t.call(this,N,M)){var O=N.changedTouches,A=e.call(this,N,M),D=O.length,T,I;for(T=0;T<D;++T)(I=E(this,A,N,M,O[T].identifier,O[T]))&&(p0(N),I("start",N,O[T]))}}function _(N){var M=N.changedTouches,O=M.length,A,D;for(A=0;A<O;++A)(D=s[M[A].identifier])&&(Xl(N),D("drag",N,M[A]))}function w(N){var M=N.changedTouches,O=M.length,A,D;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),A=0;A<O;++A)(D=s[M[A].identifier])&&(p0(N),D("end",N,M[A]))}function E(N,M,O,A,D,T){var I=a.copy(),x=ui(T||O,M),R,P,j;if((j=r.call(N,new ZE("beforestart",{sourceEvent:O,target:f,identifier:D,active:o,x:x[0],y:x[1],dx:0,dy:0,dispatch:I}),A))!=null)return R=j.x-x[0]||0,P=j.y-x[1]||0,function $(U,Y,q){var F=x,W;switch(U){case"start":s[D]=$,W=o++;break;case"end":delete s[D],--o;case"drag":x=ui(q||Y,M),W=o;break}I.call(U,N,new ZE(U,{sourceEvent:Y,subject:j,target:f,identifier:D,active:W,x:x[0]+R,y:x[1]+P,dx:x[0]-F[0],dy:x[1]-F[1],dispatch:I}),A)}}return f.filter=function(N){return arguments.length?(t=typeof N=="function"?N:Ff(!!N),f):t},f.container=function(N){return arguments.length?(e=typeof N=="function"?N:Ff(N),f):e},f.subject=function(N){return arguments.length?(r=typeof N=="function"?N:Ff(N),f):r},f.touchable=function(N){return arguments.length?(i=typeof N=="function"?N:Ff(!!N),f):i},f.on=function(){var N=a.on.apply(a,arguments);return N===a?f:N},f.clickDistance=function(N){return arguments.length?(h=(N=+N)*N,f):Math.sqrt(h)},f}function KT(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function _9(t,e){var r=Object.create(t.prototype);for(var i in e)r[i]=e[i];return r}function jh(){}var Kd=.7,Lm=1/Kd,Ql="\\s*([+-]?\\d+)\\s*",Yd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ui="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Rhe=/^#([0-9a-f]{3,8})$/,Phe=new RegExp(`^rgb\\(${Ql},${Ql},${Ql}\\)$`),Dhe=new RegExp(`^rgb\\(${Ui},${Ui},${Ui}\\)$`),Mhe=new RegExp(`^rgba\\(${Ql},${Ql},${Ql},${Yd}\\)$`),Lhe=new RegExp(`^rgba\\(${Ui},${Ui},${Ui},${Yd}\\)$`),Ohe=new RegExp(`^hsl\\(${Yd},${Ui},${Ui}\\)$`),jhe=new RegExp(`^hsla\\(${Yd},${Ui},${Ui},${Yd}\\)$`),XR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};KT(jh,Xd,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:QR,formatHex:QR,formatHex8:Vhe,formatHsl:Fhe,formatRgb:JR,toString:JR});function QR(){return this.rgb().formatHex()}function Vhe(){return this.rgb().formatHex8()}function Fhe(){return w9(this).formatHsl()}function JR(){return this.rgb().formatRgb()}function Xd(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Rhe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?ZR(e):r===3?new fr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?$f(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?$f(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Phe.exec(t))?new fr(e[1],e[2],e[3],1):(e=Dhe.exec(t))?new fr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Mhe.exec(t))?$f(e[1],e[2],e[3],e[4]):(e=Lhe.exec(t))?$f(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ohe.exec(t))?nP(e[1],e[2]/100,e[3]/100,1):(e=jhe.exec(t))?nP(e[1],e[2]/100,e[3]/100,e[4]):XR.hasOwnProperty(t)?ZR(XR[t]):t==="transparent"?new fr(NaN,NaN,NaN,0):null}function ZR(t){return new fr(t>>16&255,t>>8&255,t&255,1)}function $f(t,e,r,i){return i<=0&&(t=e=r=NaN),new fr(t,e,r,i)}function $he(t){return t instanceof jh||(t=Xd(t)),t?(t=t.rgb(),new fr(t.r,t.g,t.b,t.opacity)):new fr}function e2(t,e,r,i){return arguments.length===1?$he(t):new fr(t,e,r,i??1)}function fr(t,e,r,i){this.r=+t,this.g=+e,this.b=+r,this.opacity=+i}KT(fr,e2,_9(jh,{brighter(t){return t=t==null?Lm:Math.pow(Lm,t),new fr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Kd:Math.pow(Kd,t),new fr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new fr(xo(this.r),xo(this.g),xo(this.b),Om(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:eP,formatHex:eP,formatHex8:Uhe,formatRgb:tP,toString:tP}));function eP(){return`#${vo(this.r)}${vo(this.g)}${vo(this.b)}`}function Uhe(){return`#${vo(this.r)}${vo(this.g)}${vo(this.b)}${vo((isNaN(this.opacity)?1:this.opacity)*255)}`}function tP(){const t=Om(this.opacity);return`${t===1?"rgb(":"rgba("}${xo(this.r)}, ${xo(this.g)}, ${xo(this.b)}${t===1?")":`, ${t})`}`}function Om(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function xo(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function vo(t){return t=xo(t),(t<16?"0":"")+t.toString(16)}function nP(t,e,r,i){return i<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new hi(t,e,r,i)}function w9(t){if(t instanceof hi)return new hi(t.h,t.s,t.l,t.opacity);if(t instanceof jh||(t=Xd(t)),!t)return new hi;if(t instanceof hi)return t;t=t.rgb();var e=t.r/255,r=t.g/255,i=t.b/255,s=Math.min(e,r,i),a=Math.max(e,r,i),o=NaN,l=a-s,u=(a+s)/2;return l?(e===a?o=(r-i)/l+(r<i)*6:r===a?o=(i-e)/l+2:o=(e-r)/l+4,l/=u<.5?a+s:2-a-s,o*=60):l=u>0&&u<1?0:o,new hi(o,l,u,t.opacity)}function Bhe(t,e,r,i){return arguments.length===1?w9(t):new hi(t,e,r,i??1)}function hi(t,e,r,i){this.h=+t,this.s=+e,this.l=+r,this.opacity=+i}KT(hi,Bhe,_9(jh,{brighter(t){return t=t==null?Lm:Math.pow(Lm,t),new hi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Kd:Math.pow(Kd,t),new hi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*e,s=2*r-i;return new fr(m0(t>=240?t-240:t+120,s,i),m0(t,s,i),m0(t<120?t+240:t-120,s,i),this.opacity)},clamp(){return new hi(rP(this.h),Uf(this.s),Uf(this.l),Om(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Om(this.opacity);return`${t===1?"hsl(":"hsla("}${rP(this.h)}, ${Uf(this.s)*100}%, ${Uf(this.l)*100}%${t===1?")":`, ${t})`}`}}));function rP(t){return t=(t||0)%360,t<0?t+360:t}function Uf(t){return Math.max(0,Math.min(1,t||0))}function m0(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const b9=t=>()=>t;function zhe(t,e){return function(r){return t+r*e}}function qhe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(i){return Math.pow(t+i*e,r)}}function Hhe(t){return(t=+t)==1?x9:function(e,r){return r-e?qhe(e,r,t):b9(isNaN(e)?r:e)}}function x9(t,e){var r=e-t;return r?zhe(t,r):b9(isNaN(t)?e:t)}const iP=function t(e){var r=Hhe(e);function i(s,a){var o=r((s=e2(s)).r,(a=e2(a)).r),l=r(s.g,a.g),u=r(s.b,a.b),c=x9(s.opacity,a.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=u(d),s.opacity=c(d),s+""}}return i.gamma=t,i}(1);function Js(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var t2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,g0=new RegExp(t2.source,"g");function Whe(t){return function(){return t}}function Ghe(t){return function(e){return t(e)+""}}function Khe(t,e){var r=t2.lastIndex=g0.lastIndex=0,i,s,a,o=-1,l=[],u=[];for(t=t+"",e=e+"";(i=t2.exec(t))&&(s=g0.exec(e));)(a=s.index)>r&&(a=e.slice(r,a),l[o]?l[o]+=a:l[++o]=a),(i=i[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,u.push({i:o,x:Js(i,s)})),r=g0.lastIndex;return r<e.length&&(a=e.slice(r),l[o]?l[o]+=a:l[++o]=a),l.length<2?u[0]?Ghe(u[0].x):Whe(e):(e=u.length,function(c){for(var d=0,h;d<e;++d)l[(h=u[d]).i]=h.x(c);return l.join("")})}var sP=180/Math.PI,n2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function E9(t,e,r,i,s,a){var o,l,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*r+e*i)&&(r-=t*u,i-=e*u),(l=Math.sqrt(r*r+i*i))&&(r/=l,i/=l,u/=l),t*i<e*r&&(t=-t,e=-e,u=-u,o=-o),{translateX:s,translateY:a,rotate:Math.atan2(e,t)*sP,skewX:Math.atan(u)*sP,scaleX:o,scaleY:l}}var Bf;function Yhe(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?n2:E9(e.a,e.b,e.c,e.d,e.e,e.f)}function Xhe(t){return t==null||(Bf||(Bf=document.createElementNS("http://www.w3.org/2000/svg","g")),Bf.setAttribute("transform",t),!(t=Bf.transform.baseVal.consolidate()))?n2:(t=t.matrix,E9(t.a,t.b,t.c,t.d,t.e,t.f))}function S9(t,e,r,i){function s(c){return c.length?c.pop()+" ":""}function a(c,d,h,f,m,v){if(c!==h||d!==f){var y=m.push("translate(",null,e,null,r);v.push({i:y-4,x:Js(c,h)},{i:y-2,x:Js(d,f)})}else(h||f)&&m.push("translate("+h+e+f+r)}function o(c,d,h,f){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),f.push({i:h.push(s(h)+"rotate(",null,i)-2,x:Js(c,d)})):d&&h.push(s(h)+"rotate("+d+i)}function l(c,d,h,f){c!==d?f.push({i:h.push(s(h)+"skewX(",null,i)-2,x:Js(c,d)}):d&&h.push(s(h)+"skewX("+d+i)}function u(c,d,h,f,m,v){if(c!==h||d!==f){var y=m.push(s(m)+"scale(",null,",",null,")");v.push({i:y-4,x:Js(c,h)},{i:y-2,x:Js(d,f)})}else(h!==1||f!==1)&&m.push(s(m)+"scale("+h+","+f+")")}return function(c,d){var h=[],f=[];return c=t(c),d=t(d),a(c.translateX,c.translateY,d.translateX,d.translateY,h,f),o(c.rotate,d.rotate,h,f),l(c.skewX,d.skewX,h,f),u(c.scaleX,c.scaleY,d.scaleX,d.scaleY,h,f),c=d=null,function(m){for(var v=-1,y=f.length,b;++v<y;)h[(b=f[v]).i]=b.x(m);return h.join("")}}}var Qhe=S9(Yhe,"px, ","px)","deg)"),Jhe=S9(Xhe,", ",")",")"),Zhe=1e-12;function aP(t){return((t=Math.exp(t))+1/t)/2}function efe(t){return((t=Math.exp(t))-1/t)/2}function tfe(t){return((t=Math.exp(2*t))-1)/(t+1)}const nfe=function t(e,r,i){function s(a,o){var l=a[0],u=a[1],c=a[2],d=o[0],h=o[1],f=o[2],m=d-l,v=h-u,y=m*m+v*v,b,_;if(y<Zhe)_=Math.log(f/c)/e,b=function(A){return[l+A*m,u+A*v,c*Math.exp(e*A*_)]};else{var w=Math.sqrt(y),E=(f*f-c*c+i*y)/(2*c*r*w),N=(f*f-c*c-i*y)/(2*f*r*w),M=Math.log(Math.sqrt(E*E+1)-E),O=Math.log(Math.sqrt(N*N+1)-N);_=(O-M)/e,b=function(A){var D=A*_,T=aP(M),I=c/(r*w)*(T*tfe(e*D+M)-efe(M));return[l+I*m,u+I*v,c*T/aP(e*D+M)]}}return b.duration=_*1e3*e/Math.SQRT2,b}return s.rho=function(a){var o=Math.max(.001,+a),l=o*o,u=l*l;return t(o,l,u)},s}(Math.SQRT2,2,4);var Tu=0,Vc=0,xc=0,T9=1e3,jm,Fc,Vm=0,Vo=0,gv=0,Qd=typeof performance=="object"&&performance.now?performance:Date,I9=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function XT(){return Vo||(I9(rfe),Vo=Qd.now()+gv)}function rfe(){Vo=0}function Fm(){this._call=this._time=this._next=null}Fm.prototype=C9.prototype={constructor:Fm,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?XT():+r)+(e==null?0:+e),!this._next&&Fc!==this&&(Fc?Fc._next=this:jm=this,Fc=this),this._call=t,this._time=r,r2()},stop:function(){this._call&&(this._call=null,this._time=1/0,r2())}};function C9(t,e,r){var i=new Fm;return i.restart(t,e,r),i}function ife(){XT(),++Tu;for(var t=jm,e;t;)(e=Vo-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Tu}function oP(){Vo=(Vm=Qd.now())+gv,Tu=Vc=0;try{ife()}finally{Tu=0,afe(),Vo=0}}function sfe(){var t=Qd.now(),e=t-Vm;e>T9&&(gv-=e,Vm=t)}function afe(){for(var t,e=jm,r,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:jm=r);Fc=t,r2(i)}function r2(t){if(!Tu){Vc&&(Vc=clearTimeout(Vc));var e=t-Vo;e>24?(t<1/0&&(Vc=setTimeout(oP,t-Qd.now()-gv)),xc&&(xc=clearInterval(xc))):(xc||(Vm=Qd.now(),xc=setInterval(sfe,T9)),Tu=1,I9(oP))}}function lP(t,e,r){var i=new Fm;return e=e==null?0:+e,i.restart(s=>{i.stop(),t(s+e)},e,r),i}var ofe=pv("start","end","cancel","interrupt"),lfe=[],k9=0,uP=1,i2=2,Tp=3,cP=4,s2=5,Ip=6;function vv(t,e,r,i,s,a){var o=t.__transition;if(!o)t.__transition={};else if(r in o)return;ufe(t,r,{name:e,index:i,group:s,on:ofe,tween:lfe,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:k9})}function QT(t,e){var r=xi(t,e);if(r.state>k9)throw new Error("too late; already scheduled");return r}function Ki(t,e){var r=xi(t,e);if(r.state>Tp)throw new Error("too late; already running");return r}function xi(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function ufe(t,e,r){var i=t.__transition,s;i[e]=r,r.timer=C9(a,0,r.time);function a(c){r.state=uP,r.timer.restart(o,r.delay,r.time),r.delay<=c&&o(c-r.delay)}function o(c){var d,h,f,m;if(r.state!==uP)return u();for(d in i)if(m=i[d],m.name===r.name){if(m.state===Tp)return lP(o);m.state===cP?(m.state=Ip,m.timer.stop(),m.on.call("interrupt",t,t.__data__,m.index,m.group),delete i[d]):+d<e&&(m.state=Ip,m.timer.stop(),m.on.call("cancel",t,t.__data__,m.index,m.group),delete i[d])}if(lP(function(){r.state===Tp&&(r.state=cP,r.timer.restart(l,r.delay,r.time),l(c))}),r.state=i2,r.on.call("start",t,t.__data__,r.index,r.group),r.state===i2){for(r.state=Tp,s=new Array(f=r.tween.length),d=0,h=-1;d<f;++d)(m=r.tween[d].value.call(t,t.__data__,r.index,r.group))&&(s[++h]=m);s.length=h+1}}function l(c){for(var d=c<r.duration?r.ease.call(null,c/r.duration):(r.timer.restart(u),r.state=s2,1),h=-1,f=s.length;++h<f;)s[h].call(t,d);r.state===s2&&(r.on.call("end",t,t.__data__,r.index,r.group),u())}function u(){r.state=Ip,r.timer.stop(),delete i[e];for(var c in i)return;delete t.__transition}}function Cp(t,e){var r=t.__transition,i,s,a=!0,o;if(r){e=e==null?null:e+"";for(o in r){if((i=r[o]).name!==e){a=!1;continue}s=i.state>i2&&i.state<s2,i.state=Ip,i.timer.stop(),i.on.call(s?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete r[o]}a&&delete t.__transition}}function cfe(t){return this.each(function(){Cp(this,t)})}function dfe(t,e){var r,i;return function(){var s=Ki(this,t),a=s.tween;if(a!==r){i=r=a;for(var o=0,l=i.length;o<l;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}s.tween=i}}function hfe(t,e,r){var i,s;if(typeof r!="function")throw new Error;return function(){var a=Ki(this,t),o=a.tween;if(o!==i){s=(i=o).slice();for(var l={name:e,value:r},u=0,c=s.length;u<c;++u)if(s[u].name===e){s[u]=l;break}u===c&&s.push(l)}a.tween=s}}function ffe(t,e){var r=this._id;if(t+="",arguments.length<2){for(var i=xi(this.node(),r).tween,s=0,a=i.length,o;s<a;++s)if((o=i[s]).name===t)return o.value;return null}return this.each((e==null?dfe:hfe)(r,t,e))}function JT(t,e,r){var i=t._id;return t.each(function(){var s=Ki(this,i);(s.value||(s.value={}))[e]=r.apply(this,arguments)}),function(s){return xi(s,i).value[e]}}function N9(t,e){var r;return(typeof e=="number"?Js:e instanceof Xd?iP:(r=Xd(e))?(e=r,iP):Khe)(t,e)}function pfe(t){return function(){this.removeAttribute(t)}}function mfe(t){return function(){this.removeAttributeNS(t.space,t.local)}}function gfe(t,e,r){var i,s=r+"",a;return function(){var o=this.getAttribute(t);return o===s?null:o===i?a:a=e(i=o,r)}}function vfe(t,e,r){var i,s=r+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===s?null:o===i?a:a=e(i=o,r)}}function yfe(t,e,r){var i,s,a;return function(){var o,l=r(this),u;return l==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=l+"",o===u?null:o===i&&u===s?a:(s=u,a=e(i=o,l)))}}function _fe(t,e,r){var i,s,a;return function(){var o,l=r(this),u;return l==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=l+"",o===u?null:o===i&&u===s?a:(s=u,a=e(i=o,l)))}}function wfe(t,e){var r=mv(t),i=r==="transform"?Jhe:N9;return this.attrTween(t,typeof e=="function"?(r.local?_fe:yfe)(r,i,JT(this,"attr."+t,e)):e==null?(r.local?mfe:pfe)(r):(r.local?vfe:gfe)(r,i,e))}function bfe(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function xfe(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function Efe(t,e){var r,i;function s(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&xfe(t,a)),r}return s._value=e,s}function Sfe(t,e){var r,i;function s(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&bfe(t,a)),r}return s._value=e,s}function Tfe(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var i=mv(t);return this.tween(r,(i.local?Efe:Sfe)(i,e))}function Ife(t,e){return function(){QT(this,t).delay=+e.apply(this,arguments)}}function Cfe(t,e){return e=+e,function(){QT(this,t).delay=e}}function kfe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ife:Cfe)(e,t)):xi(this.node(),e).delay}function Nfe(t,e){return function(){Ki(this,t).duration=+e.apply(this,arguments)}}function Afe(t,e){return e=+e,function(){Ki(this,t).duration=e}}function Rfe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Nfe:Afe)(e,t)):xi(this.node(),e).duration}function Pfe(t,e){if(typeof e!="function")throw new Error;return function(){Ki(this,t).ease=e}}function Dfe(t){var e=this._id;return arguments.length?this.each(Pfe(e,t)):xi(this.node(),e).ease}function Mfe(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;Ki(this,t).ease=r}}function Lfe(t){if(typeof t!="function")throw new Error;return this.each(Mfe(this._id,t))}function Ofe(t){typeof t!="function"&&(t=o9(t));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var a=e[s],o=a.length,l=i[s]=[],u,c=0;c<o;++c)(u=a[c])&&t.call(u,u.__data__,c,a)&&l.push(u);return new ks(i,this._parents,this._name,this._id)}function jfe(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,i=e.length,s=r.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var u=e[l],c=r[l],d=u.length,h=o[l]=new Array(d),f,m=0;m<d;++m)(f=u[m]||c[m])&&(h[m]=f);for(;l<i;++l)o[l]=e[l];return new ks(o,this._parents,this._name,this._id)}function Vfe(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function Ffe(t,e,r){var i,s,a=Vfe(e)?QT:Ki;return function(){var o=a(this,t),l=o.on;l!==i&&(s=(i=l).copy()).on(e,r),o.on=s}}function $fe(t,e){var r=this._id;return arguments.length<2?xi(this.node(),r).on.on(t):this.each(Ffe(r,t,e))}function Ufe(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function Bfe(){return this.on("end.remove",Ufe(this._id))}function zfe(t){var e=this._name,r=this._id;typeof t!="function"&&(t=WT(t));for(var i=this._groups,s=i.length,a=new Array(s),o=0;o<s;++o)for(var l=i[o],u=l.length,c=a[o]=new Array(u),d,h,f=0;f<u;++f)(d=l[f])&&(h=t.call(d,d.__data__,f,l))&&("__data__"in d&&(h.__data__=d.__data__),c[f]=h,vv(c[f],e,r,f,c,xi(d,r)));return new ks(a,this._parents,e,r)}function qfe(t){var e=this._name,r=this._id;typeof t!="function"&&(t=a9(t));for(var i=this._groups,s=i.length,a=[],o=[],l=0;l<s;++l)for(var u=i[l],c=u.length,d,h=0;h<c;++h)if(d=u[h]){for(var f=t.call(d,d.__data__,h,u),m,v=xi(d,r),y=0,b=f.length;y<b;++y)(m=f[y])&&vv(m,e,r,y,f,v);a.push(f),o.push(d)}return new ks(a,o,e,r)}var Hfe=Oh.prototype.constructor;function Wfe(){return new Hfe(this._groups,this._parents)}function Gfe(t,e){var r,i,s;return function(){var a=Su(this,t),o=(this.style.removeProperty(t),Su(this,t));return a===o?null:a===r&&o===i?s:s=e(r=a,i=o)}}function A9(t){return function(){this.style.removeProperty(t)}}function Kfe(t,e,r){var i,s=r+"",a;return function(){var o=Su(this,t);return o===s?null:o===i?a:a=e(i=o,r)}}function Yfe(t,e,r){var i,s,a;return function(){var o=Su(this,t),l=r(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(t),Su(this,t))),o===u?null:o===i&&u===s?a:(s=u,a=e(i=o,l))}}function Xfe(t,e){var r,i,s,a="style."+e,o="end."+a,l;return function(){var u=Ki(this,t),c=u.on,d=u.value[a]==null?l||(l=A9(e)):void 0;(c!==r||s!==d)&&(i=(r=c).copy()).on(o,s=d),u.on=i}}function Qfe(t,e,r){var i=(t+="")=="transform"?Qhe:N9;return e==null?this.styleTween(t,Gfe(t,i)).on("end.style."+t,A9(t)):typeof e=="function"?this.styleTween(t,Yfe(t,i,JT(this,"style."+t,e))).each(Xfe(this._id,t)):this.styleTween(t,Kfe(t,i,e),r).on("end.style."+t,null)}function Jfe(t,e,r){return function(i){this.style.setProperty(t,e.call(this,i),r)}}function Zfe(t,e,r){var i,s;function a(){var o=e.apply(this,arguments);return o!==s&&(i=(s=o)&&Jfe(t,o,r)),i}return a._value=e,a}function epe(t,e,r){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,Zfe(t,e,r??""))}function tpe(t){return function(){this.textContent=t}}function npe(t){return function(){var e=t(this);this.textContent=e??""}}function rpe(t){return this.tween("text",typeof t=="function"?npe(JT(this,"text",t)):tpe(t==null?"":t+""))}function ipe(t){return function(e){this.textContent=t.call(this,e)}}function spe(t){var e,r;function i(){var s=t.apply(this,arguments);return s!==r&&(e=(r=s)&&ipe(s)),e}return i._value=t,i}function ape(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,spe(t))}function ope(){for(var t=this._name,e=this._id,r=R9(),i=this._groups,s=i.length,a=0;a<s;++a)for(var o=i[a],l=o.length,u,c=0;c<l;++c)if(u=o[c]){var d=xi(u,e);vv(u,t,r,c,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new ks(i,this._parents,t,r)}function lpe(){var t,e,r=this,i=r._id,s=r.size();return new Promise(function(a,o){var l={value:o},u={value:function(){--s===0&&a()}};r.each(function(){var c=Ki(this,i),d=c.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),c.on=e}),s===0&&a()})}var upe=0;function ks(t,e,r,i){this._groups=t,this._parents=e,this._name=r,this._id=i}function R9(){return++upe}var ts=Oh.prototype;ks.prototype={constructor:ks,select:zfe,selectAll:qfe,selectChild:ts.selectChild,selectChildren:ts.selectChildren,filter:Ofe,merge:jfe,selection:Wfe,transition:ope,call:ts.call,nodes:ts.nodes,node:ts.node,size:ts.size,empty:ts.empty,each:ts.each,on:$fe,attr:wfe,attrTween:Tfe,style:Qfe,styleTween:epe,text:rpe,textTween:ape,remove:Bfe,tween:ffe,delay:kfe,duration:Rfe,ease:Dfe,easeVarying:Lfe,end:lpe,[Symbol.iterator]:ts[Symbol.iterator]};function cpe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var dpe={time:null,delay:0,duration:250,ease:cpe};function hpe(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function fpe(t){var e,r;t instanceof ks?(e=t._id,t=t._name):(e=R9(),(r=dpe).time=XT(),t=t==null?null:t+"");for(var i=this._groups,s=i.length,a=0;a<s;++a)for(var o=i[a],l=o.length,u,c=0;c<l;++c)(u=o[c])&&vv(u,t,e,c,o,r||hpe(u,e));return new ks(i,this._parents,t,e)}Oh.prototype.interrupt=cfe;Oh.prototype.transition=fpe;const zf=t=>()=>t;function ppe(t,{sourceEvent:e,target:r,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function cs(t,e,r){this.k=t,this.x=e,this.y=r}cs.prototype={constructor:cs,scale:function(t){return t===1?this:new cs(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new cs(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var vs=new cs(1,0,0);cs.prototype;function v0(t){t.stopImmediatePropagation()}function Ec(t){t.preventDefault(),t.stopImmediatePropagation()}function mpe(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function gpe(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function dP(){return this.__zoom||vs}function vpe(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function ype(){return navigator.maxTouchPoints||"ontouchstart"in this}function _pe(t,e,r){var i=t.invertX(e[0][0])-r[0][0],s=t.invertX(e[1][0])-r[1][0],a=t.invertY(e[0][1])-r[0][1],o=t.invertY(e[1][1])-r[1][1];return t.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function P9(){var t=mpe,e=gpe,r=_pe,i=vpe,s=ype,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=nfe,c=pv("start","zoom","end"),d,h,f,m=500,v=150,y=0,b=10;function _(j){j.property("__zoom",dP).on("wheel.zoom",D,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",I).filter(s).on("touchstart.zoom",x).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(j,$,U,Y){var q=j.selection?j.selection():j;q.property("__zoom",dP),j!==q?M(j,$,U,Y):q.interrupt().each(function(){O(this,arguments).event(Y).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},_.scaleBy=function(j,$,U,Y){_.scaleTo(j,function(){var q=this.__zoom.k,F=typeof $=="function"?$.apply(this,arguments):$;return q*F},U,Y)},_.scaleTo=function(j,$,U,Y){_.transform(j,function(){var q=e.apply(this,arguments),F=this.__zoom,W=U==null?N(q):typeof U=="function"?U.apply(this,arguments):U,Q=F.invert(W),H=typeof $=="function"?$.apply(this,arguments):$;return r(E(w(F,H),W,Q),q,o)},U,Y)},_.translateBy=function(j,$,U,Y){_.transform(j,function(){return r(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof U=="function"?U.apply(this,arguments):U),e.apply(this,arguments),o)},null,Y)},_.translateTo=function(j,$,U,Y,q){_.transform(j,function(){var F=e.apply(this,arguments),W=this.__zoom,Q=Y==null?N(F):typeof Y=="function"?Y.apply(this,arguments):Y;return r(vs.translate(Q[0],Q[1]).scale(W.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof U=="function"?-U.apply(this,arguments):-U),F,o)},Y,q)};function w(j,$){return $=Math.max(a[0],Math.min(a[1],$)),$===j.k?j:new cs($,j.x,j.y)}function E(j,$,U){var Y=$[0]-U[0]*j.k,q=$[1]-U[1]*j.k;return Y===j.x&&q===j.y?j:new cs(j.k,Y,q)}function N(j){return[(+j[0][0]+ +j[1][0])/2,(+j[0][1]+ +j[1][1])/2]}function M(j,$,U,Y){j.on("start.zoom",function(){O(this,arguments).event(Y).start()}).on("interrupt.zoom end.zoom",function(){O(this,arguments).event(Y).end()}).tween("zoom",function(){var q=this,F=arguments,W=O(q,F).event(Y),Q=e.apply(q,F),H=U==null?N(Q):typeof U=="function"?U.apply(q,F):U,X=Math.max(Q[1][0]-Q[0][0],Q[1][1]-Q[0][1]),J=q.__zoom,ee=typeof $=="function"?$.apply(q,F):$,se=u(J.invert(H).concat(X/J.k),ee.invert(H).concat(X/ee.k));return function(ce){if(ce===1)ce=ee;else{var Se=se(ce),Ee=X/Se[2];ce=new cs(Ee,H[0]-Se[0]*Ee,H[1]-Se[1]*Ee)}W.zoom(null,ce)}})}function O(j,$,U){return!U&&j.__zooming||new A(j,$)}function A(j,$){this.that=j,this.args=$,this.active=0,this.sourceEvent=null,this.extent=e.apply(j,$),this.taps=0}A.prototype={event:function(j){return j&&(this.sourceEvent=j),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(j,$){return this.mouse&&j!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&j!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&j!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(j){var $=qr(this.that).datum();c.call(j,this.that,new ppe(j,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:c}),$)}};function D(j,...$){if(!t.apply(this,arguments))return;var U=O(this,$).event(j),Y=this.__zoom,q=Math.max(a[0],Math.min(a[1],Y.k*Math.pow(2,i.apply(this,arguments)))),F=ui(j);if(U.wheel)(U.mouse[0][0]!==F[0]||U.mouse[0][1]!==F[1])&&(U.mouse[1]=Y.invert(U.mouse[0]=F)),clearTimeout(U.wheel);else{if(Y.k===q)return;U.mouse=[F,Y.invert(F)],Cp(this),U.start()}Ec(j),U.wheel=setTimeout(W,v),U.zoom("mouse",r(E(w(Y,q),U.mouse[0],U.mouse[1]),U.extent,o));function W(){U.wheel=null,U.end()}}function T(j,...$){if(f||!t.apply(this,arguments))return;var U=j.currentTarget,Y=O(this,$,!0).event(j),q=qr(j.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",X,!0),F=ui(j,U),W=j.clientX,Q=j.clientY;v9(j.view),v0(j),Y.mouse=[F,this.__zoom.invert(F)],Cp(this),Y.start();function H(J){if(Ec(J),!Y.moved){var ee=J.clientX-W,se=J.clientY-Q;Y.moved=ee*ee+se*se>y}Y.event(J).zoom("mouse",r(E(Y.that.__zoom,Y.mouse[0]=ui(J,U),Y.mouse[1]),Y.extent,o))}function X(J){q.on("mousemove.zoom mouseup.zoom",null),y9(J.view,Y.moved),Ec(J),Y.event(J).end()}}function I(j,...$){if(t.apply(this,arguments)){var U=this.__zoom,Y=ui(j.changedTouches?j.changedTouches[0]:j,this),q=U.invert(Y),F=U.k*(j.shiftKey?.5:2),W=r(E(w(U,F),Y,q),e.apply(this,$),o);Ec(j),l>0?qr(this).transition().duration(l).call(M,W,Y,j):qr(this).call(_.transform,W,Y,j)}}function x(j,...$){if(t.apply(this,arguments)){var U=j.touches,Y=U.length,q=O(this,$,j.changedTouches.length===Y).event(j),F,W,Q,H;for(v0(j),W=0;W<Y;++W)Q=U[W],H=ui(Q,this),H=[H,this.__zoom.invert(H),Q.identifier],q.touch0?!q.touch1&&q.touch0[2]!==H[2]&&(q.touch1=H,q.taps=0):(q.touch0=H,F=!0,q.taps=1+!!d);d&&(d=clearTimeout(d)),F&&(q.taps<2&&(h=H[0],d=setTimeout(function(){d=null},m)),Cp(this),q.start())}}function R(j,...$){if(this.__zooming){var U=O(this,$).event(j),Y=j.changedTouches,q=Y.length,F,W,Q,H;for(Ec(j),F=0;F<q;++F)W=Y[F],Q=ui(W,this),U.touch0&&U.touch0[2]===W.identifier?U.touch0[0]=Q:U.touch1&&U.touch1[2]===W.identifier&&(U.touch1[0]=Q);if(W=U.that.__zoom,U.touch1){var X=U.touch0[0],J=U.touch0[1],ee=U.touch1[0],se=U.touch1[1],ce=(ce=ee[0]-X[0])*ce+(ce=ee[1]-X[1])*ce,Se=(Se=se[0]-J[0])*Se+(Se=se[1]-J[1])*Se;W=w(W,Math.sqrt(ce/Se)),Q=[(X[0]+ee[0])/2,(X[1]+ee[1])/2],H=[(J[0]+se[0])/2,(J[1]+se[1])/2]}else if(U.touch0)Q=U.touch0[0],H=U.touch0[1];else return;U.zoom("touch",r(E(W,Q,H),U.extent,o))}}function P(j,...$){if(this.__zooming){var U=O(this,$).event(j),Y=j.changedTouches,q=Y.length,F,W;for(v0(j),f&&clearTimeout(f),f=setTimeout(function(){f=null},m),F=0;F<q;++F)W=Y[F],U.touch0&&U.touch0[2]===W.identifier?delete U.touch0:U.touch1&&U.touch1[2]===W.identifier&&delete U.touch1;if(U.touch1&&!U.touch0&&(U.touch0=U.touch1,delete U.touch1),U.touch0)U.touch0[1]=this.__zoom.invert(U.touch0[0]);else if(U.end(),U.taps===2&&(W=ui(W,this),Math.hypot(h[0]-W[0],h[1]-W[1])<b)){var Q=qr(this).on("dblclick.zoom");Q&&Q.apply(this,arguments)}}}return _.wheelDelta=function(j){return arguments.length?(i=typeof j=="function"?j:zf(+j),_):i},_.filter=function(j){return arguments.length?(t=typeof j=="function"?j:zf(!!j),_):t},_.touchable=function(j){return arguments.length?(s=typeof j=="function"?j:zf(!!j),_):s},_.extent=function(j){return arguments.length?(e=typeof j=="function"?j:zf([[+j[0][0],+j[0][1]],[+j[1][0],+j[1][1]]]),_):e},_.scaleExtent=function(j){return arguments.length?(a[0]=+j[0],a[1]=+j[1],_):[a[0],a[1]]},_.translateExtent=function(j){return arguments.length?(o[0][0]=+j[0][0],o[1][0]=+j[1][0],o[0][1]=+j[0][1],o[1][1]=+j[1][1],_):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},_.constrain=function(j){return arguments.length?(r=j,_):r},_.duration=function(j){return arguments.length?(l=+j,_):l},_.interpolate=function(j){return arguments.length?(u=j,_):u},_.on=function(){var j=c.on.apply(c,arguments);return j===c?_:j},_.clickDistance=function(j){return arguments.length?(y=(j=+j)*j,_):Math.sqrt(y)},_.tapDistance=function(j){return arguments.length?(b=+j,_):b},_}const yv=S.createContext(null),wpe=yv.Provider,Ns={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},D9=Ns.error001();function Nt(t,e){const r=S.useContext(yv);if(r===null)throw new Error(D9);return i9(r,t,e)}const mn=()=>{const t=S.useContext(yv);if(t===null)throw new Error(D9);return S.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},bpe=t=>t.userSelectionActive?"none":"all";function Gr({position:t,children:e,className:r,style:i,...s}){const a=Nt(bpe),o=`${t}`.split("-");return te.createElement("div",{className:On(["react-flow__panel",r,...o]),style:{...i,pointerEvents:a},...s},e)}function xpe({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:te.createElement(Gr,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},te.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Epe=({x:t,y:e,label:r,labelStyle:i={},labelShowBg:s=!0,labelBgStyle:a={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:u,className:c,...d})=>{const h=S.useRef(null),[f,m]=S.useState({x:0,y:0,width:0,height:0}),v=On(["react-flow__edge-textwrapper",c]);return S.useEffect(()=>{if(h.current){const y=h.current.getBBox();m({x:y.x,y:y.y,width:y.width,height:y.height})}},[r]),typeof r>"u"||!r?null:te.createElement("g",{transform:`translate(${t-f.width/2} ${e-f.height/2})`,className:v,visibility:f.width?"visible":"hidden",...d},s&&te.createElement("rect",{width:f.width+2*o[0],x:-o[0],y:-o[1],height:f.height+2*o[1],className:"react-flow__edge-textbg",style:a,rx:l,ry:l}),te.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:h,style:i},r),u)};var Spe=S.memo(Epe);const ZT=t=>({width:t.offsetWidth,height:t.offsetHeight}),Iu=(t,e=0,r=1)=>Math.min(Math.max(t,e),r),eI=(t={x:0,y:0},e)=>({x:Iu(t.x,e[0][0],e[1][0]),y:Iu(t.y,e[0][1],e[1][1])}),hP=(t,e,r)=>t<e?Iu(Math.abs(t-e),1,50)/50:t>r?-Iu(Math.abs(t-r),1,50)/50:0,M9=(t,e)=>{const r=hP(t.x,35,e.width-35)*20,i=hP(t.y,35,e.height-35)*20;return[r,i]},L9=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},O9=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Jd=({x:t,y:e,width:r,height:i})=>({x:t,y:e,x2:t+r,y2:e+i}),j9=({x:t,y:e,x2:r,y2:i})=>({x:t,y:e,width:r-t,height:i-e}),fP=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),Tpe=(t,e)=>j9(O9(Jd(t),Jd(e))),a2=(t,e)=>{const r=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(r*i)},Ipe=t=>Kr(t.width)&&Kr(t.height)&&Kr(t.x)&&Kr(t.y),Kr=t=>!isNaN(t)&&isFinite(t),Yt=Symbol.for("internals"),V9=["Enter"," ","Escape"],Cpe=(t,e)=>{},kpe=t=>"nativeEvent"in t;function o2(t){var s,a;const e=kpe(t)?t.nativeEvent:t,r=((a=(s=e.composedPath)==null?void 0:s.call(e))==null?void 0:a[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const F9=t=>"clientX"in t,ka=(t,e)=>{var a,o;const r=F9(t),i=r?t.clientX:(a=t.touches)==null?void 0:a[0].clientX,s=r?t.clientY:(o=t.touches)==null?void 0:o[0].clientY;return{x:i-((e==null?void 0:e.left)??0),y:s-((e==null?void 0:e.top)??0)}},$m=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},Vh=({id:t,path:e,labelX:r,labelY:i,label:s,labelStyle:a,labelShowBg:o,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:d,markerEnd:h,markerStart:f,interactionWidth:m=20})=>te.createElement(te.Fragment,null,te.createElement("path",{id:t,style:d,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:f}),m&&te.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),s&&Kr(r)&&Kr(i)?te.createElement(Spe,{x:r,y:i,label:s,labelStyle:a,labelShowBg:o,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c}):null);Vh.displayName="BaseEdge";function Sc(t,e,r){return r===void 0?r:i=>{const s=e().edges.find(a=>a.id===t);s&&r(i,{...s})}}function $9({sourceX:t,sourceY:e,targetX:r,targetY:i}){const s=Math.abs(r-t)/2,a=r<t?r+s:r-s,o=Math.abs(i-e)/2,l=i<e?i+o:i-o;return[a,l,s,o]}function U9({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:s,sourceControlY:a,targetControlX:o,targetControlY:l}){const u=t*.125+s*.375+o*.375+r*.125,c=e*.125+a*.375+l*.375+i*.125,d=Math.abs(u-t),h=Math.abs(c-e);return[u,c,d,h]}var Fo;(function(t){t.Strict="strict",t.Loose="loose"})(Fo||(Fo={}));var yo;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(yo||(yo={}));var Zd;(function(t){t.Partial="partial",t.Full="full"})(Zd||(Zd={}));var aa;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(aa||(aa={}));var Um;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Um||(Um={}));var De;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(De||(De={}));function pP({pos:t,x1:e,y1:r,x2:i,y2:s}){return t===De.Left||t===De.Right?[.5*(e+i),r]:[e,.5*(r+s)]}function B9({sourceX:t,sourceY:e,sourcePosition:r=De.Bottom,targetX:i,targetY:s,targetPosition:a=De.Top}){const[o,l]=pP({pos:r,x1:t,y1:e,x2:i,y2:s}),[u,c]=pP({pos:a,x1:i,y1:s,x2:t,y2:e}),[d,h,f,m]=U9({sourceX:t,sourceY:e,targetX:i,targetY:s,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${t},${e} C${o},${l} ${u},${c} ${i},${s}`,d,h,f,m]}const tI=S.memo(({sourceX:t,sourceY:e,targetX:r,targetY:i,sourcePosition:s=De.Bottom,targetPosition:a=De.Top,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:v,interactionWidth:y})=>{const[b,_,w]=B9({sourceX:t,sourceY:e,sourcePosition:s,targetX:r,targetY:i,targetPosition:a});return te.createElement(Vh,{path:b,labelX:_,labelY:w,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:v,interactionWidth:y})});tI.displayName="SimpleBezierEdge";const mP={[De.Left]:{x:-1,y:0},[De.Right]:{x:1,y:0},[De.Top]:{x:0,y:-1},[De.Bottom]:{x:0,y:1}},Npe=({source:t,sourcePosition:e=De.Bottom,target:r})=>e===De.Left||e===De.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1},gP=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function Ape({source:t,sourcePosition:e=De.Bottom,target:r,targetPosition:i=De.Top,center:s,offset:a}){const o=mP[e],l=mP[i],u={x:t.x+o.x*a,y:t.y+o.y*a},c={x:r.x+l.x*a,y:r.y+l.y*a},d=Npe({source:u,sourcePosition:e,target:c}),h=d.x!==0?"x":"y",f=d[h];let m=[],v,y;const b={x:0,y:0},_={x:0,y:0},[w,E,N,M]=$9({sourceX:t.x,sourceY:t.y,targetX:r.x,targetY:r.y});if(o[h]*l[h]===-1){v=s.x??w,y=s.y??E;const A=[{x:v,y:u.y},{x:v,y:c.y}],D=[{x:u.x,y},{x:c.x,y}];o[h]===f?m=h==="x"?A:D:m=h==="x"?D:A}else{const A=[{x:u.x,y:c.y}],D=[{x:c.x,y:u.y}];if(h==="x"?m=o.x===f?D:A:m=o.y===f?A:D,e===i){const P=Math.abs(t[h]-r[h]);if(P<=a){const j=Math.min(a-1,a-P);o[h]===f?b[h]=(u[h]>t[h]?-1:1)*j:_[h]=(c[h]>r[h]?-1:1)*j}}if(e!==i){const P=h==="x"?"y":"x",j=o[h]===l[P],$=u[P]>c[P],U=u[P]<c[P];(o[h]===1&&(!j&&$||j&&U)||o[h]!==1&&(!j&&U||j&&$))&&(m=h==="x"?A:D)}const T={x:u.x+b.x,y:u.y+b.y},I={x:c.x+_.x,y:c.y+_.y},x=Math.max(Math.abs(T.x-m[0].x),Math.abs(I.x-m[0].x)),R=Math.max(Math.abs(T.y-m[0].y),Math.abs(I.y-m[0].y));x>=R?(v=(T.x+I.x)/2,y=m[0].y):(v=m[0].x,y=(T.y+I.y)/2)}return[[t,{x:u.x+b.x,y:u.y+b.y},...m,{x:c.x+_.x,y:c.y+_.y},r],v,y,N,M]}function Rpe(t,e,r,i){const s=Math.min(gP(t,e)/2,gP(e,r)/2,i),{x:a,y:o}=e;if(t.x===a&&a===r.x||t.y===o&&o===r.y)return`L${a} ${o}`;if(t.y===o){const c=t.x<r.x?-1:1,d=t.y<r.y?1:-1;return`L ${a+s*c},${o}Q ${a},${o} ${a},${o+s*d}`}const l=t.x<r.x?1:-1,u=t.y<r.y?-1:1;return`L ${a},${o+s*u}Q ${a},${o} ${a+s*l},${o}`}function l2({sourceX:t,sourceY:e,sourcePosition:r=De.Bottom,targetX:i,targetY:s,targetPosition:a=De.Top,borderRadius:o=5,centerX:l,centerY:u,offset:c=20}){const[d,h,f,m,v]=Ape({source:{x:t,y:e},sourcePosition:r,target:{x:i,y:s},targetPosition:a,center:{x:l,y:u},offset:c});return[d.reduce((b,_,w)=>{let E="";return w>0&&w<d.length-1?E=Rpe(d[w-1],_,d[w+1],o):E=`${w===0?"M":"L"}${_.x} ${_.y}`,b+=E,b},""),h,f,m,v]}const _v=S.memo(({sourceX:t,sourceY:e,targetX:r,targetY:i,label:s,labelStyle:a,labelShowBg:o,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:d,sourcePosition:h=De.Bottom,targetPosition:f=De.Top,markerEnd:m,markerStart:v,pathOptions:y,interactionWidth:b})=>{const[_,w,E]=l2({sourceX:t,sourceY:e,sourcePosition:h,targetX:r,targetY:i,targetPosition:f,borderRadius:y==null?void 0:y.borderRadius,offset:y==null?void 0:y.offset});return te.createElement(Vh,{path:_,labelX:w,labelY:E,label:s,labelStyle:a,labelShowBg:o,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:d,markerEnd:m,markerStart:v,interactionWidth:b})});_v.displayName="SmoothStepEdge";const wv=S.memo(t=>{var e;return te.createElement(_v,{...t,pathOptions:S.useMemo(()=>{var r;return{borderRadius:0,offset:(r=t.pathOptions)==null?void 0:r.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});wv.displayName="StepEdge";function Ppe({sourceX:t,sourceY:e,targetX:r,targetY:i}){const[s,a,o,l]=$9({sourceX:t,sourceY:e,targetX:r,targetY:i});return[`M ${t},${e}L ${r},${i}`,s,a,o,l]}const bv=S.memo(({sourceX:t,sourceY:e,targetX:r,targetY:i,label:s,labelStyle:a,labelShowBg:o,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:d,markerEnd:h,markerStart:f,interactionWidth:m})=>{const[v,y,b]=Ppe({sourceX:t,sourceY:e,targetX:r,targetY:i});return te.createElement(Vh,{path:v,labelX:y,labelY:b,label:s,labelStyle:a,labelShowBg:o,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:d,markerEnd:h,markerStart:f,interactionWidth:m})});bv.displayName="StraightEdge";function qf(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function vP({pos:t,x1:e,y1:r,x2:i,y2:s,c:a}){switch(t){case De.Left:return[e-qf(e-i,a),r];case De.Right:return[e+qf(i-e,a),r];case De.Top:return[e,r-qf(r-s,a)];case De.Bottom:return[e,r+qf(s-r,a)]}}function z9({sourceX:t,sourceY:e,sourcePosition:r=De.Bottom,targetX:i,targetY:s,targetPosition:a=De.Top,curvature:o=.25}){const[l,u]=vP({pos:r,x1:t,y1:e,x2:i,y2:s,c:o}),[c,d]=vP({pos:a,x1:i,y1:s,x2:t,y2:e,c:o}),[h,f,m,v]=U9({sourceX:t,sourceY:e,targetX:i,targetY:s,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${e} C${l},${u} ${c},${d} ${i},${s}`,h,f,m,v]}const eh=S.memo(({sourceX:t,sourceY:e,targetX:r,targetY:i,sourcePosition:s=De.Bottom,targetPosition:a=De.Top,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:v,pathOptions:y,interactionWidth:b})=>{const[_,w,E]=z9({sourceX:t,sourceY:e,sourcePosition:s,targetX:r,targetY:i,targetPosition:a,curvature:y==null?void 0:y.curvature});return te.createElement(Vh,{path:_,labelX:w,labelY:E,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:v,interactionWidth:b})});eh.displayName="BezierEdge";const nI=S.createContext(null),Dpe=nI.Provider;nI.Consumer;const Mpe=()=>S.useContext(nI),Lpe=t=>"id"in t&&"source"in t&&"target"in t,Ope=({source:t,sourceHandle:e,target:r,targetHandle:i})=>`reactflow__edge-${t}${e||""}-${r}${i||""}`,u2=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`,jpe=(t,e)=>e.some(r=>r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)),rI=(t,e)=>{if(!t.source||!t.target)return e;let r;return Lpe(t)?r={...t}:r={...t,id:Ope(t)},jpe(r,e)?e:e.concat(r)},c2=({x:t,y:e},[r,i,s],a,[o,l])=>{const u={x:(t-r)/s,y:(e-i)/s};return a?{x:o*Math.round(u.x/o),y:l*Math.round(u.y/l)}:u},q9=({x:t,y:e},[r,i,s])=>({x:t*s+r,y:e*s+i}),Eo=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(t.width??0)*e[0],i=(t.height??0)*e[1],s={x:t.position.x-r,y:t.position.y-i};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-r,y:t.positionAbsolute.y-i}:s}},xv=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const r=t.reduce((i,s)=>{const{x:a,y:o}=Eo(s,e).positionAbsolute;return O9(i,Jd({x:a,y:o,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return j9(r)},H9=(t,e,[r,i,s]=[0,0,1],a=!1,o=!1,l=[0,0])=>{const u={x:(e.x-r)/s,y:(e.y-i)/s,width:e.width/s,height:e.height/s},c=[];return t.forEach(d=>{const{width:h,height:f,selectable:m=!0,hidden:v=!1}=d;if(o&&!m||v)return!1;const{positionAbsolute:y}=Eo(d,l),b={x:y.x,y:y.y,width:h||0,height:f||0},_=a2(u,b),w=typeof h>"u"||typeof f>"u"||h===null||f===null,E=a&&_>0,N=(h||0)*(f||0);(w||E||_>=N||d.dragging)&&c.push(d)}),c},W9=(t,e)=>{const r=t.map(i=>i.id);return e.filter(i=>r.includes(i.source)||r.includes(i.target))},G9=(t,e,r,i,s,a=.1)=>{const o=e/(t.width*(1+a)),l=r/(t.height*(1+a)),u=Math.min(o,l),c=Iu(u,i,s),d=t.x+t.width/2,h=t.y+t.height/2,f=e/2-d*c,m=r/2-h*c;return{x:f,y:m,zoom:c}},lo=(t,e=0)=>t.transition().duration(e);function yP(t,e,r,i){return(e[r]||[]).reduce((s,a)=>{var o,l;return`${t.id}-${a.id}-${r}`!==i&&s.push({id:a.id||null,type:r,nodeId:t.id,x:(((o=t.positionAbsolute)==null?void 0:o.x)??0)+a.x+a.width/2,y:(((l=t.positionAbsolute)==null?void 0:l.y)??0)+a.y+a.height/2}),s},[])}function Vpe(t,e,r,i,s,a){const{x:o,y:l}=ka(t),c=e.elementsFromPoint(o,l).find(v=>v.classList.contains("react-flow__handle"));if(c){const v=c.getAttribute("data-nodeid");if(v){const y=iI(void 0,c),b=c.getAttribute("data-handleid"),_=a({nodeId:v,id:b,type:y});if(_){const w=s.find(E=>E.nodeId===v&&E.type===y&&E.id===b);return{handle:{id:b,type:y,nodeId:v,x:(w==null?void 0:w.x)||r.x,y:(w==null?void 0:w.y)||r.y},validHandleResult:_}}}}let d=[],h=1/0;if(s.forEach(v=>{const y=Math.sqrt((v.x-r.x)**2+(v.y-r.y)**2);if(y<=i){const b=a(v);y<=h&&(y<h?d=[{handle:v,validHandleResult:b}]:y===h&&d.push({handle:v,validHandleResult:b}),h=y)}}),!d.length)return{handle:null,validHandleResult:K9()};if(d.length===1)return d[0];const f=d.some(({validHandleResult:v})=>v.isValid),m=d.some(({handle:v})=>v.type==="target");return d.find(({handle:v,validHandleResult:y})=>m?v.type==="target":f?y.isValid:!0)||d[0]}const Fpe={source:null,target:null,sourceHandle:null,targetHandle:null},K9=()=>({handleDomNode:null,isValid:!1,connection:Fpe,endHandle:null});function Y9(t,e,r,i,s,a,o){const l=s==="target",u=o.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),c={...K9(),handleDomNode:u};if(u){const d=iI(void 0,u),h=u.getAttribute("data-nodeid"),f=u.getAttribute("data-handleid"),m=u.classList.contains("connectable"),v=u.classList.contains("connectableend"),y={source:l?h:r,sourceHandle:l?f:i,target:l?r:h,targetHandle:l?i:f};c.connection=y,m&&v&&(e===Fo.Strict?l&&d==="source"||!l&&d==="target":h!==r||f!==i)&&(c.endHandle={nodeId:h,handleId:f,type:d},c.isValid=a(y))}return c}function $pe({nodes:t,nodeId:e,handleId:r,handleType:i}){return t.reduce((s,a)=>{if(a[Yt]){const{handleBounds:o}=a[Yt];let l=[],u=[];o&&(l=yP(a,o,"source",`${e}-${r}-${i}`),u=yP(a,o,"target",`${e}-${r}-${i}`)),s.push(...l,...u)}return s},[])}function iI(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function y0(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Upe(t,e){let r=null;return e?r="valid":t&&!e&&(r="invalid"),r}function X9({event:t,handleId:e,nodeId:r,onConnect:i,isTarget:s,getState:a,setState:o,isValidConnection:l,edgeUpdaterType:u,onReconnectEnd:c}){const d=L9(t.target),{connectionMode:h,domNode:f,autoPanOnConnect:m,connectionRadius:v,onConnectStart:y,panBy:b,getNodes:_,cancelConnection:w}=a();let E=0,N;const{x:M,y:O}=ka(t),A=d==null?void 0:d.elementFromPoint(M,O),D=iI(u,A),T=f==null?void 0:f.getBoundingClientRect();if(!T||!D)return;let I,x=ka(t,T),R=!1,P=null,j=!1,$=null;const U=$pe({nodes:_(),nodeId:r,handleId:e,handleType:D}),Y=()=>{if(!m)return;const[W,Q]=M9(x,T);b({x:W,y:Q}),E=requestAnimationFrame(Y)};o({connectionPosition:x,connectionStatus:null,connectionNodeId:r,connectionHandleId:e,connectionHandleType:D,connectionStartHandle:{nodeId:r,handleId:e,type:D},connectionEndHandle:null}),y==null||y(t,{nodeId:r,handleId:e,handleType:D});function q(W){const{transform:Q}=a();x=ka(W,T);const{handle:H,validHandleResult:X}=Vpe(W,d,c2(x,Q,!1,[1,1]),v,U,J=>Y9(J,h,r,e,s?"target":"source",l,d));if(N=H,R||(Y(),R=!0),$=X.handleDomNode,P=X.connection,j=X.isValid,o({connectionPosition:N&&j?q9({x:N.x,y:N.y},Q):x,connectionStatus:Upe(!!N,j),connectionEndHandle:X.endHandle}),!N&&!j&&!$)return y0(I);P.source!==P.target&&$&&(y0(I),I=$,$.classList.add("connecting","react-flow__handle-connecting"),$.classList.toggle("valid",j),$.classList.toggle("react-flow__handle-valid",j))}function F(W){var Q,H;(N||$)&&P&&j&&(i==null||i(P)),(H=(Q=a()).onConnectEnd)==null||H.call(Q,W),u&&(c==null||c(W)),y0(I),w(),cancelAnimationFrame(E),R=!1,j=!1,P=null,$=null,d.removeEventListener("mousemove",q),d.removeEventListener("mouseup",F),d.removeEventListener("touchmove",q),d.removeEventListener("touchend",F)}d.addEventListener("mousemove",q),d.addEventListener("mouseup",F),d.addEventListener("touchmove",q),d.addEventListener("touchend",F)}const _P=()=>!0,Bpe=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),zpe=(t,e,r)=>i=>{const{connectionStartHandle:s,connectionEndHandle:a,connectionClickStartHandle:o}=i;return{connecting:(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===r||(a==null?void 0:a.nodeId)===t&&(a==null?void 0:a.handleId)===e&&(a==null?void 0:a.type)===r,clickConnecting:(o==null?void 0:o.nodeId)===t&&(o==null?void 0:o.handleId)===e&&(o==null?void 0:o.type)===r}},Q9=S.forwardRef(({type:t="source",position:e=De.Top,isValidConnection:r,isConnectable:i=!0,isConnectableStart:s=!0,isConnectableEnd:a=!0,id:o,onConnect:l,children:u,className:c,onMouseDown:d,onTouchStart:h,...f},m)=>{var T,I;const v=o||null,y=t==="target",b=mn(),_=Mpe(),{connectOnClick:w,noPanClassName:E}=Nt(Bpe,In),{connecting:N,clickConnecting:M}=Nt(zpe(_,v,t),In);_||(I=(T=b.getState()).onError)==null||I.call(T,"010",Ns.error010());const O=x=>{const{defaultEdgeOptions:R,onConnect:P,hasDefaultEdges:j}=b.getState(),$={...R,...x};if(j){const{edges:U,setEdges:Y}=b.getState();Y(rI($,U))}P==null||P($),l==null||l($)},A=x=>{if(!_)return;const R=F9(x);s&&(R&&x.button===0||!R)&&X9({event:x,handleId:v,nodeId:_,onConnect:O,isTarget:y,getState:b.getState,setState:b.setState,isValidConnection:r||b.getState().isValidConnection||_P}),R?d==null||d(x):h==null||h(x)},D=x=>{const{onClickConnectStart:R,onClickConnectEnd:P,connectionClickStartHandle:j,connectionMode:$,isValidConnection:U}=b.getState();if(!_||!j&&!s)return;if(!j){R==null||R(x,{nodeId:_,handleId:v,handleType:t}),b.setState({connectionClickStartHandle:{nodeId:_,type:t,handleId:v}});return}const Y=L9(x.target),q=r||U||_P,{connection:F,isValid:W}=Y9({nodeId:_,id:v,type:t},$,j.nodeId,j.handleId||null,j.type,q,Y);W&&O(F),P==null||P(x),b.setState({connectionClickStartHandle:null})};return te.createElement("div",{"data-handleid":v,"data-nodeid":_,"data-handlepos":e,"data-id":`${_}-${v}-${t}`,className:On(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",E,c,{source:!y,target:y,connectable:i,connectablestart:s,connectableend:a,connecting:M,connectionindicator:i&&(s&&!N||a&&N)}]),onMouseDown:A,onTouchStart:A,onClick:w?D:void 0,ref:m,...f},u)});Q9.displayName="Handle";var Xn=S.memo(Q9);const J9=({data:t,isConnectable:e,targetPosition:r=De.Top,sourcePosition:i=De.Bottom})=>te.createElement(te.Fragment,null,te.createElement(Xn,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label,te.createElement(Xn,{type:"source",position:i,isConnectable:e}));J9.displayName="DefaultNode";var d2=S.memo(J9);const Z9=({data:t,isConnectable:e,sourcePosition:r=De.Bottom})=>te.createElement(te.Fragment,null,t==null?void 0:t.label,te.createElement(Xn,{type:"source",position:r,isConnectable:e}));Z9.displayName="InputNode";var e$=S.memo(Z9);const t$=({data:t,isConnectable:e,targetPosition:r=De.Top})=>te.createElement(te.Fragment,null,te.createElement(Xn,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label);t$.displayName="OutputNode";var n$=S.memo(t$);const sI=()=>null;sI.displayName="GroupNode";const qpe=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),Hf=t=>t.id;function Hpe(t,e){return In(t.selectedNodes.map(Hf),e.selectedNodes.map(Hf))&&In(t.selectedEdges.map(Hf),e.selectedEdges.map(Hf))}const r$=S.memo(({onSelectionChange:t})=>{const e=mn(),{selectedNodes:r,selectedEdges:i}=Nt(qpe,Hpe);return S.useEffect(()=>{const s={nodes:r,edges:i};t==null||t(s),e.getState().onSelectionChange.forEach(a=>a(s))},[r,i,t]),null});r$.displayName="SelectionListener";const Wpe=t=>!!t.onSelectionChange;function Gpe({onSelectionChange:t}){const e=Nt(Wpe);return t||e?te.createElement(r$,{onSelectionChange:t}):null}const Kpe=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function pl(t,e){S.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function Ze(t,e,r){S.useEffect(()=>{typeof e<"u"&&r({[t]:e})},[e])}const Ype=({nodes:t,edges:e,defaultNodes:r,defaultEdges:i,onConnect:s,onConnectStart:a,onConnectEnd:o,onClickConnectStart:l,onClickConnectEnd:u,nodesDraggable:c,nodesConnectable:d,nodesFocusable:h,edgesFocusable:f,edgesUpdatable:m,elevateNodesOnSelect:v,minZoom:y,maxZoom:b,nodeExtent:_,onNodesChange:w,onEdgesChange:E,elementsSelectable:N,connectionMode:M,snapGrid:O,snapToGrid:A,translateExtent:D,connectOnClick:T,defaultEdgeOptions:I,fitView:x,fitViewOptions:R,onNodesDelete:P,onEdgesDelete:j,onNodeDrag:$,onNodeDragStart:U,onNodeDragStop:Y,onSelectionDrag:q,onSelectionDragStart:F,onSelectionDragStop:W,noPanClassName:Q,nodeOrigin:H,rfId:X,autoPanOnConnect:J,autoPanOnNodeDrag:ee,onError:se,connectionRadius:ce,isValidConnection:Se,nodeDragThreshold:Ee})=>{const{setNodes:ie,setEdges:ue,setDefaultNodesAndEdges:ge,setMinZoom:ke,setMaxZoom:Re,setTranslateExtent:_e,setNodeExtent:V,reset:B}=Nt(Kpe,In),G=mn();return S.useEffect(()=>{const K=i==null?void 0:i.map(re=>({...re,...I}));return ge(r,K),()=>{B()}},[]),Ze("defaultEdgeOptions",I,G.setState),Ze("connectionMode",M,G.setState),Ze("onConnect",s,G.setState),Ze("onConnectStart",a,G.setState),Ze("onConnectEnd",o,G.setState),Ze("onClickConnectStart",l,G.setState),Ze("onClickConnectEnd",u,G.setState),Ze("nodesDraggable",c,G.setState),Ze("nodesConnectable",d,G.setState),Ze("nodesFocusable",h,G.setState),Ze("edgesFocusable",f,G.setState),Ze("edgesUpdatable",m,G.setState),Ze("elementsSelectable",N,G.setState),Ze("elevateNodesOnSelect",v,G.setState),Ze("snapToGrid",A,G.setState),Ze("snapGrid",O,G.setState),Ze("onNodesChange",w,G.setState),Ze("onEdgesChange",E,G.setState),Ze("connectOnClick",T,G.setState),Ze("fitViewOnInit",x,G.setState),Ze("fitViewOnInitOptions",R,G.setState),Ze("onNodesDelete",P,G.setState),Ze("onEdgesDelete",j,G.setState),Ze("onNodeDrag",$,G.setState),Ze("onNodeDragStart",U,G.setState),Ze("onNodeDragStop",Y,G.setState),Ze("onSelectionDrag",q,G.setState),Ze("onSelectionDragStart",F,G.setState),Ze("onSelectionDragStop",W,G.setState),Ze("noPanClassName",Q,G.setState),Ze("nodeOrigin",H,G.setState),Ze("rfId",X,G.setState),Ze("autoPanOnConnect",J,G.setState),Ze("autoPanOnNodeDrag",ee,G.setState),Ze("onError",se,G.setState),Ze("connectionRadius",ce,G.setState),Ze("isValidConnection",Se,G.setState),Ze("nodeDragThreshold",Ee,G.setState),pl(t,ie),pl(e,ue),pl(y,ke),pl(b,Re),pl(D,_e),pl(_,V),null},wP={display:"none"},Xpe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},i$="react-flow__node-desc",s$="react-flow__edge-desc",Qpe="react-flow__aria-live",Jpe=t=>t.ariaLiveMessage;function Zpe({rfId:t}){const e=Nt(Jpe);return te.createElement("div",{id:`${Qpe}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:Xpe},e)}function eme({rfId:t,disableKeyboardA11y:e}){return te.createElement(te.Fragment,null,te.createElement("div",{id:`${i$}-${t}`,style:wP},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),te.createElement("div",{id:`${s$}-${t}`,style:wP},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&te.createElement(Zpe,{rfId:t}))}var th=(t=null,e={actInsideInputWithModifier:!0})=>{const[r,i]=S.useState(!1),s=S.useRef(!1),a=S.useRef(new Set([])),[o,l]=S.useMemo(()=>{if(t!==null){const c=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.split("+")),d=c.reduce((h,f)=>h.concat(...f),[]);return[c,d]}return[[],[]]},[t]);return S.useEffect(()=>{const u=typeof document<"u"?document:null,c=(e==null?void 0:e.target)||u;if(t!==null){const d=m=>{if(s.current=m.ctrlKey||m.metaKey||m.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&o2(m))return!1;const y=xP(m.code,l);a.current.add(m[y]),bP(o,a.current,!1)&&(m.preventDefault(),i(!0))},h=m=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&o2(m))return!1;const y=xP(m.code,l);bP(o,a.current,!0)?(i(!1),a.current.clear()):a.current.delete(m[y]),m.key==="Meta"&&a.current.clear(),s.current=!1},f=()=>{a.current.clear(),i(!1)};return c==null||c.addEventListener("keydown",d),c==null||c.addEventListener("keyup",h),window.addEventListener("blur",f),()=>{c==null||c.removeEventListener("keydown",d),c==null||c.removeEventListener("keyup",h),window.removeEventListener("blur",f)}}},[t,i]),r};function bP(t,e,r){return t.filter(i=>r||i.length===e.size).some(i=>i.every(s=>e.has(s)))}function xP(t,e){return e.includes(t)?"code":"key"}function a$(t,e,r,i){var l,u;const s=t.parentNode||t.parentId;if(!s)return r;const a=e.get(s),o=Eo(a,i);return a$(a,e,{x:(r.x??0)+o.x,y:(r.y??0)+o.y,z:(((l=a[Yt])==null?void 0:l.z)??0)>(r.z??0)?((u=a[Yt])==null?void 0:u.z)??0:r.z??0},i)}function o$(t,e,r){t.forEach(i=>{var a;const s=i.parentNode||i.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||r!=null&&r[i.id]){const{x:o,y:l,z:u}=a$(i,t,{...i.position,z:((a=i[Yt])==null?void 0:a.z)??0},e);i.positionAbsolute={x:o,y:l},i[Yt].z=u,r!=null&&r[i.id]&&(i[Yt].isParent=!0)}})}function _0(t,e,r,i){const s=new Map,a={},o=i?1e3:0;return t.forEach(l=>{var m;const u=(Kr(l.zIndex)?l.zIndex:0)+(l.selected?o:0),c=e.get(l.id),d={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},h=l.parentNode||l.parentId;h&&(a[h]=!0);const f=(c==null?void 0:c.type)&&(c==null?void 0:c.type)!==l.type;Object.defineProperty(d,Yt,{enumerable:!1,value:{handleBounds:f||(m=c==null?void 0:c[Yt])==null?void 0:m.handleBounds,z:u}}),s.set(l.id,d)}),o$(s,r,a),s}function l$(t,e={}){const{getNodes:r,width:i,height:s,minZoom:a,maxZoom:o,d3Zoom:l,d3Selection:u,fitViewOnInitDone:c,fitViewOnInit:d,nodeOrigin:h}=t(),f=e.initial&&!c&&d;if(l&&u&&(f||!e.initial)){const v=r().filter(b=>{var w;const _=e.includeHiddenNodes?b.width&&b.height:!b.hidden;return(w=e.nodes)!=null&&w.length?_&&e.nodes.some(E=>E.id===b.id):_}),y=v.every(b=>b.width&&b.height);if(v.length>0&&y){const b=xv(v,h),{x:_,y:w,zoom:E}=G9(b,i,s,e.minZoom??a,e.maxZoom??o,e.padding??.1),N=vs.translate(_,w).scale(E);return typeof e.duration=="number"&&e.duration>0?l.transform(lo(u,e.duration),N):l.transform(u,N),!0}}return!1}function tme(t,e){return t.forEach(r=>{const i=e.get(r.id);i&&e.set(i.id,{...i,[Yt]:i[Yt],selected:r.selected})}),new Map(e)}function nme(t,e){return e.map(r=>{const i=t.find(s=>s.id===r.id);return i&&(r.selected=i.selected),r})}function Wf({changedNodes:t,changedEdges:e,get:r,set:i}){const{nodeInternals:s,edges:a,onNodesChange:o,onEdgesChange:l,hasDefaultNodes:u,hasDefaultEdges:c}=r();t!=null&&t.length&&(u&&i({nodeInternals:tme(t,s)}),o==null||o(t)),e!=null&&e.length&&(c&&i({edges:nme(e,a)}),l==null||l(e))}const ml=()=>{},rme={zoomIn:ml,zoomOut:ml,zoomTo:ml,getZoom:()=>1,setViewport:ml,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:ml,fitBounds:ml,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},ime=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),sme=()=>{const t=mn(),{d3Zoom:e,d3Selection:r}=Nt(ime,In);return S.useMemo(()=>r&&e?{zoomIn:s=>e.scaleBy(lo(r,s==null?void 0:s.duration),1.2),zoomOut:s=>e.scaleBy(lo(r,s==null?void 0:s.duration),1/1.2),zoomTo:(s,a)=>e.scaleTo(lo(r,a==null?void 0:a.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,a)=>{const[o,l,u]=t.getState().transform,c=vs.translate(s.x??o,s.y??l).scale(s.zoom??u);e.transform(lo(r,a==null?void 0:a.duration),c)},getViewport:()=>{const[s,a,o]=t.getState().transform;return{x:s,y:a,zoom:o}},fitView:s=>l$(t.getState,s),setCenter:(s,a,o)=>{const{width:l,height:u,maxZoom:c}=t.getState(),d=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:c,h=l/2-s*d,f=u/2-a*d,m=vs.translate(h,f).scale(d);e.transform(lo(r,o==null?void 0:o.duration),m)},fitBounds:(s,a)=>{const{width:o,height:l,minZoom:u,maxZoom:c}=t.getState(),{x:d,y:h,zoom:f}=G9(s,o,l,u,c,(a==null?void 0:a.padding)??.1),m=vs.translate(d,h).scale(f);e.transform(lo(r,a==null?void 0:a.duration),m)},project:s=>{const{transform:a,snapToGrid:o,snapGrid:l}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),c2(s,a,o,l)},screenToFlowPosition:s=>{const{transform:a,snapToGrid:o,snapGrid:l,domNode:u}=t.getState();if(!u)return s;const{x:c,y:d}=u.getBoundingClientRect(),h={x:s.x-c,y:s.y-d};return c2(h,a,o,l)},flowToScreenPosition:s=>{const{transform:a,domNode:o}=t.getState();if(!o)return s;const{x:l,y:u}=o.getBoundingClientRect(),c=q9(s,a);return{x:c.x+l,y:c.y+u}},viewportInitialized:!0}:rme,[e,r])};function aI(){const t=sme(),e=mn(),r=S.useCallback(()=>e.getState().getNodes().map(y=>({...y})),[]),i=S.useCallback(y=>e.getState().nodeInternals.get(y),[]),s=S.useCallback(()=>{const{edges:y=[]}=e.getState();return y.map(b=>({...b}))},[]),a=S.useCallback(y=>{const{edges:b=[]}=e.getState();return b.find(_=>_.id===y)},[]),o=S.useCallback(y=>{const{getNodes:b,setNodes:_,hasDefaultNodes:w,onNodesChange:E}=e.getState(),N=b(),M=typeof y=="function"?y(N):y;if(w)_(M);else if(E){const O=M.length===0?N.map(A=>({type:"remove",id:A.id})):M.map(A=>({item:A,type:"reset"}));E(O)}},[]),l=S.useCallback(y=>{const{edges:b=[],setEdges:_,hasDefaultEdges:w,onEdgesChange:E}=e.getState(),N=typeof y=="function"?y(b):y;if(w)_(N);else if(E){const M=N.length===0?b.map(O=>({type:"remove",id:O.id})):N.map(O=>({item:O,type:"reset"}));E(M)}},[]),u=S.useCallback(y=>{const b=Array.isArray(y)?y:[y],{getNodes:_,setNodes:w,hasDefaultNodes:E,onNodesChange:N}=e.getState();if(E){const O=[..._(),...b];w(O)}else if(N){const M=b.map(O=>({item:O,type:"add"}));N(M)}},[]),c=S.useCallback(y=>{const b=Array.isArray(y)?y:[y],{edges:_=[],setEdges:w,hasDefaultEdges:E,onEdgesChange:N}=e.getState();if(E)w([..._,...b]);else if(N){const M=b.map(O=>({item:O,type:"add"}));N(M)}},[]),d=S.useCallback(()=>{const{getNodes:y,edges:b=[],transform:_}=e.getState(),[w,E,N]=_;return{nodes:y().map(M=>({...M})),edges:b.map(M=>({...M})),viewport:{x:w,y:E,zoom:N}}},[]),h=S.useCallback(({nodes:y,edges:b})=>{const{nodeInternals:_,getNodes:w,edges:E,hasDefaultNodes:N,hasDefaultEdges:M,onNodesDelete:O,onEdgesDelete:A,onNodesChange:D,onEdgesChange:T}=e.getState(),I=(y||[]).map($=>$.id),x=(b||[]).map($=>$.id),R=w().reduce(($,U)=>{const Y=U.parentNode||U.parentId,q=!I.includes(U.id)&&Y&&$.find(W=>W.id===Y);return(typeof U.deletable=="boolean"?U.deletable:!0)&&(I.includes(U.id)||q)&&$.push(U),$},[]),P=E.filter($=>typeof $.deletable=="boolean"?$.deletable:!0),j=P.filter($=>x.includes($.id));if(R||j){const $=W9(R,P),U=[...j,...$],Y=U.reduce((q,F)=>(q.includes(F.id)||q.push(F.id),q),[]);if((M||N)&&(M&&e.setState({edges:E.filter(q=>!Y.includes(q.id))}),N&&(R.forEach(q=>{_.delete(q.id)}),e.setState({nodeInternals:new Map(_)}))),Y.length>0&&(A==null||A(U),T&&T(Y.map(q=>({id:q,type:"remove"})))),R.length>0&&(O==null||O(R),D)){const q=R.map(F=>({id:F.id,type:"remove"}));D(q)}}},[]),f=S.useCallback(y=>{const b=Ipe(y),_=b?null:e.getState().nodeInternals.get(y.id);return!b&&!_?[null,null,b]:[b?y:fP(_),_,b]},[]),m=S.useCallback((y,b=!0,_)=>{const[w,E,N]=f(y);return w?(_||e.getState().getNodes()).filter(M=>{if(!N&&(M.id===E.id||!M.positionAbsolute))return!1;const O=fP(M),A=a2(O,w);return b&&A>0||A>=w.width*w.height}):[]},[]),v=S.useCallback((y,b,_=!0)=>{const[w]=f(y);if(!w)return!1;const E=a2(w,b);return _&&E>0||E>=w.width*w.height},[]);return S.useMemo(()=>({...t,getNodes:r,getNode:i,getEdges:s,getEdge:a,setNodes:o,setEdges:l,addNodes:u,addEdges:c,toObject:d,deleteElements:h,getIntersectingNodes:m,isNodeIntersecting:v}),[t,r,i,s,a,o,l,u,c,d,h,m,v])}const ame={actInsideInputWithModifier:!1};var ome=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const r=mn(),{deleteElements:i}=aI(),s=th(t,ame),a=th(e);S.useEffect(()=>{if(s){const{edges:o,getNodes:l}=r.getState(),u=l().filter(d=>d.selected),c=o.filter(d=>d.selected);i({nodes:u,edges:c}),r.setState({nodesSelectionActive:!1})}},[s]),S.useEffect(()=>{r.setState({multiSelectionActive:a})},[a])};function lme(t){const e=mn();S.useEffect(()=>{let r;const i=()=>{var a,o;if(!t.current)return;const s=ZT(t.current);(s.height===0||s.width===0)&&((o=(a=e.getState()).onError)==null||o.call(a,"004",Ns.error004())),e.setState({width:s.width||500,height:s.height||500})};return i(),window.addEventListener("resize",i),t.current&&(r=new ResizeObserver(()=>i()),r.observe(t.current)),()=>{window.removeEventListener("resize",i),r&&t.current&&r.unobserve(t.current)}},[])}const oI={position:"absolute",width:"100%",height:"100%",top:0,left:0},ume=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Gf=t=>({x:t.x,y:t.y,zoom:t.k}),gl=(t,e)=>t.target.closest(`.${e}`),EP=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),SP=t=>{const e=t.ctrlKey&&$m()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},cme=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),dme=({onMove:t,onMoveStart:e,onMoveEnd:r,onPaneContextMenu:i,zoomOnScroll:s=!0,zoomOnPinch:a=!0,panOnScroll:o=!1,panOnScrollSpeed:l=.5,panOnScrollMode:u=yo.Free,zoomOnDoubleClick:c=!0,elementsSelectable:d,panOnDrag:h=!0,defaultViewport:f,translateExtent:m,minZoom:v,maxZoom:y,zoomActivationKeyCode:b,preventScrolling:_=!0,children:w,noWheelClassName:E,noPanClassName:N})=>{const M=S.useRef(),O=mn(),A=S.useRef(!1),D=S.useRef(!1),T=S.useRef(null),I=S.useRef({x:0,y:0,zoom:0}),{d3Zoom:x,d3Selection:R,d3ZoomHandler:P,userSelectionActive:j}=Nt(cme,In),$=th(b),U=S.useRef(0),Y=S.useRef(!1),q=S.useRef();return lme(T),S.useEffect(()=>{if(T.current){const F=T.current.getBoundingClientRect(),W=P9().scaleExtent([v,y]).translateExtent(m),Q=qr(T.current).call(W),H=vs.translate(f.x,f.y).scale(Iu(f.zoom,v,y)),X=[[0,0],[F.width,F.height]],J=W.constrain()(H,X,m);W.transform(Q,J),W.wheelDelta(SP),O.setState({d3Zoom:W,d3Selection:Q,d3ZoomHandler:Q.on("wheel.zoom"),transform:[J.x,J.y,J.k],domNode:T.current.closest(".react-flow")})}},[]),S.useEffect(()=>{R&&x&&(o&&!$&&!j?R.on("wheel.zoom",F=>{if(gl(F,E))return!1;F.preventDefault(),F.stopImmediatePropagation();const W=R.property("__zoom").k||1;if(F.ctrlKey&&a){const Se=ui(F),Ee=SP(F),ie=W*Math.pow(2,Ee);x.scaleTo(R,ie,Se,F);return}const Q=F.deltaMode===1?20:1;let H=u===yo.Vertical?0:F.deltaX*Q,X=u===yo.Horizontal?0:F.deltaY*Q;!$m()&&F.shiftKey&&u!==yo.Vertical&&(H=F.deltaY*Q,X=0),x.translateBy(R,-(H/W)*l,-(X/W)*l,{internal:!0});const J=Gf(R.property("__zoom")),{onViewportChangeStart:ee,onViewportChange:se,onViewportChangeEnd:ce}=O.getState();clearTimeout(q.current),Y.current||(Y.current=!0,e==null||e(F,J),ee==null||ee(J)),Y.current&&(t==null||t(F,J),se==null||se(J),q.current=setTimeout(()=>{r==null||r(F,J),ce==null||ce(J),Y.current=!1},150))},{passive:!1}):typeof P<"u"&&R.on("wheel.zoom",function(F,W){if(!_&&F.type==="wheel"&&!F.ctrlKey||gl(F,E))return null;F.preventDefault(),P.call(this,F,W)},{passive:!1}))},[j,o,u,R,x,P,$,a,_,E,e,t,r]),S.useEffect(()=>{x&&x.on("start",F=>{var H,X;if(!F.sourceEvent||F.sourceEvent.internal)return null;U.current=(H=F.sourceEvent)==null?void 0:H.button;const{onViewportChangeStart:W}=O.getState(),Q=Gf(F.transform);A.current=!0,I.current=Q,((X=F.sourceEvent)==null?void 0:X.type)==="mousedown"&&O.setState({paneDragging:!0}),W==null||W(Q),e==null||e(F.sourceEvent,Q)})},[x,e]),S.useEffect(()=>{x&&(j&&!A.current?x.on("zoom",null):j||x.on("zoom",F=>{var Q;const{onViewportChange:W}=O.getState();if(O.setState({transform:[F.transform.x,F.transform.y,F.transform.k]}),D.current=!!(i&&EP(h,U.current??0)),(t||W)&&!((Q=F.sourceEvent)!=null&&Q.internal)){const H=Gf(F.transform);W==null||W(H),t==null||t(F.sourceEvent,H)}}))},[j,x,t,h,i]),S.useEffect(()=>{x&&x.on("end",F=>{if(!F.sourceEvent||F.sourceEvent.internal)return null;const{onViewportChangeEnd:W}=O.getState();if(A.current=!1,O.setState({paneDragging:!1}),i&&EP(h,U.current??0)&&!D.current&&i(F.sourceEvent),D.current=!1,(r||W)&&ume(I.current,F.transform)){const Q=Gf(F.transform);I.current=Q,clearTimeout(M.current),M.current=setTimeout(()=>{W==null||W(Q),r==null||r(F.sourceEvent,Q)},o?150:0)}})},[x,o,h,r,i]),S.useEffect(()=>{x&&x.filter(F=>{const W=$||s,Q=a&&F.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&F.button===1&&F.type==="mousedown"&&(gl(F,"react-flow__node")||gl(F,"react-flow__edge")))return!0;if(!h&&!W&&!o&&!c&&!a||j||!c&&F.type==="dblclick"||gl(F,E)&&F.type==="wheel"||gl(F,N)&&(F.type!=="wheel"||o&&F.type==="wheel"&&!$)||!a&&F.ctrlKey&&F.type==="wheel"||!W&&!o&&!Q&&F.type==="wheel"||!h&&(F.type==="mousedown"||F.type==="touchstart")||Array.isArray(h)&&!h.includes(F.button)&&F.type==="mousedown")return!1;const H=Array.isArray(h)&&h.includes(F.button)||!F.button||F.button<=1;return(!F.ctrlKey||F.type==="wheel")&&H})},[j,x,s,a,o,c,h,d,$]),te.createElement("div",{className:"react-flow__renderer",ref:T,style:oI},w)},hme=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function fme(){const{userSelectionActive:t,userSelectionRect:e}=Nt(hme,In);return t&&e?te.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function TP(t,e){const r=e.parentNode||e.parentId,i=t.find(s=>s.id===r);if(i){const s=e.position.x+e.width-i.width,a=e.position.y+e.height-i.height;if(s>0||a>0||e.position.x<0||e.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,s>0&&(i.style.width+=s),a>0&&(i.style.height+=a),e.position.x<0){const o=Math.abs(e.position.x);i.position.x=i.position.x-o,i.style.width+=o,e.position.x=0}if(e.position.y<0){const o=Math.abs(e.position.y);i.position.y=i.position.y-o,i.style.height+=o,e.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function u$(t,e){if(t.some(i=>i.type==="reset"))return t.filter(i=>i.type==="reset").map(i=>i.item);const r=t.filter(i=>i.type==="add").map(i=>i.item);return e.reduce((i,s)=>{const a=t.filter(l=>l.id===s.id);if(a.length===0)return i.push(s),i;const o={...s};for(const l of a)if(l)switch(l.type){case"select":{o.selected=l.selected;break}case"position":{typeof l.position<"u"&&(o.position=l.position),typeof l.positionAbsolute<"u"&&(o.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(o.dragging=l.dragging),o.expandParent&&TP(i,o);break}case"dimensions":{typeof l.dimensions<"u"&&(o.width=l.dimensions.width,o.height=l.dimensions.height),typeof l.updateStyle<"u"&&(o.style={...o.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(o.resizing=l.resizing),o.expandParent&&TP(i,o);break}case"remove":return i}return i.push(o),i},r)}function lI(t,e){return u$(t,e)}function c$(t,e){return u$(t,e)}const Zs=(t,e)=>({id:t,type:"select",selected:e});function jl(t,e){return t.reduce((r,i)=>{const s=e.includes(i.id);return!i.selected&&s?(i.selected=!0,r.push(Zs(i.id,!0))):i.selected&&!s&&(i.selected=!1,r.push(Zs(i.id,!1))),r},[])}const w0=(t,e)=>r=>{r.target===e.current&&(t==null||t(r))},pme=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),d$=S.memo(({isSelecting:t,selectionMode:e=Zd.Full,panOnDrag:r,onSelectionStart:i,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:o,onPaneScroll:l,onPaneMouseEnter:u,onPaneMouseMove:c,onPaneMouseLeave:d,children:h})=>{const f=S.useRef(null),m=mn(),v=S.useRef(0),y=S.useRef(0),b=S.useRef(),{userSelectionActive:_,elementsSelectable:w,dragging:E}=Nt(pme,In),N=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,y.current=0},M=P=>{a==null||a(P),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},O=P=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){P.preventDefault();return}o==null||o(P)},A=l?P=>l(P):void 0,D=P=>{const{resetSelectedElements:j,domNode:$}=m.getState();if(b.current=$==null?void 0:$.getBoundingClientRect(),!w||!t||P.button!==0||P.target!==f.current||!b.current)return;const{x:U,y:Y}=ka(P,b.current);j(),m.setState({userSelectionRect:{width:0,height:0,startX:U,startY:Y,x:U,y:Y}}),i==null||i(P)},T=P=>{const{userSelectionRect:j,nodeInternals:$,edges:U,transform:Y,onNodesChange:q,onEdgesChange:F,nodeOrigin:W,getNodes:Q}=m.getState();if(!t||!b.current||!j)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const H=ka(P,b.current),X=j.startX??0,J=j.startY??0,ee={...j,x:H.x<X?H.x:X,y:H.y<J?H.y:J,width:Math.abs(H.x-X),height:Math.abs(H.y-J)},se=Q(),ce=H9($,ee,Y,e===Zd.Partial,!0,W),Se=W9(ce,U).map(ie=>ie.id),Ee=ce.map(ie=>ie.id);if(v.current!==Ee.length){v.current=Ee.length;const ie=jl(se,Ee);ie.length&&(q==null||q(ie))}if(y.current!==Se.length){y.current=Se.length;const ie=jl(U,Se);ie.length&&(F==null||F(ie))}m.setState({userSelectionRect:ee})},I=P=>{if(P.button!==0)return;const{userSelectionRect:j}=m.getState();!_&&j&&P.target===f.current&&(M==null||M(P)),m.setState({nodesSelectionActive:v.current>0}),N(),s==null||s(P)},x=P=>{_&&(m.setState({nodesSelectionActive:v.current>0}),s==null||s(P)),N()},R=w&&(t||_);return te.createElement("div",{className:On(["react-flow__pane",{dragging:E,selection:t}]),onClick:R?void 0:w0(M,f),onContextMenu:w0(O,f),onWheel:w0(A,f),onMouseEnter:R?void 0:u,onMouseDown:R?D:void 0,onMouseMove:R?T:c,onMouseUp:R?I:void 0,onMouseLeave:R?x:d,ref:f,style:oI},h,te.createElement(fme,null))});d$.displayName="Pane";function h$(t,e){const r=t.parentNode||t.parentId;if(!r)return!1;const i=e.get(r);return i?i.selected?!0:h$(i,e):!1}function IP(t,e,r){let i=t;do{if(i!=null&&i.matches(e))return!0;if(i===r.current)return!1;i=i.parentElement}while(i);return!1}function mme(t,e,r,i){return Array.from(t.values()).filter(s=>(s.selected||s.id===i)&&(!s.parentNode||s.parentId||!h$(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>{var a,o;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((a=s.positionAbsolute)==null?void 0:a.x)??0),y:r.y-(((o=s.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}})}function gme(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function f$(t,e,r,i,s=[0,0],a){const o=gme(t,t.extent||i);let l=o;const u=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(u&&t.width&&t.height){const h=r.get(u),{x:f,y:m}=Eo(h,s).positionAbsolute;l=h&&Kr(f)&&Kr(m)&&Kr(h.width)&&Kr(h.height)?[[f+t.width*s[0],m+t.height*s[1]],[f+h.width-t.width+t.width*s[0],m+h.height-t.height+t.height*s[1]]]:l}else a==null||a("005",Ns.error005()),l=o;else if(t.extent&&u&&t.extent!=="parent"){const h=r.get(u),{x:f,y:m}=Eo(h,s).positionAbsolute;l=[[t.extent[0][0]+f,t.extent[0][1]+m],[t.extent[1][0]+f,t.extent[1][1]+m]]}let c={x:0,y:0};if(u){const h=r.get(u);c=Eo(h,s).positionAbsolute}const d=l&&l!=="parent"?eI(e,l):e;return{position:{x:d.x-c.x,y:d.y-c.y},positionAbsolute:d}}function b0({nodeId:t,dragItems:e,nodeInternals:r}){const i=e.map(s=>({...r.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?i.find(s=>s.id===t):i[0],i]}const CP=(t,e,r,i)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const a=Array.from(s),o=e.getBoundingClientRect(),l={x:o.width*i[0],y:o.height*i[1]};return a.map(u=>{const c=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),position:u.getAttribute("data-handlepos"),x:(c.left-o.left-l.x)/r,y:(c.top-o.top-l.y)/r,...ZT(u)}})};function Tc(t,e,r){return r===void 0?r:i=>{const s=e().nodeInternals.get(t);s&&r(i,{...s})}}function h2({id:t,store:e,unselect:r=!1,nodeRef:i}){const{addSelectedNodes:s,unselectNodesAndEdges:a,multiSelectionActive:o,nodeInternals:l,onError:u}=e.getState(),c=l.get(t);if(!c){u==null||u("012",Ns.error012(t));return}e.setState({nodesSelectionActive:!1}),c.selected?(r||c.selected&&o)&&(a({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var d;return(d=i==null?void 0:i.current)==null?void 0:d.blur()})):s([t])}function vme(){const t=mn();return S.useCallback(({sourceEvent:r})=>{const{transform:i,snapGrid:s,snapToGrid:a}=t.getState(),o=r.touches?r.touches[0].clientX:r.clientX,l=r.touches?r.touches[0].clientY:r.clientY,u={x:(o-i[0])/i[2],y:(l-i[1])/i[2]};return{xSnapped:a?s[0]*Math.round(u.x/s[0]):u.x,ySnapped:a?s[1]*Math.round(u.y/s[1]):u.y,...u}},[])}function x0(t){return(e,r,i)=>t==null?void 0:t(e,i)}function p$({nodeRef:t,disabled:e=!1,noDragClassName:r,handleSelector:i,nodeId:s,isSelectable:a,selectNodesOnDrag:o}){const l=mn(),[u,c]=S.useState(!1),d=S.useRef([]),h=S.useRef({x:null,y:null}),f=S.useRef(0),m=S.useRef(null),v=S.useRef({x:0,y:0}),y=S.useRef(null),b=S.useRef(!1),_=S.useRef(!1),w=S.useRef(!1),E=vme();return S.useEffect(()=>{if(t!=null&&t.current){const N=qr(t.current),M=({x:D,y:T})=>{const{nodeInternals:I,onNodeDrag:x,onSelectionDrag:R,updateNodePositions:P,nodeExtent:j,snapGrid:$,snapToGrid:U,nodeOrigin:Y,onError:q}=l.getState();h.current={x:D,y:T};let F=!1,W={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&j){const H=xv(d.current,Y);W=Jd(H)}if(d.current=d.current.map(H=>{const X={x:D-H.distance.x,y:T-H.distance.y};U&&(X.x=$[0]*Math.round(X.x/$[0]),X.y=$[1]*Math.round(X.y/$[1]));const J=[[j[0][0],j[0][1]],[j[1][0],j[1][1]]];d.current.length>1&&j&&!H.extent&&(J[0][0]=H.positionAbsolute.x-W.x+j[0][0],J[1][0]=H.positionAbsolute.x+(H.width??0)-W.x2+j[1][0],J[0][1]=H.positionAbsolute.y-W.y+j[0][1],J[1][1]=H.positionAbsolute.y+(H.height??0)-W.y2+j[1][1]);const ee=f$(H,X,I,J,Y,q);return F=F||H.position.x!==ee.position.x||H.position.y!==ee.position.y,H.position=ee.position,H.positionAbsolute=ee.positionAbsolute,H}),!F)return;P(d.current,!0,!0),c(!0);const Q=s?x:x0(R);if(Q&&y.current){const[H,X]=b0({nodeId:s,dragItems:d.current,nodeInternals:I});Q(y.current,H,X)}},O=()=>{if(!m.current)return;const[D,T]=M9(v.current,m.current);if(D!==0||T!==0){const{transform:I,panBy:x}=l.getState();h.current.x=(h.current.x??0)-D/I[2],h.current.y=(h.current.y??0)-T/I[2],x({x:D,y:T})&&M(h.current)}f.current=requestAnimationFrame(O)},A=D=>{var Y;const{nodeInternals:T,multiSelectionActive:I,nodesDraggable:x,unselectNodesAndEdges:R,onNodeDragStart:P,onSelectionDragStart:j}=l.getState();_.current=!0;const $=s?P:x0(j);(!o||!a)&&!I&&s&&((Y=T.get(s))!=null&&Y.selected||R()),s&&a&&o&&h2({id:s,store:l,nodeRef:t});const U=E(D);if(h.current=U,d.current=mme(T,x,U,s),$&&d.current){const[q,F]=b0({nodeId:s,dragItems:d.current,nodeInternals:T});$(D.sourceEvent,q,F)}};if(e)N.on(".drag",null);else{const D=Ahe().on("start",T=>{const{domNode:I,nodeDragThreshold:x}=l.getState();x===0&&A(T),w.current=!1;const R=E(T);h.current=R,m.current=(I==null?void 0:I.getBoundingClientRect())||null,v.current=ka(T.sourceEvent,m.current)}).on("drag",T=>{var P,j;const I=E(T),{autoPanOnNodeDrag:x,nodeDragThreshold:R}=l.getState();if(T.sourceEvent.type==="touchmove"&&T.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!b.current&&_.current&&x&&(b.current=!0,O()),!_.current){const $=I.xSnapped-(((P=h==null?void 0:h.current)==null?void 0:P.x)??0),U=I.ySnapped-(((j=h==null?void 0:h.current)==null?void 0:j.y)??0);Math.sqrt($*$+U*U)>R&&A(T)}(h.current.x!==I.xSnapped||h.current.y!==I.ySnapped)&&d.current&&_.current&&(y.current=T.sourceEvent,v.current=ka(T.sourceEvent,m.current),M(I))}}).on("end",T=>{if(!(!_.current||w.current)&&(c(!1),b.current=!1,_.current=!1,cancelAnimationFrame(f.current),d.current)){const{updateNodePositions:I,nodeInternals:x,onNodeDragStop:R,onSelectionDragStop:P}=l.getState(),j=s?R:x0(P);if(I(d.current,!1,!1),j){const[$,U]=b0({nodeId:s,dragItems:d.current,nodeInternals:x});j(T.sourceEvent,$,U)}}}).filter(T=>{const I=T.target;return!T.button&&(!r||!IP(I,`.${r}`,t))&&(!i||IP(I,i,t))});return N.call(D),()=>{N.on(".drag",null)}}}},[t,e,r,i,a,l,s,o,E]),u}function m$(){const t=mn();return S.useCallback(r=>{const{nodeInternals:i,nodeExtent:s,updateNodePositions:a,getNodes:o,snapToGrid:l,snapGrid:u,onError:c,nodesDraggable:d}=t.getState(),h=o().filter(w=>w.selected&&(w.draggable||d&&typeof w.draggable>"u")),f=l?u[0]:5,m=l?u[1]:5,v=r.isShiftPressed?4:1,y=r.x*f*v,b=r.y*m*v,_=h.map(w=>{if(w.positionAbsolute){const E={x:w.positionAbsolute.x+y,y:w.positionAbsolute.y+b};l&&(E.x=u[0]*Math.round(E.x/u[0]),E.y=u[1]*Math.round(E.y/u[1]));const{positionAbsolute:N,position:M}=f$(w,E,i,s,void 0,c);w.position=M,w.positionAbsolute=N}return w});a(_,!0,!1)},[])}const Jl={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ic=t=>{const e=({id:r,type:i,data:s,xPos:a,yPos:o,xPosOrigin:l,yPosOrigin:u,selected:c,onClick:d,onMouseEnter:h,onMouseMove:f,onMouseLeave:m,onContextMenu:v,onDoubleClick:y,style:b,className:_,isDraggable:w,isSelectable:E,isConnectable:N,isFocusable:M,selectNodesOnDrag:O,sourcePosition:A,targetPosition:D,hidden:T,resizeObserver:I,dragHandle:x,zIndex:R,isParent:P,noDragClassName:j,noPanClassName:$,initialized:U,disableKeyboardA11y:Y,ariaLabel:q,rfId:F,hasHandleBounds:W})=>{const Q=mn(),H=S.useRef(null),X=S.useRef(null),J=S.useRef(A),ee=S.useRef(D),se=S.useRef(i),ce=E||w||d||h||f||m,Se=m$(),Ee=Tc(r,Q.getState,h),ie=Tc(r,Q.getState,f),ue=Tc(r,Q.getState,m),ge=Tc(r,Q.getState,v),ke=Tc(r,Q.getState,y),Re=B=>{const{nodeDragThreshold:G}=Q.getState();if(E&&(!O||!w||G>0)&&h2({id:r,store:Q,nodeRef:H}),d){const K=Q.getState().nodeInternals.get(r);K&&d(B,{...K})}},_e=B=>{if(!o2(B)&&!Y)if(V9.includes(B.key)&&E){const G=B.key==="Escape";h2({id:r,store:Q,unselect:G,nodeRef:H})}else w&&c&&Object.prototype.hasOwnProperty.call(Jl,B.key)&&(Q.setState({ariaLiveMessage:`Moved selected node ${B.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~o}`}),Se({x:Jl[B.key].x,y:Jl[B.key].y,isShiftPressed:B.shiftKey}))};S.useEffect(()=>()=>{X.current&&(I==null||I.unobserve(X.current),X.current=null)},[]),S.useEffect(()=>{if(H.current&&!T){const B=H.current;(!U||!W||X.current!==B)&&(X.current&&(I==null||I.unobserve(X.current)),I==null||I.observe(B),X.current=B)}},[T,U,W]),S.useEffect(()=>{const B=se.current!==i,G=J.current!==A,K=ee.current!==D;H.current&&(B||G||K)&&(B&&(se.current=i),G&&(J.current=A),K&&(ee.current=D),Q.getState().updateNodeDimensions([{id:r,nodeElement:H.current,forceUpdate:!0}]))},[r,i,A,D]);const V=p$({nodeRef:H,disabled:T||!w,noDragClassName:j,handleSelector:x,nodeId:r,isSelectable:E,selectNodesOnDrag:O});return T?null:te.createElement("div",{className:On(["react-flow__node",`react-flow__node-${i}`,{[$]:w},_,{selected:c,selectable:E,parent:P,dragging:V}]),ref:H,style:{zIndex:R,transform:`translate(${l}px,${u}px)`,pointerEvents:ce?"all":"none",visibility:U?"visible":"hidden",...b},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:Ee,onMouseMove:ie,onMouseLeave:ue,onContextMenu:ge,onClick:Re,onDoubleClick:ke,onKeyDown:M?_e:void 0,tabIndex:M?0:void 0,role:M?"button":void 0,"aria-describedby":Y?void 0:`${i$}-${F}`,"aria-label":q},te.createElement(Dpe,{value:r},te.createElement(t,{id:r,data:s,type:i,xPos:a,yPos:o,selected:c,isConnectable:N,sourcePosition:A,targetPosition:D,dragging:V,dragHandle:x,zIndex:R})))};return e.displayName="NodeWrapper",S.memo(e)};const yme=t=>{const e=t.getNodes().filter(r=>r.selected);return{...xv(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function _me({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:r}){const i=mn(),{width:s,height:a,x:o,y:l,transformString:u,userSelectionActive:c}=Nt(yme,In),d=m$(),h=S.useRef(null);if(S.useEffect(()=>{var v;r||(v=h.current)==null||v.focus({preventScroll:!0})},[r]),p$({nodeRef:h}),c||!s||!a)return null;const f=t?v=>{const y=i.getState().getNodes().filter(b=>b.selected);t(v,y)}:void 0,m=v=>{Object.prototype.hasOwnProperty.call(Jl,v.key)&&d({x:Jl[v.key].x,y:Jl[v.key].y,isShiftPressed:v.shiftKey})};return te.createElement("div",{className:On(["react-flow__nodesselection","react-flow__container",e]),style:{transform:u}},te.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:r?void 0:-1,onKeyDown:r?void 0:m,style:{width:s,height:a,top:l,left:o}}))}var wme=S.memo(_me);const bme=t=>t.nodesSelectionActive,g$=({children:t,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:o,deleteKeyCode:l,onMove:u,onMoveStart:c,onMoveEnd:d,selectionKeyCode:h,selectionOnDrag:f,selectionMode:m,onSelectionStart:v,onSelectionEnd:y,multiSelectionKeyCode:b,panActivationKeyCode:_,zoomActivationKeyCode:w,elementsSelectable:E,zoomOnScroll:N,zoomOnPinch:M,panOnScroll:O,panOnScrollSpeed:A,panOnScrollMode:D,zoomOnDoubleClick:T,panOnDrag:I,defaultViewport:x,translateExtent:R,minZoom:P,maxZoom:j,preventScrolling:$,onSelectionContextMenu:U,noWheelClassName:Y,noPanClassName:q,disableKeyboardA11y:F})=>{const W=Nt(bme),Q=th(h),H=th(_),X=H||I,J=H||O,ee=Q||f&&X!==!0;return ome({deleteKeyCode:l,multiSelectionKeyCode:b}),te.createElement(dme,{onMove:u,onMoveStart:c,onMoveEnd:d,onPaneContextMenu:a,elementsSelectable:E,zoomOnScroll:N,zoomOnPinch:M,panOnScroll:J,panOnScrollSpeed:A,panOnScrollMode:D,zoomOnDoubleClick:T,panOnDrag:!Q&&X,defaultViewport:x,translateExtent:R,minZoom:P,maxZoom:j,zoomActivationKeyCode:w,preventScrolling:$,noWheelClassName:Y,noPanClassName:q},te.createElement(d$,{onSelectionStart:v,onSelectionEnd:y,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:o,panOnDrag:X,isSelecting:!!ee,selectionMode:m},t,W&&te.createElement(wme,{onSelectionContextMenu:U,noPanClassName:q,disableKeyboardA11y:F})))};g$.displayName="FlowRenderer";var xme=S.memo(g$);function Eme(t){return Nt(S.useCallback(r=>t?H9(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[t]))}function Sme(t){const e={input:Ic(t.input||e$),default:Ic(t.default||d2),output:Ic(t.output||n$),group:Ic(t.group||sI)},r={},i=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,a)=>(s[a]=Ic(t[a]||d2),s),r);return{...e,...i}}const Tme=({x:t,y:e,width:r,height:i,origin:s})=>!r||!i?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-r*s[0],y:e-i*s[1]},Ime=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),v$=t=>{const{nodesDraggable:e,nodesConnectable:r,nodesFocusable:i,elementsSelectable:s,updateNodeDimensions:a,onError:o}=Nt(Ime,In),l=Eme(t.onlyRenderVisibleElements),u=S.useRef(),c=S.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(h=>{const f=h.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));a(f)});return u.current=d,d},[]);return S.useEffect(()=>()=>{var d;(d=u==null?void 0:u.current)==null||d.disconnect()},[]),te.createElement("div",{className:"react-flow__nodes",style:oI},l.map(d=>{var M,O,A;let h=d.type||"default";t.nodeTypes[h]||(o==null||o("003",Ns.error003(h)),h="default");const f=t.nodeTypes[h]||t.nodeTypes.default,m=!!(d.draggable||e&&typeof d.draggable>"u"),v=!!(d.selectable||s&&typeof d.selectable>"u"),y=!!(d.connectable||r&&typeof d.connectable>"u"),b=!!(d.focusable||i&&typeof d.focusable>"u"),_=t.nodeExtent?eI(d.positionAbsolute,t.nodeExtent):d.positionAbsolute,w=(_==null?void 0:_.x)??0,E=(_==null?void 0:_.y)??0,N=Tme({x:w,y:E,width:d.width??0,height:d.height??0,origin:t.nodeOrigin});return te.createElement(f,{key:d.id,id:d.id,className:d.className,style:d.style,type:h,data:d.data,sourcePosition:d.sourcePosition||De.Bottom,targetPosition:d.targetPosition||De.Top,hidden:d.hidden,xPos:w,yPos:E,xPosOrigin:N.x,yPosOrigin:N.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!d.selected,isDraggable:m,isSelectable:v,isConnectable:y,isFocusable:b,resizeObserver:c,dragHandle:d.dragHandle,zIndex:((M=d[Yt])==null?void 0:M.z)??0,isParent:!!((O=d[Yt])!=null&&O.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!d.width&&!!d.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((A=d[Yt])!=null&&A.handleBounds)})}))};v$.displayName="NodeRenderer";var Cme=S.memo(v$);const kme=(t,e,r)=>r===De.Left?t-e:r===De.Right?t+e:t,Nme=(t,e,r)=>r===De.Top?t-e:r===De.Bottom?t+e:t,kP="react-flow__edgeupdater",NP=({position:t,centerX:e,centerY:r,radius:i=10,onMouseDown:s,onMouseEnter:a,onMouseOut:o,type:l})=>te.createElement("circle",{onMouseDown:s,onMouseEnter:a,onMouseOut:o,className:On([kP,`${kP}-${l}`]),cx:kme(e,i,t),cy:Nme(r,i,t),r:i,stroke:"transparent",fill:"transparent"}),Ame=()=>!0;var vl=t=>{const e=({id:r,className:i,type:s,data:a,onClick:o,onEdgeDoubleClick:l,selected:u,animated:c,label:d,labelStyle:h,labelShowBg:f,labelBgStyle:m,labelBgPadding:v,labelBgBorderRadius:y,style:b,source:_,target:w,sourceX:E,sourceY:N,targetX:M,targetY:O,sourcePosition:A,targetPosition:D,elementsSelectable:T,hidden:I,sourceHandleId:x,targetHandleId:R,onContextMenu:P,onMouseEnter:j,onMouseMove:$,onMouseLeave:U,reconnectRadius:Y,onReconnect:q,onReconnectStart:F,onReconnectEnd:W,markerEnd:Q,markerStart:H,rfId:X,ariaLabel:J,isFocusable:ee,isReconnectable:se,pathOptions:ce,interactionWidth:Se,disableKeyboardA11y:Ee})=>{const ie=S.useRef(null),[ue,ge]=S.useState(!1),[ke,Re]=S.useState(!1),_e=mn(),V=S.useMemo(()=>`url('#${u2(H,X)}')`,[H,X]),B=S.useMemo(()=>`url('#${u2(Q,X)}')`,[Q,X]);if(I)return null;const G=Ke=>{var Ce;const{edges:Ne,addSelectedEdges:oe,unselectNodesAndEdges:pe,multiSelectionActive:be}=_e.getState(),Le=Ne.find(We=>We.id===r);Le&&(T&&(_e.setState({nodesSelectionActive:!1}),Le.selected&&be?(pe({nodes:[],edges:[Le]}),(Ce=ie.current)==null||Ce.blur()):oe([r])),o&&o(Ke,Le))},K=Sc(r,_e.getState,l),re=Sc(r,_e.getState,P),le=Sc(r,_e.getState,j),he=Sc(r,_e.getState,$),ye=Sc(r,_e.getState,U),Ie=(Ke,Ne)=>{if(Ke.button!==0)return;const{edges:oe,isValidConnection:pe}=_e.getState(),be=Ne?w:_,Le=(Ne?R:x)||null,Ce=Ne?"target":"source",We=pe||Ame,yt=Ne,ft=oe.find(xt=>xt.id===r);Re(!0),F==null||F(Ke,ft,Ce);const gn=xt=>{Re(!1),W==null||W(xt,ft,Ce)};X9({event:Ke,handleId:Le,nodeId:be,onConnect:xt=>q==null?void 0:q(ft,xt),isTarget:yt,getState:_e.getState,setState:_e.setState,isValidConnection:We,edgeUpdaterType:Ce,onReconnectEnd:gn})},Be=Ke=>Ie(Ke,!0),Oe=Ke=>Ie(Ke,!1),ze=()=>ge(!0),lt=()=>ge(!1),vt=!T&&!o,At=Ke=>{var Ne;if(!Ee&&V9.includes(Ke.key)&&T){const{unselectNodesAndEdges:oe,addSelectedEdges:pe,edges:be}=_e.getState();Ke.key==="Escape"?((Ne=ie.current)==null||Ne.blur(),oe({edges:[be.find(Ce=>Ce.id===r)]})):pe([r])}};return te.createElement("g",{className:On(["react-flow__edge",`react-flow__edge-${s}`,i,{selected:u,animated:c,inactive:vt,updating:ue}]),onClick:G,onDoubleClick:K,onContextMenu:re,onMouseEnter:le,onMouseMove:he,onMouseLeave:ye,onKeyDown:ee?At:void 0,tabIndex:ee?0:void 0,role:ee?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":J===null?void 0:J||`Edge from ${_} to ${w}`,"aria-describedby":ee?`${s$}-${X}`:void 0,ref:ie},!ke&&te.createElement(t,{id:r,source:_,target:w,selected:u,animated:c,label:d,labelStyle:h,labelShowBg:f,labelBgStyle:m,labelBgPadding:v,labelBgBorderRadius:y,data:a,style:b,sourceX:E,sourceY:N,targetX:M,targetY:O,sourcePosition:A,targetPosition:D,sourceHandleId:x,targetHandleId:R,markerStart:V,markerEnd:B,pathOptions:ce,interactionWidth:Se}),se&&te.createElement(te.Fragment,null,(se==="source"||se===!0)&&te.createElement(NP,{position:A,centerX:E,centerY:N,radius:Y,onMouseDown:Be,onMouseEnter:ze,onMouseOut:lt,type:"source"}),(se==="target"||se===!0)&&te.createElement(NP,{position:D,centerX:M,centerY:O,radius:Y,onMouseDown:Oe,onMouseEnter:ze,onMouseOut:lt,type:"target"})))};return e.displayName="EdgeWrapper",S.memo(e)};function Rme(t){const e={default:vl(t.default||eh),straight:vl(t.bezier||bv),step:vl(t.step||wv),smoothstep:vl(t.step||_v),simplebezier:vl(t.simplebezier||tI)},r={},i=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,a)=>(s[a]=vl(t[a]||eh),s),r);return{...e,...i}}function AP(t,e,r=null){const i=((r==null?void 0:r.x)||0)+e.x,s=((r==null?void 0:r.y)||0)+e.y,a=(r==null?void 0:r.width)||e.width,o=(r==null?void 0:r.height)||e.height;switch(t){case De.Top:return{x:i+a/2,y:s};case De.Right:return{x:i+a,y:s+o/2};case De.Bottom:return{x:i+a/2,y:s+o};case De.Left:return{x:i,y:s+o/2}}}function RP(t,e){return t?t.length===1||!e?t[0]:e&&t.find(r=>r.id===e)||null:null}const Pme=(t,e,r,i,s,a)=>{const o=AP(r,t,e),l=AP(a,i,s);return{sourceX:o.x,sourceY:o.y,targetX:l.x,targetY:l.y}};function Dme({sourcePos:t,targetPos:e,sourceWidth:r,sourceHeight:i,targetWidth:s,targetHeight:a,width:o,height:l,transform:u}){const c={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+r,e.x+s),y2:Math.max(t.y+i,e.y+a)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const d=Jd({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:o/u[2],height:l/u[2]}),h=Math.max(0,Math.min(d.x2,c.x2)-Math.max(d.x,c.x)),f=Math.max(0,Math.min(d.y2,c.y2)-Math.max(d.y,c.y));return Math.ceil(h*f)>0}function PP(t){var i,s,a,o,l;const e=((i=t==null?void 0:t[Yt])==null?void 0:i.handleBounds)||null,r=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.y)<"u";return[{x:((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.x)||0,y:((l=t==null?void 0:t.positionAbsolute)==null?void 0:l.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!r]}const Mme=[{level:0,isMaxLevel:!0,edges:[]}];function Lme(t,e,r=!1){let i=-1;const s=t.reduce((o,l)=>{var d,h;const u=Kr(l.zIndex);let c=u?l.zIndex:0;if(r){const f=e.get(l.target),m=e.get(l.source),v=l.selected||(f==null?void 0:f.selected)||(m==null?void 0:m.selected),y=Math.max(((d=m==null?void 0:m[Yt])==null?void 0:d.z)||0,((h=f==null?void 0:f[Yt])==null?void 0:h.z)||0,1e3);c=(u?l.zIndex:0)+(v?y:0)}return o[c]?o[c].push(l):o[c]=[l],i=c>i?c:i,o},{}),a=Object.entries(s).map(([o,l])=>{const u=+o;return{edges:l,level:u,isMaxLevel:u===i}});return a.length===0?Mme:a}function Ome(t,e,r){const i=Nt(S.useCallback(s=>t?s.edges.filter(a=>{const o=e.get(a.source),l=e.get(a.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&Dme({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:l.width,targetHeight:l.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return Lme(i,e,r)}const jme=({color:t="none",strokeWidth:e=1})=>te.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Vme=({color:t="none",strokeWidth:e=1})=>te.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),DP={[Um.Arrow]:jme,[Um.ArrowClosed]:Vme};function Fme(t){const e=mn();return S.useMemo(()=>{var s,a;return Object.prototype.hasOwnProperty.call(DP,t)?DP[t]:((a=(s=e.getState()).onError)==null||a.call(s,"009",Ns.error009(t)),null)},[t])}const $me=({id:t,type:e,color:r,width:i=12.5,height:s=12.5,markerUnits:a="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const u=Fme(e);return u?te.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:l,refX:"0",refY:"0"},te.createElement(u,{color:r,strokeWidth:o})):null},Ume=({defaultColor:t,rfId:e})=>r=>{const i=[];return r.edges.reduce((s,a)=>([a.markerStart,a.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const l=u2(o,e);i.includes(l)||(s.push({id:l,color:o.color||t,...o}),i.push(l))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))},y$=({defaultColor:t,rfId:e})=>{const r=Nt(S.useCallback(Ume({defaultColor:t,rfId:e}),[t,e]),(i,s)=>!(i.length!==s.length||i.some((a,o)=>a.id!==s[o].id)));return te.createElement("defs",null,r.map(i=>te.createElement($me,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};y$.displayName="MarkerDefinitions";var Bme=S.memo(y$);const zme=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),_$=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:r,rfId:i,edgeTypes:s,noPanClassName:a,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:c,onEdgeClick:d,onEdgeDoubleClick:h,onReconnect:f,onReconnectStart:m,onReconnectEnd:v,reconnectRadius:y,children:b,disableKeyboardA11y:_})=>{const{edgesFocusable:w,edgesUpdatable:E,elementsSelectable:N,width:M,height:O,connectionMode:A,nodeInternals:D,onError:T}=Nt(zme,In),I=Ome(e,D,r);return M?te.createElement(te.Fragment,null,I.map(({level:x,edges:R,isMaxLevel:P})=>te.createElement("svg",{key:x,style:{zIndex:x},width:M,height:O,className:"react-flow__edges react-flow__container"},P&&te.createElement(Bme,{defaultColor:t,rfId:i}),te.createElement("g",null,R.map(j=>{const[$,U,Y]=PP(D.get(j.source)),[q,F,W]=PP(D.get(j.target));if(!Y||!W)return null;let Q=j.type||"default";s[Q]||(T==null||T("011",Ns.error011(Q)),Q="default");const H=s[Q]||s.default,X=A===Fo.Strict?F.target:(F.target??[]).concat(F.source??[]),J=RP(U.source,j.sourceHandle),ee=RP(X,j.targetHandle),se=(J==null?void 0:J.position)||De.Bottom,ce=(ee==null?void 0:ee.position)||De.Top,Se=!!(j.focusable||w&&typeof j.focusable>"u"),Ee=j.reconnectable||j.updatable,ie=typeof f<"u"&&(Ee||E&&typeof Ee>"u");if(!J||!ee)return T==null||T("008",Ns.error008(J,j)),null;const{sourceX:ue,sourceY:ge,targetX:ke,targetY:Re}=Pme($,J,se,q,ee,ce);return te.createElement(H,{key:j.id,id:j.id,className:On([j.className,a]),type:Q,data:j.data,selected:!!j.selected,animated:!!j.animated,hidden:!!j.hidden,label:j.label,labelStyle:j.labelStyle,labelShowBg:j.labelShowBg,labelBgStyle:j.labelBgStyle,labelBgPadding:j.labelBgPadding,labelBgBorderRadius:j.labelBgBorderRadius,style:j.style,source:j.source,target:j.target,sourceHandleId:j.sourceHandle,targetHandleId:j.targetHandle,markerEnd:j.markerEnd,markerStart:j.markerStart,sourceX:ue,sourceY:ge,targetX:ke,targetY:Re,sourcePosition:se,targetPosition:ce,elementsSelectable:N,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:c,onClick:d,onEdgeDoubleClick:h,onReconnect:f,onReconnectStart:m,onReconnectEnd:v,reconnectRadius:y,rfId:i,ariaLabel:j.ariaLabel,isFocusable:Se,isReconnectable:ie,pathOptions:"pathOptions"in j?j.pathOptions:void 0,interactionWidth:j.interactionWidth,disableKeyboardA11y:_})})))),b):null};_$.displayName="EdgeRenderer";var qme=S.memo(_$);const Hme=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function Wme({children:t}){const e=Nt(Hme);return te.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function Gme(t){const e=aI(),r=S.useRef(!1);S.useEffect(()=>{!r.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),r.current=!0)},[t,e.viewportInitialized])}const Kme={[De.Left]:De.Right,[De.Right]:De.Left,[De.Top]:De.Bottom,[De.Bottom]:De.Top},w$=({nodeId:t,handleType:e,style:r,type:i=aa.Bezier,CustomComponent:s,connectionStatus:a})=>{var O,A,D;const{fromNode:o,handleId:l,toX:u,toY:c,connectionMode:d}=Nt(S.useCallback(T=>({fromNode:T.nodeInternals.get(t),handleId:T.connectionHandleId,toX:(T.connectionPosition.x-T.transform[0])/T.transform[2],toY:(T.connectionPosition.y-T.transform[1])/T.transform[2],connectionMode:T.connectionMode}),[t]),In),h=(O=o==null?void 0:o[Yt])==null?void 0:O.handleBounds;let f=h==null?void 0:h[e];if(d===Fo.Loose&&(f=f||(h==null?void 0:h[e==="source"?"target":"source"])),!o||!f)return null;const m=l?f.find(T=>T.id===l):f[0],v=m?m.x+m.width/2:(o.width??0)/2,y=m?m.y+m.height/2:o.height??0,b=(((A=o.positionAbsolute)==null?void 0:A.x)??0)+v,_=(((D=o.positionAbsolute)==null?void 0:D.y)??0)+y,w=m==null?void 0:m.position,E=w?Kme[w]:null;if(!w||!E)return null;if(s)return te.createElement(s,{connectionLineType:i,connectionLineStyle:r,fromNode:o,fromHandle:m,fromX:b,fromY:_,toX:u,toY:c,fromPosition:w,toPosition:E,connectionStatus:a});let N="";const M={sourceX:b,sourceY:_,sourcePosition:w,targetX:u,targetY:c,targetPosition:E};return i===aa.Bezier?[N]=z9(M):i===aa.Step?[N]=l2({...M,borderRadius:0}):i===aa.SmoothStep?[N]=l2(M):i===aa.SimpleBezier?[N]=B9(M):N=`M${b},${_} ${u},${c}`,te.createElement("path",{d:N,fill:"none",className:"react-flow__connection-path",style:r})};w$.displayName="ConnectionLine";const Yme=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function Xme({containerStyle:t,style:e,type:r,component:i}){const{nodeId:s,handleType:a,nodesConnectable:o,width:l,height:u,connectionStatus:c}=Nt(Yme,In);return!(s&&a&&l&&o)?null:te.createElement("svg",{style:t,width:l,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container"},te.createElement("g",{className:On(["react-flow__connection",c])},te.createElement(w$,{nodeId:s,handleType:a,style:e,type:r,CustomComponent:i,connectionStatus:c})))}function MP(t,e){return S.useRef(null),mn(),S.useMemo(()=>e(t),[t])}const b$=({nodeTypes:t,edgeTypes:e,onMove:r,onMoveStart:i,onMoveEnd:s,onInit:a,onNodeClick:o,onEdgeClick:l,onNodeDoubleClick:u,onEdgeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:f,onNodeContextMenu:m,onSelectionContextMenu:v,onSelectionStart:y,onSelectionEnd:b,connectionLineType:_,connectionLineStyle:w,connectionLineComponent:E,connectionLineContainerStyle:N,selectionKeyCode:M,selectionOnDrag:O,selectionMode:A,multiSelectionKeyCode:D,panActivationKeyCode:T,zoomActivationKeyCode:I,deleteKeyCode:x,onlyRenderVisibleElements:R,elementsSelectable:P,selectNodesOnDrag:j,defaultViewport:$,translateExtent:U,minZoom:Y,maxZoom:q,preventScrolling:F,defaultMarkerColor:W,zoomOnScroll:Q,zoomOnPinch:H,panOnScroll:X,panOnScrollSpeed:J,panOnScrollMode:ee,zoomOnDoubleClick:se,panOnDrag:ce,onPaneClick:Se,onPaneMouseEnter:Ee,onPaneMouseMove:ie,onPaneMouseLeave:ue,onPaneScroll:ge,onPaneContextMenu:ke,onEdgeContextMenu:Re,onEdgeMouseEnter:_e,onEdgeMouseMove:V,onEdgeMouseLeave:B,onReconnect:G,onReconnectStart:K,onReconnectEnd:re,reconnectRadius:le,noDragClassName:he,noWheelClassName:ye,noPanClassName:Ie,elevateEdgesOnSelect:Be,disableKeyboardA11y:Oe,nodeOrigin:ze,nodeExtent:lt,rfId:vt})=>{const At=MP(t,Sme),Ke=MP(e,Rme);return Gme(a),te.createElement(xme,{onPaneClick:Se,onPaneMouseEnter:Ee,onPaneMouseMove:ie,onPaneMouseLeave:ue,onPaneContextMenu:ke,onPaneScroll:ge,deleteKeyCode:x,selectionKeyCode:M,selectionOnDrag:O,selectionMode:A,onSelectionStart:y,onSelectionEnd:b,multiSelectionKeyCode:D,panActivationKeyCode:T,zoomActivationKeyCode:I,elementsSelectable:P,onMove:r,onMoveStart:i,onMoveEnd:s,zoomOnScroll:Q,zoomOnPinch:H,zoomOnDoubleClick:se,panOnScroll:X,panOnScrollSpeed:J,panOnScrollMode:ee,panOnDrag:ce,defaultViewport:$,translateExtent:U,minZoom:Y,maxZoom:q,onSelectionContextMenu:v,preventScrolling:F,noDragClassName:he,noWheelClassName:ye,noPanClassName:Ie,disableKeyboardA11y:Oe},te.createElement(Wme,null,te.createElement(qme,{edgeTypes:Ke,onEdgeClick:l,onEdgeDoubleClick:c,onlyRenderVisibleElements:R,onEdgeContextMenu:Re,onEdgeMouseEnter:_e,onEdgeMouseMove:V,onEdgeMouseLeave:B,onReconnect:G,onReconnectStart:K,onReconnectEnd:re,reconnectRadius:le,defaultMarkerColor:W,noPanClassName:Ie,elevateEdgesOnSelect:!!Be,disableKeyboardA11y:Oe,rfId:vt},te.createElement(Xme,{style:w,type:_,component:E,containerStyle:N})),te.createElement("div",{className:"react-flow__edgelabel-renderer"}),te.createElement(Cme,{nodeTypes:At,onNodeClick:o,onNodeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:f,onNodeContextMenu:m,selectNodesOnDrag:j,onlyRenderVisibleElements:R,noPanClassName:Ie,noDragClassName:he,disableKeyboardA11y:Oe,nodeOrigin:ze,nodeExtent:lt,rfId:vt})))};b$.displayName="GraphView";var Qme=S.memo(b$);const f2=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Gs={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:f2,nodeExtent:f2,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Fo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Cpe,isValidConnection:void 0},Jme=()=>Bce((t,e)=>({...Gs,setNodes:r=>{const{nodeInternals:i,nodeOrigin:s,elevateNodesOnSelect:a}=e();t({nodeInternals:_0(r,i,s,a)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:i={}}=e();t({edges:r.map(s=>({...i,...s}))})},setDefaultNodesAndEdges:(r,i)=>{const s=typeof r<"u",a=typeof i<"u",o=s?_0(r,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:o,edges:a?i:[],hasDefaultNodes:s,hasDefaultEdges:a})},updateNodeDimensions:r=>{const{onNodesChange:i,nodeInternals:s,fitViewOnInit:a,fitViewOnInitDone:o,fitViewOnInitOptions:l,domNode:u,nodeOrigin:c}=e(),d=u==null?void 0:u.querySelector(".react-flow__viewport");if(!d)return;const h=window.getComputedStyle(d),{m22:f}=new window.DOMMatrixReadOnly(h.transform),m=r.reduce((y,b)=>{const _=s.get(b.id);if(_!=null&&_.hidden)s.set(_.id,{..._,[Yt]:{..._[Yt],handleBounds:void 0}});else if(_){const w=ZT(b.nodeElement);!!(w.width&&w.height&&(_.width!==w.width||_.height!==w.height||b.forceUpdate))&&(s.set(_.id,{..._,[Yt]:{..._[Yt],handleBounds:{source:CP(".source",b.nodeElement,f,c),target:CP(".target",b.nodeElement,f,c)}},...w}),y.push({id:_.id,type:"dimensions",dimensions:w}))}return y},[]);o$(s,c);const v=o||a&&!o&&l$(e,{initial:!0,...l});t({nodeInternals:new Map(s),fitViewOnInitDone:v}),(m==null?void 0:m.length)>0&&(i==null||i(m))},updateNodePositions:(r,i=!0,s=!1)=>{const{triggerNodeChanges:a}=e(),o=r.map(l=>{const u={id:l.id,type:"position",dragging:s};return i&&(u.positionAbsolute=l.positionAbsolute,u.position=l.position),u});a(o)},triggerNodeChanges:r=>{const{onNodesChange:i,nodeInternals:s,hasDefaultNodes:a,nodeOrigin:o,getNodes:l,elevateNodesOnSelect:u}=e();if(r!=null&&r.length){if(a){const c=lI(r,l()),d=_0(c,s,o,u);t({nodeInternals:d})}i==null||i(r)}},addSelectedNodes:r=>{const{multiSelectionActive:i,edges:s,getNodes:a}=e();let o,l=null;i?o=r.map(u=>Zs(u,!0)):(o=jl(a(),r),l=jl(s,[])),Wf({changedNodes:o,changedEdges:l,get:e,set:t})},addSelectedEdges:r=>{const{multiSelectionActive:i,edges:s,getNodes:a}=e();let o,l=null;i?o=r.map(u=>Zs(u,!0)):(o=jl(s,r),l=jl(a(),[])),Wf({changedNodes:l,changedEdges:o,get:e,set:t})},unselectNodesAndEdges:({nodes:r,edges:i}={})=>{const{edges:s,getNodes:a}=e(),o=r||a(),l=i||s,u=o.map(d=>(d.selected=!1,Zs(d.id,!1))),c=l.map(d=>Zs(d.id,!1));Wf({changedNodes:u,changedEdges:c,get:e,set:t})},setMinZoom:r=>{const{d3Zoom:i,maxZoom:s}=e();i==null||i.scaleExtent([r,s]),t({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:i,minZoom:s}=e();i==null||i.scaleExtent([s,r]),t({maxZoom:r})},setTranslateExtent:r=>{var i;(i=e().d3Zoom)==null||i.translateExtent(r),t({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:i}=e(),a=i().filter(l=>l.selected).map(l=>Zs(l.id,!1)),o=r.filter(l=>l.selected).map(l=>Zs(l.id,!1));Wf({changedNodes:a,changedEdges:o,get:e,set:t})},setNodeExtent:r=>{const{nodeInternals:i}=e();i.forEach(s=>{s.positionAbsolute=eI(s.position,r)}),t({nodeExtent:r,nodeInternals:new Map(i)})},panBy:r=>{const{transform:i,width:s,height:a,d3Zoom:o,d3Selection:l,translateExtent:u}=e();if(!o||!l||!r.x&&!r.y)return!1;const c=vs.translate(i[0]+r.x,i[1]+r.y).scale(i[2]),d=[[0,0],[s,a]],h=o==null?void 0:o.constrain()(c,d,u);return o.transform(l,h),i[0]!==h.x||i[1]!==h.y||i[2]!==h.k},cancelConnection:()=>t({connectionNodeId:Gs.connectionNodeId,connectionHandleId:Gs.connectionHandleId,connectionHandleType:Gs.connectionHandleType,connectionStatus:Gs.connectionStatus,connectionStartHandle:Gs.connectionStartHandle,connectionEndHandle:Gs.connectionEndHandle}),reset:()=>t({...Gs})}),Object.is),Fh=({children:t})=>{const e=S.useRef(null);return e.current||(e.current=Jme()),te.createElement(wpe,{value:e.current},t)};Fh.displayName="ReactFlowProvider";const x$=({children:t})=>S.useContext(yv)?te.createElement(te.Fragment,null,t):te.createElement(Fh,null,t);x$.displayName="ReactFlowWrapper";const Zme={input:e$,default:d2,output:n$,group:sI},ege={default:eh,straight:bv,step:wv,smoothstep:_v,simplebezier:tI},tge=[0,0],nge=[15,15],rge={x:0,y:0,zoom:1},ige={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},uI=S.forwardRef(({nodes:t,edges:e,defaultNodes:r,defaultEdges:i,className:s,nodeTypes:a=Zme,edgeTypes:o=ege,onNodeClick:l,onEdgeClick:u,onInit:c,onMove:d,onMoveStart:h,onMoveEnd:f,onConnect:m,onConnectStart:v,onConnectEnd:y,onClickConnectStart:b,onClickConnectEnd:_,onNodeMouseEnter:w,onNodeMouseMove:E,onNodeMouseLeave:N,onNodeContextMenu:M,onNodeDoubleClick:O,onNodeDragStart:A,onNodeDrag:D,onNodeDragStop:T,onNodesDelete:I,onEdgesDelete:x,onSelectionChange:R,onSelectionDragStart:P,onSelectionDrag:j,onSelectionDragStop:$,onSelectionContextMenu:U,onSelectionStart:Y,onSelectionEnd:q,connectionMode:F=Fo.Strict,connectionLineType:W=aa.Bezier,connectionLineStyle:Q,connectionLineComponent:H,connectionLineContainerStyle:X,deleteKeyCode:J="Backspace",selectionKeyCode:ee="Shift",selectionOnDrag:se=!1,selectionMode:ce=Zd.Full,panActivationKeyCode:Se="Space",multiSelectionKeyCode:Ee=$m()?"Meta":"Control",zoomActivationKeyCode:ie=$m()?"Meta":"Control",snapToGrid:ue=!1,snapGrid:ge=nge,onlyRenderVisibleElements:ke=!1,selectNodesOnDrag:Re=!0,nodesDraggable:_e,nodesConnectable:V,nodesFocusable:B,nodeOrigin:G=tge,edgesFocusable:K,edgesUpdatable:re,elementsSelectable:le,defaultViewport:he=rge,minZoom:ye=.5,maxZoom:Ie=2,translateExtent:Be=f2,preventScrolling:Oe=!0,nodeExtent:ze,defaultMarkerColor:lt="#b1b1b7",zoomOnScroll:vt=!0,zoomOnPinch:At=!0,panOnScroll:Ke=!1,panOnScrollSpeed:Ne=.5,panOnScrollMode:oe=yo.Free,zoomOnDoubleClick:pe=!0,panOnDrag:be=!0,onPaneClick:Le,onPaneMouseEnter:Ce,onPaneMouseMove:We,onPaneMouseLeave:yt,onPaneScroll:ft,onPaneContextMenu:gn,children:Xt,onEdgeContextMenu:xt,onEdgeDoubleClick:jn,onEdgeMouseEnter:St,onEdgeMouseMove:vn,onEdgeMouseLeave:Fr,onEdgeUpdate:Si,onEdgeUpdateStart:Vs,onEdgeUpdateEnd:Zt,onReconnect:Qa,onReconnectStart:Yi,onReconnectEnd:yn,reconnectRadius:Fs=10,edgeUpdaterRadius:el=10,onNodesChange:ri,onEdgesChange:Ja,noDragClassName:tl="nodrag",noWheelClassName:Vn="nowheel",noPanClassName:$s="nopan",fitView:Us=!1,fitViewOptions:Xi,connectOnClick:_r=!0,attributionPosition:nl,proOptions:je,defaultEdgeOptions:Z,elevateNodesOnSelect:me=!0,elevateEdgesOnSelect:Me=!1,disableKeyboardA11y:mt=!1,autoPanOnConnect:en=!0,autoPanOnNodeDrag:jt=!0,connectionRadius:un=20,isValidConnection:Fn,onError:wr,style:Rt,id:Qi,nodeDragThreshold:rl,...Hh},Wh)=>{const il=Qi||"1";return te.createElement("div",{...Hh,style:{...Rt,...ige},ref:Wh,className:On(["react-flow",s]),"data-testid":"rf__wrapper",id:Qi},te.createElement(x$,null,te.createElement(Qme,{onInit:c,onMove:d,onMoveStart:h,onMoveEnd:f,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:w,onNodeMouseMove:E,onNodeMouseLeave:N,onNodeContextMenu:M,onNodeDoubleClick:O,nodeTypes:a,edgeTypes:o,connectionLineType:W,connectionLineStyle:Q,connectionLineComponent:H,connectionLineContainerStyle:X,selectionKeyCode:ee,selectionOnDrag:se,selectionMode:ce,deleteKeyCode:J,multiSelectionKeyCode:Ee,panActivationKeyCode:Se,zoomActivationKeyCode:ie,onlyRenderVisibleElements:ke,selectNodesOnDrag:Re,defaultViewport:he,translateExtent:Be,minZoom:ye,maxZoom:Ie,preventScrolling:Oe,zoomOnScroll:vt,zoomOnPinch:At,zoomOnDoubleClick:pe,panOnScroll:Ke,panOnScrollSpeed:Ne,panOnScrollMode:oe,panOnDrag:be,onPaneClick:Le,onPaneMouseEnter:Ce,onPaneMouseMove:We,onPaneMouseLeave:yt,onPaneScroll:ft,onPaneContextMenu:gn,onSelectionContextMenu:U,onSelectionStart:Y,onSelectionEnd:q,onEdgeContextMenu:xt,onEdgeDoubleClick:jn,onEdgeMouseEnter:St,onEdgeMouseMove:vn,onEdgeMouseLeave:Fr,onReconnect:Qa??Si,onReconnectStart:Yi??Vs,onReconnectEnd:yn??Zt,reconnectRadius:Fs??el,defaultMarkerColor:lt,noDragClassName:tl,noWheelClassName:Vn,noPanClassName:$s,elevateEdgesOnSelect:Me,rfId:il,disableKeyboardA11y:mt,nodeOrigin:G,nodeExtent:ze}),te.createElement(Ype,{nodes:t,edges:e,defaultNodes:r,defaultEdges:i,onConnect:m,onConnectStart:v,onConnectEnd:y,onClickConnectStart:b,onClickConnectEnd:_,nodesDraggable:_e,nodesConnectable:V,nodesFocusable:B,edgesFocusable:K,edgesUpdatable:re,elementsSelectable:le,elevateNodesOnSelect:me,minZoom:ye,maxZoom:Ie,nodeExtent:ze,onNodesChange:ri,onEdgesChange:Ja,snapToGrid:ue,snapGrid:ge,connectionMode:F,translateExtent:Be,connectOnClick:_r,defaultEdgeOptions:Z,fitView:Us,fitViewOptions:Xi,onNodesDelete:I,onEdgesDelete:x,onNodeDragStart:A,onNodeDrag:D,onNodeDragStop:T,onSelectionDrag:j,onSelectionDragStart:P,onSelectionDragStop:$,noPanClassName:$s,nodeOrigin:G,rfId:il,autoPanOnConnect:en,autoPanOnNodeDrag:jt,onError:wr,connectionRadius:un,isValidConnection:Fn,nodeDragThreshold:rl}),te.createElement(Gpe,{onSelectionChange:R}),Xt,te.createElement(xpe,{proOptions:je,position:nl}),te.createElement(eme,{rfId:il,disableKeyboardA11y:mt})))});uI.displayName="ReactFlow";function E$(t){return e=>{const[r,i]=S.useState(e),s=S.useCallback(a=>i(o=>t(a,o)),[]);return[r,i,s]}}const S$=E$(lI),T$=E$(c$),I$=({id:t,x:e,y:r,width:i,height:s,style:a,color:o,strokeColor:l,strokeWidth:u,className:c,borderRadius:d,shapeRendering:h,onClick:f,selected:m})=>{const{background:v,backgroundColor:y}=a||{},b=o||v||y;return te.createElement("rect",{className:On(["react-flow__minimap-node",{selected:m},c]),x:e,y:r,rx:d,ry:d,width:i,height:s,fill:b,stroke:l,strokeWidth:u,shapeRendering:h,onClick:f?_=>f(_,t):void 0})};I$.displayName="MiniMapNode";var sge=S.memo(I$);const age=t=>t.nodeOrigin,oge=t=>t.getNodes().filter(e=>!e.hidden&&e.width&&e.height),E0=t=>t instanceof Function?t:()=>t;function lge({nodeStrokeColor:t="transparent",nodeColor:e="#e2e2e2",nodeClassName:r="",nodeBorderRadius:i=5,nodeStrokeWidth:s=2,nodeComponent:a=sge,onClick:o}){const l=Nt(oge,In),u=Nt(age),c=E0(e),d=E0(t),h=E0(r),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return te.createElement(te.Fragment,null,l.map(m=>{const{x:v,y}=Eo(m,u).positionAbsolute;return te.createElement(a,{key:m.id,x:v,y,width:m.width,height:m.height,style:m.style,selected:m.selected,className:h(m),color:c(m),borderRadius:i,strokeColor:d(m),strokeWidth:s,shapeRendering:f,onClick:o,id:m.id})}))}var uge=S.memo(lge);const cge=200,dge=150,hge=t=>{const e=t.getNodes(),r={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:r,boundingRect:e.length>0?Tpe(xv(e,t.nodeOrigin),r):r,rfId:t.rfId}},fge="react-flow__minimap-desc";function C$({style:t,className:e,nodeStrokeColor:r="transparent",nodeColor:i="#e2e2e2",nodeClassName:s="",nodeBorderRadius:a=5,nodeStrokeWidth:o=2,nodeComponent:l,maskColor:u="rgb(240, 240, 240, 0.6)",maskStrokeColor:c="none",maskStrokeWidth:d=1,position:h="bottom-right",onClick:f,onNodeClick:m,pannable:v=!1,zoomable:y=!1,ariaLabel:b="React Flow mini map",inversePan:_=!1,zoomStep:w=10,offsetScale:E=5}){const N=mn(),M=S.useRef(null),{boundingRect:O,viewBB:A,rfId:D}=Nt(hge,In),T=(t==null?void 0:t.width)??cge,I=(t==null?void 0:t.height)??dge,x=O.width/T,R=O.height/I,P=Math.max(x,R),j=P*T,$=P*I,U=E*P,Y=O.x-(j-O.width)/2-U,q=O.y-($-O.height)/2-U,F=j+U*2,W=$+U*2,Q=`${fge}-${D}`,H=S.useRef(0);H.current=P,S.useEffect(()=>{if(M.current){const ee=qr(M.current),se=Ee=>{const{transform:ie,d3Selection:ue,d3Zoom:ge}=N.getState();if(Ee.sourceEvent.type!=="wheel"||!ue||!ge)return;const ke=-Ee.sourceEvent.deltaY*(Ee.sourceEvent.deltaMode===1?.05:Ee.sourceEvent.deltaMode?1:.002)*w,Re=ie[2]*Math.pow(2,ke);ge.scaleTo(ue,Re)},ce=Ee=>{const{transform:ie,d3Selection:ue,d3Zoom:ge,translateExtent:ke,width:Re,height:_e}=N.getState();if(Ee.sourceEvent.type!=="mousemove"||!ue||!ge)return;const V=H.current*Math.max(1,ie[2])*(_?-1:1),B={x:ie[0]-Ee.sourceEvent.movementX*V,y:ie[1]-Ee.sourceEvent.movementY*V},G=[[0,0],[Re,_e]],K=vs.translate(B.x,B.y).scale(ie[2]),re=ge.constrain()(K,G,ke);ge.transform(ue,re)},Se=P9().on("zoom",v?ce:null).on("zoom.wheel",y?se:null);return ee.call(Se),()=>{ee.on("zoom",null)}}},[v,y,_,w]);const X=f?ee=>{const se=ui(ee);f(ee,{x:se[0],y:se[1]})}:void 0,J=m?(ee,se)=>{const ce=N.getState().nodeInternals.get(se);m(ee,ce)}:void 0;return te.createElement(Gr,{position:h,style:t,className:On(["react-flow__minimap",e]),"data-testid":"rf__minimap"},te.createElement("svg",{width:T,height:I,viewBox:`${Y} ${q} ${F} ${W}`,role:"img","aria-labelledby":Q,ref:M,onClick:X},b&&te.createElement("title",{id:Q},b),te.createElement(uge,{onClick:J,nodeColor:i,nodeStrokeColor:r,nodeBorderRadius:a,nodeClassName:s,nodeStrokeWidth:o,nodeComponent:l}),te.createElement("path",{className:"react-flow__minimap-mask",d:`M${Y-U},${q-U}h${F+U*2}v${W+U*2}h${-F-U*2}z
        M${A.x},${A.y}h${A.width}v${A.height}h${-A.width}z`,fill:u,fillRule:"evenodd",stroke:c,strokeWidth:d,pointerEvents:"none"})))}C$.displayName="MiniMap";var k$=S.memo(C$);function pge(){return te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},te.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function mge(){return te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},te.createElement("path",{d:"M0 0h32v4.2H0z"}))}function gge(){return te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},te.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function vge(){return te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},te.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function yge(){return te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},te.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const $c=({children:t,className:e,...r})=>te.createElement("button",{type:"button",className:On(["react-flow__controls-button",e]),...r},t);$c.displayName="ControlButton";const _ge=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),N$=({style:t,showZoom:e=!0,showFitView:r=!0,showInteractive:i=!0,fitViewOptions:s,onZoomIn:a,onZoomOut:o,onFitView:l,onInteractiveChange:u,className:c,children:d,position:h="bottom-left"})=>{const f=mn(),[m,v]=S.useState(!1),{isInteractive:y,minZoomReached:b,maxZoomReached:_}=Nt(_ge,In),{zoomIn:w,zoomOut:E,fitView:N}=aI();if(S.useEffect(()=>{v(!0)},[]),!m)return null;const M=()=>{w(),a==null||a()},O=()=>{E(),o==null||o()},A=()=>{N(s),l==null||l()},D=()=>{f.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),u==null||u(!y)};return te.createElement(Gr,{className:On(["react-flow__controls",c]),position:h,style:t,"data-testid":"rf__controls"},e&&te.createElement(te.Fragment,null,te.createElement($c,{onClick:M,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:_},te.createElement(pge,null)),te.createElement($c,{onClick:O,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b},te.createElement(mge,null))),r&&te.createElement($c,{className:"react-flow__controls-fitview",onClick:A,title:"fit view","aria-label":"fit view"},te.createElement(gge,null)),i&&te.createElement($c,{className:"react-flow__controls-interactive",onClick:D,title:"toggle interactivity","aria-label":"toggle interactivity"},y?te.createElement(yge,null):te.createElement(vge,null)),d)};N$.displayName="Controls";var A$=S.memo(N$),gi;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(gi||(gi={}));function wge({color:t,dimensions:e,lineWidth:r}){return te.createElement("path",{stroke:t,strokeWidth:r,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function bge({color:t,radius:e}){return te.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const xge={[gi.Dots]:"#91919a",[gi.Lines]:"#eee",[gi.Cross]:"#e2e2e2"},Ege={[gi.Dots]:1,[gi.Lines]:1,[gi.Cross]:6},Sge=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function R$({id:t,variant:e=gi.Dots,gap:r=20,size:i,lineWidth:s=1,offset:a=2,color:o,style:l,className:u}){const c=S.useRef(null),{transform:d,patternId:h}=Nt(Sge,In),f=o||xge[e],m=i||Ege[e],v=e===gi.Dots,y=e===gi.Cross,b=Array.isArray(r)?r:[r,r],_=[b[0]*d[2]||1,b[1]*d[2]||1],w=m*d[2],E=y?[w,w]:_,N=v?[w/a,w/a]:[E[0]/a,E[1]/a];return te.createElement("svg",{className:On(["react-flow__background",u]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:c,"data-testid":"rf__background"},te.createElement("pattern",{id:h+t,x:d[0]%_[0],y:d[1]%_[1],width:_[0],height:_[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${N[0]},-${N[1]})`},v?te.createElement(bge,{color:f,radius:w/a}):te.createElement(wge,{dimensions:E,color:f,lineWidth:s})),te.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+t})`}))}R$.displayName="Background";var P$=S.memo(R$),D$={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},LP=te.createContext&&te.createContext(D$),Tge=["attr","size","title"];function Ige(t,e){if(t==null)return{};var r=Cge(t,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function Cge(t,e){if(t==null)return{};var r={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;r[i]=t[i]}return r}function Bm(){return Bm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Bm.apply(this,arguments)}function OP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function zm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?OP(Object(r),!0).forEach(function(i){kge(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):OP(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function kge(t,e,r){return e=Nge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Nge(t){var e=Age(t,"string");return typeof e=="symbol"?e:e+""}function Age(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function M$(t){return t&&t.map((e,r)=>te.createElement(e.tag,zm({key:r},e.attr),M$(e.child)))}function nt(t){return e=>te.createElement(Rge,Bm({attr:zm({},t.attr)},e),M$(t.child))}function Rge(t){var e=r=>{var{attr:i,size:s,title:a}=t,o=Ige(t,Tge),l=s||r.size||"1em",u;return r.className&&(u=r.className),t.className&&(u=(u?u+" ":"")+t.className),te.createElement("svg",Bm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,i,o,{className:u,style:zm(zm({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&te.createElement("title",null,a),t.children)};return LP!==void 0?te.createElement(LP.Consumer,null,r=>e(r)):e(D$)}function L$(t){return nt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function Pge(t){return nt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(t)}function Dge(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(t)}function Mge(t){return nt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function Lge(t){return nt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"},child:[]}]})(t)}function Oge(t){return nt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M512.1 191l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0L552 6.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zm-10.5-58.8c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.7-82.4 14.3-52.8 52.8zM386.3 286.1l33.7 16.8c10.1 5.8 14.5 18.1 10.5 29.1-8.9 24.2-26.4 46.4-42.6 65.8-7.4 8.9-20.2 11.1-30.3 5.3l-29.1-16.8c-16 13.7-34.6 24.6-54.9 31.7v33.6c0 11.6-8.3 21.6-19.7 23.6-24.6 4.2-50.4 4.4-75.9 0-11.5-2-20-11.9-20-23.6V418c-20.3-7.2-38.9-18-54.9-31.7L74 403c-10 5.8-22.9 3.6-30.3-5.3-16.2-19.4-33.3-41.6-42.2-65.7-4-10.9.4-23.2 10.5-29.1l33.3-16.8c-3.9-20.9-3.9-42.4 0-63.4L12 205.8c-10.1-5.8-14.6-18.1-10.5-29 8.9-24.2 26-46.4 42.2-65.8 7.4-8.9 20.2-11.1 30.3-5.3l29.1 16.8c16-13.7 34.6-24.6 54.9-31.7V57.1c0-11.5 8.2-21.5 19.6-23.5 24.6-4.2 50.5-4.4 76-.1 11.5 2 20 11.9 20 23.6v33.6c20.3 7.2 38.9 18 54.9 31.7l29.1-16.8c10-5.8 22.9-3.6 30.3 5.3 16.2 19.4 33.2 41.6 42.1 65.8 4 10.9.1 23.2-10 29.1l-33.7 16.8c3.9 21 3.9 42.5 0 63.5zm-117.6 21.1c59.2-77-28.7-164.9-105.7-105.7-59.2 77 28.7 164.9 105.7 105.7zm243.4 182.7l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0l8.2-14.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zM501.6 431c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.6-82.4 14.3-52.8 52.8z"},child:[]}]})(t)}function jge(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function S0(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z"},child:[]}]})(t)}function O$(t){return nt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function Vge(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function j$(t){return nt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(t)}function Fge(t){return nt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm-64 268c0 10.7-12.9 16-20.5 8.5L104 376H76c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h28l35.5-36.5c7.6-7.6 20.5-2.2 20.5 8.5v136zm33.2-47.6c9.1-9.3 9.1-24.1 0-33.4-22.1-22.8 12.2-56.2 34.4-33.5 27.2 27.9 27.2 72.4 0 100.4-21.8 22.3-56.9-10.4-34.4-33.5zm86-117.1c54.4 55.9 54.4 144.8 0 200.8-21.8 22.4-57-10.3-34.4-33.5 36.2-37.2 36.3-96.5 0-133.8-22.1-22.8 12.3-56.3 34.4-33.5zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(t)}function jP(t){return nt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M384 121.941V128H256V0h6.059c6.365 0 12.47 2.529 16.971 7.029l97.941 97.941A24.005 24.005 0 0 1 384 121.941zM224 136V0H24C10.745 0 0 10.745 0 24v464c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24V160H248c-13.2 0-24-10.8-24-24zm96 144.016v111.963c0 21.445-25.943 31.998-40.971 16.971L224 353.941V392c0 13.255-10.745 24-24 24H88c-13.255 0-24-10.745-24-24V280c0-13.255 10.745-24 24-24h112c13.255 0 24 10.745 24 24v38.059l55.029-55.013c15.011-15.01 40.971-4.491 40.971 16.97z"},child:[]}]})(t)}function $ge(t){return nt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(t)}function Uge(t){return nt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M152.1 236.2c-3.5-12.1-7.8-33.2-7.8-33.2h-.5s-4.3 21.1-7.8 33.2l-11.1 37.5H163zM616 96H336v320h280c13.3 0 24-10.7 24-24V120c0-13.3-10.7-24-24-24zm-24 120c0 6.6-5.4 12-12 12h-11.4c-6.9 23.6-21.7 47.4-42.7 69.9 8.4 6.4 17.1 12.5 26.1 18 5.5 3.4 7.3 10.5 4.1 16.2l-7.9 13.9c-3.4 5.9-10.9 7.8-16.7 4.3-12.6-7.8-24.5-16.1-35.4-24.9-10.9 8.7-22.7 17.1-35.4 24.9-5.8 3.5-13.3 1.6-16.7-4.3l-7.9-13.9c-3.2-5.6-1.4-12.8 4.2-16.2 9.3-5.7 18-11.7 26.1-18-7.9-8.4-14.9-17-21-25.7-4-5.7-2.2-13.6 3.7-17.1l6.5-3.9 7.3-4.3c5.4-3.2 12.4-1.7 16 3.4 5 7 10.8 14 17.4 20.9 13.5-14.2 23.8-28.9 30-43.2H412c-6.6 0-12-5.4-12-12v-16c0-6.6 5.4-12 12-12h64v-16c0-6.6 5.4-12 12-12h16c6.6 0 12 5.4 12 12v16h64c6.6 0 12 5.4 12 12zM0 120v272c0 13.3 10.7 24 24 24h280V96H24c-13.3 0-24 10.7-24 24zm58.9 216.1L116.4 167c1.7-4.9 6.2-8.1 11.4-8.1h32.5c5.1 0 9.7 3.3 11.4 8.1l57.5 169.1c2.6 7.8-3.1 15.9-11.4 15.9h-22.9a12 12 0 0 1-11.5-8.6l-9.4-31.9h-60.2l-9.1 31.8c-1.5 5.1-6.2 8.7-11.5 8.7H70.3c-8.2 0-14-8.1-11.4-15.9z"},child:[]}]})(t)}function Bge(t){return nt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M12.41 148.02l232.94 105.67c6.8 3.09 14.49 3.09 21.29 0l232.94-105.67c16.55-7.51 16.55-32.52 0-40.03L266.65 2.31a25.607 25.607 0 0 0-21.29 0L12.41 107.98c-16.55 7.51-16.55 32.53 0 40.04zm487.18 88.28l-58.09-26.33-161.64 73.27c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.51 209.97l-58.1 26.33c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 276.3c16.55-7.5 16.55-32.5 0-40zm0 127.8l-57.87-26.23-161.86 73.37c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.29 337.87 12.41 364.1c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 404.1c16.55-7.5 16.55-32.5 0-40z"},child:[]}]})(t)}function zge(t){return nt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 0c-69.59 0-126 56.41-126 126 0 56.26 82.35 158.8 113.9 196.02 6.39 7.54 17.82 7.54 24.2 0C331.65 284.8 414 182.26 414 126 414 56.41 357.59 0 288 0zm0 168c-23.2 0-42-18.8-42-42s18.8-42 42-42 42 18.8 42 42-18.8 42-42 42zM20.12 215.95A32.006 32.006 0 0 0 0 245.66v250.32c0 11.32 11.43 19.06 21.94 14.86L160 448V214.92c-8.84-15.98-16.07-31.54-21.25-46.42L20.12 215.95zM288 359.67c-14.07 0-27.38-6.18-36.51-16.96-19.66-23.2-40.57-49.62-59.49-76.72v182l192 64V266c-18.92 27.09-39.82 53.52-59.49 76.72-9.13 10.77-22.44 16.95-36.51 16.95zm266.06-198.51L416 224v288l139.88-55.95A31.996 31.996 0 0 0 576 426.34V176.02c0-11.32-11.43-19.06-21.94-14.86z"},child:[]}]})(t)}function qge(t){return nt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"},child:[]}]})(t)}function p2(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"},child:[]}]})(t)}function Hge(t){return nt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z"},child:[]}]})(t)}function da(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(t)}function cI(t){return nt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"},child:[]}]})(t)}function V$(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function VP(t){return nt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"},child:[]}]})(t)}function T0(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(t)}function Wge(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M64 468V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12v176.4l195.5-181C352.1 22.3 384 36.6 384 64v384c0 27.4-31.9 41.7-52.5 24.6L136 292.7V468c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12z"},child:[]}]})(t)}function Gge(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M384 44v424c0 6.6-5.4 12-12 12h-48c-6.6 0-12-5.4-12-12V291.6l-195.5 181C95.9 489.7 64 475.4 64 448V64c0-27.4 31.9-41.7 52.5-24.6L312 219.3V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12z"},child:[]}]})(t)}function Kge(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function Yge(t){return nt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64v-96h160v96zm0-160H64v-96h160v96zm224 160H288v-96h160v96zm0-160H288v-96h160v96z"},child:[]}]})(t)}function Xge(t){return nt({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function dI(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function F$(t){return nt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function Qge(t){return nt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"},child:[]}]})(t)}function FP(t){return nt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M476 480H324a36 36 0 0 1-36-36V96h-96v156a36 36 0 0 1-36 36H16a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h112V68a36 36 0 0 1 36-36h152a36 36 0 0 1 36 36v348h96V260a36 36 0 0 1 36-36h140a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H512v156a36 36 0 0 1-36 36z"},child:[]}]})(t)}function Jge(t){return nt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"},child:[]}]})(t)}function Zge(t){return nt({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z"},child:[]}]})(t)}function hI(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var I0,$P;function eve(){if($P)return I0;$P=1;function t(){this.__data__=[],this.size=0}return I0=t,I0}var C0,UP;function Gu(){if(UP)return C0;UP=1;function t(e,r){return e===r||e!==e&&r!==r}return C0=t,C0}var k0,BP;function Ev(){if(BP)return k0;BP=1;var t=Gu();function e(r,i){for(var s=r.length;s--;)if(t(r[s][0],i))return s;return-1}return k0=e,k0}var N0,zP;function tve(){if(zP)return N0;zP=1;var t=Ev(),e=Array.prototype,r=e.splice;function i(s){var a=this.__data__,o=t(a,s);if(o<0)return!1;var l=a.length-1;return o==l?a.pop():r.call(a,o,1),--this.size,!0}return N0=i,N0}var A0,qP;function nve(){if(qP)return A0;qP=1;var t=Ev();function e(r){var i=this.__data__,s=t(i,r);return s<0?void 0:i[s][1]}return A0=e,A0}var R0,HP;function rve(){if(HP)return R0;HP=1;var t=Ev();function e(r){return t(this.__data__,r)>-1}return R0=e,R0}var P0,WP;function ive(){if(WP)return P0;WP=1;var t=Ev();function e(r,i){var s=this.__data__,a=t(s,r);return a<0?(++this.size,s.push([r,i])):s[a][1]=i,this}return P0=e,P0}var D0,GP;function Sv(){if(GP)return D0;GP=1;var t=eve(),e=tve(),r=nve(),i=rve(),s=ive();function a(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var c=o[l];this.set(c[0],c[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=i,a.prototype.set=s,D0=a,D0}var M0,KP;function sve(){if(KP)return M0;KP=1;var t=Sv();function e(){this.__data__=new t,this.size=0}return M0=e,M0}var L0,YP;function ave(){if(YP)return L0;YP=1;function t(e){var r=this.__data__,i=r.delete(e);return this.size=r.size,i}return L0=t,L0}var O0,XP;function ove(){if(XP)return O0;XP=1;function t(e){return this.__data__.get(e)}return O0=t,O0}var j0,QP;function lve(){if(QP)return j0;QP=1;function t(e){return this.__data__.has(e)}return j0=t,j0}var V0,JP;function $h(){if(JP)return V0;JP=1;var t=Go,e=jr,r="[object AsyncFunction]",i="[object Function]",s="[object GeneratorFunction]",a="[object Proxy]";function o(l){if(!e(l))return!1;var u=t(l);return u==i||u==s||u==r||u==a}return V0=o,V0}var F0,ZP;function uve(){if(ZP)return F0;ZP=1;var t=wi,e=t["__core-js_shared__"];return F0=e,F0}var $0,e4;function cve(){if(e4)return $0;e4=1;var t=uve(),e=function(){var i=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function r(i){return!!e&&e in i}return $0=r,$0}var U0,t4;function $$(){if(t4)return U0;t4=1;var t=Function.prototype,e=t.toString;function r(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return U0=r,U0}var B0,n4;function dve(){if(n4)return B0;n4=1;var t=$h(),e=cve(),r=jr,i=$$(),s=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,u=o.toString,c=l.hasOwnProperty,d=RegExp("^"+u.call(c).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(f){if(!r(f)||e(f))return!1;var m=t(f)?d:a;return m.test(i(f))}return B0=h,B0}var z0,r4;function hve(){if(r4)return z0;r4=1;function t(e,r){return e==null?void 0:e[r]}return z0=t,z0}var q0,i4;function Xo(){if(i4)return q0;i4=1;var t=dve(),e=hve();function r(i,s){var a=e(i,s);return t(a)?a:void 0}return q0=r,q0}var H0,s4;function fI(){if(s4)return H0;s4=1;var t=Xo(),e=wi,r=t(e,"Map");return H0=r,H0}var W0,a4;function Tv(){if(a4)return W0;a4=1;var t=Xo(),e=t(Object,"create");return W0=e,W0}var G0,o4;function fve(){if(o4)return G0;o4=1;var t=Tv();function e(){this.__data__=t?t(null):{},this.size=0}return G0=e,G0}var K0,l4;function pve(){if(l4)return K0;l4=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return K0=t,K0}var Y0,u4;function mve(){if(u4)return Y0;u4=1;var t=Tv(),e="__lodash_hash_undefined__",r=Object.prototype,i=r.hasOwnProperty;function s(a){var o=this.__data__;if(t){var l=o[a];return l===e?void 0:l}return i.call(o,a)?o[a]:void 0}return Y0=s,Y0}var X0,c4;function gve(){if(c4)return X0;c4=1;var t=Tv(),e=Object.prototype,r=e.hasOwnProperty;function i(s){var a=this.__data__;return t?a[s]!==void 0:r.call(a,s)}return X0=i,X0}var Q0,d4;function vve(){if(d4)return Q0;d4=1;var t=Tv(),e="__lodash_hash_undefined__";function r(i,s){var a=this.__data__;return this.size+=this.has(i)?0:1,a[i]=t&&s===void 0?e:s,this}return Q0=r,Q0}var J0,h4;function yve(){if(h4)return J0;h4=1;var t=fve(),e=pve(),r=mve(),i=gve(),s=vve();function a(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var c=o[l];this.set(c[0],c[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=i,a.prototype.set=s,J0=a,J0}var Z0,f4;function _ve(){if(f4)return Z0;f4=1;var t=yve(),e=Sv(),r=fI();function i(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return Z0=i,Z0}var e_,p4;function wve(){if(p4)return e_;p4=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return e_=t,e_}var t_,m4;function Iv(){if(m4)return t_;m4=1;var t=wve();function e(r,i){var s=r.__data__;return t(i)?s[typeof i=="string"?"string":"hash"]:s.map}return t_=e,t_}var n_,g4;function bve(){if(g4)return n_;g4=1;var t=Iv();function e(r){var i=t(this,r).delete(r);return this.size-=i?1:0,i}return n_=e,n_}var r_,v4;function xve(){if(v4)return r_;v4=1;var t=Iv();function e(r){return t(this,r).get(r)}return r_=e,r_}var i_,y4;function Eve(){if(y4)return i_;y4=1;var t=Iv();function e(r){return t(this,r).has(r)}return i_=e,i_}var s_,_4;function Sve(){if(_4)return s_;_4=1;var t=Iv();function e(r,i){var s=t(this,r),a=s.size;return s.set(r,i),this.size+=s.size==a?0:1,this}return s_=e,s_}var a_,w4;function pI(){if(w4)return a_;w4=1;var t=_ve(),e=bve(),r=xve(),i=Eve(),s=Sve();function a(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var c=o[l];this.set(c[0],c[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=i,a.prototype.set=s,a_=a,a_}var o_,b4;function Tve(){if(b4)return o_;b4=1;var t=Sv(),e=fI(),r=pI(),i=200;function s(a,o){var l=this.__data__;if(l instanceof t){var u=l.__data__;if(!e||u.length<i-1)return u.push([a,o]),this.size=++l.size,this;l=this.__data__=new r(u)}return l.set(a,o),this.size=l.size,this}return o_=s,o_}var l_,x4;function Cv(){if(x4)return l_;x4=1;var t=Sv(),e=sve(),r=ave(),i=ove(),s=lve(),a=Tve();function o(l){var u=this.__data__=new t(l);this.size=u.size}return o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=i,o.prototype.has=s,o.prototype.set=a,l_=o,l_}var u_,E4;function mI(){if(E4)return u_;E4=1;function t(e,r){for(var i=-1,s=e==null?0:e.length;++i<s&&r(e[i],i,e)!==!1;);return e}return u_=t,u_}var c_,S4;function U$(){if(S4)return c_;S4=1;var t=Xo(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return c_=e,c_}var d_,T4;function kv(){if(T4)return d_;T4=1;var t=U$();function e(r,i,s){i=="__proto__"&&t?t(r,i,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[i]=s}return d_=e,d_}var h_,I4;function Nv(){if(I4)return h_;I4=1;var t=kv(),e=Gu(),r=Object.prototype,i=r.hasOwnProperty;function s(a,o,l){var u=a[o];(!(i.call(a,o)&&e(u,l))||l===void 0&&!(o in a))&&t(a,o,l)}return h_=s,h_}var f_,C4;function Uh(){if(C4)return f_;C4=1;var t=Nv(),e=kv();function r(i,s,a,o){var l=!a;a||(a={});for(var u=-1,c=s.length;++u<c;){var d=s[u],h=o?o(a[d],i[d],d,a,i):void 0;h===void 0&&(h=i[d]),l?e(a,d,h):t(a,d,h)}return a}return f_=r,f_}var p_,k4;function Ive(){if(k4)return p_;k4=1;function t(e,r){for(var i=-1,s=Array(e);++i<e;)s[i]=r(i);return s}return p_=t,p_}var m_,N4;function Cve(){if(N4)return m_;N4=1;var t=Go,e=Gi,r="[object Arguments]";function i(s){return e(s)&&t(s)==r}return m_=i,m_}var g_,A4;function Bh(){if(A4)return g_;A4=1;var t=Cve(),e=Gi,r=Object.prototype,i=r.hasOwnProperty,s=r.propertyIsEnumerable,a=t(function(){return arguments}())?t:function(o){return e(o)&&i.call(o,"callee")&&!s.call(o,"callee")};return g_=a,g_}var v_,R4;function ln(){if(R4)return v_;R4=1;var t=Array.isArray;return v_=t,v_}var Uc={exports:{}},y_,P4;function kve(){if(P4)return y_;P4=1;function t(){return!1}return y_=t,y_}Uc.exports;var D4;function Ku(){return D4||(D4=1,function(t,e){var r=wi,i=kve(),s=e&&!e.nodeType&&e,a=s&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===s,l=o?r.Buffer:void 0,u=l?l.isBuffer:void 0,c=u||i;t.exports=c}(Uc,Uc.exports)),Uc.exports}var __,M4;function Av(){if(M4)return __;M4=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(i,s){var a=typeof i;return s=s??t,!!s&&(a=="number"||a!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<s}return __=r,__}var w_,L4;function gI(){if(L4)return w_;L4=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return w_=e,w_}var b_,O4;function Nve(){if(O4)return b_;O4=1;var t=Go,e=gI(),r=Gi,i="[object Arguments]",s="[object Array]",a="[object Boolean]",o="[object Date]",l="[object Error]",u="[object Function]",c="[object Map]",d="[object Number]",h="[object Object]",f="[object RegExp]",m="[object Set]",v="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",_="[object DataView]",w="[object Float32Array]",E="[object Float64Array]",N="[object Int8Array]",M="[object Int16Array]",O="[object Int32Array]",A="[object Uint8Array]",D="[object Uint8ClampedArray]",T="[object Uint16Array]",I="[object Uint32Array]",x={};x[w]=x[E]=x[N]=x[M]=x[O]=x[A]=x[D]=x[T]=x[I]=!0,x[i]=x[s]=x[b]=x[a]=x[_]=x[o]=x[l]=x[u]=x[c]=x[d]=x[h]=x[f]=x[m]=x[v]=x[y]=!1;function R(P){return r(P)&&e(P.length)&&!!x[t(P)]}return b_=R,b_}var x_,j4;function Rv(){if(j4)return x_;j4=1;function t(e){return function(r){return e(r)}}return x_=t,x_}var Bc={exports:{}};Bc.exports;var V4;function vI(){return V4||(V4=1,function(t,e){var r=iV,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,o=a&&r.process,l=function(){try{var u=s&&s.require&&s.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l}(Bc,Bc.exports)),Bc.exports}var E_,F4;function zh(){if(F4)return E_;F4=1;var t=Nve(),e=Rv(),r=vI(),i=r&&r.isTypedArray,s=i?e(i):t;return E_=s,E_}var S_,$4;function B$(){if($4)return S_;$4=1;var t=Ive(),e=Bh(),r=ln(),i=Ku(),s=Av(),a=zh(),o=Object.prototype,l=o.hasOwnProperty;function u(c,d){var h=r(c),f=!h&&e(c),m=!h&&!f&&i(c),v=!h&&!f&&!m&&a(c),y=h||f||m||v,b=y?t(c.length,String):[],_=b.length;for(var w in c)(d||l.call(c,w))&&!(y&&(w=="length"||m&&(w=="offset"||w=="parent")||v&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||s(w,_)))&&b.push(w);return b}return S_=u,S_}var T_,U4;function Pv(){if(U4)return T_;U4=1;var t=Object.prototype;function e(r){var i=r&&r.constructor,s=typeof i=="function"&&i.prototype||t;return r===s}return T_=e,T_}var I_,B4;function z$(){if(B4)return I_;B4=1;function t(e,r){return function(i){return e(r(i))}}return I_=t,I_}var C_,z4;function Ave(){if(z4)return C_;z4=1;var t=z$(),e=t(Object.keys,Object);return C_=e,C_}var k_,q4;function yI(){if(q4)return k_;q4=1;var t=Pv(),e=Ave(),r=Object.prototype,i=r.hasOwnProperty;function s(a){if(!t(a))return e(a);var o=[];for(var l in Object(a))i.call(a,l)&&l!="constructor"&&o.push(l);return o}return k_=s,k_}var N_,H4;function Os(){if(H4)return N_;H4=1;var t=$h(),e=gI();function r(i){return i!=null&&e(i.length)&&!t(i)}return N_=r,N_}var A_,W4;function Ya(){if(W4)return A_;W4=1;var t=B$(),e=yI(),r=Os();function i(s){return r(s)?t(s):e(s)}return A_=i,A_}var R_,G4;function Rve(){if(G4)return R_;G4=1;var t=Uh(),e=Ya();function r(i,s){return i&&t(s,e(s),i)}return R_=r,R_}var P_,K4;function Pve(){if(K4)return P_;K4=1;function t(e){var r=[];if(e!=null)for(var i in Object(e))r.push(i);return r}return P_=t,P_}var D_,Y4;function Dve(){if(Y4)return D_;Y4=1;var t=jr,e=Pv(),r=Pve(),i=Object.prototype,s=i.hasOwnProperty;function a(o){if(!t(o))return r(o);var l=e(o),u=[];for(var c in o)c=="constructor"&&(l||!s.call(o,c))||u.push(c);return u}return D_=a,D_}var M_,X4;function Qo(){if(X4)return M_;X4=1;var t=B$(),e=Dve(),r=Os();function i(s){return r(s)?t(s,!0):e(s)}return M_=i,M_}var L_,Q4;function Mve(){if(Q4)return L_;Q4=1;var t=Uh(),e=Qo();function r(i,s){return i&&t(s,e(s),i)}return L_=r,L_}var zc={exports:{}};zc.exports;var J4;function q$(){return J4||(J4=1,function(t,e){var r=wi,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,o=a?r.Buffer:void 0,l=o?o.allocUnsafe:void 0;function u(c,d){if(d)return c.slice();var h=c.length,f=l?l(h):new c.constructor(h);return c.copy(f),f}t.exports=u}(zc,zc.exports)),zc.exports}var O_,Z4;function H$(){if(Z4)return O_;Z4=1;function t(e,r){var i=-1,s=e.length;for(r||(r=Array(s));++i<s;)r[i]=e[i];return r}return O_=t,O_}var j_,eD;function W$(){if(eD)return j_;eD=1;function t(e,r){for(var i=-1,s=e==null?0:e.length,a=0,o=[];++i<s;){var l=e[i];r(l,i,e)&&(o[a++]=l)}return o}return j_=t,j_}var V_,tD;function G$(){if(tD)return V_;tD=1;function t(){return[]}return V_=t,V_}var F_,nD;function _I(){if(nD)return F_;nD=1;var t=W$(),e=G$(),r=Object.prototype,i=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(o){return o==null?[]:(o=Object(o),t(s(o),function(l){return i.call(o,l)}))}:e;return F_=a,F_}var $_,rD;function Lve(){if(rD)return $_;rD=1;var t=Uh(),e=_I();function r(i,s){return t(i,e(i),s)}return $_=r,$_}var U_,iD;function wI(){if(iD)return U_;iD=1;function t(e,r){for(var i=-1,s=r.length,a=e.length;++i<s;)e[a+i]=r[i];return e}return U_=t,U_}var B_,sD;function Dv(){if(sD)return B_;sD=1;var t=z$(),e=t(Object.getPrototypeOf,Object);return B_=e,B_}var z_,aD;function K$(){if(aD)return z_;aD=1;var t=wI(),e=Dv(),r=_I(),i=G$(),s=Object.getOwnPropertySymbols,a=s?function(o){for(var l=[];o;)t(l,r(o)),o=e(o);return l}:i;return z_=a,z_}var q_,oD;function Ove(){if(oD)return q_;oD=1;var t=Uh(),e=K$();function r(i,s){return t(i,e(i),s)}return q_=r,q_}var H_,lD;function Y$(){if(lD)return H_;lD=1;var t=wI(),e=ln();function r(i,s,a){var o=s(i);return e(i)?o:t(o,a(i))}return H_=r,H_}var W_,uD;function X$(){if(uD)return W_;uD=1;var t=Y$(),e=_I(),r=Ya();function i(s){return t(s,r,e)}return W_=i,W_}var G_,cD;function jve(){if(cD)return G_;cD=1;var t=Y$(),e=K$(),r=Qo();function i(s){return t(s,r,e)}return G_=i,G_}var K_,dD;function Vve(){if(dD)return K_;dD=1;var t=Xo(),e=wi,r=t(e,"DataView");return K_=r,K_}var Y_,hD;function Fve(){if(hD)return Y_;hD=1;var t=Xo(),e=wi,r=t(e,"Promise");return Y_=r,Y_}var X_,fD;function Q$(){if(fD)return X_;fD=1;var t=Xo(),e=wi,r=t(e,"Set");return X_=r,X_}var Q_,pD;function $ve(){if(pD)return Q_;pD=1;var t=Xo(),e=wi,r=t(e,"WeakMap");return Q_=r,Q_}var J_,mD;function Yu(){if(mD)return J_;mD=1;var t=Vve(),e=fI(),r=Fve(),i=Q$(),s=$ve(),a=Go,o=$$(),l="[object Map]",u="[object Object]",c="[object Promise]",d="[object Set]",h="[object WeakMap]",f="[object DataView]",m=o(t),v=o(e),y=o(r),b=o(i),_=o(s),w=a;return(t&&w(new t(new ArrayBuffer(1)))!=f||e&&w(new e)!=l||r&&w(r.resolve())!=c||i&&w(new i)!=d||s&&w(new s)!=h)&&(w=function(E){var N=a(E),M=N==u?E.constructor:void 0,O=M?o(M):"";if(O)switch(O){case m:return f;case v:return l;case y:return c;case b:return d;case _:return h}return N}),J_=w,J_}var Z_,gD;function Uve(){if(gD)return Z_;gD=1;var t=Object.prototype,e=t.hasOwnProperty;function r(i){var s=i.length,a=new i.constructor(s);return s&&typeof i[0]=="string"&&e.call(i,"index")&&(a.index=i.index,a.input=i.input),a}return Z_=r,Z_}var ew,vD;function J$(){if(vD)return ew;vD=1;var t=wi,e=t.Uint8Array;return ew=e,ew}var tw,yD;function bI(){if(yD)return tw;yD=1;var t=J$();function e(r){var i=new r.constructor(r.byteLength);return new t(i).set(new t(r)),i}return tw=e,tw}var nw,_D;function Bve(){if(_D)return nw;_D=1;var t=bI();function e(r,i){var s=i?t(r.buffer):r.buffer;return new r.constructor(s,r.byteOffset,r.byteLength)}return nw=e,nw}var rw,wD;function zve(){if(wD)return rw;wD=1;var t=/\w*$/;function e(r){var i=new r.constructor(r.source,t.exec(r));return i.lastIndex=r.lastIndex,i}return rw=e,rw}var iw,bD;function qve(){if(bD)return iw;bD=1;var t=$u,e=t?t.prototype:void 0,r=e?e.valueOf:void 0;function i(s){return r?Object(r.call(s)):{}}return iw=i,iw}var sw,xD;function Z$(){if(xD)return sw;xD=1;var t=bI();function e(r,i){var s=i?t(r.buffer):r.buffer;return new r.constructor(s,r.byteOffset,r.length)}return sw=e,sw}var aw,ED;function Hve(){if(ED)return aw;ED=1;var t=bI(),e=Bve(),r=zve(),i=qve(),s=Z$(),a="[object Boolean]",o="[object Date]",l="[object Map]",u="[object Number]",c="[object RegExp]",d="[object Set]",h="[object String]",f="[object Symbol]",m="[object ArrayBuffer]",v="[object DataView]",y="[object Float32Array]",b="[object Float64Array]",_="[object Int8Array]",w="[object Int16Array]",E="[object Int32Array]",N="[object Uint8Array]",M="[object Uint8ClampedArray]",O="[object Uint16Array]",A="[object Uint32Array]";function D(T,I,x){var R=T.constructor;switch(I){case m:return t(T);case a:case o:return new R(+T);case v:return e(T,x);case y:case b:case _:case w:case E:case N:case M:case O:case A:return s(T,x);case l:return new R;case u:case h:return new R(T);case c:return r(T);case d:return new R;case f:return i(T)}}return aw=D,aw}var ow,SD;function eU(){if(SD)return ow;SD=1;var t=jr,e=Object.create,r=function(){function i(){}return function(s){if(!t(s))return{};if(e)return e(s);i.prototype=s;var a=new i;return i.prototype=void 0,a}}();return ow=r,ow}var lw,TD;function tU(){if(TD)return lw;TD=1;var t=eU(),e=Dv(),r=Pv();function i(s){return typeof s.constructor=="function"&&!r(s)?t(e(s)):{}}return lw=i,lw}var uw,ID;function Wve(){if(ID)return uw;ID=1;var t=Yu(),e=Gi,r="[object Map]";function i(s){return e(s)&&t(s)==r}return uw=i,uw}var cw,CD;function Gve(){if(CD)return cw;CD=1;var t=Wve(),e=Rv(),r=vI(),i=r&&r.isMap,s=i?e(i):t;return cw=s,cw}var dw,kD;function Kve(){if(kD)return dw;kD=1;var t=Yu(),e=Gi,r="[object Set]";function i(s){return e(s)&&t(s)==r}return dw=i,dw}var hw,ND;function Yve(){if(ND)return hw;ND=1;var t=Kve(),e=Rv(),r=vI(),i=r&&r.isSet,s=i?e(i):t;return hw=s,hw}var fw,AD;function nU(){if(AD)return fw;AD=1;var t=Cv(),e=mI(),r=Nv(),i=Rve(),s=Mve(),a=q$(),o=H$(),l=Lve(),u=Ove(),c=X$(),d=jve(),h=Yu(),f=Uve(),m=Hve(),v=tU(),y=ln(),b=Ku(),_=Gve(),w=jr,E=Yve(),N=Ya(),M=Qo(),O=1,A=2,D=4,T="[object Arguments]",I="[object Array]",x="[object Boolean]",R="[object Date]",P="[object Error]",j="[object Function]",$="[object GeneratorFunction]",U="[object Map]",Y="[object Number]",q="[object Object]",F="[object RegExp]",W="[object Set]",Q="[object String]",H="[object Symbol]",X="[object WeakMap]",J="[object ArrayBuffer]",ee="[object DataView]",se="[object Float32Array]",ce="[object Float64Array]",Se="[object Int8Array]",Ee="[object Int16Array]",ie="[object Int32Array]",ue="[object Uint8Array]",ge="[object Uint8ClampedArray]",ke="[object Uint16Array]",Re="[object Uint32Array]",_e={};_e[T]=_e[I]=_e[J]=_e[ee]=_e[x]=_e[R]=_e[se]=_e[ce]=_e[Se]=_e[Ee]=_e[ie]=_e[U]=_e[Y]=_e[q]=_e[F]=_e[W]=_e[Q]=_e[H]=_e[ue]=_e[ge]=_e[ke]=_e[Re]=!0,_e[P]=_e[j]=_e[X]=!1;function V(B,G,K,re,le,he){var ye,Ie=G&O,Be=G&A,Oe=G&D;if(K&&(ye=le?K(B,re,le,he):K(B)),ye!==void 0)return ye;if(!w(B))return B;var ze=y(B);if(ze){if(ye=f(B),!Ie)return o(B,ye)}else{var lt=h(B),vt=lt==j||lt==$;if(b(B))return a(B,Ie);if(lt==q||lt==T||vt&&!le){if(ye=Be||vt?{}:v(B),!Ie)return Be?u(B,s(ye,B)):l(B,i(ye,B))}else{if(!_e[lt])return le?B:{};ye=m(B,lt,Ie)}}he||(he=new t);var At=he.get(B);if(At)return At;he.set(B,ye),E(B)?B.forEach(function(oe){ye.add(V(oe,G,K,oe,B,he))}):_(B)&&B.forEach(function(oe,pe){ye.set(pe,V(oe,G,K,pe,B,he))});var Ke=Oe?Be?d:c:Be?M:N,Ne=ze?void 0:Ke(B);return e(Ne||B,function(oe,pe){Ne&&(pe=oe,oe=B[pe]),r(ye,pe,V(oe,G,K,pe,B,he))}),ye}return fw=V,fw}var pw,RD;function Xve(){if(RD)return pw;RD=1;var t=nU(),e=4;function r(i){return t(i,e)}return pw=r,pw}var mw,PD;function xI(){if(PD)return mw;PD=1;function t(e){return function(){return e}}return mw=t,mw}var gw,DD;function Qve(){if(DD)return gw;DD=1;function t(e){return function(r,i,s){for(var a=-1,o=Object(r),l=s(r),u=l.length;u--;){var c=l[e?u:++a];if(i(o[c],c,o)===!1)break}return r}}return gw=t,gw}var vw,MD;function EI(){if(MD)return vw;MD=1;var t=Qve(),e=t();return vw=e,vw}var yw,LD;function SI(){if(LD)return yw;LD=1;var t=EI(),e=Ya();function r(i,s){return i&&t(i,s,e)}return yw=r,yw}var _w,OD;function Jve(){if(OD)return _w;OD=1;var t=Os();function e(r,i){return function(s,a){if(s==null)return s;if(!t(s))return r(s,a);for(var o=s.length,l=i?o:-1,u=Object(s);(i?l--:++l<o)&&a(u[l],l,u)!==!1;);return s}}return _w=e,_w}var ww,jD;function Mv(){if(jD)return ww;jD=1;var t=SI(),e=Jve(),r=e(t);return ww=r,ww}var bw,VD;function Jo(){if(VD)return bw;VD=1;function t(e){return e}return bw=t,bw}var xw,FD;function rU(){if(FD)return xw;FD=1;var t=Jo();function e(r){return typeof r=="function"?r:t}return xw=e,xw}var Ew,$D;function iU(){if($D)return Ew;$D=1;var t=mI(),e=Mv(),r=rU(),i=ln();function s(a,o){var l=i(a)?t:e;return l(a,r(o))}return Ew=s,Ew}var Sw,UD;function sU(){return UD||(UD=1,Sw=iU()),Sw}var Tw,BD;function Zve(){if(BD)return Tw;BD=1;var t=Mv();function e(r,i){var s=[];return t(r,function(a,o,l){i(a,o,l)&&s.push(a)}),s}return Tw=e,Tw}var Iw,zD;function eye(){if(zD)return Iw;zD=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return Iw=e,Iw}var Cw,qD;function tye(){if(qD)return Cw;qD=1;function t(e){return this.__data__.has(e)}return Cw=t,Cw}var kw,HD;function aU(){if(HD)return kw;HD=1;var t=pI(),e=eye(),r=tye();function i(s){var a=-1,o=s==null?0:s.length;for(this.__data__=new t;++a<o;)this.add(s[a])}return i.prototype.add=i.prototype.push=e,i.prototype.has=r,kw=i,kw}var Nw,WD;function nye(){if(WD)return Nw;WD=1;function t(e,r){for(var i=-1,s=e==null?0:e.length;++i<s;)if(r(e[i],i,e))return!0;return!1}return Nw=t,Nw}var Aw,GD;function oU(){if(GD)return Aw;GD=1;function t(e,r){return e.has(r)}return Aw=t,Aw}var Rw,KD;function lU(){if(KD)return Rw;KD=1;var t=aU(),e=nye(),r=oU(),i=1,s=2;function a(o,l,u,c,d,h){var f=u&i,m=o.length,v=l.length;if(m!=v&&!(f&&v>m))return!1;var y=h.get(o),b=h.get(l);if(y&&b)return y==l&&b==o;var _=-1,w=!0,E=u&s?new t:void 0;for(h.set(o,l),h.set(l,o);++_<m;){var N=o[_],M=l[_];if(c)var O=f?c(M,N,_,l,o,h):c(N,M,_,o,l,h);if(O!==void 0){if(O)continue;w=!1;break}if(E){if(!e(l,function(A,D){if(!r(E,D)&&(N===A||d(N,A,u,c,h)))return E.push(D)})){w=!1;break}}else if(!(N===M||d(N,M,u,c,h))){w=!1;break}}return h.delete(o),h.delete(l),w}return Rw=a,Rw}var Pw,YD;function rye(){if(YD)return Pw;YD=1;function t(e){var r=-1,i=Array(e.size);return e.forEach(function(s,a){i[++r]=[a,s]}),i}return Pw=t,Pw}var Dw,XD;function TI(){if(XD)return Dw;XD=1;function t(e){var r=-1,i=Array(e.size);return e.forEach(function(s){i[++r]=s}),i}return Dw=t,Dw}var Mw,QD;function iye(){if(QD)return Mw;QD=1;var t=$u,e=J$(),r=Gu(),i=lU(),s=rye(),a=TI(),o=1,l=2,u="[object Boolean]",c="[object Date]",d="[object Error]",h="[object Map]",f="[object Number]",m="[object RegExp]",v="[object Set]",y="[object String]",b="[object Symbol]",_="[object ArrayBuffer]",w="[object DataView]",E=t?t.prototype:void 0,N=E?E.valueOf:void 0;function M(O,A,D,T,I,x,R){switch(D){case w:if(O.byteLength!=A.byteLength||O.byteOffset!=A.byteOffset)return!1;O=O.buffer,A=A.buffer;case _:return!(O.byteLength!=A.byteLength||!x(new e(O),new e(A)));case u:case c:case f:return r(+O,+A);case d:return O.name==A.name&&O.message==A.message;case m:case y:return O==A+"";case h:var P=s;case v:var j=T&o;if(P||(P=a),O.size!=A.size&&!j)return!1;var $=R.get(O);if($)return $==A;T|=l,R.set(O,A);var U=i(P(O),P(A),T,I,x,R);return R.delete(O),U;case b:if(N)return N.call(O)==N.call(A)}return!1}return Mw=M,Mw}var Lw,JD;function sye(){if(JD)return Lw;JD=1;var t=X$(),e=1,r=Object.prototype,i=r.hasOwnProperty;function s(a,o,l,u,c,d){var h=l&e,f=t(a),m=f.length,v=t(o),y=v.length;if(m!=y&&!h)return!1;for(var b=m;b--;){var _=f[b];if(!(h?_ in o:i.call(o,_)))return!1}var w=d.get(a),E=d.get(o);if(w&&E)return w==o&&E==a;var N=!0;d.set(a,o),d.set(o,a);for(var M=h;++b<m;){_=f[b];var O=a[_],A=o[_];if(u)var D=h?u(A,O,_,o,a,d):u(O,A,_,a,o,d);if(!(D===void 0?O===A||c(O,A,l,u,d):D)){N=!1;break}M||(M=_=="constructor")}if(N&&!M){var T=a.constructor,I=o.constructor;T!=I&&"constructor"in a&&"constructor"in o&&!(typeof T=="function"&&T instanceof T&&typeof I=="function"&&I instanceof I)&&(N=!1)}return d.delete(a),d.delete(o),N}return Lw=s,Lw}var Ow,ZD;function aye(){if(ZD)return Ow;ZD=1;var t=Cv(),e=lU(),r=iye(),i=sye(),s=Yu(),a=ln(),o=Ku(),l=zh(),u=1,c="[object Arguments]",d="[object Array]",h="[object Object]",f=Object.prototype,m=f.hasOwnProperty;function v(y,b,_,w,E,N){var M=a(y),O=a(b),A=M?d:s(y),D=O?d:s(b);A=A==c?h:A,D=D==c?h:D;var T=A==h,I=D==h,x=A==D;if(x&&o(y)){if(!o(b))return!1;M=!0,T=!1}if(x&&!T)return N||(N=new t),M||l(y)?e(y,b,_,w,E,N):r(y,b,A,_,w,E,N);if(!(_&u)){var R=T&&m.call(y,"__wrapped__"),P=I&&m.call(b,"__wrapped__");if(R||P){var j=R?y.value():y,$=P?b.value():b;return N||(N=new t),E(j,$,_,w,N)}}return x?(N||(N=new t),i(y,b,_,w,E,N)):!1}return Ow=v,Ow}var jw,eM;function uU(){if(eM)return jw;eM=1;var t=aye(),e=Gi;function r(i,s,a,o,l){return i===s?!0:i==null||s==null||!e(i)&&!e(s)?i!==i&&s!==s:t(i,s,a,o,r,l)}return jw=r,jw}var Vw,tM;function oye(){if(tM)return Vw;tM=1;var t=Cv(),e=uU(),r=1,i=2;function s(a,o,l,u){var c=l.length,d=c,h=!u;if(a==null)return!d;for(a=Object(a);c--;){var f=l[c];if(h&&f[2]?f[1]!==a[f[0]]:!(f[0]in a))return!1}for(;++c<d;){f=l[c];var m=f[0],v=a[m],y=f[1];if(h&&f[2]){if(v===void 0&&!(m in a))return!1}else{var b=new t;if(u)var _=u(v,y,m,a,o,b);if(!(_===void 0?e(y,v,r|i,u,b):_))return!1}}return!0}return Vw=s,Vw}var Fw,nM;function cU(){if(nM)return Fw;nM=1;var t=jr;function e(r){return r===r&&!t(r)}return Fw=e,Fw}var $w,rM;function lye(){if(rM)return $w;rM=1;var t=cU(),e=Ya();function r(i){for(var s=e(i),a=s.length;a--;){var o=s[a],l=i[o];s[a]=[o,l,t(l)]}return s}return $w=r,$w}var Uw,iM;function dU(){if(iM)return Uw;iM=1;function t(e,r){return function(i){return i==null?!1:i[e]===r&&(r!==void 0||e in Object(i))}}return Uw=t,Uw}var Bw,sM;function uye(){if(sM)return Bw;sM=1;var t=oye(),e=lye(),r=dU();function i(s){var a=e(s);return a.length==1&&a[0][2]?r(a[0][0],a[0][1]):function(o){return o===s||t(o,s,a)}}return Bw=i,Bw}var zw,aM;function II(){if(aM)return zw;aM=1;var t=ln(),e=Uu,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function s(a,o){if(t(a))return!1;var l=typeof a;return l=="number"||l=="symbol"||l=="boolean"||a==null||e(a)?!0:i.test(a)||!r.test(a)||o!=null&&a in Object(o)}return zw=s,zw}var qw,oM;function cye(){if(oM)return qw;oM=1;var t=pI(),e="Expected a function";function r(i,s){if(typeof i!="function"||s!=null&&typeof s!="function")throw new TypeError(e);var a=function(){var o=arguments,l=s?s.apply(this,o):o[0],u=a.cache;if(u.has(l))return u.get(l);var c=i.apply(this,o);return a.cache=u.set(l,c)||u,c};return a.cache=new(r.Cache||t),a}return r.Cache=t,qw=r,qw}var Hw,lM;function dye(){if(lM)return Hw;lM=1;var t=cye(),e=500;function r(i){var s=t(i,function(o){return a.size===e&&a.clear(),o}),a=s.cache;return s}return Hw=r,Hw}var Ww,uM;function hye(){if(uM)return Ww;uM=1;var t=dye(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,i=t(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(e,function(o,l,u,c){a.push(u?c.replace(r,"$1"):l||o)}),a});return Ww=i,Ww}var Gw,cM;function Lv(){if(cM)return Gw;cM=1;function t(e,r){for(var i=-1,s=e==null?0:e.length,a=Array(s);++i<s;)a[i]=r(e[i],i,e);return a}return Gw=t,Gw}var Kw,dM;function fye(){if(dM)return Kw;dM=1;var t=$u,e=Lv(),r=ln(),i=Uu,s=t?t.prototype:void 0,a=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return e(l,o)+"";if(i(l))return a?a.call(l):"";var u=l+"";return u=="0"&&1/l==-1/0?"-0":u}return Kw=o,Kw}var Yw,hM;function hU(){if(hM)return Yw;hM=1;var t=fye();function e(r){return r==null?"":t(r)}return Yw=e,Yw}var Xw,fM;function Ov(){if(fM)return Xw;fM=1;var t=ln(),e=II(),r=hye(),i=hU();function s(a,o){return t(a)?a:e(a,o)?[a]:r(i(a))}return Xw=s,Xw}var Qw,pM;function qh(){if(pM)return Qw;pM=1;var t=Uu;function e(r){if(typeof r=="string"||t(r))return r;var i=r+"";return i=="0"&&1/r==-1/0?"-0":i}return Qw=e,Qw}var Jw,mM;function jv(){if(mM)return Jw;mM=1;var t=Ov(),e=qh();function r(i,s){s=t(s,i);for(var a=0,o=s.length;i!=null&&a<o;)i=i[e(s[a++])];return a&&a==o?i:void 0}return Jw=r,Jw}var Zw,gM;function pye(){if(gM)return Zw;gM=1;var t=jv();function e(r,i,s){var a=r==null?void 0:t(r,i);return a===void 0?s:a}return Zw=e,Zw}var eb,vM;function mye(){if(vM)return eb;vM=1;function t(e,r){return e!=null&&r in Object(e)}return eb=t,eb}var tb,yM;function fU(){if(yM)return tb;yM=1;var t=Ov(),e=Bh(),r=ln(),i=Av(),s=gI(),a=qh();function o(l,u,c){u=t(u,l);for(var d=-1,h=u.length,f=!1;++d<h;){var m=a(u[d]);if(!(f=l!=null&&c(l,m)))break;l=l[m]}return f||++d!=h?f:(h=l==null?0:l.length,!!h&&s(h)&&i(m,h)&&(r(l)||e(l)))}return tb=o,tb}var nb,_M;function pU(){if(_M)return nb;_M=1;var t=mye(),e=fU();function r(i,s){return i!=null&&e(i,s,t)}return nb=r,nb}var rb,wM;function gye(){if(wM)return rb;wM=1;var t=uU(),e=pye(),r=pU(),i=II(),s=cU(),a=dU(),o=qh(),l=1,u=2;function c(d,h){return i(d)&&s(h)?a(o(d),h):function(f){var m=e(f,d);return m===void 0&&m===h?r(f,d):t(h,m,l|u)}}return rb=c,rb}var ib,bM;function mU(){if(bM)return ib;bM=1;function t(e){return function(r){return r==null?void 0:r[e]}}return ib=t,ib}var sb,xM;function vye(){if(xM)return sb;xM=1;var t=jv();function e(r){return function(i){return t(i,r)}}return sb=e,sb}var ab,EM;function yye(){if(EM)return ab;EM=1;var t=mU(),e=vye(),r=II(),i=qh();function s(a){return r(a)?t(i(a)):e(a)}return ab=s,ab}var ob,SM;function js(){if(SM)return ob;SM=1;var t=uye(),e=gye(),r=Jo(),i=ln(),s=yye();function a(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?i(o)?e(o[0],o[1]):t(o):s(o)}return ob=a,ob}var lb,TM;function gU(){if(TM)return lb;TM=1;var t=W$(),e=Zve(),r=js(),i=ln();function s(a,o){var l=i(a)?t:e;return l(a,r(o,3))}return lb=s,lb}var ub,IM;function _ye(){if(IM)return ub;IM=1;var t=Object.prototype,e=t.hasOwnProperty;function r(i,s){return i!=null&&e.call(i,s)}return ub=r,ub}var cb,CM;function vU(){if(CM)return cb;CM=1;var t=_ye(),e=fU();function r(i,s){return i!=null&&e(i,s,t)}return cb=r,cb}var db,kM;function wye(){if(kM)return db;kM=1;var t=yI(),e=Yu(),r=Bh(),i=ln(),s=Os(),a=Ku(),o=Pv(),l=zh(),u="[object Map]",c="[object Set]",d=Object.prototype,h=d.hasOwnProperty;function f(m){if(m==null)return!0;if(s(m)&&(i(m)||typeof m=="string"||typeof m.splice=="function"||a(m)||l(m)||r(m)))return!m.length;var v=e(m);if(v==u||v==c)return!m.size;if(o(m))return!t(m).length;for(var y in m)if(h.call(m,y))return!1;return!0}return db=f,db}var hb,NM;function yU(){if(NM)return hb;NM=1;function t(e){return e===void 0}return hb=t,hb}var fb,AM;function _U(){if(AM)return fb;AM=1;var t=Mv(),e=Os();function r(i,s){var a=-1,o=e(i)?Array(i.length):[];return t(i,function(l,u,c){o[++a]=s(l,u,c)}),o}return fb=r,fb}var pb,RM;function wU(){if(RM)return pb;RM=1;var t=Lv(),e=js(),r=_U(),i=ln();function s(a,o){var l=i(a)?t:r;return l(a,e(o,3))}return pb=s,pb}var mb,PM;function bye(){if(PM)return mb;PM=1;function t(e,r,i,s){var a=-1,o=e==null?0:e.length;for(s&&o&&(i=e[++a]);++a<o;)i=r(i,e[a],a,e);return i}return mb=t,mb}var gb,DM;function xye(){if(DM)return gb;DM=1;function t(e,r,i,s,a){return a(e,function(o,l,u){i=s?(s=!1,o):r(i,o,l,u)}),i}return gb=t,gb}var vb,MM;function bU(){if(MM)return vb;MM=1;var t=bye(),e=Mv(),r=js(),i=xye(),s=ln();function a(o,l,u){var c=s(o)?t:i,d=arguments.length<3;return c(o,r(l,4),u,d,e)}return vb=a,vb}var yb,LM;function Eye(){if(LM)return yb;LM=1;var t=Go,e=ln(),r=Gi,i="[object String]";function s(a){return typeof a=="string"||!e(a)&&r(a)&&t(a)==i}return yb=s,yb}var _b,OM;function Sye(){if(OM)return _b;OM=1;var t=mU(),e=t("length");return _b=e,_b}var wb,jM;function Tye(){if(jM)return wb;jM=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",s=e+r+i,a="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+t+s+a+"]");function u(c){return l.test(c)}return wb=u,wb}var bb,VM;function Iye(){if(VM)return bb;VM=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",s=e+r+i,a="\\ufe0e\\ufe0f",o="["+t+"]",l="["+s+"]",u="\\ud83c[\\udffb-\\udfff]",c="(?:"+l+"|"+u+")",d="[^"+t+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",v=c+"?",y="["+a+"]?",b="(?:"+m+"(?:"+[d,h,f].join("|")+")"+y+v+")*",_=y+v+b,w="(?:"+[d+l+"?",l,h,f,o].join("|")+")",E=RegExp(u+"(?="+u+")|"+w+_,"g");function N(M){for(var O=E.lastIndex=0;E.test(M);)++O;return O}return bb=N,bb}var xb,FM;function Cye(){if(FM)return xb;FM=1;var t=Sye(),e=Tye(),r=Iye();function i(s){return e(s)?r(s):t(s)}return xb=i,xb}var Eb,$M;function kye(){if($M)return Eb;$M=1;var t=yI(),e=Yu(),r=Os(),i=Eye(),s=Cye(),a="[object Map]",o="[object Set]";function l(u){if(u==null)return 0;if(r(u))return i(u)?s(u):u.length;var c=e(u);return c==a||c==o?u.size:t(u).length}return Eb=l,Eb}var Sb,UM;function Nye(){if(UM)return Sb;UM=1;var t=mI(),e=eU(),r=SI(),i=js(),s=Dv(),a=ln(),o=Ku(),l=$h(),u=jr,c=zh();function d(h,f,m){var v=a(h),y=v||o(h)||c(h);if(f=i(f,4),m==null){var b=h&&h.constructor;y?m=v?new b:[]:u(h)?m=l(b)?e(s(h)):{}:m={}}return(y?t:r)(h,function(_,w,E){return f(m,_,w,E)}),m}return Sb=d,Sb}var Tb,BM;function Aye(){if(BM)return Tb;BM=1;var t=$u,e=Bh(),r=ln(),i=t?t.isConcatSpreadable:void 0;function s(a){return r(a)||e(a)||!!(i&&a&&a[i])}return Tb=s,Tb}var Ib,zM;function CI(){if(zM)return Ib;zM=1;var t=wI(),e=Aye();function r(i,s,a,o,l){var u=-1,c=i.length;for(a||(a=e),l||(l=[]);++u<c;){var d=i[u];s>0&&a(d)?s>1?r(d,s-1,a,o,l):t(l,d):o||(l[l.length]=d)}return l}return Ib=r,Ib}var Cb,qM;function Rye(){if(qM)return Cb;qM=1;function t(e,r,i){switch(i.length){case 0:return e.call(r);case 1:return e.call(r,i[0]);case 2:return e.call(r,i[0],i[1]);case 3:return e.call(r,i[0],i[1],i[2])}return e.apply(r,i)}return Cb=t,Cb}var kb,HM;function xU(){if(HM)return kb;HM=1;var t=Rye(),e=Math.max;function r(i,s,a){return s=e(s===void 0?i.length-1:s,0),function(){for(var o=arguments,l=-1,u=e(o.length-s,0),c=Array(u);++l<u;)c[l]=o[s+l];l=-1;for(var d=Array(s+1);++l<s;)d[l]=o[l];return d[s]=a(c),t(i,this,d)}}return kb=r,kb}var Nb,WM;function Pye(){if(WM)return Nb;WM=1;var t=xI(),e=U$(),r=Jo(),i=e?function(s,a){return e(s,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:r;return Nb=i,Nb}var Ab,GM;function Dye(){if(GM)return Ab;GM=1;var t=800,e=16,r=Date.now;function i(s){var a=0,o=0;return function(){var l=r(),u=e-(l-o);if(o=l,u>0){if(++a>=t)return arguments[0]}else a=0;return s.apply(void 0,arguments)}}return Ab=i,Ab}var Rb,KM;function EU(){if(KM)return Rb;KM=1;var t=Pye(),e=Dye(),r=e(t);return Rb=r,Rb}var Pb,YM;function Vv(){if(YM)return Pb;YM=1;var t=Jo(),e=xU(),r=EU();function i(s,a){return r(e(s,a,t),s+"")}return Pb=i,Pb}var Db,XM;function SU(){if(XM)return Db;XM=1;function t(e,r,i,s){for(var a=e.length,o=i+(s?1:-1);s?o--:++o<a;)if(r(e[o],o,e))return o;return-1}return Db=t,Db}var Mb,QM;function Mye(){if(QM)return Mb;QM=1;function t(e){return e!==e}return Mb=t,Mb}var Lb,JM;function Lye(){if(JM)return Lb;JM=1;function t(e,r,i){for(var s=i-1,a=e.length;++s<a;)if(e[s]===r)return s;return-1}return Lb=t,Lb}var Ob,ZM;function Oye(){if(ZM)return Ob;ZM=1;var t=SU(),e=Mye(),r=Lye();function i(s,a,o){return a===a?r(s,a,o):t(s,e,o)}return Ob=i,Ob}var jb,e3;function jye(){if(e3)return jb;e3=1;var t=Oye();function e(r,i){var s=r==null?0:r.length;return!!s&&t(r,i,0)>-1}return jb=e,jb}var Vb,t3;function Vye(){if(t3)return Vb;t3=1;function t(e,r,i){for(var s=-1,a=e==null?0:e.length;++s<a;)if(i(r,e[s]))return!0;return!1}return Vb=t,Vb}var Fb,n3;function Fye(){if(n3)return Fb;n3=1;function t(){}return Fb=t,Fb}var $b,r3;function $ye(){if(r3)return $b;r3=1;var t=Q$(),e=Fye(),r=TI(),i=1/0,s=t&&1/r(new t([,-0]))[1]==i?function(a){return new t(a)}:e;return $b=s,$b}var Ub,i3;function Uye(){if(i3)return Ub;i3=1;var t=aU(),e=jye(),r=Vye(),i=oU(),s=$ye(),a=TI(),o=200;function l(u,c,d){var h=-1,f=e,m=u.length,v=!0,y=[],b=y;if(d)v=!1,f=r;else if(m>=o){var _=c?null:s(u);if(_)return a(_);v=!1,f=i,b=new t}else b=c?[]:y;e:for(;++h<m;){var w=u[h],E=c?c(w):w;if(w=d||w!==0?w:0,v&&E===E){for(var N=b.length;N--;)if(b[N]===E)continue e;c&&b.push(E),y.push(w)}else f(b,E,d)||(b!==y&&b.push(E),y.push(w))}return y}return Ub=l,Ub}var Bb,s3;function TU(){if(s3)return Bb;s3=1;var t=Os(),e=Gi;function r(i){return e(i)&&t(i)}return Bb=r,Bb}var zb,a3;function Bye(){if(a3)return zb;a3=1;var t=CI(),e=Vv(),r=Uye(),i=TU(),s=e(function(a){return r(t(a,1,i,!0))});return zb=s,zb}var qb,o3;function zye(){if(o3)return qb;o3=1;var t=Lv();function e(r,i){return t(i,function(s){return r[s]})}return qb=e,qb}var Hb,l3;function IU(){if(l3)return Hb;l3=1;var t=zye(),e=Ya();function r(i){return i==null?[]:t(i,e(i))}return Hb=r,Hb}var Wb,u3;function ni(){if(u3)return Wb;u3=1;var t;if(typeof hI=="function")try{t={clone:Xve(),constant:xI(),each:sU(),filter:gU(),has:vU(),isArray:ln(),isEmpty:wye(),isFunction:$h(),isUndefined:yU(),keys:Ya(),map:wU(),reduce:bU(),size:kye(),transform:Nye(),union:Bye(),values:IU()}}catch{}return t||(t=window._),Wb=t,Wb}var Gb,c3;function kI(){if(c3)return Gb;c3=1;var t=ni();Gb=s;var e="\0",r="\0",i="";function s(d){this._isDirected=t.has(d,"directed")?d.directed:!0,this._isMultigraph=t.has(d,"multigraph")?d.multigraph:!1,this._isCompound=t.has(d,"compound")?d.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}s.prototype._nodeCount=0,s.prototype._edgeCount=0,s.prototype.isDirected=function(){return this._isDirected},s.prototype.isMultigraph=function(){return this._isMultigraph},s.prototype.isCompound=function(){return this._isCompound},s.prototype.setGraph=function(d){return this._label=d,this},s.prototype.graph=function(){return this._label},s.prototype.setDefaultNodeLabel=function(d){return t.isFunction(d)||(d=t.constant(d)),this._defaultNodeLabelFn=d,this},s.prototype.nodeCount=function(){return this._nodeCount},s.prototype.nodes=function(){return t.keys(this._nodes)},s.prototype.sources=function(){var d=this;return t.filter(this.nodes(),function(h){return t.isEmpty(d._in[h])})},s.prototype.sinks=function(){var d=this;return t.filter(this.nodes(),function(h){return t.isEmpty(d._out[h])})},s.prototype.setNodes=function(d,h){var f=arguments,m=this;return t.each(d,function(v){f.length>1?m.setNode(v,h):m.setNode(v)}),this},s.prototype.setNode=function(d,h){return t.has(this._nodes,d)?(arguments.length>1&&(this._nodes[d]=h),this):(this._nodes[d]=arguments.length>1?h:this._defaultNodeLabelFn(d),this._isCompound&&(this._parent[d]=r,this._children[d]={},this._children[r][d]=!0),this._in[d]={},this._preds[d]={},this._out[d]={},this._sucs[d]={},++this._nodeCount,this)},s.prototype.node=function(d){return this._nodes[d]},s.prototype.hasNode=function(d){return t.has(this._nodes,d)},s.prototype.removeNode=function(d){var h=this;if(t.has(this._nodes,d)){var f=function(m){h.removeEdge(h._edgeObjs[m])};delete this._nodes[d],this._isCompound&&(this._removeFromParentsChildList(d),delete this._parent[d],t.each(this.children(d),function(m){h.setParent(m)}),delete this._children[d]),t.each(t.keys(this._in[d]),f),delete this._in[d],delete this._preds[d],t.each(t.keys(this._out[d]),f),delete this._out[d],delete this._sucs[d],--this._nodeCount}return this},s.prototype.setParent=function(d,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(h))h=r;else{h+="";for(var f=h;!t.isUndefined(f);f=this.parent(f))if(f===d)throw new Error("Setting "+h+" as parent of "+d+" would create a cycle");this.setNode(h)}return this.setNode(d),this._removeFromParentsChildList(d),this._parent[d]=h,this._children[h][d]=!0,this},s.prototype._removeFromParentsChildList=function(d){delete this._children[this._parent[d]][d]},s.prototype.parent=function(d){if(this._isCompound){var h=this._parent[d];if(h!==r)return h}},s.prototype.children=function(d){if(t.isUndefined(d)&&(d=r),this._isCompound){var h=this._children[d];if(h)return t.keys(h)}else{if(d===r)return this.nodes();if(this.hasNode(d))return[]}},s.prototype.predecessors=function(d){var h=this._preds[d];if(h)return t.keys(h)},s.prototype.successors=function(d){var h=this._sucs[d];if(h)return t.keys(h)},s.prototype.neighbors=function(d){var h=this.predecessors(d);if(h)return t.union(h,this.successors(d))},s.prototype.isLeaf=function(d){var h;return this.isDirected()?h=this.successors(d):h=this.neighbors(d),h.length===0},s.prototype.filterNodes=function(d){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var f=this;t.each(this._nodes,function(y,b){d(b)&&h.setNode(b,y)}),t.each(this._edgeObjs,function(y){h.hasNode(y.v)&&h.hasNode(y.w)&&h.setEdge(y,f.edge(y))});var m={};function v(y){var b=f.parent(y);return b===void 0||h.hasNode(b)?(m[y]=b,b):b in m?m[b]:v(b)}return this._isCompound&&t.each(h.nodes(),function(y){h.setParent(y,v(y))}),h},s.prototype.setDefaultEdgeLabel=function(d){return t.isFunction(d)||(d=t.constant(d)),this._defaultEdgeLabelFn=d,this},s.prototype.edgeCount=function(){return this._edgeCount},s.prototype.edges=function(){return t.values(this._edgeObjs)},s.prototype.setPath=function(d,h){var f=this,m=arguments;return t.reduce(d,function(v,y){return m.length>1?f.setEdge(v,y,h):f.setEdge(v,y),y}),this},s.prototype.setEdge=function(){var d,h,f,m,v=!1,y=arguments[0];typeof y=="object"&&y!==null&&"v"in y?(d=y.v,h=y.w,f=y.name,arguments.length===2&&(m=arguments[1],v=!0)):(d=y,h=arguments[1],f=arguments[3],arguments.length>2&&(m=arguments[2],v=!0)),d=""+d,h=""+h,t.isUndefined(f)||(f=""+f);var b=l(this._isDirected,d,h,f);if(t.has(this._edgeLabels,b))return v&&(this._edgeLabels[b]=m),this;if(!t.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(d),this.setNode(h),this._edgeLabels[b]=v?m:this._defaultEdgeLabelFn(d,h,f);var _=u(this._isDirected,d,h,f);return d=_.v,h=_.w,Object.freeze(_),this._edgeObjs[b]=_,a(this._preds[h],d),a(this._sucs[d],h),this._in[h][b]=_,this._out[d][b]=_,this._edgeCount++,this},s.prototype.edge=function(d,h,f){var m=arguments.length===1?c(this._isDirected,arguments[0]):l(this._isDirected,d,h,f);return this._edgeLabels[m]},s.prototype.hasEdge=function(d,h,f){var m=arguments.length===1?c(this._isDirected,arguments[0]):l(this._isDirected,d,h,f);return t.has(this._edgeLabels,m)},s.prototype.removeEdge=function(d,h,f){var m=arguments.length===1?c(this._isDirected,arguments[0]):l(this._isDirected,d,h,f),v=this._edgeObjs[m];return v&&(d=v.v,h=v.w,delete this._edgeLabels[m],delete this._edgeObjs[m],o(this._preds[h],d),o(this._sucs[d],h),delete this._in[h][m],delete this._out[d][m],this._edgeCount--),this},s.prototype.inEdges=function(d,h){var f=this._in[d];if(f){var m=t.values(f);return h?t.filter(m,function(v){return v.v===h}):m}},s.prototype.outEdges=function(d,h){var f=this._out[d];if(f){var m=t.values(f);return h?t.filter(m,function(v){return v.w===h}):m}},s.prototype.nodeEdges=function(d,h){var f=this.inEdges(d,h);if(f)return f.concat(this.outEdges(d,h))};function a(d,h){d[h]?d[h]++:d[h]=1}function o(d,h){--d[h]||delete d[h]}function l(d,h,f,m){var v=""+h,y=""+f;if(!d&&v>y){var b=v;v=y,y=b}return v+i+y+i+(t.isUndefined(m)?e:m)}function u(d,h,f,m){var v=""+h,y=""+f;if(!d&&v>y){var b=v;v=y,y=b}var _={v,w:y};return m&&(_.name=m),_}function c(d,h){return l(d,h.v,h.w,h.name)}return Gb}var Kb,d3;function qye(){return d3||(d3=1,Kb="2.1.8"),Kb}var Yb,h3;function Hye(){return h3||(h3=1,Yb={Graph:kI(),version:qye()}),Yb}var Xb,f3;function Wye(){if(f3)return Xb;f3=1;var t=ni(),e=kI();Xb={write:r,read:a};function r(o){var l={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:i(o),edges:s(o)};return t.isUndefined(o.graph())||(l.value=t.clone(o.graph())),l}function i(o){return t.map(o.nodes(),function(l){var u=o.node(l),c=o.parent(l),d={v:l};return t.isUndefined(u)||(d.value=u),t.isUndefined(c)||(d.parent=c),d})}function s(o){return t.map(o.edges(),function(l){var u=o.edge(l),c={v:l.v,w:l.w};return t.isUndefined(l.name)||(c.name=l.name),t.isUndefined(u)||(c.value=u),c})}function a(o){var l=new e(o.options).setGraph(o.value);return t.each(o.nodes,function(u){l.setNode(u.v,u.value),u.parent&&l.setParent(u.v,u.parent)}),t.each(o.edges,function(u){l.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),l}return Xb}var Qb,p3;function Gye(){if(p3)return Qb;p3=1;var t=ni();Qb=e;function e(r){var i={},s=[],a;function o(l){t.has(i,l)||(i[l]=!0,a.push(l),t.each(r.successors(l),o),t.each(r.predecessors(l),o))}return t.each(r.nodes(),function(l){a=[],o(l),a.length&&s.push(a)}),s}return Qb}var Jb,m3;function CU(){if(m3)return Jb;m3=1;var t=ni();Jb=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(r){return r.key})},e.prototype.has=function(r){return t.has(this._keyIndices,r)},e.prototype.priority=function(r){var i=this._keyIndices[r];if(i!==void 0)return this._arr[i].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(r,i){var s=this._keyIndices;if(r=String(r),!t.has(s,r)){var a=this._arr,o=a.length;return s[r]=o,a.push({key:r,priority:i}),this._decrease(o),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},e.prototype.decrease=function(r,i){var s=this._keyIndices[r];if(i>this._arr[s].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[s].priority+" New: "+i);this._arr[s].priority=i,this._decrease(s)},e.prototype._heapify=function(r){var i=this._arr,s=2*r,a=s+1,o=r;s<i.length&&(o=i[s].priority<i[o].priority?s:o,a<i.length&&(o=i[a].priority<i[o].priority?a:o),o!==r&&(this._swap(r,o),this._heapify(o)))},e.prototype._decrease=function(r){for(var i=this._arr,s=i[r].priority,a;r!==0&&(a=r>>1,!(i[a].priority<s));)this._swap(r,a),r=a},e.prototype._swap=function(r,i){var s=this._arr,a=this._keyIndices,o=s[r],l=s[i];s[r]=l,s[i]=o,a[l.key]=r,a[o.key]=i},Jb}var Zb,g3;function kU(){if(g3)return Zb;g3=1;var t=ni(),e=CU();Zb=i;var r=t.constant(1);function i(a,o,l,u){return s(a,String(o),l||r,u||function(c){return a.outEdges(c)})}function s(a,o,l,u){var c={},d=new e,h,f,m=function(v){var y=v.v!==h?v.v:v.w,b=c[y],_=l(v),w=f.distance+_;if(_<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+v+" Weight: "+_);w<b.distance&&(b.distance=w,b.predecessor=h,d.decrease(y,w))};for(a.nodes().forEach(function(v){var y=v===o?0:Number.POSITIVE_INFINITY;c[v]={distance:y},d.add(v,y)});d.size()>0&&(h=d.removeMin(),f=c[h],f.distance!==Number.POSITIVE_INFINITY);)u(h).forEach(m);return c}return Zb}var e1,v3;function Kye(){if(v3)return e1;v3=1;var t=kU(),e=ni();e1=r;function r(i,s,a){return e.transform(i.nodes(),function(o,l){o[l]=t(i,l,s,a)},{})}return e1}var t1,y3;function NU(){if(y3)return t1;y3=1;var t=ni();t1=e;function e(r){var i=0,s=[],a={},o=[];function l(u){var c=a[u]={onStack:!0,lowlink:i,index:i++};if(s.push(u),r.successors(u).forEach(function(f){t.has(a,f)?a[f].onStack&&(c.lowlink=Math.min(c.lowlink,a[f].index)):(l(f),c.lowlink=Math.min(c.lowlink,a[f].lowlink))}),c.lowlink===c.index){var d=[],h;do h=s.pop(),a[h].onStack=!1,d.push(h);while(u!==h);o.push(d)}}return r.nodes().forEach(function(u){t.has(a,u)||l(u)}),o}return t1}var n1,_3;function Yye(){if(_3)return n1;_3=1;var t=ni(),e=NU();n1=r;function r(i){return t.filter(e(i),function(s){return s.length>1||s.length===1&&i.hasEdge(s[0],s[0])})}return n1}var r1,w3;function Xye(){if(w3)return r1;w3=1;var t=ni();r1=r;var e=t.constant(1);function r(s,a,o){return i(s,a||e,o||function(l){return s.outEdges(l)})}function i(s,a,o){var l={},u=s.nodes();return u.forEach(function(c){l[c]={},l[c][c]={distance:0},u.forEach(function(d){c!==d&&(l[c][d]={distance:Number.POSITIVE_INFINITY})}),o(c).forEach(function(d){var h=d.v===c?d.w:d.v,f=a(d);l[c][h]={distance:f,predecessor:c}})}),u.forEach(function(c){var d=l[c];u.forEach(function(h){var f=l[h];u.forEach(function(m){var v=f[c],y=d[m],b=f[m],_=v.distance+y.distance;_<b.distance&&(b.distance=_,b.predecessor=y.predecessor)})})}),l}return r1}var i1,b3;function AU(){if(b3)return i1;b3=1;var t=ni();i1=e,e.CycleException=r;function e(i){var s={},a={},o=[];function l(u){if(t.has(a,u))throw new r;t.has(s,u)||(a[u]=!0,s[u]=!0,t.each(i.predecessors(u),l),delete a[u],o.push(u))}if(t.each(i.sinks(),l),t.size(s)!==i.nodeCount())throw new r;return o}function r(){}return r.prototype=new Error,i1}var s1,x3;function Qye(){if(x3)return s1;x3=1;var t=AU();s1=e;function e(r){try{t(r)}catch(i){if(i instanceof t.CycleException)return!1;throw i}return!0}return s1}var a1,E3;function RU(){if(E3)return a1;E3=1;var t=ni();a1=e;function e(i,s,a){t.isArray(s)||(s=[s]);var o=(i.isDirected()?i.successors:i.neighbors).bind(i),l=[],u={};return t.each(s,function(c){if(!i.hasNode(c))throw new Error("Graph does not have node: "+c);r(i,c,a==="post",u,o,l)}),l}function r(i,s,a,o,l,u){t.has(o,s)||(o[s]=!0,a||u.push(s),t.each(l(s),function(c){r(i,c,a,o,l,u)}),a&&u.push(s))}return a1}var o1,S3;function Jye(){if(S3)return o1;S3=1;var t=RU();o1=e;function e(r,i){return t(r,i,"post")}return o1}var l1,T3;function Zye(){if(T3)return l1;T3=1;var t=RU();l1=e;function e(r,i){return t(r,i,"pre")}return l1}var u1,I3;function e0e(){if(I3)return u1;I3=1;var t=ni(),e=kI(),r=CU();u1=i;function i(s,a){var o=new e,l={},u=new r,c;function d(f){var m=f.v===c?f.w:f.v,v=u.priority(m);if(v!==void 0){var y=a(f);y<v&&(l[m]=c,u.decrease(m,y))}}if(s.nodeCount()===0)return o;t.each(s.nodes(),function(f){u.add(f,Number.POSITIVE_INFINITY),o.setNode(f)}),u.decrease(s.nodes()[0],0);for(var h=!1;u.size()>0;){if(c=u.removeMin(),t.has(l,c))o.setEdge(c,l[c]);else{if(h)throw new Error("Input graph is not connected: "+s);h=!0}s.nodeEdges(c).forEach(d)}return o}return u1}var c1,C3;function t0e(){return C3||(C3=1,c1={components:Gye(),dijkstra:kU(),dijkstraAll:Kye(),findCycles:Yye(),floydWarshall:Xye(),isAcyclic:Qye(),postorder:Jye(),preorder:Zye(),prim:e0e(),tarjan:NU(),topsort:AU()}),c1}var d1,k3;function n0e(){if(k3)return d1;k3=1;var t=Hye();return d1={Graph:t.Graph,json:Wye(),alg:t0e(),version:t.version},d1}var qm;if(typeof hI=="function")try{qm=n0e()}catch{}qm||(qm=window.graphlib);var Ei=qm,h1,N3;function r0e(){if(N3)return h1;N3=1;var t=nU(),e=1,r=4;function i(s){return t(s,e|r)}return h1=i,h1}var f1,A3;function Fv(){if(A3)return f1;A3=1;var t=Gu(),e=Os(),r=Av(),i=jr;function s(a,o,l){if(!i(l))return!1;var u=typeof o;return(u=="number"?e(l)&&r(o,l.length):u=="string"&&o in l)?t(l[o],a):!1}return f1=s,f1}var p1,R3;function i0e(){if(R3)return p1;R3=1;var t=Vv(),e=Gu(),r=Fv(),i=Qo(),s=Object.prototype,a=s.hasOwnProperty,o=t(function(l,u){l=Object(l);var c=-1,d=u.length,h=d>2?u[2]:void 0;for(h&&r(u[0],u[1],h)&&(d=1);++c<d;)for(var f=u[c],m=i(f),v=-1,y=m.length;++v<y;){var b=m[v],_=l[b];(_===void 0||e(_,s[b])&&!a.call(l,b))&&(l[b]=f[b])}return l});return p1=o,p1}var m1,P3;function s0e(){if(P3)return m1;P3=1;var t=js(),e=Os(),r=Ya();function i(s){return function(a,o,l){var u=Object(a);if(!e(a)){var c=t(o,3);a=r(a),o=function(h){return c(u[h],h,u)}}var d=s(a,o,l);return d>-1?u[c?a[d]:d]:void 0}}return m1=i,m1}var g1,D3;function PU(){if(D3)return g1;D3=1;var t=oV,e=1/0,r=17976931348623157e292;function i(s){if(!s)return s===0?s:0;if(s=t(s),s===e||s===-1/0){var a=s<0?-1:1;return a*r}return s===s?s:0}return g1=i,g1}var v1,M3;function a0e(){if(M3)return v1;M3=1;var t=PU();function e(r){var i=t(r),s=i%1;return i===i?s?i-s:i:0}return v1=e,v1}var y1,L3;function o0e(){if(L3)return y1;L3=1;var t=SU(),e=js(),r=a0e(),i=Math.max;function s(a,o,l){var u=a==null?0:a.length;if(!u)return-1;var c=l==null?0:r(l);return c<0&&(c=i(u+c,0)),t(a,e(o,3),c)}return y1=s,y1}var _1,O3;function l0e(){if(O3)return _1;O3=1;var t=s0e(),e=o0e(),r=t(e);return _1=r,_1}var w1,j3;function DU(){if(j3)return w1;j3=1;var t=CI();function e(r){var i=r==null?0:r.length;return i?t(r,1):[]}return w1=e,w1}var b1,V3;function u0e(){if(V3)return b1;V3=1;var t=EI(),e=rU(),r=Qo();function i(s,a){return s==null?s:t(s,e(a),r)}return b1=i,b1}var x1,F3;function c0e(){if(F3)return x1;F3=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return x1=t,x1}var E1,$3;function d0e(){if($3)return E1;$3=1;var t=kv(),e=SI(),r=js();function i(s,a){var o={};return a=r(a,3),e(s,function(l,u,c){t(o,u,a(l,u,c))}),o}return E1=i,E1}var S1,U3;function NI(){if(U3)return S1;U3=1;var t=Uu;function e(r,i,s){for(var a=-1,o=r.length;++a<o;){var l=r[a],u=i(l);if(u!=null&&(c===void 0?u===u&&!t(u):s(u,c)))var c=u,d=l}return d}return S1=e,S1}var T1,B3;function h0e(){if(B3)return T1;B3=1;function t(e,r){return e>r}return T1=t,T1}var I1,z3;function f0e(){if(z3)return I1;z3=1;var t=NI(),e=h0e(),r=Jo();function i(s){return s&&s.length?t(s,r,e):void 0}return I1=i,I1}var C1,q3;function MU(){if(q3)return C1;q3=1;var t=kv(),e=Gu();function r(i,s,a){(a!==void 0&&!e(i[s],a)||a===void 0&&!(s in i))&&t(i,s,a)}return C1=r,C1}var k1,H3;function p0e(){if(H3)return k1;H3=1;var t=Go,e=Dv(),r=Gi,i="[object Object]",s=Function.prototype,a=Object.prototype,o=s.toString,l=a.hasOwnProperty,u=o.call(Object);function c(d){if(!r(d)||t(d)!=i)return!1;var h=e(d);if(h===null)return!0;var f=l.call(h,"constructor")&&h.constructor;return typeof f=="function"&&f instanceof f&&o.call(f)==u}return k1=c,k1}var N1,W3;function LU(){if(W3)return N1;W3=1;function t(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}return N1=t,N1}var A1,G3;function m0e(){if(G3)return A1;G3=1;var t=Uh(),e=Qo();function r(i){return t(i,e(i))}return A1=r,A1}var R1,K3;function g0e(){if(K3)return R1;K3=1;var t=MU(),e=q$(),r=Z$(),i=H$(),s=tU(),a=Bh(),o=ln(),l=TU(),u=Ku(),c=$h(),d=jr,h=p0e(),f=zh(),m=LU(),v=m0e();function y(b,_,w,E,N,M,O){var A=m(b,w),D=m(_,w),T=O.get(D);if(T){t(b,w,T);return}var I=M?M(A,D,w+"",b,_,O):void 0,x=I===void 0;if(x){var R=o(D),P=!R&&u(D),j=!R&&!P&&f(D);I=D,R||P||j?o(A)?I=A:l(A)?I=i(A):P?(x=!1,I=e(D,!0)):j?(x=!1,I=r(D,!0)):I=[]:h(D)||a(D)?(I=A,a(A)?I=v(A):(!d(A)||c(A))&&(I=s(D))):x=!1}x&&(O.set(D,I),N(I,D,E,M,O),O.delete(D)),t(b,w,I)}return R1=y,R1}var P1,Y3;function v0e(){if(Y3)return P1;Y3=1;var t=Cv(),e=MU(),r=EI(),i=g0e(),s=jr,a=Qo(),o=LU();function l(u,c,d,h,f){u!==c&&r(c,function(m,v){if(f||(f=new t),s(m))i(u,c,v,d,l,h,f);else{var y=h?h(o(u,v),m,v+"",u,c,f):void 0;y===void 0&&(y=m),e(u,v,y)}},a)}return P1=l,P1}var D1,X3;function y0e(){if(X3)return D1;X3=1;var t=Vv(),e=Fv();function r(i){return t(function(s,a){var o=-1,l=a.length,u=l>1?a[l-1]:void 0,c=l>2?a[2]:void 0;for(u=i.length>3&&typeof u=="function"?(l--,u):void 0,c&&e(a[0],a[1],c)&&(u=l<3?void 0:u,l=1),s=Object(s);++o<l;){var d=a[o];d&&i(s,d,o,u)}return s})}return D1=r,D1}var M1,Q3;function _0e(){if(Q3)return M1;Q3=1;var t=v0e(),e=y0e(),r=e(function(i,s,a){t(i,s,a)});return M1=r,M1}var L1,J3;function OU(){if(J3)return L1;J3=1;function t(e,r){return e<r}return L1=t,L1}var O1,Z3;function w0e(){if(Z3)return O1;Z3=1;var t=NI(),e=OU(),r=Jo();function i(s){return s&&s.length?t(s,r,e):void 0}return O1=i,O1}var j1,eL;function b0e(){if(eL)return j1;eL=1;var t=NI(),e=js(),r=OU();function i(s,a){return s&&s.length?t(s,e(a,2),r):void 0}return j1=i,j1}var V1,tL;function x0e(){if(tL)return V1;tL=1;var t=Nv(),e=Ov(),r=Av(),i=jr,s=qh();function a(o,l,u,c){if(!i(o))return o;l=e(l,o);for(var d=-1,h=l.length,f=h-1,m=o;m!=null&&++d<h;){var v=s(l[d]),y=u;if(v==="__proto__"||v==="constructor"||v==="prototype")return o;if(d!=f){var b=m[v];y=c?c(b,v,m):void 0,y===void 0&&(y=i(b)?b:r(l[d+1])?[]:{})}t(m,v,y),m=m[v]}return o}return V1=a,V1}var F1,nL;function E0e(){if(nL)return F1;nL=1;var t=jv(),e=x0e(),r=Ov();function i(s,a,o){for(var l=-1,u=a.length,c={};++l<u;){var d=a[l],h=t(s,d);o(h,d)&&e(c,r(d,s),h)}return c}return F1=i,F1}var $1,rL;function S0e(){if(rL)return $1;rL=1;var t=E0e(),e=pU();function r(i,s){return t(i,s,function(a,o){return e(i,o)})}return $1=r,$1}var U1,iL;function T0e(){if(iL)return U1;iL=1;var t=DU(),e=xU(),r=EU();function i(s){return r(e(s,void 0,t),s+"")}return U1=i,U1}var B1,sL;function I0e(){if(sL)return B1;sL=1;var t=S0e(),e=T0e(),r=e(function(i,s){return i==null?{}:t(i,s)});return B1=r,B1}var z1,aL;function C0e(){if(aL)return z1;aL=1;var t=Math.ceil,e=Math.max;function r(i,s,a,o){for(var l=-1,u=e(t((s-i)/(a||1)),0),c=Array(u);u--;)c[o?u:++l]=i,i+=a;return c}return z1=r,z1}var q1,oL;function k0e(){if(oL)return q1;oL=1;var t=C0e(),e=Fv(),r=PU();function i(s){return function(a,o,l){return l&&typeof l!="number"&&e(a,o,l)&&(o=l=void 0),a=r(a),o===void 0?(o=a,a=0):o=r(o),l=l===void 0?a<o?1:-1:r(l),t(a,o,l,s)}}return q1=i,q1}var H1,lL;function N0e(){if(lL)return H1;lL=1;var t=k0e(),e=t();return H1=e,H1}var W1,uL;function A0e(){if(uL)return W1;uL=1;function t(e,r){var i=e.length;for(e.sort(r);i--;)e[i]=e[i].value;return e}return W1=t,W1}var G1,cL;function R0e(){if(cL)return G1;cL=1;var t=Uu;function e(r,i){if(r!==i){var s=r!==void 0,a=r===null,o=r===r,l=t(r),u=i!==void 0,c=i===null,d=i===i,h=t(i);if(!c&&!h&&!l&&r>i||l&&u&&d&&!c&&!h||a&&u&&d||!s&&d||!o)return 1;if(!a&&!l&&!h&&r<i||h&&s&&o&&!a&&!l||c&&s&&o||!u&&o||!d)return-1}return 0}return G1=e,G1}var K1,dL;function P0e(){if(dL)return K1;dL=1;var t=R0e();function e(r,i,s){for(var a=-1,o=r.criteria,l=i.criteria,u=o.length,c=s.length;++a<u;){var d=t(o[a],l[a]);if(d){if(a>=c)return d;var h=s[a];return d*(h=="desc"?-1:1)}}return r.index-i.index}return K1=e,K1}var Y1,hL;function D0e(){if(hL)return Y1;hL=1;var t=Lv(),e=jv(),r=js(),i=_U(),s=A0e(),a=Rv(),o=P0e(),l=Jo(),u=ln();function c(d,h,f){h.length?h=t(h,function(y){return u(y)?function(b){return e(b,y.length===1?y[0]:y)}:y}):h=[l];var m=-1;h=t(h,a(r));var v=i(d,function(y,b,_){var w=t(h,function(E){return E(y)});return{criteria:w,index:++m,value:y}});return s(v,function(y,b){return o(y,b,f)})}return Y1=c,Y1}var X1,fL;function M0e(){if(fL)return X1;fL=1;var t=CI(),e=D0e(),r=Vv(),i=Fv(),s=r(function(a,o){if(a==null)return[];var l=o.length;return l>1&&i(a,o[0],o[1])?o=[]:l>2&&i(o[0],o[1],o[2])&&(o=[o[0]]),e(a,t(o,1),[])});return X1=s,X1}var Q1,pL;function L0e(){if(pL)return Q1;pL=1;var t=hU(),e=0;function r(i){var s=++e;return t(i)+s}return Q1=r,Q1}var J1,mL;function O0e(){if(mL)return J1;mL=1;function t(e,r,i){for(var s=-1,a=e.length,o=r.length,l={};++s<a;){var u=s<o?r[s]:void 0;i(l,e[s],u)}return l}return J1=t,J1}var Z1,gL;function j0e(){if(gL)return Z1;gL=1;var t=Nv(),e=O0e();function r(i,s){return e(i||[],s||[],t)}return Z1=r,Z1}var Hm;if(typeof hI=="function")try{Hm={cloneDeep:r0e(),constant:xI(),defaults:i0e(),each:sU(),filter:gU(),find:l0e(),flatten:DU(),forEach:iU(),forIn:u0e(),has:vU(),isUndefined:yU(),last:c0e(),map:wU(),mapValues:d0e(),max:f0e(),merge:_0e(),min:w0e(),minBy:b0e(),now:sV,pick:I0e(),range:N0e(),reduce:bU(),sortBy:M0e(),uniqueId:L0e(),values:IU(),zipObject:j0e()}}catch{}Hm||(Hm=window._);var Ut=Hm,V0e=$v;function $v(){var t={};t._next=t._prev=t,this._sentinel=t}$v.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return jU(e),e};$v.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&jU(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e};$v.prototype.toString=function(){for(var t=[],e=this._sentinel,r=e._prev;r!==e;)t.push(JSON.stringify(r,F0e)),r=r._prev;return"["+t.join(", ")+"]"};function jU(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function F0e(t,e){if(t!=="_next"&&t!=="_prev")return e}var ds=Ut,$0e=Ei.Graph,U0e=V0e,B0e=q0e,z0e=ds.constant(1);function q0e(t,e){if(t.nodeCount()<=1)return[];var r=W0e(t,e||z0e),i=H0e(r.graph,r.buckets,r.zeroIdx);return ds.flatten(ds.map(i,function(s){return t.outEdges(s.v,s.w)}),!0)}function H0e(t,e,r){for(var i=[],s=e[e.length-1],a=e[0],o;t.nodeCount();){for(;o=a.dequeue();)ex(t,e,r,o);for(;o=s.dequeue();)ex(t,e,r,o);if(t.nodeCount()){for(var l=e.length-2;l>0;--l)if(o=e[l].dequeue(),o){i=i.concat(ex(t,e,r,o,!0));break}}}return i}function ex(t,e,r,i,s){var a=s?[]:void 0;return ds.forEach(t.inEdges(i.v),function(o){var l=t.edge(o),u=t.node(o.v);s&&a.push({v:o.v,w:o.w}),u.out-=l,m2(e,r,u)}),ds.forEach(t.outEdges(i.v),function(o){var l=t.edge(o),u=o.w,c=t.node(u);c.in-=l,m2(e,r,c)}),t.removeNode(i.v),a}function W0e(t,e){var r=new $0e,i=0,s=0;ds.forEach(t.nodes(),function(l){r.setNode(l,{v:l,in:0,out:0})}),ds.forEach(t.edges(),function(l){var u=r.edge(l.v,l.w)||0,c=e(l),d=u+c;r.setEdge(l.v,l.w,d),s=Math.max(s,r.node(l.v).out+=c),i=Math.max(i,r.node(l.w).in+=c)});var a=ds.range(s+i+3).map(function(){return new U0e}),o=i+1;return ds.forEach(r.nodes(),function(l){m2(a,o,r.node(l))}),{graph:r,buckets:a,zeroIdx:o}}function m2(t,e,r){r.out?r.in?t[r.out-r.in+e].enqueue(r):t[t.length-1].enqueue(r):t[0].enqueue(r)}var _o=Ut,G0e=B0e,K0e={run:Y0e,undo:Q0e};function Y0e(t){var e=t.graph().acyclicer==="greedy"?G0e(t,r(t)):X0e(t);_o.forEach(e,function(i){var s=t.edge(i);t.removeEdge(i),s.forwardName=i.name,s.reversed=!0,t.setEdge(i.w,i.v,s,_o.uniqueId("rev"))});function r(i){return function(s){return i.edge(s).weight}}}function X0e(t){var e=[],r={},i={};function s(a){_o.has(i,a)||(i[a]=!0,r[a]=!0,_o.forEach(t.outEdges(a),function(o){_o.has(r,o.w)?e.push(o):s(o.w)}),delete r[a])}return _o.forEach(t.nodes(),s),e}function Q0e(t){_o.forEach(t.edges(),function(e){var r=t.edge(e);if(r.reversed){t.removeEdge(e);var i=r.forwardName;delete r.reversed,delete r.forwardName,t.setEdge(e.w,e.v,r,i)}})}var pt=Ut,VU=Ei.Graph,vr={addDummyNode:FU,simplify:J0e,asNonCompoundGraph:Z0e,successorWeights:e_e,predecessorWeights:t_e,intersectRect:n_e,buildLayerMatrix:r_e,normalizeRanks:i_e,removeEmptyRanks:s_e,addBorderNode:a_e,maxRank:$U,partition:o_e,time:l_e,notime:u_e};function FU(t,e,r,i){var s;do s=pt.uniqueId(i);while(t.hasNode(s));return r.dummy=e,t.setNode(s,r),s}function J0e(t){var e=new VU().setGraph(t.graph());return pt.forEach(t.nodes(),function(r){e.setNode(r,t.node(r))}),pt.forEach(t.edges(),function(r){var i=e.edge(r.v,r.w)||{weight:0,minlen:1},s=t.edge(r);e.setEdge(r.v,r.w,{weight:i.weight+s.weight,minlen:Math.max(i.minlen,s.minlen)})}),e}function Z0e(t){var e=new VU({multigraph:t.isMultigraph()}).setGraph(t.graph());return pt.forEach(t.nodes(),function(r){t.children(r).length||e.setNode(r,t.node(r))}),pt.forEach(t.edges(),function(r){e.setEdge(r,t.edge(r))}),e}function e_e(t){var e=pt.map(t.nodes(),function(r){var i={};return pt.forEach(t.outEdges(r),function(s){i[s.w]=(i[s.w]||0)+t.edge(s).weight}),i});return pt.zipObject(t.nodes(),e)}function t_e(t){var e=pt.map(t.nodes(),function(r){var i={};return pt.forEach(t.inEdges(r),function(s){i[s.v]=(i[s.v]||0)+t.edge(s).weight}),i});return pt.zipObject(t.nodes(),e)}function n_e(t,e){var r=t.x,i=t.y,s=e.x-r,a=e.y-i,o=t.width/2,l=t.height/2;if(!s&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var u,c;return Math.abs(a)*o>Math.abs(s)*l?(a<0&&(l=-l),u=l*s/a,c=l):(s<0&&(o=-o),u=o,c=o*a/s),{x:r+u,y:i+c}}function r_e(t){var e=pt.map(pt.range($U(t)+1),function(){return[]});return pt.forEach(t.nodes(),function(r){var i=t.node(r),s=i.rank;pt.isUndefined(s)||(e[s][i.order]=r)}),e}function i_e(t){var e=pt.min(pt.map(t.nodes(),function(r){return t.node(r).rank}));pt.forEach(t.nodes(),function(r){var i=t.node(r);pt.has(i,"rank")&&(i.rank-=e)})}function s_e(t){var e=pt.min(pt.map(t.nodes(),function(a){return t.node(a).rank})),r=[];pt.forEach(t.nodes(),function(a){var o=t.node(a).rank-e;r[o]||(r[o]=[]),r[o].push(a)});var i=0,s=t.graph().nodeRankFactor;pt.forEach(r,function(a,o){pt.isUndefined(a)&&o%s!==0?--i:i&&pt.forEach(a,function(l){t.node(l).rank+=i})})}function a_e(t,e,r,i){var s={width:0,height:0};return arguments.length>=4&&(s.rank=r,s.order=i),FU(t,"border",s,e)}function $U(t){return pt.max(pt.map(t.nodes(),function(e){var r=t.node(e).rank;if(!pt.isUndefined(r))return r}))}function o_e(t,e){var r={lhs:[],rhs:[]};return pt.forEach(t,function(i){e(i)?r.lhs.push(i):r.rhs.push(i)}),r}function l_e(t,e){var r=pt.now();try{return e()}finally{console.log(t+" time: "+(pt.now()-r)+"ms")}}function u_e(t,e){return e()}var UU=Ut,c_e=vr,d_e={run:h_e,undo:p_e};function h_e(t){t.graph().dummyChains=[],UU.forEach(t.edges(),function(e){f_e(t,e)})}function f_e(t,e){var r=e.v,i=t.node(r).rank,s=e.w,a=t.node(s).rank,o=e.name,l=t.edge(e),u=l.labelRank;if(a!==i+1){t.removeEdge(e);var c,d,h;for(h=0,++i;i<a;++h,++i)l.points=[],d={width:0,height:0,edgeLabel:l,edgeObj:e,rank:i},c=c_e.addDummyNode(t,"edge",d,"_d"),i===u&&(d.width=l.width,d.height=l.height,d.dummy="edge-label",d.labelpos=l.labelpos),t.setEdge(r,c,{weight:l.weight},o),h===0&&t.graph().dummyChains.push(c),r=c;t.setEdge(r,s,{weight:l.weight},o)}}function p_e(t){UU.forEach(t.graph().dummyChains,function(e){var r=t.node(e),i=r.edgeLabel,s;for(t.setEdge(r.edgeObj,i);r.dummy;)s=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=s,r=t.node(e)})}var Kf=Ut,Uv={longestPath:m_e,slack:g_e};function m_e(t){var e={};function r(i){var s=t.node(i);if(Kf.has(e,i))return s.rank;e[i]=!0;var a=Kf.min(Kf.map(t.outEdges(i),function(o){return r(o.w)-t.edge(o).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),s.rank=a}Kf.forEach(t.sources(),r)}function g_e(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}var Wm=Ut,v_e=Ei.Graph,Gm=Uv.slack,BU=y_e;function y_e(t){var e=new v_e({directed:!1}),r=t.nodes()[0],i=t.nodeCount();e.setNode(r,{});for(var s,a;__e(e,t)<i;)s=w_e(e,t),a=e.hasNode(s.v)?Gm(t,s):-Gm(t,s),b_e(e,t,a);return e}function __e(t,e){function r(i){Wm.forEach(e.nodeEdges(i),function(s){var a=s.v,o=i===a?s.w:a;!t.hasNode(o)&&!Gm(e,s)&&(t.setNode(o,{}),t.setEdge(i,o,{}),r(o))})}return Wm.forEach(t.nodes(),r),t.nodeCount()}function w_e(t,e){return Wm.minBy(e.edges(),function(r){if(t.hasNode(r.v)!==t.hasNode(r.w))return Gm(e,r)})}function b_e(t,e,r){Wm.forEach(t.nodes(),function(i){e.node(i).rank+=r})}var As=Ut,x_e=BU,E_e=Uv.slack,S_e=Uv.longestPath,T_e=Ei.alg.preorder,I_e=Ei.alg.postorder,C_e=vr.simplify,k_e=Zo;Zo.initLowLimValues=RI;Zo.initCutValues=AI;Zo.calcCutValue=zU;Zo.leaveEdge=HU;Zo.enterEdge=WU;Zo.exchangeEdges=GU;function Zo(t){t=C_e(t),S_e(t);var e=x_e(t);RI(e),AI(e,t);for(var r,i;r=HU(e);)i=WU(e,t,r),GU(e,t,r,i)}function AI(t,e){var r=I_e(t,t.nodes());r=r.slice(0,r.length-1),As.forEach(r,function(i){N_e(t,e,i)})}function N_e(t,e,r){var i=t.node(r),s=i.parent;t.edge(r,s).cutvalue=zU(t,e,r)}function zU(t,e,r){var i=t.node(r),s=i.parent,a=!0,o=e.edge(r,s),l=0;return o||(a=!1,o=e.edge(s,r)),l=o.weight,As.forEach(e.nodeEdges(r),function(u){var c=u.v===r,d=c?u.w:u.v;if(d!==s){var h=c===a,f=e.edge(u).weight;if(l+=h?f:-f,R_e(t,r,d)){var m=t.edge(r,d).cutvalue;l+=h?-m:m}}}),l}function RI(t,e){arguments.length<2&&(e=t.nodes()[0]),qU(t,{},1,e)}function qU(t,e,r,i,s){var a=r,o=t.node(i);return e[i]=!0,As.forEach(t.neighbors(i),function(l){As.has(e,l)||(r=qU(t,e,r,l,i))}),o.low=a,o.lim=r++,s?o.parent=s:delete o.parent,r}function HU(t){return As.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function WU(t,e,r){var i=r.v,s=r.w;e.hasEdge(i,s)||(i=r.w,s=r.v);var a=t.node(i),o=t.node(s),l=a,u=!1;a.lim>o.lim&&(l=o,u=!0);var c=As.filter(e.edges(),function(d){return u===vL(t,t.node(d.v),l)&&u!==vL(t,t.node(d.w),l)});return As.minBy(c,function(d){return E_e(e,d)})}function GU(t,e,r,i){var s=r.v,a=r.w;t.removeEdge(s,a),t.setEdge(i.v,i.w,{}),RI(t),AI(t,e),A_e(t,e)}function A_e(t,e){var r=As.find(t.nodes(),function(s){return!e.node(s).parent}),i=T_e(t,r);i=i.slice(1),As.forEach(i,function(s){var a=t.node(s).parent,o=e.edge(s,a),l=!1;o||(o=e.edge(a,s),l=!0),e.node(s).rank=e.node(a).rank+(l?o.minlen:-o.minlen)})}function R_e(t,e,r){return t.hasEdge(e,r)}function vL(t,e,r){return r.low<=e.lim&&e.lim<=r.lim}var P_e=Uv,KU=P_e.longestPath,D_e=BU,M_e=k_e,L_e=O_e;function O_e(t){switch(t.graph().ranker){case"network-simplex":yL(t);break;case"tight-tree":V_e(t);break;case"longest-path":j_e(t);break;default:yL(t)}}var j_e=KU;function V_e(t){KU(t),D_e(t)}function yL(t){M_e(t)}var g2=Ut,F_e=$_e;function $_e(t){var e=B_e(t);g2.forEach(t.graph().dummyChains,function(r){for(var i=t.node(r),s=i.edgeObj,a=U_e(t,e,s.v,s.w),o=a.path,l=a.lca,u=0,c=o[u],d=!0;r!==s.w;){if(i=t.node(r),d){for(;(c=o[u])!==l&&t.node(c).maxRank<i.rank;)u++;c===l&&(d=!1)}if(!d){for(;u<o.length-1&&t.node(c=o[u+1]).minRank<=i.rank;)u++;c=o[u]}t.setParent(r,c),r=t.successors(r)[0]}})}function U_e(t,e,r,i){var s=[],a=[],o=Math.min(e[r].low,e[i].low),l=Math.max(e[r].lim,e[i].lim),u,c;u=r;do u=t.parent(u),s.push(u);while(u&&(e[u].low>o||l>e[u].lim));for(c=u,u=i;(u=t.parent(u))!==c;)a.push(u);return{path:s.concat(a.reverse()),lca:c}}function B_e(t){var e={},r=0;function i(s){var a=r;g2.forEach(t.children(s),i),e[s]={low:a,lim:r++}}return g2.forEach(t.children(),i),e}var hs=Ut,v2=vr,z_e={run:q_e,cleanup:G_e};function q_e(t){var e=v2.addDummyNode(t,"root",{},"_root"),r=H_e(t),i=hs.max(hs.values(r))-1,s=2*i+1;t.graph().nestingRoot=e,hs.forEach(t.edges(),function(o){t.edge(o).minlen*=s});var a=W_e(t)+1;hs.forEach(t.children(),function(o){YU(t,e,s,a,i,r,o)}),t.graph().nodeRankFactor=s}function YU(t,e,r,i,s,a,o){var l=t.children(o);if(!l.length){o!==e&&t.setEdge(e,o,{weight:0,minlen:r});return}var u=v2.addBorderNode(t,"_bt"),c=v2.addBorderNode(t,"_bb"),d=t.node(o);t.setParent(u,o),d.borderTop=u,t.setParent(c,o),d.borderBottom=c,hs.forEach(l,function(h){YU(t,e,r,i,s,a,h);var f=t.node(h),m=f.borderTop?f.borderTop:h,v=f.borderBottom?f.borderBottom:h,y=f.borderTop?i:2*i,b=m!==v?1:s-a[o]+1;t.setEdge(u,m,{weight:y,minlen:b,nestingEdge:!0}),t.setEdge(v,c,{weight:y,minlen:b,nestingEdge:!0})}),t.parent(o)||t.setEdge(e,u,{weight:0,minlen:s+a[o]})}function H_e(t){var e={};function r(i,s){var a=t.children(i);a&&a.length&&hs.forEach(a,function(o){r(o,s+1)}),e[i]=s}return hs.forEach(t.children(),function(i){r(i,1)}),e}function W_e(t){return hs.reduce(t.edges(),function(e,r){return e+t.edge(r).weight},0)}function G_e(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,hs.forEach(t.edges(),function(r){var i=t.edge(r);i.nestingEdge&&t.removeEdge(r)})}var tx=Ut,K_e=vr,Y_e=X_e;function X_e(t){function e(r){var i=t.children(r),s=t.node(r);if(i.length&&tx.forEach(i,e),tx.has(s,"minRank")){s.borderLeft=[],s.borderRight=[];for(var a=s.minRank,o=s.maxRank+1;a<o;++a)_L(t,"borderLeft","_bl",r,s,a),_L(t,"borderRight","_br",r,s,a)}}tx.forEach(t.children(),e)}function _L(t,e,r,i,s,a){var o={width:0,height:0,rank:a,borderType:e},l=s[e][a-1],u=K_e.addDummyNode(t,"border",o,r);s[e][a]=u,t.setParent(u,i),l&&t.setEdge(l,u,{weight:1})}var Pi=Ut,Q_e={adjust:J_e,undo:Z_e};function J_e(t){var e=t.graph().rankdir.toLowerCase();(e==="lr"||e==="rl")&&XU(t)}function Z_e(t){var e=t.graph().rankdir.toLowerCase();(e==="bt"||e==="rl")&&ewe(t),(e==="lr"||e==="rl")&&(twe(t),XU(t))}function XU(t){Pi.forEach(t.nodes(),function(e){wL(t.node(e))}),Pi.forEach(t.edges(),function(e){wL(t.edge(e))})}function wL(t){var e=t.width;t.width=t.height,t.height=e}function ewe(t){Pi.forEach(t.nodes(),function(e){nx(t.node(e))}),Pi.forEach(t.edges(),function(e){var r=t.edge(e);Pi.forEach(r.points,nx),Pi.has(r,"y")&&nx(r)})}function nx(t){t.y=-t.y}function twe(t){Pi.forEach(t.nodes(),function(e){rx(t.node(e))}),Pi.forEach(t.edges(),function(e){var r=t.edge(e);Pi.forEach(r.points,rx),Pi.has(r,"x")&&rx(r)})}function rx(t){var e=t.x;t.x=t.y,t.y=e}var ns=Ut,nwe=rwe;function rwe(t){var e={},r=ns.filter(t.nodes(),function(l){return!t.children(l).length}),i=ns.max(ns.map(r,function(l){return t.node(l).rank})),s=ns.map(ns.range(i+1),function(){return[]});function a(l){if(!ns.has(e,l)){e[l]=!0;var u=t.node(l);s[u.rank].push(l),ns.forEach(t.successors(l),a)}}var o=ns.sortBy(r,function(l){return t.node(l).rank});return ns.forEach(o,a),s}var Ks=Ut,iwe=swe;function swe(t,e){for(var r=0,i=1;i<e.length;++i)r+=awe(t,e[i-1],e[i]);return r}function awe(t,e,r){for(var i=Ks.zipObject(r,Ks.map(r,function(c,d){return d})),s=Ks.flatten(Ks.map(e,function(c){return Ks.sortBy(Ks.map(t.outEdges(c),function(d){return{pos:i[d.w],weight:t.edge(d).weight}}),"pos")}),!0),a=1;a<r.length;)a<<=1;var o=2*a-1;a-=1;var l=Ks.map(new Array(o),function(){return 0}),u=0;return Ks.forEach(s.forEach(function(c){var d=c.pos+a;l[d]+=c.weight;for(var h=0;d>0;)d%2&&(h+=l[d+1]),d=d-1>>1,l[d]+=c.weight;u+=c.weight*h})),u}var bL=Ut,owe=lwe;function lwe(t,e){return bL.map(e,function(r){var i=t.inEdges(r);if(i.length){var s=bL.reduce(i,function(a,o){var l=t.edge(o),u=t.node(o.v);return{sum:a.sum+l.weight*u.order,weight:a.weight+l.weight}},{sum:0,weight:0});return{v:r,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:r}})}var Sr=Ut,uwe=cwe;function cwe(t,e){var r={};Sr.forEach(t,function(s,a){var o=r[s.v]={indegree:0,in:[],out:[],vs:[s.v],i:a};Sr.isUndefined(s.barycenter)||(o.barycenter=s.barycenter,o.weight=s.weight)}),Sr.forEach(e.edges(),function(s){var a=r[s.v],o=r[s.w];!Sr.isUndefined(a)&&!Sr.isUndefined(o)&&(o.indegree++,a.out.push(r[s.w]))});var i=Sr.filter(r,function(s){return!s.indegree});return dwe(i)}function dwe(t){var e=[];function r(a){return function(o){o.merged||(Sr.isUndefined(o.barycenter)||Sr.isUndefined(a.barycenter)||o.barycenter>=a.barycenter)&&hwe(a,o)}}function i(a){return function(o){o.in.push(a),--o.indegree===0&&t.push(o)}}for(;t.length;){var s=t.pop();e.push(s),Sr.forEach(s.in.reverse(),r(s)),Sr.forEach(s.out,i(s))}return Sr.map(Sr.filter(e,function(a){return!a.merged}),function(a){return Sr.pick(a,["vs","i","barycenter","weight"])})}function hwe(t,e){var r=0,i=0;t.weight&&(r+=t.barycenter*t.weight,i+=t.weight),e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=r/i,t.weight=i,t.i=Math.min(e.i,t.i),e.merged=!0}var qc=Ut,fwe=vr,pwe=mwe;function mwe(t,e){var r=fwe.partition(t,function(d){return qc.has(d,"barycenter")}),i=r.lhs,s=qc.sortBy(r.rhs,function(d){return-d.i}),a=[],o=0,l=0,u=0;i.sort(gwe(!!e)),u=xL(a,s,u),qc.forEach(i,function(d){u+=d.vs.length,a.push(d.vs),o+=d.barycenter*d.weight,l+=d.weight,u=xL(a,s,u)});var c={vs:qc.flatten(a,!0)};return l&&(c.barycenter=o/l,c.weight=l),c}function xL(t,e,r){for(var i;e.length&&(i=qc.last(e)).i<=r;)e.pop(),t.push(i.vs),r++;return r}function gwe(t){return function(e,r){return e.barycenter<r.barycenter?-1:e.barycenter>r.barycenter?1:t?r.i-e.i:e.i-r.i}}var oa=Ut,vwe=owe,ywe=uwe,_we=pwe,wwe=QU;function QU(t,e,r,i){var s=t.children(e),a=t.node(e),o=a?a.borderLeft:void 0,l=a?a.borderRight:void 0,u={};o&&(s=oa.filter(s,function(v){return v!==o&&v!==l}));var c=vwe(t,s);oa.forEach(c,function(v){if(t.children(v.v).length){var y=QU(t,v.v,r,i);u[v.v]=y,oa.has(y,"barycenter")&&xwe(v,y)}});var d=ywe(c,r);bwe(d,u);var h=_we(d,i);if(o&&(h.vs=oa.flatten([o,h.vs,l],!0),t.predecessors(o).length)){var f=t.node(t.predecessors(o)[0]),m=t.node(t.predecessors(l)[0]);oa.has(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+f.order+m.order)/(h.weight+2),h.weight+=2}return h}function bwe(t,e){oa.forEach(t,function(r){r.vs=oa.flatten(r.vs.map(function(i){return e[i]?e[i].vs:i}),!0)})}function xwe(t,e){oa.isUndefined(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}var Hc=Ut,Ewe=Ei.Graph,Swe=Twe;function Twe(t,e,r){var i=Iwe(t),s=new Ewe({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(a){return t.node(a)});return Hc.forEach(t.nodes(),function(a){var o=t.node(a),l=t.parent(a);(o.rank===e||o.minRank<=e&&e<=o.maxRank)&&(s.setNode(a),s.setParent(a,l||i),Hc.forEach(t[r](a),function(u){var c=u.v===a?u.w:u.v,d=s.edge(c,a),h=Hc.isUndefined(d)?0:d.weight;s.setEdge(c,a,{weight:t.edge(u).weight+h})}),Hc.has(o,"minRank")&&s.setNode(a,{borderLeft:o.borderLeft[e],borderRight:o.borderRight[e]}))}),s}function Iwe(t){for(var e;t.hasNode(e=Hc.uniqueId("_root")););return e}var Cwe=Ut,kwe=Nwe;function Nwe(t,e,r){var i={},s;Cwe.forEach(r,function(a){for(var o=t.parent(a),l,u;o;){if(l=t.parent(o),l?(u=i[l],i[l]=o):(u=s,s=o),u&&u!==o){e.setEdge(u,o);return}o=l}})}var Na=Ut,Awe=nwe,Rwe=iwe,Pwe=wwe,Dwe=Swe,Mwe=kwe,Lwe=Ei.Graph,EL=vr,Owe=jwe;function jwe(t){var e=EL.maxRank(t),r=SL(t,Na.range(1,e+1),"inEdges"),i=SL(t,Na.range(e-1,-1,-1),"outEdges"),s=Awe(t);TL(t,s);for(var a=Number.POSITIVE_INFINITY,o,l=0,u=0;u<4;++l,++u){Vwe(l%2?r:i,l%4>=2),s=EL.buildLayerMatrix(t);var c=Rwe(t,s);c<a&&(u=0,o=Na.cloneDeep(s),a=c)}TL(t,o)}function SL(t,e,r){return Na.map(e,function(i){return Dwe(t,i,r)})}function Vwe(t,e){var r=new Lwe;Na.forEach(t,function(i){var s=i.graph().root,a=Pwe(i,s,r,e);Na.forEach(a.vs,function(o,l){i.node(o).order=l}),Mwe(i,r,a.vs)})}function TL(t,e){Na.forEach(e,function(r){Na.forEach(r,function(i,s){t.node(i).order=s})})}var Ye=Ut,Fwe=Ei.Graph,$we=vr,Uwe={positionX:Jwe};function Bwe(t,e){var r={};function i(s,a){var o=0,l=0,u=s.length,c=Ye.last(a);return Ye.forEach(a,function(d,h){var f=qwe(t,d),m=f?t.node(f).order:u;(f||d===c)&&(Ye.forEach(a.slice(l,h+1),function(v){Ye.forEach(t.predecessors(v),function(y){var b=t.node(y),_=b.order;(_<o||m<_)&&!(b.dummy&&t.node(v).dummy)&&JU(r,y,v)})}),l=h+1,o=m)}),a}return Ye.reduce(e,i),r}function zwe(t,e){var r={};function i(a,o,l,u,c){var d;Ye.forEach(Ye.range(o,l),function(h){d=a[h],t.node(d).dummy&&Ye.forEach(t.predecessors(d),function(f){var m=t.node(f);m.dummy&&(m.order<u||m.order>c)&&JU(r,f,d)})})}function s(a,o){var l=-1,u,c=0;return Ye.forEach(o,function(d,h){if(t.node(d).dummy==="border"){var f=t.predecessors(d);f.length&&(u=t.node(f[0]).order,i(o,c,h,l,u),c=h,l=u)}i(o,c,o.length,u,a.length)}),o}return Ye.reduce(e,s),r}function qwe(t,e){if(t.node(e).dummy)return Ye.find(t.predecessors(e),function(r){return t.node(r).dummy})}function JU(t,e,r){if(e>r){var i=e;e=r,r=i}var s=t[e];s||(t[e]=s={}),s[r]=!0}function Hwe(t,e,r){if(e>r){var i=e;e=r,r=i}return Ye.has(t[e],r)}function Wwe(t,e,r,i){var s={},a={},o={};return Ye.forEach(e,function(l){Ye.forEach(l,function(u,c){s[u]=u,a[u]=u,o[u]=c})}),Ye.forEach(e,function(l){var u=-1;Ye.forEach(l,function(c){var d=i(c);if(d.length){d=Ye.sortBy(d,function(y){return o[y]});for(var h=(d.length-1)/2,f=Math.floor(h),m=Math.ceil(h);f<=m;++f){var v=d[f];a[c]===c&&u<o[v]&&!Hwe(r,c,v)&&(a[v]=c,a[c]=s[c]=s[v],u=o[v])}}})}),{root:s,align:a}}function Gwe(t,e,r,i,s){var a={},o=Kwe(t,e,r,s),l=s?"borderLeft":"borderRight";function u(h,f){for(var m=o.nodes(),v=m.pop(),y={};v;)y[v]?h(v):(y[v]=!0,m.push(v),m=m.concat(f(v))),v=m.pop()}function c(h){a[h]=o.inEdges(h).reduce(function(f,m){return Math.max(f,a[m.v]+o.edge(m))},0)}function d(h){var f=o.outEdges(h).reduce(function(v,y){return Math.min(v,a[y.w]-o.edge(y))},Number.POSITIVE_INFINITY),m=t.node(h);f!==Number.POSITIVE_INFINITY&&m.borderType!==l&&(a[h]=Math.max(a[h],f))}return u(c,o.predecessors.bind(o)),u(d,o.successors.bind(o)),Ye.forEach(i,function(h){a[h]=a[r[h]]}),a}function Kwe(t,e,r,i){var s=new Fwe,a=t.graph(),o=Zwe(a.nodesep,a.edgesep,i);return Ye.forEach(e,function(l){var u;Ye.forEach(l,function(c){var d=r[c];if(s.setNode(d),u){var h=r[u],f=s.edge(h,d);s.setEdge(h,d,Math.max(o(t,c,u),f||0))}u=c})}),s}function Ywe(t,e){return Ye.minBy(Ye.values(e),function(r){var i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;return Ye.forIn(r,function(a,o){var l=ebe(t,o)/2;i=Math.max(a+l,i),s=Math.min(a-l,s)}),i-s})}function Xwe(t,e){var r=Ye.values(e),i=Ye.min(r),s=Ye.max(r);Ye.forEach(["u","d"],function(a){Ye.forEach(["l","r"],function(o){var l=a+o,u=t[l],c;if(u!==e){var d=Ye.values(u);c=o==="l"?i-Ye.min(d):s-Ye.max(d),c&&(t[l]=Ye.mapValues(u,function(h){return h+c}))}})})}function Qwe(t,e){return Ye.mapValues(t.ul,function(r,i){if(e)return t[e.toLowerCase()][i];var s=Ye.sortBy(Ye.map(t,i));return(s[1]+s[2])/2})}function Jwe(t){var e=$we.buildLayerMatrix(t),r=Ye.merge(Bwe(t,e),zwe(t,e)),i={},s;Ye.forEach(["u","d"],function(o){s=o==="u"?e:Ye.values(e).reverse(),Ye.forEach(["l","r"],function(l){l==="r"&&(s=Ye.map(s,function(h){return Ye.values(h).reverse()}));var u=(o==="u"?t.predecessors:t.successors).bind(t),c=Wwe(t,s,r,u),d=Gwe(t,s,c.root,c.align,l==="r");l==="r"&&(d=Ye.mapValues(d,function(h){return-h})),i[o+l]=d})});var a=Ywe(t,i);return Xwe(i,a),Qwe(i,t.graph().align)}function Zwe(t,e,r){return function(i,s,a){var o=i.node(s),l=i.node(a),u=0,c;if(u+=o.width/2,Ye.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":c=-o.width/2;break;case"r":c=o.width/2;break}if(c&&(u+=r?c:-c),c=0,u+=(o.dummy?e:t)/2,u+=(l.dummy?e:t)/2,u+=l.width/2,Ye.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":c=l.width/2;break;case"r":c=-l.width/2;break}return c&&(u+=r?c:-c),c=0,u}}function ebe(t,e){return t.node(e).width}var Wc=Ut,ZU=vr,tbe=Uwe.positionX,nbe=rbe;function rbe(t){t=ZU.asNonCompoundGraph(t),ibe(t),Wc.forEach(tbe(t),function(e,r){t.node(r).x=e})}function ibe(t){var e=ZU.buildLayerMatrix(t),r=t.graph().ranksep,i=0;Wc.forEach(e,function(s){var a=Wc.max(Wc.map(s,function(o){return t.node(o).height}));Wc.forEach(s,function(o){t.node(o).y=i+a/2}),i+=a+r})}var Je=Ut,IL=K0e,CL=d_e,sbe=L_e,abe=vr.normalizeRanks,obe=F_e,lbe=vr.removeEmptyRanks,kL=z_e,ube=Y_e,NL=Q_e,cbe=Owe,dbe=nbe,$a=vr,hbe=Ei.Graph,fbe=pbe;function pbe(t,e){var r=e&&e.debugTiming?$a.time:$a.notime;r("layout",function(){var i=r("  buildLayoutGraph",function(){return Tbe(t)});r("  runLayout",function(){mbe(i,r)}),r("  updateInputGraph",function(){gbe(t,i)})})}function mbe(t,e){e("    makeSpaceForEdgeLabels",function(){Ibe(t)}),e("    removeSelfEdges",function(){Lbe(t)}),e("    acyclic",function(){IL.run(t)}),e("    nestingGraph.run",function(){kL.run(t)}),e("    rank",function(){sbe($a.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){Cbe(t)}),e("    removeEmptyRanks",function(){lbe(t)}),e("    nestingGraph.cleanup",function(){kL.cleanup(t)}),e("    normalizeRanks",function(){abe(t)}),e("    assignRankMinMax",function(){kbe(t)}),e("    removeEdgeLabelProxies",function(){Nbe(t)}),e("    normalize.run",function(){CL.run(t)}),e("    parentDummyChains",function(){obe(t)}),e("    addBorderSegments",function(){ube(t)}),e("    order",function(){cbe(t)}),e("    insertSelfEdges",function(){Obe(t)}),e("    adjustCoordinateSystem",function(){NL.adjust(t)}),e("    position",function(){dbe(t)}),e("    positionSelfEdges",function(){jbe(t)}),e("    removeBorderNodes",function(){Mbe(t)}),e("    normalize.undo",function(){CL.undo(t)}),e("    fixupEdgeLabelCoords",function(){Pbe(t)}),e("    undoCoordinateSystem",function(){NL.undo(t)}),e("    translateGraph",function(){Abe(t)}),e("    assignNodeIntersects",function(){Rbe(t)}),e("    reversePoints",function(){Dbe(t)}),e("    acyclic.undo",function(){IL.undo(t)})}function gbe(t,e){Je.forEach(t.nodes(),function(r){var i=t.node(r),s=e.node(r);i&&(i.x=s.x,i.y=s.y,e.children(r).length&&(i.width=s.width,i.height=s.height))}),Je.forEach(t.edges(),function(r){var i=t.edge(r),s=e.edge(r);i.points=s.points,Je.has(s,"x")&&(i.x=s.x,i.y=s.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}var vbe=["nodesep","edgesep","ranksep","marginx","marginy"],ybe={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},_be=["acyclicer","ranker","rankdir","align"],wbe=["width","height"],bbe={width:0,height:0},xbe=["minlen","weight","width","height","labeloffset"],Ebe={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Sbe=["labelpos"];function Tbe(t){var e=new hbe({multigraph:!0,compound:!0}),r=sx(t.graph());return e.setGraph(Je.merge({},ybe,ix(r,vbe),Je.pick(r,_be))),Je.forEach(t.nodes(),function(i){var s=sx(t.node(i));e.setNode(i,Je.defaults(ix(s,wbe),bbe)),e.setParent(i,t.parent(i))}),Je.forEach(t.edges(),function(i){var s=sx(t.edge(i));e.setEdge(i,Je.merge({},Ebe,ix(s,xbe),Je.pick(s,Sbe)))}),e}function Ibe(t){var e=t.graph();e.ranksep/=2,Je.forEach(t.edges(),function(r){var i=t.edge(r);i.minlen*=2,i.labelpos.toLowerCase()!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?i.width+=i.labeloffset:i.height+=i.labeloffset)})}function Cbe(t){Je.forEach(t.edges(),function(e){var r=t.edge(e);if(r.width&&r.height){var i=t.node(e.v),s=t.node(e.w),a={rank:(s.rank-i.rank)/2+i.rank,e};$a.addDummyNode(t,"edge-proxy",a,"_ep")}})}function kbe(t){var e=0;Je.forEach(t.nodes(),function(r){var i=t.node(r);i.borderTop&&(i.minRank=t.node(i.borderTop).rank,i.maxRank=t.node(i.borderBottom).rank,e=Je.max(e,i.maxRank))}),t.graph().maxRank=e}function Nbe(t){Je.forEach(t.nodes(),function(e){var r=t.node(e);r.dummy==="edge-proxy"&&(t.edge(r.e).labelRank=r.rank,t.removeNode(e))})}function Abe(t){var e=Number.POSITIVE_INFINITY,r=0,i=Number.POSITIVE_INFINITY,s=0,a=t.graph(),o=a.marginx||0,l=a.marginy||0;function u(c){var d=c.x,h=c.y,f=c.width,m=c.height;e=Math.min(e,d-f/2),r=Math.max(r,d+f/2),i=Math.min(i,h-m/2),s=Math.max(s,h+m/2)}Je.forEach(t.nodes(),function(c){u(t.node(c))}),Je.forEach(t.edges(),function(c){var d=t.edge(c);Je.has(d,"x")&&u(d)}),e-=o,i-=l,Je.forEach(t.nodes(),function(c){var d=t.node(c);d.x-=e,d.y-=i}),Je.forEach(t.edges(),function(c){var d=t.edge(c);Je.forEach(d.points,function(h){h.x-=e,h.y-=i}),Je.has(d,"x")&&(d.x-=e),Je.has(d,"y")&&(d.y-=i)}),a.width=r-e+o,a.height=s-i+l}function Rbe(t){Je.forEach(t.edges(),function(e){var r=t.edge(e),i=t.node(e.v),s=t.node(e.w),a,o;r.points?(a=r.points[0],o=r.points[r.points.length-1]):(r.points=[],a=s,o=i),r.points.unshift($a.intersectRect(i,a)),r.points.push($a.intersectRect(s,o))})}function Pbe(t){Je.forEach(t.edges(),function(e){var r=t.edge(e);if(Je.has(r,"x"))switch((r.labelpos==="l"||r.labelpos==="r")&&(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset;break}})}function Dbe(t){Je.forEach(t.edges(),function(e){var r=t.edge(e);r.reversed&&r.points.reverse()})}function Mbe(t){Je.forEach(t.nodes(),function(e){if(t.children(e).length){var r=t.node(e),i=t.node(r.borderTop),s=t.node(r.borderBottom),a=t.node(Je.last(r.borderLeft)),o=t.node(Je.last(r.borderRight));r.width=Math.abs(o.x-a.x),r.height=Math.abs(s.y-i.y),r.x=a.x+r.width/2,r.y=i.y+r.height/2}}),Je.forEach(t.nodes(),function(e){t.node(e).dummy==="border"&&t.removeNode(e)})}function Lbe(t){Je.forEach(t.edges(),function(e){if(e.v===e.w){var r=t.node(e.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}})}function Obe(t){var e=$a.buildLayerMatrix(t);Je.forEach(e,function(r){var i=0;Je.forEach(r,function(s,a){var o=t.node(s);o.order=a+i,Je.forEach(o.selfEdges,function(l){$a.addDummyNode(t,"selfedge",{width:l.label.width,height:l.label.height,rank:o.rank,order:a+ ++i,e:l.e,label:l.label},"_se")}),delete o.selfEdges})})}function jbe(t){Je.forEach(t.nodes(),function(e){var r=t.node(e);if(r.dummy==="selfedge"){var i=t.node(r.e.v),s=i.x+i.width/2,a=i.y,o=r.x-s,l=i.height/2;t.setEdge(r.e,r.label),t.removeNode(e),r.label.points=[{x:s+2*o/3,y:a-l},{x:s+5*o/6,y:a-l},{x:s+o,y:a},{x:s+5*o/6,y:a+l},{x:s+2*o/3,y:a+l}],r.label.x=r.x,r.label.y=r.y}})}function ix(t,e){return Je.mapValues(Je.pick(t,e),Number)}function sx(t){var e={};return Je.forEach(t,function(r,i){e[i.toLowerCase()]=r}),e}var Yf=Ut,Vbe=vr,Fbe=Ei.Graph,$be={debugOrdering:Ube};function Ube(t){var e=Vbe.buildLayerMatrix(t),r=new Fbe({compound:!0,multigraph:!0}).setGraph({});return Yf.forEach(t.nodes(),function(i){r.setNode(i,{label:i}),r.setParent(i,"layer"+t.node(i).rank)}),Yf.forEach(t.edges(),function(i){r.setEdge(i.v,i.w,{},i.name)}),Yf.forEach(e,function(i,s){var a="layer"+s;r.setNode(a,{rank:"same"}),Yf.reduce(i,function(o,l){return r.setEdge(o,l,{style:"invis"}),l})}),r}var Bbe="0.8.5",zbe={graphlib:Ei,layout:fbe,debug:$be,util:{time:vr.time,notime:vr.notime},version:Bbe};const Km=Ua(zbe),eB=(t={})=>{const[e,r]=S.useState(!1),{onNodesChange:i,createNodeFromType:s}=t,a=S.useCallback(c=>{r(!0)},[]),o=S.useCallback(()=>{r(!1)},[]),l=S.useCallback(c=>{c.preventDefault(),c.dataTransfer.dropEffect="move"},[]),u=S.useCallback(c=>{c.preventDefault(),r(!1);try{const d=c.currentTarget.getBoundingClientRect(),h={x:c.clientX-d.left,y:c.clientY-d.top},f=JSON.parse(c.dataTransfer.getData("application/reactflow"));if(!f||!f.type)return;const m=s(f.type,h,f.label);i(v=>[...v,m])}catch(d){console.error("Error handling node drop:",d)}},[s,i]);return{isDragging:e,onDragStart:a,onDragEnd:o,onDragOver:l,onDrop:u}},co={input:{},processing:{},output:{},visualization:{},media:{},other:{}};function Xa(t){const{type:e,category:r="other",component:i,defaults:s={},metadata:a={}}=t;return!e||!i?(console.error("Node plugin must have a type and component"),co):(co[r]?co[r][e]={component:i,defaults:s,metadata:a}:co.other[e]={component:i,defaults:s,metadata:a},PI(),co)}function PI(){const t={};return Object.values(co).forEach(e=>{Object.entries(e).forEach(([r,{component:i}])=>{t[r]=i})}),t}function qbe(t){for(const e of Object.values(co))if(e[t])return e[t].defaults||{};return{}}PI();const tB=(t,e,r,i={})=>{var u,c;const s=qbe(t),a=`${t}-${Date.now()}`;let o=((u=s.style)==null?void 0:u.width)||320;switch(t){case"resultsDisplay":o=560;break;case"metadata":o=420;break;case"videoPlayer":o=420;break;case"keywordBubble":case"mapVisualization":o=450;break}let l;return t==="metadata"&&(l=550),{id:a,type:t,position:e,data:{label:r||((c=s.data)==null?void 0:c.label)||t,...i},style:{width:o,...l?{height:l}:{},...s.style}}},nB=(t,e={})=>{switch(t){case"transcriptInput":return{data:{onTranscriptUpload:e.handleTranscriptUpload,onAudioUpload:e.handleAudioUpload,documentName:e.documentName,onDocumentNameChange:e.setDocumentName,youtubeUrl:e.youtubeUrl,onYoutubeUrlChange:e.setYoutubeUrl,onYoutubeUrlSubmit:e.handleYoutubeUrlSubmit}};case"whisperTranscription":return{data:{onQueueUpdate:e.onQueueUpdate,onProcessMultiple:e.processMultipleTranscripts||e.processTranscript,onSetTranscript:(r,i)=>{e.setTranscript&&e.setTranscript(r),e.setDocumentName&&i&&e.setDocumentName(i)}}};case"promptEditing":return{data:{systemMessage:e.systemMessage,onSystemMessageChange:e.setSystemMessage,onProcess:e.processTranscript,model:e.model,onModelChange:e.setModel,canProcess:!!e.transcript}};case"resultsDisplay":return{type:t,data:{label:"Results Display",documentName:e.documentName||"",summaries:e.summaries||{overallSummary:"",keyPoints:[]},onSummaryChange:e.handleSummaryChange,onKeyPointChange:e.handleKeyPointChange,onAddKeyPoint:e.handleAddKeyPoint,onRemoveKeyPoint:e.handleRemoveKeyPoint,onEditSummary:e.handleEditSummary,onSaveToDatabase:e.handleSaveToDatabase,savingToDatabase:e.savingToDatabase||!1,savedToDatabase:e.savedToDatabase||!1,youtubeEmbedUrl:e.youtubeEmbedUrl||"",openVideoPanel:e.openVideoPanel}};case"videoPlayer":return{data:{youtubeEmbedUrl:e.youtubeEmbedUrl,videoRef:e.videoRef,currentTimestamp:e.currentTimestamp,summaries:e.summaries,onUpdateTimestamp:e.setCurrentTimestamp}};case"metadata":return{data:{documentName:e.documentName,youtubeUrl:e.youtubeUrl,youtubeEmbedUrl:e.youtubeEmbedUrl,summaries:e.summaries,transcript:e.transcript,onSaveToDatabase:e.handleSaveToDatabase,savingToDatabase:e.savingToDatabase,savedToDatabase:e.savedToDatabase}};default:return{data:{}}}};function Hbe({id:t,data:e,isConnectable:r}){const{queuedTranscripts:i=[],onQueueUpdate:s,onProcessMultiple:a}=e,o=S.useRef(null),[l,u]=S.useState(""),[c,d]=S.useState(""),[h,f]=S.useState(null),[m,v]=S.useState(i||[]),[y,b]=S.useState("");S.useEffect(()=>{i&&i.length>0&&v(i)},[i]);const _=M=>{const O=M.target.files[0];O&&f(O)},w=()=>{if(!l.trim()){b("Document name is required");return}if(!h){b("Transcript file is required");return}const M={documentName:l.trim(),youtubeUrl:c.trim(),file:h,id:`transcript-${Date.now()}`},O=[...m,M];v(O),s&&s(O),u(""),d(""),f(null),b(""),o.current&&(o.current.value="")},E=M=>{const O=m.filter(A=>A.id!==M);v(O),s&&s(O)},N=()=>{if(m.length===0){b("No transcripts in queue to process");return}a&&a(m)};return p.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border border-gray-200 w-80",children:[p.jsx("div",{className:"text-lg font-bold mb-2 text-blue-600 border-b pb-2",children:"Transcript Input"}),y&&p.jsx("div",{className:"mb-3 p-2 bg-red-100 text-red-700 text-sm rounded",children:y}),p.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded border border-blue-100",children:[p.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Add New Transcript"}),p.jsxs("div",{className:"mb-2",children:[p.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Document Name *"}),p.jsx("input",{type:"text",value:l,onChange:M=>u(M.target.value),className:"w-full p-2 border rounded text-sm",placeholder:"Enter document name"})]}),p.jsxs("div",{className:"mb-2",children:[p.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"YouTube URL (optional)"}),p.jsx("input",{type:"text",value:c,onChange:M=>d(M.target.value),className:"w-full p-2 border rounded text-sm",placeholder:"Enter YouTube URL"})]}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Transcript File *"}),p.jsxs("div",{className:"flex",children:[p.jsx("input",{ref:o,type:"file",className:"hidden",onChange:_,accept:".txt,.json,.docx,.md"}),p.jsxs("button",{onClick:()=>{var M;return(M=o.current)==null?void 0:M.click()},className:"flex-1 flex items-center justify-center p-2 bg-gray-100 border border-gray-300 rounded text-sm hover:bg-gray-200",children:[p.jsx(F$,{className:"mr-2"}),h?h.name:"Choose File"]})]})]}),p.jsxs("button",{onClick:w,className:"w-full p-2 bg-blue-500 text-white rounded flex items-center justify-center text-sm hover:bg-blue-600",disabled:!l||!h,children:[p.jsx(V$,{className:"mr-2"})," Add to Queue"]})]}),p.jsxs("div",{className:"mb-4",children:[p.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Queued Transcripts (",m.length,")"]}),m.length===0?p.jsx("div",{className:"text-sm text-gray-500 italic",children:"No transcripts in queue"}):p.jsx("div",{className:"max-h-40 overflow-y-auto",children:m.map(M=>p.jsxs("div",{className:"flex items-center justify-between p-2 mb-1 bg-gray-50 rounded border border-gray-200",children:[p.jsxs("div",{className:"overflow-hidden",children:[p.jsx("div",{className:"text-sm font-medium truncate",children:M.documentName}),p.jsx("div",{className:"text-xs text-gray-500 truncate",children:M.file.name})]}),p.jsx("button",{onClick:()=>E(M.id),className:"p-1 text-red-500 hover:text-red-700",title:"Remove from queue",children:p.jsx(dI,{size:14})})]},M.id||`transcript-queue-${Date.now()}-${Math.random()}`))})]}),p.jsxs("button",{onClick:N,className:"w-full p-2 bg-green-500 text-white rounded flex items-center justify-center mb-4 hover:bg-green-600",disabled:m.length===0,children:[p.jsx(da,{className:"mr-2"})," Process All Transcripts"]}),p.jsx(Xn,{type:"source",position:De.Right,id:"transcript-output",style:{background:"#3b82f6",width:12,height:12},isConnectable:r})]})}function Wbe(t){return nt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 15c1.66 0 2.99-1.34 2.99-3L15 6c0-1.66-1.34-3-3-3S9 4.34 9 6v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 15 6.7 12H5c0 3.42 2.72 6.23 6 6.72V22h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"},child:[]}]})(t)}const AL=t=>new Promise((e,r)=>{const i=new FileReader;i.onload=s=>e(s.target.result),i.onerror=s=>r(s),i.readAsText(t)}),rB=async(t,e,r="gpt-4o-mini",i=3,s=2e3)=>{try{const o=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer undefined"},body:JSON.stringify({model:r,messages:[{role:"system",content:e.trim()},{role:"user",content:`Here is a transcript:
${t}

Generate an overall summary, key points with timestamps, and keywords.`}],max_tokens:1e3})});if(!o.ok){if(o.status===429&&i>0)return console.warn(`Rate limit exceeded. Retrying in ${s}ms...`),await new Promise(u=>setTimeout(u,s)),rB(t,e,r,i-1,s*2);throw new Error(`API request failed: ${o.statusText}`)}const l=await o.json();return Gbe(l.choices[0].message.content)}catch(a){throw console.error("Error communicating with OpenAI API:",a),a}},Gbe=t=>{const e=t.match(/Overall Summary:\s*(.+)/i),r=e?e[1].trim():"No summary found.",i=[],s=/\d+\.\s*Title:\s*(.+?)\s*Timestamp:\s*(.+?)\s*Keywords:\s*(.+?)\s*Summary:\s*(.+?)(?=\d+\.|$)/gs;let a;for(;(a=s.exec(t))!==null;)i.push({topic:a[1].trim(),timestamp:a[2].trim(),keywords:a[3].trim(),summary:a[4].trim()});return{overallSummary:r,keyPoints:i}},Kbe=t=>{let e=t;t.includes(" - ")&&(e=t.split(" - ")[0]);let r=0;if(e.split(":").length===3){const[i,s,a]=e.split(":").map(Number);if(i>=0&&s>=0&&a>=0)r=i*3600+s*60+a;else throw new Error("Invalid timestamp components")}else if(e.split(":").length===2){const[i,s]=e.split(":").map(Number);if(i>=0&&s>=0)r=i*60+s;else throw new Error("Invalid timestamp components")}else if(!isNaN(Number(e)))r=Number(e);else throw new Error("Unrecognized timestamp format");return r},Ybe=async(t,e,r)=>{try{const{collection:i,doc:s,setDoc:a}=await bm(async()=>{const{collection:l,doc:u,setDoc:c}=await Promise.resolve().then(()=>AJ);return{collection:l,doc:u,setDoc:c}},void 0),o=s(i(r,"interviewSummaries"),t);await a(o,{documentName:t,mainSummary:e.overallSummary,createdAt:new Date});for(const l of e.keyPoints){const u=l.topic.replace(/[^a-zA-Z0-9-_]/g,"_"),c=s(i(r,"interviewSummaries",t,"subSummaries"),u);await a(c,{topic:l.topic,timestamp:l.timestamp,keywords:l.keywords,summary:l.summary})}}catch(i){throw console.error("Error storing processed transcript:",i),i}};function Xbe({id:t,data:e,isConnectable:r}){const{queuedTranscripts:i=[],onQueueUpdate:s,onProcessMultiple:a,onSetTranscript:o}=e,l=S.useRef(null),u=S.useRef(null),c=S.useRef(null),d=S.useRef(null),h=S.useRef(null),f=S.useRef(null),m=S.useRef(null),v=S.useRef(null),[y,b]=S.useState(""),[_,w]=S.useState(null),[E,N]=S.useState(null),[M,O]=S.useState(""),[A,D]=S.useState(i||[]),[T,I]=S.useState(""),[x,R]=S.useState(!1),[P,j]=S.useState(0),[$,U]=S.useState(""),[Y,q]=S.useState(""),[F,W]=S.useState(""),[Q,H]=S.useState(!1),[X,J]=S.useState(!1),[ee,se]=S.useState(!1),ce=[{code:"",name:"Auto-detect"},{code:"en",name:"English"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"pt",name:"Portuguese"},{code:"nl",name:"Dutch"},{code:"ja",name:"Japanese"},{code:"zh",name:"Chinese"},{code:"ru",name:"Russian"},{code:"ar",name:"Arabic"}];S.useEffect(()=>{i&&i.length>0&&D(i)},[i]),S.useEffect(()=>()=>{M&&URL.revokeObjectURL(M),f.current&&(v.current&&v.current.disconnect(),f.current.close()),h.current&&cancelAnimationFrame(h.current)},[M]);const Se=()=>{if(!(!u.current||!d.current||E!=="audio")){f.current&&(v.current&&v.current.disconnect(),f.current.close());try{const K=window.AudioContext||window.webkitAudioContext,re=new K;f.current=re;const le=re.createAnalyser();le.fftSize=256,m.current=le;const he=re.createMediaElementSource(u.current);v.current=he,he.connect(le),le.connect(re.destination),se(!0),Ee()}catch(K){console.error("Error setting up audio visualizer:",K),se(!1)}}},Ee=()=>{if(!d.current||!m.current||!ee)return;const K=d.current,re=K.getContext("2d"),le=K.width,he=K.height,ye=m.current,Ie=ye.frequencyBinCount,Be=new Uint8Array(Ie);re.clearRect(0,0,le,he);const Oe=()=>{h.current=requestAnimationFrame(Oe),ye.getByteFrequencyData(Be),re.fillStyle="rgb(30, 30, 30)",re.fillRect(0,0,le,he);const ze=le/Ie*2.5;let lt,vt=0;for(let At=0;At<Ie;At++){lt=Be[At]/2;const Ke=At/Ie*360;re.fillStyle=`hsl(${Ke}, 80%, 60%)`,re.fillRect(vt,he-lt,ze,lt),vt+=ze+1}};Oe()},ie=()=>{if(!u.current&&!c.current)return;const K=E==="audio"?u.current:c.current;Q?K.pause():(E==="audio"&&!ee&&Se(),K.play()),H(!Q)};S.useEffect(()=>{const K=()=>H(!0),re=()=>H(!1),le=()=>H(!1),he=u.current,ye=c.current;return he&&(he.addEventListener("play",K),he.addEventListener("pause",re),he.addEventListener("ended",le)),ye&&(ye.addEventListener("play",K),ye.addEventListener("pause",re),ye.addEventListener("ended",le)),()=>{he&&(he.removeEventListener("play",K),he.removeEventListener("pause",re),he.removeEventListener("ended",le)),ye&&(ye.removeEventListener("play",K),ye.removeEventListener("pause",re),ye.removeEventListener("ended",le))}},[u.current,c.current]);const ue=K=>{const re=K.target.files[0];if(!re)return;M&&URL.revokeObjectURL(M),w(re);const le=URL.createObjectURL(re);O(le);const he=re.type.split("/")[0];if(N(he==="video"?"video":"audio"),!y){const ye=re.name.replace(/\.[^/.]+$/,"");b(ye)}I(""),q(""),W(""),H(!1),se(!1),J(!1),h.current&&(cancelAnimationFrame(h.current),h.current=null)},ge=()=>{if(!y.trim()){I("Document name is required");return}if(!_){I("Audio or video file is required");return}const K={documentName:y.trim(),file:_,mediaType:E,mediaUrl:M,language:$,id:`media-${Date.now()}`},re=[...A,K];D(re),s&&s(re),b(""),w(null),N(null),O(""),I(""),q(""),W(""),H(!1),se(!1),J(!1),l.current&&(l.current.value=""),h.current&&(cancelAnimationFrame(h.current),h.current=null)},ke=K=>{const re=A.filter(le=>le.id!==K);D(re),s&&s(re)},Re=S.useRef(null);S.useEffect(()=>{Re.current&&F&&(Re.current.scrollTop=Re.current.scrollHeight)},[F]);const _e=async(K,re)=>{J(!0),W("Starting simulated transcription...");try{await new Promise(Ie=>setTimeout(Ie,800)),W("Preparing demo text..."),await new Promise(Ie=>setTimeout(Ie,1e3));let le="";if(E==="audio"?le="This is a simulated audio transcription. We're using demonstration text instead of the actual Whisper API to avoid costs during development. The Civil Rights Movement was a struggle for social justice that took place mainly during the 1950s and 1960s for Black Americans to gain equal rights under the law in the United States. The Civil War had officially abolished slavery, but it didn't end discrimination against Black people—they continued to endure the devastating effects of racism, especially in the South. By the mid-20th century, Black Americans had had more than enough of prejudice and violence against them. They, along with many White Americans, mobilized and began an unprecedented fight for equality that spanned two decades.":le="This is a simulated video transcription. We're using demonstration text instead of the actual Whisper API to avoid costs during development. The Civil Rights Act of 1964, which ended segregation in public places and banned employment discrimination on the basis of race, color, religion, sex or national origin, is considered one of the crowning legislative achievements of the civil rights movement. First proposed by President John F. Kennedy, it survived strong opposition from southern members of Congress and was then signed into law by Kennedy's successor, Lyndon B. Johnson. In subsequent years, Congress expanded the act and passed additional civil rights legislation such as the Voting Rights Act of 1965.",re){const Ie={es:"Traducción simulada en español: ",fr:"Traduction simulée en français: ",de:"Simulierte Übersetzung auf Deutsch: ",it:"Traduzione simulata in italiano: ",ja:"日本語でのシミュレーション翻訳: ",zh:"模拟中文翻译: ",ru:"Симуляция перевода на русский: "}[re]||"";Ie&&(le=Ie+le.substring(0,100))}W("DEMO MODE: "),await new Promise(Ie=>setTimeout(Ie,500));const he=le.match(/[^.!?]+[.!?]+/g)||[le];let ye="DEMO MODE: ";for(let Ie=0;Ie<he.length;Ie++){const Oe=he[Ie].trim().split(/\s+/);for(let ze=0;ze<Oe.length;ze++){ze===0&&Ie>0&&await new Promise(vt=>setTimeout(vt,300+Math.random()*200)),ye+=(ze>0?" ":"")+Oe[ze],W(ye);const lt=Math.floor(ye.length/(le.length+11)*100);j(lt),await new Promise(vt=>setTimeout(vt,30+Math.random()*100))}Ie<he.length-1&&await new Promise(ze=>setTimeout(ze,150+Math.random()*150))}return le}catch(le){throw console.error("Simulation error:",le),W(`Error during simulation: ${le.message||"Unknown error"}`),le}},V=async()=>{if(!_){I("Please select an audio or video file to transcribe");return}try{R(!0),j(0),I(""),W(""),q(""),J(!0);const K=E==="audio"?u.current:c.current;K&&(E==="audio"&&!ee&&Se(),K.currentTime=0,K.play(),H(!0));const le=await _e(_,$||null);j(100),q(le),o&&o(le,y)}catch(K){console.error("Transcription error:",K),I(`Transcription failed: ${K.message}`),W("")}finally{R(!1)}},B=()=>{const K=E==="audio"?u.current:c.current;K&&(K.pause(),H(!1)),R(!1),W(""),J(!1)},G=async()=>{if(A.length===0){I("No files in queue to process");return}try{R(!0),I(""),W(""),J(!0);const K=[];for(let re=0;re<A.length;re++){const le=A[re];try{W(`Processing (${re+1}/${A.length}): ${le.documentName}`),await new Promise(ye=>setTimeout(ye,1e3));const he=await _e(le.file,le.language||null);K.push({documentName:le.documentName,transcript:he,file:le.file}),await new Promise(ye=>setTimeout(ye,500))}catch(he){console.error(`Error processing "${le.documentName}":`,he),W(ye=>ye+`
Error processing ${le.documentName}: ${he.message}`),await new Promise(ye=>setTimeout(ye,1500))}}j(100),W("Processing complete!"),a&&K.length>0&&a(K),D([]),s&&s([]),setTimeout(()=>{W(""),J(!1)},2e3)}catch(K){console.error("Error in batch processing:",K),I("Failed to process files batch")}finally{R(!1)}};return p.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-indigo-700 p-4 rounded-lg shadow-lg border border-indigo-500 flex w-[700px]",children:[p.jsxs("div",{className:"flex-1 min-w-[350px]",children:[p.jsxs("div",{className:"text-lg font-bold mb-3 text-white border-b border-indigo-400 pb-2 flex items-center",children:[p.jsx(Wbe,{className:"mr-2 text-indigo-300",size:24}),p.jsx("span",{children:"Whisper Transcription"}),p.jsx("span",{className:"ml-2 text-xs bg-yellow-500 text-yellow-900 px-2 py-0.5 rounded-full",children:"Demo Mode"})]}),T&&p.jsxs("div",{className:"mb-3 p-2 bg-red-400 bg-opacity-25 text-red-100 text-sm rounded border border-red-500 flex items-center",children:[p.jsx("span",{className:"text-red-300 mr-2",children:"⚠"})," ",T]}),M&&p.jsxs("div",{className:"mb-4 bg-black bg-opacity-40 rounded-lg border border-indigo-500 overflow-hidden",children:[p.jsx("div",{className:"relative",children:E==="audio"?p.jsxs("div",{children:[p.jsx("audio",{ref:u,src:M,className:"hidden"}),p.jsx("canvas",{ref:d,className:"w-full h-32 bg-gray-900",width:"400",height:"120"}),p.jsxs("div",{className:"bg-indigo-900 bg-opacity-80 p-2 flex items-center justify-between",children:[p.jsxs("div",{className:"text-xs text-indigo-200 truncate flex items-center",children:[p.jsx(FP,{className:"mr-1"}),(_==null?void 0:_.name)||"Audio File"]}),p.jsx("button",{onClick:ie,className:"p-1 rounded-full bg-indigo-700 hover:bg-indigo-600 text-white",disabled:x,children:Q?p.jsx(p2,{size:12}):p.jsx(da,{size:12})})]})]}):p.jsxs("div",{children:[p.jsx("video",{ref:c,src:M,className:"w-full object-contain bg-black",style:{maxHeight:"180px"}}),p.jsxs("div",{className:"bg-indigo-900 bg-opacity-80 p-2 flex items-center justify-between",children:[p.jsxs("div",{className:"text-xs text-indigo-200 truncate flex items-center",children:[p.jsx(jP,{className:"mr-1"}),(_==null?void 0:_.name)||"Video File"]}),p.jsx("button",{onClick:ie,className:"p-1 rounded-full bg-indigo-700 hover:bg-indigo-600 text-white",disabled:x,children:Q?p.jsx(p2,{size:12}):p.jsx(da,{size:12})})]})]})}),x&&p.jsxs("div",{className:"mt-2 p-2 flex items-center bg-indigo-800 bg-opacity-50 border-t border-indigo-600",children:[p.jsx("div",{className:"flex-1 h-1 bg-indigo-900 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-400 to-purple-400",style:{width:`${P}%`,transition:"width 0.3s ease"}})}),p.jsx("button",{onClick:B,className:"ml-2 p-1 rounded bg-red-500 hover:bg-red-600 text-white",title:"Stop transcription",children:p.jsx(Kge,{size:10})})]})]}),p.jsxs("div",{className:"mb-4 p-3 bg-indigo-800 bg-opacity-40 rounded-lg border border-indigo-600",children:[p.jsxs("div",{className:"mb-3",children:[p.jsx("input",{ref:l,type:"file",className:"hidden",onChange:ue,accept:"audio/*,video/*"}),p.jsxs("button",{onClick:()=>{var K;return(K=l.current)==null?void 0:K.click()},className:`w-full flex flex-col items-center justify-center p-3 rounded-lg border-2 border-dashed 
                ${_?"border-indigo-400 bg-indigo-800 bg-opacity-30":"border-indigo-600 hover:border-indigo-400 bg-indigo-800 bg-opacity-10 hover:bg-opacity-20"} 
                transition-all duration-200`,disabled:x,children:[p.jsx(F$,{className:"text-indigo-300 mb-2",size:20}),p.jsx("span",{className:"text-sm text-indigo-200",children:_?_.name:"Select Audio or Video File"}),_&&p.jsxs("span",{className:"text-xs text-indigo-300 mt-1",children:[E==="audio"?"Audio":"Video"," file • ",Math.round(_.size/1024)," KB"]})]})]}),p.jsx("div",{className:"mb-2",children:p.jsx("input",{type:"text",value:y,onChange:K=>b(K.target.value),className:"w-full p-2 bg-indigo-700 bg-opacity-50 border border-indigo-500 rounded text-sm text-white placeholder-indigo-300",placeholder:"Document Name (required)",disabled:x})}),p.jsx("div",{className:"mb-3",children:p.jsxs("div",{className:"relative",children:[p.jsx("select",{value:$,onChange:K=>U(K.target.value),className:"w-full p-2 pr-8 bg-indigo-700 bg-opacity-50 border border-indigo-500 rounded text-sm text-white appearance-none",disabled:x,children:ce.map(K=>p.jsx("option",{value:K.code,children:K.name},K.code))}),p.jsx(Uge,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-indigo-300",size:16})]})}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsxs("button",{onClick:ge,className:"p-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg flex items-center justify-center text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:!y||!_||x,children:[p.jsx(V$,{className:"mr-1",size:12})," Add to Queue"]}),p.jsxs("button",{onClick:V,className:"p-2 bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-500 hover:to-teal-500 text-white rounded-lg flex items-center justify-center text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:!_||x,children:[p.jsx(da,{className:"mr-1",size:12})," Transcribe Now"]})]})]}),p.jsxs("div",{className:"mb-4",children:[p.jsxs("h3",{className:"text-sm font-medium text-indigo-200 mb-2 flex items-center",children:[p.jsx("span",{className:"mr-1",children:"Queue"}),p.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-indigo-600 rounded-full text-xs",children:A.length})]}),A.length===0?p.jsx("div",{className:"text-sm text-indigo-300 italic text-center p-2 bg-indigo-800 bg-opacity-20 rounded border border-indigo-700",children:"No files in queue"}):p.jsx("div",{className:"max-h-40 overflow-y-auto bg-indigo-800 bg-opacity-20 rounded border border-indigo-700 divide-y divide-indigo-700/40",children:A.map(K=>p.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-indigo-700/30",children:[p.jsxs("div",{className:"overflow-hidden",children:[p.jsxs("div",{className:"text-sm font-medium text-indigo-200 truncate flex items-center",children:[K.mediaType==="audio"?p.jsx(Fge,{className:"mr-1 text-indigo-400",size:12}):p.jsx(jP,{className:"mr-1 text-indigo-400",size:12}),K.documentName]}),p.jsx("div",{className:"text-xs text-indigo-400 truncate",children:K.file.name})]}),p.jsx("button",{onClick:()=>ke(K.id),className:"p-1 text-indigo-400 hover:text-red-400 transition-colors",title:"Remove from queue",disabled:x,children:p.jsx(dI,{size:14})})]},K.id))})]}),p.jsxs("button",{onClick:G,className:"w-full p-2.5 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-400 hover:to-purple-500 text-white rounded-lg flex items-center justify-center mb-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow",disabled:A.length===0||x,children:[p.jsx(da,{className:"mr-2"})," Process All Files (",A.length,")"]}),p.jsx(Xn,{type:"source",position:De.Right,id:"whisper-output",style:{background:"#a78bfa",width:12,height:12,border:"2px solid #4f46e5"},isConnectable:r})]}),X&&p.jsxs("div",{className:"ml-4 w-[300px] flex flex-col",children:[p.jsxs("div",{className:"text-md font-bold text-white border-b border-indigo-400 pb-2 mb-3 flex items-center",children:[p.jsx(FP,{className:"mr-2 text-indigo-300",size:18}),p.jsx("span",{children:"Live Transcription"})]}),p.jsx("div",{ref:Re,className:"flex-1 bg-gradient-to-b from-gray-800 to-gray-900 border border-indigo-500 rounded-lg shadow-inner p-3 overflow-y-auto max-h-[400px]",style:{minHeight:"300px"},children:F?p.jsx("div",{children:p.jsx("div",{className:"text-gray-200 font-mono text-sm whitespace-pre-wrap",children:F.split(" ").map((K,re,le)=>{if(re===le.length-1)return p.jsxs("span",{className:"text-teal-300",children:[re>0?" ":"",K,p.jsx("span",{className:"inline-block w-2 h-4 bg-teal-400 ml-1 animate-pulse"})]},re);let he="text-gray-200";return K.endsWith(".")||K.endsWith("!")||K.endsWith("?")?he="text-indigo-200":K.length>6&&(he="text-blue-200"),p.jsxs("span",{className:he,children:[re>0?" ":"",K]},re)})})}):p.jsx("div",{className:"h-full flex items-center justify-center",children:p.jsx("p",{className:"text-indigo-300 italic",children:"Waiting for transcription..."})})}),Y&&p.jsxs("button",{onClick:()=>J(!1),className:"mt-3 p-2 bg-teal-700 hover:bg-teal-600 text-white rounded text-sm flex items-center justify-center",children:[p.jsx("span",{className:"mr-1",children:"✓"})," Transcription Complete"]})]})]})}function Qbe({id:t,data:e,isConnectable:r}){const{systemMessage:i='You are an expert historian specializing in civil rights. Your job is to analyze interview transcripts and extract key information. Provide a 1-paragraph summary, followed by 5-7 key points from the interview. Format your response as JSON with "summary" and "keyPoints" fields.',onSystemMessageChange:s,onModelChange:a,canProcess:o=!1}=e,[l,u]=S.useState(!1),[c,d]=S.useState(i),h="gpt-4o-mini",f=()=>{s&&s(c),a&&a(h),u(!1)};return p.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border border-gray-200 w-80",children:[p.jsx("div",{className:"text-lg font-bold mb-2 text-emerald-600 border-b pb-2",children:"AI Prompt Configuration"}),p.jsx("div",{className:"mb-3",children:l?p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"bg-blue-50 p-2 rounded border border-blue-100 mb-2",children:[p.jsxs("div",{className:"text-sm font-medium text-blue-800 flex items-center",children:[p.jsx(VP,{className:"mr-2"})," Using GPT-4o-mini for processing"]}),p.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"Fastest and most cost-effective model for transcript analysis"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"System Message"}),p.jsx("textarea",{value:c,onChange:m=>d(m.target.value),className:"w-full p-2 border rounded text-sm h-40 resize-none",placeholder:"Enter instructions for the AI model..."})]}),p.jsxs("div",{className:"flex space-x-2",children:[p.jsx("button",{onClick:f,className:"flex-1 p-2 bg-emerald-500 text-white rounded text-sm hover:bg-emerald-600",children:"Save Changes"}),p.jsx("button",{onClick:()=>{d(i),u(!1)},className:"p-2 bg-gray-200 text-gray-700 rounded text-sm hover:bg-gray-300",children:"Cancel"})]})]}):p.jsxs("div",{children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("div",{className:"text-sm font-medium text-gray-600",children:"System Prompt"}),p.jsx("button",{onClick:()=>u(!0),className:"p-1.5 text-emerald-600 hover:text-emerald-700 hover:bg-emerald-50 rounded-full",title:"Edit system prompt",children:p.jsx(O$,{size:16})})]}),p.jsx("div",{className:"bg-gray-50 p-3 rounded border border-gray-200 text-sm text-gray-700 mb-3 max-h-32 overflow-y-auto",children:i}),p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsx("div",{className:"text-sm font-medium text-gray-600",children:"AI Model"}),p.jsxs("div",{className:"text-sm bg-blue-50 text-blue-700 py-1 px-2 rounded flex items-center",children:[p.jsx(VP,{className:"mr-1",size:12})," GPT-4o-mini"]})]}),p.jsx("div",{className:"text-xs text-gray-500 mb-3",children:p.jsx("p",{children:"This system prompt will be used for all transcript processing. The prompt tells the AI how to analyze each transcript and what format to return the results in."})})]})}),p.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 mr-1.5"}),p.jsx("span",{children:"Input comes from transcript nodes"})]}),p.jsxs("div",{className:"flex items-center mt-1",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 mr-1.5"}),p.jsx("span",{children:"Output goes to results display nodes"})]})]}),p.jsx(Xn,{type:"target",position:De.Left,id:"prompt-input",style:{background:"#3b82f6",width:12,height:12},isConnectable:r}),p.jsx(Xn,{type:"source",position:De.Right,id:"prompt-output",style:{background:"#10b981",width:12,height:12},isConnectable:r})]})}const Jbe=({data:t,selected:e})=>{var r,i,s;return p.jsxs("div",{className:`bg-white rounded-xl shadow-md p-4 w-full min-w-[520px] max-h-[700px] overflow-y-auto resize-both overflow-auto border-2 border-transparent hover:border-blue-100 ${e?"border-2 border-blue-400":""}`,children:[p.jsx(Xn,{type:"target",position:De.Left,id:"results-input",style:{background:"#3b82f6",width:12,height:12}}),p.jsx(Xn,{type:"source",position:De.Right,id:"results-output",style:{right:-10,background:"#3b82f6"}}),p.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(T0,{className:"mr-2 text-blue-600"}),"Results Display",t.summaries&&p.jsxs("div",{className:"ml-auto text-xs text-gray-500 flex items-center",children:[p.jsx(Pge,{className:"mr-1 text-blue-500"}),p.jsx("span",{children:"Drag visualizations from toolbar"})]})]}),t.openVideoPanel&&t.summaries&&p.jsxs("button",{onClick:()=>t.openVideoPanel(t.youtubeEmbedUrl,t.documentName,t.summaries),className:"text-sm px-2 py-1 bg-red-50 text-red-600 rounded-md hover:bg-red-100 flex items-center",title:"Play in video panel",children:[p.jsx(Hge,{className:"mr-1"}),"Play Video"]})]}),p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Overall Summary"}),p.jsx("textarea",{className:"w-full h-64 p-3 text-sm border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",value:((r=t.summaries)==null?void 0:r.overallSummary)||"",onChange:a=>t.onSummaryChange(a.target.value),placeholder:"Overall summary will appear here..."})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Key Points"}),p.jsx("button",{onClick:t.onAddKeyPoint,className:"p-1 text-blue-600 hover:text-blue-700",children:p.jsx(cI,{})})]}),p.jsx("div",{className:"space-y-4",children:(s=(i=t.summaries)==null?void 0:i.keyPoints)==null?void 0:s.map((a,o)=>p.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsx("input",{type:"text",value:a.topic,onChange:l=>t.onKeyPointChange(o,"topic",l.target.value),className:"text-sm font-medium bg-transparent border-b border-transparent hover:border-gray-300 focus:border-blue-500 focus:outline-none",placeholder:"Key point title..."}),p.jsx("button",{onClick:()=>t.onRemoveKeyPoint(o),className:"p-1 text-red-500 hover:text-red-600",children:p.jsx(qge,{})})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[p.jsx("input",{type:"text",value:a.timestamp,onChange:l=>t.onKeyPointChange(o,"timestamp",l.target.value),className:"text-sm bg-transparent border-b border-transparent hover:border-gray-300 focus:border-blue-500 focus:outline-none",placeholder:"Timestamp..."}),p.jsx("input",{type:"text",value:a.keywords,onChange:l=>t.onKeyPointChange(o,"keywords",l.target.value),className:"text-sm bg-transparent border-b border-transparent hover:border-gray-300 focus:border-blue-500 focus:outline-none",placeholder:"Keywords..."})]}),p.jsx("textarea",{value:a.summary,onChange:l=>t.onKeyPointChange(o,"summary",l.target.value),className:"w-full h-24 p-2 text-sm border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Summary..."}),p.jsx("div",{className:"mt-2 flex justify-end",children:p.jsxs("button",{onClick:()=>t.onEditSummary(a),className:"text-xs text-blue-600 hover:text-blue-700 flex items-center",children:[p.jsx(O$,{className:"mr-1"}),"Edit Summary"]})})]},o))})]}),p.jsx("div",{className:"flex justify-end mt-4",children:p.jsx("button",{onClick:t.onSaveToDatabase,disabled:t.savingToDatabase||t.savedToDatabase,className:`px-4 py-2 rounded-lg font-medium flex items-center ${t.savingToDatabase?"bg-gray-300 text-gray-500 cursor-not-allowed":t.savedToDatabase?"bg-green-100 text-green-700":"bg-blue-600 text-white hover:bg-blue-700"}`,children:t.savingToDatabase?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):t.savedToDatabase?p.jsxs(p.Fragment,{children:[p.jsx(T0,{className:"mr-2"}),"Saved"]}):p.jsxs(p.Fragment,{children:[p.jsx(T0,{className:"mr-2"}),"Save to Database"]})})})]})]})},Zbe=({data:t})=>{const e=M=>{if(isNaN(M))return"00:00";const O=Math.floor(M/3600),A=Math.floor(M%3600/60),D=Math.floor(M%60);return O>0?`${O.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}:${D.toString().padStart(2,"0")}`:`${A.toString().padStart(2,"0")}:${D.toString().padStart(2,"0")}`},r=M=>{if(!M)return 0;let O=M;M.includes(" - ")&&(O=M.split(" - ")[0]);const A=O.split(":").map(Number);return A.length===3&&!isNaN(A[0])&&!isNaN(A[1])&&!isNaN(A[2])?A[0]*3600+A[1]*60+A[2]:A.length===2&&!isNaN(A[0])&&!isNaN(A[1])?A[0]*60+A[1]:0},[i,s]=S.useState(!1),[a,o]=S.useState(0),[l,u]=S.useState(0),c=S.useRef(null),d=S.useRef(null),h=t.videoRef||d,f=M=>{if(!M)return"";const O=new URL(M);return O.searchParams.set("enablejsapi","1"),O.searchParams.set("origin",window.location.origin),O.toString()},m=t.summaries&&t.summaries.keyPoints?t.summaries.keyPoints.map(M=>({time:r(M.timestamp),label:M.topic})).sort((M,O)=>M.time-O.time):[];S.useEffect(()=>{if(t.youtubeEmbedUrl){console.log("Setting up YouTube player communication");const M=O=>{if(O.data&&typeof O.data=="string")try{const A=JSON.parse(O.data);console.log("YouTube API message:",A),A.event==="onStateChange"?(s(A.info===1),console.log("Player state changed:",A.info)):A.event==="infoDelivery"&&A.info&&(A.info.currentTime&&u(A.info.currentTime),A.info.playerState!==void 0&&s(A.info.playerState===1),A.info.duration&&A.info.duration!==a&&(o(A.info.duration),console.log("Duration updated:",A.info.duration)))}catch{}};return window.addEventListener("message",M),c.current=setInterval(()=>{if(h&&h.current&&h.current.contentWindow)try{h.current.contentWindow.postMessage(JSON.stringify({event:"listening",id:"player",channel:"widget"}),"*"),h.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"getPlayerState",args:[]}),"*")}catch(O){console.error("Error getting video time:",O)}else console.log("Video ref not ready yet")},1e3),()=>{window.removeEventListener("message",M),c.current&&clearInterval(c.current)}}},[t.youtubeEmbedUrl,h,a]);const v=()=>{if(!h||!h.current){console.error("Video reference not available");return}try{console.log("Attempting to",i?"pause":"play","video"),i?h.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:[]}),"*"):h.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo",args:[]}),"*"),s(!i)}catch(M){console.error("Error controlling video:",M)}},y=M=>{if(!h||!h.current){console.error("Video reference not available");return}try{console.log("Jumping to timestamp:",M),h.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"seekTo",args:[M,!0]}),"*"),u(M),t.onUpdateTimestamp&&t.onUpdateTimestamp(e(M))}catch(O){console.error("Error seeking video:",O)}},b=()=>{if(!m.length)return;const M=m.find(O=>O.time>l);y(M?M.time:m[0].time)},_=()=>{if(!m.length)return;const M=m.filter(O=>O.time<l);M.length>0?y(M[M.length-1].time):y(m[m.length-1].time)},E=(()=>{if(!m.length)return null;for(let M=m.length-1;M>=0;M--)if(m[M].time<=l)return m[M];return null})(),N=f(t.youtubeEmbedUrl);return p.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 w-full min-w-[520px] relative",children:[p.jsx(Xn,{type:"target",position:De.Top,id:"video-input",style:{top:-10,background:"#ef4444"}}),p.jsx(Xn,{type:"source",position:De.Bottom,id:"video-output",style:{bottom:-10,left:"50%",transform:"translateX(-50%)",background:"#ef4444",width:12,height:12,border:"2px solid white",zIndex:1e3}}),p.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[p.jsx(da,{className:"mr-2 text-red-500"}),"Video Player"]}),p.jsxs("div",{className:"flex flex-col gap-4",children:[N?p.jsx("div",{className:"relative w-full pt-[56.25%]",children:p.jsx("iframe",{ref:h,src:N,className:"absolute top-0 left-0 w-full h-full rounded-lg",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):p.jsx("div",{className:"h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:p.jsx("p",{className:"text-gray-500",children:"No video loaded"})}),t.currentTimestamp&&p.jsxs("div",{className:"text-sm text-gray-600",children:["Current timestamp: ",t.currentTimestamp]}),N&&p.jsxs("div",{className:"flex flex-col space-y-3",children:[p.jsxs("div",{className:"relative w-full h-8 bg-gray-100 rounded-lg cursor-pointer border border-gray-200",children:[p.jsx("div",{className:"absolute inset-0 flex justify-between",children:[...Array(10)].map((M,O)=>p.jsx("div",{className:"h-full w-px bg-gray-200"},O))}),p.jsx("div",{className:"absolute left-0 top-0 h-full bg-red-400 rounded-l-lg opacity-60",style:{width:`${a?l/a*100:0}%`}}),p.jsx("div",{className:"absolute top-0 h-full w-1 bg-red-600 z-10",style:{left:`${a?l/a*100:0}%`,transform:"translateX(-50%)"}}),m.map((M,O)=>p.jsxs("div",{className:"absolute top-0 h-full flex flex-col items-center cursor-pointer group",style:{left:`${a?M.time/a*100:0}%`},onClick:()=>y(M.time),children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 mt-1"}),p.jsx("div",{className:"w-0.5 h-full bg-blue-500"}),p.jsx("div",{className:"absolute top-full mt-1 opacity-0 group-hover:opacity-100 bg-gray-800 text-white text-xs p-1 rounded whitespace-nowrap transform -translate-x-1/2 transition-opacity z-20",children:M.label})]},O)),p.jsx("input",{type:"range",min:"0",max:a||100,value:l,onChange:M=>y(Number(M.target.value)),className:"absolute w-full h-full opacity-0 cursor-pointer"})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex space-x-2",children:[p.jsx("button",{onClick:_,className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200",title:"Previous marker",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})}),p.jsx("button",{onClick:v,className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200",title:i?"Pause":"Play",children:i?p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"})}):p.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),p.jsx("button",{onClick:b,className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200",title:"Next marker",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]}),p.jsxs("div",{className:"text-sm font-mono",children:[e(l)," / ",e(a)]})]})]}),t.summaries&&t.summaries.keyPoints&&t.summaries.keyPoints.length>0&&p.jsxs("div",{className:"mt-4",children:[p.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-700",children:"Key Points"}),p.jsx("div",{className:"max-h-[200px] overflow-y-auto pr-2",children:t.summaries.keyPoints.map((M,O)=>{const A=E&&M.topic===E.label&&r(M.timestamp)===E.time;return p.jsx("div",{onClick:()=>y(r(M.timestamp)),className:`flex items-start p-2 rounded mb-1 cursor-pointer transition-colors ${A?"bg-blue-50 border-l-4 border-blue-500":"hover:bg-gray-50 border-l-4 border-transparent"}`,children:p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center",children:[A&&p.jsx("svg",{className:"w-3 h-3 text-blue-500 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),p.jsx("span",{className:`font-medium text-sm ${A?"text-blue-700":"text-gray-700"}`,children:M.topic})]}),p.jsx("div",{className:"text-xs text-gray-500 mt-1",children:M.timestamp})]})},O)})})]})]})]})},e1e=({data:t})=>{const e=S.useRef(null),[r,i]=S.useState({width:400,height:400}),[s,a]=S.useState(null),o=S.useMemo(()=>{if(!t.summaries)return[];const c=new Map;t.summaries.overallSummary&&t.summaries.overallSummary.toLowerCase().replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"").split(/\s+/).filter(f=>f.length>3).forEach(f=>{c.set(f,(c.get(f)||0)+1)}),t.summaries.keyPoints&&t.summaries.keyPoints.forEach(h=>{(h.keywords?h.keywords.split(",").map(m=>m.trim().toLowerCase()):[]).forEach(m=>{c.set(m,(c.get(m)||0)+3)}),h.topic&&c.set(h.topic.toLowerCase(),(c.get(h.topic.toLowerCase())||0)+5)});const d=Array.from(c.entries()).sort((h,f)=>f[1]-h[1]).slice(0,50).map(([h,f],m)=>({name:h,count:f,value:f,id:`keyword-${m}`,parentId:"root"}));return d.unshift({name:"Keywords",id:"root",parentId:null,value:0}),d},[t.summaries]),l=S.useMemo(()=>{if(!o.length)return null;const c=aee().id(d=>d.id).parentId(d=>d.parentId)(o);return Vg(c).sum(d=>d.data.value).sort((d,h)=>h.value-d.value)},[o]);S.useEffect(()=>{if(!e.current)return;const c=new ResizeObserver(d=>{if(d[0]){const{width:h,height:f}=d[0].contentRect;i({width:h,height:f})}});return c.observe(e.current),()=>{e.current&&c.unobserve(e.current)}},[]);const u=(c,d,h)=>{if(!c)return{lines:[],totalHeight:0};const f=c.split(" "),m=[];let v=f[0];const y=d/(h*.6);for(let b=1;b<f.length;b++){const _=f[b],w=`${v} ${_}`;w.length<y?v=w:(m.push(v),v=_)}return m.push(v),{lines:m,totalHeight:m.length*h*1.2}};return p.jsxs("div",{className:"bg-white rounded-xl shadow-md w-full h-full overflow-hidden border-2 border-transparent hover:border-blue-100",ref:e,children:[p.jsx(Xn,{type:"target",position:De.Left,id:"viz-input",style:{left:-10,background:"#818cf8",top:"50%",transform:"translateY(-50%)"}}),p.jsxs("div",{className:"p-4",children:[p.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[p.jsx(L$,{className:"mr-2 text-blue-500"}),"Keyword Bubble Chart"]}),p.jsx("div",{className:"relative",style:{height:r.height-50,width:"100%"},children:t.summaries?l?p.jsx(pT,{width:r.width,height:r.height-50,scaleXMin:.1,scaleXMax:4,scaleYMin:.1,scaleYMax:4,children:c=>p.jsxs("div",{className:"relative w-full h-full overflow-hidden",children:[p.jsxs("svg",{width:r.width,height:r.height-50,className:"cursor-grab",children:[p.jsx("rect",{width:r.width,height:r.height-50,rx:14,fill:"#f9fafb",onTouchStart:c.dragStart,onTouchMove:c.dragMove,onTouchEnd:c.dragEnd,onMouseDown:c.dragStart,onMouseMove:c.dragMove,onMouseUp:c.dragEnd,onMouseLeave:()=>{c.isDragging&&c.dragEnd(),a(null)}}),p.jsx(hT,{root:l,size:[r.width,r.height-50],padding:3,children:d=>{const h=d.descendants().slice(1);return p.jsx(mu,{transform:c.toString(),children:h.map((f,m)=>{if(f.r<5)return null;const v=Math.min(16,Math.max(8,f.r/5)),y=f.r>20,b=u(f.data.data.name,f.r*1.5,v),_=Math.max(...o.map(A=>A.count||0)),w=Math.min(1,(f.data.data.count||0)/(_*.7)),E=210,N=70+30*w,M=90-30*w,O=s===f.data.data.id;return p.jsxs(mu,{children:[p.jsx("circle",{cx:f.x,cy:f.y,r:f.r,fill:`hsl(${E}, ${N}%, ${M}%)`,stroke:O?"#3b82f6":"white",strokeWidth:O?2:1,onMouseEnter:()=>a(f.data.data.id),onMouseLeave:()=>a(null),opacity:.9}),y&&p.jsx("text",{x:f.x,y:f.y,fontSize:v,fontFamily:"Arial",textAnchor:"middle",fill:"#1f2937",dy:-b.totalHeight/2+v,children:b.lines.map((A,D)=>p.jsx("tspan",{x:f.x,dy:D===0?0:v*1.2,children:A},`line-${D}`))})]},`circle-${m}`)})})}})]}),p.jsxs("div",{className:"absolute bottom-4 right-4 bg-white rounded-lg shadow-md flex",children:[p.jsx("button",{onClick:()=>c.scale({scaleX:1.2,scaleY:1.2}),className:"p-2 text-gray-600 hover:text-blue-600",children:"+"}),p.jsx("button",{onClick:()=>c.scale({scaleX:.8,scaleY:.8}),className:"p-2 text-gray-600 hover:text-blue-600",children:"-"}),p.jsx("button",{onClick:()=>c.reset(),className:"p-2 text-gray-600 hover:text-blue-600 text-xs",children:"Reset"})]}),s&&(()=>{const d=l.descendants().find(m=>m.data.data.id===s);if(!d)return null;const h=d.x*c.transformMatrix.scaleX+c.transformMatrix.translateX,f=d.y*c.transformMatrix.scaleY+c.transformMatrix.translateY;return p.jsxs("div",{className:"absolute pointer-events-none bg-white p-2 rounded shadow-md text-xs border border-gray-200",style:{left:h,top:f-40,transform:"translate(-50%, -100%)"},children:[p.jsx("div",{className:"font-bold",children:d.data.data.name}),p.jsxs("div",{children:["Count: ",d.data.data.count]})]})})()]})}):p.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50 rounded-lg",children:p.jsx("p",{className:"text-gray-500",children:"Preparing visualization..."})}):p.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50 rounded-lg",children:p.jsx("p",{className:"text-gray-500",children:"No data available"})})})]})]})},t1e=({data:t})=>{const[e,r]=S.useState(!0),[i,s]=S.useState(null),[a,o]=S.useState([]),[l,u]=S.useState(null),c=S.useMemo(()=>{if(!t.summaries)return[];const f=[],m=new Set;return t.summaries.overallSummary&&d(t.summaries.overallSummary).forEach(v=>{m.has(v)||(f.push({location:v,source:"Summary"}),m.add(v))}),t.summaries.keyPoints&&t.summaries.keyPoints.forEach(v=>{v.topic&&d(v.topic).forEach(y=>{m.has(y)||(f.push({location:y,source:v.topic}),m.add(y))}),v.summary&&d(v.summary).forEach(y=>{m.has(y)||(f.push({location:y,source:v.topic}),m.add(y))})}),f},[t.summaries]);function d(f){if(!f)return[];const m=/([A-Z][a-zA-Z\s]+),\s*([A-Z][a-zA-Z\s]+)/g;return Array.from(f.matchAll(m)).map(y=>`${y[1]}, ${y[2]}`)}S.useEffect(()=>{let f=!0,m;return(async()=>{if(!c.length){r(!1);return}try{r(!0);const y=[];for(let b=0;b<c.length&&f;b++){const{location:_,source:w}=c[b];b>0&&await new Promise(M=>{m=setTimeout(M,1e3)});const E=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(_)}`);if(!E.ok)throw new Error(`Geocoding failed for ${_}`);const N=await E.json();if(N.length>0){const{lat:M,lon:O,display_name:A}=N[0];y.push({id:`marker-${b}`,position:[parseFloat(M),parseFloat(O)],name:_,displayName:A,source:w})}}f&&o(y)}catch(y){f&&(console.error("Error geocoding locations:",y),s("Failed to geocode locations"))}finally{f&&r(!1)}})(),()=>{f=!1,clearTimeout(m)}},[c]),S.useEffect(()=>{let f=!0;async function m(){try{if(!a.length)return;const v=await bm(()=>import("./leaflet-src-CagAOcw8.js").then(E=>E.l),[]),{MapContainer:y,TileLayer:b,Marker:_,Popup:w}=await bm(async()=>{const{MapContainer:E,TileLayer:N,Marker:M,Popup:O}=await import("./index-CSysyOVV.js");return{MapContainer:E,TileLayer:N,Marker:M,Popup:O}},__vite__mapDeps([2,1]));delete v.Icon.Default.prototype._getIconUrl,v.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"}),f&&u({L:v,MapContainer:y,TileLayer:b,Marker:_,Popup:w})}catch(v){f&&(console.error("Error loading map components:",v),s("Failed to load map components"))}}return m(),()=>{f=!1}},[a]);const h=S.useMemo(()=>{if(!a.length)return[0,0];const f=a.reduce((v,y)=>v+y.position[0],0),m=a.reduce((v,y)=>v+y.position[1],0);return[f/a.length,m/a.length]},[a]);return S.useEffect(()=>{if(a.length>0&&!document.getElementById("leaflet-css")){const f=document.createElement("link");f.rel="stylesheet",f.id="leaflet-css",f.href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css",f.integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==",f.crossOrigin="",document.head.appendChild(f)}},[a]),p.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 w-full min-w-[500px] h-[500px] overflow-hidden border-2 border-transparent hover:border-green-100",children:[p.jsx(Xn,{type:"target",position:De.Left,id:"viz-input",style:{left:-10,background:"#818cf8",top:"50%",transform:"translateY(-50%)"}}),p.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[p.jsx(zge,{className:"mr-2 text-green-500"}),"Location Map"]}),p.jsx("div",{className:"w-full h-[430px] bg-gray-50 rounded-lg overflow-hidden relative",children:e?p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"w-8 h-8 border-2 border-green-300 border-t-green-600 rounded-full animate-spin mx-auto mb-2"}),p.jsx("p",{className:"text-gray-500 text-sm",children:"Loading map data..."})]})}):i?p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsxs("div",{className:"text-center p-4",children:[p.jsx("p",{className:"text-red-500 mb-2",children:i}),p.jsx("p",{className:"text-gray-500 text-sm",children:"Please try again later"})]})}):a.length===0?p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsxs("div",{className:"text-center p-4",children:[p.jsx("p",{className:"text-gray-500 mb-2",children:"No locations detected"}),p.jsx("p",{className:"text-gray-400 text-sm",children:"The system couldn't identify any geographical locations in the transcript"})]})}):l?p.jsxs(l.MapContainer,{center:h,zoom:5,style:{height:"100%",width:"100%"},children:[p.jsx(l.TileLayer,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a.map(f=>p.jsx(l.Marker,{position:f.position,children:p.jsx(l.Popup,{children:p.jsxs("div",{children:[p.jsx("div",{className:"font-bold",children:f.name}),p.jsx("div",{className:"text-xs text-gray-500",children:f.displayName}),p.jsxs("div",{className:"text-xs mt-1",children:[p.jsx("span",{className:"text-gray-600",children:"Mentioned in: "}),p.jsx("span",{className:"font-medium",children:f.source})]})]})})},f.id))]}):p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("p",{className:"text-gray-500",children:"Preparing map..."})})})]})},n1e=({data:t})=>{var h,f,m;const[e,r]=S.useState("ui"),[i,s]=S.useState(!1),a=new Date().toISOString(),o={name:t.documentName||"Interview Name",documentName:t.documentName||"interview_name",created:a,updated:a,source:t.youtubeUrl?"youtube":"file_upload",videoEmbedLink:t.youtubeEmbedUrl?t.youtubeEmbedUrl.replace("?enablejsapi=1",""):null,summary:((h=t.summaries)==null?void 0:h.overallSummary)||null,userID:"user_123",status:"processed",processingTime:"2.4s",wordCount:t.transcript?t.transcript.split(/\s+/).length:0},l=v=>v?v.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"").substring(0,30):`keypoint-${Math.random().toString(36).substring(2,9)}`,u=((m=(f=t.summaries)==null?void 0:f.keyPoints)==null?void 0:m.map((v,y)=>({id:l(v.topic),topic:v.topic,summary:v.content||v.summary,timestamp:v.timestamp||null,keywords:v.keywords||"keywords, civil rights"})))||[],c=JSON.stringify(o,null,2),d=v=>v===null?p.jsx("span",{className:"text-gray-400",children:"null"}):typeof v=="string"?p.jsxs("span",{className:"text-green-600",children:['"',v,'"']}):typeof v=="number"?p.jsx("span",{className:"text-blue-600",children:v}):typeof v=="boolean"?p.jsx("span",{className:"text-purple-600",children:v.toString()}):Array.isArray(v)?p.jsxs("span",{className:"text-gray-500",children:["Array(",v.length,")"]}):typeof v=="object"?p.jsx("span",{className:"text-gray-500",children:"Object"}):String(v);return p.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 w-full",children:[p.jsx(Xn,{type:"target",position:De.Left,id:"metadata-input",style:{left:-10,background:"#818cf8",top:"50%",transform:"translateY(-50%)"}}),p.jsx(Xn,{type:"source",position:De.Right,id:"metadata-output",style:{right:-10,background:"#818cf8",top:"50%",transform:"translateY(-50%)"}}),p.jsxs("div",{className:"flex justify-between items-center mb-3",children:[p.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[p.jsx(S0,{className:"mr-2 text-indigo-600"}),"Firestore Metadata"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{className:`p-1.5 rounded ${e==="json"?"bg-indigo-100 text-indigo-700":"bg-gray-100 text-gray-500"}`,onClick:()=>r("json"),title:"View as JSON",children:p.jsx(Lge,{size:14})}),p.jsx("button",{className:`p-1.5 rounded ${e==="ui"?"bg-indigo-100 text-indigo-700":"bg-gray-100 text-gray-500"}`,onClick:()=>r("ui"),title:"View as UI",children:p.jsx(Yge,{size:14})})]})]}),p.jsxs("div",{className:"flex flex-col gap-2",children:[e==="json"?p.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:[p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"font-semibold mb-2 text-gray-700",children:["/interviewSummaries/",o.documentName]}),p.jsx("pre",{className:"text-sm font-mono text-gray-700 whitespace-pre-wrap",children:c})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"font-semibold mb-2 text-gray-700",children:["/interviewSummaries/",o.documentName,"/subSummaries/*"]}),p.jsx("div",{className:"overflow-auto max-h-[350px]",children:u.map((v,y)=>p.jsxs("div",{className:"mb-3 ml-4 pl-2 border-l-2 border-indigo-200",children:[p.jsxs("div",{className:"font-medium text-gray-600 mb-1",children:["Document ID: ",v.id]}),p.jsx("pre",{className:"text-sm font-mono text-gray-700 whitespace-pre-wrap",children:JSON.stringify(v,null,2)})]},y))})]})]}):p.jsx("div",{className:"rounded-lg border border-gray-200 bg-white text-sm",children:p.jsxs("div",{className:"flex flex-col",children:[p.jsx("div",{className:"px-3 py-2 border-b border-gray-200 bg-gray-50 flex items-center text-gray-800 font-semibold",children:p.jsxs("div",{className:"flex items-center",children:[p.jsx(S0,{className:"mr-2 text-indigo-600",size:14}),p.jsxs("span",{className:"font-mono",children:["/interviewSummaries/",o.documentName||"document-id"]})]})}),Object.entries(o).map(([v,y])=>p.jsxs("div",{className:"px-3 py-2 border-b border-gray-200 flex items-start hover:bg-gray-50",children:[p.jsx("div",{className:"w-1/3 font-medium text-gray-700",children:v}),p.jsx("div",{className:"w-2/3 font-mono",children:d(y)})]},v)),p.jsx("div",{className:"px-3 py-2 border-b border-gray-200 bg-gray-50 flex items-center hover:bg-gray-100 cursor-pointer",onClick:()=>s(!i),children:p.jsxs("div",{className:"flex items-center font-medium text-gray-700",children:[i?p.jsx(Dge,{size:12,className:"mr-2"}):p.jsx(Mge,{size:12,className:"mr-2"}),"Subcollections"]})}),i&&p.jsxs("div",{className:"pl-6 pr-3 py-2 border-b border-gray-200 bg-blue-50 hover:bg-blue-100",children:[p.jsxs("div",{className:"flex items-center text-blue-700 font-medium mb-1",children:[p.jsx(S0,{className:"mr-2",size:12}),"subSummaries (",u.length," documents)"]}),u.length>0&&p.jsx("div",{className:"ml-4 mt-2 overflow-auto max-h-[350px]",children:u.map((v,y)=>{var b;return p.jsxs("div",{className:"bg-white rounded-md p-2 mb-2 border border-blue-200",children:[p.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["ID: ",v.id]}),p.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[p.jsx("div",{className:"text-xs font-medium text-gray-700",children:"topic"}),p.jsxs("div",{className:"text-xs font-mono text-green-600",children:['"',v.topic,'"']}),p.jsx("div",{className:"text-xs font-medium text-gray-700",children:"timestamp"}),p.jsx("div",{className:"text-xs font-mono",children:v.timestamp?p.jsxs("span",{className:"text-green-600",children:['"',v.timestamp,'"']}):p.jsx("span",{className:"text-gray-400",children:"null"})}),p.jsx("div",{className:"text-xs font-medium text-gray-700",children:"keywords"}),p.jsxs("div",{className:"text-xs font-mono text-green-600",children:['"',v.keywords,'"']}),p.jsx("div",{className:"text-xs font-medium text-gray-700",children:"summary"}),p.jsxs("div",{className:"text-xs font-mono text-green-600",children:['"',((b=v.summary)==null?void 0:b.length)>30?v.summary.substring(0,30)+"...":v.summary,'"']})]})]},y)})})]})]})}),p.jsxs("div",{className:"flex justify-between items-center mt-2 text-sm text-gray-500",children:[p.jsxs("span",{children:["Collection: ",p.jsx("span",{className:"font-mono",children:"/interviewSummaries"})]}),p.jsxs("span",{children:["Size: ",new TextEncoder().encode(c).length," bytes"]})]}),t.savedToDatabase&&p.jsx("div",{className:"mt-2 p-2 bg-green-50 text-green-700 rounded-md text-sm",children:"✓ Saved to Firestore"})]})]})};Xa({type:"transcriptInput",category:"input",component:Hbe,defaults:{style:{width:320},data:{label:"Transcript Input"}},metadata:{description:"Node for uploading and processing transcript files",icon:"file-upload"}});Xa({type:"whisperTranscription",category:"input",component:Xbe,defaults:{style:{width:320},data:{label:"Whisper Transcription"}},metadata:{description:"Node for transcribing audio and video using OpenAI Whisper",icon:"microphone"}});Xa({type:"promptEditing",category:"processing",component:Qbe,defaults:{style:{width:320},data:{label:"Prompt Editing"}},metadata:{description:"Node for editing system prompts for AI processing",icon:"edit"}});Xa({type:"resultsDisplay",category:"output",component:Jbe,defaults:{style:{width:560},data:{label:"Results Display"}},metadata:{description:"Node for displaying processing results",icon:"analytics"}});Xa({type:"videoPlayer",category:"media",component:Zbe,defaults:{style:{width:420},data:{label:"Video Player"}},metadata:{description:"Node for playing video content",icon:"video"}});Xa({type:"keywordBubble",category:"visualization",component:e1e,defaults:{style:{width:400,height:400},data:{label:"Keyword Bubble Chart"}},metadata:{description:"Visualization node for displaying keyword frequency",icon:"bubble-chart"}});Xa({type:"mapVisualization",category:"visualization",component:t1e,defaults:{style:{width:400,height:400},data:{label:"Location Map"}},metadata:{description:"Visualization node for displaying geographical information",icon:"map"}});Xa({type:"metadata",category:"other",component:n1e,defaults:{style:{width:420,height:550},data:{label:"Metadata"}},metadata:{description:"Node for displaying and managing metadata",icon:"info"}});const DI=PI();console.log("Registered node types:",DI);const iB=({isOpen:t,onClose:e,videoUrl:r,summaries:i,documentName:s,currentTimestamp:a,setCurrentTimestamp:o})=>{const[l,u]=S.useState(!1),[c,d]=S.useState(!1),[h,f]=S.useState(0),[m,v]=S.useState(0),[y,b]=S.useState(!1),_=S.useRef(null),w=S.useRef(null),E=$=>{if(isNaN($))return"00:00";const U=Math.floor($/3600),Y=Math.floor($%3600/60),q=Math.floor($%60);return U>0?`${U.toString().padStart(2,"0")}:${Y.toString().padStart(2,"0")}:${q.toString().padStart(2,"0")}`:`${Y.toString().padStart(2,"0")}:${q.toString().padStart(2,"0")}`},N=$=>{if(!$)return 0;let U=$;$.includes(" - ")&&(U=$.split(" - ")[0]);const Y=U.split(":").map(Number);return Y.length===3&&!isNaN(Y[0])&&!isNaN(Y[1])&&!isNaN(Y[2])?Y[0]*3600+Y[1]*60+Y[2]:Y.length===2&&!isNaN(Y[0])&&!isNaN(Y[1])?Y[0]*60+Y[1]:0},M=i&&i.keyPoints?i.keyPoints.map($=>({time:N($.timestamp),label:$.topic})).sort(($,U)=>$.time-U.time):[];S.useEffect(()=>{if(!window.YT){const $=document.createElement("script");$.src="https://www.youtube.com/iframe_api";const U=document.getElementsByTagName("script")[0];U.parentNode.insertBefore($,U),window.onYouTubeIframeAPIReady=()=>{console.log("YouTube API ready")}}},[]),S.useEffect(()=>{if(r&&_.current){console.log("Setting up YouTube player communication");const $=U=>{if(U.data&&typeof U.data=="string")try{const Y=JSON.parse(U.data);console.log("YouTube API message:",Y),Y.event==="onReady"?(console.log("Player ready"),b(!0)):Y.event==="onStateChange"?(console.log("Player state changed:",Y.info),d(Y.info===1)):Y.event==="infoDelivery"&&Y.info&&(Y.info.currentTime&&v(Y.info.currentTime),Y.info.playerState!==void 0&&d(Y.info.playerState===1),Y.info.duration&&Y.info.duration!==h&&(f(Y.info.duration),console.log("Duration updated:",Y.info.duration)))}catch{}};return window.addEventListener("message",$),setTimeout(()=>{w.current=setInterval(()=>{if(_.current&&_.current.contentWindow)try{_.current.contentWindow.postMessage(JSON.stringify({event:"listening",id:"player",channel:"widget"}),"*"),O("getPlayerState"),O("getCurrentTime"),O("getDuration")}catch(U){console.error("Error getting video time:",U)}},1e3)},1500),()=>{window.removeEventListener("message",$),w.current&&clearInterval(w.current)}}},[r,h]);const O=($,U=[])=>{if(!_.current||!_.current.contentWindow)return console.error("Video reference not available"),!1;try{return _.current.contentWindow.postMessage(JSON.stringify({event:"command",func:$,args:U}),"*"),!0}catch(Y){return console.error(`Error sending ${$} command:`,Y),!1}},A=$=>{if(!$)return"";try{const U=new URL($);return U.searchParams.set("enablejsapi","1"),U.searchParams.set("origin",window.location.origin),U.searchParams.set("autoplay","0"),U.searchParams.set("controls","0"),U.searchParams.set("rel","0"),U.searchParams.set("showinfo","0"),U.toString()}catch(U){return console.error("Error enhancing YouTube URL:",U),$}},D=()=>{console.log("Play/Pause clicked, current state:",c),c?O("pauseVideo")&&d(!1):O("playVideo")&&d(!0)},T=$=>{console.log("Jumping to timestamp:",$),O("pauseVideo"),O("seekTo",[$,!0])&&(v($),o&&o(E($)),setTimeout(()=>{O("playVideo"),d(!0)},200))},I=()=>{if(!M.length)return;const $=M.find(U=>U.time>m);T($?$.time:M[0].time)},x=()=>{if(!M.length)return;const $=M.filter(U=>U.time<m);$.length>0?T($[$.length-1].time):T(M[M.length-1].time)},P=(()=>{if(!M.length)return null;for(let $=M.length-1;$>=0;$--)if(M[$].time<=m)return M[$];return null})(),j=A(r);return t?p.jsxs("div",{className:`fixed right-0 top-0 h-full bg-white shadow-lg transition-all duration-300 z-50 flex flex-col
        ${l?"w-64":"w-[500px]"}`,children:[p.jsxs("div",{className:"p-3 bg-gray-100 border-b flex justify-between items-center",children:[p.jsx("h3",{className:"font-semibold text-gray-700 truncate",children:l?"Video Player":`Video: ${s||"No Title"}`}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>u(!l),className:"p-1 text-gray-500 hover:text-gray-700",title:l?"Expand":"Minimize",children:l?p.jsx(Vge,{size:14}):p.jsx(jge,{size:14})}),p.jsx("button",{onClick:e,className:"p-1 text-gray-500 hover:text-red-600",title:"Close",children:p.jsx(Xge,{size:14})})]})]}),p.jsxs("div",{className:"flex-1 overflow-auto",children:[!l&&j&&p.jsx("div",{className:"relative pt-[56.25%]",children:p.jsx("iframe",{ref:_,src:j,className:"absolute top-0 left-0 w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),p.jsxs("div",{className:"p-3",children:[p.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[E(m)," / ",E(h)]}),p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx("button",{onClick:x,className:"p-2 bg-gray-100 rounded hover:bg-gray-200 disabled:opacity-50",title:"Previous marker",disabled:!j||M.length===0,children:p.jsx(Wge,{size:16})}),p.jsx("button",{onClick:D,className:"p-2 bg-red-100 text-red-600 rounded hover:bg-red-200 disabled:opacity-50",title:c?"Pause":"Play",disabled:!j,children:c?p.jsx(p2,{size:16}):p.jsx(da,{size:16})}),p.jsx("button",{onClick:I,className:"p-2 bg-gray-100 rounded hover:bg-gray-200 disabled:opacity-50",title:"Next marker",disabled:!j||M.length===0,children:p.jsx(Gge,{size:16})})]}),!l&&j&&p.jsxs("div",{className:"relative w-full h-6 bg-gray-100 rounded-lg cursor-pointer mt-3 border border-gray-200",children:[p.jsx("div",{className:"absolute inset-0 flex justify-between",children:[...Array(10)].map(($,U)=>p.jsx("div",{className:"h-full w-px bg-gray-200"},U))}),p.jsx("div",{className:"absolute left-0 top-0 h-full bg-red-400 rounded-l-lg opacity-60",style:{width:`${h?m/h*100:0}%`}}),p.jsx("div",{className:"absolute top-0 h-full w-1 bg-red-600 z-10",style:{left:`${h?m/h*100:0}%`,transform:"translateX(-50%)"}}),M.map(($,U)=>p.jsxs("div",{className:"absolute top-0 h-full flex flex-col items-center cursor-pointer group",style:{left:`${h?$.time/h*100:0}%`},onClick:()=>T($.time),children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 mt-1"}),p.jsx("div",{className:"absolute top-full mt-1 opacity-0 group-hover:opacity-100 bg-gray-800 text-white text-xs p-1 rounded whitespace-nowrap transform -translate-x-1/2 transition-opacity z-20",children:$.label})]},U)),p.jsx("input",{type:"range",min:"0",max:h||100,value:m,onChange:$=>T(Number($.target.value)),className:"absolute w-full h-full opacity-0 cursor-pointer"})]})]}),!l&&i&&i.keyPoints&&i.keyPoints.length>0&&p.jsxs("div",{className:"p-3 border-t",children:[p.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-700",children:"Key Points"}),p.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:i.keyPoints.map(($,U)=>{const Y=P&&$.topic===P.label&&N($.timestamp)===P.time;return p.jsx("div",{onClick:()=>T(N($.timestamp)),className:`flex items-start p-2 rounded mb-1 cursor-pointer transition-colors ${Y?"bg-blue-50 border-l-4 border-blue-500":"hover:bg-gray-50 border-l-4 border-transparent"}`,children:p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center",children:[Y&&p.jsx(da,{className:"text-blue-500 mr-1",size:10}),p.jsx("span",{className:`font-medium text-sm ${Y?"text-blue-700":"text-gray-700"}`,children:$.topic})]}),p.jsx("div",{className:"text-xs text-gray-500 mt-1",children:$.timestamp})]})},U)})})]}),!j&&p.jsx("div",{className:"flex items-center justify-center h-40 text-gray-500",children:"No video selected"})]})]}):null},sB=({onDragStart:t})=>{const[e,r]=S.useState("all"),i={input:[{id:"transcript-input",type:"transcriptInput",label:"Transcript Input",description:"Upload and process transcript files",icon:p.jsx(L8,{className:"text-blue-600",size:20})},{id:"whisper-transcription",type:"whisperTranscription",label:"Whisper Transcription",description:"Transcribe audio/video using OpenAI Whisper",icon:p.jsx(sZ,{className:"text-indigo-600",size:20})}],processing:[{id:"prompt-editing",type:"promptEditing",label:"System Prompt Editor",description:"Edit AI processing prompts",icon:p.jsx(lZ,{className:"text-blue-600",size:20})}],output:[{id:"results-display",type:"resultsDisplay",label:"Results Display",description:"Display processing results",icon:p.jsx(mZ,{className:"text-amber-500",size:20})}],visualization:[{id:"keyword-bubble",type:"keywordBubble",label:"Keyword Bubble Chart",description:"Visualize keywords as interactive bubbles",icon:p.jsx(FJ,{className:"text-green-600",size:20})},{id:"map-visualization",type:"mapVisualization",label:"Location Map",description:"Map locations mentioned in the text",icon:p.jsx(tZ,{className:"text-green-600",size:20})}],media:[{id:"video-player",type:"videoPlayer",label:"Video Player",description:"Embed and control video content",icon:p.jsx(dZ,{className:"text-red-600",size:20})}],other:[{id:"metadata",type:"metadata",label:"Metadata",description:"Display and manage metadata",icon:p.jsx(YJ,{className:"text-gray-600",size:20})}]},s=[{id:"all",label:"All",icon:p.jsx(Bge,{})},{id:"input",label:"Input",icon:p.jsx(Jge,{})},{id:"processing",label:"Processing",icon:p.jsx(Oge,{})},{id:"output",label:"Output",icon:p.jsx(j$,{})},{id:"visualization",label:"Visualizations",icon:p.jsx(L$,{})},{id:"media",label:"Media",icon:p.jsx(Qge,{})},{id:"other",label:"Other",icon:p.jsx($ge,{})}],a=(u,c)=>{const d={id:c.id,type:c.type,label:c.label};u.dataTransfer.setData("application/reactflow",JSON.stringify(d)),u.dataTransfer.effectAllowed="move",t&&t(u)},o=()=>e==="all"?Object.values(i).flat():i[e]||[],l=u=>{const c=s.find(d=>d.id===u);return c?c.label:"Nodes"};return p.jsxs("div",{className:"nodes-toolbar bg-white rounded-xl shadow-md p-4 w-80",children:[p.jsxs("div",{className:"flex items-center mb-4",children:[p.jsx(Zge,{className:"text-blue-500 mr-2"}),p.jsx("h3",{className:"text-lg font-semibold",children:"Node Toolkit"})]}),p.jsx("div",{className:"flex flex-wrap mb-4 gap-1 border-b border-gray-200",children:s.map(u=>p.jsxs("button",{onClick:()=>r(u.id),className:`
              flex items-center px-3 py-2 text-sm rounded-t-lg transition-colors
              ${e===u.id?"bg-blue-50 text-blue-600 border-b-2 border-blue-500 font-medium":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}
            `,children:[p.jsx("span",{className:"mr-1.5",children:u.icon}),p.jsx("span",{children:u.label})]},u.id))}),p.jsx("div",{className:"mb-2",children:p.jsx("p",{className:"text-sm text-gray-500",children:"Drag and drop to add nodes to the canvas"})}),p.jsxs("div",{className:"grid gap-3 max-h-96 overflow-y-auto pr-2",children:[e!=="all"&&p.jsx("h4",{className:"text-sm font-medium text-gray-700 mt-1 mb-2",children:l(e)}),o().map(u=>p.jsx("div",{className:"border border-gray-200 rounded-lg p-3 cursor-grab hover:bg-blue-50 hover:border-blue-200 transition-colors",draggable:!0,onDragStart:c=>a(c,u),title:`Drag to add ${u.label}`,children:p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"mr-3 text-xl",children:u.icon}),p.jsxs("div",{children:[p.jsx("h4",{className:"font-medium text-gray-900",children:u.label}),p.jsx("p",{className:"text-xs text-gray-500",children:u.description})]})]})},u.id))]}),p.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100",children:p.jsx("p",{className:"text-xs text-gray-500",children:"ℹ️ Nodes can be connected by dragging from the handles"})})]})},MI={HORIZONTAL:"LR"},y2=(t,e,r=MI.HORIZONTAL)=>{const i=new Km.graphlib.Graph,s=350,a=250;return i.setGraph({rankdir:r,ranksep:400,nodesep:550,edgesep:120,marginx:100,marginy:150}),i.setDefaultNodeLabel(()=>({})),i.setDefaultEdgeLabel(()=>({})),t.forEach(c=>{const d=c.style||{},h=d.width,f=d.height;i.setNode(c.id,{width:h||(c.type==="resultsDisplay"?s+100:c.type==="metadata"?s+50:c.type==="keywordBubble"?600:s),height:f||(c.type==="resultsDisplay"?a+100:c.type==="videoPlayer"?a+150:c.type==="keywordBubble"?550:a)})}),e.forEach(c=>{i.setEdge(c.source,c.target)}),Km.layout(i),{nodes:t.map(c=>{const d=i.node(c.id),h={...c.style||{}};if(c.type==="keywordBubble"){h.width=600,h.height=550;let f=[],m=0;t.forEach(y=>{if(y.type==="metadata"){const b=i.node(y.id);b&&f.push({id:y.id,y:b.y})}}),f.length>0?m=f.reduce((b,_)=>b+_.y,0)/f.length:m=d?d.y:0;const v=5e3;return console.log("Using fixed position for keyword bubble:",v),{...c,position:{x:v,y:m-h.height/2},style:h}}return{...c,position:{x:d.x-d.width/2,y:d.y-d.height/2},style:h}}),edges:e}},ax=(t,e)=>{const r=[],i=[],s="input-node";r.push({id:s,type:"transcriptInput",position:{x:0,y:0},data:{label:"Transcript Input",queuedTranscripts:t.map(l=>({documentName:l.docName,youtubeUrl:l.youtubeUrl,file:{name:`${l.docName}.txt`}})),onProcessMultiple:()=>{},onQueueUpdate:()=>{}}});const a="prompt-node";r.push({id:a,type:"promptEditing",position:{x:0,y:0},data:{label:"System Prompt",systemMessage:"Analyze the provided civil rights oral history transcript to extract key information. Create a comprehensive summary of the entire interview capturing the main themes, historical context, and significance. Identify 5-6 key segments from the interview, noting timestamps, topics, and providing brief summaries of each segment.",model:"gpt-4o-mini"}}),i.push({id:`${s}-${a}`,source:s,target:a,animated:!0,type:"default"});const o="combined-keywords";return t.forEach((l,u)=>{var f,m,v,y,b;if(!l.docName||!l.summary){console.warn(`Interview at index ${u} is missing required fields`);return}const c=`interview-${u}`,d=`${c}-results`,h=`${c}-metadata`;r.push({id:d,type:"resultsDisplay",position:{x:0,y:0},data:{label:`Interview: ${l.docName}`,documentName:l.docName,summaries:l.summary||{},overallSummary:((f=l.summary)==null?void 0:f.overallSummary)||"No summary available",keyPoints:((m=l.summary)==null?void 0:m.keyPoints)||[],timestamp:l.timestamp||new Date().toISOString(),youtubeEmbedUrl:ox(l.youtubeUrl||""),openVideoPanel:(_,w,E)=>{e(_||ox(l.youtubeUrl||""),w||l.docName,E||l.summary||{})}}}),r.push({id:h,type:"metadata",position:{x:0,y:0},data:{label:`Metadata: ${l.docName}`,documentName:l.docName,youtubeUrl:l.youtubeUrl||"",youtubeEmbedUrl:ox(l.youtubeUrl||""),summaries:{overallSummary:((v=l.summary)==null?void 0:v.overallSummary)||"No summary available",keyPoints:((b=(y=l.summary)==null?void 0:y.keyPoints)==null?void 0:b.map(_=>({topic:_.topic||"",timestamp:_.timestamp||"",summary:_.summary||"",content:_.summary||"",keywords:typeof _.keywords=="string"?_.keywords:Array.isArray(_.keywords)?_.keywords.join(", "):""})))||[]}}}),i.push({id:`${a}-${d}`,source:a,target:d,animated:!0,type:"default"}),i.push({id:`${d}-${h}`,source:d,target:h,animated:!0,type:"default"})}),r.push({id:o,type:"keywordBubble",position:{x:0,y:0},style:{width:600,height:550},data:{label:"Civil Rights Keywords Visualization",description:"Combined keywords from all interviews",documentName:"All Interviews",summaries:{overallSummary:t.map(l=>{var u;return((u=l.summary)==null?void 0:u.overallSummary)||""}).join(" "),keyPoints:t.flatMap(l=>{var u,c;return((c=(u=l.summary)==null?void 0:u.keyPoints)==null?void 0:c.map(d=>({topic:d.topic||"",keywords:d.keywords||""})))||[]})}}}),t.forEach((l,u)=>{if(!l.docName||!l.summary)return;const d=`${`interview-${u}`}-metadata`;i.push({id:`${d}-${o}`,source:d,target:o,animated:!0,type:"default"})}),y2(r,i,MI.HORIZONTAL)},ox=t=>{if(!t)return"";if(t.includes("youtube.com/embed"))return t;try{if(t.includes("youtube.com/watch")){const e=new URL(t).searchParams.get("v");if(e)return`https://www.youtube.com/embed/${e}`}if(t.includes("youtu.be")){const e=t.split("/").pop().split("?")[0];if(e)return`https://www.youtube.com/embed/${e}`}}catch(e){console.warn("Error parsing YouTube URL:",e)}return t};function r1e({embedded:t=!1}){var q;const[e,r,i]=S$([]),[s,a,o]=T$([]),[l,u]=S.useState([]),[c,d]=S.useState(!0),[h,f]=S.useState(null),[m,v]=S.useState(null),[y,b]=S.useState(!1),[_,w]=S.useState(!0),[E,N]=S.useState({isOpen:!1,videoUrl:"",documentName:"",summaries:null}),M=(F,W,Q)=>{N({isOpen:!0,videoUrl:F,documentName:W,summaries:Q})},O=()=>{N(F=>({...F,isOpen:!1}))},A=()=>{b(!y)},D=S.useCallback((F,W,Q)=>{const H=nB(F,{openVideoPanel:M,documentName:"Example Document",summaries:{overallSummary:"This is an example summary for a node created from the toolbar.",keyPoints:[{topic:"Example Topic 1",timestamp:"00:15",summary:"Example point 1"},{topic:"Example Topic 2",timestamp:"01:30",summary:"Example point 2"}]}});return tB(F,W,Q,H.data)},[M]),{onDragOver:T,onDrop:I}=eB({onNodesChange:r,createNodeFromType:D}),x=MI.HORIZONTAL,R=S.useCallback(()=>{if(e.length===0)return;const{nodes:F,edges:W}=y2(e,s,x);r([...F]),a([...W])},[e,s,x,r,a]),P=S.useCallback(F=>{i(F)},[i]),j=S.useCallback(F=>{o(F)},[o]);S.useEffect(()=>{(async()=>{try{d(!0);let W;try{if(W=await fetch("./testResults.json"),!W.ok)throw new Error("Not found at root path")}catch{try{if(console.log("Trying at public/testResults.json..."),W=await fetch("public/testResults.json"),!W.ok)throw new Error("Not found in public folder")}catch{try{if(console.log("Trying at ./testResults.json..."),W=await fetch("./testResults.json"),!W.ok)throw new Error("Not found in current directory")}catch{throw new Error("Could not find testResults.json in any location")}}}const Q=await W.json();if(!Array.isArray(Q)){f("Invalid data format: expected an array of interviews"),d(!1);return}if(Q.length===0){f("No interview data found"),d(!1);return}u(Q);const{nodes:H,edges:X}=ax(Q,M);if(H.length===0){f("No valid interview data could be processed"),d(!1);return}r(H),a(X)}catch(W){console.error("Error fetching test results:",W),f(`Failed to load interview data: ${W.message}`)}finally{d(!1)}})()},[r,a]),S.useEffect(()=>{if(l.length!==0)if(console.log("Interview data:",l),m===null){const{nodes:F,edges:W}=ax(l,M);r(F),a(W)}else{const F=[l[m]];console.log("Selected interview:",F[0]);const{nodes:W,edges:Q}=ax(F,M);r(W),a(Q)}},[m,l,r,a]);const $=S.useCallback(F=>{const W=rI({...F,animated:!0,type:"default"},s),{nodes:Q,edges:H}=y2(e,W,x);r(Q),a(H)},[s,e,x,r,a]),U=F=>{const W=F.target.value;v(W==="all"?null:Number(W))};if(c)return p.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading interview data..."});if(h)return p.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 p-4 rounded my-4",children:[p.jsx("h3",{className:"font-bold mb-2",children:"Error Loading Data"}),p.jsx("p",{children:h}),p.jsxs("div",{className:"mt-4",children:[p.jsx("p",{className:"text-sm text-gray-700",children:"Troubleshooting steps:"}),p.jsxs("ul",{className:"list-disc pl-5 text-sm text-gray-700 mt-2",children:[p.jsxs("li",{children:["Check that the file ",p.jsx("code",{className:"bg-red-50 px-1",children:"testResults.json"})," exists in the public folder"]}),p.jsx("li",{children:"Verify that the JSON is correctly formatted"}),p.jsx("li",{children:"Make sure each interview has docName, summary, and youtubeUrl fields"})]}),p.jsxs("div",{className:"mt-4 p-2 bg-red-50 rounded text-xs font-mono",children:[p.jsx("p",{className:"mb-1 font-bold",children:"Debug Info:"}),p.jsxs("p",{children:["Current path: ",window.location.pathname]}),p.jsxs("p",{children:["Base URL: ",window.location.origin]}),p.jsxs("p",{children:["Error details: ",h.toString()]})]})]})]});const Y=t?"75vh":"80vh";return p.jsxs("div",{style:{width:"100%",height:Y,border:"1px solid #ccc"},className:"relative",children:[p.jsxs(uI,{nodes:e,edges:s,onNodesChange:P,onEdgesChange:j,onConnect:$,nodeTypes:DI,fitView:!0,attributionPosition:"bottom-right",onDragOver:T,onDrop:I,minZoom:.1,maxZoom:2,defaultViewport:{x:0,y:0,zoom:.8},children:[p.jsx(A$,{position:"bottom-right",showZoom:!0,showFitView:!0,showInteractive:!0,fitViewOptions:{padding:.2},className:"bg-white bg-opacity-80 p-1 rounded-lg shadow-md"}),p.jsx(k$,{}),p.jsx(P$,{variant:"dots",gap:16,size:1.5,color:"#aaaaaa",style:{backgroundColor:"#f8fafc"}}),p.jsx(Gr,{position:"top-left",className:`transition-all duration-300 ${y?"opacity-100":"opacity-0 pointer-events-none"}`,children:p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:A,className:"absolute -right-2 -top-2 bg-white p-1 rounded-full shadow-md hover:bg-gray-100 z-10",title:y?"Hide toolbar":"Show toolbar",children:y?"✕":"✚"}),p.jsx(sB,{onDragStart:F=>{}})]})}),!y&&p.jsx(Gr,{position:"top-left",children:p.jsxs("button",{onClick:A,className:"bg-blue-500 text-white p-2 rounded-lg shadow-md hover:bg-blue-600 transition-colors flex items-center",children:[p.jsx(cI,{className:"mr-2"}),"Show Node Toolkit"]})}),p.jsx(Gr,{position:"top-right",className:"bg-white p-3 rounded shadow",children:p.jsxs("div",{className:"flex flex-col space-y-3",children:[p.jsx("h3",{className:"font-semibold text-sm",children:"Civil Rights Interviews"}),p.jsxs("select",{value:m===null?"all":m,onChange:U,className:"border rounded px-2 py-1 text-sm",children:[p.jsx("option",{value:"all",children:"Show Complete Workflow"}),l.map((F,W)=>p.jsx("option",{value:W,children:F.docName},W))]}),p.jsx("div",{className:"text-xs text-gray-600",children:m===null?p.jsxs("span",{children:["Showing all ",l.length," processed interviews"]}):p.jsxs("span",{children:["Showing interview: ",(q=l[m])==null?void 0:q.docName]})}),p.jsxs("button",{onClick:R,className:"bg-indigo-500 text-white p-2 rounded-lg shadow-md hover:bg-indigo-600 transition-colors flex items-center justify-center font-medium mt-2",title:"Re-apply auto layout to organize nodes",children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),"Auto Layout"]})]})}),_&&p.jsx(Gr,{position:"top-center",className:"mt-2",children:p.jsxs("div",{className:"bg-blue-50 border border-blue-200 text-blue-800 px-4 py-3 rounded-lg shadow-md max-w-md text-sm relative",children:[p.jsx("button",{onClick:()=>w(!1),className:"absolute top-1 right-1 text-blue-500 hover:text-blue-700","aria-label":"Close notification",children:p.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),p.jsxs("p",{children:["Nodes will now stay where you drop them! Use the ",p.jsx("strong",{children:"Auto Layout"})," button to organize your flow."]})]})})]}),p.jsx(iB,{isOpen:E.isOpen,onClose:O,videoUrl:E.videoUrl,documentName:E.documentName,summaries:E.summaries})]})}function aB(){return p.jsxs("div",{className:"max-w-full mx-auto p-4",children:[p.jsx("div",{className:"flex items-center justify-between mb-4",children:p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold",children:"Civil Rights Interview Analysis Workflow"}),p.jsx("p",{className:"text-gray-600 text-sm",children:"Complete demonstration of transcript processing workflow from input to visualization"})]})}),p.jsx(Fh,{children:p.jsx(r1e,{})})]})}function i1e({summaries:t,handleResetData:e,testingMode:r,flowView:i,setFlowView:s}){return p.jsxs("div",{className:"mb-4 rounded-xl shadow-sm overflow-hidden",children:[p.jsxs("header",{className:"flex justify-between items-center p-4 bg-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("div",{className:"font-bold text-xl text-blue-700 flex items-center",children:[p.jsx(j$,{className:"mr-2"}),p.jsx("span",{children:"Transcript Summary"})]}),r&&p.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full",children:"Test Mode"})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[t&&p.jsxs("button",{onClick:e,className:"text-red-500 hover:text-red-700 flex items-center text-sm",children:[p.jsx(dI,{className:"mr-1",size:14}),"Reset"]}),p.jsx("div",{className:"text-xs text-gray-400",children:"v0.9.2"})]})]}),p.jsxs("div",{className:"p-3 bg-blue-50 border-t border-blue-100",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("h3",{className:"font-medium text-blue-600",children:"Application Views"}),p.jsx("div",{className:"text-sm text-gray-600",children:i!=="none"&&p.jsx(p.Fragment,{children:"Currently viewing the complete workflow demonstration"})})]}),p.jsxs("div",{className:"flex space-x-2",children:[p.jsx("button",{onClick:()=>s("none"),className:`px-3 py-1 rounded font-medium text-sm ${i==="none"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Build Your Own Analysis"}),p.jsx("button",{onClick:()=>s("basic"),className:`px-3 py-1 rounded font-medium text-sm ${i==="basic"?"bg-green-600 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:"See Complete Workflow Demo"})]})]})]})}const s1e=({error:t})=>t?p.jsx("div",{className:"mb-6 bg-red-100 border border-red-300 text-red-700 px-6 py-4 rounded-lg",children:p.jsxs("div",{className:"flex",children:[p.jsx("svg",{className:"w-6 h-6 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium",children:"Error"}),p.jsx("p",{className:"text-sm",children:t})]})]})}):null,a1e=({loading:t,message:e="Processing transcript..."})=>t?p.jsx(Gr,{position:"top-center",children:p.jsxs("div",{className:"flex items-center bg-white p-3 rounded-lg shadow-md",children:[p.jsx("div",{className:"w-6 h-6 border-2 border-blue-200 border-t-blue-500 rounded-full animate-spin mr-3"}),p.jsx("span",{className:"text-gray-500",children:e})]})}):null,o1e=(t,e)=>{const[r,i]=S.useState(()=>{try{const s=window.localStorage.getItem(t);return s?JSON.parse(s):e}catch(s){return console.error(`Error reading localStorage key "${t}":`,s),e}});return S.useEffect(()=>{try{const s=r instanceof Function?r(r):r;window.localStorage.setItem(t,JSON.stringify(s))}catch(s){console.error(`Error setting localStorage key "${t}":`,s)}},[t,r]),[r,i]},l1e=()=>{const[t,e]=o1e("transcript_data",{transcript:null,audioUrl:null,summaries:null,documentName:"",systemMessage:`
    You are an assistant that processes interview transcripts into structured summaries with timestamps and keywords.
    
    Always output the content in the following strict format:
    Overall Summary:
    [Provide a concise overall summary here.]
    
    Key Points:
    1. Title: [First key topic]
       Timestamp: [Start time - End time]
       Keywords: [Comma-separated list of keywords]
       Summary: [Provide a short summary of the first key topic.]
    `,savedToDatabase:!1,youtubeUrl:"",youtubeEmbedUrl:null,model:"gpt-4o-mini"}),[r,i]=S.useState(t.transcript),[s,a]=S.useState(null),[o,l]=S.useState(t.audioUrl),[u,c]=S.useState(t.summaries),[d,h]=S.useState(t.documentName),[f,m]=S.useState(t.systemMessage),[v,y]=S.useState(t.savedToDatabase),[b,_]=S.useState(t.youtubeUrl),[w,E]=S.useState(t.youtubeEmbedUrl),[N,M]=S.useState(""),[O,A]=S.useState(!1),[D,T]=S.useState(t.model||"gpt-4o-mini");return S.useEffect(()=>{(r||u||d||o||b||D)&&e({transcript:r,audioUrl:o,summaries:u,documentName:d,systemMessage:f,savedToDatabase:v,youtubeUrl:b,youtubeEmbedUrl:w,model:D})},[r,o,u,d,f,v,b,w,D,e]),{transcript:r,setTranscript:i,transcriptFile:s,setTranscriptFile:a,audioUrl:o,setAudioUrl:l,summaries:u,setSummaries:c,documentName:d,setDocumentName:h,systemMessage:f,setSystemMessage:m,savedToDatabase:v,setSavedToDatabase:y,youtubeUrl:b,setYoutubeUrl:_,youtubeEmbedUrl:w,setYoutubeEmbedUrl:E,currentTimestamp:N,setCurrentTimestamp:M,savingToDatabase:O,setSavingToDatabase:A,model:D,setModel:T,handleSummaryChange:q=>{u&&c({...u,overallSummary:q})},handleEditSummary:q=>{console.log("Editing summary:",q)},handleKeyPointChange:(q,F,W)=>{if(!u)return;const Q=[...u.keyPoints];Q[q]={...Q[q],[F]:W},c({...u,keyPoints:Q})},handleAddKeyPoint:()=>{if(!u)return;const q={topic:"New Key Point",timestamp:"00:00 - 00:00",keywords:"keyword1, keyword2",summary:"Add your summary here"};c({...u,keyPoints:[...u.keyPoints,q]})},handleRemoveKeyPoint:q=>{if(!u)return;const F=u.keyPoints.filter((W,Q)=>Q!==q);c({...u,keyPoints:F})},handleYoutubeUrlSubmit:q=>{try{let F="";if(q.includes("youtube.com/watch"))F=new URL(q).searchParams.get("v");else if(q.includes("youtu.be/")){const W=q.split("/");F=W[W.length-1]}else q.includes("youtube.com/embed/")&&(F=q.split("youtube.com/embed/")[1].split("?")[0]);if(F){const W=`https://www.youtube.com/embed/${F}?enablejsapi=1`;E(W)}else throw new Error("Invalid YouTube URL. Please provide a valid YouTube video URL (standard, shortened, or embed format).")}catch(F){throw console.error("Error processing YouTube URL:",F),new Error("Failed to process YouTube URL")}},jumpToTimestamp:(q,F,W)=>{try{const Q=Kbe(q);if(M(q.split(" - ")[0]),F.current&&isFinite(Q)&&(F.current.currentTime=Q,F.current.play()),W.current&&w&&isFinite(Q))try{W.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"seekTo",args:[Q,!0]}),"*")}catch(H){console.error("Error seeking YouTube video:",H)}}catch(Q){throw console.error(`Error processing timestamp "${q}":`,Q),new Error(`Invalid timestamp format: ${q}. Use MM:SS or HH:MM:SS format.`)}},handleResetData:()=>{window.confirm("Are you sure you want to reset all data? This cannot be undone.")&&(i(null),a(null),l(null),c(null),h(""),_(""),E(null),y(!1),m(`
    You are an assistant that processes interview transcripts into structured summaries with timestamps and keywords.
    
    Always output the content in the following strict format:
    Overall Summary:
    [Provide a concise overall summary here.]
    
    Key Points:
    1. Title: [First key topic]
       Timestamp: [Start time - End time]
       Keywords: [Comma-separated list of keywords]
       Summary: [Provide a short summary of the first key topic.]
  `),localStorage.removeItem("transcript_data"))}}},u1e={default:eh,straight:bv,step:wv},c1e={HORIZONTAL:"LR"},lx=(t,e,r=c1e.HORIZONTAL)=>{if(t.length===0)return{nodes:t,edges:e};const i=new Km.graphlib.Graph,s=350,a=250;i.setGraph({rankdir:r,ranksep:350,nodesep:450,edgesep:100,marginx:70,marginy:120}),i.setDefaultNodeLabel(()=>({})),i.setDefaultEdgeLabel(()=>({}));const u=t.filter(h=>h.type==="transcriptInput"||h.type==="promptEditing"),c=new Set(u.map(h=>h.id));return t.forEach(h=>{if(c.has(h.id))return;const f=h.style||{},m=f.width,v=f.height;i.setNode(h.id,{width:m||(h.type==="resultsDisplay"?s+100:h.type==="metadata"?s+50:h.type==="keywordBubble"?600:s),height:v||(h.type==="resultsDisplay"?a+100:h.type==="videoPlayer"?a+150:h.type==="keywordBubble"?550:a)})}),e.forEach(h=>{!c.has(h.source)&&!c.has(h.target)&&i.setEdge(h.source,h.target)}),Km.layout(i),{nodes:t.map(h=>{const f=i.node(h.id),m={...h.style||{}};if(c.has(h.id))return{...h,position:h.position,style:m};if(h.type==="keywordBubble"){m.width=m.width||600,m.height=m.height||550;let v=[],y=0;return t.forEach(_=>{if(_.type==="metadata"){const w=i.node(_.id);w&&v.push({id:_.id,y:w.y})}}),v.length>0?y=v.reduce((w,E)=>w+E.y,0)/v.length:y=f?f.y:0,{...h,position:{x:3e3,y:y-m.height/2},style:m}}return{...h,position:{x:f.x-f.width/2,y:f.y-f.height/2},style:m}}),edges:e}},d1e=t=>{if(!t)return"";if(t.includes("youtube.com/embed"))return t;try{if(t.includes("youtube.com/watch")){const e=new URL(t).searchParams.get("v");if(e)return`https://www.youtube.com/embed/${e}`}if(t.includes("youtu.be")){const e=t.split("/").pop().split("?")[0];if(e)return`https://www.youtube.com/embed/${e}`}}catch(e){console.warn("Error parsing YouTube URL:",e)}return t};function h1e(){const t=S.useRef(null),e=S.useRef(null),r=S.useRef(null),[i,s]=S.useState(!1),[a,o]=S.useState(null),[l]=S.useState(!1),[u,c]=S.useState("none"),[d,h]=S.useState(!1),[f,m]=S.useState([]),[v,y]=S.useState({inProgress:!1,current:0,total:0,message:""}),[b,_]=S.useState({isOpen:!1,videoUrl:"",documentName:"",summaries:null}),w=l1e(),{transcript:E,setTranscript:N,setTranscriptFile:M,audioUrl:O,setAudioUrl:A,summaries:D,documentName:T,setDocumentName:I,systemMessage:x,setSystemMessage:R,savedToDatabase:P,setSavedToDatabase:j,youtubeUrl:$,setYoutubeUrl:U,youtubeEmbedUrl:Y,currentTimestamp:q,setCurrentTimestamp:F,savingToDatabase:W,setSavingToDatabase:Q,handleSummaryChange:H,handleEditSummary:X,handleKeyPointChange:J,handleAddKeyPoint:ee,handleRemoveKeyPoint:se,handleYoutubeUrlSubmit:ce,jumpToTimestamp:Se,handleResetData:Ee,model:ie,setModel:ue}=w,[ge,ke]=S$([]),[Re,_e]=T$([]),V=S.useCallback(Ne=>{ke(oe=>lI(Ne,oe))},[]),B=S.useCallback(Ne=>{_e(oe=>c$(Ne,oe))},[]),G=S.useCallback(Ne=>{_e(oe=>{const pe=rI({...Ne,animated:!0,type:"default"},oe),{nodes:be,edges:Le}=lx(ge,pe);return ke(be),Le})},[ge,ke]),K=async Ne=>{try{M(Ne);const oe=await AL(Ne);N(oe)}catch(oe){console.error("Error reading transcript file:",oe),o("Failed to read transcript file")}},re=Ne=>{const oe=URL.createObjectURL(Ne);A(oe)},le=Ne=>{m(Ne)},he=async(Ne,oe,pe,be=ie)=>{if(!Ne)return null;try{const Le=oe||`Transcript-${Date.now()}`,Ce=await rB(Ne,x,be),We=pe?d1e(pe):"";return{documentName:Le,transcript:Ne,summary:Ce,youtubeUrl:pe,youtubeEmbedUrl:We}}catch(Le){throw console.error("Error processing transcript:",Le),Le}},ye=async Ne=>{if(Ne.length!==0)try{s(!0),o(null),y({inProgress:!0,current:0,total:0,message:"Setting up initial nodes..."}),console.log("Starting transcript processing with nodes:",ge);let oe=ge.filter(Ce=>Ce.type==="transcriptInput"||Ce.type==="promptEditing"),pe=[...Re];if(oe.length===0){console.log("No input nodes found, creating default nodes"),oe=[{id:"1",type:"transcriptInput",position:{x:100,y:100},data:{label:"Transcript Input",onTranscriptUpload:K,onAudioUpload:re,documentName:T,onDocumentNameChange:I,youtubeUrl:$,onYoutubeUrlChange:U,onYoutubeUrlSubmit:ce,queuedTranscripts:[],onQueueUpdate:le,onProcessMultiple:ye}},{id:"2",type:"promptEditing",position:{x:100,y:300},data:{label:"Prompt Editing",systemMessage:x,onSystemMessageChange:R,onProcess:he,model:ie,onModelChange:ue,canProcess:!!E}}];const yt={id:"e1-2",source:"1",target:"2",type:"default",animated:!0,style:{stroke:"#3b82f6",strokeWidth:2}};pe.push(yt)}else console.log("Found existing input nodes:",oe),oe=oe.map(Ce=>({...Ce}));console.log("Input nodes to preserve:",oe);const be=[...oe],Le=[];y({inProgress:!0,current:0,total:Ne.length,message:"Starting batch processing..."});for(let Ce=0;Ce<Ne.length;Ce++){const We=Ne[Ce];y({inProgress:!0,current:Ce+1,total:Ne.length,message:`Processing "${We.documentName}" (${Ce+1}/${Ne.length})`});try{const yt=We.file?await AL(We.file):"Sample transcript content for testing",ft=await he(yt,We.documentName,We.youtubeUrl);if(ft){Le.push(ft);const gn=`transcript-${Date.now()}-${Ce}`,Xt=`${gn}-results`,xt=`${gn}-metadata`,jn={id:Xt,type:"resultsDisplay",position:{x:500,y:100+Ce*300},data:{label:`Results: ${ft.documentName}`,documentName:ft.documentName,summaries:ft.summary,onSummaryChange:H,onKeyPointChange:J,onAddKeyPoint:ee,onRemoveKeyPoint:se,onEditSummary:X,onSaveToDatabase:Ie,savingToDatabase:!1,savedToDatabase:!1,youtubeEmbedUrl:ft.youtubeEmbedUrl,openVideoPanel:Be,processed:!0}},St={id:xt,type:"metadata",position:{x:900,y:100+Ce*300},data:{label:`Metadata: ${ft.documentName}`,documentName:ft.documentName,youtubeUrl:ft.youtubeUrl||"",youtubeEmbedUrl:ft.youtubeEmbedUrl,summaries:ft.summary,transcript:yt.substring(0,300)+"...",savingToDatabase:!1,savedToDatabase:!1,processed:!0}};be.push(jn),be.push(St);const vn=oe.find(Fr=>Fr.type==="promptEditing");vn&&pe.push({id:`e-${vn.id}-${Xt}`,source:vn.id,target:Xt,animated:!0,type:"default"}),pe.push({id:`e-${Xt}-${xt}`,source:Xt,target:xt,animated:!0,type:"default"})}}catch(yt){console.error(`Error processing "${We.documentName}":`,yt)}}console.log("Final nodes before update:",be),console.log("Final edges before update:",pe),ke(be),_e(pe),y({inProgress:!1,current:Ne.length,total:Ne.length,message:`Completed processing ${Ne.length} transcripts`}),m([])}catch(oe){console.error("Error in batch processing:",oe),o("Failed to process transcripts batch"),y({inProgress:!1,current:0,total:0,message:"Error processing transcripts"})}finally{s(!1)}},Ie=async()=>{try{Q(!0),await Ybe(T,D),j(!0)}catch(Ne){console.error("Error saving to database:",Ne),o("Failed to save to database")}finally{Q(!1)}},Be=(Ne,oe,pe)=>{_({isOpen:!0,videoUrl:Ne,documentName:oe,summaries:pe})},Oe=()=>{_(Ne=>({...Ne,isOpen:!1}))},ze=S.useCallback((Ne,oe,pe)=>{const be=nB(Ne,{handleTranscriptUpload:K,handleAudioUpload:re,documentName:T,setDocumentName:I,youtubeUrl:$,setYoutubeUrl:U,handleYoutubeUrlSubmit:ce,queuedTranscripts:f,onQueueUpdate:le,onProcessMultiple:ye,systemMessage:x,setSystemMessage:R,processTranscript:he,transcript:E,model:ie,setModel:ue,summaries:D,audioUrl:O,audioRef:e,jumpToTimestamp:Se,handleSaveToDatabase:Ie,savingToDatabase:W,savedToDatabase:P,handleSummaryChange:H,handleKeyPointChange:J,handleAddKeyPoint:ee,handleRemoveKeyPoint:se,handleEditSummary:X,youtubeEmbedUrl:Y,videoRef:r,currentTimestamp:q,setCurrentTimestamp:F,openVideoPanel:Be});return tB(Ne,oe,pe,be.data)},[K,re,T,I,$,U,ce,x,R,he,E,ie,ue,D,O,e,Se,Ie,W,P,H,J,ee,se,X,Y,r,q,F,f,ye,Be]),{onDragOver:lt,onDrop:vt}=eB({onNodesChange:ke,createNodeFromType:ze});S.useEffect(()=>{if(ge.length===0){console.log("Initializing nodes with default layout");const Ne=[{id:"1",type:"transcriptInput",position:{x:100,y:100},data:{label:"Transcript Input",onTranscriptUpload:K,onAudioUpload:re,documentName:T,onDocumentNameChange:I,youtubeUrl:$,onYoutubeUrlChange:U,onYoutubeUrlSubmit:ce,queuedTranscripts:[],onQueueUpdate:le,onProcessMultiple:ye}},{id:"2",type:"promptEditing",position:{x:100,y:300},data:{label:"Prompt Editing",systemMessage:x,onSystemMessageChange:R,onProcess:he,model:ie,onModelChange:ue,canProcess:!!E}}],{nodes:oe,edges:pe}=lx(Ne,[{id:"e1-2",source:"1",target:"2",type:"default",animated:!0,style:{stroke:"#3b82f6",strokeWidth:2}}]);ke(oe),_e(pe)}},[ge.length,ke,_e,K,re,x,R,he,ie,ue,E,T,I,$,U,ce,ye]);const At=()=>{h(!d)},Ke=S.useCallback(()=>{const{nodes:Ne,edges:oe}=lx(ge,Re);ke(Ne),_e(oe)},[ge,Re,ke,_e]);return p.jsxs("div",{className:"max-w-full mx-auto p-4 bg-gray-50 min-h-screen font-sans",children:[p.jsx(i1e,{summaries:D,handleResetData:Ee,testingMode:l,flowView:u,setFlowView:c}),p.jsx(s1e,{error:a}),i&&!u&&p.jsxs("div",{className:"flex justify-center items-center p-4",children:[p.jsx("div",{className:"w-6 h-6 border-2 border-blue-200 border-t-blue-500 rounded-full animate-spin mr-3"}),p.jsx("span",{className:"text-gray-500",children:"Loading..."})]}),u==="none"?p.jsxs("div",{style:{width:"100%",height:"85vh"},className:"bg-white rounded-xl shadow-md overflow-hidden relative",ref:t,children:[p.jsxs(uI,{nodes:ge,edges:Re,onNodesChange:V,onEdgesChange:B,onConnect:G,nodeTypes:DI,edgeTypes:u1e,defaultEdgeOptions:{animated:!0},onDragOver:lt,onDrop:vt,fitView:!0,minZoom:.1,maxZoom:2,defaultViewport:{x:0,y:0,zoom:.8},children:[p.jsx(A$,{position:"bottom-right",showZoom:!0,showFitView:!0,showInteractive:!0,fitViewOptions:{padding:.2},className:"bg-white bg-opacity-80 p-1 rounded-lg shadow-md"}),p.jsx(k$,{}),p.jsx(P$,{variant:"dots",gap:16,size:1.5,color:"#aaaaaa",style:{backgroundColor:"#f8fafc"}}),p.jsx(Gr,{position:"top-left",className:`transition-all duration-300 ${d?"opacity-100":"opacity-0 pointer-events-none"}`,children:p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:At,className:"absolute -right-2 -top-2 bg-white p-1 rounded-full shadow-md hover:bg-gray-100 z-10",title:d?"Hide toolbar":"Show toolbar",children:d?"✕":"✚"}),p.jsx(sB,{onDragStart:Ne=>{}})]})}),!d&&p.jsx(Gr,{position:"top-left",children:p.jsxs("button",{onClick:At,className:"bg-blue-500 text-white p-2 rounded-lg shadow-md hover:bg-blue-600 transition-colors flex items-center",children:[p.jsx(cI,{className:"mr-2"}),"Show Node Toolkit"]})}),p.jsx(Gr,{position:"top-right",children:p.jsxs("button",{onClick:Ke,className:"bg-indigo-500 text-white p-3 rounded-lg shadow-md hover:bg-indigo-600 transition-colors flex items-center font-medium",title:"Re-apply auto layout to organize nodes",children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),"Auto Layout"]})}),v.inProgress&&p.jsx(Gr,{position:"bottom-center",className:"mb-8 bg-white p-3 rounded-lg shadow-lg",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"font-medium mb-1",children:"Batch Processing"}),p.jsx("div",{className:"text-sm text-gray-600",children:v.message}),p.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mt-2",children:p.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${v.current/v.total*100}%`}})}),p.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[v.current," of ",v.total," transcripts processed"]})]})}),p.jsx(a1e,{loading:i,message:"Processing transcript..."})]}),p.jsx(iB,{isOpen:b.isOpen,onClose:Oe,videoUrl:b.videoUrl,documentName:b.documentName,summaries:b.summaries,currentTimestamp:q,setCurrentTimestamp:F})]}):p.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:p.jsx(Fh,{children:p.jsx(aB,{embedded:!0})})})]})}function f1e(){return p.jsx(Fh,{children:p.jsx(h1e,{})})}function p1e(){const[t,e]=S.useState(""),r=yr(),i=s=>{s.preventDefault(),t.trim()?r(`/playlist-builder?keywords=${encodeURIComponent(t)}`):alert("Please enter at least one keyword.")};return p.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans flex flex-col items-center justify-center",children:[p.jsxs("div",{className:"w-full max-w-3xl text-center mb-16",children:[p.jsx("h1",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text",children:"Search Interviews"}),p.jsx("p",{className:"text-base leading-relaxed text-gray-600 mb-10 max-w-xl mx-auto",children:"Enter keywords separated by commas to find relevant interviews and create custom playlists"}),p.jsx("form",{onSubmit:i,className:"w-full",children:p.jsxs("div",{className:"relative w-full",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:p.jsx(dT,{className:"w-5 h-5 text-gray-500"})}),p.jsx("input",{type:"text",value:t,onChange:s=>e(s.target.value),placeholder:"civil rights, voting, education...",className:"w-full pl-12 pr-32 py-5 border border-gray-200 bg-white rounded-xl shadow-sm outline-none text-base text-gray-900 transition-all duration-300 focus:shadow-blue-300 focus:ring-2 focus:ring-blue-500"}),p.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-medium rounded-lg shadow-sm border-none cursor-pointer transition-all duration-300 hover:from-blue-700 hover:to-indigo-700 hover:shadow-md",children:"Search"})]})})]}),p.jsx("div",{className:"w-full max-w-3xl",children:p.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[p.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Popular Keywords"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:["civil rights","voting","education","segregation","protests","leadership","communities","legislation","equality","freedom"].map(s=>p.jsx("button",{onClick:()=>{e(s),r(`/playlist-builder?keywords=${encodeURIComponent(s)}`)},className:"px-4 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm border-none cursor-pointer transition-colors duration-200 hover:bg-blue-100 hover:text-blue-800",children:s},s))})]})})]})}function m1e(){const[t]=fg(),e=yr(),r=t.get("documentName"),[i,s]=S.useState(!0),[a,o]=S.useState(null),[l,u]=S.useState(null),[c,d]=S.useState([]),[h,f]=S.useState(null),[m,v]=S.useState(!1),[y,b]=S.useState(!1),[_,w]=S.useState(!1),[E,N]=S.useState(0),[M,O]=S.useState(0),[A,D]=S.useState(0),[T,I]=S.useState(null),[x,R]=S.useState(null),P=S.useRef(null),j=S.useRef(null),$=ie=>{if(!ie)return null;const ue=ie.match(/(?:embed\/|watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return ue?ue[1]:null},U=ie=>{if(!ie)return 0;const ge=ie.split(" - ")[0].replace(/[\[\]]/g,"").trim().split(":").map(Number);return ge.length===3?ge[0]*3600+ge[1]*60+ge[2]:ge.length===2?ge[0]*60+ge[1]:0},Y=ie=>Array.isArray(ie)?ie:typeof ie=="string"?ie.split(",").map(ue=>ue.trim()):[],q=ie=>{if(!c||c.length===0)return 0;for(let ue=c.length-1;ue>=0;ue--)if(U(c[ue].timestamp)<=ie)return ue;return 0};S.useEffect(()=>{if(!r){o("Document name is missing"),s(!1);return}async function ie(){try{s(!0);const ue=Is(It,"interviewSummaries",r),ge=await pu(ue);if(!ge.exists()){o("Interview not found"),s(!1);return}const ke=ge.data();u(ke);const Re=rn(It,"interviewSummaries",r,"subSummaries"),_e=await sn(Re),V=[];_e.forEach(B=>{V.push({id:B.id,...B.data()})}),V.sort((B,G)=>U(B.timestamp)-U(G.timestamp)),d(V),s(!1)}catch(ue){console.error("Error fetching interview data:",ue),o("Failed to load interview data"),s(!1)}}ie()},[r]),S.useEffect(()=>{if(window.YT&&window.YT.Player){b(!0);return}const ie=document.createElement("script");ie.src="https://www.youtube.com/iframe_api",ie.async=!0,ie.onload=()=>{window.YT&&window.YT.Player&&b(!0)},document.body.appendChild(ie),window.onYouTubeIframeAPIReady=()=>{b(!0)}},[]),S.useEffect(()=>{if(!y||!(l!=null&&l.videoEmbedLink)||!x)return;const ie=$(l.videoEmbedLink);if(!ie){console.error("Invalid YouTube video link");return}return P.current&&typeof P.current.destroy=="function"&&(P.current.destroy(),v(!1)),P.current=new window.YT.Player(x,{videoId:ie,width:"100%",height:"100%",playerVars:{autoplay:0,controls:0,rel:0,modestbranding:1},events:{onReady:ue=>{v(!0),O(ue.target.getDuration()),console.log("Player is ready with duration:",ue.target.getDuration())},onStateChange:ue=>{w(ue.data===window.YT.PlayerState.PLAYING),ue.data===window.YT.PlayerState.ENDED&&w(!1)},onError:ue=>{console.error("YouTube player error:",ue.data)}}}),j.current=setInterval(()=>{if(P.current&&typeof P.current.getCurrentTime=="function"){const ue=P.current.getCurrentTime();N(ue);const ge=q(ue);ge!==A&&D(ge)}},500),()=>{j.current&&clearInterval(j.current),P.current&&typeof P.current.destroy=="function"&&(P.current.destroy(),P.current=null)}},[y,l,x,A]),S.useEffect(()=>{T!==null&&P.current&&typeof P.current.seekTo=="function"&&(P.current.seekTo(T,!0),I(null))},[T]);const F=ie=>{console.log("Seeking to",ie,"seconds"),I(ie),P.current&&typeof P.current.seekTo=="function"&&(P.current.seekTo(ie,!0),P.current.playVideo(),w(!0))},W=ie=>{f(h===ie?null:ie)},Q=()=>{P.current&&typeof P.current.playVideo=="function"&&(P.current.playVideo(),w(!0))},H=()=>{P.current&&typeof P.current.pauseVideo=="function"&&(P.current.pauseVideo(),w(!1))},X=()=>{if(A<c.length-1){const ie=c[A+1],ue=U(ie.timestamp);F(ue),D(A+1)}},J=()=>{if(A>0){const ie=c[A-1],ue=U(ie.timestamp);F(ue),D(A-1)}},ee=({summary:ie,index:ue,isOpen:ge,isActive:ke})=>{const Re=S.useRef(null),[_e,V]=S.useState(0);S.useEffect(()=>{ge&&Re.current&&V(Re.current.scrollHeight)},[ge]);const B=U(ie.timestamp),G=Y(ie.keywords),K=ue===A;return p.jsxs("div",{className:`accordion-item border-b border-gray-200 ${K?"border-l-4 border-l-blue-500":""}`,children:[p.jsxs("button",{onClick:()=>W(ue),className:`w-full flex items-center justify-between p-4 text-left transition-colors ${ge?"bg-blue-50 text-blue-700":K?"bg-blue-50/50 text-blue-600":"text-gray-800 hover:bg-gray-50"}`,children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center font-bold mr-3 ${K?"bg-blue-500 text-white":"bg-blue-100 text-blue-700"}`,children:ue+1}),p.jsx("span",{className:"font-bold",children:ie.topic})]}),ge?p.jsx(zJ,{size:18}):p.jsx(UJ,{size:18})]}),p.jsx("div",{style:{height:ge?_e||"auto":0,overflow:"hidden",transition:"height 0.3s ease",maxHeight:ge?"1000px":"0"},children:p.jsxs("div",{ref:Re,className:"p-4 bg-gray-50",children:[p.jsxs("button",{onClick:re=>{re.stopPropagation(),F(B)},className:`flex items-center mb-4 text-blue-600 hover:text-blue-800 transition-colors ${m?"cursor-pointer":"opacity-50 cursor-wait"}`,disabled:!m,children:[p.jsx(M8,{size:16,className:"mr-2"}),p.jsx("span",{className:"font-bold",children:ie.timestamp?ie.timestamp.split(" - ")[0].replace(/[\[\]]/g,"").trim():"Unknown time"})]}),G.length>0&&p.jsx("div",{className:"mb-4 text-sm flex flex-wrap",children:G.map((re,le)=>p.jsx("span",{className:"mr-2 mb-2 px-2.5 py-0.5 bg-blue-100 text-blue-800 rounded-full text-xs cursor-pointer hover:bg-blue-200 transition-colors",onClick:he=>{he.stopPropagation(),e(`/playlist-builder?keywords=${encodeURIComponent(re)}`)},children:re},le))}),p.jsx("p",{className:"text-gray-700 leading-relaxed",children:ie.summary}),p.jsx("div",{className:"mt-4",children:p.jsx("button",{className:"text-sm text-blue-600 hover:underline hover:text-blue-800 transition-colors",onClick:re=>{re.stopPropagation(),e(`/clip-player?documentName=${encodeURIComponent(r)}&clipId=${encodeURIComponent(ie.id)}`)},children:"▶ View this clip as a standalone page"})})]})})]})},se=ie=>{if(isNaN(ie))return"00:00";const ue=Math.floor(ie/3600),ge=Math.floor(ie%3600/60),ke=Math.floor(ie%60);return ue>0?`${ue.toString().padStart(2,"0")}:${ge.toString().padStart(2,"0")}:${ke.toString().padStart(2,"0")}`:`${ge.toString().padStart(2,"0")}:${ke.toString().padStart(2,"0")}`},ce=()=>c.map((ie,ue)=>({id:ie.id||ue,label:ie.topic||`Segment ${ue+1}`,timestamp:ie.timestamp,startSeconds:U(ie.timestamp),endSeconds:ue<c.length-1?U(c[ue+1].timestamp):M,summary:ie.summary}));if(i)return p.jsx("div",{className:"flex justify-center items-center h-64",children:p.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})});if(a)return p.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-xl",children:p.jsxs("p",{children:[p.jsx("strong",{children:"Error:"})," ",a]})});const Se=ce(),Ee=c.length>0;return p.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 p-6",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:(l==null?void 0:l.name)||r}),p.jsxs("p",{className:"text-gray-600",children:[(l==null?void 0:l.role)&&p.jsx("span",{className:"italic",children:l.role}),c.length>0&&p.jsx("span",{className:"mx-2 text-gray-400",children:"•"}),c.length>0&&p.jsxs("span",{children:[c.length," segments"]})]})]}),p.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[p.jsxs("div",{className:"w-full max-w-2xl mx-auto relative rounded-lg overflow-hidden",style:{height:"360px"},children:[p.jsx("div",{className:"absolute inset-0 bg-black",ref:R}),!m&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 pointer-events-none",children:p.jsx("div",{className:"w-10 h-10 border-4 border-white/50 border-t-white rounded-full animate-spin"})})]}),Ee&&m&&p.jsxs("div",{className:"mt-6 mb-4 w-full max-w-2xl mx-auto",children:[p.jsxs("div",{className:"relative w-full h-2 bg-gray-200 rounded-full overflow-hidden cursor-pointer",onClick:ie=>{const ue=ie.currentTarget.getBoundingClientRect(),ke=(ie.clientX-ue.left)/ue.width*M;F(ke)},onMouseMove:ie=>{if(ie.buttons===1){const ue=ie.currentTarget.getBoundingClientRect(),ke=(ie.clientX-ue.left)/ue.width*M;F(ke)}},children:[p.jsx("div",{className:"absolute top-0 left-0 h-full bg-blue-500",style:{width:`${E/M*100}%`}}),Se.map((ie,ue)=>p.jsx("div",{className:"absolute top-0 w-0.5 h-full bg-gray-400 cursor-pointer",style:{left:`${ie.startSeconds/M*100}%`},onClick:ge=>{ge.stopPropagation(),F(ie.startSeconds)},title:ie.label},ue))]}),p.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[p.jsx("span",{children:se(E)}),p.jsx("span",{children:se(M)})]})]}),p.jsx("div",{className:"w-full max-w-2xl mx-auto flex justify-center items-center py-3 mt-5",children:p.jsx(MV,{onPrevious:J,onPlay:Q,onPause:H,onNext:X,isPlaying:_,hasPrevious:A>0,hasNext:A<c.length-1})}),Ee&&c[A]&&p.jsxs("div",{className:"w-full max-w-2xl mx-auto mt-6 pt-4 border-t border-gray-200",children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:c[A].topic||`Segment ${A+1}`}),Y(c[A].keywords).length>0&&p.jsx("div",{className:"mb-3 flex flex-wrap",children:Y(c[A].keywords).map((ie,ue)=>p.jsx("span",{className:"mr-2 mb-2 px-2.5 py-0.5 bg-blue-100 text-blue-800 rounded-full text-xs cursor-pointer hover:bg-blue-200 transition-colors",onClick:()=>e(`/playlist-builder?keywords=${encodeURIComponent(ie)}`),children:ie},ue))}),p.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:p.jsx("p",{className:"m-0 text-base leading-relaxed text-gray-700",children:c[A].summary})})]})]}),p.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:p.jsxs("div",{className:"p-6",children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Overview"}),p.jsx("p",{className:"text-gray-700 leading-relaxed",children:(l==null?void 0:l.mainSummary)||"No summary available"})]})}),p.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[p.jsx("div",{className:"p-4 border-b border-gray-200",children:p.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Interview Segments"})}),c.map((ie,ue)=>p.jsx(ee,{summary:ie,index:ue,isOpen:h===ue,isActive:A===ue},ie.id||ue)),c.length===0&&p.jsx("div",{className:"p-6 text-center text-gray-500",children:"No segments available for this interview"})]})]})}function g1e(){var _;const[t]=fg(),e=yr(),r=t.get("documentName"),i=t.get("clipId"),[s,a]=S.useState(null),[o,l]=S.useState(null),[u,c]=S.useState(null),[d,h]=S.useState(!1),f=S.useRef(null),m=w=>{const E=w==null?void 0:w.match(/(?:embed\/|watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return(E==null?void 0:E[1])||null},v=w=>{if(!w)return 0;const N=w.split(" - ")[0].replace(/[\[\]]/g,"").trim().split(":").map(Number);return N.length===3?N[0]*3600+N[1]*60+N[2]:N[0]*60+N[1]};S.useEffect(()=>{(async()=>{try{const E=await pu(Is(It,"interviewSummaries",r)),N=await pu(Is(It,"interviewSummaries",r,"subSummaries",i));if(!E.exists()||!N.exists()){c("Clip or interview not found");return}a(E.data()),l(N.data())}catch(E){console.error(E),c("Failed to load data")}})()},[r,i]),S.useEffect(()=>{if(window.YT&&window.YT.Player)return;const w=document.createElement("script");w.src="https://www.youtube.com/iframe_api",document.body.appendChild(w),window.onYouTubeIframeAPIReady=()=>y()},[]);const y=()=>{if(!(s!=null&&s.videoEmbedLink)||!f.current)return;const w=m(s.videoEmbedLink),E=v(o==null?void 0:o.timestamp);new window.YT.Player(f.current,{videoId:w,width:"100%",height:"360",playerVars:{autoplay:1,start:E,controls:1,modestbranding:1},events:{onReady:()=>h(!0)}})};if(S.useEffect(()=>{var w;s&&o&&((w=window.YT)!=null&&w.Player)&&y()},[s,o]),u)return p.jsx("div",{className:"p-6 text-red-600",children:u});if(!s||!o)return p.jsx("div",{className:"p-6",children:"Loading..."});const b=Array.isArray(o.keywords)?o.keywords:((_=o.keywords)==null?void 0:_.split(","))||[];return p.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-6",children:[p.jsx("div",{children:p.jsx("h1",{className:"text-3xl font-bold text-blue-700 hover:underline cursor-pointer",onClick:()=>e(`/interview-player?documentName=${encodeURIComponent(r)}`),children:s.name})}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h2",{className:"text-2xl font-semibold text-blue-800",children:o.topic}),p.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[p.jsx(M8,{size:16,className:"mr-2"}),p.jsx("span",{children:o.timestamp})]}),b.length>0&&p.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:b.map((w,E)=>p.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs flex items-center gap-1 cursor-pointer hover:bg-blue-200",onClick:()=>e(`/playlist-builder?keywords=${encodeURIComponent(w)}`),children:[p.jsx(O8,{size:12})," ",w]},E))})]}),p.jsx("div",{className:"rounded-lg overflow-hidden bg-black mt-6",children:p.jsx("div",{ref:f})}),p.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mt-4",children:p.jsx("p",{className:"text-gray-800 leading-relaxed",children:o.summary})}),s.role&&p.jsx("div",{className:"text-gray-600 text-lg mt-6 italic",children:s.role})]})}function v1e({onViewAllClips:t}){const[e,r]=S.useState(!0),[i,s]=S.useState(null),[a,o]=S.useState([]),[l,u]=S.useState(null),[c,d]=S.useState(""),[h,f]=S.useState([]),m=yr(),{cache:v,updateCache:y,addSearchToCache:b,getSearchFromCache:_}=S.useContext(Bv);S.useEffect(()=>{v.keywords?(console.log("Using cached keyword data"),o(v.keywords),r(!1)):w()},[v.keywords]),S.useEffect(()=>{if(c){const x=_("keywords",c);if(x)console.log("Using cached keyword search results"),f(x);else{const R=a.filter(P=>P.keyword.toLowerCase().includes(c.toLowerCase()));f(R),b("keywords",c,R)}}else f(a)},[c,a]);const w=async()=>{try{r(!0);const x={},R=await sn(rn(It,"interviewSummaries"));for(const j of R.docs){const $=j.id,U=j.data(),Y=rn(It,"interviewSummaries",$,"subSummaries");(await sn(Y)).forEach(F=>{const W=F.data();W.keywords&&W.keywords.split(",").map(H=>H.trim().toLowerCase()).forEach(H=>{x[H]||(x[H]={count:0,summaries:[]}),x[H].count++;const X={...W,id:F.id,documentName:$,videoEmbedLink:U.videoEmbedLink,personName:U.name||"Unknown",thumbnailUrl:U.videoEmbedLink?`https://img.youtube.com/vi/${E(U.videoEmbedLink)}/mqdefault.jpg`:null};x[H].summaries.push(X)})})}const P=Object.entries(x).filter(([j,$])=>$.count>1).map(([j,$])=>{let U=0;return $.summaries.forEach(Y=>{if(Y.timestamp&&Y.timestamp.includes(" - ")){const q=N(Y.timestamp),F=N(Y.timestamp.split(" - ")[1]);U+=Math.max(0,M(F)-M(q))}}),{keyword:j,count:$.count,totalLengthSeconds:U,summaries:$.summaries}}).sort((j,$)=>$.count-j.count);o(P),f(P),y("keywords",P),r(!1)}catch(x){console.error("Error fetching keywords:",x),s("Failed to load keyword data"),r(!1)}},E=x=>{if(!x)return null;const R=/^.*(youtu.be\/|v\/|e\/|u\/\w+\/|embed\/|v=)([^#&?]*).*/,P=x.match(R);return P&&P[2].length===11?P[2]:null},N=x=>{const R=x.match(/(?:\[)?(\d{1,2}:\d{2}(?::\d{2})?)/);return R?R[1]:"00:00"},M=x=>{const R=x.split(":").map(Number);return R.length===2?R[0]*60+R[1]:R.length===3?R[0]*3600+R[1]*60+R[2]:0},O=x=>{u(l===x?null:x)},A=x=>{m(`/playlist-builder?keywords=${encodeURIComponent(x)}`)},D=x=>{m(`/playlist-editor?keywords=${encodeURIComponent(x)}`)},T=(x,R)=>{m(`/clip-player?documentName=${encodeURIComponent(x)}&clipId=${encodeURIComponent(R)}`)};function I(x){const R=Math.floor(x/3600),P=Math.floor(x%3600/60),j=x%60;return R>0?`${R}:${P.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}`:`${P}:${j.toString().padStart(2,"0")}`}return e?p.jsx("div",{className:"flex justify-center items-center h-64 bg-gray-50",children:p.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"})}):i?p.jsx("div",{className:"flex justify-center items-center h-64 bg-gray-50",children:p.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg shadow-sm",children:i})}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"mb-6",children:p.jsxs("div",{className:"max-w-md",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter Keywords"}),p.jsx("input",{type:"text",placeholder:"Type to filter...",value:c,onChange:x=>d(x.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})}),p.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:h.length===0?p.jsx("div",{className:"p-6 text-center text-gray-500",children:"No keywords found matching your search."}):p.jsx("ul",{className:"list-none m-0 p-0 border-t border-gray-100",children:h.map(x=>p.jsx("li",{className:"border-b border-gray-100 transition-colors hover:bg-gray-50",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-blue-600 mb-2 cursor-pointer transition-colors hover:text-blue-800",onClick:()=>O(x.keyword),children:x.keyword}),p.jsxs("div",{className:"my-2",children:[p.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-blue-100 text-blue-800 text-xs font-medium mr-2",children:[x.count," clips"]}),p.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-green-100 text-green-800 text-xs font-medium",children:[I(x.totalLengthSeconds)," total length"]})]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{onClick:()=>A(x.keyword),className:"inline-flex items-center px-3 py-2 border-0 rounded-md bg-blue-600 text-white text-sm font-medium cursor-pointer transition-colors hover:bg-blue-700",children:[p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"mr-1.5",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Play"]}),p.jsxs("button",{onClick:()=>D(x.keyword),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md bg-white text-gray-600 text-sm font-medium cursor-pointer transition-colors hover:bg-gray-50",children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"mr-1.5",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]})]})]}),l===x.keyword&&p.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h4",{className:"text-base font-medium text-gray-600",children:"Clips with this keyword:"}),p.jsxs("button",{onClick:()=>t(x.keyword),className:"text-blue-600 text-sm font-medium flex items-center hover:text-blue-800",children:["View all ",x.count," clips",p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-1",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:x.summaries.slice(0,6).map((R,P)=>p.jsxs("div",{className:"bg-gray-50 rounded-lg shadow overflow-hidden hover:shadow-md transition-shadow cursor-pointer",onClick:()=>T(R.documentName,R.id),children:[p.jsxs("div",{className:"relative pb-[56.25%] bg-gray-200",children:[R.thumbnailUrl?p.jsx("img",{src:R.thumbnailUrl,alt:R.topic||R.documentName,className:"absolute inset-0 w-full h-full object-cover"}):p.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-300",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),p.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-3",children:p.jsx("span",{className:"text-white text-xs font-medium",children:R.timestamp})})]}),p.jsxs("div",{className:"p-3",children:[p.jsx("h4",{className:"text-sm font-medium text-blue-600 mb-1 line-clamp-1",children:R.topic||"Untitled Clip"}),p.jsx("p",{className:"text-xs text-gray-500 mb-2",children:R.personName}),p.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:R.summary})]})]},P))}),p.jsx("div",{className:"md:hidden mt-4 text-center",children:p.jsxs("button",{onClick:()=>t(x.keyword),className:"inline-flex items-center px-4 py-2 border-0 rounded-md bg-blue-600 text-white text-sm font-medium cursor-pointer transition-colors hover:bg-blue-700",children:["View all ",x.count," clips"]})})]})]})},x.keyword))})})]})}function y1e({initialSearchTerm:t=""}){const[e,r]=S.useState(t),[i,s]=S.useState([]),[a,o]=S.useState(!1),[l,u]=S.useState(!1),[c,d]=S.useState(null),h=yr(),{getSearchFromCache:f,addSearchToCache:m}=S.useContext(Bv);S.useEffect(()=>{t&&(r(t),v(t))},[t]);const v=async(w=e)=>{if(!w.trim()){s([]),u(!1);return}u(!0);const E=f("clips",w);if(E){console.log("Using cached clip search results"),s(E);return}o(!0);try{const N=w.split(",").map(O=>O.trim().toLowerCase()),M=await y(N);s(M),m("clips",w,M)}catch(N){console.error("Error searching for clips:",N),d("Failed to search for clips")}finally{o(!1)}},y=async w=>{const E=await sn(rn(It,"interviewSummaries")),N=[];for(const M of E.docs){const O=M.id,A=M.data(),D=A.videoEmbedLink,T=D?`https://img.youtube.com/vi/${b(D)}/mqdefault.jpg`:null,I=rn(It,"interviewSummaries",O,"subSummaries");(await sn(I)).forEach(R=>{const P=R.data(),j=(P.keywords||"").split(",").map(U=>U.trim().toLowerCase());w.some(U=>j.includes(U))&&N.push({id:R.id,documentName:O,personName:A.name||"Unknown",...P,...A,thumbnailUrl:T})})}return N},b=w=>{if(!w)return null;const E=/^.*(youtu.be\/|v\/|e\/|u\/\w+\/|embed\/|v=)([^#&?]*).*/,N=w.match(E);return N&&N[2].length===11?N[2]:null},_=(w,E)=>{h(`/clip-player?documentName=${encodeURIComponent(w)}&clipId=${encodeURIComponent(E)}`)};return c?p.jsx("div",{className:"flex justify-center items-center h-64 bg-gray-50",children:p.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg shadow-sm",children:c})}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"mb-6",children:p.jsxs("div",{className:"max-w-lg",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Clips by Keywords"}),p.jsxs("div",{className:"flex",children:[p.jsx("input",{type:"text",placeholder:"Enter keywords (comma separated)...",value:e,onChange:w=>r(w.target.value),className:"flex-grow px-4 py-2.5 border border-gray-300 rounded-l-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",onKeyDown:w=>{w.key==="Enter"&&v()}}),p.jsx("button",{onClick:()=>v(),className:"px-4 py-2.5 bg-blue-600 text-white rounded-r-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:"Search"})]})]})}),p.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:a?p.jsx("div",{className:"p-12 flex justify-center",children:p.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"})}):l?i.length===0?p.jsx("div",{className:"p-6 text-center text-gray-500",children:"No clips found matching your search keywords."}):p.jsxs("div",{className:"p-4",children:[p.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Found ",i.length," clip",i.length!==1?"s":""]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(w=>p.jsxs("div",{className:"bg-gray-50 rounded-lg shadow overflow-hidden hover:shadow-md transition-shadow cursor-pointer",onClick:()=>_(w.documentName,w.id),children:[p.jsxs("div",{className:"relative pb-[56.25%] bg-gray-200",children:[w.thumbnailUrl?p.jsx("img",{src:w.thumbnailUrl,alt:w.topic||w.documentName,className:"absolute inset-0 w-full h-full object-cover"}):p.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-300",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),p.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-3",children:p.jsx("span",{className:"text-white text-xs font-medium",children:w.timestamp})})]}),p.jsxs("div",{className:"p-4",children:[p.jsx("h3",{className:"text-base font-medium text-blue-600 mb-1 line-clamp-1",children:w.topic||"Untitled Clip"}),p.jsx("p",{className:"text-sm text-gray-500 mb-2 font-medium",children:w.personName}),p.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:w.summary}),p.jsx("div",{className:"flex flex-wrap gap-1",children:(w.keywords||"").split(",").map((E,N)=>p.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-blue-100 text-blue-800 text-xs font-medium",children:E.trim()},N))})]})]},w.id))})]}):p.jsx("div",{className:"p-6 text-center text-gray-500",children:"Enter keywords above to search for relevant clips."})})]})}function _1e(){const[t,e]=S.useState([]),[r,i]=S.useState(!0),[s,a]=S.useState(null),[o,l]=S.useState(""),[u,c]=S.useState([]),[d,h]=S.useState(null),[f,m]=S.useState(!1),v=yr(),{cache:y,updateCache:b}=S.useContext(Bv);S.useEffect(()=>{y.people?(console.log("Using cached people data"),e(y.people),c(y.people),i(!1)):E()},[y.people]),S.useEffect(()=>{if(o){const x=t.filter(R=>R.name.toLowerCase().includes(o.toLowerCase()));c(x)}else c(t)},[o,t]),S.useEffect(()=>{d&&m(!0)},[d]);const _=()=>{m(!1)},w=x=>{const R=x==null?void 0:x.match(/embed\/([a-zA-Z0-9_-]+)/);return R?R[1]:null},E=async()=>{try{i(!0);const x=await sn(rn(It,"interviewSummaries")),R=[];x.forEach(P=>{const j=P.data(),$=w(j.videoEmbedLink);R.push({id:P.id,name:j.name||"Unknown Name",role:j.role||"Unknown Role",videoEmbedLink:j.videoEmbedLink,thumbnailUrl:$?`https://img.youtube.com/vi/${$}/hqdefault.jpg`:null})}),e(R),c(R),b("people",R),i(!1)}catch(x){console.error("Error fetching people:",x),a("Failed to load interview subjects"),i(!1)}},N=()=>{if(!d)return;const x=u.findIndex(R=>R.id===d.id);x>0?h(u[x-1]):h(u[u.length-1])},M=()=>{if(!d)return;const x=u.findIndex(R=>R.id===d.id);x<u.length-1?h(u[x+1]):h(u[0])};S.useEffect(()=>{const x=R=>{f&&(R.key==="ArrowLeft"?N():R.key==="ArrowRight"?M():R.key==="Escape"&&_())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[f,d,u]);const O=()=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("polyline",{points:"15 18 9 12 15 6"})}),A=()=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("polyline",{points:"9 18 15 12 9 6"})}),D=()=>p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),p.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),T=({person:x,isOpen:R,onClose:P,onPrev:j,onNext:$})=>{if(!R||!x)return null;const U=Y=>{Y.target===Y.currentTarget&&P()};return p.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:[p.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60",onClick:U}),p.jsx("button",{className:"absolute left-4 md:left-8 z-50 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:Y=>{Y.stopPropagation(),j()},"aria-label":"Previous person",children:p.jsx(O,{})}),p.jsx("button",{className:"absolute right-4 md:right-8 z-50 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:Y=>{Y.stopPropagation(),$()},"aria-label":"Next person",children:p.jsx(A,{})}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-md w-full overflow-hidden animate-fadeIn z-50 relative",children:[p.jsxs("div",{className:"relative",children:[x.thumbnailUrl&&p.jsx("div",{className:"w-full h-48 overflow-hidden",children:p.jsx("img",{src:x.thumbnailUrl,alt:x.name,className:"w-full h-full object-cover scale-125"})}),p.jsx("button",{className:"absolute top-2 right-2 bg-black bg-opacity-60 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:P,"aria-label":"Close",children:p.jsx(D,{})})]}),p.jsxs("div",{className:"p-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:x.name}),p.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:x.role}),p.jsx("button",{onClick:()=>v(`/interview-player?documentName=${encodeURIComponent(x.id)}`),className:"w-full bg-blue-600 text-white px-4 py-3 rounded-md hover:bg-blue-700 transition-colors duration-200 font-medium",children:"View Interview"})]})]})]})},I=({person:x})=>{const R=(d==null?void 0:d.id)===x.id;return p.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[p.jsx("div",{}),p.jsx("div",{className:`w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 rounded-md 
                    overflow-hidden shadow-md cursor-pointer transition-all duration-200
                    ${R?"ring-4 ring-blue-500":"hover:ring-2 hover:ring-blue-300"}`,onClick:()=>h(x),style:{touchAction:"manipulation"},children:x.thumbnailUrl?p.jsx("div",{className:"w-full h-full overflow-hidden",children:p.jsx("img",{src:x.thumbnailUrl,alt:x.name,className:"w-full h-full object-cover object-center scale-150",draggable:!1,loading:"lazy"})}):p.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:p.jsx("span",{className:"text-gray-400 text-xs",children:"No photo"})})}),p.jsx("div",{className:"text-center w-full",children:p.jsx("p",{className:`text-xs sm:text-sm truncate max-w-full ${R?"font-bold text-blue-600":"text-gray-700"}`,children:x.name})})]})};return r?p.jsx("div",{className:"flex justify-center items-center h-64",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):s?p.jsx("div",{className:"flex justify-center items-center h-64",children:p.jsx("div",{className:"text-red-500",children:s})}):t.length===0?p.jsx("div",{className:"flex justify-center items-center h-64",children:p.jsx("div",{className:"text-gray-500",children:"No interview subjects found"})}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"mb-6 max-w-xl mx-auto",children:p.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:o?`${u.length} of ${t.length} People`:`${t.length} People`}),p.jsx("input",{type:"text",value:o,onChange:x=>l(x.target.value),placeholder:"Search by name...",className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring focus:border-blue-300"})]})})}),p.jsx("div",{className:"bg-white rounded-xl shadow-md p-6",children:p.jsx("div",{className:"max-w-6xl mx-auto",children:p.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 gap-x-4 gap-y-6",children:u.map(x=>p.jsx(I,{person:x},x.id))})})}),p.jsx(T,{person:d,isOpen:f,onClose:_,onPrev:N,onNext:M})]})}const Bv=S.createContext(null);function w1e(){const[t,e]=S.useState("keywords"),[r,i]=S.useState(""),[s,a]=S.useState({keywordCount:0,clipCount:0,totalDuration:0,peopleCount:0}),[o,l]=S.useState({keywords:null,keywordSearches:{},clipSearches:{},people:null,lastFetched:{keywords:null,people:null}});S.useEffect(()=>{try{const m=sessionStorage.getItem("directoryCache");if(m){const v=JSON.parse(m),b=new Date().getTime()-(v.timestamp||0),_=60*60*1e3;b<_?(l(w=>({...w,...v.data})),console.log("Restored cache from session storage")):(console.log("Cache expired, will fetch fresh data"),sessionStorage.removeItem("directoryCache"))}}catch(m){console.error("Error loading cache from session storage:",m)}},[]),S.useEffect(()=>{try{if(!o.keywords&&!o.people&&Object.keys(o.keywordSearches).length===0&&Object.keys(o.clipSearches).length===0)return;sessionStorage.setItem("directoryCache",JSON.stringify({data:o,timestamp:new Date().getTime()}))}catch(m){console.error("Error saving cache to session storage:",m)}},[o]),S.useEffect(()=>{var v,y,b,_;const m={keywordCount:((v=o.keywords)==null?void 0:v.length)||0,clipCount:((y=o.keywords)==null?void 0:y.reduce((w,E)=>w+E.count,0))||0,totalDuration:((b=o.keywords)==null?void 0:b.reduce((w,E)=>w+E.totalLengthSeconds,0))||0,peopleCount:((_=o.people)==null?void 0:_.length)||0};a(m)},[o.keywords,o.people]);const u=(m,v)=>{l(y=>({...y,[m]:v,lastFetched:{...y.lastFetched,[m]:new Date().getTime()}}))},c=(m,v,y)=>{const b=m==="keywords"?"keywordSearches":"clipSearches";l(_=>({..._,[b]:{..._[b],[v.toLowerCase()]:{results:y,timestamp:new Date().getTime()}}}))},d=(m,v)=>{const b=o[m==="keywords"?"keywordSearches":"clipSearches"][v.toLowerCase()];if(!b)return null;const w=new Date().getTime()-b.timestamp,E=30*60*1e3;return w<E?b.results:null},h=m=>{e("clips"),setTimeout(()=>{i(m?m.trim():"")},10)},f=m=>{const v=Math.floor(m/3600),y=Math.floor(m%3600/60),b=m%60;return v>0?`${v}:${y.toString().padStart(2,"0")}:${b.toString().padStart(2,"0")}`:`${y}:${b.toString().padStart(2,"0")}`};return p.jsx(Bv.Provider,{value:{cache:o,updateCache:u,addSearchToCache:c,getSearchFromCache:d},children:p.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Directory"}),p.jsx("p",{className:"text-base text-gray-600 max-w-3xl leading-relaxed",children:"Browse and search through keywords, clips, and people from the Civil Rights History Collection."})]}),p.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[p.jsxs("div",{className:"flex flex-col items-center p-4 bg-blue-50 rounded-lg",children:[p.jsx("div",{className:"text-2xl font-bold text-blue-800 mb-2",children:s.keywordCount}),p.jsx("div",{className:"text-sm text-gray-500",children:"Total Keywords"})]}),p.jsxs("div",{className:"flex flex-col items-center p-4 bg-green-50 rounded-lg",children:[p.jsx("div",{className:"text-2xl font-bold text-green-800 mb-2",children:s.clipCount}),p.jsx("div",{className:"text-sm text-gray-500",children:"Total Clips"})]}),p.jsxs("div",{className:"flex flex-col items-center p-4 bg-purple-50 rounded-lg",children:[p.jsx("div",{className:"text-2xl font-bold text-purple-800 mb-2",children:f(s.totalDuration)}),p.jsx("div",{className:"text-sm text-gray-500",children:"Total Content Duration"})]}),p.jsxs("div",{className:"flex flex-col items-center p-4 bg-amber-50 rounded-lg",children:[p.jsx("div",{className:"text-2xl font-bold text-amber-800 mb-2",children:s.peopleCount}),p.jsx("div",{className:"text-sm text-gray-500",children:"Total People"})]})]})}),p.jsx("div",{className:"border-b border-gray-200 mb-6",children:p.jsxs("nav",{className:"-mb-px flex space-x-8",children:[p.jsx("button",{onClick:()=>e("keywords"),className:`pb-4 px-1 border-b-2 font-medium text-sm ${t==="keywords"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Keywords"}),p.jsx("button",{onClick:()=>e("clips"),className:`pb-4 px-1 border-b-2 font-medium text-sm ${t==="clips"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Clips"}),p.jsx("button",{onClick:()=>e("people"),className:`pb-4 px-1 border-b-2 font-medium text-sm ${t==="people"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"People"})]})}),t==="keywords"&&p.jsx(v1e,{onViewAllClips:h}),t==="clips"&&p.jsx(y1e,{initialSearchTerm:r}),t==="people"&&p.jsx(_1e,{})]})})}async function b1e(t,e=10){console.log(`Performing vector search for: "${t}"`);try{console.log("Generating embedding for search query...");const r=await fetch("https://api.openai.com/v1/embeddings",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer undefined"},body:JSON.stringify({input:t,model:"text-embedding-3-small"})});if(!r.ok){const u=await r.json();throw console.error("OpenAI API error during search:",u),new Error(`OpenAI API error: ${r.status} ${r.statusText}`)}const s=(await r.json()).data[0].embedding;console.log("Query embedding generated successfully"),console.log("Fetching stored embeddings from Firestore...");const a=rn(It,"embeddings"),o=await sn(a);if(o.empty)return console.log("No embeddings found in database"),[];console.log(`Found ${o.size} embeddings to compare against`);const l=o.docs.map(u=>{const c=u.data(),d=x1e(s,c.embedding);return{id:u.id,documentId:c.documentId,segmentId:c.segmentId,similarity:d,textPreview:c.textContent}});return l.sort((u,c)=>c.similarity-u.similarity),console.log(`Returning top ${e} results`),l.slice(0,e)}catch(r){throw console.error("Error in vector search:",r),r}}function x1e(t,e){if(t.length!==e.length)throw console.error(`Vector dimension mismatch: ${t.length} vs ${e.length}`),new Error("Vector dimensions do not match");let r=0,i=0,s=0;for(let a=0;a<t.length;a++)r+=t[a]*e[a],i+=t[a]*t[a],s+=e[a]*e[a];return i=Math.sqrt(i),s=Math.sqrt(s),i===0||s===0?(console.warn("Zero magnitude vector found in similarity calculation"),0):r/(i*s)}function E1e(){const[t,e]=S.useState(""),[r,i]=S.useState([]),[s,a]=S.useState(!1),o=yr(),l=h=>{if(!h)return null;const f=/^.*(youtu.be\/|v\/|e\/|u\/\w+\/|embed\/|v=)([^#&?]*).*/,m=h.match(f);return m&&m[2].length===11?m[2]:null},u=async h=>{const f=[];for(const m of h)try{const y=(await pu(Is(It,"interviewSummaries",m.documentId))).data();let b=null;m.segmentId&&(b=(await pu(Is(It,"interviewSummaries",m.documentId,"subSummaries",m.segmentId))).data());const _=y.videoEmbedLink?`https://img.youtube.com/vi/${l(y.videoEmbedLink)}/mqdefault.jpg`:null;f.push({...m,personName:y.name||"Unknown",topic:(b==null?void 0:b.topic)||"Untitled Segment",timestamp:(b==null?void 0:b.timestamp)||"",summary:(b==null?void 0:b.summary)||m.textPreview,keywords:(b==null?void 0:b.keywords)||"",thumbnailUrl:_})}catch(v){console.error(`Error fetching metadata for result ${m.id}:`,v),f.push(m)}return f},c=async h=>{if(h.preventDefault(),!!t.trim()){a(!0);try{const f=await b1e(t,20),m=await u(f);i(m)}catch(f){console.error("Error during vector search:",f)}finally{a(!1)}}},d=(h,f)=>{o(`/clip-player?documentName=${encodeURIComponent(h)}&clipId=${encodeURIComponent(f)}`)};return p.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[p.jsxs("div",{className:"w-full max-w-3xl mx-auto text-center mb-12",children:[p.jsx("h1",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text",children:"Semantic Search"}),p.jsx("p",{className:"text-base leading-relaxed text-gray-600 mb-10 max-w-xxl mx-auto",children:"Use natural language to search by concepts, themes, and meaning — not just keywords"}),p.jsx("form",{onSubmit:c,className:"w-full",children:p.jsxs("div",{className:"relative w-full",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:p.jsx(dT,{className:"w-5 h-5 text-gray-500"})}),p.jsx("input",{type:"text",value:t,onChange:h=>e(h.target.value),placeholder:"Search...",className:"w-full pl-12 pr-32 py-5 border border-gray-200 bg-white rounded-xl shadow-sm outline-none text-base text-gray-900 transition-all duration-300 focus:shadow-blue-300 focus:ring-2 focus:ring-blue-500"}),p.jsx("button",{type:"submit",disabled:s,className:"absolute right-3 top-1/2 transform -translate-y-1/2 px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-medium rounded-lg shadow-sm border-none cursor-pointer transition-all duration-300 hover:from-blue-700 hover:to-indigo-700 hover:shadow-md disabled:opacity-70",children:s?"Searching...":"Search"})]})})]}),s?p.jsx("div",{className:"p-12 flex justify-center",children:p.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"})}):r.length>0?p.jsxs("div",{className:"w-full",children:[p.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:["Found ",r.length," result",r.length!==1?"s":""]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(h=>p.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden hover:shadow-md transition-shadow cursor-pointer",onClick:()=>d(h.documentId,h.segmentId),children:[p.jsxs("div",{className:"relative pb-[56.25%] bg-gray-200",children:[h.thumbnailUrl?p.jsx("img",{src:h.thumbnailUrl,alt:h.topic||h.documentId,className:"absolute inset-0 w-full h-full object-cover"}):p.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-300",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),p.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-3",children:p.jsx("span",{className:"text-white text-xs font-medium",children:h.timestamp})})]}),p.jsxs("div",{className:"p-4",children:[p.jsx("h3",{className:"text-base font-medium text-blue-600 mb-1 line-clamp-1",children:h.topic||"Untitled Segment"}),p.jsx("p",{className:"text-sm text-gray-500 mb-2 font-medium",children:h.personName}),p.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:h.summary}),h.keywords&&p.jsx("div",{className:"flex flex-wrap gap-1",children:h.keywords.split(",").map((f,m)=>p.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-blue-100 text-blue-800 text-xs font-medium",children:f.trim()},m))}),p.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[(h.similarity*100).toFixed(1),"% match"]})]})]},h.id))})]}):p.jsx("div",{className:"w-full max-w-4xl mx-auto text-center p-6 bg-white rounded-xl shadow-md",children:p.jsx("p",{className:"text-gray-500",children:t?"No results found. Try different search terms.":"Enter a search query above to find relevant content."})})]})}function S1e(){return p.jsxs(Kq,{children:[p.jsx(xr,{path:"/login",element:p.jsx(Cie,{})}),p.jsx(xr,{path:"/",element:p.jsx(Ci,{children:p.jsx(Ii,{children:p.jsx(Iie,{})})})}),p.jsx(xr,{path:"/playlist-builder",element:p.jsx(Ci,{children:p.jsx(Ii,{children:p.jsx(Lie,{})})})}),p.jsx(xr,{path:"/playlist-editor",element:p.jsx(Ci,{children:p.jsx(Ii,{children:p.jsx(mce,{})})})}),p.jsx(xr,{path:"/content-directory",element:p.jsx(Ci,{children:p.jsx(Ii,{children:p.jsx(w1e,{})})})}),p.jsx(xr,{path:"/transcript-summary",element:p.jsx(Ci,{children:p.jsx(Ii,{children:p.jsx(f1e,{})})})}),p.jsx(xr,{path:"/search",element:p.jsx(Ci,{children:p.jsx(Ii,{children:p.jsx(p1e,{})})})}),p.jsx(xr,{path:"/semantic-search",element:p.jsx(Ci,{children:p.jsx(Ii,{children:p.jsx(E1e,{})})})}),p.jsx(xr,{path:"/interview-player",element:p.jsx(Ci,{children:p.jsx(Ii,{children:p.jsx(m1e,{})})})}),p.jsx(xr,{path:"/clip-player",element:p.jsx(Ci,{children:p.jsx(Ii,{children:p.jsx(g1e,{})})})}),p.jsx(xr,{path:"/examples/basic-flow",element:p.jsx(Ci,{children:p.jsx(Ii,{children:p.jsx(aB,{})})})}),p.jsx(xr,{path:"*",element:p.jsx(JO,{to:"/",replace:!0})})]})}ux.createRoot(document.getElementById("root")).render(p.jsx(te.StrictMode,{children:p.jsx(_H,{children:p.jsx(PJ,{children:p.jsx(S1e,{})})})}));export{te as R,bm as _,fS as a,sf as c,Ua as g,p as j,S as r};
