(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var Vc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Oo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dT={exports:{}},Jh={},hT={exports:{}},Le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zu=Symbol.for("react.element"),YP=Symbol.for("react.portal"),XP=Symbol.for("react.fragment"),QP=Symbol.for("react.strict_mode"),JP=Symbol.for("react.profiler"),ZP=Symbol.for("react.provider"),eR=Symbol.for("react.context"),tR=Symbol.for("react.forward_ref"),nR=Symbol.for("react.suspense"),rR=Symbol.for("react.memo"),iR=Symbol.for("react.lazy"),R0=Symbol.iterator;function sR(t){return t===null||typeof t!="object"?null:(t=R0&&t[R0]||t["@@iterator"],typeof t=="function"?t:null)}var fT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pT=Object.assign,mT={};function jo(t,e,r){this.props=t,this.context=e,this.refs=mT,this.updater=r||fT}jo.prototype.isReactComponent={};jo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};jo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gT(){}gT.prototype=jo.prototype;function Sv(t,e,r){this.props=t,this.context=e,this.refs=mT,this.updater=r||fT}var Iv=Sv.prototype=new gT;Iv.constructor=Sv;pT(Iv,jo.prototype);Iv.isPureReactComponent=!0;var N0=Array.isArray,vT=Object.prototype.hasOwnProperty,kv={current:null},yT={key:!0,ref:!0,__self:!0,__source:!0};function _T(t,e,r){var i,s={},a=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)vT.call(e,i)&&!yT.hasOwnProperty(i)&&(s[i]=e[i]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:zu,type:t,key:a,ref:o,props:s,_owner:kv.current}}function aR(t,e){return{$$typeof:zu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cv(t){return typeof t=="object"&&t!==null&&t.$$typeof===zu}function oR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var D0=/\/+/g;function wp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?oR(""+t.key):e.toString(36)}function yd(t,e,r,i,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case zu:case YP:o=!0}}if(o)return o=t,s=s(o),t=i===""?"."+wp(o,0):i,N0(s)?(r="",t!=null&&(r=t.replace(D0,"$&/")+"/"),yd(s,e,r,"",function(c){return c})):s!=null&&(Cv(s)&&(s=aR(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(D0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,i=i===""?".":i+":",N0(t))for(var l=0;l<t.length;l++){a=t[l];var u=i+wp(a,l);o+=yd(a,e,r,u,s)}else if(u=sR(t),typeof u=="function")for(t=u.call(t),l=0;!(a=t.next()).done;)a=a.value,u=i+wp(a,l++),o+=yd(a,e,r,u,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Fc(t,e,r){if(t==null)return t;var i=[],s=0;return yd(t,i,"","",function(a){return e.call(r,a,s++)}),i}function lR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xn={current:null},_d={transition:null},uR={ReactCurrentDispatcher:xn,ReactCurrentBatchConfig:_d,ReactCurrentOwner:kv};function wT(){throw Error("act(...) is not supported in production builds of React.")}Le.Children={map:Fc,forEach:function(t,e,r){Fc(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Fc(t,function(){e++}),e},toArray:function(t){return Fc(t,function(e){return e})||[]},only:function(t){if(!Cv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Le.Component=jo;Le.Fragment=XP;Le.Profiler=JP;Le.PureComponent=Sv;Le.StrictMode=QP;Le.Suspense=nR;Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uR;Le.act=wT;Le.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=pT({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=kv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)vT.call(e,u)&&!yT.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:zu,type:t.type,key:s,ref:a,props:i,_owner:o}};Le.createContext=function(t){return t={$$typeof:eR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ZP,_context:t},t.Consumer=t};Le.createElement=_T;Le.createFactory=function(t){var e=_T.bind(null,t);return e.type=t,e};Le.createRef=function(){return{current:null}};Le.forwardRef=function(t){return{$$typeof:tR,render:t}};Le.isValidElement=Cv;Le.lazy=function(t){return{$$typeof:iR,_payload:{_status:-1,_result:t},_init:lR}};Le.memo=function(t,e){return{$$typeof:rR,type:t,compare:e===void 0?null:e}};Le.startTransition=function(t){var e=_d.transition;_d.transition={};try{t()}finally{_d.transition=e}};Le.unstable_act=wT;Le.useCallback=function(t,e){return xn.current.useCallback(t,e)};Le.useContext=function(t){return xn.current.useContext(t)};Le.useDebugValue=function(){};Le.useDeferredValue=function(t){return xn.current.useDeferredValue(t)};Le.useEffect=function(t,e){return xn.current.useEffect(t,e)};Le.useId=function(){return xn.current.useId()};Le.useImperativeHandle=function(t,e,r){return xn.current.useImperativeHandle(t,e,r)};Le.useInsertionEffect=function(t,e){return xn.current.useInsertionEffect(t,e)};Le.useLayoutEffect=function(t,e){return xn.current.useLayoutEffect(t,e)};Le.useMemo=function(t,e){return xn.current.useMemo(t,e)};Le.useReducer=function(t,e,r){return xn.current.useReducer(t,e,r)};Le.useRef=function(t){return xn.current.useRef(t)};Le.useState=function(t){return xn.current.useState(t)};Le.useSyncExternalStore=function(t,e,r){return xn.current.useSyncExternalStore(t,e,r)};Le.useTransition=function(){return xn.current.useTransition()};Le.version="18.3.1";hT.exports=Le;var L=hT.exports;const De=Oo(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cR=L,dR=Symbol.for("react.element"),hR=Symbol.for("react.fragment"),fR=Object.prototype.hasOwnProperty,pR=cR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mR={key:!0,ref:!0,__self:!0,__source:!0};function bT(t,e,r){var i,s={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)fR.call(e,i)&&!mR.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:dR,type:t,key:a,ref:o,props:s,_owner:pR.current}}Jh.Fragment=hR;Jh.jsx=bT;Jh.jsxs=bT;dT.exports=Jh;var m=dT.exports,Lm={},xT={exports:{}},Zn={},ET={exports:{}},TT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,Y){var ie=q.length;q.push(Y);e:for(;0<ie;){var ne=ie-1>>>1,W=q[ne];if(0<s(W,Y))q[ne]=Y,q[ie]=W,ie=ne;else break e}}function r(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var Y=q[0],ie=q.pop();if(ie!==Y){q[0]=ie;e:for(var ne=0,W=q.length,H=W>>>1;ne<H;){var Q=2*(ne+1)-1,X=q[Q],de=Q+1,ve=q[de];if(0>s(X,ie))de<W&&0>s(ve,X)?(q[ne]=ve,q[de]=ie,ne=de):(q[ne]=X,q[Q]=ie,ne=Q);else if(de<W&&0>s(ve,ie))q[ne]=ve,q[de]=ie,ne=de;else break e}}return Y}function s(q,Y){var ie=q.sortIndex-Y.sortIndex;return ie!==0?ie:q.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],h=1,f=null,p=3,g=!1,T=!1,N=!1,A=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(q){for(var Y=r(c);Y!==null;){if(Y.callback===null)i(c);else if(Y.startTime<=q)i(c),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=r(c)}}function R(q){if(N=!1,w(q),!T)if(r(u)!==null)T=!0,re(j);else{var Y=r(c);Y!==null&&pe(R,Y.startTime-q)}}function j(q,Y){T=!1,N&&(N=!1,b(I),I=-1),g=!0;var ie=p;try{for(w(Y),f=r(u);f!==null&&(!(f.expirationTime>Y)||q&&!S());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,p=f.priorityLevel;var W=ne(f.expirationTime<=Y);Y=t.unstable_now(),typeof W=="function"?f.callback=W:f===r(u)&&i(u),w(Y)}else i(u);f=r(u)}if(f!==null)var H=!0;else{var Q=r(c);Q!==null&&pe(R,Q.startTime-Y),H=!1}return H}finally{f=null,p=ie,g=!1}}var V=!1,C=null,I=-1,y=5,_=-1;function S(){return!(t.unstable_now()-_<y)}function M(){if(C!==null){var q=t.unstable_now();_=q;var Y=!0;try{Y=C(!0,q)}finally{Y?D():(V=!1,C=null)}}else V=!1}var D;if(typeof x=="function")D=function(){x(M)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ee=K.port2;K.port1.onmessage=M,D=function(){ee.postMessage(null)}}else D=function(){A(M,0)};function re(q){C=q,V||(V=!0,D())}function pe(q,Y){I=A(function(){q(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){T||g||(T=!0,re(j))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(q){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var ie=p;p=Y;try{return q()}finally{p=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,Y){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ie=p;p=q;try{return Y()}finally{p=ie}},t.unstable_scheduleCallback=function(q,Y,ie){var ne=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ne+ie:ne):ie=ne,q){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ie+W,q={id:h++,callback:Y,priorityLevel:q,startTime:ie,expirationTime:W,sortIndex:-1},ie>ne?(q.sortIndex=ie,e(c,q),r(u)===null&&q===r(c)&&(N?(b(I),I=-1):N=!0,pe(R,ie-ne))):(q.sortIndex=W,e(u,q),T||g||(T=!0,re(j))),q},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(q){var Y=p;return function(){var ie=p;p=Y;try{return q.apply(this,arguments)}finally{p=ie}}}})(TT);ET.exports=TT;var gR=ET.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vR=L,Qn=gR;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ST=new Set,lu={};function fa(t,e){ho(t,e),ho(t+"Capture",e)}function ho(t,e){for(lu[t]=e,t=0;t<e.length;t++)ST.add(e[t])}var gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Om=Object.prototype.hasOwnProperty,yR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,M0={},L0={};function _R(t){return Om.call(L0,t)?!0:Om.call(M0,t)?!1:yR.test(t)?L0[t]=!0:(M0[t]=!0,!1)}function wR(t,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function bR(t,e,r,i){if(e===null||typeof e>"u"||wR(t,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function En(t,e,r,i,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Zt[t]=new En(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Zt[e]=new En(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Zt[t]=new En(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Zt[t]=new En(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Zt[t]=new En(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Zt[t]=new En(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Zt[t]=new En(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Zt[t]=new En(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Zt[t]=new En(t,5,!1,t.toLowerCase(),null,!1,!1)});var Av=/[\-:]([a-z])/g;function Pv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Av,Pv);Zt[e]=new En(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Av,Pv);Zt[e]=new En(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Av,Pv);Zt[e]=new En(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Zt[t]=new En(t,1,!1,t.toLowerCase(),null,!1,!1)});Zt.xlinkHref=new En("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Zt[t]=new En(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rv(t,e,r,i){var s=Zt.hasOwnProperty(e)?Zt[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bR(e,r,s,i)&&(r=null),i||s===null?_R(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,i=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,i?t.setAttributeNS(i,e,r):t.setAttribute(e,r))))}var Ii=vR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Uc=Symbol.for("react.element"),Ua=Symbol.for("react.portal"),Ba=Symbol.for("react.fragment"),Nv=Symbol.for("react.strict_mode"),jm=Symbol.for("react.profiler"),IT=Symbol.for("react.provider"),kT=Symbol.for("react.context"),Dv=Symbol.for("react.forward_ref"),Vm=Symbol.for("react.suspense"),Fm=Symbol.for("react.suspense_list"),Mv=Symbol.for("react.memo"),Vi=Symbol.for("react.lazy"),CT=Symbol.for("react.offscreen"),O0=Symbol.iterator;function pl(t){return t===null||typeof t!="object"?null:(t=O0&&t[O0]||t["@@iterator"],typeof t=="function"?t:null)}var wt=Object.assign,bp;function Dl(t){if(bp===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);bp=e&&e[1]||""}return`
`+bp+t}var xp=!1;function Ep(t,e){if(!t||xp)return"";xp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),a=i.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{xp=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Dl(t):""}function xR(t){switch(t.tag){case 5:return Dl(t.type);case 16:return Dl("Lazy");case 13:return Dl("Suspense");case 19:return Dl("SuspenseList");case 0:case 2:case 15:return t=Ep(t.type,!1),t;case 11:return t=Ep(t.type.render,!1),t;case 1:return t=Ep(t.type,!0),t;default:return""}}function Um(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ba:return"Fragment";case Ua:return"Portal";case jm:return"Profiler";case Nv:return"StrictMode";case Vm:return"Suspense";case Fm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kT:return(t.displayName||"Context")+".Consumer";case IT:return(t._context.displayName||"Context")+".Provider";case Dv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Mv:return e=t.displayName||null,e!==null?e:Um(t.type)||"Memo";case Vi:e=t._payload,t=t._init;try{return Um(t(e))}catch{}}return null}function ER(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Um(e);case 8:return e===Nv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function AT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function TR(t){var e=AT(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bc(t){t._valueTracker||(t._valueTracker=TR(t))}function PT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return t&&(i=AT(t)?t.checked?"true":"false":t.value),t=i,t!==r?(e.setValue(t),!0):!1}function qd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bm(t,e){var r=e.checked;return wt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function j0(t,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=fs(e.value!=null?e.value:r),t._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function RT(t,e){e=e.checked,e!=null&&Rv(t,"checked",e,!1)}function $m(t,e){RT(t,e);var r=fs(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zm(t,e.type,r):e.hasOwnProperty("defaultValue")&&zm(t,e.type,fs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function V0(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function zm(t,e,r){(e!=="number"||qd(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Ml=Array.isArray;function Za(t,e,r,i){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&i&&(t[r].defaultSelected=!0)}else{for(r=""+fs(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Hm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return wt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function F0(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ae(92));if(Ml(r)){if(1<r.length)throw Error(ae(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:fs(r)}}function NT(t,e){var r=fs(e.value),i=fs(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),i!=null&&(t.defaultValue=""+i)}function U0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function DT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?DT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var $c,MT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for($c=$c||document.createElement("div"),$c.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=$c.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function uu(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Wl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},SR=["Webkit","ms","Moz","O"];Object.keys(Wl).forEach(function(t){SR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wl[e]=Wl[t]})});function LT(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Wl.hasOwnProperty(t)&&Wl[t]?(""+e).trim():e+"px"}function OT(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=LT(r,e[r],i);r==="float"&&(r="cssFloat"),i?t.setProperty(r,s):t[r]=s}}var IR=wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qm(t,e){if(e){if(IR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function Gm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Km=null;function Lv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ym=null,eo=null,to=null;function B0(t){if(t=qu(t)){if(typeof Ym!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=rf(e),Ym(t.stateNode,t.type,e))}}function jT(t){eo?to?to.push(t):to=[t]:eo=t}function VT(){if(eo){var t=eo,e=to;if(to=eo=null,B0(t),e)for(t=0;t<e.length;t++)B0(e[t])}}function FT(t,e){return t(e)}function UT(){}var Tp=!1;function BT(t,e,r){if(Tp)return t(e,r);Tp=!0;try{return FT(t,e,r)}finally{Tp=!1,(eo!==null||to!==null)&&(UT(),VT())}}function cu(t,e){var r=t.stateNode;if(r===null)return null;var i=rf(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ae(231,e,typeof r));return r}var Xm=!1;if(gi)try{var ml={};Object.defineProperty(ml,"passive",{get:function(){Xm=!0}}),window.addEventListener("test",ml,ml),window.removeEventListener("test",ml,ml)}catch{Xm=!1}function kR(t,e,r,i,s,a,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(h){this.onError(h)}}var ql=!1,Gd=null,Kd=!1,Qm=null,CR={onError:function(t){ql=!0,Gd=t}};function AR(t,e,r,i,s,a,o,l,u){ql=!1,Gd=null,kR.apply(CR,arguments)}function PR(t,e,r,i,s,a,o,l,u){if(AR.apply(this,arguments),ql){if(ql){var c=Gd;ql=!1,Gd=null}else throw Error(ae(198));Kd||(Kd=!0,Qm=c)}}function pa(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function $T(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $0(t){if(pa(t)!==t)throw Error(ae(188))}function RR(t){var e=t.alternate;if(!e){if(e=pa(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var r=t,i=e;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(i=s.return,i!==null){r=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return $0(s),t;if(a===i)return $0(s),e;a=a.sibling}throw Error(ae(188))}if(r.return!==i.return)r=s,i=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,i=a;break}if(l===i){o=!0,i=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,i=s;break}if(l===i){o=!0,i=a,r=s;break}l=l.sibling}if(!o)throw Error(ae(189))}}if(r.alternate!==i)throw Error(ae(190))}if(r.tag!==3)throw Error(ae(188));return r.stateNode.current===r?t:e}function zT(t){return t=RR(t),t!==null?HT(t):null}function HT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=HT(t);if(e!==null)return e;t=t.sibling}return null}var WT=Qn.unstable_scheduleCallback,z0=Qn.unstable_cancelCallback,NR=Qn.unstable_shouldYield,DR=Qn.unstable_requestPaint,kt=Qn.unstable_now,MR=Qn.unstable_getCurrentPriorityLevel,Ov=Qn.unstable_ImmediatePriority,qT=Qn.unstable_UserBlockingPriority,Yd=Qn.unstable_NormalPriority,LR=Qn.unstable_LowPriority,GT=Qn.unstable_IdlePriority,Zh=null,Ur=null;function OR(t){if(Ur&&typeof Ur.onCommitFiberRoot=="function")try{Ur.onCommitFiberRoot(Zh,t,void 0,(t.current.flags&128)===128)}catch{}}var kr=Math.clz32?Math.clz32:FR,jR=Math.log,VR=Math.LN2;function FR(t){return t>>>=0,t===0?32:31-(jR(t)/VR|0)|0}var zc=64,Hc=4194304;function Ll(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xd(t,e){var r=t.pendingLanes;if(r===0)return 0;var i=0,s=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?i=Ll(l):(a&=o,a!==0&&(i=Ll(a)))}else o=r&~s,o!==0?i=Ll(o):a!==0&&(i=Ll(a));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(i&4&&(i|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)r=31-kr(e),s=1<<r,i|=t[r],e&=~s;return i}function UR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BR(t,e){for(var r=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-kr(a),l=1<<o,u=s[o];u===-1?(!(l&r)||l&i)&&(s[o]=UR(l,e)):u<=e&&(t.expiredLanes|=l),a&=~l}}function Jm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function KT(){var t=zc;return zc<<=1,!(zc&4194240)&&(zc=64),t}function Sp(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Hu(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-kr(e),t[e]=r}function $R(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-kr(r),a=1<<s;e[s]=0,i[s]=-1,t[s]=-1,r&=~a}}function jv(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var i=31-kr(r),s=1<<i;s&e|t[i]&e&&(t[i]|=e),r&=~s}}var Ze=0;function XT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var QT,Vv,JT,ZT,eS,Zm=!1,Wc=[],Xi=null,Qi=null,Ji=null,du=new Map,hu=new Map,Bi=[],zR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function H0(t,e){switch(t){case"focusin":case"focusout":Xi=null;break;case"dragenter":case"dragleave":Qi=null;break;case"mouseover":case"mouseout":Ji=null;break;case"pointerover":case"pointerout":du.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":hu.delete(e.pointerId)}}function gl(t,e,r,i,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:a,targetContainers:[s]},e!==null&&(e=qu(e),e!==null&&Vv(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function HR(t,e,r,i,s){switch(e){case"focusin":return Xi=gl(Xi,t,e,r,i,s),!0;case"dragenter":return Qi=gl(Qi,t,e,r,i,s),!0;case"mouseover":return Ji=gl(Ji,t,e,r,i,s),!0;case"pointerover":var a=s.pointerId;return du.set(a,gl(du.get(a)||null,t,e,r,i,s)),!0;case"gotpointercapture":return a=s.pointerId,hu.set(a,gl(hu.get(a)||null,t,e,r,i,s)),!0}return!1}function tS(t){var e=Ks(t.target);if(e!==null){var r=pa(e);if(r!==null){if(e=r.tag,e===13){if(e=$T(r),e!==null){t.blockedOn=e,eS(t.priority,function(){JT(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=eg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var i=new r.constructor(r.type,r);Km=i,r.target.dispatchEvent(i),Km=null}else return e=qu(r),e!==null&&Vv(e),t.blockedOn=r,!1;e.shift()}return!0}function W0(t,e,r){wd(t)&&r.delete(e)}function WR(){Zm=!1,Xi!==null&&wd(Xi)&&(Xi=null),Qi!==null&&wd(Qi)&&(Qi=null),Ji!==null&&wd(Ji)&&(Ji=null),du.forEach(W0),hu.forEach(W0)}function vl(t,e){t.blockedOn===e&&(t.blockedOn=null,Zm||(Zm=!0,Qn.unstable_scheduleCallback(Qn.unstable_NormalPriority,WR)))}function fu(t){function e(s){return vl(s,t)}if(0<Wc.length){vl(Wc[0],t);for(var r=1;r<Wc.length;r++){var i=Wc[r];i.blockedOn===t&&(i.blockedOn=null)}}for(Xi!==null&&vl(Xi,t),Qi!==null&&vl(Qi,t),Ji!==null&&vl(Ji,t),du.forEach(e),hu.forEach(e),r=0;r<Bi.length;r++)i=Bi[r],i.blockedOn===t&&(i.blockedOn=null);for(;0<Bi.length&&(r=Bi[0],r.blockedOn===null);)tS(r),r.blockedOn===null&&Bi.shift()}var no=Ii.ReactCurrentBatchConfig,Qd=!0;function qR(t,e,r,i){var s=Ze,a=no.transition;no.transition=null;try{Ze=1,Fv(t,e,r,i)}finally{Ze=s,no.transition=a}}function GR(t,e,r,i){var s=Ze,a=no.transition;no.transition=null;try{Ze=4,Fv(t,e,r,i)}finally{Ze=s,no.transition=a}}function Fv(t,e,r,i){if(Qd){var s=eg(t,e,r,i);if(s===null)Lp(t,e,i,Jd,r),H0(t,i);else if(HR(s,t,e,r,i))i.stopPropagation();else if(H0(t,i),e&4&&-1<zR.indexOf(t)){for(;s!==null;){var a=qu(s);if(a!==null&&QT(a),a=eg(t,e,r,i),a===null&&Lp(t,e,i,Jd,r),a===s)break;s=a}s!==null&&i.stopPropagation()}else Lp(t,e,i,null,r)}}var Jd=null;function eg(t,e,r,i){if(Jd=null,t=Lv(i),t=Ks(t),t!==null)if(e=pa(t),e===null)t=null;else if(r=e.tag,r===13){if(t=$T(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jd=t,null}function nS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MR()){case Ov:return 1;case qT:return 4;case Yd:case LR:return 16;case GT:return 536870912;default:return 16}default:return 16}}var Gi=null,Uv=null,bd=null;function rS(){if(bd)return bd;var t,e=Uv,r=e.length,i,s="value"in Gi?Gi.value:Gi.textContent,a=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(i=1;i<=o&&e[r-i]===s[a-i];i++);return bd=s.slice(t,1<i?1-i:void 0)}function xd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qc(){return!0}function q0(){return!1}function er(t){function e(r,i,s,a,o){this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?qc:q0,this.isPropagationStopped=q0,this}return wt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=qc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=qc)},persist:function(){},isPersistent:qc}),e}var Vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bv=er(Vo),Wu=wt({},Vo,{view:0,detail:0}),KR=er(Wu),Ip,kp,yl,ef=wt({},Wu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$v,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==yl&&(yl&&t.type==="mousemove"?(Ip=t.screenX-yl.screenX,kp=t.screenY-yl.screenY):kp=Ip=0,yl=t),Ip)},movementY:function(t){return"movementY"in t?t.movementY:kp}}),G0=er(ef),YR=wt({},ef,{dataTransfer:0}),XR=er(YR),QR=wt({},Wu,{relatedTarget:0}),Cp=er(QR),JR=wt({},Vo,{animationName:0,elapsedTime:0,pseudoElement:0}),ZR=er(JR),eN=wt({},Vo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tN=er(eN),nN=wt({},Vo,{data:0}),K0=er(nN),rN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sN[t])?!!e[t]:!1}function $v(){return aN}var oN=wt({},Wu,{key:function(t){if(t.key){var e=rN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$v,charCode:function(t){return t.type==="keypress"?xd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lN=er(oN),uN=wt({},ef,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Y0=er(uN),cN=wt({},Wu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$v}),dN=er(cN),hN=wt({},Vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),fN=er(hN),pN=wt({},ef,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),mN=er(pN),gN=[9,13,27,32],zv=gi&&"CompositionEvent"in window,Gl=null;gi&&"documentMode"in document&&(Gl=document.documentMode);var vN=gi&&"TextEvent"in window&&!Gl,iS=gi&&(!zv||Gl&&8<Gl&&11>=Gl),X0=" ",Q0=!1;function sS(t,e){switch(t){case"keyup":return gN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $a=!1;function yN(t,e){switch(t){case"compositionend":return aS(e);case"keypress":return e.which!==32?null:(Q0=!0,X0);case"textInput":return t=e.data,t===X0&&Q0?null:t;default:return null}}function _N(t,e){if($a)return t==="compositionend"||!zv&&sS(t,e)?(t=rS(),bd=Uv=Gi=null,$a=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iS&&e.locale!=="ko"?null:e.data;default:return null}}var wN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function J0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wN[t.type]:e==="textarea"}function oS(t,e,r,i){jT(i),e=Zd(e,"onChange"),0<e.length&&(r=new Bv("onChange","change",null,r,i),t.push({event:r,listeners:e}))}var Kl=null,pu=null;function bN(t){yS(t,0)}function tf(t){var e=Wa(t);if(PT(e))return t}function xN(t,e){if(t==="change")return e}var lS=!1;if(gi){var Ap;if(gi){var Pp="oninput"in document;if(!Pp){var Z0=document.createElement("div");Z0.setAttribute("oninput","return;"),Pp=typeof Z0.oninput=="function"}Ap=Pp}else Ap=!1;lS=Ap&&(!document.documentMode||9<document.documentMode)}function ew(){Kl&&(Kl.detachEvent("onpropertychange",uS),pu=Kl=null)}function uS(t){if(t.propertyName==="value"&&tf(pu)){var e=[];oS(e,pu,t,Lv(t)),BT(bN,e)}}function EN(t,e,r){t==="focusin"?(ew(),Kl=e,pu=r,Kl.attachEvent("onpropertychange",uS)):t==="focusout"&&ew()}function TN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tf(pu)}function SN(t,e){if(t==="click")return tf(e)}function IN(t,e){if(t==="input"||t==="change")return tf(e)}function kN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ar=typeof Object.is=="function"?Object.is:kN;function mu(t,e){if(Ar(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!Om.call(e,s)||!Ar(t[s],e[s]))return!1}return!0}function tw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nw(t,e){var r=tw(t);t=0;for(var i;r;){if(r.nodeType===3){if(i=t+r.textContent.length,t<=e&&i>=e)return{node:r,offset:e-t};t=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=tw(r)}}function cS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dS(){for(var t=window,e=qd();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=qd(t.document)}return e}function Hv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function CN(t){var e=dS(),r=t.focusedElem,i=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&cS(r.ownerDocument.documentElement,r)){if(i!==null&&Hv(r)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,a=Math.min(i.start,s);i=i.end===void 0?a:Math.min(i.end,s),!t.extend&&a>i&&(s=i,i=a,a=s),s=nw(r,a);var o=nw(r,i);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var AN=gi&&"documentMode"in document&&11>=document.documentMode,za=null,tg=null,Yl=null,ng=!1;function rw(t,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ng||za==null||za!==qd(i)||(i=za,"selectionStart"in i&&Hv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Yl&&mu(Yl,i)||(Yl=i,i=Zd(tg,"onSelect"),0<i.length&&(e=new Bv("onSelect","select",null,e,r),t.push({event:e,listeners:i}),e.target=za)))}function Gc(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ha={animationend:Gc("Animation","AnimationEnd"),animationiteration:Gc("Animation","AnimationIteration"),animationstart:Gc("Animation","AnimationStart"),transitionend:Gc("Transition","TransitionEnd")},Rp={},hS={};gi&&(hS=document.createElement("div").style,"AnimationEvent"in window||(delete Ha.animationend.animation,delete Ha.animationiteration.animation,delete Ha.animationstart.animation),"TransitionEvent"in window||delete Ha.transitionend.transition);function nf(t){if(Rp[t])return Rp[t];if(!Ha[t])return t;var e=Ha[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in hS)return Rp[t]=e[r];return t}var fS=nf("animationend"),pS=nf("animationiteration"),mS=nf("animationstart"),gS=nf("transitionend"),vS=new Map,iw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Es(t,e){vS.set(t,e),fa(e,[t])}for(var Np=0;Np<iw.length;Np++){var Dp=iw[Np],PN=Dp.toLowerCase(),RN=Dp[0].toUpperCase()+Dp.slice(1);Es(PN,"on"+RN)}Es(fS,"onAnimationEnd");Es(pS,"onAnimationIteration");Es(mS,"onAnimationStart");Es("dblclick","onDoubleClick");Es("focusin","onFocus");Es("focusout","onBlur");Es(gS,"onTransitionEnd");ho("onMouseEnter",["mouseout","mouseover"]);ho("onMouseLeave",["mouseout","mouseover"]);ho("onPointerEnter",["pointerout","pointerover"]);ho("onPointerLeave",["pointerout","pointerover"]);fa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ol));function sw(t,e,r){var i=t.type||"unknown-event";t.currentTarget=r,PR(i,e,void 0,t),t.currentTarget=null}function yS(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var i=t[r],s=i.event;i=i.listeners;e:{var a=void 0;if(e)for(var o=i.length-1;0<=o;o--){var l=i[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==a&&s.isPropagationStopped())break e;sw(s,l,c),a=u}else for(o=0;o<i.length;o++){if(l=i[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==a&&s.isPropagationStopped())break e;sw(s,l,c),a=u}}}if(Kd)throw t=Qm,Kd=!1,Qm=null,t}function ut(t,e){var r=e[og];r===void 0&&(r=e[og]=new Set);var i=t+"__bubble";r.has(i)||(_S(e,t,2,!1),r.add(i))}function Mp(t,e,r){var i=0;e&&(i|=4),_S(r,t,i,e)}var Kc="_reactListening"+Math.random().toString(36).slice(2);function gu(t){if(!t[Kc]){t[Kc]=!0,ST.forEach(function(r){r!=="selectionchange"&&(NN.has(r)||Mp(r,!1,t),Mp(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Kc]||(e[Kc]=!0,Mp("selectionchange",!1,e))}}function _S(t,e,r,i){switch(nS(e)){case 1:var s=qR;break;case 4:s=GR;break;default:s=Fv}r=s.bind(null,e,r,t),s=void 0,!Xm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Lp(t,e,r,i,s){var a=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Ks(l),o===null)return;if(u=o.tag,u===5||u===6){i=a=o;continue e}l=l.parentNode}}i=i.return}BT(function(){var c=a,h=Lv(r),f=[];e:{var p=vS.get(t);if(p!==void 0){var g=Bv,T=t;switch(t){case"keypress":if(xd(r)===0)break e;case"keydown":case"keyup":g=lN;break;case"focusin":T="focus",g=Cp;break;case"focusout":T="blur",g=Cp;break;case"beforeblur":case"afterblur":g=Cp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=G0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=XR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=dN;break;case fS:case pS:case mS:g=ZR;break;case gS:g=fN;break;case"scroll":g=KR;break;case"wheel":g=mN;break;case"copy":case"cut":case"paste":g=tN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Y0}var N=(e&4)!==0,A=!N&&t==="scroll",b=N?p!==null?p+"Capture":null:p;N=[];for(var x=c,w;x!==null;){w=x;var R=w.stateNode;if(w.tag===5&&R!==null&&(w=R,b!==null&&(R=cu(x,b),R!=null&&N.push(vu(x,R,w)))),A)break;x=x.return}0<N.length&&(p=new g(p,T,null,r,h),f.push({event:p,listeners:N}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&r!==Km&&(T=r.relatedTarget||r.fromElement)&&(Ks(T)||T[vi]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(T=r.relatedTarget||r.toElement,g=c,T=T?Ks(T):null,T!==null&&(A=pa(T),T!==A||T.tag!==5&&T.tag!==6)&&(T=null)):(g=null,T=c),g!==T)){if(N=G0,R="onMouseLeave",b="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(N=Y0,R="onPointerLeave",b="onPointerEnter",x="pointer"),A=g==null?p:Wa(g),w=T==null?p:Wa(T),p=new N(R,x+"leave",g,r,h),p.target=A,p.relatedTarget=w,R=null,Ks(h)===c&&(N=new N(b,x+"enter",T,r,h),N.target=w,N.relatedTarget=A,R=N),A=R,g&&T)t:{for(N=g,b=T,x=0,w=N;w;w=Aa(w))x++;for(w=0,R=b;R;R=Aa(R))w++;for(;0<x-w;)N=Aa(N),x--;for(;0<w-x;)b=Aa(b),w--;for(;x--;){if(N===b||b!==null&&N===b.alternate)break t;N=Aa(N),b=Aa(b)}N=null}else N=null;g!==null&&aw(f,p,g,N,!1),T!==null&&A!==null&&aw(f,A,T,N,!0)}}e:{if(p=c?Wa(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var j=xN;else if(J0(p))if(lS)j=IN;else{j=TN;var V=EN}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(j=SN);if(j&&(j=j(t,c))){oS(f,j,r,h);break e}V&&V(t,p,c),t==="focusout"&&(V=p._wrapperState)&&V.controlled&&p.type==="number"&&zm(p,"number",p.value)}switch(V=c?Wa(c):window,t){case"focusin":(J0(V)||V.contentEditable==="true")&&(za=V,tg=c,Yl=null);break;case"focusout":Yl=tg=za=null;break;case"mousedown":ng=!0;break;case"contextmenu":case"mouseup":case"dragend":ng=!1,rw(f,r,h);break;case"selectionchange":if(AN)break;case"keydown":case"keyup":rw(f,r,h)}var C;if(zv)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else $a?sS(t,r)&&(I="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(iS&&r.locale!=="ko"&&($a||I!=="onCompositionStart"?I==="onCompositionEnd"&&$a&&(C=rS()):(Gi=h,Uv="value"in Gi?Gi.value:Gi.textContent,$a=!0)),V=Zd(c,I),0<V.length&&(I=new K0(I,t,null,r,h),f.push({event:I,listeners:V}),C?I.data=C:(C=aS(r),C!==null&&(I.data=C)))),(C=vN?yN(t,r):_N(t,r))&&(c=Zd(c,"onBeforeInput"),0<c.length&&(h=new K0("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:c}),h.data=C))}yS(f,e)})}function vu(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Zd(t,e){for(var r=e+"Capture",i=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=cu(t,r),a!=null&&i.unshift(vu(t,a,s)),a=cu(t,e),a!=null&&i.push(vu(t,a,s))),t=t.return}return i}function Aa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function aw(t,e,r,i,s){for(var a=e._reactName,o=[];r!==null&&r!==i;){var l=r,u=l.alternate,c=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&c!==null&&(l=c,s?(u=cu(r,a),u!=null&&o.unshift(vu(r,u,l))):s||(u=cu(r,a),u!=null&&o.push(vu(r,u,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var DN=/\r\n?/g,MN=/\u0000|\uFFFD/g;function ow(t){return(typeof t=="string"?t:""+t).replace(DN,`
`).replace(MN,"")}function Yc(t,e,r){if(e=ow(e),ow(t)!==e&&r)throw Error(ae(425))}function eh(){}var rg=null,ig=null;function sg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ag=typeof setTimeout=="function"?setTimeout:void 0,LN=typeof clearTimeout=="function"?clearTimeout:void 0,lw=typeof Promise=="function"?Promise:void 0,ON=typeof queueMicrotask=="function"?queueMicrotask:typeof lw<"u"?function(t){return lw.resolve(null).then(t).catch(jN)}:ag;function jN(t){setTimeout(function(){throw t})}function Op(t,e){var r=e,i=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(i===0){t.removeChild(s),fu(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=s}while(r);fu(e)}function Zi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Fo=Math.random().toString(36).slice(2),Fr="__reactFiber$"+Fo,yu="__reactProps$"+Fo,vi="__reactContainer$"+Fo,og="__reactEvents$"+Fo,VN="__reactListeners$"+Fo,FN="__reactHandles$"+Fo;function Ks(t){var e=t[Fr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[vi]||r[Fr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=uw(t);t!==null;){if(r=t[Fr])return r;t=uw(t)}return e}t=r,r=t.parentNode}return null}function qu(t){return t=t[Fr]||t[vi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Wa(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function rf(t){return t[yu]||null}var lg=[],qa=-1;function Ts(t){return{current:t}}function ct(t){0>qa||(t.current=lg[qa],lg[qa]=null,qa--)}function ot(t,e){qa++,lg[qa]=t.current,t.current=e}var ps={},pn=Ts(ps),Ln=Ts(!1),ta=ps;function fo(t,e){var r=t.type.contextTypes;if(!r)return ps;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=e[a];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function On(t){return t=t.childContextTypes,t!=null}function th(){ct(Ln),ct(pn)}function cw(t,e,r){if(pn.current!==ps)throw Error(ae(168));ot(pn,e),ot(Ln,r)}function wS(t,e,r){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(ae(108,ER(t)||"Unknown",s));return wt({},r,i)}function nh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ps,ta=pn.current,ot(pn,t),ot(Ln,Ln.current),!0}function dw(t,e,r){var i=t.stateNode;if(!i)throw Error(ae(169));r?(t=wS(t,e,ta),i.__reactInternalMemoizedMergedChildContext=t,ct(Ln),ct(pn),ot(pn,t)):ct(Ln),ot(Ln,r)}var oi=null,sf=!1,jp=!1;function bS(t){oi===null?oi=[t]:oi.push(t)}function UN(t){sf=!0,bS(t)}function Ss(){if(!jp&&oi!==null){jp=!0;var t=0,e=Ze;try{var r=oi;for(Ze=1;t<r.length;t++){var i=r[t];do i=i(!0);while(i!==null)}oi=null,sf=!1}catch(s){throw oi!==null&&(oi=oi.slice(t+1)),WT(Ov,Ss),s}finally{Ze=e,jp=!1}}return null}var Ga=[],Ka=0,rh=null,ih=0,ir=[],sr=0,na=null,li=1,ui="";function Bs(t,e){Ga[Ka++]=ih,Ga[Ka++]=rh,rh=t,ih=e}function xS(t,e,r){ir[sr++]=li,ir[sr++]=ui,ir[sr++]=na,na=t;var i=li;t=ui;var s=32-kr(i)-1;i&=~(1<<s),r+=1;var a=32-kr(e)+s;if(30<a){var o=s-s%5;a=(i&(1<<o)-1).toString(32),i>>=o,s-=o,li=1<<32-kr(e)+s|r<<s|i,ui=a+t}else li=1<<a|r<<s|i,ui=t}function Wv(t){t.return!==null&&(Bs(t,1),xS(t,1,0))}function qv(t){for(;t===rh;)rh=Ga[--Ka],Ga[Ka]=null,ih=Ga[--Ka],Ga[Ka]=null;for(;t===na;)na=ir[--sr],ir[sr]=null,ui=ir[--sr],ir[sr]=null,li=ir[--sr],ir[sr]=null}var Gn=null,Hn=null,ft=!1,Tr=null;function ES(t,e){var r=or(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function hw(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Gn=t,Hn=Zi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Gn=t,Hn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=na!==null?{id:li,overflow:ui}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=or(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Gn=t,Hn=null,!0):!1;default:return!1}}function ug(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cg(t){if(ft){var e=Hn;if(e){var r=e;if(!hw(t,e)){if(ug(t))throw Error(ae(418));e=Zi(r.nextSibling);var i=Gn;e&&hw(t,e)?ES(i,r):(t.flags=t.flags&-4097|2,ft=!1,Gn=t)}}else{if(ug(t))throw Error(ae(418));t.flags=t.flags&-4097|2,ft=!1,Gn=t}}}function fw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Gn=t}function Xc(t){if(t!==Gn)return!1;if(!ft)return fw(t),ft=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sg(t.type,t.memoizedProps)),e&&(e=Hn)){if(ug(t))throw TS(),Error(ae(418));for(;e;)ES(t,e),e=Zi(e.nextSibling)}if(fw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Hn=Zi(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Hn=null}}else Hn=Gn?Zi(t.stateNode.nextSibling):null;return!0}function TS(){for(var t=Hn;t;)t=Zi(t.nextSibling)}function po(){Hn=Gn=null,ft=!1}function Gv(t){Tr===null?Tr=[t]:Tr.push(t)}var BN=Ii.ReactCurrentBatchConfig;function _l(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ae(309));var i=r.stateNode}if(!i)throw Error(ae(147,t));var s=i,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(ae(284));if(!r._owner)throw Error(ae(290,t))}return t}function Qc(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function pw(t){var e=t._init;return e(t._payload)}function SS(t){function e(b,x){if(t){var w=b.deletions;w===null?(b.deletions=[x],b.flags|=16):w.push(x)}}function r(b,x){if(!t)return null;for(;x!==null;)e(b,x),x=x.sibling;return null}function i(b,x){for(b=new Map;x!==null;)x.key!==null?b.set(x.key,x):b.set(x.index,x),x=x.sibling;return b}function s(b,x){return b=rs(b,x),b.index=0,b.sibling=null,b}function a(b,x,w){return b.index=w,t?(w=b.alternate,w!==null?(w=w.index,w<x?(b.flags|=2,x):w):(b.flags|=2,x)):(b.flags|=1048576,x)}function o(b){return t&&b.alternate===null&&(b.flags|=2),b}function l(b,x,w,R){return x===null||x.tag!==6?(x=Hp(w,b.mode,R),x.return=b,x):(x=s(x,w),x.return=b,x)}function u(b,x,w,R){var j=w.type;return j===Ba?h(b,x,w.props.children,R,w.key):x!==null&&(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Vi&&pw(j)===x.type)?(R=s(x,w.props),R.ref=_l(b,x,w),R.return=b,R):(R=Ad(w.type,w.key,w.props,null,b.mode,R),R.ref=_l(b,x,w),R.return=b,R)}function c(b,x,w,R){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=Wp(w,b.mode,R),x.return=b,x):(x=s(x,w.children||[]),x.return=b,x)}function h(b,x,w,R,j){return x===null||x.tag!==7?(x=ea(w,b.mode,R,j),x.return=b,x):(x=s(x,w),x.return=b,x)}function f(b,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Hp(""+x,b.mode,w),x.return=b,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Uc:return w=Ad(x.type,x.key,x.props,null,b.mode,w),w.ref=_l(b,null,x),w.return=b,w;case Ua:return x=Wp(x,b.mode,w),x.return=b,x;case Vi:var R=x._init;return f(b,R(x._payload),w)}if(Ml(x)||pl(x))return x=ea(x,b.mode,w,null),x.return=b,x;Qc(b,x)}return null}function p(b,x,w,R){var j=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return j!==null?null:l(b,x,""+w,R);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Uc:return w.key===j?u(b,x,w,R):null;case Ua:return w.key===j?c(b,x,w,R):null;case Vi:return j=w._init,p(b,x,j(w._payload),R)}if(Ml(w)||pl(w))return j!==null?null:h(b,x,w,R,null);Qc(b,w)}return null}function g(b,x,w,R,j){if(typeof R=="string"&&R!==""||typeof R=="number")return b=b.get(w)||null,l(x,b,""+R,j);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Uc:return b=b.get(R.key===null?w:R.key)||null,u(x,b,R,j);case Ua:return b=b.get(R.key===null?w:R.key)||null,c(x,b,R,j);case Vi:var V=R._init;return g(b,x,w,V(R._payload),j)}if(Ml(R)||pl(R))return b=b.get(w)||null,h(x,b,R,j,null);Qc(x,R)}return null}function T(b,x,w,R){for(var j=null,V=null,C=x,I=x=0,y=null;C!==null&&I<w.length;I++){C.index>I?(y=C,C=null):y=C.sibling;var _=p(b,C,w[I],R);if(_===null){C===null&&(C=y);break}t&&C&&_.alternate===null&&e(b,C),x=a(_,x,I),V===null?j=_:V.sibling=_,V=_,C=y}if(I===w.length)return r(b,C),ft&&Bs(b,I),j;if(C===null){for(;I<w.length;I++)C=f(b,w[I],R),C!==null&&(x=a(C,x,I),V===null?j=C:V.sibling=C,V=C);return ft&&Bs(b,I),j}for(C=i(b,C);I<w.length;I++)y=g(C,b,I,w[I],R),y!==null&&(t&&y.alternate!==null&&C.delete(y.key===null?I:y.key),x=a(y,x,I),V===null?j=y:V.sibling=y,V=y);return t&&C.forEach(function(S){return e(b,S)}),ft&&Bs(b,I),j}function N(b,x,w,R){var j=pl(w);if(typeof j!="function")throw Error(ae(150));if(w=j.call(w),w==null)throw Error(ae(151));for(var V=j=null,C=x,I=x=0,y=null,_=w.next();C!==null&&!_.done;I++,_=w.next()){C.index>I?(y=C,C=null):y=C.sibling;var S=p(b,C,_.value,R);if(S===null){C===null&&(C=y);break}t&&C&&S.alternate===null&&e(b,C),x=a(S,x,I),V===null?j=S:V.sibling=S,V=S,C=y}if(_.done)return r(b,C),ft&&Bs(b,I),j;if(C===null){for(;!_.done;I++,_=w.next())_=f(b,_.value,R),_!==null&&(x=a(_,x,I),V===null?j=_:V.sibling=_,V=_);return ft&&Bs(b,I),j}for(C=i(b,C);!_.done;I++,_=w.next())_=g(C,b,I,_.value,R),_!==null&&(t&&_.alternate!==null&&C.delete(_.key===null?I:_.key),x=a(_,x,I),V===null?j=_:V.sibling=_,V=_);return t&&C.forEach(function(M){return e(b,M)}),ft&&Bs(b,I),j}function A(b,x,w,R){if(typeof w=="object"&&w!==null&&w.type===Ba&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Uc:e:{for(var j=w.key,V=x;V!==null;){if(V.key===j){if(j=w.type,j===Ba){if(V.tag===7){r(b,V.sibling),x=s(V,w.props.children),x.return=b,b=x;break e}}else if(V.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Vi&&pw(j)===V.type){r(b,V.sibling),x=s(V,w.props),x.ref=_l(b,V,w),x.return=b,b=x;break e}r(b,V);break}else e(b,V);V=V.sibling}w.type===Ba?(x=ea(w.props.children,b.mode,R,w.key),x.return=b,b=x):(R=Ad(w.type,w.key,w.props,null,b.mode,R),R.ref=_l(b,x,w),R.return=b,b=R)}return o(b);case Ua:e:{for(V=w.key;x!==null;){if(x.key===V)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){r(b,x.sibling),x=s(x,w.children||[]),x.return=b,b=x;break e}else{r(b,x);break}else e(b,x);x=x.sibling}x=Wp(w,b.mode,R),x.return=b,b=x}return o(b);case Vi:return V=w._init,A(b,x,V(w._payload),R)}if(Ml(w))return T(b,x,w,R);if(pl(w))return N(b,x,w,R);Qc(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(r(b,x.sibling),x=s(x,w),x.return=b,b=x):(r(b,x),x=Hp(w,b.mode,R),x.return=b,b=x),o(b)):r(b,x)}return A}var mo=SS(!0),IS=SS(!1),sh=Ts(null),ah=null,Ya=null,Kv=null;function Yv(){Kv=Ya=ah=null}function Xv(t){var e=sh.current;ct(sh),t._currentValue=e}function dg(t,e,r){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===r)break;t=t.return}}function ro(t,e){ah=t,Kv=Ya=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dn=!0),t.firstContext=null)}function hr(t){var e=t._currentValue;if(Kv!==t)if(t={context:t,memoizedValue:e,next:null},Ya===null){if(ah===null)throw Error(ae(308));Ya=t,ah.dependencies={lanes:0,firstContext:t}}else Ya=Ya.next=t;return e}var Ys=null;function Qv(t){Ys===null?Ys=[t]:Ys.push(t)}function kS(t,e,r,i){var s=e.interleaved;return s===null?(r.next=r,Qv(e)):(r.next=s.next,s.next=r),e.interleaved=r,yi(t,i)}function yi(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Fi=!1;function Jv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function es(t,e,r){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,qe&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,yi(t,r)}return s=i.interleaved,s===null?(e.next=e,Qv(i)):(e.next=s.next,s.next=e),i.interleaved=e,yi(t,r)}function Ed(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,jv(t,r)}}function mw(t,e){var r=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=e:a=a.next=e}else s=a=e;r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:i.shared,effects:i.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function oh(t,e,r,i){var s=t.updateQueue;Fi=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?a=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=u))}if(a!==null){var f=s.baseState;o=0,h=c=u=null,l=a;do{var p=l.lane,g=l.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var T=t,N=l;switch(p=e,g=r,N.tag){case 1:if(T=N.payload,typeof T=="function"){f=T.call(g,f,p);break e}f=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=N.payload,p=typeof T=="function"?T.call(g,f,p):T,p==null)break e;f=wt({},f,p);break e;case 2:Fi=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(c=h=g,u=f):h=h.next=g,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(u=f),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);ia|=o,t.lanes=o,t.memoizedState=f}}function gw(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=r,typeof s!="function")throw Error(ae(191,s));s.call(i)}}}var Gu={},Br=Ts(Gu),_u=Ts(Gu),wu=Ts(Gu);function Xs(t){if(t===Gu)throw Error(ae(174));return t}function Zv(t,e){switch(ot(wu,e),ot(_u,t),ot(Br,Gu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wm(e,t)}ct(Br),ot(Br,e)}function go(){ct(Br),ct(_u),ct(wu)}function AS(t){Xs(wu.current);var e=Xs(Br.current),r=Wm(e,t.type);e!==r&&(ot(_u,t),ot(Br,r))}function ey(t){_u.current===t&&(ct(Br),ct(_u))}var vt=Ts(0);function lh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vp=[];function ty(){for(var t=0;t<Vp.length;t++)Vp[t]._workInProgressVersionPrimary=null;Vp.length=0}var Td=Ii.ReactCurrentDispatcher,Fp=Ii.ReactCurrentBatchConfig,ra=0,_t=null,Nt=null,Ut=null,uh=!1,Xl=!1,bu=0,$N=0;function on(){throw Error(ae(321))}function ny(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ar(t[r],e[r]))return!1;return!0}function ry(t,e,r,i,s,a){if(ra=a,_t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Td.current=t===null||t.memoizedState===null?qN:GN,t=r(i,s),Xl){a=0;do{if(Xl=!1,bu=0,25<=a)throw Error(ae(301));a+=1,Ut=Nt=null,e.updateQueue=null,Td.current=KN,t=r(i,s)}while(Xl)}if(Td.current=ch,e=Nt!==null&&Nt.next!==null,ra=0,Ut=Nt=_t=null,uh=!1,e)throw Error(ae(300));return t}function iy(){var t=bu!==0;return bu=0,t}function Or(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?_t.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function fr(){if(Nt===null){var t=_t.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var e=Ut===null?_t.memoizedState:Ut.next;if(e!==null)Ut=e,Nt=t;else{if(t===null)throw Error(ae(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Ut===null?_t.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function xu(t,e){return typeof e=="function"?e(t):e}function Up(t){var e=fr(),r=e.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=t;var i=Nt,s=i.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}i.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,i=i.baseState;var l=o=null,u=null,c=a;do{var h=c.lane;if((ra&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=f,o=i):u=u.next=f,_t.lanes|=h,ia|=h}c=c.next}while(c!==null&&c!==a);u===null?o=i:u.next=l,Ar(i,e.memoizedState)||(Dn=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=u,r.lastRenderedState=i}if(t=r.interleaved,t!==null){s=t;do a=s.lane,_t.lanes|=a,ia|=a,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Bp(t){var e=fr(),r=e.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=t;var i=r.dispatch,s=r.pending,a=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);Ar(a,e.memoizedState)||(Dn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,i]}function PS(){}function RS(t,e){var r=_t,i=fr(),s=e(),a=!Ar(i.memoizedState,s);if(a&&(i.memoizedState=s,Dn=!0),i=i.queue,sy(MS.bind(null,r,i,t),[t]),i.getSnapshot!==e||a||Ut!==null&&Ut.memoizedState.tag&1){if(r.flags|=2048,Eu(9,DS.bind(null,r,i,s,e),void 0,null),Bt===null)throw Error(ae(349));ra&30||NS(r,e,s)}return s}function NS(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function DS(t,e,r,i){e.value=r,e.getSnapshot=i,LS(e)&&OS(t)}function MS(t,e,r){return r(function(){LS(e)&&OS(t)})}function LS(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ar(t,r)}catch{return!0}}function OS(t){var e=yi(t,1);e!==null&&Cr(e,t,1,-1)}function vw(t){var e=Or();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xu,lastRenderedState:t},e.queue=t,t=t.dispatch=WN.bind(null,_t,t),[e.memoizedState,t]}function Eu(t,e,r,i){return t={tag:t,create:e,destroy:r,deps:i,next:null},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(i=r.next,r.next=t,t.next=i,e.lastEffect=t)),t}function jS(){return fr().memoizedState}function Sd(t,e,r,i){var s=Or();_t.flags|=t,s.memoizedState=Eu(1|e,r,void 0,i===void 0?null:i)}function af(t,e,r,i){var s=fr();i=i===void 0?null:i;var a=void 0;if(Nt!==null){var o=Nt.memoizedState;if(a=o.destroy,i!==null&&ny(i,o.deps)){s.memoizedState=Eu(e,r,a,i);return}}_t.flags|=t,s.memoizedState=Eu(1|e,r,a,i)}function yw(t,e){return Sd(8390656,8,t,e)}function sy(t,e){return af(2048,8,t,e)}function VS(t,e){return af(4,2,t,e)}function FS(t,e){return af(4,4,t,e)}function US(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function BS(t,e,r){return r=r!=null?r.concat([t]):null,af(4,4,US.bind(null,e,t),r)}function ay(){}function $S(t,e){var r=fr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&ny(e,i[1])?i[0]:(r.memoizedState=[t,e],t)}function zS(t,e){var r=fr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&ny(e,i[1])?i[0]:(t=t(),r.memoizedState=[t,e],t)}function HS(t,e,r){return ra&21?(Ar(r,e)||(r=KT(),_t.lanes|=r,ia|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dn=!0),t.memoizedState=r)}function zN(t,e){var r=Ze;Ze=r!==0&&4>r?r:4,t(!0);var i=Fp.transition;Fp.transition={};try{t(!1),e()}finally{Ze=r,Fp.transition=i}}function WS(){return fr().memoizedState}function HN(t,e,r){var i=ns(t);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},qS(t))GS(e,r);else if(r=kS(t,e,r,i),r!==null){var s=_n();Cr(r,t,i,s),KS(r,e,i)}}function WN(t,e,r){var i=ns(t),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(qS(t))GS(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,r);if(s.hasEagerState=!0,s.eagerState=l,Ar(l,o)){var u=e.interleaved;u===null?(s.next=s,Qv(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=kS(t,e,s,i),r!==null&&(s=_n(),Cr(r,t,i,s),KS(r,e,i))}}function qS(t){var e=t.alternate;return t===_t||e!==null&&e===_t}function GS(t,e){Xl=uh=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function KS(t,e,r){if(r&4194240){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,jv(t,r)}}var ch={readContext:hr,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useInsertionEffect:on,useLayoutEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useMutableSource:on,useSyncExternalStore:on,useId:on,unstable_isNewReconciler:!1},qN={readContext:hr,useCallback:function(t,e){return Or().memoizedState=[t,e===void 0?null:e],t},useContext:hr,useEffect:yw,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Sd(4194308,4,US.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Sd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sd(4,2,t,e)},useMemo:function(t,e){var r=Or();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var i=Or();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=HN.bind(null,_t,t),[i.memoizedState,t]},useRef:function(t){var e=Or();return t={current:t},e.memoizedState=t},useState:vw,useDebugValue:ay,useDeferredValue:function(t){return Or().memoizedState=t},useTransition:function(){var t=vw(!1),e=t[0];return t=zN.bind(null,t[1]),Or().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var i=_t,s=Or();if(ft){if(r===void 0)throw Error(ae(407));r=r()}else{if(r=e(),Bt===null)throw Error(ae(349));ra&30||NS(i,e,r)}s.memoizedState=r;var a={value:r,getSnapshot:e};return s.queue=a,yw(MS.bind(null,i,a,t),[t]),i.flags|=2048,Eu(9,DS.bind(null,i,a,r,e),void 0,null),r},useId:function(){var t=Or(),e=Bt.identifierPrefix;if(ft){var r=ui,i=li;r=(i&~(1<<32-kr(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=bu++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=$N++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},GN={readContext:hr,useCallback:$S,useContext:hr,useEffect:sy,useImperativeHandle:BS,useInsertionEffect:VS,useLayoutEffect:FS,useMemo:zS,useReducer:Up,useRef:jS,useState:function(){return Up(xu)},useDebugValue:ay,useDeferredValue:function(t){var e=fr();return HS(e,Nt.memoizedState,t)},useTransition:function(){var t=Up(xu)[0],e=fr().memoizedState;return[t,e]},useMutableSource:PS,useSyncExternalStore:RS,useId:WS,unstable_isNewReconciler:!1},KN={readContext:hr,useCallback:$S,useContext:hr,useEffect:sy,useImperativeHandle:BS,useInsertionEffect:VS,useLayoutEffect:FS,useMemo:zS,useReducer:Bp,useRef:jS,useState:function(){return Bp(xu)},useDebugValue:ay,useDeferredValue:function(t){var e=fr();return Nt===null?e.memoizedState=t:HS(e,Nt.memoizedState,t)},useTransition:function(){var t=Bp(xu)[0],e=fr().memoizedState;return[t,e]},useMutableSource:PS,useSyncExternalStore:RS,useId:WS,unstable_isNewReconciler:!1};function xr(t,e){if(t&&t.defaultProps){e=wt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function hg(t,e,r,i){e=t.memoizedState,r=r(i,e),r=r==null?e:wt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var of={isMounted:function(t){return(t=t._reactInternals)?pa(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var i=_n(),s=ns(t),a=fi(i,s);a.payload=e,r!=null&&(a.callback=r),e=es(t,a,s),e!==null&&(Cr(e,t,s,i),Ed(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var i=_n(),s=ns(t),a=fi(i,s);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=es(t,a,s),e!==null&&(Cr(e,t,s,i),Ed(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=_n(),i=ns(t),s=fi(r,i);s.tag=2,e!=null&&(s.callback=e),e=es(t,s,i),e!==null&&(Cr(e,t,i,r),Ed(e,t,i))}};function _w(t,e,r,i,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,a,o):e.prototype&&e.prototype.isPureReactComponent?!mu(r,i)||!mu(s,a):!0}function YS(t,e,r){var i=!1,s=ps,a=e.contextType;return typeof a=="object"&&a!==null?a=hr(a):(s=On(e)?ta:pn.current,i=e.contextTypes,a=(i=i!=null)?fo(t,s):ps),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=of,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function ww(t,e,r,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==t&&of.enqueueReplaceState(e,e.state,null)}function fg(t,e,r,i){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Jv(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=hr(a):(a=On(e)?ta:pn.current,s.context=fo(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(hg(t,e,a,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&of.enqueueReplaceState(s,s.state,null),oh(t,r,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function vo(t,e){try{var r="",i=e;do r+=xR(i),i=i.return;while(i);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function $p(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function pg(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var YN=typeof WeakMap=="function"?WeakMap:Map;function XS(t,e,r){r=fi(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){hh||(hh=!0,Tg=i),pg(t,e)},r}function QS(t,e,r){r=fi(-1,r),r.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;r.payload=function(){return i(s)},r.callback=function(){pg(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){pg(t,e),typeof i!="function"&&(ts===null?ts=new Set([this]):ts.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function bw(t,e,r){var i=t.pingCache;if(i===null){i=t.pingCache=new YN;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(r)||(s.add(r),t=uD.bind(null,t,e,r),e.then(t,t))}function xw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ew(t,e,r,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=fi(-1,1),e.tag=2,es(r,e,1))),r.lanes|=1),t)}var XN=Ii.ReactCurrentOwner,Dn=!1;function yn(t,e,r,i){e.child=t===null?IS(e,null,r,i):mo(e,t.child,r,i)}function Tw(t,e,r,i,s){r=r.render;var a=e.ref;return ro(e,s),i=ry(t,e,r,i,a,s),r=iy(),t!==null&&!Dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,_i(t,e,s)):(ft&&r&&Wv(e),e.flags|=1,yn(t,e,i,s),e.child)}function Sw(t,e,r,i,s){if(t===null){var a=r.type;return typeof a=="function"&&!py(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,JS(t,e,a,i,s)):(t=Ad(r.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:mu,r(o,i)&&t.ref===e.ref)return _i(t,e,s)}return e.flags|=1,t=rs(a,i),t.ref=e.ref,t.return=e,e.child=t}function JS(t,e,r,i,s){if(t!==null){var a=t.memoizedProps;if(mu(a,i)&&t.ref===e.ref)if(Dn=!1,e.pendingProps=i=a,(t.lanes&s)!==0)t.flags&131072&&(Dn=!0);else return e.lanes=t.lanes,_i(t,e,s)}return mg(t,e,r,i,s)}function ZS(t,e,r){var i=e.pendingProps,s=i.children,a=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot(Qa,zn),zn|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ot(Qa,zn),zn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=a!==null?a.baseLanes:r,ot(Qa,zn),zn|=i}else a!==null?(i=a.baseLanes|r,e.memoizedState=null):i=r,ot(Qa,zn),zn|=i;return yn(t,e,s,r),e.child}function eI(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function mg(t,e,r,i,s){var a=On(r)?ta:pn.current;return a=fo(e,a),ro(e,s),r=ry(t,e,r,i,a,s),i=iy(),t!==null&&!Dn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,_i(t,e,s)):(ft&&i&&Wv(e),e.flags|=1,yn(t,e,r,s),e.child)}function Iw(t,e,r,i,s){if(On(r)){var a=!0;nh(e)}else a=!1;if(ro(e,s),e.stateNode===null)Id(t,e),YS(e,r,i),fg(e,r,i,s),i=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=hr(c):(c=On(r)?ta:pn.current,c=fo(e,c));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||u!==c)&&ww(e,o,i,c),Fi=!1;var p=e.memoizedState;o.state=p,oh(e,i,o,s),u=e.memoizedState,l!==i||p!==u||Ln.current||Fi?(typeof h=="function"&&(hg(e,r,h,i),u=e.memoizedState),(l=Fi||_w(e,r,l,i,p,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),o.props=i,o.state=u,o.context=c,i=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,CS(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:xr(e.type,l),o.props=c,f=e.pendingProps,p=o.context,u=r.contextType,typeof u=="object"&&u!==null?u=hr(u):(u=On(r)?ta:pn.current,u=fo(e,u));var g=r.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||p!==u)&&ww(e,o,i,u),Fi=!1,p=e.memoizedState,o.state=p,oh(e,i,o,s);var T=e.memoizedState;l!==f||p!==T||Ln.current||Fi?(typeof g=="function"&&(hg(e,r,g,i),T=e.memoizedState),(c=Fi||_w(e,r,c,i,p,T,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,T,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,T,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=T),o.props=i,o.state=T,o.context=u,i=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return gg(t,e,r,i,a,s)}function gg(t,e,r,i,s,a){eI(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&dw(e,r,!1),_i(t,e,a);i=e.stateNode,XN.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=mo(e,t.child,null,a),e.child=mo(e,null,l,a)):yn(t,e,l,a),e.memoizedState=i.state,s&&dw(e,r,!0),e.child}function tI(t){var e=t.stateNode;e.pendingContext?cw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cw(t,e.context,!1),Zv(t,e.containerInfo)}function kw(t,e,r,i,s){return po(),Gv(s),e.flags|=256,yn(t,e,r,i),e.child}var vg={dehydrated:null,treeContext:null,retryLane:0};function yg(t){return{baseLanes:t,cachePool:null,transitions:null}}function nI(t,e,r){var i=e.pendingProps,s=vt.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ot(vt,s&1),t===null)return cg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,a?(i=e.mode,a=e.child,o={mode:"hidden",children:o},!(i&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=cf(o,i,0,null),t=ea(t,i,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=yg(r),e.memoizedState=vg,t):oy(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return QN(t,e,o,i,l,s,r);if(a){a=i.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=rs(s,u),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=rs(l,a):(a=ea(a,o,r,null),a.flags|=2),a.return=e,i.return=e,i.sibling=a,e.child=i,i=a,a=e.child,o=t.child.memoizedState,o=o===null?yg(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=vg,i}return a=t.child,t=a.sibling,i=rs(a,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=i,e.memoizedState=null,i}function oy(t,e){return e=cf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Jc(t,e,r,i){return i!==null&&Gv(i),mo(e,t.child,null,r),t=oy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function QN(t,e,r,i,s,a,o){if(r)return e.flags&256?(e.flags&=-257,i=$p(Error(ae(422))),Jc(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=i.fallback,s=e.mode,i=cf({mode:"visible",children:i.children},s,0,null),a=ea(a,s,o,null),a.flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,e.mode&1&&mo(e,t.child,null,o),e.child.memoizedState=yg(o),e.memoizedState=vg,a);if(!(e.mode&1))return Jc(t,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,a=Error(ae(419)),i=$p(a,i,void 0),Jc(t,e,o,i)}if(l=(o&t.childLanes)!==0,Dn||l){if(i=Bt,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,yi(t,s),Cr(i,t,s,-1))}return fy(),i=$p(Error(ae(421))),Jc(t,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=cD.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Hn=Zi(s.nextSibling),Gn=e,ft=!0,Tr=null,t!==null&&(ir[sr++]=li,ir[sr++]=ui,ir[sr++]=na,li=t.id,ui=t.overflow,na=e),e=oy(e,i.children),e.flags|=4096,e)}function Cw(t,e,r){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),dg(t.return,e,r)}function zp(t,e,r,i,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=r,a.tailMode=s)}function rI(t,e,r){var i=e.pendingProps,s=i.revealOrder,a=i.tail;if(yn(t,e,i.children,r),i=vt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Cw(t,r,e);else if(t.tag===19)Cw(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ot(vt,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&lh(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),zp(e,!1,s,r,a);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&lh(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}zp(e,!0,r,null,a);break;case"together":zp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Id(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _i(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),ia|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,r=rs(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=rs(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function JN(t,e,r){switch(e.tag){case 3:tI(e),po();break;case 5:AS(e);break;case 1:On(e.type)&&nh(e);break;case 4:Zv(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;ot(sh,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ot(vt,vt.current&1),e.flags|=128,null):r&e.child.childLanes?nI(t,e,r):(ot(vt,vt.current&1),t=_i(t,e,r),t!==null?t.sibling:null);ot(vt,vt.current&1);break;case 19:if(i=(r&e.childLanes)!==0,t.flags&128){if(i)return rI(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ot(vt,vt.current),i)break;return null;case 22:case 23:return e.lanes=0,ZS(t,e,r)}return _i(t,e,r)}var iI,_g,sI,aI;iI=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};_g=function(){};sI=function(t,e,r,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,Xs(Br.current);var a=null;switch(r){case"input":s=Bm(t,s),i=Bm(t,i),a=[];break;case"select":s=wt({},s,{value:void 0}),i=wt({},i,{value:void 0}),a=[];break;case"textarea":s=Hm(t,s),i=Hm(t,i),a=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=eh)}qm(r,i);var o;r=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(lu.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in i){var u=i[c];if(l=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(a||(a=[]),a.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(lu.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&ut("scroll",t),a||l===u||(a=[])):(a=a||[]).push(c,u))}r&&(a=a||[]).push("style",r);var c=a;(e.updateQueue=c)&&(e.flags|=4)}};aI=function(t,e,r,i){r!==i&&(e.flags|=4)};function wl(t,e){if(!ft)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ln(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,i=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=r,e}function ZN(t,e,r){var i=e.pendingProps;switch(qv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(e),null;case 1:return On(e.type)&&th(),ln(e),null;case 3:return i=e.stateNode,go(),ct(Ln),ct(pn),ty(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Xc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Tr!==null&&(kg(Tr),Tr=null))),_g(t,e),ln(e),null;case 5:ey(e);var s=Xs(wu.current);if(r=e.type,t!==null&&e.stateNode!=null)sI(t,e,r,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ae(166));return ln(e),null}if(t=Xs(Br.current),Xc(e)){i=e.stateNode,r=e.type;var a=e.memoizedProps;switch(i[Fr]=e,i[yu]=a,t=(e.mode&1)!==0,r){case"dialog":ut("cancel",i),ut("close",i);break;case"iframe":case"object":case"embed":ut("load",i);break;case"video":case"audio":for(s=0;s<Ol.length;s++)ut(Ol[s],i);break;case"source":ut("error",i);break;case"img":case"image":case"link":ut("error",i),ut("load",i);break;case"details":ut("toggle",i);break;case"input":j0(i,a),ut("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},ut("invalid",i);break;case"textarea":F0(i,a),ut("invalid",i)}qm(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?i.textContent!==l&&(a.suppressHydrationWarning!==!0&&Yc(i.textContent,l,t),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Yc(i.textContent,l,t),s=["children",""+l]):lu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ut("scroll",i)}switch(r){case"input":Bc(i),V0(i,a,!0);break;case"textarea":Bc(i),U0(i);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(i.onclick=eh)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=DT(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(r,{is:i.is}):(t=o.createElement(r),r==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,r),t[Fr]=e,t[yu]=i,iI(t,e,!1,!1),e.stateNode=t;e:{switch(o=Gm(r,i),r){case"dialog":ut("cancel",t),ut("close",t),s=i;break;case"iframe":case"object":case"embed":ut("load",t),s=i;break;case"video":case"audio":for(s=0;s<Ol.length;s++)ut(Ol[s],t);s=i;break;case"source":ut("error",t),s=i;break;case"img":case"image":case"link":ut("error",t),ut("load",t),s=i;break;case"details":ut("toggle",t),s=i;break;case"input":j0(t,i),s=Bm(t,i),ut("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=wt({},i,{value:void 0}),ut("invalid",t);break;case"textarea":F0(t,i),s=Hm(t,i),ut("invalid",t);break;default:s=i}qm(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?OT(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&MT(t,u)):a==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&uu(t,u):typeof u=="number"&&uu(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(lu.hasOwnProperty(a)?u!=null&&a==="onScroll"&&ut("scroll",t):u!=null&&Rv(t,a,u,o))}switch(r){case"input":Bc(t),V0(t,i,!1);break;case"textarea":Bc(t),U0(t);break;case"option":i.value!=null&&t.setAttribute("value",""+fs(i.value));break;case"select":t.multiple=!!i.multiple,a=i.value,a!=null?Za(t,!!i.multiple,a,!1):i.defaultValue!=null&&Za(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=eh)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ln(e),null;case 6:if(t&&e.stateNode!=null)aI(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ae(166));if(r=Xs(wu.current),Xs(Br.current),Xc(e)){if(i=e.stateNode,r=e.memoizedProps,i[Fr]=e,(a=i.nodeValue!==r)&&(t=Gn,t!==null))switch(t.tag){case 3:Yc(i.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Yc(i.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Fr]=e,e.stateNode=i}return ln(e),null;case 13:if(ct(vt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ft&&Hn!==null&&e.mode&1&&!(e.flags&128))TS(),po(),e.flags|=98560,a=!1;else if(a=Xc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!a)throw Error(ae(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ae(317));a[Fr]=e}else po(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ln(e),a=!1}else Tr!==null&&(kg(Tr),Tr=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||vt.current&1?Mt===0&&(Mt=3):fy())),e.updateQueue!==null&&(e.flags|=4),ln(e),null);case 4:return go(),_g(t,e),t===null&&gu(e.stateNode.containerInfo),ln(e),null;case 10:return Xv(e.type._context),ln(e),null;case 17:return On(e.type)&&th(),ln(e),null;case 19:if(ct(vt),a=e.memoizedState,a===null)return ln(e),null;if(i=(e.flags&128)!==0,o=a.rendering,o===null)if(i)wl(a,!1);else{if(Mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=lh(t),o!==null){for(e.flags|=128,wl(a,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)a=r,t=i,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ot(vt,vt.current&1|2),e.child}t=t.sibling}a.tail!==null&&kt()>yo&&(e.flags|=128,i=!0,wl(a,!1),e.lanes=4194304)}else{if(!i)if(t=lh(o),t!==null){if(e.flags|=128,i=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),wl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!ft)return ln(e),null}else 2*kt()-a.renderingStartTime>yo&&r!==1073741824&&(e.flags|=128,i=!0,wl(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=kt(),e.sibling=null,r=vt.current,ot(vt,i?r&1|2:r&1),e):(ln(e),null);case 22:case 23:return hy(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?zn&1073741824&&(ln(e),e.subtreeFlags&6&&(e.flags|=8192)):ln(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function eD(t,e){switch(qv(e),e.tag){case 1:return On(e.type)&&th(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return go(),ct(Ln),ct(pn),ty(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ey(e),null;case 13:if(ct(vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));po()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ct(vt),null;case 4:return go(),null;case 10:return Xv(e.type._context),null;case 22:case 23:return hy(),null;case 24:return null;default:return null}}var Zc=!1,dn=!1,tD=typeof WeakSet=="function"?WeakSet:Set,ge=null;function Xa(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Tt(t,e,i)}else r.current=null}function wg(t,e,r){try{r()}catch(i){Tt(t,e,i)}}var Aw=!1;function nD(t,e){if(rg=Qd,t=dS(),Hv(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,u=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==a||i!==0&&f.nodeType!==3||(u=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===r&&++c===s&&(l=o),p===a&&++h===i&&(u=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(ig={focusedElem:t,selectionRange:r},Qd=!1,ge=e;ge!==null;)if(e=ge,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ge=t;else for(;ge!==null;){e=ge;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var N=T.memoizedProps,A=T.memoizedState,b=e.stateNode,x=b.getSnapshotBeforeUpdate(e.elementType===e.type?N:xr(e.type,N),A);b.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(R){Tt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,ge=t;break}ge=e.return}return T=Aw,Aw=!1,T}function Ql(t,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&wg(e,r,a)}s=s.next}while(s!==i)}}function lf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function bg(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function oI(t){var e=t.alternate;e!==null&&(t.alternate=null,oI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Fr],delete e[yu],delete e[og],delete e[VN],delete e[FN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function lI(t){return t.tag===5||t.tag===3||t.tag===4}function Pw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xg(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=eh));else if(i!==4&&(t=t.child,t!==null))for(xg(t,e,r),t=t.sibling;t!==null;)xg(t,e,r),t=t.sibling}function Eg(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Eg(t,e,r),t=t.sibling;t!==null;)Eg(t,e,r),t=t.sibling}var Kt=null,Er=!1;function Li(t,e,r){for(r=r.child;r!==null;)uI(t,e,r),r=r.sibling}function uI(t,e,r){if(Ur&&typeof Ur.onCommitFiberUnmount=="function")try{Ur.onCommitFiberUnmount(Zh,r)}catch{}switch(r.tag){case 5:dn||Xa(r,e);case 6:var i=Kt,s=Er;Kt=null,Li(t,e,r),Kt=i,Er=s,Kt!==null&&(Er?(t=Kt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Kt.removeChild(r.stateNode));break;case 18:Kt!==null&&(Er?(t=Kt,r=r.stateNode,t.nodeType===8?Op(t.parentNode,r):t.nodeType===1&&Op(t,r),fu(t)):Op(Kt,r.stateNode));break;case 4:i=Kt,s=Er,Kt=r.stateNode.containerInfo,Er=!0,Li(t,e,r),Kt=i,Er=s;break;case 0:case 11:case 14:case 15:if(!dn&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&wg(r,e,o),s=s.next}while(s!==i)}Li(t,e,r);break;case 1:if(!dn&&(Xa(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(l){Tt(r,e,l)}Li(t,e,r);break;case 21:Li(t,e,r);break;case 22:r.mode&1?(dn=(i=dn)||r.memoizedState!==null,Li(t,e,r),dn=i):Li(t,e,r);break;default:Li(t,e,r)}}function Rw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new tD),e.forEach(function(i){var s=dD.bind(null,t,i);r.has(i)||(r.add(i),i.then(s,s))})}}function wr(t,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Kt=l.stateNode,Er=!1;break e;case 3:Kt=l.stateNode.containerInfo,Er=!0;break e;case 4:Kt=l.stateNode.containerInfo,Er=!0;break e}l=l.return}if(Kt===null)throw Error(ae(160));uI(a,o,s),Kt=null,Er=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Tt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cI(e,t),e=e.sibling}function cI(t,e){var r=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(wr(e,t),Mr(t),i&4){try{Ql(3,t,t.return),lf(3,t)}catch(N){Tt(t,t.return,N)}try{Ql(5,t,t.return)}catch(N){Tt(t,t.return,N)}}break;case 1:wr(e,t),Mr(t),i&512&&r!==null&&Xa(r,r.return);break;case 5:if(wr(e,t),Mr(t),i&512&&r!==null&&Xa(r,r.return),t.flags&32){var s=t.stateNode;try{uu(s,"")}catch(N){Tt(t,t.return,N)}}if(i&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&RT(s,a),Gm(l,o);var c=Gm(l,a);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?OT(s,f):h==="dangerouslySetInnerHTML"?MT(s,f):h==="children"?uu(s,f):Rv(s,h,f,c)}switch(l){case"input":$m(s,a);break;case"textarea":NT(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var g=a.value;g!=null?Za(s,!!a.multiple,g,!1):p!==!!a.multiple&&(a.defaultValue!=null?Za(s,!!a.multiple,a.defaultValue,!0):Za(s,!!a.multiple,a.multiple?[]:"",!1))}s[yu]=a}catch(N){Tt(t,t.return,N)}}break;case 6:if(wr(e,t),Mr(t),i&4){if(t.stateNode===null)throw Error(ae(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(N){Tt(t,t.return,N)}}break;case 3:if(wr(e,t),Mr(t),i&4&&r!==null&&r.memoizedState.isDehydrated)try{fu(e.containerInfo)}catch(N){Tt(t,t.return,N)}break;case 4:wr(e,t),Mr(t);break;case 13:wr(e,t),Mr(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(cy=kt())),i&4&&Rw(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(dn=(c=dn)||h,wr(e,t),dn=c):wr(e,t),Mr(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(ge=t,h=t.child;h!==null;){for(f=ge=h;ge!==null;){switch(p=ge,g=p.child,p.tag){case 0:case 11:case 14:case 15:Ql(4,p,p.return);break;case 1:Xa(p,p.return);var T=p.stateNode;if(typeof T.componentWillUnmount=="function"){i=p,r=p.return;try{e=i,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(N){Tt(i,r,N)}}break;case 5:Xa(p,p.return);break;case 22:if(p.memoizedState!==null){Dw(f);continue}}g!==null?(g.return=p,ge=g):Dw(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,c?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=LT("display",o))}catch(N){Tt(t,t.return,N)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(N){Tt(t,t.return,N)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:wr(e,t),Mr(t),i&4&&Rw(t);break;case 21:break;default:wr(e,t),Mr(t)}}function Mr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(lI(r)){var i=r;break e}r=r.return}throw Error(ae(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(uu(s,""),i.flags&=-33);var a=Pw(t);Eg(t,a,s);break;case 3:case 4:var o=i.stateNode.containerInfo,l=Pw(t);xg(t,l,o);break;default:throw Error(ae(161))}}catch(u){Tt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rD(t,e,r){ge=t,dI(t)}function dI(t,e,r){for(var i=(t.mode&1)!==0;ge!==null;){var s=ge,a=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||Zc;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||dn;l=Zc;var c=dn;if(Zc=o,(dn=u)&&!c)for(ge=s;ge!==null;)o=ge,u=o.child,o.tag===22&&o.memoizedState!==null?Mw(s):u!==null?(u.return=o,ge=u):Mw(s);for(;a!==null;)ge=a,dI(a),a=a.sibling;ge=s,Zc=l,dn=c}Nw(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,ge=a):Nw(t)}}function Nw(t){for(;ge!==null;){var e=ge;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dn||lf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!dn)if(r===null)i.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:xr(e.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&gw(e,a,i);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}gw(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&fu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}dn||e.flags&512&&bg(e)}catch(p){Tt(e,e.return,p)}}if(e===t){ge=null;break}if(r=e.sibling,r!==null){r.return=e.return,ge=r;break}ge=e.return}}function Dw(t){for(;ge!==null;){var e=ge;if(e===t){ge=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ge=r;break}ge=e.return}}function Mw(t){for(;ge!==null;){var e=ge;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{lf(4,e)}catch(u){Tt(e,r,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(u){Tt(e,s,u)}}var a=e.return;try{bg(e)}catch(u){Tt(e,a,u)}break;case 5:var o=e.return;try{bg(e)}catch(u){Tt(e,o,u)}}}catch(u){Tt(e,e.return,u)}if(e===t){ge=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ge=l;break}ge=e.return}}var iD=Math.ceil,dh=Ii.ReactCurrentDispatcher,ly=Ii.ReactCurrentOwner,ur=Ii.ReactCurrentBatchConfig,qe=0,Bt=null,Pt=null,Jt=0,zn=0,Qa=Ts(0),Mt=0,Tu=null,ia=0,uf=0,uy=0,Jl=null,Rn=null,cy=0,yo=1/0,ai=null,hh=!1,Tg=null,ts=null,ed=!1,Ki=null,fh=0,Zl=0,Sg=null,kd=-1,Cd=0;function _n(){return qe&6?kt():kd!==-1?kd:kd=kt()}function ns(t){return t.mode&1?qe&2&&Jt!==0?Jt&-Jt:BN.transition!==null?(Cd===0&&(Cd=KT()),Cd):(t=Ze,t!==0||(t=window.event,t=t===void 0?16:nS(t.type)),t):1}function Cr(t,e,r,i){if(50<Zl)throw Zl=0,Sg=null,Error(ae(185));Hu(t,r,i),(!(qe&2)||t!==Bt)&&(t===Bt&&(!(qe&2)&&(uf|=r),Mt===4&&$i(t,Jt)),jn(t,i),r===1&&qe===0&&!(e.mode&1)&&(yo=kt()+500,sf&&Ss()))}function jn(t,e){var r=t.callbackNode;BR(t,e);var i=Xd(t,t===Bt?Jt:0);if(i===0)r!==null&&z0(r),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(r!=null&&z0(r),e===1)t.tag===0?UN(Lw.bind(null,t)):bS(Lw.bind(null,t)),ON(function(){!(qe&6)&&Ss()}),r=null;else{switch(XT(i)){case 1:r=Ov;break;case 4:r=qT;break;case 16:r=Yd;break;case 536870912:r=GT;break;default:r=Yd}r=_I(r,hI.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function hI(t,e){if(kd=-1,Cd=0,qe&6)throw Error(ae(327));var r=t.callbackNode;if(io()&&t.callbackNode!==r)return null;var i=Xd(t,t===Bt?Jt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=ph(t,i);else{e=i;var s=qe;qe|=2;var a=pI();(Bt!==t||Jt!==e)&&(ai=null,yo=kt()+500,Zs(t,e));do try{oD();break}catch(l){fI(t,l)}while(!0);Yv(),dh.current=a,qe=s,Pt!==null?e=0:(Bt=null,Jt=0,e=Mt)}if(e!==0){if(e===2&&(s=Jm(t),s!==0&&(i=s,e=Ig(t,s))),e===1)throw r=Tu,Zs(t,0),$i(t,i),jn(t,kt()),r;if(e===6)$i(t,i);else{if(s=t.current.alternate,!(i&30)&&!sD(s)&&(e=ph(t,i),e===2&&(a=Jm(t),a!==0&&(i=a,e=Ig(t,a))),e===1))throw r=Tu,Zs(t,0),$i(t,i),jn(t,kt()),r;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(ae(345));case 2:$s(t,Rn,ai);break;case 3:if($i(t,i),(i&130023424)===i&&(e=cy+500-kt(),10<e)){if(Xd(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){_n(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ag($s.bind(null,t,Rn,ai),e);break}$s(t,Rn,ai);break;case 4:if($i(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var o=31-kr(i);a=1<<o,o=e[o],o>s&&(s=o),i&=~a}if(i=s,i=kt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*iD(i/1960))-i,10<i){t.timeoutHandle=ag($s.bind(null,t,Rn,ai),i);break}$s(t,Rn,ai);break;case 5:$s(t,Rn,ai);break;default:throw Error(ae(329))}}}return jn(t,kt()),t.callbackNode===r?hI.bind(null,t):null}function Ig(t,e){var r=Jl;return t.current.memoizedState.isDehydrated&&(Zs(t,e).flags|=256),t=ph(t,e),t!==2&&(e=Rn,Rn=r,e!==null&&kg(e)),t}function kg(t){Rn===null?Rn=t:Rn.push.apply(Rn,t)}function sD(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var s=r[i],a=s.getSnapshot;s=s.value;try{if(!Ar(a(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function $i(t,e){for(e&=~uy,e&=~uf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-kr(e),i=1<<r;t[r]=-1,e&=~i}}function Lw(t){if(qe&6)throw Error(ae(327));io();var e=Xd(t,0);if(!(e&1))return jn(t,kt()),null;var r=ph(t,e);if(t.tag!==0&&r===2){var i=Jm(t);i!==0&&(e=i,r=Ig(t,i))}if(r===1)throw r=Tu,Zs(t,0),$i(t,e),jn(t,kt()),r;if(r===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$s(t,Rn,ai),jn(t,kt()),null}function dy(t,e){var r=qe;qe|=1;try{return t(e)}finally{qe=r,qe===0&&(yo=kt()+500,sf&&Ss())}}function sa(t){Ki!==null&&Ki.tag===0&&!(qe&6)&&io();var e=qe;qe|=1;var r=ur.transition,i=Ze;try{if(ur.transition=null,Ze=1,t)return t()}finally{Ze=i,ur.transition=r,qe=e,!(qe&6)&&Ss()}}function hy(){zn=Qa.current,ct(Qa)}function Zs(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,LN(r)),Pt!==null)for(r=Pt.return;r!==null;){var i=r;switch(qv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&th();break;case 3:go(),ct(Ln),ct(pn),ty();break;case 5:ey(i);break;case 4:go();break;case 13:ct(vt);break;case 19:ct(vt);break;case 10:Xv(i.type._context);break;case 22:case 23:hy()}r=r.return}if(Bt=t,Pt=t=rs(t.current,null),Jt=zn=e,Mt=0,Tu=null,uy=uf=ia=0,Rn=Jl=null,Ys!==null){for(e=0;e<Ys.length;e++)if(r=Ys[e],i=r.interleaved,i!==null){r.interleaved=null;var s=i.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,i.next=o}r.pending=i}Ys=null}return t}function fI(t,e){do{var r=Pt;try{if(Yv(),Td.current=ch,uh){for(var i=_t.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}uh=!1}if(ra=0,Ut=Nt=_t=null,Xl=!1,bu=0,ly.current=null,r===null||r.return===null){Mt=1,Tu=e,Pt=null;break}e:{var a=t,o=r.return,l=r,u=e;if(e=Jt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=xw(o);if(g!==null){g.flags&=-257,Ew(g,o,l,a,e),g.mode&1&&bw(a,c,e),e=g,u=c;var T=e.updateQueue;if(T===null){var N=new Set;N.add(u),e.updateQueue=N}else T.add(u);break e}else{if(!(e&1)){bw(a,c,e),fy();break e}u=Error(ae(426))}}else if(ft&&l.mode&1){var A=xw(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Ew(A,o,l,a,e),Gv(vo(u,l));break e}}a=u=vo(u,l),Mt!==4&&(Mt=2),Jl===null?Jl=[a]:Jl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var b=XS(a,u,e);mw(a,b);break e;case 1:l=u;var x=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ts===null||!ts.has(w)))){a.flags|=65536,e&=-e,a.lanes|=e;var R=QS(a,l,e);mw(a,R);break e}}a=a.return}while(a!==null)}gI(r)}catch(j){e=j,Pt===r&&r!==null&&(Pt=r=r.return);continue}break}while(!0)}function pI(){var t=dh.current;return dh.current=ch,t===null?ch:t}function fy(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),Bt===null||!(ia&268435455)&&!(uf&268435455)||$i(Bt,Jt)}function ph(t,e){var r=qe;qe|=2;var i=pI();(Bt!==t||Jt!==e)&&(ai=null,Zs(t,e));do try{aD();break}catch(s){fI(t,s)}while(!0);if(Yv(),qe=r,dh.current=i,Pt!==null)throw Error(ae(261));return Bt=null,Jt=0,Mt}function aD(){for(;Pt!==null;)mI(Pt)}function oD(){for(;Pt!==null&&!NR();)mI(Pt)}function mI(t){var e=yI(t.alternate,t,zn);t.memoizedProps=t.pendingProps,e===null?gI(t):Pt=e,ly.current=null}function gI(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=eD(r,e),r!==null){r.flags&=32767,Pt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Mt=6,Pt=null;return}}else if(r=ZN(r,e,zn),r!==null){Pt=r;return}if(e=e.sibling,e!==null){Pt=e;return}Pt=e=t}while(e!==null);Mt===0&&(Mt=5)}function $s(t,e,r){var i=Ze,s=ur.transition;try{ur.transition=null,Ze=1,lD(t,e,r,i)}finally{ur.transition=s,Ze=i}return null}function lD(t,e,r,i){do io();while(Ki!==null);if(qe&6)throw Error(ae(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if($R(t,a),t===Bt&&(Pt=Bt=null,Jt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ed||(ed=!0,_I(Yd,function(){return io(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=ur.transition,ur.transition=null;var o=Ze;Ze=1;var l=qe;qe|=4,ly.current=null,nD(t,r),cI(r,t),CN(ig),Qd=!!rg,ig=rg=null,t.current=r,rD(r),DR(),qe=l,Ze=o,ur.transition=a}else t.current=r;if(ed&&(ed=!1,Ki=t,fh=s),a=t.pendingLanes,a===0&&(ts=null),OR(r.stateNode),jn(t,kt()),e!==null)for(i=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(hh)throw hh=!1,t=Tg,Tg=null,t;return fh&1&&t.tag!==0&&io(),a=t.pendingLanes,a&1?t===Sg?Zl++:(Zl=0,Sg=t):Zl=0,Ss(),null}function io(){if(Ki!==null){var t=XT(fh),e=ur.transition,r=Ze;try{if(ur.transition=null,Ze=16>t?16:t,Ki===null)var i=!1;else{if(t=Ki,Ki=null,fh=0,qe&6)throw Error(ae(331));var s=qe;for(qe|=4,ge=t.current;ge!==null;){var a=ge,o=a.child;if(ge.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(ge=c;ge!==null;){var h=ge;switch(h.tag){case 0:case 11:case 15:Ql(8,h,a)}var f=h.child;if(f!==null)f.return=h,ge=f;else for(;ge!==null;){h=ge;var p=h.sibling,g=h.return;if(oI(h),h===c){ge=null;break}if(p!==null){p.return=g,ge=p;break}ge=g}}}var T=a.alternate;if(T!==null){var N=T.child;if(N!==null){T.child=null;do{var A=N.sibling;N.sibling=null,N=A}while(N!==null)}}ge=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ge=o;else e:for(;ge!==null;){if(a=ge,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Ql(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,ge=b;break e}ge=a.return}}var x=t.current;for(ge=x;ge!==null;){o=ge;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,ge=w;else e:for(o=x;ge!==null;){if(l=ge,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:lf(9,l)}}catch(j){Tt(l,l.return,j)}if(l===o){ge=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,ge=R;break e}ge=l.return}}if(qe=s,Ss(),Ur&&typeof Ur.onPostCommitFiberRoot=="function")try{Ur.onPostCommitFiberRoot(Zh,t)}catch{}i=!0}return i}finally{Ze=r,ur.transition=e}}return!1}function Ow(t,e,r){e=vo(r,e),e=XS(t,e,1),t=es(t,e,1),e=_n(),t!==null&&(Hu(t,1,e),jn(t,e))}function Tt(t,e,r){if(t.tag===3)Ow(t,t,r);else for(;e!==null;){if(e.tag===3){Ow(e,t,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ts===null||!ts.has(i))){t=vo(r,t),t=QS(e,t,1),e=es(e,t,1),t=_n(),e!==null&&(Hu(e,1,t),jn(e,t));break}}e=e.return}}function uD(t,e,r){var i=t.pingCache;i!==null&&i.delete(e),e=_n(),t.pingedLanes|=t.suspendedLanes&r,Bt===t&&(Jt&r)===r&&(Mt===4||Mt===3&&(Jt&130023424)===Jt&&500>kt()-cy?Zs(t,0):uy|=r),jn(t,e)}function vI(t,e){e===0&&(t.mode&1?(e=Hc,Hc<<=1,!(Hc&130023424)&&(Hc=4194304)):e=1);var r=_n();t=yi(t,e),t!==null&&(Hu(t,e,r),jn(t,r))}function cD(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),vI(t,r)}function dD(t,e){var r=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ae(314))}i!==null&&i.delete(e),vI(t,r)}var yI;yI=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ln.current)Dn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Dn=!1,JN(t,e,r);Dn=!!(t.flags&131072)}else Dn=!1,ft&&e.flags&1048576&&xS(e,ih,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Id(t,e),t=e.pendingProps;var s=fo(e,pn.current);ro(e,r),s=ry(null,e,i,t,s,r);var a=iy();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,On(i)?(a=!0,nh(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Jv(e),s.updater=of,e.stateNode=s,s._reactInternals=e,fg(e,i,t,r),e=gg(null,e,i,!0,a,r)):(e.tag=0,ft&&a&&Wv(e),yn(null,e,s,r),e=e.child),e;case 16:i=e.elementType;e:{switch(Id(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=fD(i),t=xr(i,t),s){case 0:e=mg(null,e,i,t,r);break e;case 1:e=Iw(null,e,i,t,r);break e;case 11:e=Tw(null,e,i,t,r);break e;case 14:e=Sw(null,e,i,xr(i.type,t),r);break e}throw Error(ae(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:xr(i,s),mg(t,e,i,s,r);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:xr(i,s),Iw(t,e,i,s,r);case 3:e:{if(tI(e),t===null)throw Error(ae(387));i=e.pendingProps,a=e.memoizedState,s=a.element,CS(t,e),oh(e,i,null,r);var o=e.memoizedState;if(i=o.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=vo(Error(ae(423)),e),e=kw(t,e,i,r,s);break e}else if(i!==s){s=vo(Error(ae(424)),e),e=kw(t,e,i,r,s);break e}else for(Hn=Zi(e.stateNode.containerInfo.firstChild),Gn=e,ft=!0,Tr=null,r=IS(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(po(),i===s){e=_i(t,e,r);break e}yn(t,e,i,r)}e=e.child}return e;case 5:return AS(e),t===null&&cg(e),i=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,sg(i,s)?o=null:a!==null&&sg(i,a)&&(e.flags|=32),eI(t,e),yn(t,e,o,r),e.child;case 6:return t===null&&cg(e),null;case 13:return nI(t,e,r);case 4:return Zv(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=mo(e,null,i,r):yn(t,e,i,r),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:xr(i,s),Tw(t,e,i,s,r);case 7:return yn(t,e,e.pendingProps,r),e.child;case 8:return yn(t,e,e.pendingProps.children,r),e.child;case 12:return yn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,ot(sh,i._currentValue),i._currentValue=o,a!==null)if(Ar(a.value,o)){if(a.children===s.children&&!Ln.current){e=_i(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(a.tag===1){u=fi(-1,r&-r),u.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}a.lanes|=r,u=a.alternate,u!==null&&(u.lanes|=r),dg(a.return,r,e),l.lanes|=r;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ae(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),dg(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}yn(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,ro(e,r),s=hr(s),i=i(s),e.flags|=1,yn(t,e,i,r),e.child;case 14:return i=e.type,s=xr(i,e.pendingProps),s=xr(i.type,s),Sw(t,e,i,s,r);case 15:return JS(t,e,e.type,e.pendingProps,r);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:xr(i,s),Id(t,e),e.tag=1,On(i)?(t=!0,nh(e)):t=!1,ro(e,r),YS(e,i,s),fg(e,i,s,r),gg(null,e,i,!0,t,r);case 19:return rI(t,e,r);case 22:return ZS(t,e,r)}throw Error(ae(156,e.tag))};function _I(t,e){return WT(t,e)}function hD(t,e,r,i){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function or(t,e,r,i){return new hD(t,e,r,i)}function py(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fD(t){if(typeof t=="function")return py(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dv)return 11;if(t===Mv)return 14}return 2}function rs(t,e){var r=t.alternate;return r===null?(r=or(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ad(t,e,r,i,s,a){var o=2;if(i=t,typeof t=="function")py(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ba:return ea(r.children,s,a,e);case Nv:o=8,s|=8;break;case jm:return t=or(12,r,e,s|2),t.elementType=jm,t.lanes=a,t;case Vm:return t=or(13,r,e,s),t.elementType=Vm,t.lanes=a,t;case Fm:return t=or(19,r,e,s),t.elementType=Fm,t.lanes=a,t;case CT:return cf(r,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case IT:o=10;break e;case kT:o=9;break e;case Dv:o=11;break e;case Mv:o=14;break e;case Vi:o=16,i=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=or(o,r,e,s),e.elementType=t,e.type=i,e.lanes=a,e}function ea(t,e,r,i){return t=or(7,t,i,e),t.lanes=r,t}function cf(t,e,r,i){return t=or(22,t,i,e),t.elementType=CT,t.lanes=r,t.stateNode={isHidden:!1},t}function Hp(t,e,r){return t=or(6,t,null,e),t.lanes=r,t}function Wp(t,e,r){return e=or(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function pD(t,e,r,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sp(0),this.expirationTimes=Sp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sp(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function my(t,e,r,i,s,a,o,l,u){return t=new pD(t,e,r,l,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=or(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jv(a),t}function mD(t,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ua,key:i==null?null:""+i,children:t,containerInfo:e,implementation:r}}function wI(t){if(!t)return ps;t=t._reactInternals;e:{if(pa(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(On(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var r=t.type;if(On(r))return wS(t,r,e)}return e}function bI(t,e,r,i,s,a,o,l,u){return t=my(r,i,!0,t,s,a,o,l,u),t.context=wI(null),r=t.current,i=_n(),s=ns(r),a=fi(i,s),a.callback=e??null,es(r,a,s),t.current.lanes=s,Hu(t,s,i),jn(t,i),t}function df(t,e,r,i){var s=e.current,a=_n(),o=ns(s);return r=wI(r),e.context===null?e.context=r:e.pendingContext=r,e=fi(a,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=es(s,e,o),t!==null&&(Cr(t,s,o,a),Ed(t,s,o)),o}function mh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function gy(t,e){jw(t,e),(t=t.alternate)&&jw(t,e)}function gD(){return null}var xI=typeof reportError=="function"?reportError:function(t){console.error(t)};function vy(t){this._internalRoot=t}hf.prototype.render=vy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));df(t,e,null,null)};hf.prototype.unmount=vy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;sa(function(){df(null,t,null,null)}),e[vi]=null}};function hf(t){this._internalRoot=t}hf.prototype.unstable_scheduleHydration=function(t){if(t){var e=ZT();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Bi.length&&e!==0&&e<Bi[r].priority;r++);Bi.splice(r,0,t),r===0&&tS(t)}};function yy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ff(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vw(){}function vD(t,e,r,i,s){if(s){if(typeof i=="function"){var a=i;i=function(){var c=mh(o);a.call(c)}}var o=bI(e,i,t,0,null,!1,!1,"",Vw);return t._reactRootContainer=o,t[vi]=o.current,gu(t.nodeType===8?t.parentNode:t),sa(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var c=mh(u);l.call(c)}}var u=my(t,0,!1,null,null,!1,!1,"",Vw);return t._reactRootContainer=u,t[vi]=u.current,gu(t.nodeType===8?t.parentNode:t),sa(function(){df(e,u,r,i)}),u}function pf(t,e,r,i,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var u=mh(o);l.call(u)}}df(e,o,t,s)}else o=vD(r,e,t,s,i);return mh(o)}QT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Ll(e.pendingLanes);r!==0&&(jv(e,r|1),jn(e,kt()),!(qe&6)&&(yo=kt()+500,Ss()))}break;case 13:sa(function(){var i=yi(t,1);if(i!==null){var s=_n();Cr(i,t,1,s)}}),gy(t,1)}};Vv=function(t){if(t.tag===13){var e=yi(t,134217728);if(e!==null){var r=_n();Cr(e,t,134217728,r)}gy(t,134217728)}};JT=function(t){if(t.tag===13){var e=ns(t),r=yi(t,e);if(r!==null){var i=_n();Cr(r,t,e,i)}gy(t,e)}};ZT=function(){return Ze};eS=function(t,e){var r=Ze;try{return Ze=t,e()}finally{Ze=r}};Ym=function(t,e,r){switch(e){case"input":if($m(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==t&&i.form===t.form){var s=rf(i);if(!s)throw Error(ae(90));PT(i),$m(i,s)}}}break;case"textarea":NT(t,r);break;case"select":e=r.value,e!=null&&Za(t,!!r.multiple,e,!1)}};FT=dy;UT=sa;var yD={usingClientEntryPoint:!1,Events:[qu,Wa,rf,jT,VT,dy]},bl={findFiberByHostInstance:Ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_D={bundleType:bl.bundleType,version:bl.version,rendererPackageName:bl.rendererPackageName,rendererConfig:bl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ii.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zT(t),t===null?null:t.stateNode},findFiberByHostInstance:bl.findFiberByHostInstance||gD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var td=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!td.isDisabled&&td.supportsFiber)try{Zh=td.inject(_D),Ur=td}catch{}}Zn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yD;Zn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yy(e))throw Error(ae(200));return mD(t,e,null,r)};Zn.createRoot=function(t,e){if(!yy(t))throw Error(ae(299));var r=!1,i="",s=xI;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=my(t,1,!1,null,null,r,!1,i,s),t[vi]=e.current,gu(t.nodeType===8?t.parentNode:t),new vy(e)};Zn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=zT(e),t=t===null?null:t.stateNode,t};Zn.flushSync=function(t){return sa(t)};Zn.hydrate=function(t,e,r){if(!ff(e))throw Error(ae(200));return pf(null,t,e,!0,r)};Zn.hydrateRoot=function(t,e,r){if(!yy(t))throw Error(ae(405));var i=r!=null&&r.hydratedSources||null,s=!1,a="",o=xI;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=bI(e,null,t,1,r??null,s,!1,a,o),t[vi]=e.current,gu(t),i)for(t=0;t<i.length;t++)r=i[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new hf(e)};Zn.render=function(t,e,r){if(!ff(e))throw Error(ae(200));return pf(null,t,e,!1,r)};Zn.unmountComponentAtNode=function(t){if(!ff(t))throw Error(ae(40));return t._reactRootContainer?(sa(function(){pf(null,null,t,!1,function(){t._reactRootContainer=null,t[vi]=null})}),!0):!1};Zn.unstable_batchedUpdates=dy;Zn.unstable_renderSubtreeIntoContainer=function(t,e,r,i){if(!ff(r))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return pf(t,e,r,!1,i)};Zn.version="18.3.1-next-f1338f8080-20240426";function EI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(EI)}catch(t){console.error(t)}}EI(),xT.exports=Zn;var _y=xT.exports;const wD=Oo(_y);var Fw=_y;Lm.createRoot=Fw.createRoot,Lm.hydrateRoot=Fw.hydrateRoot;var wy={};Object.defineProperty(wy,"__esModule",{value:!0});wy.parse=kD;wy.serialize=CD;const bD=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,xD=/^[\u0021-\u003A\u003C-\u007E]*$/,ED=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,TD=/^[\u0020-\u003A\u003D-\u007E]*$/,SD=Object.prototype.toString,ID=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function kD(t,e){const r=new ID,i=t.length;if(i<2)return r;const s=(e==null?void 0:e.decode)||AD;let a=0;do{const o=t.indexOf("=",a);if(o===-1)break;const l=t.indexOf(";",a),u=l===-1?i:l;if(o>u){a=t.lastIndexOf(";",o-1)+1;continue}const c=Uw(t,a,o),h=Bw(t,o,c),f=t.slice(c,h);if(r[f]===void 0){let p=Uw(t,o+1,u),g=Bw(t,u,p);const T=s(t.slice(p,g));r[f]=T}a=u+1}while(a<i);return r}function Uw(t,e,r){do{const i=t.charCodeAt(e);if(i!==32&&i!==9)return e}while(++e<r);return r}function Bw(t,e,r){for(;e>r;){const i=t.charCodeAt(--e);if(i!==32&&i!==9)return e+1}return r}function CD(t,e,r){const i=(r==null?void 0:r.encode)||encodeURIComponent;if(!bD.test(t))throw new TypeError(`argument name is invalid: ${t}`);const s=i(e);if(!xD.test(s))throw new TypeError(`argument val is invalid: ${e}`);let a=t+"="+s;if(!r)return a;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);a+="; Max-Age="+r.maxAge}if(r.domain){if(!ED.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);a+="; Domain="+r.domain}if(r.path){if(!TD.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);a+="; Path="+r.path}if(r.expires){if(!PD(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.partitioned&&(a+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return a}function AD(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function PD(t){return SD.call(t)==="[object Date]"}/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var $w="popstate";function RD(t={}){function e(s,a){let{pathname:o="/",search:l="",hash:u=""}=ma(s.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Cg("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=s.location.href,c=u.indexOf("#");l=c===-1?u:u.slice(0,c)}return l+"#"+(typeof a=="string"?a:Su(a))}function i(s,a){Jn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return DD(e,r,i,t)}function mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Jn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ND(){return Math.random().toString(36).substring(2,10)}function zw(t,e){return{usr:t.state,key:t.key,idx:e}}function Cg(t,e,r=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?ma(e):e,state:r,key:e&&e.key||i||ND()}}function Su({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ma(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function DD(t,e,r,i={}){let{window:s=document.defaultView,v5Compat:a=!1}=i,o=s.history,l="POP",u=null,c=h();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function h(){return(o.state||{idx:null}).idx}function f(){l="POP";let A=h(),b=A==null?null:A-c;c=A,u&&u({action:l,location:N.location,delta:b})}function p(A,b){l="PUSH";let x=Cg(N.location,A,b);r&&r(x,A),c=h()+1;let w=zw(x,c),R=N.createHref(x);try{o.pushState(w,"",R)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(R)}a&&u&&u({action:l,location:N.location,delta:1})}function g(A,b){l="REPLACE";let x=Cg(N.location,A,b);r&&r(x,A),c=h();let w=zw(x,c),R=N.createHref(x);o.replaceState(w,"",R),a&&u&&u({action:l,location:N.location,delta:0})}function T(A){let b=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof A=="string"?A:Su(A);return x=x.replace(/ $/,"%20"),mt(b,`No window.location.(origin|href) available to create URL for href: ${x}`),new URL(x,b)}let N={get action(){return l},get location(){return t(s,o)},listen(A){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener($w,f),u=A,()=>{s.removeEventListener($w,f),u=null}},createHref(A){return e(s,A)},createURL:T,encodeLocation(A){let b=T(A);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:p,replace:g,go(A){return o.go(A)}};return N}function TI(t,e,r="/"){return MD(t,e,r,!1)}function MD(t,e,r,i){let s=typeof e=="string"?ma(e):e,a=ms(s.pathname||"/",r);if(a==null)return null;let o=SI(t);LD(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=qD(a);l=HD(o[u],c,i)}return l}function SI(t,e=[],r=[],i=""){let s=(a,o,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(mt(u.relativePath.startsWith(i),`Absolute route path "${u.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(i.length));let c=pi([i,u.relativePath]),h=r.concat(u);a.children&&a.children.length>0&&(mt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),SI(a.children,e,h,c)),!(a.path==null&&!a.index)&&e.push({path:c,score:$D(c,a.index),routesMeta:h})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let u of II(a.path))s(a,o,u)}),e}function II(t){let e=t.split("/");if(e.length===0)return[];let[r,...i]=e,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let o=II(i.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function LD(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:zD(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var OD=/^:[\w-]+$/,jD=3,VD=2,FD=1,UD=10,BD=-2,Hw=t=>t==="*";function $D(t,e){let r=t.split("/"),i=r.length;return r.some(Hw)&&(i+=BD),e&&(i+=VD),r.filter(s=>!Hw(s)).reduce((s,a)=>s+(OD.test(a)?jD:a===""?FD:UD),i)}function zD(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function HD(t,e,r=!1){let{routesMeta:i}=t,s={},a="/",o=[];for(let l=0;l<i.length;++l){let u=i[l],c=l===i.length-1,h=a==="/"?e:e.slice(a.length)||"/",f=gh({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),p=u.route;if(!f&&c&&r&&!i[i.length-1].route.index&&(f=gh({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:pi([a,f.pathname]),pathnameBase:XD(pi([a,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(a=pi([a,f.pathnameBase]))}return o}function gh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,i]=WD(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:i.reduce((c,{paramName:h,isOptional:f},p)=>{if(h==="*"){let T=l[p]||"";o=a.slice(0,a.length-T.length).replace(/(.)\/+$/,"$1")}const g=l[p];return f&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:o,pattern:t}}function WD(t,e=!1,r=!0){Jn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function qD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Jn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ms(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=t.charAt(r);return i&&i!=="/"?null:t.slice(r)||"/"}function GD(t,e="/"){let{pathname:r,search:i="",hash:s=""}=typeof t=="string"?ma(t):t;return{pathname:r?r.startsWith("/")?r:KD(r,e):e,search:QD(i),hash:JD(s)}}function KD(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function qp(t,e,r,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function YD(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function by(t){let e=YD(t);return e.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase)}function xy(t,e,r,i=!1){let s;typeof t=="string"?s=ma(t):(s={...t},mt(!s.pathname||!s.pathname.includes("?"),qp("?","pathname","search",s)),mt(!s.pathname||!s.pathname.includes("#"),qp("#","pathname","hash",s)),mt(!s.search||!s.search.includes("#"),qp("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=r;else{let f=e.length-1;if(!i&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}l=f>=0?e[f]:"/"}let u=GD(s,l),c=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}var pi=t=>t.join("/").replace(/\/\/+/g,"/"),XD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),QD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,JD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ZD(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var kI=["POST","PUT","PATCH","DELETE"];new Set(kI);var e2=["GET",...kI];new Set(e2);var Uo=L.createContext(null);Uo.displayName="DataRouter";var mf=L.createContext(null);mf.displayName="DataRouterState";var CI=L.createContext({isTransitioning:!1});CI.displayName="ViewTransition";var t2=L.createContext(new Map);t2.displayName="Fetchers";var n2=L.createContext(null);n2.displayName="Await";var Rr=L.createContext(null);Rr.displayName="Navigation";var Ku=L.createContext(null);Ku.displayName="Location";var Qr=L.createContext({outlet:null,matches:[],isDataRoute:!1});Qr.displayName="Route";var Ey=L.createContext(null);Ey.displayName="RouteError";function r2(t,{relative:e}={}){mt(Bo(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=L.useContext(Rr),{hash:s,pathname:a,search:o}=Yu(t,{relative:e}),l=a;return r!=="/"&&(l=a==="/"?r:pi([r,a])),i.createHref({pathname:l,search:o,hash:s})}function Bo(){return L.useContext(Ku)!=null}function mr(){return mt(Bo(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(Ku).location}var AI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function PI(t){L.useContext(Rr).static||L.useLayoutEffect(t)}function Jr(){let{isDataRoute:t}=L.useContext(Qr);return t?g2():i2()}function i2(){mt(Bo(),"useNavigate() may be used only in the context of a <Router> component.");let t=L.useContext(Uo),{basename:e,navigator:r}=L.useContext(Rr),{matches:i}=L.useContext(Qr),{pathname:s}=mr(),a=JSON.stringify(by(i)),o=L.useRef(!1);return PI(()=>{o.current=!0}),L.useCallback((u,c={})=>{if(Jn(o.current,AI),!o.current)return;if(typeof u=="number"){r.go(u);return}let h=xy(u,JSON.parse(a),s,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:pi([e,h.pathname])),(c.replace?r.replace:r.push)(h,c.state,c)},[e,r,a,s,t])}L.createContext(null);function Yu(t,{relative:e}={}){let{matches:r}=L.useContext(Qr),{pathname:i}=mr(),s=JSON.stringify(by(r));return L.useMemo(()=>xy(t,JSON.parse(s),i,e==="path"),[t,s,i,e])}function s2(t,e){return RI(t,e)}function RI(t,e,r,i){var x;mt(Bo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:a}=L.useContext(Rr),{matches:o}=L.useContext(Qr),l=o[o.length-1],u=l?l.params:{},c=l?l.pathname:"/",h=l?l.pathnameBase:"/",f=l&&l.route;{let w=f&&f.path||"";NI(c,!f||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let p=mr(),g;if(e){let w=typeof e=="string"?ma(e):e;mt(h==="/"||((x=w.pathname)==null?void 0:x.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${w.pathname}" was given in the \`location\` prop.`),g=w}else g=p;let T=g.pathname||"/",N=T;if(h!=="/"){let w=h.replace(/^\//,"").split("/");N="/"+T.replace(/^\//,"").split("/").slice(w.length).join("/")}let A=!a&&r&&r.matches&&r.matches.length>0?r.matches:TI(t,{pathname:N});Jn(f||A!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Jn(A==null||A[A.length-1].route.element!==void 0||A[A.length-1].route.Component!==void 0||A[A.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=c2(A&&A.map(w=>Object.assign({},w,{params:Object.assign({},u,w.params),pathname:pi([h,s.encodeLocation?s.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?h:pi([h,s.encodeLocation?s.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),o,r,i);return e&&b?L.createElement(Ku.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},b):b}function a2(){let t=m2(),e=ZD(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:a},"ErrorBoundary")," or"," ",L.createElement("code",{style:a},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),r?L.createElement("pre",{style:s},r):null,o)}var o2=L.createElement(a2,null),l2=class extends L.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?L.createElement(Qr.Provider,{value:this.props.routeContext},L.createElement(Ey.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function u2({routeContext:t,match:e,children:r}){let i=L.useContext(Uo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),L.createElement(Qr.Provider,{value:t},r)}function c2(t,e=[],r=null,i=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,a=r==null?void 0:r.errors;if(a!=null){let u=s.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id])!==void 0);mt(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let o=!1,l=-1;if(r)for(let u=0;u<s.length;u++){let c=s[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(l=u),c.route.id){let{loaderData:h,errors:f}=r,p=c.route.loader&&!h.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||p){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((u,c,h)=>{let f,p=!1,g=null,T=null;r&&(f=a&&c.route.id?a[c.route.id]:void 0,g=c.route.errorElement||o2,o&&(l<0&&h===0?(NI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,T=null):l===h&&(p=!0,T=c.route.hydrateFallbackElement||null)));let N=e.concat(s.slice(0,h+1)),A=()=>{let b;return f?b=g:p?b=T:c.route.Component?b=L.createElement(c.route.Component,null):c.route.element?b=c.route.element:b=u,L.createElement(u2,{match:c,routeContext:{outlet:u,matches:N,isDataRoute:r!=null},children:b})};return r&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?L.createElement(l2,{location:r.location,revalidation:r.revalidation,component:g,error:f,children:A(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):A()},null)}function Ty(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function d2(t){let e=L.useContext(Uo);return mt(e,Ty(t)),e}function h2(t){let e=L.useContext(mf);return mt(e,Ty(t)),e}function f2(t){let e=L.useContext(Qr);return mt(e,Ty(t)),e}function Sy(t){let e=f2(t),r=e.matches[e.matches.length-1];return mt(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function p2(){return Sy("useRouteId")}function m2(){var i;let t=L.useContext(Ey),e=h2("useRouteError"),r=Sy("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[r]}function g2(){let{router:t}=d2("useNavigate"),e=Sy("useNavigate"),r=L.useRef(!1);return PI(()=>{r.current=!0}),L.useCallback(async(s,a={})=>{Jn(r.current,AI),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...a}))},[t,e])}var Ww={};function NI(t,e,r){!e&&!Ww[t]&&(Ww[t]=!0,Jn(!1,r))}L.memo(v2);function v2({routes:t,future:e,state:r}){return RI(t,void 0,r,e)}function DI({to:t,replace:e,state:r,relative:i}){mt(Bo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=L.useContext(Rr);Jn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=L.useContext(Qr),{pathname:o}=mr(),l=Jr(),u=xy(t,by(a),o,i==="path"),c=JSON.stringify(u);return L.useEffect(()=>{l(JSON.parse(c),{replace:e,state:r,relative:i})},[l,c,i,e,r]),null}function Lr(t){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function y2({basename:t="/",children:e=null,location:r,navigationType:i="POP",navigator:s,static:a=!1}){mt(!Bo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=L.useMemo(()=>({basename:o,navigator:s,static:a,future:{}}),[o,s,a]);typeof r=="string"&&(r=ma(r));let{pathname:u="/",search:c="",hash:h="",state:f=null,key:p="default"}=r,g=L.useMemo(()=>{let T=ms(u,o);return T==null?null:{location:{pathname:T,search:c,hash:h,state:f,key:p},navigationType:i}},[o,u,c,h,f,p,i]);return Jn(g!=null,`<Router basename="${o}"> is not able to match the URL "${u}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:L.createElement(Rr.Provider,{value:l},L.createElement(Ku.Provider,{children:e,value:g}))}function _2({children:t,location:e}){return s2(Ag(t),e)}function Ag(t,e=[]){let r=[];return L.Children.forEach(t,(i,s)=>{if(!L.isValidElement(i))return;let a=[...e,s];if(i.type===L.Fragment){r.push.apply(r,Ag(i.props.children,a));return}mt(i.type===Lr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Ag(i.props.children,a)),r.push(o)}),r}var Pd="get",Rd="application/x-www-form-urlencoded";function gf(t){return t!=null&&typeof t.tagName=="string"}function w2(t){return gf(t)&&t.tagName.toLowerCase()==="button"}function b2(t){return gf(t)&&t.tagName.toLowerCase()==="form"}function x2(t){return gf(t)&&t.tagName.toLowerCase()==="input"}function E2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function T2(t,e){return t.button===0&&(!e||e==="_self")&&!E2(t)}function Pg(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let i=t[r];return e.concat(Array.isArray(i)?i.map(s=>[r,s]):[[r,i]])},[]))}function S2(t,e){let r=Pg(t);return e&&e.forEach((i,s)=>{r.has(s)||e.getAll(s).forEach(a=>{r.append(s,a)})}),r}var nd=null;function I2(){if(nd===null)try{new FormData(document.createElement("form"),0),nd=!1}catch{nd=!0}return nd}var k2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gp(t){return t!=null&&!k2.has(t)?(Jn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Rd}"`),null):t}function C2(t,e){let r,i,s,a,o;if(b2(t)){let l=t.getAttribute("action");i=l?ms(l,e):null,r=t.getAttribute("method")||Pd,s=Gp(t.getAttribute("enctype"))||Rd,a=new FormData(t)}else if(w2(t)||x2(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||l.getAttribute("action");if(i=u?ms(u,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||Pd,s=Gp(t.getAttribute("formenctype"))||Gp(l.getAttribute("enctype"))||Rd,a=new FormData(l,t),!I2()){let{name:c,type:h,value:f}=t;if(h==="image"){let p=c?`${c}.`:"";a.append(`${p}x`,"0"),a.append(`${p}y`,"0")}else c&&a.append(c,f)}}else{if(gf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Pd,i=null,s=Rd,o=t}return a&&s==="text/plain"&&(o=a,a=void 0),{action:i,method:r.toLowerCase(),encType:s,formData:a,body:o}}function Iy(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function A2(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function P2(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function R2(t,e,r){let i=await Promise.all(t.map(async s=>{let a=e.routes[s.route.id];if(a){let o=await A2(a,r);return o.links?o.links():[]}return[]}));return L2(i.flat(1).filter(P2).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function qw(t,e,r,i,s,a){let o=(u,c)=>r[c]?u.route.id!==r[c].route.id:!0,l=(u,c)=>{var h;return r[c].pathname!==u.pathname||((h=r[c].route.path)==null?void 0:h.endsWith("*"))&&r[c].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,c)=>o(u,c)||l(u,c)):a==="data"?e.filter((u,c)=>{var f;let h=i.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,c)||l(u,c))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function N2(t,e){return D2(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function D2(t){return[...new Set(t)]}function M2(t){let e={},r=Object.keys(t).sort();for(let i of r)e[i]=t[i];return e}function L2(t,e){let r=new Set;return new Set(e),t.reduce((i,s)=>{let a=JSON.stringify(M2(s));return r.has(a)||(r.add(a),i.push({key:a,link:s})),i},[])}function O2(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function j2(){let t=L.useContext(Uo);return Iy(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function V2(){let t=L.useContext(mf);return Iy(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ky=L.createContext(void 0);ky.displayName="FrameworkContext";function MI(){let t=L.useContext(ky);return Iy(t,"You must render this element inside a <HydratedRouter> element"),t}function F2(t,e){let r=L.useContext(ky),[i,s]=L.useState(!1),[a,o]=L.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:c,onMouseLeave:h,onTouchStart:f}=e,p=L.useRef(null);L.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let N=b=>{b.forEach(x=>{o(x.isIntersecting)})},A=new IntersectionObserver(N,{threshold:.5});return p.current&&A.observe(p.current),()=>{A.disconnect()}}},[t]),L.useEffect(()=>{if(i){let N=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(N)}}},[i]);let g=()=>{s(!0)},T=()=>{s(!1),o(!1)};return r?t!=="intent"?[a,p,{}]:[a,p,{onFocus:xl(l,g),onBlur:xl(u,T),onMouseEnter:xl(c,g),onMouseLeave:xl(h,T),onTouchStart:xl(f,g)}]:[!1,p,{}]}function xl(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function U2({page:t,...e}){let{router:r}=j2(),i=L.useMemo(()=>TI(r.routes,t,r.basename),[r.routes,t,r.basename]);return i?L.createElement($2,{page:t,matches:i,...e}):null}function B2(t){let{manifest:e,routeModules:r}=MI(),[i,s]=L.useState([]);return L.useEffect(()=>{let a=!1;return R2(t,e,r).then(o=>{a||s(o)}),()=>{a=!0}},[t,e,r]),i}function $2({page:t,matches:e,...r}){let i=mr(),{manifest:s,routeModules:a}=MI(),{loaderData:o,matches:l}=V2(),u=L.useMemo(()=>qw(t,e,l,s,i,"data"),[t,e,l,s,i]),c=L.useMemo(()=>qw(t,e,l,s,i,"assets"),[t,e,l,s,i]),h=L.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let g=new Set,T=!1;if(e.forEach(A=>{var x;let b=s.routes[A.route.id];!b||!b.hasLoader||(!u.some(w=>w.route.id===A.route.id)&&A.route.id in o&&((x=a[A.route.id])!=null&&x.shouldRevalidate)||b.hasClientLoader?T=!0:g.add(A.route.id))}),g.size===0)return[];let N=O2(t);return T&&g.size>0&&N.searchParams.set("_routes",e.filter(A=>g.has(A.route.id)).map(A=>A.route.id).join(",")),[N.pathname+N.search]},[o,i,s,u,e,t,a]),f=L.useMemo(()=>N2(c,s),[c,s]),p=B2(c);return L.createElement(L.Fragment,null,h.map(g=>L.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...r})),f.map(g=>L.createElement("link",{key:g,rel:"modulepreload",href:g,...r})),p.map(({key:g,link:T})=>L.createElement("link",{key:g,...T})))}function z2(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var LI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{LI&&(window.__reactRouterVersion="7.1.5")}catch{}function H2({basename:t,children:e,window:r}){let i=L.useRef();i.current==null&&(i.current=RD({window:r,v5Compat:!0}));let s=i.current,[a,o]=L.useState({action:s.action,location:s.location}),l=L.useCallback(u=>{L.startTransition(()=>o(u))},[o]);return L.useLayoutEffect(()=>s.listen(l),[s,l]),L.createElement(y2,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:s})}var OI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qs=L.forwardRef(function({onClick:e,discover:r="render",prefetch:i="none",relative:s,reloadDocument:a,replace:o,state:l,target:u,to:c,preventScrollReset:h,viewTransition:f,...p},g){let{basename:T}=L.useContext(Rr),N=typeof c=="string"&&OI.test(c),A,b=!1;if(typeof c=="string"&&N&&(A=c,LI))try{let y=new URL(window.location.href),_=c.startsWith("//")?new URL(y.protocol+c):new URL(c),S=ms(_.pathname,T);_.origin===y.origin&&S!=null?c=S+_.search+_.hash:b=!0}catch{Jn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=r2(c,{relative:s}),[w,R,j]=F2(i,p),V=K2(c,{replace:o,state:l,target:u,preventScrollReset:h,relative:s,viewTransition:f});function C(y){e&&e(y),y.defaultPrevented||V(y)}let I=L.createElement("a",{...p,...j,href:A||x,onClick:b||a?e:C,ref:z2(g,R),target:u,"data-discover":!N&&r==="render"?"true":void 0});return w&&!N?L.createElement(L.Fragment,null,I,L.createElement(U2,{page:x})):I});qs.displayName="Link";var W2=L.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:i="",end:s=!1,style:a,to:o,viewTransition:l,children:u,...c},h){let f=Yu(o,{relative:c.relative}),p=mr(),g=L.useContext(mf),{navigator:T,basename:N}=L.useContext(Rr),A=g!=null&&Z2(f)&&l===!0,b=T.encodeLocation?T.encodeLocation(f).pathname:f.pathname,x=p.pathname,w=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;r||(x=x.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&N&&(w=ms(w,N)||w);const R=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let j=x===b||!s&&x.startsWith(b)&&x.charAt(R)==="/",V=w!=null&&(w===b||!s&&w.startsWith(b)&&w.charAt(b.length)==="/"),C={isActive:j,isPending:V,isTransitioning:A},I=j?e:void 0,y;typeof i=="function"?y=i(C):y=[i,j?"active":null,V?"pending":null,A?"transitioning":null].filter(Boolean).join(" ");let _=typeof a=="function"?a(C):a;return L.createElement(qs,{...c,"aria-current":I,className:y,ref:h,style:_,to:o,viewTransition:l},typeof u=="function"?u(C):u)});W2.displayName="NavLink";var q2=L.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:i,replace:s,state:a,method:o=Pd,action:l,onSubmit:u,relative:c,preventScrollReset:h,viewTransition:f,...p},g)=>{let T=Q2(),N=J2(l,{relative:c}),A=o.toLowerCase()==="get"?"get":"post",b=typeof l=="string"&&OI.test(l),x=w=>{if(u&&u(w),w.defaultPrevented)return;w.preventDefault();let R=w.nativeEvent.submitter,j=(R==null?void 0:R.getAttribute("formmethod"))||o;T(R||w.currentTarget,{fetcherKey:e,method:j,navigate:r,replace:s,state:a,relative:c,preventScrollReset:h,viewTransition:f})};return L.createElement("form",{ref:g,method:A,action:N,onSubmit:i?u:x,...p,"data-discover":!b&&t==="render"?"true":void 0})});q2.displayName="Form";function G2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jI(t){let e=L.useContext(Uo);return mt(e,G2(t)),e}function K2(t,{target:e,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}={}){let l=Jr(),u=mr(),c=Yu(t,{relative:a});return L.useCallback(h=>{if(T2(h,e)){h.preventDefault();let f=r!==void 0?r:Su(u)===Su(c);l(t,{replace:f,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[u,l,c,r,i,e,t,s,a,o])}function Cy(t){Jn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=L.useRef(Pg(t)),r=L.useRef(!1),i=mr(),s=L.useMemo(()=>S2(i.search,r.current?null:e.current),[i.search]),a=Jr(),o=L.useCallback((l,u)=>{const c=Pg(typeof l=="function"?l(s):l);r.current=!0,a("?"+c,u)},[a,s]);return[s,o]}var Y2=0,X2=()=>`__${String(++Y2)}__`;function Q2(){let{router:t}=jI("useSubmit"),{basename:e}=L.useContext(Rr),r=p2();return L.useCallback(async(i,s={})=>{let{action:a,method:o,encType:l,formData:u,body:c}=C2(i,e);if(s.navigate===!1){let h=s.fetcherKey||X2();await t.fetch(h,r,s.action||a,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await t.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function J2(t,{relative:e}={}){let{basename:r}=L.useContext(Rr),i=L.useContext(Qr);mt(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a={...Yu(t||".",{relative:e})},o=mr();if(t==null){a.search=o.search;let l=new URLSearchParams(a.search),u=l.getAll("index");if(u.some(h=>h==="")){l.delete("index"),u.filter(f=>f).forEach(f=>l.append("index",f));let h=l.toString();a.search=h?`?${h}`:""}}return(!t||t===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:pi([r,a.pathname])),Su(a)}function Z2(t,e={}){let r=L.useContext(CI);mt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=jI("useViewTransitionState"),s=Yu(t,{relative:e.relative});if(!r.isTransitioning)return!1;let a=ms(r.currentLocation.pathname,i)||r.currentLocation.pathname,o=ms(r.nextLocation.pathname,i)||r.nextLocation.pathname;return gh(s.pathname,o)!=null||gh(s.pathname,a)!=null}new TextEncoder;var Gw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=function(t){const e=[];let r=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},eM=function(t){const e=[];let r=0,i=0;for(;r<t.length;){const s=t[r++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[r++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[r++],o=t[r++],l=t[r++],u=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const a=t[r++],o=t[r++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},FI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,h=a>>2,f=(a&3)<<4|l>>4;let p=(l&15)<<2|c>>6,g=c&63;u||(g=64,o||(p=64)),i.push(r[h],r[f],r[p],r[g])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(VI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const a=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,a==null||l==null||c==null||f==null)throw new tM;const p=a<<2|l>>4;if(i.push(p),c!==64){const g=l<<4&240|c>>2;if(i.push(g),f!==64){const T=c<<6&192|f;i.push(T)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nM=function(t){const e=VI(t);return FI.encodeByteArray(e,!0)},vh=function(t){return nM(t).replace(/\./g,"")},UI=function(t){try{return FI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM=()=>rM().__FIREBASE_DEFAULTS__,sM=()=>{if(typeof process>"u"||typeof Gw>"u")return;const t=Gw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},aM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&UI(t[1]);return e&&JSON.parse(e)},vf=()=>{try{return iM()||sM()||aM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},BI=t=>{var e,r;return(r=(e=vf())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},oM=t=>{const e=BI(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),i]:[e.substring(0,r),i]},$I=()=>{var t;return(t=vf())===null||t===void 0?void 0:t.config},zI=t=>{var e;return(e=vf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,i)=>{r?this.reject(r):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[vh(JSON.stringify(r)),vh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mn())}function dM(){var t;const e=(t=vf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mM(){const t=mn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gM(){return!dM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vM(){try{return typeof indexedDB=="object"}catch{return!1}}function yM(){return new Promise((t,e)=>{try{let r=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M="FirebaseError";class ki extends Error{constructor(e,r,i){super(r),this.code=e,this.customData=i,this.name=_M,Object.setPrototypeOf(this,ki.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xu.prototype.create)}}class Xu{constructor(e,r,i){this.service=e,this.serviceName=r,this.errors=i}create(e,...r){const i=r[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?wM(a,i):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new ki(s,l,i)}}function wM(t,e){return t.replace(bM,(r,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const bM=/\{\$([^}]+)}/g;function xM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function yh(t,e){if(t===e)return!0;const r=Object.keys(t),i=Object.keys(e);for(const s of r){if(!i.includes(s))return!1;const a=t[s],o=e[s];if(Kw(a)&&Kw(o)){if(!yh(a,o))return!1}else if(a!==o)return!1}for(const s of i)if(!r.includes(s))return!1;return!0}function Kw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qu(t){const e=[];for(const[r,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function jl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Vl(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function EM(t,e){const r=new TM(t,e);return r.subscribe.bind(r)}class TM{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,i){let s;if(e===void 0&&r===void 0&&i===void 0)throw new Error("Missing Observer.");SM(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:i},s.next===void 0&&(s.next=Kp),s.error===void 0&&(s.error=Kp),s.complete===void 0&&(s.complete=Kp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SM(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Kp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t){return t&&t._delegate?t._delegate:t}class aa{constructor(e,r,i){this.name=e,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IM=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const i=new lM;if(this.instancesDeferred.set(r,i),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CM(e))try{this.getOrInitializeService({instanceIdentifier:zs})}catch{}for(const[r,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zs){return this.instances.has(e)}getOptions(e=zs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:r});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);i===l&&o.resolve(s)}return s}onInit(e,r){var i;const s=this.normalizeInstanceIdentifier(r),a=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&e(o,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const i=this.onInitCallbacks.get(r);if(i)for(const s of i)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:kM(e),options:r}),this.instances.set(e,i),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=zs){return this.component?this.component.multipleInstances?e:zs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function kM(t){return t===zs?void 0:t}function CM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new IM(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var je;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(je||(je={}));const PM={debug:je.DEBUG,verbose:je.VERBOSE,info:je.INFO,warn:je.WARN,error:je.ERROR,silent:je.SILENT},RM=je.INFO,NM={[je.DEBUG]:"log",[je.VERBOSE]:"log",[je.INFO]:"info",[je.WARN]:"warn",[je.ERROR]:"error"},DM=(t,e,...r)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=NM[e];if(s)console[s](`[${i}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ay{constructor(e){this.name=e,this._logLevel=RM,this._logHandler=DM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in je))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,je.DEBUG,...e),this._logHandler(this,je.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,je.VERBOSE,...e),this._logHandler(this,je.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,je.INFO,...e),this._logHandler(this,je.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,je.WARN,...e),this._logHandler(this,je.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,je.ERROR,...e),this._logHandler(this,je.ERROR,...e)}}const MM=(t,e)=>e.some(r=>t instanceof r);let Yw,Xw;function LM(){return Yw||(Yw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OM(){return Xw||(Xw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HI=new WeakMap,Rg=new WeakMap,WI=new WeakMap,Yp=new WeakMap,Py=new WeakMap;function jM(t){const e=new Promise((r,i)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(is(t.result)),s()},o=()=>{i(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&HI.set(r,t)}).catch(()=>{}),Py.set(e,t),e}function VM(t){if(Rg.has(t))return;const e=new Promise((r,i)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),s()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Rg.set(t,e)}let Ng={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Rg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||WI.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return is(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function FM(t){Ng=t(Ng)}function UM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const i=t.call(Xp(this),e,...r);return WI.set(i,e.sort?e.sort():[e]),is(i)}:OM().includes(t)?function(...e){return t.apply(Xp(this),e),is(HI.get(this))}:function(...e){return is(t.apply(Xp(this),e))}}function BM(t){return typeof t=="function"?UM(t):(t instanceof IDBTransaction&&VM(t),MM(t,LM())?new Proxy(t,Ng):t)}function is(t){if(t instanceof IDBRequest)return jM(t);if(Yp.has(t))return Yp.get(t);const e=BM(t);return e!==t&&(Yp.set(t,e),Py.set(e,t)),e}const Xp=t=>Py.get(t);function $M(t,e,{blocked:r,upgrade:i,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=is(o);return i&&o.addEventListener("upgradeneeded",u=>{i(is(o.result),u.oldVersion,u.newVersion,is(o.transaction),u)}),r&&o.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{a&&u.addEventListener("close",()=>a()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const zM=["get","getKey","getAll","getAllKeys","count"],HM=["put","add","delete","clear"],Qp=new Map;function Qw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qp.get(e))return Qp.get(e);const r=e.replace(/FromIndex$/,""),i=e!==r,s=HM.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(s||zM.includes(r)))return;const a=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[r](...l),s&&u.done]))[0]};return Qp.set(e,a),a}FM(t=>({...t,get:(e,r,i)=>Qw(e,r)||t.get(e,r,i),has:(e,r)=>!!Qw(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(qM(r)){const i=r.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(r=>r).join(" ")}}function qM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dg="@firebase/app",Jw="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new Ay("@firebase/app"),GM="@firebase/app-compat",KM="@firebase/analytics-compat",YM="@firebase/analytics",XM="@firebase/app-check-compat",QM="@firebase/app-check",JM="@firebase/auth",ZM="@firebase/auth-compat",eL="@firebase/database",tL="@firebase/data-connect",nL="@firebase/database-compat",rL="@firebase/functions",iL="@firebase/functions-compat",sL="@firebase/installations",aL="@firebase/installations-compat",oL="@firebase/messaging",lL="@firebase/messaging-compat",uL="@firebase/performance",cL="@firebase/performance-compat",dL="@firebase/remote-config",hL="@firebase/remote-config-compat",fL="@firebase/storage",pL="@firebase/storage-compat",mL="@firebase/firestore",gL="@firebase/vertexai",vL="@firebase/firestore-compat",yL="firebase",_L="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="[DEFAULT]",wL={[Dg]:"fire-core",[GM]:"fire-core-compat",[YM]:"fire-analytics",[KM]:"fire-analytics-compat",[QM]:"fire-app-check",[XM]:"fire-app-check-compat",[JM]:"fire-auth",[ZM]:"fire-auth-compat",[eL]:"fire-rtdb",[tL]:"fire-data-connect",[nL]:"fire-rtdb-compat",[rL]:"fire-fn",[iL]:"fire-fn-compat",[sL]:"fire-iid",[aL]:"fire-iid-compat",[oL]:"fire-fcm",[lL]:"fire-fcm-compat",[uL]:"fire-perf",[cL]:"fire-perf-compat",[dL]:"fire-rc",[hL]:"fire-rc-compat",[fL]:"fire-gcs",[pL]:"fire-gcs-compat",[mL]:"fire-fst",[vL]:"fire-fst-compat",[gL]:"fire-vertex","fire-js":"fire-js",[yL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new Map,bL=new Map,Lg=new Map;function Zw(t,e){try{t.container.addComponent(e)}catch(r){wi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function _o(t){const e=t.name;if(Lg.has(e))return wi.debug(`There were multiple attempts to register component ${e}.`),!1;Lg.set(e,t);for(const r of _h.values())Zw(r,t);for(const r of bL.values())Zw(r,t);return!0}function Ry(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Sr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ss=new Xu("app","Firebase",xL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e,r,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new aa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ss.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o=_L;function qI(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Mg,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw ss.create("bad-app-name",{appName:String(s)});if(r||(r=$I()),!r)throw ss.create("no-options");const a=_h.get(s);if(a){if(yh(r,a.options)&&yh(i,a.config))return a;throw ss.create("duplicate-app",{appName:s})}const o=new AM(s);for(const u of Lg.values())o.addComponent(u);const l=new EL(r,i,o);return _h.set(s,l),l}function GI(t=Mg){const e=_h.get(t);if(!e&&t===Mg&&$I())return qI();if(!e)throw ss.create("no-app",{appName:t});return e}function as(t,e,r){var i;let s=(i=wL[t])!==null&&i!==void 0?i:t;r&&(s+=`-${r}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${s}" with version "${e}":`];a&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wi.warn(l.join(" "));return}_o(new aa(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL="firebase-heartbeat-database",SL=1,Iu="firebase-heartbeat-store";let Jp=null;function KI(){return Jp||(Jp=$M(TL,SL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Iu)}catch(r){console.warn(r)}}}}).catch(t=>{throw ss.create("idb-open",{originalErrorMessage:t.message})})),Jp}async function IL(t){try{const r=(await KI()).transaction(Iu),i=await r.objectStore(Iu).get(YI(t));return await r.done,i}catch(e){if(e instanceof ki)wi.warn(e.message);else{const r=ss.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wi.warn(r.message)}}}async function eb(t,e){try{const i=(await KI()).transaction(Iu,"readwrite");await i.objectStore(Iu).put(e,YI(t)),await i.done}catch(r){if(r instanceof ki)wi.warn(r.message);else{const i=ss.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});wi.warn(i.message)}}}function YI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=1024,CL=30;class AL{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new RL(r),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=tb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>CL){const o=NL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){wi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=tb(),{heartbeatsToSend:i,unsentEntries:s}=PL(this._heartbeatsCache.heartbeats),a=vh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return wi.warn(r),""}}}function tb(){return new Date().toISOString().substring(0,10)}function PL(t,e=kL){const r=[];let i=t.slice();for(const s of t){const a=r.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),nb(r)>e){a.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),nb(r)>e){r.pop();break}i=i.slice(1)}return{heartbeatsToSend:r,unsentEntries:i}}class RL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vM()?yM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await IL(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return eb(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return eb(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function nb(t){return vh(JSON.stringify({version:2,heartbeats:t})).length}function NL(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let i=1;i<t.length;i++)t[i].date<r&&(r=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DL(t){_o(new aa("platform-logger",e=>new WM(e),"PRIVATE")),_o(new aa("heartbeat",e=>new AL(e),"PRIVATE")),as(Dg,Jw,t),as(Dg,Jw,"esm2017"),as("fire-js","")}DL("");function Ny(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r}function XI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ML=XI,QI=new Xu("auth","Firebase",XI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=new Ay("@firebase/auth");function LL(t,...e){wh.logLevel<=je.WARN&&wh.warn(`Auth (${$o}): ${t}`,...e)}function Nd(t,...e){wh.logLevel<=je.ERROR&&wh.error(`Auth (${$o}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pr(t,...e){throw Dy(t,...e)}function $r(t,...e){return Dy(t,...e)}function JI(t,e,r){const i=Object.assign(Object.assign({},ML()),{[e]:r});return new Xu("auth","Firebase",i).create(e,{appName:t.name})}function os(t){return JI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dy(t,...e){if(typeof t!="string"){const r=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(r,...i)}return QI.create(t,...e)}function ke(t,e,...r){if(!t)throw Dy(e,...r)}function ci(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Nd(e),new Error(e)}function bi(t,e){t||ci(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function OL(){return rb()==="http:"||rb()==="https:"}function rb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OL()||fM()||"connection"in navigator)?navigator.onLine:!0}function VL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,r){this.shortDelay=e,this.longDelay=r,bi(r>e,"Short delay should be less than long delay!"),this.isMobile=cM()||pM()}get(){return jL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(t,e){bi(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{static initialize(e,r,i){this.fetchImpl=e,r&&(this.headersImpl=r),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ci("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ci("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ci("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=new Ju(3e4,6e4);function ga(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Is(t,e,r,i,s={}){return e1(t,s,async()=>{let a={},o={};i&&(e==="GET"?o=i:a={body:JSON.stringify(i)});const l=Qu(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},a);return hM()||(c.referrerPolicy="no-referrer"),ZI.fetch()(t1(t,t.config.apiHost,r,l),c)})}async function e1(t,e,r){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},FL),e);try{const s=new $L(t),a=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw rd(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw rd(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw rd(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw rd(t,"user-disabled",o);const h=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw JI(t,h,c);Pr(t,h)}}catch(s){if(s instanceof ki)throw s;Pr(t,"network-request-failed",{message:String(s)})}}async function yf(t,e,r,i,s={}){const a=await Is(t,e,r,i,s);return"mfaPendingCredential"in a&&Pr(t,"multi-factor-auth-required",{_serverResponse:a}),a}function t1(t,e,r,i){const s=`${e}${r}?${i}`;return t.config.emulator?My(t.config,s):`${t.config.apiScheme}://${s}`}function BL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $L{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,i)=>{this.timer=setTimeout(()=>i($r(this.auth,"network-request-failed")),UL.get())})}}function rd(t,e,r){const i={appName:t.name};r.email&&(i.email=r.email),r.phoneNumber&&(i.phoneNumber=r.phoneNumber);const s=$r(t,e,i);return s.customData._tokenResponse=r,s}function ib(t){return t!==void 0&&t.enterprise!==void 0}class zL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return BL(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function HL(t,e){return Is(t,"GET","/v2/recaptchaConfig",ga(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WL(t,e){return Is(t,"POST","/v1/accounts:delete",e)}async function n1(t,e){return Is(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qL(t,e=!1){const r=en(t),i=await r.getIdToken(e),s=Ly(i);ke(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:eu(Zp(s.auth_time)),issuedAtTime:eu(Zp(s.iat)),expirationTime:eu(Zp(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Zp(t){return Number(t)*1e3}function Ly(t){const[e,r,i]=t.split(".");if(e===void 0||r===void 0||i===void 0)return Nd("JWT malformed, contained fewer than 3 sections"),null;try{const s=UI(r);return s?JSON.parse(s):(Nd("Failed to decode base64 JWT payload"),null)}catch(s){return Nd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function sb(t){const e=Ly(t);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ku(t,e,r=!1){if(r)return e;try{return await e}catch(i){throw i instanceof ki&&GL(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function GL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=eu(this.lastLoginAt),this.creationTime=eu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bh(t){var e;const r=t.auth,i=await t.getIdToken(),s=await ku(t,n1(r,{idToken:i}));ke(s==null?void 0:s.users.length,r,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?r1(a.providerUserInfo):[],l=XL(t.providerData,o),u=t.isAnonymous,c=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),h=u?c:!1,f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new jg(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function YL(t){const e=en(t);await bh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XL(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function r1(t){return t.map(e=>{var{providerId:r}=e,i=Ny(e,["providerId"]);return{providerId:r,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QL(t,e){const r=await e1(t,{},async()=>{const i=Qu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=t1(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",ZI.fetch()(o,{method:"POST",headers:l,body:i})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function JL(t,e){return Is(t,"POST","/v2/accounts:revokeToken",ga(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const r=sb(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:i,refreshToken:s,expiresIn:a}=await QL(e,r);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,r,i){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,r){const{refreshToken:i,accessToken:s,expirationTime:a}=r,o=new so;return i&&(ke(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),s&&(ke(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(ke(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new so,this.toJSON())}_performRefresh(){return ci("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(t,e){ke(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class di{constructor(e){var{uid:r,auth:i,stsTokenManager:s}=e,a=Ny(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new jg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await ku(this,this.stsTokenManager.getToken(this.auth,e));return ke(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return qL(this,e)}reload(){return YL(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new di(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),r&&await bh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Sr(this.auth.app))return Promise.reject(os(this.auth));const e=await this.getIdToken();return await ku(this,WL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var i,s,a,o,l,u,c,h;const f=(i=r.displayName)!==null&&i!==void 0?i:void 0,p=(s=r.email)!==null&&s!==void 0?s:void 0,g=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,T=(o=r.photoURL)!==null&&o!==void 0?o:void 0,N=(l=r.tenantId)!==null&&l!==void 0?l:void 0,A=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,b=(c=r.createdAt)!==null&&c!==void 0?c:void 0,x=(h=r.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:w,emailVerified:R,isAnonymous:j,providerData:V,stsTokenManager:C}=r;ke(w&&C,e,"internal-error");const I=so.fromJSON(this.name,C);ke(typeof w=="string",e,"internal-error"),Oi(f,e.name),Oi(p,e.name),ke(typeof R=="boolean",e,"internal-error"),ke(typeof j=="boolean",e,"internal-error"),Oi(g,e.name),Oi(T,e.name),Oi(N,e.name),Oi(A,e.name),Oi(b,e.name),Oi(x,e.name);const y=new di({uid:w,auth:e,email:p,emailVerified:R,displayName:f,isAnonymous:j,photoURL:T,phoneNumber:g,tenantId:N,stsTokenManager:I,createdAt:b,lastLoginAt:x});return V&&Array.isArray(V)&&(y.providerData=V.map(_=>Object.assign({},_))),A&&(y._redirectEventId=A),y}static async _fromIdTokenResponse(e,r,i=!1){const s=new so;s.updateFromServerResponse(r);const a=new di({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await bh(a),a}static async _fromGetAccountInfoResponse(e,r,i){const s=r.users[0];ke(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?r1(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new so;l.updateFromIdToken(i);const u=new di({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new jg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=new Map;function hi(t){bi(t instanceof Function,"Expected a class definition");let e=ab.get(t);return e?(bi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ab.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}i1.type="NONE";const ob=i1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(t,e,r){return`firebase:${t}:${e}:${r}`}class ao{constructor(e,r,i){this.persistence=e,this.auth=r,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=Dd(this.userKey,s.apiKey,a),this.fullPersistenceKey=Dd("persistence",s.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?di._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,i="authUser"){if(!r.length)return new ao(hi(ob),e,i);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let a=s[0]||hi(ob);const o=Dd(i,e.config.apiKey,e.name);let l=null;for(const c of r)try{const h=await c._get(o);if(h){const f=di._fromJSON(e,h);c!==a&&(l=f),a=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new ao(a,e,i):(a=u[0],l&&await a._set(o,l.toJSON()),await Promise.all(r.map(async c=>{if(c!==a)try{await c._remove(o)}catch{}})),new ao(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(l1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(s1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(c1(e))return"Blackberry";if(d1(e))return"Webos";if(a1(e))return"Safari";if((e.includes("chrome/")||o1(e))&&!e.includes("edge/"))return"Chrome";if(u1(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(r);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function s1(t=mn()){return/firefox\//i.test(t)}function a1(t=mn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function o1(t=mn()){return/crios\//i.test(t)}function l1(t=mn()){return/iemobile/i.test(t)}function u1(t=mn()){return/android/i.test(t)}function c1(t=mn()){return/blackberry/i.test(t)}function d1(t=mn()){return/webos/i.test(t)}function Oy(t=mn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ZL(t=mn()){var e;return Oy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function eO(){return mM()&&document.documentMode===10}function h1(t=mn()){return Oy(t)||u1(t)||d1(t)||c1(t)||/windows phone/i.test(t)||l1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(t,e=[]){let r;switch(t){case"Browser":r=lb(mn());break;case"Worker":r=`${lb(mn())}-${t}`;break;default:r=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${$o}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const i=a=>new Promise((o,l)=>{try{const u=e(a);o(u)}catch(u){l(u)}});i.onAbort=r,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const i of this.queue)await i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nO(t,e={}){return Is(t,"GET","/v2/passwordPolicy",ga(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=6;class iO{constructor(e){var r,i,s,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:rO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,i,s,a,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,r){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(r.meetsMinPasswordLength=e.length>=i),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,r,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,r,i,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ub(this),this.idTokenSubscription=new ub(this),this.beforeStateQueue=new tO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=hi(r)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await ao.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await n1(this,{idToken:e}),i=await di._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Sr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await bh(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=VL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Sr(this.app))return Promise.reject(os(this));const r=e?en(e):null;return r&&ke(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Sr(this.app)?Promise.reject(os(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Sr(this.app)?Promise.reject(os(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nO(this),r=new iO(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xu("auth","Firebase",e())}onAuthStateChanged(e,r,i){return this.registerStateListener(this.authStateSubscription,e,r,i)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,i){return this.registerStateListener(this.idTokenSubscription,e,r,i)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(i.tenantId=this.tenantId),await JL(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const i=await this.getOrInitRedirectPersistenceManager(r);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&hi(e)||this._popupRedirectResolver;ke(r,this,"argument-error"),this.redirectPersistenceManager=await ao.create(this,[hi(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,i;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,i,s){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,i,s);return()=>{o=!0,u()}}else{const u=e.addObserver(r);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=f1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(r["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;if(Sr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&LL(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function zo(t){return en(t)}class ub{constructor(e){this.auth=e,this.observer=null,this.addObserver=EM(r=>this.observer=r)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _f={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aO(t){_f=t}function p1(t){return _f.loadJS(t)}function oO(){return _f.recaptchaEnterpriseScript}function lO(){return _f.gapiScript}function uO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class cO{constructor(){this.enterprise=new dO}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class dO{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const hO="recaptcha-enterprise",m1="NO_RECAPTCHA";class fO{constructor(e){this.type=hO,this.auth=zo(e)}async verify(e="verify",r=!1){async function i(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{HL(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new zL(u);return a.tenantId==null?a._agentRecaptchaConfig=c:a._tenantRecaptchaConfigs[a.tenantId]=c,o(c.siteKey)}}).catch(u=>{l(u)})})}function s(a,o,l){const u=window.grecaptcha;ib(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(c=>{o(c)}).catch(()=>{o(m1)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new cO().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{i(this.auth).then(l=>{if(!r&&ib(window.grecaptcha))s(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=oO();u.length!==0&&(u+=l),p1(u).then(()=>{s(l,a,o)}).catch(c=>{o(c)})}}).catch(l=>{o(l)})})}}async function cb(t,e,r,i=!1,s=!1){const a=new fO(t);let o;if(s)o=m1;else try{o=await a.verify(r)}catch{o=await a.verify(r,!0)}const l=Object.assign({},e);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,c=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function db(t,e,r,i,s){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await cb(t,e,r,r==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await cb(t,e,r,r==="getOobCode");return i(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(t,e){const r=Ry(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),a=r.getOptions();if(yh(a,e??{}))return s;Pr(s,"already-initialized")}return r.initialize({options:e})}function mO(t,e){const r=(e==null?void 0:e.persistence)||[],i=(Array.isArray(r)?r:[r]).map(hi);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function gO(t,e,r){const i=zo(t);ke(i._canInitEmulator,i,"emulator-config-failed"),ke(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=g1(e),{host:o,port:l}=vO(e),u=l===null?"":`:${l}`;i.config.emulator={url:`${a}//${o}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),yO()}function g1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vO(t){const e=g1(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const i=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:hb(i.substr(a.length+1))}}else{const[a,o]=i.split(":");return{host:a,port:hb(o)}}}function hb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function yO(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return ci("not implemented")}_getIdTokenResponse(e){return ci("not implemented")}_linkToIdToken(e,r){return ci("not implemented")}_getReauthenticationResolver(e){return ci("not implemented")}}async function _O(t,e){return Is(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wO(t,e){return yf(t,"POST","/v1/accounts:signInWithPassword",ga(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bO(t,e){return yf(t,"POST","/v1/accounts:signInWithEmailLink",ga(t,e))}async function xO(t,e){return yf(t,"POST","/v1/accounts:signInWithEmailLink",ga(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu extends jy{constructor(e,r,i,s=null){super("password",i),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new Cu(e,r,"password")}static _fromEmailAndCode(e,r,i=null){return new Cu(e,r,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return db(e,r,"signInWithPassword",wO);case"emailLink":return bO(e,{email:this._email,oobCode:this._password});default:Pr(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const i={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return db(e,i,"signUpPassword",_O);case"emailLink":return xO(e,{idToken:r,email:this._email,oobCode:this._password});default:Pr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oo(t,e){return yf(t,"POST","/v1/accounts:signInWithIdp",ga(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO="http://localhost";class oa extends jy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new oa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Pr("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=r,a=Ny(r,["providerId","signInMethod"]);if(!i||!s)return null;const o=new oa(i,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return oo(e,r)}_linkToIdToken(e,r){const i=this.buildRequest();return i.idToken=r,oo(e,i)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,oo(e,r)}buildRequest(){const e={requestUri:EO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Qu(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function SO(t){const e=jl(Vl(t)).link,r=e?jl(Vl(e)).deep_link_id:null,i=jl(Vl(t)).deep_link_id;return(i?jl(Vl(i)).link:null)||i||r||e||t}class Vy{constructor(e){var r,i,s,a,o,l;const u=jl(Vl(e)),c=(r=u.apiKey)!==null&&r!==void 0?r:null,h=(i=u.oobCode)!==null&&i!==void 0?i:null,f=TO((s=u.mode)!==null&&s!==void 0?s:null);ke(c&&h&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=h,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=SO(e);try{return new Vy(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.providerId=Ho.PROVIDER_ID}static credential(e,r){return Cu._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const i=Vy.parseLink(r);return ke(i,"argument-error"),Cu._fromEmailAndCode(e,i.code,i.tenantId)}}Ho.PROVIDER_ID="password";Ho.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ho.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu extends v1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends Zu{constructor(){super("facebook.com")}static credential(e){return oa._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zi.credential(e.oauthAccessToken)}catch{return null}}}zi.FACEBOOK_SIGN_IN_METHOD="facebook.com";zi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Zu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return oa._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:i}=e;if(!r&&!i)return null;try{return Hi.credential(r,i)}catch{return null}}}Hi.GOOGLE_SIGN_IN_METHOD="google.com";Hi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends Zu{constructor(){super("github.com")}static credential(e){return oa._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Wi.credential(e.oauthAccessToken)}catch{return null}}}Wi.GITHUB_SIGN_IN_METHOD="github.com";Wi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi extends Zu{constructor(){super("twitter.com")}static credential(e,r){return oa._fromParams({providerId:qi.PROVIDER_ID,signInMethod:qi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return qi.credentialFromTaggedObject(e)}static credentialFromError(e){return qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:i}=e;if(!r||!i)return null;try{return qi.credential(r,i)}catch{return null}}}qi.TWITTER_SIGN_IN_METHOD="twitter.com";qi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,i,s=!1){const a=await di._fromIdTokenResponse(e,i,s),o=fb(i);return new wo({user:a,providerId:o,_tokenResponse:i,operationType:r})}static async _forOperation(e,r,i){await e._updateTokensIfNecessary(i,!0);const s=fb(i);return new wo({user:e,providerId:s,_tokenResponse:i,operationType:r})}}function fb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh extends ki{constructor(e,r,i,s){var a;super(r.code,r.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,xh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,r,i,s){return new xh(e,r,i,s)}}function y1(t,e,r,i){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?xh._fromErrorAndOperation(t,a,e,i):a})}async function IO(t,e,r=!1){const i=await ku(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return wo._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kO(t,e,r=!1){const{auth:i}=t;if(Sr(i.app))return Promise.reject(os(i));const s="reauthenticate";try{const a=await ku(t,y1(i,s,e,t),r);ke(a.idToken,i,"internal-error");const o=Ly(a.idToken);ke(o,i,"internal-error");const{sub:l}=o;return ke(t.uid===l,i,"user-mismatch"),wo._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Pr(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _1(t,e,r=!1){if(Sr(t.app))return Promise.reject(os(t));const i="signIn",s=await y1(t,i,e),a=await wo._fromIdTokenResponse(t,i,s);return r||await t._updateCurrentUser(a.user),a}async function CO(t,e){return _1(zo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AO(t){const e=zo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function PO(t,e,r){return Sr(t.app)?Promise.reject(os(t)):CO(en(t),Ho.credential(e,r)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&AO(t),i})}function RO(t,e,r,i){return en(t).onIdTokenChanged(e,r,i)}function NO(t,e,r){return en(t).beforeAuthStateChanged(e,r)}function DO(t,e,r,i){return en(t).onAuthStateChanged(e,r,i)}function MO(t){return en(t).signOut()}const Eh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Eh,"1"),this.storage.removeItem(Eh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=1e3,OO=10;class b1 extends w1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=h1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&e(r,s,i)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const i=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(i);!r&&this.localCache[i]===o||this.notifyListeners(i,o)},a=this.storage.getItem(i);eO()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,OO):s()}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:i}),!0)})},LO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}b1.type="LOCAL";const jO=b1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1 extends w1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}x1.type="SESSION";const E1=x1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const i=new wf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:i,eventType:s,data:a}=r.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(o).map(async c=>c(r.origin,a)),u=await VO(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(t="",e=10){let r="";for(let i=0;i<e;i++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,u)=>{const c=Fy("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(p.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(){return window}function UO(t){zr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(){return typeof zr().WorkerGlobalScope<"u"&&typeof zr().importScripts=="function"}async function BO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $O(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function zO(){return T1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="firebaseLocalStorageDb",HO=1,Th="firebaseLocalStorage",I1="fbase_key";class ec{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function bf(t,e){return t.transaction([Th],e?"readwrite":"readonly").objectStore(Th)}function WO(){const t=indexedDB.deleteDatabase(S1);return new ec(t).toPromise()}function Vg(){const t=indexedDB.open(S1,HO);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Th,{keyPath:I1})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Th)?e(i):(i.close(),await WO(),e(await Vg()))})})}async function pb(t,e,r){const i=bf(t,!0).put({[I1]:e,value:r});return new ec(i).toPromise()}async function qO(t,e){const r=bf(t,!1).get(e),i=await new ec(r).toPromise();return i===void 0?null:i.value}function mb(t,e){const r=bf(t,!0).delete(e);return new ec(r).toPromise()}const GO=800,KO=3;class k1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vg(),this.db)}async _withRetries(e){let r=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(r++>KO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return T1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wf._getInstance(zO()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await BO(),!this.activeServiceWorker)return;this.sender=new FO(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$O()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vg();return await pb(e,Eh,"1"),await mb(e,Eh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>pb(i,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(i=>qO(i,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>mb(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=bf(s,!1).getAll();return new ec(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}k1.type="LOCAL";const YO=k1;new Ju(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(t,e){return e?hi(e):(ke(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy extends jy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return oo(e,this._buildIdpRequest())}_linkToIdToken(e,r){return oo(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return oo(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function QO(t){return _1(t.auth,new Uy(t),t.bypassAuthState)}function JO(t){const{auth:e,user:r}=t;return ke(r,e,"internal-error"),kO(r,new Uy(t),t.bypassAuthState)}async function ZO(t){const{auth:e,user:r}=t;return ke(r,e,"internal-error"),IO(r,new Uy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,r,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:i,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:r,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QO;case"linkViaPopup":case"linkViaRedirect":return ZO;case"reauthViaPopup":case"reauthViaRedirect":return JO;default:Pr(this.auth,"internal-error")}}resolve(e){bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=new Ju(2e3,1e4);class Ja extends C1{constructor(e,r,i,s,a){super(e,r,s,a),this.provider=i,this.authWindow=null,this.pollId=null,Ja.currentPopupAction&&Ja.currentPopupAction.cancel(),Ja.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){bi(this.filter.length===1,"Popup operations only handle one event");const e=Fy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject($r(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($r(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ja.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($r(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ej.get())};e()}}Ja.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj="pendingRedirect",Md=new Map;class nj extends C1{constructor(e,r,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,i),this.eventId=null}async execute(){let e=Md.get(this.auth._key());if(!e){try{const i=await rj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(r){e=()=>Promise.reject(r)}Md.set(this.auth._key(),e)}return this.bypassAuthState||Md.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rj(t,e){const r=aj(e),i=sj(t);if(!await i._isAvailable())return!1;const s=await i._get(r)==="true";return await i._remove(r),s}function ij(t,e){Md.set(t._key(),e)}function sj(t){return hi(t._redirectPersistence)}function aj(t){return Dd(tj,t.config.apiKey,t.name)}async function oj(t,e,r=!1){if(Sr(t.app))return Promise.reject(os(t));const i=zo(t),s=XO(i,e),o=await new nj(i,s,r).execute();return o&&!r&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=10*60*1e3;class uj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(r=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cj(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var i;if(e.error&&!A1(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";r.onError($r(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const i=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lj&&this.cachedEventUids.clear(),this.cachedEventUids.has(gb(e))}saveEventToCache(e){this.cachedEventUids.add(gb(e)),this.lastProcessedEventTime=Date.now()}}function gb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function A1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function cj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return A1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dj(t,e={}){return Is(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fj=/^https?/;async function pj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await dj(t);for(const r of e)try{if(mj(r))return}catch{}Pr(t,"unauthorized-domain")}function mj(t){const e=Og(),{protocol:r,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===i}if(!fj.test(r))return!1;if(hj.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=new Ju(3e4,6e4);function vb(){const t=zr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function vj(t){return new Promise((e,r)=>{var i,s,a;function o(){vb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vb(),r($r(t,"network-request-failed"))},timeout:gj.get()})}if(!((s=(i=zr().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=zr().gapi)===null||a===void 0)&&a.load)o();else{const l=uO("iframefcb");return zr()[l]=()=>{gapi.load?o():r($r(t,"network-request-failed"))},p1(`${lO()}?onload=${l}`).catch(u=>r(u))}}).catch(e=>{throw Ld=null,e})}let Ld=null;function yj(t){return Ld=Ld||vj(t),Ld}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=new Ju(5e3,15e3),wj="__/auth/iframe",bj="emulator/auth/iframe",xj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ej=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Tj(t){const e=t.config;ke(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?My(e,bj):`https://${t.config.authDomain}/${wj}`,i={apiKey:e.apiKey,appName:t.name,v:$o},s=Ej.get(t.config.apiHost);s&&(i.eid=s);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${r}?${Qu(i).slice(1)}`}async function Sj(t){const e=await yj(t),r=zr().gapi;return ke(r,t,"internal-error"),e.open({where:document.body,url:Tj(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xj,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const o=$r(t,"network-request-failed"),l=zr().setTimeout(()=>{a(o)},_j.get());function u(){zr().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kj=500,Cj=600,Aj="_blank",Pj="http://localhost";class yb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Rj(t,e,r,i=kj,s=Cj){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u=Object.assign(Object.assign({},Ij),{width:i.toString(),height:s.toString(),top:a,left:o}),c=mn().toLowerCase();r&&(l=o1(c)?Aj:r),s1(c)&&(e=e||Pj,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[g,T])=>`${p}${g}=${T},`,"");if(ZL(c)&&l!=="_self")return Nj(e||"",l),new yb(null);const f=window.open(e||"",l,h);ke(f,t,"popup-blocked");try{f.focus()}catch{}return new yb(f)}function Nj(t,e){const r=document.createElement("a");r.href=t,r.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj="__/auth/handler",Mj="emulator/auth/handler",Lj=encodeURIComponent("fac");async function _b(t,e,r,i,s,a){ke(t.config.authDomain,t,"auth-domain-config-required"),ke(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:$o,eventId:s};if(e instanceof v1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",xM(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Zu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),c=u?`#${Lj}=${encodeURIComponent(u)}`:"";return`${Oj(t)}?${Qu(l).slice(1)}${c}`}function Oj({config:t}){return t.emulator?My(t,Mj):`https://${t.authDomain}/${Dj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="webStorageSupport";class jj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=E1,this._completeRedirectFn=oj,this._overrideRedirectResult=ij}async _openPopup(e,r,i,s){var a;bi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await _b(e,r,i,Og(),s);return Rj(e,o,Fy())}async _openRedirect(e,r,i,s){await this._originValidation(e);const a=await _b(e,r,i,Og(),s);return UO(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:a}=this.eventManagers[r];return s?Promise.resolve(s):(bi(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[r]={promise:i},i.catch(()=>{delete this.eventManagers[r]}),i}async initAndGetManager(e){const r=await Sj(e),i=new uj(e);return r.register("authEvent",s=>(ke(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=r,i}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(em,{type:em},s=>{var a;const o=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[em];o!==void 0&&r(!!o),Pr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=pj(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return h1()||a1()||Oy()}}const Vj=jj;var wb="@firebase/auth",bb="1.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Bj(t){_o(new aa("auth",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=i.options;ke(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:f1(t)},c=new sO(i,s,a,u);return mO(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,i)=>{e.getProvider("auth-internal").initialize()})),_o(new aa("auth-internal",e=>{const r=zo(e.getProvider("auth").getImmediate());return(i=>new Fj(i))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),as(wb,bb,Uj(t)),as(wb,bb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=5*60,zj=zI("authIdTokenMaxAge")||$j;let xb=null;const Hj=t=>async e=>{const r=e&&await e.getIdTokenResult(),i=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>zj)return;const s=r==null?void 0:r.token;xb!==s&&(xb=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Wj(t=GI()){const e=Ry(t,"auth");if(e.isInitialized())return e.getImmediate();const r=pO(t,{popupRedirectResolver:Vj,persistence:[YO,jO,E1]}),i=zI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const o=Hj(a.toString());NO(r,o,()=>o(r.currentUser)),RO(r,l=>o(l))}}const s=BI("auth");return s&&gO(r,`http://${s}`),r}function qj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}aO({loadJS(t){return new Promise((e,r)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const a=$r("internal-error");a.customData=s,r(a)},i.type="text/javascript",i.charset="UTF-8",qj().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Bj("Browser");var Gj="firebase",Kj="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */as(Gj,Kj,"app");var Eb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ls,P1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,I){function y(){}y.prototype=I.prototype,C.D=I.prototype,C.prototype=new y,C.prototype.constructor=C,C.C=function(_,S,M){for(var D=Array(arguments.length-2),K=2;K<arguments.length;K++)D[K-2]=arguments[K];return I.prototype[S].apply(_,D)}}function r(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,r),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,I,y){y||(y=0);var _=Array(16);if(typeof I=="string")for(var S=0;16>S;++S)_[S]=I.charCodeAt(y++)|I.charCodeAt(y++)<<8|I.charCodeAt(y++)<<16|I.charCodeAt(y++)<<24;else for(S=0;16>S;++S)_[S]=I[y++]|I[y++]<<8|I[y++]<<16|I[y++]<<24;I=C.g[0],y=C.g[1],S=C.g[2];var M=C.g[3],D=I+(M^y&(S^M))+_[0]+3614090360&4294967295;I=y+(D<<7&4294967295|D>>>25),D=M+(S^I&(y^S))+_[1]+3905402710&4294967295,M=I+(D<<12&4294967295|D>>>20),D=S+(y^M&(I^y))+_[2]+606105819&4294967295,S=M+(D<<17&4294967295|D>>>15),D=y+(I^S&(M^I))+_[3]+3250441966&4294967295,y=S+(D<<22&4294967295|D>>>10),D=I+(M^y&(S^M))+_[4]+4118548399&4294967295,I=y+(D<<7&4294967295|D>>>25),D=M+(S^I&(y^S))+_[5]+1200080426&4294967295,M=I+(D<<12&4294967295|D>>>20),D=S+(y^M&(I^y))+_[6]+2821735955&4294967295,S=M+(D<<17&4294967295|D>>>15),D=y+(I^S&(M^I))+_[7]+4249261313&4294967295,y=S+(D<<22&4294967295|D>>>10),D=I+(M^y&(S^M))+_[8]+1770035416&4294967295,I=y+(D<<7&4294967295|D>>>25),D=M+(S^I&(y^S))+_[9]+2336552879&4294967295,M=I+(D<<12&4294967295|D>>>20),D=S+(y^M&(I^y))+_[10]+4294925233&4294967295,S=M+(D<<17&4294967295|D>>>15),D=y+(I^S&(M^I))+_[11]+2304563134&4294967295,y=S+(D<<22&4294967295|D>>>10),D=I+(M^y&(S^M))+_[12]+1804603682&4294967295,I=y+(D<<7&4294967295|D>>>25),D=M+(S^I&(y^S))+_[13]+4254626195&4294967295,M=I+(D<<12&4294967295|D>>>20),D=S+(y^M&(I^y))+_[14]+2792965006&4294967295,S=M+(D<<17&4294967295|D>>>15),D=y+(I^S&(M^I))+_[15]+1236535329&4294967295,y=S+(D<<22&4294967295|D>>>10),D=I+(S^M&(y^S))+_[1]+4129170786&4294967295,I=y+(D<<5&4294967295|D>>>27),D=M+(y^S&(I^y))+_[6]+3225465664&4294967295,M=I+(D<<9&4294967295|D>>>23),D=S+(I^y&(M^I))+_[11]+643717713&4294967295,S=M+(D<<14&4294967295|D>>>18),D=y+(M^I&(S^M))+_[0]+3921069994&4294967295,y=S+(D<<20&4294967295|D>>>12),D=I+(S^M&(y^S))+_[5]+3593408605&4294967295,I=y+(D<<5&4294967295|D>>>27),D=M+(y^S&(I^y))+_[10]+38016083&4294967295,M=I+(D<<9&4294967295|D>>>23),D=S+(I^y&(M^I))+_[15]+3634488961&4294967295,S=M+(D<<14&4294967295|D>>>18),D=y+(M^I&(S^M))+_[4]+3889429448&4294967295,y=S+(D<<20&4294967295|D>>>12),D=I+(S^M&(y^S))+_[9]+568446438&4294967295,I=y+(D<<5&4294967295|D>>>27),D=M+(y^S&(I^y))+_[14]+3275163606&4294967295,M=I+(D<<9&4294967295|D>>>23),D=S+(I^y&(M^I))+_[3]+4107603335&4294967295,S=M+(D<<14&4294967295|D>>>18),D=y+(M^I&(S^M))+_[8]+1163531501&4294967295,y=S+(D<<20&4294967295|D>>>12),D=I+(S^M&(y^S))+_[13]+2850285829&4294967295,I=y+(D<<5&4294967295|D>>>27),D=M+(y^S&(I^y))+_[2]+4243563512&4294967295,M=I+(D<<9&4294967295|D>>>23),D=S+(I^y&(M^I))+_[7]+1735328473&4294967295,S=M+(D<<14&4294967295|D>>>18),D=y+(M^I&(S^M))+_[12]+2368359562&4294967295,y=S+(D<<20&4294967295|D>>>12),D=I+(y^S^M)+_[5]+4294588738&4294967295,I=y+(D<<4&4294967295|D>>>28),D=M+(I^y^S)+_[8]+2272392833&4294967295,M=I+(D<<11&4294967295|D>>>21),D=S+(M^I^y)+_[11]+1839030562&4294967295,S=M+(D<<16&4294967295|D>>>16),D=y+(S^M^I)+_[14]+4259657740&4294967295,y=S+(D<<23&4294967295|D>>>9),D=I+(y^S^M)+_[1]+2763975236&4294967295,I=y+(D<<4&4294967295|D>>>28),D=M+(I^y^S)+_[4]+1272893353&4294967295,M=I+(D<<11&4294967295|D>>>21),D=S+(M^I^y)+_[7]+4139469664&4294967295,S=M+(D<<16&4294967295|D>>>16),D=y+(S^M^I)+_[10]+3200236656&4294967295,y=S+(D<<23&4294967295|D>>>9),D=I+(y^S^M)+_[13]+681279174&4294967295,I=y+(D<<4&4294967295|D>>>28),D=M+(I^y^S)+_[0]+3936430074&4294967295,M=I+(D<<11&4294967295|D>>>21),D=S+(M^I^y)+_[3]+3572445317&4294967295,S=M+(D<<16&4294967295|D>>>16),D=y+(S^M^I)+_[6]+76029189&4294967295,y=S+(D<<23&4294967295|D>>>9),D=I+(y^S^M)+_[9]+3654602809&4294967295,I=y+(D<<4&4294967295|D>>>28),D=M+(I^y^S)+_[12]+3873151461&4294967295,M=I+(D<<11&4294967295|D>>>21),D=S+(M^I^y)+_[15]+530742520&4294967295,S=M+(D<<16&4294967295|D>>>16),D=y+(S^M^I)+_[2]+3299628645&4294967295,y=S+(D<<23&4294967295|D>>>9),D=I+(S^(y|~M))+_[0]+4096336452&4294967295,I=y+(D<<6&4294967295|D>>>26),D=M+(y^(I|~S))+_[7]+1126891415&4294967295,M=I+(D<<10&4294967295|D>>>22),D=S+(I^(M|~y))+_[14]+2878612391&4294967295,S=M+(D<<15&4294967295|D>>>17),D=y+(M^(S|~I))+_[5]+4237533241&4294967295,y=S+(D<<21&4294967295|D>>>11),D=I+(S^(y|~M))+_[12]+1700485571&4294967295,I=y+(D<<6&4294967295|D>>>26),D=M+(y^(I|~S))+_[3]+2399980690&4294967295,M=I+(D<<10&4294967295|D>>>22),D=S+(I^(M|~y))+_[10]+4293915773&4294967295,S=M+(D<<15&4294967295|D>>>17),D=y+(M^(S|~I))+_[1]+2240044497&4294967295,y=S+(D<<21&4294967295|D>>>11),D=I+(S^(y|~M))+_[8]+1873313359&4294967295,I=y+(D<<6&4294967295|D>>>26),D=M+(y^(I|~S))+_[15]+4264355552&4294967295,M=I+(D<<10&4294967295|D>>>22),D=S+(I^(M|~y))+_[6]+2734768916&4294967295,S=M+(D<<15&4294967295|D>>>17),D=y+(M^(S|~I))+_[13]+1309151649&4294967295,y=S+(D<<21&4294967295|D>>>11),D=I+(S^(y|~M))+_[4]+4149444226&4294967295,I=y+(D<<6&4294967295|D>>>26),D=M+(y^(I|~S))+_[11]+3174756917&4294967295,M=I+(D<<10&4294967295|D>>>22),D=S+(I^(M|~y))+_[2]+718787259&4294967295,S=M+(D<<15&4294967295|D>>>17),D=y+(M^(S|~I))+_[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(S+(D<<21&4294967295|D>>>11))&4294967295,C.g[2]=C.g[2]+S&4294967295,C.g[3]=C.g[3]+M&4294967295}i.prototype.u=function(C,I){I===void 0&&(I=C.length);for(var y=I-this.blockSize,_=this.B,S=this.h,M=0;M<I;){if(S==0)for(;M<=y;)s(this,C,M),M+=this.blockSize;if(typeof C=="string"){for(;M<I;)if(_[S++]=C.charCodeAt(M++),S==this.blockSize){s(this,_),S=0;break}}else for(;M<I;)if(_[S++]=C[M++],S==this.blockSize){s(this,_),S=0;break}}this.h=S,this.o+=I},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;var y=8*this.o;for(I=C.length-8;I<C.length;++I)C[I]=y&255,y/=256;for(this.u(C),C=Array(16),I=y=0;4>I;++I)for(var _=0;32>_;_+=8)C[y++]=this.g[I]>>>_&255;return C};function a(C,I){var y=l;return Object.prototype.hasOwnProperty.call(y,C)?y[C]:y[C]=I(C)}function o(C,I){this.h=I;for(var y=[],_=!0,S=C.length-1;0<=S;S--){var M=C[S]|0;_&&M==I||(y[S]=M,_=!1)}this.g=y}var l={};function u(C){return-128<=C&&128>C?a(C,function(I){return new o([I|0],0>I?-1:0)}):new o([C|0],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return A(c(-C));for(var I=[],y=1,_=0;C>=y;_++)I[_]=C/y|0,y*=4294967296;return new o(I,0)}function h(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return A(h(C.substring(1),I));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=c(Math.pow(I,8)),_=f,S=0;S<C.length;S+=8){var M=Math.min(8,C.length-S),D=parseInt(C.substring(S,S+M),I);8>M?(M=c(Math.pow(I,M)),_=_.j(M).add(c(D))):(_=_.j(y),_=_.add(c(D)))}return _}var f=u(0),p=u(1),g=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-A(this).m();for(var C=0,I=1,y=0;y<this.g.length;y++){var _=this.i(y);C+=(0<=_?_:4294967296+_)*I,I*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(T(this))return"0";if(N(this))return"-"+A(this).toString(C);for(var I=c(Math.pow(C,6)),y=this,_="";;){var S=R(y,I).g;y=b(y,S.j(I));var M=((0<y.g.length?y.g[0]:y.h)>>>0).toString(C);if(y=S,T(y))return M+_;for(;6>M.length;)M="0"+M;_=M+_}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function T(C){if(C.h!=0)return!1;for(var I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function N(C){return C.h==-1}t.l=function(C){return C=b(this,C),N(C)?-1:T(C)?0:1};function A(C){for(var I=C.g.length,y=[],_=0;_<I;_++)y[_]=~C.g[_];return new o(y,~C.h).add(p)}t.abs=function(){return N(this)?A(this):this},t.add=function(C){for(var I=Math.max(this.g.length,C.g.length),y=[],_=0,S=0;S<=I;S++){var M=_+(this.i(S)&65535)+(C.i(S)&65535),D=(M>>>16)+(this.i(S)>>>16)+(C.i(S)>>>16);_=D>>>16,M&=65535,D&=65535,y[S]=D<<16|M}return new o(y,y[y.length-1]&-2147483648?-1:0)};function b(C,I){return C.add(A(I))}t.j=function(C){if(T(this)||T(C))return f;if(N(this))return N(C)?A(this).j(A(C)):A(A(this).j(C));if(N(C))return A(this.j(A(C)));if(0>this.l(g)&&0>C.l(g))return c(this.m()*C.m());for(var I=this.g.length+C.g.length,y=[],_=0;_<2*I;_++)y[_]=0;for(_=0;_<this.g.length;_++)for(var S=0;S<C.g.length;S++){var M=this.i(_)>>>16,D=this.i(_)&65535,K=C.i(S)>>>16,ee=C.i(S)&65535;y[2*_+2*S]+=D*ee,x(y,2*_+2*S),y[2*_+2*S+1]+=M*ee,x(y,2*_+2*S+1),y[2*_+2*S+1]+=D*K,x(y,2*_+2*S+1),y[2*_+2*S+2]+=M*K,x(y,2*_+2*S+2)}for(_=0;_<I;_++)y[_]=y[2*_+1]<<16|y[2*_];for(_=I;_<2*I;_++)y[_]=0;return new o(y,0)};function x(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function w(C,I){this.g=C,this.h=I}function R(C,I){if(T(I))throw Error("division by zero");if(T(C))return new w(f,f);if(N(C))return I=R(A(C),I),new w(A(I.g),A(I.h));if(N(I))return I=R(C,A(I)),new w(A(I.g),I.h);if(30<C.g.length){if(N(C)||N(I))throw Error("slowDivide_ only works with positive integers.");for(var y=p,_=I;0>=_.l(C);)y=j(y),_=j(_);var S=V(y,1),M=V(_,1);for(_=V(_,2),y=V(y,2);!T(_);){var D=M.add(_);0>=D.l(C)&&(S=S.add(y),M=D),_=V(_,1),y=V(y,1)}return I=b(C,S.j(I)),new w(S,I)}for(S=f;0<=C.l(I);){for(y=Math.max(1,Math.floor(C.m()/I.m())),_=Math.ceil(Math.log(y)/Math.LN2),_=48>=_?1:Math.pow(2,_-48),M=c(y),D=M.j(I);N(D)||0<D.l(C);)y-=_,M=c(y),D=M.j(I);T(M)&&(M=p),S=S.add(M),C=b(C,D)}return new w(S,C)}t.A=function(C){return R(this,C).h},t.and=function(C){for(var I=Math.max(this.g.length,C.g.length),y=[],_=0;_<I;_++)y[_]=this.i(_)&C.i(_);return new o(y,this.h&C.h)},t.or=function(C){for(var I=Math.max(this.g.length,C.g.length),y=[],_=0;_<I;_++)y[_]=this.i(_)|C.i(_);return new o(y,this.h|C.h)},t.xor=function(C){for(var I=Math.max(this.g.length,C.g.length),y=[],_=0;_<I;_++)y[_]=this.i(_)^C.i(_);return new o(y,this.h^C.h)};function j(C){for(var I=C.g.length+1,y=[],_=0;_<I;_++)y[_]=C.i(_)<<1|C.i(_-1)>>>31;return new o(y,C.h)}function V(C,I){var y=I>>5;I%=32;for(var _=C.g.length-y,S=[],M=0;M<_;M++)S[M]=0<I?C.i(M+y)>>>I|C.i(M+y+1)<<32-I:C.i(M+y);return new o(S,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,P1=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,ls=o}).apply(typeof Eb<"u"?Eb:typeof self<"u"?self:typeof window<"u"?window:{});var id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var R1,Fl,N1,Od,Fg,D1,M1,L1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,v,E){return d==Array.prototype||d==Object.prototype||(d[v]=E.value),d};function r(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof id=="object"&&id];for(var v=0;v<d.length;++v){var E=d[v];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=r(this);function s(d,v){if(v)e:{var E=i;d=d.split(".");for(var O=0;O<d.length-1;O++){var $=d[O];if(!($ in E))break e;E=E[$]}d=d[d.length-1],O=E[d],v=v(O),v!=O&&v!=null&&e(E,d,{configurable:!0,writable:!0,value:v})}}function a(d,v){d instanceof String&&(d+="");var E=0,O=!1,$={next:function(){if(!O&&E<d.length){var G=E++;return{value:v(G,d[G]),done:!1}}return O=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}s("Array.prototype.values",function(d){return d||function(){return a(this,function(v,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(d){var v=typeof d;return v=v!="object"?v:d?Array.isArray(d)?"array":v:"null",v=="array"||v=="object"&&typeof d.length=="number"}function c(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function h(d,v,E){return d.call.apply(d.bind,arguments)}function f(d,v,E){if(!d)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,O),d.apply(v,$)}}return function(){return d.apply(v,arguments)}}function p(d,v,E){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function g(d,v){var E=Array.prototype.slice.call(arguments,1);return function(){var O=E.slice();return O.push.apply(O,arguments),d.apply(this,O)}}function T(d,v){function E(){}E.prototype=v.prototype,d.aa=v.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(O,$,G){for(var ue=Array(arguments.length-2),st=2;st<arguments.length;st++)ue[st-2]=arguments[st];return v.prototype[$].apply(O,ue)}}function N(d){const v=d.length;if(0<v){const E=Array(v);for(let O=0;O<v;O++)E[O]=d[O];return E}return[]}function A(d,v){for(let E=1;E<arguments.length;E++){const O=arguments[E];if(u(O)){const $=d.length||0,G=O.length||0;d.length=$+G;for(let ue=0;ue<G;ue++)d[$+ue]=O[ue]}else d.push(O)}}class b{constructor(v,E){this.i=v,this.j=E,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function x(d){return/^[\s\xa0]*$/.test(d)}function w(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function R(d){return R[" "](d),d}R[" "]=function(){};var j=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function V(d,v,E){for(const O in d)v.call(E,d[O],O,d)}function C(d,v){for(const E in d)v.call(void 0,d[E],E,d)}function I(d){const v={};for(const E in d)v[E]=d[E];return v}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(d,v){let E,O;for(let $=1;$<arguments.length;$++){O=arguments[$];for(E in O)d[E]=O[E];for(let G=0;G<y.length;G++)E=y[G],Object.prototype.hasOwnProperty.call(O,E)&&(d[E]=O[E])}}function S(d){var v=1;d=d.split(":");const E=[];for(;0<v&&d.length;)E.push(d.shift()),v--;return d.length&&E.push(d.join(":")),E}function M(d){l.setTimeout(()=>{throw d},0)}function D(){var d=Y;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class K{constructor(){this.h=this.g=null}add(v,E){const O=ee.get();O.set(v,E),this.h?this.h.next=O:this.g=O,this.h=O}}var ee=new b(()=>new re,d=>d.reset());class re{constructor(){this.next=this.g=this.h=null}set(v,E){this.h=v,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let pe,q=!1,Y=new K,ie=()=>{const d=l.Promise.resolve(void 0);pe=()=>{d.then(ne)}};var ne=()=>{for(var d;d=D();){try{d.h.call(d.g)}catch(E){M(E)}var v=ee;v.j(d),100>v.h&&(v.h++,d.next=v.g,v.g=d)}q=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var Q=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};l.addEventListener("test",E,v),l.removeEventListener("test",E,v)}catch{}return d}();function X(d,v){if(H.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,O=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget){if(j){e:{try{R(v.nodeName);var $=!0;break e}catch{}$=!1}$||(v=null)}}else E=="mouseover"?v=d.fromElement:E=="mouseout"&&(v=d.toElement);this.relatedTarget=v,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:de[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&X.aa.h.call(this)}}T(X,H);var de={2:"touch",3:"pen",4:"mouse"};X.prototype.h=function(){X.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ve="closure_listenable_"+(1e6*Math.random()|0),Oe=0;function Ne(d,v,E,O,$){this.listener=d,this.proxy=null,this.src=v,this.type=E,this.capture=!!O,this.ha=$,this.key=++Oe,this.da=this.fa=!1}function Ge(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function ze(d){this.src=d,this.g={},this.h=0}ze.prototype.add=function(d,v,E,O,$){var G=d.toString();d=this.g[G],d||(d=this.g[G]=[],this.h++);var ue=Xe(d,v,O,$);return-1<ue?(v=d[ue],E||(v.fa=!1)):(v=new Ne(v,this.src,G,!!O,$),v.fa=E,d.push(v)),v};function Ye(d,v){var E=v.type;if(E in d.g){var O=d.g[E],$=Array.prototype.indexOf.call(O,v,void 0),G;(G=0<=$)&&Array.prototype.splice.call(O,$,1),G&&(Ge(v),d.g[E].length==0&&(delete d.g[E],d.h--))}}function Xe(d,v,E,O){for(var $=0;$<d.length;++$){var G=d[$];if(!G.da&&G.listener==v&&G.capture==!!E&&G.ha==O)return $}return-1}var Qe="closure_lm_"+(1e6*Math.random()|0),rt={};function P(d,v,E,O,$){if(Array.isArray(v)){for(var G=0;G<v.length;G++)P(d,v[G],E,O,$);return null}return E=be(E),d&&d[ve]?d.K(v,E,c(O)?!!O.capture:!1,$):F(d,v,E,!1,O,$)}function F(d,v,E,O,$,G){if(!v)throw Error("Invalid event type");var ue=c($)?!!$.capture:!!$,st=he(d);if(st||(d[Qe]=st=new ze(d)),E=st.add(v,E,O,ue,G),E.proxy)return E;if(O=U(),E.proxy=O,O.src=d,O.listener=E,d.addEventListener)Q||($=ue),$===void 0&&($=!1),d.addEventListener(v.toString(),O,$);else if(d.attachEvent)d.attachEvent(J(v.toString()),O);else if(d.addListener&&d.removeListener)d.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return E}function U(){function d(E){return v.call(d.src,d.listener,E)}const v=ce;return d}function z(d,v,E,O,$){if(Array.isArray(v))for(var G=0;G<v.length;G++)z(d,v[G],E,O,$);else O=c(O)?!!O.capture:!!O,E=be(E),d&&d[ve]?(d=d.i,v=String(v).toString(),v in d.g&&(G=d.g[v],E=Xe(G,E,O,$),-1<E&&(Ge(G[E]),Array.prototype.splice.call(G,E,1),G.length==0&&(delete d.g[v],d.h--)))):d&&(d=he(d))&&(v=d.g[v.toString()],d=-1,v&&(d=Xe(v,E,O,$)),(E=-1<d?v[d]:null)&&oe(E))}function oe(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[ve])Ye(v.i,d);else{var E=d.type,O=d.proxy;v.removeEventListener?v.removeEventListener(E,O,d.capture):v.detachEvent?v.detachEvent(J(E),O):v.addListener&&v.removeListener&&v.removeListener(O),(E=he(v))?(Ye(E,d),E.h==0&&(E.src=null,v[Qe]=null)):Ge(d)}}}function J(d){return d in rt?rt[d]:rt[d]="on"+d}function ce(d,v){if(d.da)d=!0;else{v=new X(v,this);var E=d.listener,O=d.ha||d.src;d.fa&&oe(d),d=E.call(O,v)}return d}function he(d){return d=d[Qe],d instanceof ze?d:null}var we="__closure_events_fn_"+(1e9*Math.random()>>>0);function be(d){return typeof d=="function"?d:(d[we]||(d[we]=function(v){return d.handleEvent(v)}),d[we])}function ye(){W.call(this),this.i=new ze(this),this.M=this,this.F=null}T(ye,W),ye.prototype[ve]=!0,ye.prototype.removeEventListener=function(d,v,E,O){z(this,d,v,E,O)};function He(d,v){var E,O=d.F;if(O)for(E=[];O;O=O.F)E.push(O);if(d=d.M,O=v.type||v,typeof v=="string")v=new H(v,d);else if(v instanceof H)v.target=v.target||d;else{var $=v;v=new H(O,d),_(v,$)}if($=!0,E)for(var G=E.length-1;0<=G;G--){var ue=v.g=E[G];$=Fn(ue,O,!0,v)&&$}if(ue=v.g=d,$=Fn(ue,O,!0,v)&&$,$=Fn(ue,O,!1,v)&&$,E)for(G=0;G<E.length;G++)ue=v.g=E[G],$=Fn(ue,O,!1,v)&&$}ye.prototype.N=function(){if(ye.aa.N.call(this),this.i){var d=this.i,v;for(v in d.g){for(var E=d.g[v],O=0;O<E.length;O++)Ge(E[O]);delete d.g[v],d.h--}}this.F=null},ye.prototype.K=function(d,v,E,O){return this.i.add(String(d),v,!1,E,O)},ye.prototype.L=function(d,v,E,O){return this.i.add(String(d),v,!0,E,O)};function Fn(d,v,E,O){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();for(var $=!0,G=0;G<v.length;++G){var ue=v[G];if(ue&&!ue.da&&ue.capture==E){var st=ue.listener,qt=ue.ha||ue.src;ue.fa&&Ye(d.i,ue),$=st.call(qt,O)!==!1&&$}}return $&&!O.defaultPrevented}function Dr(d,v,E){if(typeof d=="function")E&&(d=p(d,E));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:l.setTimeout(d,v||0)}function Ri(d){d.g=Dr(()=>{d.g=null,d.i&&(d.i=!1,Ri(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class nr extends W{constructor(v,E){super(),this.m=v,this.l=E,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Ri(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Un(d){W.call(this),this.h=d,this.g={}}T(Un,W);var Zr=[];function Bn(d){V(d.g,function(v,E){this.g.hasOwnProperty(E)&&oe(v)},d),d.g={}}Un.prototype.N=function(){Un.aa.N.call(this),Bn(this)},Un.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var In=l.JSON.stringify,el=l.JSON.parse,tl=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function nl(){}nl.prototype.h=null;function Ps(d){return d.h||(d.h=d.i())}function Rs(){}var Ns={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ei(){H.call(this,"d")}T(ei,H);function rl(){H.call(this,"c")}T(rl,H);var ti={},St=null;function gr(){return St=St||new ye}ti.La="serverreachability";function xc(d){H.call(this,ti.La,d)}T(xc,H);function Ni(d){const v=gr();He(v,new xc(v))}ti.STAT_EVENT="statevent";function xa(d,v){H.call(this,ti.STAT_EVENT,d),this.stat=v}T(xa,H);function jt(d){const v=gr();He(v,new xa(v,d))}ti.Ma="timingevent";function il(d,v){H.call(this,ti.Ma,d),this.size=v}T(il,H);function Ds(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},v)}function rn(){this.g=!0}rn.prototype.xa=function(){this.g=!1};function Ea(d,v,E,O,$,G){d.info(function(){if(d.g)if(G)for(var ue="",st=G.split("&"),qt=0;qt<st.length;qt++){var Ke=st[qt].split("=");if(1<Ke.length){var sn=Ke[0];Ke=Ke[1];var an=sn.split("_");ue=2<=an.length&&an[1]=="type"?ue+(sn+"="+Ke+"&"):ue+(sn+"=redacted&")}}else ue=null;else ue=G;return"XMLHTTP REQ ("+O+") [attempt "+$+"]: "+v+`
`+E+`
`+ue})}function Ec(d,v,E,O,$,G,ue){d.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+$+"]: "+v+`
`+E+`
`+G+" "+ue})}function ni(d,v,E,O){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+Tc(d,E)+(O?" "+O:"")})}function sl(d,v){d.info(function(){return"TIMEOUT: "+v})}rn.prototype.info=function(){};function Tc(d,v){if(!d.g)return v;if(!v)return null;try{var E=JSON.parse(v);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var O=E[d];if(!(2>O.length)){var $=O[1];if(Array.isArray($)&&!(1>$.length)){var G=$[0];if(G!="noop"&&G!="stop"&&G!="close")for(var ue=1;ue<$.length;ue++)$[ue]=""}}}}return In(E)}catch{return v}}var kn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},al={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ta;function Ms(){}T(Ms,nl),Ms.prototype.g=function(){return new XMLHttpRequest},Ms.prototype.i=function(){return{}},Ta=new Ms;function vr(d,v,E,O){this.j=d,this.i=v,this.l=E,this.R=O||1,this.U=new Un(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Sc}function Sc(){this.i=null,this.g="",this.h=!1}var xe={},B={};function se(d,v,E){d.L=1,d.v=Ac(ri(v)),d.m=E,d.P=!0,_e(d,null)}function _e(d,v){d.F=Date.now(),xt(d),d.A=ri(d.v);var E=d.A,O=d.R;Array.isArray(O)||(O=[String(O)]),u0(E.i,"t",O),d.C=0,E=d.j.J,d.h=new Sc,d.g=k0(d.j,E?v:null,!d.m),0<d.O&&(d.M=new nr(p(d.Y,d,d.g),d.O)),v=d.U,E=d.g,O=d.ca;var $="readystatechange";Array.isArray($)||($&&(Zr[0]=$.toString()),$=Zr);for(var G=0;G<$.length;G++){var ue=P(E,$[G],O||v.handleEvent,!1,v.h||v);if(!ue)break;v.g[ue.key]=ue}v=d.H?I(d.H):{},d.m?(d.u||(d.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,v)):(d.u="GET",d.g.ea(d.A,d.u,null,v)),Ni(),Ea(d.i,d.u,d.A,d.l,d.R,d.m)}vr.prototype.ca=function(d){d=d.target;const v=this.M;v&&ii(d)==3?v.j():this.Y(d)},vr.prototype.Y=function(d){try{if(d==this.g)e:{const an=ii(this.g);var v=this.g.Ba();const Ca=this.g.Z();if(!(3>an)&&(an!=3||this.g&&(this.h.h||this.g.oa()||g0(this.g)))){this.J||an!=4||v==7||(v==8||0>=Ca?Ni(3):Ni(2)),Cn(this);var E=this.g.Z();this.X=E;t:if(it(this)){var O=g0(this.g);d="";var $=O.length,G=ii(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gt(this),yr(this);var ue="";break t}this.h.i=new l.TextDecoder}for(v=0;v<$;v++)this.h.h=!0,d+=this.h.i.decode(O[v],{stream:!(G&&v==$-1)});O.length=0,this.h.g+=d,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=E==200,Ec(this.i,this.u,this.A,this.l,this.R,an,E),this.o){if(this.T&&!this.K){t:{if(this.g){var st,qt=this.g;if((st=qt.g?qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(st)){var Ke=st;break t}}Ke=null}if(E=Ke)ni(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Sa(this,E);else{this.o=!1,this.s=3,jt(12),gt(this),yr(this);break e}}if(this.P){E=!0;let _r;for(;!this.J&&this.C<ue.length;)if(_r=Vt(this,ue),_r==B){an==4&&(this.s=4,jt(14),E=!1),ni(this.i,this.l,null,"[Incomplete Response]");break}else if(_r==xe){this.s=4,jt(15),ni(this.i,this.l,ue,"[Invalid Chunk]"),E=!1;break}else ni(this.i,this.l,_r,null),Sa(this,_r);if(it(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),an!=4||ue.length!=0||this.h.h||(this.s=1,jt(16),E=!1),this.o=this.o&&E,!E)ni(this.i,this.l,ue,"[Invalid Chunked Response]"),gt(this),yr(this);else if(0<ue.length&&!this.W){this.W=!0;var sn=this.j;sn.g==this&&sn.ba&&!sn.M&&(sn.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),yp(sn),sn.M=!0,jt(11))}}else ni(this.i,this.l,ue,null),Sa(this,ue);an==4&&gt(this),this.o&&!this.J&&(an==4?E0(this.j,this):(this.o=!1,xt(this)))}else GP(this.g),E==400&&0<ue.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),gt(this),yr(this)}}}catch{}finally{}};function it(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Vt(d,v){var E=d.C,O=v.indexOf(`
`,E);return O==-1?B:(E=Number(v.substring(E,O)),isNaN(E)?xe:(O+=1,O+E>v.length?B:(v=v.slice(O,O+E),d.C=O+E,v)))}vr.prototype.cancel=function(){this.J=!0,gt(this)};function xt(d){d.S=Date.now()+d.I,Wt(d,d.I)}function Wt(d,v){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ds(p(d.ba,d),v)}function Cn(d){d.B&&(l.clearTimeout(d.B),d.B=null)}vr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(sl(this.i,this.A),this.L!=2&&(Ni(),jt(17)),gt(this),this.s=2,yr(this)):Wt(this,this.S-d)};function yr(d){d.j.G==0||d.J||E0(d.j,d)}function gt(d){Cn(d);var v=d.M;v&&typeof v.ma=="function"&&v.ma(),d.M=null,Bn(d.U),d.g&&(v=d.g,d.g=null,v.abort(),v.ma())}function Sa(d,v){try{var E=d.j;if(E.G!=0&&(E.g==d||fp(E.h,d))){if(!d.K&&fp(E.h,d)&&E.G==3){try{var O=E.Da.g.parse(v)}catch{O=null}if(Array.isArray(O)&&O.length==3){var $=O;if($[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)Lc(E),Dc(E);else break e;vp(E),jt(18)}}else E.za=$[1],0<E.za-E.T&&37500>$[2]&&E.F&&E.v==0&&!E.C&&(E.C=Ds(p(E.Za,E),6e3));if(1>=e0(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Os(E,11)}else if((d.K||E.g==d)&&Lc(E),!x(v))for($=E.Da.g.parse(v),v=0;v<$.length;v++){let Ke=$[v];if(E.T=Ke[0],Ke=Ke[1],E.G==2)if(Ke[0]=="c"){E.K=Ke[1],E.ia=Ke[2];const sn=Ke[3];sn!=null&&(E.la=sn,E.j.info("VER="+E.la));const an=Ke[4];an!=null&&(E.Aa=an,E.j.info("SVER="+E.Aa));const Ca=Ke[5];Ca!=null&&typeof Ca=="number"&&0<Ca&&(O=1.5*Ca,E.L=O,E.j.info("backChannelRequestTimeoutMs_="+O)),O=E;const _r=d.g;if(_r){const jc=_r.g?_r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jc){var G=O.h;G.g||jc.indexOf("spdy")==-1&&jc.indexOf("quic")==-1&&jc.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(pp(G,G.h),G.h=null))}if(O.D){const _p=_r.g?_r.g.getResponseHeader("X-HTTP-Session-Id"):null;_p&&(O.ya=_p,lt(O.I,O.D,_p))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),O=E;var ue=d;if(O.qa=I0(O,O.J?O.ia:null,O.W),ue.K){t0(O.h,ue);var st=ue,qt=O.L;qt&&(st.I=qt),st.B&&(Cn(st),xt(st)),O.g=ue}else b0(O);0<E.i.length&&Mc(E)}else Ke[0]!="stop"&&Ke[0]!="close"||Os(E,7);else E.G==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Os(E,7):gp(E):Ke[0]!="noop"&&E.l&&E.l.ta(Ke),E.v=0)}}Ni(4)}catch{}}var Ic=class{constructor(d,v){this.g=d,this.map=v}};function J_(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Z_(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function e0(d){return d.h?1:d.g?d.g.size:0}function fp(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function pp(d,v){d.g?d.g.add(v):d.h=v}function t0(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}J_.prototype.cancel=function(){if(this.i=n0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function n0(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const E of d.g.values())v=v.concat(E.D);return v}return N(d.i)}function NP(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var v=[],E=d.length,O=0;O<E;O++)v.push(d[O]);return v}v=[],E=0;for(O in d)v[E++]=d[O];return v}function DP(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var v=[];d=d.length;for(var E=0;E<d;E++)v.push(E);return v}v=[],E=0;for(const O in d)v[E++]=O;return v}}}function r0(d,v){if(d.forEach&&typeof d.forEach=="function")d.forEach(v,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,v,void 0);else for(var E=DP(d),O=NP(d),$=O.length,G=0;G<$;G++)v.call(void 0,O[G],E&&E[G],d)}var i0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function MP(d,v){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var O=d[E].indexOf("="),$=null;if(0<=O){var G=d[E].substring(0,O);$=d[E].substring(O+1)}else G=d[E];v(G,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Ls(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Ls){this.h=d.h,kc(this,d.j),this.o=d.o,this.g=d.g,Cc(this,d.s),this.l=d.l;var v=d.i,E=new ul;E.i=v.i,v.g&&(E.g=new Map(v.g),E.h=v.h),s0(this,E),this.m=d.m}else d&&(v=String(d).match(i0))?(this.h=!1,kc(this,v[1]||"",!0),this.o=ol(v[2]||""),this.g=ol(v[3]||"",!0),Cc(this,v[4]),this.l=ol(v[5]||"",!0),s0(this,v[6]||"",!0),this.m=ol(v[7]||"")):(this.h=!1,this.i=new ul(null,this.h))}Ls.prototype.toString=function(){var d=[],v=this.j;v&&d.push(ll(v,a0,!0),":");var E=this.g;return(E||v=="file")&&(d.push("//"),(v=this.o)&&d.push(ll(v,a0,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(ll(E,E.charAt(0)=="/"?jP:OP,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",ll(E,FP)),d.join("")};function ri(d){return new Ls(d)}function kc(d,v,E){d.j=E?ol(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function Cc(d,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);d.s=v}else d.s=null}function s0(d,v,E){v instanceof ul?(d.i=v,UP(d.i,d.h)):(E||(v=ll(v,VP)),d.i=new ul(v,d.h))}function lt(d,v,E){d.i.set(v,E)}function Ac(d){return lt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function ol(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function ll(d,v,E){return typeof d=="string"?(d=encodeURI(d).replace(v,LP),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function LP(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var a0=/[#\/\?@]/g,OP=/[#\?:]/g,jP=/[#\?]/g,VP=/[#\?@]/g,FP=/#/g;function ul(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Di(d){d.g||(d.g=new Map,d.h=0,d.i&&MP(d.i,function(v,E){d.add(decodeURIComponent(v.replace(/\+/g," ")),E)}))}t=ul.prototype,t.add=function(d,v){Di(this),this.i=null,d=Ia(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(v),this.h+=1,this};function o0(d,v){Di(d),v=Ia(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function l0(d,v){return Di(d),v=Ia(d,v),d.g.has(v)}t.forEach=function(d,v){Di(this),this.g.forEach(function(E,O){E.forEach(function($){d.call(v,$,O,this)},this)},this)},t.na=function(){Di(this);const d=Array.from(this.g.values()),v=Array.from(this.g.keys()),E=[];for(let O=0;O<v.length;O++){const $=d[O];for(let G=0;G<$.length;G++)E.push(v[O])}return E},t.V=function(d){Di(this);let v=[];if(typeof d=="string")l0(this,d)&&(v=v.concat(this.g.get(Ia(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)v=v.concat(d[E])}return v},t.set=function(d,v){return Di(this),this.i=null,d=Ia(this,d),l0(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},t.get=function(d,v){return d?(d=this.V(d),0<d.length?String(d[0]):v):v};function u0(d,v,E){o0(d,v),0<E.length&&(d.i=null,d.g.set(Ia(d,v),N(E)),d.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(var E=0;E<v.length;E++){var O=v[E];const G=encodeURIComponent(String(O)),ue=this.V(O);for(O=0;O<ue.length;O++){var $=G;ue[O]!==""&&($+="="+encodeURIComponent(String(ue[O]))),d.push($)}}return this.i=d.join("&")};function Ia(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function UP(d,v){v&&!d.j&&(Di(d),d.i=null,d.g.forEach(function(E,O){var $=O.toLowerCase();O!=$&&(o0(this,O),u0(this,$,E))},d)),d.j=v}function BP(d,v){const E=new rn;if(l.Image){const O=new Image;O.onload=g(Mi,E,"TestLoadImage: loaded",!0,v,O),O.onerror=g(Mi,E,"TestLoadImage: error",!1,v,O),O.onabort=g(Mi,E,"TestLoadImage: abort",!1,v,O),O.ontimeout=g(Mi,E,"TestLoadImage: timeout",!1,v,O),l.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=d}else v(!1)}function $P(d,v){const E=new rn,O=new AbortController,$=setTimeout(()=>{O.abort(),Mi(E,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:O.signal}).then(G=>{clearTimeout($),G.ok?Mi(E,"TestPingServer: ok",!0,v):Mi(E,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout($),Mi(E,"TestPingServer: error",!1,v)})}function Mi(d,v,E,O,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),O(E)}catch{}}function zP(){this.g=new tl}function HP(d,v,E){const O=E||"";try{r0(d,function($,G){let ue=$;c($)&&(ue=In($)),v.push(O+G+"="+encodeURIComponent(ue))})}catch($){throw v.push(O+"type="+encodeURIComponent("_badmap")),$}}function Pc(d){this.l=d.Ub||null,this.j=d.eb||!1}T(Pc,nl),Pc.prototype.g=function(){return new Rc(this.l,this.j)},Pc.prototype.i=function(d){return function(){return d}}({});function Rc(d,v){ye.call(this),this.D=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Rc,ye),t=Rc.prototype,t.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=v,this.readyState=1,dl(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(v.body=d),(this.D||l).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,cl(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,dl(this)),this.g&&(this.readyState=3,dl(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;c0(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function c0(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?cl(this):dl(this),this.readyState==3&&c0(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,cl(this))},t.Qa=function(d){this.g&&(this.response=d,cl(this))},t.ga=function(){this.g&&cl(this)};function cl(d){d.readyState=4,d.l=null,d.j=null,d.v=null,dl(d)}t.setRequestHeader=function(d,v){this.u.append(d,v)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var E=v.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=v.next();return d.join(`\r
`)};function dl(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Rc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function d0(d){let v="";return V(d,function(E,O){v+=O,v+=":",v+=E,v+=`\r
`}),v}function mp(d,v,E){e:{for(O in E){var O=!1;break e}O=!0}O||(E=d0(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):lt(d,v,E))}function Et(d){ye.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Et,ye);var WP=/^https?$/i,qP=["POST","PUT"];t=Et.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,v,E,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ta.g(),this.v=this.o?Ps(this.o):Ps(Ta),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(G){h0(this,G);return}if(d=E||"",E=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var $ in O)E.set($,O[$]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const G of O.keys())E.set(G,O.get(G));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(E.keys()).find(G=>G.toLowerCase()=="content-type"),$=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(qP,v,void 0))||O||$||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ue]of E)this.g.setRequestHeader(G,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{m0(this),this.u=!0,this.g.send(d),this.u=!1}catch(G){h0(this,G)}};function h0(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.m=5,f0(d),Nc(d)}function f0(d){d.A||(d.A=!0,He(d,"complete"),He(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,He(this,"complete"),He(this,"abort"),Nc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nc(this,!0)),Et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?p0(this):this.bb())},t.bb=function(){p0(this)};function p0(d){if(d.h&&typeof o<"u"&&(!d.v[1]||ii(d)!=4||d.Z()!=2)){if(d.u&&ii(d)==4)Dr(d.Ea,0,d);else if(He(d,"readystatechange"),ii(d)==4){d.h=!1;try{const ue=d.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var E;if(!(E=v)){var O;if(O=ue===0){var $=String(d.D).match(i0)[1]||null;!$&&l.self&&l.self.location&&($=l.self.location.protocol.slice(0,-1)),O=!WP.test($?$.toLowerCase():"")}E=O}if(E)He(d,"complete"),He(d,"success");else{d.m=6;try{var G=2<ii(d)?d.g.statusText:""}catch{G=""}d.l=G+" ["+d.Z()+"]",f0(d)}}finally{Nc(d)}}}}function Nc(d,v){if(d.g){m0(d);const E=d.g,O=d.v[0]?()=>{}:null;d.g=null,d.v=null,v||He(d,"ready");try{E.onreadystatechange=O}catch{}}}function m0(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function ii(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<ii(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),el(v)}};function g0(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function GP(d){const v={};d=(d.g&&2<=ii(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<d.length;O++){if(x(d[O]))continue;var E=S(d[O]);const $=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const G=v[$]||[];v[$]=G,G.push(E)}C(v,function(O){return O.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hl(d,v,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||v}function v0(d){this.Aa=0,this.i=[],this.j=new rn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hl("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hl("baseRetryDelayMs",5e3,d),this.cb=hl("retryDelaySeedMs",1e4,d),this.Wa=hl("forwardChannelMaxRetries",2,d),this.wa=hl("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new J_(d&&d.concurrentRequestLimit),this.Da=new zP,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=v0.prototype,t.la=8,t.G=1,t.connect=function(d,v,E,O){jt(0),this.W=d,this.H=v||{},E&&O!==void 0&&(this.H.OSID=E,this.H.OAID=O),this.F=this.X,this.I=I0(this,null,this.W),Mc(this)};function gp(d){if(y0(d),d.G==3){var v=d.U++,E=ri(d.I);if(lt(E,"SID",d.K),lt(E,"RID",v),lt(E,"TYPE","terminate"),fl(d,E),v=new vr(d,d.j,v),v.L=2,v.v=Ac(ri(E)),E=!1,l.navigator&&l.navigator.sendBeacon)try{E=l.navigator.sendBeacon(v.v.toString(),"")}catch{}!E&&l.Image&&(new Image().src=v.v,E=!0),E||(v.g=k0(v.j,null),v.g.ea(v.v)),v.F=Date.now(),xt(v)}S0(d)}function Dc(d){d.g&&(yp(d),d.g.cancel(),d.g=null)}function y0(d){Dc(d),d.u&&(l.clearTimeout(d.u),d.u=null),Lc(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function Mc(d){if(!Z_(d.h)&&!d.s){d.s=!0;var v=d.Ga;pe||ie(),q||(pe(),q=!0),Y.add(v,d),d.B=0}}function KP(d,v){return e0(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=v.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ds(p(d.Ga,d,v),T0(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const $=new vr(this,this.j,d);let G=this.o;if(this.S&&(G?(G=I(G),_(G,this.S)):G=this.S),this.m!==null||this.O||($.H=G,G=null),this.P)e:{for(var v=0,E=0;E<this.i.length;E++){t:{var O=this.i[E];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(v+=O,4096<v){v=E;break e}if(v===4096||E===this.i.length-1){v=E+1;break e}}v=1e3}else v=1e3;v=w0(this,$,v),E=ri(this.I),lt(E,"RID",d),lt(E,"CVER",22),this.D&&lt(E,"X-HTTP-Session-Id",this.D),fl(this,E),G&&(this.O?v="headers="+encodeURIComponent(String(d0(G)))+"&"+v:this.m&&mp(E,this.m,G)),pp(this.h,$),this.Ua&&lt(E,"TYPE","init"),this.P?(lt(E,"$req",v),lt(E,"SID","null"),$.T=!0,se($,E,null)):se($,E,v),this.G=2}}else this.G==3&&(d?_0(this,d):this.i.length==0||Z_(this.h)||_0(this))};function _0(d,v){var E;v?E=v.l:E=d.U++;const O=ri(d.I);lt(O,"SID",d.K),lt(O,"RID",E),lt(O,"AID",d.T),fl(d,O),d.m&&d.o&&mp(O,d.m,d.o),E=new vr(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),v&&(d.i=v.D.concat(d.i)),v=w0(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),pp(d.h,E),se(E,O,v)}function fl(d,v){d.H&&V(d.H,function(E,O){lt(v,O,E)}),d.l&&r0({},function(E,O){lt(v,O,E)})}function w0(d,v,E){E=Math.min(d.i.length,E);var O=d.l?p(d.l.Na,d.l,d):null;e:{var $=d.i;let G=-1;for(;;){const ue=["count="+E];G==-1?0<E?(G=$[0].g,ue.push("ofs="+G)):G=0:ue.push("ofs="+G);let st=!0;for(let qt=0;qt<E;qt++){let Ke=$[qt].g;const sn=$[qt].map;if(Ke-=G,0>Ke)G=Math.max(0,$[qt].g-100),st=!1;else try{HP(sn,ue,"req"+Ke+"_")}catch{O&&O(sn)}}if(st){O=ue.join("&");break e}}}return d=d.i.splice(0,E),v.D=d,O}function b0(d){if(!d.g&&!d.u){d.Y=1;var v=d.Fa;pe||ie(),q||(pe(),q=!0),Y.add(v,d),d.v=0}}function vp(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ds(p(d.Fa,d),T0(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,x0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ds(p(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jt(10),Dc(this),x0(this))};function yp(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function x0(d){d.g=new vr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var v=ri(d.qa);lt(v,"RID","rpc"),lt(v,"SID",d.K),lt(v,"AID",d.T),lt(v,"CI",d.F?"0":"1"),!d.F&&d.ja&&lt(v,"TO",d.ja),lt(v,"TYPE","xmlhttp"),fl(d,v),d.m&&d.o&&mp(v,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=Ac(ri(v)),E.m=null,E.P=!0,_e(E,d)}t.Za=function(){this.C!=null&&(this.C=null,Dc(this),vp(this),jt(19))};function Lc(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function E0(d,v){var E=null;if(d.g==v){Lc(d),yp(d),d.g=null;var O=2}else if(fp(d.h,v))E=v.D,t0(d.h,v),O=1;else return;if(d.G!=0){if(v.o)if(O==1){E=v.m?v.m.length:0,v=Date.now()-v.F;var $=d.B;O=gr(),He(O,new il(O,E)),Mc(d)}else b0(d);else if($=v.s,$==3||$==0&&0<v.X||!(O==1&&KP(d,v)||O==2&&vp(d)))switch(E&&0<E.length&&(v=d.h,v.i=v.i.concat(E)),$){case 1:Os(d,5);break;case 4:Os(d,10);break;case 3:Os(d,6);break;default:Os(d,2)}}}function T0(d,v){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*v}function Os(d,v){if(d.j.info("Error code "+v),v==2){var E=p(d.fb,d),O=d.Xa;const $=!O;O=new Ls(O||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||kc(O,"https"),Ac(O),$?BP(O.toString(),E):$P(O.toString(),E)}else jt(2);d.G=0,d.l&&d.l.sa(v),S0(d),y0(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function S0(d){if(d.G=0,d.ka=[],d.l){const v=n0(d.h);(v.length!=0||d.i.length!=0)&&(A(d.ka,v),A(d.ka,d.i),d.h.i.length=0,N(d.i),d.i.length=0),d.l.ra()}}function I0(d,v,E){var O=E instanceof Ls?ri(E):new Ls(E);if(O.g!="")v&&(O.g=v+"."+O.g),Cc(O,O.s);else{var $=l.location;O=$.protocol,v=v?v+"."+$.hostname:$.hostname,$=+$.port;var G=new Ls(null);O&&kc(G,O),v&&(G.g=v),$&&Cc(G,$),E&&(G.l=E),O=G}return E=d.D,v=d.ya,E&&v&&lt(O,E,v),lt(O,"VER",d.la),fl(d,O),O}function k0(d,v,E){if(v&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Ca&&!d.pa?new Et(new Pc({eb:E})):new Et(d.pa),v.Ha(d.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function C0(){}t=C0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Oc(){}Oc.prototype.g=function(d,v){return new $n(d,v)};function $n(d,v){ye.call(this),this.g=new v0(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(d?d["X-WebChannel-Client-Profile"]=v.va:d={"X-WebChannel-Client-Profile":v.va}),this.g.S=d,(d=v&&v.Sb)&&!x(d)&&(this.g.m=d),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!x(v)&&(this.g.D=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new ka(this)}T($n,ye),$n.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$n.prototype.close=function(){gp(this.g)},$n.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=In(d),d=E);v.i.push(new Ic(v.Ya++,d)),v.G==3&&Mc(v)},$n.prototype.N=function(){this.g.l=null,delete this.j,gp(this.g),delete this.g,$n.aa.N.call(this)};function A0(d){ei.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const E in v){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}T(A0,ei);function P0(){rl.call(this),this.status=1}T(P0,rl);function ka(d){this.g=d}T(ka,C0),ka.prototype.ua=function(){He(this.g,"a")},ka.prototype.ta=function(d){He(this.g,new A0(d))},ka.prototype.sa=function(d){He(this.g,new P0)},ka.prototype.ra=function(){He(this.g,"b")},Oc.prototype.createWebChannel=Oc.prototype.g,$n.prototype.send=$n.prototype.o,$n.prototype.open=$n.prototype.m,$n.prototype.close=$n.prototype.close,L1=function(){return new Oc},M1=function(){return gr()},D1=ti,Fg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},kn.NO_ERROR=0,kn.TIMEOUT=8,kn.HTTP_ERROR=6,Od=kn,al.COMPLETE="complete",N1=al,Rs.EventType=Ns,Ns.OPEN="a",Ns.CLOSE="b",Ns.ERROR="c",Ns.MESSAGE="d",ye.prototype.listen=ye.prototype.K,Fl=Rs,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,R1=Et}).apply(typeof id<"u"?id:typeof self<"u"?self:typeof window<"u"?window:{});const Tb="@firebase/firestore",Sb="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wo="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=new Ay("@firebase/firestore");function La(){return la.logLevel}function me(t,...e){if(la.logLevel<=je.DEBUG){const r=e.map(By);la.debug(`Firestore (${Wo}): ${t}`,...r)}}function xi(t,...e){if(la.logLevel<=je.ERROR){const r=e.map(By);la.error(`Firestore (${Wo}): ${t}`,...r)}}function bo(t,...e){if(la.logLevel<=je.WARN){const r=e.map(By);la.warn(`Firestore (${Wo}): ${t}`,...r)}}function By(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t="Unexpected state"){const e=`FIRESTORE (${Wo}) INTERNAL ASSERTION FAILED: `+t;throw xi(e),new Error(e)}function Je(t,e){t||Ce()}function Pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends ki{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(cn.UNAUTHENTICATED))}shutdown(){}}class Xj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Qj{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Je(this.o===void 0);let i=this.i;const s=u=>this.i!==i?(i=this.i,r(u)):Promise.resolve();let a=new mi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new mi,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{me("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(me("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new mi)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(i=>this.i!==e?(me("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Je(typeof i.accessToken=="string"),new O1(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Je(e===null||typeof e=="string"),new cn(e)}}class Jj{constructor(e,r,i){this.l=e,this.h=r,this.P=i,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Zj{constructor(e,r,i){this.l=e,this.h=r,this.P=i}getToken(){return Promise.resolve(new Jj(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ib{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eV{constructor(e,r){this.A=r,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Sr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,r){Je(this.o===void 0);const i=a=>{a.error!=null&&me("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,me("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const s=a=>{me("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):me("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Ib(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Je(typeof r.token=="string"),this.R=r.token,new Ib(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let i=0;i<t;i++)r[i]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=tV(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<r&&(i+=e.charAt(s[a]%62))}return i}}function Fe(t,e){return t<e?-1:t>e?1:0}function xo(t,e,r){return t.length===e.length&&t.every((i,s)=>r(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=-62135596800,Cb=1e6;class Lt{static now(){return Lt.fromMillis(Date.now())}static fromDate(e){return Lt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),i=Math.floor((e-1e3*r)*Cb);return new Lt(r,i)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Ee(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ee(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<kb)throw new Ee(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Cb}_compareTo(e){return this.seconds===e.seconds?Fe(this.nanoseconds,e.nanoseconds):Fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-kb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new Lt(0,0))}static max(){return new Ae(new Lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="__name__";class jr{constructor(e,r,i){r===void 0?r=0:r>e.length&&Ce(),i===void 0?i=e.length-r:i>e.length-r&&Ce(),this.segments=e,this.offset=r,this.len=i}get length(){return this.len}isEqual(e){return jr.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof jr?e.forEach(i=>{r.push(i)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,i=this.limit();r<i;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const i=Math.min(e.length,r.length);for(let s=0;s<i;s++){const a=jr.compareSegments(e.get(s),r.get(s));if(a!==0)return a}return Math.sign(e.length-r.length)}static compareSegments(e,r){const i=jr.isNumericId(e),s=jr.isNumericId(r);return i&&!s?-1:!i&&s?1:i&&s?jr.extractNumericId(e).compare(jr.extractNumericId(r)):e<r?-1:e>r?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ls.fromString(e.substring(4,e.length-2))}}class pt extends jr{construct(e,r,i){return new pt(e,r,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ee(te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);r.push(...i.split("/").filter(s=>s.length>0))}return new pt(r)}static emptyPath(){return new pt([])}}const nV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends jr{construct(e,r,i){return new Xt(e,r,i)}static isValidIdentifier(e){return nV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ab}static keyField(){return new Xt([Ab])}static fromServerFormat(e){const r=[];let i="",s=0;const a=()=>{if(i.length===0)throw new Ee(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(i),i=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Ee(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ee(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(i+=l,s++):(a(),s++)}if(a(),o)throw new Ee(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xt(r)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(pt.fromString(e))}static fromName(e){return new Se(pt.fromString(e).popFirst(5))}static empty(){return new Se(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return pt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new pt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Au=-1;function rV(t,e){const r=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Ae.fromTimestamp(i===1e9?new Lt(r+1,0):new Lt(r,i));return new gs(s,Se.empty(),e)}function iV(t){return new gs(t.readTime,t.key,Au)}class gs{constructor(e,r,i){this.readTime=e,this.documentKey=r,this.largestBatchId=i}static min(){return new gs(Ae.min(),Se.empty(),Au)}static max(){return new gs(Ae.max(),Se.empty(),Au)}}function sV(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Se.comparator(t.documentKey,e.documentKey),r!==0?r:Fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(t){if(t.code!==te.FAILED_PRECONDITION||t.message!==aV)throw t;me("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Z((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(r,a).next(i,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Z?r:Z.resolve(r)}catch(r){return Z.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Z.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Z.reject(r)}static resolve(e){return new Z((r,i)=>{r(e)})}static reject(e){return new Z((r,i)=>{i(e)})}static waitFor(e){return new Z((r,i)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&r()},u=>i(u))}),o=!0,a===s&&r()})}static or(e){let r=Z.resolve(!1);for(const i of e)r=r.next(s=>s?Z.resolve(s):i());return r}static forEach(e,r){const i=[];return e.forEach((s,a)=>{i.push(r.call(this,s,a))}),this.waitFor(i)}static mapArray(e,r){return new Z((i,s)=>{const a=e.length,o=new Array(a);let l=0;for(let u=0;u<a;u++){const c=u;r(e[c]).next(h=>{o[c]=h,++l,l===a&&i(o)},h=>s(h))}})}static doWhile(e,r){return new Z((i,s)=>{const a=()=>{e()===!0?r().next(()=>{a()},s):i()};a()})}}function lV(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Go(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}xf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y=-1;function Ef(t){return t==null}function Sh(t){return t===0&&1/t==-1/0}function uV(t){return typeof t=="number"&&Number.isInteger(t)&&!Sh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="";function cV(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=Pb(e)),e=dV(t.get(r),e);return Pb(e)}function dV(t,e){let r=e;const i=t.length;for(let s=0;s<i;s++){const a=t.charAt(s);switch(a){case"\0":r+="";break;case V1:r+="";break;default:r+=a}}return r}function Pb(t){return t+V1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function ks(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function F1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,r){this.comparator=e,this.root=r||Yt.EMPTY}insert(e,r){return new bt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Yt.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Yt.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}indexOf(e){let r=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return r+i.left.size;s<0?i=i.left:(r+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,i)=>(e(r,i),!1))}toString(){const e=[];return this.inorderTraversal((r,i)=>(e.push(`${r}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sd(this.root,e,this.comparator,!1)}getReverseIterator(){return new sd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sd(this.root,e,this.comparator,!0)}}class sd{constructor(e,r,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?i(e.key,r):1,r&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Yt{constructor(e,r,i,s,a){this.key=e,this.value=r,this.color=i??Yt.RED,this.left=s??Yt.EMPTY,this.right=a??Yt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,i,s,a){return new Yt(e??this.key,r??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,r,i),null):a===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Yt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let i,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Yt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Yt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Yt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ce();const e=this.left.check();if(e!==this.right.check())throw Ce();return e+(this.isRed()?0:1)}}Yt.EMPTY=null,Yt.RED=!0,Yt.BLACK=!1;Yt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce()}get value(){throw Ce()}get color(){throw Ce()}get left(){throw Ce()}get right(){throw Ce()}copy(e,r,i,s,a){return this}insert(e,r,i){return new Yt(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,i)=>(e(r),!1))}forEachInRange(e,r){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let i;for(i=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Nb(this.data.getIterator())}getIteratorFrom(e){return new Nb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(i=>{r=r.add(i)}),r}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const r=this.data.getIterator(),i=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ot(this.comparator);return r.data=e,r}}class Nb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.fields=e,e.sort(Xt.comparator)}static empty(){return new Wn([])}unionWith(e){let r=new Ot(Xt.comparator);for(const i of this.fields)r=r.add(i);for(const i of e)r=r.add(i);return new Wn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return xo(this.fields,e.fields,(r,i)=>r.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new U1("Invalid base64 string: "+a):a}}(e);return new tn(r)}static fromUint8Array(e){const r=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new tn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const i=new Uint8Array(r.length);for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const hV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vs(t){if(Je(!!t),typeof t=="string"){let e=0;const r=hV.exec(t);if(Je(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:It(t.seconds),nanos:It(t.nanos)}}function It(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ys(t){return typeof t=="string"?tn.fromBase64String(t):tn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="server_timestamp",$1="__type__",z1="__previous_value__",H1="__local_write_time__";function zy(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[$1])===null||r===void 0?void 0:r.stringValue)===B1}function Tf(t){const e=t.mapValue.fields[z1];return zy(e)?Tf(e):e}function Pu(t){const e=vs(t.mapValue.fields[H1].timestampValue);return new Lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,r,i,s,a,o,l,u,c){this.databaseId=e,this.appId=r,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}const Ih="(default)";class Ru{constructor(e,r){this.projectId=e,this.database=r||Ih}static empty(){return new Ru("","")}get isDefaultDatabase(){return this.database===Ih}isEqual(e){return e instanceof Ru&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1="__type__",pV="__max__",ad={mapValue:{}},q1="__vector__",kh="value";function _s(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zy(t)?4:gV(t)?9007199254740991:mV(t)?10:11:Ce()}function Kr(t,e){if(t===e)return!0;const r=_s(t);if(r!==_s(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Pu(t).isEqual(Pu(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=vs(s.timestampValue),l=vs(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return ys(s.bytesValue).isEqual(ys(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return It(s.geoPointValue.latitude)===It(a.geoPointValue.latitude)&&It(s.geoPointValue.longitude)===It(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return It(s.integerValue)===It(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=It(s.doubleValue),l=It(a.doubleValue);return o===l?Sh(o)===Sh(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return xo(t.arrayValue.values||[],e.arrayValue.values||[],Kr);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(Rb(o)!==Rb(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Kr(o[u],l[u])))return!1;return!0}(t,e);default:return Ce()}}function Nu(t,e){return(t.values||[]).find(r=>Kr(r,e))!==void 0}function Eo(t,e){if(t===e)return 0;const r=_s(t),i=_s(e);if(r!==i)return Fe(r,i);switch(r){case 0:case 9007199254740991:return 0;case 1:return Fe(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=It(a.integerValue||a.doubleValue),u=It(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Db(t.timestampValue,e.timestampValue);case 4:return Db(Pu(t),Pu(e));case 5:return Fe(t.stringValue,e.stringValue);case 6:return function(a,o){const l=ys(a),u=ys(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const h=Fe(l[c],u[c]);if(h!==0)return h}return Fe(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=Fe(It(a.latitude),It(o.latitude));return l!==0?l:Fe(It(a.longitude),It(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Mb(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,u,c,h;const f=a.fields||{},p=o.fields||{},g=(l=f[kh])===null||l===void 0?void 0:l.arrayValue,T=(u=p[kh])===null||u===void 0?void 0:u.arrayValue,N=Fe(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=T==null?void 0:T.values)===null||h===void 0?void 0:h.length)||0);return N!==0?N:Mb(g,T)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===ad.mapValue&&o===ad.mapValue)return 0;if(a===ad.mapValue)return 1;if(o===ad.mapValue)return-1;const l=a.fields||{},u=Object.keys(l),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const p=Fe(u[f],h[f]);if(p!==0)return p;const g=Eo(l[u[f]],c[h[f]]);if(g!==0)return g}return Fe(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Ce()}}function Db(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Fe(t,e);const r=vs(t),i=vs(e),s=Fe(r.seconds,i.seconds);return s!==0?s:Fe(r.nanos,i.nanos)}function Mb(t,e){const r=t.values||[],i=e.values||[];for(let s=0;s<r.length&&s<i.length;++s){const a=Eo(r[s],i[s]);if(a)return a}return Fe(r.length,i.length)}function To(t){return Ug(t)}function Ug(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=vs(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return ys(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Se.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let i="[",s=!0;for(const a of r.values||[])s?s=!1:i+=",",i+=Ug(a);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",a=!0;for(const o of i)a?a=!1:s+=",",s+=`${o}:${Ug(r.fields[o])}`;return s+"}"}(t.mapValue):Ce()}function jd(t){switch(_s(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tf(t);return e?16+jd(e):16;case 5:return 2*t.stringValue.length;case 6:return ys(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,a)=>s+jd(a),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return ks(i.fields,(a,o)=>{s+=a.length+jd(o)}),s}(t.mapValue);default:throw Ce()}}function Bg(t){return!!t&&"integerValue"in t}function Hy(t){return!!t&&"arrayValue"in t}function Lb(t){return!!t&&"nullValue"in t}function Ob(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vd(t){return!!t&&"mapValue"in t}function mV(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[W1])===null||r===void 0?void 0:r.stringValue)===q1}function tu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ks(t.mapValue.fields,(r,i)=>e.mapValue.fields[r]=tu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=tu(t.arrayValue.values[r]);return e}return Object.assign({},t)}function gV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===pV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let i=0;i<e.length-1;++i)if(r=(r.mapValue.fields||{})[e.get(i)],!Vd(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=tu(r)}setAll(e){let r=Xt.emptyPath(),i={},s=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const u=this.getFieldsMap(r);this.applyChanges(u,i,s),i={},s=[],r=l.popLast()}o?i[l.lastSegment()]=tu(o):s.push(l.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,i,s)}delete(e){const r=this.field(e.popLast());Vd(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Kr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=r.mapValue.fields[e.get(i)];Vd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(i)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,i){ks(r,(s,a)=>e[s]=a);for(const s of i)delete e[s]}clone(){return new Nn(tu(this.value))}}function G1(t){const e=[];return ks(t.fields,(r,i)=>{const s=new Xt([r]);if(Vd(i)){const a=G1(i.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new Wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,r,i,s,a,o,l){this.key=e,this.documentType=r,this.version=i,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new hn(e,0,Ae.min(),Ae.min(),Ae.min(),Nn.empty(),0)}static newFoundDocument(e,r,i,s){return new hn(e,1,r,Ae.min(),i,s,0)}static newNoDocument(e,r){return new hn(e,2,r,Ae.min(),Ae.min(),Nn.empty(),0)}static newUnknownDocument(e,r){return new hn(e,3,r,Ae.min(),Ae.min(),Nn.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,r){this.position=e,this.inclusive=r}}function jb(t,e,r){let i=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?i=Se.comparator(Se.fromName(o.referenceValue),r.key):i=Eo(o,r.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function Vb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Kr(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,r="asc"){this.field=e,this.dir=r}}function vV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{}class Dt extends K1{constructor(e,r,i){super(),this.field=e,this.op=r,this.value=i}static create(e,r,i){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,i):new _V(e,r,i):r==="array-contains"?new xV(e,i):r==="in"?new EV(e,i):r==="not-in"?new TV(e,i):r==="array-contains-any"?new SV(e,i):new Dt(e,r,i)}static createKeyFieldInFilter(e,r,i){return r==="in"?new wV(e,i):new bV(e,i)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Eo(r,this.value)):r!==null&&_s(this.value)===_s(r)&&this.matchesComparison(Eo(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yr extends K1{constructor(e,r){super(),this.filters=e,this.op=r,this.ce=null}static create(e,r){return new Yr(e,r)}matches(e){return Y1(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Y1(t){return t.op==="and"}function X1(t){return yV(t)&&Y1(t)}function yV(t){for(const e of t.filters)if(e instanceof Yr)return!1;return!0}function $g(t){if(t instanceof Dt)return t.field.canonicalString()+t.op.toString()+To(t.value);if(X1(t))return t.filters.map(e=>$g(e)).join(",");{const e=t.filters.map(r=>$g(r)).join(",");return`${t.op}(${e})`}}function Q1(t,e){return t instanceof Dt?function(i,s){return s instanceof Dt&&i.op===s.op&&i.field.isEqual(s.field)&&Kr(i.value,s.value)}(t,e):t instanceof Yr?function(i,s){return s instanceof Yr&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((a,o,l)=>a&&Q1(o,s.filters[l]),!0):!1}(t,e):void Ce()}function J1(t){return t instanceof Dt?function(r){return`${r.field.canonicalString()} ${r.op} ${To(r.value)}`}(t):t instanceof Yr?function(r){return r.op.toString()+" {"+r.getFilters().map(J1).join(" ,")+"}"}(t):"Filter"}class _V extends Dt{constructor(e,r,i){super(e,r,i),this.key=Se.fromName(i.referenceValue)}matches(e){const r=Se.comparator(e.key,this.key);return this.matchesComparison(r)}}class wV extends Dt{constructor(e,r){super(e,"in",r),this.keys=Z1("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class bV extends Dt{constructor(e,r){super(e,"not-in",r),this.keys=Z1("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Z1(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(i=>Se.fromName(i.referenceValue))}class xV extends Dt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Hy(r)&&Nu(r.arrayValue,this.value)}}class EV extends Dt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Nu(this.value.arrayValue,r)}}class TV extends Dt{constructor(e,r){super(e,"not-in",r)}matches(e){if(Nu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Nu(this.value.arrayValue,r)}}class SV extends Dt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Hy(r)||!r.arrayValue.values)&&r.arrayValue.values.some(i=>Nu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e,r=null,i=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.le=null}}function Fb(t,e=null,r=[],i=[],s=null,a=null,o=null){return new IV(t,e,r,i,s,a,o)}function Wy(t){const e=Pe(t);if(e.le===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(i=>$g(i)).join(","),r+="|ob:",r+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),Ef(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>To(i)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>To(i)).join(",")),e.le=r}return e.le}function qy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!vV(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!Q1(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Vb(t.startAt,e.startAt)&&Vb(t.endAt,e.endAt)}function zg(t){return Se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,r=null,i=[],s=[],a=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function kV(t,e,r,i,s,a,o,l){return new Sf(t,e,r,i,s,a,o,l)}function Gy(t){return new Sf(t)}function Ub(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function CV(t){return t.collectionGroup!==null}function nu(t){const e=Pe(t);if(e.he===null){e.he=[];const r=new Set;for(const a of e.explicitOrderBy)e.he.push(a),r.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ot(Xt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.he.push(new Ah(a,i))}),r.has(Xt.keyField().canonicalString())||e.he.push(new Ah(Xt.keyField(),i))}return e.he}function Hr(t){const e=Pe(t);return e.Pe||(e.Pe=AV(e,nu(t))),e.Pe}function AV(t,e){if(t.limitType==="F")return Fb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Ah(s.field,a)});const r=t.endAt?new Ch(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ch(t.startAt.position,t.startAt.inclusive):null;return Fb(t.path,t.collectionGroup,e,t.filters,t.limit,r,i)}}function Hg(t,e,r){return new Sf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function If(t,e){return qy(Hr(t),Hr(e))&&t.limitType===e.limitType}function ek(t){return`${Wy(Hr(t))}|lt:${t.limitType}`}function Oa(t){return`Query(target=${function(r){let i=r.path.canonicalString();return r.collectionGroup!==null&&(i+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(i+=`, filters: [${r.filters.map(s=>J1(s)).join(", ")}]`),Ef(r.limit)||(i+=", limit: "+r.limit),r.orderBy.length>0&&(i+=`, orderBy: [${r.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),r.startAt&&(i+=", startAt: ",i+=r.startAt.inclusive?"b:":"a:",i+=r.startAt.position.map(s=>To(s)).join(",")),r.endAt&&(i+=", endAt: ",i+=r.endAt.inclusive?"a:":"b:",i+=r.endAt.position.map(s=>To(s)).join(",")),`Target(${i})`}(Hr(t))}; limitType=${t.limitType})`}function kf(t,e){return e.isFoundDocument()&&function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Se.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(t,e)&&function(i,s){for(const a of nu(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(o,l,u){const c=jb(o,l,u);return o.inclusive?c<=0:c<0}(i.startAt,nu(i),s)||i.endAt&&!function(o,l,u){const c=jb(o,l,u);return o.inclusive?c>=0:c>0}(i.endAt,nu(i),s))}(t,e)}function PV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tk(t){return(e,r)=>{let i=!1;for(const s of nu(t)){const a=RV(s,e,r);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function RV(t,e,r){const i=t.field.isKeyField()?Se.comparator(e.key,r.key):function(a,o,l){const u=o.data.field(a),c=l.data.field(a);return u!==null&&c!==null?Eo(u,c):Ce()}(t.field,e,r);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Ce()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,r]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[r]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ks(this.inner,(r,i)=>{for(const[s,a]of i)e(s,a)})}isEmpty(){return F1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=new bt(Se.comparator);function Ei(){return NV}const nk=new bt(Se.comparator);function Ul(...t){let e=nk;for(const r of t)e=e.insert(r.key,r);return e}function rk(t){let e=nk;return t.forEach((r,i)=>e=e.insert(r,i.overlayedDocument)),e}function Qs(){return ru()}function ik(){return ru()}function ru(){return new va(t=>t.toString(),(t,e)=>t.isEqual(e))}const MV=new bt(Se.comparator),LV=new Ot(Se.comparator);function Ve(...t){let e=LV;for(const r of t)e=e.add(r);return e}const OV=new Ot(Fe);function jV(){return OV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sh(e)?"-0":e}}function sk(t){return{integerValue:""+t}}function VV(t,e){return uV(e)?sk(e):Ky(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(){this._=void 0}}function FV(t,e,r){return t instanceof Ph?function(s,a){const o={fields:{[$1]:{stringValue:B1},[H1]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&zy(a)&&(a=Tf(a)),a&&(o.fields[z1]=a),{mapValue:o}}(r,e):t instanceof Du?ok(t,e):t instanceof Mu?lk(t,e):function(s,a){const o=ak(s,a),l=Bb(o)+Bb(s.Ie);return Bg(o)&&Bg(s.Ie)?sk(l):Ky(s.serializer,l)}(t,e)}function UV(t,e,r){return t instanceof Du?ok(t,e):t instanceof Mu?lk(t,e):r}function ak(t,e){return t instanceof Rh?function(i){return Bg(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class Ph extends Cf{}class Du extends Cf{constructor(e){super(),this.elements=e}}function ok(t,e){const r=uk(e);for(const i of t.elements)r.some(s=>Kr(s,i))||r.push(i);return{arrayValue:{values:r}}}class Mu extends Cf{constructor(e){super(),this.elements=e}}function lk(t,e){let r=uk(e);for(const i of t.elements)r=r.filter(s=>!Kr(s,i));return{arrayValue:{values:r}}}class Rh extends Cf{constructor(e,r){super(),this.serializer=e,this.Ie=r}}function Bb(t){return It(t.integerValue||t.doubleValue)}function uk(t){return Hy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function BV(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Du&&s instanceof Du||i instanceof Mu&&s instanceof Mu?xo(i.elements,s.elements,Kr):i instanceof Rh&&s instanceof Rh?Kr(i.Ie,s.Ie):i instanceof Ph&&s instanceof Ph}(t.transform,e.transform)}class $V{constructor(e,r){this.version=e,this.transformResults=r}}class Wr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Wr}static exists(e){return new Wr(void 0,e)}static updateTime(e){return new Wr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Af{}function ck(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hk(t.key,Wr.none()):new tc(t.key,t.data,Wr.none());{const r=t.data,i=Nn.empty();let s=new Ot(Xt.comparator);for(let a of e.fields)if(!s.has(a)){let o=r.field(a);o===null&&a.length>1&&(a=a.popLast(),o=r.field(a)),o===null?i.delete(a):i.set(a,o),s=s.add(a)}return new Cs(t.key,i,new Wn(s.toArray()),Wr.none())}}function zV(t,e,r){t instanceof tc?function(s,a,o){const l=s.value.clone(),u=zb(s.fieldTransforms,a,o.transformResults);l.setAll(u),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Cs?function(s,a,o){if(!Fd(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=zb(s.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(dk(s)),u.setAll(l),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,r):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function iu(t,e,r,i){return t instanceof tc?function(a,o,l,u){if(!Fd(a.precondition,o))return l;const c=a.value.clone(),h=Hb(a.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,r,i):t instanceof Cs?function(a,o,l,u){if(!Fd(a.precondition,o))return l;const c=Hb(a.fieldTransforms,u,o),h=o.data;return h.setAll(dk(a)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(f=>f.field))}(t,e,r,i):function(a,o,l){return Fd(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function HV(t,e){let r=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),a=ak(i.transform,s||null);a!=null&&(r===null&&(r=Nn.empty()),r.set(i.field,a))}return r||null}function $b(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&xo(i,s,(a,o)=>BV(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class tc extends Af{constructor(e,r,i,s=[]){super(),this.key=e,this.value=r,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Cs extends Af{constructor(e,r,i,s,a=[]){super(),this.key=e,this.data=r,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function dk(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const i=t.data.field(r);e.set(r,i)}}),e}function zb(t,e,r){const i=new Map;Je(t.length===r.length);for(let s=0;s<r.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);i.set(a.field,UV(o,l,r[s]))}return i}function Hb(t,e,r){const i=new Map;for(const s of t){const a=s.transform,o=r.data.field(s.field);i.set(s.field,FV(a,o,e))}return i}class hk extends Af{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WV extends Af{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e,r,i,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,r){const i=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&zV(a,e,i[s])}}applyToLocalView(e,r){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(r=iu(i,e,r,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(r=iu(i,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const i=ik();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=r.has(s.key)?null:l;const u=ck(o,l);u!==null&&i.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Ae.min())}),i}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Ve())}isEqual(e){return this.batchId===e.batchId&&xo(this.mutations,e.mutations,(r,i)=>$b(r,i))&&xo(this.baseMutations,e.baseMutations,(r,i)=>$b(r,i))}}class Yy{constructor(e,r,i,s){this.batch=e,this.commitVersion=r,this.mutationResults=i,this.docVersions=s}static from(e,r,i){Je(e.mutations.length===i.length);let s=function(){return MV}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,i[o].version);return new Yy(e,r,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,$e;function YV(t){switch(t){case te.OK:return Ce();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ce()}}function fk(t){if(t===void 0)return xi("GRPC error has no .code"),te.UNKNOWN;switch(t){case Ct.OK:return te.OK;case Ct.CANCELLED:return te.CANCELLED;case Ct.UNKNOWN:return te.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return te.INTERNAL;case Ct.UNAVAILABLE:return te.UNAVAILABLE;case Ct.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Ct.NOT_FOUND:return te.NOT_FOUND;case Ct.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Ct.ABORTED:return te.ABORTED;case Ct.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Ct.DATA_LOSS:return te.DATA_LOSS;default:return Ce()}}($e=Ct||(Ct={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV=new ls([4294967295,4294967295],0);function Wb(t){const e=XV().encode(t),r=new P1;return r.update(e),new Uint8Array(r.digest())}function qb(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new ls([r,i],0),new ls([s,a],0)]}class Xy{constructor(e,r,i){if(this.bitmap=e,this.padding=r,this.hashCount=i,r<0||r>=8)throw new Bl(`Invalid padding: ${r}`);if(i<0)throw new Bl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Bl(`Invalid hash count: ${i}`);if(e.length===0&&r!==0)throw new Bl(`Invalid padding when bitmap length is 0: ${r}`);this.Ee=8*e.length-r,this.de=ls.fromNumber(this.Ee)}Ae(e,r,i){let s=e.add(r.multiply(ls.fromNumber(i)));return s.compare(QV)===1&&(s=new ls([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const r=Wb(e),[i,s]=qb(r);for(let a=0;a<this.hashCount;a++){const o=this.Ae(i,s,a);if(!this.Re(o))return!1}return!0}static create(e,r,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Xy(a,s,r);return i.forEach(l=>o.insert(l)),o}insert(e){if(this.Ee===0)return;const r=Wb(e),[i,s]=qb(r);for(let a=0;a<this.hashCount;a++){const o=this.Ae(i,s,a);this.Ve(o)}}Ve(e){const r=Math.floor(e/8),i=e%8;this.bitmap[r]|=1<<i}}class Bl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,r,i,s,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,i){const s=new Map;return s.set(e,nc.createSynthesizedTargetChangeForCurrentChange(e,r,i)),new Pf(Ae.min(),s,new bt(Fe),Ei(),Ve())}}class nc{constructor(e,r,i,s,a){this.resumeToken=e,this.current=r,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,i){return new nc(i,r,Ve(),Ve(),Ve())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,r,i,s){this.me=e,this.removedTargetIds=r,this.key=i,this.fe=s}}class pk{constructor(e,r){this.targetId=e,this.ge=r}}class mk{constructor(e,r,i=tn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=i,this.cause=s}}class Gb{constructor(){this.pe=0,this.ye=Kb(),this.we=tn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Ve(),r=Ve(),i=Ve();return this.ye.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:i=i.add(s);break;default:Ce()}}),new nc(this.we,this.Se,e,r,i)}Me(){this.be=!1,this.ye=Kb()}xe(e,r){this.be=!0,this.ye=this.ye.insert(e,r)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Je(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class JV{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ei(),this.$e=od(),this.Ke=od(),this.Ue=new bt(Fe)}We(e){for(const r of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(r,e.fe):this.ze(r,e.key,e.fe);for(const r of e.removedTargetIds)this.ze(r,e.key,e.fe)}je(e){this.forEachTarget(e,r=>{const i=this.He(r);switch(e.state){case 0:this.Je(r)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(r);break;case 3:this.Je(r)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(r)&&(this.Ye(r),i.Ce(e.resumeToken));break;default:Ce()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.qe.forEach((i,s)=>{this.Je(s)&&r(s)})}Ze(e){const r=e.targetId,i=e.ge.count,s=this.Xe(r);if(s){const a=s.target;if(zg(a))if(i===0){const o=new Se(a.path);this.ze(r,o,hn.newNoDocument(o,Ae.min()))}else Je(i===1);else{const o=this.et(r);if(o!==i){const l=this.tt(e),u=l?this.nt(l,e,o):1;if(u!==0){this.Ye(r);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(r,c)}}}}}tt(e){const r=e.ge.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=r;let o,l;try{o=ys(i).toUint8Array()}catch(u){if(u instanceof U1)return bo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Xy(o,s,a)}catch(u){return bo(u instanceof Bl?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ee===0?null:l}nt(e,r,i){return r.ge.count===i-this.st(e,r.targetId)?0:2}st(e,r){const i=this.ke.getRemoteKeysForTarget(r);let s=0;return i.forEach(a=>{const o=this.ke.it(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.ze(r,a,null),s++)}),s}ot(e){const r=new Map;this.qe.forEach((a,o)=>{const l=this.Xe(o);if(l){if(a.current&&zg(l.target)){const u=new Se(l.target.path);this._t(u).has(o)||this.ut(o,u)||this.ze(o,u,hn.newNoDocument(u,e))}a.ve&&(r.set(o,a.Fe()),a.Me())}});let i=Ve();this.Ke.forEach((a,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Xe(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(a))}),this.Qe.forEach((a,o)=>o.setReadTime(e));const s=new Pf(e,r,this.Ue,this.Qe,i);return this.Qe=Ei(),this.$e=od(),this.Ke=od(),this.Ue=new bt(Fe),s}Ge(e,r){if(!this.Je(e))return;const i=this.ut(e,r.key)?2:0;this.He(e).xe(r.key,i),this.Qe=this.Qe.insert(r.key,r),this.$e=this.$e.insert(r.key,this._t(r.key).add(e)),this.Ke=this.Ke.insert(r.key,this.ct(r.key).add(e))}ze(e,r,i){if(!this.Je(e))return;const s=this.He(e);this.ut(e,r)?s.xe(r,1):s.Oe(r),this.Ke=this.Ke.insert(r,this.ct(r).delete(e)),this.Ke=this.Ke.insert(r,this.ct(r).add(e)),i&&(this.Qe=this.Qe.insert(r,i))}removeTarget(e){this.qe.delete(e)}et(e){const r=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let r=this.qe.get(e);return r||(r=new Gb,this.qe.set(e,r)),r}ct(e){let r=this.Ke.get(e);return r||(r=new Ot(Fe),this.Ke=this.Ke.insert(e,r)),r}_t(e){let r=this.$e.get(e);return r||(r=new Ot(Fe),this.$e=this.$e.insert(e,r)),r}Je(e){const r=this.Xe(e)!==null;return r||me("WatchChangeAggregator","Detected inactive target",e),r}Xe(e){const r=this.qe.get(e);return r&&r.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Gb),this.ke.getRemoteKeysForTarget(e).forEach(r=>{this.ze(e,r,null)})}ut(e,r){return this.ke.getRemoteKeysForTarget(e).has(r)}}function od(){return new bt(Se.comparator)}function Kb(){return new bt(Se.comparator)}const ZV={asc:"ASCENDING",desc:"DESCENDING"},eF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tF={and:"AND",or:"OR"};class nF{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Wg(t,e){return t.useProto3Json||Ef(e)?e:{value:e}}function Nh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rF(t,e){return Nh(t,e.toTimestamp())}function qr(t){return Je(!!t),Ae.fromTimestamp(function(r){const i=vs(r);return new Lt(i.seconds,i.nanos)}(t))}function Qy(t,e){return qg(t,e).canonicalString()}function qg(t,e){const r=function(s){return new pt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function vk(t){const e=pt.fromString(t);return Je(xk(e)),e}function Gg(t,e){return Qy(t.databaseId,e.path)}function tm(t,e){const r=vk(e);if(r.get(1)!==t.databaseId.projectId)throw new Ee(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Ee(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Se(_k(r))}function yk(t,e){return Qy(t.databaseId,e)}function iF(t){const e=vk(t);return e.length===4?pt.emptyPath():_k(e)}function Kg(t){return new pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _k(t){return Je(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Yb(t,e,r){return{name:Gg(t,e),fields:r.value.mapValue.fields}}function sF(t,e){let r;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ce()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(c,h){return c.useProto3Json?(Je(h===void 0||typeof h=="string"),tn.fromBase64String(h||"")):(Je(h===void 0||h instanceof Buffer||h instanceof Uint8Array),tn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const h=c.code===void 0?te.UNKNOWN:fk(c.code);return new Ee(h,c.message||"")}(o);r=new mk(i,s,a,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=tm(t,i.document.name),a=qr(i.document.updateTime),o=i.document.createTime?qr(i.document.createTime):Ae.min(),l=new Nn({mapValue:{fields:i.document.fields}}),u=hn.newFoundDocument(s,a,o,l),c=i.targetIds||[],h=i.removedTargetIds||[];r=new Ud(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=tm(t,i.document),a=i.readTime?qr(i.readTime):Ae.min(),o=hn.newNoDocument(s,a),l=i.removedTargetIds||[];r=new Ud([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=tm(t,i.document),a=i.removedTargetIds||[];r=new Ud([],a,s,null)}else{if(!("filter"in e))return Ce();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,o=new KV(s,a),l=i.targetId;r=new pk(l,o)}}return r}function aF(t,e){let r;if(e instanceof tc)r={update:Yb(t,e.key,e.value)};else if(e instanceof hk)r={delete:Gg(t,e.key)};else if(e instanceof Cs)r={update:Yb(t,e.key,e.data),updateMask:mF(e.fieldMask)};else{if(!(e instanceof WV))return Ce();r={verify:Gg(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(i=>function(a,o){const l=o.transform;if(l instanceof Ph)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Du)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Mu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Rh)return{fieldPath:o.field.canonicalString(),increment:l.Ie};throw Ce()}(0,i))),e.precondition.isNone||(r.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:rF(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ce()}(t,e.precondition)),r}function oF(t,e){return t&&t.length>0?(Je(e!==void 0),t.map(r=>function(s,a){let o=s.updateTime?qr(s.updateTime):qr(a);return o.isEqual(Ae.min())&&(o=qr(a)),new $V(o,s.transformResults||[])}(r,e))):[]}function lF(t,e){return{documents:[yk(t,e.path)]}}function uF(t,e){const r={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),r.structuredQuery.from=[{collectionId:i.lastSegment()}]),r.parent=yk(t,s);const a=function(c){if(c.length!==0)return bk(Yr.create(c,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:ja(p.field),direction:hF(p.dir)}}(h))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=Wg(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ht:r,parent:s}}function cF(t){let e=iF(t.parent);const r=t.structuredQuery,i=r.from?r.from.length:0;let s=null;if(i>0){Je(i===1);const h=r.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let a=[];r.where&&(a=function(f){const p=wk(f);return p instanceof Yr&&X1(p)?p.getFilters():[p]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(p=>function(T){return new Ah(Va(T.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(p))}(r.orderBy));let l=null;r.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,Ef(p)?null:p}(r.limit));let u=null;r.startAt&&(u=function(f){const p=!!f.before,g=f.values||[];return new Ch(g,p)}(r.startAt));let c=null;return r.endAt&&(c=function(f){const p=!f.before,g=f.values||[];return new Ch(g,p)}(r.endAt)),kV(e,s,o,a,l,"F",u,c)}function dF(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function wk(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const i=Va(r.unaryFilter.field);return Dt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Va(r.unaryFilter.field);return Dt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Va(r.unaryFilter.field);return Dt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Va(r.unaryFilter.field);return Dt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ce()}}(t):t.fieldFilter!==void 0?function(r){return Dt.create(Va(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ce()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Yr.create(r.compositeFilter.filters.map(i=>wk(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ce()}}(r.compositeFilter.op))}(t):Ce()}function hF(t){return ZV[t]}function fF(t){return eF[t]}function pF(t){return tF[t]}function ja(t){return{fieldPath:t.canonicalString()}}function Va(t){return Xt.fromServerFormat(t.fieldPath)}function bk(t){return t instanceof Dt?function(r){if(r.op==="=="){if(Ob(r.value))return{unaryFilter:{field:ja(r.field),op:"IS_NAN"}};if(Lb(r.value))return{unaryFilter:{field:ja(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Ob(r.value))return{unaryFilter:{field:ja(r.field),op:"IS_NOT_NAN"}};if(Lb(r.value))return{unaryFilter:{field:ja(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ja(r.field),op:fF(r.op),value:r.value}}}(t):t instanceof Yr?function(r){const i=r.getFilters().map(s=>bk(s));return i.length===1?i[0]:{compositeFilter:{op:pF(r.op),filters:i}}}(t):Ce()}function mF(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function xk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e,r,i,s,a=Ae.min(),o=Ae.min(),l=tn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Yi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Yi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e){this.Tt=e}}function vF(t){const e=cF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Hg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(){this.Tn=new _F}addToCollectionParentIndex(e,r){return this.Tn.add(r),Z.resolve()}getCollectionParents(e,r){return Z.resolve(this.Tn.getEntries(r))}addFieldIndex(e,r){return Z.resolve()}deleteFieldIndex(e,r){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,r){return Z.resolve()}getDocumentsMatchingTarget(e,r){return Z.resolve(null)}getIndexType(e,r){return Z.resolve(0)}getFieldIndexes(e,r){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,r){return Z.resolve(gs.min())}getMinOffsetFromCollectionGroup(e,r){return Z.resolve(gs.min())}updateCollectionGroup(e,r,i){return Z.resolve()}updateIndexEntries(e,r){return Z.resolve()}}class _F{constructor(){this.index={}}add(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r]||new Ot(pt.comparator),a=!s.has(i);return this.index[r]=s.add(i),a}has(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Ot(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ek=41943040;class Pn{static withCacheSize(e){return new Pn(e,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn.DEFAULT_COLLECTION_PERCENTILE=10,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Pn.DEFAULT=new Pn(Ek,Pn.DEFAULT_COLLECTION_PERCENTILE,Pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Pn.DISABLED=new Pn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new So(0)}static Un(){return new So(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="LruGarbageCollector",wF=1048576;function Jb([t,e],[r,i]){const s=Fe(t,r);return s===0?Fe(e,i):s}class bF{constructor(e){this.Hn=e,this.buffer=new Ot(Jb),this.Jn=0}Yn(){return++this.Jn}Zn(e){const r=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(r);else{const i=this.buffer.last();Jb(r,i)<0&&(this.buffer=this.buffer.delete(i).add(r))}}get maxValue(){return this.buffer.last()[0]}}class xF{constructor(e,r,i){this.garbageCollector=e,this.asyncQueue=r,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){me(Qb,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Go(r)?me(Qb,"Ignoring IndexedDB error during garbage collection: ",r):await qo(r)}await this.er(3e5)})}}class EF{constructor(e,r){this.tr=e,this.params=r}calculateTargetCount(e,r){return this.tr.nr(e).next(i=>Math.floor(r/100*i))}nthSequenceNumber(e,r){if(r===0)return Z.resolve(xf.ae);const i=new bF(r);return this.tr.forEachTarget(e,s=>i.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>i.Zn(s))).next(()=>i.maxValue)}removeTargets(e,r,i){return this.tr.removeTargets(e,r,i)}removeOrphanedDocuments(e,r){return this.tr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(me("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(Xb)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(me("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xb):this.ir(e,r))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,r){let i,s,a,o,l,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(me("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(i=f,l=Date.now(),this.removeTargets(e,i,r))).next(f=>(a=f,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(f=>(c=Date.now(),La()<=je.DEBUG&&me("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${a} targets in `+(u-l)+`ms
	Removed ${f} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:f})))}}function TF(t,e){return new EF(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SF{constructor(){this.changes=new va(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const i=this.changes.get(r);return i!==void 0?Z.resolve(i):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e,r,i,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,r){let i=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(i!==null&&iu(i.mutation,s,Wn.empty(),Lt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.getLocalViewOfDocuments(e,i,Ve()).next(()=>i))}getLocalViewOfDocuments(e,r,i=Ve()){const s=Qs();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,i).next(a=>{let o=Ul();return a.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const i=Qs();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,Ve()))}populateOverlays(e,r,i){const s=[];return i.forEach(a=>{r.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,i,s){let a=Ei();const o=ru(),l=function(){return ru()}();return r.forEach((u,c)=>{const h=i.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Cs)?a=a.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),iu(h.mutation,c,h.mutation.getFieldMask(),Lt.now())):o.set(c.key,Wn.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((c,h)=>o.set(c,h)),r.forEach((c,h)=>{var f;return l.set(c,new IF(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,r){const i=ru();let s=new bt((o,l)=>o-l),a=Ve();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=r.get(u);if(c===null)return;let h=i.get(u)||Wn.empty();h=l.applyToLocalView(c,h),i.set(u,h);const f=(s.get(l.batchId)||Ve()).add(u);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,h=u.value,f=ik();h.forEach(p=>{if(!a.has(p)){const g=ck(r.get(p),i.get(p));g!==null&&f.set(p,g),a=a.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return Z.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,r,i,s){return function(o){return Se.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):CV(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,i,s):this.getDocumentsMatchingCollectionQuery(e,r,i,s)}getNextDocuments(e,r,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,i,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,i.largestBatchId,s-a.size):Z.resolve(Qs());let l=Au,u=a;return o.next(c=>Z.forEach(c,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),a.get(h)?Z.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,c,a)).next(()=>this.computeViews(e,u,c,Ve())).next(h=>({batchId:l,changes:rk(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Se(r)).next(i=>{let s=Ul();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,i,s){const a=r.collectionGroup;let o=Ul();return this.indexManager.getCollectionParents(e,a).next(l=>Z.forEach(l,u=>{const c=function(f,p){return new Sf(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,c,i,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,i.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,i,a,s))).next(o=>{a.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,hn.newInvalidDocument(h)))});let l=Ul();return o.forEach((u,c)=>{const h=a.get(u);h!==void 0&&iu(h.mutation,c,Wn.empty(),Lt.now()),kf(r,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,r){return Z.resolve(this.dr.get(r))}saveBundleMetadata(e,r){return this.dr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:qr(s.createTime)}}(r)),Z.resolve()}getNamedQuery(e,r){return Z.resolve(this.Ar.get(r))}saveNamedQuery(e,r){return this.Ar.set(r.name,function(s){return{name:s.name,query:vF(s.bundledQuery),readTime:qr(s.readTime)}}(r)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(){this.overlays=new bt(Se.comparator),this.Rr=new Map}getOverlay(e,r){return Z.resolve(this.overlays.get(r))}getOverlays(e,r){const i=Qs();return Z.forEach(r,s=>this.getOverlay(e,s).next(a=>{a!==null&&i.set(s,a)})).next(()=>i)}saveOverlays(e,r,i){return i.forEach((s,a)=>{this.Et(e,r,a)}),Z.resolve()}removeOverlaysForBatchId(e,r,i){const s=this.Rr.get(i);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Rr.delete(i)),Z.resolve()}getOverlaysForCollection(e,r,i){const s=Qs(),a=r.length+1,o=new Se(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===a&&u.largestBatchId>i&&s.set(u.getKey(),u)}return Z.resolve(s)}getOverlaysForCollectionGroup(e,r,i,s){let a=new bt((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>i){let h=a.get(c.largestBatchId);h===null&&(h=Qs(),a=a.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const l=Qs(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>l.set(c,h)),!(l.size()>=s)););return Z.resolve(l)}Et(e,r,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.Rr.get(s.largestBatchId).delete(i.key);this.Rr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new GV(r,i));let a=this.Rr.get(r);a===void 0&&(a=Ve(),this.Rr.set(r,a)),this.Rr.set(r,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(){this.Vr=new Ot(Ft.mr),this.gr=new Ot(Ft.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,r){const i=new Ft(e,r);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,r){e.forEach(i=>this.addReference(i,r))}removeReference(e,r){this.wr(new Ft(e,r))}Sr(e,r){e.forEach(i=>this.removeReference(i,r))}br(e){const r=new Se(new pt([])),i=new Ft(r,e),s=new Ft(r,e+1),a=[];return this.gr.forEachInRange([i,s],o=>{this.wr(o),a.push(o.key)}),a}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const r=new Se(new pt([])),i=new Ft(r,e),s=new Ft(r,e+1);let a=Ve();return this.gr.forEachInRange([i,s],o=>{a=a.add(o.key)}),a}containsKey(e){const r=new Ft(e,0),i=this.Vr.firstAfterOrEqual(r);return i!==null&&e.isEqual(i.key)}}class Ft{constructor(e,r){this.key=e,this.Cr=r}static mr(e,r){return Se.comparator(e.key,r.key)||Fe(e.Cr,r.Cr)}static pr(e,r){return Fe(e.Cr,r.Cr)||Se.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Fr=1,this.Mr=new Ot(Ft.mr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,i,s){const a=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new qV(a,r,i,s);this.mutationQueue.push(o);for(const l of s)this.Mr=this.Mr.add(new Ft(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Z.resolve(o)}lookupMutationBatch(e,r){return Z.resolve(this.Or(r))}getNextMutationBatchAfterBatchId(e,r){const i=r+1,s=this.Nr(i),a=s<0?0:s;return Z.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?$y:this.Fr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const i=new Ft(r,0),s=new Ft(r,Number.POSITIVE_INFINITY),a=[];return this.Mr.forEachInRange([i,s],o=>{const l=this.Or(o.Cr);a.push(l)}),Z.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let i=new Ot(Fe);return r.forEach(s=>{const a=new Ft(s,0),o=new Ft(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([a,o],l=>{i=i.add(l.Cr)})}),Z.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,r){const i=r.path,s=i.length+1;let a=i;Se.isDocumentKey(a)||(a=a.child(""));const o=new Ft(new Se(a),0);let l=new Ot(Fe);return this.Mr.forEachWhile(u=>{const c=u.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(l=l.add(u.Cr)),!0)},o),Z.resolve(this.Br(l))}Br(e){const r=[];return e.forEach(i=>{const s=this.Or(i);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Je(this.Lr(r.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return Z.forEach(r.mutations,s=>{const a=new Ft(s.key,r.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,r){const i=new Ft(r,0),s=this.Mr.firstAfterOrEqual(i);return Z.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}Lr(e,r){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const r=this.Nr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(e){this.kr=e,this.docs=function(){return new bt(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const i=r.key,s=this.docs.get(i),a=s?s.size:0,o=this.kr(r);return this.docs=this.docs.insert(i,{document:r.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const i=this.docs.get(r);return Z.resolve(i?i.document.mutableCopy():hn.newInvalidDocument(r))}getEntries(e,r){let i=Ei();return r.forEach(s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():hn.newInvalidDocument(s))}),Z.resolve(i)}getDocumentsMatchingQuery(e,r,i,s){let a=Ei();const o=r.path,l=new Se(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||sV(iV(h),i)<=0||(s.has(h.key)||kf(r,h))&&(a=a.insert(h.key,h.mutableCopy()))}return Z.resolve(a)}getAllFromCollectionGroup(e,r,i,s){Ce()}qr(e,r){return Z.forEach(this.docs,i=>r(i))}newChangeBuffer(e){return new DF(this)}getSize(e){return Z.resolve(this.size)}}class DF extends SF{constructor(e){super(),this.Ir=e}applyChanges(e){const r=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?r.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(i)}),Z.waitFor(r)}getFromCache(e,r){return this.Ir.getEntry(e,r)}getAllFromCache(e,r){return this.Ir.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e){this.persistence=e,this.Qr=new va(r=>Wy(r),qy),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Jy,this.targetCount=0,this.Ur=So.Kn()}forEachTarget(e,r){return this.Qr.forEach((i,s)=>r(s)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,r,i){return i&&(this.lastRemoteSnapshotVersion=i),r>this.$r&&(this.$r=r),Z.resolve()}zn(e){this.Qr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Ur=new So(r),this.highestTargetId=r),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,r){return this.zn(r),this.targetCount+=1,Z.resolve()}updateTargetData(e,r){return this.zn(r),Z.resolve()}removeTargetData(e,r){return this.Qr.delete(r.target),this.Kr.br(r.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,r,i){let s=0;const a=[];return this.Qr.forEach((o,l)=>{l.sequenceNumber<=r&&i.get(l.targetId)===null&&(this.Qr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),Z.waitFor(a).next(()=>s)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,r){const i=this.Qr.get(r)||null;return Z.resolve(i)}addMatchingKeys(e,r,i){return this.Kr.yr(r,i),Z.resolve()}removeMatchingKeys(e,r,i){this.Kr.Sr(r,i);const s=this.persistence.referenceDelegate,a=[];return s&&r.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),Z.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this.Kr.br(r),Z.resolve()}getMatchingKeysForTargetId(e,r){const i=this.Kr.vr(r);return Z.resolve(i)}containsKey(e,r){return Z.resolve(this.Kr.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,r){this.Wr={},this.overlays={},this.Gr=new xf(0),this.zr=!1,this.zr=!0,this.jr=new PF,this.referenceDelegate=e(this),this.Hr=new MF(this),this.indexManager=new yF,this.remoteDocumentCache=function(s){return new NF(s)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new gF(r),this.Yr=new CF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new AF,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let i=this.Wr[e.toKey()];return i||(i=new RF(r,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,r,i){me("MemoryPersistence","Starting transaction:",e);const s=new LF(this.Gr.next());return this.referenceDelegate.Zr(),i(s).next(a=>this.referenceDelegate.Xr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}ei(e,r){return Z.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,r)))}}class LF extends oV{constructor(e){super(),this.currentSequenceNumber=e}}class Zy{constructor(e){this.persistence=e,this.ti=new Jy,this.ni=null}static ri(e){return new Zy(e)}get ii(){if(this.ni)return this.ni;throw Ce()}addReference(e,r,i){return this.ti.addReference(i,r),this.ii.delete(i.toString()),Z.resolve()}removeReference(e,r,i){return this.ti.removeReference(i,r),this.ii.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,r){return this.ii.add(r.toString()),Z.resolve()}removeTarget(e,r){this.ti.br(r.targetId).forEach(s=>this.ii.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(a=>this.ii.add(a.toString()))}).next(()=>i.removeTargetData(e,r))}Zr(){this.ni=new Set}Xr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.ii,i=>{const s=Se.fromPath(i);return this.si(e,s).next(a=>{a||r.removeEntry(s,Ae.min())})}).next(()=>(this.ni=null,r.apply(e)))}updateLimboDocument(e,r){return this.si(e,r).next(i=>{i?this.ii.delete(r.toString()):this.ii.add(r.toString())})}Jr(e){return 0}si(e,r){return Z.or([()=>Z.resolve(this.ti.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.ei(e,r)])}}class Dh{constructor(e,r){this.persistence=e,this.oi=new va(i=>cV(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=TF(this,r)}static ri(e,r){return new Dh(e,r)}Zr(){}Xr(e){return Z.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}nr(e){const r=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>r.next(s=>i+s))}sr(e){let r=0;return this.rr(e,i=>{r++}).next(()=>r)}rr(e,r){return Z.forEach(this.oi,(i,s)=>this.ar(e,i,s).next(a=>a?Z.resolve():r(s)))}removeTargets(e,r,i){return this.persistence.getTargetCache().removeTargets(e,r,i)}removeOrphanedDocuments(e,r){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.qr(e,o=>this.ar(e,o,r).next(l=>{l||(i++,a.removeEntry(o,Ae.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,r){return this.oi.set(r,e.currentSequenceNumber),Z.resolve()}removeTarget(e,r){const i=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,r,i){return this.oi.set(i,e.currentSequenceNumber),Z.resolve()}removeReference(e,r,i){return this.oi.set(i,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,r){return this.oi.set(r,e.currentSequenceNumber),Z.resolve()}Jr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=jd(e.data.value)),r}ar(e,r,i){return Z.or([()=>this.persistence.ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.oi.get(r);return Z.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e,r,i,s){this.targetId=e,this.fromCache=r,this.Hi=i,this.Ji=s}static Yi(e,r){let i=Ve(),s=Ve();for(const a of r.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new e_(e,r.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return gM()?8:lV(mn())>0?6:4}()}initialize(e,r){this.ns=e,this.indexManager=r,this.Zi=!0}getDocumentsMatchingQuery(e,r,i,s){const a={result:null};return this.rs(e,r).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ss(e,r,s,i).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new OF;return this._s(e,r,o).next(l=>{if(a.result=l,this.Xi)return this.us(e,r,o,l.size)})}).next(()=>a.result)}us(e,r,i,s){return i.documentReadCount<this.es?(La()<=je.DEBUG&&me("QueryEngine","SDK will not create cache indexes for query:",Oa(r),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Z.resolve()):(La()<=je.DEBUG&&me("QueryEngine","Query:",Oa(r),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ts*s?(La()<=je.DEBUG&&me("QueryEngine","The SDK decides to create cache indexes for query:",Oa(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Hr(r))):Z.resolve())}rs(e,r){if(Ub(r))return Z.resolve(null);let i=Hr(r);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Hg(r,null,"F"),i=Hr(r)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const o=Ve(...a);return this.ns.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const c=this.cs(r,l);return this.ls(r,c,o,u.readTime)?this.rs(e,Hg(r,null,"F")):this.hs(e,c,r,u)}))})))}ss(e,r,i,s){return Ub(r)||s.isEqual(Ae.min())?Z.resolve(null):this.ns.getDocuments(e,i).next(a=>{const o=this.cs(r,a);return this.ls(r,o,i,s)?Z.resolve(null):(La()<=je.DEBUG&&me("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Oa(r)),this.hs(e,o,r,rV(s,Au)).next(l=>l))})}cs(e,r){let i=new Ot(tk(e));return r.forEach((s,a)=>{kf(e,a)&&(i=i.add(a))}),i}ls(e,r,i,s){if(e.limit===null)return!1;if(i.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}_s(e,r,i){return La()<=je.DEBUG&&me("QueryEngine","Using full collection scan to execute query:",Oa(r)),this.ns.getDocumentsMatchingQuery(e,r,gs.min(),i)}hs(e,r,i,s){return this.ns.getDocumentsMatchingQuery(e,i,s).next(a=>(r.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="LocalStore",VF=3e8;class FF{constructor(e,r,i,s){this.persistence=e,this.Ps=r,this.serializer=s,this.Ts=new bt(Fe),this.Is=new va(a=>Wy(a),qy),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kF(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ts))}}function UF(t,e,r,i){return new FF(t,e,r,i)}async function Sk(t,e){const r=Pe(t);return await r.persistence.runTransaction("Handle user change","readonly",i=>{let s;return r.mutationQueue.getAllMutationBatches(i).next(a=>(s=a,r.As(e),r.mutationQueue.getAllMutationBatches(i))).next(a=>{const o=[],l=[];let u=Ve();for(const c of s){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of a){l.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return r.localDocuments.getDocuments(i,u).next(c=>({Rs:c,removedBatchIds:o,addedBatchIds:l}))})})}function BF(t,e){const r=Pe(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),a=r.ds.newChangeBuffer({trackRemovals:!0});return function(l,u,c,h){const f=c.batch,p=f.keys();let g=Z.resolve();return p.forEach(T=>{g=g.next(()=>h.getEntry(u,T)).next(N=>{const A=c.docVersions.get(T);Je(A!==null),N.version.compareTo(A)<0&&(f.applyToRemoteDocument(N,c),N.isValidDocument()&&(N.setReadTime(c.commitVersion),h.addEntry(N)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(u,f))}(r,i,e,a).next(()=>a.apply(i)).next(()=>r.mutationQueue.performConsistencyCheck(i)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=Ve();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>r.localDocuments.getDocuments(i,s))})}function Ik(t){const e=Pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Hr.getLastRemoteSnapshotVersion(r))}function $F(t,e){const r=Pe(t),i=e.snapshotVersion;let s=r.Ts;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=r.ds.newChangeBuffer({trackRemovals:!0});s=r.Ts;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(r.Hr.removeMatchingKeys(a,h.removedDocuments,f).next(()=>r.Hr.addMatchingKeys(a,h.addedDocuments,f)));let g=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(tn.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,i)),s=s.insert(f,g),function(N,A,b){return N.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=VF?!0:b.addedDocuments.size+b.modifiedDocuments.size+b.removedDocuments.size>0}(p,g,h)&&l.push(r.Hr.updateTargetData(a,g))});let u=Ei(),c=Ve();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(a,h))}),l.push(zF(a,o,e.documentUpdates).next(h=>{u=h.Vs,c=h.fs})),!i.isEqual(Ae.min())){const h=r.Hr.getLastRemoteSnapshotVersion(a).next(f=>r.Hr.setTargetsMetadata(a,a.currentSequenceNumber,i));l.push(h)}return Z.waitFor(l).next(()=>o.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,u,c)).next(()=>u)}).then(a=>(r.Ts=s,a))}function zF(t,e,r){let i=Ve(),s=Ve();return r.forEach(a=>i=i.add(a)),e.getEntries(t,i).next(a=>{let o=Ei();return r.forEach((l,u)=>{const c=a.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Ae.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):me(t_,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Vs:o,fs:s}})}function HF(t,e){const r=Pe(t);return r.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=$y),r.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function WF(t,e){const r=Pe(t);return r.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return r.Hr.getTargetData(i,e).next(a=>a?(s=a,Z.resolve(s)):r.Hr.allocateTargetId(i).next(o=>(s=new Yi(e,o,"TargetPurposeListen",i.currentSequenceNumber),r.Hr.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=r.Ts.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Ts=r.Ts.insert(i.targetId,i),r.Is.set(e,i.targetId)),i})}async function Yg(t,e,r){const i=Pe(t),s=i.Ts.get(e),a=r?"readwrite":"readwrite-primary";try{r||await i.persistence.runTransaction("Release target",a,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Go(o))throw o;me(t_,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ts=i.Ts.remove(e),i.Is.delete(s.target)}function Zb(t,e,r){const i=Pe(t);let s=Ae.min(),a=Ve();return i.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const f=Pe(u),p=f.Is.get(h);return p!==void 0?Z.resolve(f.Ts.get(p)):f.Hr.getTargetData(c,h)}(i,o,Hr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(o,l.targetId).next(u=>{a=u})}).next(()=>i.Ps.getDocumentsMatchingQuery(o,e,r?s:Ae.min(),r?a:Ve())).next(l=>(qF(i,PV(e),l),{documents:l,gs:a})))}function qF(t,e,r){let i=t.Es.get(e)||Ae.min();r.forEach((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),t.Es.set(e,i)}class ex{constructor(){this.activeTargetIds=jV()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GF{constructor(){this.ho=new ex,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,i){}addLocalQueryTarget(e,r=!0){return r&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,r,i){this.Po[e]=r}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new ex,Promise.resolve()}handleUserChange(e,r,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="ConnectivityMonitor";class nx{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){me(tx,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){me(tx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ld=null;function Xg(){return ld===null?ld=function(){return 268435456+Math.round(2147483648*Math.random())}():ld++,"0x"+ld.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="RestConnection",YF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class XF{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=r+"://"+e.host,this.yo=`projects/${i}/databases/${s}`,this.wo=this.databaseId.database===Ih?`project_id=${i}`:`project_id=${i}&database_id=${s}`}So(e,r,i,s,a){const o=Xg(),l=this.bo(e,r.toUriEncodedString());me(nm,`Sending RPC '${e}' ${o}:`,l,i);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,s,a),this.vo(e,l,u,i).then(c=>(me(nm,`Received RPC '${e}' ${o}: `,c),c),c=>{throw bo(nm,`RPC '${e}' ${o} failed with error: `,c,"url: ",l,"request:",i),c})}Co(e,r,i,s,a,o){return this.So(e,r,i,s,a)}Do(e,r,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Wo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>e[a]=s),i&&i.headers.forEach((s,a)=>e[a]=s)}bo(e,r){const i=YF[e];return`${this.po}/v1/${r}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class JF extends XF{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,r,i,s){const a=Xg();return new Promise((o,l)=>{const u=new R1;u.setWithCredentials(!0),u.listenOnce(N1.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Od.NO_ERROR:const h=u.getResponseJson();me(un,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),o(h);break;case Od.TIMEOUT:me(un,`RPC '${e}' ${a} timed out`),l(new Ee(te.DEADLINE_EXCEEDED,"Request time out"));break;case Od.HTTP_ERROR:const f=u.getStatus();if(me(un,`RPC '${e}' ${a} failed with status:`,f,"response text:",u.getResponseText()),f>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const T=function(A){const b=A.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(b)>=0?b:te.UNKNOWN}(g.status);l(new Ee(T,g.message))}else l(new Ee(te.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Ee(te.UNAVAILABLE,"Connection failed."));break;default:Ce()}}finally{me(un,`RPC '${e}' ${a} completed.`)}});const c=JSON.stringify(s);me(un,`RPC '${e}' ${a} sending request:`,s),u.send(r,"POST",c,i,15)})}Wo(e,r,i){const s=Xg(),a=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=L1(),l=M1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,r,i),u.encodeInitMessageHeaders=!0;const h=a.join("");me(un,`Creating RPC '${e}' stream ${s}: ${h}`,u);const f=o.createWebChannel(h,u);let p=!1,g=!1;const T=new QF({Fo:A=>{g?me(un,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(p||(me(un,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),me(un,`RPC '${e}' stream ${s} sending:`,A),f.send(A))},Mo:()=>f.close()}),N=(A,b,x)=>{A.listen(b,w=>{try{x(w)}catch(R){setTimeout(()=>{throw R},0)}})};return N(f,Fl.EventType.OPEN,()=>{g||(me(un,`RPC '${e}' stream ${s} transport opened.`),T.Qo())}),N(f,Fl.EventType.CLOSE,()=>{g||(g=!0,me(un,`RPC '${e}' stream ${s} transport closed`),T.Ko())}),N(f,Fl.EventType.ERROR,A=>{g||(g=!0,bo(un,`RPC '${e}' stream ${s} transport errored:`,A),T.Ko(new Ee(te.UNAVAILABLE,"The operation could not be completed")))}),N(f,Fl.EventType.MESSAGE,A=>{var b;if(!g){const x=A.data[0];Je(!!x);const w=x,R=(w==null?void 0:w.error)||((b=w[0])===null||b===void 0?void 0:b.error);if(R){me(un,`RPC '${e}' stream ${s} received error:`,R);const j=R.status;let V=function(y){const _=Ct[y];if(_!==void 0)return fk(_)}(j),C=R.message;V===void 0&&(V=te.INTERNAL,C="Unknown error status: "+j+" with message "+R.message),g=!0,T.Ko(new Ee(V,C)),f.close()}else me(un,`RPC '${e}' stream ${s} received:`,x),T.Uo(x)}}),N(l,D1.STAT_EVENT,A=>{A.stat===Fg.PROXY?me(un,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Fg.NOPROXY&&me(un,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.$o()},0),T}}function rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(t){return new nF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,r,i=1e3,s=1.5,a=6e4){this.Ti=e,this.timerId=r,this.Go=i,this.zo=s,this.jo=a,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const r=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),s=Math.max(0,r-i);s>0&&me("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${r} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="PersistentStream";class Ck{constructor(e,r,i,s,a,o,l,u){this.Ti=e,this.n_=i,this.r_=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new kk(e,r)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,r){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():r&&r.code===te.RESOURCE_EXHAUSTED?(xi(r.toString()),xi("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):r&&r.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(r)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),r=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.i_===r&&this.V_(i,s)},i=>{e(()=>{const s=new Ee(te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(s)})})}V_(e,r){const i=this.R_(this.i_);this.stream=this.f_(e,r),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{i(()=>this.m_(s))}),this.stream.onMessage(s=>{i(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return me(rx,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return r=>{this.Ti.enqueueAndForget(()=>this.i_===e?r():(me(rx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZF extends Ck{constructor(e,r,i,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,s,o),this.serializer=a}f_(e,r){return this.connection.Wo("Listen",e,r)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const r=sF(this.serializer,e),i=function(a){if(!("targetChange"in a))return Ae.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Ae.min():o.readTime?qr(o.readTime):Ae.min()}(e);return this.listener.p_(r,i)}y_(e){const r={};r.database=Kg(this.serializer),r.addTarget=function(a,o){let l;const u=o.target;if(l=zg(u)?{documents:lF(a,u)}:{query:uF(a,u).ht},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=gk(a,o.resumeToken);const c=Wg(a,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ae.min())>0){l.readTime=Nh(a,o.snapshotVersion.toTimestamp());const c=Wg(a,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const i=dF(this.serializer,e);i&&(r.labels=i),this.I_(r)}w_(e){const r={};r.database=Kg(this.serializer),r.removeTarget=e,this.I_(r)}}class e4 extends Ck{constructor(e,r,i,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,s,o),this.serializer=a}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,r){return this.connection.Wo("Write",e,r)}g_(e){return Je(!!e.streamToken),this.lastStreamToken=e.streamToken,Je(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Je(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const r=oF(e.writeResults,e.commitTime),i=qr(e.commitTime);return this.listener.v_(i,r)}C_(){const e={};e.database=Kg(this.serializer),this.I_(e)}b_(e){const r={streamToken:this.lastStreamToken,writes:e.map(i=>aF(this.serializer,i))};this.I_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{}class n4 extends t4{constructor(e,r,i,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=i,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new Ee(te.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,r,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.So(e,qg(r,i),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ee(te.UNKNOWN,a.toString())})}Co(e,r,i,s,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Co(e,qg(r,i),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ee(te.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class r4{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(xi(r),this.N_=!1):me("OnlineStateTracker",r)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua="RemoteStore";class i4{constructor(e,r,i,s,a){this.localStore=e,this.datastore=r,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=a,this.z_.To(o=>{i.enqueueAndForget(async()=>{ya(this)&&(me(ua,"Restarting streams for network reachability change."),await async function(u){const c=Pe(u);c.W_.add(4),await rc(c),c.j_.set("Unknown"),c.W_.delete(4),await Nf(c)}(this))})}),this.j_=new r4(i,s)}}async function Nf(t){if(ya(t))for(const e of t.G_)await e(!0)}async function rc(t){for(const e of t.G_)await e(!1)}function Ak(t,e){const r=Pe(t);r.U_.has(e.targetId)||(r.U_.set(e.targetId,e),s_(r)?i_(r):Ko(r).c_()&&r_(r,e))}function n_(t,e){const r=Pe(t),i=Ko(r);r.U_.delete(e),i.c_()&&Pk(r,e),r.U_.size===0&&(i.c_()?i.P_():ya(r)&&r.j_.set("Unknown"))}function r_(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Ko(t).y_(e)}function Pk(t,e){t.H_.Ne(e),Ko(t).w_(e)}function i_(t){t.H_=new JV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.U_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),Ko(t).start(),t.j_.B_()}function s_(t){return ya(t)&&!Ko(t).u_()&&t.U_.size>0}function ya(t){return Pe(t).W_.size===0}function Rk(t){t.H_=void 0}async function s4(t){t.j_.set("Online")}async function a4(t){t.U_.forEach((e,r)=>{r_(t,e)})}async function o4(t,e){Rk(t),s_(t)?(t.j_.q_(e),i_(t)):t.j_.set("Unknown")}async function l4(t,e,r){if(t.j_.set("Online"),e instanceof mk&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.U_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.U_.delete(l),s.H_.removeTarget(l))}(t,e)}catch(i){me(ua,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Mh(t,i)}else if(e instanceof Ud?t.H_.We(e):e instanceof pk?t.H_.Ze(e):t.H_.je(e),!r.isEqual(Ae.min()))try{const i=await Ik(t.localStore);r.compareTo(i)>=0&&await function(a,o){const l=a.H_.ot(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.U_.get(c);h&&a.U_.set(c,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const h=a.U_.get(u);if(!h)return;a.U_.set(u,h.withResumeToken(tn.EMPTY_BYTE_STRING,h.snapshotVersion)),Pk(a,u);const f=new Yi(h.target,u,c,h.sequenceNumber);r_(a,f)}),a.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(i){me(ua,"Failed to raise snapshot:",i),await Mh(t,i)}}async function Mh(t,e,r){if(!Go(e))throw e;t.W_.add(1),await rc(t),t.j_.set("Offline"),r||(r=()=>Ik(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{me(ua,"Retrying IndexedDB access"),await r(),t.W_.delete(1),await Nf(t)})}function Nk(t,e){return e().catch(r=>Mh(t,r,e))}async function Df(t){const e=Pe(t),r=ws(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:$y;for(;u4(e);)try{const s=await HF(e.localStore,i);if(s===null){e.K_.length===0&&r.P_();break}i=s.batchId,c4(e,s)}catch(s){await Mh(e,s)}Dk(e)&&Mk(e)}function u4(t){return ya(t)&&t.K_.length<10}function c4(t,e){t.K_.push(e);const r=ws(t);r.c_()&&r.S_&&r.b_(e.mutations)}function Dk(t){return ya(t)&&!ws(t).u_()&&t.K_.length>0}function Mk(t){ws(t).start()}async function d4(t){ws(t).C_()}async function h4(t){const e=ws(t);for(const r of t.K_)e.b_(r.mutations)}async function f4(t,e,r){const i=t.K_.shift(),s=Yy.from(i,e,r);await Nk(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Df(t)}async function p4(t,e){e&&ws(t).S_&&await async function(i,s){if(function(o){return YV(o)&&o!==te.ABORTED}(s.code)){const a=i.K_.shift();ws(i).h_(),await Nk(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Df(i)}}(t,e),Dk(t)&&Mk(t)}async function ix(t,e){const r=Pe(t);r.asyncQueue.verifyOperationInProgress(),me(ua,"RemoteStore received new credentials");const i=ya(r);r.W_.add(3),await rc(r),i&&r.j_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.W_.delete(3),await Nf(r)}async function m4(t,e){const r=Pe(t);e?(r.W_.delete(2),await Nf(r)):e||(r.W_.add(2),await rc(r),r.j_.set("Unknown"))}function Ko(t){return t.J_||(t.J_=function(r,i,s){const a=Pe(r);return a.M_(),new ZF(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{xo:s4.bind(null,t),No:a4.bind(null,t),Lo:o4.bind(null,t),p_:l4.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),s_(t)?i_(t):t.j_.set("Unknown")):(await t.J_.stop(),Rk(t))})),t.J_}function ws(t){return t.Y_||(t.Y_=function(r,i,s){const a=Pe(r);return a.M_(),new e4(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:d4.bind(null,t),Lo:p4.bind(null,t),D_:h4.bind(null,t),v_:f4.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await Df(t)):(await t.Y_.stop(),t.K_.length>0&&(me(ua,`Stopping write stream with ${t.K_.length} pending writes`),t.K_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(e,r,i,s,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new mi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,i,s,a){const o=Date.now()+i,l=new a_(e,r,o,s,a);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function o_(t,e){if(xi("AsyncQueue",`${e}: ${t}`),Go(t))return new Ee(te.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{static emptySet(e){return new lo(e.comparator)}constructor(e){this.comparator=e?(r,i)=>e(r,i)||Se.comparator(r.key,i.key):(r,i)=>Se.comparator(r.key,i.key),this.keyedMap=Ul(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,i)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof lo)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const i=new lo;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=r,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(){this.Z_=new bt(Se.comparator)}track(e){const r=e.doc.key,i=this.Z_.get(r);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(r,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(r,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(r,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(r,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(r):e.type===1&&i.type===2?this.Z_=this.Z_.insert(r,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(r,{type:2,doc:e.doc}):Ce():this.Z_=this.Z_.insert(r,e)}X_(){const e=[];return this.Z_.inorderTraversal((r,i)=>{e.push(i)}),e}}class Io{constructor(e,r,i,s,a,o,l,u,c){this.query=e,this.docs=r,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,r,i,s,a){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new Io(e,r,lo.emptySet(r),o,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&If(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,i=e.docChanges;if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==i[s].type||!r[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class v4{constructor(){this.queries=ax(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(r,i){const s=Pe(r),a=s.queries;s.queries=ax(),a.forEach((o,l)=>{for(const u of l.ta)u.onError(i)})})(this,new Ee(te.ABORTED,"Firestore shutting down"))}}function ax(){return new va(t=>ek(t),If)}async function Lk(t,e){const r=Pe(t);let i=3;const s=e.query;let a=r.queries.get(s);a?!a.na()&&e.ra()&&(i=2):(a=new g4,i=e.ra()?0:1);try{switch(i){case 0:a.ea=await r.onListen(s,!0);break;case 1:a.ea=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(o){const l=o_(o,`Initialization of query '${Oa(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,a),a.ta.push(e),e.sa(r.onlineState),a.ea&&e.oa(a.ea)&&l_(r)}async function Ok(t,e){const r=Pe(t),i=e.query;let s=3;const a=r.queries.get(i);if(a){const o=a.ta.indexOf(e);o>=0&&(a.ta.splice(o,1),a.ta.length===0?s=e.ra()?0:1:!a.na()&&e.ra()&&(s=2))}switch(s){case 0:return r.queries.delete(i),r.onUnlisten(i,!0);case 1:return r.queries.delete(i),r.onUnlisten(i,!1);case 2:return r.onLastRemoteStoreUnlisten(i);default:return}}function y4(t,e){const r=Pe(t);let i=!1;for(const s of e){const a=s.query,o=r.queries.get(a);if(o){for(const l of o.ta)l.oa(s)&&(i=!0);o.ea=s}}i&&l_(r)}function _4(t,e,r){const i=Pe(t),s=i.queries.get(e);if(s)for(const a of s.ta)a.onError(r);i.queries.delete(e)}function l_(t){t.ia.forEach(e=>{e.next()})}var Qg,ox;(ox=Qg||(Qg={}))._a="default",ox.Cache="cache";class jk{constructor(e,r,i){this.query=e,this.aa=r,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Io(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.ua?this.la(e)&&(this.aa.next(e),r=!0):this.ha(e,this.onlineState)&&(this.Pa(e),r=!0),this.ca=e,r}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let r=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),r=!0),r}ha(e,r){if(!e.fromCache||!this.ra())return!0;const i=r!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}la(e){if(e.docChanges.length>0)return!0;const r=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}Pa(e){e=Io.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Qg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e){this.key=e}}class Fk{constructor(e){this.key=e}}class w4{constructor(e,r){this.query=e,this.fa=r,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Ve(),this.mutatedKeys=Ve(),this.ya=tk(e),this.wa=new lo(this.ya)}get Sa(){return this.fa}ba(e,r){const i=r?r.Da:new sx,s=r?r.wa:this.wa;let a=r?r.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),g=kf(this.query,f)?f:null,T=!!p&&this.mutatedKeys.has(p.key),N=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let A=!1;p&&g?p.data.isEqual(g.data)?T!==N&&(i.track({type:3,doc:g}),A=!0):this.va(p,g)||(i.track({type:2,doc:g}),A=!0,(u&&this.ya(g,u)>0||c&&this.ya(g,c)<0)&&(l=!0)):!p&&g?(i.track({type:0,doc:g}),A=!0):p&&!g&&(i.track({type:1,doc:p}),A=!0,(u||c)&&(l=!0)),A&&(g?(o=o.add(g),a=N?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),i.track({type:1,doc:h})}return{wa:o,Da:i,ls:l,mutatedKeys:a}}va(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,i,s){const a=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((h,f)=>function(g,T){const N=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce()}};return N(g)-N(T)}(h.type,f.type)||this.ya(h.doc,f.doc)),this.Ca(i),s=s!=null&&s;const l=r&&!s?this.Fa():[],u=this.pa.size===0&&this.current&&!s?1:0,c=u!==this.ga;return this.ga=u,o.length!==0||c?{snapshot:new Io(this.query,e.wa,a,o,e.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new sx,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(r=>this.fa=this.fa.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.fa=this.fa.delete(r)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Ve(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const r=[];return e.forEach(i=>{this.pa.has(i)||r.push(new Fk(i))}),this.pa.forEach(i=>{e.has(i)||r.push(new Vk(i))}),r}Oa(e){this.fa=e.gs,this.pa=Ve();const r=this.ba(e.documents);return this.applyChanges(r,!0)}Na(){return Io.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const u_="SyncEngine";class b4{constructor(e,r,i){this.query=e,this.targetId=r,this.view=i}}class x4{constructor(e){this.key=e,this.Ba=!1}}class E4{constructor(e,r,i,s,a,o){this.localStore=e,this.remoteStore=r,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new va(l=>ek(l),If),this.qa=new Map,this.Qa=new Set,this.$a=new bt(Se.comparator),this.Ka=new Map,this.Ua=new Jy,this.Wa={},this.Ga=new Map,this.za=So.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function T4(t,e,r=!0){const i=Wk(t);let s;const a=i.ka.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Na()):s=await Uk(i,e,r,!0),s}async function S4(t,e){const r=Wk(t);await Uk(r,e,!0,!1)}async function Uk(t,e,r,i){const s=await WF(t.localStore,Hr(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,r);let l;return i&&(l=await I4(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&r&&Ak(t.remoteStore,s),l}async function I4(t,e,r,i,s){t.Ha=(f,p,g)=>async function(N,A,b,x){let w=A.view.ba(b);w.ls&&(w=await Zb(N.localStore,A.query,!1).then(({documents:C})=>A.view.ba(C,w)));const R=x&&x.targetChanges.get(A.targetId),j=x&&x.targetMismatches.get(A.targetId)!=null,V=A.view.applyChanges(w,N.isPrimaryClient,R,j);return ux(N,A.targetId,V.Ma),V.snapshot}(t,f,p,g);const a=await Zb(t.localStore,e,!0),o=new w4(e,a.gs),l=o.ba(a.documents),u=nc.createSynthesizedTargetChangeForCurrentChange(r,i&&t.onlineState!=="Offline",s),c=o.applyChanges(l,t.isPrimaryClient,u);ux(t,r,c.Ma);const h=new b4(e,r,o);return t.ka.set(e,h),t.qa.has(r)?t.qa.get(r).push(e):t.qa.set(r,[e]),c.snapshot}async function k4(t,e,r){const i=Pe(t),s=i.ka.get(e),a=i.qa.get(s.targetId);if(a.length>1)return i.qa.set(s.targetId,a.filter(o=>!If(o,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Yg(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),r&&n_(i.remoteStore,s.targetId),Jg(i,s.targetId)}).catch(qo)):(Jg(i,s.targetId),await Yg(i.localStore,s.targetId,!0))}async function C4(t,e){const r=Pe(t),i=r.ka.get(e),s=r.qa.get(i.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(i.targetId),n_(r.remoteStore,i.targetId))}async function A4(t,e,r){const i=O4(t);try{const s=await function(o,l){const u=Pe(o),c=Lt.now(),h=l.reduce((g,T)=>g.add(T.key),Ve());let f,p;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let T=Ei(),N=Ve();return u.ds.getEntries(g,h).next(A=>{T=A,T.forEach((b,x)=>{x.isValidDocument()||(N=N.add(b))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,T)).next(A=>{f=A;const b=[];for(const x of l){const w=HV(x,f.get(x.key).overlayedDocument);w!=null&&b.push(new Cs(x.key,w,G1(w.value.mapValue),Wr.exists(!0)))}return u.mutationQueue.addMutationBatch(g,c,b,l)}).next(A=>{p=A;const b=A.applyToLocalDocumentSet(f,N);return u.documentOverlayCache.saveOverlays(g,A.batchId,b)})}).then(()=>({batchId:p.batchId,changes:rk(f)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let c=o.Wa[o.currentUser.toKey()];c||(c=new bt(Fe)),c=c.insert(l,u),o.Wa[o.currentUser.toKey()]=c}(i,s.batchId,r),await ic(i,s.changes),await Df(i.remoteStore)}catch(s){const a=o_(s,"Failed to persist write");r.reject(a)}}async function Bk(t,e){const r=Pe(t);try{const i=await $F(r.localStore,e);e.targetChanges.forEach((s,a)=>{const o=r.Ka.get(a);o&&(Je(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ba=!0:s.modifiedDocuments.size>0?Je(o.Ba):s.removedDocuments.size>0&&(Je(o.Ba),o.Ba=!1))}),await ic(r,i,e)}catch(i){await qo(i)}}function lx(t,e,r){const i=Pe(t);if(i.isPrimaryClient&&r===0||!i.isPrimaryClient&&r===1){const s=[];i.ka.forEach((a,o)=>{const l=o.view.sa(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=Pe(o);u.onlineState=l;let c=!1;u.queries.forEach((h,f)=>{for(const p of f.ta)p.sa(l)&&(c=!0)}),c&&l_(u)}(i.eventManager,e),s.length&&i.La.p_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function P4(t,e,r){const i=Pe(t);i.sharedClientState.updateQueryState(e,"rejected",r);const s=i.Ka.get(e),a=s&&s.key;if(a){let o=new bt(Se.comparator);o=o.insert(a,hn.newNoDocument(a,Ae.min()));const l=Ve().add(a),u=new Pf(Ae.min(),new Map,new bt(Fe),o,l);await Bk(i,u),i.$a=i.$a.remove(a),i.Ka.delete(e),c_(i)}else await Yg(i.localStore,e,!1).then(()=>Jg(i,e,r)).catch(qo)}async function R4(t,e){const r=Pe(t),i=e.batch.batchId;try{const s=await BF(r.localStore,e);zk(r,i,null),$k(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),await ic(r,s)}catch(s){await qo(s)}}async function N4(t,e,r){const i=Pe(t);try{const s=await function(o,l){const u=Pe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,l).next(f=>(Je(f!==null),h=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(i.localStore,e);zk(i,e,r),$k(i,e),i.sharedClientState.updateMutationState(e,"rejected",r),await ic(i,s)}catch(s){await qo(s)}}function $k(t,e){(t.Ga.get(e)||[]).forEach(r=>{r.resolve()}),t.Ga.delete(e)}function zk(t,e,r){const i=Pe(t);let s=i.Wa[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(r?a.reject(r):a.resolve(),s=s.remove(e)),i.Wa[i.currentUser.toKey()]=s}}function Jg(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.qa.get(e))t.ka.delete(i),r&&t.La.Ja(i,r);t.qa.delete(e),t.isPrimaryClient&&t.Ua.br(e).forEach(i=>{t.Ua.containsKey(i)||Hk(t,i)})}function Hk(t,e){t.Qa.delete(e.path.canonicalString());const r=t.$a.get(e);r!==null&&(n_(t.remoteStore,r),t.$a=t.$a.remove(e),t.Ka.delete(r),c_(t))}function ux(t,e,r){for(const i of r)i instanceof Vk?(t.Ua.addReference(i.key,e),D4(t,i)):i instanceof Fk?(me(u_,"Document no longer in limbo: "+i.key),t.Ua.removeReference(i.key,e),t.Ua.containsKey(i.key)||Hk(t,i.key)):Ce()}function D4(t,e){const r=e.key,i=r.path.canonicalString();t.$a.get(r)||t.Qa.has(i)||(me(u_,"New document in limbo: "+r),t.Qa.add(i),c_(t))}function c_(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const r=new Se(pt.fromString(e)),i=t.za.next();t.Ka.set(i,new x4(r)),t.$a=t.$a.insert(r,i),Ak(t.remoteStore,new Yi(Hr(Gy(r.path)),i,"TargetPurposeLimboResolution",xf.ae))}}async function ic(t,e,r){const i=Pe(t),s=[],a=[],o=[];i.ka.isEmpty()||(i.ka.forEach((l,u)=>{o.push(i.Ha(u,e,r).then(c=>{var h;if((c||r)&&i.isPrimaryClient){const f=c?!c.fromCache:(h=r==null?void 0:r.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){s.push(c);const f=e_.Yi(u.targetId,c);a.push(f)}}))}),await Promise.all(o),i.La.p_(s),await async function(u,c){const h=Pe(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Z.forEach(c,p=>Z.forEach(p.Hi,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>Z.forEach(p.Ji,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!Go(f))throw f;me(t_,"Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const g=h.Ts.get(p),T=g.snapshotVersion,N=g.withLastLimboFreeSnapshotVersion(T);h.Ts=h.Ts.insert(p,N)}}}(i.localStore,a))}async function M4(t,e){const r=Pe(t);if(!r.currentUser.isEqual(e)){me(u_,"User change. New user:",e.toKey());const i=await Sk(r.localStore,e);r.currentUser=e,function(a,o){a.Ga.forEach(l=>{l.forEach(u=>{u.reject(new Ee(te.CANCELLED,o))})}),a.Ga.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ic(r,i.Rs)}}function L4(t,e){const r=Pe(t),i=r.Ka.get(e);if(i&&i.Ba)return Ve().add(i.key);{let s=Ve();const a=r.qa.get(e);if(!a)return s;for(const o of a){const l=r.ka.get(o);s=s.unionWith(l.view.Sa)}return s}}function Wk(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=P4.bind(null,e),e.La.p_=y4.bind(null,e.eventManager),e.La.Ja=_4.bind(null,e.eventManager),e}function O4(t){const e=Pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=N4.bind(null,e),e}class Lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,r){return null}nu(e,r){return null}eu(e){return UF(this.persistence,new jF,e.initialUser,this.serializer)}Xa(e){return new Tk(Zy.ri,this.serializer)}Za(e){return new GF}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lh.provider={build:()=>new Lh};class j4 extends Lh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,r){Je(this.persistence.referenceDelegate instanceof Dh);const i=this.persistence.referenceDelegate.garbageCollector;return new xF(i,e.asyncQueue,r)}Xa(e){const r=this.cacheSizeBytes!==void 0?Pn.withCacheSize(this.cacheSizeBytes):Pn.DEFAULT;return new Tk(i=>Dh.ri(i,r),this.serializer)}}class Zg{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>lx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=M4.bind(null,this.syncEngine),await m4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new v4}()}createDatastore(e){const r=Rf(e.databaseInfo.databaseId),i=function(a){return new JF(a)}(e.databaseInfo);return function(a,o,l,u){return new n4(a,o,l,u)}(e.authCredentials,e.appCheckCredentials,i,r)}createRemoteStore(e){return function(i,s,a,o,l){return new i4(i,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>lx(this.syncEngine,r,0),function(){return nx.D()?new nx:new KF}())}createSyncEngine(e,r){return function(s,a,o,l,u,c,h){const f=new E4(s,a,o,l,u,c);return h&&(f.ja=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const a=Pe(s);me(ua,"RemoteStore shutting down."),a.W_.add(5),await rc(a),a.z_.shutdown(),a.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Zg.provider={build:()=>new Zg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):xi("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bs="FirestoreClient";class V4{constructor(e,r,i,s,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=i,this.databaseInfo=s,this.user=cn.UNAUTHENTICATED,this.clientId=j1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async o=>{me(bs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(me(bs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new mi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=o_(r,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function im(t,e){t.asyncQueue.verifyOperationInProgress(),me(bs,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let i=r.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await Sk(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cx(t,e){t.asyncQueue.verifyOperationInProgress();const r=await F4(t);me(bs,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(i=>ix(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>ix(e.remoteStore,s)),t._onlineComponents=e}async function F4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){me(bs,"Using user provided OfflineComponentProvider");try{await im(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===te.FAILED_PRECONDITION||s.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;bo("Error using user provided cache. Falling back to memory cache: "+r),await im(t,new Lh)}}else me(bs,"Using default OfflineComponentProvider"),await im(t,new j4(void 0));return t._offlineComponents}async function Gk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(me(bs,"Using user provided OnlineComponentProvider"),await cx(t,t._uninitializedComponentsProvider._online)):(me(bs,"Using default OnlineComponentProvider"),await cx(t,new Zg))),t._onlineComponents}function U4(t){return Gk(t).then(e=>e.syncEngine)}async function Kk(t){const e=await Gk(t),r=e.eventManager;return r.onListen=T4.bind(null,e.syncEngine),r.onUnlisten=k4.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=S4.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=C4.bind(null,e.syncEngine),r}function B4(t,e,r={}){const i=new mi;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,c){const h=new qk({next:p=>{h.su(),o.enqueueAndForget(()=>Ok(a,f));const g=p.docs.has(l);!g&&p.fromCache?c.reject(new Ee(te.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&u&&u.source==="server"?c.reject(new Ee(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new jk(Gy(l.path),h,{includeMetadataChanges:!0,Ta:!0});return Lk(a,f)}(await Kk(t),t.asyncQueue,e,r,i)),i.promise}function $4(t,e,r={}){const i=new mi;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,c){const h=new qk({next:p=>{h.su(),o.enqueueAndForget(()=>Ok(a,f)),p.fromCache&&u.source==="server"?c.reject(new Ee(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new jk(l,h,{includeMetadataChanges:!0,Ta:!0});return Lk(a,f)}(await Kk(t),t.asyncQueue,e,r,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(t,e,r){if(!r)throw new Ee(te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function z4(t,e,r,i){if(e===!0&&i===!0)throw new Ee(te.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function hx(t){if(!Se.isDocumentKey(t))throw new Ee(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fx(t){if(Se.isDocumentKey(t))throw new Ee(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function d_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ce()}function Ti(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ee(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=d_(t);throw new Ee(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="firestore.googleapis.com",px=!0;class mx{constructor(e){var r,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Qk,this.ssl=px}else this.host=e.host,this.ssl=(r=e.ssl)!==null&&r!==void 0?r:px;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ek;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wF)throw new Ee(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}z4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Yk((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ee(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ee(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ee(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mf{constructor(e,r,i,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mx(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Yj;switch(i.type){case"firstParty":return new Zj(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ee(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const i=dx.get(r);i&&(me("ComponentProvider","Removing Datastore"),dx.delete(r),i.terminate())}(this),Promise.resolve()}}function H4(t,e,r,i={}){var s;const a=(t=Ti(t,Mf))._getSettings(),o=`${e}:${r}`;if(a.host!==Qk&&a.host!==o&&bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){let l,u;if(typeof i.mockUserToken=="string")l=i.mockUserToken,u=cn.MOCK_USER;else{l=uM(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Ee(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new cn(c)}t._authCredentials=new Xj(new O1(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,r,i){this.converter=r,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Lf(this.firestore,e,this._query)}}class Vn{constructor(e,r,i){this.converter=r,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new us(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Vn(this.firestore,e,this._key)}}class us extends Lf{constructor(e,r,i){super(e,r,Gy(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Vn(this.firestore,null,new Se(e))}withConverter(e){return new us(this.firestore,e,this._path)}}function fn(t,e,...r){if(t=en(t),Xk("collection","path",e),t instanceof Mf){const i=pt.fromString(e,...r);return fx(i),new us(t,null,i)}{if(!(t instanceof Vn||t instanceof us))throw new Ee(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(pt.fromString(e,...r));return fx(i),new us(t.firestore,null,i)}}function ko(t,e,...r){if(t=en(t),arguments.length===1&&(e=j1.newId()),Xk("doc","path",e),t instanceof Mf){const i=pt.fromString(e,...r);return hx(i),new Vn(t,null,new Se(i))}{if(!(t instanceof Vn||t instanceof us))throw new Ee(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(pt.fromString(e,...r));return hx(i),new Vn(t.firestore,t instanceof us?t.converter:null,new Se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="AsyncQueue";class vx{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new kk(this,"async_queue_retry"),this.Su=()=>{const i=rm();i&&me(gx,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=e;const r=rm();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const r=rm();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const r=new mi;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Go(e))throw e;me(gx,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const r=this.bu.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(i);throw xi("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.pu=!1,i))));return this.bu=r,r}enqueueAfterDelay(e,r,i){this.Du(),this.wu.indexOf(e)>-1&&(r=0);const s=a_.createAndSchedule(this,e,r,i,a=>this.Fu(a));return this.fu.push(s),s}Du(){this.gu&&Ce()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const r of this.fu)if(r.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((r,i)=>r.targetTimeMs-i.targetTimeMs);for(const r of this.fu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const r=this.fu.indexOf(e);this.fu.splice(r,1)}}class sc extends Mf{constructor(e,r,i,s){super(e,r,i,s),this.type="firestore",this._queue=new vx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vx(e),this._firestoreClient=void 0,await e}}}function W4(t,e){const r=typeof t=="object"?t:GI(),i=typeof t=="string"?t:Ih,s=Ry(r,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=oM("firestore");a&&H4(s,...a)}return s}function h_(t){if(t._terminated)throw new Ee(te.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||q4(t),t._firestoreClient}function q4(t){var e,r,i;const s=t._freezeSettings(),a=function(l,u,c,h){return new fV(l,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Yk(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new V4(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Co(tn.fromBase64String(e))}catch(r){throw new Ee(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Co(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Ee(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Ee(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Ee(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Fe(this._lat,e._lat)||Fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=/^__.*__$/;class K4{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return this.fieldMask!==null?new Cs(e,this.data,this.fieldMask,r,this.fieldTransforms):new tc(e,this.data,r,this.fieldTransforms)}}class Jk{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return new Cs(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function Zk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce()}}class g_{constructor(e,r,i,s,a,o){this.settings=e,this.databaseId=r,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Bu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new g_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var r;const i=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.ku({path:i,Qu:!1});return s.$u(e),s}Ku(e){var r;const i=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.ku({path:i,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Oh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Zk(this.Lu)&&G4.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class Y4{constructor(e,r,i){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=i||Rf(e)}ju(e,r,i,s=!1){return new g_({Lu:e,methodName:r,zu:i,path:Xt.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eC(t){const e=t._freezeSettings(),r=Rf(t._databaseId);return new Y4(t._databaseId,!!e.ignoreUndefinedProperties,r)}function X4(t,e,r,i,s,a={}){const o=t.ju(a.merge||a.mergeFields?2:0,e,r,s);v_("Data must be an object, but it was:",o,i);const l=tC(i,o);let u,c;if(a.merge)u=new Wn(o.fieldMask),c=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const f of a.mergeFields){const p=ev(e,f,r);if(!o.contains(p))throw new Ee(te.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);rC(h,p)||h.push(p)}u=new Wn(h),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new K4(new Nn(l),u,c)}class jf extends f_{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jf}}function Q4(t,e,r,i){const s=t.ju(1,e,r);v_("Data must be an object, but it was:",s,i);const a=[],o=Nn.empty();ks(i,(u,c)=>{const h=y_(e,u,r);c=en(c);const f=s.Ku(h);if(c instanceof jf)a.push(h);else{const p=Vf(c,f);p!=null&&(a.push(h),o.set(h,p))}});const l=new Wn(a);return new Jk(o,l,s.fieldTransforms)}function J4(t,e,r,i,s,a){const o=t.ju(1,e,r),l=[ev(e,i,r)],u=[s];if(a.length%2!=0)throw new Ee(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)l.push(ev(e,a[p])),u.push(a[p+1]);const c=[],h=Nn.empty();for(let p=l.length-1;p>=0;--p)if(!rC(c,l[p])){const g=l[p];let T=u[p];T=en(T);const N=o.Ku(g);if(T instanceof jf)c.push(g);else{const A=Vf(T,N);A!=null&&(c.push(g),h.set(g,A))}}const f=new Wn(c);return new Jk(h,f,o.fieldTransforms)}function Vf(t,e){if(nC(t=en(t)))return v_("Unsupported field value:",e,t),tC(t,e);if(t instanceof f_)return function(i,s){if(!Zk(s.Lu))throw s.Wu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,s){const a=[];let o=0;for(const l of i){let u=Vf(l,s.Uu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(i,s){if((i=en(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return VV(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Lt.fromDate(i);return{timestampValue:Nh(s.serializer,a)}}if(i instanceof Lt){const a=new Lt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Nh(s.serializer,a)}}if(i instanceof p_)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Co)return{bytesValue:gk(s.serializer,i._byteString)};if(i instanceof Vn){const a=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(a))throw s.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Qy(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof m_)return function(o,l){return{mapValue:{fields:{[W1]:{stringValue:q1},[kh]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Wu("VectorValues must only contain numeric values.");return Ky(l.serializer,c)})}}}}}}(i,s);throw s.Wu(`Unsupported field value: ${d_(i)}`)}(t,e)}function tC(t,e){const r={};return F1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ks(t,(i,s)=>{const a=Vf(s,e.qu(i));a!=null&&(r[i]=a)}),{mapValue:{fields:r}}}function nC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Lt||t instanceof p_||t instanceof Co||t instanceof Vn||t instanceof f_||t instanceof m_)}function v_(t,e,r){if(!nC(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const i=d_(r);throw i==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+i)}}function ev(t,e,r){if((e=en(e))instanceof Of)return e._internalPath;if(typeof e=="string")return y_(t,e);throw Oh("Field path arguments must be of type string or ",t,!1,void 0,r)}const Z4=new RegExp("[~\\*/\\[\\]]");function y_(t,e,r){if(e.search(Z4)>=0)throw Oh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Of(...e.split("."))._internalPath}catch{throw Oh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Oh(t,e,r,i,s){const a=i&&!i.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${i}`),o&&(u+=` in document ${s}`),u+=")"),new Ee(te.INVALID_ARGUMENT,l+t+u)}function rC(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,r,i,s,a){this._firestore=e,this._userDataWriter=r,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Vn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new e3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(sC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class e3 extends iC{data(){return super.data()}}function sC(t,e){return typeof e=="string"?y_(t,e):e instanceof Of?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ee(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class n3{convertValue(e,r="none"){switch(_s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ys(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const i={};return ks(e,(s,a)=>{i[s]=this.convertValue(a,r)}),i}convertVectorValue(e){var r,i,s;const a=(s=(i=(r=e.fields)===null||r===void 0?void 0:r[kh].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(o=>It(o.doubleValue));return new m_(a)}convertGeoPoint(e){return new p_(It(e.latitude),It(e.longitude))}convertArray(e,r){return(e.values||[]).map(i=>this.convertValue(i,r))}convertServerTimestamp(e,r){switch(r){case"previous":const i=Tf(e);return i==null?null:this.convertValue(i,r);case"estimate":return this.convertTimestamp(Pu(e));default:return null}}convertTimestamp(e){const r=vs(e);return new Lt(r.seconds,r.nanos)}convertDocumentKey(e,r){const i=pt.fromString(e);Je(xk(i));const s=new Ru(i.get(1),i.get(3)),a=new Se(i.popFirst(5));return s.isEqual(r)||xi(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(t,e,r){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class aC extends iC{constructor(e,r,i,s,a,o){super(e,r,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Bd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const i=this._document.data.field(sC("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}}}class Bd extends aC{data(e={}){return super.data(e)}}class i3{constructor(e,r,i,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new $l(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(i=>{e.call(r,new Bd(this._firestore,this._userDataWriter,i.key,i,new $l(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ee(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Bd(s._firestore,s._userDataWriter,l.doc.key,l.doc,new $l(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const u=new Bd(s._firestore,s._userDataWriter,l.doc.key,l.doc,new $l(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:s3(l.type),doc:u,oldIndex:c,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function s3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(t){t=Ti(t,Vn);const e=Ti(t.firestore,sc);return B4(h_(e),t._key).then(r=>o3(e,t,r))}class oC extends n3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Co(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Vn(this.firestore,null,r)}}function Mn(t){t=Ti(t,Lf);const e=Ti(t.firestore,sc),r=h_(e),i=new oC(e);return t3(t._query),$4(r,t._query).then(s=>new i3(e,i,t,s))}function yx(t,e,r){t=Ti(t,Vn);const i=Ti(t.firestore,sc),s=r3(t.converter,e);return lC(i,[X4(eC(i),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Wr.none())])}function tv(t,e,r,...i){t=Ti(t,Vn);const s=Ti(t.firestore,sc),a=eC(s);let o;return o=typeof(e=en(e))=="string"||e instanceof Of?J4(a,"updateDoc",t._key,e,r,i):Q4(a,"updateDoc",t._key,e),lC(s,[o.toMutation(t._key,Wr.exists(!0))])}function lC(t,e){return function(i,s){const a=new mi;return i.asyncQueue.enqueueAndForget(async()=>A4(await U4(i),s,a)),a.promise}(h_(t),e)}function o3(t,e,r){const i=r.docs.get(e._key),s=new oC(t);return new aC(t,s,e._key,i,new $l(r.hasPendingWrites,r.fromCache),e.converter)}(function(e,r=!0){(function(s){Wo=s})($o),_o(new aa("firestore",(i,{instanceIdentifier:s,options:a})=>{const o=i.getProvider("app").getImmediate(),l=new sc(new Qj(i.getProvider("auth-internal")),new eV(o,i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ee(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ru(c.options.projectId,h)}(o,s),o);return a=Object.assign({useFetchStreams:r},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),as(Tb,Sb,e),as(Tb,Sb,"esm2017")})();const l3={apiKey:"AIzaSyDGolxlZNoEzk7z46ZMtSk9YsP32MlH45Q",authDomain:"llm-hyper-audio.firebaseapp.com",projectId:"llm-hyper-audio",storageBucket:"llm-hyper-audio.firebasestorage.app",messagingSenderId:"530304773274",appId:"1:530304773274:web:1764f58974d6c2fd060323",measurementId:"G-HFEKE65YC6"},uC=qI(l3),Rt=W4(uC),sm=Wj(uC),cC=L.createContext();function ac(){const t=L.useContext(cC);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function u3({children:t}){const[e,r]=L.useState(null),[i,s]=L.useState(!0),[a,o]=L.useState(null);L.useEffect(()=>{console.log("Setting up auth listener");const h=DO(sm,f=>{console.log("Auth state changed:",f?f.email:"No user"),r(f),s(!1)},f=>{console.error("Auth state change error:",f),o(f.message),s(!1)});return()=>h()},[]);const c={user:e,loading:i,error:a,login:async(h,f)=>{try{o(null),console.log("Attempting login with:",h);const p=await PO(sm,h,f);return r(p.user),p.user}catch(p){throw console.error("Login error:",p),o(p.message),p}},logout:async()=>{try{o(null),console.log("Logging out user"),await MO(sm),r(null)}catch(h){throw console.error("Logout error:",h),o(h.message),h}},isAuthenticated:!!e};return m.jsx(cC.Provider,{value:c,children:t})}const c3=L.createContext();function d3({children:t}){const[e,r]=L.useState(null),[i,s]=L.useState([]),[a,o]=L.useState(!1),[l,u]=L.useState(0),b={currentVideo:e,setCurrentVideo:r,playlist:i,setPlaylist:s,isPlaying:a,setIsPlaying:o,currentTime:l,setCurrentTime:u,addToPlaylist:x=>{s(w=>[...w,x])},removeFromPlaylist:x=>{s(w=>w.filter(R=>R.id!==x))},clearPlaylist:()=>{s([]),r(null)},playVideo:x=>{r(x),o(!0)},pauseVideo:()=>{o(!1)},nextVideo:()=>{const x=i.findIndex(w=>w.id===(e==null?void 0:e.id));x<i.length-1&&r(i[x+1])},previousVideo:()=>{const x=i.findIndex(w=>w.id===(e==null?void 0:e.id));x>0&&r(i[x-1])},updatePlaylistOrder:x=>{s(x)}};return m.jsx(c3.Provider,{value:b,children:t})}/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dC=(...t)=>t.filter((e,r,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var f3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=L.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:s="",children:a,iconNode:o,...l},u)=>L.createElement("svg",{ref:u,...f3,width:e,height:e,stroke:t,strokeWidth:i?Number(r)*24/Number(e):r,className:dC("lucide",s),...l},[...o.map(([c,h])=>L.createElement(c,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=(t,e)=>{const r=L.forwardRef(({className:i,...s},a)=>L.createElement(p3,{ref:a,iconNode:e,className:dC(`lucide-${h3(t)}`,i),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],g3=nn("ChevronDown",m3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],y3=nn("ChevronRight",v3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],w3=nn("ChevronUp",_3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],x3=nn("CirclePlay",b3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],hC=nn("Clock",E3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],fC=nn("FileText",T3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],I3=nn("Heart",S3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],C3=nn("House",k3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],P3=nn("List",A3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],N3=nn("LogOut",R3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],M3=nn("Menu",D3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],pC=nn("Search",L3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],j3=nn("Settings",O3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],F3=nn("ShoppingBag",V3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],B3=nn("Tag",U3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],_x=nn("Upload",$3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],H3=nn("X",z3);function W3(){const{user:t,logout:e}=ac(),r=mr(),[i,s]=L.useState(!1),a=()=>{s(!i)},o=[{path:"/",label:"Home",icon:m.jsx(C3,{size:20})},{path:"/keyword-directory",label:"Directory",icon:m.jsx(P3,{size:20})},{path:"/playlist-builder",label:"Playlists",icon:m.jsx(x3,{size:20})},{path:"/transcript-summary",label:"Summarizer",icon:m.jsx(fC,{size:20})}],l=u=>r.pathname===u;return m.jsxs(m.Fragment,{children:[m.jsx("button",{className:"fixed top-4 left-4 w-12 h-12 rounded-lg bg-white border-none shadow-sm cursor-pointer flex justify-center items-center text-gray-600 z-[51] transition-colors duration-200 ease-in-out",onClick:a,children:m.jsx(M3,{size:24})}),m.jsx("div",{className:`fixed inset-0 z-[49] transition-opacity duration-300 ease-in-out ${i?"pointer-events-auto":"pointer-events-none"}`,onClick:a}),m.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-white border-r border-gray-200 shadow-lg transition-transform duration-300 ease-in-out z-50 flex flex-col p-4 ${i?"translate-x-0":"-translate-x-full"}`,children:[m.jsx("button",{className:"absolute top-4 right-4 p-2 rounded-md bg-gray-100 border-none cursor-pointer flex justify-center items-center text-gray-600",onClick:a,children:m.jsx(H3,{size:20})}),m.jsxs("div",{className:"flex-1 overflow-auto mt-10",children:[m.jsxs("div",{children:[o.map(u=>m.jsxs(qs,{to:u.path,className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l(u.path)?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[m.jsx("span",{className:"flex mr-3 text-inherit",children:u.icon}),m.jsx("span",{children:u.label})]},u.path)),m.jsxs(qs,{to:"/search",className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l("/search")?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[m.jsx("span",{className:"flex mr-3 text-inherit",children:m.jsx(pC,{size:20})}),m.jsx("span",{children:"Search"})]}),m.jsxs(qs,{to:"/playlists",className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l("/playlists")?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[m.jsx("span",{className:"flex mr-3 text-inherit",children:m.jsx(F3,{size:20})}),m.jsx("span",{children:"Playlists"})]}),m.jsxs(qs,{to:"/favorites",className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l("/favorites")?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[m.jsx("span",{className:"flex mr-3 text-inherit",children:m.jsx(I3,{size:20})}),m.jsx("span",{children:"Favorites"})]})]}),m.jsx("div",{className:"h-px bg-gray-200 my-4"}),m.jsxs("div",{children:[m.jsxs(qs,{to:"/settings",className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l("/settings")?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[m.jsx("span",{className:"flex mr-3 text-inherit",children:m.jsx(j3,{size:20})}),m.jsx("span",{children:"Settings"})]}),t&&m.jsxs("button",{onClick:()=>{e(),s(!1)},className:"flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out text-gray-500 font-normal w-full text-left border-none bg-transparent",children:[m.jsx("span",{className:"flex mr-3 text-inherit",children:m.jsx(N3,{size:20})}),m.jsx("span",{children:"Logout"})]})]})]})]})]})}function js({children:t}){const{loading:e}=ac();return e?m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):m.jsxs("div",{className:"flex flex-row h-screen w-full overflow-hidden bg-white",children:[m.jsx("div",{className:"flex-none w-16",children:m.jsx(W3,{})}),m.jsx("div",{className:"flex-grow overflow-y-auto",children:m.jsx("main",{className:"py-6 px-6 w-full",children:t})})]})}function Vs({children:t}){const{user:e,loading:r}=ac(),i=mr();return r?m.jsx("div",{className:"flex justify-center items-center min-h-screen",children:m.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):e?t:m.jsx(DI,{to:"/login",state:{from:i},replace:!0})}var mC={exports:{}},q3="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",G3=q3,K3=G3;function gC(){}function vC(){}vC.resetWarningCache=gC;var Y3=function(){function t(i,s,a,o,l,u){if(u!==K3){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:vC,resetWarningCache:gC};return r.PropTypes=r,r};mC.exports=Y3();var X3=mC.exports;const nt=Oo(X3);var yC={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var a="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(a=s(a,i(l)))}return a}function i(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return r.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var o="";for(var l in a)e.call(a,l)&&a[l]&&(o=s(o,l));return o}function s(a,o){return o?a?a+" "+o:a+o:a}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(yC);var Q3=yC.exports;const _C=Oo(Q3);var J3=["top","left","transform","className","children","innerRef"];function nv(){return nv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},nv.apply(this,arguments)}function Z3(t,e){if(t==null)return{};var r={},i=Object.keys(t),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function jh(t){var e=t.top,r=e===void 0?0:e,i=t.left,s=i===void 0?0:i,a=t.transform,o=t.className,l=t.children,u=t.innerRef,c=Z3(t,J3);return De.createElement("g",nv({ref:u,className:_C("visx-group",o),transform:a||"translate("+s+", "+r+")"},c),l)}jh.propTypes={top:nt.number,left:nt.number,transform:nt.string,className:nt.string,children:nt.node,innerRef:nt.oneOfType([nt.string,nt.func,nt.object])};var eU=Array.prototype.slice;function tU(t){for(var e=t.length,r,i;e;)i=Math.random()*e--|0,r=t[e],t[e]=t[i],t[i]=r;return t}function nU(t){for(var e=0,r=(t=tU(eU.call(t))).length,i=[],s,a;e<r;)s=t[e],a&&wC(a,s)?++e:(a=iU(i=rU(i,s)),e=0);return a}function rU(t,e){var r,i;if(am(e,t))return[e];for(r=0;r<t.length;++r)if(ud(e,t[r])&&am(zl(t[r],e),t))return[t[r],e];for(r=0;r<t.length-1;++r)for(i=r+1;i<t.length;++i)if(ud(zl(t[r],t[i]),e)&&ud(zl(t[r],e),t[i])&&ud(zl(t[i],e),t[r])&&am(bC(t[r],t[i],e),t))return[t[r],t[i],e];throw new Error}function ud(t,e){var r=t.r-e.r,i=e.x-t.x,s=e.y-t.y;return r<0||r*r<i*i+s*s}function wC(t,e){var r=t.r-e.r+1e-6,i=e.x-t.x,s=e.y-t.y;return r>0&&r*r>i*i+s*s}function am(t,e){for(var r=0;r<e.length;++r)if(!wC(t,e[r]))return!1;return!0}function iU(t){switch(t.length){case 1:return sU(t[0]);case 2:return zl(t[0],t[1]);case 3:return bC(t[0],t[1],t[2])}}function sU(t){return{x:t.x,y:t.y,r:t.r}}function zl(t,e){var r=t.x,i=t.y,s=t.r,a=e.x,o=e.y,l=e.r,u=a-r,c=o-i,h=l-s,f=Math.sqrt(u*u+c*c);return{x:(r+a+u/f*h)/2,y:(i+o+c/f*h)/2,r:(f+s+l)/2}}function bC(t,e,r){var i=t.x,s=t.y,a=t.r,o=e.x,l=e.y,u=e.r,c=r.x,h=r.y,f=r.r,p=i-o,g=i-c,T=s-l,N=s-h,A=u-a,b=f-a,x=i*i+s*s-a*a,w=x-o*o-l*l+u*u,R=x-c*c-h*h+f*f,j=g*T-p*N,V=(T*R-N*w)/(j*2)-i,C=(N*A-T*b)/j,I=(g*w-p*R)/(j*2)-s,y=(p*b-g*A)/j,_=C*C+y*y-1,S=2*(a+V*C+I*y),M=V*V+I*I-a*a,D=-(_?(S+Math.sqrt(S*S-4*_*M))/(2*_):M/S);return{x:i+V+C*D,y:s+I+y*D,r:D}}function wx(t,e,r){var i=t.x-e.x,s,a,o=t.y-e.y,l,u,c=i*i+o*o;c?(a=e.r+r.r,a*=a,u=t.r+r.r,u*=u,a>u?(s=(c+u-a)/(2*c),l=Math.sqrt(Math.max(0,u/c-s*s)),r.x=t.x-s*i-l*o,r.y=t.y-s*o+l*i):(s=(c+a-u)/(2*c),l=Math.sqrt(Math.max(0,a/c-s*s)),r.x=e.x+s*i-l*o,r.y=e.y+s*o+l*i)):(r.x=e.x+r.r,r.y=e.y)}function bx(t,e){var r=t.r+e.r-1e-6,i=e.x-t.x,s=e.y-t.y;return r>0&&r*r>i*i+s*s}function xx(t){var e=t._,r=t.next._,i=e.r+r.r,s=(e.x*r.r+r.x*e.r)/i,a=(e.y*r.r+r.y*e.r)/i;return s*s+a*a}function cd(t){this._=t,this.next=null,this.previous=null}function aU(t){if(!(s=t.length))return 0;var e,r,i,s,a,o,l,u,c,h,f;if(e=t[0],e.x=0,e.y=0,!(s>1))return e.r;if(r=t[1],e.x=-r.r,r.x=e.r,r.y=0,!(s>2))return e.r+r.r;wx(r,e,i=t[2]),e=new cd(e),r=new cd(r),i=new cd(i),e.next=i.previous=r,r.next=e.previous=i,i.next=r.previous=e;e:for(l=3;l<s;++l){wx(e._,r._,i=t[l]),i=new cd(i),u=r.next,c=e.previous,h=r._.r,f=e._.r;do if(h<=f){if(bx(u._,i._)){r=u,e.next=r,r.previous=e,--l;continue e}h+=u._.r,u=u.next}else{if(bx(c._,i._)){e=c,e.next=r,r.previous=e,--l;continue e}f+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=e,i.next=r,e.next=r.previous=r=i,a=xx(e);(i=i.next)!==r;)(o=xx(i))<a&&(e=i,a=o);r=e.next}for(e=[r._],i=r;(i=i.next)!==r;)e.push(i._);for(i=nU(e),l=0;l<s;++l)e=t[l],e.x-=i.x,e.y-=i.y;return i.r}function oU(t){return t==null?null:lU(t)}function lU(t){if(typeof t!="function")throw new Error;return t}function Ex(){return 0}function uU(t){return function(){return t}}function cU(t){return Math.sqrt(t.value)}function dU(){var t=null,e=1,r=1,i=Ex;function s(a){return a.x=e/2,a.y=r/2,t?a.eachBefore(Tx(t)).eachAfter(om(i,.5)).eachBefore(Sx(1)):a.eachBefore(Tx(cU)).eachAfter(om(Ex,1)).eachAfter(om(i,a.r/Math.min(e,r))).eachBefore(Sx(Math.min(e,r)/(2*a.r))),a}return s.radius=function(a){return arguments.length?(t=oU(a),s):t},s.size=function(a){return arguments.length?(e=+a[0],r=+a[1],s):[e,r]},s.padding=function(a){return arguments.length?(i=typeof a=="function"?a:uU(+a),s):i},s}function Tx(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function om(t,e){return function(r){if(i=r.children){var i,s,a=i.length,o=t(r)*e||0,l;if(o)for(s=0;s<a;++s)i[s].r+=o;if(l=aU(i),o)for(s=0;s<a;++s)i[s].r-=o;r.r=l+o}}}function Sx(t){return function(e){var r=e.parent;e.r*=t,r&&(e.x=r.x+t*e.x,e.y=r.y+t*e.y)}}function xC(t){var e=t.node,r=e===void 0?{x:0,y:0,r:15}:e;return De.createElement("circle",{cx:r.x,cy:r.y,r:r.r||15,fill:"#21D4FD"})}xC.propTypes={node:nt.shape({x:nt.number.isRequired,y:nt.number.isRequired,r:nt.number})};function EC(t){var e=t.top,r=t.left,i=t.className,s=t.root,a=t.radius,o=t.size,l=t.padding,u=t.children,c=t.nodeComponent,h=c===void 0?xC:c,f=dU();o&&f.size(o),a!==void 0&&f.radius(a),l&&f.padding(l);var p=f(s);return u?De.createElement(De.Fragment,null,u(p)):De.createElement(jh,{top:e,left:r,className:_C("visx-pack",i)},h&&p.descendants().map(function(g,T){return De.createElement(jh,{key:"pack-node-"+T},De.createElement(h,{node:g}))}))}EC.propTypes={children:nt.func,top:nt.number,left:nt.number,className:nt.string,radius:nt.func,padding:nt.number};function hU(t){var e=0,r=t.children,i=r&&r.length;if(!i)e=1;else for(;--i>=0;)e+=r[i].value;t.value=e}function fU(){return this.eachAfter(hU)}function pU(t,e){let r=-1;for(const i of this)t.call(e,i,++r,this);return this}function mU(t,e){for(var r=this,i=[r],s,a,o=-1;r=i.pop();)if(t.call(e,r,++o,this),s=r.children)for(a=s.length-1;a>=0;--a)i.push(s[a]);return this}function gU(t,e){for(var r=this,i=[r],s=[],a,o,l,u=-1;r=i.pop();)if(s.push(r),a=r.children)for(o=0,l=a.length;o<l;++o)i.push(a[o]);for(;r=s.pop();)t.call(e,r,++u,this);return this}function vU(t,e){let r=-1;for(const i of this)if(t.call(e,i,++r,this))return i}function yU(t){return this.eachAfter(function(e){for(var r=+t(e.data)||0,i=e.children,s=i&&i.length;--s>=0;)r+=i[s].value;e.value=r})}function _U(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function wU(t){for(var e=this,r=bU(e,t),i=[e];e!==r;)e=e.parent,i.push(e);for(var s=i.length;t!==r;)i.splice(s,0,t),t=t.parent;return i}function bU(t,e){if(t===e)return t;var r=t.ancestors(),i=e.ancestors(),s=null;for(t=r.pop(),e=i.pop();t===e;)s=t,t=r.pop(),e=i.pop();return s}function xU(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function EU(){return Array.from(this)}function TU(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function SU(){var t=this,e=[];return t.each(function(r){r!==t&&e.push({source:r.parent,target:r})}),e}function*IU(){var t=this,e,r=[t],i,s,a;do for(e=r.reverse(),r=[];t=e.pop();)if(yield t,i=t.children)for(s=0,a=i.length;s<a;++s)r.push(i[s]);while(r.length)}function __(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=AU)):e===void 0&&(e=CU);for(var r=new Vh(t),i,s=[r],a,o,l,u;i=s.pop();)if((o=e(i.data))&&(u=(o=Array.from(o)).length))for(i.children=o,l=u-1;l>=0;--l)s.push(a=o[l]=new Vh(o[l])),a.parent=i,a.depth=i.depth+1;return r.eachBefore(RU)}function kU(){return __(this).eachBefore(PU)}function CU(t){return t.children}function AU(t){return Array.isArray(t)?t[1]:null}function PU(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function RU(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Vh(t){this.data=t,this.depth=this.height=0,this.parent=null}Vh.prototype=__.prototype={constructor:Vh,count:fU,each:pU,eachAfter:gU,eachBefore:mU,find:vU,sum:yU,sort:_U,path:wU,ancestors:xU,descendants:EU,leaves:TU,links:SU,copy:kU,[Symbol.iterator]:IU};var Ix=function(){function t(r){var i=r.x,s=i===void 0?0:i,a=r.y,o=a===void 0?0:a;this.x=0,this.y=0,this.x=s,this.y=o}var e=t.prototype;return e.value=function(){return{x:this.x,y:this.y}},e.toArray=function(){return[this.x,this.y]},t}();function NU(t){return!!t&&t instanceof Element}function DU(t){return!!t&&(t instanceof SVGElement||"ownerSVGElement"in t)}function MU(t){return!!t&&"createSVGPoint"in t}function LU(t){return!!t&&"getScreenCTM"in t}function OU(t){return!!t&&"changedTouches"in t}function jU(t){return!!t&&"clientX"in t}function VU(t){return!!t&&(t instanceof Event||"nativeEvent"in t&&t.nativeEvent instanceof Event)}function su(){return su=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},su.apply(this,arguments)}var lm={x:0,y:0};function FU(t){if(!t)return su({},lm);if(OU(t))return t.changedTouches.length>0?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:su({},lm);if(jU(t))return{x:t.clientX,y:t.clientY};var e=t==null?void 0:t.target,r=e&&"getBoundingClientRect"in e?e.getBoundingClientRect():null;return r?{x:r.x+r.width/2,y:r.y+r.height/2}:su({},lm)}function kx(t,e){if(!t||!e)return null;var r=FU(e),i=DU(t)?t.ownerSVGElement:t,s=LU(i)?i.getScreenCTM():null;if(MU(i)&&s){var a=i.createSVGPoint();return a.x=r.x,a.y=r.y,a=a.matrixTransform(s.inverse()),new Ix({x:a.x,y:a.y})}var o=t.getBoundingClientRect();return new Ix({x:r.x-o.left-t.clientLeft,y:r.y-o.top-t.clientTop})}function um(t,e){if(NU(t)&&e)return kx(t,e);if(VU(t)){var r=t,i=r.target;if(i)return kx(i,r)}return null}function UU(t,e,r){return Math.max(e,Math.min(t,r))}const dt={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function Cx(t,e,r){return e===0||Math.abs(e)===1/0?Math.pow(t,r*5):t*e*r/(e+r*t)}function Ax(t,e,r,i=.15){return i===0?UU(t,e,r):t<e?-Cx(e-t,r-e,i)+e:t>r?+Cx(t-r,r-e,i)+r:t}function BU(t,[e,r],[i,s]){const[[a,o],[l,u]]=t;return[Ax(e,a,o,i),Ax(r,l,u,s)]}function $U(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zU(t){var e=$U(t,"string");return typeof e=="symbol"?e:String(e)}function At(t,e,r){return e=zU(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Px(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function yt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Px(Object(r),!0).forEach(function(i){At(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Px(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}const TC={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Rx(t){return t?t[0].toUpperCase()+t.slice(1):""}const HU=["enter","leave"];function WU(t=!1,e){return t&&!HU.includes(e)}function qU(t,e="",r=!1){const i=TC[t],s=i&&i[e]||e;return"on"+Rx(t)+Rx(s)+(WU(r,s)?"Capture":"")}const GU=["gotpointercapture","lostpointercapture"];function KU(t){let e=t.substring(2).toLowerCase();const r=!!~e.indexOf("passive");r&&(e=e.replace("passive",""));const i=GU.includes(e)?"capturecapture":"capture",s=!!~e.indexOf(i);return s&&(e=e.replace("capture","")),{device:e,capture:s,passive:r}}function YU(t,e=""){const r=TC[t],i=r&&r[e]||e;return t+i}function Ff(t){return"touches"in t}function IC(t){return Ff(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function XU(t){return Array.from(t.touches).filter(e=>{var r,i;return e.target===t.currentTarget||((r=t.currentTarget)===null||r===void 0||(i=r.contains)===null||i===void 0?void 0:i.call(r,e.target))})}function QU(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function kC(t){return Ff(t)?QU(t)[0]:t}function rv(t,e){try{const r=e.clientX-t.clientX,i=e.clientY-t.clientY,s=(e.clientX+t.clientX)/2,a=(e.clientY+t.clientY)/2,o=Math.hypot(r,i);return{angle:-(Math.atan2(r,i)*180)/Math.PI,distance:o,origin:[s,a]}}catch{}return null}function JU(t){return XU(t).map(e=>e.identifier)}function Nx(t,e){const[r,i]=Array.from(t.touches).filter(s=>e.includes(s.identifier));return rv(r,i)}function cm(t){const e=kC(t);return Ff(t)?e.identifier:e.pointerId}function Ao(t){const e=kC(t);return[e.clientX,e.clientY]}const Dx=40,Mx=800;function CC(t){let{deltaX:e,deltaY:r,deltaMode:i}=t;return i===1?(e*=Dx,r*=Dx):i===2&&(e*=Mx,r*=Mx),[e,r]}function ZU(t){var e,r;const{scrollX:i,scrollY:s,scrollLeft:a,scrollTop:o}=t.currentTarget;return[(e=i??a)!==null&&e!==void 0?e:0,(r=s??o)!==null&&r!==void 0?r:0]}function eB(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:r,altKey:i,metaKey:s,ctrlKey:a}=t;Object.assign(e,{shiftKey:r,altKey:i,metaKey:s,ctrlKey:a})}return e}function Fh(t,...e){return typeof t=="function"?t(...e):t}function tB(){}function nB(...t){return t.length===0?tB:t.length===1?t[0]:function(){let e;for(const r of t)e=r.apply(this,arguments)||e;return e}}function Lx(t,e){return Object.assign({},e,t||{})}const rB=32;class AC{constructor(e,r,i){this.ctrl=e,this.args=r,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:r,ingKey:i,args:s}=this;r[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=s,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const r=this.state,i=this.config;r._active||(this.reset(),this.computeInitial(),r._active=!0,r.target=e.target,r.currentTarget=e.currentTarget,r.lastOffset=i.from?Fh(i.from,r):r.offset,r.offset=r.lastOffset,r.startTime=r.timeStamp=e.timeStamp)}computeValues(e){const r=this.state;r._values=e,r.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:r,config:i,shared:s}=this;r.args=this.args;let a=0;if(e&&(r.event=e,i.preventDefault&&e.cancelable&&r.event.preventDefault(),r.type=e.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,eB(e)),s.down=s.pressed=s.buttons%2===1||s.touches>0,a=e.timeStamp-r.timeStamp,r.timeStamp=e.timeStamp,r.elapsedTime=r.timeStamp-r.startTime),r._active){const V=r._delta.map(Math.abs);dt.addTo(r._distance,V)}this.axisIntent&&this.axisIntent(e);const[o,l]=r._movement,[u,c]=i.threshold,{_step:h,values:f}=r;if(i.hasCustomTransform?(h[0]===!1&&(h[0]=Math.abs(o)>=u&&f[0]),h[1]===!1&&(h[1]=Math.abs(l)>=c&&f[1])):(h[0]===!1&&(h[0]=Math.abs(o)>=u&&Math.sign(o)*u),h[1]===!1&&(h[1]=Math.abs(l)>=c&&Math.sign(l)*c)),r.intentional=h[0]!==!1||h[1]!==!1,!r.intentional)return;const p=[0,0];if(i.hasCustomTransform){const[V,C]=f;p[0]=h[0]!==!1?V-h[0]:0,p[1]=h[1]!==!1?C-h[1]:0}else p[0]=h[0]!==!1?o-h[0]:0,p[1]=h[1]!==!1?l-h[1]:0;this.restrictToAxis&&!r._blocked&&this.restrictToAxis(p);const g=r.offset,T=r._active&&!r._blocked||r.active;T&&(r.first=r._active&&!r.active,r.last=!r._active&&r.active,r.active=s[this.ingKey]=r._active,e&&(r.first&&("bounds"in i&&(r._bounds=Fh(i.bounds,r)),this.setup&&this.setup()),r.movement=p,this.computeOffset()));const[N,A]=r.offset,[[b,x],[w,R]]=r._bounds;r.overflow=[N<b?-1:N>x?1:0,A<w?-1:A>R?1:0],r._movementBound[0]=r.overflow[0]?r._movementBound[0]===!1?r._movement[0]:r._movementBound[0]:!1,r._movementBound[1]=r.overflow[1]?r._movementBound[1]===!1?r._movement[1]:r._movementBound[1]:!1;const j=r._active?i.rubberband||[0,0]:[0,0];if(r.offset=BU(r._bounds,r.offset,j),r.delta=dt.sub(r.offset,g),this.computeMovement(),T&&(!r.last||a>rB)){r.delta=dt.sub(r.offset,g);const V=r.delta.map(Math.abs);dt.addTo(r.distance,V),r.direction=r.delta.map(Math.sign),r._direction=r._delta.map(Math.sign),!r.first&&a>0&&(r.velocity=[V[0]/a,V[1]/a],r.timeDelta=a)}}emit(){const e=this.state,r=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const s=this.handler(yt(yt(yt({},r),e),{},{[this.aliasKey]:e.values}));s!==void 0&&(e.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function iB([t,e],r){const i=Math.abs(t),s=Math.abs(e);if(i>s&&i>r)return"x";if(s>i&&s>r)return"y"}class oc extends AC{constructor(...e){super(...e),At(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=dt.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=dt.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const r=this.state,i=this.config;if(!r.axis&&e){const s=typeof i.axisThreshold=="object"?i.axisThreshold[IC(e)]:i.axisThreshold;r.axis=iB(r._movement,s)}r._blocked=(i.lockDirection||!!i.axis)&&!r.axis||!!i.axis&&i.axis!==r.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const sB=t=>t,Ox=.15,PC={enabled(t=!0){return t},eventOptions(t,e,r){return yt(yt({},r.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[Ox,Ox];case!1:return[0,0];default:return dt.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return dt.toVector(t)},transform(t,e,r){const i=t||r.shared.transform;return this.hasCustomTransform=!!i,i||sB},threshold(t){return dt.toVector(t,0)}},aB=0,_a=yt(yt({},PC),{},{axis(t,e,{axis:r}){if(this.lockDirection=r==="lock",!this.lockDirection)return r},axisThreshold(t=aB){return t},bounds(t={}){if(typeof t=="function")return a=>_a.bounds(t(a));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:r=1/0,top:i=-1/0,bottom:s=1/0}=t;return[[e,r],[i,s]]}}),jx={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class oB extends oc{constructor(...e){super(...e),At(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const r=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),s={left:r.left-i.left+e.offset[0],right:r.right-i.right+e.offset[0],top:r.top-i.top+e.offset[1],bottom:r.bottom-i.bottom+e.offset[1]};e._bounds=_a.bounds(s)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const r=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(r.pointerButtons)?!r.pointerButtons.includes(e.buttons):r.pointerButtons!==-1&&r.pointerButtons!==e.buttons))return;const s=this.ctrl.setEventIds(e);r.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(s&&s.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=cm(e),i._pointerActive=!0,this.computeValues(Ao(e)),this.computeInitial(),r.preventScrollAxis&&IC(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):r.delay>0?(this.setupDelayTrigger(e),r.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const r=this.state;r._active=!0,r._preventScroll=!0,r._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const r=this.state,i=this.config;if(!r._pointerActive)return;const s=cm(e);if(r._pointerId!==void 0&&s!==r._pointerId)return;const a=Ao(e);if(document.pointerLockElement===e.target?r._delta=[e.movementX,e.movementY]:(r._delta=dt.sub(a,r._values),this.computeValues(a)),dt.addTo(r._movement,r._delta),this.compute(e),r._delayed&&r.intentional){this.timeoutStore.remove("dragDelay"),r.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!r._preventScroll)if(r.axis)if(r.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){r._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const r=this.state,i=this.config;if(!r._active||!r._pointerActive)return;const s=cm(e);if(r._pointerId!==void 0&&s!==r._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[a,o]=r._distance;if(r.tap=a<=i.tapsThreshold&&o<=i.tapsThreshold,r.tap&&i.filterTaps)r._force=!0;else{const[l,u]=r._delta,[c,h]=r._movement,[f,p]=i.swipe.velocity,[g,T]=i.swipe.distance,N=i.swipe.duration;if(r.elapsedTime<N){const A=Math.abs(l/r.timeDelta),b=Math.abs(u/r.timeDelta);A>f&&Math.abs(c)>g&&(r.swipe[0]=Math.sign(l)),b>p&&Math.abs(h)>T&&(r.swipe[1]=Math.sign(u))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const r=this.config,i=r.device;r.pointerLock&&e.currentTarget.requestPointerLock(),r.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,lB(e);const r=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",r),this.eventStore.add(this.sharedConfig.window,"touch","cancel",r),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const r=jx[e.key];if(r){const i=this.state,s=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=r(this.config.keyboardDisplacement,s),i._keyboardActive=!0,dt.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in jx&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const r=this.config.device;e(r,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(r,"change",this.pointerMove.bind(this)),e(r,"end",this.pointerUp.bind(this)),e(r,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function lB(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const lc=typeof window<"u"&&window.document&&window.document.createElement;function RC(){return lc&&"ontouchstart"in window}function uB(){return RC()||lc&&window.navigator.maxTouchPoints>1}function cB(){return lc&&"onpointerdown"in window}function dB(){return lc&&"exitPointerLock"in window.document}function hB(){try{return"constructor"in GestureEvent}catch{return!1}}const ar={isBrowser:lc,gesture:hB(),touch:RC(),touchscreen:uB(),pointer:cB(),pointerLock:dB()},fB=250,pB=180,mB=.5,gB=50,vB=250,yB=10,Vx={mouse:0,touch:0,pen:8},_B=yt(yt({},_a),{},{device(t,e,{pointer:{touch:r=!1,lock:i=!1,mouse:s=!1}={}}){return this.pointerLock=i&&ar.pointerLock,ar.touch&&r?"touch":this.pointerLock?"mouse":ar.pointer&&!s?"pointer":ar.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:r}){if(this.preventScrollDelay=typeof r=="number"?r:r||r===void 0&&t?fB:void 0,!(!ar.touchscreen||r===!1))return t||(r!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:r=!0,buttons:i=1,keys:s=!0}={}}){return this.pointerButtons=i,this.keys=s,!this.pointerLock&&this.device==="pointer"&&r},threshold(t,e,{filterTaps:r=!1,tapsThreshold:i=3,axis:s=void 0}){const a=dt.toVector(t,r?i:s?1:0);return this.filterTaps=r,this.tapsThreshold=i,a},swipe({velocity:t=mB,distance:e=gB,duration:r=vB}={}){return{velocity:this.transform(dt.toVector(t)),distance:this.transform(dt.toVector(e)),duration:r}},delay(t=0){switch(t){case!0:return pB;case!1:return 0;default:return t}},axisThreshold(t){return t?yt(yt({},Vx),t):Vx},keyboardDisplacement(t=yB){return t}});function NC(t){const[e,r]=t.overflow,[i,s]=t._delta,[a,o]=t._direction;(e<0&&i>0&&a<0||e>0&&i<0&&a>0)&&(t._movement[0]=t._movementBound[0]),(r<0&&s>0&&o<0||r>0&&s<0&&o>0)&&(t._movement[1]=t._movementBound[1])}const wB=30,bB=100;class xB extends AC{constructor(...e){super(...e),At(this,"ingKey","pinching"),At(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:r,lastOffset:i}=this.state;e==="wheel"?this.state.offset=dt.add(r,i):this.state.offset=[(1+r[0])*i[0],r[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:r}=this.state;this.state.movement=[e[0]/r[0],e[1]-r[1]]}axisIntent(){const e=this.state,[r,i]=e._movement;if(!e.axis){const s=Math.abs(r)*wB-Math.abs(i);s<0?e.axis="angle":s>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const r=this.state,i=this.ctrl.touchIds;if(r._active&&r._touchIds.every(a=>i.has(a))||i.size<2)return;this.start(e),r._touchIds=Array.from(i).slice(0,2);const s=Nx(e,r._touchIds);s&&this.pinchStart(e,s)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const r=this.state,i=r._pointerEvents,s=this.ctrl.pointerIds;if(r._active&&Array.from(i.keys()).every(o=>s.has(o))||(i.size<2&&i.set(e.pointerId,e),r._pointerEvents.size<2))return;this.start(e);const a=rv(...Array.from(i.values()));a&&this.pinchStart(e,a)}pinchStart(e,r){const i=this.state;i.origin=r.origin,this.computeValues([r.distance,r.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const r=Nx(e,this.state._touchIds);r&&this.pinchMove(e,r)}pointerMove(e){const r=this.state._pointerEvents;if(r.has(e.pointerId)&&r.set(e.pointerId,e),!this.state._active)return;const i=rv(...Array.from(r.values()));i&&this.pinchMove(e,i)}pinchMove(e,r){const i=this.state,s=i._values[1],a=r.angle-s;let o=0;Math.abs(a)>270&&(o+=Math.sign(a)),this.computeValues([r.distance,r.angle-360*o]),i.origin=r.origin,i.turns=o,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(r=>!this.ctrl.touchIds.has(r))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const r=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}r._pointerEvents.has(e.pointerId)&&r._pointerEvents.delete(e.pointerId),r._active&&r._pointerEvents.size<2&&(r._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const r=this.state;r._active||(this.start(e),this.computeValues([e.scale,e.rotation]),r.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const r=this.state;this.computeValues([e.scale,e.rotation]),r.origin=[e.clientX,e.clientY];const i=r._movement;r._movement=[e.scale-1,e.rotation],r._delta=dt.sub(r._movement,i),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const r=this.config.modifierKey;r&&(Array.isArray(r)?!r.find(i=>e[i]):!e[r])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-CC(e)[1]/bB*i.offset[0],0],dt.addTo(i._movement,i._delta),NC(i),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const r=this.config.device;r&&(e(r,"start",this[r+"Start"].bind(this)),e(r,"change",this[r+"Move"].bind(this)),e(r,"end",this[r+"End"].bind(this)),e(r,"cancel",this[r+"End"].bind(this)),e("lostPointerCapture","",this[r+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const EB=yt(yt({},PC),{},{device(t,e,{shared:r,pointer:{touch:i=!1}={}}){if(r.target&&!ar.touch&&ar.gesture)return"gesture";if(ar.touch&&i)return"touch";if(ar.touchscreen){if(ar.pointer)return"pointer";if(ar.touch)return"touch"}},bounds(t,e,{scaleBounds:r={},angleBounds:i={}}){const s=o=>{const l=Lx(Fh(r,o),{min:-1/0,max:1/0});return[l.min,l.max]},a=o=>{const l=Lx(Fh(i,o),{min:-1/0,max:1/0});return[l.min,l.max]};return typeof r!="function"&&typeof i!="function"?[s(),a()]:o=>[s(o),a(o)]},threshold(t,e,r){return this.lockDirection=r.axis==="lock",dt.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});class TB extends oc{constructor(...e){super(...e),At(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(Ao(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const r=Ao(e),i=this.state;i._delta=dt.sub(r,i._values),dt.addTo(i._movement,i._delta),this.computeValues(r),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const SB=yt(yt({},_a),{},{mouseOnly:(t=!0)=>t});class IB extends oc{constructor(...e){super(...e),At(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const r=this.state,i=ZU(e);r._delta=dt.sub(i,r._values),dt.addTo(r._movement,r._delta),this.computeValues(i),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const kB=_a;class CB extends oc{constructor(...e){super(...e),At(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const r=this.state;r._delta=CC(e),dt.addTo(r._movement,r._delta),NC(r),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const AB=_a;class PB extends oc{constructor(...e){super(...e),At(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(Ao(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const r=this.state;if(!r._active)return;r._active=!1;const i=Ao(e);r._movement=r._delta=dt.sub(i,r._values),this.computeValues(i),this.compute(e),r.delta=r.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const RB=yt(yt({},_a),{},{mouseOnly:(t=!0)=>t}),w_=new Map,iv=new Map;function NB(t){w_.set(t.key,t.engine),iv.set(t.key,t.resolver)}const DB={key:"drag",engine:oB,resolver:_B},MB={key:"hover",engine:PB,resolver:RB},LB={key:"move",engine:TB,resolver:SB},OB={key:"pinch",engine:xB,resolver:EB},jB={key:"scroll",engine:IB,resolver:kB},VB={key:"wheel",engine:CB,resolver:AB};function FB(t,e){if(t==null)return{};var r={},i=Object.keys(t),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function UB(t,e){if(t==null)return{};var r=FB(t,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}const BB={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=ar.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},$B=["target","eventOptions","window","enabled","transform"];function $d(t={},e){const r={};for(const[i,s]of Object.entries(e))switch(typeof s){case"function":r[i]=s.call(r,t[i],i,t);break;case"object":r[i]=$d(t[i],s);break;case"boolean":s&&(r[i]=t[i]);break}return r}function zB(t,e,r={}){const i=t,{target:s,eventOptions:a,window:o,enabled:l,transform:u}=i,c=UB(i,$B);if(r.shared=$d({target:s,eventOptions:a,window:o,enabled:l,transform:u},BB),e){const h=iv.get(e);r[e]=$d(yt({shared:r.shared},c),h)}else for(const h in c){const f=iv.get(h);f&&(r[h]=$d(yt({shared:r.shared},c[h]),f))}return r}class DC{constructor(e,r){At(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=r}add(e,r,i,s,a){const o=this._listeners,l=YU(r,i),u=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=yt(yt({},u),a);e.addEventListener(l,s,c);const h=()=>{e.removeEventListener(l,s,c),o.delete(h)};return o.add(h),h}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class HB{constructor(){At(this,"_timeouts",new Map)}add(e,r,i=140,...s){this.remove(e),this._timeouts.set(e,window.setTimeout(r,i,...s))}remove(e){const r=this._timeouts.get(e);r&&window.clearTimeout(r)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class WB{constructor(e){At(this,"gestures",new Set),At(this,"_targetEventStore",new DC(this)),At(this,"gestureEventStores",{}),At(this,"gestureTimeoutStores",{}),At(this,"handlers",{}),At(this,"config",{}),At(this,"pointerIds",new Set),At(this,"touchIds",new Set),At(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),qB(this,e)}setEventIds(e){if(Ff(e))return this.touchIds=new Set(JU(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,r){this.handlers=e,this.nativeHandlers=r}applyConfig(e,r){this.config=zB(e,r,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const r=this.config.shared,i={};let s;if(!(r.target&&(s=r.target(),!s))){if(r.enabled){for(const o of this.gestures){const l=this.config[o],u=Fx(i,l.eventOptions,!!s);if(l.enabled){const c=w_.get(o);new c(this,e,o).bind(u)}}const a=Fx(i,r.eventOptions,!!s);for(const o in this.nativeHandlers)a(o,"",l=>this.nativeHandlers[o](yt(yt({},this.state.shared),{},{event:l,args:e})),void 0,!0)}for(const a in i)i[a]=nB(...i[a]);if(!s)return i;for(const a in i){const{device:o,capture:l,passive:u}=KU(a);this._targetEventStore.add(s,o,"",i[a],{capture:l,passive:u})}}}}function Pa(t,e){t.gestures.add(e),t.gestureEventStores[e]=new DC(t,e),t.gestureTimeoutStores[e]=new HB}function qB(t,e){e.drag&&Pa(t,"drag"),e.wheel&&Pa(t,"wheel"),e.scroll&&Pa(t,"scroll"),e.move&&Pa(t,"move"),e.pinch&&Pa(t,"pinch"),e.hover&&Pa(t,"hover")}const Fx=(t,e,r)=>(i,s,a,o={},l=!1)=>{var u,c;const h=(u=o.capture)!==null&&u!==void 0?u:e.capture,f=(c=o.passive)!==null&&c!==void 0?c:e.passive;let p=l?i:qU(i,s,h);r&&f&&(p+="Passive"),t[p]=t[p]||[],t[p].push(a)},GB=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function KB(t){const e={},r={},i=new Set;for(let s in t)GB.test(s)?(i.add(RegExp.lastMatch),r[s]=t[s]):e[s]=t[s];return[r,e,i]}function Ra(t,e,r,i,s,a){if(!t.has(r)||!w_.has(i))return;const o=r+"Start",l=r+"End",u=c=>{let h;return c.first&&o in e&&e[o](c),r in e&&(h=e[r](c)),c.last&&l in e&&e[l](c),h};s[i]=u,a[i]=a[i]||{}}function YB(t,e){const[r,i,s]=KB(t),a={};return Ra(s,r,"onDrag","drag",a,e),Ra(s,r,"onWheel","wheel",a,e),Ra(s,r,"onScroll","scroll",a,e),Ra(s,r,"onPinch","pinch",a,e),Ra(s,r,"onMove","move",a,e),Ra(s,r,"onHover","hover",a,e),{handlers:a,config:e,nativeHandlers:i}}function XB(t,e={},r,i){const s=De.useMemo(()=>new WB(t),[]);if(s.applyHandlers(t,i),s.applyConfig(e,r),De.useEffect(s.effect.bind(s)),De.useEffect(()=>s.clean.bind(s),[]),e.target===void 0)return s.bind.bind(s)}function QB(t){return t.forEach(NB),function(r,i){const{handlers:s,nativeHandlers:a,config:o}=YB(r,i||{});return XB(s,o,void 0,a)}}function JB(t,e){return QB([DB,OB,jB,VB,LB,MB])(t,e||{})}function ZB(){return{scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0}}function MC(t){var e=t.scaleX,r=e===void 0?1:e,i=t.scaleY,s=i===void 0?1:i,a=t.translateX,o=a===void 0?0:a,l=t.translateY,u=l===void 0?0:l,c=t.skewX,h=c===void 0?0:c,f=t.skewY,p=f===void 0?0:f;return{scaleX:r,scaleY:s,translateX:o,translateY:u,skewX:h,skewY:p}}function LC(t){var e=t.scaleX,r=t.scaleY,i=t.translateX,s=t.translateY,a=t.skewX,o=t.skewY,l=e*r-o*a;return{scaleX:r/l,scaleY:e/l,translateX:(r*i-a*s)/-l,translateY:(o*i-e*s)/l,skewX:a/-l,skewY:o/-l}}function OC(t,e){var r=e.x,i=e.y;return{x:t.scaleX*r+t.skewX*i+t.translateX,y:t.skewY*r+t.scaleY*i+t.translateY}}function dm(t,e){var r=e.x,i=e.y;return OC(LC(t),{x:r,y:i})}function e6(t,e){e===void 0&&(e=void 0);var r=e||t;return MC({scaleX:t,scaleY:r})}function hm(t,e){return MC({translateX:t,translateY:e})}function Ux(t,e){return{scaleX:t.scaleX*e.scaleX+t.skewX*e.skewY,scaleY:t.skewY*e.skewX+t.scaleY*e.scaleY,translateX:t.scaleX*e.translateX+t.skewX*e.translateY+t.translateX,translateY:t.skewY*e.translateX+t.scaleY*e.translateY+t.translateY,skewX:t.scaleX*e.skewX+t.skewX*e.scaleY,skewY:t.skewY*e.scaleX+t.scaleY*e.skewY}}function sv(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];switch(e.length){case 0:throw new Error("composeMatrices() requires arguments: was called with no args");case 1:return e[0];case 2:return Ux(e[0],e[1]);default:{var i=e[0],s=e[1],a=e.slice(2),o=Ux(i,s);return sv.apply(void 0,[o].concat(a))}}}function av(){return av=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},av.apply(this,arguments)}var t6={scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0},n6=function(e){return-e.deltaY>0?{scaleX:1.1,scaleY:1.1}:{scaleX:.9,scaleY:.9}},r6=function(e){var r=e.offset,i=r[0],s=e.lastOffset,a=s[0];return{scaleX:i-a<0?.9:1.1,scaleY:i-a<0?.9:1.1}};function jC(t){var e=t.scaleXMin,r=e===void 0?0:e,i=t.scaleXMax,s=i===void 0?1/0:i,a=t.scaleYMin,o=a===void 0?0:a,l=t.scaleYMax,u=l===void 0?1/0:l,c=t.initialTransformMatrix,h=c===void 0?t6:c,f=t.wheelDelta,p=f===void 0?n6:f,g=t.pinchDelta,T=g===void 0?r6:g,N=t.width,A=t.height,b=t.constrain,x=t.children,w=L.useRef(null),R=L.useRef(h),j=L.useState(h),V=j[0],C=j[1],I=L.useState(!1),y=I[0],_=I[1],S=L.useState(void 0),M=S[0],D=S[1],K=L.useState(void 0),ee=K[0],re=K[1],pe=L.useCallback(function(F,U){if(b)return b(F,U);var z=F.scaleX,oe=F.scaleY,J=z>s||z<r,ce=oe>u||oe<o;return J||ce?U:F},[b,r,s,o,u]),q=L.useCallback(function(F){C(function(U){var z=pe(F,U);return R.current=z,z})},[pe]),Y=L.useCallback(function(F){var U=F.x,z=F.y;return OC(V,{x:U,y:z})},[V]),ie=L.useCallback(function(F){var U=F.x,z=F.y;return dm(V,{x:U,y:z})},[V]),ne=L.useCallback(function(){q(h)},[h,q]),W=L.useCallback(function(F){var U=F.scaleX,z=F.scaleY,oe=F.point,J=z||U,ce=oe||{x:N/2,y:A/2},he=dm(R.current,ce),we=sv(R.current,hm(he.x,he.y),e6(U,J),hm(-he.x,-he.y));if(q(we),y){var be=R.current,ye=be.translateX,He=be.translateY;re(oe),D({translateX:ye,translateY:He})}},[A,N,y,q]),H=L.useCallback(function(F){var U=F.translateX,z=F.translateY,oe=sv(V,hm(U,z));q(oe)},[q,V]),Q=L.useCallback(function(F){var U=F.translateX,z=F.translateY,oe=av({},V,{translateX:U,translateY:z});q(oe)},[q,V]),X=L.useCallback(function(F){var U=F.x,z=F.y,oe=dm(V,{x:U,y:z});Q({translateX:oe.x,translateY:oe.y})},[Q,V]),de=L.useCallback(function(){return LC(V)},[V]),ve=L.useCallback(function(){var F=de(),U=F.translateX,z=F.translateY,oe=F.scaleX,J=F.scaleY,ce=F.skewX,he=F.skewY;return"matrix("+oe+", "+he+", "+ce+", "+J+", "+U+", "+z+")"},[de]),Oe=L.useCallback(function(F){var U=V.translateX,z=V.translateY;re(um(F)||void 0),D({translateX:U,translateY:z}),_(!0)},[V]),Ne=L.useCallback(function(F,U){var z,oe;if(!(!y||!ee||!M)){var J=um(F),ce=J?-(ee.x-J.x):-ee.x,he=J?-(ee.y-J.y):-ee.y,we=M.translateX+ce;U!=null&&U.offsetX&&(we+=(z=U==null?void 0:U.offsetX)!=null?z:0);var be=M.translateY+he;U!=null&&U.offsetY&&(be+=(oe=U==null?void 0:U.offsetY)!=null?oe:0),Q({translateX:we,translateY:be})}},[y,Q,ee,M]),Ge=L.useCallback(function(){re(void 0),D(void 0),_(!1)},[]),ze=L.useCallback(function(F){F.preventDefault();var U=um(F)||void 0,z=p(F),oe=z.scaleX,J=z.scaleY;W({scaleX:oe,scaleY:J,point:U})},[W,p]),Ye=L.useCallback(function(F){var U=F.origin,z=U[0],oe=U[1],J=F.memo,ce=J;if(w.current){var he,we=(he=ce)!=null?he:w.current.getBoundingClientRect(),be=we.top,ye=we.left;ce||(ce={top:be,left:ye});var He=T(F),Fn=He.scaleX,Dr=He.scaleY;W({scaleX:Fn,scaleY:Dr,point:{x:z-ye,y:oe-be}})}return ce},[W,T]),Xe=L.useCallback(function(){var F=V.translateX,U=V.translateY,z=V.scaleX,oe=V.scaleY,J=V.skewX,ce=V.skewY;return"matrix("+z+", "+ce+", "+J+", "+oe+", "+F+", "+U+")"},[V]),Qe=L.useCallback(function(){var F={x:N/2,y:A/2},U=ie(F);H({translateX:U.x-F.x,translateY:U.y-F.y})},[A,N,ie,H]),rt=L.useCallback(function(){q(ZB())},[q]);JB({onDragStart:function(U){var z=U.event;z instanceof KeyboardEvent||Oe(z)},onDrag:function(U){var z=U.event,oe=U.pinching,J=U.cancel;oe?(J(),Ge()):z instanceof KeyboardEvent||Ne(z)},onDragEnd:Ge,onPinch:Ye,onWheel:function(U){var z=U.event,oe=U.active,J=U.pinching;J||!oe||ze(z)}},{target:w,eventOptions:{passive:!1},drag:{filterTaps:!0}});var P={initialTransformMatrix:h,transformMatrix:V,isDragging:y,center:Qe,clear:rt,scale:W,translate:H,translateTo:X,setTranslate:Q,setTransformMatrix:q,reset:ne,handleWheel:ze,handlePinch:Ye,dragEnd:Ge,dragMove:Ne,dragStart:Oe,toString:Xe,invert:de,toStringInvert:ve,applyToPoint:Y,applyInverseToPoint:ie,containerRef:w};return De.createElement(De.Fragment,null,x(P))}jC.propTypes={width:nt.number.isRequired,height:nt.number.isRequired,wheelDelta:nt.func,scaleXMin:nt.number,scaleXMax:nt.number,scaleYMin:nt.number,scaleYMax:nt.number,constrain:nt.func,children:nt.func.isRequired};function i6(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var VC=i6,s6=typeof Vc=="object"&&Vc&&Vc.Object===Object&&Vc,a6=s6,o6=a6,l6=typeof self=="object"&&self&&self.Object===Object&&self,u6=o6||l6||Function("return this")(),FC=u6,c6=FC,d6=function(){return c6.Date.now()},h6=d6,f6=/\s/;function p6(t){for(var e=t.length;e--&&f6.test(t.charAt(e)););return e}var m6=p6,g6=m6,v6=/^\s+/;function y6(t){return t&&t.slice(0,g6(t)+1).replace(v6,"")}var _6=y6,w6=FC,b6=w6.Symbol,UC=b6,Bx=UC,BC=Object.prototype,x6=BC.hasOwnProperty,E6=BC.toString,El=Bx?Bx.toStringTag:void 0;function T6(t){var e=x6.call(t,El),r=t[El];try{t[El]=void 0;var i=!0}catch{}var s=E6.call(t);return i&&(e?t[El]=r:delete t[El]),s}var S6=T6,I6=Object.prototype,k6=I6.toString;function C6(t){return k6.call(t)}var A6=C6,$x=UC,P6=S6,R6=A6,N6="[object Null]",D6="[object Undefined]",zx=$x?$x.toStringTag:void 0;function M6(t){return t==null?t===void 0?D6:N6:zx&&zx in Object(t)?P6(t):R6(t)}var L6=M6;function O6(t){return t!=null&&typeof t=="object"}var j6=O6,V6=L6,F6=j6,U6="[object Symbol]";function B6(t){return typeof t=="symbol"||F6(t)&&V6(t)==U6}var $6=B6,z6=_6,Hx=VC,H6=$6,Wx=NaN,W6=/^[-+]0x[0-9a-f]+$/i,q6=/^0b[01]+$/i,G6=/^0o[0-7]+$/i,K6=parseInt;function Y6(t){if(typeof t=="number")return t;if(H6(t))return Wx;if(Hx(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Hx(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=z6(t);var r=q6.test(t);return r||G6.test(t)?K6(t.slice(2),r?2:8):W6.test(t)?Wx:+t}var X6=Y6,Q6=VC,fm=h6,qx=X6,J6="Expected a function",Z6=Math.max,e$=Math.min;function t$(t,e,r){var i,s,a,o,l,u,c=0,h=!1,f=!1,p=!0;if(typeof t!="function")throw new TypeError(J6);e=qx(e)||0,Q6(r)&&(h=!!r.leading,f="maxWait"in r,a=f?Z6(qx(r.maxWait)||0,e):a,p="trailing"in r?!!r.trailing:p);function g(V){var C=i,I=s;return i=s=void 0,c=V,o=t.apply(I,C),o}function T(V){return c=V,l=setTimeout(b,e),h?g(V):o}function N(V){var C=V-u,I=V-c,y=e-C;return f?e$(y,a-I):y}function A(V){var C=V-u,I=V-c;return u===void 0||C>=e||C<0||f&&I>=a}function b(){var V=fm();if(A(V))return x(V);l=setTimeout(b,N(V))}function x(V){return l=void 0,p&&i?g(V):(i=s=void 0,o)}function w(){l!==void 0&&clearTimeout(l),c=0,i=u=s=l=void 0}function R(){return l===void 0?o:x(fm())}function j(){var V=fm(),C=A(V);if(i=arguments,s=this,u=V,C){if(l===void 0)return T(u);if(f)return clearTimeout(l),l=setTimeout(b,e),g(u)}return l===void 0&&(l=setTimeout(b,e)),o}return j.cancel=w,j.flush=R,j}var n$=t$;const r$=Oo(n$),Na={top:40,right:40,bottom:40,left:40};function i$(t,e){const r=t.split(" "),i=[];let s="";return r.forEach(a=>{(s+" "+a).trim().length>e&&s?(i.push(s),s=a):s=s?`${s} ${a}`:a}),s&&i.push(s),i}function s$(){var S;const[t,e]=L.useState(null),[r,i]=L.useState(!0),[s,a]=L.useState(null),[o,l]=L.useState(null),[u,c]=L.useState(null),[h,f]=L.useState({width:window.innerWidth,height:window.innerHeight}),[p,g]=L.useState(150),[T,N]=L.useState(""),[A,b]=L.useState(1),x=Jr(),w=L.useCallback(r$(M=>{l(M)},50),[]);L.useEffect(()=>{const M=()=>{f({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",M),()=>window.removeEventListener("resize",M)},[]),L.useEffect(()=>{(async()=>{try{const D={},ee=(await Mn(fn(Rt,"interviewSummaries"))).docs.map(async pe=>{const q=fn(Rt,"interviewSummaries",pe.id,"subSummaries");(await Mn(q)).forEach(ie=>{const ne=ie.data();ne.keywords&&ne.keywords.split(",").map(W=>W.trim().toLowerCase()).forEach(W=>{D[W]=(D[W]||0)+1})})});await Promise.all(ee);const re={name:"keywords",children:Object.entries(D).map(([pe,q])=>({name:pe,value:q}))};e(re),i(!1)}catch(D){console.error("Error fetching data:",D),a("Error loading data"),i(!1)}})()},[]);const R=L.useMemo(()=>{if(!t)return null;let M=t.children;T&&(M=M.filter(re=>re.name.toLowerCase().includes(T.toLowerCase()))),M=M.filter(re=>re.value>=A),M=[...M].sort((re,pe)=>pe.value-re.value);const D=M.slice(0,p),K=M.slice(p),ee={name:"keywords",children:D};if(K.length>0&&!T){const re=K.reduce((q,Y)=>q+Y.value,0),pe=K.length;ee.children.push({name:`${pe} more keywords`,value:re,isOthers:!0})}return ee},[t,p,T,A]);if(r)return m.jsxs("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:[m.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),m.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]});if(s)return m.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-50 px-6",children:m.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg max-w-xl text-center",children:s})});if(!R)return null;const j=__(R).sum(M=>M.value).sort((M,D)=>D.value-M.value),{width:V,height:C}=h,I=V-Na.left-Na.right,y=C-Na.top-Na.bottom,_=M=>{if(M.data.isOthers){g(D=>D+50);return}u&&u.name===M.data.name?c(null):c({name:M.data.name,value:M.data.value,x:M.x,y:M.y,r:M.r})};return j.children&&Math.max(...j.children.map(M=>M.value)),m.jsxs("div",{className:"w-full h-screen relative bg-gray-50 font-sans overflow-hidden",children:[m.jsxs("div",{className:"absolute top-4 left-4 z-40 bg-white bg-opacity-90 p-4 rounded-lg shadow-sm w-72",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Keyword Visualization"}),m.jsx("div",{className:"mb-3",children:m.jsx("input",{type:"text",placeholder:"Search keywords...",value:T,onChange:M=>N(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Visible Keywords"}),m.jsxs("select",{value:p,onChange:M=>g(Number(M.target.value)),className:"w-full px-2 py-1.5 border border-gray-300 rounded-md text-sm",children:[m.jsx("option",{value:"50",children:"Top 50"}),m.jsx("option",{value:"100",children:"Top 100"}),m.jsx("option",{value:"150",children:"Top 150"}),m.jsx("option",{value:"200",children:"Top 200"}),m.jsx("option",{value:"300",children:"Top 300"}),m.jsx("option",{value:"500",children:"Top 500"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Min. Frequency"}),m.jsxs("select",{value:A,onChange:M=>b(Number(M.target.value)),className:"w-full px-2 py-1.5 border border-gray-300 rounded-md text-sm",children:[m.jsx("option",{value:"1",children:"1+"}),m.jsx("option",{value:"2",children:"2+"}),m.jsx("option",{value:"3",children:"3+"}),m.jsx("option",{value:"5",children:"5+"}),m.jsx("option",{value:"10",children:"10+"})]})]})]}),m.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Showing ",((S=j.children)==null?void 0:S.length)||0," keywords",t&&t.children&&` of ${t.children.length} total`]})]}),u&&m.jsxs("div",{className:"absolute top-36 left-4 z-50 bg-white rounded-xl shadow-md p-4 max-w-xs border border-gray-200",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 m-0",children:u.name}),m.jsx("button",{onClick:()=>c(null),className:"bg-transparent border-0 text-gray-500 text-base cursor-pointer p-1 flex items-center justify-center rounded hover:bg-gray-100 hover:text-gray-900 transition-colors",children:""})]}),m.jsxs("p",{className:"text-sm text-gray-600 mt-2 mb-4",children:["This topic appears ",m.jsx("strong",{children:u.value})," times across all interviews."]}),m.jsx("div",{children:m.jsxs("button",{onClick:()=>x(`/playlist-builder?keywords=${encodeURIComponent(u.name)}`),className:"w-full py-2.5 px-4 bg-blue-600 text-white font-medium text-sm rounded-lg cursor-pointer flex items-center justify-center hover:bg-blue-700 transition-colors shadow-sm",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4 mr-2",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),"Watch related segments"]})})]}),m.jsx(jC,{width:V,height:C,scaleXMin:.5,scaleXMax:3,scaleYMin:.5,scaleYMax:3,initialTransformMatrix:{scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0},children:M=>m.jsxs("div",{className:"w-full h-full overflow-hidden relative touch-none flex justify-center items-center",children:[m.jsxs("svg",{width:"100%",height:"100%",ref:M.containerRef,className:"bg-white rounded-xl shadow-md mx-4 my-4 mt-20",children:[m.jsx("rect",{width:"100%",height:"100%",fill:"#ffffff",rx:14,onClick:()=>{M.reset(),c(null)}}),m.jsx(EC,{root:j,size:[I,y],padding:16,children:D=>{const K=D.descendants().filter(ee=>!ee.children);return m.jsx(jh,{transform:M.toString(),top:Na.top+(y/2-D.r),left:Na.left+(I/2-D.r),children:K.map((ee,re)=>{const pe=Math.max(ee.r,20),q=u&&u.name===ee.data.name,Y=ee.data.isOthers,ie=Math.min(pe/3.5,14),ne=Math.max(5,Math.floor(pe/3)),W=i$(ee.data.name,ne),H=ie,Q=W.length>1?-((W.length-1)*H)/2:0,X=q?"#2563eb":Y?"#9ca3af":"#d1d5db",de=q?3:1,ve=q?"#f0f7ff":Y?"#f3f4f6":"#ffffff";return m.jsxs("g",{transform:`translate(${ee.x}, ${ee.y})`,onMouseEnter:()=>w({name:ee.data.name,value:ee.data.value,x:ee.x,y:ee.y,isOthers:ee.data.isOthers}),onMouseLeave:()=>w(null),onClick:()=>_(ee),className:"cursor-pointer",children:[m.jsx("circle",{r:pe,fill:ve,stroke:X,strokeWidth:de,style:{transition:"fill 0.3s, stroke 0.3s, stroke-width 0.3s"}}),m.jsx("text",{textAnchor:"middle",fontSize:ie,fontWeight:q?"bold":"normal",fill:Y?"#6b7280":"#111827",pointerEvents:"none",style:{fontFamily:"Inter, system-ui, sans-serif"},children:W.map((Oe,Ne)=>m.jsx("tspan",{x:"0",dy:Ne===0?Q:H,children:Oe},Ne))})]},`circle-${re}`)})})}})]}),o&&!u&&m.jsxs("div",{className:"absolute bg-gray-900 bg-opacity-90 text-white p-2 px-3 rounded-lg pointer-events-none text-sm z-50 shadow-md max-w-xs",style:{left:M.transformMatrix.translateX+o.x*M.transformMatrix.scaleX,top:M.transformMatrix.translateY+o.y*M.transformMatrix.scaleY-20},children:[m.jsx("div",{className:"font-semibold",children:o.name}),m.jsxs("div",{children:[o.value," mentions"]}),m.jsx("div",{className:"text-xs mt-1 text-blue-200",children:o.isOthers?"Click to show more keywords":"Click to explore"})]})]})}),m.jsxs("div",{className:"absolute bottom-4 right-4 bg-white bg-opacity-90 py-2 px-3 rounded-lg text-xs text-gray-600 shadow-sm flex items-center",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3.5 h-3.5 mr-1.5 text-gray-500",children:m.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})}),m.jsx("span",{children:"Scroll to zoom  Drag to pan  Click bubble to select"})]})]})}const a$="modulepreload",o$=function(t){return"/civil-rights-history-project/"+t},Gx={},l$=function(e,r,i){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(u=>{if(u=o$(u),u in Gx)return;Gx[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":a$,c||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),c)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},u$=L.lazy(()=>l$(()=>import("./MapComponent-DK9prvzF.js").then(t=>t.M),[]));function c$(){const[t,e]=L.useState(!0),[r,i]=L.useState(null),[s,a]=L.useState([]);L.useEffect(()=>{u()},[]);const o=async c=>{try{await new Promise(p=>setTimeout(p,1e3));const f=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(c)}`)).json();if(f.length>0)return[parseFloat(f[0].lat),parseFloat(f[0].lon)]}catch(h){console.error("Error fetching coordinates:",h)}return null},l=c=>{if(!c)return null;const h=/(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,f=c==null?void 0:c.match(h);return f&&f[1]?f[1]:null},u=async()=>{try{e(!0);const c=await Mn(fn(Rt,"interviewSummaries")),h=[];for(const f of c.docs){const p=f.data(),{birthplace:g,name:T,videoEmbedLink:N}=p;if(g){const A=await o(g);if(A){const b=l(N),x=b?`https://img.youtube.com/vi/${b}/default.jpg`:"";h.push({position:A,name:T,birthplace:g,thumbnailURL:x,documentName:f.id})}}}console.log("Markers data:",h),a(h),e(!1)}catch(c){console.error("Error fetching birthplaces:",c),i("Failed to load map data"),e(!1)}};return r?m.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:m.jsx("div",{className:"text-red-500",children:r})}):m.jsxs("div",{className:"map-container",children:[!t&&s.length>0&&m.jsx(L.Suspense,{fallback:m.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:m.jsx(u$,{markers:s})}),t&&m.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})]})}const Xr=navigator?navigator.userAgent.toLowerCase():"no-user-agent-specified",Po=document?document.documentElement:null,d$=Xr?Xr.indexOf("phantom")!==-1:!1,uc=window&&"ActiveXObject"in window;uc&&Xr.match(/MSIE 9/i);const Uf=Xr.indexOf("webkit")!==-1;Xr.indexOf("android");const h$=Xr.search("android [23]")!==-1,wa=window?typeof window.orientation<"u":!1,f$=navigator&&window?navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&!window.PointerEvent:!1,p$=navigator&&window?window.PointerEvent&&navigator.pointerEnabled&&navigator.maxTouchPoints:f$,$C=window?window.opera:!1;Xr.indexOf("gecko");const Ro=Xr.indexOf("gecko")!==-1&&!Uf&&!$C&&!uc;Xr.indexOf("chrome");const m$=Xr.indexOf("edge/")!==-1;Po&&uc&&"transition"in Po.style;window&&"WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix;Po&&"MozPerspective"in Po.style;Po&&"OTransition"in Po.style;let Kx=window?"devicePixelRatio"in window&&window.devicePixelRatio>1:!1;if(!Kx&&window&&"matchMedia"in window){let t=window.matchMedia("(min-resolution:144dpi)");Kx=t&&t.matches}const Gr=window&&!window.L_NO_TOUCH&&!d$&&(p$||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);function g$(){var t=window.innerWidth,e=window.innerHeight,r="portrait";return t>e&&(r="landscape"),r}function cc(t){return typeof t=="string"?document.getElementById(t):t}function fe(t,e,r){var i=document.createElement(t);return i.className=e,r&&r.appendChild(i),i}function Hl(t,e){var r=fe("button",t,e);return r.type="button",r}function ov(t){for(var e={x:0,y:0};t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;return e}function zC(t){for(var e=document.documentElement.style,r=0;r<t.length;r++)if(t[r]in e)return t[r];return!1}zC(["transition","webkitTransition","OTransition","MozTransition","msTransition"]);zC(["transformProperty","WebkitTransform","OTransform","MozTransform","msTransform"]);class Ue extends Error{constructor(e,r){super(),this.name="TLError",this.message=e||"error",this.message_key=this.message,this.detail=r||""}}const Yx={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function HC(t){Yx[t.toLowerCase()]&&(t=Yx[t.toLowerCase()]);var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(i,s,a,o){return s+s+a+a+o+o});var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null}function et(t,e){var r;for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}function v$(t){return t==null?!1:t==!0||String(t).toLowerCase()=="true"||Number(t)==1}function Fa(t){for(var e=Array.prototype.slice.call(arguments,1),r=0,i=e.length,s;r<i;r++)s=e[r]||{},et(t,s);return t}const WC=[];function y$(t){WC.push(t)}function Be(t){WC.forEach(e=>{try{e(t)}catch(r){console&&console.log&&console.log("Error handling trace",r)}})}function si(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}const Xx=function(){var t=0,e="_tl_id";return function(r){return r[e]=r[e]||++t,r[e]}}();function Kn(t){return t&&typeof t.replace=="function"?t.replace(/^\s+|\s+$/g,""):""}function Tn(t,...e){for(let i of e)for(var r of Object.getOwnPropertyNames(i.prototype))t.prototype[r]=i.prototype[r]}function _$(t,e){if(e||(e=ca(6)),!(e in t))return e;var r=e.match(/^(.+)(-\d+)?$/)[1],i=[];for(let a in t)a.match(/^(.+?)(-\d+)?$/)[1]==r&&i.push(a);e=r+"-"+(i.length+1);for(var s=i.length;i.indexOf(e)!=-1;s++)e=r+"-"+s;return e}function w$(t){var e=[];if(Object.keys)e=Object.keys(t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);for(var i=0;i<e.length;i++){var s=e[i];if(t[s]!=null&&typeof t[s]!="string"||Kn(t[s]).length!=0)return!1}return!0}function pm(t){t=Kn(t),t=t.toLowerCase();for(var e="/_,:;",r="aaaaaeeeeeiiiiooooouuuunc------",i=0,s=e.length;i<s;i++)t=t.replace(new RegExp(e.charAt(i),"g"),r.charAt(i));return t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),t=t.replace(/^([0-9])/,"_$1"),t}function ca(t,e){var r=function(a){return Math.floor(Math.random()*a)},i=function(){var a="abcdefghijklmnopqurstuvwxyz";return a.substr(r(32),1)},s=function(a){for(var o="",l=0;l<a;l++)o+=i();return o};return e?e+"-"+s(t):"tl-"+s(t)}function b$(t,e,r){for(var i=0;i<t.length;i++)if(e<t[i])return t[i];return e}function x$(t,e,r){for(var i=t.length-1;i>=0;i--)if(e>t[i])return t[i];return e}function E$(t){return t==parseFloat(t)?!(t%2):void 0}function qC(t,e,r,i){for(var s=i||0,a=0;a<e.length;a++)e[a].data[r]==t&&(s=a);return s}function uo(t){return t&&(t=t.replace(/<a\b[^>]*>/i,""),t=t.replace(/<\/a>/i,""),t)}function T$(t,e){t.data=Fa({},t.data,e),t.data.unique_id===""&&(t.data.unique_id=ca(6))}function S$(t){return t.match(/<p>[\s\S]*?<\/p>/)?t:"<p>"+t+"</p>"}function No(t){return t=t.replace(/(<[^>]*>)+/g,""),t.replace('"',"'")}function lv(t,e,r){var i=function(l,u,c){c||(c="");var h=30;return u&&u.length>h&&(u=u.substring(0,h)+""),c+"<a class='tl-makelink' href='"+l+"' onclick='void(0)'>"+u+"</a>"},s=/\b(?:https?|ftp):\/\/([a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|])/gim,a=/(^|[^\/>])(www\.[\S]+(\b|$))/gim,o=/([a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+)/gim;return t.replace(s,function(l,u,c,h){if(c>0){var f=h[c-1];if(f=='"'||f=="'"||f=="=")return l}return i(l,u)}).replace(a,function(l,u,c,h,f){return i("http://"+c,c,u)}).replace(o,function(l,u,c,h){return i("mailto:"+u,u)})}function Bf(t){return t.replace(/(.*)www.dropbox.com\/(.*)/,"$1dl.dropboxusercontent.com/$2")}const ba={square:t=>{var e={w:0,h:0};return t.w>t.h&&t.h>0?(e.h=t.h,e.w=t.h):(e.w=t.w,e.h=t.w),e},r16_9:t=>t.w!==null&&t.w!==""?Math.round(t.w/16*9):t.h!==null&&t.h!==""?Math.round(t.h/9*16):0,r4_3:t=>{if(t.w!==null&&t.w!=="")return Math.round(t.w/4*3);if(t.h!==null&&t.h!=="")return Math.round(t.h/3*4)}};function I$(t){var e,r=[],i,s;e=t.toString(),e.match("&#038;")?e=e.replace("&#038;","&"):e.match("&#38;")?e=e.replace("&#38;","&"):e.match("&amp;")&&(e=e.replace("&amp;","&")),s=e.slice(e.indexOf("?")+1).split("&");for(var a=0;a<s.length;a++)i=s[a].split("="),r.push(i[0]),r[i[0]]=i[1];return r}function k$(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r+"="+t[r]);return"?"+e.join("&")}function C$(t,e){if(typeof t<"u"){var r=0;for(var i in t){if(e===r)return t[i];r++}return""}else return""}let A$=function(t){var e="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",r=e.length;return{encode:function(i){if(typeof i!="number"||i!==parseInt(i))throw'"encode" only accepts integers.';for(var s="";i;){var a=i%r;i=Math.floor(i/r),s=e[a].toString()+s}return s},decode:function(i){if(typeof i!="string")throw'"decode" only accepts strings.';for(var s=0;i;){var a=e.indexOf(i[0]);if(a<0)throw`"decode" can't find "`+i[0]+'" in the alphabet: "'+e+'"';var o=i.length-1;s+=a*Math.pow(r,o),i=i.substring(1)}return s}}}();function mm(t){if(typeof t=="string"){let s=t.match(/^\s*(\d+h)?(\d+m)?(\d+s)?\s*/i);if(s){var e=parseInt(s[1])||0,r=parseInt(s[2])||0,i=parseInt(s[3])||0;return i+r*60+e*60*60}}else if(typeof t=="number")return t;return 0}function P$(t){var e=new DOMParser().parseFromString(t,"text/html");return e.body.textContent||""}function R$(t){}function $f(t){var e=new R$;return e.get(t)}function Lu(t){return t==1?1:1-Math.pow(2,-10*t)}function Yo(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}let Uh=function(){};Uh.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments)},r=function(){};r.prototype=this.prototype;var i=new r;i.constructor=e,e.prototype=i,e.superclass=this.prototype;for(var s in this)this.hasOwnProperty(s)&&s!=="prototype"&&s!=="superclass"&&(e[s]=this[s]);return t.statics&&(Fa(e,t.statics),delete t.statics),t.includes&&(Fa.apply(null,[i].concat(t.includes)),delete t.includes),t.options&&i.options&&(t.options=Fa({},i.options,t.options)),Fa(i,t),e.extend=Uh.extend,e.include=function(a){Fa(this.prototype,a)},e};class Sn{on(e,r,i){if(!r)throw new Ue("No callback function provided");var s=this._tl_events=this._tl_events||{};return s[e]=s[e]||[],s[e].push({action:r,context:i||this}),this}addEventListener(e,r,i){return this.on(e,r,i)}hasEventListeners(e){var r="_tl_events";return r in this&&e in this[r]&&this[r][e].length>0}removeEventListener(e,r,i){if(!this.hasEventListeners(e))return this;for(var s=0,a=this._tl_events,o=a[e].length;s<o;s++)if(a[e][s].action===r&&(!i||a[e][s].context===i))return a[e].splice(s,1),this;return this}off(e,r,i){return this.removeEventListener(e,r,i)}fire(e,r){if(!this.hasEventListeners(e))return this;for(var i=et({type:e,target:this},r),s=this._tl_events[e].slice(),a=0,o=s.length;a<o;a++)s[a].action?s[a].action.call(s[a].context||this,i):Be(`no action defined for ${e} listener`);return this}}function Si(t,e){return N$(t,e)}const N$=function(){var t=document,e=window,r=e.performance,i=r&&(r.now||r.webkitNow||r.msNow||r.mozNow),s=i?function(){return i.call(r)}:function(){return+new Date},a=t.documentElement,o=!1,l=1e3,u=/^rgb\(|#/,c=/^([+\-])=([\d\.]+)/,h=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,f=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,p=/scale\(((?:[+\-]=)?([\d\.]+))\)/,g=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,T=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,N={lineHeight:1,zoom:1,zIndex:1,opacity:1,transform:1},A=function(){var W=t.createElement("a").style,H=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],Q;for(Q=0;Q<H.length;Q++)if(H[Q]in W)return H[Q]}(),b=function(){return typeof t.createElement("a").style.opacity<"u"}(),x=t.defaultView&&t.defaultView.getComputedStyle?function(W,H){H=H=="transform"?A:H,H=D(H);var Q=null,X=t.defaultView.getComputedStyle(W,"");return X&&(Q=X[H]),W.style[H]||Q}:a.currentStyle?function(W,H){if(H=D(H),H=="opacity"){var Q=100;try{Q=W.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch{try{Q=W.filters("alpha").opacity}catch{}}return Q/100}var X=W.currentStyle?W.currentStyle[H]:null;return W.style[H]||X}:function(W,H){return W.style[D(H)]},w=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||function(W){e.setTimeout(function(){W(+new Date)},17)}}(),R=[];w(function(W){o=W>1e12!=s()>1e12});function j(W,H,Q){if(Array.prototype.indexOf)return W.indexOf(H);for(Q=0;Q<W.length;++Q)if(W[Q]===H)return Q}function V(W){var H,Q=R.length;for(i&&W>1e12&&(W=s()),o&&(W=s()),H=Q;H--;)R[H](W);R.length&&w(V)}function C(W){R.push(W)===1&&w(V)}function I(W){var H,Q=j(R,W);Q>=0&&(H=R.slice(Q+1),R.length=Q,R=R.concat(H))}function y(W,H){var Q={},X;return(X=W.match(f))&&(Q.rotate=ie(X[1],H?H.rotate:null)),(X=W.match(p))&&(Q.scale=ie(X[1],H?H.scale:null)),(X=W.match(g))&&(Q.skewx=ie(X[1],H?H.skewx:null),Q.skewy=ie(X[3],H?H.skewy:null)),(X=W.match(T))&&(Q.translatex=ie(X[1],H?H.translatex:null),Q.translatey=ie(X[3],H?H.translatey:null)),Q}function _(W){var H="";return"rotate"in W&&(H+="rotate("+W.rotate+"deg) "),"scale"in W&&(H+="scale("+W.scale+") "),"translatex"in W&&(H+="translate("+W.translatex+"px,"+W.translatey+"px) "),"skewx"in W&&(H+="skew("+W.skewx+"deg,"+W.skewy+"deg)"),H}function S(W,H,Q){return"#"+(1<<24|W<<16|H<<8|Q).toString(16).slice(1)}function M(W){var H=W.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(H?S(H[1],H[2],H[3]):W).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function D(W){return W.replace(/-(.)/g,function(H,Q){return Q.toUpperCase()})}function K(W){return typeof W=="function"}function ee(W){return Math.sin(W*Math.PI/2)}function re(W,H,Q,X,de,ve){X=K(X)?X:ne.easings[X]||ee;var Oe=W||l,Ne=this,Ge=ve-de,ze=s(),Ye=0,Xe=0;function Qe(rt){var P=rt-ze;if(P>Oe||Ye)return ve=isFinite(ve)?ve:1,Ye?Xe&&H(ve):H(ve),I(Qe),Q&&Q.apply(Ne);isFinite(ve)?H(Ge*X(P/Oe)+de):H(X(P/Oe))}return C(Qe),{stop:function(rt){Ye=1,Xe=rt,rt||(Q=null)}}}function pe(W,H){var Q=W.length,X=[],de,ve;for(de=0;de<Q;++de)X[de]=[W[de][0],W[de][1]];for(ve=1;ve<Q;++ve)for(de=0;de<Q-ve;++de)X[de][0]=(1-H)*X[de][0]+H*X[parseInt(de+1,10)][0],X[de][1]=(1-H)*X[de][1]+H*X[parseInt(de+1,10)][1];return[X[0][0],X[0][1]]}function q(W,H,Q){var X=[],de,ve,Oe,Ne;for(de=0;de<6;de++)Oe=Math.min(15,parseInt(H.charAt(de),16)),Ne=Math.min(15,parseInt(Q.charAt(de),16)),ve=Math.floor((Ne-Oe)*W+Oe),ve=ve>15?15:ve<0?0:ve,X[de]=ve.toString(16);return"#"+X.join("")}function Y(W,H,Q,X,de,ve,Oe){if(de=="transform"){Oe={};for(var Ne in Q[ve][de])Oe[Ne]=Ne in X[ve][de]?Math.round(((X[ve][de][Ne]-Q[ve][de][Ne])*W+Q[ve][de][Ne])*l)/l:Q[ve][de][Ne];return Oe}else return typeof Q[ve][de]=="string"?q(W,Q[ve][de],X[ve][de]):(Oe=Math.round(((X[ve][de]-Q[ve][de])*W+Q[ve][de])*l)/l,de in N||(Oe+=H[ve][de]||"px"),Oe)}function ie(W,H,Q,X,de){return(Q=c.exec(W))?(de=parseFloat(Q[2]))&&H+(Q[1]=="+"?1:-1)*de:parseFloat(W)}function ne(W,H){var Q=W?Q=isFinite(W.length)?W:[W]:[],X,de=H.complete,ve=H.duration,Oe=H.easing,Ne=H.bezier,Ge=[],ze=[],Ye=[],Xe=[],Qe,rt;for(Ne&&(Qe=H.left,rt=H.top,delete H.right,delete H.bottom,delete H.left,delete H.top),X=Q.length;X--;){if(Ge[X]={},ze[X]={},Ye[X]={},Ne){var P=x(Q[X],"left"),F=x(Q[X],"top"),U=[ie(K(Qe)?Qe(Q[X]):Qe||0,parseFloat(P)),ie(K(rt)?rt(Q[X]):rt||0,parseFloat(F))];Xe[X]=K(Ne)?Ne(Q[X],U):Ne,Xe[X].push(U),Xe[X].unshift([parseInt(P,10),parseInt(F,10)])}for(var z in H){switch(z){case"complete":case"duration":case"easing":case"bezier":continue}var oe=x(Q[X],z),J,ce=K(H[z])?H[z](Q[X]):H[z];if(typeof ce=="string"&&u.test(ce)&&!u.test(oe)){delete H[z];continue}Ge[X][z]=z=="transform"?y(oe):typeof ce=="string"&&u.test(ce)?M(oe).slice(1):parseFloat(oe),ze[X][z]=z=="transform"?y(ce,Ge[X][z]):typeof ce=="string"&&ce.charAt(0)=="#"?M(ce).slice(1):ie(ce,parseFloat(oe)),typeof ce=="string"&&(J=ce.match(h))&&(Ye[X][z]=J[1])}}return re.apply(Q,[ve,function(he,we,be){for(X=Q.length;X--;){Ne&&(be=pe(Xe[X],he),Q[X].style.left=be[0]+"px",Q[X].style.top=be[1]+"px");for(var ye in H)we=Y(he,Ye,Ge,ze,ye,X),ye=="transform"?Q[X].style[A]=_(we):ye=="opacity"&&!b?Q[X].style.filter="alpha(opacity="+we*100+")":Q[X].style[D(ye)]=we}},de,Oe])}return ne.tween=re,ne.getStyle=x,ne.bezier=pe,ne.transform=A,ne.parseTransform=y,ne.formatTransform=_,ne.easings={},ne}();class Ci{show(e){e||(this._el.container.style.display="block")}hide(e){this._el.container.style.display="none"}addTo(e){e.appendChild(this._el.container),this.onAdd()}removeFrom(e){e.removeChild(this._el.container),this.onRemove()}animatePosition(e,r){var i={duration:this.options.duration,easing:this.options.ease};for(var s in e)e.hasOwnProperty(s)&&(i[s]=e[s]+"px");this.animator&&this.animator.stop(),this.animator=Si(r,i)}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}setPosition(e,r){for(var i in e)e.hasOwnProperty(i)&&(r?r.style[i]=e[i]+"px":this._el.container.style[i]=e[i]+"px")}getPosition(){return ov(this._el.container)}}let D$=class{constructor(e,r,i){this._el={drag:e,move:e},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},i&&(this._el.move=i),this.options={enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:!1,right:!1},momentum_multiplier:2e3,duration:1e3,ease:Yo},this.animator=null,this.dragevent=this.mousedrag,Gr&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},et(this.options,r)}enable(e){this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){Re.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Re.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(e){this.options.constraint=e}_onDragStart(e){Gr?e.originalEvent?(this.data.pagex.start=e.originalEvent.touches[0].screenX,this.data.pagey.start=e.originalEvent.touches[0].screenY):(this.data.pagex.start=e.targetTouches[0].screenX,this.data.pagey.start=e.targetTouches[0].screenY):(this.data.pagex.start=e.pageX,this.data.pagey.start=e.pageY),this.options.enable.x&&(this._el.move.style.left=this.data.pagex.start-this._el.move.offsetWidth/2+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.pagey.start-this._el.move.offsetHeight/2+"px"),this.data.pos.start=ov(this._el.drag),this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),Re.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Re.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(e){this.data.sliding=!1,Re.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Re.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(e){e.preventDefault(),this.data.sliding=!0,Gr?e.originalEvent?(this.data.pagex.end=e.originalEvent.touches[0].screenX,this.data.pagey.end=e.originalEvent.touches[0].screenY):(this.data.pagex.end=e.targetTouches[0].screenX,this.data.pagey.end=e.targetTouches[0].screenY):(this.data.pagex.end=e.pageX,this.data.pagey.end=e.pageY),this.data.pos.end=ov(this._el.drag),this.data.new_pos.x=-(this.data.pagex.start-this.data.pagex.end-this.data.pos.start.x),this.data.new_pos.y=-(this.data.pagey.start-this.data.pagey.end-this.data.pos.start.y),this.options.enable.x&&(this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var e={x:0,y:0,time:0},r={x:0,y:0,time:0},i=!1;e.time=(new Date().getTime()-this.data.time.start)*10,r.time=(new Date().getTime()-this.data.time.start)*10,r.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),r.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),e.x=Math.round(r.x/r.time),e.y=Math.round(r.y/r.time),this.data.new_pos.x=Math.min(this.data.pos.end.x+e.x),this.data.new_pos.y=Math.min(this.data.pos.end.y+e.y),this.options.enable.x?this.data.new_pos.x<0&&(this.data.new_pos.x=0):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,r.time<3e3&&(i=!0),Math.abs(r.x)>1e4&&(this.data.direction="left",r.x>0&&(this.data.direction="right")),Math.abs(r.y)>1e4&&(this.data.direction="up",r.y>0&&(this.data.direction="down")),this._animateMomentum(),i&&this.fire("swipe_"+this.data.direction,this.data)}_animateMomentum(){var e={x:this.data.new_pos.x,y:this.data.new_pos.y},r={duration:this.options.duration,easing:Lu};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(e.y>this.options.constraint.bottom?e.y=this.options.constraint.bottom:e.y<this.options.constraint.top&&(e.y=this.options.constraint.top)),r.top=Math.floor(e.y)+"px"),this.options.enable.x&&((this.options.constraint.left||this.options.constraint.right)&&(e.x>this.options.constraint.left?e.x=this.options.constraint.left:e.x<this.options.constraint.right&&(e.x=this.options.constraint.right)),r.left=Math.floor(e.x)+"px"),this.animator=Si(this._el.move,r),this.fire("momentum",this.data)}};Tn(Sn);var Re={addListener:function(t,e,r,i){var s=Xx(r),a="_tl_"+e+s;if(!t[a]){var o=function(c){return r.call(i||t,c||Re._getEvent())};if(Gr&&e==="dblclick"&&this.addDoubleTapListener)this.addDoubleTapListener(t,o,s);else if("addEventListener"in t)if(e==="mousewheel")t.addEventListener("DOMMouseScroll",o,!1),t.addEventListener(e,o,!1);else if(e==="mouseenter"||e==="mouseleave"){var l=o,u=e==="mouseenter"?"mouseover":"mouseout";o=function(c){if(Re._checkMouse(t,c))return l(c)},t.addEventListener(u,o,!1)}else t.addEventListener(e,o,!1);else"attachEvent"in t&&t.attachEvent("on"+e,o);t[a]=o}},removeListener:function(t,e,r){var i=Xx(r),s="_tl_"+e+i,a=t[s];a&&(Gr&&e==="dblclick"&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,i):"removeEventListener"in t?e==="mousewheel"?(t.removeEventListener("DOMMouseScroll",a,!1),t.removeEventListener(e,a,!1)):e==="mouseenter"||e==="mouseleave"?t.removeEventListener(e==="mouseenter"?"mouseover":"mouseout",a,!1):t.removeEventListener(e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a),t[s]=null)},_checkMouse:function(t,e){var r=e.relatedTarget;if(!r)return!0;try{for(;r&&r!==t;)r=r.parentNode}catch{return!1}return r!==t},_getEvent:function(){var t=window.event;if(!t)for(var e=arguments.callee.caller;e&&(t=e.arguments[0],!(t&&window.Event===t.constructor));)e=e.caller;return t},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},disableClickPropagation:function(t){Re.addListener(t,D$.START,Re.stopPropagation),Re.addListener(t,"click",Re.stopPropagation),Re.addListener(t,"dblclick",Re.stopPropagation)},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stop:function(t){Re.preventDefault(t),Re.stopPropagation(t)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e}},Ai=function(){var t,e,r,i,s=[],a=s.slice,o=s.filter,l=window.document,u={},c={},h={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},f=/^\s*<(\w+|!)[^>]*>/,p=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,g=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,T=/^(?:body|html)$/i,N=/([A-Z])/g,A=["val","css","html","text","data","width","height","offset"],b=["after","prepend","before","append"],x=l.createElement("table"),w=l.createElement("tr"),R={tr:l.createElement("tbody"),tbody:x,thead:x,tfoot:x,td:w,th:w,"*":l.createElement("div")},j=/complete|loaded|interactive/,V=/^[\w-]*$/,C={},I=C.toString,y={},_,S,M=l.createElement("div"),D={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},K=Array.isArray||function(P){return P instanceof Array};y.matches=function(P,F){if(!F||!P||P.nodeType!==1)return!1;var U=P.webkitMatchesSelector||P.mozMatchesSelector||P.oMatchesSelector||P.matchesSelector;if(U)return U.call(P,F);var z,oe=P.parentNode,J=!oe;return J&&(oe=M).appendChild(P),z=~y.qsa(oe,F).indexOf(P),J&&M.removeChild(P),z};function ee(P){return P==null?String(P):C[I.call(P)]||"object"}function re(P){return ee(P)=="function"}function pe(P){return P!=null&&P==P.window}function q(P){return P!=null&&P.nodeType==P.DOCUMENT_NODE}function Y(P){return ee(P)=="object"}function ie(P){return Y(P)&&!pe(P)&&Object.getPrototypeOf(P)==Object.prototype}function ne(P){return typeof P.length=="number"}function W(P){return o.call(P,function(F){return F!=null})}function H(P){return P.length>0?r.fn.concat.apply([],P):P}_=function(P){return P.replace(/-+(.)?/g,function(F,U){return U?U.toUpperCase():""})};function Q(P){return P.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}S=function(P){return o.call(P,function(F,U){return P.indexOf(F)==U})};function X(P){return P in c?c[P]:c[P]=new RegExp("(^|\\s)"+P+"(\\s|$)")}function de(P,F){return typeof F=="number"&&!h[Q(P)]?F+"px":F}function ve(P){var F,U;return u[P]||(F=l.createElement(P),l.body.appendChild(F),U=getComputedStyle(F,"").getPropertyValue("display"),F.parentNode.removeChild(F),U=="none"&&(U="block"),u[P]=U),u[P]}function Oe(P){return"children"in P?a.call(P.children):r.map(P.childNodes,function(F){if(F.nodeType==1)return F})}y.fragment=function(P,F,U){var z,oe,J;return p.test(P)&&(z=r(l.createElement(RegExp.$1))),z||(P.replace&&(P=P.replace(g,"<$1></$2>")),F===t&&(F=f.test(P)&&RegExp.$1),F in R||(F="*"),J=R[F],J.innerHTML=""+P,z=r.each(a.call(J.childNodes),function(){J.removeChild(this)})),ie(U)&&(oe=r(z),r.each(U,function(ce,he){A.indexOf(ce)>-1?oe[ce](he):oe.attr(ce,he)})),z},y.Z=function(P,F){return P=P||[],P.__proto__=r.fn,P.selector=F||"",P},y.isZ=function(P){return P instanceof y.Z},y.init=function(P,F){var U;if(P)if(typeof P=="string")if(P=P.trim(),P[0]=="<"&&f.test(P))U=y.fragment(P,RegExp.$1,F),P=null;else{if(F!==t)return r(F).find(P);U=y.qsa(l,P)}else{if(re(P))return r(l).ready(P);if(y.isZ(P))return P;if(K(P))U=W(P);else if(Y(P))U=[P],P=null;else if(f.test(P))U=y.fragment(P.trim(),RegExp.$1,F),P=null;else{if(F!==t)return r(F).find(P);U=y.qsa(l,P)}}else return y.Z();return y.Z(U,P)},r=function(P,F){return y.init(P,F)};function Ne(P,F,U){for(e in F)U&&(ie(F[e])||K(F[e]))?(ie(F[e])&&!ie(P[e])&&(P[e]={}),K(F[e])&&!K(P[e])&&(P[e]=[]),Ne(P[e],F[e],U)):F[e]!==t&&(P[e]=F[e])}r.extend=function(P){var F,U=a.call(arguments,1);return typeof P=="boolean"&&(F=P,P=U.shift()),U.forEach(function(z){Ne(P,z,F)}),P},y.qsa=function(P,F){var U,z=F[0]=="#",oe=!z&&F[0]==".",J=z||oe?F.slice(1):F,ce=V.test(J);return q(P)&&ce&&z?(U=P.getElementById(J))?[U]:[]:P.nodeType!==1&&P.nodeType!==9?[]:a.call(ce&&!z?oe?P.getElementsByClassName(J):P.getElementsByTagName(F):P.querySelectorAll(F))};function Ge(P,F){return F==null?r(P):r(P).filter(F)}r.contains=function(P,F){return P!==F&&P.contains(F)};function ze(P,F,U,z){return re(F)?F.call(P,U,z):F}function Ye(P,F,U){U==null?P.removeAttribute(F):P.setAttribute(F,U)}function Xe(P,F){var U=P.className,z=U&&U.baseVal!==t;if(F===t)return z?U.baseVal:U;z?U.baseVal=F:P.className=F}function Qe(P){var F;try{return P&&(P=="true"||(P=="false"?!1:P=="null"?null:!/^0/.test(P)&&!isNaN(F=Number(P))?F:/^[\[\{]/.test(P)?r.parseJSON(P):P))}catch{return P}}r.type=ee,r.isFunction=re,r.isWindow=pe,r.isArray=K,r.isPlainObject=ie,r.isEmptyObject=function(P){var F;for(F in P)return!1;return!0},r.inArray=function(P,F,U){return s.indexOf.call(F,P,U)},r.camelCase=_,r.trim=function(P){return P==null?"":String.prototype.trim.call(P)},r.uuid=0,r.support={},r.expr={},r.map=function(P,F){var U,z=[],oe,J;if(ne(P))for(oe=0;oe<P.length;oe++)U=F(P[oe],oe),U!=null&&z.push(U);else for(J in P)U=F(P[J],J),U!=null&&z.push(U);return H(z)},r.each=function(P,F){var U,z;if(ne(P)){for(U=0;U<P.length;U++)if(F.call(P[U],U,P[U])===!1)return P}else for(z in P)if(F.call(P[z],z,P[z])===!1)return P;return P},r.grep=function(P,F){return o.call(P,F)},window.JSON&&(r.parseJSON=JSON.parse),r.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(P,F){C["[object "+F+"]"]=F.toLowerCase()}),r.fn={forEach:s.forEach,reduce:s.reduce,push:s.push,sort:s.sort,indexOf:s.indexOf,concat:s.concat,map:function(P){return r(r.map(this,function(F,U){return P.call(F,U,F)}))},slice:function(){return r(a.apply(this,arguments))},ready:function(P){return j.test(l.readyState)&&l.body?P(r):l.addEventListener("DOMContentLoaded",function(){P(r)},!1),this},get:function(P){return P===t?a.call(this):this[P>=0?P:P+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(P){return s.every.call(this,function(F,U){return P.call(F,U,F)!==!1}),this},filter:function(P){return re(P)?this.not(this.not(P)):r(o.call(this,function(F){return y.matches(F,P)}))},add:function(P,F){return r(S(this.concat(r(P,F))))},is:function(P){return this.length>0&&y.matches(this[0],P)},not:function(P){var F=[];if(re(P)&&P.call!==t)this.each(function(z){P.call(this,z)||F.push(this)});else{var U=typeof P=="string"?this.filter(P):ne(P)&&re(P.item)?a.call(P):r(P);this.forEach(function(z){U.indexOf(z)<0&&F.push(z)})}return r(F)},has:function(P){return this.filter(function(){return Y(P)?r.contains(this,P):r(this).find(P).size()})},eq:function(P){return P===-1?this.slice(P):this.slice(P,+P+1)},first:function(){var P=this[0];return P&&!Y(P)?P:r(P)},last:function(){var P=this[this.length-1];return P&&!Y(P)?P:r(P)},find:function(P){var F,U=this;return typeof P=="object"?F=r(P).filter(function(){var z=this;return s.some.call(U,function(oe){return r.contains(oe,z)})}):this.length==1?F=r(y.qsa(this[0],P)):F=this.map(function(){return y.qsa(this,P)}),F},closest:function(P,F){var U=this[0],z=!1;for(typeof P=="object"&&(z=r(P));U&&!(z?z.indexOf(U)>=0:y.matches(U,P));)U=U!==F&&!q(U)&&U.parentNode;return r(U)},parents:function(P){for(var F=[],U=this;U.length>0;)U=r.map(U,function(z){if((z=z.parentNode)&&!q(z)&&F.indexOf(z)<0)return F.push(z),z});return Ge(F,P)},parent:function(P){return Ge(S(this.pluck("parentNode")),P)},children:function(P){return Ge(this.map(function(){return Oe(this)}),P)},contents:function(){return this.map(function(){return a.call(this.childNodes)})},siblings:function(P){return Ge(this.map(function(F,U){return o.call(Oe(U.parentNode),function(z){return z!==U})}),P)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(P){return r.map(this,function(F){return F[P]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=ve(this.nodeName))})},replaceWith:function(P){return this.before(P).remove()},wrap:function(P){var F=re(P);if(this[0]&&!F)var U=r(P).get(0),z=U.parentNode||this.length>1;return this.each(function(oe){r(this).wrapAll(F?P.call(this,oe):z?U.cloneNode(!0):U)})},wrapAll:function(P){if(this[0]){r(this[0]).before(P=r(P));for(var F;(F=P.children()).length;)P=F.first();r(P).append(this)}return this},wrapInner:function(P){var F=re(P);return this.each(function(U){var z=r(this),oe=z.contents(),J=F?P.call(this,U):P;oe.length?oe.wrapAll(J):z.append(J)})},unwrap:function(){return this.parent().each(function(){r(this).replaceWith(r(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(P){return this.each(function(){var F=r(this);(P===t?F.css("display")=="none":P)?F.show():F.hide()})},prev:function(P){return r(this.pluck("previousElementSibling")).filter(P||"*")},next:function(P){return r(this.pluck("nextElementSibling")).filter(P||"*")},html:function(P){return arguments.length===0?this.length>0?this[0].innerHTML:null:this.each(function(F){var U=this.innerHTML;r(this).empty().append(ze(this,P,F,U))})},text:function(P){return arguments.length===0?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=P===t?"":""+P})},attr:function(P,F){var U;return typeof P=="string"&&F===t?this.length==0||this[0].nodeType!==1?t:P=="value"&&this[0].nodeName=="INPUT"?this.val():!(U=this[0].getAttribute(P))&&P in this[0]?this[0][P]:U:this.each(function(z){if(this.nodeType===1)if(Y(P))for(e in P)Ye(this,e,P[e]);else Ye(this,P,ze(this,F,z,this.getAttribute(P)))})},removeAttr:function(P){return this.each(function(){this.nodeType===1&&Ye(this,P)})},prop:function(P,F){return P=D[P]||P,F===t?this[0]&&this[0][P]:this.each(function(U){this[P]=ze(this,F,U,this[P])})},data:function(P,F){var U=this.attr("data-"+P.replace(N,"-$1").toLowerCase(),F);return U!==null?Qe(U):t},val:function(P){return arguments.length===0?this[0]&&(this[0].multiple?r(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(F){this.value=ze(this,P,F,this.value)})},offset:function(P){if(P)return this.each(function(U){var z=r(this),oe=ze(this,P,U,z.offset()),J=z.offsetParent().offset(),ce={top:oe.top-J.top,left:oe.left-J.left};z.css("position")=="static"&&(ce.position="relative"),z.css(ce)});if(this.length==0)return null;var F=this[0].getBoundingClientRect();return{left:F.left+window.pageXOffset,top:F.top+window.pageYOffset,width:Math.round(F.width),height:Math.round(F.height)}},css:function(P,F){if(arguments.length<2){var U=this[0],z=getComputedStyle(U,"");if(!U)return;if(typeof P=="string")return U.style[_(P)]||z.getPropertyValue(P);if(K(P)){var oe={};return r.each(K(P)?P:[P],function(ce,he){oe[he]=U.style[_(he)]||z.getPropertyValue(he)}),oe}}var J="";if(ee(P)=="string")!F&&F!==0?this.each(function(){this.style.removeProperty(Q(P))}):J=Q(P)+":"+de(P,F);else for(e in P)!P[e]&&P[e]!==0?this.each(function(){this.style.removeProperty(Q(e))}):J+=Q(e)+":"+de(e,P[e])+";";return this.each(function(){this.style.cssText+=";"+J})},index:function(P){return P?this.indexOf(r(P)[0]):this.parent().children().indexOf(this[0])},hasClass:function(P){return P?s.some.call(this,function(F){return this.test(Xe(F))},X(P)):!1},addClass:function(P){return P?this.each(function(F){i=[];var U=Xe(this),z=ze(this,P,F,U);z.split(/\s+/g).forEach(function(oe){r(this).hasClass(oe)||i.push(oe)},this),i.length&&Xe(this,U+(U?" ":"")+i.join(" "))}):this},removeClass:function(P){return this.each(function(F){if(P===t)return Xe(this,"");i=Xe(this),ze(this,P,F,i).split(/\s+/g).forEach(function(U){i=i.replace(X(U)," ")}),Xe(this,i.trim())})},toggleClass:function(P,F){return P?this.each(function(U){var z=r(this),oe=ze(this,P,U,Xe(this));oe.split(/\s+/g).forEach(function(J){(F===t?!z.hasClass(J):F)?z.addClass(J):z.removeClass(J)})}):this},scrollTop:function(P){if(this.length){var F="scrollTop"in this[0];return P===t?F?this[0].scrollTop:this[0].pageYOffset:this.each(F?function(){this.scrollTop=P}:function(){this.scrollTo(this.scrollX,P)})}},scrollLeft:function(P){if(this.length){var F="scrollLeft"in this[0];return P===t?F?this[0].scrollLeft:this[0].pageXOffset:this.each(F?function(){this.scrollLeft=P}:function(){this.scrollTo(P,this.scrollY)})}},position:function(){if(this.length){var P=this[0],F=this.offsetParent(),U=this.offset(),z=T.test(F[0].nodeName)?{top:0,left:0}:F.offset();return U.top-=parseFloat(r(P).css("margin-top"))||0,U.left-=parseFloat(r(P).css("margin-left"))||0,z.top+=parseFloat(r(F[0]).css("border-top-width"))||0,z.left+=parseFloat(r(F[0]).css("border-left-width"))||0,{top:U.top-z.top,left:U.left-z.left}}},offsetParent:function(){return this.map(function(){for(var P=this.offsetParent||l.body;P&&!T.test(P.nodeName)&&r(P).css("position")=="static";)P=P.offsetParent;return P})}},r.fn.detach=r.fn.remove,["width","height"].forEach(function(P){var F=P.replace(/./,function(U){return U[0].toUpperCase()});r.fn[P]=function(U){var z,oe=this[0];return U===t?pe(oe)?oe["inner"+F]:q(oe)?oe.documentElement["scroll"+F]:(z=this.offset())&&z[P]:this.each(function(J){oe=r(this),oe.css(P,ze(this,U,J,oe[P]()))})}});function rt(P,F){F(P);for(var U in P.childNodes)rt(P.childNodes[U],F)}return b.forEach(function(P,F){var U=F%2;r.fn[P]=function(){var z,oe=r.map(arguments,function(he){return z=ee(he),z=="object"||z=="array"||he==null?he:y.fragment(he)}),J,ce=this.length>1;return oe.length<1?this:this.each(function(he,we){J=U?we:we.parentNode,we=F==0?we.nextSibling:F==1?we.firstChild:F==2?we:null,oe.forEach(function(be){if(ce)be=be.cloneNode(!0);else if(!J)return r(be).remove();rt(J.insertBefore(be,we),function(ye){ye.nodeName!=null&&ye.nodeName.toUpperCase()==="SCRIPT"&&(!ye.type||ye.type==="text/javascript")&&!ye.src&&window.eval.call(window,ye.innerHTML)})})})},r.fn[U?P+"To":"insert"+(F?"Before":"After")]=function(z){return r(z)[P](this),this}}),y.Z.prototype=r.fn,y.uniq=S,y.deserializeValue=Qe,r.zepto=y,r}();window.Zepto=Ai;window.$===void 0&&(window.$=Ai);(function(t){t.zepto.qsa;var e=1,r,i=Array.prototype.slice,s=t.isFunction,a=function(y){return typeof y=="string"},o={},l={},u="onfocusin"in window,c={focus:"focusin",blur:"focusout"},h={mouseenter:"mouseover",mouseleave:"mouseout"};l.click=l.mousedown=l.mouseup=l.mousemove="MouseEvents";function f(y){return y._zid||(y._zid=e++)}function p(y,_,S,M){if(_=g(_),_.ns)var D=T(_.ns);return(o[f(y)]||[]).filter(function(K){return K&&(!_.e||K.e==_.e)&&(!_.ns||D.test(K.ns))&&(!S||f(K.fn)===f(S))&&(!M||K.sel==M)})}function g(y){var _=(""+y).split(".");return{e:_[0],ns:_.slice(1).sort().join(" ")}}function T(y){return new RegExp("(?:^| )"+y.replace(" "," .* ?")+"(?: |$)")}function N(y,_){return y.del&&!u&&y.e in c||!!_}function A(y){return h[y]||u&&c[y]||y}function b(y,_,S,M,D,K,ee){var re=f(y),pe=o[re]||(o[re]=[]);_.split(/\s/).forEach(function(q){if(q=="ready")return t(document).ready(S);var Y=g(q);Y.fn=S,Y.sel=D,Y.e in h&&(S=function(ne){var W=ne.relatedTarget;if(!W||W!==this&&!t.contains(this,W))return Y.fn.apply(this,arguments)}),Y.del=K;var ie=K||S;Y.proxy=function(ne){if(ne=C(ne),!ne.isImmediatePropagationStopped()){ne.data=M;var W=ie.apply(y,ne._args==r?[ne]:[ne].concat(ne._args));return W===!1&&(ne.preventDefault(),ne.stopPropagation()),W}},Y.i=pe.length,pe.push(Y),"addEventListener"in y&&y.addEventListener(A(Y.e),Y.proxy,N(Y,ee))})}function x(y,_,S,M,D){var K=f(y);(_||"").split(/\s/).forEach(function(ee){p(y,ee,S,M).forEach(function(re){delete o[K][re.i],"removeEventListener"in y&&y.removeEventListener(A(re.e),re.proxy,N(re,D))})})}t.event={add:b,remove:x},t.proxy=function(y,_){if(s(y)){var S=function(){return y.apply(_,arguments)};return S._zid=f(y),S}else{if(a(_))return t.proxy(y[_],y);throw new TypeError("expected function")}},t.fn.bind=function(y,_,S){return this.on(y,_,S)},t.fn.unbind=function(y,_){return this.off(y,_)},t.fn.one=function(y,_,S,M){return this.on(y,_,S,M,1)};var w=function(){return!0},R=function(){return!1},j=/^([A-Z]|returnValue$|layer[XY]$)/,V={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function C(y,_){return(_||!y.isDefaultPrevented)&&(_||(_=y),t.each(V,function(S,M){var D=_[S];y[S]=function(){return this[M]=w,D&&D.apply(_,arguments)},y[M]=R}),(_.defaultPrevented!==r?_.defaultPrevented:"returnValue"in _?_.returnValue===!1:_.getPreventDefault&&_.getPreventDefault())&&(y.isDefaultPrevented=w)),y}function I(y){var _,S={originalEvent:y};for(_ in y)!j.test(_)&&y[_]!==r&&(S[_]=y[_]);return C(S,y)}t.fn.delegate=function(y,_,S){return this.on(_,y,S)},t.fn.undelegate=function(y,_,S){return this.off(_,y,S)},t.fn.live=function(y,_){return t(document.body).delegate(this.selector,y,_),this},t.fn.die=function(y,_){return t(document.body).undelegate(this.selector,y,_),this},t.fn.on=function(y,_,S,M,D){var K,ee,re=this;return y&&!a(y)?(t.each(y,function(pe,q){re.on(pe,_,S,q,D)}),re):(!a(_)&&!s(M)&&M!==!1&&(M=S,S=_,_=r),(s(S)||S===!1)&&(M=S,S=r),M===!1&&(M=R),re.each(function(pe,q){D&&(K=function(Y){return x(q,Y.type,M),M.apply(this,arguments)}),_&&(ee=function(Y){var ie,ne=t(Y.target).closest(_,q).get(0);if(ne&&ne!==q)return ie=t.extend(I(Y),{currentTarget:ne,liveFired:q}),(K||M).apply(ne,[ie].concat(i.call(arguments,1)))}),b(q,y,M,S,_,ee||K)}))},t.fn.off=function(y,_,S){var M=this;return y&&!a(y)?(t.each(y,function(D,K){M.off(D,_,K)}),M):(!a(_)&&!s(S)&&S!==!1&&(S=_,_=r),S===!1&&(S=R),M.each(function(){x(this,y,S,_)}))},t.fn.trigger=function(y,_){return y=a(y)||t.isPlainObject(y)?t.Event(y):C(y),y._args=_,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(y):t(this).triggerHandler(y,_)})},t.fn.triggerHandler=function(y,_){var S,M;return this.each(function(D,K){S=I(a(y)?t.Event(y):y),S._args=_,S.target=K,t.each(p(K,y.type||y),function(ee,re){if(M=re.proxy(S),S.isImmediatePropagationStopped())return!1})}),M},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(y){t.fn[y]=function(_){return _?this.bind(y,_):this.trigger(y)}}),["focus","blur"].forEach(function(y){t.fn[y]=function(_){return _?this.bind(y,_):this.each(function(){try{this[y]()}catch{}}),this}}),t.Event=function(y,_){a(y)||(_=y,y=_.type);var S=document.createEvent(l[y]||"Events"),M=!0;if(_)for(var D in _)D=="bubbles"?M=!!_[D]:S[D]=_[D];return S.initEvent(y,M,!0),C(S)}})(Ai);(function(t){var e=0,r=window.document,i,s,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,o=/^(?:text|application)\/javascript/i,l=/^(?:text|application)\/xml/i,u="application/json",c="text/html",h=/^\s*$/;function f(_,S,M){var D=t.Event(S);return t(_).trigger(D,M),!D.isDefaultPrevented()}function p(_,S,M,D){if(_.global)return f(S||r,M,D)}t.active=0;function g(_){_.global&&t.active++===0&&p(_,null,"ajaxStart")}function T(_){_.global&&!--t.active&&p(_,null,"ajaxStop")}function N(_,S){var M=S.context;if(S.beforeSend.call(M,_,S)===!1||p(S,M,"ajaxBeforeSend",[_,S])===!1)return!1;p(S,M,"ajaxSend",[_,S])}function A(_,S,M,D){var K=M.context,ee="success";M.success.call(K,_,ee,S),D&&D.resolveWith(K,[_,ee,S]),p(M,K,"ajaxSuccess",[S,M,_]),x(ee,S,M)}function b(_,S,M,D,K){var ee=D.context;D.error.call(ee,M,S,_),K&&K.rejectWith(ee,[M,S,_]),p(D,ee,"ajaxError",[M,D,_||S]),x(S,M,D)}function x(_,S,M){var D=M.context;M.complete.call(D,S,_),p(M,D,"ajaxComplete",[S,M]),T(M)}function w(){}t.ajaxJSONP=function(_,S){if(!("type"in _))return t.ajax(_);var M=_.jsonpCallback,D=(t.isFunction(M)?M():M)||"jsonp"+ ++e,K=r.createElement("script"),ee=window[D],re,pe=function(ie){t(K).triggerHandler("error",ie||"abort")},q={abort:pe},Y;return S&&S.promise(q),t(K).on("load error",function(ie,ne){clearTimeout(Y),t(K).off().remove(),ie.type=="error"||!re?b(null,ne||"error",q,_,S):A(re[0],q,_,S),window[D]=ee,re&&t.isFunction(ee)&&ee(re[0]),ee=re=void 0}),N(q,_)===!1?(pe("abort"),q):(window[D]=function(){re=arguments},K.src=_.url.replace(/\?(.+)=\?/,"?$1="+D),r.head.appendChild(K),_.timeout>0&&(Y=setTimeout(function(){pe("timeout")},_.timeout)),q)},t.ajaxSettings={type:"GET",beforeSend:w,success:w,error:w,complete:w,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:u,xml:"application/xml, text/xml",html:c,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0};function R(_){return _&&(_=_.split(";",2)[0]),_&&(_==c?"html":_==u?"json":o.test(_)?"script":l.test(_)&&"xml")||"text"}function j(_,S){return S==""?_:(_+"&"+S).replace(/[&?]{1,2}/,"?")}function V(_){_.processData&&_.data&&t.type(_.data)!="string"&&(_.data=t.param(_.data,_.traditional)),_.data&&(!_.type||_.type.toUpperCase()=="GET")&&(_.url=j(_.url,_.data),_.data=void 0)}t.ajax=function(_){var S=t.extend({},_||{}),M=t.Deferred&&t.Deferred();for(i in t.ajaxSettings)S[i]===void 0&&(S[i]=t.ajaxSettings[i]);g(S),S.crossDomain||(S.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(S.url)&&RegExp.$2!=window.location.host),S.url||(S.url=window.location.toString()),V(S),S.cache===!1&&(S.url=j(S.url,"_="+Date.now()));var D=S.dataType,K=/\?.+=\?/.test(S.url);if(D=="jsonp"||K)return K||(S.url=j(S.url,S.jsonp?S.jsonp+"=?":S.jsonp===!1?"":"callback=?")),t.ajaxJSONP(S,M);var ee=S.accepts[D],re={},pe=function(H,Q){re[H.toLowerCase()]=[H,Q]},q=/^([\w-]+:)\/\//.test(S.url)?RegExp.$1:window.location.protocol,Y=S.xhr(),ie=Y.setRequestHeader,ne;if(M&&M.promise(Y),S.crossDomain||pe("X-Requested-With","XMLHttpRequest"),pe("Accept",ee||"*/*"),(ee=S.mimeType||ee)&&(ee.indexOf(",")>-1&&(ee=ee.split(",",2)[0]),Y.overrideMimeType&&Y.overrideMimeType(ee)),(S.contentType||S.contentType!==!1&&S.data&&S.type.toUpperCase()!="GET")&&pe("Content-Type",S.contentType||"application/x-www-form-urlencoded"),S.headers)for(s in S.headers)pe(s,S.headers[s]);if(Y.setRequestHeader=pe,Y.onreadystatechange=function(){if(Y.readyState==4){Y.onreadystatechange=w,clearTimeout(ne);var H,Q=!1;if(Y.status>=200&&Y.status<300||Y.status==304||Y.status==0&&q=="file:"){D=D||R(S.mimeType||Y.getResponseHeader("content-type")),H=Y.responseText;try{D=="script"?(0,eval)(H):D=="xml"?H=Y.responseXML:D=="json"&&(H=h.test(H)?null:t.parseJSON(H))}catch(X){Q=X}Q?b(Q,"parsererror",Y,S,M):A(H,Y,S,M)}else b(Y.statusText||null,Y.status?"error":"abort",Y,S,M)}},N(Y,S)===!1)return Y.abort(),b(null,"abort",Y,S,M),Y;if(S.xhrFields)for(s in S.xhrFields)Y[s]=S.xhrFields[s];var W="async"in S?S.async:!0;Y.open(S.type,S.url,W,S.username,S.password);for(s in re)ie.apply(Y,re[s]);return S.timeout>0&&(ne=setTimeout(function(){Y.onreadystatechange=w,Y.abort(),b(null,"timeout",Y,S,M)},S.timeout)),Y.send(S.data?S.data:null),Y};function C(_,S,M,D){var K=!t.isFunction(S);return{url:_,data:K?S:void 0,success:K?t.isFunction(M)?M:void 0:S,dataType:K&&D||M}}t.get=function(_,S,M,D){return t.ajax(C.apply(null,arguments))},t.post=function(_,S,M,D){var K=C.apply(null,arguments);return K.type="POST",t.ajax(K)},t.getJSON=function(_,S,M){var D=C.apply(null,arguments);return D.dataType="json",t.ajax(D)},t.fetchJSON=function(_){var S=new XMLHttpRequest;return new Promise(function(M,D){S.onreadystatechange=function(){try{if(S.readyState!==4)return;if(S.status>=200&&S.status<300){var K=JSON.parse(S.responseText);M(K)}else D({status:S.status,statusText:S.statusText})}catch(ee){D({status:400,statusText:`Error fetching JSON from ${_}: ${ee}`})}},S.open("GET",_,!0),S.send()})},t.fn.load=function(_,S,M){if(!this.length)return this;var D=this,K=_.split(/\s/),ee,re=C(_,S,M),pe=re.success;return K.length>1&&(re.url=K[0],ee=K[1]),re.success=function(q){D.html(ee?t("<div>").html(q.replace(a,"")).find(ee):q),pe&&pe.apply(D,arguments)},t.ajax(re),this};var I=encodeURIComponent;function y(_,S,M,D){var K,ee=t.isArray(S),re=t.isPlainObject(S);t.each(S,function(pe,q){K=t.type(q),D&&(pe=M?D:D+"["+(re||K=="object"||K=="array"?pe:"")+"]"),!D&&ee?_.add(q.name,q.value):K=="array"||!M&&K=="object"?y(_,q,M,pe):_.add(pe,q)})}t.param=function(_,S){var M=[];return M.add=function(D,K){this.push(I(D)+"="+I(K))},y(M,_,S),M.join("&").replace(/%20/g,"+")}})(Ai);(function(t){t.fn.serializeArray=function(){var e=[],r;return t([].slice.call(this.get(0).elements)).each(function(){r=t(this);var i=r.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&i!="submit"&&i!="reset"&&i!="button"&&(i!="radio"&&i!="checkbox"||this.checked)&&e.push({name:r.attr("name"),value:r.val()})}),e},t.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(r){e.push(encodeURIComponent(r.name)+"="+encodeURIComponent(r.value))}),e.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var r=t.Event("submit");this.eq(0).trigger(r),r.isDefaultPrevented()||this.get(0).submit()}return this}})(Ai);(function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(r,i){return r=r||[],t.extend(r,t.fn),r.selector=i||"",r.__Z=!0,r},isZ:function(r){return t.type(r)==="array"&&"__Z"in r}});try{getComputedStyle(void 0)}catch{var e=getComputedStyle;window.getComputedStyle=function(i,s){try{return e(i,s)}catch{return null}}}})(Ai);const Bh=Ai.getJSON,Xo=Ai.ajax,zf=Ai.fetchJSON,Vr=[["millisecond",1,function(t){}],["second",1e3,function(t){t.setMilliseconds(0)}],["minute",1e3*60,function(t){t.setSeconds(0)}],["hour",1e3*60*60,function(t){t.setMinutes(0)}],["day",1e3*60*60*24,function(t){t.setHours(0)}],["month",1e3*60*60*24*30,function(t){t.setDate(1)}],["year",1e3*60*60*24*365,function(t){t.setMonth(0)}],["decade",1e3*60*60*24*365*10,function(t){var e=t.getFullYear();t.setFullYear(e-e%10)}],["century",1e3*60*60*24*365*100,function(t){var e=t.getFullYear();t.setFullYear(e-e%100)}],["millennium",1e3*60*60*24*365*1e3,function(t){var e=t.getFullYear();t.setFullYear(e-e%1e3)}]],Fs=["millisecond","second","minute","hour","day","month","year"],Qx=/^([\+-]?\d+?)(-\d{2}?)?(-\d{2}?)?$/,M$=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,Jx={base:{millisecond:"time_short",second:"time",minute:"time_no_seconds_small_date",hour:"time_no_seconds_small_date",day:"full",month:"month",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"},short:{millisecond:"time_short",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"}},Hf=Uh.extend({initialize:function(t,e,r){typeof t=="number"?this.data={format:"yyyy mmmm",date_obj:new Date(t)}:Date==t.constructor?this.data={format:"yyyy mmmm",date_obj:t}:(this.data=JSON.parse(JSON.stringify(t)),this._createDateObj()),t.format&&!e&&(e=t.format),this._setFormat(e,r)},setDateFormat:function(t){this.data.format=t},getDisplayDate:function(t,e){if(this.data.display_date)return this.data.display_date;t||(t=cr.fallback),t.constructor!=cr&&(Be("First argument to getDisplayDate must be type Language"),t=cr.fallback);var r=e||this.data.format;return t.formatDate(this.data.date_obj,r)},getMillisecond:function(){return this.getTime()},getTime:function(){return this.data.date_obj.getTime()},isBefore:function(t){if(!this.data.date_obj.constructor==t.data.date_obj.constructor)throw new Ue("date_compare_err");return"isBefore"in this.data.date_obj?this.data.date_obj.isBefore(t.data.date_obj):this.data.date_obj<t.data.date_obj},isAfter:function(t){if(!this.data.date_obj.constructor==t.data.date_obj.constructor)throw new Ue("date_compare_err");return"isAfter"in this.data.date_obj?this.data.date_obj.isAfter(t.data.date_obj):this.data.date_obj>t.data.date_obj},floor:function(t){for(var e=new Date(this.data.date_obj.getTime()),r=0;r<Vr.length;r++)if(Vr[r][2](e),Vr[r][0]==t)return new Hf(e);throw new Ue("invalid_scale_err",t)},_getDateData:function(){var t={year:0,month:1,day:1,hour:0,minute:0,second:0,millisecond:0};et(t,this.data);for(var e in Fs){var r=Kn(t[Fs[e]]);if(!r.match(/^-?\d*$/))throw new Ue("invalid_date_err",Fs[e]+" = '"+t[Fs[e]]+"'");var i=parseInt(t[Fs[e]]);isNaN(i)&&(i=e==4||e==5?1:0),t[Fs[e]]=i}return t.month>0&&t.month<=12&&(t.month=t.month-1),t},_createDateObj:function(){var t=this._getDateData();this.data.date_obj=new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond),this.data.date_obj.getFullYear()!=t.year&&this.data.date_obj.setFullYear(t.year)},findBestFormat:function(t){for(var e=Fs,r=0;r<e.length;r++)if(this.data[e[r]])return t?t in Jx||(t="short"):t="base",Jx[t][e[r]];return""},_setFormat:function(t,e){t?this.data.format=t:this.data.format||(this.data.format=this.findBestFormat()),e?this.data.format_short=e:this.data.format_short||(this.data.format_short=this.findBestFormat(!0))},getFullYear:function(){return this.data.date_obj.getFullYear()}});function Zx(t){if(t.match(Qx)){var e=t.match(Qx).slice(1),r={year:e[0].replace("+","")};return e[1]&&(r.month=e[1].replace("-","")),e[2]&&(r.day=e[2].replace("-","")),r}if(t.match(M$))return cls.parseISODate(t);if(t.match(/^\-?\d+$/))return{year:t};var i={};if(t.match(/\d+\/\d+\/\d+/)){var s=t.match(/\d+\/\d+\/\d+/)[0];t=Kn(t.replace(s,""));var a=s.split("/");i.month=a[0],i.day=a[1],i.year=a[2]}if(t.match(/\d+\/\d+/)){var s=t.match(/\d+\/\d+/)[0];t=Kn(t.replace(s,""));var a=s.split("/");i.month=a[0],i.year=a[1]}if(t.match(":")){var o=t.split(":");if(i.hour=o[0],i.minute=o[1],o[2]){let l=o[2].split(".");i.second=l[0],i.millisecond=l[1]}}return i}const Ou=Uh.extend({initialize:function(t){if(this.year=parseInt(t),isNaN(this.year))throw new Ue("invalid_year_err",t)},isBefore:function(t){return this.year<t.year},isAfter:function(t){return this.year>t.year},getTime:function(){return this.year}}),uv=1e6,cv=uv*10,dv=cv*10,eE=dv*10;function ji(t){return function(e){var r=e.getTime();return new Ou(Math.floor(r/t)*t)}}const zd=[["year",1,new ji(1)],["decade",10,new ji(10)],["century",100,new ji(100)],["millennium",1e3,new ji(1e3)],["age",uv,new ji(uv)],["epoch",cv,new ji(cv)],["era",dv,new ji(dv)],["eon",eE,new ji(eE)]],Wf=Hf.extend({initialize:function(t,e,r){Ou==t.constructor?this.data={date_obj:t}:(this.data=JSON.parse(JSON.stringify(t)),this._createDateObj()),t.format&&!e&&(e=t.format),this._setFormat(e,r)},_createDateObj:function(){var t=this._getDateData();this.data.date_obj=new Ou(t.year)},floor:function(t){for(var e=0;e<zd.length;e++)if(zd[e][0]==t){var r=zd[e][2](this.data.date_obj);return new Wf(r)}throw new Ue("invalid_scale_err",t)},getFullYear:function(){return this.data.date_obj.getTime()}}),tE=new RegExp(/\$\{(.+?)\}/g);class cr{constructor(e,r){for(let a in Ui.en)this[a]=Ui.en[a];if(e&&typeof e=="string"&&e!="en"){var i=e;if(!(i in Ui)){console.log(`Expected language ${i} to be cached. Did you call the constructor directly?`);var s=GC(i,r);zf(s).then(a=>{Ui[i]=a}).catch(a=>{console.log(`Error loading language [${s}] ${a.statusText} [${a.status}]`)})}et(this,Ui[i])}}mergeData(e){for(k in Ui.en)e[k]&&(typeof this[k]=="object"?et(e[k],this[k]):this[k]=e[k])}formatBigYear(e,r){var i=e.year,s=this.bigdateformats[r]||this.bigdateformats.fallback;if(s){for(var a=0;a<s.length;a++){var o=s[a];if(Math.abs(i/o[0])>1)return nE(Math.abs(i/o[0]),o[1])}return i.toString()}else return Be("Language file dateformats missing cosmological. Falling back."),nE(i,r)}_(e,r){let i=this.messages[e]||cr.fallback.messages[e]||e;if(i.match(tE)){if(!r)throw new Ue("template_message_without_context");for(let s of i.matchAll(tE)){if(!(s[1]in r))throw new Ue("template_message_without_context");i=i.replace(s[0],r[s[1]])}}return i}formatDate(e,r){return e.constructor==Date?this.formatJSDate(e,r):e.constructor==Ou?this.formatBigYear(e,r):e.data&&e.data.date_obj?this.formatDate(e.data.date_obj,r):(Be("Unfamiliar date presented for formatting"),e.toString())}formatJSDate(e,r){var i=this,s=function(R,j){var V=i.period_labels[R];if(V)var R=j<12?V[0]:V[1];return"<span class='tl-timeaxis-timesuffix'>"+R+"</span>"},a=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,o=/[^-+\dA-Z]/g;r||(r="full");var l=this.dateformats[r]||cr.fallback.dateformats[r];l||(l=r);var u="get",c=e[u+"Date"](),h=e[u+"Day"](),f=e[u+"Month"](),p=e[u+"FullYear"](),g=e[u+"Hours"](),T=e[u+"Minutes"](),N=e[u+"Seconds"](),A=e[u+"Milliseconds"](),b=e.getTimezoneOffset(),x={d:c,dd:si(c),ddd:this.date.day_abbr[h],dddd:this.date.day[h],m:f+1,mm:si(f+1),mmm:this.date.month_abbr[f],mmmm:this.date.month[f],yy:String(p).slice(2),yyyy:p<0&&this.has_negative_year_modifier()?Math.abs(p):p,h:g%12||12,hh:si(g%12||12),H:g,HH:si(g),M:T,MM:si(T),s:N,ss:si(N),l:si(A,3),L:si(A>99?Math.round(A/10):A),t:s("t",g),tt:s("tt",g),T:s("T",g),TT:s("TT",g),Z:(String(e).match(a)||[""]).pop().replace(o,""),o:(b>0?"-":"+")+si(Math.floor(Math.abs(b)/60)*100+Math.abs(b)%60,4),S:["th","st","nd","rd"][c%10>3?0:(c%100-c%10!=10)*c%10]},w=l.replace(cr.DATE_FORMAT_TOKENS,function(R){return R in x?x[R]:R.slice(1,R.length-1)});return this._applyEra(w,p)}has_negative_year_modifier(){return!!(this.era_labels.negative_year.prefix||this.era_labels.negative_year.suffix)}_applyEra(e,r){var i=r<0?this.era_labels.negative_year:this.era_labels.positive_year,s="";return i.prefix&&(s+="<span>"+i.prefix+"</span> "),s+=e,i.suffix&&(s+=" <span>"+i.suffix+"</span>"),s}}async function L$(t,e){var r=GC(t,e);try{if(!Ui[t]){let i=await zf(r);Ui[t]=i}return new cr(t,e)}catch(i){return console.log(`Error loading language [${r}] ${i.statusText}`),null}}function GC(t,e){if(/\.json$/.test(t))var r=t;else{var i="/locale/"+t+".json";/\/$/.test(e)&&(i=i.substr(1));var r=e+i}return r}function nE(t,e){if(e.match(/%(\.(\d+))?f/)){var r=e.match(/%(\.(\d+))?f/),i=r[0];return r[2]&&(t=t.toFixed(r[2])),e.replace(i,t)}return e}cr.fallback={messages:{}};cr.DATE_FORMAT_TOKENS=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g;var Ui={en:{name:"English (built-in)",lang:"en",api:{wikipedia:"en"},messages:{loading:"Loading",wikipedia:"From Wikipedia, the free encyclopedia",error:"Error",return_to_title:"Return to Title",go_to_end:"Go to the last slide",loading_content:"Loading Content",loading_timeline:"Loading Timeline... ",swipe_to_navigate:"Swipe to Navigate<br><span class='tl-button'>OK</span>",zoom_in:"Zoom in",zoom_out:"Zoom out",unknown_read_err:"An unexpected error occurred trying to read your spreadsheet data",invalid_url_err:"Unable to read Timeline data. Make sure your URL is for a Google Spreadsheet or a Timeline JSON file.",network_err:"Unable to read your Google Spreadsheet. Make sure you have published it to the web.",missing_start_date_err:"Missing start_date",invalid_start_time_without_date:"Invalid configuration: time cannot be used without date.",invalid_end_time_without_date:"Invalid configuration: end time cannot be used without end date.",date_compare_err:"Can't compare timeline date objects on different scales",invalid_scale_err:"Invalid scale",invalid_date_err:"Invalid date: month, day and year must be numbers.",invalid_separator_error:"Invalid time: misuse of : or . as separator.",invalid_hour_err:"Invalid time (hour)",invalid_minute_err:"Invalid time (minute)",invalid_second_err:"Invalid time (second)",invalid_fractional_err:"Invalid time (fractional seconds)",invalid_second_fractional_err:"Invalid time (seconds and fractional seconds)",invalid_year_err:"Invalid year",flickr_notfound_err:"Photo not found or private",flickr_invalidurl_err:"Invalid Flickr URL",imgur_invalidurl_err:"Invalid Imgur URL",twitter_load_err:"Unable to load Tweet",twitterembed_invalidurl_err:"Invalid Twitter Embed url",wikipedia_load_err:"Unable to load Wikipedia entry",wikipedia_image_load_err:"Unable to load Wikipedia image data",spotify_invalid_url:"Invalid Spotify URL",invalid_rgb_err:"Invalid RGB argument",time_scale_scale_err:"Don't know how to get date from time for scale",axis_helper_no_options_err:"Axis helper must be configured with options",axis_helper_scale_err:"No AxisHelper available for scale",invalid_integer_option:"Invalid option valuemust be a whole number.",instagram_bad_request:"Invalid or private Instagram URL",template_message_without_context:"Required variables not provided for template translation message",aria_label_timeline:"Timeline",aria_label_timeline_navigation:"Timeline navigation",aria_label_timeline_content:"Timeline content",aria_label_zoomin:"Show less than ${start} to ${end}",aria_label_zoomout:"Show more than ${start} to ${end}"},date:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbr:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_abbr:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."]},era_labels:{positive_year:{prefix:"",suffix:""},negative_year:{prefix:"",suffix:"BCE"}},period_labels:{t:["a","p"],tt:["am","pm"],T:["A","P"],TT:["AM","PM"]},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time:"h:MM:ss TT' <small>'mmmm d',' yyyy'</small>'",time_short:"h:MM:ss TT",time_no_seconds_short:"h:MM TT",time_no_minutes_short:"h TT",time_no_seconds_small_date:"h:MM TT' <small>'mmmm d',' yyyy'</small>'",time_milliseconds:"l",full_long:"mmm d',' yyyy 'at' h:MM TT",full_long_small_date:"h:MM TT' <small>mmm d',' yyyy'</small>'"},bigdateformats:{fallback:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]],compact:[[1e9,"%.2f bya"],[1e6,"%.1f mya"],[1e3,"%.1f kya"],[1,"%f years ago"]],verbose:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]]}}};let b_=new cr;cr.fallback=b_;class Pi{setLanguage(e){this.language=e}getLanguage(){if(this.language){if(typeof this.language=="object")return this.language;Be(`I18NMixins.getLanguage: this.language should be object, but is ${typeof this.language}`)}return b_}_(e,r){return this.getLanguage()._(e,r)}}class qf{constructor(e,r,i){i&&this.setLanguage(i),this._el={parent:{},container:{},message_container:{},loading_icon:{},message:{}},this.options={width:600,height:600,message_class:"tl-message",message_icon_class:"tl-loading-icon"},this.container=e,et(this.options,r),this._el.container=fe("div",this.options.message_class),e&&(e.appendChild(this._el.container),this._el.parent=e),this.animator={},this._initLayout(),this._initEvents()}updateMessage(e){e?this._el.message.innerHTML=e:this._el.message.innerHTML=this._("loading"),!this._el.parent.atributes&&this.container.attributes&&(this.container.appendChild(this._el.container),this._el.parent=this.container)}updateDisplay(e,r){}_onMouseClick(){this.fire("clicked",this.options)}_onRemove(){this._el.parent={}}_initLayout(){this._el.message_container=fe("div","tl-message-container",this._el.container),this._el.loading_icon=fe("div",this.options.message_icon_class,this._el.message_container),this._el.message=fe("div","tl-message-content",this._el.message_container),this.updateMessage()}_initEvents(){Re.addListener(this._el.container,"click",this._onMouseClick,this),Re.addListener(this,"removed",this._onRemove,this)}}Tn(qf,Pi,Sn,Ci);function dd(t,r){var r=r||"start_date";t.sort(function(i,s){return i[r].isBefore(s[r])?-1:i[r].isAfter(s[r])?1:0})}function rE(t){var e={hour:null,minute:null,second:null,millisecond:null},r=null,i=t.match(/(\s*[AaPp]\.?[Mm]\.?\s*)$/);i&&(r=Kn(i[0]),t=Kn(t.substring(0,t.lastIndexOf(r))));var s=[],a=t.match(/^\s*(\d{1,2})(\d{2})\s*$/);if(a?s=a.slice(1):(s=t.split(":"),s.length==1&&(s=t.split("."))),s.length>4)throw new Ue("invalid_separator_error");let o=s[0];if(e.hour=parseInt(o),r&&r.toLowerCase()[0]=="p"&&e.hour!=12?e.hour+=12:r&&r.toLowerCase()[0]=="a"&&e.hour==12&&(e.hour=0),isNaN(e.hour)||e.hour<0||e.hour>23)throw new Ue("invalid_hour_err",o);if(s.length>1){let c=s[1];if(e.minute=parseInt(c),isNaN(e.minute))throw new Ue("invalid_minute_err",c)}if(s.length>2){var l=s[2].split(/[\.,]/);if(s=l.concat(s.slice(3)),s.length>2)throw new Ue("invalid_second_fractional_err");if(e.second=parseInt(s[0]),isNaN(e.second))throw new Ue("invalid_second_err",s[0]);if(s.length==2){var u=parseInt(s[1]);if(isNaN(u))throw new Ue("invalid_fractional_err",s[1]);e.millisecond=100*u}}return e}const O$=new RegExp("(^-?\\d+$|^$)");function iE(t){try{return Object.keys(t).forEach(e=>{let r=t[e];if(r&&r.match&&!r.match(O$))throw`invalid value ${r} for ${e}`}),!0}catch{return!1}}const sE={human:Hf,cosmological:Wf};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:KC,setPrototypeOf:aE,isFrozen:j$,getPrototypeOf:V$,getOwnPropertyDescriptor:F$}=Object;let{freeze:wn,seal:pr,create:YC}=Object,{apply:hv,construct:fv}=typeof Reflect<"u"&&Reflect;wn||(wn=function(e){return e});pr||(pr=function(e){return e});hv||(hv=function(e,r,i){return e.apply(r,i)});fv||(fv=function(e,r){return new e(...r)});const hd=bn(Array.prototype.forEach),U$=bn(Array.prototype.lastIndexOf),oE=bn(Array.prototype.pop),Tl=bn(Array.prototype.push),B$=bn(Array.prototype.splice),Hd=bn(String.prototype.toLowerCase),gm=bn(String.prototype.toString),lE=bn(String.prototype.match),Sl=bn(String.prototype.replace),$$=bn(String.prototype.indexOf),z$=bn(String.prototype.trim),br=bn(Object.prototype.hasOwnProperty),gn=bn(RegExp.prototype.test),Il=H$(TypeError);function bn(t){return function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return hv(t,e,i)}}function H$(t){return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return fv(t,r)}}function Me(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Hd;aE&&aE(t,null);let i=e.length;for(;i--;){let s=e[i];if(typeof s=="string"){const a=r(s);a!==s&&(j$(e)||(e[i]=a),s=a)}t[s]=!0}return t}function W$(t){for(let e=0;e<t.length;e++)br(t,e)||(t[e]=null);return t}function Hs(t){const e=YC(null);for(const[r,i]of KC(t))br(t,r)&&(Array.isArray(i)?e[r]=W$(i):i&&typeof i=="object"&&i.constructor===Object?e[r]=Hs(i):e[r]=i);return e}function kl(t,e){for(;t!==null;){const i=F$(t,e);if(i){if(i.get)return bn(i.get);if(typeof i.value=="function")return bn(i.value)}t=V$(t)}function r(){return null}return r}const uE=wn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),vm=wn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ym=wn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),q$=wn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),_m=wn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),G$=wn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),cE=wn(["#text"]),dE=wn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),wm=wn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),hE=wn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),fd=wn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),K$=pr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Y$=pr(/<%[\w\W]*|[\w\W]*%>/gm),X$=pr(/\$\{[\w\W]*/gm),Q$=pr(/^data-[\-\w.\u00B7-\uFFFF]+$/),J$=pr(/^aria-[\-\w]+$/),XC=pr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Z$=pr(/^(?:\w+script|data):/i),e5=pr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),QC=pr(/^html$/i),t5=pr(/^[a-z][.\w]*(-[.\w]+)+$/i);var fE=Object.freeze({__proto__:null,ARIA_ATTR:J$,ATTR_WHITESPACE:e5,CUSTOM_ELEMENT:t5,DATA_ATTR:Q$,DOCTYPE_NAME:QC,ERB_EXPR:Y$,IS_ALLOWED_URI:XC,IS_SCRIPT_OR_DATA:Z$,MUSTACHE_EXPR:K$,TMPLIT_EXPR:X$});const Cl={element:1,text:3,progressingInstruction:7,comment:8,document:9},n5=function(){return typeof window>"u"?null:window},r5=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const s="data-tt-policy-suffix";r&&r.hasAttribute(s)&&(i=r.getAttribute(s));const a="dompurify"+(i?"#"+i:"");try{return e.createPolicy(a,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},pE=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function JC(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:n5();const e=xe=>JC(xe);if(e.version="3.2.4",e.removed=[],!t||!t.document||t.document.nodeType!==Cl.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const i=r,s=i.currentScript,{DocumentFragment:a,HTMLTemplateElement:o,Node:l,Element:u,NodeFilter:c,NamedNodeMap:h=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:g}=t,T=u.prototype,N=kl(T,"cloneNode"),A=kl(T,"remove"),b=kl(T,"nextSibling"),x=kl(T,"childNodes"),w=kl(T,"parentNode");if(typeof o=="function"){const xe=r.createElement("template");xe.content&&xe.content.ownerDocument&&(r=xe.content.ownerDocument)}let R,j="";const{implementation:V,createNodeIterator:C,createDocumentFragment:I,getElementsByTagName:y}=r,{importNode:_}=i;let S=pE();e.isSupported=typeof KC=="function"&&typeof w=="function"&&V&&V.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:M,ERB_EXPR:D,TMPLIT_EXPR:K,DATA_ATTR:ee,ARIA_ATTR:re,IS_SCRIPT_OR_DATA:pe,ATTR_WHITESPACE:q,CUSTOM_ELEMENT:Y}=fE;let{IS_ALLOWED_URI:ie}=fE,ne=null;const W=Me({},[...uE,...vm,...ym,..._m,...cE]);let H=null;const Q=Me({},[...dE,...wm,...hE,...fd]);let X=Object.seal(YC(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),de=null,ve=null,Oe=!0,Ne=!0,Ge=!1,ze=!0,Ye=!1,Xe=!0,Qe=!1,rt=!1,P=!1,F=!1,U=!1,z=!1,oe=!0,J=!1;const ce="user-content-";let he=!0,we=!1,be={},ye=null;const He=Me({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Fn=null;const Dr=Me({},["audio","video","img","source","image","track"]);let Ri=null;const nr=Me({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Un="http://www.w3.org/1998/Math/MathML",Zr="http://www.w3.org/2000/svg",Bn="http://www.w3.org/1999/xhtml";let In=Bn,el=!1,tl=null;const nl=Me({},[Un,Zr,Bn],gm);let Ps=Me({},["mi","mo","mn","ms","mtext"]),Rs=Me({},["annotation-xml"]);const Ns=Me({},["title","style","font","a","script"]);let ei=null;const rl=["application/xhtml+xml","text/html"],ti="text/html";let St=null,gr=null;const xc=r.createElement("form"),Ni=function(B){return B instanceof RegExp||B instanceof Function},xa=function(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(gr&&gr===B)){if((!B||typeof B!="object")&&(B={}),B=Hs(B),ei=rl.indexOf(B.PARSER_MEDIA_TYPE)===-1?ti:B.PARSER_MEDIA_TYPE,St=ei==="application/xhtml+xml"?gm:Hd,ne=br(B,"ALLOWED_TAGS")?Me({},B.ALLOWED_TAGS,St):W,H=br(B,"ALLOWED_ATTR")?Me({},B.ALLOWED_ATTR,St):Q,tl=br(B,"ALLOWED_NAMESPACES")?Me({},B.ALLOWED_NAMESPACES,gm):nl,Ri=br(B,"ADD_URI_SAFE_ATTR")?Me(Hs(nr),B.ADD_URI_SAFE_ATTR,St):nr,Fn=br(B,"ADD_DATA_URI_TAGS")?Me(Hs(Dr),B.ADD_DATA_URI_TAGS,St):Dr,ye=br(B,"FORBID_CONTENTS")?Me({},B.FORBID_CONTENTS,St):He,de=br(B,"FORBID_TAGS")?Me({},B.FORBID_TAGS,St):{},ve=br(B,"FORBID_ATTR")?Me({},B.FORBID_ATTR,St):{},be=br(B,"USE_PROFILES")?B.USE_PROFILES:!1,Oe=B.ALLOW_ARIA_ATTR!==!1,Ne=B.ALLOW_DATA_ATTR!==!1,Ge=B.ALLOW_UNKNOWN_PROTOCOLS||!1,ze=B.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ye=B.SAFE_FOR_TEMPLATES||!1,Xe=B.SAFE_FOR_XML!==!1,Qe=B.WHOLE_DOCUMENT||!1,F=B.RETURN_DOM||!1,U=B.RETURN_DOM_FRAGMENT||!1,z=B.RETURN_TRUSTED_TYPE||!1,P=B.FORCE_BODY||!1,oe=B.SANITIZE_DOM!==!1,J=B.SANITIZE_NAMED_PROPS||!1,he=B.KEEP_CONTENT!==!1,we=B.IN_PLACE||!1,ie=B.ALLOWED_URI_REGEXP||XC,In=B.NAMESPACE||Bn,Ps=B.MATHML_TEXT_INTEGRATION_POINTS||Ps,Rs=B.HTML_INTEGRATION_POINTS||Rs,X=B.CUSTOM_ELEMENT_HANDLING||{},B.CUSTOM_ELEMENT_HANDLING&&Ni(B.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(X.tagNameCheck=B.CUSTOM_ELEMENT_HANDLING.tagNameCheck),B.CUSTOM_ELEMENT_HANDLING&&Ni(B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(X.attributeNameCheck=B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),B.CUSTOM_ELEMENT_HANDLING&&typeof B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(X.allowCustomizedBuiltInElements=B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ye&&(Ne=!1),U&&(F=!0),be&&(ne=Me({},cE),H=[],be.html===!0&&(Me(ne,uE),Me(H,dE)),be.svg===!0&&(Me(ne,vm),Me(H,wm),Me(H,fd)),be.svgFilters===!0&&(Me(ne,ym),Me(H,wm),Me(H,fd)),be.mathMl===!0&&(Me(ne,_m),Me(H,hE),Me(H,fd))),B.ADD_TAGS&&(ne===W&&(ne=Hs(ne)),Me(ne,B.ADD_TAGS,St)),B.ADD_ATTR&&(H===Q&&(H=Hs(H)),Me(H,B.ADD_ATTR,St)),B.ADD_URI_SAFE_ATTR&&Me(Ri,B.ADD_URI_SAFE_ATTR,St),B.FORBID_CONTENTS&&(ye===He&&(ye=Hs(ye)),Me(ye,B.FORBID_CONTENTS,St)),he&&(ne["#text"]=!0),Qe&&Me(ne,["html","head","body"]),ne.table&&(Me(ne,["tbody"]),delete de.tbody),B.TRUSTED_TYPES_POLICY){if(typeof B.TRUSTED_TYPES_POLICY.createHTML!="function")throw Il('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof B.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Il('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');R=B.TRUSTED_TYPES_POLICY,j=R.createHTML("")}else R===void 0&&(R=r5(g,s)),R!==null&&typeof j=="string"&&(j=R.createHTML(""));wn&&wn(B),gr=B}},jt=Me({},[...vm,...ym,...q$]),il=Me({},[..._m,...G$]),Ds=function(B){let se=w(B);(!se||!se.tagName)&&(se={namespaceURI:In,tagName:"template"});const _e=Hd(B.tagName),it=Hd(se.tagName);return tl[B.namespaceURI]?B.namespaceURI===Zr?se.namespaceURI===Bn?_e==="svg":se.namespaceURI===Un?_e==="svg"&&(it==="annotation-xml"||Ps[it]):!!jt[_e]:B.namespaceURI===Un?se.namespaceURI===Bn?_e==="math":se.namespaceURI===Zr?_e==="math"&&Rs[it]:!!il[_e]:B.namespaceURI===Bn?se.namespaceURI===Zr&&!Rs[it]||se.namespaceURI===Un&&!Ps[it]?!1:!il[_e]&&(Ns[_e]||!jt[_e]):!!(ei==="application/xhtml+xml"&&tl[B.namespaceURI]):!1},rn=function(B){Tl(e.removed,{element:B});try{w(B).removeChild(B)}catch{A(B)}},Ea=function(B,se){try{Tl(e.removed,{attribute:se.getAttributeNode(B),from:se})}catch{Tl(e.removed,{attribute:null,from:se})}if(se.removeAttribute(B),B==="is")if(F||U)try{rn(se)}catch{}else try{se.setAttribute(B,"")}catch{}},Ec=function(B){let se=null,_e=null;if(P)B="<remove></remove>"+B;else{const xt=lE(B,/^[\r\n\t ]+/);_e=xt&&xt[0]}ei==="application/xhtml+xml"&&In===Bn&&(B='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+B+"</body></html>");const it=R?R.createHTML(B):B;if(In===Bn)try{se=new p().parseFromString(it,ei)}catch{}if(!se||!se.documentElement){se=V.createDocument(In,"template",null);try{se.documentElement.innerHTML=el?j:it}catch{}}const Vt=se.body||se.documentElement;return B&&_e&&Vt.insertBefore(r.createTextNode(_e),Vt.childNodes[0]||null),In===Bn?y.call(se,Qe?"html":"body")[0]:Qe?se.documentElement:Vt},ni=function(B){return C.call(B.ownerDocument||B,B,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},sl=function(B){return B instanceof f&&(typeof B.nodeName!="string"||typeof B.textContent!="string"||typeof B.removeChild!="function"||!(B.attributes instanceof h)||typeof B.removeAttribute!="function"||typeof B.setAttribute!="function"||typeof B.namespaceURI!="string"||typeof B.insertBefore!="function"||typeof B.hasChildNodes!="function")},Tc=function(B){return typeof l=="function"&&B instanceof l};function kn(xe,B,se){hd(xe,_e=>{_e.call(e,B,se,gr)})}const al=function(B){let se=null;if(kn(S.beforeSanitizeElements,B,null),sl(B))return rn(B),!0;const _e=St(B.nodeName);if(kn(S.uponSanitizeElement,B,{tagName:_e,allowedTags:ne}),B.hasChildNodes()&&!Tc(B.firstElementChild)&&gn(/<[/\w]/g,B.innerHTML)&&gn(/<[/\w]/g,B.textContent)||B.nodeType===Cl.progressingInstruction||Xe&&B.nodeType===Cl.comment&&gn(/<[/\w]/g,B.data))return rn(B),!0;if(!ne[_e]||de[_e]){if(!de[_e]&&Ms(_e)&&(X.tagNameCheck instanceof RegExp&&gn(X.tagNameCheck,_e)||X.tagNameCheck instanceof Function&&X.tagNameCheck(_e)))return!1;if(he&&!ye[_e]){const it=w(B)||B.parentNode,Vt=x(B)||B.childNodes;if(Vt&&it){const xt=Vt.length;for(let Wt=xt-1;Wt>=0;--Wt){const Cn=N(Vt[Wt],!0);Cn.__removalCount=(B.__removalCount||0)+1,it.insertBefore(Cn,b(B))}}}return rn(B),!0}return B instanceof u&&!Ds(B)||(_e==="noscript"||_e==="noembed"||_e==="noframes")&&gn(/<\/no(script|embed|frames)/i,B.innerHTML)?(rn(B),!0):(Ye&&B.nodeType===Cl.text&&(se=B.textContent,hd([M,D,K],it=>{se=Sl(se,it," ")}),B.textContent!==se&&(Tl(e.removed,{element:B.cloneNode()}),B.textContent=se)),kn(S.afterSanitizeElements,B,null),!1)},Ta=function(B,se,_e){if(oe&&(se==="id"||se==="name")&&(_e in r||_e in xc))return!1;if(!(Ne&&!ve[se]&&gn(ee,se))){if(!(Oe&&gn(re,se))){if(!H[se]||ve[se]){if(!(Ms(B)&&(X.tagNameCheck instanceof RegExp&&gn(X.tagNameCheck,B)||X.tagNameCheck instanceof Function&&X.tagNameCheck(B))&&(X.attributeNameCheck instanceof RegExp&&gn(X.attributeNameCheck,se)||X.attributeNameCheck instanceof Function&&X.attributeNameCheck(se))||se==="is"&&X.allowCustomizedBuiltInElements&&(X.tagNameCheck instanceof RegExp&&gn(X.tagNameCheck,_e)||X.tagNameCheck instanceof Function&&X.tagNameCheck(_e))))return!1}else if(!Ri[se]){if(!gn(ie,Sl(_e,q,""))){if(!((se==="src"||se==="xlink:href"||se==="href")&&B!=="script"&&$$(_e,"data:")===0&&Fn[B])){if(!(Ge&&!gn(pe,Sl(_e,q,"")))){if(_e)return!1}}}}}}return!0},Ms=function(B){return B!=="annotation-xml"&&lE(B,Y)},vr=function(B){kn(S.beforeSanitizeAttributes,B,null);const{attributes:se}=B;if(!se||sl(B))return;const _e={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H,forceKeepAttr:void 0};let it=se.length;for(;it--;){const Vt=se[it],{name:xt,namespaceURI:Wt,value:Cn}=Vt,yr=St(xt);let gt=xt==="value"?Cn:z$(Cn);if(_e.attrName=yr,_e.attrValue=gt,_e.keepAttr=!0,_e.forceKeepAttr=void 0,kn(S.uponSanitizeAttribute,B,_e),gt=_e.attrValue,J&&(yr==="id"||yr==="name")&&(Ea(xt,B),gt=ce+gt),Xe&&gn(/((--!?|])>)|<\/(style|title)/i,gt)){Ea(xt,B);continue}if(_e.forceKeepAttr||(Ea(xt,B),!_e.keepAttr))continue;if(!ze&&gn(/\/>/i,gt)){Ea(xt,B);continue}Ye&&hd([M,D,K],Ic=>{gt=Sl(gt,Ic," ")});const Sa=St(B.nodeName);if(Ta(Sa,yr,gt)){if(R&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!Wt)switch(g.getAttributeType(Sa,yr)){case"TrustedHTML":{gt=R.createHTML(gt);break}case"TrustedScriptURL":{gt=R.createScriptURL(gt);break}}try{Wt?B.setAttributeNS(Wt,xt,gt):B.setAttribute(xt,gt),sl(B)?rn(B):oE(e.removed)}catch{}}}kn(S.afterSanitizeAttributes,B,null)},Sc=function xe(B){let se=null;const _e=ni(B);for(kn(S.beforeSanitizeShadowDOM,B,null);se=_e.nextNode();)kn(S.uponSanitizeShadowNode,se,null),al(se),vr(se),se.content instanceof a&&xe(se.content);kn(S.afterSanitizeShadowDOM,B,null)};return e.sanitize=function(xe){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},se=null,_e=null,it=null,Vt=null;if(el=!xe,el&&(xe="<!-->"),typeof xe!="string"&&!Tc(xe))if(typeof xe.toString=="function"){if(xe=xe.toString(),typeof xe!="string")throw Il("dirty is not a string, aborting")}else throw Il("toString is not a function");if(!e.isSupported)return xe;if(rt||xa(B),e.removed=[],typeof xe=="string"&&(we=!1),we){if(xe.nodeName){const Cn=St(xe.nodeName);if(!ne[Cn]||de[Cn])throw Il("root node is forbidden and cannot be sanitized in-place")}}else if(xe instanceof l)se=Ec("<!---->"),_e=se.ownerDocument.importNode(xe,!0),_e.nodeType===Cl.element&&_e.nodeName==="BODY"||_e.nodeName==="HTML"?se=_e:se.appendChild(_e);else{if(!F&&!Ye&&!Qe&&xe.indexOf("<")===-1)return R&&z?R.createHTML(xe):xe;if(se=Ec(xe),!se)return F?null:z?j:""}se&&P&&rn(se.firstChild);const xt=ni(we?xe:se);for(;it=xt.nextNode();)al(it),vr(it),it.content instanceof a&&Sc(it.content);if(we)return xe;if(F){if(U)for(Vt=I.call(se.ownerDocument);se.firstChild;)Vt.appendChild(se.firstChild);else Vt=se;return(H.shadowroot||H.shadowrootmode)&&(Vt=_.call(i,Vt,!0)),Vt}let Wt=Qe?se.outerHTML:se.innerHTML;return Qe&&ne["!doctype"]&&se.ownerDocument&&se.ownerDocument.doctype&&se.ownerDocument.doctype.name&&gn(QC,se.ownerDocument.doctype.name)&&(Wt="<!DOCTYPE "+se.ownerDocument.doctype.name+`>
`+Wt),Ye&&hd([M,D,K],Cn=>{Wt=Sl(Wt,Cn," ")}),R&&z?R.createHTML(Wt):Wt},e.setConfig=function(){let xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};xa(xe),rt=!0},e.clearConfig=function(){gr=null,rt=!1},e.isValidAttribute=function(xe,B,se){gr||xa({});const _e=St(xe),it=St(B);return Ta(_e,it,se)},e.addHook=function(xe,B){typeof B=="function"&&Tl(S[xe],B)},e.removeHook=function(xe,B){if(B!==void 0){const se=U$(S[xe],B);return se===-1?void 0:B$(S[xe],se,1)[0]}return oE(S[xe])},e.removeHooks=function(xe){S[xe]=[]},e.removeAllHooks=function(){S=pE()},e}var Gf=JC();const i5={text:["headline","text"],media:["caption","credit"]},s5={start_date:["display_date"],end_date:["display_date"],slide:["display_date","group"],date:["display_date"]};Gf.addHook("afterSanitizeAttributes",function(t){if(t.nodeName=="A"&&"href"in t){"target"in t.attributes||t.setAttribute("target","_blank");let e=t.attributes.rel;e?e.value.indexOf("noopener")==-1&&t.setAttribute("rel",`noopener ${e.value}`):t.setAttribute("rel","noopener")}});function mE(t,e,r){Object.keys(r).forEach(i=>{var s=i=="slide"?t:t[i];s&&r[i].forEach(a=>{typeof s[a]<"u"&&(s[a]=e(s[a]))})})}function a5(t){return Gf.sanitize(t,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder","target"]})}class Gs{constructor(e){if(this.title="",this.scale="",this.events=[],this.eras=[],this.event_dict={},this.messages={errors:[],warnings:[]},typeof e=="object"&&e.events){if(this.scale=e.scale,this.events=[],this._ensureValidScale(e.events),e.title){var r=this._assignID(e.title);this._tidyFields(e.title),this.title=e.title,this.event_dict[r]=this.title}for(var i=0;i<e.events.length;i++)try{this.addEvent(e.events[i],!0)}catch(s){this.logError(s)}e.eras&&e.eras.forEach((s,a)=>{try{this.addEra(s)}catch(o){this.logError("Era "+a+": "+o)}}),dd(this.events),dd(this.eras)}}logError(e){Be(`logError: ${e}`),this.messages.errors.push(e)}getErrors(e){return e?this.messages.errors.join(e):this.messages.errors}validate(){(typeof this.events>"u"||typeof this.events.length>"u"||this.events.length==0)&&this.logError("Timeline configuration has no events.");for(var e=0;e<this.eras.length;e++)if(typeof this.eras[e].start_date>"u"||typeof this.eras[e].end_date>"u"){var r;this.eras[e].headline?r=this.eras[e].headline:r="era "+(e+1),this.logError("All eras must have start and end dates. ["+r+"]")}}isValid(){return this.messages.errors.length==0}addEvent(e,r){var i=this._assignID(e);return typeof e.start_date>"u"?(Be("Missing start date, skipping event"),console.log(e),null):(this._processDates(e),this._tidyFields(e),this.events.push(e),this.event_dict[i]=e,r||dd(this.events),i)}addEra(e){var r=this._assignID(e);if(typeof e.start_date>"u")throw new Ue("missing_start_date_err",r);this._processDates(e),this._tidyFields(e),this.eras.push({start_date:e.start_date,end_date:e.end_date,headline:e.text.headline})}_assignID(e){var r=e.unique_id;return Kn(r)||(r=e.text?pm(e.text.headline):null),e.unique_id=_$(this.event_dict,r),e.unique_id}_makeUniqueIdentifiers(e,r){for(var i=[e],s=0;s<r.length;s++)Kn(r[s].unique_id)&&(r[s].unique_id=pm(r[s].unique_id),i.indexOf(r[s].unique_id)==-1?i.push(r[s].unique_id):r[s].unique_id="");if(i.length!=r.length+1){for(var s=0;s<r.length;s++)if(!r[s].unique_id){var a=r[s].text?pm(r[s].text.headline):null;a||(a=ca(6)),i.indexOf(a)!=-1&&(a=a+"-"+s),i.push(a),r[s].unique_id=a}}}_ensureValidScale(e){if(!this.scale){this.scale="human";for(var r=0;r<e.length;r++){if(e[r].scale=="cosmological"){this.scale="cosmological";break}if(e[r].start_date&&typeof e[r].start_date.year<"u"){var i=new Wf(e[r].start_date),s=i.data.date_obj.year;if(s<-271820||s>275759){this.scale="cosmological";break}}}Be(`Determining scale dynamically: ${this.scale}`)}var a=sE[this.scale];a||this.logError("Don't know how to process dates on scale "+this.scale)}_processDates(e){var r=sE[this.scale];if(!(e.start_date instanceof r)){var i=e.start_date;if(e.start_date=new r(i),typeof e.end_date<"u"&&!(e.end_date instanceof r)){var s=e.end_date,a=!0;for(let o in i)a=a&&i[o]==s[o];a?(Be("End date same as start date is redundant; dropping end date"),delete e.end_date):e.end_date=new r(s)}}}getEarliestDate(){var e=this.events[0].start_date;return this.eras&&this.eras.length>0&&this.eras[0].start_date.isBefore(e)?this.eras[0].start_date:e}getLatestDate(){for(var e=[],r=0;r<this.events.length;r++)this.events[r].end_date?e.push({date:this.events[r].end_date}):e.push({date:this.events[r].start_date});for(var r=0;r<this.eras.length;r++)this.eras[r].end_date?e.push({date:this.eras[r].end_date}):e.push({date:this.eras[r].start_date});return dd(e,"date"),e.slice(-1)[0].date}_tidyFields(e){function r(i,s,a){a||(a=""),i.hasOwnProperty(s)||(i[s]=a)}e.group&&(e.group=Kn(e.group)),e.text||(e.text={}),r(e.text,"text"),r(e.text,"headline"),mE(e,a5,i5),mE(e,P$,s5)}}function o5(t,e){return t==null?"":(e=e||`
`,t.charAt(t.length-e.length)!==e?t:t.substring(0,t.length-e.length))}async function l5(t){return new Promise((e,r)=>{if(t.data){var i=ZC(eA(t.data,t),t);i.useMemoryStore=!0,e(i)}else t.url&&window.fetch(t.url,{mode:"cors"}).then(function(s){if(s.status!=200){s.headers.get("content-type")=="application/json"?s.text().then(a=>{r(JSON.parse(a))}):r({status_code:s.status,message:`Error fetching CSV: [${s.status} ${s.statusText}]`});return}return s.text?s.text():s}).then(function(s){if(s){var a=d5(s,t);a.useMemoryStore=!0,e(a)}}).catch(s=>{r({status_code:500,message:`Error fetching CSV: ${s}`})})})}function ZC(t,e){return e=e||{},e.noHeaderRow!==!0&&t.length>0?{fields:t[0].map((r,i)=>r&&r.trim?r.trim():`untitled${i}`),records:t.slice(1)}:{records:t}}function u5(t){var e={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var r in t)r==="trim"?e.skipinitialspace=t.trim:e[r.toLowerCase()]=t[r];return e}function eA(t,e){(!e||e&&!e.lineterminator)&&(t=c5(t,e));var r=u5(e);t=o5(t,r.lineterminator);var i="",s=!1,a=!1,o="",l=[],u=[],c,h;for(h=function(f){return a!==!0&&(f===""?f=null:r.skipinitialspace===!0&&(f=f.trim())),f},c=0;c<t.length;c+=1)i=t.charAt(c),s===!1&&(i===r.delimiter||i===r.lineterminator)?(o=h(o),l.push(o),i===r.lineterminator&&(u.push(l),l=[]),o="",a=!1):i!==r.quotechar?o+=i:s?t.charAt(c+1)===r.quotechar?(o+=r.quotechar,c+=1):s=!1:(s=!0,a=!0);return o=h(o),l.push(o),u.push(l),r.skipinitialrows&&(u=u.slice(r.skipinitialrows)),u}function c5(t,e){return e&&!e.lineterminator?t.replace(/(\r\n|\n|\r)/gm,`
`):t}function d5(t,e){let r=ZC(eA(t,e)),i=[];return r.records.forEach(s=>{let a={};r.fields.forEach((o,l)=>a[o]=s[l]),i.push(a)}),i}function Da(t){if(t)return t.replace(/[\s,]+/g,"")}function h5(t){let e={key:null,worksheet:0};var r=/\bkey=([-_A-Za-z0-9]+)&?/i,i=/docs.google.com\/spreadsheets(.*?)\/d\//;if(t.match(r))e.key=t.match(r)[1];else if(t.match(i)){var s=t.search(i)+t.match(i)[0].length,a=t.substr(s);e.key=a.split("/")[0],t.match(/\?gid=(\d+)/)&&(e.worksheet=t.match(/\?gid=(\d+)/)[1])}else t.match(/^\b[-_A-Za-z0-9]+$/)&&(e.key=t);return e.key?e:null}function f5(t){return typeof t!="string"?"":t.match(/^(https?:)?\/\/?/)?{url:t}:{color:t}}function p5(t){let e={};Object.keys(t).forEach(i=>{e[i]=Kn(t[i])});var r={media:{caption:e["Media Caption"]||"",credit:e["Media Credit"]||"",url:e.Media||"",thumbnail:e["Media Thumbnail"]||"",alt:e["Alt Text"]||""},text:{headline:e.Headline||"",text:e.Text||""},display_date:e["Display Date"]||"",group:e.Group||e.Tag||"",background:f5(e.Background),type:e.Type||""};if(Object.keys(e).includes("Start Date")||Object.keys(e).includes("End Date"))e["Start Date"]&&(r.start_date=Zx(e["Start Date"])),e["End Date"]&&(r.end_date=Zx(e["End Date"]));else{if(e.Year&&(r.start_date={year:Da(e.Year),month:Da(e.Month)||"",day:Da(e.Day)||""}),e["End Year"]&&(r.end_date={year:Da(e["End Year"])||"",month:Da(e["End Month"])||"",day:Da(e["End Day"])||""}),e.Time)if(r.start_date)et(r.start_date,rE(e.Time));else throw new Ue("invalid_start_time_without_date");if(e["End Time"])if(r.end_date)et(r.end_date,rE(e["End Time"]));else throw new Ue("invalid_end_time_without_date");if(r.start_date&&!iE(r.start_date))throw new Ue("invalid_date_err");if(r.end_date&&!iE(r.end_date))throw new Ue("invalid_date_err")}return r}async function m5(t,e){let r=[];t=g5(t),await l5({url:`${e}${t}`}).then(s=>{r=s}).catch(s=>{if(s.proxy_err_code=="response_not_csv")throw new Ue("Timeline could not read the data for your timeline. Make sure you have published it to the web.");let a="undefined error";throw Array.isArray(s.message)?a=s.message.join("<br>"):a=String(s.message),new Ue(a)});let i={events:[],errors:[],warnings:[],eras:[]};return r.forEach((s,a)=>{try{if(!w$(s)){let o=p5(s);_5(o,i)}}catch(o){if(o.constructor==Ue)i.errors.push(o);else{o.message&&(o=o.message);let l=s.Headline||a;i.errors.push(o+`[${l}]`)}}}),i}function g5(t){if(t=t.trim(),t.match(/^[a-zA-Z0-9-_]+$/))return`https://docs.google.com/spreadsheets/d/${t}/pub?output=csv`;if(t.startsWith("https://docs.google.com/spreadsheets/")){if(t.match(/\/pub\?output=csv$/))return t;let e=new URL(t),r=new URLSearchParams(e.search);r.set("output","csv"),r.get("gid")&&r.set("single","true"),e.search=`?${r.toString()}`;let i=e.pathname.substr(0,e.pathname.lastIndexOf("/"));return e.pathname=`${i}/pub`,e.toString()}throw new Ue("invalid_url_err",t)}async function v5(t,e){if(!e.sheets_proxy)throw new Ue("Proxy option must be set to read data from Google");var r=await m5(t,e.sheets_proxy);if(r)return r}async function y5(t,e){let r=null,i={};if(typeof e=="function"?r=e:typeof e=="object"&&(i=e,r=e.callback,typeof i.callback=="function"&&(r=i.callback)),!r)throw new Ue("Second argument to makeConfig must be either a function or an object which includes a 'callback' property with a 'function' type value");var s,a,o=h5(t);if(o){try{a=await v5(t,i)}catch(u){s=new Gs,u.name=="NetworkError"?s.logError(new Ue("network_err")):u.name=="TLError"?s.logError(u):s.logError(new Ue("unknown_read_err",u.name)),r(s);return}if(s=new Gs(a),a.errors)for(var l=0;l<a.errors.length;l++)s.logError(a.errors[l]);r(s)}else Xo({url:t,dataType:"json",success:function(u){try{s=new Gs(u)}catch(c){s=new Gs,s.logError(c)}r(s)},error:function(u,c,h){if(s=new Gs,c=="parsererror")var h=new Ue("invalid_url_err");else var h=new Ue("unknown_read_err",c);s.logError(h),r(s)}})}function _5(t,e){var r="event";typeof t.type<"u"&&(r=t.type,delete t.type),r=="title"?e.title?(e.warnings.push("Multiple title slides detected."),e.events.push(t)):e.title=t:r=="era"?e.eras.push(t):e.events.push(t)}class w5{constructor(e){if(e)this.scale=e.scale,this.minor=e.minor,this.major=e.major;else throw new Ue("axis_helper_no_options_err")}getPixelsPerTick(e){return e*this.minor.factor}getMajorTicks(e){return this._getTicks(e,this.major)}getMinorTicks(e){return this._getTicks(e,this.minor)}_getTicks(e,r){for(var i=e._scaled_padding*r.factor,s=e._earliest-i,a=e._latest+i,o=[],l=s;l<a;l+=r.factor)o.push(e.getDateFromTime(l).floor(r.name));return{name:r.name,ticks:o}}}var pv={},tA=function(t,e){pv[t]=[];for(var r=0;r<e.length-1;r++){var i=e[r],s=e[r+1];pv[t].push(new w5({scale:i[3],minor:{name:i[0],factor:i[1]},major:{name:s[0],factor:s[1]}}))}};tA("human",Vr);tA("cosmological",zd);function b5(t,e){typeof e!="number"&&(e=100);var r=t.getScale(),i=pv[r];if(!i)throw new Ue("axis_helper_scale_err",r);for(var s=null,a=0;a<i.length;a++){var o=i[a],l=o.getPixelsPerTick(t._pixels_per_milli);if(l>e){if(s==null)return o;var u=Math.abs(e-l),c=Math.abs(e-l);return u<c?o:s}s=o}return i[i.length-1]}const x5={millisecond:"time_milliseconds",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"compact",epoch:"compact",era:"compact",eon:"compact",eon2:"compact"};class gE{constructor(e,r){var i=e.events;this._scale=e.scale,r=et({display_width:500,screen_multiplier:3,max_rows:null},r),this._display_width=r.display_width,this._screen_multiplier=r.screen_multiplier,this._pixel_width=this._screen_multiplier*this._display_width,this._group_labels=void 0,this._positions=[],this._pixels_per_milli=0,this._earliest=e.getEarliestDate().getTime(),this._latest=e.getLatestDate().getTime(),this._span_in_millis=this._latest-this._earliest,this._span_in_millis<=0&&(this._span_in_millis=this._computeDefaultSpan(e)),this._average=this._span_in_millis/i.length,this._pixels_per_milli=this.getPixelWidth()/this._span_in_millis,this._axis_helper=b5(this),this._scaled_padding=1/this.getPixelsPerTick()*(this._display_width/2),this._computePositionInfo(i,r.max_rows)}_computeDefaultSpan(e){if(e.scale=="human"){for(var r={},i=0;i<e.events.length;i++){var s=e.events[i].start_date.findBestFormat();r[s]=r[s]?r[s]+1:1}for(var i=Vr.length-1;i>=0;i--)if(r.hasOwnProperty(Vr[i][0])){var a=Vr[Vr.length-1];return Vr[i+1]&&(a=Vr[i+1]),a[1]}return 365*24*60*60*1e3}return 2e5}getGroupLabels(){return this._group_labels||[]}getScale(){return this._scale}getNumberOfRows(){return this._number_of_rows}getPixelWidth(){return this._pixel_width}getPosition(e){return(e-this._earliest)*this._pixels_per_milli}getPositionInfo(e){return this._positions[e]}getPixelsPerTick(){return this._axis_helper.getPixelsPerTick(this._pixels_per_milli)}getTicks(){return{major:this._axis_helper.getMajorTicks(this),minor:this._axis_helper.getMinorTicks(this)}}getDateFromTime(e){if(this._scale=="human")return new Hf(e);if(this._scale=="cosmological")return new Wf(new Ou(e));throw new Ue("time_scale_scale_err",this._scale)}getMajorScale(){return this._axis_helper.major.name}getMinorScale(){return this._axis_helper.minor.name}_assessGroups(e){for(var r=[],i=!1,s=0;s<e.length;s++)e[s].group&&(r.indexOf(e[s].group)<0?r.push(e[s].group):i=!0);return r.length&&i&&r.push(""),r}_computeRowInfo(e,r){for(var i=[],s=0,a=0;a<e.length;a++){var o=e[a],l=[];delete o.row;for(var u=0;u<i.length;u++)if(l.push(i[u].end-o.start),l[u]<=0){o.row=u,i[u]=o;break}if(typeof o.row>"u")if(r===null)o.row=i.length,i.push(o);else if(r>0)o.row=i.length,i.push(o),r--;else{var c=Math.min.apply(null,l),h=l.indexOf(c);o.row=h,o.end>i[h].end&&(i[h]=o),s++}}return{n_rows:i.length,n_overlaps:s}}_computePositionInfo(e,r,i){i=i||100;for(var s=[],a=!1,o=0;o<e.length;o++){var l={start:this.getPosition(e[o].start_date.getTime())};if(this._positions.push(l),typeof e[o].end_date<"u"){var u=this.getPosition(e[o].end_date.getTime());l.width=u-l.start,l.width>i?l.end=l.start+l.width:l.end=l.start+i}else l.width=i,l.end=l.start+i;e[o].group?s.indexOf(e[o].group)<0&&s.push(e[o].group):a=!0}if(s.length){a&&s.push("");for(var h=[],o=0;o<s.length;o++)h[o]={label:s[o],idx:o,positions:[],n_rows:1,n_overlaps:0};for(var o=0;o<this._positions.length;o++){var l=this._positions[o];l.group=s.indexOf(e[o].group||""),l.row=0;for(var f=h[l.group],p=f.positions.length-1;p>=0;p--)f.positions[p].end>l.start&&f.n_overlaps++;f.positions.push(l)}for(var g=s.length;;){var T=Math.max(0,r-g);if(!T||(h.sort(function(x,w){return x.n_overlaps>w.n_overlaps?-1:x.n_overlaps<w.n_overlaps?1:x.idx-w.idx}),!h[0].n_overlaps))break;for(var g=0,o=0;o<h.length;o++){var f=h[o];if(f.n_overlaps&&T){var N=this._computeRowInfo(f.positions,f.n_rows+1);f.n_rows=N.n_rows,f.n_overlaps=N.n_overlaps,T--}g+=f.n_rows}}this._number_of_rows=g,this._group_labels=[],h.sort(function(b,x){return b.idx-x.idx});for(var o=0,A=0;o<h.length;o++){this._group_labels.push({label:h[o].label,rows:h[o].n_rows});for(var p=0;p<h[o].positions.length;p++){var l=h[o].positions[p];l.row+=A}A+=h[o].n_rows}}else{var c=this._computeRowInfo(this._positions,r);this._number_of_rows=c.n_rows}}getAxisTickDateFormat(e){return this._scale=="cosmological"?"compact":x5[e]}}class nA{constructor(e){this._el={parent:{},container:{},message:{}},this.options={width:600,height:600},this.data={label:"",rows:1},this._el.container=fe("div","tl-timegroup"),et(this.data,e),this.animator={},this._initLayout(),this._initEvents()}updateDisplay(e,r){}setRowPosition(e,r){this.options.height=r*this.data.rows,this.setPosition({top:e}),this._el.container.style.height=this.options.height+"px"}setAlternateRowColor(e,r){var i="tl-timegroup";e&&(i+=" tl-timegroup-alternate"),r&&(i+=" tl-timegroup-hidden"),this._el.container.className=i}_onMouseClick(){this.fire("clicked",this.options)}_initLayout(){this._el.message=fe("div","tl-timegroup-message",this._el.container),this._el.message.innerHTML=this.data.label}_initEvents(){Re.addListener(this._el.container,"click",this._onMouseClick,this)}_updateDisplay(e,r,i){}}Tn(nA,Sn,Ci);class rA{constructor(e,r,i,s){this.start_date=e,this.end_date=r,this.headline=i,this._el={container:{},background:{},content_container:{},content:{},text:{}},this._text={},this._state={loaded:!1},this.options={duration:1e3,ease:$f,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,et(this.options,s),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(e){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.start_date.getTime()}getEndTime(){return this.end_date?this.end_date.getTime():!1}setHeight(e){var r=12,i=1;this._el.content_container.style.height=e+"px",this._el.content.className="tl-timeera-content",Uf?(i=Math.floor(e/(r+2)),i<1&&(i=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=i):(i=e/r,i>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=i*r+"px")}setWidth(e){this.end_date&&(this._el.container.style.width=e+"px",e>this.options.marker_width_min?(this._el.content_container.style.width=e+"px",this._el.content_container.className="tl-timeera-content-container tl-timeera-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timeera-content-container"))}setClass(e){this._el.container.className=e}setRowPosition(e,r){this.setPosition({top:e}),r<56&&this._el.content_container.remove("tl-timeera-content-container-small")}setColor(e){this._el.container.className="tl-timeera tl-timeera-color"+e}_initLayout(){this._el.container=fe("div","tl-timeera"),this.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timeera tl-timeera-with-end"),this._el.content_container=fe("div","tl-timeera-content-container",this._el.container),this._el.background=fe("div","tl-timeera-background",this._el.content_container),this._el.content=fe("div","tl-timeera-content",this._el.content_container),this._el.text=fe("div","tl-timeera-text",this._el.content),this._text=fe("h2","tl-headline",this._el.text),this.headline&&this.headline!=""&&(this._text.innerHTML=uo(this.headline)),this.onLoaded()}_initEvents(){}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}Tn(rA,Sn,Ci);function E5(t){const e=t.getBoundingClientRect();return e.left>=0&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}class iA{constructor(e,r,i){i&&this.setLanguage(i),this._el={container:{},content_container:{},major:{},minor:{}},this._text={},this._state={loaded:!1},this.data={},this.options={duration:1e3,ease:$f,width:600,height:600},this.active=!1,this.animator={},this.axis_helper={},this.minor_ticks=[],this.major_ticks=[],typeof e=="object"?this._el.container=e:this._el.container=cc(e),et(this.options,r),this._initLayout(),this._initEvents()}show(){}hide(){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}getLeft(){return this._el.container.style.left.slice(0,-2)}drawTicks(e,r){var i=e.getTicks();this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor",this._el.major.style.opacity=0,this._el.minor.style.opacity=0,this.major_ticks=this._createTickElements(i.major.ticks,this._el.major,e.getAxisTickDateFormat(i.major.name)),this.minor_ticks=this._createTickElements(i.minor.ticks,this._el.minor,e.getAxisTickDateFormat(i.minor.name),i.major.ticks),this.positionTicks(e,r,!0),this._el.major.className="tl-timeaxis-major tl-animate-opacity tl-timeaxis-animate-opacity",this._el.minor.className="tl-timeaxis-minor tl-animate-opacity tl-timeaxis-animate-opacity",this._el.major.style.opacity=1,this._el.minor.style.opacity=1}_createTickElements(e,r,i,s){r.innerHTML="";var a={},o=new Date(-1,13,-30);if(a[o.getTime()]=!0,s)for(var l=0;l<s.length;l++)a[s[l].getTime()]=!0;for(var u=[],l=0;l<e.length;l++){var c=e[l];if(!(c.getTime()in a)){var h=fe("div","tl-timeaxis-tick",r),f=fe("span","tl-timeaxis-tick-text tl-animate-opacity",h);let g=c.getDisplayDate(this.getLanguage(),i);f.innerHTML=g,u.push({tick:h,tick_text:f,display_date:g,date:c})}}return u}positionTicks(e,r,i){i?(this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor"):(this._el.major.className="tl-timeaxis-major tl-timeaxis-animate",this._el.minor.className="tl-timeaxis-minor tl-timeaxis-animate"),this._positionTickArray(this.major_ticks,e,r),this._positionTickArray(this.minor_ticks,e,r)}_positionTickArray(e,r,i){if(e[1]&&e[0]){var s=r.getPosition(e[1].date.getMillisecond())-r.getPosition(e[0].date.getMillisecond()),a=1;s<i&&(a=Math.round(i/r.getPixelsPerTick()));for(var o=1,l=0;l<e.length;l++){var u=e[l];u.tick.style.left=r.getPosition(u.date.getMillisecond())+"px",u.tick_text.innerHTML=u.display_date,a>1?o>=a?(o=1,u.tick_text.style.opacity=1,u.tick.className="tl-timeaxis-tick"):(o++,u.tick_text.style.opacity=0,u.tick.className="tl-timeaxis-tick tl-timeaxis-tick-hidden"):(u.tick_text.style.opacity=1,u.tick.className="tl-timeaxis-tick")}}}getVisibleTicks(){return{major:this._getVisibleTickArray(this.major_ticks),minor:this._getVisibleTickArray(this.minor_ticks)}}_getVisibleTickArray(e){return e.filter(({tick:r})=>E5(r))}_initLayout(){this._el.content_container=fe("div","tl-timeaxis-content-container",this._el.container),this._el.major=fe("div","tl-timeaxis-major",this._el.content_container),this._el.minor=fe("div","tl-timeaxis-minor",this._el.content_container),this.onLoaded()}_initEvents(){}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}Tn(iA,Sn,Ci,Pi);class sA{constructor(e,r,i){this._el={container:{},content_container:{},content:{},headline_container:{},headline:{},date:{}},this.options={title:!1},this.data={unique_id:"",headline:"headline",text:"text"},T$(this,e),et(this.options,r),this._el.container=fe("div","tl-text"),this._el.container.id=this.data.unique_id,this._initLayout(),i&&i.appendChild(this._el.container)}show(){}hide(){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}headlineHeight(){return this._el.headline.offsetHeight+40}addDateText(e){this._el.date.innerHTML=e}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){if(this._el.content_container=fe("div","tl-text-content-container",this._el.container),this._el.headline_container=fe("div","tl-text-headline-container",this._el.content_container),this.data.headline!=""){var e="tl-headline";this.options.title&&(e="tl-headline tl-headline-title"),this._el.headline=fe("h2",e,this._el.headline_container),this._el.headline.innerHTML=this.data.headline}if(this._el.date=fe("h3","tl-headline-date",this._el.headline_container),this.data.text!=""){var r="";r+=S$(this.options.autolink==!0?lv(this.data.text):this.data.text),this._el.content=fe("div","tl-text-content",this._el.content_container),this._el.content.innerHTML=r}this.onLoaded()}}Tn(sA,Sn);class ht{constructor(e,r,i){i&&this.setLanguage(i),this._el={container:{},content_container:{},content:{},content_item:{},content_link:{},caption:null,credit:null,parent:{},link:null},this.player=null,this.timer=null,this.load_timer=null,this.message=null,this.media_id=null,this._state={loaded:!1,show_meta:!1,media_loaded:!1},this.data={unique_id:null,url:null,credit:null,caption:null,credit_alternate:null,caption_alternate:null,link:null,link_target:null},this.options={api_key_flickr:"bd3a7c45ddd52f3101825d41563a6125",api_key_googlemaps:"AIzaSyB9dW8e_iRrATFa8g24qB6BDBGdkrLDZYI",api_key_embedly:"",credit_height:0,caption_height:0,background:0},this.animator={},et(this.options,r),et(this.data,e),this.options.background||(this._el.container=fe("div","tl-media"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._initLayout())}loadMedia(){var e=this;if(!this._state.loaded)try{this.load_timer=setTimeout(function(){e.loadingMessage(),e._loadMedia(),e._updateDisplay()},1200)}catch(r){Be("Error loading media for ",this._media),Be(r)}}_updateMessage(e){this.message&&this.message.updateMessage(e)}loadingMessage(){this._updateMessage(this._("loading")+" "+this.options.media_name)}errorMessage(e){e?e=this._("error")+": "+e:e=this._("error"),this._updateMessage(e)}updateMediaDisplay(e){this._state.loaded&&!this.options.background&&(wa?this._el.content_item.style.maxHeight=this.options.height/2+"px":this._el.content_item.style.maxHeight=this.options.height-this.options.credit_height-this.options.caption_height-30+"px",this._el.container.style.maxWidth=this.options.width+"px",Ro&&this._el.content_item.offsetWidth>this._el.content_item.offsetHeight,this._updateMediaDisplay(e),this._state.media_loaded&&(this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")))}_loadMedia(){this.onLoaded()}_updateMediaDisplay(e){Ro&&(this._el.content_item.style.maxWidth=this.options.width+"px",this._el.content_item.style.width="auto")}_getMeta(){}_getImageURL(e,r){return""}show(){}hide(){}addTo(e){e.appendChild(this._el.container),this.onAdd()}removeFrom(e){e.removeChild(this._el.container),this.onRemove()}getImageURL(e,r){return this._getImageURL(e,r)}updateDisplay(e,r,i){this._updateDisplay(e,r,i)}stopMedia(){try{this._stopMedia()}catch(e){Be(`stopMedia() exception: ${e}`)}}loadErrorDisplay(e){try{this._el.content.removeChild(this._el.content_item)}catch{}this._el.content_item=fe("div","tl-media-item tl-media-loaderror",this._el.content),this._el.content_item.innerHTML="<div class='tl-icon-"+this.options.media_type+"'></div><p>"+e+"</p>",this.onLoaded(!0)}onLoaded(e){this._state.loaded=!0,this.fire("loaded",this.data),this.message&&this.message.hide(),e||this.options.background||this.showMeta(),this.updateDisplay()}onMediaLoaded(e){this._state.media_loaded=!0,this.fire("media_loaded",this.data),this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")}showMeta(e,r){this._state.show_meta=!0,this.data.credit&&this.data.credit!=""&&(this._el.credit=fe("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.options.autolink==!0?lv(this.data.credit):this.data.credit,this.options.credit_height=this._el.credit.offsetHeight),this.data.caption&&this.data.caption!=""&&(this._el.caption=fe("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.options.autolink==!0?lv(this.data.caption):this.data.caption,this.options.caption_height=this._el.caption.offsetHeight),(!this.data.caption||!this.data.credit)&&this.getMeta()}getMeta(){this._getMeta()}updateMeta(){!this.data.credit&&this.data.credit_alternate&&(this._el.credit=fe("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.data.credit_alternate,this.options.credit_height=this._el.credit.offsetHeight),!this.data.caption&&this.data.caption_alternate&&(this._el.caption=fe("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.data.caption_alternate,this.options.caption_height=this._el.caption.offsetHeight),this.updateDisplay()}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){this.message=new qf(this._el.container,this.options,this.getLanguage()),this._el.content_container=fe("div","tl-media-content-container",this._el.container),this.data.link&&this.data.link!=""?(this._el.link=fe("a","tl-media-link",this._el.content_container),this._el.link.href=this.data.link,this.data.link_target&&this.data.link_target!=""?this._el.link.target=this.data.link_target:this._el.link.target="_blank",this._el.link.target=="_blank"&&this._el.link.setAttribute("rel","noopener"),this._el.content=fe("div","tl-media-content",this._el.link)):this._el.content=fe("div","tl-media-content",this._el.content_container)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r),i&&(this.options.layout=i),this._el.credit&&(this.options.credit_height=this._el.credit.offsetHeight),this._el.caption&&(this.options.caption_height=this._el.caption.offsetHeight+5),this.updateMediaDisplay(this.options.layout)}domCreate(...e){return fe(...e)}_stopMedia(){}}Tn(ht,Sn,Pi);let vE=class extends ht{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=this,r="tl-media-item tl-media-image tl-media-shadow";(this.data.url.match(/.png(\?.*)?$/)||this.data.url.match(/.svg(\?.*)?$/))&&(r="tl-media-item tl-media-image"),this._el.content_item=this.domCreate("img",r,this._el.content),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=No(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=No(this.data.caption)),this._el.content_item.addEventListener("load",function(i){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL()}getImageURL(e,r){return Bf(this.data.url)}_updateMediaDisplay(e){Ro&&(this._el.content_item.style.width="auto")}};class T5{constructor(e){this.doc=e,this.pending={},this.queue={css:[],js:[]},this.styleSheets=e.styleSheets,this.env=this.getEnv(),this.head=this.doc.head||this.doc.getElementsByTagName("head")[0],this.pollCount=0}createNode(e,r){var i=this.doc.createElement(e),s;for(s in r)r.hasOwnProperty(s)&&i.setAttribute(s,r[s]);return i}finish(e){var r=this.pending[e],i,s;r&&(i=r.callback,s=r.urls,s.shift(),this.pollCount=0,s.length||(i&&i.call(r.context,r.obj),this.pending[e]=null,this.queue[e].length&&this.load(e)))}getEnv(){var e=navigator.userAgent,r={async:this.doc.createElement("script").async===!0};return(r.webkit=/AppleWebKit\//.test(e))||(r.ie=/MSIE/.test(e))||(r.opera=/Opera/.test(e))||(r.gecko=/Gecko\//.test(e))||(r.unknown=!0),r}load(e,r,i,s,a){var o=(function(){this.finish(e)}).bind(this),l=e==="css",u=[],c,h,f,p,g,T;if(r)if(r=typeof r=="string"?[r]:r.concat(),l||this.env.async||this.env.gecko||this.env.opera)this.queue[e].push({urls:r,callback:i,obj:s,context:a});else for(c=0,h=r.length;c<h;++c)this.queue[e].push({urls:[r[c]],callback:c===h-1?i:null,obj:s,context:a});if(!(this.pending[e]||!(p=this.pending[e]=this.queue[e].shift()))){for(g=p.urls,c=0,h=g.length;c<h;++c)T=g[c],l?f=this.env.gecko?this.createNode("style"):this.createNode("link",{href:T,rel:"stylesheet"}):(f=this.createNode("script",{src:T}),f.async=!1),f.className="lazyload",f.setAttribute("charset","utf-8"),this.env.ie&&!l?f.onreadystatechange=function(){/loaded|complete/.test(f.readyState)&&(f.onreadystatechange=null,o())}:l&&(this.env.gecko||this.env.webkit)?this.env.webkit?(p.urls[c]=f.href,this.pollWebKit()):(f.innerHTML='@import "'+T+'";',this.pollGecko(f)):f.onload=f.onerror=o,u.push(f);for(c=0,h=u.length;c<h;++c)this.head.appendChild(u[c])}}pollGecko(e){var r;try{r=!!e.sheet.cssRules}catch{if(this.pollCount+=1,this.pollCount<200){var i=this;setTimeout(function(){i.pollGecko(e)},50)}else r&&this.finish("css");return}this.finish("css")}pollWebKit(){var e=this.pending.css,r;if(e){for(r=this.styleSheets.length;--r>=0;)if(this.styleSheets[r].href===e.urls[0]){this.finish("css");break}this.pollCount+=1,e&&(this.pollCount<200?setTimeout(this.pollWebKit.bind(this),50):this.finish("css"))}}css(e,r,i,s){this.load("css",e,r,i,s)}js(e,r,i,s){this.load("js",e,r,i,s)}}function da(t,e,r,i){aA.js(t,e,r,i)}function bm(t,e,r,i){aA.css(t,e,r,i)}let aA=new T5(document);class S5 extends ht{_loadMedia(){var e=this,r;this.youtube_loaded=!1,this._el.content_item=this.domCreate("div","tl-media-item tl-media-youtube tl-media-shadow",this._el.content),this._el.content_item.id=ca(7),r=I$(this.data.url),this.media_id={},this.data.url.match("v=")?this.media_id.id=r.v:this.data.url.match("/embed/")?this.media_id.id=this.data.url.split("embed/")[1].split(/[?&]/)[0]:this.data.url.match(/v\/|v=|youtu\.be\//)?this.media_id.id=this.data.url.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0]:Be("YOUTUBE IN URL BUT NOT A VALID VIDEO"),this.data.url.match("start=")?this.media_id.start=mm(this.data.url.split("start=")[1]):this.data.url.match("t=")&&(this.media_id.start=mm(this.data.url.split("t=")[1])),this.data.url.match("end=")&&(this.media_id.end=mm(this.data.url.split("end=")[1])),this.media_id.hd=typeof r.hd<"u",da("https://www.youtube.com/iframe_api",function(){e.createMedia()})}_updateMediaDisplay(){this._el.content_item.style.height=ba.r16_9({w:this.options.width})+"px",this._el.content_item.style.width=this.options.width+"px"}_stopMedia(){if(this.youtube_loaded)try{this.player.getPlayerState()==YT.PlayerState.PLAYING&&this.player.pauseVideo()}catch(e){Be(e)}}createMedia(){var e=this;clearTimeout(this.timer),typeof YT<"u"&&typeof YT.Player<"u"?this.player=new YT.Player(this._el.content_item.id,{playerVars:{enablejsapi:1,color:"white",controls:1,start:this.media_id.start,end:this.media_id.end,fs:1},videoId:this.media_id.id,events:{onReady:function(){e.onPlayerReady(),e.onLoaded()},onStateChange:e.onStateChange}}):this.timer=setTimeout(function(){e.createMedia()},1e3)}onPlayerReady(e){this.youtube_loaded=!0,this._el.content_item=document.getElementById(this._el.content_item.id),this.onMediaLoaded()}onStateChange(e){e.data==YT.PlayerState.ENDED&&(e.target.seekTo(0),e.target.pauseVideo())}}class I5 extends ht{_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-map tl-media-shadow",this._el.content),this.media_id=this.data.url,this.mapframe=this.domCreate("iframe","",this._el.content_item),this.mapframe.width="100%",this.mapframe.height="100%",this.mapframe.frameBorder="0",this.mapframe.src=this.makeGoogleMapsEmbedURL(this.media_id,this.options.api_key_googlemaps),this.onLoaded()}_updateMediaDisplay(){if(this._state.loaded){var e=ba.square({w:this._el.content_item.offsetWidth});this._el.content_item.style.height=e.h+"px"}}makeGoogleMapsEmbedURL(e,r){var i=!1;function s(f){function p(N,A){if(N.slice(-1)=="z")A.zoom=N;else if(N.slice(-1)=="m")A.zoom=14,A.maptype="satellite";else if(N.slice(-1)=="t"){if(i=!0,T=="place")var b=f.match(h.place)[3]+","+f.match(h.place)[4];else{var b=A.center;delete A.center}A={},A.location=b,streetview_params=N.split(",");for(let w in a.streetview){var x=parseInt(w)+1;a.streetview[w]=="pitch"&&streetview_params[x]=="90t"?A[a.streetview[w]]=0:A[a.streetview[w]]=streetview_params[x].slice(0,-1)}}return A}function g(N,A){var b={},x=A[1],w=A[A.length-1];for(let j in a[N]){var R=parseInt(j)+2;a[N][j]=="center"?b[a[N][j]]=A[R]+","+A[++R]:b[a[N][j]]=A[R]}return b=p(w,b),b.key=r,i==!0&&(N="streetview"),x+"/embed/v1/"+N+k$(b)}let T="view";return f.match(h.place)?T="place":f.match(h.directions)?T="directions":f.match(h.search)&&(T="search"),g(T,f.match(h[T]))}var a={view:["center"],place:["q","center"],directions:["origin","destination","center"],search:["q","center"],streetview:["fov","heading","pitch"]},o=/(https:\/\/.+google.+?\/maps)/,l=/@([-\d.]+),([-\d.]+)/,u=/([\w\W]+)/,c=/,((?:[-\d.]+[zmayht],?)*)/,h={view:new RegExp(o.source+"/"+l.source+c.source),place:new RegExp(o.source+"/place/"+u.source+"/"+l.source+c.source),directions:new RegExp(o.source+"/dir/"+u.source+"/"+u.source+"/"+l.source+c.source),search:new RegExp(o.source+"/search/"+u.source+"/"+l.source+c.source)};return s(e)}}class k5 extends ht{constructor(e,r,i){super(e,r,i),this.blockquote=Gf.sanitize(this.data.url)}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-blockquote",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this._el.content_item.innerHTML=this.blockquote,this.onLoaded()}updateMediaDisplay(){}}class C5 extends ht{_loadMedia(){var e,r,i=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-wikipedia",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.media_id=this.data.url.split("wiki/")[1].split("#")[0].replace("_"," "),this.media_id=this.media_id.replace(" ","%20"),r=this.data.url.split("//")[1].split(".wikipedia")[0],e="https://"+r+".wikipedia.org/w/api.php?action=query&prop=extracts|pageimages&redirects=&titles="+this.media_id+"&exintro=1&format=json&callback=?",Xo({type:"GET",url:e,dataType:"json",success:function(s){i.createMedia(s)},error:function(s,a){var o="";o+=i._("wikipedia_load_err")+"<br/>"+i.media_id+"<br/>"+a,i.loadErrorDisplay(o)}})}createMedia(e){var r="";if(e.query){var i="",r={entry:{},title:"",text:"",extract:"",paragraphs:1,page_image:"",text_array:[]};r.entry=C$(e.query.pages,0),r.extract=r.entry.extract,r.title=r.entry.title,r.page_image=r.entry.thumbnail,r.extract.match("<p>")?r.text_array=r.extract.split("<p>"):r.text_array.push(r.extract);for(var s=0;s<r.text_array.length;s++)s+1<=r.paragraphs&&s+1<r.text_array.length&&(r.text+="<p>"+r.text_array[s+1]);i+="<span class='tl-icon-wikipedia'></span>",i+="<div class='tl-wikipedia-title'><h4><a href='"+this.data.url+"' target='_blank' rel='noopener'>"+r.title+"</a></h4>",i+="<span class='tl-wikipedia-source'>"+this._("wikipedia")+"</span></div>",r.page_image,i+=r.text,r.extract.match("REDIRECT")||(this._el.content_item.innerHTML=i,this.onLoaded())}}updateMediaDisplay(){}}function A5(t){if(t.match(/^.+#\/media\/.+/))return`File:${t.split("#")[1].split(":")[1]}`;if(t.match(/^.*commons.wikimedia.org\/wiki\/File:.+/)){let e=t.split("/");return e[e.length-1]}return null}function P5(t){let e={};if(t.query&&t.query.pages){let r=Object.keys(t.query.pages);e.page_id=r[0];let i=t.query.pages[e.page_id];e.url=i.imageinfo[0].thumburl,i.entityterms&&i.entityterms.label&&(e.label=i.entityterms.label[0])}return e}class yE extends ht{_loadMedia(){var e,r=Math.round(this.options.width)||1e3,i=this.getLanguage().lang.toLowerCase(),s=this;try{this.establishMediaID(),e=`https://commons.wikimedia.org/w/api.php?action=query&titles=${this.media_id}&prop=imageinfo|entityterms&iiprop=url&&iiurlwidth=${r}&format=json&origin=*&wbetlanguage=${i}`,Bh(e,function(a){let o=P5(a);o.url?(s.base_image_url=o.url,s.page_id=o.page_id,!s.data.alt&&o.label&&(s.data.alt=o.label),s.options.background||s.createMedia(),s.onLoaded()):s.loadErrorDisplay(s._("wikipedia_image_load_err"))})}catch(a){s.loadErrorDisplay(s._(a.message_key))}}establishMediaID(){let e=A5(this.data.url);if(e)this.media_id=e;else throw new Ue("Invalid Wikipedia Image URL")}createMedia(){var e=this;if(this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-wikipedia-image tl-media-shadow",this._el.content),this.data.alt)this._el.content_item.alt=this.data.alt;else if(this.page_id){let r=`M${this.page_id}`,i=`https://commons.wikimedia.org/w/api.php?action=wbgetentities&format=json&ids=${r}&format=json&origin=*`;zf(i).then(s=>{if(s.entities&&s.entities[r]){let a=s.entities[r].labels,o=e.getLanguage().lang.toLowerCase(),l=null;a[o]?l=a[o]:o.length>2&&a[o.substr(0,2)]?l=a[o.substr(0,2)]:a.en&&(l=a.en),l?(console.log(`wikibase_id: ${e.media_id} alt ${l.value}`),e.data.alt=l.value,e._el.content_item.alt=e.data.alt):console.log(`wikibase_id: ${e.media_id} ain't got no alt`)}})}this.data.title&&(this._el.content_item.title=this.data.title),this._el.content_item.addEventListener("load",function(r){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}_getImageURL(e,r){if(e&&this.base_image_url){let i=this.base_image_url.match(/(\/[\d\.]+px-)/);if(i)return e=Math.round(e),this.base_image_url.replace(i[1],`/${e}px-`)}return this.base_image_url}}class R5 extends ht{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-soundcloud tl-media-shadow",this._el.content),this.media_id=this.data.url,e="https://soundcloud.com/oembed?url="+this.media_id+"&format=js&callback=?",Bh(e,function(i){da("https://w.soundcloud.com/player/api.js",function(){r.createMedia(i)})})}createMedia(e){this._el.content_item.innerHTML=e.html,self.widget=SC.Widget(this._el.content_item.querySelector("iframe")),this.soundCloudCreated=!0,this.onLoaded()}_stopMedia(){this.soundCloudCreated&&self.widget.pause()}}class N5 extends ht{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vimeo tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0];var i=null;this.data.url.match(/#t=([^&]+).*/)&&(i=this.data.url.match(/#t=([^&]+).*/)[1]),e="https://player.vimeo.com/video/"+this.media_id+"?api=1&title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff",i&&(e=e+="&amp;#t="+i),this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(s){r.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=ba.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player&&this.player.contentWindow&&this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(e){Be(e)}}}class D5 extends ht{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-dailymotion",this._el.content),this.data.url.indexOf("dai.ly/")!=-1?this.media_id=this.data.url.substr(this.data.url.indexOf("dai.ly/")+7):this.data.url.match("video")?this.media_id=this.data.url.split("video/")[1].split(/[?&]/)[0]:this.media_id=this.data.url.split("embed/")[1].split(/[?&]/)[0],this.media_id.indexOf("_")!=-1&&(this.media_id=this.media_id.split("_")[0]),e="https://www.dailymotion.com/embed/video/"+this.media_id+"?api=postMessage",this._el.content_item.innerHTML="<iframe autostart='false' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._state.loaded&&(this._el.content_item.style.height=ba.r16_9({w:this._el.content_item.offsetWidth})+"px")}_stopMedia(){this._state.loaded&&this._el.content_item.querySelector("iframe").contentWindow.postMessage('{"command":"pause","parameters":[]}',"*")}}class M5 extends ht{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vine tl-media-shadow",this._el.content),this.media_id=this.data.url.split("vine.co/v/")[1],e="https://vine.co/v/"+this.media_id+"/embed/simple",this._el.content_item.innerHTML="<iframe frameborder='0' width='100%' height='100%' src='"+e+"'></iframe><script async src='https://platform.vine.co/static/scripts/embed.js' charset='utf-8'><\/script>",this.onLoaded()}_updateMediaDisplay(){var e=ba.square({w:this._el.content_item.offsetWidth,h:this.options.height});this._el.content_item.style.height=e.h+"px"}_stopMedia(){this._el.content_item.querySelector("iframe").contentWindow.postMessage("pause","*")}}class L5 extends ht{_loadMedia(){var e,r=this;if(this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.data.url.match("^(https?:)?/*(www.)?(twitter|x).com"))this.data.url.match("status/")?this.media_id=this.data.url.split("status/")[1]:this.data.url.match("statuses/")?this.media_id=this.data.url.split("statuses/")[1]:this.media_id="";else if(this.data.url.match(`<blockquote class=['"]twitter-tweet['"]`)){var i=this.data.url.match(/(status|statuses)\/(\d+)/);if(i&&i.length>2)this.media_id=i[2];else{r.loadErrorDisplay(r._("twitterembed_invalidurl_err"));return}}e="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",Xo({type:"GET",url:e,dataType:"json",success:function(s){r.createMedia(s)},error:function(s,a){var o="";o+=r._("twitter_load_err")+"<br/>"+r.media_id+"<br/>"+a,r.loadErrorDisplay(o)}})}createMedia(e){var r="",i="",s="",a="",o="",l="",u=this;i=e.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=e.author_url.split("twitter.com/")[1],a=e.html.split("</p>&mdash;")[1].split('<a href="')[1],o=a.split('">')[0],l=a.split('">')[1].split("</a>")[0],i=i.replace(/<a href/ig,'<a target="_blank" rel="noopener" href'),i.includes("pic.twitter.com")||i.includes("pic.x.com")?(da("https://platform.twitter.com/widgets.js",function(){twttr.widgets.createTweet(u.media_id,u._el.content_item,{conversation:"none",linkColor:"#cc0000",theme:"light"})}),this.onLoaded()):(r+=i,r+="<div class='vcard'>",r+="<a href='"+o+"' class='twitter-date' rel='noopener' target='_blank'>"+l+"</a>",r+="<img src='' class='tl-media-item tl-media-image'></a>",r+="<div class='author'>",r+="<a class='screen-name url' href='"+e.author_url+"' rel='noopener' target='_blank'>",r+="<span class='avatar'></span>",r+="<span class='fn'>"+e.author_name+" <span class='tl-icon-twitter'></span></span>",r+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",r+="</a>",r+="</div>",r+="</div>",this._el.content_item.innerHTML=r,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class O5 extends ht{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text";var i=this.data.url.match(/(status|statuses)\/(\d+)/);if(i&&i.length>2)this.media_id=i[2];else{r.loadErrorDisplay(r._("twitterembed_invalidurl_err"));return}e="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",window.twttr=function(s,a,o){var l,u=s.getElementsByTagName(a)[0],c=window.twttr||{};return s.getElementById(o)||(l=s.createElement(a),l.id=o,l.src="https://platform.twitter.com/widgets.js",u.parentNode.insertBefore(l,u),c._e=[],c.ready=function(h){c._e.push(h)}),c}(document,"script","twitter-wjs"),Xo({type:"GET",url:e,dataType:"json",success(s){r.createMedia(s)},error:function(s,a){var o="";o+=r._("twitter_load_err")+"<br/>"+r.media_id+"<br/>"+a,r.loadErrorDisplay(o)}})}createMedia(e){var r="",i="",s="",a="",o="",l="";i=e.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=e.author_url.split("twitter.com/")[1],a=e.html.split("</p>&mdash;")[1].split('<a href="')[1],o=a.split('">')[0],l=a.split('">')[1].split("</a>")[0],i=i.replace(/<a href/ig,'<a target="_blank" rel="noopener" href');let u=this.media_id;i.includes("pic.twitter.com")?(twttr.ready(function(c){r=document.getElementsByClassName("tl-media-twitter")[0];var h=String(u);twttr.widgets.createTweet(h,r,{conversation:"none",linkColor:"#cc0000",theme:"light"}).then(function(f){this.onLoaded()})}),this._el.content_item.innerHTML=r,this.onLoaded()):(r+=i,r+="<div class='vcard'>",r+="<a href='"+o+"' class='twitter-date' rel='noopener' target='_blank'>"+l+"</a>",r+="<div class='author'>",r+="<a class='screen-name url' href='"+e.author_url+"' rel='noopener' target='_blank'>",r+="<span class='avatar'></span>",r+="<span class='fn'>"+e.author_name+" <span class='tl-icon-twitter'></span></span>",r+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",r+="</a>",r+="</div>",r+="</div>",this._el.content_item.innerHTML=r,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class _E extends ht{_loadMedia(){var e,r=this;try{this.establishMediaID(),e="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",Bh(e,function(i){i.stat=="ok"?(r.sizes=i.sizes.size,r.options.background||r.createMedia(),r.onLoaded()):r.loadErrorDisplay(r._("flickr_notfound_err"))})}catch(i){r.loadErrorDisplay(r._(i.message_key))}}establishMediaID(){if(this.data.url.match(/flic.kr\/.+/i)){var e=this.data.url.split("/").slice(-1)[0];this.media_id=A$.decode(e)}else{var r="flickr.com/photos/",i=this.data.url.indexOf(r);if(i==-1)throw new Ue("flickr_invalidurl_err");var s=i+r.length;this.media_id=this.data.url.substr(s).split("/")[1]}}createMedia(){var e=this;this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-flickr tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=No(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=No(this.data.caption)),this._el.content_item.addEventListener("load",function(r){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}getImageURL(e,r){for(var i=this.size_label(r),s=this.sizes[this.sizes.length-2].source,a=0;a<this.sizes.length;a++)this.sizes[a].label==i&&(s=this.sizes[a].source);return s}_getMeta(){var e=this,r;r="https://api.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",Bh(r,function(i){e.data.credit_alternate="<a href='"+e.data.url+"' target='_blank' rel='noopener'>"+i.photo.owner.realname+"</a>",e.data.caption_alternate=i.photo.title._content+" "+i.photo.description._content,e.updateMeta()})}size_label(e){var r="";return e<=75?e<=0?r="Large":r="Thumbnail":e<=180?r="Small":e<=240?r="Small 320":e<=375?r="Medium":e<=480?r="Medium 640":(e<=600,r="Large"),r}}class j5 extends ht{_loadMedia(){var e=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-documentcloud tl-media-shadow",this._el.content),this._el.content_item.id=ca(7),this.data.url.match(/\.html$/)?this.data.url=this._transformURL(this.data.url):this.data.url.match(/.(json|js)$/)||Be("DOCUMENT CLOUD IN URL BUT INVALID SUFFIX"),da(["https://assets.documentcloud.org/viewer/loader.js","https://assets.documentcloud.org/viewer/viewer.js"],function(){e.createMedia()})}_transformURL(e){return e.replace(/(.*)\.html$/,"$1.js")}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}createMedia(){DV.load(this.data.url,{container:"#"+this._el.content_item.id,showSidebar:!1}),this.onLoaded()}}const V5="830b21071290df4f81a35c56abbea096",F5="704270473831239",U5=`${F5}|${V5}`,wE=`https://graph.facebook.com/v8.0/instagram_oembed?access_token=${U5}&fields=html,thumbnail_url,author_name&url=`;function B5(t){this.oembed_response=t,this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-instagram tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=No(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=No(this.data.caption)),this._el.content_item.addEventListener("load",(function(e){this.onMediaLoaded()}).bind(this)),this._el.content_item.src=t.thumbnail_url,this.onLoaded()}function $5(t){let e=`${t.statusText} [${t.status}]`;t.status==400&&(e=this._("instagram_bad_request")),this.loadErrorDisplay(e)}class z5 extends ht{_loadMedia(){this.media_id=this.data.url.split("/p/")[1].split("/")[0],this.options.background||this.createMedia()}createMedia(){this.oembed_response=null;let e=`${wE}${this.data.url}`;try{Xo({url:e,dataType:"json",success:B5,error:$5,context:this})}catch(r){console.log(`Instagram: error fetching ${e}`),console.log(r);debugger}}getImageURL(){if(this.oembed_response&&this.oembed_response.thumbnail_url)return this.oembed_response.thumbnail_url;zf(`${wE}${this.data.url}`).then(e=>e.thumbnail_url).catch(e=>{Be(`Instagram getImageURL Error: ${e.status} ${e.statusText}`)})}_getMeta(){this.oembed_response&&this.oembed_response.author_name&&(this.data.credit_alternate=`Instagram: <a href="https://instagram.com/${this.oembed_response.author_name}" target="_blank">@${this.oembed_response.author_name}</a>`),this.updateMeta()}sizes(e){var r="";return e<=150?r="t":e<=306?r="m":r="l",r}}class H5 extends ht{_loadMedia(){this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-profile tl-media-shadow",this._el.content),this._el.content_item.src=this.data.url,this.onLoaded()}_updateMediaDisplay(e){Ro&&(this._el.content_item.style.maxWidth=this.options.width/2-40+"px")}}class W5 extends ht{_loadMedia(){var e;if(this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this.data.url.match(/open\?id=([^&]+)/)){var r=this.data.url.match(/open\?id=([^&]+)/)[1];e="https://drive.google.com/file/d/"+r+"/preview"}else if(this.data.url.match(/file\/d\/([^/]*)\/?/)){var r=this.data.url.match(/file\/d\/([^/]*)\/?/)[1];e="https://drive.google.com/file/d/"+r+"/preview"}else e=this.data.url;this._el.content_item.innerHTML="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}function q5(t){return t.match(/^spotify:/)?t:(t=new URL(t),`spotify${t.pathname.replace(/\/$/,"").replace(/\//g,":")}`)}class G5 extends ht{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-spotify",this._el.content),this.media_id=q5(this.data.url),this.media_id?(e="https://embed.spotify.com/?uri="+this.media_id+"&theme=white&view=coverart",this.player=this.domCreate("iframe","tl-media-shadow",this._el.content_item),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.onLoaded()):this.loadErrorDisplay(this._("spotify_invalid_url"))}_updateMediaDisplay(e){var r=this.options.height,i=0,s=0;wa?r=this.options.height/2:r=this.options.height-this.options.credit_height-this.options.caption_height-30,this._el.content_item.style.maxHeight="none",Be(r),Be(this.options.width),r>this.options.width?(Be("height is greater"),i=this.options.width+80+"px",s=this.options.width+"px"):(Be("width is greater"),Be(this.options.width),i=r+"px",s=r-80+"px"),this.player.style.width=s,this.player.style.height=i,this._el.credit&&(this._el.credit.style.width=s),this._el.caption&&(this._el.caption.style.width=s)}_stopMedia(){}}class K5 extends ht{constructor(e,r,i){super(e,r,i),this.iframe=Gf.sanitize(this.data.url,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder"]})}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this._el.content_item.innerHTML=this.iframe,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class Y5 extends ht{_loadMedia(){try{var e=this;if(this.data.url.match(`<blockquote class=['"]imgur-embed-pub['"]`)){var r=this.data.url.match(/(imgur\.com)\/(\w+)/);this.media_id=r[2],this.data.url="http://imgur.com/gallery/"+this.media_id}else this.data.url&&(this.media_id=this.data.url.split("/").slice(-1)[0]);da(["https://s.imgur.com/min/embed.js"],function(){e.createMedia()})}catch{this.loadErrorDisplay(this._("imgur_invalidurl_err"))}}createMedia(){var e=this,r="https://api.imgur.com/oembed.json?url="+this.data.url;this._el.content_item=this.domCreate("div","tl-media-item tl-media-image tl-media-imgur",this._el.content),Xo({type:"GET",url:r,dataType:"json",success:function(i){try{e._el.content_item.innerHTML=i.html,setInterval(function(){document.querySelector("blockquote.imgur-embed-pub")==null?clearInterval():(imgurEmbed.createIframe(),document.getElementById("imageElement").removeAttribute("style"),document.getElementById("image").removeAttribute("style"))},2e3)}catch{Be("Error processing imgur ajax response")}},error:function(i,s,a){s=="parsererror"?e.loadErrorDisplay(e._("imgur_invalidurl_err")):e.loadErrorDisplay(e._("unknown_read_err",s))}}),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.width=this.options.width+"px",this._el.content_item.style.height=ba.r16_9({w:this.options.width})+"px"}}class X5 extends ht{_loadMedia(){var e=Bf(this.data.url);this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content);var r="";uc||m$||e.match(/dl.dropboxusercontent.com/)?r="<iframe class='doc' frameborder='0' width='100%' height='100%' src='//docs.google.com/viewer?url="+e+"&amp;embedded=true'></iframe>":r="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this._el.content_item.innerHTML=r,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class Q5 extends ht{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=Bf(this.data.url),r=this,r=this,i="tl-media-item tl-media-audio tl-media-shadow";this._el.content_item=this.domCreate("audio",i,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){r.onMediaLoaded()}),this._el.source_item.src=e,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 audio with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(e){Ro&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(e,r){var i=e.match(r),s="audio/";switch(i[1]){case"mp3":s+="mpeg";break;case"wav":s+="wav";break;case"m4a":s+="mp4";break;default:s="audio";break}return s}}class J5 extends ht{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=Bf(this.data.url),r=this,r=this,i="tl-media-item tl-media-video tl-media-shadow";this._el.content_item=this.domCreate("video",i,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){r.onMediaLoaded()}),this._el.source_item.src=e,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 video with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(e){Ro&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(e,r){var i=e.match(r),s="video/";switch(i[1]){case"mp4":s+="mp4";break;case"webm":s+="webm";break;default:s="video";break}return s}}class Z5 extends ht{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-wistia tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/https?:\/\/(.+)?(wistia\.com|wi\.st)\/medias\/(.*)/)[3],Be(`Wistia: media_id: ${this.media_id}`),e="https://fast.wistia.com/embed/iframe/"+this.media_id+"?version=v1&controlsVisibleOnLoad=true&playerColor=aae3d8",this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(i){r.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=ba.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(e){Be(e)}}}function $h(t,e){var r={},i=[{type:"youtube",name:"YouTube",match_str:"^(https?:)?/*(www.|m.)?youtube|youtu.be",cls:S5},{type:"vimeo",name:"Vimeo",match_str:"^(https?:)?/*(player.)?vimeo.com",cls:N5},{type:"dailymotion",name:"DailyMotion",match_str:"^(https?:)?/*(www.)?(dailymotion.com|dai.ly)",cls:D5},{type:"vine",name:"Vine",match_str:"^(https?:)?/*(www.)?vine.co",cls:M5},{type:"soundcloud",name:"SoundCloud",match_str:"^(https?:)?/*(player.)?soundcloud.com",cls:R5},{type:"twitter",name:"Twitter",match_str:"^(https?:)?/*(www.)?(twitter|x).com",cls:L5},{type:"twitterembed",name:"TwitterEmbed",match_str:`<blockquote class=['"]twitter-tweet['"]`,cls:O5},{type:"googlemaps",name:"Google Map",match_str:/google.+?\/maps\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/search\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/place\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/dir\/([\w\W]+)\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)/,cls:I5},{type:"flickr",name:"Flickr",match_str:"^(https?:)?/*(www.)?flickr.com/photos",cls:_E},{type:"flickr",name:"Flickr",match_str:"^(https?://)?flic.kr/.*",cls:_E},{type:"instagram",name:"Instagram",match_str:/^(https?:)?\/*(www.)?(instagr.am|^(https?:)?\/*(www.)?instagram.com)\/p\//,cls:z5},{type:"profile",name:"Profile",match_str:/^(https?:)?\/*(www.)?instagr.am\/[a-zA-Z0-9]{2,}|^(https?:)?\/*(www.)?instagram.com\/[a-zA-Z0-9]{2,}/,cls:H5},{type:"documentcloud",name:"Document Cloud",match_str:/documentcloud.org\//,cls:j5},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://.+.wiki[mp]edia.org.+#/media/.+.(jpg|jpeg|png|gif|svg|webp)",cls:yE},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://commons.wikimedia.org/wiki/File:.+.(jpg|jpeg|png|gif|svg|webp)",cls:yE},{type:"wikipedia",name:"Wikipedia",match_str:"^(https?:)?/.+.wikipedia.org",cls:C5},{type:"image",name:"Image",match_str:/(jpg|jpeg|png|gif|svg|webp)(\?.*)?$/i,cls:vE},{type:"imgur",name:"Imgur",match_str:/^.*imgur.com\/.+$|<blockquote class=['\"]imgur-embed-pub['\"]/i,cls:Y5},{type:"googledocs",name:"Google Doc",match_str:"^(https?:)?/*[^.]*.google.com/[^/]*/d/[^/]*/[^/]*?usp=shar.*|^(https?:)?/*drive.google.com/open?id=[^&]*&authuser=0|^(https?:)?//*drive.google.com/open\\?id=[^&]*|^(https?:)?/*[^.]*.googledrive.com/host/[^/]*/",cls:W5},{type:"pdf",name:"PDF",match_str:/^.*\.pdf(\?.*)?(\#.*)?/,cls:X5},{type:"spotify",name:"spotify",match_str:"spotify",cls:G5},{type:"iframe",name:"iFrame",match_str:"iframe",cls:K5},{type:"blockquote",name:"Quote",match_str:"blockquote",cls:k5},{type:"video",name:"Video",match_str:/(mp4|webm)(\?.*)?$/i,cls:J5},{type:"wistia",name:"Wistia",match_str:/https?:\/\/(.+)?(wistia\.com|wi\.st)\/.*/i,cls:Z5},{type:"audio",name:"Audio",match_str:/(mp3|wav|m4a)(\?.*)?$/i,cls:Q5},{type:"imageblank",name:"Imageblank",match_str:"",cls:vE}];if(e){if(t instanceof Array)return!1;for(var s=0;s<i.length;s++)switch(i[s].type){case"flickr":case"image":case"instagram":if(t.url.match(i[s].match_str))return r=i[s],r;break}}else for(var s=0;s<i.length;s++)if(t.url.match(i[s].match_str))return i[s];return!1}class oA{constructor(e,r){this._el={container:{},content_container:{},media_container:{},timespan:{},line_left:{},line_right:{},content:{},text:{},media:{}},this._text={},this._state={loaded:!1},this.data={unique_id:"",background:null,date:{year:0,month:0,day:0,hour:0,minute:0,second:0,millisecond:0,thumbnail:"",format:""},text:{headline:"",text:""},media:null},this.options={duration:1e3,ease:$f,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,this.ariaLabel="",et(this.options,r),et(this.data,e),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(e){this.active=e,this.active&&this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end tl-timemarker-active":this.active?this._el.container.className="tl-timemarker tl-timemarker-active":this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end":this._el.container.className="tl-timemarker",this._el.container.ariaLabel=this.ariaLabel,this.active?this._el.container.ariaLabel+=", shown":this._el.container.ariaLabel+=", press space to show"}setFocus(e={preventScroll:!0}){this._el.container.focus(e)}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}loadMedia(){this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0)}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.data.start_date.getTime()}getEndTime(){return this.data.end_date?this.data.end_date.getTime():!1}setHeight(e){var r=12,i=1;this._el.content_container.style.height=e+"px",this._el.timespan_content.style.height=e+"px",e<=30?this._el.content.className="tl-timemarker-content tl-timemarker-content-small":this._el.content.className="tl-timemarker-content",e<=56?this._el.content_container.classList.add("tl-timemarker-content-container-small"):this._el.content_container.classList.remove("tl-timemarker-content-container-small"),Uf?(i=Math.floor(e/(r+2)),i<1&&(i=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=i):(i=e/r,i>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=i*r+"px")}setWidth(e){this.data.end_date&&(this._el.container.style.width=e+"px",e>this.options.marker_width_min?(this._el.content_container.style.width=e+"px",this._el.content_container.className="tl-timemarker-content-container tl-timemarker-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timemarker-content-container"))}setClass(e){this._el.container.className=e}setRowPosition(e,r){this.setPosition({top:e}),this._el.timespan.style.height=r+"px"}getFormattedDate(){if(Kn(this.data.display_date).length>0)return this.data.display_date;let e="";return this.data.end_date&&(e=" to "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(e=(e?"from ":"")+this.data.start_date.getDisplayDate(this.getLanguage())+e),e}_onMarkerClick(e){this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerKeydown(e){/Space|Enter/.test(e.code)&&this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerBlur(e){this.fire("markerblur",{unique_id:this.data.unique_id})}_initLayout(){if(this._el.container=fe("div","tl-timemarker"),this._el.container.setAttribute("tabindex","-1"),this.data.unique_id&&(this._el.container.id=this.data.unique_id+"-marker"),this.data.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timemarker tl-timemarker-with-end"),this._el.timespan=fe("div","tl-timemarker-timespan",this._el.container),this._el.timespan_content=fe("div","tl-timemarker-timespan-content",this._el.timespan),this._el.content_container=fe("div","tl-timemarker-content-container",this._el.container),this._el.content=fe("div","tl-timemarker-content",this._el.content_container),this._el.line_left=fe("div","tl-timemarker-line-left",this._el.timespan),this._el.line_right=fe("div","tl-timemarker-line-right",this._el.timespan),this.data.media){this._el.media_container=fe("div","tl-timemarker-media-container",this._el.content);var e={url:this.data.media.thumbnail},r=this.data.media.thumbnail?$h(e,!0):null;if(r){var i=new r.cls(e);i.on("loaded",(function(){this._el.media=fe("img","tl-timemarker-media",this._el.media_container),this._el.media.src=i.getImageURL()}).bind(this)),i.loadMedia()}else{var s=$h(this.data.media).type;this._el.media=fe("span","tl-icon-"+s,this._el.media_container)}}this._el.text=fe("div","tl-timemarker-text",this._el.content),this._text=fe("h2","tl-headline",this._el.text),this.data.text.headline&&this.data.text.headline!=""?this._text.innerHTML=uo(this.data.text.headline):this.data.text.text&&this.data.text.text!=""?this._text.innerHTML=uo(this.data.text.text):this.data.media&&this.data.media.caption&&this.data.media.caption!=""&&(this._text.innerHTML=uo(this.data.media.caption));const a=this.getFormattedDate();this.ariaLabel=`${this._text.innerHTML}, ${a}`,this.onLoaded()}_initEvents(){Re.addListener(this._el.container,"click",this._onMarkerClick,this),Re.addListener(this._el.container,"keydown",this._onMarkerKeydown,this),Re.addListener(this._el.container,"blur",this._onMarkerBlur,this)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}Tn(oA,Pi,Sn,Ci);class x_{constructor(e,r,i){this._el={drag:e,move:e},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},r&&(this._el.move=r),this.options={snap:!1,enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:0,right:!1},momentum_multiplier:2e3,duration:1e3,ease:Yo},this.animator=null,this.dragevent=this.mousedrag,Gr&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},et(this.options,i)}enable(e){Re.addListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Re.addListener(this._el.drag,this.dragevent.up,this._onDragEnd,this),this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){Re.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Re.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(e){this.options.constraint=e}_onDragStart(e){this.animator&&this.animator.stop(),Gr?e.originalEvent?(this.data.pagex.start=e.originalEvent.touches[0].screenX,this.data.pagey.start=e.originalEvent.touches[0].screenY):(this.data.pagex.start=e.targetTouches[0].screenX,this.data.pagey.start=e.targetTouches[0].screenY):(this.data.pagex.start=e.pageX,this.data.pagey.start=e.pageY),this.options.enable.x,this.options.enable.y,this.data.pos.start={x:this._el.move.offsetLeft,y:this._el.move.offsetTop},this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),Re.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Re.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(e){this.data.sliding=!1,Re.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Re.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(e){var r={x:0,y:0};this.data.sliding=!0,Gr?e.originalEvent?(this.data.pagex.end=e.originalEvent.touches[0].screenX,this.data.pagey.end=e.originalEvent.touches[0].screenY):(this.data.pagex.end=e.targetTouches[0].screenX,this.data.pagey.end=e.targetTouches[0].screenY):(this.data.pagex.end=e.pageX,this.data.pagey.end=e.pageY),r.x=this.data.pagex.start-this.data.pagex.end,r.y=this.data.pagey.start-this.data.pagey.end,this.data.pos.end={x:this._el.drag.offsetLeft,y:this._el.drag.offsetTop},this.data.new_pos.x=-(r.x-this.data.pos.start.x),this.data.new_pos.y=-(r.y-this.data.pos.start.y),this.options.enable.x&&Math.abs(r.x)>Math.abs(r.y)&&(e.preventDefault(),this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&Math.abs(r.y)>Math.abs(r.y)&&(e.preventDefault(),this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var e={x:0,y:0,time:0},r={x:0,y:0,time:0},i={x:!1,y:!1},s=!1;this.data.direction=null,e.time=(new Date().getTime()-this.data.time.start)*10,r.time=(new Date().getTime()-this.data.time.start)*10,r.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),r.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),e.x=Math.round(r.x/r.time),e.y=Math.round(r.y/r.time),this.data.new_pos.x=Math.min(this.data.new_pos.x+e.x),this.data.new_pos.y=Math.min(this.data.new_pos.y+e.y),this.options.enable.x?this.options.constraint.left&&this.data.new_pos.x>this.options.constraint.left&&(this.data.new_pos.x=this.options.constraint.left):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,r.time<2e3&&(s=!0),this.options.enable.x&&this.options.enable.y?Math.abs(r.x)>Math.abs(r.y)?i.x=!0:i.y=!0:this.options.enable.x?Math.abs(r.x)>Math.abs(r.y)&&(i.x=!0):Math.abs(r.y)>Math.abs(r.x)&&(i.y=!0),i.x&&(Math.abs(r.x)>this._el.drag.offsetWidth/2&&(s=!0),Math.abs(r.x)>1e4&&(this.data.direction="left",r.x>0&&(this.data.direction="right"))),i.y&&(Math.abs(r.y)>this._el.drag.offsetHeight/2&&(s=!0),Math.abs(r.y)>1e4&&(this.data.direction="up",r.y>0&&(this.data.direction="down"))),r.time<1e3||this._animateMomentum(),s&&this.data.direction?this.fire("swipe_"+this.data.direction,this.data):this.data.direction?this.fire("swipe_nodirection",this.data):this.options.snap&&(this.animator.stop(),this.animator=Si(this._el.move,{top:this.data.pos.start.y,left:this.data.pos.start.x,duration:this.options.duration,easing:Lu}))}_animateMomentum(){var e={x:this.data.new_pos.x,y:this.data.new_pos.y},r={duration:this.options.duration,easing:Lu};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(e.y>this.options.constraint.bottom?e.y=this.options.constraint.bottom:e.y<this.options.constraint.top&&(e.y=this.options.constraint.top)),r.top=Math.floor(e.y)+"px"),this.options.enable.x&&(this.options.constraint.left&&e.x>=this.options.constraint.left&&(e.x=this.options.constraint.left),this.options.constraint.right&&e.x<this.options.constraint.right&&(e.x=this.options.constraint.right),r.left=Math.floor(e.x)+"px"),this.animator=Si(this._el.move,r),this.fire("momentum",this.data)}}Tn(x_,Sn);class lA{constructor(e,r,i,s){this.language=s,this._el={parent:{},container:{},slider:{},slider_background:{},line:{},marker_container_mask:{},marker_container:{},marker_item_container:{},timeaxis:{},timeaxis_background:{}},this.collapsed=!1,typeof e=="object"?this._el.container=e:this._el.container=cc(e),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","application"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline_navigation")),this._el.container.setAttribute("aria-description",'Navigate between markers with arrow keys. Press "Home" for the first and "End" for the last markers'),this.config=r,this.options={width:600,height:600,duration:1e3,ease:Yo,has_groups:!1,optimal_tick_width:50,scale_factor:2,marker_padding:5,timenav_height_min:150,marker_height_min:30,marker_width_min:100,zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89]},this.animator=null,this.ready=!1,this._markers=[],this._eras=[],this.has_eras=!1,this._groups=[],this._calculated_row_height=100,this.current_id="",this.current_focused_id="",this.timescale={},this.timeaxis={},this.max_rows=6,this.animate_css=!1,this._swipable,et(this.options,i)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this._onLoaded()}positionMarkers(e){for(var r=0;r<this._markers.length;r++){var i=this.timescale.getPositionInfo(r);e?this._markers[r].setClass("tl-timemarker tl-timemarker-fast"):this._markers[r].setClass("tl-timemarker"),this._markers[r].setPosition({left:i.start}),this._markers[r].setWidth(i.width)}}updateDisplay(e,r,i){let s=!1;e&&(this.options.width==0&&e>0&&(s=!0),this.options.width=e),r&&r!=this.options.height&&(this.options.height=r,this.timescale=this._getTimeScale()),this._assignRowsToMarkers(),this._el.slider_background.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._el.slider_background.style.left=-(this.options.width/2)+"px",this._el.slider.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._swipable.updateConstraint({top:!1,bottom:!1,left:this.options.width/2,right:-(this.timescale.getPixelWidth()-this.options.width/2)}),s&&this._drawTimeline(),this.goToId(this.current_id,!0)}_getTimeScale(){var e=0;try{e=parseInt(this.options.marker_height_min)}catch{Be("Invalid value for marker_height_min option."),e=30}return e==0&&(Be("marker_height_min option must not be zero."),e=30),this.max_rows=Math.round((this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding)/e),this.max_rows<1&&(this.max_rows=1),new gE(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows})}_updateTimeScale(e){this.options.scale_factor=e,this._updateDrawTimeline()}zoomIn(){var e=b$(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(e)}zoomOut(){var e=x$(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(e)}setZoom(e){var r=this.options.zoom_sequence[e];typeof r=="number"?this.setZoomFactor(r):console.warn("Invalid zoom level. Please use an index number between 0 and "+(this.options.zoom_sequence.length-1))}setZoomFactor(e){e<=this.options.zoom_sequence[0]?this.fire("zoomtoggle",{zoom:"out",show:!1}):this.fire("zoomtoggle",{zoom:"out",show:!0}),e>=this.options.zoom_sequence[this.options.zoom_sequence.length-1]?this.fire("zoomtoggle",{zoom:"in",show:!1}):this.fire("zoomtoggle",{zoom:"in",show:!0}),e==0&&(console.warn("Zoom factor must be greater than zero. Using 0.1"),e=.1),this.options.scale_factor=e,this.goToId(this.current_id,!this._updateDrawTimeline(!0),!0)}_createGroups(){this._groups=[];var e=this.timescale.getGroupLabels();if(e){this.options.has_groups=!0;for(var r=0;r<e.length;r++)this._createGroup(e[r])}}_createGroup(e){var r=new nA(e);this._addGroup(r),this._groups.push(r)}_addGroup(e){e.addTo(this._el.container)}_positionGroups(){if(this.options.has_groups){var e=this.options.height-this._el.timeaxis_background.offsetHeight,r=Math.floor(e/this.timescale.getNumberOfRows()-this.options.marker_padding);this.timescale.getGroupLabels();for(var i=0,s=0;i<this._groups.length;i++){var a=Math.floor(s*(r+this.options.marker_padding)),o=!1;a>e-this.options.marker_padding&&(o=!0),this._groups[i].setRowPosition(a,this._calculated_row_height+this.options.marker_padding/2),this._groups[i].setAlternateRowColor(E$(i),o),s+=this._groups[i].data.rows}}}_addMarker(e){e.addTo(this._el.marker_item_container),e.on("markerclick",this._onMarkerClick,this),e.on("added",this._onMarkerAdded,this)}_createMarker(e,r){var i=new oA(e,this.options);this._addMarker(i),r<0?this._markers.push(i):this._markers.splice(r,0,i)}_createMarkers(e){for(var r=0;r<e.length;r++)this._createMarker(e[r],-1)}_removeMarker(e){e.removeFrom(this._el.marker_item_container)}_destroyMarker(e){this._removeMarker(this._markers[e]),this._markers.splice(e,1)}_calculateMarkerHeight(e){return e/this.timescale.getNumberOfRows()-this.options.marker_padding}_calculateRowHeight(e){return e/this.timescale.getNumberOfRows()}_calculateAvailableHeight(){return this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding}_calculateMinimumTimeNavHeight(){return this.timescale.getNumberOfRows()*this.options.marker_height_min+this._el.timeaxis_background.offsetHeight+this.options.marker_padding}getMinimumHeight(){return this._calculateMinimumTimeNavHeight()}_assignRowsToMarkers(){var e=this._calculateAvailableHeight(),r=this._calculateMarkerHeight(e);this._positionGroups(),this._calculated_row_height=this._calculateRowHeight(e);for(var i=0;i<this._markers.length;i++){this._markers[i].setHeight(r);var s=this.timescale.getPositionInfo(i).row,a=Math.floor(s*(r+this.options.marker_padding))+this.options.marker_padding,o=e-a+this.options.marker_padding;this._markers[i].setRowPosition(a,o)}}_resetMarkersActive(){for(var e=0;e<this._markers.length;e++)this._markers[e].setActive(!1)}_resetMarkersBlurListeners(){for(var e=0;e<this._markers.length;e++)this._markers[e].off("markerblur",this._onMarkerBlur,this)}_findMarkerIndex(e){var r=-1;return(typeof e=="string"||e instanceof String)&&(r=qC(e,this._markers,"unique_id",r)),r}_createEras(e){for(var r=0;r<e.length;r++){var i=e[r],s=new rA(i.start_date,i.end_date,i.headline,this.options);this._eras.push(s),s.addTo(this._el.marker_item_container),s.on("added",this._onEraAdded,this)}}_positionEras(e){for(var r=0,i=0;i<this._eras.length;i++){var s={start:0,end:0,width:0};s.start=this.timescale.getPosition(this._eras[i].start_date.getTime()),s.end=this.timescale.getPosition(this._eras[i].end_date.getTime()),s.width=s.end-s.start,e?this._eras[i].setClass("tl-timeera tl-timeera-fast"):this._eras[i].setClass("tl-timeera"),this._eras[i].setPosition({left:s.start}),this._eras[i].setWidth(s.width),r++,r>5&&(r=0),this._eras[i].setColor(r)}}createMarker(e,r){this._createMarker(e,r)}createMarkers(e){this._createMarkers(e)}destroyMarker(e){this._destroyMarker(e)}destroyMarkerId(e){this.destroyMarker(this._findMarkerIndex(e))}goTo(e,r,i){var s=this.options.ease,a=this.options.duration,o=e<0?0:e;this._resetMarkersActive(),e>=0&&e<this._markers.length&&this._markers[e].setActive(!0),this.animateMovement(o,r,i,a,s),e>=0&&e<this._markers.length?this.current_id=this.current_focused_id=this._markers[e].data.unique_id:this.current_id=this.current_focused_id="",this._setLabelWithCurrentMarker()}goToId(e,r,i){this.goTo(this._findMarkerIndex(e),r,i)}focusOn(e,r,i){const s=this.options.ease,a=this.options.duration,o=e<0?0:e;this.animateMovement(o,r,i,a,s),this._resetMarkersBlurListeners(),e>=0&&e<this._markers.length&&(this._markers[e].setFocus(),this.current_focused_id=this._markers[e].data.unique_id,this._markers[e].on("markerblur",this._onMarkerBlur,this))}focusNext(){const e=this._findMarkerIndex(this.current_focused_id);e+1<this._markers.length?this.focusOn(e+1):this.focusOn(e)}focusPrevious(){const e=this._findMarkerIndex(this.current_focused_id);e-1>=0?this.focusOn(e-1):this.focusOn(e)}animateMovement(e,r,i,s,a){this.animator&&this.animator.stop(),r?(this._el.slider.className="tl-timenav-slider",this._el.slider.style.left=-this._markers[e].getLeft()+this.options.width/2+"px"):i?(this._el.slider.className="tl-timenav-slider tl-timenav-slider-animate",this.animate_css=!0,this._el.slider.style.left=-this._markers[e].getLeft()+this.options.width/2+"px"):(this._el.slider.className="tl-timenav-slider",this.animator=Si(this._el.slider,{left:-this._markers[e].getLeft()+this.options.width/2+"px",duration:s,easing:a})),e>=0&&e<this._markers.length?this.current_id=this._markers[e].data.unique_id:this.current_id="",this._dispatchVisibleTicksChange()}goToId(e,r,i){this.goTo(this._findMarkerIndex(e),r,i)}_dispatchVisibleTicksChange(){this.ticks_change_timeout&&(clearTimeout(this.ticks_change_timeout),this.ticks_change_timeout=null),this.ticks_change_timeout=setTimeout(()=>{const e=this.timeaxis.getVisibleTicks();this.fire("visible_ticks_change",{visible_ticks:e})},this.options.duration)}_onLoaded(){this.ready=!0,this.fire("loaded",this.config)}_onMarkerAdded(e){this.fire("dateAdded",this.config)}_onEraAdded(e){this.fire("eraAdded",this.config)}_onMarkerRemoved(e){this.fire("dateRemoved",this.config)}_onMarkerClick(e){this.goToId(e.unique_id),this.fire("change",{unique_id:e.unique_id})}_onMarkerBlur(e){this.current_focused_id!==this.current_id&&this.focusOn(this._findMarkerIndex(this.current_id))}_onMouseScroll(e){var r=0,i=0,s={right:-(this.timescale.getPixelWidth()-this.options.width/2),left:this.options.width/2};e||(e=window.event),e.originalEvent&&(e=e.originalEvent),typeof e.wheelDeltaX<"u"&&(r=e.wheelDeltaY/6,Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)?r=e.wheelDeltaX/6:r=0),r&&(e.preventDefault&&e.preventDefault(),e.returnValue=!1),i=parseInt(this._el.slider.style.left.replace("px",""))+r,i>s.left?i=s.left:i<s.right&&(i=s.right),this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1),this._el.slider.style.left=i+"px"}_onDragMove(e){this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1)}_onKeydown(e){switch(Re.stopPropagation(e),e.key){case"ArrowUp":case"ArrowRight":{this.focusNext();break}case"ArrowDown":case"ArrowLeft":{this.focusPrevious();break}case"Home":{this.focusOn(0);break}case"End":{this.focusOn(this._markers.length-1);break}}}_drawTimeline(e){this.timescale=this._getTimeScale(),this.timeaxis.drawTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(e),this._assignRowsToMarkers(),this._createGroups(),this._positionGroups(),this.has_eras&&this._positionEras(e)}_updateDrawTimeline(e){var r=!1;if(e){var i=new gE(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows});this.timescale.getMajorScale()==i.getMajorScale()&&this.timescale.getMinorScale()==i.getMinorScale()&&(r=!0)}else r=!0;return r?(this.timescale=this._getTimeScale(),this.timeaxis.positionTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(),this._assignRowsToMarkers(),this._positionGroups(),this.has_eras&&this._positionEras(),this.updateDisplay()):this._drawTimeline(!0),r}_setLabelWithCurrentMarker(){const e=this._markers[this._findMarkerIndex(this.current_focused_id)],r=e&&e.ariaLabel?`, ${e.ariaLabel}, shown`:"";this._el.container.setAttribute("aria-label",`Timeline navigation ${r}`)}_initLayout(){this._el.line=fe("div","tl-timenav-line",this._el.container),this._el.slider=fe("div","tl-timenav-slider",this._el.container),this._el.slider_background=fe("div","tl-timenav-slider-background",this._el.slider),this._el.marker_container_mask=fe("div","tl-timenav-container-mask",this._el.slider),this._el.marker_container=fe("div","tl-timenav-container",this._el.marker_container_mask),this._el.marker_item_container=fe("div","tl-timenav-item-container",this._el.marker_container),this._el.timeaxis=fe("div","tl-timeaxis",this._el.slider),this._el.timeaxis_background=fe("div","tl-timeaxis-background",this._el.container),this.timeaxis=new iA(this._el.timeaxis,this.options,this.language),this._swipable=new x_(this._el.slider_background,this._el.slider,{enable:{x:!0,y:!1},constraint:{top:!1,bottom:!1,left:this.options.width/2,right:!1},snap:!1}),this._swipable.enable()}_initEvents(){this._swipable.on("dragmove",this._onDragMove,this),Re.addListener(this._el.container,"mousewheel",this._onMouseScroll,this),Re.addListener(this._el.container,"DOMMouseScroll",this._onMouseScroll,this),Re.addListener(this._el.container,"keydown",this._onKeydown,this)}_initData(){this._createMarkers(this.config.events),this.config.eras&&this.config.eras.length>0&&(this.has_eras=!0,this._createEras(this.config.eras)),this._drawTimeline()}}Tn(lA,Sn,Ci,Pi);var xm=function(){function t(e,r){for(var i=0;i<r.length;i++){var s=r[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();function Em(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(function(){if(typeof window>"u"||typeof Element>"u")return;var t=Array.prototype.slice,e=Element.prototype.matches||Element.prototype.msMatchesSelector,r=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","details","summary","iframe","object","embed","video","[contenteditable]"].join(","),i=function(){function c(h,f){Em(this,c),this._inertManager=f,this._rootElement=h,this._managedNodes=new Set,this._rootElement.hasAttribute("aria-hidden")?this._savedAriaHidden=this._rootElement.getAttribute("aria-hidden"):this._savedAriaHidden=null,this._rootElement.setAttribute("aria-hidden","true"),this._makeSubtreeUnfocusable(this._rootElement),this._observer=new MutationObserver(this._onMutation.bind(this)),this._observer.observe(this._rootElement,{attributes:!0,childList:!0,subtree:!0})}return xm(c,[{key:"destructor",value:function(){this._observer.disconnect(),this._rootElement&&(this._savedAriaHidden!==null?this._rootElement.setAttribute("aria-hidden",this._savedAriaHidden):this._rootElement.removeAttribute("aria-hidden")),this._managedNodes.forEach(function(f){this._unmanageNode(f.node)},this),this._observer=null,this._rootElement=null,this._managedNodes=null,this._inertManager=null}},{key:"_makeSubtreeUnfocusable",value:function(f){var p=this;o(f,function(A){return p._visitNode(A)});var g=document.activeElement;if(!document.body.contains(f)){for(var T=f,N=void 0;T;){if(T.nodeType===Node.DOCUMENT_FRAGMENT_NODE){N=T;break}T=T.parentNode}N&&(g=N.activeElement)}f.contains(g)&&(g.blur(),g===document.activeElement&&document.body.focus())}},{key:"_visitNode",value:function(f){if(f.nodeType===Node.ELEMENT_NODE){var p=f;p!==this._rootElement&&p.hasAttribute("inert")&&this._adoptInertRoot(p),(e.call(p,r)||p.hasAttribute("tabindex"))&&this._manageNode(p)}}},{key:"_manageNode",value:function(f){var p=this._inertManager.register(f,this);this._managedNodes.add(p)}},{key:"_unmanageNode",value:function(f){var p=this._inertManager.deregister(f,this);p&&this._managedNodes.delete(p)}},{key:"_unmanageSubtree",value:function(f){var p=this;o(f,function(g){return p._unmanageNode(g)})}},{key:"_adoptInertRoot",value:function(f){var p=this._inertManager.getInertRoot(f);p||(this._inertManager.setInert(f,!0),p=this._inertManager.getInertRoot(f)),p.managedNodes.forEach(function(g){this._manageNode(g.node)},this)}},{key:"_onMutation",value:function(f,p){f.forEach(function(g){var T=g.target;if(g.type==="childList")t.call(g.addedNodes).forEach(function(A){this._makeSubtreeUnfocusable(A)},this),t.call(g.removedNodes).forEach(function(A){this._unmanageSubtree(A)},this);else if(g.type==="attributes"){if(g.attributeName==="tabindex")this._manageNode(T);else if(T!==this._rootElement&&g.attributeName==="inert"&&T.hasAttribute("inert")){this._adoptInertRoot(T);var N=this._inertManager.getInertRoot(T);this._managedNodes.forEach(function(A){T.contains(A.node)&&N._manageNode(A.node)})}}},this)}},{key:"managedNodes",get:function(){return new Set(this._managedNodes)}},{key:"hasSavedAriaHidden",get:function(){return this._savedAriaHidden!==null}},{key:"savedAriaHidden",set:function(f){this._savedAriaHidden=f},get:function(){return this._savedAriaHidden}}]),c}(),s=function(){function c(h,f){Em(this,c),this._node=h,this._overrodeFocusMethod=!1,this._inertRoots=new Set([f]),this._savedTabIndex=null,this._destroyed=!1,this.ensureUntabbable()}return xm(c,[{key:"destructor",value:function(){if(this._throwIfDestroyed(),this._node&&this._node.nodeType===Node.ELEMENT_NODE){var f=this._node;this._savedTabIndex!==null?f.setAttribute("tabindex",this._savedTabIndex):f.removeAttribute("tabindex"),this._overrodeFocusMethod&&delete f.focus}this._node=null,this._inertRoots=null,this._destroyed=!0}},{key:"_throwIfDestroyed",value:function(){if(this.destroyed)throw new Error("Trying to access destroyed InertNode")}},{key:"ensureUntabbable",value:function(){if(this.node.nodeType===Node.ELEMENT_NODE){var f=this.node;if(e.call(f,r)){if(f.tabIndex===-1&&this.hasSavedTabIndex)return;f.hasAttribute("tabindex")&&(this._savedTabIndex=f.tabIndex),f.setAttribute("tabindex","-1"),f.nodeType===Node.ELEMENT_NODE&&(f.focus=function(){},this._overrodeFocusMethod=!0)}else f.hasAttribute("tabindex")&&(this._savedTabIndex=f.tabIndex,f.removeAttribute("tabindex"))}}},{key:"addInertRoot",value:function(f){this._throwIfDestroyed(),this._inertRoots.add(f)}},{key:"removeInertRoot",value:function(f){this._throwIfDestroyed(),this._inertRoots.delete(f),this._inertRoots.size===0&&this.destructor()}},{key:"destroyed",get:function(){return this._destroyed}},{key:"hasSavedTabIndex",get:function(){return this._savedTabIndex!==null}},{key:"node",get:function(){return this._throwIfDestroyed(),this._node}},{key:"savedTabIndex",set:function(f){this._throwIfDestroyed(),this._savedTabIndex=f},get:function(){return this._throwIfDestroyed(),this._savedTabIndex}}]),c}(),a=function(){function c(h){if(Em(this,c),!h)throw new Error("Missing required argument; InertManager needs to wrap a document.");this._document=h,this._managedNodes=new Map,this._inertRoots=new Map,this._observer=new MutationObserver(this._watchForInert.bind(this)),l(h.head||h.body||h.documentElement),h.readyState==="loading"?h.addEventListener("DOMContentLoaded",this._onDocumentLoaded.bind(this)):this._onDocumentLoaded()}return xm(c,[{key:"setInert",value:function(f,p){if(p){if(this._inertRoots.has(f))return;var g=new i(f,this);if(f.setAttribute("inert",""),this._inertRoots.set(f,g),!this._document.body.contains(f))for(var T=f.parentNode;T;)T.nodeType===11&&l(T),T=T.parentNode}else{if(!this._inertRoots.has(f))return;var N=this._inertRoots.get(f);N.destructor(),this._inertRoots.delete(f),f.removeAttribute("inert")}}},{key:"getInertRoot",value:function(f){return this._inertRoots.get(f)}},{key:"register",value:function(f,p){var g=this._managedNodes.get(f);return g!==void 0?g.addInertRoot(p):g=new s(f,p),this._managedNodes.set(f,g),g}},{key:"deregister",value:function(f,p){var g=this._managedNodes.get(f);return g?(g.removeInertRoot(p),g.destroyed&&this._managedNodes.delete(f),g):null}},{key:"_onDocumentLoaded",value:function(){var f=t.call(this._document.querySelectorAll("[inert]"));f.forEach(function(p){this.setInert(p,!0)},this),this._observer.observe(this._document.body||this._document.documentElement,{attributes:!0,subtree:!0,childList:!0})}},{key:"_watchForInert",value:function(f,p){var g=this;f.forEach(function(T){switch(T.type){case"childList":t.call(T.addedNodes).forEach(function(b){if(b.nodeType===Node.ELEMENT_NODE){var x=t.call(b.querySelectorAll("[inert]"));e.call(b,"[inert]")&&x.unshift(b),x.forEach(function(w){this.setInert(w,!0)},g)}},g);break;case"attributes":if(T.attributeName!=="inert")return;var N=T.target,A=N.hasAttribute("inert");g.setInert(N,A);break}},this)}}]),c}();function o(c,h,f){if(c.nodeType==Node.ELEMENT_NODE){var p=c;h&&h(p);var g=p.shadowRoot;if(g){o(g,h);return}if(p.localName=="content"){for(var T=p,N=T.getDistributedNodes?T.getDistributedNodes():[],A=0;A<N.length;A++)o(N[A],h);return}if(p.localName=="slot"){for(var b=p,x=b.assignedNodes?b.assignedNodes({flatten:!0}):[],w=0;w<x.length;w++)o(x[w],h);return}}for(var R=c.firstChild;R!=null;)o(R,h),R=R.nextSibling}function l(c){if(!c.querySelector("style#inert-style, link#inert-style")){var h=document.createElement("style");h.setAttribute("id","inert-style"),h.textContent=`
[inert] {
  pointer-events: none;
  cursor: default;
}

[inert], [inert] * {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
`,c.appendChild(h)}}if(!HTMLElement.prototype.hasOwnProperty("inert")){var u=new a(document);Object.defineProperty(HTMLElement.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(h){u.setInert(this,h)}})}})();class uA{constructor(e,r,i,s){s&&this.setLanguage(s),this._el={container:{},scroll_container:{},background:{},content_container:{},content:{}},this._media=null,this._mediaclass={},this._text={},this._background_media=null,this._state={loaded:!1},this.has={headline:!1,text:!1,media:!1,title:!1,background:{image:!1,color:!1,color_value:""}},this.has.title=i,this.data={unique_id:null,background:null,start_date:null,end_date:null,location:null,text:null,media:null,autolink:!0},this.options={duration:1e3,slide_padding_lr:40,ease:$f,width:600,height:600,skinny_size:650,media_name:""},this.active=!1,this.animator={},et(this.options,r),et(this.data,e),this._initLayout(),this._initEvents()}show(){this.animator=Si(this._el.slider_container,{left:-(this._el.container.offsetWidth*n)+"px",duration:this.options.duration,easing:this.options.ease})}hide(){}setActive(e){this.active=e,this.active?(this.data.background&&this.fire("background_change",this.has.background),this._setInteractive(!0),this.loadMedia()):(this.stopMedia(),this._setInteractive(!1))}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r,i){var s,a=this.options.slide_padding_lr,o=this.options.slide_padding_lr;e?this.options.width=e:this.options.width=this._el.container.offsetWidth,s=this.options.width-this.options.slide_padding_lr*2,wa&&this.options.width<=this.options.skinny_size?(a=0,o=0,s=this.options.width):i=="landscape"||this.options.width<=this.options.skinny_size&&(a=50,o=50,s=this.options.width-a-o),this._el.content.style.paddingLeft=a+"px",this._el.content.style.paddingRight=o+"px",this._el.content.style.width=s+"px",r?this.options.height=r:this.options.height=this._el.container.offsetHeight,this._media&&(!this.has.text&&this.has.headline?this._media.updateDisplay(s,this.options.height-this._text.headlineHeight(),i):!this.has.text&&!this.has.headline?this._media.updateDisplay(s,this.options.height,i):this.options.width<=this.options.skinny_size?this._media.updateDisplay(s,this.options.height,i):this._media.updateDisplay(s/2,this.options.height,i)),this._updateBackgroundDisplay()}loadMedia(){var e=this;this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0),this._background_media&&!this._background_media._state.loaded&&(this._background_media.on("loaded",function(){e._updateBackgroundDisplay()}),this._background_media.loadMedia())}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getBackground(){return this.has.background}scrollToTop(){this._el.container.scrollTop=0}getFormattedDate(){if(Kn(this.data.display_date).length>0)return this.data.display_date;var e="";return this.has.title||(this.data.end_date&&(e=" &mdash; "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(e=this.data.start_date.getDisplayDate(this.getLanguage())+e)),e}_initLayout(){if(this._el.container=fe("div","tl-slide"),this.has.title&&(this._el.container.className="tl-slide tl-slide-titleslide"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._el.scroll_container=fe("div","tl-slide-scrollable-container",this._el.container),this._el.content_container=fe("div","tl-slide-content-container",this._el.scroll_container),this._el.content=fe("div","tl-slide-content",this._el.content_container),this._el.background=fe("div","tl-slide-background",this._el.container),this.data.background){if(this.data.background.url){var e=$h(this.data.background,!0);e&&(this._background_media=new e.cls(this.data.background,{background:1}),this.has.background.image=!0,this._el.container.className+=" tl-full-image-background",this.has.background.color_value="#000",this._el.background.style.display="block"),this.data.background.alt&&(this._el.background.setAttribute("role","img"),this._el.background.setAttribute("aria-label",this.data.background.alt))}this.data.background.color&&(this.has.background.color=!0,this._el.container.className+=" tl-full-color-background",this.has.background.color_value=this.data.background.color),this.data.background.text_background&&(this._el.container.className+=" tl-text-background")}this.data.media&&this.data.media.url&&this.data.media.url!=""&&(this.has.media=!0),this.data.text&&this.data.text.text&&(this.has.text=!0),this.data.text&&this.data.text.headline&&(this.has.headline=!0),this.has.media&&(this.data.media.mediatype=$h(this.data.media),this.options.media_name=this.data.media.mediatype.name,this.options.media_type=this.data.media.mediatype.type,this.options.autolink=this.data.autolink,this._media=new this.data.media.mediatype.cls(this.data.media,this.options,this.getLanguage())),(this.has.text||this.has.headline)&&(this._text=new sA(this.data.text,{title:this.has.title,language:this.getLanguage(),autolink:this.data.autolink}),this._text.addDateText(this.getFormattedDate())),!this.has.text&&!this.has.headline&&this.has.media?(this._el.container.classList.add("tl-slide-media-only"),this._media.addTo(this._el.content)):this.has.headline&&this.has.media&&!this.has.text?(this._el.container.classList.add("tl-slide-media-only"),this._text.addTo(this._el.content),this._media.addTo(this._el.content)):this.has.text&&this.has.media?(this._text.addTo(this._el.content),this._media.addTo(this._el.content)):(this.has.text||this.has.headline)&&(this._el.container.classList.add("tl-slide-text-only"),this._text.addTo(this._el.content)),this.onLoaded()}_initEvents(){}_updateBackgroundDisplay(){this._background_media&&this._background_media._state.loaded&&(this._el.background.style.backgroundImage="url('"+this._background_media.getImageURL(this.options.width,this.options.height)+"')")}_setInteractive(e){e?this._el.container.removeAttribute("inert"):this._el.container.setAttribute("inert",!0)}}Tn(uA,Pi,Sn,Ci);class mv{constructor(e,r,i){this._el={container:{},content_container:{},icon:{},title:{},description:{}},this.mediatype={},this.data={title:"Navigation",description:"Description",date:"Date"},this.options={direction:"previous"},this.animator=null,et(this.options,r),et(this.data,e),this._el.container=Hl("tl-slidenav-"+this.options.direction),wa&&this._el.container.setAttribute("ontouchstart"," "),this._initLayout(),this._initEvents(),i&&i.appendChild(this._el.container)}update(e){var r={title:"",description:"",date:e.getFormattedDate()};e.data.text&&e.data.text.headline&&(r.title=e.data.text.headline),this._update(r)}setColor(e){e?this._el.content_container.className="tl-slidenav-content-container tl-slidenav-inverted":this._el.content_container.className="tl-slidenav-content-container"}_onMouseClick(){this.fire("clicked",this.options)}_update(e){this.data=et(this.data,e);const r=uo(this.data.title);this._el.title.innerHTML=r;const i=uo(this.data.date);this._el.description.innerHTML=i,this._el.container.setAttribute("aria-label",`${this.options.direction}, ${r}, ${i}`)}_initLayout(){this._el.content_container=fe("div","tl-slidenav-content-container",this._el.container),this._el.icon=fe("div","tl-slidenav-icon",this._el.content_container),this._el.title=fe("div","tl-slidenav-title",this._el.content_container),this._el.description=fe("div","tl-slidenav-description",this._el.content_container),this._el.icon.innerHTML="&nbsp;",this._update()}_initEvents(){Re.addListener(this._el.container,"click",this._onMouseClick,this)}}Tn(mv,Ci,Sn);class cA{constructor(e,r,i,s){s&&this.setLanguage(s),this._el={container:{},background:{},slider_container_mask:{},slider_container:{},slider_item_container:{}},this._nav={},this._nav.previous={},this._nav.next={},this.slide_spacing=0,this._slides=[],this._swipable,this.preloadTimer,this._message,this.current_id="",this.data={},this.options={id:"",layout:"portrait",width:600,height:600,default_bg_color:{r:255,g:255,b:255},slide_padding_lr:40,start_at_slide:1,slide_default_fade:"0%",duration:1e3,ease:Yo,dragging:!0,trackResize:!0},typeof e=="object"?(this._el.container=e,this.options.id=ca(6,"tl")):(this.options.id=e,this._el.container=cc(e)),this._el.container.id||(this._el.container.id=this.options.id),this.animator=null,et(this.options,i),et(this.data,r)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this.goTo(this.options.start_at_slide),this._onLoaded()}_addSlide(e){e.addTo(this._el.slider_item_container),e.on("added",this._onSlideAdded,this),e.on("background_change",this._onBackgroundChange,this)}_createSlide(e,r,i){var s=new uA(e,this.options,r,this.getLanguage());this._addSlide(s),i<0?this._slides.push(s):this._slides.splice(i,0,s)}_createSlides(e){for(var r=0;r<e.length;r++)e[r].unique_id==""&&(e[r].unique_id=ca(6,"tl-slide")),this._createSlide(e[r],!1,-1)}_removeSlide(e){e.removeFrom(this._el.slider_item_container),e.off("added",this._onSlideRemoved,this),e.off("background_change",this._onBackgroundChange)}_destroySlide(e){this._removeSlide(this._slides[e]),this._slides.splice(e,1)}_findSlideIndex(e){var r=e;return(typeof e=="string"||e instanceof String)&&(r=qC(e,this._slides,"unique_id")),r}updateDisplay(e,r,i,s){var a,o;typeof s>"u"?o=this.options.layout:o=s,this.options.layout=o,e?this.options.width=e:this.options.width=this._el.container.offsetWidth,r?this.options.height=r:this.options.height=this._el.container.offsetHeight,this.slide_spacing=this.options.width*2,a=this.options.height/2,this._nav.next.setPosition({top:a}),this._nav.previous.setPosition({top:a});for(var l=0;l<this._slides.length;l++)this._slides[l].updateDisplay(this.options.width,this.options.height,o),this._slides[l].setPosition({left:this.slide_spacing*l,top:0});this.goToId(this.current_id,!0,!0)}createSlide(e,r){this._createSlide(e,!1,r)}createSlides(e){this._createSlides(e)}destroySlide(e){this._destroySlide(e)}destroySlideId(e){this.destroySlide(this._findSlideIndex(e))}goTo(e,r,i){e=parseInt(e),isNaN(e)&&(e=0);var s=this;this.changeBackground({color_value:"",image:!1}),this.preloadTimer&&clearTimeout(this.preloadTimer);for(var a=0;a<this._slides.length;a++)this._slides[a].setActive(!1);e<this._slides.length&&e>=0&&(this.current_id=this._slides[e].data.unique_id,this.animator&&this.animator.stop(),this._swipable&&this._swipable.stopMomentum(),r?(this._el.slider_container.style.left=-(this.slide_spacing*e)+"px",this._onSlideChange(i)):this.animator=Si(this._el.slider_container,{left:-(this.slide_spacing*e)+"px",duration:this.options.duration,easing:this.options.ease,complete:this._onSlideChange(i)}),this._slides[e].setActive(!0),this._slides[e+1]?(this.showNav(this._nav.next,!0),this._nav.next.update(this._slides[e+1])):this.showNav(this._nav.next,!1),this._slides[e-1]?(this.showNav(this._nav.previous,!0),this._nav.previous.update(this._slides[e-1])):this.showNav(this._nav.previous,!1),this.preloadTimer=setTimeout(function(){s.preloadSlides(e)},this.options.duration))}goToId(e,r,i){this.goTo(this._findSlideIndex(e),r,i)}preloadSlides(e){this._slides[e+1]&&(this._slides[e+1].loadMedia(),this._slides[e+1].scrollToTop()),this._slides[e+2]&&(this._slides[e+2].loadMedia(),this._slides[e+2].scrollToTop()),this._slides[e-1]&&(this._slides[e-1].loadMedia(),this._slides[e-1].scrollToTop()),this._slides[e-2]&&(this._slides[e-2].loadMedia(),this._slides[e-2].scrollToTop())}next(){var e=this._findSlideIndex(this.current_id);e+1<this._slides.length?this.goTo(e+1):this.goTo(e)}previous(){var e=this._findSlideIndex(this.current_id);e-1>=0?this.goTo(e-1):this.goTo(e)}showNav(e,r){this.options.width<=500&&wa?e.hide():r?e.show():e.hide()}changeBackground(e){var r={r:256,g:256,b:256};e.color_value&&e.color_value!=""?(r=HC(e.color_value),r||(Be("Invalid color value "+e.color_value),r=this.options.default_bg_color)):(r=this.options.default_bg_color,e.color_value="rgb("+r.r+" , "+r.g+", "+r.b+")"),r.r+""+r.g+r.b,this._el.background.style.backgroundImage="none",e.color_value?this._el.background.style.backgroundColor=e.color_value:this._el.background.style.backgroundColor="transparent",r.r<255||r.g<255||r.b<255||e.image?(this._nav.next.setColor(!0),this._nav.previous.setColor(!0)):(this._nav.next.setColor(!1),this._nav.previous.setColor(!1))}_updateDrawSlides(){for(var e=this.options.layout,r=0;r<this._slides.length;r++)this._slides[r].updateDisplay(this.options.width,this.options.height,e),this._slides[r].setPosition({left:this.slide_spacing*r,top:0});this.goToId(this.current_id,!0,!1)}_initLayout(){this._el.container.classList.add("tl-storyslider"),this._nav.previous=new mv({title:"Previous",description:"description"},{direction:"previous"},this._el.container),this._nav.next=new mv({title:"Next",description:"description"},{direction:"next"},this._el.container),this._el.slider_container_mask=fe("div","tl-slider-container-mask",this._el.container),this._el.background=fe("div","tl-slider-background tl-animate",this._el.container),this._el.slider_container=fe("div","tl-slider-container tlanimate",this._el.slider_container_mask),this._el.slider_item_container=fe("div","tl-slider-item-container",this._el.slider_container),this._el.slider_container.setAttribute("aria-live","polite"),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this._el.slider_container.style.left="0px",Gr&&(this._swipable=new x_(this._el.slider_container_mask,this._el.slider_container,{enable:{x:!0,y:!1},snap:!0}),this._swipable.enable(),this._message=new qf(this._el.container,{message_class:"tl-message-full",message_icon_class:"tl-icon-swipe-left"},this.getLanguage()),this._message.updateMessage(this._("swipe_to_navigate")),this._message.addTo(this._el.container))}_initEvents(){this._nav.next.on("clicked",this._onNavigation,this),this._nav.previous.on("clicked",this._onNavigation,this),this._message&&this._message.on("clicked",this._onMessageClick,this),this._swipable&&(this._swipable.on("swipe_left",this._onNavigation,this),this._swipable.on("swipe_right",this._onNavigation,this),this._swipable.on("swipe_nodirection",this._onSwipeNoDirection,this))}_initData(){this.data.title&&this._createSlide(this.data.title,!0,-1),this._createSlides(this.data.events)}_onBackgroundChange(e){var r=this._findSlideIndex(this.current_id),i=this._slides[r].getBackground();this.changeBackground(e),this.fire("colorchange",i)}_onMessageClick(e){this._message.hide()}_onSwipeNoDirection(e){this.goToId(this.current_id)}_onNavigation(e){e.direction=="next"||e.direction=="left"?this.next():(e.direction=="previous"||e.direction=="right")&&this.previous(),this.fire("nav_"+e.direction,this.data)}_onSlideAdded(e){Be("slideadded"),this.fire("slideAdded",this.data)}_onSlideRemoved(e){this.fire("slideRemoved",this.data)}_onSlideChange(e){e||this.fire("change",{unique_id:this.current_id})}_onMouseClick(e){}_fireMouseEvent(e){if(this._loaded){var r=e.type;r=r==="mouseenter"?"mouseover":r==="mouseleave"?"mouseout":r,this.hasEventListeners(r)&&(r==="contextmenu"&&Re.preventDefault(e),this.fire(r,{latlng:"something",layerPoint:"something else"}))}}_onLoaded(){this.fire("loaded",this.data)}}Tn(cA,Pi,Sn);class dA{constructor(e,r,i,s){this._el={parent:{},container:{},button_forwardtoend:{},button_backtostart:{},button_zoomin:{},button_zoomout:{},arrow:{},line:{},coverbar:{},grip:{}},this.collapsed=!1,typeof e=="object"?this._el.container=e:this._el.container=cc(e),r&&(this._el.parent=r),this.data={visible_ticks_dates:{}},this.options={width:600,height:600,duration:1e3,ease:Yo,menubar_default_y:0},this.animator={},this.setLanguage(s),et(this.options,i),this._initLayout(),this._initEvents()}show(e){this.options.duration}hide(e){}toogleZoomIn(e){e?this._el.button_zoomin.removeAttribute("disabled"):this._el.button_zoomin.setAttribute("disabled",!0)}toogleZoomOut(e){e?this._el.button_zoomout.removeAttribute("disabled"):this._el.button_zoomout.setAttribute("disabled",!0)}changeVisibleTicks(e){const r=e.minor;if(!r.length){this.data.visible_ticks_dates={};return}const s=r[0].date.getFullYear(),o=r[r.length-1].date.getFullYear();this.data.visible_ticks_dates={start:s,end:o},this._updateZoomAriaLabels()}setSticky(e){this.options.menubar_default_y=e}setColor(e){e?this._el.container.className="tl-menubar tl-menubar-inverted":this._el.container.className="tl-menubar"}updateDisplay(e,r,i,s){this._updateDisplay(e,r,i,s)}_onButtonZoomIn(e){this.fire("zoom_in",e)}_onButtonZoomOut(e){this.fire("zoom_out",e)}_onButtonForwardToEnd(e){this.fire("forward_to_end",e)}_onButtonBackToStart(e){this.fire("back_to_start",e)}_initLayout(){this._el.button_zoomin=Hl("tl-menubar-button",this._el.container),this._el.button_zoomout=Hl("tl-menubar-button",this._el.container),this._el.button_forwardtoend=Hl("tl-menubar-button",this._el.container),this._el.button_backtostart=Hl("tl-menubar-button",this._el.container),wa&&this._el.container.setAttribute("ontouchstart"," "),this._el.button_backtostart.innerHTML="<span class='tl-icon-goback'></span>",this._el.button_backtostart.setAttribute("aria-label",this._("return_to_title")),this._el.button_forwardtoend.innerHTML="<span class='tl-icon-goend'></span>",this._el.button_forwardtoend.setAttribute("aria-label",this._("go_to_end")),this._el.button_zoomin.innerHTML="<span class='tl-icon-zoom-in'></span>",this._el.button_zoomin.setAttribute("aria-label",this._("zoom_in")),this._el.button_zoomout.innerHTML="<span class='tl-icon-zoom-out'></span>",this._el.button_zoomout.setAttribute("aria-label",this._("zoom_out"))}_initEvents(){Re.addListener(this._el.button_forwardtoend,"click",this._onButtonForwardToEnd,this),Re.addListener(this._el.button_backtostart,"click",this._onButtonBackToStart,this),Re.addListener(this._el.button_zoomin,"click",this._onButtonZoomIn,this),Re.addListener(this._el.button_zoomout,"click",this._onButtonZoomOut,this)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}_updateZoomAriaLabels(){Object.keys(this.data.visible_ticks_dates).length==0?(this._el.button_zoomin.setAttribute("aria-description",""),this._el.button_zoomout.setAttribute("aria-description","")):(this._el.button_zoomin.setAttribute("aria-description",this._("aria_label_zoomin",this.data.visible_ticks_dates)),this._el.button_zoomout.setAttribute("aria-description",this._("aria_label_zoomout",this.data.visible_ticks_dates)))}}Tn(dA,Ci,Sn,Pi);let gv=null;if(document){let t=document.getElementsByTagName("script");t&&t.length>0&&(gv=t[t.length-1].src)}function ez(t){return function(e){if(t.config){var r=e.key,i=t._getSlideIndex(self.current_id),s=t.config.events.length-1,a=t.config.title?s+1:s,o=0;r=="ArrowLeft"?i!=o&&t.goToPrev():r=="ArrowRight"&&i!=a&&t.goToNext()}}}class hA{constructor(e,r,i){if(i||(i={}),this.ready=!1,this._el={container:cc(e),storyslider:{},timenav:{},menubar:{}},i.lang&&!i.language&&(i.language=i.lang),this.language=b_,this._storyslider={},this._timenav={},this._menubar={},this._loaded={storyslider:!1,timenav:!1},this.config=null,this.options={script_path:"https://cdn.knightlab.com/libs/timeline3/latest/js/",height:this._el.container.offsetHeight,width:this._el.container.offsetWidth,debug:!1,font:"default",is_embed:!1,is_full_embed:!1,hash_bookmark:!1,default_bg_color:{r:255,g:255,b:255},scale_factor:2,layout:"landscape",timenav_position:"bottom",optimal_tick_width:60,base_class:"tl-timeline",timenav_height:null,timenav_height_percentage:25,timenav_mobile_height_percentage:40,timenav_height_min:175,marker_height_min:30,marker_width_min:100,marker_padding:5,start_at_slide:0,start_at_end:!1,menubar_height:0,skinny_size:650,medium_size:800,use_bc:!1,duration:1e3,ease:Yo,dragging:!0,trackResize:!0,map_type:"stamen:toner-lite",slide_padding_lr:100,slide_default_fade:"0%",zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89],language:"en",ga_measurement_id:null,ga_property_id:null,track_events:["back_to_start","nav_next","nav_previous","zoom_in","zoom_out"],theme:null,sheets_proxy:"https://sheets-proxy.knightlab.com/proxy/",soundcite:!1},this.animator_timenav=null,this.animator_storyslider=null,this.animator_menubar=null,this.message=new qf(this._el.container,{message_class:"tl-message-full"}),typeof i.default_bg_color=="string"){var s=HC(i.default_bg_color);s?i.default_bg_color=s:(delete i.default_bg_color,Be("Invalid default background color. Ignoring."))}et(this.options,i),this.options.script_path||(this.options.script_path=this.determineScriptPath()),i.soundcite&&this.on("ready",()=>{Be("Loading Soundcite resources "),bm("https://cdn.knightlab.com/libs/soundcite/latest/css/player.css"),da("https://cdn.knightlab.com/libs/soundcite/latest/js/soundcite.min.js")}),this._loadStyles(),document.addEventListener("keydown",ez(this)),window.addEventListener("resize",(function(a){this.updateDisplay()}).bind(this)),this.options.debug&&y$(console.log),this._el.container.classList.add("tl-timeline"),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","region"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline")),this.options.is_embed&&this._el.container.classList.add("tl-timeline-embed"),this.options.is_full_embed&&this._el.container.classList.add("tl-timeline-full-embed"),this._loadLanguage(r)}_loadStyles(){let e=null,r=null;if(this.options.font&&(this.options.font.indexOf("http")==0||this.options.font.match(/\.css$/)))e=this.options.font;else if(this.options.font){let i="../css/fonts/font."+this.options.font.toLowerCase()+".css";e=new URL(i,this.options.script_path).toString()}if(e&&bm(e),this.options.theme&&(this.options.theme.indexOf("http")==0||this.options.theme.match(/\.css$/)))r=this.options.theme;else if(this.options.theme){let i="../css/themes/timeline.theme."+this.options.theme.toLowerCase()+".css";r=new URL(i,this.options.script_path).toString()}r&&bm(r)}_loadLanguage(e){try{var r=this.options.language,i=this.options.script_path;L$(r,i).then(s=>{s?(this.language=s,this.message.setLanguage(this.language),this.showMessage(this._("loading_timeline"))):this.showMessage(`Error loading ${r}`),this._initData(e)})}catch(s){this.showMessage(this._translateError(s))}}_initData(e){typeof e=="string"?y5(e,{callback:(function(r){this.setConfig(r)}).bind(this),sheets_proxy:this.options.sheets_proxy}):Gs==e.constructor?this.setConfig(e):this.setConfig(new Gs(e))}_translateError(e){return e.hasOwnProperty("stack")&&Be(e.stack),e.message_key?this._(e.message_key)+(e.detail?" ["+e.detail+"]":""):e}showMessage(e){this.message?this.message.updateMessage(e):(Be("No message display available."),Be(e))}determineScriptPath(){let e=null;if(gv)e=gv;else{let r=document.getElementById("timeline-script-tag");r&&(e=r.src)}if(!e){let r=document.getElementsByTagName("script");for(let i=r.length-1;i>=0;i--)if(r[i].src){e=r[i].src;break}}return e?e.substr(0,e.lastIndexOf("/")+1):""}setConfig(e){if(this.config=e,this.config.isValid()&&(this.config.validate(),this._validateOptions()),this.config.isValid())try{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this._onDataLoaded.bind(this)):this._onDataLoaded()}catch(a){this.showMessage("<strong>"+this._("error")+":</strong> "+this._translateError(a))}else{for(var r=[],i=0,s=this.config.getErrors();i<s.length;i++)r.push(this._translateError(s[i]));this.showMessage("<strong>"+this._("error")+":</strong> "+r.join("<br>"))}}_onDataLoaded(){this.fire("dataloaded"),this._initLayout(),this._initEvents(),this._initAnalytics(),this.message&&this.message.hide();let e=(i,s)=>{i.reduce((a,o)=>a||o.isIntersecting,!1)&&this.updateDisplay()};new IntersectionObserver(e.bind(this)).observe(this._el.container),this.ready=!0,this.fire("ready")}_initLayout(){this.message.removeFrom(this._el.container),this._el.container.innerHTML="",this.options.timenav_position=="top"?(this._el.timenav=fe("div","tl-timenav",this._el.container),this._el.menubar=fe("div","tl-menubar",this._el.container),this._el.storyslider=fe("div","tl-storyslider",this._el.container)):(this._el.storyslider=fe("div","tl-storyslider",this._el.container),this._el.timenav=fe("div","tl-timenav",this._el.container),this._el.menubar=fe("div","tl-menubar",this._el.container)),this._el.attribution=fe("div","tl-attribution",this._el.container),this._el.attribution.innerHTML="<a href='https://timeline.knightlab.com' target='_blank' rel='noopener'><span class='tl-knightlab-logo'></span>TimelineJS</a>",this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.timenav_height=this._calculateTimeNavHeight(this.options.timenav_height),this._timenav=new lA(this._el.timenav,this.config,this.options,this.language),this._timenav.on("loaded",this._onTimeNavLoaded,this),this._timenav.options.height=this.options.timenav_height,this._timenav.init(),this.options.initial_zoom&&this.setZoom(this.options.initial_zoom),this._storyslider=new cA(this._el.storyslider,this.config,this.options,this.language),this._el.storyslider.setAttribute("role","group"),this._el.storyslider.setAttribute("aria-label",this._("aria_label_timeline_content")),this._storyslider.on("loaded",this._onStorySliderLoaded,this),this._storyslider.init(),this._menubar=new dA(this._el.menubar,this._el.container,this.options,this.getLanguage()),this.options.layout=="portrait"?this.options.storyslider_height=this.options.height-this.options.timenav_height-1:this.options.storyslider_height=this.options.height-1,this._updateDisplay()}_initEvents(){this._timenav.on("change",this._onTimeNavChange,this),this._timenav.on("zoomtoggle",this._onZoomToggle,this),this._timenav.on("visible_ticks_change",this._onVisibleTicksChange,this),this._storyslider.on("change",this._onSlideChange,this),this._storyslider.on("colorchange",this._onColorChange,this),this._storyslider.on("nav_next",this._onStorySliderNext,this),this._storyslider.on("nav_previous",this._onStorySliderPrevious,this),this._menubar.on("zoom_in",this._onZoomIn,this),this._menubar.on("zoom_out",this._onZoomOut,this),this._menubar.on("forward_to_end",this._onForwardToEnd,this),this._menubar.on("back_to_start",this._onBackToStart,this)}_onColorChange(e){this.fire("color_change",{unique_id:this.current_id},this)}_onSlideChange(e){this.current_id!=e.unique_id&&(this.current_id=e.unique_id,this._timenav.goToId(this.current_id),this._onChange(e))}_onTimeNavChange(e){this.current_id!=e.unique_id&&(this.current_id=e.unique_id,this._storyslider.goToId(this.current_id),this._onChange(e))}_onZoomToggle(e){e.zoom=="in"?this._menubar.toogleZoomIn(e.show):e.zoom=="out"&&this._menubar.toogleZoomOut(e.show)}_onChange(e){this.fire("change",{unique_id:this.current_id},this),this.options.hash_bookmark&&this.current_id&&this._updateHashBookmark(this.current_id)}_onVisibleTicksChange(e){this._menubar.changeVisibleTicks(e.visible_ticks)}_onForwardToEnd(e){this.goToEnd(),this.fire("forward_to_end",{unique_id:this.current_id},this)}_onBackToStart(e){this.goToStart(),this.fire("back_to_start",{unique_id:this.current_id},this)}_onZoomIn(e){this._timenav.zoomIn(),this.fire("zoom_in",{zoom_level:this._timenav.options.scale_factor},this)}_onZoomOut(e){this._timenav.zoomOut(),this.fire("zoom_out",{zoom_level:this._timenav.options.scale_factor},this)}_onTimeNavLoaded(){this._loaded.timenav=!0,this._onLoaded()}_onStorySliderLoaded(){this._loaded.storyslider=!0,this._onLoaded()}_onStorySliderNext(e){this.fire("nav_next",e)}_onStorySliderPrevious(e){this.fire("nav_previous",e)}_updateDisplay(e,r,i){var s=this.options.duration,a=this.options.base_class,o=0;i&&(s=i),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.width<=this.options.skinny_size?(a+=" tl-skinny",this.options.layout="portrait"):this.options.width<=this.options.medium_size?(a+=" tl-medium",this.options.layout="landscape"):this.options.layout="landscape",Gr&&(this.options.layout=g$()),wa?(a+=" tl-mobile",this.options.timenav_height=this._calculateTimeNavHeight(e,this.options.timenav_mobile_height_percentage)):this.options.timenav_height=this._calculateTimeNavHeight(e),this.options.layout=="portrait"?a+=" tl-layout-portrait":a+=" tl-layout-landscape",this.options.storyslider_height=this.options.height-this.options.timenav_height,this.options.timenav_position=="top"?o=Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-39/2:o=Math.round(this.options.storyslider_height+1+Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-35/2),r?(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this.animator_storyslider&&this.animator_storyslider.stop(),this.animator_storyslider=Si(this._el.storyslider,{height:this.options.storyslider_height+"px",duration:s/2,easing:Lu}),this.animator_menubar&&this.animator_menubar.stop(),this.animator_menubar=Si(this._el.menubar,{top:o+"px",duration:s/2,easing:Lu})):(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this._el.storyslider.style.height=this.options.storyslider_height+"px",this._el.menubar.style.top=o+"px"),this.message&&this.message.updateDisplay(this.options.width,this.options.height),this._timenav.updateDisplay(this.options.width,this.options.timenav_height,r),this._storyslider.updateDisplay(this.options.width,this.options.storyslider_height,r,this.options.layout),this.language.direction=="rtl"&&(a+=" tl-rtl"),this._el.container.className=a}_calculateTimeNavHeight(e,r){var i=0;return(this.options.timenav_height_percentage||r)&&(r?i=Math.round(this.options.height/100*r):i=Math.round(this.options.height/100*this.options.timenav_height_percentage)),this._timenav.ready&&this.options.timenav_height_min<this._timenav.getMinimumHeight()&&(this.options.timenav_height_min=this._timenav.getMinimumHeight()),i<this.options.timenav_height_min&&(i=this.options.timenav_height_min),i=i-this.options.marker_padding*2,i}_validateOptions(){for(var e=["timenav_height","timenav_height_min","marker_height_min","marker_width_min","marker_padding","start_at_slide","slide_padding_lr"],r=0;r<e.length;r++){var i=e[r],s=this.options[i];let a=!0;typeof s=="number"?a=s==parseInt(s):typeof s=="string"&&(a=s.match(/^\s*(\-?\d+)?\s*$/)),a||this.config.logError({message_key:"invalid_integer_option",detail:i})}}_getSlideIndex(e){if(this.config){if(this.config.title&&this.config.title.unique_id==e)return 0;for(var r=0;r<this.config.events.length;r++)if(e==this.config.events[r].unique_id)return this.config.title?r+1:r}return-1}_getEventIndex(e){for(var r=0;r<this.config.events.length;r++)if(e==this.config.events[r].unique_id)return r;return-1}_onLoaded(){if(this._loaded.storyslider&&this._loaded.timenav&&(this.fire("loaded",this.config),v$(this.options.start_at_end)||this.options.start_at_slide>this.config.events.length?this.goToEnd():this.goTo(this.options.start_at_slide),this.options.hash_bookmark)){window.location.hash!=""?this.goToId(window.location.hash.replace("#event-","")):this._updateHashBookmark(this.current_id);let e=this;window.addEventListener("hashchange",function(){window.location.hash.indexOf("#event-")==0&&e.goToId(window.location.hash.replace("#event-",""))},!1)}}_updateHashBookmark(e){if(e){var r="#event-"+e.toString();window.history.replaceState(null,"Browsing TimelineJS",r),this.fire("hash_updated",{unique_id:this.current_id,hashbookmark:"#event-"+e.toString()},this)}}zoomIn(){this._timenav.zoomIn()}zoomOut(){this._timenav.zoomOut()}setZoom(e){this._timenav.setZoom(e)}goToId(e){this.current_id!=e&&(this.current_id=e,this._timenav.goToId(this.current_id),this._storyslider.goToId(this.current_id,!1,!0),this.fire("change",{unique_id:this.current_id},this))}goTo(e){if(!(e<0))try{this.config.title?e===0?this.goToId(this.config.title.unique_id):this.goToId(this.config.events[e-1].unique_id):this.goToId(this.config.events[e].unique_id)}catch{return}}goToStart(){this.goTo(0)}goToEnd(){var e=this.config.events.length-1;this.goTo(this.config.title?e+1:e)}goToPrev(){this.goTo(this._getSlideIndex(this.current_id)-1),this.focusContainer()}goToNext(){this.goTo(this._getSlideIndex(this.current_id)+1),this.focusContainer()}add(e){var r=this.config.addEvent(e),i=this._getEventIndex(r),s=this.config.events[i];this._storyslider.createSlide(s,this.config.title?i+1:i),this._storyslider._updateDrawSlides(),this._timenav.createMarker(s,i),this._timenav._updateDrawTimeline(!1),this.fire("added",{unique_id:r})}remove(e){if(e>=0&&e<this.config.events.length){this.config.events[e].unique_id==this.current_id&&(e<this.config.events.length-1?this.goTo(e+1):this.goTo(e-1));var r=this.config.events.splice(e,1);delete this.config.event_dict[r[0].unique_id],this._storyslider.destroySlide(this.config.title?e+1:e),this._storyslider._updateDrawSlides(),this._timenav.destroyMarker(e),this._timenav._updateDrawTimeline(!1),this.fire("removed",{unique_id:r[0].unique_id})}}removeId(e){this.remove(this._getEventIndex(e))}getData(e){if(this.config.title){if(e==0)return this.config.title;if(e>0&&e<=this.config.events.length)return this.config.events[e-1]}else if(e>=0&&e<this.config.events.length)return this.config.events[e];return null}getDataById(e){return this.getData(this._getSlideIndex(e))}getSlide(e){return e>=0&&e<this._storyslider._slides.length?this._storyslider._slides[e]:null}getSlideById(e){return this.getSlide(this._getSlideIndex(e))}getCurrentSlide(){return this.getSlideById(this.current_id)}updateDisplay(){this.ready?this._updateDisplay():Be("updateDisplay called but timeline is not in ready state")}focusContainer(){this._el.container.focus()}_initGoogleAnalytics(e){da(`https://www.googletagmanager.com/gtag/js?id=${e}`),window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",e)}_initAnalytics(){let e=this.options.ga_measurement_id||this.options.ga_property_id||null;if(e){this._initGoogleAnalytics(e);var r=this.options.track_events;for(let s=0;s<r.length;s++){var i=r[s];this.addEventListener(i,function(a){gtag("event",a.type)})}}}}Tn(hA,Pi,Sn);function tz(){const t=L.useRef(null),[e,r]=L.useState(null),[i,s]=L.useState(!0),[a,o]=L.useState(null),l=Jr(),u=L.useRef();u.current=l,L.useEffect(()=>{async function f(){try{const p=await Mn(fn(Rt,"timelineEvents")),g=c(p);r({title:{media:{url:"",caption:"",credit:""},text:{headline:"Civil Rights Movement Timeline",text:"Key events from the Civil Rights Movement, identified from interviews from the Library of Congress Civil Rights History Project."}},events:g}),s(!1)}catch(p){console.error("Error fetching timeline data:",p),o("Failed to load timeline events."),s(!1)}}f()},[]),L.useEffect(()=>{if(e&&t.current){t.current.innerHTML="";try{new hA(t.current,e),setTimeout(h,1e3)}catch(f){console.error("Error initializing Timeline.js:",f),o("Failed to initialize timeline.")}}},[e]);const c=f=>f.docs.map(p=>{const g=p.data(),T=new Date(g.date),N=g.keywords?g.keywords.split(",").map(b=>b.trim()):[],A=`
        ${g.description||""}
        <br><br>
        <button 
          class="relevant-interviews-button" 
          data-keywords="${encodeURIComponent(N.join(","))}"
          style="background-color: #2563eb; color: white; padding: 10px 16px; border: none; border-radius: 8px; cursor: pointer; display: flex; align-items: center; font-family: inherit; font-size: 14px; font-weight: 500; transition: background-color 0.2s; box-shadow: 0 1px 3px rgba(0,0,0,0.1);"
          onmouseover="this.style.backgroundColor = '#1d4ed8'"
          onmouseout="this.style.backgroundColor = '#2563eb'"
        >
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" style="width: 20px; height: 20px; margin-right: 8px;">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
          </svg>
          Relevant Interviews
        </button>
      `;return{start_date:{year:T.getFullYear(),month:T.getMonth()+1,day:T.getDate()},text:{headline:g.title,text:A},media:{url:g.mediaUrl||"",caption:g.mediaCaption||"",credit:g.mediaCredit||""}}}),h=()=>{document.querySelectorAll(".relevant-interviews-button").forEach(f=>{f.addEventListener("click",function(p){p.preventDefault(),p.stopPropagation();const g=this.dataset.keywords;g&&u.current(`/playlist-builder?keywords=${g}`)})})};return i?m.jsxs("div",{className:"flex justify-center items-center h-96 bg-gray-50",children:[m.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),m.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):a?m.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg text-center mx-auto my-6 max-w-xl",children:a}):m.jsxs("div",{className:"w-full max-w-7xl mx-auto p-6 bg-gray-50 font-sans",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Civil Rights Timeline"}),m.jsx("p",{className:"text-base leading-relaxed text-gray-600",children:"Explore key events from the Civil Rights Movement, with links to relevant interview recordings."})]}),m.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden p-0 mb-6",children:m.jsx("div",{ref:t,id:"timeline-embed",style:{height:"600px",width:"100%",position:"relative"}})}),m.jsx("div",{className:"bg-indigo-50 rounded-xl p-4 px-6 border-l-4 border-indigo-500",children:m.jsxs("p",{className:"text-sm leading-relaxed text-indigo-800 m-0",children:[m.jsx("strong",{children:"Tip:"}),' Click on any event to see details, and use the "Relevant Interviews" button to find related interview recordings.']})})]})}function nz(){const[t,e]=L.useState([]),[r,i]=L.useState(!0),[s,a]=L.useState(null),[o,l]=L.useState(""),[u,c]=L.useState(null),[h,f]=L.useState(!1),p=Jr();L.useEffect(()=>{N()},[]),L.useEffect(()=>{u&&f(!0)},[u]);const g=()=>{f(!1)},T=I=>{const y=I==null?void 0:I.match(/embed\/([a-zA-Z0-9_-]+)/);return y?y[1]:null},N=async()=>{try{i(!0);const I=await Mn(fn(Rt,"interviewSummaries")),y=[];I.forEach(_=>{const S=_.data(),M=T(S.videoEmbedLink);y.push({id:_.id,name:S.name||"Unknown Name",role:S.role||"Unknown Role",videoEmbedLink:S.videoEmbedLink,thumbnailUrl:M?`https://img.youtube.com/vi/${M}/hqdefault.jpg`:null})}),e(y),i(!1)}catch(I){console.error("Error fetching people:",I),a("Failed to load interview subjects"),i(!1)}},A=()=>{if(!u)return;const I=t.filter(_=>_.name.toLowerCase().includes(o.toLowerCase())),y=I.findIndex(_=>_.id===u.id);y>0?c(I[y-1]):c(I[I.length-1])},b=()=>{if(!u)return;const I=t.filter(_=>_.name.toLowerCase().includes(o.toLowerCase())),y=I.findIndex(_=>_.id===u.id);y<I.length-1?c(I[y+1]):c(I[0])};L.useEffect(()=>{const I=y=>{h&&(y.key==="ArrowLeft"?A():y.key==="ArrowRight"?b():y.key==="Escape"&&g())};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[h,u,o]);const x=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("polyline",{points:"15 18 9 12 15 6"})}),w=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("polyline",{points:"9 18 15 12 9 6"})}),R=()=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),m.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),j=({person:I,isOpen:y,onClose:_,onPrev:S,onNext:M})=>{if(!y||!I)return null;const D=K=>{K.target===K.currentTarget&&_()};return m.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:[m.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60",onClick:D}),m.jsx("button",{className:"absolute left-4 md:left-8 z-50 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:K=>{K.stopPropagation(),S()},"aria-label":"Previous person",children:m.jsx(x,{})}),m.jsx("button",{className:"absolute right-4 md:right-8 z-50 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:K=>{K.stopPropagation(),M()},"aria-label":"Next person",children:m.jsx(w,{})}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-md w-full overflow-hidden animate-fadeIn z-50 relative",children:[m.jsxs("div",{className:"relative",children:[I.thumbnailUrl&&m.jsx("div",{className:"w-full h-48 overflow-hidden",children:m.jsx("img",{src:I.thumbnailUrl,alt:I.name,className:"w-full h-full object-cover scale-125"})}),m.jsx("button",{className:"absolute top-2 right-2 bg-black bg-opacity-60 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:_,"aria-label":"Close",children:m.jsx(R,{})})]}),m.jsxs("div",{className:"p-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:I.name}),m.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:I.role}),m.jsx("button",{onClick:()=>p(`/interview-player?documentName=${encodeURIComponent(I.id)}`),className:"w-full bg-blue-600 text-white px-4 py-3 rounded-md hover:bg-blue-700 transition-colors duration-200 font-medium",children:"View Interview"})]})]})]})},V=({person:I})=>{const y=(u==null?void 0:u.id)===I.id;return m.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[m.jsx("div",{}),m.jsx("div",{className:`w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 rounded-md 
                    overflow-hidden shadow-md cursor-pointer transition-all duration-200
                    ${y?"ring-4 ring-blue-500":"hover:ring-2 hover:ring-blue-300"}`,onClick:()=>c(I),style:{touchAction:"manipulation"},children:I.thumbnailUrl?m.jsx("div",{className:"w-full h-full overflow-hidden",children:m.jsx("img",{src:I.thumbnailUrl,alt:I.name,className:"w-full h-full object-cover object-center scale-150",draggable:!1,loading:"lazy"})}):m.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:m.jsx("span",{className:"text-gray-400 text-xs",children:"No photo"})})}),m.jsx("div",{className:"text-center w-full",children:m.jsx("p",{className:`text-xs sm:text-sm truncate max-w-full ${y?"font-bold text-blue-600":"text-gray-700"}`,children:I.name})})]})};if(r)return m.jsx("div",{className:"flex justify-center items-center h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(s)return m.jsx("div",{className:"flex justify-center items-center h-screen",children:m.jsx("div",{className:"text-red-500",children:s})});if(t.length===0)return m.jsx("div",{className:"flex justify-center items-center h-screen",children:m.jsx("div",{className:"text-gray-500",children:"No interview subjects found"})});const C=t.filter(I=>I.name.toLowerCase().includes(o.toLowerCase()));return m.jsxs("div",{className:"container mx-auto px-4 py-8 min-h-screen",children:[m.jsxs("div",{className:"mb-6 max-w-xl mx-auto text-center",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:o?`${C.length} of ${t.length} People`:`${t.length} People`}),m.jsx("input",{type:"text",value:o,onChange:I=>l(I.target.value),placeholder:"Search by name...",className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring focus:border-blue-300"})]}),m.jsx("div",{className:"max-w-6xl mx-auto",children:m.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 gap-x-4 gap-y-6",children:C.map(I=>m.jsx(V,{person:I},I.id))})}),m.jsx(j,{person:u,isOpen:h,onClose:g,onPrev:A,onNext:b})]})}function rz({activeVisualization:t}){return m.jsxs("div",{className:"w-full max-w-5xl mx-auto p-6 bg-white shadow-md rounded-md",children:[t==="keywords"&&m.jsx(s$,{}),t==="map"&&m.jsx(c$,{}),t==="timeline"&&m.jsx(tz,{}),t==="people"&&m.jsx(nz,{})]})}function iz(){const[t,e]=L.useState("timeline"),{user:r}=ac(),i=["timeline","keywords","map","people"];return m.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[m.jsx("div",{className:"text-center mb-8",children:m.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text mb-6",children:"Civil Rights History Project"})}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden transition-all duration-300 mb-6",children:[m.jsx("div",{className:"border-b border-gray-200",children:m.jsx("ul",{className:"flex flex-wrap m-0 p-0 list-none",children:i.map(s=>m.jsx("li",{className:"flex-1",children:m.jsx("button",{onClick:()=>e(s),className:`w-full py-4 px-1 text-sm text-center transition-all duration-300 cursor-pointer border-0 ${t===s?"bg-indigo-50 text-blue-800 font-semibold border-b-2 border-blue-600":"bg-transparent text-gray-500 font-normal border-b-0"}`,children:s.charAt(0).toUpperCase()+s.slice(1)})},s))})}),m.jsx("div",{className:"p-6",children:m.jsx(rz,{activeVisualization:t})})]})]})}function sz(){var g,T;const[t,e]=L.useState(""),[r,i]=L.useState(""),[s,a]=L.useState(!1),[o,l]=L.useState(""),{login:u}=ac(),c=Jr(),f=((T=(g=mr().state)==null?void 0:g.from)==null?void 0:T.pathname)||"/",p=async N=>{if(N.preventDefault(),!t||!r){l("Please enter both email and password");return}try{a(!0),l(""),await u(t,r),c(f,{replace:!0})}catch(A){console.error("Login error:",A);let b="Failed to log in";A.code==="auth/invalid-email"?b="Invalid email address":A.code==="auth/user-not-found"?b="No account found with this email":A.code==="auth/wrong-password"?b="Incorrect password":A.code==="auth/too-many-requests"&&(b="Too many failed login attempts. Please try again later"),l(b)}finally{a(!1)}};return m.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6 font-sans",children:[m.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-4",children:"Sign in to your account"}),m.jsx("p",{className:"text-sm text-center text-gray-500 mt-2",children:"Enter your credentials to access your account"})]}),o&&m.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mb-6 rounded",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-red-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm text-red-700",children:o})})]})}),m.jsxs("form",{className:"mt-6",onSubmit:p,children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),m.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:N=>e(N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"you@example.com"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),m.jsx("a",{href:"#",className:"text-xs text-blue-600 hover:text-blue-700 transition-colors",children:"Forgot password?"})]}),m.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:r,onChange:N=>i(N.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:""})]}),m.jsx("div",{className:"mt-8",children:m.jsx("button",{type:"submit",disabled:s,className:`w-full flex justify-center items-center py-3 px-4 relative bg-blue-600 text-white text-sm font-medium border-0 rounded-lg shadow-sm transition-colors ${s?"opacity-70 cursor-not-allowed":"hover:bg-blue-700 cursor-pointer"}`,children:s?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"absolute left-6 flex items-center",children:m.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),m.jsx("span",{children:"Signing in..."})]}):m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"absolute left-6 flex items-center",children:m.jsx("svg",{className:"h-5 w-5 text-blue-200",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),m.jsx("span",{children:"Sign in"})]})})}),m.jsx("div",{className:"mt-6 text-center",children:m.jsxs("p",{className:"text-sm text-gray-500",children:["Don't have an account?"," ",m.jsx("a",{href:"#",className:"text-blue-600 font-medium hover:text-blue-700 transition-colors",children:"Sign up"})]})})]})]}),m.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})}function vv(t){return t?t.split(",").map(e=>e.trim().toLowerCase()).filter(e=>e.length>0):[]}function co(t){if(!t)return null;const e=t.match(/embed\/([a-zA-Z0-9_-]+)/);return e?e[1]:null}function bE(t){if(!t)return 0;const e=t.split(":").map(Number);return e.length===2?e[0]*60+e[1]:e.length===3?e[0]*3600+e[1]*60+e[2]:0}function Al(t){if(t==null)return"0:00";const e=Math.floor(t/3600),r=Math.floor(t%3600/60),i=Math.floor(t%60);return e>0?`${e}:${r.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`:`${r}:${i.toString().padStart(2,"0")}`}function Js(t){if(!t)return{startSeconds:0,endSeconds:0};const e=t.split("-").map(s=>s.trim());if(e.length!==2)return{startSeconds:0,endSeconds:0};const r=bE(e[0]),i=bE(e[1]);return{startSeconds:r,endSeconds:i}}const az=({videoQueue:t,currentVideoIndex:e,setCurrentVideoIndex:r,currentTime:i,totalDuration:s,onSeek:a})=>{const o=L.useRef(null),l=L.useRef(null),[u,c]=L.useState(0),[h,f]=L.useState(0),[p,g]=L.useState(null),[T,N]=L.useState(null),A=L.useRef(null);L.useEffect(()=>{let j=0;for(let C=0;C<e;C++)if(t[C]){const{startSeconds:I,endSeconds:y}=Js(t[C].timestamp);j+=y-I||300}const V=Math.max(0,i);if(j+=V,f(j),s&&s>0){const C=j/s*100;c(Math.min(Math.max(0,C),100))}},[t,e,i,s]);const b=t.map((j,V)=>{const{startSeconds:C,endSeconds:I}=Js(j.timestamp),y=I-C||300,_=y/s*100,S=co(j.videoEmbedLink);return{id:V,width:_,duration:y,isActive:V===e,videoId:S,name:j.name||"Untitled"}}),x=(j,V)=>{if(V!==e){r(V);return}const C=A.current;if(!C)return;const I=C.getBoundingClientRect(),_=(j.clientX-I.left)/I.width,S=b[e];if(!S)return;const M=_*S.duration;a&&a(M)},w=j=>{if(p!==e)return;const V=A.current;if(!V)return;const C=V.getBoundingClientRect(),y=(j.clientX-C.left)/C.width;N(y)},R=()=>{N(null)};return m.jsxs("div",{children:[m.jsx("div",{ref:o,style:{position:"relative",width:"100%",backgroundColor:"#e5e7eb",marginBottom:"10px",borderRadius:"8px",overflow:"hidden",padding:"10px",boxSizing:"border-box",border:"1px solid #d1d5db",display:"flex"},children:b.map(j=>m.jsxs("div",{onClick:V=>x(V,j.id),onMouseEnter:()=>g(j.id),onMouseLeave:()=>{g(null),R()},onMouseMove:j.isActive?w:null,style:{width:`${j.width}%`,minWidth:"60px",padding:"0 2px",boxSizing:"border-box",position:"relative",cursor:"pointer"},ref:j.isActive?A:null,children:[m.jsxs("div",{style:{position:"relative",overflow:"hidden",borderRadius:"6px",border:`2px solid ${j.isActive?"#3b82f6":"#d1d5db"}`,height:"70px",boxShadow:j.isActive?"0 2px 5px rgba(0,0,0,0.2)":"none"},children:[m.jsx("img",{src:`https://img.youtube.com/vi/${j.videoId}/mqdefault.jpg`,alt:`Thumbnail for segment ${j.id+1}`,style:{width:"100%",maxHeight:"80px",objectFit:"contain",borderRadius:"6px"},onError:V=>{V.target.src="https://via.placeholder.com/120x60?text=No+Thumbnail"}}),j.isActive&&m.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${i/j.duration*100}%`,backgroundColor:"rgba(59, 130, 246, 0.4)",transition:"width 0.2s linear"}}),j.isActive&&T!==null&&m.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${T*100}%`,backgroundColor:"rgba(239, 68, 68, 0.4)",pointerEvents:"none",zIndex:5}}),j.isActive&&T!==null&&m.jsx("div",{style:{position:"absolute",top:"5px",left:`${T*100}%`,transform:"translateX(-50%)",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",zIndex:6,pointerEvents:"none"},children:Al(T*j.duration)}),m.jsx("div",{style:{position:"absolute",bottom:"0",left:"0",right:"0",backgroundColor:"rgba(0,0,0,0.6)",color:"white",fontSize:"11px",textAlign:"center",padding:"2px 0"},children:Al(j.duration)})]}),p===j.id&&m.jsxs("div",{style:{position:"absolute",top:"-30px",left:"50%",transform:"translateX(-50%)",backgroundColor:"#1f2937",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",zIndex:50,whiteSpace:"nowrap"},children:[j.name," (",Al(j.duration),")"]})]},`thumb-${j.id}`))}),m.jsxs("div",{style:{position:"relative",width:"100%",height:"8px",backgroundColor:"#d1d5db",borderRadius:"4px",overflow:"hidden",marginBottom:"10px",cursor:"pointer"},onClick:j=>{const V=j.currentTarget.getBoundingClientRect(),I=(j.clientX-V.left)/V.width;let y=0,_=0,S=0;for(let M=0;M<b.length;M++){const D=b[M].width/100;if(I>=y&&I<=y+D){_=M,S=(I-y)/D*b[M].duration;break}y+=D}_!==e&&r(_),a&&_===e&&a(S)},children:[b.map(j=>m.jsx("div",{style:{width:`${j.width}%`,height:"100%",backgroundColor:"#d1d5db",borderRight:j.id<b.length-1?"1px solid #c4c4c4":"none",position:"relative"},children:j.isActive&&m.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${i/j.duration*100}%`,backgroundColor:"#3b82f6",transition:"width 0.2s linear"}})},`bar-${j.id}`)),m.jsx("div",{ref:l,style:{position:"absolute",top:"-3px",left:`${u}%`,transform:"translateX(-50%)",width:"4px",height:"14px",backgroundColor:"red",borderRadius:"2px",zIndex:9999,transition:"left 0.1s linear"},children:m.jsx("div",{style:{position:"absolute",top:"-4px",left:"50%",transform:"translate(-50%, -50%)",width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"red"}})})]}),m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 10px",backgroundColor:"#f3f4f6",borderRadius:"4px",fontSize:"12px",marginBottom:"10px"},children:[m.jsx("div",{children:Al(h)}),m.jsxs("div",{style:{fontWeight:"bold"},children:[u.toFixed(1),"%"]}),m.jsx("div",{children:Al(s)})]})]})},oz=({onPrevious:t,onPlay:e,onPause:r,onNext:i,isPlaying:s,hasPrevious:a,hasNext:o})=>m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"24px",padding:"12px",backgroundColor:"#f3f4f6",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",margin:"20px auto",border:"2px solid #d1d5db",maxWidth:"320px"},children:[m.jsx("button",{onClick:t,disabled:!a,style:{padding:"12px",borderRadius:"9999px",backgroundColor:a?"#3b82f6":"#9ca3af",color:"white",border:"none",cursor:a?"pointer":"not-allowed",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),m.jsx("button",{onClick:s?r:e,style:{padding:"16px",borderRadius:"9999px",backgroundColor:"#3b82f6",color:"white",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:s?m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6"})}):m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})}),m.jsx("button",{onClick:i,disabled:!o,style:{padding:"12px",borderRadius:"9999px",backgroundColor:o?"#3b82f6":"#9ca3af",color:"white",border:"none",cursor:o?"pointer":"not-allowed",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),lz=({nextKeyword:t,thumbnailUrl:e,onPlay:r})=>m.jsxs("div",{style:{width:"240px",backgroundColor:"#f3f4f6",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",border:"2px solid #d1d5db",overflow:"hidden"},children:[m.jsx("div",{className:"relative",children:m.jsxs("div",{style:{width:"100%",height:"120px",backgroundImage:e?`url(${e})`:"none",backgroundColor:e?"transparent":"#e5e7eb",backgroundSize:"cover",backgroundPosition:"center"},children:[!e&&m.jsx("div",{className:"flex items-center justify-center h-full",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"text-gray-400",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsx("button",{onClick:r,style:{padding:"12px",borderRadius:"9999px",backgroundColor:"#3b82f6",color:"white",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})})})]})}),m.jsxs("div",{style:{padding:"12px"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[m.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",color:"#374151",margin:0},children:"Up Next"}),m.jsx("span",{style:{backgroundColor:"#dbeafe",color:"#1e40af",fontSize:"12px",fontWeight:"500",padding:"2px 8px",borderRadius:"4px"},children:t})]}),m.jsx("p",{style:{fontSize:"12px",color:"#6b7280",margin:0},children:"Plays automatically when current playlist ends"})]})]}),uz=({onClick:t})=>m.jsx("button",{onClick:t,className:"flex items-center justify-center p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 focus:outline-none transition-colors duration-200",title:"Shuffle and get new clips",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{d:"M8 5a1 1 0 100 2h5.586l-1.293 1.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L13.586 5H8zM12 15a1 1 0 100-2H6.414l1.293-1.293a1 1 0 10-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L6.414 15H12z"})})}),cz=({isOpen:t,onConfirm:e,onCancel:r,message:i})=>t?m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm mx-auto",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Confirmation"}),m.jsx("p",{className:"text-sm text-gray-600 mb-4",children:i}),m.jsxs("div",{className:"flex justify-end space-x-3",children:[m.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),m.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Confirm"})]})]})}):null,dz=({metadata:t,onMetadataUpdate:e})=>{const[r,i]=L.useState(!1),[s,a]=L.useState(!1),[o,l]=L.useState({}),[u,c]=L.useState(!1),[h,f]=L.useState(null),[p,g]=L.useState(!1);if(!t)return null;const T=()=>{l({...t}),a(!0),f(null),g(!1)},N=(C,I)=>{l(y=>({...y,[C]:I}))},A=async()=>{try{c(!0),f(null);let C;if(t.documentName&&t.id)C=ko(Rt,"interviewSummaries",t.documentName,"subSummaries",t.id);else{console.error("Unable to determine document path"),f("Unable to determine document path for saving"),c(!1);return}const I={...o};delete I.id,delete I.documentName,await tv(C,I),e&&e(o),g(!0),c(!1),setTimeout(()=>{a(!1),g(!1)},1500)}catch(C){console.error("Error updating document:",C),f(`Error saving changes: ${C.message}`),c(!1)}},b=()=>{a(!1),l({}),f(null),g(!1)},x=["summary"],w=Object.keys(t).filter(C=>!x.includes(C)&&t[C]!==void 0),R=["id","documentName","createdAt","updatedAt"],j=C=>!R.includes(C),V=(C,I)=>{const y=j(C);return typeof I=="boolean"?m.jsxs("select",{disabled:!y,value:o[C].toString(),onChange:_=>N(C,_.target.value==="true"),className:`w-full px-2 py-1 text-sm border rounded ${y?"border-blue-300":"bg-gray-100"}`,children:[m.jsx("option",{value:"true",children:"True"}),m.jsx("option",{value:"false",children:"False"})]}):typeof I=="number"?m.jsx("input",{type:"number",disabled:!y,value:o[C],onChange:_=>N(C,Number(_.target.value)),className:`w-full px-2 py-1 text-sm border rounded ${y?"border-blue-300":"bg-gray-100"}`}):typeof I=="object"?m.jsx("textarea",{disabled:!0,value:JSON.stringify(I,null,2),className:"w-full px-2 py-1 text-sm border rounded bg-gray-100",rows:3}):m.jsx("input",{type:"text",disabled:!y,value:o[C]||"",onChange:_=>N(C,_.target.value),className:`w-full px-2 py-1 text-sm border rounded ${y?"border-blue-300":"bg-gray-100"}`})};return m.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6 border border-gray-100",children:[m.jsxs("div",{className:"flex justify-between items-center mb-3",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Clip Metadata"}),m.jsx("div",{className:"flex space-x-2",children:s?m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:A,disabled:u,className:"px-3 py-1 bg-blue-600 text-white text-sm font-medium rounded hover:bg-blue-700 transition-colors disabled:bg-blue-300",children:u?"Saving...":"Save"}),m.jsx("button",{onClick:b,disabled:u,className:"px-3 py-1 bg-gray-200 text-gray-800 text-sm font-medium rounded hover:bg-gray-300 transition-colors disabled:bg-gray-100",children:"Cancel"})]}):m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:T,className:"px-3 py-1 bg-gray-100 text-blue-600 hover:bg-gray-200 text-sm font-medium rounded transition-colors",children:"Edit"}),m.jsx("button",{onClick:()=>i(!r),className:"px-3 py-1 text-blue-600 hover:text-blue-800 text-sm font-medium",children:r?"Show Less":"Show All"})]})})]}),p&&m.jsx("div",{className:"mb-3 p-2 bg-green-100 text-green-800 text-sm rounded",children:"Changes saved successfully"}),h&&m.jsx("div",{className:"mb-3 p-2 bg-red-100 text-red-800 text-sm rounded",children:h}),m.jsx("div",{className:"grid grid-cols-2 gap-4",children:["id","documentName","timestamp","keywords"].map(C=>t[C]&&m.jsxs("div",{className:"mb-2",children:[m.jsxs("span",{className:"block text-sm font-medium text-gray-500",children:[C,":"]}),s?V(C,t[C]):m.jsx("span",{className:"block text-sm text-gray-800 break-words",children:typeof t[C]=="object"?JSON.stringify(t[C]):String(t[C])})]},C))}),r&&m.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:m.jsx("div",{className:"grid grid-cols-2 gap-4",children:w.filter(C=>!["id","documentName","timestamp","keywords"].includes(C)).map(C=>m.jsxs("div",{className:"mb-2",children:[m.jsxs("span",{className:"block text-sm font-medium text-gray-500",children:[C,":"]}),s?V(C,t[C]):m.jsx("span",{className:"block text-sm text-gray-800 break-words",children:typeof t[C]=="object"?JSON.stringify(t[C]):String(t[C])})]},C))})})]})},hz=({currentKeyword:t,excludeIds:e=[]})=>{const[r,i]=L.useState([]),[s,a]=L.useState(!0),[o,l]=L.useState(null);L.useEffect(()=>{t&&u(t)},[t,e.toString()]);const u=async h=>{try{a(!0);const f=vv(h);if(f.length===0){i([]),a(!1);return}const p=await Mn(fn(Rt,"interviewSummaries")),g=[];for(const A of p.docs){const b=A.id,x=A.data(),w=x.videoEmbedLink,R=c(w),j=fn(Rt,"interviewSummaries",b,"subSummaries");(await Mn(j)).forEach(C=>{const I=C.data(),y=(I.keywords||"").split(",").map(S=>S.trim().toLowerCase());f.some(S=>y.includes(S))&&!e.includes(C.id)&&g.push({id:C.id,documentId:`${b}_${C.id}`,documentName:b,...I,...x,thumbnailUrl:R,_debug_parentVideoEmbedLink:w})})}const T=g.filter(A=>A.thumbnailUrl).length;console.log(`Found thumbnails for ${T} out of ${g.length} clips`);const N=Array.from(new Map(g.map(A=>[`${A.id}_${A.documentName}`,A])).values());i(N),a(!1)}catch(f){console.error("Error fetching related clips:",f),l("Error loading related clips"),a(!1)}},c=h=>{if(!h)return null;try{let f=co(h);if(!f){if(h.includes("youtube.com/watch"))f=new URL(h).searchParams.get("v");else if(h.includes("youtube.com/embed/")){const p=h.split("youtube.com/embed/");p.length>1&&(f=p[1].split("?")[0])}else if(h.includes("youtu.be/")){const p=h.split("youtu.be/");p.length>1&&(f=p[1].split("?")[0])}else if(h.includes("<iframe")&&h.includes("src=")){const p=h.match(/src=["'](.*?)["']/);if(p&&p[1])return c(p[1])}}if(f)return`https://img.youtube.com/vi/${f}/mqdefault.jpg`;console.log("Could not extract video ID from:",h)}catch(f){console.error("Error extracting video ID for thumbnail:",f,"from link:",h)}return null};return s?m.jsx("div",{className:"py-4",children:m.jsx("div",{className:"flex justify-center items-center",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})})}):o?m.jsx("div",{className:"p-4 bg-red-50 text-red-700 rounded-md",children:o}):r.length===0?null:m.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-sm p-6",children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Related Clips"}),m.jsx("div",{className:"overflow-x-auto pb-4",children:m.jsx("div",{className:"flex space-x-4",style:{minWidth:"min-content"},children:r.map((h,f)=>m.jsxs("div",{className:"flex-shrink-0 w-64 bg-gray-50 rounded-md overflow-hidden shadow-sm",children:[h.thumbnailUrl?m.jsx("div",{className:"relative pb-[56.25%] bg-gray-200",children:m.jsx("img",{src:h.thumbnailUrl,alt:h.name||"Video thumbnail",className:"absolute top-0 left-0 w-full h-full object-cover",onError:p=>{console.log("Thumbnail failed to load:",h.thumbnailUrl),p.target.onerror=null,p.target.style.display="none",p.target.parentElement.innerHTML=`
                        <div class="absolute top-0 left-0 w-full h-full flex items-center justify-center bg-gray-200">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                          </svg>
                        </div>
                      `}})}):m.jsxs("div",{className:"h-36 bg-gray-200 flex flex-col items-center justify-center",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),m.jsx("span",{className:"text-gray-500 text-sm",children:"Video Preview"})]}),m.jsxs("div",{className:"p-3",children:[m.jsx("h4",{className:"font-medium text-gray-900 line-clamp-1",title:h.name,children:h.name||"Unnamed clip"}),m.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-1",title:h.topic||"",children:h.topic||"No topic"}),h.timestamp&&m.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.timestamp})]})]},`${h.documentId||`${h.id}_${h.documentName}`}_${f}`))})})]})},fz=({video:t,onVideoEnd:e,onPlay:r,onPause:i,onTimeUpdate:s,isPlaying:a,seekToTime:o})=>{const l=L.useRef(null),u=L.useRef(null),c=L.useRef(null),[h,f]=L.useState(!1),[p,g]=L.useState(null),T=L.useRef(null),N=()=>{if(!t)return{startSeconds:0,endSeconds:0};try{const{startSeconds:A,endSeconds:b}=Js(t.timestamp),x=Number.isFinite(A)?Math.max(0,A):0,w=Number.isFinite(b)&&b>x?b:x+300;return console.log(`Video boundaries: ${x}s to ${w}s (duration: ${w-x}s)`),{startSeconds:x,endSeconds:w}}catch(A){return console.error("Error parsing timestamp:",A,"Using defaults"),{startSeconds:0,endSeconds:300}}};return L.useEffect(()=>{if(!t||!u.current)return;const A=co(t.videoEmbedLink);if(!A){console.error("Invalid video embed link:",t.videoEmbedLink);return}const{startSeconds:b}=N(),x=()=>{l.current&&l.current.destroy();try{l.current=new window.YT.Player(u.current,{height:"405",width:"720",videoId:A,playerVars:{autoplay:1,controls:0,rel:0,modestbranding:1,start:b,enablejsapi:1},events:{onReady:w=>{console.log("YouTube Player Ready");const R=w.target.getDuration();if(console.log(`Video actual duration: ${R}s`),b>=R&&(console.error(`Invalid timestamp: start time (${b}s) is beyond video duration (${R}s)`),w.target.seekTo(0,!0),t&&t.id&&e)){console.warn(`Skipping invalid clip with ID: ${t.id}`),setTimeout(()=>{e()},500);return}s&&s(0),f(!0),w.target.seekTo(Math.min(b,R-1),!0),a?w.target.playVideo():w.target.pauseVideo()},onStateChange:w=>{const R=w.data;if(g(R),R===window.YT.PlayerState.PLAYING){if(s){const j=w.target.getCurrentTime();Math.max(0,j-b)<1&&s(0)}r&&r()}else R===window.YT.PlayerState.PAUSED?i&&i():R===window.YT.PlayerState.ENDED&&e&&e()},onError:w=>{console.error("YouTube player error:",w.data),e&&(console.warn("Video error detected, skipping to next clip"),setTimeout(()=>{e()},500))}}})}catch(w){console.error("Error creating YouTube player:",w)}};if(window.YT&&window.YT.Player)x();else{const w=document.createElement("script");w.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=x;const R=document.getElementsByTagName("script")[0];R.parentNode.insertBefore(w,R)}return()=>{l.current&&(l.current.destroy(),l.current=null),f(!1)}},[t]),L.useEffect(()=>{if(!(!h||!l.current))try{a?l.current.playVideo():l.current.pauseVideo()}catch(A){console.error("Error controlling player:",A)}},[a,h]),L.useEffect(()=>{if(!(!h||!l.current||o===void 0||o===null)&&T.current!==o)try{const{startSeconds:A}=N(),b=A+o;console.log(`Seeking to ${o}s within clip (absolute: ${b}s)`),l.current.seekTo(b,!0),T.current=o}catch(A){console.error("Error seeking:",A)}},[o,h]),L.useEffect(()=>{if(!h||!l.current)return;const{startSeconds:A,endSeconds:b}=N(),x=b-A;return(()=>{try{if(l.current&&l.current.getCurrentTime){const R=l.current.getCurrentTime(),j=Math.max(0,R-A);s&&j>=0&&s(j)}}catch(R){console.error("Error syncing time immediately:",R)}})(),c.current&&(clearInterval(c.current),c.current=null),a&&(c.current=setInterval(()=>{try{if(!l.current||!l.current.getCurrentTime)return;const R=l.current.getCurrentTime(),j=Math.max(0,R-A);if(l.current.getPlayerState()!==window.YT.PlayerState.PLAYING)return;s&&s(j),j>=x-.5&&(console.log(`Reached end of clip: ${j}s / ${x}s`),e&&(clearInterval(c.current),c.current=null,e()))}catch(R){console.error("Error in time tracking:",R)}},250)),()=>{c.current&&(clearInterval(c.current),c.current=null)}},[a,h,t]),m.jsxs("div",{className:"video-player-wrapper relative",children:[m.jsx("div",{ref:u,className:"rounded-lg shadow-lg bg-black w-full aspect-video"}),!h&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})})]})},pz=()=>{const[t]=Cy(),e=Jr(),[r,i]=L.useState(""),[s,a]=L.useState([]),[o,l]=L.useState(0),[u,c]=L.useState(!0),[h,f]=L.useState(null),[p,g]=L.useState(!0),[T,N]=L.useState(0),[A,b]=L.useState(0),[x,w]=L.useState(0),[R,j]=L.useState(!1),[V,C]=L.useState(null),[I,y]=L.useState([]),[_,S]=L.useState(""),[M,D]=L.useState(""),[K,ee]=L.useState(!1),re=L.useRef(null);L.useEffect(()=>{if(s.length>0){const J=s.reduce((ce,he)=>{const{startSeconds:we,endSeconds:be}=Js(he.timestamp);return ce+(be-we||300)},0);console.log("Calculated total duration:",J),w(J)}},[s]),L.useEffect(()=>{const J=t.get("keywords");J&&(console.log(`Found keyword: ${J}`),i(J))},[t]),L.useEffect(()=>{r&&(console.log(`Searching videos for: ${r}`),ze())},[r]),L.useEffect(()=>{ie()},[]),L.useEffect(()=>{I.length>0&&r&&ne()},[I,r]),L.useEffect(()=>(K&&_&&(re.current&&clearTimeout(re.current),re.current=setTimeout(()=>{console.log(`Navigating to next playlist: ${_}`),e(`?keywords=${encodeURIComponent(_)}`),ee(!1)},3e3)),()=>{re.current&&clearTimeout(re.current)}),[K,_,e]),L.useEffect(()=>{s.length>0&&(N(0),C(null),console.log("Video index changed to:",o))},[o]);const pe=()=>{if(!s.length)return 0;let J=0;for(let ce=0;ce<o;ce++){const{startSeconds:he,endSeconds:we}=Js(s[ce].timestamp);J+=we-he||300}return J},q=J=>{N(J),b(pe()+J)},Y=J=>{console.log(`Seeking to ${J}s within current video`),C(J)},ie=async()=>{try{const J=new Set,ce=await Mn(fn(Rt,"interviewSummaries"));for(const we of ce.docs){const be=we.id,ye=fn(Rt,"interviewSummaries",be,"subSummaries");(await Mn(ye)).forEach(Fn=>{(Fn.data().keywords||"").split(",").map(nr=>nr.trim().toLowerCase()).forEach(nr=>{nr&&J.add(nr)})})}const he=Array.from(J);console.log(`Found ${he.length} total keywords:`,he),y(he)}catch(J){console.error("Error fetching available keywords:",J)}},ne=()=>{if(I.length===0)return;const J=I.filter(we=>we!==r);if(J.length===0)return;const ce=Math.floor(Math.random()*J.length),he=J[ce];console.log(`Selected next keyword: ${he}`),S(he),W(he)},W=async J=>{try{const ce=vv(J);if(ce.length===0)return;const he=await Ye(ce);if(he.length>0){const we=he[0];if(we.videoEmbedLink){const be=co(we.videoEmbedLink);if(be){const ye=`https://img.youtube.com/vi/${be}/mqdefault.jpg`;D(ye);return}}}D("")}catch(ce){console.error("Error fetching thumbnail:",ce),D("")}},H=()=>{_&&e(`?keywords=${encodeURIComponent(_)}`)},Q=()=>{j(!0)},X=()=>{j(!1),ze()},de=()=>{j(!1)},ve=J=>{a(ce=>{const he=[...ce];return he[o]={...he[o],...J},he})},Oe=J=>J.sort(()=>Math.random()-.5),Ne=async J=>new Promise(ce=>{try{const he=document.createElement("div");he.style.position="absolute",he.style.left="-9999px",he.style.top="-9999px",document.body.appendChild(he);const we=new window.YT.Player(he,{height:"1",width:"1",videoId:J,events:{onReady:be=>{try{const ye=be.target.getDuration();console.log(`Got duration for video ${J}: ${ye}s`),ce(ye)}catch(ye){console.error(`Error getting duration for ${J}:`,ye),ce(0)}finally{if(we)try{we.destroy()}catch(ye){console.error("Error destroying temp player:",ye)}he.parentNode&&document.body.removeChild(he)}},onError:()=>{console.error(`Could not load video ${J} for duration check`),he.parentNode&&document.body.removeChild(he),ce(0)}}});setTimeout(()=>{if(we)try{we.destroy()}catch(be){console.error("Error destroying temp player on timeout:",be)}he.parentNode&&document.body.removeChild(he),ce(0)},1e4)}catch(he){console.error("Error in duration check:",he),ce(0)}}),Ge=async J=>{try{const ce=co(J.videoEmbedLink);if(!ce)return!1;const{startSeconds:he}=Js(J.timestamp);if(isNaN(he)||he<0)return!1;if(!window.YT||!window.YT.Player)return console.warn("YouTube API not loaded yet, can't validate duration"),!0;const we=await Ne(ce),be=we>0&&he<we-5;return be||console.warn(`Invalid timestamp detected: ${J.timestamp} exceeds video duration ${we}s for video ID ${ce}`),be}catch(ce){return console.error("Error validating video timestamp:",ce),!1}},ze=async()=>{try{c(!0);const J=vv(r);if(J.length===0){f("Please enter at least one keyword"),c(!1);return}let ce=await Ye(J);if(ce.length>0){ce=ce.filter(be=>{try{const{startSeconds:ye,endSeconds:He}=Js(be.timestamp);return isNaN(ye)||ye<0?(console.warn(`Filtering out video with invalid start time: ${be.id}, ${be.timestamp}`),!1):He&&He<=ye?(console.warn(`Filtering out video with invalid time range: ${be.id}, ${be.timestamp}`),!1):!0}catch{return console.warn(`Filtering out video with unparseable timestamp: ${be.id}, ${be.timestamp}`),!1}});const he=Oe(ce).slice(0,Math.min(10,ce.length));console.log(`Checking durations for ${he.length} candidate videos...`),(!window.YT||!window.YT.Player)&&(console.log("Loading YouTube API..."),await new Promise(be=>{const ye=document.createElement("script");ye.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=()=>{console.log("YouTube API ready"),be()};const He=document.getElementsByTagName("script")[0];He.parentNode.insertBefore(ye,He),setTimeout(be,5e3)}));const we=[];for(const be of he){if(we.length>=3)break;await Ge(be)&&we.push(be)}we.length>0?(console.log(`Selected ${we.length} valid videos from ${he.length} candidates`),a(we),l(0),g(!0),N(0),b(0),ee(!1)):f("No videos with valid timestamps found for this keyword")}else f("No videos found for this keyword");c(!1)}catch(J){console.error("Error searching videos:",J),f("Error searching videos"),c(!1)}},Ye=async J=>{const ce=await Mn(fn(Rt,"interviewSummaries")),he=[];for(const we of ce.docs){const be=we.id,ye=we.data(),He=ye.videoEmbedLink,Fn=He?`https://img.youtube.com/vi/${co(He)}/mqdefault.jpg`:null,Dr=fn(Rt,"interviewSummaries",be,"subSummaries");(await Mn(Dr)).forEach(nr=>{const Un=nr.data(),Zr=(Un.keywords||"").split(",").map(In=>In.trim().toLowerCase());J.some(In=>Zr.includes(In))&&he.push({id:nr.id,documentName:be,...Un,...ye,thumbnailUrl:Fn})})}return he},Xe=()=>{o<s.length-1&&(l(o+1),g(!0))},Qe=()=>{o>0&&(l(o-1),g(!0))},rt=()=>{console.log(`Video end triggered for index ${o}/${s.length-1}`),setTimeout(()=>{o<s.length-1?(console.log(`Advancing to next video: ${o+1}`),l(o+1)):(console.log("Playlist ended, preparing to play next keyword"),ee(!0))},500)},P=()=>{g(!0)},F=()=>{g(!1)},U=()=>!s.length||o>=s.length?null:s[o];if(u)return m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(h)return m.jsx("div",{className:"max-w-7xl mx-auto p-4",children:m.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:m.jsx("p",{children:h})})});const z=U(),oe=s.length>0;return m.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Keyword Playlist"}),m.jsx("div",{className:"flex items-center",children:m.jsx("span",{className:"bg-blue-100 text-blue-800 text-sm font-semibold px-3 py-1 rounded-md",children:r})})]}),m.jsxs("div",{className:"relative",children:[_&&m.jsx("div",{className:"absolute top-0 right-0 z-10",children:m.jsx(lz,{nextKeyword:_,thumbnailUrl:M,onPlay:H})}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[m.jsx("div",{className:"w-full max-w-2xl mx-auto relative rounded-lg overflow-hidden",children:z?m.jsx(fz,{video:z,onVideoEnd:rt,onPlay:P,onPause:F,onTimeUpdate:q,isPlaying:p,seekToTime:V}):m.jsx("div",{className:"flex items-center justify-center w-full h-64 bg-gray-200 rounded-lg text-gray-600 font-medium",children:"No videos available"})}),oe&&m.jsx("div",{className:"mt-6 mb-4 w-full max-w-2xl mx-auto",children:m.jsx(az,{videoQueue:s,currentVideoIndex:o,setCurrentVideoIndex:l,currentTime:T,totalDuration:x,onSeek:Y})}),m.jsxs("div",{className:"w-full max-w-2xl mx-auto flex justify-center items-center py-3 mt-5",children:[m.jsx(oz,{onPrevious:Qe,onPlay:P,onPause:F,onNext:Xe,isPlaying:p,hasPrevious:o>0,hasNext:o<s.length-1}),m.jsx("div",{className:"ml-4",children:m.jsx(uz,{onClick:Q})})]})]}),z&&m.jsx(dz,{metadata:z,onMetadataUpdate:ve}),z&&m.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:z.name}),m.jsx("p",{className:"text-sm italic text-gray-500 mb-4",children:z.role}),m.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:m.jsx("p",{className:"m-0 text-base leading-relaxed text-gray-700",children:z.summary})})]})]}),r&&s.length>0&&m.jsx(hz,{currentKeyword:r,excludeIds:s.map(J=>J.id)}),m.jsx(cz,{isOpen:R,onConfirm:X,onCancel:de,message:"Are you sure you want to hear a new set of clips on this topic?"})]})};function yv(t,e){return yv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},yv(t,e)}function fA(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,yv(t,e)}function Ie(){return Ie=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ie.apply(null,arguments)}function ju(t){"@babel/helpers - typeof";return ju=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ju(t)}function mz(t,e){if(ju(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(ju(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gz(t){var e=mz(t,"string");return ju(e)=="symbol"?e:e+""}function vz(t,e,r){return(e=gz(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function EE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xE(Object(r),!0).forEach(function(i){vz(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xE(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function An(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var TE=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),SE=function(){return Math.random().toString(36).substring(7).split("").join(".")},IE={INIT:"@@redux/INIT"+SE(),REPLACE:"@@redux/REPLACE"+SE()};function yz(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function pA(t,e,r){var i;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(An(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(An(1));return r(pA)(t,e)}if(typeof t!="function")throw new Error(An(2));var s=t,a=e,o=[],l=o,u=!1;function c(){l===o&&(l=o.slice())}function h(){if(u)throw new Error(An(3));return a}function f(N){if(typeof N!="function")throw new Error(An(4));if(u)throw new Error(An(5));var A=!0;return c(),l.push(N),function(){if(A){if(u)throw new Error(An(6));A=!1,c();var x=l.indexOf(N);l.splice(x,1),o=null}}}function p(N){if(!yz(N))throw new Error(An(7));if(typeof N.type>"u")throw new Error(An(8));if(u)throw new Error(An(9));try{u=!0,a=s(a,N)}finally{u=!1}for(var A=o=l,b=0;b<A.length;b++){var x=A[b];x()}return N}function g(N){if(typeof N!="function")throw new Error(An(10));s=N,p({type:IE.REPLACE})}function T(){var N,A=f;return N={subscribe:function(x){if(typeof x!="object"||x===null)throw new Error(An(11));function w(){x.next&&x.next(h())}w();var R=A(w);return{unsubscribe:R}}},N[TE]=function(){return this},N}return p({type:IE.INIT}),i={dispatch:p,subscribe:f,getState:h,replaceReducer:g},i[TE]=T,i}function kE(t,e){return function(){return e(t.apply(this,arguments))}}function CE(t,e){if(typeof t=="function")return kE(t,e);if(typeof t!="object"||t===null)throw new Error(An(16));var r={};for(var i in t){var s=t[i];typeof s=="function"&&(r[i]=kE(s,e))}return r}function mA(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(i){return i}:e.length===1?e[0]:e.reduce(function(i,s){return function(){return i(s.apply(void 0,arguments))}})}function _z(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(i){return function(){var s=i.apply(void 0,arguments),a=function(){throw new Error(An(15))},o={getState:s.getState,dispatch:function(){return a.apply(void 0,arguments)}},l=e.map(function(u){return u(o)});return a=mA.apply(void 0,l)(s.dispatch),EE(EE({},s),{},{dispatch:a})}}}var gA=De.createContext(null);function wz(t){t()}var vA=wz,bz=function(e){return vA=e},xz=function(){return vA};function Ez(){var t=xz(),e=null,r=null;return{clear:function(){e=null,r=null},notify:function(){t(function(){for(var s=e;s;)s.callback(),s=s.next})},get:function(){for(var s=[],a=e;a;)s.push(a),a=a.next;return s},subscribe:function(s){var a=!0,o=r={callback:s,next:null,prev:r};return o.prev?o.prev.next=o:e=o,function(){!a||e===null||(a=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var AE={notify:function(){},get:function(){return[]}};function yA(t,e){var r,i=AE;function s(f){return u(),i.subscribe(f)}function a(){i.notify()}function o(){h.onStateChange&&h.onStateChange()}function l(){return!!r}function u(){r||(r=e?e.addNestedSub(o):t.subscribe(o),i=Ez())}function c(){r&&(r(),r=void 0,i.clear(),i=AE)}var h={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:o,isSubscribed:l,trySubscribe:u,tryUnsubscribe:c,getListeners:function(){return i}};return h}var _A=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?L.useLayoutEffect:L.useEffect;function Tz(t){var e=t.store,r=t.context,i=t.children,s=L.useMemo(function(){var l=yA(e);return{store:e,subscription:l}},[e]),a=L.useMemo(function(){return e.getState()},[e]);_A(function(){var l=s.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[s,a]);var o=r||gA;return De.createElement(o.Provider,{value:s},i)}function zh(t,e){if(t==null)return{};var r={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;r[i]=t[i]}return r}var wA={exports:{}},tt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ht=typeof Symbol=="function"&&Symbol.for,E_=Ht?Symbol.for("react.element"):60103,T_=Ht?Symbol.for("react.portal"):60106,Kf=Ht?Symbol.for("react.fragment"):60107,Yf=Ht?Symbol.for("react.strict_mode"):60108,Xf=Ht?Symbol.for("react.profiler"):60114,Qf=Ht?Symbol.for("react.provider"):60109,Jf=Ht?Symbol.for("react.context"):60110,S_=Ht?Symbol.for("react.async_mode"):60111,Zf=Ht?Symbol.for("react.concurrent_mode"):60111,ep=Ht?Symbol.for("react.forward_ref"):60112,tp=Ht?Symbol.for("react.suspense"):60113,Sz=Ht?Symbol.for("react.suspense_list"):60120,np=Ht?Symbol.for("react.memo"):60115,rp=Ht?Symbol.for("react.lazy"):60116,Iz=Ht?Symbol.for("react.block"):60121,kz=Ht?Symbol.for("react.fundamental"):60117,Cz=Ht?Symbol.for("react.responder"):60118,Az=Ht?Symbol.for("react.scope"):60119;function tr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case E_:switch(t=t.type,t){case S_:case Zf:case Kf:case Xf:case Yf:case tp:return t;default:switch(t=t&&t.$$typeof,t){case Jf:case ep:case rp:case np:case Qf:return t;default:return e}}case T_:return e}}}function bA(t){return tr(t)===Zf}tt.AsyncMode=S_;tt.ConcurrentMode=Zf;tt.ContextConsumer=Jf;tt.ContextProvider=Qf;tt.Element=E_;tt.ForwardRef=ep;tt.Fragment=Kf;tt.Lazy=rp;tt.Memo=np;tt.Portal=T_;tt.Profiler=Xf;tt.StrictMode=Yf;tt.Suspense=tp;tt.isAsyncMode=function(t){return bA(t)||tr(t)===S_};tt.isConcurrentMode=bA;tt.isContextConsumer=function(t){return tr(t)===Jf};tt.isContextProvider=function(t){return tr(t)===Qf};tt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===E_};tt.isForwardRef=function(t){return tr(t)===ep};tt.isFragment=function(t){return tr(t)===Kf};tt.isLazy=function(t){return tr(t)===rp};tt.isMemo=function(t){return tr(t)===np};tt.isPortal=function(t){return tr(t)===T_};tt.isProfiler=function(t){return tr(t)===Xf};tt.isStrictMode=function(t){return tr(t)===Yf};tt.isSuspense=function(t){return tr(t)===tp};tt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Kf||t===Zf||t===Xf||t===Yf||t===tp||t===Sz||typeof t=="object"&&t!==null&&(t.$$typeof===rp||t.$$typeof===np||t.$$typeof===Qf||t.$$typeof===Jf||t.$$typeof===ep||t.$$typeof===kz||t.$$typeof===Cz||t.$$typeof===Az||t.$$typeof===Iz)};tt.typeOf=tr;wA.exports=tt;var Pz=wA.exports,I_=Pz,Rz={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Nz={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Dz={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},xA={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},k_={};k_[I_.ForwardRef]=Dz;k_[I_.Memo]=xA;function PE(t){return I_.isMemo(t)?xA:k_[t.$$typeof]||Rz}var Mz=Object.defineProperty,Lz=Object.getOwnPropertyNames,RE=Object.getOwnPropertySymbols,Oz=Object.getOwnPropertyDescriptor,jz=Object.getPrototypeOf,NE=Object.prototype;function EA(t,e,r){if(typeof e!="string"){if(NE){var i=jz(e);i&&i!==NE&&EA(t,i,r)}var s=Lz(e);RE&&(s=s.concat(RE(e)));for(var a=PE(t),o=PE(e),l=0;l<s.length;++l){var u=s[l];if(!Nz[u]&&!(r&&r[u])&&!(o&&o[u])&&!(a&&a[u])){var c=Oz(e,u);try{Mz(t,u,c)}catch{}}}}return t}var Vz=EA;const DE=Oo(Vz);var TA={exports:{}},at={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ip=60103,sp=60106,dc=60107,hc=60108,fc=60114,pc=60109,mc=60110,gc=60112,vc=60113,C_=60120,yc=60115,_c=60116,SA=60121,IA=60122,kA=60117,CA=60129,AA=60131;if(typeof Symbol=="function"&&Symbol.for){var Gt=Symbol.for;ip=Gt("react.element"),sp=Gt("react.portal"),dc=Gt("react.fragment"),hc=Gt("react.strict_mode"),fc=Gt("react.profiler"),pc=Gt("react.provider"),mc=Gt("react.context"),gc=Gt("react.forward_ref"),vc=Gt("react.suspense"),C_=Gt("react.suspense_list"),yc=Gt("react.memo"),_c=Gt("react.lazy"),SA=Gt("react.block"),IA=Gt("react.server.block"),kA=Gt("react.fundamental"),CA=Gt("react.debug_trace_mode"),AA=Gt("react.legacy_hidden")}function Nr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case ip:switch(t=t.type,t){case dc:case fc:case hc:case vc:case C_:return t;default:switch(t=t&&t.$$typeof,t){case mc:case gc:case _c:case yc:case pc:return t;default:return e}}case sp:return e}}}var Fz=pc,Uz=ip,Bz=gc,$z=dc,zz=_c,Hz=yc,Wz=sp,qz=fc,Gz=hc,Kz=vc;at.ContextConsumer=mc;at.ContextProvider=Fz;at.Element=Uz;at.ForwardRef=Bz;at.Fragment=$z;at.Lazy=zz;at.Memo=Hz;at.Portal=Wz;at.Profiler=qz;at.StrictMode=Gz;at.Suspense=Kz;at.isAsyncMode=function(){return!1};at.isConcurrentMode=function(){return!1};at.isContextConsumer=function(t){return Nr(t)===mc};at.isContextProvider=function(t){return Nr(t)===pc};at.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===ip};at.isForwardRef=function(t){return Nr(t)===gc};at.isFragment=function(t){return Nr(t)===dc};at.isLazy=function(t){return Nr(t)===_c};at.isMemo=function(t){return Nr(t)===yc};at.isPortal=function(t){return Nr(t)===sp};at.isProfiler=function(t){return Nr(t)===fc};at.isStrictMode=function(t){return Nr(t)===hc};at.isSuspense=function(t){return Nr(t)===vc};at.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===dc||t===fc||t===CA||t===hc||t===vc||t===C_||t===AA||typeof t=="object"&&t!==null&&(t.$$typeof===_c||t.$$typeof===yc||t.$$typeof===pc||t.$$typeof===mc||t.$$typeof===gc||t.$$typeof===kA||t.$$typeof===SA||t[0]===IA)};at.typeOf=Nr;TA.exports=at;var Yz=TA.exports,Xz=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Qz=["reactReduxForwardedRef"],Jz=[],Zz=[null,null];function e9(t,e){var r=t[1];return[e.payload,r+1]}function ME(t,e,r){_A(function(){return t.apply(void 0,e)},r)}function t9(t,e,r,i,s,a,o){t.current=i,e.current=s,r.current=!1,a.current&&(a.current=null,o())}function n9(t,e,r,i,s,a,o,l,u,c){if(t){var h=!1,f=null,p=function(){if(!h){var N=e.getState(),A,b;try{A=i(N,s.current)}catch(x){b=x,f=x}b||(f=null),A===a.current?o.current||u():(a.current=A,l.current=A,o.current=!0,c({type:"STORE_UPDATED",payload:{error:b}}))}};r.onStateChange=p,r.trySubscribe(),p();var g=function(){if(h=!0,r.tryUnsubscribe(),r.onStateChange=null,f)throw f};return g}}var r9=function(){return[null,0]};function i9(t,e){e===void 0&&(e={});var r=e,i=r.getDisplayName,s=i===void 0?function(w){return"ConnectAdvanced("+w+")"}:i,a=r.methodName,o=a===void 0?"connectAdvanced":a,l=r.renderCountProp,u=l===void 0?void 0:l,c=r.shouldHandleStateChanges,h=c===void 0?!0:c,f=r.storeKey,p=f===void 0?"store":f;r.withRef;var g=r.forwardRef,T=g===void 0?!1:g,N=r.context,A=N===void 0?gA:N,b=zh(r,Xz),x=A;return function(R){var j=R.displayName||R.name||"Component",V=s(j),C=Ie({},b,{getDisplayName:s,methodName:o,renderCountProp:u,shouldHandleStateChanges:h,storeKey:p,displayName:V,wrappedComponentName:j,WrappedComponent:R}),I=b.pure;function y(K){return t(K.dispatch,C)}var _=I?L.useMemo:function(K){return K()};function S(K){var ee=L.useMemo(function(){var z=K.reactReduxForwardedRef,oe=zh(K,Qz);return[K.context,z,oe]},[K]),re=ee[0],pe=ee[1],q=ee[2],Y=L.useMemo(function(){return re&&re.Consumer&&Yz.isContextConsumer(De.createElement(re.Consumer,null))?re:x},[re,x]),ie=L.useContext(Y),ne=!!K.store&&!!K.store.getState&&!!K.store.dispatch;ie&&ie.store;var W=ne?K.store:ie.store,H=L.useMemo(function(){return y(W)},[W]),Q=L.useMemo(function(){if(!h)return Zz;var z=yA(W,ne?null:ie.subscription),oe=z.notifyNestedSubs.bind(z);return[z,oe]},[W,ne,ie]),X=Q[0],de=Q[1],ve=L.useMemo(function(){return ne?ie:Ie({},ie,{subscription:X})},[ne,ie,X]),Oe=L.useReducer(e9,Jz,r9),Ne=Oe[0],Ge=Ne[0],ze=Oe[1];if(Ge&&Ge.error)throw Ge.error;var Ye=L.useRef(),Xe=L.useRef(q),Qe=L.useRef(),rt=L.useRef(!1),P=_(function(){return Qe.current&&q===Xe.current?Qe.current:H(W.getState(),q)},[W,Ge,q]);ME(t9,[Xe,Ye,rt,q,P,Qe,de]),ME(n9,[h,W,X,H,Xe,Ye,rt,Qe,de,ze],[W,X,H]);var F=L.useMemo(function(){return De.createElement(R,Ie({},P,{ref:pe}))},[pe,R,P]),U=L.useMemo(function(){return h?De.createElement(Y.Provider,{value:ve},F):F},[Y,F,ve]);return U}var M=I?De.memo(S):S;if(M.WrappedComponent=R,M.displayName=S.displayName=V,T){var D=De.forwardRef(function(ee,re){return De.createElement(M,Ie({},ee,{reactReduxForwardedRef:re}))});return D.displayName=V,D.WrappedComponent=R,DE(D,R)}return DE(M,R)}}function LE(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Tm(t,e){if(LE(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(e,r[s])||!LE(t[r[s]],e[r[s]]))return!1;return!0}function s9(t,e){var r={},i=function(o){var l=t[o];typeof l=="function"&&(r[o]=function(){return e(l.apply(void 0,arguments))})};for(var s in t)i(s);return r}function A_(t){return function(r,i){var s=t(r,i);function a(){return s}return a.dependsOnOwnProps=!1,a}}function OE(t){return t.dependsOnOwnProps!==null&&t.dependsOnOwnProps!==void 0?!!t.dependsOnOwnProps:t.length!==1}function PA(t,e){return function(i,s){s.displayName;var a=function(l,u){return a.dependsOnOwnProps?a.mapToProps(l,u):a.mapToProps(l)};return a.dependsOnOwnProps=!0,a.mapToProps=function(l,u){a.mapToProps=t,a.dependsOnOwnProps=OE(t);var c=a(l,u);return typeof c=="function"&&(a.mapToProps=c,a.dependsOnOwnProps=OE(c),c=a(l,u)),c},a}}function a9(t){return typeof t=="function"?PA(t):void 0}function o9(t){return t?void 0:A_(function(e){return{dispatch:e}})}function l9(t){return t&&typeof t=="object"?A_(function(e){return s9(t,e)}):void 0}const u9=[a9,o9,l9];function c9(t){return typeof t=="function"?PA(t):void 0}function d9(t){return t?void 0:A_(function(){return{}})}const h9=[c9,d9];function f9(t,e,r){return Ie({},r,t,e)}function p9(t){return function(r,i){i.displayName;var s=i.pure,a=i.areMergedPropsEqual,o=!1,l;return function(c,h,f){var p=t(c,h,f);return o?(!s||!a(p,l))&&(l=p):(o=!0,l=p),l}}}function m9(t){return typeof t=="function"?p9(t):void 0}function g9(t){return t?void 0:function(){return f9}}const v9=[m9,g9];var y9=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function _9(t,e,r,i){return function(a,o){return r(t(a,o),e(i,o),o)}}function w9(t,e,r,i,s){var a=s.areStatesEqual,o=s.areOwnPropsEqual,l=s.areStatePropsEqual,u=!1,c,h,f,p,g;function T(w,R){return c=w,h=R,f=t(c,h),p=e(i,h),g=r(f,p,h),u=!0,g}function N(){return f=t(c,h),e.dependsOnOwnProps&&(p=e(i,h)),g=r(f,p,h),g}function A(){return t.dependsOnOwnProps&&(f=t(c,h)),e.dependsOnOwnProps&&(p=e(i,h)),g=r(f,p,h),g}function b(){var w=t(c,h),R=!l(w,f);return f=w,R&&(g=r(f,p,h)),g}function x(w,R){var j=!o(R,h),V=!a(w,c,R,h);return c=w,h=R,j&&V?N():j?A():V?b():g}return function(R,j){return u?x(R,j):T(R,j)}}function b9(t,e){var r=e.initMapStateToProps,i=e.initMapDispatchToProps,s=e.initMergeProps,a=zh(e,y9),o=r(t,a),l=i(t,a),u=s(t,a),c=a.pure?w9:_9;return c(o,l,u,t,a)}var x9=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Sm(t,e,r){for(var i=e.length-1;i>=0;i--){var s=e[i](t);if(s)return s}return function(a,o){throw new Error("Invalid value of type "+typeof t+" for "+r+" argument when connecting component "+o.wrappedComponentName+".")}}function E9(t,e){return t===e}function T9(t){var e=t===void 0?{}:t,r=e.connectHOC,i=r===void 0?i9:r,s=e.mapStateToPropsFactories,a=s===void 0?h9:s,o=e.mapDispatchToPropsFactories,l=o===void 0?u9:o,u=e.mergePropsFactories,c=u===void 0?v9:u,h=e.selectorFactory,f=h===void 0?b9:h;return function(g,T,N,A){A===void 0&&(A={});var b=A,x=b.pure,w=x===void 0?!0:x,R=b.areStatesEqual,j=R===void 0?E9:R,V=b.areOwnPropsEqual,C=V===void 0?Tm:V,I=b.areStatePropsEqual,y=I===void 0?Tm:I,_=b.areMergedPropsEqual,S=_===void 0?Tm:_,M=zh(b,x9),D=Sm(g,a,"mapStateToProps"),K=Sm(T,l,"mapDispatchToProps"),ee=Sm(N,c,"mergeProps");return i(f,Ie({methodName:"connect",getDisplayName:function(pe){return"Connect("+pe+")"},shouldHandleStateChanges:!!g,initMapStateToProps:D,initMapDispatchToProps:K,initMergeProps:ee,pure:w,areStatesEqual:j,areOwnPropsEqual:C,areStatePropsEqual:y,areMergedPropsEqual:S},M))}}const RA=T9();bz(_y.unstable_batchedUpdates);function S9(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function NA(t,e){var r=L.useState(function(){return{inputs:e,result:t()}})[0],i=L.useRef(!0),s=L.useRef(r),a=i.current||!!(e&&s.current.inputs&&S9(e,s.current.inputs)),o=a?s.current:{inputs:e,result:t()};return L.useEffect(function(){i.current=!1,s.current=o},[o]),o.result}function I9(t,e){return NA(function(){return t},e)}var We=NA,Te=I9,k9="Invariant failed";function C9(t,e){throw new Error(k9)}var Ir=function(e){var r=e.top,i=e.right,s=e.bottom,a=e.left,o=i-a,l=s-r,u={top:r,right:i,bottom:s,left:a,width:o,height:l,x:a,y:r,center:{x:(i+a)/2,y:(s+r)/2}};return u},P_=function(e,r){return{top:e.top-r.top,left:e.left-r.left,bottom:e.bottom+r.bottom,right:e.right+r.right}},jE=function(e,r){return{top:e.top+r.top,left:e.left+r.left,bottom:e.bottom-r.bottom,right:e.right-r.right}},A9=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},Im={top:0,right:0,bottom:0,left:0},R_=function(e){var r=e.borderBox,i=e.margin,s=i===void 0?Im:i,a=e.border,o=a===void 0?Im:a,l=e.padding,u=l===void 0?Im:l,c=Ir(P_(r,s)),h=Ir(jE(r,o)),f=Ir(jE(h,u));return{marginBox:c,borderBox:Ir(r),paddingBox:h,contentBox:f,margin:s,border:o,padding:u}},rr=function(e){var r=e.slice(0,-2),i=e.slice(-2);if(i!=="px")return 0;var s=Number(r);return isNaN(s)&&C9(),s},P9=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Hh=function(e,r){var i=e.borderBox,s=e.border,a=e.margin,o=e.padding,l=A9(i,r);return R_({borderBox:l,border:s,margin:a,padding:o})},Wh=function(e,r){return r===void 0&&(r=P9()),Hh(e,r)},DA=function(e,r){var i={top:rr(r.marginTop),right:rr(r.marginRight),bottom:rr(r.marginBottom),left:rr(r.marginLeft)},s={top:rr(r.paddingTop),right:rr(r.paddingRight),bottom:rr(r.paddingBottom),left:rr(r.paddingLeft)},a={top:rr(r.borderTopWidth),right:rr(r.borderRightWidth),bottom:rr(r.borderBottomWidth),left:rr(r.borderLeftWidth)};return R_({borderBox:e,margin:i,padding:s,border:a})},MA=function(e){var r=e.getBoundingClientRect(),i=window.getComputedStyle(e);return DA(r,i)},VE=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function R9(t,e){return!!(t===e||VE(t)&&VE(e))}function N9(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!R9(t[r],e[r]))return!1;return!0}function $t(t,e){e===void 0&&(e=N9);var r,i=[],s,a=!1;function o(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return a&&r===this&&e(l,i)||(s=t.apply(this,l),a=!0,r=this,i=l),s}return o}var Vu=function(e){var r=[],i=null,s=function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];r=l,!i&&(i=requestAnimationFrame(function(){i=null,e.apply(void 0,r)}))};return s.cancel=function(){i&&(cancelAnimationFrame(i),i=null)},s};function LA(t,e){}LA.bind(null,"warn");LA.bind(null,"error");function cs(){}function D9(t,e){return Ie({},t,{},e)}function lr(t,e,r){var i=e.map(function(s){var a=D9(r,s.options);return t.addEventListener(s.eventName,s.fn,a),function(){t.removeEventListener(s.eventName,s.fn,a)}});return function(){i.forEach(function(a){a()})}}var M9="Invariant failed";function qh(t){this.message=t}qh.prototype.toString=function(){return this.message};function le(t,e){throw new qh(M9)}var L9=function(t){fA(e,t);function e(){for(var i,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return i=t.call.apply(t,[this].concat(a))||this,i.callbacks=null,i.unbind=cs,i.onWindowError=function(l){var u=i.getCallbacks();u.isDragging()&&u.tryAbort();var c=l.error;c instanceof qh&&l.preventDefault()},i.getCallbacks=function(){if(!i.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return i.callbacks},i.setCallbacks=function(l){i.callbacks=l},i}var r=e.prototype;return r.componentDidMount=function(){this.unbind=lr(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(s){if(s instanceof qh){this.setState({});return}throw s},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},e}(De.Component),O9=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Gh=function(e){return e+1},j9=function(e){return`
  You have lifted an item in position `+Gh(e.source.index)+`
`},OA=function(e,r){var i=e.droppableId===r.droppableId,s=Gh(e.index),a=Gh(r.index);return i?`
      You have moved the item from position `+s+`
      to position `+a+`
    `:`
    You have moved the item from position `+s+`
    in list `+e.droppableId+`
    to list `+r.droppableId+`
    in position `+a+`
  `},jA=function(e,r,i){var s=r.droppableId===i.droppableId;return s?`
      The item `+e+`
      has been combined with `+i.draggableId:`
      The item `+e+`
      in list `+r.droppableId+`
      has been combined with `+i.draggableId+`
      in list `+i.droppableId+`
    `},V9=function(e){var r=e.destination;if(r)return OA(e.source,r);var i=e.combine;return i?jA(e.draggableId,e.source,i):"You are over an area that cannot be dropped on"},FE=function(e){return`
  The item has returned to its starting position
  of `+Gh(e.index)+`
`},F9=function(e){if(e.reason==="CANCEL")return`
      Movement cancelled.
      `+FE(e.source)+`
    `;var r=e.destination,i=e.combine;return r?`
      You have dropped the item.
      `+OA(e.source,r)+`
    `:i?`
      You have dropped the item.
      `+jA(e.draggableId,e.source,i)+`
    `:`
    The item has been dropped while not over a drop area.
    `+FE(e.source)+`
  `},Wd={dragHandleUsageInstructions:O9,onDragStart:j9,onDragUpdate:V9,onDragEnd:F9},zt={x:0,y:0},Qt=function(e,r){return{x:e.x+r.x,y:e.y+r.y}},qn=function(e,r){return{x:e.x-r.x,y:e.y-r.y}},ds=function(e,r){return e.x===r.x&&e.y===r.y},Qo=function(e){return{x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}},ha=function(e,r,i){var s;return i===void 0&&(i=0),s={},s[e]=r,s[e==="x"?"y":"x"]=i,s},Fu=function(e,r){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))},UE=function(e,r){return Math.min.apply(Math,r.map(function(i){return Fu(e,i)}))},VA=function(e){return function(r){return{x:e(r.x),y:e(r.y)}}},U9=function(t,e){var r=Ir({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return r.width<=0||r.height<=0?null:r},wc=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},BE=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},B9={top:0,right:0,bottom:0,left:0},$9=function(e,r){return r?wc(e,r.scroll.diff.displacement):e},z9=function(e,r,i){if(i&&i.increasedBy){var s;return Ie({},e,(s={},s[r.end]=e[r.end]+i.increasedBy[r.line],s))}return e},H9=function(e,r){return r&&r.shouldClipSubject?U9(r.pageMarginBox,e):Ir(e)},Do=function(t){var e=t.page,r=t.withPlaceholder,i=t.axis,s=t.frame,a=$9(e.marginBox,s),o=z9(a,i,r),l=H9(o,s);return{page:e,withPlaceholder:r,active:l}},N_=function(t,e){t.frame||le();var r=t.frame,i=qn(e,r.scroll.initial),s=Qo(i),a=Ie({},r,{scroll:{initial:r.scroll.initial,current:e,diff:{value:i,displacement:s},max:r.scroll.max}}),o=Do({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:a}),l=Ie({},t,{frame:a,subject:o});return l};function Kh(t){return Object.values?Object.values(t):Object.keys(t).map(function(e){return t[e]})}function D_(t,e){if(t.findIndex)return t.findIndex(e);for(var r=0;r<t.length;r++)if(e(t[r]))return r;return-1}function As(t,e){if(t.find)return t.find(e);var r=D_(t,e);if(r!==-1)return t[r]}function FA(t){return Array.prototype.slice.call(t)}var UA=$t(function(t){return t.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),BA=$t(function(t){return t.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),ap=$t(function(t){return Kh(t)}),W9=$t(function(t){return Kh(t)}),Jo=$t(function(t,e){var r=W9(e).filter(function(i){return t===i.descriptor.droppableId}).sort(function(i,s){return i.descriptor.index-s.descriptor.index});return r});function M_(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function op(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var lp=$t(function(t,e){return e.filter(function(r){return r.descriptor.id!==t.descriptor.id})}),q9=function(t){var e=t.isMovingForward,r=t.draggable,i=t.destination,s=t.insideDestination,a=t.previousImpact;if(!i.isCombineEnabled)return null;var o=M_(a);if(!o)return null;function l(N){var A={type:"COMBINE",combine:{draggableId:N,droppableId:i.descriptor.id}};return Ie({},a,{at:A})}var u=a.displaced.all,c=u.length?u[0]:null;if(e)return c?l(c):null;var h=lp(r,s);if(!c){if(!h.length)return null;var f=h[h.length-1];return l(f.descriptor.id)}var p=D_(h,function(N){return N.descriptor.id===c});p===-1&&le();var g=p-1;if(g<0)return null;var T=h[g];return l(T.descriptor.id)},Zo=function(t,e){return t.descriptor.droppableId===e.descriptor.id},$A={point:zt,value:0},Uu={invisible:{},visible:{},all:[]},G9={displaced:Uu,displacedBy:$A,at:null},dr=function(t,e){return function(r){return t<=r&&r<=e}},zA=function(t){var e=dr(t.top,t.bottom),r=dr(t.left,t.right);return function(i){var s=e(i.top)&&e(i.bottom)&&r(i.left)&&r(i.right);if(s)return!0;var a=e(i.top)||e(i.bottom),o=r(i.left)||r(i.right),l=a&&o;if(l)return!0;var u=i.top<t.top&&i.bottom>t.bottom,c=i.left<t.left&&i.right>t.right,h=u&&c;if(h)return!0;var f=u&&o||c&&a;return f}},K9=function(t){var e=dr(t.top,t.bottom),r=dr(t.left,t.right);return function(i){var s=e(i.top)&&e(i.bottom)&&r(i.left)&&r(i.right);return s}},L_={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},HA={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Y9=function(t){return function(e){var r=dr(e.top,e.bottom),i=dr(e.left,e.right);return function(s){return t===L_?r(s.top)&&r(s.bottom):i(s.left)&&i(s.right)}}},X9=function(e,r){var i=r.frame?r.frame.scroll.diff.displacement:zt;return wc(e,i)},Q9=function(e,r,i){return r.subject.active?i(r.subject.active)(e):!1},J9=function(e,r,i){return i(r)(e)},O_=function(e){var r=e.target,i=e.destination,s=e.viewport,a=e.withDroppableDisplacement,o=e.isVisibleThroughFrameFn,l=a?X9(r,i):r;return Q9(l,i,o)&&J9(l,s,o)},Z9=function(e){return O_(Ie({},e,{isVisibleThroughFrameFn:zA}))},WA=function(e){return O_(Ie({},e,{isVisibleThroughFrameFn:K9}))},eH=function(e){return O_(Ie({},e,{isVisibleThroughFrameFn:Y9(e.destination.axis)}))},tH=function(e,r,i){if(typeof i=="boolean")return i;if(!r)return!0;var s=r.invisible,a=r.visible;if(s[e])return!1;var o=a[e];return o?o.shouldAnimate:!0};function nH(t,e){var r=t.page.marginBox,i={top:e.point.y,right:0,bottom:0,left:e.point.x};return Ir(P_(r,i))}function Bu(t){var e=t.afterDragging,r=t.destination,i=t.displacedBy,s=t.viewport,a=t.forceShouldAnimate,o=t.last;return e.reduce(function(u,c){var h=nH(c,i),f=c.descriptor.id;u.all.push(f);var p=Z9({target:h,destination:r,viewport:s,withDroppableDisplacement:!0});if(!p)return u.invisible[c.descriptor.id]=!0,u;var g=tH(f,o,a),T={draggableId:f,shouldAnimate:g};return u.visible[f]=T,u},{all:[],visible:{},invisible:{}})}function rH(t,e){if(!t.length)return 0;var r=t[t.length-1].descriptor.index;return e.inHomeList?r:r+1}function $E(t){var e=t.insideDestination,r=t.inHomeList,i=t.displacedBy,s=t.destination,a=rH(e,{inHomeList:r});return{displaced:Uu,displacedBy:i,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:a}}}}function Yh(t){var e=t.draggable,r=t.insideDestination,i=t.destination,s=t.viewport,a=t.displacedBy,o=t.last,l=t.index,u=t.forceShouldAnimate,c=Zo(e,i);if(l==null)return $E({insideDestination:r,inHomeList:c,displacedBy:a,destination:i});var h=As(r,function(N){return N.descriptor.index===l});if(!h)return $E({insideDestination:r,inHomeList:c,displacedBy:a,destination:i});var f=lp(e,r),p=r.indexOf(h),g=f.slice(p),T=Bu({afterDragging:g,destination:i,displacedBy:a,last:o,viewport:s.frame,forceShouldAnimate:u});return{displaced:T,displacedBy:a,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:l}}}}function xs(t,e){return!!e.effected[t]}var iH=function(t){var e=t.isMovingForward,r=t.destination,i=t.draggables,s=t.combine,a=t.afterCritical;if(!r.isCombineEnabled)return null;var o=s.draggableId,l=i[o],u=l.descriptor.index,c=xs(o,a);return c?e?u:u-1:e?u+1:u},sH=function(t){var e=t.isMovingForward,r=t.isInHomeList,i=t.insideDestination,s=t.location;if(!i.length)return null;var a=s.index,o=e?a+1:a-1,l=i[0].descriptor.index,u=i[i.length-1].descriptor.index,c=r?u:u+1;return o<l||o>c?null:o},aH=function(t){var e=t.isMovingForward,r=t.isInHomeList,i=t.draggable,s=t.draggables,a=t.destination,o=t.insideDestination,l=t.previousImpact,u=t.viewport,c=t.afterCritical,h=l.at;if(h||le(),h.type==="REORDER"){var f=sH({isMovingForward:e,isInHomeList:r,location:h.destination,insideDestination:o});return f==null?null:Yh({draggable:i,insideDestination:o,destination:a,viewport:u,last:l.displaced,displacedBy:l.displacedBy,index:f})}var p=iH({isMovingForward:e,destination:a,displaced:l.displaced,draggables:s,combine:h.combine,afterCritical:c});return p==null?null:Yh({draggable:i,insideDestination:o,destination:a,viewport:u,last:l.displaced,displacedBy:l.displacedBy,index:p})},oH=function(t){var e=t.displaced,r=t.afterCritical,i=t.combineWith,s=t.displacedBy,a=!!(e.visible[i]||e.invisible[i]);return xs(i,r)?a?zt:Qo(s.point):a?s.point:zt},lH=function(t){var e=t.afterCritical,r=t.impact,i=t.draggables,s=op(r);s||le();var a=s.draggableId,o=i[a].page.borderBox.center,l=oH({displaced:r.displaced,afterCritical:e,combineWith:a,displacedBy:r.displacedBy});return Qt(o,l)},qA=function(e,r){return r.margin[e.start]+r.borderBox[e.size]/2},uH=function(e,r){return r.margin[e.end]+r.borderBox[e.size]/2},j_=function(e,r,i){return r[e.crossAxisStart]+i.margin[e.crossAxisStart]+i.borderBox[e.crossAxisSize]/2},zE=function(e){var r=e.axis,i=e.moveRelativeTo,s=e.isMoving;return ha(r.line,i.marginBox[r.end]+qA(r,s),j_(r,i.marginBox,s))},HE=function(e){var r=e.axis,i=e.moveRelativeTo,s=e.isMoving;return ha(r.line,i.marginBox[r.start]-uH(r,s),j_(r,i.marginBox,s))},cH=function(e){var r=e.axis,i=e.moveInto,s=e.isMoving;return ha(r.line,i.contentBox[r.start]+qA(r,s),j_(r,i.contentBox,s))},dH=function(t){var e=t.impact,r=t.draggable,i=t.draggables,s=t.droppable,a=t.afterCritical,o=Jo(s.descriptor.id,i),l=r.page,u=s.axis;if(!o.length)return cH({axis:u,moveInto:s.page,isMoving:l});var c=e.displaced,h=e.displacedBy,f=c.all[0];if(f){var p=i[f];if(xs(f,a))return HE({axis:u,moveRelativeTo:p.page,isMoving:l});var g=Hh(p.page,h.point);return HE({axis:u,moveRelativeTo:g,isMoving:l})}var T=o[o.length-1];if(T.descriptor.id===r.descriptor.id)return l.borderBox.center;if(xs(T.descriptor.id,a)){var N=Hh(T.page,Qo(a.displacedBy.point));return zE({axis:u,moveRelativeTo:N,isMoving:l})}return zE({axis:u,moveRelativeTo:T.page,isMoving:l})},_v=function(t,e){var r=t.frame;return r?Qt(e,r.scroll.diff.displacement):e},hH=function(e){var r=e.impact,i=e.draggable,s=e.droppable,a=e.draggables,o=e.afterCritical,l=i.page.borderBox.center,u=r.at;return!s||!u?l:u.type==="REORDER"?dH({impact:r,draggable:i,draggables:a,droppable:s,afterCritical:o}):lH({impact:r,draggables:a,afterCritical:o})},up=function(t){var e=hH(t),r=t.droppable,i=r?_v(r,e):e;return i},GA=function(t,e){var r=qn(e,t.scroll.initial),i=Qo(r),s=Ir({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),a={frame:s,scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:r,displacement:i}}};return a};function WE(t,e){return t.map(function(r){return e[r]})}function fH(t,e){for(var r=0;r<e.length;r++){var i=e[r].visible[t];if(i)return i}return null}var pH=function(t){var e=t.impact,r=t.viewport,i=t.destination,s=t.draggables,a=t.maxScrollChange,o=GA(r,Qt(r.scroll.current,a)),l=i.frame?N_(i,Qt(i.frame.scroll.current,a)):i,u=e.displaced,c=Bu({afterDragging:WE(u.all,s),destination:i,displacedBy:e.displacedBy,viewport:o.frame,last:u,forceShouldAnimate:!1}),h=Bu({afterDragging:WE(u.all,s),destination:l,displacedBy:e.displacedBy,viewport:r.frame,last:u,forceShouldAnimate:!1}),f={},p={},g=[u,c,h];u.all.forEach(function(N){var A=fH(N,g);if(A){p[N]=A;return}f[N]=!0});var T=Ie({},e,{displaced:{all:u.all,invisible:f,visible:p}});return T},mH=function(t,e){return Qt(t.scroll.diff.displacement,e)},V_=function(t){var e=t.pageBorderBoxCenter,r=t.draggable,i=t.viewport,s=mH(i,e),a=qn(s,r.page.borderBox.center);return Qt(r.client.borderBox.center,a)},KA=function(t){var e=t.draggable,r=t.destination,i=t.newPageBorderBoxCenter,s=t.viewport,a=t.withDroppableDisplacement,o=t.onlyOnMainAxis,l=o===void 0?!1:o,u=qn(i,e.page.borderBox.center),c=wc(e.page.borderBox,u),h={target:c,destination:r,withDroppableDisplacement:a,viewport:s};return l?eH(h):WA(h)},gH=function(t){var e=t.isMovingForward,r=t.draggable,i=t.destination,s=t.draggables,a=t.previousImpact,o=t.viewport,l=t.previousPageBorderBoxCenter,u=t.previousClientSelection,c=t.afterCritical;if(!i.isEnabled)return null;var h=Jo(i.descriptor.id,s),f=Zo(r,i),p=q9({isMovingForward:e,draggable:r,destination:i,insideDestination:h,previousImpact:a})||aH({isMovingForward:e,isInHomeList:f,draggable:r,draggables:s,destination:i,insideDestination:h,previousImpact:a,viewport:o,afterCritical:c});if(!p)return null;var g=up({impact:p,draggable:r,droppable:i,draggables:s,afterCritical:c}),T=KA({draggable:r,destination:i,newPageBorderBoxCenter:g,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(T){var N=V_({pageBorderBoxCenter:g,draggable:r,viewport:o});return{clientSelection:N,impact:p,scrollJumpRequest:null}}var A=qn(g,l),b=pH({impact:p,viewport:o,destination:i,draggables:s,maxScrollChange:A});return{clientSelection:u,impact:b,scrollJumpRequest:A}},vn=function(e){var r=e.subject.active;return r||le(),r},vH=function(t){var e=t.isMovingForward,r=t.pageBorderBoxCenter,i=t.source,s=t.droppables,a=t.viewport,o=i.subject.active;if(!o)return null;var l=i.axis,u=dr(o[l.start],o[l.end]),c=ap(s).filter(function(f){return f!==i}).filter(function(f){return f.isEnabled}).filter(function(f){return!!f.subject.active}).filter(function(f){return zA(a.frame)(vn(f))}).filter(function(f){var p=vn(f);return e?o[l.crossAxisEnd]<p[l.crossAxisEnd]:p[l.crossAxisStart]<o[l.crossAxisStart]}).filter(function(f){var p=vn(f),g=dr(p[l.start],p[l.end]);return u(p[l.start])||u(p[l.end])||g(o[l.start])||g(o[l.end])}).sort(function(f,p){var g=vn(f)[l.crossAxisStart],T=vn(p)[l.crossAxisStart];return e?g-T:T-g}).filter(function(f,p,g){return vn(f)[l.crossAxisStart]===vn(g[0])[l.crossAxisStart]});if(!c.length)return null;if(c.length===1)return c[0];var h=c.filter(function(f){var p=dr(vn(f)[l.start],vn(f)[l.end]);return p(r[l.line])});return h.length===1?h[0]:h.length>1?h.sort(function(f,p){return vn(f)[l.start]-vn(p)[l.start]})[0]:c.sort(function(f,p){var g=UE(r,BE(vn(f))),T=UE(r,BE(vn(p)));return g!==T?g-T:vn(f)[l.start]-vn(p)[l.start]})[0]},qE=function(e,r){var i=e.page.borderBox.center;return xs(e.descriptor.id,r)?qn(i,r.displacedBy.point):i},yH=function(e,r){var i=e.page.borderBox;return xs(e.descriptor.id,r)?wc(i,Qo(r.displacedBy.point)):i},_H=function(t){var e=t.pageBorderBoxCenter,r=t.viewport,i=t.destination,s=t.insideDestination,a=t.afterCritical,o=s.filter(function(l){return WA({target:yH(l,a),destination:i,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(l,u){var c=Fu(e,_v(i,qE(l,a))),h=Fu(e,_v(i,qE(u,a)));return c<h?-1:h<c?1:l.descriptor.index-u.descriptor.index});return o[0]||null},bc=$t(function(e,r){var i=r[e.line];return{value:i,point:ha(e.line,i)}}),wH=function(e,r,i){var s=e.axis;if(e.descriptor.mode==="virtual")return ha(s.line,r[s.line]);var a=e.subject.page.contentBox[s.size],o=Jo(e.descriptor.id,i),l=o.reduce(function(h,f){return h+f.client.marginBox[s.size]},0),u=l+r[s.line],c=u-a;return c<=0?null:ha(s.line,c)},YA=function(e,r){return Ie({},e,{scroll:Ie({},e.scroll,{max:r})})},XA=function(e,r,i){var s=e.frame;Zo(r,e)&&le(),e.subject.withPlaceholder&&le();var a=bc(e.axis,r.displaceBy).point,o=wH(e,a,i),l={placeholderSize:a,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){var u=Do({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:e.frame});return Ie({},e,{subject:u})}var c=o?Qt(s.scroll.max,o):s.scroll.max,h=YA(s,c),f=Do({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:h});return Ie({},e,{subject:f,frame:h})},bH=function(e){var r=e.subject.withPlaceholder;r||le();var i=e.frame;if(!i){var s=Do({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return Ie({},e,{subject:s})}var a=r.oldFrameMaxScroll;a||le();var o=YA(i,a),l=Do({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return Ie({},e,{subject:l,frame:o})},xH=function(t){var e=t.previousPageBorderBoxCenter,r=t.moveRelativeTo,i=t.insideDestination,s=t.draggable,a=t.draggables,o=t.destination,l=t.viewport,u=t.afterCritical;if(!r){if(i.length)return null;var c={displaced:Uu,displacedBy:$A,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},h=up({impact:c,draggable:s,droppable:o,draggables:a,afterCritical:u}),f=Zo(s,o)?o:XA(o,s,a),p=KA({draggable:s,destination:f,newPageBorderBoxCenter:h,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return p?c:null}var g=e[o.axis.line]<=r.page.borderBox.center[o.axis.line],T=function(){var A=r.descriptor.index;return r.descriptor.id===s.descriptor.id||g?A:A+1}(),N=bc(o.axis,s.displaceBy);return Yh({draggable:s,insideDestination:i,destination:o,viewport:l,displacedBy:N,last:Uu,index:T})},EH=function(t){var e=t.isMovingForward,r=t.previousPageBorderBoxCenter,i=t.draggable,s=t.isOver,a=t.draggables,o=t.droppables,l=t.viewport,u=t.afterCritical,c=vH({isMovingForward:e,pageBorderBoxCenter:r,source:s,droppables:o,viewport:l});if(!c)return null;var h=Jo(c.descriptor.id,a),f=_H({pageBorderBoxCenter:r,viewport:l,destination:c,insideDestination:h,afterCritical:u}),p=xH({previousPageBorderBoxCenter:r,destination:c,draggable:i,draggables:a,moveRelativeTo:f,insideDestination:h,viewport:l,afterCritical:u});if(!p)return null;var g=up({impact:p,draggable:i,droppable:c,draggables:a,afterCritical:u}),T=V_({pageBorderBoxCenter:g,draggable:i,viewport:l});return{clientSelection:T,impact:p,scrollJumpRequest:null}},Yn=function(t){var e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null},TH=function(e,r){var i=Yn(e);return i?r[i]:null},SH=function(t){var e=t.state,r=t.type,i=TH(e.impact,e.dimensions.droppables),s=!!i,a=e.dimensions.droppables[e.critical.droppable.id],o=i||a,l=o.axis.direction,u=l==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||l==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(u&&!s)return null;var c=r==="MOVE_DOWN"||r==="MOVE_RIGHT",h=e.dimensions.draggables[e.critical.draggable.id],f=e.current.page.borderBoxCenter,p=e.dimensions,g=p.draggables,T=p.droppables;return u?gH({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:h,destination:o,draggables:g,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):EH({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:h,isOver:o,draggables:g,droppables:T,viewport:e.viewport,afterCritical:e.afterCritical})};function Ws(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function QA(t){var e=dr(t.top,t.bottom),r=dr(t.left,t.right);return function(s){return e(s.y)&&r(s.x)}}function IH(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function kH(t){var e=t.pageBorderBox,r=t.draggable,i=t.candidates,s=r.page.borderBox.center,a=i.map(function(o){var l=o.axis,u=ha(o.axis.line,e.center[l.line],o.page.borderBox.center[l.crossAxisLine]);return{id:o.descriptor.id,distance:Fu(s,u)}}).sort(function(o,l){return l.distance-o.distance});return a[0]?a[0].id:null}function CH(t){var e=t.pageBorderBox,r=t.draggable,i=t.droppables,s=ap(i).filter(function(a){if(!a.isEnabled)return!1;var o=a.subject.active;if(!o||!IH(e,o))return!1;if(QA(o)(e.center))return!0;var l=a.axis,u=o.center[l.crossAxisLine],c=e[l.crossAxisStart],h=e[l.crossAxisEnd],f=dr(o[l.crossAxisStart],o[l.crossAxisEnd]),p=f(c),g=f(h);return!p&&!g?!0:p?c<u:h>u});return s.length?s.length===1?s[0].descriptor.id:kH({pageBorderBox:e,draggable:r,candidates:s}):null}var JA=function(e,r){return Ir(wc(e,r))},AH=function(t,e){var r=t.frame;return r?JA(e,r.scroll.diff.value):e};function ZA(t){var e=t.displaced,r=t.id;return!!(e.visible[r]||e.invisible[r])}function PH(t){var e=t.draggable,r=t.closest,i=t.inHomeList;return r?i&&r.descriptor.index>e.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var RH=function(t){var e=t.pageBorderBoxWithDroppableScroll,r=t.draggable,i=t.destination,s=t.insideDestination,a=t.last,o=t.viewport,l=t.afterCritical,u=i.axis,c=bc(i.axis,r.displaceBy),h=c.value,f=e[u.start],p=e[u.end],g=lp(r,s),T=As(g,function(A){var b=A.descriptor.id,x=A.page.borderBox.center[u.line],w=xs(b,l),R=ZA({displaced:a,id:b});return w?R?p<=x:f<x-h:R?p<=x+h:f<x}),N=PH({draggable:r,closest:T,inHomeList:Zo(r,i)});return Yh({draggable:r,insideDestination:s,destination:i,viewport:o,last:a,displacedBy:c,index:N})},NH=4,DH=function(t){var e=t.draggable,r=t.pageBorderBoxWithDroppableScroll,i=t.previousImpact,s=t.destination,a=t.insideDestination,o=t.afterCritical;if(!s.isCombineEnabled)return null;var l=s.axis,u=bc(s.axis,e.displaceBy),c=u.value,h=r[l.start],f=r[l.end],p=lp(e,a),g=As(p,function(N){var A=N.descriptor.id,b=N.page.borderBox,x=b[l.size],w=x/NH,R=xs(A,o),j=ZA({displaced:i.displaced,id:A});return R?j?f>b[l.start]+w&&f<b[l.end]-w:h>b[l.start]-c+w&&h<b[l.end]-c-w:j?f>b[l.start]+c+w&&f<b[l.end]+c-w:h>b[l.start]+w&&h<b[l.end]-w});if(!g)return null;var T={displacedBy:u,displaced:i.displaced,at:{type:"COMBINE",combine:{draggableId:g.descriptor.id,droppableId:s.descriptor.id}}};return T},eP=function(t){var e=t.pageOffset,r=t.draggable,i=t.draggables,s=t.droppables,a=t.previousImpact,o=t.viewport,l=t.afterCritical,u=JA(r.page.borderBox,e),c=CH({pageBorderBox:u,draggable:r,droppables:s});if(!c)return G9;var h=s[c],f=Jo(h.descriptor.id,i),p=AH(h,u);return DH({pageBorderBoxWithDroppableScroll:p,draggable:r,previousImpact:a,destination:h,insideDestination:f,afterCritical:l})||RH({pageBorderBoxWithDroppableScroll:p,draggable:r,destination:h,insideDestination:f,last:a.displaced,viewport:o,afterCritical:l})},F_=function(t,e){var r;return Ie({},t,(r={},r[e.descriptor.id]=e,r))},MH=function(e){var r=e.previousImpact,i=e.impact,s=e.droppables,a=Yn(r),o=Yn(i);if(!a||a===o)return s;var l=s[a];if(!l.subject.withPlaceholder)return s;var u=bH(l);return F_(s,u)},LH=function(t){var e=t.draggable,r=t.draggables,i=t.droppables,s=t.previousImpact,a=t.impact,o=MH({previousImpact:s,impact:a,droppables:i}),l=Yn(a);if(!l)return o;var u=i[l];if(Zo(e,u)||u.subject.withPlaceholder)return o;var c=XA(u,e,r);return F_(o,c)},au=function(t){var e=t.state,r=t.clientSelection,i=t.dimensions,s=t.viewport,a=t.impact,o=t.scrollJumpRequest,l=s||e.viewport,u=i||e.dimensions,c=r||e.current.client.selection,h=qn(c,e.initial.client.selection),f={offset:h,selection:c,borderBoxCenter:Qt(e.initial.client.borderBoxCenter,h)},p={selection:Qt(f.selection,l.scroll.current),borderBoxCenter:Qt(f.borderBoxCenter,l.scroll.current),offset:Qt(f.offset,l.scroll.diff.value)},g={client:f,page:p};if(e.phase==="COLLECTING")return Ie({phase:"COLLECTING"},e,{dimensions:u,viewport:l,current:g});var T=u.draggables[e.critical.draggable.id],N=a||eP({pageOffset:p.offset,draggable:T,draggables:u.draggables,droppables:u.droppables,previousImpact:e.impact,viewport:l,afterCritical:e.afterCritical}),A=LH({draggable:T,impact:N,previousImpact:e.impact,draggables:u.draggables,droppables:u.droppables}),b=Ie({},e,{current:g,dimensions:{draggables:u.draggables,droppables:A},impact:N,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return b};function OH(t,e){return t.map(function(r){return e[r]})}var tP=function(t){var e=t.impact,r=t.viewport,i=t.draggables,s=t.destination,a=t.forceShouldAnimate,o=e.displaced,l=OH(o.all,i),u=Bu({afterDragging:l,destination:s,displacedBy:e.displacedBy,viewport:r.frame,forceShouldAnimate:a,last:o});return Ie({},e,{displaced:u})},nP=function(t){var e=t.impact,r=t.draggable,i=t.droppable,s=t.draggables,a=t.viewport,o=t.afterCritical,l=up({impact:e,draggable:r,draggables:s,droppable:i,afterCritical:o});return V_({pageBorderBoxCenter:l,draggable:r,viewport:a})},rP=function(t){var e=t.state,r=t.dimensions,i=t.viewport;e.movementMode!=="SNAP"&&le();var s=e.impact,a=i||e.viewport,o=r||e.dimensions,l=o.draggables,u=o.droppables,c=l[e.critical.draggable.id],h=Yn(s);h||le();var f=u[h],p=tP({impact:s,viewport:a,destination:f,draggables:l}),g=nP({impact:p,draggable:c,droppable:f,draggables:l,viewport:a,afterCritical:e.afterCritical});return au({impact:p,clientSelection:g,state:e,dimensions:o,viewport:a})},jH=function(t){return{index:t.index,droppableId:t.droppableId}},iP=function(t){var e=t.draggable,r=t.home,i=t.draggables,s=t.viewport,a=bc(r.axis,e.displaceBy),o=Jo(r.descriptor.id,i),l=o.indexOf(e);l===-1&&le();var u=o.slice(l+1),c=u.reduce(function(g,T){return g[T.descriptor.id]=!0,g},{}),h={inVirtualList:r.descriptor.mode==="virtual",displacedBy:a,effected:c},f=Bu({afterDragging:u,destination:r,displacedBy:a,last:null,viewport:s.frame,forceShouldAnimate:!1}),p={displaced:f,displacedBy:a,at:{type:"REORDER",destination:jH(e.descriptor)}};return{impact:p,afterCritical:h}},VH=function(t,e){return{draggables:t.draggables,droppables:F_(t.droppables,e)}},FH=function(t){var e=t.draggable,r=t.offset,i=t.initialWindowScroll,s=Hh(e.client,r),a=Wh(s,i),o=Ie({},e,{placeholder:Ie({},e.placeholder,{client:s}),client:s,page:a});return o},UH=function(t){var e=t.frame;return e||le(),e},BH=function(t){var e=t.additions,r=t.updatedDroppables,i=t.viewport,s=i.scroll.diff.value;return e.map(function(a){var o=a.descriptor.droppableId,l=r[o],u=UH(l),c=u.scroll.diff.value,h=Qt(s,c),f=FH({draggable:a,offset:h,initialWindowScroll:i.scroll.initial});return f})},$H=function(t){var e=t.state,r=t.published,i=r.modified.map(function(w){var R=e.dimensions.droppables[w.droppableId],j=N_(R,w.scroll);return j}),s=Ie({},e.dimensions.droppables,{},UA(i)),a=BA(BH({additions:r.additions,updatedDroppables:s,viewport:e.viewport})),o=Ie({},e.dimensions.draggables,{},a);r.removals.forEach(function(w){delete o[w]});var l={droppables:s,draggables:o},u=Yn(e.impact),c=u?l.droppables[u]:null,h=l.draggables[e.critical.draggable.id],f=l.droppables[e.critical.droppable.id],p=iP({draggable:h,home:f,draggables:o,viewport:e.viewport}),g=p.impact,T=p.afterCritical,N=c&&c.isCombineEnabled?e.impact:g,A=eP({pageOffset:e.current.page.offset,draggable:l.draggables[e.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:N,viewport:e.viewport,afterCritical:T}),b=Ie({phase:"DRAGGING"},e,{phase:"DRAGGING",impact:A,onLiftImpact:g,dimensions:l,afterCritical:T,forceShouldAnimate:!1});if(e.phase==="COLLECTING")return b;var x=Ie({phase:"DROP_PENDING"},b,{phase:"DROP_PENDING",reason:e.reason,isWaiting:!1});return x},wv=function(e){return e.movementMode==="SNAP"},km=function(e,r,i){var s=VH(e.dimensions,r);return!wv(e)||i?au({state:e,dimensions:s}):rP({state:e,dimensions:s})};function Cm(t){return t.isDragging&&t.movementMode==="SNAP"?Ie({phase:"DRAGGING"},t,{scrollJumpRequest:null}):t}var GE={phase:"IDLE",completed:null,shouldFlush:!1},zH=function(t,e){if(t===void 0&&(t=GE),e.type==="FLUSH")return Ie({},GE,{shouldFlush:!0});if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&le();var r=e.payload,i=r.critical,s=r.clientSelection,a=r.viewport,o=r.dimensions,l=r.movementMode,u=o.draggables[i.draggable.id],c=o.droppables[i.droppable.id],h={selection:s,borderBoxCenter:u.client.borderBox.center,offset:zt},f={client:h,page:{selection:Qt(h.selection,a.scroll.initial),borderBoxCenter:Qt(h.selection,a.scroll.initial),offset:Qt(h.selection,a.scroll.diff.value)}},p=ap(o.droppables).every(function(ze){return!ze.isFixedOnPage}),g=iP({draggable:u,home:c,draggables:o.draggables,viewport:a}),T=g.impact,N=g.afterCritical,A={phase:"DRAGGING",isDragging:!0,critical:i,movementMode:l,dimensions:o,initial:f,current:f,isWindowScrollAllowed:p,impact:T,afterCritical:N,onLiftImpact:T,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null};return A}if(e.type==="COLLECTION_STARTING"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&le();var b=Ie({phase:"COLLECTING"},t,{phase:"COLLECTING"});return b}if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||le(),$H({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;Ws(t)||le();var x=e.payload.client;return ds(x,t.current.client.selection)?t:au({state:t,clientSelection:x,impact:wv(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return Cm(t);Ws(t)||le();var w=e.payload,R=w.id,j=w.newScroll,V=t.dimensions.droppables[R];if(!V)return t;var C=N_(V,j);return km(t,C,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;Ws(t)||le();var I=e.payload,y=I.id,_=I.isEnabled,S=t.dimensions.droppables[y];S||le(),S.isEnabled===_&&le();var M=Ie({},S,{isEnabled:_});return km(t,M,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;Ws(t)||le();var D=e.payload,K=D.id,ee=D.isCombineEnabled,re=t.dimensions.droppables[K];re||le(),re.isCombineEnabled===ee&&le();var pe=Ie({},re,{isCombineEnabled:ee});return km(t,pe,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;Ws(t)||le(),t.isWindowScrollAllowed||le();var q=e.payload.newScroll;if(ds(t.viewport.scroll.current,q))return Cm(t);var Y=GA(t.viewport,q);return wv(t)?rP({state:t,viewport:Y}):au({state:t,viewport:Y})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Ws(t))return t;var ie=e.payload.maxScroll;if(ds(ie,t.viewport.scroll.max))return t;var ne=Ie({},t.viewport,{scroll:Ie({},t.viewport.scroll,{max:ie})});return Ie({phase:"DRAGGING"},t,{viewport:ne})}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&le();var W=SH({state:t,type:e.type});return W?au({state:t,impact:W.impact,clientSelection:W.clientSelection,scrollJumpRequest:W.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){var H=e.payload.reason;t.phase!=="COLLECTING"&&le();var Q=Ie({phase:"DROP_PENDING"},t,{phase:"DROP_PENDING",isWaiting:!0,reason:H});return Q}if(e.type==="DROP_ANIMATE"){var X=e.payload,de=X.completed,ve=X.dropDuration,Oe=X.newHomeClientOffset;t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||le();var Ne={phase:"DROP_ANIMATING",completed:de,dropDuration:ve,newHomeClientOffset:Oe,dimensions:t.dimensions};return Ne}if(e.type==="DROP_COMPLETE"){var Ge=e.payload.completed;return{phase:"IDLE",completed:Ge,shouldFlush:!1}}return t},HH=function(e){return{type:"BEFORE_INITIAL_CAPTURE",payload:e}},WH=function(e){return{type:"LIFT",payload:e}},qH=function(e){return{type:"INITIAL_PUBLISH",payload:e}},GH=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},KH=function(){return{type:"COLLECTION_STARTING",payload:null}},YH=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},XH=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},QH=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},sP=function(e){return{type:"MOVE",payload:e}},JH=function(e){return{type:"MOVE_BY_WINDOW_SCROLL",payload:e}},ZH=function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}},eW=function(){return{type:"MOVE_UP",payload:null}},tW=function(){return{type:"MOVE_DOWN",payload:null}},nW=function(){return{type:"MOVE_RIGHT",payload:null}},rW=function(){return{type:"MOVE_LEFT",payload:null}},U_=function(){return{type:"FLUSH",payload:null}},iW=function(e){return{type:"DROP_ANIMATE",payload:e}},B_=function(e){return{type:"DROP_COMPLETE",payload:e}},aP=function(e){return{type:"DROP",payload:e}},sW=function(e){return{type:"DROP_PENDING",payload:e}},oP=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},aW=function(t){return function(e){var r=e.getState,i=e.dispatch;return function(s){return function(a){if(a.type!=="LIFT"){s(a);return}var o=a.payload,l=o.id,u=o.clientSelection,c=o.movementMode,h=r();h.phase==="DROP_ANIMATING"&&i(B_({completed:h.completed})),r().phase!=="IDLE"&&le(),i(U_()),i(HH({draggableId:l,movementMode:c}));var f={shouldPublishImmediately:c==="SNAP"},p={draggableId:l,scrollOptions:f},g=t.startPublishing(p),T=g.critical,N=g.dimensions,A=g.viewport;i(qH({critical:T,dimensions:N,clientSelection:u,movementMode:c,viewport:A}))}}}},oW=function(t){return function(){return function(e){return function(r){r.type==="INITIAL_PUBLISH"&&t.dragging(),r.type==="DROP_ANIMATE"&&t.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&t.resting(),e(r)}}}},$_={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},$u={opacity:{drop:0,combining:.7},scale:{drop:.75}},z_={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Us=z_.outOfTheWay+"s "+$_.outOfTheWay,ou={fluid:"opacity "+Us,snap:"transform "+Us+", opacity "+Us,drop:function(e){var r=e+"s "+$_.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+Us,placeholder:"height "+Us+", width "+Us+", margin "+Us},KE=function(e){return ds(e,zt)?null:"translate("+e.x+"px, "+e.y+"px)"},bv={moveTo:KE,drop:function(e,r){var i=KE(e);return i?r?i+" scale("+$u.scale.drop+")":i:null}},xv=z_.minDropTime,lP=z_.maxDropTime,lW=lP-xv,YE=1500,uW=.6,cW=function(t){var e=t.current,r=t.destination,i=t.reason,s=Fu(e,r);if(s<=0)return xv;if(s>=YE)return lP;var a=s/YE,o=xv+lW*a,l=i==="CANCEL"?o*uW:o;return Number(l.toFixed(2))},dW=function(t){var e=t.impact,r=t.draggable,i=t.dimensions,s=t.viewport,a=t.afterCritical,o=i.draggables,l=i.droppables,u=Yn(e),c=u?l[u]:null,h=l[r.descriptor.droppableId],f=nP({impact:e,draggable:r,draggables:o,afterCritical:a,droppable:c||h,viewport:s}),p=qn(f,r.client.borderBox.center);return p},hW=function(t){var e=t.draggables,r=t.reason,i=t.lastImpact,s=t.home,a=t.viewport,o=t.onLiftImpact;if(!i.at||r!=="DROP"){var l=tP({draggables:e,impact:o,destination:s,viewport:a,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(i.at.type==="REORDER")return{impact:i,didDropInsideDroppable:!0};var u=Ie({},i,{displaced:Uu});return{impact:u,didDropInsideDroppable:!0}},fW=function(t){var e=t.getState,r=t.dispatch;return function(i){return function(s){if(s.type!=="DROP"){i(s);return}var a=e(),o=s.payload.reason;if(a.phase==="COLLECTING"){r(sW({reason:o}));return}if(a.phase!=="IDLE"){var l=a.phase==="DROP_PENDING"&&a.isWaiting;l&&le(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||le();var u=a.critical,c=a.dimensions,h=c.draggables[a.critical.draggable.id],f=hW({reason:o,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),p=f.impact,g=f.didDropInsideDroppable,T=g?M_(p):null,N=g?op(p):null,A={index:u.draggable.index,droppableId:u.droppable.id},b={draggableId:h.descriptor.id,type:h.descriptor.type,source:A,reason:o,mode:a.movementMode,destination:T,combine:N},x=dW({impact:p,draggable:h,dimensions:c,viewport:a.viewport,afterCritical:a.afterCritical}),w={critical:a.critical,afterCritical:a.afterCritical,result:b,impact:p},R=!ds(a.current.client.offset,x)||!!b.combine;if(!R){r(B_({completed:w}));return}var j=cW({current:a.current.client.offset,destination:x,reason:o}),V={newHomeClientOffset:x,dropDuration:j,completed:w};r(iW(V))}}}},uP=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function pW(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||t()}}}function mW(t){var e=t.onWindowScroll;function r(){e(uP())}var i=Vu(r),s=pW(i),a=cs;function o(){return a!==cs}function l(){o()&&le(),a=lr(window,[s])}function u(){o()||le(),i.cancel(),a(),a=cs}return{start:l,stop:u,isActive:o}}var gW=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},vW=function(t){var e=mW({onWindowScroll:function(i){t.dispatch(JH({newScroll:i}))}});return function(r){return function(i){!e.isActive()&&i.type==="INITIAL_PUBLISH"&&e.start(),e.isActive()&&gW(i)&&e.stop(),r(i)}}},yW=function(t){var e=!1,r=!1,i=setTimeout(function(){r=!0}),s=function(o){e||r||(e=!0,t(o),clearTimeout(i))};return s.wasCalled=function(){return e},s},_W=function(){var t=[],e=function(a){var o=D_(t,function(c){return c.timerId===a});o===-1&&le();var l=t.splice(o,1),u=l[0];u.callback()},r=function(a){var o=setTimeout(function(){return e(o)}),l={timerId:o,callback:a};t.push(l)},i=function(){if(t.length){var a=[].concat(t);t.length=0,a.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:r,flush:i}},wW=function(e,r){return e==null&&r==null?!0:e==null||r==null?!1:e.droppableId===r.droppableId&&e.index===r.index},bW=function(e,r){return e==null&&r==null?!0:e==null||r==null?!1:e.draggableId===r.draggableId&&e.droppableId===r.droppableId},xW=function(e,r){if(e===r)return!0;var i=e.draggable.id===r.draggable.id&&e.draggable.droppableId===r.draggable.droppableId&&e.draggable.type===r.draggable.type&&e.draggable.index===r.draggable.index,s=e.droppable.id===r.droppable.id&&e.droppable.type===r.droppable.type;return i&&s},Pl=function(e,r){r()},pd=function(e,r){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:r}},Am=function(e,r,i,s){if(!e){i(s(r));return}var a=yW(i),o={announce:a};e(r,o),a.wasCalled()||i(s(r))},EW=function(t,e){var r=_W(),i=null,s=function(p,g){i&&le(),Pl("onBeforeCapture",function(){var T=t().onBeforeCapture;if(T){var N={draggableId:p,mode:g};T(N)}})},a=function(p,g){i&&le(),Pl("onBeforeDragStart",function(){var T=t().onBeforeDragStart;T&&T(pd(p,g))})},o=function(p,g){i&&le();var T=pd(p,g);i={mode:g,lastCritical:p,lastLocation:T.source,lastCombine:null},r.add(function(){Pl("onDragStart",function(){return Am(t().onDragStart,T,e,Wd.onDragStart)})})},l=function(p,g){var T=M_(g),N=op(g);i||le();var A=!xW(p,i.lastCritical);A&&(i.lastCritical=p);var b=!wW(i.lastLocation,T);b&&(i.lastLocation=T);var x=!bW(i.lastCombine,N);if(x&&(i.lastCombine=N),!(!A&&!b&&!x)){var w=Ie({},pd(p,i.mode),{combine:N,destination:T});r.add(function(){Pl("onDragUpdate",function(){return Am(t().onDragUpdate,w,e,Wd.onDragUpdate)})})}},u=function(){i||le(),r.flush()},c=function(p){i||le(),i=null,Pl("onDragEnd",function(){return Am(t().onDragEnd,p,e,Wd.onDragEnd)})},h=function(){if(i){var p=Ie({},pd(i.lastCritical,i.mode),{combine:null,destination:null,reason:"CANCEL"});c(p)}};return{beforeCapture:s,beforeStart:a,start:o,update:l,flush:u,drop:c,abort:h}},TW=function(t,e){var r=EW(t,e);return function(i){return function(s){return function(a){if(a.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(a.type==="INITIAL_PUBLISH"){var o=a.payload.critical;r.beforeStart(o,a.payload.movementMode),s(a),r.start(o,a.payload.movementMode);return}if(a.type==="DROP_COMPLETE"){var l=a.payload.completed.result;r.flush(),s(a),r.drop(l);return}if(s(a),a.type==="FLUSH"){r.abort();return}var u=i.getState();u.phase==="DRAGGING"&&r.update(u.critical,u.impact)}}}},SW=function(t){return function(e){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){e(r);return}var i=t.getState();i.phase!=="DROP_ANIMATING"&&le(),t.dispatch(B_({completed:i.completed}))}}},IW=function(t){var e=null,r=null;function i(){r&&(cancelAnimationFrame(r),r=null),e&&(e(),e=null)}return function(s){return function(a){if((a.type==="FLUSH"||a.type==="DROP_COMPLETE"||a.type==="DROP_ANIMATION_FINISHED")&&i(),s(a),a.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var u=t.getState();u.phase==="DROP_ANIMATING"&&t.dispatch(oP())}};r=requestAnimationFrame(function(){r=null,e=lr(window,[o])})}}}},kW=function(t){return function(){return function(e){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&t.stopPublishing(),e(r)}}}},CW=function(t){var e=!1;return function(){return function(r){return function(i){if(i.type==="INITIAL_PUBLISH"){e=!0,t.tryRecordFocus(i.payload.critical.draggable.id),r(i),t.tryRestoreFocusRecorded();return}if(r(i),!!e){if(i.type==="FLUSH"){e=!1,t.tryRestoreFocusRecorded();return}if(i.type==="DROP_COMPLETE"){e=!1;var s=i.payload.completed.result;s.combine&&t.tryShiftRecord(s.draggableId,s.combine.draggableId),t.tryRestoreFocusRecorded()}}}}}},AW=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},PW=function(t){return function(e){return function(r){return function(i){if(AW(i)){t.stop(),r(i);return}if(i.type==="INITIAL_PUBLISH"){r(i);var s=e.getState();s.phase!=="DRAGGING"&&le(),t.start(s);return}r(i),t.scroll(e.getState())}}}},RW=function(t){return function(e){return function(r){if(e(r),r.type==="PUBLISH_WHILE_DRAGGING"){var i=t.getState();i.phase==="DROP_PENDING"&&(i.isWaiting||t.dispatch(aP({reason:i.reason})))}}}},NW=mA,DW=function(t){var e=t.dimensionMarshal,r=t.focusMarshal,i=t.styleMarshal,s=t.getResponders,a=t.announce,o=t.autoScroller;return pA(zH,NW(_z(oW(i),kW(e),aW(e),fW,SW,IW,RW,PW(o),vW,CW(r),TW(s,a))))},Pm=function(){return{additions:{},removals:{},modified:{}}};function MW(t){var e=t.registry,r=t.callbacks,i=Pm(),s=null,a=function(){s||(r.collectionStarting(),s=requestAnimationFrame(function(){s=null;var h=i,f=h.additions,p=h.removals,g=h.modified,T=Object.keys(f).map(function(b){return e.draggable.getById(b).getDimension(zt)}).sort(function(b,x){return b.descriptor.index-x.descriptor.index}),N=Object.keys(g).map(function(b){var x=e.droppable.getById(b),w=x.callbacks.getScrollWhileDragging();return{droppableId:b,scroll:w}}),A={additions:T,removals:Object.keys(p),modified:N};i=Pm(),r.publish(A)}))},o=function(h){var f=h.descriptor.id;i.additions[f]=h,i.modified[h.descriptor.droppableId]=!0,i.removals[f]&&delete i.removals[f],a()},l=function(h){var f=h.descriptor;i.removals[f.id]=!0,i.modified[f.droppableId]=!0,i.additions[f.id]&&delete i.additions[f.id],a()},u=function(){s&&(cancelAnimationFrame(s),s=null,i=Pm())};return{add:o,remove:l,stop:u}}var cP=function(t){var e=t.scrollHeight,r=t.scrollWidth,i=t.height,s=t.width,a=qn({x:r,y:e},{x:s,y:i}),o={x:Math.max(0,a.x),y:Math.max(0,a.y)};return o},dP=function(){var t=document.documentElement;return t||le(),t},hP=function(){var t=dP(),e=cP({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight});return e},LW=function(){var t=uP(),e=hP(),r=t.y,i=t.x,s=dP(),a=s.clientWidth,o=s.clientHeight,l=i+a,u=r+o,c=Ir({top:r,left:i,right:l,bottom:u}),h={frame:c,scroll:{initial:t,current:t,max:e,diff:{value:zt,displacement:zt}}};return h},OW=function(t){var e=t.critical,r=t.scrollOptions,i=t.registry,s=LW(),a=s.scroll.current,o=e.droppable,l=i.droppable.getAllByType(o.type).map(function(f){return f.callbacks.getDimensionAndWatchScroll(a,r)}),u=i.draggable.getAllByType(e.draggable.type).map(function(f){return f.getDimension(a)}),c={draggables:BA(u),droppables:UA(l)},h={dimensions:c,critical:e,viewport:s};return h};function XE(t,e,r){if(r.descriptor.id===e.id||r.descriptor.type!==e.type)return!1;var i=t.droppable.getById(r.descriptor.droppableId);return i.descriptor.mode==="virtual"}var jW=function(t,e){var r=null,i=MW({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),s=function(g,T){t.droppable.exists(g)||le(),r&&e.updateDroppableIsEnabled({id:g,isEnabled:T})},a=function(g,T){r&&(t.droppable.exists(g)||le(),e.updateDroppableIsCombineEnabled({id:g,isCombineEnabled:T}))},o=function(g,T){r&&(t.droppable.exists(g)||le(),e.updateDroppableScroll({id:g,newScroll:T}))},l=function(g,T){r&&t.droppable.getById(g).callbacks.scroll(T)},u=function(){if(r){i.stop();var g=r.critical.droppable;t.droppable.getAllByType(g.type).forEach(function(T){return T.callbacks.dragStopped()}),r.unsubscribe(),r=null}},c=function(g){r||le();var T=r.critical.draggable;g.type==="ADDITION"&&XE(t,T,g.value)&&i.add(g.value),g.type==="REMOVAL"&&XE(t,T,g.value)&&i.remove(g.value)},h=function(g){r&&le();var T=t.draggable.getById(g.draggableId),N=t.droppable.getById(T.descriptor.droppableId),A={draggable:T.descriptor,droppable:N.descriptor},b=t.subscribe(c);return r={critical:A,unsubscribe:b},OW({critical:A,registry:t,scrollOptions:g.scrollOptions})},f={updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:a,scrollDroppable:l,updateDroppableScroll:o,startPublishing:h,stopPublishing:u};return f},fP=function(t,e){return t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP"},VW=function(t){window.scrollBy(t.x,t.y)},FW=$t(function(t){return ap(t).filter(function(e){return!(!e.isEnabled||!e.frame)})}),UW=function(e,r){var i=As(FW(r),function(s){return s.frame||le(),QA(s.frame.pageMarginBox)(e)});return i},BW=function(t){var e=t.center,r=t.destination,i=t.droppables;if(r){var s=i[r];return s.frame?s:null}var a=UW(e,i);return a},hs={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(e){return Math.pow(e,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},$W=function(t,e){var r=t[e.size]*hs.startFromPercentage,i=t[e.size]*hs.maxScrollAtPercentage,s={startScrollingFrom:r,maxScrollValueAt:i};return s},pP=function(t){var e=t.startOfRange,r=t.endOfRange,i=t.current,s=r-e;if(s===0)return 0;var a=i-e,o=a/s;return o},H_=1,zW=function(t,e){if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return hs.maxPixelScroll;if(t===e.startScrollingFrom)return H_;var r=pP({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),i=1-r,s=hs.maxPixelScroll*hs.ease(i);return Math.ceil(s)},QE=hs.durationDampening.accelerateAt,JE=hs.durationDampening.stopDampeningAt,HW=function(t,e){var r=e,i=JE,s=Date.now(),a=s-r;if(a>=JE)return t;if(a<QE)return H_;var o=pP({startOfRange:QE,endOfRange:i,current:a}),l=t*hs.ease(o);return Math.ceil(l)},ZE=function(t){var e=t.distanceToEdge,r=t.thresholds,i=t.dragStartTime,s=t.shouldUseTimeDampening,a=zW(e,r);return a===0?0:s?Math.max(HW(a,i),H_):a},eT=function(t){var e=t.container,r=t.distanceToEdges,i=t.dragStartTime,s=t.axis,a=t.shouldUseTimeDampening,o=$W(e,s),l=r[s.end]<r[s.start];return l?ZE({distanceToEdge:r[s.end],thresholds:o,dragStartTime:i,shouldUseTimeDampening:a}):-1*ZE({distanceToEdge:r[s.start],thresholds:o,dragStartTime:i,shouldUseTimeDampening:a})},WW=function(t){var e=t.container,r=t.subject,i=t.proposedScroll,s=r.height>e.height,a=r.width>e.width;return!a&&!s?i:a&&s?null:{x:a?0:i.x,y:s?0:i.y}},qW=VA(function(t){return t===0?0:t}),mP=function(t){var e=t.dragStartTime,r=t.container,i=t.subject,s=t.center,a=t.shouldUseTimeDampening,o={top:s.y-r.top,right:r.right-s.x,bottom:r.bottom-s.y,left:s.x-r.left},l=eT({container:r,distanceToEdges:o,dragStartTime:e,axis:L_,shouldUseTimeDampening:a}),u=eT({container:r,distanceToEdges:o,dragStartTime:e,axis:HA,shouldUseTimeDampening:a}),c=qW({x:u,y:l});if(ds(c,zt))return null;var h=WW({container:r,subject:i,proposedScroll:c});return h?ds(h,zt)?null:h:null},GW=VA(function(t){return t===0?0:t>0?1:-1}),W_=function(){var t=function(r,i){return r<0?r:r>i?r-i:0};return function(e){var r=e.current,i=e.max,s=e.change,a=Qt(r,s),o={x:t(a.x,i.x),y:t(a.y,i.y)};return ds(o,zt)?null:o}}(),gP=function(e){var r=e.max,i=e.current,s=e.change,a={x:Math.max(i.x,r.x),y:Math.max(i.y,r.y)},o=GW(s),l=W_({max:a,current:i,change:o});return!l||o.x!==0&&l.x===0||o.y!==0&&l.y===0},q_=function(e,r){return gP({current:e.scroll.current,max:e.scroll.max,change:r})},KW=function(e,r){if(!q_(e,r))return null;var i=e.scroll.max,s=e.scroll.current;return W_({current:s,max:i,change:r})},G_=function(e,r){var i=e.frame;return i?gP({current:i.scroll.current,max:i.scroll.max,change:r}):!1},YW=function(e,r){var i=e.frame;return!i||!G_(e,r)?null:W_({current:i.scroll.current,max:i.scroll.max,change:r})},XW=function(t){var e=t.viewport,r=t.subject,i=t.center,s=t.dragStartTime,a=t.shouldUseTimeDampening,o=mP({dragStartTime:s,container:e.frame,subject:r,center:i,shouldUseTimeDampening:a});return o&&q_(e,o)?o:null},QW=function(t){var e=t.droppable,r=t.subject,i=t.center,s=t.dragStartTime,a=t.shouldUseTimeDampening,o=e.frame;if(!o)return null;var l=mP({dragStartTime:s,container:o.pageMarginBox,subject:r,center:i,shouldUseTimeDampening:a});return l&&G_(e,l)?l:null},tT=function(t){var e=t.state,r=t.dragStartTime,i=t.shouldUseTimeDampening,s=t.scrollWindow,a=t.scrollDroppable,o=e.current.page.borderBoxCenter,l=e.dimensions.draggables[e.critical.draggable.id],u=l.page.marginBox;if(e.isWindowScrollAllowed){var c=e.viewport,h=XW({dragStartTime:r,viewport:c,subject:u,center:o,shouldUseTimeDampening:i});if(h){s(h);return}}var f=BW({center:o,destination:Yn(e.impact),droppables:e.dimensions.droppables});if(f){var p=QW({dragStartTime:r,droppable:f,subject:u,center:o,shouldUseTimeDampening:i});p&&a(f.descriptor.id,p)}},JW=function(t){var e=t.scrollWindow,r=t.scrollDroppable,i=Vu(e),s=Vu(r),a=null,o=function(h){a||le();var f=a,p=f.shouldUseTimeDampening,g=f.dragStartTime;tT({state:h,scrollWindow:i,scrollDroppable:s,dragStartTime:g,shouldUseTimeDampening:p})},l=function(h){a&&le();var f=Date.now(),p=!1,g=function(){p=!0};tT({state:h,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:g,scrollDroppable:g}),a={dragStartTime:f,shouldUseTimeDampening:p},p&&o(h)},u=function(){a&&(i.cancel(),s.cancel(),a=null)};return{start:l,stop:u,scroll:o}},ZW=function(t){var e=t.move,r=t.scrollDroppable,i=t.scrollWindow,s=function(c,h){var f=Qt(c.current.client.selection,h);e({client:f})},a=function(c,h){if(!G_(c,h))return h;var f=YW(c,h);if(!f)return r(c.descriptor.id,h),null;var p=qn(h,f);r(c.descriptor.id,p);var g=qn(h,p);return g},o=function(c,h,f){if(!c||!q_(h,f))return f;var p=KW(h,f);if(!p)return i(f),null;var g=qn(f,p);i(g);var T=qn(f,g);return T},l=function(c){var h=c.scrollJumpRequest;if(h){var f=Yn(c.impact);f||le();var p=a(c.dimensions.droppables[f],h);if(p){var g=c.viewport,T=o(c.isWindowScrollAllowed,g,p);T&&s(c,T)}}};return l},e8=function(t){var e=t.scrollDroppable,r=t.scrollWindow,i=t.move,s=JW({scrollWindow:r,scrollDroppable:e}),a=ZW({move:i,scrollWindow:r,scrollDroppable:e}),o=function(c){if(c.phase==="DRAGGING"){if(c.movementMode==="FLUID"){s.scroll(c);return}c.scrollJumpRequest&&a(c)}},l={scroll:o,start:s.start,stop:s.stop};return l},Mo="data-rbd",Lo=function(){var t=Mo+"-drag-handle";return{base:t,draggableId:t+"-draggable-id",contextId:t+"-context-id"}}(),Ev=function(){var t=Mo+"-draggable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),t8=function(){var t=Mo+"-droppable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),nT={contextId:Mo+"-scroll-container-context-id"},n8=function(e){return function(r){return"["+r+'="'+e+'"]'}},Rl=function(e,r){return e.map(function(i){var s=i.styles[r];return s?i.selector+" { "+s+" }":""}).join(" ")},r8="pointer-events: none;",i8=function(t){var e=n8(t),r=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(Lo.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:r8,dropAnimating:l}}}(),i=function(){var l=`
      transition: `+ou.outOfTheWay+`;
    `;return{selector:e(Ev.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),s={selector:e(t8.contextId),styles:{always:"overflow-anchor: none;"}},a={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[i,r,s,a];return{always:Rl(o,"always"),resting:Rl(o,"resting"),dragging:Rl(o,"dragging"),dropAnimating:Rl(o,"dropAnimating"),userCancel:Rl(o,"userCancel")}},Xn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?L.useLayoutEffect:L.useEffect,Rm=function(){var e=document.querySelector("head");return e||le(),e},rT=function(e){var r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.type="text/css",r};function s8(t,e){var r=We(function(){return i8(t)},[t]),i=L.useRef(null),s=L.useRef(null),a=Te($t(function(f){var p=s.current;p||le(),p.textContent=f}),[]),o=Te(function(f){var p=i.current;p||le(),p.textContent=f},[]);Xn(function(){!i.current&&!s.current||le();var f=rT(e),p=rT(e);return i.current=f,s.current=p,f.setAttribute(Mo+"-always",t),p.setAttribute(Mo+"-dynamic",t),Rm().appendChild(f),Rm().appendChild(p),o(r.always),a(r.resting),function(){var g=function(N){var A=N.current;A||le(),Rm().removeChild(A),N.current=null};g(i),g(s)}},[e,o,a,r.always,r.resting,t]);var l=Te(function(){return a(r.dragging)},[a,r.dragging]),u=Te(function(f){if(f==="DROP"){a(r.dropAnimating);return}a(r.userCancel)},[a,r.dropAnimating,r.userCancel]),c=Te(function(){s.current&&a(r.resting)},[a,r.resting]),h=We(function(){return{dragging:l,dropping:u,resting:c}},[l,u,c]);return h}var vP=function(t){return t&&t.ownerDocument?t.ownerDocument.defaultView:window};function cp(t){return t instanceof vP(t).HTMLElement}function a8(t,e){var r="["+Lo.contextId+'="'+t+'"]',i=FA(document.querySelectorAll(r));if(!i.length)return null;var s=As(i,function(a){return a.getAttribute(Lo.draggableId)===e});return!s||!cp(s)?null:s}function o8(t){var e=L.useRef({}),r=L.useRef(null),i=L.useRef(null),s=L.useRef(!1),a=Te(function(p,g){var T={id:p,focus:g};return e.current[p]=T,function(){var A=e.current,b=A[p];b!==T&&delete A[p]}},[]),o=Te(function(p){var g=a8(t,p);g&&g!==document.activeElement&&g.focus()},[t]),l=Te(function(p,g){r.current===p&&(r.current=g)},[]),u=Te(function(){i.current||s.current&&(i.current=requestAnimationFrame(function(){i.current=null;var p=r.current;p&&o(p)}))},[o]),c=Te(function(p){r.current=null;var g=document.activeElement;g&&g.getAttribute(Lo.draggableId)===p&&(r.current=p)},[]);Xn(function(){return s.current=!0,function(){s.current=!1;var p=i.current;p&&cancelAnimationFrame(p)}},[]);var h=We(function(){return{register:a,tryRecordFocus:c,tryRestoreFocusRecorded:u,tryShiftRecord:l}},[a,c,u,l]);return h}function l8(){var t={draggables:{},droppables:{}},e=[];function r(f){return e.push(f),function(){var g=e.indexOf(f);g!==-1&&e.splice(g,1)}}function i(f){e.length&&e.forEach(function(p){return p(f)})}function s(f){return t.draggables[f]||null}function a(f){var p=s(f);return p||le(),p}var o={register:function(p){t.draggables[p.descriptor.id]=p,i({type:"ADDITION",value:p})},update:function(p,g){var T=t.draggables[g.descriptor.id];T&&T.uniqueId===p.uniqueId&&(delete t.draggables[g.descriptor.id],t.draggables[p.descriptor.id]=p)},unregister:function(p){var g=p.descriptor.id,T=s(g);T&&p.uniqueId===T.uniqueId&&(delete t.draggables[g],i({type:"REMOVAL",value:p}))},getById:a,findById:s,exists:function(p){return!!s(p)},getAllByType:function(p){return Kh(t.draggables).filter(function(g){return g.descriptor.type===p})}};function l(f){return t.droppables[f]||null}function u(f){var p=l(f);return p||le(),p}var c={register:function(p){t.droppables[p.descriptor.id]=p},unregister:function(p){var g=l(p.descriptor.id);g&&p.uniqueId===g.uniqueId&&delete t.droppables[p.descriptor.id]},getById:u,findById:l,exists:function(p){return!!l(p)},getAllByType:function(p){return Kh(t.droppables).filter(function(g){return g.descriptor.type===p})}};function h(){t.draggables={},t.droppables={},e.length=0}return{draggable:o,droppable:c,subscribe:r,clean:h}}function u8(){var t=We(l8,[]);return L.useEffect(function(){return function(){requestAnimationFrame(t.clean)}},[t]),t}var K_=De.createContext(null),Xh=function(){var t=document.body;return t||le(),t},c8={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},d8=function(e){return"rbd-announcement-"+e};function h8(t){var e=We(function(){return d8(t)},[t]),r=L.useRef(null);L.useEffect(function(){var a=document.createElement("div");return r.current=a,a.id=e,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),Ie(a.style,c8),Xh().appendChild(a),function(){setTimeout(function(){var u=Xh();u.contains(a)&&u.removeChild(a),a===r.current&&(r.current=null)})}},[e]);var i=Te(function(s){var a=r.current;if(a){a.textContent=s;return}},[]);return i}var f8=0,p8={separator:"::"};function Y_(t,e){return e===void 0&&(e=p8),We(function(){return""+t+e.separator+f8++},[e.separator,t])}function m8(t){var e=t.contextId,r=t.uniqueId;return"rbd-hidden-text-"+e+"-"+r}function g8(t){var e=t.contextId,r=t.text,i=Y_("hidden-text",{separator:"-"}),s=We(function(){return m8({contextId:e,uniqueId:i})},[i,e]);return L.useEffect(function(){var o=document.createElement("div");return o.id=s,o.textContent=r,o.style.display="none",Xh().appendChild(o),function(){var u=Xh();u.contains(o)&&u.removeChild(o)}},[s,r]),s}var dp=De.createContext(null);function yP(t){var e=L.useRef(t);return L.useEffect(function(){e.current=t}),e}function v8(){var t=null;function e(){return!!t}function r(o){return o===t}function i(o){t&&le();var l={abandon:o};return t=l,l}function s(){t||le(),t=null}function a(){t&&(t.abandon(),s())}return{isClaimed:e,isActive:r,claim:i,release:s,tryAbandon:a}}var y8=9,_8=13,X_=27,_P=32,w8=33,b8=34,x8=35,E8=36,T8=37,S8=38,I8=39,k8=40,md,C8=(md={},md[_8]=!0,md[y8]=!0,md),wP=function(t){C8[t.keyCode]&&t.preventDefault()},hp=function(){var t="visibilitychange";if(typeof document>"u")return t;var e=[t,"ms"+t,"webkit"+t,"moz"+t,"o"+t],r=As(e,function(i){return"on"+i in document});return r||t}(),bP=0,iT=5;function A8(t,e){return Math.abs(e.x-t.x)>=iT||Math.abs(e.y-t.y)>=iT}var sT={type:"IDLE"};function P8(t){var e=t.cancel,r=t.completed,i=t.getPhase,s=t.setPhase;return[{eventName:"mousemove",fn:function(o){var l=o.button,u=o.clientX,c=o.clientY;if(l===bP){var h={x:u,y:c},f=i();if(f.type==="DRAGGING"){o.preventDefault(),f.actions.move(h);return}f.type!=="PENDING"&&le();var p=f.point;if(A8(p,h)){o.preventDefault();var g=f.actions.fluidLift(h);s({type:"DRAGGING",actions:g})}}}},{eventName:"mouseup",fn:function(o){var l=i();if(l.type!=="DRAGGING"){e();return}o.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(o){i().type==="DRAGGING"&&o.preventDefault(),e()}},{eventName:"keydown",fn:function(o){var l=i();if(l.type==="PENDING"){e();return}if(o.keyCode===X_){o.preventDefault(),e();return}wP(o)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){i().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:function(o){var l=i();if(l.type==="IDLE"&&le(),l.actions.shouldRespectForcePress()){e();return}o.preventDefault()}},{eventName:hp,fn:e}]}function R8(t){var e=L.useRef(sT),r=L.useRef(cs),i=We(function(){return{eventName:"mousedown",fn:function(f){if(!f.defaultPrevented&&f.button===bP&&!(f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)){var p=t.findClosestDraggableId(f);if(p){var g=t.tryGetLock(p,o,{sourceEvent:f});if(g){f.preventDefault();var T={x:f.clientX,y:f.clientY};r.current(),c(g,T)}}}}}},[t]),s=We(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(f){if(!f.defaultPrevented){var p=t.findClosestDraggableId(f);if(p){var g=t.findOptionsForDraggable(p);g&&(g.shouldRespectForcePress||t.canGetLock(p)&&f.preventDefault())}}}}},[t]),a=Te(function(){var f={passive:!1,capture:!0};r.current=lr(window,[s,i],f)},[s,i]),o=Te(function(){var h=e.current;h.type!=="IDLE"&&(e.current=sT,r.current(),a())},[a]),l=Te(function(){var h=e.current;o(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[o]),u=Te(function(){var f={capture:!0,passive:!1},p=P8({cancel:l,completed:o,getPhase:function(){return e.current},setPhase:function(T){e.current=T}});r.current=lr(window,p,f)},[l,o]),c=Te(function(f,p){e.current.type!=="IDLE"&&le(),e.current={type:"PENDING",point:p,actions:f},u()},[u]);Xn(function(){return a(),function(){r.current()}},[a])}var Ma;function N8(){}var D8=(Ma={},Ma[b8]=!0,Ma[w8]=!0,Ma[E8]=!0,Ma[x8]=!0,Ma);function M8(t,e){function r(){e(),t.cancel()}function i(){e(),t.drop()}return[{eventName:"keydown",fn:function(a){if(a.keyCode===X_){a.preventDefault(),r();return}if(a.keyCode===_P){a.preventDefault(),i();return}if(a.keyCode===k8){a.preventDefault(),t.moveDown();return}if(a.keyCode===S8){a.preventDefault(),t.moveUp();return}if(a.keyCode===I8){a.preventDefault(),t.moveRight();return}if(a.keyCode===T8){a.preventDefault(),t.moveLeft();return}if(D8[a.keyCode]){a.preventDefault();return}wP(a)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:hp,fn:r}]}function L8(t){var e=L.useRef(N8),r=We(function(){return{eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==_P)return;var o=t.findClosestDraggableId(a);if(!o)return;var l=t.tryGetLock(o,h,{sourceEvent:a});if(!l)return;a.preventDefault();var u=!0,c=l.snapLift();e.current();function h(){u||le(),u=!1,e.current(),i()}e.current=lr(window,M8(c,h),{capture:!0,passive:!1})}}},[t]),i=Te(function(){var a={passive:!1,capture:!0};e.current=lr(window,[r],a)},[r]);Xn(function(){return i(),function(){e.current()}},[i])}var Nm={type:"IDLE"},O8=120,j8=.15;function V8(t){var e=t.cancel,r=t.getPhase;return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:function(s){s.preventDefault()}},{eventName:"keydown",fn:function(s){if(r().type!=="DRAGGING"){e();return}s.keyCode===X_&&s.preventDefault(),e()}},{eventName:hp,fn:e}]}function F8(t){var e=t.cancel,r=t.completed,i=t.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(a){var o=i();if(o.type!=="DRAGGING"){e();return}o.hasMoved=!0;var l=a.touches[0],u=l.clientX,c=l.clientY,h={x:u,y:c};a.preventDefault(),o.actions.move(h)}},{eventName:"touchend",fn:function(a){var o=i();if(o.type!=="DRAGGING"){e();return}a.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(a){if(i().type!=="DRAGGING"){e();return}a.preventDefault(),e()}},{eventName:"touchforcechange",fn:function(a){var o=i();o.type==="IDLE"&&le();var l=a.touches[0];if(l){var u=l.force>=j8;if(u){var c=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){c&&e();return}if(c){if(o.hasMoved){a.preventDefault();return}e();return}a.preventDefault()}}}},{eventName:hp,fn:e}]}function U8(t){var e=L.useRef(Nm),r=L.useRef(cs),i=Te(function(){return e.current},[]),s=Te(function(g){e.current=g},[]),a=We(function(){return{eventName:"touchstart",fn:function(g){if(!g.defaultPrevented){var T=t.findClosestDraggableId(g);if(T){var N=t.tryGetLock(T,l,{sourceEvent:g});if(N){var A=g.touches[0],b=A.clientX,x=A.clientY,w={x:b,y:x};r.current(),f(N,w)}}}}}},[t]),o=Te(function(){var g={capture:!0,passive:!1};r.current=lr(window,[a],g)},[a]),l=Te(function(){var p=e.current;p.type!=="IDLE"&&(p.type==="PENDING"&&clearTimeout(p.longPressTimerId),s(Nm),r.current(),o())},[o,s]),u=Te(function(){var p=e.current;l(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[l]),c=Te(function(){var g={capture:!0,passive:!1},T={cancel:u,completed:l,getPhase:i},N=lr(window,F8(T),g),A=lr(window,V8(T),g);r.current=function(){N(),A()}},[u,i,l]),h=Te(function(){var g=i();g.type!=="PENDING"&&le();var T=g.actions.fluidLift(g.point);s({type:"DRAGGING",actions:T,hasMoved:!1})},[i,s]),f=Te(function(g,T){i().type!=="IDLE"&&le();var N=setTimeout(h,O8);s({type:"PENDING",point:T,actions:g,longPressTimerId:N}),c()},[c,i,s,h]);Xn(function(){return o(),function(){r.current();var T=i();T.type==="PENDING"&&(clearTimeout(T.longPressTimerId),s(Nm))}},[i,o,s]),Xn(function(){var g=lr(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return g},[])}var B8={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function xP(t,e){if(e==null)return!1;var r=!!B8[e.tagName.toLowerCase()];if(r)return!0;var i=e.getAttribute("contenteditable");return i==="true"||i===""?!0:e===t?!1:xP(t,e.parentElement)}function $8(t,e){var r=e.target;return cp(r)?xP(t,r):!1}var z8=function(t){return Ir(t.getBoundingClientRect()).center};function H8(t){return t instanceof vP(t).Element}var W8=function(){var t="matches";if(typeof document>"u")return t;var e=[t,"msMatchesSelector","webkitMatchesSelector"],r=As(e,function(i){return i in Element.prototype});return r||t}();function EP(t,e){return t==null?null:t[W8](e)?t:EP(t.parentElement,e)}function q8(t,e){return t.closest?t.closest(e):EP(t,e)}function G8(t){return"["+Lo.contextId+'="'+t+'"]'}function K8(t,e){var r=e.target;if(!H8(r))return null;var i=G8(t),s=q8(r,i);return!s||!cp(s)?null:s}function Y8(t,e){var r=K8(t,e);return r?r.getAttribute(Lo.draggableId):null}function X8(t,e){var r="["+Ev.contextId+'="'+t+'"]',i=FA(document.querySelectorAll(r)),s=As(i,function(a){return a.getAttribute(Ev.id)===e});return!s||!cp(s)?null:s}function Q8(t){t.preventDefault()}function gd(t){var e=t.expected,r=t.phase,i=t.isLockActive;return t.shouldWarn,!(!i()||e!==r)}function TP(t){var e=t.lockAPI,r=t.store,i=t.registry,s=t.draggableId;if(e.isClaimed())return!1;var a=i.draggable.findById(s);return!(!a||!a.options.isEnabled||!fP(r.getState(),s))}function J8(t){var e=t.lockAPI,r=t.contextId,i=t.store,s=t.registry,a=t.draggableId,o=t.forceSensorStop,l=t.sourceEvent,u=TP({lockAPI:e,store:i,registry:s,draggableId:a});if(!u)return null;var c=s.draggable.getById(a),h=X8(r,c.descriptor.id);if(!h||l&&!c.options.canDragInteractiveElements&&$8(h,l))return null;var f=e.claim(o||cs),p="PRE_DRAG";function g(){return c.options.shouldRespectForcePress}function T(){return e.isActive(f)}function N(V,C){gd({expected:V,phase:p,isLockActive:T,shouldWarn:!0})&&i.dispatch(C())}var A=N.bind(null,"DRAGGING");function b(V){function C(){e.release(),p="COMPLETED"}p!=="PRE_DRAG"&&(C(),p!=="PRE_DRAG"&&le()),i.dispatch(WH(V.liftActionArgs)),p="DRAGGING";function I(y,_){if(_===void 0&&(_={shouldBlockNextClick:!1}),V.cleanup(),_.shouldBlockNextClick){var S=lr(window,[{eventName:"click",fn:Q8,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(S)}C(),i.dispatch(aP({reason:y}))}return Ie({isActive:function(){return gd({expected:"DRAGGING",phase:p,isLockActive:T,shouldWarn:!1})},shouldRespectForcePress:g,drop:function(_){return I("DROP",_)},cancel:function(_){return I("CANCEL",_)}},V.actions)}function x(V){var C=Vu(function(y){A(function(){return sP({client:y})})}),I=b({liftActionArgs:{id:a,clientSelection:V,movementMode:"FLUID"},cleanup:function(){return C.cancel()},actions:{move:C}});return Ie({},I,{move:C})}function w(){var V={moveUp:function(){return A(eW)},moveRight:function(){return A(nW)},moveDown:function(){return A(tW)},moveLeft:function(){return A(rW)}};return b({liftActionArgs:{id:a,clientSelection:z8(h),movementMode:"SNAP"},cleanup:cs,actions:V})}function R(){var V=gd({expected:"PRE_DRAG",phase:p,isLockActive:T,shouldWarn:!0});V&&e.release()}var j={isActive:function(){return gd({expected:"PRE_DRAG",phase:p,isLockActive:T,shouldWarn:!1})},shouldRespectForcePress:g,fluidLift:x,snapLift:w,abort:R};return j}var Z8=[R8,L8,U8];function eq(t){var e=t.contextId,r=t.store,i=t.registry,s=t.customSensors,a=t.enableDefaultSensors,o=[].concat(a?Z8:[],s||[]),l=L.useState(function(){return v8()})[0],u=Te(function(x,w){x.isDragging&&!w.isDragging&&l.tryAbandon()},[l]);Xn(function(){var x=r.getState(),w=r.subscribe(function(){var R=r.getState();u(x,R),x=R});return w},[l,r,u]),Xn(function(){return l.tryAbandon},[l.tryAbandon]);for(var c=Te(function(b){return TP({lockAPI:l,registry:i,store:r,draggableId:b})},[l,i,r]),h=Te(function(b,x,w){return J8({lockAPI:l,registry:i,contextId:e,store:r,draggableId:b,forceSensorStop:x,sourceEvent:w&&w.sourceEvent?w.sourceEvent:null})},[e,l,i,r]),f=Te(function(b){return Y8(e,b)},[e]),p=Te(function(b){var x=i.draggable.findById(b);return x?x.options:null},[i.draggable]),g=Te(function(){l.isClaimed()&&(l.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(U_()))},[l,r]),T=Te(l.isClaimed,[l]),N=We(function(){return{canGetLock:c,tryGetLock:h,findClosestDraggableId:f,findOptionsForDraggable:p,tryReleaseLock:g,isLockClaimed:T}},[c,h,f,p,g,T]),A=0;A<o.length;A++)o[A](N)}var tq=function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}};function Nl(t){return t.current||le(),t.current}function nq(t){var e=t.contextId,r=t.setCallbacks,i=t.sensors,s=t.nonce,a=t.dragHandleUsageInstructions,o=L.useRef(null),l=yP(t),u=Te(function(){return tq(l.current)},[l]),c=h8(e),h=g8({contextId:e,text:a}),f=s8(e,s),p=Te(function(y){Nl(o).dispatch(y)},[]),g=We(function(){return CE({publishWhileDragging:GH,updateDroppableScroll:YH,updateDroppableIsEnabled:XH,updateDroppableIsCombineEnabled:QH,collectionStarting:KH},p)},[p]),T=u8(),N=We(function(){return jW(T,g)},[T,g]),A=We(function(){return e8(Ie({scrollWindow:VW,scrollDroppable:N.scrollDroppable},CE({move:sP},p)))},[N.scrollDroppable,p]),b=o8(e),x=We(function(){return DW({announce:c,autoScroller:A,dimensionMarshal:N,focusMarshal:b,getResponders:u,styleMarshal:f})},[c,A,N,b,u,f]);o.current=x;var w=Te(function(){var y=Nl(o),_=y.getState();_.phase!=="IDLE"&&y.dispatch(U_())},[]),R=Te(function(){var y=Nl(o).getState();return y.isDragging||y.phase==="DROP_ANIMATING"},[]),j=We(function(){return{isDragging:R,tryAbort:w}},[R,w]);r(j);var V=Te(function(y){return fP(Nl(o).getState(),y)},[]),C=Te(function(){return Ws(Nl(o).getState())},[]),I=We(function(){return{marshal:N,focus:b,contextId:e,canLift:V,isMovementAllowed:C,dragHandleUsageInstructionsId:h,registry:T}},[e,N,h,b,V,C,T]);return eq({contextId:e,store:x,registry:T,customSensors:i,enableDefaultSensors:t.enableDefaultSensors!==!1}),L.useEffect(function(){return w},[w]),De.createElement(dp.Provider,{value:I},De.createElement(Tz,{context:K_,store:x},t.children))}var rq=0;function iq(){return We(function(){return""+rq++},[])}function sq(t){var e=iq(),r=t.dragHandleUsageInstructions||Wd.dragHandleUsageInstructions;return De.createElement(L9,null,function(i){return De.createElement(nq,{nonce:t.nonce,contextId:e,setCallbacks:i,dragHandleUsageInstructions:r,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd},t.children)})}var SP=function(e){return function(r){return e===r}},aq=SP("scroll"),oq=SP("auto"),aT=function(e,r){return r(e.overflowX)||r(e.overflowY)},lq=function(e){var r=window.getComputedStyle(e),i={overflowX:r.overflowX,overflowY:r.overflowY};return aT(i,aq)||aT(i,oq)},uq=function(){return!1},cq=function t(e){return e==null?null:e===document.body?uq()?e:null:e===document.documentElement?null:lq(e)?e:t(e.parentElement)},Tv=function(t){return{x:t.scrollLeft,y:t.scrollTop}},dq=function t(e){if(!e)return!1;var r=window.getComputedStyle(e);return r.position==="fixed"?!0:t(e.parentElement)},hq=function(t){var e=cq(t),r=dq(t);return{closestScrollable:e,isFixedOnPage:r}},fq=function(t){var e=t.descriptor,r=t.isEnabled,i=t.isCombineEnabled,s=t.isFixedOnPage,a=t.direction,o=t.client,l=t.page,u=t.closest,c=function(){if(!u)return null;var g=u.scrollSize,T=u.client,N=cP({scrollHeight:g.scrollHeight,scrollWidth:g.scrollWidth,height:T.paddingBox.height,width:T.paddingBox.width});return{pageMarginBox:u.page.marginBox,frameClient:T,scrollSize:g,shouldClipSubject:u.shouldClipSubject,scroll:{initial:u.scroll,current:u.scroll,max:N,diff:{value:zt,displacement:zt}}}}(),h=a==="vertical"?L_:HA,f=Do({page:l,withPlaceholder:null,axis:h,frame:c}),p={descriptor:e,isCombineEnabled:i,isFixedOnPage:s,axis:h,isEnabled:r,client:o,page:l,frame:c,subject:f};return p},pq=function(e,r){var i=MA(e);if(!r||e!==r)return i;var s=i.paddingBox.top-r.scrollTop,a=i.paddingBox.left-r.scrollLeft,o=s+r.scrollHeight,l=a+r.scrollWidth,u={top:s,right:l,bottom:o,left:a},c=P_(u,i.border),h=R_({borderBox:c,margin:i.margin,border:i.border,padding:i.padding});return h},mq=function(t){var e=t.ref,r=t.descriptor,i=t.env,s=t.windowScroll,a=t.direction,o=t.isDropDisabled,l=t.isCombineEnabled,u=t.shouldClipSubject,c=i.closestScrollable,h=pq(e,c),f=Wh(h,s),p=function(){if(!c)return null;var T=MA(c),N={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:T,page:Wh(T,s),scroll:Tv(c),scrollSize:N,shouldClipSubject:u}}(),g=fq({descriptor:r,isEnabled:!o,isCombineEnabled:l,isFixedOnPage:i.isFixedOnPage,direction:a,client:h,page:f,closest:p});return g},gq={passive:!1},vq={passive:!0},oT=function(t){return t.shouldPublishImmediately?gq:vq};function Qh(t){var e=L.useContext(t);return e||le(),e}var vd=function(e){return e&&e.env.closestScrollable||null};function yq(t){var e=L.useRef(null),r=Qh(dp),i=Y_("droppable"),s=r.registry,a=r.marshal,o=yP(t),l=We(function(){return{id:t.droppableId,type:t.type,mode:t.mode}},[t.droppableId,t.mode,t.type]),u=L.useRef(l),c=We(function(){return $t(function(R,j){e.current||le();var V={x:R,y:j};a.updateDroppableScroll(l.id,V)})},[l.id,a]),h=Te(function(){var R=e.current;return!R||!R.env.closestScrollable?zt:Tv(R.env.closestScrollable)},[]),f=Te(function(){var R=h();c(R.x,R.y)},[h,c]),p=We(function(){return Vu(f)},[f]),g=Te(function(){var R=e.current,j=vd(R);R&&j||le();var V=R.scrollOptions;if(V.shouldPublishImmediately){f();return}p()},[p,f]),T=Te(function(R,j){e.current&&le();var V=o.current,C=V.getDroppableRef();C||le();var I=hq(C),y={ref:C,descriptor:l,env:I,scrollOptions:j};e.current=y;var _=mq({ref:C,descriptor:l,env:I,windowScroll:R,direction:V.direction,isDropDisabled:V.isDropDisabled,isCombineEnabled:V.isCombineEnabled,shouldClipSubject:!V.ignoreContainerClipping}),S=I.closestScrollable;return S&&(S.setAttribute(nT.contextId,r.contextId),S.addEventListener("scroll",g,oT(y.scrollOptions))),_},[r.contextId,l,g,o]),N=Te(function(){var R=e.current,j=vd(R);return R&&j||le(),Tv(j)},[]),A=Te(function(){var R=e.current;R||le();var j=vd(R);e.current=null,j&&(p.cancel(),j.removeAttribute(nT.contextId),j.removeEventListener("scroll",g,oT(R.scrollOptions)))},[g,p]),b=Te(function(R){var j=e.current;j||le();var V=vd(j);V||le(),V.scrollTop+=R.y,V.scrollLeft+=R.x},[]),x=We(function(){return{getDimensionAndWatchScroll:T,getScrollWhileDragging:N,dragStopped:A,scroll:b}},[A,T,N,b]),w=We(function(){return{uniqueId:i,descriptor:l,callbacks:x}},[x,l,i]);Xn(function(){return u.current=w.descriptor,s.droppable.register(w),function(){e.current&&A(),s.droppable.unregister(w)}},[x,l,A,w,a,s.droppable]),Xn(function(){e.current&&a.updateDroppableIsEnabled(u.current.id,!t.isDropDisabled)},[t.isDropDisabled,a]),Xn(function(){e.current&&a.updateDroppableIsCombineEnabled(u.current.id,t.isCombineEnabled)},[t.isCombineEnabled,a])}function Dm(){}var lT={width:0,height:0,margin:B9},_q=function(e){var r=e.isAnimatingOpenOnMount,i=e.placeholder,s=e.animate;return r||s==="close"?lT:{height:i.client.borderBox.height,width:i.client.borderBox.width,margin:i.client.margin}},wq=function(e){var r=e.isAnimatingOpenOnMount,i=e.placeholder,s=e.animate,a=_q({isAnimatingOpenOnMount:r,placeholder:i,animate:s});return{display:i.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:s!=="none"?ou.placeholder:null}};function bq(t){var e=L.useRef(null),r=Te(function(){e.current&&(clearTimeout(e.current),e.current=null)},[]),i=t.animate,s=t.onTransitionEnd,a=t.onClose,o=t.contextId,l=L.useState(t.animate==="open"),u=l[0],c=l[1];L.useEffect(function(){return u?i!=="open"?(r(),c(!1),Dm):e.current?Dm:(e.current=setTimeout(function(){e.current=null,c(!1)}),r):Dm},[i,u,r]);var h=Te(function(p){p.propertyName==="height"&&(s(),i==="close"&&a())},[i,a,s]),f=wq({isAnimatingOpenOnMount:u,animate:t.animate,placeholder:t.placeholder});return De.createElement(t.placeholder.tagName,{style:f,"data-rbd-placeholder-context-id":o,onTransitionEnd:h,ref:t.innerRef})}var xq=De.memo(bq),Q_=De.createContext(null),Eq=function(t){fA(e,t);function e(){for(var i,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return i=t.call.apply(t,[this].concat(a))||this,i.state={isVisible:!!i.props.on,data:i.props.on,animate:i.props.shouldAnimate&&i.props.on?"open":"none"},i.onClose=function(){i.state.animate==="close"&&i.setState({isVisible:!1})},i}e.getDerivedStateFromProps=function(s,a){return s.shouldAnimate?s.on?{isVisible:!0,data:s.on,animate:"open"}:a.isVisible?{isVisible:!0,data:a.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!s.on,data:s.on,animate:"none"}};var r=e.prototype;return r.render=function(){if(!this.state.isVisible)return null;var s={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(s)},e}(De.PureComponent),uT={dragging:5e3,dropAnimating:4500},Tq=function(e,r){return r?ou.drop(r.duration):e?ou.snap:ou.fluid},Sq=function(e,r){return e?r?$u.opacity.drop:$u.opacity.combining:null},Iq=function(e){return e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP"};function kq(t){var e=t.dimension,r=e.client,i=t.offset,s=t.combineWith,a=t.dropping,o=!!s,l=Iq(t),u=!!a,c=u?bv.drop(i,o):bv.moveTo(i),h={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Tq(l,a),transform:c,opacity:Sq(o,u),zIndex:u?uT.dropAnimating:uT.dragging,pointerEvents:"none"};return h}function Cq(t){return{transform:bv.moveTo(t.offset),transition:t.shouldAnimateDisplacement?null:"none"}}function Aq(t){return t.type==="DRAGGING"?kq(t):Cq(t)}function Pq(t,e,r){r===void 0&&(r=zt);var i=window.getComputedStyle(e),s=e.getBoundingClientRect(),a=DA(s,i),o=Wh(a,r),l={client:a,tagName:e.tagName.toLowerCase(),display:i.display},u={x:a.marginBox.width,y:a.marginBox.height},c={descriptor:t,placeholder:l,displaceBy:u,client:a,page:o};return c}function Rq(t){var e=Y_("draggable"),r=t.descriptor,i=t.registry,s=t.getDraggableRef,a=t.canDragInteractiveElements,o=t.shouldRespectForcePress,l=t.isEnabled,u=We(function(){return{canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:l}},[a,l,o]),c=Te(function(g){var T=s();return T||le(),Pq(r,T,g)},[r,s]),h=We(function(){return{uniqueId:e,descriptor:r,options:u,getDimension:c}},[r,c,u,e]),f=L.useRef(h),p=L.useRef(!0);Xn(function(){return i.draggable.register(f.current),function(){return i.draggable.unregister(f.current)}},[i.draggable]),Xn(function(){if(p.current){p.current=!1;return}var g=f.current;f.current=h,i.draggable.update(h,g)},[h,i.draggable])}function Nq(t){t.preventDefault()}function Dq(t){var e=L.useRef(null),r=Te(function(y){e.current=y},[]),i=Te(function(){return e.current},[]),s=Qh(dp),a=s.contextId,o=s.dragHandleUsageInstructionsId,l=s.registry,u=Qh(Q_),c=u.type,h=u.droppableId,f=We(function(){return{id:t.draggableId,index:t.index,type:c,droppableId:h}},[t.draggableId,t.index,c,h]),p=t.children,g=t.draggableId,T=t.isEnabled,N=t.shouldRespectForcePress,A=t.canDragInteractiveElements,b=t.isClone,x=t.mapped,w=t.dropAnimationFinished;if(!b){var R=We(function(){return{descriptor:f,registry:l,getDraggableRef:i,canDragInteractiveElements:A,shouldRespectForcePress:N,isEnabled:T}},[f,l,i,A,N,T]);Rq(R)}var j=We(function(){return T?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":g,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:Nq}:null},[a,o,g,T]),V=Te(function(y){x.type==="DRAGGING"&&x.dropping&&y.propertyName==="transform"&&w()},[w,x]),C=We(function(){var y=Aq(x),_=x.type==="DRAGGING"&&x.dropping?V:null,S={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":g,style:y,onTransitionEnd:_},dragHandleProps:j};return S},[a,j,g,x,V,r]),I=We(function(){return{draggableId:f.id,type:f.type,source:{index:f.index,droppableId:f.droppableId}}},[f.droppableId,f.id,f.index,f.type]);return p(C,x.snapshot,I)}var IP=function(t,e){return t===e},kP=function(t){var e=t.combine,r=t.destination;return r?r.droppableId:e?e.droppableId:null},Mq=function(e){return e.combine?e.combine.draggableId:null},Lq=function(e){return e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null};function Oq(){var t=$t(function(s,a){return{x:s,y:a}}),e=$t(function(s,a,o,l,u){return{isDragging:!0,isClone:a,isDropAnimating:!!u,dropAnimation:u,mode:s,draggingOver:o,combineWith:l,combineTargetFor:null}}),r=$t(function(s,a,o,l,u,c,h){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:u,combineWith:c,mode:a,offset:s,dimension:o,forceShouldAnimate:h,snapshot:e(a,l,u,c,null)}}}),i=function(a,o){if(a.isDragging){if(a.critical.draggable.id!==o.draggableId)return null;var l=a.current.client.offset,u=a.dimensions.draggables[o.draggableId],c=Yn(a.impact),h=Lq(a.impact),f=a.forceShouldAnimate;return r(t(l.x,l.y),a.movementMode,u,o.isClone,c,h,f)}if(a.phase==="DROP_ANIMATING"){var p=a.completed;if(p.result.draggableId!==o.draggableId)return null;var g=o.isClone,T=a.dimensions.draggables[o.draggableId],N=p.result,A=N.mode,b=kP(N),x=Mq(N),w=a.dropDuration,R={duration:w,curve:$_.drop,moveTo:a.newHomeClientOffset,opacity:x?$u.opacity.drop:null,scale:x?$u.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:T,dropping:R,draggingOver:b,combineWith:x,mode:A,forceShouldAnimate:null,snapshot:e(A,g,b,x,R)}}}return null};return i}function CP(t){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}var jq={mapped:{type:"SECONDARY",offset:zt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:CP(null)}};function Vq(){var t=$t(function(o,l){return{x:o,y:l}}),e=$t(CP),r=$t(function(o,l,u){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:u,snapshot:e(l)}}}),i=function(l){return l?r(zt,l,!0):null},s=function(l,u,c,h){var f=c.displaced.visible[l],p=!!(h.inVirtualList&&h.effected[l]),g=op(c),T=g&&g.draggableId===l?u:null;if(!f){if(!p)return i(T);if(c.displaced.invisible[l])return null;var N=Qo(h.displacedBy.point),A=t(N.x,N.y);return r(A,T,!0)}if(p)return i(T);var b=c.displacedBy.point,x=t(b.x,b.y);return r(x,T,f.shouldAnimate)},a=function(l,u){if(l.isDragging)return l.critical.draggable.id===u.draggableId?null:s(u.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var c=l.completed;return c.result.draggableId===u.draggableId?null:s(u.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null};return a}var Fq=function(){var e=Oq(),r=Vq(),i=function(a,o){return e(a,o)||r(a,o)||jq};return i},Uq={dropAnimationFinished:oP},Bq=RA(Fq,Uq,null,{context:K_,pure:!0,areStatePropsEqual:IP})(Dq);function AP(t){var e=Qh(Q_),r=e.isUsingCloneFor;return r===t.draggableId&&!t.isClone?null:De.createElement(Bq,t)}function $q(t){var e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,r=!!t.disableInteractiveElementBlocking,i=!!t.shouldRespectForcePress;return De.createElement(AP,Ie({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:r,shouldRespectForcePress:i}))}function zq(t){var e=L.useContext(dp);e||le();var r=e.contextId,i=e.isMovementAllowed,s=L.useRef(null),a=L.useRef(null),o=t.children,l=t.droppableId,u=t.type,c=t.mode,h=t.direction,f=t.ignoreContainerClipping,p=t.isDropDisabled,g=t.isCombineEnabled,T=t.snapshot,N=t.useClone,A=t.updateViewportMaxScroll,b=t.getContainerForClone,x=Te(function(){return s.current},[]),w=Te(function(S){s.current=S},[]);Te(function(){return a.current},[]);var R=Te(function(S){a.current=S},[]),j=Te(function(){i()&&A({maxScroll:hP()})},[i,A]);yq({droppableId:l,type:u,mode:c,direction:h,isDropDisabled:p,isCombineEnabled:g,ignoreContainerClipping:f,getDroppableRef:x});var V=De.createElement(Eq,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},function(S){var M=S.onClose,D=S.data,K=S.animate;return De.createElement(xq,{placeholder:D,onClose:M,innerRef:R,animate:K,contextId:r,onTransitionEnd:j})}),C=We(function(){return{innerRef:w,placeholder:V,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":r}}},[r,l,V,w]),I=N?N.dragging.draggableId:null,y=We(function(){return{droppableId:l,type:u,isUsingCloneFor:I}},[l,I,u]);function _(){if(!N)return null;var S=N.dragging,M=N.render,D=De.createElement(AP,{draggableId:S.draggableId,index:S.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(K,ee){return M(K,ee,S)});return wD.createPortal(D,b())}return De.createElement(Q_.Provider,{value:y},o(C,T),_())}var Mm=function(e,r){return e===r.droppable.type},cT=function(e,r){return r.draggables[e.draggable.id]},Hq=function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=Ie({},e,{shouldAnimatePlaceholder:!1}),i=$t(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),s=$t(function(o,l,u,c,h,f){var p=h.descriptor.id,g=h.descriptor.droppableId===o;if(g){var T=f?{render:f,dragging:i(h.descriptor)}:null,N={isDraggingOver:u,draggingOverWith:u?p:null,draggingFromThisWith:p,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!1,snapshot:N,useClone:T}}if(!l)return r;if(!c)return e;var A={isDraggingOver:u,draggingOverWith:p,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!0,snapshot:A,useClone:null}}),a=function(l,u){var c=u.droppableId,h=u.type,f=!u.isDropDisabled,p=u.renderClone;if(l.isDragging){var g=l.critical;if(!Mm(h,g))return r;var T=cT(g,l.dimensions),N=Yn(l.impact)===c;return s(c,f,N,N,T,p)}if(l.phase==="DROP_ANIMATING"){var A=l.completed;if(!Mm(h,A.critical))return r;var b=cT(A.critical,l.dimensions);return s(c,f,kP(A.result)===c,Yn(A.impact)===c,b,p)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var x=l.completed;if(!Mm(h,x.critical))return r;var w=Yn(x.impact)===c,R=!!(x.impact.at&&x.impact.at.type==="COMBINE"),j=x.critical.droppable.id===c;return w?R?e:r:j?e:r}return r};return a},Wq={updateViewportMaxScroll:ZH};function qq(){return document.body||le(),document.body}var Gq={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:qq},PP=RA(Hq,Wq,null,{context:K_,pure:!0,areStatePropsEqual:IP})(zq);PP.defaultProps=Gq;function Kq(){const[t]=Cy(),[e,r]=L.useState([]),[i,s]=L.useState(0),[a,o]=L.useState(!0),[l,u]=L.useState(null),[c,h]=L.useState(!1),[f,p]=L.useState(!1),[g,T]=L.useState("");L.useRef(null),L.useRef(null),L.useEffect(()=>{const R=t.get("keywords");R&&searchAndBuildPlaylist(R)},[t]);const N=R=>{const j=R==null?void 0:R.match(/embed\/([a-zA-Z0-9_-]+)/);return j?j[1]:null},A=R=>{if(!R.destination)return;const j=Array.from(e),[V]=j.splice(R.source.index,1);j.splice(R.destination.index,0,V);const C=j.map((I,y)=>({...I,playlistOrder:y}));r(C),b(C)},b=async R=>{try{const j=t.get("keywords"),V=ko(Rt,"keywordPlaylists",j);await tv(V,{items:R.map(C=>({documentName:C.documentName,playlistOrder:C.playlistOrder}))})}catch(j){console.error("Error saving playlist order:",j)}},x=()=>{p(!0),T(document.getElementById("overallSummaryContent").innerText)},w=async()=>{try{const R=t.get("keywords"),j=ko(Rt,"keywordSummaries",R);await tv(j,{summary:g}),document.getElementById("overallSummaryContent").innerText=g,p(!1)}catch(R){console.error("Error saving description:",R)}};return m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[m.jsx("div",{className:"lg:col-span-1",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Playlist Info"}),m.jsxs("p",{id:"totalDuration",children:["Total Duration: ",formatTime(getTotalPlaylistDuration(e))]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("h3",{className:"text-xl font-semibold",children:"Playlist Summary"}),m.jsx("button",{onClick:x,className:"text-blue-500 hover:text-blue-700",children:" Edit"})]}),f?m.jsxs("div",{className:"space-y-2",children:[m.jsx("textarea",{value:g,onChange:R=>T(R.target.value),className:"w-full h-40 p-2 border rounded"}),m.jsxs("div",{className:"flex justify-end space-x-2",children:[m.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),m.jsx("button",{onClick:w,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"})]})]}):m.jsx("p",{id:"overallSummaryContent",className:"text-gray-700"})]})]})}),m.jsx("div",{className:"lg:col-span-2",children:m.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:currentVideo&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("h2",{className:"text-2xl font-bold",children:currentVideo.name}),m.jsx("p",{className:"text-gray-600",children:currentVideo.role})]}),m.jsx("div",{id:"player",className:"w-full aspect-video mb-4"}),m.jsx(sq,{onDragEnd:A,children:m.jsx(PP,{droppableId:"timeline",direction:"horizontal",children:R=>m.jsx("div",{ref:R.innerRef,...R.droppableProps,className:"relative h-20 bg-gray-100 rounded mb-4",children:m.jsxs("div",{className:"absolute inset-0 flex",children:[e.map((j,V)=>m.jsx($q,{draggableId:`${j.documentName}-${V}`,index:V,children:(C,I)=>m.jsx("div",{ref:C.innerRef,...C.draggableProps,...C.dragHandleProps,className:`relative h-full cursor-move transition-colors
                                    ${V===i?"bg-blue-500":"bg-gray-300"}
                                    ${I.isDragging?"ring-2 ring-blue-400":""}`,style:{...C.draggableProps.style,width:`${RP(j)/Yq(e)*100}%`},children:m.jsx("img",{src:`https://img.youtube.com/vi/${N(j.videoEmbedLink)}/default.jpg`,alt:"Thumbnail",className:"absolute inset-0 w-full h-full object-cover opacity-50"})})},`${j.documentName}-${V}`)),R.placeholder]})})})}),m.jsxs("div",{className:"flex justify-center space-x-4",children:[m.jsx("button",{onClick:handleSkipPrevious,disabled:i===0,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:m.jsx("span",{className:"material-icons",children:"skip_previous"})}),m.jsx("button",{onClick:handlePlayPause,className:"p-2 rounded-full bg-blue-500 hover:bg-blue-600 text-white",children:m.jsx("span",{id:"playPauseIcon",className:"material-icons",children:"pause"})}),m.jsx("button",{onClick:handleSkipNext,disabled:i===e.length-1,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:m.jsx("span",{className:"material-icons",children:"skip_next"})})]}),m.jsxs("div",{className:"mt-6",children:[m.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Summary"}),m.jsx("p",{className:"text-gray-700",children:currentVideo.summary})]})]})})})]})})}function RP(t){const e=convertTimestampToSeconds(extractStartTimestamp(t.timestamp));return convertTimestampToSeconds(extractStartTimestamp(t.timestamp.split(" - ")[1]))-e}function Yq(t){return t.reduce((e,r)=>e+RP(r),0)}function Xq(){const[t,e]=L.useState(!0),[r,i]=L.useState(null),[s,a]=L.useState([]),[o,l]=L.useState(null),[u,c]=L.useState(""),h=Jr();L.useEffect(()=>{f()},[]);const f=async()=>{try{e(!0);const w={},R=await Mn(fn(Rt,"interviewSummaries"));for(const V of R.docs){const C=V.id,I=fn(Rt,"interviewSummaries",C,"subSummaries");(await Mn(I)).forEach(_=>{const S=_.data();S.keywords&&S.keywords.split(",").map(D=>D.trim().toLowerCase()).forEach(D=>{w[D]||(w[D]={count:0,summaries:[]}),w[D].count++,w[D].summaries.push(S)})})}const j=Object.entries(w).map(([V,C])=>{let I=0;return C.summaries.forEach(y=>{if(y.timestamp&&y.timestamp.includes(" - ")){const _=p(y.timestamp),S=p(y.timestamp.split(" - ")[1]);I+=Math.max(0,g(S)-g(_))}}),{keyword:V,count:C.count,totalLengthSeconds:I,summaries:C.summaries}}).sort((V,C)=>C.count-V.count);a(j),e(!1)}catch(w){console.error("Error fetching keywords:",w),i("Failed to load keyword data"),e(!1)}},p=w=>{const R=w.match(/(?:\[)?(\d{1,2}:\d{2}(?::\d{2})?)/);return R?R[1]:"00:00"},g=w=>{const R=w.split(":").map(Number);return R.length===2?R[0]*60+R[1]:R.length===3?R[0]*3600+R[1]*60+R[2]:0},T=w=>{const R=Math.floor(w/3600),j=Math.floor(w%3600/60),V=w%60;return R>0?`${R}:${j.toString().padStart(2,"0")}:${V.toString().padStart(2,"0")}`:`${j}:${V.toString().padStart(2,"0")}`},N=w=>{l(o===w?null:w)},A=w=>{h(`/playlist-builder?keywords=${encodeURIComponent(w)}`)},b=w=>{h(`/playlist-editor?keywords=${encodeURIComponent(w)}`)},x=u?s.filter(w=>w.keyword.toLowerCase().includes(u.toLowerCase())):s;return t?m.jsxs("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:[m.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),m.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):r?m.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:m.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg shadow-sm",children:r})}):m.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Keyword Directory"}),m.jsx("p",{className:"text-base text-gray-600 max-w-3xl leading-relaxed",children:"Browse all keywords from the interview collection. Click on any keyword to see details, or create a custom playlist based on specific keywords."})]}),m.jsx("div",{className:"mb-6",children:m.jsxs("div",{className:"max-w-md",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter Keywords"}),m.jsx("input",{type:"text",placeholder:"Type to filter...",value:u,onChange:w=>c(w.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})}),m.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"flex flex-col items-center p-4 bg-blue-50 rounded-lg",children:[m.jsx("div",{className:"text-2xl font-bold text-blue-800 mb-2",children:s.length}),m.jsx("div",{className:"text-sm text-gray-500",children:"Total Keywords"})]}),m.jsxs("div",{className:"flex flex-col items-center p-4 bg-green-50 rounded-lg",children:[m.jsx("div",{className:"text-2xl font-bold text-green-800 mb-2",children:s.reduce((w,R)=>w+R.count,0)}),m.jsx("div",{className:"text-sm text-gray-500",children:"Total Clips"})]}),m.jsxs("div",{className:"flex flex-col items-center p-4 bg-purple-50 rounded-lg",children:[m.jsx("div",{className:"text-2xl font-bold text-purple-800 mb-2",children:T(s.reduce((w,R)=>w+R.totalLengthSeconds,0))}),m.jsx("div",{className:"text-sm text-gray-500",children:"Total Content Duration"})]})]})}),m.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:x.length===0?m.jsx("div",{className:"p-6 text-center text-gray-500",children:"No keywords found matching your search."}):m.jsx("ul",{className:"list-none m-0 p-0 border-t border-gray-100",children:x.map(w=>m.jsx("li",{className:"border-b border-gray-100 transition-colors hover:bg-gray-50",children:m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-blue-600 mb-2 cursor-pointer transition-colors hover:text-blue-800",onClick:()=>N(w.keyword),children:w.keyword}),m.jsxs("div",{className:"my-2",children:[m.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-blue-100 text-blue-800 text-xs font-medium mr-2",children:[w.count," clips"]}),m.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-green-100 text-green-800 text-xs font-medium",children:[T(w.totalLengthSeconds)," total length"]})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs("button",{onClick:()=>A(w.keyword),className:"inline-flex items-center px-3 py-2 border-0 rounded-md bg-blue-600 text-white text-sm font-medium cursor-pointer transition-colors hover:bg-blue-700",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"mr-1.5",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Play"]}),m.jsxs("button",{onClick:()=>b(w.keyword),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md bg-white text-gray-600 text-sm font-medium cursor-pointer transition-colors hover:bg-gray-50",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"mr-1.5",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]})]})]}),o===w.keyword&&m.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[m.jsx("h4",{className:"text-base font-medium text-gray-600 mb-4",children:"Recent Clips:"}),m.jsx("div",{className:"flex flex-col gap-4",children:w.summaries.slice(0,3).map((R,j)=>m.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-xs text-gray-500",children:R.timestamp}),R.documentName&&m.jsx("span",{className:"text-xs font-medium text-blue-600",children:R.documentName})]}),m.jsxs("p",{className:"mt-2 text-gray-600 text-sm leading-relaxed",children:[R.summary.substring(0,200),R.summary.length>200?"...":""]})]},j))}),w.summaries.length>3&&m.jsx("div",{className:"mt-4 text-right",children:m.jsxs("button",{onClick:()=>A(w.keyword),className:"text-blue-600 text-sm font-medium bg-transparent border-0 cursor-pointer transition-colors hover:text-blue-800",children:["View all ",w.summaries.length," clips "]})})]})]})},w.keyword))})})]})}function Qq(){const[t,e]=L.useState(!1),[r,i]=L.useState(null),[s,a]=L.useState(null),o=L.useRef(null),[l,u]=L.useState(null),[c,h]=L.useState(1),f=async(b,x)=>{try{e(!0),i(null);const w=prompt("Enter the name of the document for this interview:");if(!w){i("Document name is required");return}const R=await p(b),j=await g(R);await N(w.trim(),j),a(j),h(2)}catch(w){console.error("Error processing files:",w),i("Failed to process transcript")}finally{e(!1)}},p=b=>new Promise((x,w)=>{const R=new FileReader;R.onload=j=>x(j.target.result),R.onerror=j=>w(j),R.readAsText(b)});console.log(void 0);const g=async(b,x=3,w=2e3)=>{try{const V=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer undefined"},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:`
        You are an assistant that processes interview transcripts into structured summaries with timestamps and keywords.
        
        Always output the content in the following strict format:
        Overall Summary:
        [Provide a concise overall summary here.]
        
        Key Points:
        1. Title: [First key topic]
           Timestamp: [Start time - End time]
           Keywords: [Comma-separated list of keywords]
           Summary: [Provide a short summary of the first key topic.]
      `},{role:"user",content:`Here is a transcript:
${b}

Generate an overall summary, key points with timestamps, and keywords.`}],max_tokens:1e3})});if(!V.ok){if(V.status===429&&x>0)return console.warn(`Rate limit exceeded. Retrying in ${w}ms...`),await new Promise(I=>setTimeout(I,w)),g(b,x-1,w*2);throw new Error(`API request failed: ${V.statusText}`)}const C=await V.json();return T(C.choices[0].message.content)}catch(R){throw console.error("Error communicating with OpenAI API:",R),R}},T=b=>{const x=b.match(/Overall Summary:\s*(.+)/i),w=x?x[1].trim():"No summary found.",R=[],j=/\d+\.\s*Title:\s*(.+?)\s*Timestamp:\s*(.+?)\s*Keywords:\s*(.+?)\s*Summary:\s*(.+?)(?=\d+\.|$)/gs;let V;for(;(V=j.exec(b))!==null;)R.push({topic:V[1].trim(),timestamp:V[2].trim(),keywords:V[3].trim(),summary:V[4].trim()});return{overallSummary:w,keyPoints:R}},N=async(b,x)=>{try{const w=ko(fn(Rt,"interviewSummaries"),b);await yx(w,{documentName:b,mainSummary:x.overallSummary,createdAt:new Date});for(const R of x.keyPoints){const j=R.topic.replace(/[^a-zA-Z0-9-_]/g,"_"),V=ko(fn(Rt,"interviewSummaries",b,"subSummaries"),j);await yx(V,{topic:R.topic,timestamp:R.timestamp,keywords:R.keywords,summary:R.summary})}}catch(w){throw console.error("Error storing processed transcript:",w),w}},A=b=>{if(!o.current)return;const x=b.split(" - ")[0],w=x.split(":").map(Number);if(w.length!==2||w.some(isNaN)){console.error("Invalid timestamp format:",x);return}const R=w[0],j=w[1],V=R*60+j;isFinite(V)&&(o.current.currentTime=V,o.current.play())};return m.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("h1",{className:"text-2xl font-bold mb-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text",children:"Transcript Summarizer"}),m.jsx("p",{className:"text-base leading-relaxed text-gray-600 max-w-3xl",children:"Upload interview transcripts to generate AI-powered summaries with timestamps and keywords"})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[c===1&&m.jsxs("div",{className:"p-8",children:[m.jsxs("div",{className:"mb-8",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-900 flex items-center",children:[m.jsx(fC,{className:"mr-2 text-blue-600",size:20}),"Upload Interview Files"]}),m.jsxs("div",{className:"flex flex-col gap-6",children:[m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Transcript File (.txt)"}),m.jsx("div",{className:"flex items-center justify-center w-full",children:m.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer bg-white hover:bg-gray-100 transition-colors p-4",children:[m.jsxs("div",{className:"flex flex-col items-center justify-center",children:[m.jsx(_x,{className:"w-10 h-10 mb-3 text-gray-400"}),m.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[m.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),m.jsx("p",{className:"text-xs text-gray-500",children:"Upload your interview transcript file (TXT)"})]}),m.jsx("input",{type:"file",accept:".txt",className:"hidden",onChange:b=>{var x;return((x=b.target.files)==null?void 0:x[0])&&f(b.target.files[0],null)}})]})})]}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Audio File (optional)"}),m.jsx("div",{className:"flex items-center justify-center w-full",children:m.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer bg-white hover:bg-gray-100 transition-colors p-4",children:[m.jsxs("div",{className:"flex flex-col items-center justify-center",children:[m.jsx(_x,{className:"w-10 h-10 mb-3 text-gray-400"}),m.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[m.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),m.jsx("p",{className:"text-xs text-gray-500",children:"MP3, WAV, or other audio formats"})]}),m.jsx("input",{type:"file",accept:"audio/*",className:"hidden",onChange:b=>{var x;return((x=b.target.files)==null?void 0:x[0])&&u(URL.createObjectURL(b.target.files[0]))}})]})})]})]})]}),l&&m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[m.jsx("h3",{className:"text-base font-medium mb-3 text-gray-900",children:"Audio Preview"}),m.jsx("audio",{ref:o,src:l,controls:!0,className:"w-full"})]})]}),t&&m.jsxs("div",{className:"flex flex-col justify-center items-center py-20",children:[m.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-500 rounded-full animate-spin mb-4"}),m.jsx("p",{className:"text-gray-500 animate-pulse",children:"Processing transcript..."}),m.jsx("style",{children:`
              @keyframes spin {
                to { transform: rotate(360deg); }
              }
              @keyframes pulse {
                0%, 100% { opacity: 1; }
                50% { opacity: 0.5; }
              }
            `})]}),r&&m.jsx("div",{className:"m-8 bg-red-100 border border-red-300 text-red-700 px-6 py-4 rounded-lg",children:m.jsxs("div",{className:"flex",children:[m.jsx("svg",{className:"w-6 h-6 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Error"}),m.jsx("p",{className:"text-sm",children:r})]})]})}),c===2&&s&&m.jsxs("div",{children:[l&&m.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6",children:m.jsx("audio",{ref:o,src:l,controls:!0,className:"w-full"})}),m.jsxs("div",{className:"p-8 border-b border-gray-200",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Overall Summary"}),m.jsx("p",{className:"text-gray-600 leading-relaxed text-base",children:s.overallSummary})]}),m.jsxs("div",{className:"p-8",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:"Key Points"}),m.jsx("div",{className:"flex flex-col gap-6",children:s.keyPoints.map((b,x)=>m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 transition-all duration-300 shadow-sm hover:shadow-md",children:[m.jsxs("div",{className:"flex items-start mb-4",children:[m.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 mr-3 flex-shrink-0 font-semibold",children:x+1}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:b.topic})]}),m.jsxs("div",{className:"flex items-center mb-4 text-blue-600 hover:text-blue-800 cursor-pointer transition-colors",onClick:()=>A(b.timestamp),children:[m.jsx(hC,{size:16,className:"mr-2"}),m.jsx("span",{className:"font-medium",children:b.timestamp})]}),m.jsx("div",{className:"mb-4",children:m.jsxs("div",{className:"flex items-start mb-2",children:[m.jsx(B3,{size:16,className:"mr-2 text-gray-500 mt-0.5"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:b.keywords.split(",").map((w,R)=>m.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-xs rounded-full font-medium",children:w.trim()},R))})]})}),m.jsx("p",{className:"text-gray-600 leading-relaxed text-sm",children:b.summary})]},x))})]}),m.jsx("div",{className:"p-8 border-t border-gray-200 flex justify-center",children:m.jsxs("button",{onClick:()=>{h(1),a(null),u(null),i(null)},className:"flex items-center px-6 py-3 bg-gray-100 text-gray-600 font-medium rounded-lg hover:bg-gray-200 transition-colors",children:[m.jsx(y3,{className:"w-5 h-5 mr-2 transform rotate-180"}),"Process Another Transcript"]})})]})]})]})}function Jq(){const[t,e]=L.useState(""),r=Jr(),i=s=>{s.preventDefault(),t.trim()?r(`/playlist-builder?keywords=${encodeURIComponent(t)}`):alert("Please enter at least one keyword.")};return m.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans flex flex-col items-center justify-center",children:[m.jsxs("div",{className:"w-full max-w-3xl text-center mb-16",children:[m.jsx("h1",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text",children:"Search Interviews"}),m.jsx("p",{className:"text-base leading-relaxed text-gray-600 mb-10 max-w-xl mx-auto",children:"Enter keywords separated by commas to find relevant interviews and create custom playlists"}),m.jsx("form",{onSubmit:i,className:"w-full",children:m.jsxs("div",{className:"relative w-full",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:m.jsx(pC,{className:"w-5 h-5 text-gray-500"})}),m.jsx("input",{type:"text",value:t,onChange:s=>e(s.target.value),placeholder:"civil rights, voting, education...",className:"w-full pl-12 pr-32 py-5 border border-gray-200 bg-white rounded-xl shadow-sm outline-none text-base text-gray-900 transition-all duration-300 focus:shadow-blue-300 focus:ring-2 focus:ring-blue-500"}),m.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-medium rounded-lg shadow-sm border-none cursor-pointer transition-all duration-300 hover:from-blue-700 hover:to-indigo-700 hover:shadow-md",children:"Search"})]})})]}),m.jsx("div",{className:"w-full max-w-3xl",children:m.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Popular Keywords"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:["civil rights","voting","education","segregation","protests","leadership","communities","legislation","equality","freedom"].map(s=>m.jsx("button",{onClick:()=>{e(s),r(`/playlist-builder?keywords=${encodeURIComponent(s)}`)},className:"px-4 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm border-none cursor-pointer transition-colors duration-200 hover:bg-blue-100 hover:text-blue-800",children:s},s))})]})})]})}function Zq(){const[t]=Cy(),e=t.get("documentName"),[r,i]=L.useState(!0),[s,a]=L.useState(null),[o,l]=L.useState(null),[u,c]=L.useState([]),[h,f]=L.useState(null),[p,g]=L.useState(!1),[T,N]=L.useState(!1),[A,b]=L.useState(null),x=L.useRef(null),w=y=>{if(!y)return null;const _=y.match(/(?:embed\/|watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return _?_[1]:null},R=y=>{if(!y)return 0;const S=y.split(" - ")[0].replace(/[\[\]]/g,"").trim().split(":").map(Number);return S.length===3?S[0]*3600+S[1]*60+S[2]:S.length===2?S[0]*60+S[1]:0},j=y=>Array.isArray(y)?y:typeof y=="string"?y.split(",").map(_=>_.trim()):[];L.useEffect(()=>{if(!e){a("Document name is missing"),i(!1);return}async function y(){try{i(!0);const _=ko(Rt,"interviewSummaries",e),S=await a3(_);if(!S.exists()){a("Interview not found"),i(!1);return}const M=S.data();l(M);const D=fn(Rt,"interviewSummaries",e,"subSummaries"),K=await Mn(D),ee=[];K.forEach(re=>{ee.push({id:re.id,...re.data()})}),ee.sort((re,pe)=>R(re.timestamp)-R(pe.timestamp)),c(ee),i(!1)}catch(_){console.error("Error fetching interview data:",_),a("Failed to load interview data"),i(!1)}}y()},[e]),L.useEffect(()=>{if(window.YT&&window.YT.Player){N(!0);return}const y=document.createElement("script");y.src="https://www.youtube.com/iframe_api",y.async=!0,y.onload=()=>{window.YT&&window.YT.Player&&N(!0)},document.body.appendChild(y),window.onYouTubeIframeAPIReady=()=>{N(!0)}},[]),L.useEffect(()=>{if(!T||!(o!=null&&o.videoEmbedLink)||!A)return;const y=w(o.videoEmbedLink);if(!y){console.error("Invalid YouTube video link");return}return x.current&&typeof x.current.destroy=="function"&&(x.current.destroy(),g(!1)),x.current=new window.YT.Player(A,{videoId:y,width:"100%",height:"100%",playerVars:{autoplay:0,controls:1,rel:0,modestbranding:1},events:{onReady:()=>{g(!0),console.log("Player is ready")},onError:_=>{console.error("YouTube player error:",_.data)}}}),()=>{x.current&&typeof x.current.destroy=="function"&&(x.current.destroy(),x.current=null)}},[T,o,A]);const V=y=>{console.log("Seeking to",y,"seconds"),x.current&&typeof x.current.seekTo=="function"&&(x.current.seekTo(y,!0),x.current.playVideo())},C=y=>{f(h===y?null:y)},I=({summary:y,index:_,isOpen:S})=>{const M=L.useRef(null),[D,K]=L.useState(0);L.useEffect(()=>{M.current&&K(M.current.scrollHeight)},[S,y]);const ee=R(y.timestamp),re=j(y.keywords);return m.jsxs("div",{className:"accordion-item border-b border-gray-200 dark:border-gray-700",children:[m.jsxs("button",{onClick:()=>C(_),className:`w-full flex items-center justify-between p-4 text-left transition-colors ${S?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"text-gray-800 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700/30"}`,children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("span",{className:"w-6 h-6 bg-blue-100 dark:bg-blue-900/40 rounded-full flex items-center justify-center text-blue-700 dark:text-blue-300 font-bold mr-3",children:_+1}),m.jsx("span",{className:"font-bold",children:y.topic})]}),S?m.jsx(w3,{size:18}):m.jsx(g3,{size:18})]}),m.jsx("div",{style:{height:S?D:0,overflow:"hidden",transition:"height 0.3s ease"},children:m.jsxs("div",{ref:M,className:"p-4 bg-gray-50 dark:bg-gray-800",children:[m.jsxs("button",{onClick:pe=>{pe.stopPropagation(),V(ee)},className:`flex items-center mb-4 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors ${p?"cursor-pointer":"opacity-50 cursor-wait"}`,disabled:!p,children:[m.jsx(hC,{size:16,className:"mr-2"}),m.jsx("span",{className:"font-bold",children:y.timestamp?y.timestamp.split(" - ")[0].replace(/[\[\]]/g,"").trim():"Unknown time"})]}),re.length>0&&m.jsx("div",{className:"mb-4 text-sm",children:m.jsx("span",{className:"font-bold",children:re.map((pe,q)=>m.jsxs("span",{children:[pe,q<re.length-1?", ":""]},q))})}),m.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:y.summary})]})})]})};return r?m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):s?m.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800/30 text-red-700 dark:text-red-300 px-6 py-4 rounded-xl",children:m.jsxs("p",{children:[m.jsx("strong",{children:"Error:"})," ",s]})}):m.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[m.jsxs("div",{className:"w-full relative bg-black",style:{height:"360px"},children:[m.jsx("div",{className:"absolute inset-0",ref:b}),!p&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 pointer-events-none",children:m.jsx("div",{className:"w-10 h-10 border-4 border-white/50 border-t-white rounded-full animate-spin"})})]}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden",children:m.jsxs("div",{className:"p-6 border-t border-gray-100 dark:border-gray-700",children:[m.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800 dark:text-white",children:"Overview"}),m.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:(o==null?void 0:o.mainSummary)||"No summary available"})]})}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden",children:[m.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700",children:m.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Interview Segments"})}),u.map((y,_)=>m.jsx(I,{summary:y,index:_,isOpen:h===_},y.id||_)),u.length===0&&m.jsx("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:"No segments available for this interview"})]})]})}function eG(){return m.jsxs(_2,{children:[m.jsx(Lr,{path:"/login",element:m.jsx(sz,{})}),m.jsx(Lr,{path:"/",element:m.jsx(Vs,{children:m.jsx(js,{children:m.jsx(iz,{})})})}),m.jsx(Lr,{path:"/playlist-builder",element:m.jsx(Vs,{children:m.jsx(js,{children:m.jsx(pz,{})})})}),m.jsx(Lr,{path:"/playlist-editor",element:m.jsx(Vs,{children:m.jsx(js,{children:m.jsx(Kq,{})})})}),m.jsx(Lr,{path:"/keyword-directory",element:m.jsx(Vs,{children:m.jsx(js,{children:m.jsx(Xq,{})})})}),m.jsx(Lr,{path:"/transcript-summary",element:m.jsx(Vs,{children:m.jsx(js,{children:m.jsx(Qq,{})})})}),m.jsx(Lr,{path:"/search",element:m.jsx(Vs,{children:m.jsx(js,{children:m.jsx(Jq,{})})})}),m.jsx(Lr,{path:"/interview-player",element:m.jsx(Vs,{children:m.jsx(js,{children:m.jsx(Zq,{})})})}),m.jsx(Lr,{path:"*",element:m.jsx(DI,{to:"/",replace:!0})})]})}Lm.createRoot(document.getElementById("root")).render(m.jsx(De.StrictMode,{children:m.jsx(H2,{children:m.jsx(u3,{children:m.jsx(d3,{children:m.jsx(eG,{})})})})}));export{De as R,l$ as _,_y as a,Vc as c,Oo as g,m as j,L as r};
