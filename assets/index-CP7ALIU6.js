(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=r(s);fetch(s.href,o)}})();var jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fa(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dT={exports:{}},Jh={},hT={exports:{}},He={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $u=Symbol.for("react.element"),XP=Symbol.for("react.portal"),QP=Symbol.for("react.fragment"),JP=Symbol.for("react.strict_mode"),ZP=Symbol.for("react.profiler"),eR=Symbol.for("react.provider"),tR=Symbol.for("react.context"),nR=Symbol.for("react.forward_ref"),rR=Symbol.for("react.suspense"),iR=Symbol.for("react.memo"),sR=Symbol.for("react.lazy"),R0=Symbol.iterator;function oR(t){return t===null||typeof t!="object"?null:(t=R0&&t[R0]||t["@@iterator"],typeof t=="function"?t:null)}var fT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pT=Object.assign,mT={};function Ua(t,e,r){this.props=t,this.context=e,this.refs=mT,this.updater=r||fT}Ua.prototype.isReactComponent={};Ua.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ua.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gT(){}gT.prototype=Ua.prototype;function Sv(t,e,r){this.props=t,this.context=e,this.refs=mT,this.updater=r||fT}var Iv=Sv.prototype=new gT;Iv.constructor=Sv;pT(Iv,Ua.prototype);Iv.isPureReactComponent=!0;var N0=Array.isArray,vT=Object.prototype.hasOwnProperty,kv={current:null},yT={key:!0,ref:!0,__self:!0,__source:!0};function _T(t,e,r){var i,s={},o=null,a=null;if(e!=null)for(i in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)vT.call(e,i)&&!yT.hasOwnProperty(i)&&(s[i]=e[i]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:$u,type:t,key:o,ref:a,props:s,_owner:kv.current}}function aR(t,e){return{$$typeof:$u,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cv(t){return typeof t=="object"&&t!==null&&t.$$typeof===$u}function lR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var D0=/\/+/g;function wp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?lR(""+t.key):e.toString(36)}function vd(t,e,r,i,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case $u:case XP:a=!0}}if(a)return a=t,s=s(a),t=i===""?"."+wp(a,0):i,N0(s)?(r="",t!=null&&(r=t.replace(D0,"$&/")+"/"),vd(s,e,r,"",function(c){return c})):s!=null&&(Cv(s)&&(s=aR(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(D0,"$&/")+"/")+t)),e.push(s)),1;if(a=0,i=i===""?".":i+":",N0(t))for(var l=0;l<t.length;l++){o=t[l];var u=i+wp(o,l);a+=vd(o,e,r,u,s)}else if(u=oR(t),typeof u=="function")for(t=u.call(t),l=0;!(o=t.next()).done;)o=o.value,u=i+wp(o,l++),a+=vd(o,e,r,u,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Vc(t,e,r){if(t==null)return t;var i=[],s=0;return vd(t,i,"","",function(o){return e.call(r,o,s++)}),i}function uR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Rn={current:null},yd={transition:null},cR={ReactCurrentDispatcher:Rn,ReactCurrentBatchConfig:yd,ReactCurrentOwner:kv};function wT(){throw Error("act(...) is not supported in production builds of React.")}He.Children={map:Vc,forEach:function(t,e,r){Vc(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Vc(t,function(){e++}),e},toArray:function(t){return Vc(t,function(e){return e})||[]},only:function(t){if(!Cv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};He.Component=Ua;He.Fragment=QP;He.Profiler=ZP;He.PureComponent=Sv;He.StrictMode=JP;He.Suspense=rR;He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cR;He.act=wT;He.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=pT({},t.props),s=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=kv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)vT.call(e,u)&&!yT.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:$u,type:t.type,key:s,ref:o,props:i,_owner:a}};He.createContext=function(t){return t={$$typeof:tR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:eR,_context:t},t.Consumer=t};He.createElement=_T;He.createFactory=function(t){var e=_T.bind(null,t);return e.type=t,e};He.createRef=function(){return{current:null}};He.forwardRef=function(t){return{$$typeof:nR,render:t}};He.isValidElement=Cv;He.lazy=function(t){return{$$typeof:sR,_payload:{_status:-1,_result:t},_init:uR}};He.memo=function(t,e){return{$$typeof:iR,type:t,compare:e===void 0?null:e}};He.startTransition=function(t){var e=yd.transition;yd.transition={};try{t()}finally{yd.transition=e}};He.unstable_act=wT;He.useCallback=function(t,e){return Rn.current.useCallback(t,e)};He.useContext=function(t){return Rn.current.useContext(t)};He.useDebugValue=function(){};He.useDeferredValue=function(t){return Rn.current.useDeferredValue(t)};He.useEffect=function(t,e){return Rn.current.useEffect(t,e)};He.useId=function(){return Rn.current.useId()};He.useImperativeHandle=function(t,e,r){return Rn.current.useImperativeHandle(t,e,r)};He.useInsertionEffect=function(t,e){return Rn.current.useInsertionEffect(t,e)};He.useLayoutEffect=function(t,e){return Rn.current.useLayoutEffect(t,e)};He.useMemo=function(t,e){return Rn.current.useMemo(t,e)};He.useReducer=function(t,e,r){return Rn.current.useReducer(t,e,r)};He.useRef=function(t){return Rn.current.useRef(t)};He.useState=function(t){return Rn.current.useState(t)};He.useSyncExternalStore=function(t,e,r){return Rn.current.useSyncExternalStore(t,e,r)};He.useTransition=function(){return Rn.current.useTransition()};He.version="18.3.1";hT.exports=He;var M=hT.exports;const Ue=Fa(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dR=M,hR=Symbol.for("react.element"),fR=Symbol.for("react.fragment"),pR=Object.prototype.hasOwnProperty,mR=dR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gR={key:!0,ref:!0,__self:!0,__source:!0};function bT(t,e,r){var i,s={},o=null,a=null;r!==void 0&&(o=""+r),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(i in e)pR.call(e,i)&&!gR.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:hR,type:t,key:o,ref:a,props:s,_owner:mR.current}}Jh.Fragment=fR;Jh.jsx=bT;Jh.jsxs=bT;dT.exports=Jh;var m=dT.exports,Lm={},xT={exports:{}},ir={},ET={exports:{}},TT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,G){var ie=q.length;q.push(G);e:for(;0<ie;){var ne=ie-1>>>1,W=q[ne];if(0<s(W,G))q[ne]=G,q[ie]=W,ie=ne;else break e}}function r(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var G=q[0],ie=q.pop();if(ie!==G){q[0]=ie;e:for(var ne=0,W=q.length,$=W>>>1;ne<$;){var Q=2*(ne+1)-1,X=q[Q],ce=Q+1,ye=q[ce];if(0>s(X,ie))ce<W&&0>s(ye,X)?(q[ne]=ye,q[ce]=ie,ne=ce):(q[ne]=X,q[Q]=ie,ne=Q);else if(ce<W&&0>s(ye,ie))q[ne]=ye,q[ce]=ie,ne=ce;else break e}}return G}function s(q,G){var ie=q.sortIndex-G.sortIndex;return ie!==0?ie:q.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],c=[],h=1,f=null,p=3,g=!1,b=!1,D=!1,P=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(q){for(var G=r(c);G!==null;){if(G.callback===null)i(c);else if(G.startTime<=q)i(c),G.sortIndex=G.expirationTime,e(u,G);else break;G=r(c)}}function R(q){if(D=!1,_(q),!b)if(r(u)!==null)b=!0,ae(j);else{var G=r(c);G!==null&&he(R,G.startTime-q)}}function j(q,G){b=!1,D&&(D=!1,x(I),I=-1),g=!0;var ie=p;try{for(_(G),f=r(u);f!==null&&(!(f.expirationTime>G)||q&&!S());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,p=f.priorityLevel;var W=ne(f.expirationTime<=G);G=t.unstable_now(),typeof W=="function"?f.callback=W:f===r(u)&&i(u),_(G)}else i(u);f=r(u)}if(f!==null)var $=!0;else{var Q=r(c);Q!==null&&he(R,Q.startTime-G),$=!1}return $}finally{f=null,p=ie,g=!1}}var V=!1,C=null,I=-1,y=5,w=-1;function S(){return!(t.unstable_now()-w<y)}function L(){if(C!==null){var q=t.unstable_now();w=q;var G=!0;try{G=C(!0,q)}finally{G?N():(V=!1,C=null)}}else V=!1}var N;if(typeof E=="function")N=function(){E(L)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,Z=Y.port2;Y.port1.onmessage=L,N=function(){Z.postMessage(null)}}else N=function(){P(L,0)};function ae(q){C=q,V||(V=!0,N())}function he(q,G){I=P(function(){q(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){b||g||(b=!0,ae(j))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(q){switch(p){case 1:case 2:case 3:var G=3;break;default:G=p}var ie=p;p=G;try{return q()}finally{p=ie}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,G){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ie=p;p=q;try{return G()}finally{p=ie}},t.unstable_scheduleCallback=function(q,G,ie){var ne=t.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ne+ie:ne):ie=ne,q){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=ie+W,q={id:h++,callback:G,priorityLevel:q,startTime:ie,expirationTime:W,sortIndex:-1},ie>ne?(q.sortIndex=ie,e(c,q),r(u)===null&&q===r(c)&&(D?(x(I),I=-1):D=!0,he(R,ie-ne))):(q.sortIndex=W,e(u,q),b||g||(b=!0,ae(j))),q},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(q){var G=p;return function(){var ie=p;p=G;try{return q.apply(this,arguments)}finally{p=ie}}}})(TT);ET.exports=TT;var vR=ET.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yR=M,nr=vR;function oe(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ST=new Set,au={};function go(t,e){ma(t,e),ma(t+"Capture",e)}function ma(t,e){for(au[t]=e,t=0;t<e.length;t++)ST.add(e[t])}var Ei=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Om=Object.prototype.hasOwnProperty,_R=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,M0={},L0={};function wR(t){return Om.call(L0,t)?!0:Om.call(M0,t)?!1:_R.test(t)?L0[t]=!0:(M0[t]=!0,!1)}function bR(t,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function xR(t,e,r,i){if(e===null||typeof e>"u"||bR(t,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nn(t,e,r,i,s,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var un={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){un[t]=new Nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];un[e]=new Nn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){un[t]=new Nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){un[t]=new Nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){un[t]=new Nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){un[t]=new Nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){un[t]=new Nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){un[t]=new Nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){un[t]=new Nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Av=/[\-:]([a-z])/g;function Pv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Av,Pv);un[e]=new Nn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Av,Pv);un[e]=new Nn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Av,Pv);un[e]=new Nn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){un[t]=new Nn(t,1,!1,t.toLowerCase(),null,!1,!1)});un.xlinkHref=new Nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){un[t]=new Nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rv(t,e,r,i){var s=un.hasOwnProperty(e)?un[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xR(e,r,s,i)&&(r=null),i||s===null?wR(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,i=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,i?t.setAttributeNS(i,e,r):t.setAttribute(e,r))))}var Di=yR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fc=Symbol.for("react.element"),Ho=Symbol.for("react.portal"),Wo=Symbol.for("react.fragment"),Nv=Symbol.for("react.strict_mode"),jm=Symbol.for("react.profiler"),IT=Symbol.for("react.provider"),kT=Symbol.for("react.context"),Dv=Symbol.for("react.forward_ref"),Vm=Symbol.for("react.suspense"),Fm=Symbol.for("react.suspense_list"),Mv=Symbol.for("react.memo"),Hi=Symbol.for("react.lazy"),CT=Symbol.for("react.offscreen"),O0=Symbol.iterator;function fl(t){return t===null||typeof t!="object"?null:(t=O0&&t[O0]||t["@@iterator"],typeof t=="function"?t:null)}var It=Object.assign,bp;function Nl(t){if(bp===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);bp=e&&e[1]||""}return`
`+bp+t}var xp=!1;function Ep(t,e){if(!t||xp)return"";xp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),o=i.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{xp=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Nl(t):""}function ER(t){switch(t.tag){case 5:return Nl(t.type);case 16:return Nl("Lazy");case 13:return Nl("Suspense");case 19:return Nl("SuspenseList");case 0:case 2:case 15:return t=Ep(t.type,!1),t;case 11:return t=Ep(t.type.render,!1),t;case 1:return t=Ep(t.type,!0),t;default:return""}}function Um(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wo:return"Fragment";case Ho:return"Portal";case jm:return"Profiler";case Nv:return"StrictMode";case Vm:return"Suspense";case Fm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kT:return(t.displayName||"Context")+".Consumer";case IT:return(t._context.displayName||"Context")+".Provider";case Dv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Mv:return e=t.displayName||null,e!==null?e:Um(t.type)||"Memo";case Hi:e=t._payload,t=t._init;try{return Um(t(e))}catch{}}return null}function TR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Um(e);case 8:return e===Nv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _s(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function AT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function SR(t){var e=AT(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,o=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){i=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(a){i=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Uc(t){t._valueTracker||(t._valueTracker=SR(t))}function PT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return t&&(i=AT(t)?t.checked?"true":"false":t.value),t=i,t!==r?(e.setValue(t),!0):!1}function Wd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bm(t,e){var r=e.checked;return It({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function j0(t,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=_s(e.value!=null?e.value:r),t._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function RT(t,e){e=e.checked,e!=null&&Rv(t,"checked",e,!1)}function $m(t,e){RT(t,e);var r=_s(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zm(t,e.type,r):e.hasOwnProperty("defaultValue")&&zm(t,e.type,_s(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function V0(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function zm(t,e,r){(e!=="number"||Wd(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Dl=Array.isArray;function ra(t,e,r,i){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&i&&(t[r].defaultSelected=!0)}else{for(r=""+_s(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Hm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(oe(91));return It({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function F0(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(oe(92));if(Dl(r)){if(1<r.length)throw Error(oe(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:_s(r)}}function NT(t,e){var r=_s(e.value),i=_s(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),i!=null&&(t.defaultValue=""+i)}function U0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function DT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?DT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bc,MT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bc=Bc||document.createElement("div"),Bc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function lu(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Hl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IR=["Webkit","ms","Moz","O"];Object.keys(Hl).forEach(function(t){IR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Hl[e]=Hl[t]})});function LT(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Hl.hasOwnProperty(t)&&Hl[t]?(""+e).trim():e+"px"}function OT(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=LT(r,e[r],i);r==="float"&&(r="cssFloat"),i?t.setProperty(r,s):t[r]=s}}var kR=It({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qm(t,e){if(e){if(kR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(oe(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(oe(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(oe(61))}if(e.style!=null&&typeof e.style!="object")throw Error(oe(62))}}function Gm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Km=null;function Lv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ym=null,ia=null,sa=null;function B0(t){if(t=Wu(t)){if(typeof Ym!="function")throw Error(oe(280));var e=t.stateNode;e&&(e=rf(e),Ym(t.stateNode,t.type,e))}}function jT(t){ia?sa?sa.push(t):sa=[t]:ia=t}function VT(){if(ia){var t=ia,e=sa;if(sa=ia=null,B0(t),e)for(t=0;t<e.length;t++)B0(e[t])}}function FT(t,e){return t(e)}function UT(){}var Tp=!1;function BT(t,e,r){if(Tp)return t(e,r);Tp=!0;try{return FT(t,e,r)}finally{Tp=!1,(ia!==null||sa!==null)&&(UT(),VT())}}function uu(t,e){var r=t.stateNode;if(r===null)return null;var i=rf(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(oe(231,e,typeof r));return r}var Xm=!1;if(Ei)try{var pl={};Object.defineProperty(pl,"passive",{get:function(){Xm=!0}}),window.addEventListener("test",pl,pl),window.removeEventListener("test",pl,pl)}catch{Xm=!1}function CR(t,e,r,i,s,o,a,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(h){this.onError(h)}}var Wl=!1,qd=null,Gd=!1,Qm=null,AR={onError:function(t){Wl=!0,qd=t}};function PR(t,e,r,i,s,o,a,l,u){Wl=!1,qd=null,CR.apply(AR,arguments)}function RR(t,e,r,i,s,o,a,l,u){if(PR.apply(this,arguments),Wl){if(Wl){var c=qd;Wl=!1,qd=null}else throw Error(oe(198));Gd||(Gd=!0,Qm=c)}}function vo(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function $T(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $0(t){if(vo(t)!==t)throw Error(oe(188))}function NR(t){var e=t.alternate;if(!e){if(e=vo(t),e===null)throw Error(oe(188));return e!==t?null:t}for(var r=t,i=e;;){var s=r.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){r=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===r)return $0(s),t;if(o===i)return $0(s),e;o=o.sibling}throw Error(oe(188))}if(r.return!==i.return)r=s,i=o;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,i=o;break}if(l===i){a=!0,i=s,r=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===r){a=!0,r=o,i=s;break}if(l===i){a=!0,i=o,r=s;break}l=l.sibling}if(!a)throw Error(oe(189))}}if(r.alternate!==i)throw Error(oe(190))}if(r.tag!==3)throw Error(oe(188));return r.stateNode.current===r?t:e}function zT(t){return t=NR(t),t!==null?HT(t):null}function HT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=HT(t);if(e!==null)return e;t=t.sibling}return null}var WT=nr.unstable_scheduleCallback,z0=nr.unstable_cancelCallback,DR=nr.unstable_shouldYield,MR=nr.unstable_requestPaint,Mt=nr.unstable_now,LR=nr.unstable_getCurrentPriorityLevel,Ov=nr.unstable_ImmediatePriority,qT=nr.unstable_UserBlockingPriority,Kd=nr.unstable_NormalPriority,OR=nr.unstable_LowPriority,GT=nr.unstable_IdlePriority,Zh=null,Yr=null;function jR(t){if(Yr&&typeof Yr.onCommitFiberRoot=="function")try{Yr.onCommitFiberRoot(Zh,t,void 0,(t.current.flags&128)===128)}catch{}}var Mr=Math.clz32?Math.clz32:UR,VR=Math.log,FR=Math.LN2;function UR(t){return t>>>=0,t===0?32:31-(VR(t)/FR|0)|0}var $c=64,zc=4194304;function Ml(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yd(t,e){var r=t.pendingLanes;if(r===0)return 0;var i=0,s=t.suspendedLanes,o=t.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?i=Ml(l):(o&=a,o!==0&&(i=Ml(o)))}else a=r&~s,a!==0?i=Ml(a):o!==0&&(i=Ml(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)r=31-Mr(e),s=1<<r,i|=t[r],e&=~s;return i}function BR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $R(t,e){for(var r=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Mr(o),l=1<<a,u=s[a];u===-1?(!(l&r)||l&i)&&(s[a]=BR(l,e)):u<=e&&(t.expiredLanes|=l),o&=~l}}function Jm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function KT(){var t=$c;return $c<<=1,!($c&4194240)&&($c=64),t}function Sp(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function zu(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Mr(e),t[e]=r}function zR(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Mr(r),o=1<<s;e[s]=0,i[s]=-1,t[s]=-1,r&=~o}}function jv(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var i=31-Mr(r),s=1<<i;s&e|t[i]&e&&(t[i]|=e),r&=~s}}var st=0;function XT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var QT,Vv,JT,ZT,eS,Zm=!1,Hc=[],ns=null,rs=null,is=null,cu=new Map,du=new Map,Gi=[],HR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function H0(t,e){switch(t){case"focusin":case"focusout":ns=null;break;case"dragenter":case"dragleave":rs=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":cu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":du.delete(e.pointerId)}}function ml(t,e,r,i,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=Wu(e),e!==null&&Vv(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function WR(t,e,r,i,s){switch(e){case"focusin":return ns=ml(ns,t,e,r,i,s),!0;case"dragenter":return rs=ml(rs,t,e,r,i,s),!0;case"mouseover":return is=ml(is,t,e,r,i,s),!0;case"pointerover":var o=s.pointerId;return cu.set(o,ml(cu.get(o)||null,t,e,r,i,s)),!0;case"gotpointercapture":return o=s.pointerId,du.set(o,ml(du.get(o)||null,t,e,r,i,s)),!0}return!1}function tS(t){var e=Xs(t.target);if(e!==null){var r=vo(e);if(r!==null){if(e=r.tag,e===13){if(e=$T(r),e!==null){t.blockedOn=e,eS(t.priority,function(){JT(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function _d(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=eg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var i=new r.constructor(r.type,r);Km=i,r.target.dispatchEvent(i),Km=null}else return e=Wu(r),e!==null&&Vv(e),t.blockedOn=r,!1;e.shift()}return!0}function W0(t,e,r){_d(t)&&r.delete(e)}function qR(){Zm=!1,ns!==null&&_d(ns)&&(ns=null),rs!==null&&_d(rs)&&(rs=null),is!==null&&_d(is)&&(is=null),cu.forEach(W0),du.forEach(W0)}function gl(t,e){t.blockedOn===e&&(t.blockedOn=null,Zm||(Zm=!0,nr.unstable_scheduleCallback(nr.unstable_NormalPriority,qR)))}function hu(t){function e(s){return gl(s,t)}if(0<Hc.length){gl(Hc[0],t);for(var r=1;r<Hc.length;r++){var i=Hc[r];i.blockedOn===t&&(i.blockedOn=null)}}for(ns!==null&&gl(ns,t),rs!==null&&gl(rs,t),is!==null&&gl(is,t),cu.forEach(e),du.forEach(e),r=0;r<Gi.length;r++)i=Gi[r],i.blockedOn===t&&(i.blockedOn=null);for(;0<Gi.length&&(r=Gi[0],r.blockedOn===null);)tS(r),r.blockedOn===null&&Gi.shift()}var oa=Di.ReactCurrentBatchConfig,Xd=!0;function GR(t,e,r,i){var s=st,o=oa.transition;oa.transition=null;try{st=1,Fv(t,e,r,i)}finally{st=s,oa.transition=o}}function KR(t,e,r,i){var s=st,o=oa.transition;oa.transition=null;try{st=4,Fv(t,e,r,i)}finally{st=s,oa.transition=o}}function Fv(t,e,r,i){if(Xd){var s=eg(t,e,r,i);if(s===null)Lp(t,e,i,Qd,r),H0(t,i);else if(WR(s,t,e,r,i))i.stopPropagation();else if(H0(t,i),e&4&&-1<HR.indexOf(t)){for(;s!==null;){var o=Wu(s);if(o!==null&&QT(o),o=eg(t,e,r,i),o===null&&Lp(t,e,i,Qd,r),o===s)break;s=o}s!==null&&i.stopPropagation()}else Lp(t,e,i,null,r)}}var Qd=null;function eg(t,e,r,i){if(Qd=null,t=Lv(i),t=Xs(t),t!==null)if(e=vo(t),e===null)t=null;else if(r=e.tag,r===13){if(t=$T(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Qd=t,null}function nS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(LR()){case Ov:return 1;case qT:return 4;case Kd:case OR:return 16;case GT:return 536870912;default:return 16}default:return 16}}var Zi=null,Uv=null,wd=null;function rS(){if(wd)return wd;var t,e=Uv,r=e.length,i,s="value"in Zi?Zi.value:Zi.textContent,o=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(i=1;i<=a&&e[r-i]===s[o-i];i++);return wd=s.slice(t,1<i?1-i:void 0)}function bd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wc(){return!0}function q0(){return!1}function sr(t){function e(r,i,s,o,a){this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Wc:q0,this.isPropagationStopped=q0,this}return It(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Wc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Wc)},persist:function(){},isPersistent:Wc}),e}var Ba={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bv=sr(Ba),Hu=It({},Ba,{view:0,detail:0}),YR=sr(Hu),Ip,kp,vl,ef=It({},Hu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$v,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==vl&&(vl&&t.type==="mousemove"?(Ip=t.screenX-vl.screenX,kp=t.screenY-vl.screenY):kp=Ip=0,vl=t),Ip)},movementY:function(t){return"movementY"in t?t.movementY:kp}}),G0=sr(ef),XR=It({},ef,{dataTransfer:0}),QR=sr(XR),JR=It({},Hu,{relatedTarget:0}),Cp=sr(JR),ZR=It({},Ba,{animationName:0,elapsedTime:0,pseudoElement:0}),eN=sr(ZR),tN=It({},Ba,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nN=sr(tN),rN=It({},Ba,{data:0}),K0=sr(rN),iN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oN[t])?!!e[t]:!1}function $v(){return aN}var lN=It({},Hu,{key:function(t){if(t.key){var e=iN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=bd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?sN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$v,charCode:function(t){return t.type==="keypress"?bd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?bd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uN=sr(lN),cN=It({},ef,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Y0=sr(cN),dN=It({},Hu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$v}),hN=sr(dN),fN=It({},Ba,{propertyName:0,elapsedTime:0,pseudoElement:0}),pN=sr(fN),mN=It({},ef,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gN=sr(mN),vN=[9,13,27,32],zv=Ei&&"CompositionEvent"in window,ql=null;Ei&&"documentMode"in document&&(ql=document.documentMode);var yN=Ei&&"TextEvent"in window&&!ql,iS=Ei&&(!zv||ql&&8<ql&&11>=ql),X0=" ",Q0=!1;function sS(t,e){switch(t){case"keyup":return vN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function oS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qo=!1;function _N(t,e){switch(t){case"compositionend":return oS(e);case"keypress":return e.which!==32?null:(Q0=!0,X0);case"textInput":return t=e.data,t===X0&&Q0?null:t;default:return null}}function wN(t,e){if(qo)return t==="compositionend"||!zv&&sS(t,e)?(t=rS(),wd=Uv=Zi=null,qo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iS&&e.locale!=="ko"?null:e.data;default:return null}}var bN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function J0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bN[t.type]:e==="textarea"}function aS(t,e,r,i){jT(i),e=Jd(e,"onChange"),0<e.length&&(r=new Bv("onChange","change",null,r,i),t.push({event:r,listeners:e}))}var Gl=null,fu=null;function xN(t){yS(t,0)}function tf(t){var e=Yo(t);if(PT(e))return t}function EN(t,e){if(t==="change")return e}var lS=!1;if(Ei){var Ap;if(Ei){var Pp="oninput"in document;if(!Pp){var Z0=document.createElement("div");Z0.setAttribute("oninput","return;"),Pp=typeof Z0.oninput=="function"}Ap=Pp}else Ap=!1;lS=Ap&&(!document.documentMode||9<document.documentMode)}function ew(){Gl&&(Gl.detachEvent("onpropertychange",uS),fu=Gl=null)}function uS(t){if(t.propertyName==="value"&&tf(fu)){var e=[];aS(e,fu,t,Lv(t)),BT(xN,e)}}function TN(t,e,r){t==="focusin"?(ew(),Gl=e,fu=r,Gl.attachEvent("onpropertychange",uS)):t==="focusout"&&ew()}function SN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tf(fu)}function IN(t,e){if(t==="click")return tf(e)}function kN(t,e){if(t==="input"||t==="change")return tf(e)}function CN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Or=typeof Object.is=="function"?Object.is:CN;function pu(t,e){if(Or(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!Om.call(e,s)||!Or(t[s],e[s]))return!1}return!0}function tw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nw(t,e){var r=tw(t);t=0;for(var i;r;){if(r.nodeType===3){if(i=t+r.textContent.length,t<=e&&i>=e)return{node:r,offset:e-t};t=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=tw(r)}}function cS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dS(){for(var t=window,e=Wd();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Wd(t.document)}return e}function Hv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function AN(t){var e=dS(),r=t.focusedElem,i=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&cS(r.ownerDocument.documentElement,r)){if(i!==null&&Hv(r)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!t.extend&&o>i&&(s=i,i=o,o=s),s=nw(r,o);var a=nw(r,i);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var PN=Ei&&"documentMode"in document&&11>=document.documentMode,Go=null,tg=null,Kl=null,ng=!1;function rw(t,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ng||Go==null||Go!==Wd(i)||(i=Go,"selectionStart"in i&&Hv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Kl&&pu(Kl,i)||(Kl=i,i=Jd(tg,"onSelect"),0<i.length&&(e=new Bv("onSelect","select",null,e,r),t.push({event:e,listeners:i}),e.target=Go)))}function qc(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ko={animationend:qc("Animation","AnimationEnd"),animationiteration:qc("Animation","AnimationIteration"),animationstart:qc("Animation","AnimationStart"),transitionend:qc("Transition","TransitionEnd")},Rp={},hS={};Ei&&(hS=document.createElement("div").style,"AnimationEvent"in window||(delete Ko.animationend.animation,delete Ko.animationiteration.animation,delete Ko.animationstart.animation),"TransitionEvent"in window||delete Ko.transitionend.transition);function nf(t){if(Rp[t])return Rp[t];if(!Ko[t])return t;var e=Ko[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in hS)return Rp[t]=e[r];return t}var fS=nf("animationend"),pS=nf("animationiteration"),mS=nf("animationstart"),gS=nf("transitionend"),vS=new Map,iw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function As(t,e){vS.set(t,e),go(e,[t])}for(var Np=0;Np<iw.length;Np++){var Dp=iw[Np],RN=Dp.toLowerCase(),NN=Dp[0].toUpperCase()+Dp.slice(1);As(RN,"on"+NN)}As(fS,"onAnimationEnd");As(pS,"onAnimationIteration");As(mS,"onAnimationStart");As("dblclick","onDoubleClick");As("focusin","onFocus");As("focusout","onBlur");As(gS,"onTransitionEnd");ma("onMouseEnter",["mouseout","mouseover"]);ma("onMouseLeave",["mouseout","mouseover"]);ma("onPointerEnter",["pointerout","pointerover"]);ma("onPointerLeave",["pointerout","pointerover"]);go("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));go("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));go("onBeforeInput",["compositionend","keypress","textInput","paste"]);go("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));go("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));go("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ll="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ll));function sw(t,e,r){var i=t.type||"unknown-event";t.currentTarget=r,RR(i,e,void 0,t),t.currentTarget=null}function yS(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var i=t[r],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var l=i[a],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==o&&s.isPropagationStopped())break e;sw(s,l,c),o=u}else for(a=0;a<i.length;a++){if(l=i[a],u=l.instance,c=l.currentTarget,l=l.listener,u!==o&&s.isPropagationStopped())break e;sw(s,l,c),o=u}}}if(Gd)throw t=Qm,Gd=!1,Qm=null,t}function mt(t,e){var r=e[ag];r===void 0&&(r=e[ag]=new Set);var i=t+"__bubble";r.has(i)||(_S(e,t,2,!1),r.add(i))}function Mp(t,e,r){var i=0;e&&(i|=4),_S(r,t,i,e)}var Gc="_reactListening"+Math.random().toString(36).slice(2);function mu(t){if(!t[Gc]){t[Gc]=!0,ST.forEach(function(r){r!=="selectionchange"&&(DN.has(r)||Mp(r,!1,t),Mp(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gc]||(e[Gc]=!0,Mp("selectionchange",!1,e))}}function _S(t,e,r,i){switch(nS(e)){case 1:var s=GR;break;case 4:s=KR;break;default:s=Fv}r=s.bind(null,e,r,t),s=void 0,!Xm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Lp(t,e,r,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var a=i.tag;if(a===3||a===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=i.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Xs(l),a===null)return;if(u=a.tag,u===5||u===6){i=o=a;continue e}l=l.parentNode}}i=i.return}BT(function(){var c=o,h=Lv(r),f=[];e:{var p=vS.get(t);if(p!==void 0){var g=Bv,b=t;switch(t){case"keypress":if(bd(r)===0)break e;case"keydown":case"keyup":g=uN;break;case"focusin":b="focus",g=Cp;break;case"focusout":b="blur",g=Cp;break;case"beforeblur":case"afterblur":g=Cp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=G0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=QR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=hN;break;case fS:case pS:case mS:g=eN;break;case gS:g=pN;break;case"scroll":g=YR;break;case"wheel":g=gN;break;case"copy":case"cut":case"paste":g=nN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Y0}var D=(e&4)!==0,P=!D&&t==="scroll",x=D?p!==null?p+"Capture":null:p;D=[];for(var E=c,_;E!==null;){_=E;var R=_.stateNode;if(_.tag===5&&R!==null&&(_=R,x!==null&&(R=uu(E,x),R!=null&&D.push(gu(E,R,_)))),P)break;E=E.return}0<D.length&&(p=new g(p,b,null,r,h),f.push({event:p,listeners:D}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&r!==Km&&(b=r.relatedTarget||r.fromElement)&&(Xs(b)||b[Ti]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(b=r.relatedTarget||r.toElement,g=c,b=b?Xs(b):null,b!==null&&(P=vo(b),b!==P||b.tag!==5&&b.tag!==6)&&(b=null)):(g=null,b=c),g!==b)){if(D=G0,R="onMouseLeave",x="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(D=Y0,R="onPointerLeave",x="onPointerEnter",E="pointer"),P=g==null?p:Yo(g),_=b==null?p:Yo(b),p=new D(R,E+"leave",g,r,h),p.target=P,p.relatedTarget=_,R=null,Xs(h)===c&&(D=new D(x,E+"enter",b,r,h),D.target=_,D.relatedTarget=P,R=D),P=R,g&&b)t:{for(D=g,x=b,E=0,_=D;_;_=Do(_))E++;for(_=0,R=x;R;R=Do(R))_++;for(;0<E-_;)D=Do(D),E--;for(;0<_-E;)x=Do(x),_--;for(;E--;){if(D===x||x!==null&&D===x.alternate)break t;D=Do(D),x=Do(x)}D=null}else D=null;g!==null&&ow(f,p,g,D,!1),b!==null&&P!==null&&ow(f,P,b,D,!0)}}e:{if(p=c?Yo(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var j=EN;else if(J0(p))if(lS)j=kN;else{j=SN;var V=TN}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(j=IN);if(j&&(j=j(t,c))){aS(f,j,r,h);break e}V&&V(t,p,c),t==="focusout"&&(V=p._wrapperState)&&V.controlled&&p.type==="number"&&zm(p,"number",p.value)}switch(V=c?Yo(c):window,t){case"focusin":(J0(V)||V.contentEditable==="true")&&(Go=V,tg=c,Kl=null);break;case"focusout":Kl=tg=Go=null;break;case"mousedown":ng=!0;break;case"contextmenu":case"mouseup":case"dragend":ng=!1,rw(f,r,h);break;case"selectionchange":if(PN)break;case"keydown":case"keyup":rw(f,r,h)}var C;if(zv)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else qo?sS(t,r)&&(I="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(iS&&r.locale!=="ko"&&(qo||I!=="onCompositionStart"?I==="onCompositionEnd"&&qo&&(C=rS()):(Zi=h,Uv="value"in Zi?Zi.value:Zi.textContent,qo=!0)),V=Jd(c,I),0<V.length&&(I=new K0(I,t,null,r,h),f.push({event:I,listeners:V}),C?I.data=C:(C=oS(r),C!==null&&(I.data=C)))),(C=yN?_N(t,r):wN(t,r))&&(c=Jd(c,"onBeforeInput"),0<c.length&&(h=new K0("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:c}),h.data=C))}yS(f,e)})}function gu(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Jd(t,e){for(var r=e+"Capture",i=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=uu(t,r),o!=null&&i.unshift(gu(t,o,s)),o=uu(t,e),o!=null&&i.push(gu(t,o,s))),t=t.return}return i}function Do(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ow(t,e,r,i,s){for(var o=e._reactName,a=[];r!==null&&r!==i;){var l=r,u=l.alternate,c=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&c!==null&&(l=c,s?(u=uu(r,o),u!=null&&a.unshift(gu(r,u,l))):s||(u=uu(r,o),u!=null&&a.push(gu(r,u,l)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var MN=/\r\n?/g,LN=/\u0000|\uFFFD/g;function aw(t){return(typeof t=="string"?t:""+t).replace(MN,`
`).replace(LN,"")}function Kc(t,e,r){if(e=aw(e),aw(t)!==e&&r)throw Error(oe(425))}function Zd(){}var rg=null,ig=null;function sg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var og=typeof setTimeout=="function"?setTimeout:void 0,ON=typeof clearTimeout=="function"?clearTimeout:void 0,lw=typeof Promise=="function"?Promise:void 0,jN=typeof queueMicrotask=="function"?queueMicrotask:typeof lw<"u"?function(t){return lw.resolve(null).then(t).catch(VN)}:og;function VN(t){setTimeout(function(){throw t})}function Op(t,e){var r=e,i=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(i===0){t.removeChild(s),hu(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=s}while(r);hu(e)}function ss(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var $a=Math.random().toString(36).slice(2),Kr="__reactFiber$"+$a,vu="__reactProps$"+$a,Ti="__reactContainer$"+$a,ag="__reactEvents$"+$a,FN="__reactListeners$"+$a,UN="__reactHandles$"+$a;function Xs(t){var e=t[Kr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Ti]||r[Kr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=uw(t);t!==null;){if(r=t[Kr])return r;t=uw(t)}return e}t=r,r=t.parentNode}return null}function Wu(t){return t=t[Kr]||t[Ti],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Yo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(oe(33))}function rf(t){return t[vu]||null}var lg=[],Xo=-1;function Ps(t){return{current:t}}function gt(t){0>Xo||(t.current=lg[Xo],lg[Xo]=null,Xo--)}function ht(t,e){Xo++,lg[Xo]=t.current,t.current=e}var ws={},En=Ps(ws),$n=Ps(!1),ro=ws;function ga(t,e){var r=t.type.contextTypes;if(!r)return ws;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in r)s[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function zn(t){return t=t.childContextTypes,t!=null}function eh(){gt($n),gt(En)}function cw(t,e,r){if(En.current!==ws)throw Error(oe(168));ht(En,e),ht($n,r)}function wS(t,e,r){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(oe(108,TR(t)||"Unknown",s));return It({},r,i)}function th(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ws,ro=En.current,ht(En,t),ht($n,$n.current),!0}function dw(t,e,r){var i=t.stateNode;if(!i)throw Error(oe(169));r?(t=wS(t,e,ro),i.__reactInternalMemoizedMergedChildContext=t,gt($n),gt(En),ht(En,t)):gt($n),ht($n,r)}var pi=null,sf=!1,jp=!1;function bS(t){pi===null?pi=[t]:pi.push(t)}function BN(t){sf=!0,bS(t)}function Rs(){if(!jp&&pi!==null){jp=!0;var t=0,e=st;try{var r=pi;for(st=1;t<r.length;t++){var i=r[t];do i=i(!0);while(i!==null)}pi=null,sf=!1}catch(s){throw pi!==null&&(pi=pi.slice(t+1)),WT(Ov,Rs),s}finally{st=e,jp=!1}}return null}var Qo=[],Jo=0,nh=null,rh=0,ur=[],cr=0,io=null,mi=1,gi="";function Hs(t,e){Qo[Jo++]=rh,Qo[Jo++]=nh,nh=t,rh=e}function xS(t,e,r){ur[cr++]=mi,ur[cr++]=gi,ur[cr++]=io,io=t;var i=mi;t=gi;var s=32-Mr(i)-1;i&=~(1<<s),r+=1;var o=32-Mr(e)+s;if(30<o){var a=s-s%5;o=(i&(1<<a)-1).toString(32),i>>=a,s-=a,mi=1<<32-Mr(e)+s|r<<s|i,gi=o+t}else mi=1<<o|r<<s|i,gi=t}function Wv(t){t.return!==null&&(Hs(t,1),xS(t,1,0))}function qv(t){for(;t===nh;)nh=Qo[--Jo],Qo[Jo]=null,rh=Qo[--Jo],Qo[Jo]=null;for(;t===io;)io=ur[--cr],ur[cr]=null,gi=ur[--cr],ur[cr]=null,mi=ur[--cr],ur[cr]=null}var Jn=null,Yn=null,_t=!1,Rr=null;function ES(t,e){var r=hr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function hw(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Jn=t,Yn=ss(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Jn=t,Yn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=io!==null?{id:mi,overflow:gi}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=hr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Jn=t,Yn=null,!0):!1;default:return!1}}function ug(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cg(t){if(_t){var e=Yn;if(e){var r=e;if(!hw(t,e)){if(ug(t))throw Error(oe(418));e=ss(r.nextSibling);var i=Jn;e&&hw(t,e)?ES(i,r):(t.flags=t.flags&-4097|2,_t=!1,Jn=t)}}else{if(ug(t))throw Error(oe(418));t.flags=t.flags&-4097|2,_t=!1,Jn=t}}}function fw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Jn=t}function Yc(t){if(t!==Jn)return!1;if(!_t)return fw(t),_t=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sg(t.type,t.memoizedProps)),e&&(e=Yn)){if(ug(t))throw TS(),Error(oe(418));for(;e;)ES(t,e),e=ss(e.nextSibling)}if(fw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(oe(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Yn=ss(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Yn=null}}else Yn=Jn?ss(t.stateNode.nextSibling):null;return!0}function TS(){for(var t=Yn;t;)t=ss(t.nextSibling)}function va(){Yn=Jn=null,_t=!1}function Gv(t){Rr===null?Rr=[t]:Rr.push(t)}var $N=Di.ReactCurrentBatchConfig;function yl(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(oe(309));var i=r.stateNode}if(!i)throw Error(oe(147,t));var s=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(oe(284));if(!r._owner)throw Error(oe(290,t))}return t}function Xc(t,e){throw t=Object.prototype.toString.call(e),Error(oe(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function pw(t){var e=t._init;return e(t._payload)}function SS(t){function e(x,E){if(t){var _=x.deletions;_===null?(x.deletions=[E],x.flags|=16):_.push(E)}}function r(x,E){if(!t)return null;for(;E!==null;)e(x,E),E=E.sibling;return null}function i(x,E){for(x=new Map;E!==null;)E.key!==null?x.set(E.key,E):x.set(E.index,E),E=E.sibling;return x}function s(x,E){return x=us(x,E),x.index=0,x.sibling=null,x}function o(x,E,_){return x.index=_,t?(_=x.alternate,_!==null?(_=_.index,_<E?(x.flags|=2,E):_):(x.flags|=2,E)):(x.flags|=1048576,E)}function a(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,E,_,R){return E===null||E.tag!==6?(E=Hp(_,x.mode,R),E.return=x,E):(E=s(E,_),E.return=x,E)}function u(x,E,_,R){var j=_.type;return j===Wo?h(x,E,_.props.children,R,_.key):E!==null&&(E.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Hi&&pw(j)===E.type)?(R=s(E,_.props),R.ref=yl(x,E,_),R.return=x,R):(R=Cd(_.type,_.key,_.props,null,x.mode,R),R.ref=yl(x,E,_),R.return=x,R)}function c(x,E,_,R){return E===null||E.tag!==4||E.stateNode.containerInfo!==_.containerInfo||E.stateNode.implementation!==_.implementation?(E=Wp(_,x.mode,R),E.return=x,E):(E=s(E,_.children||[]),E.return=x,E)}function h(x,E,_,R,j){return E===null||E.tag!==7?(E=no(_,x.mode,R,j),E.return=x,E):(E=s(E,_),E.return=x,E)}function f(x,E,_){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Hp(""+E,x.mode,_),E.return=x,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Fc:return _=Cd(E.type,E.key,E.props,null,x.mode,_),_.ref=yl(x,null,E),_.return=x,_;case Ho:return E=Wp(E,x.mode,_),E.return=x,E;case Hi:var R=E._init;return f(x,R(E._payload),_)}if(Dl(E)||fl(E))return E=no(E,x.mode,_,null),E.return=x,E;Xc(x,E)}return null}function p(x,E,_,R){var j=E!==null?E.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return j!==null?null:l(x,E,""+_,R);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Fc:return _.key===j?u(x,E,_,R):null;case Ho:return _.key===j?c(x,E,_,R):null;case Hi:return j=_._init,p(x,E,j(_._payload),R)}if(Dl(_)||fl(_))return j!==null?null:h(x,E,_,R,null);Xc(x,_)}return null}function g(x,E,_,R,j){if(typeof R=="string"&&R!==""||typeof R=="number")return x=x.get(_)||null,l(E,x,""+R,j);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Fc:return x=x.get(R.key===null?_:R.key)||null,u(E,x,R,j);case Ho:return x=x.get(R.key===null?_:R.key)||null,c(E,x,R,j);case Hi:var V=R._init;return g(x,E,_,V(R._payload),j)}if(Dl(R)||fl(R))return x=x.get(_)||null,h(E,x,R,j,null);Xc(E,R)}return null}function b(x,E,_,R){for(var j=null,V=null,C=E,I=E=0,y=null;C!==null&&I<_.length;I++){C.index>I?(y=C,C=null):y=C.sibling;var w=p(x,C,_[I],R);if(w===null){C===null&&(C=y);break}t&&C&&w.alternate===null&&e(x,C),E=o(w,E,I),V===null?j=w:V.sibling=w,V=w,C=y}if(I===_.length)return r(x,C),_t&&Hs(x,I),j;if(C===null){for(;I<_.length;I++)C=f(x,_[I],R),C!==null&&(E=o(C,E,I),V===null?j=C:V.sibling=C,V=C);return _t&&Hs(x,I),j}for(C=i(x,C);I<_.length;I++)y=g(C,x,I,_[I],R),y!==null&&(t&&y.alternate!==null&&C.delete(y.key===null?I:y.key),E=o(y,E,I),V===null?j=y:V.sibling=y,V=y);return t&&C.forEach(function(S){return e(x,S)}),_t&&Hs(x,I),j}function D(x,E,_,R){var j=fl(_);if(typeof j!="function")throw Error(oe(150));if(_=j.call(_),_==null)throw Error(oe(151));for(var V=j=null,C=E,I=E=0,y=null,w=_.next();C!==null&&!w.done;I++,w=_.next()){C.index>I?(y=C,C=null):y=C.sibling;var S=p(x,C,w.value,R);if(S===null){C===null&&(C=y);break}t&&C&&S.alternate===null&&e(x,C),E=o(S,E,I),V===null?j=S:V.sibling=S,V=S,C=y}if(w.done)return r(x,C),_t&&Hs(x,I),j;if(C===null){for(;!w.done;I++,w=_.next())w=f(x,w.value,R),w!==null&&(E=o(w,E,I),V===null?j=w:V.sibling=w,V=w);return _t&&Hs(x,I),j}for(C=i(x,C);!w.done;I++,w=_.next())w=g(C,x,I,w.value,R),w!==null&&(t&&w.alternate!==null&&C.delete(w.key===null?I:w.key),E=o(w,E,I),V===null?j=w:V.sibling=w,V=w);return t&&C.forEach(function(L){return e(x,L)}),_t&&Hs(x,I),j}function P(x,E,_,R){if(typeof _=="object"&&_!==null&&_.type===Wo&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Fc:e:{for(var j=_.key,V=E;V!==null;){if(V.key===j){if(j=_.type,j===Wo){if(V.tag===7){r(x,V.sibling),E=s(V,_.props.children),E.return=x,x=E;break e}}else if(V.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===Hi&&pw(j)===V.type){r(x,V.sibling),E=s(V,_.props),E.ref=yl(x,V,_),E.return=x,x=E;break e}r(x,V);break}else e(x,V);V=V.sibling}_.type===Wo?(E=no(_.props.children,x.mode,R,_.key),E.return=x,x=E):(R=Cd(_.type,_.key,_.props,null,x.mode,R),R.ref=yl(x,E,_),R.return=x,x=R)}return a(x);case Ho:e:{for(V=_.key;E!==null;){if(E.key===V)if(E.tag===4&&E.stateNode.containerInfo===_.containerInfo&&E.stateNode.implementation===_.implementation){r(x,E.sibling),E=s(E,_.children||[]),E.return=x,x=E;break e}else{r(x,E);break}else e(x,E);E=E.sibling}E=Wp(_,x.mode,R),E.return=x,x=E}return a(x);case Hi:return V=_._init,P(x,E,V(_._payload),R)}if(Dl(_))return b(x,E,_,R);if(fl(_))return D(x,E,_,R);Xc(x,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,E!==null&&E.tag===6?(r(x,E.sibling),E=s(E,_),E.return=x,x=E):(r(x,E),E=Hp(_,x.mode,R),E.return=x,x=E),a(x)):r(x,E)}return P}var ya=SS(!0),IS=SS(!1),ih=Ps(null),sh=null,Zo=null,Kv=null;function Yv(){Kv=Zo=sh=null}function Xv(t){var e=ih.current;gt(ih),t._currentValue=e}function dg(t,e,r){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===r)break;t=t.return}}function aa(t,e){sh=t,Kv=Zo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Bn=!0),t.firstContext=null)}function vr(t){var e=t._currentValue;if(Kv!==t)if(t={context:t,memoizedValue:e,next:null},Zo===null){if(sh===null)throw Error(oe(308));Zo=t,sh.dependencies={lanes:0,firstContext:t}}else Zo=Zo.next=t;return e}var Qs=null;function Qv(t){Qs===null?Qs=[t]:Qs.push(t)}function kS(t,e,r,i){var s=e.interleaved;return s===null?(r.next=r,Qv(e)):(r.next=s.next,s.next=r),e.interleaved=r,Si(t,i)}function Si(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Wi=!1;function Jv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function wi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function os(t,e,r){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Ze&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Si(t,r)}return s=i.interleaved,s===null?(e.next=e,Qv(i)):(e.next=s.next,s.next=e),i.interleaved=e,Si(t,r)}function xd(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,jv(t,r)}}function mw(t,e){var r=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var s=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?s=o=a:o=o.next=a,r=r.next}while(r!==null);o===null?s=o=e:o=o.next=e}else s=o=e;r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function oh(t,e,r,i){var s=t.updateQueue;Wi=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,a===null?o=c:a.next=c,a=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=u))}if(o!==null){var f=s.baseState;a=0,h=c=u=null,l=o;do{var p=l.lane,g=l.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,D=l;switch(p=e,g=r,D.tag){case 1:if(b=D.payload,typeof b=="function"){f=b.call(g,f,p);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=D.payload,p=typeof b=="function"?b.call(g,f,p):b,p==null)break e;f=It({},f,p);break e;case 2:Wi=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(c=h=g,u=f):h=h.next=g,a|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(u=f),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);oo|=a,t.lanes=a,t.memoizedState=f}}function gw(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=r,typeof s!="function")throw Error(oe(191,s));s.call(i)}}}var qu={},Xr=Ps(qu),yu=Ps(qu),_u=Ps(qu);function Js(t){if(t===qu)throw Error(oe(174));return t}function Zv(t,e){switch(ht(_u,e),ht(yu,t),ht(Xr,qu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wm(e,t)}gt(Xr),ht(Xr,e)}function _a(){gt(Xr),gt(yu),gt(_u)}function AS(t){Js(_u.current);var e=Js(Xr.current),r=Wm(e,t.type);e!==r&&(ht(yu,t),ht(Xr,r))}function ey(t){yu.current===t&&(gt(Xr),gt(yu))}var Et=Ps(0);function ah(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vp=[];function ty(){for(var t=0;t<Vp.length;t++)Vp[t]._workInProgressVersionPrimary=null;Vp.length=0}var Ed=Di.ReactCurrentDispatcher,Fp=Di.ReactCurrentBatchConfig,so=0,St=null,Ft=null,Kt=null,lh=!1,Yl=!1,wu=0,zN=0;function gn(){throw Error(oe(321))}function ny(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Or(t[r],e[r]))return!1;return!0}function ry(t,e,r,i,s,o){if(so=o,St=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ed.current=t===null||t.memoizedState===null?GN:KN,t=r(i,s),Yl){o=0;do{if(Yl=!1,wu=0,25<=o)throw Error(oe(301));o+=1,Kt=Ft=null,e.updateQueue=null,Ed.current=YN,t=r(i,s)}while(Yl)}if(Ed.current=uh,e=Ft!==null&&Ft.next!==null,so=0,Kt=Ft=St=null,lh=!1,e)throw Error(oe(300));return t}function iy(){var t=wu!==0;return wu=0,t}function Wr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Kt===null?St.memoizedState=Kt=t:Kt=Kt.next=t,Kt}function yr(){if(Ft===null){var t=St.alternate;t=t!==null?t.memoizedState:null}else t=Ft.next;var e=Kt===null?St.memoizedState:Kt.next;if(e!==null)Kt=e,Ft=t;else{if(t===null)throw Error(oe(310));Ft=t,t={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Kt===null?St.memoizedState=Kt=t:Kt=Kt.next=t}return Kt}function bu(t,e){return typeof e=="function"?e(t):e}function Up(t){var e=yr(),r=e.queue;if(r===null)throw Error(oe(311));r.lastRenderedReducer=t;var i=Ft,s=i.baseQueue,o=r.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}i.baseQueue=s=o,r.pending=null}if(s!==null){o=s.next,i=i.baseState;var l=a=null,u=null,c=o;do{var h=c.lane;if((so&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=f,a=i):u=u.next=f,St.lanes|=h,oo|=h}c=c.next}while(c!==null&&c!==o);u===null?a=i:u.next=l,Or(i,e.memoizedState)||(Bn=!0),e.memoizedState=i,e.baseState=a,e.baseQueue=u,r.lastRenderedState=i}if(t=r.interleaved,t!==null){s=t;do o=s.lane,St.lanes|=o,oo|=o,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Bp(t){var e=yr(),r=e.queue;if(r===null)throw Error(oe(311));r.lastRenderedReducer=t;var i=r.dispatch,s=r.pending,o=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do o=t(o,a.action),a=a.next;while(a!==s);Or(o,e.memoizedState)||(Bn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),r.lastRenderedState=o}return[o,i]}function PS(){}function RS(t,e){var r=St,i=yr(),s=e(),o=!Or(i.memoizedState,s);if(o&&(i.memoizedState=s,Bn=!0),i=i.queue,sy(MS.bind(null,r,i,t),[t]),i.getSnapshot!==e||o||Kt!==null&&Kt.memoizedState.tag&1){if(r.flags|=2048,xu(9,DS.bind(null,r,i,s,e),void 0,null),Xt===null)throw Error(oe(349));so&30||NS(r,e,s)}return s}function NS(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function DS(t,e,r,i){e.value=r,e.getSnapshot=i,LS(e)&&OS(t)}function MS(t,e,r){return r(function(){LS(e)&&OS(t)})}function LS(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Or(t,r)}catch{return!0}}function OS(t){var e=Si(t,1);e!==null&&Lr(e,t,1,-1)}function vw(t){var e=Wr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bu,lastRenderedState:t},e.queue=t,t=t.dispatch=qN.bind(null,St,t),[e.memoizedState,t]}function xu(t,e,r,i){return t={tag:t,create:e,destroy:r,deps:i,next:null},e=St.updateQueue,e===null?(e={lastEffect:null,stores:null},St.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(i=r.next,r.next=t,t.next=i,e.lastEffect=t)),t}function jS(){return yr().memoizedState}function Td(t,e,r,i){var s=Wr();St.flags|=t,s.memoizedState=xu(1|e,r,void 0,i===void 0?null:i)}function of(t,e,r,i){var s=yr();i=i===void 0?null:i;var o=void 0;if(Ft!==null){var a=Ft.memoizedState;if(o=a.destroy,i!==null&&ny(i,a.deps)){s.memoizedState=xu(e,r,o,i);return}}St.flags|=t,s.memoizedState=xu(1|e,r,o,i)}function yw(t,e){return Td(8390656,8,t,e)}function sy(t,e){return of(2048,8,t,e)}function VS(t,e){return of(4,2,t,e)}function FS(t,e){return of(4,4,t,e)}function US(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function BS(t,e,r){return r=r!=null?r.concat([t]):null,of(4,4,US.bind(null,e,t),r)}function oy(){}function $S(t,e){var r=yr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&ny(e,i[1])?i[0]:(r.memoizedState=[t,e],t)}function zS(t,e){var r=yr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&ny(e,i[1])?i[0]:(t=t(),r.memoizedState=[t,e],t)}function HS(t,e,r){return so&21?(Or(r,e)||(r=KT(),St.lanes|=r,oo|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Bn=!0),t.memoizedState=r)}function HN(t,e){var r=st;st=r!==0&&4>r?r:4,t(!0);var i=Fp.transition;Fp.transition={};try{t(!1),e()}finally{st=r,Fp.transition=i}}function WS(){return yr().memoizedState}function WN(t,e,r){var i=ls(t);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},qS(t))GS(e,r);else if(r=kS(t,e,r,i),r!==null){var s=Cn();Lr(r,t,i,s),KS(r,e,i)}}function qN(t,e,r){var i=ls(t),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(qS(t))GS(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,r);if(s.hasEagerState=!0,s.eagerState=l,Or(l,a)){var u=e.interleaved;u===null?(s.next=s,Qv(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=kS(t,e,s,i),r!==null&&(s=Cn(),Lr(r,t,i,s),KS(r,e,i))}}function qS(t){var e=t.alternate;return t===St||e!==null&&e===St}function GS(t,e){Yl=lh=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function KS(t,e,r){if(r&4194240){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,jv(t,r)}}var uh={readContext:vr,useCallback:gn,useContext:gn,useEffect:gn,useImperativeHandle:gn,useInsertionEffect:gn,useLayoutEffect:gn,useMemo:gn,useReducer:gn,useRef:gn,useState:gn,useDebugValue:gn,useDeferredValue:gn,useTransition:gn,useMutableSource:gn,useSyncExternalStore:gn,useId:gn,unstable_isNewReconciler:!1},GN={readContext:vr,useCallback:function(t,e){return Wr().memoizedState=[t,e===void 0?null:e],t},useContext:vr,useEffect:yw,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Td(4194308,4,US.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Td(4194308,4,t,e)},useInsertionEffect:function(t,e){return Td(4,2,t,e)},useMemo:function(t,e){var r=Wr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var i=Wr();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=WN.bind(null,St,t),[i.memoizedState,t]},useRef:function(t){var e=Wr();return t={current:t},e.memoizedState=t},useState:vw,useDebugValue:oy,useDeferredValue:function(t){return Wr().memoizedState=t},useTransition:function(){var t=vw(!1),e=t[0];return t=HN.bind(null,t[1]),Wr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var i=St,s=Wr();if(_t){if(r===void 0)throw Error(oe(407));r=r()}else{if(r=e(),Xt===null)throw Error(oe(349));so&30||NS(i,e,r)}s.memoizedState=r;var o={value:r,getSnapshot:e};return s.queue=o,yw(MS.bind(null,i,o,t),[t]),i.flags|=2048,xu(9,DS.bind(null,i,o,r,e),void 0,null),r},useId:function(){var t=Wr(),e=Xt.identifierPrefix;if(_t){var r=gi,i=mi;r=(i&~(1<<32-Mr(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=wu++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=zN++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},KN={readContext:vr,useCallback:$S,useContext:vr,useEffect:sy,useImperativeHandle:BS,useInsertionEffect:VS,useLayoutEffect:FS,useMemo:zS,useReducer:Up,useRef:jS,useState:function(){return Up(bu)},useDebugValue:oy,useDeferredValue:function(t){var e=yr();return HS(e,Ft.memoizedState,t)},useTransition:function(){var t=Up(bu)[0],e=yr().memoizedState;return[t,e]},useMutableSource:PS,useSyncExternalStore:RS,useId:WS,unstable_isNewReconciler:!1},YN={readContext:vr,useCallback:$S,useContext:vr,useEffect:sy,useImperativeHandle:BS,useInsertionEffect:VS,useLayoutEffect:FS,useMemo:zS,useReducer:Bp,useRef:jS,useState:function(){return Bp(bu)},useDebugValue:oy,useDeferredValue:function(t){var e=yr();return Ft===null?e.memoizedState=t:HS(e,Ft.memoizedState,t)},useTransition:function(){var t=Bp(bu)[0],e=yr().memoizedState;return[t,e]},useMutableSource:PS,useSyncExternalStore:RS,useId:WS,unstable_isNewReconciler:!1};function Ar(t,e){if(t&&t.defaultProps){e=It({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function hg(t,e,r,i){e=t.memoizedState,r=r(i,e),r=r==null?e:It({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var af={isMounted:function(t){return(t=t._reactInternals)?vo(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var i=Cn(),s=ls(t),o=wi(i,s);o.payload=e,r!=null&&(o.callback=r),e=os(t,o,s),e!==null&&(Lr(e,t,s,i),xd(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var i=Cn(),s=ls(t),o=wi(i,s);o.tag=1,o.payload=e,r!=null&&(o.callback=r),e=os(t,o,s),e!==null&&(Lr(e,t,s,i),xd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Cn(),i=ls(t),s=wi(r,i);s.tag=2,e!=null&&(s.callback=e),e=os(t,s,i),e!==null&&(Lr(e,t,i,r),xd(e,t,i))}};function _w(t,e,r,i,s,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,a):e.prototype&&e.prototype.isPureReactComponent?!pu(r,i)||!pu(s,o):!0}function YS(t,e,r){var i=!1,s=ws,o=e.contextType;return typeof o=="object"&&o!==null?o=vr(o):(s=zn(e)?ro:En.current,i=e.contextTypes,o=(i=i!=null)?ga(t,s):ws),e=new e(r,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=af,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function ww(t,e,r,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==t&&af.enqueueReplaceState(e,e.state,null)}function fg(t,e,r,i){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Jv(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=vr(o):(o=zn(e)?ro:En.current,s.context=ga(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(hg(t,e,o,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&af.enqueueReplaceState(s,s.state,null),oh(t,r,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function wa(t,e){try{var r="",i=e;do r+=ER(i),i=i.return;while(i);var s=r}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function $p(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function pg(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var XN=typeof WeakMap=="function"?WeakMap:Map;function XS(t,e,r){r=wi(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){dh||(dh=!0,Tg=i),pg(t,e)},r}function QS(t,e,r){r=wi(-1,r),r.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;r.payload=function(){return i(s)},r.callback=function(){pg(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){pg(t,e),typeof i!="function"&&(as===null?as=new Set([this]):as.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function bw(t,e,r){var i=t.pingCache;if(i===null){i=t.pingCache=new XN;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(r)||(s.add(r),t=cD.bind(null,t,e,r),e.then(t,t))}function xw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ew(t,e,r,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=wi(-1,1),e.tag=2,os(r,e,1))),r.lanes|=1),t)}var QN=Di.ReactCurrentOwner,Bn=!1;function kn(t,e,r,i){e.child=t===null?IS(e,null,r,i):ya(e,t.child,r,i)}function Tw(t,e,r,i,s){r=r.render;var o=e.ref;return aa(e,s),i=ry(t,e,r,i,o,s),r=iy(),t!==null&&!Bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ii(t,e,s)):(_t&&r&&Wv(e),e.flags|=1,kn(t,e,i,s),e.child)}function Sw(t,e,r,i,s){if(t===null){var o=r.type;return typeof o=="function"&&!py(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=o,JS(t,e,o,i,s)):(t=Cd(r.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var a=o.memoizedProps;if(r=r.compare,r=r!==null?r:pu,r(a,i)&&t.ref===e.ref)return Ii(t,e,s)}return e.flags|=1,t=us(o,i),t.ref=e.ref,t.return=e,e.child=t}function JS(t,e,r,i,s){if(t!==null){var o=t.memoizedProps;if(pu(o,i)&&t.ref===e.ref)if(Bn=!1,e.pendingProps=i=o,(t.lanes&s)!==0)t.flags&131072&&(Bn=!0);else return e.lanes=t.lanes,Ii(t,e,s)}return mg(t,e,r,i,s)}function ZS(t,e,r){var i=e.pendingProps,s=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ht(ta,Kn),Kn|=r;else{if(!(r&1073741824))return t=o!==null?o.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ht(ta,Kn),Kn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:r,ht(ta,Kn),Kn|=i}else o!==null?(i=o.baseLanes|r,e.memoizedState=null):i=r,ht(ta,Kn),Kn|=i;return kn(t,e,s,r),e.child}function eI(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function mg(t,e,r,i,s){var o=zn(r)?ro:En.current;return o=ga(e,o),aa(e,s),r=ry(t,e,r,i,o,s),i=iy(),t!==null&&!Bn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ii(t,e,s)):(_t&&i&&Wv(e),e.flags|=1,kn(t,e,r,s),e.child)}function Iw(t,e,r,i,s){if(zn(r)){var o=!0;th(e)}else o=!1;if(aa(e,s),e.stateNode===null)Sd(t,e),YS(e,r,i),fg(e,r,i,s),i=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,c=r.contextType;typeof c=="object"&&c!==null?c=vr(c):(c=zn(r)?ro:En.current,c=ga(e,c));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==i||u!==c)&&ww(e,a,i,c),Wi=!1;var p=e.memoizedState;a.state=p,oh(e,i,a,s),u=e.memoizedState,l!==i||p!==u||$n.current||Wi?(typeof h=="function"&&(hg(e,r,h,i),u=e.memoizedState),(l=Wi||_w(e,r,l,i,p,u,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),a.props=i,a.state=u,a.context=c,i=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{a=e.stateNode,CS(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:Ar(e.type,l),a.props=c,f=e.pendingProps,p=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=vr(u):(u=zn(r)?ro:En.current,u=ga(e,u));var g=r.getDerivedStateFromProps;(h=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||p!==u)&&ww(e,a,i,u),Wi=!1,p=e.memoizedState,a.state=p,oh(e,i,a,s);var b=e.memoizedState;l!==f||p!==b||$n.current||Wi?(typeof g=="function"&&(hg(e,r,g,i),b=e.memoizedState),(c=Wi||_w(e,r,c,i,p,b,u)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,b,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,b,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=b),a.props=i,a.state=b,a.context=u,i=c):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return gg(t,e,r,i,o,s)}function gg(t,e,r,i,s,o){eI(t,e);var a=(e.flags&128)!==0;if(!i&&!a)return s&&dw(e,r,!1),Ii(t,e,o);i=e.stateNode,QN.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&a?(e.child=ya(e,t.child,null,o),e.child=ya(e,null,l,o)):kn(t,e,l,o),e.memoizedState=i.state,s&&dw(e,r,!0),e.child}function tI(t){var e=t.stateNode;e.pendingContext?cw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cw(t,e.context,!1),Zv(t,e.containerInfo)}function kw(t,e,r,i,s){return va(),Gv(s),e.flags|=256,kn(t,e,r,i),e.child}var vg={dehydrated:null,treeContext:null,retryLane:0};function yg(t){return{baseLanes:t,cachePool:null,transitions:null}}function nI(t,e,r){var i=e.pendingProps,s=Et.current,o=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ht(Et,s&1),t===null)return cg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=i.children,t=i.fallback,o?(i=e.mode,o=e.child,a={mode:"hidden",children:a},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=cf(a,i,0,null),t=no(t,i,r,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=yg(r),e.memoizedState=vg,t):ay(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return JN(t,e,a,i,l,s,r);if(o){o=i.fallback,a=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:i.children};return!(a&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=us(s,u),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=us(l,o):(o=no(o,a,r,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,a=t.child.memoizedState,a=a===null?yg(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~r,e.memoizedState=vg,i}return o=t.child,t=o.sibling,i=us(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=i,e.memoizedState=null,i}function ay(t,e){return e=cf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qc(t,e,r,i){return i!==null&&Gv(i),ya(e,t.child,null,r),t=ay(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function JN(t,e,r,i,s,o,a){if(r)return e.flags&256?(e.flags&=-257,i=$p(Error(oe(422))),Qc(t,e,a,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=cf({mode:"visible",children:i.children},s,0,null),o=no(o,s,a,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&ya(e,t.child,null,a),e.child.memoizedState=yg(a),e.memoizedState=vg,o);if(!(e.mode&1))return Qc(t,e,a,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,o=Error(oe(419)),i=$p(o,i,void 0),Qc(t,e,a,i)}if(l=(a&t.childLanes)!==0,Bn||l){if(i=Xt,i!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Si(t,s),Lr(i,t,s,-1))}return fy(),i=$p(Error(oe(421))),Qc(t,e,a,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=dD.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,Yn=ss(s.nextSibling),Jn=e,_t=!0,Rr=null,t!==null&&(ur[cr++]=mi,ur[cr++]=gi,ur[cr++]=io,mi=t.id,gi=t.overflow,io=e),e=ay(e,i.children),e.flags|=4096,e)}function Cw(t,e,r){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),dg(t.return,e,r)}function zp(t,e,r,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=r,o.tailMode=s)}function rI(t,e,r){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(kn(t,e,i.children,r),i=Et.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Cw(t,r,e);else if(t.tag===19)Cw(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ht(Et,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&ah(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),zp(e,!1,s,r,o);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ah(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}zp(e,!0,r,null,o);break;case"together":zp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ii(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),oo|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(oe(153));if(e.child!==null){for(t=e.child,r=us(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=us(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function ZN(t,e,r){switch(e.tag){case 3:tI(e),va();break;case 5:AS(e);break;case 1:zn(e.type)&&th(e);break;case 4:Zv(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;ht(ih,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ht(Et,Et.current&1),e.flags|=128,null):r&e.child.childLanes?nI(t,e,r):(ht(Et,Et.current&1),t=Ii(t,e,r),t!==null?t.sibling:null);ht(Et,Et.current&1);break;case 19:if(i=(r&e.childLanes)!==0,t.flags&128){if(i)return rI(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ht(Et,Et.current),i)break;return null;case 22:case 23:return e.lanes=0,ZS(t,e,r)}return Ii(t,e,r)}var iI,_g,sI,oI;iI=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};_g=function(){};sI=function(t,e,r,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,Js(Xr.current);var o=null;switch(r){case"input":s=Bm(t,s),i=Bm(t,i),o=[];break;case"select":s=It({},s,{value:void 0}),i=It({},i,{value:void 0}),o=[];break;case"textarea":s=Hm(t,s),i=Hm(t,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Zd)}qm(r,i);var a;r=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(au.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in i){var u=i[c];if(l=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(o||(o=[]),o.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(o=o||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(au.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&mt("scroll",t),o||l===u||(o=[])):(o=o||[]).push(c,u))}r&&(o=o||[]).push("style",r);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};oI=function(t,e,r,i){r!==i&&(e.flags|=4)};function _l(t,e){if(!_t)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function vn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,i=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=r,e}function eD(t,e,r){var i=e.pendingProps;switch(qv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vn(e),null;case 1:return zn(e.type)&&eh(),vn(e),null;case 3:return i=e.stateNode,_a(),gt($n),gt(En),ty(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Yc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Rr!==null&&(kg(Rr),Rr=null))),_g(t,e),vn(e),null;case 5:ey(e);var s=Js(_u.current);if(r=e.type,t!==null&&e.stateNode!=null)sI(t,e,r,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(oe(166));return vn(e),null}if(t=Js(Xr.current),Yc(e)){i=e.stateNode,r=e.type;var o=e.memoizedProps;switch(i[Kr]=e,i[vu]=o,t=(e.mode&1)!==0,r){case"dialog":mt("cancel",i),mt("close",i);break;case"iframe":case"object":case"embed":mt("load",i);break;case"video":case"audio":for(s=0;s<Ll.length;s++)mt(Ll[s],i);break;case"source":mt("error",i);break;case"img":case"image":case"link":mt("error",i),mt("load",i);break;case"details":mt("toggle",i);break;case"input":j0(i,o),mt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},mt("invalid",i);break;case"textarea":F0(i,o),mt("invalid",i)}qm(r,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?i.textContent!==l&&(o.suppressHydrationWarning!==!0&&Kc(i.textContent,l,t),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Kc(i.textContent,l,t),s=["children",""+l]):au.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&mt("scroll",i)}switch(r){case"input":Uc(i),V0(i,o,!0);break;case"textarea":Uc(i),U0(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Zd)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=DT(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=a.createElement(r,{is:i.is}):(t=a.createElement(r),r==="select"&&(a=t,i.multiple?a.multiple=!0:i.size&&(a.size=i.size))):t=a.createElementNS(t,r),t[Kr]=e,t[vu]=i,iI(t,e,!1,!1),e.stateNode=t;e:{switch(a=Gm(r,i),r){case"dialog":mt("cancel",t),mt("close",t),s=i;break;case"iframe":case"object":case"embed":mt("load",t),s=i;break;case"video":case"audio":for(s=0;s<Ll.length;s++)mt(Ll[s],t);s=i;break;case"source":mt("error",t),s=i;break;case"img":case"image":case"link":mt("error",t),mt("load",t),s=i;break;case"details":mt("toggle",t),s=i;break;case"input":j0(t,i),s=Bm(t,i),mt("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=It({},i,{value:void 0}),mt("invalid",t);break;case"textarea":F0(t,i),s=Hm(t,i),mt("invalid",t);break;default:s=i}qm(r,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var u=l[o];o==="style"?OT(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&MT(t,u)):o==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&lu(t,u):typeof u=="number"&&lu(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(au.hasOwnProperty(o)?u!=null&&o==="onScroll"&&mt("scroll",t):u!=null&&Rv(t,o,u,a))}switch(r){case"input":Uc(t),V0(t,i,!1);break;case"textarea":Uc(t),U0(t);break;case"option":i.value!=null&&t.setAttribute("value",""+_s(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?ra(t,!!i.multiple,o,!1):i.defaultValue!=null&&ra(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Zd)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return vn(e),null;case 6:if(t&&e.stateNode!=null)oI(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(oe(166));if(r=Js(_u.current),Js(Xr.current),Yc(e)){if(i=e.stateNode,r=e.memoizedProps,i[Kr]=e,(o=i.nodeValue!==r)&&(t=Jn,t!==null))switch(t.tag){case 3:Kc(i.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Kc(i.nodeValue,r,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Kr]=e,e.stateNode=i}return vn(e),null;case 13:if(gt(Et),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_t&&Yn!==null&&e.mode&1&&!(e.flags&128))TS(),va(),e.flags|=98560,o=!1;else if(o=Yc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(oe(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(oe(317));o[Kr]=e}else va(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;vn(e),o=!1}else Rr!==null&&(kg(Rr),Rr=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Et.current&1?Bt===0&&(Bt=3):fy())),e.updateQueue!==null&&(e.flags|=4),vn(e),null);case 4:return _a(),_g(t,e),t===null&&mu(e.stateNode.containerInfo),vn(e),null;case 10:return Xv(e.type._context),vn(e),null;case 17:return zn(e.type)&&eh(),vn(e),null;case 19:if(gt(Et),o=e.memoizedState,o===null)return vn(e),null;if(i=(e.flags&128)!==0,a=o.rendering,a===null)if(i)_l(o,!1);else{if(Bt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=ah(t),a!==null){for(e.flags|=128,_l(o,!1),i=a.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)o=r,t=i,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ht(Et,Et.current&1|2),e.child}t=t.sibling}o.tail!==null&&Mt()>ba&&(e.flags|=128,i=!0,_l(o,!1),e.lanes=4194304)}else{if(!i)if(t=ah(a),t!==null){if(e.flags|=128,i=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),_l(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!_t)return vn(e),null}else 2*Mt()-o.renderingStartTime>ba&&r!==1073741824&&(e.flags|=128,i=!0,_l(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(r=o.last,r!==null?r.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Mt(),e.sibling=null,r=Et.current,ht(Et,i?r&1|2:r&1),e):(vn(e),null);case 22:case 23:return hy(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Kn&1073741824&&(vn(e),e.subtreeFlags&6&&(e.flags|=8192)):vn(e),null;case 24:return null;case 25:return null}throw Error(oe(156,e.tag))}function tD(t,e){switch(qv(e),e.tag){case 1:return zn(e.type)&&eh(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _a(),gt($n),gt(En),ty(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ey(e),null;case 13:if(gt(Et),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(oe(340));va()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return gt(Et),null;case 4:return _a(),null;case 10:return Xv(e.type._context),null;case 22:case 23:return hy(),null;case 24:return null;default:return null}}var Jc=!1,wn=!1,nD=typeof WeakSet=="function"?WeakSet:Set,ve=null;function ea(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Pt(t,e,i)}else r.current=null}function wg(t,e,r){try{r()}catch(i){Pt(t,e,i)}}var Aw=!1;function rD(t,e){if(rg=Xd,t=dS(),Hv(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var a=0,l=-1,u=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==r||s!==0&&f.nodeType!==3||(l=a+s),f!==o||i!==0&&f.nodeType!==3||(u=a+i),f.nodeType===3&&(a+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===r&&++c===s&&(l=a),p===o&&++h===i&&(u=a),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(ig={focusedElem:t,selectionRange:r},Xd=!1,ve=e;ve!==null;)if(e=ve,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ve=t;else for(;ve!==null;){e=ve;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var D=b.memoizedProps,P=b.memoizedState,x=e.stateNode,E=x.getSnapshotBeforeUpdate(e.elementType===e.type?D:Ar(e.type,D),P);x.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(oe(163))}}catch(R){Pt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,ve=t;break}ve=e.return}return b=Aw,Aw=!1,b}function Xl(t,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&wg(e,r,o)}s=s.next}while(s!==i)}}function lf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function bg(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function aI(t){var e=t.alternate;e!==null&&(t.alternate=null,aI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Kr],delete e[vu],delete e[ag],delete e[FN],delete e[UN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function lI(t){return t.tag===5||t.tag===3||t.tag===4}function Pw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xg(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Zd));else if(i!==4&&(t=t.child,t!==null))for(xg(t,e,r),t=t.sibling;t!==null;)xg(t,e,r),t=t.sibling}function Eg(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Eg(t,e,r),t=t.sibling;t!==null;)Eg(t,e,r),t=t.sibling}var rn=null,Pr=!1;function Bi(t,e,r){for(r=r.child;r!==null;)uI(t,e,r),r=r.sibling}function uI(t,e,r){if(Yr&&typeof Yr.onCommitFiberUnmount=="function")try{Yr.onCommitFiberUnmount(Zh,r)}catch{}switch(r.tag){case 5:wn||ea(r,e);case 6:var i=rn,s=Pr;rn=null,Bi(t,e,r),rn=i,Pr=s,rn!==null&&(Pr?(t=rn,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):rn.removeChild(r.stateNode));break;case 18:rn!==null&&(Pr?(t=rn,r=r.stateNode,t.nodeType===8?Op(t.parentNode,r):t.nodeType===1&&Op(t,r),hu(t)):Op(rn,r.stateNode));break;case 4:i=rn,s=Pr,rn=r.stateNode.containerInfo,Pr=!0,Bi(t,e,r),rn=i,Pr=s;break;case 0:case 11:case 14:case 15:if(!wn&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&wg(r,e,a),s=s.next}while(s!==i)}Bi(t,e,r);break;case 1:if(!wn&&(ea(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(l){Pt(r,e,l)}Bi(t,e,r);break;case 21:Bi(t,e,r);break;case 22:r.mode&1?(wn=(i=wn)||r.memoizedState!==null,Bi(t,e,r),wn=i):Bi(t,e,r);break;default:Bi(t,e,r)}}function Rw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new nD),e.forEach(function(i){var s=hD.bind(null,t,i);r.has(i)||(r.add(i),i.then(s,s))})}}function kr(t,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];try{var o=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:rn=l.stateNode,Pr=!1;break e;case 3:rn=l.stateNode.containerInfo,Pr=!0;break e;case 4:rn=l.stateNode.containerInfo,Pr=!0;break e}l=l.return}if(rn===null)throw Error(oe(160));uI(o,a,s),rn=null,Pr=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Pt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cI(e,t),e=e.sibling}function cI(t,e){var r=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(kr(e,t),zr(t),i&4){try{Xl(3,t,t.return),lf(3,t)}catch(D){Pt(t,t.return,D)}try{Xl(5,t,t.return)}catch(D){Pt(t,t.return,D)}}break;case 1:kr(e,t),zr(t),i&512&&r!==null&&ea(r,r.return);break;case 5:if(kr(e,t),zr(t),i&512&&r!==null&&ea(r,r.return),t.flags&32){var s=t.stateNode;try{lu(s,"")}catch(D){Pt(t,t.return,D)}}if(i&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,a=r!==null?r.memoizedProps:o,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&RT(s,o),Gm(l,a);var c=Gm(l,o);for(a=0;a<u.length;a+=2){var h=u[a],f=u[a+1];h==="style"?OT(s,f):h==="dangerouslySetInnerHTML"?MT(s,f):h==="children"?lu(s,f):Rv(s,h,f,c)}switch(l){case"input":$m(s,o);break;case"textarea":NT(s,o);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?ra(s,!!o.multiple,g,!1):p!==!!o.multiple&&(o.defaultValue!=null?ra(s,!!o.multiple,o.defaultValue,!0):ra(s,!!o.multiple,o.multiple?[]:"",!1))}s[vu]=o}catch(D){Pt(t,t.return,D)}}break;case 6:if(kr(e,t),zr(t),i&4){if(t.stateNode===null)throw Error(oe(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(D){Pt(t,t.return,D)}}break;case 3:if(kr(e,t),zr(t),i&4&&r!==null&&r.memoizedState.isDehydrated)try{hu(e.containerInfo)}catch(D){Pt(t,t.return,D)}break;case 4:kr(e,t),zr(t);break;case 13:kr(e,t),zr(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(cy=Mt())),i&4&&Rw(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(wn=(c=wn)||h,kr(e,t),wn=c):kr(e,t),zr(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(ve=t,h=t.child;h!==null;){for(f=ve=h;ve!==null;){switch(p=ve,g=p.child,p.tag){case 0:case 11:case 14:case 15:Xl(4,p,p.return);break;case 1:ea(p,p.return);var b=p.stateNode;if(typeof b.componentWillUnmount=="function"){i=p,r=p.return;try{e=i,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(D){Pt(i,r,D)}}break;case 5:ea(p,p.return);break;case 22:if(p.memoizedState!==null){Dw(f);continue}}g!==null?(g.return=p,ve=g):Dw(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,c?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=LT("display",a))}catch(D){Pt(t,t.return,D)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(D){Pt(t,t.return,D)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:kr(e,t),zr(t),i&4&&Rw(t);break;case 21:break;default:kr(e,t),zr(t)}}function zr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(lI(r)){var i=r;break e}r=r.return}throw Error(oe(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(lu(s,""),i.flags&=-33);var o=Pw(t);Eg(t,o,s);break;case 3:case 4:var a=i.stateNode.containerInfo,l=Pw(t);xg(t,l,a);break;default:throw Error(oe(161))}}catch(u){Pt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function iD(t,e,r){ve=t,dI(t)}function dI(t,e,r){for(var i=(t.mode&1)!==0;ve!==null;){var s=ve,o=s.child;if(s.tag===22&&i){var a=s.memoizedState!==null||Jc;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||wn;l=Jc;var c=wn;if(Jc=a,(wn=u)&&!c)for(ve=s;ve!==null;)a=ve,u=a.child,a.tag===22&&a.memoizedState!==null?Mw(s):u!==null?(u.return=a,ve=u):Mw(s);for(;o!==null;)ve=o,dI(o),o=o.sibling;ve=s,Jc=l,wn=c}Nw(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,ve=o):Nw(t)}}function Nw(t){for(;ve!==null;){var e=ve;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wn||lf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!wn)if(r===null)i.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Ar(e.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&gw(e,o,i);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}gw(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&hu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(oe(163))}wn||e.flags&512&&bg(e)}catch(p){Pt(e,e.return,p)}}if(e===t){ve=null;break}if(r=e.sibling,r!==null){r.return=e.return,ve=r;break}ve=e.return}}function Dw(t){for(;ve!==null;){var e=ve;if(e===t){ve=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ve=r;break}ve=e.return}}function Mw(t){for(;ve!==null;){var e=ve;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{lf(4,e)}catch(u){Pt(e,r,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(u){Pt(e,s,u)}}var o=e.return;try{bg(e)}catch(u){Pt(e,o,u)}break;case 5:var a=e.return;try{bg(e)}catch(u){Pt(e,a,u)}}}catch(u){Pt(e,e.return,u)}if(e===t){ve=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ve=l;break}ve=e.return}}var sD=Math.ceil,ch=Di.ReactCurrentDispatcher,ly=Di.ReactCurrentOwner,pr=Di.ReactCurrentBatchConfig,Ze=0,Xt=null,jt=null,ln=0,Kn=0,ta=Ps(0),Bt=0,Eu=null,oo=0,uf=0,uy=0,Ql=null,Fn=null,cy=0,ba=1/0,fi=null,dh=!1,Tg=null,as=null,Zc=!1,es=null,hh=0,Jl=0,Sg=null,Id=-1,kd=0;function Cn(){return Ze&6?Mt():Id!==-1?Id:Id=Mt()}function ls(t){return t.mode&1?Ze&2&&ln!==0?ln&-ln:$N.transition!==null?(kd===0&&(kd=KT()),kd):(t=st,t!==0||(t=window.event,t=t===void 0?16:nS(t.type)),t):1}function Lr(t,e,r,i){if(50<Jl)throw Jl=0,Sg=null,Error(oe(185));zu(t,r,i),(!(Ze&2)||t!==Xt)&&(t===Xt&&(!(Ze&2)&&(uf|=r),Bt===4&&Ki(t,ln)),Hn(t,i),r===1&&Ze===0&&!(e.mode&1)&&(ba=Mt()+500,sf&&Rs()))}function Hn(t,e){var r=t.callbackNode;$R(t,e);var i=Yd(t,t===Xt?ln:0);if(i===0)r!==null&&z0(r),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(r!=null&&z0(r),e===1)t.tag===0?BN(Lw.bind(null,t)):bS(Lw.bind(null,t)),jN(function(){!(Ze&6)&&Rs()}),r=null;else{switch(XT(i)){case 1:r=Ov;break;case 4:r=qT;break;case 16:r=Kd;break;case 536870912:r=GT;break;default:r=Kd}r=_I(r,hI.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function hI(t,e){if(Id=-1,kd=0,Ze&6)throw Error(oe(327));var r=t.callbackNode;if(la()&&t.callbackNode!==r)return null;var i=Yd(t,t===Xt?ln:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=fh(t,i);else{e=i;var s=Ze;Ze|=2;var o=pI();(Xt!==t||ln!==e)&&(fi=null,ba=Mt()+500,to(t,e));do try{lD();break}catch(l){fI(t,l)}while(!0);Yv(),ch.current=o,Ze=s,jt!==null?e=0:(Xt=null,ln=0,e=Bt)}if(e!==0){if(e===2&&(s=Jm(t),s!==0&&(i=s,e=Ig(t,s))),e===1)throw r=Eu,to(t,0),Ki(t,i),Hn(t,Mt()),r;if(e===6)Ki(t,i);else{if(s=t.current.alternate,!(i&30)&&!oD(s)&&(e=fh(t,i),e===2&&(o=Jm(t),o!==0&&(i=o,e=Ig(t,o))),e===1))throw r=Eu,to(t,0),Ki(t,i),Hn(t,Mt()),r;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(oe(345));case 2:Ws(t,Fn,fi);break;case 3:if(Ki(t,i),(i&130023424)===i&&(e=cy+500-Mt(),10<e)){if(Yd(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){Cn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=og(Ws.bind(null,t,Fn,fi),e);break}Ws(t,Fn,fi);break;case 4:if(Ki(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var a=31-Mr(i);o=1<<a,a=e[a],a>s&&(s=a),i&=~o}if(i=s,i=Mt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*sD(i/1960))-i,10<i){t.timeoutHandle=og(Ws.bind(null,t,Fn,fi),i);break}Ws(t,Fn,fi);break;case 5:Ws(t,Fn,fi);break;default:throw Error(oe(329))}}}return Hn(t,Mt()),t.callbackNode===r?hI.bind(null,t):null}function Ig(t,e){var r=Ql;return t.current.memoizedState.isDehydrated&&(to(t,e).flags|=256),t=fh(t,e),t!==2&&(e=Fn,Fn=r,e!==null&&kg(e)),t}function kg(t){Fn===null?Fn=t:Fn.push.apply(Fn,t)}function oD(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var s=r[i],o=s.getSnapshot;s=s.value;try{if(!Or(o(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ki(t,e){for(e&=~uy,e&=~uf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Mr(e),i=1<<r;t[r]=-1,e&=~i}}function Lw(t){if(Ze&6)throw Error(oe(327));la();var e=Yd(t,0);if(!(e&1))return Hn(t,Mt()),null;var r=fh(t,e);if(t.tag!==0&&r===2){var i=Jm(t);i!==0&&(e=i,r=Ig(t,i))}if(r===1)throw r=Eu,to(t,0),Ki(t,e),Hn(t,Mt()),r;if(r===6)throw Error(oe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ws(t,Fn,fi),Hn(t,Mt()),null}function dy(t,e){var r=Ze;Ze|=1;try{return t(e)}finally{Ze=r,Ze===0&&(ba=Mt()+500,sf&&Rs())}}function ao(t){es!==null&&es.tag===0&&!(Ze&6)&&la();var e=Ze;Ze|=1;var r=pr.transition,i=st;try{if(pr.transition=null,st=1,t)return t()}finally{st=i,pr.transition=r,Ze=e,!(Ze&6)&&Rs()}}function hy(){Kn=ta.current,gt(ta)}function to(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,ON(r)),jt!==null)for(r=jt.return;r!==null;){var i=r;switch(qv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&eh();break;case 3:_a(),gt($n),gt(En),ty();break;case 5:ey(i);break;case 4:_a();break;case 13:gt(Et);break;case 19:gt(Et);break;case 10:Xv(i.type._context);break;case 22:case 23:hy()}r=r.return}if(Xt=t,jt=t=us(t.current,null),ln=Kn=e,Bt=0,Eu=null,uy=uf=oo=0,Fn=Ql=null,Qs!==null){for(e=0;e<Qs.length;e++)if(r=Qs[e],i=r.interleaved,i!==null){r.interleaved=null;var s=i.next,o=r.pending;if(o!==null){var a=o.next;o.next=s,i.next=a}r.pending=i}Qs=null}return t}function fI(t,e){do{var r=jt;try{if(Yv(),Ed.current=uh,lh){for(var i=St.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}lh=!1}if(so=0,Kt=Ft=St=null,Yl=!1,wu=0,ly.current=null,r===null||r.return===null){Bt=1,Eu=e,jt=null;break}e:{var o=t,a=r.return,l=r,u=e;if(e=ln,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=xw(a);if(g!==null){g.flags&=-257,Ew(g,a,l,o,e),g.mode&1&&bw(o,c,e),e=g,u=c;var b=e.updateQueue;if(b===null){var D=new Set;D.add(u),e.updateQueue=D}else b.add(u);break e}else{if(!(e&1)){bw(o,c,e),fy();break e}u=Error(oe(426))}}else if(_t&&l.mode&1){var P=xw(a);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Ew(P,a,l,o,e),Gv(wa(u,l));break e}}o=u=wa(u,l),Bt!==4&&(Bt=2),Ql===null?Ql=[o]:Ql.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var x=XS(o,u,e);mw(o,x);break e;case 1:l=u;var E=o.type,_=o.stateNode;if(!(o.flags&128)&&(typeof E.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(as===null||!as.has(_)))){o.flags|=65536,e&=-e,o.lanes|=e;var R=QS(o,l,e);mw(o,R);break e}}o=o.return}while(o!==null)}gI(r)}catch(j){e=j,jt===r&&r!==null&&(jt=r=r.return);continue}break}while(!0)}function pI(){var t=ch.current;return ch.current=uh,t===null?uh:t}function fy(){(Bt===0||Bt===3||Bt===2)&&(Bt=4),Xt===null||!(oo&268435455)&&!(uf&268435455)||Ki(Xt,ln)}function fh(t,e){var r=Ze;Ze|=2;var i=pI();(Xt!==t||ln!==e)&&(fi=null,to(t,e));do try{aD();break}catch(s){fI(t,s)}while(!0);if(Yv(),Ze=r,ch.current=i,jt!==null)throw Error(oe(261));return Xt=null,ln=0,Bt}function aD(){for(;jt!==null;)mI(jt)}function lD(){for(;jt!==null&&!DR();)mI(jt)}function mI(t){var e=yI(t.alternate,t,Kn);t.memoizedProps=t.pendingProps,e===null?gI(t):jt=e,ly.current=null}function gI(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=tD(r,e),r!==null){r.flags&=32767,jt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Bt=6,jt=null;return}}else if(r=eD(r,e,Kn),r!==null){jt=r;return}if(e=e.sibling,e!==null){jt=e;return}jt=e=t}while(e!==null);Bt===0&&(Bt=5)}function Ws(t,e,r){var i=st,s=pr.transition;try{pr.transition=null,st=1,uD(t,e,r,i)}finally{pr.transition=s,st=i}return null}function uD(t,e,r,i){do la();while(es!==null);if(Ze&6)throw Error(oe(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(oe(177));t.callbackNode=null,t.callbackPriority=0;var o=r.lanes|r.childLanes;if(zR(t,o),t===Xt&&(jt=Xt=null,ln=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Zc||(Zc=!0,_I(Kd,function(){return la(),null})),o=(r.flags&15990)!==0,r.subtreeFlags&15990||o){o=pr.transition,pr.transition=null;var a=st;st=1;var l=Ze;Ze|=4,ly.current=null,rD(t,r),cI(r,t),AN(ig),Xd=!!rg,ig=rg=null,t.current=r,iD(r),MR(),Ze=l,st=a,pr.transition=o}else t.current=r;if(Zc&&(Zc=!1,es=t,hh=s),o=t.pendingLanes,o===0&&(as=null),jR(r.stateNode),Hn(t,Mt()),e!==null)for(i=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(dh)throw dh=!1,t=Tg,Tg=null,t;return hh&1&&t.tag!==0&&la(),o=t.pendingLanes,o&1?t===Sg?Jl++:(Jl=0,Sg=t):Jl=0,Rs(),null}function la(){if(es!==null){var t=XT(hh),e=pr.transition,r=st;try{if(pr.transition=null,st=16>t?16:t,es===null)var i=!1;else{if(t=es,es=null,hh=0,Ze&6)throw Error(oe(331));var s=Ze;for(Ze|=4,ve=t.current;ve!==null;){var o=ve,a=o.child;if(ve.flags&16){var l=o.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(ve=c;ve!==null;){var h=ve;switch(h.tag){case 0:case 11:case 15:Xl(8,h,o)}var f=h.child;if(f!==null)f.return=h,ve=f;else for(;ve!==null;){h=ve;var p=h.sibling,g=h.return;if(aI(h),h===c){ve=null;break}if(p!==null){p.return=g,ve=p;break}ve=g}}}var b=o.alternate;if(b!==null){var D=b.child;if(D!==null){b.child=null;do{var P=D.sibling;D.sibling=null,D=P}while(D!==null)}}ve=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,ve=a;else e:for(;ve!==null;){if(o=ve,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Xl(9,o,o.return)}var x=o.sibling;if(x!==null){x.return=o.return,ve=x;break e}ve=o.return}}var E=t.current;for(ve=E;ve!==null;){a=ve;var _=a.child;if(a.subtreeFlags&2064&&_!==null)_.return=a,ve=_;else e:for(a=E;ve!==null;){if(l=ve,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:lf(9,l)}}catch(j){Pt(l,l.return,j)}if(l===a){ve=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,ve=R;break e}ve=l.return}}if(Ze=s,Rs(),Yr&&typeof Yr.onPostCommitFiberRoot=="function")try{Yr.onPostCommitFiberRoot(Zh,t)}catch{}i=!0}return i}finally{st=r,pr.transition=e}}return!1}function Ow(t,e,r){e=wa(r,e),e=XS(t,e,1),t=os(t,e,1),e=Cn(),t!==null&&(zu(t,1,e),Hn(t,e))}function Pt(t,e,r){if(t.tag===3)Ow(t,t,r);else for(;e!==null;){if(e.tag===3){Ow(e,t,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(as===null||!as.has(i))){t=wa(r,t),t=QS(e,t,1),e=os(e,t,1),t=Cn(),e!==null&&(zu(e,1,t),Hn(e,t));break}}e=e.return}}function cD(t,e,r){var i=t.pingCache;i!==null&&i.delete(e),e=Cn(),t.pingedLanes|=t.suspendedLanes&r,Xt===t&&(ln&r)===r&&(Bt===4||Bt===3&&(ln&130023424)===ln&&500>Mt()-cy?to(t,0):uy|=r),Hn(t,e)}function vI(t,e){e===0&&(t.mode&1?(e=zc,zc<<=1,!(zc&130023424)&&(zc=4194304)):e=1);var r=Cn();t=Si(t,e),t!==null&&(zu(t,e,r),Hn(t,r))}function dD(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),vI(t,r)}function hD(t,e){var r=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(oe(314))}i!==null&&i.delete(e),vI(t,r)}var yI;yI=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||$n.current)Bn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Bn=!1,ZN(t,e,r);Bn=!!(t.flags&131072)}else Bn=!1,_t&&e.flags&1048576&&xS(e,rh,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Sd(t,e),t=e.pendingProps;var s=ga(e,En.current);aa(e,r),s=ry(null,e,i,t,s,r);var o=iy();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,zn(i)?(o=!0,th(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Jv(e),s.updater=af,e.stateNode=s,s._reactInternals=e,fg(e,i,t,r),e=gg(null,e,i,!0,o,r)):(e.tag=0,_t&&o&&Wv(e),kn(null,e,s,r),e=e.child),e;case 16:i=e.elementType;e:{switch(Sd(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=pD(i),t=Ar(i,t),s){case 0:e=mg(null,e,i,t,r);break e;case 1:e=Iw(null,e,i,t,r);break e;case 11:e=Tw(null,e,i,t,r);break e;case 14:e=Sw(null,e,i,Ar(i.type,t),r);break e}throw Error(oe(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Ar(i,s),mg(t,e,i,s,r);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Ar(i,s),Iw(t,e,i,s,r);case 3:e:{if(tI(e),t===null)throw Error(oe(387));i=e.pendingProps,o=e.memoizedState,s=o.element,CS(t,e),oh(e,i,null,r);var a=e.memoizedState;if(i=a.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=wa(Error(oe(423)),e),e=kw(t,e,i,r,s);break e}else if(i!==s){s=wa(Error(oe(424)),e),e=kw(t,e,i,r,s);break e}else for(Yn=ss(e.stateNode.containerInfo.firstChild),Jn=e,_t=!0,Rr=null,r=IS(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(va(),i===s){e=Ii(t,e,r);break e}kn(t,e,i,r)}e=e.child}return e;case 5:return AS(e),t===null&&cg(e),i=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,a=s.children,sg(i,s)?a=null:o!==null&&sg(i,o)&&(e.flags|=32),eI(t,e),kn(t,e,a,r),e.child;case 6:return t===null&&cg(e),null;case 13:return nI(t,e,r);case 4:return Zv(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ya(e,null,i,r):kn(t,e,i,r),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Ar(i,s),Tw(t,e,i,s,r);case 7:return kn(t,e,e.pendingProps,r),e.child;case 8:return kn(t,e,e.pendingProps.children,r),e.child;case 12:return kn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,a=s.value,ht(ih,i._currentValue),i._currentValue=a,o!==null)if(Or(o.value,a)){if(o.children===s.children&&!$n.current){e=Ii(t,e,r);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(o.tag===1){u=wi(-1,r&-r),u.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=r,u=o.alternate,u!==null&&(u.lanes|=r),dg(o.return,r,e),l.lanes|=r;break}u=u.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(oe(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),dg(a,r,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}kn(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,aa(e,r),s=vr(s),i=i(s),e.flags|=1,kn(t,e,i,r),e.child;case 14:return i=e.type,s=Ar(i,e.pendingProps),s=Ar(i.type,s),Sw(t,e,i,s,r);case 15:return JS(t,e,e.type,e.pendingProps,r);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Ar(i,s),Sd(t,e),e.tag=1,zn(i)?(t=!0,th(e)):t=!1,aa(e,r),YS(e,i,s),fg(e,i,s,r),gg(null,e,i,!0,t,r);case 19:return rI(t,e,r);case 22:return ZS(t,e,r)}throw Error(oe(156,e.tag))};function _I(t,e){return WT(t,e)}function fD(t,e,r,i){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function hr(t,e,r,i){return new fD(t,e,r,i)}function py(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pD(t){if(typeof t=="function")return py(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Dv)return 11;if(t===Mv)return 14}return 2}function us(t,e){var r=t.alternate;return r===null?(r=hr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Cd(t,e,r,i,s,o){var a=2;if(i=t,typeof t=="function")py(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case Wo:return no(r.children,s,o,e);case Nv:a=8,s|=8;break;case jm:return t=hr(12,r,e,s|2),t.elementType=jm,t.lanes=o,t;case Vm:return t=hr(13,r,e,s),t.elementType=Vm,t.lanes=o,t;case Fm:return t=hr(19,r,e,s),t.elementType=Fm,t.lanes=o,t;case CT:return cf(r,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case IT:a=10;break e;case kT:a=9;break e;case Dv:a=11;break e;case Mv:a=14;break e;case Hi:a=16,i=null;break e}throw Error(oe(130,t==null?t:typeof t,""))}return e=hr(a,r,e,s),e.elementType=t,e.type=i,e.lanes=o,e}function no(t,e,r,i){return t=hr(7,t,i,e),t.lanes=r,t}function cf(t,e,r,i){return t=hr(22,t,i,e),t.elementType=CT,t.lanes=r,t.stateNode={isHidden:!1},t}function Hp(t,e,r){return t=hr(6,t,null,e),t.lanes=r,t}function Wp(t,e,r){return e=hr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mD(t,e,r,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sp(0),this.expirationTimes=Sp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sp(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function my(t,e,r,i,s,o,a,l,u){return t=new mD(t,e,r,l,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=hr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Jv(o),t}function gD(t,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ho,key:i==null?null:""+i,children:t,containerInfo:e,implementation:r}}function wI(t){if(!t)return ws;t=t._reactInternals;e:{if(vo(t)!==t||t.tag!==1)throw Error(oe(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(zn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(oe(171))}if(t.tag===1){var r=t.type;if(zn(r))return wS(t,r,e)}return e}function bI(t,e,r,i,s,o,a,l,u){return t=my(r,i,!0,t,s,o,a,l,u),t.context=wI(null),r=t.current,i=Cn(),s=ls(r),o=wi(i,s),o.callback=e??null,os(r,o,s),t.current.lanes=s,zu(t,s,i),Hn(t,i),t}function df(t,e,r,i){var s=e.current,o=Cn(),a=ls(s);return r=wI(r),e.context===null?e.context=r:e.pendingContext=r,e=wi(o,a),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=os(s,e,a),t!==null&&(Lr(t,s,a,o),xd(t,s,a)),a}function ph(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function jw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function gy(t,e){jw(t,e),(t=t.alternate)&&jw(t,e)}function vD(){return null}var xI=typeof reportError=="function"?reportError:function(t){console.error(t)};function vy(t){this._internalRoot=t}hf.prototype.render=vy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(oe(409));df(t,e,null,null)};hf.prototype.unmount=vy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ao(function(){df(null,t,null,null)}),e[Ti]=null}};function hf(t){this._internalRoot=t}hf.prototype.unstable_scheduleHydration=function(t){if(t){var e=ZT();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Gi.length&&e!==0&&e<Gi[r].priority;r++);Gi.splice(r,0,t),r===0&&tS(t)}};function yy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ff(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Vw(){}function yD(t,e,r,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var c=ph(a);o.call(c)}}var a=bI(e,i,t,0,null,!1,!1,"",Vw);return t._reactRootContainer=a,t[Ti]=a.current,mu(t.nodeType===8?t.parentNode:t),ao(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var c=ph(u);l.call(c)}}var u=my(t,0,!1,null,null,!1,!1,"",Vw);return t._reactRootContainer=u,t[Ti]=u.current,mu(t.nodeType===8?t.parentNode:t),ao(function(){df(e,u,r,i)}),u}function pf(t,e,r,i,s){var o=r._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var u=ph(a);l.call(u)}}df(e,a,t,s)}else a=yD(r,e,t,s,i);return ph(a)}QT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Ml(e.pendingLanes);r!==0&&(jv(e,r|1),Hn(e,Mt()),!(Ze&6)&&(ba=Mt()+500,Rs()))}break;case 13:ao(function(){var i=Si(t,1);if(i!==null){var s=Cn();Lr(i,t,1,s)}}),gy(t,1)}};Vv=function(t){if(t.tag===13){var e=Si(t,134217728);if(e!==null){var r=Cn();Lr(e,t,134217728,r)}gy(t,134217728)}};JT=function(t){if(t.tag===13){var e=ls(t),r=Si(t,e);if(r!==null){var i=Cn();Lr(r,t,e,i)}gy(t,e)}};ZT=function(){return st};eS=function(t,e){var r=st;try{return st=t,e()}finally{st=r}};Ym=function(t,e,r){switch(e){case"input":if($m(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==t&&i.form===t.form){var s=rf(i);if(!s)throw Error(oe(90));PT(i),$m(i,s)}}}break;case"textarea":NT(t,r);break;case"select":e=r.value,e!=null&&ra(t,!!r.multiple,e,!1)}};FT=dy;UT=ao;var _D={usingClientEntryPoint:!1,Events:[Wu,Yo,rf,jT,VT,dy]},wl={findFiberByHostInstance:Xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wD={bundleType:wl.bundleType,version:wl.version,rendererPackageName:wl.rendererPackageName,rendererConfig:wl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Di.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zT(t),t===null?null:t.stateNode},findFiberByHostInstance:wl.findFiberByHostInstance||vD,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ed.isDisabled&&ed.supportsFiber)try{Zh=ed.inject(wD),Yr=ed}catch{}}ir.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_D;ir.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yy(e))throw Error(oe(200));return gD(t,e,null,r)};ir.createRoot=function(t,e){if(!yy(t))throw Error(oe(299));var r=!1,i="",s=xI;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=my(t,1,!1,null,null,r,!1,i,s),t[Ti]=e.current,mu(t.nodeType===8?t.parentNode:t),new vy(e)};ir.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(oe(188)):(t=Object.keys(t).join(","),Error(oe(268,t)));return t=zT(e),t=t===null?null:t.stateNode,t};ir.flushSync=function(t){return ao(t)};ir.hydrate=function(t,e,r){if(!ff(e))throw Error(oe(200));return pf(null,t,e,!0,r)};ir.hydrateRoot=function(t,e,r){if(!yy(t))throw Error(oe(405));var i=r!=null&&r.hydratedSources||null,s=!1,o="",a=xI;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=bI(e,null,t,1,r??null,s,!1,o,a),t[Ti]=e.current,mu(t),i)for(t=0;t<i.length;t++)r=i[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new hf(e)};ir.render=function(t,e,r){if(!ff(e))throw Error(oe(200));return pf(null,t,e,!1,r)};ir.unmountComponentAtNode=function(t){if(!ff(t))throw Error(oe(40));return t._reactRootContainer?(ao(function(){pf(null,null,t,!1,function(){t._reactRootContainer=null,t[Ti]=null})}),!0):!1};ir.unstable_batchedUpdates=dy;ir.unstable_renderSubtreeIntoContainer=function(t,e,r,i){if(!ff(r))throw Error(oe(200));if(t==null||t._reactInternals===void 0)throw Error(oe(38));return pf(t,e,r,!1,i)};ir.version="18.3.1-next-f1338f8080-20240426";function EI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(EI)}catch(t){console.error(t)}}EI(),xT.exports=ir;var _y=xT.exports;const bD=Fa(_y);var Fw=_y;Lm.createRoot=Fw.createRoot,Lm.hydrateRoot=Fw.hydrateRoot;var wy={};Object.defineProperty(wy,"__esModule",{value:!0});wy.parse=CD;wy.serialize=AD;const xD=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,ED=/^[\u0021-\u003A\u003C-\u007E]*$/,TD=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,SD=/^[\u0020-\u003A\u003D-\u007E]*$/,ID=Object.prototype.toString,kD=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function CD(t,e){const r=new kD,i=t.length;if(i<2)return r;const s=(e==null?void 0:e.decode)||PD;let o=0;do{const a=t.indexOf("=",o);if(a===-1)break;const l=t.indexOf(";",o),u=l===-1?i:l;if(a>u){o=t.lastIndexOf(";",a-1)+1;continue}const c=Uw(t,o,a),h=Bw(t,a,c),f=t.slice(c,h);if(r[f]===void 0){let p=Uw(t,a+1,u),g=Bw(t,u,p);const b=s(t.slice(p,g));r[f]=b}o=u+1}while(o<i);return r}function Uw(t,e,r){do{const i=t.charCodeAt(e);if(i!==32&&i!==9)return e}while(++e<r);return r}function Bw(t,e,r){for(;e>r;){const i=t.charCodeAt(--e);if(i!==32&&i!==9)return e+1}return r}function AD(t,e,r){const i=(r==null?void 0:r.encode)||encodeURIComponent;if(!xD.test(t))throw new TypeError(`argument name is invalid: ${t}`);const s=i(e);if(!ED.test(s))throw new TypeError(`argument val is invalid: ${e}`);let o=t+"="+s;if(!r)return o;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);o+="; Max-Age="+r.maxAge}if(r.domain){if(!TD.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);o+="; Domain="+r.domain}if(r.path){if(!SD.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);o+="; Path="+r.path}if(r.expires){if(!RD(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);o+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(o+="; HttpOnly"),r.secure&&(o+="; Secure"),r.partitioned&&(o+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":o+="; Priority=Low";break;case"medium":o+="; Priority=Medium";break;case"high":o+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"none":o+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return o}function PD(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function RD(t){return ID.call(t)==="[object Date]"}/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var $w="popstate";function ND(t={}){function e(s,o){let{pathname:a="/",search:l="",hash:u=""}=yo(s.location.hash.substring(1));return!a.startsWith("/")&&!a.startsWith(".")&&(a="/"+a),Cg("",{pathname:a,search:l,hash:u},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(s,o){let a=s.document.querySelector("base"),l="";if(a&&a.getAttribute("href")){let u=s.location.href,c=u.indexOf("#");l=c===-1?u:u.slice(0,c)}return l+"#"+(typeof o=="string"?o:Tu(o))}function i(s,o){rr(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(o)})`)}return MD(e,r,i,t)}function bt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function DD(){return Math.random().toString(36).substring(2,10)}function zw(t,e){return{usr:t.state,key:t.key,idx:e}}function Cg(t,e,r=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?yo(e):e,state:r,key:e&&e.key||i||DD()}}function Tu({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function yo(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function MD(t,e,r,i={}){let{window:s=document.defaultView,v5Compat:o=!1}=i,a=s.history,l="POP",u=null,c=h();c==null&&(c=0,a.replaceState({...a.state,idx:c},""));function h(){return(a.state||{idx:null}).idx}function f(){l="POP";let P=h(),x=P==null?null:P-c;c=P,u&&u({action:l,location:D.location,delta:x})}function p(P,x){l="PUSH";let E=Cg(D.location,P,x);r&&r(E,P),c=h()+1;let _=zw(E,c),R=D.createHref(E);try{a.pushState(_,"",R)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;s.location.assign(R)}o&&u&&u({action:l,location:D.location,delta:1})}function g(P,x){l="REPLACE";let E=Cg(D.location,P,x);r&&r(E,P),c=h();let _=zw(E,c),R=D.createHref(E);a.replaceState(_,"",R),o&&u&&u({action:l,location:D.location,delta:0})}function b(P){let x=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof P=="string"?P:Tu(P);return E=E.replace(/ $/,"%20"),bt(x,`No window.location.(origin|href) available to create URL for href: ${E}`),new URL(E,x)}let D={get action(){return l},get location(){return t(s,a)},listen(P){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener($w,f),u=P,()=>{s.removeEventListener($w,f),u=null}},createHref(P){return e(s,P)},createURL:b,encodeLocation(P){let x=b(P);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:p,replace:g,go(P){return a.go(P)}};return D}function TI(t,e,r="/"){return LD(t,e,r,!1)}function LD(t,e,r,i){let s=typeof e=="string"?yo(e):e,o=bs(s.pathname||"/",r);if(o==null)return null;let a=SI(t);OD(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let c=GD(o);l=WD(a[u],c,i)}return l}function SI(t,e=[],r=[],i=""){let s=(o,a,l)=>{let u={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};u.relativePath.startsWith("/")&&(bt(u.relativePath.startsWith(i),`Absolute route path "${u.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(i.length));let c=bi([i,u.relativePath]),h=r.concat(u);o.children&&o.children.length>0&&(bt(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),SI(o.children,e,h,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:zD(c,o.index),routesMeta:h})};return t.forEach((o,a)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))s(o,a);else for(let u of II(o.path))s(o,a,u)}),e}function II(t){let e=t.split("/");if(e.length===0)return[];let[r,...i]=e,s=r.endsWith("?"),o=r.replace(/\?$/,"");if(i.length===0)return s?[o,""]:[o];let a=II(i.join("/")),l=[];return l.push(...a.map(u=>u===""?o:[o,u].join("/"))),s&&l.push(...a),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function OD(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:HD(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var jD=/^:[\w-]+$/,VD=3,FD=2,UD=1,BD=10,$D=-2,Hw=t=>t==="*";function zD(t,e){let r=t.split("/"),i=r.length;return r.some(Hw)&&(i+=$D),e&&(i+=FD),r.filter(s=>!Hw(s)).reduce((s,o)=>s+(jD.test(o)?VD:o===""?UD:BD),i)}function HD(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function WD(t,e,r=!1){let{routesMeta:i}=t,s={},o="/",a=[];for(let l=0;l<i.length;++l){let u=i[l],c=l===i.length-1,h=o==="/"?e:e.slice(o.length)||"/",f=mh({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),p=u.route;if(!f&&c&&r&&!i[i.length-1].route.index&&(f=mh({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:bi([o,f.pathname]),pathnameBase:QD(bi([o,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(o=bi([o,f.pathnameBase]))}return a}function mh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,i]=qD(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let o=s[0],a=o.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:i.reduce((c,{paramName:h,isOptional:f},p)=>{if(h==="*"){let b=l[p]||"";a=o.slice(0,o.length-b.length).replace(/(.)\/+$/,"$1")}const g=l[p];return f&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:o,pathnameBase:a,pattern:t}}function qD(t,e=!1,r=!0){rr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function GD(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function bs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=t.charAt(r);return i&&i!=="/"?null:t.slice(r)||"/"}function KD(t,e="/"){let{pathname:r,search:i="",hash:s=""}=typeof t=="string"?yo(t):t;return{pathname:r?r.startsWith("/")?r:YD(r,e):e,search:JD(i),hash:ZD(s)}}function YD(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function qp(t,e,r,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function XD(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function by(t){let e=XD(t);return e.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase)}function xy(t,e,r,i=!1){let s;typeof t=="string"?s=yo(t):(s={...t},bt(!s.pathname||!s.pathname.includes("?"),qp("?","pathname","search",s)),bt(!s.pathname||!s.pathname.includes("#"),qp("#","pathname","hash",s)),bt(!s.search||!s.search.includes("#"),qp("#","search","hash",s)));let o=t===""||s.pathname==="",a=o?"/":s.pathname,l;if(a==null)l=r;else{let f=e.length-1;if(!i&&a.startsWith("..")){let p=a.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}l=f>=0?e[f]:"/"}let u=KD(s,l),c=a&&a!=="/"&&a.endsWith("/"),h=(o||a===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}var bi=t=>t.join("/").replace(/\/\/+/g,"/"),QD=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),JD=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ZD=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function e2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var kI=["POST","PUT","PATCH","DELETE"];new Set(kI);var t2=["GET",...kI];new Set(t2);var za=M.createContext(null);za.displayName="DataRouter";var mf=M.createContext(null);mf.displayName="DataRouterState";var CI=M.createContext({isTransitioning:!1});CI.displayName="ViewTransition";var n2=M.createContext(new Map);n2.displayName="Fetchers";var r2=M.createContext(null);r2.displayName="Await";var Vr=M.createContext(null);Vr.displayName="Navigation";var Gu=M.createContext(null);Gu.displayName="Location";var oi=M.createContext({outlet:null,matches:[],isDataRoute:!1});oi.displayName="Route";var Ey=M.createContext(null);Ey.displayName="RouteError";function i2(t,{relative:e}={}){bt(Ha(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=M.useContext(Vr),{hash:s,pathname:o,search:a}=Ku(t,{relative:e}),l=o;return r!=="/"&&(l=o==="/"?r:bi([r,o])),i.createHref({pathname:l,search:a,hash:s})}function Ha(){return M.useContext(Gu)!=null}function wr(){return bt(Ha(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(Gu).location}var AI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function PI(t){M.useContext(Vr).static||M.useLayoutEffect(t)}function Fr(){let{isDataRoute:t}=M.useContext(oi);return t?v2():s2()}function s2(){bt(Ha(),"useNavigate() may be used only in the context of a <Router> component.");let t=M.useContext(za),{basename:e,navigator:r}=M.useContext(Vr),{matches:i}=M.useContext(oi),{pathname:s}=wr(),o=JSON.stringify(by(i)),a=M.useRef(!1);return PI(()=>{a.current=!0}),M.useCallback((u,c={})=>{if(rr(a.current,AI),!a.current)return;if(typeof u=="number"){r.go(u);return}let h=xy(u,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:bi([e,h.pathname])),(c.replace?r.replace:r.push)(h,c.state,c)},[e,r,o,s,t])}M.createContext(null);function Ku(t,{relative:e}={}){let{matches:r}=M.useContext(oi),{pathname:i}=wr(),s=JSON.stringify(by(r));return M.useMemo(()=>xy(t,JSON.parse(s),i,e==="path"),[t,s,i,e])}function o2(t,e){return RI(t,e)}function RI(t,e,r,i){var E;bt(Ha(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:o}=M.useContext(Vr),{matches:a}=M.useContext(oi),l=a[a.length-1],u=l?l.params:{},c=l?l.pathname:"/",h=l?l.pathnameBase:"/",f=l&&l.route;{let _=f&&f.path||"";NI(c,!f||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let p=wr(),g;if(e){let _=typeof e=="string"?yo(e):e;bt(h==="/"||((E=_.pathname)==null?void 0:E.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${_.pathname}" was given in the \`location\` prop.`),g=_}else g=p;let b=g.pathname||"/",D=b;if(h!=="/"){let _=h.replace(/^\//,"").split("/");D="/"+b.replace(/^\//,"").split("/").slice(_.length).join("/")}let P=!o&&r&&r.matches&&r.matches.length>0?r.matches:TI(t,{pathname:D});rr(f||P!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),rr(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=d2(P&&P.map(_=>Object.assign({},_,{params:Object.assign({},u,_.params),pathname:bi([h,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?h:bi([h,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),a,r,i);return e&&x?M.createElement(Gu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},x):x}function a2(){let t=g2(),e=e2(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",t),a=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:o},"ErrorBoundary")," or"," ",M.createElement("code",{style:o},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),r?M.createElement("pre",{style:s},r):null,a)}var l2=M.createElement(a2,null),u2=class extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?M.createElement(oi.Provider,{value:this.props.routeContext},M.createElement(Ey.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function c2({routeContext:t,match:e,children:r}){let i=M.useContext(za);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(oi.Provider,{value:t},r)}function d2(t,e=[],r=null,i=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,o=r==null?void 0:r.errors;if(o!=null){let u=s.findIndex(c=>c.route.id&&(o==null?void 0:o[c.route.id])!==void 0);bt(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let a=!1,l=-1;if(r)for(let u=0;u<s.length;u++){let c=s[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(l=u),c.route.id){let{loaderData:h,errors:f}=r,p=c.route.loader&&!h.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||p){a=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((u,c,h)=>{let f,p=!1,g=null,b=null;r&&(f=o&&c.route.id?o[c.route.id]:void 0,g=c.route.errorElement||l2,a&&(l<0&&h===0?(NI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,b=null):l===h&&(p=!0,b=c.route.hydrateFallbackElement||null)));let D=e.concat(s.slice(0,h+1)),P=()=>{let x;return f?x=g:p?x=b:c.route.Component?x=M.createElement(c.route.Component,null):c.route.element?x=c.route.element:x=u,M.createElement(c2,{match:c,routeContext:{outlet:u,matches:D,isDataRoute:r!=null},children:x})};return r&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?M.createElement(u2,{location:r.location,revalidation:r.revalidation,component:g,error:f,children:P(),routeContext:{outlet:null,matches:D,isDataRoute:!0}}):P()},null)}function Ty(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function h2(t){let e=M.useContext(za);return bt(e,Ty(t)),e}function f2(t){let e=M.useContext(mf);return bt(e,Ty(t)),e}function p2(t){let e=M.useContext(oi);return bt(e,Ty(t)),e}function Sy(t){let e=p2(t),r=e.matches[e.matches.length-1];return bt(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function m2(){return Sy("useRouteId")}function g2(){var i;let t=M.useContext(Ey),e=f2("useRouteError"),r=Sy("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[r]}function v2(){let{router:t}=h2("useNavigate"),e=Sy("useNavigate"),r=M.useRef(!1);return PI(()=>{r.current=!0}),M.useCallback(async(s,o={})=>{rr(r.current,AI),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...o}))},[t,e])}var Ww={};function NI(t,e,r){!e&&!Ww[t]&&(Ww[t]=!0,rr(!1,r))}M.memo(y2);function y2({routes:t,future:e,state:r}){return RI(t,void 0,r,e)}function DI({to:t,replace:e,state:r,relative:i}){bt(Ha(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=M.useContext(Vr);rr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:o}=M.useContext(oi),{pathname:a}=wr(),l=Fr(),u=xy(t,by(o),a,i==="path"),c=JSON.stringify(u);return M.useEffect(()=>{l(JSON.parse(c),{replace:e,state:r,relative:i})},[l,c,i,e,r]),null}function Hr(t){bt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _2({basename:t="/",children:e=null,location:r,navigationType:i="POP",navigator:s,static:o=!1}){bt(!Ha(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=t.replace(/^\/*/,"/"),l=M.useMemo(()=>({basename:a,navigator:s,static:o,future:{}}),[a,s,o]);typeof r=="string"&&(r=yo(r));let{pathname:u="/",search:c="",hash:h="",state:f=null,key:p="default"}=r,g=M.useMemo(()=>{let b=bs(u,a);return b==null?null:{location:{pathname:b,search:c,hash:h,state:f,key:p},navigationType:i}},[a,u,c,h,f,p,i]);return rr(g!=null,`<Router basename="${a}"> is not able to match the URL "${u}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:M.createElement(Vr.Provider,{value:l},M.createElement(Gu.Provider,{children:e,value:g}))}function w2({children:t,location:e}){return o2(Ag(t),e)}function Ag(t,e=[]){let r=[];return M.Children.forEach(t,(i,s)=>{if(!M.isValidElement(i))return;let o=[...e,s];if(i.type===M.Fragment){r.push.apply(r,Ag(i.props.children,o));return}bt(i.type===Hr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),bt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||o.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Ag(i.props.children,o)),r.push(a)}),r}var Ad="get",Pd="application/x-www-form-urlencoded";function gf(t){return t!=null&&typeof t.tagName=="string"}function b2(t){return gf(t)&&t.tagName.toLowerCase()==="button"}function x2(t){return gf(t)&&t.tagName.toLowerCase()==="form"}function E2(t){return gf(t)&&t.tagName.toLowerCase()==="input"}function T2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function S2(t,e){return t.button===0&&(!e||e==="_self")&&!T2(t)}function Pg(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let i=t[r];return e.concat(Array.isArray(i)?i.map(s=>[r,s]):[[r,i]])},[]))}function I2(t,e){let r=Pg(t);return e&&e.forEach((i,s)=>{r.has(s)||e.getAll(s).forEach(o=>{r.append(s,o)})}),r}var td=null;function k2(){if(td===null)try{new FormData(document.createElement("form"),0),td=!1}catch{td=!0}return td}var C2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gp(t){return t!=null&&!C2.has(t)?(rr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Pd}"`),null):t}function A2(t,e){let r,i,s,o,a;if(x2(t)){let l=t.getAttribute("action");i=l?bs(l,e):null,r=t.getAttribute("method")||Ad,s=Gp(t.getAttribute("enctype"))||Pd,o=new FormData(t)}else if(b2(t)||E2(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||l.getAttribute("action");if(i=u?bs(u,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||Ad,s=Gp(t.getAttribute("formenctype"))||Gp(l.getAttribute("enctype"))||Pd,o=new FormData(l,t),!k2()){let{name:c,type:h,value:f}=t;if(h==="image"){let p=c?`${c}.`:"";o.append(`${p}x`,"0"),o.append(`${p}y`,"0")}else c&&o.append(c,f)}}else{if(gf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Ad,i=null,s=Pd,a=t}return o&&s==="text/plain"&&(a=o,o=void 0),{action:i,method:r.toLowerCase(),encType:s,formData:o,body:a}}function Iy(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function P2(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function R2(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function N2(t,e,r){let i=await Promise.all(t.map(async s=>{let o=e.routes[s.route.id];if(o){let a=await P2(o,r);return a.links?a.links():[]}return[]}));return O2(i.flat(1).filter(R2).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function qw(t,e,r,i,s,o){let a=(u,c)=>r[c]?u.route.id!==r[c].route.id:!0,l=(u,c)=>{var h;return r[c].pathname!==u.pathname||((h=r[c].route.path)==null?void 0:h.endsWith("*"))&&r[c].params["*"]!==u.params["*"]};return o==="assets"?e.filter((u,c)=>a(u,c)||l(u,c)):o==="data"?e.filter((u,c)=>{var f;let h=i.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(a(u,c)||l(u,c))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function D2(t,e){return M2(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function M2(t){return[...new Set(t)]}function L2(t){let e={},r=Object.keys(t).sort();for(let i of r)e[i]=t[i];return e}function O2(t,e){let r=new Set;return new Set(e),t.reduce((i,s)=>{let o=JSON.stringify(L2(s));return r.has(o)||(r.add(o),i.push({key:o,link:s})),i},[])}function j2(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function V2(){let t=M.useContext(za);return Iy(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function F2(){let t=M.useContext(mf);return Iy(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var ky=M.createContext(void 0);ky.displayName="FrameworkContext";function MI(){let t=M.useContext(ky);return Iy(t,"You must render this element inside a <HydratedRouter> element"),t}function U2(t,e){let r=M.useContext(ky),[i,s]=M.useState(!1),[o,a]=M.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:c,onMouseLeave:h,onTouchStart:f}=e,p=M.useRef(null);M.useEffect(()=>{if(t==="render"&&a(!0),t==="viewport"){let D=x=>{x.forEach(E=>{a(E.isIntersecting)})},P=new IntersectionObserver(D,{threshold:.5});return p.current&&P.observe(p.current),()=>{P.disconnect()}}},[t]),M.useEffect(()=>{if(i){let D=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(D)}}},[i]);let g=()=>{s(!0)},b=()=>{s(!1),a(!1)};return r?t!=="intent"?[o,p,{}]:[o,p,{onFocus:bl(l,g),onBlur:bl(u,b),onMouseEnter:bl(c,g),onMouseLeave:bl(h,b),onTouchStart:bl(f,g)}]:[!1,p,{}]}function bl(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function B2({page:t,...e}){let{router:r}=V2(),i=M.useMemo(()=>TI(r.routes,t,r.basename),[r.routes,t,r.basename]);return i?M.createElement(z2,{page:t,matches:i,...e}):null}function $2(t){let{manifest:e,routeModules:r}=MI(),[i,s]=M.useState([]);return M.useEffect(()=>{let o=!1;return N2(t,e,r).then(a=>{o||s(a)}),()=>{o=!0}},[t,e,r]),i}function z2({page:t,matches:e,...r}){let i=wr(),{manifest:s,routeModules:o}=MI(),{loaderData:a,matches:l}=F2(),u=M.useMemo(()=>qw(t,e,l,s,i,"data"),[t,e,l,s,i]),c=M.useMemo(()=>qw(t,e,l,s,i,"assets"),[t,e,l,s,i]),h=M.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let g=new Set,b=!1;if(e.forEach(P=>{var E;let x=s.routes[P.route.id];!x||!x.hasLoader||(!u.some(_=>_.route.id===P.route.id)&&P.route.id in a&&((E=o[P.route.id])!=null&&E.shouldRevalidate)||x.hasClientLoader?b=!0:g.add(P.route.id))}),g.size===0)return[];let D=j2(t);return b&&g.size>0&&D.searchParams.set("_routes",e.filter(P=>g.has(P.route.id)).map(P=>P.route.id).join(",")),[D.pathname+D.search]},[a,i,s,u,e,t,o]),f=M.useMemo(()=>D2(c,s),[c,s]),p=$2(c);return M.createElement(M.Fragment,null,h.map(g=>M.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...r})),f.map(g=>M.createElement("link",{key:g,rel:"modulepreload",href:g,...r})),p.map(({key:g,link:b})=>M.createElement("link",{key:g,...b})))}function H2(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var LI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{LI&&(window.__reactRouterVersion="7.1.5")}catch{}function W2({basename:t,children:e,window:r}){let i=M.useRef();i.current==null&&(i.current=ND({window:r,v5Compat:!0}));let s=i.current,[o,a]=M.useState({action:s.action,location:s.location}),l=M.useCallback(u=>{M.startTransition(()=>a(u))},[a]);return M.useLayoutEffect(()=>s.listen(l),[s,l]),M.createElement(_2,{basename:t,children:e,location:o.location,navigationType:o.action,navigator:s})}var OI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gh=M.forwardRef(function({onClick:e,discover:r="render",prefetch:i="none",relative:s,reloadDocument:o,replace:a,state:l,target:u,to:c,preventScrollReset:h,viewTransition:f,...p},g){let{basename:b}=M.useContext(Vr),D=typeof c=="string"&&OI.test(c),P,x=!1;if(typeof c=="string"&&D&&(P=c,LI))try{let y=new URL(window.location.href),w=c.startsWith("//")?new URL(y.protocol+c):new URL(c),S=bs(w.pathname,b);w.origin===y.origin&&S!=null?c=S+w.search+w.hash:x=!0}catch{rr(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let E=i2(c,{relative:s}),[_,R,j]=U2(i,p),V=Y2(c,{replace:a,state:l,target:u,preventScrollReset:h,relative:s,viewTransition:f});function C(y){e&&e(y),y.defaultPrevented||V(y)}let I=M.createElement("a",{...p,...j,href:P||E,onClick:x||o?e:C,ref:H2(g,R),target:u,"data-discover":!D&&r==="render"?"true":void 0});return _&&!D?M.createElement(M.Fragment,null,I,M.createElement(B2,{page:E})):I});gh.displayName="Link";var q2=M.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:i="",end:s=!1,style:o,to:a,viewTransition:l,children:u,...c},h){let f=Ku(a,{relative:c.relative}),p=wr(),g=M.useContext(mf),{navigator:b,basename:D}=M.useContext(Vr),P=g!=null&&eM(f)&&l===!0,x=b.encodeLocation?b.encodeLocation(f).pathname:f.pathname,E=p.pathname,_=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;r||(E=E.toLowerCase(),_=_?_.toLowerCase():null,x=x.toLowerCase()),_&&D&&(_=bs(_,D)||_);const R=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let j=E===x||!s&&E.startsWith(x)&&E.charAt(R)==="/",V=_!=null&&(_===x||!s&&_.startsWith(x)&&_.charAt(x.length)==="/"),C={isActive:j,isPending:V,isTransitioning:P},I=j?e:void 0,y;typeof i=="function"?y=i(C):y=[i,j?"active":null,V?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let w=typeof o=="function"?o(C):o;return M.createElement(gh,{...c,"aria-current":I,className:y,ref:h,style:w,to:a,viewTransition:l},typeof u=="function"?u(C):u)});q2.displayName="NavLink";var G2=M.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:i,replace:s,state:o,method:a=Ad,action:l,onSubmit:u,relative:c,preventScrollReset:h,viewTransition:f,...p},g)=>{let b=J2(),D=Z2(l,{relative:c}),P=a.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&OI.test(l),E=_=>{if(u&&u(_),_.defaultPrevented)return;_.preventDefault();let R=_.nativeEvent.submitter,j=(R==null?void 0:R.getAttribute("formmethod"))||a;b(R||_.currentTarget,{fetcherKey:e,method:j,navigate:r,replace:s,state:o,relative:c,preventScrollReset:h,viewTransition:f})};return M.createElement("form",{ref:g,method:P,action:D,onSubmit:i?u:E,...p,"data-discover":!x&&t==="render"?"true":void 0})});G2.displayName="Form";function K2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jI(t){let e=M.useContext(za);return bt(e,K2(t)),e}function Y2(t,{target:e,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:a}={}){let l=Fr(),u=wr(),c=Ku(t,{relative:o});return M.useCallback(h=>{if(S2(h,e)){h.preventDefault();let f=r!==void 0?r:Tu(u)===Tu(c);l(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:a})}},[u,l,c,r,i,e,t,s,o,a])}function Cy(t){rr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=M.useRef(Pg(t)),r=M.useRef(!1),i=wr(),s=M.useMemo(()=>I2(i.search,r.current?null:e.current),[i.search]),o=Fr(),a=M.useCallback((l,u)=>{const c=Pg(typeof l=="function"?l(s):l);r.current=!0,o("?"+c,u)},[o,s]);return[s,a]}var X2=0,Q2=()=>`__${String(++X2)}__`;function J2(){let{router:t}=jI("useSubmit"),{basename:e}=M.useContext(Vr),r=m2();return M.useCallback(async(i,s={})=>{let{action:o,method:a,encType:l,formData:u,body:c}=A2(i,e);if(s.navigate===!1){let h=s.fetcherKey||Q2();await t.fetch(h,r,s.action||o,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||a,formEncType:s.encType||l,flushSync:s.flushSync})}else await t.navigate(s.action||o,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||a,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function Z2(t,{relative:e}={}){let{basename:r}=M.useContext(Vr),i=M.useContext(oi);bt(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),o={...Ku(t||".",{relative:e})},a=wr();if(t==null){o.search=a.search;let l=new URLSearchParams(o.search),u=l.getAll("index");if(u.some(h=>h==="")){l.delete("index"),u.filter(f=>f).forEach(f=>l.append("index",f));let h=l.toString();o.search=h?`?${h}`:""}}return(!t||t===".")&&s.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:bi([r,o.pathname])),Tu(o)}function eM(t,e={}){let r=M.useContext(CI);bt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=jI("useViewTransitionState"),s=Ku(t,{relative:e.relative});if(!r.isTransitioning)return!1;let o=bs(r.currentLocation.pathname,i)||r.currentLocation.pathname,a=bs(r.nextLocation.pathname,i)||r.nextLocation.pathname;return mh(s.pathname,a)!=null||mh(s.pathname,o)!=null}new TextEncoder;var Gw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=function(t){const e=[];let r=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},tM=function(t){const e=[];let r=0,i=0;for(;r<t.length;){const s=t[r++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[r++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[r++],a=t[r++],l=t[r++],u=((s&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const o=t[r++],a=t[r++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|a&63)}}return e.join("")},FI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,h=o>>2,f=(o&3)<<4|l>>4;let p=(l&15)<<2|c>>6,g=c&63;u||(g=64,a||(p=64)),i.push(r[h],r[f],r[p],r[g])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(VI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):tM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,o==null||l==null||c==null||f==null)throw new nM;const p=o<<2|l>>4;if(i.push(p),c!==64){const g=l<<4&240|c>>2;if(i.push(g),f!==64){const b=c<<6&192|f;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class nM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const rM=function(t){const e=VI(t);return FI.encodeByteArray(e,!0)},vh=function(t){return rM(t).replace(/\./g,"")},UI=function(t){try{return FI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=()=>iM().__FIREBASE_DEFAULTS__,oM=()=>{if(typeof process>"u"||typeof Gw>"u")return;const t=Gw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},aM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&UI(t[1]);return e&&JSON.parse(e)},vf=()=>{try{return sM()||oM()||aM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},BI=t=>{var e,r;return(r=(e=vf())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},lM=t=>{const e=BI(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),i]:[e.substring(0,r),i]},$I=()=>{var t;return(t=vf())===null||t===void 0?void 0:t.config},zI=t=>{var e;return(e=vf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,i)=>{r?this.reject(r):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[vh(JSON.stringify(r)),vh(JSON.stringify(a)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function dM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tn())}function hM(){var t;const e=(t=vf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function fM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function pM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gM(){const t=Tn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vM(){return!hM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yM(){try{return typeof indexedDB=="object"}catch{return!1}}function _M(){return new Promise((t,e)=>{try{let r=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wM="FirebaseError";class Mi extends Error{constructor(e,r,i){super(r),this.code=e,this.customData=i,this.name=wM,Object.setPrototypeOf(this,Mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yu.prototype.create)}}class Yu{constructor(e,r,i){this.service=e,this.serviceName=r,this.errors=i}create(e,...r){const i=r[0]||{},s=`${this.service}/${e}`,o=this.errors[e],a=o?bM(o,i):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Mi(s,l,i)}}function bM(t,e){return t.replace(xM,(r,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const xM=/\{\$([^}]+)}/g;function EM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function yh(t,e){if(t===e)return!0;const r=Object.keys(t),i=Object.keys(e);for(const s of r){if(!i.includes(s))return!1;const o=t[s],a=e[s];if(Kw(o)&&Kw(a)){if(!yh(o,a))return!1}else if(o!==a)return!1}for(const s of i)if(!r.includes(s))return!1;return!0}function Kw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(t){const e=[];for(const[r,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ol(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function jl(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function TM(t,e){const r=new SM(t,e);return r.subscribe.bind(r)}class SM{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,i){let s;if(e===void 0&&r===void 0&&i===void 0)throw new Error("Missing Observer.");IM(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:i},s.next===void 0&&(s.next=Kp),s.error===void 0&&(s.error=Kp),s.complete===void 0&&(s.complete=Kp);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function IM(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Kp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(t){return t&&t._delegate?t._delegate:t}class lo{constructor(e,r,i){this.name=e,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kM=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const i=new uM;if(this.instancesDeferred.set(r,i),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AM(e))try{this.getOrInitializeService({instanceIdentifier:qs})}catch{}for(const[r,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qs){return this.instances.has(e)}getOptions(e=qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:r});for(const[o,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);i===l&&a.resolve(s)}return s}onInit(e,r){var i;const s=this.normalizeInstanceIdentifier(r),o=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(s,o);const a=this.instances.get(s);return a&&e(a,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,r){const i=this.onInitCallbacks.get(r);if(i)for(const s of i)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:CM(e),options:r}),this.instances.set(e,i),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=qs){return this.component?this.component.multipleInstances?e:qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function CM(t){return t===qs?void 0:t}function AM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new kM(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var We;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(We||(We={}));const RM={debug:We.DEBUG,verbose:We.VERBOSE,info:We.INFO,warn:We.WARN,error:We.ERROR,silent:We.SILENT},NM=We.INFO,DM={[We.DEBUG]:"log",[We.VERBOSE]:"log",[We.INFO]:"info",[We.WARN]:"warn",[We.ERROR]:"error"},MM=(t,e,...r)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=DM[e];if(s)console[s](`[${i}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ay{constructor(e){this.name=e,this._logLevel=NM,this._logHandler=MM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in We))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,We.DEBUG,...e),this._logHandler(this,We.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,We.VERBOSE,...e),this._logHandler(this,We.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,We.INFO,...e),this._logHandler(this,We.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,We.WARN,...e),this._logHandler(this,We.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,We.ERROR,...e),this._logHandler(this,We.ERROR,...e)}}const LM=(t,e)=>e.some(r=>t instanceof r);let Yw,Xw;function OM(){return Yw||(Yw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function jM(){return Xw||(Xw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HI=new WeakMap,Rg=new WeakMap,WI=new WeakMap,Yp=new WeakMap,Py=new WeakMap;function VM(t){const e=new Promise((r,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{r(cs(t.result)),s()},a=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&HI.set(r,t)}).catch(()=>{}),Py.set(e,t),e}function FM(t){if(Rg.has(t))return;const e=new Promise((r,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{r(),s()},a=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});Rg.set(t,e)}let Ng={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Rg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||WI.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return cs(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UM(t){Ng=t(Ng)}function BM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const i=t.call(Xp(this),e,...r);return WI.set(i,e.sort?e.sort():[e]),cs(i)}:jM().includes(t)?function(...e){return t.apply(Xp(this),e),cs(HI.get(this))}:function(...e){return cs(t.apply(Xp(this),e))}}function $M(t){return typeof t=="function"?BM(t):(t instanceof IDBTransaction&&FM(t),LM(t,OM())?new Proxy(t,Ng):t)}function cs(t){if(t instanceof IDBRequest)return VM(t);if(Yp.has(t))return Yp.get(t);const e=$M(t);return e!==t&&(Yp.set(t,e),Py.set(e,t)),e}const Xp=t=>Py.get(t);function zM(t,e,{blocked:r,upgrade:i,blocking:s,terminated:o}={}){const a=indexedDB.open(t,e),l=cs(a);return i&&a.addEventListener("upgradeneeded",u=>{i(cs(a.result),u.oldVersion,u.newVersion,cs(a.transaction),u)}),r&&a.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{o&&u.addEventListener("close",()=>o()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const HM=["get","getKey","getAll","getAllKeys","count"],WM=["put","add","delete","clear"],Qp=new Map;function Qw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qp.get(e))return Qp.get(e);const r=e.replace(/FromIndex$/,""),i=e!==r,s=WM.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(s||HM.includes(r)))return;const o=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let c=u.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[r](...l),s&&u.done]))[0]};return Qp.set(e,o),o}UM(t=>({...t,get:(e,r,i)=>Qw(e,r)||t.get(e,r,i),has:(e,r)=>!!Qw(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(GM(r)){const i=r.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(r=>r).join(" ")}}function GM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Dg="@firebase/app",Jw="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ki=new Ay("@firebase/app"),KM="@firebase/app-compat",YM="@firebase/analytics-compat",XM="@firebase/analytics",QM="@firebase/app-check-compat",JM="@firebase/app-check",ZM="@firebase/auth",eL="@firebase/auth-compat",tL="@firebase/database",nL="@firebase/data-connect",rL="@firebase/database-compat",iL="@firebase/functions",sL="@firebase/functions-compat",oL="@firebase/installations",aL="@firebase/installations-compat",lL="@firebase/messaging",uL="@firebase/messaging-compat",cL="@firebase/performance",dL="@firebase/performance-compat",hL="@firebase/remote-config",fL="@firebase/remote-config-compat",pL="@firebase/storage",mL="@firebase/storage-compat",gL="@firebase/firestore",vL="@firebase/vertexai",yL="@firebase/firestore-compat",_L="firebase",wL="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="[DEFAULT]",bL={[Dg]:"fire-core",[KM]:"fire-core-compat",[XM]:"fire-analytics",[YM]:"fire-analytics-compat",[JM]:"fire-app-check",[QM]:"fire-app-check-compat",[ZM]:"fire-auth",[eL]:"fire-auth-compat",[tL]:"fire-rtdb",[nL]:"fire-data-connect",[rL]:"fire-rtdb-compat",[iL]:"fire-fn",[sL]:"fire-fn-compat",[oL]:"fire-iid",[aL]:"fire-iid-compat",[lL]:"fire-fcm",[uL]:"fire-fcm-compat",[cL]:"fire-perf",[dL]:"fire-perf-compat",[hL]:"fire-rc",[fL]:"fire-rc-compat",[pL]:"fire-gcs",[mL]:"fire-gcs-compat",[gL]:"fire-fst",[yL]:"fire-fst-compat",[vL]:"fire-vertex","fire-js":"fire-js",[_L]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new Map,xL=new Map,Lg=new Map;function Zw(t,e){try{t.container.addComponent(e)}catch(r){ki.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function xa(t){const e=t.name;if(Lg.has(e))return ki.debug(`There were multiple attempts to register component ${e}.`),!1;Lg.set(e,t);for(const r of _h.values())Zw(r,t);for(const r of xL.values())Zw(r,t);return!0}function Ry(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Nr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ds=new Yu("app","Firebase",EL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TL{constructor(e,r,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new lo("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ds.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=wL;function qI(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Mg,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw ds.create("bad-app-name",{appName:String(s)});if(r||(r=$I()),!r)throw ds.create("no-options");const o=_h.get(s);if(o){if(yh(r,o.options)&&yh(i,o.config))return o;throw ds.create("duplicate-app",{appName:s})}const a=new PM(s);for(const u of Lg.values())a.addComponent(u);const l=new TL(r,i,a);return _h.set(s,l),l}function GI(t=Mg){const e=_h.get(t);if(!e&&t===Mg&&$I())return qI();if(!e)throw ds.create("no-app",{appName:t});return e}function hs(t,e,r){var i;let s=(i=bL[t])!==null&&i!==void 0?i:t;r&&(s+=`-${r}`);const o=s.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const l=[`Unable to register library "${s}" with version "${e}":`];o&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ki.warn(l.join(" "));return}xa(new lo(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SL="firebase-heartbeat-database",IL=1,Su="firebase-heartbeat-store";let Jp=null;function KI(){return Jp||(Jp=zM(SL,IL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Su)}catch(r){console.warn(r)}}}}).catch(t=>{throw ds.create("idb-open",{originalErrorMessage:t.message})})),Jp}async function kL(t){try{const r=(await KI()).transaction(Su),i=await r.objectStore(Su).get(YI(t));return await r.done,i}catch(e){if(e instanceof Mi)ki.warn(e.message);else{const r=ds.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ki.warn(r.message)}}}async function eb(t,e){try{const i=(await KI()).transaction(Su,"readwrite");await i.objectStore(Su).put(e,YI(t)),await i.done}catch(r){if(r instanceof Mi)ki.warn(r.message);else{const i=ds.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});ki.warn(i.message)}}}function YI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL=1024,AL=30;class PL{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new NL(r),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=tb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>AL){const a=DL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){ki.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=tb(),{heartbeatsToSend:i,unsentEntries:s}=RL(this._heartbeatsCache.heartbeats),o=vh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(r){return ki.warn(r),""}}}function tb(){return new Date().toISOString().substring(0,10)}function RL(t,e=CL){const r=[];let i=t.slice();for(const s of t){const o=r.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),nb(r)>e){o.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),nb(r)>e){r.pop();break}i=i.slice(1)}return{heartbeatsToSend:r,unsentEntries:i}}class NL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yM()?_M().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await kL(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return eb(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return eb(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function nb(t){return vh(JSON.stringify({version:2,heartbeats:t})).length}function DL(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let i=1;i<t.length;i++)t[i].date<r&&(r=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(t){xa(new lo("platform-logger",e=>new qM(e),"PRIVATE")),xa(new lo("heartbeat",e=>new PL(e),"PRIVATE")),hs(Dg,Jw,t),hs(Dg,Jw,"esm2017"),hs("fire-js","")}ML("");function Ny(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r}function XI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const LL=XI,QI=new Yu("auth","Firebase",XI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=new Ay("@firebase/auth");function OL(t,...e){wh.logLevel<=We.WARN&&wh.warn(`Auth (${Wa}): ${t}`,...e)}function Rd(t,...e){wh.logLevel<=We.ERROR&&wh.error(`Auth (${Wa}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(t,...e){throw Dy(t,...e)}function Qr(t,...e){return Dy(t,...e)}function JI(t,e,r){const i=Object.assign(Object.assign({},LL()),{[e]:r});return new Yu("auth","Firebase",i).create(e,{appName:t.name})}function fs(t){return JI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dy(t,...e){if(typeof t!="string"){const r=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(r,...i)}return QI.create(t,...e)}function Ce(t,e,...r){if(!t)throw Dy(e,...r)}function vi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Rd(e),new Error(e)}function Ci(t,e){t||vi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function jL(){return rb()==="http:"||rb()==="https:"}function rb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(jL()||pM()||"connection"in navigator)?navigator.onLine:!0}function FL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,r){this.shortDelay=e,this.longDelay=r,Ci(r>e,"Short delay should be less than long delay!"),this.isMobile=dM()||mM()}get(){return VL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(t,e){Ci(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{static initialize(e,r,i){this.fetchImpl=e,r&&(this.headersImpl=r),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;vi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;vi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;vi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BL=new Qu(3e4,6e4);function _o(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ns(t,e,r,i,s={}){return e1(t,s,async()=>{let o={},a={};i&&(e==="GET"?a=i:o={body:JSON.stringify(i)});const l=Xu(Object.assign({key:t.config.apiKey},a)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},o);return fM()||(c.referrerPolicy="no-referrer"),ZI.fetch()(t1(t,t.config.apiHost,r,l),c)})}async function e1(t,e,r){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},UL),e);try{const s=new zL(t),o=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw nd(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const l=o.ok?a.errorMessage:a.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw nd(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw nd(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw nd(t,"user-disabled",a);const h=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw JI(t,h,c);jr(t,h)}}catch(s){if(s instanceof Mi)throw s;jr(t,"network-request-failed",{message:String(s)})}}async function yf(t,e,r,i,s={}){const o=await Ns(t,e,r,i,s);return"mfaPendingCredential"in o&&jr(t,"multi-factor-auth-required",{_serverResponse:o}),o}function t1(t,e,r,i){const s=`${e}${r}?${i}`;return t.config.emulator?My(t.config,s):`${t.config.apiScheme}://${s}`}function $L(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class zL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,i)=>{this.timer=setTimeout(()=>i(Qr(this.auth,"network-request-failed")),BL.get())})}}function nd(t,e,r){const i={appName:t.name};r.email&&(i.email=r.email),r.phoneNumber&&(i.phoneNumber=r.phoneNumber);const s=Qr(t,e,i);return s.customData._tokenResponse=r,s}function ib(t){return t!==void 0&&t.enterprise!==void 0}class HL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return $L(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function WL(t,e){return Ns(t,"GET","/v2/recaptchaConfig",_o(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qL(t,e){return Ns(t,"POST","/v1/accounts:delete",e)}async function n1(t,e){return Ns(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function GL(t,e=!1){const r=cn(t),i=await r.getIdToken(e),s=Ly(i);Ce(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:Zl(Zp(s.auth_time)),issuedAtTime:Zl(Zp(s.iat)),expirationTime:Zl(Zp(s.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Zp(t){return Number(t)*1e3}function Ly(t){const[e,r,i]=t.split(".");if(e===void 0||r===void 0||i===void 0)return Rd("JWT malformed, contained fewer than 3 sections"),null;try{const s=UI(r);return s?JSON.parse(s):(Rd("Failed to decode base64 JWT payload"),null)}catch(s){return Rd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function sb(t){const e=Ly(t);return Ce(e,"internal-error"),Ce(typeof e.exp<"u","internal-error"),Ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iu(t,e,r=!1){if(r)return e;try{return await e}catch(i){throw i instanceof Mi&&KL(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function KL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Zl(this.lastLoginAt),this.creationTime=Zl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bh(t){var e;const r=t.auth,i=await t.getIdToken(),s=await Iu(t,n1(r,{idToken:i}));Ce(s==null?void 0:s.users.length,r,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?r1(o.providerUserInfo):[],l=QL(t.providerData,a),u=t.isAnonymous,c=!(t.email&&o.passwordHash)&&!(l!=null&&l.length),h=u?c:!1,f={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new jg(o.createdAt,o.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function XL(t){const e=cn(t);await bh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function QL(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function r1(t){return t.map(e=>{var{providerId:r}=e,i=Ny(e,["providerId"]);return{providerId:r,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JL(t,e){const r=await e1(t,{},async()=>{const i=Xu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,a=t1(t,s,"/v1/token",`key=${o}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",ZI.fetch()(a,{method:"POST",headers:l,body:i})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function ZL(t,e){return Ns(t,"POST","/v2/accounts:revokeToken",_o(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ce(e.idToken,"internal-error"),Ce(typeof e.idToken<"u","internal-error"),Ce(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Ce(e.length!==0,"internal-error");const r=sb(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:i,refreshToken:s,expiresIn:o}=await JL(e,r);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,r,i){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,r){const{refreshToken:i,accessToken:s,expirationTime:o}=r,a=new ua;return i&&(Ce(typeof i=="string","internal-error",{appName:e}),a.refreshToken=i),s&&(Ce(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),o&&(Ce(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ua,this.toJSON())}_performRefresh(){return vi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(t,e){Ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class yi{constructor(e){var{uid:r,auth:i,stsTokenManager:s}=e,o=Ny(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new YL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new jg(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const r=await Iu(this,this.stsTokenManager.getToken(this.auth,e));return Ce(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return GL(this,e)}reload(){return XL(this)}_assign(e){this!==e&&(Ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new yi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),r&&await bh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Nr(this.auth.app))return Promise.reject(fs(this.auth));const e=await this.getIdToken();return await Iu(this,qL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var i,s,o,a,l,u,c,h;const f=(i=r.displayName)!==null&&i!==void 0?i:void 0,p=(s=r.email)!==null&&s!==void 0?s:void 0,g=(o=r.phoneNumber)!==null&&o!==void 0?o:void 0,b=(a=r.photoURL)!==null&&a!==void 0?a:void 0,D=(l=r.tenantId)!==null&&l!==void 0?l:void 0,P=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,x=(c=r.createdAt)!==null&&c!==void 0?c:void 0,E=(h=r.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:_,emailVerified:R,isAnonymous:j,providerData:V,stsTokenManager:C}=r;Ce(_&&C,e,"internal-error");const I=ua.fromJSON(this.name,C);Ce(typeof _=="string",e,"internal-error"),$i(f,e.name),$i(p,e.name),Ce(typeof R=="boolean",e,"internal-error"),Ce(typeof j=="boolean",e,"internal-error"),$i(g,e.name),$i(b,e.name),$i(D,e.name),$i(P,e.name),$i(x,e.name),$i(E,e.name);const y=new yi({uid:_,auth:e,email:p,emailVerified:R,displayName:f,isAnonymous:j,photoURL:b,phoneNumber:g,tenantId:D,stsTokenManager:I,createdAt:x,lastLoginAt:E});return V&&Array.isArray(V)&&(y.providerData=V.map(w=>Object.assign({},w))),P&&(y._redirectEventId=P),y}static async _fromIdTokenResponse(e,r,i=!1){const s=new ua;s.updateFromServerResponse(r);const o=new yi({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await bh(o),o}static async _fromGetAccountInfoResponse(e,r,i){const s=r.users[0];Ce(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?r1(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),l=new ua;l.updateFromIdToken(i);const u=new yi({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new jg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob=new Map;function _i(t){Ci(t instanceof Function,"Expected a class definition");let e=ob.get(t);return e?(Ci(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ob.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}i1.type="NONE";const ab=i1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(t,e,r){return`firebase:${t}:${e}:${r}`}class ca{constructor(e,r,i){this.persistence=e,this.auth=r,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=Nd(this.userKey,s.apiKey,o),this.fullPersistenceKey=Nd("persistence",s.apiKey,o),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?yi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,i="authUser"){if(!r.length)return new ca(_i(ab),e,i);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let o=s[0]||_i(ab);const a=Nd(i,e.config.apiKey,e.name);let l=null;for(const c of r)try{const h=await c._get(a);if(h){const f=yi._fromJSON(e,h);c!==o&&(l=f),o=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new ca(o,e,i):(o=u[0],l&&await o._set(a,l.toJSON()),await Promise.all(r.map(async c=>{if(c!==o)try{await c._remove(a)}catch{}})),new ca(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(l1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(s1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(c1(e))return"Blackberry";if(d1(e))return"Webos";if(o1(e))return"Safari";if((e.includes("chrome/")||a1(e))&&!e.includes("edge/"))return"Chrome";if(u1(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(r);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function s1(t=Tn()){return/firefox\//i.test(t)}function o1(t=Tn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function a1(t=Tn()){return/crios\//i.test(t)}function l1(t=Tn()){return/iemobile/i.test(t)}function u1(t=Tn()){return/android/i.test(t)}function c1(t=Tn()){return/blackberry/i.test(t)}function d1(t=Tn()){return/webos/i.test(t)}function Oy(t=Tn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eO(t=Tn()){var e;return Oy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tO(){return gM()&&document.documentMode===10}function h1(t=Tn()){return Oy(t)||u1(t)||d1(t)||c1(t)||/windows phone/i.test(t)||l1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(t,e=[]){let r;switch(t){case"Browser":r=lb(Tn());break;case"Worker":r=`${lb(Tn())}-${t}`;break;default:r=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Wa}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const i=o=>new Promise((a,l)=>{try{const u=e(o);a(u)}catch(u){l(u)}});i.onAbort=r,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const i of this.queue)await i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rO(t,e={}){return Ns(t,"GET","/v2/passwordPolicy",_o(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO=6;class sO{constructor(e){var r,i,s,o;const a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=a.minPasswordLength)!==null&&r!==void 0?r:iO,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,i,s,o,a,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNumericCharacter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,r){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(r.meetsMinPasswordLength=e.length>=i),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,r,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e,r,i,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ub(this),this.idTokenSubscription=new ub(this),this.beforeStateQueue=new nO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=_i(r)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await ca.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await n1(this,{idToken:e}),i=await yi._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Nr(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(s=u.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(a){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await bh(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Nr(this.app))return Promise.reject(fs(this));const r=e?cn(e):null;return r&&Ce(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Nr(this.app)?Promise.reject(fs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Nr(this.app)?Promise.reject(fs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(_i(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rO(this),r=new sO(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yu("auth","Firebase",e())}onAuthStateChanged(e,r,i){return this.registerStateListener(this.authStateSubscription,e,r,i)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,i){return this.registerStateListener(this.idTokenSubscription,e,r,i)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(i.tenantId=this.tenantId),await ZL(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const i=await this.getOrInitRedirectPersistenceManager(r);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&_i(e)||this._popupRedirectResolver;Ce(r,this,"argument-error"),this.redirectPersistenceManager=await ca.create(this,[_i(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,i;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,i,s){if(this._deleted)return()=>{};const o=typeof r=="function"?r:r.next.bind(r);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ce(l,this,"internal-error"),l.then(()=>{a||o(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,i,s);return()=>{a=!0,u()}}else{const u=e.addObserver(r);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=f1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(r["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;if(Nr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&OL(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function qa(t){return cn(t)}class ub{constructor(e){this.auth=e,this.observer=null,this.addObserver=TM(r=>this.observer=r)}get next(){return Ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _f={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aO(t){_f=t}function p1(t){return _f.loadJS(t)}function lO(){return _f.recaptchaEnterpriseScript}function uO(){return _f.gapiScript}function cO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class dO{constructor(){this.enterprise=new hO}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class hO{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const fO="recaptcha-enterprise",m1="NO_RECAPTCHA";class pO{constructor(e){this.type=fO,this.auth=qa(e)}async verify(e="verify",r=!1){async function i(o){if(!r){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(a,l)=>{WL(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new HL(u);return o.tenantId==null?o._agentRecaptchaConfig=c:o._tenantRecaptchaConfigs[o.tenantId]=c,a(c.siteKey)}}).catch(u=>{l(u)})})}function s(o,a,l){const u=window.grecaptcha;ib(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(c=>{a(c)}).catch(()=>{a(m1)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new dO().execute("siteKey",{action:"verify"}):new Promise((o,a)=>{i(this.auth).then(l=>{if(!r&&ib(window.grecaptcha))s(l,o,a);else{if(typeof window>"u"){a(new Error("RecaptchaVerifier is only supported in browser"));return}let u=lO();u.length!==0&&(u+=l),p1(u).then(()=>{s(l,o,a)}).catch(c=>{a(c)})}}).catch(l=>{a(l)})})}}async function cb(t,e,r,i=!1,s=!1){const o=new pO(t);let a;if(s)a=m1;else try{a=await o.verify(r)}catch{a=await o.verify(r,!0)}const l=Object.assign({},e);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,c=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:a}):Object.assign(l,{captchaResponse:a}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function db(t,e,r,i,s){var o;if(!((o=t._getRecaptchaConfig())===null||o===void 0)&&o.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const a=await cb(t,e,r,r==="getOobCode");return i(t,a)}else return i(t,e).catch(async a=>{if(a.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await cb(t,e,r,r==="getOobCode");return i(t,l)}else return Promise.reject(a)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mO(t,e){const r=Ry(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),o=r.getOptions();if(yh(o,e??{}))return s;jr(s,"already-initialized")}return r.initialize({options:e})}function gO(t,e){const r=(e==null?void 0:e.persistence)||[],i=(Array.isArray(r)?r:[r]).map(_i);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function vO(t,e,r){const i=qa(t);Ce(i._canInitEmulator,i,"emulator-config-failed"),Ce(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=g1(e),{host:a,port:l}=yO(e),u=l===null?"":`:${l}`;i.config.emulator={url:`${o}//${a}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})}),_O()}function g1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yO(t){const e=g1(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const i=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:hb(i.substr(o.length+1))}}else{const[o,a]=i.split(":");return{host:o,port:hb(a)}}}function hb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function _O(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return vi("not implemented")}_getIdTokenResponse(e){return vi("not implemented")}_linkToIdToken(e,r){return vi("not implemented")}_getReauthenticationResolver(e){return vi("not implemented")}}async function wO(t,e){return Ns(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bO(t,e){return yf(t,"POST","/v1/accounts:signInWithPassword",_o(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xO(t,e){return yf(t,"POST","/v1/accounts:signInWithEmailLink",_o(t,e))}async function EO(t,e){return yf(t,"POST","/v1/accounts:signInWithEmailLink",_o(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends jy{constructor(e,r,i,s=null){super("password",i),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new ku(e,r,"password")}static _fromEmailAndCode(e,r,i=null){return new ku(e,r,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return db(e,r,"signInWithPassword",bO);case"emailLink":return xO(e,{email:this._email,oobCode:this._password});default:jr(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const i={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return db(e,i,"signUpPassword",wO);case"emailLink":return EO(e,{idToken:r,email:this._email,oobCode:this._password});default:jr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function da(t,e){return yf(t,"POST","/v1/accounts:signInWithIdp",_o(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TO="http://localhost";class uo extends jy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new uo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):jr("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=r,o=Ny(r,["providerId","signInMethod"]);if(!i||!s)return null;const a=new uo(i,s);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return da(e,r)}_linkToIdToken(e,r){const i=this.buildRequest();return i.idToken=r,da(e,i)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,da(e,r)}buildRequest(){const e={requestUri:TO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Xu(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IO(t){const e=Ol(jl(t)).link,r=e?Ol(jl(e)).deep_link_id:null,i=Ol(jl(t)).deep_link_id;return(i?Ol(jl(i)).link:null)||i||r||e||t}class Vy{constructor(e){var r,i,s,o,a,l;const u=Ol(jl(e)),c=(r=u.apiKey)!==null&&r!==void 0?r:null,h=(i=u.oobCode)!==null&&i!==void 0?i:null,f=SO((s=u.mode)!==null&&s!==void 0?s:null);Ce(c&&h&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=h,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(a=u.languageCode)!==null&&a!==void 0?a:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=IO(e);try{return new Vy(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.providerId=Ga.PROVIDER_ID}static credential(e,r){return ku._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const i=Vy.parseLink(r);return Ce(i,"argument-error"),ku._fromEmailAndCode(e,i.code,i.tenantId)}}Ga.PROVIDER_ID="password";Ga.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ga.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends v1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi extends Ju{constructor(){super("facebook.com")}static credential(e){return uo._fromParams({providerId:Yi.PROVIDER_ID,signInMethod:Yi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yi.credentialFromTaggedObject(e)}static credentialFromError(e){return Yi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yi.credential(e.oauthAccessToken)}catch{return null}}}Yi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi extends Ju{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return uo._fromParams({providerId:Xi.PROVIDER_ID,signInMethod:Xi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Xi.credentialFromTaggedObject(e)}static credentialFromError(e){return Xi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:i}=e;if(!r&&!i)return null;try{return Xi.credential(r,i)}catch{return null}}}Xi.GOOGLE_SIGN_IN_METHOD="google.com";Xi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends Ju{constructor(){super("github.com")}static credential(e){return uo._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qi.credential(e.oauthAccessToken)}catch{return null}}}Qi.GITHUB_SIGN_IN_METHOD="github.com";Qi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji extends Ju{constructor(){super("twitter.com")}static credential(e,r){return uo._fromParams({providerId:Ji.PROVIDER_ID,signInMethod:Ji.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Ji.credentialFromTaggedObject(e)}static credentialFromError(e){return Ji.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:i}=e;if(!r||!i)return null;try{return Ji.credential(r,i)}catch{return null}}}Ji.TWITTER_SIGN_IN_METHOD="twitter.com";Ji.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,i,s=!1){const o=await yi._fromIdTokenResponse(e,i,s),a=fb(i);return new Ea({user:o,providerId:a,_tokenResponse:i,operationType:r})}static async _forOperation(e,r,i){await e._updateTokensIfNecessary(i,!0);const s=fb(i);return new Ea({user:e,providerId:s,_tokenResponse:i,operationType:r})}}function fb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh extends Mi{constructor(e,r,i,s){var o;super(r.code,r.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,xh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:r.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,r,i,s){return new xh(e,r,i,s)}}function y1(t,e,r,i){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?xh._fromErrorAndOperation(t,o,e,i):o})}async function kO(t,e,r=!1){const i=await Iu(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Ea._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CO(t,e,r=!1){const{auth:i}=t;if(Nr(i.app))return Promise.reject(fs(i));const s="reauthenticate";try{const o=await Iu(t,y1(i,s,e,t),r);Ce(o.idToken,i,"internal-error");const a=Ly(o.idToken);Ce(a,i,"internal-error");const{sub:l}=a;return Ce(t.uid===l,i,"user-mismatch"),Ea._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&jr(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _1(t,e,r=!1){if(Nr(t.app))return Promise.reject(fs(t));const i="signIn",s=await y1(t,i,e),o=await Ea._fromIdTokenResponse(t,i,s);return r||await t._updateCurrentUser(o.user),o}async function AO(t,e){return _1(qa(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PO(t){const e=qa(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function RO(t,e,r){return Nr(t.app)?Promise.reject(fs(t)):AO(cn(t),Ga.credential(e,r)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&PO(t),i})}function NO(t,e,r,i){return cn(t).onIdTokenChanged(e,r,i)}function DO(t,e,r){return cn(t).beforeAuthStateChanged(e,r)}function MO(t,e,r,i){return cn(t).onAuthStateChanged(e,r,i)}function LO(t){return cn(t).signOut()}const Eh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Eh,"1"),this.storage.removeItem(Eh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OO=1e3,jO=10;class b1 extends w1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=h1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&e(r,s,i)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const i=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);tO()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,jO):s()}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:i}),!0)})},OO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}b1.type="LOCAL";const VO=b1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1 extends w1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}x1.type="SESSION";const E1=x1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const i=new wf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(a).map(async c=>c(r.origin,o)),u=await FO(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fy(t="",e=10){let r="";for(let i=0;i<e;i++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,u)=>{const c=Fy("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},i);a={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(p.data.response);break;default:clearTimeout(h),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(){return window}function BO(t){Jr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(){return typeof Jr().WorkerGlobalScope<"u"&&typeof Jr().importScripts=="function"}async function $O(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function zO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function HO(){return T1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="firebaseLocalStorageDb",WO=1,Th="firebaseLocalStorage",I1="fbase_key";class Zu{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function bf(t,e){return t.transaction([Th],e?"readwrite":"readonly").objectStore(Th)}function qO(){const t=indexedDB.deleteDatabase(S1);return new Zu(t).toPromise()}function Vg(){const t=indexedDB.open(S1,WO);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Th,{keyPath:I1})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Th)?e(i):(i.close(),await qO(),e(await Vg()))})})}async function pb(t,e,r){const i=bf(t,!0).put({[I1]:e,value:r});return new Zu(i).toPromise()}async function GO(t,e){const r=bf(t,!1).get(e),i=await new Zu(r).toPromise();return i===void 0?null:i.value}function mb(t,e){const r=bf(t,!0).delete(e);return new Zu(r).toPromise()}const KO=800,YO=3;class k1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vg(),this.db)}async _withRetries(e){let r=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(r++>YO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return T1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wf._getInstance(HO()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await $O(),!this.activeServiceWorker)return;this.sender=new UO(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||zO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vg();return await pb(e,Eh,"1"),await mb(e,Eh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>pb(i,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(i=>GO(i,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>mb(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=bf(s,!1).getAll();return new Zu(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),KO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}k1.type="LOCAL";const XO=k1;new Qu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(t,e){return e?_i(e):(Ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy extends jy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return da(e,this._buildIdpRequest())}_linkToIdToken(e,r){return da(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return da(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function JO(t){return _1(t.auth,new Uy(t),t.bypassAuthState)}function ZO(t){const{auth:e,user:r}=t;return Ce(r,e,"internal-error"),CO(r,new Uy(t),t.bypassAuthState)}async function ej(t){const{auth:e,user:r}=t;return Ce(r,e,"internal-error"),kO(r,new Uy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,r,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:i,postBody:s,tenantId:o,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:r,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return JO;case"linkViaPopup":case"linkViaRedirect":return ej;case"reauthViaPopup":case"reauthViaRedirect":return ZO;default:jr(this.auth,"internal-error")}}resolve(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj=new Qu(2e3,1e4);class na extends C1{constructor(e,r,i,s,o){super(e,r,s,o),this.provider=i,this.authWindow=null,this.pollId=null,na.currentPopupAction&&na.currentPopupAction.cancel(),na.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ce(e,this.auth,"internal-error"),e}async onExecution(){Ci(this.filter.length===1,"Popup operations only handle one event");const e=Fy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Qr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Qr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,na.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Qr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tj.get())};e()}}na.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nj="pendingRedirect",Dd=new Map;class rj extends C1{constructor(e,r,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,i),this.eventId=null}async execute(){let e=Dd.get(this.auth._key());if(!e){try{const i=await ij(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(r){e=()=>Promise.reject(r)}Dd.set(this.auth._key(),e)}return this.bypassAuthState||Dd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function ij(t,e){const r=aj(e),i=oj(t);if(!await i._isAvailable())return!1;const s=await i._get(r)==="true";return await i._remove(r),s}function sj(t,e){Dd.set(t._key(),e)}function oj(t){return _i(t._redirectPersistence)}function aj(t){return Nd(nj,t.config.apiKey,t.name)}async function lj(t,e,r=!1){if(Nr(t.app))return Promise.reject(fs(t));const i=qa(t),s=QO(i,e),a=await new rj(i,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await i._persistUserIfCurrent(a.user),await i._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uj=10*60*1e3;class cj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(r=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!dj(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var i;if(e.error&&!A1(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";r.onError(Qr(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const i=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uj&&this.cachedEventUids.clear(),this.cachedEventUids.has(gb(e))}saveEventToCache(e){this.cachedEventUids.add(gb(e)),this.lastProcessedEventTime=Date.now()}}function gb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function A1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function dj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return A1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hj(t,e={}){return Ns(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pj=/^https?/;async function mj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await hj(t);for(const r of e)try{if(gj(r))return}catch{}jr(t,"unauthorized-domain")}function gj(t){const e=Og(),{protocol:r,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&i===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===i}if(!pj.test(r))return!1;if(fj.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj=new Qu(3e4,6e4);function vb(){const t=Jr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function yj(t){return new Promise((e,r)=>{var i,s,o;function a(){vb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vb(),r(Qr(t,"network-request-failed"))},timeout:vj.get()})}if(!((s=(i=Jr().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Jr().gapi)===null||o===void 0)&&o.load)a();else{const l=cO("iframefcb");return Jr()[l]=()=>{gapi.load?a():r(Qr(t,"network-request-failed"))},p1(`${uO()}?onload=${l}`).catch(u=>r(u))}}).catch(e=>{throw Md=null,e})}let Md=null;function _j(t){return Md=Md||yj(t),Md}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj=new Qu(5e3,15e3),bj="__/auth/iframe",xj="emulator/auth/iframe",Ej={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Sj(t){const e=t.config;Ce(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?My(e,xj):`https://${t.config.authDomain}/${bj}`,i={apiKey:e.apiKey,appName:t.name,v:Wa},s=Tj.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${r}?${Xu(i).slice(1)}`}async function Ij(t){const e=await _j(t),r=Jr().gapi;return Ce(r,t,"internal-error"),e.open({where:document.body,url:Sj(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ej,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const a=Qr(t,"network-request-failed"),l=Jr().setTimeout(()=>{o(a)},wj.get());function u(){Jr().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Cj=500,Aj=600,Pj="_blank",Rj="http://localhost";class yb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Nj(t,e,r,i=Cj,s=Aj){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u=Object.assign(Object.assign({},kj),{width:i.toString(),height:s.toString(),top:o,left:a}),c=Tn().toLowerCase();r&&(l=a1(c)?Pj:r),s1(c)&&(e=e||Rj,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[g,b])=>`${p}${g}=${b},`,"");if(eO(c)&&l!=="_self")return Dj(e||"",l),new yb(null);const f=window.open(e||"",l,h);Ce(f,t,"popup-blocked");try{f.focus()}catch{}return new yb(f)}function Dj(t,e){const r=document.createElement("a");r.href=t,r.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj="__/auth/handler",Lj="emulator/auth/handler",Oj=encodeURIComponent("fac");async function _b(t,e,r,i,s,o){Ce(t.config.authDomain,t,"auth-domain-config-required"),Ce(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:Wa,eventId:s};if(e instanceof v1){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",EM(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))a[h]=f}if(e instanceof Ju){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),c=u?`#${Oj}=${encodeURIComponent(u)}`:"";return`${jj(t)}?${Xu(l).slice(1)}${c}`}function jj({config:t}){return t.emulator?My(t,Lj):`https://${t.authDomain}/${Mj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="webStorageSupport";class Vj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=E1,this._completeRedirectFn=lj,this._overrideRedirectResult=sj}async _openPopup(e,r,i,s){var o;Ci((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const a=await _b(e,r,i,Og(),s);return Nj(e,a,Fy())}async _openRedirect(e,r,i,s){await this._originValidation(e);const o=await _b(e,r,i,Og(),s);return BO(o),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:o}=this.eventManagers[r];return s?Promise.resolve(s):(Ci(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[r]={promise:i},i.catch(()=>{delete this.eventManagers[r]}),i}async initAndGetManager(e){const r=await Ij(e),i=new cj(e);return r.register("authEvent",s=>(Ce(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=r,i}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(em,{type:em},s=>{var o;const a=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[em];a!==void 0&&r(!!a),jr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=mj(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return h1()||o1()||Oy()}}const Fj=Vj;var wb="@firebase/auth",bb="1.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $j(t){xa(new lo("auth",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=i.options;Ce(a&&!a.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:f1(t)},c=new oO(i,s,o,u);return gO(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,i)=>{e.getProvider("auth-internal").initialize()})),xa(new lo("auth-internal",e=>{const r=qa(e.getProvider("auth").getImmediate());return(i=>new Uj(i))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),hs(wb,bb,Bj(t)),hs(wb,bb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zj=5*60,Hj=zI("authIdTokenMaxAge")||zj;let xb=null;const Wj=t=>async e=>{const r=e&&await e.getIdTokenResult(),i=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>Hj)return;const s=r==null?void 0:r.token;xb!==s&&(xb=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function qj(t=GI()){const e=Ry(t,"auth");if(e.isInitialized())return e.getImmediate();const r=mO(t,{popupRedirectResolver:Fj,persistence:[XO,VO,E1]}),i=zI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const a=Wj(o.toString());DO(r,a,()=>a(r.currentUser)),NO(r,l=>a(l))}}const s=BI("auth");return s&&vO(r,`http://${s}`),r}function Gj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}aO({loadJS(t){return new Promise((e,r)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=Qr("internal-error");o.customData=s,r(o)},i.type="text/javascript",i.charset="UTF-8",Gj().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$j("Browser");var Kj="firebase",Yj="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hs(Kj,Yj,"app");var Eb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ps,P1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,I){function y(){}y.prototype=I.prototype,C.D=I.prototype,C.prototype=new y,C.prototype.constructor=C,C.C=function(w,S,L){for(var N=Array(arguments.length-2),Y=2;Y<arguments.length;Y++)N[Y-2]=arguments[Y];return I.prototype[S].apply(w,N)}}function r(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,r),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,I,y){y||(y=0);var w=Array(16);if(typeof I=="string")for(var S=0;16>S;++S)w[S]=I.charCodeAt(y++)|I.charCodeAt(y++)<<8|I.charCodeAt(y++)<<16|I.charCodeAt(y++)<<24;else for(S=0;16>S;++S)w[S]=I[y++]|I[y++]<<8|I[y++]<<16|I[y++]<<24;I=C.g[0],y=C.g[1],S=C.g[2];var L=C.g[3],N=I+(L^y&(S^L))+w[0]+3614090360&4294967295;I=y+(N<<7&4294967295|N>>>25),N=L+(S^I&(y^S))+w[1]+3905402710&4294967295,L=I+(N<<12&4294967295|N>>>20),N=S+(y^L&(I^y))+w[2]+606105819&4294967295,S=L+(N<<17&4294967295|N>>>15),N=y+(I^S&(L^I))+w[3]+3250441966&4294967295,y=S+(N<<22&4294967295|N>>>10),N=I+(L^y&(S^L))+w[4]+4118548399&4294967295,I=y+(N<<7&4294967295|N>>>25),N=L+(S^I&(y^S))+w[5]+1200080426&4294967295,L=I+(N<<12&4294967295|N>>>20),N=S+(y^L&(I^y))+w[6]+2821735955&4294967295,S=L+(N<<17&4294967295|N>>>15),N=y+(I^S&(L^I))+w[7]+4249261313&4294967295,y=S+(N<<22&4294967295|N>>>10),N=I+(L^y&(S^L))+w[8]+1770035416&4294967295,I=y+(N<<7&4294967295|N>>>25),N=L+(S^I&(y^S))+w[9]+2336552879&4294967295,L=I+(N<<12&4294967295|N>>>20),N=S+(y^L&(I^y))+w[10]+4294925233&4294967295,S=L+(N<<17&4294967295|N>>>15),N=y+(I^S&(L^I))+w[11]+2304563134&4294967295,y=S+(N<<22&4294967295|N>>>10),N=I+(L^y&(S^L))+w[12]+1804603682&4294967295,I=y+(N<<7&4294967295|N>>>25),N=L+(S^I&(y^S))+w[13]+4254626195&4294967295,L=I+(N<<12&4294967295|N>>>20),N=S+(y^L&(I^y))+w[14]+2792965006&4294967295,S=L+(N<<17&4294967295|N>>>15),N=y+(I^S&(L^I))+w[15]+1236535329&4294967295,y=S+(N<<22&4294967295|N>>>10),N=I+(S^L&(y^S))+w[1]+4129170786&4294967295,I=y+(N<<5&4294967295|N>>>27),N=L+(y^S&(I^y))+w[6]+3225465664&4294967295,L=I+(N<<9&4294967295|N>>>23),N=S+(I^y&(L^I))+w[11]+643717713&4294967295,S=L+(N<<14&4294967295|N>>>18),N=y+(L^I&(S^L))+w[0]+3921069994&4294967295,y=S+(N<<20&4294967295|N>>>12),N=I+(S^L&(y^S))+w[5]+3593408605&4294967295,I=y+(N<<5&4294967295|N>>>27),N=L+(y^S&(I^y))+w[10]+38016083&4294967295,L=I+(N<<9&4294967295|N>>>23),N=S+(I^y&(L^I))+w[15]+3634488961&4294967295,S=L+(N<<14&4294967295|N>>>18),N=y+(L^I&(S^L))+w[4]+3889429448&4294967295,y=S+(N<<20&4294967295|N>>>12),N=I+(S^L&(y^S))+w[9]+568446438&4294967295,I=y+(N<<5&4294967295|N>>>27),N=L+(y^S&(I^y))+w[14]+3275163606&4294967295,L=I+(N<<9&4294967295|N>>>23),N=S+(I^y&(L^I))+w[3]+4107603335&4294967295,S=L+(N<<14&4294967295|N>>>18),N=y+(L^I&(S^L))+w[8]+1163531501&4294967295,y=S+(N<<20&4294967295|N>>>12),N=I+(S^L&(y^S))+w[13]+2850285829&4294967295,I=y+(N<<5&4294967295|N>>>27),N=L+(y^S&(I^y))+w[2]+4243563512&4294967295,L=I+(N<<9&4294967295|N>>>23),N=S+(I^y&(L^I))+w[7]+1735328473&4294967295,S=L+(N<<14&4294967295|N>>>18),N=y+(L^I&(S^L))+w[12]+2368359562&4294967295,y=S+(N<<20&4294967295|N>>>12),N=I+(y^S^L)+w[5]+4294588738&4294967295,I=y+(N<<4&4294967295|N>>>28),N=L+(I^y^S)+w[8]+2272392833&4294967295,L=I+(N<<11&4294967295|N>>>21),N=S+(L^I^y)+w[11]+1839030562&4294967295,S=L+(N<<16&4294967295|N>>>16),N=y+(S^L^I)+w[14]+4259657740&4294967295,y=S+(N<<23&4294967295|N>>>9),N=I+(y^S^L)+w[1]+2763975236&4294967295,I=y+(N<<4&4294967295|N>>>28),N=L+(I^y^S)+w[4]+1272893353&4294967295,L=I+(N<<11&4294967295|N>>>21),N=S+(L^I^y)+w[7]+4139469664&4294967295,S=L+(N<<16&4294967295|N>>>16),N=y+(S^L^I)+w[10]+3200236656&4294967295,y=S+(N<<23&4294967295|N>>>9),N=I+(y^S^L)+w[13]+681279174&4294967295,I=y+(N<<4&4294967295|N>>>28),N=L+(I^y^S)+w[0]+3936430074&4294967295,L=I+(N<<11&4294967295|N>>>21),N=S+(L^I^y)+w[3]+3572445317&4294967295,S=L+(N<<16&4294967295|N>>>16),N=y+(S^L^I)+w[6]+76029189&4294967295,y=S+(N<<23&4294967295|N>>>9),N=I+(y^S^L)+w[9]+3654602809&4294967295,I=y+(N<<4&4294967295|N>>>28),N=L+(I^y^S)+w[12]+3873151461&4294967295,L=I+(N<<11&4294967295|N>>>21),N=S+(L^I^y)+w[15]+530742520&4294967295,S=L+(N<<16&4294967295|N>>>16),N=y+(S^L^I)+w[2]+3299628645&4294967295,y=S+(N<<23&4294967295|N>>>9),N=I+(S^(y|~L))+w[0]+4096336452&4294967295,I=y+(N<<6&4294967295|N>>>26),N=L+(y^(I|~S))+w[7]+1126891415&4294967295,L=I+(N<<10&4294967295|N>>>22),N=S+(I^(L|~y))+w[14]+2878612391&4294967295,S=L+(N<<15&4294967295|N>>>17),N=y+(L^(S|~I))+w[5]+4237533241&4294967295,y=S+(N<<21&4294967295|N>>>11),N=I+(S^(y|~L))+w[12]+1700485571&4294967295,I=y+(N<<6&4294967295|N>>>26),N=L+(y^(I|~S))+w[3]+2399980690&4294967295,L=I+(N<<10&4294967295|N>>>22),N=S+(I^(L|~y))+w[10]+4293915773&4294967295,S=L+(N<<15&4294967295|N>>>17),N=y+(L^(S|~I))+w[1]+2240044497&4294967295,y=S+(N<<21&4294967295|N>>>11),N=I+(S^(y|~L))+w[8]+1873313359&4294967295,I=y+(N<<6&4294967295|N>>>26),N=L+(y^(I|~S))+w[15]+4264355552&4294967295,L=I+(N<<10&4294967295|N>>>22),N=S+(I^(L|~y))+w[6]+2734768916&4294967295,S=L+(N<<15&4294967295|N>>>17),N=y+(L^(S|~I))+w[13]+1309151649&4294967295,y=S+(N<<21&4294967295|N>>>11),N=I+(S^(y|~L))+w[4]+4149444226&4294967295,I=y+(N<<6&4294967295|N>>>26),N=L+(y^(I|~S))+w[11]+3174756917&4294967295,L=I+(N<<10&4294967295|N>>>22),N=S+(I^(L|~y))+w[2]+718787259&4294967295,S=L+(N<<15&4294967295|N>>>17),N=y+(L^(S|~I))+w[9]+3951481745&4294967295,C.g[0]=C.g[0]+I&4294967295,C.g[1]=C.g[1]+(S+(N<<21&4294967295|N>>>11))&4294967295,C.g[2]=C.g[2]+S&4294967295,C.g[3]=C.g[3]+L&4294967295}i.prototype.u=function(C,I){I===void 0&&(I=C.length);for(var y=I-this.blockSize,w=this.B,S=this.h,L=0;L<I;){if(S==0)for(;L<=y;)s(this,C,L),L+=this.blockSize;if(typeof C=="string"){for(;L<I;)if(w[S++]=C.charCodeAt(L++),S==this.blockSize){s(this,w),S=0;break}}else for(;L<I;)if(w[S++]=C[L++],S==this.blockSize){s(this,w),S=0;break}}this.h=S,this.o+=I},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var I=1;I<C.length-8;++I)C[I]=0;var y=8*this.o;for(I=C.length-8;I<C.length;++I)C[I]=y&255,y/=256;for(this.u(C),C=Array(16),I=y=0;4>I;++I)for(var w=0;32>w;w+=8)C[y++]=this.g[I]>>>w&255;return C};function o(C,I){var y=l;return Object.prototype.hasOwnProperty.call(y,C)?y[C]:y[C]=I(C)}function a(C,I){this.h=I;for(var y=[],w=!0,S=C.length-1;0<=S;S--){var L=C[S]|0;w&&L==I||(y[S]=L,w=!1)}this.g=y}var l={};function u(C){return-128<=C&&128>C?o(C,function(I){return new a([I|0],0>I?-1:0)}):new a([C|0],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return P(c(-C));for(var I=[],y=1,w=0;C>=y;w++)I[w]=C/y|0,y*=4294967296;return new a(I,0)}function h(C,I){if(C.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(C.charAt(0)=="-")return P(h(C.substring(1),I));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=c(Math.pow(I,8)),w=f,S=0;S<C.length;S+=8){var L=Math.min(8,C.length-S),N=parseInt(C.substring(S,S+L),I);8>L?(L=c(Math.pow(I,L)),w=w.j(L).add(c(N))):(w=w.j(y),w=w.add(c(N)))}return w}var f=u(0),p=u(1),g=u(16777216);t=a.prototype,t.m=function(){if(D(this))return-P(this).m();for(var C=0,I=1,y=0;y<this.g.length;y++){var w=this.i(y);C+=(0<=w?w:4294967296+w)*I,I*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(b(this))return"0";if(D(this))return"-"+P(this).toString(C);for(var I=c(Math.pow(C,6)),y=this,w="";;){var S=R(y,I).g;y=x(y,S.j(I));var L=((0<y.g.length?y.g[0]:y.h)>>>0).toString(C);if(y=S,b(y))return L+w;for(;6>L.length;)L="0"+L;w=L+w}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function b(C){if(C.h!=0)return!1;for(var I=0;I<C.g.length;I++)if(C.g[I]!=0)return!1;return!0}function D(C){return C.h==-1}t.l=function(C){return C=x(this,C),D(C)?-1:b(C)?0:1};function P(C){for(var I=C.g.length,y=[],w=0;w<I;w++)y[w]=~C.g[w];return new a(y,~C.h).add(p)}t.abs=function(){return D(this)?P(this):this},t.add=function(C){for(var I=Math.max(this.g.length,C.g.length),y=[],w=0,S=0;S<=I;S++){var L=w+(this.i(S)&65535)+(C.i(S)&65535),N=(L>>>16)+(this.i(S)>>>16)+(C.i(S)>>>16);w=N>>>16,L&=65535,N&=65535,y[S]=N<<16|L}return new a(y,y[y.length-1]&-2147483648?-1:0)};function x(C,I){return C.add(P(I))}t.j=function(C){if(b(this)||b(C))return f;if(D(this))return D(C)?P(this).j(P(C)):P(P(this).j(C));if(D(C))return P(this.j(P(C)));if(0>this.l(g)&&0>C.l(g))return c(this.m()*C.m());for(var I=this.g.length+C.g.length,y=[],w=0;w<2*I;w++)y[w]=0;for(w=0;w<this.g.length;w++)for(var S=0;S<C.g.length;S++){var L=this.i(w)>>>16,N=this.i(w)&65535,Y=C.i(S)>>>16,Z=C.i(S)&65535;y[2*w+2*S]+=N*Z,E(y,2*w+2*S),y[2*w+2*S+1]+=L*Z,E(y,2*w+2*S+1),y[2*w+2*S+1]+=N*Y,E(y,2*w+2*S+1),y[2*w+2*S+2]+=L*Y,E(y,2*w+2*S+2)}for(w=0;w<I;w++)y[w]=y[2*w+1]<<16|y[2*w];for(w=I;w<2*I;w++)y[w]=0;return new a(y,0)};function E(C,I){for(;(C[I]&65535)!=C[I];)C[I+1]+=C[I]>>>16,C[I]&=65535,I++}function _(C,I){this.g=C,this.h=I}function R(C,I){if(b(I))throw Error("division by zero");if(b(C))return new _(f,f);if(D(C))return I=R(P(C),I),new _(P(I.g),P(I.h));if(D(I))return I=R(C,P(I)),new _(P(I.g),I.h);if(30<C.g.length){if(D(C)||D(I))throw Error("slowDivide_ only works with positive integers.");for(var y=p,w=I;0>=w.l(C);)y=j(y),w=j(w);var S=V(y,1),L=V(w,1);for(w=V(w,2),y=V(y,2);!b(w);){var N=L.add(w);0>=N.l(C)&&(S=S.add(y),L=N),w=V(w,1),y=V(y,1)}return I=x(C,S.j(I)),new _(S,I)}for(S=f;0<=C.l(I);){for(y=Math.max(1,Math.floor(C.m()/I.m())),w=Math.ceil(Math.log(y)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),L=c(y),N=L.j(I);D(N)||0<N.l(C);)y-=w,L=c(y),N=L.j(I);b(L)&&(L=p),S=S.add(L),C=x(C,N)}return new _(S,C)}t.A=function(C){return R(this,C).h},t.and=function(C){for(var I=Math.max(this.g.length,C.g.length),y=[],w=0;w<I;w++)y[w]=this.i(w)&C.i(w);return new a(y,this.h&C.h)},t.or=function(C){for(var I=Math.max(this.g.length,C.g.length),y=[],w=0;w<I;w++)y[w]=this.i(w)|C.i(w);return new a(y,this.h|C.h)},t.xor=function(C){for(var I=Math.max(this.g.length,C.g.length),y=[],w=0;w<I;w++)y[w]=this.i(w)^C.i(w);return new a(y,this.h^C.h)};function j(C){for(var I=C.g.length+1,y=[],w=0;w<I;w++)y[w]=C.i(w)<<1|C.i(w-1)>>>31;return new a(y,C.h)}function V(C,I){var y=I>>5;I%=32;for(var w=C.g.length-y,S=[],L=0;L<w;L++)S[L]=0<I?C.i(L+y)>>>I|C.i(L+y+1)<<32-I:C.i(L+y);return new a(S,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,P1=i,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=c,a.fromString=h,ps=a}).apply(typeof Eb<"u"?Eb:typeof self<"u"?self:typeof window<"u"?window:{});var rd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var R1,Vl,N1,Ld,Fg,D1,M1,L1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,v,T){return d==Array.prototype||d==Object.prototype||(d[v]=T.value),d};function r(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof rd=="object"&&rd];for(var v=0;v<d.length;++v){var T=d[v];if(T&&T.Math==Math)return T}throw Error("Cannot find global object")}var i=r(this);function s(d,v){if(v)e:{var T=i;d=d.split(".");for(var O=0;O<d.length-1;O++){var z=d[O];if(!(z in T))break e;T=T[z]}d=d[d.length-1],O=T[d],v=v(O),v!=O&&v!=null&&e(T,d,{configurable:!0,writable:!0,value:v})}}function o(d,v){d instanceof String&&(d+="");var T=0,O=!1,z={next:function(){if(!O&&T<d.length){var K=T++;return{value:v(K,d[K]),done:!1}}return O=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}s("Array.prototype.values",function(d){return d||function(){return o(this,function(v,T){return T})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function u(d){var v=typeof d;return v=v!="object"?v:d?Array.isArray(d)?"array":v:"null",v=="array"||v=="object"&&typeof d.length=="number"}function c(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function h(d,v,T){return d.call.apply(d.bind,arguments)}function f(d,v,T){if(!d)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,O),d.apply(v,z)}}return function(){return d.apply(v,arguments)}}function p(d,v,T){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function g(d,v){var T=Array.prototype.slice.call(arguments,1);return function(){var O=T.slice();return O.push.apply(O,arguments),d.apply(this,O)}}function b(d,v){function T(){}T.prototype=v.prototype,d.aa=v.prototype,d.prototype=new T,d.prototype.constructor=d,d.Qb=function(O,z,K){for(var de=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)de[ct-2]=arguments[ct];return v.prototype[z].apply(O,de)}}function D(d){const v=d.length;if(0<v){const T=Array(v);for(let O=0;O<v;O++)T[O]=d[O];return T}return[]}function P(d,v){for(let T=1;T<arguments.length;T++){const O=arguments[T];if(u(O)){const z=d.length||0,K=O.length||0;d.length=z+K;for(let de=0;de<K;de++)d[z+de]=O[de]}else d.push(O)}}class x{constructor(v,T){this.i=v,this.j=T,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function E(d){return/^[\s\xa0]*$/.test(d)}function _(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function R(d){return R[" "](d),d}R[" "]=function(){};var j=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function V(d,v,T){for(const O in d)v.call(T,d[O],O,d)}function C(d,v){for(const T in d)v.call(void 0,d[T],T,d)}function I(d){const v={};for(const T in d)v[T]=d[T];return v}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(d,v){let T,O;for(let z=1;z<arguments.length;z++){O=arguments[z];for(T in O)d[T]=O[T];for(let K=0;K<y.length;K++)T=y[K],Object.prototype.hasOwnProperty.call(O,T)&&(d[T]=O[T])}}function S(d){var v=1;d=d.split(":");const T=[];for(;0<v&&d.length;)T.push(d.shift()),v--;return d.length&&T.push(d.join(":")),T}function L(d){l.setTimeout(()=>{throw d},0)}function N(){var d=G;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class Y{constructor(){this.h=this.g=null}add(v,T){const O=Z.get();O.set(v,T),this.h?this.h.next=O:this.g=O,this.h=O}}var Z=new x(()=>new ae,d=>d.reset());class ae{constructor(){this.next=this.g=this.h=null}set(v,T){this.h=v,this.g=T,this.next=null}reset(){this.next=this.g=this.h=null}}let he,q=!1,G=new Y,ie=()=>{const d=l.Promise.resolve(void 0);he=()=>{d.then(ne)}};var ne=()=>{for(var d;d=N();){try{d.h.call(d.g)}catch(T){L(T)}var v=Z;v.j(d),100>v.h&&(v.h++,d.next=v.g,v.g=d)}q=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function $(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}$.prototype.h=function(){this.defaultPrevented=!0};var Q=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const T=()=>{};l.addEventListener("test",T,v),l.removeEventListener("test",T,v)}catch{}return d}();function X(d,v){if($.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var T=this.type=d.type,O=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget){if(j){e:{try{R(v.nodeName);var z=!0;break e}catch{}z=!1}z||(v=null)}}else T=="mouseover"?v=d.fromElement:T=="mouseout"&&(v=d.toElement);this.relatedTarget=v,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ce[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&X.aa.h.call(this)}}b(X,$);var ce={2:"touch",3:"pen",4:"mouse"};X.prototype.h=function(){X.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ye="closure_listenable_"+(1e6*Math.random()|0),Fe=0;function Le(d,v,T,O,z){this.listener=d,this.proxy=null,this.src=v,this.type=T,this.capture=!!O,this.ha=z,this.key=++Fe,this.da=this.fa=!1}function ee(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function le(d){this.src=d,this.g={},this.h=0}le.prototype.add=function(d,v,T,O,z){var K=d.toString();d=this.g[K],d||(d=this.g[K]=[],this.h++);var de=je(d,v,O,z);return-1<de?(v=d[de],T||(v.fa=!1)):(v=new Le(v,this.src,K,!!O,z),v.fa=T,d.push(v)),v};function we(d,v){var T=v.type;if(T in d.g){var O=d.g[T],z=Array.prototype.indexOf.call(O,v,void 0),K;(K=0<=z)&&Array.prototype.splice.call(O,z,1),K&&(ee(v),d.g[T].length==0&&(delete d.g[T],d.h--))}}function je(d,v,T,O){for(var z=0;z<d.length;++z){var K=d[z];if(!K.da&&K.listener==v&&K.capture==!!T&&K.ha==O)return z}return-1}var Be="closure_lm_"+(1e6*Math.random()|0),nt={};function A(d,v,T,O,z){if(Array.isArray(v)){for(var K=0;K<v.length;K++)A(d,v[K],T,O,z);return null}return T=rt(T),d&&d[ye]?d.K(v,T,c(O)?!!O.capture:!1,z):F(d,v,T,!1,O,z)}function F(d,v,T,O,z,K){if(!v)throw Error("Invalid event type");var de=c(z)?!!z.capture:!!z,ct=$e(d);if(ct||(d[Be]=ct=new le(d)),T=ct.add(v,T,O,de,K),T.proxy)return T;if(O=U(),T.proxy=O,O.src=d,O.listener=T,d.addEventListener)Q||(z=de),z===void 0&&(z=!1),d.addEventListener(v.toString(),O,z);else if(d.attachEvent)d.attachEvent(pe(v.toString()),O);else if(d.addListener&&d.removeListener)d.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return T}function U(){function d(T){return v.call(d.src,d.listener,T)}const v=Pe;return d}function H(d,v,T,O,z){if(Array.isArray(v))for(var K=0;K<v.length;K++)H(d,v[K],T,O,z);else O=c(O)?!!O.capture:!!O,T=rt(T),d&&d[ye]?(d=d.i,v=String(v).toString(),v in d.g&&(K=d.g[v],T=je(K,T,O,z),-1<T&&(ee(K[T]),Array.prototype.splice.call(K,T,1),K.length==0&&(delete d.g[v],d.h--)))):d&&(d=$e(d))&&(v=d.g[v.toString()],d=-1,v&&(d=je(v,T,O,z)),(T=-1<d?v[d]:null)&&re(T))}function re(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[ye])we(v.i,d);else{var T=d.type,O=d.proxy;v.removeEventListener?v.removeEventListener(T,O,d.capture):v.detachEvent?v.detachEvent(pe(T),O):v.addListener&&v.removeListener&&v.removeListener(O),(T=$e(v))?(we(T,d),T.h==0&&(T.src=null,v[Be]=null)):ee(d)}}}function pe(d){return d in nt?nt[d]:nt[d]="on"+d}function Pe(d,v){if(d.da)d=!0;else{v=new X(v,this);var T=d.listener,O=d.ha||d.src;d.fa&&re(d),d=T.call(O,v)}return d}function $e(d){return d=d[Be],d instanceof le?d:null}var et="__closure_events_fn_"+(1e9*Math.random()>>>0);function rt(d){return typeof d=="function"?d:(d[et]||(d[et]=function(v){return d.handleEvent(v)}),d[et])}function Me(){W.call(this),this.i=new le(this),this.M=this,this.F=null}b(Me,W),Me.prototype[ye]=!0,Me.prototype.removeEventListener=function(d,v,T,O){H(this,d,v,T,O)};function ft(d,v){var T,O=d.F;if(O)for(T=[];O;O=O.F)T.push(O);if(d=d.M,O=v.type||v,typeof v=="string")v=new $(v,d);else if(v instanceof $)v.target=v.target||d;else{var z=v;v=new $(O,d),w(v,z)}if(z=!0,T)for(var K=T.length-1;0<=K;K--){var de=v.g=T[K];z=Vt(de,O,!0,v)&&z}if(de=v.g=d,z=Vt(de,O,!0,v)&&z,z=Vt(de,O,!1,v)&&z,T)for(K=0;K<T.length;K++)de=v.g=T[K],z=Vt(de,O,!1,v)&&z}Me.prototype.N=function(){if(Me.aa.N.call(this),this.i){var d=this.i,v;for(v in d.g){for(var T=d.g[v],O=0;O<T.length;O++)ee(T[O]);delete d.g[v],d.h--}}this.F=null},Me.prototype.K=function(d,v,T,O){return this.i.add(String(d),v,!1,T,O)},Me.prototype.L=function(d,v,T,O){return this.i.add(String(d),v,!0,T,O)};function Vt(d,v,T,O){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();for(var z=!0,K=0;K<v.length;++K){var de=v[K];if(de&&!de.da&&de.capture==T){var ct=de.listener,tn=de.ha||de.src;de.fa&&we(d.i,de),z=ct.call(tn,O)!==!1&&z}}return z&&!O.defaultPrevented}function ai(d,v,T){if(typeof d=="function")T&&(d=p(d,T));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:l.setTimeout(d,v||0)}function me(d){d.g=ai(()=>{d.g=null,d.i&&(d.i=!1,me(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class ke extends W{constructor(v,T){super(),this.m=v,this.l=T,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:me(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function be(d){W.call(this),this.h=d,this.g={}}b(be,W);var Oe=[];function Re(d){V(d.g,function(v,T){this.g.hasOwnProperty(T)&&re(v)},d),d.g={}}be.prototype.N=function(){be.aa.N.call(this),Re(this)},be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ge=l.JSON.stringify,hn=l.JSON.parse,br=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function li(){}li.prototype.h=null;function Br(d){return d.h||(d.h=d.i())}function Ht(){}var $r={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xr(){$.call(this,"d")}b(xr,$);function So(){$.call(this,"c")}b(So,$);var qn={},Nt=null;function Er(){return Nt=Nt||new Me}qn.La="serverreachability";function bc(d){$.call(this,qn.La,d)}b(bc,$);function Vi(d){const v=Er();ft(v,new bc(v))}qn.STAT_EVENT="statevent";function Io(d,v){$.call(this,qn.STAT_EVENT,d),this.stat=v}b(Io,$);function Wt(d){const v=Er();ft(v,new Io(v,d))}qn.Ma="timingevent";function rl(d,v){$.call(this,qn.Ma,d),this.size=v}b(rl,$);function Os(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},v)}function fn(){this.g=!0}fn.prototype.xa=function(){this.g=!1};function ko(d,v,T,O,z,K){d.info(function(){if(d.g)if(K)for(var de="",ct=K.split("&"),tn=0;tn<ct.length;tn++){var tt=ct[tn].split("=");if(1<tt.length){var pn=tt[0];tt=tt[1];var mn=pn.split("_");de=2<=mn.length&&mn[1]=="type"?de+(pn+"="+tt+"&"):de+(pn+"=redacted&")}}else de=null;else de=K;return"XMLHTTP REQ ("+O+") [attempt "+z+"]: "+v+`
`+T+`
`+de})}function xc(d,v,T,O,z,K,de){d.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+z+"]: "+v+`
`+T+`
`+K+" "+de})}function ui(d,v,T,O){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ec(d,T)+(O?" "+O:"")})}function il(d,v){d.info(function(){return"TIMEOUT: "+v})}fn.prototype.info=function(){};function Ec(d,v){if(!d.g)return v;if(!v)return null;try{var T=JSON.parse(v);if(T){for(d=0;d<T.length;d++)if(Array.isArray(T[d])){var O=T[d];if(!(2>O.length)){var z=O[1];if(Array.isArray(z)&&!(1>z.length)){var K=z[0];if(K!="noop"&&K!="stop"&&K!="close")for(var de=1;de<z.length;de++)z[de]=""}}}}return Ge(T)}catch{return v}}var Ln={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},sl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Co;function js(){}b(js,li),js.prototype.g=function(){return new XMLHttpRequest},js.prototype.i=function(){return{}},Co=new js;function Tr(d,v,T,O){this.j=d,this.i=v,this.l=T,this.R=O||1,this.U=new be(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tc}function Tc(){this.i=null,this.g="",this.h=!1}var xe={},B={};function se(d,v,T){d.L=1,d.v=Cc(ci(v)),d.m=T,d.P=!0,_e(d,null)}function _e(d,v){d.F=Date.now(),Ct(d),d.A=ci(d.v);var T=d.A,O=d.R;Array.isArray(O)||(O=[String(O)]),u0(T.i,"t",O),d.C=0,T=d.j.J,d.h=new Tc,d.g=k0(d.j,T?v:null,!d.m),0<d.O&&(d.M=new ke(p(d.Y,d,d.g),d.O)),v=d.U,T=d.g,O=d.ca;var z="readystatechange";Array.isArray(z)||(z&&(Oe[0]=z.toString()),z=Oe);for(var K=0;K<z.length;K++){var de=A(T,z[K],O||v.handleEvent,!1,v.h||v);if(!de)break;v.g[de.key]=de}v=d.H?I(d.H):{},d.m?(d.u||(d.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,v)):(d.u="GET",d.g.ea(d.A,d.u,null,v)),Vi(),ko(d.i,d.u,d.A,d.l,d.R,d.m)}Tr.prototype.ca=function(d){d=d.target;const v=this.M;v&&di(d)==3?v.j():this.Y(d)},Tr.prototype.Y=function(d){try{if(d==this.g)e:{const mn=di(this.g);var v=this.g.Ba();const No=this.g.Z();if(!(3>mn)&&(mn!=3||this.g&&(this.h.h||this.g.oa()||g0(this.g)))){this.J||mn!=4||v==7||(v==8||0>=No?Vi(3):Vi(2)),On(this);var T=this.g.Z();this.X=T;t:if(ut(this)){var O=g0(this.g);d="";var z=O.length,K=di(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xt(this),Sr(this);var de="";break t}this.h.i=new l.TextDecoder}for(v=0;v<z;v++)this.h.h=!0,d+=this.h.i.decode(O[v],{stream:!(K&&v==z-1)});O.length=0,this.h.g+=d,this.C=0,de=this.h.g}else de=this.g.oa();if(this.o=T==200,xc(this.i,this.u,this.A,this.l,this.R,mn,T),this.o){if(this.T&&!this.K){t:{if(this.g){var ct,tn=this.g;if((ct=tn.g?tn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(ct)){var tt=ct;break t}}tt=null}if(T=tt)ui(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ao(this,T);else{this.o=!1,this.s=3,Wt(12),xt(this),Sr(this);break e}}if(this.P){T=!0;let Ir;for(;!this.J&&this.C<de.length;)if(Ir=qt(this,de),Ir==B){mn==4&&(this.s=4,Wt(14),T=!1),ui(this.i,this.l,null,"[Incomplete Response]");break}else if(Ir==xe){this.s=4,Wt(15),ui(this.i,this.l,de,"[Invalid Chunk]"),T=!1;break}else ui(this.i,this.l,Ir,null),Ao(this,Ir);if(ut(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),mn!=4||de.length!=0||this.h.h||(this.s=1,Wt(16),T=!1),this.o=this.o&&T,!T)ui(this.i,this.l,de,"[Invalid Chunked Response]"),xt(this),Sr(this);else if(0<de.length&&!this.W){this.W=!0;var pn=this.j;pn.g==this&&pn.ba&&!pn.M&&(pn.j.info("Great, no buffering proxy detected. Bytes received: "+de.length),yp(pn),pn.M=!0,Wt(11))}}else ui(this.i,this.l,de,null),Ao(this,de);mn==4&&xt(this),this.o&&!this.J&&(mn==4?E0(this.j,this):(this.o=!1,Ct(this)))}else KP(this.g),T==400&&0<de.indexOf("Unknown SID")?(this.s=3,Wt(12)):(this.s=0,Wt(13)),xt(this),Sr(this)}}}catch{}finally{}};function ut(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function qt(d,v){var T=d.C,O=v.indexOf(`
`,T);return O==-1?B:(T=Number(v.substring(T,O)),isNaN(T)?xe:(O+=1,O+T>v.length?B:(v=v.slice(O,O+T),d.C=O+T,v)))}Tr.prototype.cancel=function(){this.J=!0,xt(this)};function Ct(d){d.S=Date.now()+d.I,en(d,d.I)}function en(d,v){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Os(p(d.ba,d),v)}function On(d){d.B&&(l.clearTimeout(d.B),d.B=null)}Tr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(il(this.i,this.A),this.L!=2&&(Vi(),Wt(17)),xt(this),this.s=2,Sr(this)):en(this,this.S-d)};function Sr(d){d.j.G==0||d.J||E0(d.j,d)}function xt(d){On(d);var v=d.M;v&&typeof v.ma=="function"&&v.ma(),d.M=null,Re(d.U),d.g&&(v=d.g,d.g=null,v.abort(),v.ma())}function Ao(d,v){try{var T=d.j;if(T.G!=0&&(T.g==d||fp(T.h,d))){if(!d.K&&fp(T.h,d)&&T.G==3){try{var O=T.Da.g.parse(v)}catch{O=null}if(Array.isArray(O)&&O.length==3){var z=O;if(z[0]==0){e:if(!T.u){if(T.g)if(T.g.F+3e3<d.F)Mc(T),Nc(T);else break e;vp(T),Wt(18)}}else T.za=z[1],0<T.za-T.T&&37500>z[2]&&T.F&&T.v==0&&!T.C&&(T.C=Os(p(T.Za,T),6e3));if(1>=e0(T.h)&&T.ca){try{T.ca()}catch{}T.ca=void 0}}else Fs(T,11)}else if((d.K||T.g==d)&&Mc(T),!E(v))for(z=T.Da.g.parse(v),v=0;v<z.length;v++){let tt=z[v];if(T.T=tt[0],tt=tt[1],T.G==2)if(tt[0]=="c"){T.K=tt[1],T.ia=tt[2];const pn=tt[3];pn!=null&&(T.la=pn,T.j.info("VER="+T.la));const mn=tt[4];mn!=null&&(T.Aa=mn,T.j.info("SVER="+T.Aa));const No=tt[5];No!=null&&typeof No=="number"&&0<No&&(O=1.5*No,T.L=O,T.j.info("backChannelRequestTimeoutMs_="+O)),O=T;const Ir=d.g;if(Ir){const Oc=Ir.g?Ir.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oc){var K=O.h;K.g||Oc.indexOf("spdy")==-1&&Oc.indexOf("quic")==-1&&Oc.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(pp(K,K.h),K.h=null))}if(O.D){const _p=Ir.g?Ir.g.getResponseHeader("X-HTTP-Session-Id"):null;_p&&(O.ya=_p,pt(O.I,O.D,_p))}}T.G=3,T.l&&T.l.ua(),T.ba&&(T.R=Date.now()-d.F,T.j.info("Handshake RTT: "+T.R+"ms")),O=T;var de=d;if(O.qa=I0(O,O.J?O.ia:null,O.W),de.K){t0(O.h,de);var ct=de,tn=O.L;tn&&(ct.I=tn),ct.B&&(On(ct),Ct(ct)),O.g=de}else b0(O);0<T.i.length&&Dc(T)}else tt[0]!="stop"&&tt[0]!="close"||Fs(T,7);else T.G==3&&(tt[0]=="stop"||tt[0]=="close"?tt[0]=="stop"?Fs(T,7):gp(T):tt[0]!="noop"&&T.l&&T.l.ta(tt),T.v=0)}}Vi(4)}catch{}}var Sc=class{constructor(d,v){this.g=d,this.map=v}};function J_(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Z_(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function e0(d){return d.h?1:d.g?d.g.size:0}function fp(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function pp(d,v){d.g?d.g.add(v):d.h=v}function t0(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}J_.prototype.cancel=function(){if(this.i=n0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function n0(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const T of d.g.values())v=v.concat(T.D);return v}return D(d.i)}function DP(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var v=[],T=d.length,O=0;O<T;O++)v.push(d[O]);return v}v=[],T=0;for(O in d)v[T++]=d[O];return v}function MP(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var v=[];d=d.length;for(var T=0;T<d;T++)v.push(T);return v}v=[],T=0;for(const O in d)v[T++]=O;return v}}}function r0(d,v){if(d.forEach&&typeof d.forEach=="function")d.forEach(v,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,v,void 0);else for(var T=MP(d),O=DP(d),z=O.length,K=0;K<z;K++)v.call(void 0,O[K],T&&T[K],d)}var i0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function LP(d,v){if(d){d=d.split("&");for(var T=0;T<d.length;T++){var O=d[T].indexOf("="),z=null;if(0<=O){var K=d[T].substring(0,O);z=d[T].substring(O+1)}else K=d[T];v(K,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Vs(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Vs){this.h=d.h,Ic(this,d.j),this.o=d.o,this.g=d.g,kc(this,d.s),this.l=d.l;var v=d.i,T=new ll;T.i=v.i,v.g&&(T.g=new Map(v.g),T.h=v.h),s0(this,T),this.m=d.m}else d&&(v=String(d).match(i0))?(this.h=!1,Ic(this,v[1]||"",!0),this.o=ol(v[2]||""),this.g=ol(v[3]||"",!0),kc(this,v[4]),this.l=ol(v[5]||"",!0),s0(this,v[6]||"",!0),this.m=ol(v[7]||"")):(this.h=!1,this.i=new ll(null,this.h))}Vs.prototype.toString=function(){var d=[],v=this.j;v&&d.push(al(v,o0,!0),":");var T=this.g;return(T||v=="file")&&(d.push("//"),(v=this.o)&&d.push(al(v,o0,!0),"@"),d.push(encodeURIComponent(String(T)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T=this.s,T!=null&&d.push(":",String(T))),(T=this.l)&&(this.g&&T.charAt(0)!="/"&&d.push("/"),d.push(al(T,T.charAt(0)=="/"?VP:jP,!0))),(T=this.i.toString())&&d.push("?",T),(T=this.m)&&d.push("#",al(T,UP)),d.join("")};function ci(d){return new Vs(d)}function Ic(d,v,T){d.j=T?ol(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function kc(d,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);d.s=v}else d.s=null}function s0(d,v,T){v instanceof ll?(d.i=v,BP(d.i,d.h)):(T||(v=al(v,FP)),d.i=new ll(v,d.h))}function pt(d,v,T){d.i.set(v,T)}function Cc(d){return pt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function ol(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function al(d,v,T){return typeof d=="string"?(d=encodeURI(d).replace(v,OP),T&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function OP(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var o0=/[#\/\?@]/g,jP=/[#\?:]/g,VP=/[#\?]/g,FP=/[#\?@]/g,UP=/#/g;function ll(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Fi(d){d.g||(d.g=new Map,d.h=0,d.i&&LP(d.i,function(v,T){d.add(decodeURIComponent(v.replace(/\+/g," ")),T)}))}t=ll.prototype,t.add=function(d,v){Fi(this),this.i=null,d=Po(this,d);var T=this.g.get(d);return T||this.g.set(d,T=[]),T.push(v),this.h+=1,this};function a0(d,v){Fi(d),v=Po(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function l0(d,v){return Fi(d),v=Po(d,v),d.g.has(v)}t.forEach=function(d,v){Fi(this),this.g.forEach(function(T,O){T.forEach(function(z){d.call(v,z,O,this)},this)},this)},t.na=function(){Fi(this);const d=Array.from(this.g.values()),v=Array.from(this.g.keys()),T=[];for(let O=0;O<v.length;O++){const z=d[O];for(let K=0;K<z.length;K++)T.push(v[O])}return T},t.V=function(d){Fi(this);let v=[];if(typeof d=="string")l0(this,d)&&(v=v.concat(this.g.get(Po(this,d))));else{d=Array.from(this.g.values());for(let T=0;T<d.length;T++)v=v.concat(d[T])}return v},t.set=function(d,v){return Fi(this),this.i=null,d=Po(this,d),l0(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},t.get=function(d,v){return d?(d=this.V(d),0<d.length?String(d[0]):v):v};function u0(d,v,T){a0(d,v),0<T.length&&(d.i=null,d.g.set(Po(d,v),D(T)),d.h+=T.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(var T=0;T<v.length;T++){var O=v[T];const K=encodeURIComponent(String(O)),de=this.V(O);for(O=0;O<de.length;O++){var z=K;de[O]!==""&&(z+="="+encodeURIComponent(String(de[O]))),d.push(z)}}return this.i=d.join("&")};function Po(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function BP(d,v){v&&!d.j&&(Fi(d),d.i=null,d.g.forEach(function(T,O){var z=O.toLowerCase();O!=z&&(a0(this,O),u0(this,z,T))},d)),d.j=v}function $P(d,v){const T=new fn;if(l.Image){const O=new Image;O.onload=g(Ui,T,"TestLoadImage: loaded",!0,v,O),O.onerror=g(Ui,T,"TestLoadImage: error",!1,v,O),O.onabort=g(Ui,T,"TestLoadImage: abort",!1,v,O),O.ontimeout=g(Ui,T,"TestLoadImage: timeout",!1,v,O),l.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=d}else v(!1)}function zP(d,v){const T=new fn,O=new AbortController,z=setTimeout(()=>{O.abort(),Ui(T,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:O.signal}).then(K=>{clearTimeout(z),K.ok?Ui(T,"TestPingServer: ok",!0,v):Ui(T,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(z),Ui(T,"TestPingServer: error",!1,v)})}function Ui(d,v,T,O,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),O(T)}catch{}}function HP(){this.g=new br}function WP(d,v,T){const O=T||"";try{r0(d,function(z,K){let de=z;c(z)&&(de=Ge(z)),v.push(O+K+"="+encodeURIComponent(de))})}catch(z){throw v.push(O+"type="+encodeURIComponent("_badmap")),z}}function Ac(d){this.l=d.Ub||null,this.j=d.eb||!1}b(Ac,li),Ac.prototype.g=function(){return new Pc(this.l,this.j)},Ac.prototype.i=function(d){return function(){return d}}({});function Pc(d,v){Me.call(this),this.D=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Pc,Me),t=Pc.prototype,t.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=v,this.readyState=1,cl(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(v.body=d),(this.D||l).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ul(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,cl(this)),this.g&&(this.readyState=3,cl(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;c0(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function c0(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?ul(this):cl(this),this.readyState==3&&c0(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,ul(this))},t.Qa=function(d){this.g&&(this.response=d,ul(this))},t.ga=function(){this.g&&ul(this)};function ul(d){d.readyState=4,d.l=null,d.j=null,d.v=null,cl(d)}t.setRequestHeader=function(d,v){this.u.append(d,v)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var T=v.next();!T.done;)T=T.value,d.push(T[0]+": "+T[1]),T=v.next();return d.join(`\r
`)};function cl(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Pc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function d0(d){let v="";return V(d,function(T,O){v+=O,v+=":",v+=T,v+=`\r
`}),v}function mp(d,v,T){e:{for(O in T){var O=!1;break e}O=!0}O||(T=d0(T),typeof d=="string"?T!=null&&encodeURIComponent(String(T)):pt(d,v,T))}function At(d){Me.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(At,Me);var qP=/^https?$/i,GP=["POST","PUT"];t=At.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,v,T,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Co.g(),this.v=this.o?Br(this.o):Br(Co),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(K){h0(this,K);return}if(d=T||"",T=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var z in O)T.set(z,O[z]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const K of O.keys())T.set(K,O.get(K));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(T.keys()).find(K=>K.toLowerCase()=="content-type"),z=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(GP,v,void 0))||O||z||T.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,de]of T)this.g.setRequestHeader(K,de);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{m0(this),this.u=!0,this.g.send(d),this.u=!1}catch(K){h0(this,K)}};function h0(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.m=5,f0(d),Rc(d)}function f0(d){d.A||(d.A=!0,ft(d,"complete"),ft(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,ft(this,"complete"),ft(this,"abort"),Rc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rc(this,!0)),At.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?p0(this):this.bb())},t.bb=function(){p0(this)};function p0(d){if(d.h&&typeof a<"u"&&(!d.v[1]||di(d)!=4||d.Z()!=2)){if(d.u&&di(d)==4)ai(d.Ea,0,d);else if(ft(d,"readystatechange"),di(d)==4){d.h=!1;try{const de=d.Z();e:switch(de){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var T;if(!(T=v)){var O;if(O=de===0){var z=String(d.D).match(i0)[1]||null;!z&&l.self&&l.self.location&&(z=l.self.location.protocol.slice(0,-1)),O=!qP.test(z?z.toLowerCase():"")}T=O}if(T)ft(d,"complete"),ft(d,"success");else{d.m=6;try{var K=2<di(d)?d.g.statusText:""}catch{K=""}d.l=K+" ["+d.Z()+"]",f0(d)}}finally{Rc(d)}}}}function Rc(d,v){if(d.g){m0(d);const T=d.g,O=d.v[0]?()=>{}:null;d.g=null,d.v=null,v||ft(d,"ready");try{T.onreadystatechange=O}catch{}}}function m0(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function di(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<di(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),hn(v)}};function g0(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function KP(d){const v={};d=(d.g&&2<=di(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<d.length;O++){if(E(d[O]))continue;var T=S(d[O]);const z=T[0];if(T=T[1],typeof T!="string")continue;T=T.trim();const K=v[z]||[];v[z]=K,K.push(T)}C(v,function(O){return O.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function dl(d,v,T){return T&&T.internalChannelParams&&T.internalChannelParams[d]||v}function v0(d){this.Aa=0,this.i=[],this.j=new fn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=dl("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=dl("baseRetryDelayMs",5e3,d),this.cb=dl("retryDelaySeedMs",1e4,d),this.Wa=dl("forwardChannelMaxRetries",2,d),this.wa=dl("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new J_(d&&d.concurrentRequestLimit),this.Da=new HP,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=v0.prototype,t.la=8,t.G=1,t.connect=function(d,v,T,O){Wt(0),this.W=d,this.H=v||{},T&&O!==void 0&&(this.H.OSID=T,this.H.OAID=O),this.F=this.X,this.I=I0(this,null,this.W),Dc(this)};function gp(d){if(y0(d),d.G==3){var v=d.U++,T=ci(d.I);if(pt(T,"SID",d.K),pt(T,"RID",v),pt(T,"TYPE","terminate"),hl(d,T),v=new Tr(d,d.j,v),v.L=2,v.v=Cc(ci(T)),T=!1,l.navigator&&l.navigator.sendBeacon)try{T=l.navigator.sendBeacon(v.v.toString(),"")}catch{}!T&&l.Image&&(new Image().src=v.v,T=!0),T||(v.g=k0(v.j,null),v.g.ea(v.v)),v.F=Date.now(),Ct(v)}S0(d)}function Nc(d){d.g&&(yp(d),d.g.cancel(),d.g=null)}function y0(d){Nc(d),d.u&&(l.clearTimeout(d.u),d.u=null),Mc(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function Dc(d){if(!Z_(d.h)&&!d.s){d.s=!0;var v=d.Ga;he||ie(),q||(he(),q=!0),G.add(v,d),d.B=0}}function YP(d,v){return e0(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=v.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Os(p(d.Ga,d,v),T0(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const z=new Tr(this,this.j,d);let K=this.o;if(this.S&&(K?(K=I(K),w(K,this.S)):K=this.S),this.m!==null||this.O||(z.H=K,K=null),this.P)e:{for(var v=0,T=0;T<this.i.length;T++){t:{var O=this.i[T];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(v+=O,4096<v){v=T;break e}if(v===4096||T===this.i.length-1){v=T+1;break e}}v=1e3}else v=1e3;v=w0(this,z,v),T=ci(this.I),pt(T,"RID",d),pt(T,"CVER",22),this.D&&pt(T,"X-HTTP-Session-Id",this.D),hl(this,T),K&&(this.O?v="headers="+encodeURIComponent(String(d0(K)))+"&"+v:this.m&&mp(T,this.m,K)),pp(this.h,z),this.Ua&&pt(T,"TYPE","init"),this.P?(pt(T,"$req",v),pt(T,"SID","null"),z.T=!0,se(z,T,null)):se(z,T,v),this.G=2}}else this.G==3&&(d?_0(this,d):this.i.length==0||Z_(this.h)||_0(this))};function _0(d,v){var T;v?T=v.l:T=d.U++;const O=ci(d.I);pt(O,"SID",d.K),pt(O,"RID",T),pt(O,"AID",d.T),hl(d,O),d.m&&d.o&&mp(O,d.m,d.o),T=new Tr(d,d.j,T,d.B+1),d.m===null&&(T.H=d.o),v&&(d.i=v.D.concat(d.i)),v=w0(d,T,1e3),T.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),pp(d.h,T),se(T,O,v)}function hl(d,v){d.H&&V(d.H,function(T,O){pt(v,O,T)}),d.l&&r0({},function(T,O){pt(v,O,T)})}function w0(d,v,T){T=Math.min(d.i.length,T);var O=d.l?p(d.l.Na,d.l,d):null;e:{var z=d.i;let K=-1;for(;;){const de=["count="+T];K==-1?0<T?(K=z[0].g,de.push("ofs="+K)):K=0:de.push("ofs="+K);let ct=!0;for(let tn=0;tn<T;tn++){let tt=z[tn].g;const pn=z[tn].map;if(tt-=K,0>tt)K=Math.max(0,z[tn].g-100),ct=!1;else try{WP(pn,de,"req"+tt+"_")}catch{O&&O(pn)}}if(ct){O=de.join("&");break e}}}return d=d.i.splice(0,T),v.D=d,O}function b0(d){if(!d.g&&!d.u){d.Y=1;var v=d.Fa;he||ie(),q||(he(),q=!0),G.add(v,d),d.v=0}}function vp(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Os(p(d.Fa,d),T0(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,x0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Os(p(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Wt(10),Nc(this),x0(this))};function yp(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function x0(d){d.g=new Tr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var v=ci(d.qa);pt(v,"RID","rpc"),pt(v,"SID",d.K),pt(v,"AID",d.T),pt(v,"CI",d.F?"0":"1"),!d.F&&d.ja&&pt(v,"TO",d.ja),pt(v,"TYPE","xmlhttp"),hl(d,v),d.m&&d.o&&mp(v,d.m,d.o),d.L&&(d.g.I=d.L);var T=d.g;d=d.ia,T.L=1,T.v=Cc(ci(v)),T.m=null,T.P=!0,_e(T,d)}t.Za=function(){this.C!=null&&(this.C=null,Nc(this),vp(this),Wt(19))};function Mc(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function E0(d,v){var T=null;if(d.g==v){Mc(d),yp(d),d.g=null;var O=2}else if(fp(d.h,v))T=v.D,t0(d.h,v),O=1;else return;if(d.G!=0){if(v.o)if(O==1){T=v.m?v.m.length:0,v=Date.now()-v.F;var z=d.B;O=Er(),ft(O,new rl(O,T)),Dc(d)}else b0(d);else if(z=v.s,z==3||z==0&&0<v.X||!(O==1&&YP(d,v)||O==2&&vp(d)))switch(T&&0<T.length&&(v=d.h,v.i=v.i.concat(T)),z){case 1:Fs(d,5);break;case 4:Fs(d,10);break;case 3:Fs(d,6);break;default:Fs(d,2)}}}function T0(d,v){let T=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(T*=2),T*v}function Fs(d,v){if(d.j.info("Error code "+v),v==2){var T=p(d.fb,d),O=d.Xa;const z=!O;O=new Vs(O||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ic(O,"https"),Cc(O),z?$P(O.toString(),T):zP(O.toString(),T)}else Wt(2);d.G=0,d.l&&d.l.sa(v),S0(d),y0(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),Wt(2)):(this.j.info("Failed to ping google.com"),Wt(1))};function S0(d){if(d.G=0,d.ka=[],d.l){const v=n0(d.h);(v.length!=0||d.i.length!=0)&&(P(d.ka,v),P(d.ka,d.i),d.h.i.length=0,D(d.i),d.i.length=0),d.l.ra()}}function I0(d,v,T){var O=T instanceof Vs?ci(T):new Vs(T);if(O.g!="")v&&(O.g=v+"."+O.g),kc(O,O.s);else{var z=l.location;O=z.protocol,v=v?v+"."+z.hostname:z.hostname,z=+z.port;var K=new Vs(null);O&&Ic(K,O),v&&(K.g=v),z&&kc(K,z),T&&(K.l=T),O=K}return T=d.D,v=d.ya,T&&v&&pt(O,T,v),pt(O,"VER",d.la),hl(d,O),O}function k0(d,v,T){if(v&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Ca&&!d.pa?new At(new Ac({eb:T})):new At(d.pa),v.Ha(d.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function C0(){}t=C0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Lc(){}Lc.prototype.g=function(d,v){return new Gn(d,v)};function Gn(d,v){Me.call(this),this.g=new v0(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(d?d["X-WebChannel-Client-Profile"]=v.va:d={"X-WebChannel-Client-Profile":v.va}),this.g.S=d,(d=v&&v.Sb)&&!E(d)&&(this.g.m=d),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!E(v)&&(this.g.D=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Ro(this)}b(Gn,Me),Gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Gn.prototype.close=function(){gp(this.g)},Gn.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var T={};T.__data__=d,d=T}else this.u&&(T={},T.__data__=Ge(d),d=T);v.i.push(new Sc(v.Ya++,d)),v.G==3&&Dc(v)},Gn.prototype.N=function(){this.g.l=null,delete this.j,gp(this.g),delete this.g,Gn.aa.N.call(this)};function A0(d){xr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const T in v){d=T;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}b(A0,xr);function P0(){So.call(this),this.status=1}b(P0,So);function Ro(d){this.g=d}b(Ro,C0),Ro.prototype.ua=function(){ft(this.g,"a")},Ro.prototype.ta=function(d){ft(this.g,new A0(d))},Ro.prototype.sa=function(d){ft(this.g,new P0)},Ro.prototype.ra=function(){ft(this.g,"b")},Lc.prototype.createWebChannel=Lc.prototype.g,Gn.prototype.send=Gn.prototype.o,Gn.prototype.open=Gn.prototype.m,Gn.prototype.close=Gn.prototype.close,L1=function(){return new Lc},M1=function(){return Er()},D1=qn,Fg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ln.NO_ERROR=0,Ln.TIMEOUT=8,Ln.HTTP_ERROR=6,Ld=Ln,sl.COMPLETE="complete",N1=sl,Ht.EventType=$r,$r.OPEN="a",$r.CLOSE="b",$r.ERROR="c",$r.MESSAGE="d",Me.prototype.listen=Me.prototype.K,Vl=Ht,At.prototype.listenOnce=At.prototype.L,At.prototype.getLastError=At.prototype.Ka,At.prototype.getLastErrorCode=At.prototype.Ba,At.prototype.getStatus=At.prototype.Z,At.prototype.getResponseJson=At.prototype.Oa,At.prototype.getResponseText=At.prototype.oa,At.prototype.send=At.prototype.ea,At.prototype.setWithCredentials=At.prototype.Ha,R1=At}).apply(typeof rd<"u"?rd:typeof self<"u"?self:typeof window<"u"?window:{});const Tb="@firebase/firestore",Sb="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_n.UNAUTHENTICATED=new _n(null),_n.GOOGLE_CREDENTIALS=new _n("google-credentials-uid"),_n.FIRST_PARTY=new _n("first-party-uid"),_n.MOCK_USER=new _n("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ka="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const co=new Ay("@firebase/firestore");function Fo(){return co.logLevel}function ge(t,...e){if(co.logLevel<=We.DEBUG){const r=e.map(By);co.debug(`Firestore (${Ka}): ${t}`,...r)}}function Ai(t,...e){if(co.logLevel<=We.ERROR){const r=e.map(By);co.error(`Firestore (${Ka}): ${t}`,...r)}}function Ta(t,...e){if(co.logLevel<=We.WARN){const r=e.map(By);co.warn(`Firestore (${Ka}): ${t}`,...r)}}function By(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ae(t="Unexpected state"){const e=`FIRESTORE (${Ka}) INTERNAL ASSERTION FAILED: `+t;throw Ai(e),new Error(e)}function it(t,e){t||Ae()}function De(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ee extends Mi{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Xj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(_n.UNAUTHENTICATED))}shutdown(){}}class Qj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Jj{constructor(e){this.t=e,this.currentUser=_n.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){it(this.o===void 0);let i=this.i;const s=u=>this.i!==i?(i=this.i,r(u)):Promise.resolve();let o=new xi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new xi,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new xi)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(i=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(it(typeof i.accessToken=="string"),new O1(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string"),new _n(e)}}class Zj{constructor(e,r,i){this.l=e,this.h=r,this.P=i,this.type="FirstParty",this.user=_n.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class eV{constructor(e,r,i){this.l=e,this.h=r,this.P=i}getToken(){return Promise.resolve(new Zj(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(_n.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Ib{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tV{constructor(e,r){this.A=r,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Nr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,r){it(this.o===void 0);const i=o=>{o.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.R;return this.R=o.token,ge("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Ib(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(it(typeof r.token=="string"),this.R=r.token,new Ib(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let i=0;i<t;i++)r[i]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=nV(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<r&&(i+=e.charAt(s[o]%62))}return i}}function Ke(t,e){return t<e?-1:t>e?1:0}function Sa(t,e,r){return t.length===e.length&&t.every((i,s)=>r(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=-62135596800,Cb=1e6;class $t{static now(){return $t.fromMillis(Date.now())}static fromDate(e){return $t.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),i=Math.floor((e-1e3*r)*Cb);return new $t(r,i)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Ee(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ee(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<kb)throw new Ee(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ee(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Cb}_compareTo(e){return this.seconds===e.seconds?Ke(this.nanoseconds,e.nanoseconds):Ke(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-kb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new $t(0,0))}static max(){return new Ne(new $t(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab="__name__";class qr{constructor(e,r,i){r===void 0?r=0:r>e.length&&Ae(),i===void 0?i=e.length-r:i>e.length-r&&Ae(),this.segments=e,this.offset=r,this.len=i}get length(){return this.len}isEqual(e){return qr.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof qr?e.forEach(i=>{r.push(i)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,i=this.limit();r<i;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const i=Math.min(e.length,r.length);for(let s=0;s<i;s++){const o=qr.compareSegments(e.get(s),r.get(s));if(o!==0)return o}return Math.sign(e.length-r.length)}static compareSegments(e,r){const i=qr.isNumericId(e),s=qr.isNumericId(r);return i&&!s?-1:!i&&s?1:i&&s?qr.extractNumericId(e).compare(qr.extractNumericId(r)):e<r?-1:e>r?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ps.fromString(e.substring(4,e.length-2))}}class wt extends qr{construct(e,r,i){return new wt(e,r,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ee(te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);r.push(...i.split("/").filter(s=>s.length>0))}return new wt(r)}static emptyPath(){return new wt([])}}const rV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class on extends qr{construct(e,r,i){return new on(e,r,i)}static isValidIdentifier(e){return rV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),on.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ab}static keyField(){return new on([Ab])}static fromServerFormat(e){const r=[];let i="",s=0;const o=()=>{if(i.length===0)throw new Ee(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(i),i=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Ee(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ee(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(i+=l,s++):(o(),s++)}if(o(),a)throw new Ee(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new on(r)}static emptyPath(){return new on([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e){this.path=e}static fromPath(e){return new Se(wt.fromString(e))}static fromName(e){return new Se(wt.fromString(e).popFirst(5))}static empty(){return new Se(wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&wt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return wt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Se(new wt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=-1;function iV(t,e){const r=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Ne.fromTimestamp(i===1e9?new $t(r+1,0):new $t(r,i));return new xs(s,Se.empty(),e)}function sV(t){return new xs(t.readTime,t.key,Cu)}class xs{constructor(e,r,i){this.readTime=e,this.documentKey=r,this.largestBatchId=i}static min(){return new xs(Ne.min(),Se.empty(),Cu)}static max(){return new xs(Ne.max(),Se.empty(),Cu)}}function oV(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=Se.comparator(t.documentKey,e.documentKey),r!==0?r:Ke(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(t){if(t.code!==te.FAILED_PRECONDITION||t.message!==aV)throw t;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Ae(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new J((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(r,o).next(i,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof J?r:J.resolve(r)}catch(r){return J.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):J.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):J.reject(r)}static resolve(e){return new J((r,i)=>{r(e)})}static reject(e){return new J((r,i)=>{i(e)})}static waitFor(e){return new J((r,i)=>{let s=0,o=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++o,a&&o===s&&r()},u=>i(u))}),a=!0,o===s&&r()})}static or(e){let r=J.resolve(!1);for(const i of e)r=r.next(s=>s?J.resolve(s):i());return r}static forEach(e,r){const i=[];return e.forEach((s,o)=>{i.push(r.call(this,s,o))}),this.waitFor(i)}static mapArray(e,r){return new J((i,s)=>{const o=e.length,a=new Array(o);let l=0;for(let u=0;u<o;u++){const c=u;r(e[c]).next(h=>{a[c]=h,++l,l===o&&i(a)},h=>s(h))}})}static doWhile(e,r){return new J((i,s)=>{const o=()=>{e()===!0?r().next(()=>{o()},s):i()};o()})}}function uV(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Xa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}xf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $y=-1;function Ef(t){return t==null}function Sh(t){return t===0&&1/t==-1/0}function cV(t){return typeof t=="number"&&Number.isInteger(t)&&!Sh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="";function dV(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=Pb(e)),e=hV(t.get(r),e);return Pb(e)}function hV(t,e){let r=e;const i=t.length;for(let s=0;s<i;s++){const o=t.charAt(s);switch(o){case"\0":r+="";break;case V1:r+="";break;default:r+=o}}return r}function Pb(t){return t+V1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rb(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Ds(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function F1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e,r){this.comparator=e,this.root=r||sn.EMPTY}insert(e,r){return new kt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(e){return new kt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,sn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}indexOf(e){let r=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return r+i.left.size;s<0?i=i.left:(r+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,i)=>(e(r,i),!1))}toString(){const e=[];return this.inorderTraversal((r,i)=>(e.push(`${r}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new id(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new id(this.root,e,this.comparator,!1)}getReverseIterator(){return new id(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new id(this.root,e,this.comparator,!0)}}class id{constructor(e,r,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=r?i(e.key,r):1,r&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class sn{constructor(e,r,i,s,o){this.key=e,this.value=r,this.color=i??sn.RED,this.left=s??sn.EMPTY,this.right=o??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,i,s,o){return new sn(e??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,r,i),null):o===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let i,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return sn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ae();const e=this.left.check();if(e!==this.right.check())throw Ae();return e+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw Ae()}get value(){throw Ae()}get color(){throw Ae()}get left(){throw Ae()}get right(){throw Ae()}copy(e,r,i,s,o){return this}insert(e,r,i){return new sn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.comparator=e,this.data=new kt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,i)=>(e(r),!1))}forEachInRange(e,r){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let i;for(i=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Nb(this.data.getIterator())}getIteratorFrom(e){return new Nb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(i=>{r=r.add(i)}),r}isEqual(e){if(!(e instanceof zt)||this.size!==e.size)return!1;const r=this.data.getIterator(),i=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new zt(this.comparator);return r.data=e,r}}class Nb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e){this.fields=e,e.sort(on.comparator)}static empty(){return new Xn([])}unionWith(e){let r=new zt(on.comparator);for(const i of this.fields)r=r.add(i);for(const i of e)r=r.add(i);return new Xn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return Sa(this.fields,e.fields,(r,i)=>r.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new U1("Invalid base64 string: "+o):o}}(e);return new dn(r)}static fromUint8Array(e){const r=function(s){let o="";for(let a=0;a<s.length;++a)o+=String.fromCharCode(s[a]);return o}(e);return new dn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const i=new Uint8Array(r.length);for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ke(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dn.EMPTY_BYTE_STRING=new dn("");const fV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Es(t){if(it(!!t),typeof t=="string"){let e=0;const r=fV.exec(t);if(it(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Dt(t.seconds),nanos:Dt(t.nanos)}}function Dt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ts(t){return typeof t=="string"?dn.fromBase64String(t):dn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="server_timestamp",$1="__type__",z1="__previous_value__",H1="__local_write_time__";function zy(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[$1])===null||r===void 0?void 0:r.stringValue)===B1}function Tf(t){const e=t.mapValue.fields[z1];return zy(e)?Tf(e):e}function Au(t){const e=Es(t.mapValue.fields[H1].timestampValue);return new $t(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e,r,i,s,o,a,l,u,c){this.databaseId=e,this.appId=r,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}const Ih="(default)";class Pu{constructor(e,r){this.projectId=e,this.database=r||Ih}static empty(){return new Pu("","")}get isDefaultDatabase(){return this.database===Ih}isEqual(e){return e instanceof Pu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1="__type__",mV="__max__",sd={mapValue:{}},q1="__vector__",kh="value";function Ss(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zy(t)?4:vV(t)?9007199254740991:gV(t)?10:11:Ae()}function ri(t,e){if(t===e)return!0;const r=Ss(t);if(r!==Ss(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Au(t).isEqual(Au(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const a=Es(s.timestampValue),l=Es(o.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Ts(s.bytesValue).isEqual(Ts(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return Dt(s.geoPointValue.latitude)===Dt(o.geoPointValue.latitude)&&Dt(s.geoPointValue.longitude)===Dt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return Dt(s.integerValue)===Dt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const a=Dt(s.doubleValue),l=Dt(o.doubleValue);return a===l?Sh(a)===Sh(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Sa(t.arrayValue.values||[],e.arrayValue.values||[],ri);case 10:case 11:return function(s,o){const a=s.mapValue.fields||{},l=o.mapValue.fields||{};if(Rb(a)!==Rb(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!ri(a[u],l[u])))return!1;return!0}(t,e);default:return Ae()}}function Ru(t,e){return(t.values||[]).find(r=>ri(r,e))!==void 0}function Ia(t,e){if(t===e)return 0;const r=Ss(t),i=Ss(e);if(r!==i)return Ke(r,i);switch(r){case 0:case 9007199254740991:return 0;case 1:return Ke(t.booleanValue,e.booleanValue);case 2:return function(o,a){const l=Dt(o.integerValue||o.doubleValue),u=Dt(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Db(t.timestampValue,e.timestampValue);case 4:return Db(Au(t),Au(e));case 5:return Ke(t.stringValue,e.stringValue);case 6:return function(o,a){const l=Ts(o),u=Ts(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const l=o.split("/"),u=a.split("/");for(let c=0;c<l.length&&c<u.length;c++){const h=Ke(l[c],u[c]);if(h!==0)return h}return Ke(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const l=Ke(Dt(o.latitude),Dt(a.latitude));return l!==0?l:Ke(Dt(o.longitude),Dt(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Mb(t.arrayValue,e.arrayValue);case 10:return function(o,a){var l,u,c,h;const f=o.fields||{},p=a.fields||{},g=(l=f[kh])===null||l===void 0?void 0:l.arrayValue,b=(u=p[kh])===null||u===void 0?void 0:u.arrayValue,D=Ke(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=b==null?void 0:b.values)===null||h===void 0?void 0:h.length)||0);return D!==0?D:Mb(g,b)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===sd.mapValue&&a===sd.mapValue)return 0;if(o===sd.mapValue)return 1;if(a===sd.mapValue)return-1;const l=o.fields||{},u=Object.keys(l),c=a.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const p=Ke(u[f],h[f]);if(p!==0)return p;const g=Ia(l[u[f]],c[h[f]]);if(g!==0)return g}return Ke(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Ae()}}function Db(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ke(t,e);const r=Es(t),i=Es(e),s=Ke(r.seconds,i.seconds);return s!==0?s:Ke(r.nanos,i.nanos)}function Mb(t,e){const r=t.values||[],i=e.values||[];for(let s=0;s<r.length&&s<i.length;++s){const o=Ia(r[s],i[s]);if(o)return o}return Ke(r.length,i.length)}function ka(t){return Ug(t)}function Ug(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Es(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return Ts(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return Se.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let i="[",s=!0;for(const o of r.values||[])s?s=!1:i+=",",i+=Ug(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",o=!0;for(const a of i)o?o=!1:s+=",",s+=`${a}:${Ug(r.fields[a])}`;return s+"}"}(t.mapValue):Ae()}function Od(t){switch(Ss(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tf(t);return e?16+Od(e):16;case 5:return 2*t.stringValue.length;case 6:return Ts(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,o)=>s+Od(o),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return Ds(i.fields,(o,a)=>{s+=o.length+Od(a)}),s}(t.mapValue);default:throw Ae()}}function Bg(t){return!!t&&"integerValue"in t}function Hy(t){return!!t&&"arrayValue"in t}function Lb(t){return!!t&&"nullValue"in t}function Ob(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function jd(t){return!!t&&"mapValue"in t}function gV(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[W1])===null||r===void 0?void 0:r.stringValue)===q1}function eu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ds(t.mapValue.fields,(r,i)=>e.mapValue.fields[r]=eu(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=eu(t.arrayValue.values[r]);return e}return Object.assign({},t)}function vV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===mV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.value=e}static empty(){return new Un({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let i=0;i<e.length-1;++i)if(r=(r.mapValue.fields||{})[e.get(i)],!jd(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=eu(r)}setAll(e){let r=on.emptyPath(),i={},s=[];e.forEach((a,l)=>{if(!r.isImmediateParentOf(l)){const u=this.getFieldsMap(r);this.applyChanges(u,i,s),i={},s=[],r=l.popLast()}a?i[l.lastSegment()]=eu(a):s.push(l.lastSegment())});const o=this.getFieldsMap(r);this.applyChanges(o,i,s)}delete(e){const r=this.field(e.popLast());jd(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return ri(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=r.mapValue.fields[e.get(i)];jd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(i)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,i){Ds(r,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new Un(eu(this.value))}}function G1(t){const e=[];return Ds(t.fields,(r,i)=>{const s=new on([r]);if(jd(i)){const o=G1(i.mapValue).fields;if(o.length===0)e.push(s);else for(const a of o)e.push(s.child(a))}else e.push(s)}),new Xn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,r,i,s,o,a,l){this.key=e,this.documentType=r,this.version=i,this.readTime=s,this.createTime=o,this.data=a,this.documentState=l}static newInvalidDocument(e){return new bn(e,0,Ne.min(),Ne.min(),Ne.min(),Un.empty(),0)}static newFoundDocument(e,r,i,s){return new bn(e,1,r,Ne.min(),i,s,0)}static newNoDocument(e,r){return new bn(e,2,r,Ne.min(),Ne.min(),Un.empty(),0)}static newUnknownDocument(e,r){return new bn(e,3,r,Ne.min(),Ne.min(),Un.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof bn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new bn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,r){this.position=e,this.inclusive=r}}function jb(t,e,r){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],a=t.position[s];if(o.field.isKeyField()?i=Se.comparator(Se.fromName(a.referenceValue),r.key):i=Ia(a,r.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function Vb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!ri(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,r="asc"){this.field=e,this.dir=r}}function yV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{}class Ut extends K1{constructor(e,r,i){super(),this.field=e,this.op=r,this.value=i}static create(e,r,i){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,i):new wV(e,r,i):r==="array-contains"?new EV(e,i):r==="in"?new TV(e,i):r==="not-in"?new SV(e,i):r==="array-contains-any"?new IV(e,i):new Ut(e,r,i)}static createKeyFieldInFilter(e,r,i){return r==="in"?new bV(e,i):new xV(e,i)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(Ia(r,this.value)):r!==null&&Ss(this.value)===Ss(r)&&this.matchesComparison(Ia(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ae()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ii extends K1{constructor(e,r){super(),this.filters=e,this.op=r,this.ce=null}static create(e,r){return new ii(e,r)}matches(e){return Y1(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Y1(t){return t.op==="and"}function X1(t){return _V(t)&&Y1(t)}function _V(t){for(const e of t.filters)if(e instanceof ii)return!1;return!0}function $g(t){if(t instanceof Ut)return t.field.canonicalString()+t.op.toString()+ka(t.value);if(X1(t))return t.filters.map(e=>$g(e)).join(",");{const e=t.filters.map(r=>$g(r)).join(",");return`${t.op}(${e})`}}function Q1(t,e){return t instanceof Ut?function(i,s){return s instanceof Ut&&i.op===s.op&&i.field.isEqual(s.field)&&ri(i.value,s.value)}(t,e):t instanceof ii?function(i,s){return s instanceof ii&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,a,l)=>o&&Q1(a,s.filters[l]),!0):!1}(t,e):void Ae()}function J1(t){return t instanceof Ut?function(r){return`${r.field.canonicalString()} ${r.op} ${ka(r.value)}`}(t):t instanceof ii?function(r){return r.op.toString()+" {"+r.getFilters().map(J1).join(" ,")+"}"}(t):"Filter"}class wV extends Ut{constructor(e,r,i){super(e,r,i),this.key=Se.fromName(i.referenceValue)}matches(e){const r=Se.comparator(e.key,this.key);return this.matchesComparison(r)}}class bV extends Ut{constructor(e,r){super(e,"in",r),this.keys=Z1("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class xV extends Ut{constructor(e,r){super(e,"not-in",r),this.keys=Z1("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Z1(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(i=>Se.fromName(i.referenceValue))}class EV extends Ut{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Hy(r)&&Ru(r.arrayValue,this.value)}}class TV extends Ut{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Ru(this.value.arrayValue,r)}}class SV extends Ut{constructor(e,r){super(e,"not-in",r)}matches(e){if(Ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Ru(this.value.arrayValue,r)}}class IV extends Ut{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Hy(r)||!r.arrayValue.values)&&r.arrayValue.values.some(i=>Ru(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kV{constructor(e,r=null,i=[],s=[],o=null,a=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=a,this.endAt=l,this.le=null}}function Fb(t,e=null,r=[],i=[],s=null,o=null,a=null){return new kV(t,e,r,i,s,o,a)}function Wy(t){const e=De(t);if(e.le===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(i=>$g(i)).join(","),r+="|ob:",r+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Ef(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>ka(i)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>ka(i)).join(",")),e.le=r}return e.le}function qy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!yV(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!Q1(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Vb(t.startAt,e.startAt)&&Vb(t.endAt,e.endAt)}function zg(t){return Se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,r=null,i=[],s=[],o=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function CV(t,e,r,i,s,o,a,l){return new Sf(t,e,r,i,s,o,a,l)}function Gy(t){return new Sf(t)}function Ub(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function AV(t){return t.collectionGroup!==null}function tu(t){const e=De(t);if(e.he===null){e.he=[];const r=new Set;for(const o of e.explicitOrderBy)e.he.push(o),r.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new zt(on.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(o=>{r.has(o.canonicalString())||o.isKeyField()||e.he.push(new Ah(o,i))}),r.has(on.keyField().canonicalString())||e.he.push(new Ah(on.keyField(),i))}return e.he}function Zr(t){const e=De(t);return e.Pe||(e.Pe=PV(e,tu(t))),e.Pe}function PV(t,e){if(t.limitType==="F")return Fb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new Ah(s.field,o)});const r=t.endAt?new Ch(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ch(t.startAt.position,t.startAt.inclusive):null;return Fb(t.path,t.collectionGroup,e,t.filters,t.limit,r,i)}}function Hg(t,e,r){return new Sf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function If(t,e){return qy(Zr(t),Zr(e))&&t.limitType===e.limitType}function ek(t){return`${Wy(Zr(t))}|lt:${t.limitType}`}function Uo(t){return`Query(target=${function(r){let i=r.path.canonicalString();return r.collectionGroup!==null&&(i+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(i+=`, filters: [${r.filters.map(s=>J1(s)).join(", ")}]`),Ef(r.limit)||(i+=", limit: "+r.limit),r.orderBy.length>0&&(i+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(i+=", startAt: ",i+=r.startAt.inclusive?"b:":"a:",i+=r.startAt.position.map(s=>ka(s)).join(",")),r.endAt&&(i+=", endAt: ",i+=r.endAt.inclusive?"a:":"b:",i+=r.endAt.position.map(s=>ka(s)).join(",")),`Target(${i})`}(Zr(t))}; limitType=${t.limitType})`}function kf(t,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):Se.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,s){for(const o of tu(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(a,l,u){const c=jb(a,l,u);return a.inclusive?c<=0:c<0}(i.startAt,tu(i),s)||i.endAt&&!function(a,l,u){const c=jb(a,l,u);return a.inclusive?c>=0:c>0}(i.endAt,tu(i),s))}(t,e)}function RV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tk(t){return(e,r)=>{let i=!1;for(const s of tu(t)){const o=NV(s,e,r);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function NV(t,e,r){const i=t.field.isKeyField()?Se.comparator(e.key,r.key):function(o,a,l){const u=a.data.field(o),c=l.data.field(o);return u!==null&&c!==null?Ia(u,c):Ae()}(t.field,e,r);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Ae()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,r){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,r]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[r]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ds(this.inner,(r,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return F1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV=new kt(Se.comparator);function Pi(){return MV}const nk=new kt(Se.comparator);function Fl(...t){let e=nk;for(const r of t)e=e.insert(r.key,r);return e}function rk(t){let e=nk;return t.forEach((r,i)=>e=e.insert(r,i.overlayedDocument)),e}function Zs(){return nu()}function ik(){return nu()}function nu(){return new wo(t=>t.toString(),(t,e)=>t.isEqual(e))}const LV=new kt(Se.comparator),OV=new zt(Se.comparator);function qe(...t){let e=OV;for(const r of t)e=e.add(r);return e}const jV=new zt(Ke);function VV(){return jV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sh(e)?"-0":e}}function sk(t){return{integerValue:""+t}}function FV(t,e){return cV(e)?sk(e):Ky(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(){this._=void 0}}function UV(t,e,r){return t instanceof Ph?function(s,o){const a={fields:{[$1]:{stringValue:B1},[H1]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&zy(o)&&(o=Tf(o)),o&&(a.fields[z1]=o),{mapValue:a}}(r,e):t instanceof Nu?ak(t,e):t instanceof Du?lk(t,e):function(s,o){const a=ok(s,o),l=Bb(a)+Bb(s.Ie);return Bg(a)&&Bg(s.Ie)?sk(l):Ky(s.serializer,l)}(t,e)}function BV(t,e,r){return t instanceof Nu?ak(t,e):t instanceof Du?lk(t,e):r}function ok(t,e){return t instanceof Rh?function(i){return Bg(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class Ph extends Cf{}class Nu extends Cf{constructor(e){super(),this.elements=e}}function ak(t,e){const r=uk(e);for(const i of t.elements)r.some(s=>ri(s,i))||r.push(i);return{arrayValue:{values:r}}}class Du extends Cf{constructor(e){super(),this.elements=e}}function lk(t,e){let r=uk(e);for(const i of t.elements)r=r.filter(s=>!ri(s,i));return{arrayValue:{values:r}}}class Rh extends Cf{constructor(e,r){super(),this.serializer=e,this.Ie=r}}function Bb(t){return Dt(t.integerValue||t.doubleValue)}function uk(t){return Hy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function $V(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Nu&&s instanceof Nu||i instanceof Du&&s instanceof Du?Sa(i.elements,s.elements,ri):i instanceof Rh&&s instanceof Rh?ri(i.Ie,s.Ie):i instanceof Ph&&s instanceof Ph}(t.transform,e.transform)}class zV{constructor(e,r){this.version=e,this.transformResults=r}}class ei{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new ei}static exists(e){return new ei(void 0,e)}static updateTime(e){return new ei(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Af{}function ck(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hk(t.key,ei.none()):new ec(t.key,t.data,ei.none());{const r=t.data,i=Un.empty();let s=new zt(on.comparator);for(let o of e.fields)if(!s.has(o)){let a=r.field(o);a===null&&o.length>1&&(o=o.popLast(),a=r.field(o)),a===null?i.delete(o):i.set(o,a),s=s.add(o)}return new Ms(t.key,i,new Xn(s.toArray()),ei.none())}}function HV(t,e,r){t instanceof ec?function(s,o,a){const l=s.value.clone(),u=zb(s.fieldTransforms,o,a.transformResults);l.setAll(u),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Ms?function(s,o,a){if(!Vd(s.precondition,o))return void o.convertToUnknownDocument(a.version);const l=zb(s.fieldTransforms,o,a.transformResults),u=o.data;u.setAll(dk(s)),u.setAll(l),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,r):function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function ru(t,e,r,i){return t instanceof ec?function(o,a,l,u){if(!Vd(o.precondition,a))return l;const c=o.value.clone(),h=Hb(o.fieldTransforms,u,a);return c.setAll(h),a.convertToFoundDocument(a.version,c).setHasLocalMutations(),null}(t,e,r,i):t instanceof Ms?function(o,a,l,u){if(!Vd(o.precondition,a))return l;const c=Hb(o.fieldTransforms,u,a),h=a.data;return h.setAll(dk(o)),h.setAll(c),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(f=>f.field))}(t,e,r,i):function(o,a,l){return Vd(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,r)}function WV(t,e){let r=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),o=ok(i.transform,s||null);o!=null&&(r===null&&(r=Un.empty()),r.set(i.field,o))}return r||null}function $b(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Sa(i,s,(o,a)=>$V(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ec extends Af{constructor(e,r,i,s=[]){super(),this.key=e,this.value=r,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ms extends Af{constructor(e,r,i,s,o=[]){super(),this.key=e,this.data=r,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function dk(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const i=t.data.field(r);e.set(r,i)}}),e}function zb(t,e,r){const i=new Map;it(t.length===r.length);for(let s=0;s<r.length;s++){const o=t[s],a=o.transform,l=e.data.field(o.field);i.set(o.field,BV(a,l,r[s]))}return i}function Hb(t,e,r){const i=new Map;for(const s of t){const o=s.transform,a=r.data.field(s.field);i.set(s.field,UV(o,a,e))}return i}class hk extends Af{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qV extends Af{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,r,i,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,r){const i=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&HV(o,e,i[s])}}applyToLocalView(e,r){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(r=ru(i,e,r,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(r=ru(i,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const i=ik();return this.mutations.forEach(s=>{const o=e.get(s.key),a=o.overlayedDocument;let l=this.applyToLocalView(a,o.mutatedFields);l=r.has(s.key)?null:l;const u=ck(a,l);u!==null&&i.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(Ne.min())}),i}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),qe())}isEqual(e){return this.batchId===e.batchId&&Sa(this.mutations,e.mutations,(r,i)=>$b(r,i))&&Sa(this.baseMutations,e.baseMutations,(r,i)=>$b(r,i))}}class Yy{constructor(e,r,i,s){this.batch=e,this.commitVersion=r,this.mutationResults=i,this.docVersions=s}static from(e,r,i){it(e.mutations.length===i.length);let s=function(){return LV}();const o=e.mutations;for(let a=0;a<o.length;a++)s=s.insert(o[a].key,i[a].version);return new Yy(e,r,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lt,Qe;function XV(t){switch(t){case te.OK:return Ae();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ae()}}function fk(t){if(t===void 0)return Ai("GRPC error has no .code"),te.UNKNOWN;switch(t){case Lt.OK:return te.OK;case Lt.CANCELLED:return te.CANCELLED;case Lt.UNKNOWN:return te.UNKNOWN;case Lt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Lt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Lt.INTERNAL:return te.INTERNAL;case Lt.UNAVAILABLE:return te.UNAVAILABLE;case Lt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Lt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Lt.NOT_FOUND:return te.NOT_FOUND;case Lt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Lt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Lt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Lt.ABORTED:return te.ABORTED;case Lt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Lt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Lt.DATA_LOSS:return te.DATA_LOSS;default:return Ae()}}(Qe=Lt||(Lt={}))[Qe.OK=0]="OK",Qe[Qe.CANCELLED=1]="CANCELLED",Qe[Qe.UNKNOWN=2]="UNKNOWN",Qe[Qe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qe[Qe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qe[Qe.NOT_FOUND=5]="NOT_FOUND",Qe[Qe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qe[Qe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qe[Qe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qe[Qe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qe[Qe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qe[Qe.ABORTED=10]="ABORTED",Qe[Qe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qe[Qe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qe[Qe.INTERNAL=13]="INTERNAL",Qe[Qe.UNAVAILABLE=14]="UNAVAILABLE",Qe[Qe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=new ps([4294967295,4294967295],0);function Wb(t){const e=QV().encode(t),r=new P1;return r.update(e),new Uint8Array(r.digest())}function qb(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ps([r,i],0),new ps([s,o],0)]}class Xy{constructor(e,r,i){if(this.bitmap=e,this.padding=r,this.hashCount=i,r<0||r>=8)throw new Ul(`Invalid padding: ${r}`);if(i<0)throw new Ul(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ul(`Invalid hash count: ${i}`);if(e.length===0&&r!==0)throw new Ul(`Invalid padding when bitmap length is 0: ${r}`);this.Ee=8*e.length-r,this.de=ps.fromNumber(this.Ee)}Ae(e,r,i){let s=e.add(r.multiply(ps.fromNumber(i)));return s.compare(JV)===1&&(s=new ps([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const r=Wb(e),[i,s]=qb(r);for(let o=0;o<this.hashCount;o++){const a=this.Ae(i,s,o);if(!this.Re(a))return!1}return!0}static create(e,r,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new Xy(o,s,r);return i.forEach(l=>a.insert(l)),a}insert(e){if(this.Ee===0)return;const r=Wb(e),[i,s]=qb(r);for(let o=0;o<this.hashCount;o++){const a=this.Ae(i,s,o);this.Ve(a)}}Ve(e){const r=Math.floor(e/8),i=e%8;this.bitmap[r]|=1<<i}}class Ul extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,r,i,s,o){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,r,i){const s=new Map;return s.set(e,tc.createSynthesizedTargetChangeForCurrentChange(e,r,i)),new Pf(Ne.min(),s,new kt(Ke),Pi(),qe())}}class tc{constructor(e,r,i,s,o){this.resumeToken=e,this.current=r,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,r,i){return new tc(i,r,qe(),qe(),qe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(e,r,i,s){this.me=e,this.removedTargetIds=r,this.key=i,this.fe=s}}class pk{constructor(e,r){this.targetId=e,this.ge=r}}class mk{constructor(e,r,i=dn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=i,this.cause=s}}class Gb{constructor(){this.pe=0,this.ye=Kb(),this.we=dn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=qe(),r=qe(),i=qe();return this.ye.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:i=i.add(s);break;default:Ae()}}),new tc(this.we,this.Se,e,r,i)}Me(){this.be=!1,this.ye=Kb()}xe(e,r){this.be=!0,this.ye=this.ye.insert(e,r)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,it(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class ZV{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Pi(),this.$e=od(),this.Ke=od(),this.Ue=new kt(Ke)}We(e){for(const r of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(r,e.fe):this.ze(r,e.key,e.fe);for(const r of e.removedTargetIds)this.ze(r,e.key,e.fe)}je(e){this.forEachTarget(e,r=>{const i=this.He(r);switch(e.state){case 0:this.Je(r)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(r);break;case 3:this.Je(r)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(r)&&(this.Ye(r),i.Ce(e.resumeToken));break;default:Ae()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.qe.forEach((i,s)=>{this.Je(s)&&r(s)})}Ze(e){const r=e.targetId,i=e.ge.count,s=this.Xe(r);if(s){const o=s.target;if(zg(o))if(i===0){const a=new Se(o.path);this.ze(r,a,bn.newNoDocument(a,Ne.min()))}else it(i===1);else{const a=this.et(r);if(a!==i){const l=this.tt(e),u=l?this.nt(l,e,a):1;if(u!==0){this.Ye(r);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(r,c)}}}}}tt(e){const r=e.ge.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=r;let a,l;try{a=Ts(i).toUint8Array()}catch(u){if(u instanceof U1)return Ta("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Xy(a,s,o)}catch(u){return Ta(u instanceof Ul?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ee===0?null:l}nt(e,r,i){return r.ge.count===i-this.st(e,r.targetId)?0:2}st(e,r){const i=this.ke.getRemoteKeysForTarget(r);let s=0;return i.forEach(o=>{const a=this.ke.it(),l=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.ze(r,o,null),s++)}),s}ot(e){const r=new Map;this.qe.forEach((o,a)=>{const l=this.Xe(a);if(l){if(o.current&&zg(l.target)){const u=new Se(l.target.path);this._t(u).has(a)||this.ut(a,u)||this.ze(a,u,bn.newNoDocument(u,e))}o.ve&&(r.set(a,o.Fe()),o.Me())}});let i=qe();this.Ke.forEach((o,a)=>{let l=!0;a.forEachWhile(u=>{const c=this.Xe(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(o))}),this.Qe.forEach((o,a)=>a.setReadTime(e));const s=new Pf(e,r,this.Ue,this.Qe,i);return this.Qe=Pi(),this.$e=od(),this.Ke=od(),this.Ue=new kt(Ke),s}Ge(e,r){if(!this.Je(e))return;const i=this.ut(e,r.key)?2:0;this.He(e).xe(r.key,i),this.Qe=this.Qe.insert(r.key,r),this.$e=this.$e.insert(r.key,this._t(r.key).add(e)),this.Ke=this.Ke.insert(r.key,this.ct(r.key).add(e))}ze(e,r,i){if(!this.Je(e))return;const s=this.He(e);this.ut(e,r)?s.xe(r,1):s.Oe(r),this.Ke=this.Ke.insert(r,this.ct(r).delete(e)),this.Ke=this.Ke.insert(r,this.ct(r).add(e)),i&&(this.Qe=this.Qe.insert(r,i))}removeTarget(e){this.qe.delete(e)}et(e){const r=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let r=this.qe.get(e);return r||(r=new Gb,this.qe.set(e,r)),r}ct(e){let r=this.Ke.get(e);return r||(r=new zt(Ke),this.Ke=this.Ke.insert(e,r)),r}_t(e){let r=this.$e.get(e);return r||(r=new zt(Ke),this.$e=this.$e.insert(e,r)),r}Je(e){const r=this.Xe(e)!==null;return r||ge("WatchChangeAggregator","Detected inactive target",e),r}Xe(e){const r=this.qe.get(e);return r&&r.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Gb),this.ke.getRemoteKeysForTarget(e).forEach(r=>{this.ze(e,r,null)})}ut(e,r){return this.ke.getRemoteKeysForTarget(e).has(r)}}function od(){return new kt(Se.comparator)}function Kb(){return new kt(Se.comparator)}const eF={asc:"ASCENDING",desc:"DESCENDING"},tF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},nF={and:"AND",or:"OR"};class rF{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Wg(t,e){return t.useProto3Json||Ef(e)?e:{value:e}}function Nh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iF(t,e){return Nh(t,e.toTimestamp())}function ti(t){return it(!!t),Ne.fromTimestamp(function(r){const i=Es(r);return new $t(i.seconds,i.nanos)}(t))}function Qy(t,e){return qg(t,e).canonicalString()}function qg(t,e){const r=function(s){return new wt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function vk(t){const e=wt.fromString(t);return it(xk(e)),e}function Gg(t,e){return Qy(t.databaseId,e.path)}function tm(t,e){const r=vk(e);if(r.get(1)!==t.databaseId.projectId)throw new Ee(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Ee(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new Se(_k(r))}function yk(t,e){return Qy(t.databaseId,e)}function sF(t){const e=vk(t);return e.length===4?wt.emptyPath():_k(e)}function Kg(t){return new wt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _k(t){return it(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Yb(t,e,r){return{name:Gg(t,e),fields:r.value.mapValue.fields}}function oF(t,e){let r;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ae()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(c,h){return c.useProto3Json?(it(h===void 0||typeof h=="string"),dn.fromBase64String(h||"")):(it(h===void 0||h instanceof Buffer||h instanceof Uint8Array),dn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(c){const h=c.code===void 0?te.UNKNOWN:fk(c.code);return new Ee(h,c.message||"")}(a);r=new mk(i,s,o,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=tm(t,i.document.name),o=ti(i.document.updateTime),a=i.document.createTime?ti(i.document.createTime):Ne.min(),l=new Un({mapValue:{fields:i.document.fields}}),u=bn.newFoundDocument(s,o,a,l),c=i.targetIds||[],h=i.removedTargetIds||[];r=new Fd(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=tm(t,i.document),o=i.readTime?ti(i.readTime):Ne.min(),a=bn.newNoDocument(s,o),l=i.removedTargetIds||[];r=new Fd([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=tm(t,i.document),o=i.removedTargetIds||[];r=new Fd([],o,s,null)}else{if(!("filter"in e))return Ae();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,a=new YV(s,o),l=i.targetId;r=new pk(l,a)}}return r}function aF(t,e){let r;if(e instanceof ec)r={update:Yb(t,e.key,e.value)};else if(e instanceof hk)r={delete:Gg(t,e.key)};else if(e instanceof Ms)r={update:Yb(t,e.key,e.data),updateMask:gF(e.fieldMask)};else{if(!(e instanceof qV))return Ae();r={verify:Gg(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(i=>function(o,a){const l=a.transform;if(l instanceof Ph)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Nu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Du)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Rh)return{fieldPath:a.field.canonicalString(),increment:l.Ie};throw Ae()}(0,i))),e.precondition.isNone||(r.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:iF(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:Ae()}(t,e.precondition)),r}function lF(t,e){return t&&t.length>0?(it(e!==void 0),t.map(r=>function(s,o){let a=s.updateTime?ti(s.updateTime):ti(o);return a.isEqual(Ne.min())&&(a=ti(o)),new zV(a,s.transformResults||[])}(r,e))):[]}function uF(t,e){return{documents:[yk(t,e.path)]}}function cF(t,e){const r={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),r.structuredQuery.from=[{collectionId:i.lastSegment()}]),r.parent=yk(t,s);const o=function(c){if(c.length!==0)return bk(ii.create(c,"and"))}(e.filters);o&&(r.structuredQuery.where=o);const a=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:Bo(p.field),direction:fF(p.dir)}}(h))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const l=Wg(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ht:r,parent:s}}function dF(t){let e=sF(t.parent);const r=t.structuredQuery,i=r.from?r.from.length:0;let s=null;if(i>0){it(i===1);const h=r.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let o=[];r.where&&(o=function(f){const p=wk(f);return p instanceof ii&&X1(p)?p.getFilters():[p]}(r.where));let a=[];r.orderBy&&(a=function(f){return f.map(p=>function(b){return new Ah($o(b.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(p))}(r.orderBy));let l=null;r.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,Ef(p)?null:p}(r.limit));let u=null;r.startAt&&(u=function(f){const p=!!f.before,g=f.values||[];return new Ch(g,p)}(r.startAt));let c=null;return r.endAt&&(c=function(f){const p=!f.before,g=f.values||[];return new Ch(g,p)}(r.endAt)),CV(e,s,a,o,l,"F",u,c)}function hF(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ae()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function wk(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const i=$o(r.unaryFilter.field);return Ut.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=$o(r.unaryFilter.field);return Ut.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=$o(r.unaryFilter.field);return Ut.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=$o(r.unaryFilter.field);return Ut.create(a,"!=",{nullValue:"NULL_VALUE"});default:return Ae()}}(t):t.fieldFilter!==void 0?function(r){return Ut.create($o(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ae()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return ii.create(r.compositeFilter.filters.map(i=>wk(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ae()}}(r.compositeFilter.op))}(t):Ae()}function fF(t){return eF[t]}function pF(t){return tF[t]}function mF(t){return nF[t]}function Bo(t){return{fieldPath:t.canonicalString()}}function $o(t){return on.fromServerFormat(t.fieldPath)}function bk(t){return t instanceof Ut?function(r){if(r.op==="=="){if(Ob(r.value))return{unaryFilter:{field:Bo(r.field),op:"IS_NAN"}};if(Lb(r.value))return{unaryFilter:{field:Bo(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Ob(r.value))return{unaryFilter:{field:Bo(r.field),op:"IS_NOT_NAN"}};if(Lb(r.value))return{unaryFilter:{field:Bo(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bo(r.field),op:pF(r.op),value:r.value}}}(t):t instanceof ii?function(r){const i=r.getFilters().map(s=>bk(s));return i.length===1?i[0]:{compositeFilter:{op:mF(r.op),filters:i}}}(t):Ae()}function gF(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function xk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e,r,i,s,o=Ne.min(),a=Ne.min(),l=dn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new ts(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ts(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(e){this.Tt=e}}function yF(t){const e=dF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Hg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(){this.Tn=new wF}addToCollectionParentIndex(e,r){return this.Tn.add(r),J.resolve()}getCollectionParents(e,r){return J.resolve(this.Tn.getEntries(r))}addFieldIndex(e,r){return J.resolve()}deleteFieldIndex(e,r){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,r){return J.resolve()}getDocumentsMatchingTarget(e,r){return J.resolve(null)}getIndexType(e,r){return J.resolve(0)}getFieldIndexes(e,r){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,r){return J.resolve(xs.min())}getMinOffsetFromCollectionGroup(e,r){return J.resolve(xs.min())}updateCollectionGroup(e,r,i){return J.resolve()}updateIndexEntries(e,r){return J.resolve()}}class wF{constructor(){this.index={}}add(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r]||new zt(wt.comparator),o=!s.has(i);return this.index[r]=s.add(i),o}has(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r];return s&&s.has(i)}getEntries(e){return(this.index[e]||new zt(wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ek=41943040;class Vn{static withCacheSize(e){return new Vn(e,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Vn.DEFAULT_COLLECTION_PERCENTILE=10,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vn.DEFAULT=new Vn(Ek,Vn.DEFAULT_COLLECTION_PERCENTILE,Vn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vn.DISABLED=new Vn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new Ca(0)}static Un(){return new Ca(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="LruGarbageCollector",bF=1048576;function Jb([t,e],[r,i]){const s=Ke(t,r);return s===0?Ke(e,i):s}class xF{constructor(e){this.Hn=e,this.buffer=new zt(Jb),this.Jn=0}Yn(){return++this.Jn}Zn(e){const r=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(r);else{const i=this.buffer.last();Jb(r,i)<0&&(this.buffer=this.buffer.delete(i).add(r))}}get maxValue(){return this.buffer.last()[0]}}class EF{constructor(e,r,i){this.garbageCollector=e,this.asyncQueue=r,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ge(Qb,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Xa(r)?ge(Qb,"Ignoring IndexedDB error during garbage collection: ",r):await Ya(r)}await this.er(3e5)})}}class TF{constructor(e,r){this.tr=e,this.params=r}calculateTargetCount(e,r){return this.tr.nr(e).next(i=>Math.floor(r/100*i))}nthSequenceNumber(e,r){if(r===0)return J.resolve(xf.ae);const i=new xF(r);return this.tr.forEachTarget(e,s=>i.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>i.Zn(s))).next(()=>i.maxValue)}removeTargets(e,r,i){return this.tr.removeTargets(e,r,i)}removeOrphanedDocuments(e,r){return this.tr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(Xb)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xb):this.ir(e,r))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,r){let i,s,o,a,l,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(i=f,l=Date.now(),this.removeTargets(e,i,r))).next(f=>(o=f,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(f=>(c=Date.now(),Fo()<=We.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${o} targets in `+(u-l)+`ms
	Removed ${f} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:f})))}}function SF(t,e){return new TF(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{constructor(){this.changes=new wo(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const i=this.changes.get(r);return i!==void 0?J.resolve(i):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e,r,i,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,r){let i=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(i!==null&&ru(i.mutation,s,Xn.empty(),$t.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.getLocalViewOfDocuments(e,i,qe()).next(()=>i))}getLocalViewOfDocuments(e,r,i=qe()){const s=Zs();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,i).next(o=>{let a=Fl();return o.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const i=Zs();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,qe()))}populateOverlays(e,r,i){const s=[];return i.forEach(o=>{r.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((a,l)=>{r.set(a,l)})})}computeViews(e,r,i,s){let o=Pi();const a=nu(),l=function(){return nu()}();return r.forEach((u,c)=>{const h=i.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Ms)?o=o.insert(c.key,c):h!==void 0?(a.set(c.key,h.mutation.getFieldMask()),ru(h.mutation,c,h.mutation.getFieldMask(),$t.now())):a.set(c.key,Xn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((c,h)=>a.set(c,h)),r.forEach((c,h)=>{var f;return l.set(c,new kF(h,(f=a.get(c))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,r){const i=nu();let s=new kt((a,l)=>a-l),o=qe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const l of a)l.keys().forEach(u=>{const c=r.get(u);if(c===null)return;let h=i.get(u)||Xn.empty();h=l.applyToLocalView(c,h),i.set(u,h);const f=(s.get(l.batchId)||qe()).add(u);s=s.insert(l.batchId,f)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,h=u.value,f=ik();h.forEach(p=>{if(!o.has(p)){const g=ck(r.get(p),i.get(p));g!==null&&f.set(p,g),o=o.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,c,f))}return J.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,r,i,s){return function(a){return Se.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):AV(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,i,s):this.getDocumentsMatchingCollectionQuery(e,r,i,s)}getNextDocuments(e,r,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,i,s).next(o=>{const a=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,i.largestBatchId,s-o.size):J.resolve(Zs());let l=Cu,u=o;return a.next(c=>J.forEach(c,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),o.get(h)?J.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,u,c,qe())).next(h=>({batchId:l,changes:rk(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new Se(r)).next(i=>{let s=Fl();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,i,s){const o=r.collectionGroup;let a=Fl();return this.indexManager.getCollectionParents(e,o).next(l=>J.forEach(l,u=>{const c=function(f,p){return new Sf(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,c,i,s).next(h=>{h.forEach((f,p)=>{a=a.insert(f,p)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,i.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,i,o,s))).next(a=>{o.forEach((u,c)=>{const h=c.getKey();a.get(h)===null&&(a=a.insert(h,bn.newInvalidDocument(h)))});let l=Fl();return a.forEach((u,c)=>{const h=o.get(u);h!==void 0&&ru(h.mutation,c,Xn.empty(),$t.now()),kf(r,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,r){return J.resolve(this.dr.get(r))}saveBundleMetadata(e,r){return this.dr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:ti(s.createTime)}}(r)),J.resolve()}getNamedQuery(e,r){return J.resolve(this.Ar.get(r))}saveNamedQuery(e,r){return this.Ar.set(r.name,function(s){return{name:s.name,query:yF(s.bundledQuery),readTime:ti(s.readTime)}}(r)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(){this.overlays=new kt(Se.comparator),this.Rr=new Map}getOverlay(e,r){return J.resolve(this.overlays.get(r))}getOverlays(e,r){const i=Zs();return J.forEach(r,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,r,i){return i.forEach((s,o)=>{this.Et(e,r,o)}),J.resolve()}removeOverlaysForBatchId(e,r,i){const s=this.Rr.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Rr.delete(i)),J.resolve()}getOverlaysForCollection(e,r,i){const s=Zs(),o=r.length+1,a=new Se(r.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===o&&u.largestBatchId>i&&s.set(u.getKey(),u)}return J.resolve(s)}getOverlaysForCollectionGroup(e,r,i,s){let o=new kt((c,h)=>c-h);const a=this.overlays.getIterator();for(;a.hasNext();){const c=a.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>i){let h=o.get(c.largestBatchId);h===null&&(h=Zs(),o=o.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const l=Zs(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>l.set(c,h)),!(l.size()>=s)););return J.resolve(l)}Et(e,r,i){const s=this.overlays.get(i.key);if(s!==null){const a=this.Rr.get(s.largestBatchId).delete(i.key);this.Rr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new KV(r,i));let o=this.Rr.get(r);o===void 0&&(o=qe(),this.Rr.set(r,o)),this.Rr.set(r,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(){this.sessionToken=dn.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(){this.Vr=new zt(Gt.mr),this.gr=new zt(Gt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,r){const i=new Gt(e,r);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,r){e.forEach(i=>this.addReference(i,r))}removeReference(e,r){this.wr(new Gt(e,r))}Sr(e,r){e.forEach(i=>this.removeReference(i,r))}br(e){const r=new Se(new wt([])),i=new Gt(r,e),s=new Gt(r,e+1),o=[];return this.gr.forEachInRange([i,s],a=>{this.wr(a),o.push(a.key)}),o}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const r=new Se(new wt([])),i=new Gt(r,e),s=new Gt(r,e+1);let o=qe();return this.gr.forEachInRange([i,s],a=>{o=o.add(a.key)}),o}containsKey(e){const r=new Gt(e,0),i=this.Vr.firstAfterOrEqual(r);return i!==null&&e.isEqual(i.key)}}class Gt{constructor(e,r){this.key=e,this.Cr=r}static mr(e,r){return Se.comparator(e.key,r.key)||Ke(e.Cr,r.Cr)}static pr(e,r){return Ke(e.Cr,r.Cr)||Se.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Fr=1,this.Mr=new zt(Gt.mr)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,i,s){const o=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new GV(o,r,i,s);this.mutationQueue.push(a);for(const l of s)this.Mr=this.Mr.add(new Gt(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return J.resolve(a)}lookupMutationBatch(e,r){return J.resolve(this.Or(r))}getNextMutationBatchAfterBatchId(e,r){const i=r+1,s=this.Nr(i),o=s<0?0:s;return J.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?$y:this.Fr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const i=new Gt(r,0),s=new Gt(r,Number.POSITIVE_INFINITY),o=[];return this.Mr.forEachInRange([i,s],a=>{const l=this.Or(a.Cr);o.push(l)}),J.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,r){let i=new zt(Ke);return r.forEach(s=>{const o=new Gt(s,0),a=new Gt(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([o,a],l=>{i=i.add(l.Cr)})}),J.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,r){const i=r.path,s=i.length+1;let o=i;Se.isDocumentKey(o)||(o=o.child(""));const a=new Gt(new Se(o),0);let l=new zt(Ke);return this.Mr.forEachWhile(u=>{const c=u.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(l=l.add(u.Cr)),!0)},a),J.resolve(this.Br(l))}Br(e){const r=[];return e.forEach(i=>{const s=this.Or(i);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){it(this.Lr(r.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return J.forEach(r.mutations,s=>{const o=new Gt(s.key,r.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,r){const i=new Gt(r,0),s=this.Mr.firstAfterOrEqual(i);return J.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}Lr(e,r){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const r=this.Nr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e){this.kr=e,this.docs=function(){return new kt(Se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const i=r.key,s=this.docs.get(i),o=s?s.size:0,a=this.kr(r);return this.docs=this.docs.insert(i,{document:r.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const i=this.docs.get(r);return J.resolve(i?i.document.mutableCopy():bn.newInvalidDocument(r))}getEntries(e,r){let i=Pi();return r.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():bn.newInvalidDocument(s))}),J.resolve(i)}getDocumentsMatchingQuery(e,r,i,s){let o=Pi();const a=r.path,l=new Se(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||oV(sV(h),i)<=0||(s.has(h.key)||kf(r,h))&&(o=o.insert(h.key,h.mutableCopy()))}return J.resolve(o)}getAllFromCollectionGroup(e,r,i,s){Ae()}qr(e,r){return J.forEach(this.docs,i=>r(i))}newChangeBuffer(e){return new MF(this)}getSize(e){return J.resolve(this.size)}}class MF extends IF{constructor(e){super(),this.Ir=e}applyChanges(e){const r=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?r.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(i)}),J.waitFor(r)}getFromCache(e,r){return this.Ir.getEntry(e,r)}getAllFromCache(e,r){return this.Ir.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{constructor(e){this.persistence=e,this.Qr=new wo(r=>Wy(r),qy),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Jy,this.targetCount=0,this.Ur=Ca.Kn()}forEachTarget(e,r){return this.Qr.forEach((i,s)=>r(s)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,r,i){return i&&(this.lastRemoteSnapshotVersion=i),r>this.$r&&(this.$r=r),J.resolve()}zn(e){this.Qr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Ur=new Ca(r),this.highestTargetId=r),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,r){return this.zn(r),this.targetCount+=1,J.resolve()}updateTargetData(e,r){return this.zn(r),J.resolve()}removeTargetData(e,r){return this.Qr.delete(r.target),this.Kr.br(r.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,r,i){let s=0;const o=[];return this.Qr.forEach((a,l)=>{l.sequenceNumber<=r&&i.get(l.targetId)===null&&(this.Qr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),J.waitFor(o).next(()=>s)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,r){const i=this.Qr.get(r)||null;return J.resolve(i)}addMatchingKeys(e,r,i){return this.Kr.yr(r,i),J.resolve()}removeMatchingKeys(e,r,i){this.Kr.Sr(r,i);const s=this.persistence.referenceDelegate,o=[];return s&&r.forEach(a=>{o.push(s.markPotentiallyOrphaned(e,a))}),J.waitFor(o)}removeMatchingKeysForTargetId(e,r){return this.Kr.br(r),J.resolve()}getMatchingKeysForTargetId(e,r){const i=this.Kr.vr(r);return J.resolve(i)}containsKey(e,r){return J.resolve(this.Kr.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,r){this.Wr={},this.overlays={},this.Gr=new xf(0),this.zr=!1,this.zr=!0,this.jr=new RF,this.referenceDelegate=e(this),this.Hr=new LF(this),this.indexManager=new _F,this.remoteDocumentCache=function(s){return new DF(s)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new vF(r),this.Yr=new AF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new PF,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let i=this.Wr[e.toKey()];return i||(i=new NF(r,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,r,i){ge("MemoryPersistence","Starting transaction:",e);const s=new OF(this.Gr.next());return this.referenceDelegate.Zr(),i(s).next(o=>this.referenceDelegate.Xr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}ei(e,r){return J.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,r)))}}class OF extends lV{constructor(e){super(),this.currentSequenceNumber=e}}class Zy{constructor(e){this.persistence=e,this.ti=new Jy,this.ni=null}static ri(e){return new Zy(e)}get ii(){if(this.ni)return this.ni;throw Ae()}addReference(e,r,i){return this.ti.addReference(i,r),this.ii.delete(i.toString()),J.resolve()}removeReference(e,r,i){return this.ti.removeReference(i,r),this.ii.add(i.toString()),J.resolve()}markPotentiallyOrphaned(e,r){return this.ii.add(r.toString()),J.resolve()}removeTarget(e,r){this.ti.br(r.targetId).forEach(s=>this.ii.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(o=>this.ii.add(o.toString()))}).next(()=>i.removeTargetData(e,r))}Zr(){this.ni=new Set}Xr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.ii,i=>{const s=Se.fromPath(i);return this.si(e,s).next(o=>{o||r.removeEntry(s,Ne.min())})}).next(()=>(this.ni=null,r.apply(e)))}updateLimboDocument(e,r){return this.si(e,r).next(i=>{i?this.ii.delete(r.toString()):this.ii.add(r.toString())})}Jr(e){return 0}si(e,r){return J.or([()=>J.resolve(this.ti.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.ei(e,r)])}}class Dh{constructor(e,r){this.persistence=e,this.oi=new wo(i=>dV(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=SF(this,r)}static ri(e,r){return new Dh(e,r)}Zr(){}Xr(e){return J.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}nr(e){const r=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>r.next(s=>i+s))}sr(e){let r=0;return this.rr(e,i=>{r++}).next(()=>r)}rr(e,r){return J.forEach(this.oi,(i,s)=>this.ar(e,i,s).next(o=>o?J.resolve():r(s)))}removeTargets(e,r,i){return this.persistence.getTargetCache().removeTargets(e,r,i)}removeOrphanedDocuments(e,r){let i=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.qr(e,a=>this.ar(e,a,r).next(l=>{l||(i++,o.removeEntry(a,Ne.min()))})).next(()=>o.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,r){return this.oi.set(r,e.currentSequenceNumber),J.resolve()}removeTarget(e,r){const i=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,r,i){return this.oi.set(i,e.currentSequenceNumber),J.resolve()}removeReference(e,r,i){return this.oi.set(i,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,r){return this.oi.set(r,e.currentSequenceNumber),J.resolve()}Jr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Od(e.data.value)),r}ar(e,r,i){return J.or([()=>this.persistence.ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.oi.get(r);return J.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e_{constructor(e,r,i,s){this.targetId=e,this.fromCache=r,this.Hi=i,this.Ji=s}static Yi(e,r){let i=qe(),s=qe();for(const o of r.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new e_(e,r.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return vM()?8:uV(Tn())>0?6:4}()}initialize(e,r){this.ns=e,this.indexManager=r,this.Zi=!0}getDocumentsMatchingQuery(e,r,i,s){const o={result:null};return this.rs(e,r).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ss(e,r,s,i).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new jF;return this._s(e,r,a).next(l=>{if(o.result=l,this.Xi)return this.us(e,r,a,l.size)})}).next(()=>o.result)}us(e,r,i,s){return i.documentReadCount<this.es?(Fo()<=We.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Uo(r),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),J.resolve()):(Fo()<=We.DEBUG&&ge("QueryEngine","Query:",Uo(r),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ts*s?(Fo()<=We.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Uo(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zr(r))):J.resolve())}rs(e,r){if(Ub(r))return J.resolve(null);let i=Zr(r);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Hg(r,null,"F"),i=Zr(r)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const a=qe(...o);return this.ns.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const c=this.cs(r,l);return this.ls(r,c,a,u.readTime)?this.rs(e,Hg(r,null,"F")):this.hs(e,c,r,u)}))})))}ss(e,r,i,s){return Ub(r)||s.isEqual(Ne.min())?J.resolve(null):this.ns.getDocuments(e,i).next(o=>{const a=this.cs(r,o);return this.ls(r,a,i,s)?J.resolve(null):(Fo()<=We.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Uo(r)),this.hs(e,a,r,iV(s,Cu)).next(l=>l))})}cs(e,r){let i=new zt(tk(e));return r.forEach((s,o)=>{kf(e,o)&&(i=i.add(o))}),i}ls(e,r,i,s){if(e.limit===null)return!1;if(i.size!==r.size)return!0;const o=e.limitType==="F"?r.last():r.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}_s(e,r,i){return Fo()<=We.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Uo(r)),this.ns.getDocumentsMatchingQuery(e,r,xs.min(),i)}hs(e,r,i,s){return this.ns.getDocumentsMatchingQuery(e,i,s).next(o=>(r.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_="LocalStore",FF=3e8;class UF{constructor(e,r,i,s){this.persistence=e,this.Ps=r,this.serializer=s,this.Ts=new kt(Ke),this.Is=new wo(o=>Wy(o),qy),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CF(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ts))}}function BF(t,e,r,i){return new UF(t,e,r,i)}async function Sk(t,e){const r=De(t);return await r.persistence.runTransaction("Handle user change","readonly",i=>{let s;return r.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,r.As(e),r.mutationQueue.getAllMutationBatches(i))).next(o=>{const a=[],l=[];let u=qe();for(const c of s){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of o){l.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return r.localDocuments.getDocuments(i,u).next(c=>({Rs:c,removedBatchIds:a,addedBatchIds:l}))})})}function $F(t,e){const r=De(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=r.ds.newChangeBuffer({trackRemovals:!0});return function(l,u,c,h){const f=c.batch,p=f.keys();let g=J.resolve();return p.forEach(b=>{g=g.next(()=>h.getEntry(u,b)).next(D=>{const P=c.docVersions.get(b);it(P!==null),D.version.compareTo(P)<0&&(f.applyToRemoteDocument(D,c),D.isValidDocument()&&(D.setReadTime(c.commitVersion),h.addEntry(D)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(u,f))}(r,i,e,o).next(()=>o.apply(i)).next(()=>r.mutationQueue.performConsistencyCheck(i)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=qe();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>r.localDocuments.getDocuments(i,s))})}function Ik(t){const e=De(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Hr.getLastRemoteSnapshotVersion(r))}function zF(t,e){const r=De(t),i=e.snapshotVersion;let s=r.Ts;return r.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=r.ds.newChangeBuffer({trackRemovals:!0});s=r.Ts;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(r.Hr.removeMatchingKeys(o,h.removedDocuments,f).next(()=>r.Hr.addMatchingKeys(o,h.addedDocuments,f)));let g=p.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(dn.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,i)),s=s.insert(f,g),function(D,P,x){return D.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-D.snapshotVersion.toMicroseconds()>=FF?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(p,g,h)&&l.push(r.Hr.updateTargetData(o,g))});let u=Pi(),c=qe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(o,h))}),l.push(HF(o,a,e.documentUpdates).next(h=>{u=h.Vs,c=h.fs})),!i.isEqual(Ne.min())){const h=r.Hr.getLastRemoteSnapshotVersion(o).next(f=>r.Hr.setTargetsMetadata(o,o.currentSequenceNumber,i));l.push(h)}return J.waitFor(l).next(()=>a.apply(o)).next(()=>r.localDocuments.getLocalViewOfDocuments(o,u,c)).next(()=>u)}).then(o=>(r.Ts=s,o))}function HF(t,e,r){let i=qe(),s=qe();return r.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let a=Pi();return r.forEach((l,u)=>{const c=o.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Ne.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):ge(t_,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Vs:a,fs:s}})}function WF(t,e){const r=De(t);return r.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=$y),r.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function qF(t,e){const r=De(t);return r.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return r.Hr.getTargetData(i,e).next(o=>o?(s=o,J.resolve(s)):r.Hr.allocateTargetId(i).next(a=>(s=new ts(e,a,"TargetPurposeListen",i.currentSequenceNumber),r.Hr.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=r.Ts.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Ts=r.Ts.insert(i.targetId,i),r.Is.set(e,i.targetId)),i})}async function Yg(t,e,r){const i=De(t),s=i.Ts.get(e),o=r?"readwrite":"readwrite-primary";try{r||await i.persistence.runTransaction("Release target",o,a=>i.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Xa(a))throw a;ge(t_,`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ts=i.Ts.remove(e),i.Is.delete(s.target)}function Zb(t,e,r){const i=De(t);let s=Ne.min(),o=qe();return i.persistence.runTransaction("Execute query","readwrite",a=>function(u,c,h){const f=De(u),p=f.Is.get(h);return p!==void 0?J.resolve(f.Ts.get(p)):f.Hr.getTargetData(c,h)}(i,a,Zr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(a,l.targetId).next(u=>{o=u})}).next(()=>i.Ps.getDocumentsMatchingQuery(a,e,r?s:Ne.min(),r?o:qe())).next(l=>(GF(i,RV(e),l),{documents:l,gs:o})))}function GF(t,e,r){let i=t.Es.get(e)||Ne.min();r.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.Es.set(e,i)}class ex{constructor(){this.activeTargetIds=VV()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class KF{constructor(){this.ho=new ex,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,i){}addLocalQueryTarget(e,r=!0){return r&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,r,i){this.Po[e]=r}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new ex,Promise.resolve()}handleUserChange(e,r,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YF{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="ConnectivityMonitor";class nx{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ge(tx,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ge(tx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ad=null;function Xg(){return ad===null?ad=function(){return 268435456+Math.round(2147483648*Math.random())}():ad++,"0x"+ad.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="RestConnection",XF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class QF{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=r+"://"+e.host,this.yo=`projects/${i}/databases/${s}`,this.wo=this.databaseId.database===Ih?`project_id=${i}`:`project_id=${i}&database_id=${s}`}So(e,r,i,s,o){const a=Xg(),l=this.bo(e,r.toUriEncodedString());ge(nm,`Sending RPC '${e}' ${a}:`,l,i);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,s,o),this.vo(e,l,u,i).then(c=>(ge(nm,`Received RPC '${e}' ${a}: `,c),c),c=>{throw Ta(nm,`RPC '${e}' ${a} failed with error: `,c,"url: ",l,"request:",i),c})}Co(e,r,i,s,o,a){return this.So(e,r,i,s,o)}Do(e,r,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ka}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>e[o]=s),i&&i.headers.forEach((s,o)=>e[o]=s)}bo(e,r){const i=XF[e];return`${this.po}/v1/${r}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JF{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn="WebChannelConnection";class ZF extends QF{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,r,i,s){const o=Xg();return new Promise((a,l)=>{const u=new R1;u.setWithCredentials(!0),u.listenOnce(N1.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Ld.NO_ERROR:const h=u.getResponseJson();ge(yn,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),a(h);break;case Ld.TIMEOUT:ge(yn,`RPC '${e}' ${o} timed out`),l(new Ee(te.DEADLINE_EXCEEDED,"Request time out"));break;case Ld.HTTP_ERROR:const f=u.getStatus();if(ge(yn,`RPC '${e}' ${o} failed with status:`,f,"response text:",u.getResponseText()),f>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const b=function(P){const x=P.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(x)>=0?x:te.UNKNOWN}(g.status);l(new Ee(b,g.message))}else l(new Ee(te.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Ee(te.UNAVAILABLE,"Connection failed."));break;default:Ae()}}finally{ge(yn,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(s);ge(yn,`RPC '${e}' ${o} sending request:`,s),u.send(r,"POST",c,i,15)})}Wo(e,r,i){const s=Xg(),o=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=L1(),l=M1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,r,i),u.encodeInitMessageHeaders=!0;const h=o.join("");ge(yn,`Creating RPC '${e}' stream ${s}: ${h}`,u);const f=a.createWebChannel(h,u);let p=!1,g=!1;const b=new JF({Fo:P=>{g?ge(yn,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(p||(ge(yn,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),ge(yn,`RPC '${e}' stream ${s} sending:`,P),f.send(P))},Mo:()=>f.close()}),D=(P,x,E)=>{P.listen(x,_=>{try{E(_)}catch(R){setTimeout(()=>{throw R},0)}})};return D(f,Vl.EventType.OPEN,()=>{g||(ge(yn,`RPC '${e}' stream ${s} transport opened.`),b.Qo())}),D(f,Vl.EventType.CLOSE,()=>{g||(g=!0,ge(yn,`RPC '${e}' stream ${s} transport closed`),b.Ko())}),D(f,Vl.EventType.ERROR,P=>{g||(g=!0,Ta(yn,`RPC '${e}' stream ${s} transport errored:`,P),b.Ko(new Ee(te.UNAVAILABLE,"The operation could not be completed")))}),D(f,Vl.EventType.MESSAGE,P=>{var x;if(!g){const E=P.data[0];it(!!E);const _=E,R=(_==null?void 0:_.error)||((x=_[0])===null||x===void 0?void 0:x.error);if(R){ge(yn,`RPC '${e}' stream ${s} received error:`,R);const j=R.status;let V=function(y){const w=Lt[y];if(w!==void 0)return fk(w)}(j),C=R.message;V===void 0&&(V=te.INTERNAL,C="Unknown error status: "+j+" with message "+R.message),g=!0,b.Ko(new Ee(V,C)),f.close()}else ge(yn,`RPC '${e}' stream ${s} received:`,E),b.Uo(E)}}),D(l,D1.STAT_EVENT,P=>{P.stat===Fg.PROXY?ge(yn,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===Fg.NOPROXY&&ge(yn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.$o()},0),b}}function rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(t){return new rF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,r,i=1e3,s=1.5,o=6e4){this.Ti=e,this.timerId=r,this.Go=i,this.zo=s,this.jo=o,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const r=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),s=Math.max(0,r-i);s>0&&ge("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${r} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="PersistentStream";class Ck{constructor(e,r,i,s,o,a,l,u){this.Ti=e,this.n_=i,this.r_=s,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new kk(e,r)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,r){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():r&&r.code===te.RESOURCE_EXHAUSTED?(Ai(r.toString()),Ai("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):r&&r.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(r)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),r=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.i_===r&&this.V_(i,s)},i=>{e(()=>{const s=new Ee(te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(s)})})}V_(e,r){const i=this.R_(this.i_);this.stream=this.f_(e,r),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{i(()=>this.m_(s))}),this.stream.onMessage(s=>{i(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ge(rx,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return r=>{this.Ti.enqueueAndForget(()=>this.i_===e?r():(ge(rx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class e4 extends Ck{constructor(e,r,i,s,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,s,a),this.serializer=o}f_(e,r){return this.connection.Wo("Listen",e,r)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const r=oF(this.serializer,e),i=function(o){if(!("targetChange"in o))return Ne.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Ne.min():a.readTime?ti(a.readTime):Ne.min()}(e);return this.listener.p_(r,i)}y_(e){const r={};r.database=Kg(this.serializer),r.addTarget=function(o,a){let l;const u=a.target;if(l=zg(u)?{documents:uF(o,u)}:{query:cF(o,u).ht},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=gk(o,a.resumeToken);const c=Wg(o,a.expectedCount);c!==null&&(l.expectedCount=c)}else if(a.snapshotVersion.compareTo(Ne.min())>0){l.readTime=Nh(o,a.snapshotVersion.toTimestamp());const c=Wg(o,a.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const i=hF(this.serializer,e);i&&(r.labels=i),this.I_(r)}w_(e){const r={};r.database=Kg(this.serializer),r.removeTarget=e,this.I_(r)}}class t4 extends Ck{constructor(e,r,i,s,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,s,a),this.serializer=o}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,r){return this.connection.Wo("Write",e,r)}g_(e){return it(!!e.streamToken),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){it(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const r=lF(e.writeResults,e.commitTime),i=ti(e.commitTime);return this.listener.v_(i,r)}C_(){const e={};e.database=Kg(this.serializer),this.I_(e)}b_(e){const r={streamToken:this.lastStreamToken,writes:e.map(i=>aF(this.serializer,i))};this.I_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{}class r4 extends n4{constructor(e,r,i,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=i,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new Ee(te.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,r,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.So(e,qg(r,i),s,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ee(te.UNKNOWN,o.toString())})}Co(e,r,i,s,o){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Co(e,qg(r,i),s,a,l,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ee(te.UNKNOWN,a.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class i4{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Ai(r),this.N_=!1):ge("OnlineStateTracker",r)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho="RemoteStore";class s4{constructor(e,r,i,s,o){this.localStore=e,this.datastore=r,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=o,this.z_.To(a=>{i.enqueueAndForget(async()=>{bo(this)&&(ge(ho,"Restarting streams for network reachability change."),await async function(u){const c=De(u);c.W_.add(4),await nc(c),c.j_.set("Unknown"),c.W_.delete(4),await Nf(c)}(this))})}),this.j_=new i4(i,s)}}async function Nf(t){if(bo(t))for(const e of t.G_)await e(!0)}async function nc(t){for(const e of t.G_)await e(!1)}function Ak(t,e){const r=De(t);r.U_.has(e.targetId)||(r.U_.set(e.targetId,e),s_(r)?i_(r):Qa(r).c_()&&r_(r,e))}function n_(t,e){const r=De(t),i=Qa(r);r.U_.delete(e),i.c_()&&Pk(r,e),r.U_.size===0&&(i.c_()?i.P_():bo(r)&&r.j_.set("Unknown"))}function r_(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Qa(t).y_(e)}function Pk(t,e){t.H_.Ne(e),Qa(t).w_(e)}function i_(t){t.H_=new ZV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.U_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),Qa(t).start(),t.j_.B_()}function s_(t){return bo(t)&&!Qa(t).u_()&&t.U_.size>0}function bo(t){return De(t).W_.size===0}function Rk(t){t.H_=void 0}async function o4(t){t.j_.set("Online")}async function a4(t){t.U_.forEach((e,r)=>{r_(t,e)})}async function l4(t,e){Rk(t),s_(t)?(t.j_.q_(e),i_(t)):t.j_.set("Unknown")}async function u4(t,e,r){if(t.j_.set("Online"),e instanceof mk&&e.state===2&&e.cause)try{await async function(s,o){const a=o.cause;for(const l of o.targetIds)s.U_.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.U_.delete(l),s.H_.removeTarget(l))}(t,e)}catch(i){ge(ho,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Mh(t,i)}else if(e instanceof Fd?t.H_.We(e):e instanceof pk?t.H_.Ze(e):t.H_.je(e),!r.isEqual(Ne.min()))try{const i=await Ik(t.localStore);r.compareTo(i)>=0&&await function(o,a){const l=o.H_.ot(a);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=o.U_.get(c);h&&o.U_.set(c,h.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,c)=>{const h=o.U_.get(u);if(!h)return;o.U_.set(u,h.withResumeToken(dn.EMPTY_BYTE_STRING,h.snapshotVersion)),Pk(o,u);const f=new ts(h.target,u,c,h.sequenceNumber);r_(o,f)}),o.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(i){ge(ho,"Failed to raise snapshot:",i),await Mh(t,i)}}async function Mh(t,e,r){if(!Xa(e))throw e;t.W_.add(1),await nc(t),t.j_.set("Offline"),r||(r=()=>Ik(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ge(ho,"Retrying IndexedDB access"),await r(),t.W_.delete(1),await Nf(t)})}function Nk(t,e){return e().catch(r=>Mh(t,r,e))}async function Df(t){const e=De(t),r=Is(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:$y;for(;c4(e);)try{const s=await WF(e.localStore,i);if(s===null){e.K_.length===0&&r.P_();break}i=s.batchId,d4(e,s)}catch(s){await Mh(e,s)}Dk(e)&&Mk(e)}function c4(t){return bo(t)&&t.K_.length<10}function d4(t,e){t.K_.push(e);const r=Is(t);r.c_()&&r.S_&&r.b_(e.mutations)}function Dk(t){return bo(t)&&!Is(t).u_()&&t.K_.length>0}function Mk(t){Is(t).start()}async function h4(t){Is(t).C_()}async function f4(t){const e=Is(t);for(const r of t.K_)e.b_(r.mutations)}async function p4(t,e,r){const i=t.K_.shift(),s=Yy.from(i,e,r);await Nk(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Df(t)}async function m4(t,e){e&&Is(t).S_&&await async function(i,s){if(function(a){return XV(a)&&a!==te.ABORTED}(s.code)){const o=i.K_.shift();Is(i).h_(),await Nk(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Df(i)}}(t,e),Dk(t)&&Mk(t)}async function ix(t,e){const r=De(t);r.asyncQueue.verifyOperationInProgress(),ge(ho,"RemoteStore received new credentials");const i=bo(r);r.W_.add(3),await nc(r),i&&r.j_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.W_.delete(3),await Nf(r)}async function g4(t,e){const r=De(t);e?(r.W_.delete(2),await Nf(r)):e||(r.W_.add(2),await nc(r),r.j_.set("Unknown"))}function Qa(t){return t.J_||(t.J_=function(r,i,s){const o=De(r);return o.M_(),new e4(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{xo:o4.bind(null,t),No:a4.bind(null,t),Lo:l4.bind(null,t),p_:u4.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),s_(t)?i_(t):t.j_.set("Unknown")):(await t.J_.stop(),Rk(t))})),t.J_}function Is(t){return t.Y_||(t.Y_=function(r,i,s){const o=De(r);return o.M_(),new t4(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:h4.bind(null,t),Lo:m4.bind(null,t),D_:f4.bind(null,t),v_:p4.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await Df(t)):(await t.Y_.stop(),t.K_.length>0&&(ge(ho,`Stopping write stream with ${t.K_.length} pending writes`),t.K_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,r,i,s,o){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new xi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,i,s,o){const a=Date.now()+i,l=new o_(e,r,a,s,o);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ee(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function a_(t,e){if(Ai("AsyncQueue",`${e}: ${t}`),Xa(t))return new Ee(te.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{static emptySet(e){return new ha(e.comparator)}constructor(e){this.comparator=e?(r,i)=>e(r,i)||Se.comparator(r.key,i.key):(r,i)=>Se.comparator(r.key,i.key),this.keyedMap=Fl(),this.sortedSet=new kt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,i)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof ha)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const i=new ha;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=r,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(){this.Z_=new kt(Se.comparator)}track(e){const r=e.doc.key,i=this.Z_.get(r);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(r,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(r,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(r,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(r,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(r):e.type===1&&i.type===2?this.Z_=this.Z_.insert(r,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(r,{type:2,doc:e.doc}):Ae():this.Z_=this.Z_.insert(r,e)}X_(){const e=[];return this.Z_.inorderTraversal((r,i)=>{e.push(i)}),e}}class Aa{constructor(e,r,i,s,o,a,l,u,c){this.query=e,this.docs=r,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,r,i,s,o){const a=[];return r.forEach(l=>{a.push({type:0,doc:l})}),new Aa(e,r,ha.emptySet(r),a,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&If(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,i=e.docChanges;if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==i[s].type||!r[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class y4{constructor(){this.queries=ox(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(r,i){const s=De(r),o=s.queries;s.queries=ox(),o.forEach((a,l)=>{for(const u of l.ta)u.onError(i)})})(this,new Ee(te.ABORTED,"Firestore shutting down"))}}function ox(){return new wo(t=>ek(t),If)}async function Lk(t,e){const r=De(t);let i=3;const s=e.query;let o=r.queries.get(s);o?!o.na()&&e.ra()&&(i=2):(o=new v4,i=e.ra()?0:1);try{switch(i){case 0:o.ea=await r.onListen(s,!0);break;case 1:o.ea=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const l=a_(a,`Initialization of query '${Uo(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,o),o.ta.push(e),e.sa(r.onlineState),o.ea&&e.oa(o.ea)&&l_(r)}async function Ok(t,e){const r=De(t),i=e.query;let s=3;const o=r.queries.get(i);if(o){const a=o.ta.indexOf(e);a>=0&&(o.ta.splice(a,1),o.ta.length===0?s=e.ra()?0:1:!o.na()&&e.ra()&&(s=2))}switch(s){case 0:return r.queries.delete(i),r.onUnlisten(i,!0);case 1:return r.queries.delete(i),r.onUnlisten(i,!1);case 2:return r.onLastRemoteStoreUnlisten(i);default:return}}function _4(t,e){const r=De(t);let i=!1;for(const s of e){const o=s.query,a=r.queries.get(o);if(a){for(const l of a.ta)l.oa(s)&&(i=!0);a.ea=s}}i&&l_(r)}function w4(t,e,r){const i=De(t),s=i.queries.get(e);if(s)for(const o of s.ta)o.onError(r);i.queries.delete(e)}function l_(t){t.ia.forEach(e=>{e.next()})}var Qg,ax;(ax=Qg||(Qg={}))._a="default",ax.Cache="cache";class jk{constructor(e,r,i){this.query=e,this.aa=r,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Aa(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.ua?this.la(e)&&(this.aa.next(e),r=!0):this.ha(e,this.onlineState)&&(this.Pa(e),r=!0),this.ca=e,r}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let r=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),r=!0),r}ha(e,r){if(!e.fromCache||!this.ra())return!0;const i=r!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}la(e){if(e.docChanges.length>0)return!0;const r=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}Pa(e){e=Aa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Qg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e){this.key=e}}class Fk{constructor(e){this.key=e}}class b4{constructor(e,r){this.query=e,this.fa=r,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=qe(),this.mutatedKeys=qe(),this.ya=tk(e),this.wa=new ha(this.ya)}get Sa(){return this.fa}ba(e,r){const i=r?r.Da:new sx,s=r?r.wa:this.wa;let o=r?r.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),g=kf(this.query,f)?f:null,b=!!p&&this.mutatedKeys.has(p.key),D=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let P=!1;p&&g?p.data.isEqual(g.data)?b!==D&&(i.track({type:3,doc:g}),P=!0):this.va(p,g)||(i.track({type:2,doc:g}),P=!0,(u&&this.ya(g,u)>0||c&&this.ya(g,c)<0)&&(l=!0)):!p&&g?(i.track({type:0,doc:g}),P=!0):p&&!g&&(i.track({type:1,doc:p}),P=!0,(u||c)&&(l=!0)),P&&(g?(a=a.add(g),o=D?o.add(h):o.delete(h)):(a=a.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),o=o.delete(h.key),i.track({type:1,doc:h})}return{wa:a,Da:i,ls:l,mutatedKeys:o}}va(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,i,s){const o=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const a=e.Da.X_();a.sort((h,f)=>function(g,b){const D=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ae()}};return D(g)-D(b)}(h.type,f.type)||this.ya(h.doc,f.doc)),this.Ca(i),s=s!=null&&s;const l=r&&!s?this.Fa():[],u=this.pa.size===0&&this.current&&!s?1:0,c=u!==this.ga;return this.ga=u,a.length!==0||c?{snapshot:new Aa(this.query,e.wa,o,a,e.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new sx,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(r=>this.fa=this.fa.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.fa=this.fa.delete(r)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=qe(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const r=[];return e.forEach(i=>{this.pa.has(i)||r.push(new Fk(i))}),this.pa.forEach(i=>{e.has(i)||r.push(new Vk(i))}),r}Oa(e){this.fa=e.gs,this.pa=qe();const r=this.ba(e.documents);return this.applyChanges(r,!0)}Na(){return Aa.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const u_="SyncEngine";class x4{constructor(e,r,i){this.query=e,this.targetId=r,this.view=i}}class E4{constructor(e){this.key=e,this.Ba=!1}}class T4{constructor(e,r,i,s,o,a){this.localStore=e,this.remoteStore=r,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.La={},this.ka=new wo(l=>ek(l),If),this.qa=new Map,this.Qa=new Set,this.$a=new kt(Se.comparator),this.Ka=new Map,this.Ua=new Jy,this.Wa={},this.Ga=new Map,this.za=Ca.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function S4(t,e,r=!0){const i=Wk(t);let s;const o=i.ka.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Na()):s=await Uk(i,e,r,!0),s}async function I4(t,e){const r=Wk(t);await Uk(r,e,!0,!1)}async function Uk(t,e,r,i){const s=await qF(t.localStore,Zr(e)),o=s.targetId,a=t.sharedClientState.addLocalQueryTarget(o,r);let l;return i&&(l=await k4(t,e,o,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&Ak(t.remoteStore,s),l}async function k4(t,e,r,i,s){t.Ha=(f,p,g)=>async function(D,P,x,E){let _=P.view.ba(x);_.ls&&(_=await Zb(D.localStore,P.query,!1).then(({documents:C})=>P.view.ba(C,_)));const R=E&&E.targetChanges.get(P.targetId),j=E&&E.targetMismatches.get(P.targetId)!=null,V=P.view.applyChanges(_,D.isPrimaryClient,R,j);return ux(D,P.targetId,V.Ma),V.snapshot}(t,f,p,g);const o=await Zb(t.localStore,e,!0),a=new b4(e,o.gs),l=a.ba(o.documents),u=tc.createSynthesizedTargetChangeForCurrentChange(r,i&&t.onlineState!=="Offline",s),c=a.applyChanges(l,t.isPrimaryClient,u);ux(t,r,c.Ma);const h=new x4(e,r,a);return t.ka.set(e,h),t.qa.has(r)?t.qa.get(r).push(e):t.qa.set(r,[e]),c.snapshot}async function C4(t,e,r){const i=De(t),s=i.ka.get(e),o=i.qa.get(s.targetId);if(o.length>1)return i.qa.set(s.targetId,o.filter(a=>!If(a,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Yg(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),r&&n_(i.remoteStore,s.targetId),Jg(i,s.targetId)}).catch(Ya)):(Jg(i,s.targetId),await Yg(i.localStore,s.targetId,!0))}async function A4(t,e){const r=De(t),i=r.ka.get(e),s=r.qa.get(i.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(i.targetId),n_(r.remoteStore,i.targetId))}async function P4(t,e,r){const i=j4(t);try{const s=await function(a,l){const u=De(a),c=$t.now(),h=l.reduce((g,b)=>g.add(b.key),qe());let f,p;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=Pi(),D=qe();return u.ds.getEntries(g,h).next(P=>{b=P,b.forEach((x,E)=>{E.isValidDocument()||(D=D.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,b)).next(P=>{f=P;const x=[];for(const E of l){const _=WV(E,f.get(E.key).overlayedDocument);_!=null&&x.push(new Ms(E.key,_,G1(_.value.mapValue),ei.exists(!0)))}return u.mutationQueue.addMutationBatch(g,c,x,l)}).next(P=>{p=P;const x=P.applyToLocalDocumentSet(f,D);return u.documentOverlayCache.saveOverlays(g,P.batchId,x)})}).then(()=>({batchId:p.batchId,changes:rk(f)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let c=a.Wa[a.currentUser.toKey()];c||(c=new kt(Ke)),c=c.insert(l,u),a.Wa[a.currentUser.toKey()]=c}(i,s.batchId,r),await rc(i,s.changes),await Df(i.remoteStore)}catch(s){const o=a_(s,"Failed to persist write");r.reject(o)}}async function Bk(t,e){const r=De(t);try{const i=await zF(r.localStore,e);e.targetChanges.forEach((s,o)=>{const a=r.Ka.get(o);a&&(it(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.Ba=!0:s.modifiedDocuments.size>0?it(a.Ba):s.removedDocuments.size>0&&(it(a.Ba),a.Ba=!1))}),await rc(r,i,e)}catch(i){await Ya(i)}}function lx(t,e,r){const i=De(t);if(i.isPrimaryClient&&r===0||!i.isPrimaryClient&&r===1){const s=[];i.ka.forEach((o,a)=>{const l=a.view.sa(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=De(a);u.onlineState=l;let c=!1;u.queries.forEach((h,f)=>{for(const p of f.ta)p.sa(l)&&(c=!0)}),c&&l_(u)}(i.eventManager,e),s.length&&i.La.p_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function R4(t,e,r){const i=De(t);i.sharedClientState.updateQueryState(e,"rejected",r);const s=i.Ka.get(e),o=s&&s.key;if(o){let a=new kt(Se.comparator);a=a.insert(o,bn.newNoDocument(o,Ne.min()));const l=qe().add(o),u=new Pf(Ne.min(),new Map,new kt(Ke),a,l);await Bk(i,u),i.$a=i.$a.remove(o),i.Ka.delete(e),c_(i)}else await Yg(i.localStore,e,!1).then(()=>Jg(i,e,r)).catch(Ya)}async function N4(t,e){const r=De(t),i=e.batch.batchId;try{const s=await $F(r.localStore,e);zk(r,i,null),$k(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),await rc(r,s)}catch(s){await Ya(s)}}async function D4(t,e,r){const i=De(t);try{const s=await function(a,l){const u=De(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,l).next(f=>(it(f!==null),h=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(i.localStore,e);zk(i,e,r),$k(i,e),i.sharedClientState.updateMutationState(e,"rejected",r),await rc(i,s)}catch(s){await Ya(s)}}function $k(t,e){(t.Ga.get(e)||[]).forEach(r=>{r.resolve()}),t.Ga.delete(e)}function zk(t,e,r){const i=De(t);let s=i.Wa[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(r?o.reject(r):o.resolve(),s=s.remove(e)),i.Wa[i.currentUser.toKey()]=s}}function Jg(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.qa.get(e))t.ka.delete(i),r&&t.La.Ja(i,r);t.qa.delete(e),t.isPrimaryClient&&t.Ua.br(e).forEach(i=>{t.Ua.containsKey(i)||Hk(t,i)})}function Hk(t,e){t.Qa.delete(e.path.canonicalString());const r=t.$a.get(e);r!==null&&(n_(t.remoteStore,r),t.$a=t.$a.remove(e),t.Ka.delete(r),c_(t))}function ux(t,e,r){for(const i of r)i instanceof Vk?(t.Ua.addReference(i.key,e),M4(t,i)):i instanceof Fk?(ge(u_,"Document no longer in limbo: "+i.key),t.Ua.removeReference(i.key,e),t.Ua.containsKey(i.key)||Hk(t,i.key)):Ae()}function M4(t,e){const r=e.key,i=r.path.canonicalString();t.$a.get(r)||t.Qa.has(i)||(ge(u_,"New document in limbo: "+r),t.Qa.add(i),c_(t))}function c_(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const r=new Se(wt.fromString(e)),i=t.za.next();t.Ka.set(i,new E4(r)),t.$a=t.$a.insert(r,i),Ak(t.remoteStore,new ts(Zr(Gy(r.path)),i,"TargetPurposeLimboResolution",xf.ae))}}async function rc(t,e,r){const i=De(t),s=[],o=[],a=[];i.ka.isEmpty()||(i.ka.forEach((l,u)=>{a.push(i.Ha(u,e,r).then(c=>{var h;if((c||r)&&i.isPrimaryClient){const f=c?!c.fromCache:(h=r==null?void 0:r.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){s.push(c);const f=e_.Yi(u.targetId,c);o.push(f)}}))}),await Promise.all(a),i.La.p_(s),await async function(u,c){const h=De(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>J.forEach(c,p=>J.forEach(p.Hi,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>J.forEach(p.Ji,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!Xa(f))throw f;ge(t_,"Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const g=h.Ts.get(p),b=g.snapshotVersion,D=g.withLastLimboFreeSnapshotVersion(b);h.Ts=h.Ts.insert(p,D)}}}(i.localStore,o))}async function L4(t,e){const r=De(t);if(!r.currentUser.isEqual(e)){ge(u_,"User change. New user:",e.toKey());const i=await Sk(r.localStore,e);r.currentUser=e,function(o,a){o.Ga.forEach(l=>{l.forEach(u=>{u.reject(new Ee(te.CANCELLED,a))})}),o.Ga.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await rc(r,i.Rs)}}function O4(t,e){const r=De(t),i=r.Ka.get(e);if(i&&i.Ba)return qe().add(i.key);{let s=qe();const o=r.qa.get(e);if(!o)return s;for(const a of o){const l=r.ka.get(a);s=s.unionWith(l.view.Sa)}return s}}function Wk(t){const e=De(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=O4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=R4.bind(null,e),e.La.p_=_4.bind(null,e.eventManager),e.La.Ja=w4.bind(null,e.eventManager),e}function j4(t){const e=De(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=N4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=D4.bind(null,e),e}class Lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,r){return null}nu(e,r){return null}eu(e){return BF(this.persistence,new VF,e.initialUser,this.serializer)}Xa(e){return new Tk(Zy.ri,this.serializer)}Za(e){return new KF}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lh.provider={build:()=>new Lh};class V4 extends Lh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,r){it(this.persistence.referenceDelegate instanceof Dh);const i=this.persistence.referenceDelegate.garbageCollector;return new EF(i,e.asyncQueue,r)}Xa(e){const r=this.cacheSizeBytes!==void 0?Vn.withCacheSize(this.cacheSizeBytes):Vn.DEFAULT;return new Tk(i=>Dh.ri(i,r),this.serializer)}}class Zg{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>lx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=L4.bind(null,this.syncEngine),await g4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new y4}()}createDatastore(e){const r=Rf(e.databaseInfo.databaseId),i=function(o){return new ZF(o)}(e.databaseInfo);return function(o,a,l,u){return new r4(o,a,l,u)}(e.authCredentials,e.appCheckCredentials,i,r)}createRemoteStore(e){return function(i,s,o,a,l){return new s4(i,s,o,a,l)}(this.localStore,this.datastore,e.asyncQueue,r=>lx(this.syncEngine,r,0),function(){return nx.D()?new nx:new YF}())}createSyncEngine(e,r){return function(s,o,a,l,u,c,h){const f=new T4(s,o,a,l,u,c);return h&&(f.ja=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const o=De(s);ge(ho,"RemoteStore shutting down."),o.W_.add(5),await nc(o),o.z_.shutdown(),o.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Zg.provider={build:()=>new Zg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Ai("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ks="FirestoreClient";class F4{constructor(e,r,i,s,o){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=i,this.databaseInfo=s,this.user=_n.UNAUTHENTICATED,this.clientId=j1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async a=>{ge(ks,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(i,a=>(ge(ks,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new xi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=a_(r,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function im(t,e){t.asyncQueue.verifyOperationInProgress(),ge(ks,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let i=r.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await Sk(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cx(t,e){t.asyncQueue.verifyOperationInProgress();const r=await U4(t);ge(ks,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(i=>ix(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>ix(e.remoteStore,s)),t._onlineComponents=e}async function U4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ge(ks,"Using user provided OfflineComponentProvider");try{await im(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===te.FAILED_PRECONDITION||s.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Ta("Error using user provided cache. Falling back to memory cache: "+r),await im(t,new Lh)}}else ge(ks,"Using default OfflineComponentProvider"),await im(t,new V4(void 0));return t._offlineComponents}async function Gk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ge(ks,"Using user provided OnlineComponentProvider"),await cx(t,t._uninitializedComponentsProvider._online)):(ge(ks,"Using default OnlineComponentProvider"),await cx(t,new Zg))),t._onlineComponents}function B4(t){return Gk(t).then(e=>e.syncEngine)}async function Kk(t){const e=await Gk(t),r=e.eventManager;return r.onListen=S4.bind(null,e.syncEngine),r.onUnlisten=C4.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=I4.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=A4.bind(null,e.syncEngine),r}function $4(t,e,r={}){const i=new xi;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,l,u,c){const h=new qk({next:p=>{h.su(),a.enqueueAndForget(()=>Ok(o,f));const g=p.docs.has(l);!g&&p.fromCache?c.reject(new Ee(te.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&u&&u.source==="server"?c.reject(new Ee(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new jk(Gy(l.path),h,{includeMetadataChanges:!0,Ta:!0});return Lk(o,f)}(await Kk(t),t.asyncQueue,e,r,i)),i.promise}function z4(t,e,r={}){const i=new xi;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,l,u,c){const h=new qk({next:p=>{h.su(),a.enqueueAndForget(()=>Ok(o,f)),p.fromCache&&u.source==="server"?c.reject(new Ee(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new jk(l,h,{includeMetadataChanges:!0,Ta:!0});return Lk(o,f)}(await Kk(t),t.asyncQueue,e,r,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(t,e,r){if(!r)throw new Ee(te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function H4(t,e,r,i){if(e===!0&&i===!0)throw new Ee(te.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function hx(t){if(!Se.isDocumentKey(t))throw new Ee(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function fx(t){if(Se.isDocumentKey(t))throw new Ee(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function d_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Ae()}function Ri(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ee(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=d_(t);throw new Ee(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="firestore.googleapis.com",px=!0;class mx{constructor(e){var r,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ee(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Qk,this.ssl=px}else this.host=e.host,this.ssl=(r=e.ssl)!==null&&r!==void 0?r:px;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ek;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<bF)throw new Ee(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}H4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Yk((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new Ee(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new Ee(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new Ee(te.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mf{constructor(e,r,i,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ee(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ee(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mx(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Xj;switch(i.type){case"firstParty":return new eV(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ee(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const i=dx.get(r);i&&(ge("ComponentProvider","Removing Datastore"),dx.delete(r),i.terminate())}(this),Promise.resolve()}}function W4(t,e,r,i={}){var s;const o=(t=Ri(t,Mf))._getSettings(),a=`${e}:${r}`;if(o.host!==Qk&&o.host!==a&&Ta("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),i.mockUserToken){let l,u;if(typeof i.mockUserToken=="string")l=i.mockUserToken,u=_n.MOCK_USER;else{l=cM(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Ee(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new _n(c)}t._authCredentials=new Qj(new O1(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,r,i){this.converter=r,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Lf(this.firestore,e,this._query)}}class Wn{constructor(e,r,i){this.converter=r,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ms(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wn(this.firestore,e,this._key)}}class ms extends Lf{constructor(e,r,i){super(e,r,Gy(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wn(this.firestore,null,new Se(e))}withConverter(e){return new ms(this.firestore,e,this._path)}}function Yt(t,e,...r){if(t=cn(t),Xk("collection","path",e),t instanceof Mf){const i=wt.fromString(e,...r);return fx(i),new ms(t,null,i)}{if(!(t instanceof Wn||t instanceof ms))throw new Ee(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(wt.fromString(e,...r));return fx(i),new ms(t.firestore,null,i)}}function Pa(t,e,...r){if(t=cn(t),arguments.length===1&&(e=j1.newId()),Xk("doc","path",e),t instanceof Mf){const i=wt.fromString(e,...r);return hx(i),new Wn(t,null,new Se(i))}{if(!(t instanceof Wn||t instanceof ms))throw new Ee(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(wt.fromString(e,...r));return hx(i),new Wn(t.firestore,t instanceof ms?t.converter:null,new Se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="AsyncQueue";class vx{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new kk(this,"async_queue_retry"),this.Su=()=>{const i=rm();i&&ge(gx,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=e;const r=rm();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const r=rm();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const r=new xi;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Xa(e))throw e;ge(gx,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const r=this.bu.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const s=function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),l}(i);throw Ai("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.pu=!1,i))));return this.bu=r,r}enqueueAfterDelay(e,r,i){this.Du(),this.wu.indexOf(e)>-1&&(r=0);const s=o_.createAndSchedule(this,e,r,i,o=>this.Fu(o));return this.fu.push(s),s}Du(){this.gu&&Ae()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const r of this.fu)if(r.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((r,i)=>r.targetTimeMs-i.targetTimeMs);for(const r of this.fu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const r=this.fu.indexOf(e);this.fu.splice(r,1)}}class ic extends Mf{constructor(e,r,i,s){super(e,r,i,s),this.type="firestore",this._queue=new vx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vx(e),this._firestoreClient=void 0,await e}}}function q4(t,e){const r=typeof t=="object"?t:GI(),i=typeof t=="string"?t:Ih,s=Ry(r,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=lM("firestore");o&&W4(s,...o)}return s}function h_(t){if(t._terminated)throw new Ee(te.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||G4(t),t._firestoreClient}function G4(t){var e,r,i;const s=t._freezeSettings(),o=function(l,u,c,h){return new pV(l,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Yk(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new F4(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ra(dn.fromBase64String(e))}catch(r){throw new Ee(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Ra(dn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Ee(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new on(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Ee(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Ee(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ke(this._lat,e._lat)||Ke(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K4=/^__.*__$/;class Y4{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return this.fieldMask!==null?new Ms(e,this.data,this.fieldMask,r,this.fieldTransforms):new ec(e,this.data,r,this.fieldTransforms)}}class Jk{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return new Ms(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function Zk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ae()}}class g_{constructor(e,r,i,s,o,a){this.settings=e,this.databaseId=r,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.Bu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new g_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var r;const i=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.ku({path:i,Qu:!1});return s.$u(e),s}Ku(e){var r;const i=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.ku({path:i,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Oh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Zk(this.Lu)&&K4.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class X4{constructor(e,r,i){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=i||Rf(e)}ju(e,r,i,s=!1){return new g_({Lu:e,methodName:r,zu:i,path:on.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eC(t){const e=t._freezeSettings(),r=Rf(t._databaseId);return new X4(t._databaseId,!!e.ignoreUndefinedProperties,r)}function Q4(t,e,r,i,s,o={}){const a=t.ju(o.merge||o.mergeFields?2:0,e,r,s);v_("Data must be an object, but it was:",a,i);const l=tC(i,a);let u,c;if(o.merge)u=new Xn(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){const h=[];for(const f of o.mergeFields){const p=ev(e,f,r);if(!a.contains(p))throw new Ee(te.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);rC(h,p)||h.push(p)}u=new Xn(h),c=a.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=a.fieldTransforms;return new Y4(new Un(l),u,c)}class jf extends f_{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jf}}function J4(t,e,r,i){const s=t.ju(1,e,r);v_("Data must be an object, but it was:",s,i);const o=[],a=Un.empty();Ds(i,(u,c)=>{const h=y_(e,u,r);c=cn(c);const f=s.Ku(h);if(c instanceof jf)o.push(h);else{const p=Vf(c,f);p!=null&&(o.push(h),a.set(h,p))}});const l=new Xn(o);return new Jk(a,l,s.fieldTransforms)}function Z4(t,e,r,i,s,o){const a=t.ju(1,e,r),l=[ev(e,i,r)],u=[s];if(o.length%2!=0)throw new Ee(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<o.length;p+=2)l.push(ev(e,o[p])),u.push(o[p+1]);const c=[],h=Un.empty();for(let p=l.length-1;p>=0;--p)if(!rC(c,l[p])){const g=l[p];let b=u[p];b=cn(b);const D=a.Ku(g);if(b instanceof jf)c.push(g);else{const P=Vf(b,D);P!=null&&(c.push(g),h.set(g,P))}}const f=new Xn(c);return new Jk(h,f,a.fieldTransforms)}function Vf(t,e){if(nC(t=cn(t)))return v_("Unsupported field value:",e,t),tC(t,e);if(t instanceof f_)return function(i,s){if(!Zk(s.Lu))throw s.Wu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,s){const o=[];let a=0;for(const l of i){let u=Vf(l,s.Uu(a));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),a++}return{arrayValue:{values:o}}}(t,e)}return function(i,s){if((i=cn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return FV(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=$t.fromDate(i);return{timestampValue:Nh(s.serializer,o)}}if(i instanceof $t){const o=new $t(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Nh(s.serializer,o)}}if(i instanceof p_)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ra)return{bytesValue:gk(s.serializer,i._byteString)};if(i instanceof Wn){const o=s.databaseId,a=i.firestore._databaseId;if(!a.isEqual(o))throw s.Wu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Qy(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof m_)return function(a,l){return{mapValue:{fields:{[W1]:{stringValue:q1},[kh]:{arrayValue:{values:a.toArray().map(c=>{if(typeof c!="number")throw l.Wu("VectorValues must only contain numeric values.");return Ky(l.serializer,c)})}}}}}}(i,s);throw s.Wu(`Unsupported field value: ${d_(i)}`)}(t,e)}function tC(t,e){const r={};return F1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ds(t,(i,s)=>{const o=Vf(s,e.qu(i));o!=null&&(r[i]=o)}),{mapValue:{fields:r}}}function nC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $t||t instanceof p_||t instanceof Ra||t instanceof Wn||t instanceof f_||t instanceof m_)}function v_(t,e,r){if(!nC(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const i=d_(r);throw i==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+i)}}function ev(t,e,r){if((e=cn(e))instanceof Of)return e._internalPath;if(typeof e=="string")return y_(t,e);throw Oh("Field path arguments must be of type string or ",t,!1,void 0,r)}const e3=new RegExp("[~\\*/\\[\\]]");function y_(t,e,r){if(e.search(e3)>=0)throw Oh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Of(...e.split("."))._internalPath}catch{throw Oh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Oh(t,e,r,i,s){const o=i&&!i.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(o||a)&&(u+=" (found",o&&(u+=` in field ${i}`),a&&(u+=` in document ${s}`),u+=")"),new Ee(te.INVALID_ARGUMENT,l+t+u)}function rC(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,r,i,s,o){this._firestore=e,this._userDataWriter=r,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Wn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new t3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(sC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class t3 extends iC{data(){return super.data()}}function sC(t,e){return typeof e=="string"?y_(t,e):e instanceof Of?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ee(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class r3{convertValue(e,r="none"){switch(Ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(Ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Ae()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const i={};return Ds(e,(s,o)=>{i[s]=this.convertValue(o,r)}),i}convertVectorValue(e){var r,i,s;const o=(s=(i=(r=e.fields)===null||r===void 0?void 0:r[kh].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(a=>Dt(a.doubleValue));return new m_(o)}convertGeoPoint(e){return new p_(Dt(e.latitude),Dt(e.longitude))}convertArray(e,r){return(e.values||[]).map(i=>this.convertValue(i,r))}convertServerTimestamp(e,r){switch(r){case"previous":const i=Tf(e);return i==null?null:this.convertValue(i,r);case"estimate":return this.convertTimestamp(Au(e));default:return null}}convertTimestamp(e){const r=Es(e);return new $t(r.seconds,r.nanos)}convertDocumentKey(e,r){const i=wt.fromString(e);it(xk(i));const s=new Pu(i.get(1),i.get(3)),o=new Se(i.popFirst(5));return s.isEqual(r)||Ai(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i3(t,e,r){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class oC extends iC{constructor(e,r,i,s,o,a){super(e,r,i,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Ud(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const i=this._document.data.field(sC("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}}}class Ud extends oC{data(e={}){return super.data(e)}}class s3{constructor(e,r,i,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new Bl(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(i=>{e.call(r,new Ud(this._firestore,this._userDataWriter,i.key,i,new Bl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ee(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new Ud(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Bl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const u=new Ud(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Bl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return l.type!==0&&(c=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:o3(l.type),doc:u,oldIndex:c,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function o3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ae()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(t){t=Ri(t,Wn);const e=Ri(t.firestore,ic);return $4(h_(e),t._key).then(r=>l3(e,t,r))}class aC extends r3{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ra(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Wn(this.firestore,null,r)}}function xn(t){t=Ri(t,Lf);const e=Ri(t.firestore,ic),r=h_(e),i=new aC(e);return n3(t._query),z4(r,t._query).then(s=>new s3(e,i,t,s))}function yx(t,e,r){t=Ri(t,Wn);const i=Ri(t.firestore,ic),s=i3(t.converter,e);return lC(i,[Q4(eC(i),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,ei.none())])}function tv(t,e,r,...i){t=Ri(t,Wn);const s=Ri(t.firestore,ic),o=eC(s);let a;return a=typeof(e=cn(e))=="string"||e instanceof Of?Z4(o,"updateDoc",t._key,e,r,i):J4(o,"updateDoc",t._key,e),lC(s,[a.toMutation(t._key,ei.exists(!0))])}function lC(t,e){return function(i,s){const o=new xi;return i.asyncQueue.enqueueAndForget(async()=>P4(await B4(i),s,o)),o.promise}(h_(t),e)}function l3(t,e,r){const i=r.docs.get(e._key),s=new aC(t);return new oC(t,s,e._key,i,new Bl(r.hasPendingWrites,r.fromCache),e.converter)}(function(e,r=!0){(function(s){Ka=s})(Wa),xa(new lo("firestore",(i,{instanceIdentifier:s,options:o})=>{const a=i.getProvider("app").getImmediate(),l=new ic(new Jj(i.getProvider("auth-internal")),new tV(a,i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ee(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pu(c.options.projectId,h)}(a,s),a);return o=Object.assign({useFetchStreams:r},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),hs(Tb,Sb,e),hs(Tb,Sb,"esm2017")})();const u3={apiKey:"AIzaSyDGolxlZNoEzk7z46ZMtSk9YsP32MlH45Q",authDomain:"llm-hyper-audio.firebaseapp.com",projectId:"llm-hyper-audio",storageBucket:"llm-hyper-audio.firebasestorage.app",messagingSenderId:"530304773274",appId:"1:530304773274:web:1764f58974d6c2fd060323",measurementId:"G-HFEKE65YC6"},uC=qI(u3),Rt=q4(uC),sm=qj(uC),cC=M.createContext();function sc(){const t=M.useContext(cC);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function c3({children:t}){const[e,r]=M.useState(null),[i,s]=M.useState(!0),[o,a]=M.useState(null);M.useEffect(()=>{console.log("Setting up auth listener");const h=MO(sm,f=>{console.log("Auth state changed:",f?f.email:"No user"),r(f),s(!1)},f=>{console.error("Auth state change error:",f),a(f.message),s(!1)});return()=>h()},[]);const c={user:e,loading:i,error:o,login:async(h,f)=>{try{a(null),console.log("Attempting login with:",h);const p=await RO(sm,h,f);return r(p.user),p.user}catch(p){throw console.error("Login error:",p),a(p.message),p}},logout:async()=>{try{a(null),console.log("Logging out user"),await LO(sm),r(null)}catch(h){throw console.error("Logout error:",h),a(h.message),h}},isAuthenticated:!!e};return m.jsx(cC.Provider,{value:c,children:t})}const d3=M.createContext();function h3({children:t}){const[e,r]=M.useState(null),[i,s]=M.useState([]),[o,a]=M.useState(!1),[l,u]=M.useState(0),x={currentVideo:e,setCurrentVideo:r,playlist:i,setPlaylist:s,isPlaying:o,setIsPlaying:a,currentTime:l,setCurrentTime:u,addToPlaylist:E=>{s(_=>[..._,E])},removeFromPlaylist:E=>{s(_=>_.filter(R=>R.id!==E))},clearPlaylist:()=>{s([]),r(null)},playVideo:E=>{r(E),a(!0)},pauseVideo:()=>{a(!1)},nextVideo:()=>{const E=i.findIndex(_=>_.id===(e==null?void 0:e.id));E<i.length-1&&r(i[E+1])},previousVideo:()=>{const E=i.findIndex(_=>_.id===(e==null?void 0:e.id));E>0&&r(i[E-1])},updatePlaylistOrder:E=>{s(E)}};return m.jsx(d3.Provider,{value:x,children:t})}/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dC=(...t)=>t.filter((e,r,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var p3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:s="",children:o,iconNode:a,...l},u)=>M.createElement("svg",{ref:u,...p3,width:e,height:e,stroke:t,strokeWidth:i?Number(r)*24/Number(e):r,className:dC("lucide",s),...l},[...a.map(([c,h])=>M.createElement(c,h)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=(t,e)=>{const r=M.forwardRef(({className:i,...s},o)=>M.createElement(m3,{ref:o,iconNode:e,className:dC(`lucide-${f3(t)}`,i),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],v3=or("ChevronDown",g3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],_3=or("ChevronRight",y3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],b3=or("ChevronUp",w3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],hC=or("Clock",x3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],fC=or("FileText",E3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],S3=or("House",T3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],k3=or("List",I3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],A3=or("LogOut",C3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],R3=or("Menu",P3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],pC=or("Search",N3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D3=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],M3=or("Tag",D3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],_x=or("Upload",L3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],j3=or("X",O3);function V3(){const{user:t,logout:e}=sc(),r=wr(),[i,s]=M.useState(!1),o=()=>{s(!i)},a=[{path:"/",label:"Home",icon:m.jsx(S3,{size:20})},{path:"/keyword-directory",label:"Directory",icon:m.jsx(k3,{size:20})},{path:"/transcript-summary",label:"Summarizer",icon:m.jsx(fC,{size:20})}],l=u=>r.pathname===u;return m.jsxs(m.Fragment,{children:[m.jsx("button",{className:"fixed top-4 left-4 w-12 h-12 rounded-lg bg-white border-none shadow-sm cursor-pointer flex justify-center items-center text-gray-600 z-[51] transition-colors duration-200 ease-in-out",onClick:o,children:m.jsx(R3,{size:24})}),m.jsx("div",{className:`fixed inset-0 z-[49] transition-opacity duration-300 ease-in-out ${i?"pointer-events-auto":"pointer-events-none"}`,onClick:o}),m.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-white border-r border-gray-200 shadow-lg transition-transform duration-300 ease-in-out z-50 flex flex-col p-4 ${i?"translate-x-0":"-translate-x-full"}`,children:[m.jsx("button",{className:"absolute top-4 right-4 p-2 rounded-md bg-gray-100 border-none cursor-pointer flex justify-center items-center text-gray-600",onClick:o,children:m.jsx(j3,{size:20})}),m.jsxs("div",{className:"flex-1 overflow-auto mt-10",children:[m.jsxs("div",{children:[a.map(u=>m.jsxs(gh,{to:u.path,className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l(u.path)?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[m.jsx("span",{className:"flex mr-3 text-inherit",children:u.icon}),m.jsx("span",{children:u.label})]},u.path)),m.jsxs(gh,{to:"/search",className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l("/search")?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[m.jsx("span",{className:"flex mr-3 text-inherit",children:m.jsx(pC,{size:20})}),m.jsx("span",{children:"Search"})]})]}),m.jsx("div",{className:"h-px bg-gray-200 my-4"}),m.jsx("div",{children:t&&m.jsxs("button",{onClick:()=>{e(),s(!1)},className:"flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out text-gray-500 font-normal w-full text-left border-none bg-transparent",children:[m.jsx("span",{className:"flex mr-3 text-inherit",children:m.jsx(A3,{size:20})}),m.jsx("span",{children:"Logout"})]})})]})]})]})}function Us({children:t}){const{loading:e}=sc();return e?m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):m.jsxs("div",{className:"flex flex-row h-screen w-full overflow-hidden bg-white",children:[m.jsx("div",{className:"flex-none w-16",children:m.jsx(V3,{})}),m.jsx("div",{className:"flex-grow overflow-y-auto",children:m.jsx("main",{className:"py-6 px-6 w-full",children:t})})]})}function Bs({children:t}){const{user:e,loading:r}=sc(),i=wr();return r?m.jsx("div",{className:"flex justify-center items-center min-h-screen",children:m.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):e?t:m.jsx(DI,{to:"/login",state:{from:i},replace:!0})}var mC={exports:{}},F3="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",U3=F3,B3=U3;function gC(){}function vC(){}vC.resetWarningCache=gC;var $3=function(){function t(i,s,o,a,l,u){if(u!==B3){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:vC,resetWarningCache:gC};return r.PropTypes=r,r};mC.exports=$3();var z3=mC.exports;const lt=Fa(z3);var yC={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var o="",a=0;a<arguments.length;a++){var l=arguments[a];l&&(o=s(o,i(l)))}return o}function i(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return r.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var a="";for(var l in o)e.call(o,l)&&o[l]&&(a=s(a,l));return a}function s(o,a){return a?o?o+" "+a:o+a:o}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(yC);var H3=yC.exports;const _C=Fa(H3);var W3=["top","left","transform","className","children","innerRef"];function nv(){return nv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},nv.apply(this,arguments)}function q3(t,e){if(t==null)return{};var r={},i=Object.keys(t),s,o;for(o=0;o<i.length;o++)s=i[o],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function jh(t){var e=t.top,r=e===void 0?0:e,i=t.left,s=i===void 0?0:i,o=t.transform,a=t.className,l=t.children,u=t.innerRef,c=q3(t,W3);return Ue.createElement("g",nv({ref:u,className:_C("visx-group",a),transform:o||"translate("+s+", "+r+")"},c),l)}jh.propTypes={top:lt.number,left:lt.number,transform:lt.string,className:lt.string,children:lt.node,innerRef:lt.oneOfType([lt.string,lt.func,lt.object])};var G3=Array.prototype.slice;function K3(t){for(var e=t.length,r,i;e;)i=Math.random()*e--|0,r=t[e],t[e]=t[i],t[i]=r;return t}function Y3(t){for(var e=0,r=(t=K3(G3.call(t))).length,i=[],s,o;e<r;)s=t[e],o&&wC(o,s)?++e:(o=Q3(i=X3(i,s)),e=0);return o}function X3(t,e){var r,i;if(om(e,t))return[e];for(r=0;r<t.length;++r)if(ld(e,t[r])&&om($l(t[r],e),t))return[t[r],e];for(r=0;r<t.length-1;++r)for(i=r+1;i<t.length;++i)if(ld($l(t[r],t[i]),e)&&ld($l(t[r],e),t[i])&&ld($l(t[i],e),t[r])&&om(bC(t[r],t[i],e),t))return[t[r],t[i],e];throw new Error}function ld(t,e){var r=t.r-e.r,i=e.x-t.x,s=e.y-t.y;return r<0||r*r<i*i+s*s}function wC(t,e){var r=t.r-e.r+1e-6,i=e.x-t.x,s=e.y-t.y;return r>0&&r*r>i*i+s*s}function om(t,e){for(var r=0;r<e.length;++r)if(!wC(t,e[r]))return!1;return!0}function Q3(t){switch(t.length){case 1:return J3(t[0]);case 2:return $l(t[0],t[1]);case 3:return bC(t[0],t[1],t[2])}}function J3(t){return{x:t.x,y:t.y,r:t.r}}function $l(t,e){var r=t.x,i=t.y,s=t.r,o=e.x,a=e.y,l=e.r,u=o-r,c=a-i,h=l-s,f=Math.sqrt(u*u+c*c);return{x:(r+o+u/f*h)/2,y:(i+a+c/f*h)/2,r:(f+s+l)/2}}function bC(t,e,r){var i=t.x,s=t.y,o=t.r,a=e.x,l=e.y,u=e.r,c=r.x,h=r.y,f=r.r,p=i-a,g=i-c,b=s-l,D=s-h,P=u-o,x=f-o,E=i*i+s*s-o*o,_=E-a*a-l*l+u*u,R=E-c*c-h*h+f*f,j=g*b-p*D,V=(b*R-D*_)/(j*2)-i,C=(D*P-b*x)/j,I=(g*_-p*R)/(j*2)-s,y=(p*x-g*P)/j,w=C*C+y*y-1,S=2*(o+V*C+I*y),L=V*V+I*I-o*o,N=-(w?(S+Math.sqrt(S*S-4*w*L))/(2*w):L/S);return{x:i+V+C*N,y:s+I+y*N,r:N}}function wx(t,e,r){var i=t.x-e.x,s,o,a=t.y-e.y,l,u,c=i*i+a*a;c?(o=e.r+r.r,o*=o,u=t.r+r.r,u*=u,o>u?(s=(c+u-o)/(2*c),l=Math.sqrt(Math.max(0,u/c-s*s)),r.x=t.x-s*i-l*a,r.y=t.y-s*a+l*i):(s=(c+o-u)/(2*c),l=Math.sqrt(Math.max(0,o/c-s*s)),r.x=e.x+s*i-l*a,r.y=e.y+s*a+l*i)):(r.x=e.x+r.r,r.y=e.y)}function bx(t,e){var r=t.r+e.r-1e-6,i=e.x-t.x,s=e.y-t.y;return r>0&&r*r>i*i+s*s}function xx(t){var e=t._,r=t.next._,i=e.r+r.r,s=(e.x*r.r+r.x*e.r)/i,o=(e.y*r.r+r.y*e.r)/i;return s*s+o*o}function ud(t){this._=t,this.next=null,this.previous=null}function Z3(t){if(!(s=t.length))return 0;var e,r,i,s,o,a,l,u,c,h,f;if(e=t[0],e.x=0,e.y=0,!(s>1))return e.r;if(r=t[1],e.x=-r.r,r.x=e.r,r.y=0,!(s>2))return e.r+r.r;wx(r,e,i=t[2]),e=new ud(e),r=new ud(r),i=new ud(i),e.next=i.previous=r,r.next=e.previous=i,i.next=r.previous=e;e:for(l=3;l<s;++l){wx(e._,r._,i=t[l]),i=new ud(i),u=r.next,c=e.previous,h=r._.r,f=e._.r;do if(h<=f){if(bx(u._,i._)){r=u,e.next=r,r.previous=e,--l;continue e}h+=u._.r,u=u.next}else{if(bx(c._,i._)){e=c,e.next=r,r.previous=e,--l;continue e}f+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=e,i.next=r,e.next=r.previous=r=i,o=xx(e);(i=i.next)!==r;)(a=xx(i))<o&&(e=i,o=a);r=e.next}for(e=[r._],i=r;(i=i.next)!==r;)e.push(i._);for(i=Y3(e),l=0;l<s;++l)e=t[l],e.x-=i.x,e.y-=i.y;return i.r}function eU(t){return t==null?null:tU(t)}function tU(t){if(typeof t!="function")throw new Error;return t}function Ex(){return 0}function nU(t){return function(){return t}}function rU(t){return Math.sqrt(t.value)}function iU(){var t=null,e=1,r=1,i=Ex;function s(o){return o.x=e/2,o.y=r/2,t?o.eachBefore(Tx(t)).eachAfter(am(i,.5)).eachBefore(Sx(1)):o.eachBefore(Tx(rU)).eachAfter(am(Ex,1)).eachAfter(am(i,o.r/Math.min(e,r))).eachBefore(Sx(Math.min(e,r)/(2*o.r))),o}return s.radius=function(o){return arguments.length?(t=eU(o),s):t},s.size=function(o){return arguments.length?(e=+o[0],r=+o[1],s):[e,r]},s.padding=function(o){return arguments.length?(i=typeof o=="function"?o:nU(+o),s):i},s}function Tx(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function am(t,e){return function(r){if(i=r.children){var i,s,o=i.length,a=t(r)*e||0,l;if(a)for(s=0;s<o;++s)i[s].r+=a;if(l=Z3(i),a)for(s=0;s<o;++s)i[s].r-=a;r.r=l+a}}}function Sx(t){return function(e){var r=e.parent;e.r*=t,r&&(e.x=r.x+t*e.x,e.y=r.y+t*e.y)}}function xC(t){var e=t.node,r=e===void 0?{x:0,y:0,r:15}:e;return Ue.createElement("circle",{cx:r.x,cy:r.y,r:r.r||15,fill:"#21D4FD"})}xC.propTypes={node:lt.shape({x:lt.number.isRequired,y:lt.number.isRequired,r:lt.number})};function EC(t){var e=t.top,r=t.left,i=t.className,s=t.root,o=t.radius,a=t.size,l=t.padding,u=t.children,c=t.nodeComponent,h=c===void 0?xC:c,f=iU();a&&f.size(a),o!==void 0&&f.radius(o),l&&f.padding(l);var p=f(s);return u?Ue.createElement(Ue.Fragment,null,u(p)):Ue.createElement(jh,{top:e,left:r,className:_C("visx-pack",i)},h&&p.descendants().map(function(g,b){return Ue.createElement(jh,{key:"pack-node-"+b},Ue.createElement(h,{node:g}))}))}EC.propTypes={children:lt.func,top:lt.number,left:lt.number,className:lt.string,radius:lt.func,padding:lt.number};function sU(t){var e=0,r=t.children,i=r&&r.length;if(!i)e=1;else for(;--i>=0;)e+=r[i].value;t.value=e}function oU(){return this.eachAfter(sU)}function aU(t,e){let r=-1;for(const i of this)t.call(e,i,++r,this);return this}function lU(t,e){for(var r=this,i=[r],s,o,a=-1;r=i.pop();)if(t.call(e,r,++a,this),s=r.children)for(o=s.length-1;o>=0;--o)i.push(s[o]);return this}function uU(t,e){for(var r=this,i=[r],s=[],o,a,l,u=-1;r=i.pop();)if(s.push(r),o=r.children)for(a=0,l=o.length;a<l;++a)i.push(o[a]);for(;r=s.pop();)t.call(e,r,++u,this);return this}function cU(t,e){let r=-1;for(const i of this)if(t.call(e,i,++r,this))return i}function dU(t){return this.eachAfter(function(e){for(var r=+t(e.data)||0,i=e.children,s=i&&i.length;--s>=0;)r+=i[s].value;e.value=r})}function hU(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function fU(t){for(var e=this,r=pU(e,t),i=[e];e!==r;)e=e.parent,i.push(e);for(var s=i.length;t!==r;)i.splice(s,0,t),t=t.parent;return i}function pU(t,e){if(t===e)return t;var r=t.ancestors(),i=e.ancestors(),s=null;for(t=r.pop(),e=i.pop();t===e;)s=t,t=r.pop(),e=i.pop();return s}function mU(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function gU(){return Array.from(this)}function vU(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function yU(){var t=this,e=[];return t.each(function(r){r!==t&&e.push({source:r.parent,target:r})}),e}function*_U(){var t=this,e,r=[t],i,s,o;do for(e=r.reverse(),r=[];t=e.pop();)if(yield t,i=t.children)for(s=0,o=i.length;s<o;++s)r.push(i[s]);while(r.length)}function __(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=xU)):e===void 0&&(e=bU);for(var r=new Vh(t),i,s=[r],o,a,l,u;i=s.pop();)if((a=e(i.data))&&(u=(a=Array.from(a)).length))for(i.children=a,l=u-1;l>=0;--l)s.push(o=a[l]=new Vh(a[l])),o.parent=i,o.depth=i.depth+1;return r.eachBefore(TU)}function wU(){return __(this).eachBefore(EU)}function bU(t){return t.children}function xU(t){return Array.isArray(t)?t[1]:null}function EU(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function TU(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Vh(t){this.data=t,this.depth=this.height=0,this.parent=null}Vh.prototype=__.prototype={constructor:Vh,count:oU,each:aU,eachAfter:uU,eachBefore:lU,find:cU,sum:dU,sort:hU,path:fU,ancestors:mU,descendants:gU,leaves:vU,links:yU,copy:wU,[Symbol.iterator]:_U};var Ix=function(){function t(r){var i=r.x,s=i===void 0?0:i,o=r.y,a=o===void 0?0:o;this.x=0,this.y=0,this.x=s,this.y=a}var e=t.prototype;return e.value=function(){return{x:this.x,y:this.y}},e.toArray=function(){return[this.x,this.y]},t}();function SU(t){return!!t&&t instanceof Element}function IU(t){return!!t&&(t instanceof SVGElement||"ownerSVGElement"in t)}function kU(t){return!!t&&"createSVGPoint"in t}function CU(t){return!!t&&"getScreenCTM"in t}function AU(t){return!!t&&"changedTouches"in t}function PU(t){return!!t&&"clientX"in t}function RU(t){return!!t&&(t instanceof Event||"nativeEvent"in t&&t.nativeEvent instanceof Event)}function iu(){return iu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},iu.apply(this,arguments)}var lm={x:0,y:0};function NU(t){if(!t)return iu({},lm);if(AU(t))return t.changedTouches.length>0?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:iu({},lm);if(PU(t))return{x:t.clientX,y:t.clientY};var e=t==null?void 0:t.target,r=e&&"getBoundingClientRect"in e?e.getBoundingClientRect():null;return r?{x:r.x+r.width/2,y:r.y+r.height/2}:iu({},lm)}function kx(t,e){if(!t||!e)return null;var r=NU(e),i=IU(t)?t.ownerSVGElement:t,s=CU(i)?i.getScreenCTM():null;if(kU(i)&&s){var o=i.createSVGPoint();return o.x=r.x,o.y=r.y,o=o.matrixTransform(s.inverse()),new Ix({x:o.x,y:o.y})}var a=t.getBoundingClientRect();return new Ix({x:r.x-a.left-t.clientLeft,y:r.y-a.top-t.clientTop})}function um(t,e){if(SU(t)&&e)return kx(t,e);if(RU(t)){var r=t,i=r.target;if(i)return kx(i,r)}return null}function DU(t,e,r){return Math.max(e,Math.min(t,r))}const vt={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function Cx(t,e,r){return e===0||Math.abs(e)===1/0?Math.pow(t,r*5):t*e*r/(e+r*t)}function Ax(t,e,r,i=.15){return i===0?DU(t,e,r):t<e?-Cx(e-t,r-e,i)+e:t>r?+Cx(t-r,r-e,i)+r:t}function MU(t,[e,r],[i,s]){const[[o,a],[l,u]]=t;return[Ax(e,o,a,i),Ax(r,l,u,s)]}function LU(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function OU(t){var e=LU(t,"string");return typeof e=="symbol"?e:String(e)}function Ot(t,e,r){return e=OU(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Px(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function Tt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Px(Object(r),!0).forEach(function(i){Ot(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Px(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}const TC={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Rx(t){return t?t[0].toUpperCase()+t.slice(1):""}const jU=["enter","leave"];function VU(t=!1,e){return t&&!jU.includes(e)}function FU(t,e="",r=!1){const i=TC[t],s=i&&i[e]||e;return"on"+Rx(t)+Rx(s)+(VU(r,s)?"Capture":"")}const UU=["gotpointercapture","lostpointercapture"];function BU(t){let e=t.substring(2).toLowerCase();const r=!!~e.indexOf("passive");r&&(e=e.replace("passive",""));const i=UU.includes(e)?"capturecapture":"capture",s=!!~e.indexOf(i);return s&&(e=e.replace("capture","")),{device:e,capture:s,passive:r}}function $U(t,e=""){const r=TC[t],i=r&&r[e]||e;return t+i}function Ff(t){return"touches"in t}function IC(t){return Ff(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function zU(t){return Array.from(t.touches).filter(e=>{var r,i;return e.target===t.currentTarget||((r=t.currentTarget)===null||r===void 0||(i=r.contains)===null||i===void 0?void 0:i.call(r,e.target))})}function HU(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function kC(t){return Ff(t)?HU(t)[0]:t}function rv(t,e){try{const r=e.clientX-t.clientX,i=e.clientY-t.clientY,s=(e.clientX+t.clientX)/2,o=(e.clientY+t.clientY)/2,a=Math.hypot(r,i);return{angle:-(Math.atan2(r,i)*180)/Math.PI,distance:a,origin:[s,o]}}catch{}return null}function WU(t){return zU(t).map(e=>e.identifier)}function Nx(t,e){const[r,i]=Array.from(t.touches).filter(s=>e.includes(s.identifier));return rv(r,i)}function cm(t){const e=kC(t);return Ff(t)?e.identifier:e.pointerId}function Na(t){const e=kC(t);return[e.clientX,e.clientY]}const Dx=40,Mx=800;function CC(t){let{deltaX:e,deltaY:r,deltaMode:i}=t;return i===1?(e*=Dx,r*=Dx):i===2&&(e*=Mx,r*=Mx),[e,r]}function qU(t){var e,r;const{scrollX:i,scrollY:s,scrollLeft:o,scrollTop:a}=t.currentTarget;return[(e=i??o)!==null&&e!==void 0?e:0,(r=s??a)!==null&&r!==void 0?r:0]}function GU(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:r,altKey:i,metaKey:s,ctrlKey:o}=t;Object.assign(e,{shiftKey:r,altKey:i,metaKey:s,ctrlKey:o})}return e}function Fh(t,...e){return typeof t=="function"?t(...e):t}function KU(){}function YU(...t){return t.length===0?KU:t.length===1?t[0]:function(){let e;for(const r of t)e=r.apply(this,arguments)||e;return e}}function Lx(t,e){return Object.assign({},e,t||{})}const XU=32;class AC{constructor(e,r,i){this.ctrl=e,this.args=r,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:r,ingKey:i,args:s}=this;r[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=s,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const r=this.state,i=this.config;r._active||(this.reset(),this.computeInitial(),r._active=!0,r.target=e.target,r.currentTarget=e.currentTarget,r.lastOffset=i.from?Fh(i.from,r):r.offset,r.offset=r.lastOffset,r.startTime=r.timeStamp=e.timeStamp)}computeValues(e){const r=this.state;r._values=e,r.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:r,config:i,shared:s}=this;r.args=this.args;let o=0;if(e&&(r.event=e,i.preventDefault&&e.cancelable&&r.event.preventDefault(),r.type=e.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,GU(e)),s.down=s.pressed=s.buttons%2===1||s.touches>0,o=e.timeStamp-r.timeStamp,r.timeStamp=e.timeStamp,r.elapsedTime=r.timeStamp-r.startTime),r._active){const V=r._delta.map(Math.abs);vt.addTo(r._distance,V)}this.axisIntent&&this.axisIntent(e);const[a,l]=r._movement,[u,c]=i.threshold,{_step:h,values:f}=r;if(i.hasCustomTransform?(h[0]===!1&&(h[0]=Math.abs(a)>=u&&f[0]),h[1]===!1&&(h[1]=Math.abs(l)>=c&&f[1])):(h[0]===!1&&(h[0]=Math.abs(a)>=u&&Math.sign(a)*u),h[1]===!1&&(h[1]=Math.abs(l)>=c&&Math.sign(l)*c)),r.intentional=h[0]!==!1||h[1]!==!1,!r.intentional)return;const p=[0,0];if(i.hasCustomTransform){const[V,C]=f;p[0]=h[0]!==!1?V-h[0]:0,p[1]=h[1]!==!1?C-h[1]:0}else p[0]=h[0]!==!1?a-h[0]:0,p[1]=h[1]!==!1?l-h[1]:0;this.restrictToAxis&&!r._blocked&&this.restrictToAxis(p);const g=r.offset,b=r._active&&!r._blocked||r.active;b&&(r.first=r._active&&!r.active,r.last=!r._active&&r.active,r.active=s[this.ingKey]=r._active,e&&(r.first&&("bounds"in i&&(r._bounds=Fh(i.bounds,r)),this.setup&&this.setup()),r.movement=p,this.computeOffset()));const[D,P]=r.offset,[[x,E],[_,R]]=r._bounds;r.overflow=[D<x?-1:D>E?1:0,P<_?-1:P>R?1:0],r._movementBound[0]=r.overflow[0]?r._movementBound[0]===!1?r._movement[0]:r._movementBound[0]:!1,r._movementBound[1]=r.overflow[1]?r._movementBound[1]===!1?r._movement[1]:r._movementBound[1]:!1;const j=r._active?i.rubberband||[0,0]:[0,0];if(r.offset=MU(r._bounds,r.offset,j),r.delta=vt.sub(r.offset,g),this.computeMovement(),b&&(!r.last||o>XU)){r.delta=vt.sub(r.offset,g);const V=r.delta.map(Math.abs);vt.addTo(r.distance,V),r.direction=r.delta.map(Math.sign),r._direction=r._delta.map(Math.sign),!r.first&&o>0&&(r.velocity=[V[0]/o,V[1]/o],r.timeDelta=o)}}emit(){const e=this.state,r=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const s=this.handler(Tt(Tt(Tt({},r),e),{},{[this.aliasKey]:e.values}));s!==void 0&&(e.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function QU([t,e],r){const i=Math.abs(t),s=Math.abs(e);if(i>s&&i>r)return"x";if(s>i&&s>r)return"y"}class oc extends AC{constructor(...e){super(...e),Ot(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=vt.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=vt.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const r=this.state,i=this.config;if(!r.axis&&e){const s=typeof i.axisThreshold=="object"?i.axisThreshold[IC(e)]:i.axisThreshold;r.axis=QU(r._movement,s)}r._blocked=(i.lockDirection||!!i.axis)&&!r.axis||!!i.axis&&i.axis!==r.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const JU=t=>t,Ox=.15,PC={enabled(t=!0){return t},eventOptions(t,e,r){return Tt(Tt({},r.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[Ox,Ox];case!1:return[0,0];default:return vt.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return vt.toVector(t)},transform(t,e,r){const i=t||r.shared.transform;return this.hasCustomTransform=!!i,i||JU},threshold(t){return vt.toVector(t,0)}},ZU=0,xo=Tt(Tt({},PC),{},{axis(t,e,{axis:r}){if(this.lockDirection=r==="lock",!this.lockDirection)return r},axisThreshold(t=ZU){return t},bounds(t={}){if(typeof t=="function")return o=>xo.bounds(t(o));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:r=1/0,top:i=-1/0,bottom:s=1/0}=t;return[[e,r],[i,s]]}}),jx={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class eB extends oc{constructor(...e){super(...e),Ot(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const r=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),s={left:r.left-i.left+e.offset[0],right:r.right-i.right+e.offset[0],top:r.top-i.top+e.offset[1],bottom:r.bottom-i.bottom+e.offset[1]};e._bounds=xo.bounds(s)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const r=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(r.pointerButtons)?!r.pointerButtons.includes(e.buttons):r.pointerButtons!==-1&&r.pointerButtons!==e.buttons))return;const s=this.ctrl.setEventIds(e);r.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(s&&s.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=cm(e),i._pointerActive=!0,this.computeValues(Na(e)),this.computeInitial(),r.preventScrollAxis&&IC(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):r.delay>0?(this.setupDelayTrigger(e),r.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const r=this.state;r._active=!0,r._preventScroll=!0,r._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const r=this.state,i=this.config;if(!r._pointerActive)return;const s=cm(e);if(r._pointerId!==void 0&&s!==r._pointerId)return;const o=Na(e);if(document.pointerLockElement===e.target?r._delta=[e.movementX,e.movementY]:(r._delta=vt.sub(o,r._values),this.computeValues(o)),vt.addTo(r._movement,r._delta),this.compute(e),r._delayed&&r.intentional){this.timeoutStore.remove("dragDelay"),r.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!r._preventScroll)if(r.axis)if(r.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){r._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const r=this.state,i=this.config;if(!r._active||!r._pointerActive)return;const s=cm(e);if(r._pointerId!==void 0&&s!==r._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[o,a]=r._distance;if(r.tap=o<=i.tapsThreshold&&a<=i.tapsThreshold,r.tap&&i.filterTaps)r._force=!0;else{const[l,u]=r._delta,[c,h]=r._movement,[f,p]=i.swipe.velocity,[g,b]=i.swipe.distance,D=i.swipe.duration;if(r.elapsedTime<D){const P=Math.abs(l/r.timeDelta),x=Math.abs(u/r.timeDelta);P>f&&Math.abs(c)>g&&(r.swipe[0]=Math.sign(l)),x>p&&Math.abs(h)>b&&(r.swipe[1]=Math.sign(u))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const r=this.config,i=r.device;r.pointerLock&&e.currentTarget.requestPointerLock(),r.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,tB(e);const r=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",r),this.eventStore.add(this.sharedConfig.window,"touch","cancel",r),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const r=jx[e.key];if(r){const i=this.state,s=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=r(this.config.keyboardDisplacement,s),i._keyboardActive=!0,vt.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in jx&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const r=this.config.device;e(r,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(r,"change",this.pointerMove.bind(this)),e(r,"end",this.pointerUp.bind(this)),e(r,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function tB(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const ac=typeof window<"u"&&window.document&&window.document.createElement;function RC(){return ac&&"ontouchstart"in window}function nB(){return RC()||ac&&window.navigator.maxTouchPoints>1}function rB(){return ac&&"onpointerdown"in window}function iB(){return ac&&"exitPointerLock"in window.document}function sB(){try{return"constructor"in GestureEvent}catch{return!1}}const dr={isBrowser:ac,gesture:sB(),touch:RC(),touchscreen:nB(),pointer:rB(),pointerLock:iB()},oB=250,aB=180,lB=.5,uB=50,cB=250,dB=10,Vx={mouse:0,touch:0,pen:8},hB=Tt(Tt({},xo),{},{device(t,e,{pointer:{touch:r=!1,lock:i=!1,mouse:s=!1}={}}){return this.pointerLock=i&&dr.pointerLock,dr.touch&&r?"touch":this.pointerLock?"mouse":dr.pointer&&!s?"pointer":dr.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:r}){if(this.preventScrollDelay=typeof r=="number"?r:r||r===void 0&&t?oB:void 0,!(!dr.touchscreen||r===!1))return t||(r!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:r=!0,buttons:i=1,keys:s=!0}={}}){return this.pointerButtons=i,this.keys=s,!this.pointerLock&&this.device==="pointer"&&r},threshold(t,e,{filterTaps:r=!1,tapsThreshold:i=3,axis:s=void 0}){const o=vt.toVector(t,r?i:s?1:0);return this.filterTaps=r,this.tapsThreshold=i,o},swipe({velocity:t=lB,distance:e=uB,duration:r=cB}={}){return{velocity:this.transform(vt.toVector(t)),distance:this.transform(vt.toVector(e)),duration:r}},delay(t=0){switch(t){case!0:return aB;case!1:return 0;default:return t}},axisThreshold(t){return t?Tt(Tt({},Vx),t):Vx},keyboardDisplacement(t=dB){return t}});function NC(t){const[e,r]=t.overflow,[i,s]=t._delta,[o,a]=t._direction;(e<0&&i>0&&o<0||e>0&&i<0&&o>0)&&(t._movement[0]=t._movementBound[0]),(r<0&&s>0&&a<0||r>0&&s<0&&a>0)&&(t._movement[1]=t._movementBound[1])}const fB=30,pB=100;class mB extends AC{constructor(...e){super(...e),Ot(this,"ingKey","pinching"),Ot(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:r,lastOffset:i}=this.state;e==="wheel"?this.state.offset=vt.add(r,i):this.state.offset=[(1+r[0])*i[0],r[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:r}=this.state;this.state.movement=[e[0]/r[0],e[1]-r[1]]}axisIntent(){const e=this.state,[r,i]=e._movement;if(!e.axis){const s=Math.abs(r)*fB-Math.abs(i);s<0?e.axis="angle":s>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const r=this.state,i=this.ctrl.touchIds;if(r._active&&r._touchIds.every(o=>i.has(o))||i.size<2)return;this.start(e),r._touchIds=Array.from(i).slice(0,2);const s=Nx(e,r._touchIds);s&&this.pinchStart(e,s)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const r=this.state,i=r._pointerEvents,s=this.ctrl.pointerIds;if(r._active&&Array.from(i.keys()).every(a=>s.has(a))||(i.size<2&&i.set(e.pointerId,e),r._pointerEvents.size<2))return;this.start(e);const o=rv(...Array.from(i.values()));o&&this.pinchStart(e,o)}pinchStart(e,r){const i=this.state;i.origin=r.origin,this.computeValues([r.distance,r.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const r=Nx(e,this.state._touchIds);r&&this.pinchMove(e,r)}pointerMove(e){const r=this.state._pointerEvents;if(r.has(e.pointerId)&&r.set(e.pointerId,e),!this.state._active)return;const i=rv(...Array.from(r.values()));i&&this.pinchMove(e,i)}pinchMove(e,r){const i=this.state,s=i._values[1],o=r.angle-s;let a=0;Math.abs(o)>270&&(a+=Math.sign(o)),this.computeValues([r.distance,r.angle-360*a]),i.origin=r.origin,i.turns=a,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(r=>!this.ctrl.touchIds.has(r))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const r=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}r._pointerEvents.has(e.pointerId)&&r._pointerEvents.delete(e.pointerId),r._active&&r._pointerEvents.size<2&&(r._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const r=this.state;r._active||(this.start(e),this.computeValues([e.scale,e.rotation]),r.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const r=this.state;this.computeValues([e.scale,e.rotation]),r.origin=[e.clientX,e.clientY];const i=r._movement;r._movement=[e.scale-1,e.rotation],r._delta=vt.sub(r._movement,i),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const r=this.config.modifierKey;r&&(Array.isArray(r)?!r.find(i=>e[i]):!e[r])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-CC(e)[1]/pB*i.offset[0],0],vt.addTo(i._movement,i._delta),NC(i),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const r=this.config.device;r&&(e(r,"start",this[r+"Start"].bind(this)),e(r,"change",this[r+"Move"].bind(this)),e(r,"end",this[r+"End"].bind(this)),e(r,"cancel",this[r+"End"].bind(this)),e("lostPointerCapture","",this[r+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const gB=Tt(Tt({},PC),{},{device(t,e,{shared:r,pointer:{touch:i=!1}={}}){if(r.target&&!dr.touch&&dr.gesture)return"gesture";if(dr.touch&&i)return"touch";if(dr.touchscreen){if(dr.pointer)return"pointer";if(dr.touch)return"touch"}},bounds(t,e,{scaleBounds:r={},angleBounds:i={}}){const s=a=>{const l=Lx(Fh(r,a),{min:-1/0,max:1/0});return[l.min,l.max]},o=a=>{const l=Lx(Fh(i,a),{min:-1/0,max:1/0});return[l.min,l.max]};return typeof r!="function"&&typeof i!="function"?[s(),o()]:a=>[s(a),o(a)]},threshold(t,e,r){return this.lockDirection=r.axis==="lock",vt.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});class vB extends oc{constructor(...e){super(...e),Ot(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(Na(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const r=Na(e),i=this.state;i._delta=vt.sub(r,i._values),vt.addTo(i._movement,i._delta),this.computeValues(r),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const yB=Tt(Tt({},xo),{},{mouseOnly:(t=!0)=>t});class _B extends oc{constructor(...e){super(...e),Ot(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const r=this.state,i=qU(e);r._delta=vt.sub(i,r._values),vt.addTo(r._movement,r._delta),this.computeValues(i),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const wB=xo;class bB extends oc{constructor(...e){super(...e),Ot(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const r=this.state;r._delta=CC(e),vt.addTo(r._movement,r._delta),NC(r),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const xB=xo;class EB extends oc{constructor(...e){super(...e),Ot(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(Na(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const r=this.state;if(!r._active)return;r._active=!1;const i=Na(e);r._movement=r._delta=vt.sub(i,r._values),this.computeValues(i),this.compute(e),r.delta=r.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const TB=Tt(Tt({},xo),{},{mouseOnly:(t=!0)=>t}),w_=new Map,iv=new Map;function SB(t){w_.set(t.key,t.engine),iv.set(t.key,t.resolver)}const IB={key:"drag",engine:eB,resolver:hB},kB={key:"hover",engine:EB,resolver:TB},CB={key:"move",engine:vB,resolver:yB},AB={key:"pinch",engine:mB,resolver:gB},PB={key:"scroll",engine:_B,resolver:wB},RB={key:"wheel",engine:bB,resolver:xB};function NB(t,e){if(t==null)return{};var r={},i=Object.keys(t),s,o;for(o=0;o<i.length;o++)s=i[o],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function DB(t,e){if(t==null)return{};var r=NB(t,e),i,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)i=o[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}const MB={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=dr.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},LB=["target","eventOptions","window","enabled","transform"];function Bd(t={},e){const r={};for(const[i,s]of Object.entries(e))switch(typeof s){case"function":r[i]=s.call(r,t[i],i,t);break;case"object":r[i]=Bd(t[i],s);break;case"boolean":s&&(r[i]=t[i]);break}return r}function OB(t,e,r={}){const i=t,{target:s,eventOptions:o,window:a,enabled:l,transform:u}=i,c=DB(i,LB);if(r.shared=Bd({target:s,eventOptions:o,window:a,enabled:l,transform:u},MB),e){const h=iv.get(e);r[e]=Bd(Tt({shared:r.shared},c),h)}else for(const h in c){const f=iv.get(h);f&&(r[h]=Bd(Tt({shared:r.shared},c[h]),f))}return r}class DC{constructor(e,r){Ot(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=r}add(e,r,i,s,o){const a=this._listeners,l=$U(r,i),u=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=Tt(Tt({},u),o);e.addEventListener(l,s,c);const h=()=>{e.removeEventListener(l,s,c),a.delete(h)};return a.add(h),h}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class jB{constructor(){Ot(this,"_timeouts",new Map)}add(e,r,i=140,...s){this.remove(e),this._timeouts.set(e,window.setTimeout(r,i,...s))}remove(e){const r=this._timeouts.get(e);r&&window.clearTimeout(r)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class VB{constructor(e){Ot(this,"gestures",new Set),Ot(this,"_targetEventStore",new DC(this)),Ot(this,"gestureEventStores",{}),Ot(this,"gestureTimeoutStores",{}),Ot(this,"handlers",{}),Ot(this,"config",{}),Ot(this,"pointerIds",new Set),Ot(this,"touchIds",new Set),Ot(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),FB(this,e)}setEventIds(e){if(Ff(e))return this.touchIds=new Set(WU(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,r){this.handlers=e,this.nativeHandlers=r}applyConfig(e,r){this.config=OB(e,r,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const r=this.config.shared,i={};let s;if(!(r.target&&(s=r.target(),!s))){if(r.enabled){for(const a of this.gestures){const l=this.config[a],u=Fx(i,l.eventOptions,!!s);if(l.enabled){const c=w_.get(a);new c(this,e,a).bind(u)}}const o=Fx(i,r.eventOptions,!!s);for(const a in this.nativeHandlers)o(a,"",l=>this.nativeHandlers[a](Tt(Tt({},this.state.shared),{},{event:l,args:e})),void 0,!0)}for(const o in i)i[o]=YU(...i[o]);if(!s)return i;for(const o in i){const{device:a,capture:l,passive:u}=BU(o);this._targetEventStore.add(s,a,"",i[o],{capture:l,passive:u})}}}}function Mo(t,e){t.gestures.add(e),t.gestureEventStores[e]=new DC(t,e),t.gestureTimeoutStores[e]=new jB}function FB(t,e){e.drag&&Mo(t,"drag"),e.wheel&&Mo(t,"wheel"),e.scroll&&Mo(t,"scroll"),e.move&&Mo(t,"move"),e.pinch&&Mo(t,"pinch"),e.hover&&Mo(t,"hover")}const Fx=(t,e,r)=>(i,s,o,a={},l=!1)=>{var u,c;const h=(u=a.capture)!==null&&u!==void 0?u:e.capture,f=(c=a.passive)!==null&&c!==void 0?c:e.passive;let p=l?i:FU(i,s,h);r&&f&&(p+="Passive"),t[p]=t[p]||[],t[p].push(o)},UB=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function BB(t){const e={},r={},i=new Set;for(let s in t)UB.test(s)?(i.add(RegExp.lastMatch),r[s]=t[s]):e[s]=t[s];return[r,e,i]}function Lo(t,e,r,i,s,o){if(!t.has(r)||!w_.has(i))return;const a=r+"Start",l=r+"End",u=c=>{let h;return c.first&&a in e&&e[a](c),r in e&&(h=e[r](c)),c.last&&l in e&&e[l](c),h};s[i]=u,o[i]=o[i]||{}}function $B(t,e){const[r,i,s]=BB(t),o={};return Lo(s,r,"onDrag","drag",o,e),Lo(s,r,"onWheel","wheel",o,e),Lo(s,r,"onScroll","scroll",o,e),Lo(s,r,"onPinch","pinch",o,e),Lo(s,r,"onMove","move",o,e),Lo(s,r,"onHover","hover",o,e),{handlers:o,config:e,nativeHandlers:i}}function zB(t,e={},r,i){const s=Ue.useMemo(()=>new VB(t),[]);if(s.applyHandlers(t,i),s.applyConfig(e,r),Ue.useEffect(s.effect.bind(s)),Ue.useEffect(()=>s.clean.bind(s),[]),e.target===void 0)return s.bind.bind(s)}function HB(t){return t.forEach(SB),function(r,i){const{handlers:s,nativeHandlers:o,config:a}=$B(r,i||{});return zB(s,a,void 0,o)}}function WB(t,e){return HB([IB,AB,PB,RB,CB,kB])(t,e||{})}function qB(){return{scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0}}function MC(t){var e=t.scaleX,r=e===void 0?1:e,i=t.scaleY,s=i===void 0?1:i,o=t.translateX,a=o===void 0?0:o,l=t.translateY,u=l===void 0?0:l,c=t.skewX,h=c===void 0?0:c,f=t.skewY,p=f===void 0?0:f;return{scaleX:r,scaleY:s,translateX:a,translateY:u,skewX:h,skewY:p}}function LC(t){var e=t.scaleX,r=t.scaleY,i=t.translateX,s=t.translateY,o=t.skewX,a=t.skewY,l=e*r-a*o;return{scaleX:r/l,scaleY:e/l,translateX:(r*i-o*s)/-l,translateY:(a*i-e*s)/l,skewX:o/-l,skewY:a/-l}}function OC(t,e){var r=e.x,i=e.y;return{x:t.scaleX*r+t.skewX*i+t.translateX,y:t.skewY*r+t.scaleY*i+t.translateY}}function dm(t,e){var r=e.x,i=e.y;return OC(LC(t),{x:r,y:i})}function GB(t,e){e===void 0&&(e=void 0);var r=e||t;return MC({scaleX:t,scaleY:r})}function hm(t,e){return MC({translateX:t,translateY:e})}function Ux(t,e){return{scaleX:t.scaleX*e.scaleX+t.skewX*e.skewY,scaleY:t.skewY*e.skewX+t.scaleY*e.scaleY,translateX:t.scaleX*e.translateX+t.skewX*e.translateY+t.translateX,translateY:t.skewY*e.translateX+t.scaleY*e.translateY+t.translateY,skewX:t.scaleX*e.skewX+t.skewX*e.scaleY,skewY:t.skewY*e.scaleX+t.scaleY*e.skewY}}function sv(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];switch(e.length){case 0:throw new Error("composeMatrices() requires arguments: was called with no args");case 1:return e[0];case 2:return Ux(e[0],e[1]);default:{var i=e[0],s=e[1],o=e.slice(2),a=Ux(i,s);return sv.apply(void 0,[a].concat(o))}}}function ov(){return ov=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ov.apply(this,arguments)}var KB={scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0},YB=function(e){return-e.deltaY>0?{scaleX:1.1,scaleY:1.1}:{scaleX:.9,scaleY:.9}},XB=function(e){var r=e.offset,i=r[0],s=e.lastOffset,o=s[0];return{scaleX:i-o<0?.9:1.1,scaleY:i-o<0?.9:1.1}};function jC(t){var e=t.scaleXMin,r=e===void 0?0:e,i=t.scaleXMax,s=i===void 0?1/0:i,o=t.scaleYMin,a=o===void 0?0:o,l=t.scaleYMax,u=l===void 0?1/0:l,c=t.initialTransformMatrix,h=c===void 0?KB:c,f=t.wheelDelta,p=f===void 0?YB:f,g=t.pinchDelta,b=g===void 0?XB:g,D=t.width,P=t.height,x=t.constrain,E=t.children,_=M.useRef(null),R=M.useRef(h),j=M.useState(h),V=j[0],C=j[1],I=M.useState(!1),y=I[0],w=I[1],S=M.useState(void 0),L=S[0],N=S[1],Y=M.useState(void 0),Z=Y[0],ae=Y[1],he=M.useCallback(function(F,U){if(x)return x(F,U);var H=F.scaleX,re=F.scaleY,pe=H>s||H<r,Pe=re>u||re<a;return pe||Pe?U:F},[x,r,s,a,u]),q=M.useCallback(function(F){C(function(U){var H=he(F,U);return R.current=H,H})},[he]),G=M.useCallback(function(F){var U=F.x,H=F.y;return OC(V,{x:U,y:H})},[V]),ie=M.useCallback(function(F){var U=F.x,H=F.y;return dm(V,{x:U,y:H})},[V]),ne=M.useCallback(function(){q(h)},[h,q]),W=M.useCallback(function(F){var U=F.scaleX,H=F.scaleY,re=F.point,pe=H||U,Pe=re||{x:D/2,y:P/2},$e=dm(R.current,Pe),et=sv(R.current,hm($e.x,$e.y),GB(U,pe),hm(-$e.x,-$e.y));if(q(et),y){var rt=R.current,Me=rt.translateX,ft=rt.translateY;ae(re),N({translateX:Me,translateY:ft})}},[P,D,y,q]),$=M.useCallback(function(F){var U=F.translateX,H=F.translateY,re=sv(V,hm(U,H));q(re)},[q,V]),Q=M.useCallback(function(F){var U=F.translateX,H=F.translateY,re=ov({},V,{translateX:U,translateY:H});q(re)},[q,V]),X=M.useCallback(function(F){var U=F.x,H=F.y,re=dm(V,{x:U,y:H});Q({translateX:re.x,translateY:re.y})},[Q,V]),ce=M.useCallback(function(){return LC(V)},[V]),ye=M.useCallback(function(){var F=ce(),U=F.translateX,H=F.translateY,re=F.scaleX,pe=F.scaleY,Pe=F.skewX,$e=F.skewY;return"matrix("+re+", "+$e+", "+Pe+", "+pe+", "+U+", "+H+")"},[ce]),Fe=M.useCallback(function(F){var U=V.translateX,H=V.translateY;ae(um(F)||void 0),N({translateX:U,translateY:H}),w(!0)},[V]),Le=M.useCallback(function(F,U){var H,re;if(!(!y||!Z||!L)){var pe=um(F),Pe=pe?-(Z.x-pe.x):-Z.x,$e=pe?-(Z.y-pe.y):-Z.y,et=L.translateX+Pe;U!=null&&U.offsetX&&(et+=(H=U==null?void 0:U.offsetX)!=null?H:0);var rt=L.translateY+$e;U!=null&&U.offsetY&&(rt+=(re=U==null?void 0:U.offsetY)!=null?re:0),Q({translateX:et,translateY:rt})}},[y,Q,Z,L]),ee=M.useCallback(function(){ae(void 0),N(void 0),w(!1)},[]),le=M.useCallback(function(F){F.preventDefault();var U=um(F)||void 0,H=p(F),re=H.scaleX,pe=H.scaleY;W({scaleX:re,scaleY:pe,point:U})},[W,p]),we=M.useCallback(function(F){var U=F.origin,H=U[0],re=U[1],pe=F.memo,Pe=pe;if(_.current){var $e,et=($e=Pe)!=null?$e:_.current.getBoundingClientRect(),rt=et.top,Me=et.left;Pe||(Pe={top:rt,left:Me});var ft=b(F),Vt=ft.scaleX,ai=ft.scaleY;W({scaleX:Vt,scaleY:ai,point:{x:H-Me,y:re-rt}})}return Pe},[W,b]),je=M.useCallback(function(){var F=V.translateX,U=V.translateY,H=V.scaleX,re=V.scaleY,pe=V.skewX,Pe=V.skewY;return"matrix("+H+", "+Pe+", "+pe+", "+re+", "+F+", "+U+")"},[V]),Be=M.useCallback(function(){var F={x:D/2,y:P/2},U=ie(F);$({translateX:U.x-F.x,translateY:U.y-F.y})},[P,D,ie,$]),nt=M.useCallback(function(){q(qB())},[q]);WB({onDragStart:function(U){var H=U.event;H instanceof KeyboardEvent||Fe(H)},onDrag:function(U){var H=U.event,re=U.pinching,pe=U.cancel;re?(pe(),ee()):H instanceof KeyboardEvent||Le(H)},onDragEnd:ee,onPinch:we,onWheel:function(U){var H=U.event,re=U.active,pe=U.pinching;pe||!re||le(H)}},{target:_,eventOptions:{passive:!1},drag:{filterTaps:!0}});var A={initialTransformMatrix:h,transformMatrix:V,isDragging:y,center:Be,clear:nt,scale:W,translate:$,translateTo:X,setTranslate:Q,setTransformMatrix:q,reset:ne,handleWheel:le,handlePinch:we,dragEnd:ee,dragMove:Le,dragStart:Fe,toString:je,invert:ce,toStringInvert:ye,applyToPoint:G,applyInverseToPoint:ie,containerRef:_};return Ue.createElement(Ue.Fragment,null,E(A))}jC.propTypes={width:lt.number.isRequired,height:lt.number.isRequired,wheelDelta:lt.func,scaleXMin:lt.number,scaleXMax:lt.number,scaleYMin:lt.number,scaleYMax:lt.number,constrain:lt.func,children:lt.func.isRequired};function QB(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var VC=QB,JB=typeof jc=="object"&&jc&&jc.Object===Object&&jc,ZB=JB,e6=ZB,t6=typeof self=="object"&&self&&self.Object===Object&&self,n6=e6||t6||Function("return this")(),FC=n6,r6=FC,i6=function(){return r6.Date.now()},s6=i6,o6=/\s/;function a6(t){for(var e=t.length;e--&&o6.test(t.charAt(e)););return e}var l6=a6,u6=l6,c6=/^\s+/;function d6(t){return t&&t.slice(0,u6(t)+1).replace(c6,"")}var h6=d6,f6=FC,p6=f6.Symbol,UC=p6,Bx=UC,BC=Object.prototype,m6=BC.hasOwnProperty,g6=BC.toString,xl=Bx?Bx.toStringTag:void 0;function v6(t){var e=m6.call(t,xl),r=t[xl];try{t[xl]=void 0;var i=!0}catch{}var s=g6.call(t);return i&&(e?t[xl]=r:delete t[xl]),s}var y6=v6,_6=Object.prototype,w6=_6.toString;function b6(t){return w6.call(t)}var x6=b6,$x=UC,E6=y6,T6=x6,S6="[object Null]",I6="[object Undefined]",zx=$x?$x.toStringTag:void 0;function k6(t){return t==null?t===void 0?I6:S6:zx&&zx in Object(t)?E6(t):T6(t)}var C6=k6;function A6(t){return t!=null&&typeof t=="object"}var P6=A6,R6=C6,N6=P6,D6="[object Symbol]";function M6(t){return typeof t=="symbol"||N6(t)&&R6(t)==D6}var L6=M6,O6=h6,Hx=VC,j6=L6,Wx=NaN,V6=/^[-+]0x[0-9a-f]+$/i,F6=/^0b[01]+$/i,U6=/^0o[0-7]+$/i,B6=parseInt;function $6(t){if(typeof t=="number")return t;if(j6(t))return Wx;if(Hx(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Hx(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=O6(t);var r=F6.test(t);return r||U6.test(t)?B6(t.slice(2),r?2:8):V6.test(t)?Wx:+t}var z6=$6,H6=VC,fm=s6,qx=z6,W6="Expected a function",q6=Math.max,G6=Math.min;function K6(t,e,r){var i,s,o,a,l,u,c=0,h=!1,f=!1,p=!0;if(typeof t!="function")throw new TypeError(W6);e=qx(e)||0,H6(r)&&(h=!!r.leading,f="maxWait"in r,o=f?q6(qx(r.maxWait)||0,e):o,p="trailing"in r?!!r.trailing:p);function g(V){var C=i,I=s;return i=s=void 0,c=V,a=t.apply(I,C),a}function b(V){return c=V,l=setTimeout(x,e),h?g(V):a}function D(V){var C=V-u,I=V-c,y=e-C;return f?G6(y,o-I):y}function P(V){var C=V-u,I=V-c;return u===void 0||C>=e||C<0||f&&I>=o}function x(){var V=fm();if(P(V))return E(V);l=setTimeout(x,D(V))}function E(V){return l=void 0,p&&i?g(V):(i=s=void 0,a)}function _(){l!==void 0&&clearTimeout(l),c=0,i=u=s=l=void 0}function R(){return l===void 0?a:E(fm())}function j(){var V=fm(),C=P(V);if(i=arguments,s=this,u=V,C){if(l===void 0)return b(u);if(f)return clearTimeout(l),l=setTimeout(x,e),g(u)}return l===void 0&&(l=setTimeout(x,e)),a}return j.cancel=_,j.flush=R,j}var Y6=K6;const X6=Fa(Y6),Oo={top:40,right:40,bottom:40,left:40};function Q6(t,e){const r=t.split(" "),i=[];let s="";return r.forEach(o=>{(s+" "+o).trim().length>e&&s?(i.push(s),s=o):s=s?`${s} ${o}`:o}),s&&i.push(s),i}function J6(){var S;const[t,e]=M.useState(null),[r,i]=M.useState(!0),[s,o]=M.useState(null),[a,l]=M.useState(null),[u,c]=M.useState(null),[h,f]=M.useState({width:window.innerWidth,height:window.innerHeight}),[p,g]=M.useState(150),[b,D]=M.useState(""),[P,x]=M.useState(2),E=Fr(),_=M.useCallback(X6(L=>{l(L)},50),[]);M.useEffect(()=>{const L=()=>{f({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",L),()=>window.removeEventListener("resize",L)},[]),M.useEffect(()=>{(async()=>{try{const N={},Z=(await xn(Yt(Rt,"interviewSummaries"))).docs.map(async q=>{const G=Yt(Rt,"interviewSummaries",q.id,"subSummaries");(await xn(G)).forEach(ne=>{const W=ne.data();W.keywords&&W.keywords.split(",").map($=>$.trim().toLowerCase()).forEach($=>{N[$]=(N[$]||0)+1})})});await Promise.all(Z);const ae=Object.fromEntries(Object.entries(N).filter(([q,G])=>G>1)),he={name:"keywords",children:Object.entries(ae).map(([q,G])=>({name:q,value:G}))};e(he),i(!1)}catch(N){console.error("Error fetching data:",N),o("Error loading data"),i(!1)}})()},[]);const R=M.useMemo(()=>{if(!t)return null;let L=t.children;b&&(L=L.filter(ae=>ae.name.toLowerCase().includes(b.toLowerCase()))),L=L.filter(ae=>ae.value>=P),L=[...L].sort((ae,he)=>he.value-ae.value);const N=L.slice(0,p),Y=L.slice(p),Z={name:"keywords",children:N};if(Y.length>0&&!b){const ae=Y.reduce((q,G)=>q+G.value,0),he=Y.length;Z.children.push({name:`${he} more keywords`,value:ae,isOthers:!0})}return Z},[t,p,b,P]);if(r)return m.jsxs("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:[m.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),m.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]});if(s)return m.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-50 px-6",children:m.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg max-w-xl text-center",children:s})});if(!R)return null;const j=__(R).sum(L=>L.value).sort((L,N)=>N.value-L.value),{width:V,height:C}=h,I=V-Oo.left-Oo.right,y=C-Oo.top-Oo.bottom,w=L=>{if(L.data.isOthers){g(N=>N+50);return}u&&u.name===L.data.name?c(null):c({name:L.data.name,value:L.data.value,x:L.x,y:L.y,r:L.r})};return j.children&&Math.max(...j.children.map(L=>L.value)),m.jsxs("div",{className:"w-full h-screen relative bg-gray-50 font-sans overflow-hidden",children:[m.jsxs("div",{className:"absolute top-4 left-4 z-40 bg-white bg-opacity-90 p-4 rounded-lg shadow-sm w-72",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Keyword Visualization"}),m.jsx("div",{className:"mb-3",children:m.jsx("input",{type:"text",placeholder:"Search keywords...",value:b,onChange:L=>D(L.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Visible Keywords"}),m.jsxs("select",{value:p,onChange:L=>g(Number(L.target.value)),className:"w-full px-2 py-1.5 border border-gray-300 rounded-md text-sm",children:[m.jsx("option",{value:"50",children:"Top 50"}),m.jsx("option",{value:"100",children:"Top 100"}),m.jsx("option",{value:"150",children:"Top 150"}),m.jsx("option",{value:"200",children:"Top 200"}),m.jsx("option",{value:"300",children:"Top 300"}),m.jsx("option",{value:"500",children:"Top 500"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Min. Frequency"}),m.jsxs("select",{value:P,onChange:L=>x(Number(L.target.value)),className:"w-full px-2 py-1.5 border border-gray-300 rounded-md text-sm",children:[m.jsx("option",{value:"2",children:"2+"}),m.jsx("option",{value:"3",children:"3+"}),m.jsx("option",{value:"5",children:"5+"}),m.jsx("option",{value:"10",children:"10+"})]})]})]}),m.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Showing ",((S=j.children)==null?void 0:S.length)||0," keywords",t&&t.children&&` of ${t.children.length} total`,m.jsx("br",{}),m.jsx("span",{className:"italic",children:"Only keywords with multiple clips are included"})]})]}),u&&m.jsxs("div",{className:"absolute top-36 left-4 z-50 bg-white rounded-xl shadow-md p-4 max-w-xs border border-gray-200",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 m-0",children:u.name}),m.jsx("button",{onClick:()=>c(null),className:"bg-transparent border-0 text-gray-500 text-base cursor-pointer p-1 flex items-center justify-center rounded hover:bg-gray-100 hover:text-gray-900 transition-colors",children:""})]}),m.jsxs("p",{className:"text-sm text-gray-600 mt-2 mb-4",children:["This topic appears ",m.jsx("strong",{children:u.value})," times across all interviews."]}),m.jsx("div",{children:m.jsxs("button",{onClick:()=>E(`/playlist-builder?keywords=${encodeURIComponent(u.name)}`),className:"w-full py-2.5 px-4 bg-blue-600 text-white font-medium text-sm rounded-lg cursor-pointer flex items-center justify-center hover:bg-blue-700 transition-colors shadow-sm",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4 mr-2",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),"Watch related segments"]})})]}),m.jsx(jC,{width:V,height:C,scaleXMin:.5,scaleXMax:3,scaleYMin:.5,scaleYMax:3,initialTransformMatrix:{scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0},children:L=>m.jsxs("div",{className:"w-full h-full overflow-hidden relative touch-none flex justify-center items-center",children:[m.jsxs("svg",{width:"100%",height:"100%",ref:L.containerRef,className:"bg-white rounded-xl shadow-md mx-4 my-4 mt-20",children:[m.jsx("rect",{width:"100%",height:"100%",fill:"#ffffff",rx:14,onClick:()=>{L.reset(),c(null)}}),m.jsx(EC,{root:j,size:[I,y],padding:16,children:N=>{const Y=N.descendants().filter(Z=>!Z.children);return m.jsx(jh,{transform:L.toString(),top:Oo.top+(y/2-N.r),left:Oo.left+(I/2-N.r),children:Y.map((Z,ae)=>{const he=Math.max(Z.r,20),q=u&&u.name===Z.data.name,G=Z.data.isOthers,ie=Math.min(he/3.5,14),ne=Math.max(5,Math.floor(he/3)),W=Q6(Z.data.name,ne),$=ie,Q=W.length>1?-((W.length-1)*$)/2:0,X=q?"#2563eb":G?"#9ca3af":"#d1d5db",ce=q?3:1,ye=q?"#f0f7ff":G?"#f3f4f6":"#ffffff";return m.jsxs("g",{transform:`translate(${Z.x}, ${Z.y})`,onMouseEnter:()=>_({name:Z.data.name,value:Z.data.value,x:Z.x,y:Z.y,isOthers:Z.data.isOthers}),onMouseLeave:()=>_(null),onClick:()=>w(Z),className:"cursor-pointer",children:[m.jsx("circle",{r:he,fill:ye,stroke:X,strokeWidth:ce,style:{transition:"fill 0.3s, stroke 0.3s, stroke-width 0.3s"}}),m.jsx("text",{textAnchor:"middle",fontSize:ie,fontWeight:q?"bold":"normal",fill:G?"#6b7280":"#111827",pointerEvents:"none",style:{fontFamily:"Inter, system-ui, sans-serif"},children:W.map((Fe,Le)=>m.jsx("tspan",{x:"0",dy:Le===0?Q:$,children:Fe},Le))})]},`circle-${ae}`)})})}})]}),a&&!u&&m.jsxs("div",{className:"absolute bg-gray-900 bg-opacity-90 text-white p-2 px-3 rounded-lg pointer-events-none text-sm z-50 shadow-md max-w-xs",style:{left:L.transformMatrix.translateX+a.x*L.transformMatrix.scaleX,top:L.transformMatrix.translateY+a.y*L.transformMatrix.scaleY-20},children:[m.jsx("div",{className:"font-semibold",children:a.name}),m.jsxs("div",{children:[a.value," mentions"]}),m.jsx("div",{className:"text-xs mt-1 text-blue-200",children:a.isOthers?"Click to show more keywords":"Click to explore"})]})]})}),m.jsxs("div",{className:"absolute bottom-4 right-4 bg-white bg-opacity-90 py-2 px-3 rounded-lg text-xs text-gray-600 shadow-sm flex items-center",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3.5 h-3.5 mr-1.5 text-gray-500",children:m.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})}),m.jsx("span",{children:"Scroll to zoom  Drag to pan  Click bubble to select"})]})]})}const Z6="modulepreload",e$=function(t){return"/civil-rights-history-project/"+t},Gx={},t$=function(e,r,i){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(r.map(u=>{if(u=e$(u),u in Gx)return;Gx[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":Z6,c||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),c)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})},n$=M.lazy(()=>t$(()=>import("./MapComponent-CYZa73fu.js").then(t=>t.M),[]));function r$(){const[t,e]=M.useState(!0),[r,i]=M.useState(null),[s,o]=M.useState([]);M.useEffect(()=>{u()},[]);const a=async c=>{try{await new Promise(p=>setTimeout(p,1e3));const f=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(c)}`)).json();if(f.length>0)return[parseFloat(f[0].lat),parseFloat(f[0].lon)]}catch(h){console.error("Error fetching coordinates:",h)}return null},l=c=>{if(!c)return null;const h=/(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,f=c==null?void 0:c.match(h);return f&&f[1]?f[1]:null},u=async()=>{try{e(!0);const c=await xn(Yt(Rt,"interviewSummaries")),h=[];for(const f of c.docs){const p=f.data(),{birthplace:g,name:b,videoEmbedLink:D}=p;if(g){const P=await a(g);if(P){const x=l(D),E=x?`https://img.youtube.com/vi/${x}/default.jpg`:"";h.push({position:P,name:b,birthplace:g,thumbnailURL:E,documentName:f.id})}}}console.log("Markers data:",h),o(h),e(!1)}catch(c){console.error("Error fetching birthplaces:",c),i("Failed to load map data"),e(!1)}};return r?m.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:m.jsx("div",{className:"text-red-500",children:r})}):m.jsxs("div",{className:"map-container",children:[!t&&s.length>0&&m.jsx(M.Suspense,{fallback:m.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:m.jsx(n$,{markers:s})}),t&&m.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})]})}const si=navigator?navigator.userAgent.toLowerCase():"no-user-agent-specified",Da=document?document.documentElement:null,i$=si?si.indexOf("phantom")!==-1:!1,lc=window&&"ActiveXObject"in window;lc&&si.match(/MSIE 9/i);const Uf=si.indexOf("webkit")!==-1;si.indexOf("android");const s$=si.search("android [23]")!==-1,Eo=window?typeof window.orientation<"u":!1,o$=navigator&&window?navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&!window.PointerEvent:!1,a$=navigator&&window?window.PointerEvent&&navigator.pointerEnabled&&navigator.maxTouchPoints:o$,$C=window?window.opera:!1;si.indexOf("gecko");const Ma=si.indexOf("gecko")!==-1&&!Uf&&!$C&&!lc;si.indexOf("chrome");const l$=si.indexOf("edge/")!==-1;Da&&lc&&"transition"in Da.style;window&&"WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix;Da&&"MozPerspective"in Da.style;Da&&"OTransition"in Da.style;let Kx=window?"devicePixelRatio"in window&&window.devicePixelRatio>1:!1;if(!Kx&&window&&"matchMedia"in window){let t=window.matchMedia("(min-resolution:144dpi)");Kx=t&&t.matches}const ni=window&&!window.L_NO_TOUCH&&!i$&&(a$||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);function u$(){var t=window.innerWidth,e=window.innerHeight,r="portrait";return t>e&&(r="landscape"),r}function uc(t){return typeof t=="string"?document.getElementById(t):t}function fe(t,e,r){var i=document.createElement(t);return i.className=e,r&&r.appendChild(i),i}function zl(t,e){var r=fe("button",t,e);return r.type="button",r}function av(t){for(var e={x:0,y:0};t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;return e}function zC(t){for(var e=document.documentElement.style,r=0;r<t.length;r++)if(t[r]in e)return t[r];return!1}zC(["transition","webkitTransition","OTransition","MozTransition","msTransition"]);zC(["transformProperty","WebkitTransform","OTransform","MozTransform","msTransform"]);class Ye extends Error{constructor(e,r){super(),this.name="TLError",this.message=e||"error",this.message_key=this.message,this.detail=r||""}}const Yx={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function HC(t){Yx[t.toLowerCase()]&&(t=Yx[t.toLowerCase()]);var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(i,s,o,a){return s+s+o+o+a+a});var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null}function ot(t,e){var r;for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}function c$(t){return t==null?!1:t==!0||String(t).toLowerCase()=="true"||Number(t)==1}function zo(t){for(var e=Array.prototype.slice.call(arguments,1),r=0,i=e.length,s;r<i;r++)s=e[r]||{},ot(t,s);return t}const WC=[];function d$(t){WC.push(t)}function Xe(t){WC.forEach(e=>{try{e(t)}catch(r){console&&console.log&&console.log("Error handling trace",r)}})}function hi(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}const Xx=function(){var t=0,e="_tl_id";return function(r){return r[e]=r[e]||++t,r[e]}}();function Zn(t){return t&&typeof t.replace=="function"?t.replace(/^\s+|\s+$/g,""):""}function Dn(t,...e){for(let i of e)for(var r of Object.getOwnPropertyNames(i.prototype))t.prototype[r]=i.prototype[r]}function h$(t,e){if(e||(e=fo(6)),!(e in t))return e;var r=e.match(/^(.+)(-\d+)?$/)[1],i=[];for(let o in t)o.match(/^(.+?)(-\d+)?$/)[1]==r&&i.push(o);e=r+"-"+(i.length+1);for(var s=i.length;i.indexOf(e)!=-1;s++)e=r+"-"+s;return e}function f$(t){var e=[];if(Object.keys)e=Object.keys(t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);for(var i=0;i<e.length;i++){var s=e[i];if(t[s]!=null&&typeof t[s]!="string"||Zn(t[s]).length!=0)return!1}return!0}function pm(t){t=Zn(t),t=t.toLowerCase();for(var e="/_,:;",r="aaaaaeeeeeiiiiooooouuuunc------",i=0,s=e.length;i<s;i++)t=t.replace(new RegExp(e.charAt(i),"g"),r.charAt(i));return t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),t=t.replace(/^([0-9])/,"_$1"),t}function fo(t,e){var r=function(o){return Math.floor(Math.random()*o)},i=function(){var o="abcdefghijklmnopqurstuvwxyz";return o.substr(r(32),1)},s=function(o){for(var a="",l=0;l<o;l++)a+=i();return a};return e?e+"-"+s(t):"tl-"+s(t)}function p$(t,e,r){for(var i=0;i<t.length;i++)if(e<t[i])return t[i];return e}function m$(t,e,r){for(var i=t.length-1;i>=0;i--)if(e>t[i])return t[i];return e}function g$(t){return t==parseFloat(t)?!(t%2):void 0}function qC(t,e,r,i){for(var s=i||0,o=0;o<e.length;o++)e[o].data[r]==t&&(s=o);return s}function fa(t){return t&&(t=t.replace(/<a\b[^>]*>/i,""),t=t.replace(/<\/a>/i,""),t)}function v$(t,e){t.data=zo({},t.data,e),t.data.unique_id===""&&(t.data.unique_id=fo(6))}function y$(t){return t.match(/<p>[\s\S]*?<\/p>/)?t:"<p>"+t+"</p>"}function La(t){return t=t.replace(/(<[^>]*>)+/g,""),t.replace('"',"'")}function lv(t,e,r){var i=function(l,u,c){c||(c="");var h=30;return u&&u.length>h&&(u=u.substring(0,h)+""),c+"<a class='tl-makelink' href='"+l+"' onclick='void(0)'>"+u+"</a>"},s=/\b(?:https?|ftp):\/\/([a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|])/gim,o=/(^|[^\/>])(www\.[\S]+(\b|$))/gim,a=/([a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+)/gim;return t.replace(s,function(l,u,c,h){if(c>0){var f=h[c-1];if(f=='"'||f=="'"||f=="=")return l}return i(l,u)}).replace(o,function(l,u,c,h,f){return i("http://"+c,c,u)}).replace(a,function(l,u,c,h){return i("mailto:"+u,u)})}function Bf(t){return t.replace(/(.*)www.dropbox.com\/(.*)/,"$1dl.dropboxusercontent.com/$2")}const To={square:t=>{var e={w:0,h:0};return t.w>t.h&&t.h>0?(e.h=t.h,e.w=t.h):(e.w=t.w,e.h=t.w),e},r16_9:t=>t.w!==null&&t.w!==""?Math.round(t.w/16*9):t.h!==null&&t.h!==""?Math.round(t.h/9*16):0,r4_3:t=>{if(t.w!==null&&t.w!=="")return Math.round(t.w/4*3);if(t.h!==null&&t.h!=="")return Math.round(t.h/3*4)}};function _$(t){var e,r=[],i,s;e=t.toString(),e.match("&#038;")?e=e.replace("&#038;","&"):e.match("&#38;")?e=e.replace("&#38;","&"):e.match("&amp;")&&(e=e.replace("&amp;","&")),s=e.slice(e.indexOf("?")+1).split("&");for(var o=0;o<s.length;o++)i=s[o].split("="),r.push(i[0]),r[i[0]]=i[1];return r}function w$(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r+"="+t[r]);return"?"+e.join("&")}function b$(t,e){if(typeof t<"u"){var r=0;for(var i in t){if(e===r)return t[i];r++}return""}else return""}let x$=function(t){var e="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",r=e.length;return{encode:function(i){if(typeof i!="number"||i!==parseInt(i))throw'"encode" only accepts integers.';for(var s="";i;){var o=i%r;i=Math.floor(i/r),s=e[o].toString()+s}return s},decode:function(i){if(typeof i!="string")throw'"decode" only accepts strings.';for(var s=0;i;){var o=e.indexOf(i[0]);if(o<0)throw`"decode" can't find "`+i[0]+'" in the alphabet: "'+e+'"';var a=i.length-1;s+=o*Math.pow(r,a),i=i.substring(1)}return s}}}();function mm(t){if(typeof t=="string"){let s=t.match(/^\s*(\d+h)?(\d+m)?(\d+s)?\s*/i);if(s){var e=parseInt(s[1])||0,r=parseInt(s[2])||0,i=parseInt(s[3])||0;return i+r*60+e*60*60}}else if(typeof t=="number")return t;return 0}function E$(t){var e=new DOMParser().parseFromString(t,"text/html");return e.body.textContent||""}function T$(t){}function $f(t){var e=new T$;return e.get(t)}function Mu(t){return t==1?1:1-Math.pow(2,-10*t)}function Ja(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}let Uh=function(){};Uh.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments)},r=function(){};r.prototype=this.prototype;var i=new r;i.constructor=e,e.prototype=i,e.superclass=this.prototype;for(var s in this)this.hasOwnProperty(s)&&s!=="prototype"&&s!=="superclass"&&(e[s]=this[s]);return t.statics&&(zo(e,t.statics),delete t.statics),t.includes&&(zo.apply(null,[i].concat(t.includes)),delete t.includes),t.options&&i.options&&(t.options=zo({},i.options,t.options)),zo(i,t),e.extend=Uh.extend,e.include=function(o){zo(this.prototype,o)},e};class Mn{on(e,r,i){if(!r)throw new Ye("No callback function provided");var s=this._tl_events=this._tl_events||{};return s[e]=s[e]||[],s[e].push({action:r,context:i||this}),this}addEventListener(e,r,i){return this.on(e,r,i)}hasEventListeners(e){var r="_tl_events";return r in this&&e in this[r]&&this[r][e].length>0}removeEventListener(e,r,i){if(!this.hasEventListeners(e))return this;for(var s=0,o=this._tl_events,a=o[e].length;s<a;s++)if(o[e][s].action===r&&(!i||o[e][s].context===i))return o[e].splice(s,1),this;return this}off(e,r,i){return this.removeEventListener(e,r,i)}fire(e,r){if(!this.hasEventListeners(e))return this;for(var i=ot({type:e,target:this},r),s=this._tl_events[e].slice(),o=0,a=s.length;o<a;o++)s[o].action?s[o].action.call(s[o].context||this,i):Xe(`no action defined for ${e} listener`);return this}}function Ni(t,e){return S$(t,e)}const S$=function(){var t=document,e=window,r=e.performance,i=r&&(r.now||r.webkitNow||r.msNow||r.mozNow),s=i?function(){return i.call(r)}:function(){return+new Date},o=t.documentElement,a=!1,l=1e3,u=/^rgb\(|#/,c=/^([+\-])=([\d\.]+)/,h=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,f=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,p=/scale\(((?:[+\-]=)?([\d\.]+))\)/,g=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,b=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,D={lineHeight:1,zoom:1,zIndex:1,opacity:1,transform:1},P=function(){var W=t.createElement("a").style,$=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],Q;for(Q=0;Q<$.length;Q++)if($[Q]in W)return $[Q]}(),x=function(){return typeof t.createElement("a").style.opacity<"u"}(),E=t.defaultView&&t.defaultView.getComputedStyle?function(W,$){$=$=="transform"?P:$,$=N($);var Q=null,X=t.defaultView.getComputedStyle(W,"");return X&&(Q=X[$]),W.style[$]||Q}:o.currentStyle?function(W,$){if($=N($),$=="opacity"){var Q=100;try{Q=W.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch{try{Q=W.filters("alpha").opacity}catch{}}return Q/100}var X=W.currentStyle?W.currentStyle[$]:null;return W.style[$]||X}:function(W,$){return W.style[N($)]},_=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||function(W){e.setTimeout(function(){W(+new Date)},17)}}(),R=[];_(function(W){a=W>1e12!=s()>1e12});function j(W,$,Q){if(Array.prototype.indexOf)return W.indexOf($);for(Q=0;Q<W.length;++Q)if(W[Q]===$)return Q}function V(W){var $,Q=R.length;for(i&&W>1e12&&(W=s()),a&&(W=s()),$=Q;$--;)R[$](W);R.length&&_(V)}function C(W){R.push(W)===1&&_(V)}function I(W){var $,Q=j(R,W);Q>=0&&($=R.slice(Q+1),R.length=Q,R=R.concat($))}function y(W,$){var Q={},X;return(X=W.match(f))&&(Q.rotate=ie(X[1],$?$.rotate:null)),(X=W.match(p))&&(Q.scale=ie(X[1],$?$.scale:null)),(X=W.match(g))&&(Q.skewx=ie(X[1],$?$.skewx:null),Q.skewy=ie(X[3],$?$.skewy:null)),(X=W.match(b))&&(Q.translatex=ie(X[1],$?$.translatex:null),Q.translatey=ie(X[3],$?$.translatey:null)),Q}function w(W){var $="";return"rotate"in W&&($+="rotate("+W.rotate+"deg) "),"scale"in W&&($+="scale("+W.scale+") "),"translatex"in W&&($+="translate("+W.translatex+"px,"+W.translatey+"px) "),"skewx"in W&&($+="skew("+W.skewx+"deg,"+W.skewy+"deg)"),$}function S(W,$,Q){return"#"+(1<<24|W<<16|$<<8|Q).toString(16).slice(1)}function L(W){var $=W.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return($?S($[1],$[2],$[3]):W).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function N(W){return W.replace(/-(.)/g,function($,Q){return Q.toUpperCase()})}function Y(W){return typeof W=="function"}function Z(W){return Math.sin(W*Math.PI/2)}function ae(W,$,Q,X,ce,ye){X=Y(X)?X:ne.easings[X]||Z;var Fe=W||l,Le=this,ee=ye-ce,le=s(),we=0,je=0;function Be(nt){var A=nt-le;if(A>Fe||we)return ye=isFinite(ye)?ye:1,we?je&&$(ye):$(ye),I(Be),Q&&Q.apply(Le);isFinite(ye)?$(ee*X(A/Fe)+ce):$(X(A/Fe))}return C(Be),{stop:function(nt){we=1,je=nt,nt||(Q=null)}}}function he(W,$){var Q=W.length,X=[],ce,ye;for(ce=0;ce<Q;++ce)X[ce]=[W[ce][0],W[ce][1]];for(ye=1;ye<Q;++ye)for(ce=0;ce<Q-ye;++ce)X[ce][0]=(1-$)*X[ce][0]+$*X[parseInt(ce+1,10)][0],X[ce][1]=(1-$)*X[ce][1]+$*X[parseInt(ce+1,10)][1];return[X[0][0],X[0][1]]}function q(W,$,Q){var X=[],ce,ye,Fe,Le;for(ce=0;ce<6;ce++)Fe=Math.min(15,parseInt($.charAt(ce),16)),Le=Math.min(15,parseInt(Q.charAt(ce),16)),ye=Math.floor((Le-Fe)*W+Fe),ye=ye>15?15:ye<0?0:ye,X[ce]=ye.toString(16);return"#"+X.join("")}function G(W,$,Q,X,ce,ye,Fe){if(ce=="transform"){Fe={};for(var Le in Q[ye][ce])Fe[Le]=Le in X[ye][ce]?Math.round(((X[ye][ce][Le]-Q[ye][ce][Le])*W+Q[ye][ce][Le])*l)/l:Q[ye][ce][Le];return Fe}else return typeof Q[ye][ce]=="string"?q(W,Q[ye][ce],X[ye][ce]):(Fe=Math.round(((X[ye][ce]-Q[ye][ce])*W+Q[ye][ce])*l)/l,ce in D||(Fe+=$[ye][ce]||"px"),Fe)}function ie(W,$,Q,X,ce){return(Q=c.exec(W))?(ce=parseFloat(Q[2]))&&$+(Q[1]=="+"?1:-1)*ce:parseFloat(W)}function ne(W,$){var Q=W?Q=isFinite(W.length)?W:[W]:[],X,ce=$.complete,ye=$.duration,Fe=$.easing,Le=$.bezier,ee=[],le=[],we=[],je=[],Be,nt;for(Le&&(Be=$.left,nt=$.top,delete $.right,delete $.bottom,delete $.left,delete $.top),X=Q.length;X--;){if(ee[X]={},le[X]={},we[X]={},Le){var A=E(Q[X],"left"),F=E(Q[X],"top"),U=[ie(Y(Be)?Be(Q[X]):Be||0,parseFloat(A)),ie(Y(nt)?nt(Q[X]):nt||0,parseFloat(F))];je[X]=Y(Le)?Le(Q[X],U):Le,je[X].push(U),je[X].unshift([parseInt(A,10),parseInt(F,10)])}for(var H in $){switch(H){case"complete":case"duration":case"easing":case"bezier":continue}var re=E(Q[X],H),pe,Pe=Y($[H])?$[H](Q[X]):$[H];if(typeof Pe=="string"&&u.test(Pe)&&!u.test(re)){delete $[H];continue}ee[X][H]=H=="transform"?y(re):typeof Pe=="string"&&u.test(Pe)?L(re).slice(1):parseFloat(re),le[X][H]=H=="transform"?y(Pe,ee[X][H]):typeof Pe=="string"&&Pe.charAt(0)=="#"?L(Pe).slice(1):ie(Pe,parseFloat(re)),typeof Pe=="string"&&(pe=Pe.match(h))&&(we[X][H]=pe[1])}}return ae.apply(Q,[ye,function($e,et,rt){for(X=Q.length;X--;){Le&&(rt=he(je[X],$e),Q[X].style.left=rt[0]+"px",Q[X].style.top=rt[1]+"px");for(var Me in $)et=G($e,we,ee,le,Me,X),Me=="transform"?Q[X].style[P]=w(et):Me=="opacity"&&!x?Q[X].style.filter="alpha(opacity="+et*100+")":Q[X].style[N(Me)]=et}},ce,Fe])}return ne.tween=ae,ne.getStyle=E,ne.bezier=he,ne.transform=P,ne.parseTransform=y,ne.formatTransform=w,ne.easings={},ne}();class Li{show(e){e||(this._el.container.style.display="block")}hide(e){this._el.container.style.display="none"}addTo(e){e.appendChild(this._el.container),this.onAdd()}removeFrom(e){e.removeChild(this._el.container),this.onRemove()}animatePosition(e,r){var i={duration:this.options.duration,easing:this.options.ease};for(var s in e)e.hasOwnProperty(s)&&(i[s]=e[s]+"px");this.animator&&this.animator.stop(),this.animator=Ni(r,i)}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}setPosition(e,r){for(var i in e)e.hasOwnProperty(i)&&(r?r.style[i]=e[i]+"px":this._el.container.style[i]=e[i]+"px")}getPosition(){return av(this._el.container)}}let I$=class{constructor(e,r,i){this._el={drag:e,move:e},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},i&&(this._el.move=i),this.options={enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:!1,right:!1},momentum_multiplier:2e3,duration:1e3,ease:Ja},this.animator=null,this.dragevent=this.mousedrag,ni&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},ot(this.options,r)}enable(e){this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){Ve.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Ve.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(e){this.options.constraint=e}_onDragStart(e){ni?e.originalEvent?(this.data.pagex.start=e.originalEvent.touches[0].screenX,this.data.pagey.start=e.originalEvent.touches[0].screenY):(this.data.pagex.start=e.targetTouches[0].screenX,this.data.pagey.start=e.targetTouches[0].screenY):(this.data.pagex.start=e.pageX,this.data.pagey.start=e.pageY),this.options.enable.x&&(this._el.move.style.left=this.data.pagex.start-this._el.move.offsetWidth/2+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.pagey.start-this._el.move.offsetHeight/2+"px"),this.data.pos.start=av(this._el.drag),this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),Ve.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Ve.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(e){this.data.sliding=!1,Ve.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Ve.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(e){e.preventDefault(),this.data.sliding=!0,ni?e.originalEvent?(this.data.pagex.end=e.originalEvent.touches[0].screenX,this.data.pagey.end=e.originalEvent.touches[0].screenY):(this.data.pagex.end=e.targetTouches[0].screenX,this.data.pagey.end=e.targetTouches[0].screenY):(this.data.pagex.end=e.pageX,this.data.pagey.end=e.pageY),this.data.pos.end=av(this._el.drag),this.data.new_pos.x=-(this.data.pagex.start-this.data.pagex.end-this.data.pos.start.x),this.data.new_pos.y=-(this.data.pagey.start-this.data.pagey.end-this.data.pos.start.y),this.options.enable.x&&(this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var e={x:0,y:0,time:0},r={x:0,y:0,time:0},i=!1;e.time=(new Date().getTime()-this.data.time.start)*10,r.time=(new Date().getTime()-this.data.time.start)*10,r.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),r.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),e.x=Math.round(r.x/r.time),e.y=Math.round(r.y/r.time),this.data.new_pos.x=Math.min(this.data.pos.end.x+e.x),this.data.new_pos.y=Math.min(this.data.pos.end.y+e.y),this.options.enable.x?this.data.new_pos.x<0&&(this.data.new_pos.x=0):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,r.time<3e3&&(i=!0),Math.abs(r.x)>1e4&&(this.data.direction="left",r.x>0&&(this.data.direction="right")),Math.abs(r.y)>1e4&&(this.data.direction="up",r.y>0&&(this.data.direction="down")),this._animateMomentum(),i&&this.fire("swipe_"+this.data.direction,this.data)}_animateMomentum(){var e={x:this.data.new_pos.x,y:this.data.new_pos.y},r={duration:this.options.duration,easing:Mu};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(e.y>this.options.constraint.bottom?e.y=this.options.constraint.bottom:e.y<this.options.constraint.top&&(e.y=this.options.constraint.top)),r.top=Math.floor(e.y)+"px"),this.options.enable.x&&((this.options.constraint.left||this.options.constraint.right)&&(e.x>this.options.constraint.left?e.x=this.options.constraint.left:e.x<this.options.constraint.right&&(e.x=this.options.constraint.right)),r.left=Math.floor(e.x)+"px"),this.animator=Ni(this._el.move,r),this.fire("momentum",this.data)}};Dn(Mn);var Ve={addListener:function(t,e,r,i){var s=Xx(r),o="_tl_"+e+s;if(!t[o]){var a=function(c){return r.call(i||t,c||Ve._getEvent())};if(ni&&e==="dblclick"&&this.addDoubleTapListener)this.addDoubleTapListener(t,a,s);else if("addEventListener"in t)if(e==="mousewheel")t.addEventListener("DOMMouseScroll",a,!1),t.addEventListener(e,a,!1);else if(e==="mouseenter"||e==="mouseleave"){var l=a,u=e==="mouseenter"?"mouseover":"mouseout";a=function(c){if(Ve._checkMouse(t,c))return l(c)},t.addEventListener(u,a,!1)}else t.addEventListener(e,a,!1);else"attachEvent"in t&&t.attachEvent("on"+e,a);t[o]=a}},removeListener:function(t,e,r){var i=Xx(r),s="_tl_"+e+i,o=t[s];o&&(ni&&e==="dblclick"&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,i):"removeEventListener"in t?e==="mousewheel"?(t.removeEventListener("DOMMouseScroll",o,!1),t.removeEventListener(e,o,!1)):e==="mouseenter"||e==="mouseleave"?t.removeEventListener(e==="mouseenter"?"mouseover":"mouseout",o,!1):t.removeEventListener(e,o,!1):"detachEvent"in t&&t.detachEvent("on"+e,o),t[s]=null)},_checkMouse:function(t,e){var r=e.relatedTarget;if(!r)return!0;try{for(;r&&r!==t;)r=r.parentNode}catch{return!1}return r!==t},_getEvent:function(){var t=window.event;if(!t)for(var e=arguments.callee.caller;e&&(t=e.arguments[0],!(t&&window.Event===t.constructor));)e=e.caller;return t},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},disableClickPropagation:function(t){Ve.addListener(t,I$.START,Ve.stopPropagation),Ve.addListener(t,"click",Ve.stopPropagation),Ve.addListener(t,"dblclick",Ve.stopPropagation)},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stop:function(t){Ve.preventDefault(t),Ve.stopPropagation(t)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e}},Oi=function(){var t,e,r,i,s=[],o=s.slice,a=s.filter,l=window.document,u={},c={},h={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},f=/^\s*<(\w+|!)[^>]*>/,p=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,g=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,b=/^(?:body|html)$/i,D=/([A-Z])/g,P=["val","css","html","text","data","width","height","offset"],x=["after","prepend","before","append"],E=l.createElement("table"),_=l.createElement("tr"),R={tr:l.createElement("tbody"),tbody:E,thead:E,tfoot:E,td:_,th:_,"*":l.createElement("div")},j=/complete|loaded|interactive/,V=/^[\w-]*$/,C={},I=C.toString,y={},w,S,L=l.createElement("div"),N={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},Y=Array.isArray||function(A){return A instanceof Array};y.matches=function(A,F){if(!F||!A||A.nodeType!==1)return!1;var U=A.webkitMatchesSelector||A.mozMatchesSelector||A.oMatchesSelector||A.matchesSelector;if(U)return U.call(A,F);var H,re=A.parentNode,pe=!re;return pe&&(re=L).appendChild(A),H=~y.qsa(re,F).indexOf(A),pe&&L.removeChild(A),H};function Z(A){return A==null?String(A):C[I.call(A)]||"object"}function ae(A){return Z(A)=="function"}function he(A){return A!=null&&A==A.window}function q(A){return A!=null&&A.nodeType==A.DOCUMENT_NODE}function G(A){return Z(A)=="object"}function ie(A){return G(A)&&!he(A)&&Object.getPrototypeOf(A)==Object.prototype}function ne(A){return typeof A.length=="number"}function W(A){return a.call(A,function(F){return F!=null})}function $(A){return A.length>0?r.fn.concat.apply([],A):A}w=function(A){return A.replace(/-+(.)?/g,function(F,U){return U?U.toUpperCase():""})};function Q(A){return A.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}S=function(A){return a.call(A,function(F,U){return A.indexOf(F)==U})};function X(A){return A in c?c[A]:c[A]=new RegExp("(^|\\s)"+A+"(\\s|$)")}function ce(A,F){return typeof F=="number"&&!h[Q(A)]?F+"px":F}function ye(A){var F,U;return u[A]||(F=l.createElement(A),l.body.appendChild(F),U=getComputedStyle(F,"").getPropertyValue("display"),F.parentNode.removeChild(F),U=="none"&&(U="block"),u[A]=U),u[A]}function Fe(A){return"children"in A?o.call(A.children):r.map(A.childNodes,function(F){if(F.nodeType==1)return F})}y.fragment=function(A,F,U){var H,re,pe;return p.test(A)&&(H=r(l.createElement(RegExp.$1))),H||(A.replace&&(A=A.replace(g,"<$1></$2>")),F===t&&(F=f.test(A)&&RegExp.$1),F in R||(F="*"),pe=R[F],pe.innerHTML=""+A,H=r.each(o.call(pe.childNodes),function(){pe.removeChild(this)})),ie(U)&&(re=r(H),r.each(U,function(Pe,$e){P.indexOf(Pe)>-1?re[Pe]($e):re.attr(Pe,$e)})),H},y.Z=function(A,F){return A=A||[],A.__proto__=r.fn,A.selector=F||"",A},y.isZ=function(A){return A instanceof y.Z},y.init=function(A,F){var U;if(A)if(typeof A=="string")if(A=A.trim(),A[0]=="<"&&f.test(A))U=y.fragment(A,RegExp.$1,F),A=null;else{if(F!==t)return r(F).find(A);U=y.qsa(l,A)}else{if(ae(A))return r(l).ready(A);if(y.isZ(A))return A;if(Y(A))U=W(A);else if(G(A))U=[A],A=null;else if(f.test(A))U=y.fragment(A.trim(),RegExp.$1,F),A=null;else{if(F!==t)return r(F).find(A);U=y.qsa(l,A)}}else return y.Z();return y.Z(U,A)},r=function(A,F){return y.init(A,F)};function Le(A,F,U){for(e in F)U&&(ie(F[e])||Y(F[e]))?(ie(F[e])&&!ie(A[e])&&(A[e]={}),Y(F[e])&&!Y(A[e])&&(A[e]=[]),Le(A[e],F[e],U)):F[e]!==t&&(A[e]=F[e])}r.extend=function(A){var F,U=o.call(arguments,1);return typeof A=="boolean"&&(F=A,A=U.shift()),U.forEach(function(H){Le(A,H,F)}),A},y.qsa=function(A,F){var U,H=F[0]=="#",re=!H&&F[0]==".",pe=H||re?F.slice(1):F,Pe=V.test(pe);return q(A)&&Pe&&H?(U=A.getElementById(pe))?[U]:[]:A.nodeType!==1&&A.nodeType!==9?[]:o.call(Pe&&!H?re?A.getElementsByClassName(pe):A.getElementsByTagName(F):A.querySelectorAll(F))};function ee(A,F){return F==null?r(A):r(A).filter(F)}r.contains=function(A,F){return A!==F&&A.contains(F)};function le(A,F,U,H){return ae(F)?F.call(A,U,H):F}function we(A,F,U){U==null?A.removeAttribute(F):A.setAttribute(F,U)}function je(A,F){var U=A.className,H=U&&U.baseVal!==t;if(F===t)return H?U.baseVal:U;H?U.baseVal=F:A.className=F}function Be(A){var F;try{return A&&(A=="true"||(A=="false"?!1:A=="null"?null:!/^0/.test(A)&&!isNaN(F=Number(A))?F:/^[\[\{]/.test(A)?r.parseJSON(A):A))}catch{return A}}r.type=Z,r.isFunction=ae,r.isWindow=he,r.isArray=Y,r.isPlainObject=ie,r.isEmptyObject=function(A){var F;for(F in A)return!1;return!0},r.inArray=function(A,F,U){return s.indexOf.call(F,A,U)},r.camelCase=w,r.trim=function(A){return A==null?"":String.prototype.trim.call(A)},r.uuid=0,r.support={},r.expr={},r.map=function(A,F){var U,H=[],re,pe;if(ne(A))for(re=0;re<A.length;re++)U=F(A[re],re),U!=null&&H.push(U);else for(pe in A)U=F(A[pe],pe),U!=null&&H.push(U);return $(H)},r.each=function(A,F){var U,H;if(ne(A)){for(U=0;U<A.length;U++)if(F.call(A[U],U,A[U])===!1)return A}else for(H in A)if(F.call(A[H],H,A[H])===!1)return A;return A},r.grep=function(A,F){return a.call(A,F)},window.JSON&&(r.parseJSON=JSON.parse),r.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(A,F){C["[object "+F+"]"]=F.toLowerCase()}),r.fn={forEach:s.forEach,reduce:s.reduce,push:s.push,sort:s.sort,indexOf:s.indexOf,concat:s.concat,map:function(A){return r(r.map(this,function(F,U){return A.call(F,U,F)}))},slice:function(){return r(o.apply(this,arguments))},ready:function(A){return j.test(l.readyState)&&l.body?A(r):l.addEventListener("DOMContentLoaded",function(){A(r)},!1),this},get:function(A){return A===t?o.call(this):this[A>=0?A:A+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(A){return s.every.call(this,function(F,U){return A.call(F,U,F)!==!1}),this},filter:function(A){return ae(A)?this.not(this.not(A)):r(a.call(this,function(F){return y.matches(F,A)}))},add:function(A,F){return r(S(this.concat(r(A,F))))},is:function(A){return this.length>0&&y.matches(this[0],A)},not:function(A){var F=[];if(ae(A)&&A.call!==t)this.each(function(H){A.call(this,H)||F.push(this)});else{var U=typeof A=="string"?this.filter(A):ne(A)&&ae(A.item)?o.call(A):r(A);this.forEach(function(H){U.indexOf(H)<0&&F.push(H)})}return r(F)},has:function(A){return this.filter(function(){return G(A)?r.contains(this,A):r(this).find(A).size()})},eq:function(A){return A===-1?this.slice(A):this.slice(A,+A+1)},first:function(){var A=this[0];return A&&!G(A)?A:r(A)},last:function(){var A=this[this.length-1];return A&&!G(A)?A:r(A)},find:function(A){var F,U=this;return typeof A=="object"?F=r(A).filter(function(){var H=this;return s.some.call(U,function(re){return r.contains(re,H)})}):this.length==1?F=r(y.qsa(this[0],A)):F=this.map(function(){return y.qsa(this,A)}),F},closest:function(A,F){var U=this[0],H=!1;for(typeof A=="object"&&(H=r(A));U&&!(H?H.indexOf(U)>=0:y.matches(U,A));)U=U!==F&&!q(U)&&U.parentNode;return r(U)},parents:function(A){for(var F=[],U=this;U.length>0;)U=r.map(U,function(H){if((H=H.parentNode)&&!q(H)&&F.indexOf(H)<0)return F.push(H),H});return ee(F,A)},parent:function(A){return ee(S(this.pluck("parentNode")),A)},children:function(A){return ee(this.map(function(){return Fe(this)}),A)},contents:function(){return this.map(function(){return o.call(this.childNodes)})},siblings:function(A){return ee(this.map(function(F,U){return a.call(Fe(U.parentNode),function(H){return H!==U})}),A)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(A){return r.map(this,function(F){return F[A]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=ye(this.nodeName))})},replaceWith:function(A){return this.before(A).remove()},wrap:function(A){var F=ae(A);if(this[0]&&!F)var U=r(A).get(0),H=U.parentNode||this.length>1;return this.each(function(re){r(this).wrapAll(F?A.call(this,re):H?U.cloneNode(!0):U)})},wrapAll:function(A){if(this[0]){r(this[0]).before(A=r(A));for(var F;(F=A.children()).length;)A=F.first();r(A).append(this)}return this},wrapInner:function(A){var F=ae(A);return this.each(function(U){var H=r(this),re=H.contents(),pe=F?A.call(this,U):A;re.length?re.wrapAll(pe):H.append(pe)})},unwrap:function(){return this.parent().each(function(){r(this).replaceWith(r(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(A){return this.each(function(){var F=r(this);(A===t?F.css("display")=="none":A)?F.show():F.hide()})},prev:function(A){return r(this.pluck("previousElementSibling")).filter(A||"*")},next:function(A){return r(this.pluck("nextElementSibling")).filter(A||"*")},html:function(A){return arguments.length===0?this.length>0?this[0].innerHTML:null:this.each(function(F){var U=this.innerHTML;r(this).empty().append(le(this,A,F,U))})},text:function(A){return arguments.length===0?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=A===t?"":""+A})},attr:function(A,F){var U;return typeof A=="string"&&F===t?this.length==0||this[0].nodeType!==1?t:A=="value"&&this[0].nodeName=="INPUT"?this.val():!(U=this[0].getAttribute(A))&&A in this[0]?this[0][A]:U:this.each(function(H){if(this.nodeType===1)if(G(A))for(e in A)we(this,e,A[e]);else we(this,A,le(this,F,H,this.getAttribute(A)))})},removeAttr:function(A){return this.each(function(){this.nodeType===1&&we(this,A)})},prop:function(A,F){return A=N[A]||A,F===t?this[0]&&this[0][A]:this.each(function(U){this[A]=le(this,F,U,this[A])})},data:function(A,F){var U=this.attr("data-"+A.replace(D,"-$1").toLowerCase(),F);return U!==null?Be(U):t},val:function(A){return arguments.length===0?this[0]&&(this[0].multiple?r(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(F){this.value=le(this,A,F,this.value)})},offset:function(A){if(A)return this.each(function(U){var H=r(this),re=le(this,A,U,H.offset()),pe=H.offsetParent().offset(),Pe={top:re.top-pe.top,left:re.left-pe.left};H.css("position")=="static"&&(Pe.position="relative"),H.css(Pe)});if(this.length==0)return null;var F=this[0].getBoundingClientRect();return{left:F.left+window.pageXOffset,top:F.top+window.pageYOffset,width:Math.round(F.width),height:Math.round(F.height)}},css:function(A,F){if(arguments.length<2){var U=this[0],H=getComputedStyle(U,"");if(!U)return;if(typeof A=="string")return U.style[w(A)]||H.getPropertyValue(A);if(Y(A)){var re={};return r.each(Y(A)?A:[A],function(Pe,$e){re[$e]=U.style[w($e)]||H.getPropertyValue($e)}),re}}var pe="";if(Z(A)=="string")!F&&F!==0?this.each(function(){this.style.removeProperty(Q(A))}):pe=Q(A)+":"+ce(A,F);else for(e in A)!A[e]&&A[e]!==0?this.each(function(){this.style.removeProperty(Q(e))}):pe+=Q(e)+":"+ce(e,A[e])+";";return this.each(function(){this.style.cssText+=";"+pe})},index:function(A){return A?this.indexOf(r(A)[0]):this.parent().children().indexOf(this[0])},hasClass:function(A){return A?s.some.call(this,function(F){return this.test(je(F))},X(A)):!1},addClass:function(A){return A?this.each(function(F){i=[];var U=je(this),H=le(this,A,F,U);H.split(/\s+/g).forEach(function(re){r(this).hasClass(re)||i.push(re)},this),i.length&&je(this,U+(U?" ":"")+i.join(" "))}):this},removeClass:function(A){return this.each(function(F){if(A===t)return je(this,"");i=je(this),le(this,A,F,i).split(/\s+/g).forEach(function(U){i=i.replace(X(U)," ")}),je(this,i.trim())})},toggleClass:function(A,F){return A?this.each(function(U){var H=r(this),re=le(this,A,U,je(this));re.split(/\s+/g).forEach(function(pe){(F===t?!H.hasClass(pe):F)?H.addClass(pe):H.removeClass(pe)})}):this},scrollTop:function(A){if(this.length){var F="scrollTop"in this[0];return A===t?F?this[0].scrollTop:this[0].pageYOffset:this.each(F?function(){this.scrollTop=A}:function(){this.scrollTo(this.scrollX,A)})}},scrollLeft:function(A){if(this.length){var F="scrollLeft"in this[0];return A===t?F?this[0].scrollLeft:this[0].pageXOffset:this.each(F?function(){this.scrollLeft=A}:function(){this.scrollTo(A,this.scrollY)})}},position:function(){if(this.length){var A=this[0],F=this.offsetParent(),U=this.offset(),H=b.test(F[0].nodeName)?{top:0,left:0}:F.offset();return U.top-=parseFloat(r(A).css("margin-top"))||0,U.left-=parseFloat(r(A).css("margin-left"))||0,H.top+=parseFloat(r(F[0]).css("border-top-width"))||0,H.left+=parseFloat(r(F[0]).css("border-left-width"))||0,{top:U.top-H.top,left:U.left-H.left}}},offsetParent:function(){return this.map(function(){for(var A=this.offsetParent||l.body;A&&!b.test(A.nodeName)&&r(A).css("position")=="static";)A=A.offsetParent;return A})}},r.fn.detach=r.fn.remove,["width","height"].forEach(function(A){var F=A.replace(/./,function(U){return U[0].toUpperCase()});r.fn[A]=function(U){var H,re=this[0];return U===t?he(re)?re["inner"+F]:q(re)?re.documentElement["scroll"+F]:(H=this.offset())&&H[A]:this.each(function(pe){re=r(this),re.css(A,le(this,U,pe,re[A]()))})}});function nt(A,F){F(A);for(var U in A.childNodes)nt(A.childNodes[U],F)}return x.forEach(function(A,F){var U=F%2;r.fn[A]=function(){var H,re=r.map(arguments,function($e){return H=Z($e),H=="object"||H=="array"||$e==null?$e:y.fragment($e)}),pe,Pe=this.length>1;return re.length<1?this:this.each(function($e,et){pe=U?et:et.parentNode,et=F==0?et.nextSibling:F==1?et.firstChild:F==2?et:null,re.forEach(function(rt){if(Pe)rt=rt.cloneNode(!0);else if(!pe)return r(rt).remove();nt(pe.insertBefore(rt,et),function(Me){Me.nodeName!=null&&Me.nodeName.toUpperCase()==="SCRIPT"&&(!Me.type||Me.type==="text/javascript")&&!Me.src&&window.eval.call(window,Me.innerHTML)})})})},r.fn[U?A+"To":"insert"+(F?"Before":"After")]=function(H){return r(H)[A](this),this}}),y.Z.prototype=r.fn,y.uniq=S,y.deserializeValue=Be,r.zepto=y,r}();window.Zepto=Oi;window.$===void 0&&(window.$=Oi);(function(t){t.zepto.qsa;var e=1,r,i=Array.prototype.slice,s=t.isFunction,o=function(y){return typeof y=="string"},a={},l={},u="onfocusin"in window,c={focus:"focusin",blur:"focusout"},h={mouseenter:"mouseover",mouseleave:"mouseout"};l.click=l.mousedown=l.mouseup=l.mousemove="MouseEvents";function f(y){return y._zid||(y._zid=e++)}function p(y,w,S,L){if(w=g(w),w.ns)var N=b(w.ns);return(a[f(y)]||[]).filter(function(Y){return Y&&(!w.e||Y.e==w.e)&&(!w.ns||N.test(Y.ns))&&(!S||f(Y.fn)===f(S))&&(!L||Y.sel==L)})}function g(y){var w=(""+y).split(".");return{e:w[0],ns:w.slice(1).sort().join(" ")}}function b(y){return new RegExp("(?:^| )"+y.replace(" "," .* ?")+"(?: |$)")}function D(y,w){return y.del&&!u&&y.e in c||!!w}function P(y){return h[y]||u&&c[y]||y}function x(y,w,S,L,N,Y,Z){var ae=f(y),he=a[ae]||(a[ae]=[]);w.split(/\s/).forEach(function(q){if(q=="ready")return t(document).ready(S);var G=g(q);G.fn=S,G.sel=N,G.e in h&&(S=function(ne){var W=ne.relatedTarget;if(!W||W!==this&&!t.contains(this,W))return G.fn.apply(this,arguments)}),G.del=Y;var ie=Y||S;G.proxy=function(ne){if(ne=C(ne),!ne.isImmediatePropagationStopped()){ne.data=L;var W=ie.apply(y,ne._args==r?[ne]:[ne].concat(ne._args));return W===!1&&(ne.preventDefault(),ne.stopPropagation()),W}},G.i=he.length,he.push(G),"addEventListener"in y&&y.addEventListener(P(G.e),G.proxy,D(G,Z))})}function E(y,w,S,L,N){var Y=f(y);(w||"").split(/\s/).forEach(function(Z){p(y,Z,S,L).forEach(function(ae){delete a[Y][ae.i],"removeEventListener"in y&&y.removeEventListener(P(ae.e),ae.proxy,D(ae,N))})})}t.event={add:x,remove:E},t.proxy=function(y,w){if(s(y)){var S=function(){return y.apply(w,arguments)};return S._zid=f(y),S}else{if(o(w))return t.proxy(y[w],y);throw new TypeError("expected function")}},t.fn.bind=function(y,w,S){return this.on(y,w,S)},t.fn.unbind=function(y,w){return this.off(y,w)},t.fn.one=function(y,w,S,L){return this.on(y,w,S,L,1)};var _=function(){return!0},R=function(){return!1},j=/^([A-Z]|returnValue$|layer[XY]$)/,V={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function C(y,w){return(w||!y.isDefaultPrevented)&&(w||(w=y),t.each(V,function(S,L){var N=w[S];y[S]=function(){return this[L]=_,N&&N.apply(w,arguments)},y[L]=R}),(w.defaultPrevented!==r?w.defaultPrevented:"returnValue"in w?w.returnValue===!1:w.getPreventDefault&&w.getPreventDefault())&&(y.isDefaultPrevented=_)),y}function I(y){var w,S={originalEvent:y};for(w in y)!j.test(w)&&y[w]!==r&&(S[w]=y[w]);return C(S,y)}t.fn.delegate=function(y,w,S){return this.on(w,y,S)},t.fn.undelegate=function(y,w,S){return this.off(w,y,S)},t.fn.live=function(y,w){return t(document.body).delegate(this.selector,y,w),this},t.fn.die=function(y,w){return t(document.body).undelegate(this.selector,y,w),this},t.fn.on=function(y,w,S,L,N){var Y,Z,ae=this;return y&&!o(y)?(t.each(y,function(he,q){ae.on(he,w,S,q,N)}),ae):(!o(w)&&!s(L)&&L!==!1&&(L=S,S=w,w=r),(s(S)||S===!1)&&(L=S,S=r),L===!1&&(L=R),ae.each(function(he,q){N&&(Y=function(G){return E(q,G.type,L),L.apply(this,arguments)}),w&&(Z=function(G){var ie,ne=t(G.target).closest(w,q).get(0);if(ne&&ne!==q)return ie=t.extend(I(G),{currentTarget:ne,liveFired:q}),(Y||L).apply(ne,[ie].concat(i.call(arguments,1)))}),x(q,y,L,S,w,Z||Y)}))},t.fn.off=function(y,w,S){var L=this;return y&&!o(y)?(t.each(y,function(N,Y){L.off(N,w,Y)}),L):(!o(w)&&!s(S)&&S!==!1&&(S=w,w=r),S===!1&&(S=R),L.each(function(){E(this,y,S,w)}))},t.fn.trigger=function(y,w){return y=o(y)||t.isPlainObject(y)?t.Event(y):C(y),y._args=w,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(y):t(this).triggerHandler(y,w)})},t.fn.triggerHandler=function(y,w){var S,L;return this.each(function(N,Y){S=I(o(y)?t.Event(y):y),S._args=w,S.target=Y,t.each(p(Y,y.type||y),function(Z,ae){if(L=ae.proxy(S),S.isImmediatePropagationStopped())return!1})}),L},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(y){t.fn[y]=function(w){return w?this.bind(y,w):this.trigger(y)}}),["focus","blur"].forEach(function(y){t.fn[y]=function(w){return w?this.bind(y,w):this.each(function(){try{this[y]()}catch{}}),this}}),t.Event=function(y,w){o(y)||(w=y,y=w.type);var S=document.createEvent(l[y]||"Events"),L=!0;if(w)for(var N in w)N=="bubbles"?L=!!w[N]:S[N]=w[N];return S.initEvent(y,L,!0),C(S)}})(Oi);(function(t){var e=0,r=window.document,i,s,o=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,a=/^(?:text|application)\/javascript/i,l=/^(?:text|application)\/xml/i,u="application/json",c="text/html",h=/^\s*$/;function f(w,S,L){var N=t.Event(S);return t(w).trigger(N,L),!N.isDefaultPrevented()}function p(w,S,L,N){if(w.global)return f(S||r,L,N)}t.active=0;function g(w){w.global&&t.active++===0&&p(w,null,"ajaxStart")}function b(w){w.global&&!--t.active&&p(w,null,"ajaxStop")}function D(w,S){var L=S.context;if(S.beforeSend.call(L,w,S)===!1||p(S,L,"ajaxBeforeSend",[w,S])===!1)return!1;p(S,L,"ajaxSend",[w,S])}function P(w,S,L,N){var Y=L.context,Z="success";L.success.call(Y,w,Z,S),N&&N.resolveWith(Y,[w,Z,S]),p(L,Y,"ajaxSuccess",[S,L,w]),E(Z,S,L)}function x(w,S,L,N,Y){var Z=N.context;N.error.call(Z,L,S,w),Y&&Y.rejectWith(Z,[L,S,w]),p(N,Z,"ajaxError",[L,N,w||S]),E(S,L,N)}function E(w,S,L){var N=L.context;L.complete.call(N,S,w),p(L,N,"ajaxComplete",[S,L]),b(L)}function _(){}t.ajaxJSONP=function(w,S){if(!("type"in w))return t.ajax(w);var L=w.jsonpCallback,N=(t.isFunction(L)?L():L)||"jsonp"+ ++e,Y=r.createElement("script"),Z=window[N],ae,he=function(ie){t(Y).triggerHandler("error",ie||"abort")},q={abort:he},G;return S&&S.promise(q),t(Y).on("load error",function(ie,ne){clearTimeout(G),t(Y).off().remove(),ie.type=="error"||!ae?x(null,ne||"error",q,w,S):P(ae[0],q,w,S),window[N]=Z,ae&&t.isFunction(Z)&&Z(ae[0]),Z=ae=void 0}),D(q,w)===!1?(he("abort"),q):(window[N]=function(){ae=arguments},Y.src=w.url.replace(/\?(.+)=\?/,"?$1="+N),r.head.appendChild(Y),w.timeout>0&&(G=setTimeout(function(){he("timeout")},w.timeout)),q)},t.ajaxSettings={type:"GET",beforeSend:_,success:_,error:_,complete:_,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:u,xml:"application/xml, text/xml",html:c,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0};function R(w){return w&&(w=w.split(";",2)[0]),w&&(w==c?"html":w==u?"json":a.test(w)?"script":l.test(w)&&"xml")||"text"}function j(w,S){return S==""?w:(w+"&"+S).replace(/[&?]{1,2}/,"?")}function V(w){w.processData&&w.data&&t.type(w.data)!="string"&&(w.data=t.param(w.data,w.traditional)),w.data&&(!w.type||w.type.toUpperCase()=="GET")&&(w.url=j(w.url,w.data),w.data=void 0)}t.ajax=function(w){var S=t.extend({},w||{}),L=t.Deferred&&t.Deferred();for(i in t.ajaxSettings)S[i]===void 0&&(S[i]=t.ajaxSettings[i]);g(S),S.crossDomain||(S.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(S.url)&&RegExp.$2!=window.location.host),S.url||(S.url=window.location.toString()),V(S),S.cache===!1&&(S.url=j(S.url,"_="+Date.now()));var N=S.dataType,Y=/\?.+=\?/.test(S.url);if(N=="jsonp"||Y)return Y||(S.url=j(S.url,S.jsonp?S.jsonp+"=?":S.jsonp===!1?"":"callback=?")),t.ajaxJSONP(S,L);var Z=S.accepts[N],ae={},he=function($,Q){ae[$.toLowerCase()]=[$,Q]},q=/^([\w-]+:)\/\//.test(S.url)?RegExp.$1:window.location.protocol,G=S.xhr(),ie=G.setRequestHeader,ne;if(L&&L.promise(G),S.crossDomain||he("X-Requested-With","XMLHttpRequest"),he("Accept",Z||"*/*"),(Z=S.mimeType||Z)&&(Z.indexOf(",")>-1&&(Z=Z.split(",",2)[0]),G.overrideMimeType&&G.overrideMimeType(Z)),(S.contentType||S.contentType!==!1&&S.data&&S.type.toUpperCase()!="GET")&&he("Content-Type",S.contentType||"application/x-www-form-urlencoded"),S.headers)for(s in S.headers)he(s,S.headers[s]);if(G.setRequestHeader=he,G.onreadystatechange=function(){if(G.readyState==4){G.onreadystatechange=_,clearTimeout(ne);var $,Q=!1;if(G.status>=200&&G.status<300||G.status==304||G.status==0&&q=="file:"){N=N||R(S.mimeType||G.getResponseHeader("content-type")),$=G.responseText;try{N=="script"?(0,eval)($):N=="xml"?$=G.responseXML:N=="json"&&($=h.test($)?null:t.parseJSON($))}catch(X){Q=X}Q?x(Q,"parsererror",G,S,L):P($,G,S,L)}else x(G.statusText||null,G.status?"error":"abort",G,S,L)}},D(G,S)===!1)return G.abort(),x(null,"abort",G,S,L),G;if(S.xhrFields)for(s in S.xhrFields)G[s]=S.xhrFields[s];var W="async"in S?S.async:!0;G.open(S.type,S.url,W,S.username,S.password);for(s in ae)ie.apply(G,ae[s]);return S.timeout>0&&(ne=setTimeout(function(){G.onreadystatechange=_,G.abort(),x(null,"timeout",G,S,L)},S.timeout)),G.send(S.data?S.data:null),G};function C(w,S,L,N){var Y=!t.isFunction(S);return{url:w,data:Y?S:void 0,success:Y?t.isFunction(L)?L:void 0:S,dataType:Y&&N||L}}t.get=function(w,S,L,N){return t.ajax(C.apply(null,arguments))},t.post=function(w,S,L,N){var Y=C.apply(null,arguments);return Y.type="POST",t.ajax(Y)},t.getJSON=function(w,S,L){var N=C.apply(null,arguments);return N.dataType="json",t.ajax(N)},t.fetchJSON=function(w){var S=new XMLHttpRequest;return new Promise(function(L,N){S.onreadystatechange=function(){try{if(S.readyState!==4)return;if(S.status>=200&&S.status<300){var Y=JSON.parse(S.responseText);L(Y)}else N({status:S.status,statusText:S.statusText})}catch(Z){N({status:400,statusText:`Error fetching JSON from ${w}: ${Z}`})}},S.open("GET",w,!0),S.send()})},t.fn.load=function(w,S,L){if(!this.length)return this;var N=this,Y=w.split(/\s/),Z,ae=C(w,S,L),he=ae.success;return Y.length>1&&(ae.url=Y[0],Z=Y[1]),ae.success=function(q){N.html(Z?t("<div>").html(q.replace(o,"")).find(Z):q),he&&he.apply(N,arguments)},t.ajax(ae),this};var I=encodeURIComponent;function y(w,S,L,N){var Y,Z=t.isArray(S),ae=t.isPlainObject(S);t.each(S,function(he,q){Y=t.type(q),N&&(he=L?N:N+"["+(ae||Y=="object"||Y=="array"?he:"")+"]"),!N&&Z?w.add(q.name,q.value):Y=="array"||!L&&Y=="object"?y(w,q,L,he):w.add(he,q)})}t.param=function(w,S){var L=[];return L.add=function(N,Y){this.push(I(N)+"="+I(Y))},y(L,w,S),L.join("&").replace(/%20/g,"+")}})(Oi);(function(t){t.fn.serializeArray=function(){var e=[],r;return t([].slice.call(this.get(0).elements)).each(function(){r=t(this);var i=r.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&i!="submit"&&i!="reset"&&i!="button"&&(i!="radio"&&i!="checkbox"||this.checked)&&e.push({name:r.attr("name"),value:r.val()})}),e},t.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(r){e.push(encodeURIComponent(r.name)+"="+encodeURIComponent(r.value))}),e.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var r=t.Event("submit");this.eq(0).trigger(r),r.isDefaultPrevented()||this.get(0).submit()}return this}})(Oi);(function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(r,i){return r=r||[],t.extend(r,t.fn),r.selector=i||"",r.__Z=!0,r},isZ:function(r){return t.type(r)==="array"&&"__Z"in r}});try{getComputedStyle(void 0)}catch{var e=getComputedStyle;window.getComputedStyle=function(i,s){try{return e(i,s)}catch{return null}}}})(Oi);const Bh=Oi.getJSON,Za=Oi.ajax,zf=Oi.fetchJSON,Gr=[["millisecond",1,function(t){}],["second",1e3,function(t){t.setMilliseconds(0)}],["minute",1e3*60,function(t){t.setSeconds(0)}],["hour",1e3*60*60,function(t){t.setMinutes(0)}],["day",1e3*60*60*24,function(t){t.setHours(0)}],["month",1e3*60*60*24*30,function(t){t.setDate(1)}],["year",1e3*60*60*24*365,function(t){t.setMonth(0)}],["decade",1e3*60*60*24*365*10,function(t){var e=t.getFullYear();t.setFullYear(e-e%10)}],["century",1e3*60*60*24*365*100,function(t){var e=t.getFullYear();t.setFullYear(e-e%100)}],["millennium",1e3*60*60*24*365*1e3,function(t){var e=t.getFullYear();t.setFullYear(e-e%1e3)}]],$s=["millisecond","second","minute","hour","day","month","year"],Qx=/^([\+-]?\d+?)(-\d{2}?)?(-\d{2}?)?$/,k$=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,Jx={base:{millisecond:"time_short",second:"time",minute:"time_no_seconds_small_date",hour:"time_no_seconds_small_date",day:"full",month:"month",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"},short:{millisecond:"time_short",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"}},Hf=Uh.extend({initialize:function(t,e,r){typeof t=="number"?this.data={format:"yyyy mmmm",date_obj:new Date(t)}:Date==t.constructor?this.data={format:"yyyy mmmm",date_obj:t}:(this.data=JSON.parse(JSON.stringify(t)),this._createDateObj()),t.format&&!e&&(e=t.format),this._setFormat(e,r)},setDateFormat:function(t){this.data.format=t},getDisplayDate:function(t,e){if(this.data.display_date)return this.data.display_date;t||(t=mr.fallback),t.constructor!=mr&&(Xe("First argument to getDisplayDate must be type Language"),t=mr.fallback);var r=e||this.data.format;return t.formatDate(this.data.date_obj,r)},getMillisecond:function(){return this.getTime()},getTime:function(){return this.data.date_obj.getTime()},isBefore:function(t){if(!this.data.date_obj.constructor==t.data.date_obj.constructor)throw new Ye("date_compare_err");return"isBefore"in this.data.date_obj?this.data.date_obj.isBefore(t.data.date_obj):this.data.date_obj<t.data.date_obj},isAfter:function(t){if(!this.data.date_obj.constructor==t.data.date_obj.constructor)throw new Ye("date_compare_err");return"isAfter"in this.data.date_obj?this.data.date_obj.isAfter(t.data.date_obj):this.data.date_obj>t.data.date_obj},floor:function(t){for(var e=new Date(this.data.date_obj.getTime()),r=0;r<Gr.length;r++)if(Gr[r][2](e),Gr[r][0]==t)return new Hf(e);throw new Ye("invalid_scale_err",t)},_getDateData:function(){var t={year:0,month:1,day:1,hour:0,minute:0,second:0,millisecond:0};ot(t,this.data);for(var e in $s){var r=Zn(t[$s[e]]);if(!r.match(/^-?\d*$/))throw new Ye("invalid_date_err",$s[e]+" = '"+t[$s[e]]+"'");var i=parseInt(t[$s[e]]);isNaN(i)&&(i=e==4||e==5?1:0),t[$s[e]]=i}return t.month>0&&t.month<=12&&(t.month=t.month-1),t},_createDateObj:function(){var t=this._getDateData();this.data.date_obj=new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond),this.data.date_obj.getFullYear()!=t.year&&this.data.date_obj.setFullYear(t.year)},findBestFormat:function(t){for(var e=$s,r=0;r<e.length;r++)if(this.data[e[r]])return t?t in Jx||(t="short"):t="base",Jx[t][e[r]];return""},_setFormat:function(t,e){t?this.data.format=t:this.data.format||(this.data.format=this.findBestFormat()),e?this.data.format_short=e:this.data.format_short||(this.data.format_short=this.findBestFormat(!0))},getFullYear:function(){return this.data.date_obj.getFullYear()}});function Zx(t){if(t.match(Qx)){var e=t.match(Qx).slice(1),r={year:e[0].replace("+","")};return e[1]&&(r.month=e[1].replace("-","")),e[2]&&(r.day=e[2].replace("-","")),r}if(t.match(k$))return cls.parseISODate(t);if(t.match(/^\-?\d+$/))return{year:t};var i={};if(t.match(/\d+\/\d+\/\d+/)){var s=t.match(/\d+\/\d+\/\d+/)[0];t=Zn(t.replace(s,""));var o=s.split("/");i.month=o[0],i.day=o[1],i.year=o[2]}if(t.match(/\d+\/\d+/)){var s=t.match(/\d+\/\d+/)[0];t=Zn(t.replace(s,""));var o=s.split("/");i.month=o[0],i.year=o[1]}if(t.match(":")){var a=t.split(":");if(i.hour=a[0],i.minute=a[1],a[2]){let l=a[2].split(".");i.second=l[0],i.millisecond=l[1]}}return i}const Lu=Uh.extend({initialize:function(t){if(this.year=parseInt(t),isNaN(this.year))throw new Ye("invalid_year_err",t)},isBefore:function(t){return this.year<t.year},isAfter:function(t){return this.year>t.year},getTime:function(){return this.year}}),uv=1e6,cv=uv*10,dv=cv*10,eE=dv*10;function zi(t){return function(e){var r=e.getTime();return new Lu(Math.floor(r/t)*t)}}const $d=[["year",1,new zi(1)],["decade",10,new zi(10)],["century",100,new zi(100)],["millennium",1e3,new zi(1e3)],["age",uv,new zi(uv)],["epoch",cv,new zi(cv)],["era",dv,new zi(dv)],["eon",eE,new zi(eE)]],Wf=Hf.extend({initialize:function(t,e,r){Lu==t.constructor?this.data={date_obj:t}:(this.data=JSON.parse(JSON.stringify(t)),this._createDateObj()),t.format&&!e&&(e=t.format),this._setFormat(e,r)},_createDateObj:function(){var t=this._getDateData();this.data.date_obj=new Lu(t.year)},floor:function(t){for(var e=0;e<$d.length;e++)if($d[e][0]==t){var r=$d[e][2](this.data.date_obj);return new Wf(r)}throw new Ye("invalid_scale_err",t)},getFullYear:function(){return this.data.date_obj.getTime()}}),tE=new RegExp(/\$\{(.+?)\}/g);class mr{constructor(e,r){for(let o in qi.en)this[o]=qi.en[o];if(e&&typeof e=="string"&&e!="en"){var i=e;if(!(i in qi)){console.log(`Expected language ${i} to be cached. Did you call the constructor directly?`);var s=GC(i,r);zf(s).then(o=>{qi[i]=o}).catch(o=>{console.log(`Error loading language [${s}] ${o.statusText} [${o.status}]`)})}ot(this,qi[i])}}mergeData(e){for(k in qi.en)e[k]&&(typeof this[k]=="object"?ot(e[k],this[k]):this[k]=e[k])}formatBigYear(e,r){var i=e.year,s=this.bigdateformats[r]||this.bigdateformats.fallback;if(s){for(var o=0;o<s.length;o++){var a=s[o];if(Math.abs(i/a[0])>1)return nE(Math.abs(i/a[0]),a[1])}return i.toString()}else return Xe("Language file dateformats missing cosmological. Falling back."),nE(i,r)}_(e,r){let i=this.messages[e]||mr.fallback.messages[e]||e;if(i.match(tE)){if(!r)throw new Ye("template_message_without_context");for(let s of i.matchAll(tE)){if(!(s[1]in r))throw new Ye("template_message_without_context");i=i.replace(s[0],r[s[1]])}}return i}formatDate(e,r){return e.constructor==Date?this.formatJSDate(e,r):e.constructor==Lu?this.formatBigYear(e,r):e.data&&e.data.date_obj?this.formatDate(e.data.date_obj,r):(Xe("Unfamiliar date presented for formatting"),e.toString())}formatJSDate(e,r){var i=this,s=function(R,j){var V=i.period_labels[R];if(V)var R=j<12?V[0]:V[1];return"<span class='tl-timeaxis-timesuffix'>"+R+"</span>"},o=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,a=/[^-+\dA-Z]/g;r||(r="full");var l=this.dateformats[r]||mr.fallback.dateformats[r];l||(l=r);var u="get",c=e[u+"Date"](),h=e[u+"Day"](),f=e[u+"Month"](),p=e[u+"FullYear"](),g=e[u+"Hours"](),b=e[u+"Minutes"](),D=e[u+"Seconds"](),P=e[u+"Milliseconds"](),x=e.getTimezoneOffset(),E={d:c,dd:hi(c),ddd:this.date.day_abbr[h],dddd:this.date.day[h],m:f+1,mm:hi(f+1),mmm:this.date.month_abbr[f],mmmm:this.date.month[f],yy:String(p).slice(2),yyyy:p<0&&this.has_negative_year_modifier()?Math.abs(p):p,h:g%12||12,hh:hi(g%12||12),H:g,HH:hi(g),M:b,MM:hi(b),s:D,ss:hi(D),l:hi(P,3),L:hi(P>99?Math.round(P/10):P),t:s("t",g),tt:s("tt",g),T:s("T",g),TT:s("TT",g),Z:(String(e).match(o)||[""]).pop().replace(a,""),o:(x>0?"-":"+")+hi(Math.floor(Math.abs(x)/60)*100+Math.abs(x)%60,4),S:["th","st","nd","rd"][c%10>3?0:(c%100-c%10!=10)*c%10]},_=l.replace(mr.DATE_FORMAT_TOKENS,function(R){return R in E?E[R]:R.slice(1,R.length-1)});return this._applyEra(_,p)}has_negative_year_modifier(){return!!(this.era_labels.negative_year.prefix||this.era_labels.negative_year.suffix)}_applyEra(e,r){var i=r<0?this.era_labels.negative_year:this.era_labels.positive_year,s="";return i.prefix&&(s+="<span>"+i.prefix+"</span> "),s+=e,i.suffix&&(s+=" <span>"+i.suffix+"</span>"),s}}async function C$(t,e){var r=GC(t,e);try{if(!qi[t]){let i=await zf(r);qi[t]=i}return new mr(t,e)}catch(i){return console.log(`Error loading language [${r}] ${i.statusText}`),null}}function GC(t,e){if(/\.json$/.test(t))var r=t;else{var i="/locale/"+t+".json";/\/$/.test(e)&&(i=i.substr(1));var r=e+i}return r}function nE(t,e){if(e.match(/%(\.(\d+))?f/)){var r=e.match(/%(\.(\d+))?f/),i=r[0];return r[2]&&(t=t.toFixed(r[2])),e.replace(i,t)}return e}mr.fallback={messages:{}};mr.DATE_FORMAT_TOKENS=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g;var qi={en:{name:"English (built-in)",lang:"en",api:{wikipedia:"en"},messages:{loading:"Loading",wikipedia:"From Wikipedia, the free encyclopedia",error:"Error",return_to_title:"Return to Title",go_to_end:"Go to the last slide",loading_content:"Loading Content",loading_timeline:"Loading Timeline... ",swipe_to_navigate:"Swipe to Navigate<br><span class='tl-button'>OK</span>",zoom_in:"Zoom in",zoom_out:"Zoom out",unknown_read_err:"An unexpected error occurred trying to read your spreadsheet data",invalid_url_err:"Unable to read Timeline data. Make sure your URL is for a Google Spreadsheet or a Timeline JSON file.",network_err:"Unable to read your Google Spreadsheet. Make sure you have published it to the web.",missing_start_date_err:"Missing start_date",invalid_start_time_without_date:"Invalid configuration: time cannot be used without date.",invalid_end_time_without_date:"Invalid configuration: end time cannot be used without end date.",date_compare_err:"Can't compare timeline date objects on different scales",invalid_scale_err:"Invalid scale",invalid_date_err:"Invalid date: month, day and year must be numbers.",invalid_separator_error:"Invalid time: misuse of : or . as separator.",invalid_hour_err:"Invalid time (hour)",invalid_minute_err:"Invalid time (minute)",invalid_second_err:"Invalid time (second)",invalid_fractional_err:"Invalid time (fractional seconds)",invalid_second_fractional_err:"Invalid time (seconds and fractional seconds)",invalid_year_err:"Invalid year",flickr_notfound_err:"Photo not found or private",flickr_invalidurl_err:"Invalid Flickr URL",imgur_invalidurl_err:"Invalid Imgur URL",twitter_load_err:"Unable to load Tweet",twitterembed_invalidurl_err:"Invalid Twitter Embed url",wikipedia_load_err:"Unable to load Wikipedia entry",wikipedia_image_load_err:"Unable to load Wikipedia image data",spotify_invalid_url:"Invalid Spotify URL",invalid_rgb_err:"Invalid RGB argument",time_scale_scale_err:"Don't know how to get date from time for scale",axis_helper_no_options_err:"Axis helper must be configured with options",axis_helper_scale_err:"No AxisHelper available for scale",invalid_integer_option:"Invalid option valuemust be a whole number.",instagram_bad_request:"Invalid or private Instagram URL",template_message_without_context:"Required variables not provided for template translation message",aria_label_timeline:"Timeline",aria_label_timeline_navigation:"Timeline navigation",aria_label_timeline_content:"Timeline content",aria_label_zoomin:"Show less than ${start} to ${end}",aria_label_zoomout:"Show more than ${start} to ${end}"},date:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbr:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_abbr:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."]},era_labels:{positive_year:{prefix:"",suffix:""},negative_year:{prefix:"",suffix:"BCE"}},period_labels:{t:["a","p"],tt:["am","pm"],T:["A","P"],TT:["AM","PM"]},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time:"h:MM:ss TT' <small>'mmmm d',' yyyy'</small>'",time_short:"h:MM:ss TT",time_no_seconds_short:"h:MM TT",time_no_minutes_short:"h TT",time_no_seconds_small_date:"h:MM TT' <small>'mmmm d',' yyyy'</small>'",time_milliseconds:"l",full_long:"mmm d',' yyyy 'at' h:MM TT",full_long_small_date:"h:MM TT' <small>mmm d',' yyyy'</small>'"},bigdateformats:{fallback:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]],compact:[[1e9,"%.2f bya"],[1e6,"%.1f mya"],[1e3,"%.1f kya"],[1,"%f years ago"]],verbose:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]]}}};let b_=new mr;mr.fallback=b_;class ji{setLanguage(e){this.language=e}getLanguage(){if(this.language){if(typeof this.language=="object")return this.language;Xe(`I18NMixins.getLanguage: this.language should be object, but is ${typeof this.language}`)}return b_}_(e,r){return this.getLanguage()._(e,r)}}class qf{constructor(e,r,i){i&&this.setLanguage(i),this._el={parent:{},container:{},message_container:{},loading_icon:{},message:{}},this.options={width:600,height:600,message_class:"tl-message",message_icon_class:"tl-loading-icon"},this.container=e,ot(this.options,r),this._el.container=fe("div",this.options.message_class),e&&(e.appendChild(this._el.container),this._el.parent=e),this.animator={},this._initLayout(),this._initEvents()}updateMessage(e){e?this._el.message.innerHTML=e:this._el.message.innerHTML=this._("loading"),!this._el.parent.atributes&&this.container.attributes&&(this.container.appendChild(this._el.container),this._el.parent=this.container)}updateDisplay(e,r){}_onMouseClick(){this.fire("clicked",this.options)}_onRemove(){this._el.parent={}}_initLayout(){this._el.message_container=fe("div","tl-message-container",this._el.container),this._el.loading_icon=fe("div",this.options.message_icon_class,this._el.message_container),this._el.message=fe("div","tl-message-content",this._el.message_container),this.updateMessage()}_initEvents(){Ve.addListener(this._el.container,"click",this._onMouseClick,this),Ve.addListener(this,"removed",this._onRemove,this)}}Dn(qf,ji,Mn,Li);function cd(t,r){var r=r||"start_date";t.sort(function(i,s){return i[r].isBefore(s[r])?-1:i[r].isAfter(s[r])?1:0})}function rE(t){var e={hour:null,minute:null,second:null,millisecond:null},r=null,i=t.match(/(\s*[AaPp]\.?[Mm]\.?\s*)$/);i&&(r=Zn(i[0]),t=Zn(t.substring(0,t.lastIndexOf(r))));var s=[],o=t.match(/^\s*(\d{1,2})(\d{2})\s*$/);if(o?s=o.slice(1):(s=t.split(":"),s.length==1&&(s=t.split("."))),s.length>4)throw new Ye("invalid_separator_error");let a=s[0];if(e.hour=parseInt(a),r&&r.toLowerCase()[0]=="p"&&e.hour!=12?e.hour+=12:r&&r.toLowerCase()[0]=="a"&&e.hour==12&&(e.hour=0),isNaN(e.hour)||e.hour<0||e.hour>23)throw new Ye("invalid_hour_err",a);if(s.length>1){let c=s[1];if(e.minute=parseInt(c),isNaN(e.minute))throw new Ye("invalid_minute_err",c)}if(s.length>2){var l=s[2].split(/[\.,]/);if(s=l.concat(s.slice(3)),s.length>2)throw new Ye("invalid_second_fractional_err");if(e.second=parseInt(s[0]),isNaN(e.second))throw new Ye("invalid_second_err",s[0]);if(s.length==2){var u=parseInt(s[1]);if(isNaN(u))throw new Ye("invalid_fractional_err",s[1]);e.millisecond=100*u}}return e}const A$=new RegExp("(^-?\\d+$|^$)");function iE(t){try{return Object.keys(t).forEach(e=>{let r=t[e];if(r&&r.match&&!r.match(A$))throw`invalid value ${r} for ${e}`}),!0}catch{return!1}}const sE={human:Hf,cosmological:Wf};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:KC,setPrototypeOf:oE,isFrozen:P$,getPrototypeOf:R$,getOwnPropertyDescriptor:N$}=Object;let{freeze:An,seal:_r,create:YC}=Object,{apply:hv,construct:fv}=typeof Reflect<"u"&&Reflect;An||(An=function(e){return e});_r||(_r=function(e){return e});hv||(hv=function(e,r,i){return e.apply(r,i)});fv||(fv=function(e,r){return new e(...r)});const dd=Pn(Array.prototype.forEach),D$=Pn(Array.prototype.lastIndexOf),aE=Pn(Array.prototype.pop),El=Pn(Array.prototype.push),M$=Pn(Array.prototype.splice),zd=Pn(String.prototype.toLowerCase),gm=Pn(String.prototype.toString),lE=Pn(String.prototype.match),Tl=Pn(String.prototype.replace),L$=Pn(String.prototype.indexOf),O$=Pn(String.prototype.trim),Cr=Pn(Object.prototype.hasOwnProperty),Sn=Pn(RegExp.prototype.test),Sl=j$(TypeError);function Pn(t){return function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return hv(t,e,i)}}function j$(t){return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return fv(t,r)}}function ze(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zd;oE&&oE(t,null);let i=e.length;for(;i--;){let s=e[i];if(typeof s=="string"){const o=r(s);o!==s&&(P$(e)||(e[i]=o),s=o)}t[s]=!0}return t}function V$(t){for(let e=0;e<t.length;e++)Cr(t,e)||(t[e]=null);return t}function Gs(t){const e=YC(null);for(const[r,i]of KC(t))Cr(t,r)&&(Array.isArray(i)?e[r]=V$(i):i&&typeof i=="object"&&i.constructor===Object?e[r]=Gs(i):e[r]=i);return e}function Il(t,e){for(;t!==null;){const i=N$(t,e);if(i){if(i.get)return Pn(i.get);if(typeof i.value=="function")return Pn(i.value)}t=R$(t)}function r(){return null}return r}const uE=An(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),vm=An(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ym=An(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),F$=An(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),_m=An(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),U$=An(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),cE=An(["#text"]),dE=An(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),wm=An(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),hE=An(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),hd=An(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),B$=_r(/\{\{[\w\W]*|[\w\W]*\}\}/gm),$$=_r(/<%[\w\W]*|[\w\W]*%>/gm),z$=_r(/\$\{[\w\W]*/gm),H$=_r(/^data-[\-\w.\u00B7-\uFFFF]+$/),W$=_r(/^aria-[\-\w]+$/),XC=_r(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),q$=_r(/^(?:\w+script|data):/i),G$=_r(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),QC=_r(/^html$/i),K$=_r(/^[a-z][.\w]*(-[.\w]+)+$/i);var fE=Object.freeze({__proto__:null,ARIA_ATTR:W$,ATTR_WHITESPACE:G$,CUSTOM_ELEMENT:K$,DATA_ATTR:H$,DOCTYPE_NAME:QC,ERB_EXPR:$$,IS_ALLOWED_URI:XC,IS_SCRIPT_OR_DATA:q$,MUSTACHE_EXPR:B$,TMPLIT_EXPR:z$});const kl={element:1,text:3,progressingInstruction:7,comment:8,document:9},Y$=function(){return typeof window>"u"?null:window},X$=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const s="data-tt-policy-suffix";r&&r.hasAttribute(s)&&(i=r.getAttribute(s));const o="dompurify"+(i?"#"+i:"");try{return e.createPolicy(o,{createHTML(a){return a},createScriptURL(a){return a}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}},pE=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function JC(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Y$();const e=xe=>JC(xe);if(e.version="3.2.4",e.removed=[],!t||!t.document||t.document.nodeType!==kl.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const i=r,s=i.currentScript,{DocumentFragment:o,HTMLTemplateElement:a,Node:l,Element:u,NodeFilter:c,NamedNodeMap:h=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:g}=t,b=u.prototype,D=Il(b,"cloneNode"),P=Il(b,"remove"),x=Il(b,"nextSibling"),E=Il(b,"childNodes"),_=Il(b,"parentNode");if(typeof a=="function"){const xe=r.createElement("template");xe.content&&xe.content.ownerDocument&&(r=xe.content.ownerDocument)}let R,j="";const{implementation:V,createNodeIterator:C,createDocumentFragment:I,getElementsByTagName:y}=r,{importNode:w}=i;let S=pE();e.isSupported=typeof KC=="function"&&typeof _=="function"&&V&&V.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:L,ERB_EXPR:N,TMPLIT_EXPR:Y,DATA_ATTR:Z,ARIA_ATTR:ae,IS_SCRIPT_OR_DATA:he,ATTR_WHITESPACE:q,CUSTOM_ELEMENT:G}=fE;let{IS_ALLOWED_URI:ie}=fE,ne=null;const W=ze({},[...uE,...vm,...ym,..._m,...cE]);let $=null;const Q=ze({},[...dE,...wm,...hE,...hd]);let X=Object.seal(YC(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ce=null,ye=null,Fe=!0,Le=!0,ee=!1,le=!0,we=!1,je=!0,Be=!1,nt=!1,A=!1,F=!1,U=!1,H=!1,re=!0,pe=!1;const Pe="user-content-";let $e=!0,et=!1,rt={},Me=null;const ft=ze({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Vt=null;const ai=ze({},["audio","video","img","source","image","track"]);let me=null;const ke=ze({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),be="http://www.w3.org/1998/Math/MathML",Oe="http://www.w3.org/2000/svg",Re="http://www.w3.org/1999/xhtml";let Ge=Re,hn=!1,br=null;const li=ze({},[be,Oe,Re],gm);let Br=ze({},["mi","mo","mn","ms","mtext"]),Ht=ze({},["annotation-xml"]);const $r=ze({},["title","style","font","a","script"]);let xr=null;const So=["application/xhtml+xml","text/html"],qn="text/html";let Nt=null,Er=null;const bc=r.createElement("form"),Vi=function(B){return B instanceof RegExp||B instanceof Function},Io=function(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Er&&Er===B)){if((!B||typeof B!="object")&&(B={}),B=Gs(B),xr=So.indexOf(B.PARSER_MEDIA_TYPE)===-1?qn:B.PARSER_MEDIA_TYPE,Nt=xr==="application/xhtml+xml"?gm:zd,ne=Cr(B,"ALLOWED_TAGS")?ze({},B.ALLOWED_TAGS,Nt):W,$=Cr(B,"ALLOWED_ATTR")?ze({},B.ALLOWED_ATTR,Nt):Q,br=Cr(B,"ALLOWED_NAMESPACES")?ze({},B.ALLOWED_NAMESPACES,gm):li,me=Cr(B,"ADD_URI_SAFE_ATTR")?ze(Gs(ke),B.ADD_URI_SAFE_ATTR,Nt):ke,Vt=Cr(B,"ADD_DATA_URI_TAGS")?ze(Gs(ai),B.ADD_DATA_URI_TAGS,Nt):ai,Me=Cr(B,"FORBID_CONTENTS")?ze({},B.FORBID_CONTENTS,Nt):ft,ce=Cr(B,"FORBID_TAGS")?ze({},B.FORBID_TAGS,Nt):{},ye=Cr(B,"FORBID_ATTR")?ze({},B.FORBID_ATTR,Nt):{},rt=Cr(B,"USE_PROFILES")?B.USE_PROFILES:!1,Fe=B.ALLOW_ARIA_ATTR!==!1,Le=B.ALLOW_DATA_ATTR!==!1,ee=B.ALLOW_UNKNOWN_PROTOCOLS||!1,le=B.ALLOW_SELF_CLOSE_IN_ATTR!==!1,we=B.SAFE_FOR_TEMPLATES||!1,je=B.SAFE_FOR_XML!==!1,Be=B.WHOLE_DOCUMENT||!1,F=B.RETURN_DOM||!1,U=B.RETURN_DOM_FRAGMENT||!1,H=B.RETURN_TRUSTED_TYPE||!1,A=B.FORCE_BODY||!1,re=B.SANITIZE_DOM!==!1,pe=B.SANITIZE_NAMED_PROPS||!1,$e=B.KEEP_CONTENT!==!1,et=B.IN_PLACE||!1,ie=B.ALLOWED_URI_REGEXP||XC,Ge=B.NAMESPACE||Re,Br=B.MATHML_TEXT_INTEGRATION_POINTS||Br,Ht=B.HTML_INTEGRATION_POINTS||Ht,X=B.CUSTOM_ELEMENT_HANDLING||{},B.CUSTOM_ELEMENT_HANDLING&&Vi(B.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(X.tagNameCheck=B.CUSTOM_ELEMENT_HANDLING.tagNameCheck),B.CUSTOM_ELEMENT_HANDLING&&Vi(B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(X.attributeNameCheck=B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),B.CUSTOM_ELEMENT_HANDLING&&typeof B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(X.allowCustomizedBuiltInElements=B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),we&&(Le=!1),U&&(F=!0),rt&&(ne=ze({},cE),$=[],rt.html===!0&&(ze(ne,uE),ze($,dE)),rt.svg===!0&&(ze(ne,vm),ze($,wm),ze($,hd)),rt.svgFilters===!0&&(ze(ne,ym),ze($,wm),ze($,hd)),rt.mathMl===!0&&(ze(ne,_m),ze($,hE),ze($,hd))),B.ADD_TAGS&&(ne===W&&(ne=Gs(ne)),ze(ne,B.ADD_TAGS,Nt)),B.ADD_ATTR&&($===Q&&($=Gs($)),ze($,B.ADD_ATTR,Nt)),B.ADD_URI_SAFE_ATTR&&ze(me,B.ADD_URI_SAFE_ATTR,Nt),B.FORBID_CONTENTS&&(Me===ft&&(Me=Gs(Me)),ze(Me,B.FORBID_CONTENTS,Nt)),$e&&(ne["#text"]=!0),Be&&ze(ne,["html","head","body"]),ne.table&&(ze(ne,["tbody"]),delete ce.tbody),B.TRUSTED_TYPES_POLICY){if(typeof B.TRUSTED_TYPES_POLICY.createHTML!="function")throw Sl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof B.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Sl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');R=B.TRUSTED_TYPES_POLICY,j=R.createHTML("")}else R===void 0&&(R=X$(g,s)),R!==null&&typeof j=="string"&&(j=R.createHTML(""));An&&An(B),Er=B}},Wt=ze({},[...vm,...ym,...F$]),rl=ze({},[..._m,...U$]),Os=function(B){let se=_(B);(!se||!se.tagName)&&(se={namespaceURI:Ge,tagName:"template"});const _e=zd(B.tagName),ut=zd(se.tagName);return br[B.namespaceURI]?B.namespaceURI===Oe?se.namespaceURI===Re?_e==="svg":se.namespaceURI===be?_e==="svg"&&(ut==="annotation-xml"||Br[ut]):!!Wt[_e]:B.namespaceURI===be?se.namespaceURI===Re?_e==="math":se.namespaceURI===Oe?_e==="math"&&Ht[ut]:!!rl[_e]:B.namespaceURI===Re?se.namespaceURI===Oe&&!Ht[ut]||se.namespaceURI===be&&!Br[ut]?!1:!rl[_e]&&($r[_e]||!Wt[_e]):!!(xr==="application/xhtml+xml"&&br[B.namespaceURI]):!1},fn=function(B){El(e.removed,{element:B});try{_(B).removeChild(B)}catch{P(B)}},ko=function(B,se){try{El(e.removed,{attribute:se.getAttributeNode(B),from:se})}catch{El(e.removed,{attribute:null,from:se})}if(se.removeAttribute(B),B==="is")if(F||U)try{fn(se)}catch{}else try{se.setAttribute(B,"")}catch{}},xc=function(B){let se=null,_e=null;if(A)B="<remove></remove>"+B;else{const Ct=lE(B,/^[\r\n\t ]+/);_e=Ct&&Ct[0]}xr==="application/xhtml+xml"&&Ge===Re&&(B='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+B+"</body></html>");const ut=R?R.createHTML(B):B;if(Ge===Re)try{se=new p().parseFromString(ut,xr)}catch{}if(!se||!se.documentElement){se=V.createDocument(Ge,"template",null);try{se.documentElement.innerHTML=hn?j:ut}catch{}}const qt=se.body||se.documentElement;return B&&_e&&qt.insertBefore(r.createTextNode(_e),qt.childNodes[0]||null),Ge===Re?y.call(se,Be?"html":"body")[0]:Be?se.documentElement:qt},ui=function(B){return C.call(B.ownerDocument||B,B,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},il=function(B){return B instanceof f&&(typeof B.nodeName!="string"||typeof B.textContent!="string"||typeof B.removeChild!="function"||!(B.attributes instanceof h)||typeof B.removeAttribute!="function"||typeof B.setAttribute!="function"||typeof B.namespaceURI!="string"||typeof B.insertBefore!="function"||typeof B.hasChildNodes!="function")},Ec=function(B){return typeof l=="function"&&B instanceof l};function Ln(xe,B,se){dd(xe,_e=>{_e.call(e,B,se,Er)})}const sl=function(B){let se=null;if(Ln(S.beforeSanitizeElements,B,null),il(B))return fn(B),!0;const _e=Nt(B.nodeName);if(Ln(S.uponSanitizeElement,B,{tagName:_e,allowedTags:ne}),B.hasChildNodes()&&!Ec(B.firstElementChild)&&Sn(/<[/\w]/g,B.innerHTML)&&Sn(/<[/\w]/g,B.textContent)||B.nodeType===kl.progressingInstruction||je&&B.nodeType===kl.comment&&Sn(/<[/\w]/g,B.data))return fn(B),!0;if(!ne[_e]||ce[_e]){if(!ce[_e]&&js(_e)&&(X.tagNameCheck instanceof RegExp&&Sn(X.tagNameCheck,_e)||X.tagNameCheck instanceof Function&&X.tagNameCheck(_e)))return!1;if($e&&!Me[_e]){const ut=_(B)||B.parentNode,qt=E(B)||B.childNodes;if(qt&&ut){const Ct=qt.length;for(let en=Ct-1;en>=0;--en){const On=D(qt[en],!0);On.__removalCount=(B.__removalCount||0)+1,ut.insertBefore(On,x(B))}}}return fn(B),!0}return B instanceof u&&!Os(B)||(_e==="noscript"||_e==="noembed"||_e==="noframes")&&Sn(/<\/no(script|embed|frames)/i,B.innerHTML)?(fn(B),!0):(we&&B.nodeType===kl.text&&(se=B.textContent,dd([L,N,Y],ut=>{se=Tl(se,ut," ")}),B.textContent!==se&&(El(e.removed,{element:B.cloneNode()}),B.textContent=se)),Ln(S.afterSanitizeElements,B,null),!1)},Co=function(B,se,_e){if(re&&(se==="id"||se==="name")&&(_e in r||_e in bc))return!1;if(!(Le&&!ye[se]&&Sn(Z,se))){if(!(Fe&&Sn(ae,se))){if(!$[se]||ye[se]){if(!(js(B)&&(X.tagNameCheck instanceof RegExp&&Sn(X.tagNameCheck,B)||X.tagNameCheck instanceof Function&&X.tagNameCheck(B))&&(X.attributeNameCheck instanceof RegExp&&Sn(X.attributeNameCheck,se)||X.attributeNameCheck instanceof Function&&X.attributeNameCheck(se))||se==="is"&&X.allowCustomizedBuiltInElements&&(X.tagNameCheck instanceof RegExp&&Sn(X.tagNameCheck,_e)||X.tagNameCheck instanceof Function&&X.tagNameCheck(_e))))return!1}else if(!me[se]){if(!Sn(ie,Tl(_e,q,""))){if(!((se==="src"||se==="xlink:href"||se==="href")&&B!=="script"&&L$(_e,"data:")===0&&Vt[B])){if(!(ee&&!Sn(he,Tl(_e,q,"")))){if(_e)return!1}}}}}}return!0},js=function(B){return B!=="annotation-xml"&&lE(B,G)},Tr=function(B){Ln(S.beforeSanitizeAttributes,B,null);const{attributes:se}=B;if(!se||il(B))return;const _e={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:$,forceKeepAttr:void 0};let ut=se.length;for(;ut--;){const qt=se[ut],{name:Ct,namespaceURI:en,value:On}=qt,Sr=Nt(Ct);let xt=Ct==="value"?On:O$(On);if(_e.attrName=Sr,_e.attrValue=xt,_e.keepAttr=!0,_e.forceKeepAttr=void 0,Ln(S.uponSanitizeAttribute,B,_e),xt=_e.attrValue,pe&&(Sr==="id"||Sr==="name")&&(ko(Ct,B),xt=Pe+xt),je&&Sn(/((--!?|])>)|<\/(style|title)/i,xt)){ko(Ct,B);continue}if(_e.forceKeepAttr||(ko(Ct,B),!_e.keepAttr))continue;if(!le&&Sn(/\/>/i,xt)){ko(Ct,B);continue}we&&dd([L,N,Y],Sc=>{xt=Tl(xt,Sc," ")});const Ao=Nt(B.nodeName);if(Co(Ao,Sr,xt)){if(R&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!en)switch(g.getAttributeType(Ao,Sr)){case"TrustedHTML":{xt=R.createHTML(xt);break}case"TrustedScriptURL":{xt=R.createScriptURL(xt);break}}try{en?B.setAttributeNS(en,Ct,xt):B.setAttribute(Ct,xt),il(B)?fn(B):aE(e.removed)}catch{}}}Ln(S.afterSanitizeAttributes,B,null)},Tc=function xe(B){let se=null;const _e=ui(B);for(Ln(S.beforeSanitizeShadowDOM,B,null);se=_e.nextNode();)Ln(S.uponSanitizeShadowNode,se,null),sl(se),Tr(se),se.content instanceof o&&xe(se.content);Ln(S.afterSanitizeShadowDOM,B,null)};return e.sanitize=function(xe){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},se=null,_e=null,ut=null,qt=null;if(hn=!xe,hn&&(xe="<!-->"),typeof xe!="string"&&!Ec(xe))if(typeof xe.toString=="function"){if(xe=xe.toString(),typeof xe!="string")throw Sl("dirty is not a string, aborting")}else throw Sl("toString is not a function");if(!e.isSupported)return xe;if(nt||Io(B),e.removed=[],typeof xe=="string"&&(et=!1),et){if(xe.nodeName){const On=Nt(xe.nodeName);if(!ne[On]||ce[On])throw Sl("root node is forbidden and cannot be sanitized in-place")}}else if(xe instanceof l)se=xc("<!---->"),_e=se.ownerDocument.importNode(xe,!0),_e.nodeType===kl.element&&_e.nodeName==="BODY"||_e.nodeName==="HTML"?se=_e:se.appendChild(_e);else{if(!F&&!we&&!Be&&xe.indexOf("<")===-1)return R&&H?R.createHTML(xe):xe;if(se=xc(xe),!se)return F?null:H?j:""}se&&A&&fn(se.firstChild);const Ct=ui(et?xe:se);for(;ut=Ct.nextNode();)sl(ut),Tr(ut),ut.content instanceof o&&Tc(ut.content);if(et)return xe;if(F){if(U)for(qt=I.call(se.ownerDocument);se.firstChild;)qt.appendChild(se.firstChild);else qt=se;return($.shadowroot||$.shadowrootmode)&&(qt=w.call(i,qt,!0)),qt}let en=Be?se.outerHTML:se.innerHTML;return Be&&ne["!doctype"]&&se.ownerDocument&&se.ownerDocument.doctype&&se.ownerDocument.doctype.name&&Sn(QC,se.ownerDocument.doctype.name)&&(en="<!DOCTYPE "+se.ownerDocument.doctype.name+`>
`+en),we&&dd([L,N,Y],On=>{en=Tl(en,On," ")}),R&&H?R.createHTML(en):en},e.setConfig=function(){let xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Io(xe),nt=!0},e.clearConfig=function(){Er=null,nt=!1},e.isValidAttribute=function(xe,B,se){Er||Io({});const _e=Nt(xe),ut=Nt(B);return Co(_e,ut,se)},e.addHook=function(xe,B){typeof B=="function"&&El(S[xe],B)},e.removeHook=function(xe,B){if(B!==void 0){const se=D$(S[xe],B);return se===-1?void 0:M$(S[xe],se,1)[0]}return aE(S[xe])},e.removeHooks=function(xe){S[xe]=[]},e.removeAllHooks=function(){S=pE()},e}var Gf=JC();const Q$={text:["headline","text"],media:["caption","credit"]},J$={start_date:["display_date"],end_date:["display_date"],slide:["display_date","group"],date:["display_date"]};Gf.addHook("afterSanitizeAttributes",function(t){if(t.nodeName=="A"&&"href"in t){"target"in t.attributes||t.setAttribute("target","_blank");let e=t.attributes.rel;e?e.value.indexOf("noopener")==-1&&t.setAttribute("rel",`noopener ${e.value}`):t.setAttribute("rel","noopener")}});function mE(t,e,r){Object.keys(r).forEach(i=>{var s=i=="slide"?t:t[i];s&&r[i].forEach(o=>{typeof s[o]<"u"&&(s[o]=e(s[o]))})})}function Z$(t){return Gf.sanitize(t,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder","target"]})}class Ys{constructor(e){if(this.title="",this.scale="",this.events=[],this.eras=[],this.event_dict={},this.messages={errors:[],warnings:[]},typeof e=="object"&&e.events){if(this.scale=e.scale,this.events=[],this._ensureValidScale(e.events),e.title){var r=this._assignID(e.title);this._tidyFields(e.title),this.title=e.title,this.event_dict[r]=this.title}for(var i=0;i<e.events.length;i++)try{this.addEvent(e.events[i],!0)}catch(s){this.logError(s)}e.eras&&e.eras.forEach((s,o)=>{try{this.addEra(s)}catch(a){this.logError("Era "+o+": "+a)}}),cd(this.events),cd(this.eras)}}logError(e){Xe(`logError: ${e}`),this.messages.errors.push(e)}getErrors(e){return e?this.messages.errors.join(e):this.messages.errors}validate(){(typeof this.events>"u"||typeof this.events.length>"u"||this.events.length==0)&&this.logError("Timeline configuration has no events.");for(var e=0;e<this.eras.length;e++)if(typeof this.eras[e].start_date>"u"||typeof this.eras[e].end_date>"u"){var r;this.eras[e].headline?r=this.eras[e].headline:r="era "+(e+1),this.logError("All eras must have start and end dates. ["+r+"]")}}isValid(){return this.messages.errors.length==0}addEvent(e,r){var i=this._assignID(e);return typeof e.start_date>"u"?(Xe("Missing start date, skipping event"),console.log(e),null):(this._processDates(e),this._tidyFields(e),this.events.push(e),this.event_dict[i]=e,r||cd(this.events),i)}addEra(e){var r=this._assignID(e);if(typeof e.start_date>"u")throw new Ye("missing_start_date_err",r);this._processDates(e),this._tidyFields(e),this.eras.push({start_date:e.start_date,end_date:e.end_date,headline:e.text.headline})}_assignID(e){var r=e.unique_id;return Zn(r)||(r=e.text?pm(e.text.headline):null),e.unique_id=h$(this.event_dict,r),e.unique_id}_makeUniqueIdentifiers(e,r){for(var i=[e],s=0;s<r.length;s++)Zn(r[s].unique_id)&&(r[s].unique_id=pm(r[s].unique_id),i.indexOf(r[s].unique_id)==-1?i.push(r[s].unique_id):r[s].unique_id="");if(i.length!=r.length+1){for(var s=0;s<r.length;s++)if(!r[s].unique_id){var o=r[s].text?pm(r[s].text.headline):null;o||(o=fo(6)),i.indexOf(o)!=-1&&(o=o+"-"+s),i.push(o),r[s].unique_id=o}}}_ensureValidScale(e){if(!this.scale){this.scale="human";for(var r=0;r<e.length;r++){if(e[r].scale=="cosmological"){this.scale="cosmological";break}if(e[r].start_date&&typeof e[r].start_date.year<"u"){var i=new Wf(e[r].start_date),s=i.data.date_obj.year;if(s<-271820||s>275759){this.scale="cosmological";break}}}Xe(`Determining scale dynamically: ${this.scale}`)}var o=sE[this.scale];o||this.logError("Don't know how to process dates on scale "+this.scale)}_processDates(e){var r=sE[this.scale];if(!(e.start_date instanceof r)){var i=e.start_date;if(e.start_date=new r(i),typeof e.end_date<"u"&&!(e.end_date instanceof r)){var s=e.end_date,o=!0;for(let a in i)o=o&&i[a]==s[a];o?(Xe("End date same as start date is redundant; dropping end date"),delete e.end_date):e.end_date=new r(s)}}}getEarliestDate(){var e=this.events[0].start_date;return this.eras&&this.eras.length>0&&this.eras[0].start_date.isBefore(e)?this.eras[0].start_date:e}getLatestDate(){for(var e=[],r=0;r<this.events.length;r++)this.events[r].end_date?e.push({date:this.events[r].end_date}):e.push({date:this.events[r].start_date});for(var r=0;r<this.eras.length;r++)this.eras[r].end_date?e.push({date:this.eras[r].end_date}):e.push({date:this.eras[r].start_date});return cd(e,"date"),e.slice(-1)[0].date}_tidyFields(e){function r(i,s,o){o||(o=""),i.hasOwnProperty(s)||(i[s]=o)}e.group&&(e.group=Zn(e.group)),e.text||(e.text={}),r(e.text,"text"),r(e.text,"headline"),mE(e,Z$,Q$),mE(e,E$,J$)}}function e5(t,e){return t==null?"":(e=e||`
`,t.charAt(t.length-e.length)!==e?t:t.substring(0,t.length-e.length))}async function t5(t){return new Promise((e,r)=>{if(t.data){var i=ZC(eA(t.data,t),t);i.useMemoryStore=!0,e(i)}else t.url&&window.fetch(t.url,{mode:"cors"}).then(function(s){if(s.status!=200){s.headers.get("content-type")=="application/json"?s.text().then(o=>{r(JSON.parse(o))}):r({status_code:s.status,message:`Error fetching CSV: [${s.status} ${s.statusText}]`});return}return s.text?s.text():s}).then(function(s){if(s){var o=i5(s,t);o.useMemoryStore=!0,e(o)}}).catch(s=>{r({status_code:500,message:`Error fetching CSV: ${s}`})})})}function ZC(t,e){return e=e||{},e.noHeaderRow!==!0&&t.length>0?{fields:t[0].map((r,i)=>r&&r.trim?r.trim():`untitled${i}`),records:t.slice(1)}:{records:t}}function n5(t){var e={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var r in t)r==="trim"?e.skipinitialspace=t.trim:e[r.toLowerCase()]=t[r];return e}function eA(t,e){(!e||e&&!e.lineterminator)&&(t=r5(t,e));var r=n5(e);t=e5(t,r.lineterminator);var i="",s=!1,o=!1,a="",l=[],u=[],c,h;for(h=function(f){return o!==!0&&(f===""?f=null:r.skipinitialspace===!0&&(f=f.trim())),f},c=0;c<t.length;c+=1)i=t.charAt(c),s===!1&&(i===r.delimiter||i===r.lineterminator)?(a=h(a),l.push(a),i===r.lineterminator&&(u.push(l),l=[]),a="",o=!1):i!==r.quotechar?a+=i:s?t.charAt(c+1)===r.quotechar?(a+=r.quotechar,c+=1):s=!1:(s=!0,o=!0);return a=h(a),l.push(a),u.push(l),r.skipinitialrows&&(u=u.slice(r.skipinitialrows)),u}function r5(t,e){return e&&!e.lineterminator?t.replace(/(\r\n|\n|\r)/gm,`
`):t}function i5(t,e){let r=ZC(eA(t,e)),i=[];return r.records.forEach(s=>{let o={};r.fields.forEach((a,l)=>o[a]=s[l]),i.push(o)}),i}function jo(t){if(t)return t.replace(/[\s,]+/g,"")}function s5(t){let e={key:null,worksheet:0};var r=/\bkey=([-_A-Za-z0-9]+)&?/i,i=/docs.google.com\/spreadsheets(.*?)\/d\//;if(t.match(r))e.key=t.match(r)[1];else if(t.match(i)){var s=t.search(i)+t.match(i)[0].length,o=t.substr(s);e.key=o.split("/")[0],t.match(/\?gid=(\d+)/)&&(e.worksheet=t.match(/\?gid=(\d+)/)[1])}else t.match(/^\b[-_A-Za-z0-9]+$/)&&(e.key=t);return e.key?e:null}function o5(t){return typeof t!="string"?"":t.match(/^(https?:)?\/\/?/)?{url:t}:{color:t}}function a5(t){let e={};Object.keys(t).forEach(i=>{e[i]=Zn(t[i])});var r={media:{caption:e["Media Caption"]||"",credit:e["Media Credit"]||"",url:e.Media||"",thumbnail:e["Media Thumbnail"]||"",alt:e["Alt Text"]||""},text:{headline:e.Headline||"",text:e.Text||""},display_date:e["Display Date"]||"",group:e.Group||e.Tag||"",background:o5(e.Background),type:e.Type||""};if(Object.keys(e).includes("Start Date")||Object.keys(e).includes("End Date"))e["Start Date"]&&(r.start_date=Zx(e["Start Date"])),e["End Date"]&&(r.end_date=Zx(e["End Date"]));else{if(e.Year&&(r.start_date={year:jo(e.Year),month:jo(e.Month)||"",day:jo(e.Day)||""}),e["End Year"]&&(r.end_date={year:jo(e["End Year"])||"",month:jo(e["End Month"])||"",day:jo(e["End Day"])||""}),e.Time)if(r.start_date)ot(r.start_date,rE(e.Time));else throw new Ye("invalid_start_time_without_date");if(e["End Time"])if(r.end_date)ot(r.end_date,rE(e["End Time"]));else throw new Ye("invalid_end_time_without_date");if(r.start_date&&!iE(r.start_date))throw new Ye("invalid_date_err");if(r.end_date&&!iE(r.end_date))throw new Ye("invalid_date_err")}return r}async function l5(t,e){let r=[];t=u5(t),await t5({url:`${e}${t}`}).then(s=>{r=s}).catch(s=>{if(s.proxy_err_code=="response_not_csv")throw new Ye("Timeline could not read the data for your timeline. Make sure you have published it to the web.");let o="undefined error";throw Array.isArray(s.message)?o=s.message.join("<br>"):o=String(s.message),new Ye(o)});let i={events:[],errors:[],warnings:[],eras:[]};return r.forEach((s,o)=>{try{if(!f$(s)){let a=a5(s);h5(a,i)}}catch(a){if(a.constructor==Ye)i.errors.push(a);else{a.message&&(a=a.message);let l=s.Headline||o;i.errors.push(a+`[${l}]`)}}}),i}function u5(t){if(t=t.trim(),t.match(/^[a-zA-Z0-9-_]+$/))return`https://docs.google.com/spreadsheets/d/${t}/pub?output=csv`;if(t.startsWith("https://docs.google.com/spreadsheets/")){if(t.match(/\/pub\?output=csv$/))return t;let e=new URL(t),r=new URLSearchParams(e.search);r.set("output","csv"),r.get("gid")&&r.set("single","true"),e.search=`?${r.toString()}`;let i=e.pathname.substr(0,e.pathname.lastIndexOf("/"));return e.pathname=`${i}/pub`,e.toString()}throw new Ye("invalid_url_err",t)}async function c5(t,e){if(!e.sheets_proxy)throw new Ye("Proxy option must be set to read data from Google");var r=await l5(t,e.sheets_proxy);if(r)return r}async function d5(t,e){let r=null,i={};if(typeof e=="function"?r=e:typeof e=="object"&&(i=e,r=e.callback,typeof i.callback=="function"&&(r=i.callback)),!r)throw new Ye("Second argument to makeConfig must be either a function or an object which includes a 'callback' property with a 'function' type value");var s,o,a=s5(t);if(a){try{o=await c5(t,i)}catch(u){s=new Ys,u.name=="NetworkError"?s.logError(new Ye("network_err")):u.name=="TLError"?s.logError(u):s.logError(new Ye("unknown_read_err",u.name)),r(s);return}if(s=new Ys(o),o.errors)for(var l=0;l<o.errors.length;l++)s.logError(o.errors[l]);r(s)}else Za({url:t,dataType:"json",success:function(u){try{s=new Ys(u)}catch(c){s=new Ys,s.logError(c)}r(s)},error:function(u,c,h){if(s=new Ys,c=="parsererror")var h=new Ye("invalid_url_err");else var h=new Ye("unknown_read_err",c);s.logError(h),r(s)}})}function h5(t,e){var r="event";typeof t.type<"u"&&(r=t.type,delete t.type),r=="title"?e.title?(e.warnings.push("Multiple title slides detected."),e.events.push(t)):e.title=t:r=="era"?e.eras.push(t):e.events.push(t)}class f5{constructor(e){if(e)this.scale=e.scale,this.minor=e.minor,this.major=e.major;else throw new Ye("axis_helper_no_options_err")}getPixelsPerTick(e){return e*this.minor.factor}getMajorTicks(e){return this._getTicks(e,this.major)}getMinorTicks(e){return this._getTicks(e,this.minor)}_getTicks(e,r){for(var i=e._scaled_padding*r.factor,s=e._earliest-i,o=e._latest+i,a=[],l=s;l<o;l+=r.factor)a.push(e.getDateFromTime(l).floor(r.name));return{name:r.name,ticks:a}}}var pv={},tA=function(t,e){pv[t]=[];for(var r=0;r<e.length-1;r++){var i=e[r],s=e[r+1];pv[t].push(new f5({scale:i[3],minor:{name:i[0],factor:i[1]},major:{name:s[0],factor:s[1]}}))}};tA("human",Gr);tA("cosmological",$d);function p5(t,e){typeof e!="number"&&(e=100);var r=t.getScale(),i=pv[r];if(!i)throw new Ye("axis_helper_scale_err",r);for(var s=null,o=0;o<i.length;o++){var a=i[o],l=a.getPixelsPerTick(t._pixels_per_milli);if(l>e){if(s==null)return a;var u=Math.abs(e-l),c=Math.abs(e-l);return u<c?a:s}s=a}return i[i.length-1]}const m5={millisecond:"time_milliseconds",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"compact",epoch:"compact",era:"compact",eon:"compact",eon2:"compact"};class gE{constructor(e,r){var i=e.events;this._scale=e.scale,r=ot({display_width:500,screen_multiplier:3,max_rows:null},r),this._display_width=r.display_width,this._screen_multiplier=r.screen_multiplier,this._pixel_width=this._screen_multiplier*this._display_width,this._group_labels=void 0,this._positions=[],this._pixels_per_milli=0,this._earliest=e.getEarliestDate().getTime(),this._latest=e.getLatestDate().getTime(),this._span_in_millis=this._latest-this._earliest,this._span_in_millis<=0&&(this._span_in_millis=this._computeDefaultSpan(e)),this._average=this._span_in_millis/i.length,this._pixels_per_milli=this.getPixelWidth()/this._span_in_millis,this._axis_helper=p5(this),this._scaled_padding=1/this.getPixelsPerTick()*(this._display_width/2),this._computePositionInfo(i,r.max_rows)}_computeDefaultSpan(e){if(e.scale=="human"){for(var r={},i=0;i<e.events.length;i++){var s=e.events[i].start_date.findBestFormat();r[s]=r[s]?r[s]+1:1}for(var i=Gr.length-1;i>=0;i--)if(r.hasOwnProperty(Gr[i][0])){var o=Gr[Gr.length-1];return Gr[i+1]&&(o=Gr[i+1]),o[1]}return 365*24*60*60*1e3}return 2e5}getGroupLabels(){return this._group_labels||[]}getScale(){return this._scale}getNumberOfRows(){return this._number_of_rows}getPixelWidth(){return this._pixel_width}getPosition(e){return(e-this._earliest)*this._pixels_per_milli}getPositionInfo(e){return this._positions[e]}getPixelsPerTick(){return this._axis_helper.getPixelsPerTick(this._pixels_per_milli)}getTicks(){return{major:this._axis_helper.getMajorTicks(this),minor:this._axis_helper.getMinorTicks(this)}}getDateFromTime(e){if(this._scale=="human")return new Hf(e);if(this._scale=="cosmological")return new Wf(new Lu(e));throw new Ye("time_scale_scale_err",this._scale)}getMajorScale(){return this._axis_helper.major.name}getMinorScale(){return this._axis_helper.minor.name}_assessGroups(e){for(var r=[],i=!1,s=0;s<e.length;s++)e[s].group&&(r.indexOf(e[s].group)<0?r.push(e[s].group):i=!0);return r.length&&i&&r.push(""),r}_computeRowInfo(e,r){for(var i=[],s=0,o=0;o<e.length;o++){var a=e[o],l=[];delete a.row;for(var u=0;u<i.length;u++)if(l.push(i[u].end-a.start),l[u]<=0){a.row=u,i[u]=a;break}if(typeof a.row>"u")if(r===null)a.row=i.length,i.push(a);else if(r>0)a.row=i.length,i.push(a),r--;else{var c=Math.min.apply(null,l),h=l.indexOf(c);a.row=h,a.end>i[h].end&&(i[h]=a),s++}}return{n_rows:i.length,n_overlaps:s}}_computePositionInfo(e,r,i){i=i||100;for(var s=[],o=!1,a=0;a<e.length;a++){var l={start:this.getPosition(e[a].start_date.getTime())};if(this._positions.push(l),typeof e[a].end_date<"u"){var u=this.getPosition(e[a].end_date.getTime());l.width=u-l.start,l.width>i?l.end=l.start+l.width:l.end=l.start+i}else l.width=i,l.end=l.start+i;e[a].group?s.indexOf(e[a].group)<0&&s.push(e[a].group):o=!0}if(s.length){o&&s.push("");for(var h=[],a=0;a<s.length;a++)h[a]={label:s[a],idx:a,positions:[],n_rows:1,n_overlaps:0};for(var a=0;a<this._positions.length;a++){var l=this._positions[a];l.group=s.indexOf(e[a].group||""),l.row=0;for(var f=h[l.group],p=f.positions.length-1;p>=0;p--)f.positions[p].end>l.start&&f.n_overlaps++;f.positions.push(l)}for(var g=s.length;;){var b=Math.max(0,r-g);if(!b||(h.sort(function(E,_){return E.n_overlaps>_.n_overlaps?-1:E.n_overlaps<_.n_overlaps?1:E.idx-_.idx}),!h[0].n_overlaps))break;for(var g=0,a=0;a<h.length;a++){var f=h[a];if(f.n_overlaps&&b){var D=this._computeRowInfo(f.positions,f.n_rows+1);f.n_rows=D.n_rows,f.n_overlaps=D.n_overlaps,b--}g+=f.n_rows}}this._number_of_rows=g,this._group_labels=[],h.sort(function(x,E){return x.idx-E.idx});for(var a=0,P=0;a<h.length;a++){this._group_labels.push({label:h[a].label,rows:h[a].n_rows});for(var p=0;p<h[a].positions.length;p++){var l=h[a].positions[p];l.row+=P}P+=h[a].n_rows}}else{var c=this._computeRowInfo(this._positions,r);this._number_of_rows=c.n_rows}}getAxisTickDateFormat(e){return this._scale=="cosmological"?"compact":m5[e]}}class nA{constructor(e){this._el={parent:{},container:{},message:{}},this.options={width:600,height:600},this.data={label:"",rows:1},this._el.container=fe("div","tl-timegroup"),ot(this.data,e),this.animator={},this._initLayout(),this._initEvents()}updateDisplay(e,r){}setRowPosition(e,r){this.options.height=r*this.data.rows,this.setPosition({top:e}),this._el.container.style.height=this.options.height+"px"}setAlternateRowColor(e,r){var i="tl-timegroup";e&&(i+=" tl-timegroup-alternate"),r&&(i+=" tl-timegroup-hidden"),this._el.container.className=i}_onMouseClick(){this.fire("clicked",this.options)}_initLayout(){this._el.message=fe("div","tl-timegroup-message",this._el.container),this._el.message.innerHTML=this.data.label}_initEvents(){Ve.addListener(this._el.container,"click",this._onMouseClick,this)}_updateDisplay(e,r,i){}}Dn(nA,Mn,Li);class rA{constructor(e,r,i,s){this.start_date=e,this.end_date=r,this.headline=i,this._el={container:{},background:{},content_container:{},content:{},text:{}},this._text={},this._state={loaded:!1},this.options={duration:1e3,ease:$f,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,ot(this.options,s),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(e){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.start_date.getTime()}getEndTime(){return this.end_date?this.end_date.getTime():!1}setHeight(e){var r=12,i=1;this._el.content_container.style.height=e+"px",this._el.content.className="tl-timeera-content",Uf?(i=Math.floor(e/(r+2)),i<1&&(i=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=i):(i=e/r,i>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=i*r+"px")}setWidth(e){this.end_date&&(this._el.container.style.width=e+"px",e>this.options.marker_width_min?(this._el.content_container.style.width=e+"px",this._el.content_container.className="tl-timeera-content-container tl-timeera-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timeera-content-container"))}setClass(e){this._el.container.className=e}setRowPosition(e,r){this.setPosition({top:e}),r<56&&this._el.content_container.remove("tl-timeera-content-container-small")}setColor(e){this._el.container.className="tl-timeera tl-timeera-color"+e}_initLayout(){this._el.container=fe("div","tl-timeera"),this.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timeera tl-timeera-with-end"),this._el.content_container=fe("div","tl-timeera-content-container",this._el.container),this._el.background=fe("div","tl-timeera-background",this._el.content_container),this._el.content=fe("div","tl-timeera-content",this._el.content_container),this._el.text=fe("div","tl-timeera-text",this._el.content),this._text=fe("h2","tl-headline",this._el.text),this.headline&&this.headline!=""&&(this._text.innerHTML=fa(this.headline)),this.onLoaded()}_initEvents(){}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}Dn(rA,Mn,Li);function g5(t){const e=t.getBoundingClientRect();return e.left>=0&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}class iA{constructor(e,r,i){i&&this.setLanguage(i),this._el={container:{},content_container:{},major:{},minor:{}},this._text={},this._state={loaded:!1},this.data={},this.options={duration:1e3,ease:$f,width:600,height:600},this.active=!1,this.animator={},this.axis_helper={},this.minor_ticks=[],this.major_ticks=[],typeof e=="object"?this._el.container=e:this._el.container=uc(e),ot(this.options,r),this._initLayout(),this._initEvents()}show(){}hide(){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}getLeft(){return this._el.container.style.left.slice(0,-2)}drawTicks(e,r){var i=e.getTicks();this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor",this._el.major.style.opacity=0,this._el.minor.style.opacity=0,this.major_ticks=this._createTickElements(i.major.ticks,this._el.major,e.getAxisTickDateFormat(i.major.name)),this.minor_ticks=this._createTickElements(i.minor.ticks,this._el.minor,e.getAxisTickDateFormat(i.minor.name),i.major.ticks),this.positionTicks(e,r,!0),this._el.major.className="tl-timeaxis-major tl-animate-opacity tl-timeaxis-animate-opacity",this._el.minor.className="tl-timeaxis-minor tl-animate-opacity tl-timeaxis-animate-opacity",this._el.major.style.opacity=1,this._el.minor.style.opacity=1}_createTickElements(e,r,i,s){r.innerHTML="";var o={},a=new Date(-1,13,-30);if(o[a.getTime()]=!0,s)for(var l=0;l<s.length;l++)o[s[l].getTime()]=!0;for(var u=[],l=0;l<e.length;l++){var c=e[l];if(!(c.getTime()in o)){var h=fe("div","tl-timeaxis-tick",r),f=fe("span","tl-timeaxis-tick-text tl-animate-opacity",h);let g=c.getDisplayDate(this.getLanguage(),i);f.innerHTML=g,u.push({tick:h,tick_text:f,display_date:g,date:c})}}return u}positionTicks(e,r,i){i?(this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor"):(this._el.major.className="tl-timeaxis-major tl-timeaxis-animate",this._el.minor.className="tl-timeaxis-minor tl-timeaxis-animate"),this._positionTickArray(this.major_ticks,e,r),this._positionTickArray(this.minor_ticks,e,r)}_positionTickArray(e,r,i){if(e[1]&&e[0]){var s=r.getPosition(e[1].date.getMillisecond())-r.getPosition(e[0].date.getMillisecond()),o=1;s<i&&(o=Math.round(i/r.getPixelsPerTick()));for(var a=1,l=0;l<e.length;l++){var u=e[l];u.tick.style.left=r.getPosition(u.date.getMillisecond())+"px",u.tick_text.innerHTML=u.display_date,o>1?a>=o?(a=1,u.tick_text.style.opacity=1,u.tick.className="tl-timeaxis-tick"):(a++,u.tick_text.style.opacity=0,u.tick.className="tl-timeaxis-tick tl-timeaxis-tick-hidden"):(u.tick_text.style.opacity=1,u.tick.className="tl-timeaxis-tick")}}}getVisibleTicks(){return{major:this._getVisibleTickArray(this.major_ticks),minor:this._getVisibleTickArray(this.minor_ticks)}}_getVisibleTickArray(e){return e.filter(({tick:r})=>g5(r))}_initLayout(){this._el.content_container=fe("div","tl-timeaxis-content-container",this._el.container),this._el.major=fe("div","tl-timeaxis-major",this._el.content_container),this._el.minor=fe("div","tl-timeaxis-minor",this._el.content_container),this.onLoaded()}_initEvents(){}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}Dn(iA,Mn,Li,ji);class sA{constructor(e,r,i){this._el={container:{},content_container:{},content:{},headline_container:{},headline:{},date:{}},this.options={title:!1},this.data={unique_id:"",headline:"headline",text:"text"},v$(this,e),ot(this.options,r),this._el.container=fe("div","tl-text"),this._el.container.id=this.data.unique_id,this._initLayout(),i&&i.appendChild(this._el.container)}show(){}hide(){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}headlineHeight(){return this._el.headline.offsetHeight+40}addDateText(e){this._el.date.innerHTML=e}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){if(this._el.content_container=fe("div","tl-text-content-container",this._el.container),this._el.headline_container=fe("div","tl-text-headline-container",this._el.content_container),this.data.headline!=""){var e="tl-headline";this.options.title&&(e="tl-headline tl-headline-title"),this._el.headline=fe("h2",e,this._el.headline_container),this._el.headline.innerHTML=this.data.headline}if(this._el.date=fe("h3","tl-headline-date",this._el.headline_container),this.data.text!=""){var r="";r+=y$(this.options.autolink==!0?lv(this.data.text):this.data.text),this._el.content=fe("div","tl-text-content",this._el.content_container),this._el.content.innerHTML=r}this.onLoaded()}}Dn(sA,Mn);class yt{constructor(e,r,i){i&&this.setLanguage(i),this._el={container:{},content_container:{},content:{},content_item:{},content_link:{},caption:null,credit:null,parent:{},link:null},this.player=null,this.timer=null,this.load_timer=null,this.message=null,this.media_id=null,this._state={loaded:!1,show_meta:!1,media_loaded:!1},this.data={unique_id:null,url:null,credit:null,caption:null,credit_alternate:null,caption_alternate:null,link:null,link_target:null},this.options={api_key_flickr:"bd3a7c45ddd52f3101825d41563a6125",api_key_googlemaps:"AIzaSyB9dW8e_iRrATFa8g24qB6BDBGdkrLDZYI",api_key_embedly:"",credit_height:0,caption_height:0,background:0},this.animator={},ot(this.options,r),ot(this.data,e),this.options.background||(this._el.container=fe("div","tl-media"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._initLayout())}loadMedia(){var e=this;if(!this._state.loaded)try{this.load_timer=setTimeout(function(){e.loadingMessage(),e._loadMedia(),e._updateDisplay()},1200)}catch(r){Xe("Error loading media for ",this._media),Xe(r)}}_updateMessage(e){this.message&&this.message.updateMessage(e)}loadingMessage(){this._updateMessage(this._("loading")+" "+this.options.media_name)}errorMessage(e){e?e=this._("error")+": "+e:e=this._("error"),this._updateMessage(e)}updateMediaDisplay(e){this._state.loaded&&!this.options.background&&(Eo?this._el.content_item.style.maxHeight=this.options.height/2+"px":this._el.content_item.style.maxHeight=this.options.height-this.options.credit_height-this.options.caption_height-30+"px",this._el.container.style.maxWidth=this.options.width+"px",Ma&&this._el.content_item.offsetWidth>this._el.content_item.offsetHeight,this._updateMediaDisplay(e),this._state.media_loaded&&(this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")))}_loadMedia(){this.onLoaded()}_updateMediaDisplay(e){Ma&&(this._el.content_item.style.maxWidth=this.options.width+"px",this._el.content_item.style.width="auto")}_getMeta(){}_getImageURL(e,r){return""}show(){}hide(){}addTo(e){e.appendChild(this._el.container),this.onAdd()}removeFrom(e){e.removeChild(this._el.container),this.onRemove()}getImageURL(e,r){return this._getImageURL(e,r)}updateDisplay(e,r,i){this._updateDisplay(e,r,i)}stopMedia(){try{this._stopMedia()}catch(e){Xe(`stopMedia() exception: ${e}`)}}loadErrorDisplay(e){try{this._el.content.removeChild(this._el.content_item)}catch{}this._el.content_item=fe("div","tl-media-item tl-media-loaderror",this._el.content),this._el.content_item.innerHTML="<div class='tl-icon-"+this.options.media_type+"'></div><p>"+e+"</p>",this.onLoaded(!0)}onLoaded(e){this._state.loaded=!0,this.fire("loaded",this.data),this.message&&this.message.hide(),e||this.options.background||this.showMeta(),this.updateDisplay()}onMediaLoaded(e){this._state.media_loaded=!0,this.fire("media_loaded",this.data),this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")}showMeta(e,r){this._state.show_meta=!0,this.data.credit&&this.data.credit!=""&&(this._el.credit=fe("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.options.autolink==!0?lv(this.data.credit):this.data.credit,this.options.credit_height=this._el.credit.offsetHeight),this.data.caption&&this.data.caption!=""&&(this._el.caption=fe("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.options.autolink==!0?lv(this.data.caption):this.data.caption,this.options.caption_height=this._el.caption.offsetHeight),(!this.data.caption||!this.data.credit)&&this.getMeta()}getMeta(){this._getMeta()}updateMeta(){!this.data.credit&&this.data.credit_alternate&&(this._el.credit=fe("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.data.credit_alternate,this.options.credit_height=this._el.credit.offsetHeight),!this.data.caption&&this.data.caption_alternate&&(this._el.caption=fe("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.data.caption_alternate,this.options.caption_height=this._el.caption.offsetHeight),this.updateDisplay()}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){this.message=new qf(this._el.container,this.options,this.getLanguage()),this._el.content_container=fe("div","tl-media-content-container",this._el.container),this.data.link&&this.data.link!=""?(this._el.link=fe("a","tl-media-link",this._el.content_container),this._el.link.href=this.data.link,this.data.link_target&&this.data.link_target!=""?this._el.link.target=this.data.link_target:this._el.link.target="_blank",this._el.link.target=="_blank"&&this._el.link.setAttribute("rel","noopener"),this._el.content=fe("div","tl-media-content",this._el.link)):this._el.content=fe("div","tl-media-content",this._el.content_container)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r),i&&(this.options.layout=i),this._el.credit&&(this.options.credit_height=this._el.credit.offsetHeight),this._el.caption&&(this.options.caption_height=this._el.caption.offsetHeight+5),this.updateMediaDisplay(this.options.layout)}domCreate(...e){return fe(...e)}_stopMedia(){}}Dn(yt,Mn,ji);let vE=class extends yt{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=this,r="tl-media-item tl-media-image tl-media-shadow";(this.data.url.match(/.png(\?.*)?$/)||this.data.url.match(/.svg(\?.*)?$/))&&(r="tl-media-item tl-media-image"),this._el.content_item=this.domCreate("img",r,this._el.content),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=La(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=La(this.data.caption)),this._el.content_item.addEventListener("load",function(i){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL()}getImageURL(e,r){return Bf(this.data.url)}_updateMediaDisplay(e){Ma&&(this._el.content_item.style.width="auto")}};class v5{constructor(e){this.doc=e,this.pending={},this.queue={css:[],js:[]},this.styleSheets=e.styleSheets,this.env=this.getEnv(),this.head=this.doc.head||this.doc.getElementsByTagName("head")[0],this.pollCount=0}createNode(e,r){var i=this.doc.createElement(e),s;for(s in r)r.hasOwnProperty(s)&&i.setAttribute(s,r[s]);return i}finish(e){var r=this.pending[e],i,s;r&&(i=r.callback,s=r.urls,s.shift(),this.pollCount=0,s.length||(i&&i.call(r.context,r.obj),this.pending[e]=null,this.queue[e].length&&this.load(e)))}getEnv(){var e=navigator.userAgent,r={async:this.doc.createElement("script").async===!0};return(r.webkit=/AppleWebKit\//.test(e))||(r.ie=/MSIE/.test(e))||(r.opera=/Opera/.test(e))||(r.gecko=/Gecko\//.test(e))||(r.unknown=!0),r}load(e,r,i,s,o){var a=(function(){this.finish(e)}).bind(this),l=e==="css",u=[],c,h,f,p,g,b;if(r)if(r=typeof r=="string"?[r]:r.concat(),l||this.env.async||this.env.gecko||this.env.opera)this.queue[e].push({urls:r,callback:i,obj:s,context:o});else for(c=0,h=r.length;c<h;++c)this.queue[e].push({urls:[r[c]],callback:c===h-1?i:null,obj:s,context:o});if(!(this.pending[e]||!(p=this.pending[e]=this.queue[e].shift()))){for(g=p.urls,c=0,h=g.length;c<h;++c)b=g[c],l?f=this.env.gecko?this.createNode("style"):this.createNode("link",{href:b,rel:"stylesheet"}):(f=this.createNode("script",{src:b}),f.async=!1),f.className="lazyload",f.setAttribute("charset","utf-8"),this.env.ie&&!l?f.onreadystatechange=function(){/loaded|complete/.test(f.readyState)&&(f.onreadystatechange=null,a())}:l&&(this.env.gecko||this.env.webkit)?this.env.webkit?(p.urls[c]=f.href,this.pollWebKit()):(f.innerHTML='@import "'+b+'";',this.pollGecko(f)):f.onload=f.onerror=a,u.push(f);for(c=0,h=u.length;c<h;++c)this.head.appendChild(u[c])}}pollGecko(e){var r;try{r=!!e.sheet.cssRules}catch{if(this.pollCount+=1,this.pollCount<200){var i=this;setTimeout(function(){i.pollGecko(e)},50)}else r&&this.finish("css");return}this.finish("css")}pollWebKit(){var e=this.pending.css,r;if(e){for(r=this.styleSheets.length;--r>=0;)if(this.styleSheets[r].href===e.urls[0]){this.finish("css");break}this.pollCount+=1,e&&(this.pollCount<200?setTimeout(this.pollWebKit.bind(this),50):this.finish("css"))}}css(e,r,i,s){this.load("css",e,r,i,s)}js(e,r,i,s){this.load("js",e,r,i,s)}}function po(t,e,r,i){oA.js(t,e,r,i)}function bm(t,e,r,i){oA.css(t,e,r,i)}let oA=new v5(document);class y5 extends yt{_loadMedia(){var e=this,r;this.youtube_loaded=!1,this._el.content_item=this.domCreate("div","tl-media-item tl-media-youtube tl-media-shadow",this._el.content),this._el.content_item.id=fo(7),r=_$(this.data.url),this.media_id={},this.data.url.match("v=")?this.media_id.id=r.v:this.data.url.match("/embed/")?this.media_id.id=this.data.url.split("embed/")[1].split(/[?&]/)[0]:this.data.url.match(/v\/|v=|youtu\.be\//)?this.media_id.id=this.data.url.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0]:Xe("YOUTUBE IN URL BUT NOT A VALID VIDEO"),this.data.url.match("start=")?this.media_id.start=mm(this.data.url.split("start=")[1]):this.data.url.match("t=")&&(this.media_id.start=mm(this.data.url.split("t=")[1])),this.data.url.match("end=")&&(this.media_id.end=mm(this.data.url.split("end=")[1])),this.media_id.hd=typeof r.hd<"u",po("https://www.youtube.com/iframe_api",function(){e.createMedia()})}_updateMediaDisplay(){this._el.content_item.style.height=To.r16_9({w:this.options.width})+"px",this._el.content_item.style.width=this.options.width+"px"}_stopMedia(){if(this.youtube_loaded)try{this.player.getPlayerState()==YT.PlayerState.PLAYING&&this.player.pauseVideo()}catch(e){Xe(e)}}createMedia(){var e=this;clearTimeout(this.timer),typeof YT<"u"&&typeof YT.Player<"u"?this.player=new YT.Player(this._el.content_item.id,{playerVars:{enablejsapi:1,color:"white",controls:1,start:this.media_id.start,end:this.media_id.end,fs:1},videoId:this.media_id.id,events:{onReady:function(){e.onPlayerReady(),e.onLoaded()},onStateChange:e.onStateChange}}):this.timer=setTimeout(function(){e.createMedia()},1e3)}onPlayerReady(e){this.youtube_loaded=!0,this._el.content_item=document.getElementById(this._el.content_item.id),this.onMediaLoaded()}onStateChange(e){e.data==YT.PlayerState.ENDED&&(e.target.seekTo(0),e.target.pauseVideo())}}class _5 extends yt{_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-map tl-media-shadow",this._el.content),this.media_id=this.data.url,this.mapframe=this.domCreate("iframe","",this._el.content_item),this.mapframe.width="100%",this.mapframe.height="100%",this.mapframe.frameBorder="0",this.mapframe.src=this.makeGoogleMapsEmbedURL(this.media_id,this.options.api_key_googlemaps),this.onLoaded()}_updateMediaDisplay(){if(this._state.loaded){var e=To.square({w:this._el.content_item.offsetWidth});this._el.content_item.style.height=e.h+"px"}}makeGoogleMapsEmbedURL(e,r){var i=!1;function s(f){function p(D,P){if(D.slice(-1)=="z")P.zoom=D;else if(D.slice(-1)=="m")P.zoom=14,P.maptype="satellite";else if(D.slice(-1)=="t"){if(i=!0,b=="place")var x=f.match(h.place)[3]+","+f.match(h.place)[4];else{var x=P.center;delete P.center}P={},P.location=x,streetview_params=D.split(",");for(let _ in o.streetview){var E=parseInt(_)+1;o.streetview[_]=="pitch"&&streetview_params[E]=="90t"?P[o.streetview[_]]=0:P[o.streetview[_]]=streetview_params[E].slice(0,-1)}}return P}function g(D,P){var x={},E=P[1],_=P[P.length-1];for(let j in o[D]){var R=parseInt(j)+2;o[D][j]=="center"?x[o[D][j]]=P[R]+","+P[++R]:x[o[D][j]]=P[R]}return x=p(_,x),x.key=r,i==!0&&(D="streetview"),E+"/embed/v1/"+D+w$(x)}let b="view";return f.match(h.place)?b="place":f.match(h.directions)?b="directions":f.match(h.search)&&(b="search"),g(b,f.match(h[b]))}var o={view:["center"],place:["q","center"],directions:["origin","destination","center"],search:["q","center"],streetview:["fov","heading","pitch"]},a=/(https:\/\/.+google.+?\/maps)/,l=/@([-\d.]+),([-\d.]+)/,u=/([\w\W]+)/,c=/,((?:[-\d.]+[zmayht],?)*)/,h={view:new RegExp(a.source+"/"+l.source+c.source),place:new RegExp(a.source+"/place/"+u.source+"/"+l.source+c.source),directions:new RegExp(a.source+"/dir/"+u.source+"/"+u.source+"/"+l.source+c.source),search:new RegExp(a.source+"/search/"+u.source+"/"+l.source+c.source)};return s(e)}}class w5 extends yt{constructor(e,r,i){super(e,r,i),this.blockquote=Gf.sanitize(this.data.url)}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-blockquote",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this._el.content_item.innerHTML=this.blockquote,this.onLoaded()}updateMediaDisplay(){}}class b5 extends yt{_loadMedia(){var e,r,i=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-wikipedia",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.media_id=this.data.url.split("wiki/")[1].split("#")[0].replace("_"," "),this.media_id=this.media_id.replace(" ","%20"),r=this.data.url.split("//")[1].split(".wikipedia")[0],e="https://"+r+".wikipedia.org/w/api.php?action=query&prop=extracts|pageimages&redirects=&titles="+this.media_id+"&exintro=1&format=json&callback=?",Za({type:"GET",url:e,dataType:"json",success:function(s){i.createMedia(s)},error:function(s,o){var a="";a+=i._("wikipedia_load_err")+"<br/>"+i.media_id+"<br/>"+o,i.loadErrorDisplay(a)}})}createMedia(e){var r="";if(e.query){var i="",r={entry:{},title:"",text:"",extract:"",paragraphs:1,page_image:"",text_array:[]};r.entry=b$(e.query.pages,0),r.extract=r.entry.extract,r.title=r.entry.title,r.page_image=r.entry.thumbnail,r.extract.match("<p>")?r.text_array=r.extract.split("<p>"):r.text_array.push(r.extract);for(var s=0;s<r.text_array.length;s++)s+1<=r.paragraphs&&s+1<r.text_array.length&&(r.text+="<p>"+r.text_array[s+1]);i+="<span class='tl-icon-wikipedia'></span>",i+="<div class='tl-wikipedia-title'><h4><a href='"+this.data.url+"' target='_blank' rel='noopener'>"+r.title+"</a></h4>",i+="<span class='tl-wikipedia-source'>"+this._("wikipedia")+"</span></div>",r.page_image,i+=r.text,r.extract.match("REDIRECT")||(this._el.content_item.innerHTML=i,this.onLoaded())}}updateMediaDisplay(){}}function x5(t){if(t.match(/^.+#\/media\/.+/))return`File:${t.split("#")[1].split(":")[1]}`;if(t.match(/^.*commons.wikimedia.org\/wiki\/File:.+/)){let e=t.split("/");return e[e.length-1]}return null}function E5(t){let e={};if(t.query&&t.query.pages){let r=Object.keys(t.query.pages);e.page_id=r[0];let i=t.query.pages[e.page_id];e.url=i.imageinfo[0].thumburl,i.entityterms&&i.entityterms.label&&(e.label=i.entityterms.label[0])}return e}class yE extends yt{_loadMedia(){var e,r=Math.round(this.options.width)||1e3,i=this.getLanguage().lang.toLowerCase(),s=this;try{this.establishMediaID(),e=`https://commons.wikimedia.org/w/api.php?action=query&titles=${this.media_id}&prop=imageinfo|entityterms&iiprop=url&&iiurlwidth=${r}&format=json&origin=*&wbetlanguage=${i}`,Bh(e,function(o){let a=E5(o);a.url?(s.base_image_url=a.url,s.page_id=a.page_id,!s.data.alt&&a.label&&(s.data.alt=a.label),s.options.background||s.createMedia(),s.onLoaded()):s.loadErrorDisplay(s._("wikipedia_image_load_err"))})}catch(o){s.loadErrorDisplay(s._(o.message_key))}}establishMediaID(){let e=x5(this.data.url);if(e)this.media_id=e;else throw new Ye("Invalid Wikipedia Image URL")}createMedia(){var e=this;if(this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-wikipedia-image tl-media-shadow",this._el.content),this.data.alt)this._el.content_item.alt=this.data.alt;else if(this.page_id){let r=`M${this.page_id}`,i=`https://commons.wikimedia.org/w/api.php?action=wbgetentities&format=json&ids=${r}&format=json&origin=*`;zf(i).then(s=>{if(s.entities&&s.entities[r]){let o=s.entities[r].labels,a=e.getLanguage().lang.toLowerCase(),l=null;o[a]?l=o[a]:a.length>2&&o[a.substr(0,2)]?l=o[a.substr(0,2)]:o.en&&(l=o.en),l?(console.log(`wikibase_id: ${e.media_id} alt ${l.value}`),e.data.alt=l.value,e._el.content_item.alt=e.data.alt):console.log(`wikibase_id: ${e.media_id} ain't got no alt`)}})}this.data.title&&(this._el.content_item.title=this.data.title),this._el.content_item.addEventListener("load",function(r){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}_getImageURL(e,r){if(e&&this.base_image_url){let i=this.base_image_url.match(/(\/[\d\.]+px-)/);if(i)return e=Math.round(e),this.base_image_url.replace(i[1],`/${e}px-`)}return this.base_image_url}}class T5 extends yt{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-soundcloud tl-media-shadow",this._el.content),this.media_id=this.data.url,e="https://soundcloud.com/oembed?url="+this.media_id+"&format=js&callback=?",Bh(e,function(i){po("https://w.soundcloud.com/player/api.js",function(){r.createMedia(i)})})}createMedia(e){this._el.content_item.innerHTML=e.html,self.widget=SC.Widget(this._el.content_item.querySelector("iframe")),this.soundCloudCreated=!0,this.onLoaded()}_stopMedia(){this.soundCloudCreated&&self.widget.pause()}}class S5 extends yt{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vimeo tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0];var i=null;this.data.url.match(/#t=([^&]+).*/)&&(i=this.data.url.match(/#t=([^&]+).*/)[1]),e="https://player.vimeo.com/video/"+this.media_id+"?api=1&title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff",i&&(e=e+="&amp;#t="+i),this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(s){r.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=To.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player&&this.player.contentWindow&&this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(e){Xe(e)}}}class I5 extends yt{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-dailymotion",this._el.content),this.data.url.indexOf("dai.ly/")!=-1?this.media_id=this.data.url.substr(this.data.url.indexOf("dai.ly/")+7):this.data.url.match("video")?this.media_id=this.data.url.split("video/")[1].split(/[?&]/)[0]:this.media_id=this.data.url.split("embed/")[1].split(/[?&]/)[0],this.media_id.indexOf("_")!=-1&&(this.media_id=this.media_id.split("_")[0]),e="https://www.dailymotion.com/embed/video/"+this.media_id+"?api=postMessage",this._el.content_item.innerHTML="<iframe autostart='false' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._state.loaded&&(this._el.content_item.style.height=To.r16_9({w:this._el.content_item.offsetWidth})+"px")}_stopMedia(){this._state.loaded&&this._el.content_item.querySelector("iframe").contentWindow.postMessage('{"command":"pause","parameters":[]}',"*")}}class k5 extends yt{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vine tl-media-shadow",this._el.content),this.media_id=this.data.url.split("vine.co/v/")[1],e="https://vine.co/v/"+this.media_id+"/embed/simple",this._el.content_item.innerHTML="<iframe frameborder='0' width='100%' height='100%' src='"+e+"'></iframe><script async src='https://platform.vine.co/static/scripts/embed.js' charset='utf-8'><\/script>",this.onLoaded()}_updateMediaDisplay(){var e=To.square({w:this._el.content_item.offsetWidth,h:this.options.height});this._el.content_item.style.height=e.h+"px"}_stopMedia(){this._el.content_item.querySelector("iframe").contentWindow.postMessage("pause","*")}}class C5 extends yt{_loadMedia(){var e,r=this;if(this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.data.url.match("^(https?:)?/*(www.)?(twitter|x).com"))this.data.url.match("status/")?this.media_id=this.data.url.split("status/")[1]:this.data.url.match("statuses/")?this.media_id=this.data.url.split("statuses/")[1]:this.media_id="";else if(this.data.url.match(`<blockquote class=['"]twitter-tweet['"]`)){var i=this.data.url.match(/(status|statuses)\/(\d+)/);if(i&&i.length>2)this.media_id=i[2];else{r.loadErrorDisplay(r._("twitterembed_invalidurl_err"));return}}e="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",Za({type:"GET",url:e,dataType:"json",success:function(s){r.createMedia(s)},error:function(s,o){var a="";a+=r._("twitter_load_err")+"<br/>"+r.media_id+"<br/>"+o,r.loadErrorDisplay(a)}})}createMedia(e){var r="",i="",s="",o="",a="",l="",u=this;i=e.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=e.author_url.split("twitter.com/")[1],o=e.html.split("</p>&mdash;")[1].split('<a href="')[1],a=o.split('">')[0],l=o.split('">')[1].split("</a>")[0],i=i.replace(/<a href/ig,'<a target="_blank" rel="noopener" href'),i.includes("pic.twitter.com")||i.includes("pic.x.com")?(po("https://platform.twitter.com/widgets.js",function(){twttr.widgets.createTweet(u.media_id,u._el.content_item,{conversation:"none",linkColor:"#cc0000",theme:"light"})}),this.onLoaded()):(r+=i,r+="<div class='vcard'>",r+="<a href='"+a+"' class='twitter-date' rel='noopener' target='_blank'>"+l+"</a>",r+="<img src='' class='tl-media-item tl-media-image'></a>",r+="<div class='author'>",r+="<a class='screen-name url' href='"+e.author_url+"' rel='noopener' target='_blank'>",r+="<span class='avatar'></span>",r+="<span class='fn'>"+e.author_name+" <span class='tl-icon-twitter'></span></span>",r+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",r+="</a>",r+="</div>",r+="</div>",this._el.content_item.innerHTML=r,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class A5 extends yt{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text";var i=this.data.url.match(/(status|statuses)\/(\d+)/);if(i&&i.length>2)this.media_id=i[2];else{r.loadErrorDisplay(r._("twitterembed_invalidurl_err"));return}e="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",window.twttr=function(s,o,a){var l,u=s.getElementsByTagName(o)[0],c=window.twttr||{};return s.getElementById(a)||(l=s.createElement(o),l.id=a,l.src="https://platform.twitter.com/widgets.js",u.parentNode.insertBefore(l,u),c._e=[],c.ready=function(h){c._e.push(h)}),c}(document,"script","twitter-wjs"),Za({type:"GET",url:e,dataType:"json",success(s){r.createMedia(s)},error:function(s,o){var a="";a+=r._("twitter_load_err")+"<br/>"+r.media_id+"<br/>"+o,r.loadErrorDisplay(a)}})}createMedia(e){var r="",i="",s="",o="",a="",l="";i=e.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=e.author_url.split("twitter.com/")[1],o=e.html.split("</p>&mdash;")[1].split('<a href="')[1],a=o.split('">')[0],l=o.split('">')[1].split("</a>")[0],i=i.replace(/<a href/ig,'<a target="_blank" rel="noopener" href');let u=this.media_id;i.includes("pic.twitter.com")?(twttr.ready(function(c){r=document.getElementsByClassName("tl-media-twitter")[0];var h=String(u);twttr.widgets.createTweet(h,r,{conversation:"none",linkColor:"#cc0000",theme:"light"}).then(function(f){this.onLoaded()})}),this._el.content_item.innerHTML=r,this.onLoaded()):(r+=i,r+="<div class='vcard'>",r+="<a href='"+a+"' class='twitter-date' rel='noopener' target='_blank'>"+l+"</a>",r+="<div class='author'>",r+="<a class='screen-name url' href='"+e.author_url+"' rel='noopener' target='_blank'>",r+="<span class='avatar'></span>",r+="<span class='fn'>"+e.author_name+" <span class='tl-icon-twitter'></span></span>",r+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",r+="</a>",r+="</div>",r+="</div>",this._el.content_item.innerHTML=r,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class _E extends yt{_loadMedia(){var e,r=this;try{this.establishMediaID(),e="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",Bh(e,function(i){i.stat=="ok"?(r.sizes=i.sizes.size,r.options.background||r.createMedia(),r.onLoaded()):r.loadErrorDisplay(r._("flickr_notfound_err"))})}catch(i){r.loadErrorDisplay(r._(i.message_key))}}establishMediaID(){if(this.data.url.match(/flic.kr\/.+/i)){var e=this.data.url.split("/").slice(-1)[0];this.media_id=x$.decode(e)}else{var r="flickr.com/photos/",i=this.data.url.indexOf(r);if(i==-1)throw new Ye("flickr_invalidurl_err");var s=i+r.length;this.media_id=this.data.url.substr(s).split("/")[1]}}createMedia(){var e=this;this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-flickr tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=La(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=La(this.data.caption)),this._el.content_item.addEventListener("load",function(r){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}getImageURL(e,r){for(var i=this.size_label(r),s=this.sizes[this.sizes.length-2].source,o=0;o<this.sizes.length;o++)this.sizes[o].label==i&&(s=this.sizes[o].source);return s}_getMeta(){var e=this,r;r="https://api.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",Bh(r,function(i){e.data.credit_alternate="<a href='"+e.data.url+"' target='_blank' rel='noopener'>"+i.photo.owner.realname+"</a>",e.data.caption_alternate=i.photo.title._content+" "+i.photo.description._content,e.updateMeta()})}size_label(e){var r="";return e<=75?e<=0?r="Large":r="Thumbnail":e<=180?r="Small":e<=240?r="Small 320":e<=375?r="Medium":e<=480?r="Medium 640":(e<=600,r="Large"),r}}class P5 extends yt{_loadMedia(){var e=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-documentcloud tl-media-shadow",this._el.content),this._el.content_item.id=fo(7),this.data.url.match(/\.html$/)?this.data.url=this._transformURL(this.data.url):this.data.url.match(/.(json|js)$/)||Xe("DOCUMENT CLOUD IN URL BUT INVALID SUFFIX"),po(["https://assets.documentcloud.org/viewer/loader.js","https://assets.documentcloud.org/viewer/viewer.js"],function(){e.createMedia()})}_transformURL(e){return e.replace(/(.*)\.html$/,"$1.js")}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}createMedia(){DV.load(this.data.url,{container:"#"+this._el.content_item.id,showSidebar:!1}),this.onLoaded()}}const R5="830b21071290df4f81a35c56abbea096",N5="704270473831239",D5=`${N5}|${R5}`,wE=`https://graph.facebook.com/v8.0/instagram_oembed?access_token=${D5}&fields=html,thumbnail_url,author_name&url=`;function M5(t){this.oembed_response=t,this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-instagram tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=La(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=La(this.data.caption)),this._el.content_item.addEventListener("load",(function(e){this.onMediaLoaded()}).bind(this)),this._el.content_item.src=t.thumbnail_url,this.onLoaded()}function L5(t){let e=`${t.statusText} [${t.status}]`;t.status==400&&(e=this._("instagram_bad_request")),this.loadErrorDisplay(e)}class O5 extends yt{_loadMedia(){this.media_id=this.data.url.split("/p/")[1].split("/")[0],this.options.background||this.createMedia()}createMedia(){this.oembed_response=null;let e=`${wE}${this.data.url}`;try{Za({url:e,dataType:"json",success:M5,error:L5,context:this})}catch(r){console.log(`Instagram: error fetching ${e}`),console.log(r);debugger}}getImageURL(){if(this.oembed_response&&this.oembed_response.thumbnail_url)return this.oembed_response.thumbnail_url;zf(`${wE}${this.data.url}`).then(e=>e.thumbnail_url).catch(e=>{Xe(`Instagram getImageURL Error: ${e.status} ${e.statusText}`)})}_getMeta(){this.oembed_response&&this.oembed_response.author_name&&(this.data.credit_alternate=`Instagram: <a href="https://instagram.com/${this.oembed_response.author_name}" target="_blank">@${this.oembed_response.author_name}</a>`),this.updateMeta()}sizes(e){var r="";return e<=150?r="t":e<=306?r="m":r="l",r}}class j5 extends yt{_loadMedia(){this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-profile tl-media-shadow",this._el.content),this._el.content_item.src=this.data.url,this.onLoaded()}_updateMediaDisplay(e){Ma&&(this._el.content_item.style.maxWidth=this.options.width/2-40+"px")}}class V5 extends yt{_loadMedia(){var e;if(this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this.data.url.match(/open\?id=([^&]+)/)){var r=this.data.url.match(/open\?id=([^&]+)/)[1];e="https://drive.google.com/file/d/"+r+"/preview"}else if(this.data.url.match(/file\/d\/([^/]*)\/?/)){var r=this.data.url.match(/file\/d\/([^/]*)\/?/)[1];e="https://drive.google.com/file/d/"+r+"/preview"}else e=this.data.url;this._el.content_item.innerHTML="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}function F5(t){return t.match(/^spotify:/)?t:(t=new URL(t),`spotify${t.pathname.replace(/\/$/,"").replace(/\//g,":")}`)}class U5 extends yt{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-spotify",this._el.content),this.media_id=F5(this.data.url),this.media_id?(e="https://embed.spotify.com/?uri="+this.media_id+"&theme=white&view=coverart",this.player=this.domCreate("iframe","tl-media-shadow",this._el.content_item),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.onLoaded()):this.loadErrorDisplay(this._("spotify_invalid_url"))}_updateMediaDisplay(e){var r=this.options.height,i=0,s=0;Eo?r=this.options.height/2:r=this.options.height-this.options.credit_height-this.options.caption_height-30,this._el.content_item.style.maxHeight="none",Xe(r),Xe(this.options.width),r>this.options.width?(Xe("height is greater"),i=this.options.width+80+"px",s=this.options.width+"px"):(Xe("width is greater"),Xe(this.options.width),i=r+"px",s=r-80+"px"),this.player.style.width=s,this.player.style.height=i,this._el.credit&&(this._el.credit.style.width=s),this._el.caption&&(this._el.caption.style.width=s)}_stopMedia(){}}class B5 extends yt{constructor(e,r,i){super(e,r,i),this.iframe=Gf.sanitize(this.data.url,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder"]})}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this._el.content_item.innerHTML=this.iframe,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class $5 extends yt{_loadMedia(){try{var e=this;if(this.data.url.match(`<blockquote class=['"]imgur-embed-pub['"]`)){var r=this.data.url.match(/(imgur\.com)\/(\w+)/);this.media_id=r[2],this.data.url="http://imgur.com/gallery/"+this.media_id}else this.data.url&&(this.media_id=this.data.url.split("/").slice(-1)[0]);po(["https://s.imgur.com/min/embed.js"],function(){e.createMedia()})}catch{this.loadErrorDisplay(this._("imgur_invalidurl_err"))}}createMedia(){var e=this,r="https://api.imgur.com/oembed.json?url="+this.data.url;this._el.content_item=this.domCreate("div","tl-media-item tl-media-image tl-media-imgur",this._el.content),Za({type:"GET",url:r,dataType:"json",success:function(i){try{e._el.content_item.innerHTML=i.html,setInterval(function(){document.querySelector("blockquote.imgur-embed-pub")==null?clearInterval():(imgurEmbed.createIframe(),document.getElementById("imageElement").removeAttribute("style"),document.getElementById("image").removeAttribute("style"))},2e3)}catch{Xe("Error processing imgur ajax response")}},error:function(i,s,o){s=="parsererror"?e.loadErrorDisplay(e._("imgur_invalidurl_err")):e.loadErrorDisplay(e._("unknown_read_err",s))}}),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.width=this.options.width+"px",this._el.content_item.style.height=To.r16_9({w:this.options.width})+"px"}}class z5 extends yt{_loadMedia(){var e=Bf(this.data.url);this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content);var r="";lc||l$||e.match(/dl.dropboxusercontent.com/)?r="<iframe class='doc' frameborder='0' width='100%' height='100%' src='//docs.google.com/viewer?url="+e+"&amp;embedded=true'></iframe>":r="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this._el.content_item.innerHTML=r,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class H5 extends yt{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=Bf(this.data.url),r=this,r=this,i="tl-media-item tl-media-audio tl-media-shadow";this._el.content_item=this.domCreate("audio",i,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){r.onMediaLoaded()}),this._el.source_item.src=e,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 audio with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(e){Ma&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(e,r){var i=e.match(r),s="audio/";switch(i[1]){case"mp3":s+="mpeg";break;case"wav":s+="wav";break;case"m4a":s+="mp4";break;default:s="audio";break}return s}}class W5 extends yt{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=Bf(this.data.url),r=this,r=this,i="tl-media-item tl-media-video tl-media-shadow";this._el.content_item=this.domCreate("video",i,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){r.onMediaLoaded()}),this._el.source_item.src=e,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 video with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(e){Ma&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(e,r){var i=e.match(r),s="video/";switch(i[1]){case"mp4":s+="mp4";break;case"webm":s+="webm";break;default:s="video";break}return s}}class q5 extends yt{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-wistia tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/https?:\/\/(.+)?(wistia\.com|wi\.st)\/medias\/(.*)/)[3],Xe(`Wistia: media_id: ${this.media_id}`),e="https://fast.wistia.com/embed/iframe/"+this.media_id+"?version=v1&controlsVisibleOnLoad=true&playerColor=aae3d8",this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(i){r.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=To.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(e){Xe(e)}}}function $h(t,e){var r={},i=[{type:"youtube",name:"YouTube",match_str:"^(https?:)?/*(www.|m.)?youtube|youtu.be",cls:y5},{type:"vimeo",name:"Vimeo",match_str:"^(https?:)?/*(player.)?vimeo.com",cls:S5},{type:"dailymotion",name:"DailyMotion",match_str:"^(https?:)?/*(www.)?(dailymotion.com|dai.ly)",cls:I5},{type:"vine",name:"Vine",match_str:"^(https?:)?/*(www.)?vine.co",cls:k5},{type:"soundcloud",name:"SoundCloud",match_str:"^(https?:)?/*(player.)?soundcloud.com",cls:T5},{type:"twitter",name:"Twitter",match_str:"^(https?:)?/*(www.)?(twitter|x).com",cls:C5},{type:"twitterembed",name:"TwitterEmbed",match_str:`<blockquote class=['"]twitter-tweet['"]`,cls:A5},{type:"googlemaps",name:"Google Map",match_str:/google.+?\/maps\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/search\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/place\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/dir\/([\w\W]+)\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)/,cls:_5},{type:"flickr",name:"Flickr",match_str:"^(https?:)?/*(www.)?flickr.com/photos",cls:_E},{type:"flickr",name:"Flickr",match_str:"^(https?://)?flic.kr/.*",cls:_E},{type:"instagram",name:"Instagram",match_str:/^(https?:)?\/*(www.)?(instagr.am|^(https?:)?\/*(www.)?instagram.com)\/p\//,cls:O5},{type:"profile",name:"Profile",match_str:/^(https?:)?\/*(www.)?instagr.am\/[a-zA-Z0-9]{2,}|^(https?:)?\/*(www.)?instagram.com\/[a-zA-Z0-9]{2,}/,cls:j5},{type:"documentcloud",name:"Document Cloud",match_str:/documentcloud.org\//,cls:P5},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://.+.wiki[mp]edia.org.+#/media/.+.(jpg|jpeg|png|gif|svg|webp)",cls:yE},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://commons.wikimedia.org/wiki/File:.+.(jpg|jpeg|png|gif|svg|webp)",cls:yE},{type:"wikipedia",name:"Wikipedia",match_str:"^(https?:)?/.+.wikipedia.org",cls:b5},{type:"image",name:"Image",match_str:/(jpg|jpeg|png|gif|svg|webp)(\?.*)?$/i,cls:vE},{type:"imgur",name:"Imgur",match_str:/^.*imgur.com\/.+$|<blockquote class=['\"]imgur-embed-pub['\"]/i,cls:$5},{type:"googledocs",name:"Google Doc",match_str:"^(https?:)?/*[^.]*.google.com/[^/]*/d/[^/]*/[^/]*?usp=shar.*|^(https?:)?/*drive.google.com/open?id=[^&]*&authuser=0|^(https?:)?//*drive.google.com/open\\?id=[^&]*|^(https?:)?/*[^.]*.googledrive.com/host/[^/]*/",cls:V5},{type:"pdf",name:"PDF",match_str:/^.*\.pdf(\?.*)?(\#.*)?/,cls:z5},{type:"spotify",name:"spotify",match_str:"spotify",cls:U5},{type:"iframe",name:"iFrame",match_str:"iframe",cls:B5},{type:"blockquote",name:"Quote",match_str:"blockquote",cls:w5},{type:"video",name:"Video",match_str:/(mp4|webm)(\?.*)?$/i,cls:W5},{type:"wistia",name:"Wistia",match_str:/https?:\/\/(.+)?(wistia\.com|wi\.st)\/.*/i,cls:q5},{type:"audio",name:"Audio",match_str:/(mp3|wav|m4a)(\?.*)?$/i,cls:H5},{type:"imageblank",name:"Imageblank",match_str:"",cls:vE}];if(e){if(t instanceof Array)return!1;for(var s=0;s<i.length;s++)switch(i[s].type){case"flickr":case"image":case"instagram":if(t.url.match(i[s].match_str))return r=i[s],r;break}}else for(var s=0;s<i.length;s++)if(t.url.match(i[s].match_str))return i[s];return!1}class aA{constructor(e,r){this._el={container:{},content_container:{},media_container:{},timespan:{},line_left:{},line_right:{},content:{},text:{},media:{}},this._text={},this._state={loaded:!1},this.data={unique_id:"",background:null,date:{year:0,month:0,day:0,hour:0,minute:0,second:0,millisecond:0,thumbnail:"",format:""},text:{headline:"",text:""},media:null},this.options={duration:1e3,ease:$f,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,this.ariaLabel="",ot(this.options,r),ot(this.data,e),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(e){this.active=e,this.active&&this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end tl-timemarker-active":this.active?this._el.container.className="tl-timemarker tl-timemarker-active":this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end":this._el.container.className="tl-timemarker",this._el.container.ariaLabel=this.ariaLabel,this.active?this._el.container.ariaLabel+=", shown":this._el.container.ariaLabel+=", press space to show"}setFocus(e={preventScroll:!0}){this._el.container.focus(e)}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}loadMedia(){this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0)}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.data.start_date.getTime()}getEndTime(){return this.data.end_date?this.data.end_date.getTime():!1}setHeight(e){var r=12,i=1;this._el.content_container.style.height=e+"px",this._el.timespan_content.style.height=e+"px",e<=30?this._el.content.className="tl-timemarker-content tl-timemarker-content-small":this._el.content.className="tl-timemarker-content",e<=56?this._el.content_container.classList.add("tl-timemarker-content-container-small"):this._el.content_container.classList.remove("tl-timemarker-content-container-small"),Uf?(i=Math.floor(e/(r+2)),i<1&&(i=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=i):(i=e/r,i>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=i*r+"px")}setWidth(e){this.data.end_date&&(this._el.container.style.width=e+"px",e>this.options.marker_width_min?(this._el.content_container.style.width=e+"px",this._el.content_container.className="tl-timemarker-content-container tl-timemarker-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timemarker-content-container"))}setClass(e){this._el.container.className=e}setRowPosition(e,r){this.setPosition({top:e}),this._el.timespan.style.height=r+"px"}getFormattedDate(){if(Zn(this.data.display_date).length>0)return this.data.display_date;let e="";return this.data.end_date&&(e=" to "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(e=(e?"from ":"")+this.data.start_date.getDisplayDate(this.getLanguage())+e),e}_onMarkerClick(e){this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerKeydown(e){/Space|Enter/.test(e.code)&&this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerBlur(e){this.fire("markerblur",{unique_id:this.data.unique_id})}_initLayout(){if(this._el.container=fe("div","tl-timemarker"),this._el.container.setAttribute("tabindex","-1"),this.data.unique_id&&(this._el.container.id=this.data.unique_id+"-marker"),this.data.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timemarker tl-timemarker-with-end"),this._el.timespan=fe("div","tl-timemarker-timespan",this._el.container),this._el.timespan_content=fe("div","tl-timemarker-timespan-content",this._el.timespan),this._el.content_container=fe("div","tl-timemarker-content-container",this._el.container),this._el.content=fe("div","tl-timemarker-content",this._el.content_container),this._el.line_left=fe("div","tl-timemarker-line-left",this._el.timespan),this._el.line_right=fe("div","tl-timemarker-line-right",this._el.timespan),this.data.media){this._el.media_container=fe("div","tl-timemarker-media-container",this._el.content);var e={url:this.data.media.thumbnail},r=this.data.media.thumbnail?$h(e,!0):null;if(r){var i=new r.cls(e);i.on("loaded",(function(){this._el.media=fe("img","tl-timemarker-media",this._el.media_container),this._el.media.src=i.getImageURL()}).bind(this)),i.loadMedia()}else{var s=$h(this.data.media).type;this._el.media=fe("span","tl-icon-"+s,this._el.media_container)}}this._el.text=fe("div","tl-timemarker-text",this._el.content),this._text=fe("h2","tl-headline",this._el.text),this.data.text.headline&&this.data.text.headline!=""?this._text.innerHTML=fa(this.data.text.headline):this.data.text.text&&this.data.text.text!=""?this._text.innerHTML=fa(this.data.text.text):this.data.media&&this.data.media.caption&&this.data.media.caption!=""&&(this._text.innerHTML=fa(this.data.media.caption));const o=this.getFormattedDate();this.ariaLabel=`${this._text.innerHTML}, ${o}`,this.onLoaded()}_initEvents(){Ve.addListener(this._el.container,"click",this._onMarkerClick,this),Ve.addListener(this._el.container,"keydown",this._onMarkerKeydown,this),Ve.addListener(this._el.container,"blur",this._onMarkerBlur,this)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}Dn(aA,ji,Mn,Li);class x_{constructor(e,r,i){this._el={drag:e,move:e},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},r&&(this._el.move=r),this.options={snap:!1,enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:0,right:!1},momentum_multiplier:2e3,duration:1e3,ease:Ja},this.animator=null,this.dragevent=this.mousedrag,ni&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},ot(this.options,i)}enable(e){Ve.addListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Ve.addListener(this._el.drag,this.dragevent.up,this._onDragEnd,this),this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){Ve.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Ve.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(e){this.options.constraint=e}_onDragStart(e){this.animator&&this.animator.stop(),ni?e.originalEvent?(this.data.pagex.start=e.originalEvent.touches[0].screenX,this.data.pagey.start=e.originalEvent.touches[0].screenY):(this.data.pagex.start=e.targetTouches[0].screenX,this.data.pagey.start=e.targetTouches[0].screenY):(this.data.pagex.start=e.pageX,this.data.pagey.start=e.pageY),this.options.enable.x,this.options.enable.y,this.data.pos.start={x:this._el.move.offsetLeft,y:this._el.move.offsetTop},this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),Ve.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Ve.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(e){this.data.sliding=!1,Ve.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Ve.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(e){var r={x:0,y:0};this.data.sliding=!0,ni?e.originalEvent?(this.data.pagex.end=e.originalEvent.touches[0].screenX,this.data.pagey.end=e.originalEvent.touches[0].screenY):(this.data.pagex.end=e.targetTouches[0].screenX,this.data.pagey.end=e.targetTouches[0].screenY):(this.data.pagex.end=e.pageX,this.data.pagey.end=e.pageY),r.x=this.data.pagex.start-this.data.pagex.end,r.y=this.data.pagey.start-this.data.pagey.end,this.data.pos.end={x:this._el.drag.offsetLeft,y:this._el.drag.offsetTop},this.data.new_pos.x=-(r.x-this.data.pos.start.x),this.data.new_pos.y=-(r.y-this.data.pos.start.y),this.options.enable.x&&Math.abs(r.x)>Math.abs(r.y)&&(e.preventDefault(),this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&Math.abs(r.y)>Math.abs(r.y)&&(e.preventDefault(),this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var e={x:0,y:0,time:0},r={x:0,y:0,time:0},i={x:!1,y:!1},s=!1;this.data.direction=null,e.time=(new Date().getTime()-this.data.time.start)*10,r.time=(new Date().getTime()-this.data.time.start)*10,r.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),r.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),e.x=Math.round(r.x/r.time),e.y=Math.round(r.y/r.time),this.data.new_pos.x=Math.min(this.data.new_pos.x+e.x),this.data.new_pos.y=Math.min(this.data.new_pos.y+e.y),this.options.enable.x?this.options.constraint.left&&this.data.new_pos.x>this.options.constraint.left&&(this.data.new_pos.x=this.options.constraint.left):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,r.time<2e3&&(s=!0),this.options.enable.x&&this.options.enable.y?Math.abs(r.x)>Math.abs(r.y)?i.x=!0:i.y=!0:this.options.enable.x?Math.abs(r.x)>Math.abs(r.y)&&(i.x=!0):Math.abs(r.y)>Math.abs(r.x)&&(i.y=!0),i.x&&(Math.abs(r.x)>this._el.drag.offsetWidth/2&&(s=!0),Math.abs(r.x)>1e4&&(this.data.direction="left",r.x>0&&(this.data.direction="right"))),i.y&&(Math.abs(r.y)>this._el.drag.offsetHeight/2&&(s=!0),Math.abs(r.y)>1e4&&(this.data.direction="up",r.y>0&&(this.data.direction="down"))),r.time<1e3||this._animateMomentum(),s&&this.data.direction?this.fire("swipe_"+this.data.direction,this.data):this.data.direction?this.fire("swipe_nodirection",this.data):this.options.snap&&(this.animator.stop(),this.animator=Ni(this._el.move,{top:this.data.pos.start.y,left:this.data.pos.start.x,duration:this.options.duration,easing:Mu}))}_animateMomentum(){var e={x:this.data.new_pos.x,y:this.data.new_pos.y},r={duration:this.options.duration,easing:Mu};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(e.y>this.options.constraint.bottom?e.y=this.options.constraint.bottom:e.y<this.options.constraint.top&&(e.y=this.options.constraint.top)),r.top=Math.floor(e.y)+"px"),this.options.enable.x&&(this.options.constraint.left&&e.x>=this.options.constraint.left&&(e.x=this.options.constraint.left),this.options.constraint.right&&e.x<this.options.constraint.right&&(e.x=this.options.constraint.right),r.left=Math.floor(e.x)+"px"),this.animator=Ni(this._el.move,r),this.fire("momentum",this.data)}}Dn(x_,Mn);class lA{constructor(e,r,i,s){this.language=s,this._el={parent:{},container:{},slider:{},slider_background:{},line:{},marker_container_mask:{},marker_container:{},marker_item_container:{},timeaxis:{},timeaxis_background:{}},this.collapsed=!1,typeof e=="object"?this._el.container=e:this._el.container=uc(e),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","application"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline_navigation")),this._el.container.setAttribute("aria-description",'Navigate between markers with arrow keys. Press "Home" for the first and "End" for the last markers'),this.config=r,this.options={width:600,height:600,duration:1e3,ease:Ja,has_groups:!1,optimal_tick_width:50,scale_factor:2,marker_padding:5,timenav_height_min:150,marker_height_min:30,marker_width_min:100,zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89]},this.animator=null,this.ready=!1,this._markers=[],this._eras=[],this.has_eras=!1,this._groups=[],this._calculated_row_height=100,this.current_id="",this.current_focused_id="",this.timescale={},this.timeaxis={},this.max_rows=6,this.animate_css=!1,this._swipable,ot(this.options,i)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this._onLoaded()}positionMarkers(e){for(var r=0;r<this._markers.length;r++){var i=this.timescale.getPositionInfo(r);e?this._markers[r].setClass("tl-timemarker tl-timemarker-fast"):this._markers[r].setClass("tl-timemarker"),this._markers[r].setPosition({left:i.start}),this._markers[r].setWidth(i.width)}}updateDisplay(e,r,i){let s=!1;e&&(this.options.width==0&&e>0&&(s=!0),this.options.width=e),r&&r!=this.options.height&&(this.options.height=r,this.timescale=this._getTimeScale()),this._assignRowsToMarkers(),this._el.slider_background.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._el.slider_background.style.left=-(this.options.width/2)+"px",this._el.slider.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._swipable.updateConstraint({top:!1,bottom:!1,left:this.options.width/2,right:-(this.timescale.getPixelWidth()-this.options.width/2)}),s&&this._drawTimeline(),this.goToId(this.current_id,!0)}_getTimeScale(){var e=0;try{e=parseInt(this.options.marker_height_min)}catch{Xe("Invalid value for marker_height_min option."),e=30}return e==0&&(Xe("marker_height_min option must not be zero."),e=30),this.max_rows=Math.round((this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding)/e),this.max_rows<1&&(this.max_rows=1),new gE(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows})}_updateTimeScale(e){this.options.scale_factor=e,this._updateDrawTimeline()}zoomIn(){var e=p$(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(e)}zoomOut(){var e=m$(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(e)}setZoom(e){var r=this.options.zoom_sequence[e];typeof r=="number"?this.setZoomFactor(r):console.warn("Invalid zoom level. Please use an index number between 0 and "+(this.options.zoom_sequence.length-1))}setZoomFactor(e){e<=this.options.zoom_sequence[0]?this.fire("zoomtoggle",{zoom:"out",show:!1}):this.fire("zoomtoggle",{zoom:"out",show:!0}),e>=this.options.zoom_sequence[this.options.zoom_sequence.length-1]?this.fire("zoomtoggle",{zoom:"in",show:!1}):this.fire("zoomtoggle",{zoom:"in",show:!0}),e==0&&(console.warn("Zoom factor must be greater than zero. Using 0.1"),e=.1),this.options.scale_factor=e,this.goToId(this.current_id,!this._updateDrawTimeline(!0),!0)}_createGroups(){this._groups=[];var e=this.timescale.getGroupLabels();if(e){this.options.has_groups=!0;for(var r=0;r<e.length;r++)this._createGroup(e[r])}}_createGroup(e){var r=new nA(e);this._addGroup(r),this._groups.push(r)}_addGroup(e){e.addTo(this._el.container)}_positionGroups(){if(this.options.has_groups){var e=this.options.height-this._el.timeaxis_background.offsetHeight,r=Math.floor(e/this.timescale.getNumberOfRows()-this.options.marker_padding);this.timescale.getGroupLabels();for(var i=0,s=0;i<this._groups.length;i++){var o=Math.floor(s*(r+this.options.marker_padding)),a=!1;o>e-this.options.marker_padding&&(a=!0),this._groups[i].setRowPosition(o,this._calculated_row_height+this.options.marker_padding/2),this._groups[i].setAlternateRowColor(g$(i),a),s+=this._groups[i].data.rows}}}_addMarker(e){e.addTo(this._el.marker_item_container),e.on("markerclick",this._onMarkerClick,this),e.on("added",this._onMarkerAdded,this)}_createMarker(e,r){var i=new aA(e,this.options);this._addMarker(i),r<0?this._markers.push(i):this._markers.splice(r,0,i)}_createMarkers(e){for(var r=0;r<e.length;r++)this._createMarker(e[r],-1)}_removeMarker(e){e.removeFrom(this._el.marker_item_container)}_destroyMarker(e){this._removeMarker(this._markers[e]),this._markers.splice(e,1)}_calculateMarkerHeight(e){return e/this.timescale.getNumberOfRows()-this.options.marker_padding}_calculateRowHeight(e){return e/this.timescale.getNumberOfRows()}_calculateAvailableHeight(){return this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding}_calculateMinimumTimeNavHeight(){return this.timescale.getNumberOfRows()*this.options.marker_height_min+this._el.timeaxis_background.offsetHeight+this.options.marker_padding}getMinimumHeight(){return this._calculateMinimumTimeNavHeight()}_assignRowsToMarkers(){var e=this._calculateAvailableHeight(),r=this._calculateMarkerHeight(e);this._positionGroups(),this._calculated_row_height=this._calculateRowHeight(e);for(var i=0;i<this._markers.length;i++){this._markers[i].setHeight(r);var s=this.timescale.getPositionInfo(i).row,o=Math.floor(s*(r+this.options.marker_padding))+this.options.marker_padding,a=e-o+this.options.marker_padding;this._markers[i].setRowPosition(o,a)}}_resetMarkersActive(){for(var e=0;e<this._markers.length;e++)this._markers[e].setActive(!1)}_resetMarkersBlurListeners(){for(var e=0;e<this._markers.length;e++)this._markers[e].off("markerblur",this._onMarkerBlur,this)}_findMarkerIndex(e){var r=-1;return(typeof e=="string"||e instanceof String)&&(r=qC(e,this._markers,"unique_id",r)),r}_createEras(e){for(var r=0;r<e.length;r++){var i=e[r],s=new rA(i.start_date,i.end_date,i.headline,this.options);this._eras.push(s),s.addTo(this._el.marker_item_container),s.on("added",this._onEraAdded,this)}}_positionEras(e){for(var r=0,i=0;i<this._eras.length;i++){var s={start:0,end:0,width:0};s.start=this.timescale.getPosition(this._eras[i].start_date.getTime()),s.end=this.timescale.getPosition(this._eras[i].end_date.getTime()),s.width=s.end-s.start,e?this._eras[i].setClass("tl-timeera tl-timeera-fast"):this._eras[i].setClass("tl-timeera"),this._eras[i].setPosition({left:s.start}),this._eras[i].setWidth(s.width),r++,r>5&&(r=0),this._eras[i].setColor(r)}}createMarker(e,r){this._createMarker(e,r)}createMarkers(e){this._createMarkers(e)}destroyMarker(e){this._destroyMarker(e)}destroyMarkerId(e){this.destroyMarker(this._findMarkerIndex(e))}goTo(e,r,i){var s=this.options.ease,o=this.options.duration,a=e<0?0:e;this._resetMarkersActive(),e>=0&&e<this._markers.length&&this._markers[e].setActive(!0),this.animateMovement(a,r,i,o,s),e>=0&&e<this._markers.length?this.current_id=this.current_focused_id=this._markers[e].data.unique_id:this.current_id=this.current_focused_id="",this._setLabelWithCurrentMarker()}goToId(e,r,i){this.goTo(this._findMarkerIndex(e),r,i)}focusOn(e,r,i){const s=this.options.ease,o=this.options.duration,a=e<0?0:e;this.animateMovement(a,r,i,o,s),this._resetMarkersBlurListeners(),e>=0&&e<this._markers.length&&(this._markers[e].setFocus(),this.current_focused_id=this._markers[e].data.unique_id,this._markers[e].on("markerblur",this._onMarkerBlur,this))}focusNext(){const e=this._findMarkerIndex(this.current_focused_id);e+1<this._markers.length?this.focusOn(e+1):this.focusOn(e)}focusPrevious(){const e=this._findMarkerIndex(this.current_focused_id);e-1>=0?this.focusOn(e-1):this.focusOn(e)}animateMovement(e,r,i,s,o){this.animator&&this.animator.stop(),r?(this._el.slider.className="tl-timenav-slider",this._el.slider.style.left=-this._markers[e].getLeft()+this.options.width/2+"px"):i?(this._el.slider.className="tl-timenav-slider tl-timenav-slider-animate",this.animate_css=!0,this._el.slider.style.left=-this._markers[e].getLeft()+this.options.width/2+"px"):(this._el.slider.className="tl-timenav-slider",this.animator=Ni(this._el.slider,{left:-this._markers[e].getLeft()+this.options.width/2+"px",duration:s,easing:o})),e>=0&&e<this._markers.length?this.current_id=this._markers[e].data.unique_id:this.current_id="",this._dispatchVisibleTicksChange()}goToId(e,r,i){this.goTo(this._findMarkerIndex(e),r,i)}_dispatchVisibleTicksChange(){this.ticks_change_timeout&&(clearTimeout(this.ticks_change_timeout),this.ticks_change_timeout=null),this.ticks_change_timeout=setTimeout(()=>{const e=this.timeaxis.getVisibleTicks();this.fire("visible_ticks_change",{visible_ticks:e})},this.options.duration)}_onLoaded(){this.ready=!0,this.fire("loaded",this.config)}_onMarkerAdded(e){this.fire("dateAdded",this.config)}_onEraAdded(e){this.fire("eraAdded",this.config)}_onMarkerRemoved(e){this.fire("dateRemoved",this.config)}_onMarkerClick(e){this.goToId(e.unique_id),this.fire("change",{unique_id:e.unique_id})}_onMarkerBlur(e){this.current_focused_id!==this.current_id&&this.focusOn(this._findMarkerIndex(this.current_id))}_onMouseScroll(e){var r=0,i=0,s={right:-(this.timescale.getPixelWidth()-this.options.width/2),left:this.options.width/2};e||(e=window.event),e.originalEvent&&(e=e.originalEvent),typeof e.wheelDeltaX<"u"&&(r=e.wheelDeltaY/6,Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)?r=e.wheelDeltaX/6:r=0),r&&(e.preventDefault&&e.preventDefault(),e.returnValue=!1),i=parseInt(this._el.slider.style.left.replace("px",""))+r,i>s.left?i=s.left:i<s.right&&(i=s.right),this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1),this._el.slider.style.left=i+"px"}_onDragMove(e){this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1)}_onKeydown(e){switch(Ve.stopPropagation(e),e.key){case"ArrowUp":case"ArrowRight":{this.focusNext();break}case"ArrowDown":case"ArrowLeft":{this.focusPrevious();break}case"Home":{this.focusOn(0);break}case"End":{this.focusOn(this._markers.length-1);break}}}_drawTimeline(e){this.timescale=this._getTimeScale(),this.timeaxis.drawTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(e),this._assignRowsToMarkers(),this._createGroups(),this._positionGroups(),this.has_eras&&this._positionEras(e)}_updateDrawTimeline(e){var r=!1;if(e){var i=new gE(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows});this.timescale.getMajorScale()==i.getMajorScale()&&this.timescale.getMinorScale()==i.getMinorScale()&&(r=!0)}else r=!0;return r?(this.timescale=this._getTimeScale(),this.timeaxis.positionTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(),this._assignRowsToMarkers(),this._positionGroups(),this.has_eras&&this._positionEras(),this.updateDisplay()):this._drawTimeline(!0),r}_setLabelWithCurrentMarker(){const e=this._markers[this._findMarkerIndex(this.current_focused_id)],r=e&&e.ariaLabel?`, ${e.ariaLabel}, shown`:"";this._el.container.setAttribute("aria-label",`Timeline navigation ${r}`)}_initLayout(){this._el.line=fe("div","tl-timenav-line",this._el.container),this._el.slider=fe("div","tl-timenav-slider",this._el.container),this._el.slider_background=fe("div","tl-timenav-slider-background",this._el.slider),this._el.marker_container_mask=fe("div","tl-timenav-container-mask",this._el.slider),this._el.marker_container=fe("div","tl-timenav-container",this._el.marker_container_mask),this._el.marker_item_container=fe("div","tl-timenav-item-container",this._el.marker_container),this._el.timeaxis=fe("div","tl-timeaxis",this._el.slider),this._el.timeaxis_background=fe("div","tl-timeaxis-background",this._el.container),this.timeaxis=new iA(this._el.timeaxis,this.options,this.language),this._swipable=new x_(this._el.slider_background,this._el.slider,{enable:{x:!0,y:!1},constraint:{top:!1,bottom:!1,left:this.options.width/2,right:!1},snap:!1}),this._swipable.enable()}_initEvents(){this._swipable.on("dragmove",this._onDragMove,this),Ve.addListener(this._el.container,"mousewheel",this._onMouseScroll,this),Ve.addListener(this._el.container,"DOMMouseScroll",this._onMouseScroll,this),Ve.addListener(this._el.container,"keydown",this._onKeydown,this)}_initData(){this._createMarkers(this.config.events),this.config.eras&&this.config.eras.length>0&&(this.has_eras=!0,this._createEras(this.config.eras)),this._drawTimeline()}}Dn(lA,Mn,Li,ji);var xm=function(){function t(e,r){for(var i=0;i<r.length;i++){var s=r[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();function Em(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(function(){if(typeof window>"u"||typeof Element>"u")return;var t=Array.prototype.slice,e=Element.prototype.matches||Element.prototype.msMatchesSelector,r=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","details","summary","iframe","object","embed","video","[contenteditable]"].join(","),i=function(){function c(h,f){Em(this,c),this._inertManager=f,this._rootElement=h,this._managedNodes=new Set,this._rootElement.hasAttribute("aria-hidden")?this._savedAriaHidden=this._rootElement.getAttribute("aria-hidden"):this._savedAriaHidden=null,this._rootElement.setAttribute("aria-hidden","true"),this._makeSubtreeUnfocusable(this._rootElement),this._observer=new MutationObserver(this._onMutation.bind(this)),this._observer.observe(this._rootElement,{attributes:!0,childList:!0,subtree:!0})}return xm(c,[{key:"destructor",value:function(){this._observer.disconnect(),this._rootElement&&(this._savedAriaHidden!==null?this._rootElement.setAttribute("aria-hidden",this._savedAriaHidden):this._rootElement.removeAttribute("aria-hidden")),this._managedNodes.forEach(function(f){this._unmanageNode(f.node)},this),this._observer=null,this._rootElement=null,this._managedNodes=null,this._inertManager=null}},{key:"_makeSubtreeUnfocusable",value:function(f){var p=this;a(f,function(P){return p._visitNode(P)});var g=document.activeElement;if(!document.body.contains(f)){for(var b=f,D=void 0;b;){if(b.nodeType===Node.DOCUMENT_FRAGMENT_NODE){D=b;break}b=b.parentNode}D&&(g=D.activeElement)}f.contains(g)&&(g.blur(),g===document.activeElement&&document.body.focus())}},{key:"_visitNode",value:function(f){if(f.nodeType===Node.ELEMENT_NODE){var p=f;p!==this._rootElement&&p.hasAttribute("inert")&&this._adoptInertRoot(p),(e.call(p,r)||p.hasAttribute("tabindex"))&&this._manageNode(p)}}},{key:"_manageNode",value:function(f){var p=this._inertManager.register(f,this);this._managedNodes.add(p)}},{key:"_unmanageNode",value:function(f){var p=this._inertManager.deregister(f,this);p&&this._managedNodes.delete(p)}},{key:"_unmanageSubtree",value:function(f){var p=this;a(f,function(g){return p._unmanageNode(g)})}},{key:"_adoptInertRoot",value:function(f){var p=this._inertManager.getInertRoot(f);p||(this._inertManager.setInert(f,!0),p=this._inertManager.getInertRoot(f)),p.managedNodes.forEach(function(g){this._manageNode(g.node)},this)}},{key:"_onMutation",value:function(f,p){f.forEach(function(g){var b=g.target;if(g.type==="childList")t.call(g.addedNodes).forEach(function(P){this._makeSubtreeUnfocusable(P)},this),t.call(g.removedNodes).forEach(function(P){this._unmanageSubtree(P)},this);else if(g.type==="attributes"){if(g.attributeName==="tabindex")this._manageNode(b);else if(b!==this._rootElement&&g.attributeName==="inert"&&b.hasAttribute("inert")){this._adoptInertRoot(b);var D=this._inertManager.getInertRoot(b);this._managedNodes.forEach(function(P){b.contains(P.node)&&D._manageNode(P.node)})}}},this)}},{key:"managedNodes",get:function(){return new Set(this._managedNodes)}},{key:"hasSavedAriaHidden",get:function(){return this._savedAriaHidden!==null}},{key:"savedAriaHidden",set:function(f){this._savedAriaHidden=f},get:function(){return this._savedAriaHidden}}]),c}(),s=function(){function c(h,f){Em(this,c),this._node=h,this._overrodeFocusMethod=!1,this._inertRoots=new Set([f]),this._savedTabIndex=null,this._destroyed=!1,this.ensureUntabbable()}return xm(c,[{key:"destructor",value:function(){if(this._throwIfDestroyed(),this._node&&this._node.nodeType===Node.ELEMENT_NODE){var f=this._node;this._savedTabIndex!==null?f.setAttribute("tabindex",this._savedTabIndex):f.removeAttribute("tabindex"),this._overrodeFocusMethod&&delete f.focus}this._node=null,this._inertRoots=null,this._destroyed=!0}},{key:"_throwIfDestroyed",value:function(){if(this.destroyed)throw new Error("Trying to access destroyed InertNode")}},{key:"ensureUntabbable",value:function(){if(this.node.nodeType===Node.ELEMENT_NODE){var f=this.node;if(e.call(f,r)){if(f.tabIndex===-1&&this.hasSavedTabIndex)return;f.hasAttribute("tabindex")&&(this._savedTabIndex=f.tabIndex),f.setAttribute("tabindex","-1"),f.nodeType===Node.ELEMENT_NODE&&(f.focus=function(){},this._overrodeFocusMethod=!0)}else f.hasAttribute("tabindex")&&(this._savedTabIndex=f.tabIndex,f.removeAttribute("tabindex"))}}},{key:"addInertRoot",value:function(f){this._throwIfDestroyed(),this._inertRoots.add(f)}},{key:"removeInertRoot",value:function(f){this._throwIfDestroyed(),this._inertRoots.delete(f),this._inertRoots.size===0&&this.destructor()}},{key:"destroyed",get:function(){return this._destroyed}},{key:"hasSavedTabIndex",get:function(){return this._savedTabIndex!==null}},{key:"node",get:function(){return this._throwIfDestroyed(),this._node}},{key:"savedTabIndex",set:function(f){this._throwIfDestroyed(),this._savedTabIndex=f},get:function(){return this._throwIfDestroyed(),this._savedTabIndex}}]),c}(),o=function(){function c(h){if(Em(this,c),!h)throw new Error("Missing required argument; InertManager needs to wrap a document.");this._document=h,this._managedNodes=new Map,this._inertRoots=new Map,this._observer=new MutationObserver(this._watchForInert.bind(this)),l(h.head||h.body||h.documentElement),h.readyState==="loading"?h.addEventListener("DOMContentLoaded",this._onDocumentLoaded.bind(this)):this._onDocumentLoaded()}return xm(c,[{key:"setInert",value:function(f,p){if(p){if(this._inertRoots.has(f))return;var g=new i(f,this);if(f.setAttribute("inert",""),this._inertRoots.set(f,g),!this._document.body.contains(f))for(var b=f.parentNode;b;)b.nodeType===11&&l(b),b=b.parentNode}else{if(!this._inertRoots.has(f))return;var D=this._inertRoots.get(f);D.destructor(),this._inertRoots.delete(f),f.removeAttribute("inert")}}},{key:"getInertRoot",value:function(f){return this._inertRoots.get(f)}},{key:"register",value:function(f,p){var g=this._managedNodes.get(f);return g!==void 0?g.addInertRoot(p):g=new s(f,p),this._managedNodes.set(f,g),g}},{key:"deregister",value:function(f,p){var g=this._managedNodes.get(f);return g?(g.removeInertRoot(p),g.destroyed&&this._managedNodes.delete(f),g):null}},{key:"_onDocumentLoaded",value:function(){var f=t.call(this._document.querySelectorAll("[inert]"));f.forEach(function(p){this.setInert(p,!0)},this),this._observer.observe(this._document.body||this._document.documentElement,{attributes:!0,subtree:!0,childList:!0})}},{key:"_watchForInert",value:function(f,p){var g=this;f.forEach(function(b){switch(b.type){case"childList":t.call(b.addedNodes).forEach(function(x){if(x.nodeType===Node.ELEMENT_NODE){var E=t.call(x.querySelectorAll("[inert]"));e.call(x,"[inert]")&&E.unshift(x),E.forEach(function(_){this.setInert(_,!0)},g)}},g);break;case"attributes":if(b.attributeName!=="inert")return;var D=b.target,P=D.hasAttribute("inert");g.setInert(D,P);break}},this)}}]),c}();function a(c,h,f){if(c.nodeType==Node.ELEMENT_NODE){var p=c;h&&h(p);var g=p.shadowRoot;if(g){a(g,h);return}if(p.localName=="content"){for(var b=p,D=b.getDistributedNodes?b.getDistributedNodes():[],P=0;P<D.length;P++)a(D[P],h);return}if(p.localName=="slot"){for(var x=p,E=x.assignedNodes?x.assignedNodes({flatten:!0}):[],_=0;_<E.length;_++)a(E[_],h);return}}for(var R=c.firstChild;R!=null;)a(R,h),R=R.nextSibling}function l(c){if(!c.querySelector("style#inert-style, link#inert-style")){var h=document.createElement("style");h.setAttribute("id","inert-style"),h.textContent=`
[inert] {
  pointer-events: none;
  cursor: default;
}

[inert], [inert] * {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
`,c.appendChild(h)}}if(!HTMLElement.prototype.hasOwnProperty("inert")){var u=new o(document);Object.defineProperty(HTMLElement.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(h){u.setInert(this,h)}})}})();class uA{constructor(e,r,i,s){s&&this.setLanguage(s),this._el={container:{},scroll_container:{},background:{},content_container:{},content:{}},this._media=null,this._mediaclass={},this._text={},this._background_media=null,this._state={loaded:!1},this.has={headline:!1,text:!1,media:!1,title:!1,background:{image:!1,color:!1,color_value:""}},this.has.title=i,this.data={unique_id:null,background:null,start_date:null,end_date:null,location:null,text:null,media:null,autolink:!0},this.options={duration:1e3,slide_padding_lr:40,ease:$f,width:600,height:600,skinny_size:650,media_name:""},this.active=!1,this.animator={},ot(this.options,r),ot(this.data,e),this._initLayout(),this._initEvents()}show(){this.animator=Ni(this._el.slider_container,{left:-(this._el.container.offsetWidth*n)+"px",duration:this.options.duration,easing:this.options.ease})}hide(){}setActive(e){this.active=e,this.active?(this.data.background&&this.fire("background_change",this.has.background),this._setInteractive(!0),this.loadMedia()):(this.stopMedia(),this._setInteractive(!1))}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r,i){var s,o=this.options.slide_padding_lr,a=this.options.slide_padding_lr;e?this.options.width=e:this.options.width=this._el.container.offsetWidth,s=this.options.width-this.options.slide_padding_lr*2,Eo&&this.options.width<=this.options.skinny_size?(o=0,a=0,s=this.options.width):i=="landscape"||this.options.width<=this.options.skinny_size&&(o=50,a=50,s=this.options.width-o-a),this._el.content.style.paddingLeft=o+"px",this._el.content.style.paddingRight=a+"px",this._el.content.style.width=s+"px",r?this.options.height=r:this.options.height=this._el.container.offsetHeight,this._media&&(!this.has.text&&this.has.headline?this._media.updateDisplay(s,this.options.height-this._text.headlineHeight(),i):!this.has.text&&!this.has.headline?this._media.updateDisplay(s,this.options.height,i):this.options.width<=this.options.skinny_size?this._media.updateDisplay(s,this.options.height,i):this._media.updateDisplay(s/2,this.options.height,i)),this._updateBackgroundDisplay()}loadMedia(){var e=this;this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0),this._background_media&&!this._background_media._state.loaded&&(this._background_media.on("loaded",function(){e._updateBackgroundDisplay()}),this._background_media.loadMedia())}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getBackground(){return this.has.background}scrollToTop(){this._el.container.scrollTop=0}getFormattedDate(){if(Zn(this.data.display_date).length>0)return this.data.display_date;var e="";return this.has.title||(this.data.end_date&&(e=" &mdash; "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(e=this.data.start_date.getDisplayDate(this.getLanguage())+e)),e}_initLayout(){if(this._el.container=fe("div","tl-slide"),this.has.title&&(this._el.container.className="tl-slide tl-slide-titleslide"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._el.scroll_container=fe("div","tl-slide-scrollable-container",this._el.container),this._el.content_container=fe("div","tl-slide-content-container",this._el.scroll_container),this._el.content=fe("div","tl-slide-content",this._el.content_container),this._el.background=fe("div","tl-slide-background",this._el.container),this.data.background){if(this.data.background.url){var e=$h(this.data.background,!0);e&&(this._background_media=new e.cls(this.data.background,{background:1}),this.has.background.image=!0,this._el.container.className+=" tl-full-image-background",this.has.background.color_value="#000",this._el.background.style.display="block"),this.data.background.alt&&(this._el.background.setAttribute("role","img"),this._el.background.setAttribute("aria-label",this.data.background.alt))}this.data.background.color&&(this.has.background.color=!0,this._el.container.className+=" tl-full-color-background",this.has.background.color_value=this.data.background.color),this.data.background.text_background&&(this._el.container.className+=" tl-text-background")}this.data.media&&this.data.media.url&&this.data.media.url!=""&&(this.has.media=!0),this.data.text&&this.data.text.text&&(this.has.text=!0),this.data.text&&this.data.text.headline&&(this.has.headline=!0),this.has.media&&(this.data.media.mediatype=$h(this.data.media),this.options.media_name=this.data.media.mediatype.name,this.options.media_type=this.data.media.mediatype.type,this.options.autolink=this.data.autolink,this._media=new this.data.media.mediatype.cls(this.data.media,this.options,this.getLanguage())),(this.has.text||this.has.headline)&&(this._text=new sA(this.data.text,{title:this.has.title,language:this.getLanguage(),autolink:this.data.autolink}),this._text.addDateText(this.getFormattedDate())),!this.has.text&&!this.has.headline&&this.has.media?(this._el.container.classList.add("tl-slide-media-only"),this._media.addTo(this._el.content)):this.has.headline&&this.has.media&&!this.has.text?(this._el.container.classList.add("tl-slide-media-only"),this._text.addTo(this._el.content),this._media.addTo(this._el.content)):this.has.text&&this.has.media?(this._text.addTo(this._el.content),this._media.addTo(this._el.content)):(this.has.text||this.has.headline)&&(this._el.container.classList.add("tl-slide-text-only"),this._text.addTo(this._el.content)),this.onLoaded()}_initEvents(){}_updateBackgroundDisplay(){this._background_media&&this._background_media._state.loaded&&(this._el.background.style.backgroundImage="url('"+this._background_media.getImageURL(this.options.width,this.options.height)+"')")}_setInteractive(e){e?this._el.container.removeAttribute("inert"):this._el.container.setAttribute("inert",!0)}}Dn(uA,ji,Mn,Li);class mv{constructor(e,r,i){this._el={container:{},content_container:{},icon:{},title:{},description:{}},this.mediatype={},this.data={title:"Navigation",description:"Description",date:"Date"},this.options={direction:"previous"},this.animator=null,ot(this.options,r),ot(this.data,e),this._el.container=zl("tl-slidenav-"+this.options.direction),Eo&&this._el.container.setAttribute("ontouchstart"," "),this._initLayout(),this._initEvents(),i&&i.appendChild(this._el.container)}update(e){var r={title:"",description:"",date:e.getFormattedDate()};e.data.text&&e.data.text.headline&&(r.title=e.data.text.headline),this._update(r)}setColor(e){e?this._el.content_container.className="tl-slidenav-content-container tl-slidenav-inverted":this._el.content_container.className="tl-slidenav-content-container"}_onMouseClick(){this.fire("clicked",this.options)}_update(e){this.data=ot(this.data,e);const r=fa(this.data.title);this._el.title.innerHTML=r;const i=fa(this.data.date);this._el.description.innerHTML=i,this._el.container.setAttribute("aria-label",`${this.options.direction}, ${r}, ${i}`)}_initLayout(){this._el.content_container=fe("div","tl-slidenav-content-container",this._el.container),this._el.icon=fe("div","tl-slidenav-icon",this._el.content_container),this._el.title=fe("div","tl-slidenav-title",this._el.content_container),this._el.description=fe("div","tl-slidenav-description",this._el.content_container),this._el.icon.innerHTML="&nbsp;",this._update()}_initEvents(){Ve.addListener(this._el.container,"click",this._onMouseClick,this)}}Dn(mv,Li,Mn);class cA{constructor(e,r,i,s){s&&this.setLanguage(s),this._el={container:{},background:{},slider_container_mask:{},slider_container:{},slider_item_container:{}},this._nav={},this._nav.previous={},this._nav.next={},this.slide_spacing=0,this._slides=[],this._swipable,this.preloadTimer,this._message,this.current_id="",this.data={},this.options={id:"",layout:"portrait",width:600,height:600,default_bg_color:{r:255,g:255,b:255},slide_padding_lr:40,start_at_slide:1,slide_default_fade:"0%",duration:1e3,ease:Ja,dragging:!0,trackResize:!0},typeof e=="object"?(this._el.container=e,this.options.id=fo(6,"tl")):(this.options.id=e,this._el.container=uc(e)),this._el.container.id||(this._el.container.id=this.options.id),this.animator=null,ot(this.options,i),ot(this.data,r)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this.goTo(this.options.start_at_slide),this._onLoaded()}_addSlide(e){e.addTo(this._el.slider_item_container),e.on("added",this._onSlideAdded,this),e.on("background_change",this._onBackgroundChange,this)}_createSlide(e,r,i){var s=new uA(e,this.options,r,this.getLanguage());this._addSlide(s),i<0?this._slides.push(s):this._slides.splice(i,0,s)}_createSlides(e){for(var r=0;r<e.length;r++)e[r].unique_id==""&&(e[r].unique_id=fo(6,"tl-slide")),this._createSlide(e[r],!1,-1)}_removeSlide(e){e.removeFrom(this._el.slider_item_container),e.off("added",this._onSlideRemoved,this),e.off("background_change",this._onBackgroundChange)}_destroySlide(e){this._removeSlide(this._slides[e]),this._slides.splice(e,1)}_findSlideIndex(e){var r=e;return(typeof e=="string"||e instanceof String)&&(r=qC(e,this._slides,"unique_id")),r}updateDisplay(e,r,i,s){var o,a;typeof s>"u"?a=this.options.layout:a=s,this.options.layout=a,e?this.options.width=e:this.options.width=this._el.container.offsetWidth,r?this.options.height=r:this.options.height=this._el.container.offsetHeight,this.slide_spacing=this.options.width*2,o=this.options.height/2,this._nav.next.setPosition({top:o}),this._nav.previous.setPosition({top:o});for(var l=0;l<this._slides.length;l++)this._slides[l].updateDisplay(this.options.width,this.options.height,a),this._slides[l].setPosition({left:this.slide_spacing*l,top:0});this.goToId(this.current_id,!0,!0)}createSlide(e,r){this._createSlide(e,!1,r)}createSlides(e){this._createSlides(e)}destroySlide(e){this._destroySlide(e)}destroySlideId(e){this.destroySlide(this._findSlideIndex(e))}goTo(e,r,i){e=parseInt(e),isNaN(e)&&(e=0);var s=this;this.changeBackground({color_value:"",image:!1}),this.preloadTimer&&clearTimeout(this.preloadTimer);for(var o=0;o<this._slides.length;o++)this._slides[o].setActive(!1);e<this._slides.length&&e>=0&&(this.current_id=this._slides[e].data.unique_id,this.animator&&this.animator.stop(),this._swipable&&this._swipable.stopMomentum(),r?(this._el.slider_container.style.left=-(this.slide_spacing*e)+"px",this._onSlideChange(i)):this.animator=Ni(this._el.slider_container,{left:-(this.slide_spacing*e)+"px",duration:this.options.duration,easing:this.options.ease,complete:this._onSlideChange(i)}),this._slides[e].setActive(!0),this._slides[e+1]?(this.showNav(this._nav.next,!0),this._nav.next.update(this._slides[e+1])):this.showNav(this._nav.next,!1),this._slides[e-1]?(this.showNav(this._nav.previous,!0),this._nav.previous.update(this._slides[e-1])):this.showNav(this._nav.previous,!1),this.preloadTimer=setTimeout(function(){s.preloadSlides(e)},this.options.duration))}goToId(e,r,i){this.goTo(this._findSlideIndex(e),r,i)}preloadSlides(e){this._slides[e+1]&&(this._slides[e+1].loadMedia(),this._slides[e+1].scrollToTop()),this._slides[e+2]&&(this._slides[e+2].loadMedia(),this._slides[e+2].scrollToTop()),this._slides[e-1]&&(this._slides[e-1].loadMedia(),this._slides[e-1].scrollToTop()),this._slides[e-2]&&(this._slides[e-2].loadMedia(),this._slides[e-2].scrollToTop())}next(){var e=this._findSlideIndex(this.current_id);e+1<this._slides.length?this.goTo(e+1):this.goTo(e)}previous(){var e=this._findSlideIndex(this.current_id);e-1>=0?this.goTo(e-1):this.goTo(e)}showNav(e,r){this.options.width<=500&&Eo?e.hide():r?e.show():e.hide()}changeBackground(e){var r={r:256,g:256,b:256};e.color_value&&e.color_value!=""?(r=HC(e.color_value),r||(Xe("Invalid color value "+e.color_value),r=this.options.default_bg_color)):(r=this.options.default_bg_color,e.color_value="rgb("+r.r+" , "+r.g+", "+r.b+")"),r.r+""+r.g+r.b,this._el.background.style.backgroundImage="none",e.color_value?this._el.background.style.backgroundColor=e.color_value:this._el.background.style.backgroundColor="transparent",r.r<255||r.g<255||r.b<255||e.image?(this._nav.next.setColor(!0),this._nav.previous.setColor(!0)):(this._nav.next.setColor(!1),this._nav.previous.setColor(!1))}_updateDrawSlides(){for(var e=this.options.layout,r=0;r<this._slides.length;r++)this._slides[r].updateDisplay(this.options.width,this.options.height,e),this._slides[r].setPosition({left:this.slide_spacing*r,top:0});this.goToId(this.current_id,!0,!1)}_initLayout(){this._el.container.classList.add("tl-storyslider"),this._nav.previous=new mv({title:"Previous",description:"description"},{direction:"previous"},this._el.container),this._nav.next=new mv({title:"Next",description:"description"},{direction:"next"},this._el.container),this._el.slider_container_mask=fe("div","tl-slider-container-mask",this._el.container),this._el.background=fe("div","tl-slider-background tl-animate",this._el.container),this._el.slider_container=fe("div","tl-slider-container tlanimate",this._el.slider_container_mask),this._el.slider_item_container=fe("div","tl-slider-item-container",this._el.slider_container),this._el.slider_container.setAttribute("aria-live","polite"),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this._el.slider_container.style.left="0px",ni&&(this._swipable=new x_(this._el.slider_container_mask,this._el.slider_container,{enable:{x:!0,y:!1},snap:!0}),this._swipable.enable(),this._message=new qf(this._el.container,{message_class:"tl-message-full",message_icon_class:"tl-icon-swipe-left"},this.getLanguage()),this._message.updateMessage(this._("swipe_to_navigate")),this._message.addTo(this._el.container))}_initEvents(){this._nav.next.on("clicked",this._onNavigation,this),this._nav.previous.on("clicked",this._onNavigation,this),this._message&&this._message.on("clicked",this._onMessageClick,this),this._swipable&&(this._swipable.on("swipe_left",this._onNavigation,this),this._swipable.on("swipe_right",this._onNavigation,this),this._swipable.on("swipe_nodirection",this._onSwipeNoDirection,this))}_initData(){this.data.title&&this._createSlide(this.data.title,!0,-1),this._createSlides(this.data.events)}_onBackgroundChange(e){var r=this._findSlideIndex(this.current_id),i=this._slides[r].getBackground();this.changeBackground(e),this.fire("colorchange",i)}_onMessageClick(e){this._message.hide()}_onSwipeNoDirection(e){this.goToId(this.current_id)}_onNavigation(e){e.direction=="next"||e.direction=="left"?this.next():(e.direction=="previous"||e.direction=="right")&&this.previous(),this.fire("nav_"+e.direction,this.data)}_onSlideAdded(e){Xe("slideadded"),this.fire("slideAdded",this.data)}_onSlideRemoved(e){this.fire("slideRemoved",this.data)}_onSlideChange(e){e||this.fire("change",{unique_id:this.current_id})}_onMouseClick(e){}_fireMouseEvent(e){if(this._loaded){var r=e.type;r=r==="mouseenter"?"mouseover":r==="mouseleave"?"mouseout":r,this.hasEventListeners(r)&&(r==="contextmenu"&&Ve.preventDefault(e),this.fire(r,{latlng:"something",layerPoint:"something else"}))}}_onLoaded(){this.fire("loaded",this.data)}}Dn(cA,ji,Mn);class dA{constructor(e,r,i,s){this._el={parent:{},container:{},button_forwardtoend:{},button_backtostart:{},button_zoomin:{},button_zoomout:{},arrow:{},line:{},coverbar:{},grip:{}},this.collapsed=!1,typeof e=="object"?this._el.container=e:this._el.container=uc(e),r&&(this._el.parent=r),this.data={visible_ticks_dates:{}},this.options={width:600,height:600,duration:1e3,ease:Ja,menubar_default_y:0},this.animator={},this.setLanguage(s),ot(this.options,i),this._initLayout(),this._initEvents()}show(e){this.options.duration}hide(e){}toogleZoomIn(e){e?this._el.button_zoomin.removeAttribute("disabled"):this._el.button_zoomin.setAttribute("disabled",!0)}toogleZoomOut(e){e?this._el.button_zoomout.removeAttribute("disabled"):this._el.button_zoomout.setAttribute("disabled",!0)}changeVisibleTicks(e){const r=e.minor;if(!r.length){this.data.visible_ticks_dates={};return}const s=r[0].date.getFullYear(),a=r[r.length-1].date.getFullYear();this.data.visible_ticks_dates={start:s,end:a},this._updateZoomAriaLabels()}setSticky(e){this.options.menubar_default_y=e}setColor(e){e?this._el.container.className="tl-menubar tl-menubar-inverted":this._el.container.className="tl-menubar"}updateDisplay(e,r,i,s){this._updateDisplay(e,r,i,s)}_onButtonZoomIn(e){this.fire("zoom_in",e)}_onButtonZoomOut(e){this.fire("zoom_out",e)}_onButtonForwardToEnd(e){this.fire("forward_to_end",e)}_onButtonBackToStart(e){this.fire("back_to_start",e)}_initLayout(){this._el.button_zoomin=zl("tl-menubar-button",this._el.container),this._el.button_zoomout=zl("tl-menubar-button",this._el.container),this._el.button_forwardtoend=zl("tl-menubar-button",this._el.container),this._el.button_backtostart=zl("tl-menubar-button",this._el.container),Eo&&this._el.container.setAttribute("ontouchstart"," "),this._el.button_backtostart.innerHTML="<span class='tl-icon-goback'></span>",this._el.button_backtostart.setAttribute("aria-label",this._("return_to_title")),this._el.button_forwardtoend.innerHTML="<span class='tl-icon-goend'></span>",this._el.button_forwardtoend.setAttribute("aria-label",this._("go_to_end")),this._el.button_zoomin.innerHTML="<span class='tl-icon-zoom-in'></span>",this._el.button_zoomin.setAttribute("aria-label",this._("zoom_in")),this._el.button_zoomout.innerHTML="<span class='tl-icon-zoom-out'></span>",this._el.button_zoomout.setAttribute("aria-label",this._("zoom_out"))}_initEvents(){Ve.addListener(this._el.button_forwardtoend,"click",this._onButtonForwardToEnd,this),Ve.addListener(this._el.button_backtostart,"click",this._onButtonBackToStart,this),Ve.addListener(this._el.button_zoomin,"click",this._onButtonZoomIn,this),Ve.addListener(this._el.button_zoomout,"click",this._onButtonZoomOut,this)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}_updateZoomAriaLabels(){Object.keys(this.data.visible_ticks_dates).length==0?(this._el.button_zoomin.setAttribute("aria-description",""),this._el.button_zoomout.setAttribute("aria-description","")):(this._el.button_zoomin.setAttribute("aria-description",this._("aria_label_zoomin",this.data.visible_ticks_dates)),this._el.button_zoomout.setAttribute("aria-description",this._("aria_label_zoomout",this.data.visible_ticks_dates)))}}Dn(dA,Li,Mn,ji);let gv=null;if(document){let t=document.getElementsByTagName("script");t&&t.length>0&&(gv=t[t.length-1].src)}function G5(t){return function(e){if(t.config){var r=e.key,i=t._getSlideIndex(self.current_id),s=t.config.events.length-1,o=t.config.title?s+1:s,a=0;r=="ArrowLeft"?i!=a&&t.goToPrev():r=="ArrowRight"&&i!=o&&t.goToNext()}}}class hA{constructor(e,r,i){if(i||(i={}),this.ready=!1,this._el={container:uc(e),storyslider:{},timenav:{},menubar:{}},i.lang&&!i.language&&(i.language=i.lang),this.language=b_,this._storyslider={},this._timenav={},this._menubar={},this._loaded={storyslider:!1,timenav:!1},this.config=null,this.options={script_path:"https://cdn.knightlab.com/libs/timeline3/latest/js/",height:this._el.container.offsetHeight,width:this._el.container.offsetWidth,debug:!1,font:"default",is_embed:!1,is_full_embed:!1,hash_bookmark:!1,default_bg_color:{r:255,g:255,b:255},scale_factor:2,layout:"landscape",timenav_position:"bottom",optimal_tick_width:60,base_class:"tl-timeline",timenav_height:null,timenav_height_percentage:25,timenav_mobile_height_percentage:40,timenav_height_min:175,marker_height_min:30,marker_width_min:100,marker_padding:5,start_at_slide:0,start_at_end:!1,menubar_height:0,skinny_size:650,medium_size:800,use_bc:!1,duration:1e3,ease:Ja,dragging:!0,trackResize:!0,map_type:"stamen:toner-lite",slide_padding_lr:100,slide_default_fade:"0%",zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89],language:"en",ga_measurement_id:null,ga_property_id:null,track_events:["back_to_start","nav_next","nav_previous","zoom_in","zoom_out"],theme:null,sheets_proxy:"https://sheets-proxy.knightlab.com/proxy/",soundcite:!1},this.animator_timenav=null,this.animator_storyslider=null,this.animator_menubar=null,this.message=new qf(this._el.container,{message_class:"tl-message-full"}),typeof i.default_bg_color=="string"){var s=HC(i.default_bg_color);s?i.default_bg_color=s:(delete i.default_bg_color,Xe("Invalid default background color. Ignoring."))}ot(this.options,i),this.options.script_path||(this.options.script_path=this.determineScriptPath()),i.soundcite&&this.on("ready",()=>{Xe("Loading Soundcite resources "),bm("https://cdn.knightlab.com/libs/soundcite/latest/css/player.css"),po("https://cdn.knightlab.com/libs/soundcite/latest/js/soundcite.min.js")}),this._loadStyles(),document.addEventListener("keydown",G5(this)),window.addEventListener("resize",(function(o){this.updateDisplay()}).bind(this)),this.options.debug&&d$(console.log),this._el.container.classList.add("tl-timeline"),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","region"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline")),this.options.is_embed&&this._el.container.classList.add("tl-timeline-embed"),this.options.is_full_embed&&this._el.container.classList.add("tl-timeline-full-embed"),this._loadLanguage(r)}_loadStyles(){let e=null,r=null;if(this.options.font&&(this.options.font.indexOf("http")==0||this.options.font.match(/\.css$/)))e=this.options.font;else if(this.options.font){let i="../css/fonts/font."+this.options.font.toLowerCase()+".css";e=new URL(i,this.options.script_path).toString()}if(e&&bm(e),this.options.theme&&(this.options.theme.indexOf("http")==0||this.options.theme.match(/\.css$/)))r=this.options.theme;else if(this.options.theme){let i="../css/themes/timeline.theme."+this.options.theme.toLowerCase()+".css";r=new URL(i,this.options.script_path).toString()}r&&bm(r)}_loadLanguage(e){try{var r=this.options.language,i=this.options.script_path;C$(r,i).then(s=>{s?(this.language=s,this.message.setLanguage(this.language),this.showMessage(this._("loading_timeline"))):this.showMessage(`Error loading ${r}`),this._initData(e)})}catch(s){this.showMessage(this._translateError(s))}}_initData(e){typeof e=="string"?d5(e,{callback:(function(r){this.setConfig(r)}).bind(this),sheets_proxy:this.options.sheets_proxy}):Ys==e.constructor?this.setConfig(e):this.setConfig(new Ys(e))}_translateError(e){return e.hasOwnProperty("stack")&&Xe(e.stack),e.message_key?this._(e.message_key)+(e.detail?" ["+e.detail+"]":""):e}showMessage(e){this.message?this.message.updateMessage(e):(Xe("No message display available."),Xe(e))}determineScriptPath(){let e=null;if(gv)e=gv;else{let r=document.getElementById("timeline-script-tag");r&&(e=r.src)}if(!e){let r=document.getElementsByTagName("script");for(let i=r.length-1;i>=0;i--)if(r[i].src){e=r[i].src;break}}return e?e.substr(0,e.lastIndexOf("/")+1):""}setConfig(e){if(this.config=e,this.config.isValid()&&(this.config.validate(),this._validateOptions()),this.config.isValid())try{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this._onDataLoaded.bind(this)):this._onDataLoaded()}catch(o){this.showMessage("<strong>"+this._("error")+":</strong> "+this._translateError(o))}else{for(var r=[],i=0,s=this.config.getErrors();i<s.length;i++)r.push(this._translateError(s[i]));this.showMessage("<strong>"+this._("error")+":</strong> "+r.join("<br>"))}}_onDataLoaded(){this.fire("dataloaded"),this._initLayout(),this._initEvents(),this._initAnalytics(),this.message&&this.message.hide();let e=(i,s)=>{i.reduce((o,a)=>o||a.isIntersecting,!1)&&this.updateDisplay()};new IntersectionObserver(e.bind(this)).observe(this._el.container),this.ready=!0,this.fire("ready")}_initLayout(){this.message.removeFrom(this._el.container),this._el.container.innerHTML="",this.options.timenav_position=="top"?(this._el.timenav=fe("div","tl-timenav",this._el.container),this._el.menubar=fe("div","tl-menubar",this._el.container),this._el.storyslider=fe("div","tl-storyslider",this._el.container)):(this._el.storyslider=fe("div","tl-storyslider",this._el.container),this._el.timenav=fe("div","tl-timenav",this._el.container),this._el.menubar=fe("div","tl-menubar",this._el.container)),this._el.attribution=fe("div","tl-attribution",this._el.container),this._el.attribution.innerHTML="<a href='https://timeline.knightlab.com' target='_blank' rel='noopener'><span class='tl-knightlab-logo'></span>TimelineJS</a>",this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.timenav_height=this._calculateTimeNavHeight(this.options.timenav_height),this._timenav=new lA(this._el.timenav,this.config,this.options,this.language),this._timenav.on("loaded",this._onTimeNavLoaded,this),this._timenav.options.height=this.options.timenav_height,this._timenav.init(),this.options.initial_zoom&&this.setZoom(this.options.initial_zoom),this._storyslider=new cA(this._el.storyslider,this.config,this.options,this.language),this._el.storyslider.setAttribute("role","group"),this._el.storyslider.setAttribute("aria-label",this._("aria_label_timeline_content")),this._storyslider.on("loaded",this._onStorySliderLoaded,this),this._storyslider.init(),this._menubar=new dA(this._el.menubar,this._el.container,this.options,this.getLanguage()),this.options.layout=="portrait"?this.options.storyslider_height=this.options.height-this.options.timenav_height-1:this.options.storyslider_height=this.options.height-1,this._updateDisplay()}_initEvents(){this._timenav.on("change",this._onTimeNavChange,this),this._timenav.on("zoomtoggle",this._onZoomToggle,this),this._timenav.on("visible_ticks_change",this._onVisibleTicksChange,this),this._storyslider.on("change",this._onSlideChange,this),this._storyslider.on("colorchange",this._onColorChange,this),this._storyslider.on("nav_next",this._onStorySliderNext,this),this._storyslider.on("nav_previous",this._onStorySliderPrevious,this),this._menubar.on("zoom_in",this._onZoomIn,this),this._menubar.on("zoom_out",this._onZoomOut,this),this._menubar.on("forward_to_end",this._onForwardToEnd,this),this._menubar.on("back_to_start",this._onBackToStart,this)}_onColorChange(e){this.fire("color_change",{unique_id:this.current_id},this)}_onSlideChange(e){this.current_id!=e.unique_id&&(this.current_id=e.unique_id,this._timenav.goToId(this.current_id),this._onChange(e))}_onTimeNavChange(e){this.current_id!=e.unique_id&&(this.current_id=e.unique_id,this._storyslider.goToId(this.current_id),this._onChange(e))}_onZoomToggle(e){e.zoom=="in"?this._menubar.toogleZoomIn(e.show):e.zoom=="out"&&this._menubar.toogleZoomOut(e.show)}_onChange(e){this.fire("change",{unique_id:this.current_id},this),this.options.hash_bookmark&&this.current_id&&this._updateHashBookmark(this.current_id)}_onVisibleTicksChange(e){this._menubar.changeVisibleTicks(e.visible_ticks)}_onForwardToEnd(e){this.goToEnd(),this.fire("forward_to_end",{unique_id:this.current_id},this)}_onBackToStart(e){this.goToStart(),this.fire("back_to_start",{unique_id:this.current_id},this)}_onZoomIn(e){this._timenav.zoomIn(),this.fire("zoom_in",{zoom_level:this._timenav.options.scale_factor},this)}_onZoomOut(e){this._timenav.zoomOut(),this.fire("zoom_out",{zoom_level:this._timenav.options.scale_factor},this)}_onTimeNavLoaded(){this._loaded.timenav=!0,this._onLoaded()}_onStorySliderLoaded(){this._loaded.storyslider=!0,this._onLoaded()}_onStorySliderNext(e){this.fire("nav_next",e)}_onStorySliderPrevious(e){this.fire("nav_previous",e)}_updateDisplay(e,r,i){var s=this.options.duration,o=this.options.base_class,a=0;i&&(s=i),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.width<=this.options.skinny_size?(o+=" tl-skinny",this.options.layout="portrait"):this.options.width<=this.options.medium_size?(o+=" tl-medium",this.options.layout="landscape"):this.options.layout="landscape",ni&&(this.options.layout=u$()),Eo?(o+=" tl-mobile",this.options.timenav_height=this._calculateTimeNavHeight(e,this.options.timenav_mobile_height_percentage)):this.options.timenav_height=this._calculateTimeNavHeight(e),this.options.layout=="portrait"?o+=" tl-layout-portrait":o+=" tl-layout-landscape",this.options.storyslider_height=this.options.height-this.options.timenav_height,this.options.timenav_position=="top"?a=Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-39/2:a=Math.round(this.options.storyslider_height+1+Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-35/2),r?(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this.animator_storyslider&&this.animator_storyslider.stop(),this.animator_storyslider=Ni(this._el.storyslider,{height:this.options.storyslider_height+"px",duration:s/2,easing:Mu}),this.animator_menubar&&this.animator_menubar.stop(),this.animator_menubar=Ni(this._el.menubar,{top:a+"px",duration:s/2,easing:Mu})):(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this._el.storyslider.style.height=this.options.storyslider_height+"px",this._el.menubar.style.top=a+"px"),this.message&&this.message.updateDisplay(this.options.width,this.options.height),this._timenav.updateDisplay(this.options.width,this.options.timenav_height,r),this._storyslider.updateDisplay(this.options.width,this.options.storyslider_height,r,this.options.layout),this.language.direction=="rtl"&&(o+=" tl-rtl"),this._el.container.className=o}_calculateTimeNavHeight(e,r){var i=0;return(this.options.timenav_height_percentage||r)&&(r?i=Math.round(this.options.height/100*r):i=Math.round(this.options.height/100*this.options.timenav_height_percentage)),this._timenav.ready&&this.options.timenav_height_min<this._timenav.getMinimumHeight()&&(this.options.timenav_height_min=this._timenav.getMinimumHeight()),i<this.options.timenav_height_min&&(i=this.options.timenav_height_min),i=i-this.options.marker_padding*2,i}_validateOptions(){for(var e=["timenav_height","timenav_height_min","marker_height_min","marker_width_min","marker_padding","start_at_slide","slide_padding_lr"],r=0;r<e.length;r++){var i=e[r],s=this.options[i];let o=!0;typeof s=="number"?o=s==parseInt(s):typeof s=="string"&&(o=s.match(/^\s*(\-?\d+)?\s*$/)),o||this.config.logError({message_key:"invalid_integer_option",detail:i})}}_getSlideIndex(e){if(this.config){if(this.config.title&&this.config.title.unique_id==e)return 0;for(var r=0;r<this.config.events.length;r++)if(e==this.config.events[r].unique_id)return this.config.title?r+1:r}return-1}_getEventIndex(e){for(var r=0;r<this.config.events.length;r++)if(e==this.config.events[r].unique_id)return r;return-1}_onLoaded(){if(this._loaded.storyslider&&this._loaded.timenav&&(this.fire("loaded",this.config),c$(this.options.start_at_end)||this.options.start_at_slide>this.config.events.length?this.goToEnd():this.goTo(this.options.start_at_slide),this.options.hash_bookmark)){window.location.hash!=""?this.goToId(window.location.hash.replace("#event-","")):this._updateHashBookmark(this.current_id);let e=this;window.addEventListener("hashchange",function(){window.location.hash.indexOf("#event-")==0&&e.goToId(window.location.hash.replace("#event-",""))},!1)}}_updateHashBookmark(e){if(e){var r="#event-"+e.toString();window.history.replaceState(null,"Browsing TimelineJS",r),this.fire("hash_updated",{unique_id:this.current_id,hashbookmark:"#event-"+e.toString()},this)}}zoomIn(){this._timenav.zoomIn()}zoomOut(){this._timenav.zoomOut()}setZoom(e){this._timenav.setZoom(e)}goToId(e){this.current_id!=e&&(this.current_id=e,this._timenav.goToId(this.current_id),this._storyslider.goToId(this.current_id,!1,!0),this.fire("change",{unique_id:this.current_id},this))}goTo(e){if(!(e<0))try{this.config.title?e===0?this.goToId(this.config.title.unique_id):this.goToId(this.config.events[e-1].unique_id):this.goToId(this.config.events[e].unique_id)}catch{return}}goToStart(){this.goTo(0)}goToEnd(){var e=this.config.events.length-1;this.goTo(this.config.title?e+1:e)}goToPrev(){this.goTo(this._getSlideIndex(this.current_id)-1),this.focusContainer()}goToNext(){this.goTo(this._getSlideIndex(this.current_id)+1),this.focusContainer()}add(e){var r=this.config.addEvent(e),i=this._getEventIndex(r),s=this.config.events[i];this._storyslider.createSlide(s,this.config.title?i+1:i),this._storyslider._updateDrawSlides(),this._timenav.createMarker(s,i),this._timenav._updateDrawTimeline(!1),this.fire("added",{unique_id:r})}remove(e){if(e>=0&&e<this.config.events.length){this.config.events[e].unique_id==this.current_id&&(e<this.config.events.length-1?this.goTo(e+1):this.goTo(e-1));var r=this.config.events.splice(e,1);delete this.config.event_dict[r[0].unique_id],this._storyslider.destroySlide(this.config.title?e+1:e),this._storyslider._updateDrawSlides(),this._timenav.destroyMarker(e),this._timenav._updateDrawTimeline(!1),this.fire("removed",{unique_id:r[0].unique_id})}}removeId(e){this.remove(this._getEventIndex(e))}getData(e){if(this.config.title){if(e==0)return this.config.title;if(e>0&&e<=this.config.events.length)return this.config.events[e-1]}else if(e>=0&&e<this.config.events.length)return this.config.events[e];return null}getDataById(e){return this.getData(this._getSlideIndex(e))}getSlide(e){return e>=0&&e<this._storyslider._slides.length?this._storyslider._slides[e]:null}getSlideById(e){return this.getSlide(this._getSlideIndex(e))}getCurrentSlide(){return this.getSlideById(this.current_id)}updateDisplay(){this.ready?this._updateDisplay():Xe("updateDisplay called but timeline is not in ready state")}focusContainer(){this._el.container.focus()}_initGoogleAnalytics(e){po(`https://www.googletagmanager.com/gtag/js?id=${e}`),window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",e)}_initAnalytics(){let e=this.options.ga_measurement_id||this.options.ga_property_id||null;if(e){this._initGoogleAnalytics(e);var r=this.options.track_events;for(let s=0;s<r.length;s++){var i=r[s];this.addEventListener(i,function(o){gtag("event",o.type)})}}}}Dn(hA,ji,Mn);function K5(){const t=M.useRef(null),[e,r]=M.useState(null),[i,s]=M.useState(!0),[o,a]=M.useState(null),l=Fr(),u=M.useRef();u.current=l,M.useEffect(()=>{async function f(){try{const p=await xn(Yt(Rt,"timelineEvents")),g=c(p);r({title:{media:{url:"",caption:"",credit:""},text:{headline:"Civil Rights Movement Timeline",text:"Key events from the Civil Rights Movement, identified from interviews from the Library of Congress Civil Rights History Project."}},events:g}),s(!1)}catch(p){console.error("Error fetching timeline data:",p),a("Failed to load timeline events."),s(!1)}}f()},[]),M.useEffect(()=>{if(e&&t.current){t.current.innerHTML="";try{new hA(t.current,e),setTimeout(h,1e3)}catch(f){console.error("Error initializing Timeline.js:",f),a("Failed to initialize timeline.")}}},[e]);const c=f=>f.docs.map(p=>{const g=p.data(),b=new Date(g.date),D=g.keywords?g.keywords.split(",").map(x=>x.trim()):[],P=`
        ${g.description||""}
        <br><br>
        <button 
          class="relevant-interviews-button" 
          data-keywords="${encodeURIComponent(D.join(","))}"
          style="background-color: #2563eb; color: white; padding: 10px 16px; border: none; border-radius: 8px; cursor: pointer; display: flex; align-items: center; font-family: inherit; font-size: 14px; font-weight: 500; transition: background-color 0.2s; box-shadow: 0 1px 3px rgba(0,0,0,0.1);"
          onmouseover="this.style.backgroundColor = '#1d4ed8'"
          onmouseout="this.style.backgroundColor = '#2563eb'"
        >
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" style="width: 20px; height: 20px; margin-right: 8px;">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
          </svg>
          Relevant Interviews
        </button>
      `;return{start_date:{year:b.getFullYear(),month:b.getMonth()+1,day:b.getDate()},text:{headline:g.title,text:P},media:{url:g.mediaUrl||"",caption:g.mediaCaption||"",credit:g.mediaCredit||""}}}),h=()=>{document.querySelectorAll(".relevant-interviews-button").forEach(f=>{f.addEventListener("click",function(p){p.preventDefault(),p.stopPropagation();const g=this.dataset.keywords;g&&u.current(`/playlist-builder?keywords=${g}`)})})};return i?m.jsxs("div",{className:"flex justify-center items-center h-96 bg-gray-50",children:[m.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),m.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):o?m.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg text-center mx-auto my-6 max-w-xl",children:o}):m.jsxs("div",{className:"w-full max-w-7xl mx-auto p-6 bg-gray-50 font-sans",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Civil Rights Timeline"}),m.jsx("p",{className:"text-base leading-relaxed text-gray-600",children:"Explore key events from the Civil Rights Movement, with links to relevant interview recordings."})]}),m.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden p-0 mb-6",children:m.jsx("div",{ref:t,id:"timeline-embed",style:{height:"600px",width:"100%",position:"relative"}})}),m.jsx("div",{className:"bg-indigo-50 rounded-xl p-4 px-6 border-l-4 border-indigo-500",children:m.jsxs("p",{className:"text-sm leading-relaxed text-indigo-800 m-0",children:[m.jsx("strong",{children:"Tip:"}),' Click on any event to see details, and use the "Relevant Interviews" button to find related interview recordings.']})})]})}function Y5(){const[t,e]=M.useState([]),[r,i]=M.useState(!0),[s,o]=M.useState(null),[a,l]=M.useState(""),[u,c]=M.useState(null),[h,f]=M.useState(!1),p=Fr();M.useEffect(()=>{D()},[]),M.useEffect(()=>{u&&f(!0)},[u]);const g=()=>{f(!1)},b=I=>{const y=I==null?void 0:I.match(/embed\/([a-zA-Z0-9_-]+)/);return y?y[1]:null},D=async()=>{try{i(!0);const I=await xn(Yt(Rt,"interviewSummaries")),y=[];I.forEach(w=>{const S=w.data(),L=b(S.videoEmbedLink);y.push({id:w.id,name:S.name||"Unknown Name",role:S.role||"Unknown Role",videoEmbedLink:S.videoEmbedLink,thumbnailUrl:L?`https://img.youtube.com/vi/${L}/hqdefault.jpg`:null})}),e(y),i(!1)}catch(I){console.error("Error fetching people:",I),o("Failed to load interview subjects"),i(!1)}},P=()=>{if(!u)return;const I=t.filter(w=>w.name.toLowerCase().includes(a.toLowerCase())),y=I.findIndex(w=>w.id===u.id);y>0?c(I[y-1]):c(I[I.length-1])},x=()=>{if(!u)return;const I=t.filter(w=>w.name.toLowerCase().includes(a.toLowerCase())),y=I.findIndex(w=>w.id===u.id);y<I.length-1?c(I[y+1]):c(I[0])};M.useEffect(()=>{const I=y=>{h&&(y.key==="ArrowLeft"?P():y.key==="ArrowRight"?x():y.key==="Escape"&&g())};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[h,u,a]);const E=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("polyline",{points:"15 18 9 12 15 6"})}),_=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("polyline",{points:"9 18 15 12 9 6"})}),R=()=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),m.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),j=({person:I,isOpen:y,onClose:w,onPrev:S,onNext:L})=>{if(!y||!I)return null;const N=Y=>{Y.target===Y.currentTarget&&w()};return m.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:[m.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60",onClick:N}),m.jsx("button",{className:"absolute left-4 md:left-8 z-50 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:Y=>{Y.stopPropagation(),S()},"aria-label":"Previous person",children:m.jsx(E,{})}),m.jsx("button",{className:"absolute right-4 md:right-8 z-50 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:Y=>{Y.stopPropagation(),L()},"aria-label":"Next person",children:m.jsx(_,{})}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-md w-full overflow-hidden animate-fadeIn z-50 relative",children:[m.jsxs("div",{className:"relative",children:[I.thumbnailUrl&&m.jsx("div",{className:"w-full h-48 overflow-hidden",children:m.jsx("img",{src:I.thumbnailUrl,alt:I.name,className:"w-full h-full object-cover scale-125"})}),m.jsx("button",{className:"absolute top-2 right-2 bg-black bg-opacity-60 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:w,"aria-label":"Close",children:m.jsx(R,{})})]}),m.jsxs("div",{className:"p-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:I.name}),m.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:I.role}),m.jsx("button",{onClick:()=>p(`/interview-player?documentName=${encodeURIComponent(I.id)}`),className:"w-full bg-blue-600 text-white px-4 py-3 rounded-md hover:bg-blue-700 transition-colors duration-200 font-medium",children:"View Interview"})]})]})]})},V=({person:I})=>{const y=(u==null?void 0:u.id)===I.id;return m.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[m.jsx("div",{}),m.jsx("div",{className:`w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 rounded-md 
                    overflow-hidden shadow-md cursor-pointer transition-all duration-200
                    ${y?"ring-4 ring-blue-500":"hover:ring-2 hover:ring-blue-300"}`,onClick:()=>c(I),style:{touchAction:"manipulation"},children:I.thumbnailUrl?m.jsx("div",{className:"w-full h-full overflow-hidden",children:m.jsx("img",{src:I.thumbnailUrl,alt:I.name,className:"w-full h-full object-cover object-center scale-150",draggable:!1,loading:"lazy"})}):m.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:m.jsx("span",{className:"text-gray-400 text-xs",children:"No photo"})})}),m.jsx("div",{className:"text-center w-full",children:m.jsx("p",{className:`text-xs sm:text-sm truncate max-w-full ${y?"font-bold text-blue-600":"text-gray-700"}`,children:I.name})})]})};if(r)return m.jsx("div",{className:"flex justify-center items-center h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(s)return m.jsx("div",{className:"flex justify-center items-center h-screen",children:m.jsx("div",{className:"text-red-500",children:s})});if(t.length===0)return m.jsx("div",{className:"flex justify-center items-center h-screen",children:m.jsx("div",{className:"text-gray-500",children:"No interview subjects found"})});const C=t.filter(I=>I.name.toLowerCase().includes(a.toLowerCase()));return m.jsxs("div",{className:"container mx-auto px-4 py-8 min-h-screen",children:[m.jsxs("div",{className:"mb-6 max-w-xl mx-auto text-center",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:a?`${C.length} of ${t.length} People`:`${t.length} People`}),m.jsx("input",{type:"text",value:a,onChange:I=>l(I.target.value),placeholder:"Search by name...",className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring focus:border-blue-300"})]}),m.jsx("div",{className:"max-w-6xl mx-auto",children:m.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 gap-x-4 gap-y-6",children:C.map(I=>m.jsx(V,{person:I},I.id))})}),m.jsx(j,{person:u,isOpen:h,onClose:g,onPrev:P,onNext:x})]})}function X5({activeVisualization:t}){return m.jsxs("div",{className:"w-full max-w-5xl mx-auto p-6 bg-white shadow-md rounded-md",children:[t==="keywords"&&m.jsx(J6,{}),t==="map"&&m.jsx(r$,{}),t==="timeline"&&m.jsx(K5,{}),t==="people"&&m.jsx(Y5,{})]})}function Q5(){const[t,e]=M.useState("timeline"),{user:r}=sc(),i=["timeline","keywords","map","people"];return m.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[m.jsx("div",{className:"text-center mb-8",children:m.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text mb-6",children:"Civil Rights History Project"})}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden transition-all duration-300 mb-6",children:[m.jsx("div",{className:"border-b border-gray-200",children:m.jsx("ul",{className:"flex flex-wrap m-0 p-0 list-none",children:i.map(s=>m.jsx("li",{className:"flex-1",children:m.jsx("button",{onClick:()=>e(s),className:`w-full py-4 px-1 text-sm text-center transition-all duration-300 cursor-pointer border-0 ${t===s?"bg-indigo-50 text-blue-800 font-semibold border-b-2 border-blue-600":"bg-transparent text-gray-500 font-normal border-b-0"}`,children:s.charAt(0).toUpperCase()+s.slice(1)})},s))})}),m.jsx("div",{className:"p-6",children:m.jsx(X5,{activeVisualization:t})})]})]})}function J5(){var g,b;const[t,e]=M.useState(""),[r,i]=M.useState(""),[s,o]=M.useState(!1),[a,l]=M.useState(""),{login:u}=sc(),c=Fr(),f=((b=(g=wr().state)==null?void 0:g.from)==null?void 0:b.pathname)||"/",p=async D=>{if(D.preventDefault(),!t||!r){l("Please enter both email and password");return}try{o(!0),l(""),await u(t,r),c(f,{replace:!0})}catch(P){console.error("Login error:",P);let x="Failed to log in";P.code==="auth/invalid-email"?x="Invalid email address":P.code==="auth/user-not-found"?x="No account found with this email":P.code==="auth/wrong-password"?x="Incorrect password":P.code==="auth/too-many-requests"&&(x="Too many failed login attempts. Please try again later"),l(x)}finally{o(!1)}};return m.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6 font-sans",children:[m.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-4",children:"Sign in to your account"}),m.jsx("p",{className:"text-sm text-center text-gray-500 mt-2",children:"Enter your credentials to access your account"})]}),a&&m.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mb-6 rounded",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-red-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm text-red-700",children:a})})]})}),m.jsxs("form",{className:"mt-6",onSubmit:p,children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),m.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:D=>e(D.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"you@example.com"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),m.jsx("a",{href:"#",className:"text-xs text-blue-600 hover:text-blue-700 transition-colors",children:"Forgot password?"})]}),m.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:r,onChange:D=>i(D.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:""})]}),m.jsx("div",{className:"mt-8",children:m.jsx("button",{type:"submit",disabled:s,className:`w-full flex justify-center items-center py-3 px-4 relative bg-blue-600 text-white text-sm font-medium border-0 rounded-lg shadow-sm transition-colors ${s?"opacity-70 cursor-not-allowed":"hover:bg-blue-700 cursor-pointer"}`,children:s?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"absolute left-6 flex items-center",children:m.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),m.jsx("span",{children:"Signing in..."})]}):m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"absolute left-6 flex items-center",children:m.jsx("svg",{className:"h-5 w-5 text-blue-200",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),m.jsx("span",{children:"Sign in"})]})})}),m.jsx("div",{className:"mt-6 text-center",children:m.jsxs("p",{className:"text-sm text-gray-500",children:["Don't have an account?"," ",m.jsx("a",{href:"#",className:"text-blue-600 font-medium hover:text-blue-700 transition-colors",children:"Sign up"})]})})]})]}),m.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})}function vv(t){return t?t.split(",").map(e=>e.trim().toLowerCase()).filter(e=>e.length>0):[]}function pa(t){if(!t)return null;const e=t.match(/embed\/([a-zA-Z0-9_-]+)/);return e?e[1]:null}function bE(t){if(!t)return 0;const e=t.split(":").map(Number);return e.length===2?e[0]*60+e[1]:e.length===3?e[0]*3600+e[1]*60+e[2]:0}function Cl(t){if(t==null)return"0:00";const e=Math.floor(t/3600),r=Math.floor(t%3600/60),i=Math.floor(t%60);return e>0?`${e}:${r.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`:`${r}:${i.toString().padStart(2,"0")}`}function eo(t){if(!t)return{startSeconds:0,endSeconds:0};const e=t.split("-").map(s=>s.trim());if(e.length!==2)return{startSeconds:0,endSeconds:0};const r=bE(e[0]),i=bE(e[1]);return{startSeconds:r,endSeconds:i}}const Z5=({videoQueue:t,currentVideoIndex:e,setCurrentVideoIndex:r,currentTime:i,totalDuration:s,onSeek:o})=>{const a=M.useRef(null),l=M.useRef(null),[u,c]=M.useState(0),[h,f]=M.useState(0),[p,g]=M.useState(null),[b,D]=M.useState(null),P=M.useRef(null);M.useEffect(()=>{let j=0;for(let C=0;C<e;C++)if(t[C]){const{startSeconds:I,endSeconds:y}=eo(t[C].timestamp);j+=y-I||300}const V=Math.max(0,i);if(j+=V,f(j),s&&s>0){const C=j/s*100;c(Math.min(Math.max(0,C),100))}},[t,e,i,s]);const x=t.map((j,V)=>{const{startSeconds:C,endSeconds:I}=eo(j.timestamp),y=I-C||300,w=y/s*100,S=pa(j.videoEmbedLink);return{id:V,width:w,duration:y,isActive:V===e,videoId:S,name:j.name||"Untitled"}}),E=(j,V)=>{if(V!==e){r(V);return}const C=P.current;if(!C)return;const I=C.getBoundingClientRect(),w=(j.clientX-I.left)/I.width,S=x[e];if(!S)return;const L=w*S.duration;o&&o(L)},_=j=>{if(p!==e)return;const V=P.current;if(!V)return;const C=V.getBoundingClientRect(),y=(j.clientX-C.left)/C.width;D(y)},R=()=>{D(null)};return m.jsxs("div",{children:[m.jsx("div",{ref:a,style:{position:"relative",width:"100%",backgroundColor:"#e5e7eb",marginBottom:"10px",borderRadius:"8px",overflow:"hidden",padding:"10px",boxSizing:"border-box",border:"1px solid #d1d5db",display:"flex"},children:x.map(j=>m.jsxs("div",{onClick:V=>E(V,j.id),onMouseEnter:()=>g(j.id),onMouseLeave:()=>{g(null),R()},onMouseMove:j.isActive?_:null,style:{width:`${j.width}%`,minWidth:"60px",padding:"0 2px",boxSizing:"border-box",position:"relative",cursor:"pointer"},ref:j.isActive?P:null,children:[m.jsxs("div",{style:{position:"relative",overflow:"hidden",borderRadius:"6px",border:`2px solid ${j.isActive?"#3b82f6":"#d1d5db"}`,height:"70px",boxShadow:j.isActive?"0 2px 5px rgba(0,0,0,0.2)":"none"},children:[m.jsx("img",{src:`https://img.youtube.com/vi/${j.videoId}/mqdefault.jpg`,alt:`Thumbnail for segment ${j.id+1}`,style:{width:"100%",maxHeight:"80px",objectFit:"contain",borderRadius:"6px"},onError:V=>{V.target.src="https://via.placeholder.com/120x60?text=No+Thumbnail"}}),j.isActive&&m.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${i/j.duration*100}%`,backgroundColor:"rgba(59, 130, 246, 0.4)",transition:"width 0.2s linear"}}),j.isActive&&b!==null&&m.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${b*100}%`,backgroundColor:"rgba(239, 68, 68, 0.4)",pointerEvents:"none",zIndex:5}}),j.isActive&&b!==null&&m.jsx("div",{style:{position:"absolute",top:"5px",left:`${b*100}%`,transform:"translateX(-50%)",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",zIndex:6,pointerEvents:"none"},children:Cl(b*j.duration)}),m.jsx("div",{style:{position:"absolute",bottom:"0",left:"0",right:"0",backgroundColor:"rgba(0,0,0,0.6)",color:"white",fontSize:"11px",textAlign:"center",padding:"2px 0"},children:Cl(j.duration)})]}),p===j.id&&m.jsxs("div",{style:{position:"absolute",top:"-30px",left:"50%",transform:"translateX(-50%)",backgroundColor:"#1f2937",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",zIndex:50,whiteSpace:"nowrap"},children:[j.name," (",Cl(j.duration),")"]})]},`thumb-${j.id}`))}),m.jsxs("div",{style:{position:"relative",width:"100%",height:"8px",backgroundColor:"#d1d5db",borderRadius:"4px",overflow:"hidden",marginBottom:"10px",cursor:"pointer"},onClick:j=>{const V=j.currentTarget.getBoundingClientRect(),I=(j.clientX-V.left)/V.width;let y=0,w=0,S=0;for(let L=0;L<x.length;L++){const N=x[L].width/100;if(I>=y&&I<=y+N){w=L,S=(I-y)/N*x[L].duration;break}y+=N}w!==e&&r(w),o&&w===e&&o(S)},children:[x.map(j=>m.jsx("div",{style:{width:`${j.width}%`,height:"100%",backgroundColor:"transparent",borderRight:j.id<x.length-1?"1px solid #c4c4c4":"none",position:"relative",zIndex:2}},`bar-${j.id}`)),m.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${u}%`,backgroundColor:"#3b82f6",transition:"width 0.2s linear",zIndex:1}}),m.jsx("div",{ref:l,style:{position:"absolute",top:"-3px",left:`${u}%`,transform:"translateX(-50%)",width:"4px",height:"14px",backgroundColor:"red",borderRadius:"2px",zIndex:10,transition:"left 0.1s linear"},children:m.jsx("div",{style:{position:"absolute",top:"-4px",left:"50%",transform:"translate(-50%, -50%)",width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"red"}})})]}),m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 10px",backgroundColor:"#f3f4f6",borderRadius:"4px",fontSize:"12px",marginBottom:"10px"},children:[m.jsx("div",{children:Cl(h)}),m.jsxs("div",{style:{fontWeight:"bold"},children:[u.toFixed(1),"%"]}),m.jsx("div",{children:Cl(s)})]})]})},fA=({onPrevious:t,onPlay:e,onPause:r,onNext:i,isPlaying:s,hasPrevious:o,hasNext:a})=>m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"24px",padding:"12px",backgroundColor:"#f3f4f6",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",margin:"20px auto",border:"2px solid #d1d5db",maxWidth:"320px"},children:[m.jsx("button",{onClick:t,disabled:!o,style:{padding:"12px",borderRadius:"9999px",backgroundColor:o?"#3b82f6":"#9ca3af",color:"white",border:"none",cursor:o?"pointer":"not-allowed",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),m.jsx("button",{onClick:s?r:e,style:{padding:"16px",borderRadius:"9999px",backgroundColor:"#3b82f6",color:"white",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:s?m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6"})}):m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})}),m.jsx("button",{onClick:i,disabled:!a,style:{padding:"12px",borderRadius:"9999px",backgroundColor:a?"#3b82f6":"#9ca3af",color:"white",border:"none",cursor:a?"pointer":"not-allowed",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),ez=({nextKeyword:t,thumbnailUrl:e,onPlay:r})=>m.jsxs("div",{style:{width:"240px",backgroundColor:"#f3f4f6",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",border:"2px solid #d1d5db",overflow:"hidden"},children:[m.jsx("div",{className:"relative",children:m.jsxs("div",{style:{width:"100%",height:"120px",backgroundImage:e?`url(${e})`:"none",backgroundColor:e?"transparent":"#e5e7eb",backgroundSize:"cover",backgroundPosition:"center"},children:[!e&&m.jsx("div",{className:"flex items-center justify-center h-full",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"text-gray-400",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsx("button",{onClick:r,style:{padding:"12px",borderRadius:"9999px",backgroundColor:"#3b82f6",color:"white",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})})})]})}),m.jsxs("div",{style:{padding:"12px"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[m.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",color:"#374151",margin:0},children:"Up Next"}),m.jsx("span",{style:{backgroundColor:"#dbeafe",color:"#1e40af",fontSize:"12px",fontWeight:"500",padding:"2px 8px",borderRadius:"4px"},children:t})]}),m.jsx("p",{style:{fontSize:"12px",color:"#6b7280",margin:0},children:"Plays automatically when current playlist ends"})]})]}),tz=({onClick:t})=>m.jsx("button",{onClick:t,className:"flex items-center justify-center p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 focus:outline-none transition-colors duration-200",title:"Shuffle and get new clips",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{d:"M8 5a1 1 0 100 2h5.586l-1.293 1.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L13.586 5H8zM12 15a1 1 0 100-2H6.414l1.293-1.293a1 1 0 10-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L6.414 15H12z"})})}),nz=({isOpen:t,onConfirm:e,onCancel:r,message:i})=>t?m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm mx-auto",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Confirmation"}),m.jsx("p",{className:"text-sm text-gray-600 mb-4",children:i}),m.jsxs("div",{className:"flex justify-end space-x-3",children:[m.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),m.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Confirm"})]})]})}):null,rz=({metadata:t,onMetadataUpdate:e})=>{const[r,i]=M.useState(!1),[s,o]=M.useState(!1),[a,l]=M.useState({}),[u,c]=M.useState(!1),[h,f]=M.useState(null),[p,g]=M.useState(!1);if(!t)return null;const b=()=>{l({...t}),o(!0),f(null),g(!1)},D=(C,I)=>{l(y=>({...y,[C]:I}))},P=async()=>{try{c(!0),f(null);let C;if(t.documentName&&t.id)C=Pa(Rt,"interviewSummaries",t.documentName,"subSummaries",t.id);else{console.error("Unable to determine document path"),f("Unable to determine document path for saving"),c(!1);return}const I={...a};delete I.id,delete I.documentName,await tv(C,I),e&&e(a),g(!0),c(!1),setTimeout(()=>{o(!1),g(!1)},1500)}catch(C){console.error("Error updating document:",C),f(`Error saving changes: ${C.message}`),c(!1)}},x=()=>{o(!1),l({}),f(null),g(!1)},E=["summary"],_=Object.keys(t).filter(C=>!E.includes(C)&&t[C]!==void 0),R=["id","documentName","createdAt","updatedAt"],j=C=>!R.includes(C),V=(C,I)=>{const y=j(C);return typeof I=="boolean"?m.jsxs("select",{disabled:!y,value:a[C].toString(),onChange:w=>D(C,w.target.value==="true"),className:`w-full px-2 py-1 text-sm border rounded ${y?"border-blue-300":"bg-gray-100"}`,children:[m.jsx("option",{value:"true",children:"True"}),m.jsx("option",{value:"false",children:"False"})]}):typeof I=="number"?m.jsx("input",{type:"number",disabled:!y,value:a[C],onChange:w=>D(C,Number(w.target.value)),className:`w-full px-2 py-1 text-sm border rounded ${y?"border-blue-300":"bg-gray-100"}`}):typeof I=="object"?m.jsx("textarea",{disabled:!0,value:JSON.stringify(I,null,2),className:"w-full px-2 py-1 text-sm border rounded bg-gray-100",rows:3}):m.jsx("input",{type:"text",disabled:!y,value:a[C]||"",onChange:w=>D(C,w.target.value),className:`w-full px-2 py-1 text-sm border rounded ${y?"border-blue-300":"bg-gray-100"}`})};return m.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6 border border-gray-100",children:[m.jsxs("div",{className:"flex justify-between items-center mb-3",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Clip Metadata"}),m.jsx("div",{className:"flex space-x-2",children:s?m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:P,disabled:u,className:"px-3 py-1 bg-blue-600 text-white text-sm font-medium rounded hover:bg-blue-700 transition-colors disabled:bg-blue-300",children:u?"Saving...":"Save"}),m.jsx("button",{onClick:x,disabled:u,className:"px-3 py-1 bg-gray-200 text-gray-800 text-sm font-medium rounded hover:bg-gray-300 transition-colors disabled:bg-gray-100",children:"Cancel"})]}):m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:b,className:"px-3 py-1 bg-gray-100 text-blue-600 hover:bg-gray-200 text-sm font-medium rounded transition-colors",children:"Edit"}),m.jsx("button",{onClick:()=>i(!r),className:"px-3 py-1 text-blue-600 hover:text-blue-800 text-sm font-medium",children:r?"Show Less":"Show All"})]})})]}),p&&m.jsx("div",{className:"mb-3 p-2 bg-green-100 text-green-800 text-sm rounded",children:"Changes saved successfully"}),h&&m.jsx("div",{className:"mb-3 p-2 bg-red-100 text-red-800 text-sm rounded",children:h}),m.jsx("div",{className:"grid grid-cols-2 gap-4",children:["id","documentName","timestamp","keywords"].map(C=>t[C]&&m.jsxs("div",{className:"mb-2",children:[m.jsxs("span",{className:"block text-sm font-medium text-gray-500",children:[C,":"]}),s?V(C,t[C]):m.jsx("span",{className:"block text-sm text-gray-800 break-words",children:typeof t[C]=="object"?JSON.stringify(t[C]):String(t[C])})]},C))}),r&&m.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:m.jsx("div",{className:"grid grid-cols-2 gap-4",children:_.filter(C=>!["id","documentName","timestamp","keywords"].includes(C)).map(C=>m.jsxs("div",{className:"mb-2",children:[m.jsxs("span",{className:"block text-sm font-medium text-gray-500",children:[C,":"]}),s?V(C,t[C]):m.jsx("span",{className:"block text-sm text-gray-800 break-words",children:typeof t[C]=="object"?JSON.stringify(t[C]):String(t[C])})]},C))})})]})},iz=({currentKeyword:t,excludeIds:e=[],onAddToPlaylist:r})=>{const[i,s]=M.useState([]),[o,a]=M.useState(!0),[l,u]=M.useState(null);M.useEffect(()=>{t&&c(t)},[t,e.toString()]);const c=async p=>{try{a(!0);const g=vv(p);if(g.length===0){s([]),a(!1);return}const b=await xn(Yt(Rt,"interviewSummaries")),D=[];for(const E of b.docs){const _=E.id,R=E.data(),j=R.videoEmbedLink,V=h(j),C=Yt(Rt,"interviewSummaries",_,"subSummaries");(await xn(C)).forEach(y=>{const w=y.data(),S=(w.keywords||"").split(",").map(N=>N.trim().toLowerCase());g.some(N=>S.includes(N))&&!e.includes(y.id)&&D.push({id:y.id,documentId:`${_}_${y.id}`,documentName:_,...w,...R,thumbnailUrl:V,_debug_parentVideoEmbedLink:j})})}const P=D.filter(E=>E.thumbnailUrl).length;console.log(`Found thumbnails for ${P} out of ${D.length} clips`);const x=Array.from(new Map(D.map(E=>[`${E.id}_${E.documentName}`,E])).values());s(x),a(!1)}catch(g){console.error("Error fetching related clips:",g),u("Error loading related clips"),a(!1)}},h=p=>{if(!p)return null;try{let g=pa(p);if(!g){if(p.includes("youtube.com/watch"))g=new URL(p).searchParams.get("v");else if(p.includes("youtube.com/embed/")){const b=p.split("youtube.com/embed/");b.length>1&&(g=b[1].split("?")[0])}else if(p.includes("youtu.be/")){const b=p.split("youtu.be/");b.length>1&&(g=b[1].split("?")[0])}else if(p.includes("<iframe")&&p.includes("src=")){const b=p.match(/src=["'](.*?)["']/);if(b&&b[1])return h(b[1])}}if(g)return`https://img.youtube.com/vi/${g}/mqdefault.jpg`;console.log("Could not extract video ID from:",p)}catch(g){console.error("Error extracting video ID for thumbnail:",g,"from link:",p)}return null},f=p=>{r&&r(p)};return o?m.jsx("div",{className:"py-4",children:m.jsx("div",{className:"flex justify-center items-center",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})})}):l?m.jsx("div",{className:"p-4 bg-red-50 text-red-700 rounded-md",children:l}):i.length===0?null:m.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-sm p-6",children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Related Clips"}),m.jsx("div",{className:"overflow-x-auto pb-4",children:m.jsx("div",{className:"flex space-x-4",style:{minWidth:"min-content"},children:i.map((p,g)=>m.jsxs("div",{className:"flex-shrink-0 w-64 bg-gray-50 rounded-md overflow-hidden shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>f(p),children:[p.thumbnailUrl?m.jsxs("div",{className:"relative pb-[56.25%] bg-gray-200",children:[m.jsx("img",{src:p.thumbnailUrl,alt:p.name||"Video thumbnail",className:"absolute top-0 left-0 w-full h-full object-cover",onError:b=>{console.log("Thumbnail failed to load:",p.thumbnailUrl),b.target.onerror=null,b.target.style.display="none",b.target.parentElement.innerHTML=`
                        <div class="absolute top-0 left-0 w-full h-full flex items-center justify-center bg-gray-200">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                          </svg>
                        </div>
                      `}}),m.jsx("div",{className:"absolute inset-0 flex items-center justify-center hover:bg-black hover:bg-opacity-30 transition-all",children:m.jsx("span",{className:"text-white font-medium rounded-full p-2 bg-blue-600 opacity-0 hover:opacity-100 transition-opacity",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})})]}):m.jsxs("div",{className:"h-36 bg-gray-200 flex flex-col items-center justify-center",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),m.jsx("span",{className:"text-gray-500 text-sm",children:"Video Preview"})]}),m.jsxs("div",{className:"p-3",children:[m.jsx("h4",{className:"font-medium text-gray-900 line-clamp-1",title:p.name,children:p.name||"Unnamed clip"}),m.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-1",title:p.topic||"",children:p.topic||"No topic"}),p.timestamp&&m.jsx("p",{className:"text-xs text-gray-400 mt-1",children:p.timestamp}),m.jsx("button",{className:"mt-2 w-full py-1 px-2 bg-blue-50 text-blue-600 text-sm font-medium rounded hover:bg-blue-100 transition-colors",children:"Add to Playlist"})]})]},`${p.documentId||`${p.id}_${p.documentName}`}_${g}`))})})]})},sz=({video:t,onVideoEnd:e,onPlay:r,onPause:i,onTimeUpdate:s,isPlaying:o,seekToTime:a})=>{const l=M.useRef(null),u=M.useRef(null),c=M.useRef(null),[h,f]=M.useState(!1),[p,g]=M.useState(null),b=M.useRef(null),D=()=>{if(!t)return{startSeconds:0,endSeconds:0};try{const{startSeconds:P,endSeconds:x}=eo(t.timestamp),E=Number.isFinite(P)?Math.max(0,P):0,_=Number.isFinite(x)&&x>E?x:E+300;return console.log(`Video boundaries: ${E}s to ${_}s (duration: ${_-E}s)`),{startSeconds:E,endSeconds:_}}catch(P){return console.error("Error parsing timestamp:",P,"Using defaults"),{startSeconds:0,endSeconds:300}}};return M.useEffect(()=>{if(!t||!u.current)return;const P=pa(t.videoEmbedLink);if(!P){console.error("Invalid video embed link:",t.videoEmbedLink);return}const{startSeconds:x}=D(),E=()=>{l.current&&l.current.destroy();try{l.current=new window.YT.Player(u.current,{height:"405",width:"720",videoId:P,playerVars:{autoplay:1,controls:0,rel:0,modestbranding:1,start:x,enablejsapi:1},events:{onReady:_=>{console.log("YouTube Player Ready");const R=_.target.getDuration();if(console.log(`Video actual duration: ${R}s`),x>=R&&(console.error(`Invalid timestamp: start time (${x}s) is beyond video duration (${R}s)`),_.target.seekTo(0,!0),t&&t.id&&e)){console.warn(`Skipping invalid clip with ID: ${t.id}`),setTimeout(()=>{e()},500);return}s&&s(0),f(!0),_.target.seekTo(Math.min(x,R-1),!0),o?_.target.playVideo():_.target.pauseVideo()},onStateChange:_=>{const R=_.data;if(g(R),R===window.YT.PlayerState.PLAYING){if(s){const j=_.target.getCurrentTime();Math.max(0,j-x)<1&&s(0)}r&&r()}else R===window.YT.PlayerState.PAUSED?i&&i():R===window.YT.PlayerState.ENDED&&e&&e()},onError:_=>{console.error("YouTube player error:",_.data),e&&(console.warn("Video error detected, skipping to next clip"),setTimeout(()=>{e()},500))}}})}catch(_){console.error("Error creating YouTube player:",_)}};if(window.YT&&window.YT.Player)E();else{const _=document.createElement("script");_.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=E;const R=document.getElementsByTagName("script")[0];R.parentNode.insertBefore(_,R)}return()=>{l.current&&(l.current.destroy(),l.current=null),f(!1)}},[t]),M.useEffect(()=>{if(!(!h||!l.current))try{o?l.current.playVideo():l.current.pauseVideo()}catch(P){console.error("Error controlling player:",P)}},[o,h]),M.useEffect(()=>{if(!(!h||!l.current||a===void 0||a===null)&&b.current!==a)try{const{startSeconds:P}=D(),x=P+a;console.log(`Seeking to ${a}s within clip (absolute: ${x}s)`),l.current.seekTo(x,!0),b.current=a}catch(P){console.error("Error seeking:",P)}},[a,h]),M.useEffect(()=>{if(!h||!l.current)return;const{startSeconds:P,endSeconds:x}=D(),E=x-P;return(()=>{try{if(l.current&&l.current.getCurrentTime){const R=l.current.getCurrentTime(),j=Math.max(0,R-P);s&&j>=0&&s(j)}}catch(R){console.error("Error syncing time immediately:",R)}})(),c.current&&(clearInterval(c.current),c.current=null),o&&(c.current=setInterval(()=>{try{if(!l.current||!l.current.getCurrentTime)return;const R=l.current.getCurrentTime(),j=Math.max(0,R-P);if(l.current.getPlayerState()!==window.YT.PlayerState.PLAYING)return;s&&s(j),j>=E-.5&&(console.log(`Reached end of clip: ${j}s / ${E}s`),e&&(clearInterval(c.current),c.current=null,e()))}catch(R){console.error("Error in time tracking:",R)}},250)),()=>{c.current&&(clearInterval(c.current),c.current=null)}},[o,h,t]),m.jsxs("div",{className:"video-player-wrapper relative",children:[m.jsx("div",{ref:u,className:"rounded-lg shadow-lg bg-black w-full aspect-video"}),!h&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})})]})},oz=()=>{const[t]=Cy(),e=Fr(),[r,i]=M.useState(""),[s,o]=M.useState([]),[a,l]=M.useState(0),[u,c]=M.useState(!0),[h,f]=M.useState(null),[p,g]=M.useState(!0),[b,D]=M.useState(0),[P,x]=M.useState(0),[E,_]=M.useState(0),[R,j]=M.useState(!1),[V,C]=M.useState(null),[I,y]=M.useState(!1),w=M.useRef(null),[S,L]=M.useState(0),[N,Y]=M.useState([]),[Z,ae]=M.useState({}),[he,q]=M.useState(""),[G,ie]=M.useState(""),[ne,W]=M.useState(!1),$=M.useRef(null);M.useEffect(()=>{if(s.length>0){const me=s.reduce((ke,be)=>{const{startSeconds:Oe,endSeconds:Re}=eo(be.timestamp);return ke+(Re-Oe||300)},0);console.log("Calculated total duration:",me),_(me)}},[s]),M.useEffect(()=>{const me=t.get("keywords");me&&(console.log(`Found keyword: ${me}`),i(me))},[t]),M.useEffect(()=>{r&&(console.log(`Searching videos for: ${r}`),re())},[r]),M.useEffect(()=>{r&&Z[r]?L(Z[r]):r&&Q(r)},[r,Z]);const Q=async me=>{if(me)try{let ke=0;const be=await xn(Yt(Rt,"interviewSummaries"));for(const Oe of be.docs){const Re=Oe.id,Ge=Yt(Rt,"interviewSummaries",Re,"subSummaries");(await xn(Ge)).forEach(br=>{(br.data().keywords||"").split(",").map(Ht=>Ht.trim().toLowerCase()).includes(me.toLowerCase())&&ke++})}console.log(`Total clips for keyword "${me}": ${ke}`),L(ke),ae(Oe=>({...Oe,[me]:ke}))}catch(ke){console.error("Error counting clips:",ke)}};M.useEffect(()=>()=>{w.current&&clearTimeout(w.current)},[]);const X=me=>{if(s.some(be=>be.id===me.id)){console.log("Clip is already in the playlist:",me.id),y({message:"This clip is already in your playlist",type:"info"}),w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{y(!1)},3e3);return}o(be=>[...be,me]),y({message:"Clip added to playlist",type:"success"}),w.current&&clearTimeout(w.current),w.current=setTimeout(()=>{y(!1)},3e3),console.log("Added clip to playlist:",me.id)};M.useEffect(()=>{Le()},[]),M.useEffect(()=>{N.length>0&&r&&ee()},[N,r,Z]),M.useEffect(()=>(ne&&he&&($.current&&clearTimeout($.current),$.current=setTimeout(()=>{console.log(`Navigating to next playlist: ${he}`),e(`?keywords=${encodeURIComponent(he)}`),W(!1)},3e3)),()=>{$.current&&clearTimeout($.current)}),[ne,he,e]),M.useEffect(()=>{s.length>0&&(D(0),C(null),console.log("Video index changed to:",a))},[a]);const ce=()=>{if(!s.length)return 0;let me=0;for(let ke=0;ke<a;ke++){const{startSeconds:be,endSeconds:Oe}=eo(s[ke].timestamp);me+=Oe-be||300}return me},ye=me=>{D(me),x(ce()+me)},Fe=me=>{console.log(`Seeking to ${me}s within current video`),C(me)},Le=async()=>{try{const me={},ke=await xn(Yt(Rt,"interviewSummaries"));for(const Oe of ke.docs){const Re=Oe.id,Ge=Yt(Rt,"interviewSummaries",Re,"subSummaries");(await xn(Ge)).forEach(br=>{(br.data().keywords||"").split(",").map(Ht=>Ht.trim().toLowerCase()).forEach(Ht=>{Ht&&(me[Ht]=(me[Ht]||0)+1)})})}const be=Object.keys(me).filter(Oe=>me[Oe]>1);console.log(`Found ${be.length} keywords with multiple clips out of ${Object.keys(me).length} total keywords`),Y(be),ae(me)}catch(me){console.error("Error fetching available keywords:",me)}},ee=()=>{if(N.length===0)return;const me=N.filter(Oe=>Oe!==r);if(me.length===0)return;const ke=Math.floor(Math.random()*me.length),be=me[ke];console.log(`Selected next keyword: ${be} with ${Z[be]||"?"} clips`),q(be),le(be)},le=async me=>{try{const ke=vv(me);if(ke.length===0)return;const be=await pe(ke);if(be.length>0){const Oe=be[0];if(Oe.videoEmbedLink){const Re=pa(Oe.videoEmbedLink);if(Re){const Ge=`https://img.youtube.com/vi/${Re}/mqdefault.jpg`;ie(Ge);return}}}ie("")}catch(ke){console.error("Error fetching thumbnail:",ke),ie("")}},we=()=>{he&&e(`?keywords=${encodeURIComponent(he)}`)},je=()=>{j(!0)},Be=()=>{j(!1),re()},nt=()=>{j(!1)},A=me=>{o(ke=>{const be=[...ke];return be[a]={...be[a],...me},be})},F=me=>me.sort(()=>Math.random()-.5),U=async me=>new Promise(ke=>{try{const be=document.createElement("div");be.style.position="absolute",be.style.left="-9999px",be.style.top="-9999px",document.body.appendChild(be);const Oe=new window.YT.Player(be,{height:"1",width:"1",videoId:me,events:{onReady:Re=>{try{const Ge=Re.target.getDuration();console.log(`Got duration for video ${me}: ${Ge}s`),ke(Ge)}catch(Ge){console.error(`Error getting duration for ${me}:`,Ge),ke(0)}finally{if(Oe)try{Oe.destroy()}catch(Ge){console.error("Error destroying temp player:",Ge)}be.parentNode&&document.body.removeChild(be)}},onError:()=>{console.error(`Could not load video ${me} for duration check`),be.parentNode&&document.body.removeChild(be),ke(0)}}});setTimeout(()=>{if(Oe)try{Oe.destroy()}catch(Re){console.error("Error destroying temp player on timeout:",Re)}be.parentNode&&document.body.removeChild(be),ke(0)},1e4)}catch(be){console.error("Error in duration check:",be),ke(0)}}),H=async me=>{try{const ke=pa(me.videoEmbedLink);if(!ke)return!1;const{startSeconds:be}=eo(me.timestamp);if(isNaN(be)||be<0)return!1;if(!window.YT||!window.YT.Player)return console.warn("YouTube API not loaded yet, can't validate duration"),!0;const Oe=await U(ke),Re=Oe>0&&be<Oe-5;return Re||console.warn(`Invalid timestamp detected: ${me.timestamp} exceeds video duration ${Oe}s for video ID ${ke}`),Re}catch(ke){return console.error("Error validating video timestamp:",ke),!1}},re=async()=>{try{c(!0);const me=vv(r);if(me.length===0){f("Please enter at least one keyword"),c(!1);return}let ke=await pe(me);if(ke.length>0){ke=ke.filter(Re=>{try{const{startSeconds:Ge,endSeconds:hn}=eo(Re.timestamp);return isNaN(Ge)||Ge<0?(console.warn(`Filtering out video with invalid start time: ${Re.id}, ${Re.timestamp}`),!1):hn&&hn<=Ge?(console.warn(`Filtering out video with invalid time range: ${Re.id}, ${Re.timestamp}`),!1):!0}catch{return console.warn(`Filtering out video with unparseable timestamp: ${Re.id}, ${Re.timestamp}`),!1}});const be=F(ke).slice(0,Math.min(10,ke.length));console.log(`Checking durations for ${be.length} candidate videos...`),(!window.YT||!window.YT.Player)&&(console.log("Loading YouTube API..."),await new Promise(Re=>{const Ge=document.createElement("script");Ge.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=()=>{console.log("YouTube API ready"),Re()};const hn=document.getElementsByTagName("script")[0];hn.parentNode.insertBefore(Ge,hn),setTimeout(Re,5e3)}));const Oe=[];for(const Re of be){if(Oe.length>=3)break;await H(Re)&&Oe.push(Re)}Oe.length>0?(console.log(`Selected ${Oe.length} valid videos from ${be.length} candidates`),o(Oe),l(0),g(!0),D(0),x(0),W(!1)):f("No videos with valid timestamps found for this keyword")}else f("No videos found for this keyword");c(!1)}catch(me){console.error("Error searching videos:",me),f("Error searching videos"),c(!1)}},pe=async me=>{const ke=await xn(Yt(Rt,"interviewSummaries")),be=[];for(const Oe of ke.docs){const Re=Oe.id,Ge=Oe.data(),hn=Ge.videoEmbedLink,br=hn?`https://img.youtube.com/vi/${pa(hn)}/mqdefault.jpg`:null,li=Yt(Rt,"interviewSummaries",Re,"subSummaries");(await xn(li)).forEach(Ht=>{const $r=Ht.data(),xr=($r.keywords||"").split(",").map(qn=>qn.trim().toLowerCase());me.some(qn=>xr.includes(qn))&&be.push({id:Ht.id,documentName:Re,...$r,...Ge,thumbnailUrl:br})})}return be},Pe=()=>{a<s.length-1&&(l(a+1),g(!0))},$e=()=>{a>0&&(l(a-1),g(!0))},et=()=>{console.log(`Video end triggered for index ${a}/${s.length-1}`),setTimeout(()=>{a<s.length-1?(console.log(`Advancing to next video: ${a+1}`),l(a+1)):(console.log("Playlist ended, preparing to play next keyword"),W(!0))},500)},rt=()=>{g(!0)},Me=()=>{g(!1)},ft=()=>!s.length||a>=s.length?null:s[a];if(u)return m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(h)return m.jsx("div",{className:"max-w-7xl mx-auto p-4",children:m.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:m.jsx("p",{children:h})})});const Vt=ft(),ai=s.length>0;return m.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[I&&m.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-3 rounded-md shadow-md transition-all duration-300 ${I.type==="success"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:m.jsxs("div",{className:"flex items-center",children:[I.type==="success"?m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2h-1V9z",clipRule:"evenodd"})}),m.jsx("span",{children:I.message})]})}),m.jsxs("div",{className:"mb-6",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:r}),m.jsx("div",{className:"flex items-center space-x-4",children:m.jsxs("div",{className:"flex items-center",children:[m.jsxs("span",{className:"text-blue-800 font-medium",children:[S," total clip",S!==1?"s":""," available"]}),m.jsx("span",{className:"mx-2 text-gray-400",children:""}),m.jsxs("span",{className:"text-gray-600",children:[s.length," clip",s.length!==1?"s":""," in current playlist"]})]})})]}),m.jsxs("div",{className:"relative",children:[he&&m.jsx("div",{className:"absolute top-0 right-0 z-10",children:m.jsx(ez,{nextKeyword:he,thumbnailUrl:G,onPlay:we})}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[m.jsx("div",{className:"w-full max-w-2xl mx-auto relative rounded-lg overflow-hidden",children:Vt?m.jsx(sz,{video:Vt,onVideoEnd:et,onPlay:rt,onPause:Me,onTimeUpdate:ye,isPlaying:p,seekToTime:V}):m.jsx("div",{className:"flex items-center justify-center w-full h-64 bg-gray-200 rounded-lg text-gray-600 font-medium",children:"No videos available"})}),ai&&m.jsx("div",{className:"mt-6 mb-4 w-full max-w-2xl mx-auto",children:m.jsx(Z5,{videoQueue:s,currentVideoIndex:a,setCurrentVideoIndex:l,currentTime:b,totalDuration:E,onSeek:Fe})}),m.jsxs("div",{className:"w-full max-w-2xl mx-auto flex justify-center items-center py-3 mt-5",children:[m.jsx(fA,{onPrevious:$e,onPlay:rt,onPause:Me,onNext:Pe,isPlaying:p,hasPrevious:a>0,hasNext:a<s.length-1}),m.jsx("div",{className:"ml-4",children:m.jsx(tz,{onClick:je})})]})]}),Vt&&m.jsx(rz,{metadata:Vt,onMetadataUpdate:A}),Vt&&m.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:m.jsx("span",{onClick:()=>e(`/interview-player?documentName=${encodeURIComponent(Vt.documentName)}`),className:"hover:text-blue-600 hover:underline transition-colors cursor-pointer",children:Vt.name})}),m.jsx("p",{className:"text-sm italic text-gray-500 mb-4",children:Vt.role}),m.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:m.jsx("p",{className:"m-0 text-base leading-relaxed text-gray-700",children:Vt.summary})})]})]}),r&&s.length>0&&m.jsx(iz,{currentKeyword:r,excludeIds:s.map(me=>me.id),onAddToPlaylist:X}),m.jsx(nz,{isOpen:R,onConfirm:Be,onCancel:nt,message:"Are you sure you want to hear a new set of clips on this topic?"})]})};function yv(t,e){return yv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},yv(t,e)}function pA(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,yv(t,e)}function Ie(){return Ie=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ie.apply(null,arguments)}function Ou(t){"@babel/helpers - typeof";return Ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ou(t)}function az(t,e){if(Ou(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(Ou(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lz(t){var e=az(t,"string");return Ou(e)=="symbol"?e:e+""}function uz(t,e,r){return(e=lz(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function EE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xE(Object(r),!0).forEach(function(i){uz(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xE(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function jn(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var TE=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),SE=function(){return Math.random().toString(36).substring(7).split("").join(".")},IE={INIT:"@@redux/INIT"+SE(),REPLACE:"@@redux/REPLACE"+SE()};function cz(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function mA(t,e,r){var i;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(jn(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(jn(1));return r(mA)(t,e)}if(typeof t!="function")throw new Error(jn(2));var s=t,o=e,a=[],l=a,u=!1;function c(){l===a&&(l=a.slice())}function h(){if(u)throw new Error(jn(3));return o}function f(D){if(typeof D!="function")throw new Error(jn(4));if(u)throw new Error(jn(5));var P=!0;return c(),l.push(D),function(){if(P){if(u)throw new Error(jn(6));P=!1,c();var E=l.indexOf(D);l.splice(E,1),a=null}}}function p(D){if(!cz(D))throw new Error(jn(7));if(typeof D.type>"u")throw new Error(jn(8));if(u)throw new Error(jn(9));try{u=!0,o=s(o,D)}finally{u=!1}for(var P=a=l,x=0;x<P.length;x++){var E=P[x];E()}return D}function g(D){if(typeof D!="function")throw new Error(jn(10));s=D,p({type:IE.REPLACE})}function b(){var D,P=f;return D={subscribe:function(E){if(typeof E!="object"||E===null)throw new Error(jn(11));function _(){E.next&&E.next(h())}_();var R=P(_);return{unsubscribe:R}}},D[TE]=function(){return this},D}return p({type:IE.INIT}),i={dispatch:p,subscribe:f,getState:h,replaceReducer:g},i[TE]=b,i}function kE(t,e){return function(){return e(t.apply(this,arguments))}}function CE(t,e){if(typeof t=="function")return kE(t,e);if(typeof t!="object"||t===null)throw new Error(jn(16));var r={};for(var i in t){var s=t[i];typeof s=="function"&&(r[i]=kE(s,e))}return r}function gA(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(i){return i}:e.length===1?e[0]:e.reduce(function(i,s){return function(){return i(s.apply(void 0,arguments))}})}function dz(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(i){return function(){var s=i.apply(void 0,arguments),o=function(){throw new Error(jn(15))},a={getState:s.getState,dispatch:function(){return o.apply(void 0,arguments)}},l=e.map(function(u){return u(a)});return o=gA.apply(void 0,l)(s.dispatch),EE(EE({},s),{},{dispatch:o})}}}var vA=Ue.createContext(null);function hz(t){t()}var yA=hz,fz=function(e){return yA=e},pz=function(){return yA};function mz(){var t=pz(),e=null,r=null;return{clear:function(){e=null,r=null},notify:function(){t(function(){for(var s=e;s;)s.callback(),s=s.next})},get:function(){for(var s=[],o=e;o;)s.push(o),o=o.next;return s},subscribe:function(s){var o=!0,a=r={callback:s,next:null,prev:r};return a.prev?a.prev.next=a:e=a,function(){!o||e===null||(o=!1,a.next?a.next.prev=a.prev:r=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var AE={notify:function(){},get:function(){return[]}};function _A(t,e){var r,i=AE;function s(f){return u(),i.subscribe(f)}function o(){i.notify()}function a(){h.onStateChange&&h.onStateChange()}function l(){return!!r}function u(){r||(r=e?e.addNestedSub(a):t.subscribe(a),i=mz())}function c(){r&&(r(),r=void 0,i.clear(),i=AE)}var h={addNestedSub:s,notifyNestedSubs:o,handleChangeWrapper:a,isSubscribed:l,trySubscribe:u,tryUnsubscribe:c,getListeners:function(){return i}};return h}var wA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?M.useLayoutEffect:M.useEffect;function gz(t){var e=t.store,r=t.context,i=t.children,s=M.useMemo(function(){var l=_A(e);return{store:e,subscription:l}},[e]),o=M.useMemo(function(){return e.getState()},[e]);wA(function(){var l=s.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),o!==e.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[s,o]);var a=r||vA;return Ue.createElement(a.Provider,{value:s},i)}function zh(t,e){if(t==null)return{};var r={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;r[i]=t[i]}return r}var bA={exports:{}},at={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zt=typeof Symbol=="function"&&Symbol.for,E_=Zt?Symbol.for("react.element"):60103,T_=Zt?Symbol.for("react.portal"):60106,Kf=Zt?Symbol.for("react.fragment"):60107,Yf=Zt?Symbol.for("react.strict_mode"):60108,Xf=Zt?Symbol.for("react.profiler"):60114,Qf=Zt?Symbol.for("react.provider"):60109,Jf=Zt?Symbol.for("react.context"):60110,S_=Zt?Symbol.for("react.async_mode"):60111,Zf=Zt?Symbol.for("react.concurrent_mode"):60111,ep=Zt?Symbol.for("react.forward_ref"):60112,tp=Zt?Symbol.for("react.suspense"):60113,vz=Zt?Symbol.for("react.suspense_list"):60120,np=Zt?Symbol.for("react.memo"):60115,rp=Zt?Symbol.for("react.lazy"):60116,yz=Zt?Symbol.for("react.block"):60121,_z=Zt?Symbol.for("react.fundamental"):60117,wz=Zt?Symbol.for("react.responder"):60118,bz=Zt?Symbol.for("react.scope"):60119;function ar(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case E_:switch(t=t.type,t){case S_:case Zf:case Kf:case Xf:case Yf:case tp:return t;default:switch(t=t&&t.$$typeof,t){case Jf:case ep:case rp:case np:case Qf:return t;default:return e}}case T_:return e}}}function xA(t){return ar(t)===Zf}at.AsyncMode=S_;at.ConcurrentMode=Zf;at.ContextConsumer=Jf;at.ContextProvider=Qf;at.Element=E_;at.ForwardRef=ep;at.Fragment=Kf;at.Lazy=rp;at.Memo=np;at.Portal=T_;at.Profiler=Xf;at.StrictMode=Yf;at.Suspense=tp;at.isAsyncMode=function(t){return xA(t)||ar(t)===S_};at.isConcurrentMode=xA;at.isContextConsumer=function(t){return ar(t)===Jf};at.isContextProvider=function(t){return ar(t)===Qf};at.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===E_};at.isForwardRef=function(t){return ar(t)===ep};at.isFragment=function(t){return ar(t)===Kf};at.isLazy=function(t){return ar(t)===rp};at.isMemo=function(t){return ar(t)===np};at.isPortal=function(t){return ar(t)===T_};at.isProfiler=function(t){return ar(t)===Xf};at.isStrictMode=function(t){return ar(t)===Yf};at.isSuspense=function(t){return ar(t)===tp};at.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Kf||t===Zf||t===Xf||t===Yf||t===tp||t===vz||typeof t=="object"&&t!==null&&(t.$$typeof===rp||t.$$typeof===np||t.$$typeof===Qf||t.$$typeof===Jf||t.$$typeof===ep||t.$$typeof===_z||t.$$typeof===wz||t.$$typeof===bz||t.$$typeof===yz)};at.typeOf=ar;bA.exports=at;var xz=bA.exports,I_=xz,Ez={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Tz={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Sz={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},EA={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},k_={};k_[I_.ForwardRef]=Sz;k_[I_.Memo]=EA;function PE(t){return I_.isMemo(t)?EA:k_[t.$$typeof]||Ez}var Iz=Object.defineProperty,kz=Object.getOwnPropertyNames,RE=Object.getOwnPropertySymbols,Cz=Object.getOwnPropertyDescriptor,Az=Object.getPrototypeOf,NE=Object.prototype;function TA(t,e,r){if(typeof e!="string"){if(NE){var i=Az(e);i&&i!==NE&&TA(t,i,r)}var s=kz(e);RE&&(s=s.concat(RE(e)));for(var o=PE(t),a=PE(e),l=0;l<s.length;++l){var u=s[l];if(!Tz[u]&&!(r&&r[u])&&!(a&&a[u])&&!(o&&o[u])){var c=Cz(e,u);try{Iz(t,u,c)}catch{}}}}return t}var Pz=TA;const DE=Fa(Pz);var SA={exports:{}},dt={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ip=60103,sp=60106,cc=60107,dc=60108,hc=60114,fc=60109,pc=60110,mc=60112,gc=60113,C_=60120,vc=60115,yc=60116,IA=60121,kA=60122,CA=60117,AA=60129,PA=60131;if(typeof Symbol=="function"&&Symbol.for){var nn=Symbol.for;ip=nn("react.element"),sp=nn("react.portal"),cc=nn("react.fragment"),dc=nn("react.strict_mode"),hc=nn("react.profiler"),fc=nn("react.provider"),pc=nn("react.context"),mc=nn("react.forward_ref"),gc=nn("react.suspense"),C_=nn("react.suspense_list"),vc=nn("react.memo"),yc=nn("react.lazy"),IA=nn("react.block"),kA=nn("react.server.block"),CA=nn("react.fundamental"),AA=nn("react.debug_trace_mode"),PA=nn("react.legacy_hidden")}function Ur(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case ip:switch(t=t.type,t){case cc:case hc:case dc:case gc:case C_:return t;default:switch(t=t&&t.$$typeof,t){case pc:case mc:case yc:case vc:case fc:return t;default:return e}}case sp:return e}}}var Rz=fc,Nz=ip,Dz=mc,Mz=cc,Lz=yc,Oz=vc,jz=sp,Vz=hc,Fz=dc,Uz=gc;dt.ContextConsumer=pc;dt.ContextProvider=Rz;dt.Element=Nz;dt.ForwardRef=Dz;dt.Fragment=Mz;dt.Lazy=Lz;dt.Memo=Oz;dt.Portal=jz;dt.Profiler=Vz;dt.StrictMode=Fz;dt.Suspense=Uz;dt.isAsyncMode=function(){return!1};dt.isConcurrentMode=function(){return!1};dt.isContextConsumer=function(t){return Ur(t)===pc};dt.isContextProvider=function(t){return Ur(t)===fc};dt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===ip};dt.isForwardRef=function(t){return Ur(t)===mc};dt.isFragment=function(t){return Ur(t)===cc};dt.isLazy=function(t){return Ur(t)===yc};dt.isMemo=function(t){return Ur(t)===vc};dt.isPortal=function(t){return Ur(t)===sp};dt.isProfiler=function(t){return Ur(t)===hc};dt.isStrictMode=function(t){return Ur(t)===dc};dt.isSuspense=function(t){return Ur(t)===gc};dt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===cc||t===hc||t===AA||t===dc||t===gc||t===C_||t===PA||typeof t=="object"&&t!==null&&(t.$$typeof===yc||t.$$typeof===vc||t.$$typeof===fc||t.$$typeof===pc||t.$$typeof===mc||t.$$typeof===CA||t.$$typeof===IA||t[0]===kA)};dt.typeOf=Ur;SA.exports=dt;var Bz=SA.exports,$z=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],zz=["reactReduxForwardedRef"],Hz=[],Wz=[null,null];function qz(t,e){var r=t[1];return[e.payload,r+1]}function ME(t,e,r){wA(function(){return t.apply(void 0,e)},r)}function Gz(t,e,r,i,s,o,a){t.current=i,e.current=s,r.current=!1,o.current&&(o.current=null,a())}function Kz(t,e,r,i,s,o,a,l,u,c){if(t){var h=!1,f=null,p=function(){if(!h){var D=e.getState(),P,x;try{P=i(D,s.current)}catch(E){x=E,f=E}x||(f=null),P===o.current?a.current||u():(o.current=P,l.current=P,a.current=!0,c({type:"STORE_UPDATED",payload:{error:x}}))}};r.onStateChange=p,r.trySubscribe(),p();var g=function(){if(h=!0,r.tryUnsubscribe(),r.onStateChange=null,f)throw f};return g}}var Yz=function(){return[null,0]};function Xz(t,e){e===void 0&&(e={});var r=e,i=r.getDisplayName,s=i===void 0?function(_){return"ConnectAdvanced("+_+")"}:i,o=r.methodName,a=o===void 0?"connectAdvanced":o,l=r.renderCountProp,u=l===void 0?void 0:l,c=r.shouldHandleStateChanges,h=c===void 0?!0:c,f=r.storeKey,p=f===void 0?"store":f;r.withRef;var g=r.forwardRef,b=g===void 0?!1:g,D=r.context,P=D===void 0?vA:D,x=zh(r,$z),E=P;return function(R){var j=R.displayName||R.name||"Component",V=s(j),C=Ie({},x,{getDisplayName:s,methodName:a,renderCountProp:u,shouldHandleStateChanges:h,storeKey:p,displayName:V,wrappedComponentName:j,WrappedComponent:R}),I=x.pure;function y(Y){return t(Y.dispatch,C)}var w=I?M.useMemo:function(Y){return Y()};function S(Y){var Z=M.useMemo(function(){var H=Y.reactReduxForwardedRef,re=zh(Y,zz);return[Y.context,H,re]},[Y]),ae=Z[0],he=Z[1],q=Z[2],G=M.useMemo(function(){return ae&&ae.Consumer&&Bz.isContextConsumer(Ue.createElement(ae.Consumer,null))?ae:E},[ae,E]),ie=M.useContext(G),ne=!!Y.store&&!!Y.store.getState&&!!Y.store.dispatch;ie&&ie.store;var W=ne?Y.store:ie.store,$=M.useMemo(function(){return y(W)},[W]),Q=M.useMemo(function(){if(!h)return Wz;var H=_A(W,ne?null:ie.subscription),re=H.notifyNestedSubs.bind(H);return[H,re]},[W,ne,ie]),X=Q[0],ce=Q[1],ye=M.useMemo(function(){return ne?ie:Ie({},ie,{subscription:X})},[ne,ie,X]),Fe=M.useReducer(qz,Hz,Yz),Le=Fe[0],ee=Le[0],le=Fe[1];if(ee&&ee.error)throw ee.error;var we=M.useRef(),je=M.useRef(q),Be=M.useRef(),nt=M.useRef(!1),A=w(function(){return Be.current&&q===je.current?Be.current:$(W.getState(),q)},[W,ee,q]);ME(Gz,[je,we,nt,q,A,Be,ce]),ME(Kz,[h,W,X,$,je,we,nt,Be,ce,le],[W,X,$]);var F=M.useMemo(function(){return Ue.createElement(R,Ie({},A,{ref:he}))},[he,R,A]),U=M.useMemo(function(){return h?Ue.createElement(G.Provider,{value:ye},F):F},[G,F,ye]);return U}var L=I?Ue.memo(S):S;if(L.WrappedComponent=R,L.displayName=S.displayName=V,b){var N=Ue.forwardRef(function(Z,ae){return Ue.createElement(L,Ie({},Z,{reactReduxForwardedRef:ae}))});return N.displayName=V,N.WrappedComponent=R,DE(N,R)}return DE(L,R)}}function LE(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Tm(t,e){if(LE(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(e,r[s])||!LE(t[r[s]],e[r[s]]))return!1;return!0}function Qz(t,e){var r={},i=function(a){var l=t[a];typeof l=="function"&&(r[a]=function(){return e(l.apply(void 0,arguments))})};for(var s in t)i(s);return r}function A_(t){return function(r,i){var s=t(r,i);function o(){return s}return o.dependsOnOwnProps=!1,o}}function OE(t){return t.dependsOnOwnProps!==null&&t.dependsOnOwnProps!==void 0?!!t.dependsOnOwnProps:t.length!==1}function RA(t,e){return function(i,s){s.displayName;var o=function(l,u){return o.dependsOnOwnProps?o.mapToProps(l,u):o.mapToProps(l)};return o.dependsOnOwnProps=!0,o.mapToProps=function(l,u){o.mapToProps=t,o.dependsOnOwnProps=OE(t);var c=o(l,u);return typeof c=="function"&&(o.mapToProps=c,o.dependsOnOwnProps=OE(c),c=o(l,u)),c},o}}function Jz(t){return typeof t=="function"?RA(t):void 0}function Zz(t){return t?void 0:A_(function(e){return{dispatch:e}})}function e9(t){return t&&typeof t=="object"?A_(function(e){return Qz(t,e)}):void 0}const t9=[Jz,Zz,e9];function n9(t){return typeof t=="function"?RA(t):void 0}function r9(t){return t?void 0:A_(function(){return{}})}const i9=[n9,r9];function s9(t,e,r){return Ie({},r,t,e)}function o9(t){return function(r,i){i.displayName;var s=i.pure,o=i.areMergedPropsEqual,a=!1,l;return function(c,h,f){var p=t(c,h,f);return a?(!s||!o(p,l))&&(l=p):(a=!0,l=p),l}}}function a9(t){return typeof t=="function"?o9(t):void 0}function l9(t){return t?void 0:function(){return s9}}const u9=[a9,l9];var c9=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function d9(t,e,r,i){return function(o,a){return r(t(o,a),e(i,a),a)}}function h9(t,e,r,i,s){var o=s.areStatesEqual,a=s.areOwnPropsEqual,l=s.areStatePropsEqual,u=!1,c,h,f,p,g;function b(_,R){return c=_,h=R,f=t(c,h),p=e(i,h),g=r(f,p,h),u=!0,g}function D(){return f=t(c,h),e.dependsOnOwnProps&&(p=e(i,h)),g=r(f,p,h),g}function P(){return t.dependsOnOwnProps&&(f=t(c,h)),e.dependsOnOwnProps&&(p=e(i,h)),g=r(f,p,h),g}function x(){var _=t(c,h),R=!l(_,f);return f=_,R&&(g=r(f,p,h)),g}function E(_,R){var j=!a(R,h),V=!o(_,c,R,h);return c=_,h=R,j&&V?D():j?P():V?x():g}return function(R,j){return u?E(R,j):b(R,j)}}function f9(t,e){var r=e.initMapStateToProps,i=e.initMapDispatchToProps,s=e.initMergeProps,o=zh(e,c9),a=r(t,o),l=i(t,o),u=s(t,o),c=o.pure?h9:d9;return c(a,l,u,t,o)}var p9=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Sm(t,e,r){for(var i=e.length-1;i>=0;i--){var s=e[i](t);if(s)return s}return function(o,a){throw new Error("Invalid value of type "+typeof t+" for "+r+" argument when connecting component "+a.wrappedComponentName+".")}}function m9(t,e){return t===e}function g9(t){var e=t===void 0?{}:t,r=e.connectHOC,i=r===void 0?Xz:r,s=e.mapStateToPropsFactories,o=s===void 0?i9:s,a=e.mapDispatchToPropsFactories,l=a===void 0?t9:a,u=e.mergePropsFactories,c=u===void 0?u9:u,h=e.selectorFactory,f=h===void 0?f9:h;return function(g,b,D,P){P===void 0&&(P={});var x=P,E=x.pure,_=E===void 0?!0:E,R=x.areStatesEqual,j=R===void 0?m9:R,V=x.areOwnPropsEqual,C=V===void 0?Tm:V,I=x.areStatePropsEqual,y=I===void 0?Tm:I,w=x.areMergedPropsEqual,S=w===void 0?Tm:w,L=zh(x,p9),N=Sm(g,o,"mapStateToProps"),Y=Sm(b,l,"mapDispatchToProps"),Z=Sm(D,c,"mergeProps");return i(f,Ie({methodName:"connect",getDisplayName:function(he){return"Connect("+he+")"},shouldHandleStateChanges:!!g,initMapStateToProps:N,initMapDispatchToProps:Y,initMergeProps:Z,pure:_,areStatesEqual:j,areOwnPropsEqual:C,areStatePropsEqual:y,areMergedPropsEqual:S},L))}}const NA=g9();fz(_y.unstable_batchedUpdates);function v9(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function DA(t,e){var r=M.useState(function(){return{inputs:e,result:t()}})[0],i=M.useRef(!0),s=M.useRef(r),o=i.current||!!(e&&s.current.inputs&&v9(e,s.current.inputs)),a=o?s.current:{inputs:e,result:t()};return M.useEffect(function(){i.current=!1,s.current=a},[a]),a.result}function y9(t,e){return DA(function(){return t},e)}var Je=DA,Te=y9,_9="Invariant failed";function w9(t,e){throw new Error(_9)}var Dr=function(e){var r=e.top,i=e.right,s=e.bottom,o=e.left,a=i-o,l=s-r,u={top:r,right:i,bottom:s,left:o,width:a,height:l,x:o,y:r,center:{x:(i+o)/2,y:(s+r)/2}};return u},P_=function(e,r){return{top:e.top-r.top,left:e.left-r.left,bottom:e.bottom+r.bottom,right:e.right+r.right}},jE=function(e,r){return{top:e.top+r.top,left:e.left+r.left,bottom:e.bottom-r.bottom,right:e.right-r.right}},b9=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},Im={top:0,right:0,bottom:0,left:0},R_=function(e){var r=e.borderBox,i=e.margin,s=i===void 0?Im:i,o=e.border,a=o===void 0?Im:o,l=e.padding,u=l===void 0?Im:l,c=Dr(P_(r,s)),h=Dr(jE(r,a)),f=Dr(jE(h,u));return{marginBox:c,borderBox:Dr(r),paddingBox:h,contentBox:f,margin:s,border:a,padding:u}},lr=function(e){var r=e.slice(0,-2),i=e.slice(-2);if(i!=="px")return 0;var s=Number(r);return isNaN(s)&&w9(),s},x9=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Hh=function(e,r){var i=e.borderBox,s=e.border,o=e.margin,a=e.padding,l=b9(i,r);return R_({borderBox:l,border:s,margin:o,padding:a})},Wh=function(e,r){return r===void 0&&(r=x9()),Hh(e,r)},MA=function(e,r){var i={top:lr(r.marginTop),right:lr(r.marginRight),bottom:lr(r.marginBottom),left:lr(r.marginLeft)},s={top:lr(r.paddingTop),right:lr(r.paddingRight),bottom:lr(r.paddingBottom),left:lr(r.paddingLeft)},o={top:lr(r.borderTopWidth),right:lr(r.borderRightWidth),bottom:lr(r.borderBottomWidth),left:lr(r.borderLeftWidth)};return R_({borderBox:e,margin:i,padding:s,border:o})},LA=function(e){var r=e.getBoundingClientRect(),i=window.getComputedStyle(e);return MA(r,i)},VE=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function E9(t,e){return!!(t===e||VE(t)&&VE(e))}function T9(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!E9(t[r],e[r]))return!1;return!0}function Qt(t,e){e===void 0&&(e=T9);var r,i=[],s,o=!1;function a(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return o&&r===this&&e(l,i)||(s=t.apply(this,l),o=!0,r=this,i=l),s}return a}var ju=function(e){var r=[],i=null,s=function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];r=l,!i&&(i=requestAnimationFrame(function(){i=null,e.apply(void 0,r)}))};return s.cancel=function(){i&&(cancelAnimationFrame(i),i=null)},s};function OA(t,e){}OA.bind(null,"warn");OA.bind(null,"error");function gs(){}function S9(t,e){return Ie({},t,{},e)}function fr(t,e,r){var i=e.map(function(s){var o=S9(r,s.options);return t.addEventListener(s.eventName,s.fn,o),function(){t.removeEventListener(s.eventName,s.fn,o)}});return function(){i.forEach(function(o){o()})}}var I9="Invariant failed";function qh(t){this.message=t}qh.prototype.toString=function(){return this.message};function ue(t,e){throw new qh(I9)}var k9=function(t){pA(e,t);function e(){for(var i,s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return i=t.call.apply(t,[this].concat(o))||this,i.callbacks=null,i.unbind=gs,i.onWindowError=function(l){var u=i.getCallbacks();u.isDragging()&&u.tryAbort();var c=l.error;c instanceof qh&&l.preventDefault()},i.getCallbacks=function(){if(!i.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return i.callbacks},i.setCallbacks=function(l){i.callbacks=l},i}var r=e.prototype;return r.componentDidMount=function(){this.unbind=fr(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(s){if(s instanceof qh){this.setState({});return}throw s},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},e}(Ue.Component),C9=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Gh=function(e){return e+1},A9=function(e){return`
  You have lifted an item in position `+Gh(e.source.index)+`
`},jA=function(e,r){var i=e.droppableId===r.droppableId,s=Gh(e.index),o=Gh(r.index);return i?`
      You have moved the item from position `+s+`
      to position `+o+`
    `:`
    You have moved the item from position `+s+`
    in list `+e.droppableId+`
    to list `+r.droppableId+`
    in position `+o+`
  `},VA=function(e,r,i){var s=r.droppableId===i.droppableId;return s?`
      The item `+e+`
      has been combined with `+i.draggableId:`
      The item `+e+`
      in list `+r.droppableId+`
      has been combined with `+i.draggableId+`
      in list `+i.droppableId+`
    `},P9=function(e){var r=e.destination;if(r)return jA(e.source,r);var i=e.combine;return i?VA(e.draggableId,e.source,i):"You are over an area that cannot be dropped on"},FE=function(e){return`
  The item has returned to its starting position
  of `+Gh(e.index)+`
`},R9=function(e){if(e.reason==="CANCEL")return`
      Movement cancelled.
      `+FE(e.source)+`
    `;var r=e.destination,i=e.combine;return r?`
      You have dropped the item.
      `+jA(e.source,r)+`
    `:i?`
      You have dropped the item.
      `+VA(e.draggableId,e.source,i)+`
    `:`
    The item has been dropped while not over a drop area.
    `+FE(e.source)+`
  `},Hd={dragHandleUsageInstructions:C9,onDragStart:A9,onDragUpdate:P9,onDragEnd:R9},Jt={x:0,y:0},an=function(e,r){return{x:e.x+r.x,y:e.y+r.y}},Qn=function(e,r){return{x:e.x-r.x,y:e.y-r.y}},vs=function(e,r){return e.x===r.x&&e.y===r.y},el=function(e){return{x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}},mo=function(e,r,i){var s;return i===void 0&&(i=0),s={},s[e]=r,s[e==="x"?"y":"x"]=i,s},Vu=function(e,r){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))},UE=function(e,r){return Math.min.apply(Math,r.map(function(i){return Vu(e,i)}))},FA=function(e){return function(r){return{x:e(r.x),y:e(r.y)}}},N9=function(t,e){var r=Dr({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return r.width<=0||r.height<=0?null:r},_c=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},BE=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},D9={top:0,right:0,bottom:0,left:0},M9=function(e,r){return r?_c(e,r.scroll.diff.displacement):e},L9=function(e,r,i){if(i&&i.increasedBy){var s;return Ie({},e,(s={},s[r.end]=e[r.end]+i.increasedBy[r.line],s))}return e},O9=function(e,r){return r&&r.shouldClipSubject?N9(r.pageMarginBox,e):Dr(e)},Oa=function(t){var e=t.page,r=t.withPlaceholder,i=t.axis,s=t.frame,o=M9(e.marginBox,s),a=L9(o,i,r),l=O9(a,s);return{page:e,withPlaceholder:r,active:l}},N_=function(t,e){t.frame||ue();var r=t.frame,i=Qn(e,r.scroll.initial),s=el(i),o=Ie({},r,{scroll:{initial:r.scroll.initial,current:e,diff:{value:i,displacement:s},max:r.scroll.max}}),a=Oa({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:o}),l=Ie({},t,{frame:o,subject:a});return l};function Kh(t){return Object.values?Object.values(t):Object.keys(t).map(function(e){return t[e]})}function D_(t,e){if(t.findIndex)return t.findIndex(e);for(var r=0;r<t.length;r++)if(e(t[r]))return r;return-1}function Ls(t,e){if(t.find)return t.find(e);var r=D_(t,e);if(r!==-1)return t[r]}function UA(t){return Array.prototype.slice.call(t)}var BA=Qt(function(t){return t.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),$A=Qt(function(t){return t.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),op=Qt(function(t){return Kh(t)}),j9=Qt(function(t){return Kh(t)}),tl=Qt(function(t,e){var r=j9(e).filter(function(i){return t===i.descriptor.droppableId}).sort(function(i,s){return i.descriptor.index-s.descriptor.index});return r});function M_(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function ap(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var lp=Qt(function(t,e){return e.filter(function(r){return r.descriptor.id!==t.descriptor.id})}),V9=function(t){var e=t.isMovingForward,r=t.draggable,i=t.destination,s=t.insideDestination,o=t.previousImpact;if(!i.isCombineEnabled)return null;var a=M_(o);if(!a)return null;function l(D){var P={type:"COMBINE",combine:{draggableId:D,droppableId:i.descriptor.id}};return Ie({},o,{at:P})}var u=o.displaced.all,c=u.length?u[0]:null;if(e)return c?l(c):null;var h=lp(r,s);if(!c){if(!h.length)return null;var f=h[h.length-1];return l(f.descriptor.id)}var p=D_(h,function(D){return D.descriptor.id===c});p===-1&&ue();var g=p-1;if(g<0)return null;var b=h[g];return l(b.descriptor.id)},nl=function(t,e){return t.descriptor.droppableId===e.descriptor.id},zA={point:Jt,value:0},Fu={invisible:{},visible:{},all:[]},F9={displaced:Fu,displacedBy:zA,at:null},gr=function(t,e){return function(r){return t<=r&&r<=e}},HA=function(t){var e=gr(t.top,t.bottom),r=gr(t.left,t.right);return function(i){var s=e(i.top)&&e(i.bottom)&&r(i.left)&&r(i.right);if(s)return!0;var o=e(i.top)||e(i.bottom),a=r(i.left)||r(i.right),l=o&&a;if(l)return!0;var u=i.top<t.top&&i.bottom>t.bottom,c=i.left<t.left&&i.right>t.right,h=u&&c;if(h)return!0;var f=u&&a||c&&o;return f}},U9=function(t){var e=gr(t.top,t.bottom),r=gr(t.left,t.right);return function(i){var s=e(i.top)&&e(i.bottom)&&r(i.left)&&r(i.right);return s}},L_={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},WA={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},B9=function(t){return function(e){var r=gr(e.top,e.bottom),i=gr(e.left,e.right);return function(s){return t===L_?r(s.top)&&r(s.bottom):i(s.left)&&i(s.right)}}},$9=function(e,r){var i=r.frame?r.frame.scroll.diff.displacement:Jt;return _c(e,i)},z9=function(e,r,i){return r.subject.active?i(r.subject.active)(e):!1},H9=function(e,r,i){return i(r)(e)},O_=function(e){var r=e.target,i=e.destination,s=e.viewport,o=e.withDroppableDisplacement,a=e.isVisibleThroughFrameFn,l=o?$9(r,i):r;return z9(l,i,a)&&H9(l,s,a)},W9=function(e){return O_(Ie({},e,{isVisibleThroughFrameFn:HA}))},qA=function(e){return O_(Ie({},e,{isVisibleThroughFrameFn:U9}))},q9=function(e){return O_(Ie({},e,{isVisibleThroughFrameFn:B9(e.destination.axis)}))},G9=function(e,r,i){if(typeof i=="boolean")return i;if(!r)return!0;var s=r.invisible,o=r.visible;if(s[e])return!1;var a=o[e];return a?a.shouldAnimate:!0};function K9(t,e){var r=t.page.marginBox,i={top:e.point.y,right:0,bottom:0,left:e.point.x};return Dr(P_(r,i))}function Uu(t){var e=t.afterDragging,r=t.destination,i=t.displacedBy,s=t.viewport,o=t.forceShouldAnimate,a=t.last;return e.reduce(function(u,c){var h=K9(c,i),f=c.descriptor.id;u.all.push(f);var p=W9({target:h,destination:r,viewport:s,withDroppableDisplacement:!0});if(!p)return u.invisible[c.descriptor.id]=!0,u;var g=G9(f,a,o),b={draggableId:f,shouldAnimate:g};return u.visible[f]=b,u},{all:[],visible:{},invisible:{}})}function Y9(t,e){if(!t.length)return 0;var r=t[t.length-1].descriptor.index;return e.inHomeList?r:r+1}function $E(t){var e=t.insideDestination,r=t.inHomeList,i=t.displacedBy,s=t.destination,o=Y9(e,{inHomeList:r});return{displaced:Fu,displacedBy:i,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:o}}}}function Yh(t){var e=t.draggable,r=t.insideDestination,i=t.destination,s=t.viewport,o=t.displacedBy,a=t.last,l=t.index,u=t.forceShouldAnimate,c=nl(e,i);if(l==null)return $E({insideDestination:r,inHomeList:c,displacedBy:o,destination:i});var h=Ls(r,function(D){return D.descriptor.index===l});if(!h)return $E({insideDestination:r,inHomeList:c,displacedBy:o,destination:i});var f=lp(e,r),p=r.indexOf(h),g=f.slice(p),b=Uu({afterDragging:g,destination:i,displacedBy:o,last:a,viewport:s.frame,forceShouldAnimate:u});return{displaced:b,displacedBy:o,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:l}}}}function Cs(t,e){return!!e.effected[t]}var X9=function(t){var e=t.isMovingForward,r=t.destination,i=t.draggables,s=t.combine,o=t.afterCritical;if(!r.isCombineEnabled)return null;var a=s.draggableId,l=i[a],u=l.descriptor.index,c=Cs(a,o);return c?e?u:u-1:e?u+1:u},Q9=function(t){var e=t.isMovingForward,r=t.isInHomeList,i=t.insideDestination,s=t.location;if(!i.length)return null;var o=s.index,a=e?o+1:o-1,l=i[0].descriptor.index,u=i[i.length-1].descriptor.index,c=r?u:u+1;return a<l||a>c?null:a},J9=function(t){var e=t.isMovingForward,r=t.isInHomeList,i=t.draggable,s=t.draggables,o=t.destination,a=t.insideDestination,l=t.previousImpact,u=t.viewport,c=t.afterCritical,h=l.at;if(h||ue(),h.type==="REORDER"){var f=Q9({isMovingForward:e,isInHomeList:r,location:h.destination,insideDestination:a});return f==null?null:Yh({draggable:i,insideDestination:a,destination:o,viewport:u,last:l.displaced,displacedBy:l.displacedBy,index:f})}var p=X9({isMovingForward:e,destination:o,displaced:l.displaced,draggables:s,combine:h.combine,afterCritical:c});return p==null?null:Yh({draggable:i,insideDestination:a,destination:o,viewport:u,last:l.displaced,displacedBy:l.displacedBy,index:p})},Z9=function(t){var e=t.displaced,r=t.afterCritical,i=t.combineWith,s=t.displacedBy,o=!!(e.visible[i]||e.invisible[i]);return Cs(i,r)?o?Jt:el(s.point):o?s.point:Jt},eH=function(t){var e=t.afterCritical,r=t.impact,i=t.draggables,s=ap(r);s||ue();var o=s.draggableId,a=i[o].page.borderBox.center,l=Z9({displaced:r.displaced,afterCritical:e,combineWith:o,displacedBy:r.displacedBy});return an(a,l)},GA=function(e,r){return r.margin[e.start]+r.borderBox[e.size]/2},tH=function(e,r){return r.margin[e.end]+r.borderBox[e.size]/2},j_=function(e,r,i){return r[e.crossAxisStart]+i.margin[e.crossAxisStart]+i.borderBox[e.crossAxisSize]/2},zE=function(e){var r=e.axis,i=e.moveRelativeTo,s=e.isMoving;return mo(r.line,i.marginBox[r.end]+GA(r,s),j_(r,i.marginBox,s))},HE=function(e){var r=e.axis,i=e.moveRelativeTo,s=e.isMoving;return mo(r.line,i.marginBox[r.start]-tH(r,s),j_(r,i.marginBox,s))},nH=function(e){var r=e.axis,i=e.moveInto,s=e.isMoving;return mo(r.line,i.contentBox[r.start]+GA(r,s),j_(r,i.contentBox,s))},rH=function(t){var e=t.impact,r=t.draggable,i=t.draggables,s=t.droppable,o=t.afterCritical,a=tl(s.descriptor.id,i),l=r.page,u=s.axis;if(!a.length)return nH({axis:u,moveInto:s.page,isMoving:l});var c=e.displaced,h=e.displacedBy,f=c.all[0];if(f){var p=i[f];if(Cs(f,o))return HE({axis:u,moveRelativeTo:p.page,isMoving:l});var g=Hh(p.page,h.point);return HE({axis:u,moveRelativeTo:g,isMoving:l})}var b=a[a.length-1];if(b.descriptor.id===r.descriptor.id)return l.borderBox.center;if(Cs(b.descriptor.id,o)){var D=Hh(b.page,el(o.displacedBy.point));return zE({axis:u,moveRelativeTo:D,isMoving:l})}return zE({axis:u,moveRelativeTo:b.page,isMoving:l})},_v=function(t,e){var r=t.frame;return r?an(e,r.scroll.diff.displacement):e},iH=function(e){var r=e.impact,i=e.draggable,s=e.droppable,o=e.draggables,a=e.afterCritical,l=i.page.borderBox.center,u=r.at;return!s||!u?l:u.type==="REORDER"?rH({impact:r,draggable:i,draggables:o,droppable:s,afterCritical:a}):eH({impact:r,draggables:o,afterCritical:a})},up=function(t){var e=iH(t),r=t.droppable,i=r?_v(r,e):e;return i},KA=function(t,e){var r=Qn(e,t.scroll.initial),i=el(r),s=Dr({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),o={frame:s,scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:r,displacement:i}}};return o};function WE(t,e){return t.map(function(r){return e[r]})}function sH(t,e){for(var r=0;r<e.length;r++){var i=e[r].visible[t];if(i)return i}return null}var oH=function(t){var e=t.impact,r=t.viewport,i=t.destination,s=t.draggables,o=t.maxScrollChange,a=KA(r,an(r.scroll.current,o)),l=i.frame?N_(i,an(i.frame.scroll.current,o)):i,u=e.displaced,c=Uu({afterDragging:WE(u.all,s),destination:i,displacedBy:e.displacedBy,viewport:a.frame,last:u,forceShouldAnimate:!1}),h=Uu({afterDragging:WE(u.all,s),destination:l,displacedBy:e.displacedBy,viewport:r.frame,last:u,forceShouldAnimate:!1}),f={},p={},g=[u,c,h];u.all.forEach(function(D){var P=sH(D,g);if(P){p[D]=P;return}f[D]=!0});var b=Ie({},e,{displaced:{all:u.all,invisible:f,visible:p}});return b},aH=function(t,e){return an(t.scroll.diff.displacement,e)},V_=function(t){var e=t.pageBorderBoxCenter,r=t.draggable,i=t.viewport,s=aH(i,e),o=Qn(s,r.page.borderBox.center);return an(r.client.borderBox.center,o)},YA=function(t){var e=t.draggable,r=t.destination,i=t.newPageBorderBoxCenter,s=t.viewport,o=t.withDroppableDisplacement,a=t.onlyOnMainAxis,l=a===void 0?!1:a,u=Qn(i,e.page.borderBox.center),c=_c(e.page.borderBox,u),h={target:c,destination:r,withDroppableDisplacement:o,viewport:s};return l?q9(h):qA(h)},lH=function(t){var e=t.isMovingForward,r=t.draggable,i=t.destination,s=t.draggables,o=t.previousImpact,a=t.viewport,l=t.previousPageBorderBoxCenter,u=t.previousClientSelection,c=t.afterCritical;if(!i.isEnabled)return null;var h=tl(i.descriptor.id,s),f=nl(r,i),p=V9({isMovingForward:e,draggable:r,destination:i,insideDestination:h,previousImpact:o})||J9({isMovingForward:e,isInHomeList:f,draggable:r,draggables:s,destination:i,insideDestination:h,previousImpact:o,viewport:a,afterCritical:c});if(!p)return null;var g=up({impact:p,draggable:r,droppable:i,draggables:s,afterCritical:c}),b=YA({draggable:r,destination:i,newPageBorderBoxCenter:g,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(b){var D=V_({pageBorderBoxCenter:g,draggable:r,viewport:a});return{clientSelection:D,impact:p,scrollJumpRequest:null}}var P=Qn(g,l),x=oH({impact:p,viewport:a,destination:i,draggables:s,maxScrollChange:P});return{clientSelection:u,impact:x,scrollJumpRequest:P}},In=function(e){var r=e.subject.active;return r||ue(),r},uH=function(t){var e=t.isMovingForward,r=t.pageBorderBoxCenter,i=t.source,s=t.droppables,o=t.viewport,a=i.subject.active;if(!a)return null;var l=i.axis,u=gr(a[l.start],a[l.end]),c=op(s).filter(function(f){return f!==i}).filter(function(f){return f.isEnabled}).filter(function(f){return!!f.subject.active}).filter(function(f){return HA(o.frame)(In(f))}).filter(function(f){var p=In(f);return e?a[l.crossAxisEnd]<p[l.crossAxisEnd]:p[l.crossAxisStart]<a[l.crossAxisStart]}).filter(function(f){var p=In(f),g=gr(p[l.start],p[l.end]);return u(p[l.start])||u(p[l.end])||g(a[l.start])||g(a[l.end])}).sort(function(f,p){var g=In(f)[l.crossAxisStart],b=In(p)[l.crossAxisStart];return e?g-b:b-g}).filter(function(f,p,g){return In(f)[l.crossAxisStart]===In(g[0])[l.crossAxisStart]});if(!c.length)return null;if(c.length===1)return c[0];var h=c.filter(function(f){var p=gr(In(f)[l.start],In(f)[l.end]);return p(r[l.line])});return h.length===1?h[0]:h.length>1?h.sort(function(f,p){return In(f)[l.start]-In(p)[l.start]})[0]:c.sort(function(f,p){var g=UE(r,BE(In(f))),b=UE(r,BE(In(p)));return g!==b?g-b:In(f)[l.start]-In(p)[l.start]})[0]},qE=function(e,r){var i=e.page.borderBox.center;return Cs(e.descriptor.id,r)?Qn(i,r.displacedBy.point):i},cH=function(e,r){var i=e.page.borderBox;return Cs(e.descriptor.id,r)?_c(i,el(r.displacedBy.point)):i},dH=function(t){var e=t.pageBorderBoxCenter,r=t.viewport,i=t.destination,s=t.insideDestination,o=t.afterCritical,a=s.filter(function(l){return qA({target:cH(l,o),destination:i,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(l,u){var c=Vu(e,_v(i,qE(l,o))),h=Vu(e,_v(i,qE(u,o)));return c<h?-1:h<c?1:l.descriptor.index-u.descriptor.index});return a[0]||null},wc=Qt(function(e,r){var i=r[e.line];return{value:i,point:mo(e.line,i)}}),hH=function(e,r,i){var s=e.axis;if(e.descriptor.mode==="virtual")return mo(s.line,r[s.line]);var o=e.subject.page.contentBox[s.size],a=tl(e.descriptor.id,i),l=a.reduce(function(h,f){return h+f.client.marginBox[s.size]},0),u=l+r[s.line],c=u-o;return c<=0?null:mo(s.line,c)},XA=function(e,r){return Ie({},e,{scroll:Ie({},e.scroll,{max:r})})},QA=function(e,r,i){var s=e.frame;nl(r,e)&&ue(),e.subject.withPlaceholder&&ue();var o=wc(e.axis,r.displaceBy).point,a=hH(e,o,i),l={placeholderSize:o,increasedBy:a,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){var u=Oa({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:e.frame});return Ie({},e,{subject:u})}var c=a?an(s.scroll.max,a):s.scroll.max,h=XA(s,c),f=Oa({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:h});return Ie({},e,{subject:f,frame:h})},fH=function(e){var r=e.subject.withPlaceholder;r||ue();var i=e.frame;if(!i){var s=Oa({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return Ie({},e,{subject:s})}var o=r.oldFrameMaxScroll;o||ue();var a=XA(i,o),l=Oa({page:e.subject.page,axis:e.axis,frame:a,withPlaceholder:null});return Ie({},e,{subject:l,frame:a})},pH=function(t){var e=t.previousPageBorderBoxCenter,r=t.moveRelativeTo,i=t.insideDestination,s=t.draggable,o=t.draggables,a=t.destination,l=t.viewport,u=t.afterCritical;if(!r){if(i.length)return null;var c={displaced:Fu,displacedBy:zA,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},h=up({impact:c,draggable:s,droppable:a,draggables:o,afterCritical:u}),f=nl(s,a)?a:QA(a,s,o),p=YA({draggable:s,destination:f,newPageBorderBoxCenter:h,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return p?c:null}var g=e[a.axis.line]<=r.page.borderBox.center[a.axis.line],b=function(){var P=r.descriptor.index;return r.descriptor.id===s.descriptor.id||g?P:P+1}(),D=wc(a.axis,s.displaceBy);return Yh({draggable:s,insideDestination:i,destination:a,viewport:l,displacedBy:D,last:Fu,index:b})},mH=function(t){var e=t.isMovingForward,r=t.previousPageBorderBoxCenter,i=t.draggable,s=t.isOver,o=t.draggables,a=t.droppables,l=t.viewport,u=t.afterCritical,c=uH({isMovingForward:e,pageBorderBoxCenter:r,source:s,droppables:a,viewport:l});if(!c)return null;var h=tl(c.descriptor.id,o),f=dH({pageBorderBoxCenter:r,viewport:l,destination:c,insideDestination:h,afterCritical:u}),p=pH({previousPageBorderBoxCenter:r,destination:c,draggable:i,draggables:o,moveRelativeTo:f,insideDestination:h,viewport:l,afterCritical:u});if(!p)return null;var g=up({impact:p,draggable:i,droppable:c,draggables:o,afterCritical:u}),b=V_({pageBorderBoxCenter:g,draggable:i,viewport:l});return{clientSelection:b,impact:p,scrollJumpRequest:null}},er=function(t){var e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null},gH=function(e,r){var i=er(e);return i?r[i]:null},vH=function(t){var e=t.state,r=t.type,i=gH(e.impact,e.dimensions.droppables),s=!!i,o=e.dimensions.droppables[e.critical.droppable.id],a=i||o,l=a.axis.direction,u=l==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||l==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(u&&!s)return null;var c=r==="MOVE_DOWN"||r==="MOVE_RIGHT",h=e.dimensions.draggables[e.critical.draggable.id],f=e.current.page.borderBoxCenter,p=e.dimensions,g=p.draggables,b=p.droppables;return u?lH({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:h,destination:a,draggables:g,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):mH({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:h,isOver:a,draggables:g,droppables:b,viewport:e.viewport,afterCritical:e.afterCritical})};function Ks(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function JA(t){var e=gr(t.top,t.bottom),r=gr(t.left,t.right);return function(s){return e(s.y)&&r(s.x)}}function yH(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function _H(t){var e=t.pageBorderBox,r=t.draggable,i=t.candidates,s=r.page.borderBox.center,o=i.map(function(a){var l=a.axis,u=mo(a.axis.line,e.center[l.line],a.page.borderBox.center[l.crossAxisLine]);return{id:a.descriptor.id,distance:Vu(s,u)}}).sort(function(a,l){return l.distance-a.distance});return o[0]?o[0].id:null}function wH(t){var e=t.pageBorderBox,r=t.draggable,i=t.droppables,s=op(i).filter(function(o){if(!o.isEnabled)return!1;var a=o.subject.active;if(!a||!yH(e,a))return!1;if(JA(a)(e.center))return!0;var l=o.axis,u=a.center[l.crossAxisLine],c=e[l.crossAxisStart],h=e[l.crossAxisEnd],f=gr(a[l.crossAxisStart],a[l.crossAxisEnd]),p=f(c),g=f(h);return!p&&!g?!0:p?c<u:h>u});return s.length?s.length===1?s[0].descriptor.id:_H({pageBorderBox:e,draggable:r,candidates:s}):null}var ZA=function(e,r){return Dr(_c(e,r))},bH=function(t,e){var r=t.frame;return r?ZA(e,r.scroll.diff.value):e};function eP(t){var e=t.displaced,r=t.id;return!!(e.visible[r]||e.invisible[r])}function xH(t){var e=t.draggable,r=t.closest,i=t.inHomeList;return r?i&&r.descriptor.index>e.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var EH=function(t){var e=t.pageBorderBoxWithDroppableScroll,r=t.draggable,i=t.destination,s=t.insideDestination,o=t.last,a=t.viewport,l=t.afterCritical,u=i.axis,c=wc(i.axis,r.displaceBy),h=c.value,f=e[u.start],p=e[u.end],g=lp(r,s),b=Ls(g,function(P){var x=P.descriptor.id,E=P.page.borderBox.center[u.line],_=Cs(x,l),R=eP({displaced:o,id:x});return _?R?p<=E:f<E-h:R?p<=E+h:f<E}),D=xH({draggable:r,closest:b,inHomeList:nl(r,i)});return Yh({draggable:r,insideDestination:s,destination:i,viewport:a,last:o,displacedBy:c,index:D})},TH=4,SH=function(t){var e=t.draggable,r=t.pageBorderBoxWithDroppableScroll,i=t.previousImpact,s=t.destination,o=t.insideDestination,a=t.afterCritical;if(!s.isCombineEnabled)return null;var l=s.axis,u=wc(s.axis,e.displaceBy),c=u.value,h=r[l.start],f=r[l.end],p=lp(e,o),g=Ls(p,function(D){var P=D.descriptor.id,x=D.page.borderBox,E=x[l.size],_=E/TH,R=Cs(P,a),j=eP({displaced:i.displaced,id:P});return R?j?f>x[l.start]+_&&f<x[l.end]-_:h>x[l.start]-c+_&&h<x[l.end]-c-_:j?f>x[l.start]+c+_&&f<x[l.end]+c-_:h>x[l.start]+_&&h<x[l.end]-_});if(!g)return null;var b={displacedBy:u,displaced:i.displaced,at:{type:"COMBINE",combine:{draggableId:g.descriptor.id,droppableId:s.descriptor.id}}};return b},tP=function(t){var e=t.pageOffset,r=t.draggable,i=t.draggables,s=t.droppables,o=t.previousImpact,a=t.viewport,l=t.afterCritical,u=ZA(r.page.borderBox,e),c=wH({pageBorderBox:u,draggable:r,droppables:s});if(!c)return F9;var h=s[c],f=tl(h.descriptor.id,i),p=bH(h,u);return SH({pageBorderBoxWithDroppableScroll:p,draggable:r,previousImpact:o,destination:h,insideDestination:f,afterCritical:l})||EH({pageBorderBoxWithDroppableScroll:p,draggable:r,destination:h,insideDestination:f,last:o.displaced,viewport:a,afterCritical:l})},F_=function(t,e){var r;return Ie({},t,(r={},r[e.descriptor.id]=e,r))},IH=function(e){var r=e.previousImpact,i=e.impact,s=e.droppables,o=er(r),a=er(i);if(!o||o===a)return s;var l=s[o];if(!l.subject.withPlaceholder)return s;var u=fH(l);return F_(s,u)},kH=function(t){var e=t.draggable,r=t.draggables,i=t.droppables,s=t.previousImpact,o=t.impact,a=IH({previousImpact:s,impact:o,droppables:i}),l=er(o);if(!l)return a;var u=i[l];if(nl(e,u)||u.subject.withPlaceholder)return a;var c=QA(u,e,r);return F_(a,c)},su=function(t){var e=t.state,r=t.clientSelection,i=t.dimensions,s=t.viewport,o=t.impact,a=t.scrollJumpRequest,l=s||e.viewport,u=i||e.dimensions,c=r||e.current.client.selection,h=Qn(c,e.initial.client.selection),f={offset:h,selection:c,borderBoxCenter:an(e.initial.client.borderBoxCenter,h)},p={selection:an(f.selection,l.scroll.current),borderBoxCenter:an(f.borderBoxCenter,l.scroll.current),offset:an(f.offset,l.scroll.diff.value)},g={client:f,page:p};if(e.phase==="COLLECTING")return Ie({phase:"COLLECTING"},e,{dimensions:u,viewport:l,current:g});var b=u.draggables[e.critical.draggable.id],D=o||tP({pageOffset:p.offset,draggable:b,draggables:u.draggables,droppables:u.droppables,previousImpact:e.impact,viewport:l,afterCritical:e.afterCritical}),P=kH({draggable:b,impact:D,previousImpact:e.impact,draggables:u.draggables,droppables:u.droppables}),x=Ie({},e,{current:g,dimensions:{draggables:u.draggables,droppables:P},impact:D,viewport:l,scrollJumpRequest:a||null,forceShouldAnimate:a?!1:null});return x};function CH(t,e){return t.map(function(r){return e[r]})}var nP=function(t){var e=t.impact,r=t.viewport,i=t.draggables,s=t.destination,o=t.forceShouldAnimate,a=e.displaced,l=CH(a.all,i),u=Uu({afterDragging:l,destination:s,displacedBy:e.displacedBy,viewport:r.frame,forceShouldAnimate:o,last:a});return Ie({},e,{displaced:u})},rP=function(t){var e=t.impact,r=t.draggable,i=t.droppable,s=t.draggables,o=t.viewport,a=t.afterCritical,l=up({impact:e,draggable:r,draggables:s,droppable:i,afterCritical:a});return V_({pageBorderBoxCenter:l,draggable:r,viewport:o})},iP=function(t){var e=t.state,r=t.dimensions,i=t.viewport;e.movementMode!=="SNAP"&&ue();var s=e.impact,o=i||e.viewport,a=r||e.dimensions,l=a.draggables,u=a.droppables,c=l[e.critical.draggable.id],h=er(s);h||ue();var f=u[h],p=nP({impact:s,viewport:o,destination:f,draggables:l}),g=rP({impact:p,draggable:c,droppable:f,draggables:l,viewport:o,afterCritical:e.afterCritical});return su({impact:p,clientSelection:g,state:e,dimensions:a,viewport:o})},AH=function(t){return{index:t.index,droppableId:t.droppableId}},sP=function(t){var e=t.draggable,r=t.home,i=t.draggables,s=t.viewport,o=wc(r.axis,e.displaceBy),a=tl(r.descriptor.id,i),l=a.indexOf(e);l===-1&&ue();var u=a.slice(l+1),c=u.reduce(function(g,b){return g[b.descriptor.id]=!0,g},{}),h={inVirtualList:r.descriptor.mode==="virtual",displacedBy:o,effected:c},f=Uu({afterDragging:u,destination:r,displacedBy:o,last:null,viewport:s.frame,forceShouldAnimate:!1}),p={displaced:f,displacedBy:o,at:{type:"REORDER",destination:AH(e.descriptor)}};return{impact:p,afterCritical:h}},PH=function(t,e){return{draggables:t.draggables,droppables:F_(t.droppables,e)}},RH=function(t){var e=t.draggable,r=t.offset,i=t.initialWindowScroll,s=Hh(e.client,r),o=Wh(s,i),a=Ie({},e,{placeholder:Ie({},e.placeholder,{client:s}),client:s,page:o});return a},NH=function(t){var e=t.frame;return e||ue(),e},DH=function(t){var e=t.additions,r=t.updatedDroppables,i=t.viewport,s=i.scroll.diff.value;return e.map(function(o){var a=o.descriptor.droppableId,l=r[a],u=NH(l),c=u.scroll.diff.value,h=an(s,c),f=RH({draggable:o,offset:h,initialWindowScroll:i.scroll.initial});return f})},MH=function(t){var e=t.state,r=t.published,i=r.modified.map(function(_){var R=e.dimensions.droppables[_.droppableId],j=N_(R,_.scroll);return j}),s=Ie({},e.dimensions.droppables,{},BA(i)),o=$A(DH({additions:r.additions,updatedDroppables:s,viewport:e.viewport})),a=Ie({},e.dimensions.draggables,{},o);r.removals.forEach(function(_){delete a[_]});var l={droppables:s,draggables:a},u=er(e.impact),c=u?l.droppables[u]:null,h=l.draggables[e.critical.draggable.id],f=l.droppables[e.critical.droppable.id],p=sP({draggable:h,home:f,draggables:a,viewport:e.viewport}),g=p.impact,b=p.afterCritical,D=c&&c.isCombineEnabled?e.impact:g,P=tP({pageOffset:e.current.page.offset,draggable:l.draggables[e.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:D,viewport:e.viewport,afterCritical:b}),x=Ie({phase:"DRAGGING"},e,{phase:"DRAGGING",impact:P,onLiftImpact:g,dimensions:l,afterCritical:b,forceShouldAnimate:!1});if(e.phase==="COLLECTING")return x;var E=Ie({phase:"DROP_PENDING"},x,{phase:"DROP_PENDING",reason:e.reason,isWaiting:!1});return E},wv=function(e){return e.movementMode==="SNAP"},km=function(e,r,i){var s=PH(e.dimensions,r);return!wv(e)||i?su({state:e,dimensions:s}):iP({state:e,dimensions:s})};function Cm(t){return t.isDragging&&t.movementMode==="SNAP"?Ie({phase:"DRAGGING"},t,{scrollJumpRequest:null}):t}var GE={phase:"IDLE",completed:null,shouldFlush:!1},LH=function(t,e){if(t===void 0&&(t=GE),e.type==="FLUSH")return Ie({},GE,{shouldFlush:!0});if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&ue();var r=e.payload,i=r.critical,s=r.clientSelection,o=r.viewport,a=r.dimensions,l=r.movementMode,u=a.draggables[i.draggable.id],c=a.droppables[i.droppable.id],h={selection:s,borderBoxCenter:u.client.borderBox.center,offset:Jt},f={client:h,page:{selection:an(h.selection,o.scroll.initial),borderBoxCenter:an(h.selection,o.scroll.initial),offset:an(h.selection,o.scroll.diff.value)}},p=op(a.droppables).every(function(le){return!le.isFixedOnPage}),g=sP({draggable:u,home:c,draggables:a.draggables,viewport:o}),b=g.impact,D=g.afterCritical,P={phase:"DRAGGING",isDragging:!0,critical:i,movementMode:l,dimensions:a,initial:f,current:f,isWindowScrollAllowed:p,impact:b,afterCritical:D,onLiftImpact:b,viewport:o,scrollJumpRequest:null,forceShouldAnimate:null};return P}if(e.type==="COLLECTION_STARTING"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&ue();var x=Ie({phase:"COLLECTING"},t,{phase:"COLLECTING"});return x}if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||ue(),MH({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;Ks(t)||ue();var E=e.payload.client;return vs(E,t.current.client.selection)?t:su({state:t,clientSelection:E,impact:wv(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return Cm(t);Ks(t)||ue();var _=e.payload,R=_.id,j=_.newScroll,V=t.dimensions.droppables[R];if(!V)return t;var C=N_(V,j);return km(t,C,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;Ks(t)||ue();var I=e.payload,y=I.id,w=I.isEnabled,S=t.dimensions.droppables[y];S||ue(),S.isEnabled===w&&ue();var L=Ie({},S,{isEnabled:w});return km(t,L,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;Ks(t)||ue();var N=e.payload,Y=N.id,Z=N.isCombineEnabled,ae=t.dimensions.droppables[Y];ae||ue(),ae.isCombineEnabled===Z&&ue();var he=Ie({},ae,{isCombineEnabled:Z});return km(t,he,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;Ks(t)||ue(),t.isWindowScrollAllowed||ue();var q=e.payload.newScroll;if(vs(t.viewport.scroll.current,q))return Cm(t);var G=KA(t.viewport,q);return wv(t)?iP({state:t,viewport:G}):su({state:t,viewport:G})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Ks(t))return t;var ie=e.payload.maxScroll;if(vs(ie,t.viewport.scroll.max))return t;var ne=Ie({},t.viewport,{scroll:Ie({},t.viewport.scroll,{max:ie})});return Ie({phase:"DRAGGING"},t,{viewport:ne})}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&ue();var W=vH({state:t,type:e.type});return W?su({state:t,impact:W.impact,clientSelection:W.clientSelection,scrollJumpRequest:W.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){var $=e.payload.reason;t.phase!=="COLLECTING"&&ue();var Q=Ie({phase:"DROP_PENDING"},t,{phase:"DROP_PENDING",isWaiting:!0,reason:$});return Q}if(e.type==="DROP_ANIMATE"){var X=e.payload,ce=X.completed,ye=X.dropDuration,Fe=X.newHomeClientOffset;t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||ue();var Le={phase:"DROP_ANIMATING",completed:ce,dropDuration:ye,newHomeClientOffset:Fe,dimensions:t.dimensions};return Le}if(e.type==="DROP_COMPLETE"){var ee=e.payload.completed;return{phase:"IDLE",completed:ee,shouldFlush:!1}}return t},OH=function(e){return{type:"BEFORE_INITIAL_CAPTURE",payload:e}},jH=function(e){return{type:"LIFT",payload:e}},VH=function(e){return{type:"INITIAL_PUBLISH",payload:e}},FH=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},UH=function(){return{type:"COLLECTION_STARTING",payload:null}},BH=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},$H=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},zH=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},oP=function(e){return{type:"MOVE",payload:e}},HH=function(e){return{type:"MOVE_BY_WINDOW_SCROLL",payload:e}},WH=function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}},qH=function(){return{type:"MOVE_UP",payload:null}},GH=function(){return{type:"MOVE_DOWN",payload:null}},KH=function(){return{type:"MOVE_RIGHT",payload:null}},YH=function(){return{type:"MOVE_LEFT",payload:null}},U_=function(){return{type:"FLUSH",payload:null}},XH=function(e){return{type:"DROP_ANIMATE",payload:e}},B_=function(e){return{type:"DROP_COMPLETE",payload:e}},aP=function(e){return{type:"DROP",payload:e}},QH=function(e){return{type:"DROP_PENDING",payload:e}},lP=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},JH=function(t){return function(e){var r=e.getState,i=e.dispatch;return function(s){return function(o){if(o.type!=="LIFT"){s(o);return}var a=o.payload,l=a.id,u=a.clientSelection,c=a.movementMode,h=r();h.phase==="DROP_ANIMATING"&&i(B_({completed:h.completed})),r().phase!=="IDLE"&&ue(),i(U_()),i(OH({draggableId:l,movementMode:c}));var f={shouldPublishImmediately:c==="SNAP"},p={draggableId:l,scrollOptions:f},g=t.startPublishing(p),b=g.critical,D=g.dimensions,P=g.viewport;i(VH({critical:b,dimensions:D,clientSelection:u,movementMode:c,viewport:P}))}}}},ZH=function(t){return function(){return function(e){return function(r){r.type==="INITIAL_PUBLISH"&&t.dragging(),r.type==="DROP_ANIMATE"&&t.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&t.resting(),e(r)}}}},$_={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Bu={opacity:{drop:0,combining:.7},scale:{drop:.75}},z_={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},zs=z_.outOfTheWay+"s "+$_.outOfTheWay,ou={fluid:"opacity "+zs,snap:"transform "+zs+", opacity "+zs,drop:function(e){var r=e+"s "+$_.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+zs,placeholder:"height "+zs+", width "+zs+", margin "+zs},KE=function(e){return vs(e,Jt)?null:"translate("+e.x+"px, "+e.y+"px)"},bv={moveTo:KE,drop:function(e,r){var i=KE(e);return i?r?i+" scale("+Bu.scale.drop+")":i:null}},xv=z_.minDropTime,uP=z_.maxDropTime,eW=uP-xv,YE=1500,tW=.6,nW=function(t){var e=t.current,r=t.destination,i=t.reason,s=Vu(e,r);if(s<=0)return xv;if(s>=YE)return uP;var o=s/YE,a=xv+eW*o,l=i==="CANCEL"?a*tW:a;return Number(l.toFixed(2))},rW=function(t){var e=t.impact,r=t.draggable,i=t.dimensions,s=t.viewport,o=t.afterCritical,a=i.draggables,l=i.droppables,u=er(e),c=u?l[u]:null,h=l[r.descriptor.droppableId],f=rP({impact:e,draggable:r,draggables:a,afterCritical:o,droppable:c||h,viewport:s}),p=Qn(f,r.client.borderBox.center);return p},iW=function(t){var e=t.draggables,r=t.reason,i=t.lastImpact,s=t.home,o=t.viewport,a=t.onLiftImpact;if(!i.at||r!=="DROP"){var l=nP({draggables:e,impact:a,destination:s,viewport:o,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(i.at.type==="REORDER")return{impact:i,didDropInsideDroppable:!0};var u=Ie({},i,{displaced:Fu});return{impact:u,didDropInsideDroppable:!0}},sW=function(t){var e=t.getState,r=t.dispatch;return function(i){return function(s){if(s.type!=="DROP"){i(s);return}var o=e(),a=s.payload.reason;if(o.phase==="COLLECTING"){r(QH({reason:a}));return}if(o.phase!=="IDLE"){var l=o.phase==="DROP_PENDING"&&o.isWaiting;l&&ue(),o.phase==="DRAGGING"||o.phase==="DROP_PENDING"||ue();var u=o.critical,c=o.dimensions,h=c.draggables[o.critical.draggable.id],f=iW({reason:a,lastImpact:o.impact,afterCritical:o.afterCritical,onLiftImpact:o.onLiftImpact,home:o.dimensions.droppables[o.critical.droppable.id],viewport:o.viewport,draggables:o.dimensions.draggables}),p=f.impact,g=f.didDropInsideDroppable,b=g?M_(p):null,D=g?ap(p):null,P={index:u.draggable.index,droppableId:u.droppable.id},x={draggableId:h.descriptor.id,type:h.descriptor.type,source:P,reason:a,mode:o.movementMode,destination:b,combine:D},E=rW({impact:p,draggable:h,dimensions:c,viewport:o.viewport,afterCritical:o.afterCritical}),_={critical:o.critical,afterCritical:o.afterCritical,result:x,impact:p},R=!vs(o.current.client.offset,E)||!!x.combine;if(!R){r(B_({completed:_}));return}var j=nW({current:o.current.client.offset,destination:E,reason:a}),V={newHomeClientOffset:E,dropDuration:j,completed:_};r(XH(V))}}}},cP=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function oW(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||t()}}}function aW(t){var e=t.onWindowScroll;function r(){e(cP())}var i=ju(r),s=oW(i),o=gs;function a(){return o!==gs}function l(){a()&&ue(),o=fr(window,[s])}function u(){a()||ue(),i.cancel(),o(),o=gs}return{start:l,stop:u,isActive:a}}var lW=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},uW=function(t){var e=aW({onWindowScroll:function(i){t.dispatch(HH({newScroll:i}))}});return function(r){return function(i){!e.isActive()&&i.type==="INITIAL_PUBLISH"&&e.start(),e.isActive()&&lW(i)&&e.stop(),r(i)}}},cW=function(t){var e=!1,r=!1,i=setTimeout(function(){r=!0}),s=function(a){e||r||(e=!0,t(a),clearTimeout(i))};return s.wasCalled=function(){return e},s},dW=function(){var t=[],e=function(o){var a=D_(t,function(c){return c.timerId===o});a===-1&&ue();var l=t.splice(a,1),u=l[0];u.callback()},r=function(o){var a=setTimeout(function(){return e(a)}),l={timerId:a,callback:o};t.push(l)},i=function(){if(t.length){var o=[].concat(t);t.length=0,o.forEach(function(a){clearTimeout(a.timerId),a.callback()})}};return{add:r,flush:i}},hW=function(e,r){return e==null&&r==null?!0:e==null||r==null?!1:e.droppableId===r.droppableId&&e.index===r.index},fW=function(e,r){return e==null&&r==null?!0:e==null||r==null?!1:e.draggableId===r.draggableId&&e.droppableId===r.droppableId},pW=function(e,r){if(e===r)return!0;var i=e.draggable.id===r.draggable.id&&e.draggable.droppableId===r.draggable.droppableId&&e.draggable.type===r.draggable.type&&e.draggable.index===r.draggable.index,s=e.droppable.id===r.droppable.id&&e.droppable.type===r.droppable.type;return i&&s},Al=function(e,r){r()},fd=function(e,r){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:r}},Am=function(e,r,i,s){if(!e){i(s(r));return}var o=cW(i),a={announce:o};e(r,a),o.wasCalled()||i(s(r))},mW=function(t,e){var r=dW(),i=null,s=function(p,g){i&&ue(),Al("onBeforeCapture",function(){var b=t().onBeforeCapture;if(b){var D={draggableId:p,mode:g};b(D)}})},o=function(p,g){i&&ue(),Al("onBeforeDragStart",function(){var b=t().onBeforeDragStart;b&&b(fd(p,g))})},a=function(p,g){i&&ue();var b=fd(p,g);i={mode:g,lastCritical:p,lastLocation:b.source,lastCombine:null},r.add(function(){Al("onDragStart",function(){return Am(t().onDragStart,b,e,Hd.onDragStart)})})},l=function(p,g){var b=M_(g),D=ap(g);i||ue();var P=!pW(p,i.lastCritical);P&&(i.lastCritical=p);var x=!hW(i.lastLocation,b);x&&(i.lastLocation=b);var E=!fW(i.lastCombine,D);if(E&&(i.lastCombine=D),!(!P&&!x&&!E)){var _=Ie({},fd(p,i.mode),{combine:D,destination:b});r.add(function(){Al("onDragUpdate",function(){return Am(t().onDragUpdate,_,e,Hd.onDragUpdate)})})}},u=function(){i||ue(),r.flush()},c=function(p){i||ue(),i=null,Al("onDragEnd",function(){return Am(t().onDragEnd,p,e,Hd.onDragEnd)})},h=function(){if(i){var p=Ie({},fd(i.lastCritical,i.mode),{combine:null,destination:null,reason:"CANCEL"});c(p)}};return{beforeCapture:s,beforeStart:o,start:a,update:l,flush:u,drop:c,abort:h}},gW=function(t,e){var r=mW(t,e);return function(i){return function(s){return function(o){if(o.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(o.payload.draggableId,o.payload.movementMode);return}if(o.type==="INITIAL_PUBLISH"){var a=o.payload.critical;r.beforeStart(a,o.payload.movementMode),s(o),r.start(a,o.payload.movementMode);return}if(o.type==="DROP_COMPLETE"){var l=o.payload.completed.result;r.flush(),s(o),r.drop(l);return}if(s(o),o.type==="FLUSH"){r.abort();return}var u=i.getState();u.phase==="DRAGGING"&&r.update(u.critical,u.impact)}}}},vW=function(t){return function(e){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){e(r);return}var i=t.getState();i.phase!=="DROP_ANIMATING"&&ue(),t.dispatch(B_({completed:i.completed}))}}},yW=function(t){var e=null,r=null;function i(){r&&(cancelAnimationFrame(r),r=null),e&&(e(),e=null)}return function(s){return function(o){if((o.type==="FLUSH"||o.type==="DROP_COMPLETE"||o.type==="DROP_ANIMATION_FINISHED")&&i(),s(o),o.type==="DROP_ANIMATE"){var a={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var u=t.getState();u.phase==="DROP_ANIMATING"&&t.dispatch(lP())}};r=requestAnimationFrame(function(){r=null,e=fr(window,[a])})}}}},_W=function(t){return function(){return function(e){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&t.stopPublishing(),e(r)}}}},wW=function(t){var e=!1;return function(){return function(r){return function(i){if(i.type==="INITIAL_PUBLISH"){e=!0,t.tryRecordFocus(i.payload.critical.draggable.id),r(i),t.tryRestoreFocusRecorded();return}if(r(i),!!e){if(i.type==="FLUSH"){e=!1,t.tryRestoreFocusRecorded();return}if(i.type==="DROP_COMPLETE"){e=!1;var s=i.payload.completed.result;s.combine&&t.tryShiftRecord(s.draggableId,s.combine.draggableId),t.tryRestoreFocusRecorded()}}}}}},bW=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},xW=function(t){return function(e){return function(r){return function(i){if(bW(i)){t.stop(),r(i);return}if(i.type==="INITIAL_PUBLISH"){r(i);var s=e.getState();s.phase!=="DRAGGING"&&ue(),t.start(s);return}r(i),t.scroll(e.getState())}}}},EW=function(t){return function(e){return function(r){if(e(r),r.type==="PUBLISH_WHILE_DRAGGING"){var i=t.getState();i.phase==="DROP_PENDING"&&(i.isWaiting||t.dispatch(aP({reason:i.reason})))}}}},TW=gA,SW=function(t){var e=t.dimensionMarshal,r=t.focusMarshal,i=t.styleMarshal,s=t.getResponders,o=t.announce,a=t.autoScroller;return mA(LH,TW(dz(ZH(i),_W(e),JH(e),sW,vW,yW,EW,xW(a),uW,wW(r),gW(s,o))))},Pm=function(){return{additions:{},removals:{},modified:{}}};function IW(t){var e=t.registry,r=t.callbacks,i=Pm(),s=null,o=function(){s||(r.collectionStarting(),s=requestAnimationFrame(function(){s=null;var h=i,f=h.additions,p=h.removals,g=h.modified,b=Object.keys(f).map(function(x){return e.draggable.getById(x).getDimension(Jt)}).sort(function(x,E){return x.descriptor.index-E.descriptor.index}),D=Object.keys(g).map(function(x){var E=e.droppable.getById(x),_=E.callbacks.getScrollWhileDragging();return{droppableId:x,scroll:_}}),P={additions:b,removals:Object.keys(p),modified:D};i=Pm(),r.publish(P)}))},a=function(h){var f=h.descriptor.id;i.additions[f]=h,i.modified[h.descriptor.droppableId]=!0,i.removals[f]&&delete i.removals[f],o()},l=function(h){var f=h.descriptor;i.removals[f.id]=!0,i.modified[f.droppableId]=!0,i.additions[f.id]&&delete i.additions[f.id],o()},u=function(){s&&(cancelAnimationFrame(s),s=null,i=Pm())};return{add:a,remove:l,stop:u}}var dP=function(t){var e=t.scrollHeight,r=t.scrollWidth,i=t.height,s=t.width,o=Qn({x:r,y:e},{x:s,y:i}),a={x:Math.max(0,o.x),y:Math.max(0,o.y)};return a},hP=function(){var t=document.documentElement;return t||ue(),t},fP=function(){var t=hP(),e=dP({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight});return e},kW=function(){var t=cP(),e=fP(),r=t.y,i=t.x,s=hP(),o=s.clientWidth,a=s.clientHeight,l=i+o,u=r+a,c=Dr({top:r,left:i,right:l,bottom:u}),h={frame:c,scroll:{initial:t,current:t,max:e,diff:{value:Jt,displacement:Jt}}};return h},CW=function(t){var e=t.critical,r=t.scrollOptions,i=t.registry,s=kW(),o=s.scroll.current,a=e.droppable,l=i.droppable.getAllByType(a.type).map(function(f){return f.callbacks.getDimensionAndWatchScroll(o,r)}),u=i.draggable.getAllByType(e.draggable.type).map(function(f){return f.getDimension(o)}),c={draggables:$A(u),droppables:BA(l)},h={dimensions:c,critical:e,viewport:s};return h};function XE(t,e,r){if(r.descriptor.id===e.id||r.descriptor.type!==e.type)return!1;var i=t.droppable.getById(r.descriptor.droppableId);return i.descriptor.mode==="virtual"}var AW=function(t,e){var r=null,i=IW({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),s=function(g,b){t.droppable.exists(g)||ue(),r&&e.updateDroppableIsEnabled({id:g,isEnabled:b})},o=function(g,b){r&&(t.droppable.exists(g)||ue(),e.updateDroppableIsCombineEnabled({id:g,isCombineEnabled:b}))},a=function(g,b){r&&(t.droppable.exists(g)||ue(),e.updateDroppableScroll({id:g,newScroll:b}))},l=function(g,b){r&&t.droppable.getById(g).callbacks.scroll(b)},u=function(){if(r){i.stop();var g=r.critical.droppable;t.droppable.getAllByType(g.type).forEach(function(b){return b.callbacks.dragStopped()}),r.unsubscribe(),r=null}},c=function(g){r||ue();var b=r.critical.draggable;g.type==="ADDITION"&&XE(t,b,g.value)&&i.add(g.value),g.type==="REMOVAL"&&XE(t,b,g.value)&&i.remove(g.value)},h=function(g){r&&ue();var b=t.draggable.getById(g.draggableId),D=t.droppable.getById(b.descriptor.droppableId),P={draggable:b.descriptor,droppable:D.descriptor},x=t.subscribe(c);return r={critical:P,unsubscribe:x},CW({critical:P,registry:t,scrollOptions:g.scrollOptions})},f={updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:o,scrollDroppable:l,updateDroppableScroll:a,startPublishing:h,stopPublishing:u};return f},pP=function(t,e){return t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP"},PW=function(t){window.scrollBy(t.x,t.y)},RW=Qt(function(t){return op(t).filter(function(e){return!(!e.isEnabled||!e.frame)})}),NW=function(e,r){var i=Ls(RW(r),function(s){return s.frame||ue(),JA(s.frame.pageMarginBox)(e)});return i},DW=function(t){var e=t.center,r=t.destination,i=t.droppables;if(r){var s=i[r];return s.frame?s:null}var o=NW(e,i);return o},ys={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(e){return Math.pow(e,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},MW=function(t,e){var r=t[e.size]*ys.startFromPercentage,i=t[e.size]*ys.maxScrollAtPercentage,s={startScrollingFrom:r,maxScrollValueAt:i};return s},mP=function(t){var e=t.startOfRange,r=t.endOfRange,i=t.current,s=r-e;if(s===0)return 0;var o=i-e,a=o/s;return a},H_=1,LW=function(t,e){if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return ys.maxPixelScroll;if(t===e.startScrollingFrom)return H_;var r=mP({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),i=1-r,s=ys.maxPixelScroll*ys.ease(i);return Math.ceil(s)},QE=ys.durationDampening.accelerateAt,JE=ys.durationDampening.stopDampeningAt,OW=function(t,e){var r=e,i=JE,s=Date.now(),o=s-r;if(o>=JE)return t;if(o<QE)return H_;var a=mP({startOfRange:QE,endOfRange:i,current:o}),l=t*ys.ease(a);return Math.ceil(l)},ZE=function(t){var e=t.distanceToEdge,r=t.thresholds,i=t.dragStartTime,s=t.shouldUseTimeDampening,o=LW(e,r);return o===0?0:s?Math.max(OW(o,i),H_):o},eT=function(t){var e=t.container,r=t.distanceToEdges,i=t.dragStartTime,s=t.axis,o=t.shouldUseTimeDampening,a=MW(e,s),l=r[s.end]<r[s.start];return l?ZE({distanceToEdge:r[s.end],thresholds:a,dragStartTime:i,shouldUseTimeDampening:o}):-1*ZE({distanceToEdge:r[s.start],thresholds:a,dragStartTime:i,shouldUseTimeDampening:o})},jW=function(t){var e=t.container,r=t.subject,i=t.proposedScroll,s=r.height>e.height,o=r.width>e.width;return!o&&!s?i:o&&s?null:{x:o?0:i.x,y:s?0:i.y}},VW=FA(function(t){return t===0?0:t}),gP=function(t){var e=t.dragStartTime,r=t.container,i=t.subject,s=t.center,o=t.shouldUseTimeDampening,a={top:s.y-r.top,right:r.right-s.x,bottom:r.bottom-s.y,left:s.x-r.left},l=eT({container:r,distanceToEdges:a,dragStartTime:e,axis:L_,shouldUseTimeDampening:o}),u=eT({container:r,distanceToEdges:a,dragStartTime:e,axis:WA,shouldUseTimeDampening:o}),c=VW({x:u,y:l});if(vs(c,Jt))return null;var h=jW({container:r,subject:i,proposedScroll:c});return h?vs(h,Jt)?null:h:null},FW=FA(function(t){return t===0?0:t>0?1:-1}),W_=function(){var t=function(r,i){return r<0?r:r>i?r-i:0};return function(e){var r=e.current,i=e.max,s=e.change,o=an(r,s),a={x:t(o.x,i.x),y:t(o.y,i.y)};return vs(a,Jt)?null:a}}(),vP=function(e){var r=e.max,i=e.current,s=e.change,o={x:Math.max(i.x,r.x),y:Math.max(i.y,r.y)},a=FW(s),l=W_({max:o,current:i,change:a});return!l||a.x!==0&&l.x===0||a.y!==0&&l.y===0},q_=function(e,r){return vP({current:e.scroll.current,max:e.scroll.max,change:r})},UW=function(e,r){if(!q_(e,r))return null;var i=e.scroll.max,s=e.scroll.current;return W_({current:s,max:i,change:r})},G_=function(e,r){var i=e.frame;return i?vP({current:i.scroll.current,max:i.scroll.max,change:r}):!1},BW=function(e,r){var i=e.frame;return!i||!G_(e,r)?null:W_({current:i.scroll.current,max:i.scroll.max,change:r})},$W=function(t){var e=t.viewport,r=t.subject,i=t.center,s=t.dragStartTime,o=t.shouldUseTimeDampening,a=gP({dragStartTime:s,container:e.frame,subject:r,center:i,shouldUseTimeDampening:o});return a&&q_(e,a)?a:null},zW=function(t){var e=t.droppable,r=t.subject,i=t.center,s=t.dragStartTime,o=t.shouldUseTimeDampening,a=e.frame;if(!a)return null;var l=gP({dragStartTime:s,container:a.pageMarginBox,subject:r,center:i,shouldUseTimeDampening:o});return l&&G_(e,l)?l:null},tT=function(t){var e=t.state,r=t.dragStartTime,i=t.shouldUseTimeDampening,s=t.scrollWindow,o=t.scrollDroppable,a=e.current.page.borderBoxCenter,l=e.dimensions.draggables[e.critical.draggable.id],u=l.page.marginBox;if(e.isWindowScrollAllowed){var c=e.viewport,h=$W({dragStartTime:r,viewport:c,subject:u,center:a,shouldUseTimeDampening:i});if(h){s(h);return}}var f=DW({center:a,destination:er(e.impact),droppables:e.dimensions.droppables});if(f){var p=zW({dragStartTime:r,droppable:f,subject:u,center:a,shouldUseTimeDampening:i});p&&o(f.descriptor.id,p)}},HW=function(t){var e=t.scrollWindow,r=t.scrollDroppable,i=ju(e),s=ju(r),o=null,a=function(h){o||ue();var f=o,p=f.shouldUseTimeDampening,g=f.dragStartTime;tT({state:h,scrollWindow:i,scrollDroppable:s,dragStartTime:g,shouldUseTimeDampening:p})},l=function(h){o&&ue();var f=Date.now(),p=!1,g=function(){p=!0};tT({state:h,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:g,scrollDroppable:g}),o={dragStartTime:f,shouldUseTimeDampening:p},p&&a(h)},u=function(){o&&(i.cancel(),s.cancel(),o=null)};return{start:l,stop:u,scroll:a}},WW=function(t){var e=t.move,r=t.scrollDroppable,i=t.scrollWindow,s=function(c,h){var f=an(c.current.client.selection,h);e({client:f})},o=function(c,h){if(!G_(c,h))return h;var f=BW(c,h);if(!f)return r(c.descriptor.id,h),null;var p=Qn(h,f);r(c.descriptor.id,p);var g=Qn(h,p);return g},a=function(c,h,f){if(!c||!q_(h,f))return f;var p=UW(h,f);if(!p)return i(f),null;var g=Qn(f,p);i(g);var b=Qn(f,g);return b},l=function(c){var h=c.scrollJumpRequest;if(h){var f=er(c.impact);f||ue();var p=o(c.dimensions.droppables[f],h);if(p){var g=c.viewport,b=a(c.isWindowScrollAllowed,g,p);b&&s(c,b)}}};return l},qW=function(t){var e=t.scrollDroppable,r=t.scrollWindow,i=t.move,s=HW({scrollWindow:r,scrollDroppable:e}),o=WW({move:i,scrollWindow:r,scrollDroppable:e}),a=function(c){if(c.phase==="DRAGGING"){if(c.movementMode==="FLUID"){s.scroll(c);return}c.scrollJumpRequest&&o(c)}},l={scroll:a,start:s.start,stop:s.stop};return l},ja="data-rbd",Va=function(){var t=ja+"-drag-handle";return{base:t,draggableId:t+"-draggable-id",contextId:t+"-context-id"}}(),Ev=function(){var t=ja+"-draggable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),GW=function(){var t=ja+"-droppable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),nT={contextId:ja+"-scroll-container-context-id"},KW=function(e){return function(r){return"["+r+'="'+e+'"]'}},Pl=function(e,r){return e.map(function(i){var s=i.styles[r];return s?i.selector+" { "+s+" }":""}).join(" ")},YW="pointer-events: none;",XW=function(t){var e=KW(t),r=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(Va.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:YW,dropAnimating:l}}}(),i=function(){var l=`
      transition: `+ou.outOfTheWay+`;
    `;return{selector:e(Ev.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),s={selector:e(GW.contextId),styles:{always:"overflow-anchor: none;"}},o={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},a=[i,r,s,o];return{always:Pl(a,"always"),resting:Pl(a,"resting"),dragging:Pl(a,"dragging"),dropAnimating:Pl(a,"dropAnimating"),userCancel:Pl(a,"userCancel")}},tr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?M.useLayoutEffect:M.useEffect,Rm=function(){var e=document.querySelector("head");return e||ue(),e},rT=function(e){var r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.type="text/css",r};function QW(t,e){var r=Je(function(){return XW(t)},[t]),i=M.useRef(null),s=M.useRef(null),o=Te(Qt(function(f){var p=s.current;p||ue(),p.textContent=f}),[]),a=Te(function(f){var p=i.current;p||ue(),p.textContent=f},[]);tr(function(){!i.current&&!s.current||ue();var f=rT(e),p=rT(e);return i.current=f,s.current=p,f.setAttribute(ja+"-always",t),p.setAttribute(ja+"-dynamic",t),Rm().appendChild(f),Rm().appendChild(p),a(r.always),o(r.resting),function(){var g=function(D){var P=D.current;P||ue(),Rm().removeChild(P),D.current=null};g(i),g(s)}},[e,a,o,r.always,r.resting,t]);var l=Te(function(){return o(r.dragging)},[o,r.dragging]),u=Te(function(f){if(f==="DROP"){o(r.dropAnimating);return}o(r.userCancel)},[o,r.dropAnimating,r.userCancel]),c=Te(function(){s.current&&o(r.resting)},[o,r.resting]),h=Je(function(){return{dragging:l,dropping:u,resting:c}},[l,u,c]);return h}var yP=function(t){return t&&t.ownerDocument?t.ownerDocument.defaultView:window};function cp(t){return t instanceof yP(t).HTMLElement}function JW(t,e){var r="["+Va.contextId+'="'+t+'"]',i=UA(document.querySelectorAll(r));if(!i.length)return null;var s=Ls(i,function(o){return o.getAttribute(Va.draggableId)===e});return!s||!cp(s)?null:s}function ZW(t){var e=M.useRef({}),r=M.useRef(null),i=M.useRef(null),s=M.useRef(!1),o=Te(function(p,g){var b={id:p,focus:g};return e.current[p]=b,function(){var P=e.current,x=P[p];x!==b&&delete P[p]}},[]),a=Te(function(p){var g=JW(t,p);g&&g!==document.activeElement&&g.focus()},[t]),l=Te(function(p,g){r.current===p&&(r.current=g)},[]),u=Te(function(){i.current||s.current&&(i.current=requestAnimationFrame(function(){i.current=null;var p=r.current;p&&a(p)}))},[a]),c=Te(function(p){r.current=null;var g=document.activeElement;g&&g.getAttribute(Va.draggableId)===p&&(r.current=p)},[]);tr(function(){return s.current=!0,function(){s.current=!1;var p=i.current;p&&cancelAnimationFrame(p)}},[]);var h=Je(function(){return{register:o,tryRecordFocus:c,tryRestoreFocusRecorded:u,tryShiftRecord:l}},[o,c,u,l]);return h}function e8(){var t={draggables:{},droppables:{}},e=[];function r(f){return e.push(f),function(){var g=e.indexOf(f);g!==-1&&e.splice(g,1)}}function i(f){e.length&&e.forEach(function(p){return p(f)})}function s(f){return t.draggables[f]||null}function o(f){var p=s(f);return p||ue(),p}var a={register:function(p){t.draggables[p.descriptor.id]=p,i({type:"ADDITION",value:p})},update:function(p,g){var b=t.draggables[g.descriptor.id];b&&b.uniqueId===p.uniqueId&&(delete t.draggables[g.descriptor.id],t.draggables[p.descriptor.id]=p)},unregister:function(p){var g=p.descriptor.id,b=s(g);b&&p.uniqueId===b.uniqueId&&(delete t.draggables[g],i({type:"REMOVAL",value:p}))},getById:o,findById:s,exists:function(p){return!!s(p)},getAllByType:function(p){return Kh(t.draggables).filter(function(g){return g.descriptor.type===p})}};function l(f){return t.droppables[f]||null}function u(f){var p=l(f);return p||ue(),p}var c={register:function(p){t.droppables[p.descriptor.id]=p},unregister:function(p){var g=l(p.descriptor.id);g&&p.uniqueId===g.uniqueId&&delete t.droppables[p.descriptor.id]},getById:u,findById:l,exists:function(p){return!!l(p)},getAllByType:function(p){return Kh(t.droppables).filter(function(g){return g.descriptor.type===p})}};function h(){t.draggables={},t.droppables={},e.length=0}return{draggable:a,droppable:c,subscribe:r,clean:h}}function t8(){var t=Je(e8,[]);return M.useEffect(function(){return function(){requestAnimationFrame(t.clean)}},[t]),t}var K_=Ue.createContext(null),Xh=function(){var t=document.body;return t||ue(),t},n8={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},r8=function(e){return"rbd-announcement-"+e};function i8(t){var e=Je(function(){return r8(t)},[t]),r=M.useRef(null);M.useEffect(function(){var o=document.createElement("div");return r.current=o,o.id=e,o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true"),Ie(o.style,n8),Xh().appendChild(o),function(){setTimeout(function(){var u=Xh();u.contains(o)&&u.removeChild(o),o===r.current&&(r.current=null)})}},[e]);var i=Te(function(s){var o=r.current;if(o){o.textContent=s;return}},[]);return i}var s8=0,o8={separator:"::"};function Y_(t,e){return e===void 0&&(e=o8),Je(function(){return""+t+e.separator+s8++},[e.separator,t])}function a8(t){var e=t.contextId,r=t.uniqueId;return"rbd-hidden-text-"+e+"-"+r}function l8(t){var e=t.contextId,r=t.text,i=Y_("hidden-text",{separator:"-"}),s=Je(function(){return a8({contextId:e,uniqueId:i})},[i,e]);return M.useEffect(function(){var a=document.createElement("div");return a.id=s,a.textContent=r,a.style.display="none",Xh().appendChild(a),function(){var u=Xh();u.contains(a)&&u.removeChild(a)}},[s,r]),s}var dp=Ue.createContext(null);function _P(t){var e=M.useRef(t);return M.useEffect(function(){e.current=t}),e}function u8(){var t=null;function e(){return!!t}function r(a){return a===t}function i(a){t&&ue();var l={abandon:a};return t=l,l}function s(){t||ue(),t=null}function o(){t&&(t.abandon(),s())}return{isClaimed:e,isActive:r,claim:i,release:s,tryAbandon:o}}var c8=9,d8=13,X_=27,wP=32,h8=33,f8=34,p8=35,m8=36,g8=37,v8=38,y8=39,_8=40,pd,w8=(pd={},pd[d8]=!0,pd[c8]=!0,pd),bP=function(t){w8[t.keyCode]&&t.preventDefault()},hp=function(){var t="visibilitychange";if(typeof document>"u")return t;var e=[t,"ms"+t,"webkit"+t,"moz"+t,"o"+t],r=Ls(e,function(i){return"on"+i in document});return r||t}(),xP=0,iT=5;function b8(t,e){return Math.abs(e.x-t.x)>=iT||Math.abs(e.y-t.y)>=iT}var sT={type:"IDLE"};function x8(t){var e=t.cancel,r=t.completed,i=t.getPhase,s=t.setPhase;return[{eventName:"mousemove",fn:function(a){var l=a.button,u=a.clientX,c=a.clientY;if(l===xP){var h={x:u,y:c},f=i();if(f.type==="DRAGGING"){a.preventDefault(),f.actions.move(h);return}f.type!=="PENDING"&&ue();var p=f.point;if(b8(p,h)){a.preventDefault();var g=f.actions.fluidLift(h);s({type:"DRAGGING",actions:g})}}}},{eventName:"mouseup",fn:function(a){var l=i();if(l.type!=="DRAGGING"){e();return}a.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(a){i().type==="DRAGGING"&&a.preventDefault(),e()}},{eventName:"keydown",fn:function(a){var l=i();if(l.type==="PENDING"){e();return}if(a.keyCode===X_){a.preventDefault(),e();return}bP(a)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){i().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:function(a){var l=i();if(l.type==="IDLE"&&ue(),l.actions.shouldRespectForcePress()){e();return}a.preventDefault()}},{eventName:hp,fn:e}]}function E8(t){var e=M.useRef(sT),r=M.useRef(gs),i=Je(function(){return{eventName:"mousedown",fn:function(f){if(!f.defaultPrevented&&f.button===xP&&!(f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)){var p=t.findClosestDraggableId(f);if(p){var g=t.tryGetLock(p,a,{sourceEvent:f});if(g){f.preventDefault();var b={x:f.clientX,y:f.clientY};r.current(),c(g,b)}}}}}},[t]),s=Je(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(f){if(!f.defaultPrevented){var p=t.findClosestDraggableId(f);if(p){var g=t.findOptionsForDraggable(p);g&&(g.shouldRespectForcePress||t.canGetLock(p)&&f.preventDefault())}}}}},[t]),o=Te(function(){var f={passive:!1,capture:!0};r.current=fr(window,[s,i],f)},[s,i]),a=Te(function(){var h=e.current;h.type!=="IDLE"&&(e.current=sT,r.current(),o())},[o]),l=Te(function(){var h=e.current;a(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[a]),u=Te(function(){var f={capture:!0,passive:!1},p=x8({cancel:l,completed:a,getPhase:function(){return e.current},setPhase:function(b){e.current=b}});r.current=fr(window,p,f)},[l,a]),c=Te(function(f,p){e.current.type!=="IDLE"&&ue(),e.current={type:"PENDING",point:p,actions:f},u()},[u]);tr(function(){return o(),function(){r.current()}},[o])}var Vo;function T8(){}var S8=(Vo={},Vo[f8]=!0,Vo[h8]=!0,Vo[m8]=!0,Vo[p8]=!0,Vo);function I8(t,e){function r(){e(),t.cancel()}function i(){e(),t.drop()}return[{eventName:"keydown",fn:function(o){if(o.keyCode===X_){o.preventDefault(),r();return}if(o.keyCode===wP){o.preventDefault(),i();return}if(o.keyCode===_8){o.preventDefault(),t.moveDown();return}if(o.keyCode===v8){o.preventDefault(),t.moveUp();return}if(o.keyCode===y8){o.preventDefault(),t.moveRight();return}if(o.keyCode===g8){o.preventDefault(),t.moveLeft();return}if(S8[o.keyCode]){o.preventDefault();return}bP(o)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:hp,fn:r}]}function k8(t){var e=M.useRef(T8),r=Je(function(){return{eventName:"keydown",fn:function(o){if(o.defaultPrevented||o.keyCode!==wP)return;var a=t.findClosestDraggableId(o);if(!a)return;var l=t.tryGetLock(a,h,{sourceEvent:o});if(!l)return;o.preventDefault();var u=!0,c=l.snapLift();e.current();function h(){u||ue(),u=!1,e.current(),i()}e.current=fr(window,I8(c,h),{capture:!0,passive:!1})}}},[t]),i=Te(function(){var o={passive:!1,capture:!0};e.current=fr(window,[r],o)},[r]);tr(function(){return i(),function(){e.current()}},[i])}var Nm={type:"IDLE"},C8=120,A8=.15;function P8(t){var e=t.cancel,r=t.getPhase;return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:function(s){s.preventDefault()}},{eventName:"keydown",fn:function(s){if(r().type!=="DRAGGING"){e();return}s.keyCode===X_&&s.preventDefault(),e()}},{eventName:hp,fn:e}]}function R8(t){var e=t.cancel,r=t.completed,i=t.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(o){var a=i();if(a.type!=="DRAGGING"){e();return}a.hasMoved=!0;var l=o.touches[0],u=l.clientX,c=l.clientY,h={x:u,y:c};o.preventDefault(),a.actions.move(h)}},{eventName:"touchend",fn:function(o){var a=i();if(a.type!=="DRAGGING"){e();return}o.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(o){if(i().type!=="DRAGGING"){e();return}o.preventDefault(),e()}},{eventName:"touchforcechange",fn:function(o){var a=i();a.type==="IDLE"&&ue();var l=o.touches[0];if(l){var u=l.force>=A8;if(u){var c=a.actions.shouldRespectForcePress();if(a.type==="PENDING"){c&&e();return}if(c){if(a.hasMoved){o.preventDefault();return}e();return}o.preventDefault()}}}},{eventName:hp,fn:e}]}function N8(t){var e=M.useRef(Nm),r=M.useRef(gs),i=Te(function(){return e.current},[]),s=Te(function(g){e.current=g},[]),o=Je(function(){return{eventName:"touchstart",fn:function(g){if(!g.defaultPrevented){var b=t.findClosestDraggableId(g);if(b){var D=t.tryGetLock(b,l,{sourceEvent:g});if(D){var P=g.touches[0],x=P.clientX,E=P.clientY,_={x,y:E};r.current(),f(D,_)}}}}}},[t]),a=Te(function(){var g={capture:!0,passive:!1};r.current=fr(window,[o],g)},[o]),l=Te(function(){var p=e.current;p.type!=="IDLE"&&(p.type==="PENDING"&&clearTimeout(p.longPressTimerId),s(Nm),r.current(),a())},[a,s]),u=Te(function(){var p=e.current;l(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[l]),c=Te(function(){var g={capture:!0,passive:!1},b={cancel:u,completed:l,getPhase:i},D=fr(window,R8(b),g),P=fr(window,P8(b),g);r.current=function(){D(),P()}},[u,i,l]),h=Te(function(){var g=i();g.type!=="PENDING"&&ue();var b=g.actions.fluidLift(g.point);s({type:"DRAGGING",actions:b,hasMoved:!1})},[i,s]),f=Te(function(g,b){i().type!=="IDLE"&&ue();var D=setTimeout(h,C8);s({type:"PENDING",point:b,actions:g,longPressTimerId:D}),c()},[c,i,s,h]);tr(function(){return a(),function(){r.current();var b=i();b.type==="PENDING"&&(clearTimeout(b.longPressTimerId),s(Nm))}},[i,a,s]),tr(function(){var g=fr(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return g},[])}var D8={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function EP(t,e){if(e==null)return!1;var r=!!D8[e.tagName.toLowerCase()];if(r)return!0;var i=e.getAttribute("contenteditable");return i==="true"||i===""?!0:e===t?!1:EP(t,e.parentElement)}function M8(t,e){var r=e.target;return cp(r)?EP(t,r):!1}var L8=function(t){return Dr(t.getBoundingClientRect()).center};function O8(t){return t instanceof yP(t).Element}var j8=function(){var t="matches";if(typeof document>"u")return t;var e=[t,"msMatchesSelector","webkitMatchesSelector"],r=Ls(e,function(i){return i in Element.prototype});return r||t}();function TP(t,e){return t==null?null:t[j8](e)?t:TP(t.parentElement,e)}function V8(t,e){return t.closest?t.closest(e):TP(t,e)}function F8(t){return"["+Va.contextId+'="'+t+'"]'}function U8(t,e){var r=e.target;if(!O8(r))return null;var i=F8(t),s=V8(r,i);return!s||!cp(s)?null:s}function B8(t,e){var r=U8(t,e);return r?r.getAttribute(Va.draggableId):null}function $8(t,e){var r="["+Ev.contextId+'="'+t+'"]',i=UA(document.querySelectorAll(r)),s=Ls(i,function(o){return o.getAttribute(Ev.id)===e});return!s||!cp(s)?null:s}function z8(t){t.preventDefault()}function md(t){var e=t.expected,r=t.phase,i=t.isLockActive;return t.shouldWarn,!(!i()||e!==r)}function SP(t){var e=t.lockAPI,r=t.store,i=t.registry,s=t.draggableId;if(e.isClaimed())return!1;var o=i.draggable.findById(s);return!(!o||!o.options.isEnabled||!pP(r.getState(),s))}function H8(t){var e=t.lockAPI,r=t.contextId,i=t.store,s=t.registry,o=t.draggableId,a=t.forceSensorStop,l=t.sourceEvent,u=SP({lockAPI:e,store:i,registry:s,draggableId:o});if(!u)return null;var c=s.draggable.getById(o),h=$8(r,c.descriptor.id);if(!h||l&&!c.options.canDragInteractiveElements&&M8(h,l))return null;var f=e.claim(a||gs),p="PRE_DRAG";function g(){return c.options.shouldRespectForcePress}function b(){return e.isActive(f)}function D(V,C){md({expected:V,phase:p,isLockActive:b,shouldWarn:!0})&&i.dispatch(C())}var P=D.bind(null,"DRAGGING");function x(V){function C(){e.release(),p="COMPLETED"}p!=="PRE_DRAG"&&(C(),p!=="PRE_DRAG"&&ue()),i.dispatch(jH(V.liftActionArgs)),p="DRAGGING";function I(y,w){if(w===void 0&&(w={shouldBlockNextClick:!1}),V.cleanup(),w.shouldBlockNextClick){var S=fr(window,[{eventName:"click",fn:z8,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(S)}C(),i.dispatch(aP({reason:y}))}return Ie({isActive:function(){return md({expected:"DRAGGING",phase:p,isLockActive:b,shouldWarn:!1})},shouldRespectForcePress:g,drop:function(w){return I("DROP",w)},cancel:function(w){return I("CANCEL",w)}},V.actions)}function E(V){var C=ju(function(y){P(function(){return oP({client:y})})}),I=x({liftActionArgs:{id:o,clientSelection:V,movementMode:"FLUID"},cleanup:function(){return C.cancel()},actions:{move:C}});return Ie({},I,{move:C})}function _(){var V={moveUp:function(){return P(qH)},moveRight:function(){return P(KH)},moveDown:function(){return P(GH)},moveLeft:function(){return P(YH)}};return x({liftActionArgs:{id:o,clientSelection:L8(h),movementMode:"SNAP"},cleanup:gs,actions:V})}function R(){var V=md({expected:"PRE_DRAG",phase:p,isLockActive:b,shouldWarn:!0});V&&e.release()}var j={isActive:function(){return md({expected:"PRE_DRAG",phase:p,isLockActive:b,shouldWarn:!1})},shouldRespectForcePress:g,fluidLift:E,snapLift:_,abort:R};return j}var W8=[E8,k8,N8];function q8(t){var e=t.contextId,r=t.store,i=t.registry,s=t.customSensors,o=t.enableDefaultSensors,a=[].concat(o?W8:[],s||[]),l=M.useState(function(){return u8()})[0],u=Te(function(E,_){E.isDragging&&!_.isDragging&&l.tryAbandon()},[l]);tr(function(){var E=r.getState(),_=r.subscribe(function(){var R=r.getState();u(E,R),E=R});return _},[l,r,u]),tr(function(){return l.tryAbandon},[l.tryAbandon]);for(var c=Te(function(x){return SP({lockAPI:l,registry:i,store:r,draggableId:x})},[l,i,r]),h=Te(function(x,E,_){return H8({lockAPI:l,registry:i,contextId:e,store:r,draggableId:x,forceSensorStop:E,sourceEvent:_&&_.sourceEvent?_.sourceEvent:null})},[e,l,i,r]),f=Te(function(x){return B8(e,x)},[e]),p=Te(function(x){var E=i.draggable.findById(x);return E?E.options:null},[i.draggable]),g=Te(function(){l.isClaimed()&&(l.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(U_()))},[l,r]),b=Te(l.isClaimed,[l]),D=Je(function(){return{canGetLock:c,tryGetLock:h,findClosestDraggableId:f,findOptionsForDraggable:p,tryReleaseLock:g,isLockClaimed:b}},[c,h,f,p,g,b]),P=0;P<a.length;P++)a[P](D)}var G8=function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}};function Rl(t){return t.current||ue(),t.current}function K8(t){var e=t.contextId,r=t.setCallbacks,i=t.sensors,s=t.nonce,o=t.dragHandleUsageInstructions,a=M.useRef(null),l=_P(t),u=Te(function(){return G8(l.current)},[l]),c=i8(e),h=l8({contextId:e,text:o}),f=QW(e,s),p=Te(function(y){Rl(a).dispatch(y)},[]),g=Je(function(){return CE({publishWhileDragging:FH,updateDroppableScroll:BH,updateDroppableIsEnabled:$H,updateDroppableIsCombineEnabled:zH,collectionStarting:UH},p)},[p]),b=t8(),D=Je(function(){return AW(b,g)},[b,g]),P=Je(function(){return qW(Ie({scrollWindow:PW,scrollDroppable:D.scrollDroppable},CE({move:oP},p)))},[D.scrollDroppable,p]),x=ZW(e),E=Je(function(){return SW({announce:c,autoScroller:P,dimensionMarshal:D,focusMarshal:x,getResponders:u,styleMarshal:f})},[c,P,D,x,u,f]);a.current=E;var _=Te(function(){var y=Rl(a),w=y.getState();w.phase!=="IDLE"&&y.dispatch(U_())},[]),R=Te(function(){var y=Rl(a).getState();return y.isDragging||y.phase==="DROP_ANIMATING"},[]),j=Je(function(){return{isDragging:R,tryAbort:_}},[R,_]);r(j);var V=Te(function(y){return pP(Rl(a).getState(),y)},[]),C=Te(function(){return Ks(Rl(a).getState())},[]),I=Je(function(){return{marshal:D,focus:x,contextId:e,canLift:V,isMovementAllowed:C,dragHandleUsageInstructionsId:h,registry:b}},[e,D,h,x,V,C,b]);return q8({contextId:e,store:E,registry:b,customSensors:i,enableDefaultSensors:t.enableDefaultSensors!==!1}),M.useEffect(function(){return _},[_]),Ue.createElement(dp.Provider,{value:I},Ue.createElement(gz,{context:K_,store:E},t.children))}var Y8=0;function X8(){return Je(function(){return""+Y8++},[])}function Q8(t){var e=X8(),r=t.dragHandleUsageInstructions||Hd.dragHandleUsageInstructions;return Ue.createElement(k9,null,function(i){return Ue.createElement(K8,{nonce:t.nonce,contextId:e,setCallbacks:i,dragHandleUsageInstructions:r,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd},t.children)})}var IP=function(e){return function(r){return e===r}},J8=IP("scroll"),Z8=IP("auto"),oT=function(e,r){return r(e.overflowX)||r(e.overflowY)},eq=function(e){var r=window.getComputedStyle(e),i={overflowX:r.overflowX,overflowY:r.overflowY};return oT(i,J8)||oT(i,Z8)},tq=function(){return!1},nq=function t(e){return e==null?null:e===document.body?tq()?e:null:e===document.documentElement?null:eq(e)?e:t(e.parentElement)},Tv=function(t){return{x:t.scrollLeft,y:t.scrollTop}},rq=function t(e){if(!e)return!1;var r=window.getComputedStyle(e);return r.position==="fixed"?!0:t(e.parentElement)},iq=function(t){var e=nq(t),r=rq(t);return{closestScrollable:e,isFixedOnPage:r}},sq=function(t){var e=t.descriptor,r=t.isEnabled,i=t.isCombineEnabled,s=t.isFixedOnPage,o=t.direction,a=t.client,l=t.page,u=t.closest,c=function(){if(!u)return null;var g=u.scrollSize,b=u.client,D=dP({scrollHeight:g.scrollHeight,scrollWidth:g.scrollWidth,height:b.paddingBox.height,width:b.paddingBox.width});return{pageMarginBox:u.page.marginBox,frameClient:b,scrollSize:g,shouldClipSubject:u.shouldClipSubject,scroll:{initial:u.scroll,current:u.scroll,max:D,diff:{value:Jt,displacement:Jt}}}}(),h=o==="vertical"?L_:WA,f=Oa({page:l,withPlaceholder:null,axis:h,frame:c}),p={descriptor:e,isCombineEnabled:i,isFixedOnPage:s,axis:h,isEnabled:r,client:a,page:l,frame:c,subject:f};return p},oq=function(e,r){var i=LA(e);if(!r||e!==r)return i;var s=i.paddingBox.top-r.scrollTop,o=i.paddingBox.left-r.scrollLeft,a=s+r.scrollHeight,l=o+r.scrollWidth,u={top:s,right:l,bottom:a,left:o},c=P_(u,i.border),h=R_({borderBox:c,margin:i.margin,border:i.border,padding:i.padding});return h},aq=function(t){var e=t.ref,r=t.descriptor,i=t.env,s=t.windowScroll,o=t.direction,a=t.isDropDisabled,l=t.isCombineEnabled,u=t.shouldClipSubject,c=i.closestScrollable,h=oq(e,c),f=Wh(h,s),p=function(){if(!c)return null;var b=LA(c),D={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:b,page:Wh(b,s),scroll:Tv(c),scrollSize:D,shouldClipSubject:u}}(),g=sq({descriptor:r,isEnabled:!a,isCombineEnabled:l,isFixedOnPage:i.isFixedOnPage,direction:o,client:h,page:f,closest:p});return g},lq={passive:!1},uq={passive:!0},aT=function(t){return t.shouldPublishImmediately?lq:uq};function Qh(t){var e=M.useContext(t);return e||ue(),e}var gd=function(e){return e&&e.env.closestScrollable||null};function cq(t){var e=M.useRef(null),r=Qh(dp),i=Y_("droppable"),s=r.registry,o=r.marshal,a=_P(t),l=Je(function(){return{id:t.droppableId,type:t.type,mode:t.mode}},[t.droppableId,t.mode,t.type]),u=M.useRef(l),c=Je(function(){return Qt(function(R,j){e.current||ue();var V={x:R,y:j};o.updateDroppableScroll(l.id,V)})},[l.id,o]),h=Te(function(){var R=e.current;return!R||!R.env.closestScrollable?Jt:Tv(R.env.closestScrollable)},[]),f=Te(function(){var R=h();c(R.x,R.y)},[h,c]),p=Je(function(){return ju(f)},[f]),g=Te(function(){var R=e.current,j=gd(R);R&&j||ue();var V=R.scrollOptions;if(V.shouldPublishImmediately){f();return}p()},[p,f]),b=Te(function(R,j){e.current&&ue();var V=a.current,C=V.getDroppableRef();C||ue();var I=iq(C),y={ref:C,descriptor:l,env:I,scrollOptions:j};e.current=y;var w=aq({ref:C,descriptor:l,env:I,windowScroll:R,direction:V.direction,isDropDisabled:V.isDropDisabled,isCombineEnabled:V.isCombineEnabled,shouldClipSubject:!V.ignoreContainerClipping}),S=I.closestScrollable;return S&&(S.setAttribute(nT.contextId,r.contextId),S.addEventListener("scroll",g,aT(y.scrollOptions))),w},[r.contextId,l,g,a]),D=Te(function(){var R=e.current,j=gd(R);return R&&j||ue(),Tv(j)},[]),P=Te(function(){var R=e.current;R||ue();var j=gd(R);e.current=null,j&&(p.cancel(),j.removeAttribute(nT.contextId),j.removeEventListener("scroll",g,aT(R.scrollOptions)))},[g,p]),x=Te(function(R){var j=e.current;j||ue();var V=gd(j);V||ue(),V.scrollTop+=R.y,V.scrollLeft+=R.x},[]),E=Je(function(){return{getDimensionAndWatchScroll:b,getScrollWhileDragging:D,dragStopped:P,scroll:x}},[P,b,D,x]),_=Je(function(){return{uniqueId:i,descriptor:l,callbacks:E}},[E,l,i]);tr(function(){return u.current=_.descriptor,s.droppable.register(_),function(){e.current&&P(),s.droppable.unregister(_)}},[E,l,P,_,o,s.droppable]),tr(function(){e.current&&o.updateDroppableIsEnabled(u.current.id,!t.isDropDisabled)},[t.isDropDisabled,o]),tr(function(){e.current&&o.updateDroppableIsCombineEnabled(u.current.id,t.isCombineEnabled)},[t.isCombineEnabled,o])}function Dm(){}var lT={width:0,height:0,margin:D9},dq=function(e){var r=e.isAnimatingOpenOnMount,i=e.placeholder,s=e.animate;return r||s==="close"?lT:{height:i.client.borderBox.height,width:i.client.borderBox.width,margin:i.client.margin}},hq=function(e){var r=e.isAnimatingOpenOnMount,i=e.placeholder,s=e.animate,o=dq({isAnimatingOpenOnMount:r,placeholder:i,animate:s});return{display:i.display,boxSizing:"border-box",width:o.width,height:o.height,marginTop:o.margin.top,marginRight:o.margin.right,marginBottom:o.margin.bottom,marginLeft:o.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:s!=="none"?ou.placeholder:null}};function fq(t){var e=M.useRef(null),r=Te(function(){e.current&&(clearTimeout(e.current),e.current=null)},[]),i=t.animate,s=t.onTransitionEnd,o=t.onClose,a=t.contextId,l=M.useState(t.animate==="open"),u=l[0],c=l[1];M.useEffect(function(){return u?i!=="open"?(r(),c(!1),Dm):e.current?Dm:(e.current=setTimeout(function(){e.current=null,c(!1)}),r):Dm},[i,u,r]);var h=Te(function(p){p.propertyName==="height"&&(s(),i==="close"&&o())},[i,o,s]),f=hq({isAnimatingOpenOnMount:u,animate:t.animate,placeholder:t.placeholder});return Ue.createElement(t.placeholder.tagName,{style:f,"data-rbd-placeholder-context-id":a,onTransitionEnd:h,ref:t.innerRef})}var pq=Ue.memo(fq),Q_=Ue.createContext(null),mq=function(t){pA(e,t);function e(){for(var i,s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];return i=t.call.apply(t,[this].concat(o))||this,i.state={isVisible:!!i.props.on,data:i.props.on,animate:i.props.shouldAnimate&&i.props.on?"open":"none"},i.onClose=function(){i.state.animate==="close"&&i.setState({isVisible:!1})},i}e.getDerivedStateFromProps=function(s,o){return s.shouldAnimate?s.on?{isVisible:!0,data:s.on,animate:"open"}:o.isVisible?{isVisible:!0,data:o.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!s.on,data:s.on,animate:"none"}};var r=e.prototype;return r.render=function(){if(!this.state.isVisible)return null;var s={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(s)},e}(Ue.PureComponent),uT={dragging:5e3,dropAnimating:4500},gq=function(e,r){return r?ou.drop(r.duration):e?ou.snap:ou.fluid},vq=function(e,r){return e?r?Bu.opacity.drop:Bu.opacity.combining:null},yq=function(e){return e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP"};function _q(t){var e=t.dimension,r=e.client,i=t.offset,s=t.combineWith,o=t.dropping,a=!!s,l=yq(t),u=!!o,c=u?bv.drop(i,a):bv.moveTo(i),h={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:gq(l,o),transform:c,opacity:vq(a,u),zIndex:u?uT.dropAnimating:uT.dragging,pointerEvents:"none"};return h}function wq(t){return{transform:bv.moveTo(t.offset),transition:t.shouldAnimateDisplacement?null:"none"}}function bq(t){return t.type==="DRAGGING"?_q(t):wq(t)}function xq(t,e,r){r===void 0&&(r=Jt);var i=window.getComputedStyle(e),s=e.getBoundingClientRect(),o=MA(s,i),a=Wh(o,r),l={client:o,tagName:e.tagName.toLowerCase(),display:i.display},u={x:o.marginBox.width,y:o.marginBox.height},c={descriptor:t,placeholder:l,displaceBy:u,client:o,page:a};return c}function Eq(t){var e=Y_("draggable"),r=t.descriptor,i=t.registry,s=t.getDraggableRef,o=t.canDragInteractiveElements,a=t.shouldRespectForcePress,l=t.isEnabled,u=Je(function(){return{canDragInteractiveElements:o,shouldRespectForcePress:a,isEnabled:l}},[o,l,a]),c=Te(function(g){var b=s();return b||ue(),xq(r,b,g)},[r,s]),h=Je(function(){return{uniqueId:e,descriptor:r,options:u,getDimension:c}},[r,c,u,e]),f=M.useRef(h),p=M.useRef(!0);tr(function(){return i.draggable.register(f.current),function(){return i.draggable.unregister(f.current)}},[i.draggable]),tr(function(){if(p.current){p.current=!1;return}var g=f.current;f.current=h,i.draggable.update(h,g)},[h,i.draggable])}function Tq(t){t.preventDefault()}function Sq(t){var e=M.useRef(null),r=Te(function(y){e.current=y},[]),i=Te(function(){return e.current},[]),s=Qh(dp),o=s.contextId,a=s.dragHandleUsageInstructionsId,l=s.registry,u=Qh(Q_),c=u.type,h=u.droppableId,f=Je(function(){return{id:t.draggableId,index:t.index,type:c,droppableId:h}},[t.draggableId,t.index,c,h]),p=t.children,g=t.draggableId,b=t.isEnabled,D=t.shouldRespectForcePress,P=t.canDragInteractiveElements,x=t.isClone,E=t.mapped,_=t.dropAnimationFinished;if(!x){var R=Je(function(){return{descriptor:f,registry:l,getDraggableRef:i,canDragInteractiveElements:P,shouldRespectForcePress:D,isEnabled:b}},[f,l,i,P,D,b]);Eq(R)}var j=Je(function(){return b?{tabIndex:0,role:"button","aria-describedby":a,"data-rbd-drag-handle-draggable-id":g,"data-rbd-drag-handle-context-id":o,draggable:!1,onDragStart:Tq}:null},[o,a,g,b]),V=Te(function(y){E.type==="DRAGGING"&&E.dropping&&y.propertyName==="transform"&&_()},[_,E]),C=Je(function(){var y=bq(E),w=E.type==="DRAGGING"&&E.dropping?V:null,S={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":o,"data-rbd-draggable-id":g,style:y,onTransitionEnd:w},dragHandleProps:j};return S},[o,j,g,E,V,r]),I=Je(function(){return{draggableId:f.id,type:f.type,source:{index:f.index,droppableId:f.droppableId}}},[f.droppableId,f.id,f.index,f.type]);return p(C,E.snapshot,I)}var kP=function(t,e){return t===e},CP=function(t){var e=t.combine,r=t.destination;return r?r.droppableId:e?e.droppableId:null},Iq=function(e){return e.combine?e.combine.draggableId:null},kq=function(e){return e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null};function Cq(){var t=Qt(function(s,o){return{x:s,y:o}}),e=Qt(function(s,o,a,l,u){return{isDragging:!0,isClone:o,isDropAnimating:!!u,dropAnimation:u,mode:s,draggingOver:a,combineWith:l,combineTargetFor:null}}),r=Qt(function(s,o,a,l,u,c,h){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:u,combineWith:c,mode:o,offset:s,dimension:a,forceShouldAnimate:h,snapshot:e(o,l,u,c,null)}}}),i=function(o,a){if(o.isDragging){if(o.critical.draggable.id!==a.draggableId)return null;var l=o.current.client.offset,u=o.dimensions.draggables[a.draggableId],c=er(o.impact),h=kq(o.impact),f=o.forceShouldAnimate;return r(t(l.x,l.y),o.movementMode,u,a.isClone,c,h,f)}if(o.phase==="DROP_ANIMATING"){var p=o.completed;if(p.result.draggableId!==a.draggableId)return null;var g=a.isClone,b=o.dimensions.draggables[a.draggableId],D=p.result,P=D.mode,x=CP(D),E=Iq(D),_=o.dropDuration,R={duration:_,curve:$_.drop,moveTo:o.newHomeClientOffset,opacity:E?Bu.opacity.drop:null,scale:E?Bu.scale.drop:null};return{mapped:{type:"DRAGGING",offset:o.newHomeClientOffset,dimension:b,dropping:R,draggingOver:x,combineWith:E,mode:P,forceShouldAnimate:null,snapshot:e(P,g,x,E,R)}}}return null};return i}function AP(t){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}var Aq={mapped:{type:"SECONDARY",offset:Jt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:AP(null)}};function Pq(){var t=Qt(function(a,l){return{x:a,y:l}}),e=Qt(AP),r=Qt(function(a,l,u){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:a,combineTargetFor:l,shouldAnimateDisplacement:u,snapshot:e(l)}}}),i=function(l){return l?r(Jt,l,!0):null},s=function(l,u,c,h){var f=c.displaced.visible[l],p=!!(h.inVirtualList&&h.effected[l]),g=ap(c),b=g&&g.draggableId===l?u:null;if(!f){if(!p)return i(b);if(c.displaced.invisible[l])return null;var D=el(h.displacedBy.point),P=t(D.x,D.y);return r(P,b,!0)}if(p)return i(b);var x=c.displacedBy.point,E=t(x.x,x.y);return r(E,b,f.shouldAnimate)},o=function(l,u){if(l.isDragging)return l.critical.draggable.id===u.draggableId?null:s(u.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var c=l.completed;return c.result.draggableId===u.draggableId?null:s(u.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null};return o}var Rq=function(){var e=Cq(),r=Pq(),i=function(o,a){return e(o,a)||r(o,a)||Aq};return i},Nq={dropAnimationFinished:lP},Dq=NA(Rq,Nq,null,{context:K_,pure:!0,areStatePropsEqual:kP})(Sq);function PP(t){var e=Qh(Q_),r=e.isUsingCloneFor;return r===t.draggableId&&!t.isClone?null:Ue.createElement(Dq,t)}function Mq(t){var e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,r=!!t.disableInteractiveElementBlocking,i=!!t.shouldRespectForcePress;return Ue.createElement(PP,Ie({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:r,shouldRespectForcePress:i}))}function Lq(t){var e=M.useContext(dp);e||ue();var r=e.contextId,i=e.isMovementAllowed,s=M.useRef(null),o=M.useRef(null),a=t.children,l=t.droppableId,u=t.type,c=t.mode,h=t.direction,f=t.ignoreContainerClipping,p=t.isDropDisabled,g=t.isCombineEnabled,b=t.snapshot,D=t.useClone,P=t.updateViewportMaxScroll,x=t.getContainerForClone,E=Te(function(){return s.current},[]),_=Te(function(S){s.current=S},[]);Te(function(){return o.current},[]);var R=Te(function(S){o.current=S},[]),j=Te(function(){i()&&P({maxScroll:fP()})},[i,P]);cq({droppableId:l,type:u,mode:c,direction:h,isDropDisabled:p,isCombineEnabled:g,ignoreContainerClipping:f,getDroppableRef:E});var V=Ue.createElement(mq,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},function(S){var L=S.onClose,N=S.data,Y=S.animate;return Ue.createElement(pq,{placeholder:N,onClose:L,innerRef:R,animate:Y,contextId:r,onTransitionEnd:j})}),C=Je(function(){return{innerRef:_,placeholder:V,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":r}}},[r,l,V,_]),I=D?D.dragging.draggableId:null,y=Je(function(){return{droppableId:l,type:u,isUsingCloneFor:I}},[l,I,u]);function w(){if(!D)return null;var S=D.dragging,L=D.render,N=Ue.createElement(PP,{draggableId:S.draggableId,index:S.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(Y,Z){return L(Y,Z,S)});return bD.createPortal(N,x())}return Ue.createElement(Q_.Provider,{value:y},a(C,b),w())}var Mm=function(e,r){return e===r.droppable.type},cT=function(e,r){return r.draggables[e.draggable.id]},Oq=function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=Ie({},e,{shouldAnimatePlaceholder:!1}),i=Qt(function(a){return{draggableId:a.id,type:a.type,source:{index:a.index,droppableId:a.droppableId}}}),s=Qt(function(a,l,u,c,h,f){var p=h.descriptor.id,g=h.descriptor.droppableId===a;if(g){var b=f?{render:f,dragging:i(h.descriptor)}:null,D={isDraggingOver:u,draggingOverWith:u?p:null,draggingFromThisWith:p,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!1,snapshot:D,useClone:b}}if(!l)return r;if(!c)return e;var P={isDraggingOver:u,draggingOverWith:p,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!0,snapshot:P,useClone:null}}),o=function(l,u){var c=u.droppableId,h=u.type,f=!u.isDropDisabled,p=u.renderClone;if(l.isDragging){var g=l.critical;if(!Mm(h,g))return r;var b=cT(g,l.dimensions),D=er(l.impact)===c;return s(c,f,D,D,b,p)}if(l.phase==="DROP_ANIMATING"){var P=l.completed;if(!Mm(h,P.critical))return r;var x=cT(P.critical,l.dimensions);return s(c,f,CP(P.result)===c,er(P.impact)===c,x,p)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var E=l.completed;if(!Mm(h,E.critical))return r;var _=er(E.impact)===c,R=!!(E.impact.at&&E.impact.at.type==="COMBINE"),j=E.critical.droppable.id===c;return _?R?e:r:j?e:r}return r};return o},jq={updateViewportMaxScroll:WH};function Vq(){return document.body||ue(),document.body}var Fq={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Vq},RP=NA(Oq,jq,null,{context:K_,pure:!0,areStatePropsEqual:kP})(Lq);RP.defaultProps=Fq;function Uq(){const[t]=Cy(),[e,r]=M.useState([]),[i,s]=M.useState(0),[o,a]=M.useState(!0),[l,u]=M.useState(null),[c,h]=M.useState(!1),[f,p]=M.useState(!1),[g,b]=M.useState("");M.useRef(null),M.useRef(null),M.useEffect(()=>{const R=t.get("keywords");R&&searchAndBuildPlaylist(R)},[t]);const D=R=>{const j=R==null?void 0:R.match(/embed\/([a-zA-Z0-9_-]+)/);return j?j[1]:null},P=R=>{if(!R.destination)return;const j=Array.from(e),[V]=j.splice(R.source.index,1);j.splice(R.destination.index,0,V);const C=j.map((I,y)=>({...I,playlistOrder:y}));r(C),x(C)},x=async R=>{try{const j=t.get("keywords"),V=Pa(Rt,"keywordPlaylists",j);await tv(V,{items:R.map(C=>({documentName:C.documentName,playlistOrder:C.playlistOrder}))})}catch(j){console.error("Error saving playlist order:",j)}},E=()=>{p(!0),b(document.getElementById("overallSummaryContent").innerText)},_=async()=>{try{const R=t.get("keywords"),j=Pa(Rt,"keywordSummaries",R);await tv(j,{summary:g}),document.getElementById("overallSummaryContent").innerText=g,p(!1)}catch(R){console.error("Error saving description:",R)}};return m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[m.jsx("div",{className:"lg:col-span-1",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Playlist Info"}),m.jsxs("p",{id:"totalDuration",children:["Total Duration: ",formatTime(getTotalPlaylistDuration(e))]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("h3",{className:"text-xl font-semibold",children:"Playlist Summary"}),m.jsx("button",{onClick:E,className:"text-blue-500 hover:text-blue-700",children:" Edit"})]}),f?m.jsxs("div",{className:"space-y-2",children:[m.jsx("textarea",{value:g,onChange:R=>b(R.target.value),className:"w-full h-40 p-2 border rounded"}),m.jsxs("div",{className:"flex justify-end space-x-2",children:[m.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),m.jsx("button",{onClick:_,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"})]})]}):m.jsx("p",{id:"overallSummaryContent",className:"text-gray-700"})]})]})}),m.jsx("div",{className:"lg:col-span-2",children:m.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:currentVideo&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("h2",{className:"text-2xl font-bold",children:currentVideo.name}),m.jsx("p",{className:"text-gray-600",children:currentVideo.role})]}),m.jsx("div",{id:"player",className:"w-full aspect-video mb-4"}),m.jsx(Q8,{onDragEnd:P,children:m.jsx(RP,{droppableId:"timeline",direction:"horizontal",children:R=>m.jsx("div",{ref:R.innerRef,...R.droppableProps,className:"relative h-20 bg-gray-100 rounded mb-4",children:m.jsxs("div",{className:"absolute inset-0 flex",children:[e.map((j,V)=>m.jsx(Mq,{draggableId:`${j.documentName}-${V}`,index:V,children:(C,I)=>m.jsx("div",{ref:C.innerRef,...C.draggableProps,...C.dragHandleProps,className:`relative h-full cursor-move transition-colors
                                    ${V===i?"bg-blue-500":"bg-gray-300"}
                                    ${I.isDragging?"ring-2 ring-blue-400":""}`,style:{...C.draggableProps.style,width:`${NP(j)/Bq(e)*100}%`},children:m.jsx("img",{src:`https://img.youtube.com/vi/${D(j.videoEmbedLink)}/default.jpg`,alt:"Thumbnail",className:"absolute inset-0 w-full h-full object-cover opacity-50"})})},`${j.documentName}-${V}`)),R.placeholder]})})})}),m.jsxs("div",{className:"flex justify-center space-x-4",children:[m.jsx("button",{onClick:handleSkipPrevious,disabled:i===0,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:m.jsx("span",{className:"material-icons",children:"skip_previous"})}),m.jsx("button",{onClick:handlePlayPause,className:"p-2 rounded-full bg-blue-500 hover:bg-blue-600 text-white",children:m.jsx("span",{id:"playPauseIcon",className:"material-icons",children:"pause"})}),m.jsx("button",{onClick:handleSkipNext,disabled:i===e.length-1,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:m.jsx("span",{className:"material-icons",children:"skip_next"})})]}),m.jsxs("div",{className:"mt-6",children:[m.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Summary"}),m.jsx("p",{className:"text-gray-700",children:currentVideo.summary})]})]})})})]})})}function NP(t){const e=convertTimestampToSeconds(extractStartTimestamp(t.timestamp));return convertTimestampToSeconds(extractStartTimestamp(t.timestamp.split(" - ")[1]))-e}function Bq(t){return t.reduce((e,r)=>e+NP(r),0)}function $q(){const[t,e]=M.useState(!0),[r,i]=M.useState(null),[s,o]=M.useState([]),[a,l]=M.useState(null),[u,c]=M.useState(""),h=Fr();M.useEffect(()=>{f()},[]);const f=async()=>{try{e(!0);const _={},R=await xn(Yt(Rt,"interviewSummaries"));for(const V of R.docs){const C=V.id,I=Yt(Rt,"interviewSummaries",C,"subSummaries");(await xn(I)).forEach(w=>{const S=w.data();S.keywords&&S.keywords.split(",").map(N=>N.trim().toLowerCase()).forEach(N=>{_[N]||(_[N]={count:0,summaries:[]}),_[N].count++,_[N].summaries.push(S)})})}const j=Object.entries(_).filter(([V,C])=>C.count>1).map(([V,C])=>{let I=0;return C.summaries.forEach(y=>{if(y.timestamp&&y.timestamp.includes(" - ")){const w=p(y.timestamp),S=p(y.timestamp.split(" - ")[1]);I+=Math.max(0,g(S)-g(w))}}),{keyword:V,count:C.count,totalLengthSeconds:I,summaries:C.summaries}}).sort((V,C)=>C.count-V.count);o(j),e(!1)}catch(_){console.error("Error fetching keywords:",_),i("Failed to load keyword data"),e(!1)}},p=_=>{const R=_.match(/(?:\[)?(\d{1,2}:\d{2}(?::\d{2})?)/);return R?R[1]:"00:00"},g=_=>{const R=_.split(":").map(Number);return R.length===2?R[0]*60+R[1]:R.length===3?R[0]*3600+R[1]*60+R[2]:0},b=_=>{const R=Math.floor(_/3600),j=Math.floor(_%3600/60),V=_%60;return R>0?`${R}:${j.toString().padStart(2,"0")}:${V.toString().padStart(2,"0")}`:`${j}:${V.toString().padStart(2,"0")}`},D=_=>{l(a===_?null:_)},P=_=>{h(`/playlist-builder?keywords=${encodeURIComponent(_)}`)},x=_=>{h(`/playlist-editor?keywords=${encodeURIComponent(_)}`)},E=u?s.filter(_=>_.keyword.toLowerCase().includes(u.toLowerCase())):s;return t?m.jsxs("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:[m.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),m.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):r?m.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:m.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg shadow-sm",children:r})}):m.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Keyword Directory"}),m.jsx("p",{className:"text-base text-gray-600 max-w-3xl leading-relaxed",children:"Browse all keywords from the interview collection. Keywords with multiple clips are shown. Click on any keyword to see details, or create a custom playlist."})]}),m.jsx("div",{className:"mb-6",children:m.jsxs("div",{className:"max-w-md",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter Keywords"}),m.jsx("input",{type:"text",placeholder:"Type to filter...",value:u,onChange:_=>c(_.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})}),m.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"flex flex-col items-center p-4 bg-blue-50 rounded-lg",children:[m.jsx("div",{className:"text-2xl font-bold text-blue-800 mb-2",children:s.length}),m.jsx("div",{className:"text-sm text-gray-500",children:"Total Keywords"})]}),m.jsxs("div",{className:"flex flex-col items-center p-4 bg-green-50 rounded-lg",children:[m.jsx("div",{className:"text-2xl font-bold text-green-800 mb-2",children:s.reduce((_,R)=>_+R.count,0)}),m.jsx("div",{className:"text-sm text-gray-500",children:"Total Clips"})]}),m.jsxs("div",{className:"flex flex-col items-center p-4 bg-purple-50 rounded-lg",children:[m.jsx("div",{className:"text-2xl font-bold text-purple-800 mb-2",children:b(s.reduce((_,R)=>_+R.totalLengthSeconds,0))}),m.jsx("div",{className:"text-sm text-gray-500",children:"Total Content Duration"})]})]})}),m.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:E.length===0?m.jsx("div",{className:"p-6 text-center text-gray-500",children:"No keywords found matching your search."}):m.jsx("ul",{className:"list-none m-0 p-0 border-t border-gray-100",children:E.map(_=>m.jsx("li",{className:"border-b border-gray-100 transition-colors hover:bg-gray-50",children:m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-blue-600 mb-2 cursor-pointer transition-colors hover:text-blue-800",onClick:()=>D(_.keyword),children:_.keyword}),m.jsxs("div",{className:"my-2",children:[m.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-blue-100 text-blue-800 text-xs font-medium mr-2",children:[_.count," clips"]}),m.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-green-100 text-green-800 text-xs font-medium",children:[b(_.totalLengthSeconds)," total length"]})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs("button",{onClick:()=>P(_.keyword),className:"inline-flex items-center px-3 py-2 border-0 rounded-md bg-blue-600 text-white text-sm font-medium cursor-pointer transition-colors hover:bg-blue-700",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"mr-1.5",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Play"]}),m.jsxs("button",{onClick:()=>x(_.keyword),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md bg-white text-gray-600 text-sm font-medium cursor-pointer transition-colors hover:bg-gray-50",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"mr-1.5",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]})]})]}),a===_.keyword&&m.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[m.jsx("h4",{className:"text-base font-medium text-gray-600 mb-4",children:"Recent Clips:"}),m.jsx("div",{className:"flex flex-col gap-4",children:_.summaries.slice(0,3).map((R,j)=>m.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-xs text-gray-500",children:R.timestamp}),R.documentName&&m.jsx("span",{className:"text-xs font-medium text-blue-600",children:R.documentName})]}),m.jsxs("p",{className:"mt-2 text-gray-600 text-sm leading-relaxed",children:[R.summary.substring(0,200),R.summary.length>200?"...":""]})]},j))}),_.summaries.length>3&&m.jsx("div",{className:"mt-4 text-right",children:m.jsxs("button",{onClick:()=>P(_.keyword),className:"text-blue-600 text-sm font-medium bg-transparent border-0 cursor-pointer transition-colors hover:text-blue-800",children:["View all ",_.summaries.length," clips "]})})]})]})},_.keyword))})})]})}function zq(){const[t,e]=M.useState(!1),[r,i]=M.useState(null),[s,o]=M.useState(null),a=M.useRef(null),[l,u]=M.useState(null),[c,h]=M.useState(1),f=async(x,E)=>{try{e(!0),i(null);const _=prompt("Enter the name of the document for this interview:");if(!_){i("Document name is required");return}const R=await p(x),j=await g(R);await D(_.trim(),j),o(j),h(2)}catch(_){console.error("Error processing files:",_),i("Failed to process transcript")}finally{e(!1)}},p=x=>new Promise((E,_)=>{const R=new FileReader;R.onload=j=>E(j.target.result),R.onerror=j=>_(j),R.readAsText(x)});console.log(void 0);const g=async(x,E=3,_=2e3)=>{try{const V=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer undefined"},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:`
        You are an assistant that processes interview transcripts into structured summaries with timestamps and keywords.
        
        Always output the content in the following strict format:
        Overall Summary:
        [Provide a concise overall summary here.]
        
        Key Points:
        1. Title: [First key topic]
           Timestamp: [Start time - End time]
           Keywords: [Comma-separated list of keywords]
           Summary: [Provide a short summary of the first key topic.]
      `},{role:"user",content:`Here is a transcript:
${x}

Generate an overall summary, key points with timestamps, and keywords.`}],max_tokens:1e3})});if(!V.ok){if(V.status===429&&E>0)return console.warn(`Rate limit exceeded. Retrying in ${_}ms...`),await new Promise(I=>setTimeout(I,_)),g(x,E-1,_*2);throw new Error(`API request failed: ${V.statusText}`)}const C=await V.json();return b(C.choices[0].message.content)}catch(R){throw console.error("Error communicating with OpenAI API:",R),R}},b=x=>{const E=x.match(/Overall Summary:\s*(.+)/i),_=E?E[1].trim():"No summary found.",R=[],j=/\d+\.\s*Title:\s*(.+?)\s*Timestamp:\s*(.+?)\s*Keywords:\s*(.+?)\s*Summary:\s*(.+?)(?=\d+\.|$)/gs;let V;for(;(V=j.exec(x))!==null;)R.push({topic:V[1].trim(),timestamp:V[2].trim(),keywords:V[3].trim(),summary:V[4].trim()});return{overallSummary:_,keyPoints:R}},D=async(x,E)=>{try{const _=Pa(Yt(Rt,"interviewSummaries"),x);await yx(_,{documentName:x,mainSummary:E.overallSummary,createdAt:new Date});for(const R of E.keyPoints){const j=R.topic.replace(/[^a-zA-Z0-9-_]/g,"_"),V=Pa(Yt(Rt,"interviewSummaries",x,"subSummaries"),j);await yx(V,{topic:R.topic,timestamp:R.timestamp,keywords:R.keywords,summary:R.summary})}}catch(_){throw console.error("Error storing processed transcript:",_),_}},P=x=>{if(!a.current)return;const E=x.split(" - ")[0],_=E.split(":").map(Number);if(_.length!==2||_.some(isNaN)){console.error("Invalid timestamp format:",E);return}const R=_[0],j=_[1],V=R*60+j;isFinite(V)&&(a.current.currentTime=V,a.current.play())};return m.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("h1",{className:"text-2xl font-bold mb-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text",children:"Transcript Summarizer"}),m.jsx("p",{className:"text-base leading-relaxed text-gray-600 max-w-3xl",children:"Upload interview transcripts to generate AI-powered summaries with timestamps and keywords"})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[c===1&&m.jsxs("div",{className:"p-8",children:[m.jsxs("div",{className:"mb-8",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-900 flex items-center",children:[m.jsx(fC,{className:"mr-2 text-blue-600",size:20}),"Upload Interview Files"]}),m.jsxs("div",{className:"flex flex-col gap-6",children:[m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Transcript File (.txt)"}),m.jsx("div",{className:"flex items-center justify-center w-full",children:m.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer bg-white hover:bg-gray-100 transition-colors p-4",children:[m.jsxs("div",{className:"flex flex-col items-center justify-center",children:[m.jsx(_x,{className:"w-10 h-10 mb-3 text-gray-400"}),m.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[m.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),m.jsx("p",{className:"text-xs text-gray-500",children:"Upload your interview transcript file (TXT)"})]}),m.jsx("input",{type:"file",accept:".txt",className:"hidden",onChange:x=>{var E;return((E=x.target.files)==null?void 0:E[0])&&f(x.target.files[0],null)}})]})})]}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Audio File (optional)"}),m.jsx("div",{className:"flex items-center justify-center w-full",children:m.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer bg-white hover:bg-gray-100 transition-colors p-4",children:[m.jsxs("div",{className:"flex flex-col items-center justify-center",children:[m.jsx(_x,{className:"w-10 h-10 mb-3 text-gray-400"}),m.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[m.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),m.jsx("p",{className:"text-xs text-gray-500",children:"MP3, WAV, or other audio formats"})]}),m.jsx("input",{type:"file",accept:"audio/*",className:"hidden",onChange:x=>{var E;return((E=x.target.files)==null?void 0:E[0])&&u(URL.createObjectURL(x.target.files[0]))}})]})})]})]})]}),l&&m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[m.jsx("h3",{className:"text-base font-medium mb-3 text-gray-900",children:"Audio Preview"}),m.jsx("audio",{ref:a,src:l,controls:!0,className:"w-full"})]})]}),t&&m.jsxs("div",{className:"flex flex-col justify-center items-center py-20",children:[m.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-500 rounded-full animate-spin mb-4"}),m.jsx("p",{className:"text-gray-500 animate-pulse",children:"Processing transcript..."}),m.jsx("style",{children:`
              @keyframes spin {
                to { transform: rotate(360deg); }
              }
              @keyframes pulse {
                0%, 100% { opacity: 1; }
                50% { opacity: 0.5; }
              }
            `})]}),r&&m.jsx("div",{className:"m-8 bg-red-100 border border-red-300 text-red-700 px-6 py-4 rounded-lg",children:m.jsxs("div",{className:"flex",children:[m.jsx("svg",{className:"w-6 h-6 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Error"}),m.jsx("p",{className:"text-sm",children:r})]})]})}),c===2&&s&&m.jsxs("div",{children:[l&&m.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6",children:m.jsx("audio",{ref:a,src:l,controls:!0,className:"w-full"})}),m.jsxs("div",{className:"p-8 border-b border-gray-200",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Overall Summary"}),m.jsx("p",{className:"text-gray-600 leading-relaxed text-base",children:s.overallSummary})]}),m.jsxs("div",{className:"p-8",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:"Key Points"}),m.jsx("div",{className:"flex flex-col gap-6",children:s.keyPoints.map((x,E)=>m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 transition-all duration-300 shadow-sm hover:shadow-md",children:[m.jsxs("div",{className:"flex items-start mb-4",children:[m.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 mr-3 flex-shrink-0 font-semibold",children:E+1}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:x.topic})]}),m.jsxs("div",{className:"flex items-center mb-4 text-blue-600 hover:text-blue-800 cursor-pointer transition-colors",onClick:()=>P(x.timestamp),children:[m.jsx(hC,{size:16,className:"mr-2"}),m.jsx("span",{className:"font-medium",children:x.timestamp})]}),m.jsx("div",{className:"mb-4",children:m.jsxs("div",{className:"flex items-start mb-2",children:[m.jsx(M3,{size:16,className:"mr-2 text-gray-500 mt-0.5"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:x.keywords.split(",").map((_,R)=>m.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-xs rounded-full font-medium",children:_.trim()},R))})]})}),m.jsx("p",{className:"text-gray-600 leading-relaxed text-sm",children:x.summary})]},E))})]}),m.jsx("div",{className:"p-8 border-t border-gray-200 flex justify-center",children:m.jsxs("button",{onClick:()=>{h(1),o(null),u(null),i(null)},className:"flex items-center px-6 py-3 bg-gray-100 text-gray-600 font-medium rounded-lg hover:bg-gray-200 transition-colors",children:[m.jsx(_3,{className:"w-5 h-5 mr-2 transform rotate-180"}),"Process Another Transcript"]})})]})]})]})}function Hq(){const[t,e]=M.useState(""),r=Fr(),i=s=>{s.preventDefault(),t.trim()?r(`/playlist-builder?keywords=${encodeURIComponent(t)}`):alert("Please enter at least one keyword.")};return m.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans flex flex-col items-center justify-center",children:[m.jsxs("div",{className:"w-full max-w-3xl text-center mb-16",children:[m.jsx("h1",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text",children:"Search Interviews"}),m.jsx("p",{className:"text-base leading-relaxed text-gray-600 mb-10 max-w-xl mx-auto",children:"Enter keywords separated by commas to find relevant interviews and create custom playlists"}),m.jsx("form",{onSubmit:i,className:"w-full",children:m.jsxs("div",{className:"relative w-full",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:m.jsx(pC,{className:"w-5 h-5 text-gray-500"})}),m.jsx("input",{type:"text",value:t,onChange:s=>e(s.target.value),placeholder:"civil rights, voting, education...",className:"w-full pl-12 pr-32 py-5 border border-gray-200 bg-white rounded-xl shadow-sm outline-none text-base text-gray-900 transition-all duration-300 focus:shadow-blue-300 focus:ring-2 focus:ring-blue-500"}),m.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-medium rounded-lg shadow-sm border-none cursor-pointer transition-all duration-300 hover:from-blue-700 hover:to-indigo-700 hover:shadow-md",children:"Search"})]})})]}),m.jsx("div",{className:"w-full max-w-3xl",children:m.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Popular Keywords"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:["civil rights","voting","education","segregation","protests","leadership","communities","legislation","equality","freedom"].map(s=>m.jsx("button",{onClick:()=>{e(s),r(`/playlist-builder?keywords=${encodeURIComponent(s)}`)},className:"px-4 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm border-none cursor-pointer transition-colors duration-200 hover:bg-blue-100 hover:text-blue-800",children:s},s))})]})})]})}function Wq(){const[t]=Cy(),e=Fr(),r=t.get("documentName"),[i,s]=M.useState(!0),[o,a]=M.useState(null),[l,u]=M.useState(null),[c,h]=M.useState([]),[f,p]=M.useState(null),[g,b]=M.useState(!1),[D,P]=M.useState(!1),[x,E]=M.useState(!1),[_,R]=M.useState(0),[j,V]=M.useState(0),[C,I]=M.useState(0),[y,w]=M.useState(null),[S,L]=M.useState(null),N=M.useRef(null),Y=M.useRef(null),Z=ee=>{if(!ee)return null;const le=ee.match(/(?:embed\/|watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return le?le[1]:null},ae=ee=>{if(!ee)return 0;const we=ee.split(" - ")[0].replace(/[\[\]]/g,"").trim().split(":").map(Number);return we.length===3?we[0]*3600+we[1]*60+we[2]:we.length===2?we[0]*60+we[1]:0},he=ee=>Array.isArray(ee)?ee:typeof ee=="string"?ee.split(",").map(le=>le.trim()):[],q=ee=>{if(!c||c.length===0)return 0;for(let le=c.length-1;le>=0;le--)if(ae(c[le].timestamp)<=ee)return le;return 0};M.useEffect(()=>{if(!r){a("Document name is missing"),s(!1);return}async function ee(){try{s(!0);const le=Pa(Rt,"interviewSummaries",r),we=await a3(le);if(!we.exists()){a("Interview not found"),s(!1);return}const je=we.data();u(je);const Be=Yt(Rt,"interviewSummaries",r,"subSummaries"),nt=await xn(Be),A=[];nt.forEach(F=>{A.push({id:F.id,...F.data()})}),A.sort((F,U)=>ae(F.timestamp)-ae(U.timestamp)),h(A),s(!1)}catch(le){console.error("Error fetching interview data:",le),a("Failed to load interview data"),s(!1)}}ee()},[r]),M.useEffect(()=>{if(window.YT&&window.YT.Player){P(!0);return}const ee=document.createElement("script");ee.src="https://www.youtube.com/iframe_api",ee.async=!0,ee.onload=()=>{window.YT&&window.YT.Player&&P(!0)},document.body.appendChild(ee),window.onYouTubeIframeAPIReady=()=>{P(!0)}},[]),M.useEffect(()=>{if(!D||!(l!=null&&l.videoEmbedLink)||!S)return;const ee=Z(l.videoEmbedLink);if(!ee){console.error("Invalid YouTube video link");return}return N.current&&typeof N.current.destroy=="function"&&(N.current.destroy(),b(!1)),N.current=new window.YT.Player(S,{videoId:ee,width:"100%",height:"100%",playerVars:{autoplay:0,controls:0,rel:0,modestbranding:1},events:{onReady:le=>{b(!0),V(le.target.getDuration()),console.log("Player is ready with duration:",le.target.getDuration())},onStateChange:le=>{E(le.data===window.YT.PlayerState.PLAYING),le.data===window.YT.PlayerState.ENDED&&E(!1)},onError:le=>{console.error("YouTube player error:",le.data)}}}),Y.current=setInterval(()=>{if(N.current&&typeof N.current.getCurrentTime=="function"){const le=N.current.getCurrentTime();R(le);const we=q(le);we!==C&&I(we)}},500),()=>{Y.current&&clearInterval(Y.current),N.current&&typeof N.current.destroy=="function"&&(N.current.destroy(),N.current=null)}},[D,l,S]),M.useEffect(()=>{y!==null&&N.current&&typeof N.current.seekTo=="function"&&(N.current.seekTo(y,!0),w(null))},[y]);const G=ee=>{console.log("Seeking to",ee,"seconds"),w(ee),N.current&&typeof N.current.seekTo=="function"&&(N.current.seekTo(ee,!0),N.current.playVideo(),E(!0))},ie=ee=>{p(f===ee?null:ee)},ne=()=>{N.current&&typeof N.current.playVideo=="function"&&(N.current.playVideo(),E(!0))},W=()=>{N.current&&typeof N.current.pauseVideo=="function"&&(N.current.pauseVideo(),E(!1))},$=()=>{if(C<c.length-1){const ee=c[C+1],le=ae(ee.timestamp);G(le),I(C+1)}},Q=()=>{if(C>0){const ee=c[C-1],le=ae(ee.timestamp);G(le),I(C-1)}},X=({summary:ee,index:le,isOpen:we,isActive:je})=>{const Be=M.useRef(null),[nt,A]=M.useState(0);M.useEffect(()=>{we&&Be.current&&A(Be.current.scrollHeight)},[we]);const F=ae(ee.timestamp),U=he(ee.keywords),H=le===C;return m.jsxs("div",{className:`accordion-item border-b border-gray-200 ${H?"border-l-4 border-l-blue-500":""}`,children:[m.jsxs("button",{onClick:()=>ie(le),className:`w-full flex items-center justify-between p-4 text-left transition-colors ${we?"bg-blue-50 text-blue-700":H?"bg-blue-50/50 text-blue-600":"text-gray-800 hover:bg-gray-50"}`,children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center font-bold mr-3 ${H?"bg-blue-500 text-white":"bg-blue-100 text-blue-700"}`,children:le+1}),m.jsx("span",{className:"font-bold",children:ee.topic})]}),we?m.jsx(b3,{size:18}):m.jsx(v3,{size:18})]}),m.jsx("div",{style:{height:we?nt||"auto":0,overflow:"hidden",transition:"height 0.3s ease",maxHeight:we?"1000px":"0"},children:m.jsxs("div",{ref:Be,className:"p-4 bg-gray-50",children:[m.jsxs("button",{onClick:re=>{re.stopPropagation(),G(F)},className:`flex items-center mb-4 text-blue-600 hover:text-blue-800 transition-colors ${g?"cursor-pointer":"opacity-50 cursor-wait"}`,disabled:!g,children:[m.jsx(hC,{size:16,className:"mr-2"}),m.jsx("span",{className:"font-bold",children:ee.timestamp?ee.timestamp.split(" - ")[0].replace(/[\[\]]/g,"").trim():"Unknown time"})]}),U.length>0&&m.jsx("div",{className:"mb-4 text-sm flex flex-wrap",children:U.map((re,pe)=>m.jsx("span",{className:"mr-2 mb-2 px-2.5 py-0.5 bg-blue-100 text-blue-800 rounded-full text-xs cursor-pointer hover:bg-blue-200 transition-colors",onClick:Pe=>{Pe.stopPropagation(),e(`/playlist-builder?keywords=${encodeURIComponent(re)}`)},children:re},pe))}),m.jsx("p",{className:"text-gray-700 leading-relaxed",children:ee.summary})]})})]})},ce=ee=>{if(isNaN(ee))return"00:00";const le=Math.floor(ee/3600),we=Math.floor(ee%3600/60),je=Math.floor(ee%60);return le>0?`${le.toString().padStart(2,"0")}:${we.toString().padStart(2,"0")}:${je.toString().padStart(2,"0")}`:`${we.toString().padStart(2,"0")}:${je.toString().padStart(2,"0")}`},ye=()=>c.map((ee,le)=>({id:ee.id||le,label:ee.topic||`Segment ${le+1}`,timestamp:ee.timestamp,startSeconds:ae(ee.timestamp),endSeconds:le<c.length-1?ae(c[le+1].timestamp):j,summary:ee.summary}));if(i)return m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})});if(o)return m.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-xl",children:m.jsxs("p",{children:[m.jsx("strong",{children:"Error:"})," ",o]})});const Fe=ye(),Le=c.length>0;return m.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 p-6",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:(l==null?void 0:l.name)||r}),m.jsxs("p",{className:"text-gray-600",children:[(l==null?void 0:l.role)&&m.jsx("span",{className:"italic",children:l.role}),c.length>0&&m.jsx("span",{className:"mx-2 text-gray-400",children:""}),c.length>0&&m.jsxs("span",{children:[c.length," segments"]})]})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[m.jsxs("div",{className:"w-full max-w-2xl mx-auto relative rounded-lg overflow-hidden",style:{height:"360px"},children:[m.jsx("div",{className:"absolute inset-0 bg-black",ref:L}),!g&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 pointer-events-none",children:m.jsx("div",{className:"w-10 h-10 border-4 border-white/50 border-t-white rounded-full animate-spin"})})]}),Le&&g&&m.jsxs("div",{className:"mt-6 mb-4 w-full max-w-2xl mx-auto",children:[m.jsxs("div",{className:"relative w-full h-2 bg-gray-200 rounded-full overflow-hidden cursor-pointer",onClick:ee=>{const le=ee.currentTarget.getBoundingClientRect(),je=(ee.clientX-le.left)/le.width*j;G(je)},onMouseMove:ee=>{if(ee.buttons===1){const le=ee.currentTarget.getBoundingClientRect(),je=(ee.clientX-le.left)/le.width*j;G(je)}},children:[m.jsx("div",{className:"absolute top-0 left-0 h-full bg-blue-500",style:{width:`${_/j*100}%`}}),Fe.map((ee,le)=>m.jsx("div",{className:"absolute top-0 w-0.5 h-full bg-gray-400 cursor-pointer",style:{left:`${ee.startSeconds/j*100}%`},onClick:we=>{we.stopPropagation(),G(ee.startSeconds)},title:ee.label},le))]}),m.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[m.jsx("span",{children:ce(_)}),m.jsx("span",{children:ce(j)})]})]}),m.jsx("div",{className:"w-full max-w-2xl mx-auto flex justify-center items-center py-3 mt-5",children:m.jsx(fA,{onPrevious:Q,onPlay:ne,onPause:W,onNext:$,isPlaying:x,hasPrevious:C>0,hasNext:C<c.length-1})}),Le&&c[C]&&m.jsxs("div",{className:"w-full max-w-2xl mx-auto mt-6 pt-4 border-t border-gray-200",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:c[C].topic||`Segment ${C+1}`}),he(c[C].keywords).length>0&&m.jsx("div",{className:"mb-3 flex flex-wrap",children:he(c[C].keywords).map((ee,le)=>m.jsx("span",{className:"mr-2 mb-2 px-2.5 py-0.5 bg-blue-100 text-blue-800 rounded-full text-xs cursor-pointer hover:bg-blue-200 transition-colors",onClick:()=>e(`/playlist-builder?keywords=${encodeURIComponent(ee)}`),children:ee},le))}),m.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:m.jsx("p",{className:"m-0 text-base leading-relaxed text-gray-700",children:c[C].summary})})]})]}),m.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:m.jsxs("div",{className:"p-6",children:[m.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Overview"}),m.jsx("p",{className:"text-gray-700 leading-relaxed",children:(l==null?void 0:l.mainSummary)||"No summary available"})]})}),m.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[m.jsx("div",{className:"p-4 border-b border-gray-200",children:m.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Interview Segments"})}),c.map((ee,le)=>m.jsx(X,{summary:ee,index:le,isOpen:f===le,isActive:C===le},ee.id||le)),c.length===0&&m.jsx("div",{className:"p-6 text-center text-gray-500",children:"No segments available for this interview"})]})]})}function qq(){return m.jsxs(w2,{children:[m.jsx(Hr,{path:"/login",element:m.jsx(J5,{})}),m.jsx(Hr,{path:"/",element:m.jsx(Bs,{children:m.jsx(Us,{children:m.jsx(Q5,{})})})}),m.jsx(Hr,{path:"/playlist-builder",element:m.jsx(Bs,{children:m.jsx(Us,{children:m.jsx(oz,{})})})}),m.jsx(Hr,{path:"/playlist-editor",element:m.jsx(Bs,{children:m.jsx(Us,{children:m.jsx(Uq,{})})})}),m.jsx(Hr,{path:"/keyword-directory",element:m.jsx(Bs,{children:m.jsx(Us,{children:m.jsx($q,{})})})}),m.jsx(Hr,{path:"/transcript-summary",element:m.jsx(Bs,{children:m.jsx(Us,{children:m.jsx(zq,{})})})}),m.jsx(Hr,{path:"/search",element:m.jsx(Bs,{children:m.jsx(Us,{children:m.jsx(Hq,{})})})}),m.jsx(Hr,{path:"/interview-player",element:m.jsx(Bs,{children:m.jsx(Us,{children:m.jsx(Wq,{})})})}),m.jsx(Hr,{path:"*",element:m.jsx(DI,{to:"/",replace:!0})})]})}Lm.createRoot(document.getElementById("root")).render(m.jsx(Ue.StrictMode,{children:m.jsx(W2,{children:m.jsx(c3,{children:m.jsx(h3,{children:m.jsx(qq,{})})})})}));export{Ue as R,t$ as _,_y as a,jc as c,Fa as g,m as j,M as r};
