const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MapComponent-Da1bX5kv.js","assets/leaflet-src-CMHfN98j.js","assets/index-Dm8M562g.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var of=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function za(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var UL={exports:{}},Zm={},BL={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ih=Symbol.for("react.element"),OB=Symbol.for("react.portal"),jB=Symbol.for("react.fragment"),VB=Symbol.for("react.strict_mode"),FB=Symbol.for("react.profiler"),$B=Symbol.for("react.provider"),UB=Symbol.for("react.context"),BB=Symbol.for("react.forward_ref"),zB=Symbol.for("react.suspense"),qB=Symbol.for("react.memo"),HB=Symbol.for("react.lazy"),yC=Symbol.iterator;function WB(t){return t===null||typeof t!="object"?null:(t=yC&&t[yC]||t["@@iterator"],typeof t=="function"?t:null)}var zL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},qL=Object.assign,HL={};function Nu(t,e,r){this.props=t,this.context=e,this.refs=HL,this.updater=r||zL}Nu.prototype.isReactComponent={};Nu.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Nu.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function WL(){}WL.prototype=Nu.prototype;function T2(t,e,r){this.props=t,this.context=e,this.refs=HL,this.updater=r||zL}var I2=T2.prototype=new WL;I2.constructor=T2;qL(I2,Nu.prototype);I2.isPureReactComponent=!0;var _C=Array.isArray,GL=Object.prototype.hasOwnProperty,C2={current:null},KL={key:!0,ref:!0,__self:!0,__source:!0};function YL(t,e,r){var i,s={},a=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)GL.call(e,i)&&!KL.hasOwnProperty(i)&&(s[i]=e[i]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:ih,type:t,key:a,ref:o,props:s,_owner:C2.current}}function GB(t,e){return{$$typeof:ih,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function k2(t){return typeof t=="object"&&t!==null&&t.$$typeof===ih}function KB(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var wC=/\/+/g;function ty(t,e){return typeof t=="object"&&t!==null&&t.key!=null?KB(""+t.key):e.toString(36)}function Jf(t,e,r,i,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ih:case OB:o=!0}}if(o)return o=t,s=s(o),t=i===""?"."+ty(o,0):i,_C(s)?(r="",t!=null&&(r=t.replace(wC,"$&/")+"/"),Jf(s,e,r,"",function(c){return c})):s!=null&&(k2(s)&&(s=GB(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(wC,"$&/")+"/")+t)),e.push(s)),1;if(o=0,i=i===""?".":i+":",_C(t))for(var l=0;l<t.length;l++){a=t[l];var u=i+ty(a,l);o+=Jf(a,e,r,u,s)}else if(u=WB(t),typeof u=="function")for(t=u.call(t),l=0;!(a=t.next()).done;)a=a.value,u=i+ty(a,l++),o+=Jf(a,e,r,u,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function lf(t,e,r){if(t==null)return t;var i=[],s=0;return Jf(t,i,"","",function(a){return e.call(r,a,s++)}),i}function YB(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ir={current:null},Zf={transition:null},XB={ReactCurrentDispatcher:ir,ReactCurrentBatchConfig:Zf,ReactCurrentOwner:C2};function XL(){throw Error("act(...) is not supported in production builds of React.")}tt.Children={map:lf,forEach:function(t,e,r){lf(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return lf(t,function(){e++}),e},toArray:function(t){return lf(t,function(e){return e})||[]},only:function(t){if(!k2(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};tt.Component=Nu;tt.Fragment=jB;tt.Profiler=FB;tt.PureComponent=T2;tt.StrictMode=VB;tt.Suspense=zB;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XB;tt.act=XL;tt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=qL({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=C2.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)GL.call(e,u)&&!KL.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:ih,type:t.type,key:s,ref:a,props:i,_owner:o}};tt.createContext=function(t){return t={$$typeof:UB,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:$B,_context:t},t.Consumer=t};tt.createElement=YL;tt.createFactory=function(t){var e=YL.bind(null,t);return e.type=t,e};tt.createRef=function(){return{current:null}};tt.forwardRef=function(t){return{$$typeof:BB,render:t}};tt.isValidElement=k2;tt.lazy=function(t){return{$$typeof:HB,_payload:{_status:-1,_result:t},_init:YB}};tt.memo=function(t,e){return{$$typeof:qB,type:t,compare:e===void 0?null:e}};tt.startTransition=function(t){var e=Zf.transition;Zf.transition={};try{t()}finally{Zf.transition=e}};tt.unstable_act=XL;tt.useCallback=function(t,e){return ir.current.useCallback(t,e)};tt.useContext=function(t){return ir.current.useContext(t)};tt.useDebugValue=function(){};tt.useDeferredValue=function(t){return ir.current.useDeferredValue(t)};tt.useEffect=function(t,e){return ir.current.useEffect(t,e)};tt.useId=function(){return ir.current.useId()};tt.useImperativeHandle=function(t,e,r){return ir.current.useImperativeHandle(t,e,r)};tt.useInsertionEffect=function(t,e){return ir.current.useInsertionEffect(t,e)};tt.useLayoutEffect=function(t,e){return ir.current.useLayoutEffect(t,e)};tt.useMemo=function(t,e){return ir.current.useMemo(t,e)};tt.useReducer=function(t,e,r){return ir.current.useReducer(t,e,r)};tt.useRef=function(t){return ir.current.useRef(t)};tt.useState=function(t){return ir.current.useState(t)};tt.useSyncExternalStore=function(t,e,r){return ir.current.useSyncExternalStore(t,e,r)};tt.useTransition=function(){return ir.current.useTransition()};tt.version="18.3.1";BL.exports=tt;var S=BL.exports;const te=za(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QB=S,JB=Symbol.for("react.element"),ZB=Symbol.for("react.fragment"),ez=Object.prototype.hasOwnProperty,tz=QB.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nz={key:!0,ref:!0,__self:!0,__source:!0};function QL(t,e,r){var i,s={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)ez.call(e,i)&&!nz.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:JB,type:t,key:a,ref:o,props:s,_owner:tz.current}}Zm.Fragment=ZB;Zm.jsx=QL;Zm.jsxs=QL;UL.exports=Zm;var p=UL.exports,px={},JL={exports:{}},Or={},ZL={exports:{}},e6={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,F){var W=q.length;q.push(F);e:for(;0<W;){var Q=W-1>>>1,H=q[Q];if(0<s(H,F))q[Q]=F,q[W]=H,W=Q;else break e}}function r(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var F=q[0],W=q.pop();if(W!==F){q[0]=W;e:for(var Q=0,H=q.length,X=H>>>1;Q<X;){var J=2*(Q+1)-1,ee=q[J],se=J+1,ce=q[se];if(0>s(ee,W))se<H&&0>s(ce,ee)?(q[Q]=ce,q[se]=W,Q=se):(q[Q]=ee,q[J]=W,Q=J);else if(se<H&&0>s(ce,W))q[Q]=ce,q[se]=W,Q=se;else break e}}return F}function s(q,F){var W=q.sortIndex-F.sortIndex;return W!==0?W:q.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],d=1,h=null,f=3,m=!1,v=!1,y=!1,b=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(q){for(var F=r(c);F!==null;){if(F.callback===null)i(c);else if(F.startTime<=q)i(c),F.sortIndex=F.expirationTime,e(u,F);else break;F=r(c)}}function N(q){if(y=!1,E(q),!v)if(r(u)!==null)v=!0,U(M);else{var F=r(c);F!==null&&Y(N,F.startTime-q)}}function M(q,F){v=!1,y&&(y=!1,_(D),D=-1),m=!0;var W=f;try{for(E(F),h=r(u);h!==null&&(!(h.expirationTime>F)||q&&!x());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,f=h.priorityLevel;var H=Q(h.expirationTime<=F);F=t.unstable_now(),typeof H=="function"?h.callback=H:h===r(u)&&i(u),E(F)}else i(u);h=r(u)}if(h!==null)var X=!0;else{var J=r(c);J!==null&&Y(N,J.startTime-F),X=!1}return X}finally{h=null,f=W,m=!1}}var O=!1,A=null,D=-1,T=5,I=-1;function x(){return!(t.unstable_now()-I<T)}function R(){if(A!==null){var q=t.unstable_now();I=q;var F=!0;try{F=A(!0,q)}finally{F?P():(O=!1,A=null)}}else O=!1}var P;if(typeof w=="function")P=function(){w(R)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,$=j.port2;j.port1.onmessage=R,P=function(){$.postMessage(null)}}else P=function(){b(R,0)};function U(q){A=q,O||(O=!0,P())}function Y(q,F){D=b(function(){q(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){v||m||(v=!0,U(M))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(q){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var W=f;f=F;try{return q()}finally{f=W}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,F){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var W=f;f=q;try{return F()}finally{f=W}},t.unstable_scheduleCallback=function(q,F,W){var Q=t.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?Q+W:Q):W=Q,q){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=W+H,q={id:d++,callback:F,priorityLevel:q,startTime:W,expirationTime:H,sortIndex:-1},W>Q?(q.sortIndex=W,e(c,q),r(u)===null&&q===r(c)&&(y?(_(D),D=-1):y=!0,Y(N,W-Q))):(q.sortIndex=H,e(u,q),v||m||(v=!0,U(M))),q},t.unstable_shouldYield=x,t.unstable_wrapCallback=function(q){var F=f;return function(){var W=f;f=F;try{return q.apply(this,arguments)}finally{f=W}}}})(e6);ZL.exports=e6;var rz=ZL.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iz=S,Dr=rz;function ve(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var t6=new Set,pd={};function Bo(t,e){tu(t,e),tu(t+"Capture",e)}function tu(t,e){for(pd[t]=e,t=0;t<e.length;t++)t6.add(e[t])}var bs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mx=Object.prototype.hasOwnProperty,sz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bC={},xC={};function az(t){return mx.call(xC,t)?!0:mx.call(bC,t)?!1:sz.test(t)?xC[t]=!0:(bC[t]=!0,!1)}function oz(t,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lz(t,e,r,i){if(e===null||typeof e>"u"||oz(t,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function sr(t,e,r,i,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Ln={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ln[t]=new sr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ln[e]=new sr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ln[t]=new sr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ln[t]=new sr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ln[t]=new sr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ln[t]=new sr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ln[t]=new sr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ln[t]=new sr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ln[t]=new sr(t,5,!1,t.toLowerCase(),null,!1,!1)});var N2=/[\-:]([a-z])/g;function A2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(N2,A2);Ln[e]=new sr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(N2,A2);Ln[e]=new sr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(N2,A2);Ln[e]=new sr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ln[t]=new sr(t,1,!1,t.toLowerCase(),null,!1,!1)});Ln.xlinkHref=new sr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ln[t]=new sr(t,1,!1,t.toLowerCase(),null,!0,!0)});function R2(t,e,r,i){var s=Ln.hasOwnProperty(e)?Ln[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lz(e,r,s,i)&&(r=null),i||s===null?az(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,i=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,i?t.setAttributeNS(i,e,r):t.setAttribute(e,r))))}var Ms=iz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,uf=Symbol.for("react.element"),Tl=Symbol.for("react.portal"),Il=Symbol.for("react.fragment"),P2=Symbol.for("react.strict_mode"),gx=Symbol.for("react.profiler"),n6=Symbol.for("react.provider"),r6=Symbol.for("react.context"),D2=Symbol.for("react.forward_ref"),vx=Symbol.for("react.suspense"),yx=Symbol.for("react.suspense_list"),M2=Symbol.for("react.memo"),Qs=Symbol.for("react.lazy"),i6=Symbol.for("react.offscreen"),EC=Symbol.iterator;function sc(t){return t===null||typeof t!="object"?null:(t=EC&&t[EC]||t["@@iterator"],typeof t=="function"?t:null)}var Ht=Object.assign,ny;function Nc(t){if(ny===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);ny=e&&e[1]||""}return`
`+ny+t}var ry=!1;function iy(t,e){if(!t||ry)return"";ry=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),a=i.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{ry=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Nc(t):""}function uz(t){switch(t.tag){case 5:return Nc(t.type);case 16:return Nc("Lazy");case 13:return Nc("Suspense");case 19:return Nc("SuspenseList");case 0:case 2:case 15:return t=iy(t.type,!1),t;case 11:return t=iy(t.type.render,!1),t;case 1:return t=iy(t.type,!0),t;default:return""}}function _x(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Il:return"Fragment";case Tl:return"Portal";case gx:return"Profiler";case P2:return"StrictMode";case vx:return"Suspense";case yx:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case r6:return(t.displayName||"Context")+".Consumer";case n6:return(t._context.displayName||"Context")+".Provider";case D2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case M2:return e=t.displayName||null,e!==null?e:_x(t.type)||"Memo";case Qs:e=t._payload,t=t._init;try{return _x(t(e))}catch{}}return null}function cz(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _x(e);case 8:return e===P2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ra(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function s6(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dz(t){var e=s6(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function cf(t){t._valueTracker||(t._valueTracker=dz(t))}function a6(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return t&&(i=s6(t)?t.checked?"true":"false":t.value),t=i,t!==r?(e.setValue(t),!0):!1}function Ap(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function wx(t,e){var r=e.checked;return Ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function TC(t,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=Ra(e.value!=null?e.value:r),t._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function o6(t,e){e=e.checked,e!=null&&R2(t,"checked",e,!1)}function bx(t,e){o6(t,e);var r=Ra(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xx(t,e.type,r):e.hasOwnProperty("defaultValue")&&xx(t,e.type,Ra(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function IC(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function xx(t,e,r){(e!=="number"||Ap(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Ac=Array.isArray;function $l(t,e,r,i){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&i&&(t[r].defaultSelected=!0)}else{for(r=""+Ra(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ex(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ve(91));return Ht({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function CC(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ve(92));if(Ac(r)){if(1<r.length)throw Error(ve(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:Ra(r)}}function l6(t,e){var r=Ra(e.value),i=Ra(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),i!=null&&(t.defaultValue=""+i)}function kC(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function u6(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sx(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?u6(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var df,c6=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(df=df||document.createElement("div"),df.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=df.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function md(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Yc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hz=["Webkit","ms","Moz","O"];Object.keys(Yc).forEach(function(t){hz.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Yc[e]=Yc[t]})});function d6(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Yc.hasOwnProperty(t)&&Yc[t]?(""+e).trim():e+"px"}function h6(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=d6(r,e[r],i);r==="float"&&(r="cssFloat"),i?t.setProperty(r,s):t[r]=s}}var fz=Ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tx(t,e){if(e){if(fz[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ve(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ve(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ve(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ve(62))}}function Ix(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cx=null;function L2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kx=null,Ul=null,Bl=null;function NC(t){if(t=oh(t)){if(typeof kx!="function")throw Error(ve(280));var e=t.stateNode;e&&(e=ig(e),kx(t.stateNode,t.type,e))}}function f6(t){Ul?Bl?Bl.push(t):Bl=[t]:Ul=t}function p6(){if(Ul){var t=Ul,e=Bl;if(Bl=Ul=null,NC(t),e)for(t=0;t<e.length;t++)NC(e[t])}}function m6(t,e){return t(e)}function g6(){}var sy=!1;function v6(t,e,r){if(sy)return t(e,r);sy=!0;try{return m6(t,e,r)}finally{sy=!1,(Ul!==null||Bl!==null)&&(g6(),p6())}}function gd(t,e){var r=t.stateNode;if(r===null)return null;var i=ig(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ve(231,e,typeof r));return r}var Nx=!1;if(bs)try{var ac={};Object.defineProperty(ac,"passive",{get:function(){Nx=!0}}),window.addEventListener("test",ac,ac),window.removeEventListener("test",ac,ac)}catch{Nx=!1}function pz(t,e,r,i,s,a,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(d){this.onError(d)}}var Xc=!1,Rp=null,Pp=!1,Ax=null,mz={onError:function(t){Xc=!0,Rp=t}};function gz(t,e,r,i,s,a,o,l,u){Xc=!1,Rp=null,pz.apply(mz,arguments)}function vz(t,e,r,i,s,a,o,l,u){if(gz.apply(this,arguments),Xc){if(Xc){var c=Rp;Xc=!1,Rp=null}else throw Error(ve(198));Pp||(Pp=!0,Ax=c)}}function zo(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function y6(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function AC(t){if(zo(t)!==t)throw Error(ve(188))}function yz(t){var e=t.alternate;if(!e){if(e=zo(t),e===null)throw Error(ve(188));return e!==t?null:t}for(var r=t,i=e;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(i=s.return,i!==null){r=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return AC(s),t;if(a===i)return AC(s),e;a=a.sibling}throw Error(ve(188))}if(r.return!==i.return)r=s,i=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,i=a;break}if(l===i){o=!0,i=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,i=s;break}if(l===i){o=!0,i=a,r=s;break}l=l.sibling}if(!o)throw Error(ve(189))}}if(r.alternate!==i)throw Error(ve(190))}if(r.tag!==3)throw Error(ve(188));return r.stateNode.current===r?t:e}function _6(t){return t=yz(t),t!==null?w6(t):null}function w6(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=w6(t);if(e!==null)return e;t=t.sibling}return null}var b6=Dr.unstable_scheduleCallback,RC=Dr.unstable_cancelCallback,_z=Dr.unstable_shouldYield,wz=Dr.unstable_requestPaint,Jt=Dr.unstable_now,bz=Dr.unstable_getCurrentPriorityLevel,O2=Dr.unstable_ImmediatePriority,x6=Dr.unstable_UserBlockingPriority,Dp=Dr.unstable_NormalPriority,xz=Dr.unstable_LowPriority,E6=Dr.unstable_IdlePriority,eg=null,Mi=null;function Ez(t){if(Mi&&typeof Mi.onCommitFiberRoot=="function")try{Mi.onCommitFiberRoot(eg,t,void 0,(t.current.flags&128)===128)}catch{}}var mi=Math.clz32?Math.clz32:Iz,Sz=Math.log,Tz=Math.LN2;function Iz(t){return t>>>=0,t===0?32:31-(Sz(t)/Tz|0)|0}var hf=64,ff=4194304;function Rc(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Mp(t,e){var r=t.pendingLanes;if(r===0)return 0;var i=0,s=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?i=Rc(l):(a&=o,a!==0&&(i=Rc(a)))}else o=r&~s,o!==0?i=Rc(o):a!==0&&(i=Rc(a));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(i&4&&(i|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)r=31-mi(e),s=1<<r,i|=t[r],e&=~s;return i}function Cz(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kz(t,e){for(var r=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-mi(a),l=1<<o,u=s[o];u===-1?(!(l&r)||l&i)&&(s[o]=Cz(l,e)):u<=e&&(t.expiredLanes|=l),a&=~l}}function Rx(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function S6(){var t=hf;return hf<<=1,!(hf&4194240)&&(hf=64),t}function ay(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function sh(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mi(e),t[e]=r}function Nz(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-mi(r),a=1<<s;e[s]=0,i[s]=-1,t[s]=-1,r&=~a}}function j2(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var i=31-mi(r),s=1<<i;s&e|t[i]&e&&(t[i]|=e),r&=~s}}var _t=0;function T6(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var I6,V2,C6,k6,N6,Px=!1,pf=[],pa=null,ma=null,ga=null,vd=new Map,yd=new Map,na=[],Az="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function PC(t,e){switch(t){case"focusin":case"focusout":pa=null;break;case"dragenter":case"dragleave":ma=null;break;case"mouseover":case"mouseout":ga=null;break;case"pointerover":case"pointerout":vd.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yd.delete(e.pointerId)}}function oc(t,e,r,i,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:a,targetContainers:[s]},e!==null&&(e=oh(e),e!==null&&V2(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Rz(t,e,r,i,s){switch(e){case"focusin":return pa=oc(pa,t,e,r,i,s),!0;case"dragenter":return ma=oc(ma,t,e,r,i,s),!0;case"mouseover":return ga=oc(ga,t,e,r,i,s),!0;case"pointerover":var a=s.pointerId;return vd.set(a,oc(vd.get(a)||null,t,e,r,i,s)),!0;case"gotpointercapture":return a=s.pointerId,yd.set(a,oc(yd.get(a)||null,t,e,r,i,s)),!0}return!1}function A6(t){var e=po(t.target);if(e!==null){var r=zo(e);if(r!==null){if(e=r.tag,e===13){if(e=y6(r),e!==null){t.blockedOn=e,N6(t.priority,function(){C6(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ep(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Dx(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var i=new r.constructor(r.type,r);Cx=i,r.target.dispatchEvent(i),Cx=null}else return e=oh(r),e!==null&&V2(e),t.blockedOn=r,!1;e.shift()}return!0}function DC(t,e,r){ep(t)&&r.delete(e)}function Pz(){Px=!1,pa!==null&&ep(pa)&&(pa=null),ma!==null&&ep(ma)&&(ma=null),ga!==null&&ep(ga)&&(ga=null),vd.forEach(DC),yd.forEach(DC)}function lc(t,e){t.blockedOn===e&&(t.blockedOn=null,Px||(Px=!0,Dr.unstable_scheduleCallback(Dr.unstable_NormalPriority,Pz)))}function _d(t){function e(s){return lc(s,t)}if(0<pf.length){lc(pf[0],t);for(var r=1;r<pf.length;r++){var i=pf[r];i.blockedOn===t&&(i.blockedOn=null)}}for(pa!==null&&lc(pa,t),ma!==null&&lc(ma,t),ga!==null&&lc(ga,t),vd.forEach(e),yd.forEach(e),r=0;r<na.length;r++)i=na[r],i.blockedOn===t&&(i.blockedOn=null);for(;0<na.length&&(r=na[0],r.blockedOn===null);)A6(r),r.blockedOn===null&&na.shift()}var zl=Ms.ReactCurrentBatchConfig,Lp=!0;function Dz(t,e,r,i){var s=_t,a=zl.transition;zl.transition=null;try{_t=1,F2(t,e,r,i)}finally{_t=s,zl.transition=a}}function Mz(t,e,r,i){var s=_t,a=zl.transition;zl.transition=null;try{_t=4,F2(t,e,r,i)}finally{_t=s,zl.transition=a}}function F2(t,e,r,i){if(Lp){var s=Dx(t,e,r,i);if(s===null)gy(t,e,i,Op,r),PC(t,i);else if(Rz(s,t,e,r,i))i.stopPropagation();else if(PC(t,i),e&4&&-1<Az.indexOf(t)){for(;s!==null;){var a=oh(s);if(a!==null&&I6(a),a=Dx(t,e,r,i),a===null&&gy(t,e,i,Op,r),a===s)break;s=a}s!==null&&i.stopPropagation()}else gy(t,e,i,null,r)}}var Op=null;function Dx(t,e,r,i){if(Op=null,t=L2(i),t=po(t),t!==null)if(e=zo(t),e===null)t=null;else if(r=e.tag,r===13){if(t=y6(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Op=t,null}function R6(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bz()){case O2:return 1;case x6:return 4;case Dp:case xz:return 16;case E6:return 536870912;default:return 16}default:return 16}}var ca=null,$2=null,tp=null;function P6(){if(tp)return tp;var t,e=$2,r=e.length,i,s="value"in ca?ca.value:ca.textContent,a=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(i=1;i<=o&&e[r-i]===s[a-i];i++);return tp=s.slice(t,1<i?1-i:void 0)}function np(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function mf(){return!0}function MC(){return!1}function jr(t){function e(r,i,s,a,o){this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?mf:MC,this.isPropagationStopped=MC,this}return Ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=mf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=mf)},persist:function(){},isPersistent:mf}),e}var Au={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},U2=jr(Au),ah=Ht({},Au,{view:0,detail:0}),Lz=jr(ah),oy,ly,uc,tg=Ht({},ah,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:B2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==uc&&(uc&&t.type==="mousemove"?(oy=t.screenX-uc.screenX,ly=t.screenY-uc.screenY):ly=oy=0,uc=t),oy)},movementY:function(t){return"movementY"in t?t.movementY:ly}}),LC=jr(tg),Oz=Ht({},tg,{dataTransfer:0}),jz=jr(Oz),Vz=Ht({},ah,{relatedTarget:0}),uy=jr(Vz),Fz=Ht({},Au,{animationName:0,elapsedTime:0,pseudoElement:0}),$z=jr(Fz),Uz=Ht({},Au,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Bz=jr(Uz),zz=Ht({},Au,{data:0}),OC=jr(zz),qz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gz(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Wz[t])?!!e[t]:!1}function B2(){return Gz}var Kz=Ht({},ah,{key:function(t){if(t.key){var e=qz[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=np(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Hz[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:B2,charCode:function(t){return t.type==="keypress"?np(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?np(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Yz=jr(Kz),Xz=Ht({},tg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jC=jr(Xz),Qz=Ht({},ah,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:B2}),Jz=jr(Qz),Zz=Ht({},Au,{propertyName:0,elapsedTime:0,pseudoElement:0}),e7=jr(Zz),t7=Ht({},tg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),n7=jr(t7),r7=[9,13,27,32],z2=bs&&"CompositionEvent"in window,Qc=null;bs&&"documentMode"in document&&(Qc=document.documentMode);var i7=bs&&"TextEvent"in window&&!Qc,D6=bs&&(!z2||Qc&&8<Qc&&11>=Qc),VC=" ",FC=!1;function M6(t,e){switch(t){case"keyup":return r7.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function L6(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Cl=!1;function s7(t,e){switch(t){case"compositionend":return L6(e);case"keypress":return e.which!==32?null:(FC=!0,VC);case"textInput":return t=e.data,t===VC&&FC?null:t;default:return null}}function a7(t,e){if(Cl)return t==="compositionend"||!z2&&M6(t,e)?(t=P6(),tp=$2=ca=null,Cl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return D6&&e.locale!=="ko"?null:e.data;default:return null}}var o7={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $C(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!o7[t.type]:e==="textarea"}function O6(t,e,r,i){f6(i),e=jp(e,"onChange"),0<e.length&&(r=new U2("onChange","change",null,r,i),t.push({event:r,listeners:e}))}var Jc=null,wd=null;function l7(t){G6(t,0)}function ng(t){var e=Al(t);if(a6(e))return t}function u7(t,e){if(t==="change")return e}var j6=!1;if(bs){var cy;if(bs){var dy="oninput"in document;if(!dy){var UC=document.createElement("div");UC.setAttribute("oninput","return;"),dy=typeof UC.oninput=="function"}cy=dy}else cy=!1;j6=cy&&(!document.documentMode||9<document.documentMode)}function BC(){Jc&&(Jc.detachEvent("onpropertychange",V6),wd=Jc=null)}function V6(t){if(t.propertyName==="value"&&ng(wd)){var e=[];O6(e,wd,t,L2(t)),v6(l7,e)}}function c7(t,e,r){t==="focusin"?(BC(),Jc=e,wd=r,Jc.attachEvent("onpropertychange",V6)):t==="focusout"&&BC()}function d7(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ng(wd)}function h7(t,e){if(t==="click")return ng(e)}function f7(t,e){if(t==="input"||t==="change")return ng(e)}function p7(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var yi=typeof Object.is=="function"?Object.is:p7;function bd(t,e){if(yi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!mx.call(e,s)||!yi(t[s],e[s]))return!1}return!0}function zC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function qC(t,e){var r=zC(t);t=0;for(var i;r;){if(r.nodeType===3){if(i=t+r.textContent.length,t<=e&&i>=e)return{node:r,offset:e-t};t=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zC(r)}}function F6(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?F6(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function $6(){for(var t=window,e=Ap();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Ap(t.document)}return e}function q2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function m7(t){var e=$6(),r=t.focusedElem,i=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&F6(r.ownerDocument.documentElement,r)){if(i!==null&&q2(r)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,a=Math.min(i.start,s);i=i.end===void 0?a:Math.min(i.end,s),!t.extend&&a>i&&(s=i,i=a,a=s),s=qC(r,a);var o=qC(r,i);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var g7=bs&&"documentMode"in document&&11>=document.documentMode,kl=null,Mx=null,Zc=null,Lx=!1;function HC(t,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Lx||kl==null||kl!==Ap(i)||(i=kl,"selectionStart"in i&&q2(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Zc&&bd(Zc,i)||(Zc=i,i=jp(Mx,"onSelect"),0<i.length&&(e=new U2("onSelect","select",null,e,r),t.push({event:e,listeners:i}),e.target=kl)))}function gf(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Nl={animationend:gf("Animation","AnimationEnd"),animationiteration:gf("Animation","AnimationIteration"),animationstart:gf("Animation","AnimationStart"),transitionend:gf("Transition","TransitionEnd")},hy={},U6={};bs&&(U6=document.createElement("div").style,"AnimationEvent"in window||(delete Nl.animationend.animation,delete Nl.animationiteration.animation,delete Nl.animationstart.animation),"TransitionEvent"in window||delete Nl.transitionend.transition);function rg(t){if(hy[t])return hy[t];if(!Nl[t])return t;var e=Nl[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in U6)return hy[t]=e[r];return t}var B6=rg("animationend"),z6=rg("animationiteration"),q6=rg("animationstart"),H6=rg("transitionend"),W6=new Map,WC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qa(t,e){W6.set(t,e),Bo(e,[t])}for(var fy=0;fy<WC.length;fy++){var py=WC[fy],v7=py.toLowerCase(),y7=py[0].toUpperCase()+py.slice(1);qa(v7,"on"+y7)}qa(B6,"onAnimationEnd");qa(z6,"onAnimationIteration");qa(q6,"onAnimationStart");qa("dblclick","onDoubleClick");qa("focusin","onFocus");qa("focusout","onBlur");qa(H6,"onTransitionEnd");tu("onMouseEnter",["mouseout","mouseover"]);tu("onMouseLeave",["mouseout","mouseover"]);tu("onPointerEnter",["pointerout","pointerover"]);tu("onPointerLeave",["pointerout","pointerover"]);Bo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bo("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_7=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pc));function GC(t,e,r){var i=t.type||"unknown-event";t.currentTarget=r,vz(i,e,void 0,t),t.currentTarget=null}function G6(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var i=t[r],s=i.event;i=i.listeners;e:{var a=void 0;if(e)for(var o=i.length-1;0<=o;o--){var l=i[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==a&&s.isPropagationStopped())break e;GC(s,l,c),a=u}else for(o=0;o<i.length;o++){if(l=i[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==a&&s.isPropagationStopped())break e;GC(s,l,c),a=u}}}if(Pp)throw t=Ax,Pp=!1,Ax=null,t}function Dt(t,e){var r=e[$x];r===void 0&&(r=e[$x]=new Set);var i=t+"__bubble";r.has(i)||(K6(e,t,2,!1),r.add(i))}function my(t,e,r){var i=0;e&&(i|=4),K6(r,t,i,e)}var vf="_reactListening"+Math.random().toString(36).slice(2);function xd(t){if(!t[vf]){t[vf]=!0,t6.forEach(function(r){r!=="selectionchange"&&(_7.has(r)||my(r,!1,t),my(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vf]||(e[vf]=!0,my("selectionchange",!1,e))}}function K6(t,e,r,i){switch(R6(e)){case 1:var s=Dz;break;case 4:s=Mz;break;default:s=F2}r=s.bind(null,e,r,t),s=void 0,!Nx||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function gy(t,e,r,i,s){var a=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=po(l),o===null)return;if(u=o.tag,u===5||u===6){i=a=o;continue e}l=l.parentNode}}i=i.return}v6(function(){var c=a,d=L2(r),h=[];e:{var f=W6.get(t);if(f!==void 0){var m=U2,v=t;switch(t){case"keypress":if(np(r)===0)break e;case"keydown":case"keyup":m=Yz;break;case"focusin":v="focus",m=uy;break;case"focusout":v="blur",m=uy;break;case"beforeblur":case"afterblur":m=uy;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=LC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=jz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=Jz;break;case B6:case z6:case q6:m=$z;break;case H6:m=e7;break;case"scroll":m=Lz;break;case"wheel":m=n7;break;case"copy":case"cut":case"paste":m=Bz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=jC}var y=(e&4)!==0,b=!y&&t==="scroll",_=y?f!==null?f+"Capture":null:f;y=[];for(var w=c,E;w!==null;){E=w;var N=E.stateNode;if(E.tag===5&&N!==null&&(E=N,_!==null&&(N=gd(w,_),N!=null&&y.push(Ed(w,N,E)))),b)break;w=w.return}0<y.length&&(f=new m(f,v,null,r,d),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&r!==Cx&&(v=r.relatedTarget||r.fromElement)&&(po(v)||v[xs]))break e;if((m||f)&&(f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window,m?(v=r.relatedTarget||r.toElement,m=c,v=v?po(v):null,v!==null&&(b=zo(v),v!==b||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=c),m!==v)){if(y=LC,N="onMouseLeave",_="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(y=jC,N="onPointerLeave",_="onPointerEnter",w="pointer"),b=m==null?f:Al(m),E=v==null?f:Al(v),f=new y(N,w+"leave",m,r,d),f.target=b,f.relatedTarget=E,N=null,po(d)===c&&(y=new y(_,w+"enter",v,r,d),y.target=E,y.relatedTarget=b,N=y),b=N,m&&v)t:{for(y=m,_=v,w=0,E=y;E;E=cl(E))w++;for(E=0,N=_;N;N=cl(N))E++;for(;0<w-E;)y=cl(y),w--;for(;0<E-w;)_=cl(_),E--;for(;w--;){if(y===_||_!==null&&y===_.alternate)break t;y=cl(y),_=cl(_)}y=null}else y=null;m!==null&&KC(h,f,m,y,!1),v!==null&&b!==null&&KC(h,b,v,y,!0)}}e:{if(f=c?Al(c):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var M=u7;else if($C(f))if(j6)M=f7;else{M=d7;var O=c7}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(M=h7);if(M&&(M=M(t,c))){O6(h,M,r,d);break e}O&&O(t,f,c),t==="focusout"&&(O=f._wrapperState)&&O.controlled&&f.type==="number"&&xx(f,"number",f.value)}switch(O=c?Al(c):window,t){case"focusin":($C(O)||O.contentEditable==="true")&&(kl=O,Mx=c,Zc=null);break;case"focusout":Zc=Mx=kl=null;break;case"mousedown":Lx=!0;break;case"contextmenu":case"mouseup":case"dragend":Lx=!1,HC(h,r,d);break;case"selectionchange":if(g7)break;case"keydown":case"keyup":HC(h,r,d)}var A;if(z2)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Cl?M6(t,r)&&(D="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(D="onCompositionStart");D&&(D6&&r.locale!=="ko"&&(Cl||D!=="onCompositionStart"?D==="onCompositionEnd"&&Cl&&(A=P6()):(ca=d,$2="value"in ca?ca.value:ca.textContent,Cl=!0)),O=jp(c,D),0<O.length&&(D=new OC(D,t,null,r,d),h.push({event:D,listeners:O}),A?D.data=A:(A=L6(r),A!==null&&(D.data=A)))),(A=i7?s7(t,r):a7(t,r))&&(c=jp(c,"onBeforeInput"),0<c.length&&(d=new OC("onBeforeInput","beforeinput",null,r,d),h.push({event:d,listeners:c}),d.data=A))}G6(h,e)})}function Ed(t,e,r){return{instance:t,listener:e,currentTarget:r}}function jp(t,e){for(var r=e+"Capture",i=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=gd(t,r),a!=null&&i.unshift(Ed(t,a,s)),a=gd(t,e),a!=null&&i.push(Ed(t,a,s))),t=t.return}return i}function cl(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function KC(t,e,r,i,s){for(var a=e._reactName,o=[];r!==null&&r!==i;){var l=r,u=l.alternate,c=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&c!==null&&(l=c,s?(u=gd(r,a),u!=null&&o.unshift(Ed(r,u,l))):s||(u=gd(r,a),u!=null&&o.push(Ed(r,u,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var w7=/\r\n?/g,b7=/\u0000|\uFFFD/g;function YC(t){return(typeof t=="string"?t:""+t).replace(w7,`
`).replace(b7,"")}function yf(t,e,r){if(e=YC(e),YC(t)!==e&&r)throw Error(ve(425))}function Vp(){}var Ox=null,jx=null;function Vx(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Fx=typeof setTimeout=="function"?setTimeout:void 0,x7=typeof clearTimeout=="function"?clearTimeout:void 0,XC=typeof Promise=="function"?Promise:void 0,E7=typeof queueMicrotask=="function"?queueMicrotask:typeof XC<"u"?function(t){return XC.resolve(null).then(t).catch(S7)}:Fx;function S7(t){setTimeout(function(){throw t})}function vy(t,e){var r=e,i=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(i===0){t.removeChild(s),_d(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=s}while(r);_d(e)}function va(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function QC(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Ru=Math.random().toString(36).slice(2),Pi="__reactFiber$"+Ru,Sd="__reactProps$"+Ru,xs="__reactContainer$"+Ru,$x="__reactEvents$"+Ru,T7="__reactListeners$"+Ru,I7="__reactHandles$"+Ru;function po(t){var e=t[Pi];if(e)return e;for(var r=t.parentNode;r;){if(e=r[xs]||r[Pi]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=QC(t);t!==null;){if(r=t[Pi])return r;t=QC(t)}return e}t=r,r=t.parentNode}return null}function oh(t){return t=t[Pi]||t[xs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Al(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ve(33))}function ig(t){return t[Sd]||null}var Ux=[],Rl=-1;function Ha(t){return{current:t}}function Mt(t){0>Rl||(t.current=Ux[Rl],Ux[Rl]=null,Rl--)}function kt(t,e){Rl++,Ux[Rl]=t.current,t.current=e}var Pa={},Kn=Ha(Pa),mr=Ha(!1),Io=Pa;function nu(t,e){var r=t.type.contextTypes;if(!r)return Pa;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=e[a];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function gr(t){return t=t.childContextTypes,t!=null}function Fp(){Mt(mr),Mt(Kn)}function JC(t,e,r){if(Kn.current!==Pa)throw Error(ve(168));kt(Kn,e),kt(mr,r)}function Y6(t,e,r){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(ve(108,cz(t)||"Unknown",s));return Ht({},r,i)}function $p(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pa,Io=Kn.current,kt(Kn,t),kt(mr,mr.current),!0}function ZC(t,e,r){var i=t.stateNode;if(!i)throw Error(ve(169));r?(t=Y6(t,e,Io),i.__reactInternalMemoizedMergedChildContext=t,Mt(mr),Mt(Kn),kt(Kn,t)):Mt(mr),kt(mr,r)}var os=null,sg=!1,yy=!1;function X6(t){os===null?os=[t]:os.push(t)}function C7(t){sg=!0,X6(t)}function Wa(){if(!yy&&os!==null){yy=!0;var t=0,e=_t;try{var r=os;for(_t=1;t<r.length;t++){var i=r[t];do i=i(!0);while(i!==null)}os=null,sg=!1}catch(s){throw os!==null&&(os=os.slice(t+1)),b6(O2,Wa),s}finally{_t=e,yy=!1}}return null}var Pl=[],Dl=0,Up=null,Bp=0,Br=[],zr=0,Co=null,ls=1,us="";function so(t,e){Pl[Dl++]=Bp,Pl[Dl++]=Up,Up=t,Bp=e}function Q6(t,e,r){Br[zr++]=ls,Br[zr++]=us,Br[zr++]=Co,Co=t;var i=ls;t=us;var s=32-mi(i)-1;i&=~(1<<s),r+=1;var a=32-mi(e)+s;if(30<a){var o=s-s%5;a=(i&(1<<o)-1).toString(32),i>>=o,s-=o,ls=1<<32-mi(e)+s|r<<s|i,us=a+t}else ls=1<<a|r<<s|i,us=t}function H2(t){t.return!==null&&(so(t,1),Q6(t,1,0))}function W2(t){for(;t===Up;)Up=Pl[--Dl],Pl[Dl]=null,Bp=Pl[--Dl],Pl[Dl]=null;for(;t===Co;)Co=Br[--zr],Br[zr]=null,us=Br[--zr],Br[zr]=null,ls=Br[--zr],Br[zr]=null}var Nr=null,Ir=null,Vt=!1,hi=null;function J6(t,e){var r=Gr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function ek(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Nr=t,Ir=va(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Nr=t,Ir=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Co!==null?{id:ls,overflow:us}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Gr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Nr=t,Ir=null,!0):!1;default:return!1}}function Bx(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zx(t){if(Vt){var e=Ir;if(e){var r=e;if(!ek(t,e)){if(Bx(t))throw Error(ve(418));e=va(r.nextSibling);var i=Nr;e&&ek(t,e)?J6(i,r):(t.flags=t.flags&-4097|2,Vt=!1,Nr=t)}}else{if(Bx(t))throw Error(ve(418));t.flags=t.flags&-4097|2,Vt=!1,Nr=t}}}function tk(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Nr=t}function _f(t){if(t!==Nr)return!1;if(!Vt)return tk(t),Vt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Vx(t.type,t.memoizedProps)),e&&(e=Ir)){if(Bx(t))throw Z6(),Error(ve(418));for(;e;)J6(t,e),e=va(e.nextSibling)}if(tk(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ve(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Ir=va(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Ir=null}}else Ir=Nr?va(t.stateNode.nextSibling):null;return!0}function Z6(){for(var t=Ir;t;)t=va(t.nextSibling)}function ru(){Ir=Nr=null,Vt=!1}function G2(t){hi===null?hi=[t]:hi.push(t)}var k7=Ms.ReactCurrentBatchConfig;function cc(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ve(309));var i=r.stateNode}if(!i)throw Error(ve(147,t));var s=i,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(ve(284));if(!r._owner)throw Error(ve(290,t))}return t}function wf(t,e){throw t=Object.prototype.toString.call(e),Error(ve(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function nk(t){var e=t._init;return e(t._payload)}function eO(t){function e(_,w){if(t){var E=_.deletions;E===null?(_.deletions=[w],_.flags|=16):E.push(w)}}function r(_,w){if(!t)return null;for(;w!==null;)e(_,w),w=w.sibling;return null}function i(_,w){for(_=new Map;w!==null;)w.key!==null?_.set(w.key,w):_.set(w.index,w),w=w.sibling;return _}function s(_,w){return _=ba(_,w),_.index=0,_.sibling=null,_}function a(_,w,E){return _.index=E,t?(E=_.alternate,E!==null?(E=E.index,E<w?(_.flags|=2,w):E):(_.flags|=2,w)):(_.flags|=1048576,w)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function l(_,w,E,N){return w===null||w.tag!==6?(w=Ty(E,_.mode,N),w.return=_,w):(w=s(w,E),w.return=_,w)}function u(_,w,E,N){var M=E.type;return M===Il?d(_,w,E.props.children,N,E.key):w!==null&&(w.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Qs&&nk(M)===w.type)?(N=s(w,E.props),N.ref=cc(_,w,E),N.return=_,N):(N=up(E.type,E.key,E.props,null,_.mode,N),N.ref=cc(_,w,E),N.return=_,N)}function c(_,w,E,N){return w===null||w.tag!==4||w.stateNode.containerInfo!==E.containerInfo||w.stateNode.implementation!==E.implementation?(w=Iy(E,_.mode,N),w.return=_,w):(w=s(w,E.children||[]),w.return=_,w)}function d(_,w,E,N,M){return w===null||w.tag!==7?(w=Eo(E,_.mode,N,M),w.return=_,w):(w=s(w,E),w.return=_,w)}function h(_,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Ty(""+w,_.mode,E),w.return=_,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case uf:return E=up(w.type,w.key,w.props,null,_.mode,E),E.ref=cc(_,null,w),E.return=_,E;case Tl:return w=Iy(w,_.mode,E),w.return=_,w;case Qs:var N=w._init;return h(_,N(w._payload),E)}if(Ac(w)||sc(w))return w=Eo(w,_.mode,E,null),w.return=_,w;wf(_,w)}return null}function f(_,w,E,N){var M=w!==null?w.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return M!==null?null:l(_,w,""+E,N);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case uf:return E.key===M?u(_,w,E,N):null;case Tl:return E.key===M?c(_,w,E,N):null;case Qs:return M=E._init,f(_,w,M(E._payload),N)}if(Ac(E)||sc(E))return M!==null?null:d(_,w,E,N,null);wf(_,E)}return null}function m(_,w,E,N,M){if(typeof N=="string"&&N!==""||typeof N=="number")return _=_.get(E)||null,l(w,_,""+N,M);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case uf:return _=_.get(N.key===null?E:N.key)||null,u(w,_,N,M);case Tl:return _=_.get(N.key===null?E:N.key)||null,c(w,_,N,M);case Qs:var O=N._init;return m(_,w,E,O(N._payload),M)}if(Ac(N)||sc(N))return _=_.get(E)||null,d(w,_,N,M,null);wf(w,N)}return null}function v(_,w,E,N){for(var M=null,O=null,A=w,D=w=0,T=null;A!==null&&D<E.length;D++){A.index>D?(T=A,A=null):T=A.sibling;var I=f(_,A,E[D],N);if(I===null){A===null&&(A=T);break}t&&A&&I.alternate===null&&e(_,A),w=a(I,w,D),O===null?M=I:O.sibling=I,O=I,A=T}if(D===E.length)return r(_,A),Vt&&so(_,D),M;if(A===null){for(;D<E.length;D++)A=h(_,E[D],N),A!==null&&(w=a(A,w,D),O===null?M=A:O.sibling=A,O=A);return Vt&&so(_,D),M}for(A=i(_,A);D<E.length;D++)T=m(A,_,D,E[D],N),T!==null&&(t&&T.alternate!==null&&A.delete(T.key===null?D:T.key),w=a(T,w,D),O===null?M=T:O.sibling=T,O=T);return t&&A.forEach(function(x){return e(_,x)}),Vt&&so(_,D),M}function y(_,w,E,N){var M=sc(E);if(typeof M!="function")throw Error(ve(150));if(E=M.call(E),E==null)throw Error(ve(151));for(var O=M=null,A=w,D=w=0,T=null,I=E.next();A!==null&&!I.done;D++,I=E.next()){A.index>D?(T=A,A=null):T=A.sibling;var x=f(_,A,I.value,N);if(x===null){A===null&&(A=T);break}t&&A&&x.alternate===null&&e(_,A),w=a(x,w,D),O===null?M=x:O.sibling=x,O=x,A=T}if(I.done)return r(_,A),Vt&&so(_,D),M;if(A===null){for(;!I.done;D++,I=E.next())I=h(_,I.value,N),I!==null&&(w=a(I,w,D),O===null?M=I:O.sibling=I,O=I);return Vt&&so(_,D),M}for(A=i(_,A);!I.done;D++,I=E.next())I=m(A,_,D,I.value,N),I!==null&&(t&&I.alternate!==null&&A.delete(I.key===null?D:I.key),w=a(I,w,D),O===null?M=I:O.sibling=I,O=I);return t&&A.forEach(function(R){return e(_,R)}),Vt&&so(_,D),M}function b(_,w,E,N){if(typeof E=="object"&&E!==null&&E.type===Il&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case uf:e:{for(var M=E.key,O=w;O!==null;){if(O.key===M){if(M=E.type,M===Il){if(O.tag===7){r(_,O.sibling),w=s(O,E.props.children),w.return=_,_=w;break e}}else if(O.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Qs&&nk(M)===O.type){r(_,O.sibling),w=s(O,E.props),w.ref=cc(_,O,E),w.return=_,_=w;break e}r(_,O);break}else e(_,O);O=O.sibling}E.type===Il?(w=Eo(E.props.children,_.mode,N,E.key),w.return=_,_=w):(N=up(E.type,E.key,E.props,null,_.mode,N),N.ref=cc(_,w,E),N.return=_,_=N)}return o(_);case Tl:e:{for(O=E.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===E.containerInfo&&w.stateNode.implementation===E.implementation){r(_,w.sibling),w=s(w,E.children||[]),w.return=_,_=w;break e}else{r(_,w);break}else e(_,w);w=w.sibling}w=Iy(E,_.mode,N),w.return=_,_=w}return o(_);case Qs:return O=E._init,b(_,w,O(E._payload),N)}if(Ac(E))return v(_,w,E,N);if(sc(E))return y(_,w,E,N);wf(_,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,w!==null&&w.tag===6?(r(_,w.sibling),w=s(w,E),w.return=_,_=w):(r(_,w),w=Ty(E,_.mode,N),w.return=_,_=w),o(_)):r(_,w)}return b}var iu=eO(!0),tO=eO(!1),zp=Ha(null),qp=null,Ml=null,K2=null;function Y2(){K2=Ml=qp=null}function X2(t){var e=zp.current;Mt(zp),t._currentValue=e}function qx(t,e,r){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===r)break;t=t.return}}function ql(t,e){qp=t,K2=Ml=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(hr=!0),t.firstContext=null)}function ei(t){var e=t._currentValue;if(K2!==t)if(t={context:t,memoizedValue:e,next:null},Ml===null){if(qp===null)throw Error(ve(308));Ml=t,qp.dependencies={lanes:0,firstContext:t}}else Ml=Ml.next=t;return e}var mo=null;function Q2(t){mo===null?mo=[t]:mo.push(t)}function nO(t,e,r,i){var s=e.interleaved;return s===null?(r.next=r,Q2(e)):(r.next=s.next,s.next=r),e.interleaved=r,Es(t,i)}function Es(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Js=!1;function J2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rO(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function gs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ya(t,e,r){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,dt&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Es(t,r)}return s=i.interleaved,s===null?(e.next=e,Q2(i)):(e.next=s.next,s.next=e),i.interleaved=e,Es(t,r)}function rp(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,j2(t,r)}}function rk(t,e){var r=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=e:a=a.next=e}else s=a=e;r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:i.shared,effects:i.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Hp(t,e,r,i){var s=t.updateQueue;Js=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?a=c:o.next=c,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=u))}if(a!==null){var h=s.baseState;o=0,d=c=u=null,l=a;do{var f=l.lane,m=l.eventTime;if((i&f)===f){d!==null&&(d=d.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var v=t,y=l;switch(f=e,m=r,y.tag){case 1:if(v=y.payload,typeof v=="function"){h=v.call(m,h,f);break e}h=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=y.payload,f=typeof v=="function"?v.call(m,h,f):v,f==null)break e;h=Ht({},h,f);break e;case 2:Js=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(c=d=m,u=h):d=d.next=m,o|=f;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;f=l,l=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(!0);if(d===null&&(u=h),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);No|=o,t.lanes=o,t.memoizedState=h}}function ik(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=r,typeof s!="function")throw Error(ve(191,s));s.call(i)}}}var lh={},Li=Ha(lh),Td=Ha(lh),Id=Ha(lh);function go(t){if(t===lh)throw Error(ve(174));return t}function Z2(t,e){switch(kt(Id,e),kt(Td,t),kt(Li,lh),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Sx(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Sx(e,t)}Mt(Li),kt(Li,e)}function su(){Mt(Li),Mt(Td),Mt(Id)}function iO(t){go(Id.current);var e=go(Li.current),r=Sx(e,t.type);e!==r&&(kt(Td,t),kt(Li,r))}function eS(t){Td.current===t&&(Mt(Li),Mt(Td))}var Bt=Ha(0);function Wp(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _y=[];function tS(){for(var t=0;t<_y.length;t++)_y[t]._workInProgressVersionPrimary=null;_y.length=0}var ip=Ms.ReactCurrentDispatcher,wy=Ms.ReactCurrentBatchConfig,ko=0,qt=null,un=null,bn=null,Gp=!1,ed=!1,Cd=0,N7=0;function Bn(){throw Error(ve(321))}function nS(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!yi(t[r],e[r]))return!1;return!0}function rS(t,e,r,i,s,a){if(ko=a,qt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ip.current=t===null||t.memoizedState===null?D7:M7,t=r(i,s),ed){a=0;do{if(ed=!1,Cd=0,25<=a)throw Error(ve(301));a+=1,bn=un=null,e.updateQueue=null,ip.current=L7,t=r(i,s)}while(ed)}if(ip.current=Kp,e=un!==null&&un.next!==null,ko=0,bn=un=qt=null,Gp=!1,e)throw Error(ve(300));return t}function iS(){var t=Cd!==0;return Cd=0,t}function Ni(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bn===null?qt.memoizedState=bn=t:bn=bn.next=t,bn}function ti(){if(un===null){var t=qt.alternate;t=t!==null?t.memoizedState:null}else t=un.next;var e=bn===null?qt.memoizedState:bn.next;if(e!==null)bn=e,un=t;else{if(t===null)throw Error(ve(310));un=t,t={memoizedState:un.memoizedState,baseState:un.baseState,baseQueue:un.baseQueue,queue:un.queue,next:null},bn===null?qt.memoizedState=bn=t:bn=bn.next=t}return bn}function kd(t,e){return typeof e=="function"?e(t):e}function by(t){var e=ti(),r=e.queue;if(r===null)throw Error(ve(311));r.lastRenderedReducer=t;var i=un,s=i.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}i.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,i=i.baseState;var l=o=null,u=null,c=a;do{var d=c.lane;if((ko&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var h={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=h,o=i):u=u.next=h,qt.lanes|=d,No|=d}c=c.next}while(c!==null&&c!==a);u===null?o=i:u.next=l,yi(i,e.memoizedState)||(hr=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=u,r.lastRenderedState=i}if(t=r.interleaved,t!==null){s=t;do a=s.lane,qt.lanes|=a,No|=a,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function xy(t){var e=ti(),r=e.queue;if(r===null)throw Error(ve(311));r.lastRenderedReducer=t;var i=r.dispatch,s=r.pending,a=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);yi(a,e.memoizedState)||(hr=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,i]}function sO(){}function aO(t,e){var r=qt,i=ti(),s=e(),a=!yi(i.memoizedState,s);if(a&&(i.memoizedState=s,hr=!0),i=i.queue,sS(uO.bind(null,r,i,t),[t]),i.getSnapshot!==e||a||bn!==null&&bn.memoizedState.tag&1){if(r.flags|=2048,Nd(9,lO.bind(null,r,i,s,e),void 0,null),En===null)throw Error(ve(349));ko&30||oO(r,e,s)}return s}function oO(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=qt.updateQueue,e===null?(e={lastEffect:null,stores:null},qt.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function lO(t,e,r,i){e.value=r,e.getSnapshot=i,cO(e)&&dO(t)}function uO(t,e,r){return r(function(){cO(e)&&dO(t)})}function cO(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!yi(t,r)}catch{return!0}}function dO(t){var e=Es(t,1);e!==null&&gi(e,t,1,-1)}function sk(t){var e=Ni();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kd,lastRenderedState:t},e.queue=t,t=t.dispatch=P7.bind(null,qt,t),[e.memoizedState,t]}function Nd(t,e,r,i){return t={tag:t,create:e,destroy:r,deps:i,next:null},e=qt.updateQueue,e===null?(e={lastEffect:null,stores:null},qt.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(i=r.next,r.next=t,t.next=i,e.lastEffect=t)),t}function hO(){return ti().memoizedState}function sp(t,e,r,i){var s=Ni();qt.flags|=t,s.memoizedState=Nd(1|e,r,void 0,i===void 0?null:i)}function ag(t,e,r,i){var s=ti();i=i===void 0?null:i;var a=void 0;if(un!==null){var o=un.memoizedState;if(a=o.destroy,i!==null&&nS(i,o.deps)){s.memoizedState=Nd(e,r,a,i);return}}qt.flags|=t,s.memoizedState=Nd(1|e,r,a,i)}function ak(t,e){return sp(8390656,8,t,e)}function sS(t,e){return ag(2048,8,t,e)}function fO(t,e){return ag(4,2,t,e)}function pO(t,e){return ag(4,4,t,e)}function mO(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gO(t,e,r){return r=r!=null?r.concat([t]):null,ag(4,4,mO.bind(null,e,t),r)}function aS(){}function vO(t,e){var r=ti();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&nS(e,i[1])?i[0]:(r.memoizedState=[t,e],t)}function yO(t,e){var r=ti();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&nS(e,i[1])?i[0]:(t=t(),r.memoizedState=[t,e],t)}function _O(t,e,r){return ko&21?(yi(r,e)||(r=S6(),qt.lanes|=r,No|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,hr=!0),t.memoizedState=r)}function A7(t,e){var r=_t;_t=r!==0&&4>r?r:4,t(!0);var i=wy.transition;wy.transition={};try{t(!1),e()}finally{_t=r,wy.transition=i}}function wO(){return ti().memoizedState}function R7(t,e,r){var i=wa(t);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},bO(t))xO(e,r);else if(r=nO(t,e,r,i),r!==null){var s=er();gi(r,t,i,s),EO(r,e,i)}}function P7(t,e,r){var i=wa(t),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(bO(t))xO(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,r);if(s.hasEagerState=!0,s.eagerState=l,yi(l,o)){var u=e.interleaved;u===null?(s.next=s,Q2(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=nO(t,e,s,i),r!==null&&(s=er(),gi(r,t,i,s),EO(r,e,i))}}function bO(t){var e=t.alternate;return t===qt||e!==null&&e===qt}function xO(t,e){ed=Gp=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function EO(t,e,r){if(r&4194240){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,j2(t,r)}}var Kp={readContext:ei,useCallback:Bn,useContext:Bn,useEffect:Bn,useImperativeHandle:Bn,useInsertionEffect:Bn,useLayoutEffect:Bn,useMemo:Bn,useReducer:Bn,useRef:Bn,useState:Bn,useDebugValue:Bn,useDeferredValue:Bn,useTransition:Bn,useMutableSource:Bn,useSyncExternalStore:Bn,useId:Bn,unstable_isNewReconciler:!1},D7={readContext:ei,useCallback:function(t,e){return Ni().memoizedState=[t,e===void 0?null:e],t},useContext:ei,useEffect:ak,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,sp(4194308,4,mO.bind(null,e,t),r)},useLayoutEffect:function(t,e){return sp(4194308,4,t,e)},useInsertionEffect:function(t,e){return sp(4,2,t,e)},useMemo:function(t,e){var r=Ni();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var i=Ni();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=R7.bind(null,qt,t),[i.memoizedState,t]},useRef:function(t){var e=Ni();return t={current:t},e.memoizedState=t},useState:sk,useDebugValue:aS,useDeferredValue:function(t){return Ni().memoizedState=t},useTransition:function(){var t=sk(!1),e=t[0];return t=A7.bind(null,t[1]),Ni().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var i=qt,s=Ni();if(Vt){if(r===void 0)throw Error(ve(407));r=r()}else{if(r=e(),En===null)throw Error(ve(349));ko&30||oO(i,e,r)}s.memoizedState=r;var a={value:r,getSnapshot:e};return s.queue=a,ak(uO.bind(null,i,a,t),[t]),i.flags|=2048,Nd(9,lO.bind(null,i,a,r,e),void 0,null),r},useId:function(){var t=Ni(),e=En.identifierPrefix;if(Vt){var r=us,i=ls;r=(i&~(1<<32-mi(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=Cd++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=N7++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},M7={readContext:ei,useCallback:vO,useContext:ei,useEffect:sS,useImperativeHandle:gO,useInsertionEffect:fO,useLayoutEffect:pO,useMemo:yO,useReducer:by,useRef:hO,useState:function(){return by(kd)},useDebugValue:aS,useDeferredValue:function(t){var e=ti();return _O(e,un.memoizedState,t)},useTransition:function(){var t=by(kd)[0],e=ti().memoizedState;return[t,e]},useMutableSource:sO,useSyncExternalStore:aO,useId:wO,unstable_isNewReconciler:!1},L7={readContext:ei,useCallback:vO,useContext:ei,useEffect:sS,useImperativeHandle:gO,useInsertionEffect:fO,useLayoutEffect:pO,useMemo:yO,useReducer:xy,useRef:hO,useState:function(){return xy(kd)},useDebugValue:aS,useDeferredValue:function(t){var e=ti();return un===null?e.memoizedState=t:_O(e,un.memoizedState,t)},useTransition:function(){var t=xy(kd)[0],e=ti().memoizedState;return[t,e]},useMutableSource:sO,useSyncExternalStore:aO,useId:wO,unstable_isNewReconciler:!1};function ui(t,e){if(t&&t.defaultProps){e=Ht({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Hx(t,e,r,i){e=t.memoizedState,r=r(i,e),r=r==null?e:Ht({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var og={isMounted:function(t){return(t=t._reactInternals)?zo(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var i=er(),s=wa(t),a=gs(i,s);a.payload=e,r!=null&&(a.callback=r),e=ya(t,a,s),e!==null&&(gi(e,t,s,i),rp(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var i=er(),s=wa(t),a=gs(i,s);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=ya(t,a,s),e!==null&&(gi(e,t,s,i),rp(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=er(),i=wa(t),s=gs(r,i);s.tag=2,e!=null&&(s.callback=e),e=ya(t,s,i),e!==null&&(gi(e,t,i,r),rp(e,t,i))}};function ok(t,e,r,i,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,a,o):e.prototype&&e.prototype.isPureReactComponent?!bd(r,i)||!bd(s,a):!0}function SO(t,e,r){var i=!1,s=Pa,a=e.contextType;return typeof a=="object"&&a!==null?a=ei(a):(s=gr(e)?Io:Kn.current,i=e.contextTypes,a=(i=i!=null)?nu(t,s):Pa),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=og,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function lk(t,e,r,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==t&&og.enqueueReplaceState(e,e.state,null)}function Wx(t,e,r,i){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},J2(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=ei(a):(a=gr(e)?Io:Kn.current,s.context=nu(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Hx(t,e,a,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&og.enqueueReplaceState(s,s.state,null),Hp(t,r,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function au(t,e){try{var r="",i=e;do r+=uz(i),i=i.return;while(i);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Ey(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Gx(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var O7=typeof WeakMap=="function"?WeakMap:Map;function TO(t,e,r){r=gs(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){Xp||(Xp=!0,rE=i),Gx(t,e)},r}function IO(t,e,r){r=gs(-1,r),r.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;r.payload=function(){return i(s)},r.callback=function(){Gx(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){Gx(t,e),typeof i!="function"&&(_a===null?_a=new Set([this]):_a.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function uk(t,e,r){var i=t.pingCache;if(i===null){i=t.pingCache=new O7;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(r)||(s.add(r),t=X7.bind(null,t,e,r),e.then(t,t))}function ck(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function dk(t,e,r,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=gs(-1,1),e.tag=2,ya(r,e,1))),r.lanes|=1),t)}var j7=Ms.ReactCurrentOwner,hr=!1;function Zn(t,e,r,i){e.child=t===null?tO(e,null,r,i):iu(e,t.child,r,i)}function hk(t,e,r,i,s){r=r.render;var a=e.ref;return ql(e,s),i=rS(t,e,r,i,a,s),r=iS(),t!==null&&!hr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ss(t,e,s)):(Vt&&r&&H2(e),e.flags|=1,Zn(t,e,i,s),e.child)}function fk(t,e,r,i,s){if(t===null){var a=r.type;return typeof a=="function"&&!pS(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,CO(t,e,a,i,s)):(t=up(r.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:bd,r(o,i)&&t.ref===e.ref)return Ss(t,e,s)}return e.flags|=1,t=ba(a,i),t.ref=e.ref,t.return=e,e.child=t}function CO(t,e,r,i,s){if(t!==null){var a=t.memoizedProps;if(bd(a,i)&&t.ref===e.ref)if(hr=!1,e.pendingProps=i=a,(t.lanes&s)!==0)t.flags&131072&&(hr=!0);else return e.lanes=t.lanes,Ss(t,e,s)}return Kx(t,e,r,i,s)}function kO(t,e,r){var i=e.pendingProps,s=i.children,a=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},kt(Ol,Sr),Sr|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,kt(Ol,Sr),Sr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=a!==null?a.baseLanes:r,kt(Ol,Sr),Sr|=i}else a!==null?(i=a.baseLanes|r,e.memoizedState=null):i=r,kt(Ol,Sr),Sr|=i;return Zn(t,e,s,r),e.child}function NO(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function Kx(t,e,r,i,s){var a=gr(r)?Io:Kn.current;return a=nu(e,a),ql(e,s),r=rS(t,e,r,i,a,s),i=iS(),t!==null&&!hr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Ss(t,e,s)):(Vt&&i&&H2(e),e.flags|=1,Zn(t,e,r,s),e.child)}function pk(t,e,r,i,s){if(gr(r)){var a=!0;$p(e)}else a=!1;if(ql(e,s),e.stateNode===null)ap(t,e),SO(e,r,i),Wx(e,r,i,s),i=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=ei(c):(c=gr(r)?Io:Kn.current,c=nu(e,c));var d=r.getDerivedStateFromProps,h=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||u!==c)&&lk(e,o,i,c),Js=!1;var f=e.memoizedState;o.state=f,Hp(e,i,o,s),u=e.memoizedState,l!==i||f!==u||mr.current||Js?(typeof d=="function"&&(Hx(e,r,d,i),u=e.memoizedState),(l=Js||ok(e,r,l,i,f,u,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),o.props=i,o.state=u,o.context=c,i=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,rO(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:ui(e.type,l),o.props=c,h=e.pendingProps,f=o.context,u=r.contextType,typeof u=="object"&&u!==null?u=ei(u):(u=gr(r)?Io:Kn.current,u=nu(e,u));var m=r.getDerivedStateFromProps;(d=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==u)&&lk(e,o,i,u),Js=!1,f=e.memoizedState,o.state=f,Hp(e,i,o,s);var v=e.memoizedState;l!==h||f!==v||mr.current||Js?(typeof m=="function"&&(Hx(e,r,m,i),v=e.memoizedState),(c=Js||ok(e,r,c,i,f,v,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=u,i=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return Yx(t,e,r,i,a,s)}function Yx(t,e,r,i,s,a){NO(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&ZC(e,r,!1),Ss(t,e,a);i=e.stateNode,j7.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=iu(e,t.child,null,a),e.child=iu(e,null,l,a)):Zn(t,e,l,a),e.memoizedState=i.state,s&&ZC(e,r,!0),e.child}function AO(t){var e=t.stateNode;e.pendingContext?JC(t,e.pendingContext,e.pendingContext!==e.context):e.context&&JC(t,e.context,!1),Z2(t,e.containerInfo)}function mk(t,e,r,i,s){return ru(),G2(s),e.flags|=256,Zn(t,e,r,i),e.child}var Xx={dehydrated:null,treeContext:null,retryLane:0};function Qx(t){return{baseLanes:t,cachePool:null,transitions:null}}function RO(t,e,r){var i=e.pendingProps,s=Bt.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),kt(Bt,s&1),t===null)return zx(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,a?(i=e.mode,a=e.child,o={mode:"hidden",children:o},!(i&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=cg(o,i,0,null),t=Eo(t,i,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Qx(r),e.memoizedState=Xx,t):oS(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return V7(t,e,o,i,l,s,r);if(a){a=i.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=ba(s,u),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=ba(l,a):(a=Eo(a,o,r,null),a.flags|=2),a.return=e,i.return=e,i.sibling=a,e.child=i,i=a,a=e.child,o=t.child.memoizedState,o=o===null?Qx(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=Xx,i}return a=t.child,t=a.sibling,i=ba(a,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=i,e.memoizedState=null,i}function oS(t,e){return e=cg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function bf(t,e,r,i){return i!==null&&G2(i),iu(e,t.child,null,r),t=oS(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function V7(t,e,r,i,s,a,o){if(r)return e.flags&256?(e.flags&=-257,i=Ey(Error(ve(422))),bf(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=i.fallback,s=e.mode,i=cg({mode:"visible",children:i.children},s,0,null),a=Eo(a,s,o,null),a.flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,e.mode&1&&iu(e,t.child,null,o),e.child.memoizedState=Qx(o),e.memoizedState=Xx,a);if(!(e.mode&1))return bf(t,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,a=Error(ve(419)),i=Ey(a,i,void 0),bf(t,e,o,i)}if(l=(o&t.childLanes)!==0,hr||l){if(i=En,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,Es(t,s),gi(i,t,s,-1))}return fS(),i=Ey(Error(ve(421))),bf(t,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Q7.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Ir=va(s.nextSibling),Nr=e,Vt=!0,hi=null,t!==null&&(Br[zr++]=ls,Br[zr++]=us,Br[zr++]=Co,ls=t.id,us=t.overflow,Co=e),e=oS(e,i.children),e.flags|=4096,e)}function gk(t,e,r){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),qx(t.return,e,r)}function Sy(t,e,r,i,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=r,a.tailMode=s)}function PO(t,e,r){var i=e.pendingProps,s=i.revealOrder,a=i.tail;if(Zn(t,e,i.children,r),i=Bt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gk(t,r,e);else if(t.tag===19)gk(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(kt(Bt,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&Wp(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Sy(e,!1,s,r,a);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Wp(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Sy(e,!0,r,null,a);break;case"together":Sy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ap(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ss(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),No|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ve(153));if(e.child!==null){for(t=e.child,r=ba(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ba(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function F7(t,e,r){switch(e.tag){case 3:AO(e),ru();break;case 5:iO(e);break;case 1:gr(e.type)&&$p(e);break;case 4:Z2(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;kt(zp,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(kt(Bt,Bt.current&1),e.flags|=128,null):r&e.child.childLanes?RO(t,e,r):(kt(Bt,Bt.current&1),t=Ss(t,e,r),t!==null?t.sibling:null);kt(Bt,Bt.current&1);break;case 19:if(i=(r&e.childLanes)!==0,t.flags&128){if(i)return PO(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),kt(Bt,Bt.current),i)break;return null;case 22:case 23:return e.lanes=0,kO(t,e,r)}return Ss(t,e,r)}var DO,Jx,MO,LO;DO=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Jx=function(){};MO=function(t,e,r,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,go(Li.current);var a=null;switch(r){case"input":s=wx(t,s),i=wx(t,i),a=[];break;case"select":s=Ht({},s,{value:void 0}),i=Ht({},i,{value:void 0}),a=[];break;case"textarea":s=Ex(t,s),i=Ex(t,i),a=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Vp)}Tx(r,i);var o;r=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(pd.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in i){var u=i[c];if(l=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(a||(a=[]),a.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(pd.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Dt("scroll",t),a||l===u||(a=[])):(a=a||[]).push(c,u))}r&&(a=a||[]).push("style",r);var c=a;(e.updateQueue=c)&&(e.flags|=4)}};LO=function(t,e,r,i){r!==i&&(e.flags|=4)};function dc(t,e){if(!Vt)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function zn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,i=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=r,e}function $7(t,e,r){var i=e.pendingProps;switch(W2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return zn(e),null;case 1:return gr(e.type)&&Fp(),zn(e),null;case 3:return i=e.stateNode,su(),Mt(mr),Mt(Kn),tS(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(_f(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,hi!==null&&(aE(hi),hi=null))),Jx(t,e),zn(e),null;case 5:eS(e);var s=go(Id.current);if(r=e.type,t!==null&&e.stateNode!=null)MO(t,e,r,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ve(166));return zn(e),null}if(t=go(Li.current),_f(e)){i=e.stateNode,r=e.type;var a=e.memoizedProps;switch(i[Pi]=e,i[Sd]=a,t=(e.mode&1)!==0,r){case"dialog":Dt("cancel",i),Dt("close",i);break;case"iframe":case"object":case"embed":Dt("load",i);break;case"video":case"audio":for(s=0;s<Pc.length;s++)Dt(Pc[s],i);break;case"source":Dt("error",i);break;case"img":case"image":case"link":Dt("error",i),Dt("load",i);break;case"details":Dt("toggle",i);break;case"input":TC(i,a),Dt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},Dt("invalid",i);break;case"textarea":CC(i,a),Dt("invalid",i)}Tx(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?i.textContent!==l&&(a.suppressHydrationWarning!==!0&&yf(i.textContent,l,t),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&yf(i.textContent,l,t),s=["children",""+l]):pd.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Dt("scroll",i)}switch(r){case"input":cf(i),IC(i,a,!0);break;case"textarea":cf(i),kC(i);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(i.onclick=Vp)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=u6(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(r,{is:i.is}):(t=o.createElement(r),r==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,r),t[Pi]=e,t[Sd]=i,DO(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ix(r,i),r){case"dialog":Dt("cancel",t),Dt("close",t),s=i;break;case"iframe":case"object":case"embed":Dt("load",t),s=i;break;case"video":case"audio":for(s=0;s<Pc.length;s++)Dt(Pc[s],t);s=i;break;case"source":Dt("error",t),s=i;break;case"img":case"image":case"link":Dt("error",t),Dt("load",t),s=i;break;case"details":Dt("toggle",t),s=i;break;case"input":TC(t,i),s=wx(t,i),Dt("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Ht({},i,{value:void 0}),Dt("invalid",t);break;case"textarea":CC(t,i),s=Ex(t,i),Dt("invalid",t);break;default:s=i}Tx(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?h6(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&c6(t,u)):a==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&md(t,u):typeof u=="number"&&md(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(pd.hasOwnProperty(a)?u!=null&&a==="onScroll"&&Dt("scroll",t):u!=null&&R2(t,a,u,o))}switch(r){case"input":cf(t),IC(t,i,!1);break;case"textarea":cf(t),kC(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Ra(i.value));break;case"select":t.multiple=!!i.multiple,a=i.value,a!=null?$l(t,!!i.multiple,a,!1):i.defaultValue!=null&&$l(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Vp)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return zn(e),null;case 6:if(t&&e.stateNode!=null)LO(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ve(166));if(r=go(Id.current),go(Li.current),_f(e)){if(i=e.stateNode,r=e.memoizedProps,i[Pi]=e,(a=i.nodeValue!==r)&&(t=Nr,t!==null))switch(t.tag){case 3:yf(i.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yf(i.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Pi]=e,e.stateNode=i}return zn(e),null;case 13:if(Mt(Bt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Vt&&Ir!==null&&e.mode&1&&!(e.flags&128))Z6(),ru(),e.flags|=98560,a=!1;else if(a=_f(e),i!==null&&i.dehydrated!==null){if(t===null){if(!a)throw Error(ve(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ve(317));a[Pi]=e}else ru(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;zn(e),a=!1}else hi!==null&&(aE(hi),hi=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Bt.current&1?fn===0&&(fn=3):fS())),e.updateQueue!==null&&(e.flags|=4),zn(e),null);case 4:return su(),Jx(t,e),t===null&&xd(e.stateNode.containerInfo),zn(e),null;case 10:return X2(e.type._context),zn(e),null;case 17:return gr(e.type)&&Fp(),zn(e),null;case 19:if(Mt(Bt),a=e.memoizedState,a===null)return zn(e),null;if(i=(e.flags&128)!==0,o=a.rendering,o===null)if(i)dc(a,!1);else{if(fn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Wp(t),o!==null){for(e.flags|=128,dc(a,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)a=r,t=i,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return kt(Bt,Bt.current&1|2),e.child}t=t.sibling}a.tail!==null&&Jt()>ou&&(e.flags|=128,i=!0,dc(a,!1),e.lanes=4194304)}else{if(!i)if(t=Wp(o),t!==null){if(e.flags|=128,i=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),dc(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Vt)return zn(e),null}else 2*Jt()-a.renderingStartTime>ou&&r!==1073741824&&(e.flags|=128,i=!0,dc(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Jt(),e.sibling=null,r=Bt.current,kt(Bt,i?r&1|2:r&1),e):(zn(e),null);case 22:case 23:return hS(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Sr&1073741824&&(zn(e),e.subtreeFlags&6&&(e.flags|=8192)):zn(e),null;case 24:return null;case 25:return null}throw Error(ve(156,e.tag))}function U7(t,e){switch(W2(e),e.tag){case 1:return gr(e.type)&&Fp(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return su(),Mt(mr),Mt(Kn),tS(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return eS(e),null;case 13:if(Mt(Bt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ve(340));ru()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Mt(Bt),null;case 4:return su(),null;case 10:return X2(e.type._context),null;case 22:case 23:return hS(),null;case 24:return null;default:return null}}var xf=!1,Wn=!1,B7=typeof WeakSet=="function"?WeakSet:Set,Pe=null;function Ll(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Kt(t,e,i)}else r.current=null}function Zx(t,e,r){try{r()}catch(i){Kt(t,e,i)}}var vk=!1;function z7(t,e){if(Ox=Lp,t=$6(),q2(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,u=-1,c=0,d=0,h=t,f=null;t:for(;;){for(var m;h!==r||s!==0&&h.nodeType!==3||(l=o+s),h!==a||i!==0&&h.nodeType!==3||(u=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===r&&++c===s&&(l=o),f===a&&++d===i&&(u=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(jx={focusedElem:t,selectionRange:r},Lp=!1,Pe=e;Pe!==null;)if(e=Pe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Pe=t;else for(;Pe!==null;){e=Pe;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var y=v.memoizedProps,b=v.memoizedState,_=e.stateNode,w=_.getSnapshotBeforeUpdate(e.elementType===e.type?y:ui(e.type,y),b);_.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ve(163))}}catch(N){Kt(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,Pe=t;break}Pe=e.return}return v=vk,vk=!1,v}function td(t,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&Zx(e,r,a)}s=s.next}while(s!==i)}}function lg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function eE(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function OO(t){var e=t.alternate;e!==null&&(t.alternate=null,OO(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pi],delete e[Sd],delete e[$x],delete e[T7],delete e[I7])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function jO(t){return t.tag===5||t.tag===3||t.tag===4}function yk(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jO(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function tE(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Vp));else if(i!==4&&(t=t.child,t!==null))for(tE(t,e,r),t=t.sibling;t!==null;)tE(t,e,r),t=t.sibling}function nE(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(nE(t,e,r),t=t.sibling;t!==null;)nE(t,e,r),t=t.sibling}var Rn=null,ci=!1;function Ws(t,e,r){for(r=r.child;r!==null;)VO(t,e,r),r=r.sibling}function VO(t,e,r){if(Mi&&typeof Mi.onCommitFiberUnmount=="function")try{Mi.onCommitFiberUnmount(eg,r)}catch{}switch(r.tag){case 5:Wn||Ll(r,e);case 6:var i=Rn,s=ci;Rn=null,Ws(t,e,r),Rn=i,ci=s,Rn!==null&&(ci?(t=Rn,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Rn.removeChild(r.stateNode));break;case 18:Rn!==null&&(ci?(t=Rn,r=r.stateNode,t.nodeType===8?vy(t.parentNode,r):t.nodeType===1&&vy(t,r),_d(t)):vy(Rn,r.stateNode));break;case 4:i=Rn,s=ci,Rn=r.stateNode.containerInfo,ci=!0,Ws(t,e,r),Rn=i,ci=s;break;case 0:case 11:case 14:case 15:if(!Wn&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Zx(r,e,o),s=s.next}while(s!==i)}Ws(t,e,r);break;case 1:if(!Wn&&(Ll(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(l){Kt(r,e,l)}Ws(t,e,r);break;case 21:Ws(t,e,r);break;case 22:r.mode&1?(Wn=(i=Wn)||r.memoizedState!==null,Ws(t,e,r),Wn=i):Ws(t,e,r);break;default:Ws(t,e,r)}}function _k(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new B7),e.forEach(function(i){var s=J7.bind(null,t,i);r.has(i)||(r.add(i),i.then(s,s))})}}function oi(t,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Rn=l.stateNode,ci=!1;break e;case 3:Rn=l.stateNode.containerInfo,ci=!0;break e;case 4:Rn=l.stateNode.containerInfo,ci=!0;break e}l=l.return}if(Rn===null)throw Error(ve(160));VO(a,o,s),Rn=null,ci=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Kt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)FO(e,t),e=e.sibling}function FO(t,e){var r=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(oi(e,t),Ii(t),i&4){try{td(3,t,t.return),lg(3,t)}catch(y){Kt(t,t.return,y)}try{td(5,t,t.return)}catch(y){Kt(t,t.return,y)}}break;case 1:oi(e,t),Ii(t),i&512&&r!==null&&Ll(r,r.return);break;case 5:if(oi(e,t),Ii(t),i&512&&r!==null&&Ll(r,r.return),t.flags&32){var s=t.stateNode;try{md(s,"")}catch(y){Kt(t,t.return,y)}}if(i&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&o6(s,a),Ix(l,o);var c=Ix(l,a);for(o=0;o<u.length;o+=2){var d=u[o],h=u[o+1];d==="style"?h6(s,h):d==="dangerouslySetInnerHTML"?c6(s,h):d==="children"?md(s,h):R2(s,d,h,c)}switch(l){case"input":bx(s,a);break;case"textarea":l6(s,a);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?$l(s,!!a.multiple,m,!1):f!==!!a.multiple&&(a.defaultValue!=null?$l(s,!!a.multiple,a.defaultValue,!0):$l(s,!!a.multiple,a.multiple?[]:"",!1))}s[Sd]=a}catch(y){Kt(t,t.return,y)}}break;case 6:if(oi(e,t),Ii(t),i&4){if(t.stateNode===null)throw Error(ve(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(y){Kt(t,t.return,y)}}break;case 3:if(oi(e,t),Ii(t),i&4&&r!==null&&r.memoizedState.isDehydrated)try{_d(e.containerInfo)}catch(y){Kt(t,t.return,y)}break;case 4:oi(e,t),Ii(t);break;case 13:oi(e,t),Ii(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(cS=Jt())),i&4&&_k(t);break;case 22:if(d=r!==null&&r.memoizedState!==null,t.mode&1?(Wn=(c=Wn)||d,oi(e,t),Wn=c):oi(e,t),Ii(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Pe=t,d=t.child;d!==null;){for(h=Pe=d;Pe!==null;){switch(f=Pe,m=f.child,f.tag){case 0:case 11:case 14:case 15:td(4,f,f.return);break;case 1:Ll(f,f.return);var v=f.stateNode;if(typeof v.componentWillUnmount=="function"){i=f,r=f.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(y){Kt(i,r,y)}}break;case 5:Ll(f,f.return);break;case 22:if(f.memoizedState!==null){bk(h);continue}}m!==null?(m.return=f,Pe=m):bk(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,c?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,u=h.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=d6("display",o))}catch(y){Kt(t,t.return,y)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){Kt(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:oi(e,t),Ii(t),i&4&&_k(t);break;case 21:break;default:oi(e,t),Ii(t)}}function Ii(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(jO(r)){var i=r;break e}r=r.return}throw Error(ve(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(md(s,""),i.flags&=-33);var a=yk(t);nE(t,a,s);break;case 3:case 4:var o=i.stateNode.containerInfo,l=yk(t);tE(t,l,o);break;default:throw Error(ve(161))}}catch(u){Kt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function q7(t,e,r){Pe=t,$O(t)}function $O(t,e,r){for(var i=(t.mode&1)!==0;Pe!==null;){var s=Pe,a=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||xf;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Wn;l=xf;var c=Wn;if(xf=o,(Wn=u)&&!c)for(Pe=s;Pe!==null;)o=Pe,u=o.child,o.tag===22&&o.memoizedState!==null?xk(s):u!==null?(u.return=o,Pe=u):xk(s);for(;a!==null;)Pe=a,$O(a),a=a.sibling;Pe=s,xf=l,Wn=c}wk(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,Pe=a):wk(t)}}function wk(t){for(;Pe!==null;){var e=Pe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wn||lg(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Wn)if(r===null)i.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:ui(e.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&ik(e,a,i);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}ik(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&_d(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ve(163))}Wn||e.flags&512&&eE(e)}catch(f){Kt(e,e.return,f)}}if(e===t){Pe=null;break}if(r=e.sibling,r!==null){r.return=e.return,Pe=r;break}Pe=e.return}}function bk(t){for(;Pe!==null;){var e=Pe;if(e===t){Pe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,Pe=r;break}Pe=e.return}}function xk(t){for(;Pe!==null;){var e=Pe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{lg(4,e)}catch(u){Kt(e,r,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(u){Kt(e,s,u)}}var a=e.return;try{eE(e)}catch(u){Kt(e,a,u)}break;case 5:var o=e.return;try{eE(e)}catch(u){Kt(e,o,u)}}}catch(u){Kt(e,e.return,u)}if(e===t){Pe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Pe=l;break}Pe=e.return}}var H7=Math.ceil,Yp=Ms.ReactCurrentDispatcher,lS=Ms.ReactCurrentOwner,Qr=Ms.ReactCurrentBatchConfig,dt=0,En=null,rn=null,Mn=0,Sr=0,Ol=Ha(0),fn=0,Ad=null,No=0,ug=0,uS=0,nd=null,cr=null,cS=0,ou=1/0,as=null,Xp=!1,rE=null,_a=null,Ef=!1,da=null,Qp=0,rd=0,iE=null,op=-1,lp=0;function er(){return dt&6?Jt():op!==-1?op:op=Jt()}function wa(t){return t.mode&1?dt&2&&Mn!==0?Mn&-Mn:k7.transition!==null?(lp===0&&(lp=S6()),lp):(t=_t,t!==0||(t=window.event,t=t===void 0?16:R6(t.type)),t):1}function gi(t,e,r,i){if(50<rd)throw rd=0,iE=null,Error(ve(185));sh(t,r,i),(!(dt&2)||t!==En)&&(t===En&&(!(dt&2)&&(ug|=r),fn===4&&ra(t,Mn)),vr(t,i),r===1&&dt===0&&!(e.mode&1)&&(ou=Jt()+500,sg&&Wa()))}function vr(t,e){var r=t.callbackNode;kz(t,e);var i=Mp(t,t===En?Mn:0);if(i===0)r!==null&&RC(r),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(r!=null&&RC(r),e===1)t.tag===0?C7(Ek.bind(null,t)):X6(Ek.bind(null,t)),E7(function(){!(dt&6)&&Wa()}),r=null;else{switch(T6(i)){case 1:r=O2;break;case 4:r=x6;break;case 16:r=Dp;break;case 536870912:r=E6;break;default:r=Dp}r=KO(r,UO.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function UO(t,e){if(op=-1,lp=0,dt&6)throw Error(ve(327));var r=t.callbackNode;if(Hl()&&t.callbackNode!==r)return null;var i=Mp(t,t===En?Mn:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Jp(t,i);else{e=i;var s=dt;dt|=2;var a=zO();(En!==t||Mn!==e)&&(as=null,ou=Jt()+500,xo(t,e));do try{K7();break}catch(l){BO(t,l)}while(!0);Y2(),Yp.current=a,dt=s,rn!==null?e=0:(En=null,Mn=0,e=fn)}if(e!==0){if(e===2&&(s=Rx(t),s!==0&&(i=s,e=sE(t,s))),e===1)throw r=Ad,xo(t,0),ra(t,i),vr(t,Jt()),r;if(e===6)ra(t,i);else{if(s=t.current.alternate,!(i&30)&&!W7(s)&&(e=Jp(t,i),e===2&&(a=Rx(t),a!==0&&(i=a,e=sE(t,a))),e===1))throw r=Ad,xo(t,0),ra(t,i),vr(t,Jt()),r;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(ve(345));case 2:ao(t,cr,as);break;case 3:if(ra(t,i),(i&130023424)===i&&(e=cS+500-Jt(),10<e)){if(Mp(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){er(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Fx(ao.bind(null,t,cr,as),e);break}ao(t,cr,as);break;case 4:if(ra(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var o=31-mi(i);a=1<<o,o=e[o],o>s&&(s=o),i&=~a}if(i=s,i=Jt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*H7(i/1960))-i,10<i){t.timeoutHandle=Fx(ao.bind(null,t,cr,as),i);break}ao(t,cr,as);break;case 5:ao(t,cr,as);break;default:throw Error(ve(329))}}}return vr(t,Jt()),t.callbackNode===r?UO.bind(null,t):null}function sE(t,e){var r=nd;return t.current.memoizedState.isDehydrated&&(xo(t,e).flags|=256),t=Jp(t,e),t!==2&&(e=cr,cr=r,e!==null&&aE(e)),t}function aE(t){cr===null?cr=t:cr.push.apply(cr,t)}function W7(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var s=r[i],a=s.getSnapshot;s=s.value;try{if(!yi(a(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ra(t,e){for(e&=~uS,e&=~ug,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-mi(e),i=1<<r;t[r]=-1,e&=~i}}function Ek(t){if(dt&6)throw Error(ve(327));Hl();var e=Mp(t,0);if(!(e&1))return vr(t,Jt()),null;var r=Jp(t,e);if(t.tag!==0&&r===2){var i=Rx(t);i!==0&&(e=i,r=sE(t,i))}if(r===1)throw r=Ad,xo(t,0),ra(t,e),vr(t,Jt()),r;if(r===6)throw Error(ve(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ao(t,cr,as),vr(t,Jt()),null}function dS(t,e){var r=dt;dt|=1;try{return t(e)}finally{dt=r,dt===0&&(ou=Jt()+500,sg&&Wa())}}function Ao(t){da!==null&&da.tag===0&&!(dt&6)&&Hl();var e=dt;dt|=1;var r=Qr.transition,i=_t;try{if(Qr.transition=null,_t=1,t)return t()}finally{_t=i,Qr.transition=r,dt=e,!(dt&6)&&Wa()}}function hS(){Sr=Ol.current,Mt(Ol)}function xo(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,x7(r)),rn!==null)for(r=rn.return;r!==null;){var i=r;switch(W2(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Fp();break;case 3:su(),Mt(mr),Mt(Kn),tS();break;case 5:eS(i);break;case 4:su();break;case 13:Mt(Bt);break;case 19:Mt(Bt);break;case 10:X2(i.type._context);break;case 22:case 23:hS()}r=r.return}if(En=t,rn=t=ba(t.current,null),Mn=Sr=e,fn=0,Ad=null,uS=ug=No=0,cr=nd=null,mo!==null){for(e=0;e<mo.length;e++)if(r=mo[e],i=r.interleaved,i!==null){r.interleaved=null;var s=i.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,i.next=o}r.pending=i}mo=null}return t}function BO(t,e){do{var r=rn;try{if(Y2(),ip.current=Kp,Gp){for(var i=qt.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Gp=!1}if(ko=0,bn=un=qt=null,ed=!1,Cd=0,lS.current=null,r===null||r.return===null){fn=1,Ad=e,rn=null;break}e:{var a=t,o=r.return,l=r,u=e;if(e=Mn,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var m=ck(o);if(m!==null){m.flags&=-257,dk(m,o,l,a,e),m.mode&1&&uk(a,c,e),e=m,u=c;var v=e.updateQueue;if(v===null){var y=new Set;y.add(u),e.updateQueue=y}else v.add(u);break e}else{if(!(e&1)){uk(a,c,e),fS();break e}u=Error(ve(426))}}else if(Vt&&l.mode&1){var b=ck(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),dk(b,o,l,a,e),G2(au(u,l));break e}}a=u=au(u,l),fn!==4&&(fn=2),nd===null?nd=[a]:nd.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var _=TO(a,u,e);rk(a,_);break e;case 1:l=u;var w=a.type,E=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(_a===null||!_a.has(E)))){a.flags|=65536,e&=-e,a.lanes|=e;var N=IO(a,l,e);rk(a,N);break e}}a=a.return}while(a!==null)}HO(r)}catch(M){e=M,rn===r&&r!==null&&(rn=r=r.return);continue}break}while(!0)}function zO(){var t=Yp.current;return Yp.current=Kp,t===null?Kp:t}function fS(){(fn===0||fn===3||fn===2)&&(fn=4),En===null||!(No&268435455)&&!(ug&268435455)||ra(En,Mn)}function Jp(t,e){var r=dt;dt|=2;var i=zO();(En!==t||Mn!==e)&&(as=null,xo(t,e));do try{G7();break}catch(s){BO(t,s)}while(!0);if(Y2(),dt=r,Yp.current=i,rn!==null)throw Error(ve(261));return En=null,Mn=0,fn}function G7(){for(;rn!==null;)qO(rn)}function K7(){for(;rn!==null&&!_z();)qO(rn)}function qO(t){var e=GO(t.alternate,t,Sr);t.memoizedProps=t.pendingProps,e===null?HO(t):rn=e,lS.current=null}function HO(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=U7(r,e),r!==null){r.flags&=32767,rn=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{fn=6,rn=null;return}}else if(r=$7(r,e,Sr),r!==null){rn=r;return}if(e=e.sibling,e!==null){rn=e;return}rn=e=t}while(e!==null);fn===0&&(fn=5)}function ao(t,e,r){var i=_t,s=Qr.transition;try{Qr.transition=null,_t=1,Y7(t,e,r,i)}finally{Qr.transition=s,_t=i}return null}function Y7(t,e,r,i){do Hl();while(da!==null);if(dt&6)throw Error(ve(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ve(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(Nz(t,a),t===En&&(rn=En=null,Mn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ef||(Ef=!0,KO(Dp,function(){return Hl(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Qr.transition,Qr.transition=null;var o=_t;_t=1;var l=dt;dt|=4,lS.current=null,z7(t,r),FO(r,t),m7(jx),Lp=!!Ox,jx=Ox=null,t.current=r,q7(r),wz(),dt=l,_t=o,Qr.transition=a}else t.current=r;if(Ef&&(Ef=!1,da=t,Qp=s),a=t.pendingLanes,a===0&&(_a=null),Ez(r.stateNode),vr(t,Jt()),e!==null)for(i=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(Xp)throw Xp=!1,t=rE,rE=null,t;return Qp&1&&t.tag!==0&&Hl(),a=t.pendingLanes,a&1?t===iE?rd++:(rd=0,iE=t):rd=0,Wa(),null}function Hl(){if(da!==null){var t=T6(Qp),e=Qr.transition,r=_t;try{if(Qr.transition=null,_t=16>t?16:t,da===null)var i=!1;else{if(t=da,da=null,Qp=0,dt&6)throw Error(ve(331));var s=dt;for(dt|=4,Pe=t.current;Pe!==null;){var a=Pe,o=a.child;if(Pe.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(Pe=c;Pe!==null;){var d=Pe;switch(d.tag){case 0:case 11:case 15:td(8,d,a)}var h=d.child;if(h!==null)h.return=d,Pe=h;else for(;Pe!==null;){d=Pe;var f=d.sibling,m=d.return;if(OO(d),d===c){Pe=null;break}if(f!==null){f.return=m,Pe=f;break}Pe=m}}}var v=a.alternate;if(v!==null){var y=v.child;if(y!==null){v.child=null;do{var b=y.sibling;y.sibling=null,y=b}while(y!==null)}}Pe=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Pe=o;else e:for(;Pe!==null;){if(a=Pe,a.flags&2048)switch(a.tag){case 0:case 11:case 15:td(9,a,a.return)}var _=a.sibling;if(_!==null){_.return=a.return,Pe=_;break e}Pe=a.return}}var w=t.current;for(Pe=w;Pe!==null;){o=Pe;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,Pe=E;else e:for(o=w;Pe!==null;){if(l=Pe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:lg(9,l)}}catch(M){Kt(l,l.return,M)}if(l===o){Pe=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,Pe=N;break e}Pe=l.return}}if(dt=s,Wa(),Mi&&typeof Mi.onPostCommitFiberRoot=="function")try{Mi.onPostCommitFiberRoot(eg,t)}catch{}i=!0}return i}finally{_t=r,Qr.transition=e}}return!1}function Sk(t,e,r){e=au(r,e),e=TO(t,e,1),t=ya(t,e,1),e=er(),t!==null&&(sh(t,1,e),vr(t,e))}function Kt(t,e,r){if(t.tag===3)Sk(t,t,r);else for(;e!==null;){if(e.tag===3){Sk(e,t,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(_a===null||!_a.has(i))){t=au(r,t),t=IO(e,t,1),e=ya(e,t,1),t=er(),e!==null&&(sh(e,1,t),vr(e,t));break}}e=e.return}}function X7(t,e,r){var i=t.pingCache;i!==null&&i.delete(e),e=er(),t.pingedLanes|=t.suspendedLanes&r,En===t&&(Mn&r)===r&&(fn===4||fn===3&&(Mn&130023424)===Mn&&500>Jt()-cS?xo(t,0):uS|=r),vr(t,e)}function WO(t,e){e===0&&(t.mode&1?(e=ff,ff<<=1,!(ff&130023424)&&(ff=4194304)):e=1);var r=er();t=Es(t,e),t!==null&&(sh(t,e,r),vr(t,r))}function Q7(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),WO(t,r)}function J7(t,e){var r=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ve(314))}i!==null&&i.delete(e),WO(t,r)}var GO;GO=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||mr.current)hr=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return hr=!1,F7(t,e,r);hr=!!(t.flags&131072)}else hr=!1,Vt&&e.flags&1048576&&Q6(e,Bp,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;ap(t,e),t=e.pendingProps;var s=nu(e,Kn.current);ql(e,r),s=rS(null,e,i,t,s,r);var a=iS();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,gr(i)?(a=!0,$p(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,J2(e),s.updater=og,e.stateNode=s,s._reactInternals=e,Wx(e,i,t,r),e=Yx(null,e,i,!0,a,r)):(e.tag=0,Vt&&a&&H2(e),Zn(null,e,s,r),e=e.child),e;case 16:i=e.elementType;e:{switch(ap(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=eq(i),t=ui(i,t),s){case 0:e=Kx(null,e,i,t,r);break e;case 1:e=pk(null,e,i,t,r);break e;case 11:e=hk(null,e,i,t,r);break e;case 14:e=fk(null,e,i,ui(i.type,t),r);break e}throw Error(ve(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ui(i,s),Kx(t,e,i,s,r);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ui(i,s),pk(t,e,i,s,r);case 3:e:{if(AO(e),t===null)throw Error(ve(387));i=e.pendingProps,a=e.memoizedState,s=a.element,rO(t,e),Hp(e,i,null,r);var o=e.memoizedState;if(i=o.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=au(Error(ve(423)),e),e=mk(t,e,i,r,s);break e}else if(i!==s){s=au(Error(ve(424)),e),e=mk(t,e,i,r,s);break e}else for(Ir=va(e.stateNode.containerInfo.firstChild),Nr=e,Vt=!0,hi=null,r=tO(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ru(),i===s){e=Ss(t,e,r);break e}Zn(t,e,i,r)}e=e.child}return e;case 5:return iO(e),t===null&&zx(e),i=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,Vx(i,s)?o=null:a!==null&&Vx(i,a)&&(e.flags|=32),NO(t,e),Zn(t,e,o,r),e.child;case 6:return t===null&&zx(e),null;case 13:return RO(t,e,r);case 4:return Z2(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=iu(e,null,i,r):Zn(t,e,i,r),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ui(i,s),hk(t,e,i,s,r);case 7:return Zn(t,e,e.pendingProps,r),e.child;case 8:return Zn(t,e,e.pendingProps.children,r),e.child;case 12:return Zn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,kt(zp,i._currentValue),i._currentValue=o,a!==null)if(yi(a.value,o)){if(a.children===s.children&&!mr.current){e=Ss(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(a.tag===1){u=gs(-1,r&-r),u.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}a.lanes|=r,u=a.alternate,u!==null&&(u.lanes|=r),qx(a.return,r,e),l.lanes|=r;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ve(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),qx(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Zn(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,ql(e,r),s=ei(s),i=i(s),e.flags|=1,Zn(t,e,i,r),e.child;case 14:return i=e.type,s=ui(i,e.pendingProps),s=ui(i.type,s),fk(t,e,i,s,r);case 15:return CO(t,e,e.type,e.pendingProps,r);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:ui(i,s),ap(t,e),e.tag=1,gr(i)?(t=!0,$p(e)):t=!1,ql(e,r),SO(e,i,s),Wx(e,i,s,r),Yx(null,e,i,!0,t,r);case 19:return PO(t,e,r);case 22:return kO(t,e,r)}throw Error(ve(156,e.tag))};function KO(t,e){return b6(t,e)}function Z7(t,e,r,i){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gr(t,e,r,i){return new Z7(t,e,r,i)}function pS(t){return t=t.prototype,!(!t||!t.isReactComponent)}function eq(t){if(typeof t=="function")return pS(t)?1:0;if(t!=null){if(t=t.$$typeof,t===D2)return 11;if(t===M2)return 14}return 2}function ba(t,e){var r=t.alternate;return r===null?(r=Gr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function up(t,e,r,i,s,a){var o=2;if(i=t,typeof t=="function")pS(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Il:return Eo(r.children,s,a,e);case P2:o=8,s|=8;break;case gx:return t=Gr(12,r,e,s|2),t.elementType=gx,t.lanes=a,t;case vx:return t=Gr(13,r,e,s),t.elementType=vx,t.lanes=a,t;case yx:return t=Gr(19,r,e,s),t.elementType=yx,t.lanes=a,t;case i6:return cg(r,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case n6:o=10;break e;case r6:o=9;break e;case D2:o=11;break e;case M2:o=14;break e;case Qs:o=16,i=null;break e}throw Error(ve(130,t==null?t:typeof t,""))}return e=Gr(o,r,e,s),e.elementType=t,e.type=i,e.lanes=a,e}function Eo(t,e,r,i){return t=Gr(7,t,i,e),t.lanes=r,t}function cg(t,e,r,i){return t=Gr(22,t,i,e),t.elementType=i6,t.lanes=r,t.stateNode={isHidden:!1},t}function Ty(t,e,r){return t=Gr(6,t,null,e),t.lanes=r,t}function Iy(t,e,r){return e=Gr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function tq(t,e,r,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ay(0),this.expirationTimes=ay(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ay(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function mS(t,e,r,i,s,a,o,l,u){return t=new tq(t,e,r,l,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=Gr(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},J2(a),t}function nq(t,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tl,key:i==null?null:""+i,children:t,containerInfo:e,implementation:r}}function YO(t){if(!t)return Pa;t=t._reactInternals;e:{if(zo(t)!==t||t.tag!==1)throw Error(ve(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(gr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ve(171))}if(t.tag===1){var r=t.type;if(gr(r))return Y6(t,r,e)}return e}function XO(t,e,r,i,s,a,o,l,u){return t=mS(r,i,!0,t,s,a,o,l,u),t.context=YO(null),r=t.current,i=er(),s=wa(r),a=gs(i,s),a.callback=e??null,ya(r,a,s),t.current.lanes=s,sh(t,s,i),vr(t,i),t}function dg(t,e,r,i){var s=e.current,a=er(),o=wa(s);return r=YO(r),e.context===null?e.context=r:e.pendingContext=r,e=gs(a,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ya(s,e,o),t!==null&&(gi(t,s,o,a),rp(t,s,o)),o}function Zp(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Tk(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function gS(t,e){Tk(t,e),(t=t.alternate)&&Tk(t,e)}function rq(){return null}var QO=typeof reportError=="function"?reportError:function(t){console.error(t)};function vS(t){this._internalRoot=t}hg.prototype.render=vS.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ve(409));dg(t,e,null,null)};hg.prototype.unmount=vS.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ao(function(){dg(null,t,null,null)}),e[xs]=null}};function hg(t){this._internalRoot=t}hg.prototype.unstable_scheduleHydration=function(t){if(t){var e=k6();t={blockedOn:null,target:t,priority:e};for(var r=0;r<na.length&&e!==0&&e<na[r].priority;r++);na.splice(r,0,t),r===0&&A6(t)}};function yS(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ik(){}function iq(t,e,r,i,s){if(s){if(typeof i=="function"){var a=i;i=function(){var c=Zp(o);a.call(c)}}var o=XO(e,i,t,0,null,!1,!1,"",Ik);return t._reactRootContainer=o,t[xs]=o.current,xd(t.nodeType===8?t.parentNode:t),Ao(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var c=Zp(u);l.call(c)}}var u=mS(t,0,!1,null,null,!1,!1,"",Ik);return t._reactRootContainer=u,t[xs]=u.current,xd(t.nodeType===8?t.parentNode:t),Ao(function(){dg(e,u,r,i)}),u}function pg(t,e,r,i,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var u=Zp(o);l.call(u)}}dg(e,o,t,s)}else o=iq(r,e,t,s,i);return Zp(o)}I6=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Rc(e.pendingLanes);r!==0&&(j2(e,r|1),vr(e,Jt()),!(dt&6)&&(ou=Jt()+500,Wa()))}break;case 13:Ao(function(){var i=Es(t,1);if(i!==null){var s=er();gi(i,t,1,s)}}),gS(t,1)}};V2=function(t){if(t.tag===13){var e=Es(t,134217728);if(e!==null){var r=er();gi(e,t,134217728,r)}gS(t,134217728)}};C6=function(t){if(t.tag===13){var e=wa(t),r=Es(t,e);if(r!==null){var i=er();gi(r,t,e,i)}gS(t,e)}};k6=function(){return _t};N6=function(t,e){var r=_t;try{return _t=t,e()}finally{_t=r}};kx=function(t,e,r){switch(e){case"input":if(bx(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==t&&i.form===t.form){var s=ig(i);if(!s)throw Error(ve(90));a6(i),bx(i,s)}}}break;case"textarea":l6(t,r);break;case"select":e=r.value,e!=null&&$l(t,!!r.multiple,e,!1)}};m6=dS;g6=Ao;var sq={usingClientEntryPoint:!1,Events:[oh,Al,ig,f6,p6,dS]},hc={findFiberByHostInstance:po,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aq={bundleType:hc.bundleType,version:hc.version,rendererPackageName:hc.rendererPackageName,rendererConfig:hc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ms.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=_6(t),t===null?null:t.stateNode},findFiberByHostInstance:hc.findFiberByHostInstance||rq,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sf.isDisabled&&Sf.supportsFiber)try{eg=Sf.inject(aq),Mi=Sf}catch{}}Or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sq;Or.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yS(e))throw Error(ve(200));return nq(t,e,null,r)};Or.createRoot=function(t,e){if(!yS(t))throw Error(ve(299));var r=!1,i="",s=QO;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=mS(t,1,!1,null,null,r,!1,i,s),t[xs]=e.current,xd(t.nodeType===8?t.parentNode:t),new vS(e)};Or.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ve(188)):(t=Object.keys(t).join(","),Error(ve(268,t)));return t=_6(e),t=t===null?null:t.stateNode,t};Or.flushSync=function(t){return Ao(t)};Or.hydrate=function(t,e,r){if(!fg(e))throw Error(ve(200));return pg(null,t,e,!0,r)};Or.hydrateRoot=function(t,e,r){if(!yS(t))throw Error(ve(405));var i=r!=null&&r.hydratedSources||null,s=!1,a="",o=QO;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=XO(e,null,t,1,r??null,s,!1,a,o),t[xs]=e.current,xd(t),i)for(t=0;t<i.length;t++)r=i[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new hg(e)};Or.render=function(t,e,r){if(!fg(e))throw Error(ve(200));return pg(null,t,e,!1,r)};Or.unmountComponentAtNode=function(t){if(!fg(t))throw Error(ve(40));return t._reactRootContainer?(Ao(function(){pg(null,null,t,!1,function(){t._reactRootContainer=null,t[xs]=null})}),!0):!1};Or.unstable_batchedUpdates=dS;Or.unstable_renderSubtreeIntoContainer=function(t,e,r,i){if(!fg(r))throw Error(ve(200));if(t==null||t._reactInternals===void 0)throw Error(ve(38));return pg(t,e,r,!1,i)};Or.version="18.3.1-next-f1338f8080-20240426";function JO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JO)}catch(t){console.error(t)}}JO(),JL.exports=Or;var _S=JL.exports;const oq=za(_S);var Ck=_S;px.createRoot=Ck.createRoot,px.hydrateRoot=Ck.hydrateRoot;var wS={};Object.defineProperty(wS,"__esModule",{value:!0});wS.parse=pq;wS.serialize=mq;const lq=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,uq=/^[\u0021-\u003A\u003C-\u007E]*$/,cq=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,dq=/^[\u0020-\u003A\u003D-\u007E]*$/,hq=Object.prototype.toString,fq=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function pq(t,e){const r=new fq,i=t.length;if(i<2)return r;const s=(e==null?void 0:e.decode)||gq;let a=0;do{const o=t.indexOf("=",a);if(o===-1)break;const l=t.indexOf(";",a),u=l===-1?i:l;if(o>u){a=t.lastIndexOf(";",o-1)+1;continue}const c=kk(t,a,o),d=Nk(t,o,c),h=t.slice(c,d);if(r[h]===void 0){let f=kk(t,o+1,u),m=Nk(t,u,f);const v=s(t.slice(f,m));r[h]=v}a=u+1}while(a<i);return r}function kk(t,e,r){do{const i=t.charCodeAt(e);if(i!==32&&i!==9)return e}while(++e<r);return r}function Nk(t,e,r){for(;e>r;){const i=t.charCodeAt(--e);if(i!==32&&i!==9)return e+1}return r}function mq(t,e,r){const i=(r==null?void 0:r.encode)||encodeURIComponent;if(!lq.test(t))throw new TypeError(`argument name is invalid: ${t}`);const s=i(e);if(!uq.test(s))throw new TypeError(`argument val is invalid: ${e}`);let a=t+"="+s;if(!r)return a;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);a+="; Max-Age="+r.maxAge}if(r.domain){if(!cq.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);a+="; Domain="+r.domain}if(r.path){if(!dq.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);a+="; Path="+r.path}if(r.expires){if(!vq(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.partitioned&&(a+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return a}function gq(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function vq(t){return hq.call(t)==="[object Date]"}/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ak="popstate";function yq(t={}){function e(s,a){let{pathname:o="/",search:l="",hash:u=""}=qo(s.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),oE("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=s.location.href,c=u.indexOf("#");l=c===-1?u:u.slice(0,c)}return l+"#"+(typeof a=="string"?a:Rd(a))}function i(s,a){Mr(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return wq(e,r,i,t)}function $t(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Mr(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _q(){return Math.random().toString(36).substring(2,10)}function Rk(t,e){return{usr:t.state,key:t.key,idx:e}}function oE(t,e,r=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?qo(e):e,state:r,key:e&&e.key||i||_q()}}function Rd({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function qo(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function wq(t,e,r,i={}){let{window:s=document.defaultView,v5Compat:a=!1}=i,o=s.history,l="POP",u=null,c=d();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function d(){return(o.state||{idx:null}).idx}function h(){l="POP";let b=d(),_=b==null?null:b-c;c=b,u&&u({action:l,location:y.location,delta:_})}function f(b,_){l="PUSH";let w=oE(y.location,b,_);r&&r(w,b),c=d()+1;let E=Rk(w,c),N=y.createHref(w);try{o.pushState(E,"",N)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;s.location.assign(N)}a&&u&&u({action:l,location:y.location,delta:1})}function m(b,_){l="REPLACE";let w=oE(y.location,b,_);r&&r(w,b),c=d();let E=Rk(w,c),N=y.createHref(w);o.replaceState(E,"",N),a&&u&&u({action:l,location:y.location,delta:0})}function v(b){let _=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof b=="string"?b:Rd(b);return w=w.replace(/ $/,"%20"),$t(_,`No window.location.(origin|href) available to create URL for href: ${w}`),new URL(w,_)}let y={get action(){return l},get location(){return t(s,o)},listen(b){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Ak,h),u=b,()=>{s.removeEventListener(Ak,h),u=null}},createHref(b){return e(s,b)},createURL:v,encodeLocation(b){let _=v(b);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:f,replace:m,go(b){return o.go(b)}};return y}function ZO(t,e,r="/"){return bq(t,e,r,!1)}function bq(t,e,r,i){let s=typeof e=="string"?qo(e):e,a=Da(s.pathname||"/",r);if(a==null)return null;let o=ej(t);xq(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=Dq(a);l=Rq(o[u],c,i)}return l}function ej(t,e=[],r=[],i=""){let s=(a,o,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&($t(u.relativePath.startsWith(i),`Absolute route path "${u.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(i.length));let c=vs([i,u.relativePath]),d=r.concat(u);a.children&&a.children.length>0&&($t(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),ej(a.children,e,d,c)),!(a.path==null&&!a.index)&&e.push({path:c,score:Nq(c,a.index),routesMeta:d})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let u of tj(a.path))s(a,o,u)}),e}function tj(t){let e=t.split("/");if(e.length===0)return[];let[r,...i]=e,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let o=tj(i.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function xq(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Aq(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var Eq=/^:[\w-]+$/,Sq=3,Tq=2,Iq=1,Cq=10,kq=-2,Pk=t=>t==="*";function Nq(t,e){let r=t.split("/"),i=r.length;return r.some(Pk)&&(i+=kq),e&&(i+=Tq),r.filter(s=>!Pk(s)).reduce((s,a)=>s+(Eq.test(a)?Sq:a===""?Iq:Cq),i)}function Aq(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function Rq(t,e,r=!1){let{routesMeta:i}=t,s={},a="/",o=[];for(let l=0;l<i.length;++l){let u=i[l],c=l===i.length-1,d=a==="/"?e:e.slice(a.length)||"/",h=em({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),f=u.route;if(!h&&c&&r&&!i[i.length-1].route.index&&(h=em({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},d)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:vs([a,h.pathname]),pathnameBase:jq(vs([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=vs([a,h.pathnameBase]))}return o}function em(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,i]=Pq(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:i.reduce((c,{paramName:d,isOptional:h},f)=>{if(d==="*"){let v=l[f]||"";o=a.slice(0,a.length-v.length).replace(/(.)\/+$/,"$1")}const m=l[f];return h&&!m?c[d]=void 0:c[d]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:o,pattern:t}}function Pq(t,e=!1,r=!0){Mr(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function Dq(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mr(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Da(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=t.charAt(r);return i&&i!=="/"?null:t.slice(r)||"/"}function Mq(t,e="/"){let{pathname:r,search:i="",hash:s=""}=typeof t=="string"?qo(t):t;return{pathname:r?r.startsWith("/")?r:Lq(r,e):e,search:Vq(i),hash:Fq(s)}}function Lq(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Cy(t,e,r,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Oq(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function bS(t){let e=Oq(t);return e.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase)}function xS(t,e,r,i=!1){let s;typeof t=="string"?s=qo(t):(s={...t},$t(!s.pathname||!s.pathname.includes("?"),Cy("?","pathname","search",s)),$t(!s.pathname||!s.pathname.includes("#"),Cy("#","pathname","hash",s)),$t(!s.search||!s.search.includes("#"),Cy("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=r;else{let h=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}l=h>=0?e[h]:"/"}let u=Mq(s,l),c=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}var vs=t=>t.join("/").replace(/\/\/+/g,"/"),jq=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Vq=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Fq=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function $q(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var nj=["POST","PUT","PATCH","DELETE"];new Set(nj);var Uq=["GET",...nj];new Set(Uq);var Pu=S.createContext(null);Pu.displayName="DataRouter";var mg=S.createContext(null);mg.displayName="DataRouterState";var rj=S.createContext({isTransitioning:!1});rj.displayName="ViewTransition";var Bq=S.createContext(new Map);Bq.displayName="Fetchers";var zq=S.createContext(null);zq.displayName="Await";var wi=S.createContext(null);wi.displayName="Navigation";var uh=S.createContext(null);uh.displayName="Location";var Ki=S.createContext({outlet:null,matches:[],isDataRoute:!1});Ki.displayName="Route";var ES=S.createContext(null);ES.displayName="RouteError";function qq(t,{relative:e}={}){$t(Du(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=S.useContext(wi),{hash:s,pathname:a,search:o}=ch(t,{relative:e}),l=a;return r!=="/"&&(l=a==="/"?r:vs([r,a])),i.createHref({pathname:l,search:o,hash:s})}function Du(){return S.useContext(uh)!=null}function ri(){return $t(Du(),"useLocation() may be used only in the context of a <Router> component."),S.useContext(uh).location}var ij="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function sj(t){S.useContext(wi).static||S.useLayoutEffect(t)}function _r(){let{isDataRoute:t}=S.useContext(Ki);return t?rH():Hq()}function Hq(){$t(Du(),"useNavigate() may be used only in the context of a <Router> component.");let t=S.useContext(Pu),{basename:e,navigator:r}=S.useContext(wi),{matches:i}=S.useContext(Ki),{pathname:s}=ri(),a=JSON.stringify(bS(i)),o=S.useRef(!1);return sj(()=>{o.current=!0}),S.useCallback((u,c={})=>{if(Mr(o.current,ij),!o.current)return;if(typeof u=="number"){r.go(u);return}let d=xS(u,JSON.parse(a),s,c.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:vs([e,d.pathname])),(c.replace?r.replace:r.push)(d,c.state,c)},[e,r,a,s,t])}S.createContext(null);function ch(t,{relative:e}={}){let{matches:r}=S.useContext(Ki),{pathname:i}=ri(),s=JSON.stringify(bS(r));return S.useMemo(()=>xS(t,JSON.parse(s),i,e==="path"),[t,s,i,e])}function Wq(t,e){return aj(t,e)}function aj(t,e,r,i){var w;$t(Du(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:a}=S.useContext(wi),{matches:o}=S.useContext(Ki),l=o[o.length-1],u=l?l.params:{},c=l?l.pathname:"/",d=l?l.pathnameBase:"/",h=l&&l.route;{let E=h&&h.path||"";oj(c,!h||E.endsWith("*")||E.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${E}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${E}"> to <Route path="${E==="/"?"*":`${E}/*`}">.`)}let f=ri(),m;if(e){let E=typeof e=="string"?qo(e):e;$t(d==="/"||((w=E.pathname)==null?void 0:w.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${E.pathname}" was given in the \`location\` prop.`),m=E}else m=f;let v=m.pathname||"/",y=v;if(d!=="/"){let E=d.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(E.length).join("/")}let b=!a&&r&&r.matches&&r.matches.length>0?r.matches:ZO(t,{pathname:y});Mr(h||b!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Mr(b==null||b[b.length-1].route.element!==void 0||b[b.length-1].route.Component!==void 0||b[b.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=Qq(b&&b.map(E=>Object.assign({},E,{params:Object.assign({},u,E.params),pathname:vs([d,s.encodeLocation?s.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?d:vs([d,s.encodeLocation?s.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),o,r,i);return e&&_?S.createElement(uh.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},_):_}function Gq(){let t=nH(),e=$q(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=S.createElement(S.Fragment,null,S.createElement("p",null,"💿 Hey developer 👋"),S.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",S.createElement("code",{style:a},"ErrorBoundary")," or"," ",S.createElement("code",{style:a},"errorElement")," prop on your route.")),S.createElement(S.Fragment,null,S.createElement("h2",null,"Unexpected Application Error!"),S.createElement("h3",{style:{fontStyle:"italic"}},e),r?S.createElement("pre",{style:s},r):null,o)}var Kq=S.createElement(Gq,null),Yq=class extends S.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?S.createElement(Ki.Provider,{value:this.props.routeContext},S.createElement(ES.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Xq({routeContext:t,match:e,children:r}){let i=S.useContext(Pu);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),S.createElement(Ki.Provider,{value:t},r)}function Qq(t,e=[],r=null,i=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,a=r==null?void 0:r.errors;if(a!=null){let u=s.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id])!==void 0);$t(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let o=!1,l=-1;if(r)for(let u=0;u<s.length;u++){let c=s[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(l=u),c.route.id){let{loaderData:d,errors:h}=r,f=c.route.loader&&!d.hasOwnProperty(c.route.id)&&(!h||h[c.route.id]===void 0);if(c.route.lazy||f){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((u,c,d)=>{let h,f=!1,m=null,v=null;r&&(h=a&&c.route.id?a[c.route.id]:void 0,m=c.route.errorElement||Kq,o&&(l<0&&d===0?(oj("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,v=null):l===d&&(f=!0,v=c.route.hydrateFallbackElement||null)));let y=e.concat(s.slice(0,d+1)),b=()=>{let _;return h?_=m:f?_=v:c.route.Component?_=S.createElement(c.route.Component,null):c.route.element?_=c.route.element:_=u,S.createElement(Xq,{match:c,routeContext:{outlet:u,matches:y,isDataRoute:r!=null},children:_})};return r&&(c.route.ErrorBoundary||c.route.errorElement||d===0)?S.createElement(Yq,{location:r.location,revalidation:r.revalidation,component:m,error:h,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}function SS(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Jq(t){let e=S.useContext(Pu);return $t(e,SS(t)),e}function Zq(t){let e=S.useContext(mg);return $t(e,SS(t)),e}function eH(t){let e=S.useContext(Ki);return $t(e,SS(t)),e}function TS(t){let e=eH(t),r=e.matches[e.matches.length-1];return $t(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function tH(){return TS("useRouteId")}function nH(){var i;let t=S.useContext(ES),e=Zq("useRouteError"),r=TS("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[r]}function rH(){let{router:t}=Jq("useNavigate"),e=TS("useNavigate"),r=S.useRef(!1);return sj(()=>{r.current=!0}),S.useCallback(async(s,a={})=>{Mr(r.current,ij),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...a}))},[t,e])}var Dk={};function oj(t,e,r){!e&&!Dk[t]&&(Dk[t]=!0,Mr(!1,r))}S.memo(iH);function iH({routes:t,future:e,state:r}){return aj(t,void 0,r,e)}function lj({to:t,replace:e,state:r,relative:i}){$t(Du(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=S.useContext(wi);Mr(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=S.useContext(Ki),{pathname:o}=ri(),l=_r(),u=xS(t,bS(a),o,i==="path"),c=JSON.stringify(u);return S.useEffect(()=>{l(JSON.parse(c),{replace:e,state:r,relative:i})},[l,c,i,e,r]),null}function Er(t){$t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function sH({basename:t="/",children:e=null,location:r,navigationType:i="POP",navigator:s,static:a=!1}){$t(!Du(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=S.useMemo(()=>({basename:o,navigator:s,static:a,future:{}}),[o,s,a]);typeof r=="string"&&(r=qo(r));let{pathname:u="/",search:c="",hash:d="",state:h=null,key:f="default"}=r,m=S.useMemo(()=>{let v=Da(u,o);return v==null?null:{location:{pathname:v,search:c,hash:d,state:h,key:f},navigationType:i}},[o,u,c,d,h,f,i]);return Mr(m!=null,`<Router basename="${o}"> is not able to match the URL "${u}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:S.createElement(wi.Provider,{value:l},S.createElement(uh.Provider,{children:e,value:m}))}function aH({children:t,location:e}){return Wq(lE(t),e)}function lE(t,e=[]){let r=[];return S.Children.forEach(t,(i,s)=>{if(!S.isValidElement(i))return;let a=[...e,s];if(i.type===S.Fragment){r.push.apply(r,lE(i.props.children,a));return}$t(i.type===Er,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),$t(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=lE(i.props.children,a)),r.push(o)}),r}var cp="get",dp="application/x-www-form-urlencoded";function gg(t){return t!=null&&typeof t.tagName=="string"}function oH(t){return gg(t)&&t.tagName.toLowerCase()==="button"}function lH(t){return gg(t)&&t.tagName.toLowerCase()==="form"}function uH(t){return gg(t)&&t.tagName.toLowerCase()==="input"}function cH(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function dH(t,e){return t.button===0&&(!e||e==="_self")&&!cH(t)}function uE(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let i=t[r];return e.concat(Array.isArray(i)?i.map(s=>[r,s]):[[r,i]])},[]))}function hH(t,e){let r=uE(t);return e&&e.forEach((i,s)=>{r.has(s)||e.getAll(s).forEach(a=>{r.append(s,a)})}),r}var Tf=null;function fH(){if(Tf===null)try{new FormData(document.createElement("form"),0),Tf=!1}catch{Tf=!0}return Tf}var pH=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ky(t){return t!=null&&!pH.has(t)?(Mr(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dp}"`),null):t}function mH(t,e){let r,i,s,a,o;if(lH(t)){let l=t.getAttribute("action");i=l?Da(l,e):null,r=t.getAttribute("method")||cp,s=ky(t.getAttribute("enctype"))||dp,a=new FormData(t)}else if(oH(t)||uH(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||l.getAttribute("action");if(i=u?Da(u,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||cp,s=ky(t.getAttribute("formenctype"))||ky(l.getAttribute("enctype"))||dp,a=new FormData(l,t),!fH()){let{name:c,type:d,value:h}=t;if(d==="image"){let f=c?`${c}.`:"";a.append(`${f}x`,"0"),a.append(`${f}y`,"0")}else c&&a.append(c,h)}}else{if(gg(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=cp,i=null,s=dp,o=t}return a&&s==="text/plain"&&(o=a,a=void 0),{action:i,method:r.toLowerCase(),encType:s,formData:a,body:o}}function IS(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function gH(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function vH(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function yH(t,e,r){let i=await Promise.all(t.map(async s=>{let a=e.routes[s.route.id];if(a){let o=await gH(a,r);return o.links?o.links():[]}return[]}));return xH(i.flat(1).filter(vH).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Mk(t,e,r,i,s,a){let o=(u,c)=>r[c]?u.route.id!==r[c].route.id:!0,l=(u,c)=>{var d;return r[c].pathname!==u.pathname||((d=r[c].route.path)==null?void 0:d.endsWith("*"))&&r[c].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,c)=>o(u,c)||l(u,c)):a==="data"?e.filter((u,c)=>{var h;let d=i.routes[u.route.id];if(!d||!d.hasLoader)return!1;if(o(u,c)||l(u,c))return!0;if(u.route.shouldRevalidate){let f=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((h=r[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function _H(t,e){return wH(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function wH(t){return[...new Set(t)]}function bH(t){let e={},r=Object.keys(t).sort();for(let i of r)e[i]=t[i];return e}function xH(t,e){let r=new Set;return new Set(e),t.reduce((i,s)=>{let a=JSON.stringify(bH(s));return r.has(a)||(r.add(a),i.push({key:a,link:s})),i},[])}function EH(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function SH(){let t=S.useContext(Pu);return IS(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function TH(){let t=S.useContext(mg);return IS(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var CS=S.createContext(void 0);CS.displayName="FrameworkContext";function uj(){let t=S.useContext(CS);return IS(t,"You must render this element inside a <HydratedRouter> element"),t}function IH(t,e){let r=S.useContext(CS),[i,s]=S.useState(!1),[a,o]=S.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:c,onMouseLeave:d,onTouchStart:h}=e,f=S.useRef(null);S.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let y=_=>{_.forEach(w=>{o(w.isIntersecting)})},b=new IntersectionObserver(y,{threshold:.5});return f.current&&b.observe(f.current),()=>{b.disconnect()}}},[t]),S.useEffect(()=>{if(i){let y=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(y)}}},[i]);let m=()=>{s(!0)},v=()=>{s(!1),o(!1)};return r?t!=="intent"?[a,f,{}]:[a,f,{onFocus:fc(l,m),onBlur:fc(u,v),onMouseEnter:fc(c,m),onMouseLeave:fc(d,v),onTouchStart:fc(h,m)}]:[!1,f,{}]}function fc(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function CH({page:t,...e}){let{router:r}=SH(),i=S.useMemo(()=>ZO(r.routes,t,r.basename),[r.routes,t,r.basename]);return i?S.createElement(NH,{page:t,matches:i,...e}):null}function kH(t){let{manifest:e,routeModules:r}=uj(),[i,s]=S.useState([]);return S.useEffect(()=>{let a=!1;return yH(t,e,r).then(o=>{a||s(o)}),()=>{a=!0}},[t,e,r]),i}function NH({page:t,matches:e,...r}){let i=ri(),{manifest:s,routeModules:a}=uj(),{loaderData:o,matches:l}=TH(),u=S.useMemo(()=>Mk(t,e,l,s,i,"data"),[t,e,l,s,i]),c=S.useMemo(()=>Mk(t,e,l,s,i,"assets"),[t,e,l,s,i]),d=S.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let m=new Set,v=!1;if(e.forEach(b=>{var w;let _=s.routes[b.route.id];!_||!_.hasLoader||(!u.some(E=>E.route.id===b.route.id)&&b.route.id in o&&((w=a[b.route.id])!=null&&w.shouldRevalidate)||_.hasClientLoader?v=!0:m.add(b.route.id))}),m.size===0)return[];let y=EH(t);return v&&m.size>0&&y.searchParams.set("_routes",e.filter(b=>m.has(b.route.id)).map(b=>b.route.id).join(",")),[y.pathname+y.search]},[o,i,s,u,e,t,a]),h=S.useMemo(()=>_H(c,s),[c,s]),f=kH(c);return S.createElement(S.Fragment,null,d.map(m=>S.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...r})),h.map(m=>S.createElement("link",{key:m,rel:"modulepreload",href:m,...r})),f.map(({key:m,link:v})=>S.createElement("link",{key:m,...v})))}function AH(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var cj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{cj&&(window.__reactRouterVersion="7.1.5")}catch{}function RH({basename:t,children:e,window:r}){let i=S.useRef();i.current==null&&(i.current=yq({window:r,v5Compat:!0}));let s=i.current,[a,o]=S.useState({action:s.action,location:s.location}),l=S.useCallback(u=>{S.startTransition(()=>o(u))},[o]);return S.useLayoutEffect(()=>s.listen(l),[s,l]),S.createElement(sH,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:s})}var dj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,id=S.forwardRef(function({onClick:e,discover:r="render",prefetch:i="none",relative:s,reloadDocument:a,replace:o,state:l,target:u,to:c,preventScrollReset:d,viewTransition:h,...f},m){let{basename:v}=S.useContext(wi),y=typeof c=="string"&&dj.test(c),b,_=!1;if(typeof c=="string"&&y&&(b=c,cj))try{let T=new URL(window.location.href),I=c.startsWith("//")?new URL(T.protocol+c):new URL(c),x=Da(I.pathname,v);I.origin===T.origin&&x!=null?c=x+I.search+I.hash:_=!0}catch{Mr(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=qq(c,{relative:s}),[E,N,M]=IH(i,f),O=LH(c,{replace:o,state:l,target:u,preventScrollReset:d,relative:s,viewTransition:h});function A(T){e&&e(T),T.defaultPrevented||O(T)}let D=S.createElement("a",{...f,...M,href:b||w,onClick:_||a?e:A,ref:AH(m,N),target:u,"data-discover":!y&&r==="render"?"true":void 0});return E&&!y?S.createElement(S.Fragment,null,D,S.createElement(CH,{page:w})):D});id.displayName="Link";var PH=S.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:i="",end:s=!1,style:a,to:o,viewTransition:l,children:u,...c},d){let h=ch(o,{relative:c.relative}),f=ri(),m=S.useContext(mg),{navigator:v,basename:y}=S.useContext(wi),b=m!=null&&$H(h)&&l===!0,_=v.encodeLocation?v.encodeLocation(h).pathname:h.pathname,w=f.pathname,E=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(w=w.toLowerCase(),E=E?E.toLowerCase():null,_=_.toLowerCase()),E&&y&&(E=Da(E,y)||E);const N=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let M=w===_||!s&&w.startsWith(_)&&w.charAt(N)==="/",O=E!=null&&(E===_||!s&&E.startsWith(_)&&E.charAt(_.length)==="/"),A={isActive:M,isPending:O,isTransitioning:b},D=M?e:void 0,T;typeof i=="function"?T=i(A):T=[i,M?"active":null,O?"pending":null,b?"transitioning":null].filter(Boolean).join(" ");let I=typeof a=="function"?a(A):a;return S.createElement(id,{...c,"aria-current":D,className:T,ref:d,style:I,to:o,viewTransition:l},typeof u=="function"?u(A):u)});PH.displayName="NavLink";var DH=S.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:i,replace:s,state:a,method:o=cp,action:l,onSubmit:u,relative:c,preventScrollReset:d,viewTransition:h,...f},m)=>{let v=VH(),y=FH(l,{relative:c}),b=o.toLowerCase()==="get"?"get":"post",_=typeof l=="string"&&dj.test(l),w=E=>{if(u&&u(E),E.defaultPrevented)return;E.preventDefault();let N=E.nativeEvent.submitter,M=(N==null?void 0:N.getAttribute("formmethod"))||o;v(N||E.currentTarget,{fetcherKey:e,method:M,navigate:r,replace:s,state:a,relative:c,preventScrollReset:d,viewTransition:h})};return S.createElement("form",{ref:m,method:b,action:y,onSubmit:i?u:w,...f,"data-discover":!_&&t==="render"?"true":void 0})});DH.displayName="Form";function MH(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function hj(t){let e=S.useContext(Pu);return $t(e,MH(t)),e}function LH(t,{target:e,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}={}){let l=_r(),u=ri(),c=ch(t,{relative:a});return S.useCallback(d=>{if(dH(d,e)){d.preventDefault();let h=r!==void 0?r:Rd(u)===Rd(c);l(t,{replace:h,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[u,l,c,r,i,e,t,s,a,o])}function vg(t){Mr(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=S.useRef(uE(t)),r=S.useRef(!1),i=ri(),s=S.useMemo(()=>hH(i.search,r.current?null:e.current),[i.search]),a=_r(),o=S.useCallback((l,u)=>{const c=uE(typeof l=="function"?l(s):l);r.current=!0,a("?"+c,u)},[a,s]);return[s,o]}var OH=0,jH=()=>`__${String(++OH)}__`;function VH(){let{router:t}=hj("useSubmit"),{basename:e}=S.useContext(wi),r=tH();return S.useCallback(async(i,s={})=>{let{action:a,method:o,encType:l,formData:u,body:c}=mH(i,e);if(s.navigate===!1){let d=s.fetcherKey||jH();await t.fetch(d,r,s.action||a,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await t.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function FH(t,{relative:e}={}){let{basename:r}=S.useContext(wi),i=S.useContext(Ki);$t(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a={...ch(t||".",{relative:e})},o=ri();if(t==null){a.search=o.search;let l=new URLSearchParams(a.search),u=l.getAll("index");if(u.some(d=>d==="")){l.delete("index"),u.filter(h=>h).forEach(h=>l.append("index",h));let d=l.toString();a.search=d?`?${d}`:""}}return(!t||t===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:vs([r,a.pathname])),Rd(a)}function $H(t,e={}){let r=S.useContext(rj);$t(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=hj("useViewTransitionState"),s=ch(t,{relative:e.relative});if(!r.isTransitioning)return!1;let a=Da(r.currentLocation.pathname,i)||r.currentLocation.pathname,o=Da(r.nextLocation.pathname,i)||r.nextLocation.pathname;return em(s.pathname,o)!=null||em(s.pathname,a)!=null}new TextEncoder;var Lk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj=function(t){const e=[];let r=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},UH=function(t){const e=[];let r=0,i=0;for(;r<t.length;){const s=t[r++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[r++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[r++],o=t[r++],l=t[r++],u=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const a=t[r++],o=t[r++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},pj={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,d=a>>2,h=(a&3)<<4|l>>4;let f=(l&15)<<2|c>>6,m=c&63;u||(m=64,o||(f=64)),i.push(r[d],r[h],r[f],r[m])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fj(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):UH(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const a=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const h=s<t.length?r[t.charAt(s)]:64;if(++s,a==null||l==null||c==null||h==null)throw new BH;const f=a<<2|l>>4;if(i.push(f),c!==64){const m=l<<4&240|c>>2;if(i.push(m),h!==64){const v=c<<6&192|h;i.push(v)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class BH extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const zH=function(t){const e=fj(t);return pj.encodeByteArray(e,!0)},tm=function(t){return zH(t).replace(/\./g,"")},mj=function(t){try{return pj.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qH(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HH=()=>qH().__FIREBASE_DEFAULTS__,WH=()=>{if(typeof process>"u"||typeof Lk>"u")return;const t=Lk.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},GH=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mj(t[1]);return e&&JSON.parse(e)},yg=()=>{try{return HH()||WH()||GH()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},gj=t=>{var e,r;return(r=(e=yg())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},vj=t=>{const e=gj(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),i]:[e.substring(0,r),i]},yj=()=>{var t;return(t=yg())===null||t===void 0?void 0:t.config},_j=t=>{var e;return(e=yg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KH{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,i)=>{r?this.reject(r):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YH(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[tm(JSON.stringify(r)),tm(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function XH(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yn())}function QH(){var t;const e=(t=yg())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function JH(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function ZH(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function eW(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tW(){const t=Yn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function nW(){return!QH()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rW(){try{return typeof indexedDB=="object"}catch{return!1}}function iW(){return new Promise((t,e)=>{try{let r=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sW="FirebaseError";class Yi extends Error{constructor(e,r,i){super(r),this.code=e,this.customData=i,this.name=sW,Object.setPrototypeOf(this,Yi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dh.prototype.create)}}class dh{constructor(e,r,i){this.service=e,this.serviceName=r,this.errors=i}create(e,...r){const i=r[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?aW(a,i):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Yi(s,l,i)}}function aW(t,e){return t.replace(oW,(r,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const oW=/\{\$([^}]+)}/g;function lW(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function nm(t,e){if(t===e)return!0;const r=Object.keys(t),i=Object.keys(e);for(const s of r){if(!i.includes(s))return!1;const a=t[s],o=e[s];if(Ok(a)&&Ok(o)){if(!nm(a,o))return!1}else if(a!==o)return!1}for(const s of i)if(!r.includes(s))return!1;return!0}function Ok(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(t){const e=[];for(const[r,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Dc(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Mc(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function uW(t,e){const r=new cW(t,e);return r.subscribe.bind(r)}class cW{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,i){let s;if(e===void 0&&r===void 0&&i===void 0)throw new Error("Missing Observer.");dW(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:i},s.next===void 0&&(s.next=Ny),s.error===void 0&&(s.error=Ny),s.complete===void 0&&(s.complete=Ny);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function dW(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Ny(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function an(t){return t&&t._delegate?t._delegate:t}class Ma{constructor(e,r,i){this.name=e,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hW=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const i=new KH;if(this.instancesDeferred.set(r,i),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(pW(e))try{this.getOrInitializeService({instanceIdentifier:oo})}catch{}for(const[r,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=oo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oo){return this.instances.has(e)}getOptions(e=oo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:r});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);i===l&&o.resolve(s)}return s}onInit(e,r){var i;const s=this.normalizeInstanceIdentifier(r),a=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&e(o,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const i=this.onInitCallbacks.get(r);if(i)for(const s of i)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:fW(e),options:r}),this.instances.set(e,i),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=oo){return this.component?this.component.multipleInstances?e:oo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function fW(t){return t===oo?void 0:t}function pW(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mW{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new hW(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(rt||(rt={}));const gW={debug:rt.DEBUG,verbose:rt.VERBOSE,info:rt.INFO,warn:rt.WARN,error:rt.ERROR,silent:rt.SILENT},vW=rt.INFO,yW={[rt.DEBUG]:"log",[rt.VERBOSE]:"log",[rt.INFO]:"info",[rt.WARN]:"warn",[rt.ERROR]:"error"},_W=(t,e,...r)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=yW[e];if(s)console[s](`[${i}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kS{constructor(e){this.name=e,this._logLevel=vW,this._logHandler=_W,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in rt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?gW[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,rt.DEBUG,...e),this._logHandler(this,rt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,rt.VERBOSE,...e),this._logHandler(this,rt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,rt.INFO,...e),this._logHandler(this,rt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,rt.WARN,...e),this._logHandler(this,rt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,rt.ERROR,...e),this._logHandler(this,rt.ERROR,...e)}}const wW=(t,e)=>e.some(r=>t instanceof r);let jk,Vk;function bW(){return jk||(jk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xW(){return Vk||(Vk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wj=new WeakMap,cE=new WeakMap,bj=new WeakMap,Ay=new WeakMap,NS=new WeakMap;function EW(t){const e=new Promise((r,i)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(xa(t.result)),s()},o=()=>{i(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&wj.set(r,t)}).catch(()=>{}),NS.set(e,t),e}function SW(t){if(cE.has(t))return;const e=new Promise((r,i)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),s()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});cE.set(t,e)}let dE={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return cE.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bj.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return xa(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function TW(t){dE=t(dE)}function IW(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const i=t.call(Ry(this),e,...r);return bj.set(i,e.sort?e.sort():[e]),xa(i)}:xW().includes(t)?function(...e){return t.apply(Ry(this),e),xa(wj.get(this))}:function(...e){return xa(t.apply(Ry(this),e))}}function CW(t){return typeof t=="function"?IW(t):(t instanceof IDBTransaction&&SW(t),wW(t,bW())?new Proxy(t,dE):t)}function xa(t){if(t instanceof IDBRequest)return EW(t);if(Ay.has(t))return Ay.get(t);const e=CW(t);return e!==t&&(Ay.set(t,e),NS.set(e,t)),e}const Ry=t=>NS.get(t);function kW(t,e,{blocked:r,upgrade:i,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=xa(o);return i&&o.addEventListener("upgradeneeded",u=>{i(xa(o.result),u.oldVersion,u.newVersion,xa(o.transaction),u)}),r&&o.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{a&&u.addEventListener("close",()=>a()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const NW=["get","getKey","getAll","getAllKeys","count"],AW=["put","add","delete","clear"],Py=new Map;function Fk(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Py.get(e))return Py.get(e);const r=e.replace(/FromIndex$/,""),i=e!==r,s=AW.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(s||NW.includes(r)))return;const a=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[r](...l),s&&u.done]))[0]};return Py.set(e,a),a}TW(t=>({...t,get:(e,r,i)=>Fk(e,r)||t.get(e,r,i),has:(e,r)=>!!Fk(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RW{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(PW(r)){const i=r.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(r=>r).join(" ")}}function PW(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const hE="@firebase/app",$k="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new kS("@firebase/app"),DW="@firebase/app-compat",MW="@firebase/analytics-compat",LW="@firebase/analytics",OW="@firebase/app-check-compat",jW="@firebase/app-check",VW="@firebase/auth",FW="@firebase/auth-compat",$W="@firebase/database",UW="@firebase/data-connect",BW="@firebase/database-compat",zW="@firebase/functions",qW="@firebase/functions-compat",HW="@firebase/installations",WW="@firebase/installations-compat",GW="@firebase/messaging",KW="@firebase/messaging-compat",YW="@firebase/performance",XW="@firebase/performance-compat",QW="@firebase/remote-config",JW="@firebase/remote-config-compat",ZW="@firebase/storage",eG="@firebase/storage-compat",tG="@firebase/firestore",nG="@firebase/vertexai",rG="@firebase/firestore-compat",iG="firebase",sG="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE="[DEFAULT]",aG={[hE]:"fire-core",[DW]:"fire-core-compat",[LW]:"fire-analytics",[MW]:"fire-analytics-compat",[jW]:"fire-app-check",[OW]:"fire-app-check-compat",[VW]:"fire-auth",[FW]:"fire-auth-compat",[$W]:"fire-rtdb",[UW]:"fire-data-connect",[BW]:"fire-rtdb-compat",[zW]:"fire-fn",[qW]:"fire-fn-compat",[HW]:"fire-iid",[WW]:"fire-iid-compat",[GW]:"fire-fcm",[KW]:"fire-fcm-compat",[YW]:"fire-perf",[XW]:"fire-perf-compat",[QW]:"fire-rc",[JW]:"fire-rc-compat",[ZW]:"fire-gcs",[eG]:"fire-gcs-compat",[tG]:"fire-fst",[rG]:"fire-fst-compat",[nG]:"fire-vertex","fire-js":"fire-js",[iG]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm=new Map,oG=new Map,pE=new Map;function Uk(t,e){try{t.container.addComponent(e)}catch(r){Ts.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function Ro(t){const e=t.name;if(pE.has(e))return Ts.debug(`There were multiple attempts to register component ${e}.`),!1;pE.set(e,t);for(const r of rm.values())Uk(r,t);for(const r of oG.values())Uk(r,t);return!0}function _g(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Hr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lG={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ea=new dh("app","Firebase",lG);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uG{constructor(e,r,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ma("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ea.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mu=sG;function xj(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:fE,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw Ea.create("bad-app-name",{appName:String(s)});if(r||(r=yj()),!r)throw Ea.create("no-options");const a=rm.get(s);if(a){if(nm(r,a.options)&&nm(i,a.config))return a;throw Ea.create("duplicate-app",{appName:s})}const o=new mW(s);for(const u of pE.values())o.addComponent(u);const l=new uG(r,i,o);return rm.set(s,l),l}function AS(t=fE){const e=rm.get(t);if(!e&&t===fE&&yj())return xj();if(!e)throw Ea.create("no-app",{appName:t});return e}function Oi(t,e,r){var i;let s=(i=aG[t])!==null&&i!==void 0?i:t;r&&(s+=`-${r}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${s}" with version "${e}":`];a&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ts.warn(l.join(" "));return}Ro(new Ma(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cG="firebase-heartbeat-database",dG=1,Pd="firebase-heartbeat-store";let Dy=null;function Ej(){return Dy||(Dy=kW(cG,dG,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Pd)}catch(r){console.warn(r)}}}}).catch(t=>{throw Ea.create("idb-open",{originalErrorMessage:t.message})})),Dy}async function hG(t){try{const r=(await Ej()).transaction(Pd),i=await r.objectStore(Pd).get(Sj(t));return await r.done,i}catch(e){if(e instanceof Yi)Ts.warn(e.message);else{const r=Ea.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ts.warn(r.message)}}}async function Bk(t,e){try{const i=(await Ej()).transaction(Pd,"readwrite");await i.objectStore(Pd).put(e,Sj(t)),await i.done}catch(r){if(r instanceof Yi)Ts.warn(r.message);else{const i=Ea.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ts.warn(i.message)}}}function Sj(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fG=1024,pG=30;class mG{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new vG(r),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=zk();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>pG){const o=yG(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Ts.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=zk(),{heartbeatsToSend:i,unsentEntries:s}=gG(this._heartbeatsCache.heartbeats),a=tm(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return Ts.warn(r),""}}}function zk(){return new Date().toISOString().substring(0,10)}function gG(t,e=fG){const r=[];let i=t.slice();for(const s of t){const a=r.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),qk(r)>e){a.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),qk(r)>e){r.pop();break}i=i.slice(1)}return{heartbeatsToSend:r,unsentEntries:i}}class vG{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rW()?iW().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await hG(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return Bk(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return Bk(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function qk(t){return tm(JSON.stringify({version:2,heartbeats:t})).length}function yG(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let i=1;i<t.length;i++)t[i].date<r&&(r=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _G(t){Ro(new Ma("platform-logger",e=>new RW(e),"PRIVATE")),Ro(new Ma("heartbeat",e=>new mG(e),"PRIVATE")),Oi(hE,$k,t),Oi(hE,$k,"esm2017"),Oi("fire-js","")}_G("");function RS(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r}function Tj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wG=Tj,Ij=new dh("auth","Firebase",Tj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const im=new kS("@firebase/auth");function bG(t,...e){im.logLevel<=rt.WARN&&im.warn(`Auth (${Mu}): ${t}`,...e)}function hp(t,...e){im.logLevel<=rt.ERROR&&im.error(`Auth (${Mu}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _i(t,...e){throw PS(t,...e)}function ji(t,...e){return PS(t,...e)}function Cj(t,e,r){const i=Object.assign(Object.assign({},wG()),{[e]:r});return new dh("auth","Firebase",i).create(e,{appName:t.name})}function Sa(t){return Cj(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function PS(t,...e){if(typeof t!="string"){const r=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(r,...i)}return Ij.create(t,...e)}function qe(t,e,...r){if(!t)throw PS(e,...r)}function cs(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hp(e),new Error(e)}function Is(t,e){t||cs(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function xG(){return Hk()==="http:"||Hk()==="https:"}function Hk(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EG(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xG()||ZH()||"connection"in navigator)?navigator.onLine:!0}function SG(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e,r){this.shortDelay=e,this.longDelay=r,Is(r>e,"Short delay should be less than long delay!"),this.isMobile=XH()||eW()}get(){return EG()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t,e){Is(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{static initialize(e,r,i){this.fetchImpl=e,r&&(this.headersImpl=r),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cs("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cs("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cs("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TG={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IG=new fh(3e4,6e4);function Ho(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ga(t,e,r,i,s={}){return Nj(t,s,async()=>{let a={},o={};i&&(e==="GET"?o=i:a={body:JSON.stringify(i)});const l=hh(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},a);return JH()||(c.referrerPolicy="no-referrer"),kj.fetch()(Aj(t,t.config.apiHost,r,l),c)})}async function Nj(t,e,r){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},TG),e);try{const s=new kG(t),a=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw If(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw If(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw If(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw If(t,"user-disabled",o);const d=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Cj(t,d,c);_i(t,d)}}catch(s){if(s instanceof Yi)throw s;_i(t,"network-request-failed",{message:String(s)})}}async function wg(t,e,r,i,s={}){const a=await Ga(t,e,r,i,s);return"mfaPendingCredential"in a&&_i(t,"multi-factor-auth-required",{_serverResponse:a}),a}function Aj(t,e,r,i){const s=`${e}${r}?${i}`;return t.config.emulator?DS(t.config,s):`${t.config.apiScheme}://${s}`}function CG(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kG{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,i)=>{this.timer=setTimeout(()=>i(ji(this.auth,"network-request-failed")),IG.get())})}}function If(t,e,r){const i={appName:t.name};r.email&&(i.email=r.email),r.phoneNumber&&(i.phoneNumber=r.phoneNumber);const s=ji(t,e,i);return s.customData._tokenResponse=r,s}function Wk(t){return t!==void 0&&t.enterprise!==void 0}class NG{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return CG(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function AG(t,e){return Ga(t,"GET","/v2/recaptchaConfig",Ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RG(t,e){return Ga(t,"POST","/v1/accounts:delete",e)}async function Rj(t,e){return Ga(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function PG(t,e=!1){const r=an(t),i=await r.getIdToken(e),s=MS(i);qe(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:sd(My(s.auth_time)),issuedAtTime:sd(My(s.iat)),expirationTime:sd(My(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function My(t){return Number(t)*1e3}function MS(t){const[e,r,i]=t.split(".");if(e===void 0||r===void 0||i===void 0)return hp("JWT malformed, contained fewer than 3 sections"),null;try{const s=mj(r);return s?JSON.parse(s):(hp("Failed to decode base64 JWT payload"),null)}catch(s){return hp("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Gk(t){const e=MS(t);return qe(e,"internal-error"),qe(typeof e.exp<"u","internal-error"),qe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dd(t,e,r=!1){if(r)return e;try{return await e}catch(i){throw i instanceof Yi&&DG(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function DG({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MG{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=sd(this.lastLoginAt),this.creationTime=sd(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sm(t){var e;const r=t.auth,i=await t.getIdToken(),s=await Dd(t,Rj(r,{idToken:i}));qe(s==null?void 0:s.users.length,r,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?Pj(a.providerUserInfo):[],l=OG(t.providerData,o),u=t.isAnonymous,c=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),d=u?c:!1,h={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new gE(a.createdAt,a.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function LG(t){const e=an(t);await sm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function OG(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function Pj(t){return t.map(e=>{var{providerId:r}=e,i=RS(e,["providerId"]);return{providerId:r,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jG(t,e){const r=await Nj(t,{},async()=>{const i=hh({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=Aj(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",kj.fetch()(o,{method:"POST",headers:l,body:i})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function VG(t,e){return Ga(t,"POST","/v2/accounts:revokeToken",Ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){qe(e.idToken,"internal-error"),qe(typeof e.idToken<"u","internal-error"),qe(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Gk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){qe(e.length!==0,"internal-error");const r=Gk(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(qe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:i,refreshToken:s,expiresIn:a}=await jG(e,r);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,r,i){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,r){const{refreshToken:i,accessToken:s,expirationTime:a}=r,o=new Wl;return i&&(qe(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),s&&(qe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(qe(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wl,this.toJSON())}_performRefresh(){return cs("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gs(t,e){qe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ds{constructor(e){var{uid:r,auth:i,stsTokenManager:s}=e,a=RS(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new MG(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new gE(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await Dd(this,this.stsTokenManager.getToken(this.auth,e));return qe(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return PG(this,e)}reload(){return LG(this)}_assign(e){this!==e&&(qe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new ds(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){qe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),r&&await sm(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Hr(this.auth.app))return Promise.reject(Sa(this.auth));const e=await this.getIdToken();return await Dd(this,RG(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var i,s,a,o,l,u,c,d;const h=(i=r.displayName)!==null&&i!==void 0?i:void 0,f=(s=r.email)!==null&&s!==void 0?s:void 0,m=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,v=(o=r.photoURL)!==null&&o!==void 0?o:void 0,y=(l=r.tenantId)!==null&&l!==void 0?l:void 0,b=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,_=(c=r.createdAt)!==null&&c!==void 0?c:void 0,w=(d=r.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:E,emailVerified:N,isAnonymous:M,providerData:O,stsTokenManager:A}=r;qe(E&&A,e,"internal-error");const D=Wl.fromJSON(this.name,A);qe(typeof E=="string",e,"internal-error"),Gs(h,e.name),Gs(f,e.name),qe(typeof N=="boolean",e,"internal-error"),qe(typeof M=="boolean",e,"internal-error"),Gs(m,e.name),Gs(v,e.name),Gs(y,e.name),Gs(b,e.name),Gs(_,e.name),Gs(w,e.name);const T=new ds({uid:E,auth:e,email:f,emailVerified:N,displayName:h,isAnonymous:M,photoURL:v,phoneNumber:m,tenantId:y,stsTokenManager:D,createdAt:_,lastLoginAt:w});return O&&Array.isArray(O)&&(T.providerData=O.map(I=>Object.assign({},I))),b&&(T._redirectEventId=b),T}static async _fromIdTokenResponse(e,r,i=!1){const s=new Wl;s.updateFromServerResponse(r);const a=new ds({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await sm(a),a}static async _fromGetAccountInfoResponse(e,r,i){const s=r.users[0];qe(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?Pj(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new Wl;l.updateFromIdToken(i);const u=new ds({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new gE(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=new Map;function hs(t){Is(t instanceof Function,"Expected a class definition");let e=Kk.get(t);return e?(Is(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Kk.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}Dj.type="NONE";const Yk=Dj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fp(t,e,r){return`firebase:${t}:${e}:${r}`}class Gl{constructor(e,r,i){this.persistence=e,this.auth=r,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=fp(this.userKey,s.apiKey,a),this.fullPersistenceKey=fp("persistence",s.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ds._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,i="authUser"){if(!r.length)return new Gl(hs(Yk),e,i);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let a=s[0]||hs(Yk);const o=fp(i,e.config.apiKey,e.name);let l=null;for(const c of r)try{const d=await c._get(o);if(d){const h=ds._fromJSON(e,d);c!==a&&(l=h),a=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new Gl(a,e,i):(a=u[0],l&&await a._set(o,l.toJSON()),await Promise.all(r.map(async c=>{if(c!==a)try{await c._remove(o)}catch{}})),new Gl(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Mj(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Fj(e))return"Blackberry";if($j(e))return"Webos";if(Lj(e))return"Safari";if((e.includes("chrome/")||Oj(e))&&!e.includes("edge/"))return"Chrome";if(Vj(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(r);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function Mj(t=Yn()){return/firefox\//i.test(t)}function Lj(t=Yn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Oj(t=Yn()){return/crios\//i.test(t)}function jj(t=Yn()){return/iemobile/i.test(t)}function Vj(t=Yn()){return/android/i.test(t)}function Fj(t=Yn()){return/blackberry/i.test(t)}function $j(t=Yn()){return/webos/i.test(t)}function LS(t=Yn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function FG(t=Yn()){var e;return LS(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function $G(){return tW()&&document.documentMode===10}function Uj(t=Yn()){return LS(t)||Vj(t)||$j(t)||Fj(t)||/windows phone/i.test(t)||jj(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(t,e=[]){let r;switch(t){case"Browser":r=Xk(Yn());break;case"Worker":r=`${Xk(Yn())}-${t}`;break;default:r=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Mu}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UG{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const i=a=>new Promise((o,l)=>{try{const u=e(a);o(u)}catch(u){l(u)}});i.onAbort=r,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const i of this.queue)await i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BG(t,e={}){return Ga(t,"GET","/v2/passwordPolicy",Ho(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zG=6;class qG{constructor(e){var r,i,s,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:zG,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,i,s,a,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,r){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(r.meetsMinPasswordLength=e.length>=i),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,r,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HG{constructor(e,r,i,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Qk(this),this.idTokenSubscription=new Qk(this),this.beforeStateQueue=new UG(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ij,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=hs(r)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await Gl.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await Rj(this,{idToken:e}),i=await ds._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Hr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return qe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await sm(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SG()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Hr(this.app))return Promise.reject(Sa(this));const r=e?an(e):null;return r&&qe(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&qe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Hr(this.app)?Promise.reject(Sa(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Hr(this.app)?Promise.reject(Sa(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hs(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await BG(this),r=new qG(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new dh("auth","Firebase",e())}onAuthStateChanged(e,r,i){return this.registerStateListener(this.authStateSubscription,e,r,i)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,i){return this.registerStateListener(this.idTokenSubscription,e,r,i)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(i.tenantId=this.tenantId),await VG(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const i=await this.getOrInitRedirectPersistenceManager(r);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&hs(e)||this._popupRedirectResolver;qe(r,this,"argument-error"),this.redirectPersistenceManager=await Gl.create(this,[hs(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,i;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,i,s){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(qe(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,i,s);return()=>{o=!0,u()}}else{const u=e.addObserver(r);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return qe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Bj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(r["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;if(Hr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&bG(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Lu(t){return an(t)}class Qk{constructor(e){this.auth=e,this.observer=null,this.addObserver=uW(r=>this.observer=r)}get next(){return qe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function WG(t){bg=t}function zj(t){return bg.loadJS(t)}function GG(){return bg.recaptchaEnterpriseScript}function KG(){return bg.gapiScript}function YG(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class XG{constructor(){this.enterprise=new QG}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class QG{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const JG="recaptcha-enterprise",qj="NO_RECAPTCHA";class ZG{constructor(e){this.type=JG,this.auth=Lu(e)}async verify(e="verify",r=!1){async function i(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{AG(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new NG(u);return a.tenantId==null?a._agentRecaptchaConfig=c:a._tenantRecaptchaConfigs[a.tenantId]=c,o(c.siteKey)}}).catch(u=>{l(u)})})}function s(a,o,l){const u=window.grecaptcha;Wk(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(c=>{o(c)}).catch(()=>{o(qj)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new XG().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{i(this.auth).then(l=>{if(!r&&Wk(window.grecaptcha))s(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=GG();u.length!==0&&(u+=l),zj(u).then(()=>{s(l,a,o)}).catch(c=>{o(c)})}}).catch(l=>{o(l)})})}}async function Jk(t,e,r,i=!1,s=!1){const a=new ZG(t);let o;if(s)o=qj;else try{o=await a.verify(r)}catch{o=await a.verify(r,!0)}const l=Object.assign({},e);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,c=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Zk(t,e,r,i,s){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Jk(t,e,r,r==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Jk(t,e,r,r==="getOobCode");return i(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eK(t,e){const r=_g(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),a=r.getOptions();if(nm(a,e??{}))return s;_i(s,"already-initialized")}return r.initialize({options:e})}function tK(t,e){const r=(e==null?void 0:e.persistence)||[],i=(Array.isArray(r)?r:[r]).map(hs);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function nK(t,e,r){const i=Lu(t);qe(i._canInitEmulator,i,"emulator-config-failed"),qe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=Hj(e),{host:o,port:l}=rK(e),u=l===null?"":`:${l}`;i.config.emulator={url:`${a}//${o}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),iK()}function Hj(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function rK(t){const e=Hj(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const i=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:eN(i.substr(a.length+1))}}else{const[a,o]=i.split(":");return{host:a,port:eN(o)}}}function eN(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function iK(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OS{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return cs("not implemented")}_getIdTokenResponse(e){return cs("not implemented")}_linkToIdToken(e,r){return cs("not implemented")}_getReauthenticationResolver(e){return cs("not implemented")}}async function sK(t,e){return Ga(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aK(t,e){return wg(t,"POST","/v1/accounts:signInWithPassword",Ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oK(t,e){return wg(t,"POST","/v1/accounts:signInWithEmailLink",Ho(t,e))}async function lK(t,e){return wg(t,"POST","/v1/accounts:signInWithEmailLink",Ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Md extends OS{constructor(e,r,i,s=null){super("password",i),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new Md(e,r,"password")}static _fromEmailAndCode(e,r,i=null){return new Md(e,r,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zk(e,r,"signInWithPassword",aK);case"emailLink":return oK(e,{email:this._email,oobCode:this._password});default:_i(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const i={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Zk(e,i,"signUpPassword",sK);case"emailLink":return lK(e,{idToken:r,email:this._email,oobCode:this._password});default:_i(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kl(t,e){return wg(t,"POST","/v1/accounts:signInWithIdp",Ho(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uK="http://localhost";class Po extends OS{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Po(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):_i("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=r,a=RS(r,["providerId","signInMethod"]);if(!i||!s)return null;const o=new Po(i,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return Kl(e,r)}_linkToIdToken(e,r){const i=this.buildRequest();return i.idToken=r,Kl(e,i)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Kl(e,r)}buildRequest(){const e={requestUri:uK,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=hh(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cK(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function dK(t){const e=Dc(Mc(t)).link,r=e?Dc(Mc(e)).deep_link_id:null,i=Dc(Mc(t)).deep_link_id;return(i?Dc(Mc(i)).link:null)||i||r||e||t}class jS{constructor(e){var r,i,s,a,o,l;const u=Dc(Mc(e)),c=(r=u.apiKey)!==null&&r!==void 0?r:null,d=(i=u.oobCode)!==null&&i!==void 0?i:null,h=cK((s=u.mode)!==null&&s!==void 0?s:null);qe(c&&d&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=d,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=dK(e);try{return new jS(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(){this.providerId=Ou.PROVIDER_ID}static credential(e,r){return Md._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const i=jS.parseLink(r);return qe(i,"argument-error"),Md._fromEmailAndCode(e,i.code,i.tenantId)}}Ou.PROVIDER_ID="password";Ou.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ou.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wj{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ph extends Wj{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia extends ph{constructor(){super("facebook.com")}static credential(e){return Po._fromParams({providerId:ia.PROVIDER_ID,signInMethod:ia.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ia.credentialFromTaggedObject(e)}static credentialFromError(e){return ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ia.credential(e.oauthAccessToken)}catch{return null}}}ia.FACEBOOK_SIGN_IN_METHOD="facebook.com";ia.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa extends ph{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Po._fromParams({providerId:sa.PROVIDER_ID,signInMethod:sa.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return sa.credentialFromTaggedObject(e)}static credentialFromError(e){return sa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:i}=e;if(!r&&!i)return null;try{return sa.credential(r,i)}catch{return null}}}sa.GOOGLE_SIGN_IN_METHOD="google.com";sa.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa extends ph{constructor(){super("github.com")}static credential(e){return Po._fromParams({providerId:aa.PROVIDER_ID,signInMethod:aa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return aa.credentialFromTaggedObject(e)}static credentialFromError(e){return aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return aa.credential(e.oauthAccessToken)}catch{return null}}}aa.GITHUB_SIGN_IN_METHOD="github.com";aa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa extends ph{constructor(){super("twitter.com")}static credential(e,r){return Po._fromParams({providerId:oa.PROVIDER_ID,signInMethod:oa.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return oa.credentialFromTaggedObject(e)}static credentialFromError(e){return oa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:i}=e;if(!r||!i)return null;try{return oa.credential(r,i)}catch{return null}}}oa.TWITTER_SIGN_IN_METHOD="twitter.com";oa.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,i,s=!1){const a=await ds._fromIdTokenResponse(e,i,s),o=tN(i);return new lu({user:a,providerId:o,_tokenResponse:i,operationType:r})}static async _forOperation(e,r,i){await e._updateTokensIfNecessary(i,!0);const s=tN(i);return new lu({user:e,providerId:s,_tokenResponse:i,operationType:r})}}function tN(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am extends Yi{constructor(e,r,i,s){var a;super(r.code,r.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,am.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,r,i,s){return new am(e,r,i,s)}}function Gj(t,e,r,i){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?am._fromErrorAndOperation(t,a,e,i):a})}async function hK(t,e,r=!1){const i=await Dd(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return lu._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fK(t,e,r=!1){const{auth:i}=t;if(Hr(i.app))return Promise.reject(Sa(i));const s="reauthenticate";try{const a=await Dd(t,Gj(i,s,e,t),r);qe(a.idToken,i,"internal-error");const o=MS(a.idToken);qe(o,i,"internal-error");const{sub:l}=o;return qe(t.uid===l,i,"user-mismatch"),lu._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&_i(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kj(t,e,r=!1){if(Hr(t.app))return Promise.reject(Sa(t));const i="signIn",s=await Gj(t,i,e),a=await lu._fromIdTokenResponse(t,i,s);return r||await t._updateCurrentUser(a.user),a}async function pK(t,e){return Kj(Lu(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mK(t){const e=Lu(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function gK(t,e,r){return Hr(t.app)?Promise.reject(Sa(t)):pK(an(t),Ou.credential(e,r)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&mK(t),i})}function vK(t,e,r,i){return an(t).onIdTokenChanged(e,r,i)}function yK(t,e,r){return an(t).beforeAuthStateChanged(e,r)}function _K(t,e,r,i){return an(t).onAuthStateChanged(e,r,i)}function wK(t){return an(t).signOut()}const om="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yj{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(om,"1"),this.storage.removeItem(om),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bK=1e3,xK=10;class Xj extends Yj{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Uj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&e(r,s,i)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const i=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(i);!r&&this.localCache[i]===o||this.notifyListeners(i,o)},a=this.storage.getItem(i);$G()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,xK):s()}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:i}),!0)})},bK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}Xj.type="LOCAL";const EK=Xj;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj extends Yj{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}Qj.type="SESSION";const Jj=Qj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SK(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const i=new xg(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:i,eventType:s,data:a}=r.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(o).map(async c=>c(r.origin,a)),u=await SK(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t="",e=10){let r="";for(let i=0;i<e;i++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TK{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,u)=>{const c=VS("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(d),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(f.data.response);break;default:clearTimeout(d),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(){return window}function IK(t){Vi().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(){return typeof Vi().WorkerGlobalScope<"u"&&typeof Vi().importScripts=="function"}async function CK(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function kK(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function NK(){return Zj()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5="firebaseLocalStorageDb",AK=1,lm="firebaseLocalStorage",t5="fbase_key";class mh{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Eg(t,e){return t.transaction([lm],e?"readwrite":"readonly").objectStore(lm)}function RK(){const t=indexedDB.deleteDatabase(e5);return new mh(t).toPromise()}function vE(){const t=indexedDB.open(e5,AK);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(lm,{keyPath:t5})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(lm)?e(i):(i.close(),await RK(),e(await vE()))})})}async function nN(t,e,r){const i=Eg(t,!0).put({[t5]:e,value:r});return new mh(i).toPromise()}async function PK(t,e){const r=Eg(t,!1).get(e),i=await new mh(r).toPromise();return i===void 0?null:i.value}function rN(t,e){const r=Eg(t,!0).delete(e);return new mh(r).toPromise()}const DK=800,MK=3;class n5{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vE(),this.db)}async _withRetries(e){let r=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(r++>MK)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Zj()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xg._getInstance(NK()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await CK(),!this.activeServiceWorker)return;this.sender=new TK(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||kK()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vE();return await nN(e,om,"1"),await rN(e,om),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>nN(i,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(i=>PK(i,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>rN(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=Eg(s,!1).getAll();return new mh(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DK)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}n5.type="LOCAL";const LK=n5;new fh(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OK(t,e){return e?hs(e):(qe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS extends OS{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kl(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Kl(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Kl(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function jK(t){return Kj(t.auth,new FS(t),t.bypassAuthState)}function VK(t){const{auth:e,user:r}=t;return qe(r,e,"internal-error"),fK(r,new FS(t),t.bypassAuthState)}async function FK(t){const{auth:e,user:r}=t;return qe(r,e,"internal-error"),hK(r,new FS(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r5{constructor(e,r,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:i,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:r,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jK;case"linkViaPopup":case"linkViaRedirect":return FK;case"reauthViaPopup":case"reauthViaRedirect":return VK;default:_i(this.auth,"internal-error")}}resolve(e){Is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Is(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $K=new fh(2e3,1e4);class jl extends r5{constructor(e,r,i,s,a){super(e,r,s,a),this.provider=i,this.authWindow=null,this.pollId=null,jl.currentPopupAction&&jl.currentPopupAction.cancel(),jl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return qe(e,this.auth,"internal-error"),e}async onExecution(){Is(this.filter.length===1,"Popup operations only handle one event");const e=VS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ji(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ji(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,jl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ji(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$K.get())};e()}}jl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UK="pendingRedirect",pp=new Map;class BK extends r5{constructor(e,r,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,i),this.eventId=null}async execute(){let e=pp.get(this.auth._key());if(!e){try{const i=await zK(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(r){e=()=>Promise.reject(r)}pp.set(this.auth._key(),e)}return this.bypassAuthState||pp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zK(t,e){const r=WK(e),i=HK(t);if(!await i._isAvailable())return!1;const s=await i._get(r)==="true";return await i._remove(r),s}function qK(t,e){pp.set(t._key(),e)}function HK(t){return hs(t._redirectPersistence)}function WK(t){return fp(UK,t.config.apiKey,t.name)}async function GK(t,e,r=!1){if(Hr(t.app))return Promise.reject(Sa(t));const i=Lu(t),s=OK(i,e),o=await new BK(i,s,r).execute();return o&&!r&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KK=10*60*1e3;class YK{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(r=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XK(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var i;if(e.error&&!i5(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";r.onError(ji(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const i=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=KK&&this.cachedEventUids.clear(),this.cachedEventUids.has(iN(e))}saveEventToCache(e){this.cachedEventUids.add(iN(e)),this.lastProcessedEventTime=Date.now()}}function iN(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function i5({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function XK(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return i5(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QK(t,e={}){return Ga(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JK=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ZK=/^https?/;async function eY(t){if(t.config.emulator)return;const{authorizedDomains:e}=await QK(t);for(const r of e)try{if(tY(r))return}catch{}_i(t,"unauthorized-domain")}function tY(t){const e=mE(),{protocol:r,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===i}if(!ZK.test(r))return!1;if(JK.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nY=new fh(3e4,6e4);function sN(){const t=Vi().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function rY(t){return new Promise((e,r)=>{var i,s,a;function o(){sN(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{sN(),r(ji(t,"network-request-failed"))},timeout:nY.get()})}if(!((s=(i=Vi().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=Vi().gapi)===null||a===void 0)&&a.load)o();else{const l=YG("iframefcb");return Vi()[l]=()=>{gapi.load?o():r(ji(t,"network-request-failed"))},zj(`${KG()}?onload=${l}`).catch(u=>r(u))}}).catch(e=>{throw mp=null,e})}let mp=null;function iY(t){return mp=mp||rY(t),mp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sY=new fh(5e3,15e3),aY="__/auth/iframe",oY="emulator/auth/iframe",lY={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uY=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cY(t){const e=t.config;qe(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?DS(e,oY):`https://${t.config.authDomain}/${aY}`,i={apiKey:e.apiKey,appName:t.name,v:Mu},s=uY.get(t.config.apiHost);s&&(i.eid=s);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${r}?${hh(i).slice(1)}`}async function dY(t){const e=await iY(t),r=Vi().gapi;return qe(r,t,"internal-error"),e.open({where:document.body,url:cY(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lY,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const o=ji(t,"network-request-failed"),l=Vi().setTimeout(()=>{a(o)},sY.get());function u(){Vi().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hY={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},fY=500,pY=600,mY="_blank",gY="http://localhost";class aN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vY(t,e,r,i=fY,s=pY){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u=Object.assign(Object.assign({},hY),{width:i.toString(),height:s.toString(),top:a,left:o}),c=Yn().toLowerCase();r&&(l=Oj(c)?mY:r),Mj(c)&&(e=e||gY,u.scrollbars="yes");const d=Object.entries(u).reduce((f,[m,v])=>`${f}${m}=${v},`,"");if(FG(c)&&l!=="_self")return yY(e||"",l),new aN(null);const h=window.open(e||"",l,d);qe(h,t,"popup-blocked");try{h.focus()}catch{}return new aN(h)}function yY(t,e){const r=document.createElement("a");r.href=t,r.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Y="__/auth/handler",wY="emulator/auth/handler",bY=encodeURIComponent("fac");async function oN(t,e,r,i,s,a){qe(t.config.authDomain,t,"auth-domain-config-required"),qe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:Mu,eventId:s};if(e instanceof Wj){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",lW(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))o[d]=h}if(e instanceof ph){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const u=await t._getAppCheckToken(),c=u?`#${bY}=${encodeURIComponent(u)}`:"";return`${xY(t)}?${hh(l).slice(1)}${c}`}function xY({config:t}){return t.emulator?DS(t,wY):`https://${t.authDomain}/${_Y}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ly="webStorageSupport";class EY{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jj,this._completeRedirectFn=GK,this._overrideRedirectResult=qK}async _openPopup(e,r,i,s){var a;Is((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await oN(e,r,i,mE(),s);return vY(e,o,VS())}async _openRedirect(e,r,i,s){await this._originValidation(e);const a=await oN(e,r,i,mE(),s);return IK(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:a}=this.eventManagers[r];return s?Promise.resolve(s):(Is(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[r]={promise:i},i.catch(()=>{delete this.eventManagers[r]}),i}async initAndGetManager(e){const r=await dY(e),i=new YK(e);return r.register("authEvent",s=>(qe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=r,i}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Ly,{type:Ly},s=>{var a;const o=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Ly];o!==void 0&&r(!!o),_i(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=eY(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return Uj()||Lj()||LS()}}const SY=EY;var lN="@firebase/auth",uN="1.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TY{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){qe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IY(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CY(t){Ro(new Ma("auth",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=i.options;qe(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Bj(t)},c=new HG(i,s,a,u);return tK(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,i)=>{e.getProvider("auth-internal").initialize()})),Ro(new Ma("auth-internal",e=>{const r=Lu(e.getProvider("auth").getImmediate());return(i=>new TY(i))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),Oi(lN,uN,IY(t)),Oi(lN,uN,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kY=5*60,NY=_j("authIdTokenMaxAge")||kY;let cN=null;const AY=t=>async e=>{const r=e&&await e.getIdTokenResult(),i=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>NY)return;const s=r==null?void 0:r.token;cN!==s&&(cN=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function RY(t=AS()){const e=_g(t,"auth");if(e.isInitialized())return e.getImmediate();const r=eK(t,{popupRedirectResolver:SY,persistence:[LK,EK,Jj]}),i=_j("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const o=AY(a.toString());yK(r,o,()=>o(r.currentUser)),vK(r,l=>o(l))}}const s=gj("auth");return s&&nK(r,`http://${s}`),r}function PY(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}WG({loadJS(t){return new Promise((e,r)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const a=ji("internal-error");a.customData=s,r(a)},i.type="text/javascript",i.charset="UTF-8",PY().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CY("Browser");var DY="firebase",MY="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Oi(DY,MY,"app");var dN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ta,s5;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,D){function T(){}T.prototype=D.prototype,A.D=D.prototype,A.prototype=new T,A.prototype.constructor=A,A.C=function(I,x,R){for(var P=Array(arguments.length-2),j=2;j<arguments.length;j++)P[j-2]=arguments[j];return D.prototype[x].apply(I,P)}}function r(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,r),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,D,T){T||(T=0);var I=Array(16);if(typeof D=="string")for(var x=0;16>x;++x)I[x]=D.charCodeAt(T++)|D.charCodeAt(T++)<<8|D.charCodeAt(T++)<<16|D.charCodeAt(T++)<<24;else for(x=0;16>x;++x)I[x]=D[T++]|D[T++]<<8|D[T++]<<16|D[T++]<<24;D=A.g[0],T=A.g[1],x=A.g[2];var R=A.g[3],P=D+(R^T&(x^R))+I[0]+3614090360&4294967295;D=T+(P<<7&4294967295|P>>>25),P=R+(x^D&(T^x))+I[1]+3905402710&4294967295,R=D+(P<<12&4294967295|P>>>20),P=x+(T^R&(D^T))+I[2]+606105819&4294967295,x=R+(P<<17&4294967295|P>>>15),P=T+(D^x&(R^D))+I[3]+3250441966&4294967295,T=x+(P<<22&4294967295|P>>>10),P=D+(R^T&(x^R))+I[4]+4118548399&4294967295,D=T+(P<<7&4294967295|P>>>25),P=R+(x^D&(T^x))+I[5]+1200080426&4294967295,R=D+(P<<12&4294967295|P>>>20),P=x+(T^R&(D^T))+I[6]+2821735955&4294967295,x=R+(P<<17&4294967295|P>>>15),P=T+(D^x&(R^D))+I[7]+4249261313&4294967295,T=x+(P<<22&4294967295|P>>>10),P=D+(R^T&(x^R))+I[8]+1770035416&4294967295,D=T+(P<<7&4294967295|P>>>25),P=R+(x^D&(T^x))+I[9]+2336552879&4294967295,R=D+(P<<12&4294967295|P>>>20),P=x+(T^R&(D^T))+I[10]+4294925233&4294967295,x=R+(P<<17&4294967295|P>>>15),P=T+(D^x&(R^D))+I[11]+2304563134&4294967295,T=x+(P<<22&4294967295|P>>>10),P=D+(R^T&(x^R))+I[12]+1804603682&4294967295,D=T+(P<<7&4294967295|P>>>25),P=R+(x^D&(T^x))+I[13]+4254626195&4294967295,R=D+(P<<12&4294967295|P>>>20),P=x+(T^R&(D^T))+I[14]+2792965006&4294967295,x=R+(P<<17&4294967295|P>>>15),P=T+(D^x&(R^D))+I[15]+1236535329&4294967295,T=x+(P<<22&4294967295|P>>>10),P=D+(x^R&(T^x))+I[1]+4129170786&4294967295,D=T+(P<<5&4294967295|P>>>27),P=R+(T^x&(D^T))+I[6]+3225465664&4294967295,R=D+(P<<9&4294967295|P>>>23),P=x+(D^T&(R^D))+I[11]+643717713&4294967295,x=R+(P<<14&4294967295|P>>>18),P=T+(R^D&(x^R))+I[0]+3921069994&4294967295,T=x+(P<<20&4294967295|P>>>12),P=D+(x^R&(T^x))+I[5]+3593408605&4294967295,D=T+(P<<5&4294967295|P>>>27),P=R+(T^x&(D^T))+I[10]+38016083&4294967295,R=D+(P<<9&4294967295|P>>>23),P=x+(D^T&(R^D))+I[15]+3634488961&4294967295,x=R+(P<<14&4294967295|P>>>18),P=T+(R^D&(x^R))+I[4]+3889429448&4294967295,T=x+(P<<20&4294967295|P>>>12),P=D+(x^R&(T^x))+I[9]+568446438&4294967295,D=T+(P<<5&4294967295|P>>>27),P=R+(T^x&(D^T))+I[14]+3275163606&4294967295,R=D+(P<<9&4294967295|P>>>23),P=x+(D^T&(R^D))+I[3]+4107603335&4294967295,x=R+(P<<14&4294967295|P>>>18),P=T+(R^D&(x^R))+I[8]+1163531501&4294967295,T=x+(P<<20&4294967295|P>>>12),P=D+(x^R&(T^x))+I[13]+2850285829&4294967295,D=T+(P<<5&4294967295|P>>>27),P=R+(T^x&(D^T))+I[2]+4243563512&4294967295,R=D+(P<<9&4294967295|P>>>23),P=x+(D^T&(R^D))+I[7]+1735328473&4294967295,x=R+(P<<14&4294967295|P>>>18),P=T+(R^D&(x^R))+I[12]+2368359562&4294967295,T=x+(P<<20&4294967295|P>>>12),P=D+(T^x^R)+I[5]+4294588738&4294967295,D=T+(P<<4&4294967295|P>>>28),P=R+(D^T^x)+I[8]+2272392833&4294967295,R=D+(P<<11&4294967295|P>>>21),P=x+(R^D^T)+I[11]+1839030562&4294967295,x=R+(P<<16&4294967295|P>>>16),P=T+(x^R^D)+I[14]+4259657740&4294967295,T=x+(P<<23&4294967295|P>>>9),P=D+(T^x^R)+I[1]+2763975236&4294967295,D=T+(P<<4&4294967295|P>>>28),P=R+(D^T^x)+I[4]+1272893353&4294967295,R=D+(P<<11&4294967295|P>>>21),P=x+(R^D^T)+I[7]+4139469664&4294967295,x=R+(P<<16&4294967295|P>>>16),P=T+(x^R^D)+I[10]+3200236656&4294967295,T=x+(P<<23&4294967295|P>>>9),P=D+(T^x^R)+I[13]+681279174&4294967295,D=T+(P<<4&4294967295|P>>>28),P=R+(D^T^x)+I[0]+3936430074&4294967295,R=D+(P<<11&4294967295|P>>>21),P=x+(R^D^T)+I[3]+3572445317&4294967295,x=R+(P<<16&4294967295|P>>>16),P=T+(x^R^D)+I[6]+76029189&4294967295,T=x+(P<<23&4294967295|P>>>9),P=D+(T^x^R)+I[9]+3654602809&4294967295,D=T+(P<<4&4294967295|P>>>28),P=R+(D^T^x)+I[12]+3873151461&4294967295,R=D+(P<<11&4294967295|P>>>21),P=x+(R^D^T)+I[15]+530742520&4294967295,x=R+(P<<16&4294967295|P>>>16),P=T+(x^R^D)+I[2]+3299628645&4294967295,T=x+(P<<23&4294967295|P>>>9),P=D+(x^(T|~R))+I[0]+4096336452&4294967295,D=T+(P<<6&4294967295|P>>>26),P=R+(T^(D|~x))+I[7]+1126891415&4294967295,R=D+(P<<10&4294967295|P>>>22),P=x+(D^(R|~T))+I[14]+2878612391&4294967295,x=R+(P<<15&4294967295|P>>>17),P=T+(R^(x|~D))+I[5]+4237533241&4294967295,T=x+(P<<21&4294967295|P>>>11),P=D+(x^(T|~R))+I[12]+1700485571&4294967295,D=T+(P<<6&4294967295|P>>>26),P=R+(T^(D|~x))+I[3]+2399980690&4294967295,R=D+(P<<10&4294967295|P>>>22),P=x+(D^(R|~T))+I[10]+4293915773&4294967295,x=R+(P<<15&4294967295|P>>>17),P=T+(R^(x|~D))+I[1]+2240044497&4294967295,T=x+(P<<21&4294967295|P>>>11),P=D+(x^(T|~R))+I[8]+1873313359&4294967295,D=T+(P<<6&4294967295|P>>>26),P=R+(T^(D|~x))+I[15]+4264355552&4294967295,R=D+(P<<10&4294967295|P>>>22),P=x+(D^(R|~T))+I[6]+2734768916&4294967295,x=R+(P<<15&4294967295|P>>>17),P=T+(R^(x|~D))+I[13]+1309151649&4294967295,T=x+(P<<21&4294967295|P>>>11),P=D+(x^(T|~R))+I[4]+4149444226&4294967295,D=T+(P<<6&4294967295|P>>>26),P=R+(T^(D|~x))+I[11]+3174756917&4294967295,R=D+(P<<10&4294967295|P>>>22),P=x+(D^(R|~T))+I[2]+718787259&4294967295,x=R+(P<<15&4294967295|P>>>17),P=T+(R^(x|~D))+I[9]+3951481745&4294967295,A.g[0]=A.g[0]+D&4294967295,A.g[1]=A.g[1]+(x+(P<<21&4294967295|P>>>11))&4294967295,A.g[2]=A.g[2]+x&4294967295,A.g[3]=A.g[3]+R&4294967295}i.prototype.u=function(A,D){D===void 0&&(D=A.length);for(var T=D-this.blockSize,I=this.B,x=this.h,R=0;R<D;){if(x==0)for(;R<=T;)s(this,A,R),R+=this.blockSize;if(typeof A=="string"){for(;R<D;)if(I[x++]=A.charCodeAt(R++),x==this.blockSize){s(this,I),x=0;break}}else for(;R<D;)if(I[x++]=A[R++],x==this.blockSize){s(this,I),x=0;break}}this.h=x,this.o+=D},i.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var D=1;D<A.length-8;++D)A[D]=0;var T=8*this.o;for(D=A.length-8;D<A.length;++D)A[D]=T&255,T/=256;for(this.u(A),A=Array(16),D=T=0;4>D;++D)for(var I=0;32>I;I+=8)A[T++]=this.g[D]>>>I&255;return A};function a(A,D){var T=l;return Object.prototype.hasOwnProperty.call(T,A)?T[A]:T[A]=D(A)}function o(A,D){this.h=D;for(var T=[],I=!0,x=A.length-1;0<=x;x--){var R=A[x]|0;I&&R==D||(T[x]=R,I=!1)}this.g=T}var l={};function u(A){return-128<=A&&128>A?a(A,function(D){return new o([D|0],0>D?-1:0)}):new o([A|0],0>A?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return h;if(0>A)return b(c(-A));for(var D=[],T=1,I=0;A>=T;I++)D[I]=A/T|0,T*=4294967296;return new o(D,0)}function d(A,D){if(A.length==0)throw Error("number format error: empty string");if(D=D||10,2>D||36<D)throw Error("radix out of range: "+D);if(A.charAt(0)=="-")return b(d(A.substring(1),D));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var T=c(Math.pow(D,8)),I=h,x=0;x<A.length;x+=8){var R=Math.min(8,A.length-x),P=parseInt(A.substring(x,x+R),D);8>R?(R=c(Math.pow(D,R)),I=I.j(R).add(c(P))):(I=I.j(T),I=I.add(c(P)))}return I}var h=u(0),f=u(1),m=u(16777216);t=o.prototype,t.m=function(){if(y(this))return-b(this).m();for(var A=0,D=1,T=0;T<this.g.length;T++){var I=this.i(T);A+=(0<=I?I:4294967296+I)*D,D*=4294967296}return A},t.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(v(this))return"0";if(y(this))return"-"+b(this).toString(A);for(var D=c(Math.pow(A,6)),T=this,I="";;){var x=N(T,D).g;T=_(T,x.j(D));var R=((0<T.g.length?T.g[0]:T.h)>>>0).toString(A);if(T=x,v(T))return R+I;for(;6>R.length;)R="0"+R;I=R+I}},t.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function v(A){if(A.h!=0)return!1;for(var D=0;D<A.g.length;D++)if(A.g[D]!=0)return!1;return!0}function y(A){return A.h==-1}t.l=function(A){return A=_(this,A),y(A)?-1:v(A)?0:1};function b(A){for(var D=A.g.length,T=[],I=0;I<D;I++)T[I]=~A.g[I];return new o(T,~A.h).add(f)}t.abs=function(){return y(this)?b(this):this},t.add=function(A){for(var D=Math.max(this.g.length,A.g.length),T=[],I=0,x=0;x<=D;x++){var R=I+(this.i(x)&65535)+(A.i(x)&65535),P=(R>>>16)+(this.i(x)>>>16)+(A.i(x)>>>16);I=P>>>16,R&=65535,P&=65535,T[x]=P<<16|R}return new o(T,T[T.length-1]&-2147483648?-1:0)};function _(A,D){return A.add(b(D))}t.j=function(A){if(v(this)||v(A))return h;if(y(this))return y(A)?b(this).j(b(A)):b(b(this).j(A));if(y(A))return b(this.j(b(A)));if(0>this.l(m)&&0>A.l(m))return c(this.m()*A.m());for(var D=this.g.length+A.g.length,T=[],I=0;I<2*D;I++)T[I]=0;for(I=0;I<this.g.length;I++)for(var x=0;x<A.g.length;x++){var R=this.i(I)>>>16,P=this.i(I)&65535,j=A.i(x)>>>16,$=A.i(x)&65535;T[2*I+2*x]+=P*$,w(T,2*I+2*x),T[2*I+2*x+1]+=R*$,w(T,2*I+2*x+1),T[2*I+2*x+1]+=P*j,w(T,2*I+2*x+1),T[2*I+2*x+2]+=R*j,w(T,2*I+2*x+2)}for(I=0;I<D;I++)T[I]=T[2*I+1]<<16|T[2*I];for(I=D;I<2*D;I++)T[I]=0;return new o(T,0)};function w(A,D){for(;(A[D]&65535)!=A[D];)A[D+1]+=A[D]>>>16,A[D]&=65535,D++}function E(A,D){this.g=A,this.h=D}function N(A,D){if(v(D))throw Error("division by zero");if(v(A))return new E(h,h);if(y(A))return D=N(b(A),D),new E(b(D.g),b(D.h));if(y(D))return D=N(A,b(D)),new E(b(D.g),D.h);if(30<A.g.length){if(y(A)||y(D))throw Error("slowDivide_ only works with positive integers.");for(var T=f,I=D;0>=I.l(A);)T=M(T),I=M(I);var x=O(T,1),R=O(I,1);for(I=O(I,2),T=O(T,2);!v(I);){var P=R.add(I);0>=P.l(A)&&(x=x.add(T),R=P),I=O(I,1),T=O(T,1)}return D=_(A,x.j(D)),new E(x,D)}for(x=h;0<=A.l(D);){for(T=Math.max(1,Math.floor(A.m()/D.m())),I=Math.ceil(Math.log(T)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),R=c(T),P=R.j(D);y(P)||0<P.l(A);)T-=I,R=c(T),P=R.j(D);v(R)&&(R=f),x=x.add(R),A=_(A,P)}return new E(x,A)}t.A=function(A){return N(this,A).h},t.and=function(A){for(var D=Math.max(this.g.length,A.g.length),T=[],I=0;I<D;I++)T[I]=this.i(I)&A.i(I);return new o(T,this.h&A.h)},t.or=function(A){for(var D=Math.max(this.g.length,A.g.length),T=[],I=0;I<D;I++)T[I]=this.i(I)|A.i(I);return new o(T,this.h|A.h)},t.xor=function(A){for(var D=Math.max(this.g.length,A.g.length),T=[],I=0;I<D;I++)T[I]=this.i(I)^A.i(I);return new o(T,this.h^A.h)};function M(A){for(var D=A.g.length+1,T=[],I=0;I<D;I++)T[I]=A.i(I)<<1|A.i(I-1)>>>31;return new o(T,A.h)}function O(A,D){var T=D>>5;D%=32;for(var I=A.g.length-T,x=[],R=0;R<I;R++)x[R]=0<D?A.i(R+T)>>>D|A.i(R+T+1)<<32-D:A.i(R+T);return new o(x,A.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,s5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,Ta=o}).apply(typeof dN<"u"?dN:typeof self<"u"?self:typeof window<"u"?window:{});var Cf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var a5,Lc,o5,gp,yE,l5,u5,c5;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(g,C,L){return g==Array.prototype||g==Object.prototype||(g[C]=L.value),g};function r(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cf=="object"&&Cf];for(var C=0;C<g.length;++C){var L=g[C];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var i=r(this);function s(g,C){if(C)e:{var L=i;g=g.split(".");for(var z=0;z<g.length-1;z++){var ne=g[z];if(!(ne in L))break e;L=L[ne]}g=g[g.length-1],z=L[g],C=C(z),C!=z&&C!=null&&e(L,g,{configurable:!0,writable:!0,value:C})}}function a(g,C){g instanceof String&&(g+="");var L=0,z=!1,ne={next:function(){if(!z&&L<g.length){var ae=L++;return{value:C(ae,g[ae]),done:!1}}return z=!0,{done:!0,value:void 0}}};return ne[Symbol.iterator]=function(){return ne},ne}s("Array.prototype.values",function(g){return g||function(){return a(this,function(C,L){return L})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(g){var C=typeof g;return C=C!="object"?C:g?Array.isArray(g)?"array":C:"null",C=="array"||C=="object"&&typeof g.length=="number"}function c(g){var C=typeof g;return C=="object"&&g!=null||C=="function"}function d(g,C,L){return g.call.apply(g.bind,arguments)}function h(g,C,L){if(!g)throw Error();if(2<arguments.length){var z=Array.prototype.slice.call(arguments,2);return function(){var ne=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ne,z),g.apply(C,ne)}}return function(){return g.apply(C,arguments)}}function f(g,C,L){return f=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,f.apply(null,arguments)}function m(g,C){var L=Array.prototype.slice.call(arguments,1);return function(){var z=L.slice();return z.push.apply(z,arguments),g.apply(this,z)}}function v(g,C){function L(){}L.prototype=C.prototype,g.aa=C.prototype,g.prototype=new L,g.prototype.constructor=g,g.Qb=function(z,ne,ae){for(var xe=Array(arguments.length-2),Tt=2;Tt<arguments.length;Tt++)xe[Tt-2]=arguments[Tt];return C.prototype[ne].apply(z,xe)}}function y(g){const C=g.length;if(0<C){const L=Array(C);for(let z=0;z<C;z++)L[z]=g[z];return L}return[]}function b(g,C){for(let L=1;L<arguments.length;L++){const z=arguments[L];if(u(z)){const ne=g.length||0,ae=z.length||0;g.length=ne+ae;for(let xe=0;xe<ae;xe++)g[ne+xe]=z[xe]}else g.push(z)}}class _{constructor(C,L){this.i=C,this.j=L,this.h=0,this.g=null}get(){let C;return 0<this.h?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function w(g){return/^[\s\xa0]*$/.test(g)}function E(){var g=l.navigator;return g&&(g=g.userAgent)?g:""}function N(g){return N[" "](g),g}N[" "]=function(){};var M=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function O(g,C,L){for(const z in g)C.call(L,g[z],z,g)}function A(g,C){for(const L in g)C.call(void 0,g[L],L,g)}function D(g){const C={};for(const L in g)C[L]=g[L];return C}const T="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(g,C){let L,z;for(let ne=1;ne<arguments.length;ne++){z=arguments[ne];for(L in z)g[L]=z[L];for(let ae=0;ae<T.length;ae++)L=T[ae],Object.prototype.hasOwnProperty.call(z,L)&&(g[L]=z[L])}}function x(g){var C=1;g=g.split(":");const L=[];for(;0<C&&g.length;)L.push(g.shift()),C--;return g.length&&L.push(g.join(":")),L}function R(g){l.setTimeout(()=>{throw g},0)}function P(){var g=F;let C=null;return g.g&&(C=g.g,g.g=g.g.next,g.g||(g.h=null),C.next=null),C}class j{constructor(){this.h=this.g=null}add(C,L){const z=$.get();z.set(C,L),this.h?this.h.next=z:this.g=z,this.h=z}}var $=new _(()=>new U,g=>g.reset());class U{constructor(){this.next=this.g=this.h=null}set(C,L){this.h=C,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let Y,q=!1,F=new j,W=()=>{const g=l.Promise.resolve(void 0);Y=()=>{g.then(Q)}};var Q=()=>{for(var g;g=P();){try{g.h.call(g.g)}catch(L){R(L)}var C=$;C.j(g),100>C.h&&(C.h++,g.next=C.g,C.g=g)}q=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function X(g,C){this.type=g,this.g=this.target=C,this.defaultPrevented=!1}X.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var g=!1,C=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const L=()=>{};l.addEventListener("test",L,C),l.removeEventListener("test",L,C)}catch{}return g}();function ee(g,C){if(X.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g){var L=this.type=g.type,z=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;if(this.target=g.target||g.srcElement,this.g=C,C=g.relatedTarget){if(M){e:{try{N(C.nodeName);var ne=!0;break e}catch{}ne=!1}ne||(C=null)}}else L=="mouseover"?C=g.fromElement:L=="mouseout"&&(C=g.toElement);this.relatedTarget=C,z?(this.clientX=z.clientX!==void 0?z.clientX:z.pageX,this.clientY=z.clientY!==void 0?z.clientY:z.pageY,this.screenX=z.screenX||0,this.screenY=z.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=typeof g.pointerType=="string"?g.pointerType:se[g.pointerType]||"",this.state=g.state,this.i=g,g.defaultPrevented&&ee.aa.h.call(this)}}v(ee,X);var se={2:"touch",3:"pen",4:"mouse"};ee.prototype.h=function(){ee.aa.h.call(this);var g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),Se=0;function Ee(g,C,L,z,ne){this.listener=g,this.proxy=null,this.src=C,this.type=L,this.capture=!!z,this.ha=ne,this.key=++Se,this.da=this.fa=!1}function ie(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function ue(g){this.src=g,this.g={},this.h=0}ue.prototype.add=function(g,C,L,z,ne){var ae=g.toString();g=this.g[ae],g||(g=this.g[ae]=[],this.h++);var xe=ke(g,C,z,ne);return-1<xe?(C=g[xe],L||(C.fa=!1)):(C=new Ee(C,this.src,ae,!!z,ne),C.fa=L,g.push(C)),C};function ge(g,C){var L=C.type;if(L in g.g){var z=g.g[L],ne=Array.prototype.indexOf.call(z,C,void 0),ae;(ae=0<=ne)&&Array.prototype.splice.call(z,ne,1),ae&&(ie(C),g.g[L].length==0&&(delete g.g[L],g.h--))}}function ke(g,C,L,z){for(var ne=0;ne<g.length;++ne){var ae=g[ne];if(!ae.da&&ae.listener==C&&ae.capture==!!L&&ae.ha==z)return ne}return-1}var Re="closure_lm_"+(1e6*Math.random()|0),_e={};function V(g,C,L,z,ne){if(Array.isArray(C)){for(var ae=0;ae<C.length;ae++)V(g,C[ae],L,z,ne);return null}return L=Be(L),g&&g[ce]?g.K(C,L,c(z)?!!z.capture:!1,ne):B(g,C,L,!1,z,ne)}function B(g,C,L,z,ne,ae){if(!C)throw Error("Invalid event type");var xe=c(ne)?!!ne.capture:!!ne,Tt=ye(g);if(Tt||(g[Re]=Tt=new ue(g)),L=Tt.add(C,L,z,xe,ae),L.proxy)return L;if(z=G(),L.proxy=z,z.src=g,z.listener=L,g.addEventListener)J||(ne=xe),ne===void 0&&(ne=!1),g.addEventListener(C.toString(),z,ne);else if(g.attachEvent)g.attachEvent(le(C.toString()),z);else if(g.addListener&&g.removeListener)g.addListener(z);else throw Error("addEventListener and attachEvent are unavailable.");return L}function G(){function g(L){return C.call(g.src,g.listener,L)}const C=he;return g}function K(g,C,L,z,ne){if(Array.isArray(C))for(var ae=0;ae<C.length;ae++)K(g,C[ae],L,z,ne);else z=c(z)?!!z.capture:!!z,L=Be(L),g&&g[ce]?(g=g.i,C=String(C).toString(),C in g.g&&(ae=g.g[C],L=ke(ae,L,z,ne),-1<L&&(ie(ae[L]),Array.prototype.splice.call(ae,L,1),ae.length==0&&(delete g.g[C],g.h--)))):g&&(g=ye(g))&&(C=g.g[C.toString()],g=-1,C&&(g=ke(C,L,z,ne)),(L=-1<g?C[g]:null)&&re(L))}function re(g){if(typeof g!="number"&&g&&!g.da){var C=g.src;if(C&&C[ce])ge(C.i,g);else{var L=g.type,z=g.proxy;C.removeEventListener?C.removeEventListener(L,z,g.capture):C.detachEvent?C.detachEvent(le(L),z):C.addListener&&C.removeListener&&C.removeListener(z),(L=ye(C))?(ge(L,g),L.h==0&&(L.src=null,C[Re]=null)):ie(g)}}}function le(g){return g in _e?_e[g]:_e[g]="on"+g}function he(g,C){if(g.da)g=!0;else{C=new ee(C,this);var L=g.listener,z=g.ha||g.src;g.fa&&re(g),g=L.call(z,C)}return g}function ye(g){return g=g[Re],g instanceof ue?g:null}var Ie="__closure_events_fn_"+(1e9*Math.random()>>>0);function Be(g){return typeof g=="function"?g:(g[Ie]||(g[Ie]=function(C){return g.handleEvent(C)}),g[Ie])}function Oe(){H.call(this),this.i=new ue(this),this.M=this,this.F=null}v(Oe,H),Oe.prototype[ce]=!0,Oe.prototype.removeEventListener=function(g,C,L,z){K(this,g,C,L,z)};function ze(g,C){var L,z=g.F;if(z)for(L=[];z;z=z.F)L.push(z);if(g=g.M,z=C.type||C,typeof C=="string")C=new X(C,g);else if(C instanceof X)C.target=C.target||g;else{var ne=C;C=new X(z,g),I(C,ne)}if(ne=!0,L)for(var ae=L.length-1;0<=ae;ae--){var xe=C.g=L[ae];ne=lt(xe,z,!0,C)&&ne}if(xe=C.g=g,ne=lt(xe,z,!0,C)&&ne,ne=lt(xe,z,!1,C)&&ne,L)for(ae=0;ae<L.length;ae++)xe=C.g=L[ae],ne=lt(xe,z,!1,C)&&ne}Oe.prototype.N=function(){if(Oe.aa.N.call(this),this.i){var g=this.i,C;for(C in g.g){for(var L=g.g[C],z=0;z<L.length;z++)ie(L[z]);delete g.g[C],g.h--}}this.F=null},Oe.prototype.K=function(g,C,L,z){return this.i.add(String(g),C,!1,L,z)},Oe.prototype.L=function(g,C,L,z){return this.i.add(String(g),C,!0,L,z)};function lt(g,C,L,z){if(C=g.i.g[String(C)],!C)return!0;C=C.concat();for(var ne=!0,ae=0;ae<C.length;++ae){var xe=C[ae];if(xe&&!xe.da&&xe.capture==L){var Tt=xe.listener,Nn=xe.ha||xe.src;xe.fa&&ge(g.i,xe),ne=Tt.call(Nn,z)!==!1&&ne}}return ne&&!z.defaultPrevented}function vt(g,C,L){if(typeof g=="function")L&&(g=f(g,L));else if(g&&typeof g.handleEvent=="function")g=f(g.handleEvent,g);else throw Error("Invalid listener argument");return 2147483647<Number(C)?-1:l.setTimeout(g,C||0)}function At(g){g.g=vt(()=>{g.g=null,g.i&&(g.i=!1,At(g))},g.l);const C=g.h;g.h=null,g.m.apply(null,C)}class Ke extends H{constructor(C,L){super(),this.m=C,this.l=L,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:At(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ne(g){H.call(this),this.h=g,this.g={}}v(Ne,H);var oe=[];function pe(g){O(g.g,function(C,L){this.g.hasOwnProperty(L)&&re(C)},g),g.g={}}Ne.prototype.N=function(){Ne.aa.N.call(this),pe(this)},Ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var be=l.JSON.stringify,Le=l.JSON.parse,Ce=class{stringify(g){return l.JSON.stringify(g,void 0)}parse(g){return l.JSON.parse(g,void 0)}};function We(){}We.prototype.h=null;function yt(g){return g.h||(g.h=g.i())}function ft(){}var vn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Xt(){X.call(this,"d")}v(Xt,X);function xt(){X.call(this,"c")}v(xt,X);var jn={},St=null;function yn(){return St=St||new Oe}jn.La="serverreachability";function $r(g){X.call(this,jn.La,g)}v($r,X);function Ti(g){const C=yn();ze(C,new $r(C))}jn.STAT_EVENT="statevent";function $s(g,C){X.call(this,jn.STAT_EVENT,g),this.stat=C}v($s,X);function Zt(g){const C=yn();ze(C,new $s(C,g))}jn.Ma="timingevent";function Za(g,C){X.call(this,jn.Ma,g),this.size=C}v(Za,X);function Ji(g,C){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){g()},C)}function _n(){this.g=!0}_n.prototype.xa=function(){this.g=!1};function Us(g,C,L,z,ne,ae){g.info(function(){if(g.g)if(ae)for(var xe="",Tt=ae.split("&"),Nn=0;Nn<Tt.length;Nn++){var ht=Tt[Nn].split("=");if(1<ht.length){var $n=ht[0];ht=ht[1];var Un=$n.split("_");xe=2<=Un.length&&Un[1]=="type"?xe+($n+"="+ht+"&"):xe+($n+"=redacted&")}}else xe=null;else xe=ae;return"XMLHTTP REQ ("+z+") [attempt "+ne+"]: "+C+`
`+L+`
`+xe})}function nl(g,C,L,z,ne,ae,xe){g.info(function(){return"XMLHTTP RESP ("+z+") [ attempt "+ne+"]: "+C+`
`+L+`
`+ae+" "+xe})}function si(g,C,L,z){g.info(function(){return"XMLHTTP TEXT ("+C+"): "+rl(g,L)+(z?" "+z:"")})}function eo(g,C){g.info(function(){return"TIMEOUT: "+C})}_n.prototype.info=function(){};function rl(g,C){if(!g.g)return C;if(!C)return null;try{var L=JSON.parse(C);if(L){for(g=0;g<L.length;g++)if(Array.isArray(L[g])){var z=L[g];if(!(2>z.length)){var ne=z[1];if(Array.isArray(ne)&&!(1>ne.length)){var ae=ne[0];if(ae!="noop"&&ae!="stop"&&ae!="close")for(var xe=1;xe<ne.length;xe++)ne[xe]=""}}}}return be(L)}catch{return C}}var Vn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Bs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},zs;function Zi(){}v(Zi,We),Zi.prototype.g=function(){return new XMLHttpRequest},Zi.prototype.i=function(){return{}},zs=new Zi;function wr(g,C,L,z){this.j=g,this.i=C,this.l=L,this.R=z||1,this.U=new Ne(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new il}function il(){this.i=null,this.g="",this.h=!1}var je={},Z={};function me(g,C,L){g.L=1,g.v=Qh(ts(C)),g.m=L,g.P=!0,Me(g,null)}function Me(g,C){g.F=Date.now(),jt(g),g.A=ts(g.v);var L=g.A,z=g.R;Array.isArray(z)||(z=[String(z)]),XI(L.i,"t",z),g.C=0,L=g.j.J,g.h=new il,g.g=pC(g.j,L?C:null,!g.m),0<g.O&&(g.M=new Ke(f(g.Y,g,g.g),g.O)),C=g.U,L=g.g,z=g.ca;var ne="readystatechange";Array.isArray(ne)||(ne&&(oe[0]=ne.toString()),ne=oe);for(var ae=0;ae<ne.length;ae++){var xe=V(L,ne[ae],z||C.handleEvent,!1,C.h||C);if(!xe)break;C.g[xe.key]=xe}C=g.H?D(g.H):{},g.m?(g.u||(g.u="POST"),C["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.A,g.u,g.m,C)):(g.u="GET",g.g.ea(g.A,g.u,null,C)),Ti(),Us(g.i,g.u,g.A,g.l,g.R,g.m)}wr.prototype.ca=function(g){g=g.target;const C=this.M;C&&ns(g)==3?C.j():this.Y(g)},wr.prototype.Y=function(g){try{if(g==this.g)e:{const Un=ns(this.g);var C=this.g.Ba();const ul=this.g.Z();if(!(3>Un)&&(Un!=3||this.g&&(this.h.h||this.g.oa()||rC(this.g)))){this.J||Un!=4||C==7||(C==8||0>=ul?Ti(3):Ti(2)),Fn(this);var L=this.g.Z();this.X=L;t:if(mt(this)){var z=rC(this.g);g="";var ne=z.length,ae=ns(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Rt(this),br(this);var xe="";break t}this.h.i=new l.TextDecoder}for(C=0;C<ne;C++)this.h.h=!0,g+=this.h.i.decode(z[C],{stream:!(ae&&C==ne-1)});z.length=0,this.h.g+=g,this.C=0,xe=this.h.g}else xe=this.g.oa();if(this.o=L==200,nl(this.i,this.u,this.A,this.l,this.R,Un,L),this.o){if(this.T&&!this.K){t:{if(this.g){var Tt,Nn=this.g;if((Tt=Nn.g?Nn.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(Tt)){var ht=Tt;break t}}ht=null}if(L=ht)si(this.i,this.l,L,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,es(this,L);else{this.o=!1,this.s=3,Zt(12),Rt(this),br(this);break e}}if(this.P){L=!0;let ai;for(;!this.J&&this.C<xe.length;)if(ai=en(this,xe),ai==Z){Un==4&&(this.s=4,Zt(14),L=!1),si(this.i,this.l,null,"[Incomplete Response]");break}else if(ai==je){this.s=4,Zt(15),si(this.i,this.l,xe,"[Invalid Chunk]"),L=!1;break}else si(this.i,this.l,ai,null),es(this,ai);if(mt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Un!=4||xe.length!=0||this.h.h||(this.s=1,Zt(16),L=!1),this.o=this.o&&L,!L)si(this.i,this.l,xe,"[Invalid Chunked Response]"),Rt(this),br(this);else if(0<xe.length&&!this.W){this.W=!0;var $n=this.j;$n.g==this&&$n.ba&&!$n.M&&($n.j.info("Great, no buffering proxy detected. Bytes received: "+xe.length),Zv($n),$n.M=!0,Zt(11))}}else si(this.i,this.l,xe,null),es(this,xe);Un==4&&Rt(this),this.o&&!this.J&&(Un==4?cC(this.j,this):(this.o=!1,jt(this)))}else MB(this.g),L==400&&0<xe.indexOf("Unknown SID")?(this.s=3,Zt(12)):(this.s=0,Zt(13)),Rt(this),br(this)}}}catch{}finally{}};function mt(g){return g.g?g.u=="GET"&&g.L!=2&&g.j.Ca:!1}function en(g,C){var L=g.C,z=C.indexOf(`
`,L);return z==-1?Z:(L=Number(C.substring(L,z)),isNaN(L)?je:(z+=1,z+L>C.length?Z:(C=C.slice(z,z+L),g.C=z+L,C)))}wr.prototype.cancel=function(){this.J=!0,Rt(this)};function jt(g){g.S=Date.now()+g.I,ln(g,g.I)}function ln(g,C){if(g.B!=null)throw Error("WatchDog timer not null");g.B=Ji(f(g.ba,g),C)}function Fn(g){g.B&&(l.clearTimeout(g.B),g.B=null)}wr.prototype.ba=function(){this.B=null;const g=Date.now();0<=g-this.S?(eo(this.i,this.A),this.L!=2&&(Ti(),Zt(17)),Rt(this),this.s=2,br(this)):ln(this,this.S-g)};function br(g){g.j.G==0||g.J||cC(g.j,g)}function Rt(g){Fn(g);var C=g.M;C&&typeof C.ma=="function"&&C.ma(),g.M=null,pe(g.U),g.g&&(C=g.g,g.g=null,C.abort(),C.ma())}function es(g,C){try{var L=g.j;if(L.G!=0&&(L.g==g||Kv(L.h,g))){if(!g.K&&Kv(L.h,g)&&L.G==3){try{var z=L.Da.g.parse(C)}catch{z=null}if(Array.isArray(z)&&z.length==3){var ne=z;if(ne[0]==0){e:if(!L.u){if(L.g)if(L.g.F+3e3<g.F)rf(L),tf(L);else break e;Jv(L),Zt(18)}}else L.za=ne[1],0<L.za-L.T&&37500>ne[2]&&L.F&&L.v==0&&!L.C&&(L.C=Ji(f(L.Za,L),6e3));if(1>=al(L.h)&&L.ca){try{L.ca()}catch{}L.ca=void 0}}else no(L,11)}else if((g.K||L.g==g)&&rf(L),!w(C))for(ne=L.Da.g.parse(C),C=0;C<ne.length;C++){let ht=ne[C];if(L.T=ht[0],ht=ht[1],L.G==2)if(ht[0]=="c"){L.K=ht[1],L.ia=ht[2];const $n=ht[3];$n!=null&&(L.la=$n,L.j.info("VER="+L.la));const Un=ht[4];Un!=null&&(L.Aa=Un,L.j.info("SVER="+L.Aa));const ul=ht[5];ul!=null&&typeof ul=="number"&&0<ul&&(z=1.5*ul,L.L=z,L.j.info("backChannelRequestTimeoutMs_="+z)),z=L;const ai=g.g;if(ai){const af=ai.g?ai.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(af){var ae=z.h;ae.g||af.indexOf("spdy")==-1&&af.indexOf("quic")==-1&&af.indexOf("h2")==-1||(ae.j=ae.l,ae.g=new Set,ae.h&&(Yv(ae,ae.h),ae.h=null))}if(z.D){const ey=ai.g?ai.g.getResponseHeader("X-HTTP-Session-Id"):null;ey&&(z.ya=ey,Pt(z.I,z.D,ey))}}L.G=3,L.l&&L.l.ua(),L.ba&&(L.R=Date.now()-g.F,L.j.info("Handshake RTT: "+L.R+"ms")),z=L;var xe=g;if(z.qa=fC(z,z.J?z.ia:null,z.W),xe.K){BI(z.h,xe);var Tt=xe,Nn=z.L;Nn&&(Tt.I=Nn),Tt.B&&(Fn(Tt),jt(Tt)),z.g=xe}else lC(z);0<L.i.length&&nf(L)}else ht[0]!="stop"&&ht[0]!="close"||no(L,7);else L.G==3&&(ht[0]=="stop"||ht[0]=="close"?ht[0]=="stop"?no(L,7):Qv(L):ht[0]!="noop"&&L.l&&L.l.ta(ht),L.v=0)}}Ti(4)}catch{}}var sl=class{constructor(g,C){this.g=g,this.map=C}};function Gh(g){this.l=g||10,l.PerformanceNavigationTiming?(g=l.performance.getEntriesByType("navigation"),g=0<g.length&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Kh(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function al(g){return g.h?1:g.g?g.g.size:0}function Kv(g,C){return g.h?g.h==C:g.g?g.g.has(C):!1}function Yv(g,C){g.g?g.g.add(C):g.h=C}function BI(g,C){g.h&&g.h==C?g.h=null:g.g&&g.g.has(C)&&g.g.delete(C)}Gh.prototype.cancel=function(){if(this.i=zI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function zI(g){if(g.h!=null)return g.i.concat(g.h.D);if(g.g!=null&&g.g.size!==0){let C=g.i;for(const L of g.g.values())C=C.concat(L.D);return C}return y(g.i)}function _B(g){if(g.V&&typeof g.V=="function")return g.V();if(typeof Map<"u"&&g instanceof Map||typeof Set<"u"&&g instanceof Set)return Array.from(g.values());if(typeof g=="string")return g.split("");if(u(g)){for(var C=[],L=g.length,z=0;z<L;z++)C.push(g[z]);return C}C=[],L=0;for(z in g)C[L++]=g[z];return C}function wB(g){if(g.na&&typeof g.na=="function")return g.na();if(!g.V||typeof g.V!="function"){if(typeof Map<"u"&&g instanceof Map)return Array.from(g.keys());if(!(typeof Set<"u"&&g instanceof Set)){if(u(g)||typeof g=="string"){var C=[];g=g.length;for(var L=0;L<g;L++)C.push(L);return C}C=[],L=0;for(const z in g)C[L++]=z;return C}}}function qI(g,C){if(g.forEach&&typeof g.forEach=="function")g.forEach(C,void 0);else if(u(g)||typeof g=="string")Array.prototype.forEach.call(g,C,void 0);else for(var L=wB(g),z=_B(g),ne=z.length,ae=0;ae<ne;ae++)C.call(void 0,z[ae],L&&L[ae],g)}var HI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bB(g,C){if(g){g=g.split("&");for(var L=0;L<g.length;L++){var z=g[L].indexOf("="),ne=null;if(0<=z){var ae=g[L].substring(0,z);ne=g[L].substring(z+1)}else ae=g[L];C(ae,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function to(g){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,g instanceof to){this.h=g.h,Yh(this,g.j),this.o=g.o,this.g=g.g,Xh(this,g.s),this.l=g.l;var C=g.i,L=new ec;L.i=C.i,C.g&&(L.g=new Map(C.g),L.h=C.h),WI(this,L),this.m=g.m}else g&&(C=String(g).match(HI))?(this.h=!1,Yh(this,C[1]||"",!0),this.o=Ju(C[2]||""),this.g=Ju(C[3]||"",!0),Xh(this,C[4]),this.l=Ju(C[5]||"",!0),WI(this,C[6]||"",!0),this.m=Ju(C[7]||"")):(this.h=!1,this.i=new ec(null,this.h))}to.prototype.toString=function(){var g=[],C=this.j;C&&g.push(Zu(C,GI,!0),":");var L=this.g;return(L||C=="file")&&(g.push("//"),(C=this.o)&&g.push(Zu(C,GI,!0),"@"),g.push(encodeURIComponent(String(L)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.s,L!=null&&g.push(":",String(L))),(L=this.l)&&(this.g&&L.charAt(0)!="/"&&g.push("/"),g.push(Zu(L,L.charAt(0)=="/"?SB:EB,!0))),(L=this.i.toString())&&g.push("?",L),(L=this.m)&&g.push("#",Zu(L,IB)),g.join("")};function ts(g){return new to(g)}function Yh(g,C,L){g.j=L?Ju(C,!0):C,g.j&&(g.j=g.j.replace(/:$/,""))}function Xh(g,C){if(C){if(C=Number(C),isNaN(C)||0>C)throw Error("Bad port number "+C);g.s=C}else g.s=null}function WI(g,C,L){C instanceof ec?(g.i=C,CB(g.i,g.h)):(L||(C=Zu(C,TB)),g.i=new ec(C,g.h))}function Pt(g,C,L){g.i.set(C,L)}function Qh(g){return Pt(g,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),g}function Ju(g,C){return g?C?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function Zu(g,C,L){return typeof g=="string"?(g=encodeURI(g).replace(C,xB),L&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function xB(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var GI=/[#\/\?@]/g,EB=/[#\?:]/g,SB=/[#\?]/g,TB=/[#\?@]/g,IB=/#/g;function ec(g,C){this.h=this.g=null,this.i=g||null,this.j=!!C}function qs(g){g.g||(g.g=new Map,g.h=0,g.i&&bB(g.i,function(C,L){g.add(decodeURIComponent(C.replace(/\+/g," ")),L)}))}t=ec.prototype,t.add=function(g,C){qs(this),this.i=null,g=ol(this,g);var L=this.g.get(g);return L||this.g.set(g,L=[]),L.push(C),this.h+=1,this};function KI(g,C){qs(g),C=ol(g,C),g.g.has(C)&&(g.i=null,g.h-=g.g.get(C).length,g.g.delete(C))}function YI(g,C){return qs(g),C=ol(g,C),g.g.has(C)}t.forEach=function(g,C){qs(this),this.g.forEach(function(L,z){L.forEach(function(ne){g.call(C,ne,z,this)},this)},this)},t.na=function(){qs(this);const g=Array.from(this.g.values()),C=Array.from(this.g.keys()),L=[];for(let z=0;z<C.length;z++){const ne=g[z];for(let ae=0;ae<ne.length;ae++)L.push(C[z])}return L},t.V=function(g){qs(this);let C=[];if(typeof g=="string")YI(this,g)&&(C=C.concat(this.g.get(ol(this,g))));else{g=Array.from(this.g.values());for(let L=0;L<g.length;L++)C=C.concat(g[L])}return C},t.set=function(g,C){return qs(this),this.i=null,g=ol(this,g),YI(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[C]),this.h+=1,this},t.get=function(g,C){return g?(g=this.V(g),0<g.length?String(g[0]):C):C};function XI(g,C,L){KI(g,C),0<L.length&&(g.i=null,g.g.set(ol(g,C),y(L)),g.h+=L.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],C=Array.from(this.g.keys());for(var L=0;L<C.length;L++){var z=C[L];const ae=encodeURIComponent(String(z)),xe=this.V(z);for(z=0;z<xe.length;z++){var ne=ae;xe[z]!==""&&(ne+="="+encodeURIComponent(String(xe[z]))),g.push(ne)}}return this.i=g.join("&")};function ol(g,C){return C=String(C),g.j&&(C=C.toLowerCase()),C}function CB(g,C){C&&!g.j&&(qs(g),g.i=null,g.g.forEach(function(L,z){var ne=z.toLowerCase();z!=ne&&(KI(this,z),XI(this,ne,L))},g)),g.j=C}function kB(g,C){const L=new _n;if(l.Image){const z=new Image;z.onload=m(Hs,L,"TestLoadImage: loaded",!0,C,z),z.onerror=m(Hs,L,"TestLoadImage: error",!1,C,z),z.onabort=m(Hs,L,"TestLoadImage: abort",!1,C,z),z.ontimeout=m(Hs,L,"TestLoadImage: timeout",!1,C,z),l.setTimeout(function(){z.ontimeout&&z.ontimeout()},1e4),z.src=g}else C(!1)}function NB(g,C){const L=new _n,z=new AbortController,ne=setTimeout(()=>{z.abort(),Hs(L,"TestPingServer: timeout",!1,C)},1e4);fetch(g,{signal:z.signal}).then(ae=>{clearTimeout(ne),ae.ok?Hs(L,"TestPingServer: ok",!0,C):Hs(L,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(ne),Hs(L,"TestPingServer: error",!1,C)})}function Hs(g,C,L,z,ne){try{ne&&(ne.onload=null,ne.onerror=null,ne.onabort=null,ne.ontimeout=null),z(L)}catch{}}function AB(){this.g=new Ce}function RB(g,C,L){const z=L||"";try{qI(g,function(ne,ae){let xe=ne;c(ne)&&(xe=be(ne)),C.push(z+ae+"="+encodeURIComponent(xe))})}catch(ne){throw C.push(z+"type="+encodeURIComponent("_badmap")),ne}}function Jh(g){this.l=g.Ub||null,this.j=g.eb||!1}v(Jh,We),Jh.prototype.g=function(){return new Zh(this.l,this.j)},Jh.prototype.i=function(g){return function(){return g}}({});function Zh(g,C){Oe.call(this),this.D=g,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}v(Zh,Oe),t=Zh.prototype,t.open=function(g,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=g,this.A=C,this.readyState=1,nc(this)},t.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const C={headers:this.u,method:this.B,credentials:this.m,cache:void 0};g&&(C.body=g),(this.D||l).fetch(new Request(this.A,C)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,tc(this)),this.readyState=0},t.Sa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,nc(this)),this.g&&(this.readyState=3,nc(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;QI(this)}else g.text().then(this.Ra.bind(this),this.ga.bind(this))};function QI(g){g.j.read().then(g.Pa.bind(g)).catch(g.ga.bind(g))}t.Pa=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var C=g.value?g.value:new Uint8Array(0);(C=this.v.decode(C,{stream:!g.done}))&&(this.response=this.responseText+=C)}g.done?tc(this):nc(this),this.readyState==3&&QI(this)}},t.Ra=function(g){this.g&&(this.response=this.responseText=g,tc(this))},t.Qa=function(g){this.g&&(this.response=g,tc(this))},t.ga=function(){this.g&&tc(this)};function tc(g){g.readyState=4,g.l=null,g.j=null,g.v=null,nc(g)}t.setRequestHeader=function(g,C){this.u.append(g,C)},t.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],C=this.h.entries();for(var L=C.next();!L.done;)L=L.value,g.push(L[0]+": "+L[1]),L=C.next();return g.join(`\r
`)};function nc(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(Zh.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function JI(g){let C="";return O(g,function(L,z){C+=z,C+=":",C+=L,C+=`\r
`}),C}function Xv(g,C,L){e:{for(z in L){var z=!1;break e}z=!0}z||(L=JI(L),typeof g=="string"?L!=null&&encodeURIComponent(String(L)):Pt(g,C,L))}function Gt(g){Oe.call(this),this.headers=new Map,this.o=g||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}v(Gt,Oe);var PB=/^https?$/i,DB=["POST","PUT"];t=Gt.prototype,t.Ha=function(g){this.J=g},t.ea=function(g,C,L,z){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);C=C?C.toUpperCase():"GET",this.D=g,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():zs.g(),this.v=this.o?yt(this.o):yt(zs),this.g.onreadystatechange=f(this.Ea,this);try{this.B=!0,this.g.open(C,String(g),!0),this.B=!1}catch(ae){ZI(this,ae);return}if(g=L||"",L=new Map(this.headers),z)if(Object.getPrototypeOf(z)===Object.prototype)for(var ne in z)L.set(ne,z[ne]);else if(typeof z.keys=="function"&&typeof z.get=="function")for(const ae of z.keys())L.set(ae,z.get(ae));else throw Error("Unknown input type for opt_headers: "+String(z));z=Array.from(L.keys()).find(ae=>ae.toLowerCase()=="content-type"),ne=l.FormData&&g instanceof l.FormData,!(0<=Array.prototype.indexOf.call(DB,C,void 0))||z||ne||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ae,xe]of L)this.g.setRequestHeader(ae,xe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nC(this),this.u=!0,this.g.send(g),this.u=!1}catch(ae){ZI(this,ae)}};function ZI(g,C){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=C,g.m=5,eC(g),ef(g)}function eC(g){g.A||(g.A=!0,ze(g,"complete"),ze(g,"error"))}t.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=g||7,ze(this,"complete"),ze(this,"abort"),ef(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ef(this,!0)),Gt.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?tC(this):this.bb())},t.bb=function(){tC(this)};function tC(g){if(g.h&&typeof o<"u"&&(!g.v[1]||ns(g)!=4||g.Z()!=2)){if(g.u&&ns(g)==4)vt(g.Ea,0,g);else if(ze(g,"readystatechange"),ns(g)==4){g.h=!1;try{const xe=g.Z();e:switch(xe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var L;if(!(L=C)){var z;if(z=xe===0){var ne=String(g.D).match(HI)[1]||null;!ne&&l.self&&l.self.location&&(ne=l.self.location.protocol.slice(0,-1)),z=!PB.test(ne?ne.toLowerCase():"")}L=z}if(L)ze(g,"complete"),ze(g,"success");else{g.m=6;try{var ae=2<ns(g)?g.g.statusText:""}catch{ae=""}g.l=ae+" ["+g.Z()+"]",eC(g)}}finally{ef(g)}}}}function ef(g,C){if(g.g){nC(g);const L=g.g,z=g.v[0]?()=>{}:null;g.g=null,g.v=null,C||ze(g,"ready");try{L.onreadystatechange=z}catch{}}}function nC(g){g.I&&(l.clearTimeout(g.I),g.I=null)}t.isActive=function(){return!!this.g};function ns(g){return g.g?g.g.readyState:0}t.Z=function(){try{return 2<ns(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(g){if(this.g){var C=this.g.responseText;return g&&C.indexOf(g)==0&&(C=C.substring(g.length)),Le(C)}};function rC(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.H){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function MB(g){const C={};g=(g.g&&2<=ns(g)&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let z=0;z<g.length;z++){if(w(g[z]))continue;var L=x(g[z]);const ne=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const ae=C[ne]||[];C[ne]=ae,ae.push(L)}A(C,function(z){return z.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function rc(g,C,L){return L&&L.internalChannelParams&&L.internalChannelParams[g]||C}function iC(g){this.Aa=0,this.i=[],this.j=new _n,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=rc("failFast",!1,g),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=rc("baseRetryDelayMs",5e3,g),this.cb=rc("retryDelaySeedMs",1e4,g),this.Wa=rc("forwardChannelMaxRetries",2,g),this.wa=rc("forwardChannelRequestTimeoutMs",2e4,g),this.pa=g&&g.xmlHttpFactory||void 0,this.Xa=g&&g.Tb||void 0,this.Ca=g&&g.useFetchStreams||!1,this.L=void 0,this.J=g&&g.supportsCrossDomainXhr||!1,this.K="",this.h=new Gh(g&&g.concurrentRequestLimit),this.Da=new AB,this.P=g&&g.fastHandshake||!1,this.O=g&&g.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=g&&g.Rb||!1,g&&g.xa&&this.j.xa(),g&&g.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&g&&g.detectBufferingProxy||!1,this.ja=void 0,g&&g.longPollingTimeout&&0<g.longPollingTimeout&&(this.ja=g.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=iC.prototype,t.la=8,t.G=1,t.connect=function(g,C,L,z){Zt(0),this.W=g,this.H=C||{},L&&z!==void 0&&(this.H.OSID=L,this.H.OAID=z),this.F=this.X,this.I=fC(this,null,this.W),nf(this)};function Qv(g){if(sC(g),g.G==3){var C=g.U++,L=ts(g.I);if(Pt(L,"SID",g.K),Pt(L,"RID",C),Pt(L,"TYPE","terminate"),ic(g,L),C=new wr(g,g.j,C),C.L=2,C.v=Qh(ts(L)),L=!1,l.navigator&&l.navigator.sendBeacon)try{L=l.navigator.sendBeacon(C.v.toString(),"")}catch{}!L&&l.Image&&(new Image().src=C.v,L=!0),L||(C.g=pC(C.j,null),C.g.ea(C.v)),C.F=Date.now(),jt(C)}hC(g)}function tf(g){g.g&&(Zv(g),g.g.cancel(),g.g=null)}function sC(g){tf(g),g.u&&(l.clearTimeout(g.u),g.u=null),rf(g),g.h.cancel(),g.s&&(typeof g.s=="number"&&l.clearTimeout(g.s),g.s=null)}function nf(g){if(!Kh(g.h)&&!g.s){g.s=!0;var C=g.Ga;Y||W(),q||(Y(),q=!0),F.add(C,g),g.B=0}}function LB(g,C){return al(g.h)>=g.h.j-(g.s?1:0)?!1:g.s?(g.i=C.D.concat(g.i),!0):g.G==1||g.G==2||g.B>=(g.Va?0:g.Wa)?!1:(g.s=Ji(f(g.Ga,g,C),dC(g,g.B)),g.B++,!0)}t.Ga=function(g){if(this.s)if(this.s=null,this.G==1){if(!g){this.U=Math.floor(1e5*Math.random()),g=this.U++;const ne=new wr(this,this.j,g);let ae=this.o;if(this.S&&(ae?(ae=D(ae),I(ae,this.S)):ae=this.S),this.m!==null||this.O||(ne.H=ae,ae=null),this.P)e:{for(var C=0,L=0;L<this.i.length;L++){t:{var z=this.i[L];if("__data__"in z.map&&(z=z.map.__data__,typeof z=="string")){z=z.length;break t}z=void 0}if(z===void 0)break;if(C+=z,4096<C){C=L;break e}if(C===4096||L===this.i.length-1){C=L+1;break e}}C=1e3}else C=1e3;C=oC(this,ne,C),L=ts(this.I),Pt(L,"RID",g),Pt(L,"CVER",22),this.D&&Pt(L,"X-HTTP-Session-Id",this.D),ic(this,L),ae&&(this.O?C="headers="+encodeURIComponent(String(JI(ae)))+"&"+C:this.m&&Xv(L,this.m,ae)),Yv(this.h,ne),this.Ua&&Pt(L,"TYPE","init"),this.P?(Pt(L,"$req",C),Pt(L,"SID","null"),ne.T=!0,me(ne,L,null)):me(ne,L,C),this.G=2}}else this.G==3&&(g?aC(this,g):this.i.length==0||Kh(this.h)||aC(this))};function aC(g,C){var L;C?L=C.l:L=g.U++;const z=ts(g.I);Pt(z,"SID",g.K),Pt(z,"RID",L),Pt(z,"AID",g.T),ic(g,z),g.m&&g.o&&Xv(z,g.m,g.o),L=new wr(g,g.j,L,g.B+1),g.m===null&&(L.H=g.o),C&&(g.i=C.D.concat(g.i)),C=oC(g,L,1e3),L.I=Math.round(.5*g.wa)+Math.round(.5*g.wa*Math.random()),Yv(g.h,L),me(L,z,C)}function ic(g,C){g.H&&O(g.H,function(L,z){Pt(C,z,L)}),g.l&&qI({},function(L,z){Pt(C,z,L)})}function oC(g,C,L){L=Math.min(g.i.length,L);var z=g.l?f(g.l.Na,g.l,g):null;e:{var ne=g.i;let ae=-1;for(;;){const xe=["count="+L];ae==-1?0<L?(ae=ne[0].g,xe.push("ofs="+ae)):ae=0:xe.push("ofs="+ae);let Tt=!0;for(let Nn=0;Nn<L;Nn++){let ht=ne[Nn].g;const $n=ne[Nn].map;if(ht-=ae,0>ht)ae=Math.max(0,ne[Nn].g-100),Tt=!1;else try{RB($n,xe,"req"+ht+"_")}catch{z&&z($n)}}if(Tt){z=xe.join("&");break e}}}return g=g.i.splice(0,L),C.D=g,z}function lC(g){if(!g.g&&!g.u){g.Y=1;var C=g.Fa;Y||W(),q||(Y(),q=!0),F.add(C,g),g.v=0}}function Jv(g){return g.g||g.u||3<=g.v?!1:(g.Y++,g.u=Ji(f(g.Fa,g),dC(g,g.v)),g.v++,!0)}t.Fa=function(){if(this.u=null,uC(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var g=2*this.R;this.j.info("BP detection timer enabled: "+g),this.A=Ji(f(this.ab,this),g)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Zt(10),tf(this),uC(this))};function Zv(g){g.A!=null&&(l.clearTimeout(g.A),g.A=null)}function uC(g){g.g=new wr(g,g.j,"rpc",g.Y),g.m===null&&(g.g.H=g.o),g.g.O=0;var C=ts(g.qa);Pt(C,"RID","rpc"),Pt(C,"SID",g.K),Pt(C,"AID",g.T),Pt(C,"CI",g.F?"0":"1"),!g.F&&g.ja&&Pt(C,"TO",g.ja),Pt(C,"TYPE","xmlhttp"),ic(g,C),g.m&&g.o&&Xv(C,g.m,g.o),g.L&&(g.g.I=g.L);var L=g.g;g=g.ia,L.L=1,L.v=Qh(ts(C)),L.m=null,L.P=!0,Me(L,g)}t.Za=function(){this.C!=null&&(this.C=null,tf(this),Jv(this),Zt(19))};function rf(g){g.C!=null&&(l.clearTimeout(g.C),g.C=null)}function cC(g,C){var L=null;if(g.g==C){rf(g),Zv(g),g.g=null;var z=2}else if(Kv(g.h,C))L=C.D,BI(g.h,C),z=1;else return;if(g.G!=0){if(C.o)if(z==1){L=C.m?C.m.length:0,C=Date.now()-C.F;var ne=g.B;z=yn(),ze(z,new Za(z,L)),nf(g)}else lC(g);else if(ne=C.s,ne==3||ne==0&&0<C.X||!(z==1&&LB(g,C)||z==2&&Jv(g)))switch(L&&0<L.length&&(C=g.h,C.i=C.i.concat(L)),ne){case 1:no(g,5);break;case 4:no(g,10);break;case 3:no(g,6);break;default:no(g,2)}}}function dC(g,C){let L=g.Ta+Math.floor(Math.random()*g.cb);return g.isActive()||(L*=2),L*C}function no(g,C){if(g.j.info("Error code "+C),C==2){var L=f(g.fb,g),z=g.Xa;const ne=!z;z=new to(z||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Yh(z,"https"),Qh(z),ne?kB(z.toString(),L):NB(z.toString(),L)}else Zt(2);g.G=0,g.l&&g.l.sa(C),hC(g),sC(g)}t.fb=function(g){g?(this.j.info("Successfully pinged google.com"),Zt(2)):(this.j.info("Failed to ping google.com"),Zt(1))};function hC(g){if(g.G=0,g.ka=[],g.l){const C=zI(g.h);(C.length!=0||g.i.length!=0)&&(b(g.ka,C),b(g.ka,g.i),g.h.i.length=0,y(g.i),g.i.length=0),g.l.ra()}}function fC(g,C,L){var z=L instanceof to?ts(L):new to(L);if(z.g!="")C&&(z.g=C+"."+z.g),Xh(z,z.s);else{var ne=l.location;z=ne.protocol,C=C?C+"."+ne.hostname:ne.hostname,ne=+ne.port;var ae=new to(null);z&&Yh(ae,z),C&&(ae.g=C),ne&&Xh(ae,ne),L&&(ae.l=L),z=ae}return L=g.D,C=g.ya,L&&C&&Pt(z,L,C),Pt(z,"VER",g.la),ic(g,z),z}function pC(g,C,L){if(C&&!g.J)throw Error("Can't create secondary domain capable XhrIo object.");return C=g.Ca&&!g.pa?new Gt(new Jh({eb:L})):new Gt(g.pa),C.Ha(g.J),C}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function mC(){}t=mC.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function sf(){}sf.prototype.g=function(g,C){return new xr(g,C)};function xr(g,C){Oe.call(this),this.g=new iC(C),this.l=g,this.h=C&&C.messageUrlParams||null,g=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(g?g["X-WebChannel-Content-Type"]=C.messageContentType:g={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.va&&(g?g["X-WebChannel-Client-Profile"]=C.va:g={"X-WebChannel-Client-Profile":C.va}),this.g.S=g,(g=C&&C.Sb)&&!w(g)&&(this.g.m=g),this.v=C&&C.supportsCrossDomainXhr||!1,this.u=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!w(C)&&(this.g.D=C,g=this.h,g!==null&&C in g&&(g=this.h,C in g&&delete g[C])),this.j=new ll(this)}v(xr,Oe),xr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xr.prototype.close=function(){Qv(this.g)},xr.prototype.o=function(g){var C=this.g;if(typeof g=="string"){var L={};L.__data__=g,g=L}else this.u&&(L={},L.__data__=be(g),g=L);C.i.push(new sl(C.Ya++,g)),C.G==3&&nf(C)},xr.prototype.N=function(){this.g.l=null,delete this.j,Qv(this.g),delete this.g,xr.aa.N.call(this)};function gC(g){Xt.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var C=g.__sm__;if(C){e:{for(const L in C){g=L;break e}g=void 0}(this.i=g)&&(g=this.i,C=C!==null&&g in C?C[g]:void 0),this.data=C}else this.data=g}v(gC,Xt);function vC(){xt.call(this),this.status=1}v(vC,xt);function ll(g){this.g=g}v(ll,mC),ll.prototype.ua=function(){ze(this.g,"a")},ll.prototype.ta=function(g){ze(this.g,new gC(g))},ll.prototype.sa=function(g){ze(this.g,new vC)},ll.prototype.ra=function(){ze(this.g,"b")},sf.prototype.createWebChannel=sf.prototype.g,xr.prototype.send=xr.prototype.o,xr.prototype.open=xr.prototype.m,xr.prototype.close=xr.prototype.close,c5=function(){return new sf},u5=function(){return yn()},l5=jn,yE={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Vn.NO_ERROR=0,Vn.TIMEOUT=8,Vn.HTTP_ERROR=6,gp=Vn,Bs.COMPLETE="complete",o5=Bs,ft.EventType=vn,vn.OPEN="a",vn.CLOSE="b",vn.ERROR="c",vn.MESSAGE="d",Oe.prototype.listen=Oe.prototype.K,Lc=ft,Gt.prototype.listenOnce=Gt.prototype.L,Gt.prototype.getLastError=Gt.prototype.Ka,Gt.prototype.getLastErrorCode=Gt.prototype.Ba,Gt.prototype.getStatus=Gt.prototype.Z,Gt.prototype.getResponseJson=Gt.prototype.Oa,Gt.prototype.getResponseText=Gt.prototype.oa,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Ha,a5=Gt}).apply(typeof Cf<"u"?Cf:typeof self<"u"?self:typeof window<"u"?window:{});const hN="@firebase/firestore",fN="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Hn.UNAUTHENTICATED=new Hn(null),Hn.GOOGLE_CREDENTIALS=new Hn("google-credentials-uid"),Hn.FIRST_PARTY=new Hn("first-party-uid"),Hn.MOCK_USER=new Hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ju="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Do=new kS("@firebase/firestore");function wl(){return Do.logLevel}function Ae(t,...e){if(Do.logLevel<=rt.DEBUG){const r=e.map($S);Do.debug(`Firestore (${ju}): ${t}`,...r)}}function Cs(t,...e){if(Do.logLevel<=rt.ERROR){const r=e.map($S);Do.error(`Firestore (${ju}): ${t}`,...r)}}function Mo(t,...e){if(Do.logLevel<=rt.WARN){const r=e.map($S);Do.warn(`Firestore (${ju}): ${t}`,...r)}}function $S(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function He(t="Unexpected state"){const e=`FIRESTORE (${ju}) INTERNAL ASSERTION FAILED: `+t;throw Cs(e),new Error(e)}function gt(t,e){t||He()}function Xe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ve extends Yi{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d5{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class h5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Hn.UNAUTHENTICATED))}shutdown(){}}class LY{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class OY{constructor(e){this.t=e,this.currentUser=Hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){gt(this.o===void 0);let i=this.i;const s=u=>this.i!==i?(i=this.i,r(u)):Promise.resolve();let a=new ys;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ys,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Ae("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Ae("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ys)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(i=>this.i!==e?(Ae("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(gt(typeof i.accessToken=="string"),new d5(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return gt(e===null||typeof e=="string"),new Hn(e)}}class jY{constructor(e,r,i){this.l=e,this.h=r,this.P=i,this.type="FirstParty",this.user=Hn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class VY{constructor(e,r,i){this.l=e,this.h=r,this.P=i}getToken(){return Promise.resolve(new jY(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(Hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class FY{constructor(e,r){this.A=r,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Hr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,r){gt(this.o===void 0);const i=a=>{a.error!=null&&Ae("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,Ae("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const s=a=>{Ae("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):Ae("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new pN(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(gt(typeof r.token=="string"),this.R=r.token,new pN(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Y(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let i=0;i<t;i++)r[i]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class US{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=$Y(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<r&&(i+=e.charAt(s[a]%62))}return i}}function st(t,e){return t<e?-1:t>e?1:0}function uu(t,e,r){return t.length===e.length&&t.every((i,s)=>r(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mN=-62135596800,gN=1e6;class sn{static now(){return sn.fromMillis(Date.now())}static fromDate(e){return sn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),i=Math.floor((e-1e3*r)*gN);return new sn(r,i)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Ve(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ve(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<mN)throw new Ve(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ve(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/gN}_compareTo(e){return this.seconds===e.seconds?st(this.nanoseconds,e.nanoseconds):st(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-mN;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{static fromTimestamp(e){return new Ge(e)}static min(){return new Ge(new sn(0,0))}static max(){return new Ge(new sn(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN="__name__";class Ai{constructor(e,r,i){r===void 0?r=0:r>e.length&&He(),i===void 0?i=e.length-r:i>e.length-r&&He(),this.segments=e,this.offset=r,this.len=i}get length(){return this.len}isEqual(e){return Ai.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Ai?e.forEach(i=>{r.push(i)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,i=this.limit();r<i;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const i=Math.min(e.length,r.length);for(let s=0;s<i;s++){const a=Ai.compareSegments(e.get(s),r.get(s));if(a!==0)return a}return Math.sign(e.length-r.length)}static compareSegments(e,r){const i=Ai.isNumericId(e),s=Ai.isNumericId(r);return i&&!s?-1:!i&&s?1:i&&s?Ai.extractNumericId(e).compare(Ai.extractNumericId(r)):e<r?-1:e>r?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ta.fromString(e.substring(4,e.length-2))}}class Ft extends Ai{construct(e,r,i){return new Ft(e,r,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ve(fe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);r.push(...i.split("/").filter(s=>s.length>0))}return new Ft(r)}static emptyPath(){return new Ft([])}}const UY=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class xn extends Ai{construct(e,r,i){return new xn(e,r,i)}static isValidIdentifier(e){return UY.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),xn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===vN}static keyField(){return new xn([vN])}static fromServerFormat(e){const r=[];let i="",s=0;const a=()=>{if(i.length===0)throw new Ve(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(i),i=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Ve(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Ve(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(i+=l,s++):(a(),s++)}if(a(),o)throw new Ve(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new xn(r)}static emptyPath(){return new xn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e){this.path=e}static fromPath(e){return new $e(Ft.fromString(e))}static fromName(e){return new $e(Ft.fromString(e).popFirst(5))}static empty(){return new $e(Ft.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ft.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Ft.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new $e(new Ft(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ld=-1;function BY(t,e){const r=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Ge.fromTimestamp(i===1e9?new sn(r+1,0):new sn(r,i));return new La(s,$e.empty(),e)}function zY(t){return new La(t.readTime,t.key,Ld)}class La{constructor(e,r,i){this.readTime=e,this.documentKey=r,this.largestBatchId=i}static min(){return new La(Ge.min(),$e.empty(),Ld)}static max(){return new La(Ge.max(),$e.empty(),Ld)}}function qY(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=$e.comparator(t.documentKey,e.documentKey),r!==0?r:st(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HY="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class WY{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vu(t){if(t.code!==fe.FAILED_PRECONDITION||t.message!==HY)throw t;Ae("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&He(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new de((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(r,a).next(i,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof de?r:de.resolve(r)}catch(r){return de.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):de.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):de.reject(r)}static resolve(e){return new de((r,i)=>{r(e)})}static reject(e){return new de((r,i)=>{i(e)})}static waitFor(e){return new de((r,i)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&r()},u=>i(u))}),o=!0,a===s&&r()})}static or(e){let r=de.resolve(!1);for(const i of e)r=r.next(s=>s?de.resolve(s):i());return r}static forEach(e,r){const i=[];return e.forEach((s,a)=>{i.push(r.call(this,s,a))}),this.waitFor(i)}static mapArray(e,r){return new de((i,s)=>{const a=e.length,o=new Array(a);let l=0;for(let u=0;u<a;u++){const c=u;r(e[c]).next(d=>{o[c]=d,++l,l===a&&i(o)},d=>s(d))}})}static doWhile(e,r){return new de((i,s)=>{const a=()=>{e()===!0?r().next(()=>{a()},s):i()};a()})}}function GY(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Fu(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sg{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Sg.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BS=-1;function Tg(t){return t==null}function um(t){return t===0&&1/t==-1/0}function KY(t){return typeof t=="number"&&Number.isInteger(t)&&!um(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5="";function YY(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=yN(e)),e=XY(t.get(r),e);return yN(e)}function XY(t,e){let r=e;const i=t.length;for(let s=0;s<i;s++){const a=t.charAt(s);switch(a){case"\0":r+="";break;case f5:r+="";break;default:r+=a}}return r}function yN(t){return t+f5+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _N(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Ka(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function p5(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e,r){this.comparator=e,this.root=r||Pn.EMPTY}insert(e,r){return new Wt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Pn.BLACK,null,null))}remove(e){return new Wt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Pn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}indexOf(e){let r=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return r+i.left.size;s<0?i=i.left:(r+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,i)=>(e(r,i),!1))}toString(){const e=[];return this.inorderTraversal((r,i)=>(e.push(`${r}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kf(this.root,e,this.comparator,!1)}getReverseIterator(){return new kf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kf(this.root,e,this.comparator,!0)}}class kf{constructor(e,r,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?i(e.key,r):1,r&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Pn{constructor(e,r,i,s,a){this.key=e,this.value=r,this.color=i??Pn.RED,this.left=s??Pn.EMPTY,this.right=a??Pn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,i,s,a){return new Pn(e??this.key,r??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,r,i),null):a===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Pn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let i,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Pn.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Pn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Pn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw He();const e=this.left.check();if(e!==this.right.check())throw He();return e+(this.isRed()?0:1)}}Pn.EMPTY=null,Pn.RED=!0,Pn.BLACK=!1;Pn.EMPTY=new class{constructor(){this.size=0}get key(){throw He()}get value(){throw He()}get color(){throw He()}get left(){throw He()}get right(){throw He()}copy(e,r,i,s,a){return this}insert(e,r,i){return new Pn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pn{constructor(e){this.comparator=e,this.data=new Wt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,i)=>(e(r),!1))}forEachInRange(e,r){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let i;for(i=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new wN(this.data.getIterator())}getIteratorFrom(e){return new wN(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(i=>{r=r.add(i)}),r}isEqual(e){if(!(e instanceof pn)||this.size!==e.size)return!1;const r=this.data.getIterator(),i=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new pn(this.comparator);return r.data=e,r}}class wN{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(e){this.fields=e,e.sort(xn.comparator)}static empty(){return new Cr([])}unionWith(e){let r=new pn(xn.comparator);for(const i of this.fields)r=r.add(i);for(const i of e)r=r.add(i);return new Cr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return uu(this.fields,e.fields,(r,i)=>r.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new m5("Invalid base64 string: "+a):a}}(e);return new Tn(r)}static fromUint8Array(e){const r=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new Tn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const i=new Uint8Array(r.length);for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return st(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tn.EMPTY_BYTE_STRING=new Tn("");const QY=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oa(t){if(gt(!!t),typeof t=="string"){let e=0;const r=QY.exec(t);if(gt(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Qt(t.seconds),nanos:Qt(t.nanos)}}function Qt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ja(t){return typeof t=="string"?Tn.fromBase64String(t):Tn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g5="server_timestamp",v5="__type__",y5="__previous_value__",_5="__local_write_time__";function zS(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[v5])===null||r===void 0?void 0:r.stringValue)===g5}function Ig(t){const e=t.mapValue.fields[y5];return zS(e)?Ig(e):e}function Od(t){const e=Oa(t.mapValue.fields[_5].timestampValue);return new sn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JY{constructor(e,r,i,s,a,o,l,u,c){this.databaseId=e,this.appId=r,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}const cm="(default)";class cu{constructor(e,r){this.projectId=e,this.database=r||cm}static empty(){return new cu("","")}get isDefaultDatabase(){return this.database===cm}isEqual(e){return e instanceof cu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5="__type__",ZY="__max__",Nf={mapValue:{}},b5="__vector__",dm="value";function Va(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?zS(t)?4:tX(t)?9007199254740991:eX(t)?10:11:He()}function qi(t,e){if(t===e)return!0;const r=Va(t);if(r!==Va(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Od(t).isEqual(Od(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=Oa(s.timestampValue),l=Oa(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return ja(s.bytesValue).isEqual(ja(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return Qt(s.geoPointValue.latitude)===Qt(a.geoPointValue.latitude)&&Qt(s.geoPointValue.longitude)===Qt(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return Qt(s.integerValue)===Qt(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=Qt(s.doubleValue),l=Qt(a.doubleValue);return o===l?um(o)===um(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return uu(t.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(_N(o)!==_N(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!qi(o[u],l[u])))return!1;return!0}(t,e);default:return He()}}function jd(t,e){return(t.values||[]).find(r=>qi(r,e))!==void 0}function du(t,e){if(t===e)return 0;const r=Va(t),i=Va(e);if(r!==i)return st(r,i);switch(r){case 0:case 9007199254740991:return 0;case 1:return st(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=Qt(a.integerValue||a.doubleValue),u=Qt(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return bN(t.timestampValue,e.timestampValue);case 4:return bN(Od(t),Od(e));case 5:return st(t.stringValue,e.stringValue);case 6:return function(a,o){const l=ja(a),u=ja(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const d=st(l[c],u[c]);if(d!==0)return d}return st(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=st(Qt(a.latitude),Qt(o.latitude));return l!==0?l:st(Qt(a.longitude),Qt(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return xN(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,u,c,d;const h=a.fields||{},f=o.fields||{},m=(l=h[dm])===null||l===void 0?void 0:l.arrayValue,v=(u=f[dm])===null||u===void 0?void 0:u.arrayValue,y=st(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((d=v==null?void 0:v.values)===null||d===void 0?void 0:d.length)||0);return y!==0?y:xN(m,v)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===Nf.mapValue&&o===Nf.mapValue)return 0;if(a===Nf.mapValue)return 1;if(o===Nf.mapValue)return-1;const l=a.fields||{},u=Object.keys(l),c=o.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let h=0;h<u.length&&h<d.length;++h){const f=st(u[h],d[h]);if(f!==0)return f;const m=du(l[u[h]],c[d[h]]);if(m!==0)return m}return st(u.length,d.length)}(t.mapValue,e.mapValue);default:throw He()}}function bN(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return st(t,e);const r=Oa(t),i=Oa(e),s=st(r.seconds,i.seconds);return s!==0?s:st(r.nanos,i.nanos)}function xN(t,e){const r=t.values||[],i=e.values||[];for(let s=0;s<r.length&&s<i.length;++s){const a=du(r[s],i[s]);if(a)return a}return st(r.length,i.length)}function hu(t){return _E(t)}function _E(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=Oa(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return ja(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return $e.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let i="[",s=!0;for(const a of r.values||[])s?s=!1:i+=",",i+=_E(a);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",a=!0;for(const o of i)a?a=!1:s+=",",s+=`${o}:${_E(r.fields[o])}`;return s+"}"}(t.mapValue):He()}function vp(t){switch(Va(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ig(t);return e?16+vp(e):16;case 5:return 2*t.stringValue.length;case 6:return ja(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,a)=>s+vp(a),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return Ka(i.fields,(a,o)=>{s+=a.length+vp(o)}),s}(t.mapValue);default:throw He()}}function wE(t){return!!t&&"integerValue"in t}function qS(t){return!!t&&"arrayValue"in t}function EN(t){return!!t&&"nullValue"in t}function SN(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function yp(t){return!!t&&"mapValue"in t}function eX(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[w5])===null||r===void 0?void 0:r.stringValue)===b5}function ad(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ka(t.mapValue.fields,(r,i)=>e.mapValue.fields[r]=ad(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=ad(t.arrayValue.values[r]);return e}return Object.assign({},t)}function tX(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===ZY}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.value=e}static empty(){return new dr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let i=0;i<e.length-1;++i)if(r=(r.mapValue.fields||{})[e.get(i)],!yp(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=ad(r)}setAll(e){let r=xn.emptyPath(),i={},s=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const u=this.getFieldsMap(r);this.applyChanges(u,i,s),i={},s=[],r=l.popLast()}o?i[l.lastSegment()]=ad(o):s.push(l.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,i,s)}delete(e){const r=this.field(e.popLast());yp(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=r.mapValue.fields[e.get(i)];yp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(i)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,i){Ka(r,(s,a)=>e[s]=a);for(const s of i)delete e[s]}clone(){return new dr(ad(this.value))}}function x5(t){const e=[];return Ka(t.fields,(r,i)=>{const s=new xn([r]);if(yp(i)){const a=x5(i.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new Cr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e,r,i,s,a,o,l){this.key=e,this.documentType=r,this.version=i,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Gn(e,0,Ge.min(),Ge.min(),Ge.min(),dr.empty(),0)}static newFoundDocument(e,r,i,s){return new Gn(e,1,r,Ge.min(),i,s,0)}static newNoDocument(e,r){return new Gn(e,2,r,Ge.min(),Ge.min(),dr.empty(),0)}static newUnknownDocument(e,r){return new Gn(e,3,r,Ge.min(),Ge.min(),dr.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=dr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=dr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,r){this.position=e,this.inclusive=r}}function TN(t,e,r){let i=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?i=$e.comparator($e.fromName(o.referenceValue),r.key):i=du(o,r.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function IN(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!qi(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,r="asc"){this.field=e,this.dir=r}}function nX(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E5{}class hn extends E5{constructor(e,r,i){super(),this.field=e,this.op=r,this.value=i}static create(e,r,i){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,i):new iX(e,r,i):r==="array-contains"?new oX(e,i):r==="in"?new lX(e,i):r==="not-in"?new uX(e,i):r==="array-contains-any"?new cX(e,i):new hn(e,r,i)}static createKeyFieldInFilter(e,r,i){return r==="in"?new sX(e,i):new aX(e,i)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(du(r,this.value)):r!==null&&Va(this.value)===Va(r)&&this.matchesComparison(du(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return He()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Hi extends E5{constructor(e,r){super(),this.filters=e,this.op=r,this.ce=null}static create(e,r){return new Hi(e,r)}matches(e){return S5(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function S5(t){return t.op==="and"}function T5(t){return rX(t)&&S5(t)}function rX(t){for(const e of t.filters)if(e instanceof Hi)return!1;return!0}function bE(t){if(t instanceof hn)return t.field.canonicalString()+t.op.toString()+hu(t.value);if(T5(t))return t.filters.map(e=>bE(e)).join(",");{const e=t.filters.map(r=>bE(r)).join(",");return`${t.op}(${e})`}}function I5(t,e){return t instanceof hn?function(i,s){return s instanceof hn&&i.op===s.op&&i.field.isEqual(s.field)&&qi(i.value,s.value)}(t,e):t instanceof Hi?function(i,s){return s instanceof Hi&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((a,o,l)=>a&&I5(o,s.filters[l]),!0):!1}(t,e):void He()}function C5(t){return t instanceof hn?function(r){return`${r.field.canonicalString()} ${r.op} ${hu(r.value)}`}(t):t instanceof Hi?function(r){return r.op.toString()+" {"+r.getFilters().map(C5).join(" ,")+"}"}(t):"Filter"}class iX extends hn{constructor(e,r,i){super(e,r,i),this.key=$e.fromName(i.referenceValue)}matches(e){const r=$e.comparator(e.key,this.key);return this.matchesComparison(r)}}class sX extends hn{constructor(e,r){super(e,"in",r),this.keys=k5("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class aX extends hn{constructor(e,r){super(e,"not-in",r),this.keys=k5("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function k5(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(i=>$e.fromName(i.referenceValue))}class oX extends hn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return qS(r)&&jd(r.arrayValue,this.value)}}class lX extends hn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&jd(this.value.arrayValue,r)}}class uX extends hn{constructor(e,r){super(e,"not-in",r)}matches(e){if(jd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!jd(this.value.arrayValue,r)}}class cX extends hn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!qS(r)||!r.arrayValue.values)&&r.arrayValue.values.some(i=>jd(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dX{constructor(e,r=null,i=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.le=null}}function CN(t,e=null,r=[],i=[],s=null,a=null,o=null){return new dX(t,e,r,i,s,a,o)}function HS(t){const e=Xe(t);if(e.le===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(i=>bE(i)).join(","),r+="|ob:",r+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),Tg(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>hu(i)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>hu(i)).join(",")),e.le=r}return e.le}function WS(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!nX(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!I5(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!IN(t.startAt,e.startAt)&&IN(t.endAt,e.endAt)}function xE(t){return $e.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cg{constructor(e,r=null,i=[],s=[],a=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function hX(t,e,r,i,s,a,o,l){return new Cg(t,e,r,i,s,a,o,l)}function GS(t){return new Cg(t)}function kN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function fX(t){return t.collectionGroup!==null}function od(t){const e=Xe(t);if(e.he===null){e.he=[];const r=new Set;for(const a of e.explicitOrderBy)e.he.push(a),r.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new pn(xn.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.he.push(new fm(a,i))}),r.has(xn.keyField().canonicalString())||e.he.push(new fm(xn.keyField(),i))}return e.he}function Fi(t){const e=Xe(t);return e.Pe||(e.Pe=pX(e,od(t))),e.Pe}function pX(t,e){if(t.limitType==="F")return CN(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new fm(s.field,a)});const r=t.endAt?new hm(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new hm(t.startAt.position,t.startAt.inclusive):null;return CN(t.path,t.collectionGroup,e,t.filters,t.limit,r,i)}}function EE(t,e,r){return new Cg(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function kg(t,e){return WS(Fi(t),Fi(e))&&t.limitType===e.limitType}function N5(t){return`${HS(Fi(t))}|lt:${t.limitType}`}function bl(t){return`Query(target=${function(r){let i=r.path.canonicalString();return r.collectionGroup!==null&&(i+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(i+=`, filters: [${r.filters.map(s=>C5(s)).join(", ")}]`),Tg(r.limit)||(i+=", limit: "+r.limit),r.orderBy.length>0&&(i+=`, orderBy: [${r.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),r.startAt&&(i+=", startAt: ",i+=r.startAt.inclusive?"b:":"a:",i+=r.startAt.position.map(s=>hu(s)).join(",")),r.endAt&&(i+=", endAt: ",i+=r.endAt.inclusive?"a:":"b:",i+=r.endAt.position.map(s=>hu(s)).join(",")),`Target(${i})`}(Fi(t))}; limitType=${t.limitType})`}function Ng(t,e){return e.isFoundDocument()&&function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):$e.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(t,e)&&function(i,s){for(const a of od(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(o,l,u){const c=TN(o,l,u);return o.inclusive?c<=0:c<0}(i.startAt,od(i),s)||i.endAt&&!function(o,l,u){const c=TN(o,l,u);return o.inclusive?c>=0:c>0}(i.endAt,od(i),s))}(t,e)}function mX(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function A5(t){return(e,r)=>{let i=!1;for(const s of od(t)){const a=gX(s,e,r);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function gX(t,e,r){const i=t.field.isKeyField()?$e.comparator(e.key,r.key):function(a,o,l){const u=o.data.field(a),c=l.data.field(a);return u!==null&&c!==null?du(u,c):He()}(t.field,e,r);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return He()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,r]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[r]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ka(this.inner,(r,i)=>{for(const[s,a]of i)e(s,a)})}isEmpty(){return p5(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vX=new Wt($e.comparator);function ks(){return vX}const R5=new Wt($e.comparator);function Oc(...t){let e=R5;for(const r of t)e=e.insert(r.key,r);return e}function P5(t){let e=R5;return t.forEach((r,i)=>e=e.insert(r,i.overlayedDocument)),e}function vo(){return ld()}function D5(){return ld()}function ld(){return new Wo(t=>t.toString(),(t,e)=>t.isEqual(e))}const yX=new Wt($e.comparator),_X=new pn($e.comparator);function it(...t){let e=_X;for(const r of t)e=e.add(r);return e}const wX=new pn(st);function bX(){return wX}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:um(e)?"-0":e}}function M5(t){return{integerValue:""+t}}function xX(t,e){return KY(e)?M5(e):KS(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(){this._=void 0}}function EX(t,e,r){return t instanceof pm?function(s,a){const o={fields:{[v5]:{stringValue:g5},[_5]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&zS(a)&&(a=Ig(a)),a&&(o.fields[y5]=a),{mapValue:o}}(r,e):t instanceof Vd?O5(t,e):t instanceof Fd?j5(t,e):function(s,a){const o=L5(s,a),l=NN(o)+NN(s.Ie);return wE(o)&&wE(s.Ie)?M5(l):KS(s.serializer,l)}(t,e)}function SX(t,e,r){return t instanceof Vd?O5(t,e):t instanceof Fd?j5(t,e):r}function L5(t,e){return t instanceof mm?function(i){return wE(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class pm extends Ag{}class Vd extends Ag{constructor(e){super(),this.elements=e}}function O5(t,e){const r=V5(e);for(const i of t.elements)r.some(s=>qi(s,i))||r.push(i);return{arrayValue:{values:r}}}class Fd extends Ag{constructor(e){super(),this.elements=e}}function j5(t,e){let r=V5(e);for(const i of t.elements)r=r.filter(s=>!qi(s,i));return{arrayValue:{values:r}}}class mm extends Ag{constructor(e,r){super(),this.serializer=e,this.Ie=r}}function NN(t){return Qt(t.integerValue||t.doubleValue)}function V5(t){return qS(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function TX(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Vd&&s instanceof Vd||i instanceof Fd&&s instanceof Fd?uu(i.elements,s.elements,qi):i instanceof mm&&s instanceof mm?qi(i.Ie,s.Ie):i instanceof pm&&s instanceof pm}(t.transform,e.transform)}class IX{constructor(e,r){this.version=e,this.transformResults=r}}class $i{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new $i}static exists(e){return new $i(void 0,e)}static updateTime(e){return new $i(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _p(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Rg{}function F5(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new U5(t.key,$i.none()):new gh(t.key,t.data,$i.none());{const r=t.data,i=dr.empty();let s=new pn(xn.comparator);for(let a of e.fields)if(!s.has(a)){let o=r.field(a);o===null&&a.length>1&&(a=a.popLast(),o=r.field(a)),o===null?i.delete(a):i.set(a,o),s=s.add(a)}return new Ya(t.key,i,new Cr(s.toArray()),$i.none())}}function CX(t,e,r){t instanceof gh?function(s,a,o){const l=s.value.clone(),u=RN(s.fieldTransforms,a,o.transformResults);l.setAll(u),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Ya?function(s,a,o){if(!_p(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=RN(s.fieldTransforms,a,o.transformResults),u=a.data;u.setAll($5(s)),u.setAll(l),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,r):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function ud(t,e,r,i){return t instanceof gh?function(a,o,l,u){if(!_p(a.precondition,o))return l;const c=a.value.clone(),d=PN(a.fieldTransforms,u,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,r,i):t instanceof Ya?function(a,o,l,u){if(!_p(a.precondition,o))return l;const c=PN(a.fieldTransforms,u,o),d=o.data;return d.setAll($5(a)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(h=>h.field))}(t,e,r,i):function(a,o,l){return _p(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function kX(t,e){let r=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),a=L5(i.transform,s||null);a!=null&&(r===null&&(r=dr.empty()),r.set(i.field,a))}return r||null}function AN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&uu(i,s,(a,o)=>TX(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class gh extends Rg{constructor(e,r,i,s=[]){super(),this.key=e,this.value=r,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ya extends Rg{constructor(e,r,i,s,a=[]){super(),this.key=e,this.data=r,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function $5(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const i=t.data.field(r);e.set(r,i)}}),e}function RN(t,e,r){const i=new Map;gt(t.length===r.length);for(let s=0;s<r.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);i.set(a.field,SX(o,l,r[s]))}return i}function PN(t,e,r){const i=new Map;for(const s of t){const a=s.transform,o=r.data.field(s.field);i.set(s.field,EX(a,o,e))}return i}class U5 extends Rg{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NX extends Rg{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AX{constructor(e,r,i,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,r){const i=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&CX(a,e,i[s])}}applyToLocalView(e,r){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(r=ud(i,e,r,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(r=ud(i,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const i=D5();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=r.has(s.key)?null:l;const u=F5(o,l);u!==null&&i.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Ge.min())}),i}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),it())}isEqual(e){return this.batchId===e.batchId&&uu(this.mutations,e.mutations,(r,i)=>AN(r,i))&&uu(this.baseMutations,e.baseMutations,(r,i)=>AN(r,i))}}class YS{constructor(e,r,i,s){this.batch=e,this.commitVersion=r,this.mutationResults=i,this.docVersions=s}static from(e,r,i){gt(e.mutations.length===i.length);let s=function(){return yX}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,i[o].version);return new YS(e,r,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RX{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PX{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tn,ut;function DX(t){switch(t){case fe.OK:return He();case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return He()}}function B5(t){if(t===void 0)return Cs("GRPC error has no .code"),fe.UNKNOWN;switch(t){case tn.OK:return fe.OK;case tn.CANCELLED:return fe.CANCELLED;case tn.UNKNOWN:return fe.UNKNOWN;case tn.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case tn.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case tn.INTERNAL:return fe.INTERNAL;case tn.UNAVAILABLE:return fe.UNAVAILABLE;case tn.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case tn.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case tn.NOT_FOUND:return fe.NOT_FOUND;case tn.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case tn.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case tn.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case tn.ABORTED:return fe.ABORTED;case tn.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case tn.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case tn.DATA_LOSS:return fe.DATA_LOSS;default:return He()}}(ut=tn||(tn={}))[ut.OK=0]="OK",ut[ut.CANCELLED=1]="CANCELLED",ut[ut.UNKNOWN=2]="UNKNOWN",ut[ut.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ut[ut.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ut[ut.NOT_FOUND=5]="NOT_FOUND",ut[ut.ALREADY_EXISTS=6]="ALREADY_EXISTS",ut[ut.PERMISSION_DENIED=7]="PERMISSION_DENIED",ut[ut.UNAUTHENTICATED=16]="UNAUTHENTICATED",ut[ut.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ut[ut.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ut[ut.ABORTED=10]="ABORTED",ut[ut.OUT_OF_RANGE=11]="OUT_OF_RANGE",ut[ut.UNIMPLEMENTED=12]="UNIMPLEMENTED",ut[ut.INTERNAL=13]="INTERNAL",ut[ut.UNAVAILABLE=14]="UNAVAILABLE",ut[ut.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MX(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LX=new Ta([4294967295,4294967295],0);function DN(t){const e=MX().encode(t),r=new s5;return r.update(e),new Uint8Array(r.digest())}function MN(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Ta([r,i],0),new Ta([s,a],0)]}class XS{constructor(e,r,i){if(this.bitmap=e,this.padding=r,this.hashCount=i,r<0||r>=8)throw new jc(`Invalid padding: ${r}`);if(i<0)throw new jc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new jc(`Invalid hash count: ${i}`);if(e.length===0&&r!==0)throw new jc(`Invalid padding when bitmap length is 0: ${r}`);this.Ee=8*e.length-r,this.de=Ta.fromNumber(this.Ee)}Ae(e,r,i){let s=e.add(r.multiply(Ta.fromNumber(i)));return s.compare(LX)===1&&(s=new Ta([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const r=DN(e),[i,s]=MN(r);for(let a=0;a<this.hashCount;a++){const o=this.Ae(i,s,a);if(!this.Re(o))return!1}return!0}static create(e,r,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new XS(a,s,r);return i.forEach(l=>o.insert(l)),o}insert(e){if(this.Ee===0)return;const r=DN(e),[i,s]=MN(r);for(let a=0;a<this.hashCount;a++){const o=this.Ae(i,s,a);this.Ve(o)}}Ve(e){const r=Math.floor(e/8),i=e%8;this.bitmap[r]|=1<<i}}class jc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,r,i,s,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,i){const s=new Map;return s.set(e,vh.createSynthesizedTargetChangeForCurrentChange(e,r,i)),new Pg(Ge.min(),s,new Wt(st),ks(),it())}}class vh{constructor(e,r,i,s,a){this.resumeToken=e,this.current=r,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,i){return new vh(i,r,it(),it(),it())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(e,r,i,s){this.me=e,this.removedTargetIds=r,this.key=i,this.fe=s}}class z5{constructor(e,r){this.targetId=e,this.ge=r}}class q5{constructor(e,r,i=Tn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=i,this.cause=s}}class LN{constructor(){this.pe=0,this.ye=ON(),this.we=Tn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=it(),r=it(),i=it();return this.ye.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:i=i.add(s);break;default:He()}}),new vh(this.we,this.Se,e,r,i)}Me(){this.be=!1,this.ye=ON()}xe(e,r){this.be=!0,this.ye=this.ye.insert(e,r)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,gt(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class OX{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ks(),this.$e=Af(),this.Ke=Af(),this.Ue=new Wt(st)}We(e){for(const r of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(r,e.fe):this.ze(r,e.key,e.fe);for(const r of e.removedTargetIds)this.ze(r,e.key,e.fe)}je(e){this.forEachTarget(e,r=>{const i=this.He(r);switch(e.state){case 0:this.Je(r)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(r);break;case 3:this.Je(r)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(r)&&(this.Ye(r),i.Ce(e.resumeToken));break;default:He()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.qe.forEach((i,s)=>{this.Je(s)&&r(s)})}Ze(e){const r=e.targetId,i=e.ge.count,s=this.Xe(r);if(s){const a=s.target;if(xE(a))if(i===0){const o=new $e(a.path);this.ze(r,o,Gn.newNoDocument(o,Ge.min()))}else gt(i===1);else{const o=this.et(r);if(o!==i){const l=this.tt(e),u=l?this.nt(l,e,o):1;if(u!==0){this.Ye(r);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(r,c)}}}}}tt(e){const r=e.ge.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=r;let o,l;try{o=ja(i).toUint8Array()}catch(u){if(u instanceof m5)return Mo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new XS(o,s,a)}catch(u){return Mo(u instanceof jc?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ee===0?null:l}nt(e,r,i){return r.ge.count===i-this.st(e,r.targetId)?0:2}st(e,r){const i=this.ke.getRemoteKeysForTarget(r);let s=0;return i.forEach(a=>{const o=this.ke.it(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.ze(r,a,null),s++)}),s}ot(e){const r=new Map;this.qe.forEach((a,o)=>{const l=this.Xe(o);if(l){if(a.current&&xE(l.target)){const u=new $e(l.target.path);this._t(u).has(o)||this.ut(o,u)||this.ze(o,u,Gn.newNoDocument(u,e))}a.ve&&(r.set(o,a.Fe()),a.Me())}});let i=it();this.Ke.forEach((a,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Xe(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(a))}),this.Qe.forEach((a,o)=>o.setReadTime(e));const s=new Pg(e,r,this.Ue,this.Qe,i);return this.Qe=ks(),this.$e=Af(),this.Ke=Af(),this.Ue=new Wt(st),s}Ge(e,r){if(!this.Je(e))return;const i=this.ut(e,r.key)?2:0;this.He(e).xe(r.key,i),this.Qe=this.Qe.insert(r.key,r),this.$e=this.$e.insert(r.key,this._t(r.key).add(e)),this.Ke=this.Ke.insert(r.key,this.ct(r.key).add(e))}ze(e,r,i){if(!this.Je(e))return;const s=this.He(e);this.ut(e,r)?s.xe(r,1):s.Oe(r),this.Ke=this.Ke.insert(r,this.ct(r).delete(e)),this.Ke=this.Ke.insert(r,this.ct(r).add(e)),i&&(this.Qe=this.Qe.insert(r,i))}removeTarget(e){this.qe.delete(e)}et(e){const r=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let r=this.qe.get(e);return r||(r=new LN,this.qe.set(e,r)),r}ct(e){let r=this.Ke.get(e);return r||(r=new pn(st),this.Ke=this.Ke.insert(e,r)),r}_t(e){let r=this.$e.get(e);return r||(r=new pn(st),this.$e=this.$e.insert(e,r)),r}Je(e){const r=this.Xe(e)!==null;return r||Ae("WatchChangeAggregator","Detected inactive target",e),r}Xe(e){const r=this.qe.get(e);return r&&r.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new LN),this.ke.getRemoteKeysForTarget(e).forEach(r=>{this.ze(e,r,null)})}ut(e,r){return this.ke.getRemoteKeysForTarget(e).has(r)}}function Af(){return new Wt($e.comparator)}function ON(){return new Wt($e.comparator)}const jX={asc:"ASCENDING",desc:"DESCENDING"},VX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FX={and:"AND",or:"OR"};class $X{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function SE(t,e){return t.useProto3Json||Tg(e)?e:{value:e}}function gm(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function H5(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function UX(t,e){return gm(t,e.toTimestamp())}function Ui(t){return gt(!!t),Ge.fromTimestamp(function(r){const i=Oa(r);return new sn(i.seconds,i.nanos)}(t))}function QS(t,e){return TE(t,e).canonicalString()}function TE(t,e){const r=function(s){return new Ft(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function W5(t){const e=Ft.fromString(t);return gt(Q5(e)),e}function IE(t,e){return QS(t.databaseId,e.path)}function Oy(t,e){const r=W5(e);if(r.get(1)!==t.databaseId.projectId)throw new Ve(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Ve(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new $e(K5(r))}function G5(t,e){return QS(t.databaseId,e)}function BX(t){const e=W5(t);return e.length===4?Ft.emptyPath():K5(e)}function CE(t){return new Ft(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function K5(t){return gt(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function jN(t,e,r){return{name:IE(t,e),fields:r.value.mapValue.fields}}function zX(t,e){let r;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:He()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(c,d){return c.useProto3Json?(gt(d===void 0||typeof d=="string"),Tn.fromBase64String(d||"")):(gt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Tn.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const d=c.code===void 0?fe.UNKNOWN:B5(c.code);return new Ve(d,c.message||"")}(o);r=new q5(i,s,a,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Oy(t,i.document.name),a=Ui(i.document.updateTime),o=i.document.createTime?Ui(i.document.createTime):Ge.min(),l=new dr({mapValue:{fields:i.document.fields}}),u=Gn.newFoundDocument(s,a,o,l),c=i.targetIds||[],d=i.removedTargetIds||[];r=new wp(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Oy(t,i.document),a=i.readTime?Ui(i.readTime):Ge.min(),o=Gn.newNoDocument(s,a),l=i.removedTargetIds||[];r=new wp([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Oy(t,i.document),a=i.removedTargetIds||[];r=new wp([],a,s,null)}else{if(!("filter"in e))return He();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,o=new PX(s,a),l=i.targetId;r=new z5(l,o)}}return r}function qX(t,e){let r;if(e instanceof gh)r={update:jN(t,e.key,e.value)};else if(e instanceof U5)r={delete:IE(t,e.key)};else if(e instanceof Ya)r={update:jN(t,e.key,e.data),updateMask:ZX(e.fieldMask)};else{if(!(e instanceof NX))return He();r={verify:IE(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(i=>function(a,o){const l=o.transform;if(l instanceof pm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Vd)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Fd)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof mm)return{fieldPath:o.field.canonicalString(),increment:l.Ie};throw He()}(0,i))),e.precondition.isNone||(r.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:UX(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:He()}(t,e.precondition)),r}function HX(t,e){return t&&t.length>0?(gt(e!==void 0),t.map(r=>function(s,a){let o=s.updateTime?Ui(s.updateTime):Ui(a);return o.isEqual(Ge.min())&&(o=Ui(a)),new IX(o,s.transformResults||[])}(r,e))):[]}function WX(t,e){return{documents:[G5(t,e.path)]}}function GX(t,e){const r={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),r.structuredQuery.from=[{collectionId:i.lastSegment()}]),r.parent=G5(t,s);const a=function(c){if(c.length!==0)return X5(Hi.create(c,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const o=function(c){if(c.length!==0)return c.map(d=>function(f){return{field:xl(f.field),direction:XX(f.dir)}}(d))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=SE(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ht:r,parent:s}}function KX(t){let e=BX(t.parent);const r=t.structuredQuery,i=r.from?r.from.length:0;let s=null;if(i>0){gt(i===1);const d=r.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let a=[];r.where&&(a=function(h){const f=Y5(h);return f instanceof Hi&&T5(f)?f.getFilters():[f]}(r.where));let o=[];r.orderBy&&(o=function(h){return h.map(f=>function(v){return new fm(El(v.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(v.direction))}(f))}(r.orderBy));let l=null;r.limit&&(l=function(h){let f;return f=typeof h=="object"?h.value:h,Tg(f)?null:f}(r.limit));let u=null;r.startAt&&(u=function(h){const f=!!h.before,m=h.values||[];return new hm(m,f)}(r.startAt));let c=null;return r.endAt&&(c=function(h){const f=!h.before,m=h.values||[];return new hm(m,f)}(r.endAt)),hX(e,s,o,a,l,"F",u,c)}function YX(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return He()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function Y5(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const i=El(r.unaryFilter.field);return hn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=El(r.unaryFilter.field);return hn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=El(r.unaryFilter.field);return hn.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=El(r.unaryFilter.field);return hn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return He()}}(t):t.fieldFilter!==void 0?function(r){return hn.create(El(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return He()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Hi.create(r.compositeFilter.filters.map(i=>Y5(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return He()}}(r.compositeFilter.op))}(t):He()}function XX(t){return jX[t]}function QX(t){return VX[t]}function JX(t){return FX[t]}function xl(t){return{fieldPath:t.canonicalString()}}function El(t){return xn.fromServerFormat(t.fieldPath)}function X5(t){return t instanceof hn?function(r){if(r.op==="=="){if(SN(r.value))return{unaryFilter:{field:xl(r.field),op:"IS_NAN"}};if(EN(r.value))return{unaryFilter:{field:xl(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(SN(r.value))return{unaryFilter:{field:xl(r.field),op:"IS_NOT_NAN"}};if(EN(r.value))return{unaryFilter:{field:xl(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:xl(r.field),op:QX(r.op),value:r.value}}}(t):t instanceof Hi?function(r){const i=r.getFilters().map(s=>X5(s));return i.length===1?i[0]:{compositeFilter:{op:JX(r.op),filters:i}}}(t):He()}function ZX(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Q5(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ha{constructor(e,r,i,s,a=Ge.min(),o=Ge.min(),l=Tn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new ha(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new ha(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ha(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ha(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eQ{constructor(e){this.Tt=e}}function tQ(t){const e=KX({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?EE(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nQ{constructor(){this.Tn=new rQ}addToCollectionParentIndex(e,r){return this.Tn.add(r),de.resolve()}getCollectionParents(e,r){return de.resolve(this.Tn.getEntries(r))}addFieldIndex(e,r){return de.resolve()}deleteFieldIndex(e,r){return de.resolve()}deleteAllFieldIndexes(e){return de.resolve()}createTargetIndexes(e,r){return de.resolve()}getDocumentsMatchingTarget(e,r){return de.resolve(null)}getIndexType(e,r){return de.resolve(0)}getFieldIndexes(e,r){return de.resolve([])}getNextCollectionGroupToUpdate(e){return de.resolve(null)}getMinOffset(e,r){return de.resolve(La.min())}getMinOffsetFromCollectionGroup(e,r){return de.resolve(La.min())}updateCollectionGroup(e,r,i){return de.resolve()}updateIndexEntries(e,r){return de.resolve()}}class rQ{constructor(){this.index={}}add(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r]||new pn(Ft.comparator),a=!s.has(i);return this.index[r]=s.add(i),a}has(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r];return s&&s.has(i)}getEntries(e){return(this.index[e]||new pn(Ft.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},J5=41943040;class ur{static withCacheSize(e){return new ur(e,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ur.DEFAULT_COLLECTION_PERCENTILE=10,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ur.DEFAULT=new ur(J5,ur.DEFAULT_COLLECTION_PERCENTILE,ur.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ur.DISABLED=new ur(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new fu(0)}static Un(){return new fu(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FN="LruGarbageCollector",iQ=1048576;function $N([t,e],[r,i]){const s=st(t,r);return s===0?st(e,i):s}class sQ{constructor(e){this.Hn=e,this.buffer=new pn($N),this.Jn=0}Yn(){return++this.Jn}Zn(e){const r=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(r);else{const i=this.buffer.last();$N(r,i)<0&&(this.buffer=this.buffer.delete(i).add(r))}}get maxValue(){return this.buffer.last()[0]}}class aQ{constructor(e,r,i){this.garbageCollector=e,this.asyncQueue=r,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){Ae(FN,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Fu(r)?Ae(FN,"Ignoring IndexedDB error during garbage collection: ",r):await Vu(r)}await this.er(3e5)})}}class oQ{constructor(e,r){this.tr=e,this.params=r}calculateTargetCount(e,r){return this.tr.nr(e).next(i=>Math.floor(r/100*i))}nthSequenceNumber(e,r){if(r===0)return de.resolve(Sg.ae);const i=new sQ(r);return this.tr.forEachTarget(e,s=>i.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>i.Zn(s))).next(()=>i.maxValue)}removeTargets(e,r,i){return this.tr.removeTargets(e,r,i)}removeOrphanedDocuments(e,r){return this.tr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Ae("LruGarbageCollector","Garbage collection skipped; disabled"),de.resolve(VN)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ae("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),VN):this.ir(e,r))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,r){let i,s,a,o,l,u,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Ae("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(i=h,l=Date.now(),this.removeTargets(e,i,r))).next(h=>(a=h,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(h=>(c=Date.now(),wl()<=rt.DEBUG&&Ae("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${a} targets in `+(u-l)+`ms
	Removed ${h} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),de.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:h})))}}function lQ(t,e){return new oQ(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uQ{constructor(){this.changes=new Wo(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Gn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const i=this.changes.get(r);return i!==void 0?de.resolve(i):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cQ{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dQ{constructor(e,r,i,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,r){let i=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(i!==null&&ud(i.mutation,s,Cr.empty(),sn.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.getLocalViewOfDocuments(e,i,it()).next(()=>i))}getLocalViewOfDocuments(e,r,i=it()){const s=vo();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,i).next(a=>{let o=Oc();return a.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const i=vo();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,it()))}populateOverlays(e,r,i){const s=[];return i.forEach(a=>{r.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,i,s){let a=ks();const o=ld(),l=function(){return ld()}();return r.forEach((u,c)=>{const d=i.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof Ya)?a=a.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),ud(d.mutation,c,d.mutation.getFieldMask(),sn.now())):o.set(c.key,Cr.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((c,d)=>o.set(c,d)),r.forEach((c,d)=>{var h;return l.set(c,new cQ(d,(h=o.get(c))!==null&&h!==void 0?h:null))}),l))}recalculateAndSaveOverlays(e,r){const i=ld();let s=new Wt((o,l)=>o-l),a=it();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=r.get(u);if(c===null)return;let d=i.get(u)||Cr.empty();d=l.applyToLocalView(c,d),i.set(u,d);const h=(s.get(l.batchId)||it()).add(u);s=s.insert(l.batchId,h)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,d=u.value,h=D5();d.forEach(f=>{if(!a.has(f)){const m=F5(r.get(f),i.get(f));m!==null&&h.set(f,m),a=a.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,h))}return de.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,r,i,s){return function(o){return $e.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):fX(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,i,s):this.getDocumentsMatchingCollectionQuery(e,r,i,s)}getNextDocuments(e,r,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,i,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,i.largestBatchId,s-a.size):de.resolve(vo());let l=Ld,u=a;return o.next(c=>de.forEach(c,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),a.get(d)?de.resolve():this.remoteDocumentCache.getEntry(e,d).next(f=>{u=u.insert(d,f)}))).next(()=>this.populateOverlays(e,c,a)).next(()=>this.computeViews(e,u,c,it())).next(d=>({batchId:l,changes:P5(d)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new $e(r)).next(i=>{let s=Oc();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,i,s){const a=r.collectionGroup;let o=Oc();return this.indexManager.getCollectionParents(e,a).next(l=>de.forEach(l,u=>{const c=function(h,f){return new Cg(f,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(r,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,c,i,s).next(d=>{d.forEach((h,f)=>{o=o.insert(h,f)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,i.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,i,a,s))).next(o=>{a.forEach((u,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Gn.newInvalidDocument(d)))});let l=Oc();return o.forEach((u,c)=>{const d=a.get(u);d!==void 0&&ud(d.mutation,c,Cr.empty(),sn.now()),Ng(r,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hQ{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,r){return de.resolve(this.dr.get(r))}saveBundleMetadata(e,r){return this.dr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Ui(s.createTime)}}(r)),de.resolve()}getNamedQuery(e,r){return de.resolve(this.Ar.get(r))}saveNamedQuery(e,r){return this.Ar.set(r.name,function(s){return{name:s.name,query:tQ(s.bundledQuery),readTime:Ui(s.readTime)}}(r)),de.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fQ{constructor(){this.overlays=new Wt($e.comparator),this.Rr=new Map}getOverlay(e,r){return de.resolve(this.overlays.get(r))}getOverlays(e,r){const i=vo();return de.forEach(r,s=>this.getOverlay(e,s).next(a=>{a!==null&&i.set(s,a)})).next(()=>i)}saveOverlays(e,r,i){return i.forEach((s,a)=>{this.Et(e,r,a)}),de.resolve()}removeOverlaysForBatchId(e,r,i){const s=this.Rr.get(i);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Rr.delete(i)),de.resolve()}getOverlaysForCollection(e,r,i){const s=vo(),a=r.length+1,o=new $e(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===a&&u.largestBatchId>i&&s.set(u.getKey(),u)}return de.resolve(s)}getOverlaysForCollectionGroup(e,r,i,s){let a=new Wt((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>i){let d=a.get(c.largestBatchId);d===null&&(d=vo(),a=a.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const l=vo(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>l.set(c,d)),!(l.size()>=s)););return de.resolve(l)}Et(e,r,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.Rr.get(s.largestBatchId).delete(i.key);this.Rr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new RX(r,i));let a=this.Rr.get(r);a===void 0&&(a=it(),this.Rr.set(r,a)),this.Rr.set(r,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pQ{constructor(){this.sessionToken=Tn.EMPTY_BYTE_STRING}getSessionToken(e){return de.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,de.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JS{constructor(){this.Vr=new pn(wn.mr),this.gr=new pn(wn.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,r){const i=new wn(e,r);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,r){e.forEach(i=>this.addReference(i,r))}removeReference(e,r){this.wr(new wn(e,r))}Sr(e,r){e.forEach(i=>this.removeReference(i,r))}br(e){const r=new $e(new Ft([])),i=new wn(r,e),s=new wn(r,e+1),a=[];return this.gr.forEachInRange([i,s],o=>{this.wr(o),a.push(o.key)}),a}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const r=new $e(new Ft([])),i=new wn(r,e),s=new wn(r,e+1);let a=it();return this.gr.forEachInRange([i,s],o=>{a=a.add(o.key)}),a}containsKey(e){const r=new wn(e,0),i=this.Vr.firstAfterOrEqual(r);return i!==null&&e.isEqual(i.key)}}class wn{constructor(e,r){this.key=e,this.Cr=r}static mr(e,r){return $e.comparator(e.key,r.key)||st(e.Cr,r.Cr)}static pr(e,r){return st(e.Cr,r.Cr)||$e.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mQ{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Fr=1,this.Mr=new pn(wn.mr)}checkEmpty(e){return de.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,i,s){const a=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new AX(a,r,i,s);this.mutationQueue.push(o);for(const l of s)this.Mr=this.Mr.add(new wn(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return de.resolve(o)}lookupMutationBatch(e,r){return de.resolve(this.Or(r))}getNextMutationBatchAfterBatchId(e,r){const i=r+1,s=this.Nr(i),a=s<0?0:s;return de.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return de.resolve(this.mutationQueue.length===0?BS:this.Fr-1)}getAllMutationBatches(e){return de.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const i=new wn(r,0),s=new wn(r,Number.POSITIVE_INFINITY),a=[];return this.Mr.forEachInRange([i,s],o=>{const l=this.Or(o.Cr);a.push(l)}),de.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let i=new pn(st);return r.forEach(s=>{const a=new wn(s,0),o=new wn(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([a,o],l=>{i=i.add(l.Cr)})}),de.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,r){const i=r.path,s=i.length+1;let a=i;$e.isDocumentKey(a)||(a=a.child(""));const o=new wn(new $e(a),0);let l=new pn(st);return this.Mr.forEachWhile(u=>{const c=u.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(l=l.add(u.Cr)),!0)},o),de.resolve(this.Br(l))}Br(e){const r=[];return e.forEach(i=>{const s=this.Or(i);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){gt(this.Lr(r.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return de.forEach(r.mutations,s=>{const a=new wn(s.key,r.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,r){const i=new wn(r,0),s=this.Mr.firstAfterOrEqual(i);return de.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,de.resolve()}Lr(e,r){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const r=this.Nr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gQ{constructor(e){this.kr=e,this.docs=function(){return new Wt($e.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const i=r.key,s=this.docs.get(i),a=s?s.size:0,o=this.kr(r);return this.docs=this.docs.insert(i,{document:r.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const i=this.docs.get(r);return de.resolve(i?i.document.mutableCopy():Gn.newInvalidDocument(r))}getEntries(e,r){let i=ks();return r.forEach(s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():Gn.newInvalidDocument(s))}),de.resolve(i)}getDocumentsMatchingQuery(e,r,i,s){let a=ks();const o=r.path,l=new $e(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||qY(zY(d),i)<=0||(s.has(d.key)||Ng(r,d))&&(a=a.insert(d.key,d.mutableCopy()))}return de.resolve(a)}getAllFromCollectionGroup(e,r,i,s){He()}qr(e,r){return de.forEach(this.docs,i=>r(i))}newChangeBuffer(e){return new vQ(this)}getSize(e){return de.resolve(this.size)}}class vQ extends uQ{constructor(e){super(),this.Ir=e}applyChanges(e){const r=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?r.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(i)}),de.waitFor(r)}getFromCache(e,r){return this.Ir.getEntry(e,r)}getAllFromCache(e,r){return this.Ir.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yQ{constructor(e){this.persistence=e,this.Qr=new Wo(r=>HS(r),WS),this.lastRemoteSnapshotVersion=Ge.min(),this.highestTargetId=0,this.$r=0,this.Kr=new JS,this.targetCount=0,this.Ur=fu.Kn()}forEachTarget(e,r){return this.Qr.forEach((i,s)=>r(s)),de.resolve()}getLastRemoteSnapshotVersion(e){return de.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return de.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),de.resolve(this.highestTargetId)}setTargetsMetadata(e,r,i){return i&&(this.lastRemoteSnapshotVersion=i),r>this.$r&&(this.$r=r),de.resolve()}zn(e){this.Qr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Ur=new fu(r),this.highestTargetId=r),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,r){return this.zn(r),this.targetCount+=1,de.resolve()}updateTargetData(e,r){return this.zn(r),de.resolve()}removeTargetData(e,r){return this.Qr.delete(r.target),this.Kr.br(r.targetId),this.targetCount-=1,de.resolve()}removeTargets(e,r,i){let s=0;const a=[];return this.Qr.forEach((o,l)=>{l.sequenceNumber<=r&&i.get(l.targetId)===null&&(this.Qr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),de.waitFor(a).next(()=>s)}getTargetCount(e){return de.resolve(this.targetCount)}getTargetData(e,r){const i=this.Qr.get(r)||null;return de.resolve(i)}addMatchingKeys(e,r,i){return this.Kr.yr(r,i),de.resolve()}removeMatchingKeys(e,r,i){this.Kr.Sr(r,i);const s=this.persistence.referenceDelegate,a=[];return s&&r.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),de.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this.Kr.br(r),de.resolve()}getMatchingKeysForTargetId(e,r){const i=this.Kr.vr(r);return de.resolve(i)}containsKey(e,r){return de.resolve(this.Kr.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z5{constructor(e,r){this.Wr={},this.overlays={},this.Gr=new Sg(0),this.zr=!1,this.zr=!0,this.jr=new pQ,this.referenceDelegate=e(this),this.Hr=new yQ(this),this.indexManager=new nQ,this.remoteDocumentCache=function(s){return new gQ(s)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new eQ(r),this.Yr=new hQ(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new fQ,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let i=this.Wr[e.toKey()];return i||(i=new mQ(r,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,r,i){Ae("MemoryPersistence","Starting transaction:",e);const s=new _Q(this.Gr.next());return this.referenceDelegate.Zr(),i(s).next(a=>this.referenceDelegate.Xr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}ei(e,r){return de.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,r)))}}class _Q extends WY{constructor(e){super(),this.currentSequenceNumber=e}}class ZS{constructor(e){this.persistence=e,this.ti=new JS,this.ni=null}static ri(e){return new ZS(e)}get ii(){if(this.ni)return this.ni;throw He()}addReference(e,r,i){return this.ti.addReference(i,r),this.ii.delete(i.toString()),de.resolve()}removeReference(e,r,i){return this.ti.removeReference(i,r),this.ii.add(i.toString()),de.resolve()}markPotentiallyOrphaned(e,r){return this.ii.add(r.toString()),de.resolve()}removeTarget(e,r){this.ti.br(r.targetId).forEach(s=>this.ii.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(a=>this.ii.add(a.toString()))}).next(()=>i.removeTargetData(e,r))}Zr(){this.ni=new Set}Xr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return de.forEach(this.ii,i=>{const s=$e.fromPath(i);return this.si(e,s).next(a=>{a||r.removeEntry(s,Ge.min())})}).next(()=>(this.ni=null,r.apply(e)))}updateLimboDocument(e,r){return this.si(e,r).next(i=>{i?this.ii.delete(r.toString()):this.ii.add(r.toString())})}Jr(e){return 0}si(e,r){return de.or([()=>de.resolve(this.ti.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.ei(e,r)])}}class vm{constructor(e,r){this.persistence=e,this.oi=new Wo(i=>YY(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=lQ(this,r)}static ri(e,r){return new vm(e,r)}Zr(){}Xr(e){return de.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}nr(e){const r=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>r.next(s=>i+s))}sr(e){let r=0;return this.rr(e,i=>{r++}).next(()=>r)}rr(e,r){return de.forEach(this.oi,(i,s)=>this.ar(e,i,s).next(a=>a?de.resolve():r(s)))}removeTargets(e,r,i){return this.persistence.getTargetCache().removeTargets(e,r,i)}removeOrphanedDocuments(e,r){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.qr(e,o=>this.ar(e,o,r).next(l=>{l||(i++,a.removeEntry(o,Ge.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,r){return this.oi.set(r,e.currentSequenceNumber),de.resolve()}removeTarget(e,r){const i=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,r,i){return this.oi.set(i,e.currentSequenceNumber),de.resolve()}removeReference(e,r,i){return this.oi.set(i,e.currentSequenceNumber),de.resolve()}updateLimboDocument(e,r){return this.oi.set(r,e.currentSequenceNumber),de.resolve()}Jr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=vp(e.data.value)),r}ar(e,r,i){return de.or([()=>this.persistence.ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.oi.get(r);return de.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e,r,i,s){this.targetId=e,this.fromCache=r,this.Hi=i,this.Ji=s}static Yi(e,r){let i=it(),s=it();for(const a of r.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new eT(e,r.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wQ{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bQ{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return nW()?8:GY(Yn())>0?6:4}()}initialize(e,r){this.ns=e,this.indexManager=r,this.Zi=!0}getDocumentsMatchingQuery(e,r,i,s){const a={result:null};return this.rs(e,r).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ss(e,r,s,i).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new wQ;return this._s(e,r,o).next(l=>{if(a.result=l,this.Xi)return this.us(e,r,o,l.size)})}).next(()=>a.result)}us(e,r,i,s){return i.documentReadCount<this.es?(wl()<=rt.DEBUG&&Ae("QueryEngine","SDK will not create cache indexes for query:",bl(r),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),de.resolve()):(wl()<=rt.DEBUG&&Ae("QueryEngine","Query:",bl(r),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ts*s?(wl()<=rt.DEBUG&&Ae("QueryEngine","The SDK decides to create cache indexes for query:",bl(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Fi(r))):de.resolve())}rs(e,r){if(kN(r))return de.resolve(null);let i=Fi(r);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=EE(r,null,"F"),i=Fi(r)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const o=it(...a);return this.ns.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const c=this.cs(r,l);return this.ls(r,c,o,u.readTime)?this.rs(e,EE(r,null,"F")):this.hs(e,c,r,u)}))})))}ss(e,r,i,s){return kN(r)||s.isEqual(Ge.min())?de.resolve(null):this.ns.getDocuments(e,i).next(a=>{const o=this.cs(r,a);return this.ls(r,o,i,s)?de.resolve(null):(wl()<=rt.DEBUG&&Ae("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),bl(r)),this.hs(e,o,r,BY(s,Ld)).next(l=>l))})}cs(e,r){let i=new pn(A5(e));return r.forEach((s,a)=>{Ng(e,a)&&(i=i.add(a))}),i}ls(e,r,i,s){if(e.limit===null)return!1;if(i.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}_s(e,r,i){return wl()<=rt.DEBUG&&Ae("QueryEngine","Using full collection scan to execute query:",bl(r)),this.ns.getDocumentsMatchingQuery(e,r,La.min(),i)}hs(e,r,i,s){return this.ns.getDocumentsMatchingQuery(e,i,s).next(a=>(r.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tT="LocalStore",xQ=3e8;class EQ{constructor(e,r,i,s){this.persistence=e,this.Ps=r,this.serializer=s,this.Ts=new Wt(st),this.Is=new Wo(a=>HS(a),WS),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new dQ(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ts))}}function SQ(t,e,r,i){return new EQ(t,e,r,i)}async function e8(t,e){const r=Xe(t);return await r.persistence.runTransaction("Handle user change","readonly",i=>{let s;return r.mutationQueue.getAllMutationBatches(i).next(a=>(s=a,r.As(e),r.mutationQueue.getAllMutationBatches(i))).next(a=>{const o=[],l=[];let u=it();for(const c of s){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of a){l.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return r.localDocuments.getDocuments(i,u).next(c=>({Rs:c,removedBatchIds:o,addedBatchIds:l}))})})}function TQ(t,e){const r=Xe(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),a=r.ds.newChangeBuffer({trackRemovals:!0});return function(l,u,c,d){const h=c.batch,f=h.keys();let m=de.resolve();return f.forEach(v=>{m=m.next(()=>d.getEntry(u,v)).next(y=>{const b=c.docVersions.get(v);gt(b!==null),y.version.compareTo(b)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),d.addEntry(y)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(u,h))}(r,i,e,a).next(()=>a.apply(i)).next(()=>r.mutationQueue.performConsistencyCheck(i)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=it();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>r.localDocuments.getDocuments(i,s))})}function t8(t){const e=Xe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Hr.getLastRemoteSnapshotVersion(r))}function IQ(t,e){const r=Xe(t),i=e.snapshotVersion;let s=r.Ts;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=r.ds.newChangeBuffer({trackRemovals:!0});s=r.Ts;const l=[];e.targetChanges.forEach((d,h)=>{const f=s.get(h);if(!f)return;l.push(r.Hr.removeMatchingKeys(a,d.removedDocuments,h).next(()=>r.Hr.addMatchingKeys(a,d.addedDocuments,h)));let m=f.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(h)!==null?m=m.withResumeToken(Tn.EMPTY_BYTE_STRING,Ge.min()).withLastLimboFreeSnapshotVersion(Ge.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,i)),s=s.insert(h,m),function(y,b,_){return y.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=xQ?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(f,m,d)&&l.push(r.Hr.updateTargetData(a,m))});let u=ks(),c=it();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(a,d))}),l.push(CQ(a,o,e.documentUpdates).next(d=>{u=d.Vs,c=d.fs})),!i.isEqual(Ge.min())){const d=r.Hr.getLastRemoteSnapshotVersion(a).next(h=>r.Hr.setTargetsMetadata(a,a.currentSequenceNumber,i));l.push(d)}return de.waitFor(l).next(()=>o.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,u,c)).next(()=>u)}).then(a=>(r.Ts=s,a))}function CQ(t,e,r){let i=it(),s=it();return r.forEach(a=>i=i.add(a)),e.getEntries(t,i).next(a=>{let o=ks();return r.forEach((l,u)=>{const c=a.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Ge.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):Ae(tT,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Vs:o,fs:s}})}function kQ(t,e){const r=Xe(t);return r.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=BS),r.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function NQ(t,e){const r=Xe(t);return r.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return r.Hr.getTargetData(i,e).next(a=>a?(s=a,de.resolve(s)):r.Hr.allocateTargetId(i).next(o=>(s=new ha(e,o,"TargetPurposeListen",i.currentSequenceNumber),r.Hr.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=r.Ts.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Ts=r.Ts.insert(i.targetId,i),r.Is.set(e,i.targetId)),i})}async function kE(t,e,r){const i=Xe(t),s=i.Ts.get(e),a=r?"readwrite":"readwrite-primary";try{r||await i.persistence.runTransaction("Release target",a,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Fu(o))throw o;Ae(tT,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ts=i.Ts.remove(e),i.Is.delete(s.target)}function UN(t,e,r){const i=Xe(t);let s=Ge.min(),a=it();return i.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,d){const h=Xe(u),f=h.Is.get(d);return f!==void 0?de.resolve(h.Ts.get(f)):h.Hr.getTargetData(c,d)}(i,o,Fi(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(o,l.targetId).next(u=>{a=u})}).next(()=>i.Ps.getDocumentsMatchingQuery(o,e,r?s:Ge.min(),r?a:it())).next(l=>(AQ(i,mX(e),l),{documents:l,gs:a})))}function AQ(t,e,r){let i=t.Es.get(e)||Ge.min();r.forEach((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),t.Es.set(e,i)}class BN{constructor(){this.activeTargetIds=bX()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RQ{constructor(){this.ho=new BN,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,i){}addLocalQueryTarget(e,r=!0){return r&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,r,i){this.Po[e]=r}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new BN,Promise.resolve()}handleUserChange(e,r,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PQ{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN="ConnectivityMonitor";class qN{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){Ae(zN,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){Ae(zN,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rf=null;function NE(){return Rf===null?Rf=function(){return 268435456+Math.round(2147483648*Math.random())}():Rf++,"0x"+Rf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jy="RestConnection",DQ={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class MQ{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=r+"://"+e.host,this.yo=`projects/${i}/databases/${s}`,this.wo=this.databaseId.database===cm?`project_id=${i}`:`project_id=${i}&database_id=${s}`}So(e,r,i,s,a){const o=NE(),l=this.bo(e,r.toUriEncodedString());Ae(jy,`Sending RPC '${e}' ${o}:`,l,i);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,s,a),this.vo(e,l,u,i).then(c=>(Ae(jy,`Received RPC '${e}' ${o}: `,c),c),c=>{throw Mo(jy,`RPC '${e}' ${o} failed with error: `,c,"url: ",l,"request:",i),c})}Co(e,r,i,s,a,o){return this.So(e,r,i,s,a)}Do(e,r,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ju}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>e[a]=s),i&&i.headers.forEach((s,a)=>e[a]=s)}bo(e,r){const i=DQ[e];return`${this.po}/v1/${r}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LQ{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn="WebChannelConnection";class OQ extends MQ{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,r,i,s){const a=NE();return new Promise((o,l)=>{const u=new a5;u.setWithCredentials(!0),u.listenOnce(o5.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case gp.NO_ERROR:const d=u.getResponseJson();Ae(qn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(d)),o(d);break;case gp.TIMEOUT:Ae(qn,`RPC '${e}' ${a} timed out`),l(new Ve(fe.DEADLINE_EXCEEDED,"Request time out"));break;case gp.HTTP_ERROR:const h=u.getStatus();if(Ae(qn,`RPC '${e}' ${a} failed with status:`,h,"response text:",u.getResponseText()),h>0){let f=u.getResponseJson();Array.isArray(f)&&(f=f[0]);const m=f==null?void 0:f.error;if(m&&m.status&&m.message){const v=function(b){const _=b.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(_)>=0?_:fe.UNKNOWN}(m.status);l(new Ve(v,m.message))}else l(new Ve(fe.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new Ve(fe.UNAVAILABLE,"Connection failed."));break;default:He()}}finally{Ae(qn,`RPC '${e}' ${a} completed.`)}});const c=JSON.stringify(s);Ae(qn,`RPC '${e}' ${a} sending request:`,s),u.send(r,"POST",c,i,15)})}Wo(e,r,i){const s=NE(),a=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=c5(),l=u5(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,r,i),u.encodeInitMessageHeaders=!0;const d=a.join("");Ae(qn,`Creating RPC '${e}' stream ${s}: ${d}`,u);const h=o.createWebChannel(d,u);let f=!1,m=!1;const v=new LQ({Fo:b=>{m?Ae(qn,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(f||(Ae(qn,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),Ae(qn,`RPC '${e}' stream ${s} sending:`,b),h.send(b))},Mo:()=>h.close()}),y=(b,_,w)=>{b.listen(_,E=>{try{w(E)}catch(N){setTimeout(()=>{throw N},0)}})};return y(h,Lc.EventType.OPEN,()=>{m||(Ae(qn,`RPC '${e}' stream ${s} transport opened.`),v.Qo())}),y(h,Lc.EventType.CLOSE,()=>{m||(m=!0,Ae(qn,`RPC '${e}' stream ${s} transport closed`),v.Ko())}),y(h,Lc.EventType.ERROR,b=>{m||(m=!0,Mo(qn,`RPC '${e}' stream ${s} transport errored:`,b),v.Ko(new Ve(fe.UNAVAILABLE,"The operation could not be completed")))}),y(h,Lc.EventType.MESSAGE,b=>{var _;if(!m){const w=b.data[0];gt(!!w);const E=w,N=(E==null?void 0:E.error)||((_=E[0])===null||_===void 0?void 0:_.error);if(N){Ae(qn,`RPC '${e}' stream ${s} received error:`,N);const M=N.status;let O=function(T){const I=tn[T];if(I!==void 0)return B5(I)}(M),A=N.message;O===void 0&&(O=fe.INTERNAL,A="Unknown error status: "+M+" with message "+N.message),m=!0,v.Ko(new Ve(O,A)),h.close()}else Ae(qn,`RPC '${e}' stream ${s} received:`,w),v.Uo(w)}}),y(l,l5.STAT_EVENT,b=>{b.stat===yE.PROXY?Ae(qn,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===yE.NOPROXY&&Ae(qn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{v.$o()},0),v}}function Vy(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(t){return new $X(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n8{constructor(e,r,i=1e3,s=1.5,a=6e4){this.Ti=e,this.timerId=r,this.Go=i,this.zo=s,this.jo=a,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const r=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),s=Math.max(0,r-i);s>0&&Ae("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${r} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HN="PersistentStream";class r8{constructor(e,r,i,s,a,o,l,u){this.Ti=e,this.n_=i,this.r_=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new n8(e,r)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,r){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():r&&r.code===fe.RESOURCE_EXHAUSTED?(Cs(r.toString()),Cs("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):r&&r.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(r)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),r=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.i_===r&&this.V_(i,s)},i=>{e(()=>{const s=new Ve(fe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(s)})})}V_(e,r){const i=this.R_(this.i_);this.stream=this.f_(e,r),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{i(()=>this.m_(s))}),this.stream.onMessage(s=>{i(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return Ae(HN,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return r=>{this.Ti.enqueueAndForget(()=>this.i_===e?r():(Ae(HN,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class jQ extends r8{constructor(e,r,i,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,s,o),this.serializer=a}f_(e,r){return this.connection.Wo("Listen",e,r)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const r=zX(this.serializer,e),i=function(a){if(!("targetChange"in a))return Ge.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Ge.min():o.readTime?Ui(o.readTime):Ge.min()}(e);return this.listener.p_(r,i)}y_(e){const r={};r.database=CE(this.serializer),r.addTarget=function(a,o){let l;const u=o.target;if(l=xE(u)?{documents:WX(a,u)}:{query:GX(a,u).ht},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=H5(a,o.resumeToken);const c=SE(a,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ge.min())>0){l.readTime=gm(a,o.snapshotVersion.toTimestamp());const c=SE(a,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const i=YX(this.serializer,e);i&&(r.labels=i),this.I_(r)}w_(e){const r={};r.database=CE(this.serializer),r.removeTarget=e,this.I_(r)}}class VQ extends r8{constructor(e,r,i,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,s,o),this.serializer=a}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,r){return this.connection.Wo("Write",e,r)}g_(e){return gt(!!e.streamToken),this.lastStreamToken=e.streamToken,gt(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){gt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const r=HX(e.writeResults,e.commitTime),i=Ui(e.commitTime);return this.listener.v_(i,r)}C_(){const e={};e.database=CE(this.serializer),this.I_(e)}b_(e){const r={streamToken:this.lastStreamToken,writes:e.map(i=>qX(this.serializer,i))};this.I_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FQ{}class $Q extends FQ{constructor(e,r,i,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=i,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new Ve(fe.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,r,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.So(e,TE(r,i),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ve(fe.UNKNOWN,a.toString())})}Co(e,r,i,s,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Co(e,TE(r,i),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ve(fe.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class UQ{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Cs(r),this.N_=!1):Ae("OnlineStateTracker",r)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo="RemoteStore";class BQ{constructor(e,r,i,s,a){this.localStore=e,this.datastore=r,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=a,this.z_.To(o=>{i.enqueueAndForget(async()=>{Go(this)&&(Ae(Lo,"Restarting streams for network reachability change."),await async function(u){const c=Xe(u);c.W_.add(4),await yh(c),c.j_.set("Unknown"),c.W_.delete(4),await Mg(c)}(this))})}),this.j_=new UQ(i,s)}}async function Mg(t){if(Go(t))for(const e of t.G_)await e(!0)}async function yh(t){for(const e of t.G_)await e(!1)}function i8(t,e){const r=Xe(t);r.U_.has(e.targetId)||(r.U_.set(e.targetId,e),sT(r)?iT(r):$u(r).c_()&&rT(r,e))}function nT(t,e){const r=Xe(t),i=$u(r);r.U_.delete(e),i.c_()&&s8(r,e),r.U_.size===0&&(i.c_()?i.P_():Go(r)&&r.j_.set("Unknown"))}function rT(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ge.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}$u(t).y_(e)}function s8(t,e){t.H_.Ne(e),$u(t).w_(e)}function iT(t){t.H_=new OX({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.U_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),$u(t).start(),t.j_.B_()}function sT(t){return Go(t)&&!$u(t).u_()&&t.U_.size>0}function Go(t){return Xe(t).W_.size===0}function a8(t){t.H_=void 0}async function zQ(t){t.j_.set("Online")}async function qQ(t){t.U_.forEach((e,r)=>{rT(t,e)})}async function HQ(t,e){a8(t),sT(t)?(t.j_.q_(e),iT(t)):t.j_.set("Unknown")}async function WQ(t,e,r){if(t.j_.set("Online"),e instanceof q5&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.U_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.U_.delete(l),s.H_.removeTarget(l))}(t,e)}catch(i){Ae(Lo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await ym(t,i)}else if(e instanceof wp?t.H_.We(e):e instanceof z5?t.H_.Ze(e):t.H_.je(e),!r.isEqual(Ge.min()))try{const i=await t8(t.localStore);r.compareTo(i)>=0&&await function(a,o){const l=a.H_.ot(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=a.U_.get(c);d&&a.U_.set(c,d.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const d=a.U_.get(u);if(!d)return;a.U_.set(u,d.withResumeToken(Tn.EMPTY_BYTE_STRING,d.snapshotVersion)),s8(a,u);const h=new ha(d.target,u,c,d.sequenceNumber);rT(a,h)}),a.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(i){Ae(Lo,"Failed to raise snapshot:",i),await ym(t,i)}}async function ym(t,e,r){if(!Fu(e))throw e;t.W_.add(1),await yh(t),t.j_.set("Offline"),r||(r=()=>t8(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ae(Lo,"Retrying IndexedDB access"),await r(),t.W_.delete(1),await Mg(t)})}function o8(t,e){return e().catch(r=>ym(t,r,e))}async function Lg(t){const e=Xe(t),r=Fa(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:BS;for(;GQ(e);)try{const s=await kQ(e.localStore,i);if(s===null){e.K_.length===0&&r.P_();break}i=s.batchId,KQ(e,s)}catch(s){await ym(e,s)}l8(e)&&u8(e)}function GQ(t){return Go(t)&&t.K_.length<10}function KQ(t,e){t.K_.push(e);const r=Fa(t);r.c_()&&r.S_&&r.b_(e.mutations)}function l8(t){return Go(t)&&!Fa(t).u_()&&t.K_.length>0}function u8(t){Fa(t).start()}async function YQ(t){Fa(t).C_()}async function XQ(t){const e=Fa(t);for(const r of t.K_)e.b_(r.mutations)}async function QQ(t,e,r){const i=t.K_.shift(),s=YS.from(i,e,r);await o8(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Lg(t)}async function JQ(t,e){e&&Fa(t).S_&&await async function(i,s){if(function(o){return DX(o)&&o!==fe.ABORTED}(s.code)){const a=i.K_.shift();Fa(i).h_(),await o8(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Lg(i)}}(t,e),l8(t)&&u8(t)}async function WN(t,e){const r=Xe(t);r.asyncQueue.verifyOperationInProgress(),Ae(Lo,"RemoteStore received new credentials");const i=Go(r);r.W_.add(3),await yh(r),i&&r.j_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.W_.delete(3),await Mg(r)}async function ZQ(t,e){const r=Xe(t);e?(r.W_.delete(2),await Mg(r)):e||(r.W_.add(2),await yh(r),r.j_.set("Unknown"))}function $u(t){return t.J_||(t.J_=function(r,i,s){const a=Xe(r);return a.M_(),new jQ(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{xo:zQ.bind(null,t),No:qQ.bind(null,t),Lo:HQ.bind(null,t),p_:WQ.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),sT(t)?iT(t):t.j_.set("Unknown")):(await t.J_.stop(),a8(t))})),t.J_}function Fa(t){return t.Y_||(t.Y_=function(r,i,s){const a=Xe(r);return a.M_(),new VQ(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:YQ.bind(null,t),Lo:JQ.bind(null,t),D_:XQ.bind(null,t),v_:QQ.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await Lg(t)):(await t.Y_.stop(),t.K_.length>0&&(Ae(Lo,`Stopping write stream with ${t.K_.length} pending writes`),t.K_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aT{constructor(e,r,i,s,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new ys,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,i,s,a){const o=Date.now()+i,l=new aT(e,r,o,s,a);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ve(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function oT(t,e){if(Cs("AsyncQueue",`${e}: ${t}`),Fu(t))return new Ve(fe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{static emptySet(e){return new Yl(e.comparator)}constructor(e){this.comparator=e?(r,i)=>e(r,i)||$e.comparator(r.key,i.key):(r,i)=>$e.comparator(r.key,i.key),this.keyedMap=Oc(),this.sortedSet=new Wt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,i)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Yl)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const i=new Yl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=r,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(){this.Z_=new Wt($e.comparator)}track(e){const r=e.doc.key,i=this.Z_.get(r);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(r,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(r,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(r,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(r,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(r):e.type===1&&i.type===2?this.Z_=this.Z_.insert(r,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(r,{type:2,doc:e.doc}):He():this.Z_=this.Z_.insert(r,e)}X_(){const e=[];return this.Z_.inorderTraversal((r,i)=>{e.push(i)}),e}}class pu{constructor(e,r,i,s,a,o,l,u,c){this.query=e,this.docs=r,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,r,i,s,a){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new pu(e,r,Yl.emptySet(r),o,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,i=e.docChanges;if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==i[s].type||!r[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eJ{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class tJ{constructor(){this.queries=KN(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(r,i){const s=Xe(r),a=s.queries;s.queries=KN(),a.forEach((o,l)=>{for(const u of l.ta)u.onError(i)})})(this,new Ve(fe.ABORTED,"Firestore shutting down"))}}function KN(){return new Wo(t=>N5(t),kg)}async function c8(t,e){const r=Xe(t);let i=3;const s=e.query;let a=r.queries.get(s);a?!a.na()&&e.ra()&&(i=2):(a=new eJ,i=e.ra()?0:1);try{switch(i){case 0:a.ea=await r.onListen(s,!0);break;case 1:a.ea=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(o){const l=oT(o,`Initialization of query '${bl(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,a),a.ta.push(e),e.sa(r.onlineState),a.ea&&e.oa(a.ea)&&lT(r)}async function d8(t,e){const r=Xe(t),i=e.query;let s=3;const a=r.queries.get(i);if(a){const o=a.ta.indexOf(e);o>=0&&(a.ta.splice(o,1),a.ta.length===0?s=e.ra()?0:1:!a.na()&&e.ra()&&(s=2))}switch(s){case 0:return r.queries.delete(i),r.onUnlisten(i,!0);case 1:return r.queries.delete(i),r.onUnlisten(i,!1);case 2:return r.onLastRemoteStoreUnlisten(i);default:return}}function nJ(t,e){const r=Xe(t);let i=!1;for(const s of e){const a=s.query,o=r.queries.get(a);if(o){for(const l of o.ta)l.oa(s)&&(i=!0);o.ea=s}}i&&lT(r)}function rJ(t,e,r){const i=Xe(t),s=i.queries.get(e);if(s)for(const a of s.ta)a.onError(r);i.queries.delete(e)}function lT(t){t.ia.forEach(e=>{e.next()})}var AE,YN;(YN=AE||(AE={}))._a="default",YN.Cache="cache";class h8{constructor(e,r,i){this.query=e,this.aa=r,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new pu(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.ua?this.la(e)&&(this.aa.next(e),r=!0):this.ha(e,this.onlineState)&&(this.Pa(e),r=!0),this.ca=e,r}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let r=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),r=!0),r}ha(e,r){if(!e.fromCache||!this.ra())return!0;const i=r!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}la(e){if(e.docChanges.length>0)return!0;const r=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}Pa(e){e=pu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==AE.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f8{constructor(e){this.key=e}}class p8{constructor(e){this.key=e}}class iJ{constructor(e,r){this.query=e,this.fa=r,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=it(),this.mutatedKeys=it(),this.ya=A5(e),this.wa=new Yl(this.ya)}get Sa(){return this.fa}ba(e,r){const i=r?r.Da:new GN,s=r?r.wa:this.wa;let a=r?r.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const f=s.get(d),m=Ng(this.query,h)?h:null,v=!!f&&this.mutatedKeys.has(f.key),y=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let b=!1;f&&m?f.data.isEqual(m.data)?v!==y&&(i.track({type:3,doc:m}),b=!0):this.va(f,m)||(i.track({type:2,doc:m}),b=!0,(u&&this.ya(m,u)>0||c&&this.ya(m,c)<0)&&(l=!0)):!f&&m?(i.track({type:0,doc:m}),b=!0):f&&!m&&(i.track({type:1,doc:f}),b=!0,(u||c)&&(l=!0)),b&&(m?(o=o.add(m),a=y?a.add(d):a.delete(d)):(o=o.delete(d),a=a.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),a=a.delete(d.key),i.track({type:1,doc:d})}return{wa:o,Da:i,ls:l,mutatedKeys:a}}va(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,i,s){const a=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((d,h)=>function(m,v){const y=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return He()}};return y(m)-y(v)}(d.type,h.type)||this.ya(d.doc,h.doc)),this.Ca(i),s=s!=null&&s;const l=r&&!s?this.Fa():[],u=this.pa.size===0&&this.current&&!s?1:0,c=u!==this.ga;return this.ga=u,o.length!==0||c?{snapshot:new pu(this.query,e.wa,a,o,e.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new GN,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(r=>this.fa=this.fa.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.fa=this.fa.delete(r)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=it(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const r=[];return e.forEach(i=>{this.pa.has(i)||r.push(new p8(i))}),this.pa.forEach(i=>{e.has(i)||r.push(new f8(i))}),r}Oa(e){this.fa=e.gs,this.pa=it();const r=this.ba(e.documents);return this.applyChanges(r,!0)}Na(){return pu.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const uT="SyncEngine";class sJ{constructor(e,r,i){this.query=e,this.targetId=r,this.view=i}}class aJ{constructor(e){this.key=e,this.Ba=!1}}class oJ{constructor(e,r,i,s,a,o){this.localStore=e,this.remoteStore=r,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new Wo(l=>N5(l),kg),this.qa=new Map,this.Qa=new Set,this.$a=new Wt($e.comparator),this.Ka=new Map,this.Ua=new JS,this.Wa={},this.Ga=new Map,this.za=fu.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function lJ(t,e,r=!0){const i=w8(t);let s;const a=i.ka.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Na()):s=await m8(i,e,r,!0),s}async function uJ(t,e){const r=w8(t);await m8(r,e,!0,!1)}async function m8(t,e,r,i){const s=await NQ(t.localStore,Fi(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,r);let l;return i&&(l=await cJ(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&r&&i8(t.remoteStore,s),l}async function cJ(t,e,r,i,s){t.Ha=(h,f,m)=>async function(y,b,_,w){let E=b.view.ba(_);E.ls&&(E=await UN(y.localStore,b.query,!1).then(({documents:A})=>b.view.ba(A,E)));const N=w&&w.targetChanges.get(b.targetId),M=w&&w.targetMismatches.get(b.targetId)!=null,O=b.view.applyChanges(E,y.isPrimaryClient,N,M);return QN(y,b.targetId,O.Ma),O.snapshot}(t,h,f,m);const a=await UN(t.localStore,e,!0),o=new iJ(e,a.gs),l=o.ba(a.documents),u=vh.createSynthesizedTargetChangeForCurrentChange(r,i&&t.onlineState!=="Offline",s),c=o.applyChanges(l,t.isPrimaryClient,u);QN(t,r,c.Ma);const d=new sJ(e,r,o);return t.ka.set(e,d),t.qa.has(r)?t.qa.get(r).push(e):t.qa.set(r,[e]),c.snapshot}async function dJ(t,e,r){const i=Xe(t),s=i.ka.get(e),a=i.qa.get(s.targetId);if(a.length>1)return i.qa.set(s.targetId,a.filter(o=>!kg(o,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await kE(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),r&&nT(i.remoteStore,s.targetId),RE(i,s.targetId)}).catch(Vu)):(RE(i,s.targetId),await kE(i.localStore,s.targetId,!0))}async function hJ(t,e){const r=Xe(t),i=r.ka.get(e),s=r.qa.get(i.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(i.targetId),nT(r.remoteStore,i.targetId))}async function fJ(t,e,r){const i=wJ(t);try{const s=await function(o,l){const u=Xe(o),c=sn.now(),d=l.reduce((m,v)=>m.add(v.key),it());let h,f;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let v=ks(),y=it();return u.ds.getEntries(m,d).next(b=>{v=b,v.forEach((_,w)=>{w.isValidDocument()||(y=y.add(_))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,v)).next(b=>{h=b;const _=[];for(const w of l){const E=kX(w,h.get(w.key).overlayedDocument);E!=null&&_.push(new Ya(w.key,E,x5(E.value.mapValue),$i.exists(!0)))}return u.mutationQueue.addMutationBatch(m,c,_,l)}).next(b=>{f=b;const _=b.applyToLocalDocumentSet(h,y);return u.documentOverlayCache.saveOverlays(m,b.batchId,_)})}).then(()=>({batchId:f.batchId,changes:P5(h)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let c=o.Wa[o.currentUser.toKey()];c||(c=new Wt(st)),c=c.insert(l,u),o.Wa[o.currentUser.toKey()]=c}(i,s.batchId,r),await _h(i,s.changes),await Lg(i.remoteStore)}catch(s){const a=oT(s,"Failed to persist write");r.reject(a)}}async function g8(t,e){const r=Xe(t);try{const i=await IQ(r.localStore,e);e.targetChanges.forEach((s,a)=>{const o=r.Ka.get(a);o&&(gt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ba=!0:s.modifiedDocuments.size>0?gt(o.Ba):s.removedDocuments.size>0&&(gt(o.Ba),o.Ba=!1))}),await _h(r,i,e)}catch(i){await Vu(i)}}function XN(t,e,r){const i=Xe(t);if(i.isPrimaryClient&&r===0||!i.isPrimaryClient&&r===1){const s=[];i.ka.forEach((a,o)=>{const l=o.view.sa(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=Xe(o);u.onlineState=l;let c=!1;u.queries.forEach((d,h)=>{for(const f of h.ta)f.sa(l)&&(c=!0)}),c&&lT(u)}(i.eventManager,e),s.length&&i.La.p_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function pJ(t,e,r){const i=Xe(t);i.sharedClientState.updateQueryState(e,"rejected",r);const s=i.Ka.get(e),a=s&&s.key;if(a){let o=new Wt($e.comparator);o=o.insert(a,Gn.newNoDocument(a,Ge.min()));const l=it().add(a),u=new Pg(Ge.min(),new Map,new Wt(st),o,l);await g8(i,u),i.$a=i.$a.remove(a),i.Ka.delete(e),cT(i)}else await kE(i.localStore,e,!1).then(()=>RE(i,e,r)).catch(Vu)}async function mJ(t,e){const r=Xe(t),i=e.batch.batchId;try{const s=await TQ(r.localStore,e);y8(r,i,null),v8(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),await _h(r,s)}catch(s){await Vu(s)}}async function gJ(t,e,r){const i=Xe(t);try{const s=await function(o,l){const u=Xe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,l).next(h=>(gt(h!==null),d=h.keys(),u.mutationQueue.removeMutationBatch(c,h))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(i.localStore,e);y8(i,e,r),v8(i,e),i.sharedClientState.updateMutationState(e,"rejected",r),await _h(i,s)}catch(s){await Vu(s)}}function v8(t,e){(t.Ga.get(e)||[]).forEach(r=>{r.resolve()}),t.Ga.delete(e)}function y8(t,e,r){const i=Xe(t);let s=i.Wa[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(r?a.reject(r):a.resolve(),s=s.remove(e)),i.Wa[i.currentUser.toKey()]=s}}function RE(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.qa.get(e))t.ka.delete(i),r&&t.La.Ja(i,r);t.qa.delete(e),t.isPrimaryClient&&t.Ua.br(e).forEach(i=>{t.Ua.containsKey(i)||_8(t,i)})}function _8(t,e){t.Qa.delete(e.path.canonicalString());const r=t.$a.get(e);r!==null&&(nT(t.remoteStore,r),t.$a=t.$a.remove(e),t.Ka.delete(r),cT(t))}function QN(t,e,r){for(const i of r)i instanceof f8?(t.Ua.addReference(i.key,e),vJ(t,i)):i instanceof p8?(Ae(uT,"Document no longer in limbo: "+i.key),t.Ua.removeReference(i.key,e),t.Ua.containsKey(i.key)||_8(t,i.key)):He()}function vJ(t,e){const r=e.key,i=r.path.canonicalString();t.$a.get(r)||t.Qa.has(i)||(Ae(uT,"New document in limbo: "+r),t.Qa.add(i),cT(t))}function cT(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const r=new $e(Ft.fromString(e)),i=t.za.next();t.Ka.set(i,new aJ(r)),t.$a=t.$a.insert(r,i),i8(t.remoteStore,new ha(Fi(GS(r.path)),i,"TargetPurposeLimboResolution",Sg.ae))}}async function _h(t,e,r){const i=Xe(t),s=[],a=[],o=[];i.ka.isEmpty()||(i.ka.forEach((l,u)=>{o.push(i.Ha(u,e,r).then(c=>{var d;if((c||r)&&i.isPrimaryClient){const h=c?!c.fromCache:(d=r==null?void 0:r.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(c){s.push(c);const h=eT.Yi(u.targetId,c);a.push(h)}}))}),await Promise.all(o),i.La.p_(s),await async function(u,c){const d=Xe(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>de.forEach(c,f=>de.forEach(f.Hi,m=>d.persistence.referenceDelegate.addReference(h,f.targetId,m)).next(()=>de.forEach(f.Ji,m=>d.persistence.referenceDelegate.removeReference(h,f.targetId,m)))))}catch(h){if(!Fu(h))throw h;Ae(tT,"Failed to update sequence numbers: "+h)}for(const h of c){const f=h.targetId;if(!h.fromCache){const m=d.Ts.get(f),v=m.snapshotVersion,y=m.withLastLimboFreeSnapshotVersion(v);d.Ts=d.Ts.insert(f,y)}}}(i.localStore,a))}async function yJ(t,e){const r=Xe(t);if(!r.currentUser.isEqual(e)){Ae(uT,"User change. New user:",e.toKey());const i=await e8(r.localStore,e);r.currentUser=e,function(a,o){a.Ga.forEach(l=>{l.forEach(u=>{u.reject(new Ve(fe.CANCELLED,o))})}),a.Ga.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await _h(r,i.Rs)}}function _J(t,e){const r=Xe(t),i=r.Ka.get(e);if(i&&i.Ba)return it().add(i.key);{let s=it();const a=r.qa.get(e);if(!a)return s;for(const o of a){const l=r.ka.get(o);s=s.unionWith(l.view.Sa)}return s}}function w8(t){const e=Xe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=g8.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=_J.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pJ.bind(null,e),e.La.p_=nJ.bind(null,e.eventManager),e.La.Ja=rJ.bind(null,e.eventManager),e}function wJ(t){const e=Xe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=mJ.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=gJ.bind(null,e),e}class _m{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Dg(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,r){return null}nu(e,r){return null}eu(e){return SQ(this.persistence,new bQ,e.initialUser,this.serializer)}Xa(e){return new Z5(ZS.ri,this.serializer)}Za(e){return new RQ}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}_m.provider={build:()=>new _m};class bJ extends _m{constructor(e){super(),this.cacheSizeBytes=e}tu(e,r){gt(this.persistence.referenceDelegate instanceof vm);const i=this.persistence.referenceDelegate.garbageCollector;return new aQ(i,e.asyncQueue,r)}Xa(e){const r=this.cacheSizeBytes!==void 0?ur.withCacheSize(this.cacheSizeBytes):ur.DEFAULT;return new Z5(i=>vm.ri(i,r),this.serializer)}}class PE{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>XN(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=yJ.bind(null,this.syncEngine),await ZQ(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new tJ}()}createDatastore(e){const r=Dg(e.databaseInfo.databaseId),i=function(a){return new OQ(a)}(e.databaseInfo);return function(a,o,l,u){return new $Q(a,o,l,u)}(e.authCredentials,e.appCheckCredentials,i,r)}createRemoteStore(e){return function(i,s,a,o,l){return new BQ(i,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>XN(this.syncEngine,r,0),function(){return qN.D()?new qN:new PQ}())}createSyncEngine(e,r){return function(s,a,o,l,u,c,d){const h=new oJ(s,a,o,l,u,c);return d&&(h.ja=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const a=Xe(s);Ae(Lo,"RemoteStore shutting down."),a.W_.add(5),await yh(a),a.z_.shutdown(),a.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}PE.provider={build:()=>new PE};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b8{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Cs("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $a="FirestoreClient";class xJ{constructor(e,r,i,s,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=i,this.databaseInfo=s,this.user=Hn.UNAUTHENTICATED,this.clientId=US.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async o=>{Ae($a,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(Ae($a,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ys;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=oT(r,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Fy(t,e){t.asyncQueue.verifyOperationInProgress(),Ae($a,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let i=r.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await e8(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function JN(t,e){t.asyncQueue.verifyOperationInProgress();const r=await EJ(t);Ae($a,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(i=>WN(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>WN(e.remoteStore,s)),t._onlineComponents=e}async function EJ(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ae($a,"Using user provided OfflineComponentProvider");try{await Fy(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===fe.FAILED_PRECONDITION||s.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;Mo("Error using user provided cache. Falling back to memory cache: "+r),await Fy(t,new _m)}}else Ae($a,"Using default OfflineComponentProvider"),await Fy(t,new bJ(void 0));return t._offlineComponents}async function x8(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ae($a,"Using user provided OnlineComponentProvider"),await JN(t,t._uninitializedComponentsProvider._online)):(Ae($a,"Using default OnlineComponentProvider"),await JN(t,new PE))),t._onlineComponents}function SJ(t){return x8(t).then(e=>e.syncEngine)}async function E8(t){const e=await x8(t),r=e.eventManager;return r.onListen=lJ.bind(null,e.syncEngine),r.onUnlisten=dJ.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=uJ.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=hJ.bind(null,e.syncEngine),r}function TJ(t,e,r={}){const i=new ys;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,c){const d=new b8({next:f=>{d.su(),o.enqueueAndForget(()=>d8(a,h));const m=f.docs.has(l);!m&&f.fromCache?c.reject(new Ve(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&f.fromCache&&u&&u.source==="server"?c.reject(new Ve(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new h8(GS(l.path),d,{includeMetadataChanges:!0,Ta:!0});return c8(a,h)}(await E8(t),t.asyncQueue,e,r,i)),i.promise}function IJ(t,e,r={}){const i=new ys;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,c){const d=new b8({next:f=>{d.su(),o.enqueueAndForget(()=>d8(a,h)),f.fromCache&&u.source==="server"?c.reject(new Ve(fe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(f)},error:f=>c.reject(f)}),h=new h8(l,d,{includeMetadataChanges:!0,Ta:!0});return c8(a,h)}(await E8(t),t.asyncQueue,e,r,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S8(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T8(t,e,r){if(!r)throw new Ve(fe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function I8(t,e,r,i){if(e===!0&&i===!0)throw new Ve(fe.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function eA(t){if(!$e.isDocumentKey(t))throw new Ve(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function tA(t){if($e.isDocumentKey(t))throw new Ve(fe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function dT(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":He()}function Wi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ve(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=dT(t);throw new Ve(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C8="firestore.googleapis.com",nA=!0;class rA{constructor(e){var r,i;if(e.host===void 0){if(e.ssl!==void 0)throw new Ve(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=C8,this.ssl=nA}else this.host=e.host,this.ssl=(r=e.ssl)!==null&&r!==void 0?r:nA;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=J5;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<iQ)throw new Ve(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}I8("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=S8((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new Ve(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new Ve(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new Ve(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Og{constructor(e,r,i,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rA({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ve(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ve(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rA(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new h5;switch(i.type){case"firstParty":return new VY(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Ve(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const i=ZN.get(r);i&&(Ae("ComponentProvider","Removing Datastore"),ZN.delete(r),i.terminate())}(this),Promise.resolve()}}function k8(t,e,r,i={}){var s;const a=(t=Wi(t,Og))._getSettings(),o=`${e}:${r}`;if(a.host!==C8&&a.host!==o&&Mo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){let l,u;if(typeof i.mockUserToken=="string")l=i.mockUserToken,u=Hn.MOCK_USER;else{l=YH(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new Ve(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Hn(c)}t._authCredentials=new LY(new d5(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(e,r,i){this.converter=r,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new wh(this.firestore,e,this._query)}}class tr{constructor(e,r,i){this.converter=r,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new _s(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new tr(this.firestore,e,this._key)}}class _s extends wh{constructor(e,r,i){super(e,r,GS(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new tr(this.firestore,null,new $e(e))}withConverter(e){return new _s(this.firestore,e,this._path)}}function cn(t,e,...r){if(t=an(t),T8("collection","path",e),t instanceof Og){const i=Ft.fromString(e,...r);return tA(i),new _s(t,null,i)}{if(!(t instanceof tr||t instanceof _s))throw new Ve(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ft.fromString(e,...r));return tA(i),new _s(t.firestore,null,i)}}function Ns(t,e,...r){if(t=an(t),arguments.length===1&&(e=US.newId()),T8("doc","path",e),t instanceof Og){const i=Ft.fromString(e,...r);return eA(i),new tr(t,null,new $e(i))}{if(!(t instanceof tr||t instanceof _s))throw new Ve(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ft.fromString(e,...r));return eA(i),new tr(t.firestore,t instanceof _s?t.converter:null,new $e(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iA="AsyncQueue";class sA{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new n8(this,"async_queue_retry"),this.Su=()=>{const i=Vy();i&&Ae(iA,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=e;const r=Vy();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const r=Vy();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const r=new ys;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Fu(e))throw e;Ae(iA,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const r=this.bu.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(i);throw Cs("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.pu=!1,i))));return this.bu=r,r}enqueueAfterDelay(e,r,i){this.Du(),this.wu.indexOf(e)>-1&&(r=0);const s=aT.createAndSchedule(this,e,r,i,a=>this.Fu(a));return this.fu.push(s),s}Du(){this.gu&&He()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const r of this.fu)if(r.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((r,i)=>r.targetTimeMs-i.targetTimeMs);for(const r of this.fu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const r=this.fu.indexOf(e);this.fu.splice(r,1)}}class Uu extends Og{constructor(e,r,i,s){super(e,r,i,s),this.type="firestore",this._queue=new sA,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sA(e),this._firestoreClient=void 0,await e}}}function N8(t,e){const r=typeof t=="object"?t:AS(),i=typeof t=="string"?t:cm,s=_g(r,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=vj("firestore");a&&k8(s,...a)}return s}function jg(t){if(t._terminated)throw new Ve(fe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||CJ(t),t._firestoreClient}function CJ(t){var e,r,i;const s=t._freezeSettings(),a=function(l,u,c,d){return new JY(l,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,S8(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new xJ(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Oo(Tn.fromBase64String(e))}catch(r){throw new Ve(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Oo(Tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bh{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Ve(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new xn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Ve(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Ve(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return st(this._lat,e._lat)||st(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kJ=/^__.*__$/;class NJ{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return this.fieldMask!==null?new Ya(e,this.data,this.fieldMask,r,this.fieldTransforms):new gh(e,this.data,r,this.fieldTransforms)}}class A8{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return new Ya(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function R8(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw He()}}class hT{constructor(e,r,i,s,a,o){this.settings=e,this.databaseId=r,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Bu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new hT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var r;const i=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.ku({path:i,Qu:!1});return s.$u(e),s}Ku(e){var r;const i=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.ku({path:i,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return wm(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(R8(this.Lu)&&kJ.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class AJ{constructor(e,r,i){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=i||Dg(e)}ju(e,r,i,s=!1){return new hT({Lu:e,methodName:r,zu:i,path:xn.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function P8(t){const e=t._freezeSettings(),r=Dg(t._databaseId);return new AJ(t._databaseId,!!e.ignoreUndefinedProperties,r)}function RJ(t,e,r,i,s,a={}){const o=t.ju(a.merge||a.mergeFields?2:0,e,r,s);fT("Data must be an object, but it was:",o,i);const l=D8(i,o);let u,c;if(a.merge)u=new Cr(o.fieldMask),c=o.fieldTransforms;else if(a.mergeFields){const d=[];for(const h of a.mergeFields){const f=DE(e,h,r);if(!o.contains(f))throw new Ve(fe.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);L8(d,f)||d.push(f)}u=new Cr(d),c=o.fieldTransforms.filter(h=>u.covers(h.field))}else u=null,c=o.fieldTransforms;return new NJ(new dr(l),u,c)}class Ug extends Vg{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ug}}function PJ(t,e,r,i){const s=t.ju(1,e,r);fT("Data must be an object, but it was:",s,i);const a=[],o=dr.empty();Ka(i,(u,c)=>{const d=pT(e,u,r);c=an(c);const h=s.Ku(d);if(c instanceof Ug)a.push(d);else{const f=Bg(c,h);f!=null&&(a.push(d),o.set(d,f))}});const l=new Cr(a);return new A8(o,l,s.fieldTransforms)}function DJ(t,e,r,i,s,a){const o=t.ju(1,e,r),l=[DE(e,i,r)],u=[s];if(a.length%2!=0)throw new Ve(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<a.length;f+=2)l.push(DE(e,a[f])),u.push(a[f+1]);const c=[],d=dr.empty();for(let f=l.length-1;f>=0;--f)if(!L8(c,l[f])){const m=l[f];let v=u[f];v=an(v);const y=o.Ku(m);if(v instanceof Ug)c.push(m);else{const b=Bg(v,y);b!=null&&(c.push(m),d.set(m,b))}}const h=new Cr(c);return new A8(d,h,o.fieldTransforms)}function Bg(t,e){if(M8(t=an(t)))return fT("Unsupported field value:",e,t),D8(t,e);if(t instanceof Vg)return function(i,s){if(!R8(s.Lu))throw s.Wu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,s){const a=[];let o=0;for(const l of i){let u=Bg(l,s.Uu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(i,s){if((i=an(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return xX(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=sn.fromDate(i);return{timestampValue:gm(s.serializer,a)}}if(i instanceof sn){const a=new sn(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:gm(s.serializer,a)}}if(i instanceof Fg)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Oo)return{bytesValue:H5(s.serializer,i._byteString)};if(i instanceof tr){const a=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(a))throw s.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:QS(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof $g)return function(o,l){return{mapValue:{fields:{[w5]:{stringValue:b5},[dm]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Wu("VectorValues must only contain numeric values.");return KS(l.serializer,c)})}}}}}}(i,s);throw s.Wu(`Unsupported field value: ${dT(i)}`)}(t,e)}function D8(t,e){const r={};return p5(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ka(t,(i,s)=>{const a=Bg(s,e.qu(i));a!=null&&(r[i]=a)}),{mapValue:{fields:r}}}function M8(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof sn||t instanceof Fg||t instanceof Oo||t instanceof tr||t instanceof Vg||t instanceof $g)}function fT(t,e,r){if(!M8(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const i=dT(r);throw i==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+i)}}function DE(t,e,r){if((e=an(e))instanceof bh)return e._internalPath;if(typeof e=="string")return pT(t,e);throw wm("Field path arguments must be of type string or ",t,!1,void 0,r)}const MJ=new RegExp("[~\\*/\\[\\]]");function pT(t,e,r){if(e.search(MJ)>=0)throw wm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new bh(...e.split("."))._internalPath}catch{throw wm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function wm(t,e,r,i,s){const a=i&&!i.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${i}`),o&&(u+=` in document ${s}`),u+=")"),new Ve(fe.INVALID_ARGUMENT,l+t+u)}function L8(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O8{constructor(e,r,i,s,a){this._firestore=e,this._userDataWriter=r,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new tr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new LJ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(j8("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class LJ extends O8{data(){return super.data()}}function j8(t,e){return typeof e=="string"?pT(t,e):e instanceof bh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OJ(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ve(fe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class V8{convertValue(e,r="none"){switch(Va(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Qt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ja(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw He()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const i={};return Ka(e,(s,a)=>{i[s]=this.convertValue(a,r)}),i}convertVectorValue(e){var r,i,s;const a=(s=(i=(r=e.fields)===null||r===void 0?void 0:r[dm].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(o=>Qt(o.doubleValue));return new $g(a)}convertGeoPoint(e){return new Fg(Qt(e.latitude),Qt(e.longitude))}convertArray(e,r){return(e.values||[]).map(i=>this.convertValue(i,r))}convertServerTimestamp(e,r){switch(r){case"previous":const i=Ig(e);return i==null?null:this.convertValue(i,r);case"estimate":return this.convertTimestamp(Od(e));default:return null}}convertTimestamp(e){const r=Oa(e);return new sn(r.seconds,r.nanos)}convertDocumentKey(e,r){const i=Ft.fromString(e);gt(Q5(i));const s=new cu(i.get(1),i.get(3)),a=new $e(i.popFirst(5));return s.isEqual(r)||Cs(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jJ(t,e,r){let i;return i=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class mT extends O8{constructor(e,r,i,s,a,o){super(e,r,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new cd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const i=this._document.data.field(j8("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}}}class cd extends mT{data(e={}){return super.data(e)}}class F8{constructor(e,r,i,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new Vl(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(i=>{e.call(r,new cd(this._firestore,this._userDataWriter,i.key,i,new Vl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ve(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new cd(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Vl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const u=new cd(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Vl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,d=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),d=o.indexOf(l.doc.key)),{type:VJ(l.type),doc:u,oldIndex:c,newIndex:d}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function VJ(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return He()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(t){t=Wi(t,tr);const e=Wi(t.firestore,Uu);return TJ(jg(e),t._key).then(r=>$J(e,t,r))}class $8 extends V8{constructor(e){super(),this.firestore=e}convertBytes(e){return new Oo(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new tr(this.firestore,null,r)}}function dn(t){t=Wi(t,wh);const e=Wi(t.firestore,Uu),r=jg(e),i=new $8(e);return OJ(t._query),IJ(r,t._query).then(s=>new F8(e,i,t,s))}function FJ(t,e,r){t=Wi(t,tr);const i=Wi(t.firestore,Uu),s=jJ(t.converter,e,r);return gT(i,[RJ(P8(i),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,$i.none())])}function bm(t,e,r,...i){t=Wi(t,tr);const s=Wi(t.firestore,Uu),a=P8(s);let o;return o=typeof(e=an(e))=="string"||e instanceof bh?DJ(a,"updateDoc",t._key,e,r,i):PJ(a,"updateDoc",t._key,e),gT(s,[o.toMutation(t._key,$i.exists(!0))])}function gT(t,e){return function(i,s){const a=new ys;return i.asyncQueue.enqueueAndForget(async()=>fJ(await SJ(i),s,a)),a.promise}(jg(t),e)}function $J(t,e,r){const i=r.docs.get(e._key),s=new $8(t);return new mT(t,s,e._key,i,new Vl(r.hasPendingWrites,r.fromCache),e.converter)}(function(e,r=!0){(function(s){ju=s})(Mu),Ro(new Ma("firestore",(i,{instanceIdentifier:s,options:a})=>{const o=i.getProvider("app").getImmediate(),l=new Uu(new OY(i.getProvider("auth-internal")),new FY(o,i.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Ve(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new cu(c.options.projectId,d)}(o,s),o);return a=Object.assign({useFetchStreams:r},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),Oi(hN,fN,e),Oi(hN,fN,"esm2017")})();const UJ=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:V8,Bytes:Oo,CollectionReference:_s,DocumentReference:tr,DocumentSnapshot:mT,FieldPath:bh,FieldValue:Vg,Firestore:Uu,FirestoreError:Ve,GeoPoint:Fg,Query:wh,QueryDocumentSnapshot:cd,QuerySnapshot:F8,SnapshotMetadata:Vl,Timestamp:sn,VectorValue:$g,_AutoId:US,_ByteString:Tn,_DatabaseId:cu,_DocumentKey:$e,_EmptyAuthCredentialsProvider:h5,_FieldPath:xn,_cast:Wi,_logWarn:Mo,_validateIsNotUsedTogether:I8,collection:cn,connectFirestoreEmulator:k8,doc:Ns,ensureFirestoreConfigured:jg,executeWrite:gT,getDoc:mu,getDocs:dn,getFirestore:N8,setDoc:FJ,updateDoc:bm},Symbol.toStringTag,{value:"Module"})),BJ={apiKey:"AIzaSyDGolxlZNoEzk7z46ZMtSk9YsP32MlH45Q",authDomain:"llm-hyper-audio.firebaseapp.com",projectId:"llm-hyper-audio",storageBucket:"llm-hyper-audio.firebasestorage.app",messagingSenderId:"530304773274",appId:"1:530304773274:web:1764f58974d6c2fd060323",measurementId:"G-HFEKE65YC6"},U8=xj(BJ),Ct=N8(U8),$y=RY(U8),B8=S.createContext();function xh(){const t=S.useContext(B8);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function zJ({children:t}){const[e,r]=S.useState(null),[i,s]=S.useState(!0),[a,o]=S.useState(null);S.useEffect(()=>{console.log("Setting up auth listener");const d=_K($y,h=>{console.log("Auth state changed:",h?h.email:"No user"),r(h),s(!1)},h=>{console.error("Auth state change error:",h),o(h.message),s(!1)});return()=>d()},[]);const c={user:e,loading:i,error:a,login:async(d,h)=>{try{o(null),console.log("Attempting login with:",d);const f=await gK($y,d,h);return r(f.user),f.user}catch(f){throw console.error("Login error:",f),o(f.message),f}},logout:async()=>{try{o(null),console.log("Logging out user"),await wK($y),r(null)}catch(d){throw console.error("Logout error:",d),o(d.message),d}},isAuthenticated:!!e};return p.jsx(B8.Provider,{value:c,children:t})}/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qJ=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),z8=(...t)=>t.filter((e,r,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var HJ={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WJ=S.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:s="",children:a,iconNode:o,...l},u)=>S.createElement("svg",{ref:u,...HJ,width:e,height:e,stroke:t,strokeWidth:i?Number(r)*24/Number(e):r,className:z8("lucide",s),...l},[...o.map(([c,d])=>S.createElement(c,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mn=(t,e)=>{const r=S.forwardRef(({className:i,...s},a)=>S.createElement(WJ,{ref:a,iconNode:e,className:z8(`lucide-${qJ(t)}`,i),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GJ=[["path",{d:"M8 3H7a2 2 0 0 0-2 2v5a2 2 0 0 1-2 2 2 2 0 0 1 2 2v5c0 1.1.9 2 2 2h1",key:"ezmyqa"}],["path",{d:"M16 21h1a2 2 0 0 0 2-2v-5c0-1.1.9-2 2-2a2 2 0 0 1-2-2V5a2 2 0 0 0-2-2h-1",key:"e1hn23"}]],KJ=mn("Braces",GJ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YJ=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],XJ=mn("ChartNoAxesColumnIncreasing",YJ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QJ=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],JJ=mn("ChevronDown",QJ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZJ=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],eZ=mn("ChevronUp",ZJ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],q8=mn("Clock",tZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nZ=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],H8=mn("FileText",nZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rZ=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],iZ=mn("House",rZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],aZ=mn("Info",sZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oZ=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],lZ=mn("List",oZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uZ=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],cZ=mn("LogOut",uZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dZ=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],hZ=mn("Map",dZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fZ=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],pZ=mn("Menu",fZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mZ=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],gZ=mn("Mic",mZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vZ=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],vT=mn("Search",vZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yZ=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],_Z=mn("SquarePen",yZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wZ=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],W8=mn("Tag",wZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bZ=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],xZ=mn("Video",bZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EZ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],SZ=mn("X",EZ);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TZ=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],IZ=mn("Zap",TZ);function CZ(){const{user:t,logout:e}=xh(),r=ri(),[i,s]=S.useState(!1),a=()=>{s(!i)},o=[{path:"/",label:"Home",icon:p.jsx(iZ,{size:20})},{path:"/content-directory",label:"Directory",icon:p.jsx(lZ,{size:20})},{path:"/transcript-summary",label:"Summarizer",icon:p.jsx(H8,{size:20})}],l=u=>r.pathname===u;return p.jsxs(p.Fragment,{children:[p.jsx("button",{className:"fixed top-4 left-4 w-12 h-12 rounded-lg bg-white border-none shadow-sm cursor-pointer flex justify-center items-center text-gray-600 z-[51] transition-colors duration-200 ease-in-out",onClick:a,children:p.jsx(pZ,{size:24})}),p.jsx("div",{className:`fixed inset-0 z-[49] transition-opacity duration-300 ease-in-out ${i?"pointer-events-auto":"pointer-events-none"}`,onClick:a}),p.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-white border-r border-gray-200 shadow-lg transition-transform duration-300 ease-in-out z-50 flex flex-col p-4 ${i?"translate-x-0":"-translate-x-full"}`,children:[p.jsx("button",{className:"absolute top-4 right-4 p-2 rounded-md bg-gray-100 border-none cursor-pointer flex justify-center items-center text-gray-600",onClick:a,children:p.jsx(SZ,{size:20})}),p.jsxs("div",{className:"flex-1 overflow-auto mt-10",children:[p.jsxs("div",{children:[o.map(u=>p.jsxs(id,{to:u.path,className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l(u.path)?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[p.jsx("span",{className:"flex mr-3 text-inherit",children:u.icon}),p.jsx("span",{children:u.label})]},u.path)),p.jsxs(id,{to:"/search",className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l("/search")?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[p.jsx("span",{className:"flex mr-3 text-inherit",children:p.jsx(vT,{size:20})}),p.jsx("span",{children:"Search"})]}),p.jsxs(id,{to:"/semantic-search",className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l("/semantic-search")?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[p.jsx("span",{className:"flex mr-3 text-inherit",children:p.jsx(KJ,{size:20})}),p.jsx("span",{children:"Semantic Search"})]})]}),p.jsx("div",{className:"h-px bg-gray-200 my-4"}),p.jsx("div",{children:t&&p.jsxs("button",{onClick:()=>{e(),s(!1)},className:"flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out text-gray-500 font-normal w-full text-left border-none bg-transparent",children:[p.jsx("span",{className:"flex mr-3 text-inherit",children:p.jsx(cZ,{size:20})}),p.jsx("span",{children:"Logout"})]})})]})]})]})}function Ci({children:t}){const{loading:e}=xh();return e?p.jsx("div",{className:"min-h-screen flex items-center justify-center",children:p.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):p.jsxs("div",{className:"flex flex-row h-screen w-full overflow-hidden bg-white",children:[p.jsx("div",{className:"flex-none w-16",children:p.jsx(CZ,{})}),p.jsx("div",{className:"flex-grow overflow-y-auto",children:p.jsx("main",{className:"py-6 px-6 w-full",children:t})})]})}function ki({children:t}){const{user:e,loading:r}=xh(),i=ri();return r?p.jsx("div",{className:"flex justify-center items-center min-h-screen",children:p.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):e?t:p.jsx(lj,{to:"/login",state:{from:i},replace:!0})}var G8={exports:{}},kZ="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",NZ=kZ,AZ=NZ;function K8(){}function Y8(){}Y8.resetWarningCache=K8;var RZ=function(){function t(i,s,a,o,l,u){if(u!==AZ){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:Y8,resetWarningCache:K8};return r.PropTypes=r,r};G8.exports=RZ();var PZ=G8.exports;const Et=za(PZ);var X8={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var a="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(a=s(a,i(l)))}return a}function i(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return r.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var o="";for(var l in a)e.call(a,l)&&a[l]&&(o=s(o,l));return o}function s(a,o){return o?a?a+" "+o:a+o:a}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(X8);var DZ=X8.exports;const Q8=za(DZ);var MZ=["top","left","transform","className","children","innerRef"];function ME(){return ME=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ME.apply(this,arguments)}function LZ(t,e){if(t==null)return{};var r={},i=Object.keys(t),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function gu(t){var e=t.top,r=e===void 0?0:e,i=t.left,s=i===void 0?0:i,a=t.transform,o=t.className,l=t.children,u=t.innerRef,c=LZ(t,MZ);return te.createElement("g",ME({ref:u,className:Q8("visx-group",o),transform:a||"translate("+s+", "+r+")"},c),l)}gu.propTypes={top:Et.number,left:Et.number,transform:Et.string,className:Et.string,children:Et.node,innerRef:Et.oneOfType([Et.string,Et.func,Et.object])};var OZ=Array.prototype.slice;function jZ(t){for(var e=t.length,r,i;e;)i=Math.random()*e--|0,r=t[e],t[e]=t[i],t[i]=r;return t}function VZ(t){for(var e=0,r=(t=jZ(OZ.call(t))).length,i=[],s,a;e<r;)s=t[e],a&&J8(a,s)?++e:(a=$Z(i=FZ(i,s)),e=0);return a}function FZ(t,e){var r,i;if(Uy(e,t))return[e];for(r=0;r<t.length;++r)if(Pf(e,t[r])&&Uy(Vc(t[r],e),t))return[t[r],e];for(r=0;r<t.length-1;++r)for(i=r+1;i<t.length;++i)if(Pf(Vc(t[r],t[i]),e)&&Pf(Vc(t[r],e),t[i])&&Pf(Vc(t[i],e),t[r])&&Uy(Z8(t[r],t[i],e),t))return[t[r],t[i],e];throw new Error}function Pf(t,e){var r=t.r-e.r,i=e.x-t.x,s=e.y-t.y;return r<0||r*r<i*i+s*s}function J8(t,e){var r=t.r-e.r+1e-6,i=e.x-t.x,s=e.y-t.y;return r>0&&r*r>i*i+s*s}function Uy(t,e){for(var r=0;r<e.length;++r)if(!J8(t,e[r]))return!1;return!0}function $Z(t){switch(t.length){case 1:return UZ(t[0]);case 2:return Vc(t[0],t[1]);case 3:return Z8(t[0],t[1],t[2])}}function UZ(t){return{x:t.x,y:t.y,r:t.r}}function Vc(t,e){var r=t.x,i=t.y,s=t.r,a=e.x,o=e.y,l=e.r,u=a-r,c=o-i,d=l-s,h=Math.sqrt(u*u+c*c);return{x:(r+a+u/h*d)/2,y:(i+o+c/h*d)/2,r:(h+s+l)/2}}function Z8(t,e,r){var i=t.x,s=t.y,a=t.r,o=e.x,l=e.y,u=e.r,c=r.x,d=r.y,h=r.r,f=i-o,m=i-c,v=s-l,y=s-d,b=u-a,_=h-a,w=i*i+s*s-a*a,E=w-o*o-l*l+u*u,N=w-c*c-d*d+h*h,M=m*v-f*y,O=(v*N-y*E)/(M*2)-i,A=(y*b-v*_)/M,D=(m*E-f*N)/(M*2)-s,T=(f*_-m*b)/M,I=A*A+T*T-1,x=2*(a+O*A+D*T),R=O*O+D*D-a*a,P=-(I?(x+Math.sqrt(x*x-4*I*R))/(2*I):R/x);return{x:i+O+A*P,y:s+D+T*P,r:P}}function aA(t,e,r){var i=t.x-e.x,s,a,o=t.y-e.y,l,u,c=i*i+o*o;c?(a=e.r+r.r,a*=a,u=t.r+r.r,u*=u,a>u?(s=(c+u-a)/(2*c),l=Math.sqrt(Math.max(0,u/c-s*s)),r.x=t.x-s*i-l*o,r.y=t.y-s*o+l*i):(s=(c+a-u)/(2*c),l=Math.sqrt(Math.max(0,a/c-s*s)),r.x=e.x+s*i-l*o,r.y=e.y+s*o+l*i)):(r.x=e.x+r.r,r.y=e.y)}function oA(t,e){var r=t.r+e.r-1e-6,i=e.x-t.x,s=e.y-t.y;return r>0&&r*r>i*i+s*s}function lA(t){var e=t._,r=t.next._,i=e.r+r.r,s=(e.x*r.r+r.x*e.r)/i,a=(e.y*r.r+r.y*e.r)/i;return s*s+a*a}function Df(t){this._=t,this.next=null,this.previous=null}function BZ(t){if(!(s=t.length))return 0;var e,r,i,s,a,o,l,u,c,d,h;if(e=t[0],e.x=0,e.y=0,!(s>1))return e.r;if(r=t[1],e.x=-r.r,r.x=e.r,r.y=0,!(s>2))return e.r+r.r;aA(r,e,i=t[2]),e=new Df(e),r=new Df(r),i=new Df(i),e.next=i.previous=r,r.next=e.previous=i,i.next=r.previous=e;e:for(l=3;l<s;++l){aA(e._,r._,i=t[l]),i=new Df(i),u=r.next,c=e.previous,d=r._.r,h=e._.r;do if(d<=h){if(oA(u._,i._)){r=u,e.next=r,r.previous=e,--l;continue e}d+=u._.r,u=u.next}else{if(oA(c._,i._)){e=c,e.next=r,r.previous=e,--l;continue e}h+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=e,i.next=r,e.next=r.previous=r=i,a=lA(e);(i=i.next)!==r;)(o=lA(i))<a&&(e=i,a=o);r=e.next}for(e=[r._],i=r;(i=i.next)!==r;)e.push(i._);for(i=VZ(e),l=0;l<s;++l)e=t[l],e.x-=i.x,e.y-=i.y;return i.r}function zZ(t){return t==null?null:qZ(t)}function qZ(t){if(typeof t!="function")throw new Error;return t}function uA(){return 0}function HZ(t){return function(){return t}}function WZ(t){return Math.sqrt(t.value)}function GZ(){var t=null,e=1,r=1,i=uA;function s(a){return a.x=e/2,a.y=r/2,t?a.eachBefore(cA(t)).eachAfter(By(i,.5)).eachBefore(dA(1)):a.eachBefore(cA(WZ)).eachAfter(By(uA,1)).eachAfter(By(i,a.r/Math.min(e,r))).eachBefore(dA(Math.min(e,r)/(2*a.r))),a}return s.radius=function(a){return arguments.length?(t=zZ(a),s):t},s.size=function(a){return arguments.length?(e=+a[0],r=+a[1],s):[e,r]},s.padding=function(a){return arguments.length?(i=typeof a=="function"?a:HZ(+a),s):i},s}function cA(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function By(t,e){return function(r){if(i=r.children){var i,s,a=i.length,o=t(r)*e||0,l;if(o)for(s=0;s<a;++s)i[s].r+=o;if(l=BZ(i),o)for(s=0;s<a;++s)i[s].r-=o;r.r=l+o}}}function dA(t){return function(e){var r=e.parent;e.r*=t,r&&(e.x=r.x+t*e.x,e.y=r.y+t*e.y)}}function eV(t){var e=t.node,r=e===void 0?{x:0,y:0,r:15}:e;return te.createElement("circle",{cx:r.x,cy:r.y,r:r.r||15,fill:"#21D4FD"})}eV.propTypes={node:Et.shape({x:Et.number.isRequired,y:Et.number.isRequired,r:Et.number})};function yT(t){var e=t.top,r=t.left,i=t.className,s=t.root,a=t.radius,o=t.size,l=t.padding,u=t.children,c=t.nodeComponent,d=c===void 0?eV:c,h=GZ();o&&h.size(o),a!==void 0&&h.radius(a),l&&h.padding(l);var f=h(s);return u?te.createElement(te.Fragment,null,u(f)):te.createElement(gu,{top:e,left:r,className:Q8("visx-pack",i)},d&&f.descendants().map(function(m,v){return te.createElement(gu,{key:"pack-node-"+v},te.createElement(d,{node:m}))}))}yT.propTypes={children:Et.func,top:Et.number,left:Et.number,className:Et.string,radius:Et.func,padding:Et.number};function KZ(t){var e=0,r=t.children,i=r&&r.length;if(!i)e=1;else for(;--i>=0;)e+=r[i].value;t.value=e}function YZ(){return this.eachAfter(KZ)}function XZ(t,e){let r=-1;for(const i of this)t.call(e,i,++r,this);return this}function QZ(t,e){for(var r=this,i=[r],s,a,o=-1;r=i.pop();)if(t.call(e,r,++o,this),s=r.children)for(a=s.length-1;a>=0;--a)i.push(s[a]);return this}function JZ(t,e){for(var r=this,i=[r],s=[],a,o,l,u=-1;r=i.pop();)if(s.push(r),a=r.children)for(o=0,l=a.length;o<l;++o)i.push(a[o]);for(;r=s.pop();)t.call(e,r,++u,this);return this}function ZZ(t,e){let r=-1;for(const i of this)if(t.call(e,i,++r,this))return i}function eee(t){return this.eachAfter(function(e){for(var r=+t(e.data)||0,i=e.children,s=i&&i.length;--s>=0;)r+=i[s].value;e.value=r})}function tee(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function nee(t){for(var e=this,r=ree(e,t),i=[e];e!==r;)e=e.parent,i.push(e);for(var s=i.length;t!==r;)i.splice(s,0,t),t=t.parent;return i}function ree(t,e){if(t===e)return t;var r=t.ancestors(),i=e.ancestors(),s=null;for(t=r.pop(),e=i.pop();t===e;)s=t,t=r.pop(),e=i.pop();return s}function iee(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function see(){return Array.from(this)}function aee(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function oee(){var t=this,e=[];return t.each(function(r){r!==t&&e.push({source:r.parent,target:r})}),e}function*lee(){var t=this,e,r=[t],i,s,a;do for(e=r.reverse(),r=[];t=e.pop();)if(yield t,i=t.children)for(s=0,a=i.length;s<a;++s)r.push(i[s]);while(r.length)}function zg(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=dee)):e===void 0&&(e=cee);for(var r=new $d(t),i,s=[r],a,o,l,u;i=s.pop();)if((o=e(i.data))&&(u=(o=Array.from(o)).length))for(i.children=o,l=u-1;l>=0;--l)s.push(a=o[l]=new $d(o[l])),a.parent=i,a.depth=i.depth+1;return r.eachBefore(tV)}function uee(){return zg(this).eachBefore(hee)}function cee(t){return t.children}function dee(t){return Array.isArray(t)?t[1]:null}function hee(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function tV(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function $d(t){this.data=t,this.depth=this.height=0,this.parent=null}$d.prototype=zg.prototype={constructor:$d,count:YZ,each:XZ,eachAfter:JZ,eachBefore:QZ,find:ZZ,sum:eee,sort:tee,path:nee,ancestors:iee,descendants:see,leaves:aee,links:oee,copy:uee,[Symbol.iterator]:lee};function zy(t){return t==null?null:fee(t)}function fee(t){if(typeof t!="function")throw new Error;return t}var pee={depth:-1},hA={},qy={};function mee(t){return t.id}function gee(t){return t.parentId}function vee(){var t=mee,e=gee,r;function i(s){var a=Array.from(s),o=t,l=e,u,c,d,h,f,m,v,y,b=new Map;if(r!=null){const _=a.map((N,M)=>yee(r(N,M,s))),w=_.map(fA),E=new Set(_).add("");for(const N of w)E.has(N)||(E.add(N),_.push(N),w.push(fA(N)),a.push(qy));o=(N,M)=>_[M],l=(N,M)=>w[M]}for(d=0,u=a.length;d<u;++d)c=a[d],m=a[d]=new $d(c),(v=o(c,d,s))!=null&&(v+="")&&(y=m.id=v,b.set(y,b.has(y)?hA:m)),(v=l(c,d,s))!=null&&(v+="")&&(m.parent=v);for(d=0;d<u;++d)if(m=a[d],v=m.parent){if(f=b.get(v),!f)throw new Error("missing: "+v);if(f===hA)throw new Error("ambiguous: "+v);f.children?f.children.push(m):f.children=[m],m.parent=f}else{if(h)throw new Error("multiple roots");h=m}if(!h)throw new Error("no root");if(r!=null){for(;h.data===qy&&h.children.length===1;)h=h.children[0],--u;for(let _=a.length-1;_>=0&&(m=a[_],m.data===qy);--_)m.data=null}if(h.parent=pee,h.eachBefore(function(_){_.depth=_.parent.depth+1,--u}).eachBefore(tV),h.parent=null,u>0)throw new Error("cycle");return h}return i.id=function(s){return arguments.length?(t=zy(s),i):t},i.parentId=function(s){return arguments.length?(e=zy(s),i):e},i.path=function(s){return arguments.length?(r=zy(s),i):r},i}function yee(t){t=`${t}`;let e=t.length;return LE(t,e-1)&&!LE(t,e-2)&&(t=t.slice(0,-1)),t[0]==="/"?t:`/${t}`}function fA(t){let e=t.length;if(e<2)return"";for(;--e>1&&!LE(t,e););return t.slice(0,e)}function LE(t,e){if(t[e]==="/"){let r=0;for(;e>0&&t[--e]==="\\";)++r;if(!(r&1))return!0}return!1}var pA=function(){function t(r){var i=r.x,s=i===void 0?0:i,a=r.y,o=a===void 0?0:a;this.x=0,this.y=0,this.x=s,this.y=o}var e=t.prototype;return e.value=function(){return{x:this.x,y:this.y}},e.toArray=function(){return[this.x,this.y]},t}();function _ee(t){return!!t&&t instanceof Element}function wee(t){return!!t&&(t instanceof SVGElement||"ownerSVGElement"in t)}function bee(t){return!!t&&"createSVGPoint"in t}function xee(t){return!!t&&"getScreenCTM"in t}function Eee(t){return!!t&&"changedTouches"in t}function See(t){return!!t&&"clientX"in t}function Tee(t){return!!t&&(t instanceof Event||"nativeEvent"in t&&t.nativeEvent instanceof Event)}function dd(){return dd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},dd.apply(this,arguments)}var Hy={x:0,y:0};function Iee(t){if(!t)return dd({},Hy);if(Eee(t))return t.changedTouches.length>0?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:dd({},Hy);if(See(t))return{x:t.clientX,y:t.clientY};var e=t==null?void 0:t.target,r=e&&"getBoundingClientRect"in e?e.getBoundingClientRect():null;return r?{x:r.x+r.width/2,y:r.y+r.height/2}:dd({},Hy)}function mA(t,e){if(!t||!e)return null;var r=Iee(e),i=wee(t)?t.ownerSVGElement:t,s=xee(i)?i.getScreenCTM():null;if(bee(i)&&s){var a=i.createSVGPoint();return a.x=r.x,a.y=r.y,a=a.matrixTransform(s.inverse()),new pA({x:a.x,y:a.y})}var o=t.getBoundingClientRect();return new pA({x:r.x-o.left-t.clientLeft,y:r.y-o.top-t.clientTop})}function Wy(t,e){if(_ee(t)&&e)return mA(t,e);if(Tee(t)){var r=t,i=r.target;if(i)return mA(i,r)}return null}function Cee(t,e,r){return Math.max(e,Math.min(t,r))}const Lt={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function gA(t,e,r){return e===0||Math.abs(e)===1/0?Math.pow(t,r*5):t*e*r/(e+r*t)}function vA(t,e,r,i=.15){return i===0?Cee(t,e,r):t<e?-gA(e-t,r-e,i)+e:t>r?+gA(t-r,r-e,i)+r:t}function kee(t,[e,r],[i,s]){const[[a,o],[l,u]]=t;return[vA(e,a,o,i),vA(r,l,u,s)]}function Nee(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Aee(t){var e=Nee(t,"string");return typeof e=="symbol"?e:String(e)}function nn(t,e,r){return e=Aee(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yA(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function zt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?yA(Object(r),!0).forEach(function(i){nn(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):yA(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}const nV={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function _A(t){return t?t[0].toUpperCase()+t.slice(1):""}const Ree=["enter","leave"];function Pee(t=!1,e){return t&&!Ree.includes(e)}function Dee(t,e="",r=!1){const i=nV[t],s=i&&i[e]||e;return"on"+_A(t)+_A(s)+(Pee(r,s)?"Capture":"")}const Mee=["gotpointercapture","lostpointercapture"];function Lee(t){let e=t.substring(2).toLowerCase();const r=!!~e.indexOf("passive");r&&(e=e.replace("passive",""));const i=Mee.includes(e)?"capturecapture":"capture",s=!!~e.indexOf(i);return s&&(e=e.replace("capture","")),{device:e,capture:s,passive:r}}function Oee(t,e=""){const r=nV[t],i=r&&r[e]||e;return t+i}function qg(t){return"touches"in t}function rV(t){return qg(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function jee(t){return Array.from(t.touches).filter(e=>{var r,i;return e.target===t.currentTarget||((r=t.currentTarget)===null||r===void 0||(i=r.contains)===null||i===void 0?void 0:i.call(r,e.target))})}function Vee(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function iV(t){return qg(t)?Vee(t)[0]:t}function OE(t,e){try{const r=e.clientX-t.clientX,i=e.clientY-t.clientY,s=(e.clientX+t.clientX)/2,a=(e.clientY+t.clientY)/2,o=Math.hypot(r,i);return{angle:-(Math.atan2(r,i)*180)/Math.PI,distance:o,origin:[s,a]}}catch{}return null}function Fee(t){return jee(t).map(e=>e.identifier)}function wA(t,e){const[r,i]=Array.from(t.touches).filter(s=>e.includes(s.identifier));return OE(r,i)}function Gy(t){const e=iV(t);return qg(t)?e.identifier:e.pointerId}function vu(t){const e=iV(t);return[e.clientX,e.clientY]}const bA=40,xA=800;function sV(t){let{deltaX:e,deltaY:r,deltaMode:i}=t;return i===1?(e*=bA,r*=bA):i===2&&(e*=xA,r*=xA),[e,r]}function $ee(t){var e,r;const{scrollX:i,scrollY:s,scrollLeft:a,scrollTop:o}=t.currentTarget;return[(e=i??a)!==null&&e!==void 0?e:0,(r=s??o)!==null&&r!==void 0?r:0]}function Uee(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:r,altKey:i,metaKey:s,ctrlKey:a}=t;Object.assign(e,{shiftKey:r,altKey:i,metaKey:s,ctrlKey:a})}return e}function xm(t,...e){return typeof t=="function"?t(...e):t}function Bee(){}function zee(...t){return t.length===0?Bee:t.length===1?t[0]:function(){let e;for(const r of t)e=r.apply(this,arguments)||e;return e}}function EA(t,e){return Object.assign({},e,t||{})}const qee=32;class aV{constructor(e,r,i){this.ctrl=e,this.args=r,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:r,ingKey:i,args:s}=this;r[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=s,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const r=this.state,i=this.config;r._active||(this.reset(),this.computeInitial(),r._active=!0,r.target=e.target,r.currentTarget=e.currentTarget,r.lastOffset=i.from?xm(i.from,r):r.offset,r.offset=r.lastOffset,r.startTime=r.timeStamp=e.timeStamp)}computeValues(e){const r=this.state;r._values=e,r.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:r,config:i,shared:s}=this;r.args=this.args;let a=0;if(e&&(r.event=e,i.preventDefault&&e.cancelable&&r.event.preventDefault(),r.type=e.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,Uee(e)),s.down=s.pressed=s.buttons%2===1||s.touches>0,a=e.timeStamp-r.timeStamp,r.timeStamp=e.timeStamp,r.elapsedTime=r.timeStamp-r.startTime),r._active){const O=r._delta.map(Math.abs);Lt.addTo(r._distance,O)}this.axisIntent&&this.axisIntent(e);const[o,l]=r._movement,[u,c]=i.threshold,{_step:d,values:h}=r;if(i.hasCustomTransform?(d[0]===!1&&(d[0]=Math.abs(o)>=u&&h[0]),d[1]===!1&&(d[1]=Math.abs(l)>=c&&h[1])):(d[0]===!1&&(d[0]=Math.abs(o)>=u&&Math.sign(o)*u),d[1]===!1&&(d[1]=Math.abs(l)>=c&&Math.sign(l)*c)),r.intentional=d[0]!==!1||d[1]!==!1,!r.intentional)return;const f=[0,0];if(i.hasCustomTransform){const[O,A]=h;f[0]=d[0]!==!1?O-d[0]:0,f[1]=d[1]!==!1?A-d[1]:0}else f[0]=d[0]!==!1?o-d[0]:0,f[1]=d[1]!==!1?l-d[1]:0;this.restrictToAxis&&!r._blocked&&this.restrictToAxis(f);const m=r.offset,v=r._active&&!r._blocked||r.active;v&&(r.first=r._active&&!r.active,r.last=!r._active&&r.active,r.active=s[this.ingKey]=r._active,e&&(r.first&&("bounds"in i&&(r._bounds=xm(i.bounds,r)),this.setup&&this.setup()),r.movement=f,this.computeOffset()));const[y,b]=r.offset,[[_,w],[E,N]]=r._bounds;r.overflow=[y<_?-1:y>w?1:0,b<E?-1:b>N?1:0],r._movementBound[0]=r.overflow[0]?r._movementBound[0]===!1?r._movement[0]:r._movementBound[0]:!1,r._movementBound[1]=r.overflow[1]?r._movementBound[1]===!1?r._movement[1]:r._movementBound[1]:!1;const M=r._active?i.rubberband||[0,0]:[0,0];if(r.offset=kee(r._bounds,r.offset,M),r.delta=Lt.sub(r.offset,m),this.computeMovement(),v&&(!r.last||a>qee)){r.delta=Lt.sub(r.offset,m);const O=r.delta.map(Math.abs);Lt.addTo(r.distance,O),r.direction=r.delta.map(Math.sign),r._direction=r._delta.map(Math.sign),!r.first&&a>0&&(r.velocity=[O[0]/a,O[1]/a],r.timeDelta=a)}}emit(){const e=this.state,r=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const s=this.handler(zt(zt(zt({},r),e),{},{[this.aliasKey]:e.values}));s!==void 0&&(e.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Hee([t,e],r){const i=Math.abs(t),s=Math.abs(e);if(i>s&&i>r)return"x";if(s>i&&s>r)return"y"}class Eh extends aV{constructor(...e){super(...e),nn(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Lt.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Lt.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const r=this.state,i=this.config;if(!r.axis&&e){const s=typeof i.axisThreshold=="object"?i.axisThreshold[rV(e)]:i.axisThreshold;r.axis=Hee(r._movement,s)}r._blocked=(i.lockDirection||!!i.axis)&&!r.axis||!!i.axis&&i.axis!==r.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const Wee=t=>t,SA=.15,oV={enabled(t=!0){return t},eventOptions(t,e,r){return zt(zt({},r.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[SA,SA];case!1:return[0,0];default:return Lt.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return Lt.toVector(t)},transform(t,e,r){const i=t||r.shared.transform;return this.hasCustomTransform=!!i,i||Wee},threshold(t){return Lt.toVector(t,0)}},Gee=0,Ko=zt(zt({},oV),{},{axis(t,e,{axis:r}){if(this.lockDirection=r==="lock",!this.lockDirection)return r},axisThreshold(t=Gee){return t},bounds(t={}){if(typeof t=="function")return a=>Ko.bounds(t(a));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:r=1/0,top:i=-1/0,bottom:s=1/0}=t;return[[e,r],[i,s]]}}),TA={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class Kee extends Eh{constructor(...e){super(...e),nn(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const r=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),s={left:r.left-i.left+e.offset[0],right:r.right-i.right+e.offset[0],top:r.top-i.top+e.offset[1],bottom:r.bottom-i.bottom+e.offset[1]};e._bounds=Ko.bounds(s)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const r=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(r.pointerButtons)?!r.pointerButtons.includes(e.buttons):r.pointerButtons!==-1&&r.pointerButtons!==e.buttons))return;const s=this.ctrl.setEventIds(e);r.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(s&&s.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=Gy(e),i._pointerActive=!0,this.computeValues(vu(e)),this.computeInitial(),r.preventScrollAxis&&rV(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):r.delay>0?(this.setupDelayTrigger(e),r.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const r=this.state;r._active=!0,r._preventScroll=!0,r._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const r=this.state,i=this.config;if(!r._pointerActive)return;const s=Gy(e);if(r._pointerId!==void 0&&s!==r._pointerId)return;const a=vu(e);if(document.pointerLockElement===e.target?r._delta=[e.movementX,e.movementY]:(r._delta=Lt.sub(a,r._values),this.computeValues(a)),Lt.addTo(r._movement,r._delta),this.compute(e),r._delayed&&r.intentional){this.timeoutStore.remove("dragDelay"),r.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!r._preventScroll)if(r.axis)if(r.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){r._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const r=this.state,i=this.config;if(!r._active||!r._pointerActive)return;const s=Gy(e);if(r._pointerId!==void 0&&s!==r._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[a,o]=r._distance;if(r.tap=a<=i.tapsThreshold&&o<=i.tapsThreshold,r.tap&&i.filterTaps)r._force=!0;else{const[l,u]=r._delta,[c,d]=r._movement,[h,f]=i.swipe.velocity,[m,v]=i.swipe.distance,y=i.swipe.duration;if(r.elapsedTime<y){const b=Math.abs(l/r.timeDelta),_=Math.abs(u/r.timeDelta);b>h&&Math.abs(c)>m&&(r.swipe[0]=Math.sign(l)),_>f&&Math.abs(d)>v&&(r.swipe[1]=Math.sign(u))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const r=this.config,i=r.device;r.pointerLock&&e.currentTarget.requestPointerLock(),r.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,Yee(e);const r=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",r),this.eventStore.add(this.sharedConfig.window,"touch","cancel",r),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const r=TA[e.key];if(r){const i=this.state,s=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=r(this.config.keyboardDisplacement,s),i._keyboardActive=!0,Lt.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in TA&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const r=this.config.device;e(r,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(r,"change",this.pointerMove.bind(this)),e(r,"end",this.pointerUp.bind(this)),e(r,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function Yee(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const Sh=typeof window<"u"&&window.document&&window.document.createElement;function lV(){return Sh&&"ontouchstart"in window}function Xee(){return lV()||Sh&&window.navigator.maxTouchPoints>1}function Qee(){return Sh&&"onpointerdown"in window}function Jee(){return Sh&&"exitPointerLock"in window.document}function Zee(){try{return"constructor"in GestureEvent}catch{return!1}}const qr={isBrowser:Sh,gesture:Zee(),touch:lV(),touchscreen:Xee(),pointer:Qee(),pointerLock:Jee()},ete=250,tte=180,nte=.5,rte=50,ite=250,ste=10,IA={mouse:0,touch:0,pen:8},ate=zt(zt({},Ko),{},{device(t,e,{pointer:{touch:r=!1,lock:i=!1,mouse:s=!1}={}}){return this.pointerLock=i&&qr.pointerLock,qr.touch&&r?"touch":this.pointerLock?"mouse":qr.pointer&&!s?"pointer":qr.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:r}){if(this.preventScrollDelay=typeof r=="number"?r:r||r===void 0&&t?ete:void 0,!(!qr.touchscreen||r===!1))return t||(r!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:r=!0,buttons:i=1,keys:s=!0}={}}){return this.pointerButtons=i,this.keys=s,!this.pointerLock&&this.device==="pointer"&&r},threshold(t,e,{filterTaps:r=!1,tapsThreshold:i=3,axis:s=void 0}){const a=Lt.toVector(t,r?i:s?1:0);return this.filterTaps=r,this.tapsThreshold=i,a},swipe({velocity:t=nte,distance:e=rte,duration:r=ite}={}){return{velocity:this.transform(Lt.toVector(t)),distance:this.transform(Lt.toVector(e)),duration:r}},delay(t=0){switch(t){case!0:return tte;case!1:return 0;default:return t}},axisThreshold(t){return t?zt(zt({},IA),t):IA},keyboardDisplacement(t=ste){return t}});function uV(t){const[e,r]=t.overflow,[i,s]=t._delta,[a,o]=t._direction;(e<0&&i>0&&a<0||e>0&&i<0&&a>0)&&(t._movement[0]=t._movementBound[0]),(r<0&&s>0&&o<0||r>0&&s<0&&o>0)&&(t._movement[1]=t._movementBound[1])}const ote=30,lte=100;class ute extends aV{constructor(...e){super(...e),nn(this,"ingKey","pinching"),nn(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:r,lastOffset:i}=this.state;e==="wheel"?this.state.offset=Lt.add(r,i):this.state.offset=[(1+r[0])*i[0],r[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:r}=this.state;this.state.movement=[e[0]/r[0],e[1]-r[1]]}axisIntent(){const e=this.state,[r,i]=e._movement;if(!e.axis){const s=Math.abs(r)*ote-Math.abs(i);s<0?e.axis="angle":s>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const r=this.state,i=this.ctrl.touchIds;if(r._active&&r._touchIds.every(a=>i.has(a))||i.size<2)return;this.start(e),r._touchIds=Array.from(i).slice(0,2);const s=wA(e,r._touchIds);s&&this.pinchStart(e,s)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const r=this.state,i=r._pointerEvents,s=this.ctrl.pointerIds;if(r._active&&Array.from(i.keys()).every(o=>s.has(o))||(i.size<2&&i.set(e.pointerId,e),r._pointerEvents.size<2))return;this.start(e);const a=OE(...Array.from(i.values()));a&&this.pinchStart(e,a)}pinchStart(e,r){const i=this.state;i.origin=r.origin,this.computeValues([r.distance,r.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const r=wA(e,this.state._touchIds);r&&this.pinchMove(e,r)}pointerMove(e){const r=this.state._pointerEvents;if(r.has(e.pointerId)&&r.set(e.pointerId,e),!this.state._active)return;const i=OE(...Array.from(r.values()));i&&this.pinchMove(e,i)}pinchMove(e,r){const i=this.state,s=i._values[1],a=r.angle-s;let o=0;Math.abs(a)>270&&(o+=Math.sign(a)),this.computeValues([r.distance,r.angle-360*o]),i.origin=r.origin,i.turns=o,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(r=>!this.ctrl.touchIds.has(r))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const r=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}r._pointerEvents.has(e.pointerId)&&r._pointerEvents.delete(e.pointerId),r._active&&r._pointerEvents.size<2&&(r._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const r=this.state;r._active||(this.start(e),this.computeValues([e.scale,e.rotation]),r.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const r=this.state;this.computeValues([e.scale,e.rotation]),r.origin=[e.clientX,e.clientY];const i=r._movement;r._movement=[e.scale-1,e.rotation],r._delta=Lt.sub(r._movement,i),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const r=this.config.modifierKey;r&&(Array.isArray(r)?!r.find(i=>e[i]):!e[r])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-sV(e)[1]/lte*i.offset[0],0],Lt.addTo(i._movement,i._delta),uV(i),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const r=this.config.device;r&&(e(r,"start",this[r+"Start"].bind(this)),e(r,"change",this[r+"Move"].bind(this)),e(r,"end",this[r+"End"].bind(this)),e(r,"cancel",this[r+"End"].bind(this)),e("lostPointerCapture","",this[r+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const cte=zt(zt({},oV),{},{device(t,e,{shared:r,pointer:{touch:i=!1}={}}){if(r.target&&!qr.touch&&qr.gesture)return"gesture";if(qr.touch&&i)return"touch";if(qr.touchscreen){if(qr.pointer)return"pointer";if(qr.touch)return"touch"}},bounds(t,e,{scaleBounds:r={},angleBounds:i={}}){const s=o=>{const l=EA(xm(r,o),{min:-1/0,max:1/0});return[l.min,l.max]},a=o=>{const l=EA(xm(i,o),{min:-1/0,max:1/0});return[l.min,l.max]};return typeof r!="function"&&typeof i!="function"?[s(),a()]:o=>[s(o),a(o)]},threshold(t,e,r){return this.lockDirection=r.axis==="lock",Lt.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});class dte extends Eh{constructor(...e){super(...e),nn(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(vu(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const r=vu(e),i=this.state;i._delta=Lt.sub(r,i._values),Lt.addTo(i._movement,i._delta),this.computeValues(r),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const hte=zt(zt({},Ko),{},{mouseOnly:(t=!0)=>t});class fte extends Eh{constructor(...e){super(...e),nn(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const r=this.state,i=$ee(e);r._delta=Lt.sub(i,r._values),Lt.addTo(r._movement,r._delta),this.computeValues(i),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const pte=Ko;class mte extends Eh{constructor(...e){super(...e),nn(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const r=this.state;r._delta=sV(e),Lt.addTo(r._movement,r._delta),uV(r),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const gte=Ko;class vte extends Eh{constructor(...e){super(...e),nn(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(vu(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const r=this.state;if(!r._active)return;r._active=!1;const i=vu(e);r._movement=r._delta=Lt.sub(i,r._values),this.computeValues(i),this.compute(e),r.delta=r.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const yte=zt(zt({},Ko),{},{mouseOnly:(t=!0)=>t}),_T=new Map,jE=new Map;function _te(t){_T.set(t.key,t.engine),jE.set(t.key,t.resolver)}const wte={key:"drag",engine:Kee,resolver:ate},bte={key:"hover",engine:vte,resolver:yte},xte={key:"move",engine:dte,resolver:hte},Ete={key:"pinch",engine:ute,resolver:cte},Ste={key:"scroll",engine:fte,resolver:pte},Tte={key:"wheel",engine:mte,resolver:gte};function Ite(t,e){if(t==null)return{};var r={},i=Object.keys(t),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function Cte(t,e){if(t==null)return{};var r=Ite(t,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}const kte={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=qr.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},Nte=["target","eventOptions","window","enabled","transform"];function bp(t={},e){const r={};for(const[i,s]of Object.entries(e))switch(typeof s){case"function":r[i]=s.call(r,t[i],i,t);break;case"object":r[i]=bp(t[i],s);break;case"boolean":s&&(r[i]=t[i]);break}return r}function Ate(t,e,r={}){const i=t,{target:s,eventOptions:a,window:o,enabled:l,transform:u}=i,c=Cte(i,Nte);if(r.shared=bp({target:s,eventOptions:a,window:o,enabled:l,transform:u},kte),e){const d=jE.get(e);r[e]=bp(zt({shared:r.shared},c),d)}else for(const d in c){const h=jE.get(d);h&&(r[d]=bp(zt({shared:r.shared},c[d]),h))}return r}class cV{constructor(e,r){nn(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=r}add(e,r,i,s,a){const o=this._listeners,l=Oee(r,i),u=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=zt(zt({},u),a);e.addEventListener(l,s,c);const d=()=>{e.removeEventListener(l,s,c),o.delete(d)};return o.add(d),d}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class Rte{constructor(){nn(this,"_timeouts",new Map)}add(e,r,i=140,...s){this.remove(e),this._timeouts.set(e,window.setTimeout(r,i,...s))}remove(e){const r=this._timeouts.get(e);r&&window.clearTimeout(r)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class Pte{constructor(e){nn(this,"gestures",new Set),nn(this,"_targetEventStore",new cV(this)),nn(this,"gestureEventStores",{}),nn(this,"gestureTimeoutStores",{}),nn(this,"handlers",{}),nn(this,"config",{}),nn(this,"pointerIds",new Set),nn(this,"touchIds",new Set),nn(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),Dte(this,e)}setEventIds(e){if(qg(e))return this.touchIds=new Set(Fee(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,r){this.handlers=e,this.nativeHandlers=r}applyConfig(e,r){this.config=Ate(e,r,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const r=this.config.shared,i={};let s;if(!(r.target&&(s=r.target(),!s))){if(r.enabled){for(const o of this.gestures){const l=this.config[o],u=CA(i,l.eventOptions,!!s);if(l.enabled){const c=_T.get(o);new c(this,e,o).bind(u)}}const a=CA(i,r.eventOptions,!!s);for(const o in this.nativeHandlers)a(o,"",l=>this.nativeHandlers[o](zt(zt({},this.state.shared),{},{event:l,args:e})),void 0,!0)}for(const a in i)i[a]=zee(...i[a]);if(!s)return i;for(const a in i){const{device:o,capture:l,passive:u}=Lee(a);this._targetEventStore.add(s,o,"",i[a],{capture:l,passive:u})}}}}function dl(t,e){t.gestures.add(e),t.gestureEventStores[e]=new cV(t,e),t.gestureTimeoutStores[e]=new Rte}function Dte(t,e){e.drag&&dl(t,"drag"),e.wheel&&dl(t,"wheel"),e.scroll&&dl(t,"scroll"),e.move&&dl(t,"move"),e.pinch&&dl(t,"pinch"),e.hover&&dl(t,"hover")}const CA=(t,e,r)=>(i,s,a,o={},l=!1)=>{var u,c;const d=(u=o.capture)!==null&&u!==void 0?u:e.capture,h=(c=o.passive)!==null&&c!==void 0?c:e.passive;let f=l?i:Dee(i,s,d);r&&h&&(f+="Passive"),t[f]=t[f]||[],t[f].push(a)},Mte=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function Lte(t){const e={},r={},i=new Set;for(let s in t)Mte.test(s)?(i.add(RegExp.lastMatch),r[s]=t[s]):e[s]=t[s];return[r,e,i]}function hl(t,e,r,i,s,a){if(!t.has(r)||!_T.has(i))return;const o=r+"Start",l=r+"End",u=c=>{let d;return c.first&&o in e&&e[o](c),r in e&&(d=e[r](c)),c.last&&l in e&&e[l](c),d};s[i]=u,a[i]=a[i]||{}}function Ote(t,e){const[r,i,s]=Lte(t),a={};return hl(s,r,"onDrag","drag",a,e),hl(s,r,"onWheel","wheel",a,e),hl(s,r,"onScroll","scroll",a,e),hl(s,r,"onPinch","pinch",a,e),hl(s,r,"onMove","move",a,e),hl(s,r,"onHover","hover",a,e),{handlers:a,config:e,nativeHandlers:i}}function jte(t,e={},r,i){const s=te.useMemo(()=>new Pte(t),[]);if(s.applyHandlers(t,i),s.applyConfig(e,r),te.useEffect(s.effect.bind(s)),te.useEffect(()=>s.clean.bind(s),[]),e.target===void 0)return s.bind.bind(s)}function Vte(t){return t.forEach(_te),function(r,i){const{handlers:s,nativeHandlers:a,config:o}=Ote(r,i||{});return jte(s,o,void 0,a)}}function Fte(t,e){return Vte([wte,Ete,Ste,Tte,xte,bte])(t,e||{})}function $te(){return{scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0}}function dV(t){var e=t.scaleX,r=e===void 0?1:e,i=t.scaleY,s=i===void 0?1:i,a=t.translateX,o=a===void 0?0:a,l=t.translateY,u=l===void 0?0:l,c=t.skewX,d=c===void 0?0:c,h=t.skewY,f=h===void 0?0:h;return{scaleX:r,scaleY:s,translateX:o,translateY:u,skewX:d,skewY:f}}function hV(t){var e=t.scaleX,r=t.scaleY,i=t.translateX,s=t.translateY,a=t.skewX,o=t.skewY,l=e*r-o*a;return{scaleX:r/l,scaleY:e/l,translateX:(r*i-a*s)/-l,translateY:(o*i-e*s)/l,skewX:a/-l,skewY:o/-l}}function fV(t,e){var r=e.x,i=e.y;return{x:t.scaleX*r+t.skewX*i+t.translateX,y:t.skewY*r+t.scaleY*i+t.translateY}}function Ky(t,e){var r=e.x,i=e.y;return fV(hV(t),{x:r,y:i})}function Ute(t,e){e===void 0&&(e=void 0);var r=e||t;return dV({scaleX:t,scaleY:r})}function Yy(t,e){return dV({translateX:t,translateY:e})}function kA(t,e){return{scaleX:t.scaleX*e.scaleX+t.skewX*e.skewY,scaleY:t.skewY*e.skewX+t.scaleY*e.scaleY,translateX:t.scaleX*e.translateX+t.skewX*e.translateY+t.translateX,translateY:t.skewY*e.translateX+t.scaleY*e.translateY+t.translateY,skewX:t.scaleX*e.skewX+t.skewX*e.scaleY,skewY:t.skewY*e.scaleX+t.scaleY*e.skewY}}function VE(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];switch(e.length){case 0:throw new Error("composeMatrices() requires arguments: was called with no args");case 1:return e[0];case 2:return kA(e[0],e[1]);default:{var i=e[0],s=e[1],a=e.slice(2),o=kA(i,s);return VE.apply(void 0,[o].concat(a))}}}function FE(){return FE=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},FE.apply(this,arguments)}var Bte={scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0},zte=function(e){return-e.deltaY>0?{scaleX:1.1,scaleY:1.1}:{scaleX:.9,scaleY:.9}},qte=function(e){var r=e.offset,i=r[0],s=e.lastOffset,a=s[0];return{scaleX:i-a<0?.9:1.1,scaleY:i-a<0?.9:1.1}};function wT(t){var e=t.scaleXMin,r=e===void 0?0:e,i=t.scaleXMax,s=i===void 0?1/0:i,a=t.scaleYMin,o=a===void 0?0:a,l=t.scaleYMax,u=l===void 0?1/0:l,c=t.initialTransformMatrix,d=c===void 0?Bte:c,h=t.wheelDelta,f=h===void 0?zte:h,m=t.pinchDelta,v=m===void 0?qte:m,y=t.width,b=t.height,_=t.constrain,w=t.children,E=S.useRef(null),N=S.useRef(d),M=S.useState(d),O=M[0],A=M[1],D=S.useState(!1),T=D[0],I=D[1],x=S.useState(void 0),R=x[0],P=x[1],j=S.useState(void 0),$=j[0],U=j[1],Y=S.useCallback(function(B,G){if(_)return _(B,G);var K=B.scaleX,re=B.scaleY,le=K>s||K<r,he=re>u||re<o;return le||he?G:B},[_,r,s,o,u]),q=S.useCallback(function(B){A(function(G){var K=Y(B,G);return N.current=K,K})},[Y]),F=S.useCallback(function(B){var G=B.x,K=B.y;return fV(O,{x:G,y:K})},[O]),W=S.useCallback(function(B){var G=B.x,K=B.y;return Ky(O,{x:G,y:K})},[O]),Q=S.useCallback(function(){q(d)},[d,q]),H=S.useCallback(function(B){var G=B.scaleX,K=B.scaleY,re=B.point,le=K||G,he=re||{x:y/2,y:b/2},ye=Ky(N.current,he),Ie=VE(N.current,Yy(ye.x,ye.y),Ute(G,le),Yy(-ye.x,-ye.y));if(q(Ie),T){var Be=N.current,Oe=Be.translateX,ze=Be.translateY;U(re),P({translateX:Oe,translateY:ze})}},[b,y,T,q]),X=S.useCallback(function(B){var G=B.translateX,K=B.translateY,re=VE(O,Yy(G,K));q(re)},[q,O]),J=S.useCallback(function(B){var G=B.translateX,K=B.translateY,re=FE({},O,{translateX:G,translateY:K});q(re)},[q,O]),ee=S.useCallback(function(B){var G=B.x,K=B.y,re=Ky(O,{x:G,y:K});J({translateX:re.x,translateY:re.y})},[J,O]),se=S.useCallback(function(){return hV(O)},[O]),ce=S.useCallback(function(){var B=se(),G=B.translateX,K=B.translateY,re=B.scaleX,le=B.scaleY,he=B.skewX,ye=B.skewY;return"matrix("+re+", "+ye+", "+he+", "+le+", "+G+", "+K+")"},[se]),Se=S.useCallback(function(B){var G=O.translateX,K=O.translateY;U(Wy(B)||void 0),P({translateX:G,translateY:K}),I(!0)},[O]),Ee=S.useCallback(function(B,G){var K,re;if(!(!T||!$||!R)){var le=Wy(B),he=le?-($.x-le.x):-$.x,ye=le?-($.y-le.y):-$.y,Ie=R.translateX+he;G!=null&&G.offsetX&&(Ie+=(K=G==null?void 0:G.offsetX)!=null?K:0);var Be=R.translateY+ye;G!=null&&G.offsetY&&(Be+=(re=G==null?void 0:G.offsetY)!=null?re:0),J({translateX:Ie,translateY:Be})}},[T,J,$,R]),ie=S.useCallback(function(){U(void 0),P(void 0),I(!1)},[]),ue=S.useCallback(function(B){B.preventDefault();var G=Wy(B)||void 0,K=f(B),re=K.scaleX,le=K.scaleY;H({scaleX:re,scaleY:le,point:G})},[H,f]),ge=S.useCallback(function(B){var G=B.origin,K=G[0],re=G[1],le=B.memo,he=le;if(E.current){var ye,Ie=(ye=he)!=null?ye:E.current.getBoundingClientRect(),Be=Ie.top,Oe=Ie.left;he||(he={top:Be,left:Oe});var ze=v(B),lt=ze.scaleX,vt=ze.scaleY;H({scaleX:lt,scaleY:vt,point:{x:K-Oe,y:re-Be}})}return he},[H,v]),ke=S.useCallback(function(){var B=O.translateX,G=O.translateY,K=O.scaleX,re=O.scaleY,le=O.skewX,he=O.skewY;return"matrix("+K+", "+he+", "+le+", "+re+", "+B+", "+G+")"},[O]),Re=S.useCallback(function(){var B={x:y/2,y:b/2},G=W(B);X({translateX:G.x-B.x,translateY:G.y-B.y})},[b,y,W,X]),_e=S.useCallback(function(){q($te())},[q]);Fte({onDragStart:function(G){var K=G.event;K instanceof KeyboardEvent||Se(K)},onDrag:function(G){var K=G.event,re=G.pinching,le=G.cancel;re?(le(),ie()):K instanceof KeyboardEvent||Ee(K)},onDragEnd:ie,onPinch:ge,onWheel:function(G){var K=G.event,re=G.active,le=G.pinching;le||!re||ue(K)}},{target:E,eventOptions:{passive:!1},drag:{filterTaps:!0}});var V={initialTransformMatrix:d,transformMatrix:O,isDragging:T,center:Re,clear:_e,scale:H,translate:X,translateTo:ee,setTranslate:J,setTransformMatrix:q,reset:Q,handleWheel:ue,handlePinch:ge,dragEnd:ie,dragMove:Ee,dragStart:Se,toString:ke,invert:se,toStringInvert:ce,applyToPoint:F,applyInverseToPoint:W,containerRef:E};return te.createElement(te.Fragment,null,w(V))}wT.propTypes={width:Et.number.isRequired,height:Et.number.isRequired,wheelDelta:Et.func,scaleXMin:Et.number,scaleXMax:Et.number,scaleYMin:Et.number,scaleYMax:Et.number,constrain:Et.func,children:Et.func.isRequired};function Hte(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Vr=Hte,Wte=typeof of=="object"&&of&&of.Object===Object&&of,pV=Wte,Gte=pV,Kte=typeof self=="object"&&self&&self.Object===Object&&self,Yte=Gte||Kte||Function("return this")(),bi=Yte,Xte=bi,Qte=function(){return Xte.Date.now()},mV=Qte,Jte=/\s/;function Zte(t){for(var e=t.length;e--&&Jte.test(t.charAt(e)););return e}var ene=Zte,tne=ene,nne=/^\s+/;function rne(t){return t&&t.slice(0,tne(t)+1).replace(nne,"")}var ine=rne,sne=bi,ane=sne.Symbol,Bu=ane,NA=Bu,gV=Object.prototype,one=gV.hasOwnProperty,lne=gV.toString,pc=NA?NA.toStringTag:void 0;function une(t){var e=one.call(t,pc),r=t[pc];try{t[pc]=void 0;var i=!0}catch{}var s=lne.call(t);return i&&(e?t[pc]=r:delete t[pc]),s}var cne=une,dne=Object.prototype,hne=dne.toString;function fne(t){return hne.call(t)}var pne=fne,AA=Bu,mne=cne,gne=pne,vne="[object Null]",yne="[object Undefined]",RA=AA?AA.toStringTag:void 0;function _ne(t){return t==null?t===void 0?yne:vne:RA&&RA in Object(t)?mne(t):gne(t)}var Yo=_ne;function wne(t){return t!=null&&typeof t=="object"}var Xi=wne,bne=Yo,xne=Xi,Ene="[object Symbol]";function Sne(t){return typeof t=="symbol"||xne(t)&&bne(t)==Ene}var zu=Sne,Tne=ine,PA=Vr,Ine=zu,DA=NaN,Cne=/^[-+]0x[0-9a-f]+$/i,kne=/^0b[01]+$/i,Nne=/^0o[0-7]+$/i,Ane=parseInt;function Rne(t){if(typeof t=="number")return t;if(Ine(t))return DA;if(PA(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=PA(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Tne(t);var r=kne.test(t);return r||Nne.test(t)?Ane(t.slice(2),r?2:8):Cne.test(t)?DA:+t}var vV=Rne,Pne=Vr,Xy=mV,MA=vV,Dne="Expected a function",Mne=Math.max,Lne=Math.min;function One(t,e,r){var i,s,a,o,l,u,c=0,d=!1,h=!1,f=!0;if(typeof t!="function")throw new TypeError(Dne);e=MA(e)||0,Pne(r)&&(d=!!r.leading,h="maxWait"in r,a=h?Mne(MA(r.maxWait)||0,e):a,f="trailing"in r?!!r.trailing:f);function m(O){var A=i,D=s;return i=s=void 0,c=O,o=t.apply(D,A),o}function v(O){return c=O,l=setTimeout(_,e),d?m(O):o}function y(O){var A=O-u,D=O-c,T=e-A;return h?Lne(T,a-D):T}function b(O){var A=O-u,D=O-c;return u===void 0||A>=e||A<0||h&&D>=a}function _(){var O=Xy();if(b(O))return w(O);l=setTimeout(_,y(O))}function w(O){return l=void 0,f&&i?m(O):(i=s=void 0,o)}function E(){l!==void 0&&clearTimeout(l),c=0,i=u=s=l=void 0}function N(){return l===void 0?o:w(Xy())}function M(){var O=Xy(),A=b(O);if(i=arguments,s=this,u=O,A){if(l===void 0)return v(u);if(h)return clearTimeout(l),l=setTimeout(_,e),m(u)}return l===void 0&&(l=setTimeout(_,e)),o}return M.cancel=E,M.flush=N,M}var jne=One;const Vne=za(jne),fl={top:40,right:40,bottom:40,left:40};function Fne(t,e){const r=t.split(" "),i=[];let s="";return r.forEach(a=>{(s+" "+a).trim().length>e&&s?(i.push(s),s=a):s=s?`${s} ${a}`:a}),s&&i.push(s),i}function $ne(){var x;const[t,e]=S.useState(null),[r,i]=S.useState(!0),[s,a]=S.useState(null),[o,l]=S.useState(null),[u,c]=S.useState(null),[d,h]=S.useState({width:window.innerWidth,height:window.innerHeight}),[f,m]=S.useState(150),[v,y]=S.useState(""),[b,_]=S.useState(2),w=_r(),E=S.useCallback(Vne(R=>{l(R)},50),[]);S.useEffect(()=>{const R=()=>{h({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[]),S.useEffect(()=>{(async()=>{try{const P={},$=(await dn(cn(Ct,"interviewSummaries"))).docs.map(async q=>{const F=cn(Ct,"interviewSummaries",q.id,"subSummaries");(await dn(F)).forEach(Q=>{const H=Q.data();H.keywords&&H.keywords.split(",").map(X=>X.trim().toLowerCase()).forEach(X=>{P[X]=(P[X]||0)+1})})});await Promise.all($);const U=Object.fromEntries(Object.entries(P).filter(([q,F])=>F>1)),Y={name:"keywords",children:Object.entries(U).map(([q,F])=>({name:q,value:F}))};e(Y),i(!1)}catch(P){console.error("Error fetching data:",P),a("Error loading data"),i(!1)}})()},[]);const N=S.useMemo(()=>{if(!t)return null;let R=t.children;v&&(R=R.filter(U=>U.name.toLowerCase().includes(v.toLowerCase()))),R=R.filter(U=>U.value>=b),R=[...R].sort((U,Y)=>Y.value-U.value);const P=R.slice(0,f),j=R.slice(f),$={name:"keywords",children:P};if(j.length>0&&!v){const U=j.reduce((q,F)=>q+F.value,0),Y=j.length;$.children.push({name:`${Y} more keywords`,value:U,isOthers:!0})}return $},[t,f,v,b]);if(r)return p.jsxs("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:[p.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),p.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]});if(s)return p.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-50 px-6",children:p.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg max-w-xl text-center",children:s})});if(!N)return null;const M=zg(N).sum(R=>R.value).sort((R,P)=>P.value-R.value),{width:O,height:A}=d,D=O-fl.left-fl.right,T=A-fl.top-fl.bottom,I=R=>{if(R.data.isOthers){m(P=>P+50);return}u&&u.name===R.data.name?c(null):c({name:R.data.name,value:R.data.value,x:R.x,y:R.y,r:R.r})};return M.children&&Math.max(...M.children.map(R=>R.value)),p.jsxs("div",{className:"w-full h-screen relative bg-gray-50 font-sans overflow-hidden",children:[p.jsxs("div",{className:"absolute top-4 left-4 z-40 bg-white bg-opacity-90 p-4 rounded-lg shadow-sm w-72",children:[p.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Keyword Visualization"}),p.jsx("div",{className:"mb-3",children:p.jsx("input",{type:"text",placeholder:"Search keywords...",value:v,onChange:R=>y(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})}),p.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Visible Keywords"}),p.jsxs("select",{value:f,onChange:R=>m(Number(R.target.value)),className:"w-full px-2 py-1.5 border border-gray-300 rounded-md text-sm",children:[p.jsx("option",{value:"50",children:"Top 50"}),p.jsx("option",{value:"100",children:"Top 100"}),p.jsx("option",{value:"150",children:"Top 150"}),p.jsx("option",{value:"200",children:"Top 200"}),p.jsx("option",{value:"300",children:"Top 300"}),p.jsx("option",{value:"500",children:"Top 500"})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Min. Frequency"}),p.jsxs("select",{value:b,onChange:R=>_(Number(R.target.value)),className:"w-full px-2 py-1.5 border border-gray-300 rounded-md text-sm",children:[p.jsx("option",{value:"2",children:"2+"}),p.jsx("option",{value:"3",children:"3+"}),p.jsx("option",{value:"5",children:"5+"}),p.jsx("option",{value:"10",children:"10+"})]})]})]}),p.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Showing ",((x=M.children)==null?void 0:x.length)||0," keywords",t&&t.children&&` of ${t.children.length} total`,p.jsx("br",{}),p.jsx("span",{className:"italic",children:"Only keywords with multiple clips are included"})]})]}),u&&p.jsxs("div",{className:"absolute top-36 left-4 z-50 bg-white rounded-xl shadow-md p-4 max-w-xs border border-gray-200",children:[p.jsxs("div",{className:"flex justify-between items-start",children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-900 m-0",children:u.name}),p.jsx("button",{onClick:()=>c(null),className:"bg-transparent border-0 text-gray-500 text-base cursor-pointer p-1 flex items-center justify-center rounded hover:bg-gray-100 hover:text-gray-900 transition-colors",children:"✕"})]}),p.jsxs("p",{className:"text-sm text-gray-600 mt-2 mb-4",children:["This topic appears ",p.jsx("strong",{children:u.value})," times across all interviews."]}),p.jsx("div",{children:p.jsxs("button",{onClick:()=>w(`/playlist-builder?keywords=${encodeURIComponent(u.name)}`),className:"w-full py-2.5 px-4 bg-blue-600 text-white font-medium text-sm rounded-lg cursor-pointer flex items-center justify-center hover:bg-blue-700 transition-colors shadow-sm",children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4 mr-2",children:p.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),"Watch related segments"]})})]}),p.jsx(wT,{width:O,height:A,scaleXMin:.5,scaleXMax:3,scaleYMin:.5,scaleYMax:3,initialTransformMatrix:{scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0},children:R=>p.jsxs("div",{className:"w-full h-full overflow-hidden relative touch-none flex justify-center items-center",children:[p.jsxs("svg",{width:"100%",height:"100%",ref:R.containerRef,className:"bg-white rounded-xl shadow-md mx-4 my-4 mt-20",children:[p.jsx("rect",{width:"100%",height:"100%",fill:"#ffffff",rx:14,onClick:()=>{R.reset(),c(null)}}),p.jsx(yT,{root:M,size:[D,T],padding:16,children:P=>{const j=P.descendants().filter($=>!$.children);return p.jsx(gu,{transform:R.toString(),top:fl.top+(T/2-P.r),left:fl.left+(D/2-P.r),children:j.map(($,U)=>{const Y=Math.max($.r,20),q=u&&u.name===$.data.name,F=$.data.isOthers,W=Math.min(Y/3.5,14),Q=Math.max(5,Math.floor(Y/3)),H=Fne($.data.name,Q),X=W,J=H.length>1?-((H.length-1)*X)/2:0,ee=q?"#2563eb":F?"#9ca3af":"#d1d5db",se=q?3:1,ce=q?"#f0f7ff":F?"#f3f4f6":"#ffffff";return p.jsxs("g",{transform:`translate(${$.x}, ${$.y})`,onMouseEnter:()=>E({name:$.data.name,value:$.data.value,x:$.x,y:$.y,isOthers:$.data.isOthers}),onMouseLeave:()=>E(null),onClick:()=>I($),className:"cursor-pointer",children:[p.jsx("circle",{r:Y,fill:ce,stroke:ee,strokeWidth:se,style:{transition:"fill 0.3s, stroke 0.3s, stroke-width 0.3s"}}),p.jsx("text",{textAnchor:"middle",fontSize:W,fontWeight:q?"bold":"normal",fill:F?"#6b7280":"#111827",pointerEvents:"none",style:{fontFamily:"Inter, system-ui, sans-serif"},children:H.map((Se,Ee)=>p.jsx("tspan",{x:"0",dy:Ee===0?J:X,children:Se},Ee))})]},`circle-${U}`)})})}})]}),o&&!u&&p.jsxs("div",{className:"absolute bg-gray-900 bg-opacity-90 text-white p-2 px-3 rounded-lg pointer-events-none text-sm z-50 shadow-md max-w-xs",style:{left:R.transformMatrix.translateX+o.x*R.transformMatrix.scaleX,top:R.transformMatrix.translateY+o.y*R.transformMatrix.scaleY-20},children:[p.jsx("div",{className:"font-semibold",children:o.name}),p.jsxs("div",{children:[o.value," mentions"]}),p.jsx("div",{className:"text-xs mt-1 text-blue-200",children:o.isOthers?"Click to show more keywords":"Click to explore"})]})]})}),p.jsxs("div",{className:"absolute bottom-4 right-4 bg-white bg-opacity-90 py-2 px-3 rounded-lg text-xs text-gray-600 shadow-sm flex items-center",children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3.5 h-3.5 mr-1.5 text-gray-500",children:p.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})}),p.jsx("span",{children:"Scroll to zoom • Drag to pan • Click bubble to select"})]})]})}const Une="modulepreload",Bne=function(t){return"/civil-rights-history-project/"+t},LA={},Em=function(e,r,i){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(u=>{if(u=Bne(u),u in LA)return;LA[u]=!0;const c=u.endsWith(".css"),d=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":Une,c||(h.as="script"),h.crossOrigin="",h.href=u,l&&h.setAttribute("nonce",l),document.head.appendChild(h),c)return new Promise((f,m)=>{h.addEventListener("load",f),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},zne=S.lazy(()=>Em(()=>import("./MapComponent-Da1bX5kv.js"),__vite__mapDeps([0,1])));function qne(){const[t,e]=S.useState(!0),[r,i]=S.useState(null),[s,a]=S.useState([]);S.useEffect(()=>{u()},[]);const o=async c=>{try{await new Promise(f=>setTimeout(f,1e3));const h=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(c)}`)).json();if(h.length>0)return[parseFloat(h[0].lat),parseFloat(h[0].lon)]}catch(d){console.error("Error fetching coordinates:",d)}return null},l=c=>{if(!c)return null;const d=/(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,h=c==null?void 0:c.match(d);return h&&h[1]?h[1]:null},u=async()=>{try{e(!0);const c=await dn(cn(Ct,"interviewSummaries")),d=[];for(const h of c.docs){const f=h.data(),{birthplace:m,name:v,videoEmbedLink:y}=f;if(m){const b=await o(m);if(b){const _=l(y),w=_?`https://img.youtube.com/vi/${_}/default.jpg`:"";d.push({position:b,name:v,birthplace:m,thumbnailURL:w,documentName:h.id})}}}console.log("Markers data:",d),a(d),e(!1)}catch(c){console.error("Error fetching birthplaces:",c),i("Failed to load map data"),e(!1)}};return r?p.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:p.jsx("div",{className:"text-red-500",children:r})}):p.jsxs("div",{className:"map-container",children:[!t&&s.length>0&&p.jsx(S.Suspense,{fallback:p.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:p.jsx(zne,{markers:s})}),t&&p.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})]})}const Gi=navigator?navigator.userAgent.toLowerCase():"no-user-agent-specified",yu=document?document.documentElement:null,Hne=Gi?Gi.indexOf("phantom")!==-1:!1,Th=window&&"ActiveXObject"in window;Th&&Gi.match(/MSIE 9/i);const Hg=Gi.indexOf("webkit")!==-1;Gi.indexOf("android");const Wne=Gi.search("android [23]")!==-1,Xo=window?typeof window.orientation<"u":!1,Gne=navigator&&window?navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&!window.PointerEvent:!1,Kne=navigator&&window?window.PointerEvent&&navigator.pointerEnabled&&navigator.maxTouchPoints:Gne,yV=window?window.opera:!1;Gi.indexOf("gecko");const _u=Gi.indexOf("gecko")!==-1&&!Hg&&!yV&&!Th;Gi.indexOf("chrome");const Yne=Gi.indexOf("edge/")!==-1;yu&&Th&&"transition"in yu.style;window&&"WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix;yu&&"MozPerspective"in yu.style;yu&&"OTransition"in yu.style;let OA=window?"devicePixelRatio"in window&&window.devicePixelRatio>1:!1;if(!OA&&window&&"matchMedia"in window){let t=window.matchMedia("(min-resolution:144dpi)");OA=t&&t.matches}const Bi=window&&!window.L_NO_TOUCH&&!Hne&&(Kne||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);function Xne(){var t=window.innerWidth,e=window.innerHeight,r="portrait";return t>e&&(r="landscape"),r}function Ih(t){return typeof t=="string"?document.getElementById(t):t}function Te(t,e,r){var i=document.createElement(t);return i.className=e,r&&r.appendChild(i),i}function Fc(t,e){var r=Te("button",t,e);return r.type="button",r}function $E(t){for(var e={x:0,y:0};t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;return e}function _V(t){for(var e=document.documentElement.style,r=0;r<t.length;r++)if(t[r]in e)return t[r];return!1}_V(["transition","webkitTransition","OTransition","MozTransition","msTransition"]);_V(["transformProperty","WebkitTransform","OTransform","MozTransform","msTransform"]);class at extends Error{constructor(e,r){super(),this.name="TLError",this.message=e||"error",this.message_key=this.message,this.detail=r||""}}const jA={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function wV(t){jA[t.toLowerCase()]&&(t=jA[t.toLowerCase()]);var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(i,s,a,o){return s+s+a+a+o+o});var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null}function wt(t,e){var r;for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}function Qne(t){return t==null?!1:t==!0||String(t).toLowerCase()=="true"||Number(t)==1}function Sl(t){for(var e=Array.prototype.slice.call(arguments,1),r=0,i=e.length,s;r<i;r++)s=e[r]||{},wt(t,s);return t}const bV=[];function Jne(t){bV.push(t)}function ot(t){bV.forEach(e=>{try{e(t)}catch(r){console&&console.log&&console.log("Error handling trace",r)}})}function rs(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}const VA=function(){var t=0,e="_tl_id";return function(r){return r[e]=r[e]||++t,r[e]}}();function Ar(t){return t&&typeof t.replace=="function"?t.replace(/^\s+|\s+$/g,""):""}function ar(t,...e){for(let i of e)for(var r of Object.getOwnPropertyNames(i.prototype))t.prototype[r]=i.prototype[r]}function Zne(t,e){if(e||(e=jo(6)),!(e in t))return e;var r=e.match(/^(.+)(-\d+)?$/)[1],i=[];for(let a in t)a.match(/^(.+?)(-\d+)?$/)[1]==r&&i.push(a);e=r+"-"+(i.length+1);for(var s=i.length;i.indexOf(e)!=-1;s++)e=r+"-"+s;return e}function ere(t){var e=[];if(Object.keys)e=Object.keys(t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);for(var i=0;i<e.length;i++){var s=e[i];if(t[s]!=null&&typeof t[s]!="string"||Ar(t[s]).length!=0)return!1}return!0}function Qy(t){t=Ar(t),t=t.toLowerCase();for(var e="ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;",r="aaaaaeeeeeiiiiooooouuuunc------",i=0,s=e.length;i<s;i++)t=t.replace(new RegExp(e.charAt(i),"g"),r.charAt(i));return t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),t=t.replace(/^([0-9])/,"_$1"),t}function jo(t,e){var r=function(a){return Math.floor(Math.random()*a)},i=function(){var a="abcdefghijklmnopqurstuvwxyz";return a.substr(r(32),1)},s=function(a){for(var o="",l=0;l<a;l++)o+=i();return o};return e?e+"-"+s(t):"tl-"+s(t)}function tre(t,e,r){for(var i=0;i<t.length;i++)if(e<t[i])return t[i];return e}function nre(t,e,r){for(var i=t.length-1;i>=0;i--)if(e>t[i])return t[i];return e}function rre(t){return t==parseFloat(t)?!(t%2):void 0}function xV(t,e,r,i){for(var s=i||0,a=0;a<e.length;a++)e[a].data[r]==t&&(s=a);return s}function Xl(t){return t&&(t=t.replace(/<a\b[^>]*>/i,""),t=t.replace(/<\/a>/i,""),t)}function ire(t,e){t.data=Sl({},t.data,e),t.data.unique_id===""&&(t.data.unique_id=jo(6))}function sre(t){return t.match(/<p>[\s\S]*?<\/p>/)?t:"<p>"+t+"</p>"}function wu(t){return t=t.replace(/(<[^>]*>)+/g,""),t.replace('"',"'")}function UE(t,e,r){var i=function(l,u,c){c||(c="");var d=30;return u&&u.length>d&&(u=u.substring(0,d)+"…"),c+"<a class='tl-makelink' href='"+l+"' onclick='void(0)'>"+u+"</a>"},s=/\b(?:https?|ftp):\/\/([a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|])/gim,a=/(^|[^\/>])(www\.[\S]+(\b|$))/gim,o=/([a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+)/gim;return t.replace(s,function(l,u,c,d){if(c>0){var h=d[c-1];if(h=='"'||h=="'"||h=="=")return l}return i(l,u)}).replace(a,function(l,u,c,d,h){return i("http://"+c,c,u)}).replace(o,function(l,u,c,d){return i("mailto:"+u,u)})}function Wg(t){return t.replace(/(.*)www.dropbox.com\/(.*)/,"$1dl.dropboxusercontent.com/$2")}const Qo={square:t=>{var e={w:0,h:0};return t.w>t.h&&t.h>0?(e.h=t.h,e.w=t.h):(e.w=t.w,e.h=t.w),e},r16_9:t=>t.w!==null&&t.w!==""?Math.round(t.w/16*9):t.h!==null&&t.h!==""?Math.round(t.h/9*16):0,r4_3:t=>{if(t.w!==null&&t.w!=="")return Math.round(t.w/4*3);if(t.h!==null&&t.h!=="")return Math.round(t.h/3*4)}};function are(t){var e,r=[],i,s;e=t.toString(),e.match("&#038;")?e=e.replace("&#038;","&"):e.match("&#38;")?e=e.replace("&#38;","&"):e.match("&amp;")&&(e=e.replace("&amp;","&")),s=e.slice(e.indexOf("?")+1).split("&");for(var a=0;a<s.length;a++)i=s[a].split("="),r.push(i[0]),r[i[0]]=i[1];return r}function ore(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r+"="+t[r]);return"?"+e.join("&")}function lre(t,e){if(typeof t<"u"){var r=0;for(var i in t){if(e===r)return t[i];r++}return""}else return""}let ure=function(t){var e="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",r=e.length;return{encode:function(i){if(typeof i!="number"||i!==parseInt(i))throw'"encode" only accepts integers.';for(var s="";i;){var a=i%r;i=Math.floor(i/r),s=e[a].toString()+s}return s},decode:function(i){if(typeof i!="string")throw'"decode" only accepts strings.';for(var s=0;i;){var a=e.indexOf(i[0]);if(a<0)throw`"decode" can't find "`+i[0]+'" in the alphabet: "'+e+'"';var o=i.length-1;s+=a*Math.pow(r,o),i=i.substring(1)}return s}}}();function Jy(t){if(typeof t=="string"){let s=t.match(/^\s*(\d+h)?(\d+m)?(\d+s)?\s*/i);if(s){var e=parseInt(s[1])||0,r=parseInt(s[2])||0,i=parseInt(s[3])||0;return i+r*60+e*60*60}}else if(typeof t=="number")return t;return 0}function cre(t){var e=new DOMParser().parseFromString(t,"text/html");return e.body.textContent||""}function dre(t){}function Gg(t){var e=new dre;return e.get(t)}function Ud(t){return t==1?1:1-Math.pow(2,-10*t)}function qu(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}let Sm=function(){};Sm.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments)},r=function(){};r.prototype=this.prototype;var i=new r;i.constructor=e,e.prototype=i,e.superclass=this.prototype;for(var s in this)this.hasOwnProperty(s)&&s!=="prototype"&&s!=="superclass"&&(e[s]=this[s]);return t.statics&&(Sl(e,t.statics),delete t.statics),t.includes&&(Sl.apply(null,[i].concat(t.includes)),delete t.includes),t.options&&i.options&&(t.options=Sl({},i.options,t.options)),Sl(i,t),e.extend=Sm.extend,e.include=function(a){Sl(this.prototype,a)},e};class or{on(e,r,i){if(!r)throw new at("No callback function provided");var s=this._tl_events=this._tl_events||{};return s[e]=s[e]||[],s[e].push({action:r,context:i||this}),this}addEventListener(e,r,i){return this.on(e,r,i)}hasEventListeners(e){var r="_tl_events";return r in this&&e in this[r]&&this[r][e].length>0}removeEventListener(e,r,i){if(!this.hasEventListeners(e))return this;for(var s=0,a=this._tl_events,o=a[e].length;s<o;s++)if(a[e][s].action===r&&(!i||a[e][s].context===i))return a[e].splice(s,1),this;return this}off(e,r,i){return this.removeEventListener(e,r,i)}fire(e,r){if(!this.hasEventListeners(e))return this;for(var i=wt({type:e,target:this},r),s=this._tl_events[e].slice(),a=0,o=s.length;a<o;a++)s[a].action?s[a].action.call(s[a].context||this,i):ot(`no action defined for ${e} listener`);return this}}function As(t,e){return hre(t,e)}const hre=function(){var t=document,e=window,r=e.performance,i=r&&(r.now||r.webkitNow||r.msNow||r.mozNow),s=i?function(){return i.call(r)}:function(){return+new Date},a=t.documentElement,o=!1,l=1e3,u=/^rgb\(|#/,c=/^([+\-])=([\d\.]+)/,d=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,h=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,f=/scale\(((?:[+\-]=)?([\d\.]+))\)/,m=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,v=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,y={lineHeight:1,zoom:1,zIndex:1,opacity:1,transform:1},b=function(){var H=t.createElement("a").style,X=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],J;for(J=0;J<X.length;J++)if(X[J]in H)return X[J]}(),_=function(){return typeof t.createElement("a").style.opacity<"u"}(),w=t.defaultView&&t.defaultView.getComputedStyle?function(H,X){X=X=="transform"?b:X,X=P(X);var J=null,ee=t.defaultView.getComputedStyle(H,"");return ee&&(J=ee[X]),H.style[X]||J}:a.currentStyle?function(H,X){if(X=P(X),X=="opacity"){var J=100;try{J=H.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch{try{J=H.filters("alpha").opacity}catch{}}return J/100}var ee=H.currentStyle?H.currentStyle[X]:null;return H.style[X]||ee}:function(H,X){return H.style[P(X)]},E=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||function(H){e.setTimeout(function(){H(+new Date)},17)}}(),N=[];E(function(H){o=H>1e12!=s()>1e12});function M(H,X,J){if(Array.prototype.indexOf)return H.indexOf(X);for(J=0;J<H.length;++J)if(H[J]===X)return J}function O(H){var X,J=N.length;for(i&&H>1e12&&(H=s()),o&&(H=s()),X=J;X--;)N[X](H);N.length&&E(O)}function A(H){N.push(H)===1&&E(O)}function D(H){var X,J=M(N,H);J>=0&&(X=N.slice(J+1),N.length=J,N=N.concat(X))}function T(H,X){var J={},ee;return(ee=H.match(h))&&(J.rotate=W(ee[1],X?X.rotate:null)),(ee=H.match(f))&&(J.scale=W(ee[1],X?X.scale:null)),(ee=H.match(m))&&(J.skewx=W(ee[1],X?X.skewx:null),J.skewy=W(ee[3],X?X.skewy:null)),(ee=H.match(v))&&(J.translatex=W(ee[1],X?X.translatex:null),J.translatey=W(ee[3],X?X.translatey:null)),J}function I(H){var X="";return"rotate"in H&&(X+="rotate("+H.rotate+"deg) "),"scale"in H&&(X+="scale("+H.scale+") "),"translatex"in H&&(X+="translate("+H.translatex+"px,"+H.translatey+"px) "),"skewx"in H&&(X+="skew("+H.skewx+"deg,"+H.skewy+"deg)"),X}function x(H,X,J){return"#"+(1<<24|H<<16|X<<8|J).toString(16).slice(1)}function R(H){var X=H.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(X?x(X[1],X[2],X[3]):H).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function P(H){return H.replace(/-(.)/g,function(X,J){return J.toUpperCase()})}function j(H){return typeof H=="function"}function $(H){return Math.sin(H*Math.PI/2)}function U(H,X,J,ee,se,ce){ee=j(ee)?ee:Q.easings[ee]||$;var Se=H||l,Ee=this,ie=ce-se,ue=s(),ge=0,ke=0;function Re(_e){var V=_e-ue;if(V>Se||ge)return ce=isFinite(ce)?ce:1,ge?ke&&X(ce):X(ce),D(Re),J&&J.apply(Ee);isFinite(ce)?X(ie*ee(V/Se)+se):X(ee(V/Se))}return A(Re),{stop:function(_e){ge=1,ke=_e,_e||(J=null)}}}function Y(H,X){var J=H.length,ee=[],se,ce;for(se=0;se<J;++se)ee[se]=[H[se][0],H[se][1]];for(ce=1;ce<J;++ce)for(se=0;se<J-ce;++se)ee[se][0]=(1-X)*ee[se][0]+X*ee[parseInt(se+1,10)][0],ee[se][1]=(1-X)*ee[se][1]+X*ee[parseInt(se+1,10)][1];return[ee[0][0],ee[0][1]]}function q(H,X,J){var ee=[],se,ce,Se,Ee;for(se=0;se<6;se++)Se=Math.min(15,parseInt(X.charAt(se),16)),Ee=Math.min(15,parseInt(J.charAt(se),16)),ce=Math.floor((Ee-Se)*H+Se),ce=ce>15?15:ce<0?0:ce,ee[se]=ce.toString(16);return"#"+ee.join("")}function F(H,X,J,ee,se,ce,Se){if(se=="transform"){Se={};for(var Ee in J[ce][se])Se[Ee]=Ee in ee[ce][se]?Math.round(((ee[ce][se][Ee]-J[ce][se][Ee])*H+J[ce][se][Ee])*l)/l:J[ce][se][Ee];return Se}else return typeof J[ce][se]=="string"?q(H,J[ce][se],ee[ce][se]):(Se=Math.round(((ee[ce][se]-J[ce][se])*H+J[ce][se])*l)/l,se in y||(Se+=X[ce][se]||"px"),Se)}function W(H,X,J,ee,se){return(J=c.exec(H))?(se=parseFloat(J[2]))&&X+(J[1]=="+"?1:-1)*se:parseFloat(H)}function Q(H,X){var J=H?J=isFinite(H.length)?H:[H]:[],ee,se=X.complete,ce=X.duration,Se=X.easing,Ee=X.bezier,ie=[],ue=[],ge=[],ke=[],Re,_e;for(Ee&&(Re=X.left,_e=X.top,delete X.right,delete X.bottom,delete X.left,delete X.top),ee=J.length;ee--;){if(ie[ee]={},ue[ee]={},ge[ee]={},Ee){var V=w(J[ee],"left"),B=w(J[ee],"top"),G=[W(j(Re)?Re(J[ee]):Re||0,parseFloat(V)),W(j(_e)?_e(J[ee]):_e||0,parseFloat(B))];ke[ee]=j(Ee)?Ee(J[ee],G):Ee,ke[ee].push(G),ke[ee].unshift([parseInt(V,10),parseInt(B,10)])}for(var K in X){switch(K){case"complete":case"duration":case"easing":case"bezier":continue}var re=w(J[ee],K),le,he=j(X[K])?X[K](J[ee]):X[K];if(typeof he=="string"&&u.test(he)&&!u.test(re)){delete X[K];continue}ie[ee][K]=K=="transform"?T(re):typeof he=="string"&&u.test(he)?R(re).slice(1):parseFloat(re),ue[ee][K]=K=="transform"?T(he,ie[ee][K]):typeof he=="string"&&he.charAt(0)=="#"?R(he).slice(1):W(he,parseFloat(re)),typeof he=="string"&&(le=he.match(d))&&(ge[ee][K]=le[1])}}return U.apply(J,[ce,function(ye,Ie,Be){for(ee=J.length;ee--;){Ee&&(Be=Y(ke[ee],ye),J[ee].style.left=Be[0]+"px",J[ee].style.top=Be[1]+"px");for(var Oe in X)Ie=F(ye,ge,ie,ue,Oe,ee),Oe=="transform"?J[ee].style[b]=I(Ie):Oe=="opacity"&&!_?J[ee].style.filter="alpha(opacity="+Ie*100+")":J[ee].style[P(Oe)]=Ie}},se,Se])}return Q.tween=U,Q.getStyle=w,Q.bezier=Y,Q.transform=b,Q.parseTransform=T,Q.formatTransform=I,Q.easings={},Q}();class Ls{show(e){e||(this._el.container.style.display="block")}hide(e){this._el.container.style.display="none"}addTo(e){e.appendChild(this._el.container),this.onAdd()}removeFrom(e){e.removeChild(this._el.container),this.onRemove()}animatePosition(e,r){var i={duration:this.options.duration,easing:this.options.ease};for(var s in e)e.hasOwnProperty(s)&&(i[s]=e[s]+"px");this.animator&&this.animator.stop(),this.animator=As(r,i)}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}setPosition(e,r){for(var i in e)e.hasOwnProperty(i)&&(r?r.style[i]=e[i]+"px":this._el.container.style[i]=e[i]+"px")}getPosition(){return $E(this._el.container)}}let fre=class{constructor(e,r,i){this._el={drag:e,move:e},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},i&&(this._el.move=i),this.options={enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:!1,right:!1},momentum_multiplier:2e3,duration:1e3,ease:qu},this.animator=null,this.dragevent=this.mousedrag,Bi&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},wt(this.options,r)}enable(e){this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){Qe.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Qe.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(e){this.options.constraint=e}_onDragStart(e){Bi?e.originalEvent?(this.data.pagex.start=e.originalEvent.touches[0].screenX,this.data.pagey.start=e.originalEvent.touches[0].screenY):(this.data.pagex.start=e.targetTouches[0].screenX,this.data.pagey.start=e.targetTouches[0].screenY):(this.data.pagex.start=e.pageX,this.data.pagey.start=e.pageY),this.options.enable.x&&(this._el.move.style.left=this.data.pagex.start-this._el.move.offsetWidth/2+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.pagey.start-this._el.move.offsetHeight/2+"px"),this.data.pos.start=$E(this._el.drag),this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),Qe.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Qe.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(e){this.data.sliding=!1,Qe.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Qe.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(e){e.preventDefault(),this.data.sliding=!0,Bi?e.originalEvent?(this.data.pagex.end=e.originalEvent.touches[0].screenX,this.data.pagey.end=e.originalEvent.touches[0].screenY):(this.data.pagex.end=e.targetTouches[0].screenX,this.data.pagey.end=e.targetTouches[0].screenY):(this.data.pagex.end=e.pageX,this.data.pagey.end=e.pageY),this.data.pos.end=$E(this._el.drag),this.data.new_pos.x=-(this.data.pagex.start-this.data.pagex.end-this.data.pos.start.x),this.data.new_pos.y=-(this.data.pagey.start-this.data.pagey.end-this.data.pos.start.y),this.options.enable.x&&(this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var e={x:0,y:0,time:0},r={x:0,y:0,time:0},i=!1;e.time=(new Date().getTime()-this.data.time.start)*10,r.time=(new Date().getTime()-this.data.time.start)*10,r.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),r.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),e.x=Math.round(r.x/r.time),e.y=Math.round(r.y/r.time),this.data.new_pos.x=Math.min(this.data.pos.end.x+e.x),this.data.new_pos.y=Math.min(this.data.pos.end.y+e.y),this.options.enable.x?this.data.new_pos.x<0&&(this.data.new_pos.x=0):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,r.time<3e3&&(i=!0),Math.abs(r.x)>1e4&&(this.data.direction="left",r.x>0&&(this.data.direction="right")),Math.abs(r.y)>1e4&&(this.data.direction="up",r.y>0&&(this.data.direction="down")),this._animateMomentum(),i&&this.fire("swipe_"+this.data.direction,this.data)}_animateMomentum(){var e={x:this.data.new_pos.x,y:this.data.new_pos.y},r={duration:this.options.duration,easing:Ud};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(e.y>this.options.constraint.bottom?e.y=this.options.constraint.bottom:e.y<this.options.constraint.top&&(e.y=this.options.constraint.top)),r.top=Math.floor(e.y)+"px"),this.options.enable.x&&((this.options.constraint.left||this.options.constraint.right)&&(e.x>this.options.constraint.left?e.x=this.options.constraint.left:e.x<this.options.constraint.right&&(e.x=this.options.constraint.right)),r.left=Math.floor(e.x)+"px"),this.animator=As(this._el.move,r),this.fire("momentum",this.data)}};ar(or);var Qe={addListener:function(t,e,r,i){var s=VA(r),a="_tl_"+e+s;if(!t[a]){var o=function(c){return r.call(i||t,c||Qe._getEvent())};if(Bi&&e==="dblclick"&&this.addDoubleTapListener)this.addDoubleTapListener(t,o,s);else if("addEventListener"in t)if(e==="mousewheel")t.addEventListener("DOMMouseScroll",o,!1),t.addEventListener(e,o,!1);else if(e==="mouseenter"||e==="mouseleave"){var l=o,u=e==="mouseenter"?"mouseover":"mouseout";o=function(c){if(Qe._checkMouse(t,c))return l(c)},t.addEventListener(u,o,!1)}else t.addEventListener(e,o,!1);else"attachEvent"in t&&t.attachEvent("on"+e,o);t[a]=o}},removeListener:function(t,e,r){var i=VA(r),s="_tl_"+e+i,a=t[s];a&&(Bi&&e==="dblclick"&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,i):"removeEventListener"in t?e==="mousewheel"?(t.removeEventListener("DOMMouseScroll",a,!1),t.removeEventListener(e,a,!1)):e==="mouseenter"||e==="mouseleave"?t.removeEventListener(e==="mouseenter"?"mouseover":"mouseout",a,!1):t.removeEventListener(e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a),t[s]=null)},_checkMouse:function(t,e){var r=e.relatedTarget;if(!r)return!0;try{for(;r&&r!==t;)r=r.parentNode}catch{return!1}return r!==t},_getEvent:function(){var t=window.event;if(!t)for(var e=arguments.callee.caller;e&&(t=e.arguments[0],!(t&&window.Event===t.constructor));)e=e.caller;return t},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},disableClickPropagation:function(t){Qe.addListener(t,fre.START,Qe.stopPropagation),Qe.addListener(t,"click",Qe.stopPropagation),Qe.addListener(t,"dblclick",Qe.stopPropagation)},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stop:function(t){Qe.preventDefault(t),Qe.stopPropagation(t)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e}},Os=function(){var t,e,r,i,s=[],a=s.slice,o=s.filter,l=window.document,u={},c={},d={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},h=/^\s*<(\w+|!)[^>]*>/,f=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,m=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,v=/^(?:body|html)$/i,y=/([A-Z])/g,b=["val","css","html","text","data","width","height","offset"],_=["after","prepend","before","append"],w=l.createElement("table"),E=l.createElement("tr"),N={tr:l.createElement("tbody"),tbody:w,thead:w,tfoot:w,td:E,th:E,"*":l.createElement("div")},M=/complete|loaded|interactive/,O=/^[\w-]*$/,A={},D=A.toString,T={},I,x,R=l.createElement("div"),P={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},j=Array.isArray||function(V){return V instanceof Array};T.matches=function(V,B){if(!B||!V||V.nodeType!==1)return!1;var G=V.webkitMatchesSelector||V.mozMatchesSelector||V.oMatchesSelector||V.matchesSelector;if(G)return G.call(V,B);var K,re=V.parentNode,le=!re;return le&&(re=R).appendChild(V),K=~T.qsa(re,B).indexOf(V),le&&R.removeChild(V),K};function $(V){return V==null?String(V):A[D.call(V)]||"object"}function U(V){return $(V)=="function"}function Y(V){return V!=null&&V==V.window}function q(V){return V!=null&&V.nodeType==V.DOCUMENT_NODE}function F(V){return $(V)=="object"}function W(V){return F(V)&&!Y(V)&&Object.getPrototypeOf(V)==Object.prototype}function Q(V){return typeof V.length=="number"}function H(V){return o.call(V,function(B){return B!=null})}function X(V){return V.length>0?r.fn.concat.apply([],V):V}I=function(V){return V.replace(/-+(.)?/g,function(B,G){return G?G.toUpperCase():""})};function J(V){return V.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}x=function(V){return o.call(V,function(B,G){return V.indexOf(B)==G})};function ee(V){return V in c?c[V]:c[V]=new RegExp("(^|\\s)"+V+"(\\s|$)")}function se(V,B){return typeof B=="number"&&!d[J(V)]?B+"px":B}function ce(V){var B,G;return u[V]||(B=l.createElement(V),l.body.appendChild(B),G=getComputedStyle(B,"").getPropertyValue("display"),B.parentNode.removeChild(B),G=="none"&&(G="block"),u[V]=G),u[V]}function Se(V){return"children"in V?a.call(V.children):r.map(V.childNodes,function(B){if(B.nodeType==1)return B})}T.fragment=function(V,B,G){var K,re,le;return f.test(V)&&(K=r(l.createElement(RegExp.$1))),K||(V.replace&&(V=V.replace(m,"<$1></$2>")),B===t&&(B=h.test(V)&&RegExp.$1),B in N||(B="*"),le=N[B],le.innerHTML=""+V,K=r.each(a.call(le.childNodes),function(){le.removeChild(this)})),W(G)&&(re=r(K),r.each(G,function(he,ye){b.indexOf(he)>-1?re[he](ye):re.attr(he,ye)})),K},T.Z=function(V,B){return V=V||[],V.__proto__=r.fn,V.selector=B||"",V},T.isZ=function(V){return V instanceof T.Z},T.init=function(V,B){var G;if(V)if(typeof V=="string")if(V=V.trim(),V[0]=="<"&&h.test(V))G=T.fragment(V,RegExp.$1,B),V=null;else{if(B!==t)return r(B).find(V);G=T.qsa(l,V)}else{if(U(V))return r(l).ready(V);if(T.isZ(V))return V;if(j(V))G=H(V);else if(F(V))G=[V],V=null;else if(h.test(V))G=T.fragment(V.trim(),RegExp.$1,B),V=null;else{if(B!==t)return r(B).find(V);G=T.qsa(l,V)}}else return T.Z();return T.Z(G,V)},r=function(V,B){return T.init(V,B)};function Ee(V,B,G){for(e in B)G&&(W(B[e])||j(B[e]))?(W(B[e])&&!W(V[e])&&(V[e]={}),j(B[e])&&!j(V[e])&&(V[e]=[]),Ee(V[e],B[e],G)):B[e]!==t&&(V[e]=B[e])}r.extend=function(V){var B,G=a.call(arguments,1);return typeof V=="boolean"&&(B=V,V=G.shift()),G.forEach(function(K){Ee(V,K,B)}),V},T.qsa=function(V,B){var G,K=B[0]=="#",re=!K&&B[0]==".",le=K||re?B.slice(1):B,he=O.test(le);return q(V)&&he&&K?(G=V.getElementById(le))?[G]:[]:V.nodeType!==1&&V.nodeType!==9?[]:a.call(he&&!K?re?V.getElementsByClassName(le):V.getElementsByTagName(B):V.querySelectorAll(B))};function ie(V,B){return B==null?r(V):r(V).filter(B)}r.contains=function(V,B){return V!==B&&V.contains(B)};function ue(V,B,G,K){return U(B)?B.call(V,G,K):B}function ge(V,B,G){G==null?V.removeAttribute(B):V.setAttribute(B,G)}function ke(V,B){var G=V.className,K=G&&G.baseVal!==t;if(B===t)return K?G.baseVal:G;K?G.baseVal=B:V.className=B}function Re(V){var B;try{return V&&(V=="true"||(V=="false"?!1:V=="null"?null:!/^0/.test(V)&&!isNaN(B=Number(V))?B:/^[\[\{]/.test(V)?r.parseJSON(V):V))}catch{return V}}r.type=$,r.isFunction=U,r.isWindow=Y,r.isArray=j,r.isPlainObject=W,r.isEmptyObject=function(V){var B;for(B in V)return!1;return!0},r.inArray=function(V,B,G){return s.indexOf.call(B,V,G)},r.camelCase=I,r.trim=function(V){return V==null?"":String.prototype.trim.call(V)},r.uuid=0,r.support={},r.expr={},r.map=function(V,B){var G,K=[],re,le;if(Q(V))for(re=0;re<V.length;re++)G=B(V[re],re),G!=null&&K.push(G);else for(le in V)G=B(V[le],le),G!=null&&K.push(G);return X(K)},r.each=function(V,B){var G,K;if(Q(V)){for(G=0;G<V.length;G++)if(B.call(V[G],G,V[G])===!1)return V}else for(K in V)if(B.call(V[K],K,V[K])===!1)return V;return V},r.grep=function(V,B){return o.call(V,B)},window.JSON&&(r.parseJSON=JSON.parse),r.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(V,B){A["[object "+B+"]"]=B.toLowerCase()}),r.fn={forEach:s.forEach,reduce:s.reduce,push:s.push,sort:s.sort,indexOf:s.indexOf,concat:s.concat,map:function(V){return r(r.map(this,function(B,G){return V.call(B,G,B)}))},slice:function(){return r(a.apply(this,arguments))},ready:function(V){return M.test(l.readyState)&&l.body?V(r):l.addEventListener("DOMContentLoaded",function(){V(r)},!1),this},get:function(V){return V===t?a.call(this):this[V>=0?V:V+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(V){return s.every.call(this,function(B,G){return V.call(B,G,B)!==!1}),this},filter:function(V){return U(V)?this.not(this.not(V)):r(o.call(this,function(B){return T.matches(B,V)}))},add:function(V,B){return r(x(this.concat(r(V,B))))},is:function(V){return this.length>0&&T.matches(this[0],V)},not:function(V){var B=[];if(U(V)&&V.call!==t)this.each(function(K){V.call(this,K)||B.push(this)});else{var G=typeof V=="string"?this.filter(V):Q(V)&&U(V.item)?a.call(V):r(V);this.forEach(function(K){G.indexOf(K)<0&&B.push(K)})}return r(B)},has:function(V){return this.filter(function(){return F(V)?r.contains(this,V):r(this).find(V).size()})},eq:function(V){return V===-1?this.slice(V):this.slice(V,+V+1)},first:function(){var V=this[0];return V&&!F(V)?V:r(V)},last:function(){var V=this[this.length-1];return V&&!F(V)?V:r(V)},find:function(V){var B,G=this;return typeof V=="object"?B=r(V).filter(function(){var K=this;return s.some.call(G,function(re){return r.contains(re,K)})}):this.length==1?B=r(T.qsa(this[0],V)):B=this.map(function(){return T.qsa(this,V)}),B},closest:function(V,B){var G=this[0],K=!1;for(typeof V=="object"&&(K=r(V));G&&!(K?K.indexOf(G)>=0:T.matches(G,V));)G=G!==B&&!q(G)&&G.parentNode;return r(G)},parents:function(V){for(var B=[],G=this;G.length>0;)G=r.map(G,function(K){if((K=K.parentNode)&&!q(K)&&B.indexOf(K)<0)return B.push(K),K});return ie(B,V)},parent:function(V){return ie(x(this.pluck("parentNode")),V)},children:function(V){return ie(this.map(function(){return Se(this)}),V)},contents:function(){return this.map(function(){return a.call(this.childNodes)})},siblings:function(V){return ie(this.map(function(B,G){return o.call(Se(G.parentNode),function(K){return K!==G})}),V)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(V){return r.map(this,function(B){return B[V]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=ce(this.nodeName))})},replaceWith:function(V){return this.before(V).remove()},wrap:function(V){var B=U(V);if(this[0]&&!B)var G=r(V).get(0),K=G.parentNode||this.length>1;return this.each(function(re){r(this).wrapAll(B?V.call(this,re):K?G.cloneNode(!0):G)})},wrapAll:function(V){if(this[0]){r(this[0]).before(V=r(V));for(var B;(B=V.children()).length;)V=B.first();r(V).append(this)}return this},wrapInner:function(V){var B=U(V);return this.each(function(G){var K=r(this),re=K.contents(),le=B?V.call(this,G):V;re.length?re.wrapAll(le):K.append(le)})},unwrap:function(){return this.parent().each(function(){r(this).replaceWith(r(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(V){return this.each(function(){var B=r(this);(V===t?B.css("display")=="none":V)?B.show():B.hide()})},prev:function(V){return r(this.pluck("previousElementSibling")).filter(V||"*")},next:function(V){return r(this.pluck("nextElementSibling")).filter(V||"*")},html:function(V){return arguments.length===0?this.length>0?this[0].innerHTML:null:this.each(function(B){var G=this.innerHTML;r(this).empty().append(ue(this,V,B,G))})},text:function(V){return arguments.length===0?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=V===t?"":""+V})},attr:function(V,B){var G;return typeof V=="string"&&B===t?this.length==0||this[0].nodeType!==1?t:V=="value"&&this[0].nodeName=="INPUT"?this.val():!(G=this[0].getAttribute(V))&&V in this[0]?this[0][V]:G:this.each(function(K){if(this.nodeType===1)if(F(V))for(e in V)ge(this,e,V[e]);else ge(this,V,ue(this,B,K,this.getAttribute(V)))})},removeAttr:function(V){return this.each(function(){this.nodeType===1&&ge(this,V)})},prop:function(V,B){return V=P[V]||V,B===t?this[0]&&this[0][V]:this.each(function(G){this[V]=ue(this,B,G,this[V])})},data:function(V,B){var G=this.attr("data-"+V.replace(y,"-$1").toLowerCase(),B);return G!==null?Re(G):t},val:function(V){return arguments.length===0?this[0]&&(this[0].multiple?r(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(B){this.value=ue(this,V,B,this.value)})},offset:function(V){if(V)return this.each(function(G){var K=r(this),re=ue(this,V,G,K.offset()),le=K.offsetParent().offset(),he={top:re.top-le.top,left:re.left-le.left};K.css("position")=="static"&&(he.position="relative"),K.css(he)});if(this.length==0)return null;var B=this[0].getBoundingClientRect();return{left:B.left+window.pageXOffset,top:B.top+window.pageYOffset,width:Math.round(B.width),height:Math.round(B.height)}},css:function(V,B){if(arguments.length<2){var G=this[0],K=getComputedStyle(G,"");if(!G)return;if(typeof V=="string")return G.style[I(V)]||K.getPropertyValue(V);if(j(V)){var re={};return r.each(j(V)?V:[V],function(he,ye){re[ye]=G.style[I(ye)]||K.getPropertyValue(ye)}),re}}var le="";if($(V)=="string")!B&&B!==0?this.each(function(){this.style.removeProperty(J(V))}):le=J(V)+":"+se(V,B);else for(e in V)!V[e]&&V[e]!==0?this.each(function(){this.style.removeProperty(J(e))}):le+=J(e)+":"+se(e,V[e])+";";return this.each(function(){this.style.cssText+=";"+le})},index:function(V){return V?this.indexOf(r(V)[0]):this.parent().children().indexOf(this[0])},hasClass:function(V){return V?s.some.call(this,function(B){return this.test(ke(B))},ee(V)):!1},addClass:function(V){return V?this.each(function(B){i=[];var G=ke(this),K=ue(this,V,B,G);K.split(/\s+/g).forEach(function(re){r(this).hasClass(re)||i.push(re)},this),i.length&&ke(this,G+(G?" ":"")+i.join(" "))}):this},removeClass:function(V){return this.each(function(B){if(V===t)return ke(this,"");i=ke(this),ue(this,V,B,i).split(/\s+/g).forEach(function(G){i=i.replace(ee(G)," ")}),ke(this,i.trim())})},toggleClass:function(V,B){return V?this.each(function(G){var K=r(this),re=ue(this,V,G,ke(this));re.split(/\s+/g).forEach(function(le){(B===t?!K.hasClass(le):B)?K.addClass(le):K.removeClass(le)})}):this},scrollTop:function(V){if(this.length){var B="scrollTop"in this[0];return V===t?B?this[0].scrollTop:this[0].pageYOffset:this.each(B?function(){this.scrollTop=V}:function(){this.scrollTo(this.scrollX,V)})}},scrollLeft:function(V){if(this.length){var B="scrollLeft"in this[0];return V===t?B?this[0].scrollLeft:this[0].pageXOffset:this.each(B?function(){this.scrollLeft=V}:function(){this.scrollTo(V,this.scrollY)})}},position:function(){if(this.length){var V=this[0],B=this.offsetParent(),G=this.offset(),K=v.test(B[0].nodeName)?{top:0,left:0}:B.offset();return G.top-=parseFloat(r(V).css("margin-top"))||0,G.left-=parseFloat(r(V).css("margin-left"))||0,K.top+=parseFloat(r(B[0]).css("border-top-width"))||0,K.left+=parseFloat(r(B[0]).css("border-left-width"))||0,{top:G.top-K.top,left:G.left-K.left}}},offsetParent:function(){return this.map(function(){for(var V=this.offsetParent||l.body;V&&!v.test(V.nodeName)&&r(V).css("position")=="static";)V=V.offsetParent;return V})}},r.fn.detach=r.fn.remove,["width","height"].forEach(function(V){var B=V.replace(/./,function(G){return G[0].toUpperCase()});r.fn[V]=function(G){var K,re=this[0];return G===t?Y(re)?re["inner"+B]:q(re)?re.documentElement["scroll"+B]:(K=this.offset())&&K[V]:this.each(function(le){re=r(this),re.css(V,ue(this,G,le,re[V]()))})}});function _e(V,B){B(V);for(var G in V.childNodes)_e(V.childNodes[G],B)}return _.forEach(function(V,B){var G=B%2;r.fn[V]=function(){var K,re=r.map(arguments,function(ye){return K=$(ye),K=="object"||K=="array"||ye==null?ye:T.fragment(ye)}),le,he=this.length>1;return re.length<1?this:this.each(function(ye,Ie){le=G?Ie:Ie.parentNode,Ie=B==0?Ie.nextSibling:B==1?Ie.firstChild:B==2?Ie:null,re.forEach(function(Be){if(he)Be=Be.cloneNode(!0);else if(!le)return r(Be).remove();_e(le.insertBefore(Be,Ie),function(Oe){Oe.nodeName!=null&&Oe.nodeName.toUpperCase()==="SCRIPT"&&(!Oe.type||Oe.type==="text/javascript")&&!Oe.src&&window.eval.call(window,Oe.innerHTML)})})})},r.fn[G?V+"To":"insert"+(B?"Before":"After")]=function(K){return r(K)[V](this),this}}),T.Z.prototype=r.fn,T.uniq=x,T.deserializeValue=Re,r.zepto=T,r}();window.Zepto=Os;window.$===void 0&&(window.$=Os);(function(t){t.zepto.qsa;var e=1,r,i=Array.prototype.slice,s=t.isFunction,a=function(T){return typeof T=="string"},o={},l={},u="onfocusin"in window,c={focus:"focusin",blur:"focusout"},d={mouseenter:"mouseover",mouseleave:"mouseout"};l.click=l.mousedown=l.mouseup=l.mousemove="MouseEvents";function h(T){return T._zid||(T._zid=e++)}function f(T,I,x,R){if(I=m(I),I.ns)var P=v(I.ns);return(o[h(T)]||[]).filter(function(j){return j&&(!I.e||j.e==I.e)&&(!I.ns||P.test(j.ns))&&(!x||h(j.fn)===h(x))&&(!R||j.sel==R)})}function m(T){var I=(""+T).split(".");return{e:I[0],ns:I.slice(1).sort().join(" ")}}function v(T){return new RegExp("(?:^| )"+T.replace(" "," .* ?")+"(?: |$)")}function y(T,I){return T.del&&!u&&T.e in c||!!I}function b(T){return d[T]||u&&c[T]||T}function _(T,I,x,R,P,j,$){var U=h(T),Y=o[U]||(o[U]=[]);I.split(/\s/).forEach(function(q){if(q=="ready")return t(document).ready(x);var F=m(q);F.fn=x,F.sel=P,F.e in d&&(x=function(Q){var H=Q.relatedTarget;if(!H||H!==this&&!t.contains(this,H))return F.fn.apply(this,arguments)}),F.del=j;var W=j||x;F.proxy=function(Q){if(Q=A(Q),!Q.isImmediatePropagationStopped()){Q.data=R;var H=W.apply(T,Q._args==r?[Q]:[Q].concat(Q._args));return H===!1&&(Q.preventDefault(),Q.stopPropagation()),H}},F.i=Y.length,Y.push(F),"addEventListener"in T&&T.addEventListener(b(F.e),F.proxy,y(F,$))})}function w(T,I,x,R,P){var j=h(T);(I||"").split(/\s/).forEach(function($){f(T,$,x,R).forEach(function(U){delete o[j][U.i],"removeEventListener"in T&&T.removeEventListener(b(U.e),U.proxy,y(U,P))})})}t.event={add:_,remove:w},t.proxy=function(T,I){if(s(T)){var x=function(){return T.apply(I,arguments)};return x._zid=h(T),x}else{if(a(I))return t.proxy(T[I],T);throw new TypeError("expected function")}},t.fn.bind=function(T,I,x){return this.on(T,I,x)},t.fn.unbind=function(T,I){return this.off(T,I)},t.fn.one=function(T,I,x,R){return this.on(T,I,x,R,1)};var E=function(){return!0},N=function(){return!1},M=/^([A-Z]|returnValue$|layer[XY]$)/,O={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function A(T,I){return(I||!T.isDefaultPrevented)&&(I||(I=T),t.each(O,function(x,R){var P=I[x];T[x]=function(){return this[R]=E,P&&P.apply(I,arguments)},T[R]=N}),(I.defaultPrevented!==r?I.defaultPrevented:"returnValue"in I?I.returnValue===!1:I.getPreventDefault&&I.getPreventDefault())&&(T.isDefaultPrevented=E)),T}function D(T){var I,x={originalEvent:T};for(I in T)!M.test(I)&&T[I]!==r&&(x[I]=T[I]);return A(x,T)}t.fn.delegate=function(T,I,x){return this.on(I,T,x)},t.fn.undelegate=function(T,I,x){return this.off(I,T,x)},t.fn.live=function(T,I){return t(document.body).delegate(this.selector,T,I),this},t.fn.die=function(T,I){return t(document.body).undelegate(this.selector,T,I),this},t.fn.on=function(T,I,x,R,P){var j,$,U=this;return T&&!a(T)?(t.each(T,function(Y,q){U.on(Y,I,x,q,P)}),U):(!a(I)&&!s(R)&&R!==!1&&(R=x,x=I,I=r),(s(x)||x===!1)&&(R=x,x=r),R===!1&&(R=N),U.each(function(Y,q){P&&(j=function(F){return w(q,F.type,R),R.apply(this,arguments)}),I&&($=function(F){var W,Q=t(F.target).closest(I,q).get(0);if(Q&&Q!==q)return W=t.extend(D(F),{currentTarget:Q,liveFired:q}),(j||R).apply(Q,[W].concat(i.call(arguments,1)))}),_(q,T,R,x,I,$||j)}))},t.fn.off=function(T,I,x){var R=this;return T&&!a(T)?(t.each(T,function(P,j){R.off(P,I,j)}),R):(!a(I)&&!s(x)&&x!==!1&&(x=I,I=r),x===!1&&(x=N),R.each(function(){w(this,T,x,I)}))},t.fn.trigger=function(T,I){return T=a(T)||t.isPlainObject(T)?t.Event(T):A(T),T._args=I,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(T):t(this).triggerHandler(T,I)})},t.fn.triggerHandler=function(T,I){var x,R;return this.each(function(P,j){x=D(a(T)?t.Event(T):T),x._args=I,x.target=j,t.each(f(j,T.type||T),function($,U){if(R=U.proxy(x),x.isImmediatePropagationStopped())return!1})}),R},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(T){t.fn[T]=function(I){return I?this.bind(T,I):this.trigger(T)}}),["focus","blur"].forEach(function(T){t.fn[T]=function(I){return I?this.bind(T,I):this.each(function(){try{this[T]()}catch{}}),this}}),t.Event=function(T,I){a(T)||(I=T,T=I.type);var x=document.createEvent(l[T]||"Events"),R=!0;if(I)for(var P in I)P=="bubbles"?R=!!I[P]:x[P]=I[P];return x.initEvent(T,R,!0),A(x)}})(Os);(function(t){var e=0,r=window.document,i,s,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,o=/^(?:text|application)\/javascript/i,l=/^(?:text|application)\/xml/i,u="application/json",c="text/html",d=/^\s*$/;function h(I,x,R){var P=t.Event(x);return t(I).trigger(P,R),!P.isDefaultPrevented()}function f(I,x,R,P){if(I.global)return h(x||r,R,P)}t.active=0;function m(I){I.global&&t.active++===0&&f(I,null,"ajaxStart")}function v(I){I.global&&!--t.active&&f(I,null,"ajaxStop")}function y(I,x){var R=x.context;if(x.beforeSend.call(R,I,x)===!1||f(x,R,"ajaxBeforeSend",[I,x])===!1)return!1;f(x,R,"ajaxSend",[I,x])}function b(I,x,R,P){var j=R.context,$="success";R.success.call(j,I,$,x),P&&P.resolveWith(j,[I,$,x]),f(R,j,"ajaxSuccess",[x,R,I]),w($,x,R)}function _(I,x,R,P,j){var $=P.context;P.error.call($,R,x,I),j&&j.rejectWith($,[R,x,I]),f(P,$,"ajaxError",[R,P,I||x]),w(x,R,P)}function w(I,x,R){var P=R.context;R.complete.call(P,x,I),f(R,P,"ajaxComplete",[x,R]),v(R)}function E(){}t.ajaxJSONP=function(I,x){if(!("type"in I))return t.ajax(I);var R=I.jsonpCallback,P=(t.isFunction(R)?R():R)||"jsonp"+ ++e,j=r.createElement("script"),$=window[P],U,Y=function(W){t(j).triggerHandler("error",W||"abort")},q={abort:Y},F;return x&&x.promise(q),t(j).on("load error",function(W,Q){clearTimeout(F),t(j).off().remove(),W.type=="error"||!U?_(null,Q||"error",q,I,x):b(U[0],q,I,x),window[P]=$,U&&t.isFunction($)&&$(U[0]),$=U=void 0}),y(q,I)===!1?(Y("abort"),q):(window[P]=function(){U=arguments},j.src=I.url.replace(/\?(.+)=\?/,"?$1="+P),r.head.appendChild(j),I.timeout>0&&(F=setTimeout(function(){Y("timeout")},I.timeout)),q)},t.ajaxSettings={type:"GET",beforeSend:E,success:E,error:E,complete:E,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:u,xml:"application/xml, text/xml",html:c,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0};function N(I){return I&&(I=I.split(";",2)[0]),I&&(I==c?"html":I==u?"json":o.test(I)?"script":l.test(I)&&"xml")||"text"}function M(I,x){return x==""?I:(I+"&"+x).replace(/[&?]{1,2}/,"?")}function O(I){I.processData&&I.data&&t.type(I.data)!="string"&&(I.data=t.param(I.data,I.traditional)),I.data&&(!I.type||I.type.toUpperCase()=="GET")&&(I.url=M(I.url,I.data),I.data=void 0)}t.ajax=function(I){var x=t.extend({},I||{}),R=t.Deferred&&t.Deferred();for(i in t.ajaxSettings)x[i]===void 0&&(x[i]=t.ajaxSettings[i]);m(x),x.crossDomain||(x.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(x.url)&&RegExp.$2!=window.location.host),x.url||(x.url=window.location.toString()),O(x),x.cache===!1&&(x.url=M(x.url,"_="+Date.now()));var P=x.dataType,j=/\?.+=\?/.test(x.url);if(P=="jsonp"||j)return j||(x.url=M(x.url,x.jsonp?x.jsonp+"=?":x.jsonp===!1?"":"callback=?")),t.ajaxJSONP(x,R);var $=x.accepts[P],U={},Y=function(X,J){U[X.toLowerCase()]=[X,J]},q=/^([\w-]+:)\/\//.test(x.url)?RegExp.$1:window.location.protocol,F=x.xhr(),W=F.setRequestHeader,Q;if(R&&R.promise(F),x.crossDomain||Y("X-Requested-With","XMLHttpRequest"),Y("Accept",$||"*/*"),($=x.mimeType||$)&&($.indexOf(",")>-1&&($=$.split(",",2)[0]),F.overrideMimeType&&F.overrideMimeType($)),(x.contentType||x.contentType!==!1&&x.data&&x.type.toUpperCase()!="GET")&&Y("Content-Type",x.contentType||"application/x-www-form-urlencoded"),x.headers)for(s in x.headers)Y(s,x.headers[s]);if(F.setRequestHeader=Y,F.onreadystatechange=function(){if(F.readyState==4){F.onreadystatechange=E,clearTimeout(Q);var X,J=!1;if(F.status>=200&&F.status<300||F.status==304||F.status==0&&q=="file:"){P=P||N(x.mimeType||F.getResponseHeader("content-type")),X=F.responseText;try{P=="script"?(0,eval)(X):P=="xml"?X=F.responseXML:P=="json"&&(X=d.test(X)?null:t.parseJSON(X))}catch(ee){J=ee}J?_(J,"parsererror",F,x,R):b(X,F,x,R)}else _(F.statusText||null,F.status?"error":"abort",F,x,R)}},y(F,x)===!1)return F.abort(),_(null,"abort",F,x,R),F;if(x.xhrFields)for(s in x.xhrFields)F[s]=x.xhrFields[s];var H="async"in x?x.async:!0;F.open(x.type,x.url,H,x.username,x.password);for(s in U)W.apply(F,U[s]);return x.timeout>0&&(Q=setTimeout(function(){F.onreadystatechange=E,F.abort(),_(null,"timeout",F,x,R)},x.timeout)),F.send(x.data?x.data:null),F};function A(I,x,R,P){var j=!t.isFunction(x);return{url:I,data:j?x:void 0,success:j?t.isFunction(R)?R:void 0:x,dataType:j&&P||R}}t.get=function(I,x,R,P){return t.ajax(A.apply(null,arguments))},t.post=function(I,x,R,P){var j=A.apply(null,arguments);return j.type="POST",t.ajax(j)},t.getJSON=function(I,x,R){var P=A.apply(null,arguments);return P.dataType="json",t.ajax(P)},t.fetchJSON=function(I){var x=new XMLHttpRequest;return new Promise(function(R,P){x.onreadystatechange=function(){try{if(x.readyState!==4)return;if(x.status>=200&&x.status<300){var j=JSON.parse(x.responseText);R(j)}else P({status:x.status,statusText:x.statusText})}catch($){P({status:400,statusText:`Error fetching JSON from ${I}: ${$}`})}},x.open("GET",I,!0),x.send()})},t.fn.load=function(I,x,R){if(!this.length)return this;var P=this,j=I.split(/\s/),$,U=A(I,x,R),Y=U.success;return j.length>1&&(U.url=j[0],$=j[1]),U.success=function(q){P.html($?t("<div>").html(q.replace(a,"")).find($):q),Y&&Y.apply(P,arguments)},t.ajax(U),this};var D=encodeURIComponent;function T(I,x,R,P){var j,$=t.isArray(x),U=t.isPlainObject(x);t.each(x,function(Y,q){j=t.type(q),P&&(Y=R?P:P+"["+(U||j=="object"||j=="array"?Y:"")+"]"),!P&&$?I.add(q.name,q.value):j=="array"||!R&&j=="object"?T(I,q,R,Y):I.add(Y,q)})}t.param=function(I,x){var R=[];return R.add=function(P,j){this.push(D(P)+"="+D(j))},T(R,I,x),R.join("&").replace(/%20/g,"+")}})(Os);(function(t){t.fn.serializeArray=function(){var e=[],r;return t([].slice.call(this.get(0).elements)).each(function(){r=t(this);var i=r.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&i!="submit"&&i!="reset"&&i!="button"&&(i!="radio"&&i!="checkbox"||this.checked)&&e.push({name:r.attr("name"),value:r.val()})}),e},t.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(r){e.push(encodeURIComponent(r.name)+"="+encodeURIComponent(r.value))}),e.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var r=t.Event("submit");this.eq(0).trigger(r),r.isDefaultPrevented()||this.get(0).submit()}return this}})(Os);(function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(r,i){return r=r||[],t.extend(r,t.fn),r.selector=i||"",r.__Z=!0,r},isZ:function(r){return t.type(r)==="array"&&"__Z"in r}});try{getComputedStyle(void 0)}catch{var e=getComputedStyle;window.getComputedStyle=function(i,s){try{return e(i,s)}catch{return null}}}})(Os);const Tm=Os.getJSON,Hu=Os.ajax,Kg=Os.fetchJSON,Ri=[["millisecond",1,function(t){}],["second",1e3,function(t){t.setMilliseconds(0)}],["minute",1e3*60,function(t){t.setSeconds(0)}],["hour",1e3*60*60,function(t){t.setMinutes(0)}],["day",1e3*60*60*24,function(t){t.setHours(0)}],["month",1e3*60*60*24*30,function(t){t.setDate(1)}],["year",1e3*60*60*24*365,function(t){t.setMonth(0)}],["decade",1e3*60*60*24*365*10,function(t){var e=t.getFullYear();t.setFullYear(e-e%10)}],["century",1e3*60*60*24*365*100,function(t){var e=t.getFullYear();t.setFullYear(e-e%100)}],["millennium",1e3*60*60*24*365*1e3,function(t){var e=t.getFullYear();t.setFullYear(e-e%1e3)}]],ro=["millisecond","second","minute","hour","day","month","year"],FA=/^([\+-]?\d+?)(-\d{2}?)?(-\d{2}?)?$/,pre=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,$A={base:{millisecond:"time_short",second:"time",minute:"time_no_seconds_small_date",hour:"time_no_seconds_small_date",day:"full",month:"month",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"},short:{millisecond:"time_short",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"}},Yg=Sm.extend({initialize:function(t,e,r){typeof t=="number"?this.data={format:"yyyy mmmm",date_obj:new Date(t)}:Date==t.constructor?this.data={format:"yyyy mmmm",date_obj:t}:(this.data=JSON.parse(JSON.stringify(t)),this._createDateObj()),t.format&&!e&&(e=t.format),this._setFormat(e,r)},setDateFormat:function(t){this.data.format=t},getDisplayDate:function(t,e){if(this.data.display_date)return this.data.display_date;t||(t=Jr.fallback),t.constructor!=Jr&&(ot("First argument to getDisplayDate must be type Language"),t=Jr.fallback);var r=e||this.data.format;return t.formatDate(this.data.date_obj,r)},getMillisecond:function(){return this.getTime()},getTime:function(){return this.data.date_obj.getTime()},isBefore:function(t){if(!this.data.date_obj.constructor==t.data.date_obj.constructor)throw new at("date_compare_err");return"isBefore"in this.data.date_obj?this.data.date_obj.isBefore(t.data.date_obj):this.data.date_obj<t.data.date_obj},isAfter:function(t){if(!this.data.date_obj.constructor==t.data.date_obj.constructor)throw new at("date_compare_err");return"isAfter"in this.data.date_obj?this.data.date_obj.isAfter(t.data.date_obj):this.data.date_obj>t.data.date_obj},floor:function(t){for(var e=new Date(this.data.date_obj.getTime()),r=0;r<Ri.length;r++)if(Ri[r][2](e),Ri[r][0]==t)return new Yg(e);throw new at("invalid_scale_err",t)},_getDateData:function(){var t={year:0,month:1,day:1,hour:0,minute:0,second:0,millisecond:0};wt(t,this.data);for(var e in ro){var r=Ar(t[ro[e]]);if(!r.match(/^-?\d*$/))throw new at("invalid_date_err",ro[e]+" = '"+t[ro[e]]+"'");var i=parseInt(t[ro[e]]);isNaN(i)&&(i=e==4||e==5?1:0),t[ro[e]]=i}return t.month>0&&t.month<=12&&(t.month=t.month-1),t},_createDateObj:function(){var t=this._getDateData();this.data.date_obj=new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond),this.data.date_obj.getFullYear()!=t.year&&this.data.date_obj.setFullYear(t.year)},findBestFormat:function(t){for(var e=ro,r=0;r<e.length;r++)if(this.data[e[r]])return t?t in $A||(t="short"):t="base",$A[t][e[r]];return""},_setFormat:function(t,e){t?this.data.format=t:this.data.format||(this.data.format=this.findBestFormat()),e?this.data.format_short=e:this.data.format_short||(this.data.format_short=this.findBestFormat(!0))},getFullYear:function(){return this.data.date_obj.getFullYear()}});function UA(t){if(t.match(FA)){var e=t.match(FA).slice(1),r={year:e[0].replace("+","")};return e[1]&&(r.month=e[1].replace("-","")),e[2]&&(r.day=e[2].replace("-","")),r}if(t.match(pre))return cls.parseISODate(t);if(t.match(/^\-?\d+$/))return{year:t};var i={};if(t.match(/\d+\/\d+\/\d+/)){var s=t.match(/\d+\/\d+\/\d+/)[0];t=Ar(t.replace(s,""));var a=s.split("/");i.month=a[0],i.day=a[1],i.year=a[2]}if(t.match(/\d+\/\d+/)){var s=t.match(/\d+\/\d+/)[0];t=Ar(t.replace(s,""));var a=s.split("/");i.month=a[0],i.year=a[1]}if(t.match(":")){var o=t.split(":");if(i.hour=o[0],i.minute=o[1],o[2]){let l=o[2].split(".");i.second=l[0],i.millisecond=l[1]}}return i}const Bd=Sm.extend({initialize:function(t){if(this.year=parseInt(t),isNaN(this.year))throw new at("invalid_year_err",t)},isBefore:function(t){return this.year<t.year},isAfter:function(t){return this.year>t.year},getTime:function(){return this.year}}),BE=1e6,zE=BE*10,qE=zE*10,BA=qE*10;function Ks(t){return function(e){var r=e.getTime();return new Bd(Math.floor(r/t)*t)}}const xp=[["year",1,new Ks(1)],["decade",10,new Ks(10)],["century",100,new Ks(100)],["millennium",1e3,new Ks(1e3)],["age",BE,new Ks(BE)],["epoch",zE,new Ks(zE)],["era",qE,new Ks(qE)],["eon",BA,new Ks(BA)]],Xg=Yg.extend({initialize:function(t,e,r){Bd==t.constructor?this.data={date_obj:t}:(this.data=JSON.parse(JSON.stringify(t)),this._createDateObj()),t.format&&!e&&(e=t.format),this._setFormat(e,r)},_createDateObj:function(){var t=this._getDateData();this.data.date_obj=new Bd(t.year)},floor:function(t){for(var e=0;e<xp.length;e++)if(xp[e][0]==t){var r=xp[e][2](this.data.date_obj);return new Xg(r)}throw new at("invalid_scale_err",t)},getFullYear:function(){return this.data.date_obj.getTime()}}),zA=new RegExp(/\$\{(.+?)\}/g);class Jr{constructor(e,r){for(let a in Zs.en)this[a]=Zs.en[a];if(e&&typeof e=="string"&&e!="en"){var i=e;if(!(i in Zs)){console.log(`Expected language ${i} to be cached. Did you call the constructor directly?`);var s=EV(i,r);Kg(s).then(a=>{Zs[i]=a}).catch(a=>{console.log(`Error loading language [${s}] ${a.statusText} [${a.status}]`)})}wt(this,Zs[i])}}mergeData(e){for(k in Zs.en)e[k]&&(typeof this[k]=="object"?wt(e[k],this[k]):this[k]=e[k])}formatBigYear(e,r){var i=e.year,s=this.bigdateformats[r]||this.bigdateformats.fallback;if(s){for(var a=0;a<s.length;a++){var o=s[a];if(Math.abs(i/o[0])>1)return qA(Math.abs(i/o[0]),o[1])}return i.toString()}else return ot("Language file dateformats missing cosmological. Falling back."),qA(i,r)}_(e,r){let i=this.messages[e]||Jr.fallback.messages[e]||e;if(i.match(zA)){if(!r)throw new at("template_message_without_context");for(let s of i.matchAll(zA)){if(!(s[1]in r))throw new at("template_message_without_context");i=i.replace(s[0],r[s[1]])}}return i}formatDate(e,r){return e.constructor==Date?this.formatJSDate(e,r):e.constructor==Bd?this.formatBigYear(e,r):e.data&&e.data.date_obj?this.formatDate(e.data.date_obj,r):(ot("Unfamiliar date presented for formatting"),e.toString())}formatJSDate(e,r){var i=this,s=function(N,M){var O=i.period_labels[N];if(O)var N=M<12?O[0]:O[1];return"<span class='tl-timeaxis-timesuffix'>"+N+"</span>"},a=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,o=/[^-+\dA-Z]/g;r||(r="full");var l=this.dateformats[r]||Jr.fallback.dateformats[r];l||(l=r);var u="get",c=e[u+"Date"](),d=e[u+"Day"](),h=e[u+"Month"](),f=e[u+"FullYear"](),m=e[u+"Hours"](),v=e[u+"Minutes"](),y=e[u+"Seconds"](),b=e[u+"Milliseconds"](),_=e.getTimezoneOffset(),w={d:c,dd:rs(c),ddd:this.date.day_abbr[d],dddd:this.date.day[d],m:h+1,mm:rs(h+1),mmm:this.date.month_abbr[h],mmmm:this.date.month[h],yy:String(f).slice(2),yyyy:f<0&&this.has_negative_year_modifier()?Math.abs(f):f,h:m%12||12,hh:rs(m%12||12),H:m,HH:rs(m),M:v,MM:rs(v),s:y,ss:rs(y),l:rs(b,3),L:rs(b>99?Math.round(b/10):b),t:s("t",m),tt:s("tt",m),T:s("T",m),TT:s("TT",m),Z:(String(e).match(a)||[""]).pop().replace(o,""),o:(_>0?"-":"+")+rs(Math.floor(Math.abs(_)/60)*100+Math.abs(_)%60,4),S:["th","st","nd","rd"][c%10>3?0:(c%100-c%10!=10)*c%10]},E=l.replace(Jr.DATE_FORMAT_TOKENS,function(N){return N in w?w[N]:N.slice(1,N.length-1)});return this._applyEra(E,f)}has_negative_year_modifier(){return!!(this.era_labels.negative_year.prefix||this.era_labels.negative_year.suffix)}_applyEra(e,r){var i=r<0?this.era_labels.negative_year:this.era_labels.positive_year,s="";return i.prefix&&(s+="<span>"+i.prefix+"</span> "),s+=e,i.suffix&&(s+=" <span>"+i.suffix+"</span>"),s}}async function mre(t,e){var r=EV(t,e);try{if(!Zs[t]){let i=await Kg(r);Zs[t]=i}return new Jr(t,e)}catch(i){return console.log(`Error loading language [${r}] ${i.statusText}`),null}}function EV(t,e){if(/\.json$/.test(t))var r=t;else{var i="/locale/"+t+".json";/\/$/.test(e)&&(i=i.substr(1));var r=e+i}return r}function qA(t,e){if(e.match(/%(\.(\d+))?f/)){var r=e.match(/%(\.(\d+))?f/),i=r[0];return r[2]&&(t=t.toFixed(r[2])),e.replace(i,t)}return e}Jr.fallback={messages:{}};Jr.DATE_FORMAT_TOKENS=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g;var Zs={en:{name:"English (built-in)",lang:"en",api:{wikipedia:"en"},messages:{loading:"Loading",wikipedia:"From Wikipedia, the free encyclopedia",error:"Error",return_to_title:"Return to Title",go_to_end:"Go to the last slide",loading_content:"Loading Content",loading_timeline:"Loading Timeline... ",swipe_to_navigate:"Swipe to Navigate<br><span class='tl-button'>OK</span>",zoom_in:"Zoom in",zoom_out:"Zoom out",unknown_read_err:"An unexpected error occurred trying to read your spreadsheet data",invalid_url_err:"Unable to read Timeline data. Make sure your URL is for a Google Spreadsheet or a Timeline JSON file.",network_err:"Unable to read your Google Spreadsheet. Make sure you have published it to the web.",missing_start_date_err:"Missing start_date",invalid_start_time_without_date:"Invalid configuration: time cannot be used without date.",invalid_end_time_without_date:"Invalid configuration: end time cannot be used without end date.",date_compare_err:"Can't compare timeline date objects on different scales",invalid_scale_err:"Invalid scale",invalid_date_err:"Invalid date: month, day and year must be numbers.",invalid_separator_error:"Invalid time: misuse of : or . as separator.",invalid_hour_err:"Invalid time (hour)",invalid_minute_err:"Invalid time (minute)",invalid_second_err:"Invalid time (second)",invalid_fractional_err:"Invalid time (fractional seconds)",invalid_second_fractional_err:"Invalid time (seconds and fractional seconds)",invalid_year_err:"Invalid year",flickr_notfound_err:"Photo not found or private",flickr_invalidurl_err:"Invalid Flickr URL",imgur_invalidurl_err:"Invalid Imgur URL",twitter_load_err:"Unable to load Tweet",twitterembed_invalidurl_err:"Invalid Twitter Embed url",wikipedia_load_err:"Unable to load Wikipedia entry",wikipedia_image_load_err:"Unable to load Wikipedia image data",spotify_invalid_url:"Invalid Spotify URL",invalid_rgb_err:"Invalid RGB argument",time_scale_scale_err:"Don't know how to get date from time for scale",axis_helper_no_options_err:"Axis helper must be configured with options",axis_helper_scale_err:"No AxisHelper available for scale",invalid_integer_option:"Invalid option value—must be a whole number.",instagram_bad_request:"Invalid or private Instagram URL",template_message_without_context:"Required variables not provided for template translation message",aria_label_timeline:"Timeline",aria_label_timeline_navigation:"Timeline navigation",aria_label_timeline_content:"Timeline content",aria_label_zoomin:"Show less than ${start} to ${end}",aria_label_zoomout:"Show more than ${start} to ${end}"},date:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbr:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_abbr:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."]},era_labels:{positive_year:{prefix:"",suffix:""},negative_year:{prefix:"",suffix:"BCE"}},period_labels:{t:["a","p"],tt:["am","pm"],T:["A","P"],TT:["AM","PM"]},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time:"h:MM:ss TT' <small>'mmmm d',' yyyy'</small>'",time_short:"h:MM:ss TT",time_no_seconds_short:"h:MM TT",time_no_minutes_short:"h TT",time_no_seconds_small_date:"h:MM TT' <small>'mmmm d',' yyyy'</small>'",time_milliseconds:"l",full_long:"mmm d',' yyyy 'at' h:MM TT",full_long_small_date:"h:MM TT' <small>mmm d',' yyyy'</small>'"},bigdateformats:{fallback:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]],compact:[[1e9,"%.2f bya"],[1e6,"%.1f mya"],[1e3,"%.1f kya"],[1,"%f years ago"]],verbose:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]]}}};let bT=new Jr;Jr.fallback=bT;class js{setLanguage(e){this.language=e}getLanguage(){if(this.language){if(typeof this.language=="object")return this.language;ot(`I18NMixins.getLanguage: this.language should be object, but is ${typeof this.language}`)}return bT}_(e,r){return this.getLanguage()._(e,r)}}class Qg{constructor(e,r,i){i&&this.setLanguage(i),this._el={parent:{},container:{},message_container:{},loading_icon:{},message:{}},this.options={width:600,height:600,message_class:"tl-message",message_icon_class:"tl-loading-icon"},this.container=e,wt(this.options,r),this._el.container=Te("div",this.options.message_class),e&&(e.appendChild(this._el.container),this._el.parent=e),this.animator={},this._initLayout(),this._initEvents()}updateMessage(e){e?this._el.message.innerHTML=e:this._el.message.innerHTML=this._("loading"),!this._el.parent.atributes&&this.container.attributes&&(this.container.appendChild(this._el.container),this._el.parent=this.container)}updateDisplay(e,r){}_onMouseClick(){this.fire("clicked",this.options)}_onRemove(){this._el.parent={}}_initLayout(){this._el.message_container=Te("div","tl-message-container",this._el.container),this._el.loading_icon=Te("div",this.options.message_icon_class,this._el.message_container),this._el.message=Te("div","tl-message-content",this._el.message_container),this.updateMessage()}_initEvents(){Qe.addListener(this._el.container,"click",this._onMouseClick,this),Qe.addListener(this,"removed",this._onRemove,this)}}ar(Qg,js,or,Ls);function Mf(t,r){var r=r||"start_date";t.sort(function(i,s){return i[r].isBefore(s[r])?-1:i[r].isAfter(s[r])?1:0})}function HA(t){var e={hour:null,minute:null,second:null,millisecond:null},r=null,i=t.match(/(\s*[AaPp]\.?[Mm]\.?\s*)$/);i&&(r=Ar(i[0]),t=Ar(t.substring(0,t.lastIndexOf(r))));var s=[],a=t.match(/^\s*(\d{1,2})(\d{2})\s*$/);if(a?s=a.slice(1):(s=t.split(":"),s.length==1&&(s=t.split("."))),s.length>4)throw new at("invalid_separator_error");let o=s[0];if(e.hour=parseInt(o),r&&r.toLowerCase()[0]=="p"&&e.hour!=12?e.hour+=12:r&&r.toLowerCase()[0]=="a"&&e.hour==12&&(e.hour=0),isNaN(e.hour)||e.hour<0||e.hour>23)throw new at("invalid_hour_err",o);if(s.length>1){let c=s[1];if(e.minute=parseInt(c),isNaN(e.minute))throw new at("invalid_minute_err",c)}if(s.length>2){var l=s[2].split(/[\.,]/);if(s=l.concat(s.slice(3)),s.length>2)throw new at("invalid_second_fractional_err");if(e.second=parseInt(s[0]),isNaN(e.second))throw new at("invalid_second_err",s[0]);if(s.length==2){var u=parseInt(s[1]);if(isNaN(u))throw new at("invalid_fractional_err",s[1]);e.millisecond=100*u}}return e}const gre=new RegExp("(^-?\\d+$|^$)");function WA(t){try{return Object.keys(t).forEach(e=>{let r=t[e];if(r&&r.match&&!r.match(gre))throw`invalid value ${r} for ${e}`}),!0}catch{return!1}}const GA={human:Yg,cosmological:Xg};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:SV,setPrototypeOf:KA,isFrozen:vre,getPrototypeOf:yre,getOwnPropertyDescriptor:_re}=Object;let{freeze:nr,seal:ni,create:TV}=Object,{apply:HE,construct:WE}=typeof Reflect<"u"&&Reflect;nr||(nr=function(e){return e});ni||(ni=function(e){return e});HE||(HE=function(e,r,i){return e.apply(r,i)});WE||(WE=function(e,r){return new e(...r)});const Lf=rr(Array.prototype.forEach),wre=rr(Array.prototype.lastIndexOf),YA=rr(Array.prototype.pop),mc=rr(Array.prototype.push),bre=rr(Array.prototype.splice),Ep=rr(String.prototype.toLowerCase),Zy=rr(String.prototype.toString),XA=rr(String.prototype.match),gc=rr(String.prototype.replace),xre=rr(String.prototype.indexOf),Ere=rr(String.prototype.trim),li=rr(Object.prototype.hasOwnProperty),Qn=rr(RegExp.prototype.test),vc=Sre(TypeError);function rr(t){return function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return HE(t,e,i)}}function Sre(t){return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return WE(t,r)}}function et(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ep;KA&&KA(t,null);let i=e.length;for(;i--;){let s=e[i];if(typeof s=="string"){const a=r(s);a!==s&&(vre(e)||(e[i]=a),s=a)}t[s]=!0}return t}function Tre(t){for(let e=0;e<t.length;e++)li(t,e)||(t[e]=null);return t}function lo(t){const e=TV(null);for(const[r,i]of SV(t))li(t,r)&&(Array.isArray(i)?e[r]=Tre(i):i&&typeof i=="object"&&i.constructor===Object?e[r]=lo(i):e[r]=i);return e}function yc(t,e){for(;t!==null;){const i=_re(t,e);if(i){if(i.get)return rr(i.get);if(typeof i.value=="function")return rr(i.value)}t=yre(t)}function r(){return null}return r}const QA=nr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),e0=nr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),t0=nr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Ire=nr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),n0=nr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Cre=nr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),JA=nr(["#text"]),ZA=nr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),r0=nr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),eR=nr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Of=nr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),kre=ni(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Nre=ni(/<%[\w\W]*|[\w\W]*%>/gm),Are=ni(/\$\{[\w\W]*/gm),Rre=ni(/^data-[\-\w.\u00B7-\uFFFF]+$/),Pre=ni(/^aria-[\-\w]+$/),IV=ni(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Dre=ni(/^(?:\w+script|data):/i),Mre=ni(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),CV=ni(/^html$/i),Lre=ni(/^[a-z][.\w]*(-[.\w]+)+$/i);var tR=Object.freeze({__proto__:null,ARIA_ATTR:Pre,ATTR_WHITESPACE:Mre,CUSTOM_ELEMENT:Lre,DATA_ATTR:Rre,DOCTYPE_NAME:CV,ERB_EXPR:Nre,IS_ALLOWED_URI:IV,IS_SCRIPT_OR_DATA:Dre,MUSTACHE_EXPR:kre,TMPLIT_EXPR:Are});const _c={element:1,text:3,progressingInstruction:7,comment:8,document:9},Ore=function(){return typeof window>"u"?null:window},jre=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const s="data-tt-policy-suffix";r&&r.hasAttribute(s)&&(i=r.getAttribute(s));const a="dompurify"+(i?"#"+i:"");try{return e.createPolicy(a,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},nR=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function kV(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ore();const e=je=>kV(je);if(e.version="3.2.4",e.removed=[],!t||!t.document||t.document.nodeType!==_c.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const i=r,s=i.currentScript,{DocumentFragment:a,HTMLTemplateElement:o,Node:l,Element:u,NodeFilter:c,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:h,DOMParser:f,trustedTypes:m}=t,v=u.prototype,y=yc(v,"cloneNode"),b=yc(v,"remove"),_=yc(v,"nextSibling"),w=yc(v,"childNodes"),E=yc(v,"parentNode");if(typeof o=="function"){const je=r.createElement("template");je.content&&je.content.ownerDocument&&(r=je.content.ownerDocument)}let N,M="";const{implementation:O,createNodeIterator:A,createDocumentFragment:D,getElementsByTagName:T}=r,{importNode:I}=i;let x=nR();e.isSupported=typeof SV=="function"&&typeof E=="function"&&O&&O.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:R,ERB_EXPR:P,TMPLIT_EXPR:j,DATA_ATTR:$,ARIA_ATTR:U,IS_SCRIPT_OR_DATA:Y,ATTR_WHITESPACE:q,CUSTOM_ELEMENT:F}=tR;let{IS_ALLOWED_URI:W}=tR,Q=null;const H=et({},[...QA,...e0,...t0,...n0,...JA]);let X=null;const J=et({},[...ZA,...r0,...eR,...Of]);let ee=Object.seal(TV(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),se=null,ce=null,Se=!0,Ee=!0,ie=!1,ue=!0,ge=!1,ke=!0,Re=!1,_e=!1,V=!1,B=!1,G=!1,K=!1,re=!0,le=!1;const he="user-content-";let ye=!0,Ie=!1,Be={},Oe=null;const ze=et({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let lt=null;const vt=et({},["audio","video","img","source","image","track"]);let At=null;const Ke=et({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Ne="http://www.w3.org/1998/Math/MathML",oe="http://www.w3.org/2000/svg",pe="http://www.w3.org/1999/xhtml";let be=pe,Le=!1,Ce=null;const We=et({},[Ne,oe,pe],Zy);let yt=et({},["mi","mo","mn","ms","mtext"]),ft=et({},["annotation-xml"]);const vn=et({},["title","style","font","a","script"]);let Xt=null;const xt=["application/xhtml+xml","text/html"],jn="text/html";let St=null,yn=null;const $r=r.createElement("form"),Ti=function(Z){return Z instanceof RegExp||Z instanceof Function},$s=function(){let Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(yn&&yn===Z)){if((!Z||typeof Z!="object")&&(Z={}),Z=lo(Z),Xt=xt.indexOf(Z.PARSER_MEDIA_TYPE)===-1?jn:Z.PARSER_MEDIA_TYPE,St=Xt==="application/xhtml+xml"?Zy:Ep,Q=li(Z,"ALLOWED_TAGS")?et({},Z.ALLOWED_TAGS,St):H,X=li(Z,"ALLOWED_ATTR")?et({},Z.ALLOWED_ATTR,St):J,Ce=li(Z,"ALLOWED_NAMESPACES")?et({},Z.ALLOWED_NAMESPACES,Zy):We,At=li(Z,"ADD_URI_SAFE_ATTR")?et(lo(Ke),Z.ADD_URI_SAFE_ATTR,St):Ke,lt=li(Z,"ADD_DATA_URI_TAGS")?et(lo(vt),Z.ADD_DATA_URI_TAGS,St):vt,Oe=li(Z,"FORBID_CONTENTS")?et({},Z.FORBID_CONTENTS,St):ze,se=li(Z,"FORBID_TAGS")?et({},Z.FORBID_TAGS,St):{},ce=li(Z,"FORBID_ATTR")?et({},Z.FORBID_ATTR,St):{},Be=li(Z,"USE_PROFILES")?Z.USE_PROFILES:!1,Se=Z.ALLOW_ARIA_ATTR!==!1,Ee=Z.ALLOW_DATA_ATTR!==!1,ie=Z.ALLOW_UNKNOWN_PROTOCOLS||!1,ue=Z.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ge=Z.SAFE_FOR_TEMPLATES||!1,ke=Z.SAFE_FOR_XML!==!1,Re=Z.WHOLE_DOCUMENT||!1,B=Z.RETURN_DOM||!1,G=Z.RETURN_DOM_FRAGMENT||!1,K=Z.RETURN_TRUSTED_TYPE||!1,V=Z.FORCE_BODY||!1,re=Z.SANITIZE_DOM!==!1,le=Z.SANITIZE_NAMED_PROPS||!1,ye=Z.KEEP_CONTENT!==!1,Ie=Z.IN_PLACE||!1,W=Z.ALLOWED_URI_REGEXP||IV,be=Z.NAMESPACE||pe,yt=Z.MATHML_TEXT_INTEGRATION_POINTS||yt,ft=Z.HTML_INTEGRATION_POINTS||ft,ee=Z.CUSTOM_ELEMENT_HANDLING||{},Z.CUSTOM_ELEMENT_HANDLING&&Ti(Z.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ee.tagNameCheck=Z.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Z.CUSTOM_ELEMENT_HANDLING&&Ti(Z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ee.attributeNameCheck=Z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Z.CUSTOM_ELEMENT_HANDLING&&typeof Z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ee.allowCustomizedBuiltInElements=Z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ge&&(Ee=!1),G&&(B=!0),Be&&(Q=et({},JA),X=[],Be.html===!0&&(et(Q,QA),et(X,ZA)),Be.svg===!0&&(et(Q,e0),et(X,r0),et(X,Of)),Be.svgFilters===!0&&(et(Q,t0),et(X,r0),et(X,Of)),Be.mathMl===!0&&(et(Q,n0),et(X,eR),et(X,Of))),Z.ADD_TAGS&&(Q===H&&(Q=lo(Q)),et(Q,Z.ADD_TAGS,St)),Z.ADD_ATTR&&(X===J&&(X=lo(X)),et(X,Z.ADD_ATTR,St)),Z.ADD_URI_SAFE_ATTR&&et(At,Z.ADD_URI_SAFE_ATTR,St),Z.FORBID_CONTENTS&&(Oe===ze&&(Oe=lo(Oe)),et(Oe,Z.FORBID_CONTENTS,St)),ye&&(Q["#text"]=!0),Re&&et(Q,["html","head","body"]),Q.table&&(et(Q,["tbody"]),delete se.tbody),Z.TRUSTED_TYPES_POLICY){if(typeof Z.TRUSTED_TYPES_POLICY.createHTML!="function")throw vc('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Z.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw vc('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=Z.TRUSTED_TYPES_POLICY,M=N.createHTML("")}else N===void 0&&(N=jre(m,s)),N!==null&&typeof M=="string"&&(M=N.createHTML(""));nr&&nr(Z),yn=Z}},Zt=et({},[...e0,...t0,...Ire]),Za=et({},[...n0,...Cre]),Ji=function(Z){let me=E(Z);(!me||!me.tagName)&&(me={namespaceURI:be,tagName:"template"});const Me=Ep(Z.tagName),mt=Ep(me.tagName);return Ce[Z.namespaceURI]?Z.namespaceURI===oe?me.namespaceURI===pe?Me==="svg":me.namespaceURI===Ne?Me==="svg"&&(mt==="annotation-xml"||yt[mt]):!!Zt[Me]:Z.namespaceURI===Ne?me.namespaceURI===pe?Me==="math":me.namespaceURI===oe?Me==="math"&&ft[mt]:!!Za[Me]:Z.namespaceURI===pe?me.namespaceURI===oe&&!ft[mt]||me.namespaceURI===Ne&&!yt[mt]?!1:!Za[Me]&&(vn[Me]||!Zt[Me]):!!(Xt==="application/xhtml+xml"&&Ce[Z.namespaceURI]):!1},_n=function(Z){mc(e.removed,{element:Z});try{E(Z).removeChild(Z)}catch{b(Z)}},Us=function(Z,me){try{mc(e.removed,{attribute:me.getAttributeNode(Z),from:me})}catch{mc(e.removed,{attribute:null,from:me})}if(me.removeAttribute(Z),Z==="is")if(B||G)try{_n(me)}catch{}else try{me.setAttribute(Z,"")}catch{}},nl=function(Z){let me=null,Me=null;if(V)Z="<remove></remove>"+Z;else{const jt=XA(Z,/^[\r\n\t ]+/);Me=jt&&jt[0]}Xt==="application/xhtml+xml"&&be===pe&&(Z='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Z+"</body></html>");const mt=N?N.createHTML(Z):Z;if(be===pe)try{me=new f().parseFromString(mt,Xt)}catch{}if(!me||!me.documentElement){me=O.createDocument(be,"template",null);try{me.documentElement.innerHTML=Le?M:mt}catch{}}const en=me.body||me.documentElement;return Z&&Me&&en.insertBefore(r.createTextNode(Me),en.childNodes[0]||null),be===pe?T.call(me,Re?"html":"body")[0]:Re?me.documentElement:en},si=function(Z){return A.call(Z.ownerDocument||Z,Z,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},eo=function(Z){return Z instanceof h&&(typeof Z.nodeName!="string"||typeof Z.textContent!="string"||typeof Z.removeChild!="function"||!(Z.attributes instanceof d)||typeof Z.removeAttribute!="function"||typeof Z.setAttribute!="function"||typeof Z.namespaceURI!="string"||typeof Z.insertBefore!="function"||typeof Z.hasChildNodes!="function")},rl=function(Z){return typeof l=="function"&&Z instanceof l};function Vn(je,Z,me){Lf(je,Me=>{Me.call(e,Z,me,yn)})}const Bs=function(Z){let me=null;if(Vn(x.beforeSanitizeElements,Z,null),eo(Z))return _n(Z),!0;const Me=St(Z.nodeName);if(Vn(x.uponSanitizeElement,Z,{tagName:Me,allowedTags:Q}),Z.hasChildNodes()&&!rl(Z.firstElementChild)&&Qn(/<[/\w]/g,Z.innerHTML)&&Qn(/<[/\w]/g,Z.textContent)||Z.nodeType===_c.progressingInstruction||ke&&Z.nodeType===_c.comment&&Qn(/<[/\w]/g,Z.data))return _n(Z),!0;if(!Q[Me]||se[Me]){if(!se[Me]&&Zi(Me)&&(ee.tagNameCheck instanceof RegExp&&Qn(ee.tagNameCheck,Me)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(Me)))return!1;if(ye&&!Oe[Me]){const mt=E(Z)||Z.parentNode,en=w(Z)||Z.childNodes;if(en&&mt){const jt=en.length;for(let ln=jt-1;ln>=0;--ln){const Fn=y(en[ln],!0);Fn.__removalCount=(Z.__removalCount||0)+1,mt.insertBefore(Fn,_(Z))}}}return _n(Z),!0}return Z instanceof u&&!Ji(Z)||(Me==="noscript"||Me==="noembed"||Me==="noframes")&&Qn(/<\/no(script|embed|frames)/i,Z.innerHTML)?(_n(Z),!0):(ge&&Z.nodeType===_c.text&&(me=Z.textContent,Lf([R,P,j],mt=>{me=gc(me,mt," ")}),Z.textContent!==me&&(mc(e.removed,{element:Z.cloneNode()}),Z.textContent=me)),Vn(x.afterSanitizeElements,Z,null),!1)},zs=function(Z,me,Me){if(re&&(me==="id"||me==="name")&&(Me in r||Me in $r))return!1;if(!(Ee&&!ce[me]&&Qn($,me))){if(!(Se&&Qn(U,me))){if(!X[me]||ce[me]){if(!(Zi(Z)&&(ee.tagNameCheck instanceof RegExp&&Qn(ee.tagNameCheck,Z)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(Z))&&(ee.attributeNameCheck instanceof RegExp&&Qn(ee.attributeNameCheck,me)||ee.attributeNameCheck instanceof Function&&ee.attributeNameCheck(me))||me==="is"&&ee.allowCustomizedBuiltInElements&&(ee.tagNameCheck instanceof RegExp&&Qn(ee.tagNameCheck,Me)||ee.tagNameCheck instanceof Function&&ee.tagNameCheck(Me))))return!1}else if(!At[me]){if(!Qn(W,gc(Me,q,""))){if(!((me==="src"||me==="xlink:href"||me==="href")&&Z!=="script"&&xre(Me,"data:")===0&&lt[Z])){if(!(ie&&!Qn(Y,gc(Me,q,"")))){if(Me)return!1}}}}}}return!0},Zi=function(Z){return Z!=="annotation-xml"&&XA(Z,F)},wr=function(Z){Vn(x.beforeSanitizeAttributes,Z,null);const{attributes:me}=Z;if(!me||eo(Z))return;const Me={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:X,forceKeepAttr:void 0};let mt=me.length;for(;mt--;){const en=me[mt],{name:jt,namespaceURI:ln,value:Fn}=en,br=St(jt);let Rt=jt==="value"?Fn:Ere(Fn);if(Me.attrName=br,Me.attrValue=Rt,Me.keepAttr=!0,Me.forceKeepAttr=void 0,Vn(x.uponSanitizeAttribute,Z,Me),Rt=Me.attrValue,le&&(br==="id"||br==="name")&&(Us(jt,Z),Rt=he+Rt),ke&&Qn(/((--!?|])>)|<\/(style|title)/i,Rt)){Us(jt,Z);continue}if(Me.forceKeepAttr||(Us(jt,Z),!Me.keepAttr))continue;if(!ue&&Qn(/\/>/i,Rt)){Us(jt,Z);continue}ge&&Lf([R,P,j],sl=>{Rt=gc(Rt,sl," ")});const es=St(Z.nodeName);if(zs(es,br,Rt)){if(N&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!ln)switch(m.getAttributeType(es,br)){case"TrustedHTML":{Rt=N.createHTML(Rt);break}case"TrustedScriptURL":{Rt=N.createScriptURL(Rt);break}}try{ln?Z.setAttributeNS(ln,jt,Rt):Z.setAttribute(jt,Rt),eo(Z)?_n(Z):YA(e.removed)}catch{}}}Vn(x.afterSanitizeAttributes,Z,null)},il=function je(Z){let me=null;const Me=si(Z);for(Vn(x.beforeSanitizeShadowDOM,Z,null);me=Me.nextNode();)Vn(x.uponSanitizeShadowNode,me,null),Bs(me),wr(me),me.content instanceof a&&je(me.content);Vn(x.afterSanitizeShadowDOM,Z,null)};return e.sanitize=function(je){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},me=null,Me=null,mt=null,en=null;if(Le=!je,Le&&(je="<!-->"),typeof je!="string"&&!rl(je))if(typeof je.toString=="function"){if(je=je.toString(),typeof je!="string")throw vc("dirty is not a string, aborting")}else throw vc("toString is not a function");if(!e.isSupported)return je;if(_e||$s(Z),e.removed=[],typeof je=="string"&&(Ie=!1),Ie){if(je.nodeName){const Fn=St(je.nodeName);if(!Q[Fn]||se[Fn])throw vc("root node is forbidden and cannot be sanitized in-place")}}else if(je instanceof l)me=nl("<!---->"),Me=me.ownerDocument.importNode(je,!0),Me.nodeType===_c.element&&Me.nodeName==="BODY"||Me.nodeName==="HTML"?me=Me:me.appendChild(Me);else{if(!B&&!ge&&!Re&&je.indexOf("<")===-1)return N&&K?N.createHTML(je):je;if(me=nl(je),!me)return B?null:K?M:""}me&&V&&_n(me.firstChild);const jt=si(Ie?je:me);for(;mt=jt.nextNode();)Bs(mt),wr(mt),mt.content instanceof a&&il(mt.content);if(Ie)return je;if(B){if(G)for(en=D.call(me.ownerDocument);me.firstChild;)en.appendChild(me.firstChild);else en=me;return(X.shadowroot||X.shadowrootmode)&&(en=I.call(i,en,!0)),en}let ln=Re?me.outerHTML:me.innerHTML;return Re&&Q["!doctype"]&&me.ownerDocument&&me.ownerDocument.doctype&&me.ownerDocument.doctype.name&&Qn(CV,me.ownerDocument.doctype.name)&&(ln="<!DOCTYPE "+me.ownerDocument.doctype.name+`>
`+ln),ge&&Lf([R,P,j],Fn=>{ln=gc(ln,Fn," ")}),N&&K?N.createHTML(ln):ln},e.setConfig=function(){let je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$s(je),_e=!0},e.clearConfig=function(){yn=null,_e=!1},e.isValidAttribute=function(je,Z,me){yn||$s({});const Me=St(je),mt=St(Z);return zs(Me,mt,me)},e.addHook=function(je,Z){typeof Z=="function"&&mc(x[je],Z)},e.removeHook=function(je,Z){if(Z!==void 0){const me=wre(x[je],Z);return me===-1?void 0:bre(x[je],me,1)[0]}return YA(x[je])},e.removeHooks=function(je){x[je]=[]},e.removeAllHooks=function(){x=nR()},e}var Jg=kV();const Vre={text:["headline","text"],media:["caption","credit"]},Fre={start_date:["display_date"],end_date:["display_date"],slide:["display_date","group"],date:["display_date"]};Jg.addHook("afterSanitizeAttributes",function(t){if(t.nodeName=="A"&&"href"in t){"target"in t.attributes||t.setAttribute("target","_blank");let e=t.attributes.rel;e?e.value.indexOf("noopener")==-1&&t.setAttribute("rel",`noopener ${e.value}`):t.setAttribute("rel","noopener")}});function rR(t,e,r){Object.keys(r).forEach(i=>{var s=i=="slide"?t:t[i];s&&r[i].forEach(a=>{typeof s[a]<"u"&&(s[a]=e(s[a]))})})}function $re(t){return Jg.sanitize(t,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder","target"]})}class ho{constructor(e){if(this.title="",this.scale="",this.events=[],this.eras=[],this.event_dict={},this.messages={errors:[],warnings:[]},typeof e=="object"&&e.events){if(this.scale=e.scale,this.events=[],this._ensureValidScale(e.events),e.title){var r=this._assignID(e.title);this._tidyFields(e.title),this.title=e.title,this.event_dict[r]=this.title}for(var i=0;i<e.events.length;i++)try{this.addEvent(e.events[i],!0)}catch(s){this.logError(s)}e.eras&&e.eras.forEach((s,a)=>{try{this.addEra(s)}catch(o){this.logError("Era "+a+": "+o)}}),Mf(this.events),Mf(this.eras)}}logError(e){ot(`logError: ${e}`),this.messages.errors.push(e)}getErrors(e){return e?this.messages.errors.join(e):this.messages.errors}validate(){(typeof this.events>"u"||typeof this.events.length>"u"||this.events.length==0)&&this.logError("Timeline configuration has no events.");for(var e=0;e<this.eras.length;e++)if(typeof this.eras[e].start_date>"u"||typeof this.eras[e].end_date>"u"){var r;this.eras[e].headline?r=this.eras[e].headline:r="era "+(e+1),this.logError("All eras must have start and end dates. ["+r+"]")}}isValid(){return this.messages.errors.length==0}addEvent(e,r){var i=this._assignID(e);return typeof e.start_date>"u"?(ot("Missing start date, skipping event"),console.log(e),null):(this._processDates(e),this._tidyFields(e),this.events.push(e),this.event_dict[i]=e,r||Mf(this.events),i)}addEra(e){var r=this._assignID(e);if(typeof e.start_date>"u")throw new at("missing_start_date_err",r);this._processDates(e),this._tidyFields(e),this.eras.push({start_date:e.start_date,end_date:e.end_date,headline:e.text.headline})}_assignID(e){var r=e.unique_id;return Ar(r)||(r=e.text?Qy(e.text.headline):null),e.unique_id=Zne(this.event_dict,r),e.unique_id}_makeUniqueIdentifiers(e,r){for(var i=[e],s=0;s<r.length;s++)Ar(r[s].unique_id)&&(r[s].unique_id=Qy(r[s].unique_id),i.indexOf(r[s].unique_id)==-1?i.push(r[s].unique_id):r[s].unique_id="");if(i.length!=r.length+1){for(var s=0;s<r.length;s++)if(!r[s].unique_id){var a=r[s].text?Qy(r[s].text.headline):null;a||(a=jo(6)),i.indexOf(a)!=-1&&(a=a+"-"+s),i.push(a),r[s].unique_id=a}}}_ensureValidScale(e){if(!this.scale){this.scale="human";for(var r=0;r<e.length;r++){if(e[r].scale=="cosmological"){this.scale="cosmological";break}if(e[r].start_date&&typeof e[r].start_date.year<"u"){var i=new Xg(e[r].start_date),s=i.data.date_obj.year;if(s<-271820||s>275759){this.scale="cosmological";break}}}ot(`Determining scale dynamically: ${this.scale}`)}var a=GA[this.scale];a||this.logError("Don't know how to process dates on scale "+this.scale)}_processDates(e){var r=GA[this.scale];if(!(e.start_date instanceof r)){var i=e.start_date;if(e.start_date=new r(i),typeof e.end_date<"u"&&!(e.end_date instanceof r)){var s=e.end_date,a=!0;for(let o in i)a=a&&i[o]==s[o];a?(ot("End date same as start date is redundant; dropping end date"),delete e.end_date):e.end_date=new r(s)}}}getEarliestDate(){var e=this.events[0].start_date;return this.eras&&this.eras.length>0&&this.eras[0].start_date.isBefore(e)?this.eras[0].start_date:e}getLatestDate(){for(var e=[],r=0;r<this.events.length;r++)this.events[r].end_date?e.push({date:this.events[r].end_date}):e.push({date:this.events[r].start_date});for(var r=0;r<this.eras.length;r++)this.eras[r].end_date?e.push({date:this.eras[r].end_date}):e.push({date:this.eras[r].start_date});return Mf(e,"date"),e.slice(-1)[0].date}_tidyFields(e){function r(i,s,a){a||(a=""),i.hasOwnProperty(s)||(i[s]=a)}e.group&&(e.group=Ar(e.group)),e.text||(e.text={}),r(e.text,"text"),r(e.text,"headline"),rR(e,$re,Vre),rR(e,cre,Fre)}}function Ure(t,e){return t==null?"":(e=e||`
`,t.charAt(t.length-e.length)!==e?t:t.substring(0,t.length-e.length))}async function Bre(t){return new Promise((e,r)=>{if(t.data){var i=NV(AV(t.data,t),t);i.useMemoryStore=!0,e(i)}else t.url&&window.fetch(t.url,{mode:"cors"}).then(function(s){if(s.status!=200){s.headers.get("content-type")=="application/json"?s.text().then(a=>{r(JSON.parse(a))}):r({status_code:s.status,message:`Error fetching CSV: [${s.status} ${s.statusText}]`});return}return s.text?s.text():s}).then(function(s){if(s){var a=Hre(s,t);a.useMemoryStore=!0,e(a)}}).catch(s=>{r({status_code:500,message:`Error fetching CSV: ${s}`})})})}function NV(t,e){return e=e||{},e.noHeaderRow!==!0&&t.length>0?{fields:t[0].map((r,i)=>r&&r.trim?r.trim():`untitled${i}`),records:t.slice(1)}:{records:t}}function zre(t){var e={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var r in t)r==="trim"?e.skipinitialspace=t.trim:e[r.toLowerCase()]=t[r];return e}function AV(t,e){(!e||e&&!e.lineterminator)&&(t=qre(t,e));var r=zre(e);t=Ure(t,r.lineterminator);var i="",s=!1,a=!1,o="",l=[],u=[],c,d;for(d=function(h){return a!==!0&&(h===""?h=null:r.skipinitialspace===!0&&(h=h.trim())),h},c=0;c<t.length;c+=1)i=t.charAt(c),s===!1&&(i===r.delimiter||i===r.lineterminator)?(o=d(o),l.push(o),i===r.lineterminator&&(u.push(l),l=[]),o="",a=!1):i!==r.quotechar?o+=i:s?t.charAt(c+1)===r.quotechar?(o+=r.quotechar,c+=1):s=!1:(s=!0,a=!0);return o=d(o),l.push(o),u.push(l),r.skipinitialrows&&(u=u.slice(r.skipinitialrows)),u}function qre(t,e){return e&&!e.lineterminator?t.replace(/(\r\n|\n|\r)/gm,`
`):t}function Hre(t,e){let r=NV(AV(t,e)),i=[];return r.records.forEach(s=>{let a={};r.fields.forEach((o,l)=>a[o]=s[l]),i.push(a)}),i}function pl(t){if(t)return t.replace(/[\s,]+/g,"")}function Wre(t){let e={key:null,worksheet:0};var r=/\bkey=([-_A-Za-z0-9]+)&?/i,i=/docs.google.com\/spreadsheets(.*?)\/d\//;if(t.match(r))e.key=t.match(r)[1];else if(t.match(i)){var s=t.search(i)+t.match(i)[0].length,a=t.substr(s);e.key=a.split("/")[0],t.match(/\?gid=(\d+)/)&&(e.worksheet=t.match(/\?gid=(\d+)/)[1])}else t.match(/^\b[-_A-Za-z0-9]+$/)&&(e.key=t);return e.key?e:null}function Gre(t){return typeof t!="string"?"":t.match(/^(https?:)?\/\/?/)?{url:t}:{color:t}}function Kre(t){let e={};Object.keys(t).forEach(i=>{e[i]=Ar(t[i])});var r={media:{caption:e["Media Caption"]||"",credit:e["Media Credit"]||"",url:e.Media||"",thumbnail:e["Media Thumbnail"]||"",alt:e["Alt Text"]||""},text:{headline:e.Headline||"",text:e.Text||""},display_date:e["Display Date"]||"",group:e.Group||e.Tag||"",background:Gre(e.Background),type:e.Type||""};if(Object.keys(e).includes("Start Date")||Object.keys(e).includes("End Date"))e["Start Date"]&&(r.start_date=UA(e["Start Date"])),e["End Date"]&&(r.end_date=UA(e["End Date"]));else{if(e.Year&&(r.start_date={year:pl(e.Year),month:pl(e.Month)||"",day:pl(e.Day)||""}),e["End Year"]&&(r.end_date={year:pl(e["End Year"])||"",month:pl(e["End Month"])||"",day:pl(e["End Day"])||""}),e.Time)if(r.start_date)wt(r.start_date,HA(e.Time));else throw new at("invalid_start_time_without_date");if(e["End Time"])if(r.end_date)wt(r.end_date,HA(e["End Time"]));else throw new at("invalid_end_time_without_date");if(r.start_date&&!WA(r.start_date))throw new at("invalid_date_err");if(r.end_date&&!WA(r.end_date))throw new at("invalid_date_err")}return r}async function Yre(t,e){let r=[];t=Xre(t),await Bre({url:`${e}${t}`}).then(s=>{r=s}).catch(s=>{if(s.proxy_err_code=="response_not_csv")throw new at("Timeline could not read the data for your timeline. Make sure you have published it to the web.");let a="undefined error";throw Array.isArray(s.message)?a=s.message.join("<br>"):a=String(s.message),new at(a)});let i={events:[],errors:[],warnings:[],eras:[]};return r.forEach((s,a)=>{try{if(!ere(s)){let o=Kre(s);Zre(o,i)}}catch(o){if(o.constructor==at)i.errors.push(o);else{o.message&&(o=o.message);let l=s.Headline||a;i.errors.push(o+`[${l}]`)}}}),i}function Xre(t){if(t=t.trim(),t.match(/^[a-zA-Z0-9-_]+$/))return`https://docs.google.com/spreadsheets/d/${t}/pub?output=csv`;if(t.startsWith("https://docs.google.com/spreadsheets/")){if(t.match(/\/pub\?output=csv$/))return t;let e=new URL(t),r=new URLSearchParams(e.search);r.set("output","csv"),r.get("gid")&&r.set("single","true"),e.search=`?${r.toString()}`;let i=e.pathname.substr(0,e.pathname.lastIndexOf("/"));return e.pathname=`${i}/pub`,e.toString()}throw new at("invalid_url_err",t)}async function Qre(t,e){if(!e.sheets_proxy)throw new at("Proxy option must be set to read data from Google");var r=await Yre(t,e.sheets_proxy);if(r)return r}async function Jre(t,e){let r=null,i={};if(typeof e=="function"?r=e:typeof e=="object"&&(i=e,r=e.callback,typeof i.callback=="function"&&(r=i.callback)),!r)throw new at("Second argument to makeConfig must be either a function or an object which includes a 'callback' property with a 'function' type value");var s,a,o=Wre(t);if(o){try{a=await Qre(t,i)}catch(u){s=new ho,u.name=="NetworkError"?s.logError(new at("network_err")):u.name=="TLError"?s.logError(u):s.logError(new at("unknown_read_err",u.name)),r(s);return}if(s=new ho(a),a.errors)for(var l=0;l<a.errors.length;l++)s.logError(a.errors[l]);r(s)}else Hu({url:t,dataType:"json",success:function(u){try{s=new ho(u)}catch(c){s=new ho,s.logError(c)}r(s)},error:function(u,c,d){if(s=new ho,c=="parsererror")var d=new at("invalid_url_err");else var d=new at("unknown_read_err",c);s.logError(d),r(s)}})}function Zre(t,e){var r="event";typeof t.type<"u"&&(r=t.type,delete t.type),r=="title"?e.title?(e.warnings.push("Multiple title slides detected."),e.events.push(t)):e.title=t:r=="era"?e.eras.push(t):e.events.push(t)}class eie{constructor(e){if(e)this.scale=e.scale,this.minor=e.minor,this.major=e.major;else throw new at("axis_helper_no_options_err")}getPixelsPerTick(e){return e*this.minor.factor}getMajorTicks(e){return this._getTicks(e,this.major)}getMinorTicks(e){return this._getTicks(e,this.minor)}_getTicks(e,r){for(var i=e._scaled_padding*r.factor,s=e._earliest-i,a=e._latest+i,o=[],l=s;l<a;l+=r.factor)o.push(e.getDateFromTime(l).floor(r.name));return{name:r.name,ticks:o}}}var GE={},RV=function(t,e){GE[t]=[];for(var r=0;r<e.length-1;r++){var i=e[r],s=e[r+1];GE[t].push(new eie({scale:i[3],minor:{name:i[0],factor:i[1]},major:{name:s[0],factor:s[1]}}))}};RV("human",Ri);RV("cosmological",xp);function tie(t,e){typeof e!="number"&&(e=100);var r=t.getScale(),i=GE[r];if(!i)throw new at("axis_helper_scale_err",r);for(var s=null,a=0;a<i.length;a++){var o=i[a],l=o.getPixelsPerTick(t._pixels_per_milli);if(l>e){if(s==null)return o;var u=Math.abs(e-l),c=Math.abs(e-l);return u<c?o:s}s=o}return i[i.length-1]}const nie={millisecond:"time_milliseconds",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"compact",epoch:"compact",era:"compact",eon:"compact",eon2:"compact"};class iR{constructor(e,r){var i=e.events;this._scale=e.scale,r=wt({display_width:500,screen_multiplier:3,max_rows:null},r),this._display_width=r.display_width,this._screen_multiplier=r.screen_multiplier,this._pixel_width=this._screen_multiplier*this._display_width,this._group_labels=void 0,this._positions=[],this._pixels_per_milli=0,this._earliest=e.getEarliestDate().getTime(),this._latest=e.getLatestDate().getTime(),this._span_in_millis=this._latest-this._earliest,this._span_in_millis<=0&&(this._span_in_millis=this._computeDefaultSpan(e)),this._average=this._span_in_millis/i.length,this._pixels_per_milli=this.getPixelWidth()/this._span_in_millis,this._axis_helper=tie(this),this._scaled_padding=1/this.getPixelsPerTick()*(this._display_width/2),this._computePositionInfo(i,r.max_rows)}_computeDefaultSpan(e){if(e.scale=="human"){for(var r={},i=0;i<e.events.length;i++){var s=e.events[i].start_date.findBestFormat();r[s]=r[s]?r[s]+1:1}for(var i=Ri.length-1;i>=0;i--)if(r.hasOwnProperty(Ri[i][0])){var a=Ri[Ri.length-1];return Ri[i+1]&&(a=Ri[i+1]),a[1]}return 365*24*60*60*1e3}return 2e5}getGroupLabels(){return this._group_labels||[]}getScale(){return this._scale}getNumberOfRows(){return this._number_of_rows}getPixelWidth(){return this._pixel_width}getPosition(e){return(e-this._earliest)*this._pixels_per_milli}getPositionInfo(e){return this._positions[e]}getPixelsPerTick(){return this._axis_helper.getPixelsPerTick(this._pixels_per_milli)}getTicks(){return{major:this._axis_helper.getMajorTicks(this),minor:this._axis_helper.getMinorTicks(this)}}getDateFromTime(e){if(this._scale=="human")return new Yg(e);if(this._scale=="cosmological")return new Xg(new Bd(e));throw new at("time_scale_scale_err",this._scale)}getMajorScale(){return this._axis_helper.major.name}getMinorScale(){return this._axis_helper.minor.name}_assessGroups(e){for(var r=[],i=!1,s=0;s<e.length;s++)e[s].group&&(r.indexOf(e[s].group)<0?r.push(e[s].group):i=!0);return r.length&&i&&r.push(""),r}_computeRowInfo(e,r){for(var i=[],s=0,a=0;a<e.length;a++){var o=e[a],l=[];delete o.row;for(var u=0;u<i.length;u++)if(l.push(i[u].end-o.start),l[u]<=0){o.row=u,i[u]=o;break}if(typeof o.row>"u")if(r===null)o.row=i.length,i.push(o);else if(r>0)o.row=i.length,i.push(o),r--;else{var c=Math.min.apply(null,l),d=l.indexOf(c);o.row=d,o.end>i[d].end&&(i[d]=o),s++}}return{n_rows:i.length,n_overlaps:s}}_computePositionInfo(e,r,i){i=i||100;for(var s=[],a=!1,o=0;o<e.length;o++){var l={start:this.getPosition(e[o].start_date.getTime())};if(this._positions.push(l),typeof e[o].end_date<"u"){var u=this.getPosition(e[o].end_date.getTime());l.width=u-l.start,l.width>i?l.end=l.start+l.width:l.end=l.start+i}else l.width=i,l.end=l.start+i;e[o].group?s.indexOf(e[o].group)<0&&s.push(e[o].group):a=!0}if(s.length){a&&s.push("");for(var d=[],o=0;o<s.length;o++)d[o]={label:s[o],idx:o,positions:[],n_rows:1,n_overlaps:0};for(var o=0;o<this._positions.length;o++){var l=this._positions[o];l.group=s.indexOf(e[o].group||""),l.row=0;for(var h=d[l.group],f=h.positions.length-1;f>=0;f--)h.positions[f].end>l.start&&h.n_overlaps++;h.positions.push(l)}for(var m=s.length;;){var v=Math.max(0,r-m);if(!v||(d.sort(function(w,E){return w.n_overlaps>E.n_overlaps?-1:w.n_overlaps<E.n_overlaps?1:w.idx-E.idx}),!d[0].n_overlaps))break;for(var m=0,o=0;o<d.length;o++){var h=d[o];if(h.n_overlaps&&v){var y=this._computeRowInfo(h.positions,h.n_rows+1);h.n_rows=y.n_rows,h.n_overlaps=y.n_overlaps,v--}m+=h.n_rows}}this._number_of_rows=m,this._group_labels=[],d.sort(function(_,w){return _.idx-w.idx});for(var o=0,b=0;o<d.length;o++){this._group_labels.push({label:d[o].label,rows:d[o].n_rows});for(var f=0;f<d[o].positions.length;f++){var l=d[o].positions[f];l.row+=b}b+=d[o].n_rows}}else{var c=this._computeRowInfo(this._positions,r);this._number_of_rows=c.n_rows}}getAxisTickDateFormat(e){return this._scale=="cosmological"?"compact":nie[e]}}class PV{constructor(e){this._el={parent:{},container:{},message:{}},this.options={width:600,height:600},this.data={label:"",rows:1},this._el.container=Te("div","tl-timegroup"),wt(this.data,e),this.animator={},this._initLayout(),this._initEvents()}updateDisplay(e,r){}setRowPosition(e,r){this.options.height=r*this.data.rows,this.setPosition({top:e}),this._el.container.style.height=this.options.height+"px"}setAlternateRowColor(e,r){var i="tl-timegroup";e&&(i+=" tl-timegroup-alternate"),r&&(i+=" tl-timegroup-hidden"),this._el.container.className=i}_onMouseClick(){this.fire("clicked",this.options)}_initLayout(){this._el.message=Te("div","tl-timegroup-message",this._el.container),this._el.message.innerHTML=this.data.label}_initEvents(){Qe.addListener(this._el.container,"click",this._onMouseClick,this)}_updateDisplay(e,r,i){}}ar(PV,or,Ls);class MV{constructor(e,r,i,s){this.start_date=e,this.end_date=r,this.headline=i,this._el={container:{},background:{},content_container:{},content:{},text:{}},this._text={},this._state={loaded:!1},this.options={duration:1e3,ease:Gg,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,wt(this.options,s),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(e){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.start_date.getTime()}getEndTime(){return this.end_date?this.end_date.getTime():!1}setHeight(e){var r=12,i=1;this._el.content_container.style.height=e+"px",this._el.content.className="tl-timeera-content",Hg?(i=Math.floor(e/(r+2)),i<1&&(i=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=i):(i=e/r,i>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=i*r+"px")}setWidth(e){this.end_date&&(this._el.container.style.width=e+"px",e>this.options.marker_width_min?(this._el.content_container.style.width=e+"px",this._el.content_container.className="tl-timeera-content-container tl-timeera-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timeera-content-container"))}setClass(e){this._el.container.className=e}setRowPosition(e,r){this.setPosition({top:e}),r<56&&this._el.content_container.remove("tl-timeera-content-container-small")}setColor(e){this._el.container.className="tl-timeera tl-timeera-color"+e}_initLayout(){this._el.container=Te("div","tl-timeera"),this.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timeera tl-timeera-with-end"),this._el.content_container=Te("div","tl-timeera-content-container",this._el.container),this._el.background=Te("div","tl-timeera-background",this._el.content_container),this._el.content=Te("div","tl-timeera-content",this._el.content_container),this._el.text=Te("div","tl-timeera-text",this._el.content),this._text=Te("h2","tl-headline",this._el.text),this.headline&&this.headline!=""&&(this._text.innerHTML=Xl(this.headline)),this.onLoaded()}_initEvents(){}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}ar(MV,or,Ls);function rie(t){const e=t.getBoundingClientRect();return e.left>=0&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}class LV{constructor(e,r,i){i&&this.setLanguage(i),this._el={container:{},content_container:{},major:{},minor:{}},this._text={},this._state={loaded:!1},this.data={},this.options={duration:1e3,ease:Gg,width:600,height:600},this.active=!1,this.animator={},this.axis_helper={},this.minor_ticks=[],this.major_ticks=[],typeof e=="object"?this._el.container=e:this._el.container=Ih(e),wt(this.options,r),this._initLayout(),this._initEvents()}show(){}hide(){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}getLeft(){return this._el.container.style.left.slice(0,-2)}drawTicks(e,r){var i=e.getTicks();this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor",this._el.major.style.opacity=0,this._el.minor.style.opacity=0,this.major_ticks=this._createTickElements(i.major.ticks,this._el.major,e.getAxisTickDateFormat(i.major.name)),this.minor_ticks=this._createTickElements(i.minor.ticks,this._el.minor,e.getAxisTickDateFormat(i.minor.name),i.major.ticks),this.positionTicks(e,r,!0),this._el.major.className="tl-timeaxis-major tl-animate-opacity tl-timeaxis-animate-opacity",this._el.minor.className="tl-timeaxis-minor tl-animate-opacity tl-timeaxis-animate-opacity",this._el.major.style.opacity=1,this._el.minor.style.opacity=1}_createTickElements(e,r,i,s){r.innerHTML="";var a={},o=new Date(-1,13,-30);if(a[o.getTime()]=!0,s)for(var l=0;l<s.length;l++)a[s[l].getTime()]=!0;for(var u=[],l=0;l<e.length;l++){var c=e[l];if(!(c.getTime()in a)){var d=Te("div","tl-timeaxis-tick",r),h=Te("span","tl-timeaxis-tick-text tl-animate-opacity",d);let m=c.getDisplayDate(this.getLanguage(),i);h.innerHTML=m,u.push({tick:d,tick_text:h,display_date:m,date:c})}}return u}positionTicks(e,r,i){i?(this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor"):(this._el.major.className="tl-timeaxis-major tl-timeaxis-animate",this._el.minor.className="tl-timeaxis-minor tl-timeaxis-animate"),this._positionTickArray(this.major_ticks,e,r),this._positionTickArray(this.minor_ticks,e,r)}_positionTickArray(e,r,i){if(e[1]&&e[0]){var s=r.getPosition(e[1].date.getMillisecond())-r.getPosition(e[0].date.getMillisecond()),a=1;s<i&&(a=Math.round(i/r.getPixelsPerTick()));for(var o=1,l=0;l<e.length;l++){var u=e[l];u.tick.style.left=r.getPosition(u.date.getMillisecond())+"px",u.tick_text.innerHTML=u.display_date,a>1?o>=a?(o=1,u.tick_text.style.opacity=1,u.tick.className="tl-timeaxis-tick"):(o++,u.tick_text.style.opacity=0,u.tick.className="tl-timeaxis-tick tl-timeaxis-tick-hidden"):(u.tick_text.style.opacity=1,u.tick.className="tl-timeaxis-tick")}}}getVisibleTicks(){return{major:this._getVisibleTickArray(this.major_ticks),minor:this._getVisibleTickArray(this.minor_ticks)}}_getVisibleTickArray(e){return e.filter(({tick:r})=>rie(r))}_initLayout(){this._el.content_container=Te("div","tl-timeaxis-content-container",this._el.container),this._el.major=Te("div","tl-timeaxis-major",this._el.content_container),this._el.minor=Te("div","tl-timeaxis-minor",this._el.content_container),this.onLoaded()}_initEvents(){}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}ar(LV,or,Ls,js);class OV{constructor(e,r,i){this._el={container:{},content_container:{},content:{},headline_container:{},headline:{},date:{}},this.options={title:!1},this.data={unique_id:"",headline:"headline",text:"text"},ire(this,e),wt(this.options,r),this._el.container=Te("div","tl-text"),this._el.container.id=this.data.unique_id,this._initLayout(),i&&i.appendChild(this._el.container)}show(){}hide(){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}headlineHeight(){return this._el.headline.offsetHeight+40}addDateText(e){this._el.date.innerHTML=e}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){if(this._el.content_container=Te("div","tl-text-content-container",this._el.container),this._el.headline_container=Te("div","tl-text-headline-container",this._el.content_container),this.data.headline!=""){var e="tl-headline";this.options.title&&(e="tl-headline tl-headline-title"),this._el.headline=Te("h2",e,this._el.headline_container),this._el.headline.innerHTML=this.data.headline}if(this._el.date=Te("h3","tl-headline-date",this._el.headline_container),this.data.text!=""){var r="";r+=sre(this.options.autolink==!0?UE(this.data.text):this.data.text),this._el.content=Te("div","tl-text-content",this._el.content_container),this._el.content.innerHTML=r}this.onLoaded()}}ar(OV,or);class Ot{constructor(e,r,i){i&&this.setLanguage(i),this._el={container:{},content_container:{},content:{},content_item:{},content_link:{},caption:null,credit:null,parent:{},link:null},this.player=null,this.timer=null,this.load_timer=null,this.message=null,this.media_id=null,this._state={loaded:!1,show_meta:!1,media_loaded:!1},this.data={unique_id:null,url:null,credit:null,caption:null,credit_alternate:null,caption_alternate:null,link:null,link_target:null},this.options={api_key_flickr:"bd3a7c45ddd52f3101825d41563a6125",api_key_googlemaps:"AIzaSyB9dW8e_iRrATFa8g24qB6BDBGdkrLDZYI",api_key_embedly:"",credit_height:0,caption_height:0,background:0},this.animator={},wt(this.options,r),wt(this.data,e),this.options.background||(this._el.container=Te("div","tl-media"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._initLayout())}loadMedia(){var e=this;if(!this._state.loaded)try{this.load_timer=setTimeout(function(){e.loadingMessage(),e._loadMedia(),e._updateDisplay()},1200)}catch(r){ot("Error loading media for ",this._media),ot(r)}}_updateMessage(e){this.message&&this.message.updateMessage(e)}loadingMessage(){this._updateMessage(this._("loading")+" "+this.options.media_name)}errorMessage(e){e?e=this._("error")+": "+e:e=this._("error"),this._updateMessage(e)}updateMediaDisplay(e){this._state.loaded&&!this.options.background&&(Xo?this._el.content_item.style.maxHeight=this.options.height/2+"px":this._el.content_item.style.maxHeight=this.options.height-this.options.credit_height-this.options.caption_height-30+"px",this._el.container.style.maxWidth=this.options.width+"px",_u&&this._el.content_item.offsetWidth>this._el.content_item.offsetHeight,this._updateMediaDisplay(e),this._state.media_loaded&&(this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")))}_loadMedia(){this.onLoaded()}_updateMediaDisplay(e){_u&&(this._el.content_item.style.maxWidth=this.options.width+"px",this._el.content_item.style.width="auto")}_getMeta(){}_getImageURL(e,r){return""}show(){}hide(){}addTo(e){e.appendChild(this._el.container),this.onAdd()}removeFrom(e){e.removeChild(this._el.container),this.onRemove()}getImageURL(e,r){return this._getImageURL(e,r)}updateDisplay(e,r,i){this._updateDisplay(e,r,i)}stopMedia(){try{this._stopMedia()}catch(e){ot(`stopMedia() exception: ${e}`)}}loadErrorDisplay(e){try{this._el.content.removeChild(this._el.content_item)}catch{}this._el.content_item=Te("div","tl-media-item tl-media-loaderror",this._el.content),this._el.content_item.innerHTML="<div class='tl-icon-"+this.options.media_type+"'></div><p>"+e+"</p>",this.onLoaded(!0)}onLoaded(e){this._state.loaded=!0,this.fire("loaded",this.data),this.message&&this.message.hide(),e||this.options.background||this.showMeta(),this.updateDisplay()}onMediaLoaded(e){this._state.media_loaded=!0,this.fire("media_loaded",this.data),this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")}showMeta(e,r){this._state.show_meta=!0,this.data.credit&&this.data.credit!=""&&(this._el.credit=Te("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.options.autolink==!0?UE(this.data.credit):this.data.credit,this.options.credit_height=this._el.credit.offsetHeight),this.data.caption&&this.data.caption!=""&&(this._el.caption=Te("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.options.autolink==!0?UE(this.data.caption):this.data.caption,this.options.caption_height=this._el.caption.offsetHeight),(!this.data.caption||!this.data.credit)&&this.getMeta()}getMeta(){this._getMeta()}updateMeta(){!this.data.credit&&this.data.credit_alternate&&(this._el.credit=Te("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.data.credit_alternate,this.options.credit_height=this._el.credit.offsetHeight),!this.data.caption&&this.data.caption_alternate&&(this._el.caption=Te("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.data.caption_alternate,this.options.caption_height=this._el.caption.offsetHeight),this.updateDisplay()}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){this.message=new Qg(this._el.container,this.options,this.getLanguage()),this._el.content_container=Te("div","tl-media-content-container",this._el.container),this.data.link&&this.data.link!=""?(this._el.link=Te("a","tl-media-link",this._el.content_container),this._el.link.href=this.data.link,this.data.link_target&&this.data.link_target!=""?this._el.link.target=this.data.link_target:this._el.link.target="_blank",this._el.link.target=="_blank"&&this._el.link.setAttribute("rel","noopener"),this._el.content=Te("div","tl-media-content",this._el.link)):this._el.content=Te("div","tl-media-content",this._el.content_container)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r),i&&(this.options.layout=i),this._el.credit&&(this.options.credit_height=this._el.credit.offsetHeight),this._el.caption&&(this.options.caption_height=this._el.caption.offsetHeight+5),this.updateMediaDisplay(this.options.layout)}domCreate(...e){return Te(...e)}_stopMedia(){}}ar(Ot,or,js);let sR=class extends Ot{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=this,r="tl-media-item tl-media-image tl-media-shadow";(this.data.url.match(/.png(\?.*)?$/)||this.data.url.match(/.svg(\?.*)?$/))&&(r="tl-media-item tl-media-image"),this._el.content_item=this.domCreate("img",r,this._el.content),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=wu(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=wu(this.data.caption)),this._el.content_item.addEventListener("load",function(i){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL()}getImageURL(e,r){return Wg(this.data.url)}_updateMediaDisplay(e){_u&&(this._el.content_item.style.width="auto")}};class iie{constructor(e){this.doc=e,this.pending={},this.queue={css:[],js:[]},this.styleSheets=e.styleSheets,this.env=this.getEnv(),this.head=this.doc.head||this.doc.getElementsByTagName("head")[0],this.pollCount=0}createNode(e,r){var i=this.doc.createElement(e),s;for(s in r)r.hasOwnProperty(s)&&i.setAttribute(s,r[s]);return i}finish(e){var r=this.pending[e],i,s;r&&(i=r.callback,s=r.urls,s.shift(),this.pollCount=0,s.length||(i&&i.call(r.context,r.obj),this.pending[e]=null,this.queue[e].length&&this.load(e)))}getEnv(){var e=navigator.userAgent,r={async:this.doc.createElement("script").async===!0};return(r.webkit=/AppleWebKit\//.test(e))||(r.ie=/MSIE/.test(e))||(r.opera=/Opera/.test(e))||(r.gecko=/Gecko\//.test(e))||(r.unknown=!0),r}load(e,r,i,s,a){var o=(function(){this.finish(e)}).bind(this),l=e==="css",u=[],c,d,h,f,m,v;if(r)if(r=typeof r=="string"?[r]:r.concat(),l||this.env.async||this.env.gecko||this.env.opera)this.queue[e].push({urls:r,callback:i,obj:s,context:a});else for(c=0,d=r.length;c<d;++c)this.queue[e].push({urls:[r[c]],callback:c===d-1?i:null,obj:s,context:a});if(!(this.pending[e]||!(f=this.pending[e]=this.queue[e].shift()))){for(m=f.urls,c=0,d=m.length;c<d;++c)v=m[c],l?h=this.env.gecko?this.createNode("style"):this.createNode("link",{href:v,rel:"stylesheet"}):(h=this.createNode("script",{src:v}),h.async=!1),h.className="lazyload",h.setAttribute("charset","utf-8"),this.env.ie&&!l?h.onreadystatechange=function(){/loaded|complete/.test(h.readyState)&&(h.onreadystatechange=null,o())}:l&&(this.env.gecko||this.env.webkit)?this.env.webkit?(f.urls[c]=h.href,this.pollWebKit()):(h.innerHTML='@import "'+v+'";',this.pollGecko(h)):h.onload=h.onerror=o,u.push(h);for(c=0,d=u.length;c<d;++c)this.head.appendChild(u[c])}}pollGecko(e){var r;try{r=!!e.sheet.cssRules}catch{if(this.pollCount+=1,this.pollCount<200){var i=this;setTimeout(function(){i.pollGecko(e)},50)}else r&&this.finish("css");return}this.finish("css")}pollWebKit(){var e=this.pending.css,r;if(e){for(r=this.styleSheets.length;--r>=0;)if(this.styleSheets[r].href===e.urls[0]){this.finish("css");break}this.pollCount+=1,e&&(this.pollCount<200?setTimeout(this.pollWebKit.bind(this),50):this.finish("css"))}}css(e,r,i,s){this.load("css",e,r,i,s)}js(e,r,i,s){this.load("js",e,r,i,s)}}function Vo(t,e,r,i){jV.js(t,e,r,i)}function i0(t,e,r,i){jV.css(t,e,r,i)}let jV=new iie(document);class sie extends Ot{_loadMedia(){var e=this,r;this.youtube_loaded=!1,this._el.content_item=this.domCreate("div","tl-media-item tl-media-youtube tl-media-shadow",this._el.content),this._el.content_item.id=jo(7),r=are(this.data.url),this.media_id={},this.data.url.match("v=")?this.media_id.id=r.v:this.data.url.match("/embed/")?this.media_id.id=this.data.url.split("embed/")[1].split(/[?&]/)[0]:this.data.url.match(/v\/|v=|youtu\.be\//)?this.media_id.id=this.data.url.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0]:ot("YOUTUBE IN URL BUT NOT A VALID VIDEO"),this.data.url.match("start=")?this.media_id.start=Jy(this.data.url.split("start=")[1]):this.data.url.match("t=")&&(this.media_id.start=Jy(this.data.url.split("t=")[1])),this.data.url.match("end=")&&(this.media_id.end=Jy(this.data.url.split("end=")[1])),this.media_id.hd=typeof r.hd<"u",Vo("https://www.youtube.com/iframe_api",function(){e.createMedia()})}_updateMediaDisplay(){this._el.content_item.style.height=Qo.r16_9({w:this.options.width})+"px",this._el.content_item.style.width=this.options.width+"px"}_stopMedia(){if(this.youtube_loaded)try{this.player.getPlayerState()==YT.PlayerState.PLAYING&&this.player.pauseVideo()}catch(e){ot(e)}}createMedia(){var e=this;clearTimeout(this.timer),typeof YT<"u"&&typeof YT.Player<"u"?this.player=new YT.Player(this._el.content_item.id,{playerVars:{enablejsapi:1,color:"white",controls:1,start:this.media_id.start,end:this.media_id.end,fs:1},videoId:this.media_id.id,events:{onReady:function(){e.onPlayerReady(),e.onLoaded()},onStateChange:e.onStateChange}}):this.timer=setTimeout(function(){e.createMedia()},1e3)}onPlayerReady(e){this.youtube_loaded=!0,this._el.content_item=document.getElementById(this._el.content_item.id),this.onMediaLoaded()}onStateChange(e){e.data==YT.PlayerState.ENDED&&(e.target.seekTo(0),e.target.pauseVideo())}}class aie extends Ot{_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-map tl-media-shadow",this._el.content),this.media_id=this.data.url,this.mapframe=this.domCreate("iframe","",this._el.content_item),this.mapframe.width="100%",this.mapframe.height="100%",this.mapframe.frameBorder="0",this.mapframe.src=this.makeGoogleMapsEmbedURL(this.media_id,this.options.api_key_googlemaps),this.onLoaded()}_updateMediaDisplay(){if(this._state.loaded){var e=Qo.square({w:this._el.content_item.offsetWidth});this._el.content_item.style.height=e.h+"px"}}makeGoogleMapsEmbedURL(e,r){var i=!1;function s(h){function f(y,b){if(y.slice(-1)=="z")b.zoom=y;else if(y.slice(-1)=="m")b.zoom=14,b.maptype="satellite";else if(y.slice(-1)=="t"){if(i=!0,v=="place")var _=h.match(d.place)[3]+","+h.match(d.place)[4];else{var _=b.center;delete b.center}b={},b.location=_,streetview_params=y.split(",");for(let E in a.streetview){var w=parseInt(E)+1;a.streetview[E]=="pitch"&&streetview_params[w]=="90t"?b[a.streetview[E]]=0:b[a.streetview[E]]=streetview_params[w].slice(0,-1)}}return b}function m(y,b){var _={},w=b[1],E=b[b.length-1];for(let M in a[y]){var N=parseInt(M)+2;a[y][M]=="center"?_[a[y][M]]=b[N]+","+b[++N]:_[a[y][M]]=b[N]}return _=f(E,_),_.key=r,i==!0&&(y="streetview"),w+"/embed/v1/"+y+ore(_)}let v="view";return h.match(d.place)?v="place":h.match(d.directions)?v="directions":h.match(d.search)&&(v="search"),m(v,h.match(d[v]))}var a={view:["center"],place:["q","center"],directions:["origin","destination","center"],search:["q","center"],streetview:["fov","heading","pitch"]},o=/(https:\/\/.+google.+?\/maps)/,l=/@([-\d.]+),([-\d.]+)/,u=/([\w\W]+)/,c=/,((?:[-\d.]+[zmayht],?)*)/,d={view:new RegExp(o.source+"/"+l.source+c.source),place:new RegExp(o.source+"/place/"+u.source+"/"+l.source+c.source),directions:new RegExp(o.source+"/dir/"+u.source+"/"+u.source+"/"+l.source+c.source),search:new RegExp(o.source+"/search/"+u.source+"/"+l.source+c.source)};return s(e)}}class oie extends Ot{constructor(e,r,i){super(e,r,i),this.blockquote=Jg.sanitize(this.data.url)}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-blockquote",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this._el.content_item.innerHTML=this.blockquote,this.onLoaded()}updateMediaDisplay(){}}class lie extends Ot{_loadMedia(){var e,r,i=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-wikipedia",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.media_id=this.data.url.split("wiki/")[1].split("#")[0].replace("_"," "),this.media_id=this.media_id.replace(" ","%20"),r=this.data.url.split("//")[1].split(".wikipedia")[0],e="https://"+r+".wikipedia.org/w/api.php?action=query&prop=extracts|pageimages&redirects=&titles="+this.media_id+"&exintro=1&format=json&callback=?",Hu({type:"GET",url:e,dataType:"json",success:function(s){i.createMedia(s)},error:function(s,a){var o="";o+=i._("wikipedia_load_err")+"<br/>"+i.media_id+"<br/>"+a,i.loadErrorDisplay(o)}})}createMedia(e){var r="";if(e.query){var i="",r={entry:{},title:"",text:"",extract:"",paragraphs:1,page_image:"",text_array:[]};r.entry=lre(e.query.pages,0),r.extract=r.entry.extract,r.title=r.entry.title,r.page_image=r.entry.thumbnail,r.extract.match("<p>")?r.text_array=r.extract.split("<p>"):r.text_array.push(r.extract);for(var s=0;s<r.text_array.length;s++)s+1<=r.paragraphs&&s+1<r.text_array.length&&(r.text+="<p>"+r.text_array[s+1]);i+="<span class='tl-icon-wikipedia'></span>",i+="<div class='tl-wikipedia-title'><h4><a href='"+this.data.url+"' target='_blank' rel='noopener'>"+r.title+"</a></h4>",i+="<span class='tl-wikipedia-source'>"+this._("wikipedia")+"</span></div>",r.page_image,i+=r.text,r.extract.match("REDIRECT")||(this._el.content_item.innerHTML=i,this.onLoaded())}}updateMediaDisplay(){}}function uie(t){if(t.match(/^.+#\/media\/.+/))return`File:${t.split("#")[1].split(":")[1]}`;if(t.match(/^.*commons.wikimedia.org\/wiki\/File:.+/)){let e=t.split("/");return e[e.length-1]}return null}function cie(t){let e={};if(t.query&&t.query.pages){let r=Object.keys(t.query.pages);e.page_id=r[0];let i=t.query.pages[e.page_id];e.url=i.imageinfo[0].thumburl,i.entityterms&&i.entityterms.label&&(e.label=i.entityterms.label[0])}return e}class aR extends Ot{_loadMedia(){var e,r=Math.round(this.options.width)||1e3,i=this.getLanguage().lang.toLowerCase(),s=this;try{this.establishMediaID(),e=`https://commons.wikimedia.org/w/api.php?action=query&titles=${this.media_id}&prop=imageinfo|entityterms&iiprop=url&&iiurlwidth=${r}&format=json&origin=*&wbetlanguage=${i}`,Tm(e,function(a){let o=cie(a);o.url?(s.base_image_url=o.url,s.page_id=o.page_id,!s.data.alt&&o.label&&(s.data.alt=o.label),s.options.background||s.createMedia(),s.onLoaded()):s.loadErrorDisplay(s._("wikipedia_image_load_err"))})}catch(a){s.loadErrorDisplay(s._(a.message_key))}}establishMediaID(){let e=uie(this.data.url);if(e)this.media_id=e;else throw new at("Invalid Wikipedia Image URL")}createMedia(){var e=this;if(this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-wikipedia-image tl-media-shadow",this._el.content),this.data.alt)this._el.content_item.alt=this.data.alt;else if(this.page_id){let r=`M${this.page_id}`,i=`https://commons.wikimedia.org/w/api.php?action=wbgetentities&format=json&ids=${r}&format=json&origin=*`;Kg(i).then(s=>{if(s.entities&&s.entities[r]){let a=s.entities[r].labels,o=e.getLanguage().lang.toLowerCase(),l=null;a[o]?l=a[o]:o.length>2&&a[o.substr(0,2)]?l=a[o.substr(0,2)]:a.en&&(l=a.en),l?(console.log(`wikibase_id: ${e.media_id} alt ${l.value}`),e.data.alt=l.value,e._el.content_item.alt=e.data.alt):console.log(`wikibase_id: ${e.media_id} ain't got no alt`)}})}this.data.title&&(this._el.content_item.title=this.data.title),this._el.content_item.addEventListener("load",function(r){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}_getImageURL(e,r){if(e&&this.base_image_url){let i=this.base_image_url.match(/(\/[\d\.]+px-)/);if(i)return e=Math.round(e),this.base_image_url.replace(i[1],`/${e}px-`)}return this.base_image_url}}class die extends Ot{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-soundcloud tl-media-shadow",this._el.content),this.media_id=this.data.url,e="https://soundcloud.com/oembed?url="+this.media_id+"&format=js&callback=?",Tm(e,function(i){Vo("https://w.soundcloud.com/player/api.js",function(){r.createMedia(i)})})}createMedia(e){this._el.content_item.innerHTML=e.html,self.widget=SC.Widget(this._el.content_item.querySelector("iframe")),this.soundCloudCreated=!0,this.onLoaded()}_stopMedia(){this.soundCloudCreated&&self.widget.pause()}}class hie extends Ot{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vimeo tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0];var i=null;this.data.url.match(/#t=([^&]+).*/)&&(i=this.data.url.match(/#t=([^&]+).*/)[1]),e="https://player.vimeo.com/video/"+this.media_id+"?api=1&title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff",i&&(e=e+="&amp;#t="+i),this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(s){r.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=Qo.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player&&this.player.contentWindow&&this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(e){ot(e)}}}class fie extends Ot{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-dailymotion",this._el.content),this.data.url.indexOf("dai.ly/")!=-1?this.media_id=this.data.url.substr(this.data.url.indexOf("dai.ly/")+7):this.data.url.match("video")?this.media_id=this.data.url.split("video/")[1].split(/[?&]/)[0]:this.media_id=this.data.url.split("embed/")[1].split(/[?&]/)[0],this.media_id.indexOf("_")!=-1&&(this.media_id=this.media_id.split("_")[0]),e="https://www.dailymotion.com/embed/video/"+this.media_id+"?api=postMessage",this._el.content_item.innerHTML="<iframe autostart='false' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._state.loaded&&(this._el.content_item.style.height=Qo.r16_9({w:this._el.content_item.offsetWidth})+"px")}_stopMedia(){this._state.loaded&&this._el.content_item.querySelector("iframe").contentWindow.postMessage('{"command":"pause","parameters":[]}',"*")}}class pie extends Ot{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vine tl-media-shadow",this._el.content),this.media_id=this.data.url.split("vine.co/v/")[1],e="https://vine.co/v/"+this.media_id+"/embed/simple",this._el.content_item.innerHTML="<iframe frameborder='0' width='100%' height='100%' src='"+e+"'></iframe><script async src='https://platform.vine.co/static/scripts/embed.js' charset='utf-8'><\/script>",this.onLoaded()}_updateMediaDisplay(){var e=Qo.square({w:this._el.content_item.offsetWidth,h:this.options.height});this._el.content_item.style.height=e.h+"px"}_stopMedia(){this._el.content_item.querySelector("iframe").contentWindow.postMessage("pause","*")}}class mie extends Ot{_loadMedia(){var e,r=this;if(this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.data.url.match("^(https?:)?/*(www.)?(twitter|x).com"))this.data.url.match("status/")?this.media_id=this.data.url.split("status/")[1]:this.data.url.match("statuses/")?this.media_id=this.data.url.split("statuses/")[1]:this.media_id="";else if(this.data.url.match(`<blockquote class=['"]twitter-tweet['"]`)){var i=this.data.url.match(/(status|statuses)\/(\d+)/);if(i&&i.length>2)this.media_id=i[2];else{r.loadErrorDisplay(r._("twitterembed_invalidurl_err"));return}}e="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",Hu({type:"GET",url:e,dataType:"json",success:function(s){r.createMedia(s)},error:function(s,a){var o="";o+=r._("twitter_load_err")+"<br/>"+r.media_id+"<br/>"+a,r.loadErrorDisplay(o)}})}createMedia(e){var r="",i="",s="",a="",o="",l="",u=this;i=e.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=e.author_url.split("twitter.com/")[1],a=e.html.split("</p>&mdash;")[1].split('<a href="')[1],o=a.split('">')[0],l=a.split('">')[1].split("</a>")[0],i=i.replace(/<a href/ig,'<a target="_blank" rel="noopener" href'),i.includes("pic.twitter.com")||i.includes("pic.x.com")?(Vo("https://platform.twitter.com/widgets.js",function(){twttr.widgets.createTweet(u.media_id,u._el.content_item,{conversation:"none",linkColor:"#cc0000",theme:"light"})}),this.onLoaded()):(r+=i,r+="<div class='vcard'>",r+="<a href='"+o+"' class='twitter-date' rel='noopener' target='_blank'>"+l+"</a>",r+="<img src='' class='tl-media-item tl-media-image'></a>",r+="<div class='author'>",r+="<a class='screen-name url' href='"+e.author_url+"' rel='noopener' target='_blank'>",r+="<span class='avatar'></span>",r+="<span class='fn'>"+e.author_name+" <span class='tl-icon-twitter'></span></span>",r+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",r+="</a>",r+="</div>",r+="</div>",this._el.content_item.innerHTML=r,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class gie extends Ot{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text";var i=this.data.url.match(/(status|statuses)\/(\d+)/);if(i&&i.length>2)this.media_id=i[2];else{r.loadErrorDisplay(r._("twitterembed_invalidurl_err"));return}e="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",window.twttr=function(s,a,o){var l,u=s.getElementsByTagName(a)[0],c=window.twttr||{};return s.getElementById(o)||(l=s.createElement(a),l.id=o,l.src="https://platform.twitter.com/widgets.js",u.parentNode.insertBefore(l,u),c._e=[],c.ready=function(d){c._e.push(d)}),c}(document,"script","twitter-wjs"),Hu({type:"GET",url:e,dataType:"json",success(s){r.createMedia(s)},error:function(s,a){var o="";o+=r._("twitter_load_err")+"<br/>"+r.media_id+"<br/>"+a,r.loadErrorDisplay(o)}})}createMedia(e){var r="",i="",s="",a="",o="",l="";i=e.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=e.author_url.split("twitter.com/")[1],a=e.html.split("</p>&mdash;")[1].split('<a href="')[1],o=a.split('">')[0],l=a.split('">')[1].split("</a>")[0],i=i.replace(/<a href/ig,'<a target="_blank" rel="noopener" href');let u=this.media_id;i.includes("pic.twitter.com")?(twttr.ready(function(c){r=document.getElementsByClassName("tl-media-twitter")[0];var d=String(u);twttr.widgets.createTweet(d,r,{conversation:"none",linkColor:"#cc0000",theme:"light"}).then(function(h){this.onLoaded()})}),this._el.content_item.innerHTML=r,this.onLoaded()):(r+=i,r+="<div class='vcard'>",r+="<a href='"+o+"' class='twitter-date' rel='noopener' target='_blank'>"+l+"</a>",r+="<div class='author'>",r+="<a class='screen-name url' href='"+e.author_url+"' rel='noopener' target='_blank'>",r+="<span class='avatar'></span>",r+="<span class='fn'>"+e.author_name+" <span class='tl-icon-twitter'></span></span>",r+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",r+="</a>",r+="</div>",r+="</div>",this._el.content_item.innerHTML=r,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class oR extends Ot{_loadMedia(){var e,r=this;try{this.establishMediaID(),e="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",Tm(e,function(i){i.stat=="ok"?(r.sizes=i.sizes.size,r.options.background||r.createMedia(),r.onLoaded()):r.loadErrorDisplay(r._("flickr_notfound_err"))})}catch(i){r.loadErrorDisplay(r._(i.message_key))}}establishMediaID(){if(this.data.url.match(/flic.kr\/.+/i)){var e=this.data.url.split("/").slice(-1)[0];this.media_id=ure.decode(e)}else{var r="flickr.com/photos/",i=this.data.url.indexOf(r);if(i==-1)throw new at("flickr_invalidurl_err");var s=i+r.length;this.media_id=this.data.url.substr(s).split("/")[1]}}createMedia(){var e=this;this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-flickr tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=wu(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=wu(this.data.caption)),this._el.content_item.addEventListener("load",function(r){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}getImageURL(e,r){for(var i=this.size_label(r),s=this.sizes[this.sizes.length-2].source,a=0;a<this.sizes.length;a++)this.sizes[a].label==i&&(s=this.sizes[a].source);return s}_getMeta(){var e=this,r;r="https://api.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",Tm(r,function(i){e.data.credit_alternate="<a href='"+e.data.url+"' target='_blank' rel='noopener'>"+i.photo.owner.realname+"</a>",e.data.caption_alternate=i.photo.title._content+" "+i.photo.description._content,e.updateMeta()})}size_label(e){var r="";return e<=75?e<=0?r="Large":r="Thumbnail":e<=180?r="Small":e<=240?r="Small 320":e<=375?r="Medium":e<=480?r="Medium 640":(e<=600,r="Large"),r}}class vie extends Ot{_loadMedia(){var e=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-documentcloud tl-media-shadow",this._el.content),this._el.content_item.id=jo(7),this.data.url.match(/\.html$/)?this.data.url=this._transformURL(this.data.url):this.data.url.match(/.(json|js)$/)||ot("DOCUMENT CLOUD IN URL BUT INVALID SUFFIX"),Vo(["https://assets.documentcloud.org/viewer/loader.js","https://assets.documentcloud.org/viewer/viewer.js"],function(){e.createMedia()})}_transformURL(e){return e.replace(/(.*)\.html$/,"$1.js")}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}createMedia(){DV.load(this.data.url,{container:"#"+this._el.content_item.id,showSidebar:!1}),this.onLoaded()}}const yie="830b21071290df4f81a35c56abbea096",_ie="704270473831239",wie=`${_ie}|${yie}`,lR=`https://graph.facebook.com/v8.0/instagram_oembed?access_token=${wie}&fields=html,thumbnail_url,author_name&url=`;function bie(t){this.oembed_response=t,this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-instagram tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=wu(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=wu(this.data.caption)),this._el.content_item.addEventListener("load",(function(e){this.onMediaLoaded()}).bind(this)),this._el.content_item.src=t.thumbnail_url,this.onLoaded()}function xie(t){let e=`${t.statusText} [${t.status}]`;t.status==400&&(e=this._("instagram_bad_request")),this.loadErrorDisplay(e)}class Eie extends Ot{_loadMedia(){this.media_id=this.data.url.split("/p/")[1].split("/")[0],this.options.background||this.createMedia()}createMedia(){this.oembed_response=null;let e=`${lR}${this.data.url}`;try{Hu({url:e,dataType:"json",success:bie,error:xie,context:this})}catch(r){console.log(`Instagram: error fetching ${e}`),console.log(r);debugger}}getImageURL(){if(this.oembed_response&&this.oembed_response.thumbnail_url)return this.oembed_response.thumbnail_url;Kg(`${lR}${this.data.url}`).then(e=>e.thumbnail_url).catch(e=>{ot(`Instagram getImageURL Error: ${e.status} ${e.statusText}`)})}_getMeta(){this.oembed_response&&this.oembed_response.author_name&&(this.data.credit_alternate=`Instagram: <a href="https://instagram.com/${this.oembed_response.author_name}" target="_blank">@${this.oembed_response.author_name}</a>`),this.updateMeta()}sizes(e){var r="";return e<=150?r="t":e<=306?r="m":r="l",r}}class Sie extends Ot{_loadMedia(){this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-profile tl-media-shadow",this._el.content),this._el.content_item.src=this.data.url,this.onLoaded()}_updateMediaDisplay(e){_u&&(this._el.content_item.style.maxWidth=this.options.width/2-40+"px")}}class Tie extends Ot{_loadMedia(){var e;if(this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this.data.url.match(/open\?id=([^&]+)/)){var r=this.data.url.match(/open\?id=([^&]+)/)[1];e="https://drive.google.com/file/d/"+r+"/preview"}else if(this.data.url.match(/file\/d\/([^/]*)\/?/)){var r=this.data.url.match(/file\/d\/([^/]*)\/?/)[1];e="https://drive.google.com/file/d/"+r+"/preview"}else e=this.data.url;this._el.content_item.innerHTML="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}function Iie(t){return t.match(/^spotify:/)?t:(t=new URL(t),`spotify${t.pathname.replace(/\/$/,"").replace(/\//g,":")}`)}class Cie extends Ot{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-spotify",this._el.content),this.media_id=Iie(this.data.url),this.media_id?(e="https://embed.spotify.com/?uri="+this.media_id+"&theme=white&view=coverart",this.player=this.domCreate("iframe","tl-media-shadow",this._el.content_item),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.onLoaded()):this.loadErrorDisplay(this._("spotify_invalid_url"))}_updateMediaDisplay(e){var r=this.options.height,i=0,s=0;Xo?r=this.options.height/2:r=this.options.height-this.options.credit_height-this.options.caption_height-30,this._el.content_item.style.maxHeight="none",ot(r),ot(this.options.width),r>this.options.width?(ot("height is greater"),i=this.options.width+80+"px",s=this.options.width+"px"):(ot("width is greater"),ot(this.options.width),i=r+"px",s=r-80+"px"),this.player.style.width=s,this.player.style.height=i,this._el.credit&&(this._el.credit.style.width=s),this._el.caption&&(this._el.caption.style.width=s)}_stopMedia(){}}class kie extends Ot{constructor(e,r,i){super(e,r,i),this.iframe=Jg.sanitize(this.data.url,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder"]})}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this._el.content_item.innerHTML=this.iframe,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class Nie extends Ot{_loadMedia(){try{var e=this;if(this.data.url.match(`<blockquote class=['"]imgur-embed-pub['"]`)){var r=this.data.url.match(/(imgur\.com)\/(\w+)/);this.media_id=r[2],this.data.url="http://imgur.com/gallery/"+this.media_id}else this.data.url&&(this.media_id=this.data.url.split("/").slice(-1)[0]);Vo(["https://s.imgur.com/min/embed.js"],function(){e.createMedia()})}catch{this.loadErrorDisplay(this._("imgur_invalidurl_err"))}}createMedia(){var e=this,r="https://api.imgur.com/oembed.json?url="+this.data.url;this._el.content_item=this.domCreate("div","tl-media-item tl-media-image tl-media-imgur",this._el.content),Hu({type:"GET",url:r,dataType:"json",success:function(i){try{e._el.content_item.innerHTML=i.html,setInterval(function(){document.querySelector("blockquote.imgur-embed-pub")==null?clearInterval():(imgurEmbed.createIframe(),document.getElementById("imageElement").removeAttribute("style"),document.getElementById("image").removeAttribute("style"))},2e3)}catch{ot("Error processing imgur ajax response")}},error:function(i,s,a){s=="parsererror"?e.loadErrorDisplay(e._("imgur_invalidurl_err")):e.loadErrorDisplay(e._("unknown_read_err",s))}}),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.width=this.options.width+"px",this._el.content_item.style.height=Qo.r16_9({w:this.options.width})+"px"}}class Aie extends Ot{_loadMedia(){var e=Wg(this.data.url);this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content);var r="";Th||Yne||e.match(/dl.dropboxusercontent.com/)?r="<iframe class='doc' frameborder='0' width='100%' height='100%' src='//docs.google.com/viewer?url="+e+"&amp;embedded=true'></iframe>":r="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this._el.content_item.innerHTML=r,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class Rie extends Ot{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=Wg(this.data.url),r=this,r=this,i="tl-media-item tl-media-audio tl-media-shadow";this._el.content_item=this.domCreate("audio",i,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){r.onMediaLoaded()}),this._el.source_item.src=e,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 audio with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(e){_u&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(e,r){var i=e.match(r),s="audio/";switch(i[1]){case"mp3":s+="mpeg";break;case"wav":s+="wav";break;case"m4a":s+="mp4";break;default:s="audio";break}return s}}class Pie extends Ot{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=Wg(this.data.url),r=this,r=this,i="tl-media-item tl-media-video tl-media-shadow";this._el.content_item=this.domCreate("video",i,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){r.onMediaLoaded()}),this._el.source_item.src=e,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 video with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(e){_u&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(e,r){var i=e.match(r),s="video/";switch(i[1]){case"mp4":s+="mp4";break;case"webm":s+="webm";break;default:s="video";break}return s}}class Die extends Ot{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-wistia tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/https?:\/\/(.+)?(wistia\.com|wi\.st)\/medias\/(.*)/)[3],ot(`Wistia: media_id: ${this.media_id}`),e="https://fast.wistia.com/embed/iframe/"+this.media_id+"?version=v1&controlsVisibleOnLoad=true&playerColor=aae3d8",this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(i){r.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=Qo.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(e){ot(e)}}}function Im(t,e){var r={},i=[{type:"youtube",name:"YouTube",match_str:"^(https?:)?/*(www.|m.)?youtube|youtu.be",cls:sie},{type:"vimeo",name:"Vimeo",match_str:"^(https?:)?/*(player.)?vimeo.com",cls:hie},{type:"dailymotion",name:"DailyMotion",match_str:"^(https?:)?/*(www.)?(dailymotion.com|dai.ly)",cls:fie},{type:"vine",name:"Vine",match_str:"^(https?:)?/*(www.)?vine.co",cls:pie},{type:"soundcloud",name:"SoundCloud",match_str:"^(https?:)?/*(player.)?soundcloud.com",cls:die},{type:"twitter",name:"Twitter",match_str:"^(https?:)?/*(www.)?(twitter|x).com",cls:mie},{type:"twitterembed",name:"TwitterEmbed",match_str:`<blockquote class=['"]twitter-tweet['"]`,cls:gie},{type:"googlemaps",name:"Google Map",match_str:/google.+?\/maps\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/search\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/place\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/dir\/([\w\W]+)\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)/,cls:aie},{type:"flickr",name:"Flickr",match_str:"^(https?:)?/*(www.)?flickr.com/photos",cls:oR},{type:"flickr",name:"Flickr",match_str:"^(https?://)?flic.kr/.*",cls:oR},{type:"instagram",name:"Instagram",match_str:/^(https?:)?\/*(www.)?(instagr.am|^(https?:)?\/*(www.)?instagram.com)\/p\//,cls:Eie},{type:"profile",name:"Profile",match_str:/^(https?:)?\/*(www.)?instagr.am\/[a-zA-Z0-9]{2,}|^(https?:)?\/*(www.)?instagram.com\/[a-zA-Z0-9]{2,}/,cls:Sie},{type:"documentcloud",name:"Document Cloud",match_str:/documentcloud.org\//,cls:vie},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://.+.wiki[mp]edia.org.+#/media/.+.(jpg|jpeg|png|gif|svg|webp)",cls:aR},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://commons.wikimedia.org/wiki/File:.+.(jpg|jpeg|png|gif|svg|webp)",cls:aR},{type:"wikipedia",name:"Wikipedia",match_str:"^(https?:)?/.+.wikipedia.org",cls:lie},{type:"image",name:"Image",match_str:/(jpg|jpeg|png|gif|svg|webp)(\?.*)?$/i,cls:sR},{type:"imgur",name:"Imgur",match_str:/^.*imgur.com\/.+$|<blockquote class=['\"]imgur-embed-pub['\"]/i,cls:Nie},{type:"googledocs",name:"Google Doc",match_str:"^(https?:)?/*[^.]*.google.com/[^/]*/d/[^/]*/[^/]*?usp=shar.*|^(https?:)?/*drive.google.com/open?id=[^&]*&authuser=0|^(https?:)?//*drive.google.com/open\\?id=[^&]*|^(https?:)?/*[^.]*.googledrive.com/host/[^/]*/",cls:Tie},{type:"pdf",name:"PDF",match_str:/^.*\.pdf(\?.*)?(\#.*)?/,cls:Aie},{type:"spotify",name:"spotify",match_str:"spotify",cls:Cie},{type:"iframe",name:"iFrame",match_str:"iframe",cls:kie},{type:"blockquote",name:"Quote",match_str:"blockquote",cls:oie},{type:"video",name:"Video",match_str:/(mp4|webm)(\?.*)?$/i,cls:Pie},{type:"wistia",name:"Wistia",match_str:/https?:\/\/(.+)?(wistia\.com|wi\.st)\/.*/i,cls:Die},{type:"audio",name:"Audio",match_str:/(mp3|wav|m4a)(\?.*)?$/i,cls:Rie},{type:"imageblank",name:"Imageblank",match_str:"",cls:sR}];if(e){if(t instanceof Array)return!1;for(var s=0;s<i.length;s++)switch(i[s].type){case"flickr":case"image":case"instagram":if(t.url.match(i[s].match_str))return r=i[s],r;break}}else for(var s=0;s<i.length;s++)if(t.url.match(i[s].match_str))return i[s];return!1}class VV{constructor(e,r){this._el={container:{},content_container:{},media_container:{},timespan:{},line_left:{},line_right:{},content:{},text:{},media:{}},this._text={},this._state={loaded:!1},this.data={unique_id:"",background:null,date:{year:0,month:0,day:0,hour:0,minute:0,second:0,millisecond:0,thumbnail:"",format:""},text:{headline:"",text:""},media:null},this.options={duration:1e3,ease:Gg,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,this.ariaLabel="",wt(this.options,r),wt(this.data,e),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(e){this.active=e,this.active&&this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end tl-timemarker-active":this.active?this._el.container.className="tl-timemarker tl-timemarker-active":this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end":this._el.container.className="tl-timemarker",this._el.container.ariaLabel=this.ariaLabel,this.active?this._el.container.ariaLabel+=", shown":this._el.container.ariaLabel+=", press space to show"}setFocus(e={preventScroll:!0}){this._el.container.focus(e)}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}loadMedia(){this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0)}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.data.start_date.getTime()}getEndTime(){return this.data.end_date?this.data.end_date.getTime():!1}setHeight(e){var r=12,i=1;this._el.content_container.style.height=e+"px",this._el.timespan_content.style.height=e+"px",e<=30?this._el.content.className="tl-timemarker-content tl-timemarker-content-small":this._el.content.className="tl-timemarker-content",e<=56?this._el.content_container.classList.add("tl-timemarker-content-container-small"):this._el.content_container.classList.remove("tl-timemarker-content-container-small"),Hg?(i=Math.floor(e/(r+2)),i<1&&(i=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=i):(i=e/r,i>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=i*r+"px")}setWidth(e){this.data.end_date&&(this._el.container.style.width=e+"px",e>this.options.marker_width_min?(this._el.content_container.style.width=e+"px",this._el.content_container.className="tl-timemarker-content-container tl-timemarker-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timemarker-content-container"))}setClass(e){this._el.container.className=e}setRowPosition(e,r){this.setPosition({top:e}),this._el.timespan.style.height=r+"px"}getFormattedDate(){if(Ar(this.data.display_date).length>0)return this.data.display_date;let e="";return this.data.end_date&&(e=" to "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(e=(e?"from ":"")+this.data.start_date.getDisplayDate(this.getLanguage())+e),e}_onMarkerClick(e){this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerKeydown(e){/Space|Enter/.test(e.code)&&this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerBlur(e){this.fire("markerblur",{unique_id:this.data.unique_id})}_initLayout(){if(this._el.container=Te("div","tl-timemarker"),this._el.container.setAttribute("tabindex","-1"),this.data.unique_id&&(this._el.container.id=this.data.unique_id+"-marker"),this.data.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timemarker tl-timemarker-with-end"),this._el.timespan=Te("div","tl-timemarker-timespan",this._el.container),this._el.timespan_content=Te("div","tl-timemarker-timespan-content",this._el.timespan),this._el.content_container=Te("div","tl-timemarker-content-container",this._el.container),this._el.content=Te("div","tl-timemarker-content",this._el.content_container),this._el.line_left=Te("div","tl-timemarker-line-left",this._el.timespan),this._el.line_right=Te("div","tl-timemarker-line-right",this._el.timespan),this.data.media){this._el.media_container=Te("div","tl-timemarker-media-container",this._el.content);var e={url:this.data.media.thumbnail},r=this.data.media.thumbnail?Im(e,!0):null;if(r){var i=new r.cls(e);i.on("loaded",(function(){this._el.media=Te("img","tl-timemarker-media",this._el.media_container),this._el.media.src=i.getImageURL()}).bind(this)),i.loadMedia()}else{var s=Im(this.data.media).type;this._el.media=Te("span","tl-icon-"+s,this._el.media_container)}}this._el.text=Te("div","tl-timemarker-text",this._el.content),this._text=Te("h2","tl-headline",this._el.text),this.data.text.headline&&this.data.text.headline!=""?this._text.innerHTML=Xl(this.data.text.headline):this.data.text.text&&this.data.text.text!=""?this._text.innerHTML=Xl(this.data.text.text):this.data.media&&this.data.media.caption&&this.data.media.caption!=""&&(this._text.innerHTML=Xl(this.data.media.caption));const a=this.getFormattedDate();this.ariaLabel=`${this._text.innerHTML}, ${a}`,this.onLoaded()}_initEvents(){Qe.addListener(this._el.container,"click",this._onMarkerClick,this),Qe.addListener(this._el.container,"keydown",this._onMarkerKeydown,this),Qe.addListener(this._el.container,"blur",this._onMarkerBlur,this)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}ar(VV,js,or,Ls);class xT{constructor(e,r,i){this._el={drag:e,move:e},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},r&&(this._el.move=r),this.options={snap:!1,enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:0,right:!1},momentum_multiplier:2e3,duration:1e3,ease:qu},this.animator=null,this.dragevent=this.mousedrag,Bi&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},wt(this.options,i)}enable(e){Qe.addListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Qe.addListener(this._el.drag,this.dragevent.up,this._onDragEnd,this),this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){Qe.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Qe.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(e){this.options.constraint=e}_onDragStart(e){this.animator&&this.animator.stop(),Bi?e.originalEvent?(this.data.pagex.start=e.originalEvent.touches[0].screenX,this.data.pagey.start=e.originalEvent.touches[0].screenY):(this.data.pagex.start=e.targetTouches[0].screenX,this.data.pagey.start=e.targetTouches[0].screenY):(this.data.pagex.start=e.pageX,this.data.pagey.start=e.pageY),this.options.enable.x,this.options.enable.y,this.data.pos.start={x:this._el.move.offsetLeft,y:this._el.move.offsetTop},this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),Qe.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Qe.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(e){this.data.sliding=!1,Qe.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Qe.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(e){var r={x:0,y:0};this.data.sliding=!0,Bi?e.originalEvent?(this.data.pagex.end=e.originalEvent.touches[0].screenX,this.data.pagey.end=e.originalEvent.touches[0].screenY):(this.data.pagex.end=e.targetTouches[0].screenX,this.data.pagey.end=e.targetTouches[0].screenY):(this.data.pagex.end=e.pageX,this.data.pagey.end=e.pageY),r.x=this.data.pagex.start-this.data.pagex.end,r.y=this.data.pagey.start-this.data.pagey.end,this.data.pos.end={x:this._el.drag.offsetLeft,y:this._el.drag.offsetTop},this.data.new_pos.x=-(r.x-this.data.pos.start.x),this.data.new_pos.y=-(r.y-this.data.pos.start.y),this.options.enable.x&&Math.abs(r.x)>Math.abs(r.y)&&(e.preventDefault(),this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&Math.abs(r.y)>Math.abs(r.y)&&(e.preventDefault(),this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var e={x:0,y:0,time:0},r={x:0,y:0,time:0},i={x:!1,y:!1},s=!1;this.data.direction=null,e.time=(new Date().getTime()-this.data.time.start)*10,r.time=(new Date().getTime()-this.data.time.start)*10,r.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),r.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),e.x=Math.round(r.x/r.time),e.y=Math.round(r.y/r.time),this.data.new_pos.x=Math.min(this.data.new_pos.x+e.x),this.data.new_pos.y=Math.min(this.data.new_pos.y+e.y),this.options.enable.x?this.options.constraint.left&&this.data.new_pos.x>this.options.constraint.left&&(this.data.new_pos.x=this.options.constraint.left):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,r.time<2e3&&(s=!0),this.options.enable.x&&this.options.enable.y?Math.abs(r.x)>Math.abs(r.y)?i.x=!0:i.y=!0:this.options.enable.x?Math.abs(r.x)>Math.abs(r.y)&&(i.x=!0):Math.abs(r.y)>Math.abs(r.x)&&(i.y=!0),i.x&&(Math.abs(r.x)>this._el.drag.offsetWidth/2&&(s=!0),Math.abs(r.x)>1e4&&(this.data.direction="left",r.x>0&&(this.data.direction="right"))),i.y&&(Math.abs(r.y)>this._el.drag.offsetHeight/2&&(s=!0),Math.abs(r.y)>1e4&&(this.data.direction="up",r.y>0&&(this.data.direction="down"))),r.time<1e3||this._animateMomentum(),s&&this.data.direction?this.fire("swipe_"+this.data.direction,this.data):this.data.direction?this.fire("swipe_nodirection",this.data):this.options.snap&&(this.animator.stop(),this.animator=As(this._el.move,{top:this.data.pos.start.y,left:this.data.pos.start.x,duration:this.options.duration,easing:Ud}))}_animateMomentum(){var e={x:this.data.new_pos.x,y:this.data.new_pos.y},r={duration:this.options.duration,easing:Ud};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(e.y>this.options.constraint.bottom?e.y=this.options.constraint.bottom:e.y<this.options.constraint.top&&(e.y=this.options.constraint.top)),r.top=Math.floor(e.y)+"px"),this.options.enable.x&&(this.options.constraint.left&&e.x>=this.options.constraint.left&&(e.x=this.options.constraint.left),this.options.constraint.right&&e.x<this.options.constraint.right&&(e.x=this.options.constraint.right),r.left=Math.floor(e.x)+"px"),this.animator=As(this._el.move,r),this.fire("momentum",this.data)}}ar(xT,or);class FV{constructor(e,r,i,s){this.language=s,this._el={parent:{},container:{},slider:{},slider_background:{},line:{},marker_container_mask:{},marker_container:{},marker_item_container:{},timeaxis:{},timeaxis_background:{}},this.collapsed=!1,typeof e=="object"?this._el.container=e:this._el.container=Ih(e),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","application"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline_navigation")),this._el.container.setAttribute("aria-description",'Navigate between markers with arrow keys. Press "Home" for the first and "End" for the last markers'),this.config=r,this.options={width:600,height:600,duration:1e3,ease:qu,has_groups:!1,optimal_tick_width:50,scale_factor:2,marker_padding:5,timenav_height_min:150,marker_height_min:30,marker_width_min:100,zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89]},this.animator=null,this.ready=!1,this._markers=[],this._eras=[],this.has_eras=!1,this._groups=[],this._calculated_row_height=100,this.current_id="",this.current_focused_id="",this.timescale={},this.timeaxis={},this.max_rows=6,this.animate_css=!1,this._swipable,wt(this.options,i)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this._onLoaded()}positionMarkers(e){for(var r=0;r<this._markers.length;r++){var i=this.timescale.getPositionInfo(r);e?this._markers[r].setClass("tl-timemarker tl-timemarker-fast"):this._markers[r].setClass("tl-timemarker"),this._markers[r].setPosition({left:i.start}),this._markers[r].setWidth(i.width)}}updateDisplay(e,r,i){let s=!1;e&&(this.options.width==0&&e>0&&(s=!0),this.options.width=e),r&&r!=this.options.height&&(this.options.height=r,this.timescale=this._getTimeScale()),this._assignRowsToMarkers(),this._el.slider_background.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._el.slider_background.style.left=-(this.options.width/2)+"px",this._el.slider.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._swipable.updateConstraint({top:!1,bottom:!1,left:this.options.width/2,right:-(this.timescale.getPixelWidth()-this.options.width/2)}),s&&this._drawTimeline(),this.goToId(this.current_id,!0)}_getTimeScale(){var e=0;try{e=parseInt(this.options.marker_height_min)}catch{ot("Invalid value for marker_height_min option."),e=30}return e==0&&(ot("marker_height_min option must not be zero."),e=30),this.max_rows=Math.round((this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding)/e),this.max_rows<1&&(this.max_rows=1),new iR(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows})}_updateTimeScale(e){this.options.scale_factor=e,this._updateDrawTimeline()}zoomIn(){var e=tre(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(e)}zoomOut(){var e=nre(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(e)}setZoom(e){var r=this.options.zoom_sequence[e];typeof r=="number"?this.setZoomFactor(r):console.warn("Invalid zoom level. Please use an index number between 0 and "+(this.options.zoom_sequence.length-1))}setZoomFactor(e){e<=this.options.zoom_sequence[0]?this.fire("zoomtoggle",{zoom:"out",show:!1}):this.fire("zoomtoggle",{zoom:"out",show:!0}),e>=this.options.zoom_sequence[this.options.zoom_sequence.length-1]?this.fire("zoomtoggle",{zoom:"in",show:!1}):this.fire("zoomtoggle",{zoom:"in",show:!0}),e==0&&(console.warn("Zoom factor must be greater than zero. Using 0.1"),e=.1),this.options.scale_factor=e,this.goToId(this.current_id,!this._updateDrawTimeline(!0),!0)}_createGroups(){this._groups=[];var e=this.timescale.getGroupLabels();if(e){this.options.has_groups=!0;for(var r=0;r<e.length;r++)this._createGroup(e[r])}}_createGroup(e){var r=new PV(e);this._addGroup(r),this._groups.push(r)}_addGroup(e){e.addTo(this._el.container)}_positionGroups(){if(this.options.has_groups){var e=this.options.height-this._el.timeaxis_background.offsetHeight,r=Math.floor(e/this.timescale.getNumberOfRows()-this.options.marker_padding);this.timescale.getGroupLabels();for(var i=0,s=0;i<this._groups.length;i++){var a=Math.floor(s*(r+this.options.marker_padding)),o=!1;a>e-this.options.marker_padding&&(o=!0),this._groups[i].setRowPosition(a,this._calculated_row_height+this.options.marker_padding/2),this._groups[i].setAlternateRowColor(rre(i),o),s+=this._groups[i].data.rows}}}_addMarker(e){e.addTo(this._el.marker_item_container),e.on("markerclick",this._onMarkerClick,this),e.on("added",this._onMarkerAdded,this)}_createMarker(e,r){var i=new VV(e,this.options);this._addMarker(i),r<0?this._markers.push(i):this._markers.splice(r,0,i)}_createMarkers(e){for(var r=0;r<e.length;r++)this._createMarker(e[r],-1)}_removeMarker(e){e.removeFrom(this._el.marker_item_container)}_destroyMarker(e){this._removeMarker(this._markers[e]),this._markers.splice(e,1)}_calculateMarkerHeight(e){return e/this.timescale.getNumberOfRows()-this.options.marker_padding}_calculateRowHeight(e){return e/this.timescale.getNumberOfRows()}_calculateAvailableHeight(){return this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding}_calculateMinimumTimeNavHeight(){return this.timescale.getNumberOfRows()*this.options.marker_height_min+this._el.timeaxis_background.offsetHeight+this.options.marker_padding}getMinimumHeight(){return this._calculateMinimumTimeNavHeight()}_assignRowsToMarkers(){var e=this._calculateAvailableHeight(),r=this._calculateMarkerHeight(e);this._positionGroups(),this._calculated_row_height=this._calculateRowHeight(e);for(var i=0;i<this._markers.length;i++){this._markers[i].setHeight(r);var s=this.timescale.getPositionInfo(i).row,a=Math.floor(s*(r+this.options.marker_padding))+this.options.marker_padding,o=e-a+this.options.marker_padding;this._markers[i].setRowPosition(a,o)}}_resetMarkersActive(){for(var e=0;e<this._markers.length;e++)this._markers[e].setActive(!1)}_resetMarkersBlurListeners(){for(var e=0;e<this._markers.length;e++)this._markers[e].off("markerblur",this._onMarkerBlur,this)}_findMarkerIndex(e){var r=-1;return(typeof e=="string"||e instanceof String)&&(r=xV(e,this._markers,"unique_id",r)),r}_createEras(e){for(var r=0;r<e.length;r++){var i=e[r],s=new MV(i.start_date,i.end_date,i.headline,this.options);this._eras.push(s),s.addTo(this._el.marker_item_container),s.on("added",this._onEraAdded,this)}}_positionEras(e){for(var r=0,i=0;i<this._eras.length;i++){var s={start:0,end:0,width:0};s.start=this.timescale.getPosition(this._eras[i].start_date.getTime()),s.end=this.timescale.getPosition(this._eras[i].end_date.getTime()),s.width=s.end-s.start,e?this._eras[i].setClass("tl-timeera tl-timeera-fast"):this._eras[i].setClass("tl-timeera"),this._eras[i].setPosition({left:s.start}),this._eras[i].setWidth(s.width),r++,r>5&&(r=0),this._eras[i].setColor(r)}}createMarker(e,r){this._createMarker(e,r)}createMarkers(e){this._createMarkers(e)}destroyMarker(e){this._destroyMarker(e)}destroyMarkerId(e){this.destroyMarker(this._findMarkerIndex(e))}goTo(e,r,i){var s=this.options.ease,a=this.options.duration,o=e<0?0:e;this._resetMarkersActive(),e>=0&&e<this._markers.length&&this._markers[e].setActive(!0),this.animateMovement(o,r,i,a,s),e>=0&&e<this._markers.length?this.current_id=this.current_focused_id=this._markers[e].data.unique_id:this.current_id=this.current_focused_id="",this._setLabelWithCurrentMarker()}goToId(e,r,i){this.goTo(this._findMarkerIndex(e),r,i)}focusOn(e,r,i){const s=this.options.ease,a=this.options.duration,o=e<0?0:e;this.animateMovement(o,r,i,a,s),this._resetMarkersBlurListeners(),e>=0&&e<this._markers.length&&(this._markers[e].setFocus(),this.current_focused_id=this._markers[e].data.unique_id,this._markers[e].on("markerblur",this._onMarkerBlur,this))}focusNext(){const e=this._findMarkerIndex(this.current_focused_id);e+1<this._markers.length?this.focusOn(e+1):this.focusOn(e)}focusPrevious(){const e=this._findMarkerIndex(this.current_focused_id);e-1>=0?this.focusOn(e-1):this.focusOn(e)}animateMovement(e,r,i,s,a){this.animator&&this.animator.stop(),r?(this._el.slider.className="tl-timenav-slider",this._el.slider.style.left=-this._markers[e].getLeft()+this.options.width/2+"px"):i?(this._el.slider.className="tl-timenav-slider tl-timenav-slider-animate",this.animate_css=!0,this._el.slider.style.left=-this._markers[e].getLeft()+this.options.width/2+"px"):(this._el.slider.className="tl-timenav-slider",this.animator=As(this._el.slider,{left:-this._markers[e].getLeft()+this.options.width/2+"px",duration:s,easing:a})),e>=0&&e<this._markers.length?this.current_id=this._markers[e].data.unique_id:this.current_id="",this._dispatchVisibleTicksChange()}goToId(e,r,i){this.goTo(this._findMarkerIndex(e),r,i)}_dispatchVisibleTicksChange(){this.ticks_change_timeout&&(clearTimeout(this.ticks_change_timeout),this.ticks_change_timeout=null),this.ticks_change_timeout=setTimeout(()=>{const e=this.timeaxis.getVisibleTicks();this.fire("visible_ticks_change",{visible_ticks:e})},this.options.duration)}_onLoaded(){this.ready=!0,this.fire("loaded",this.config)}_onMarkerAdded(e){this.fire("dateAdded",this.config)}_onEraAdded(e){this.fire("eraAdded",this.config)}_onMarkerRemoved(e){this.fire("dateRemoved",this.config)}_onMarkerClick(e){this.goToId(e.unique_id),this.fire("change",{unique_id:e.unique_id})}_onMarkerBlur(e){this.current_focused_id!==this.current_id&&this.focusOn(this._findMarkerIndex(this.current_id))}_onMouseScroll(e){var r=0,i=0,s={right:-(this.timescale.getPixelWidth()-this.options.width/2),left:this.options.width/2};e||(e=window.event),e.originalEvent&&(e=e.originalEvent),typeof e.wheelDeltaX<"u"&&(r=e.wheelDeltaY/6,Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)?r=e.wheelDeltaX/6:r=0),r&&(e.preventDefault&&e.preventDefault(),e.returnValue=!1),i=parseInt(this._el.slider.style.left.replace("px",""))+r,i>s.left?i=s.left:i<s.right&&(i=s.right),this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1),this._el.slider.style.left=i+"px"}_onDragMove(e){this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1)}_onKeydown(e){switch(Qe.stopPropagation(e),e.key){case"ArrowUp":case"ArrowRight":{this.focusNext();break}case"ArrowDown":case"ArrowLeft":{this.focusPrevious();break}case"Home":{this.focusOn(0);break}case"End":{this.focusOn(this._markers.length-1);break}}}_drawTimeline(e){this.timescale=this._getTimeScale(),this.timeaxis.drawTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(e),this._assignRowsToMarkers(),this._createGroups(),this._positionGroups(),this.has_eras&&this._positionEras(e)}_updateDrawTimeline(e){var r=!1;if(e){var i=new iR(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows});this.timescale.getMajorScale()==i.getMajorScale()&&this.timescale.getMinorScale()==i.getMinorScale()&&(r=!0)}else r=!0;return r?(this.timescale=this._getTimeScale(),this.timeaxis.positionTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(),this._assignRowsToMarkers(),this._positionGroups(),this.has_eras&&this._positionEras(),this.updateDisplay()):this._drawTimeline(!0),r}_setLabelWithCurrentMarker(){const e=this._markers[this._findMarkerIndex(this.current_focused_id)],r=e&&e.ariaLabel?`, ${e.ariaLabel}, shown`:"";this._el.container.setAttribute("aria-label",`Timeline navigation ${r}`)}_initLayout(){this._el.line=Te("div","tl-timenav-line",this._el.container),this._el.slider=Te("div","tl-timenav-slider",this._el.container),this._el.slider_background=Te("div","tl-timenav-slider-background",this._el.slider),this._el.marker_container_mask=Te("div","tl-timenav-container-mask",this._el.slider),this._el.marker_container=Te("div","tl-timenav-container",this._el.marker_container_mask),this._el.marker_item_container=Te("div","tl-timenav-item-container",this._el.marker_container),this._el.timeaxis=Te("div","tl-timeaxis",this._el.slider),this._el.timeaxis_background=Te("div","tl-timeaxis-background",this._el.container),this.timeaxis=new LV(this._el.timeaxis,this.options,this.language),this._swipable=new xT(this._el.slider_background,this._el.slider,{enable:{x:!0,y:!1},constraint:{top:!1,bottom:!1,left:this.options.width/2,right:!1},snap:!1}),this._swipable.enable()}_initEvents(){this._swipable.on("dragmove",this._onDragMove,this),Qe.addListener(this._el.container,"mousewheel",this._onMouseScroll,this),Qe.addListener(this._el.container,"DOMMouseScroll",this._onMouseScroll,this),Qe.addListener(this._el.container,"keydown",this._onKeydown,this)}_initData(){this._createMarkers(this.config.events),this.config.eras&&this.config.eras.length>0&&(this.has_eras=!0,this._createEras(this.config.eras)),this._drawTimeline()}}ar(FV,or,Ls,js);var s0=function(){function t(e,r){for(var i=0;i<r.length;i++){var s=r[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();function a0(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(function(){if(typeof window>"u"||typeof Element>"u")return;var t=Array.prototype.slice,e=Element.prototype.matches||Element.prototype.msMatchesSelector,r=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","details","summary","iframe","object","embed","video","[contenteditable]"].join(","),i=function(){function c(d,h){a0(this,c),this._inertManager=h,this._rootElement=d,this._managedNodes=new Set,this._rootElement.hasAttribute("aria-hidden")?this._savedAriaHidden=this._rootElement.getAttribute("aria-hidden"):this._savedAriaHidden=null,this._rootElement.setAttribute("aria-hidden","true"),this._makeSubtreeUnfocusable(this._rootElement),this._observer=new MutationObserver(this._onMutation.bind(this)),this._observer.observe(this._rootElement,{attributes:!0,childList:!0,subtree:!0})}return s0(c,[{key:"destructor",value:function(){this._observer.disconnect(),this._rootElement&&(this._savedAriaHidden!==null?this._rootElement.setAttribute("aria-hidden",this._savedAriaHidden):this._rootElement.removeAttribute("aria-hidden")),this._managedNodes.forEach(function(h){this._unmanageNode(h.node)},this),this._observer=null,this._rootElement=null,this._managedNodes=null,this._inertManager=null}},{key:"_makeSubtreeUnfocusable",value:function(h){var f=this;o(h,function(b){return f._visitNode(b)});var m=document.activeElement;if(!document.body.contains(h)){for(var v=h,y=void 0;v;){if(v.nodeType===Node.DOCUMENT_FRAGMENT_NODE){y=v;break}v=v.parentNode}y&&(m=y.activeElement)}h.contains(m)&&(m.blur(),m===document.activeElement&&document.body.focus())}},{key:"_visitNode",value:function(h){if(h.nodeType===Node.ELEMENT_NODE){var f=h;f!==this._rootElement&&f.hasAttribute("inert")&&this._adoptInertRoot(f),(e.call(f,r)||f.hasAttribute("tabindex"))&&this._manageNode(f)}}},{key:"_manageNode",value:function(h){var f=this._inertManager.register(h,this);this._managedNodes.add(f)}},{key:"_unmanageNode",value:function(h){var f=this._inertManager.deregister(h,this);f&&this._managedNodes.delete(f)}},{key:"_unmanageSubtree",value:function(h){var f=this;o(h,function(m){return f._unmanageNode(m)})}},{key:"_adoptInertRoot",value:function(h){var f=this._inertManager.getInertRoot(h);f||(this._inertManager.setInert(h,!0),f=this._inertManager.getInertRoot(h)),f.managedNodes.forEach(function(m){this._manageNode(m.node)},this)}},{key:"_onMutation",value:function(h,f){h.forEach(function(m){var v=m.target;if(m.type==="childList")t.call(m.addedNodes).forEach(function(b){this._makeSubtreeUnfocusable(b)},this),t.call(m.removedNodes).forEach(function(b){this._unmanageSubtree(b)},this);else if(m.type==="attributes"){if(m.attributeName==="tabindex")this._manageNode(v);else if(v!==this._rootElement&&m.attributeName==="inert"&&v.hasAttribute("inert")){this._adoptInertRoot(v);var y=this._inertManager.getInertRoot(v);this._managedNodes.forEach(function(b){v.contains(b.node)&&y._manageNode(b.node)})}}},this)}},{key:"managedNodes",get:function(){return new Set(this._managedNodes)}},{key:"hasSavedAriaHidden",get:function(){return this._savedAriaHidden!==null}},{key:"savedAriaHidden",set:function(h){this._savedAriaHidden=h},get:function(){return this._savedAriaHidden}}]),c}(),s=function(){function c(d,h){a0(this,c),this._node=d,this._overrodeFocusMethod=!1,this._inertRoots=new Set([h]),this._savedTabIndex=null,this._destroyed=!1,this.ensureUntabbable()}return s0(c,[{key:"destructor",value:function(){if(this._throwIfDestroyed(),this._node&&this._node.nodeType===Node.ELEMENT_NODE){var h=this._node;this._savedTabIndex!==null?h.setAttribute("tabindex",this._savedTabIndex):h.removeAttribute("tabindex"),this._overrodeFocusMethod&&delete h.focus}this._node=null,this._inertRoots=null,this._destroyed=!0}},{key:"_throwIfDestroyed",value:function(){if(this.destroyed)throw new Error("Trying to access destroyed InertNode")}},{key:"ensureUntabbable",value:function(){if(this.node.nodeType===Node.ELEMENT_NODE){var h=this.node;if(e.call(h,r)){if(h.tabIndex===-1&&this.hasSavedTabIndex)return;h.hasAttribute("tabindex")&&(this._savedTabIndex=h.tabIndex),h.setAttribute("tabindex","-1"),h.nodeType===Node.ELEMENT_NODE&&(h.focus=function(){},this._overrodeFocusMethod=!0)}else h.hasAttribute("tabindex")&&(this._savedTabIndex=h.tabIndex,h.removeAttribute("tabindex"))}}},{key:"addInertRoot",value:function(h){this._throwIfDestroyed(),this._inertRoots.add(h)}},{key:"removeInertRoot",value:function(h){this._throwIfDestroyed(),this._inertRoots.delete(h),this._inertRoots.size===0&&this.destructor()}},{key:"destroyed",get:function(){return this._destroyed}},{key:"hasSavedTabIndex",get:function(){return this._savedTabIndex!==null}},{key:"node",get:function(){return this._throwIfDestroyed(),this._node}},{key:"savedTabIndex",set:function(h){this._throwIfDestroyed(),this._savedTabIndex=h},get:function(){return this._throwIfDestroyed(),this._savedTabIndex}}]),c}(),a=function(){function c(d){if(a0(this,c),!d)throw new Error("Missing required argument; InertManager needs to wrap a document.");this._document=d,this._managedNodes=new Map,this._inertRoots=new Map,this._observer=new MutationObserver(this._watchForInert.bind(this)),l(d.head||d.body||d.documentElement),d.readyState==="loading"?d.addEventListener("DOMContentLoaded",this._onDocumentLoaded.bind(this)):this._onDocumentLoaded()}return s0(c,[{key:"setInert",value:function(h,f){if(f){if(this._inertRoots.has(h))return;var m=new i(h,this);if(h.setAttribute("inert",""),this._inertRoots.set(h,m),!this._document.body.contains(h))for(var v=h.parentNode;v;)v.nodeType===11&&l(v),v=v.parentNode}else{if(!this._inertRoots.has(h))return;var y=this._inertRoots.get(h);y.destructor(),this._inertRoots.delete(h),h.removeAttribute("inert")}}},{key:"getInertRoot",value:function(h){return this._inertRoots.get(h)}},{key:"register",value:function(h,f){var m=this._managedNodes.get(h);return m!==void 0?m.addInertRoot(f):m=new s(h,f),this._managedNodes.set(h,m),m}},{key:"deregister",value:function(h,f){var m=this._managedNodes.get(h);return m?(m.removeInertRoot(f),m.destroyed&&this._managedNodes.delete(h),m):null}},{key:"_onDocumentLoaded",value:function(){var h=t.call(this._document.querySelectorAll("[inert]"));h.forEach(function(f){this.setInert(f,!0)},this),this._observer.observe(this._document.body||this._document.documentElement,{attributes:!0,subtree:!0,childList:!0})}},{key:"_watchForInert",value:function(h,f){var m=this;h.forEach(function(v){switch(v.type){case"childList":t.call(v.addedNodes).forEach(function(_){if(_.nodeType===Node.ELEMENT_NODE){var w=t.call(_.querySelectorAll("[inert]"));e.call(_,"[inert]")&&w.unshift(_),w.forEach(function(E){this.setInert(E,!0)},m)}},m);break;case"attributes":if(v.attributeName!=="inert")return;var y=v.target,b=y.hasAttribute("inert");m.setInert(y,b);break}},this)}}]),c}();function o(c,d,h){if(c.nodeType==Node.ELEMENT_NODE){var f=c;d&&d(f);var m=f.shadowRoot;if(m){o(m,d);return}if(f.localName=="content"){for(var v=f,y=v.getDistributedNodes?v.getDistributedNodes():[],b=0;b<y.length;b++)o(y[b],d);return}if(f.localName=="slot"){for(var _=f,w=_.assignedNodes?_.assignedNodes({flatten:!0}):[],E=0;E<w.length;E++)o(w[E],d);return}}for(var N=c.firstChild;N!=null;)o(N,d),N=N.nextSibling}function l(c){if(!c.querySelector("style#inert-style, link#inert-style")){var d=document.createElement("style");d.setAttribute("id","inert-style"),d.textContent=`
[inert] {
  pointer-events: none;
  cursor: default;
}

[inert], [inert] * {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
`,c.appendChild(d)}}if(!HTMLElement.prototype.hasOwnProperty("inert")){var u=new a(document);Object.defineProperty(HTMLElement.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(d){u.setInert(this,d)}})}})();class $V{constructor(e,r,i,s){s&&this.setLanguage(s),this._el={container:{},scroll_container:{},background:{},content_container:{},content:{}},this._media=null,this._mediaclass={},this._text={},this._background_media=null,this._state={loaded:!1},this.has={headline:!1,text:!1,media:!1,title:!1,background:{image:!1,color:!1,color_value:""}},this.has.title=i,this.data={unique_id:null,background:null,start_date:null,end_date:null,location:null,text:null,media:null,autolink:!0},this.options={duration:1e3,slide_padding_lr:40,ease:Gg,width:600,height:600,skinny_size:650,media_name:""},this.active=!1,this.animator={},wt(this.options,r),wt(this.data,e),this._initLayout(),this._initEvents()}show(){this.animator=As(this._el.slider_container,{left:-(this._el.container.offsetWidth*n)+"px",duration:this.options.duration,easing:this.options.ease})}hide(){}setActive(e){this.active=e,this.active?(this.data.background&&this.fire("background_change",this.has.background),this._setInteractive(!0),this.loadMedia()):(this.stopMedia(),this._setInteractive(!1))}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r,i){var s,a=this.options.slide_padding_lr,o=this.options.slide_padding_lr;e?this.options.width=e:this.options.width=this._el.container.offsetWidth,s=this.options.width-this.options.slide_padding_lr*2,Xo&&this.options.width<=this.options.skinny_size?(a=0,o=0,s=this.options.width):i=="landscape"||this.options.width<=this.options.skinny_size&&(a=50,o=50,s=this.options.width-a-o),this._el.content.style.paddingLeft=a+"px",this._el.content.style.paddingRight=o+"px",this._el.content.style.width=s+"px",r?this.options.height=r:this.options.height=this._el.container.offsetHeight,this._media&&(!this.has.text&&this.has.headline?this._media.updateDisplay(s,this.options.height-this._text.headlineHeight(),i):!this.has.text&&!this.has.headline?this._media.updateDisplay(s,this.options.height,i):this.options.width<=this.options.skinny_size?this._media.updateDisplay(s,this.options.height,i):this._media.updateDisplay(s/2,this.options.height,i)),this._updateBackgroundDisplay()}loadMedia(){var e=this;this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0),this._background_media&&!this._background_media._state.loaded&&(this._background_media.on("loaded",function(){e._updateBackgroundDisplay()}),this._background_media.loadMedia())}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getBackground(){return this.has.background}scrollToTop(){this._el.container.scrollTop=0}getFormattedDate(){if(Ar(this.data.display_date).length>0)return this.data.display_date;var e="";return this.has.title||(this.data.end_date&&(e=" &mdash; "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(e=this.data.start_date.getDisplayDate(this.getLanguage())+e)),e}_initLayout(){if(this._el.container=Te("div","tl-slide"),this.has.title&&(this._el.container.className="tl-slide tl-slide-titleslide"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._el.scroll_container=Te("div","tl-slide-scrollable-container",this._el.container),this._el.content_container=Te("div","tl-slide-content-container",this._el.scroll_container),this._el.content=Te("div","tl-slide-content",this._el.content_container),this._el.background=Te("div","tl-slide-background",this._el.container),this.data.background){if(this.data.background.url){var e=Im(this.data.background,!0);e&&(this._background_media=new e.cls(this.data.background,{background:1}),this.has.background.image=!0,this._el.container.className+=" tl-full-image-background",this.has.background.color_value="#000",this._el.background.style.display="block"),this.data.background.alt&&(this._el.background.setAttribute("role","img"),this._el.background.setAttribute("aria-label",this.data.background.alt))}this.data.background.color&&(this.has.background.color=!0,this._el.container.className+=" tl-full-color-background",this.has.background.color_value=this.data.background.color),this.data.background.text_background&&(this._el.container.className+=" tl-text-background")}this.data.media&&this.data.media.url&&this.data.media.url!=""&&(this.has.media=!0),this.data.text&&this.data.text.text&&(this.has.text=!0),this.data.text&&this.data.text.headline&&(this.has.headline=!0),this.has.media&&(this.data.media.mediatype=Im(this.data.media),this.options.media_name=this.data.media.mediatype.name,this.options.media_type=this.data.media.mediatype.type,this.options.autolink=this.data.autolink,this._media=new this.data.media.mediatype.cls(this.data.media,this.options,this.getLanguage())),(this.has.text||this.has.headline)&&(this._text=new OV(this.data.text,{title:this.has.title,language:this.getLanguage(),autolink:this.data.autolink}),this._text.addDateText(this.getFormattedDate())),!this.has.text&&!this.has.headline&&this.has.media?(this._el.container.classList.add("tl-slide-media-only"),this._media.addTo(this._el.content)):this.has.headline&&this.has.media&&!this.has.text?(this._el.container.classList.add("tl-slide-media-only"),this._text.addTo(this._el.content),this._media.addTo(this._el.content)):this.has.text&&this.has.media?(this._text.addTo(this._el.content),this._media.addTo(this._el.content)):(this.has.text||this.has.headline)&&(this._el.container.classList.add("tl-slide-text-only"),this._text.addTo(this._el.content)),this.onLoaded()}_initEvents(){}_updateBackgroundDisplay(){this._background_media&&this._background_media._state.loaded&&(this._el.background.style.backgroundImage="url('"+this._background_media.getImageURL(this.options.width,this.options.height)+"')")}_setInteractive(e){e?this._el.container.removeAttribute("inert"):this._el.container.setAttribute("inert",!0)}}ar($V,js,or,Ls);class KE{constructor(e,r,i){this._el={container:{},content_container:{},icon:{},title:{},description:{}},this.mediatype={},this.data={title:"Navigation",description:"Description",date:"Date"},this.options={direction:"previous"},this.animator=null,wt(this.options,r),wt(this.data,e),this._el.container=Fc("tl-slidenav-"+this.options.direction),Xo&&this._el.container.setAttribute("ontouchstart"," "),this._initLayout(),this._initEvents(),i&&i.appendChild(this._el.container)}update(e){var r={title:"",description:"",date:e.getFormattedDate()};e.data.text&&e.data.text.headline&&(r.title=e.data.text.headline),this._update(r)}setColor(e){e?this._el.content_container.className="tl-slidenav-content-container tl-slidenav-inverted":this._el.content_container.className="tl-slidenav-content-container"}_onMouseClick(){this.fire("clicked",this.options)}_update(e){this.data=wt(this.data,e);const r=Xl(this.data.title);this._el.title.innerHTML=r;const i=Xl(this.data.date);this._el.description.innerHTML=i,this._el.container.setAttribute("aria-label",`${this.options.direction}, ${r}, ${i}`)}_initLayout(){this._el.content_container=Te("div","tl-slidenav-content-container",this._el.container),this._el.icon=Te("div","tl-slidenav-icon",this._el.content_container),this._el.title=Te("div","tl-slidenav-title",this._el.content_container),this._el.description=Te("div","tl-slidenav-description",this._el.content_container),this._el.icon.innerHTML="&nbsp;",this._update()}_initEvents(){Qe.addListener(this._el.container,"click",this._onMouseClick,this)}}ar(KE,Ls,or);class UV{constructor(e,r,i,s){s&&this.setLanguage(s),this._el={container:{},background:{},slider_container_mask:{},slider_container:{},slider_item_container:{}},this._nav={},this._nav.previous={},this._nav.next={},this.slide_spacing=0,this._slides=[],this._swipable,this.preloadTimer,this._message,this.current_id="",this.data={},this.options={id:"",layout:"portrait",width:600,height:600,default_bg_color:{r:255,g:255,b:255},slide_padding_lr:40,start_at_slide:1,slide_default_fade:"0%",duration:1e3,ease:qu,dragging:!0,trackResize:!0},typeof e=="object"?(this._el.container=e,this.options.id=jo(6,"tl")):(this.options.id=e,this._el.container=Ih(e)),this._el.container.id||(this._el.container.id=this.options.id),this.animator=null,wt(this.options,i),wt(this.data,r)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this.goTo(this.options.start_at_slide),this._onLoaded()}_addSlide(e){e.addTo(this._el.slider_item_container),e.on("added",this._onSlideAdded,this),e.on("background_change",this._onBackgroundChange,this)}_createSlide(e,r,i){var s=new $V(e,this.options,r,this.getLanguage());this._addSlide(s),i<0?this._slides.push(s):this._slides.splice(i,0,s)}_createSlides(e){for(var r=0;r<e.length;r++)e[r].unique_id==""&&(e[r].unique_id=jo(6,"tl-slide")),this._createSlide(e[r],!1,-1)}_removeSlide(e){e.removeFrom(this._el.slider_item_container),e.off("added",this._onSlideRemoved,this),e.off("background_change",this._onBackgroundChange)}_destroySlide(e){this._removeSlide(this._slides[e]),this._slides.splice(e,1)}_findSlideIndex(e){var r=e;return(typeof e=="string"||e instanceof String)&&(r=xV(e,this._slides,"unique_id")),r}updateDisplay(e,r,i,s){var a,o;typeof s>"u"?o=this.options.layout:o=s,this.options.layout=o,e?this.options.width=e:this.options.width=this._el.container.offsetWidth,r?this.options.height=r:this.options.height=this._el.container.offsetHeight,this.slide_spacing=this.options.width*2,a=this.options.height/2,this._nav.next.setPosition({top:a}),this._nav.previous.setPosition({top:a});for(var l=0;l<this._slides.length;l++)this._slides[l].updateDisplay(this.options.width,this.options.height,o),this._slides[l].setPosition({left:this.slide_spacing*l,top:0});this.goToId(this.current_id,!0,!0)}createSlide(e,r){this._createSlide(e,!1,r)}createSlides(e){this._createSlides(e)}destroySlide(e){this._destroySlide(e)}destroySlideId(e){this.destroySlide(this._findSlideIndex(e))}goTo(e,r,i){e=parseInt(e),isNaN(e)&&(e=0);var s=this;this.changeBackground({color_value:"",image:!1}),this.preloadTimer&&clearTimeout(this.preloadTimer);for(var a=0;a<this._slides.length;a++)this._slides[a].setActive(!1);e<this._slides.length&&e>=0&&(this.current_id=this._slides[e].data.unique_id,this.animator&&this.animator.stop(),this._swipable&&this._swipable.stopMomentum(),r?(this._el.slider_container.style.left=-(this.slide_spacing*e)+"px",this._onSlideChange(i)):this.animator=As(this._el.slider_container,{left:-(this.slide_spacing*e)+"px",duration:this.options.duration,easing:this.options.ease,complete:this._onSlideChange(i)}),this._slides[e].setActive(!0),this._slides[e+1]?(this.showNav(this._nav.next,!0),this._nav.next.update(this._slides[e+1])):this.showNav(this._nav.next,!1),this._slides[e-1]?(this.showNav(this._nav.previous,!0),this._nav.previous.update(this._slides[e-1])):this.showNav(this._nav.previous,!1),this.preloadTimer=setTimeout(function(){s.preloadSlides(e)},this.options.duration))}goToId(e,r,i){this.goTo(this._findSlideIndex(e),r,i)}preloadSlides(e){this._slides[e+1]&&(this._slides[e+1].loadMedia(),this._slides[e+1].scrollToTop()),this._slides[e+2]&&(this._slides[e+2].loadMedia(),this._slides[e+2].scrollToTop()),this._slides[e-1]&&(this._slides[e-1].loadMedia(),this._slides[e-1].scrollToTop()),this._slides[e-2]&&(this._slides[e-2].loadMedia(),this._slides[e-2].scrollToTop())}next(){var e=this._findSlideIndex(this.current_id);e+1<this._slides.length?this.goTo(e+1):this.goTo(e)}previous(){var e=this._findSlideIndex(this.current_id);e-1>=0?this.goTo(e-1):this.goTo(e)}showNav(e,r){this.options.width<=500&&Xo?e.hide():r?e.show():e.hide()}changeBackground(e){var r={r:256,g:256,b:256};e.color_value&&e.color_value!=""?(r=wV(e.color_value),r||(ot("Invalid color value "+e.color_value),r=this.options.default_bg_color)):(r=this.options.default_bg_color,e.color_value="rgb("+r.r+" , "+r.g+", "+r.b+")"),r.r+""+r.g+r.b,this._el.background.style.backgroundImage="none",e.color_value?this._el.background.style.backgroundColor=e.color_value:this._el.background.style.backgroundColor="transparent",r.r<255||r.g<255||r.b<255||e.image?(this._nav.next.setColor(!0),this._nav.previous.setColor(!0)):(this._nav.next.setColor(!1),this._nav.previous.setColor(!1))}_updateDrawSlides(){for(var e=this.options.layout,r=0;r<this._slides.length;r++)this._slides[r].updateDisplay(this.options.width,this.options.height,e),this._slides[r].setPosition({left:this.slide_spacing*r,top:0});this.goToId(this.current_id,!0,!1)}_initLayout(){this._el.container.classList.add("tl-storyslider"),this._nav.previous=new KE({title:"Previous",description:"description"},{direction:"previous"},this._el.container),this._nav.next=new KE({title:"Next",description:"description"},{direction:"next"},this._el.container),this._el.slider_container_mask=Te("div","tl-slider-container-mask",this._el.container),this._el.background=Te("div","tl-slider-background tl-animate",this._el.container),this._el.slider_container=Te("div","tl-slider-container tlanimate",this._el.slider_container_mask),this._el.slider_item_container=Te("div","tl-slider-item-container",this._el.slider_container),this._el.slider_container.setAttribute("aria-live","polite"),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this._el.slider_container.style.left="0px",Bi&&(this._swipable=new xT(this._el.slider_container_mask,this._el.slider_container,{enable:{x:!0,y:!1},snap:!0}),this._swipable.enable(),this._message=new Qg(this._el.container,{message_class:"tl-message-full",message_icon_class:"tl-icon-swipe-left"},this.getLanguage()),this._message.updateMessage(this._("swipe_to_navigate")),this._message.addTo(this._el.container))}_initEvents(){this._nav.next.on("clicked",this._onNavigation,this),this._nav.previous.on("clicked",this._onNavigation,this),this._message&&this._message.on("clicked",this._onMessageClick,this),this._swipable&&(this._swipable.on("swipe_left",this._onNavigation,this),this._swipable.on("swipe_right",this._onNavigation,this),this._swipable.on("swipe_nodirection",this._onSwipeNoDirection,this))}_initData(){this.data.title&&this._createSlide(this.data.title,!0,-1),this._createSlides(this.data.events)}_onBackgroundChange(e){var r=this._findSlideIndex(this.current_id),i=this._slides[r].getBackground();this.changeBackground(e),this.fire("colorchange",i)}_onMessageClick(e){this._message.hide()}_onSwipeNoDirection(e){this.goToId(this.current_id)}_onNavigation(e){e.direction=="next"||e.direction=="left"?this.next():(e.direction=="previous"||e.direction=="right")&&this.previous(),this.fire("nav_"+e.direction,this.data)}_onSlideAdded(e){ot("slideadded"),this.fire("slideAdded",this.data)}_onSlideRemoved(e){this.fire("slideRemoved",this.data)}_onSlideChange(e){e||this.fire("change",{unique_id:this.current_id})}_onMouseClick(e){}_fireMouseEvent(e){if(this._loaded){var r=e.type;r=r==="mouseenter"?"mouseover":r==="mouseleave"?"mouseout":r,this.hasEventListeners(r)&&(r==="contextmenu"&&Qe.preventDefault(e),this.fire(r,{latlng:"something",layerPoint:"something else"}))}}_onLoaded(){this.fire("loaded",this.data)}}ar(UV,js,or);class BV{constructor(e,r,i,s){this._el={parent:{},container:{},button_forwardtoend:{},button_backtostart:{},button_zoomin:{},button_zoomout:{},arrow:{},line:{},coverbar:{},grip:{}},this.collapsed=!1,typeof e=="object"?this._el.container=e:this._el.container=Ih(e),r&&(this._el.parent=r),this.data={visible_ticks_dates:{}},this.options={width:600,height:600,duration:1e3,ease:qu,menubar_default_y:0},this.animator={},this.setLanguage(s),wt(this.options,i),this._initLayout(),this._initEvents()}show(e){this.options.duration}hide(e){}toogleZoomIn(e){e?this._el.button_zoomin.removeAttribute("disabled"):this._el.button_zoomin.setAttribute("disabled",!0)}toogleZoomOut(e){e?this._el.button_zoomout.removeAttribute("disabled"):this._el.button_zoomout.setAttribute("disabled",!0)}changeVisibleTicks(e){const r=e.minor;if(!r.length){this.data.visible_ticks_dates={};return}const s=r[0].date.getFullYear(),o=r[r.length-1].date.getFullYear();this.data.visible_ticks_dates={start:s,end:o},this._updateZoomAriaLabels()}setSticky(e){this.options.menubar_default_y=e}setColor(e){e?this._el.container.className="tl-menubar tl-menubar-inverted":this._el.container.className="tl-menubar"}updateDisplay(e,r,i,s){this._updateDisplay(e,r,i,s)}_onButtonZoomIn(e){this.fire("zoom_in",e)}_onButtonZoomOut(e){this.fire("zoom_out",e)}_onButtonForwardToEnd(e){this.fire("forward_to_end",e)}_onButtonBackToStart(e){this.fire("back_to_start",e)}_initLayout(){this._el.button_zoomin=Fc("tl-menubar-button",this._el.container),this._el.button_zoomout=Fc("tl-menubar-button",this._el.container),this._el.button_forwardtoend=Fc("tl-menubar-button",this._el.container),this._el.button_backtostart=Fc("tl-menubar-button",this._el.container),Xo&&this._el.container.setAttribute("ontouchstart"," "),this._el.button_backtostart.innerHTML="<span class='tl-icon-goback'></span>",this._el.button_backtostart.setAttribute("aria-label",this._("return_to_title")),this._el.button_forwardtoend.innerHTML="<span class='tl-icon-goend'></span>",this._el.button_forwardtoend.setAttribute("aria-label",this._("go_to_end")),this._el.button_zoomin.innerHTML="<span class='tl-icon-zoom-in'></span>",this._el.button_zoomin.setAttribute("aria-label",this._("zoom_in")),this._el.button_zoomout.innerHTML="<span class='tl-icon-zoom-out'></span>",this._el.button_zoomout.setAttribute("aria-label",this._("zoom_out"))}_initEvents(){Qe.addListener(this._el.button_forwardtoend,"click",this._onButtonForwardToEnd,this),Qe.addListener(this._el.button_backtostart,"click",this._onButtonBackToStart,this),Qe.addListener(this._el.button_zoomin,"click",this._onButtonZoomIn,this),Qe.addListener(this._el.button_zoomout,"click",this._onButtonZoomOut,this)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}_updateZoomAriaLabels(){Object.keys(this.data.visible_ticks_dates).length==0?(this._el.button_zoomin.setAttribute("aria-description",""),this._el.button_zoomout.setAttribute("aria-description","")):(this._el.button_zoomin.setAttribute("aria-description",this._("aria_label_zoomin",this.data.visible_ticks_dates)),this._el.button_zoomout.setAttribute("aria-description",this._("aria_label_zoomout",this.data.visible_ticks_dates)))}}ar(BV,Ls,or,js);let YE=null;if(document){let t=document.getElementsByTagName("script");t&&t.length>0&&(YE=t[t.length-1].src)}function Mie(t){return function(e){if(t.config){var r=e.key,i=t._getSlideIndex(self.current_id),s=t.config.events.length-1,a=t.config.title?s+1:s,o=0;r=="ArrowLeft"?i!=o&&t.goToPrev():r=="ArrowRight"&&i!=a&&t.goToNext()}}}class zV{constructor(e,r,i){if(i||(i={}),this.ready=!1,this._el={container:Ih(e),storyslider:{},timenav:{},menubar:{}},i.lang&&!i.language&&(i.language=i.lang),this.language=bT,this._storyslider={},this._timenav={},this._menubar={},this._loaded={storyslider:!1,timenav:!1},this.config=null,this.options={script_path:"https://cdn.knightlab.com/libs/timeline3/latest/js/",height:this._el.container.offsetHeight,width:this._el.container.offsetWidth,debug:!1,font:"default",is_embed:!1,is_full_embed:!1,hash_bookmark:!1,default_bg_color:{r:255,g:255,b:255},scale_factor:2,layout:"landscape",timenav_position:"bottom",optimal_tick_width:60,base_class:"tl-timeline",timenav_height:null,timenav_height_percentage:25,timenav_mobile_height_percentage:40,timenav_height_min:175,marker_height_min:30,marker_width_min:100,marker_padding:5,start_at_slide:0,start_at_end:!1,menubar_height:0,skinny_size:650,medium_size:800,use_bc:!1,duration:1e3,ease:qu,dragging:!0,trackResize:!0,map_type:"stamen:toner-lite",slide_padding_lr:100,slide_default_fade:"0%",zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89],language:"en",ga_measurement_id:null,ga_property_id:null,track_events:["back_to_start","nav_next","nav_previous","zoom_in","zoom_out"],theme:null,sheets_proxy:"https://sheets-proxy.knightlab.com/proxy/",soundcite:!1},this.animator_timenav=null,this.animator_storyslider=null,this.animator_menubar=null,this.message=new Qg(this._el.container,{message_class:"tl-message-full"}),typeof i.default_bg_color=="string"){var s=wV(i.default_bg_color);s?i.default_bg_color=s:(delete i.default_bg_color,ot("Invalid default background color. Ignoring."))}wt(this.options,i),this.options.script_path||(this.options.script_path=this.determineScriptPath()),i.soundcite&&this.on("ready",()=>{ot("Loading Soundcite resources "),i0("https://cdn.knightlab.com/libs/soundcite/latest/css/player.css"),Vo("https://cdn.knightlab.com/libs/soundcite/latest/js/soundcite.min.js")}),this._loadStyles(),document.addEventListener("keydown",Mie(this)),window.addEventListener("resize",(function(a){this.updateDisplay()}).bind(this)),this.options.debug&&Jne(console.log),this._el.container.classList.add("tl-timeline"),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","region"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline")),this.options.is_embed&&this._el.container.classList.add("tl-timeline-embed"),this.options.is_full_embed&&this._el.container.classList.add("tl-timeline-full-embed"),this._loadLanguage(r)}_loadStyles(){let e=null,r=null;if(this.options.font&&(this.options.font.indexOf("http")==0||this.options.font.match(/\.css$/)))e=this.options.font;else if(this.options.font){let i="../css/fonts/font."+this.options.font.toLowerCase()+".css";e=new URL(i,this.options.script_path).toString()}if(e&&i0(e),this.options.theme&&(this.options.theme.indexOf("http")==0||this.options.theme.match(/\.css$/)))r=this.options.theme;else if(this.options.theme){let i="../css/themes/timeline.theme."+this.options.theme.toLowerCase()+".css";r=new URL(i,this.options.script_path).toString()}r&&i0(r)}_loadLanguage(e){try{var r=this.options.language,i=this.options.script_path;mre(r,i).then(s=>{s?(this.language=s,this.message.setLanguage(this.language),this.showMessage(this._("loading_timeline"))):this.showMessage(`Error loading ${r}`),this._initData(e)})}catch(s){this.showMessage(this._translateError(s))}}_initData(e){typeof e=="string"?Jre(e,{callback:(function(r){this.setConfig(r)}).bind(this),sheets_proxy:this.options.sheets_proxy}):ho==e.constructor?this.setConfig(e):this.setConfig(new ho(e))}_translateError(e){return e.hasOwnProperty("stack")&&ot(e.stack),e.message_key?this._(e.message_key)+(e.detail?" ["+e.detail+"]":""):e}showMessage(e){this.message?this.message.updateMessage(e):(ot("No message display available."),ot(e))}determineScriptPath(){let e=null;if(YE)e=YE;else{let r=document.getElementById("timeline-script-tag");r&&(e=r.src)}if(!e){let r=document.getElementsByTagName("script");for(let i=r.length-1;i>=0;i--)if(r[i].src){e=r[i].src;break}}return e?e.substr(0,e.lastIndexOf("/")+1):""}setConfig(e){if(this.config=e,this.config.isValid()&&(this.config.validate(),this._validateOptions()),this.config.isValid())try{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this._onDataLoaded.bind(this)):this._onDataLoaded()}catch(a){this.showMessage("<strong>"+this._("error")+":</strong> "+this._translateError(a))}else{for(var r=[],i=0,s=this.config.getErrors();i<s.length;i++)r.push(this._translateError(s[i]));this.showMessage("<strong>"+this._("error")+":</strong> "+r.join("<br>"))}}_onDataLoaded(){this.fire("dataloaded"),this._initLayout(),this._initEvents(),this._initAnalytics(),this.message&&this.message.hide();let e=(i,s)=>{i.reduce((a,o)=>a||o.isIntersecting,!1)&&this.updateDisplay()};new IntersectionObserver(e.bind(this)).observe(this._el.container),this.ready=!0,this.fire("ready")}_initLayout(){this.message.removeFrom(this._el.container),this._el.container.innerHTML="",this.options.timenav_position=="top"?(this._el.timenav=Te("div","tl-timenav",this._el.container),this._el.menubar=Te("div","tl-menubar",this._el.container),this._el.storyslider=Te("div","tl-storyslider",this._el.container)):(this._el.storyslider=Te("div","tl-storyslider",this._el.container),this._el.timenav=Te("div","tl-timenav",this._el.container),this._el.menubar=Te("div","tl-menubar",this._el.container)),this._el.attribution=Te("div","tl-attribution",this._el.container),this._el.attribution.innerHTML="<a href='https://timeline.knightlab.com' target='_blank' rel='noopener'><span class='tl-knightlab-logo'></span>TimelineJS</a>",this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.timenav_height=this._calculateTimeNavHeight(this.options.timenav_height),this._timenav=new FV(this._el.timenav,this.config,this.options,this.language),this._timenav.on("loaded",this._onTimeNavLoaded,this),this._timenav.options.height=this.options.timenav_height,this._timenav.init(),this.options.initial_zoom&&this.setZoom(this.options.initial_zoom),this._storyslider=new UV(this._el.storyslider,this.config,this.options,this.language),this._el.storyslider.setAttribute("role","group"),this._el.storyslider.setAttribute("aria-label",this._("aria_label_timeline_content")),this._storyslider.on("loaded",this._onStorySliderLoaded,this),this._storyslider.init(),this._menubar=new BV(this._el.menubar,this._el.container,this.options,this.getLanguage()),this.options.layout=="portrait"?this.options.storyslider_height=this.options.height-this.options.timenav_height-1:this.options.storyslider_height=this.options.height-1,this._updateDisplay()}_initEvents(){this._timenav.on("change",this._onTimeNavChange,this),this._timenav.on("zoomtoggle",this._onZoomToggle,this),this._timenav.on("visible_ticks_change",this._onVisibleTicksChange,this),this._storyslider.on("change",this._onSlideChange,this),this._storyslider.on("colorchange",this._onColorChange,this),this._storyslider.on("nav_next",this._onStorySliderNext,this),this._storyslider.on("nav_previous",this._onStorySliderPrevious,this),this._menubar.on("zoom_in",this._onZoomIn,this),this._menubar.on("zoom_out",this._onZoomOut,this),this._menubar.on("forward_to_end",this._onForwardToEnd,this),this._menubar.on("back_to_start",this._onBackToStart,this)}_onColorChange(e){this.fire("color_change",{unique_id:this.current_id},this)}_onSlideChange(e){this.current_id!=e.unique_id&&(this.current_id=e.unique_id,this._timenav.goToId(this.current_id),this._onChange(e))}_onTimeNavChange(e){this.current_id!=e.unique_id&&(this.current_id=e.unique_id,this._storyslider.goToId(this.current_id),this._onChange(e))}_onZoomToggle(e){e.zoom=="in"?this._menubar.toogleZoomIn(e.show):e.zoom=="out"&&this._menubar.toogleZoomOut(e.show)}_onChange(e){this.fire("change",{unique_id:this.current_id},this),this.options.hash_bookmark&&this.current_id&&this._updateHashBookmark(this.current_id)}_onVisibleTicksChange(e){this._menubar.changeVisibleTicks(e.visible_ticks)}_onForwardToEnd(e){this.goToEnd(),this.fire("forward_to_end",{unique_id:this.current_id},this)}_onBackToStart(e){this.goToStart(),this.fire("back_to_start",{unique_id:this.current_id},this)}_onZoomIn(e){this._timenav.zoomIn(),this.fire("zoom_in",{zoom_level:this._timenav.options.scale_factor},this)}_onZoomOut(e){this._timenav.zoomOut(),this.fire("zoom_out",{zoom_level:this._timenav.options.scale_factor},this)}_onTimeNavLoaded(){this._loaded.timenav=!0,this._onLoaded()}_onStorySliderLoaded(){this._loaded.storyslider=!0,this._onLoaded()}_onStorySliderNext(e){this.fire("nav_next",e)}_onStorySliderPrevious(e){this.fire("nav_previous",e)}_updateDisplay(e,r,i){var s=this.options.duration,a=this.options.base_class,o=0;i&&(s=i),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.width<=this.options.skinny_size?(a+=" tl-skinny",this.options.layout="portrait"):this.options.width<=this.options.medium_size?(a+=" tl-medium",this.options.layout="landscape"):this.options.layout="landscape",Bi&&(this.options.layout=Xne()),Xo?(a+=" tl-mobile",this.options.timenav_height=this._calculateTimeNavHeight(e,this.options.timenav_mobile_height_percentage)):this.options.timenav_height=this._calculateTimeNavHeight(e),this.options.layout=="portrait"?a+=" tl-layout-portrait":a+=" tl-layout-landscape",this.options.storyslider_height=this.options.height-this.options.timenav_height,this.options.timenav_position=="top"?o=Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-39/2:o=Math.round(this.options.storyslider_height+1+Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-35/2),r?(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this.animator_storyslider&&this.animator_storyslider.stop(),this.animator_storyslider=As(this._el.storyslider,{height:this.options.storyslider_height+"px",duration:s/2,easing:Ud}),this.animator_menubar&&this.animator_menubar.stop(),this.animator_menubar=As(this._el.menubar,{top:o+"px",duration:s/2,easing:Ud})):(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this._el.storyslider.style.height=this.options.storyslider_height+"px",this._el.menubar.style.top=o+"px"),this.message&&this.message.updateDisplay(this.options.width,this.options.height),this._timenav.updateDisplay(this.options.width,this.options.timenav_height,r),this._storyslider.updateDisplay(this.options.width,this.options.storyslider_height,r,this.options.layout),this.language.direction=="rtl"&&(a+=" tl-rtl"),this._el.container.className=a}_calculateTimeNavHeight(e,r){var i=0;return(this.options.timenav_height_percentage||r)&&(r?i=Math.round(this.options.height/100*r):i=Math.round(this.options.height/100*this.options.timenav_height_percentage)),this._timenav.ready&&this.options.timenav_height_min<this._timenav.getMinimumHeight()&&(this.options.timenav_height_min=this._timenav.getMinimumHeight()),i<this.options.timenav_height_min&&(i=this.options.timenav_height_min),i=i-this.options.marker_padding*2,i}_validateOptions(){for(var e=["timenav_height","timenav_height_min","marker_height_min","marker_width_min","marker_padding","start_at_slide","slide_padding_lr"],r=0;r<e.length;r++){var i=e[r],s=this.options[i];let a=!0;typeof s=="number"?a=s==parseInt(s):typeof s=="string"&&(a=s.match(/^\s*(\-?\d+)?\s*$/)),a||this.config.logError({message_key:"invalid_integer_option",detail:i})}}_getSlideIndex(e){if(this.config){if(this.config.title&&this.config.title.unique_id==e)return 0;for(var r=0;r<this.config.events.length;r++)if(e==this.config.events[r].unique_id)return this.config.title?r+1:r}return-1}_getEventIndex(e){for(var r=0;r<this.config.events.length;r++)if(e==this.config.events[r].unique_id)return r;return-1}_onLoaded(){if(this._loaded.storyslider&&this._loaded.timenav&&(this.fire("loaded",this.config),Qne(this.options.start_at_end)||this.options.start_at_slide>this.config.events.length?this.goToEnd():this.goTo(this.options.start_at_slide),this.options.hash_bookmark)){window.location.hash!=""?this.goToId(window.location.hash.replace("#event-","")):this._updateHashBookmark(this.current_id);let e=this;window.addEventListener("hashchange",function(){window.location.hash.indexOf("#event-")==0&&e.goToId(window.location.hash.replace("#event-",""))},!1)}}_updateHashBookmark(e){if(e){var r="#event-"+e.toString();window.history.replaceState(null,"Browsing TimelineJS",r),this.fire("hash_updated",{unique_id:this.current_id,hashbookmark:"#event-"+e.toString()},this)}}zoomIn(){this._timenav.zoomIn()}zoomOut(){this._timenav.zoomOut()}setZoom(e){this._timenav.setZoom(e)}goToId(e){this.current_id!=e&&(this.current_id=e,this._timenav.goToId(this.current_id),this._storyslider.goToId(this.current_id,!1,!0),this.fire("change",{unique_id:this.current_id},this))}goTo(e){if(!(e<0))try{this.config.title?e===0?this.goToId(this.config.title.unique_id):this.goToId(this.config.events[e-1].unique_id):this.goToId(this.config.events[e].unique_id)}catch{return}}goToStart(){this.goTo(0)}goToEnd(){var e=this.config.events.length-1;this.goTo(this.config.title?e+1:e)}goToPrev(){this.goTo(this._getSlideIndex(this.current_id)-1),this.focusContainer()}goToNext(){this.goTo(this._getSlideIndex(this.current_id)+1),this.focusContainer()}add(e){var r=this.config.addEvent(e),i=this._getEventIndex(r),s=this.config.events[i];this._storyslider.createSlide(s,this.config.title?i+1:i),this._storyslider._updateDrawSlides(),this._timenav.createMarker(s,i),this._timenav._updateDrawTimeline(!1),this.fire("added",{unique_id:r})}remove(e){if(e>=0&&e<this.config.events.length){this.config.events[e].unique_id==this.current_id&&(e<this.config.events.length-1?this.goTo(e+1):this.goTo(e-1));var r=this.config.events.splice(e,1);delete this.config.event_dict[r[0].unique_id],this._storyslider.destroySlide(this.config.title?e+1:e),this._storyslider._updateDrawSlides(),this._timenav.destroyMarker(e),this._timenav._updateDrawTimeline(!1),this.fire("removed",{unique_id:r[0].unique_id})}}removeId(e){this.remove(this._getEventIndex(e))}getData(e){if(this.config.title){if(e==0)return this.config.title;if(e>0&&e<=this.config.events.length)return this.config.events[e-1]}else if(e>=0&&e<this.config.events.length)return this.config.events[e];return null}getDataById(e){return this.getData(this._getSlideIndex(e))}getSlide(e){return e>=0&&e<this._storyslider._slides.length?this._storyslider._slides[e]:null}getSlideById(e){return this.getSlide(this._getSlideIndex(e))}getCurrentSlide(){return this.getSlideById(this.current_id)}updateDisplay(){this.ready?this._updateDisplay():ot("updateDisplay called but timeline is not in ready state")}focusContainer(){this._el.container.focus()}_initGoogleAnalytics(e){Vo(`https://www.googletagmanager.com/gtag/js?id=${e}`),window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",e)}_initAnalytics(){let e=this.options.ga_measurement_id||this.options.ga_property_id||null;if(e){this._initGoogleAnalytics(e);var r=this.options.track_events;for(let s=0;s<r.length;s++){var i=r[s];this.addEventListener(i,function(a){gtag("event",a.type)})}}}}ar(zV,js,or);function Lie(){const t=S.useRef(null),[e,r]=S.useState(null),[i,s]=S.useState(!0),[a,o]=S.useState(null),l=_r(),u=S.useRef();u.current=l,S.useEffect(()=>{async function h(){try{const f=await dn(cn(Ct,"timelineEvents")),m=c(f);r({title:{media:{url:"",caption:"",credit:""},text:{headline:"Civil Rights Movement Timeline",text:"Key events from the Civil Rights Movement, identified from interviews from the Library of Congress Civil Rights History Project."}},events:m}),s(!1)}catch(f){console.error("Error fetching timeline data:",f),o("Failed to load timeline events."),s(!1)}}h()},[]),S.useEffect(()=>{if(e&&t.current){t.current.innerHTML="";try{new zV(t.current,e),setTimeout(d,1e3)}catch(h){console.error("Error initializing Timeline.js:",h),o("Failed to initialize timeline.")}}},[e]);const c=h=>h.docs.map(f=>{const m=f.data(),v=new Date(m.date),y=m.keywords?m.keywords.split(",").map(_=>_.trim()):[],b=`
        ${m.description||""}
        <br><br>
        <button 
          class="relevant-interviews-button" 
          data-keywords="${encodeURIComponent(y.join(","))}"
          style="background-color: #2563eb; color: white; padding: 10px 16px; border: none; border-radius: 8px; cursor: pointer; display: flex; align-items: center; font-family: inherit; font-size: 14px; font-weight: 500; transition: background-color 0.2s; box-shadow: 0 1px 3px rgba(0,0,0,0.1);"
          onmouseover="this.style.backgroundColor = '#1d4ed8'"
          onmouseout="this.style.backgroundColor = '#2563eb'"
        >
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" style="width: 20px; height: 20px; margin-right: 8px;">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
          </svg>
          Relevant Interviews
        </button>
      `;return{start_date:{year:v.getFullYear(),month:v.getMonth()+1,day:v.getDate()},text:{headline:m.title,text:b},media:{url:m.mediaUrl||"",caption:m.mediaCaption||"",credit:m.mediaCredit||""}}}),d=()=>{document.querySelectorAll(".relevant-interviews-button").forEach(h=>{h.addEventListener("click",function(f){f.preventDefault(),f.stopPropagation();const m=this.dataset.keywords;m&&u.current(`/playlist-builder?keywords=${m}`)})})};return i?p.jsxs("div",{className:"flex justify-center items-center h-96 bg-gray-50",children:[p.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),p.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):a?p.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg text-center mx-auto my-6 max-w-xl",children:a}):p.jsxs("div",{className:"w-full max-w-7xl mx-auto p-6 bg-gray-50 font-sans",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Civil Rights Timeline"}),p.jsx("p",{className:"text-base leading-relaxed text-gray-600",children:"Explore key events from the Civil Rights Movement, with links to relevant interview recordings."})]}),p.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden p-0 mb-6",children:p.jsx("div",{ref:t,id:"timeline-embed",style:{height:"600px",width:"100%",position:"relative"}})}),p.jsx("div",{className:"bg-indigo-50 rounded-xl p-4 px-6 border-l-4 border-indigo-500",children:p.jsxs("p",{className:"text-sm leading-relaxed text-indigo-800 m-0",children:[p.jsx("strong",{children:"Tip:"}),' Click on any event to see details, and use the "Relevant Interviews" button to find related interview recordings.']})})]})}function Oie({activeVisualization:t}){return p.jsxs("div",{className:"w-full max-w-5xl mx-auto p-6 bg-white shadow-md rounded-md",children:[t==="keywords"&&p.jsx($ne,{}),t==="map"&&p.jsx(qne,{}),t==="timeline"&&p.jsx(Lie,{})]})}function jie(){const[t,e]=S.useState("timeline"),{user:r}=xh(),i=["timeline","keywords","map"];return p.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[p.jsx("div",{className:"text-center mb-8",children:p.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text mb-6",children:"Civil Rights History Project"})}),p.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden transition-all duration-300 mb-6",children:[p.jsx("div",{className:"border-b border-gray-200",children:p.jsx("ul",{className:"flex flex-wrap m-0 p-0 list-none",children:i.map(s=>p.jsx("li",{className:"flex-1",children:p.jsx("button",{onClick:()=>e(s),className:`w-full py-4 px-1 text-sm text-center transition-all duration-300 cursor-pointer border-0 ${t===s?"bg-indigo-50 text-blue-800 font-semibold border-b-2 border-blue-600":"bg-transparent text-gray-500 font-normal border-b-0"}`,children:s.charAt(0).toUpperCase()+s.slice(1)})},s))})}),p.jsx("div",{className:"p-6",children:p.jsx(Oie,{activeVisualization:t})})]})]})}function Vie(){var m,v;const[t,e]=S.useState(""),[r,i]=S.useState(""),[s,a]=S.useState(!1),[o,l]=S.useState(""),{login:u}=xh(),c=_r(),h=((v=(m=ri().state)==null?void 0:m.from)==null?void 0:v.pathname)||"/",f=async y=>{if(y.preventDefault(),!t||!r){l("Please enter both email and password");return}try{a(!0),l(""),await u(t,r),c(h,{replace:!0})}catch(b){console.error("Login error:",b);let _="Failed to log in";b.code==="auth/invalid-email"?_="Invalid email address":b.code==="auth/user-not-found"?_="No account found with this email":b.code==="auth/wrong-password"?_="Incorrect password":b.code==="auth/too-many-requests"&&(_="Too many failed login attempts. Please try again later"),l(_)}finally{a(!1)}};return p.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6 font-sans",children:[p.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[p.jsxs("div",{className:"mb-8",children:[p.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-4",children:"Sign in to your account"}),p.jsx("p",{className:"text-sm text-center text-gray-500 mt-2",children:"Enter your credentials to access your account"})]}),o&&p.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mb-6 rounded",children:p.jsxs("div",{className:"flex",children:[p.jsx("div",{className:"flex-shrink-0",children:p.jsx("svg",{className:"h-5 w-5 text-red-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),p.jsx("div",{className:"ml-3",children:p.jsx("p",{className:"text-sm text-red-700",children:o})})]})}),p.jsxs("form",{className:"mt-6",onSubmit:f,children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),p.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:y=>e(y.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"you@example.com"})]}),p.jsxs("div",{className:"mb-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),p.jsx("a",{href:"#",className:"text-xs text-blue-600 hover:text-blue-700 transition-colors",children:"Forgot password?"})]}),p.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:r,onChange:y=>i(y.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"••••••••"})]}),p.jsx("div",{className:"mt-8",children:p.jsx("button",{type:"submit",disabled:s,className:`w-full flex justify-center items-center py-3 px-4 relative bg-blue-600 text-white text-sm font-medium border-0 rounded-lg shadow-sm transition-colors ${s?"opacity-70 cursor-not-allowed":"hover:bg-blue-700 cursor-pointer"}`,children:s?p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"absolute left-6 flex items-center",children:p.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),p.jsx("span",{children:"Signing in..."})]}):p.jsxs(p.Fragment,{children:[p.jsx("span",{className:"absolute left-6 flex items-center",children:p.jsx("svg",{className:"h-5 w-5 text-blue-200",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),p.jsx("span",{children:"Sign in"})]})})}),p.jsx("div",{className:"mt-6 text-center",children:p.jsxs("p",{className:"text-sm text-gray-500",children:["Don't have an account?"," ",p.jsx("a",{href:"#",className:"text-blue-600 font-medium hover:text-blue-700 transition-colors",children:"Sign up"})]})})]})]}),p.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})}function Sp(t){return t?t.split(",").map(e=>e.trim().toLowerCase()).filter(e=>e.length>0):[]}function Ql(t){if(!t)return null;const e=t.match(/embed\/([a-zA-Z0-9_-]+)/);return e?e[1]:null}function uR(t){if(!t)return 0;const e=t.split(":").map(Number);return e.length===2?e[0]*60+e[1]:e.length===3?e[0]*3600+e[1]*60+e[2]:0}function wc(t){if(t==null)return"0:00";const e=Math.floor(t/3600),r=Math.floor(t%3600/60),i=Math.floor(t%60);return e>0?`${e}:${r.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`:`${r}:${i.toString().padStart(2,"0")}`}function yo(t){if(!t)return{startSeconds:0,endSeconds:0};const e=t.split("-").map(s=>s.trim());if(e.length!==2)return{startSeconds:0,endSeconds:0};const r=uR(e[0]),i=uR(e[1]);return{startSeconds:r,endSeconds:i}}const Fie=({videoQueue:t,currentVideoIndex:e,setCurrentVideoIndex:r,currentTime:i,totalDuration:s,onSeek:a})=>{const o=S.useRef(null),l=S.useRef(null),[u,c]=S.useState(0),[d,h]=S.useState(0),[f,m]=S.useState(null),[v,y]=S.useState(null),b=S.useRef(null),[_,w]=S.useState(0),E=8;S.useEffect(()=>{let I=0;for(let R=0;R<e;R++)if(t[R]){const{startSeconds:P,endSeconds:j}=yo(t[R].timestamp);I+=j-P||300}const x=Math.max(0,i);if(I+=x,h(I),s&&s>0){const R=I/s*100;c(Math.min(Math.max(0,R),100))}N()},[t,e,i,s]);const N=()=>{e<_?w(Math.max(0,e)):e>=_+E&&w(Math.max(0,e-E+1))},M=t.map((I,x)=>{const{startSeconds:R,endSeconds:P}=yo(I.timestamp),j=P-R||300,$=j/s*100,U=Ql(I.videoEmbedLink);return{id:x,width:$,duration:j,isActive:x===e,videoId:U,name:I.name||"Untitled"}}),O=M.slice(_,_+E),A=(I,x)=>{if(x!==e){r(x);return}const R=b.current;if(!R)return;const P=R.getBoundingClientRect(),$=(I.clientX-P.left)/P.width,U=M[e];if(!U)return;const Y=$*U.duration;a&&a(Y)},D=I=>{if(f!==e)return;const x=b.current;if(!x)return;const R=x.getBoundingClientRect(),j=(I.clientX-R.left)/R.width;y(j)},T=()=>{y(null)};return p.jsxs("div",{children:[p.jsx("div",{ref:o,style:{position:"relative",width:"100%",backgroundColor:"#e5e7eb",marginBottom:"10px",borderRadius:"8px",overflow:"hidden",padding:"10px",boxSizing:"border-box",border:"1px solid #d1d5db",display:"flex"},children:O.map(I=>{const x=I.id,R=I.isActive;return p.jsxs("div",{onClick:P=>A(P,x),onMouseEnter:()=>m(x),onMouseLeave:()=>{m(null),T()},onMouseMove:R?D:null,style:{width:`${100/O.length}%`,minWidth:"60px",padding:"0 2px",boxSizing:"border-box",position:"relative",cursor:"pointer"},ref:R?b:null,children:[p.jsxs("div",{style:{position:"relative",overflow:"hidden",borderRadius:"6px",border:`2px solid ${R?"#3b82f6":"#d1d5db"}`,height:"70px",boxShadow:R?"0 2px 5px rgba(0,0,0,0.2)":"none"},children:[p.jsx("img",{src:`https://img.youtube.com/vi/${I.videoId}/mqdefault.jpg`,alt:`Thumbnail for segment ${x+1}`,style:{width:"100%",maxHeight:"80px",objectFit:"contain",borderRadius:"6px"},onError:P=>{P.target.src="https://via.placeholder.com/120x60?text=No+Thumbnail"}}),R&&p.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${i/I.duration*100}%`,backgroundColor:"rgba(59, 130, 246, 0.4)",transition:"width 0.2s linear"}}),R&&v!==null&&p.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${v*100}%`,backgroundColor:"rgba(239, 68, 68, 0.4)",pointerEvents:"none",zIndex:5}}),R&&v!==null&&p.jsx("div",{style:{position:"absolute",top:"5px",left:`${v*100}%`,transform:"translateX(-50%)",backgroundColor:"rgba(0, 0, 0, 0.8)",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",zIndex:6,pointerEvents:"none"},children:wc(v*I.duration)}),p.jsx("div",{style:{position:"absolute",bottom:"0",left:"0",right:"0",backgroundColor:"rgba(0,0,0,0.6)",color:"white",fontSize:"11px",textAlign:"center",padding:"2px 0"},children:wc(I.duration)})]}),f===x&&p.jsxs("div",{style:{position:"absolute",top:"-30px",left:"50%",transform:"translateX(-50%)",backgroundColor:"#1f2937",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",zIndex:50,whiteSpace:"nowrap"},children:[I.name," (",wc(I.duration),")"]}),p.jsx("div",{style:{position:"absolute",top:"5px",left:"5px",backgroundColor:"rgba(0,0,0,0.7)",color:"white",borderRadius:"50%",width:"18px",height:"18px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"10px",fontWeight:"bold"},children:x+1})]},`thumb-${x}`)})}),p.jsxs("div",{style:{position:"relative",width:"100%",height:"8px",backgroundColor:"#d1d5db",borderRadius:"4px",overflow:"hidden",marginBottom:"10px",cursor:"pointer"},onClick:I=>{const x=I.currentTarget.getBoundingClientRect(),P=(I.clientX-x.left)/x.width;let j=0,$=0,U=0;for(let Y=0;Y<M.length;Y++){const q=M[Y].width/100;if(P>=j&&P<=j+q){$=Y,U=(P-j)/q*M[Y].duration;break}j+=q}$!==e&&r($),a&&$===e&&a(U)},children:[M.map(I=>p.jsx("div",{style:{width:`${I.width}%`,height:"100%",backgroundColor:"transparent",borderRight:I.id<M.length-1?"1px solid #c4c4c4":"none",position:"relative",zIndex:2}},`bar-${I.id}`)),p.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${u}%`,backgroundColor:"#3b82f6",transition:"width 0.2s linear",zIndex:1}}),p.jsx("div",{ref:l,style:{position:"absolute",top:"-3px",left:`${u}%`,transform:"translateX(-50%)",width:"4px",height:"14px",backgroundColor:"red",borderRadius:"2px",zIndex:10,transition:"left 0.1s linear"},children:p.jsx("div",{style:{position:"absolute",top:"-4px",left:"50%",transform:"translate(-50%, -50%)",width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"red"}})})]}),p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 10px",backgroundColor:"#f3f4f6",borderRadius:"4px",fontSize:"12px",marginBottom:"10px"},children:[p.jsx("div",{children:wc(d)}),p.jsxs("div",{style:{fontWeight:"bold"},children:["Clip ",e+1,"/",t.length," (",u.toFixed(1),"%)"]}),p.jsx("div",{children:wc(s)})]})]})},qV=({onPrevious:t,onPlay:e,onPause:r,onNext:i,isPlaying:s,hasPrevious:a,hasNext:o})=>p.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"24px",padding:"12px",backgroundColor:"#f3f4f6",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",margin:"20px auto",border:"2px solid #d1d5db",maxWidth:"320px"},children:[p.jsx("button",{onClick:t,disabled:!a,style:{padding:"12px",borderRadius:"9999px",backgroundColor:a?"#3b82f6":"#9ca3af",color:"white",border:"none",cursor:a?"pointer":"not-allowed",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),p.jsx("button",{onClick:s?r:e,style:{padding:"16px",borderRadius:"9999px",backgroundColor:"#3b82f6",color:"white",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:s?p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6"})}):p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})}),p.jsx("button",{onClick:i,disabled:!o,style:{padding:"12px",borderRadius:"9999px",backgroundColor:o?"#3b82f6":"#9ca3af",color:"white",border:"none",cursor:o?"pointer":"not-allowed",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),$ie=({nextKeyword:t,thumbnailUrl:e,onPlay:r})=>p.jsxs("div",{style:{width:"240px",backgroundColor:"#f3f4f6",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",border:"2px solid #d1d5db",overflow:"hidden"},children:[p.jsx("div",{className:"relative",children:p.jsxs("div",{style:{width:"100%",height:"120px",backgroundImage:e?`url(${e})`:"none",backgroundColor:e?"transparent":"#e5e7eb",backgroundSize:"cover",backgroundPosition:"center"},children:[!e&&p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"text-gray-400",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),p.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:p.jsx("button",{onClick:r,style:{padding:"12px",borderRadius:"9999px",backgroundColor:"#3b82f6",color:"white",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})})})]})}),p.jsxs("div",{style:{padding:"12px"},children:[p.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[p.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",color:"#374151",margin:0},children:"Up Next"}),p.jsx("span",{style:{backgroundColor:"#dbeafe",color:"#1e40af",fontSize:"12px",fontWeight:"500",padding:"2px 8px",borderRadius:"4px"},children:t})]}),p.jsx("p",{style:{fontSize:"12px",color:"#6b7280",margin:0},children:"Plays automatically when current playlist ends"})]})]}),Uie=({onClick:t})=>p.jsx("button",{onClick:t,className:"flex items-center justify-center p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 focus:outline-none transition-colors duration-200",title:"Shuffle and get new clips",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{d:"M8 5a1 1 0 100 2h5.586l-1.293 1.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L13.586 5H8zM12 15a1 1 0 100-2H6.414l1.293-1.293a1 1 0 10-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L6.414 15H12z"})})}),Bie=({isOpen:t,onConfirm:e,onCancel:r,message:i})=>t?p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:p.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm mx-auto",children:[p.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Confirmation"}),p.jsx("p",{className:"text-sm text-gray-600 mb-4",children:i}),p.jsxs("div",{className:"flex justify-end space-x-3",children:[p.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),p.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Confirm"})]})]})}):null,zie=({metadata:t,onMetadataUpdate:e})=>{const[r,i]=S.useState(!1),[s,a]=S.useState(!1),[o,l]=S.useState({}),[u,c]=S.useState(!1),[d,h]=S.useState(null),[f,m]=S.useState(!1);if(!t)return null;const v=()=>{l({...t}),a(!0),h(null),m(!1)},y=(A,D)=>{l(T=>({...T,[A]:D}))},b=async()=>{try{c(!0),h(null);let A;if(t.documentName&&t.id)A=Ns(Ct,"interviewSummaries",t.documentName,"subSummaries",t.id);else{console.error("Unable to determine document path"),h("Unable to determine document path for saving"),c(!1);return}const D={...o};delete D.id,delete D.documentName,await bm(A,D),e&&e(o),m(!0),c(!1),setTimeout(()=>{a(!1),m(!1)},1500)}catch(A){console.error("Error updating document:",A),h(`Error saving changes: ${A.message}`),c(!1)}},_=()=>{a(!1),l({}),h(null),m(!1)},w=["summary"],E=Object.keys(t).filter(A=>!w.includes(A)&&t[A]!==void 0),N=["id","documentName","createdAt","updatedAt"],M=A=>!N.includes(A),O=(A,D)=>{const T=M(A);return typeof D=="boolean"?p.jsxs("select",{disabled:!T,value:o[A].toString(),onChange:I=>y(A,I.target.value==="true"),className:`w-full px-2 py-1 text-sm border rounded ${T?"border-blue-300":"bg-gray-100"}`,children:[p.jsx("option",{value:"true",children:"True"}),p.jsx("option",{value:"false",children:"False"})]}):typeof D=="number"?p.jsx("input",{type:"number",disabled:!T,value:o[A],onChange:I=>y(A,Number(I.target.value)),className:`w-full px-2 py-1 text-sm border rounded ${T?"border-blue-300":"bg-gray-100"}`}):typeof D=="object"?p.jsx("textarea",{disabled:!0,value:JSON.stringify(D,null,2),className:"w-full px-2 py-1 text-sm border rounded bg-gray-100",rows:3}):p.jsx("input",{type:"text",disabled:!T,value:o[A]||"",onChange:I=>y(A,I.target.value),className:`w-full px-2 py-1 text-sm border rounded ${T?"border-blue-300":"bg-gray-100"}`})};return p.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6 border border-gray-100",children:[p.jsxs("div",{className:"flex justify-between items-center mb-3",children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Clip Metadata"}),p.jsx("div",{className:"flex space-x-2",children:s?p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:b,disabled:u,className:"px-3 py-1 bg-blue-600 text-white text-sm font-medium rounded hover:bg-blue-700 transition-colors disabled:bg-blue-300",children:u?"Saving...":"Save"}),p.jsx("button",{onClick:_,disabled:u,className:"px-3 py-1 bg-gray-200 text-gray-800 text-sm font-medium rounded hover:bg-gray-300 transition-colors disabled:bg-gray-100",children:"Cancel"})]}):p.jsxs(p.Fragment,{children:[p.jsx("button",{onClick:v,className:"px-3 py-1 bg-gray-100 text-blue-600 hover:bg-gray-200 text-sm font-medium rounded transition-colors",children:"Edit"}),p.jsx("button",{onClick:()=>i(!r),className:"px-3 py-1 text-blue-600 hover:text-blue-800 text-sm font-medium",children:r?"Show Less":"Show All"})]})})]}),f&&p.jsx("div",{className:"mb-3 p-2 bg-green-100 text-green-800 text-sm rounded",children:"Changes saved successfully"}),d&&p.jsx("div",{className:"mb-3 p-2 bg-red-100 text-red-800 text-sm rounded",children:d}),p.jsx("div",{className:"grid grid-cols-2 gap-4",children:["id","documentName","timestamp","keywords"].map(A=>t[A]&&p.jsxs("div",{className:"mb-2",children:[p.jsxs("span",{className:"block text-sm font-medium text-gray-500",children:[A,":"]}),s?O(A,t[A]):p.jsx("span",{className:"block text-sm text-gray-800 break-words",children:typeof t[A]=="object"?JSON.stringify(t[A]):String(t[A])})]},A))}),r&&p.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:p.jsx("div",{className:"grid grid-cols-2 gap-4",children:E.filter(A=>!["id","documentName","timestamp","keywords"].includes(A)).map(A=>p.jsxs("div",{className:"mb-2",children:[p.jsxs("span",{className:"block text-sm font-medium text-gray-500",children:[A,":"]}),s?O(A,t[A]):p.jsx("span",{className:"block text-sm text-gray-800 break-words",children:typeof t[A]=="object"?JSON.stringify(t[A]):String(t[A])})]},A))})})]})},qie=({currentKeyword:t,excludeIds:e=[],onAddToPlaylist:r})=>{const[i,s]=S.useState([]),[a,o]=S.useState(!0),[l,u]=S.useState(null);S.useEffect(()=>{t&&c(t)},[t,e.toString()]);const c=async f=>{try{o(!0);const m=Sp(f);if(m.length===0){s([]),o(!1);return}const v=await dn(cn(Ct,"interviewSummaries")),y=[];for(const w of v.docs){const E=w.id,N=w.data(),M=N.videoEmbedLink,O=d(M),A=cn(Ct,"interviewSummaries",E,"subSummaries");(await dn(A)).forEach(T=>{const I=T.data(),x=(I.keywords||"").split(",").map(P=>P.trim().toLowerCase());m.some(P=>x.includes(P))&&!e.includes(T.id)&&y.push({id:T.id,documentId:`${E}_${T.id}`,documentName:E,...I,...N,thumbnailUrl:O,_debug_parentVideoEmbedLink:M})})}const b=y.filter(w=>w.thumbnailUrl).length;console.log(`Found thumbnails for ${b} out of ${y.length} clips`);const _=Array.from(new Map(y.map(w=>[`${w.id}_${w.documentName}`,w])).values());s(_),o(!1)}catch(m){console.error("Error fetching related clips:",m),u("Error loading related clips"),o(!1)}},d=f=>{if(!f)return null;try{let m=Ql(f);if(!m){if(f.includes("youtube.com/watch"))m=new URL(f).searchParams.get("v");else if(f.includes("youtube.com/embed/")){const v=f.split("youtube.com/embed/");v.length>1&&(m=v[1].split("?")[0])}else if(f.includes("youtu.be/")){const v=f.split("youtu.be/");v.length>1&&(m=v[1].split("?")[0])}else if(f.includes("<iframe")&&f.includes("src=")){const v=f.match(/src=["'](.*?)["']/);if(v&&v[1])return d(v[1])}}if(m)return`https://img.youtube.com/vi/${m}/mqdefault.jpg`;console.log("Could not extract video ID from:",f)}catch(m){console.error("Error extracting video ID for thumbnail:",m,"from link:",f)}return null},h=f=>{r&&r(f)};return a?p.jsx("div",{className:"py-4",children:p.jsx("div",{className:"flex justify-center items-center",children:p.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})})}):l?p.jsx("div",{className:"p-4 bg-red-50 text-red-700 rounded-md",children:l}):i.length===0?null:p.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-sm p-6",children:[p.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Related Clips"}),p.jsx("div",{className:"overflow-x-auto pb-4",children:p.jsx("div",{className:"flex space-x-4",style:{minWidth:"min-content"},children:i.map((f,m)=>p.jsxs("div",{className:"flex-shrink-0 w-64 bg-gray-50 rounded-md overflow-hidden shadow-sm hover:shadow-md transition-shadow cursor-pointer",onClick:()=>h(f),children:[f.thumbnailUrl?p.jsxs("div",{className:"relative pb-[56.25%] bg-gray-200",children:[p.jsx("img",{src:f.thumbnailUrl,alt:f.name||"Video thumbnail",className:"absolute top-0 left-0 w-full h-full object-cover",onError:v=>{console.log("Thumbnail failed to load:",f.thumbnailUrl),v.target.onerror=null,v.target.style.display="none",v.target.parentElement.innerHTML=`
                        <div class="absolute top-0 left-0 w-full h-full flex items-center justify-center bg-gray-200">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                          </svg>
                        </div>
                      `}}),p.jsx("div",{className:"absolute inset-0 flex items-center justify-center hover:bg-black hover:bg-opacity-30 transition-all",children:p.jsx("span",{className:"text-white font-medium rounded-full p-2 bg-blue-600 opacity-0 hover:opacity-100 transition-opacity",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})})]}):p.jsxs("div",{className:"h-36 bg-gray-200 flex flex-col items-center justify-center",children:[p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),p.jsx("span",{className:"text-gray-500 text-sm",children:"Video Preview"})]}),p.jsxs("div",{className:"p-3",children:[p.jsx("h4",{className:"font-medium text-gray-900 line-clamp-1",title:f.name,children:f.name||"Unnamed clip"}),p.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-1",title:f.topic||"",children:f.topic||"No topic"}),f.timestamp&&p.jsx("p",{className:"text-xs text-gray-400 mt-1",children:f.timestamp}),p.jsx("button",{className:"mt-2 w-full py-1 px-2 bg-blue-50 text-blue-600 text-sm font-medium rounded hover:bg-blue-100 transition-colors",children:"Add to Playlist"})]})]},`${f.documentId||`${f.id}_${f.documentName}`}_${m}`))})})]})},Hie=({video:t,onVideoEnd:e,onPlay:r,onPause:i,onTimeUpdate:s,isPlaying:a,seekToTime:o})=>{const l=S.useRef(null),u=S.useRef(null),c=S.useRef(null),[d,h]=S.useState(!1),[f,m]=S.useState(null),v=S.useRef(null),y=()=>{if(!t)return{startSeconds:0,endSeconds:0};try{const{startSeconds:b,endSeconds:_}=yo(t.timestamp),w=Number.isFinite(b)?Math.max(0,b):0,E=Number.isFinite(_)&&_>w?_:w+300;return console.log(`Video boundaries: ${w}s to ${E}s (duration: ${E-w}s)`),{startSeconds:w,endSeconds:E}}catch(b){return console.error("Error parsing timestamp:",b,"Using defaults"),{startSeconds:0,endSeconds:300}}};return S.useEffect(()=>{if(!t||!u.current)return;const b=Ql(t.videoEmbedLink);if(!b){console.error("Invalid video embed link:",t.videoEmbedLink);return}const{startSeconds:_}=y(),w=()=>{l.current&&l.current.destroy();try{l.current=new window.YT.Player(u.current,{height:"405",width:"720",videoId:b,playerVars:{autoplay:1,controls:0,rel:0,modestbranding:1,start:_,enablejsapi:1},events:{onReady:E=>{console.log("YouTube Player Ready");const N=E.target.getDuration();if(console.log(`Video actual duration: ${N}s`),_>=N&&(console.error(`Invalid timestamp: start time (${_}s) is beyond video duration (${N}s)`),E.target.seekTo(0,!0),t&&t.id&&e)){console.warn(`Skipping invalid clip with ID: ${t.id}`),setTimeout(()=>{e()},500);return}s&&s(0),h(!0),E.target.seekTo(Math.min(_,N-1),!0),a?E.target.playVideo():E.target.pauseVideo()},onStateChange:E=>{const N=E.data;if(m(N),N===window.YT.PlayerState.PLAYING){if(s){const M=E.target.getCurrentTime();Math.max(0,M-_)<1&&s(0)}r&&r()}else N===window.YT.PlayerState.PAUSED?i&&i():N===window.YT.PlayerState.ENDED&&e&&e()},onError:E=>{console.error("YouTube player error:",E.data),e&&(console.warn("Video error detected, skipping to next clip"),setTimeout(()=>{e()},500))}}})}catch(E){console.error("Error creating YouTube player:",E)}};if(window.YT&&window.YT.Player)w();else{const E=document.createElement("script");E.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=w;const N=document.getElementsByTagName("script")[0];N.parentNode.insertBefore(E,N)}return()=>{l.current&&(l.current.destroy(),l.current=null),h(!1)}},[t]),S.useEffect(()=>{if(!(!d||!l.current))try{a?l.current.playVideo():l.current.pauseVideo()}catch(b){console.error("Error controlling player:",b)}},[a,d]),S.useEffect(()=>{if(!(!d||!l.current||o===void 0||o===null)&&v.current!==o)try{const{startSeconds:b}=y(),_=b+o;console.log(`Seeking to ${o}s within clip (absolute: ${_}s)`),l.current.seekTo(_,!0),v.current=o}catch(b){console.error("Error seeking:",b)}},[o,d]),S.useEffect(()=>{if(!d||!l.current)return;const{startSeconds:b,endSeconds:_}=y(),w=_-b;return(()=>{try{if(l.current&&l.current.getCurrentTime){const N=l.current.getCurrentTime(),M=Math.max(0,N-b);s&&M>=0&&s(M)}}catch(N){console.error("Error syncing time immediately:",N)}})(),c.current&&(clearInterval(c.current),c.current=null),a&&(c.current=setInterval(()=>{try{if(!l.current||!l.current.getCurrentTime)return;const N=l.current.getCurrentTime(),M=Math.max(0,N-b);if(l.current.getPlayerState()!==window.YT.PlayerState.PLAYING)return;s&&s(M),M>=w-.5&&(console.log(`Reached end of clip: ${M}s / ${w}s`),e&&(clearInterval(c.current),c.current=null,e()))}catch(N){console.error("Error in time tracking:",N)}},250)),()=>{c.current&&(clearInterval(c.current),c.current=null)}},[a,d,t]),p.jsxs("div",{className:"video-player-wrapper relative",children:[p.jsx("div",{ref:u,className:"rounded-lg shadow-lg bg-black w-full aspect-video"}),!d&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-50",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white"})})]})},Wie=()=>{const[t]=vg(),e=_r(),[r,i]=S.useState(""),[s,a]=S.useState([]),[o,l]=S.useState(0),[u,c]=S.useState(!0),[d,h]=S.useState(null),[f,m]=S.useState(0),[v,y]=S.useState(!0),[b,_]=S.useState(0),[w,E]=S.useState(0),[N,M]=S.useState(0),[O,A]=S.useState(null),[D,T]=S.useState(!1),[I,x]=S.useState(!1),[R,P]=S.useState(!1),[j,$]=S.useState([]),[U,Y]=S.useState({}),[q,F]=S.useState(""),[W,Q]=S.useState(""),[H,X]=S.useState(!1),J=S.useRef(null),ee=S.useRef(null);S.useEffect(()=>{if(s.length>0){const oe=s.reduce((pe,be)=>{const{startSeconds:Le,endSeconds:Ce}=yo(be.timestamp);return pe+(Ce-Le||300)},0);console.log("Calculated total duration:",oe),M(oe)}},[s]),S.useEffect(()=>{const oe=t.get("keywords");oe&&(console.log(`Found keyword: ${oe}`),i(oe))},[t]),S.useEffect(()=>{r&&(console.log(`Searching videos for: ${r}`),ye())},[r]),S.useEffect(()=>{r&&U[r]?m(U[r]):r&&se(r)},[r,U]);const se=async oe=>{if(oe)try{let pe=0;const be=await dn(cn(Ct,"interviewSummaries"));for(const Le of be.docs){const Ce=Le.id,We=cn(Ct,"interviewSummaries",Ce,"subSummaries");(await dn(We)).forEach(ft=>{(ft.data().keywords||"").split(",").map(xt=>xt.trim().toLowerCase()).includes(oe.toLowerCase())&&pe++})}console.log(`Total clips for keyword "${oe}": ${pe}`),m(pe),Y(Le=>({...Le,[oe]:pe}))}catch(pe){console.error("Error counting clips:",pe)}};S.useEffect(()=>()=>{J.current&&clearTimeout(J.current)},[]);const ce=oe=>{if(s.some(be=>be.id===oe.id)){console.log("Clip is already in the playlist:",oe.id),x({message:"This clip is already in your playlist",type:"info"}),J.current&&clearTimeout(J.current),J.current=setTimeout(()=>{x(!1)},3e3);return}a(be=>[...be,oe]),x({message:"Clip added to playlist",type:"success"}),J.current&&clearTimeout(J.current),J.current=setTimeout(()=>{x(!1)},3e3),console.log("Added clip to playlist:",oe.id)},Se=async()=>{if(!R)try{P(!0);const oe=Sp(r),pe=await Ie(oe),be=s.map(Ce=>Ce.id),Le=pe.filter(Ce=>!be.includes(Ce.id));Le.length===0?x({message:"All available clips are already in your playlist",type:"info"}):(a(Ce=>[...Ce,...Le]),x({message:`Added ${Le.length} clips to playlist`,type:"success"})),J.current&&clearTimeout(J.current),J.current=setTimeout(()=>{x(!1)},3e3)}catch(oe){console.error("Error adding all clips:",oe),x({message:"Error adding clips to playlist",type:"error"})}finally{P(!1)}};S.useEffect(()=>{ge()},[]),S.useEffect(()=>{j.length>0&&r&&ke()},[j,r,U]),S.useEffect(()=>(H&&q&&(ee.current&&clearTimeout(ee.current),ee.current=setTimeout(()=>{console.log(`Navigating to next playlist: ${q}`),e(`?keywords=${encodeURIComponent(q)}`),X(!1)},3e3)),()=>{ee.current&&clearTimeout(ee.current)}),[H,q,e]),S.useEffect(()=>{s.length>0&&(_(0),A(null),console.log("Video index changed to:",o))},[o]);const Ee=()=>{if(!s.length)return 0;let oe=0;for(let pe=0;pe<o;pe++){const{startSeconds:be,endSeconds:Le}=yo(s[pe].timestamp);oe+=Le-be||300}return oe},ie=oe=>{_(oe),E(Ee()+oe)},ue=oe=>{console.log(`Seeking to ${oe}s within current video`),A(oe)},ge=async()=>{try{const oe={},pe=await dn(cn(Ct,"interviewSummaries"));for(const Le of pe.docs){const Ce=Le.id,We=cn(Ct,"interviewSummaries",Ce,"subSummaries");(await dn(We)).forEach(ft=>{(ft.data().keywords||"").split(",").map(xt=>xt.trim().toLowerCase()).forEach(xt=>{xt&&(oe[xt]=(oe[xt]||0)+1)})})}const be=Object.keys(oe).filter(Le=>oe[Le]>1);console.log(`Found ${be.length} keywords with multiple clips out of ${Object.keys(oe).length} total keywords`),$(be),Y(oe)}catch(oe){console.error("Error fetching available keywords:",oe)}},ke=()=>{if(j.length===0)return;const oe=j.filter(Le=>Le!==r);if(oe.length===0)return;const pe=Math.floor(Math.random()*oe.length),be=oe[pe];console.log(`Selected next keyword: ${be} with ${U[be]||"?"} clips`),F(be),Re(be)},Re=async oe=>{try{const pe=Sp(oe);if(pe.length===0)return;const be=await Ie(pe);if(be.length>0){const Le=be[0];if(Le.videoEmbedLink){const Ce=Ql(Le.videoEmbedLink);if(Ce){const We=`https://img.youtube.com/vi/${Ce}/mqdefault.jpg`;Q(We);return}}}Q("")}catch(pe){console.error("Error fetching thumbnail:",pe),Q("")}},_e=()=>{q&&e(`?keywords=${encodeURIComponent(q)}`)},V=()=>{T(!0)},B=()=>{T(!1),ye()},G=()=>{T(!1)},K=oe=>{a(pe=>{const be=[...pe];return be[o]={...be[o],...oe},be})},re=oe=>oe.sort(()=>Math.random()-.5),le=async oe=>new Promise(pe=>{try{const be=document.createElement("div");be.style.position="absolute",be.style.left="-9999px",be.style.top="-9999px",document.body.appendChild(be);const Le=new window.YT.Player(be,{height:"1",width:"1",videoId:oe,events:{onReady:Ce=>{try{const We=Ce.target.getDuration();console.log(`Got duration for video ${oe}: ${We}s`),pe(We)}catch(We){console.error(`Error getting duration for ${oe}:`,We),pe(0)}finally{if(Le)try{Le.destroy()}catch(We){console.error("Error destroying temp player:",We)}be.parentNode&&document.body.removeChild(be)}},onError:()=>{console.error(`Could not load video ${oe} for duration check`),be.parentNode&&document.body.removeChild(be),pe(0)}}});setTimeout(()=>{if(Le)try{Le.destroy()}catch(Ce){console.error("Error destroying temp player on timeout:",Ce)}be.parentNode&&document.body.removeChild(be),pe(0)},1e4)}catch(be){console.error("Error in duration check:",be),pe(0)}}),he=async oe=>{try{const pe=Ql(oe.videoEmbedLink);if(!pe)return!1;const{startSeconds:be}=yo(oe.timestamp);if(isNaN(be)||be<0)return!1;if(!window.YT||!window.YT.Player)return console.warn("YouTube API not loaded yet, can't validate duration"),!0;const Le=await le(pe),Ce=Le>0&&be<Le-5;return Ce||console.warn(`Invalid timestamp detected: ${oe.timestamp} exceeds video duration ${Le}s for video ID ${pe}`),Ce}catch(pe){return console.error("Error validating video timestamp:",pe),!1}},ye=async()=>{try{c(!0);const oe=Sp(r);if(oe.length===0){h("Please enter at least one keyword"),c(!1);return}let pe=await Ie(oe);if(pe.length>0){pe=pe.filter(Ce=>{try{const{startSeconds:We,endSeconds:yt}=yo(Ce.timestamp);return isNaN(We)||We<0?(console.warn(`Filtering out video with invalid start time: ${Ce.id}, ${Ce.timestamp}`),!1):yt&&yt<=We?(console.warn(`Filtering out video with invalid time range: ${Ce.id}, ${Ce.timestamp}`),!1):!0}catch{return console.warn(`Filtering out video with unparseable timestamp: ${Ce.id}, ${Ce.timestamp}`),!1}});const be=re(pe).slice(0,Math.min(10,pe.length));console.log(`Checking durations for ${be.length} candidate videos...`),(!window.YT||!window.YT.Player)&&(console.log("Loading YouTube API..."),await new Promise(Ce=>{const We=document.createElement("script");We.src="https://www.youtube.com/iframe_api",window.onYouTubeIframeAPIReady=()=>{console.log("YouTube API ready"),Ce()};const yt=document.getElementsByTagName("script")[0];yt.parentNode.insertBefore(We,yt),setTimeout(Ce,5e3)}));const Le=[];for(const Ce of be){if(Le.length>=3)break;await he(Ce)&&Le.push(Ce)}Le.length>0?(console.log(`Selected ${Le.length} valid videos from ${be.length} candidates`),a(Le),l(0),y(!0),_(0),E(0),X(!1)):h("No videos with valid timestamps found for this keyword")}else h("No videos found for this keyword");c(!1)}catch(oe){console.error("Error searching videos:",oe),h("Error searching videos"),c(!1)}},Ie=async oe=>{const pe=await dn(cn(Ct,"interviewSummaries")),be=[];for(const Le of pe.docs){const Ce=Le.id,We=Le.data(),yt=We.videoEmbedLink,ft=yt?`https://img.youtube.com/vi/${Ql(yt)}/mqdefault.jpg`:null,vn=cn(Ct,"interviewSummaries",Ce,"subSummaries");(await dn(vn)).forEach(xt=>{const jn=xt.data(),St=(jn.keywords||"").split(",").map($r=>$r.trim().toLowerCase());oe.some($r=>St.includes($r))&&be.push({id:xt.id,documentName:Ce,...jn,...We,thumbnailUrl:ft})})}return be},Be=()=>{o<s.length-1&&(l(o+1),y(!0))},Oe=()=>{o>0&&(l(o-1),y(!0))},ze=()=>{console.log(`Video end triggered for index ${o}/${s.length-1}`),setTimeout(()=>{o<s.length-1?(console.log(`Advancing to next video: ${o+1}`),l(o+1)):(console.log("Playlist ended, preparing to play next keyword"),X(!0))},500)},lt=()=>{y(!0)},vt=()=>{y(!1)},At=()=>!s.length||o>=s.length?null:s[o];if(u)return p.jsx("div",{className:"flex justify-center items-center h-64",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(d)return p.jsx("div",{className:"max-w-7xl mx-auto p-4",children:p.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:p.jsx("p",{children:d})})});const Ke=At(),Ne=s.length>0;return p.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[I&&p.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-3 rounded-md shadow-md transition-all duration-300 ${I.type==="success"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:p.jsxs("div",{className:"flex items-center",children:[I.type==="success"?p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}):p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2h-1V9z",clipRule:"evenodd"})}),p.jsx("span",{children:I.message})]})}),p.jsxs("div",{className:"mb-6",children:[p.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:r}),p.jsx("div",{className:"flex items-center space-x-4",children:p.jsxs("div",{className:"flex items-center",children:[p.jsxs("span",{className:"text-blue-800 font-medium",children:[f," total clip",f!==1?"s":""," available"]}),p.jsx("span",{className:"mx-2 text-gray-400",children:"•"}),p.jsxs("span",{className:"text-gray-600",children:[s.length," clip",s.length!==1?"s":""," in current playlist"]})]})})]}),p.jsxs("div",{className:"relative",children:[q&&p.jsx("div",{className:"absolute top-0 right-0 z-10",children:p.jsx($ie,{nextKeyword:q,thumbnailUrl:W,onPlay:_e})}),p.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[p.jsx("div",{className:"w-full max-w-2xl mx-auto relative rounded-lg overflow-hidden",children:Ke?p.jsx(Hie,{video:Ke,onVideoEnd:ze,onPlay:lt,onPause:vt,onTimeUpdate:ie,isPlaying:v,seekToTime:O}):p.jsx("div",{className:"flex items-center justify-center w-full h-64 bg-gray-200 rounded-lg text-gray-600 font-medium",children:"No videos available"})}),Ne&&p.jsx("div",{className:"mt-6 mb-4 w-full max-w-2xl mx-auto",children:p.jsx(Fie,{videoQueue:s,currentVideoIndex:o,setCurrentVideoIndex:l,currentTime:b,totalDuration:N,onSeek:ue})}),p.jsxs("div",{className:"w-full max-w-2xl mx-auto py-3 mt-5",children:[p.jsx("div",{className:"flex justify-center items-center mb-4",children:p.jsx(qV,{onPrevious:Oe,onPlay:lt,onPause:vt,onNext:Be,isPlaying:v,hasPrevious:o>0,hasNext:o<s.length-1})}),p.jsxs("div",{className:"flex justify-center items-center space-x-4",children:[p.jsx(Uie,{onClick:V}),p.jsx("button",{onClick:Se,disabled:R,className:`flex items-center justify-center ${R?"bg-blue-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"} text-white px-4 py-2 rounded-md text-sm font-medium transition-colors w-44`,title:"Add all remaining clips with this keyword to your playlist",children:R?p.jsxs(p.Fragment,{children:[p.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[p.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding..."]}):"Listen to Full Playlist"})]})]})]}),Ke&&p.jsx(zie,{metadata:Ke,onMetadataUpdate:K}),Ke&&p.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[p.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:p.jsx("span",{onClick:()=>e(`/interview-player?documentName=${encodeURIComponent(Ke.documentName)}`),className:"hover:text-blue-600 hover:underline transition-colors cursor-pointer",children:Ke.name})}),p.jsx("p",{className:"text-sm italic text-gray-500 mb-4",children:Ke.role}),p.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 mb-4",children:p.jsx("p",{className:"m-0 text-base leading-relaxed text-gray-700",children:Ke.summary})}),Ke.keywords&&Ke.keywords.length>0&&p.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:(Array.isArray(Ke.keywords)?Ke.keywords:Ke.keywords.split(",").map(oe=>oe.trim())).map((oe,pe)=>p.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs flex items-center gap-1 cursor-pointer hover:bg-blue-200 transition-colors",onClick:()=>e(`/playlist-builder?keywords=${encodeURIComponent(oe)}`),children:[p.jsx(W8,{size:12})," ",oe]},pe))}),p.jsx("div",{className:"mt-4",children:p.jsx("button",{className:"text-sm text-blue-600 hover:underline hover:text-blue-800 transition-colors",onClick:()=>e(`/clip-player?documentName=${encodeURIComponent(Ke.documentName)}&clipId=${encodeURIComponent(Ke.id)}`),children:"▶ View this clip as a standalone page"})})]})]}),r&&s.length>0&&p.jsx(qie,{currentKeyword:r,excludeIds:s.map(oe=>oe.id),onAddToPlaylist:ce}),p.jsx(Bie,{isOpen:D,onConfirm:B,onCancel:G,message:"Are you sure you want to hear a new set of clips on this topic?"})]})};function XE(t,e){return XE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},XE(t,e)}function HV(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,XE(t,e)}function Ue(){return Ue=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Ue.apply(null,arguments)}function zd(t){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zd(t)}function Gie(t,e){if(zd(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(zd(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Kie(t){var e=Gie(t,"string");return zd(e)=="symbol"?e:e+""}function Yie(t,e,r){return(e=Kie(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function cR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function dR(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?cR(Object(r),!0).forEach(function(i){Yie(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):cR(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function lr(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var hR=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),fR=function(){return Math.random().toString(36).substring(7).split("").join(".")},pR={INIT:"@@redux/INIT"+fR(),REPLACE:"@@redux/REPLACE"+fR()};function Xie(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function WV(t,e,r){var i;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(lr(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(lr(1));return r(WV)(t,e)}if(typeof t!="function")throw new Error(lr(2));var s=t,a=e,o=[],l=o,u=!1;function c(){l===o&&(l=o.slice())}function d(){if(u)throw new Error(lr(3));return a}function h(y){if(typeof y!="function")throw new Error(lr(4));if(u)throw new Error(lr(5));var b=!0;return c(),l.push(y),function(){if(b){if(u)throw new Error(lr(6));b=!1,c();var w=l.indexOf(y);l.splice(w,1),o=null}}}function f(y){if(!Xie(y))throw new Error(lr(7));if(typeof y.type>"u")throw new Error(lr(8));if(u)throw new Error(lr(9));try{u=!0,a=s(a,y)}finally{u=!1}for(var b=o=l,_=0;_<b.length;_++){var w=b[_];w()}return y}function m(y){if(typeof y!="function")throw new Error(lr(10));s=y,f({type:pR.REPLACE})}function v(){var y,b=h;return y={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(lr(11));function E(){w.next&&w.next(d())}E();var N=b(E);return{unsubscribe:N}}},y[hR]=function(){return this},y}return f({type:pR.INIT}),i={dispatch:f,subscribe:h,getState:d,replaceReducer:m},i[hR]=v,i}function mR(t,e){return function(){return e(t.apply(this,arguments))}}function gR(t,e){if(typeof t=="function")return mR(t,e);if(typeof t!="object"||t===null)throw new Error(lr(16));var r={};for(var i in t){var s=t[i];typeof s=="function"&&(r[i]=mR(s,e))}return r}function GV(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(i){return i}:e.length===1?e[0]:e.reduce(function(i,s){return function(){return i(s.apply(void 0,arguments))}})}function Qie(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(i){return function(){var s=i.apply(void 0,arguments),a=function(){throw new Error(lr(15))},o={getState:s.getState,dispatch:function(){return a.apply(void 0,arguments)}},l=e.map(function(u){return u(o)});return a=GV.apply(void 0,l)(s.dispatch),dR(dR({},s),{},{dispatch:a})}}}var KV=te.createContext(null);function Jie(t){t()}var YV=Jie,Zie=function(e){return YV=e},ese=function(){return YV};function tse(){var t=ese(),e=null,r=null;return{clear:function(){e=null,r=null},notify:function(){t(function(){for(var s=e;s;)s.callback(),s=s.next})},get:function(){for(var s=[],a=e;a;)s.push(a),a=a.next;return s},subscribe:function(s){var a=!0,o=r={callback:s,next:null,prev:r};return o.prev?o.prev.next=o:e=o,function(){!a||e===null||(a=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var vR={notify:function(){},get:function(){return[]}};function XV(t,e){var r,i=vR;function s(h){return u(),i.subscribe(h)}function a(){i.notify()}function o(){d.onStateChange&&d.onStateChange()}function l(){return!!r}function u(){r||(r=e?e.addNestedSub(o):t.subscribe(o),i=tse())}function c(){r&&(r(),r=void 0,i.clear(),i=vR)}var d={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:o,isSubscribed:l,trySubscribe:u,tryUnsubscribe:c,getListeners:function(){return i}};return d}var QV=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?S.useLayoutEffect:S.useEffect;function nse(t){var e=t.store,r=t.context,i=t.children,s=S.useMemo(function(){var l=XV(e);return{store:e,subscription:l}},[e]),a=S.useMemo(function(){return e.getState()},[e]);QV(function(){var l=s.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[s,a]);var o=r||KV;return te.createElement(o.Provider,{value:s},i)}function Cm(t,e){if(t==null)return{};var r={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;r[i]=t[i]}return r}var JV={exports:{}},bt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kn=typeof Symbol=="function"&&Symbol.for,ET=kn?Symbol.for("react.element"):60103,ST=kn?Symbol.for("react.portal"):60106,Zg=kn?Symbol.for("react.fragment"):60107,ev=kn?Symbol.for("react.strict_mode"):60108,tv=kn?Symbol.for("react.profiler"):60114,nv=kn?Symbol.for("react.provider"):60109,rv=kn?Symbol.for("react.context"):60110,TT=kn?Symbol.for("react.async_mode"):60111,iv=kn?Symbol.for("react.concurrent_mode"):60111,sv=kn?Symbol.for("react.forward_ref"):60112,av=kn?Symbol.for("react.suspense"):60113,rse=kn?Symbol.for("react.suspense_list"):60120,ov=kn?Symbol.for("react.memo"):60115,lv=kn?Symbol.for("react.lazy"):60116,ise=kn?Symbol.for("react.block"):60121,sse=kn?Symbol.for("react.fundamental"):60117,ase=kn?Symbol.for("react.responder"):60118,ose=kn?Symbol.for("react.scope"):60119;function Fr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case ET:switch(t=t.type,t){case TT:case iv:case Zg:case tv:case ev:case av:return t;default:switch(t=t&&t.$$typeof,t){case rv:case sv:case lv:case ov:case nv:return t;default:return e}}case ST:return e}}}function ZV(t){return Fr(t)===iv}bt.AsyncMode=TT;bt.ConcurrentMode=iv;bt.ContextConsumer=rv;bt.ContextProvider=nv;bt.Element=ET;bt.ForwardRef=sv;bt.Fragment=Zg;bt.Lazy=lv;bt.Memo=ov;bt.Portal=ST;bt.Profiler=tv;bt.StrictMode=ev;bt.Suspense=av;bt.isAsyncMode=function(t){return ZV(t)||Fr(t)===TT};bt.isConcurrentMode=ZV;bt.isContextConsumer=function(t){return Fr(t)===rv};bt.isContextProvider=function(t){return Fr(t)===nv};bt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===ET};bt.isForwardRef=function(t){return Fr(t)===sv};bt.isFragment=function(t){return Fr(t)===Zg};bt.isLazy=function(t){return Fr(t)===lv};bt.isMemo=function(t){return Fr(t)===ov};bt.isPortal=function(t){return Fr(t)===ST};bt.isProfiler=function(t){return Fr(t)===tv};bt.isStrictMode=function(t){return Fr(t)===ev};bt.isSuspense=function(t){return Fr(t)===av};bt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Zg||t===iv||t===tv||t===ev||t===av||t===rse||typeof t=="object"&&t!==null&&(t.$$typeof===lv||t.$$typeof===ov||t.$$typeof===nv||t.$$typeof===rv||t.$$typeof===sv||t.$$typeof===sse||t.$$typeof===ase||t.$$typeof===ose||t.$$typeof===ise)};bt.typeOf=Fr;JV.exports=bt;var lse=JV.exports,IT=lse,use={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},cse={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},dse={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},eF={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},CT={};CT[IT.ForwardRef]=dse;CT[IT.Memo]=eF;function yR(t){return IT.isMemo(t)?eF:CT[t.$$typeof]||use}var hse=Object.defineProperty,fse=Object.getOwnPropertyNames,_R=Object.getOwnPropertySymbols,pse=Object.getOwnPropertyDescriptor,mse=Object.getPrototypeOf,wR=Object.prototype;function tF(t,e,r){if(typeof e!="string"){if(wR){var i=mse(e);i&&i!==wR&&tF(t,i,r)}var s=fse(e);_R&&(s=s.concat(_R(e)));for(var a=yR(t),o=yR(e),l=0;l<s.length;++l){var u=s[l];if(!cse[u]&&!(r&&r[u])&&!(o&&o[u])&&!(a&&a[u])){var c=pse(e,u);try{hse(t,u,c)}catch{}}}}return t}var gse=tF;const bR=za(gse);var nF={exports:{}},It={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uv=60103,cv=60106,Ch=60107,kh=60108,Nh=60114,Ah=60109,Rh=60110,Ph=60112,Dh=60113,kT=60120,Mh=60115,Lh=60116,rF=60121,iF=60122,sF=60117,aF=60129,oF=60131;if(typeof Symbol=="function"&&Symbol.for){var An=Symbol.for;uv=An("react.element"),cv=An("react.portal"),Ch=An("react.fragment"),kh=An("react.strict_mode"),Nh=An("react.profiler"),Ah=An("react.provider"),Rh=An("react.context"),Ph=An("react.forward_ref"),Dh=An("react.suspense"),kT=An("react.suspense_list"),Mh=An("react.memo"),Lh=An("react.lazy"),rF=An("react.block"),iF=An("react.server.block"),sF=An("react.fundamental"),aF=An("react.debug_trace_mode"),oF=An("react.legacy_hidden")}function xi(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case uv:switch(t=t.type,t){case Ch:case Nh:case kh:case Dh:case kT:return t;default:switch(t=t&&t.$$typeof,t){case Rh:case Ph:case Lh:case Mh:case Ah:return t;default:return e}}case cv:return e}}}var vse=Ah,yse=uv,_se=Ph,wse=Ch,bse=Lh,xse=Mh,Ese=cv,Sse=Nh,Tse=kh,Ise=Dh;It.ContextConsumer=Rh;It.ContextProvider=vse;It.Element=yse;It.ForwardRef=_se;It.Fragment=wse;It.Lazy=bse;It.Memo=xse;It.Portal=Ese;It.Profiler=Sse;It.StrictMode=Tse;It.Suspense=Ise;It.isAsyncMode=function(){return!1};It.isConcurrentMode=function(){return!1};It.isContextConsumer=function(t){return xi(t)===Rh};It.isContextProvider=function(t){return xi(t)===Ah};It.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===uv};It.isForwardRef=function(t){return xi(t)===Ph};It.isFragment=function(t){return xi(t)===Ch};It.isLazy=function(t){return xi(t)===Lh};It.isMemo=function(t){return xi(t)===Mh};It.isPortal=function(t){return xi(t)===cv};It.isProfiler=function(t){return xi(t)===Nh};It.isStrictMode=function(t){return xi(t)===kh};It.isSuspense=function(t){return xi(t)===Dh};It.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Ch||t===Nh||t===aF||t===kh||t===Dh||t===kT||t===oF||typeof t=="object"&&t!==null&&(t.$$typeof===Lh||t.$$typeof===Mh||t.$$typeof===Ah||t.$$typeof===Rh||t.$$typeof===Ph||t.$$typeof===sF||t.$$typeof===rF||t[0]===iF)};It.typeOf=xi;nF.exports=It;var Cse=nF.exports,kse=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Nse=["reactReduxForwardedRef"],Ase=[],Rse=[null,null];function Pse(t,e){var r=t[1];return[e.payload,r+1]}function xR(t,e,r){QV(function(){return t.apply(void 0,e)},r)}function Dse(t,e,r,i,s,a,o){t.current=i,e.current=s,r.current=!1,a.current&&(a.current=null,o())}function Mse(t,e,r,i,s,a,o,l,u,c){if(t){var d=!1,h=null,f=function(){if(!d){var y=e.getState(),b,_;try{b=i(y,s.current)}catch(w){_=w,h=w}_||(h=null),b===a.current?o.current||u():(a.current=b,l.current=b,o.current=!0,c({type:"STORE_UPDATED",payload:{error:_}}))}};r.onStateChange=f,r.trySubscribe(),f();var m=function(){if(d=!0,r.tryUnsubscribe(),r.onStateChange=null,h)throw h};return m}}var Lse=function(){return[null,0]};function Ose(t,e){e===void 0&&(e={});var r=e,i=r.getDisplayName,s=i===void 0?function(E){return"ConnectAdvanced("+E+")"}:i,a=r.methodName,o=a===void 0?"connectAdvanced":a,l=r.renderCountProp,u=l===void 0?void 0:l,c=r.shouldHandleStateChanges,d=c===void 0?!0:c,h=r.storeKey,f=h===void 0?"store":h;r.withRef;var m=r.forwardRef,v=m===void 0?!1:m,y=r.context,b=y===void 0?KV:y,_=Cm(r,kse),w=b;return function(N){var M=N.displayName||N.name||"Component",O=s(M),A=Ue({},_,{getDisplayName:s,methodName:o,renderCountProp:u,shouldHandleStateChanges:d,storeKey:f,displayName:O,wrappedComponentName:M,WrappedComponent:N}),D=_.pure;function T(j){return t(j.dispatch,A)}var I=D?S.useMemo:function(j){return j()};function x(j){var $=S.useMemo(function(){var K=j.reactReduxForwardedRef,re=Cm(j,Nse);return[j.context,K,re]},[j]),U=$[0],Y=$[1],q=$[2],F=S.useMemo(function(){return U&&U.Consumer&&Cse.isContextConsumer(te.createElement(U.Consumer,null))?U:w},[U,w]),W=S.useContext(F),Q=!!j.store&&!!j.store.getState&&!!j.store.dispatch;W&&W.store;var H=Q?j.store:W.store,X=S.useMemo(function(){return T(H)},[H]),J=S.useMemo(function(){if(!d)return Rse;var K=XV(H,Q?null:W.subscription),re=K.notifyNestedSubs.bind(K);return[K,re]},[H,Q,W]),ee=J[0],se=J[1],ce=S.useMemo(function(){return Q?W:Ue({},W,{subscription:ee})},[Q,W,ee]),Se=S.useReducer(Pse,Ase,Lse),Ee=Se[0],ie=Ee[0],ue=Se[1];if(ie&&ie.error)throw ie.error;var ge=S.useRef(),ke=S.useRef(q),Re=S.useRef(),_e=S.useRef(!1),V=I(function(){return Re.current&&q===ke.current?Re.current:X(H.getState(),q)},[H,ie,q]);xR(Dse,[ke,ge,_e,q,V,Re,se]),xR(Mse,[d,H,ee,X,ke,ge,_e,Re,se,ue],[H,ee,X]);var B=S.useMemo(function(){return te.createElement(N,Ue({},V,{ref:Y}))},[Y,N,V]),G=S.useMemo(function(){return d?te.createElement(F.Provider,{value:ce},B):B},[F,B,ce]);return G}var R=D?te.memo(x):x;if(R.WrappedComponent=N,R.displayName=x.displayName=O,v){var P=te.forwardRef(function($,U){return te.createElement(R,Ue({},$,{reactReduxForwardedRef:U}))});return P.displayName=O,P.WrappedComponent=N,bR(P,N)}return bR(R,N)}}function ER(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function o0(t,e){if(ER(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(e,r[s])||!ER(t[r[s]],e[r[s]]))return!1;return!0}function jse(t,e){var r={},i=function(o){var l=t[o];typeof l=="function"&&(r[o]=function(){return e(l.apply(void 0,arguments))})};for(var s in t)i(s);return r}function NT(t){return function(r,i){var s=t(r,i);function a(){return s}return a.dependsOnOwnProps=!1,a}}function SR(t){return t.dependsOnOwnProps!==null&&t.dependsOnOwnProps!==void 0?!!t.dependsOnOwnProps:t.length!==1}function lF(t,e){return function(i,s){s.displayName;var a=function(l,u){return a.dependsOnOwnProps?a.mapToProps(l,u):a.mapToProps(l)};return a.dependsOnOwnProps=!0,a.mapToProps=function(l,u){a.mapToProps=t,a.dependsOnOwnProps=SR(t);var c=a(l,u);return typeof c=="function"&&(a.mapToProps=c,a.dependsOnOwnProps=SR(c),c=a(l,u)),c},a}}function Vse(t){return typeof t=="function"?lF(t):void 0}function Fse(t){return t?void 0:NT(function(e){return{dispatch:e}})}function $se(t){return t&&typeof t=="object"?NT(function(e){return jse(t,e)}):void 0}const Use=[Vse,Fse,$se];function Bse(t){return typeof t=="function"?lF(t):void 0}function zse(t){return t?void 0:NT(function(){return{}})}const qse=[Bse,zse];function Hse(t,e,r){return Ue({},r,t,e)}function Wse(t){return function(r,i){i.displayName;var s=i.pure,a=i.areMergedPropsEqual,o=!1,l;return function(c,d,h){var f=t(c,d,h);return o?(!s||!a(f,l))&&(l=f):(o=!0,l=f),l}}}function Gse(t){return typeof t=="function"?Wse(t):void 0}function Kse(t){return t?void 0:function(){return Hse}}const Yse=[Gse,Kse];var Xse=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function Qse(t,e,r,i){return function(a,o){return r(t(a,o),e(i,o),o)}}function Jse(t,e,r,i,s){var a=s.areStatesEqual,o=s.areOwnPropsEqual,l=s.areStatePropsEqual,u=!1,c,d,h,f,m;function v(E,N){return c=E,d=N,h=t(c,d),f=e(i,d),m=r(h,f,d),u=!0,m}function y(){return h=t(c,d),e.dependsOnOwnProps&&(f=e(i,d)),m=r(h,f,d),m}function b(){return t.dependsOnOwnProps&&(h=t(c,d)),e.dependsOnOwnProps&&(f=e(i,d)),m=r(h,f,d),m}function _(){var E=t(c,d),N=!l(E,h);return h=E,N&&(m=r(h,f,d)),m}function w(E,N){var M=!o(N,d),O=!a(E,c,N,d);return c=E,d=N,M&&O?y():M?b():O?_():m}return function(N,M){return u?w(N,M):v(N,M)}}function Zse(t,e){var r=e.initMapStateToProps,i=e.initMapDispatchToProps,s=e.initMergeProps,a=Cm(e,Xse),o=r(t,a),l=i(t,a),u=s(t,a),c=a.pure?Jse:Qse;return c(o,l,u,t,a)}var eae=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function l0(t,e,r){for(var i=e.length-1;i>=0;i--){var s=e[i](t);if(s)return s}return function(a,o){throw new Error("Invalid value of type "+typeof t+" for "+r+" argument when connecting component "+o.wrappedComponentName+".")}}function tae(t,e){return t===e}function nae(t){var e=t===void 0?{}:t,r=e.connectHOC,i=r===void 0?Ose:r,s=e.mapStateToPropsFactories,a=s===void 0?qse:s,o=e.mapDispatchToPropsFactories,l=o===void 0?Use:o,u=e.mergePropsFactories,c=u===void 0?Yse:u,d=e.selectorFactory,h=d===void 0?Zse:d;return function(m,v,y,b){b===void 0&&(b={});var _=b,w=_.pure,E=w===void 0?!0:w,N=_.areStatesEqual,M=N===void 0?tae:N,O=_.areOwnPropsEqual,A=O===void 0?o0:O,D=_.areStatePropsEqual,T=D===void 0?o0:D,I=_.areMergedPropsEqual,x=I===void 0?o0:I,R=Cm(_,eae),P=l0(m,a,"mapStateToProps"),j=l0(v,l,"mapDispatchToProps"),$=l0(y,c,"mergeProps");return i(h,Ue({methodName:"connect",getDisplayName:function(Y){return"Connect("+Y+")"},shouldHandleStateChanges:!!m,initMapStateToProps:P,initMapDispatchToProps:j,initMergeProps:$,pure:E,areStatesEqual:M,areOwnPropsEqual:A,areStatePropsEqual:T,areMergedPropsEqual:x},R))}}const uF=nae();Zie(_S.unstable_batchedUpdates);function rae(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function cF(t,e){var r=S.useState(function(){return{inputs:e,result:t()}})[0],i=S.useRef(!0),s=S.useRef(r),a=i.current||!!(e&&s.current.inputs&&rae(e,s.current.inputs)),o=a?s.current:{inputs:e,result:t()};return S.useEffect(function(){i.current=!1,s.current=o},[o]),o.result}function iae(t,e){return cF(function(){return t},e)}var ct=cF,Fe=iae,sae="Invariant failed";function aae(t,e){throw new Error(sae)}var pi=function(e){var r=e.top,i=e.right,s=e.bottom,a=e.left,o=i-a,l=s-r,u={top:r,right:i,bottom:s,left:a,width:o,height:l,x:a,y:r,center:{x:(i+a)/2,y:(s+r)/2}};return u},AT=function(e,r){return{top:e.top-r.top,left:e.left-r.left,bottom:e.bottom+r.bottom,right:e.right+r.right}},TR=function(e,r){return{top:e.top+r.top,left:e.left+r.left,bottom:e.bottom-r.bottom,right:e.right-r.right}},oae=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},u0={top:0,right:0,bottom:0,left:0},RT=function(e){var r=e.borderBox,i=e.margin,s=i===void 0?u0:i,a=e.border,o=a===void 0?u0:a,l=e.padding,u=l===void 0?u0:l,c=pi(AT(r,s)),d=pi(TR(r,o)),h=pi(TR(d,u));return{marginBox:c,borderBox:pi(r),paddingBox:d,contentBox:h,margin:s,border:o,padding:u}},Ur=function(e){var r=e.slice(0,-2),i=e.slice(-2);if(i!=="px")return 0;var s=Number(r);return isNaN(s)&&aae(),s},lae=function(){return{x:window.pageXOffset,y:window.pageYOffset}},km=function(e,r){var i=e.borderBox,s=e.border,a=e.margin,o=e.padding,l=oae(i,r);return RT({borderBox:l,border:s,margin:a,padding:o})},Nm=function(e,r){return r===void 0&&(r=lae()),km(e,r)},dF=function(e,r){var i={top:Ur(r.marginTop),right:Ur(r.marginRight),bottom:Ur(r.marginBottom),left:Ur(r.marginLeft)},s={top:Ur(r.paddingTop),right:Ur(r.paddingRight),bottom:Ur(r.paddingBottom),left:Ur(r.paddingLeft)},a={top:Ur(r.borderTopWidth),right:Ur(r.borderRightWidth),bottom:Ur(r.borderBottomWidth),left:Ur(r.borderLeftWidth)};return RT({borderBox:e,margin:i,padding:s,border:a})},hF=function(e){var r=e.getBoundingClientRect(),i=window.getComputedStyle(e);return dF(r,i)},IR=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function uae(t,e){return!!(t===e||IR(t)&&IR(e))}function cae(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!uae(t[r],e[r]))return!1;return!0}function Sn(t,e){e===void 0&&(e=cae);var r,i=[],s,a=!1;function o(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return a&&r===this&&e(l,i)||(s=t.apply(this,l),a=!0,r=this,i=l),s}return o}var qd=function(e){var r=[],i=null,s=function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];r=l,!i&&(i=requestAnimationFrame(function(){i=null,e.apply(void 0,r)}))};return s.cancel=function(){i&&(cancelAnimationFrame(i),i=null)},s};function fF(t,e){}fF.bind(null,"warn");fF.bind(null,"error");function Ia(){}function dae(t,e){return Ue({},t,{},e)}function Kr(t,e,r){var i=e.map(function(s){var a=dae(r,s.options);return t.addEventListener(s.eventName,s.fn,a),function(){t.removeEventListener(s.eventName,s.fn,a)}});return function(){i.forEach(function(a){a()})}}var hae="Invariant failed";function Am(t){this.message=t}Am.prototype.toString=function(){return this.message};function we(t,e){throw new Am(hae)}var fae=function(t){HV(e,t);function e(){for(var i,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return i=t.call.apply(t,[this].concat(a))||this,i.callbacks=null,i.unbind=Ia,i.onWindowError=function(l){var u=i.getCallbacks();u.isDragging()&&u.tryAbort();var c=l.error;c instanceof Am&&l.preventDefault()},i.getCallbacks=function(){if(!i.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return i.callbacks},i.setCallbacks=function(l){i.callbacks=l},i}var r=e.prototype;return r.componentDidMount=function(){this.unbind=Kr(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(s){if(s instanceof Am){this.setState({});return}throw s},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},e}(te.Component),pae=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Rm=function(e){return e+1},mae=function(e){return`
  You have lifted an item in position `+Rm(e.source.index)+`
`},pF=function(e,r){var i=e.droppableId===r.droppableId,s=Rm(e.index),a=Rm(r.index);return i?`
      You have moved the item from position `+s+`
      to position `+a+`
    `:`
    You have moved the item from position `+s+`
    in list `+e.droppableId+`
    to list `+r.droppableId+`
    in position `+a+`
  `},mF=function(e,r,i){var s=r.droppableId===i.droppableId;return s?`
      The item `+e+`
      has been combined with `+i.draggableId:`
      The item `+e+`
      in list `+r.droppableId+`
      has been combined with `+i.draggableId+`
      in list `+i.droppableId+`
    `},gae=function(e){var r=e.destination;if(r)return pF(e.source,r);var i=e.combine;return i?mF(e.draggableId,e.source,i):"You are over an area that cannot be dropped on"},CR=function(e){return`
  The item has returned to its starting position
  of `+Rm(e.index)+`
`},vae=function(e){if(e.reason==="CANCEL")return`
      Movement cancelled.
      `+CR(e.source)+`
    `;var r=e.destination,i=e.combine;return r?`
      You have dropped the item.
      `+pF(e.source,r)+`
    `:i?`
      You have dropped the item.
      `+mF(e.draggableId,e.source,i)+`
    `:`
    The item has been dropped while not over a drop area.
    `+CR(e.source)+`
  `},Tp={dragHandleUsageInstructions:pae,onDragStart:mae,onDragUpdate:gae,onDragEnd:vae},In={x:0,y:0},Dn=function(e,r){return{x:e.x+r.x,y:e.y+r.y}},kr=function(e,r){return{x:e.x-r.x,y:e.y-r.y}},Ca=function(e,r){return e.x===r.x&&e.y===r.y},Wu=function(e){return{x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}},Fo=function(e,r,i){var s;return i===void 0&&(i=0),s={},s[e]=r,s[e==="x"?"y":"x"]=i,s},Hd=function(e,r){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))},kR=function(e,r){return Math.min.apply(Math,r.map(function(i){return Hd(e,i)}))},gF=function(e){return function(r){return{x:e(r.x),y:e(r.y)}}},yae=function(t,e){var r=pi({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return r.width<=0||r.height<=0?null:r},Oh=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},NR=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},_ae={top:0,right:0,bottom:0,left:0},wae=function(e,r){return r?Oh(e,r.scroll.diff.displacement):e},bae=function(e,r,i){if(i&&i.increasedBy){var s;return Ue({},e,(s={},s[r.end]=e[r.end]+i.increasedBy[r.line],s))}return e},xae=function(e,r){return r&&r.shouldClipSubject?yae(r.pageMarginBox,e):pi(e)},bu=function(t){var e=t.page,r=t.withPlaceholder,i=t.axis,s=t.frame,a=wae(e.marginBox,s),o=bae(a,i,r),l=xae(o,s);return{page:e,withPlaceholder:r,active:l}},PT=function(t,e){t.frame||we();var r=t.frame,i=kr(e,r.scroll.initial),s=Wu(i),a=Ue({},r,{scroll:{initial:r.scroll.initial,current:e,diff:{value:i,displacement:s},max:r.scroll.max}}),o=bu({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:a}),l=Ue({},t,{frame:a,subject:o});return l};function Pm(t){return Object.values?Object.values(t):Object.keys(t).map(function(e){return t[e]})}function DT(t,e){if(t.findIndex)return t.findIndex(e);for(var r=0;r<t.length;r++)if(e(t[r]))return r;return-1}function Xa(t,e){if(t.find)return t.find(e);var r=DT(t,e);if(r!==-1)return t[r]}function vF(t){return Array.prototype.slice.call(t)}var yF=Sn(function(t){return t.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),_F=Sn(function(t){return t.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),dv=Sn(function(t){return Pm(t)}),Eae=Sn(function(t){return Pm(t)}),Gu=Sn(function(t,e){var r=Eae(e).filter(function(i){return t===i.descriptor.droppableId}).sort(function(i,s){return i.descriptor.index-s.descriptor.index});return r});function MT(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function hv(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var fv=Sn(function(t,e){return e.filter(function(r){return r.descriptor.id!==t.descriptor.id})}),Sae=function(t){var e=t.isMovingForward,r=t.draggable,i=t.destination,s=t.insideDestination,a=t.previousImpact;if(!i.isCombineEnabled)return null;var o=MT(a);if(!o)return null;function l(y){var b={type:"COMBINE",combine:{draggableId:y,droppableId:i.descriptor.id}};return Ue({},a,{at:b})}var u=a.displaced.all,c=u.length?u[0]:null;if(e)return c?l(c):null;var d=fv(r,s);if(!c){if(!d.length)return null;var h=d[d.length-1];return l(h.descriptor.id)}var f=DT(d,function(y){return y.descriptor.id===c});f===-1&&we();var m=f-1;if(m<0)return null;var v=d[m];return l(v.descriptor.id)},Ku=function(t,e){return t.descriptor.droppableId===e.descriptor.id},wF={point:In,value:0},Wd={invisible:{},visible:{},all:[]},Tae={displaced:Wd,displacedBy:wF,at:null},Zr=function(t,e){return function(r){return t<=r&&r<=e}},bF=function(t){var e=Zr(t.top,t.bottom),r=Zr(t.left,t.right);return function(i){var s=e(i.top)&&e(i.bottom)&&r(i.left)&&r(i.right);if(s)return!0;var a=e(i.top)||e(i.bottom),o=r(i.left)||r(i.right),l=a&&o;if(l)return!0;var u=i.top<t.top&&i.bottom>t.bottom,c=i.left<t.left&&i.right>t.right,d=u&&c;if(d)return!0;var h=u&&o||c&&a;return h}},Iae=function(t){var e=Zr(t.top,t.bottom),r=Zr(t.left,t.right);return function(i){var s=e(i.top)&&e(i.bottom)&&r(i.left)&&r(i.right);return s}},LT={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},xF={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Cae=function(t){return function(e){var r=Zr(e.top,e.bottom),i=Zr(e.left,e.right);return function(s){return t===LT?r(s.top)&&r(s.bottom):i(s.left)&&i(s.right)}}},kae=function(e,r){var i=r.frame?r.frame.scroll.diff.displacement:In;return Oh(e,i)},Nae=function(e,r,i){return r.subject.active?i(r.subject.active)(e):!1},Aae=function(e,r,i){return i(r)(e)},OT=function(e){var r=e.target,i=e.destination,s=e.viewport,a=e.withDroppableDisplacement,o=e.isVisibleThroughFrameFn,l=a?kae(r,i):r;return Nae(l,i,o)&&Aae(l,s,o)},Rae=function(e){return OT(Ue({},e,{isVisibleThroughFrameFn:bF}))},EF=function(e){return OT(Ue({},e,{isVisibleThroughFrameFn:Iae}))},Pae=function(e){return OT(Ue({},e,{isVisibleThroughFrameFn:Cae(e.destination.axis)}))},Dae=function(e,r,i){if(typeof i=="boolean")return i;if(!r)return!0;var s=r.invisible,a=r.visible;if(s[e])return!1;var o=a[e];return o?o.shouldAnimate:!0};function Mae(t,e){var r=t.page.marginBox,i={top:e.point.y,right:0,bottom:0,left:e.point.x};return pi(AT(r,i))}function Gd(t){var e=t.afterDragging,r=t.destination,i=t.displacedBy,s=t.viewport,a=t.forceShouldAnimate,o=t.last;return e.reduce(function(u,c){var d=Mae(c,i),h=c.descriptor.id;u.all.push(h);var f=Rae({target:d,destination:r,viewport:s,withDroppableDisplacement:!0});if(!f)return u.invisible[c.descriptor.id]=!0,u;var m=Dae(h,o,a),v={draggableId:h,shouldAnimate:m};return u.visible[h]=v,u},{all:[],visible:{},invisible:{}})}function Lae(t,e){if(!t.length)return 0;var r=t[t.length-1].descriptor.index;return e.inHomeList?r:r+1}function AR(t){var e=t.insideDestination,r=t.inHomeList,i=t.displacedBy,s=t.destination,a=Lae(e,{inHomeList:r});return{displaced:Wd,displacedBy:i,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:a}}}}function Dm(t){var e=t.draggable,r=t.insideDestination,i=t.destination,s=t.viewport,a=t.displacedBy,o=t.last,l=t.index,u=t.forceShouldAnimate,c=Ku(e,i);if(l==null)return AR({insideDestination:r,inHomeList:c,displacedBy:a,destination:i});var d=Xa(r,function(y){return y.descriptor.index===l});if(!d)return AR({insideDestination:r,inHomeList:c,displacedBy:a,destination:i});var h=fv(e,r),f=r.indexOf(d),m=h.slice(f),v=Gd({afterDragging:m,destination:i,displacedBy:a,last:o,viewport:s.frame,forceShouldAnimate:u});return{displaced:v,displacedBy:a,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:l}}}}function Ua(t,e){return!!e.effected[t]}var Oae=function(t){var e=t.isMovingForward,r=t.destination,i=t.draggables,s=t.combine,a=t.afterCritical;if(!r.isCombineEnabled)return null;var o=s.draggableId,l=i[o],u=l.descriptor.index,c=Ua(o,a);return c?e?u:u-1:e?u+1:u},jae=function(t){var e=t.isMovingForward,r=t.isInHomeList,i=t.insideDestination,s=t.location;if(!i.length)return null;var a=s.index,o=e?a+1:a-1,l=i[0].descriptor.index,u=i[i.length-1].descriptor.index,c=r?u:u+1;return o<l||o>c?null:o},Vae=function(t){var e=t.isMovingForward,r=t.isInHomeList,i=t.draggable,s=t.draggables,a=t.destination,o=t.insideDestination,l=t.previousImpact,u=t.viewport,c=t.afterCritical,d=l.at;if(d||we(),d.type==="REORDER"){var h=jae({isMovingForward:e,isInHomeList:r,location:d.destination,insideDestination:o});return h==null?null:Dm({draggable:i,insideDestination:o,destination:a,viewport:u,last:l.displaced,displacedBy:l.displacedBy,index:h})}var f=Oae({isMovingForward:e,destination:a,displaced:l.displaced,draggables:s,combine:d.combine,afterCritical:c});return f==null?null:Dm({draggable:i,insideDestination:o,destination:a,viewport:u,last:l.displaced,displacedBy:l.displacedBy,index:f})},Fae=function(t){var e=t.displaced,r=t.afterCritical,i=t.combineWith,s=t.displacedBy,a=!!(e.visible[i]||e.invisible[i]);return Ua(i,r)?a?In:Wu(s.point):a?s.point:In},$ae=function(t){var e=t.afterCritical,r=t.impact,i=t.draggables,s=hv(r);s||we();var a=s.draggableId,o=i[a].page.borderBox.center,l=Fae({displaced:r.displaced,afterCritical:e,combineWith:a,displacedBy:r.displacedBy});return Dn(o,l)},SF=function(e,r){return r.margin[e.start]+r.borderBox[e.size]/2},Uae=function(e,r){return r.margin[e.end]+r.borderBox[e.size]/2},jT=function(e,r,i){return r[e.crossAxisStart]+i.margin[e.crossAxisStart]+i.borderBox[e.crossAxisSize]/2},RR=function(e){var r=e.axis,i=e.moveRelativeTo,s=e.isMoving;return Fo(r.line,i.marginBox[r.end]+SF(r,s),jT(r,i.marginBox,s))},PR=function(e){var r=e.axis,i=e.moveRelativeTo,s=e.isMoving;return Fo(r.line,i.marginBox[r.start]-Uae(r,s),jT(r,i.marginBox,s))},Bae=function(e){var r=e.axis,i=e.moveInto,s=e.isMoving;return Fo(r.line,i.contentBox[r.start]+SF(r,s),jT(r,i.contentBox,s))},zae=function(t){var e=t.impact,r=t.draggable,i=t.draggables,s=t.droppable,a=t.afterCritical,o=Gu(s.descriptor.id,i),l=r.page,u=s.axis;if(!o.length)return Bae({axis:u,moveInto:s.page,isMoving:l});var c=e.displaced,d=e.displacedBy,h=c.all[0];if(h){var f=i[h];if(Ua(h,a))return PR({axis:u,moveRelativeTo:f.page,isMoving:l});var m=km(f.page,d.point);return PR({axis:u,moveRelativeTo:m,isMoving:l})}var v=o[o.length-1];if(v.descriptor.id===r.descriptor.id)return l.borderBox.center;if(Ua(v.descriptor.id,a)){var y=km(v.page,Wu(a.displacedBy.point));return RR({axis:u,moveRelativeTo:y,isMoving:l})}return RR({axis:u,moveRelativeTo:v.page,isMoving:l})},QE=function(t,e){var r=t.frame;return r?Dn(e,r.scroll.diff.displacement):e},qae=function(e){var r=e.impact,i=e.draggable,s=e.droppable,a=e.draggables,o=e.afterCritical,l=i.page.borderBox.center,u=r.at;return!s||!u?l:u.type==="REORDER"?zae({impact:r,draggable:i,draggables:a,droppable:s,afterCritical:o}):$ae({impact:r,draggables:a,afterCritical:o})},pv=function(t){var e=qae(t),r=t.droppable,i=r?QE(r,e):e;return i},TF=function(t,e){var r=kr(e,t.scroll.initial),i=Wu(r),s=pi({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),a={frame:s,scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:r,displacement:i}}};return a};function DR(t,e){return t.map(function(r){return e[r]})}function Hae(t,e){for(var r=0;r<e.length;r++){var i=e[r].visible[t];if(i)return i}return null}var Wae=function(t){var e=t.impact,r=t.viewport,i=t.destination,s=t.draggables,a=t.maxScrollChange,o=TF(r,Dn(r.scroll.current,a)),l=i.frame?PT(i,Dn(i.frame.scroll.current,a)):i,u=e.displaced,c=Gd({afterDragging:DR(u.all,s),destination:i,displacedBy:e.displacedBy,viewport:o.frame,last:u,forceShouldAnimate:!1}),d=Gd({afterDragging:DR(u.all,s),destination:l,displacedBy:e.displacedBy,viewport:r.frame,last:u,forceShouldAnimate:!1}),h={},f={},m=[u,c,d];u.all.forEach(function(y){var b=Hae(y,m);if(b){f[y]=b;return}h[y]=!0});var v=Ue({},e,{displaced:{all:u.all,invisible:h,visible:f}});return v},Gae=function(t,e){return Dn(t.scroll.diff.displacement,e)},VT=function(t){var e=t.pageBorderBoxCenter,r=t.draggable,i=t.viewport,s=Gae(i,e),a=kr(s,r.page.borderBox.center);return Dn(r.client.borderBox.center,a)},IF=function(t){var e=t.draggable,r=t.destination,i=t.newPageBorderBoxCenter,s=t.viewport,a=t.withDroppableDisplacement,o=t.onlyOnMainAxis,l=o===void 0?!1:o,u=kr(i,e.page.borderBox.center),c=Oh(e.page.borderBox,u),d={target:c,destination:r,withDroppableDisplacement:a,viewport:s};return l?Pae(d):EF(d)},Kae=function(t){var e=t.isMovingForward,r=t.draggable,i=t.destination,s=t.draggables,a=t.previousImpact,o=t.viewport,l=t.previousPageBorderBoxCenter,u=t.previousClientSelection,c=t.afterCritical;if(!i.isEnabled)return null;var d=Gu(i.descriptor.id,s),h=Ku(r,i),f=Sae({isMovingForward:e,draggable:r,destination:i,insideDestination:d,previousImpact:a})||Vae({isMovingForward:e,isInHomeList:h,draggable:r,draggables:s,destination:i,insideDestination:d,previousImpact:a,viewport:o,afterCritical:c});if(!f)return null;var m=pv({impact:f,draggable:r,droppable:i,draggables:s,afterCritical:c}),v=IF({draggable:r,destination:i,newPageBorderBoxCenter:m,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(v){var y=VT({pageBorderBoxCenter:m,draggable:r,viewport:o});return{clientSelection:y,impact:f,scrollJumpRequest:null}}var b=kr(m,l),_=Wae({impact:f,viewport:o,destination:i,draggables:s,maxScrollChange:b});return{clientSelection:u,impact:_,scrollJumpRequest:b}},Jn=function(e){var r=e.subject.active;return r||we(),r},Yae=function(t){var e=t.isMovingForward,r=t.pageBorderBoxCenter,i=t.source,s=t.droppables,a=t.viewport,o=i.subject.active;if(!o)return null;var l=i.axis,u=Zr(o[l.start],o[l.end]),c=dv(s).filter(function(h){return h!==i}).filter(function(h){return h.isEnabled}).filter(function(h){return!!h.subject.active}).filter(function(h){return bF(a.frame)(Jn(h))}).filter(function(h){var f=Jn(h);return e?o[l.crossAxisEnd]<f[l.crossAxisEnd]:f[l.crossAxisStart]<o[l.crossAxisStart]}).filter(function(h){var f=Jn(h),m=Zr(f[l.start],f[l.end]);return u(f[l.start])||u(f[l.end])||m(o[l.start])||m(o[l.end])}).sort(function(h,f){var m=Jn(h)[l.crossAxisStart],v=Jn(f)[l.crossAxisStart];return e?m-v:v-m}).filter(function(h,f,m){return Jn(h)[l.crossAxisStart]===Jn(m[0])[l.crossAxisStart]});if(!c.length)return null;if(c.length===1)return c[0];var d=c.filter(function(h){var f=Zr(Jn(h)[l.start],Jn(h)[l.end]);return f(r[l.line])});return d.length===1?d[0]:d.length>1?d.sort(function(h,f){return Jn(h)[l.start]-Jn(f)[l.start]})[0]:c.sort(function(h,f){var m=kR(r,NR(Jn(h))),v=kR(r,NR(Jn(f)));return m!==v?m-v:Jn(h)[l.start]-Jn(f)[l.start]})[0]},MR=function(e,r){var i=e.page.borderBox.center;return Ua(e.descriptor.id,r)?kr(i,r.displacedBy.point):i},Xae=function(e,r){var i=e.page.borderBox;return Ua(e.descriptor.id,r)?Oh(i,Wu(r.displacedBy.point)):i},Qae=function(t){var e=t.pageBorderBoxCenter,r=t.viewport,i=t.destination,s=t.insideDestination,a=t.afterCritical,o=s.filter(function(l){return EF({target:Xae(l,a),destination:i,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(l,u){var c=Hd(e,QE(i,MR(l,a))),d=Hd(e,QE(i,MR(u,a)));return c<d?-1:d<c?1:l.descriptor.index-u.descriptor.index});return o[0]||null},jh=Sn(function(e,r){var i=r[e.line];return{value:i,point:Fo(e.line,i)}}),Jae=function(e,r,i){var s=e.axis;if(e.descriptor.mode==="virtual")return Fo(s.line,r[s.line]);var a=e.subject.page.contentBox[s.size],o=Gu(e.descriptor.id,i),l=o.reduce(function(d,h){return d+h.client.marginBox[s.size]},0),u=l+r[s.line],c=u-a;return c<=0?null:Fo(s.line,c)},CF=function(e,r){return Ue({},e,{scroll:Ue({},e.scroll,{max:r})})},kF=function(e,r,i){var s=e.frame;Ku(r,e)&&we(),e.subject.withPlaceholder&&we();var a=jh(e.axis,r.displaceBy).point,o=Jae(e,a,i),l={placeholderSize:a,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){var u=bu({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:e.frame});return Ue({},e,{subject:u})}var c=o?Dn(s.scroll.max,o):s.scroll.max,d=CF(s,c),h=bu({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:d});return Ue({},e,{subject:h,frame:d})},Zae=function(e){var r=e.subject.withPlaceholder;r||we();var i=e.frame;if(!i){var s=bu({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return Ue({},e,{subject:s})}var a=r.oldFrameMaxScroll;a||we();var o=CF(i,a),l=bu({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return Ue({},e,{subject:l,frame:o})},eoe=function(t){var e=t.previousPageBorderBoxCenter,r=t.moveRelativeTo,i=t.insideDestination,s=t.draggable,a=t.draggables,o=t.destination,l=t.viewport,u=t.afterCritical;if(!r){if(i.length)return null;var c={displaced:Wd,displacedBy:wF,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},d=pv({impact:c,draggable:s,droppable:o,draggables:a,afterCritical:u}),h=Ku(s,o)?o:kF(o,s,a),f=IF({draggable:s,destination:h,newPageBorderBoxCenter:d,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return f?c:null}var m=e[o.axis.line]<=r.page.borderBox.center[o.axis.line],v=function(){var b=r.descriptor.index;return r.descriptor.id===s.descriptor.id||m?b:b+1}(),y=jh(o.axis,s.displaceBy);return Dm({draggable:s,insideDestination:i,destination:o,viewport:l,displacedBy:y,last:Wd,index:v})},toe=function(t){var e=t.isMovingForward,r=t.previousPageBorderBoxCenter,i=t.draggable,s=t.isOver,a=t.draggables,o=t.droppables,l=t.viewport,u=t.afterCritical,c=Yae({isMovingForward:e,pageBorderBoxCenter:r,source:s,droppables:o,viewport:l});if(!c)return null;var d=Gu(c.descriptor.id,a),h=Qae({pageBorderBoxCenter:r,viewport:l,destination:c,insideDestination:d,afterCritical:u}),f=eoe({previousPageBorderBoxCenter:r,destination:c,draggable:i,draggables:a,moveRelativeTo:h,insideDestination:d,viewport:l,afterCritical:u});if(!f)return null;var m=pv({impact:f,draggable:i,droppable:c,draggables:a,afterCritical:u}),v=VT({pageBorderBoxCenter:m,draggable:i,viewport:l});return{clientSelection:v,impact:f,scrollJumpRequest:null}},Rr=function(t){var e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null},noe=function(e,r){var i=Rr(e);return i?r[i]:null},roe=function(t){var e=t.state,r=t.type,i=noe(e.impact,e.dimensions.droppables),s=!!i,a=e.dimensions.droppables[e.critical.droppable.id],o=i||a,l=o.axis.direction,u=l==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||l==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(u&&!s)return null;var c=r==="MOVE_DOWN"||r==="MOVE_RIGHT",d=e.dimensions.draggables[e.critical.draggable.id],h=e.current.page.borderBoxCenter,f=e.dimensions,m=f.draggables,v=f.droppables;return u?Kae({isMovingForward:c,previousPageBorderBoxCenter:h,draggable:d,destination:o,draggables:m,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):toe({isMovingForward:c,previousPageBorderBoxCenter:h,draggable:d,isOver:o,draggables:m,droppables:v,viewport:e.viewport,afterCritical:e.afterCritical})};function uo(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function NF(t){var e=Zr(t.top,t.bottom),r=Zr(t.left,t.right);return function(s){return e(s.y)&&r(s.x)}}function ioe(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function soe(t){var e=t.pageBorderBox,r=t.draggable,i=t.candidates,s=r.page.borderBox.center,a=i.map(function(o){var l=o.axis,u=Fo(o.axis.line,e.center[l.line],o.page.borderBox.center[l.crossAxisLine]);return{id:o.descriptor.id,distance:Hd(s,u)}}).sort(function(o,l){return l.distance-o.distance});return a[0]?a[0].id:null}function aoe(t){var e=t.pageBorderBox,r=t.draggable,i=t.droppables,s=dv(i).filter(function(a){if(!a.isEnabled)return!1;var o=a.subject.active;if(!o||!ioe(e,o))return!1;if(NF(o)(e.center))return!0;var l=a.axis,u=o.center[l.crossAxisLine],c=e[l.crossAxisStart],d=e[l.crossAxisEnd],h=Zr(o[l.crossAxisStart],o[l.crossAxisEnd]),f=h(c),m=h(d);return!f&&!m?!0:f?c<u:d>u});return s.length?s.length===1?s[0].descriptor.id:soe({pageBorderBox:e,draggable:r,candidates:s}):null}var AF=function(e,r){return pi(Oh(e,r))},ooe=function(t,e){var r=t.frame;return r?AF(e,r.scroll.diff.value):e};function RF(t){var e=t.displaced,r=t.id;return!!(e.visible[r]||e.invisible[r])}function loe(t){var e=t.draggable,r=t.closest,i=t.inHomeList;return r?i&&r.descriptor.index>e.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var uoe=function(t){var e=t.pageBorderBoxWithDroppableScroll,r=t.draggable,i=t.destination,s=t.insideDestination,a=t.last,o=t.viewport,l=t.afterCritical,u=i.axis,c=jh(i.axis,r.displaceBy),d=c.value,h=e[u.start],f=e[u.end],m=fv(r,s),v=Xa(m,function(b){var _=b.descriptor.id,w=b.page.borderBox.center[u.line],E=Ua(_,l),N=RF({displaced:a,id:_});return E?N?f<=w:h<w-d:N?f<=w+d:h<w}),y=loe({draggable:r,closest:v,inHomeList:Ku(r,i)});return Dm({draggable:r,insideDestination:s,destination:i,viewport:o,last:a,displacedBy:c,index:y})},coe=4,doe=function(t){var e=t.draggable,r=t.pageBorderBoxWithDroppableScroll,i=t.previousImpact,s=t.destination,a=t.insideDestination,o=t.afterCritical;if(!s.isCombineEnabled)return null;var l=s.axis,u=jh(s.axis,e.displaceBy),c=u.value,d=r[l.start],h=r[l.end],f=fv(e,a),m=Xa(f,function(y){var b=y.descriptor.id,_=y.page.borderBox,w=_[l.size],E=w/coe,N=Ua(b,o),M=RF({displaced:i.displaced,id:b});return N?M?h>_[l.start]+E&&h<_[l.end]-E:d>_[l.start]-c+E&&d<_[l.end]-c-E:M?h>_[l.start]+c+E&&h<_[l.end]+c-E:d>_[l.start]+E&&d<_[l.end]-E});if(!m)return null;var v={displacedBy:u,displaced:i.displaced,at:{type:"COMBINE",combine:{draggableId:m.descriptor.id,droppableId:s.descriptor.id}}};return v},PF=function(t){var e=t.pageOffset,r=t.draggable,i=t.draggables,s=t.droppables,a=t.previousImpact,o=t.viewport,l=t.afterCritical,u=AF(r.page.borderBox,e),c=aoe({pageBorderBox:u,draggable:r,droppables:s});if(!c)return Tae;var d=s[c],h=Gu(d.descriptor.id,i),f=ooe(d,u);return doe({pageBorderBoxWithDroppableScroll:f,draggable:r,previousImpact:a,destination:d,insideDestination:h,afterCritical:l})||uoe({pageBorderBoxWithDroppableScroll:f,draggable:r,destination:d,insideDestination:h,last:a.displaced,viewport:o,afterCritical:l})},FT=function(t,e){var r;return Ue({},t,(r={},r[e.descriptor.id]=e,r))},hoe=function(e){var r=e.previousImpact,i=e.impact,s=e.droppables,a=Rr(r),o=Rr(i);if(!a||a===o)return s;var l=s[a];if(!l.subject.withPlaceholder)return s;var u=Zae(l);return FT(s,u)},foe=function(t){var e=t.draggable,r=t.draggables,i=t.droppables,s=t.previousImpact,a=t.impact,o=hoe({previousImpact:s,impact:a,droppables:i}),l=Rr(a);if(!l)return o;var u=i[l];if(Ku(e,u)||u.subject.withPlaceholder)return o;var c=kF(u,e,r);return FT(o,c)},hd=function(t){var e=t.state,r=t.clientSelection,i=t.dimensions,s=t.viewport,a=t.impact,o=t.scrollJumpRequest,l=s||e.viewport,u=i||e.dimensions,c=r||e.current.client.selection,d=kr(c,e.initial.client.selection),h={offset:d,selection:c,borderBoxCenter:Dn(e.initial.client.borderBoxCenter,d)},f={selection:Dn(h.selection,l.scroll.current),borderBoxCenter:Dn(h.borderBoxCenter,l.scroll.current),offset:Dn(h.offset,l.scroll.diff.value)},m={client:h,page:f};if(e.phase==="COLLECTING")return Ue({phase:"COLLECTING"},e,{dimensions:u,viewport:l,current:m});var v=u.draggables[e.critical.draggable.id],y=a||PF({pageOffset:f.offset,draggable:v,draggables:u.draggables,droppables:u.droppables,previousImpact:e.impact,viewport:l,afterCritical:e.afterCritical}),b=foe({draggable:v,impact:y,previousImpact:e.impact,draggables:u.draggables,droppables:u.droppables}),_=Ue({},e,{current:m,dimensions:{draggables:u.draggables,droppables:b},impact:y,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return _};function poe(t,e){return t.map(function(r){return e[r]})}var DF=function(t){var e=t.impact,r=t.viewport,i=t.draggables,s=t.destination,a=t.forceShouldAnimate,o=e.displaced,l=poe(o.all,i),u=Gd({afterDragging:l,destination:s,displacedBy:e.displacedBy,viewport:r.frame,forceShouldAnimate:a,last:o});return Ue({},e,{displaced:u})},MF=function(t){var e=t.impact,r=t.draggable,i=t.droppable,s=t.draggables,a=t.viewport,o=t.afterCritical,l=pv({impact:e,draggable:r,draggables:s,droppable:i,afterCritical:o});return VT({pageBorderBoxCenter:l,draggable:r,viewport:a})},LF=function(t){var e=t.state,r=t.dimensions,i=t.viewport;e.movementMode!=="SNAP"&&we();var s=e.impact,a=i||e.viewport,o=r||e.dimensions,l=o.draggables,u=o.droppables,c=l[e.critical.draggable.id],d=Rr(s);d||we();var h=u[d],f=DF({impact:s,viewport:a,destination:h,draggables:l}),m=MF({impact:f,draggable:c,droppable:h,draggables:l,viewport:a,afterCritical:e.afterCritical});return hd({impact:f,clientSelection:m,state:e,dimensions:o,viewport:a})},moe=function(t){return{index:t.index,droppableId:t.droppableId}},OF=function(t){var e=t.draggable,r=t.home,i=t.draggables,s=t.viewport,a=jh(r.axis,e.displaceBy),o=Gu(r.descriptor.id,i),l=o.indexOf(e);l===-1&&we();var u=o.slice(l+1),c=u.reduce(function(m,v){return m[v.descriptor.id]=!0,m},{}),d={inVirtualList:r.descriptor.mode==="virtual",displacedBy:a,effected:c},h=Gd({afterDragging:u,destination:r,displacedBy:a,last:null,viewport:s.frame,forceShouldAnimate:!1}),f={displaced:h,displacedBy:a,at:{type:"REORDER",destination:moe(e.descriptor)}};return{impact:f,afterCritical:d}},goe=function(t,e){return{draggables:t.draggables,droppables:FT(t.droppables,e)}},voe=function(t){var e=t.draggable,r=t.offset,i=t.initialWindowScroll,s=km(e.client,r),a=Nm(s,i),o=Ue({},e,{placeholder:Ue({},e.placeholder,{client:s}),client:s,page:a});return o},yoe=function(t){var e=t.frame;return e||we(),e},_oe=function(t){var e=t.additions,r=t.updatedDroppables,i=t.viewport,s=i.scroll.diff.value;return e.map(function(a){var o=a.descriptor.droppableId,l=r[o],u=yoe(l),c=u.scroll.diff.value,d=Dn(s,c),h=voe({draggable:a,offset:d,initialWindowScroll:i.scroll.initial});return h})},woe=function(t){var e=t.state,r=t.published,i=r.modified.map(function(E){var N=e.dimensions.droppables[E.droppableId],M=PT(N,E.scroll);return M}),s=Ue({},e.dimensions.droppables,{},yF(i)),a=_F(_oe({additions:r.additions,updatedDroppables:s,viewport:e.viewport})),o=Ue({},e.dimensions.draggables,{},a);r.removals.forEach(function(E){delete o[E]});var l={droppables:s,draggables:o},u=Rr(e.impact),c=u?l.droppables[u]:null,d=l.draggables[e.critical.draggable.id],h=l.droppables[e.critical.droppable.id],f=OF({draggable:d,home:h,draggables:o,viewport:e.viewport}),m=f.impact,v=f.afterCritical,y=c&&c.isCombineEnabled?e.impact:m,b=PF({pageOffset:e.current.page.offset,draggable:l.draggables[e.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:y,viewport:e.viewport,afterCritical:v}),_=Ue({phase:"DRAGGING"},e,{phase:"DRAGGING",impact:b,onLiftImpact:m,dimensions:l,afterCritical:v,forceShouldAnimate:!1});if(e.phase==="COLLECTING")return _;var w=Ue({phase:"DROP_PENDING"},_,{phase:"DROP_PENDING",reason:e.reason,isWaiting:!1});return w},JE=function(e){return e.movementMode==="SNAP"},c0=function(e,r,i){var s=goe(e.dimensions,r);return!JE(e)||i?hd({state:e,dimensions:s}):LF({state:e,dimensions:s})};function d0(t){return t.isDragging&&t.movementMode==="SNAP"?Ue({phase:"DRAGGING"},t,{scrollJumpRequest:null}):t}var LR={phase:"IDLE",completed:null,shouldFlush:!1},boe=function(t,e){if(t===void 0&&(t=LR),e.type==="FLUSH")return Ue({},LR,{shouldFlush:!0});if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&we();var r=e.payload,i=r.critical,s=r.clientSelection,a=r.viewport,o=r.dimensions,l=r.movementMode,u=o.draggables[i.draggable.id],c=o.droppables[i.droppable.id],d={selection:s,borderBoxCenter:u.client.borderBox.center,offset:In},h={client:d,page:{selection:Dn(d.selection,a.scroll.initial),borderBoxCenter:Dn(d.selection,a.scroll.initial),offset:Dn(d.selection,a.scroll.diff.value)}},f=dv(o.droppables).every(function(ue){return!ue.isFixedOnPage}),m=OF({draggable:u,home:c,draggables:o.draggables,viewport:a}),v=m.impact,y=m.afterCritical,b={phase:"DRAGGING",isDragging:!0,critical:i,movementMode:l,dimensions:o,initial:h,current:h,isWindowScrollAllowed:f,impact:v,afterCritical:y,onLiftImpact:v,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null};return b}if(e.type==="COLLECTION_STARTING"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&we();var _=Ue({phase:"COLLECTING"},t,{phase:"COLLECTING"});return _}if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||we(),woe({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;uo(t)||we();var w=e.payload.client;return Ca(w,t.current.client.selection)?t:hd({state:t,clientSelection:w,impact:JE(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return d0(t);uo(t)||we();var E=e.payload,N=E.id,M=E.newScroll,O=t.dimensions.droppables[N];if(!O)return t;var A=PT(O,M);return c0(t,A,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;uo(t)||we();var D=e.payload,T=D.id,I=D.isEnabled,x=t.dimensions.droppables[T];x||we(),x.isEnabled===I&&we();var R=Ue({},x,{isEnabled:I});return c0(t,R,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;uo(t)||we();var P=e.payload,j=P.id,$=P.isCombineEnabled,U=t.dimensions.droppables[j];U||we(),U.isCombineEnabled===$&&we();var Y=Ue({},U,{isCombineEnabled:$});return c0(t,Y,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;uo(t)||we(),t.isWindowScrollAllowed||we();var q=e.payload.newScroll;if(Ca(t.viewport.scroll.current,q))return d0(t);var F=TF(t.viewport,q);return JE(t)?LF({state:t,viewport:F}):hd({state:t,viewport:F})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!uo(t))return t;var W=e.payload.maxScroll;if(Ca(W,t.viewport.scroll.max))return t;var Q=Ue({},t.viewport,{scroll:Ue({},t.viewport.scroll,{max:W})});return Ue({phase:"DRAGGING"},t,{viewport:Q})}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&we();var H=roe({state:t,type:e.type});return H?hd({state:t,impact:H.impact,clientSelection:H.clientSelection,scrollJumpRequest:H.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){var X=e.payload.reason;t.phase!=="COLLECTING"&&we();var J=Ue({phase:"DROP_PENDING"},t,{phase:"DROP_PENDING",isWaiting:!0,reason:X});return J}if(e.type==="DROP_ANIMATE"){var ee=e.payload,se=ee.completed,ce=ee.dropDuration,Se=ee.newHomeClientOffset;t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||we();var Ee={phase:"DROP_ANIMATING",completed:se,dropDuration:ce,newHomeClientOffset:Se,dimensions:t.dimensions};return Ee}if(e.type==="DROP_COMPLETE"){var ie=e.payload.completed;return{phase:"IDLE",completed:ie,shouldFlush:!1}}return t},xoe=function(e){return{type:"BEFORE_INITIAL_CAPTURE",payload:e}},Eoe=function(e){return{type:"LIFT",payload:e}},Soe=function(e){return{type:"INITIAL_PUBLISH",payload:e}},Toe=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},Ioe=function(){return{type:"COLLECTION_STARTING",payload:null}},Coe=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},koe=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},Noe=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},jF=function(e){return{type:"MOVE",payload:e}},Aoe=function(e){return{type:"MOVE_BY_WINDOW_SCROLL",payload:e}},Roe=function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}},Poe=function(){return{type:"MOVE_UP",payload:null}},Doe=function(){return{type:"MOVE_DOWN",payload:null}},Moe=function(){return{type:"MOVE_RIGHT",payload:null}},Loe=function(){return{type:"MOVE_LEFT",payload:null}},$T=function(){return{type:"FLUSH",payload:null}},Ooe=function(e){return{type:"DROP_ANIMATE",payload:e}},UT=function(e){return{type:"DROP_COMPLETE",payload:e}},VF=function(e){return{type:"DROP",payload:e}},joe=function(e){return{type:"DROP_PENDING",payload:e}},FF=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},Voe=function(t){return function(e){var r=e.getState,i=e.dispatch;return function(s){return function(a){if(a.type!=="LIFT"){s(a);return}var o=a.payload,l=o.id,u=o.clientSelection,c=o.movementMode,d=r();d.phase==="DROP_ANIMATING"&&i(UT({completed:d.completed})),r().phase!=="IDLE"&&we(),i($T()),i(xoe({draggableId:l,movementMode:c}));var h={shouldPublishImmediately:c==="SNAP"},f={draggableId:l,scrollOptions:h},m=t.startPublishing(f),v=m.critical,y=m.dimensions,b=m.viewport;i(Soe({critical:v,dimensions:y,clientSelection:u,movementMode:c,viewport:b}))}}}},Foe=function(t){return function(){return function(e){return function(r){r.type==="INITIAL_PUBLISH"&&t.dragging(),r.type==="DROP_ANIMATE"&&t.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&t.resting(),e(r)}}}},BT={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Kd={opacity:{drop:0,combining:.7},scale:{drop:.75}},zT={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},io=zT.outOfTheWay+"s "+BT.outOfTheWay,fd={fluid:"opacity "+io,snap:"transform "+io+", opacity "+io,drop:function(e){var r=e+"s "+BT.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+io,placeholder:"height "+io+", width "+io+", margin "+io},OR=function(e){return Ca(e,In)?null:"translate("+e.x+"px, "+e.y+"px)"},ZE={moveTo:OR,drop:function(e,r){var i=OR(e);return i?r?i+" scale("+Kd.scale.drop+")":i:null}},e2=zT.minDropTime,$F=zT.maxDropTime,$oe=$F-e2,jR=1500,Uoe=.6,Boe=function(t){var e=t.current,r=t.destination,i=t.reason,s=Hd(e,r);if(s<=0)return e2;if(s>=jR)return $F;var a=s/jR,o=e2+$oe*a,l=i==="CANCEL"?o*Uoe:o;return Number(l.toFixed(2))},zoe=function(t){var e=t.impact,r=t.draggable,i=t.dimensions,s=t.viewport,a=t.afterCritical,o=i.draggables,l=i.droppables,u=Rr(e),c=u?l[u]:null,d=l[r.descriptor.droppableId],h=MF({impact:e,draggable:r,draggables:o,afterCritical:a,droppable:c||d,viewport:s}),f=kr(h,r.client.borderBox.center);return f},qoe=function(t){var e=t.draggables,r=t.reason,i=t.lastImpact,s=t.home,a=t.viewport,o=t.onLiftImpact;if(!i.at||r!=="DROP"){var l=DF({draggables:e,impact:o,destination:s,viewport:a,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(i.at.type==="REORDER")return{impact:i,didDropInsideDroppable:!0};var u=Ue({},i,{displaced:Wd});return{impact:u,didDropInsideDroppable:!0}},Hoe=function(t){var e=t.getState,r=t.dispatch;return function(i){return function(s){if(s.type!=="DROP"){i(s);return}var a=e(),o=s.payload.reason;if(a.phase==="COLLECTING"){r(joe({reason:o}));return}if(a.phase!=="IDLE"){var l=a.phase==="DROP_PENDING"&&a.isWaiting;l&&we(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||we();var u=a.critical,c=a.dimensions,d=c.draggables[a.critical.draggable.id],h=qoe({reason:o,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),f=h.impact,m=h.didDropInsideDroppable,v=m?MT(f):null,y=m?hv(f):null,b={index:u.draggable.index,droppableId:u.droppable.id},_={draggableId:d.descriptor.id,type:d.descriptor.type,source:b,reason:o,mode:a.movementMode,destination:v,combine:y},w=zoe({impact:f,draggable:d,dimensions:c,viewport:a.viewport,afterCritical:a.afterCritical}),E={critical:a.critical,afterCritical:a.afterCritical,result:_,impact:f},N=!Ca(a.current.client.offset,w)||!!_.combine;if(!N){r(UT({completed:E}));return}var M=Boe({current:a.current.client.offset,destination:w,reason:o}),O={newHomeClientOffset:w,dropDuration:M,completed:E};r(Ooe(O))}}}},UF=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function Woe(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||t()}}}function Goe(t){var e=t.onWindowScroll;function r(){e(UF())}var i=qd(r),s=Woe(i),a=Ia;function o(){return a!==Ia}function l(){o()&&we(),a=Kr(window,[s])}function u(){o()||we(),i.cancel(),a(),a=Ia}return{start:l,stop:u,isActive:o}}var Koe=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},Yoe=function(t){var e=Goe({onWindowScroll:function(i){t.dispatch(Aoe({newScroll:i}))}});return function(r){return function(i){!e.isActive()&&i.type==="INITIAL_PUBLISH"&&e.start(),e.isActive()&&Koe(i)&&e.stop(),r(i)}}},Xoe=function(t){var e=!1,r=!1,i=setTimeout(function(){r=!0}),s=function(o){e||r||(e=!0,t(o),clearTimeout(i))};return s.wasCalled=function(){return e},s},Qoe=function(){var t=[],e=function(a){var o=DT(t,function(c){return c.timerId===a});o===-1&&we();var l=t.splice(o,1),u=l[0];u.callback()},r=function(a){var o=setTimeout(function(){return e(o)}),l={timerId:o,callback:a};t.push(l)},i=function(){if(t.length){var a=[].concat(t);t.length=0,a.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:r,flush:i}},Joe=function(e,r){return e==null&&r==null?!0:e==null||r==null?!1:e.droppableId===r.droppableId&&e.index===r.index},Zoe=function(e,r){return e==null&&r==null?!0:e==null||r==null?!1:e.draggableId===r.draggableId&&e.droppableId===r.droppableId},ele=function(e,r){if(e===r)return!0;var i=e.draggable.id===r.draggable.id&&e.draggable.droppableId===r.draggable.droppableId&&e.draggable.type===r.draggable.type&&e.draggable.index===r.draggable.index,s=e.droppable.id===r.droppable.id&&e.droppable.type===r.droppable.type;return i&&s},bc=function(e,r){r()},jf=function(e,r){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:r}},h0=function(e,r,i,s){if(!e){i(s(r));return}var a=Xoe(i),o={announce:a};e(r,o),a.wasCalled()||i(s(r))},tle=function(t,e){var r=Qoe(),i=null,s=function(f,m){i&&we(),bc("onBeforeCapture",function(){var v=t().onBeforeCapture;if(v){var y={draggableId:f,mode:m};v(y)}})},a=function(f,m){i&&we(),bc("onBeforeDragStart",function(){var v=t().onBeforeDragStart;v&&v(jf(f,m))})},o=function(f,m){i&&we();var v=jf(f,m);i={mode:m,lastCritical:f,lastLocation:v.source,lastCombine:null},r.add(function(){bc("onDragStart",function(){return h0(t().onDragStart,v,e,Tp.onDragStart)})})},l=function(f,m){var v=MT(m),y=hv(m);i||we();var b=!ele(f,i.lastCritical);b&&(i.lastCritical=f);var _=!Joe(i.lastLocation,v);_&&(i.lastLocation=v);var w=!Zoe(i.lastCombine,y);if(w&&(i.lastCombine=y),!(!b&&!_&&!w)){var E=Ue({},jf(f,i.mode),{combine:y,destination:v});r.add(function(){bc("onDragUpdate",function(){return h0(t().onDragUpdate,E,e,Tp.onDragUpdate)})})}},u=function(){i||we(),r.flush()},c=function(f){i||we(),i=null,bc("onDragEnd",function(){return h0(t().onDragEnd,f,e,Tp.onDragEnd)})},d=function(){if(i){var f=Ue({},jf(i.lastCritical,i.mode),{combine:null,destination:null,reason:"CANCEL"});c(f)}};return{beforeCapture:s,beforeStart:a,start:o,update:l,flush:u,drop:c,abort:d}},nle=function(t,e){var r=tle(t,e);return function(i){return function(s){return function(a){if(a.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(a.type==="INITIAL_PUBLISH"){var o=a.payload.critical;r.beforeStart(o,a.payload.movementMode),s(a),r.start(o,a.payload.movementMode);return}if(a.type==="DROP_COMPLETE"){var l=a.payload.completed.result;r.flush(),s(a),r.drop(l);return}if(s(a),a.type==="FLUSH"){r.abort();return}var u=i.getState();u.phase==="DRAGGING"&&r.update(u.critical,u.impact)}}}},rle=function(t){return function(e){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){e(r);return}var i=t.getState();i.phase!=="DROP_ANIMATING"&&we(),t.dispatch(UT({completed:i.completed}))}}},ile=function(t){var e=null,r=null;function i(){r&&(cancelAnimationFrame(r),r=null),e&&(e(),e=null)}return function(s){return function(a){if((a.type==="FLUSH"||a.type==="DROP_COMPLETE"||a.type==="DROP_ANIMATION_FINISHED")&&i(),s(a),a.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var u=t.getState();u.phase==="DROP_ANIMATING"&&t.dispatch(FF())}};r=requestAnimationFrame(function(){r=null,e=Kr(window,[o])})}}}},sle=function(t){return function(){return function(e){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&t.stopPublishing(),e(r)}}}},ale=function(t){var e=!1;return function(){return function(r){return function(i){if(i.type==="INITIAL_PUBLISH"){e=!0,t.tryRecordFocus(i.payload.critical.draggable.id),r(i),t.tryRestoreFocusRecorded();return}if(r(i),!!e){if(i.type==="FLUSH"){e=!1,t.tryRestoreFocusRecorded();return}if(i.type==="DROP_COMPLETE"){e=!1;var s=i.payload.completed.result;s.combine&&t.tryShiftRecord(s.draggableId,s.combine.draggableId),t.tryRestoreFocusRecorded()}}}}}},ole=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},lle=function(t){return function(e){return function(r){return function(i){if(ole(i)){t.stop(),r(i);return}if(i.type==="INITIAL_PUBLISH"){r(i);var s=e.getState();s.phase!=="DRAGGING"&&we(),t.start(s);return}r(i),t.scroll(e.getState())}}}},ule=function(t){return function(e){return function(r){if(e(r),r.type==="PUBLISH_WHILE_DRAGGING"){var i=t.getState();i.phase==="DROP_PENDING"&&(i.isWaiting||t.dispatch(VF({reason:i.reason})))}}}},cle=GV,dle=function(t){var e=t.dimensionMarshal,r=t.focusMarshal,i=t.styleMarshal,s=t.getResponders,a=t.announce,o=t.autoScroller;return WV(boe,cle(Qie(Foe(i),sle(e),Voe(e),Hoe,rle,ile,ule,lle(o),Yoe,ale(r),nle(s,a))))},f0=function(){return{additions:{},removals:{},modified:{}}};function hle(t){var e=t.registry,r=t.callbacks,i=f0(),s=null,a=function(){s||(r.collectionStarting(),s=requestAnimationFrame(function(){s=null;var d=i,h=d.additions,f=d.removals,m=d.modified,v=Object.keys(h).map(function(_){return e.draggable.getById(_).getDimension(In)}).sort(function(_,w){return _.descriptor.index-w.descriptor.index}),y=Object.keys(m).map(function(_){var w=e.droppable.getById(_),E=w.callbacks.getScrollWhileDragging();return{droppableId:_,scroll:E}}),b={additions:v,removals:Object.keys(f),modified:y};i=f0(),r.publish(b)}))},o=function(d){var h=d.descriptor.id;i.additions[h]=d,i.modified[d.descriptor.droppableId]=!0,i.removals[h]&&delete i.removals[h],a()},l=function(d){var h=d.descriptor;i.removals[h.id]=!0,i.modified[h.droppableId]=!0,i.additions[h.id]&&delete i.additions[h.id],a()},u=function(){s&&(cancelAnimationFrame(s),s=null,i=f0())};return{add:o,remove:l,stop:u}}var BF=function(t){var e=t.scrollHeight,r=t.scrollWidth,i=t.height,s=t.width,a=kr({x:r,y:e},{x:s,y:i}),o={x:Math.max(0,a.x),y:Math.max(0,a.y)};return o},zF=function(){var t=document.documentElement;return t||we(),t},qF=function(){var t=zF(),e=BF({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight});return e},fle=function(){var t=UF(),e=qF(),r=t.y,i=t.x,s=zF(),a=s.clientWidth,o=s.clientHeight,l=i+a,u=r+o,c=pi({top:r,left:i,right:l,bottom:u}),d={frame:c,scroll:{initial:t,current:t,max:e,diff:{value:In,displacement:In}}};return d},ple=function(t){var e=t.critical,r=t.scrollOptions,i=t.registry,s=fle(),a=s.scroll.current,o=e.droppable,l=i.droppable.getAllByType(o.type).map(function(h){return h.callbacks.getDimensionAndWatchScroll(a,r)}),u=i.draggable.getAllByType(e.draggable.type).map(function(h){return h.getDimension(a)}),c={draggables:_F(u),droppables:yF(l)},d={dimensions:c,critical:e,viewport:s};return d};function VR(t,e,r){if(r.descriptor.id===e.id||r.descriptor.type!==e.type)return!1;var i=t.droppable.getById(r.descriptor.droppableId);return i.descriptor.mode==="virtual"}var mle=function(t,e){var r=null,i=hle({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),s=function(m,v){t.droppable.exists(m)||we(),r&&e.updateDroppableIsEnabled({id:m,isEnabled:v})},a=function(m,v){r&&(t.droppable.exists(m)||we(),e.updateDroppableIsCombineEnabled({id:m,isCombineEnabled:v}))},o=function(m,v){r&&(t.droppable.exists(m)||we(),e.updateDroppableScroll({id:m,newScroll:v}))},l=function(m,v){r&&t.droppable.getById(m).callbacks.scroll(v)},u=function(){if(r){i.stop();var m=r.critical.droppable;t.droppable.getAllByType(m.type).forEach(function(v){return v.callbacks.dragStopped()}),r.unsubscribe(),r=null}},c=function(m){r||we();var v=r.critical.draggable;m.type==="ADDITION"&&VR(t,v,m.value)&&i.add(m.value),m.type==="REMOVAL"&&VR(t,v,m.value)&&i.remove(m.value)},d=function(m){r&&we();var v=t.draggable.getById(m.draggableId),y=t.droppable.getById(v.descriptor.droppableId),b={draggable:v.descriptor,droppable:y.descriptor},_=t.subscribe(c);return r={critical:b,unsubscribe:_},ple({critical:b,registry:t,scrollOptions:m.scrollOptions})},h={updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:a,scrollDroppable:l,updateDroppableScroll:o,startPublishing:d,stopPublishing:u};return h},HF=function(t,e){return t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP"},gle=function(t){window.scrollBy(t.x,t.y)},vle=Sn(function(t){return dv(t).filter(function(e){return!(!e.isEnabled||!e.frame)})}),yle=function(e,r){var i=Xa(vle(r),function(s){return s.frame||we(),NF(s.frame.pageMarginBox)(e)});return i},_le=function(t){var e=t.center,r=t.destination,i=t.droppables;if(r){var s=i[r];return s.frame?s:null}var a=yle(e,i);return a},ka={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(e){return Math.pow(e,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},wle=function(t,e){var r=t[e.size]*ka.startFromPercentage,i=t[e.size]*ka.maxScrollAtPercentage,s={startScrollingFrom:r,maxScrollValueAt:i};return s},WF=function(t){var e=t.startOfRange,r=t.endOfRange,i=t.current,s=r-e;if(s===0)return 0;var a=i-e,o=a/s;return o},qT=1,ble=function(t,e){if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return ka.maxPixelScroll;if(t===e.startScrollingFrom)return qT;var r=WF({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),i=1-r,s=ka.maxPixelScroll*ka.ease(i);return Math.ceil(s)},FR=ka.durationDampening.accelerateAt,$R=ka.durationDampening.stopDampeningAt,xle=function(t,e){var r=e,i=$R,s=Date.now(),a=s-r;if(a>=$R)return t;if(a<FR)return qT;var o=WF({startOfRange:FR,endOfRange:i,current:a}),l=t*ka.ease(o);return Math.ceil(l)},UR=function(t){var e=t.distanceToEdge,r=t.thresholds,i=t.dragStartTime,s=t.shouldUseTimeDampening,a=ble(e,r);return a===0?0:s?Math.max(xle(a,i),qT):a},BR=function(t){var e=t.container,r=t.distanceToEdges,i=t.dragStartTime,s=t.axis,a=t.shouldUseTimeDampening,o=wle(e,s),l=r[s.end]<r[s.start];return l?UR({distanceToEdge:r[s.end],thresholds:o,dragStartTime:i,shouldUseTimeDampening:a}):-1*UR({distanceToEdge:r[s.start],thresholds:o,dragStartTime:i,shouldUseTimeDampening:a})},Ele=function(t){var e=t.container,r=t.subject,i=t.proposedScroll,s=r.height>e.height,a=r.width>e.width;return!a&&!s?i:a&&s?null:{x:a?0:i.x,y:s?0:i.y}},Sle=gF(function(t){return t===0?0:t}),GF=function(t){var e=t.dragStartTime,r=t.container,i=t.subject,s=t.center,a=t.shouldUseTimeDampening,o={top:s.y-r.top,right:r.right-s.x,bottom:r.bottom-s.y,left:s.x-r.left},l=BR({container:r,distanceToEdges:o,dragStartTime:e,axis:LT,shouldUseTimeDampening:a}),u=BR({container:r,distanceToEdges:o,dragStartTime:e,axis:xF,shouldUseTimeDampening:a}),c=Sle({x:u,y:l});if(Ca(c,In))return null;var d=Ele({container:r,subject:i,proposedScroll:c});return d?Ca(d,In)?null:d:null},Tle=gF(function(t){return t===0?0:t>0?1:-1}),HT=function(){var t=function(r,i){return r<0?r:r>i?r-i:0};return function(e){var r=e.current,i=e.max,s=e.change,a=Dn(r,s),o={x:t(a.x,i.x),y:t(a.y,i.y)};return Ca(o,In)?null:o}}(),KF=function(e){var r=e.max,i=e.current,s=e.change,a={x:Math.max(i.x,r.x),y:Math.max(i.y,r.y)},o=Tle(s),l=HT({max:a,current:i,change:o});return!l||o.x!==0&&l.x===0||o.y!==0&&l.y===0},WT=function(e,r){return KF({current:e.scroll.current,max:e.scroll.max,change:r})},Ile=function(e,r){if(!WT(e,r))return null;var i=e.scroll.max,s=e.scroll.current;return HT({current:s,max:i,change:r})},GT=function(e,r){var i=e.frame;return i?KF({current:i.scroll.current,max:i.scroll.max,change:r}):!1},Cle=function(e,r){var i=e.frame;return!i||!GT(e,r)?null:HT({current:i.scroll.current,max:i.scroll.max,change:r})},kle=function(t){var e=t.viewport,r=t.subject,i=t.center,s=t.dragStartTime,a=t.shouldUseTimeDampening,o=GF({dragStartTime:s,container:e.frame,subject:r,center:i,shouldUseTimeDampening:a});return o&&WT(e,o)?o:null},Nle=function(t){var e=t.droppable,r=t.subject,i=t.center,s=t.dragStartTime,a=t.shouldUseTimeDampening,o=e.frame;if(!o)return null;var l=GF({dragStartTime:s,container:o.pageMarginBox,subject:r,center:i,shouldUseTimeDampening:a});return l&&GT(e,l)?l:null},zR=function(t){var e=t.state,r=t.dragStartTime,i=t.shouldUseTimeDampening,s=t.scrollWindow,a=t.scrollDroppable,o=e.current.page.borderBoxCenter,l=e.dimensions.draggables[e.critical.draggable.id],u=l.page.marginBox;if(e.isWindowScrollAllowed){var c=e.viewport,d=kle({dragStartTime:r,viewport:c,subject:u,center:o,shouldUseTimeDampening:i});if(d){s(d);return}}var h=_le({center:o,destination:Rr(e.impact),droppables:e.dimensions.droppables});if(h){var f=Nle({dragStartTime:r,droppable:h,subject:u,center:o,shouldUseTimeDampening:i});f&&a(h.descriptor.id,f)}},Ale=function(t){var e=t.scrollWindow,r=t.scrollDroppable,i=qd(e),s=qd(r),a=null,o=function(d){a||we();var h=a,f=h.shouldUseTimeDampening,m=h.dragStartTime;zR({state:d,scrollWindow:i,scrollDroppable:s,dragStartTime:m,shouldUseTimeDampening:f})},l=function(d){a&&we();var h=Date.now(),f=!1,m=function(){f=!0};zR({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:m,scrollDroppable:m}),a={dragStartTime:h,shouldUseTimeDampening:f},f&&o(d)},u=function(){a&&(i.cancel(),s.cancel(),a=null)};return{start:l,stop:u,scroll:o}},Rle=function(t){var e=t.move,r=t.scrollDroppable,i=t.scrollWindow,s=function(c,d){var h=Dn(c.current.client.selection,d);e({client:h})},a=function(c,d){if(!GT(c,d))return d;var h=Cle(c,d);if(!h)return r(c.descriptor.id,d),null;var f=kr(d,h);r(c.descriptor.id,f);var m=kr(d,f);return m},o=function(c,d,h){if(!c||!WT(d,h))return h;var f=Ile(d,h);if(!f)return i(h),null;var m=kr(h,f);i(m);var v=kr(h,m);return v},l=function(c){var d=c.scrollJumpRequest;if(d){var h=Rr(c.impact);h||we();var f=a(c.dimensions.droppables[h],d);if(f){var m=c.viewport,v=o(c.isWindowScrollAllowed,m,f);v&&s(c,v)}}};return l},Ple=function(t){var e=t.scrollDroppable,r=t.scrollWindow,i=t.move,s=Ale({scrollWindow:r,scrollDroppable:e}),a=Rle({move:i,scrollWindow:r,scrollDroppable:e}),o=function(c){if(c.phase==="DRAGGING"){if(c.movementMode==="FLUID"){s.scroll(c);return}c.scrollJumpRequest&&a(c)}},l={scroll:o,start:s.start,stop:s.stop};return l},xu="data-rbd",Eu=function(){var t=xu+"-drag-handle";return{base:t,draggableId:t+"-draggable-id",contextId:t+"-context-id"}}(),t2=function(){var t=xu+"-draggable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),Dle=function(){var t=xu+"-droppable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),qR={contextId:xu+"-scroll-container-context-id"},Mle=function(e){return function(r){return"["+r+'="'+e+'"]'}},xc=function(e,r){return e.map(function(i){var s=i.styles[r];return s?i.selector+" { "+s+" }":""}).join(" ")},Lle="pointer-events: none;",Ole=function(t){var e=Mle(t),r=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(Eu.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:Lle,dropAnimating:l}}}(),i=function(){var l=`
      transition: `+fd.outOfTheWay+`;
    `;return{selector:e(t2.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),s={selector:e(Dle.contextId),styles:{always:"overflow-anchor: none;"}},a={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[i,r,s,a];return{always:xc(o,"always"),resting:xc(o,"resting"),dragging:xc(o,"dragging"),dropAnimating:xc(o,"dropAnimating"),userCancel:xc(o,"userCancel")}},Pr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?S.useLayoutEffect:S.useEffect,p0=function(){var e=document.querySelector("head");return e||we(),e},HR=function(e){var r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.type="text/css",r};function jle(t,e){var r=ct(function(){return Ole(t)},[t]),i=S.useRef(null),s=S.useRef(null),a=Fe(Sn(function(h){var f=s.current;f||we(),f.textContent=h}),[]),o=Fe(function(h){var f=i.current;f||we(),f.textContent=h},[]);Pr(function(){!i.current&&!s.current||we();var h=HR(e),f=HR(e);return i.current=h,s.current=f,h.setAttribute(xu+"-always",t),f.setAttribute(xu+"-dynamic",t),p0().appendChild(h),p0().appendChild(f),o(r.always),a(r.resting),function(){var m=function(y){var b=y.current;b||we(),p0().removeChild(b),y.current=null};m(i),m(s)}},[e,o,a,r.always,r.resting,t]);var l=Fe(function(){return a(r.dragging)},[a,r.dragging]),u=Fe(function(h){if(h==="DROP"){a(r.dropAnimating);return}a(r.userCancel)},[a,r.dropAnimating,r.userCancel]),c=Fe(function(){s.current&&a(r.resting)},[a,r.resting]),d=ct(function(){return{dragging:l,dropping:u,resting:c}},[l,u,c]);return d}var YF=function(t){return t&&t.ownerDocument?t.ownerDocument.defaultView:window};function mv(t){return t instanceof YF(t).HTMLElement}function Vle(t,e){var r="["+Eu.contextId+'="'+t+'"]',i=vF(document.querySelectorAll(r));if(!i.length)return null;var s=Xa(i,function(a){return a.getAttribute(Eu.draggableId)===e});return!s||!mv(s)?null:s}function Fle(t){var e=S.useRef({}),r=S.useRef(null),i=S.useRef(null),s=S.useRef(!1),a=Fe(function(f,m){var v={id:f,focus:m};return e.current[f]=v,function(){var b=e.current,_=b[f];_!==v&&delete b[f]}},[]),o=Fe(function(f){var m=Vle(t,f);m&&m!==document.activeElement&&m.focus()},[t]),l=Fe(function(f,m){r.current===f&&(r.current=m)},[]),u=Fe(function(){i.current||s.current&&(i.current=requestAnimationFrame(function(){i.current=null;var f=r.current;f&&o(f)}))},[o]),c=Fe(function(f){r.current=null;var m=document.activeElement;m&&m.getAttribute(Eu.draggableId)===f&&(r.current=f)},[]);Pr(function(){return s.current=!0,function(){s.current=!1;var f=i.current;f&&cancelAnimationFrame(f)}},[]);var d=ct(function(){return{register:a,tryRecordFocus:c,tryRestoreFocusRecorded:u,tryShiftRecord:l}},[a,c,u,l]);return d}function $le(){var t={draggables:{},droppables:{}},e=[];function r(h){return e.push(h),function(){var m=e.indexOf(h);m!==-1&&e.splice(m,1)}}function i(h){e.length&&e.forEach(function(f){return f(h)})}function s(h){return t.draggables[h]||null}function a(h){var f=s(h);return f||we(),f}var o={register:function(f){t.draggables[f.descriptor.id]=f,i({type:"ADDITION",value:f})},update:function(f,m){var v=t.draggables[m.descriptor.id];v&&v.uniqueId===f.uniqueId&&(delete t.draggables[m.descriptor.id],t.draggables[f.descriptor.id]=f)},unregister:function(f){var m=f.descriptor.id,v=s(m);v&&f.uniqueId===v.uniqueId&&(delete t.draggables[m],i({type:"REMOVAL",value:f}))},getById:a,findById:s,exists:function(f){return!!s(f)},getAllByType:function(f){return Pm(t.draggables).filter(function(m){return m.descriptor.type===f})}};function l(h){return t.droppables[h]||null}function u(h){var f=l(h);return f||we(),f}var c={register:function(f){t.droppables[f.descriptor.id]=f},unregister:function(f){var m=l(f.descriptor.id);m&&f.uniqueId===m.uniqueId&&delete t.droppables[f.descriptor.id]},getById:u,findById:l,exists:function(f){return!!l(f)},getAllByType:function(f){return Pm(t.droppables).filter(function(m){return m.descriptor.type===f})}};function d(){t.draggables={},t.droppables={},e.length=0}return{draggable:o,droppable:c,subscribe:r,clean:d}}function Ule(){var t=ct($le,[]);return S.useEffect(function(){return function(){requestAnimationFrame(t.clean)}},[t]),t}var KT=te.createContext(null),Mm=function(){var t=document.body;return t||we(),t},Ble={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},zle=function(e){return"rbd-announcement-"+e};function qle(t){var e=ct(function(){return zle(t)},[t]),r=S.useRef(null);S.useEffect(function(){var a=document.createElement("div");return r.current=a,a.id=e,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),Ue(a.style,Ble),Mm().appendChild(a),function(){setTimeout(function(){var u=Mm();u.contains(a)&&u.removeChild(a),a===r.current&&(r.current=null)})}},[e]);var i=Fe(function(s){var a=r.current;if(a){a.textContent=s;return}},[]);return i}var Hle=0,Wle={separator:"::"};function XT(t,e){return e===void 0&&(e=Wle),ct(function(){return""+t+e.separator+Hle++},[e.separator,t])}function Gle(t){var e=t.contextId,r=t.uniqueId;return"rbd-hidden-text-"+e+"-"+r}function Kle(t){var e=t.contextId,r=t.text,i=XT("hidden-text",{separator:"-"}),s=ct(function(){return Gle({contextId:e,uniqueId:i})},[i,e]);return S.useEffect(function(){var o=document.createElement("div");return o.id=s,o.textContent=r,o.style.display="none",Mm().appendChild(o),function(){var u=Mm();u.contains(o)&&u.removeChild(o)}},[s,r]),s}var gv=te.createContext(null);function XF(t){var e=S.useRef(t);return S.useEffect(function(){e.current=t}),e}function Yle(){var t=null;function e(){return!!t}function r(o){return o===t}function i(o){t&&we();var l={abandon:o};return t=l,l}function s(){t||we(),t=null}function a(){t&&(t.abandon(),s())}return{isClaimed:e,isActive:r,claim:i,release:s,tryAbandon:a}}var Xle=9,Qle=13,QT=27,QF=32,Jle=33,Zle=34,eue=35,tue=36,nue=37,rue=38,iue=39,sue=40,Vf,aue=(Vf={},Vf[Qle]=!0,Vf[Xle]=!0,Vf),JF=function(t){aue[t.keyCode]&&t.preventDefault()},vv=function(){var t="visibilitychange";if(typeof document>"u")return t;var e=[t,"ms"+t,"webkit"+t,"moz"+t,"o"+t],r=Xa(e,function(i){return"on"+i in document});return r||t}(),ZF=0,WR=5;function oue(t,e){return Math.abs(e.x-t.x)>=WR||Math.abs(e.y-t.y)>=WR}var GR={type:"IDLE"};function lue(t){var e=t.cancel,r=t.completed,i=t.getPhase,s=t.setPhase;return[{eventName:"mousemove",fn:function(o){var l=o.button,u=o.clientX,c=o.clientY;if(l===ZF){var d={x:u,y:c},h=i();if(h.type==="DRAGGING"){o.preventDefault(),h.actions.move(d);return}h.type!=="PENDING"&&we();var f=h.point;if(oue(f,d)){o.preventDefault();var m=h.actions.fluidLift(d);s({type:"DRAGGING",actions:m})}}}},{eventName:"mouseup",fn:function(o){var l=i();if(l.type!=="DRAGGING"){e();return}o.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(o){i().type==="DRAGGING"&&o.preventDefault(),e()}},{eventName:"keydown",fn:function(o){var l=i();if(l.type==="PENDING"){e();return}if(o.keyCode===QT){o.preventDefault(),e();return}JF(o)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){i().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:function(o){var l=i();if(l.type==="IDLE"&&we(),l.actions.shouldRespectForcePress()){e();return}o.preventDefault()}},{eventName:vv,fn:e}]}function uue(t){var e=S.useRef(GR),r=S.useRef(Ia),i=ct(function(){return{eventName:"mousedown",fn:function(h){if(!h.defaultPrevented&&h.button===ZF&&!(h.ctrlKey||h.metaKey||h.shiftKey||h.altKey)){var f=t.findClosestDraggableId(h);if(f){var m=t.tryGetLock(f,o,{sourceEvent:h});if(m){h.preventDefault();var v={x:h.clientX,y:h.clientY};r.current(),c(m,v)}}}}}},[t]),s=ct(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(h){if(!h.defaultPrevented){var f=t.findClosestDraggableId(h);if(f){var m=t.findOptionsForDraggable(f);m&&(m.shouldRespectForcePress||t.canGetLock(f)&&h.preventDefault())}}}}},[t]),a=Fe(function(){var h={passive:!1,capture:!0};r.current=Kr(window,[s,i],h)},[s,i]),o=Fe(function(){var d=e.current;d.type!=="IDLE"&&(e.current=GR,r.current(),a())},[a]),l=Fe(function(){var d=e.current;o(),d.type==="DRAGGING"&&d.actions.cancel({shouldBlockNextClick:!0}),d.type==="PENDING"&&d.actions.abort()},[o]),u=Fe(function(){var h={capture:!0,passive:!1},f=lue({cancel:l,completed:o,getPhase:function(){return e.current},setPhase:function(v){e.current=v}});r.current=Kr(window,f,h)},[l,o]),c=Fe(function(h,f){e.current.type!=="IDLE"&&we(),e.current={type:"PENDING",point:f,actions:h},u()},[u]);Pr(function(){return a(),function(){r.current()}},[a])}var ml;function cue(){}var due=(ml={},ml[Zle]=!0,ml[Jle]=!0,ml[tue]=!0,ml[eue]=!0,ml);function hue(t,e){function r(){e(),t.cancel()}function i(){e(),t.drop()}return[{eventName:"keydown",fn:function(a){if(a.keyCode===QT){a.preventDefault(),r();return}if(a.keyCode===QF){a.preventDefault(),i();return}if(a.keyCode===sue){a.preventDefault(),t.moveDown();return}if(a.keyCode===rue){a.preventDefault(),t.moveUp();return}if(a.keyCode===iue){a.preventDefault(),t.moveRight();return}if(a.keyCode===nue){a.preventDefault(),t.moveLeft();return}if(due[a.keyCode]){a.preventDefault();return}JF(a)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:vv,fn:r}]}function fue(t){var e=S.useRef(cue),r=ct(function(){return{eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==QF)return;var o=t.findClosestDraggableId(a);if(!o)return;var l=t.tryGetLock(o,d,{sourceEvent:a});if(!l)return;a.preventDefault();var u=!0,c=l.snapLift();e.current();function d(){u||we(),u=!1,e.current(),i()}e.current=Kr(window,hue(c,d),{capture:!0,passive:!1})}}},[t]),i=Fe(function(){var a={passive:!1,capture:!0};e.current=Kr(window,[r],a)},[r]);Pr(function(){return i(),function(){e.current()}},[i])}var m0={type:"IDLE"},pue=120,mue=.15;function gue(t){var e=t.cancel,r=t.getPhase;return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:function(s){s.preventDefault()}},{eventName:"keydown",fn:function(s){if(r().type!=="DRAGGING"){e();return}s.keyCode===QT&&s.preventDefault(),e()}},{eventName:vv,fn:e}]}function vue(t){var e=t.cancel,r=t.completed,i=t.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(a){var o=i();if(o.type!=="DRAGGING"){e();return}o.hasMoved=!0;var l=a.touches[0],u=l.clientX,c=l.clientY,d={x:u,y:c};a.preventDefault(),o.actions.move(d)}},{eventName:"touchend",fn:function(a){var o=i();if(o.type!=="DRAGGING"){e();return}a.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(a){if(i().type!=="DRAGGING"){e();return}a.preventDefault(),e()}},{eventName:"touchforcechange",fn:function(a){var o=i();o.type==="IDLE"&&we();var l=a.touches[0];if(l){var u=l.force>=mue;if(u){var c=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){c&&e();return}if(c){if(o.hasMoved){a.preventDefault();return}e();return}a.preventDefault()}}}},{eventName:vv,fn:e}]}function yue(t){var e=S.useRef(m0),r=S.useRef(Ia),i=Fe(function(){return e.current},[]),s=Fe(function(m){e.current=m},[]),a=ct(function(){return{eventName:"touchstart",fn:function(m){if(!m.defaultPrevented){var v=t.findClosestDraggableId(m);if(v){var y=t.tryGetLock(v,l,{sourceEvent:m});if(y){var b=m.touches[0],_=b.clientX,w=b.clientY,E={x:_,y:w};r.current(),h(y,E)}}}}}},[t]),o=Fe(function(){var m={capture:!0,passive:!1};r.current=Kr(window,[a],m)},[a]),l=Fe(function(){var f=e.current;f.type!=="IDLE"&&(f.type==="PENDING"&&clearTimeout(f.longPressTimerId),s(m0),r.current(),o())},[o,s]),u=Fe(function(){var f=e.current;l(),f.type==="DRAGGING"&&f.actions.cancel({shouldBlockNextClick:!0}),f.type==="PENDING"&&f.actions.abort()},[l]),c=Fe(function(){var m={capture:!0,passive:!1},v={cancel:u,completed:l,getPhase:i},y=Kr(window,vue(v),m),b=Kr(window,gue(v),m);r.current=function(){y(),b()}},[u,i,l]),d=Fe(function(){var m=i();m.type!=="PENDING"&&we();var v=m.actions.fluidLift(m.point);s({type:"DRAGGING",actions:v,hasMoved:!1})},[i,s]),h=Fe(function(m,v){i().type!=="IDLE"&&we();var y=setTimeout(d,pue);s({type:"PENDING",point:v,actions:m,longPressTimerId:y}),c()},[c,i,s,d]);Pr(function(){return o(),function(){r.current();var v=i();v.type==="PENDING"&&(clearTimeout(v.longPressTimerId),s(m0))}},[i,o,s]),Pr(function(){var m=Kr(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return m},[])}var _ue={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function e9(t,e){if(e==null)return!1;var r=!!_ue[e.tagName.toLowerCase()];if(r)return!0;var i=e.getAttribute("contenteditable");return i==="true"||i===""?!0:e===t?!1:e9(t,e.parentElement)}function wue(t,e){var r=e.target;return mv(r)?e9(t,r):!1}var bue=function(t){return pi(t.getBoundingClientRect()).center};function xue(t){return t instanceof YF(t).Element}var Eue=function(){var t="matches";if(typeof document>"u")return t;var e=[t,"msMatchesSelector","webkitMatchesSelector"],r=Xa(e,function(i){return i in Element.prototype});return r||t}();function t9(t,e){return t==null?null:t[Eue](e)?t:t9(t.parentElement,e)}function Sue(t,e){return t.closest?t.closest(e):t9(t,e)}function Tue(t){return"["+Eu.contextId+'="'+t+'"]'}function Iue(t,e){var r=e.target;if(!xue(r))return null;var i=Tue(t),s=Sue(r,i);return!s||!mv(s)?null:s}function Cue(t,e){var r=Iue(t,e);return r?r.getAttribute(Eu.draggableId):null}function kue(t,e){var r="["+t2.contextId+'="'+t+'"]',i=vF(document.querySelectorAll(r)),s=Xa(i,function(a){return a.getAttribute(t2.id)===e});return!s||!mv(s)?null:s}function Nue(t){t.preventDefault()}function Ff(t){var e=t.expected,r=t.phase,i=t.isLockActive;return t.shouldWarn,!(!i()||e!==r)}function n9(t){var e=t.lockAPI,r=t.store,i=t.registry,s=t.draggableId;if(e.isClaimed())return!1;var a=i.draggable.findById(s);return!(!a||!a.options.isEnabled||!HF(r.getState(),s))}function Aue(t){var e=t.lockAPI,r=t.contextId,i=t.store,s=t.registry,a=t.draggableId,o=t.forceSensorStop,l=t.sourceEvent,u=n9({lockAPI:e,store:i,registry:s,draggableId:a});if(!u)return null;var c=s.draggable.getById(a),d=kue(r,c.descriptor.id);if(!d||l&&!c.options.canDragInteractiveElements&&wue(d,l))return null;var h=e.claim(o||Ia),f="PRE_DRAG";function m(){return c.options.shouldRespectForcePress}function v(){return e.isActive(h)}function y(O,A){Ff({expected:O,phase:f,isLockActive:v,shouldWarn:!0})&&i.dispatch(A())}var b=y.bind(null,"DRAGGING");function _(O){function A(){e.release(),f="COMPLETED"}f!=="PRE_DRAG"&&(A(),f!=="PRE_DRAG"&&we()),i.dispatch(Eoe(O.liftActionArgs)),f="DRAGGING";function D(T,I){if(I===void 0&&(I={shouldBlockNextClick:!1}),O.cleanup(),I.shouldBlockNextClick){var x=Kr(window,[{eventName:"click",fn:Nue,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(x)}A(),i.dispatch(VF({reason:T}))}return Ue({isActive:function(){return Ff({expected:"DRAGGING",phase:f,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:m,drop:function(I){return D("DROP",I)},cancel:function(I){return D("CANCEL",I)}},O.actions)}function w(O){var A=qd(function(T){b(function(){return jF({client:T})})}),D=_({liftActionArgs:{id:a,clientSelection:O,movementMode:"FLUID"},cleanup:function(){return A.cancel()},actions:{move:A}});return Ue({},D,{move:A})}function E(){var O={moveUp:function(){return b(Poe)},moveRight:function(){return b(Moe)},moveDown:function(){return b(Doe)},moveLeft:function(){return b(Loe)}};return _({liftActionArgs:{id:a,clientSelection:bue(d),movementMode:"SNAP"},cleanup:Ia,actions:O})}function N(){var O=Ff({expected:"PRE_DRAG",phase:f,isLockActive:v,shouldWarn:!0});O&&e.release()}var M={isActive:function(){return Ff({expected:"PRE_DRAG",phase:f,isLockActive:v,shouldWarn:!1})},shouldRespectForcePress:m,fluidLift:w,snapLift:E,abort:N};return M}var Rue=[uue,fue,yue];function Pue(t){var e=t.contextId,r=t.store,i=t.registry,s=t.customSensors,a=t.enableDefaultSensors,o=[].concat(a?Rue:[],s||[]),l=S.useState(function(){return Yle()})[0],u=Fe(function(w,E){w.isDragging&&!E.isDragging&&l.tryAbandon()},[l]);Pr(function(){var w=r.getState(),E=r.subscribe(function(){var N=r.getState();u(w,N),w=N});return E},[l,r,u]),Pr(function(){return l.tryAbandon},[l.tryAbandon]);for(var c=Fe(function(_){return n9({lockAPI:l,registry:i,store:r,draggableId:_})},[l,i,r]),d=Fe(function(_,w,E){return Aue({lockAPI:l,registry:i,contextId:e,store:r,draggableId:_,forceSensorStop:w,sourceEvent:E&&E.sourceEvent?E.sourceEvent:null})},[e,l,i,r]),h=Fe(function(_){return Cue(e,_)},[e]),f=Fe(function(_){var w=i.draggable.findById(_);return w?w.options:null},[i.draggable]),m=Fe(function(){l.isClaimed()&&(l.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch($T()))},[l,r]),v=Fe(l.isClaimed,[l]),y=ct(function(){return{canGetLock:c,tryGetLock:d,findClosestDraggableId:h,findOptionsForDraggable:f,tryReleaseLock:m,isLockClaimed:v}},[c,d,h,f,m,v]),b=0;b<o.length;b++)o[b](y)}var Due=function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}};function Ec(t){return t.current||we(),t.current}function Mue(t){var e=t.contextId,r=t.setCallbacks,i=t.sensors,s=t.nonce,a=t.dragHandleUsageInstructions,o=S.useRef(null),l=XF(t),u=Fe(function(){return Due(l.current)},[l]),c=qle(e),d=Kle({contextId:e,text:a}),h=jle(e,s),f=Fe(function(T){Ec(o).dispatch(T)},[]),m=ct(function(){return gR({publishWhileDragging:Toe,updateDroppableScroll:Coe,updateDroppableIsEnabled:koe,updateDroppableIsCombineEnabled:Noe,collectionStarting:Ioe},f)},[f]),v=Ule(),y=ct(function(){return mle(v,m)},[v,m]),b=ct(function(){return Ple(Ue({scrollWindow:gle,scrollDroppable:y.scrollDroppable},gR({move:jF},f)))},[y.scrollDroppable,f]),_=Fle(e),w=ct(function(){return dle({announce:c,autoScroller:b,dimensionMarshal:y,focusMarshal:_,getResponders:u,styleMarshal:h})},[c,b,y,_,u,h]);o.current=w;var E=Fe(function(){var T=Ec(o),I=T.getState();I.phase!=="IDLE"&&T.dispatch($T())},[]),N=Fe(function(){var T=Ec(o).getState();return T.isDragging||T.phase==="DROP_ANIMATING"},[]),M=ct(function(){return{isDragging:N,tryAbort:E}},[N,E]);r(M);var O=Fe(function(T){return HF(Ec(o).getState(),T)},[]),A=Fe(function(){return uo(Ec(o).getState())},[]),D=ct(function(){return{marshal:y,focus:_,contextId:e,canLift:O,isMovementAllowed:A,dragHandleUsageInstructionsId:d,registry:v}},[e,y,d,_,O,A,v]);return Pue({contextId:e,store:w,registry:v,customSensors:i,enableDefaultSensors:t.enableDefaultSensors!==!1}),S.useEffect(function(){return E},[E]),te.createElement(gv.Provider,{value:D},te.createElement(nse,{context:KT,store:w},t.children))}var Lue=0;function Oue(){return ct(function(){return""+Lue++},[])}function jue(t){var e=Oue(),r=t.dragHandleUsageInstructions||Tp.dragHandleUsageInstructions;return te.createElement(fae,null,function(i){return te.createElement(Mue,{nonce:t.nonce,contextId:e,setCallbacks:i,dragHandleUsageInstructions:r,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd},t.children)})}var r9=function(e){return function(r){return e===r}},Vue=r9("scroll"),Fue=r9("auto"),KR=function(e,r){return r(e.overflowX)||r(e.overflowY)},$ue=function(e){var r=window.getComputedStyle(e),i={overflowX:r.overflowX,overflowY:r.overflowY};return KR(i,Vue)||KR(i,Fue)},Uue=function(){return!1},Bue=function t(e){return e==null?null:e===document.body?Uue()?e:null:e===document.documentElement?null:$ue(e)?e:t(e.parentElement)},n2=function(t){return{x:t.scrollLeft,y:t.scrollTop}},zue=function t(e){if(!e)return!1;var r=window.getComputedStyle(e);return r.position==="fixed"?!0:t(e.parentElement)},que=function(t){var e=Bue(t),r=zue(t);return{closestScrollable:e,isFixedOnPage:r}},Hue=function(t){var e=t.descriptor,r=t.isEnabled,i=t.isCombineEnabled,s=t.isFixedOnPage,a=t.direction,o=t.client,l=t.page,u=t.closest,c=function(){if(!u)return null;var m=u.scrollSize,v=u.client,y=BF({scrollHeight:m.scrollHeight,scrollWidth:m.scrollWidth,height:v.paddingBox.height,width:v.paddingBox.width});return{pageMarginBox:u.page.marginBox,frameClient:v,scrollSize:m,shouldClipSubject:u.shouldClipSubject,scroll:{initial:u.scroll,current:u.scroll,max:y,diff:{value:In,displacement:In}}}}(),d=a==="vertical"?LT:xF,h=bu({page:l,withPlaceholder:null,axis:d,frame:c}),f={descriptor:e,isCombineEnabled:i,isFixedOnPage:s,axis:d,isEnabled:r,client:o,page:l,frame:c,subject:h};return f},Wue=function(e,r){var i=hF(e);if(!r||e!==r)return i;var s=i.paddingBox.top-r.scrollTop,a=i.paddingBox.left-r.scrollLeft,o=s+r.scrollHeight,l=a+r.scrollWidth,u={top:s,right:l,bottom:o,left:a},c=AT(u,i.border),d=RT({borderBox:c,margin:i.margin,border:i.border,padding:i.padding});return d},Gue=function(t){var e=t.ref,r=t.descriptor,i=t.env,s=t.windowScroll,a=t.direction,o=t.isDropDisabled,l=t.isCombineEnabled,u=t.shouldClipSubject,c=i.closestScrollable,d=Wue(e,c),h=Nm(d,s),f=function(){if(!c)return null;var v=hF(c),y={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:v,page:Nm(v,s),scroll:n2(c),scrollSize:y,shouldClipSubject:u}}(),m=Hue({descriptor:r,isEnabled:!o,isCombineEnabled:l,isFixedOnPage:i.isFixedOnPage,direction:a,client:d,page:h,closest:f});return m},Kue={passive:!1},Yue={passive:!0},YR=function(t){return t.shouldPublishImmediately?Kue:Yue};function Lm(t){var e=S.useContext(t);return e||we(),e}var $f=function(e){return e&&e.env.closestScrollable||null};function Xue(t){var e=S.useRef(null),r=Lm(gv),i=XT("droppable"),s=r.registry,a=r.marshal,o=XF(t),l=ct(function(){return{id:t.droppableId,type:t.type,mode:t.mode}},[t.droppableId,t.mode,t.type]),u=S.useRef(l),c=ct(function(){return Sn(function(N,M){e.current||we();var O={x:N,y:M};a.updateDroppableScroll(l.id,O)})},[l.id,a]),d=Fe(function(){var N=e.current;return!N||!N.env.closestScrollable?In:n2(N.env.closestScrollable)},[]),h=Fe(function(){var N=d();c(N.x,N.y)},[d,c]),f=ct(function(){return qd(h)},[h]),m=Fe(function(){var N=e.current,M=$f(N);N&&M||we();var O=N.scrollOptions;if(O.shouldPublishImmediately){h();return}f()},[f,h]),v=Fe(function(N,M){e.current&&we();var O=o.current,A=O.getDroppableRef();A||we();var D=que(A),T={ref:A,descriptor:l,env:D,scrollOptions:M};e.current=T;var I=Gue({ref:A,descriptor:l,env:D,windowScroll:N,direction:O.direction,isDropDisabled:O.isDropDisabled,isCombineEnabled:O.isCombineEnabled,shouldClipSubject:!O.ignoreContainerClipping}),x=D.closestScrollable;return x&&(x.setAttribute(qR.contextId,r.contextId),x.addEventListener("scroll",m,YR(T.scrollOptions))),I},[r.contextId,l,m,o]),y=Fe(function(){var N=e.current,M=$f(N);return N&&M||we(),n2(M)},[]),b=Fe(function(){var N=e.current;N||we();var M=$f(N);e.current=null,M&&(f.cancel(),M.removeAttribute(qR.contextId),M.removeEventListener("scroll",m,YR(N.scrollOptions)))},[m,f]),_=Fe(function(N){var M=e.current;M||we();var O=$f(M);O||we(),O.scrollTop+=N.y,O.scrollLeft+=N.x},[]),w=ct(function(){return{getDimensionAndWatchScroll:v,getScrollWhileDragging:y,dragStopped:b,scroll:_}},[b,v,y,_]),E=ct(function(){return{uniqueId:i,descriptor:l,callbacks:w}},[w,l,i]);Pr(function(){return u.current=E.descriptor,s.droppable.register(E),function(){e.current&&b(),s.droppable.unregister(E)}},[w,l,b,E,a,s.droppable]),Pr(function(){e.current&&a.updateDroppableIsEnabled(u.current.id,!t.isDropDisabled)},[t.isDropDisabled,a]),Pr(function(){e.current&&a.updateDroppableIsCombineEnabled(u.current.id,t.isCombineEnabled)},[t.isCombineEnabled,a])}function g0(){}var XR={width:0,height:0,margin:_ae},Que=function(e){var r=e.isAnimatingOpenOnMount,i=e.placeholder,s=e.animate;return r||s==="close"?XR:{height:i.client.borderBox.height,width:i.client.borderBox.width,margin:i.client.margin}},Jue=function(e){var r=e.isAnimatingOpenOnMount,i=e.placeholder,s=e.animate,a=Que({isAnimatingOpenOnMount:r,placeholder:i,animate:s});return{display:i.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:s!=="none"?fd.placeholder:null}};function Zue(t){var e=S.useRef(null),r=Fe(function(){e.current&&(clearTimeout(e.current),e.current=null)},[]),i=t.animate,s=t.onTransitionEnd,a=t.onClose,o=t.contextId,l=S.useState(t.animate==="open"),u=l[0],c=l[1];S.useEffect(function(){return u?i!=="open"?(r(),c(!1),g0):e.current?g0:(e.current=setTimeout(function(){e.current=null,c(!1)}),r):g0},[i,u,r]);var d=Fe(function(f){f.propertyName==="height"&&(s(),i==="close"&&a())},[i,a,s]),h=Jue({isAnimatingOpenOnMount:u,animate:t.animate,placeholder:t.placeholder});return te.createElement(t.placeholder.tagName,{style:h,"data-rbd-placeholder-context-id":o,onTransitionEnd:d,ref:t.innerRef})}var ece=te.memo(Zue),JT=te.createContext(null),tce=function(t){HV(e,t);function e(){for(var i,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return i=t.call.apply(t,[this].concat(a))||this,i.state={isVisible:!!i.props.on,data:i.props.on,animate:i.props.shouldAnimate&&i.props.on?"open":"none"},i.onClose=function(){i.state.animate==="close"&&i.setState({isVisible:!1})},i}e.getDerivedStateFromProps=function(s,a){return s.shouldAnimate?s.on?{isVisible:!0,data:s.on,animate:"open"}:a.isVisible?{isVisible:!0,data:a.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!s.on,data:s.on,animate:"none"}};var r=e.prototype;return r.render=function(){if(!this.state.isVisible)return null;var s={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(s)},e}(te.PureComponent),QR={dragging:5e3,dropAnimating:4500},nce=function(e,r){return r?fd.drop(r.duration):e?fd.snap:fd.fluid},rce=function(e,r){return e?r?Kd.opacity.drop:Kd.opacity.combining:null},ice=function(e){return e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP"};function sce(t){var e=t.dimension,r=e.client,i=t.offset,s=t.combineWith,a=t.dropping,o=!!s,l=ice(t),u=!!a,c=u?ZE.drop(i,o):ZE.moveTo(i),d={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:nce(l,a),transform:c,opacity:rce(o,u),zIndex:u?QR.dropAnimating:QR.dragging,pointerEvents:"none"};return d}function ace(t){return{transform:ZE.moveTo(t.offset),transition:t.shouldAnimateDisplacement?null:"none"}}function oce(t){return t.type==="DRAGGING"?sce(t):ace(t)}function lce(t,e,r){r===void 0&&(r=In);var i=window.getComputedStyle(e),s=e.getBoundingClientRect(),a=dF(s,i),o=Nm(a,r),l={client:a,tagName:e.tagName.toLowerCase(),display:i.display},u={x:a.marginBox.width,y:a.marginBox.height},c={descriptor:t,placeholder:l,displaceBy:u,client:a,page:o};return c}function uce(t){var e=XT("draggable"),r=t.descriptor,i=t.registry,s=t.getDraggableRef,a=t.canDragInteractiveElements,o=t.shouldRespectForcePress,l=t.isEnabled,u=ct(function(){return{canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:l}},[a,l,o]),c=Fe(function(m){var v=s();return v||we(),lce(r,v,m)},[r,s]),d=ct(function(){return{uniqueId:e,descriptor:r,options:u,getDimension:c}},[r,c,u,e]),h=S.useRef(d),f=S.useRef(!0);Pr(function(){return i.draggable.register(h.current),function(){return i.draggable.unregister(h.current)}},[i.draggable]),Pr(function(){if(f.current){f.current=!1;return}var m=h.current;h.current=d,i.draggable.update(d,m)},[d,i.draggable])}function cce(t){t.preventDefault()}function dce(t){var e=S.useRef(null),r=Fe(function(T){e.current=T},[]),i=Fe(function(){return e.current},[]),s=Lm(gv),a=s.contextId,o=s.dragHandleUsageInstructionsId,l=s.registry,u=Lm(JT),c=u.type,d=u.droppableId,h=ct(function(){return{id:t.draggableId,index:t.index,type:c,droppableId:d}},[t.draggableId,t.index,c,d]),f=t.children,m=t.draggableId,v=t.isEnabled,y=t.shouldRespectForcePress,b=t.canDragInteractiveElements,_=t.isClone,w=t.mapped,E=t.dropAnimationFinished;if(!_){var N=ct(function(){return{descriptor:h,registry:l,getDraggableRef:i,canDragInteractiveElements:b,shouldRespectForcePress:y,isEnabled:v}},[h,l,i,b,y,v]);uce(N)}var M=ct(function(){return v?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":m,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:cce}:null},[a,o,m,v]),O=Fe(function(T){w.type==="DRAGGING"&&w.dropping&&T.propertyName==="transform"&&E()},[E,w]),A=ct(function(){var T=oce(w),I=w.type==="DRAGGING"&&w.dropping?O:null,x={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":m,style:T,onTransitionEnd:I},dragHandleProps:M};return x},[a,M,m,w,O,r]),D=ct(function(){return{draggableId:h.id,type:h.type,source:{index:h.index,droppableId:h.droppableId}}},[h.droppableId,h.id,h.index,h.type]);return f(A,w.snapshot,D)}var i9=function(t,e){return t===e},s9=function(t){var e=t.combine,r=t.destination;return r?r.droppableId:e?e.droppableId:null},hce=function(e){return e.combine?e.combine.draggableId:null},fce=function(e){return e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null};function pce(){var t=Sn(function(s,a){return{x:s,y:a}}),e=Sn(function(s,a,o,l,u){return{isDragging:!0,isClone:a,isDropAnimating:!!u,dropAnimation:u,mode:s,draggingOver:o,combineWith:l,combineTargetFor:null}}),r=Sn(function(s,a,o,l,u,c,d){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:u,combineWith:c,mode:a,offset:s,dimension:o,forceShouldAnimate:d,snapshot:e(a,l,u,c,null)}}}),i=function(a,o){if(a.isDragging){if(a.critical.draggable.id!==o.draggableId)return null;var l=a.current.client.offset,u=a.dimensions.draggables[o.draggableId],c=Rr(a.impact),d=fce(a.impact),h=a.forceShouldAnimate;return r(t(l.x,l.y),a.movementMode,u,o.isClone,c,d,h)}if(a.phase==="DROP_ANIMATING"){var f=a.completed;if(f.result.draggableId!==o.draggableId)return null;var m=o.isClone,v=a.dimensions.draggables[o.draggableId],y=f.result,b=y.mode,_=s9(y),w=hce(y),E=a.dropDuration,N={duration:E,curve:BT.drop,moveTo:a.newHomeClientOffset,opacity:w?Kd.opacity.drop:null,scale:w?Kd.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:v,dropping:N,draggingOver:_,combineWith:w,mode:b,forceShouldAnimate:null,snapshot:e(b,m,_,w,N)}}}return null};return i}function a9(t){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}var mce={mapped:{type:"SECONDARY",offset:In,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:a9(null)}};function gce(){var t=Sn(function(o,l){return{x:o,y:l}}),e=Sn(a9),r=Sn(function(o,l,u){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:u,snapshot:e(l)}}}),i=function(l){return l?r(In,l,!0):null},s=function(l,u,c,d){var h=c.displaced.visible[l],f=!!(d.inVirtualList&&d.effected[l]),m=hv(c),v=m&&m.draggableId===l?u:null;if(!h){if(!f)return i(v);if(c.displaced.invisible[l])return null;var y=Wu(d.displacedBy.point),b=t(y.x,y.y);return r(b,v,!0)}if(f)return i(v);var _=c.displacedBy.point,w=t(_.x,_.y);return r(w,v,h.shouldAnimate)},a=function(l,u){if(l.isDragging)return l.critical.draggable.id===u.draggableId?null:s(u.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var c=l.completed;return c.result.draggableId===u.draggableId?null:s(u.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null};return a}var vce=function(){var e=pce(),r=gce(),i=function(a,o){return e(a,o)||r(a,o)||mce};return i},yce={dropAnimationFinished:FF},_ce=uF(vce,yce,null,{context:KT,pure:!0,areStatePropsEqual:i9})(dce);function o9(t){var e=Lm(JT),r=e.isUsingCloneFor;return r===t.draggableId&&!t.isClone?null:te.createElement(_ce,t)}function wce(t){var e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,r=!!t.disableInteractiveElementBlocking,i=!!t.shouldRespectForcePress;return te.createElement(o9,Ue({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:r,shouldRespectForcePress:i}))}function bce(t){var e=S.useContext(gv);e||we();var r=e.contextId,i=e.isMovementAllowed,s=S.useRef(null),a=S.useRef(null),o=t.children,l=t.droppableId,u=t.type,c=t.mode,d=t.direction,h=t.ignoreContainerClipping,f=t.isDropDisabled,m=t.isCombineEnabled,v=t.snapshot,y=t.useClone,b=t.updateViewportMaxScroll,_=t.getContainerForClone,w=Fe(function(){return s.current},[]),E=Fe(function(x){s.current=x},[]);Fe(function(){return a.current},[]);var N=Fe(function(x){a.current=x},[]),M=Fe(function(){i()&&b({maxScroll:qF()})},[i,b]);Xue({droppableId:l,type:u,mode:c,direction:d,isDropDisabled:f,isCombineEnabled:m,ignoreContainerClipping:h,getDroppableRef:w});var O=te.createElement(tce,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},function(x){var R=x.onClose,P=x.data,j=x.animate;return te.createElement(ece,{placeholder:P,onClose:R,innerRef:N,animate:j,contextId:r,onTransitionEnd:M})}),A=ct(function(){return{innerRef:E,placeholder:O,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":r}}},[r,l,O,E]),D=y?y.dragging.draggableId:null,T=ct(function(){return{droppableId:l,type:u,isUsingCloneFor:D}},[l,D,u]);function I(){if(!y)return null;var x=y.dragging,R=y.render,P=te.createElement(o9,{draggableId:x.draggableId,index:x.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(j,$){return R(j,$,x)});return oq.createPortal(P,_())}return te.createElement(JT.Provider,{value:T},o(A,v),I())}var v0=function(e,r){return e===r.droppable.type},JR=function(e,r){return r.draggables[e.draggable.id]},xce=function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=Ue({},e,{shouldAnimatePlaceholder:!1}),i=Sn(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),s=Sn(function(o,l,u,c,d,h){var f=d.descriptor.id,m=d.descriptor.droppableId===o;if(m){var v=h?{render:h,dragging:i(d.descriptor)}:null,y={isDraggingOver:u,draggingOverWith:u?f:null,draggingFromThisWith:f,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:y,useClone:v}}if(!l)return r;if(!c)return e;var b={isDraggingOver:u,draggingOverWith:f,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:b,useClone:null}}),a=function(l,u){var c=u.droppableId,d=u.type,h=!u.isDropDisabled,f=u.renderClone;if(l.isDragging){var m=l.critical;if(!v0(d,m))return r;var v=JR(m,l.dimensions),y=Rr(l.impact)===c;return s(c,h,y,y,v,f)}if(l.phase==="DROP_ANIMATING"){var b=l.completed;if(!v0(d,b.critical))return r;var _=JR(b.critical,l.dimensions);return s(c,h,s9(b.result)===c,Rr(b.impact)===c,_,f)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var w=l.completed;if(!v0(d,w.critical))return r;var E=Rr(w.impact)===c,N=!!(w.impact.at&&w.impact.at.type==="COMBINE"),M=w.critical.droppable.id===c;return E?N?e:r:M?e:r}return r};return a},Ece={updateViewportMaxScroll:Roe};function Sce(){return document.body||we(),document.body}var Tce={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Sce},l9=uF(xce,Ece,null,{context:KT,pure:!0,areStatePropsEqual:i9})(bce);l9.defaultProps=Tce;function Ice(){const[t]=vg(),[e,r]=S.useState([]),[i,s]=S.useState(0),[a,o]=S.useState(!0),[l,u]=S.useState(null),[c,d]=S.useState(!1),[h,f]=S.useState(!1),[m,v]=S.useState("");S.useRef(null),S.useRef(null),S.useEffect(()=>{const N=t.get("keywords");N&&searchAndBuildPlaylist(N)},[t]);const y=N=>{const M=N==null?void 0:N.match(/embed\/([a-zA-Z0-9_-]+)/);return M?M[1]:null},b=N=>{if(!N.destination)return;const M=Array.from(e),[O]=M.splice(N.source.index,1);M.splice(N.destination.index,0,O);const A=M.map((D,T)=>({...D,playlistOrder:T}));r(A),_(A)},_=async N=>{try{const M=t.get("keywords"),O=Ns(Ct,"keywordPlaylists",M);await bm(O,{items:N.map(A=>({documentName:A.documentName,playlistOrder:A.playlistOrder}))})}catch(M){console.error("Error saving playlist order:",M)}},w=()=>{f(!0),v(document.getElementById("overallSummaryContent").innerText)},E=async()=>{try{const N=t.get("keywords"),M=Ns(Ct,"keywordSummaries",N);await bm(M,{summary:m}),document.getElementById("overallSummaryContent").innerText=m,f(!1)}catch(N){console.error("Error saving description:",N)}};return p.jsx("div",{className:"container mx-auto px-4 py-8",children:p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[p.jsx("div",{className:"lg:col-span-1",children:p.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Playlist Info"}),p.jsxs("p",{id:"totalDuration",children:["Total Duration: ",formatTime(getTotalPlaylistDuration(e))]})]}),p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("h3",{className:"text-xl font-semibold",children:"Playlist Summary"}),p.jsx("button",{onClick:w,className:"text-blue-500 hover:text-blue-700",children:"✏️ Edit"})]}),h?p.jsxs("div",{className:"space-y-2",children:[p.jsx("textarea",{value:m,onChange:N=>v(N.target.value),className:"w-full h-40 p-2 border rounded"}),p.jsxs("div",{className:"flex justify-end space-x-2",children:[p.jsx("button",{onClick:()=>f(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),p.jsx("button",{onClick:E,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"})]})]}):p.jsx("p",{id:"overallSummaryContent",className:"text-gray-700"})]})]})}),p.jsx("div",{className:"lg:col-span-2",children:p.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:currentVideo&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"mb-4",children:[p.jsx("h2",{className:"text-2xl font-bold",children:currentVideo.name}),p.jsx("p",{className:"text-gray-600",children:currentVideo.role})]}),p.jsx("div",{id:"player",className:"w-full aspect-video mb-4"}),p.jsx(jue,{onDragEnd:b,children:p.jsx(l9,{droppableId:"timeline",direction:"horizontal",children:N=>p.jsx("div",{ref:N.innerRef,...N.droppableProps,className:"relative h-20 bg-gray-100 rounded mb-4",children:p.jsxs("div",{className:"absolute inset-0 flex",children:[e.map((M,O)=>p.jsx(wce,{draggableId:`${M.documentName}-${O}`,index:O,children:(A,D)=>p.jsx("div",{ref:A.innerRef,...A.draggableProps,...A.dragHandleProps,className:`relative h-full cursor-move transition-colors
                                    ${O===i?"bg-blue-500":"bg-gray-300"}
                                    ${D.isDragging?"ring-2 ring-blue-400":""}`,style:{...A.draggableProps.style,width:`${u9(M)/Cce(e)*100}%`},children:p.jsx("img",{src:`https://img.youtube.com/vi/${y(M.videoEmbedLink)}/default.jpg`,alt:"Thumbnail",className:"absolute inset-0 w-full h-full object-cover opacity-50"})})},`${M.documentName}-${O}`)),N.placeholder]})})})}),p.jsxs("div",{className:"flex justify-center space-x-4",children:[p.jsx("button",{onClick:handleSkipPrevious,disabled:i===0,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:p.jsx("span",{className:"material-icons",children:"skip_previous"})}),p.jsx("button",{onClick:handlePlayPause,className:"p-2 rounded-full bg-blue-500 hover:bg-blue-600 text-white",children:p.jsx("span",{id:"playPauseIcon",className:"material-icons",children:"pause"})}),p.jsx("button",{onClick:handleSkipNext,disabled:i===e.length-1,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:p.jsx("span",{className:"material-icons",children:"skip_next"})})]}),p.jsxs("div",{className:"mt-6",children:[p.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Summary"}),p.jsx("p",{className:"text-gray-700",children:currentVideo.summary})]})]})})})]})})}function u9(t){const e=convertTimestampToSeconds(extractStartTimestamp(t.timestamp));return convertTimestampToSeconds(extractStartTimestamp(t.timestamp.split(" - ")[1]))-e}function Cce(t){return t.reduce((e,r)=>e+u9(r),0)}function On(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let r=0,i;r<t.length;r++)(i=On(t[r]))!==""&&(e+=(e&&" ")+i);else for(let r in t)t[r]&&(e+=(e&&" ")+r);return e}var c9={exports:{}},d9={},h9={exports:{}},f9={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Su=S;function kce(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Nce=typeof Object.is=="function"?Object.is:kce,Ace=Su.useState,Rce=Su.useEffect,Pce=Su.useLayoutEffect,Dce=Su.useDebugValue;function Mce(t,e){var r=e(),i=Ace({inst:{value:r,getSnapshot:e}}),s=i[0].inst,a=i[1];return Pce(function(){s.value=r,s.getSnapshot=e,y0(s)&&a({inst:s})},[t,r,e]),Rce(function(){return y0(s)&&a({inst:s}),t(function(){y0(s)&&a({inst:s})})},[t]),Dce(r),r}function y0(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Nce(t,r)}catch{return!0}}function Lce(t,e){return e()}var Oce=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Lce:Mce;f9.useSyncExternalStore=Su.useSyncExternalStore!==void 0?Su.useSyncExternalStore:Oce;h9.exports=f9;var jce=h9.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv=S,Vce=jce;function Fce(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $ce=typeof Object.is=="function"?Object.is:Fce,Uce=Vce.useSyncExternalStore,Bce=yv.useRef,zce=yv.useEffect,qce=yv.useMemo,Hce=yv.useDebugValue;d9.useSyncExternalStoreWithSelector=function(t,e,r,i,s){var a=Bce(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=qce(function(){function u(m){if(!c){if(c=!0,d=m,m=i(m),s!==void 0&&o.hasValue){var v=o.value;if(s(v,m))return h=v}return h=m}if(v=h,$ce(d,m))return v;var y=i(m);return s!==void 0&&s(v,y)?(d=m,v):(d=m,h=y)}var c=!1,d,h,f=r===void 0?null:r;return[function(){return u(e())},f===null?void 0:function(){return u(f())}]},[e,r,i,s]);var l=Uce(t,a[0],a[1]);return zce(function(){o.hasValue=!0,o.value=l},[l]),Hce(l),l};c9.exports=d9;var Wce=c9.exports;const Gce=za(Wce),Kce={},ZR=t=>{let e;const r=new Set,i=(d,h)=>{const f=typeof d=="function"?d(e):d;if(!Object.is(f,e)){const m=e;e=h??(typeof f!="object"||f===null)?f:Object.assign({},e,f),r.forEach(v=>v(e,m))}},s=()=>e,u={setState:i,getState:s,getInitialState:()=>c,subscribe:d=>(r.add(d),()=>r.delete(d)),destroy:()=>{(Kce?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),r.clear()}},c=e=t(i,s,u);return u},Yce=t=>t?ZR(t):ZR,{useDebugValue:Xce}=te,{useSyncExternalStoreWithSelector:Qce}=Gce,Jce=t=>t;function p9(t,e=Jce,r){const i=Qce(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,r);return Xce(i),i}const eP=(t,e)=>{const r=Yce(t),i=(s,a=e)=>p9(r,s,a);return Object.assign(i,r),i},Zce=(t,e)=>t?eP(t,e):eP;function Cn(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[i,s]of t)if(!Object.is(s,e.get(i)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0}const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!1;for(const i of r)if(!Object.prototype.hasOwnProperty.call(e,i)||!Object.is(t[i],e[i]))return!1;return!0}var ede={value:()=>{}};function _v(){for(var t=0,e=arguments.length,r={},i;t<e;++t){if(!(i=arguments[t]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new Ip(r)}function Ip(t){this._=t}function tde(t,e){return t.trim().split(/^|\s+/).map(function(r){var i="",s=r.indexOf(".");if(s>=0&&(i=r.slice(s+1),r=r.slice(0,s)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}Ip.prototype=_v.prototype={constructor:Ip,on:function(t,e){var r=this._,i=tde(t+"",r),s,a=-1,o=i.length;if(arguments.length<2){for(;++a<o;)if((s=(t=i[a]).type)&&(s=nde(r[s],t.name)))return s;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<o;)if(s=(t=i[a]).type)r[s]=tP(r[s],t.name,e);else if(e==null)for(s in r)r[s]=tP(r[s],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new Ip(t)},call:function(t,e){if((s=arguments.length-2)>0)for(var r=new Array(s),i=0,s,a;i<s;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],i=0,s=a.length;i<s;++i)a[i].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],s=0,a=i.length;s<a;++s)i[s].value.apply(e,r)}};function nde(t,e){for(var r=0,i=t.length,s;r<i;++r)if((s=t[r]).name===e)return s.value}function tP(t,e,r){for(var i=0,s=t.length;i<s;++i)if(t[i].name===e){t[i]=ede,t=t.slice(0,i).concat(t.slice(i+1));break}return r!=null&&t.push({name:e,value:r}),t}var r2="http://www.w3.org/1999/xhtml";const nP={svg:"http://www.w3.org/2000/svg",xhtml:r2,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function wv(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),nP.hasOwnProperty(e)?{space:nP[e],local:t}:t}function rde(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===r2&&e.documentElement.namespaceURI===r2?e.createElement(t):e.createElementNS(r,t)}}function ide(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function m9(t){var e=wv(t);return(e.local?ide:rde)(e)}function sde(){}function ZT(t){return t==null?sde:function(){return this.querySelector(t)}}function ade(t){typeof t!="function"&&(t=ZT(t));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var a=e[s],o=a.length,l=i[s]=new Array(o),u,c,d=0;d<o;++d)(u=a[d])&&(c=t.call(u,u.__data__,d,a))&&("__data__"in u&&(c.__data__=u.__data__),l[d]=c);return new Lr(i,this._parents)}function ode(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function lde(){return[]}function g9(t){return t==null?lde:function(){return this.querySelectorAll(t)}}function ude(t){return function(){return ode(t.apply(this,arguments))}}function cde(t){typeof t=="function"?t=ude(t):t=g9(t);for(var e=this._groups,r=e.length,i=[],s=[],a=0;a<r;++a)for(var o=e[a],l=o.length,u,c=0;c<l;++c)(u=o[c])&&(i.push(t.call(u,u.__data__,c,o)),s.push(u));return new Lr(i,s)}function v9(t){return function(){return this.matches(t)}}function y9(t){return function(e){return e.matches(t)}}var dde=Array.prototype.find;function hde(t){return function(){return dde.call(this.children,t)}}function fde(){return this.firstElementChild}function pde(t){return this.select(t==null?fde:hde(typeof t=="function"?t:y9(t)))}var mde=Array.prototype.filter;function gde(){return Array.from(this.children)}function vde(t){return function(){return mde.call(this.children,t)}}function yde(t){return this.selectAll(t==null?gde:vde(typeof t=="function"?t:y9(t)))}function _de(t){typeof t!="function"&&(t=v9(t));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var a=e[s],o=a.length,l=i[s]=[],u,c=0;c<o;++c)(u=a[c])&&t.call(u,u.__data__,c,a)&&l.push(u);return new Lr(i,this._parents)}function _9(t){return new Array(t.length)}function wde(){return new Lr(this._enter||this._groups.map(_9),this._parents)}function Om(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Om.prototype={constructor:Om,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function bde(t){return function(){return t}}function xde(t,e,r,i,s,a){for(var o=0,l,u=e.length,c=a.length;o<c;++o)(l=e[o])?(l.__data__=a[o],i[o]=l):r[o]=new Om(t,a[o]);for(;o<u;++o)(l=e[o])&&(s[o]=l)}function Ede(t,e,r,i,s,a,o){var l,u,c=new Map,d=e.length,h=a.length,f=new Array(d),m;for(l=0;l<d;++l)(u=e[l])&&(f[l]=m=o.call(u,u.__data__,l,e)+"",c.has(m)?s[l]=u:c.set(m,u));for(l=0;l<h;++l)m=o.call(t,a[l],l,a)+"",(u=c.get(m))?(i[l]=u,u.__data__=a[l],c.delete(m)):r[l]=new Om(t,a[l]);for(l=0;l<d;++l)(u=e[l])&&c.get(f[l])===u&&(s[l]=u)}function Sde(t){return t.__data__}function Tde(t,e){if(!arguments.length)return Array.from(this,Sde);var r=e?Ede:xde,i=this._parents,s=this._groups;typeof t!="function"&&(t=bde(t));for(var a=s.length,o=new Array(a),l=new Array(a),u=new Array(a),c=0;c<a;++c){var d=i[c],h=s[c],f=h.length,m=Ide(t.call(d,d&&d.__data__,c,i)),v=m.length,y=l[c]=new Array(v),b=o[c]=new Array(v),_=u[c]=new Array(f);r(d,h,y,b,_,m,e);for(var w=0,E=0,N,M;w<v;++w)if(N=y[w]){for(w>=E&&(E=w+1);!(M=b[E])&&++E<v;);N._next=M||null}}return o=new Lr(o,i),o._enter=l,o._exit=u,o}function Ide(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Cde(){return new Lr(this._exit||this._groups.map(_9),this._parents)}function kde(t,e,r){var i=this.enter(),s=this,a=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(s=e(s),s&&(s=s.selection())),r==null?a.remove():r(a),i&&s?i.merge(s).order():s}function Nde(t){for(var e=t.selection?t.selection():t,r=this._groups,i=e._groups,s=r.length,a=i.length,o=Math.min(s,a),l=new Array(s),u=0;u<o;++u)for(var c=r[u],d=i[u],h=c.length,f=l[u]=new Array(h),m,v=0;v<h;++v)(m=c[v]||d[v])&&(f[v]=m);for(;u<s;++u)l[u]=r[u];return new Lr(l,this._parents)}function Ade(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var i=t[e],s=i.length-1,a=i[s],o;--s>=0;)(o=i[s])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function Rde(t){t||(t=Pde);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a){for(var o=r[a],l=o.length,u=s[a]=new Array(l),c,d=0;d<l;++d)(c=o[d])&&(u[d]=c);u.sort(e)}return new Lr(s,this._parents).order()}function Pde(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Dde(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Mde(){return Array.from(this)}function Lde(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i=t[e],s=0,a=i.length;s<a;++s){var o=i[s];if(o)return o}return null}function Ode(){let t=0;for(const e of this)++t;return t}function jde(){return!this.node()}function Vde(t){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var s=e[r],a=0,o=s.length,l;a<o;++a)(l=s[a])&&t.call(l,l.__data__,a,s);return this}function Fde(t){return function(){this.removeAttribute(t)}}function $de(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ude(t,e){return function(){this.setAttribute(t,e)}}function Bde(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function zde(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function qde(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function Hde(t,e){var r=wv(t);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((e==null?r.local?$de:Fde:typeof e=="function"?r.local?qde:zde:r.local?Bde:Ude)(r,e))}function w9(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Wde(t){return function(){this.style.removeProperty(t)}}function Gde(t,e,r){return function(){this.style.setProperty(t,e,r)}}function Kde(t,e,r){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,r)}}function Yde(t,e,r){return arguments.length>1?this.each((e==null?Wde:typeof e=="function"?Kde:Gde)(t,e,r??"")):Tu(this.node(),t)}function Tu(t,e){return t.style.getPropertyValue(e)||w9(t).getComputedStyle(t,null).getPropertyValue(e)}function Xde(t){return function(){delete this[t]}}function Qde(t,e){return function(){this[t]=e}}function Jde(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function Zde(t,e){return arguments.length>1?this.each((e==null?Xde:typeof e=="function"?Jde:Qde)(t,e)):this.node()[t]}function b9(t){return t.trim().split(/^|\s+/)}function eI(t){return t.classList||new x9(t)}function x9(t){this._node=t,this._names=b9(t.getAttribute("class")||"")}x9.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function E9(t,e){for(var r=eI(t),i=-1,s=e.length;++i<s;)r.add(e[i])}function S9(t,e){for(var r=eI(t),i=-1,s=e.length;++i<s;)r.remove(e[i])}function ehe(t){return function(){E9(this,t)}}function the(t){return function(){S9(this,t)}}function nhe(t,e){return function(){(e.apply(this,arguments)?E9:S9)(this,t)}}function rhe(t,e){var r=b9(t+"");if(arguments.length<2){for(var i=eI(this.node()),s=-1,a=r.length;++s<a;)if(!i.contains(r[s]))return!1;return!0}return this.each((typeof e=="function"?nhe:e?ehe:the)(r,e))}function ihe(){this.textContent=""}function she(t){return function(){this.textContent=t}}function ahe(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function ohe(t){return arguments.length?this.each(t==null?ihe:(typeof t=="function"?ahe:she)(t)):this.node().textContent}function lhe(){this.innerHTML=""}function uhe(t){return function(){this.innerHTML=t}}function che(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function dhe(t){return arguments.length?this.each(t==null?lhe:(typeof t=="function"?che:uhe)(t)):this.node().innerHTML}function hhe(){this.nextSibling&&this.parentNode.appendChild(this)}function fhe(){return this.each(hhe)}function phe(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mhe(){return this.each(phe)}function ghe(t){var e=typeof t=="function"?t:m9(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function vhe(){return null}function yhe(t,e){var r=typeof t=="function"?t:m9(t),i=e==null?vhe:typeof e=="function"?e:ZT(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function _he(){var t=this.parentNode;t&&t.removeChild(this)}function whe(){return this.each(_he)}function bhe(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function xhe(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ehe(t){return this.select(t?xhe:bhe)}function She(t){return arguments.length?this.property("__data__",t):this.node().__data__}function The(t){return function(e){t.call(this,e,this.__data__)}}function Ihe(t){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{type:e,name:r}})}function Che(t){return function(){var e=this.__on;if(e){for(var r=0,i=-1,s=e.length,a;r<s;++r)a=e[r],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++i]=a;++i?e.length=i:delete this.__on}}}function khe(t,e,r){return function(){var i=this.__on,s,a=The(e);if(i){for(var o=0,l=i.length;o<l;++o)if((s=i[o]).type===t.type&&s.name===t.name){this.removeEventListener(s.type,s.listener,s.options),this.addEventListener(s.type,s.listener=a,s.options=r),s.value=e;return}}this.addEventListener(t.type,a,r),s={type:t.type,name:t.name,value:e,listener:a,options:r},i?i.push(s):this.__on=[s]}}function Nhe(t,e,r){var i=Ihe(t+""),s,a=i.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,c=l.length,d;u<c;++u)for(s=0,d=l[u];s<a;++s)if((o=i[s]).type===d.type&&o.name===d.name)return d.value}return}for(l=e?khe:Che,s=0;s<a;++s)this.each(l(i[s],e,r));return this}function T9(t,e,r){var i=w9(t),s=i.CustomEvent;typeof s=="function"?s=new s(e,r):(s=i.document.createEvent("Event"),r?(s.initEvent(e,r.bubbles,r.cancelable),s.detail=r.detail):s.initEvent(e,!1,!1)),t.dispatchEvent(s)}function Ahe(t,e){return function(){return T9(this,t,e)}}function Rhe(t,e){return function(){return T9(this,t,e.apply(this,arguments))}}function Phe(t,e){return this.each((typeof e=="function"?Rhe:Ahe)(t,e))}function*Dhe(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i=t[e],s=0,a=i.length,o;s<a;++s)(o=i[s])&&(yield o)}var I9=[null];function Lr(t,e){this._groups=t,this._parents=e}function Vh(){return new Lr([[document.documentElement]],I9)}function Mhe(){return this}Lr.prototype=Vh.prototype={constructor:Lr,select:ade,selectAll:cde,selectChild:pde,selectChildren:yde,filter:_de,data:Tde,enter:wde,exit:Cde,join:kde,merge:Nde,selection:Mhe,order:Ade,sort:Rde,call:Dde,nodes:Mde,node:Lde,size:Ode,empty:jde,each:Vde,attr:Hde,style:Yde,property:Zde,classed:rhe,text:ohe,html:dhe,raise:fhe,lower:mhe,append:ghe,insert:yhe,remove:whe,clone:Ehe,datum:She,on:Nhe,dispatch:Phe,[Symbol.iterator]:Dhe};function Wr(t){return typeof t=="string"?new Lr([[document.querySelector(t)]],[document.documentElement]):new Lr([[t]],I9)}function Lhe(t){let e;for(;e=t.sourceEvent;)t=e;return t}function di(t,e){if(t=Lhe(t),e===void 0&&(e=t.currentTarget),e){var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}if(e.getBoundingClientRect){var s=e.getBoundingClientRect();return[t.clientX-s.left-e.clientLeft,t.clientY-s.top-e.clientTop]}}return[t.pageX,t.pageY]}const Ohe={passive:!1},Yd={capture:!0,passive:!1};function _0(t){t.stopImmediatePropagation()}function Jl(t){t.preventDefault(),t.stopImmediatePropagation()}function C9(t){var e=t.document.documentElement,r=Wr(t).on("dragstart.drag",Jl,Yd);"onselectstart"in e?r.on("selectstart.drag",Jl,Yd):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function k9(t,e){var r=t.document.documentElement,i=Wr(t).on("dragstart.drag",null);e&&(i.on("click.drag",Jl,Yd),setTimeout(function(){i.on("click.drag",null)},0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}const Uf=t=>()=>t;function i2(t,{sourceEvent:e,subject:r,target:i,identifier:s,active:a,x:o,y:l,dx:u,dy:c,dispatch:d}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:c,enumerable:!0,configurable:!0},_:{value:d}})}i2.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function jhe(t){return!t.ctrlKey&&!t.button}function Vhe(){return this.parentNode}function Fhe(t,e){return e??{x:t.x,y:t.y}}function $he(){return navigator.maxTouchPoints||"ontouchstart"in this}function Uhe(){var t=jhe,e=Vhe,r=Fhe,i=$he,s={},a=_v("start","drag","end"),o=0,l,u,c,d,h=0;function f(N){N.on("mousedown.drag",m).filter(i).on("touchstart.drag",b).on("touchmove.drag",_,Ohe).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(N,M){if(!(d||!t.call(this,N,M))){var O=E(this,e.call(this,N,M),N,M,"mouse");O&&(Wr(N.view).on("mousemove.drag",v,Yd).on("mouseup.drag",y,Yd),C9(N.view),_0(N),c=!1,l=N.clientX,u=N.clientY,O("start",N))}}function v(N){if(Jl(N),!c){var M=N.clientX-l,O=N.clientY-u;c=M*M+O*O>h}s.mouse("drag",N)}function y(N){Wr(N.view).on("mousemove.drag mouseup.drag",null),k9(N.view,c),Jl(N),s.mouse("end",N)}function b(N,M){if(t.call(this,N,M)){var O=N.changedTouches,A=e.call(this,N,M),D=O.length,T,I;for(T=0;T<D;++T)(I=E(this,A,N,M,O[T].identifier,O[T]))&&(_0(N),I("start",N,O[T]))}}function _(N){var M=N.changedTouches,O=M.length,A,D;for(A=0;A<O;++A)(D=s[M[A].identifier])&&(Jl(N),D("drag",N,M[A]))}function w(N){var M=N.changedTouches,O=M.length,A,D;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),A=0;A<O;++A)(D=s[M[A].identifier])&&(_0(N),D("end",N,M[A]))}function E(N,M,O,A,D,T){var I=a.copy(),x=di(T||O,M),R,P,j;if((j=r.call(N,new i2("beforestart",{sourceEvent:O,target:f,identifier:D,active:o,x:x[0],y:x[1],dx:0,dy:0,dispatch:I}),A))!=null)return R=j.x-x[0]||0,P=j.y-x[1]||0,function $(U,Y,q){var F=x,W;switch(U){case"start":s[D]=$,W=o++;break;case"end":delete s[D],--o;case"drag":x=di(q||Y,M),W=o;break}I.call(U,N,new i2(U,{sourceEvent:Y,subject:j,target:f,identifier:D,active:W,x:x[0]+R,y:x[1]+P,dx:x[0]-F[0],dy:x[1]-F[1],dispatch:I}),A)}}return f.filter=function(N){return arguments.length?(t=typeof N=="function"?N:Uf(!!N),f):t},f.container=function(N){return arguments.length?(e=typeof N=="function"?N:Uf(N),f):e},f.subject=function(N){return arguments.length?(r=typeof N=="function"?N:Uf(N),f):r},f.touchable=function(N){return arguments.length?(i=typeof N=="function"?N:Uf(!!N),f):i},f.on=function(){var N=a.on.apply(a,arguments);return N===a?f:N},f.clickDistance=function(N){return arguments.length?(h=(N=+N)*N,f):Math.sqrt(h)},f}function tI(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function N9(t,e){var r=Object.create(t.prototype);for(var i in e)r[i]=e[i];return r}function Fh(){}var Xd=.7,jm=1/Xd,Zl="\\s*([+-]?\\d+)\\s*",Qd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",zi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Bhe=/^#([0-9a-f]{3,8})$/,zhe=new RegExp(`^rgb\\(${Zl},${Zl},${Zl}\\)$`),qhe=new RegExp(`^rgb\\(${zi},${zi},${zi}\\)$`),Hhe=new RegExp(`^rgba\\(${Zl},${Zl},${Zl},${Qd}\\)$`),Whe=new RegExp(`^rgba\\(${zi},${zi},${zi},${Qd}\\)$`),Ghe=new RegExp(`^hsl\\(${Qd},${zi},${zi}\\)$`),Khe=new RegExp(`^hsla\\(${Qd},${zi},${zi},${Qd}\\)$`),rP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};tI(Fh,Jd,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:iP,formatHex:iP,formatHex8:Yhe,formatHsl:Xhe,formatRgb:sP,toString:sP});function iP(){return this.rgb().formatHex()}function Yhe(){return this.rgb().formatHex8()}function Xhe(){return A9(this).formatHsl()}function sP(){return this.rgb().formatRgb()}function Jd(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=Bhe.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?aP(e):r===3?new fr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Bf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Bf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=zhe.exec(t))?new fr(e[1],e[2],e[3],1):(e=qhe.exec(t))?new fr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Hhe.exec(t))?Bf(e[1],e[2],e[3],e[4]):(e=Whe.exec(t))?Bf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Ghe.exec(t))?uP(e[1],e[2]/100,e[3]/100,1):(e=Khe.exec(t))?uP(e[1],e[2]/100,e[3]/100,e[4]):rP.hasOwnProperty(t)?aP(rP[t]):t==="transparent"?new fr(NaN,NaN,NaN,0):null}function aP(t){return new fr(t>>16&255,t>>8&255,t&255,1)}function Bf(t,e,r,i){return i<=0&&(t=e=r=NaN),new fr(t,e,r,i)}function Qhe(t){return t instanceof Fh||(t=Jd(t)),t?(t=t.rgb(),new fr(t.r,t.g,t.b,t.opacity)):new fr}function s2(t,e,r,i){return arguments.length===1?Qhe(t):new fr(t,e,r,i??1)}function fr(t,e,r,i){this.r=+t,this.g=+e,this.b=+r,this.opacity=+i}tI(fr,s2,N9(Fh,{brighter(t){return t=t==null?jm:Math.pow(jm,t),new fr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Xd:Math.pow(Xd,t),new fr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new fr(So(this.r),So(this.g),So(this.b),Vm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oP,formatHex:oP,formatHex8:Jhe,formatRgb:lP,toString:lP}));function oP(){return`#${_o(this.r)}${_o(this.g)}${_o(this.b)}`}function Jhe(){return`#${_o(this.r)}${_o(this.g)}${_o(this.b)}${_o((isNaN(this.opacity)?1:this.opacity)*255)}`}function lP(){const t=Vm(this.opacity);return`${t===1?"rgb(":"rgba("}${So(this.r)}, ${So(this.g)}, ${So(this.b)}${t===1?")":`, ${t})`}`}function Vm(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function So(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function _o(t){return t=So(t),(t<16?"0":"")+t.toString(16)}function uP(t,e,r,i){return i<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new fi(t,e,r,i)}function A9(t){if(t instanceof fi)return new fi(t.h,t.s,t.l,t.opacity);if(t instanceof Fh||(t=Jd(t)),!t)return new fi;if(t instanceof fi)return t;t=t.rgb();var e=t.r/255,r=t.g/255,i=t.b/255,s=Math.min(e,r,i),a=Math.max(e,r,i),o=NaN,l=a-s,u=(a+s)/2;return l?(e===a?o=(r-i)/l+(r<i)*6:r===a?o=(i-e)/l+2:o=(e-r)/l+4,l/=u<.5?a+s:2-a-s,o*=60):l=u>0&&u<1?0:o,new fi(o,l,u,t.opacity)}function Zhe(t,e,r,i){return arguments.length===1?A9(t):new fi(t,e,r,i??1)}function fi(t,e,r,i){this.h=+t,this.s=+e,this.l=+r,this.opacity=+i}tI(fi,Zhe,N9(Fh,{brighter(t){return t=t==null?jm:Math.pow(jm,t),new fi(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Xd:Math.pow(Xd,t),new fi(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*e,s=2*r-i;return new fr(w0(t>=240?t-240:t+120,s,i),w0(t,s,i),w0(t<120?t+240:t-120,s,i),this.opacity)},clamp(){return new fi(cP(this.h),zf(this.s),zf(this.l),Vm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Vm(this.opacity);return`${t===1?"hsl(":"hsla("}${cP(this.h)}, ${zf(this.s)*100}%, ${zf(this.l)*100}%${t===1?")":`, ${t})`}`}}));function cP(t){return t=(t||0)%360,t<0?t+360:t}function zf(t){return Math.max(0,Math.min(1,t||0))}function w0(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const R9=t=>()=>t;function efe(t,e){return function(r){return t+r*e}}function tfe(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(i){return Math.pow(t+i*e,r)}}function nfe(t){return(t=+t)==1?P9:function(e,r){return r-e?tfe(e,r,t):R9(isNaN(e)?r:e)}}function P9(t,e){var r=e-t;return r?efe(t,r):R9(isNaN(t)?e:t)}const dP=function t(e){var r=nfe(e);function i(s,a){var o=r((s=s2(s)).r,(a=s2(a)).r),l=r(s.g,a.g),u=r(s.b,a.b),c=P9(s.opacity,a.opacity);return function(d){return s.r=o(d),s.g=l(d),s.b=u(d),s.opacity=c(d),s+""}}return i.gamma=t,i}(1);function ea(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var a2=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,b0=new RegExp(a2.source,"g");function rfe(t){return function(){return t}}function ife(t){return function(e){return t(e)+""}}function sfe(t,e){var r=a2.lastIndex=b0.lastIndex=0,i,s,a,o=-1,l=[],u=[];for(t=t+"",e=e+"";(i=a2.exec(t))&&(s=b0.exec(e));)(a=s.index)>r&&(a=e.slice(r,a),l[o]?l[o]+=a:l[++o]=a),(i=i[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,u.push({i:o,x:ea(i,s)})),r=b0.lastIndex;return r<e.length&&(a=e.slice(r),l[o]?l[o]+=a:l[++o]=a),l.length<2?u[0]?ife(u[0].x):rfe(e):(e=u.length,function(c){for(var d=0,h;d<e;++d)l[(h=u[d]).i]=h.x(c);return l.join("")})}var hP=180/Math.PI,o2={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function D9(t,e,r,i,s,a){var o,l,u;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(u=t*r+e*i)&&(r-=t*u,i-=e*u),(l=Math.sqrt(r*r+i*i))&&(r/=l,i/=l,u/=l),t*i<e*r&&(t=-t,e=-e,u=-u,o=-o),{translateX:s,translateY:a,rotate:Math.atan2(e,t)*hP,skewX:Math.atan(u)*hP,scaleX:o,scaleY:l}}var qf;function afe(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?o2:D9(e.a,e.b,e.c,e.d,e.e,e.f)}function ofe(t){return t==null||(qf||(qf=document.createElementNS("http://www.w3.org/2000/svg","g")),qf.setAttribute("transform",t),!(t=qf.transform.baseVal.consolidate()))?o2:(t=t.matrix,D9(t.a,t.b,t.c,t.d,t.e,t.f))}function M9(t,e,r,i){function s(c){return c.length?c.pop()+" ":""}function a(c,d,h,f,m,v){if(c!==h||d!==f){var y=m.push("translate(",null,e,null,r);v.push({i:y-4,x:ea(c,h)},{i:y-2,x:ea(d,f)})}else(h||f)&&m.push("translate("+h+e+f+r)}function o(c,d,h,f){c!==d?(c-d>180?d+=360:d-c>180&&(c+=360),f.push({i:h.push(s(h)+"rotate(",null,i)-2,x:ea(c,d)})):d&&h.push(s(h)+"rotate("+d+i)}function l(c,d,h,f){c!==d?f.push({i:h.push(s(h)+"skewX(",null,i)-2,x:ea(c,d)}):d&&h.push(s(h)+"skewX("+d+i)}function u(c,d,h,f,m,v){if(c!==h||d!==f){var y=m.push(s(m)+"scale(",null,",",null,")");v.push({i:y-4,x:ea(c,h)},{i:y-2,x:ea(d,f)})}else(h!==1||f!==1)&&m.push(s(m)+"scale("+h+","+f+")")}return function(c,d){var h=[],f=[];return c=t(c),d=t(d),a(c.translateX,c.translateY,d.translateX,d.translateY,h,f),o(c.rotate,d.rotate,h,f),l(c.skewX,d.skewX,h,f),u(c.scaleX,c.scaleY,d.scaleX,d.scaleY,h,f),c=d=null,function(m){for(var v=-1,y=f.length,b;++v<y;)h[(b=f[v]).i]=b.x(m);return h.join("")}}}var lfe=M9(afe,"px, ","px)","deg)"),ufe=M9(ofe,", ",")",")"),cfe=1e-12;function fP(t){return((t=Math.exp(t))+1/t)/2}function dfe(t){return((t=Math.exp(t))-1/t)/2}function hfe(t){return((t=Math.exp(2*t))-1)/(t+1)}const ffe=function t(e,r,i){function s(a,o){var l=a[0],u=a[1],c=a[2],d=o[0],h=o[1],f=o[2],m=d-l,v=h-u,y=m*m+v*v,b,_;if(y<cfe)_=Math.log(f/c)/e,b=function(A){return[l+A*m,u+A*v,c*Math.exp(e*A*_)]};else{var w=Math.sqrt(y),E=(f*f-c*c+i*y)/(2*c*r*w),N=(f*f-c*c-i*y)/(2*f*r*w),M=Math.log(Math.sqrt(E*E+1)-E),O=Math.log(Math.sqrt(N*N+1)-N);_=(O-M)/e,b=function(A){var D=A*_,T=fP(M),I=c/(r*w)*(T*hfe(e*D+M)-dfe(M));return[l+I*m,u+I*v,c*T/fP(e*D+M)]}}return b.duration=_*1e3*e/Math.SQRT2,b}return s.rho=function(a){var o=Math.max(.001,+a),l=o*o,u=l*l;return t(o,l,u)},s}(Math.SQRT2,2,4);var Iu=0,$c=0,Sc=0,L9=1e3,Fm,Uc,$m=0,$o=0,bv=0,Zd=typeof performance=="object"&&performance.now?performance:Date,O9=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function nI(){return $o||(O9(pfe),$o=Zd.now()+bv)}function pfe(){$o=0}function Um(){this._call=this._time=this._next=null}Um.prototype=j9.prototype={constructor:Um,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?nI():+r)+(e==null?0:+e),!this._next&&Uc!==this&&(Uc?Uc._next=this:Fm=this,Uc=this),this._call=t,this._time=r,l2()},stop:function(){this._call&&(this._call=null,this._time=1/0,l2())}};function j9(t,e,r){var i=new Um;return i.restart(t,e,r),i}function mfe(){nI(),++Iu;for(var t=Fm,e;t;)(e=$o-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Iu}function pP(){$o=($m=Zd.now())+bv,Iu=$c=0;try{mfe()}finally{Iu=0,vfe(),$o=0}}function gfe(){var t=Zd.now(),e=t-$m;e>L9&&(bv-=e,$m=t)}function vfe(){for(var t,e=Fm,r,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:Fm=r);Uc=t,l2(i)}function l2(t){if(!Iu){$c&&($c=clearTimeout($c));var e=t-$o;e>24?(t<1/0&&($c=setTimeout(pP,t-Zd.now()-bv)),Sc&&(Sc=clearInterval(Sc))):(Sc||($m=Zd.now(),Sc=setInterval(gfe,L9)),Iu=1,O9(pP))}}function mP(t,e,r){var i=new Um;return e=e==null?0:+e,i.restart(s=>{i.stop(),t(s+e)},e,r),i}var yfe=_v("start","end","cancel","interrupt"),_fe=[],V9=0,gP=1,u2=2,Cp=3,vP=4,c2=5,kp=6;function xv(t,e,r,i,s,a){var o=t.__transition;if(!o)t.__transition={};else if(r in o)return;wfe(t,r,{name:e,index:i,group:s,on:yfe,tween:_fe,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:V9})}function rI(t,e){var r=Ei(t,e);if(r.state>V9)throw new Error("too late; already scheduled");return r}function Qi(t,e){var r=Ei(t,e);if(r.state>Cp)throw new Error("too late; already running");return r}function Ei(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function wfe(t,e,r){var i=t.__transition,s;i[e]=r,r.timer=j9(a,0,r.time);function a(c){r.state=gP,r.timer.restart(o,r.delay,r.time),r.delay<=c&&o(c-r.delay)}function o(c){var d,h,f,m;if(r.state!==gP)return u();for(d in i)if(m=i[d],m.name===r.name){if(m.state===Cp)return mP(o);m.state===vP?(m.state=kp,m.timer.stop(),m.on.call("interrupt",t,t.__data__,m.index,m.group),delete i[d]):+d<e&&(m.state=kp,m.timer.stop(),m.on.call("cancel",t,t.__data__,m.index,m.group),delete i[d])}if(mP(function(){r.state===Cp&&(r.state=vP,r.timer.restart(l,r.delay,r.time),l(c))}),r.state=u2,r.on.call("start",t,t.__data__,r.index,r.group),r.state===u2){for(r.state=Cp,s=new Array(f=r.tween.length),d=0,h=-1;d<f;++d)(m=r.tween[d].value.call(t,t.__data__,r.index,r.group))&&(s[++h]=m);s.length=h+1}}function l(c){for(var d=c<r.duration?r.ease.call(null,c/r.duration):(r.timer.restart(u),r.state=c2,1),h=-1,f=s.length;++h<f;)s[h].call(t,d);r.state===c2&&(r.on.call("end",t,t.__data__,r.index,r.group),u())}function u(){r.state=kp,r.timer.stop(),delete i[e];for(var c in i)return;delete t.__transition}}function Np(t,e){var r=t.__transition,i,s,a=!0,o;if(r){e=e==null?null:e+"";for(o in r){if((i=r[o]).name!==e){a=!1;continue}s=i.state>u2&&i.state<c2,i.state=kp,i.timer.stop(),i.on.call(s?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete r[o]}a&&delete t.__transition}}function bfe(t){return this.each(function(){Np(this,t)})}function xfe(t,e){var r,i;return function(){var s=Qi(this,t),a=s.tween;if(a!==r){i=r=a;for(var o=0,l=i.length;o<l;++o)if(i[o].name===e){i=i.slice(),i.splice(o,1);break}}s.tween=i}}function Efe(t,e,r){var i,s;if(typeof r!="function")throw new Error;return function(){var a=Qi(this,t),o=a.tween;if(o!==i){s=(i=o).slice();for(var l={name:e,value:r},u=0,c=s.length;u<c;++u)if(s[u].name===e){s[u]=l;break}u===c&&s.push(l)}a.tween=s}}function Sfe(t,e){var r=this._id;if(t+="",arguments.length<2){for(var i=Ei(this.node(),r).tween,s=0,a=i.length,o;s<a;++s)if((o=i[s]).name===t)return o.value;return null}return this.each((e==null?xfe:Efe)(r,t,e))}function iI(t,e,r){var i=t._id;return t.each(function(){var s=Qi(this,i);(s.value||(s.value={}))[e]=r.apply(this,arguments)}),function(s){return Ei(s,i).value[e]}}function F9(t,e){var r;return(typeof e=="number"?ea:e instanceof Jd?dP:(r=Jd(e))?(e=r,dP):sfe)(t,e)}function Tfe(t){return function(){this.removeAttribute(t)}}function Ife(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Cfe(t,e,r){var i,s=r+"",a;return function(){var o=this.getAttribute(t);return o===s?null:o===i?a:a=e(i=o,r)}}function kfe(t,e,r){var i,s=r+"",a;return function(){var o=this.getAttributeNS(t.space,t.local);return o===s?null:o===i?a:a=e(i=o,r)}}function Nfe(t,e,r){var i,s,a;return function(){var o,l=r(this),u;return l==null?void this.removeAttribute(t):(o=this.getAttribute(t),u=l+"",o===u?null:o===i&&u===s?a:(s=u,a=e(i=o,l)))}}function Afe(t,e,r){var i,s,a;return function(){var o,l=r(this),u;return l==null?void this.removeAttributeNS(t.space,t.local):(o=this.getAttributeNS(t.space,t.local),u=l+"",o===u?null:o===i&&u===s?a:(s=u,a=e(i=o,l)))}}function Rfe(t,e){var r=wv(t),i=r==="transform"?ufe:F9;return this.attrTween(t,typeof e=="function"?(r.local?Afe:Nfe)(r,i,iI(this,"attr."+t,e)):e==null?(r.local?Ife:Tfe)(r):(r.local?kfe:Cfe)(r,i,e))}function Pfe(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function Dfe(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function Mfe(t,e){var r,i;function s(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Dfe(t,a)),r}return s._value=e,s}function Lfe(t,e){var r,i;function s(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Pfe(t,a)),r}return s._value=e,s}function Ofe(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var i=wv(t);return this.tween(r,(i.local?Mfe:Lfe)(i,e))}function jfe(t,e){return function(){rI(this,t).delay=+e.apply(this,arguments)}}function Vfe(t,e){return e=+e,function(){rI(this,t).delay=e}}function Ffe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?jfe:Vfe)(e,t)):Ei(this.node(),e).delay}function $fe(t,e){return function(){Qi(this,t).duration=+e.apply(this,arguments)}}function Ufe(t,e){return e=+e,function(){Qi(this,t).duration=e}}function Bfe(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?$fe:Ufe)(e,t)):Ei(this.node(),e).duration}function zfe(t,e){if(typeof e!="function")throw new Error;return function(){Qi(this,t).ease=e}}function qfe(t){var e=this._id;return arguments.length?this.each(zfe(e,t)):Ei(this.node(),e).ease}function Hfe(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;Qi(this,t).ease=r}}function Wfe(t){if(typeof t!="function")throw new Error;return this.each(Hfe(this._id,t))}function Gfe(t){typeof t!="function"&&(t=v9(t));for(var e=this._groups,r=e.length,i=new Array(r),s=0;s<r;++s)for(var a=e[s],o=a.length,l=i[s]=[],u,c=0;c<o;++c)(u=a[c])&&t.call(u,u.__data__,c,a)&&l.push(u);return new Rs(i,this._parents,this._name,this._id)}function Kfe(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,i=e.length,s=r.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var u=e[l],c=r[l],d=u.length,h=o[l]=new Array(d),f,m=0;m<d;++m)(f=u[m]||c[m])&&(h[m]=f);for(;l<i;++l)o[l]=e[l];return new Rs(o,this._parents,this._name,this._id)}function Yfe(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function Xfe(t,e,r){var i,s,a=Yfe(e)?rI:Qi;return function(){var o=a(this,t),l=o.on;l!==i&&(s=(i=l).copy()).on(e,r),o.on=s}}function Qfe(t,e){var r=this._id;return arguments.length<2?Ei(this.node(),r).on.on(t):this.each(Xfe(r,t,e))}function Jfe(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function Zfe(){return this.on("end.remove",Jfe(this._id))}function epe(t){var e=this._name,r=this._id;typeof t!="function"&&(t=ZT(t));for(var i=this._groups,s=i.length,a=new Array(s),o=0;o<s;++o)for(var l=i[o],u=l.length,c=a[o]=new Array(u),d,h,f=0;f<u;++f)(d=l[f])&&(h=t.call(d,d.__data__,f,l))&&("__data__"in d&&(h.__data__=d.__data__),c[f]=h,xv(c[f],e,r,f,c,Ei(d,r)));return new Rs(a,this._parents,e,r)}function tpe(t){var e=this._name,r=this._id;typeof t!="function"&&(t=g9(t));for(var i=this._groups,s=i.length,a=[],o=[],l=0;l<s;++l)for(var u=i[l],c=u.length,d,h=0;h<c;++h)if(d=u[h]){for(var f=t.call(d,d.__data__,h,u),m,v=Ei(d,r),y=0,b=f.length;y<b;++y)(m=f[y])&&xv(m,e,r,y,f,v);a.push(f),o.push(d)}return new Rs(a,o,e,r)}var npe=Vh.prototype.constructor;function rpe(){return new npe(this._groups,this._parents)}function ipe(t,e){var r,i,s;return function(){var a=Tu(this,t),o=(this.style.removeProperty(t),Tu(this,t));return a===o?null:a===r&&o===i?s:s=e(r=a,i=o)}}function $9(t){return function(){this.style.removeProperty(t)}}function spe(t,e,r){var i,s=r+"",a;return function(){var o=Tu(this,t);return o===s?null:o===i?a:a=e(i=o,r)}}function ape(t,e,r){var i,s,a;return function(){var o=Tu(this,t),l=r(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(t),Tu(this,t))),o===u?null:o===i&&u===s?a:(s=u,a=e(i=o,l))}}function ope(t,e){var r,i,s,a="style."+e,o="end."+a,l;return function(){var u=Qi(this,t),c=u.on,d=u.value[a]==null?l||(l=$9(e)):void 0;(c!==r||s!==d)&&(i=(r=c).copy()).on(o,s=d),u.on=i}}function lpe(t,e,r){var i=(t+="")=="transform"?lfe:F9;return e==null?this.styleTween(t,ipe(t,i)).on("end.style."+t,$9(t)):typeof e=="function"?this.styleTween(t,ape(t,i,iI(this,"style."+t,e))).each(ope(this._id,t)):this.styleTween(t,spe(t,i,e),r).on("end.style."+t,null)}function upe(t,e,r){return function(i){this.style.setProperty(t,e.call(this,i),r)}}function cpe(t,e,r){var i,s;function a(){var o=e.apply(this,arguments);return o!==s&&(i=(s=o)&&upe(t,o,r)),i}return a._value=e,a}function dpe(t,e,r){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,cpe(t,e,r??""))}function hpe(t){return function(){this.textContent=t}}function fpe(t){return function(){var e=t(this);this.textContent=e??""}}function ppe(t){return this.tween("text",typeof t=="function"?fpe(iI(this,"text",t)):hpe(t==null?"":t+""))}function mpe(t){return function(e){this.textContent=t.call(this,e)}}function gpe(t){var e,r;function i(){var s=t.apply(this,arguments);return s!==r&&(e=(r=s)&&mpe(s)),e}return i._value=t,i}function vpe(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,gpe(t))}function ype(){for(var t=this._name,e=this._id,r=U9(),i=this._groups,s=i.length,a=0;a<s;++a)for(var o=i[a],l=o.length,u,c=0;c<l;++c)if(u=o[c]){var d=Ei(u,e);xv(u,t,r,c,o,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Rs(i,this._parents,t,r)}function _pe(){var t,e,r=this,i=r._id,s=r.size();return new Promise(function(a,o){var l={value:o},u={value:function(){--s===0&&a()}};r.each(function(){var c=Qi(this,i),d=c.on;d!==t&&(e=(t=d).copy(),e._.cancel.push(l),e._.interrupt.push(l),e._.end.push(u)),c.on=e}),s===0&&a()})}var wpe=0;function Rs(t,e,r,i){this._groups=t,this._parents=e,this._name=r,this._id=i}function U9(){return++wpe}var is=Vh.prototype;Rs.prototype={constructor:Rs,select:epe,selectAll:tpe,selectChild:is.selectChild,selectChildren:is.selectChildren,filter:Gfe,merge:Kfe,selection:rpe,transition:ype,call:is.call,nodes:is.nodes,node:is.node,size:is.size,empty:is.empty,each:is.each,on:Qfe,attr:Rfe,attrTween:Ofe,style:lpe,styleTween:dpe,text:ppe,textTween:vpe,remove:Zfe,tween:Sfe,delay:Ffe,duration:Bfe,ease:qfe,easeVarying:Wfe,end:_pe,[Symbol.iterator]:is[Symbol.iterator]};function bpe(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var xpe={time:null,delay:0,duration:250,ease:bpe};function Epe(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function Spe(t){var e,r;t instanceof Rs?(e=t._id,t=t._name):(e=U9(),(r=xpe).time=nI(),t=t==null?null:t+"");for(var i=this._groups,s=i.length,a=0;a<s;++a)for(var o=i[a],l=o.length,u,c=0;c<l;++c)(u=o[c])&&xv(u,t,e,c,o,r||Epe(u,e));return new Rs(i,this._parents,t,e)}Vh.prototype.interrupt=bfe;Vh.prototype.transition=Spe;const Hf=t=>()=>t;function Tpe(t,{sourceEvent:e,target:r,transform:i,dispatch:s}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function fs(t,e,r){this.k=t,this.x=e,this.y=r}fs.prototype={constructor:fs,scale:function(t){return t===1?this:new fs(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new fs(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ws=new fs(1,0,0);fs.prototype;function x0(t){t.stopImmediatePropagation()}function Tc(t){t.preventDefault(),t.stopImmediatePropagation()}function Ipe(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Cpe(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function yP(){return this.__zoom||ws}function kpe(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Npe(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ape(t,e,r){var i=t.invertX(e[0][0])-r[0][0],s=t.invertX(e[1][0])-r[1][0],a=t.invertY(e[0][1])-r[0][1],o=t.invertY(e[1][1])-r[1][1];return t.translate(s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function B9(){var t=Ipe,e=Cpe,r=Ape,i=kpe,s=Npe,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=ffe,c=_v("start","zoom","end"),d,h,f,m=500,v=150,y=0,b=10;function _(j){j.property("__zoom",yP).on("wheel.zoom",D,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",I).filter(s).on("touchstart.zoom",x).on("touchmove.zoom",R).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}_.transform=function(j,$,U,Y){var q=j.selection?j.selection():j;q.property("__zoom",yP),j!==q?M(j,$,U,Y):q.interrupt().each(function(){O(this,arguments).event(Y).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},_.scaleBy=function(j,$,U,Y){_.scaleTo(j,function(){var q=this.__zoom.k,F=typeof $=="function"?$.apply(this,arguments):$;return q*F},U,Y)},_.scaleTo=function(j,$,U,Y){_.transform(j,function(){var q=e.apply(this,arguments),F=this.__zoom,W=U==null?N(q):typeof U=="function"?U.apply(this,arguments):U,Q=F.invert(W),H=typeof $=="function"?$.apply(this,arguments):$;return r(E(w(F,H),W,Q),q,o)},U,Y)},_.translateBy=function(j,$,U,Y){_.transform(j,function(){return r(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof U=="function"?U.apply(this,arguments):U),e.apply(this,arguments),o)},null,Y)},_.translateTo=function(j,$,U,Y,q){_.transform(j,function(){var F=e.apply(this,arguments),W=this.__zoom,Q=Y==null?N(F):typeof Y=="function"?Y.apply(this,arguments):Y;return r(ws.translate(Q[0],Q[1]).scale(W.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof U=="function"?-U.apply(this,arguments):-U),F,o)},Y,q)};function w(j,$){return $=Math.max(a[0],Math.min(a[1],$)),$===j.k?j:new fs($,j.x,j.y)}function E(j,$,U){var Y=$[0]-U[0]*j.k,q=$[1]-U[1]*j.k;return Y===j.x&&q===j.y?j:new fs(j.k,Y,q)}function N(j){return[(+j[0][0]+ +j[1][0])/2,(+j[0][1]+ +j[1][1])/2]}function M(j,$,U,Y){j.on("start.zoom",function(){O(this,arguments).event(Y).start()}).on("interrupt.zoom end.zoom",function(){O(this,arguments).event(Y).end()}).tween("zoom",function(){var q=this,F=arguments,W=O(q,F).event(Y),Q=e.apply(q,F),H=U==null?N(Q):typeof U=="function"?U.apply(q,F):U,X=Math.max(Q[1][0]-Q[0][0],Q[1][1]-Q[0][1]),J=q.__zoom,ee=typeof $=="function"?$.apply(q,F):$,se=u(J.invert(H).concat(X/J.k),ee.invert(H).concat(X/ee.k));return function(ce){if(ce===1)ce=ee;else{var Se=se(ce),Ee=X/Se[2];ce=new fs(Ee,H[0]-Se[0]*Ee,H[1]-Se[1]*Ee)}W.zoom(null,ce)}})}function O(j,$,U){return!U&&j.__zooming||new A(j,$)}function A(j,$){this.that=j,this.args=$,this.active=0,this.sourceEvent=null,this.extent=e.apply(j,$),this.taps=0}A.prototype={event:function(j){return j&&(this.sourceEvent=j),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(j,$){return this.mouse&&j!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&j!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&j!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(j){var $=Wr(this.that).datum();c.call(j,this.that,new Tpe(j,{sourceEvent:this.sourceEvent,target:_,transform:this.that.__zoom,dispatch:c}),$)}};function D(j,...$){if(!t.apply(this,arguments))return;var U=O(this,$).event(j),Y=this.__zoom,q=Math.max(a[0],Math.min(a[1],Y.k*Math.pow(2,i.apply(this,arguments)))),F=di(j);if(U.wheel)(U.mouse[0][0]!==F[0]||U.mouse[0][1]!==F[1])&&(U.mouse[1]=Y.invert(U.mouse[0]=F)),clearTimeout(U.wheel);else{if(Y.k===q)return;U.mouse=[F,Y.invert(F)],Np(this),U.start()}Tc(j),U.wheel=setTimeout(W,v),U.zoom("mouse",r(E(w(Y,q),U.mouse[0],U.mouse[1]),U.extent,o));function W(){U.wheel=null,U.end()}}function T(j,...$){if(f||!t.apply(this,arguments))return;var U=j.currentTarget,Y=O(this,$,!0).event(j),q=Wr(j.view).on("mousemove.zoom",H,!0).on("mouseup.zoom",X,!0),F=di(j,U),W=j.clientX,Q=j.clientY;C9(j.view),x0(j),Y.mouse=[F,this.__zoom.invert(F)],Np(this),Y.start();function H(J){if(Tc(J),!Y.moved){var ee=J.clientX-W,se=J.clientY-Q;Y.moved=ee*ee+se*se>y}Y.event(J).zoom("mouse",r(E(Y.that.__zoom,Y.mouse[0]=di(J,U),Y.mouse[1]),Y.extent,o))}function X(J){q.on("mousemove.zoom mouseup.zoom",null),k9(J.view,Y.moved),Tc(J),Y.event(J).end()}}function I(j,...$){if(t.apply(this,arguments)){var U=this.__zoom,Y=di(j.changedTouches?j.changedTouches[0]:j,this),q=U.invert(Y),F=U.k*(j.shiftKey?.5:2),W=r(E(w(U,F),Y,q),e.apply(this,$),o);Tc(j),l>0?Wr(this).transition().duration(l).call(M,W,Y,j):Wr(this).call(_.transform,W,Y,j)}}function x(j,...$){if(t.apply(this,arguments)){var U=j.touches,Y=U.length,q=O(this,$,j.changedTouches.length===Y).event(j),F,W,Q,H;for(x0(j),W=0;W<Y;++W)Q=U[W],H=di(Q,this),H=[H,this.__zoom.invert(H),Q.identifier],q.touch0?!q.touch1&&q.touch0[2]!==H[2]&&(q.touch1=H,q.taps=0):(q.touch0=H,F=!0,q.taps=1+!!d);d&&(d=clearTimeout(d)),F&&(q.taps<2&&(h=H[0],d=setTimeout(function(){d=null},m)),Np(this),q.start())}}function R(j,...$){if(this.__zooming){var U=O(this,$).event(j),Y=j.changedTouches,q=Y.length,F,W,Q,H;for(Tc(j),F=0;F<q;++F)W=Y[F],Q=di(W,this),U.touch0&&U.touch0[2]===W.identifier?U.touch0[0]=Q:U.touch1&&U.touch1[2]===W.identifier&&(U.touch1[0]=Q);if(W=U.that.__zoom,U.touch1){var X=U.touch0[0],J=U.touch0[1],ee=U.touch1[0],se=U.touch1[1],ce=(ce=ee[0]-X[0])*ce+(ce=ee[1]-X[1])*ce,Se=(Se=se[0]-J[0])*Se+(Se=se[1]-J[1])*Se;W=w(W,Math.sqrt(ce/Se)),Q=[(X[0]+ee[0])/2,(X[1]+ee[1])/2],H=[(J[0]+se[0])/2,(J[1]+se[1])/2]}else if(U.touch0)Q=U.touch0[0],H=U.touch0[1];else return;U.zoom("touch",r(E(W,Q,H),U.extent,o))}}function P(j,...$){if(this.__zooming){var U=O(this,$).event(j),Y=j.changedTouches,q=Y.length,F,W;for(x0(j),f&&clearTimeout(f),f=setTimeout(function(){f=null},m),F=0;F<q;++F)W=Y[F],U.touch0&&U.touch0[2]===W.identifier?delete U.touch0:U.touch1&&U.touch1[2]===W.identifier&&delete U.touch1;if(U.touch1&&!U.touch0&&(U.touch0=U.touch1,delete U.touch1),U.touch0)U.touch0[1]=this.__zoom.invert(U.touch0[0]);else if(U.end(),U.taps===2&&(W=di(W,this),Math.hypot(h[0]-W[0],h[1]-W[1])<b)){var Q=Wr(this).on("dblclick.zoom");Q&&Q.apply(this,arguments)}}}return _.wheelDelta=function(j){return arguments.length?(i=typeof j=="function"?j:Hf(+j),_):i},_.filter=function(j){return arguments.length?(t=typeof j=="function"?j:Hf(!!j),_):t},_.touchable=function(j){return arguments.length?(s=typeof j=="function"?j:Hf(!!j),_):s},_.extent=function(j){return arguments.length?(e=typeof j=="function"?j:Hf([[+j[0][0],+j[0][1]],[+j[1][0],+j[1][1]]]),_):e},_.scaleExtent=function(j){return arguments.length?(a[0]=+j[0],a[1]=+j[1],_):[a[0],a[1]]},_.translateExtent=function(j){return arguments.length?(o[0][0]=+j[0][0],o[1][0]=+j[1][0],o[0][1]=+j[0][1],o[1][1]=+j[1][1],_):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},_.constrain=function(j){return arguments.length?(r=j,_):r},_.duration=function(j){return arguments.length?(l=+j,_):l},_.interpolate=function(j){return arguments.length?(u=j,_):u},_.on=function(){var j=c.on.apply(c,arguments);return j===c?_:j},_.clickDistance=function(j){return arguments.length?(y=(j=+j)*j,_):Math.sqrt(y)},_.tapDistance=function(j){return arguments.length?(b=+j,_):b},_}const Ev=S.createContext(null),Rpe=Ev.Provider,Ps={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},z9=Ps.error001();function Nt(t,e){const r=S.useContext(Ev);if(r===null)throw new Error(z9);return p9(r,t,e)}const gn=()=>{const t=S.useContext(Ev);if(t===null)throw new Error(z9);return S.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},Ppe=t=>t.userSelectionActive?"none":"all";function Yr({position:t,children:e,className:r,style:i,...s}){const a=Nt(Ppe),o=`${t}`.split("-");return te.createElement("div",{className:On(["react-flow__panel",r,...o]),style:{...i,pointerEvents:a},...s},e)}function Dpe({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:te.createElement(Yr,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},te.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Mpe=({x:t,y:e,label:r,labelStyle:i={},labelShowBg:s=!0,labelBgStyle:a={},labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:u,className:c,...d})=>{const h=S.useRef(null),[f,m]=S.useState({x:0,y:0,width:0,height:0}),v=On(["react-flow__edge-textwrapper",c]);return S.useEffect(()=>{if(h.current){const y=h.current.getBBox();m({x:y.x,y:y.y,width:y.width,height:y.height})}},[r]),typeof r>"u"||!r?null:te.createElement("g",{transform:`translate(${t-f.width/2} ${e-f.height/2})`,className:v,visibility:f.width?"visible":"hidden",...d},s&&te.createElement("rect",{width:f.width+2*o[0],x:-o[0],y:-o[1],height:f.height+2*o[1],className:"react-flow__edge-textbg",style:a,rx:l,ry:l}),te.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:h,style:i},r),u)};var Lpe=S.memo(Mpe);const sI=t=>({width:t.offsetWidth,height:t.offsetHeight}),Cu=(t,e=0,r=1)=>Math.min(Math.max(t,e),r),aI=(t={x:0,y:0},e)=>({x:Cu(t.x,e[0][0],e[1][0]),y:Cu(t.y,e[0][1],e[1][1])}),_P=(t,e,r)=>t<e?Cu(Math.abs(t-e),1,50)/50:t>r?-Cu(Math.abs(t-r),1,50)/50:0,q9=(t,e)=>{const r=_P(t.x,35,e.width-35)*20,i=_P(t.y,35,e.height-35)*20;return[r,i]},H9=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},W9=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),eh=({x:t,y:e,width:r,height:i})=>({x:t,y:e,x2:t+r,y2:e+i}),G9=({x:t,y:e,x2:r,y2:i})=>({x:t,y:e,width:r-t,height:i-e}),wP=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),Ope=(t,e)=>G9(W9(eh(t),eh(e))),d2=(t,e)=>{const r=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(r*i)},jpe=t=>Xr(t.width)&&Xr(t.height)&&Xr(t.x)&&Xr(t.y),Xr=t=>!isNaN(t)&&isFinite(t),Yt=Symbol.for("internals"),K9=["Enter"," ","Escape"],Vpe=(t,e)=>{},Fpe=t=>"nativeEvent"in t;function h2(t){var s,a;const e=Fpe(t)?t.nativeEvent:t,r=((a=(s=e.composedPath)==null?void 0:s.call(e))==null?void 0:a[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const Y9=t=>"clientX"in t,Na=(t,e)=>{var a,o;const r=Y9(t),i=r?t.clientX:(a=t.touches)==null?void 0:a[0].clientX,s=r?t.clientY:(o=t.touches)==null?void 0:o[0].clientY;return{x:i-((e==null?void 0:e.left)??0),y:s-((e==null?void 0:e.top)??0)}},Bm=()=>{var t;return typeof navigator<"u"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},$h=({id:t,path:e,labelX:r,labelY:i,label:s,labelStyle:a,labelShowBg:o,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:d,markerEnd:h,markerStart:f,interactionWidth:m=20})=>te.createElement(te.Fragment,null,te.createElement("path",{id:t,style:d,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:h,markerStart:f}),m&&te.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:m,className:"react-flow__edge-interaction"}),s&&Xr(r)&&Xr(i)?te.createElement(Lpe,{x:r,y:i,label:s,labelStyle:a,labelShowBg:o,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c}):null);$h.displayName="BaseEdge";function Ic(t,e,r){return r===void 0?r:i=>{const s=e().edges.find(a=>a.id===t);s&&r(i,{...s})}}function X9({sourceX:t,sourceY:e,targetX:r,targetY:i}){const s=Math.abs(r-t)/2,a=r<t?r+s:r-s,o=Math.abs(i-e)/2,l=i<e?i+o:i-o;return[a,l,s,o]}function Q9({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:s,sourceControlY:a,targetControlX:o,targetControlY:l}){const u=t*.125+s*.375+o*.375+r*.125,c=e*.125+a*.375+l*.375+i*.125,d=Math.abs(u-t),h=Math.abs(c-e);return[u,c,d,h]}var Uo;(function(t){t.Strict="strict",t.Loose="loose"})(Uo||(Uo={}));var wo;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(wo||(wo={}));var th;(function(t){t.Partial="partial",t.Full="full"})(th||(th={}));var la;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(la||(la={}));var zm;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(zm||(zm={}));var De;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(De||(De={}));function bP({pos:t,x1:e,y1:r,x2:i,y2:s}){return t===De.Left||t===De.Right?[.5*(e+i),r]:[e,.5*(r+s)]}function J9({sourceX:t,sourceY:e,sourcePosition:r=De.Bottom,targetX:i,targetY:s,targetPosition:a=De.Top}){const[o,l]=bP({pos:r,x1:t,y1:e,x2:i,y2:s}),[u,c]=bP({pos:a,x1:i,y1:s,x2:t,y2:e}),[d,h,f,m]=Q9({sourceX:t,sourceY:e,targetX:i,targetY:s,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:c});return[`M${t},${e} C${o},${l} ${u},${c} ${i},${s}`,d,h,f,m]}const oI=S.memo(({sourceX:t,sourceY:e,targetX:r,targetY:i,sourcePosition:s=De.Bottom,targetPosition:a=De.Top,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:v,interactionWidth:y})=>{const[b,_,w]=J9({sourceX:t,sourceY:e,sourcePosition:s,targetX:r,targetY:i,targetPosition:a});return te.createElement($h,{path:b,labelX:_,labelY:w,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:v,interactionWidth:y})});oI.displayName="SimpleBezierEdge";const xP={[De.Left]:{x:-1,y:0},[De.Right]:{x:1,y:0},[De.Top]:{x:0,y:-1},[De.Bottom]:{x:0,y:1}},$pe=({source:t,sourcePosition:e=De.Bottom,target:r})=>e===De.Left||e===De.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1},EP=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function Upe({source:t,sourcePosition:e=De.Bottom,target:r,targetPosition:i=De.Top,center:s,offset:a}){const o=xP[e],l=xP[i],u={x:t.x+o.x*a,y:t.y+o.y*a},c={x:r.x+l.x*a,y:r.y+l.y*a},d=$pe({source:u,sourcePosition:e,target:c}),h=d.x!==0?"x":"y",f=d[h];let m=[],v,y;const b={x:0,y:0},_={x:0,y:0},[w,E,N,M]=X9({sourceX:t.x,sourceY:t.y,targetX:r.x,targetY:r.y});if(o[h]*l[h]===-1){v=s.x??w,y=s.y??E;const A=[{x:v,y:u.y},{x:v,y:c.y}],D=[{x:u.x,y},{x:c.x,y}];o[h]===f?m=h==="x"?A:D:m=h==="x"?D:A}else{const A=[{x:u.x,y:c.y}],D=[{x:c.x,y:u.y}];if(h==="x"?m=o.x===f?D:A:m=o.y===f?A:D,e===i){const P=Math.abs(t[h]-r[h]);if(P<=a){const j=Math.min(a-1,a-P);o[h]===f?b[h]=(u[h]>t[h]?-1:1)*j:_[h]=(c[h]>r[h]?-1:1)*j}}if(e!==i){const P=h==="x"?"y":"x",j=o[h]===l[P],$=u[P]>c[P],U=u[P]<c[P];(o[h]===1&&(!j&&$||j&&U)||o[h]!==1&&(!j&&U||j&&$))&&(m=h==="x"?A:D)}const T={x:u.x+b.x,y:u.y+b.y},I={x:c.x+_.x,y:c.y+_.y},x=Math.max(Math.abs(T.x-m[0].x),Math.abs(I.x-m[0].x)),R=Math.max(Math.abs(T.y-m[0].y),Math.abs(I.y-m[0].y));x>=R?(v=(T.x+I.x)/2,y=m[0].y):(v=m[0].x,y=(T.y+I.y)/2)}return[[t,{x:u.x+b.x,y:u.y+b.y},...m,{x:c.x+_.x,y:c.y+_.y},r],v,y,N,M]}function Bpe(t,e,r,i){const s=Math.min(EP(t,e)/2,EP(e,r)/2,i),{x:a,y:o}=e;if(t.x===a&&a===r.x||t.y===o&&o===r.y)return`L${a} ${o}`;if(t.y===o){const c=t.x<r.x?-1:1,d=t.y<r.y?1:-1;return`L ${a+s*c},${o}Q ${a},${o} ${a},${o+s*d}`}const l=t.x<r.x?1:-1,u=t.y<r.y?-1:1;return`L ${a},${o+s*u}Q ${a},${o} ${a+s*l},${o}`}function f2({sourceX:t,sourceY:e,sourcePosition:r=De.Bottom,targetX:i,targetY:s,targetPosition:a=De.Top,borderRadius:o=5,centerX:l,centerY:u,offset:c=20}){const[d,h,f,m,v]=Upe({source:{x:t,y:e},sourcePosition:r,target:{x:i,y:s},targetPosition:a,center:{x:l,y:u},offset:c});return[d.reduce((b,_,w)=>{let E="";return w>0&&w<d.length-1?E=Bpe(d[w-1],_,d[w+1],o):E=`${w===0?"M":"L"}${_.x} ${_.y}`,b+=E,b},""),h,f,m,v]}const Sv=S.memo(({sourceX:t,sourceY:e,targetX:r,targetY:i,label:s,labelStyle:a,labelShowBg:o,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:d,sourcePosition:h=De.Bottom,targetPosition:f=De.Top,markerEnd:m,markerStart:v,pathOptions:y,interactionWidth:b})=>{const[_,w,E]=f2({sourceX:t,sourceY:e,sourcePosition:h,targetX:r,targetY:i,targetPosition:f,borderRadius:y==null?void 0:y.borderRadius,offset:y==null?void 0:y.offset});return te.createElement($h,{path:_,labelX:w,labelY:E,label:s,labelStyle:a,labelShowBg:o,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:d,markerEnd:m,markerStart:v,interactionWidth:b})});Sv.displayName="SmoothStepEdge";const Tv=S.memo(t=>{var e;return te.createElement(Sv,{...t,pathOptions:S.useMemo(()=>{var r;return{borderRadius:0,offset:(r=t.pathOptions)==null?void 0:r.offset}},[(e=t.pathOptions)==null?void 0:e.offset])})});Tv.displayName="StepEdge";function zpe({sourceX:t,sourceY:e,targetX:r,targetY:i}){const[s,a,o,l]=X9({sourceX:t,sourceY:e,targetX:r,targetY:i});return[`M ${t},${e}L ${r},${i}`,s,a,o,l]}const Iv=S.memo(({sourceX:t,sourceY:e,targetX:r,targetY:i,label:s,labelStyle:a,labelShowBg:o,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:d,markerEnd:h,markerStart:f,interactionWidth:m})=>{const[v,y,b]=zpe({sourceX:t,sourceY:e,targetX:r,targetY:i});return te.createElement($h,{path:v,labelX:y,labelY:b,label:s,labelStyle:a,labelShowBg:o,labelBgStyle:l,labelBgPadding:u,labelBgBorderRadius:c,style:d,markerEnd:h,markerStart:f,interactionWidth:m})});Iv.displayName="StraightEdge";function Wf(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function SP({pos:t,x1:e,y1:r,x2:i,y2:s,c:a}){switch(t){case De.Left:return[e-Wf(e-i,a),r];case De.Right:return[e+Wf(i-e,a),r];case De.Top:return[e,r-Wf(r-s,a)];case De.Bottom:return[e,r+Wf(s-r,a)]}}function Z9({sourceX:t,sourceY:e,sourcePosition:r=De.Bottom,targetX:i,targetY:s,targetPosition:a=De.Top,curvature:o=.25}){const[l,u]=SP({pos:r,x1:t,y1:e,x2:i,y2:s,c:o}),[c,d]=SP({pos:a,x1:i,y1:s,x2:t,y2:e,c:o}),[h,f,m,v]=Q9({sourceX:t,sourceY:e,targetX:i,targetY:s,sourceControlX:l,sourceControlY:u,targetControlX:c,targetControlY:d});return[`M${t},${e} C${l},${u} ${c},${d} ${i},${s}`,h,f,m,v]}const nh=S.memo(({sourceX:t,sourceY:e,targetX:r,targetY:i,sourcePosition:s=De.Bottom,targetPosition:a=De.Top,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:v,pathOptions:y,interactionWidth:b})=>{const[_,w,E]=Z9({sourceX:t,sourceY:e,sourcePosition:s,targetX:r,targetY:i,targetPosition:a,curvature:y==null?void 0:y.curvature});return te.createElement($h,{path:_,labelX:w,labelY:E,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:c,labelBgPadding:d,labelBgBorderRadius:h,style:f,markerEnd:m,markerStart:v,interactionWidth:b})});nh.displayName="BezierEdge";const lI=S.createContext(null),qpe=lI.Provider;lI.Consumer;const Hpe=()=>S.useContext(lI),Wpe=t=>"id"in t&&"source"in t&&"target"in t,Gpe=({source:t,sourceHandle:e,target:r,targetHandle:i})=>`reactflow__edge-${t}${e||""}-${r}${i||""}`,p2=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`,Kpe=(t,e)=>e.some(r=>r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)),uI=(t,e)=>{if(!t.source||!t.target)return e;let r;return Wpe(t)?r={...t}:r={...t,id:Gpe(t)},Kpe(r,e)?e:e.concat(r)},m2=({x:t,y:e},[r,i,s],a,[o,l])=>{const u={x:(t-r)/s,y:(e-i)/s};return a?{x:o*Math.round(u.x/o),y:l*Math.round(u.y/l)}:u},e$=({x:t,y:e},[r,i,s])=>({x:t*s+r,y:e*s+i}),To=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=(t.width??0)*e[0],i=(t.height??0)*e[1],s={x:t.position.x-r,y:t.position.y-i};return{...s,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-r,y:t.positionAbsolute.y-i}:s}},Cv=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const r=t.reduce((i,s)=>{const{x:a,y:o}=To(s,e).positionAbsolute;return W9(i,eh({x:a,y:o,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return G9(r)},t$=(t,e,[r,i,s]=[0,0,1],a=!1,o=!1,l=[0,0])=>{const u={x:(e.x-r)/s,y:(e.y-i)/s,width:e.width/s,height:e.height/s},c=[];return t.forEach(d=>{const{width:h,height:f,selectable:m=!0,hidden:v=!1}=d;if(o&&!m||v)return!1;const{positionAbsolute:y}=To(d,l),b={x:y.x,y:y.y,width:h||0,height:f||0},_=d2(u,b),w=typeof h>"u"||typeof f>"u"||h===null||f===null,E=a&&_>0,N=(h||0)*(f||0);(w||E||_>=N||d.dragging)&&c.push(d)}),c},n$=(t,e)=>{const r=t.map(i=>i.id);return e.filter(i=>r.includes(i.source)||r.includes(i.target))},r$=(t,e,r,i,s,a=.1)=>{const o=e/(t.width*(1+a)),l=r/(t.height*(1+a)),u=Math.min(o,l),c=Cu(u,i,s),d=t.x+t.width/2,h=t.y+t.height/2,f=e/2-d*c,m=r/2-h*c;return{x:f,y:m,zoom:c}},co=(t,e=0)=>t.transition().duration(e);function TP(t,e,r,i){return(e[r]||[]).reduce((s,a)=>{var o,l;return`${t.id}-${a.id}-${r}`!==i&&s.push({id:a.id||null,type:r,nodeId:t.id,x:(((o=t.positionAbsolute)==null?void 0:o.x)??0)+a.x+a.width/2,y:(((l=t.positionAbsolute)==null?void 0:l.y)??0)+a.y+a.height/2}),s},[])}function Ype(t,e,r,i,s,a){const{x:o,y:l}=Na(t),c=e.elementsFromPoint(o,l).find(v=>v.classList.contains("react-flow__handle"));if(c){const v=c.getAttribute("data-nodeid");if(v){const y=cI(void 0,c),b=c.getAttribute("data-handleid"),_=a({nodeId:v,id:b,type:y});if(_){const w=s.find(E=>E.nodeId===v&&E.type===y&&E.id===b);return{handle:{id:b,type:y,nodeId:v,x:(w==null?void 0:w.x)||r.x,y:(w==null?void 0:w.y)||r.y},validHandleResult:_}}}}let d=[],h=1/0;if(s.forEach(v=>{const y=Math.sqrt((v.x-r.x)**2+(v.y-r.y)**2);if(y<=i){const b=a(v);y<=h&&(y<h?d=[{handle:v,validHandleResult:b}]:y===h&&d.push({handle:v,validHandleResult:b}),h=y)}}),!d.length)return{handle:null,validHandleResult:i$()};if(d.length===1)return d[0];const f=d.some(({validHandleResult:v})=>v.isValid),m=d.some(({handle:v})=>v.type==="target");return d.find(({handle:v,validHandleResult:y})=>m?v.type==="target":f?y.isValid:!0)||d[0]}const Xpe={source:null,target:null,sourceHandle:null,targetHandle:null},i$=()=>({handleDomNode:null,isValid:!1,connection:Xpe,endHandle:null});function s$(t,e,r,i,s,a,o){const l=s==="target",u=o.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),c={...i$(),handleDomNode:u};if(u){const d=cI(void 0,u),h=u.getAttribute("data-nodeid"),f=u.getAttribute("data-handleid"),m=u.classList.contains("connectable"),v=u.classList.contains("connectableend"),y={source:l?h:r,sourceHandle:l?f:i,target:l?r:h,targetHandle:l?i:f};c.connection=y,m&&v&&(e===Uo.Strict?l&&d==="source"||!l&&d==="target":h!==r||f!==i)&&(c.endHandle={nodeId:h,handleId:f,type:d},c.isValid=a(y))}return c}function Qpe({nodes:t,nodeId:e,handleId:r,handleType:i}){return t.reduce((s,a)=>{if(a[Yt]){const{handleBounds:o}=a[Yt];let l=[],u=[];o&&(l=TP(a,o,"source",`${e}-${r}-${i}`),u=TP(a,o,"target",`${e}-${r}-${i}`)),s.push(...l,...u)}return s},[])}function cI(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function E0(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Jpe(t,e){let r=null;return e?r="valid":t&&!e&&(r="invalid"),r}function a$({event:t,handleId:e,nodeId:r,onConnect:i,isTarget:s,getState:a,setState:o,isValidConnection:l,edgeUpdaterType:u,onReconnectEnd:c}){const d=H9(t.target),{connectionMode:h,domNode:f,autoPanOnConnect:m,connectionRadius:v,onConnectStart:y,panBy:b,getNodes:_,cancelConnection:w}=a();let E=0,N;const{x:M,y:O}=Na(t),A=d==null?void 0:d.elementFromPoint(M,O),D=cI(u,A),T=f==null?void 0:f.getBoundingClientRect();if(!T||!D)return;let I,x=Na(t,T),R=!1,P=null,j=!1,$=null;const U=Qpe({nodes:_(),nodeId:r,handleId:e,handleType:D}),Y=()=>{if(!m)return;const[W,Q]=q9(x,T);b({x:W,y:Q}),E=requestAnimationFrame(Y)};o({connectionPosition:x,connectionStatus:null,connectionNodeId:r,connectionHandleId:e,connectionHandleType:D,connectionStartHandle:{nodeId:r,handleId:e,type:D},connectionEndHandle:null}),y==null||y(t,{nodeId:r,handleId:e,handleType:D});function q(W){const{transform:Q}=a();x=Na(W,T);const{handle:H,validHandleResult:X}=Ype(W,d,m2(x,Q,!1,[1,1]),v,U,J=>s$(J,h,r,e,s?"target":"source",l,d));if(N=H,R||(Y(),R=!0),$=X.handleDomNode,P=X.connection,j=X.isValid,o({connectionPosition:N&&j?e$({x:N.x,y:N.y},Q):x,connectionStatus:Jpe(!!N,j),connectionEndHandle:X.endHandle}),!N&&!j&&!$)return E0(I);P.source!==P.target&&$&&(E0(I),I=$,$.classList.add("connecting","react-flow__handle-connecting"),$.classList.toggle("valid",j),$.classList.toggle("react-flow__handle-valid",j))}function F(W){var Q,H;(N||$)&&P&&j&&(i==null||i(P)),(H=(Q=a()).onConnectEnd)==null||H.call(Q,W),u&&(c==null||c(W)),E0(I),w(),cancelAnimationFrame(E),R=!1,j=!1,P=null,$=null,d.removeEventListener("mousemove",q),d.removeEventListener("mouseup",F),d.removeEventListener("touchmove",q),d.removeEventListener("touchend",F)}d.addEventListener("mousemove",q),d.addEventListener("mouseup",F),d.addEventListener("touchmove",q),d.addEventListener("touchend",F)}const IP=()=>!0,Zpe=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),eme=(t,e,r)=>i=>{const{connectionStartHandle:s,connectionEndHandle:a,connectionClickStartHandle:o}=i;return{connecting:(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===r||(a==null?void 0:a.nodeId)===t&&(a==null?void 0:a.handleId)===e&&(a==null?void 0:a.type)===r,clickConnecting:(o==null?void 0:o.nodeId)===t&&(o==null?void 0:o.handleId)===e&&(o==null?void 0:o.type)===r}},o$=S.forwardRef(({type:t="source",position:e=De.Top,isValidConnection:r,isConnectable:i=!0,isConnectableStart:s=!0,isConnectableEnd:a=!0,id:o,onConnect:l,children:u,className:c,onMouseDown:d,onTouchStart:h,...f},m)=>{var T,I;const v=o||null,y=t==="target",b=gn(),_=Hpe(),{connectOnClick:w,noPanClassName:E}=Nt(Zpe,Cn),{connecting:N,clickConnecting:M}=Nt(eme(_,v,t),Cn);_||(I=(T=b.getState()).onError)==null||I.call(T,"010",Ps.error010());const O=x=>{const{defaultEdgeOptions:R,onConnect:P,hasDefaultEdges:j}=b.getState(),$={...R,...x};if(j){const{edges:U,setEdges:Y}=b.getState();Y(uI($,U))}P==null||P($),l==null||l($)},A=x=>{if(!_)return;const R=Y9(x);s&&(R&&x.button===0||!R)&&a$({event:x,handleId:v,nodeId:_,onConnect:O,isTarget:y,getState:b.getState,setState:b.setState,isValidConnection:r||b.getState().isValidConnection||IP}),R?d==null||d(x):h==null||h(x)},D=x=>{const{onClickConnectStart:R,onClickConnectEnd:P,connectionClickStartHandle:j,connectionMode:$,isValidConnection:U}=b.getState();if(!_||!j&&!s)return;if(!j){R==null||R(x,{nodeId:_,handleId:v,handleType:t}),b.setState({connectionClickStartHandle:{nodeId:_,type:t,handleId:v}});return}const Y=H9(x.target),q=r||U||IP,{connection:F,isValid:W}=s$({nodeId:_,id:v,type:t},$,j.nodeId,j.handleId||null,j.type,q,Y);W&&O(F),P==null||P(x),b.setState({connectionClickStartHandle:null})};return te.createElement("div",{"data-handleid":v,"data-nodeid":_,"data-handlepos":e,"data-id":`${_}-${v}-${t}`,className:On(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",E,c,{source:!y,target:y,connectable:i,connectablestart:s,connectableend:a,connecting:M,connectionindicator:i&&(s&&!N||a&&N)}]),onMouseDown:A,onTouchStart:A,onClick:w?D:void 0,ref:m,...f},u)});o$.displayName="Handle";var Xn=S.memo(o$);const l$=({data:t,isConnectable:e,targetPosition:r=De.Top,sourcePosition:i=De.Bottom})=>te.createElement(te.Fragment,null,te.createElement(Xn,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label,te.createElement(Xn,{type:"source",position:i,isConnectable:e}));l$.displayName="DefaultNode";var g2=S.memo(l$);const u$=({data:t,isConnectable:e,sourcePosition:r=De.Bottom})=>te.createElement(te.Fragment,null,t==null?void 0:t.label,te.createElement(Xn,{type:"source",position:r,isConnectable:e}));u$.displayName="InputNode";var c$=S.memo(u$);const d$=({data:t,isConnectable:e,targetPosition:r=De.Top})=>te.createElement(te.Fragment,null,te.createElement(Xn,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label);d$.displayName="OutputNode";var h$=S.memo(d$);const dI=()=>null;dI.displayName="GroupNode";const tme=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected).map(e=>({...e}))}),Gf=t=>t.id;function nme(t,e){return Cn(t.selectedNodes.map(Gf),e.selectedNodes.map(Gf))&&Cn(t.selectedEdges.map(Gf),e.selectedEdges.map(Gf))}const f$=S.memo(({onSelectionChange:t})=>{const e=gn(),{selectedNodes:r,selectedEdges:i}=Nt(tme,nme);return S.useEffect(()=>{const s={nodes:r,edges:i};t==null||t(s),e.getState().onSelectionChange.forEach(a=>a(s))},[r,i,t]),null});f$.displayName="SelectionListener";const rme=t=>!!t.onSelectionChange;function ime({onSelectionChange:t}){const e=Nt(rme);return t||e?te.createElement(f$,{onSelectionChange:t}):null}const sme=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function gl(t,e){S.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function Ze(t,e,r){S.useEffect(()=>{typeof e<"u"&&r({[t]:e})},[e])}const ame=({nodes:t,edges:e,defaultNodes:r,defaultEdges:i,onConnect:s,onConnectStart:a,onConnectEnd:o,onClickConnectStart:l,onClickConnectEnd:u,nodesDraggable:c,nodesConnectable:d,nodesFocusable:h,edgesFocusable:f,edgesUpdatable:m,elevateNodesOnSelect:v,minZoom:y,maxZoom:b,nodeExtent:_,onNodesChange:w,onEdgesChange:E,elementsSelectable:N,connectionMode:M,snapGrid:O,snapToGrid:A,translateExtent:D,connectOnClick:T,defaultEdgeOptions:I,fitView:x,fitViewOptions:R,onNodesDelete:P,onEdgesDelete:j,onNodeDrag:$,onNodeDragStart:U,onNodeDragStop:Y,onSelectionDrag:q,onSelectionDragStart:F,onSelectionDragStop:W,noPanClassName:Q,nodeOrigin:H,rfId:X,autoPanOnConnect:J,autoPanOnNodeDrag:ee,onError:se,connectionRadius:ce,isValidConnection:Se,nodeDragThreshold:Ee})=>{const{setNodes:ie,setEdges:ue,setDefaultNodesAndEdges:ge,setMinZoom:ke,setMaxZoom:Re,setTranslateExtent:_e,setNodeExtent:V,reset:B}=Nt(sme,Cn),G=gn();return S.useEffect(()=>{const K=i==null?void 0:i.map(re=>({...re,...I}));return ge(r,K),()=>{B()}},[]),Ze("defaultEdgeOptions",I,G.setState),Ze("connectionMode",M,G.setState),Ze("onConnect",s,G.setState),Ze("onConnectStart",a,G.setState),Ze("onConnectEnd",o,G.setState),Ze("onClickConnectStart",l,G.setState),Ze("onClickConnectEnd",u,G.setState),Ze("nodesDraggable",c,G.setState),Ze("nodesConnectable",d,G.setState),Ze("nodesFocusable",h,G.setState),Ze("edgesFocusable",f,G.setState),Ze("edgesUpdatable",m,G.setState),Ze("elementsSelectable",N,G.setState),Ze("elevateNodesOnSelect",v,G.setState),Ze("snapToGrid",A,G.setState),Ze("snapGrid",O,G.setState),Ze("onNodesChange",w,G.setState),Ze("onEdgesChange",E,G.setState),Ze("connectOnClick",T,G.setState),Ze("fitViewOnInit",x,G.setState),Ze("fitViewOnInitOptions",R,G.setState),Ze("onNodesDelete",P,G.setState),Ze("onEdgesDelete",j,G.setState),Ze("onNodeDrag",$,G.setState),Ze("onNodeDragStart",U,G.setState),Ze("onNodeDragStop",Y,G.setState),Ze("onSelectionDrag",q,G.setState),Ze("onSelectionDragStart",F,G.setState),Ze("onSelectionDragStop",W,G.setState),Ze("noPanClassName",Q,G.setState),Ze("nodeOrigin",H,G.setState),Ze("rfId",X,G.setState),Ze("autoPanOnConnect",J,G.setState),Ze("autoPanOnNodeDrag",ee,G.setState),Ze("onError",se,G.setState),Ze("connectionRadius",ce,G.setState),Ze("isValidConnection",Se,G.setState),Ze("nodeDragThreshold",Ee,G.setState),gl(t,ie),gl(e,ue),gl(y,ke),gl(b,Re),gl(D,_e),gl(_,V),null},CP={display:"none"},ome={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},p$="react-flow__node-desc",m$="react-flow__edge-desc",lme="react-flow__aria-live",ume=t=>t.ariaLiveMessage;function cme({rfId:t}){const e=Nt(ume);return te.createElement("div",{id:`${lme}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:ome},e)}function dme({rfId:t,disableKeyboardA11y:e}){return te.createElement(te.Fragment,null,te.createElement("div",{id:`${p$}-${t}`,style:CP},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),te.createElement("div",{id:`${m$}-${t}`,style:CP},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&te.createElement(cme,{rfId:t}))}var rh=(t=null,e={actInsideInputWithModifier:!0})=>{const[r,i]=S.useState(!1),s=S.useRef(!1),a=S.useRef(new Set([])),[o,l]=S.useMemo(()=>{if(t!==null){const c=(Array.isArray(t)?t:[t]).filter(h=>typeof h=="string").map(h=>h.split("+")),d=c.reduce((h,f)=>h.concat(...f),[]);return[c,d]}return[[],[]]},[t]);return S.useEffect(()=>{const u=typeof document<"u"?document:null,c=(e==null?void 0:e.target)||u;if(t!==null){const d=m=>{if(s.current=m.ctrlKey||m.metaKey||m.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&h2(m))return!1;const y=NP(m.code,l);a.current.add(m[y]),kP(o,a.current,!1)&&(m.preventDefault(),i(!0))},h=m=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&h2(m))return!1;const y=NP(m.code,l);kP(o,a.current,!0)?(i(!1),a.current.clear()):a.current.delete(m[y]),m.key==="Meta"&&a.current.clear(),s.current=!1},f=()=>{a.current.clear(),i(!1)};return c==null||c.addEventListener("keydown",d),c==null||c.addEventListener("keyup",h),window.addEventListener("blur",f),()=>{c==null||c.removeEventListener("keydown",d),c==null||c.removeEventListener("keyup",h),window.removeEventListener("blur",f)}}},[t,i]),r};function kP(t,e,r){return t.filter(i=>r||i.length===e.size).some(i=>i.every(s=>e.has(s)))}function NP(t,e){return e.includes(t)?"code":"key"}function g$(t,e,r,i){var l,u;const s=t.parentNode||t.parentId;if(!s)return r;const a=e.get(s),o=To(a,i);return g$(a,e,{x:(r.x??0)+o.x,y:(r.y??0)+o.y,z:(((l=a[Yt])==null?void 0:l.z)??0)>(r.z??0)?((u=a[Yt])==null?void 0:u.z)??0:r.z??0},i)}function v$(t,e,r){t.forEach(i=>{var a;const s=i.parentNode||i.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||r!=null&&r[i.id]){const{x:o,y:l,z:u}=g$(i,t,{...i.position,z:((a=i[Yt])==null?void 0:a.z)??0},e);i.positionAbsolute={x:o,y:l},i[Yt].z=u,r!=null&&r[i.id]&&(i[Yt].isParent=!0)}})}function S0(t,e,r,i){const s=new Map,a={},o=i?1e3:0;return t.forEach(l=>{var m;const u=(Xr(l.zIndex)?l.zIndex:0)+(l.selected?o:0),c=e.get(l.id),d={...l,positionAbsolute:{x:l.position.x,y:l.position.y}},h=l.parentNode||l.parentId;h&&(a[h]=!0);const f=(c==null?void 0:c.type)&&(c==null?void 0:c.type)!==l.type;Object.defineProperty(d,Yt,{enumerable:!1,value:{handleBounds:f||(m=c==null?void 0:c[Yt])==null?void 0:m.handleBounds,z:u}}),s.set(l.id,d)}),v$(s,r,a),s}function y$(t,e={}){const{getNodes:r,width:i,height:s,minZoom:a,maxZoom:o,d3Zoom:l,d3Selection:u,fitViewOnInitDone:c,fitViewOnInit:d,nodeOrigin:h}=t(),f=e.initial&&!c&&d;if(l&&u&&(f||!e.initial)){const v=r().filter(b=>{var w;const _=e.includeHiddenNodes?b.width&&b.height:!b.hidden;return(w=e.nodes)!=null&&w.length?_&&e.nodes.some(E=>E.id===b.id):_}),y=v.every(b=>b.width&&b.height);if(v.length>0&&y){const b=Cv(v,h),{x:_,y:w,zoom:E}=r$(b,i,s,e.minZoom??a,e.maxZoom??o,e.padding??.1),N=ws.translate(_,w).scale(E);return typeof e.duration=="number"&&e.duration>0?l.transform(co(u,e.duration),N):l.transform(u,N),!0}}return!1}function hme(t,e){return t.forEach(r=>{const i=e.get(r.id);i&&e.set(i.id,{...i,[Yt]:i[Yt],selected:r.selected})}),new Map(e)}function fme(t,e){return e.map(r=>{const i=t.find(s=>s.id===r.id);return i&&(r.selected=i.selected),r})}function Kf({changedNodes:t,changedEdges:e,get:r,set:i}){const{nodeInternals:s,edges:a,onNodesChange:o,onEdgesChange:l,hasDefaultNodes:u,hasDefaultEdges:c}=r();t!=null&&t.length&&(u&&i({nodeInternals:hme(t,s)}),o==null||o(t)),e!=null&&e.length&&(c&&i({edges:fme(e,a)}),l==null||l(e))}const vl=()=>{},pme={zoomIn:vl,zoomOut:vl,zoomTo:vl,getZoom:()=>1,setViewport:vl,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:vl,fitBounds:vl,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},mme=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),gme=()=>{const t=gn(),{d3Zoom:e,d3Selection:r}=Nt(mme,Cn);return S.useMemo(()=>r&&e?{zoomIn:s=>e.scaleBy(co(r,s==null?void 0:s.duration),1.2),zoomOut:s=>e.scaleBy(co(r,s==null?void 0:s.duration),1/1.2),zoomTo:(s,a)=>e.scaleTo(co(r,a==null?void 0:a.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,a)=>{const[o,l,u]=t.getState().transform,c=ws.translate(s.x??o,s.y??l).scale(s.zoom??u);e.transform(co(r,a==null?void 0:a.duration),c)},getViewport:()=>{const[s,a,o]=t.getState().transform;return{x:s,y:a,zoom:o}},fitView:s=>y$(t.getState,s),setCenter:(s,a,o)=>{const{width:l,height:u,maxZoom:c}=t.getState(),d=typeof(o==null?void 0:o.zoom)<"u"?o.zoom:c,h=l/2-s*d,f=u/2-a*d,m=ws.translate(h,f).scale(d);e.transform(co(r,o==null?void 0:o.duration),m)},fitBounds:(s,a)=>{const{width:o,height:l,minZoom:u,maxZoom:c}=t.getState(),{x:d,y:h,zoom:f}=r$(s,o,l,u,c,(a==null?void 0:a.padding)??.1),m=ws.translate(d,h).scale(f);e.transform(co(r,a==null?void 0:a.duration),m)},project:s=>{const{transform:a,snapToGrid:o,snapGrid:l}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),m2(s,a,o,l)},screenToFlowPosition:s=>{const{transform:a,snapToGrid:o,snapGrid:l,domNode:u}=t.getState();if(!u)return s;const{x:c,y:d}=u.getBoundingClientRect(),h={x:s.x-c,y:s.y-d};return m2(h,a,o,l)},flowToScreenPosition:s=>{const{transform:a,domNode:o}=t.getState();if(!o)return s;const{x:l,y:u}=o.getBoundingClientRect(),c=e$(s,a);return{x:c.x+l,y:c.y+u}},viewportInitialized:!0}:pme,[e,r])};function hI(){const t=gme(),e=gn(),r=S.useCallback(()=>e.getState().getNodes().map(y=>({...y})),[]),i=S.useCallback(y=>e.getState().nodeInternals.get(y),[]),s=S.useCallback(()=>{const{edges:y=[]}=e.getState();return y.map(b=>({...b}))},[]),a=S.useCallback(y=>{const{edges:b=[]}=e.getState();return b.find(_=>_.id===y)},[]),o=S.useCallback(y=>{const{getNodes:b,setNodes:_,hasDefaultNodes:w,onNodesChange:E}=e.getState(),N=b(),M=typeof y=="function"?y(N):y;if(w)_(M);else if(E){const O=M.length===0?N.map(A=>({type:"remove",id:A.id})):M.map(A=>({item:A,type:"reset"}));E(O)}},[]),l=S.useCallback(y=>{const{edges:b=[],setEdges:_,hasDefaultEdges:w,onEdgesChange:E}=e.getState(),N=typeof y=="function"?y(b):y;if(w)_(N);else if(E){const M=N.length===0?b.map(O=>({type:"remove",id:O.id})):N.map(O=>({item:O,type:"reset"}));E(M)}},[]),u=S.useCallback(y=>{const b=Array.isArray(y)?y:[y],{getNodes:_,setNodes:w,hasDefaultNodes:E,onNodesChange:N}=e.getState();if(E){const O=[..._(),...b];w(O)}else if(N){const M=b.map(O=>({item:O,type:"add"}));N(M)}},[]),c=S.useCallback(y=>{const b=Array.isArray(y)?y:[y],{edges:_=[],setEdges:w,hasDefaultEdges:E,onEdgesChange:N}=e.getState();if(E)w([..._,...b]);else if(N){const M=b.map(O=>({item:O,type:"add"}));N(M)}},[]),d=S.useCallback(()=>{const{getNodes:y,edges:b=[],transform:_}=e.getState(),[w,E,N]=_;return{nodes:y().map(M=>({...M})),edges:b.map(M=>({...M})),viewport:{x:w,y:E,zoom:N}}},[]),h=S.useCallback(({nodes:y,edges:b})=>{const{nodeInternals:_,getNodes:w,edges:E,hasDefaultNodes:N,hasDefaultEdges:M,onNodesDelete:O,onEdgesDelete:A,onNodesChange:D,onEdgesChange:T}=e.getState(),I=(y||[]).map($=>$.id),x=(b||[]).map($=>$.id),R=w().reduce(($,U)=>{const Y=U.parentNode||U.parentId,q=!I.includes(U.id)&&Y&&$.find(W=>W.id===Y);return(typeof U.deletable=="boolean"?U.deletable:!0)&&(I.includes(U.id)||q)&&$.push(U),$},[]),P=E.filter($=>typeof $.deletable=="boolean"?$.deletable:!0),j=P.filter($=>x.includes($.id));if(R||j){const $=n$(R,P),U=[...j,...$],Y=U.reduce((q,F)=>(q.includes(F.id)||q.push(F.id),q),[]);if((M||N)&&(M&&e.setState({edges:E.filter(q=>!Y.includes(q.id))}),N&&(R.forEach(q=>{_.delete(q.id)}),e.setState({nodeInternals:new Map(_)}))),Y.length>0&&(A==null||A(U),T&&T(Y.map(q=>({id:q,type:"remove"})))),R.length>0&&(O==null||O(R),D)){const q=R.map(F=>({id:F.id,type:"remove"}));D(q)}}},[]),f=S.useCallback(y=>{const b=jpe(y),_=b?null:e.getState().nodeInternals.get(y.id);return!b&&!_?[null,null,b]:[b?y:wP(_),_,b]},[]),m=S.useCallback((y,b=!0,_)=>{const[w,E,N]=f(y);return w?(_||e.getState().getNodes()).filter(M=>{if(!N&&(M.id===E.id||!M.positionAbsolute))return!1;const O=wP(M),A=d2(O,w);return b&&A>0||A>=w.width*w.height}):[]},[]),v=S.useCallback((y,b,_=!0)=>{const[w]=f(y);if(!w)return!1;const E=d2(w,b);return _&&E>0||E>=w.width*w.height},[]);return S.useMemo(()=>({...t,getNodes:r,getNode:i,getEdges:s,getEdge:a,setNodes:o,setEdges:l,addNodes:u,addEdges:c,toObject:d,deleteElements:h,getIntersectingNodes:m,isNodeIntersecting:v}),[t,r,i,s,a,o,l,u,c,d,h,m,v])}const vme={actInsideInputWithModifier:!1};var yme=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const r=gn(),{deleteElements:i}=hI(),s=rh(t,vme),a=rh(e);S.useEffect(()=>{if(s){const{edges:o,getNodes:l}=r.getState(),u=l().filter(d=>d.selected),c=o.filter(d=>d.selected);i({nodes:u,edges:c}),r.setState({nodesSelectionActive:!1})}},[s]),S.useEffect(()=>{r.setState({multiSelectionActive:a})},[a])};function _me(t){const e=gn();S.useEffect(()=>{let r;const i=()=>{var a,o;if(!t.current)return;const s=sI(t.current);(s.height===0||s.width===0)&&((o=(a=e.getState()).onError)==null||o.call(a,"004",Ps.error004())),e.setState({width:s.width||500,height:s.height||500})};return i(),window.addEventListener("resize",i),t.current&&(r=new ResizeObserver(()=>i()),r.observe(t.current)),()=>{window.removeEventListener("resize",i),r&&t.current&&r.unobserve(t.current)}},[])}const fI={position:"absolute",width:"100%",height:"100%",top:0,left:0},wme=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Yf=t=>({x:t.x,y:t.y,zoom:t.k}),yl=(t,e)=>t.target.closest(`.${e}`),AP=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),RP=t=>{const e=t.ctrlKey&&Bm()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},bme=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),xme=({onMove:t,onMoveStart:e,onMoveEnd:r,onPaneContextMenu:i,zoomOnScroll:s=!0,zoomOnPinch:a=!0,panOnScroll:o=!1,panOnScrollSpeed:l=.5,panOnScrollMode:u=wo.Free,zoomOnDoubleClick:c=!0,elementsSelectable:d,panOnDrag:h=!0,defaultViewport:f,translateExtent:m,minZoom:v,maxZoom:y,zoomActivationKeyCode:b,preventScrolling:_=!0,children:w,noWheelClassName:E,noPanClassName:N})=>{const M=S.useRef(),O=gn(),A=S.useRef(!1),D=S.useRef(!1),T=S.useRef(null),I=S.useRef({x:0,y:0,zoom:0}),{d3Zoom:x,d3Selection:R,d3ZoomHandler:P,userSelectionActive:j}=Nt(bme,Cn),$=rh(b),U=S.useRef(0),Y=S.useRef(!1),q=S.useRef();return _me(T),S.useEffect(()=>{if(T.current){const F=T.current.getBoundingClientRect(),W=B9().scaleExtent([v,y]).translateExtent(m),Q=Wr(T.current).call(W),H=ws.translate(f.x,f.y).scale(Cu(f.zoom,v,y)),X=[[0,0],[F.width,F.height]],J=W.constrain()(H,X,m);W.transform(Q,J),W.wheelDelta(RP),O.setState({d3Zoom:W,d3Selection:Q,d3ZoomHandler:Q.on("wheel.zoom"),transform:[J.x,J.y,J.k],domNode:T.current.closest(".react-flow")})}},[]),S.useEffect(()=>{R&&x&&(o&&!$&&!j?R.on("wheel.zoom",F=>{if(yl(F,E))return!1;F.preventDefault(),F.stopImmediatePropagation();const W=R.property("__zoom").k||1;if(F.ctrlKey&&a){const Se=di(F),Ee=RP(F),ie=W*Math.pow(2,Ee);x.scaleTo(R,ie,Se,F);return}const Q=F.deltaMode===1?20:1;let H=u===wo.Vertical?0:F.deltaX*Q,X=u===wo.Horizontal?0:F.deltaY*Q;!Bm()&&F.shiftKey&&u!==wo.Vertical&&(H=F.deltaY*Q,X=0),x.translateBy(R,-(H/W)*l,-(X/W)*l,{internal:!0});const J=Yf(R.property("__zoom")),{onViewportChangeStart:ee,onViewportChange:se,onViewportChangeEnd:ce}=O.getState();clearTimeout(q.current),Y.current||(Y.current=!0,e==null||e(F,J),ee==null||ee(J)),Y.current&&(t==null||t(F,J),se==null||se(J),q.current=setTimeout(()=>{r==null||r(F,J),ce==null||ce(J),Y.current=!1},150))},{passive:!1}):typeof P<"u"&&R.on("wheel.zoom",function(F,W){if(!_&&F.type==="wheel"&&!F.ctrlKey||yl(F,E))return null;F.preventDefault(),P.call(this,F,W)},{passive:!1}))},[j,o,u,R,x,P,$,a,_,E,e,t,r]),S.useEffect(()=>{x&&x.on("start",F=>{var H,X;if(!F.sourceEvent||F.sourceEvent.internal)return null;U.current=(H=F.sourceEvent)==null?void 0:H.button;const{onViewportChangeStart:W}=O.getState(),Q=Yf(F.transform);A.current=!0,I.current=Q,((X=F.sourceEvent)==null?void 0:X.type)==="mousedown"&&O.setState({paneDragging:!0}),W==null||W(Q),e==null||e(F.sourceEvent,Q)})},[x,e]),S.useEffect(()=>{x&&(j&&!A.current?x.on("zoom",null):j||x.on("zoom",F=>{var Q;const{onViewportChange:W}=O.getState();if(O.setState({transform:[F.transform.x,F.transform.y,F.transform.k]}),D.current=!!(i&&AP(h,U.current??0)),(t||W)&&!((Q=F.sourceEvent)!=null&&Q.internal)){const H=Yf(F.transform);W==null||W(H),t==null||t(F.sourceEvent,H)}}))},[j,x,t,h,i]),S.useEffect(()=>{x&&x.on("end",F=>{if(!F.sourceEvent||F.sourceEvent.internal)return null;const{onViewportChangeEnd:W}=O.getState();if(A.current=!1,O.setState({paneDragging:!1}),i&&AP(h,U.current??0)&&!D.current&&i(F.sourceEvent),D.current=!1,(r||W)&&wme(I.current,F.transform)){const Q=Yf(F.transform);I.current=Q,clearTimeout(M.current),M.current=setTimeout(()=>{W==null||W(Q),r==null||r(F.sourceEvent,Q)},o?150:0)}})},[x,o,h,r,i]),S.useEffect(()=>{x&&x.filter(F=>{const W=$||s,Q=a&&F.ctrlKey;if((h===!0||Array.isArray(h)&&h.includes(1))&&F.button===1&&F.type==="mousedown"&&(yl(F,"react-flow__node")||yl(F,"react-flow__edge")))return!0;if(!h&&!W&&!o&&!c&&!a||j||!c&&F.type==="dblclick"||yl(F,E)&&F.type==="wheel"||yl(F,N)&&(F.type!=="wheel"||o&&F.type==="wheel"&&!$)||!a&&F.ctrlKey&&F.type==="wheel"||!W&&!o&&!Q&&F.type==="wheel"||!h&&(F.type==="mousedown"||F.type==="touchstart")||Array.isArray(h)&&!h.includes(F.button)&&F.type==="mousedown")return!1;const H=Array.isArray(h)&&h.includes(F.button)||!F.button||F.button<=1;return(!F.ctrlKey||F.type==="wheel")&&H})},[j,x,s,a,o,c,h,d,$]),te.createElement("div",{className:"react-flow__renderer",ref:T,style:fI},w)},Eme=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function Sme(){const{userSelectionActive:t,userSelectionRect:e}=Nt(Eme,Cn);return t&&e?te.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function PP(t,e){const r=e.parentNode||e.parentId,i=t.find(s=>s.id===r);if(i){const s=e.position.x+e.width-i.width,a=e.position.y+e.height-i.height;if(s>0||a>0||e.position.x<0||e.position.y<0){if(i.style={...i.style},i.style.width=i.style.width??i.width,i.style.height=i.style.height??i.height,s>0&&(i.style.width+=s),a>0&&(i.style.height+=a),e.position.x<0){const o=Math.abs(e.position.x);i.position.x=i.position.x-o,i.style.width+=o,e.position.x=0}if(e.position.y<0){const o=Math.abs(e.position.y);i.position.y=i.position.y-o,i.style.height+=o,e.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function _$(t,e){if(t.some(i=>i.type==="reset"))return t.filter(i=>i.type==="reset").map(i=>i.item);const r=t.filter(i=>i.type==="add").map(i=>i.item);return e.reduce((i,s)=>{const a=t.filter(l=>l.id===s.id);if(a.length===0)return i.push(s),i;const o={...s};for(const l of a)if(l)switch(l.type){case"select":{o.selected=l.selected;break}case"position":{typeof l.position<"u"&&(o.position=l.position),typeof l.positionAbsolute<"u"&&(o.positionAbsolute=l.positionAbsolute),typeof l.dragging<"u"&&(o.dragging=l.dragging),o.expandParent&&PP(i,o);break}case"dimensions":{typeof l.dimensions<"u"&&(o.width=l.dimensions.width,o.height=l.dimensions.height),typeof l.updateStyle<"u"&&(o.style={...o.style||{},...l.dimensions}),typeof l.resizing=="boolean"&&(o.resizing=l.resizing),o.expandParent&&PP(i,o);break}case"remove":return i}return i.push(o),i},r)}function pI(t,e){return _$(t,e)}function w$(t,e){return _$(t,e)}const ta=(t,e)=>({id:t,type:"select",selected:e});function Fl(t,e){return t.reduce((r,i)=>{const s=e.includes(i.id);return!i.selected&&s?(i.selected=!0,r.push(ta(i.id,!0))):i.selected&&!s&&(i.selected=!1,r.push(ta(i.id,!1))),r},[])}const T0=(t,e)=>r=>{r.target===e.current&&(t==null||t(r))},Tme=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),b$=S.memo(({isSelecting:t,selectionMode:e=th.Full,panOnDrag:r,onSelectionStart:i,onSelectionEnd:s,onPaneClick:a,onPaneContextMenu:o,onPaneScroll:l,onPaneMouseEnter:u,onPaneMouseMove:c,onPaneMouseLeave:d,children:h})=>{const f=S.useRef(null),m=gn(),v=S.useRef(0),y=S.useRef(0),b=S.useRef(),{userSelectionActive:_,elementsSelectable:w,dragging:E}=Nt(Tme,Cn),N=()=>{m.setState({userSelectionActive:!1,userSelectionRect:null}),v.current=0,y.current=0},M=P=>{a==null||a(P),m.getState().resetSelectedElements(),m.setState({nodesSelectionActive:!1})},O=P=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){P.preventDefault();return}o==null||o(P)},A=l?P=>l(P):void 0,D=P=>{const{resetSelectedElements:j,domNode:$}=m.getState();if(b.current=$==null?void 0:$.getBoundingClientRect(),!w||!t||P.button!==0||P.target!==f.current||!b.current)return;const{x:U,y:Y}=Na(P,b.current);j(),m.setState({userSelectionRect:{width:0,height:0,startX:U,startY:Y,x:U,y:Y}}),i==null||i(P)},T=P=>{const{userSelectionRect:j,nodeInternals:$,edges:U,transform:Y,onNodesChange:q,onEdgesChange:F,nodeOrigin:W,getNodes:Q}=m.getState();if(!t||!b.current||!j)return;m.setState({userSelectionActive:!0,nodesSelectionActive:!1});const H=Na(P,b.current),X=j.startX??0,J=j.startY??0,ee={...j,x:H.x<X?H.x:X,y:H.y<J?H.y:J,width:Math.abs(H.x-X),height:Math.abs(H.y-J)},se=Q(),ce=t$($,ee,Y,e===th.Partial,!0,W),Se=n$(ce,U).map(ie=>ie.id),Ee=ce.map(ie=>ie.id);if(v.current!==Ee.length){v.current=Ee.length;const ie=Fl(se,Ee);ie.length&&(q==null||q(ie))}if(y.current!==Se.length){y.current=Se.length;const ie=Fl(U,Se);ie.length&&(F==null||F(ie))}m.setState({userSelectionRect:ee})},I=P=>{if(P.button!==0)return;const{userSelectionRect:j}=m.getState();!_&&j&&P.target===f.current&&(M==null||M(P)),m.setState({nodesSelectionActive:v.current>0}),N(),s==null||s(P)},x=P=>{_&&(m.setState({nodesSelectionActive:v.current>0}),s==null||s(P)),N()},R=w&&(t||_);return te.createElement("div",{className:On(["react-flow__pane",{dragging:E,selection:t}]),onClick:R?void 0:T0(M,f),onContextMenu:T0(O,f),onWheel:T0(A,f),onMouseEnter:R?void 0:u,onMouseDown:R?D:void 0,onMouseMove:R?T:c,onMouseUp:R?I:void 0,onMouseLeave:R?x:d,ref:f,style:fI},h,te.createElement(Sme,null))});b$.displayName="Pane";function x$(t,e){const r=t.parentNode||t.parentId;if(!r)return!1;const i=e.get(r);return i?i.selected?!0:x$(i,e):!1}function DP(t,e,r){let i=t;do{if(i!=null&&i.matches(e))return!0;if(i===r.current)return!1;i=i.parentElement}while(i);return!1}function Ime(t,e,r,i){return Array.from(t.values()).filter(s=>(s.selected||s.id===i)&&(!s.parentNode||s.parentId||!x$(s,t))&&(s.draggable||e&&typeof s.draggable>"u")).map(s=>{var a,o;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:r.x-(((a=s.positionAbsolute)==null?void 0:a.x)??0),y:r.y-(((o=s.positionAbsolute)==null?void 0:o.y)??0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}})}function Cme(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function E$(t,e,r,i,s=[0,0],a){const o=Cme(t,t.extent||i);let l=o;const u=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(u&&t.width&&t.height){const h=r.get(u),{x:f,y:m}=To(h,s).positionAbsolute;l=h&&Xr(f)&&Xr(m)&&Xr(h.width)&&Xr(h.height)?[[f+t.width*s[0],m+t.height*s[1]],[f+h.width-t.width+t.width*s[0],m+h.height-t.height+t.height*s[1]]]:l}else a==null||a("005",Ps.error005()),l=o;else if(t.extent&&u&&t.extent!=="parent"){const h=r.get(u),{x:f,y:m}=To(h,s).positionAbsolute;l=[[t.extent[0][0]+f,t.extent[0][1]+m],[t.extent[1][0]+f,t.extent[1][1]+m]]}let c={x:0,y:0};if(u){const h=r.get(u);c=To(h,s).positionAbsolute}const d=l&&l!=="parent"?aI(e,l):e;return{position:{x:d.x-c.x,y:d.y-c.y},positionAbsolute:d}}function I0({nodeId:t,dragItems:e,nodeInternals:r}){const i=e.map(s=>({...r.get(s.id),position:s.position,positionAbsolute:s.positionAbsolute}));return[t?i.find(s=>s.id===t):i[0],i]}const MP=(t,e,r,i)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const a=Array.from(s),o=e.getBoundingClientRect(),l={x:o.width*i[0],y:o.height*i[1]};return a.map(u=>{const c=u.getBoundingClientRect();return{id:u.getAttribute("data-handleid"),position:u.getAttribute("data-handlepos"),x:(c.left-o.left-l.x)/r,y:(c.top-o.top-l.y)/r,...sI(u)}})};function Cc(t,e,r){return r===void 0?r:i=>{const s=e().nodeInternals.get(t);s&&r(i,{...s})}}function v2({id:t,store:e,unselect:r=!1,nodeRef:i}){const{addSelectedNodes:s,unselectNodesAndEdges:a,multiSelectionActive:o,nodeInternals:l,onError:u}=e.getState(),c=l.get(t);if(!c){u==null||u("012",Ps.error012(t));return}e.setState({nodesSelectionActive:!1}),c.selected?(r||c.selected&&o)&&(a({nodes:[c],edges:[]}),requestAnimationFrame(()=>{var d;return(d=i==null?void 0:i.current)==null?void 0:d.blur()})):s([t])}function kme(){const t=gn();return S.useCallback(({sourceEvent:r})=>{const{transform:i,snapGrid:s,snapToGrid:a}=t.getState(),o=r.touches?r.touches[0].clientX:r.clientX,l=r.touches?r.touches[0].clientY:r.clientY,u={x:(o-i[0])/i[2],y:(l-i[1])/i[2]};return{xSnapped:a?s[0]*Math.round(u.x/s[0]):u.x,ySnapped:a?s[1]*Math.round(u.y/s[1]):u.y,...u}},[])}function C0(t){return(e,r,i)=>t==null?void 0:t(e,i)}function S$({nodeRef:t,disabled:e=!1,noDragClassName:r,handleSelector:i,nodeId:s,isSelectable:a,selectNodesOnDrag:o}){const l=gn(),[u,c]=S.useState(!1),d=S.useRef([]),h=S.useRef({x:null,y:null}),f=S.useRef(0),m=S.useRef(null),v=S.useRef({x:0,y:0}),y=S.useRef(null),b=S.useRef(!1),_=S.useRef(!1),w=S.useRef(!1),E=kme();return S.useEffect(()=>{if(t!=null&&t.current){const N=Wr(t.current),M=({x:D,y:T})=>{const{nodeInternals:I,onNodeDrag:x,onSelectionDrag:R,updateNodePositions:P,nodeExtent:j,snapGrid:$,snapToGrid:U,nodeOrigin:Y,onError:q}=l.getState();h.current={x:D,y:T};let F=!1,W={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&j){const H=Cv(d.current,Y);W=eh(H)}if(d.current=d.current.map(H=>{const X={x:D-H.distance.x,y:T-H.distance.y};U&&(X.x=$[0]*Math.round(X.x/$[0]),X.y=$[1]*Math.round(X.y/$[1]));const J=[[j[0][0],j[0][1]],[j[1][0],j[1][1]]];d.current.length>1&&j&&!H.extent&&(J[0][0]=H.positionAbsolute.x-W.x+j[0][0],J[1][0]=H.positionAbsolute.x+(H.width??0)-W.x2+j[1][0],J[0][1]=H.positionAbsolute.y-W.y+j[0][1],J[1][1]=H.positionAbsolute.y+(H.height??0)-W.y2+j[1][1]);const ee=E$(H,X,I,J,Y,q);return F=F||H.position.x!==ee.position.x||H.position.y!==ee.position.y,H.position=ee.position,H.positionAbsolute=ee.positionAbsolute,H}),!F)return;P(d.current,!0,!0),c(!0);const Q=s?x:C0(R);if(Q&&y.current){const[H,X]=I0({nodeId:s,dragItems:d.current,nodeInternals:I});Q(y.current,H,X)}},O=()=>{if(!m.current)return;const[D,T]=q9(v.current,m.current);if(D!==0||T!==0){const{transform:I,panBy:x}=l.getState();h.current.x=(h.current.x??0)-D/I[2],h.current.y=(h.current.y??0)-T/I[2],x({x:D,y:T})&&M(h.current)}f.current=requestAnimationFrame(O)},A=D=>{var Y;const{nodeInternals:T,multiSelectionActive:I,nodesDraggable:x,unselectNodesAndEdges:R,onNodeDragStart:P,onSelectionDragStart:j}=l.getState();_.current=!0;const $=s?P:C0(j);(!o||!a)&&!I&&s&&((Y=T.get(s))!=null&&Y.selected||R()),s&&a&&o&&v2({id:s,store:l,nodeRef:t});const U=E(D);if(h.current=U,d.current=Ime(T,x,U,s),$&&d.current){const[q,F]=I0({nodeId:s,dragItems:d.current,nodeInternals:T});$(D.sourceEvent,q,F)}};if(e)N.on(".drag",null);else{const D=Uhe().on("start",T=>{const{domNode:I,nodeDragThreshold:x}=l.getState();x===0&&A(T),w.current=!1;const R=E(T);h.current=R,m.current=(I==null?void 0:I.getBoundingClientRect())||null,v.current=Na(T.sourceEvent,m.current)}).on("drag",T=>{var P,j;const I=E(T),{autoPanOnNodeDrag:x,nodeDragThreshold:R}=l.getState();if(T.sourceEvent.type==="touchmove"&&T.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!b.current&&_.current&&x&&(b.current=!0,O()),!_.current){const $=I.xSnapped-(((P=h==null?void 0:h.current)==null?void 0:P.x)??0),U=I.ySnapped-(((j=h==null?void 0:h.current)==null?void 0:j.y)??0);Math.sqrt($*$+U*U)>R&&A(T)}(h.current.x!==I.xSnapped||h.current.y!==I.ySnapped)&&d.current&&_.current&&(y.current=T.sourceEvent,v.current=Na(T.sourceEvent,m.current),M(I))}}).on("end",T=>{if(!(!_.current||w.current)&&(c(!1),b.current=!1,_.current=!1,cancelAnimationFrame(f.current),d.current)){const{updateNodePositions:I,nodeInternals:x,onNodeDragStop:R,onSelectionDragStop:P}=l.getState(),j=s?R:C0(P);if(I(d.current,!1,!1),j){const[$,U]=I0({nodeId:s,dragItems:d.current,nodeInternals:x});j(T.sourceEvent,$,U)}}}).filter(T=>{const I=T.target;return!T.button&&(!r||!DP(I,`.${r}`,t))&&(!i||DP(I,i,t))});return N.call(D),()=>{N.on(".drag",null)}}}},[t,e,r,i,a,l,s,o,E]),u}function T$(){const t=gn();return S.useCallback(r=>{const{nodeInternals:i,nodeExtent:s,updateNodePositions:a,getNodes:o,snapToGrid:l,snapGrid:u,onError:c,nodesDraggable:d}=t.getState(),h=o().filter(w=>w.selected&&(w.draggable||d&&typeof w.draggable>"u")),f=l?u[0]:5,m=l?u[1]:5,v=r.isShiftPressed?4:1,y=r.x*f*v,b=r.y*m*v,_=h.map(w=>{if(w.positionAbsolute){const E={x:w.positionAbsolute.x+y,y:w.positionAbsolute.y+b};l&&(E.x=u[0]*Math.round(E.x/u[0]),E.y=u[1]*Math.round(E.y/u[1]));const{positionAbsolute:N,position:M}=E$(w,E,i,s,void 0,c);w.position=M,w.positionAbsolute=N}return w});a(_,!0,!1)},[])}const eu={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var kc=t=>{const e=({id:r,type:i,data:s,xPos:a,yPos:o,xPosOrigin:l,yPosOrigin:u,selected:c,onClick:d,onMouseEnter:h,onMouseMove:f,onMouseLeave:m,onContextMenu:v,onDoubleClick:y,style:b,className:_,isDraggable:w,isSelectable:E,isConnectable:N,isFocusable:M,selectNodesOnDrag:O,sourcePosition:A,targetPosition:D,hidden:T,resizeObserver:I,dragHandle:x,zIndex:R,isParent:P,noDragClassName:j,noPanClassName:$,initialized:U,disableKeyboardA11y:Y,ariaLabel:q,rfId:F,hasHandleBounds:W})=>{const Q=gn(),H=S.useRef(null),X=S.useRef(null),J=S.useRef(A),ee=S.useRef(D),se=S.useRef(i),ce=E||w||d||h||f||m,Se=T$(),Ee=Cc(r,Q.getState,h),ie=Cc(r,Q.getState,f),ue=Cc(r,Q.getState,m),ge=Cc(r,Q.getState,v),ke=Cc(r,Q.getState,y),Re=B=>{const{nodeDragThreshold:G}=Q.getState();if(E&&(!O||!w||G>0)&&v2({id:r,store:Q,nodeRef:H}),d){const K=Q.getState().nodeInternals.get(r);K&&d(B,{...K})}},_e=B=>{if(!h2(B)&&!Y)if(K9.includes(B.key)&&E){const G=B.key==="Escape";v2({id:r,store:Q,unselect:G,nodeRef:H})}else w&&c&&Object.prototype.hasOwnProperty.call(eu,B.key)&&(Q.setState({ariaLiveMessage:`Moved selected node ${B.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~a}, y: ${~~o}`}),Se({x:eu[B.key].x,y:eu[B.key].y,isShiftPressed:B.shiftKey}))};S.useEffect(()=>()=>{X.current&&(I==null||I.unobserve(X.current),X.current=null)},[]),S.useEffect(()=>{if(H.current&&!T){const B=H.current;(!U||!W||X.current!==B)&&(X.current&&(I==null||I.unobserve(X.current)),I==null||I.observe(B),X.current=B)}},[T,U,W]),S.useEffect(()=>{const B=se.current!==i,G=J.current!==A,K=ee.current!==D;H.current&&(B||G||K)&&(B&&(se.current=i),G&&(J.current=A),K&&(ee.current=D),Q.getState().updateNodeDimensions([{id:r,nodeElement:H.current,forceUpdate:!0}]))},[r,i,A,D]);const V=S$({nodeRef:H,disabled:T||!w,noDragClassName:j,handleSelector:x,nodeId:r,isSelectable:E,selectNodesOnDrag:O});return T?null:te.createElement("div",{className:On(["react-flow__node",`react-flow__node-${i}`,{[$]:w},_,{selected:c,selectable:E,parent:P,dragging:V}]),ref:H,style:{zIndex:R,transform:`translate(${l}px,${u}px)`,pointerEvents:ce?"all":"none",visibility:U?"visible":"hidden",...b},"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:Ee,onMouseMove:ie,onMouseLeave:ue,onContextMenu:ge,onClick:Re,onDoubleClick:ke,onKeyDown:M?_e:void 0,tabIndex:M?0:void 0,role:M?"button":void 0,"aria-describedby":Y?void 0:`${p$}-${F}`,"aria-label":q},te.createElement(qpe,{value:r},te.createElement(t,{id:r,data:s,type:i,xPos:a,yPos:o,selected:c,isConnectable:N,sourcePosition:A,targetPosition:D,dragging:V,dragHandle:x,zIndex:R})))};return e.displayName="NodeWrapper",S.memo(e)};const Nme=t=>{const e=t.getNodes().filter(r=>r.selected);return{...Cv(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function Ame({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:r}){const i=gn(),{width:s,height:a,x:o,y:l,transformString:u,userSelectionActive:c}=Nt(Nme,Cn),d=T$(),h=S.useRef(null);if(S.useEffect(()=>{var v;r||(v=h.current)==null||v.focus({preventScroll:!0})},[r]),S$({nodeRef:h}),c||!s||!a)return null;const f=t?v=>{const y=i.getState().getNodes().filter(b=>b.selected);t(v,y)}:void 0,m=v=>{Object.prototype.hasOwnProperty.call(eu,v.key)&&d({x:eu[v.key].x,y:eu[v.key].y,isShiftPressed:v.shiftKey})};return te.createElement("div",{className:On(["react-flow__nodesselection","react-flow__container",e]),style:{transform:u}},te.createElement("div",{ref:h,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:r?void 0:-1,onKeyDown:r?void 0:m,style:{width:s,height:a,top:l,left:o}}))}var Rme=S.memo(Ame);const Pme=t=>t.nodesSelectionActive,I$=({children:t,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:o,deleteKeyCode:l,onMove:u,onMoveStart:c,onMoveEnd:d,selectionKeyCode:h,selectionOnDrag:f,selectionMode:m,onSelectionStart:v,onSelectionEnd:y,multiSelectionKeyCode:b,panActivationKeyCode:_,zoomActivationKeyCode:w,elementsSelectable:E,zoomOnScroll:N,zoomOnPinch:M,panOnScroll:O,panOnScrollSpeed:A,panOnScrollMode:D,zoomOnDoubleClick:T,panOnDrag:I,defaultViewport:x,translateExtent:R,minZoom:P,maxZoom:j,preventScrolling:$,onSelectionContextMenu:U,noWheelClassName:Y,noPanClassName:q,disableKeyboardA11y:F})=>{const W=Nt(Pme),Q=rh(h),H=rh(_),X=H||I,J=H||O,ee=Q||f&&X!==!0;return yme({deleteKeyCode:l,multiSelectionKeyCode:b}),te.createElement(xme,{onMove:u,onMoveStart:c,onMoveEnd:d,onPaneContextMenu:a,elementsSelectable:E,zoomOnScroll:N,zoomOnPinch:M,panOnScroll:J,panOnScrollSpeed:A,panOnScrollMode:D,zoomOnDoubleClick:T,panOnDrag:!Q&&X,defaultViewport:x,translateExtent:R,minZoom:P,maxZoom:j,zoomActivationKeyCode:w,preventScrolling:$,noWheelClassName:Y,noPanClassName:q},te.createElement(b$,{onSelectionStart:v,onSelectionEnd:y,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:a,onPaneScroll:o,panOnDrag:X,isSelecting:!!ee,selectionMode:m},t,W&&te.createElement(Rme,{onSelectionContextMenu:U,noPanClassName:q,disableKeyboardA11y:F})))};I$.displayName="FlowRenderer";var Dme=S.memo(I$);function Mme(t){return Nt(S.useCallback(r=>t?t$(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[t]))}function Lme(t){const e={input:kc(t.input||c$),default:kc(t.default||g2),output:kc(t.output||h$),group:kc(t.group||dI)},r={},i=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,a)=>(s[a]=kc(t[a]||g2),s),r);return{...e,...i}}const Ome=({x:t,y:e,width:r,height:i,origin:s})=>!r||!i?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-r*s[0],y:e-i*s[1]},jme=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),C$=t=>{const{nodesDraggable:e,nodesConnectable:r,nodesFocusable:i,elementsSelectable:s,updateNodeDimensions:a,onError:o}=Nt(jme,Cn),l=Mme(t.onlyRenderVisibleElements),u=S.useRef(),c=S.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(h=>{const f=h.map(m=>({id:m.target.getAttribute("data-id"),nodeElement:m.target,forceUpdate:!0}));a(f)});return u.current=d,d},[]);return S.useEffect(()=>()=>{var d;(d=u==null?void 0:u.current)==null||d.disconnect()},[]),te.createElement("div",{className:"react-flow__nodes",style:fI},l.map(d=>{var M,O,A;let h=d.type||"default";t.nodeTypes[h]||(o==null||o("003",Ps.error003(h)),h="default");const f=t.nodeTypes[h]||t.nodeTypes.default,m=!!(d.draggable||e&&typeof d.draggable>"u"),v=!!(d.selectable||s&&typeof d.selectable>"u"),y=!!(d.connectable||r&&typeof d.connectable>"u"),b=!!(d.focusable||i&&typeof d.focusable>"u"),_=t.nodeExtent?aI(d.positionAbsolute,t.nodeExtent):d.positionAbsolute,w=(_==null?void 0:_.x)??0,E=(_==null?void 0:_.y)??0,N=Ome({x:w,y:E,width:d.width??0,height:d.height??0,origin:t.nodeOrigin});return te.createElement(f,{key:d.id,id:d.id,className:d.className,style:d.style,type:h,data:d.data,sourcePosition:d.sourcePosition||De.Bottom,targetPosition:d.targetPosition||De.Top,hidden:d.hidden,xPos:w,yPos:E,xPosOrigin:N.x,yPosOrigin:N.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!d.selected,isDraggable:m,isSelectable:v,isConnectable:y,isFocusable:b,resizeObserver:c,dragHandle:d.dragHandle,zIndex:((M=d[Yt])==null?void 0:M.z)??0,isParent:!!((O=d[Yt])!=null&&O.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!d.width&&!!d.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((A=d[Yt])!=null&&A.handleBounds)})}))};C$.displayName="NodeRenderer";var Vme=S.memo(C$);const Fme=(t,e,r)=>r===De.Left?t-e:r===De.Right?t+e:t,$me=(t,e,r)=>r===De.Top?t-e:r===De.Bottom?t+e:t,LP="react-flow__edgeupdater",OP=({position:t,centerX:e,centerY:r,radius:i=10,onMouseDown:s,onMouseEnter:a,onMouseOut:o,type:l})=>te.createElement("circle",{onMouseDown:s,onMouseEnter:a,onMouseOut:o,className:On([LP,`${LP}-${l}`]),cx:Fme(e,i,t),cy:$me(r,i,t),r:i,stroke:"transparent",fill:"transparent"}),Ume=()=>!0;var _l=t=>{const e=({id:r,className:i,type:s,data:a,onClick:o,onEdgeDoubleClick:l,selected:u,animated:c,label:d,labelStyle:h,labelShowBg:f,labelBgStyle:m,labelBgPadding:v,labelBgBorderRadius:y,style:b,source:_,target:w,sourceX:E,sourceY:N,targetX:M,targetY:O,sourcePosition:A,targetPosition:D,elementsSelectable:T,hidden:I,sourceHandleId:x,targetHandleId:R,onContextMenu:P,onMouseEnter:j,onMouseMove:$,onMouseLeave:U,reconnectRadius:Y,onReconnect:q,onReconnectStart:F,onReconnectEnd:W,markerEnd:Q,markerStart:H,rfId:X,ariaLabel:J,isFocusable:ee,isReconnectable:se,pathOptions:ce,interactionWidth:Se,disableKeyboardA11y:Ee})=>{const ie=S.useRef(null),[ue,ge]=S.useState(!1),[ke,Re]=S.useState(!1),_e=gn(),V=S.useMemo(()=>`url('#${p2(H,X)}')`,[H,X]),B=S.useMemo(()=>`url('#${p2(Q,X)}')`,[Q,X]);if(I)return null;const G=Ke=>{var Ce;const{edges:Ne,addSelectedEdges:oe,unselectNodesAndEdges:pe,multiSelectionActive:be}=_e.getState(),Le=Ne.find(We=>We.id===r);Le&&(T&&(_e.setState({nodesSelectionActive:!1}),Le.selected&&be?(pe({nodes:[],edges:[Le]}),(Ce=ie.current)==null||Ce.blur()):oe([r])),o&&o(Ke,Le))},K=Ic(r,_e.getState,l),re=Ic(r,_e.getState,P),le=Ic(r,_e.getState,j),he=Ic(r,_e.getState,$),ye=Ic(r,_e.getState,U),Ie=(Ke,Ne)=>{if(Ke.button!==0)return;const{edges:oe,isValidConnection:pe}=_e.getState(),be=Ne?w:_,Le=(Ne?R:x)||null,Ce=Ne?"target":"source",We=pe||Ume,yt=Ne,ft=oe.find(xt=>xt.id===r);Re(!0),F==null||F(Ke,ft,Ce);const vn=xt=>{Re(!1),W==null||W(xt,ft,Ce)};a$({event:Ke,handleId:Le,nodeId:be,onConnect:xt=>q==null?void 0:q(ft,xt),isTarget:yt,getState:_e.getState,setState:_e.setState,isValidConnection:We,edgeUpdaterType:Ce,onReconnectEnd:vn})},Be=Ke=>Ie(Ke,!0),Oe=Ke=>Ie(Ke,!1),ze=()=>ge(!0),lt=()=>ge(!1),vt=!T&&!o,At=Ke=>{var Ne;if(!Ee&&K9.includes(Ke.key)&&T){const{unselectNodesAndEdges:oe,addSelectedEdges:pe,edges:be}=_e.getState();Ke.key==="Escape"?((Ne=ie.current)==null||Ne.blur(),oe({edges:[be.find(Ce=>Ce.id===r)]})):pe([r])}};return te.createElement("g",{className:On(["react-flow__edge",`react-flow__edge-${s}`,i,{selected:u,animated:c,inactive:vt,updating:ue}]),onClick:G,onDoubleClick:K,onContextMenu:re,onMouseEnter:le,onMouseMove:he,onMouseLeave:ye,onKeyDown:ee?At:void 0,tabIndex:ee?0:void 0,role:ee?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":J===null?void 0:J||`Edge from ${_} to ${w}`,"aria-describedby":ee?`${m$}-${X}`:void 0,ref:ie},!ke&&te.createElement(t,{id:r,source:_,target:w,selected:u,animated:c,label:d,labelStyle:h,labelShowBg:f,labelBgStyle:m,labelBgPadding:v,labelBgBorderRadius:y,data:a,style:b,sourceX:E,sourceY:N,targetX:M,targetY:O,sourcePosition:A,targetPosition:D,sourceHandleId:x,targetHandleId:R,markerStart:V,markerEnd:B,pathOptions:ce,interactionWidth:Se}),se&&te.createElement(te.Fragment,null,(se==="source"||se===!0)&&te.createElement(OP,{position:A,centerX:E,centerY:N,radius:Y,onMouseDown:Be,onMouseEnter:ze,onMouseOut:lt,type:"source"}),(se==="target"||se===!0)&&te.createElement(OP,{position:D,centerX:M,centerY:O,radius:Y,onMouseDown:Oe,onMouseEnter:ze,onMouseOut:lt,type:"target"})))};return e.displayName="EdgeWrapper",S.memo(e)};function Bme(t){const e={default:_l(t.default||nh),straight:_l(t.bezier||Iv),step:_l(t.step||Tv),smoothstep:_l(t.step||Sv),simplebezier:_l(t.simplebezier||oI)},r={},i=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,a)=>(s[a]=_l(t[a]||nh),s),r);return{...e,...i}}function jP(t,e,r=null){const i=((r==null?void 0:r.x)||0)+e.x,s=((r==null?void 0:r.y)||0)+e.y,a=(r==null?void 0:r.width)||e.width,o=(r==null?void 0:r.height)||e.height;switch(t){case De.Top:return{x:i+a/2,y:s};case De.Right:return{x:i+a,y:s+o/2};case De.Bottom:return{x:i+a/2,y:s+o};case De.Left:return{x:i,y:s+o/2}}}function VP(t,e){return t?t.length===1||!e?t[0]:e&&t.find(r=>r.id===e)||null:null}const zme=(t,e,r,i,s,a)=>{const o=jP(r,t,e),l=jP(a,i,s);return{sourceX:o.x,sourceY:o.y,targetX:l.x,targetY:l.y}};function qme({sourcePos:t,targetPos:e,sourceWidth:r,sourceHeight:i,targetWidth:s,targetHeight:a,width:o,height:l,transform:u}){const c={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+r,e.x+s),y2:Math.max(t.y+i,e.y+a)};c.x===c.x2&&(c.x2+=1),c.y===c.y2&&(c.y2+=1);const d=eh({x:(0-u[0])/u[2],y:(0-u[1])/u[2],width:o/u[2],height:l/u[2]}),h=Math.max(0,Math.min(d.x2,c.x2)-Math.max(d.x,c.x)),f=Math.max(0,Math.min(d.y2,c.y2)-Math.max(d.y,c.y));return Math.ceil(h*f)>0}function FP(t){var i,s,a,o,l;const e=((i=t==null?void 0:t[Yt])==null?void 0:i.handleBounds)||null,r=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.x)<"u"&&typeof((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.y)<"u";return[{x:((o=t==null?void 0:t.positionAbsolute)==null?void 0:o.x)||0,y:((l=t==null?void 0:t.positionAbsolute)==null?void 0:l.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!r]}const Hme=[{level:0,isMaxLevel:!0,edges:[]}];function Wme(t,e,r=!1){let i=-1;const s=t.reduce((o,l)=>{var d,h;const u=Xr(l.zIndex);let c=u?l.zIndex:0;if(r){const f=e.get(l.target),m=e.get(l.source),v=l.selected||(f==null?void 0:f.selected)||(m==null?void 0:m.selected),y=Math.max(((d=m==null?void 0:m[Yt])==null?void 0:d.z)||0,((h=f==null?void 0:f[Yt])==null?void 0:h.z)||0,1e3);c=(u?l.zIndex:0)+(v?y:0)}return o[c]?o[c].push(l):o[c]=[l],i=c>i?c:i,o},{}),a=Object.entries(s).map(([o,l])=>{const u=+o;return{edges:l,level:u,isMaxLevel:u===i}});return a.length===0?Hme:a}function Gme(t,e,r){const i=Nt(S.useCallback(s=>t?s.edges.filter(a=>{const o=e.get(a.source),l=e.get(a.target);return(o==null?void 0:o.width)&&(o==null?void 0:o.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&qme({sourcePos:o.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:o.width,sourceHeight:o.height,targetWidth:l.width,targetHeight:l.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return Wme(i,e,r)}const Kme=({color:t="none",strokeWidth:e=1})=>te.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Yme=({color:t="none",strokeWidth:e=1})=>te.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),$P={[zm.Arrow]:Kme,[zm.ArrowClosed]:Yme};function Xme(t){const e=gn();return S.useMemo(()=>{var s,a;return Object.prototype.hasOwnProperty.call($P,t)?$P[t]:((a=(s=e.getState()).onError)==null||a.call(s,"009",Ps.error009(t)),null)},[t])}const Qme=({id:t,type:e,color:r,width:i=12.5,height:s=12.5,markerUnits:a="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const u=Xme(e);return u?te.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:a,orient:l,refX:"0",refY:"0"},te.createElement(u,{color:r,strokeWidth:o})):null},Jme=({defaultColor:t,rfId:e})=>r=>{const i=[];return r.edges.reduce((s,a)=>([a.markerStart,a.markerEnd].forEach(o=>{if(o&&typeof o=="object"){const l=p2(o,e);i.includes(l)||(s.push({id:l,color:o.color||t,...o}),i.push(l))}}),s),[]).sort((s,a)=>s.id.localeCompare(a.id))},k$=({defaultColor:t,rfId:e})=>{const r=Nt(S.useCallback(Jme({defaultColor:t,rfId:e}),[t,e]),(i,s)=>!(i.length!==s.length||i.some((a,o)=>a.id!==s[o].id)));return te.createElement("defs",null,r.map(i=>te.createElement(Qme,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};k$.displayName="MarkerDefinitions";var Zme=S.memo(k$);const ege=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),N$=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:r,rfId:i,edgeTypes:s,noPanClassName:a,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:c,onEdgeClick:d,onEdgeDoubleClick:h,onReconnect:f,onReconnectStart:m,onReconnectEnd:v,reconnectRadius:y,children:b,disableKeyboardA11y:_})=>{const{edgesFocusable:w,edgesUpdatable:E,elementsSelectable:N,width:M,height:O,connectionMode:A,nodeInternals:D,onError:T}=Nt(ege,Cn),I=Gme(e,D,r);return M?te.createElement(te.Fragment,null,I.map(({level:x,edges:R,isMaxLevel:P})=>te.createElement("svg",{key:x,style:{zIndex:x},width:M,height:O,className:"react-flow__edges react-flow__container"},P&&te.createElement(Zme,{defaultColor:t,rfId:i}),te.createElement("g",null,R.map(j=>{const[$,U,Y]=FP(D.get(j.source)),[q,F,W]=FP(D.get(j.target));if(!Y||!W)return null;let Q=j.type||"default";s[Q]||(T==null||T("011",Ps.error011(Q)),Q="default");const H=s[Q]||s.default,X=A===Uo.Strict?F.target:(F.target??[]).concat(F.source??[]),J=VP(U.source,j.sourceHandle),ee=VP(X,j.targetHandle),se=(J==null?void 0:J.position)||De.Bottom,ce=(ee==null?void 0:ee.position)||De.Top,Se=!!(j.focusable||w&&typeof j.focusable>"u"),Ee=j.reconnectable||j.updatable,ie=typeof f<"u"&&(Ee||E&&typeof Ee>"u");if(!J||!ee)return T==null||T("008",Ps.error008(J,j)),null;const{sourceX:ue,sourceY:ge,targetX:ke,targetY:Re}=zme($,J,se,q,ee,ce);return te.createElement(H,{key:j.id,id:j.id,className:On([j.className,a]),type:Q,data:j.data,selected:!!j.selected,animated:!!j.animated,hidden:!!j.hidden,label:j.label,labelStyle:j.labelStyle,labelShowBg:j.labelShowBg,labelBgStyle:j.labelBgStyle,labelBgPadding:j.labelBgPadding,labelBgBorderRadius:j.labelBgBorderRadius,style:j.style,source:j.source,target:j.target,sourceHandleId:j.sourceHandle,targetHandleId:j.targetHandle,markerEnd:j.markerEnd,markerStart:j.markerStart,sourceX:ue,sourceY:ge,targetX:ke,targetY:Re,sourcePosition:se,targetPosition:ce,elementsSelectable:N,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:c,onClick:d,onEdgeDoubleClick:h,onReconnect:f,onReconnectStart:m,onReconnectEnd:v,reconnectRadius:y,rfId:i,ariaLabel:j.ariaLabel,isFocusable:Se,isReconnectable:ie,pathOptions:"pathOptions"in j?j.pathOptions:void 0,interactionWidth:j.interactionWidth,disableKeyboardA11y:_})})))),b):null};N$.displayName="EdgeRenderer";var tge=S.memo(N$);const nge=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function rge({children:t}){const e=Nt(nge);return te.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function ige(t){const e=hI(),r=S.useRef(!1);S.useEffect(()=>{!r.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),r.current=!0)},[t,e.viewportInitialized])}const sge={[De.Left]:De.Right,[De.Right]:De.Left,[De.Top]:De.Bottom,[De.Bottom]:De.Top},A$=({nodeId:t,handleType:e,style:r,type:i=la.Bezier,CustomComponent:s,connectionStatus:a})=>{var O,A,D;const{fromNode:o,handleId:l,toX:u,toY:c,connectionMode:d}=Nt(S.useCallback(T=>({fromNode:T.nodeInternals.get(t),handleId:T.connectionHandleId,toX:(T.connectionPosition.x-T.transform[0])/T.transform[2],toY:(T.connectionPosition.y-T.transform[1])/T.transform[2],connectionMode:T.connectionMode}),[t]),Cn),h=(O=o==null?void 0:o[Yt])==null?void 0:O.handleBounds;let f=h==null?void 0:h[e];if(d===Uo.Loose&&(f=f||(h==null?void 0:h[e==="source"?"target":"source"])),!o||!f)return null;const m=l?f.find(T=>T.id===l):f[0],v=m?m.x+m.width/2:(o.width??0)/2,y=m?m.y+m.height/2:o.height??0,b=(((A=o.positionAbsolute)==null?void 0:A.x)??0)+v,_=(((D=o.positionAbsolute)==null?void 0:D.y)??0)+y,w=m==null?void 0:m.position,E=w?sge[w]:null;if(!w||!E)return null;if(s)return te.createElement(s,{connectionLineType:i,connectionLineStyle:r,fromNode:o,fromHandle:m,fromX:b,fromY:_,toX:u,toY:c,fromPosition:w,toPosition:E,connectionStatus:a});let N="";const M={sourceX:b,sourceY:_,sourcePosition:w,targetX:u,targetY:c,targetPosition:E};return i===la.Bezier?[N]=Z9(M):i===la.Step?[N]=f2({...M,borderRadius:0}):i===la.SmoothStep?[N]=f2(M):i===la.SimpleBezier?[N]=J9(M):N=`M${b},${_} ${u},${c}`,te.createElement("path",{d:N,fill:"none",className:"react-flow__connection-path",style:r})};A$.displayName="ConnectionLine";const age=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function oge({containerStyle:t,style:e,type:r,component:i}){const{nodeId:s,handleType:a,nodesConnectable:o,width:l,height:u,connectionStatus:c}=Nt(age,Cn);return!(s&&a&&l&&o)?null:te.createElement("svg",{style:t,width:l,height:u,className:"react-flow__edges react-flow__connectionline react-flow__container"},te.createElement("g",{className:On(["react-flow__connection",c])},te.createElement(A$,{nodeId:s,handleType:a,style:e,type:r,CustomComponent:i,connectionStatus:c})))}function UP(t,e){return S.useRef(null),gn(),S.useMemo(()=>e(t),[t])}const R$=({nodeTypes:t,edgeTypes:e,onMove:r,onMoveStart:i,onMoveEnd:s,onInit:a,onNodeClick:o,onEdgeClick:l,onNodeDoubleClick:u,onEdgeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:f,onNodeContextMenu:m,onSelectionContextMenu:v,onSelectionStart:y,onSelectionEnd:b,connectionLineType:_,connectionLineStyle:w,connectionLineComponent:E,connectionLineContainerStyle:N,selectionKeyCode:M,selectionOnDrag:O,selectionMode:A,multiSelectionKeyCode:D,panActivationKeyCode:T,zoomActivationKeyCode:I,deleteKeyCode:x,onlyRenderVisibleElements:R,elementsSelectable:P,selectNodesOnDrag:j,defaultViewport:$,translateExtent:U,minZoom:Y,maxZoom:q,preventScrolling:F,defaultMarkerColor:W,zoomOnScroll:Q,zoomOnPinch:H,panOnScroll:X,panOnScrollSpeed:J,panOnScrollMode:ee,zoomOnDoubleClick:se,panOnDrag:ce,onPaneClick:Se,onPaneMouseEnter:Ee,onPaneMouseMove:ie,onPaneMouseLeave:ue,onPaneScroll:ge,onPaneContextMenu:ke,onEdgeContextMenu:Re,onEdgeMouseEnter:_e,onEdgeMouseMove:V,onEdgeMouseLeave:B,onReconnect:G,onReconnectStart:K,onReconnectEnd:re,reconnectRadius:le,noDragClassName:he,noWheelClassName:ye,noPanClassName:Ie,elevateEdgesOnSelect:Be,disableKeyboardA11y:Oe,nodeOrigin:ze,nodeExtent:lt,rfId:vt})=>{const At=UP(t,Lme),Ke=UP(e,Bme);return ige(a),te.createElement(Dme,{onPaneClick:Se,onPaneMouseEnter:Ee,onPaneMouseMove:ie,onPaneMouseLeave:ue,onPaneContextMenu:ke,onPaneScroll:ge,deleteKeyCode:x,selectionKeyCode:M,selectionOnDrag:O,selectionMode:A,onSelectionStart:y,onSelectionEnd:b,multiSelectionKeyCode:D,panActivationKeyCode:T,zoomActivationKeyCode:I,elementsSelectable:P,onMove:r,onMoveStart:i,onMoveEnd:s,zoomOnScroll:Q,zoomOnPinch:H,zoomOnDoubleClick:se,panOnScroll:X,panOnScrollSpeed:J,panOnScrollMode:ee,panOnDrag:ce,defaultViewport:$,translateExtent:U,minZoom:Y,maxZoom:q,onSelectionContextMenu:v,preventScrolling:F,noDragClassName:he,noWheelClassName:ye,noPanClassName:Ie,disableKeyboardA11y:Oe},te.createElement(rge,null,te.createElement(tge,{edgeTypes:Ke,onEdgeClick:l,onEdgeDoubleClick:c,onlyRenderVisibleElements:R,onEdgeContextMenu:Re,onEdgeMouseEnter:_e,onEdgeMouseMove:V,onEdgeMouseLeave:B,onReconnect:G,onReconnectStart:K,onReconnectEnd:re,reconnectRadius:le,defaultMarkerColor:W,noPanClassName:Ie,elevateEdgesOnSelect:!!Be,disableKeyboardA11y:Oe,rfId:vt},te.createElement(oge,{style:w,type:_,component:E,containerStyle:N})),te.createElement("div",{className:"react-flow__edgelabel-renderer"}),te.createElement(Vme,{nodeTypes:At,onNodeClick:o,onNodeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:h,onNodeMouseLeave:f,onNodeContextMenu:m,selectNodesOnDrag:j,onlyRenderVisibleElements:R,noPanClassName:Ie,noDragClassName:he,disableKeyboardA11y:Oe,nodeOrigin:ze,nodeExtent:lt,rfId:vt})))};R$.displayName="GraphView";var lge=S.memo(R$);const y2=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Ys={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:y2,nodeExtent:y2,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Uo.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Vpe,isValidConnection:void 0},uge=()=>Zce((t,e)=>({...Ys,setNodes:r=>{const{nodeInternals:i,nodeOrigin:s,elevateNodesOnSelect:a}=e();t({nodeInternals:S0(r,i,s,a)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:i={}}=e();t({edges:r.map(s=>({...i,...s}))})},setDefaultNodesAndEdges:(r,i)=>{const s=typeof r<"u",a=typeof i<"u",o=s?S0(r,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:o,edges:a?i:[],hasDefaultNodes:s,hasDefaultEdges:a})},updateNodeDimensions:r=>{const{onNodesChange:i,nodeInternals:s,fitViewOnInit:a,fitViewOnInitDone:o,fitViewOnInitOptions:l,domNode:u,nodeOrigin:c}=e(),d=u==null?void 0:u.querySelector(".react-flow__viewport");if(!d)return;const h=window.getComputedStyle(d),{m22:f}=new window.DOMMatrixReadOnly(h.transform),m=r.reduce((y,b)=>{const _=s.get(b.id);if(_!=null&&_.hidden)s.set(_.id,{..._,[Yt]:{..._[Yt],handleBounds:void 0}});else if(_){const w=sI(b.nodeElement);!!(w.width&&w.height&&(_.width!==w.width||_.height!==w.height||b.forceUpdate))&&(s.set(_.id,{..._,[Yt]:{..._[Yt],handleBounds:{source:MP(".source",b.nodeElement,f,c),target:MP(".target",b.nodeElement,f,c)}},...w}),y.push({id:_.id,type:"dimensions",dimensions:w}))}return y},[]);v$(s,c);const v=o||a&&!o&&y$(e,{initial:!0,...l});t({nodeInternals:new Map(s),fitViewOnInitDone:v}),(m==null?void 0:m.length)>0&&(i==null||i(m))},updateNodePositions:(r,i=!0,s=!1)=>{const{triggerNodeChanges:a}=e(),o=r.map(l=>{const u={id:l.id,type:"position",dragging:s};return i&&(u.positionAbsolute=l.positionAbsolute,u.position=l.position),u});a(o)},triggerNodeChanges:r=>{const{onNodesChange:i,nodeInternals:s,hasDefaultNodes:a,nodeOrigin:o,getNodes:l,elevateNodesOnSelect:u}=e();if(r!=null&&r.length){if(a){const c=pI(r,l()),d=S0(c,s,o,u);t({nodeInternals:d})}i==null||i(r)}},addSelectedNodes:r=>{const{multiSelectionActive:i,edges:s,getNodes:a}=e();let o,l=null;i?o=r.map(u=>ta(u,!0)):(o=Fl(a(),r),l=Fl(s,[])),Kf({changedNodes:o,changedEdges:l,get:e,set:t})},addSelectedEdges:r=>{const{multiSelectionActive:i,edges:s,getNodes:a}=e();let o,l=null;i?o=r.map(u=>ta(u,!0)):(o=Fl(s,r),l=Fl(a(),[])),Kf({changedNodes:l,changedEdges:o,get:e,set:t})},unselectNodesAndEdges:({nodes:r,edges:i}={})=>{const{edges:s,getNodes:a}=e(),o=r||a(),l=i||s,u=o.map(d=>(d.selected=!1,ta(d.id,!1))),c=l.map(d=>ta(d.id,!1));Kf({changedNodes:u,changedEdges:c,get:e,set:t})},setMinZoom:r=>{const{d3Zoom:i,maxZoom:s}=e();i==null||i.scaleExtent([r,s]),t({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:i,minZoom:s}=e();i==null||i.scaleExtent([s,r]),t({maxZoom:r})},setTranslateExtent:r=>{var i;(i=e().d3Zoom)==null||i.translateExtent(r),t({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:i}=e(),a=i().filter(l=>l.selected).map(l=>ta(l.id,!1)),o=r.filter(l=>l.selected).map(l=>ta(l.id,!1));Kf({changedNodes:a,changedEdges:o,get:e,set:t})},setNodeExtent:r=>{const{nodeInternals:i}=e();i.forEach(s=>{s.positionAbsolute=aI(s.position,r)}),t({nodeExtent:r,nodeInternals:new Map(i)})},panBy:r=>{const{transform:i,width:s,height:a,d3Zoom:o,d3Selection:l,translateExtent:u}=e();if(!o||!l||!r.x&&!r.y)return!1;const c=ws.translate(i[0]+r.x,i[1]+r.y).scale(i[2]),d=[[0,0],[s,a]],h=o==null?void 0:o.constrain()(c,d,u);return o.transform(l,h),i[0]!==h.x||i[1]!==h.y||i[2]!==h.k},cancelConnection:()=>t({connectionNodeId:Ys.connectionNodeId,connectionHandleId:Ys.connectionHandleId,connectionHandleType:Ys.connectionHandleType,connectionStatus:Ys.connectionStatus,connectionStartHandle:Ys.connectionStartHandle,connectionEndHandle:Ys.connectionEndHandle}),reset:()=>t({...Ys})}),Object.is),Uh=({children:t})=>{const e=S.useRef(null);return e.current||(e.current=uge()),te.createElement(Rpe,{value:e.current},t)};Uh.displayName="ReactFlowProvider";const P$=({children:t})=>S.useContext(Ev)?te.createElement(te.Fragment,null,t):te.createElement(Uh,null,t);P$.displayName="ReactFlowWrapper";const cge={input:c$,default:g2,output:h$,group:dI},dge={default:nh,straight:Iv,step:Tv,smoothstep:Sv,simplebezier:oI},hge=[0,0],fge=[15,15],pge={x:0,y:0,zoom:1},mge={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},mI=S.forwardRef(({nodes:t,edges:e,defaultNodes:r,defaultEdges:i,className:s,nodeTypes:a=cge,edgeTypes:o=dge,onNodeClick:l,onEdgeClick:u,onInit:c,onMove:d,onMoveStart:h,onMoveEnd:f,onConnect:m,onConnectStart:v,onConnectEnd:y,onClickConnectStart:b,onClickConnectEnd:_,onNodeMouseEnter:w,onNodeMouseMove:E,onNodeMouseLeave:N,onNodeContextMenu:M,onNodeDoubleClick:O,onNodeDragStart:A,onNodeDrag:D,onNodeDragStop:T,onNodesDelete:I,onEdgesDelete:x,onSelectionChange:R,onSelectionDragStart:P,onSelectionDrag:j,onSelectionDragStop:$,onSelectionContextMenu:U,onSelectionStart:Y,onSelectionEnd:q,connectionMode:F=Uo.Strict,connectionLineType:W=la.Bezier,connectionLineStyle:Q,connectionLineComponent:H,connectionLineContainerStyle:X,deleteKeyCode:J="Backspace",selectionKeyCode:ee="Shift",selectionOnDrag:se=!1,selectionMode:ce=th.Full,panActivationKeyCode:Se="Space",multiSelectionKeyCode:Ee=Bm()?"Meta":"Control",zoomActivationKeyCode:ie=Bm()?"Meta":"Control",snapToGrid:ue=!1,snapGrid:ge=fge,onlyRenderVisibleElements:ke=!1,selectNodesOnDrag:Re=!0,nodesDraggable:_e,nodesConnectable:V,nodesFocusable:B,nodeOrigin:G=hge,edgesFocusable:K,edgesUpdatable:re,elementsSelectable:le,defaultViewport:he=pge,minZoom:ye=.5,maxZoom:Ie=2,translateExtent:Be=y2,preventScrolling:Oe=!0,nodeExtent:ze,defaultMarkerColor:lt="#b1b1b7",zoomOnScroll:vt=!0,zoomOnPinch:At=!0,panOnScroll:Ke=!1,panOnScrollSpeed:Ne=.5,panOnScrollMode:oe=wo.Free,zoomOnDoubleClick:pe=!0,panOnDrag:be=!0,onPaneClick:Le,onPaneMouseEnter:Ce,onPaneMouseMove:We,onPaneMouseLeave:yt,onPaneScroll:ft,onPaneContextMenu:vn,children:Xt,onEdgeContextMenu:xt,onEdgeDoubleClick:jn,onEdgeMouseEnter:St,onEdgeMouseMove:yn,onEdgeMouseLeave:$r,onEdgeUpdate:Ti,onEdgeUpdateStart:$s,onEdgeUpdateEnd:Zt,onReconnect:Za,onReconnectStart:Ji,onReconnectEnd:_n,reconnectRadius:Us=10,edgeUpdaterRadius:nl=10,onNodesChange:si,onEdgesChange:eo,noDragClassName:rl="nodrag",noWheelClassName:Vn="nowheel",noPanClassName:Bs="nopan",fitView:zs=!1,fitViewOptions:Zi,connectOnClick:wr=!0,attributionPosition:il,proOptions:je,defaultEdgeOptions:Z,elevateNodesOnSelect:me=!0,elevateEdgesOnSelect:Me=!1,disableKeyboardA11y:mt=!1,autoPanOnConnect:en=!0,autoPanOnNodeDrag:jt=!0,connectionRadius:ln=20,isValidConnection:Fn,onError:br,style:Rt,id:es,nodeDragThreshold:sl,...Gh},Kh)=>{const al=es||"1";return te.createElement("div",{...Gh,style:{...Rt,...mge},ref:Kh,className:On(["react-flow",s]),"data-testid":"rf__wrapper",id:es},te.createElement(P$,null,te.createElement(lge,{onInit:c,onMove:d,onMoveStart:h,onMoveEnd:f,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:w,onNodeMouseMove:E,onNodeMouseLeave:N,onNodeContextMenu:M,onNodeDoubleClick:O,nodeTypes:a,edgeTypes:o,connectionLineType:W,connectionLineStyle:Q,connectionLineComponent:H,connectionLineContainerStyle:X,selectionKeyCode:ee,selectionOnDrag:se,selectionMode:ce,deleteKeyCode:J,multiSelectionKeyCode:Ee,panActivationKeyCode:Se,zoomActivationKeyCode:ie,onlyRenderVisibleElements:ke,selectNodesOnDrag:Re,defaultViewport:he,translateExtent:Be,minZoom:ye,maxZoom:Ie,preventScrolling:Oe,zoomOnScroll:vt,zoomOnPinch:At,zoomOnDoubleClick:pe,panOnScroll:Ke,panOnScrollSpeed:Ne,panOnScrollMode:oe,panOnDrag:be,onPaneClick:Le,onPaneMouseEnter:Ce,onPaneMouseMove:We,onPaneMouseLeave:yt,onPaneScroll:ft,onPaneContextMenu:vn,onSelectionContextMenu:U,onSelectionStart:Y,onSelectionEnd:q,onEdgeContextMenu:xt,onEdgeDoubleClick:jn,onEdgeMouseEnter:St,onEdgeMouseMove:yn,onEdgeMouseLeave:$r,onReconnect:Za??Ti,onReconnectStart:Ji??$s,onReconnectEnd:_n??Zt,reconnectRadius:Us??nl,defaultMarkerColor:lt,noDragClassName:rl,noWheelClassName:Vn,noPanClassName:Bs,elevateEdgesOnSelect:Me,rfId:al,disableKeyboardA11y:mt,nodeOrigin:G,nodeExtent:ze}),te.createElement(ame,{nodes:t,edges:e,defaultNodes:r,defaultEdges:i,onConnect:m,onConnectStart:v,onConnectEnd:y,onClickConnectStart:b,onClickConnectEnd:_,nodesDraggable:_e,nodesConnectable:V,nodesFocusable:B,edgesFocusable:K,edgesUpdatable:re,elementsSelectable:le,elevateNodesOnSelect:me,minZoom:ye,maxZoom:Ie,nodeExtent:ze,onNodesChange:si,onEdgesChange:eo,snapToGrid:ue,snapGrid:ge,connectionMode:F,translateExtent:Be,connectOnClick:wr,defaultEdgeOptions:Z,fitView:zs,fitViewOptions:Zi,onNodesDelete:I,onEdgesDelete:x,onNodeDragStart:A,onNodeDrag:D,onNodeDragStop:T,onSelectionDrag:j,onSelectionDragStart:P,onSelectionDragStop:$,noPanClassName:Bs,nodeOrigin:G,rfId:al,autoPanOnConnect:en,autoPanOnNodeDrag:jt,onError:br,connectionRadius:ln,isValidConnection:Fn,nodeDragThreshold:sl}),te.createElement(ime,{onSelectionChange:R}),Xt,te.createElement(Dpe,{proOptions:je,position:il}),te.createElement(dme,{rfId:al,disableKeyboardA11y:mt})))});mI.displayName="ReactFlow";function D$(t){return e=>{const[r,i]=S.useState(e),s=S.useCallback(a=>i(o=>t(a,o)),[]);return[r,i,s]}}const M$=D$(pI),L$=D$(w$),O$=({id:t,x:e,y:r,width:i,height:s,style:a,color:o,strokeColor:l,strokeWidth:u,className:c,borderRadius:d,shapeRendering:h,onClick:f,selected:m})=>{const{background:v,backgroundColor:y}=a||{},b=o||v||y;return te.createElement("rect",{className:On(["react-flow__minimap-node",{selected:m},c]),x:e,y:r,rx:d,ry:d,width:i,height:s,fill:b,stroke:l,strokeWidth:u,shapeRendering:h,onClick:f?_=>f(_,t):void 0})};O$.displayName="MiniMapNode";var gge=S.memo(O$);const vge=t=>t.nodeOrigin,yge=t=>t.getNodes().filter(e=>!e.hidden&&e.width&&e.height),k0=t=>t instanceof Function?t:()=>t;function _ge({nodeStrokeColor:t="transparent",nodeColor:e="#e2e2e2",nodeClassName:r="",nodeBorderRadius:i=5,nodeStrokeWidth:s=2,nodeComponent:a=gge,onClick:o}){const l=Nt(yge,Cn),u=Nt(vge),c=k0(e),d=k0(t),h=k0(r),f=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return te.createElement(te.Fragment,null,l.map(m=>{const{x:v,y}=To(m,u).positionAbsolute;return te.createElement(a,{key:m.id,x:v,y,width:m.width,height:m.height,style:m.style,selected:m.selected,className:h(m),color:c(m),borderRadius:i,strokeColor:d(m),strokeWidth:s,shapeRendering:f,onClick:o,id:m.id})}))}var wge=S.memo(_ge);const bge=200,xge=150,Ege=t=>{const e=t.getNodes(),r={x:-t.transform[0]/t.transform[2],y:-t.transform[1]/t.transform[2],width:t.width/t.transform[2],height:t.height/t.transform[2]};return{viewBB:r,boundingRect:e.length>0?Ope(Cv(e,t.nodeOrigin),r):r,rfId:t.rfId}},Sge="react-flow__minimap-desc";function j$({style:t,className:e,nodeStrokeColor:r="transparent",nodeColor:i="#e2e2e2",nodeClassName:s="",nodeBorderRadius:a=5,nodeStrokeWidth:o=2,nodeComponent:l,maskColor:u="rgb(240, 240, 240, 0.6)",maskStrokeColor:c="none",maskStrokeWidth:d=1,position:h="bottom-right",onClick:f,onNodeClick:m,pannable:v=!1,zoomable:y=!1,ariaLabel:b="React Flow mini map",inversePan:_=!1,zoomStep:w=10,offsetScale:E=5}){const N=gn(),M=S.useRef(null),{boundingRect:O,viewBB:A,rfId:D}=Nt(Ege,Cn),T=(t==null?void 0:t.width)??bge,I=(t==null?void 0:t.height)??xge,x=O.width/T,R=O.height/I,P=Math.max(x,R),j=P*T,$=P*I,U=E*P,Y=O.x-(j-O.width)/2-U,q=O.y-($-O.height)/2-U,F=j+U*2,W=$+U*2,Q=`${Sge}-${D}`,H=S.useRef(0);H.current=P,S.useEffect(()=>{if(M.current){const ee=Wr(M.current),se=Ee=>{const{transform:ie,d3Selection:ue,d3Zoom:ge}=N.getState();if(Ee.sourceEvent.type!=="wheel"||!ue||!ge)return;const ke=-Ee.sourceEvent.deltaY*(Ee.sourceEvent.deltaMode===1?.05:Ee.sourceEvent.deltaMode?1:.002)*w,Re=ie[2]*Math.pow(2,ke);ge.scaleTo(ue,Re)},ce=Ee=>{const{transform:ie,d3Selection:ue,d3Zoom:ge,translateExtent:ke,width:Re,height:_e}=N.getState();if(Ee.sourceEvent.type!=="mousemove"||!ue||!ge)return;const V=H.current*Math.max(1,ie[2])*(_?-1:1),B={x:ie[0]-Ee.sourceEvent.movementX*V,y:ie[1]-Ee.sourceEvent.movementY*V},G=[[0,0],[Re,_e]],K=ws.translate(B.x,B.y).scale(ie[2]),re=ge.constrain()(K,G,ke);ge.transform(ue,re)},Se=B9().on("zoom",v?ce:null).on("zoom.wheel",y?se:null);return ee.call(Se),()=>{ee.on("zoom",null)}}},[v,y,_,w]);const X=f?ee=>{const se=di(ee);f(ee,{x:se[0],y:se[1]})}:void 0,J=m?(ee,se)=>{const ce=N.getState().nodeInternals.get(se);m(ee,ce)}:void 0;return te.createElement(Yr,{position:h,style:t,className:On(["react-flow__minimap",e]),"data-testid":"rf__minimap"},te.createElement("svg",{width:T,height:I,viewBox:`${Y} ${q} ${F} ${W}`,role:"img","aria-labelledby":Q,ref:M,onClick:X},b&&te.createElement("title",{id:Q},b),te.createElement(wge,{onClick:J,nodeColor:i,nodeStrokeColor:r,nodeBorderRadius:a,nodeClassName:s,nodeStrokeWidth:o,nodeComponent:l}),te.createElement("path",{className:"react-flow__minimap-mask",d:`M${Y-U},${q-U}h${F+U*2}v${W+U*2}h${-F-U*2}z
        M${A.x},${A.y}h${A.width}v${A.height}h${-A.width}z`,fill:u,fillRule:"evenodd",stroke:c,strokeWidth:d,pointerEvents:"none"})))}j$.displayName="MiniMap";var V$=S.memo(j$);function Tge(){return te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},te.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Ige(){return te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},te.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Cge(){return te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},te.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function kge(){return te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},te.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function Nge(){return te.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},te.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const Bc=({children:t,className:e,...r})=>te.createElement("button",{type:"button",className:On(["react-flow__controls-button",e]),...r},t);Bc.displayName="ControlButton";const Age=t=>({isInteractive:t.nodesDraggable||t.nodesConnectable||t.elementsSelectable,minZoomReached:t.transform[2]<=t.minZoom,maxZoomReached:t.transform[2]>=t.maxZoom}),F$=({style:t,showZoom:e=!0,showFitView:r=!0,showInteractive:i=!0,fitViewOptions:s,onZoomIn:a,onZoomOut:o,onFitView:l,onInteractiveChange:u,className:c,children:d,position:h="bottom-left"})=>{const f=gn(),[m,v]=S.useState(!1),{isInteractive:y,minZoomReached:b,maxZoomReached:_}=Nt(Age,Cn),{zoomIn:w,zoomOut:E,fitView:N}=hI();if(S.useEffect(()=>{v(!0)},[]),!m)return null;const M=()=>{w(),a==null||a()},O=()=>{E(),o==null||o()},A=()=>{N(s),l==null||l()},D=()=>{f.setState({nodesDraggable:!y,nodesConnectable:!y,elementsSelectable:!y}),u==null||u(!y)};return te.createElement(Yr,{className:On(["react-flow__controls",c]),position:h,style:t,"data-testid":"rf__controls"},e&&te.createElement(te.Fragment,null,te.createElement(Bc,{onClick:M,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:_},te.createElement(Tge,null)),te.createElement(Bc,{onClick:O,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b},te.createElement(Ige,null))),r&&te.createElement(Bc,{className:"react-flow__controls-fitview",onClick:A,title:"fit view","aria-label":"fit view"},te.createElement(Cge,null)),i&&te.createElement(Bc,{className:"react-flow__controls-interactive",onClick:D,title:"toggle interactivity","aria-label":"toggle interactivity"},y?te.createElement(Nge,null):te.createElement(kge,null)),d)};F$.displayName="Controls";var $$=S.memo(F$),vi;(function(t){t.Lines="lines",t.Dots="dots",t.Cross="cross"})(vi||(vi={}));function Rge({color:t,dimensions:e,lineWidth:r}){return te.createElement("path",{stroke:t,strokeWidth:r,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`})}function Pge({color:t,radius:e}){return te.createElement("circle",{cx:e,cy:e,r:e,fill:t})}const Dge={[vi.Dots]:"#91919a",[vi.Lines]:"#eee",[vi.Cross]:"#e2e2e2"},Mge={[vi.Dots]:1,[vi.Lines]:1,[vi.Cross]:6},Lge=t=>({transform:t.transform,patternId:`pattern-${t.rfId}`});function U$({id:t,variant:e=vi.Dots,gap:r=20,size:i,lineWidth:s=1,offset:a=2,color:o,style:l,className:u}){const c=S.useRef(null),{transform:d,patternId:h}=Nt(Lge,Cn),f=o||Dge[e],m=i||Mge[e],v=e===vi.Dots,y=e===vi.Cross,b=Array.isArray(r)?r:[r,r],_=[b[0]*d[2]||1,b[1]*d[2]||1],w=m*d[2],E=y?[w,w]:_,N=v?[w/a,w/a]:[E[0]/a,E[1]/a];return te.createElement("svg",{className:On(["react-flow__background",u]),style:{...l,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:c,"data-testid":"rf__background"},te.createElement("pattern",{id:h+t,x:d[0]%_[0],y:d[1]%_[1],width:_[0],height:_[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${N[0]},-${N[1]})`},v?te.createElement(Pge,{color:f,radius:w/a}):te.createElement(Rge,{dimensions:E,color:f,lineWidth:s})),te.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${h+t})`}))}U$.displayName="Background";var B$=S.memo(U$),z$={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},BP=te.createContext&&te.createContext(z$),Oge=["attr","size","title"];function jge(t,e){if(t==null)return{};var r=Vge(t,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}function Vge(t,e){if(t==null)return{};var r={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;r[i]=t[i]}return r}function qm(){return qm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},qm.apply(this,arguments)}function zP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function Hm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?zP(Object(r),!0).forEach(function(i){Fge(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zP(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function Fge(t,e,r){return e=$ge(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $ge(t){var e=Uge(t,"string");return typeof e=="symbol"?e:e+""}function Uge(t,e){if(typeof t!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function q$(t){return t&&t.map((e,r)=>te.createElement(e.tag,Hm({key:r},e.attr),q$(e.child)))}function nt(t){return e=>te.createElement(Bge,qm({attr:Hm({},t.attr)},e),q$(t.child))}function Bge(t){var e=r=>{var{attr:i,size:s,title:a}=t,o=jge(t,Oge),l=s||r.size||"1em",u;return r.className&&(u=r.className),t.className&&(u=(u?u+" ":"")+t.className),te.createElement("svg",qm({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,i,o,{className:u,style:Hm(Hm({color:t.color||r.color},r.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&te.createElement("title",null,a),t.children)};return BP!==void 0?te.createElement(BP.Consumer,null,r=>e(r)):e(z$)}function H$(t){return nt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(t)}function zge(t){return nt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16zM464 96H345.94c-21.38 0-32.09 25.85-16.97 40.97l32.4 32.4L288 242.75l-73.37-73.37c-12.5-12.5-32.76-12.5-45.25 0l-68.69 68.69c-6.25 6.25-6.25 16.38 0 22.63l22.62 22.62c6.25 6.25 16.38 6.25 22.63 0L192 237.25l73.37 73.37c12.5 12.5 32.76 12.5 45.25 0l96-96 32.4 32.4c15.12 15.12 40.97 4.41 40.97-16.97V112c.01-8.84-7.15-16-15.99-16z"},child:[]}]})(t)}function qge(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M207.029 381.476L12.686 187.132c-9.373-9.373-9.373-24.569 0-33.941l22.667-22.667c9.357-9.357 24.522-9.375 33.901-.04L224 284.505l154.745-154.021c9.379-9.335 24.544-9.317 33.901.04l22.667 22.667c9.373 9.373 9.373 24.569 0 33.941L240.971 381.476c-9.373 9.372-24.569 9.372-33.942 0z"},child:[]}]})(t)}function Hge(t){return nt({attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"},child:[]}]})(t)}function Wge(t){return nt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M278.9 511.5l-61-17.7c-6.4-1.8-10-8.5-8.2-14.9L346.2 8.7c1.8-6.4 8.5-10 14.9-8.2l61 17.7c6.4 1.8 10 8.5 8.2 14.9L293.8 503.3c-1.9 6.4-8.5 10.1-14.9 8.2zm-114-112.2l43.5-46.4c4.6-4.9 4.3-12.7-.8-17.2L117 256l90.6-79.7c5.1-4.5 5.5-12.3.8-17.2l-43.5-46.4c-4.5-4.8-12.1-5.1-17-.5L3.8 247.2c-5.1 4.7-5.1 12.8 0 17.5l144.1 135.1c4.9 4.6 12.5 4.4 17-.5zm327.2.6l144.1-135.1c5.1-4.7 5.1-12.8 0-17.5L492.1 112.1c-4.8-4.5-12.4-4.3-17 .5L431.6 159c-4.6 4.9-4.3 12.7.8 17.2L523 256l-90.6 79.7c-5.1 4.5-5.5 12.3-.8 17.2l43.5 46.4c4.5 4.9 12.1 5.1 17 .6z"},child:[]}]})(t)}function Gge(t){return nt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M512.1 191l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0L552 6.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zm-10.5-58.8c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.7-82.4 14.3-52.8 52.8zM386.3 286.1l33.7 16.8c10.1 5.8 14.5 18.1 10.5 29.1-8.9 24.2-26.4 46.4-42.6 65.8-7.4 8.9-20.2 11.1-30.3 5.3l-29.1-16.8c-16 13.7-34.6 24.6-54.9 31.7v33.6c0 11.6-8.3 21.6-19.7 23.6-24.6 4.2-50.4 4.4-75.9 0-11.5-2-20-11.9-20-23.6V418c-20.3-7.2-38.9-18-54.9-31.7L74 403c-10 5.8-22.9 3.6-30.3-5.3-16.2-19.4-33.3-41.6-42.2-65.7-4-10.9.4-23.2 10.5-29.1l33.3-16.8c-3.9-20.9-3.9-42.4 0-63.4L12 205.8c-10.1-5.8-14.6-18.1-10.5-29 8.9-24.2 26-46.4 42.2-65.8 7.4-8.9 20.2-11.1 30.3-5.3l29.1 16.8c16-13.7 34.6-24.6 54.9-31.7V57.1c0-11.5 8.2-21.5 19.6-23.5 24.6-4.2 50.5-4.4 76-.1 11.5 2 20 11.9 20 23.6v33.6c20.3 7.2 38.9 18 54.9 31.7l29.1-16.8c10-5.8 22.9-3.6 30.3 5.3 16.2 19.4 33.2 41.6 42.1 65.8 4 10.9.1 23.2-10 29.1l-33.7 16.8c3.9 21 3.9 42.5 0 63.5zm-117.6 21.1c59.2-77-28.7-164.9-105.7-105.7-59.2 77 28.7 164.9 105.7 105.7zm243.4 182.7l-8.2 14.3c-3 5.3-9.4 7.5-15.1 5.4-11.8-4.4-22.6-10.7-32.1-18.6-4.6-3.8-5.8-10.5-2.8-15.7l8.2-14.3c-6.9-8-12.3-17.3-15.9-27.4h-16.5c-6 0-11.2-4.3-12.2-10.3-2-12-2.1-24.6 0-37.1 1-6 6.2-10.4 12.2-10.4h16.5c3.6-10.1 9-19.4 15.9-27.4l-8.2-14.3c-3-5.2-1.9-11.9 2.8-15.7 9.5-7.9 20.4-14.2 32.1-18.6 5.7-2.1 12.1.1 15.1 5.4l8.2 14.3c10.5-1.9 21.2-1.9 31.7 0l8.2-14.3c3-5.3 9.4-7.5 15.1-5.4 11.8 4.4 22.6 10.7 32.1 18.6 4.6 3.8 5.8 10.5 2.8 15.7l-8.2 14.3c6.9 8 12.3 17.3 15.9 27.4h16.5c6 0 11.2 4.3 12.2 10.3 2 12 2.1 24.6 0 37.1-1 6-6.2 10.4-12.2 10.4h-16.5c-3.6 10.1-9 19.4-15.9 27.4l8.2 14.3c3 5.2 1.9 11.9-2.8 15.7-9.5 7.9-20.4 14.2-32.1 18.6-5.7 2.1-12.1-.1-15.1-5.4l-8.2-14.3c-10.4 1.9-21.2 1.9-31.7 0zM501.6 431c38.5 29.6 82.4-14.3 52.8-52.8-38.5-29.6-82.4 14.3-52.8 52.8z"},child:[]}]})(t)}function Kge(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M436 192H312c-13.3 0-24-10.7-24-24V44c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v84h84c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm-276-24V44c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v84H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24zm0 300V344c0-13.3-10.7-24-24-24H12c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-84h84c6.6 0 12-5.4 12-12v-40c0-6.6-5.4-12-12-12H312c-13.3 0-24 10.7-24 24v124c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function N0(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M448 73.143v45.714C448 159.143 347.667 192 224 192S0 159.143 0 118.857V73.143C0 32.857 100.333 0 224 0s224 32.857 224 73.143zM448 176v102.857C448 319.143 347.667 352 224 352S0 319.143 0 278.857V176c48.125 33.143 136.208 48.572 224 48.572S399.874 209.143 448 176zm0 160v102.857C448 479.143 347.667 512 224 512S0 479.143 0 438.857V336c48.125 33.143 136.208 48.572 224 48.572S399.874 369.143 448 336z"},child:[]}]})(t)}function W$(t){return nt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(t)}function Yge(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 180V56c0-13.3 10.7-24 24-24h124c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H64v84c0 6.6-5.4 12-12 12H12c-6.6 0-12-5.4-12-12zM288 44v40c0 6.6 5.4 12 12 12h84v84c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12V56c0-13.3-10.7-24-24-24H300c-6.6 0-12 5.4-12 12zm148 276h-40c-6.6 0-12 5.4-12 12v84h-84c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h124c13.3 0 24-10.7 24-24V332c0-6.6-5.4-12-12-12zM160 468v-40c0-6.6-5.4-12-12-12H64v-84c0-6.6-5.4-12-12-12H12c-6.6 0-12 5.4-12 12v124c0 13.3 10.7 24 24 24h124c6.6 0 12-5.4 12-12z"},child:[]}]})(t)}function G$(t){return nt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm64 236c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-64c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12v8zm0-72v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm96-114.1v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(t)}function Xge(t){return nt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm-64 268c0 10.7-12.9 16-20.5 8.5L104 376H76c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h28l35.5-36.5c7.6-7.6 20.5-2.2 20.5 8.5v136zm33.2-47.6c9.1-9.3 9.1-24.1 0-33.4-22.1-22.8 12.2-56.2 34.4-33.5 27.2 27.9 27.2 72.4 0 100.4-21.8 22.3-56.9-10.4-34.4-33.5zm86-117.1c54.4 55.9 54.4 144.8 0 200.8-21.8 22.4-57-10.3-34.4-33.5 36.2-37.2 36.3-96.5 0-133.8-22.1-22.8 12.3-56.3 34.4-33.5zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(t)}function qP(t){return nt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M384 121.941V128H256V0h6.059c6.365 0 12.47 2.529 16.971 7.029l97.941 97.941A24.005 24.005 0 0 1 384 121.941zM224 136V0H24C10.745 0 0 10.745 0 24v464c0 13.255 10.745 24 24 24h336c13.255 0 24-10.745 24-24V160H248c-13.2 0-24-10.8-24-24zm96 144.016v111.963c0 21.445-25.943 31.998-40.971 16.971L224 353.941V392c0 13.255-10.745 24-24 24H88c-13.255 0-24-10.745-24-24V280c0-13.255 10.745-24 24-24h112c13.255 0 24 10.745 24 24v38.059l55.029-55.013c15.011-15.01 40.971-4.491 40.971 16.97z"},child:[]}]})(t)}function Qge(t){return nt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"},child:[]}]})(t)}function Jge(t){return nt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M152.1 236.2c-3.5-12.1-7.8-33.2-7.8-33.2h-.5s-4.3 21.1-7.8 33.2l-11.1 37.5H163zM616 96H336v320h280c13.3 0 24-10.7 24-24V120c0-13.3-10.7-24-24-24zm-24 120c0 6.6-5.4 12-12 12h-11.4c-6.9 23.6-21.7 47.4-42.7 69.9 8.4 6.4 17.1 12.5 26.1 18 5.5 3.4 7.3 10.5 4.1 16.2l-7.9 13.9c-3.4 5.9-10.9 7.8-16.7 4.3-12.6-7.8-24.5-16.1-35.4-24.9-10.9 8.7-22.7 17.1-35.4 24.9-5.8 3.5-13.3 1.6-16.7-4.3l-7.9-13.9c-3.2-5.6-1.4-12.8 4.2-16.2 9.3-5.7 18-11.7 26.1-18-7.9-8.4-14.9-17-21-25.7-4-5.7-2.2-13.6 3.7-17.1l6.5-3.9 7.3-4.3c5.4-3.2 12.4-1.7 16 3.4 5 7 10.8 14 17.4 20.9 13.5-14.2 23.8-28.9 30-43.2H412c-6.6 0-12-5.4-12-12v-16c0-6.6 5.4-12 12-12h64v-16c0-6.6 5.4-12 12-12h16c6.6 0 12 5.4 12 12v16h64c6.6 0 12 5.4 12 12zM0 120v272c0 13.3 10.7 24 24 24h280V96H24c-13.3 0-24 10.7-24 24zm58.9 216.1L116.4 167c1.7-4.9 6.2-8.1 11.4-8.1h32.5c5.1 0 9.7 3.3 11.4 8.1l57.5 169.1c2.6 7.8-3.1 15.9-11.4 15.9h-22.9a12 12 0 0 1-11.5-8.6l-9.4-31.9h-60.2l-9.1 31.8c-1.5 5.1-6.2 8.7-11.5 8.7H70.3c-8.2 0-14-8.1-11.4-15.9z"},child:[]}]})(t)}function Zge(t){return nt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M12.41 148.02l232.94 105.67c6.8 3.09 14.49 3.09 21.29 0l232.94-105.67c16.55-7.51 16.55-32.52 0-40.03L266.65 2.31a25.607 25.607 0 0 0-21.29 0L12.41 107.98c-16.55 7.51-16.55 32.53 0 40.04zm487.18 88.28l-58.09-26.33-161.64 73.27c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.51 209.97l-58.1 26.33c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 276.3c16.55-7.5 16.55-32.5 0-40zm0 127.8l-57.87-26.23-161.86 73.37c-7.56 3.43-15.59 5.17-23.86 5.17s-16.29-1.74-23.86-5.17L70.29 337.87 12.41 364.1c-16.55 7.5-16.55 32.5 0 40l232.94 105.59c6.8 3.08 14.49 3.08 21.29 0L499.59 404.1c16.55-7.5 16.55-32.5 0-40z"},child:[]}]})(t)}function eve(t){return nt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 0c-69.59 0-126 56.41-126 126 0 56.26 82.35 158.8 113.9 196.02 6.39 7.54 17.82 7.54 24.2 0C331.65 284.8 414 182.26 414 126 414 56.41 357.59 0 288 0zm0 168c-23.2 0-42-18.8-42-42s18.8-42 42-42 42 18.8 42 42-18.8 42-42 42zM20.12 215.95A32.006 32.006 0 0 0 0 245.66v250.32c0 11.32 11.43 19.06 21.94 14.86L160 448V214.92c-8.84-15.98-16.07-31.54-21.25-46.42L20.12 215.95zM288 359.67c-14.07 0-27.38-6.18-36.51-16.96-19.66-23.2-40.57-49.62-59.49-76.72v182l192 64V266c-18.92 27.09-39.82 53.52-59.49 76.72-9.13 10.77-22.44 16.95-36.51 16.95zm266.06-198.51L416 224v288l139.88-55.95A31.996 31.996 0 0 0 576 426.34V176.02c0-11.32-11.43-19.06-21.94-14.86z"},child:[]}]})(t)}function tve(t){return nt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zM124 296c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h264c6.6 0 12 5.4 12 12v56c0 6.6-5.4 12-12 12H124z"},child:[]}]})(t)}function _2(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M144 479H48c-26.5 0-48-21.5-48-48V79c0-26.5 21.5-48 48-48h96c26.5 0 48 21.5 48 48v352c0 26.5-21.5 48-48 48zm304-48V79c0-26.5-21.5-48-48-48h-96c-26.5 0-48 21.5-48 48v352c0 26.5 21.5 48 48 48h96c26.5 0 48-21.5 48-48z"},child:[]}]})(t)}function nve(t){return nt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm115.7 272l-176 101c-15.8 8.8-35.7-2.5-35.7-21V152c0-18.4 19.8-29.8 35.7-21l176 107c16.4 9.2 16.4 32.9 0 42z"},child:[]}]})(t)}function fa(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M424.4 214.7L72.4 6.6C43.8-10.3 0 6.1 0 47.9V464c0 37.5 40.7 60.1 72.4 41.3l352-208c31.4-18.5 31.5-64.1 0-82.6z"},child:[]}]})(t)}function gI(t){return nt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"},child:[]}]})(t)}function K$(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(t)}function HP(t){return nt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M32,224H64V416H32A31.96166,31.96166,0,0,1,0,384V256A31.96166,31.96166,0,0,1,32,224Zm512-48V448a64.06328,64.06328,0,0,1-64,64H160a64.06328,64.06328,0,0,1-64-64V176a79.974,79.974,0,0,1,80-80H288V32a32,32,0,0,1,64,0V96H464A79.974,79.974,0,0,1,544,176ZM264,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,264,256Zm-8,128H192v32h64Zm96,0H288v32h64ZM456,256a40,40,0,1,0-40,40A39.997,39.997,0,0,0,456,256Zm-8,128H384v32h64ZM640,256V384a31.96166,31.96166,0,0,1-32,32H576V224h32A31.96166,31.96166,0,0,1,640,256Z"},child:[]}]})(t)}function A0(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M433.941 129.941l-83.882-83.882A48 48 0 0 0 316.118 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V163.882a48 48 0 0 0-14.059-33.941zM224 416c-35.346 0-64-28.654-64-64 0-35.346 28.654-64 64-64s64 28.654 64 64c0 35.346-28.654 64-64 64zm96-304.52V212c0 6.627-5.373 12-12 12H76c-6.627 0-12-5.373-12-12V108c0-6.627 5.373-12 12-12h228.52c3.183 0 6.235 1.264 8.485 3.515l3.48 3.48A11.996 11.996 0 0 1 320 111.48z"},child:[]}]})(t)}function rve(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M64 468V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12v176.4l195.5-181C352.1 22.3 384 36.6 384 64v384c0 27.4-31.9 41.7-52.5 24.6L136 292.7V468c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12z"},child:[]}]})(t)}function ive(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M384 44v424c0 6.6-5.4 12-12 12h-48c-6.6 0-12-5.4-12-12V291.6l-195.5 181C95.9 489.7 64 475.4 64 448V64c0-27.4 31.9-41.7 52.5-24.6L312 219.3V44c0-6.6 5.4-12 12-12h48c6.6 0 12 5.4 12 12z"},child:[]}]})(t)}function sve(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 32H48C21.5 32 0 53.5 0 80v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V80c0-26.5-21.5-48-48-48z"},child:[]}]})(t)}function ave(t){return nt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64v-96h160v96zm0-160H64v-96h160v96zm224 160H288v-96h160v96zm0-160H288v-96h160v96z"},child:[]}]})(t)}function ove(t){return nt({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(t)}function vI(t){return nt({attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(t)}function Y$(t){return nt({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M296 384h-80c-13.3 0-24-10.7-24-24V192h-87.7c-17.8 0-26.7-21.5-14.1-34.1L242.3 5.7c7.5-7.5 19.8-7.5 27.3 0l152.2 152.2c12.6 12.6 3.7 34.1-14.1 34.1H320v168c0 13.3-10.7 24-24 24zm216-8v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h136v8c0 30.9 25.1 56 56 56h80c30.9 0 56-25.1 56-56v-8h136c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(t)}function lve(t){return nt({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M336.2 64H47.8C21.4 64 0 85.4 0 111.8v288.4C0 426.6 21.4 448 47.8 448h288.4c26.4 0 47.8-21.4 47.8-47.8V111.8c0-26.4-21.4-47.8-47.8-47.8zm189.4 37.7L416 177.3v157.4l109.6 75.5c21.2 14.6 50.4-.3 50.4-25.8V127.5c0-25.4-29.1-40.4-50.4-25.8z"},child:[]}]})(t)}function WP(t){return nt({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M476 480H324a36 36 0 0 1-36-36V96h-96v156a36 36 0 0 1-36 36H16a16 16 0 0 1-16-16v-32a16 16 0 0 1 16-16h112V68a36 36 0 0 1 36-36h152a36 36 0 0 1 36 36v348h96V260a36 36 0 0 1 36-36h140a16 16 0 0 1 16 16v32a16 16 0 0 1-16 16H512v156a36 36 0 0 1-36 36z"},child:[]}]})(t)}function uve(t){return nt({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M288 248v28c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-28c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm-12 72H108c-6.6 0-12 5.4-12 12v28c0 6.6 5.4 12 12 12h168c6.6 0 12-5.4 12-12v-28c0-6.6-5.4-12-12-12zm108-188.1V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V48C0 21.5 21.5 0 48 0h204.1C264.8 0 277 5.1 286 14.1L369.9 98c9 8.9 14.1 21.2 14.1 33.9zm-128-80V128h76.1L256 51.9zM336 464V176H232c-13.3 0-24-10.7-24-24V48H48v416h288z"},child:[]}]})(t)}function cve(t){return nt({attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z"},child:[]}]})(t)}function yI(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var R0,GP;function dve(){if(GP)return R0;GP=1;function t(){this.__data__=[],this.size=0}return R0=t,R0}var P0,KP;function Yu(){if(KP)return P0;KP=1;function t(e,r){return e===r||e!==e&&r!==r}return P0=t,P0}var D0,YP;function kv(){if(YP)return D0;YP=1;var t=Yu();function e(r,i){for(var s=r.length;s--;)if(t(r[s][0],i))return s;return-1}return D0=e,D0}var M0,XP;function hve(){if(XP)return M0;XP=1;var t=kv(),e=Array.prototype,r=e.splice;function i(s){var a=this.__data__,o=t(a,s);if(o<0)return!1;var l=a.length-1;return o==l?a.pop():r.call(a,o,1),--this.size,!0}return M0=i,M0}var L0,QP;function fve(){if(QP)return L0;QP=1;var t=kv();function e(r){var i=this.__data__,s=t(i,r);return s<0?void 0:i[s][1]}return L0=e,L0}var O0,JP;function pve(){if(JP)return O0;JP=1;var t=kv();function e(r){return t(this.__data__,r)>-1}return O0=e,O0}var j0,ZP;function mve(){if(ZP)return j0;ZP=1;var t=kv();function e(r,i){var s=this.__data__,a=t(s,r);return a<0?(++this.size,s.push([r,i])):s[a][1]=i,this}return j0=e,j0}var V0,e4;function Nv(){if(e4)return V0;e4=1;var t=dve(),e=hve(),r=fve(),i=pve(),s=mve();function a(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var c=o[l];this.set(c[0],c[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=i,a.prototype.set=s,V0=a,V0}var F0,t4;function gve(){if(t4)return F0;t4=1;var t=Nv();function e(){this.__data__=new t,this.size=0}return F0=e,F0}var $0,n4;function vve(){if(n4)return $0;n4=1;function t(e){var r=this.__data__,i=r.delete(e);return this.size=r.size,i}return $0=t,$0}var U0,r4;function yve(){if(r4)return U0;r4=1;function t(e){return this.__data__.get(e)}return U0=t,U0}var B0,i4;function _ve(){if(i4)return B0;i4=1;function t(e){return this.__data__.has(e)}return B0=t,B0}var z0,s4;function Bh(){if(s4)return z0;s4=1;var t=Yo,e=Vr,r="[object AsyncFunction]",i="[object Function]",s="[object GeneratorFunction]",a="[object Proxy]";function o(l){if(!e(l))return!1;var u=t(l);return u==i||u==s||u==r||u==a}return z0=o,z0}var q0,a4;function wve(){if(a4)return q0;a4=1;var t=bi,e=t["__core-js_shared__"];return q0=e,q0}var H0,o4;function bve(){if(o4)return H0;o4=1;var t=wve(),e=function(){var i=/[^.]+$/.exec(t&&t.keys&&t.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function r(i){return!!e&&e in i}return H0=r,H0}var W0,l4;function X$(){if(l4)return W0;l4=1;var t=Function.prototype,e=t.toString;function r(i){if(i!=null){try{return e.call(i)}catch{}try{return i+""}catch{}}return""}return W0=r,W0}var G0,u4;function xve(){if(u4)return G0;u4=1;var t=Bh(),e=bve(),r=Vr,i=X$(),s=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,u=o.toString,c=l.hasOwnProperty,d=RegExp("^"+u.call(c).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(f){if(!r(f)||e(f))return!1;var m=t(f)?d:a;return m.test(i(f))}return G0=h,G0}var K0,c4;function Eve(){if(c4)return K0;c4=1;function t(e,r){return e==null?void 0:e[r]}return K0=t,K0}var Y0,d4;function Jo(){if(d4)return Y0;d4=1;var t=xve(),e=Eve();function r(i,s){var a=e(i,s);return t(a)?a:void 0}return Y0=r,Y0}var X0,h4;function _I(){if(h4)return X0;h4=1;var t=Jo(),e=bi,r=t(e,"Map");return X0=r,X0}var Q0,f4;function Av(){if(f4)return Q0;f4=1;var t=Jo(),e=t(Object,"create");return Q0=e,Q0}var J0,p4;function Sve(){if(p4)return J0;p4=1;var t=Av();function e(){this.__data__=t?t(null):{},this.size=0}return J0=e,J0}var Z0,m4;function Tve(){if(m4)return Z0;m4=1;function t(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r}return Z0=t,Z0}var e_,g4;function Ive(){if(g4)return e_;g4=1;var t=Av(),e="__lodash_hash_undefined__",r=Object.prototype,i=r.hasOwnProperty;function s(a){var o=this.__data__;if(t){var l=o[a];return l===e?void 0:l}return i.call(o,a)?o[a]:void 0}return e_=s,e_}var t_,v4;function Cve(){if(v4)return t_;v4=1;var t=Av(),e=Object.prototype,r=e.hasOwnProperty;function i(s){var a=this.__data__;return t?a[s]!==void 0:r.call(a,s)}return t_=i,t_}var n_,y4;function kve(){if(y4)return n_;y4=1;var t=Av(),e="__lodash_hash_undefined__";function r(i,s){var a=this.__data__;return this.size+=this.has(i)?0:1,a[i]=t&&s===void 0?e:s,this}return n_=r,n_}var r_,_4;function Nve(){if(_4)return r_;_4=1;var t=Sve(),e=Tve(),r=Ive(),i=Cve(),s=kve();function a(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var c=o[l];this.set(c[0],c[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=i,a.prototype.set=s,r_=a,r_}var i_,w4;function Ave(){if(w4)return i_;w4=1;var t=Nve(),e=Nv(),r=_I();function i(){this.size=0,this.__data__={hash:new t,map:new(r||e),string:new t}}return i_=i,i_}var s_,b4;function Rve(){if(b4)return s_;b4=1;function t(e){var r=typeof e;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?e!=="__proto__":e===null}return s_=t,s_}var a_,x4;function Rv(){if(x4)return a_;x4=1;var t=Rve();function e(r,i){var s=r.__data__;return t(i)?s[typeof i=="string"?"string":"hash"]:s.map}return a_=e,a_}var o_,E4;function Pve(){if(E4)return o_;E4=1;var t=Rv();function e(r){var i=t(this,r).delete(r);return this.size-=i?1:0,i}return o_=e,o_}var l_,S4;function Dve(){if(S4)return l_;S4=1;var t=Rv();function e(r){return t(this,r).get(r)}return l_=e,l_}var u_,T4;function Mve(){if(T4)return u_;T4=1;var t=Rv();function e(r){return t(this,r).has(r)}return u_=e,u_}var c_,I4;function Lve(){if(I4)return c_;I4=1;var t=Rv();function e(r,i){var s=t(this,r),a=s.size;return s.set(r,i),this.size+=s.size==a?0:1,this}return c_=e,c_}var d_,C4;function wI(){if(C4)return d_;C4=1;var t=Ave(),e=Pve(),r=Dve(),i=Mve(),s=Lve();function a(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var c=o[l];this.set(c[0],c[1])}}return a.prototype.clear=t,a.prototype.delete=e,a.prototype.get=r,a.prototype.has=i,a.prototype.set=s,d_=a,d_}var h_,k4;function Ove(){if(k4)return h_;k4=1;var t=Nv(),e=_I(),r=wI(),i=200;function s(a,o){var l=this.__data__;if(l instanceof t){var u=l.__data__;if(!e||u.length<i-1)return u.push([a,o]),this.size=++l.size,this;l=this.__data__=new r(u)}return l.set(a,o),this.size=l.size,this}return h_=s,h_}var f_,N4;function Pv(){if(N4)return f_;N4=1;var t=Nv(),e=gve(),r=vve(),i=yve(),s=_ve(),a=Ove();function o(l){var u=this.__data__=new t(l);this.size=u.size}return o.prototype.clear=e,o.prototype.delete=r,o.prototype.get=i,o.prototype.has=s,o.prototype.set=a,f_=o,f_}var p_,A4;function bI(){if(A4)return p_;A4=1;function t(e,r){for(var i=-1,s=e==null?0:e.length;++i<s&&r(e[i],i,e)!==!1;);return e}return p_=t,p_}var m_,R4;function Q$(){if(R4)return m_;R4=1;var t=Jo(),e=function(){try{var r=t(Object,"defineProperty");return r({},"",{}),r}catch{}}();return m_=e,m_}var g_,P4;function Dv(){if(P4)return g_;P4=1;var t=Q$();function e(r,i,s){i=="__proto__"&&t?t(r,i,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[i]=s}return g_=e,g_}var v_,D4;function Mv(){if(D4)return v_;D4=1;var t=Dv(),e=Yu(),r=Object.prototype,i=r.hasOwnProperty;function s(a,o,l){var u=a[o];(!(i.call(a,o)&&e(u,l))||l===void 0&&!(o in a))&&t(a,o,l)}return v_=s,v_}var y_,M4;function zh(){if(M4)return y_;M4=1;var t=Mv(),e=Dv();function r(i,s,a,o){var l=!a;a||(a={});for(var u=-1,c=s.length;++u<c;){var d=s[u],h=o?o(a[d],i[d],d,a,i):void 0;h===void 0&&(h=i[d]),l?e(a,d,h):t(a,d,h)}return a}return y_=r,y_}var __,L4;function jve(){if(L4)return __;L4=1;function t(e,r){for(var i=-1,s=Array(e);++i<e;)s[i]=r(i);return s}return __=t,__}var w_,O4;function Vve(){if(O4)return w_;O4=1;var t=Yo,e=Xi,r="[object Arguments]";function i(s){return e(s)&&t(s)==r}return w_=i,w_}var b_,j4;function qh(){if(j4)return b_;j4=1;var t=Vve(),e=Xi,r=Object.prototype,i=r.hasOwnProperty,s=r.propertyIsEnumerable,a=t(function(){return arguments}())?t:function(o){return e(o)&&i.call(o,"callee")&&!s.call(o,"callee")};return b_=a,b_}var x_,V4;function on(){if(V4)return x_;V4=1;var t=Array.isArray;return x_=t,x_}var zc={exports:{}},E_,F4;function Fve(){if(F4)return E_;F4=1;function t(){return!1}return E_=t,E_}zc.exports;var $4;function Xu(){return $4||($4=1,function(t,e){var r=bi,i=Fve(),s=e&&!e.nodeType&&e,a=s&&!0&&t&&!t.nodeType&&t,o=a&&a.exports===s,l=o?r.Buffer:void 0,u=l?l.isBuffer:void 0,c=u||i;t.exports=c}(zc,zc.exports)),zc.exports}var S_,U4;function Lv(){if(U4)return S_;U4=1;var t=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function r(i,s){var a=typeof i;return s=s??t,!!s&&(a=="number"||a!="symbol"&&e.test(i))&&i>-1&&i%1==0&&i<s}return S_=r,S_}var T_,B4;function xI(){if(B4)return T_;B4=1;var t=9007199254740991;function e(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=t}return T_=e,T_}var I_,z4;function $ve(){if(z4)return I_;z4=1;var t=Yo,e=xI(),r=Xi,i="[object Arguments]",s="[object Array]",a="[object Boolean]",o="[object Date]",l="[object Error]",u="[object Function]",c="[object Map]",d="[object Number]",h="[object Object]",f="[object RegExp]",m="[object Set]",v="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",_="[object DataView]",w="[object Float32Array]",E="[object Float64Array]",N="[object Int8Array]",M="[object Int16Array]",O="[object Int32Array]",A="[object Uint8Array]",D="[object Uint8ClampedArray]",T="[object Uint16Array]",I="[object Uint32Array]",x={};x[w]=x[E]=x[N]=x[M]=x[O]=x[A]=x[D]=x[T]=x[I]=!0,x[i]=x[s]=x[b]=x[a]=x[_]=x[o]=x[l]=x[u]=x[c]=x[d]=x[h]=x[f]=x[m]=x[v]=x[y]=!1;function R(P){return r(P)&&e(P.length)&&!!x[t(P)]}return I_=R,I_}var C_,q4;function Ov(){if(q4)return C_;q4=1;function t(e){return function(r){return e(r)}}return C_=t,C_}var qc={exports:{}};qc.exports;var H4;function EI(){return H4||(H4=1,function(t,e){var r=pV,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,o=a&&r.process,l=function(){try{var u=s&&s.require&&s.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}}();t.exports=l}(qc,qc.exports)),qc.exports}var k_,W4;function Hh(){if(W4)return k_;W4=1;var t=$ve(),e=Ov(),r=EI(),i=r&&r.isTypedArray,s=i?e(i):t;return k_=s,k_}var N_,G4;function J$(){if(G4)return N_;G4=1;var t=jve(),e=qh(),r=on(),i=Xu(),s=Lv(),a=Hh(),o=Object.prototype,l=o.hasOwnProperty;function u(c,d){var h=r(c),f=!h&&e(c),m=!h&&!f&&i(c),v=!h&&!f&&!m&&a(c),y=h||f||m||v,b=y?t(c.length,String):[],_=b.length;for(var w in c)(d||l.call(c,w))&&!(y&&(w=="length"||m&&(w=="offset"||w=="parent")||v&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||s(w,_)))&&b.push(w);return b}return N_=u,N_}var A_,K4;function jv(){if(K4)return A_;K4=1;var t=Object.prototype;function e(r){var i=r&&r.constructor,s=typeof i=="function"&&i.prototype||t;return r===s}return A_=e,A_}var R_,Y4;function Z$(){if(Y4)return R_;Y4=1;function t(e,r){return function(i){return e(r(i))}}return R_=t,R_}var P_,X4;function Uve(){if(X4)return P_;X4=1;var t=Z$(),e=t(Object.keys,Object);return P_=e,P_}var D_,Q4;function SI(){if(Q4)return D_;Q4=1;var t=jv(),e=Uve(),r=Object.prototype,i=r.hasOwnProperty;function s(a){if(!t(a))return e(a);var o=[];for(var l in Object(a))i.call(a,l)&&l!="constructor"&&o.push(l);return o}return D_=s,D_}var M_,J4;function Vs(){if(J4)return M_;J4=1;var t=Bh(),e=xI();function r(i){return i!=null&&e(i.length)&&!t(i)}return M_=r,M_}var L_,Z4;function Qa(){if(Z4)return L_;Z4=1;var t=J$(),e=SI(),r=Vs();function i(s){return r(s)?t(s):e(s)}return L_=i,L_}var O_,eD;function Bve(){if(eD)return O_;eD=1;var t=zh(),e=Qa();function r(i,s){return i&&t(s,e(s),i)}return O_=r,O_}var j_,tD;function zve(){if(tD)return j_;tD=1;function t(e){var r=[];if(e!=null)for(var i in Object(e))r.push(i);return r}return j_=t,j_}var V_,nD;function qve(){if(nD)return V_;nD=1;var t=Vr,e=jv(),r=zve(),i=Object.prototype,s=i.hasOwnProperty;function a(o){if(!t(o))return r(o);var l=e(o),u=[];for(var c in o)c=="constructor"&&(l||!s.call(o,c))||u.push(c);return u}return V_=a,V_}var F_,rD;function Zo(){if(rD)return F_;rD=1;var t=J$(),e=qve(),r=Vs();function i(s){return r(s)?t(s,!0):e(s)}return F_=i,F_}var $_,iD;function Hve(){if(iD)return $_;iD=1;var t=zh(),e=Zo();function r(i,s){return i&&t(s,e(s),i)}return $_=r,$_}var Hc={exports:{}};Hc.exports;var sD;function eU(){return sD||(sD=1,function(t,e){var r=bi,i=e&&!e.nodeType&&e,s=i&&!0&&t&&!t.nodeType&&t,a=s&&s.exports===i,o=a?r.Buffer:void 0,l=o?o.allocUnsafe:void 0;function u(c,d){if(d)return c.slice();var h=c.length,f=l?l(h):new c.constructor(h);return c.copy(f),f}t.exports=u}(Hc,Hc.exports)),Hc.exports}var U_,aD;function tU(){if(aD)return U_;aD=1;function t(e,r){var i=-1,s=e.length;for(r||(r=Array(s));++i<s;)r[i]=e[i];return r}return U_=t,U_}var B_,oD;function nU(){if(oD)return B_;oD=1;function t(e,r){for(var i=-1,s=e==null?0:e.length,a=0,o=[];++i<s;){var l=e[i];r(l,i,e)&&(o[a++]=l)}return o}return B_=t,B_}var z_,lD;function rU(){if(lD)return z_;lD=1;function t(){return[]}return z_=t,z_}var q_,uD;function TI(){if(uD)return q_;uD=1;var t=nU(),e=rU(),r=Object.prototype,i=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,a=s?function(o){return o==null?[]:(o=Object(o),t(s(o),function(l){return i.call(o,l)}))}:e;return q_=a,q_}var H_,cD;function Wve(){if(cD)return H_;cD=1;var t=zh(),e=TI();function r(i,s){return t(i,e(i),s)}return H_=r,H_}var W_,dD;function II(){if(dD)return W_;dD=1;function t(e,r){for(var i=-1,s=r.length,a=e.length;++i<s;)e[a+i]=r[i];return e}return W_=t,W_}var G_,hD;function Vv(){if(hD)return G_;hD=1;var t=Z$(),e=t(Object.getPrototypeOf,Object);return G_=e,G_}var K_,fD;function iU(){if(fD)return K_;fD=1;var t=II(),e=Vv(),r=TI(),i=rU(),s=Object.getOwnPropertySymbols,a=s?function(o){for(var l=[];o;)t(l,r(o)),o=e(o);return l}:i;return K_=a,K_}var Y_,pD;function Gve(){if(pD)return Y_;pD=1;var t=zh(),e=iU();function r(i,s){return t(i,e(i),s)}return Y_=r,Y_}var X_,mD;function sU(){if(mD)return X_;mD=1;var t=II(),e=on();function r(i,s,a){var o=s(i);return e(i)?o:t(o,a(i))}return X_=r,X_}var Q_,gD;function aU(){if(gD)return Q_;gD=1;var t=sU(),e=TI(),r=Qa();function i(s){return t(s,r,e)}return Q_=i,Q_}var J_,vD;function Kve(){if(vD)return J_;vD=1;var t=sU(),e=iU(),r=Zo();function i(s){return t(s,r,e)}return J_=i,J_}var Z_,yD;function Yve(){if(yD)return Z_;yD=1;var t=Jo(),e=bi,r=t(e,"DataView");return Z_=r,Z_}var ew,_D;function Xve(){if(_D)return ew;_D=1;var t=Jo(),e=bi,r=t(e,"Promise");return ew=r,ew}var tw,wD;function oU(){if(wD)return tw;wD=1;var t=Jo(),e=bi,r=t(e,"Set");return tw=r,tw}var nw,bD;function Qve(){if(bD)return nw;bD=1;var t=Jo(),e=bi,r=t(e,"WeakMap");return nw=r,nw}var rw,xD;function Qu(){if(xD)return rw;xD=1;var t=Yve(),e=_I(),r=Xve(),i=oU(),s=Qve(),a=Yo,o=X$(),l="[object Map]",u="[object Object]",c="[object Promise]",d="[object Set]",h="[object WeakMap]",f="[object DataView]",m=o(t),v=o(e),y=o(r),b=o(i),_=o(s),w=a;return(t&&w(new t(new ArrayBuffer(1)))!=f||e&&w(new e)!=l||r&&w(r.resolve())!=c||i&&w(new i)!=d||s&&w(new s)!=h)&&(w=function(E){var N=a(E),M=N==u?E.constructor:void 0,O=M?o(M):"";if(O)switch(O){case m:return f;case v:return l;case y:return c;case b:return d;case _:return h}return N}),rw=w,rw}var iw,ED;function Jve(){if(ED)return iw;ED=1;var t=Object.prototype,e=t.hasOwnProperty;function r(i){var s=i.length,a=new i.constructor(s);return s&&typeof i[0]=="string"&&e.call(i,"index")&&(a.index=i.index,a.input=i.input),a}return iw=r,iw}var sw,SD;function lU(){if(SD)return sw;SD=1;var t=bi,e=t.Uint8Array;return sw=e,sw}var aw,TD;function CI(){if(TD)return aw;TD=1;var t=lU();function e(r){var i=new r.constructor(r.byteLength);return new t(i).set(new t(r)),i}return aw=e,aw}var ow,ID;function Zve(){if(ID)return ow;ID=1;var t=CI();function e(r,i){var s=i?t(r.buffer):r.buffer;return new r.constructor(s,r.byteOffset,r.byteLength)}return ow=e,ow}var lw,CD;function eye(){if(CD)return lw;CD=1;var t=/\w*$/;function e(r){var i=new r.constructor(r.source,t.exec(r));return i.lastIndex=r.lastIndex,i}return lw=e,lw}var uw,kD;function tye(){if(kD)return uw;kD=1;var t=Bu,e=t?t.prototype:void 0,r=e?e.valueOf:void 0;function i(s){return r?Object(r.call(s)):{}}return uw=i,uw}var cw,ND;function uU(){if(ND)return cw;ND=1;var t=CI();function e(r,i){var s=i?t(r.buffer):r.buffer;return new r.constructor(s,r.byteOffset,r.length)}return cw=e,cw}var dw,AD;function nye(){if(AD)return dw;AD=1;var t=CI(),e=Zve(),r=eye(),i=tye(),s=uU(),a="[object Boolean]",o="[object Date]",l="[object Map]",u="[object Number]",c="[object RegExp]",d="[object Set]",h="[object String]",f="[object Symbol]",m="[object ArrayBuffer]",v="[object DataView]",y="[object Float32Array]",b="[object Float64Array]",_="[object Int8Array]",w="[object Int16Array]",E="[object Int32Array]",N="[object Uint8Array]",M="[object Uint8ClampedArray]",O="[object Uint16Array]",A="[object Uint32Array]";function D(T,I,x){var R=T.constructor;switch(I){case m:return t(T);case a:case o:return new R(+T);case v:return e(T,x);case y:case b:case _:case w:case E:case N:case M:case O:case A:return s(T,x);case l:return new R;case u:case h:return new R(T);case c:return r(T);case d:return new R;case f:return i(T)}}return dw=D,dw}var hw,RD;function cU(){if(RD)return hw;RD=1;var t=Vr,e=Object.create,r=function(){function i(){}return function(s){if(!t(s))return{};if(e)return e(s);i.prototype=s;var a=new i;return i.prototype=void 0,a}}();return hw=r,hw}var fw,PD;function dU(){if(PD)return fw;PD=1;var t=cU(),e=Vv(),r=jv();function i(s){return typeof s.constructor=="function"&&!r(s)?t(e(s)):{}}return fw=i,fw}var pw,DD;function rye(){if(DD)return pw;DD=1;var t=Qu(),e=Xi,r="[object Map]";function i(s){return e(s)&&t(s)==r}return pw=i,pw}var mw,MD;function iye(){if(MD)return mw;MD=1;var t=rye(),e=Ov(),r=EI(),i=r&&r.isMap,s=i?e(i):t;return mw=s,mw}var gw,LD;function sye(){if(LD)return gw;LD=1;var t=Qu(),e=Xi,r="[object Set]";function i(s){return e(s)&&t(s)==r}return gw=i,gw}var vw,OD;function aye(){if(OD)return vw;OD=1;var t=sye(),e=Ov(),r=EI(),i=r&&r.isSet,s=i?e(i):t;return vw=s,vw}var yw,jD;function hU(){if(jD)return yw;jD=1;var t=Pv(),e=bI(),r=Mv(),i=Bve(),s=Hve(),a=eU(),o=tU(),l=Wve(),u=Gve(),c=aU(),d=Kve(),h=Qu(),f=Jve(),m=nye(),v=dU(),y=on(),b=Xu(),_=iye(),w=Vr,E=aye(),N=Qa(),M=Zo(),O=1,A=2,D=4,T="[object Arguments]",I="[object Array]",x="[object Boolean]",R="[object Date]",P="[object Error]",j="[object Function]",$="[object GeneratorFunction]",U="[object Map]",Y="[object Number]",q="[object Object]",F="[object RegExp]",W="[object Set]",Q="[object String]",H="[object Symbol]",X="[object WeakMap]",J="[object ArrayBuffer]",ee="[object DataView]",se="[object Float32Array]",ce="[object Float64Array]",Se="[object Int8Array]",Ee="[object Int16Array]",ie="[object Int32Array]",ue="[object Uint8Array]",ge="[object Uint8ClampedArray]",ke="[object Uint16Array]",Re="[object Uint32Array]",_e={};_e[T]=_e[I]=_e[J]=_e[ee]=_e[x]=_e[R]=_e[se]=_e[ce]=_e[Se]=_e[Ee]=_e[ie]=_e[U]=_e[Y]=_e[q]=_e[F]=_e[W]=_e[Q]=_e[H]=_e[ue]=_e[ge]=_e[ke]=_e[Re]=!0,_e[P]=_e[j]=_e[X]=!1;function V(B,G,K,re,le,he){var ye,Ie=G&O,Be=G&A,Oe=G&D;if(K&&(ye=le?K(B,re,le,he):K(B)),ye!==void 0)return ye;if(!w(B))return B;var ze=y(B);if(ze){if(ye=f(B),!Ie)return o(B,ye)}else{var lt=h(B),vt=lt==j||lt==$;if(b(B))return a(B,Ie);if(lt==q||lt==T||vt&&!le){if(ye=Be||vt?{}:v(B),!Ie)return Be?u(B,s(ye,B)):l(B,i(ye,B))}else{if(!_e[lt])return le?B:{};ye=m(B,lt,Ie)}}he||(he=new t);var At=he.get(B);if(At)return At;he.set(B,ye),E(B)?B.forEach(function(oe){ye.add(V(oe,G,K,oe,B,he))}):_(B)&&B.forEach(function(oe,pe){ye.set(pe,V(oe,G,K,pe,B,he))});var Ke=Oe?Be?d:c:Be?M:N,Ne=ze?void 0:Ke(B);return e(Ne||B,function(oe,pe){Ne&&(pe=oe,oe=B[pe]),r(ye,pe,V(oe,G,K,pe,B,he))}),ye}return yw=V,yw}var _w,VD;function oye(){if(VD)return _w;VD=1;var t=hU(),e=4;function r(i){return t(i,e)}return _w=r,_w}var ww,FD;function kI(){if(FD)return ww;FD=1;function t(e){return function(){return e}}return ww=t,ww}var bw,$D;function lye(){if($D)return bw;$D=1;function t(e){return function(r,i,s){for(var a=-1,o=Object(r),l=s(r),u=l.length;u--;){var c=l[e?u:++a];if(i(o[c],c,o)===!1)break}return r}}return bw=t,bw}var xw,UD;function NI(){if(UD)return xw;UD=1;var t=lye(),e=t();return xw=e,xw}var Ew,BD;function AI(){if(BD)return Ew;BD=1;var t=NI(),e=Qa();function r(i,s){return i&&t(i,s,e)}return Ew=r,Ew}var Sw,zD;function uye(){if(zD)return Sw;zD=1;var t=Vs();function e(r,i){return function(s,a){if(s==null)return s;if(!t(s))return r(s,a);for(var o=s.length,l=i?o:-1,u=Object(s);(i?l--:++l<o)&&a(u[l],l,u)!==!1;);return s}}return Sw=e,Sw}var Tw,qD;function Fv(){if(qD)return Tw;qD=1;var t=AI(),e=uye(),r=e(t);return Tw=r,Tw}var Iw,HD;function el(){if(HD)return Iw;HD=1;function t(e){return e}return Iw=t,Iw}var Cw,WD;function fU(){if(WD)return Cw;WD=1;var t=el();function e(r){return typeof r=="function"?r:t}return Cw=e,Cw}var kw,GD;function pU(){if(GD)return kw;GD=1;var t=bI(),e=Fv(),r=fU(),i=on();function s(a,o){var l=i(a)?t:e;return l(a,r(o))}return kw=s,kw}var Nw,KD;function mU(){return KD||(KD=1,Nw=pU()),Nw}var Aw,YD;function cye(){if(YD)return Aw;YD=1;var t=Fv();function e(r,i){var s=[];return t(r,function(a,o,l){i(a,o,l)&&s.push(a)}),s}return Aw=e,Aw}var Rw,XD;function dye(){if(XD)return Rw;XD=1;var t="__lodash_hash_undefined__";function e(r){return this.__data__.set(r,t),this}return Rw=e,Rw}var Pw,QD;function hye(){if(QD)return Pw;QD=1;function t(e){return this.__data__.has(e)}return Pw=t,Pw}var Dw,JD;function gU(){if(JD)return Dw;JD=1;var t=wI(),e=dye(),r=hye();function i(s){var a=-1,o=s==null?0:s.length;for(this.__data__=new t;++a<o;)this.add(s[a])}return i.prototype.add=i.prototype.push=e,i.prototype.has=r,Dw=i,Dw}var Mw,ZD;function fye(){if(ZD)return Mw;ZD=1;function t(e,r){for(var i=-1,s=e==null?0:e.length;++i<s;)if(r(e[i],i,e))return!0;return!1}return Mw=t,Mw}var Lw,eM;function vU(){if(eM)return Lw;eM=1;function t(e,r){return e.has(r)}return Lw=t,Lw}var Ow,tM;function yU(){if(tM)return Ow;tM=1;var t=gU(),e=fye(),r=vU(),i=1,s=2;function a(o,l,u,c,d,h){var f=u&i,m=o.length,v=l.length;if(m!=v&&!(f&&v>m))return!1;var y=h.get(o),b=h.get(l);if(y&&b)return y==l&&b==o;var _=-1,w=!0,E=u&s?new t:void 0;for(h.set(o,l),h.set(l,o);++_<m;){var N=o[_],M=l[_];if(c)var O=f?c(M,N,_,l,o,h):c(N,M,_,o,l,h);if(O!==void 0){if(O)continue;w=!1;break}if(E){if(!e(l,function(A,D){if(!r(E,D)&&(N===A||d(N,A,u,c,h)))return E.push(D)})){w=!1;break}}else if(!(N===M||d(N,M,u,c,h))){w=!1;break}}return h.delete(o),h.delete(l),w}return Ow=a,Ow}var jw,nM;function pye(){if(nM)return jw;nM=1;function t(e){var r=-1,i=Array(e.size);return e.forEach(function(s,a){i[++r]=[a,s]}),i}return jw=t,jw}var Vw,rM;function RI(){if(rM)return Vw;rM=1;function t(e){var r=-1,i=Array(e.size);return e.forEach(function(s){i[++r]=s}),i}return Vw=t,Vw}var Fw,iM;function mye(){if(iM)return Fw;iM=1;var t=Bu,e=lU(),r=Yu(),i=yU(),s=pye(),a=RI(),o=1,l=2,u="[object Boolean]",c="[object Date]",d="[object Error]",h="[object Map]",f="[object Number]",m="[object RegExp]",v="[object Set]",y="[object String]",b="[object Symbol]",_="[object ArrayBuffer]",w="[object DataView]",E=t?t.prototype:void 0,N=E?E.valueOf:void 0;function M(O,A,D,T,I,x,R){switch(D){case w:if(O.byteLength!=A.byteLength||O.byteOffset!=A.byteOffset)return!1;O=O.buffer,A=A.buffer;case _:return!(O.byteLength!=A.byteLength||!x(new e(O),new e(A)));case u:case c:case f:return r(+O,+A);case d:return O.name==A.name&&O.message==A.message;case m:case y:return O==A+"";case h:var P=s;case v:var j=T&o;if(P||(P=a),O.size!=A.size&&!j)return!1;var $=R.get(O);if($)return $==A;T|=l,R.set(O,A);var U=i(P(O),P(A),T,I,x,R);return R.delete(O),U;case b:if(N)return N.call(O)==N.call(A)}return!1}return Fw=M,Fw}var $w,sM;function gye(){if(sM)return $w;sM=1;var t=aU(),e=1,r=Object.prototype,i=r.hasOwnProperty;function s(a,o,l,u,c,d){var h=l&e,f=t(a),m=f.length,v=t(o),y=v.length;if(m!=y&&!h)return!1;for(var b=m;b--;){var _=f[b];if(!(h?_ in o:i.call(o,_)))return!1}var w=d.get(a),E=d.get(o);if(w&&E)return w==o&&E==a;var N=!0;d.set(a,o),d.set(o,a);for(var M=h;++b<m;){_=f[b];var O=a[_],A=o[_];if(u)var D=h?u(A,O,_,o,a,d):u(O,A,_,a,o,d);if(!(D===void 0?O===A||c(O,A,l,u,d):D)){N=!1;break}M||(M=_=="constructor")}if(N&&!M){var T=a.constructor,I=o.constructor;T!=I&&"constructor"in a&&"constructor"in o&&!(typeof T=="function"&&T instanceof T&&typeof I=="function"&&I instanceof I)&&(N=!1)}return d.delete(a),d.delete(o),N}return $w=s,$w}var Uw,aM;function vye(){if(aM)return Uw;aM=1;var t=Pv(),e=yU(),r=mye(),i=gye(),s=Qu(),a=on(),o=Xu(),l=Hh(),u=1,c="[object Arguments]",d="[object Array]",h="[object Object]",f=Object.prototype,m=f.hasOwnProperty;function v(y,b,_,w,E,N){var M=a(y),O=a(b),A=M?d:s(y),D=O?d:s(b);A=A==c?h:A,D=D==c?h:D;var T=A==h,I=D==h,x=A==D;if(x&&o(y)){if(!o(b))return!1;M=!0,T=!1}if(x&&!T)return N||(N=new t),M||l(y)?e(y,b,_,w,E,N):r(y,b,A,_,w,E,N);if(!(_&u)){var R=T&&m.call(y,"__wrapped__"),P=I&&m.call(b,"__wrapped__");if(R||P){var j=R?y.value():y,$=P?b.value():b;return N||(N=new t),E(j,$,_,w,N)}}return x?(N||(N=new t),i(y,b,_,w,E,N)):!1}return Uw=v,Uw}var Bw,oM;function _U(){if(oM)return Bw;oM=1;var t=vye(),e=Xi;function r(i,s,a,o,l){return i===s?!0:i==null||s==null||!e(i)&&!e(s)?i!==i&&s!==s:t(i,s,a,o,r,l)}return Bw=r,Bw}var zw,lM;function yye(){if(lM)return zw;lM=1;var t=Pv(),e=_U(),r=1,i=2;function s(a,o,l,u){var c=l.length,d=c,h=!u;if(a==null)return!d;for(a=Object(a);c--;){var f=l[c];if(h&&f[2]?f[1]!==a[f[0]]:!(f[0]in a))return!1}for(;++c<d;){f=l[c];var m=f[0],v=a[m],y=f[1];if(h&&f[2]){if(v===void 0&&!(m in a))return!1}else{var b=new t;if(u)var _=u(v,y,m,a,o,b);if(!(_===void 0?e(y,v,r|i,u,b):_))return!1}}return!0}return zw=s,zw}var qw,uM;function wU(){if(uM)return qw;uM=1;var t=Vr;function e(r){return r===r&&!t(r)}return qw=e,qw}var Hw,cM;function _ye(){if(cM)return Hw;cM=1;var t=wU(),e=Qa();function r(i){for(var s=e(i),a=s.length;a--;){var o=s[a],l=i[o];s[a]=[o,l,t(l)]}return s}return Hw=r,Hw}var Ww,dM;function bU(){if(dM)return Ww;dM=1;function t(e,r){return function(i){return i==null?!1:i[e]===r&&(r!==void 0||e in Object(i))}}return Ww=t,Ww}var Gw,hM;function wye(){if(hM)return Gw;hM=1;var t=yye(),e=_ye(),r=bU();function i(s){var a=e(s);return a.length==1&&a[0][2]?r(a[0][0],a[0][1]):function(o){return o===s||t(o,s,a)}}return Gw=i,Gw}var Kw,fM;function PI(){if(fM)return Kw;fM=1;var t=on(),e=zu,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,i=/^\w*$/;function s(a,o){if(t(a))return!1;var l=typeof a;return l=="number"||l=="symbol"||l=="boolean"||a==null||e(a)?!0:i.test(a)||!r.test(a)||o!=null&&a in Object(o)}return Kw=s,Kw}var Yw,pM;function bye(){if(pM)return Yw;pM=1;var t=wI(),e="Expected a function";function r(i,s){if(typeof i!="function"||s!=null&&typeof s!="function")throw new TypeError(e);var a=function(){var o=arguments,l=s?s.apply(this,o):o[0],u=a.cache;if(u.has(l))return u.get(l);var c=i.apply(this,o);return a.cache=u.set(l,c)||u,c};return a.cache=new(r.Cache||t),a}return r.Cache=t,Yw=r,Yw}var Xw,mM;function xye(){if(mM)return Xw;mM=1;var t=bye(),e=500;function r(i){var s=t(i,function(o){return a.size===e&&a.clear(),o}),a=s.cache;return s}return Xw=r,Xw}var Qw,gM;function Eye(){if(gM)return Qw;gM=1;var t=xye(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,i=t(function(s){var a=[];return s.charCodeAt(0)===46&&a.push(""),s.replace(e,function(o,l,u,c){a.push(u?c.replace(r,"$1"):l||o)}),a});return Qw=i,Qw}var Jw,vM;function $v(){if(vM)return Jw;vM=1;function t(e,r){for(var i=-1,s=e==null?0:e.length,a=Array(s);++i<s;)a[i]=r(e[i],i,e);return a}return Jw=t,Jw}var Zw,yM;function Sye(){if(yM)return Zw;yM=1;var t=Bu,e=$v(),r=on(),i=zu,s=t?t.prototype:void 0,a=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return e(l,o)+"";if(i(l))return a?a.call(l):"";var u=l+"";return u=="0"&&1/l==-1/0?"-0":u}return Zw=o,Zw}var eb,_M;function xU(){if(_M)return eb;_M=1;var t=Sye();function e(r){return r==null?"":t(r)}return eb=e,eb}var tb,wM;function Uv(){if(wM)return tb;wM=1;var t=on(),e=PI(),r=Eye(),i=xU();function s(a,o){return t(a)?a:e(a,o)?[a]:r(i(a))}return tb=s,tb}var nb,bM;function Wh(){if(bM)return nb;bM=1;var t=zu;function e(r){if(typeof r=="string"||t(r))return r;var i=r+"";return i=="0"&&1/r==-1/0?"-0":i}return nb=e,nb}var rb,xM;function Bv(){if(xM)return rb;xM=1;var t=Uv(),e=Wh();function r(i,s){s=t(s,i);for(var a=0,o=s.length;i!=null&&a<o;)i=i[e(s[a++])];return a&&a==o?i:void 0}return rb=r,rb}var ib,EM;function Tye(){if(EM)return ib;EM=1;var t=Bv();function e(r,i,s){var a=r==null?void 0:t(r,i);return a===void 0?s:a}return ib=e,ib}var sb,SM;function Iye(){if(SM)return sb;SM=1;function t(e,r){return e!=null&&r in Object(e)}return sb=t,sb}var ab,TM;function EU(){if(TM)return ab;TM=1;var t=Uv(),e=qh(),r=on(),i=Lv(),s=xI(),a=Wh();function o(l,u,c){u=t(u,l);for(var d=-1,h=u.length,f=!1;++d<h;){var m=a(u[d]);if(!(f=l!=null&&c(l,m)))break;l=l[m]}return f||++d!=h?f:(h=l==null?0:l.length,!!h&&s(h)&&i(m,h)&&(r(l)||e(l)))}return ab=o,ab}var ob,IM;function SU(){if(IM)return ob;IM=1;var t=Iye(),e=EU();function r(i,s){return i!=null&&e(i,s,t)}return ob=r,ob}var lb,CM;function Cye(){if(CM)return lb;CM=1;var t=_U(),e=Tye(),r=SU(),i=PI(),s=wU(),a=bU(),o=Wh(),l=1,u=2;function c(d,h){return i(d)&&s(h)?a(o(d),h):function(f){var m=e(f,d);return m===void 0&&m===h?r(f,d):t(h,m,l|u)}}return lb=c,lb}var ub,kM;function TU(){if(kM)return ub;kM=1;function t(e){return function(r){return r==null?void 0:r[e]}}return ub=t,ub}var cb,NM;function kye(){if(NM)return cb;NM=1;var t=Bv();function e(r){return function(i){return t(i,r)}}return cb=e,cb}var db,AM;function Nye(){if(AM)return db;AM=1;var t=TU(),e=kye(),r=PI(),i=Wh();function s(a){return r(a)?t(i(a)):e(a)}return db=s,db}var hb,RM;function Fs(){if(RM)return hb;RM=1;var t=wye(),e=Cye(),r=el(),i=on(),s=Nye();function a(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?i(o)?e(o[0],o[1]):t(o):s(o)}return hb=a,hb}var fb,PM;function IU(){if(PM)return fb;PM=1;var t=nU(),e=cye(),r=Fs(),i=on();function s(a,o){var l=i(a)?t:e;return l(a,r(o,3))}return fb=s,fb}var pb,DM;function Aye(){if(DM)return pb;DM=1;var t=Object.prototype,e=t.hasOwnProperty;function r(i,s){return i!=null&&e.call(i,s)}return pb=r,pb}var mb,MM;function CU(){if(MM)return mb;MM=1;var t=Aye(),e=EU();function r(i,s){return i!=null&&e(i,s,t)}return mb=r,mb}var gb,LM;function Rye(){if(LM)return gb;LM=1;var t=SI(),e=Qu(),r=qh(),i=on(),s=Vs(),a=Xu(),o=jv(),l=Hh(),u="[object Map]",c="[object Set]",d=Object.prototype,h=d.hasOwnProperty;function f(m){if(m==null)return!0;if(s(m)&&(i(m)||typeof m=="string"||typeof m.splice=="function"||a(m)||l(m)||r(m)))return!m.length;var v=e(m);if(v==u||v==c)return!m.size;if(o(m))return!t(m).length;for(var y in m)if(h.call(m,y))return!1;return!0}return gb=f,gb}var vb,OM;function kU(){if(OM)return vb;OM=1;function t(e){return e===void 0}return vb=t,vb}var yb,jM;function NU(){if(jM)return yb;jM=1;var t=Fv(),e=Vs();function r(i,s){var a=-1,o=e(i)?Array(i.length):[];return t(i,function(l,u,c){o[++a]=s(l,u,c)}),o}return yb=r,yb}var _b,VM;function AU(){if(VM)return _b;VM=1;var t=$v(),e=Fs(),r=NU(),i=on();function s(a,o){var l=i(a)?t:r;return l(a,e(o,3))}return _b=s,_b}var wb,FM;function Pye(){if(FM)return wb;FM=1;function t(e,r,i,s){var a=-1,o=e==null?0:e.length;for(s&&o&&(i=e[++a]);++a<o;)i=r(i,e[a],a,e);return i}return wb=t,wb}var bb,$M;function Dye(){if($M)return bb;$M=1;function t(e,r,i,s,a){return a(e,function(o,l,u){i=s?(s=!1,o):r(i,o,l,u)}),i}return bb=t,bb}var xb,UM;function RU(){if(UM)return xb;UM=1;var t=Pye(),e=Fv(),r=Fs(),i=Dye(),s=on();function a(o,l,u){var c=s(o)?t:i,d=arguments.length<3;return c(o,r(l,4),u,d,e)}return xb=a,xb}var Eb,BM;function Mye(){if(BM)return Eb;BM=1;var t=Yo,e=on(),r=Xi,i="[object String]";function s(a){return typeof a=="string"||!e(a)&&r(a)&&t(a)==i}return Eb=s,Eb}var Sb,zM;function Lye(){if(zM)return Sb;zM=1;var t=TU(),e=t("length");return Sb=e,Sb}var Tb,qM;function Oye(){if(qM)return Tb;qM=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",s=e+r+i,a="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+t+s+a+"]");function u(c){return l.test(c)}return Tb=u,Tb}var Ib,HM;function jye(){if(HM)return Ib;HM=1;var t="\\ud800-\\udfff",e="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",i="\\u20d0-\\u20ff",s=e+r+i,a="\\ufe0e\\ufe0f",o="["+t+"]",l="["+s+"]",u="\\ud83c[\\udffb-\\udfff]",c="(?:"+l+"|"+u+")",d="[^"+t+"]",h="(?:\\ud83c[\\udde6-\\uddff]){2}",f="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",v=c+"?",y="["+a+"]?",b="(?:"+m+"(?:"+[d,h,f].join("|")+")"+y+v+")*",_=y+v+b,w="(?:"+[d+l+"?",l,h,f,o].join("|")+")",E=RegExp(u+"(?="+u+")|"+w+_,"g");function N(M){for(var O=E.lastIndex=0;E.test(M);)++O;return O}return Ib=N,Ib}var Cb,WM;function Vye(){if(WM)return Cb;WM=1;var t=Lye(),e=Oye(),r=jye();function i(s){return e(s)?r(s):t(s)}return Cb=i,Cb}var kb,GM;function Fye(){if(GM)return kb;GM=1;var t=SI(),e=Qu(),r=Vs(),i=Mye(),s=Vye(),a="[object Map]",o="[object Set]";function l(u){if(u==null)return 0;if(r(u))return i(u)?s(u):u.length;var c=e(u);return c==a||c==o?u.size:t(u).length}return kb=l,kb}var Nb,KM;function $ye(){if(KM)return Nb;KM=1;var t=bI(),e=cU(),r=AI(),i=Fs(),s=Vv(),a=on(),o=Xu(),l=Bh(),u=Vr,c=Hh();function d(h,f,m){var v=a(h),y=v||o(h)||c(h);if(f=i(f,4),m==null){var b=h&&h.constructor;y?m=v?new b:[]:u(h)?m=l(b)?e(s(h)):{}:m={}}return(y?t:r)(h,function(_,w,E){return f(m,_,w,E)}),m}return Nb=d,Nb}var Ab,YM;function Uye(){if(YM)return Ab;YM=1;var t=Bu,e=qh(),r=on(),i=t?t.isConcatSpreadable:void 0;function s(a){return r(a)||e(a)||!!(i&&a&&a[i])}return Ab=s,Ab}var Rb,XM;function DI(){if(XM)return Rb;XM=1;var t=II(),e=Uye();function r(i,s,a,o,l){var u=-1,c=i.length;for(a||(a=e),l||(l=[]);++u<c;){var d=i[u];s>0&&a(d)?s>1?r(d,s-1,a,o,l):t(l,d):o||(l[l.length]=d)}return l}return Rb=r,Rb}var Pb,QM;function Bye(){if(QM)return Pb;QM=1;function t(e,r,i){switch(i.length){case 0:return e.call(r);case 1:return e.call(r,i[0]);case 2:return e.call(r,i[0],i[1]);case 3:return e.call(r,i[0],i[1],i[2])}return e.apply(r,i)}return Pb=t,Pb}var Db,JM;function PU(){if(JM)return Db;JM=1;var t=Bye(),e=Math.max;function r(i,s,a){return s=e(s===void 0?i.length-1:s,0),function(){for(var o=arguments,l=-1,u=e(o.length-s,0),c=Array(u);++l<u;)c[l]=o[s+l];l=-1;for(var d=Array(s+1);++l<s;)d[l]=o[l];return d[s]=a(c),t(i,this,d)}}return Db=r,Db}var Mb,ZM;function zye(){if(ZM)return Mb;ZM=1;var t=kI(),e=Q$(),r=el(),i=e?function(s,a){return e(s,"toString",{configurable:!0,enumerable:!1,value:t(a),writable:!0})}:r;return Mb=i,Mb}var Lb,e3;function qye(){if(e3)return Lb;e3=1;var t=800,e=16,r=Date.now;function i(s){var a=0,o=0;return function(){var l=r(),u=e-(l-o);if(o=l,u>0){if(++a>=t)return arguments[0]}else a=0;return s.apply(void 0,arguments)}}return Lb=i,Lb}var Ob,t3;function DU(){if(t3)return Ob;t3=1;var t=zye(),e=qye(),r=e(t);return Ob=r,Ob}var jb,n3;function zv(){if(n3)return jb;n3=1;var t=el(),e=PU(),r=DU();function i(s,a){return r(e(s,a,t),s+"")}return jb=i,jb}var Vb,r3;function MU(){if(r3)return Vb;r3=1;function t(e,r,i,s){for(var a=e.length,o=i+(s?1:-1);s?o--:++o<a;)if(r(e[o],o,e))return o;return-1}return Vb=t,Vb}var Fb,i3;function Hye(){if(i3)return Fb;i3=1;function t(e){return e!==e}return Fb=t,Fb}var $b,s3;function Wye(){if(s3)return $b;s3=1;function t(e,r,i){for(var s=i-1,a=e.length;++s<a;)if(e[s]===r)return s;return-1}return $b=t,$b}var Ub,a3;function Gye(){if(a3)return Ub;a3=1;var t=MU(),e=Hye(),r=Wye();function i(s,a,o){return a===a?r(s,a,o):t(s,e,o)}return Ub=i,Ub}var Bb,o3;function Kye(){if(o3)return Bb;o3=1;var t=Gye();function e(r,i){var s=r==null?0:r.length;return!!s&&t(r,i,0)>-1}return Bb=e,Bb}var zb,l3;function Yye(){if(l3)return zb;l3=1;function t(e,r,i){for(var s=-1,a=e==null?0:e.length;++s<a;)if(i(r,e[s]))return!0;return!1}return zb=t,zb}var qb,u3;function Xye(){if(u3)return qb;u3=1;function t(){}return qb=t,qb}var Hb,c3;function Qye(){if(c3)return Hb;c3=1;var t=oU(),e=Xye(),r=RI(),i=1/0,s=t&&1/r(new t([,-0]))[1]==i?function(a){return new t(a)}:e;return Hb=s,Hb}var Wb,d3;function Jye(){if(d3)return Wb;d3=1;var t=gU(),e=Kye(),r=Yye(),i=vU(),s=Qye(),a=RI(),o=200;function l(u,c,d){var h=-1,f=e,m=u.length,v=!0,y=[],b=y;if(d)v=!1,f=r;else if(m>=o){var _=c?null:s(u);if(_)return a(_);v=!1,f=i,b=new t}else b=c?[]:y;e:for(;++h<m;){var w=u[h],E=c?c(w):w;if(w=d||w!==0?w:0,v&&E===E){for(var N=b.length;N--;)if(b[N]===E)continue e;c&&b.push(E),y.push(w)}else f(b,E,d)||(b!==y&&b.push(E),y.push(w))}return y}return Wb=l,Wb}var Gb,h3;function LU(){if(h3)return Gb;h3=1;var t=Vs(),e=Xi;function r(i){return e(i)&&t(i)}return Gb=r,Gb}var Kb,f3;function Zye(){if(f3)return Kb;f3=1;var t=DI(),e=zv(),r=Jye(),i=LU(),s=e(function(a){return r(t(a,1,i,!0))});return Kb=s,Kb}var Yb,p3;function e0e(){if(p3)return Yb;p3=1;var t=$v();function e(r,i){return t(i,function(s){return r[s]})}return Yb=e,Yb}var Xb,m3;function OU(){if(m3)return Xb;m3=1;var t=e0e(),e=Qa();function r(i){return i==null?[]:t(i,e(i))}return Xb=r,Xb}var Qb,g3;function ii(){if(g3)return Qb;g3=1;var t;if(typeof yI=="function")try{t={clone:oye(),constant:kI(),each:mU(),filter:IU(),has:CU(),isArray:on(),isEmpty:Rye(),isFunction:Bh(),isUndefined:kU(),keys:Qa(),map:AU(),reduce:RU(),size:Fye(),transform:$ye(),union:Zye(),values:OU()}}catch{}return t||(t=window._),Qb=t,Qb}var Jb,v3;function MI(){if(v3)return Jb;v3=1;var t=ii();Jb=s;var e="\0",r="\0",i="";function s(d){this._isDirected=t.has(d,"directed")?d.directed:!0,this._isMultigraph=t.has(d,"multigraph")?d.multigraph:!1,this._isCompound=t.has(d,"compound")?d.compound:!1,this._label=void 0,this._defaultNodeLabelFn=t.constant(void 0),this._defaultEdgeLabelFn=t.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[r]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}s.prototype._nodeCount=0,s.prototype._edgeCount=0,s.prototype.isDirected=function(){return this._isDirected},s.prototype.isMultigraph=function(){return this._isMultigraph},s.prototype.isCompound=function(){return this._isCompound},s.prototype.setGraph=function(d){return this._label=d,this},s.prototype.graph=function(){return this._label},s.prototype.setDefaultNodeLabel=function(d){return t.isFunction(d)||(d=t.constant(d)),this._defaultNodeLabelFn=d,this},s.prototype.nodeCount=function(){return this._nodeCount},s.prototype.nodes=function(){return t.keys(this._nodes)},s.prototype.sources=function(){var d=this;return t.filter(this.nodes(),function(h){return t.isEmpty(d._in[h])})},s.prototype.sinks=function(){var d=this;return t.filter(this.nodes(),function(h){return t.isEmpty(d._out[h])})},s.prototype.setNodes=function(d,h){var f=arguments,m=this;return t.each(d,function(v){f.length>1?m.setNode(v,h):m.setNode(v)}),this},s.prototype.setNode=function(d,h){return t.has(this._nodes,d)?(arguments.length>1&&(this._nodes[d]=h),this):(this._nodes[d]=arguments.length>1?h:this._defaultNodeLabelFn(d),this._isCompound&&(this._parent[d]=r,this._children[d]={},this._children[r][d]=!0),this._in[d]={},this._preds[d]={},this._out[d]={},this._sucs[d]={},++this._nodeCount,this)},s.prototype.node=function(d){return this._nodes[d]},s.prototype.hasNode=function(d){return t.has(this._nodes,d)},s.prototype.removeNode=function(d){var h=this;if(t.has(this._nodes,d)){var f=function(m){h.removeEdge(h._edgeObjs[m])};delete this._nodes[d],this._isCompound&&(this._removeFromParentsChildList(d),delete this._parent[d],t.each(this.children(d),function(m){h.setParent(m)}),delete this._children[d]),t.each(t.keys(this._in[d]),f),delete this._in[d],delete this._preds[d],t.each(t.keys(this._out[d]),f),delete this._out[d],delete this._sucs[d],--this._nodeCount}return this},s.prototype.setParent=function(d,h){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(t.isUndefined(h))h=r;else{h+="";for(var f=h;!t.isUndefined(f);f=this.parent(f))if(f===d)throw new Error("Setting "+h+" as parent of "+d+" would create a cycle");this.setNode(h)}return this.setNode(d),this._removeFromParentsChildList(d),this._parent[d]=h,this._children[h][d]=!0,this},s.prototype._removeFromParentsChildList=function(d){delete this._children[this._parent[d]][d]},s.prototype.parent=function(d){if(this._isCompound){var h=this._parent[d];if(h!==r)return h}},s.prototype.children=function(d){if(t.isUndefined(d)&&(d=r),this._isCompound){var h=this._children[d];if(h)return t.keys(h)}else{if(d===r)return this.nodes();if(this.hasNode(d))return[]}},s.prototype.predecessors=function(d){var h=this._preds[d];if(h)return t.keys(h)},s.prototype.successors=function(d){var h=this._sucs[d];if(h)return t.keys(h)},s.prototype.neighbors=function(d){var h=this.predecessors(d);if(h)return t.union(h,this.successors(d))},s.prototype.isLeaf=function(d){var h;return this.isDirected()?h=this.successors(d):h=this.neighbors(d),h.length===0},s.prototype.filterNodes=function(d){var h=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});h.setGraph(this.graph());var f=this;t.each(this._nodes,function(y,b){d(b)&&h.setNode(b,y)}),t.each(this._edgeObjs,function(y){h.hasNode(y.v)&&h.hasNode(y.w)&&h.setEdge(y,f.edge(y))});var m={};function v(y){var b=f.parent(y);return b===void 0||h.hasNode(b)?(m[y]=b,b):b in m?m[b]:v(b)}return this._isCompound&&t.each(h.nodes(),function(y){h.setParent(y,v(y))}),h},s.prototype.setDefaultEdgeLabel=function(d){return t.isFunction(d)||(d=t.constant(d)),this._defaultEdgeLabelFn=d,this},s.prototype.edgeCount=function(){return this._edgeCount},s.prototype.edges=function(){return t.values(this._edgeObjs)},s.prototype.setPath=function(d,h){var f=this,m=arguments;return t.reduce(d,function(v,y){return m.length>1?f.setEdge(v,y,h):f.setEdge(v,y),y}),this},s.prototype.setEdge=function(){var d,h,f,m,v=!1,y=arguments[0];typeof y=="object"&&y!==null&&"v"in y?(d=y.v,h=y.w,f=y.name,arguments.length===2&&(m=arguments[1],v=!0)):(d=y,h=arguments[1],f=arguments[3],arguments.length>2&&(m=arguments[2],v=!0)),d=""+d,h=""+h,t.isUndefined(f)||(f=""+f);var b=l(this._isDirected,d,h,f);if(t.has(this._edgeLabels,b))return v&&(this._edgeLabels[b]=m),this;if(!t.isUndefined(f)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(d),this.setNode(h),this._edgeLabels[b]=v?m:this._defaultEdgeLabelFn(d,h,f);var _=u(this._isDirected,d,h,f);return d=_.v,h=_.w,Object.freeze(_),this._edgeObjs[b]=_,a(this._preds[h],d),a(this._sucs[d],h),this._in[h][b]=_,this._out[d][b]=_,this._edgeCount++,this},s.prototype.edge=function(d,h,f){var m=arguments.length===1?c(this._isDirected,arguments[0]):l(this._isDirected,d,h,f);return this._edgeLabels[m]},s.prototype.hasEdge=function(d,h,f){var m=arguments.length===1?c(this._isDirected,arguments[0]):l(this._isDirected,d,h,f);return t.has(this._edgeLabels,m)},s.prototype.removeEdge=function(d,h,f){var m=arguments.length===1?c(this._isDirected,arguments[0]):l(this._isDirected,d,h,f),v=this._edgeObjs[m];return v&&(d=v.v,h=v.w,delete this._edgeLabels[m],delete this._edgeObjs[m],o(this._preds[h],d),o(this._sucs[d],h),delete this._in[h][m],delete this._out[d][m],this._edgeCount--),this},s.prototype.inEdges=function(d,h){var f=this._in[d];if(f){var m=t.values(f);return h?t.filter(m,function(v){return v.v===h}):m}},s.prototype.outEdges=function(d,h){var f=this._out[d];if(f){var m=t.values(f);return h?t.filter(m,function(v){return v.w===h}):m}},s.prototype.nodeEdges=function(d,h){var f=this.inEdges(d,h);if(f)return f.concat(this.outEdges(d,h))};function a(d,h){d[h]?d[h]++:d[h]=1}function o(d,h){--d[h]||delete d[h]}function l(d,h,f,m){var v=""+h,y=""+f;if(!d&&v>y){var b=v;v=y,y=b}return v+i+y+i+(t.isUndefined(m)?e:m)}function u(d,h,f,m){var v=""+h,y=""+f;if(!d&&v>y){var b=v;v=y,y=b}var _={v,w:y};return m&&(_.name=m),_}function c(d,h){return l(d,h.v,h.w,h.name)}return Jb}var Zb,y3;function t0e(){return y3||(y3=1,Zb="2.1.8"),Zb}var e1,_3;function n0e(){return _3||(_3=1,e1={Graph:MI(),version:t0e()}),e1}var t1,w3;function r0e(){if(w3)return t1;w3=1;var t=ii(),e=MI();t1={write:r,read:a};function r(o){var l={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:i(o),edges:s(o)};return t.isUndefined(o.graph())||(l.value=t.clone(o.graph())),l}function i(o){return t.map(o.nodes(),function(l){var u=o.node(l),c=o.parent(l),d={v:l};return t.isUndefined(u)||(d.value=u),t.isUndefined(c)||(d.parent=c),d})}function s(o){return t.map(o.edges(),function(l){var u=o.edge(l),c={v:l.v,w:l.w};return t.isUndefined(l.name)||(c.name=l.name),t.isUndefined(u)||(c.value=u),c})}function a(o){var l=new e(o.options).setGraph(o.value);return t.each(o.nodes,function(u){l.setNode(u.v,u.value),u.parent&&l.setParent(u.v,u.parent)}),t.each(o.edges,function(u){l.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),l}return t1}var n1,b3;function i0e(){if(b3)return n1;b3=1;var t=ii();n1=e;function e(r){var i={},s=[],a;function o(l){t.has(i,l)||(i[l]=!0,a.push(l),t.each(r.successors(l),o),t.each(r.predecessors(l),o))}return t.each(r.nodes(),function(l){a=[],o(l),a.length&&s.push(a)}),s}return n1}var r1,x3;function jU(){if(x3)return r1;x3=1;var t=ii();r1=e;function e(){this._arr=[],this._keyIndices={}}return e.prototype.size=function(){return this._arr.length},e.prototype.keys=function(){return this._arr.map(function(r){return r.key})},e.prototype.has=function(r){return t.has(this._keyIndices,r)},e.prototype.priority=function(r){var i=this._keyIndices[r];if(i!==void 0)return this._arr[i].priority},e.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},e.prototype.add=function(r,i){var s=this._keyIndices;if(r=String(r),!t.has(s,r)){var a=this._arr,o=a.length;return s[r]=o,a.push({key:r,priority:i}),this._decrease(o),!0}return!1},e.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var r=this._arr.pop();return delete this._keyIndices[r.key],this._heapify(0),r.key},e.prototype.decrease=function(r,i){var s=this._keyIndices[r];if(i>this._arr[s].priority)throw new Error("New priority is greater than current priority. Key: "+r+" Old: "+this._arr[s].priority+" New: "+i);this._arr[s].priority=i,this._decrease(s)},e.prototype._heapify=function(r){var i=this._arr,s=2*r,a=s+1,o=r;s<i.length&&(o=i[s].priority<i[o].priority?s:o,a<i.length&&(o=i[a].priority<i[o].priority?a:o),o!==r&&(this._swap(r,o),this._heapify(o)))},e.prototype._decrease=function(r){for(var i=this._arr,s=i[r].priority,a;r!==0&&(a=r>>1,!(i[a].priority<s));)this._swap(r,a),r=a},e.prototype._swap=function(r,i){var s=this._arr,a=this._keyIndices,o=s[r],l=s[i];s[r]=l,s[i]=o,a[l.key]=r,a[o.key]=i},r1}var i1,E3;function VU(){if(E3)return i1;E3=1;var t=ii(),e=jU();i1=i;var r=t.constant(1);function i(a,o,l,u){return s(a,String(o),l||r,u||function(c){return a.outEdges(c)})}function s(a,o,l,u){var c={},d=new e,h,f,m=function(v){var y=v.v!==h?v.v:v.w,b=c[y],_=l(v),w=f.distance+_;if(_<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+v+" Weight: "+_);w<b.distance&&(b.distance=w,b.predecessor=h,d.decrease(y,w))};for(a.nodes().forEach(function(v){var y=v===o?0:Number.POSITIVE_INFINITY;c[v]={distance:y},d.add(v,y)});d.size()>0&&(h=d.removeMin(),f=c[h],f.distance!==Number.POSITIVE_INFINITY);)u(h).forEach(m);return c}return i1}var s1,S3;function s0e(){if(S3)return s1;S3=1;var t=VU(),e=ii();s1=r;function r(i,s,a){return e.transform(i.nodes(),function(o,l){o[l]=t(i,l,s,a)},{})}return s1}var a1,T3;function FU(){if(T3)return a1;T3=1;var t=ii();a1=e;function e(r){var i=0,s=[],a={},o=[];function l(u){var c=a[u]={onStack:!0,lowlink:i,index:i++};if(s.push(u),r.successors(u).forEach(function(f){t.has(a,f)?a[f].onStack&&(c.lowlink=Math.min(c.lowlink,a[f].index)):(l(f),c.lowlink=Math.min(c.lowlink,a[f].lowlink))}),c.lowlink===c.index){var d=[],h;do h=s.pop(),a[h].onStack=!1,d.push(h);while(u!==h);o.push(d)}}return r.nodes().forEach(function(u){t.has(a,u)||l(u)}),o}return a1}var o1,I3;function a0e(){if(I3)return o1;I3=1;var t=ii(),e=FU();o1=r;function r(i){return t.filter(e(i),function(s){return s.length>1||s.length===1&&i.hasEdge(s[0],s[0])})}return o1}var l1,C3;function o0e(){if(C3)return l1;C3=1;var t=ii();l1=r;var e=t.constant(1);function r(s,a,o){return i(s,a||e,o||function(l){return s.outEdges(l)})}function i(s,a,o){var l={},u=s.nodes();return u.forEach(function(c){l[c]={},l[c][c]={distance:0},u.forEach(function(d){c!==d&&(l[c][d]={distance:Number.POSITIVE_INFINITY})}),o(c).forEach(function(d){var h=d.v===c?d.w:d.v,f=a(d);l[c][h]={distance:f,predecessor:c}})}),u.forEach(function(c){var d=l[c];u.forEach(function(h){var f=l[h];u.forEach(function(m){var v=f[c],y=d[m],b=f[m],_=v.distance+y.distance;_<b.distance&&(b.distance=_,b.predecessor=y.predecessor)})})}),l}return l1}var u1,k3;function $U(){if(k3)return u1;k3=1;var t=ii();u1=e,e.CycleException=r;function e(i){var s={},a={},o=[];function l(u){if(t.has(a,u))throw new r;t.has(s,u)||(a[u]=!0,s[u]=!0,t.each(i.predecessors(u),l),delete a[u],o.push(u))}if(t.each(i.sinks(),l),t.size(s)!==i.nodeCount())throw new r;return o}function r(){}return r.prototype=new Error,u1}var c1,N3;function l0e(){if(N3)return c1;N3=1;var t=$U();c1=e;function e(r){try{t(r)}catch(i){if(i instanceof t.CycleException)return!1;throw i}return!0}return c1}var d1,A3;function UU(){if(A3)return d1;A3=1;var t=ii();d1=e;function e(i,s,a){t.isArray(s)||(s=[s]);var o=(i.isDirected()?i.successors:i.neighbors).bind(i),l=[],u={};return t.each(s,function(c){if(!i.hasNode(c))throw new Error("Graph does not have node: "+c);r(i,c,a==="post",u,o,l)}),l}function r(i,s,a,o,l,u){t.has(o,s)||(o[s]=!0,a||u.push(s),t.each(l(s),function(c){r(i,c,a,o,l,u)}),a&&u.push(s))}return d1}var h1,R3;function u0e(){if(R3)return h1;R3=1;var t=UU();h1=e;function e(r,i){return t(r,i,"post")}return h1}var f1,P3;function c0e(){if(P3)return f1;P3=1;var t=UU();f1=e;function e(r,i){return t(r,i,"pre")}return f1}var p1,D3;function d0e(){if(D3)return p1;D3=1;var t=ii(),e=MI(),r=jU();p1=i;function i(s,a){var o=new e,l={},u=new r,c;function d(f){var m=f.v===c?f.w:f.v,v=u.priority(m);if(v!==void 0){var y=a(f);y<v&&(l[m]=c,u.decrease(m,y))}}if(s.nodeCount()===0)return o;t.each(s.nodes(),function(f){u.add(f,Number.POSITIVE_INFINITY),o.setNode(f)}),u.decrease(s.nodes()[0],0);for(var h=!1;u.size()>0;){if(c=u.removeMin(),t.has(l,c))o.setEdge(c,l[c]);else{if(h)throw new Error("Input graph is not connected: "+s);h=!0}s.nodeEdges(c).forEach(d)}return o}return p1}var m1,M3;function h0e(){return M3||(M3=1,m1={components:i0e(),dijkstra:VU(),dijkstraAll:s0e(),findCycles:a0e(),floydWarshall:o0e(),isAcyclic:l0e(),postorder:u0e(),preorder:c0e(),prim:d0e(),tarjan:FU(),topsort:$U()}),m1}var g1,L3;function f0e(){if(L3)return g1;L3=1;var t=n0e();return g1={Graph:t.Graph,json:r0e(),alg:h0e(),version:t.version},g1}var Wm;if(typeof yI=="function")try{Wm=f0e()}catch{}Wm||(Wm=window.graphlib);var Si=Wm,v1,O3;function p0e(){if(O3)return v1;O3=1;var t=hU(),e=1,r=4;function i(s){return t(s,e|r)}return v1=i,v1}var y1,j3;function qv(){if(j3)return y1;j3=1;var t=Yu(),e=Vs(),r=Lv(),i=Vr;function s(a,o,l){if(!i(l))return!1;var u=typeof o;return(u=="number"?e(l)&&r(o,l.length):u=="string"&&o in l)?t(l[o],a):!1}return y1=s,y1}var _1,V3;function m0e(){if(V3)return _1;V3=1;var t=zv(),e=Yu(),r=qv(),i=Zo(),s=Object.prototype,a=s.hasOwnProperty,o=t(function(l,u){l=Object(l);var c=-1,d=u.length,h=d>2?u[2]:void 0;for(h&&r(u[0],u[1],h)&&(d=1);++c<d;)for(var f=u[c],m=i(f),v=-1,y=m.length;++v<y;){var b=m[v],_=l[b];(_===void 0||e(_,s[b])&&!a.call(l,b))&&(l[b]=f[b])}return l});return _1=o,_1}var w1,F3;function g0e(){if(F3)return w1;F3=1;var t=Fs(),e=Vs(),r=Qa();function i(s){return function(a,o,l){var u=Object(a);if(!e(a)){var c=t(o,3);a=r(a),o=function(h){return c(u[h],h,u)}}var d=s(a,o,l);return d>-1?u[c?a[d]:d]:void 0}}return w1=i,w1}var b1,$3;function BU(){if($3)return b1;$3=1;var t=vV,e=1/0,r=17976931348623157e292;function i(s){if(!s)return s===0?s:0;if(s=t(s),s===e||s===-1/0){var a=s<0?-1:1;return a*r}return s===s?s:0}return b1=i,b1}var x1,U3;function v0e(){if(U3)return x1;U3=1;var t=BU();function e(r){var i=t(r),s=i%1;return i===i?s?i-s:i:0}return x1=e,x1}var E1,B3;function y0e(){if(B3)return E1;B3=1;var t=MU(),e=Fs(),r=v0e(),i=Math.max;function s(a,o,l){var u=a==null?0:a.length;if(!u)return-1;var c=l==null?0:r(l);return c<0&&(c=i(u+c,0)),t(a,e(o,3),c)}return E1=s,E1}var S1,z3;function _0e(){if(z3)return S1;z3=1;var t=g0e(),e=y0e(),r=t(e);return S1=r,S1}var T1,q3;function zU(){if(q3)return T1;q3=1;var t=DI();function e(r){var i=r==null?0:r.length;return i?t(r,1):[]}return T1=e,T1}var I1,H3;function w0e(){if(H3)return I1;H3=1;var t=NI(),e=fU(),r=Zo();function i(s,a){return s==null?s:t(s,e(a),r)}return I1=i,I1}var C1,W3;function b0e(){if(W3)return C1;W3=1;function t(e){var r=e==null?0:e.length;return r?e[r-1]:void 0}return C1=t,C1}var k1,G3;function x0e(){if(G3)return k1;G3=1;var t=Dv(),e=AI(),r=Fs();function i(s,a){var o={};return a=r(a,3),e(s,function(l,u,c){t(o,u,a(l,u,c))}),o}return k1=i,k1}var N1,K3;function LI(){if(K3)return N1;K3=1;var t=zu;function e(r,i,s){for(var a=-1,o=r.length;++a<o;){var l=r[a],u=i(l);if(u!=null&&(c===void 0?u===u&&!t(u):s(u,c)))var c=u,d=l}return d}return N1=e,N1}var A1,Y3;function E0e(){if(Y3)return A1;Y3=1;function t(e,r){return e>r}return A1=t,A1}var R1,X3;function S0e(){if(X3)return R1;X3=1;var t=LI(),e=E0e(),r=el();function i(s){return s&&s.length?t(s,r,e):void 0}return R1=i,R1}var P1,Q3;function qU(){if(Q3)return P1;Q3=1;var t=Dv(),e=Yu();function r(i,s,a){(a!==void 0&&!e(i[s],a)||a===void 0&&!(s in i))&&t(i,s,a)}return P1=r,P1}var D1,J3;function T0e(){if(J3)return D1;J3=1;var t=Yo,e=Vv(),r=Xi,i="[object Object]",s=Function.prototype,a=Object.prototype,o=s.toString,l=a.hasOwnProperty,u=o.call(Object);function c(d){if(!r(d)||t(d)!=i)return!1;var h=e(d);if(h===null)return!0;var f=l.call(h,"constructor")&&h.constructor;return typeof f=="function"&&f instanceof f&&o.call(f)==u}return D1=c,D1}var M1,Z3;function HU(){if(Z3)return M1;Z3=1;function t(e,r){if(!(r==="constructor"&&typeof e[r]=="function")&&r!="__proto__")return e[r]}return M1=t,M1}var L1,eL;function I0e(){if(eL)return L1;eL=1;var t=zh(),e=Zo();function r(i){return t(i,e(i))}return L1=r,L1}var O1,tL;function C0e(){if(tL)return O1;tL=1;var t=qU(),e=eU(),r=uU(),i=tU(),s=dU(),a=qh(),o=on(),l=LU(),u=Xu(),c=Bh(),d=Vr,h=T0e(),f=Hh(),m=HU(),v=I0e();function y(b,_,w,E,N,M,O){var A=m(b,w),D=m(_,w),T=O.get(D);if(T){t(b,w,T);return}var I=M?M(A,D,w+"",b,_,O):void 0,x=I===void 0;if(x){var R=o(D),P=!R&&u(D),j=!R&&!P&&f(D);I=D,R||P||j?o(A)?I=A:l(A)?I=i(A):P?(x=!1,I=e(D,!0)):j?(x=!1,I=r(D,!0)):I=[]:h(D)||a(D)?(I=A,a(A)?I=v(A):(!d(A)||c(A))&&(I=s(D))):x=!1}x&&(O.set(D,I),N(I,D,E,M,O),O.delete(D)),t(b,w,I)}return O1=y,O1}var j1,nL;function k0e(){if(nL)return j1;nL=1;var t=Pv(),e=qU(),r=NI(),i=C0e(),s=Vr,a=Zo(),o=HU();function l(u,c,d,h,f){u!==c&&r(c,function(m,v){if(f||(f=new t),s(m))i(u,c,v,d,l,h,f);else{var y=h?h(o(u,v),m,v+"",u,c,f):void 0;y===void 0&&(y=m),e(u,v,y)}},a)}return j1=l,j1}var V1,rL;function N0e(){if(rL)return V1;rL=1;var t=zv(),e=qv();function r(i){return t(function(s,a){var o=-1,l=a.length,u=l>1?a[l-1]:void 0,c=l>2?a[2]:void 0;for(u=i.length>3&&typeof u=="function"?(l--,u):void 0,c&&e(a[0],a[1],c)&&(u=l<3?void 0:u,l=1),s=Object(s);++o<l;){var d=a[o];d&&i(s,d,o,u)}return s})}return V1=r,V1}var F1,iL;function A0e(){if(iL)return F1;iL=1;var t=k0e(),e=N0e(),r=e(function(i,s,a){t(i,s,a)});return F1=r,F1}var $1,sL;function WU(){if(sL)return $1;sL=1;function t(e,r){return e<r}return $1=t,$1}var U1,aL;function R0e(){if(aL)return U1;aL=1;var t=LI(),e=WU(),r=el();function i(s){return s&&s.length?t(s,r,e):void 0}return U1=i,U1}var B1,oL;function P0e(){if(oL)return B1;oL=1;var t=LI(),e=Fs(),r=WU();function i(s,a){return s&&s.length?t(s,e(a,2),r):void 0}return B1=i,B1}var z1,lL;function D0e(){if(lL)return z1;lL=1;var t=Mv(),e=Uv(),r=Lv(),i=Vr,s=Wh();function a(o,l,u,c){if(!i(o))return o;l=e(l,o);for(var d=-1,h=l.length,f=h-1,m=o;m!=null&&++d<h;){var v=s(l[d]),y=u;if(v==="__proto__"||v==="constructor"||v==="prototype")return o;if(d!=f){var b=m[v];y=c?c(b,v,m):void 0,y===void 0&&(y=i(b)?b:r(l[d+1])?[]:{})}t(m,v,y),m=m[v]}return o}return z1=a,z1}var q1,uL;function M0e(){if(uL)return q1;uL=1;var t=Bv(),e=D0e(),r=Uv();function i(s,a,o){for(var l=-1,u=a.length,c={};++l<u;){var d=a[l],h=t(s,d);o(h,d)&&e(c,r(d,s),h)}return c}return q1=i,q1}var H1,cL;function L0e(){if(cL)return H1;cL=1;var t=M0e(),e=SU();function r(i,s){return t(i,s,function(a,o){return e(i,o)})}return H1=r,H1}var W1,dL;function O0e(){if(dL)return W1;dL=1;var t=zU(),e=PU(),r=DU();function i(s){return r(e(s,void 0,t),s+"")}return W1=i,W1}var G1,hL;function j0e(){if(hL)return G1;hL=1;var t=L0e(),e=O0e(),r=e(function(i,s){return i==null?{}:t(i,s)});return G1=r,G1}var K1,fL;function V0e(){if(fL)return K1;fL=1;var t=Math.ceil,e=Math.max;function r(i,s,a,o){for(var l=-1,u=e(t((s-i)/(a||1)),0),c=Array(u);u--;)c[o?u:++l]=i,i+=a;return c}return K1=r,K1}var Y1,pL;function F0e(){if(pL)return Y1;pL=1;var t=V0e(),e=qv(),r=BU();function i(s){return function(a,o,l){return l&&typeof l!="number"&&e(a,o,l)&&(o=l=void 0),a=r(a),o===void 0?(o=a,a=0):o=r(o),l=l===void 0?a<o?1:-1:r(l),t(a,o,l,s)}}return Y1=i,Y1}var X1,mL;function $0e(){if(mL)return X1;mL=1;var t=F0e(),e=t();return X1=e,X1}var Q1,gL;function U0e(){if(gL)return Q1;gL=1;function t(e,r){var i=e.length;for(e.sort(r);i--;)e[i]=e[i].value;return e}return Q1=t,Q1}var J1,vL;function B0e(){if(vL)return J1;vL=1;var t=zu;function e(r,i){if(r!==i){var s=r!==void 0,a=r===null,o=r===r,l=t(r),u=i!==void 0,c=i===null,d=i===i,h=t(i);if(!c&&!h&&!l&&r>i||l&&u&&d&&!c&&!h||a&&u&&d||!s&&d||!o)return 1;if(!a&&!l&&!h&&r<i||h&&s&&o&&!a&&!l||c&&s&&o||!u&&o||!d)return-1}return 0}return J1=e,J1}var Z1,yL;function z0e(){if(yL)return Z1;yL=1;var t=B0e();function e(r,i,s){for(var a=-1,o=r.criteria,l=i.criteria,u=o.length,c=s.length;++a<u;){var d=t(o[a],l[a]);if(d){if(a>=c)return d;var h=s[a];return d*(h=="desc"?-1:1)}}return r.index-i.index}return Z1=e,Z1}var ex,_L;function q0e(){if(_L)return ex;_L=1;var t=$v(),e=Bv(),r=Fs(),i=NU(),s=U0e(),a=Ov(),o=z0e(),l=el(),u=on();function c(d,h,f){h.length?h=t(h,function(y){return u(y)?function(b){return e(b,y.length===1?y[0]:y)}:y}):h=[l];var m=-1;h=t(h,a(r));var v=i(d,function(y,b,_){var w=t(h,function(E){return E(y)});return{criteria:w,index:++m,value:y}});return s(v,function(y,b){return o(y,b,f)})}return ex=c,ex}var tx,wL;function H0e(){if(wL)return tx;wL=1;var t=DI(),e=q0e(),r=zv(),i=qv(),s=r(function(a,o){if(a==null)return[];var l=o.length;return l>1&&i(a,o[0],o[1])?o=[]:l>2&&i(o[0],o[1],o[2])&&(o=[o[0]]),e(a,t(o,1),[])});return tx=s,tx}var nx,bL;function W0e(){if(bL)return nx;bL=1;var t=xU(),e=0;function r(i){var s=++e;return t(i)+s}return nx=r,nx}var rx,xL;function G0e(){if(xL)return rx;xL=1;function t(e,r,i){for(var s=-1,a=e.length,o=r.length,l={};++s<a;){var u=s<o?r[s]:void 0;i(l,e[s],u)}return l}return rx=t,rx}var ix,EL;function K0e(){if(EL)return ix;EL=1;var t=Mv(),e=G0e();function r(i,s){return e(i||[],s||[],t)}return ix=r,ix}var Gm;if(typeof yI=="function")try{Gm={cloneDeep:p0e(),constant:kI(),defaults:m0e(),each:mU(),filter:IU(),find:_0e(),flatten:zU(),forEach:pU(),forIn:w0e(),has:CU(),isUndefined:kU(),last:b0e(),map:AU(),mapValues:x0e(),max:S0e(),merge:A0e(),min:R0e(),minBy:P0e(),now:mV,pick:j0e(),range:$0e(),reduce:RU(),sortBy:H0e(),uniqueId:W0e(),values:OU(),zipObject:K0e()}}catch{}Gm||(Gm=window._);var Ut=Gm,Y0e=Hv;function Hv(){var t={};t._next=t._prev=t,this._sentinel=t}Hv.prototype.dequeue=function(){var t=this._sentinel,e=t._prev;if(e!==t)return GU(e),e};Hv.prototype.enqueue=function(t){var e=this._sentinel;t._prev&&t._next&&GU(t),t._next=e._next,e._next._prev=t,e._next=t,t._prev=e};Hv.prototype.toString=function(){for(var t=[],e=this._sentinel,r=e._prev;r!==e;)t.push(JSON.stringify(r,X0e)),r=r._prev;return"["+t.join(", ")+"]"};function GU(t){t._prev._next=t._next,t._next._prev=t._prev,delete t._next,delete t._prev}function X0e(t,e){if(t!=="_next"&&t!=="_prev")return e}var ps=Ut,Q0e=Si.Graph,J0e=Y0e,Z0e=t_e,e_e=ps.constant(1);function t_e(t,e){if(t.nodeCount()<=1)return[];var r=r_e(t,e||e_e),i=n_e(r.graph,r.buckets,r.zeroIdx);return ps.flatten(ps.map(i,function(s){return t.outEdges(s.v,s.w)}),!0)}function n_e(t,e,r){for(var i=[],s=e[e.length-1],a=e[0],o;t.nodeCount();){for(;o=a.dequeue();)sx(t,e,r,o);for(;o=s.dequeue();)sx(t,e,r,o);if(t.nodeCount()){for(var l=e.length-2;l>0;--l)if(o=e[l].dequeue(),o){i=i.concat(sx(t,e,r,o,!0));break}}}return i}function sx(t,e,r,i,s){var a=s?[]:void 0;return ps.forEach(t.inEdges(i.v),function(o){var l=t.edge(o),u=t.node(o.v);s&&a.push({v:o.v,w:o.w}),u.out-=l,w2(e,r,u)}),ps.forEach(t.outEdges(i.v),function(o){var l=t.edge(o),u=o.w,c=t.node(u);c.in-=l,w2(e,r,c)}),t.removeNode(i.v),a}function r_e(t,e){var r=new Q0e,i=0,s=0;ps.forEach(t.nodes(),function(l){r.setNode(l,{v:l,in:0,out:0})}),ps.forEach(t.edges(),function(l){var u=r.edge(l.v,l.w)||0,c=e(l),d=u+c;r.setEdge(l.v,l.w,d),s=Math.max(s,r.node(l.v).out+=c),i=Math.max(i,r.node(l.w).in+=c)});var a=ps.range(s+i+3).map(function(){return new J0e}),o=i+1;return ps.forEach(r.nodes(),function(l){w2(a,o,r.node(l))}),{graph:r,buckets:a,zeroIdx:o}}function w2(t,e,r){r.out?r.in?t[r.out-r.in+e].enqueue(r):t[t.length-1].enqueue(r):t[0].enqueue(r)}var bo=Ut,i_e=Z0e,s_e={run:a_e,undo:l_e};function a_e(t){var e=t.graph().acyclicer==="greedy"?i_e(t,r(t)):o_e(t);bo.forEach(e,function(i){var s=t.edge(i);t.removeEdge(i),s.forwardName=i.name,s.reversed=!0,t.setEdge(i.w,i.v,s,bo.uniqueId("rev"))});function r(i){return function(s){return i.edge(s).weight}}}function o_e(t){var e=[],r={},i={};function s(a){bo.has(i,a)||(i[a]=!0,r[a]=!0,bo.forEach(t.outEdges(a),function(o){bo.has(r,o.w)?e.push(o):s(o.w)}),delete r[a])}return bo.forEach(t.nodes(),s),e}function l_e(t){bo.forEach(t.edges(),function(e){var r=t.edge(e);if(r.reversed){t.removeEdge(e);var i=r.forwardName;delete r.reversed,delete r.forwardName,t.setEdge(e.w,e.v,r,i)}})}var pt=Ut,KU=Si.Graph,yr={addDummyNode:YU,simplify:u_e,asNonCompoundGraph:c_e,successorWeights:d_e,predecessorWeights:h_e,intersectRect:f_e,buildLayerMatrix:p_e,normalizeRanks:m_e,removeEmptyRanks:g_e,addBorderNode:v_e,maxRank:XU,partition:y_e,time:__e,notime:w_e};function YU(t,e,r,i){var s;do s=pt.uniqueId(i);while(t.hasNode(s));return r.dummy=e,t.setNode(s,r),s}function u_e(t){var e=new KU().setGraph(t.graph());return pt.forEach(t.nodes(),function(r){e.setNode(r,t.node(r))}),pt.forEach(t.edges(),function(r){var i=e.edge(r.v,r.w)||{weight:0,minlen:1},s=t.edge(r);e.setEdge(r.v,r.w,{weight:i.weight+s.weight,minlen:Math.max(i.minlen,s.minlen)})}),e}function c_e(t){var e=new KU({multigraph:t.isMultigraph()}).setGraph(t.graph());return pt.forEach(t.nodes(),function(r){t.children(r).length||e.setNode(r,t.node(r))}),pt.forEach(t.edges(),function(r){e.setEdge(r,t.edge(r))}),e}function d_e(t){var e=pt.map(t.nodes(),function(r){var i={};return pt.forEach(t.outEdges(r),function(s){i[s.w]=(i[s.w]||0)+t.edge(s).weight}),i});return pt.zipObject(t.nodes(),e)}function h_e(t){var e=pt.map(t.nodes(),function(r){var i={};return pt.forEach(t.inEdges(r),function(s){i[s.v]=(i[s.v]||0)+t.edge(s).weight}),i});return pt.zipObject(t.nodes(),e)}function f_e(t,e){var r=t.x,i=t.y,s=e.x-r,a=e.y-i,o=t.width/2,l=t.height/2;if(!s&&!a)throw new Error("Not possible to find intersection inside of the rectangle");var u,c;return Math.abs(a)*o>Math.abs(s)*l?(a<0&&(l=-l),u=l*s/a,c=l):(s<0&&(o=-o),u=o,c=o*a/s),{x:r+u,y:i+c}}function p_e(t){var e=pt.map(pt.range(XU(t)+1),function(){return[]});return pt.forEach(t.nodes(),function(r){var i=t.node(r),s=i.rank;pt.isUndefined(s)||(e[s][i.order]=r)}),e}function m_e(t){var e=pt.min(pt.map(t.nodes(),function(r){return t.node(r).rank}));pt.forEach(t.nodes(),function(r){var i=t.node(r);pt.has(i,"rank")&&(i.rank-=e)})}function g_e(t){var e=pt.min(pt.map(t.nodes(),function(a){return t.node(a).rank})),r=[];pt.forEach(t.nodes(),function(a){var o=t.node(a).rank-e;r[o]||(r[o]=[]),r[o].push(a)});var i=0,s=t.graph().nodeRankFactor;pt.forEach(r,function(a,o){pt.isUndefined(a)&&o%s!==0?--i:i&&pt.forEach(a,function(l){t.node(l).rank+=i})})}function v_e(t,e,r,i){var s={width:0,height:0};return arguments.length>=4&&(s.rank=r,s.order=i),YU(t,"border",s,e)}function XU(t){return pt.max(pt.map(t.nodes(),function(e){var r=t.node(e).rank;if(!pt.isUndefined(r))return r}))}function y_e(t,e){var r={lhs:[],rhs:[]};return pt.forEach(t,function(i){e(i)?r.lhs.push(i):r.rhs.push(i)}),r}function __e(t,e){var r=pt.now();try{return e()}finally{console.log(t+" time: "+(pt.now()-r)+"ms")}}function w_e(t,e){return e()}var QU=Ut,b_e=yr,x_e={run:E_e,undo:T_e};function E_e(t){t.graph().dummyChains=[],QU.forEach(t.edges(),function(e){S_e(t,e)})}function S_e(t,e){var r=e.v,i=t.node(r).rank,s=e.w,a=t.node(s).rank,o=e.name,l=t.edge(e),u=l.labelRank;if(a!==i+1){t.removeEdge(e);var c,d,h;for(h=0,++i;i<a;++h,++i)l.points=[],d={width:0,height:0,edgeLabel:l,edgeObj:e,rank:i},c=b_e.addDummyNode(t,"edge",d,"_d"),i===u&&(d.width=l.width,d.height=l.height,d.dummy="edge-label",d.labelpos=l.labelpos),t.setEdge(r,c,{weight:l.weight},o),h===0&&t.graph().dummyChains.push(c),r=c;t.setEdge(r,s,{weight:l.weight},o)}}function T_e(t){QU.forEach(t.graph().dummyChains,function(e){var r=t.node(e),i=r.edgeLabel,s;for(t.setEdge(r.edgeObj,i);r.dummy;)s=t.successors(e)[0],t.removeNode(e),i.points.push({x:r.x,y:r.y}),r.dummy==="edge-label"&&(i.x=r.x,i.y=r.y,i.width=r.width,i.height=r.height),e=s,r=t.node(e)})}var Xf=Ut,Wv={longestPath:I_e,slack:C_e};function I_e(t){var e={};function r(i){var s=t.node(i);if(Xf.has(e,i))return s.rank;e[i]=!0;var a=Xf.min(Xf.map(t.outEdges(i),function(o){return r(o.w)-t.edge(o).minlen}));return(a===Number.POSITIVE_INFINITY||a===void 0||a===null)&&(a=0),s.rank=a}Xf.forEach(t.sources(),r)}function C_e(t,e){return t.node(e.w).rank-t.node(e.v).rank-t.edge(e).minlen}var Km=Ut,k_e=Si.Graph,Ym=Wv.slack,JU=N_e;function N_e(t){var e=new k_e({directed:!1}),r=t.nodes()[0],i=t.nodeCount();e.setNode(r,{});for(var s,a;A_e(e,t)<i;)s=R_e(e,t),a=e.hasNode(s.v)?Ym(t,s):-Ym(t,s),P_e(e,t,a);return e}function A_e(t,e){function r(i){Km.forEach(e.nodeEdges(i),function(s){var a=s.v,o=i===a?s.w:a;!t.hasNode(o)&&!Ym(e,s)&&(t.setNode(o,{}),t.setEdge(i,o,{}),r(o))})}return Km.forEach(t.nodes(),r),t.nodeCount()}function R_e(t,e){return Km.minBy(e.edges(),function(r){if(t.hasNode(r.v)!==t.hasNode(r.w))return Ym(e,r)})}function P_e(t,e,r){Km.forEach(t.nodes(),function(i){e.node(i).rank+=r})}var Ds=Ut,D_e=JU,M_e=Wv.slack,L_e=Wv.longestPath,O_e=Si.alg.preorder,j_e=Si.alg.postorder,V_e=yr.simplify,F_e=tl;tl.initLowLimValues=jI;tl.initCutValues=OI;tl.calcCutValue=ZU;tl.leaveEdge=tB;tl.enterEdge=nB;tl.exchangeEdges=rB;function tl(t){t=V_e(t),L_e(t);var e=D_e(t);jI(e),OI(e,t);for(var r,i;r=tB(e);)i=nB(e,t,r),rB(e,t,r,i)}function OI(t,e){var r=j_e(t,t.nodes());r=r.slice(0,r.length-1),Ds.forEach(r,function(i){$_e(t,e,i)})}function $_e(t,e,r){var i=t.node(r),s=i.parent;t.edge(r,s).cutvalue=ZU(t,e,r)}function ZU(t,e,r){var i=t.node(r),s=i.parent,a=!0,o=e.edge(r,s),l=0;return o||(a=!1,o=e.edge(s,r)),l=o.weight,Ds.forEach(e.nodeEdges(r),function(u){var c=u.v===r,d=c?u.w:u.v;if(d!==s){var h=c===a,f=e.edge(u).weight;if(l+=h?f:-f,B_e(t,r,d)){var m=t.edge(r,d).cutvalue;l+=h?-m:m}}}),l}function jI(t,e){arguments.length<2&&(e=t.nodes()[0]),eB(t,{},1,e)}function eB(t,e,r,i,s){var a=r,o=t.node(i);return e[i]=!0,Ds.forEach(t.neighbors(i),function(l){Ds.has(e,l)||(r=eB(t,e,r,l,i))}),o.low=a,o.lim=r++,s?o.parent=s:delete o.parent,r}function tB(t){return Ds.find(t.edges(),function(e){return t.edge(e).cutvalue<0})}function nB(t,e,r){var i=r.v,s=r.w;e.hasEdge(i,s)||(i=r.w,s=r.v);var a=t.node(i),o=t.node(s),l=a,u=!1;a.lim>o.lim&&(l=o,u=!0);var c=Ds.filter(e.edges(),function(d){return u===SL(t,t.node(d.v),l)&&u!==SL(t,t.node(d.w),l)});return Ds.minBy(c,function(d){return M_e(e,d)})}function rB(t,e,r,i){var s=r.v,a=r.w;t.removeEdge(s,a),t.setEdge(i.v,i.w,{}),jI(t),OI(t,e),U_e(t,e)}function U_e(t,e){var r=Ds.find(t.nodes(),function(s){return!e.node(s).parent}),i=O_e(t,r);i=i.slice(1),Ds.forEach(i,function(s){var a=t.node(s).parent,o=e.edge(s,a),l=!1;o||(o=e.edge(a,s),l=!0),e.node(s).rank=e.node(a).rank+(l?o.minlen:-o.minlen)})}function B_e(t,e,r){return t.hasEdge(e,r)}function SL(t,e,r){return r.low<=e.lim&&e.lim<=r.lim}var z_e=Wv,iB=z_e.longestPath,q_e=JU,H_e=F_e,W_e=G_e;function G_e(t){switch(t.graph().ranker){case"network-simplex":TL(t);break;case"tight-tree":Y_e(t);break;case"longest-path":K_e(t);break;default:TL(t)}}var K_e=iB;function Y_e(t){iB(t),q_e(t)}function TL(t){H_e(t)}var b2=Ut,X_e=Q_e;function Q_e(t){var e=Z_e(t);b2.forEach(t.graph().dummyChains,function(r){for(var i=t.node(r),s=i.edgeObj,a=J_e(t,e,s.v,s.w),o=a.path,l=a.lca,u=0,c=o[u],d=!0;r!==s.w;){if(i=t.node(r),d){for(;(c=o[u])!==l&&t.node(c).maxRank<i.rank;)u++;c===l&&(d=!1)}if(!d){for(;u<o.length-1&&t.node(c=o[u+1]).minRank<=i.rank;)u++;c=o[u]}t.setParent(r,c),r=t.successors(r)[0]}})}function J_e(t,e,r,i){var s=[],a=[],o=Math.min(e[r].low,e[i].low),l=Math.max(e[r].lim,e[i].lim),u,c;u=r;do u=t.parent(u),s.push(u);while(u&&(e[u].low>o||l>e[u].lim));for(c=u,u=i;(u=t.parent(u))!==c;)a.push(u);return{path:s.concat(a.reverse()),lca:c}}function Z_e(t){var e={},r=0;function i(s){var a=r;b2.forEach(t.children(s),i),e[s]={low:a,lim:r++}}return b2.forEach(t.children(),i),e}var ms=Ut,x2=yr,ewe={run:twe,cleanup:iwe};function twe(t){var e=x2.addDummyNode(t,"root",{},"_root"),r=nwe(t),i=ms.max(ms.values(r))-1,s=2*i+1;t.graph().nestingRoot=e,ms.forEach(t.edges(),function(o){t.edge(o).minlen*=s});var a=rwe(t)+1;ms.forEach(t.children(),function(o){sB(t,e,s,a,i,r,o)}),t.graph().nodeRankFactor=s}function sB(t,e,r,i,s,a,o){var l=t.children(o);if(!l.length){o!==e&&t.setEdge(e,o,{weight:0,minlen:r});return}var u=x2.addBorderNode(t,"_bt"),c=x2.addBorderNode(t,"_bb"),d=t.node(o);t.setParent(u,o),d.borderTop=u,t.setParent(c,o),d.borderBottom=c,ms.forEach(l,function(h){sB(t,e,r,i,s,a,h);var f=t.node(h),m=f.borderTop?f.borderTop:h,v=f.borderBottom?f.borderBottom:h,y=f.borderTop?i:2*i,b=m!==v?1:s-a[o]+1;t.setEdge(u,m,{weight:y,minlen:b,nestingEdge:!0}),t.setEdge(v,c,{weight:y,minlen:b,nestingEdge:!0})}),t.parent(o)||t.setEdge(e,u,{weight:0,minlen:s+a[o]})}function nwe(t){var e={};function r(i,s){var a=t.children(i);a&&a.length&&ms.forEach(a,function(o){r(o,s+1)}),e[i]=s}return ms.forEach(t.children(),function(i){r(i,1)}),e}function rwe(t){return ms.reduce(t.edges(),function(e,r){return e+t.edge(r).weight},0)}function iwe(t){var e=t.graph();t.removeNode(e.nestingRoot),delete e.nestingRoot,ms.forEach(t.edges(),function(r){var i=t.edge(r);i.nestingEdge&&t.removeEdge(r)})}var ax=Ut,swe=yr,awe=owe;function owe(t){function e(r){var i=t.children(r),s=t.node(r);if(i.length&&ax.forEach(i,e),ax.has(s,"minRank")){s.borderLeft=[],s.borderRight=[];for(var a=s.minRank,o=s.maxRank+1;a<o;++a)IL(t,"borderLeft","_bl",r,s,a),IL(t,"borderRight","_br",r,s,a)}}ax.forEach(t.children(),e)}function IL(t,e,r,i,s,a){var o={width:0,height:0,rank:a,borderType:e},l=s[e][a-1],u=swe.addDummyNode(t,"border",o,r);s[e][a]=u,t.setParent(u,i),l&&t.setEdge(l,u,{weight:1})}var Di=Ut,lwe={adjust:uwe,undo:cwe};function uwe(t){var e=t.graph().rankdir.toLowerCase();(e==="lr"||e==="rl")&&aB(t)}function cwe(t){var e=t.graph().rankdir.toLowerCase();(e==="bt"||e==="rl")&&dwe(t),(e==="lr"||e==="rl")&&(hwe(t),aB(t))}function aB(t){Di.forEach(t.nodes(),function(e){CL(t.node(e))}),Di.forEach(t.edges(),function(e){CL(t.edge(e))})}function CL(t){var e=t.width;t.width=t.height,t.height=e}function dwe(t){Di.forEach(t.nodes(),function(e){ox(t.node(e))}),Di.forEach(t.edges(),function(e){var r=t.edge(e);Di.forEach(r.points,ox),Di.has(r,"y")&&ox(r)})}function ox(t){t.y=-t.y}function hwe(t){Di.forEach(t.nodes(),function(e){lx(t.node(e))}),Di.forEach(t.edges(),function(e){var r=t.edge(e);Di.forEach(r.points,lx),Di.has(r,"x")&&lx(r)})}function lx(t){var e=t.x;t.x=t.y,t.y=e}var ss=Ut,fwe=pwe;function pwe(t){var e={},r=ss.filter(t.nodes(),function(l){return!t.children(l).length}),i=ss.max(ss.map(r,function(l){return t.node(l).rank})),s=ss.map(ss.range(i+1),function(){return[]});function a(l){if(!ss.has(e,l)){e[l]=!0;var u=t.node(l);s[u.rank].push(l),ss.forEach(t.successors(l),a)}}var o=ss.sortBy(r,function(l){return t.node(l).rank});return ss.forEach(o,a),s}var Xs=Ut,mwe=gwe;function gwe(t,e){for(var r=0,i=1;i<e.length;++i)r+=vwe(t,e[i-1],e[i]);return r}function vwe(t,e,r){for(var i=Xs.zipObject(r,Xs.map(r,function(c,d){return d})),s=Xs.flatten(Xs.map(e,function(c){return Xs.sortBy(Xs.map(t.outEdges(c),function(d){return{pos:i[d.w],weight:t.edge(d).weight}}),"pos")}),!0),a=1;a<r.length;)a<<=1;var o=2*a-1;a-=1;var l=Xs.map(new Array(o),function(){return 0}),u=0;return Xs.forEach(s.forEach(function(c){var d=c.pos+a;l[d]+=c.weight;for(var h=0;d>0;)d%2&&(h+=l[d+1]),d=d-1>>1,l[d]+=c.weight;u+=c.weight*h})),u}var kL=Ut,ywe=_we;function _we(t,e){return kL.map(e,function(r){var i=t.inEdges(r);if(i.length){var s=kL.reduce(i,function(a,o){var l=t.edge(o),u=t.node(o.v);return{sum:a.sum+l.weight*u.order,weight:a.weight+l.weight}},{sum:0,weight:0});return{v:r,barycenter:s.sum/s.weight,weight:s.weight}}else return{v:r}})}var Tr=Ut,wwe=bwe;function bwe(t,e){var r={};Tr.forEach(t,function(s,a){var o=r[s.v]={indegree:0,in:[],out:[],vs:[s.v],i:a};Tr.isUndefined(s.barycenter)||(o.barycenter=s.barycenter,o.weight=s.weight)}),Tr.forEach(e.edges(),function(s){var a=r[s.v],o=r[s.w];!Tr.isUndefined(a)&&!Tr.isUndefined(o)&&(o.indegree++,a.out.push(r[s.w]))});var i=Tr.filter(r,function(s){return!s.indegree});return xwe(i)}function xwe(t){var e=[];function r(a){return function(o){o.merged||(Tr.isUndefined(o.barycenter)||Tr.isUndefined(a.barycenter)||o.barycenter>=a.barycenter)&&Ewe(a,o)}}function i(a){return function(o){o.in.push(a),--o.indegree===0&&t.push(o)}}for(;t.length;){var s=t.pop();e.push(s),Tr.forEach(s.in.reverse(),r(s)),Tr.forEach(s.out,i(s))}return Tr.map(Tr.filter(e,function(a){return!a.merged}),function(a){return Tr.pick(a,["vs","i","barycenter","weight"])})}function Ewe(t,e){var r=0,i=0;t.weight&&(r+=t.barycenter*t.weight,i+=t.weight),e.weight&&(r+=e.barycenter*e.weight,i+=e.weight),t.vs=e.vs.concat(t.vs),t.barycenter=r/i,t.weight=i,t.i=Math.min(e.i,t.i),e.merged=!0}var Wc=Ut,Swe=yr,Twe=Iwe;function Iwe(t,e){var r=Swe.partition(t,function(d){return Wc.has(d,"barycenter")}),i=r.lhs,s=Wc.sortBy(r.rhs,function(d){return-d.i}),a=[],o=0,l=0,u=0;i.sort(Cwe(!!e)),u=NL(a,s,u),Wc.forEach(i,function(d){u+=d.vs.length,a.push(d.vs),o+=d.barycenter*d.weight,l+=d.weight,u=NL(a,s,u)});var c={vs:Wc.flatten(a,!0)};return l&&(c.barycenter=o/l,c.weight=l),c}function NL(t,e,r){for(var i;e.length&&(i=Wc.last(e)).i<=r;)e.pop(),t.push(i.vs),r++;return r}function Cwe(t){return function(e,r){return e.barycenter<r.barycenter?-1:e.barycenter>r.barycenter?1:t?r.i-e.i:e.i-r.i}}var ua=Ut,kwe=ywe,Nwe=wwe,Awe=Twe,Rwe=oB;function oB(t,e,r,i){var s=t.children(e),a=t.node(e),o=a?a.borderLeft:void 0,l=a?a.borderRight:void 0,u={};o&&(s=ua.filter(s,function(v){return v!==o&&v!==l}));var c=kwe(t,s);ua.forEach(c,function(v){if(t.children(v.v).length){var y=oB(t,v.v,r,i);u[v.v]=y,ua.has(y,"barycenter")&&Dwe(v,y)}});var d=Nwe(c,r);Pwe(d,u);var h=Awe(d,i);if(o&&(h.vs=ua.flatten([o,h.vs,l],!0),t.predecessors(o).length)){var f=t.node(t.predecessors(o)[0]),m=t.node(t.predecessors(l)[0]);ua.has(h,"barycenter")||(h.barycenter=0,h.weight=0),h.barycenter=(h.barycenter*h.weight+f.order+m.order)/(h.weight+2),h.weight+=2}return h}function Pwe(t,e){ua.forEach(t,function(r){r.vs=ua.flatten(r.vs.map(function(i){return e[i]?e[i].vs:i}),!0)})}function Dwe(t,e){ua.isUndefined(t.barycenter)?(t.barycenter=e.barycenter,t.weight=e.weight):(t.barycenter=(t.barycenter*t.weight+e.barycenter*e.weight)/(t.weight+e.weight),t.weight+=e.weight)}var Gc=Ut,Mwe=Si.Graph,Lwe=Owe;function Owe(t,e,r){var i=jwe(t),s=new Mwe({compound:!0}).setGraph({root:i}).setDefaultNodeLabel(function(a){return t.node(a)});return Gc.forEach(t.nodes(),function(a){var o=t.node(a),l=t.parent(a);(o.rank===e||o.minRank<=e&&e<=o.maxRank)&&(s.setNode(a),s.setParent(a,l||i),Gc.forEach(t[r](a),function(u){var c=u.v===a?u.w:u.v,d=s.edge(c,a),h=Gc.isUndefined(d)?0:d.weight;s.setEdge(c,a,{weight:t.edge(u).weight+h})}),Gc.has(o,"minRank")&&s.setNode(a,{borderLeft:o.borderLeft[e],borderRight:o.borderRight[e]}))}),s}function jwe(t){for(var e;t.hasNode(e=Gc.uniqueId("_root")););return e}var Vwe=Ut,Fwe=$we;function $we(t,e,r){var i={},s;Vwe.forEach(r,function(a){for(var o=t.parent(a),l,u;o;){if(l=t.parent(o),l?(u=i[l],i[l]=o):(u=s,s=o),u&&u!==o){e.setEdge(u,o);return}o=l}})}var Aa=Ut,Uwe=fwe,Bwe=mwe,zwe=Rwe,qwe=Lwe,Hwe=Fwe,Wwe=Si.Graph,AL=yr,Gwe=Kwe;function Kwe(t){var e=AL.maxRank(t),r=RL(t,Aa.range(1,e+1),"inEdges"),i=RL(t,Aa.range(e-1,-1,-1),"outEdges"),s=Uwe(t);PL(t,s);for(var a=Number.POSITIVE_INFINITY,o,l=0,u=0;u<4;++l,++u){Ywe(l%2?r:i,l%4>=2),s=AL.buildLayerMatrix(t);var c=Bwe(t,s);c<a&&(u=0,o=Aa.cloneDeep(s),a=c)}PL(t,o)}function RL(t,e,r){return Aa.map(e,function(i){return qwe(t,i,r)})}function Ywe(t,e){var r=new Wwe;Aa.forEach(t,function(i){var s=i.graph().root,a=zwe(i,s,r,e);Aa.forEach(a.vs,function(o,l){i.node(o).order=l}),Hwe(i,r,a.vs)})}function PL(t,e){Aa.forEach(e,function(r){Aa.forEach(r,function(i,s){t.node(i).order=s})})}var Ye=Ut,Xwe=Si.Graph,Qwe=yr,Jwe={positionX:ube};function Zwe(t,e){var r={};function i(s,a){var o=0,l=0,u=s.length,c=Ye.last(a);return Ye.forEach(a,function(d,h){var f=tbe(t,d),m=f?t.node(f).order:u;(f||d===c)&&(Ye.forEach(a.slice(l,h+1),function(v){Ye.forEach(t.predecessors(v),function(y){var b=t.node(y),_=b.order;(_<o||m<_)&&!(b.dummy&&t.node(v).dummy)&&lB(r,y,v)})}),l=h+1,o=m)}),a}return Ye.reduce(e,i),r}function ebe(t,e){var r={};function i(a,o,l,u,c){var d;Ye.forEach(Ye.range(o,l),function(h){d=a[h],t.node(d).dummy&&Ye.forEach(t.predecessors(d),function(f){var m=t.node(f);m.dummy&&(m.order<u||m.order>c)&&lB(r,f,d)})})}function s(a,o){var l=-1,u,c=0;return Ye.forEach(o,function(d,h){if(t.node(d).dummy==="border"){var f=t.predecessors(d);f.length&&(u=t.node(f[0]).order,i(o,c,h,l,u),c=h,l=u)}i(o,c,o.length,u,a.length)}),o}return Ye.reduce(e,s),r}function tbe(t,e){if(t.node(e).dummy)return Ye.find(t.predecessors(e),function(r){return t.node(r).dummy})}function lB(t,e,r){if(e>r){var i=e;e=r,r=i}var s=t[e];s||(t[e]=s={}),s[r]=!0}function nbe(t,e,r){if(e>r){var i=e;e=r,r=i}return Ye.has(t[e],r)}function rbe(t,e,r,i){var s={},a={},o={};return Ye.forEach(e,function(l){Ye.forEach(l,function(u,c){s[u]=u,a[u]=u,o[u]=c})}),Ye.forEach(e,function(l){var u=-1;Ye.forEach(l,function(c){var d=i(c);if(d.length){d=Ye.sortBy(d,function(y){return o[y]});for(var h=(d.length-1)/2,f=Math.floor(h),m=Math.ceil(h);f<=m;++f){var v=d[f];a[c]===c&&u<o[v]&&!nbe(r,c,v)&&(a[v]=c,a[c]=s[c]=s[v],u=o[v])}}})}),{root:s,align:a}}function ibe(t,e,r,i,s){var a={},o=sbe(t,e,r,s),l=s?"borderLeft":"borderRight";function u(h,f){for(var m=o.nodes(),v=m.pop(),y={};v;)y[v]?h(v):(y[v]=!0,m.push(v),m=m.concat(f(v))),v=m.pop()}function c(h){a[h]=o.inEdges(h).reduce(function(f,m){return Math.max(f,a[m.v]+o.edge(m))},0)}function d(h){var f=o.outEdges(h).reduce(function(v,y){return Math.min(v,a[y.w]-o.edge(y))},Number.POSITIVE_INFINITY),m=t.node(h);f!==Number.POSITIVE_INFINITY&&m.borderType!==l&&(a[h]=Math.max(a[h],f))}return u(c,o.predecessors.bind(o)),u(d,o.successors.bind(o)),Ye.forEach(i,function(h){a[h]=a[r[h]]}),a}function sbe(t,e,r,i){var s=new Xwe,a=t.graph(),o=cbe(a.nodesep,a.edgesep,i);return Ye.forEach(e,function(l){var u;Ye.forEach(l,function(c){var d=r[c];if(s.setNode(d),u){var h=r[u],f=s.edge(h,d);s.setEdge(h,d,Math.max(o(t,c,u),f||0))}u=c})}),s}function abe(t,e){return Ye.minBy(Ye.values(e),function(r){var i=Number.NEGATIVE_INFINITY,s=Number.POSITIVE_INFINITY;return Ye.forIn(r,function(a,o){var l=dbe(t,o)/2;i=Math.max(a+l,i),s=Math.min(a-l,s)}),i-s})}function obe(t,e){var r=Ye.values(e),i=Ye.min(r),s=Ye.max(r);Ye.forEach(["u","d"],function(a){Ye.forEach(["l","r"],function(o){var l=a+o,u=t[l],c;if(u!==e){var d=Ye.values(u);c=o==="l"?i-Ye.min(d):s-Ye.max(d),c&&(t[l]=Ye.mapValues(u,function(h){return h+c}))}})})}function lbe(t,e){return Ye.mapValues(t.ul,function(r,i){if(e)return t[e.toLowerCase()][i];var s=Ye.sortBy(Ye.map(t,i));return(s[1]+s[2])/2})}function ube(t){var e=Qwe.buildLayerMatrix(t),r=Ye.merge(Zwe(t,e),ebe(t,e)),i={},s;Ye.forEach(["u","d"],function(o){s=o==="u"?e:Ye.values(e).reverse(),Ye.forEach(["l","r"],function(l){l==="r"&&(s=Ye.map(s,function(h){return Ye.values(h).reverse()}));var u=(o==="u"?t.predecessors:t.successors).bind(t),c=rbe(t,s,r,u),d=ibe(t,s,c.root,c.align,l==="r");l==="r"&&(d=Ye.mapValues(d,function(h){return-h})),i[o+l]=d})});var a=abe(t,i);return obe(i,a),lbe(i,t.graph().align)}function cbe(t,e,r){return function(i,s,a){var o=i.node(s),l=i.node(a),u=0,c;if(u+=o.width/2,Ye.has(o,"labelpos"))switch(o.labelpos.toLowerCase()){case"l":c=-o.width/2;break;case"r":c=o.width/2;break}if(c&&(u+=r?c:-c),c=0,u+=(o.dummy?e:t)/2,u+=(l.dummy?e:t)/2,u+=l.width/2,Ye.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":c=l.width/2;break;case"r":c=-l.width/2;break}return c&&(u+=r?c:-c),c=0,u}}function dbe(t,e){return t.node(e).width}var Kc=Ut,uB=yr,hbe=Jwe.positionX,fbe=pbe;function pbe(t){t=uB.asNonCompoundGraph(t),mbe(t),Kc.forEach(hbe(t),function(e,r){t.node(r).x=e})}function mbe(t){var e=uB.buildLayerMatrix(t),r=t.graph().ranksep,i=0;Kc.forEach(e,function(s){var a=Kc.max(Kc.map(s,function(o){return t.node(o).height}));Kc.forEach(s,function(o){t.node(o).y=i+a/2}),i+=a+r})}var Je=Ut,DL=s_e,ML=x_e,gbe=W_e,vbe=yr.normalizeRanks,ybe=X_e,_be=yr.removeEmptyRanks,LL=ewe,wbe=awe,OL=lwe,bbe=Gwe,xbe=fbe,Ba=yr,Ebe=Si.Graph,Sbe=Tbe;function Tbe(t,e){var r=e&&e.debugTiming?Ba.time:Ba.notime;r("layout",function(){var i=r("  buildLayoutGraph",function(){return Obe(t)});r("  runLayout",function(){Ibe(i,r)}),r("  updateInputGraph",function(){Cbe(t,i)})})}function Ibe(t,e){e("    makeSpaceForEdgeLabels",function(){jbe(t)}),e("    removeSelfEdges",function(){Wbe(t)}),e("    acyclic",function(){DL.run(t)}),e("    nestingGraph.run",function(){LL.run(t)}),e("    rank",function(){gbe(Ba.asNonCompoundGraph(t))}),e("    injectEdgeLabelProxies",function(){Vbe(t)}),e("    removeEmptyRanks",function(){_be(t)}),e("    nestingGraph.cleanup",function(){LL.cleanup(t)}),e("    normalizeRanks",function(){vbe(t)}),e("    assignRankMinMax",function(){Fbe(t)}),e("    removeEdgeLabelProxies",function(){$be(t)}),e("    normalize.run",function(){ML.run(t)}),e("    parentDummyChains",function(){ybe(t)}),e("    addBorderSegments",function(){wbe(t)}),e("    order",function(){bbe(t)}),e("    insertSelfEdges",function(){Gbe(t)}),e("    adjustCoordinateSystem",function(){OL.adjust(t)}),e("    position",function(){xbe(t)}),e("    positionSelfEdges",function(){Kbe(t)}),e("    removeBorderNodes",function(){Hbe(t)}),e("    normalize.undo",function(){ML.undo(t)}),e("    fixupEdgeLabelCoords",function(){zbe(t)}),e("    undoCoordinateSystem",function(){OL.undo(t)}),e("    translateGraph",function(){Ube(t)}),e("    assignNodeIntersects",function(){Bbe(t)}),e("    reversePoints",function(){qbe(t)}),e("    acyclic.undo",function(){DL.undo(t)})}function Cbe(t,e){Je.forEach(t.nodes(),function(r){var i=t.node(r),s=e.node(r);i&&(i.x=s.x,i.y=s.y,e.children(r).length&&(i.width=s.width,i.height=s.height))}),Je.forEach(t.edges(),function(r){var i=t.edge(r),s=e.edge(r);i.points=s.points,Je.has(s,"x")&&(i.x=s.x,i.y=s.y)}),t.graph().width=e.graph().width,t.graph().height=e.graph().height}var kbe=["nodesep","edgesep","ranksep","marginx","marginy"],Nbe={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Abe=["acyclicer","ranker","rankdir","align"],Rbe=["width","height"],Pbe={width:0,height:0},Dbe=["minlen","weight","width","height","labeloffset"],Mbe={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Lbe=["labelpos"];function Obe(t){var e=new Ebe({multigraph:!0,compound:!0}),r=cx(t.graph());return e.setGraph(Je.merge({},Nbe,ux(r,kbe),Je.pick(r,Abe))),Je.forEach(t.nodes(),function(i){var s=cx(t.node(i));e.setNode(i,Je.defaults(ux(s,Rbe),Pbe)),e.setParent(i,t.parent(i))}),Je.forEach(t.edges(),function(i){var s=cx(t.edge(i));e.setEdge(i,Je.merge({},Mbe,ux(s,Dbe),Je.pick(s,Lbe)))}),e}function jbe(t){var e=t.graph();e.ranksep/=2,Je.forEach(t.edges(),function(r){var i=t.edge(r);i.minlen*=2,i.labelpos.toLowerCase()!=="c"&&(e.rankdir==="TB"||e.rankdir==="BT"?i.width+=i.labeloffset:i.height+=i.labeloffset)})}function Vbe(t){Je.forEach(t.edges(),function(e){var r=t.edge(e);if(r.width&&r.height){var i=t.node(e.v),s=t.node(e.w),a={rank:(s.rank-i.rank)/2+i.rank,e};Ba.addDummyNode(t,"edge-proxy",a,"_ep")}})}function Fbe(t){var e=0;Je.forEach(t.nodes(),function(r){var i=t.node(r);i.borderTop&&(i.minRank=t.node(i.borderTop).rank,i.maxRank=t.node(i.borderBottom).rank,e=Je.max(e,i.maxRank))}),t.graph().maxRank=e}function $be(t){Je.forEach(t.nodes(),function(e){var r=t.node(e);r.dummy==="edge-proxy"&&(t.edge(r.e).labelRank=r.rank,t.removeNode(e))})}function Ube(t){var e=Number.POSITIVE_INFINITY,r=0,i=Number.POSITIVE_INFINITY,s=0,a=t.graph(),o=a.marginx||0,l=a.marginy||0;function u(c){var d=c.x,h=c.y,f=c.width,m=c.height;e=Math.min(e,d-f/2),r=Math.max(r,d+f/2),i=Math.min(i,h-m/2),s=Math.max(s,h+m/2)}Je.forEach(t.nodes(),function(c){u(t.node(c))}),Je.forEach(t.edges(),function(c){var d=t.edge(c);Je.has(d,"x")&&u(d)}),e-=o,i-=l,Je.forEach(t.nodes(),function(c){var d=t.node(c);d.x-=e,d.y-=i}),Je.forEach(t.edges(),function(c){var d=t.edge(c);Je.forEach(d.points,function(h){h.x-=e,h.y-=i}),Je.has(d,"x")&&(d.x-=e),Je.has(d,"y")&&(d.y-=i)}),a.width=r-e+o,a.height=s-i+l}function Bbe(t){Je.forEach(t.edges(),function(e){var r=t.edge(e),i=t.node(e.v),s=t.node(e.w),a,o;r.points?(a=r.points[0],o=r.points[r.points.length-1]):(r.points=[],a=s,o=i),r.points.unshift(Ba.intersectRect(i,a)),r.points.push(Ba.intersectRect(s,o))})}function zbe(t){Je.forEach(t.edges(),function(e){var r=t.edge(e);if(Je.has(r,"x"))switch((r.labelpos==="l"||r.labelpos==="r")&&(r.width-=r.labeloffset),r.labelpos){case"l":r.x-=r.width/2+r.labeloffset;break;case"r":r.x+=r.width/2+r.labeloffset;break}})}function qbe(t){Je.forEach(t.edges(),function(e){var r=t.edge(e);r.reversed&&r.points.reverse()})}function Hbe(t){Je.forEach(t.nodes(),function(e){if(t.children(e).length){var r=t.node(e),i=t.node(r.borderTop),s=t.node(r.borderBottom),a=t.node(Je.last(r.borderLeft)),o=t.node(Je.last(r.borderRight));r.width=Math.abs(o.x-a.x),r.height=Math.abs(s.y-i.y),r.x=a.x+r.width/2,r.y=i.y+r.height/2}}),Je.forEach(t.nodes(),function(e){t.node(e).dummy==="border"&&t.removeNode(e)})}function Wbe(t){Je.forEach(t.edges(),function(e){if(e.v===e.w){var r=t.node(e.v);r.selfEdges||(r.selfEdges=[]),r.selfEdges.push({e,label:t.edge(e)}),t.removeEdge(e)}})}function Gbe(t){var e=Ba.buildLayerMatrix(t);Je.forEach(e,function(r){var i=0;Je.forEach(r,function(s,a){var o=t.node(s);o.order=a+i,Je.forEach(o.selfEdges,function(l){Ba.addDummyNode(t,"selfedge",{width:l.label.width,height:l.label.height,rank:o.rank,order:a+ ++i,e:l.e,label:l.label},"_se")}),delete o.selfEdges})})}function Kbe(t){Je.forEach(t.nodes(),function(e){var r=t.node(e);if(r.dummy==="selfedge"){var i=t.node(r.e.v),s=i.x+i.width/2,a=i.y,o=r.x-s,l=i.height/2;t.setEdge(r.e,r.label),t.removeNode(e),r.label.points=[{x:s+2*o/3,y:a-l},{x:s+5*o/6,y:a-l},{x:s+o,y:a},{x:s+5*o/6,y:a+l},{x:s+2*o/3,y:a+l}],r.label.x=r.x,r.label.y=r.y}})}function ux(t,e){return Je.mapValues(Je.pick(t,e),Number)}function cx(t){var e={};return Je.forEach(t,function(r,i){e[i.toLowerCase()]=r}),e}var Qf=Ut,Ybe=yr,Xbe=Si.Graph,Qbe={debugOrdering:Jbe};function Jbe(t){var e=Ybe.buildLayerMatrix(t),r=new Xbe({compound:!0,multigraph:!0}).setGraph({});return Qf.forEach(t.nodes(),function(i){r.setNode(i,{label:i}),r.setParent(i,"layer"+t.node(i).rank)}),Qf.forEach(t.edges(),function(i){r.setEdge(i.v,i.w,{},i.name)}),Qf.forEach(e,function(i,s){var a="layer"+s;r.setNode(a,{rank:"same"}),Qf.reduce(i,function(o,l){return r.setEdge(o,l,{style:"invis"}),l})}),r}var Zbe="0.8.5",e1e={graphlib:Si,layout:Sbe,debug:Qbe,util:{time:yr.time,notime:yr.notime},version:Zbe};const Xm=za(e1e),cB=(t={})=>{const[e,r]=S.useState(!1),{onNodesChange:i,createNodeFromType:s}=t,a=S.useCallback(c=>{r(!0)},[]),o=S.useCallback(()=>{r(!1)},[]),l=S.useCallback(c=>{c.preventDefault(),c.dataTransfer.dropEffect="move"},[]),u=S.useCallback(c=>{c.preventDefault(),r(!1);try{const d=c.currentTarget.getBoundingClientRect(),h={x:c.clientX-d.left,y:c.clientY-d.top},f=JSON.parse(c.dataTransfer.getData("application/reactflow"));if(!f||!f.type)return;const m=s(f.type,h,f.label);i(v=>[...v,m])}catch(d){console.error("Error handling node drop:",d)}},[s,i]);return{isDragging:e,onDragStart:a,onDragEnd:o,onDragOver:l,onDrop:u}},fo={input:{},processing:{},output:{},visualization:{},media:{},other:{}};function Ja(t){const{type:e,category:r="other",component:i,defaults:s={},metadata:a={}}=t;return!e||!i?(console.error("Node plugin must have a type and component"),fo):(fo[r]?fo[r][e]={component:i,defaults:s,metadata:a}:fo.other[e]={component:i,defaults:s,metadata:a},VI(),fo)}function VI(){const t={};return Object.values(fo).forEach(e=>{Object.entries(e).forEach(([r,{component:i}])=>{t[r]=i})}),t}function t1e(t){for(const e of Object.values(fo))if(e[t])return e[t].defaults||{};return{}}VI();const dB=(t,e,r,i={})=>{var u,c;const s=t1e(t),a=`${t}-${Date.now()}`;let o=((u=s.style)==null?void 0:u.width)||320;switch(t){case"resultsDisplay":o=560;break;case"metadata":o=420;break;case"videoPlayer":o=420;break;case"keywordBubble":case"mapVisualization":o=450;break}let l;return t==="metadata"&&(l=550),{id:a,type:t,position:e,data:{label:r||((c=s.data)==null?void 0:c.label)||t,...i},style:{width:o,...l?{height:l}:{},...s.style}}},hB=(t,e={})=>{switch(t){case"transcriptInput":return{data:{onTranscriptUpload:e.handleTranscriptUpload,onAudioUpload:e.handleAudioUpload,documentName:e.documentName,onDocumentNameChange:e.setDocumentName,youtubeUrl:e.youtubeUrl,onYoutubeUrlChange:e.setYoutubeUrl,onYoutubeUrlSubmit:e.handleYoutubeUrlSubmit}};case"whisperTranscription":return{data:{onQueueUpdate:e.onQueueUpdate,onProcessMultiple:e.processMultipleTranscripts||e.processTranscript,onSetTranscript:(r,i)=>{e.setTranscript&&e.setTranscript(r),e.setDocumentName&&i&&e.setDocumentName(i)}}};case"promptEditing":return{data:{systemMessage:e.systemMessage,onSystemMessageChange:e.setSystemMessage,onProcess:e.processTranscript,model:e.model,onModelChange:e.setModel,canProcess:!!e.transcript}};case"resultsDisplay":return{type:t,data:{label:"Results Display",documentName:e.documentName||"",summaries:e.summaries||{overallSummary:"",keyPoints:[]},onSummaryChange:e.handleSummaryChange,onKeyPointChange:e.handleKeyPointChange,onAddKeyPoint:e.handleAddKeyPoint,onRemoveKeyPoint:e.handleRemoveKeyPoint,onEditSummary:e.handleEditSummary,onSaveToDatabase:e.handleSaveToDatabase,savingToDatabase:e.savingToDatabase||!1,savedToDatabase:e.savedToDatabase||!1,youtubeEmbedUrl:e.youtubeEmbedUrl||"",openVideoPanel:e.openVideoPanel}};case"videoPlayer":return{data:{youtubeEmbedUrl:e.youtubeEmbedUrl,videoRef:e.videoRef,currentTimestamp:e.currentTimestamp,summaries:e.summaries,onUpdateTimestamp:e.setCurrentTimestamp}};case"metadata":return{data:{documentName:e.documentName,youtubeUrl:e.youtubeUrl,youtubeEmbedUrl:e.youtubeEmbedUrl,summaries:e.summaries,transcript:e.transcript,onSaveToDatabase:e.handleSaveToDatabase,savingToDatabase:e.savingToDatabase,savedToDatabase:e.savedToDatabase}};default:return{data:{}}}};function n1e({id:t,data:e,isConnectable:r}){const{queuedTranscripts:i=[],onQueueUpdate:s,onProcessMultiple:a}=e,o=S.useRef(null),[l,u]=S.useState(""),[c,d]=S.useState(""),[h,f]=S.useState(null),[m,v]=S.useState(i||[]),[y,b]=S.useState("");S.useEffect(()=>{i&&i.length>0&&v(i)},[i]);const _=M=>{const O=M.target.files[0];O&&f(O)},w=()=>{if(!l.trim()){b("Document name is required");return}if(!h){b("Transcript file is required");return}const M={documentName:l.trim(),youtubeUrl:c.trim(),file:h,id:`transcript-${Date.now()}`},O=[...m,M];v(O),s&&s(O),u(""),d(""),f(null),b(""),o.current&&(o.current.value="")},E=M=>{const O=m.filter(A=>A.id!==M);v(O),s&&s(O)},N=()=>{if(m.length===0){b("No transcripts in queue to process");return}a&&a(m)};return p.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border border-gray-200 w-80",children:[p.jsx("div",{className:"text-lg font-bold mb-2 text-blue-600 border-b pb-2",children:"Transcript Input"}),y&&p.jsx("div",{className:"mb-3 p-2 bg-red-100 text-red-700 text-sm rounded",children:y}),p.jsxs("div",{className:"mb-4 p-3 bg-blue-50 rounded border border-blue-100",children:[p.jsx("h3",{className:"text-sm font-medium text-blue-800 mb-2",children:"Add New Transcript"}),p.jsxs("div",{className:"mb-2",children:[p.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Document Name *"}),p.jsx("input",{type:"text",value:l,onChange:M=>u(M.target.value),className:"w-full p-2 border rounded text-sm",placeholder:"Enter document name"})]}),p.jsxs("div",{className:"mb-2",children:[p.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"YouTube URL (optional)"}),p.jsx("input",{type:"text",value:c,onChange:M=>d(M.target.value),className:"w-full p-2 border rounded text-sm",placeholder:"Enter YouTube URL"})]}),p.jsxs("div",{className:"mb-3",children:[p.jsx("label",{className:"block text-sm text-gray-600 mb-1",children:"Transcript File *"}),p.jsxs("div",{className:"flex",children:[p.jsx("input",{ref:o,type:"file",className:"hidden",onChange:_,accept:".txt,.json,.docx,.md"}),p.jsxs("button",{onClick:()=>{var M;return(M=o.current)==null?void 0:M.click()},className:"flex-1 flex items-center justify-center p-2 bg-gray-100 border border-gray-300 rounded text-sm hover:bg-gray-200",children:[p.jsx(Y$,{className:"mr-2"}),h?h.name:"Choose File"]})]})]}),p.jsxs("button",{onClick:w,className:"w-full p-2 bg-blue-500 text-white rounded flex items-center justify-center text-sm hover:bg-blue-600",disabled:!l||!h,children:[p.jsx(K$,{className:"mr-2"})," Add to Queue"]})]}),p.jsxs("div",{className:"mb-4",children:[p.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Queued Transcripts (",m.length,")"]}),m.length===0?p.jsx("div",{className:"text-sm text-gray-500 italic",children:"No transcripts in queue"}):p.jsx("div",{className:"max-h-40 overflow-y-auto",children:m.map(M=>p.jsxs("div",{className:"flex items-center justify-between p-2 mb-1 bg-gray-50 rounded border border-gray-200",children:[p.jsxs("div",{className:"overflow-hidden",children:[p.jsx("div",{className:"text-sm font-medium truncate",children:M.documentName}),p.jsx("div",{className:"text-xs text-gray-500 truncate",children:M.file.name})]}),p.jsx("button",{onClick:()=>E(M.id),className:"p-1 text-red-500 hover:text-red-700",title:"Remove from queue",children:p.jsx(vI,{size:14})})]},M.id||`transcript-queue-${Date.now()}-${Math.random()}`))})]}),p.jsxs("button",{onClick:N,className:"w-full p-2 bg-green-500 text-white rounded flex items-center justify-center mb-4 hover:bg-green-600",disabled:m.length===0,children:[p.jsx(fa,{className:"mr-2"})," Process All Transcripts"]}),p.jsx(Xn,{type:"source",position:De.Right,id:"transcript-output",style:{background:"#3b82f6",width:12,height:12},isConnectable:r})]})}function r1e(t){return nt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 15c1.66 0 2.99-1.34 2.99-3L15 6c0-1.66-1.34-3-3-3S9 4.34 9 6v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 15 6.7 12H5c0 3.42 2.72 6.23 6 6.72V22h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z"},child:[]}]})(t)}const jL=t=>new Promise((e,r)=>{const i=new FileReader;i.onload=s=>e(s.target.result),i.onerror=s=>r(s),i.readAsText(t)}),fB=async(t,e,r="gpt-4o-mini",i=3,s=2e3)=>{try{const o=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer undefined"},body:JSON.stringify({model:r,messages:[{role:"system",content:e.trim()},{role:"user",content:`Here is a transcript:
${t}

Generate an overall summary, key points with timestamps, and keywords.`}],max_tokens:1e3})});if(!o.ok){if(o.status===429&&i>0)return console.warn(`Rate limit exceeded. Retrying in ${s}ms...`),await new Promise(u=>setTimeout(u,s)),fB(t,e,r,i-1,s*2);throw new Error(`API request failed: ${o.statusText}`)}const l=await o.json();return i1e(l.choices[0].message.content)}catch(a){throw console.error("Error communicating with OpenAI API:",a),a}},i1e=t=>{const e=t.match(/Overall Summary:\s*(.+)/i),r=e?e[1].trim():"No summary found.",i=[],s=/\d+\.\s*Title:\s*(.+?)\s*Timestamp:\s*(.+?)\s*Keywords:\s*(.+?)\s*Summary:\s*(.+?)(?=\d+\.|$)/gs;let a;for(;(a=s.exec(t))!==null;)i.push({topic:a[1].trim(),timestamp:a[2].trim(),keywords:a[3].trim(),summary:a[4].trim()});return{overallSummary:r,keyPoints:i}},s1e=t=>{let e=t;t.includes(" - ")&&(e=t.split(" - ")[0]);let r=0;if(e.split(":").length===3){const[i,s,a]=e.split(":").map(Number);if(i>=0&&s>=0&&a>=0)r=i*3600+s*60+a;else throw new Error("Invalid timestamp components")}else if(e.split(":").length===2){const[i,s]=e.split(":").map(Number);if(i>=0&&s>=0)r=i*60+s;else throw new Error("Invalid timestamp components")}else if(!isNaN(Number(e)))r=Number(e);else throw new Error("Unrecognized timestamp format");return r},a1e=async(t,e,r)=>{try{const{collection:i,doc:s,setDoc:a}=await Em(async()=>{const{collection:l,doc:u,setDoc:c}=await Promise.resolve().then(()=>UJ);return{collection:l,doc:u,setDoc:c}},void 0),o=s(i(r,"interviewSummaries"),t);await a(o,{documentName:t,mainSummary:e.overallSummary,createdAt:new Date});for(const l of e.keyPoints){const u=l.topic.replace(/[^a-zA-Z0-9-_]/g,"_"),c=s(i(r,"interviewSummaries",t,"subSummaries"),u);await a(c,{topic:l.topic,timestamp:l.timestamp,keywords:l.keywords,summary:l.summary})}}catch(i){throw console.error("Error storing processed transcript:",i),i}};function o1e({id:t,data:e,isConnectable:r}){const{queuedTranscripts:i=[],onQueueUpdate:s,onProcessMultiple:a,onSetTranscript:o}=e,l=S.useRef(null),u=S.useRef(null),c=S.useRef(null),d=S.useRef(null),h=S.useRef(null),f=S.useRef(null),m=S.useRef(null),v=S.useRef(null),[y,b]=S.useState(""),[_,w]=S.useState(null),[E,N]=S.useState(null),[M,O]=S.useState(""),[A,D]=S.useState(i||[]),[T,I]=S.useState(""),[x,R]=S.useState(!1),[P,j]=S.useState(0),[$,U]=S.useState(""),[Y,q]=S.useState(""),[F,W]=S.useState(""),[Q,H]=S.useState(!1),[X,J]=S.useState(!1),[ee,se]=S.useState(!1),ce=[{code:"",name:"Auto-detect"},{code:"en",name:"English"},{code:"es",name:"Spanish"},{code:"fr",name:"French"},{code:"de",name:"German"},{code:"it",name:"Italian"},{code:"pt",name:"Portuguese"},{code:"nl",name:"Dutch"},{code:"ja",name:"Japanese"},{code:"zh",name:"Chinese"},{code:"ru",name:"Russian"},{code:"ar",name:"Arabic"}];S.useEffect(()=>{i&&i.length>0&&D(i)},[i]),S.useEffect(()=>()=>{M&&URL.revokeObjectURL(M),f.current&&(v.current&&v.current.disconnect(),f.current.close()),h.current&&cancelAnimationFrame(h.current)},[M]);const Se=()=>{if(!(!u.current||!d.current||E!=="audio")){f.current&&(v.current&&v.current.disconnect(),f.current.close());try{const K=window.AudioContext||window.webkitAudioContext,re=new K;f.current=re;const le=re.createAnalyser();le.fftSize=256,m.current=le;const he=re.createMediaElementSource(u.current);v.current=he,he.connect(le),le.connect(re.destination),se(!0),Ee()}catch(K){console.error("Error setting up audio visualizer:",K),se(!1)}}},Ee=()=>{if(!d.current||!m.current||!ee)return;const K=d.current,re=K.getContext("2d"),le=K.width,he=K.height,ye=m.current,Ie=ye.frequencyBinCount,Be=new Uint8Array(Ie);re.clearRect(0,0,le,he);const Oe=()=>{h.current=requestAnimationFrame(Oe),ye.getByteFrequencyData(Be),re.fillStyle="rgb(30, 30, 30)",re.fillRect(0,0,le,he);const ze=le/Ie*2.5;let lt,vt=0;for(let At=0;At<Ie;At++){lt=Be[At]/2;const Ke=At/Ie*360;re.fillStyle=`hsl(${Ke}, 80%, 60%)`,re.fillRect(vt,he-lt,ze,lt),vt+=ze+1}};Oe()},ie=()=>{if(!u.current&&!c.current)return;const K=E==="audio"?u.current:c.current;Q?K.pause():(E==="audio"&&!ee&&Se(),K.play()),H(!Q)};S.useEffect(()=>{const K=()=>H(!0),re=()=>H(!1),le=()=>H(!1),he=u.current,ye=c.current;return he&&(he.addEventListener("play",K),he.addEventListener("pause",re),he.addEventListener("ended",le)),ye&&(ye.addEventListener("play",K),ye.addEventListener("pause",re),ye.addEventListener("ended",le)),()=>{he&&(he.removeEventListener("play",K),he.removeEventListener("pause",re),he.removeEventListener("ended",le)),ye&&(ye.removeEventListener("play",K),ye.removeEventListener("pause",re),ye.removeEventListener("ended",le))}},[u.current,c.current]);const ue=K=>{const re=K.target.files[0];if(!re)return;M&&URL.revokeObjectURL(M),w(re);const le=URL.createObjectURL(re);O(le);const he=re.type.split("/")[0];if(N(he==="video"?"video":"audio"),!y){const ye=re.name.replace(/\.[^/.]+$/,"");b(ye)}I(""),q(""),W(""),H(!1),se(!1),J(!1),h.current&&(cancelAnimationFrame(h.current),h.current=null)},ge=()=>{if(!y.trim()){I("Document name is required");return}if(!_){I("Audio or video file is required");return}const K={documentName:y.trim(),file:_,mediaType:E,mediaUrl:M,language:$,id:`media-${Date.now()}`},re=[...A,K];D(re),s&&s(re),b(""),w(null),N(null),O(""),I(""),q(""),W(""),H(!1),se(!1),J(!1),l.current&&(l.current.value=""),h.current&&(cancelAnimationFrame(h.current),h.current=null)},ke=K=>{const re=A.filter(le=>le.id!==K);D(re),s&&s(re)},Re=S.useRef(null);S.useEffect(()=>{Re.current&&F&&(Re.current.scrollTop=Re.current.scrollHeight)},[F]);const _e=async(K,re)=>{J(!0),W("Starting simulated transcription...");try{await new Promise(Ie=>setTimeout(Ie,800)),W("Preparing demo text..."),await new Promise(Ie=>setTimeout(Ie,1e3));let le="";if(E==="audio"?le="This is a simulated audio transcription. We're using demonstration text instead of the actual Whisper API to avoid costs during development. The Civil Rights Movement was a struggle for social justice that took place mainly during the 1950s and 1960s for Black Americans to gain equal rights under the law in the United States. The Civil War had officially abolished slavery, but it didn't end discrimination against Black people—they continued to endure the devastating effects of racism, especially in the South. By the mid-20th century, Black Americans had had more than enough of prejudice and violence against them. They, along with many White Americans, mobilized and began an unprecedented fight for equality that spanned two decades.":le="This is a simulated video transcription. We're using demonstration text instead of the actual Whisper API to avoid costs during development. The Civil Rights Act of 1964, which ended segregation in public places and banned employment discrimination on the basis of race, color, religion, sex or national origin, is considered one of the crowning legislative achievements of the civil rights movement. First proposed by President John F. Kennedy, it survived strong opposition from southern members of Congress and was then signed into law by Kennedy's successor, Lyndon B. Johnson. In subsequent years, Congress expanded the act and passed additional civil rights legislation such as the Voting Rights Act of 1965.",re){const Ie={es:"Traducción simulada en español: ",fr:"Traduction simulée en français: ",de:"Simulierte Übersetzung auf Deutsch: ",it:"Traduzione simulata in italiano: ",ja:"日本語でのシミュレーション翻訳: ",zh:"模拟中文翻译: ",ru:"Симуляция перевода на русский: "}[re]||"";Ie&&(le=Ie+le.substring(0,100))}W("DEMO MODE: "),await new Promise(Ie=>setTimeout(Ie,500));const he=le.match(/[^.!?]+[.!?]+/g)||[le];let ye="DEMO MODE: ";for(let Ie=0;Ie<he.length;Ie++){const Oe=he[Ie].trim().split(/\s+/);for(let ze=0;ze<Oe.length;ze++){ze===0&&Ie>0&&await new Promise(vt=>setTimeout(vt,300+Math.random()*200)),ye+=(ze>0?" ":"")+Oe[ze],W(ye);const lt=Math.floor(ye.length/(le.length+11)*100);j(lt),await new Promise(vt=>setTimeout(vt,30+Math.random()*100))}Ie<he.length-1&&await new Promise(ze=>setTimeout(ze,150+Math.random()*150))}return le}catch(le){throw console.error("Simulation error:",le),W(`Error during simulation: ${le.message||"Unknown error"}`),le}},V=async()=>{if(!_){I("Please select an audio or video file to transcribe");return}try{R(!0),j(0),I(""),W(""),q(""),J(!0);const K=E==="audio"?u.current:c.current;K&&(E==="audio"&&!ee&&Se(),K.currentTime=0,K.play(),H(!0));const le=await _e(_,$||null);j(100),q(le),o&&o(le,y)}catch(K){console.error("Transcription error:",K),I(`Transcription failed: ${K.message}`),W("")}finally{R(!1)}},B=()=>{const K=E==="audio"?u.current:c.current;K&&(K.pause(),H(!1)),R(!1),W(""),J(!1)},G=async()=>{if(A.length===0){I("No files in queue to process");return}try{R(!0),I(""),W(""),J(!0);const K=[];for(let re=0;re<A.length;re++){const le=A[re];try{W(`Processing (${re+1}/${A.length}): ${le.documentName}`),await new Promise(ye=>setTimeout(ye,1e3));const he=await _e(le.file,le.language||null);K.push({documentName:le.documentName,transcript:he,file:le.file}),await new Promise(ye=>setTimeout(ye,500))}catch(he){console.error(`Error processing "${le.documentName}":`,he),W(ye=>ye+`
Error processing ${le.documentName}: ${he.message}`),await new Promise(ye=>setTimeout(ye,1500))}}j(100),W("Processing complete!"),a&&K.length>0&&a(K),D([]),s&&s([]),setTimeout(()=>{W(""),J(!1)},2e3)}catch(K){console.error("Error in batch processing:",K),I("Failed to process files batch")}finally{R(!1)}};return p.jsxs("div",{className:"bg-gradient-to-br from-indigo-900 to-indigo-700 p-4 rounded-lg shadow-lg border border-indigo-500 flex w-[700px]",children:[p.jsxs("div",{className:"flex-1 min-w-[350px]",children:[p.jsxs("div",{className:"text-lg font-bold mb-3 text-white border-b border-indigo-400 pb-2 flex items-center",children:[p.jsx(r1e,{className:"mr-2 text-indigo-300",size:24}),p.jsx("span",{children:"Whisper Transcription"}),p.jsx("span",{className:"ml-2 text-xs bg-yellow-500 text-yellow-900 px-2 py-0.5 rounded-full",children:"Demo Mode"})]}),T&&p.jsxs("div",{className:"mb-3 p-2 bg-red-400 bg-opacity-25 text-red-100 text-sm rounded border border-red-500 flex items-center",children:[p.jsx("span",{className:"text-red-300 mr-2",children:"⚠"})," ",T]}),M&&p.jsxs("div",{className:"mb-4 bg-black bg-opacity-40 rounded-lg border border-indigo-500 overflow-hidden",children:[p.jsx("div",{className:"relative",children:E==="audio"?p.jsxs("div",{children:[p.jsx("audio",{ref:u,src:M,className:"hidden"}),p.jsx("canvas",{ref:d,className:"w-full h-32 bg-gray-900",width:"400",height:"120"}),p.jsxs("div",{className:"bg-indigo-900 bg-opacity-80 p-2 flex items-center justify-between",children:[p.jsxs("div",{className:"text-xs text-indigo-200 truncate flex items-center",children:[p.jsx(WP,{className:"mr-1"}),(_==null?void 0:_.name)||"Audio File"]}),p.jsx("button",{onClick:ie,className:"p-1 rounded-full bg-indigo-700 hover:bg-indigo-600 text-white",disabled:x,children:Q?p.jsx(_2,{size:12}):p.jsx(fa,{size:12})})]})]}):p.jsxs("div",{children:[p.jsx("video",{ref:c,src:M,className:"w-full object-contain bg-black",style:{maxHeight:"180px"}}),p.jsxs("div",{className:"bg-indigo-900 bg-opacity-80 p-2 flex items-center justify-between",children:[p.jsxs("div",{className:"text-xs text-indigo-200 truncate flex items-center",children:[p.jsx(qP,{className:"mr-1"}),(_==null?void 0:_.name)||"Video File"]}),p.jsx("button",{onClick:ie,className:"p-1 rounded-full bg-indigo-700 hover:bg-indigo-600 text-white",disabled:x,children:Q?p.jsx(_2,{size:12}):p.jsx(fa,{size:12})})]})]})}),x&&p.jsxs("div",{className:"mt-2 p-2 flex items-center bg-indigo-800 bg-opacity-50 border-t border-indigo-600",children:[p.jsx("div",{className:"flex-1 h-1 bg-indigo-900 rounded-full overflow-hidden",children:p.jsx("div",{className:"h-full bg-gradient-to-r from-indigo-400 to-purple-400",style:{width:`${P}%`,transition:"width 0.3s ease"}})}),p.jsx("button",{onClick:B,className:"ml-2 p-1 rounded bg-red-500 hover:bg-red-600 text-white",title:"Stop transcription",children:p.jsx(sve,{size:10})})]})]}),p.jsxs("div",{className:"mb-4 p-3 bg-indigo-800 bg-opacity-40 rounded-lg border border-indigo-600",children:[p.jsxs("div",{className:"mb-3",children:[p.jsx("input",{ref:l,type:"file",className:"hidden",onChange:ue,accept:"audio/*,video/*"}),p.jsxs("button",{onClick:()=>{var K;return(K=l.current)==null?void 0:K.click()},className:`w-full flex flex-col items-center justify-center p-3 rounded-lg border-2 border-dashed 
                ${_?"border-indigo-400 bg-indigo-800 bg-opacity-30":"border-indigo-600 hover:border-indigo-400 bg-indigo-800 bg-opacity-10 hover:bg-opacity-20"} 
                transition-all duration-200`,disabled:x,children:[p.jsx(Y$,{className:"text-indigo-300 mb-2",size:20}),p.jsx("span",{className:"text-sm text-indigo-200",children:_?_.name:"Select Audio or Video File"}),_&&p.jsxs("span",{className:"text-xs text-indigo-300 mt-1",children:[E==="audio"?"Audio":"Video"," file • ",Math.round(_.size/1024)," KB"]})]})]}),p.jsx("div",{className:"mb-2",children:p.jsx("input",{type:"text",value:y,onChange:K=>b(K.target.value),className:"w-full p-2 bg-indigo-700 bg-opacity-50 border border-indigo-500 rounded text-sm text-white placeholder-indigo-300",placeholder:"Document Name (required)",disabled:x})}),p.jsx("div",{className:"mb-3",children:p.jsxs("div",{className:"relative",children:[p.jsx("select",{value:$,onChange:K=>U(K.target.value),className:"w-full p-2 pr-8 bg-indigo-700 bg-opacity-50 border border-indigo-500 rounded text-sm text-white appearance-none",disabled:x,children:ce.map(K=>p.jsx("option",{value:K.code,children:K.name},K.code))}),p.jsx(Jge,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-indigo-300",size:16})]})}),p.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[p.jsxs("button",{onClick:ge,className:"p-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg flex items-center justify-center text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors",disabled:!y||!_||x,children:[p.jsx(K$,{className:"mr-1",size:12})," Add to Queue"]}),p.jsxs("button",{onClick:V,className:"p-2 bg-gradient-to-r from-green-600 to-teal-600 hover:from-green-500 hover:to-teal-500 text-white rounded-lg flex items-center justify-center text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-all",disabled:!_||x,children:[p.jsx(fa,{className:"mr-1",size:12})," Transcribe Now"]})]})]}),p.jsxs("div",{className:"mb-4",children:[p.jsxs("h3",{className:"text-sm font-medium text-indigo-200 mb-2 flex items-center",children:[p.jsx("span",{className:"mr-1",children:"Queue"}),p.jsx("span",{className:"ml-1 px-1.5 py-0.5 bg-indigo-600 rounded-full text-xs",children:A.length})]}),A.length===0?p.jsx("div",{className:"text-sm text-indigo-300 italic text-center p-2 bg-indigo-800 bg-opacity-20 rounded border border-indigo-700",children:"No files in queue"}):p.jsx("div",{className:"max-h-40 overflow-y-auto bg-indigo-800 bg-opacity-20 rounded border border-indigo-700 divide-y divide-indigo-700/40",children:A.map(K=>p.jsxs("div",{className:"flex items-center justify-between p-2 hover:bg-indigo-700/30",children:[p.jsxs("div",{className:"overflow-hidden",children:[p.jsxs("div",{className:"text-sm font-medium text-indigo-200 truncate flex items-center",children:[K.mediaType==="audio"?p.jsx(Xge,{className:"mr-1 text-indigo-400",size:12}):p.jsx(qP,{className:"mr-1 text-indigo-400",size:12}),K.documentName]}),p.jsx("div",{className:"text-xs text-indigo-400 truncate",children:K.file.name})]}),p.jsx("button",{onClick:()=>ke(K.id),className:"p-1 text-indigo-400 hover:text-red-400 transition-colors",title:"Remove from queue",disabled:x,children:p.jsx(vI,{size:14})})]},K.id))})]}),p.jsxs("button",{onClick:G,className:"w-full p-2.5 bg-gradient-to-r from-indigo-500 to-purple-600 hover:from-indigo-400 hover:to-purple-500 text-white rounded-lg flex items-center justify-center mb-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all shadow",disabled:A.length===0||x,children:[p.jsx(fa,{className:"mr-2"})," Process All Files (",A.length,")"]}),p.jsx(Xn,{type:"source",position:De.Right,id:"whisper-output",style:{background:"#a78bfa",width:12,height:12,border:"2px solid #4f46e5"},isConnectable:r})]}),X&&p.jsxs("div",{className:"ml-4 w-[300px] flex flex-col",children:[p.jsxs("div",{className:"text-md font-bold text-white border-b border-indigo-400 pb-2 mb-3 flex items-center",children:[p.jsx(WP,{className:"mr-2 text-indigo-300",size:18}),p.jsx("span",{children:"Live Transcription"})]}),p.jsx("div",{ref:Re,className:"flex-1 bg-gradient-to-b from-gray-800 to-gray-900 border border-indigo-500 rounded-lg shadow-inner p-3 overflow-y-auto max-h-[400px]",style:{minHeight:"300px"},children:F?p.jsx("div",{children:p.jsx("div",{className:"text-gray-200 font-mono text-sm whitespace-pre-wrap",children:F.split(" ").map((K,re,le)=>{if(re===le.length-1)return p.jsxs("span",{className:"text-teal-300",children:[re>0?" ":"",K,p.jsx("span",{className:"inline-block w-2 h-4 bg-teal-400 ml-1 animate-pulse"})]},re);let he="text-gray-200";return K.endsWith(".")||K.endsWith("!")||K.endsWith("?")?he="text-indigo-200":K.length>6&&(he="text-blue-200"),p.jsxs("span",{className:he,children:[re>0?" ":"",K]},re)})})}):p.jsx("div",{className:"h-full flex items-center justify-center",children:p.jsx("p",{className:"text-indigo-300 italic",children:"Waiting for transcription..."})})}),Y&&p.jsxs("button",{onClick:()=>J(!1),className:"mt-3 p-2 bg-teal-700 hover:bg-teal-600 text-white rounded text-sm flex items-center justify-center",children:[p.jsx("span",{className:"mr-1",children:"✓"})," Transcription Complete"]})]})]})}function l1e({id:t,data:e,isConnectable:r}){const{systemMessage:i='You are an expert historian specializing in civil rights. Your job is to analyze interview transcripts and extract key information. Provide a 1-paragraph summary, followed by 5-7 key points from the interview. Format your response as JSON with "summary" and "keyPoints" fields.',onSystemMessageChange:s,onModelChange:a,canProcess:o=!1}=e,[l,u]=S.useState(!1),[c,d]=S.useState(i),h="gpt-4o-mini",f=()=>{s&&s(c),a&&a(h),u(!1)};return p.jsxs("div",{className:"bg-white p-4 rounded-lg shadow border border-gray-200 w-80",children:[p.jsx("div",{className:"text-lg font-bold mb-2 text-emerald-600 border-b pb-2",children:"AI Prompt Configuration"}),p.jsx("div",{className:"mb-3",children:l?p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"bg-blue-50 p-2 rounded border border-blue-100 mb-2",children:[p.jsxs("div",{className:"text-sm font-medium text-blue-800 flex items-center",children:[p.jsx(HP,{className:"mr-2"})," Using GPT-4o-mini for processing"]}),p.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"Fastest and most cost-effective model for transcript analysis"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"System Message"}),p.jsx("textarea",{value:c,onChange:m=>d(m.target.value),className:"w-full p-2 border rounded text-sm h-40 resize-none",placeholder:"Enter instructions for the AI model..."})]}),p.jsxs("div",{className:"flex space-x-2",children:[p.jsx("button",{onClick:f,className:"flex-1 p-2 bg-emerald-500 text-white rounded text-sm hover:bg-emerald-600",children:"Save Changes"}),p.jsx("button",{onClick:()=>{d(i),u(!1)},className:"p-2 bg-gray-200 text-gray-700 rounded text-sm hover:bg-gray-300",children:"Cancel"})]})]}):p.jsxs("div",{children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("div",{className:"text-sm font-medium text-gray-600",children:"System Prompt"}),p.jsx("button",{onClick:()=>u(!0),className:"p-1.5 text-emerald-600 hover:text-emerald-700 hover:bg-emerald-50 rounded-full",title:"Edit system prompt",children:p.jsx(W$,{size:16})})]}),p.jsx("div",{className:"bg-gray-50 p-3 rounded border border-gray-200 text-sm text-gray-700 mb-3 max-h-32 overflow-y-auto",children:i}),p.jsxs("div",{className:"flex items-center justify-between mb-3",children:[p.jsx("div",{className:"text-sm font-medium text-gray-600",children:"AI Model"}),p.jsxs("div",{className:"text-sm bg-blue-50 text-blue-700 py-1 px-2 rounded flex items-center",children:[p.jsx(HP,{className:"mr-1",size:12})," GPT-4o-mini"]})]}),p.jsx("div",{className:"text-xs text-gray-500 mb-3",children:p.jsx("p",{children:"This system prompt will be used for all transcript processing. The prompt tells the AI how to analyze each transcript and what format to return the results in."})})]})}),p.jsxs("div",{className:"text-xs text-gray-500 mb-4",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 mr-1.5"}),p.jsx("span",{children:"Input comes from transcript nodes"})]}),p.jsxs("div",{className:"flex items-center mt-1",children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 mr-1.5"}),p.jsx("span",{children:"Output goes to results display nodes"})]})]}),p.jsx(Xn,{type:"target",position:De.Left,id:"prompt-input",style:{background:"#3b82f6",width:12,height:12},isConnectable:r}),p.jsx(Xn,{type:"source",position:De.Right,id:"prompt-output",style:{background:"#10b981",width:12,height:12},isConnectable:r})]})}const u1e=({data:t,selected:e})=>{var r,i,s;return p.jsxs("div",{className:`bg-white rounded-xl shadow-md p-4 w-full min-w-[520px] max-h-[700px] overflow-y-auto resize-both overflow-auto border-2 border-transparent hover:border-blue-100 ${e?"border-2 border-blue-400":""}`,children:[p.jsx(Xn,{type:"target",position:De.Left,id:"results-input",style:{background:"#3b82f6",width:12,height:12}}),p.jsx(Xn,{type:"source",position:De.Right,id:"results-output",style:{right:-10,background:"#3b82f6"}}),p.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(A0,{className:"mr-2 text-blue-600"}),"Results Display",t.summaries&&p.jsxs("div",{className:"ml-auto text-xs text-gray-500 flex items-center",children:[p.jsx(zge,{className:"mr-1 text-blue-500"}),p.jsx("span",{children:"Drag visualizations from toolbar"})]})]}),t.openVideoPanel&&t.summaries&&p.jsxs("button",{onClick:()=>t.openVideoPanel(t.youtubeEmbedUrl,t.documentName,t.summaries),className:"text-sm px-2 py-1 bg-red-50 text-red-600 rounded-md hover:bg-red-100 flex items-center",title:"Play in video panel",children:[p.jsx(nve,{className:"mr-1"}),"Play Video"]})]}),p.jsxs("div",{className:"flex flex-col gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Overall Summary"}),p.jsx("textarea",{className:"w-full h-64 p-3 text-sm border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",value:((r=t.summaries)==null?void 0:r.overallSummary)||"",onChange:a=>t.onSummaryChange(a.target.value),placeholder:"Overall summary will appear here..."})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"flex items-center justify-between mb-2",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Key Points"}),p.jsx("button",{onClick:t.onAddKeyPoint,className:"p-1 text-blue-600 hover:text-blue-700",children:p.jsx(gI,{})})]}),p.jsx("div",{className:"space-y-4",children:(s=(i=t.summaries)==null?void 0:i.keyPoints)==null?void 0:s.map((a,o)=>p.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[p.jsxs("div",{className:"flex justify-between items-start mb-2",children:[p.jsx("input",{type:"text",value:a.topic,onChange:l=>t.onKeyPointChange(o,"topic",l.target.value),className:"text-sm font-medium bg-transparent border-b border-transparent hover:border-gray-300 focus:border-blue-500 focus:outline-none",placeholder:"Key point title..."}),p.jsx("button",{onClick:()=>t.onRemoveKeyPoint(o),className:"p-1 text-red-500 hover:text-red-600",children:p.jsx(tve,{})})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[p.jsx("input",{type:"text",value:a.timestamp,onChange:l=>t.onKeyPointChange(o,"timestamp",l.target.value),className:"text-sm bg-transparent border-b border-transparent hover:border-gray-300 focus:border-blue-500 focus:outline-none",placeholder:"Timestamp..."}),p.jsx("input",{type:"text",value:a.keywords,onChange:l=>t.onKeyPointChange(o,"keywords",l.target.value),className:"text-sm bg-transparent border-b border-transparent hover:border-gray-300 focus:border-blue-500 focus:outline-none",placeholder:"Keywords..."})]}),p.jsx("textarea",{value:a.summary,onChange:l=>t.onKeyPointChange(o,"summary",l.target.value),className:"w-full h-24 p-2 text-sm border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500",placeholder:"Summary..."}),p.jsx("div",{className:"mt-2 flex justify-end",children:p.jsxs("button",{onClick:()=>t.onEditSummary(a),className:"text-xs text-blue-600 hover:text-blue-700 flex items-center",children:[p.jsx(W$,{className:"mr-1"}),"Edit Summary"]})})]},o))})]}),p.jsx("div",{className:"flex justify-end mt-4",children:p.jsx("button",{onClick:t.onSaveToDatabase,disabled:t.savingToDatabase||t.savedToDatabase,className:`px-4 py-2 rounded-lg font-medium flex items-center ${t.savingToDatabase?"bg-gray-300 text-gray-500 cursor-not-allowed":t.savedToDatabase?"bg-green-100 text-green-700":"bg-blue-600 text-white hover:bg-blue-700"}`,children:t.savingToDatabase?p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin mr-2"}),"Saving..."]}):t.savedToDatabase?p.jsxs(p.Fragment,{children:[p.jsx(A0,{className:"mr-2"}),"Saved"]}):p.jsxs(p.Fragment,{children:[p.jsx(A0,{className:"mr-2"}),"Save to Database"]})})})]})]})},c1e=({data:t})=>{const e=M=>{if(isNaN(M))return"00:00";const O=Math.floor(M/3600),A=Math.floor(M%3600/60),D=Math.floor(M%60);return O>0?`${O.toString().padStart(2,"0")}:${A.toString().padStart(2,"0")}:${D.toString().padStart(2,"0")}`:`${A.toString().padStart(2,"0")}:${D.toString().padStart(2,"0")}`},r=M=>{if(!M)return 0;let O=M;M.includes(" - ")&&(O=M.split(" - ")[0]);const A=O.split(":").map(Number);return A.length===3&&!isNaN(A[0])&&!isNaN(A[1])&&!isNaN(A[2])?A[0]*3600+A[1]*60+A[2]:A.length===2&&!isNaN(A[0])&&!isNaN(A[1])?A[0]*60+A[1]:0},[i,s]=S.useState(!1),[a,o]=S.useState(0),[l,u]=S.useState(0),c=S.useRef(null),d=S.useRef(null),h=t.videoRef||d,f=M=>{if(!M)return"";const O=new URL(M);return O.searchParams.set("enablejsapi","1"),O.searchParams.set("origin",window.location.origin),O.toString()},m=t.summaries&&t.summaries.keyPoints?t.summaries.keyPoints.map(M=>({time:r(M.timestamp),label:M.topic})).sort((M,O)=>M.time-O.time):[];S.useEffect(()=>{if(t.youtubeEmbedUrl){console.log("Setting up YouTube player communication");const M=O=>{if(O.data&&typeof O.data=="string")try{const A=JSON.parse(O.data);console.log("YouTube API message:",A),A.event==="onStateChange"?(s(A.info===1),console.log("Player state changed:",A.info)):A.event==="infoDelivery"&&A.info&&(A.info.currentTime&&u(A.info.currentTime),A.info.playerState!==void 0&&s(A.info.playerState===1),A.info.duration&&A.info.duration!==a&&(o(A.info.duration),console.log("Duration updated:",A.info.duration)))}catch{}};return window.addEventListener("message",M),c.current=setInterval(()=>{if(h&&h.current&&h.current.contentWindow)try{h.current.contentWindow.postMessage(JSON.stringify({event:"listening",id:"player",channel:"widget"}),"*"),h.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"getPlayerState",args:[]}),"*")}catch(O){console.error("Error getting video time:",O)}else console.log("Video ref not ready yet")},1e3),()=>{window.removeEventListener("message",M),c.current&&clearInterval(c.current)}}},[t.youtubeEmbedUrl,h,a]);const v=()=>{if(!h||!h.current){console.error("Video reference not available");return}try{console.log("Attempting to",i?"pause":"play","video"),i?h.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"pauseVideo",args:[]}),"*"):h.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo",args:[]}),"*"),s(!i)}catch(M){console.error("Error controlling video:",M)}},y=M=>{if(!h||!h.current){console.error("Video reference not available");return}try{console.log("Jumping to timestamp:",M),h.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"seekTo",args:[M,!0]}),"*"),u(M),t.onUpdateTimestamp&&t.onUpdateTimestamp(e(M))}catch(O){console.error("Error seeking video:",O)}},b=()=>{if(!m.length)return;const M=m.find(O=>O.time>l);y(M?M.time:m[0].time)},_=()=>{if(!m.length)return;const M=m.filter(O=>O.time<l);M.length>0?y(M[M.length-1].time):y(m[m.length-1].time)},E=(()=>{if(!m.length)return null;for(let M=m.length-1;M>=0;M--)if(m[M].time<=l)return m[M];return null})(),N=f(t.youtubeEmbedUrl);return p.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 w-full min-w-[520px] relative",children:[p.jsx(Xn,{type:"target",position:De.Top,id:"video-input",style:{top:-10,background:"#ef4444"}}),p.jsx(Xn,{type:"source",position:De.Bottom,id:"video-output",style:{bottom:-10,left:"50%",transform:"translateX(-50%)",background:"#ef4444",width:12,height:12,border:"2px solid white",zIndex:1e3}}),p.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[p.jsx(fa,{className:"mr-2 text-red-500"}),"Video Player"]}),p.jsxs("div",{className:"flex flex-col gap-4",children:[N?p.jsx("div",{className:"relative w-full pt-[56.25%]",children:p.jsx("iframe",{ref:h,src:N,className:"absolute top-0 left-0 w-full h-full rounded-lg",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}):p.jsx("div",{className:"h-48 bg-gray-100 rounded-lg flex items-center justify-center",children:p.jsx("p",{className:"text-gray-500",children:"No video loaded"})}),t.currentTimestamp&&p.jsxs("div",{className:"text-sm text-gray-600",children:["Current timestamp: ",t.currentTimestamp]}),N&&p.jsxs("div",{className:"flex flex-col space-y-3",children:[p.jsxs("div",{className:"relative w-full h-8 bg-gray-100 rounded-lg cursor-pointer border border-gray-200",children:[p.jsx("div",{className:"absolute inset-0 flex justify-between",children:[...Array(10)].map((M,O)=>p.jsx("div",{className:"h-full w-px bg-gray-200"},O))}),p.jsx("div",{className:"absolute left-0 top-0 h-full bg-red-400 rounded-l-lg opacity-60",style:{width:`${a?l/a*100:0}%`}}),p.jsx("div",{className:"absolute top-0 h-full w-1 bg-red-600 z-10",style:{left:`${a?l/a*100:0}%`,transform:"translateX(-50%)"}}),m.map((M,O)=>p.jsxs("div",{className:"absolute top-0 h-full flex flex-col items-center cursor-pointer group",style:{left:`${a?M.time/a*100:0}%`},onClick:()=>y(M.time),children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 mt-1"}),p.jsx("div",{className:"w-0.5 h-full bg-blue-500"}),p.jsx("div",{className:"absolute top-full mt-1 opacity-0 group-hover:opacity-100 bg-gray-800 text-white text-xs p-1 rounded whitespace-nowrap transform -translate-x-1/2 transition-opacity z-20",children:M.label})]},O)),p.jsx("input",{type:"range",min:"0",max:a||100,value:l,onChange:M=>y(Number(M.target.value)),className:"absolute w-full h-full opacity-0 cursor-pointer"})]}),p.jsxs("div",{className:"flex items-center justify-between",children:[p.jsxs("div",{className:"flex space-x-2",children:[p.jsx("button",{onClick:_,className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200",title:"Previous marker",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 19l-7-7 7-7m8 14l-7-7 7-7"})})}),p.jsx("button",{onClick:v,className:"p-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200",title:i?"Pause":"Play",children:i?p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6m7-3a9 9 0 11-18 0 9 9 0 0118 0z"})}):p.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),p.jsx("button",{onClick:b,className:"p-2 bg-gray-100 rounded-lg hover:bg-gray-200",title:"Next marker",children:p.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 5l7 7-7 7M5 5l7 7-7 7"})})})]}),p.jsxs("div",{className:"text-sm font-mono",children:[e(l)," / ",e(a)]})]})]}),t.summaries&&t.summaries.keyPoints&&t.summaries.keyPoints.length>0&&p.jsxs("div",{className:"mt-4",children:[p.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-700",children:"Key Points"}),p.jsx("div",{className:"max-h-[200px] overflow-y-auto pr-2",children:t.summaries.keyPoints.map((M,O)=>{const A=E&&M.topic===E.label&&r(M.timestamp)===E.time;return p.jsx("div",{onClick:()=>y(r(M.timestamp)),className:`flex items-start p-2 rounded mb-1 cursor-pointer transition-colors ${A?"bg-blue-50 border-l-4 border-blue-500":"hover:bg-gray-50 border-l-4 border-transparent"}`,children:p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center",children:[A&&p.jsx("svg",{className:"w-3 h-3 text-blue-500 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),p.jsx("span",{className:`font-medium text-sm ${A?"text-blue-700":"text-gray-700"}`,children:M.topic})]}),p.jsx("div",{className:"text-xs text-gray-500 mt-1",children:M.timestamp})]})},O)})})]})]})]})},d1e=({data:t})=>{const e=S.useRef(null),[r,i]=S.useState({width:400,height:400}),[s,a]=S.useState(null),o=S.useMemo(()=>{if(!t.summaries)return[];const c=new Map;t.summaries.overallSummary&&t.summaries.overallSummary.toLowerCase().replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g,"").split(/\s+/).filter(f=>f.length>3).forEach(f=>{c.set(f,(c.get(f)||0)+1)}),t.summaries.keyPoints&&t.summaries.keyPoints.forEach(h=>{(h.keywords?h.keywords.split(",").map(m=>m.trim().toLowerCase()):[]).forEach(m=>{c.set(m,(c.get(m)||0)+3)}),h.topic&&c.set(h.topic.toLowerCase(),(c.get(h.topic.toLowerCase())||0)+5)});const d=Array.from(c.entries()).sort((h,f)=>f[1]-h[1]).slice(0,50).map(([h,f],m)=>({name:h,count:f,value:f,id:`keyword-${m}`,parentId:"root"}));return d.unshift({name:"Keywords",id:"root",parentId:null,value:0}),d},[t.summaries]),l=S.useMemo(()=>{if(!o.length)return null;const c=vee().id(d=>d.id).parentId(d=>d.parentId)(o);return zg(c).sum(d=>d.data.value).sort((d,h)=>h.value-d.value)},[o]);S.useEffect(()=>{if(!e.current)return;const c=new ResizeObserver(d=>{if(d[0]){const{width:h,height:f}=d[0].contentRect;i({width:h,height:f})}});return c.observe(e.current),()=>{e.current&&c.unobserve(e.current)}},[]);const u=(c,d,h)=>{if(!c)return{lines:[],totalHeight:0};const f=c.split(" "),m=[];let v=f[0];const y=d/(h*.6);for(let b=1;b<f.length;b++){const _=f[b],w=`${v} ${_}`;w.length<y?v=w:(m.push(v),v=_)}return m.push(v),{lines:m,totalHeight:m.length*h*1.2}};return p.jsxs("div",{className:"bg-white rounded-xl shadow-md w-full h-full overflow-hidden border-2 border-transparent hover:border-blue-100",ref:e,children:[p.jsx(Xn,{type:"target",position:De.Left,id:"viz-input",style:{left:-10,background:"#818cf8",top:"50%",transform:"translateY(-50%)"}}),p.jsxs("div",{className:"p-4",children:[p.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[p.jsx(H$,{className:"mr-2 text-blue-500"}),"Keyword Bubble Chart"]}),p.jsx("div",{className:"relative",style:{height:r.height-50,width:"100%"},children:t.summaries?l?p.jsx(wT,{width:r.width,height:r.height-50,scaleXMin:.1,scaleXMax:4,scaleYMin:.1,scaleYMax:4,children:c=>p.jsxs("div",{className:"relative w-full h-full overflow-hidden",children:[p.jsxs("svg",{width:r.width,height:r.height-50,className:"cursor-grab",children:[p.jsx("rect",{width:r.width,height:r.height-50,rx:14,fill:"#f9fafb",onTouchStart:c.dragStart,onTouchMove:c.dragMove,onTouchEnd:c.dragEnd,onMouseDown:c.dragStart,onMouseMove:c.dragMove,onMouseUp:c.dragEnd,onMouseLeave:()=>{c.isDragging&&c.dragEnd(),a(null)}}),p.jsx(yT,{root:l,size:[r.width,r.height-50],padding:3,children:d=>{const h=d.descendants().slice(1);return p.jsx(gu,{transform:c.toString(),children:h.map((f,m)=>{if(f.r<5)return null;const v=Math.min(16,Math.max(8,f.r/5)),y=f.r>20,b=u(f.data.data.name,f.r*1.5,v),_=Math.max(...o.map(A=>A.count||0)),w=Math.min(1,(f.data.data.count||0)/(_*.7)),E=210,N=70+30*w,M=90-30*w,O=s===f.data.data.id;return p.jsxs(gu,{children:[p.jsx("circle",{cx:f.x,cy:f.y,r:f.r,fill:`hsl(${E}, ${N}%, ${M}%)`,stroke:O?"#3b82f6":"white",strokeWidth:O?2:1,onMouseEnter:()=>a(f.data.data.id),onMouseLeave:()=>a(null),opacity:.9}),y&&p.jsx("text",{x:f.x,y:f.y,fontSize:v,fontFamily:"Arial",textAnchor:"middle",fill:"#1f2937",dy:-b.totalHeight/2+v,children:b.lines.map((A,D)=>p.jsx("tspan",{x:f.x,dy:D===0?0:v*1.2,children:A},`line-${D}`))})]},`circle-${m}`)})})}})]}),p.jsxs("div",{className:"absolute bottom-4 right-4 bg-white rounded-lg shadow-md flex",children:[p.jsx("button",{onClick:()=>c.scale({scaleX:1.2,scaleY:1.2}),className:"p-2 text-gray-600 hover:text-blue-600",children:"+"}),p.jsx("button",{onClick:()=>c.scale({scaleX:.8,scaleY:.8}),className:"p-2 text-gray-600 hover:text-blue-600",children:"-"}),p.jsx("button",{onClick:()=>c.reset(),className:"p-2 text-gray-600 hover:text-blue-600 text-xs",children:"Reset"})]}),s&&(()=>{const d=l.descendants().find(m=>m.data.data.id===s);if(!d)return null;const h=d.x*c.transformMatrix.scaleX+c.transformMatrix.translateX,f=d.y*c.transformMatrix.scaleY+c.transformMatrix.translateY;return p.jsxs("div",{className:"absolute pointer-events-none bg-white p-2 rounded shadow-md text-xs border border-gray-200",style:{left:h,top:f-40,transform:"translate(-50%, -100%)"},children:[p.jsx("div",{className:"font-bold",children:d.data.data.name}),p.jsxs("div",{children:["Count: ",d.data.data.count]})]})})()]})}):p.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50 rounded-lg",children:p.jsx("p",{className:"text-gray-500",children:"Preparing visualization..."})}):p.jsx("div",{className:"flex items-center justify-center h-full bg-gray-50 rounded-lg",children:p.jsx("p",{className:"text-gray-500",children:"No data available"})})})]})]})},h1e=({data:t})=>{const[e,r]=S.useState(!0),[i,s]=S.useState(null),[a,o]=S.useState([]),[l,u]=S.useState(null),c=S.useMemo(()=>{if(!t.summaries)return[];const f=[],m=new Set;return t.summaries.overallSummary&&d(t.summaries.overallSummary).forEach(v=>{m.has(v)||(f.push({location:v,source:"Summary"}),m.add(v))}),t.summaries.keyPoints&&t.summaries.keyPoints.forEach(v=>{v.topic&&d(v.topic).forEach(y=>{m.has(y)||(f.push({location:y,source:v.topic}),m.add(y))}),v.summary&&d(v.summary).forEach(y=>{m.has(y)||(f.push({location:y,source:v.topic}),m.add(y))})}),f},[t.summaries]);function d(f){if(!f)return[];const m=/([A-Z][a-zA-Z\s]+),\s*([A-Z][a-zA-Z\s]+)/g;return Array.from(f.matchAll(m)).map(y=>`${y[1]}, ${y[2]}`)}S.useEffect(()=>{let f=!0,m;return(async()=>{if(!c.length){r(!1);return}try{r(!0);const y=[];for(let b=0;b<c.length&&f;b++){const{location:_,source:w}=c[b];b>0&&await new Promise(M=>{m=setTimeout(M,1e3)});const E=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(_)}`);if(!E.ok)throw new Error(`Geocoding failed for ${_}`);const N=await E.json();if(N.length>0){const{lat:M,lon:O,display_name:A}=N[0];y.push({id:`marker-${b}`,position:[parseFloat(M),parseFloat(O)],name:_,displayName:A,source:w})}}f&&o(y)}catch(y){f&&(console.error("Error geocoding locations:",y),s("Failed to geocode locations"))}finally{f&&r(!1)}})(),()=>{f=!1,clearTimeout(m)}},[c]),S.useEffect(()=>{let f=!0;async function m(){try{if(!a.length)return;const v=await Em(()=>import("./leaflet-src-CMHfN98j.js").then(E=>E.l),[]),{MapContainer:y,TileLayer:b,Marker:_,Popup:w}=await Em(async()=>{const{MapContainer:E,TileLayer:N,Marker:M,Popup:O}=await import("./index-Dm8M562g.js");return{MapContainer:E,TileLayer:N,Marker:M,Popup:O}},__vite__mapDeps([2,1]));delete v.Icon.Default.prototype._getIconUrl,v.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"}),f&&u({L:v,MapContainer:y,TileLayer:b,Marker:_,Popup:w})}catch(v){f&&(console.error("Error loading map components:",v),s("Failed to load map components"))}}return m(),()=>{f=!1}},[a]);const h=S.useMemo(()=>{if(!a.length)return[0,0];const f=a.reduce((v,y)=>v+y.position[0],0),m=a.reduce((v,y)=>v+y.position[1],0);return[f/a.length,m/a.length]},[a]);return S.useEffect(()=>{if(a.length>0&&!document.getElementById("leaflet-css")){const f=document.createElement("link");f.rel="stylesheet",f.id="leaflet-css",f.href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css",f.integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==",f.crossOrigin="",document.head.appendChild(f)}},[a]),p.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 w-full min-w-[500px] h-[500px] overflow-hidden border-2 border-transparent hover:border-green-100",children:[p.jsx(Xn,{type:"target",position:De.Left,id:"viz-input",style:{left:-10,background:"#818cf8",top:"50%",transform:"translateY(-50%)"}}),p.jsxs("h3",{className:"text-lg font-semibold mb-2 flex items-center",children:[p.jsx(eve,{className:"mr-2 text-green-500"}),"Location Map"]}),p.jsx("div",{className:"w-full h-[430px] bg-gray-50 rounded-lg overflow-hidden relative",children:e?p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"w-8 h-8 border-2 border-green-300 border-t-green-600 rounded-full animate-spin mx-auto mb-2"}),p.jsx("p",{className:"text-gray-500 text-sm",children:"Loading map data..."})]})}):i?p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsxs("div",{className:"text-center p-4",children:[p.jsx("p",{className:"text-red-500 mb-2",children:i}),p.jsx("p",{className:"text-gray-500 text-sm",children:"Please try again later"})]})}):a.length===0?p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsxs("div",{className:"text-center p-4",children:[p.jsx("p",{className:"text-gray-500 mb-2",children:"No locations detected"}),p.jsx("p",{className:"text-gray-400 text-sm",children:"The system couldn't identify any geographical locations in the transcript"})]})}):l?p.jsxs(l.MapContainer,{center:h,zoom:5,style:{height:"100%",width:"100%"},children:[p.jsx(l.TileLayer,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),a.map(f=>p.jsx(l.Marker,{position:f.position,children:p.jsx(l.Popup,{children:p.jsxs("div",{children:[p.jsx("div",{className:"font-bold",children:f.name}),p.jsx("div",{className:"text-xs text-gray-500",children:f.displayName}),p.jsxs("div",{className:"text-xs mt-1",children:[p.jsx("span",{className:"text-gray-600",children:"Mentioned in: "}),p.jsx("span",{className:"font-medium",children:f.source})]})]})})},f.id))]}):p.jsx("div",{className:"flex items-center justify-center h-full",children:p.jsx("p",{className:"text-gray-500",children:"Preparing map..."})})})]})},f1e=({data:t})=>{var h,f,m;const[e,r]=S.useState("ui"),[i,s]=S.useState(!1),a=new Date().toISOString(),o={name:t.documentName||"Interview Name",documentName:t.documentName||"interview_name",created:a,updated:a,source:t.youtubeUrl?"youtube":"file_upload",videoEmbedLink:t.youtubeEmbedUrl?t.youtubeEmbedUrl.replace("?enablejsapi=1",""):null,summary:((h=t.summaries)==null?void 0:h.overallSummary)||null,userID:"user_123",status:"processed",processingTime:"2.4s",wordCount:t.transcript?t.transcript.split(/\s+/).length:0},l=v=>v?v.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"").substring(0,30):`keypoint-${Math.random().toString(36).substring(2,9)}`,u=((m=(f=t.summaries)==null?void 0:f.keyPoints)==null?void 0:m.map((v,y)=>({id:l(v.topic),topic:v.topic,summary:v.content||v.summary,timestamp:v.timestamp||null,keywords:v.keywords||"keywords, civil rights"})))||[],c=JSON.stringify(o,null,2),d=v=>v===null?p.jsx("span",{className:"text-gray-400",children:"null"}):typeof v=="string"?p.jsxs("span",{className:"text-green-600",children:['"',v,'"']}):typeof v=="number"?p.jsx("span",{className:"text-blue-600",children:v}):typeof v=="boolean"?p.jsx("span",{className:"text-purple-600",children:v.toString()}):Array.isArray(v)?p.jsxs("span",{className:"text-gray-500",children:["Array(",v.length,")"]}):typeof v=="object"?p.jsx("span",{className:"text-gray-500",children:"Object"}):String(v);return p.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 w-full",children:[p.jsx(Xn,{type:"target",position:De.Left,id:"metadata-input",style:{left:-10,background:"#818cf8",top:"50%",transform:"translateY(-50%)"}}),p.jsx(Xn,{type:"source",position:De.Right,id:"metadata-output",style:{right:-10,background:"#818cf8",top:"50%",transform:"translateY(-50%)"}}),p.jsxs("div",{className:"flex justify-between items-center mb-3",children:[p.jsxs("h3",{className:"text-lg font-semibold flex items-center",children:[p.jsx(N0,{className:"mr-2 text-indigo-600"}),"Firestore Metadata"]}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("button",{className:`p-1.5 rounded ${e==="json"?"bg-indigo-100 text-indigo-700":"bg-gray-100 text-gray-500"}`,onClick:()=>r("json"),title:"View as JSON",children:p.jsx(Wge,{size:14})}),p.jsx("button",{className:`p-1.5 rounded ${e==="ui"?"bg-indigo-100 text-indigo-700":"bg-gray-100 text-gray-500"}`,onClick:()=>r("ui"),title:"View as UI",children:p.jsx(ave,{size:14})})]})]}),p.jsxs("div",{className:"flex flex-col gap-2",children:[e==="json"?p.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:[p.jsxs("div",{className:"mb-4",children:[p.jsxs("div",{className:"font-semibold mb-2 text-gray-700",children:["/interviewSummaries/",o.documentName]}),p.jsx("pre",{className:"text-sm font-mono text-gray-700 whitespace-pre-wrap",children:c})]}),p.jsxs("div",{children:[p.jsxs("div",{className:"font-semibold mb-2 text-gray-700",children:["/interviewSummaries/",o.documentName,"/subSummaries/*"]}),p.jsx("div",{className:"overflow-auto max-h-[350px]",children:u.map((v,y)=>p.jsxs("div",{className:"mb-3 ml-4 pl-2 border-l-2 border-indigo-200",children:[p.jsxs("div",{className:"font-medium text-gray-600 mb-1",children:["Document ID: ",v.id]}),p.jsx("pre",{className:"text-sm font-mono text-gray-700 whitespace-pre-wrap",children:JSON.stringify(v,null,2)})]},y))})]})]}):p.jsx("div",{className:"rounded-lg border border-gray-200 bg-white text-sm",children:p.jsxs("div",{className:"flex flex-col",children:[p.jsx("div",{className:"px-3 py-2 border-b border-gray-200 bg-gray-50 flex items-center text-gray-800 font-semibold",children:p.jsxs("div",{className:"flex items-center",children:[p.jsx(N0,{className:"mr-2 text-indigo-600",size:14}),p.jsxs("span",{className:"font-mono",children:["/interviewSummaries/",o.documentName||"document-id"]})]})}),Object.entries(o).map(([v,y])=>p.jsxs("div",{className:"px-3 py-2 border-b border-gray-200 flex items-start hover:bg-gray-50",children:[p.jsx("div",{className:"w-1/3 font-medium text-gray-700",children:v}),p.jsx("div",{className:"w-2/3 font-mono",children:d(y)})]},v)),p.jsx("div",{className:"px-3 py-2 border-b border-gray-200 bg-gray-50 flex items-center hover:bg-gray-100 cursor-pointer",onClick:()=>s(!i),children:p.jsxs("div",{className:"flex items-center font-medium text-gray-700",children:[i?p.jsx(qge,{size:12,className:"mr-2"}):p.jsx(Hge,{size:12,className:"mr-2"}),"Subcollections"]})}),i&&p.jsxs("div",{className:"pl-6 pr-3 py-2 border-b border-gray-200 bg-blue-50 hover:bg-blue-100",children:[p.jsxs("div",{className:"flex items-center text-blue-700 font-medium mb-1",children:[p.jsx(N0,{className:"mr-2",size:12}),"subSummaries (",u.length," documents)"]}),u.length>0&&p.jsx("div",{className:"ml-4 mt-2 overflow-auto max-h-[350px]",children:u.map((v,y)=>{var b;return p.jsxs("div",{className:"bg-white rounded-md p-2 mb-2 border border-blue-200",children:[p.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["ID: ",v.id]}),p.jsxs("div",{className:"grid grid-cols-2 gap-1",children:[p.jsx("div",{className:"text-xs font-medium text-gray-700",children:"topic"}),p.jsxs("div",{className:"text-xs font-mono text-green-600",children:['"',v.topic,'"']}),p.jsx("div",{className:"text-xs font-medium text-gray-700",children:"timestamp"}),p.jsx("div",{className:"text-xs font-mono",children:v.timestamp?p.jsxs("span",{className:"text-green-600",children:['"',v.timestamp,'"']}):p.jsx("span",{className:"text-gray-400",children:"null"})}),p.jsx("div",{className:"text-xs font-medium text-gray-700",children:"keywords"}),p.jsxs("div",{className:"text-xs font-mono text-green-600",children:['"',v.keywords,'"']}),p.jsx("div",{className:"text-xs font-medium text-gray-700",children:"summary"}),p.jsxs("div",{className:"text-xs font-mono text-green-600",children:['"',((b=v.summary)==null?void 0:b.length)>30?v.summary.substring(0,30)+"...":v.summary,'"']})]})]},y)})})]})]})}),p.jsxs("div",{className:"flex justify-between items-center mt-2 text-sm text-gray-500",children:[p.jsxs("span",{children:["Collection: ",p.jsx("span",{className:"font-mono",children:"/interviewSummaries"})]}),p.jsxs("span",{children:["Size: ",new TextEncoder().encode(c).length," bytes"]})]}),t.savedToDatabase&&p.jsx("div",{className:"mt-2 p-2 bg-green-50 text-green-700 rounded-md text-sm",children:"✓ Saved to Firestore"})]})]})};Ja({type:"transcriptInput",category:"input",component:n1e,defaults:{style:{width:320},data:{label:"Transcript Input"}},metadata:{description:"Node for uploading and processing transcript files",icon:"file-upload"}});Ja({type:"whisperTranscription",category:"input",component:o1e,defaults:{style:{width:320},data:{label:"Whisper Transcription"}},metadata:{description:"Node for transcribing audio and video using OpenAI Whisper",icon:"microphone"}});Ja({type:"promptEditing",category:"processing",component:l1e,defaults:{style:{width:320},data:{label:"Prompt Editing"}},metadata:{description:"Node for editing system prompts for AI processing",icon:"edit"}});Ja({type:"resultsDisplay",category:"output",component:u1e,defaults:{style:{width:560},data:{label:"Results Display"}},metadata:{description:"Node for displaying processing results",icon:"analytics"}});Ja({type:"videoPlayer",category:"media",component:c1e,defaults:{style:{width:420},data:{label:"Video Player"}},metadata:{description:"Node for playing video content",icon:"video"}});Ja({type:"keywordBubble",category:"visualization",component:d1e,defaults:{style:{width:400,height:400},data:{label:"Keyword Bubble Chart"}},metadata:{description:"Visualization node for displaying keyword frequency",icon:"bubble-chart"}});Ja({type:"mapVisualization",category:"visualization",component:h1e,defaults:{style:{width:400,height:400},data:{label:"Location Map"}},metadata:{description:"Visualization node for displaying geographical information",icon:"map"}});Ja({type:"metadata",category:"other",component:f1e,defaults:{style:{width:420,height:550},data:{label:"Metadata"}},metadata:{description:"Node for displaying and managing metadata",icon:"info"}});const FI=VI();console.log("Registered node types:",FI);const pB=({isOpen:t,onClose:e,videoUrl:r,summaries:i,documentName:s,currentTimestamp:a,setCurrentTimestamp:o})=>{const[l,u]=S.useState(!1),[c,d]=S.useState(!1),[h,f]=S.useState(0),[m,v]=S.useState(0),[y,b]=S.useState(!1),_=S.useRef(null),w=S.useRef(null),E=$=>{if(isNaN($))return"00:00";const U=Math.floor($/3600),Y=Math.floor($%3600/60),q=Math.floor($%60);return U>0?`${U.toString().padStart(2,"0")}:${Y.toString().padStart(2,"0")}:${q.toString().padStart(2,"0")}`:`${Y.toString().padStart(2,"0")}:${q.toString().padStart(2,"0")}`},N=$=>{if(!$)return 0;let U=$;$.includes(" - ")&&(U=$.split(" - ")[0]);const Y=U.split(":").map(Number);return Y.length===3&&!isNaN(Y[0])&&!isNaN(Y[1])&&!isNaN(Y[2])?Y[0]*3600+Y[1]*60+Y[2]:Y.length===2&&!isNaN(Y[0])&&!isNaN(Y[1])?Y[0]*60+Y[1]:0},M=i&&i.keyPoints?i.keyPoints.map($=>({time:N($.timestamp),label:$.topic})).sort(($,U)=>$.time-U.time):[];S.useEffect(()=>{if(!window.YT){const $=document.createElement("script");$.src="https://www.youtube.com/iframe_api";const U=document.getElementsByTagName("script")[0];U.parentNode.insertBefore($,U),window.onYouTubeIframeAPIReady=()=>{console.log("YouTube API ready")}}},[]),S.useEffect(()=>{if(r&&_.current){console.log("Setting up YouTube player communication");const $=U=>{if(U.data&&typeof U.data=="string")try{const Y=JSON.parse(U.data);console.log("YouTube API message:",Y),Y.event==="onReady"?(console.log("Player ready"),b(!0)):Y.event==="onStateChange"?(console.log("Player state changed:",Y.info),d(Y.info===1)):Y.event==="infoDelivery"&&Y.info&&(Y.info.currentTime&&v(Y.info.currentTime),Y.info.playerState!==void 0&&d(Y.info.playerState===1),Y.info.duration&&Y.info.duration!==h&&(f(Y.info.duration),console.log("Duration updated:",Y.info.duration)))}catch{}};return window.addEventListener("message",$),setTimeout(()=>{w.current=setInterval(()=>{if(_.current&&_.current.contentWindow)try{_.current.contentWindow.postMessage(JSON.stringify({event:"listening",id:"player",channel:"widget"}),"*"),O("getPlayerState"),O("getCurrentTime"),O("getDuration")}catch(U){console.error("Error getting video time:",U)}},1e3)},1500),()=>{window.removeEventListener("message",$),w.current&&clearInterval(w.current)}}},[r,h]);const O=($,U=[])=>{if(!_.current||!_.current.contentWindow)return console.error("Video reference not available"),!1;try{return _.current.contentWindow.postMessage(JSON.stringify({event:"command",func:$,args:U}),"*"),!0}catch(Y){return console.error(`Error sending ${$} command:`,Y),!1}},A=$=>{if(!$)return"";try{const U=new URL($);return U.searchParams.set("enablejsapi","1"),U.searchParams.set("origin",window.location.origin),U.searchParams.set("autoplay","0"),U.searchParams.set("controls","0"),U.searchParams.set("rel","0"),U.searchParams.set("showinfo","0"),U.toString()}catch(U){return console.error("Error enhancing YouTube URL:",U),$}},D=()=>{console.log("Play/Pause clicked, current state:",c),c?O("pauseVideo")&&d(!1):O("playVideo")&&d(!0)},T=$=>{console.log("Jumping to timestamp:",$),O("pauseVideo"),O("seekTo",[$,!0])&&(v($),o&&o(E($)),setTimeout(()=>{O("playVideo"),d(!0)},200))},I=()=>{if(!M.length)return;const $=M.find(U=>U.time>m);T($?$.time:M[0].time)},x=()=>{if(!M.length)return;const $=M.filter(U=>U.time<m);$.length>0?T($[$.length-1].time):T(M[M.length-1].time)},P=(()=>{if(!M.length)return null;for(let $=M.length-1;$>=0;$--)if(M[$].time<=m)return M[$];return null})(),j=A(r);return t?p.jsxs("div",{className:`fixed right-0 top-0 h-full bg-white shadow-lg transition-all duration-300 z-50 flex flex-col
        ${l?"w-64":"w-[500px]"}`,children:[p.jsxs("div",{className:"p-3 bg-gray-100 border-b flex justify-between items-center",children:[p.jsx("h3",{className:"font-semibold text-gray-700 truncate",children:l?"Video Player":`Video: ${s||"No Title"}`}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("button",{onClick:()=>u(!l),className:"p-1 text-gray-500 hover:text-gray-700",title:l?"Expand":"Minimize",children:l?p.jsx(Yge,{size:14}):p.jsx(Kge,{size:14})}),p.jsx("button",{onClick:e,className:"p-1 text-gray-500 hover:text-red-600",title:"Close",children:p.jsx(ove,{size:14})})]})]}),p.jsxs("div",{className:"flex-1 overflow-auto",children:[!l&&j&&p.jsx("div",{className:"relative pt-[56.25%]",children:p.jsx("iframe",{ref:_,src:j,className:"absolute top-0 left-0 w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})}),p.jsxs("div",{className:"p-3",children:[p.jsxs("div",{className:"text-sm text-gray-600 mb-2",children:[E(m)," / ",E(h)]}),p.jsxs("div",{className:"flex items-center justify-center gap-2",children:[p.jsx("button",{onClick:x,className:"p-2 bg-gray-100 rounded hover:bg-gray-200 disabled:opacity-50",title:"Previous marker",disabled:!j||M.length===0,children:p.jsx(rve,{size:16})}),p.jsx("button",{onClick:D,className:"p-2 bg-red-100 text-red-600 rounded hover:bg-red-200 disabled:opacity-50",title:c?"Pause":"Play",disabled:!j,children:c?p.jsx(_2,{size:16}):p.jsx(fa,{size:16})}),p.jsx("button",{onClick:I,className:"p-2 bg-gray-100 rounded hover:bg-gray-200 disabled:opacity-50",title:"Next marker",disabled:!j||M.length===0,children:p.jsx(ive,{size:16})})]}),!l&&j&&p.jsxs("div",{className:"relative w-full h-6 bg-gray-100 rounded-lg cursor-pointer mt-3 border border-gray-200",children:[p.jsx("div",{className:"absolute inset-0 flex justify-between",children:[...Array(10)].map(($,U)=>p.jsx("div",{className:"h-full w-px bg-gray-200"},U))}),p.jsx("div",{className:"absolute left-0 top-0 h-full bg-red-400 rounded-l-lg opacity-60",style:{width:`${h?m/h*100:0}%`}}),p.jsx("div",{className:"absolute top-0 h-full w-1 bg-red-600 z-10",style:{left:`${h?m/h*100:0}%`,transform:"translateX(-50%)"}}),M.map(($,U)=>p.jsxs("div",{className:"absolute top-0 h-full flex flex-col items-center cursor-pointer group",style:{left:`${h?$.time/h*100:0}%`},onClick:()=>T($.time),children:[p.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 mt-1"}),p.jsx("div",{className:"absolute top-full mt-1 opacity-0 group-hover:opacity-100 bg-gray-800 text-white text-xs p-1 rounded whitespace-nowrap transform -translate-x-1/2 transition-opacity z-20",children:$.label})]},U)),p.jsx("input",{type:"range",min:"0",max:h||100,value:m,onChange:$=>T(Number($.target.value)),className:"absolute w-full h-full opacity-0 cursor-pointer"})]})]}),!l&&i&&i.keyPoints&&i.keyPoints.length>0&&p.jsxs("div",{className:"p-3 border-t",children:[p.jsx("h4",{className:"text-sm font-semibold mb-2 text-gray-700",children:"Key Points"}),p.jsx("div",{className:"max-h-[200px] overflow-y-auto",children:i.keyPoints.map(($,U)=>{const Y=P&&$.topic===P.label&&N($.timestamp)===P.time;return p.jsx("div",{onClick:()=>T(N($.timestamp)),className:`flex items-start p-2 rounded mb-1 cursor-pointer transition-colors ${Y?"bg-blue-50 border-l-4 border-blue-500":"hover:bg-gray-50 border-l-4 border-transparent"}`,children:p.jsxs("div",{className:"flex-1",children:[p.jsxs("div",{className:"flex items-center",children:[Y&&p.jsx(fa,{className:"text-blue-500 mr-1",size:10}),p.jsx("span",{className:`font-medium text-sm ${Y?"text-blue-700":"text-gray-700"}`,children:$.topic})]}),p.jsx("div",{className:"text-xs text-gray-500 mt-1",children:$.timestamp})]})},U)})})]}),!j&&p.jsx("div",{className:"flex items-center justify-center h-40 text-gray-500",children:"No video selected"})]})]}):null},mB=({onDragStart:t})=>{const[e,r]=S.useState("all"),i={input:[{id:"transcript-input",type:"transcriptInput",label:"Transcript Input",description:"Upload and process transcript files",icon:p.jsx(H8,{className:"text-blue-600",size:20})},{id:"whisper-transcription",type:"whisperTranscription",label:"Whisper Transcription",description:"Transcribe audio/video using OpenAI Whisper",icon:p.jsx(gZ,{className:"text-indigo-600",size:20})}],processing:[{id:"prompt-editing",type:"promptEditing",label:"System Prompt Editor",description:"Edit AI processing prompts",icon:p.jsx(_Z,{className:"text-blue-600",size:20})}],output:[{id:"results-display",type:"resultsDisplay",label:"Results Display",description:"Display processing results",icon:p.jsx(IZ,{className:"text-amber-500",size:20})}],visualization:[{id:"keyword-bubble",type:"keywordBubble",label:"Keyword Bubble Chart",description:"Visualize keywords as interactive bubbles",icon:p.jsx(XJ,{className:"text-green-600",size:20})},{id:"map-visualization",type:"mapVisualization",label:"Location Map",description:"Map locations mentioned in the text",icon:p.jsx(hZ,{className:"text-green-600",size:20})}],media:[{id:"video-player",type:"videoPlayer",label:"Video Player",description:"Embed and control video content",icon:p.jsx(xZ,{className:"text-red-600",size:20})}],other:[{id:"metadata",type:"metadata",label:"Metadata",description:"Display and manage metadata",icon:p.jsx(aZ,{className:"text-gray-600",size:20})}]},s=[{id:"all",label:"All",icon:p.jsx(Zge,{})},{id:"input",label:"Input",icon:p.jsx(uve,{})},{id:"processing",label:"Processing",icon:p.jsx(Gge,{})},{id:"output",label:"Output",icon:p.jsx(G$,{})},{id:"visualization",label:"Visualizations",icon:p.jsx(H$,{})},{id:"media",label:"Media",icon:p.jsx(lve,{})},{id:"other",label:"Other",icon:p.jsx(Qge,{})}],a=(u,c)=>{const d={id:c.id,type:c.type,label:c.label};u.dataTransfer.setData("application/reactflow",JSON.stringify(d)),u.dataTransfer.effectAllowed="move",t&&t(u)},o=()=>e==="all"?Object.values(i).flat():i[e]||[],l=u=>{const c=s.find(d=>d.id===u);return c?c.label:"Nodes"};return p.jsxs("div",{className:"nodes-toolbar bg-white rounded-xl shadow-md p-4 w-80",children:[p.jsxs("div",{className:"flex items-center mb-4",children:[p.jsx(cve,{className:"text-blue-500 mr-2"}),p.jsx("h3",{className:"text-lg font-semibold",children:"Node Toolkit"})]}),p.jsx("div",{className:"flex flex-wrap mb-4 gap-1 border-b border-gray-200",children:s.map(u=>p.jsxs("button",{onClick:()=>r(u.id),className:`
              flex items-center px-3 py-2 text-sm rounded-t-lg transition-colors
              ${e===u.id?"bg-blue-50 text-blue-600 border-b-2 border-blue-500 font-medium":"text-gray-500 hover:text-gray-700 hover:bg-gray-50"}
            `,children:[p.jsx("span",{className:"mr-1.5",children:u.icon}),p.jsx("span",{children:u.label})]},u.id))}),p.jsx("div",{className:"mb-2",children:p.jsx("p",{className:"text-sm text-gray-500",children:"Drag and drop to add nodes to the canvas"})}),p.jsxs("div",{className:"grid gap-3 max-h-96 overflow-y-auto pr-2",children:[e!=="all"&&p.jsx("h4",{className:"text-sm font-medium text-gray-700 mt-1 mb-2",children:l(e)}),o().map(u=>p.jsx("div",{className:"border border-gray-200 rounded-lg p-3 cursor-grab hover:bg-blue-50 hover:border-blue-200 transition-colors",draggable:!0,onDragStart:c=>a(c,u),title:`Drag to add ${u.label}`,children:p.jsxs("div",{className:"flex items-center",children:[p.jsx("div",{className:"mr-3 text-xl",children:u.icon}),p.jsxs("div",{children:[p.jsx("h4",{className:"font-medium text-gray-900",children:u.label}),p.jsx("p",{className:"text-xs text-gray-500",children:u.description})]})]})},u.id))]}),p.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100",children:p.jsx("p",{className:"text-xs text-gray-500",children:"ℹ️ Nodes can be connected by dragging from the handles"})})]})},$I={HORIZONTAL:"LR"},E2=(t,e,r=$I.HORIZONTAL)=>{const i=new Xm.graphlib.Graph,s=350,a=250;return i.setGraph({rankdir:r,ranksep:400,nodesep:550,edgesep:120,marginx:100,marginy:150}),i.setDefaultNodeLabel(()=>({})),i.setDefaultEdgeLabel(()=>({})),t.forEach(c=>{const d=c.style||{},h=d.width,f=d.height;i.setNode(c.id,{width:h||(c.type==="resultsDisplay"?s+100:c.type==="metadata"?s+50:c.type==="keywordBubble"?600:s),height:f||(c.type==="resultsDisplay"?a+100:c.type==="videoPlayer"?a+150:c.type==="keywordBubble"?550:a)})}),e.forEach(c=>{i.setEdge(c.source,c.target)}),Xm.layout(i),{nodes:t.map(c=>{const d=i.node(c.id),h={...c.style||{}};if(c.type==="keywordBubble"){h.width=600,h.height=550;let f=[],m=0;t.forEach(y=>{if(y.type==="metadata"){const b=i.node(y.id);b&&f.push({id:y.id,y:b.y})}}),f.length>0?m=f.reduce((b,_)=>b+_.y,0)/f.length:m=d?d.y:0;const v=5e3;return console.log("Using fixed position for keyword bubble:",v),{...c,position:{x:v,y:m-h.height/2},style:h}}return{...c,position:{x:d.x-d.width/2,y:d.y-d.height/2},style:h}}),edges:e}},dx=(t,e)=>{const r=[],i=[],s="input-node";r.push({id:s,type:"transcriptInput",position:{x:0,y:0},data:{label:"Transcript Input",queuedTranscripts:t.map(l=>({documentName:l.docName,youtubeUrl:l.youtubeUrl,file:{name:`${l.docName}.txt`}})),onProcessMultiple:()=>{},onQueueUpdate:()=>{}}});const a="prompt-node";r.push({id:a,type:"promptEditing",position:{x:0,y:0},data:{label:"System Prompt",systemMessage:"Analyze the provided civil rights oral history transcript to extract key information. Create a comprehensive summary of the entire interview capturing the main themes, historical context, and significance. Identify 5-6 key segments from the interview, noting timestamps, topics, and providing brief summaries of each segment.",model:"gpt-4o-mini"}}),i.push({id:`${s}-${a}`,source:s,target:a,animated:!0,type:"default"});const o="combined-keywords";return t.forEach((l,u)=>{var f,m,v,y,b;if(!l.docName||!l.summary){console.warn(`Interview at index ${u} is missing required fields`);return}const c=`interview-${u}`,d=`${c}-results`,h=`${c}-metadata`;r.push({id:d,type:"resultsDisplay",position:{x:0,y:0},data:{label:`Interview: ${l.docName}`,documentName:l.docName,summaries:l.summary||{},overallSummary:((f=l.summary)==null?void 0:f.overallSummary)||"No summary available",keyPoints:((m=l.summary)==null?void 0:m.keyPoints)||[],timestamp:l.timestamp||new Date().toISOString(),youtubeEmbedUrl:hx(l.youtubeUrl||""),openVideoPanel:(_,w,E)=>{e(_||hx(l.youtubeUrl||""),w||l.docName,E||l.summary||{})}}}),r.push({id:h,type:"metadata",position:{x:0,y:0},data:{label:`Metadata: ${l.docName}`,documentName:l.docName,youtubeUrl:l.youtubeUrl||"",youtubeEmbedUrl:hx(l.youtubeUrl||""),summaries:{overallSummary:((v=l.summary)==null?void 0:v.overallSummary)||"No summary available",keyPoints:((b=(y=l.summary)==null?void 0:y.keyPoints)==null?void 0:b.map(_=>({topic:_.topic||"",timestamp:_.timestamp||"",summary:_.summary||"",content:_.summary||"",keywords:typeof _.keywords=="string"?_.keywords:Array.isArray(_.keywords)?_.keywords.join(", "):""})))||[]}}}),i.push({id:`${a}-${d}`,source:a,target:d,animated:!0,type:"default"}),i.push({id:`${d}-${h}`,source:d,target:h,animated:!0,type:"default"})}),r.push({id:o,type:"keywordBubble",position:{x:0,y:0},style:{width:600,height:550},data:{label:"Civil Rights Keywords Visualization",description:"Combined keywords from all interviews",documentName:"All Interviews",summaries:{overallSummary:t.map(l=>{var u;return((u=l.summary)==null?void 0:u.overallSummary)||""}).join(" "),keyPoints:t.flatMap(l=>{var u,c;return((c=(u=l.summary)==null?void 0:u.keyPoints)==null?void 0:c.map(d=>({topic:d.topic||"",keywords:d.keywords||""})))||[]})}}}),t.forEach((l,u)=>{if(!l.docName||!l.summary)return;const d=`${`interview-${u}`}-metadata`;i.push({id:`${d}-${o}`,source:d,target:o,animated:!0,type:"default"})}),E2(r,i,$I.HORIZONTAL)},hx=t=>{if(!t)return"";if(t.includes("youtube.com/embed"))return t;try{if(t.includes("youtube.com/watch")){const e=new URL(t).searchParams.get("v");if(e)return`https://www.youtube.com/embed/${e}`}if(t.includes("youtu.be")){const e=t.split("/").pop().split("?")[0];if(e)return`https://www.youtube.com/embed/${e}`}}catch(e){console.warn("Error parsing YouTube URL:",e)}return t};function p1e({embedded:t=!1}){var q;const[e,r,i]=M$([]),[s,a,o]=L$([]),[l,u]=S.useState([]),[c,d]=S.useState(!0),[h,f]=S.useState(null),[m,v]=S.useState(null),[y,b]=S.useState(!1),[_,w]=S.useState(!0),[E,N]=S.useState({isOpen:!1,videoUrl:"",documentName:"",summaries:null}),M=(F,W,Q)=>{N({isOpen:!0,videoUrl:F,documentName:W,summaries:Q})},O=()=>{N(F=>({...F,isOpen:!1}))},A=()=>{b(!y)},D=S.useCallback((F,W,Q)=>{const H=hB(F,{openVideoPanel:M,documentName:"Example Document",summaries:{overallSummary:"This is an example summary for a node created from the toolbar.",keyPoints:[{topic:"Example Topic 1",timestamp:"00:15",summary:"Example point 1"},{topic:"Example Topic 2",timestamp:"01:30",summary:"Example point 2"}]}});return dB(F,W,Q,H.data)},[M]),{onDragOver:T,onDrop:I}=cB({onNodesChange:r,createNodeFromType:D}),x=$I.HORIZONTAL,R=S.useCallback(()=>{if(e.length===0)return;const{nodes:F,edges:W}=E2(e,s,x);r([...F]),a([...W])},[e,s,x,r,a]),P=S.useCallback(F=>{i(F)},[i]),j=S.useCallback(F=>{o(F)},[o]);S.useEffect(()=>{(async()=>{try{d(!0);let W;try{if(W=await fetch("./testResults.json"),!W.ok)throw new Error("Not found at root path")}catch{try{if(console.log("Trying at public/testResults.json..."),W=await fetch("public/testResults.json"),!W.ok)throw new Error("Not found in public folder")}catch{try{if(console.log("Trying at ./testResults.json..."),W=await fetch("./testResults.json"),!W.ok)throw new Error("Not found in current directory")}catch{throw new Error("Could not find testResults.json in any location")}}}const Q=await W.json();if(!Array.isArray(Q)){f("Invalid data format: expected an array of interviews"),d(!1);return}if(Q.length===0){f("No interview data found"),d(!1);return}u(Q);const{nodes:H,edges:X}=dx(Q,M);if(H.length===0){f("No valid interview data could be processed"),d(!1);return}r(H),a(X)}catch(W){console.error("Error fetching test results:",W),f(`Failed to load interview data: ${W.message}`)}finally{d(!1)}})()},[r,a]),S.useEffect(()=>{if(l.length!==0)if(console.log("Interview data:",l),m===null){const{nodes:F,edges:W}=dx(l,M);r(F),a(W)}else{const F=[l[m]];console.log("Selected interview:",F[0]);const{nodes:W,edges:Q}=dx(F,M);r(W),a(Q)}},[m,l,r,a]);const $=S.useCallback(F=>{const W=uI({...F,animated:!0,type:"default"},s),{nodes:Q,edges:H}=E2(e,W,x);r(Q),a(H)},[s,e,x,r,a]),U=F=>{const W=F.target.value;v(W==="all"?null:Number(W))};if(c)return p.jsx("div",{className:"flex items-center justify-center h-64",children:"Loading interview data..."});if(h)return p.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 p-4 rounded my-4",children:[p.jsx("h3",{className:"font-bold mb-2",children:"Error Loading Data"}),p.jsx("p",{children:h}),p.jsxs("div",{className:"mt-4",children:[p.jsx("p",{className:"text-sm text-gray-700",children:"Troubleshooting steps:"}),p.jsxs("ul",{className:"list-disc pl-5 text-sm text-gray-700 mt-2",children:[p.jsxs("li",{children:["Check that the file ",p.jsx("code",{className:"bg-red-50 px-1",children:"testResults.json"})," exists in the public folder"]}),p.jsx("li",{children:"Verify that the JSON is correctly formatted"}),p.jsx("li",{children:"Make sure each interview has docName, summary, and youtubeUrl fields"})]}),p.jsxs("div",{className:"mt-4 p-2 bg-red-50 rounded text-xs font-mono",children:[p.jsx("p",{className:"mb-1 font-bold",children:"Debug Info:"}),p.jsxs("p",{children:["Current path: ",window.location.pathname]}),p.jsxs("p",{children:["Base URL: ",window.location.origin]}),p.jsxs("p",{children:["Error details: ",h.toString()]})]})]})]});const Y=t?"75vh":"80vh";return p.jsxs("div",{style:{width:"100%",height:Y,border:"1px solid #ccc"},className:"relative",children:[p.jsxs(mI,{nodes:e,edges:s,onNodesChange:P,onEdgesChange:j,onConnect:$,nodeTypes:FI,fitView:!0,attributionPosition:"bottom-right",onDragOver:T,onDrop:I,minZoom:.1,maxZoom:2,defaultViewport:{x:0,y:0,zoom:.8},children:[p.jsx($$,{position:"bottom-right",showZoom:!0,showFitView:!0,showInteractive:!0,fitViewOptions:{padding:.2},className:"bg-white bg-opacity-80 p-1 rounded-lg shadow-md"}),p.jsx(V$,{}),p.jsx(B$,{variant:"dots",gap:16,size:1.5,color:"#aaaaaa",style:{backgroundColor:"#f8fafc"}}),p.jsx(Yr,{position:"top-left",className:`transition-all duration-300 ${y?"opacity-100":"opacity-0 pointer-events-none"}`,children:p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:A,className:"absolute -right-2 -top-2 bg-white p-1 rounded-full shadow-md hover:bg-gray-100 z-10",title:y?"Hide toolbar":"Show toolbar",children:y?"✕":"✚"}),p.jsx(mB,{onDragStart:F=>{}})]})}),!y&&p.jsx(Yr,{position:"top-left",children:p.jsxs("button",{onClick:A,className:"bg-blue-500 text-white p-2 rounded-lg shadow-md hover:bg-blue-600 transition-colors flex items-center",children:[p.jsx(gI,{className:"mr-2"}),"Show Node Toolkit"]})}),p.jsx(Yr,{position:"top-right",className:"bg-white p-3 rounded shadow",children:p.jsxs("div",{className:"flex flex-col space-y-3",children:[p.jsx("h3",{className:"font-semibold text-sm",children:"Civil Rights Interviews"}),p.jsxs("select",{value:m===null?"all":m,onChange:U,className:"border rounded px-2 py-1 text-sm",children:[p.jsx("option",{value:"all",children:"Show Complete Workflow"}),l.map((F,W)=>p.jsx("option",{value:W,children:F.docName},W))]}),p.jsx("div",{className:"text-xs text-gray-600",children:m===null?p.jsxs("span",{children:["Showing all ",l.length," processed interviews"]}):p.jsxs("span",{children:["Showing interview: ",(q=l[m])==null?void 0:q.docName]})}),p.jsxs("button",{onClick:R,className:"bg-indigo-500 text-white p-2 rounded-lg shadow-md hover:bg-indigo-600 transition-colors flex items-center justify-center font-medium mt-2",title:"Re-apply auto layout to organize nodes",children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),"Auto Layout"]})]})}),_&&p.jsx(Yr,{position:"top-center",className:"mt-2",children:p.jsxs("div",{className:"bg-blue-50 border border-blue-200 text-blue-800 px-4 py-3 rounded-lg shadow-md max-w-md text-sm relative",children:[p.jsx("button",{onClick:()=>w(!1),className:"absolute top-1 right-1 text-blue-500 hover:text-blue-700","aria-label":"Close notification",children:p.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})}),p.jsxs("p",{children:["Nodes will now stay where you drop them! Use the ",p.jsx("strong",{children:"Auto Layout"})," button to organize your flow."]})]})})]}),p.jsx(pB,{isOpen:E.isOpen,onClose:O,videoUrl:E.videoUrl,documentName:E.documentName,summaries:E.summaries})]})}function gB(){return p.jsxs("div",{className:"max-w-full mx-auto p-4",children:[p.jsx("div",{className:"flex items-center justify-between mb-4",children:p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold",children:"Civil Rights Interview Analysis Workflow"}),p.jsx("p",{className:"text-gray-600 text-sm",children:"Complete demonstration of transcript processing workflow from input to visualization"})]})}),p.jsx(Uh,{children:p.jsx(p1e,{})})]})}function m1e({summaries:t,handleResetData:e,testingMode:r,flowView:i,setFlowView:s}){return p.jsxs("div",{className:"mb-4 rounded-xl shadow-sm overflow-hidden",children:[p.jsxs("header",{className:"flex justify-between items-center p-4 bg-white",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("div",{className:"font-bold text-xl text-blue-700 flex items-center",children:[p.jsx(G$,{className:"mr-2"}),p.jsx("span",{children:"Transcript Summary"})]}),r&&p.jsx("span",{className:"text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full",children:"Test Mode"})]}),p.jsxs("div",{className:"flex items-center gap-4",children:[t&&p.jsxs("button",{onClick:e,className:"text-red-500 hover:text-red-700 flex items-center text-sm",children:[p.jsx(vI,{className:"mr-1",size:14}),"Reset"]}),p.jsx("div",{className:"text-xs text-gray-400",children:"v0.9.2"})]})]}),p.jsxs("div",{className:"p-3 bg-blue-50 border-t border-blue-100",children:[p.jsxs("div",{className:"flex justify-between items-center mb-2",children:[p.jsx("h3",{className:"font-medium text-blue-600",children:"Application Views"}),p.jsx("div",{className:"text-sm text-gray-600",children:i!=="none"&&p.jsx(p.Fragment,{children:"Currently viewing the complete workflow demonstration"})})]}),p.jsxs("div",{className:"flex space-x-2",children:[p.jsx("button",{onClick:()=>s("none"),className:`px-3 py-1 rounded font-medium text-sm ${i==="none"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Build Your Own Analysis"}),p.jsx("button",{onClick:()=>s("basic"),className:`px-3 py-1 rounded font-medium text-sm ${i==="basic"?"bg-green-600 text-white":"bg-green-100 text-green-700 hover:bg-green-200"}`,children:"See Complete Workflow Demo"})]})]})]})}const g1e=({error:t})=>t?p.jsx("div",{className:"mb-6 bg-red-100 border border-red-300 text-red-700 px-6 py-4 rounded-lg",children:p.jsxs("div",{className:"flex",children:[p.jsx("svg",{className:"w-6 h-6 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:p.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),p.jsxs("div",{children:[p.jsx("p",{className:"font-medium",children:"Error"}),p.jsx("p",{className:"text-sm",children:t})]})]})}):null,v1e=({loading:t,message:e="Processing transcript..."})=>t?p.jsx(Yr,{position:"top-center",children:p.jsxs("div",{className:"flex items-center bg-white p-3 rounded-lg shadow-md",children:[p.jsx("div",{className:"w-6 h-6 border-2 border-blue-200 border-t-blue-500 rounded-full animate-spin mr-3"}),p.jsx("span",{className:"text-gray-500",children:e})]})}):null,y1e=(t,e)=>{const[r,i]=S.useState(()=>{try{const s=window.localStorage.getItem(t);return s?JSON.parse(s):e}catch(s){return console.error(`Error reading localStorage key "${t}":`,s),e}});return S.useEffect(()=>{try{const s=r instanceof Function?r(r):r;window.localStorage.setItem(t,JSON.stringify(s))}catch(s){console.error(`Error setting localStorage key "${t}":`,s)}},[t,r]),[r,i]},_1e=()=>{const[t,e]=y1e("transcript_data",{transcript:null,audioUrl:null,summaries:null,documentName:"",systemMessage:`
    You are an assistant that processes interview transcripts into structured summaries with timestamps and keywords.
    
    Always output the content in the following strict format:
    Overall Summary:
    [Provide a concise overall summary here.]
    
    Key Points:
    1. Title: [First key topic]
       Timestamp: [Start time - End time]
       Keywords: [Comma-separated list of keywords]
       Summary: [Provide a short summary of the first key topic.]
    `,savedToDatabase:!1,youtubeUrl:"",youtubeEmbedUrl:null,model:"gpt-4o-mini"}),[r,i]=S.useState(t.transcript),[s,a]=S.useState(null),[o,l]=S.useState(t.audioUrl),[u,c]=S.useState(t.summaries),[d,h]=S.useState(t.documentName),[f,m]=S.useState(t.systemMessage),[v,y]=S.useState(t.savedToDatabase),[b,_]=S.useState(t.youtubeUrl),[w,E]=S.useState(t.youtubeEmbedUrl),[N,M]=S.useState(""),[O,A]=S.useState(!1),[D,T]=S.useState(t.model||"gpt-4o-mini");return S.useEffect(()=>{(r||u||d||o||b||D)&&e({transcript:r,audioUrl:o,summaries:u,documentName:d,systemMessage:f,savedToDatabase:v,youtubeUrl:b,youtubeEmbedUrl:w,model:D})},[r,o,u,d,f,v,b,w,D,e]),{transcript:r,setTranscript:i,transcriptFile:s,setTranscriptFile:a,audioUrl:o,setAudioUrl:l,summaries:u,setSummaries:c,documentName:d,setDocumentName:h,systemMessage:f,setSystemMessage:m,savedToDatabase:v,setSavedToDatabase:y,youtubeUrl:b,setYoutubeUrl:_,youtubeEmbedUrl:w,setYoutubeEmbedUrl:E,currentTimestamp:N,setCurrentTimestamp:M,savingToDatabase:O,setSavingToDatabase:A,model:D,setModel:T,handleSummaryChange:q=>{u&&c({...u,overallSummary:q})},handleEditSummary:q=>{console.log("Editing summary:",q)},handleKeyPointChange:(q,F,W)=>{if(!u)return;const Q=[...u.keyPoints];Q[q]={...Q[q],[F]:W},c({...u,keyPoints:Q})},handleAddKeyPoint:()=>{if(!u)return;const q={topic:"New Key Point",timestamp:"00:00 - 00:00",keywords:"keyword1, keyword2",summary:"Add your summary here"};c({...u,keyPoints:[...u.keyPoints,q]})},handleRemoveKeyPoint:q=>{if(!u)return;const F=u.keyPoints.filter((W,Q)=>Q!==q);c({...u,keyPoints:F})},handleYoutubeUrlSubmit:q=>{try{let F="";if(q.includes("youtube.com/watch"))F=new URL(q).searchParams.get("v");else if(q.includes("youtu.be/")){const W=q.split("/");F=W[W.length-1]}else q.includes("youtube.com/embed/")&&(F=q.split("youtube.com/embed/")[1].split("?")[0]);if(F){const W=`https://www.youtube.com/embed/${F}?enablejsapi=1`;E(W)}else throw new Error("Invalid YouTube URL. Please provide a valid YouTube video URL (standard, shortened, or embed format).")}catch(F){throw console.error("Error processing YouTube URL:",F),new Error("Failed to process YouTube URL")}},jumpToTimestamp:(q,F,W)=>{try{const Q=s1e(q);if(M(q.split(" - ")[0]),F.current&&isFinite(Q)&&(F.current.currentTime=Q,F.current.play()),W.current&&w&&isFinite(Q))try{W.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"seekTo",args:[Q,!0]}),"*")}catch(H){console.error("Error seeking YouTube video:",H)}}catch(Q){throw console.error(`Error processing timestamp "${q}":`,Q),new Error(`Invalid timestamp format: ${q}. Use MM:SS or HH:MM:SS format.`)}},handleResetData:()=>{window.confirm("Are you sure you want to reset all data? This cannot be undone.")&&(i(null),a(null),l(null),c(null),h(""),_(""),E(null),y(!1),m(`
    You are an assistant that processes interview transcripts into structured summaries with timestamps and keywords.
    
    Always output the content in the following strict format:
    Overall Summary:
    [Provide a concise overall summary here.]
    
    Key Points:
    1. Title: [First key topic]
       Timestamp: [Start time - End time]
       Keywords: [Comma-separated list of keywords]
       Summary: [Provide a short summary of the first key topic.]
  `),localStorage.removeItem("transcript_data"))}}},w1e={default:nh,straight:Iv,step:Tv},b1e={HORIZONTAL:"LR"},fx=(t,e,r=b1e.HORIZONTAL)=>{if(t.length===0)return{nodes:t,edges:e};const i=new Xm.graphlib.Graph,s=350,a=250;i.setGraph({rankdir:r,ranksep:350,nodesep:450,edgesep:100,marginx:70,marginy:120}),i.setDefaultNodeLabel(()=>({})),i.setDefaultEdgeLabel(()=>({}));const u=t.filter(h=>h.type==="transcriptInput"||h.type==="promptEditing"),c=new Set(u.map(h=>h.id));return t.forEach(h=>{if(c.has(h.id))return;const f=h.style||{},m=f.width,v=f.height;i.setNode(h.id,{width:m||(h.type==="resultsDisplay"?s+100:h.type==="metadata"?s+50:h.type==="keywordBubble"?600:s),height:v||(h.type==="resultsDisplay"?a+100:h.type==="videoPlayer"?a+150:h.type==="keywordBubble"?550:a)})}),e.forEach(h=>{!c.has(h.source)&&!c.has(h.target)&&i.setEdge(h.source,h.target)}),Xm.layout(i),{nodes:t.map(h=>{const f=i.node(h.id),m={...h.style||{}};if(c.has(h.id))return{...h,position:h.position,style:m};if(h.type==="keywordBubble"){m.width=m.width||600,m.height=m.height||550;let v=[],y=0;return t.forEach(_=>{if(_.type==="metadata"){const w=i.node(_.id);w&&v.push({id:_.id,y:w.y})}}),v.length>0?y=v.reduce((w,E)=>w+E.y,0)/v.length:y=f?f.y:0,{...h,position:{x:3e3,y:y-m.height/2},style:m}}return{...h,position:{x:f.x-f.width/2,y:f.y-f.height/2},style:m}}),edges:e}},x1e=t=>{if(!t)return"";if(t.includes("youtube.com/embed"))return t;try{if(t.includes("youtube.com/watch")){const e=new URL(t).searchParams.get("v");if(e)return`https://www.youtube.com/embed/${e}`}if(t.includes("youtu.be")){const e=t.split("/").pop().split("?")[0];if(e)return`https://www.youtube.com/embed/${e}`}}catch(e){console.warn("Error parsing YouTube URL:",e)}return t};function E1e(){const t=S.useRef(null),e=S.useRef(null),r=S.useRef(null),[i,s]=S.useState(!1),[a,o]=S.useState(null),[l]=S.useState(!1),[u,c]=S.useState("none"),[d,h]=S.useState(!1),[f,m]=S.useState([]),[v,y]=S.useState({inProgress:!1,current:0,total:0,message:""}),[b,_]=S.useState({isOpen:!1,videoUrl:"",documentName:"",summaries:null}),w=_1e(),{transcript:E,setTranscript:N,setTranscriptFile:M,audioUrl:O,setAudioUrl:A,summaries:D,documentName:T,setDocumentName:I,systemMessage:x,setSystemMessage:R,savedToDatabase:P,setSavedToDatabase:j,youtubeUrl:$,setYoutubeUrl:U,youtubeEmbedUrl:Y,currentTimestamp:q,setCurrentTimestamp:F,savingToDatabase:W,setSavingToDatabase:Q,handleSummaryChange:H,handleEditSummary:X,handleKeyPointChange:J,handleAddKeyPoint:ee,handleRemoveKeyPoint:se,handleYoutubeUrlSubmit:ce,jumpToTimestamp:Se,handleResetData:Ee,model:ie,setModel:ue}=w,[ge,ke]=M$([]),[Re,_e]=L$([]),V=S.useCallback(Ne=>{ke(oe=>pI(Ne,oe))},[]),B=S.useCallback(Ne=>{_e(oe=>w$(Ne,oe))},[]),G=S.useCallback(Ne=>{_e(oe=>{const pe=uI({...Ne,animated:!0,type:"default"},oe),{nodes:be,edges:Le}=fx(ge,pe);return ke(be),Le})},[ge,ke]),K=async Ne=>{try{M(Ne);const oe=await jL(Ne);N(oe)}catch(oe){console.error("Error reading transcript file:",oe),o("Failed to read transcript file")}},re=Ne=>{const oe=URL.createObjectURL(Ne);A(oe)},le=Ne=>{m(Ne)},he=async(Ne,oe,pe,be=ie)=>{if(!Ne)return null;try{const Le=oe||`Transcript-${Date.now()}`,Ce=await fB(Ne,x,be),We=pe?x1e(pe):"";return{documentName:Le,transcript:Ne,summary:Ce,youtubeUrl:pe,youtubeEmbedUrl:We}}catch(Le){throw console.error("Error processing transcript:",Le),Le}},ye=async Ne=>{if(Ne.length!==0)try{s(!0),o(null),y({inProgress:!0,current:0,total:0,message:"Setting up initial nodes..."}),console.log("Starting transcript processing with nodes:",ge);let oe=ge.filter(Ce=>Ce.type==="transcriptInput"||Ce.type==="promptEditing"),pe=[...Re];if(oe.length===0){console.log("No input nodes found, creating default nodes"),oe=[{id:"1",type:"transcriptInput",position:{x:100,y:100},data:{label:"Transcript Input",onTranscriptUpload:K,onAudioUpload:re,documentName:T,onDocumentNameChange:I,youtubeUrl:$,onYoutubeUrlChange:U,onYoutubeUrlSubmit:ce,queuedTranscripts:[],onQueueUpdate:le,onProcessMultiple:ye}},{id:"2",type:"promptEditing",position:{x:100,y:300},data:{label:"Prompt Editing",systemMessage:x,onSystemMessageChange:R,onProcess:he,model:ie,onModelChange:ue,canProcess:!!E}}];const yt={id:"e1-2",source:"1",target:"2",type:"default",animated:!0,style:{stroke:"#3b82f6",strokeWidth:2}};pe.push(yt)}else console.log("Found existing input nodes:",oe),oe=oe.map(Ce=>({...Ce}));console.log("Input nodes to preserve:",oe);const be=[...oe],Le=[];y({inProgress:!0,current:0,total:Ne.length,message:"Starting batch processing..."});for(let Ce=0;Ce<Ne.length;Ce++){const We=Ne[Ce];y({inProgress:!0,current:Ce+1,total:Ne.length,message:`Processing "${We.documentName}" (${Ce+1}/${Ne.length})`});try{const yt=We.file?await jL(We.file):"Sample transcript content for testing",ft=await he(yt,We.documentName,We.youtubeUrl);if(ft){Le.push(ft);const vn=`transcript-${Date.now()}-${Ce}`,Xt=`${vn}-results`,xt=`${vn}-metadata`,jn={id:Xt,type:"resultsDisplay",position:{x:500,y:100+Ce*300},data:{label:`Results: ${ft.documentName}`,documentName:ft.documentName,summaries:ft.summary,onSummaryChange:H,onKeyPointChange:J,onAddKeyPoint:ee,onRemoveKeyPoint:se,onEditSummary:X,onSaveToDatabase:Ie,savingToDatabase:!1,savedToDatabase:!1,youtubeEmbedUrl:ft.youtubeEmbedUrl,openVideoPanel:Be,processed:!0}},St={id:xt,type:"metadata",position:{x:900,y:100+Ce*300},data:{label:`Metadata: ${ft.documentName}`,documentName:ft.documentName,youtubeUrl:ft.youtubeUrl||"",youtubeEmbedUrl:ft.youtubeEmbedUrl,summaries:ft.summary,transcript:yt.substring(0,300)+"...",savingToDatabase:!1,savedToDatabase:!1,processed:!0}};be.push(jn),be.push(St);const yn=oe.find($r=>$r.type==="promptEditing");yn&&pe.push({id:`e-${yn.id}-${Xt}`,source:yn.id,target:Xt,animated:!0,type:"default"}),pe.push({id:`e-${Xt}-${xt}`,source:Xt,target:xt,animated:!0,type:"default"})}}catch(yt){console.error(`Error processing "${We.documentName}":`,yt)}}console.log("Final nodes before update:",be),console.log("Final edges before update:",pe),ke(be),_e(pe),y({inProgress:!1,current:Ne.length,total:Ne.length,message:`Completed processing ${Ne.length} transcripts`}),m([])}catch(oe){console.error("Error in batch processing:",oe),o("Failed to process transcripts batch"),y({inProgress:!1,current:0,total:0,message:"Error processing transcripts"})}finally{s(!1)}},Ie=async()=>{try{Q(!0),await a1e(T,D),j(!0)}catch(Ne){console.error("Error saving to database:",Ne),o("Failed to save to database")}finally{Q(!1)}},Be=(Ne,oe,pe)=>{_({isOpen:!0,videoUrl:Ne,documentName:oe,summaries:pe})},Oe=()=>{_(Ne=>({...Ne,isOpen:!1}))},ze=S.useCallback((Ne,oe,pe)=>{const be=hB(Ne,{handleTranscriptUpload:K,handleAudioUpload:re,documentName:T,setDocumentName:I,youtubeUrl:$,setYoutubeUrl:U,handleYoutubeUrlSubmit:ce,queuedTranscripts:f,onQueueUpdate:le,onProcessMultiple:ye,systemMessage:x,setSystemMessage:R,processTranscript:he,transcript:E,model:ie,setModel:ue,summaries:D,audioUrl:O,audioRef:e,jumpToTimestamp:Se,handleSaveToDatabase:Ie,savingToDatabase:W,savedToDatabase:P,handleSummaryChange:H,handleKeyPointChange:J,handleAddKeyPoint:ee,handleRemoveKeyPoint:se,handleEditSummary:X,youtubeEmbedUrl:Y,videoRef:r,currentTimestamp:q,setCurrentTimestamp:F,openVideoPanel:Be});return dB(Ne,oe,pe,be.data)},[K,re,T,I,$,U,ce,x,R,he,E,ie,ue,D,O,e,Se,Ie,W,P,H,J,ee,se,X,Y,r,q,F,f,ye,Be]),{onDragOver:lt,onDrop:vt}=cB({onNodesChange:ke,createNodeFromType:ze});S.useEffect(()=>{if(ge.length===0){console.log("Initializing nodes with default layout");const Ne=[{id:"1",type:"transcriptInput",position:{x:100,y:100},data:{label:"Transcript Input",onTranscriptUpload:K,onAudioUpload:re,documentName:T,onDocumentNameChange:I,youtubeUrl:$,onYoutubeUrlChange:U,onYoutubeUrlSubmit:ce,queuedTranscripts:[],onQueueUpdate:le,onProcessMultiple:ye}},{id:"2",type:"promptEditing",position:{x:100,y:300},data:{label:"Prompt Editing",systemMessage:x,onSystemMessageChange:R,onProcess:he,model:ie,onModelChange:ue,canProcess:!!E}}],{nodes:oe,edges:pe}=fx(Ne,[{id:"e1-2",source:"1",target:"2",type:"default",animated:!0,style:{stroke:"#3b82f6",strokeWidth:2}}]);ke(oe),_e(pe)}},[ge.length,ke,_e,K,re,x,R,he,ie,ue,E,T,I,$,U,ce,ye]);const At=()=>{h(!d)},Ke=S.useCallback(()=>{const{nodes:Ne,edges:oe}=fx(ge,Re);ke(Ne),_e(oe)},[ge,Re,ke,_e]);return p.jsxs("div",{className:"max-w-full mx-auto p-4 bg-gray-50 min-h-screen font-sans",children:[p.jsx(m1e,{summaries:D,handleResetData:Ee,testingMode:l,flowView:u,setFlowView:c}),p.jsx(g1e,{error:a}),i&&!u&&p.jsxs("div",{className:"flex justify-center items-center p-4",children:[p.jsx("div",{className:"w-6 h-6 border-2 border-blue-200 border-t-blue-500 rounded-full animate-spin mr-3"}),p.jsx("span",{className:"text-gray-500",children:"Loading..."})]}),u==="none"?p.jsxs("div",{style:{width:"100%",height:"85vh"},className:"bg-white rounded-xl shadow-md overflow-hidden relative",ref:t,children:[p.jsxs(mI,{nodes:ge,edges:Re,onNodesChange:V,onEdgesChange:B,onConnect:G,nodeTypes:FI,edgeTypes:w1e,defaultEdgeOptions:{animated:!0},onDragOver:lt,onDrop:vt,fitView:!0,minZoom:.1,maxZoom:2,defaultViewport:{x:0,y:0,zoom:.8},children:[p.jsx($$,{position:"bottom-right",showZoom:!0,showFitView:!0,showInteractive:!0,fitViewOptions:{padding:.2},className:"bg-white bg-opacity-80 p-1 rounded-lg shadow-md"}),p.jsx(V$,{}),p.jsx(B$,{variant:"dots",gap:16,size:1.5,color:"#aaaaaa",style:{backgroundColor:"#f8fafc"}}),p.jsx(Yr,{position:"top-left",className:`transition-all duration-300 ${d?"opacity-100":"opacity-0 pointer-events-none"}`,children:p.jsxs("div",{className:"relative",children:[p.jsx("button",{onClick:At,className:"absolute -right-2 -top-2 bg-white p-1 rounded-full shadow-md hover:bg-gray-100 z-10",title:d?"Hide toolbar":"Show toolbar",children:d?"✕":"✚"}),p.jsx(mB,{onDragStart:Ne=>{}})]})}),!d&&p.jsx(Yr,{position:"top-left",children:p.jsxs("button",{onClick:At,className:"bg-blue-500 text-white p-2 rounded-lg shadow-md hover:bg-blue-600 transition-colors flex items-center",children:[p.jsx(gI,{className:"mr-2"}),"Show Node Toolkit"]})}),p.jsx(Yr,{position:"top-right",children:p.jsxs("button",{onClick:Ke,className:"bg-indigo-500 text-white p-3 rounded-lg shadow-md hover:bg-indigo-600 transition-colors flex items-center font-medium",title:"Re-apply auto layout to organize nodes",children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),"Auto Layout"]})}),v.inProgress&&p.jsx(Yr,{position:"bottom-center",className:"mb-8 bg-white p-3 rounded-lg shadow-lg",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"font-medium mb-1",children:"Batch Processing"}),p.jsx("div",{className:"text-sm text-gray-600",children:v.message}),p.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 mt-2",children:p.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full",style:{width:`${v.current/v.total*100}%`}})}),p.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[v.current," of ",v.total," transcripts processed"]})]})}),p.jsx(v1e,{loading:i,message:"Processing transcript..."})]}),p.jsx(pB,{isOpen:b.isOpen,onClose:Oe,videoUrl:b.videoUrl,documentName:b.documentName,summaries:b.summaries,currentTimestamp:q,setCurrentTimestamp:F})]}):p.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:p.jsx(Uh,{children:p.jsx(gB,{embedded:!0})})})]})}function S1e(){return p.jsx(Uh,{children:p.jsx(E1e,{})})}function T1e(){const[t,e]=S.useState(""),r=_r(),i=s=>{s.preventDefault(),t.trim()?r(`/playlist-builder?keywords=${encodeURIComponent(t)}`):alert("Please enter at least one keyword.")};return p.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans flex flex-col items-center justify-center",children:[p.jsxs("div",{className:"w-full max-w-3xl text-center mb-16",children:[p.jsx("h1",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text",children:"Search Interviews"}),p.jsx("p",{className:"text-base leading-relaxed text-gray-600 mb-10 max-w-xl mx-auto",children:"Enter keywords separated by commas to find relevant interviews and create custom playlists"}),p.jsx("form",{onSubmit:i,className:"w-full",children:p.jsxs("div",{className:"relative w-full",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:p.jsx(vT,{className:"w-5 h-5 text-gray-500"})}),p.jsx("input",{type:"text",value:t,onChange:s=>e(s.target.value),placeholder:"civil rights, voting, education...",className:"w-full pl-12 pr-32 py-5 border border-gray-200 bg-white rounded-xl shadow-sm outline-none text-base text-gray-900 transition-all duration-300 focus:shadow-blue-300 focus:ring-2 focus:ring-blue-500"}),p.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-medium rounded-lg shadow-sm border-none cursor-pointer transition-all duration-300 hover:from-blue-700 hover:to-indigo-700 hover:shadow-md",children:"Search"})]})})]}),p.jsx("div",{className:"w-full max-w-3xl",children:p.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[p.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Popular Keywords"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:["civil rights","voting","education","segregation","protests","leadership","communities","legislation","equality","freedom"].map(s=>p.jsx("button",{onClick:()=>{e(s),r(`/playlist-builder?keywords=${encodeURIComponent(s)}`)},className:"px-4 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm border-none cursor-pointer transition-colors duration-200 hover:bg-blue-100 hover:text-blue-800",children:s},s))})]})})]})}function I1e(){const[t]=vg(),e=_r(),r=t.get("documentName"),[i,s]=S.useState(!0),[a,o]=S.useState(null),[l,u]=S.useState(null),[c,d]=S.useState([]),[h,f]=S.useState(null),[m,v]=S.useState(!1),[y,b]=S.useState(!1),[_,w]=S.useState(!1),[E,N]=S.useState(0),[M,O]=S.useState(0),[A,D]=S.useState(0),[T,I]=S.useState(null),[x,R]=S.useState(null),P=S.useRef(null),j=S.useRef(null),$=ie=>{if(!ie)return null;const ue=ie.match(/(?:embed\/|watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return ue?ue[1]:null},U=ie=>{if(!ie)return 0;const ge=ie.split(" - ")[0].replace(/[\[\]]/g,"").trim().split(":").map(Number);return ge.length===3?ge[0]*3600+ge[1]*60+ge[2]:ge.length===2?ge[0]*60+ge[1]:0},Y=ie=>Array.isArray(ie)?ie:typeof ie=="string"?ie.split(",").map(ue=>ue.trim()):[],q=ie=>{if(!c||c.length===0)return 0;for(let ue=c.length-1;ue>=0;ue--)if(U(c[ue].timestamp)<=ie)return ue;return 0};S.useEffect(()=>{if(!r){o("Document name is missing"),s(!1);return}async function ie(){try{s(!0);const ue=Ns(Ct,"interviewSummaries",r),ge=await mu(ue);if(!ge.exists()){o("Interview not found"),s(!1);return}const ke=ge.data();u(ke);const Re=cn(Ct,"interviewSummaries",r,"subSummaries"),_e=await dn(Re),V=[];_e.forEach(B=>{V.push({id:B.id,...B.data()})}),V.sort((B,G)=>U(B.timestamp)-U(G.timestamp)),d(V),s(!1)}catch(ue){console.error("Error fetching interview data:",ue),o("Failed to load interview data"),s(!1)}}ie()},[r]),S.useEffect(()=>{if(window.YT&&window.YT.Player){b(!0);return}const ie=document.createElement("script");ie.src="https://www.youtube.com/iframe_api",ie.async=!0,ie.onload=()=>{window.YT&&window.YT.Player&&b(!0)},document.body.appendChild(ie),window.onYouTubeIframeAPIReady=()=>{b(!0)}},[]),S.useEffect(()=>{if(!y||!(l!=null&&l.videoEmbedLink)||!x)return;const ie=$(l.videoEmbedLink);if(!ie){console.error("Invalid YouTube video link");return}return P.current&&typeof P.current.destroy=="function"&&(P.current.destroy(),v(!1)),P.current=new window.YT.Player(x,{videoId:ie,width:"100%",height:"100%",playerVars:{autoplay:0,controls:0,rel:0,modestbranding:1},events:{onReady:ue=>{v(!0),O(ue.target.getDuration()),console.log("Player is ready with duration:",ue.target.getDuration())},onStateChange:ue=>{w(ue.data===window.YT.PlayerState.PLAYING),ue.data===window.YT.PlayerState.ENDED&&w(!1)},onError:ue=>{console.error("YouTube player error:",ue.data)}}}),j.current=setInterval(()=>{if(P.current&&typeof P.current.getCurrentTime=="function"){const ue=P.current.getCurrentTime();N(ue);const ge=q(ue);ge!==A&&D(ge)}},500),()=>{j.current&&clearInterval(j.current),P.current&&typeof P.current.destroy=="function"&&(P.current.destroy(),P.current=null)}},[y,l,x,A]),S.useEffect(()=>{T!==null&&P.current&&typeof P.current.seekTo=="function"&&(P.current.seekTo(T,!0),I(null))},[T]);const F=ie=>{console.log("Seeking to",ie,"seconds"),I(ie),P.current&&typeof P.current.seekTo=="function"&&(P.current.seekTo(ie,!0),P.current.playVideo(),w(!0))},W=ie=>{f(h===ie?null:ie)},Q=()=>{P.current&&typeof P.current.playVideo=="function"&&(P.current.playVideo(),w(!0))},H=()=>{P.current&&typeof P.current.pauseVideo=="function"&&(P.current.pauseVideo(),w(!1))},X=()=>{if(A<c.length-1){const ie=c[A+1],ue=U(ie.timestamp);F(ue),D(A+1)}},J=()=>{if(A>0){const ie=c[A-1],ue=U(ie.timestamp);F(ue),D(A-1)}},ee=({summary:ie,index:ue,isOpen:ge,isActive:ke})=>{const Re=S.useRef(null),[_e,V]=S.useState(0);S.useEffect(()=>{ge&&Re.current&&V(Re.current.scrollHeight)},[ge]);const B=U(ie.timestamp),G=Y(ie.keywords),K=ue===A;return p.jsxs("div",{className:`accordion-item border-b border-gray-200 ${K?"border-l-4 border-l-blue-500":""}`,children:[p.jsxs("button",{onClick:()=>W(ue),className:`w-full flex items-center justify-between p-4 text-left transition-colors ${ge?"bg-blue-50 text-blue-700":K?"bg-blue-50/50 text-blue-600":"text-gray-800 hover:bg-gray-50"}`,children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx("span",{className:`w-6 h-6 rounded-full flex items-center justify-center font-bold mr-3 ${K?"bg-blue-500 text-white":"bg-blue-100 text-blue-700"}`,children:ue+1}),p.jsx("span",{className:"font-bold",children:ie.topic})]}),ge?p.jsx(eZ,{size:18}):p.jsx(JJ,{size:18})]}),p.jsx("div",{style:{height:ge?_e||"auto":0,overflow:"hidden",transition:"height 0.3s ease",maxHeight:ge?"1000px":"0"},children:p.jsxs("div",{ref:Re,className:"p-4 bg-gray-50",children:[p.jsxs("button",{onClick:re=>{re.stopPropagation(),F(B)},className:`flex items-center mb-4 text-blue-600 hover:text-blue-800 transition-colors ${m?"cursor-pointer":"opacity-50 cursor-wait"}`,disabled:!m,children:[p.jsx(q8,{size:16,className:"mr-2"}),p.jsx("span",{className:"font-bold",children:ie.timestamp?ie.timestamp.split(" - ")[0].replace(/[\[\]]/g,"").trim():"Unknown time"})]}),G.length>0&&p.jsx("div",{className:"mb-4 text-sm flex flex-wrap",children:G.map((re,le)=>p.jsx("span",{className:"mr-2 mb-2 px-2.5 py-0.5 bg-blue-100 text-blue-800 rounded-full text-xs cursor-pointer hover:bg-blue-200 transition-colors",onClick:he=>{he.stopPropagation(),e(`/playlist-builder?keywords=${encodeURIComponent(re)}`)},children:re},le))}),p.jsx("p",{className:"text-gray-700 leading-relaxed",children:ie.summary}),p.jsx("div",{className:"mt-4",children:p.jsx("button",{className:"text-sm text-blue-600 hover:underline hover:text-blue-800 transition-colors",onClick:re=>{re.stopPropagation(),e(`/clip-player?documentName=${encodeURIComponent(r)}&clipId=${encodeURIComponent(ie.id)}`)},children:"▶ View this clip as a standalone page"})})]})})]})},se=ie=>{if(isNaN(ie))return"00:00";const ue=Math.floor(ie/3600),ge=Math.floor(ie%3600/60),ke=Math.floor(ie%60);return ue>0?`${ue.toString().padStart(2,"0")}:${ge.toString().padStart(2,"0")}:${ke.toString().padStart(2,"0")}`:`${ge.toString().padStart(2,"0")}:${ke.toString().padStart(2,"0")}`},ce=()=>c.map((ie,ue)=>({id:ie.id||ue,label:ie.topic||`Segment ${ue+1}`,timestamp:ie.timestamp,startSeconds:U(ie.timestamp),endSeconds:ue<c.length-1?U(c[ue+1].timestamp):M,summary:ie.summary}));if(i)return p.jsx("div",{className:"flex justify-center items-center h-64",children:p.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})});if(a)return p.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-xl",children:p.jsxs("p",{children:[p.jsx("strong",{children:"Error:"})," ",a]})});const Se=ce(),Ee=c.length>0;return p.jsxs("div",{className:"max-w-7xl mx-auto space-y-6 p-6",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:(l==null?void 0:l.name)||r}),p.jsxs("p",{className:"text-gray-600",children:[(l==null?void 0:l.role)&&p.jsx("span",{className:"italic",children:l.role}),c.length>0&&p.jsx("span",{className:"mx-2 text-gray-400",children:"•"}),c.length>0&&p.jsxs("span",{children:[c.length," segments"]})]})]}),p.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[p.jsxs("div",{className:"w-full max-w-2xl mx-auto relative rounded-lg overflow-hidden",style:{height:"360px"},children:[p.jsx("div",{className:"absolute inset-0 bg-black",ref:R}),!m&&p.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 pointer-events-none",children:p.jsx("div",{className:"w-10 h-10 border-4 border-white/50 border-t-white rounded-full animate-spin"})})]}),Ee&&m&&p.jsxs("div",{className:"mt-6 mb-4 w-full max-w-2xl mx-auto",children:[p.jsxs("div",{className:"relative w-full h-2 bg-gray-200 rounded-full overflow-hidden cursor-pointer",onClick:ie=>{const ue=ie.currentTarget.getBoundingClientRect(),ke=(ie.clientX-ue.left)/ue.width*M;F(ke)},onMouseMove:ie=>{if(ie.buttons===1){const ue=ie.currentTarget.getBoundingClientRect(),ke=(ie.clientX-ue.left)/ue.width*M;F(ke)}},children:[p.jsx("div",{className:"absolute top-0 left-0 h-full bg-blue-500",style:{width:`${E/M*100}%`}}),Se.map((ie,ue)=>p.jsx("div",{className:"absolute top-0 w-0.5 h-full bg-gray-400 cursor-pointer",style:{left:`${ie.startSeconds/M*100}%`},onClick:ge=>{ge.stopPropagation(),F(ie.startSeconds)},title:ie.label},ue))]}),p.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[p.jsx("span",{children:se(E)}),p.jsx("span",{children:se(M)})]})]}),p.jsx("div",{className:"w-full max-w-2xl mx-auto flex justify-center items-center py-3 mt-5",children:p.jsx(qV,{onPrevious:J,onPlay:Q,onPause:H,onNext:X,isPlaying:_,hasPrevious:A>0,hasNext:A<c.length-1})}),Ee&&c[A]&&p.jsxs("div",{className:"w-full max-w-2xl mx-auto mt-6 pt-4 border-t border-gray-200",children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:c[A].topic||`Segment ${A+1}`}),Y(c[A].keywords).length>0&&p.jsx("div",{className:"mb-3 flex flex-wrap",children:Y(c[A].keywords).map((ie,ue)=>p.jsx("span",{className:"mr-2 mb-2 px-2.5 py-0.5 bg-blue-100 text-blue-800 rounded-full text-xs cursor-pointer hover:bg-blue-200 transition-colors",onClick:()=>e(`/playlist-builder?keywords=${encodeURIComponent(ie)}`),children:ie},ue))}),p.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:p.jsx("p",{className:"m-0 text-base leading-relaxed text-gray-700",children:c[A].summary})})]})]}),p.jsx("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:p.jsxs("div",{className:"p-6",children:[p.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"Overview"}),p.jsx("p",{className:"text-gray-700 leading-relaxed",children:(l==null?void 0:l.mainSummary)||"No summary available"})]})}),p.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[p.jsx("div",{className:"p-4 border-b border-gray-200",children:p.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Interview Segments"})}),c.map((ie,ue)=>p.jsx(ee,{summary:ie,index:ue,isOpen:h===ue,isActive:A===ue},ie.id||ue)),c.length===0&&p.jsx("div",{className:"p-6 text-center text-gray-500",children:"No segments available for this interview"})]})]})}function C1e(){var _;const[t]=vg(),e=_r(),r=t.get("documentName"),i=t.get("clipId"),[s,a]=S.useState(null),[o,l]=S.useState(null),[u,c]=S.useState(null),[d,h]=S.useState(!1),f=S.useRef(null),m=w=>{const E=w==null?void 0:w.match(/(?:embed\/|watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return(E==null?void 0:E[1])||null},v=w=>{if(!w)return 0;const N=w.split(" - ")[0].replace(/[\[\]]/g,"").trim().split(":").map(Number);return N.length===3?N[0]*3600+N[1]*60+N[2]:N[0]*60+N[1]};S.useEffect(()=>{(async()=>{try{const E=await mu(Ns(Ct,"interviewSummaries",r)),N=await mu(Ns(Ct,"interviewSummaries",r,"subSummaries",i));if(!E.exists()||!N.exists()){c("Clip or interview not found");return}a(E.data()),l(N.data())}catch(E){console.error(E),c("Failed to load data")}})()},[r,i]),S.useEffect(()=>{if(window.YT&&window.YT.Player)return;const w=document.createElement("script");w.src="https://www.youtube.com/iframe_api",document.body.appendChild(w),window.onYouTubeIframeAPIReady=()=>y()},[]);const y=()=>{if(!(s!=null&&s.videoEmbedLink)||!f.current)return;const w=m(s.videoEmbedLink),E=v(o==null?void 0:o.timestamp);new window.YT.Player(f.current,{videoId:w,width:"100%",height:"360",playerVars:{autoplay:1,start:E,controls:1,modestbranding:1},events:{onReady:()=>h(!0)}})};if(S.useEffect(()=>{var w;s&&o&&((w=window.YT)!=null&&w.Player)&&y()},[s,o]),u)return p.jsx("div",{className:"p-6 text-red-600",children:u});if(!s||!o)return p.jsx("div",{className:"p-6",children:"Loading..."});const b=Array.isArray(o.keywords)?o.keywords:((_=o.keywords)==null?void 0:_.split(","))||[];return p.jsxs("div",{className:"max-w-3xl mx-auto p-6 space-y-6",children:[p.jsx("div",{children:p.jsx("h1",{className:"text-3xl font-bold text-blue-700 hover:underline cursor-pointer",onClick:()=>e(`/interview-player?documentName=${encodeURIComponent(r)}`),children:s.name})}),p.jsxs("div",{className:"space-y-2",children:[p.jsx("h2",{className:"text-2xl font-semibold text-blue-800",children:o.topic}),p.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[p.jsx(q8,{size:16,className:"mr-2"}),p.jsx("span",{children:o.timestamp})]}),b.length>0&&p.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:b.map((w,E)=>p.jsxs("span",{className:"bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs flex items-center gap-1 cursor-pointer hover:bg-blue-200",onClick:()=>e(`/playlist-builder?keywords=${encodeURIComponent(w)}`),children:[p.jsx(W8,{size:12})," ",w]},E))})]}),p.jsx("div",{className:"rounded-lg overflow-hidden bg-black mt-6",children:p.jsx("div",{ref:f})}),p.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mt-4",children:p.jsx("p",{className:"text-gray-800 leading-relaxed",children:o.summary})}),s.role&&p.jsx("div",{className:"text-gray-600 text-lg mt-6 italic",children:s.role})]})}function k1e({onViewAllClips:t}){const[e,r]=S.useState(!0),[i,s]=S.useState(null),[a,o]=S.useState([]),[l,u]=S.useState(null),[c,d]=S.useState(""),[h,f]=S.useState([]),m=_r(),{cache:v,updateCache:y,addSearchToCache:b,getSearchFromCache:_}=S.useContext(Gv);S.useEffect(()=>{v.keywords?(console.log("Using cached keyword data"),o(v.keywords),r(!1)):w()},[v.keywords]),S.useEffect(()=>{if(c){const x=_("keywords",c);if(x)console.log("Using cached keyword search results"),f(x);else{const R=a.filter(P=>P.keyword.toLowerCase().includes(c.toLowerCase()));f(R),b("keywords",c,R)}}else f(a)},[c,a]);const w=async()=>{try{r(!0);const x={},R=await dn(cn(Ct,"interviewSummaries"));for(const j of R.docs){const $=j.id,U=j.data(),Y=cn(Ct,"interviewSummaries",$,"subSummaries");(await dn(Y)).forEach(F=>{const W=F.data();W.keywords&&W.keywords.split(",").map(H=>H.trim().toLowerCase()).forEach(H=>{x[H]||(x[H]={count:0,summaries:[]}),x[H].count++;const X={...W,id:F.id,documentName:$,videoEmbedLink:U.videoEmbedLink,personName:U.name||"Unknown",thumbnailUrl:U.videoEmbedLink?`https://img.youtube.com/vi/${E(U.videoEmbedLink)}/mqdefault.jpg`:null};x[H].summaries.push(X)})})}const P=Object.entries(x).filter(([j,$])=>$.count>1).map(([j,$])=>{let U=0;return $.summaries.forEach(Y=>{if(Y.timestamp&&Y.timestamp.includes(" - ")){const q=N(Y.timestamp),F=N(Y.timestamp.split(" - ")[1]);U+=Math.max(0,M(F)-M(q))}}),{keyword:j,count:$.count,totalLengthSeconds:U,summaries:$.summaries}}).sort((j,$)=>$.count-j.count);o(P),f(P),y("keywords",P),r(!1)}catch(x){console.error("Error fetching keywords:",x),s("Failed to load keyword data"),r(!1)}},E=x=>{if(!x)return null;const R=/^.*(youtu.be\/|v\/|e\/|u\/\w+\/|embed\/|v=)([^#&?]*).*/,P=x.match(R);return P&&P[2].length===11?P[2]:null},N=x=>{const R=x.match(/(?:\[)?(\d{1,2}:\d{2}(?::\d{2})?)/);return R?R[1]:"00:00"},M=x=>{const R=x.split(":").map(Number);return R.length===2?R[0]*60+R[1]:R.length===3?R[0]*3600+R[1]*60+R[2]:0},O=x=>{u(l===x?null:x)},A=x=>{m(`/playlist-builder?keywords=${encodeURIComponent(x)}`)},D=x=>{m(`/playlist-editor?keywords=${encodeURIComponent(x)}`)},T=(x,R)=>{m(`/clip-player?documentName=${encodeURIComponent(x)}&clipId=${encodeURIComponent(R)}`)};function I(x){const R=Math.floor(x/3600),P=Math.floor(x%3600/60),j=x%60;return R>0?`${R}:${P.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}`:`${P}:${j.toString().padStart(2,"0")}`}return e?p.jsx("div",{className:"flex justify-center items-center h-64 bg-gray-50",children:p.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"})}):i?p.jsx("div",{className:"flex justify-center items-center h-64 bg-gray-50",children:p.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg shadow-sm",children:i})}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"mb-6",children:p.jsxs("div",{className:"max-w-md",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter Keywords"}),p.jsx("input",{type:"text",placeholder:"Type to filter...",value:c,onChange:x=>d(x.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})}),p.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:h.length===0?p.jsx("div",{className:"p-6 text-center text-gray-500",children:"No keywords found matching your search."}):p.jsx("ul",{className:"list-none m-0 p-0 border-t border-gray-100",children:h.map(x=>p.jsx("li",{className:"border-b border-gray-100 transition-colors hover:bg-gray-50",children:p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-semibold text-blue-600 mb-2 cursor-pointer transition-colors hover:text-blue-800",onClick:()=>O(x.keyword),children:x.keyword}),p.jsxs("div",{className:"my-2",children:[p.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-blue-100 text-blue-800 text-xs font-medium mr-2",children:[x.count," clips"]}),p.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-green-100 text-green-800 text-xs font-medium",children:[I(x.totalLengthSeconds)," total length"]})]})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("button",{onClick:()=>A(x.keyword),className:"inline-flex items-center px-3 py-2 border-0 rounded-md bg-blue-600 text-white text-sm font-medium cursor-pointer transition-colors hover:bg-blue-700",children:[p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"mr-1.5",children:[p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Play"]}),p.jsxs("button",{onClick:()=>D(x.keyword),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md bg-white text-gray-600 text-sm font-medium cursor-pointer transition-colors hover:bg-gray-50",children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"mr-1.5",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]})]})]}),l===x.keyword&&p.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsx("h4",{className:"text-base font-medium text-gray-600",children:"Clips with this keyword:"}),p.jsxs("button",{onClick:()=>t(x.keyword),className:"text-blue-600 text-sm font-medium flex items-center hover:text-blue-800",children:["View all ",x.count," clips",p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-1",viewBox:"0 0 20 20",fill:"currentColor",children:p.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:x.summaries.slice(0,6).map((R,P)=>p.jsxs("div",{className:"bg-gray-50 rounded-lg shadow overflow-hidden hover:shadow-md transition-shadow cursor-pointer",onClick:()=>T(R.documentName,R.id),children:[p.jsxs("div",{className:"relative pb-[56.25%] bg-gray-200",children:[R.thumbnailUrl?p.jsx("img",{src:R.thumbnailUrl,alt:R.topic||R.documentName,className:"absolute inset-0 w-full h-full object-cover"}):p.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-300",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),p.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-3",children:p.jsx("span",{className:"text-white text-xs font-medium",children:R.timestamp})})]}),p.jsxs("div",{className:"p-3",children:[p.jsx("h4",{className:"text-sm font-medium text-blue-600 mb-1 line-clamp-1",children:R.topic||"Untitled Clip"}),p.jsx("p",{className:"text-xs text-gray-500 mb-2",children:R.personName}),p.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:R.summary})]})]},P))}),p.jsx("div",{className:"md:hidden mt-4 text-center",children:p.jsxs("button",{onClick:()=>t(x.keyword),className:"inline-flex items-center px-4 py-2 border-0 rounded-md bg-blue-600 text-white text-sm font-medium cursor-pointer transition-colors hover:bg-blue-700",children:["View all ",x.count," clips"]})})]})]})},x.keyword))})})]})}function N1e({initialSearchTerm:t=""}){const[e,r]=S.useState(t),[i,s]=S.useState([]),[a,o]=S.useState(!1),[l,u]=S.useState(!1),[c,d]=S.useState(null),h=_r(),{getSearchFromCache:f,addSearchToCache:m}=S.useContext(Gv);S.useEffect(()=>{t&&(r(t),v(t))},[t]);const v=async(w=e)=>{if(!w.trim()){s([]),u(!1);return}u(!0);const E=f("clips",w);if(E){console.log("Using cached clip search results"),s(E);return}o(!0);try{const N=w.split(",").map(O=>O.trim().toLowerCase()),M=await y(N);s(M),m("clips",w,M)}catch(N){console.error("Error searching for clips:",N),d("Failed to search for clips")}finally{o(!1)}},y=async w=>{const E=await dn(cn(Ct,"interviewSummaries")),N=[];for(const M of E.docs){const O=M.id,A=M.data(),D=A.videoEmbedLink,T=D?`https://img.youtube.com/vi/${b(D)}/mqdefault.jpg`:null,I=cn(Ct,"interviewSummaries",O,"subSummaries");(await dn(I)).forEach(R=>{const P=R.data(),j=(P.keywords||"").split(",").map(U=>U.trim().toLowerCase());w.some(U=>j.includes(U))&&N.push({id:R.id,documentName:O,personName:A.name||"Unknown",...P,...A,thumbnailUrl:T})})}return N},b=w=>{if(!w)return null;const E=/^.*(youtu.be\/|v\/|e\/|u\/\w+\/|embed\/|v=)([^#&?]*).*/,N=w.match(E);return N&&N[2].length===11?N[2]:null},_=(w,E)=>{h(`/clip-player?documentName=${encodeURIComponent(w)}&clipId=${encodeURIComponent(E)}`)};return c?p.jsx("div",{className:"flex justify-center items-center h-64 bg-gray-50",children:p.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg shadow-sm",children:c})}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"mb-6",children:p.jsxs("div",{className:"max-w-lg",children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Clips by Keywords"}),p.jsxs("div",{className:"flex",children:[p.jsx("input",{type:"text",placeholder:"Enter keywords (comma separated)...",value:e,onChange:w=>r(w.target.value),className:"flex-grow px-4 py-2.5 border border-gray-300 rounded-l-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",onKeyDown:w=>{w.key==="Enter"&&v()}}),p.jsx("button",{onClick:()=>v(),className:"px-4 py-2.5 bg-blue-600 text-white rounded-r-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors",children:"Search"})]})]})}),p.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:a?p.jsx("div",{className:"p-12 flex justify-center",children:p.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"})}):l?i.length===0?p.jsx("div",{className:"p-6 text-center text-gray-500",children:"No clips found matching your search keywords."}):p.jsxs("div",{className:"p-4",children:[p.jsxs("h2",{className:"text-lg font-semibold text-gray-800 mb-4",children:["Found ",i.length," clip",i.length!==1?"s":""]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(w=>p.jsxs("div",{className:"bg-gray-50 rounded-lg shadow overflow-hidden hover:shadow-md transition-shadow cursor-pointer",onClick:()=>_(w.documentName,w.id),children:[p.jsxs("div",{className:"relative pb-[56.25%] bg-gray-200",children:[w.thumbnailUrl?p.jsx("img",{src:w.thumbnailUrl,alt:w.topic||w.documentName,className:"absolute inset-0 w-full h-full object-cover"}):p.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-300",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),p.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-3",children:p.jsx("span",{className:"text-white text-xs font-medium",children:w.timestamp})})]}),p.jsxs("div",{className:"p-4",children:[p.jsx("h3",{className:"text-base font-medium text-blue-600 mb-1 line-clamp-1",children:w.topic||"Untitled Clip"}),p.jsx("p",{className:"text-sm text-gray-500 mb-2 font-medium",children:w.personName}),p.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:w.summary}),p.jsx("div",{className:"flex flex-wrap gap-1",children:(w.keywords||"").split(",").map((E,N)=>p.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-blue-100 text-blue-800 text-xs font-medium",children:E.trim()},N))})]})]},w.id))})]}):p.jsx("div",{className:"p-6 text-center text-gray-500",children:"Enter keywords above to search for relevant clips."})})]})}function A1e(){const[t,e]=S.useState([]),[r,i]=S.useState(!0),[s,a]=S.useState(null),[o,l]=S.useState(""),[u,c]=S.useState([]),[d,h]=S.useState(null),[f,m]=S.useState(!1),v=_r(),{cache:y,updateCache:b}=S.useContext(Gv);S.useEffect(()=>{y.people?(console.log("Using cached people data"),e(y.people),c(y.people),i(!1)):E()},[y.people]),S.useEffect(()=>{if(o){const x=t.filter(R=>R.name.toLowerCase().includes(o.toLowerCase()));c(x)}else c(t)},[o,t]),S.useEffect(()=>{d&&m(!0)},[d]);const _=()=>{m(!1)},w=x=>{const R=x==null?void 0:x.match(/embed\/([a-zA-Z0-9_-]+)/);return R?R[1]:null},E=async()=>{try{i(!0);const x=await dn(cn(Ct,"interviewSummaries")),R=[];x.forEach(P=>{const j=P.data(),$=w(j.videoEmbedLink);R.push({id:P.id,name:j.name||"Unknown Name",role:j.role||"Unknown Role",videoEmbedLink:j.videoEmbedLink,thumbnailUrl:$?`https://img.youtube.com/vi/${$}/hqdefault.jpg`:null})}),e(R),c(R),b("people",R),i(!1)}catch(x){console.error("Error fetching people:",x),a("Failed to load interview subjects"),i(!1)}},N=()=>{if(!d)return;const x=u.findIndex(R=>R.id===d.id);x>0?h(u[x-1]):h(u[u.length-1])},M=()=>{if(!d)return;const x=u.findIndex(R=>R.id===d.id);x<u.length-1?h(u[x+1]):h(u[0])};S.useEffect(()=>{const x=R=>{f&&(R.key==="ArrowLeft"?N():R.key==="ArrowRight"?M():R.key==="Escape"&&_())};return window.addEventListener("keydown",x),()=>window.removeEventListener("keydown",x)},[f,d,u]);const O=()=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("polyline",{points:"15 18 9 12 15 6"})}),A=()=>p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("polyline",{points:"9 18 15 12 9 6"})}),D=()=>p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),p.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),T=({person:x,isOpen:R,onClose:P,onPrev:j,onNext:$})=>{if(!R||!x)return null;const U=Y=>{Y.target===Y.currentTarget&&P()};return p.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:[p.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60",onClick:U}),p.jsx("button",{className:"absolute left-4 md:left-8 z-50 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:Y=>{Y.stopPropagation(),j()},"aria-label":"Previous person",children:p.jsx(O,{})}),p.jsx("button",{className:"absolute right-4 md:right-8 z-50 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:Y=>{Y.stopPropagation(),$()},"aria-label":"Next person",children:p.jsx(A,{})}),p.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-md w-full overflow-hidden animate-fadeIn z-50 relative",children:[p.jsxs("div",{className:"relative",children:[x.thumbnailUrl&&p.jsx("div",{className:"w-full h-48 overflow-hidden",children:p.jsx("img",{src:x.thumbnailUrl,alt:x.name,className:"w-full h-full object-cover scale-125"})}),p.jsx("button",{className:"absolute top-2 right-2 bg-black bg-opacity-60 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:P,"aria-label":"Close",children:p.jsx(D,{})})]}),p.jsxs("div",{className:"p-6",children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:x.name}),p.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:x.role}),p.jsx("button",{onClick:()=>v(`/interview-player?documentName=${encodeURIComponent(x.id)}`),className:"w-full bg-blue-600 text-white px-4 py-3 rounded-md hover:bg-blue-700 transition-colors duration-200 font-medium",children:"View Interview"})]})]})]})},I=({person:x})=>{const R=(d==null?void 0:d.id)===x.id;return p.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[p.jsx("div",{}),p.jsx("div",{className:`w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 rounded-md 
                    overflow-hidden shadow-md cursor-pointer transition-all duration-200
                    ${R?"ring-4 ring-blue-500":"hover:ring-2 hover:ring-blue-300"}`,onClick:()=>h(x),style:{touchAction:"manipulation"},children:x.thumbnailUrl?p.jsx("div",{className:"w-full h-full overflow-hidden",children:p.jsx("img",{src:x.thumbnailUrl,alt:x.name,className:"w-full h-full object-cover object-center scale-150",draggable:!1,loading:"lazy"})}):p.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:p.jsx("span",{className:"text-gray-400 text-xs",children:"No photo"})})}),p.jsx("div",{className:"text-center w-full",children:p.jsx("p",{className:`text-xs sm:text-sm truncate max-w-full ${R?"font-bold text-blue-600":"text-gray-700"}`,children:x.name})})]})};return r?p.jsx("div",{className:"flex justify-center items-center h-64",children:p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):s?p.jsx("div",{className:"flex justify-center items-center h-64",children:p.jsx("div",{className:"text-red-500",children:s})}):t.length===0?p.jsx("div",{className:"flex justify-center items-center h-64",children:p.jsx("div",{className:"text-gray-500",children:"No interview subjects found"})}):p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"mb-6 max-w-xl mx-auto",children:p.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:p.jsxs("div",{className:"text-center",children:[p.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:o?`${u.length} of ${t.length} People`:`${t.length} People`}),p.jsx("input",{type:"text",value:o,onChange:x=>l(x.target.value),placeholder:"Search by name...",className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring focus:border-blue-300"})]})})}),p.jsx("div",{className:"bg-white rounded-xl shadow-md p-6",children:p.jsx("div",{className:"max-w-6xl mx-auto",children:p.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 gap-x-4 gap-y-6",children:u.map(x=>p.jsx(I,{person:x},x.id))})})}),p.jsx(T,{person:d,isOpen:f,onClose:_,onPrev:N,onNext:M})]})}const Gv=S.createContext(null);function R1e(){const[t,e]=S.useState("keywords"),[r,i]=S.useState(""),[s,a]=S.useState({keywordCount:0,clipCount:0,totalDuration:0,peopleCount:0}),[o,l]=S.useState({keywords:null,keywordSearches:{},clipSearches:{},people:null,lastFetched:{keywords:null,people:null}});S.useEffect(()=>{try{const m=sessionStorage.getItem("directoryCache");if(m){const v=JSON.parse(m),b=new Date().getTime()-(v.timestamp||0),_=60*60*1e3;b<_?(l(w=>({...w,...v.data})),console.log("Restored cache from session storage")):(console.log("Cache expired, will fetch fresh data"),sessionStorage.removeItem("directoryCache"))}}catch(m){console.error("Error loading cache from session storage:",m)}},[]),S.useEffect(()=>{try{if(!o.keywords&&!o.people&&Object.keys(o.keywordSearches).length===0&&Object.keys(o.clipSearches).length===0)return;sessionStorage.setItem("directoryCache",JSON.stringify({data:o,timestamp:new Date().getTime()}))}catch(m){console.error("Error saving cache to session storage:",m)}},[o]),S.useEffect(()=>{var v,y,b,_;const m={keywordCount:((v=o.keywords)==null?void 0:v.length)||0,clipCount:((y=o.keywords)==null?void 0:y.reduce((w,E)=>w+E.count,0))||0,totalDuration:((b=o.keywords)==null?void 0:b.reduce((w,E)=>w+E.totalLengthSeconds,0))||0,peopleCount:((_=o.people)==null?void 0:_.length)||0};a(m)},[o.keywords,o.people]);const u=(m,v)=>{l(y=>({...y,[m]:v,lastFetched:{...y.lastFetched,[m]:new Date().getTime()}}))},c=(m,v,y)=>{const b=m==="keywords"?"keywordSearches":"clipSearches";l(_=>({..._,[b]:{..._[b],[v.toLowerCase()]:{results:y,timestamp:new Date().getTime()}}}))},d=(m,v)=>{const b=o[m==="keywords"?"keywordSearches":"clipSearches"][v.toLowerCase()];if(!b)return null;const w=new Date().getTime()-b.timestamp,E=30*60*1e3;return w<E?b.results:null},h=m=>{e("clips"),setTimeout(()=>{i(m?m.trim():"")},10)},f=m=>{const v=Math.floor(m/3600),y=Math.floor(m%3600/60),b=m%60;return v>0?`${v}:${y.toString().padStart(2,"0")}:${b.toString().padStart(2,"0")}`:`${y}:${b.toString().padStart(2,"0")}`};return p.jsx(Gv.Provider,{value:{cache:o,updateCache:u,addSearchToCache:c,getSearchFromCache:d},children:p.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[p.jsxs("div",{className:"mb-6",children:[p.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Directory"}),p.jsx("p",{className:"text-base text-gray-600 max-w-3xl leading-relaxed",children:"Browse and search through keywords, clips, and people from the Civil Rights History Collection."})]}),p.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:[p.jsxs("div",{className:"flex flex-col items-center p-4 bg-blue-50 rounded-lg",children:[p.jsx("div",{className:"text-2xl font-bold text-blue-800 mb-2",children:s.keywordCount}),p.jsx("div",{className:"text-sm text-gray-500",children:"Total Keywords"})]}),p.jsxs("div",{className:"flex flex-col items-center p-4 bg-green-50 rounded-lg",children:[p.jsx("div",{className:"text-2xl font-bold text-green-800 mb-2",children:s.clipCount}),p.jsx("div",{className:"text-sm text-gray-500",children:"Total Clips"})]}),p.jsxs("div",{className:"flex flex-col items-center p-4 bg-purple-50 rounded-lg",children:[p.jsx("div",{className:"text-2xl font-bold text-purple-800 mb-2",children:f(s.totalDuration)}),p.jsx("div",{className:"text-sm text-gray-500",children:"Total Content Duration"})]}),p.jsxs("div",{className:"flex flex-col items-center p-4 bg-amber-50 rounded-lg",children:[p.jsx("div",{className:"text-2xl font-bold text-amber-800 mb-2",children:s.peopleCount}),p.jsx("div",{className:"text-sm text-gray-500",children:"Total People"})]})]})}),p.jsx("div",{className:"border-b border-gray-200 mb-6",children:p.jsxs("nav",{className:"-mb-px flex space-x-8",children:[p.jsx("button",{onClick:()=>e("keywords"),className:`pb-4 px-1 border-b-2 font-medium text-sm ${t==="keywords"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Keywords"}),p.jsx("button",{onClick:()=>e("clips"),className:`pb-4 px-1 border-b-2 font-medium text-sm ${t==="clips"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Clips"}),p.jsx("button",{onClick:()=>e("people"),className:`pb-4 px-1 border-b-2 font-medium text-sm ${t==="people"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"People"})]})}),t==="keywords"&&p.jsx(k1e,{onViewAllClips:h}),t==="clips"&&p.jsx(N1e,{initialSearchTerm:r}),t==="people"&&p.jsx(A1e,{})]})})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1e="type.googleapis.com/google.protobuf.Int64Value",D1e="type.googleapis.com/google.protobuf.UInt64Value";function vB(t,e){const r={};for(const i in t)t.hasOwnProperty(i)&&(r[i]=e(t[i]));return r}function Qm(t){if(t==null)return null;if(t instanceof Number&&(t=t.valueOf()),typeof t=="number"&&isFinite(t)||t===!0||t===!1||Object.prototype.toString.call(t)==="[object String]")return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map(e=>Qm(e));if(typeof t=="function"||typeof t=="object")return vB(t,e=>Qm(e));throw new Error("Data cannot be encoded in JSON: "+t)}function ku(t){if(t==null)return t;if(t["@type"])switch(t["@type"]){case P1e:case D1e:{const e=Number(t.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+t);return e}default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(e=>ku(e)):typeof t=="function"||typeof t=="object"?vB(t,e=>ku(e)):t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pr extends Yi{constructor(e,r,i){super(`${UI}/${e}`,r||""),this.details=i,Object.setPrototypeOf(this,pr.prototype)}}function M1e(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Jm(t,e){let r=M1e(t),i=r,s;try{const a=e&&e.error;if(a){const o=a.status;if(typeof o=="string"){if(!VL[o])return new pr("internal","internal");r=VL[o],i=o}const l=a.message;typeof l=="string"&&(i=l),s=a.details,s!==void 0&&(s=ku(s))}}catch{}return r==="ok"?null:new pr(r,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1e{constructor(e,r,i,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,Hr(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=r.getImmediate({optional:!0}),this.messaging=i.getImmediate({optional:!0}),this.auth||r.get().then(a=>this.auth=a,()=>{}),this.messaging||i.get().then(a=>this.messaging=a,()=>{}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const r=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return r.error?null:r.token}return null}async getContext(e){const r=await this.getAuthToken(),i=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:r,messagingToken:i,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S2="us-central1",O1e=/^data: (.*?)(?:\n|$)/;function j1e(t){let e=null;return{promise:new Promise((r,i)=>{e=setTimeout(()=>{i(new pr("deadline-exceeded","deadline-exceeded"))},t)}),cancel:()=>{e&&clearTimeout(e)}}}class V1e{constructor(e,r,i,s,a=S2,o=(...l)=>fetch(...l)){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new L1e(e,r,i,s),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(a);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=S2}catch{this.customDomain=null,this.region=a}}_delete(){return this.deleteService()}_url(e){const r=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${r}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${r}.cloudfunctions.net/${e}`}}function F1e(t,e,r){t.emulatorOrigin=`http://${e}:${r}`}function $1e(t,e,r){const i=s=>B1e(t,e,s,{});return i.stream=(s,a)=>q1e(t,e,s,a),i}async function U1e(t,e,r,i){r["Content-Type"]="application/json";let s;try{s=await i(t,{method:"POST",body:JSON.stringify(e),headers:r})}catch{return{status:0,json:null}}let a=null;try{a=await s.json()}catch{}return{status:s.status,json:a}}async function yB(t,e){const r={},i=await t.contextProvider.getContext(e.limitedUseAppCheckTokens);return i.authToken&&(r.Authorization="Bearer "+i.authToken),i.messagingToken&&(r["Firebase-Instance-ID-Token"]=i.messagingToken),i.appCheckToken!==null&&(r["X-Firebase-AppCheck"]=i.appCheckToken),r}function B1e(t,e,r,i){const s=t._url(e);return z1e(t,s,r,i)}async function z1e(t,e,r,i){r=Qm(r);const s={data:r},a=await yB(t,i),o=i.timeout||7e4,l=j1e(o),u=await Promise.race([U1e(e,s,a,t.fetchImpl),l.promise,t.cancelAllRequests]);if(l.cancel(),!u)throw new pr("cancelled","Firebase Functions instance was deleted.");const c=Jm(u.status,u.json);if(c)throw c;if(!u.json)throw new pr("internal","Response is not valid JSON object.");let d=u.json.data;if(typeof d>"u"&&(d=u.json.result),typeof d>"u")throw new pr("internal","Response is missing data field.");return{data:ku(d)}}function q1e(t,e,r,i){const s=t._url(e);return H1e(t,s,r,i||{})}async function H1e(t,e,r,i){var s;r=Qm(r);const a={data:r},o=await yB(t,i);o["Content-Type"]="application/json",o.Accept="text/event-stream";let l;try{l=await t.fetchImpl(e,{method:"POST",body:JSON.stringify(a),headers:o,signal:i==null?void 0:i.signal})}catch(m){if(m instanceof Error&&m.name==="AbortError"){const y=new pr("cancelled","Request was cancelled.");return{data:Promise.reject(y),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(y)}}}}}}const v=Jm(0,null);return{data:Promise.reject(v),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(v)}}}}}}let u,c;const d=new Promise((m,v)=>{u=m,c=v});(s=i==null?void 0:i.signal)===null||s===void 0||s.addEventListener("abort",()=>{const m=new pr("cancelled","Request was cancelled.");c(m)});const h=l.body.getReader(),f=W1e(h,u,c,i==null?void 0:i.signal);return{stream:{[Symbol.asyncIterator](){const m=f.getReader();return{async next(){const{value:v,done:y}=await m.read();return{value:v,done:y}},async return(){return await m.cancel(),{done:!0,value:void 0}}}}},data:d}}function W1e(t,e,r,i){const s=(o,l)=>{const u=o.match(O1e);if(!u)return;const c=u[1];try{const d=JSON.parse(c);if("result"in d){e(ku(d.result));return}if("message"in d){l.enqueue(ku(d.message));return}if("error"in d){const h=Jm(0,d);l.error(h),r(h);return}}catch(d){if(d instanceof pr){l.error(d),r(d);return}}},a=new TextDecoder;return new ReadableStream({start(o){let l="";return u();async function u(){if(i!=null&&i.aborted){const c=new pr("cancelled","Request was cancelled");return o.error(c),r(c),Promise.resolve()}try{const{value:c,done:d}=await t.read();if(d){l.trim()&&s(l.trim(),o),o.close();return}if(i!=null&&i.aborted){const f=new pr("cancelled","Request was cancelled");o.error(f),r(f),await t.cancel();return}l+=a.decode(c,{stream:!0});const h=l.split(`
`);l=h.pop()||"";for(const f of h)f.trim()&&s(f.trim(),o);return u()}catch(c){const d=c instanceof pr?c:Jm(0,null);o.error(d),r(d)}}},cancel(){return t.cancel()}})}const FL="@firebase/functions",$L="0.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1e="auth-internal",K1e="app-check-internal",Y1e="messaging-internal";function X1e(t){const e=(r,{instanceIdentifier:i})=>{const s=r.getProvider("app").getImmediate(),a=r.getProvider(G1e),o=r.getProvider(Y1e),l=r.getProvider(K1e);return new V1e(s,a,o,l,i)};Ro(new Ma(UI,e,"PUBLIC").setMultipleInstances(!0)),Oi(FL,$L,t),Oi(FL,$L,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1e(t=AS(),e=S2){const i=_g(an(t),UI).getImmediate({identifier:e}),s=vj("functions");return s&&J1e(i,...s),i}function J1e(t,e,r){F1e(an(t),e,r)}function Z1e(t,e,r){return $1e(an(t),e)}X1e();async function exe(t,e=10){var r;if(console.log(`Performing vector search for: "${t}"`),!t||t.trim().length===0)throw console.error("Empty search query"),new Error("Search query cannot be empty");try{const i=Q1e(),s=Z1e(i,"vectorSearch");console.log("Calling vector search Cloud Function...");const a=await s({query:t.trim(),limit:Math.max(1,Math.min(50,e))});if(console.log("Vector search response:",a),!a.data||!a.data.success)throw new Error(((r=a.data)==null?void 0:r.error)||"Vector search failed");return a.data.results}catch(i){throw console.error("Error in vector search:",i),i}}function txe(){const[t,e]=S.useState(""),[r,i]=S.useState([]),[s,a]=S.useState(!1),o=_r(),l=h=>{if(!h)return null;const f=/^.*(youtu.be\/|v\/|e\/|u\/\w+\/|embed\/|v=)([^#&?]*).*/,m=h.match(f);return m&&m[2].length===11?m[2]:null},u=async h=>{const f=[];for(const m of h)try{const y=(await mu(Ns(Ct,"interviewSummaries",m.documentId))).data();let b=null;m.segmentId&&(b=(await mu(Ns(Ct,"interviewSummaries",m.documentId,"subSummaries",m.segmentId))).data());const _=y.videoEmbedLink?`https://img.youtube.com/vi/${l(y.videoEmbedLink)}/mqdefault.jpg`:null;f.push({...m,personName:y.name||"Unknown",topic:(b==null?void 0:b.topic)||"Untitled Segment",timestamp:(b==null?void 0:b.timestamp)||"",summary:(b==null?void 0:b.summary)||m.textPreview,keywords:(b==null?void 0:b.keywords)||"",thumbnailUrl:_})}catch(v){console.error(`Error fetching metadata for result ${m.id}:`,v),f.push(m)}return f},c=async h=>{if(h.preventDefault(),!!t.trim()){a(!0);try{const f=await exe(t,20),m=await u(f);i(m)}catch(f){console.error("Error during vector search:",f)}finally{a(!1)}}},d=(h,f)=>{o(`/clip-player?documentName=${encodeURIComponent(h)}&clipId=${encodeURIComponent(f)}`)};return p.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[p.jsxs("div",{className:"w-full max-w-3xl mx-auto text-center mb-12",children:[p.jsx("h1",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text",children:"Semantic Search"}),p.jsx("p",{className:"text-base leading-relaxed text-gray-600 mb-10 max-w-xxl mx-auto",children:"Use natural language to search by concepts, themes, and meaning — not just keywords"}),p.jsx("form",{onSubmit:c,className:"w-full",children:p.jsxs("div",{className:"relative w-full",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:p.jsx(vT,{className:"w-5 h-5 text-gray-500"})}),p.jsx("input",{type:"text",value:t,onChange:h=>e(h.target.value),placeholder:"Search...",className:"w-full pl-12 pr-32 py-5 border border-gray-200 bg-white rounded-xl shadow-sm outline-none text-base text-gray-900 transition-all duration-300 focus:shadow-blue-300 focus:ring-2 focus:ring-blue-500"}),p.jsx("button",{type:"submit",disabled:s,className:"absolute right-3 top-1/2 transform -translate-y-1/2 px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-medium rounded-lg shadow-sm border-none cursor-pointer transition-all duration-300 hover:from-blue-700 hover:to-indigo-700 hover:shadow-md disabled:opacity-70",children:s?"Searching...":"Search"})]})})]}),s?p.jsx("div",{className:"p-12 flex justify-center",children:p.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"})}):r.length>0?p.jsxs("div",{className:"w-full",children:[p.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-900",children:["Found ",r.length," result",r.length!==1?"s":""]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:r.map(h=>p.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden hover:shadow-md transition-shadow cursor-pointer",onClick:()=>d(h.documentId,h.segmentId),children:[p.jsxs("div",{className:"relative pb-[56.25%] bg-gray-200",children:[h.thumbnailUrl?p.jsx("img",{src:h.thumbnailUrl,alt:h.topic||h.documentId,className:"absolute inset-0 w-full h-full object-cover"}):p.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-300",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:p.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),p.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-3",children:p.jsx("span",{className:"text-white text-xs font-medium",children:h.timestamp})})]}),p.jsxs("div",{className:"p-4",children:[p.jsx("h3",{className:"text-base font-medium text-blue-600 mb-1 line-clamp-1",children:h.topic||"Untitled Segment"}),p.jsx("p",{className:"text-sm text-gray-500 mb-2 font-medium",children:h.personName}),p.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:h.summary}),h.keywords&&p.jsx("div",{className:"flex flex-wrap gap-1",children:h.keywords.split(",").map((f,m)=>p.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-blue-100 text-blue-800 text-xs font-medium",children:f.trim()},m))}),p.jsxs("div",{className:"mt-2 text-xs text-gray-500",children:[(h.similarity*100).toFixed(1),"% match"]})]})]},h.id))})]}):p.jsx("div",{className:"w-full max-w-4xl mx-auto text-center p-6 bg-white rounded-xl shadow-md",children:p.jsx("p",{className:"text-gray-500",children:t?"No results found. Try different search terms.":"Enter a search query above to find relevant content."})})]})}function nxe(){return p.jsxs(aH,{children:[p.jsx(Er,{path:"/login",element:p.jsx(Vie,{})}),p.jsx(Er,{path:"/",element:p.jsx(ki,{children:p.jsx(Ci,{children:p.jsx(jie,{})})})}),p.jsx(Er,{path:"/playlist-builder",element:p.jsx(ki,{children:p.jsx(Ci,{children:p.jsx(Wie,{})})})}),p.jsx(Er,{path:"/playlist-editor",element:p.jsx(ki,{children:p.jsx(Ci,{children:p.jsx(Ice,{})})})}),p.jsx(Er,{path:"/content-directory",element:p.jsx(ki,{children:p.jsx(Ci,{children:p.jsx(R1e,{})})})}),p.jsx(Er,{path:"/transcript-summary",element:p.jsx(ki,{children:p.jsx(Ci,{children:p.jsx(S1e,{})})})}),p.jsx(Er,{path:"/search",element:p.jsx(ki,{children:p.jsx(Ci,{children:p.jsx(T1e,{})})})}),p.jsx(Er,{path:"/semantic-search",element:p.jsx(ki,{children:p.jsx(Ci,{children:p.jsx(txe,{})})})}),p.jsx(Er,{path:"/interview-player",element:p.jsx(ki,{children:p.jsx(Ci,{children:p.jsx(I1e,{})})})}),p.jsx(Er,{path:"/clip-player",element:p.jsx(ki,{children:p.jsx(Ci,{children:p.jsx(C1e,{})})})}),p.jsx(Er,{path:"/examples/basic-flow",element:p.jsx(ki,{children:p.jsx(Ci,{children:p.jsx(gB,{})})})}),p.jsx(Er,{path:"*",element:p.jsx(lj,{to:"/",replace:!0})})]})}px.createRoot(document.getElementById("root")).render(p.jsx(te.StrictMode,{children:p.jsx(RH,{children:p.jsx(zJ,{children:p.jsx(nxe,{})})})}));export{te as R,Em as _,_S as a,of as c,za as g,p as j,S as r};
