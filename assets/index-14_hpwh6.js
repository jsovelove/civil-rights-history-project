(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var z8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Uu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var nT={exports:{}},Xh={},rT={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bu=Symbol.for("react.element"),OP=Symbol.for("react.portal"),jP=Symbol.for("react.fragment"),VP=Symbol.for("react.strict_mode"),FP=Symbol.for("react.profiler"),UP=Symbol.for("react.provider"),BP=Symbol.for("react.context"),zP=Symbol.for("react.forward_ref"),$P=Symbol.for("react.suspense"),HP=Symbol.for("react.memo"),WP=Symbol.for("react.lazy"),A0=Symbol.iterator;function qP(t){return t===null||typeof t!="object"?null:(t=A0&&t[A0]||t["@@iterator"],typeof t=="function"?t:null)}var iT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sT=Object.assign,aT={};function No(t,e,r){this.props=t,this.context=e,this.refs=aT,this.updater=r||iT}No.prototype.isReactComponent={};No.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};No.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function oT(){}oT.prototype=No.prototype;function Ev(t,e,r){this.props=t,this.context=e,this.refs=aT,this.updater=r||iT}var Tv=Ev.prototype=new oT;Tv.constructor=Ev;sT(Tv,No.prototype);Tv.isPureReactComponent=!0;var P0=Array.isArray,lT=Object.prototype.hasOwnProperty,Sv={current:null},uT={key:!0,ref:!0,__self:!0,__source:!0};function cT(t,e,r){var i,s={},a=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)lT.call(e,i)&&!uT.hasOwnProperty(i)&&(s[i]=e[i]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:Bu,type:t,key:a,ref:o,props:s,_owner:Sv.current}}function GP(t,e){return{$$typeof:Bu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Iv(t){return typeof t=="object"&&t!==null&&t.$$typeof===Bu}function KP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var R0=/\/+/g;function yp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?KP(""+t.key):e.toString(36)}function gd(t,e,r,i,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Bu:case OP:o=!0}}if(o)return o=t,s=s(o),t=i===""?"."+yp(o,0):i,P0(s)?(r="",t!=null&&(r=t.replace(R0,"$&/")+"/"),gd(s,e,r,"",function(c){return c})):s!=null&&(Iv(s)&&(s=GP(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(R0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,i=i===""?".":i+":",P0(t))for(var l=0;l<t.length;l++){a=t[l];var u=i+yp(a,l);o+=gd(a,e,r,u,s)}else if(u=qP(t),typeof u=="function")for(t=u.call(t),l=0;!(a=t.next()).done;)a=a.value,u=i+yp(a,l++),o+=gd(a,e,r,u,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Oc(t,e,r){if(t==null)return t;var i=[],s=0;return gd(t,i,"","",function(a){return e.call(r,a,s++)}),i}function YP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var En={current:null},vd={transition:null},XP={ReactCurrentDispatcher:En,ReactCurrentBatchConfig:vd,ReactCurrentOwner:Sv};function dT(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:Oc,forEach:function(t,e,r){Oc(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Oc(t,function(){e++}),e},toArray:function(t){return Oc(t,function(e){return e})||[]},only:function(t){if(!Iv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ne.Component=No;Ne.Fragment=jP;Ne.Profiler=FP;Ne.PureComponent=Ev;Ne.StrictMode=VP;Ne.Suspense=$P;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XP;Ne.act=dT;Ne.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=sT({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Sv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)lT.call(e,u)&&!uT.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:Bu,type:t.type,key:s,ref:a,props:i,_owner:o}};Ne.createContext=function(t){return t={$$typeof:BP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:UP,_context:t},t.Consumer=t};Ne.createElement=cT;Ne.createFactory=function(t){var e=cT.bind(null,t);return e.type=t,e};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(t){return{$$typeof:zP,render:t}};Ne.isValidElement=Iv;Ne.lazy=function(t){return{$$typeof:WP,_payload:{_status:-1,_result:t},_init:YP}};Ne.memo=function(t,e){return{$$typeof:HP,type:t,compare:e===void 0?null:e}};Ne.startTransition=function(t){var e=vd.transition;vd.transition={};try{t()}finally{vd.transition=e}};Ne.unstable_act=dT;Ne.useCallback=function(t,e){return En.current.useCallback(t,e)};Ne.useContext=function(t){return En.current.useContext(t)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(t){return En.current.useDeferredValue(t)};Ne.useEffect=function(t,e){return En.current.useEffect(t,e)};Ne.useId=function(){return En.current.useId()};Ne.useImperativeHandle=function(t,e,r){return En.current.useImperativeHandle(t,e,r)};Ne.useInsertionEffect=function(t,e){return En.current.useInsertionEffect(t,e)};Ne.useLayoutEffect=function(t,e){return En.current.useLayoutEffect(t,e)};Ne.useMemo=function(t,e){return En.current.useMemo(t,e)};Ne.useReducer=function(t,e,r){return En.current.useReducer(t,e,r)};Ne.useRef=function(t){return En.current.useRef(t)};Ne.useState=function(t){return En.current.useState(t)};Ne.useSyncExternalStore=function(t,e,r){return En.current.useSyncExternalStore(t,e,r)};Ne.useTransition=function(){return En.current.useTransition()};Ne.version="18.3.1";rT.exports=Ne;var M=rT.exports;const Pe=Uu(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QP=M,JP=Symbol.for("react.element"),ZP=Symbol.for("react.fragment"),eR=Object.prototype.hasOwnProperty,tR=QP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,nR={key:!0,ref:!0,__self:!0,__source:!0};function hT(t,e,r){var i,s={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)eR.call(e,i)&&!nR.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:JP,type:t,key:a,ref:o,props:s,_owner:tR.current}}Xh.Fragment=ZP;Xh.jsx=hT;Xh.jsxs=hT;nT.exports=Xh;var v=nT.exports,Dm={},fT={exports:{}},Qn={},pT={exports:{}},mT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(W,Y){var se=W.length;W.push(Y);e:for(;0<se;){var re=se-1>>>1,q=W[re];if(0<s(q,Y))W[re]=Y,W[se]=q,se=re;else break e}}function r(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var Y=W[0],se=W.pop();if(se!==Y){W[0]=se;e:for(var re=0,q=W.length,H=q>>>1;re<H;){var J=2*(re+1)-1,Q=W[J],ce=J+1,ge=W[ce];if(0>s(Q,se))ce<q&&0>s(ge,Q)?(W[re]=ge,W[ce]=se,re=ce):(W[re]=Q,W[J]=se,re=J);else if(ce<q&&0>s(ge,se))W[re]=ge,W[ce]=se,re=ce;else break e}}return Y}function s(W,Y){var se=W.sortIndex-Y.sortIndex;return se!==0?se:W.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],h=1,f=null,p=3,m=!1,w=!1,A=!1,D=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(W){for(var Y=r(c);Y!==null;){if(Y.callback===null)i(c);else if(Y.startTime<=W)i(c),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=r(c)}}function P(W){if(A=!1,b(W),!w)if(r(u)!==null)w=!0,oe(U);else{var Y=r(c);Y!==null&&fe(P,Y.startTime-W)}}function U(W,Y){w=!1,A&&(A=!1,T(I),I=-1),m=!0;var se=p;try{for(b(Y),f=r(u);f!==null&&(!(f.expirationTime>Y)||W&&!S());){var re=f.callback;if(typeof re=="function"){f.callback=null,p=f.priorityLevel;var q=re(f.expirationTime<=Y);Y=t.unstable_now(),typeof q=="function"?f.callback=q:f===r(u)&&i(u),b(Y)}else i(u);f=r(u)}if(f!==null)var H=!0;else{var J=r(c);J!==null&&fe(P,J.startTime-Y),H=!1}return H}finally{f=null,p=se,m=!1}}var V=!1,R=null,I=-1,y=5,_=-1;function S(){return!(t.unstable_now()-_<y)}function O(){if(R!==null){var W=t.unstable_now();_=W;var Y=!0;try{Y=R(!0,W)}finally{Y?N():(V=!1,R=null)}}else V=!1}var N;if(typeof x=="function")N=function(){x(O)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ie=K.port2;K.port1.onmessage=O,N=function(){ie.postMessage(null)}}else N=function(){D(O,0)};function oe(W){R=W,V||(V=!0,N())}function fe(W,Y){I=D(function(){W(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_continueExecution=function(){w||m||(w=!0,oe(U))},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(W){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var se=p;p=Y;try{return W()}finally{p=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(W,Y){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var se=p;p=W;try{return Y()}finally{p=se}},t.unstable_scheduleCallback=function(W,Y,se){var re=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?re+se:re):se=re,W){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=se+q,W={id:h++,callback:Y,priorityLevel:W,startTime:se,expirationTime:q,sortIndex:-1},se>re?(W.sortIndex=se,e(c,W),r(u)===null&&W===r(c)&&(A?(T(I),I=-1):A=!0,fe(P,se-re))):(W.sortIndex=q,e(u,W),w||m||(w=!0,oe(U))),W},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(W){var Y=p;return function(){var se=p;p=Y;try{return W.apply(this,arguments)}finally{p=se}}}})(mT);pT.exports=mT;var rR=pT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iR=M,Yn=rR;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gT=new Set,su={};function da(t,e){lo(t,e),lo(t+"Capture",e)}function lo(t,e){for(su[t]=e,t=0;t<e.length;t++)gT.add(e[t])}var pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nm=Object.prototype.hasOwnProperty,sR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,D0={},N0={};function aR(t){return Nm.call(N0,t)?!0:Nm.call(D0,t)?!1:sR.test(t)?N0[t]=!0:(D0[t]=!0,!1)}function oR(t,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function lR(t,e,r,i){if(e===null||typeof e>"u"||oR(t,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tn(t,e,r,i,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var en={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){en[t]=new Tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];en[e]=new Tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){en[t]=new Tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){en[t]=new Tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){en[t]=new Tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){en[t]=new Tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){en[t]=new Tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){en[t]=new Tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){en[t]=new Tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var kv=/[\-:]([a-z])/g;function Cv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kv,Cv);en[e]=new Tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kv,Cv);en[e]=new Tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kv,Cv);en[e]=new Tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){en[t]=new Tn(t,1,!1,t.toLowerCase(),null,!1,!1)});en.xlinkHref=new Tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){en[t]=new Tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Av(t,e,r,i){var s=en.hasOwnProperty(e)?en[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(lR(e,r,s,i)&&(r=null),i||s===null?aR(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,i=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,i?t.setAttributeNS(i,e,r):t.setAttribute(e,r))))}var Ti=iR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,jc=Symbol.for("react.element"),Va=Symbol.for("react.portal"),Fa=Symbol.for("react.fragment"),Pv=Symbol.for("react.strict_mode"),Mm=Symbol.for("react.profiler"),vT=Symbol.for("react.provider"),yT=Symbol.for("react.context"),Rv=Symbol.for("react.forward_ref"),Lm=Symbol.for("react.suspense"),Om=Symbol.for("react.suspense_list"),Dv=Symbol.for("react.memo"),Oi=Symbol.for("react.lazy"),_T=Symbol.for("react.offscreen"),M0=Symbol.iterator;function dl(t){return t===null||typeof t!="object"?null:(t=M0&&t[M0]||t["@@iterator"],typeof t=="function"?t:null)}var wt=Object.assign,_p;function Cl(t){if(_p===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);_p=e&&e[1]||""}return`
`+_p+t}var wp=!1;function bp(t,e){if(!t||wp)return"";wp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),a=i.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{wp=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Cl(t):""}function uR(t){switch(t.tag){case 5:return Cl(t.type);case 16:return Cl("Lazy");case 13:return Cl("Suspense");case 19:return Cl("SuspenseList");case 0:case 2:case 15:return t=bp(t.type,!1),t;case 11:return t=bp(t.type.render,!1),t;case 1:return t=bp(t.type,!0),t;default:return""}}function jm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fa:return"Fragment";case Va:return"Portal";case Mm:return"Profiler";case Pv:return"StrictMode";case Lm:return"Suspense";case Om:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yT:return(t.displayName||"Context")+".Consumer";case vT:return(t._context.displayName||"Context")+".Provider";case Rv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Dv:return e=t.displayName||null,e!==null?e:jm(t.type)||"Memo";case Oi:e=t._payload,t=t._init;try{return jm(t(e))}catch{}}return null}function cR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jm(e);case 8:return e===Pv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ds(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function dR(t){var e=wT(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vc(t){t._valueTracker||(t._valueTracker=dR(t))}function bT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return t&&(i=wT(t)?t.checked?"true":"false":t.value),t=i,t!==r?(e.setValue(t),!0):!1}function Hd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vm(t,e){var r=e.checked;return wt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function L0(t,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=ds(e.value!=null?e.value:r),t._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function xT(t,e){e=e.checked,e!=null&&Av(t,"checked",e,!1)}function Fm(t,e){xT(t,e);var r=ds(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Um(t,e.type,r):e.hasOwnProperty("defaultValue")&&Um(t,e.type,ds(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function O0(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Um(t,e,r){(e!=="number"||Hd(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Al=Array.isArray;function Qa(t,e,r,i){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&i&&(t[r].defaultSelected=!0)}else{for(r=""+ds(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Bm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return wt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function j0(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ne(92));if(Al(r)){if(1<r.length)throw Error(ne(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:ds(r)}}function ET(t,e){var r=ds(e.value),i=ds(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),i!=null&&(t.defaultValue=""+i)}function V0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function TT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?TT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fc,ST=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fc=Fc||document.createElement("div"),Fc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function au(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Ul={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},hR=["Webkit","ms","Moz","O"];Object.keys(Ul).forEach(function(t){hR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ul[e]=Ul[t]})});function IT(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Ul.hasOwnProperty(t)&&Ul[t]?(""+e).trim():e+"px"}function kT(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=IT(r,e[r],i);r==="float"&&(r="cssFloat"),i?t.setProperty(r,s):t[r]=s}}var fR=wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $m(t,e){if(e){if(fR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function Hm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wm=null;function Nv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var qm=null,Ja=null,Za=null;function F0(t){if(t=Hu(t)){if(typeof qm!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=tf(e),qm(t.stateNode,t.type,e))}}function CT(t){Ja?Za?Za.push(t):Za=[t]:Ja=t}function AT(){if(Ja){var t=Ja,e=Za;if(Za=Ja=null,F0(t),e)for(t=0;t<e.length;t++)F0(e[t])}}function PT(t,e){return t(e)}function RT(){}var xp=!1;function DT(t,e,r){if(xp)return t(e,r);xp=!0;try{return PT(t,e,r)}finally{xp=!1,(Ja!==null||Za!==null)&&(RT(),AT())}}function ou(t,e){var r=t.stateNode;if(r===null)return null;var i=tf(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ne(231,e,typeof r));return r}var Gm=!1;if(pi)try{var hl={};Object.defineProperty(hl,"passive",{get:function(){Gm=!0}}),window.addEventListener("test",hl,hl),window.removeEventListener("test",hl,hl)}catch{Gm=!1}function pR(t,e,r,i,s,a,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(h){this.onError(h)}}var Bl=!1,Wd=null,qd=!1,Km=null,mR={onError:function(t){Bl=!0,Wd=t}};function gR(t,e,r,i,s,a,o,l,u){Bl=!1,Wd=null,pR.apply(mR,arguments)}function vR(t,e,r,i,s,a,o,l,u){if(gR.apply(this,arguments),Bl){if(Bl){var c=Wd;Bl=!1,Wd=null}else throw Error(ne(198));qd||(qd=!0,Km=c)}}function ha(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function NT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function U0(t){if(ha(t)!==t)throw Error(ne(188))}function yR(t){var e=t.alternate;if(!e){if(e=ha(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var r=t,i=e;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(i=s.return,i!==null){r=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return U0(s),t;if(a===i)return U0(s),e;a=a.sibling}throw Error(ne(188))}if(r.return!==i.return)r=s,i=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,i=a;break}if(l===i){o=!0,i=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,i=s;break}if(l===i){o=!0,i=a,r=s;break}l=l.sibling}if(!o)throw Error(ne(189))}}if(r.alternate!==i)throw Error(ne(190))}if(r.tag!==3)throw Error(ne(188));return r.stateNode.current===r?t:e}function MT(t){return t=yR(t),t!==null?LT(t):null}function LT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=LT(t);if(e!==null)return e;t=t.sibling}return null}var OT=Yn.unstable_scheduleCallback,B0=Yn.unstable_cancelCallback,_R=Yn.unstable_shouldYield,wR=Yn.unstable_requestPaint,kt=Yn.unstable_now,bR=Yn.unstable_getCurrentPriorityLevel,Mv=Yn.unstable_ImmediatePriority,jT=Yn.unstable_UserBlockingPriority,Gd=Yn.unstable_NormalPriority,xR=Yn.unstable_LowPriority,VT=Yn.unstable_IdlePriority,Qh=null,Fr=null;function ER(t){if(Fr&&typeof Fr.onCommitFiberRoot=="function")try{Fr.onCommitFiberRoot(Qh,t,void 0,(t.current.flags&128)===128)}catch{}}var Sr=Math.clz32?Math.clz32:IR,TR=Math.log,SR=Math.LN2;function IR(t){return t>>>=0,t===0?32:31-(TR(t)/SR|0)|0}var Uc=64,Bc=4194304;function Pl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Kd(t,e){var r=t.pendingLanes;if(r===0)return 0;var i=0,s=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?i=Pl(l):(a&=o,a!==0&&(i=Pl(a)))}else o=r&~s,o!==0?i=Pl(o):a!==0&&(i=Pl(a));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(i&4&&(i|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)r=31-Sr(e),s=1<<r,i|=t[r],e&=~s;return i}function kR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function CR(t,e){for(var r=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Sr(a),l=1<<o,u=s[o];u===-1?(!(l&r)||l&i)&&(s[o]=kR(l,e)):u<=e&&(t.expiredLanes|=l),a&=~l}}function Ym(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function FT(){var t=Uc;return Uc<<=1,!(Uc&4194240)&&(Uc=64),t}function Ep(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function zu(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Sr(e),t[e]=r}function AR(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Sr(r),a=1<<s;e[s]=0,i[s]=-1,t[s]=-1,r&=~a}}function Lv(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var i=31-Sr(r),s=1<<i;s&e|t[i]&e&&(t[i]|=e),r&=~s}}var Je=0;function UT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var BT,Ov,zT,$T,HT,Xm=!1,zc=[],Ki=null,Yi=null,Xi=null,lu=new Map,uu=new Map,Fi=[],PR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function z0(t,e){switch(t){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":Yi=null;break;case"mouseover":case"mouseout":Xi=null;break;case"pointerover":case"pointerout":lu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":uu.delete(e.pointerId)}}function fl(t,e,r,i,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:a,targetContainers:[s]},e!==null&&(e=Hu(e),e!==null&&Ov(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function RR(t,e,r,i,s){switch(e){case"focusin":return Ki=fl(Ki,t,e,r,i,s),!0;case"dragenter":return Yi=fl(Yi,t,e,r,i,s),!0;case"mouseover":return Xi=fl(Xi,t,e,r,i,s),!0;case"pointerover":var a=s.pointerId;return lu.set(a,fl(lu.get(a)||null,t,e,r,i,s)),!0;case"gotpointercapture":return a=s.pointerId,uu.set(a,fl(uu.get(a)||null,t,e,r,i,s)),!0}return!1}function WT(t){var e=Gs(t.target);if(e!==null){var r=ha(e);if(r!==null){if(e=r.tag,e===13){if(e=NT(r),e!==null){t.blockedOn=e,HT(t.priority,function(){zT(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function yd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Qm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var i=new r.constructor(r.type,r);Wm=i,r.target.dispatchEvent(i),Wm=null}else return e=Hu(r),e!==null&&Ov(e),t.blockedOn=r,!1;e.shift()}return!0}function $0(t,e,r){yd(t)&&r.delete(e)}function DR(){Xm=!1,Ki!==null&&yd(Ki)&&(Ki=null),Yi!==null&&yd(Yi)&&(Yi=null),Xi!==null&&yd(Xi)&&(Xi=null),lu.forEach($0),uu.forEach($0)}function pl(t,e){t.blockedOn===e&&(t.blockedOn=null,Xm||(Xm=!0,Yn.unstable_scheduleCallback(Yn.unstable_NormalPriority,DR)))}function cu(t){function e(s){return pl(s,t)}if(0<zc.length){pl(zc[0],t);for(var r=1;r<zc.length;r++){var i=zc[r];i.blockedOn===t&&(i.blockedOn=null)}}for(Ki!==null&&pl(Ki,t),Yi!==null&&pl(Yi,t),Xi!==null&&pl(Xi,t),lu.forEach(e),uu.forEach(e),r=0;r<Fi.length;r++)i=Fi[r],i.blockedOn===t&&(i.blockedOn=null);for(;0<Fi.length&&(r=Fi[0],r.blockedOn===null);)WT(r),r.blockedOn===null&&Fi.shift()}var eo=Ti.ReactCurrentBatchConfig,Yd=!0;function NR(t,e,r,i){var s=Je,a=eo.transition;eo.transition=null;try{Je=1,jv(t,e,r,i)}finally{Je=s,eo.transition=a}}function MR(t,e,r,i){var s=Je,a=eo.transition;eo.transition=null;try{Je=4,jv(t,e,r,i)}finally{Je=s,eo.transition=a}}function jv(t,e,r,i){if(Yd){var s=Qm(t,e,r,i);if(s===null)Np(t,e,i,Xd,r),z0(t,i);else if(RR(s,t,e,r,i))i.stopPropagation();else if(z0(t,i),e&4&&-1<PR.indexOf(t)){for(;s!==null;){var a=Hu(s);if(a!==null&&BT(a),a=Qm(t,e,r,i),a===null&&Np(t,e,i,Xd,r),a===s)break;s=a}s!==null&&i.stopPropagation()}else Np(t,e,i,null,r)}}var Xd=null;function Qm(t,e,r,i){if(Xd=null,t=Nv(i),t=Gs(t),t!==null)if(e=ha(t),e===null)t=null;else if(r=e.tag,r===13){if(t=NT(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xd=t,null}function qT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bR()){case Mv:return 1;case jT:return 4;case Gd:case xR:return 16;case VT:return 536870912;default:return 16}default:return 16}}var Wi=null,Vv=null,_d=null;function GT(){if(_d)return _d;var t,e=Vv,r=e.length,i,s="value"in Wi?Wi.value:Wi.textContent,a=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(i=1;i<=o&&e[r-i]===s[a-i];i++);return _d=s.slice(t,1<i?1-i:void 0)}function wd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $c(){return!0}function H0(){return!1}function Jn(t){function e(r,i,s,a,o){this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?$c:H0,this.isPropagationStopped=H0,this}return wt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=$c)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=$c)},persist:function(){},isPersistent:$c}),e}var Mo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fv=Jn(Mo),$u=wt({},Mo,{view:0,detail:0}),LR=Jn($u),Tp,Sp,ml,Jh=wt({},$u,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ml&&(ml&&t.type==="mousemove"?(Tp=t.screenX-ml.screenX,Sp=t.screenY-ml.screenY):Sp=Tp=0,ml=t),Tp)},movementY:function(t){return"movementY"in t?t.movementY:Sp}}),W0=Jn(Jh),OR=wt({},Jh,{dataTransfer:0}),jR=Jn(OR),VR=wt({},$u,{relatedTarget:0}),Ip=Jn(VR),FR=wt({},Mo,{animationName:0,elapsedTime:0,pseudoElement:0}),UR=Jn(FR),BR=wt({},Mo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),zR=Jn(BR),$R=wt({},Mo,{data:0}),q0=Jn($R),HR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function GR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=qR[t])?!!e[t]:!1}function Uv(){return GR}var KR=wt({},$u,{key:function(t){if(t.key){var e=HR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?WR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uv,charCode:function(t){return t.type==="keypress"?wd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),YR=Jn(KR),XR=wt({},Jh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),G0=Jn(XR),QR=wt({},$u,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uv}),JR=Jn(QR),ZR=wt({},Mo,{propertyName:0,elapsedTime:0,pseudoElement:0}),eD=Jn(ZR),tD=wt({},Jh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nD=Jn(tD),rD=[9,13,27,32],Bv=pi&&"CompositionEvent"in window,zl=null;pi&&"documentMode"in document&&(zl=document.documentMode);var iD=pi&&"TextEvent"in window&&!zl,KT=pi&&(!Bv||zl&&8<zl&&11>=zl),K0=" ",Y0=!1;function XT(t,e){switch(t){case"keyup":return rD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function QT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ua=!1;function sD(t,e){switch(t){case"compositionend":return QT(e);case"keypress":return e.which!==32?null:(Y0=!0,K0);case"textInput":return t=e.data,t===K0&&Y0?null:t;default:return null}}function aD(t,e){if(Ua)return t==="compositionend"||!Bv&&XT(t,e)?(t=GT(),_d=Vv=Wi=null,Ua=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return KT&&e.locale!=="ko"?null:e.data;default:return null}}var oD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function X0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!oD[t.type]:e==="textarea"}function JT(t,e,r,i){CT(i),e=Qd(e,"onChange"),0<e.length&&(r=new Fv("onChange","change",null,r,i),t.push({event:r,listeners:e}))}var $l=null,du=null;function lD(t){uS(t,0)}function Zh(t){var e=$a(t);if(bT(e))return t}function uD(t,e){if(t==="change")return e}var ZT=!1;if(pi){var kp;if(pi){var Cp="oninput"in document;if(!Cp){var Q0=document.createElement("div");Q0.setAttribute("oninput","return;"),Cp=typeof Q0.oninput=="function"}kp=Cp}else kp=!1;ZT=kp&&(!document.documentMode||9<document.documentMode)}function J0(){$l&&($l.detachEvent("onpropertychange",eS),du=$l=null)}function eS(t){if(t.propertyName==="value"&&Zh(du)){var e=[];JT(e,du,t,Nv(t)),DT(lD,e)}}function cD(t,e,r){t==="focusin"?(J0(),$l=e,du=r,$l.attachEvent("onpropertychange",eS)):t==="focusout"&&J0()}function dD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zh(du)}function hD(t,e){if(t==="click")return Zh(e)}function fD(t,e){if(t==="input"||t==="change")return Zh(e)}function pD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kr=typeof Object.is=="function"?Object.is:pD;function hu(t,e){if(kr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!Nm.call(e,s)||!kr(t[s],e[s]))return!1}return!0}function Z0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ew(t,e){var r=Z0(t);t=0;for(var i;r;){if(r.nodeType===3){if(i=t+r.textContent.length,t<=e&&i>=e)return{node:r,offset:e-t};t=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Z0(r)}}function tS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?tS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function nS(){for(var t=window,e=Hd();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=Hd(t.document)}return e}function zv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mD(t){var e=nS(),r=t.focusedElem,i=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&tS(r.ownerDocument.documentElement,r)){if(i!==null&&zv(r)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,a=Math.min(i.start,s);i=i.end===void 0?a:Math.min(i.end,s),!t.extend&&a>i&&(s=i,i=a,a=s),s=ew(r,a);var o=ew(r,i);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gD=pi&&"documentMode"in document&&11>=document.documentMode,Ba=null,Jm=null,Hl=null,Zm=!1;function tw(t,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Zm||Ba==null||Ba!==Hd(i)||(i=Ba,"selectionStart"in i&&zv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Hl&&hu(Hl,i)||(Hl=i,i=Qd(Jm,"onSelect"),0<i.length&&(e=new Fv("onSelect","select",null,e,r),t.push({event:e,listeners:i}),e.target=Ba)))}function Hc(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var za={animationend:Hc("Animation","AnimationEnd"),animationiteration:Hc("Animation","AnimationIteration"),animationstart:Hc("Animation","AnimationStart"),transitionend:Hc("Transition","TransitionEnd")},Ap={},rS={};pi&&(rS=document.createElement("div").style,"AnimationEvent"in window||(delete za.animationend.animation,delete za.animationiteration.animation,delete za.animationstart.animation),"TransitionEvent"in window||delete za.transitionend.transition);function ef(t){if(Ap[t])return Ap[t];if(!za[t])return t;var e=za[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in rS)return Ap[t]=e[r];return t}var iS=ef("animationend"),sS=ef("animationiteration"),aS=ef("animationstart"),oS=ef("transitionend"),lS=new Map,nw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bs(t,e){lS.set(t,e),da(e,[t])}for(var Pp=0;Pp<nw.length;Pp++){var Rp=nw[Pp],vD=Rp.toLowerCase(),yD=Rp[0].toUpperCase()+Rp.slice(1);bs(vD,"on"+yD)}bs(iS,"onAnimationEnd");bs(sS,"onAnimationIteration");bs(aS,"onAnimationStart");bs("dblclick","onDoubleClick");bs("focusin","onFocus");bs("focusout","onBlur");bs(oS,"onTransitionEnd");lo("onMouseEnter",["mouseout","mouseover"]);lo("onMouseLeave",["mouseout","mouseover"]);lo("onPointerEnter",["pointerout","pointerover"]);lo("onPointerLeave",["pointerout","pointerover"]);da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));da("onBeforeInput",["compositionend","keypress","textInput","paste"]);da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_D=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rl));function rw(t,e,r){var i=t.type||"unknown-event";t.currentTarget=r,vR(i,e,void 0,t),t.currentTarget=null}function uS(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var i=t[r],s=i.event;i=i.listeners;e:{var a=void 0;if(e)for(var o=i.length-1;0<=o;o--){var l=i[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==a&&s.isPropagationStopped())break e;rw(s,l,c),a=u}else for(o=0;o<i.length;o++){if(l=i[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==a&&s.isPropagationStopped())break e;rw(s,l,c),a=u}}}if(qd)throw t=Km,qd=!1,Km=null,t}function ut(t,e){var r=e[ig];r===void 0&&(r=e[ig]=new Set);var i=t+"__bubble";r.has(i)||(cS(e,t,2,!1),r.add(i))}function Dp(t,e,r){var i=0;e&&(i|=4),cS(r,t,i,e)}var Wc="_reactListening"+Math.random().toString(36).slice(2);function fu(t){if(!t[Wc]){t[Wc]=!0,gT.forEach(function(r){r!=="selectionchange"&&(_D.has(r)||Dp(r,!1,t),Dp(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wc]||(e[Wc]=!0,Dp("selectionchange",!1,e))}}function cS(t,e,r,i){switch(qT(e)){case 1:var s=NR;break;case 4:s=MR;break;default:s=jv}r=s.bind(null,e,r,t),s=void 0,!Gm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Np(t,e,r,i,s){var a=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Gs(l),o===null)return;if(u=o.tag,u===5||u===6){i=a=o;continue e}l=l.parentNode}}i=i.return}DT(function(){var c=a,h=Nv(r),f=[];e:{var p=lS.get(t);if(p!==void 0){var m=Fv,w=t;switch(t){case"keypress":if(wd(r)===0)break e;case"keydown":case"keyup":m=YR;break;case"focusin":w="focus",m=Ip;break;case"focusout":w="blur",m=Ip;break;case"beforeblur":case"afterblur":m=Ip;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=W0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=jR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=JR;break;case iS:case sS:case aS:m=UR;break;case oS:m=eD;break;case"scroll":m=LR;break;case"wheel":m=nD;break;case"copy":case"cut":case"paste":m=zR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=G0}var A=(e&4)!==0,D=!A&&t==="scroll",T=A?p!==null?p+"Capture":null:p;A=[];for(var x=c,b;x!==null;){b=x;var P=b.stateNode;if(b.tag===5&&P!==null&&(b=P,T!==null&&(P=ou(x,T),P!=null&&A.push(pu(x,P,b)))),D)break;x=x.return}0<A.length&&(p=new m(p,w,null,r,h),f.push({event:p,listeners:A}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",p&&r!==Wm&&(w=r.relatedTarget||r.fromElement)&&(Gs(w)||w[mi]))break e;if((m||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,m?(w=r.relatedTarget||r.toElement,m=c,w=w?Gs(w):null,w!==null&&(D=ha(w),w!==D||w.tag!==5&&w.tag!==6)&&(w=null)):(m=null,w=c),m!==w)){if(A=W0,P="onMouseLeave",T="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(A=G0,P="onPointerLeave",T="onPointerEnter",x="pointer"),D=m==null?p:$a(m),b=w==null?p:$a(w),p=new A(P,x+"leave",m,r,h),p.target=D,p.relatedTarget=b,P=null,Gs(h)===c&&(A=new A(T,x+"enter",w,r,h),A.target=b,A.relatedTarget=D,P=A),D=P,m&&w)t:{for(A=m,T=w,x=0,b=A;b;b=ka(b))x++;for(b=0,P=T;P;P=ka(P))b++;for(;0<x-b;)A=ka(A),x--;for(;0<b-x;)T=ka(T),b--;for(;x--;){if(A===T||T!==null&&A===T.alternate)break t;A=ka(A),T=ka(T)}A=null}else A=null;m!==null&&iw(f,p,m,A,!1),w!==null&&D!==null&&iw(f,D,w,A,!0)}}e:{if(p=c?$a(c):window,m=p.nodeName&&p.nodeName.toLowerCase(),m==="select"||m==="input"&&p.type==="file")var U=uD;else if(X0(p))if(ZT)U=fD;else{U=dD;var V=cD}else(m=p.nodeName)&&m.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(U=hD);if(U&&(U=U(t,c))){JT(f,U,r,h);break e}V&&V(t,p,c),t==="focusout"&&(V=p._wrapperState)&&V.controlled&&p.type==="number"&&Um(p,"number",p.value)}switch(V=c?$a(c):window,t){case"focusin":(X0(V)||V.contentEditable==="true")&&(Ba=V,Jm=c,Hl=null);break;case"focusout":Hl=Jm=Ba=null;break;case"mousedown":Zm=!0;break;case"contextmenu":case"mouseup":case"dragend":Zm=!1,tw(f,r,h);break;case"selectionchange":if(gD)break;case"keydown":case"keyup":tw(f,r,h)}var R;if(Bv)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Ua?XT(t,r)&&(I="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(KT&&r.locale!=="ko"&&(Ua||I!=="onCompositionStart"?I==="onCompositionEnd"&&Ua&&(R=GT()):(Wi=h,Vv="value"in Wi?Wi.value:Wi.textContent,Ua=!0)),V=Qd(c,I),0<V.length&&(I=new q0(I,t,null,r,h),f.push({event:I,listeners:V}),R?I.data=R:(R=QT(r),R!==null&&(I.data=R)))),(R=iD?sD(t,r):aD(t,r))&&(c=Qd(c,"onBeforeInput"),0<c.length&&(h=new q0("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:c}),h.data=R))}uS(f,e)})}function pu(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Qd(t,e){for(var r=e+"Capture",i=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=ou(t,r),a!=null&&i.unshift(pu(t,a,s)),a=ou(t,e),a!=null&&i.push(pu(t,a,s))),t=t.return}return i}function ka(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function iw(t,e,r,i,s){for(var a=e._reactName,o=[];r!==null&&r!==i;){var l=r,u=l.alternate,c=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&c!==null&&(l=c,s?(u=ou(r,a),u!=null&&o.unshift(pu(r,u,l))):s||(u=ou(r,a),u!=null&&o.push(pu(r,u,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var wD=/\r\n?/g,bD=/\u0000|\uFFFD/g;function sw(t){return(typeof t=="string"?t:""+t).replace(wD,`
`).replace(bD,"")}function qc(t,e,r){if(e=sw(e),sw(t)!==e&&r)throw Error(ne(425))}function Jd(){}var eg=null,tg=null;function ng(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var rg=typeof setTimeout=="function"?setTimeout:void 0,xD=typeof clearTimeout=="function"?clearTimeout:void 0,aw=typeof Promise=="function"?Promise:void 0,ED=typeof queueMicrotask=="function"?queueMicrotask:typeof aw<"u"?function(t){return aw.resolve(null).then(t).catch(TD)}:rg;function TD(t){setTimeout(function(){throw t})}function Mp(t,e){var r=e,i=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(i===0){t.removeChild(s),cu(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=s}while(r);cu(e)}function Qi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ow(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Lo=Math.random().toString(36).slice(2),Vr="__reactFiber$"+Lo,mu="__reactProps$"+Lo,mi="__reactContainer$"+Lo,ig="__reactEvents$"+Lo,SD="__reactListeners$"+Lo,ID="__reactHandles$"+Lo;function Gs(t){var e=t[Vr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[mi]||r[Vr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=ow(t);t!==null;){if(r=t[Vr])return r;t=ow(t)}return e}t=r,r=t.parentNode}return null}function Hu(t){return t=t[Vr]||t[mi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $a(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function tf(t){return t[mu]||null}var sg=[],Ha=-1;function xs(t){return{current:t}}function ct(t){0>Ha||(t.current=sg[Ha],sg[Ha]=null,Ha--)}function at(t,e){Ha++,sg[Ha]=t.current,t.current=e}var hs={},mn=xs(hs),On=xs(!1),Zs=hs;function uo(t,e){var r=t.type.contextTypes;if(!r)return hs;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=e[a];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function jn(t){return t=t.childContextTypes,t!=null}function Zd(){ct(On),ct(mn)}function lw(t,e,r){if(mn.current!==hs)throw Error(ne(168));at(mn,e),at(On,r)}function dS(t,e,r){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(ne(108,cR(t)||"Unknown",s));return wt({},r,i)}function eh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hs,Zs=mn.current,at(mn,t),at(On,On.current),!0}function uw(t,e,r){var i=t.stateNode;if(!i)throw Error(ne(169));r?(t=dS(t,e,Zs),i.__reactInternalMemoizedMergedChildContext=t,ct(On),ct(mn),at(mn,t)):ct(On),at(On,r)}var si=null,nf=!1,Lp=!1;function hS(t){si===null?si=[t]:si.push(t)}function kD(t){nf=!0,hS(t)}function Es(){if(!Lp&&si!==null){Lp=!0;var t=0,e=Je;try{var r=si;for(Je=1;t<r.length;t++){var i=r[t];do i=i(!0);while(i!==null)}si=null,nf=!1}catch(s){throw si!==null&&(si=si.slice(t+1)),OT(Mv,Es),s}finally{Je=e,Lp=!1}}return null}var Wa=[],qa=0,th=null,nh=0,nr=[],rr=0,ea=null,ai=1,oi="";function Us(t,e){Wa[qa++]=nh,Wa[qa++]=th,th=t,nh=e}function fS(t,e,r){nr[rr++]=ai,nr[rr++]=oi,nr[rr++]=ea,ea=t;var i=ai;t=oi;var s=32-Sr(i)-1;i&=~(1<<s),r+=1;var a=32-Sr(e)+s;if(30<a){var o=s-s%5;a=(i&(1<<o)-1).toString(32),i>>=o,s-=o,ai=1<<32-Sr(e)+s|r<<s|i,oi=a+t}else ai=1<<a|r<<s|i,oi=t}function $v(t){t.return!==null&&(Us(t,1),fS(t,1,0))}function Hv(t){for(;t===th;)th=Wa[--qa],Wa[qa]=null,nh=Wa[--qa],Wa[qa]=null;for(;t===ea;)ea=nr[--rr],nr[rr]=null,oi=nr[--rr],nr[rr]=null,ai=nr[--rr],nr[rr]=null}var Wn=null,zn=null,ft=!1,xr=null;function pS(t,e){var r=sr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function cw(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wn=t,zn=Qi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wn=t,zn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ea!==null?{id:ai,overflow:oi}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=sr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Wn=t,zn=null,!0):!1;default:return!1}}function ag(t){return(t.mode&1)!==0&&(t.flags&128)===0}function og(t){if(ft){var e=zn;if(e){var r=e;if(!cw(t,e)){if(ag(t))throw Error(ne(418));e=Qi(r.nextSibling);var i=Wn;e&&cw(t,e)?pS(i,r):(t.flags=t.flags&-4097|2,ft=!1,Wn=t)}}else{if(ag(t))throw Error(ne(418));t.flags=t.flags&-4097|2,ft=!1,Wn=t}}}function dw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wn=t}function Gc(t){if(t!==Wn)return!1;if(!ft)return dw(t),ft=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ng(t.type,t.memoizedProps)),e&&(e=zn)){if(ag(t))throw mS(),Error(ne(418));for(;e;)pS(t,e),e=Qi(e.nextSibling)}if(dw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){zn=Qi(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}zn=null}}else zn=Wn?Qi(t.stateNode.nextSibling):null;return!0}function mS(){for(var t=zn;t;)t=Qi(t.nextSibling)}function co(){zn=Wn=null,ft=!1}function Wv(t){xr===null?xr=[t]:xr.push(t)}var CD=Ti.ReactCurrentBatchConfig;function gl(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ne(309));var i=r.stateNode}if(!i)throw Error(ne(147,t));var s=i,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(ne(284));if(!r._owner)throw Error(ne(290,t))}return t}function Kc(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function hw(t){var e=t._init;return e(t._payload)}function gS(t){function e(T,x){if(t){var b=T.deletions;b===null?(T.deletions=[x],T.flags|=16):b.push(x)}}function r(T,x){if(!t)return null;for(;x!==null;)e(T,x),x=x.sibling;return null}function i(T,x){for(T=new Map;x!==null;)x.key!==null?T.set(x.key,x):T.set(x.index,x),x=x.sibling;return T}function s(T,x){return T=ts(T,x),T.index=0,T.sibling=null,T}function a(T,x,b){return T.index=b,t?(b=T.alternate,b!==null?(b=b.index,b<x?(T.flags|=2,x):b):(T.flags|=2,x)):(T.flags|=1048576,x)}function o(T){return t&&T.alternate===null&&(T.flags|=2),T}function l(T,x,b,P){return x===null||x.tag!==6?(x=zp(b,T.mode,P),x.return=T,x):(x=s(x,b),x.return=T,x)}function u(T,x,b,P){var U=b.type;return U===Fa?h(T,x,b.props.children,P,b.key):x!==null&&(x.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Oi&&hw(U)===x.type)?(P=s(x,b.props),P.ref=gl(T,x,b),P.return=T,P):(P=kd(b.type,b.key,b.props,null,T.mode,P),P.ref=gl(T,x,b),P.return=T,P)}function c(T,x,b,P){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=$p(b,T.mode,P),x.return=T,x):(x=s(x,b.children||[]),x.return=T,x)}function h(T,x,b,P,U){return x===null||x.tag!==7?(x=Js(b,T.mode,P,U),x.return=T,x):(x=s(x,b),x.return=T,x)}function f(T,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=zp(""+x,T.mode,b),x.return=T,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case jc:return b=kd(x.type,x.key,x.props,null,T.mode,b),b.ref=gl(T,null,x),b.return=T,b;case Va:return x=$p(x,T.mode,b),x.return=T,x;case Oi:var P=x._init;return f(T,P(x._payload),b)}if(Al(x)||dl(x))return x=Js(x,T.mode,b,null),x.return=T,x;Kc(T,x)}return null}function p(T,x,b,P){var U=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return U!==null?null:l(T,x,""+b,P);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case jc:return b.key===U?u(T,x,b,P):null;case Va:return b.key===U?c(T,x,b,P):null;case Oi:return U=b._init,p(T,x,U(b._payload),P)}if(Al(b)||dl(b))return U!==null?null:h(T,x,b,P,null);Kc(T,b)}return null}function m(T,x,b,P,U){if(typeof P=="string"&&P!==""||typeof P=="number")return T=T.get(b)||null,l(x,T,""+P,U);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case jc:return T=T.get(P.key===null?b:P.key)||null,u(x,T,P,U);case Va:return T=T.get(P.key===null?b:P.key)||null,c(x,T,P,U);case Oi:var V=P._init;return m(T,x,b,V(P._payload),U)}if(Al(P)||dl(P))return T=T.get(b)||null,h(x,T,P,U,null);Kc(x,P)}return null}function w(T,x,b,P){for(var U=null,V=null,R=x,I=x=0,y=null;R!==null&&I<b.length;I++){R.index>I?(y=R,R=null):y=R.sibling;var _=p(T,R,b[I],P);if(_===null){R===null&&(R=y);break}t&&R&&_.alternate===null&&e(T,R),x=a(_,x,I),V===null?U=_:V.sibling=_,V=_,R=y}if(I===b.length)return r(T,R),ft&&Us(T,I),U;if(R===null){for(;I<b.length;I++)R=f(T,b[I],P),R!==null&&(x=a(R,x,I),V===null?U=R:V.sibling=R,V=R);return ft&&Us(T,I),U}for(R=i(T,R);I<b.length;I++)y=m(R,T,I,b[I],P),y!==null&&(t&&y.alternate!==null&&R.delete(y.key===null?I:y.key),x=a(y,x,I),V===null?U=y:V.sibling=y,V=y);return t&&R.forEach(function(S){return e(T,S)}),ft&&Us(T,I),U}function A(T,x,b,P){var U=dl(b);if(typeof U!="function")throw Error(ne(150));if(b=U.call(b),b==null)throw Error(ne(151));for(var V=U=null,R=x,I=x=0,y=null,_=b.next();R!==null&&!_.done;I++,_=b.next()){R.index>I?(y=R,R=null):y=R.sibling;var S=p(T,R,_.value,P);if(S===null){R===null&&(R=y);break}t&&R&&S.alternate===null&&e(T,R),x=a(S,x,I),V===null?U=S:V.sibling=S,V=S,R=y}if(_.done)return r(T,R),ft&&Us(T,I),U;if(R===null){for(;!_.done;I++,_=b.next())_=f(T,_.value,P),_!==null&&(x=a(_,x,I),V===null?U=_:V.sibling=_,V=_);return ft&&Us(T,I),U}for(R=i(T,R);!_.done;I++,_=b.next())_=m(R,T,I,_.value,P),_!==null&&(t&&_.alternate!==null&&R.delete(_.key===null?I:_.key),x=a(_,x,I),V===null?U=_:V.sibling=_,V=_);return t&&R.forEach(function(O){return e(T,O)}),ft&&Us(T,I),U}function D(T,x,b,P){if(typeof b=="object"&&b!==null&&b.type===Fa&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case jc:e:{for(var U=b.key,V=x;V!==null;){if(V.key===U){if(U=b.type,U===Fa){if(V.tag===7){r(T,V.sibling),x=s(V,b.props.children),x.return=T,T=x;break e}}else if(V.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Oi&&hw(U)===V.type){r(T,V.sibling),x=s(V,b.props),x.ref=gl(T,V,b),x.return=T,T=x;break e}r(T,V);break}else e(T,V);V=V.sibling}b.type===Fa?(x=Js(b.props.children,T.mode,P,b.key),x.return=T,T=x):(P=kd(b.type,b.key,b.props,null,T.mode,P),P.ref=gl(T,x,b),P.return=T,T=P)}return o(T);case Va:e:{for(V=b.key;x!==null;){if(x.key===V)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){r(T,x.sibling),x=s(x,b.children||[]),x.return=T,T=x;break e}else{r(T,x);break}else e(T,x);x=x.sibling}x=$p(b,T.mode,P),x.return=T,T=x}return o(T);case Oi:return V=b._init,D(T,x,V(b._payload),P)}if(Al(b))return w(T,x,b,P);if(dl(b))return A(T,x,b,P);Kc(T,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(r(T,x.sibling),x=s(x,b),x.return=T,T=x):(r(T,x),x=zp(b,T.mode,P),x.return=T,T=x),o(T)):r(T,x)}return D}var ho=gS(!0),vS=gS(!1),rh=xs(null),ih=null,Ga=null,qv=null;function Gv(){qv=Ga=ih=null}function Kv(t){var e=rh.current;ct(rh),t._currentValue=e}function lg(t,e,r){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===r)break;t=t.return}}function to(t,e){ih=t,qv=Ga=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Mn=!0),t.firstContext=null)}function cr(t){var e=t._currentValue;if(qv!==t)if(t={context:t,memoizedValue:e,next:null},Ga===null){if(ih===null)throw Error(ne(308));Ga=t,ih.dependencies={lanes:0,firstContext:t}}else Ga=Ga.next=t;return e}var Ks=null;function Yv(t){Ks===null?Ks=[t]:Ks.push(t)}function yS(t,e,r,i){var s=e.interleaved;return s===null?(r.next=r,Yv(e)):(r.next=s.next,s.next=r),e.interleaved=r,gi(t,i)}function gi(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ji=!1;function Xv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _S(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function di(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ji(t,e,r){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,$e&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,gi(t,r)}return s=i.interleaved,s===null?(e.next=e,Yv(i)):(e.next=s.next,s.next=e),i.interleaved=e,gi(t,r)}function bd(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,Lv(t,r)}}function fw(t,e){var r=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=e:a=a.next=e}else s=a=e;r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:i.shared,effects:i.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function sh(t,e,r,i){var s=t.updateQueue;ji=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?a=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=u))}if(a!==null){var f=s.baseState;o=0,h=c=u=null,l=a;do{var p=l.lane,m=l.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=t,A=l;switch(p=e,m=r,A.tag){case 1:if(w=A.payload,typeof w=="function"){f=w.call(m,f,p);break e}f=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=A.payload,p=typeof w=="function"?w.call(m,f,p):w,p==null)break e;f=wt({},f,p);break e;case 2:ji=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else m={eventTime:m,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(c=h=m,u=f):h=h.next=m,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(u=f),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);na|=o,t.lanes=o,t.memoizedState=f}}function pw(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=r,typeof s!="function")throw Error(ne(191,s));s.call(i)}}}var Wu={},Ur=xs(Wu),gu=xs(Wu),vu=xs(Wu);function Ys(t){if(t===Wu)throw Error(ne(174));return t}function Qv(t,e){switch(at(vu,e),at(gu,t),at(Ur,Wu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zm(e,t)}ct(Ur),at(Ur,e)}function fo(){ct(Ur),ct(gu),ct(vu)}function wS(t){Ys(vu.current);var e=Ys(Ur.current),r=zm(e,t.type);e!==r&&(at(gu,t),at(Ur,r))}function Jv(t){gu.current===t&&(ct(Ur),ct(gu))}var vt=xs(0);function ah(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Op=[];function Zv(){for(var t=0;t<Op.length;t++)Op[t]._workInProgressVersionPrimary=null;Op.length=0}var xd=Ti.ReactCurrentDispatcher,jp=Ti.ReactCurrentBatchConfig,ta=0,_t=null,Dt=null,Ut=null,oh=!1,Wl=!1,yu=0,AD=0;function ln(){throw Error(ne(321))}function ey(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!kr(t[r],e[r]))return!1;return!0}function ty(t,e,r,i,s,a){if(ta=a,_t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xd.current=t===null||t.memoizedState===null?ND:MD,t=r(i,s),Wl){a=0;do{if(Wl=!1,yu=0,25<=a)throw Error(ne(301));a+=1,Ut=Dt=null,e.updateQueue=null,xd.current=LD,t=r(i,s)}while(Wl)}if(xd.current=lh,e=Dt!==null&&Dt.next!==null,ta=0,Ut=Dt=_t=null,oh=!1,e)throw Error(ne(300));return t}function ny(){var t=yu!==0;return yu=0,t}function Lr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?_t.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function dr(){if(Dt===null){var t=_t.alternate;t=t!==null?t.memoizedState:null}else t=Dt.next;var e=Ut===null?_t.memoizedState:Ut.next;if(e!==null)Ut=e,Dt=t;else{if(t===null)throw Error(ne(310));Dt=t,t={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Ut===null?_t.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function _u(t,e){return typeof e=="function"?e(t):e}function Vp(t){var e=dr(),r=e.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=t;var i=Dt,s=i.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}i.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,i=i.baseState;var l=o=null,u=null,c=a;do{var h=c.lane;if((ta&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=f,o=i):u=u.next=f,_t.lanes|=h,na|=h}c=c.next}while(c!==null&&c!==a);u===null?o=i:u.next=l,kr(i,e.memoizedState)||(Mn=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=u,r.lastRenderedState=i}if(t=r.interleaved,t!==null){s=t;do a=s.lane,_t.lanes|=a,na|=a,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Fp(t){var e=dr(),r=e.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=t;var i=r.dispatch,s=r.pending,a=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);kr(a,e.memoizedState)||(Mn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,i]}function bS(){}function xS(t,e){var r=_t,i=dr(),s=e(),a=!kr(i.memoizedState,s);if(a&&(i.memoizedState=s,Mn=!0),i=i.queue,ry(SS.bind(null,r,i,t),[t]),i.getSnapshot!==e||a||Ut!==null&&Ut.memoizedState.tag&1){if(r.flags|=2048,wu(9,TS.bind(null,r,i,s,e),void 0,null),Bt===null)throw Error(ne(349));ta&30||ES(r,e,s)}return s}function ES(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function TS(t,e,r,i){e.value=r,e.getSnapshot=i,IS(e)&&kS(t)}function SS(t,e,r){return r(function(){IS(e)&&kS(t)})}function IS(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!kr(t,r)}catch{return!0}}function kS(t){var e=gi(t,1);e!==null&&Ir(e,t,1,-1)}function mw(t){var e=Lr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_u,lastRenderedState:t},e.queue=t,t=t.dispatch=DD.bind(null,_t,t),[e.memoizedState,t]}function wu(t,e,r,i){return t={tag:t,create:e,destroy:r,deps:i,next:null},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(i=r.next,r.next=t,t.next=i,e.lastEffect=t)),t}function CS(){return dr().memoizedState}function Ed(t,e,r,i){var s=Lr();_t.flags|=t,s.memoizedState=wu(1|e,r,void 0,i===void 0?null:i)}function rf(t,e,r,i){var s=dr();i=i===void 0?null:i;var a=void 0;if(Dt!==null){var o=Dt.memoizedState;if(a=o.destroy,i!==null&&ey(i,o.deps)){s.memoizedState=wu(e,r,a,i);return}}_t.flags|=t,s.memoizedState=wu(1|e,r,a,i)}function gw(t,e){return Ed(8390656,8,t,e)}function ry(t,e){return rf(2048,8,t,e)}function AS(t,e){return rf(4,2,t,e)}function PS(t,e){return rf(4,4,t,e)}function RS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function DS(t,e,r){return r=r!=null?r.concat([t]):null,rf(4,4,RS.bind(null,e,t),r)}function iy(){}function NS(t,e){var r=dr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&ey(e,i[1])?i[0]:(r.memoizedState=[t,e],t)}function MS(t,e){var r=dr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&ey(e,i[1])?i[0]:(t=t(),r.memoizedState=[t,e],t)}function LS(t,e,r){return ta&21?(kr(r,e)||(r=FT(),_t.lanes|=r,na|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Mn=!0),t.memoizedState=r)}function PD(t,e){var r=Je;Je=r!==0&&4>r?r:4,t(!0);var i=jp.transition;jp.transition={};try{t(!1),e()}finally{Je=r,jp.transition=i}}function OS(){return dr().memoizedState}function RD(t,e,r){var i=es(t);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},jS(t))VS(e,r);else if(r=yS(t,e,r,i),r!==null){var s=wn();Ir(r,t,i,s),FS(r,e,i)}}function DD(t,e,r){var i=es(t),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(jS(t))VS(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,r);if(s.hasEagerState=!0,s.eagerState=l,kr(l,o)){var u=e.interleaved;u===null?(s.next=s,Yv(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=yS(t,e,s,i),r!==null&&(s=wn(),Ir(r,t,i,s),FS(r,e,i))}}function jS(t){var e=t.alternate;return t===_t||e!==null&&e===_t}function VS(t,e){Wl=oh=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function FS(t,e,r){if(r&4194240){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,Lv(t,r)}}var lh={readContext:cr,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},ND={readContext:cr,useCallback:function(t,e){return Lr().memoizedState=[t,e===void 0?null:e],t},useContext:cr,useEffect:gw,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Ed(4194308,4,RS.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Ed(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ed(4,2,t,e)},useMemo:function(t,e){var r=Lr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var i=Lr();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=RD.bind(null,_t,t),[i.memoizedState,t]},useRef:function(t){var e=Lr();return t={current:t},e.memoizedState=t},useState:mw,useDebugValue:iy,useDeferredValue:function(t){return Lr().memoizedState=t},useTransition:function(){var t=mw(!1),e=t[0];return t=PD.bind(null,t[1]),Lr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var i=_t,s=Lr();if(ft){if(r===void 0)throw Error(ne(407));r=r()}else{if(r=e(),Bt===null)throw Error(ne(349));ta&30||ES(i,e,r)}s.memoizedState=r;var a={value:r,getSnapshot:e};return s.queue=a,gw(SS.bind(null,i,a,t),[t]),i.flags|=2048,wu(9,TS.bind(null,i,a,r,e),void 0,null),r},useId:function(){var t=Lr(),e=Bt.identifierPrefix;if(ft){var r=oi,i=ai;r=(i&~(1<<32-Sr(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=yu++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=AD++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},MD={readContext:cr,useCallback:NS,useContext:cr,useEffect:ry,useImperativeHandle:DS,useInsertionEffect:AS,useLayoutEffect:PS,useMemo:MS,useReducer:Vp,useRef:CS,useState:function(){return Vp(_u)},useDebugValue:iy,useDeferredValue:function(t){var e=dr();return LS(e,Dt.memoizedState,t)},useTransition:function(){var t=Vp(_u)[0],e=dr().memoizedState;return[t,e]},useMutableSource:bS,useSyncExternalStore:xS,useId:OS,unstable_isNewReconciler:!1},LD={readContext:cr,useCallback:NS,useContext:cr,useEffect:ry,useImperativeHandle:DS,useInsertionEffect:AS,useLayoutEffect:PS,useMemo:MS,useReducer:Fp,useRef:CS,useState:function(){return Fp(_u)},useDebugValue:iy,useDeferredValue:function(t){var e=dr();return Dt===null?e.memoizedState=t:LS(e,Dt.memoizedState,t)},useTransition:function(){var t=Fp(_u)[0],e=dr().memoizedState;return[t,e]},useMutableSource:bS,useSyncExternalStore:xS,useId:OS,unstable_isNewReconciler:!1};function wr(t,e){if(t&&t.defaultProps){e=wt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function ug(t,e,r,i){e=t.memoizedState,r=r(i,e),r=r==null?e:wt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var sf={isMounted:function(t){return(t=t._reactInternals)?ha(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var i=wn(),s=es(t),a=di(i,s);a.payload=e,r!=null&&(a.callback=r),e=Ji(t,a,s),e!==null&&(Ir(e,t,s,i),bd(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var i=wn(),s=es(t),a=di(i,s);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=Ji(t,a,s),e!==null&&(Ir(e,t,s,i),bd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=wn(),i=es(t),s=di(r,i);s.tag=2,e!=null&&(s.callback=e),e=Ji(t,s,i),e!==null&&(Ir(e,t,i,r),bd(e,t,i))}};function vw(t,e,r,i,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,a,o):e.prototype&&e.prototype.isPureReactComponent?!hu(r,i)||!hu(s,a):!0}function US(t,e,r){var i=!1,s=hs,a=e.contextType;return typeof a=="object"&&a!==null?a=cr(a):(s=jn(e)?Zs:mn.current,i=e.contextTypes,a=(i=i!=null)?uo(t,s):hs),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sf,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function yw(t,e,r,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==t&&sf.enqueueReplaceState(e,e.state,null)}function cg(t,e,r,i){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Xv(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=cr(a):(a=jn(e)?Zs:mn.current,s.context=uo(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(ug(t,e,a,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&sf.enqueueReplaceState(s,s.state,null),sh(t,r,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function po(t,e){try{var r="",i=e;do r+=uR(i),i=i.return;while(i);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Up(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function dg(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var OD=typeof WeakMap=="function"?WeakMap:Map;function BS(t,e,r){r=di(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){ch||(ch=!0,bg=i),dg(t,e)},r}function zS(t,e,r){r=di(-1,r),r.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;r.payload=function(){return i(s)},r.callback=function(){dg(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){dg(t,e),typeof i!="function"&&(Zi===null?Zi=new Set([this]):Zi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function _w(t,e,r){var i=t.pingCache;if(i===null){i=t.pingCache=new OD;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(r)||(s.add(r),t=XD.bind(null,t,e,r),e.then(t,t))}function ww(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function bw(t,e,r,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=di(-1,1),e.tag=2,Ji(r,e,1))),r.lanes|=1),t)}var jD=Ti.ReactCurrentOwner,Mn=!1;function _n(t,e,r,i){e.child=t===null?vS(e,null,r,i):ho(e,t.child,r,i)}function xw(t,e,r,i,s){r=r.render;var a=e.ref;return to(e,s),i=ty(t,e,r,i,a,s),r=ny(),t!==null&&!Mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,vi(t,e,s)):(ft&&r&&$v(e),e.flags|=1,_n(t,e,i,s),e.child)}function Ew(t,e,r,i,s){if(t===null){var a=r.type;return typeof a=="function"&&!hy(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,$S(t,e,a,i,s)):(t=kd(r.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:hu,r(o,i)&&t.ref===e.ref)return vi(t,e,s)}return e.flags|=1,t=ts(a,i),t.ref=e.ref,t.return=e,e.child=t}function $S(t,e,r,i,s){if(t!==null){var a=t.memoizedProps;if(hu(a,i)&&t.ref===e.ref)if(Mn=!1,e.pendingProps=i=a,(t.lanes&s)!==0)t.flags&131072&&(Mn=!0);else return e.lanes=t.lanes,vi(t,e,s)}return hg(t,e,r,i,s)}function HS(t,e,r){var i=e.pendingProps,s=i.children,a=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(Ya,Bn),Bn|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,at(Ya,Bn),Bn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=a!==null?a.baseLanes:r,at(Ya,Bn),Bn|=i}else a!==null?(i=a.baseLanes|r,e.memoizedState=null):i=r,at(Ya,Bn),Bn|=i;return _n(t,e,s,r),e.child}function WS(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function hg(t,e,r,i,s){var a=jn(r)?Zs:mn.current;return a=uo(e,a),to(e,s),r=ty(t,e,r,i,a,s),i=ny(),t!==null&&!Mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,vi(t,e,s)):(ft&&i&&$v(e),e.flags|=1,_n(t,e,r,s),e.child)}function Tw(t,e,r,i,s){if(jn(r)){var a=!0;eh(e)}else a=!1;if(to(e,s),e.stateNode===null)Td(t,e),US(e,r,i),cg(e,r,i,s),i=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=cr(c):(c=jn(r)?Zs:mn.current,c=uo(e,c));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||u!==c)&&yw(e,o,i,c),ji=!1;var p=e.memoizedState;o.state=p,sh(e,i,o,s),u=e.memoizedState,l!==i||p!==u||On.current||ji?(typeof h=="function"&&(ug(e,r,h,i),u=e.memoizedState),(l=ji||vw(e,r,l,i,p,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),o.props=i,o.state=u,o.context=c,i=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,_S(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:wr(e.type,l),o.props=c,f=e.pendingProps,p=o.context,u=r.contextType,typeof u=="object"&&u!==null?u=cr(u):(u=jn(r)?Zs:mn.current,u=uo(e,u));var m=r.getDerivedStateFromProps;(h=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||p!==u)&&yw(e,o,i,u),ji=!1,p=e.memoizedState,o.state=p,sh(e,i,o,s);var w=e.memoizedState;l!==f||p!==w||On.current||ji?(typeof m=="function"&&(ug(e,r,m,i),w=e.memoizedState),(c=ji||vw(e,r,c,i,p,w,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,w,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=w),o.props=i,o.state=w,o.context=u,i=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return fg(t,e,r,i,a,s)}function fg(t,e,r,i,s,a){WS(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&uw(e,r,!1),vi(t,e,a);i=e.stateNode,jD.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=ho(e,t.child,null,a),e.child=ho(e,null,l,a)):_n(t,e,l,a),e.memoizedState=i.state,s&&uw(e,r,!0),e.child}function qS(t){var e=t.stateNode;e.pendingContext?lw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&lw(t,e.context,!1),Qv(t,e.containerInfo)}function Sw(t,e,r,i,s){return co(),Wv(s),e.flags|=256,_n(t,e,r,i),e.child}var pg={dehydrated:null,treeContext:null,retryLane:0};function mg(t){return{baseLanes:t,cachePool:null,transitions:null}}function GS(t,e,r){var i=e.pendingProps,s=vt.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),at(vt,s&1),t===null)return og(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,a?(i=e.mode,a=e.child,o={mode:"hidden",children:o},!(i&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=lf(o,i,0,null),t=Js(t,i,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=mg(r),e.memoizedState=pg,t):sy(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return VD(t,e,o,i,l,s,r);if(a){a=i.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=ts(s,u),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=ts(l,a):(a=Js(a,o,r,null),a.flags|=2),a.return=e,i.return=e,i.sibling=a,e.child=i,i=a,a=e.child,o=t.child.memoizedState,o=o===null?mg(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=pg,i}return a=t.child,t=a.sibling,i=ts(a,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=i,e.memoizedState=null,i}function sy(t,e){return e=lf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Yc(t,e,r,i){return i!==null&&Wv(i),ho(e,t.child,null,r),t=sy(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function VD(t,e,r,i,s,a,o){if(r)return e.flags&256?(e.flags&=-257,i=Up(Error(ne(422))),Yc(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=i.fallback,s=e.mode,i=lf({mode:"visible",children:i.children},s,0,null),a=Js(a,s,o,null),a.flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,e.mode&1&&ho(e,t.child,null,o),e.child.memoizedState=mg(o),e.memoizedState=pg,a);if(!(e.mode&1))return Yc(t,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,a=Error(ne(419)),i=Up(a,i,void 0),Yc(t,e,o,i)}if(l=(o&t.childLanes)!==0,Mn||l){if(i=Bt,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,gi(t,s),Ir(i,t,s,-1))}return dy(),i=Up(Error(ne(421))),Yc(t,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=QD.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,zn=Qi(s.nextSibling),Wn=e,ft=!0,xr=null,t!==null&&(nr[rr++]=ai,nr[rr++]=oi,nr[rr++]=ea,ai=t.id,oi=t.overflow,ea=e),e=sy(e,i.children),e.flags|=4096,e)}function Iw(t,e,r){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),lg(t.return,e,r)}function Bp(t,e,r,i,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=r,a.tailMode=s)}function KS(t,e,r){var i=e.pendingProps,s=i.revealOrder,a=i.tail;if(_n(t,e,i.children,r),i=vt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Iw(t,r,e);else if(t.tag===19)Iw(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(at(vt,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&ah(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Bp(e,!1,s,r,a);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&ah(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Bp(e,!0,r,null,a);break;case"together":Bp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Td(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vi(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),na|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,r=ts(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ts(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function FD(t,e,r){switch(e.tag){case 3:qS(e),co();break;case 5:wS(e);break;case 1:jn(e.type)&&eh(e);break;case 4:Qv(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;at(rh,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(at(vt,vt.current&1),e.flags|=128,null):r&e.child.childLanes?GS(t,e,r):(at(vt,vt.current&1),t=vi(t,e,r),t!==null?t.sibling:null);at(vt,vt.current&1);break;case 19:if(i=(r&e.childLanes)!==0,t.flags&128){if(i)return KS(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),at(vt,vt.current),i)break;return null;case 22:case 23:return e.lanes=0,HS(t,e,r)}return vi(t,e,r)}var YS,gg,XS,QS;YS=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};gg=function(){};XS=function(t,e,r,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,Ys(Ur.current);var a=null;switch(r){case"input":s=Vm(t,s),i=Vm(t,i),a=[];break;case"select":s=wt({},s,{value:void 0}),i=wt({},i,{value:void 0}),a=[];break;case"textarea":s=Bm(t,s),i=Bm(t,i),a=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Jd)}$m(r,i);var o;r=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(su.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in i){var u=i[c];if(l=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(a||(a=[]),a.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(su.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&ut("scroll",t),a||l===u||(a=[])):(a=a||[]).push(c,u))}r&&(a=a||[]).push("style",r);var c=a;(e.updateQueue=c)&&(e.flags|=4)}};QS=function(t,e,r,i){r!==i&&(e.flags|=4)};function vl(t,e){if(!ft)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function un(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,i=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=r,e}function UD(t,e,r){var i=e.pendingProps;switch(Hv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(e),null;case 1:return jn(e.type)&&Zd(),un(e),null;case 3:return i=e.stateNode,fo(),ct(On),ct(mn),Zv(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Gc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xr!==null&&(Tg(xr),xr=null))),gg(t,e),un(e),null;case 5:Jv(e);var s=Ys(vu.current);if(r=e.type,t!==null&&e.stateNode!=null)XS(t,e,r,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ne(166));return un(e),null}if(t=Ys(Ur.current),Gc(e)){i=e.stateNode,r=e.type;var a=e.memoizedProps;switch(i[Vr]=e,i[mu]=a,t=(e.mode&1)!==0,r){case"dialog":ut("cancel",i),ut("close",i);break;case"iframe":case"object":case"embed":ut("load",i);break;case"video":case"audio":for(s=0;s<Rl.length;s++)ut(Rl[s],i);break;case"source":ut("error",i);break;case"img":case"image":case"link":ut("error",i),ut("load",i);break;case"details":ut("toggle",i);break;case"input":L0(i,a),ut("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},ut("invalid",i);break;case"textarea":j0(i,a),ut("invalid",i)}$m(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?i.textContent!==l&&(a.suppressHydrationWarning!==!0&&qc(i.textContent,l,t),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&qc(i.textContent,l,t),s=["children",""+l]):su.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ut("scroll",i)}switch(r){case"input":Vc(i),O0(i,a,!0);break;case"textarea":Vc(i),V0(i);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(i.onclick=Jd)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=TT(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(r,{is:i.is}):(t=o.createElement(r),r==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,r),t[Vr]=e,t[mu]=i,YS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Hm(r,i),r){case"dialog":ut("cancel",t),ut("close",t),s=i;break;case"iframe":case"object":case"embed":ut("load",t),s=i;break;case"video":case"audio":for(s=0;s<Rl.length;s++)ut(Rl[s],t);s=i;break;case"source":ut("error",t),s=i;break;case"img":case"image":case"link":ut("error",t),ut("load",t),s=i;break;case"details":ut("toggle",t),s=i;break;case"input":L0(t,i),s=Vm(t,i),ut("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=wt({},i,{value:void 0}),ut("invalid",t);break;case"textarea":j0(t,i),s=Bm(t,i),ut("invalid",t);break;default:s=i}$m(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?kT(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&ST(t,u)):a==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&au(t,u):typeof u=="number"&&au(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(su.hasOwnProperty(a)?u!=null&&a==="onScroll"&&ut("scroll",t):u!=null&&Av(t,a,u,o))}switch(r){case"input":Vc(t),O0(t,i,!1);break;case"textarea":Vc(t),V0(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ds(i.value));break;case"select":t.multiple=!!i.multiple,a=i.value,a!=null?Qa(t,!!i.multiple,a,!1):i.defaultValue!=null&&Qa(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Jd)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return un(e),null;case 6:if(t&&e.stateNode!=null)QS(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ne(166));if(r=Ys(vu.current),Ys(Ur.current),Gc(e)){if(i=e.stateNode,r=e.memoizedProps,i[Vr]=e,(a=i.nodeValue!==r)&&(t=Wn,t!==null))switch(t.tag){case 3:qc(i.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qc(i.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Vr]=e,e.stateNode=i}return un(e),null;case 13:if(ct(vt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ft&&zn!==null&&e.mode&1&&!(e.flags&128))mS(),co(),e.flags|=98560,a=!1;else if(a=Gc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!a)throw Error(ne(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ne(317));a[Vr]=e}else co(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;un(e),a=!1}else xr!==null&&(Tg(xr),xr=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||vt.current&1?Mt===0&&(Mt=3):dy())),e.updateQueue!==null&&(e.flags|=4),un(e),null);case 4:return fo(),gg(t,e),t===null&&fu(e.stateNode.containerInfo),un(e),null;case 10:return Kv(e.type._context),un(e),null;case 17:return jn(e.type)&&Zd(),un(e),null;case 19:if(ct(vt),a=e.memoizedState,a===null)return un(e),null;if(i=(e.flags&128)!==0,o=a.rendering,o===null)if(i)vl(a,!1);else{if(Mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ah(t),o!==null){for(e.flags|=128,vl(a,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)a=r,t=i,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return at(vt,vt.current&1|2),e.child}t=t.sibling}a.tail!==null&&kt()>mo&&(e.flags|=128,i=!0,vl(a,!1),e.lanes=4194304)}else{if(!i)if(t=ah(o),t!==null){if(e.flags|=128,i=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),vl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!ft)return un(e),null}else 2*kt()-a.renderingStartTime>mo&&r!==1073741824&&(e.flags|=128,i=!0,vl(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=kt(),e.sibling=null,r=vt.current,at(vt,i?r&1|2:r&1),e):(un(e),null);case 22:case 23:return cy(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Bn&1073741824&&(un(e),e.subtreeFlags&6&&(e.flags|=8192)):un(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function BD(t,e){switch(Hv(e),e.tag){case 1:return jn(e.type)&&Zd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return fo(),ct(On),ct(mn),Zv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Jv(e),null;case 13:if(ct(vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));co()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ct(vt),null;case 4:return fo(),null;case 10:return Kv(e.type._context),null;case 22:case 23:return cy(),null;case 24:return null;default:return null}}var Xc=!1,hn=!1,zD=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Ka(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Tt(t,e,i)}else r.current=null}function vg(t,e,r){try{r()}catch(i){Tt(t,e,i)}}var kw=!1;function $D(t,e){if(eg=Yd,t=nS(),zv(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,u=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var m;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==a||i!==0&&f.nodeType!==3||(u=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)p=f,f=m;for(;;){if(f===t)break t;if(p===r&&++c===s&&(l=o),p===a&&++h===i&&(u=o),(m=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=m}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(tg={focusedElem:t,selectionRange:r},Yd=!1,pe=e;pe!==null;)if(e=pe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,pe=t;else for(;pe!==null;){e=pe;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var A=w.memoizedProps,D=w.memoizedState,T=e.stateNode,x=T.getSnapshotBeforeUpdate(e.elementType===e.type?A:wr(e.type,A),D);T.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(P){Tt(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,pe=t;break}pe=e.return}return w=kw,kw=!1,w}function ql(t,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&vg(e,r,a)}s=s.next}while(s!==i)}}function af(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function yg(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function JS(t){var e=t.alternate;e!==null&&(t.alternate=null,JS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vr],delete e[mu],delete e[ig],delete e[SD],delete e[ID])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ZS(t){return t.tag===5||t.tag===3||t.tag===4}function Cw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ZS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _g(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Jd));else if(i!==4&&(t=t.child,t!==null))for(_g(t,e,r),t=t.sibling;t!==null;)_g(t,e,r),t=t.sibling}function wg(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(wg(t,e,r),t=t.sibling;t!==null;)wg(t,e,r),t=t.sibling}var Yt=null,br=!1;function Ni(t,e,r){for(r=r.child;r!==null;)eI(t,e,r),r=r.sibling}function eI(t,e,r){if(Fr&&typeof Fr.onCommitFiberUnmount=="function")try{Fr.onCommitFiberUnmount(Qh,r)}catch{}switch(r.tag){case 5:hn||Ka(r,e);case 6:var i=Yt,s=br;Yt=null,Ni(t,e,r),Yt=i,br=s,Yt!==null&&(br?(t=Yt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Yt.removeChild(r.stateNode));break;case 18:Yt!==null&&(br?(t=Yt,r=r.stateNode,t.nodeType===8?Mp(t.parentNode,r):t.nodeType===1&&Mp(t,r),cu(t)):Mp(Yt,r.stateNode));break;case 4:i=Yt,s=br,Yt=r.stateNode.containerInfo,br=!0,Ni(t,e,r),Yt=i,br=s;break;case 0:case 11:case 14:case 15:if(!hn&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&vg(r,e,o),s=s.next}while(s!==i)}Ni(t,e,r);break;case 1:if(!hn&&(Ka(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(l){Tt(r,e,l)}Ni(t,e,r);break;case 21:Ni(t,e,r);break;case 22:r.mode&1?(hn=(i=hn)||r.memoizedState!==null,Ni(t,e,r),hn=i):Ni(t,e,r);break;default:Ni(t,e,r)}}function Aw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new zD),e.forEach(function(i){var s=JD.bind(null,t,i);r.has(i)||(r.add(i),i.then(s,s))})}}function yr(t,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Yt=l.stateNode,br=!1;break e;case 3:Yt=l.stateNode.containerInfo,br=!0;break e;case 4:Yt=l.stateNode.containerInfo,br=!0;break e}l=l.return}if(Yt===null)throw Error(ne(160));eI(a,o,s),Yt=null,br=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Tt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tI(e,t),e=e.sibling}function tI(t,e){var r=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yr(e,t),Nr(t),i&4){try{ql(3,t,t.return),af(3,t)}catch(A){Tt(t,t.return,A)}try{ql(5,t,t.return)}catch(A){Tt(t,t.return,A)}}break;case 1:yr(e,t),Nr(t),i&512&&r!==null&&Ka(r,r.return);break;case 5:if(yr(e,t),Nr(t),i&512&&r!==null&&Ka(r,r.return),t.flags&32){var s=t.stateNode;try{au(s,"")}catch(A){Tt(t,t.return,A)}}if(i&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&xT(s,a),Hm(l,o);var c=Hm(l,a);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?kT(s,f):h==="dangerouslySetInnerHTML"?ST(s,f):h==="children"?au(s,f):Av(s,h,f,c)}switch(l){case"input":Fm(s,a);break;case"textarea":ET(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?Qa(s,!!a.multiple,m,!1):p!==!!a.multiple&&(a.defaultValue!=null?Qa(s,!!a.multiple,a.defaultValue,!0):Qa(s,!!a.multiple,a.multiple?[]:"",!1))}s[mu]=a}catch(A){Tt(t,t.return,A)}}break;case 6:if(yr(e,t),Nr(t),i&4){if(t.stateNode===null)throw Error(ne(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(A){Tt(t,t.return,A)}}break;case 3:if(yr(e,t),Nr(t),i&4&&r!==null&&r.memoizedState.isDehydrated)try{cu(e.containerInfo)}catch(A){Tt(t,t.return,A)}break;case 4:yr(e,t),Nr(t);break;case 13:yr(e,t),Nr(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(ly=kt())),i&4&&Aw(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(hn=(c=hn)||h,yr(e,t),hn=c):yr(e,t),Nr(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(pe=t,h=t.child;h!==null;){for(f=pe=h;pe!==null;){switch(p=pe,m=p.child,p.tag){case 0:case 11:case 14:case 15:ql(4,p,p.return);break;case 1:Ka(p,p.return);var w=p.stateNode;if(typeof w.componentWillUnmount=="function"){i=p,r=p.return;try{e=i,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(A){Tt(i,r,A)}}break;case 5:Ka(p,p.return);break;case 22:if(p.memoizedState!==null){Rw(f);continue}}m!==null?(m.return=p,pe=m):Rw(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,c?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=IT("display",o))}catch(A){Tt(t,t.return,A)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(A){Tt(t,t.return,A)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:yr(e,t),Nr(t),i&4&&Aw(t);break;case 21:break;default:yr(e,t),Nr(t)}}function Nr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(ZS(r)){var i=r;break e}r=r.return}throw Error(ne(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(au(s,""),i.flags&=-33);var a=Cw(t);wg(t,a,s);break;case 3:case 4:var o=i.stateNode.containerInfo,l=Cw(t);_g(t,l,o);break;default:throw Error(ne(161))}}catch(u){Tt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function HD(t,e,r){pe=t,nI(t)}function nI(t,e,r){for(var i=(t.mode&1)!==0;pe!==null;){var s=pe,a=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||Xc;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||hn;l=Xc;var c=hn;if(Xc=o,(hn=u)&&!c)for(pe=s;pe!==null;)o=pe,u=o.child,o.tag===22&&o.memoizedState!==null?Dw(s):u!==null?(u.return=o,pe=u):Dw(s);for(;a!==null;)pe=a,nI(a),a=a.sibling;pe=s,Xc=l,hn=c}Pw(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,pe=a):Pw(t)}}function Pw(t){for(;pe!==null;){var e=pe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hn||af(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!hn)if(r===null)i.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:wr(e.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&pw(e,a,i);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}pw(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&cu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}hn||e.flags&512&&yg(e)}catch(p){Tt(e,e.return,p)}}if(e===t){pe=null;break}if(r=e.sibling,r!==null){r.return=e.return,pe=r;break}pe=e.return}}function Rw(t){for(;pe!==null;){var e=pe;if(e===t){pe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,pe=r;break}pe=e.return}}function Dw(t){for(;pe!==null;){var e=pe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{af(4,e)}catch(u){Tt(e,r,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(u){Tt(e,s,u)}}var a=e.return;try{yg(e)}catch(u){Tt(e,a,u)}break;case 5:var o=e.return;try{yg(e)}catch(u){Tt(e,o,u)}}}catch(u){Tt(e,e.return,u)}if(e===t){pe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,pe=l;break}pe=e.return}}var WD=Math.ceil,uh=Ti.ReactCurrentDispatcher,ay=Ti.ReactCurrentOwner,or=Ti.ReactCurrentBatchConfig,$e=0,Bt=null,Pt=null,Zt=0,Bn=0,Ya=xs(0),Mt=0,bu=null,na=0,of=0,oy=0,Gl=null,Dn=null,ly=0,mo=1/0,ii=null,ch=!1,bg=null,Zi=null,Qc=!1,qi=null,dh=0,Kl=0,xg=null,Sd=-1,Id=0;function wn(){return $e&6?kt():Sd!==-1?Sd:Sd=kt()}function es(t){return t.mode&1?$e&2&&Zt!==0?Zt&-Zt:CD.transition!==null?(Id===0&&(Id=FT()),Id):(t=Je,t!==0||(t=window.event,t=t===void 0?16:qT(t.type)),t):1}function Ir(t,e,r,i){if(50<Kl)throw Kl=0,xg=null,Error(ne(185));zu(t,r,i),(!($e&2)||t!==Bt)&&(t===Bt&&(!($e&2)&&(of|=r),Mt===4&&Ui(t,Zt)),Vn(t,i),r===1&&$e===0&&!(e.mode&1)&&(mo=kt()+500,nf&&Es()))}function Vn(t,e){var r=t.callbackNode;CR(t,e);var i=Kd(t,t===Bt?Zt:0);if(i===0)r!==null&&B0(r),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(r!=null&&B0(r),e===1)t.tag===0?kD(Nw.bind(null,t)):hS(Nw.bind(null,t)),ED(function(){!($e&6)&&Es()}),r=null;else{switch(UT(i)){case 1:r=Mv;break;case 4:r=jT;break;case 16:r=Gd;break;case 536870912:r=VT;break;default:r=Gd}r=cI(r,rI.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function rI(t,e){if(Sd=-1,Id=0,$e&6)throw Error(ne(327));var r=t.callbackNode;if(no()&&t.callbackNode!==r)return null;var i=Kd(t,t===Bt?Zt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=hh(t,i);else{e=i;var s=$e;$e|=2;var a=sI();(Bt!==t||Zt!==e)&&(ii=null,mo=kt()+500,Qs(t,e));do try{KD();break}catch(l){iI(t,l)}while(!0);Gv(),uh.current=a,$e=s,Pt!==null?e=0:(Bt=null,Zt=0,e=Mt)}if(e!==0){if(e===2&&(s=Ym(t),s!==0&&(i=s,e=Eg(t,s))),e===1)throw r=bu,Qs(t,0),Ui(t,i),Vn(t,kt()),r;if(e===6)Ui(t,i);else{if(s=t.current.alternate,!(i&30)&&!qD(s)&&(e=hh(t,i),e===2&&(a=Ym(t),a!==0&&(i=a,e=Eg(t,a))),e===1))throw r=bu,Qs(t,0),Ui(t,i),Vn(t,kt()),r;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(ne(345));case 2:Bs(t,Dn,ii);break;case 3:if(Ui(t,i),(i&130023424)===i&&(e=ly+500-kt(),10<e)){if(Kd(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){wn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=rg(Bs.bind(null,t,Dn,ii),e);break}Bs(t,Dn,ii);break;case 4:if(Ui(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var o=31-Sr(i);a=1<<o,o=e[o],o>s&&(s=o),i&=~a}if(i=s,i=kt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*WD(i/1960))-i,10<i){t.timeoutHandle=rg(Bs.bind(null,t,Dn,ii),i);break}Bs(t,Dn,ii);break;case 5:Bs(t,Dn,ii);break;default:throw Error(ne(329))}}}return Vn(t,kt()),t.callbackNode===r?rI.bind(null,t):null}function Eg(t,e){var r=Gl;return t.current.memoizedState.isDehydrated&&(Qs(t,e).flags|=256),t=hh(t,e),t!==2&&(e=Dn,Dn=r,e!==null&&Tg(e)),t}function Tg(t){Dn===null?Dn=t:Dn.push.apply(Dn,t)}function qD(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var s=r[i],a=s.getSnapshot;s=s.value;try{if(!kr(a(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ui(t,e){for(e&=~oy,e&=~of,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Sr(e),i=1<<r;t[r]=-1,e&=~i}}function Nw(t){if($e&6)throw Error(ne(327));no();var e=Kd(t,0);if(!(e&1))return Vn(t,kt()),null;var r=hh(t,e);if(t.tag!==0&&r===2){var i=Ym(t);i!==0&&(e=i,r=Eg(t,i))}if(r===1)throw r=bu,Qs(t,0),Ui(t,e),Vn(t,kt()),r;if(r===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bs(t,Dn,ii),Vn(t,kt()),null}function uy(t,e){var r=$e;$e|=1;try{return t(e)}finally{$e=r,$e===0&&(mo=kt()+500,nf&&Es())}}function ra(t){qi!==null&&qi.tag===0&&!($e&6)&&no();var e=$e;$e|=1;var r=or.transition,i=Je;try{if(or.transition=null,Je=1,t)return t()}finally{Je=i,or.transition=r,$e=e,!($e&6)&&Es()}}function cy(){Bn=Ya.current,ct(Ya)}function Qs(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,xD(r)),Pt!==null)for(r=Pt.return;r!==null;){var i=r;switch(Hv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Zd();break;case 3:fo(),ct(On),ct(mn),Zv();break;case 5:Jv(i);break;case 4:fo();break;case 13:ct(vt);break;case 19:ct(vt);break;case 10:Kv(i.type._context);break;case 22:case 23:cy()}r=r.return}if(Bt=t,Pt=t=ts(t.current,null),Zt=Bn=e,Mt=0,bu=null,oy=of=na=0,Dn=Gl=null,Ks!==null){for(e=0;e<Ks.length;e++)if(r=Ks[e],i=r.interleaved,i!==null){r.interleaved=null;var s=i.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,i.next=o}r.pending=i}Ks=null}return t}function iI(t,e){do{var r=Pt;try{if(Gv(),xd.current=lh,oh){for(var i=_t.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}oh=!1}if(ta=0,Ut=Dt=_t=null,Wl=!1,yu=0,ay.current=null,r===null||r.return===null){Mt=1,bu=e,Pt=null;break}e:{var a=t,o=r.return,l=r,u=e;if(e=Zt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=ww(o);if(m!==null){m.flags&=-257,bw(m,o,l,a,e),m.mode&1&&_w(a,c,e),e=m,u=c;var w=e.updateQueue;if(w===null){var A=new Set;A.add(u),e.updateQueue=A}else w.add(u);break e}else{if(!(e&1)){_w(a,c,e),dy();break e}u=Error(ne(426))}}else if(ft&&l.mode&1){var D=ww(o);if(D!==null){!(D.flags&65536)&&(D.flags|=256),bw(D,o,l,a,e),Wv(po(u,l));break e}}a=u=po(u,l),Mt!==4&&(Mt=2),Gl===null?Gl=[a]:Gl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var T=BS(a,u,e);fw(a,T);break e;case 1:l=u;var x=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Zi===null||!Zi.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e;var P=zS(a,l,e);fw(a,P);break e}}a=a.return}while(a!==null)}oI(r)}catch(U){e=U,Pt===r&&r!==null&&(Pt=r=r.return);continue}break}while(!0)}function sI(){var t=uh.current;return uh.current=lh,t===null?lh:t}function dy(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),Bt===null||!(na&268435455)&&!(of&268435455)||Ui(Bt,Zt)}function hh(t,e){var r=$e;$e|=2;var i=sI();(Bt!==t||Zt!==e)&&(ii=null,Qs(t,e));do try{GD();break}catch(s){iI(t,s)}while(!0);if(Gv(),$e=r,uh.current=i,Pt!==null)throw Error(ne(261));return Bt=null,Zt=0,Mt}function GD(){for(;Pt!==null;)aI(Pt)}function KD(){for(;Pt!==null&&!_R();)aI(Pt)}function aI(t){var e=uI(t.alternate,t,Bn);t.memoizedProps=t.pendingProps,e===null?oI(t):Pt=e,ay.current=null}function oI(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=BD(r,e),r!==null){r.flags&=32767,Pt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Mt=6,Pt=null;return}}else if(r=UD(r,e,Bn),r!==null){Pt=r;return}if(e=e.sibling,e!==null){Pt=e;return}Pt=e=t}while(e!==null);Mt===0&&(Mt=5)}function Bs(t,e,r){var i=Je,s=or.transition;try{or.transition=null,Je=1,YD(t,e,r,i)}finally{or.transition=s,Je=i}return null}function YD(t,e,r,i){do no();while(qi!==null);if($e&6)throw Error(ne(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(AR(t,a),t===Bt&&(Pt=Bt=null,Zt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Qc||(Qc=!0,cI(Gd,function(){return no(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=or.transition,or.transition=null;var o=Je;Je=1;var l=$e;$e|=4,ay.current=null,$D(t,r),tI(r,t),mD(tg),Yd=!!eg,tg=eg=null,t.current=r,HD(r),wR(),$e=l,Je=o,or.transition=a}else t.current=r;if(Qc&&(Qc=!1,qi=t,dh=s),a=t.pendingLanes,a===0&&(Zi=null),ER(r.stateNode),Vn(t,kt()),e!==null)for(i=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(ch)throw ch=!1,t=bg,bg=null,t;return dh&1&&t.tag!==0&&no(),a=t.pendingLanes,a&1?t===xg?Kl++:(Kl=0,xg=t):Kl=0,Es(),null}function no(){if(qi!==null){var t=UT(dh),e=or.transition,r=Je;try{if(or.transition=null,Je=16>t?16:t,qi===null)var i=!1;else{if(t=qi,qi=null,dh=0,$e&6)throw Error(ne(331));var s=$e;for($e|=4,pe=t.current;pe!==null;){var a=pe,o=a.child;if(pe.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(pe=c;pe!==null;){var h=pe;switch(h.tag){case 0:case 11:case 15:ql(8,h,a)}var f=h.child;if(f!==null)f.return=h,pe=f;else for(;pe!==null;){h=pe;var p=h.sibling,m=h.return;if(JS(h),h===c){pe=null;break}if(p!==null){p.return=m,pe=p;break}pe=m}}}var w=a.alternate;if(w!==null){var A=w.child;if(A!==null){w.child=null;do{var D=A.sibling;A.sibling=null,A=D}while(A!==null)}}pe=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,pe=o;else e:for(;pe!==null;){if(a=pe,a.flags&2048)switch(a.tag){case 0:case 11:case 15:ql(9,a,a.return)}var T=a.sibling;if(T!==null){T.return=a.return,pe=T;break e}pe=a.return}}var x=t.current;for(pe=x;pe!==null;){o=pe;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,pe=b;else e:for(o=x;pe!==null;){if(l=pe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:af(9,l)}}catch(U){Tt(l,l.return,U)}if(l===o){pe=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,pe=P;break e}pe=l.return}}if($e=s,Es(),Fr&&typeof Fr.onPostCommitFiberRoot=="function")try{Fr.onPostCommitFiberRoot(Qh,t)}catch{}i=!0}return i}finally{Je=r,or.transition=e}}return!1}function Mw(t,e,r){e=po(r,e),e=BS(t,e,1),t=Ji(t,e,1),e=wn(),t!==null&&(zu(t,1,e),Vn(t,e))}function Tt(t,e,r){if(t.tag===3)Mw(t,t,r);else for(;e!==null;){if(e.tag===3){Mw(e,t,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Zi===null||!Zi.has(i))){t=po(r,t),t=zS(e,t,1),e=Ji(e,t,1),t=wn(),e!==null&&(zu(e,1,t),Vn(e,t));break}}e=e.return}}function XD(t,e,r){var i=t.pingCache;i!==null&&i.delete(e),e=wn(),t.pingedLanes|=t.suspendedLanes&r,Bt===t&&(Zt&r)===r&&(Mt===4||Mt===3&&(Zt&130023424)===Zt&&500>kt()-ly?Qs(t,0):oy|=r),Vn(t,e)}function lI(t,e){e===0&&(t.mode&1?(e=Bc,Bc<<=1,!(Bc&130023424)&&(Bc=4194304)):e=1);var r=wn();t=gi(t,e),t!==null&&(zu(t,e,r),Vn(t,r))}function QD(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),lI(t,r)}function JD(t,e){var r=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ne(314))}i!==null&&i.delete(e),lI(t,r)}var uI;uI=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||On.current)Mn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Mn=!1,FD(t,e,r);Mn=!!(t.flags&131072)}else Mn=!1,ft&&e.flags&1048576&&fS(e,nh,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Td(t,e),t=e.pendingProps;var s=uo(e,mn.current);to(e,r),s=ty(null,e,i,t,s,r);var a=ny();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jn(i)?(a=!0,eh(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Xv(e),s.updater=sf,e.stateNode=s,s._reactInternals=e,cg(e,i,t,r),e=fg(null,e,i,!0,a,r)):(e.tag=0,ft&&a&&$v(e),_n(null,e,s,r),e=e.child),e;case 16:i=e.elementType;e:{switch(Td(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=eN(i),t=wr(i,t),s){case 0:e=hg(null,e,i,t,r);break e;case 1:e=Tw(null,e,i,t,r);break e;case 11:e=xw(null,e,i,t,r);break e;case 14:e=Ew(null,e,i,wr(i.type,t),r);break e}throw Error(ne(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:wr(i,s),hg(t,e,i,s,r);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:wr(i,s),Tw(t,e,i,s,r);case 3:e:{if(qS(e),t===null)throw Error(ne(387));i=e.pendingProps,a=e.memoizedState,s=a.element,_S(t,e),sh(e,i,null,r);var o=e.memoizedState;if(i=o.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=po(Error(ne(423)),e),e=Sw(t,e,i,r,s);break e}else if(i!==s){s=po(Error(ne(424)),e),e=Sw(t,e,i,r,s);break e}else for(zn=Qi(e.stateNode.containerInfo.firstChild),Wn=e,ft=!0,xr=null,r=vS(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(co(),i===s){e=vi(t,e,r);break e}_n(t,e,i,r)}e=e.child}return e;case 5:return wS(e),t===null&&og(e),i=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,ng(i,s)?o=null:a!==null&&ng(i,a)&&(e.flags|=32),WS(t,e),_n(t,e,o,r),e.child;case 6:return t===null&&og(e),null;case 13:return GS(t,e,r);case 4:return Qv(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ho(e,null,i,r):_n(t,e,i,r),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:wr(i,s),xw(t,e,i,s,r);case 7:return _n(t,e,e.pendingProps,r),e.child;case 8:return _n(t,e,e.pendingProps.children,r),e.child;case 12:return _n(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,at(rh,i._currentValue),i._currentValue=o,a!==null)if(kr(a.value,o)){if(a.children===s.children&&!On.current){e=vi(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(a.tag===1){u=di(-1,r&-r),u.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}a.lanes|=r,u=a.alternate,u!==null&&(u.lanes|=r),lg(a.return,r,e),l.lanes|=r;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ne(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),lg(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}_n(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,to(e,r),s=cr(s),i=i(s),e.flags|=1,_n(t,e,i,r),e.child;case 14:return i=e.type,s=wr(i,e.pendingProps),s=wr(i.type,s),Ew(t,e,i,s,r);case 15:return $S(t,e,e.type,e.pendingProps,r);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:wr(i,s),Td(t,e),e.tag=1,jn(i)?(t=!0,eh(e)):t=!1,to(e,r),US(e,i,s),cg(e,i,s,r),fg(null,e,i,!0,t,r);case 19:return KS(t,e,r);case 22:return HS(t,e,r)}throw Error(ne(156,e.tag))};function cI(t,e){return OT(t,e)}function ZD(t,e,r,i){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(t,e,r,i){return new ZD(t,e,r,i)}function hy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function eN(t){if(typeof t=="function")return hy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Rv)return 11;if(t===Dv)return 14}return 2}function ts(t,e){var r=t.alternate;return r===null?(r=sr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function kd(t,e,r,i,s,a){var o=2;if(i=t,typeof t=="function")hy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Fa:return Js(r.children,s,a,e);case Pv:o=8,s|=8;break;case Mm:return t=sr(12,r,e,s|2),t.elementType=Mm,t.lanes=a,t;case Lm:return t=sr(13,r,e,s),t.elementType=Lm,t.lanes=a,t;case Om:return t=sr(19,r,e,s),t.elementType=Om,t.lanes=a,t;case _T:return lf(r,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vT:o=10;break e;case yT:o=9;break e;case Rv:o=11;break e;case Dv:o=14;break e;case Oi:o=16,i=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=sr(o,r,e,s),e.elementType=t,e.type=i,e.lanes=a,e}function Js(t,e,r,i){return t=sr(7,t,i,e),t.lanes=r,t}function lf(t,e,r,i){return t=sr(22,t,i,e),t.elementType=_T,t.lanes=r,t.stateNode={isHidden:!1},t}function zp(t,e,r){return t=sr(6,t,null,e),t.lanes=r,t}function $p(t,e,r){return e=sr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function tN(t,e,r,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ep(0),this.expirationTimes=Ep(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ep(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function fy(t,e,r,i,s,a,o,l,u){return t=new tN(t,e,r,l,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=sr(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xv(a),t}function nN(t,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Va,key:i==null?null:""+i,children:t,containerInfo:e,implementation:r}}function dI(t){if(!t)return hs;t=t._reactInternals;e:{if(ha(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var r=t.type;if(jn(r))return dS(t,r,e)}return e}function hI(t,e,r,i,s,a,o,l,u){return t=fy(r,i,!0,t,s,a,o,l,u),t.context=dI(null),r=t.current,i=wn(),s=es(r),a=di(i,s),a.callback=e??null,Ji(r,a,s),t.current.lanes=s,zu(t,s,i),Vn(t,i),t}function uf(t,e,r,i){var s=e.current,a=wn(),o=es(s);return r=dI(r),e.context===null?e.context=r:e.pendingContext=r,e=di(a,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Ji(s,e,o),t!==null&&(Ir(t,s,o,a),bd(t,s,o)),o}function fh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Lw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function py(t,e){Lw(t,e),(t=t.alternate)&&Lw(t,e)}function rN(){return null}var fI=typeof reportError=="function"?reportError:function(t){console.error(t)};function my(t){this._internalRoot=t}cf.prototype.render=my.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));uf(t,e,null,null)};cf.prototype.unmount=my.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ra(function(){uf(null,t,null,null)}),e[mi]=null}};function cf(t){this._internalRoot=t}cf.prototype.unstable_scheduleHydration=function(t){if(t){var e=$T();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Fi.length&&e!==0&&e<Fi[r].priority;r++);Fi.splice(r,0,t),r===0&&WT(t)}};function gy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function df(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ow(){}function iN(t,e,r,i,s){if(s){if(typeof i=="function"){var a=i;i=function(){var c=fh(o);a.call(c)}}var o=hI(e,i,t,0,null,!1,!1,"",Ow);return t._reactRootContainer=o,t[mi]=o.current,fu(t.nodeType===8?t.parentNode:t),ra(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var c=fh(u);l.call(c)}}var u=fy(t,0,!1,null,null,!1,!1,"",Ow);return t._reactRootContainer=u,t[mi]=u.current,fu(t.nodeType===8?t.parentNode:t),ra(function(){uf(e,u,r,i)}),u}function hf(t,e,r,i,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var u=fh(o);l.call(u)}}uf(e,o,t,s)}else o=iN(r,e,t,s,i);return fh(o)}BT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Pl(e.pendingLanes);r!==0&&(Lv(e,r|1),Vn(e,kt()),!($e&6)&&(mo=kt()+500,Es()))}break;case 13:ra(function(){var i=gi(t,1);if(i!==null){var s=wn();Ir(i,t,1,s)}}),py(t,1)}};Ov=function(t){if(t.tag===13){var e=gi(t,134217728);if(e!==null){var r=wn();Ir(e,t,134217728,r)}py(t,134217728)}};zT=function(t){if(t.tag===13){var e=es(t),r=gi(t,e);if(r!==null){var i=wn();Ir(r,t,e,i)}py(t,e)}};$T=function(){return Je};HT=function(t,e){var r=Je;try{return Je=t,e()}finally{Je=r}};qm=function(t,e,r){switch(e){case"input":if(Fm(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==t&&i.form===t.form){var s=tf(i);if(!s)throw Error(ne(90));bT(i),Fm(i,s)}}}break;case"textarea":ET(t,r);break;case"select":e=r.value,e!=null&&Qa(t,!!r.multiple,e,!1)}};PT=uy;RT=ra;var sN={usingClientEntryPoint:!1,Events:[Hu,$a,tf,CT,AT,uy]},yl={findFiberByHostInstance:Gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},aN={bundleType:yl.bundleType,version:yl.version,rendererPackageName:yl.rendererPackageName,rendererConfig:yl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ti.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=MT(t),t===null?null:t.stateNode},findFiberByHostInstance:yl.findFiberByHostInstance||rN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jc.isDisabled&&Jc.supportsFiber)try{Qh=Jc.inject(aN),Fr=Jc}catch{}}Qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sN;Qn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!gy(e))throw Error(ne(200));return nN(t,e,null,r)};Qn.createRoot=function(t,e){if(!gy(t))throw Error(ne(299));var r=!1,i="",s=fI;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=fy(t,1,!1,null,null,r,!1,i,s),t[mi]=e.current,fu(t.nodeType===8?t.parentNode:t),new my(e)};Qn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=MT(e),t=t===null?null:t.stateNode,t};Qn.flushSync=function(t){return ra(t)};Qn.hydrate=function(t,e,r){if(!df(e))throw Error(ne(200));return hf(null,t,e,!0,r)};Qn.hydrateRoot=function(t,e,r){if(!gy(t))throw Error(ne(405));var i=r!=null&&r.hydratedSources||null,s=!1,a="",o=fI;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=hI(e,null,t,1,r??null,s,!1,a,o),t[mi]=e.current,fu(t),i)for(t=0;t<i.length;t++)r=i[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new cf(e)};Qn.render=function(t,e,r){if(!df(e))throw Error(ne(200));return hf(null,t,e,!1,r)};Qn.unmountComponentAtNode=function(t){if(!df(t))throw Error(ne(40));return t._reactRootContainer?(ra(function(){hf(null,null,t,!1,function(){t._reactRootContainer=null,t[mi]=null})}),!0):!1};Qn.unstable_batchedUpdates=uy;Qn.unstable_renderSubtreeIntoContainer=function(t,e,r,i){if(!df(r))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return hf(t,e,r,!1,i)};Qn.version="18.3.1-next-f1338f8080-20240426";function pI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pI)}catch(t){console.error(t)}}pI(),fT.exports=Qn;var vy=fT.exports;const oN=Uu(vy);var jw=vy;Dm.createRoot=jw.createRoot,Dm.hydrateRoot=jw.hydrateRoot;var yy={};Object.defineProperty(yy,"__esModule",{value:!0});yy.parse=pN;yy.serialize=mN;const lN=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,uN=/^[\u0021-\u003A\u003C-\u007E]*$/,cN=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,dN=/^[\u0020-\u003A\u003D-\u007E]*$/,hN=Object.prototype.toString,fN=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function pN(t,e){const r=new fN,i=t.length;if(i<2)return r;const s=(e==null?void 0:e.decode)||gN;let a=0;do{const o=t.indexOf("=",a);if(o===-1)break;const l=t.indexOf(";",a),u=l===-1?i:l;if(o>u){a=t.lastIndexOf(";",o-1)+1;continue}const c=Vw(t,a,o),h=Fw(t,o,c),f=t.slice(c,h);if(r[f]===void 0){let p=Vw(t,o+1,u),m=Fw(t,u,p);const w=s(t.slice(p,m));r[f]=w}a=u+1}while(a<i);return r}function Vw(t,e,r){do{const i=t.charCodeAt(e);if(i!==32&&i!==9)return e}while(++e<r);return r}function Fw(t,e,r){for(;e>r;){const i=t.charCodeAt(--e);if(i!==32&&i!==9)return e+1}return r}function mN(t,e,r){const i=(r==null?void 0:r.encode)||encodeURIComponent;if(!lN.test(t))throw new TypeError(`argument name is invalid: ${t}`);const s=i(e);if(!uN.test(s))throw new TypeError(`argument val is invalid: ${e}`);let a=t+"="+s;if(!r)return a;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);a+="; Max-Age="+r.maxAge}if(r.domain){if(!cN.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);a+="; Domain="+r.domain}if(r.path){if(!dN.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);a+="; Path="+r.path}if(r.expires){if(!vN(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.partitioned&&(a+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return a}function gN(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function vN(t){return hN.call(t)==="[object Date]"}/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Uw="popstate";function yN(t={}){function e(s,a){let{pathname:o="/",search:l="",hash:u=""}=fa(s.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Sg("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=s.location.href,c=u.indexOf("#");l=c===-1?u:u.slice(0,c)}return l+"#"+(typeof a=="string"?a:xu(a))}function i(s,a){Xn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return wN(e,r,i,t)}function mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Xn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _N(){return Math.random().toString(36).substring(2,10)}function Bw(t,e){return{usr:t.state,key:t.key,idx:e}}function Sg(t,e,r=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?fa(e):e,state:r,key:e&&e.key||i||_N()}}function xu({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function fa(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function wN(t,e,r,i={}){let{window:s=document.defaultView,v5Compat:a=!1}=i,o=s.history,l="POP",u=null,c=h();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function h(){return(o.state||{idx:null}).idx}function f(){l="POP";let D=h(),T=D==null?null:D-c;c=D,u&&u({action:l,location:A.location,delta:T})}function p(D,T){l="PUSH";let x=Sg(A.location,D,T);r&&r(x,D),c=h()+1;let b=Bw(x,c),P=A.createHref(x);try{o.pushState(b,"",P)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(P)}a&&u&&u({action:l,location:A.location,delta:1})}function m(D,T){l="REPLACE";let x=Sg(A.location,D,T);r&&r(x,D),c=h();let b=Bw(x,c),P=A.createHref(x);o.replaceState(b,"",P),a&&u&&u({action:l,location:A.location,delta:0})}function w(D){let T=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof D=="string"?D:xu(D);return x=x.replace(/ $/,"%20"),mt(T,`No window.location.(origin|href) available to create URL for href: ${x}`),new URL(x,T)}let A={get action(){return l},get location(){return t(s,o)},listen(D){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Uw,f),u=D,()=>{s.removeEventListener(Uw,f),u=null}},createHref(D){return e(s,D)},createURL:w,encodeLocation(D){let T=w(D);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:p,replace:m,go(D){return o.go(D)}};return A}function mI(t,e,r="/"){return bN(t,e,r,!1)}function bN(t,e,r,i){let s=typeof e=="string"?fa(e):e,a=fs(s.pathname||"/",r);if(a==null)return null;let o=gI(t);xN(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=NN(a);l=RN(o[u],c,i)}return l}function gI(t,e=[],r=[],i=""){let s=(a,o,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(mt(u.relativePath.startsWith(i),`Absolute route path "${u.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(i.length));let c=hi([i,u.relativePath]),h=r.concat(u);a.children&&a.children.length>0&&(mt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),gI(a.children,e,h,c)),!(a.path==null&&!a.index)&&e.push({path:c,score:AN(c,a.index),routesMeta:h})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let u of vI(a.path))s(a,o,u)}),e}function vI(t){let e=t.split("/");if(e.length===0)return[];let[r,...i]=e,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let o=vI(i.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function xN(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:PN(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var EN=/^:[\w-]+$/,TN=3,SN=2,IN=1,kN=10,CN=-2,zw=t=>t==="*";function AN(t,e){let r=t.split("/"),i=r.length;return r.some(zw)&&(i+=CN),e&&(i+=SN),r.filter(s=>!zw(s)).reduce((s,a)=>s+(EN.test(a)?TN:a===""?IN:kN),i)}function PN(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function RN(t,e,r=!1){let{routesMeta:i}=t,s={},a="/",o=[];for(let l=0;l<i.length;++l){let u=i[l],c=l===i.length-1,h=a==="/"?e:e.slice(a.length)||"/",f=ph({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),p=u.route;if(!f&&c&&r&&!i[i.length-1].route.index&&(f=ph({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:hi([a,f.pathname]),pathnameBase:jN(hi([a,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(a=hi([a,f.pathnameBase]))}return o}function ph(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,i]=DN(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:i.reduce((c,{paramName:h,isOptional:f},p)=>{if(h==="*"){let w=l[p]||"";o=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const m=l[p];return f&&!m?c[h]=void 0:c[h]=(m||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:o,pattern:t}}function DN(t,e=!1,r=!0){Xn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function NN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function fs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=t.charAt(r);return i&&i!=="/"?null:t.slice(r)||"/"}function MN(t,e="/"){let{pathname:r,search:i="",hash:s=""}=typeof t=="string"?fa(t):t;return{pathname:r?r.startsWith("/")?r:LN(r,e):e,search:VN(i),hash:FN(s)}}function LN(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function Hp(t,e,r,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ON(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function _y(t){let e=ON(t);return e.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase)}function wy(t,e,r,i=!1){let s;typeof t=="string"?s=fa(t):(s={...t},mt(!s.pathname||!s.pathname.includes("?"),Hp("?","pathname","search",s)),mt(!s.pathname||!s.pathname.includes("#"),Hp("#","pathname","hash",s)),mt(!s.search||!s.search.includes("#"),Hp("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=r;else{let f=e.length-1;if(!i&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}l=f>=0?e[f]:"/"}let u=MN(s,l),c=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}var hi=t=>t.join("/").replace(/\/\/+/g,"/"),jN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),VN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,FN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function UN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var yI=["POST","PUT","PATCH","DELETE"];new Set(yI);var BN=["GET",...yI];new Set(BN);var Oo=M.createContext(null);Oo.displayName="DataRouter";var ff=M.createContext(null);ff.displayName="DataRouterState";var _I=M.createContext({isTransitioning:!1});_I.displayName="ViewTransition";var zN=M.createContext(new Map);zN.displayName="Fetchers";var $N=M.createContext(null);$N.displayName="Await";var Ar=M.createContext(null);Ar.displayName="Navigation";var qu=M.createContext(null);qu.displayName="Location";var Xr=M.createContext({outlet:null,matches:[],isDataRoute:!1});Xr.displayName="Route";var by=M.createContext(null);by.displayName="RouteError";function HN(t,{relative:e}={}){mt(jo(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=M.useContext(Ar),{hash:s,pathname:a,search:o}=Gu(t,{relative:e}),l=a;return r!=="/"&&(l=a==="/"?r:hi([r,a])),i.createHref({pathname:l,search:o,hash:s})}function jo(){return M.useContext(qu)!=null}function fr(){return mt(jo(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(qu).location}var wI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bI(t){M.useContext(Ar).static||M.useLayoutEffect(t)}function Qr(){let{isDataRoute:t}=M.useContext(Xr);return t?r2():WN()}function WN(){mt(jo(),"useNavigate() may be used only in the context of a <Router> component.");let t=M.useContext(Oo),{basename:e,navigator:r}=M.useContext(Ar),{matches:i}=M.useContext(Xr),{pathname:s}=fr(),a=JSON.stringify(_y(i)),o=M.useRef(!1);return bI(()=>{o.current=!0}),M.useCallback((u,c={})=>{if(Xn(o.current,wI),!o.current)return;if(typeof u=="number"){r.go(u);return}let h=wy(u,JSON.parse(a),s,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:hi([e,h.pathname])),(c.replace?r.replace:r.push)(h,c.state,c)},[e,r,a,s,t])}M.createContext(null);function Gu(t,{relative:e}={}){let{matches:r}=M.useContext(Xr),{pathname:i}=fr(),s=JSON.stringify(_y(r));return M.useMemo(()=>wy(t,JSON.parse(s),i,e==="path"),[t,s,i,e])}function qN(t,e){return xI(t,e)}function xI(t,e,r,i){var x;mt(jo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:a}=M.useContext(Ar),{matches:o}=M.useContext(Xr),l=o[o.length-1],u=l?l.params:{},c=l?l.pathname:"/",h=l?l.pathnameBase:"/",f=l&&l.route;{let b=f&&f.path||"";EI(c,!f||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let p=fr(),m;if(e){let b=typeof e=="string"?fa(e):e;mt(h==="/"||((x=b.pathname)==null?void 0:x.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${b.pathname}" was given in the \`location\` prop.`),m=b}else m=p;let w=m.pathname||"/",A=w;if(h!=="/"){let b=h.replace(/^\//,"").split("/");A="/"+w.replace(/^\//,"").split("/").slice(b.length).join("/")}let D=!a&&r&&r.matches&&r.matches.length>0?r.matches:mI(t,{pathname:A});Xn(f||D!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),Xn(D==null||D[D.length-1].route.element!==void 0||D[D.length-1].route.Component!==void 0||D[D.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let T=QN(D&&D.map(b=>Object.assign({},b,{params:Object.assign({},u,b.params),pathname:hi([h,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?h:hi([h,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),o,r,i);return e&&T?M.createElement(qu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},T):T}function GN(){let t=n2(),e=UN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:a},"ErrorBoundary")," or"," ",M.createElement("code",{style:a},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),r?M.createElement("pre",{style:s},r):null,o)}var KN=M.createElement(GN,null),YN=class extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?M.createElement(Xr.Provider,{value:this.props.routeContext},M.createElement(by.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function XN({routeContext:t,match:e,children:r}){let i=M.useContext(Oo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(Xr.Provider,{value:t},r)}function QN(t,e=[],r=null,i=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,a=r==null?void 0:r.errors;if(a!=null){let u=s.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id])!==void 0);mt(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let o=!1,l=-1;if(r)for(let u=0;u<s.length;u++){let c=s[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(l=u),c.route.id){let{loaderData:h,errors:f}=r,p=c.route.loader&&!h.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||p){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((u,c,h)=>{let f,p=!1,m=null,w=null;r&&(f=a&&c.route.id?a[c.route.id]:void 0,m=c.route.errorElement||KN,o&&(l<0&&h===0?(EI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,w=null):l===h&&(p=!0,w=c.route.hydrateFallbackElement||null)));let A=e.concat(s.slice(0,h+1)),D=()=>{let T;return f?T=m:p?T=w:c.route.Component?T=M.createElement(c.route.Component,null):c.route.element?T=c.route.element:T=u,M.createElement(XN,{match:c,routeContext:{outlet:u,matches:A,isDataRoute:r!=null},children:T})};return r&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?M.createElement(YN,{location:r.location,revalidation:r.revalidation,component:m,error:f,children:D(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):D()},null)}function xy(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function JN(t){let e=M.useContext(Oo);return mt(e,xy(t)),e}function ZN(t){let e=M.useContext(ff);return mt(e,xy(t)),e}function e2(t){let e=M.useContext(Xr);return mt(e,xy(t)),e}function Ey(t){let e=e2(t),r=e.matches[e.matches.length-1];return mt(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function t2(){return Ey("useRouteId")}function n2(){var i;let t=M.useContext(by),e=ZN("useRouteError"),r=Ey("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[r]}function r2(){let{router:t}=JN("useNavigate"),e=Ey("useNavigate"),r=M.useRef(!1);return bI(()=>{r.current=!0}),M.useCallback(async(s,a={})=>{Xn(r.current,wI),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...a}))},[t,e])}var $w={};function EI(t,e,r){!e&&!$w[t]&&($w[t]=!0,Xn(!1,r))}M.memo(i2);function i2({routes:t,future:e,state:r}){return xI(t,void 0,r,e)}function TI({to:t,replace:e,state:r,relative:i}){mt(jo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=M.useContext(Ar);Xn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=M.useContext(Xr),{pathname:o}=fr(),l=Qr(),u=wy(t,_y(a),o,i==="path"),c=JSON.stringify(u);return M.useEffect(()=>{l(JSON.parse(c),{replace:e,state:r,relative:i})},[l,c,i,e,r]),null}function Mr(t){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function s2({basename:t="/",children:e=null,location:r,navigationType:i="POP",navigator:s,static:a=!1}){mt(!jo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=M.useMemo(()=>({basename:o,navigator:s,static:a,future:{}}),[o,s,a]);typeof r=="string"&&(r=fa(r));let{pathname:u="/",search:c="",hash:h="",state:f=null,key:p="default"}=r,m=M.useMemo(()=>{let w=fs(u,o);return w==null?null:{location:{pathname:w,search:c,hash:h,state:f,key:p},navigationType:i}},[o,u,c,h,f,p,i]);return Xn(m!=null,`<Router basename="${o}"> is not able to match the URL "${u}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:M.createElement(Ar.Provider,{value:l},M.createElement(qu.Provider,{children:e,value:m}))}function a2({children:t,location:e}){return qN(Ig(t),e)}function Ig(t,e=[]){let r=[];return M.Children.forEach(t,(i,s)=>{if(!M.isValidElement(i))return;let a=[...e,s];if(i.type===M.Fragment){r.push.apply(r,Ig(i.props.children,a));return}mt(i.type===Mr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Ig(i.props.children,a)),r.push(o)}),r}var Cd="get",Ad="application/x-www-form-urlencoded";function pf(t){return t!=null&&typeof t.tagName=="string"}function o2(t){return pf(t)&&t.tagName.toLowerCase()==="button"}function l2(t){return pf(t)&&t.tagName.toLowerCase()==="form"}function u2(t){return pf(t)&&t.tagName.toLowerCase()==="input"}function c2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function d2(t,e){return t.button===0&&(!e||e==="_self")&&!c2(t)}function kg(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let i=t[r];return e.concat(Array.isArray(i)?i.map(s=>[r,s]):[[r,i]])},[]))}function h2(t,e){let r=kg(t);return e&&e.forEach((i,s)=>{r.has(s)||e.getAll(s).forEach(a=>{r.append(s,a)})}),r}var Zc=null;function f2(){if(Zc===null)try{new FormData(document.createElement("form"),0),Zc=!1}catch{Zc=!0}return Zc}var p2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Wp(t){return t!=null&&!p2.has(t)?(Xn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ad}"`),null):t}function m2(t,e){let r,i,s,a,o;if(l2(t)){let l=t.getAttribute("action");i=l?fs(l,e):null,r=t.getAttribute("method")||Cd,s=Wp(t.getAttribute("enctype"))||Ad,a=new FormData(t)}else if(o2(t)||u2(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||l.getAttribute("action");if(i=u?fs(u,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||Cd,s=Wp(t.getAttribute("formenctype"))||Wp(l.getAttribute("enctype"))||Ad,a=new FormData(l,t),!f2()){let{name:c,type:h,value:f}=t;if(h==="image"){let p=c?`${c}.`:"";a.append(`${p}x`,"0"),a.append(`${p}y`,"0")}else c&&a.append(c,f)}}else{if(pf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Cd,i=null,s=Ad,o=t}return a&&s==="text/plain"&&(o=a,a=void 0),{action:i,method:r.toLowerCase(),encType:s,formData:a,body:o}}function Ty(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function g2(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function v2(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function y2(t,e,r){let i=await Promise.all(t.map(async s=>{let a=e.routes[s.route.id];if(a){let o=await g2(a,r);return o.links?o.links():[]}return[]}));return x2(i.flat(1).filter(v2).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Hw(t,e,r,i,s,a){let o=(u,c)=>r[c]?u.route.id!==r[c].route.id:!0,l=(u,c)=>{var h;return r[c].pathname!==u.pathname||((h=r[c].route.path)==null?void 0:h.endsWith("*"))&&r[c].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,c)=>o(u,c)||l(u,c)):a==="data"?e.filter((u,c)=>{var f;let h=i.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,c)||l(u,c))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function _2(t,e){return w2(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function w2(t){return[...new Set(t)]}function b2(t){let e={},r=Object.keys(t).sort();for(let i of r)e[i]=t[i];return e}function x2(t,e){let r=new Set;return new Set(e),t.reduce((i,s)=>{let a=JSON.stringify(b2(s));return r.has(a)||(r.add(a),i.push({key:a,link:s})),i},[])}function E2(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function T2(){let t=M.useContext(Oo);return Ty(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function S2(){let t=M.useContext(ff);return Ty(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Sy=M.createContext(void 0);Sy.displayName="FrameworkContext";function SI(){let t=M.useContext(Sy);return Ty(t,"You must render this element inside a <HydratedRouter> element"),t}function I2(t,e){let r=M.useContext(Sy),[i,s]=M.useState(!1),[a,o]=M.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:c,onMouseLeave:h,onTouchStart:f}=e,p=M.useRef(null);M.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let A=T=>{T.forEach(x=>{o(x.isIntersecting)})},D=new IntersectionObserver(A,{threshold:.5});return p.current&&D.observe(p.current),()=>{D.disconnect()}}},[t]),M.useEffect(()=>{if(i){let A=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(A)}}},[i]);let m=()=>{s(!0)},w=()=>{s(!1),o(!1)};return r?t!=="intent"?[a,p,{}]:[a,p,{onFocus:_l(l,m),onBlur:_l(u,w),onMouseEnter:_l(c,m),onMouseLeave:_l(h,w),onTouchStart:_l(f,m)}]:[!1,p,{}]}function _l(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function k2({page:t,...e}){let{router:r}=T2(),i=M.useMemo(()=>mI(r.routes,t,r.basename),[r.routes,t,r.basename]);return i?M.createElement(A2,{page:t,matches:i,...e}):null}function C2(t){let{manifest:e,routeModules:r}=SI(),[i,s]=M.useState([]);return M.useEffect(()=>{let a=!1;return y2(t,e,r).then(o=>{a||s(o)}),()=>{a=!0}},[t,e,r]),i}function A2({page:t,matches:e,...r}){let i=fr(),{manifest:s,routeModules:a}=SI(),{loaderData:o,matches:l}=S2(),u=M.useMemo(()=>Hw(t,e,l,s,i,"data"),[t,e,l,s,i]),c=M.useMemo(()=>Hw(t,e,l,s,i,"assets"),[t,e,l,s,i]),h=M.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let m=new Set,w=!1;if(e.forEach(D=>{var x;let T=s.routes[D.route.id];!T||!T.hasLoader||(!u.some(b=>b.route.id===D.route.id)&&D.route.id in o&&((x=a[D.route.id])!=null&&x.shouldRevalidate)||T.hasClientLoader?w=!0:m.add(D.route.id))}),m.size===0)return[];let A=E2(t);return w&&m.size>0&&A.searchParams.set("_routes",e.filter(D=>m.has(D.route.id)).map(D=>D.route.id).join(",")),[A.pathname+A.search]},[o,i,s,u,e,t,a]),f=M.useMemo(()=>_2(c,s),[c,s]),p=C2(c);return M.createElement(M.Fragment,null,h.map(m=>M.createElement("link",{key:m,rel:"prefetch",as:"fetch",href:m,...r})),f.map(m=>M.createElement("link",{key:m,rel:"modulepreload",href:m,...r})),p.map(({key:m,link:w})=>M.createElement("link",{key:m,...w})))}function P2(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var II=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{II&&(window.__reactRouterVersion="7.1.5")}catch{}function R2({basename:t,children:e,window:r}){let i=M.useRef();i.current==null&&(i.current=yN({window:r,v5Compat:!0}));let s=i.current,[a,o]=M.useState({action:s.action,location:s.location}),l=M.useCallback(u=>{M.startTransition(()=>o(u))},[o]);return M.useLayoutEffect(()=>s.listen(l),[s,l]),M.createElement(s2,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:s})}var kI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ws=M.forwardRef(function({onClick:e,discover:r="render",prefetch:i="none",relative:s,reloadDocument:a,replace:o,state:l,target:u,to:c,preventScrollReset:h,viewTransition:f,...p},m){let{basename:w}=M.useContext(Ar),A=typeof c=="string"&&kI.test(c),D,T=!1;if(typeof c=="string"&&A&&(D=c,II))try{let y=new URL(window.location.href),_=c.startsWith("//")?new URL(y.protocol+c):new URL(c),S=fs(_.pathname,w);_.origin===y.origin&&S!=null?c=S+_.search+_.hash:T=!0}catch{Xn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=HN(c,{relative:s}),[b,P,U]=I2(i,p),V=L2(c,{replace:o,state:l,target:u,preventScrollReset:h,relative:s,viewTransition:f});function R(y){e&&e(y),y.defaultPrevented||V(y)}let I=M.createElement("a",{...p,...U,href:D||x,onClick:T||a?e:R,ref:P2(m,P),target:u,"data-discover":!A&&r==="render"?"true":void 0});return b&&!A?M.createElement(M.Fragment,null,I,M.createElement(k2,{page:x})):I});Ws.displayName="Link";var D2=M.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:i="",end:s=!1,style:a,to:o,viewTransition:l,children:u,...c},h){let f=Gu(o,{relative:c.relative}),p=fr(),m=M.useContext(ff),{navigator:w,basename:A}=M.useContext(Ar),D=m!=null&&U2(f)&&l===!0,T=w.encodeLocation?w.encodeLocation(f).pathname:f.pathname,x=p.pathname,b=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;r||(x=x.toLowerCase(),b=b?b.toLowerCase():null,T=T.toLowerCase()),b&&A&&(b=fs(b,A)||b);const P=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let U=x===T||!s&&x.startsWith(T)&&x.charAt(P)==="/",V=b!=null&&(b===T||!s&&b.startsWith(T)&&b.charAt(T.length)==="/"),R={isActive:U,isPending:V,isTransitioning:D},I=U?e:void 0,y;typeof i=="function"?y=i(R):y=[i,U?"active":null,V?"pending":null,D?"transitioning":null].filter(Boolean).join(" ");let _=typeof a=="function"?a(R):a;return M.createElement(Ws,{...c,"aria-current":I,className:y,ref:h,style:_,to:o,viewTransition:l},typeof u=="function"?u(R):u)});D2.displayName="NavLink";var N2=M.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:i,replace:s,state:a,method:o=Cd,action:l,onSubmit:u,relative:c,preventScrollReset:h,viewTransition:f,...p},m)=>{let w=V2(),A=F2(l,{relative:c}),D=o.toLowerCase()==="get"?"get":"post",T=typeof l=="string"&&kI.test(l),x=b=>{if(u&&u(b),b.defaultPrevented)return;b.preventDefault();let P=b.nativeEvent.submitter,U=(P==null?void 0:P.getAttribute("formmethod"))||o;w(P||b.currentTarget,{fetcherKey:e,method:U,navigate:r,replace:s,state:a,relative:c,preventScrollReset:h,viewTransition:f})};return M.createElement("form",{ref:m,method:D,action:A,onSubmit:i?u:x,...p,"data-discover":!T&&t==="render"?"true":void 0})});N2.displayName="Form";function M2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function CI(t){let e=M.useContext(Oo);return mt(e,M2(t)),e}function L2(t,{target:e,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}={}){let l=Qr(),u=fr(),c=Gu(t,{relative:a});return M.useCallback(h=>{if(d2(h,e)){h.preventDefault();let f=r!==void 0?r:xu(u)===xu(c);l(t,{replace:f,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[u,l,c,r,i,e,t,s,a,o])}function Iy(t){Xn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=M.useRef(kg(t)),r=M.useRef(!1),i=fr(),s=M.useMemo(()=>h2(i.search,r.current?null:e.current),[i.search]),a=Qr(),o=M.useCallback((l,u)=>{const c=kg(typeof l=="function"?l(s):l);r.current=!0,a("?"+c,u)},[a,s]);return[s,o]}var O2=0,j2=()=>`__${String(++O2)}__`;function V2(){let{router:t}=CI("useSubmit"),{basename:e}=M.useContext(Ar),r=t2();return M.useCallback(async(i,s={})=>{let{action:a,method:o,encType:l,formData:u,body:c}=m2(i,e);if(s.navigate===!1){let h=s.fetcherKey||j2();await t.fetch(h,r,s.action||a,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await t.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function F2(t,{relative:e}={}){let{basename:r}=M.useContext(Ar),i=M.useContext(Xr);mt(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a={...Gu(t||".",{relative:e})},o=fr();if(t==null){a.search=o.search;let l=new URLSearchParams(a.search),u=l.getAll("index");if(u.some(h=>h==="")){l.delete("index"),u.filter(f=>f).forEach(f=>l.append("index",f));let h=l.toString();a.search=h?`?${h}`:""}}return(!t||t===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:hi([r,a.pathname])),xu(a)}function U2(t,e={}){let r=M.useContext(_I);mt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=CI("useViewTransitionState"),s=Gu(t,{relative:e.relative});if(!r.isTransitioning)return!1;let a=fs(r.currentLocation.pathname,i)||r.currentLocation.pathname,o=fs(r.nextLocation.pathname,i)||r.nextLocation.pathname;return ph(s.pathname,o)!=null||ph(s.pathname,a)!=null}new TextEncoder;var Ww={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AI=function(t){const e=[];let r=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},B2=function(t){const e=[];let r=0,i=0;for(;r<t.length;){const s=t[r++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[r++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[r++],o=t[r++],l=t[r++],u=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const a=t[r++],o=t[r++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},PI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,h=a>>2,f=(a&3)<<4|l>>4;let p=(l&15)<<2|c>>6,m=c&63;u||(m=64,o||(p=64)),i.push(r[h],r[f],r[p],r[m])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(AI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):B2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const a=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,a==null||l==null||c==null||f==null)throw new z2;const p=a<<2|l>>4;if(i.push(p),c!==64){const m=l<<4&240|c>>2;if(i.push(m),f!==64){const w=c<<6&192|f;i.push(w)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class z2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $2=function(t){const e=AI(t);return PI.encodeByteArray(e,!0)},mh=function(t){return $2(t).replace(/\./g,"")},RI=function(t){try{return PI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2=()=>H2().__FIREBASE_DEFAULTS__,q2=()=>{if(typeof process>"u"||typeof Ww>"u")return;const t=Ww.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},G2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&RI(t[1]);return e&&JSON.parse(e)},mf=()=>{try{return W2()||q2()||G2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},DI=t=>{var e,r;return(r=(e=mf())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},K2=t=>{const e=DI(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),i]:[e.substring(0,r),i]},NI=()=>{var t;return(t=mf())===null||t===void 0?void 0:t.config},MI=t=>{var e;return(e=mf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,i)=>{r?this.reject(r):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[mh(JSON.stringify(r)),mh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Q2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function J2(){var t;const e=(t=mf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Z2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function eM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function tM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function nM(){const t=gn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function rM(){return!J2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function iM(){try{return typeof indexedDB=="object"}catch{return!1}}function sM(){return new Promise((t,e)=>{try{let r=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aM="FirebaseError";class Si extends Error{constructor(e,r,i){super(r),this.code=e,this.customData=i,this.name=aM,Object.setPrototypeOf(this,Si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ku.prototype.create)}}class Ku{constructor(e,r,i){this.service=e,this.serviceName=r,this.errors=i}create(e,...r){const i=r[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?oM(a,i):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Si(s,l,i)}}function oM(t,e){return t.replace(lM,(r,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const lM=/\{\$([^}]+)}/g;function uM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function gh(t,e){if(t===e)return!0;const r=Object.keys(t),i=Object.keys(e);for(const s of r){if(!i.includes(s))return!1;const a=t[s],o=e[s];if(qw(a)&&qw(o)){if(!gh(a,o))return!1}else if(a!==o)return!1}for(const s of i)if(!r.includes(s))return!1;return!0}function qw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(t){const e=[];for(const[r,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Dl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Nl(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function cM(t,e){const r=new dM(t,e);return r.subscribe.bind(r)}class dM{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,i){let s;if(e===void 0&&r===void 0&&i===void 0)throw new Error("Missing Observer.");hM(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:i},s.next===void 0&&(s.next=qp),s.error===void 0&&(s.error=qp),s.complete===void 0&&(s.complete=qp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hM(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function qp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t){return t&&t._delegate?t._delegate:t}class ia{constructor(e,r,i){this.name=e,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fM=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const i=new Y2;if(this.instancesDeferred.set(r,i),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mM(e))try{this.getOrInitializeService({instanceIdentifier:zs})}catch{}for(const[r,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=zs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zs){return this.instances.has(e)}getOptions(e=zs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:r});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);i===l&&o.resolve(s)}return s}onInit(e,r){var i;const s=this.normalizeInstanceIdentifier(r),a=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&e(o,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const i=this.onInitCallbacks.get(r);if(i)for(const s of i)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:pM(e),options:r}),this.instances.set(e,i),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=zs){return this.component?this.component.multipleInstances?e:zs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function pM(t){return t===zs?void 0:t}function mM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new fM(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Le||(Le={}));const vM={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},yM=Le.INFO,_M={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},wM=(t,e,...r)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=_M[e];if(s)console[s](`[${i}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class ky{constructor(e){this.name=e,this._logLevel=yM,this._logHandler=wM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?vM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const bM=(t,e)=>e.some(r=>t instanceof r);let Gw,Kw;function xM(){return Gw||(Gw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function EM(){return Kw||(Kw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const LI=new WeakMap,Cg=new WeakMap,OI=new WeakMap,Gp=new WeakMap,Cy=new WeakMap;function TM(t){const e=new Promise((r,i)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(ns(t.result)),s()},o=()=>{i(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&LI.set(r,t)}).catch(()=>{}),Cy.set(e,t),e}function SM(t){if(Cg.has(t))return;const e=new Promise((r,i)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),s()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Cg.set(t,e)}let Ag={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Cg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||OI.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ns(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function IM(t){Ag=t(Ag)}function kM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const i=t.call(Kp(this),e,...r);return OI.set(i,e.sort?e.sort():[e]),ns(i)}:EM().includes(t)?function(...e){return t.apply(Kp(this),e),ns(LI.get(this))}:function(...e){return ns(t.apply(Kp(this),e))}}function CM(t){return typeof t=="function"?kM(t):(t instanceof IDBTransaction&&SM(t),bM(t,xM())?new Proxy(t,Ag):t)}function ns(t){if(t instanceof IDBRequest)return TM(t);if(Gp.has(t))return Gp.get(t);const e=CM(t);return e!==t&&(Gp.set(t,e),Cy.set(e,t)),e}const Kp=t=>Cy.get(t);function AM(t,e,{blocked:r,upgrade:i,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=ns(o);return i&&o.addEventListener("upgradeneeded",u=>{i(ns(o.result),u.oldVersion,u.newVersion,ns(o.transaction),u)}),r&&o.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{a&&u.addEventListener("close",()=>a()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const PM=["get","getKey","getAll","getAllKeys","count"],RM=["put","add","delete","clear"],Yp=new Map;function Yw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Yp.get(e))return Yp.get(e);const r=e.replace(/FromIndex$/,""),i=e!==r,s=RM.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(s||PM.includes(r)))return;const a=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[r](...l),s&&u.done]))[0]};return Yp.set(e,a),a}IM(t=>({...t,get:(e,r,i)=>Yw(e,r)||t.get(e,r,i),has:(e,r)=>!!Yw(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(NM(r)){const i=r.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(r=>r).join(" ")}}function NM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Pg="@firebase/app",Xw="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=new ky("@firebase/app"),MM="@firebase/app-compat",LM="@firebase/analytics-compat",OM="@firebase/analytics",jM="@firebase/app-check-compat",VM="@firebase/app-check",FM="@firebase/auth",UM="@firebase/auth-compat",BM="@firebase/database",zM="@firebase/data-connect",$M="@firebase/database-compat",HM="@firebase/functions",WM="@firebase/functions-compat",qM="@firebase/installations",GM="@firebase/installations-compat",KM="@firebase/messaging",YM="@firebase/messaging-compat",XM="@firebase/performance",QM="@firebase/performance-compat",JM="@firebase/remote-config",ZM="@firebase/remote-config-compat",eL="@firebase/storage",tL="@firebase/storage-compat",nL="@firebase/firestore",rL="@firebase/vertexai",iL="@firebase/firestore-compat",sL="firebase",aL="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rg="[DEFAULT]",oL={[Pg]:"fire-core",[MM]:"fire-core-compat",[OM]:"fire-analytics",[LM]:"fire-analytics-compat",[VM]:"fire-app-check",[jM]:"fire-app-check-compat",[FM]:"fire-auth",[UM]:"fire-auth-compat",[BM]:"fire-rtdb",[zM]:"fire-data-connect",[$M]:"fire-rtdb-compat",[HM]:"fire-fn",[WM]:"fire-fn-compat",[qM]:"fire-iid",[GM]:"fire-iid-compat",[KM]:"fire-fcm",[YM]:"fire-fcm-compat",[XM]:"fire-perf",[QM]:"fire-perf-compat",[JM]:"fire-rc",[ZM]:"fire-rc-compat",[eL]:"fire-gcs",[tL]:"fire-gcs-compat",[nL]:"fire-fst",[iL]:"fire-fst-compat",[rL]:"fire-vertex","fire-js":"fire-js",[sL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh=new Map,lL=new Map,Dg=new Map;function Qw(t,e){try{t.container.addComponent(e)}catch(r){yi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function go(t){const e=t.name;if(Dg.has(e))return yi.debug(`There were multiple attempts to register component ${e}.`),!1;Dg.set(e,t);for(const r of vh.values())Qw(r,t);for(const r of lL.values())Qw(r,t);return!0}function Ay(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Er(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rs=new Ku("app","Firebase",uL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e,r,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vo=aL;function jI(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Rg,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw rs.create("bad-app-name",{appName:String(s)});if(r||(r=NI()),!r)throw rs.create("no-options");const a=vh.get(s);if(a){if(gh(r,a.options)&&gh(i,a.config))return a;throw rs.create("duplicate-app",{appName:s})}const o=new gM(s);for(const u of Dg.values())o.addComponent(u);const l=new cL(r,i,o);return vh.set(s,l),l}function VI(t=Rg){const e=vh.get(t);if(!e&&t===Rg&&NI())return jI();if(!e)throw rs.create("no-app",{appName:t});return e}function is(t,e,r){var i;let s=(i=oL[t])!==null&&i!==void 0?i:t;r&&(s+=`-${r}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${s}" with version "${e}":`];a&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yi.warn(l.join(" "));return}go(new ia(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL="firebase-heartbeat-database",hL=1,Eu="firebase-heartbeat-store";let Xp=null;function FI(){return Xp||(Xp=AM(dL,hL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Eu)}catch(r){console.warn(r)}}}}).catch(t=>{throw rs.create("idb-open",{originalErrorMessage:t.message})})),Xp}async function fL(t){try{const r=(await FI()).transaction(Eu),i=await r.objectStore(Eu).get(UI(t));return await r.done,i}catch(e){if(e instanceof Si)yi.warn(e.message);else{const r=rs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yi.warn(r.message)}}}async function Jw(t,e){try{const i=(await FI()).transaction(Eu,"readwrite");await i.objectStore(Eu).put(e,UI(t)),await i.done}catch(r){if(r instanceof Si)yi.warn(r.message);else{const i=rs.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});yi.warn(i.message)}}}function UI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=1024,mL=30;class gL{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new yL(r),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Zw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>mL){const o=_L(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){yi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Zw(),{heartbeatsToSend:i,unsentEntries:s}=vL(this._heartbeatsCache.heartbeats),a=mh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return yi.warn(r),""}}}function Zw(){return new Date().toISOString().substring(0,10)}function vL(t,e=pL){const r=[];let i=t.slice();for(const s of t){const a=r.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),eb(r)>e){a.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),eb(r)>e){r.pop();break}i=i.slice(1)}return{heartbeatsToSend:r,unsentEntries:i}}class yL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return iM()?sM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await fL(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jw(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jw(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function eb(t){return mh(JSON.stringify({version:2,heartbeats:t})).length}function _L(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let i=1;i<t.length;i++)t[i].date<r&&(r=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wL(t){go(new ia("platform-logger",e=>new DM(e),"PRIVATE")),go(new ia("heartbeat",e=>new gL(e),"PRIVATE")),is(Pg,Xw,t),is(Pg,Xw,"esm2017"),is("fire-js","")}wL("");function Py(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r}function BI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const bL=BI,zI=new Ku("auth","Firebase",BI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=new ky("@firebase/auth");function xL(t,...e){yh.logLevel<=Le.WARN&&yh.warn(`Auth (${Vo}): ${t}`,...e)}function Pd(t,...e){yh.logLevel<=Le.ERROR&&yh.error(`Auth (${Vo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(t,...e){throw Ry(t,...e)}function Br(t,...e){return Ry(t,...e)}function $I(t,e,r){const i=Object.assign(Object.assign({},bL()),{[e]:r});return new Ku("auth","Firebase",i).create(e,{appName:t.name})}function ss(t){return $I(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ry(t,...e){if(typeof t!="string"){const r=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(r,...i)}return zI.create(t,...e)}function Ee(t,e,...r){if(!t)throw Ry(e,...r)}function li(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Pd(e),new Error(e)}function _i(t,e){t||li(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function EL(){return tb()==="http:"||tb()==="https:"}function tb(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(EL()||eM()||"connection"in navigator)?navigator.onLine:!0}function SL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,r){this.shortDelay=e,this.longDelay=r,_i(r>e,"Short delay should be less than long delay!"),this.isMobile=Q2()||tM()}get(){return TL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dy(t,e){_i(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{static initialize(e,r,i){this.fetchImpl=e,r&&(this.headersImpl=r),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;li("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;li("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;li("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=new Xu(3e4,6e4);function pa(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ts(t,e,r,i,s={}){return WI(t,s,async()=>{let a={},o={};i&&(e==="GET"?o=i:a={body:JSON.stringify(i)});const l=Yu(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},a);return Z2()||(c.referrerPolicy="no-referrer"),HI.fetch()(qI(t,t.config.apiHost,r,l),c)})}async function WI(t,e,r){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},IL),e);try{const s=new AL(t),a=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw ed(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ed(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw ed(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw ed(t,"user-disabled",o);const h=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw $I(t,h,c);Cr(t,h)}}catch(s){if(s instanceof Si)throw s;Cr(t,"network-request-failed",{message:String(s)})}}async function gf(t,e,r,i,s={}){const a=await Ts(t,e,r,i,s);return"mfaPendingCredential"in a&&Cr(t,"multi-factor-auth-required",{_serverResponse:a}),a}function qI(t,e,r,i){const s=`${e}${r}?${i}`;return t.config.emulator?Dy(t.config,s):`${t.config.apiScheme}://${s}`}function CL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class AL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,i)=>{this.timer=setTimeout(()=>i(Br(this.auth,"network-request-failed")),kL.get())})}}function ed(t,e,r){const i={appName:t.name};r.email&&(i.email=r.email),r.phoneNumber&&(i.phoneNumber=r.phoneNumber);const s=Br(t,e,i);return s.customData._tokenResponse=r,s}function nb(t){return t!==void 0&&t.enterprise!==void 0}class PL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return CL(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function RL(t,e){return Ts(t,"GET","/v2/recaptchaConfig",pa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DL(t,e){return Ts(t,"POST","/v1/accounts:delete",e)}async function GI(t,e){return Ts(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NL(t,e=!1){const r=tn(t),i=await r.getIdToken(e),s=Ny(i);Ee(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:Yl(Qp(s.auth_time)),issuedAtTime:Yl(Qp(s.iat)),expirationTime:Yl(Qp(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Qp(t){return Number(t)*1e3}function Ny(t){const[e,r,i]=t.split(".");if(e===void 0||r===void 0||i===void 0)return Pd("JWT malformed, contained fewer than 3 sections"),null;try{const s=RI(r);return s?JSON.parse(s):(Pd("Failed to decode base64 JWT payload"),null)}catch(s){return Pd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function rb(t){const e=Ny(t);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tu(t,e,r=!1){if(r)return e;try{return await e}catch(i){throw i instanceof Si&&ML(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function ML({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Yl(this.lastLoginAt),this.creationTime=Yl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _h(t){var e;const r=t.auth,i=await t.getIdToken(),s=await Tu(t,GI(r,{idToken:i}));Ee(s==null?void 0:s.users.length,r,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?KI(a.providerUserInfo):[],l=jL(t.providerData,o),u=t.isAnonymous,c=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),h=u?c:!1,f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Mg(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function OL(t){const e=tn(t);await _h(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jL(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function KI(t){return t.map(e=>{var{providerId:r}=e,i=Py(e,["providerId"]);return{providerId:r,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VL(t,e){const r=await WI(t,{},async()=>{const i=Yu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=qI(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",HI.fetch()(o,{method:"POST",headers:l,body:i})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function FL(t,e){return Ts(t,"POST","/v2/accounts:revokeToken",pa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):rb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const r=rb(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:i,refreshToken:s,expiresIn:a}=await VL(e,r);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,r,i){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,r){const{refreshToken:i,accessToken:s,expirationTime:a}=r,o=new ro;return i&&(Ee(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),s&&(Ee(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(Ee(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ro,this.toJSON())}_performRefresh(){return li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(t,e){Ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ui{constructor(e){var{uid:r,auth:i,stsTokenManager:s}=e,a=Py(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new LL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Mg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await Tu(this,this.stsTokenManager.getToken(this.auth,e));return Ee(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return NL(this,e)}reload(){return OL(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new ui(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),r&&await _h(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Er(this.auth.app))return Promise.reject(ss(this.auth));const e=await this.getIdToken();return await Tu(this,DL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var i,s,a,o,l,u,c,h;const f=(i=r.displayName)!==null&&i!==void 0?i:void 0,p=(s=r.email)!==null&&s!==void 0?s:void 0,m=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,w=(o=r.photoURL)!==null&&o!==void 0?o:void 0,A=(l=r.tenantId)!==null&&l!==void 0?l:void 0,D=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,T=(c=r.createdAt)!==null&&c!==void 0?c:void 0,x=(h=r.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:b,emailVerified:P,isAnonymous:U,providerData:V,stsTokenManager:R}=r;Ee(b&&R,e,"internal-error");const I=ro.fromJSON(this.name,R);Ee(typeof b=="string",e,"internal-error"),Mi(f,e.name),Mi(p,e.name),Ee(typeof P=="boolean",e,"internal-error"),Ee(typeof U=="boolean",e,"internal-error"),Mi(m,e.name),Mi(w,e.name),Mi(A,e.name),Mi(D,e.name),Mi(T,e.name),Mi(x,e.name);const y=new ui({uid:b,auth:e,email:p,emailVerified:P,displayName:f,isAnonymous:U,photoURL:w,phoneNumber:m,tenantId:A,stsTokenManager:I,createdAt:T,lastLoginAt:x});return V&&Array.isArray(V)&&(y.providerData=V.map(_=>Object.assign({},_))),D&&(y._redirectEventId=D),y}static async _fromIdTokenResponse(e,r,i=!1){const s=new ro;s.updateFromServerResponse(r);const a=new ui({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await _h(a),a}static async _fromGetAccountInfoResponse(e,r,i){const s=r.users[0];Ee(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?KI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new ro;l.updateFromIdToken(i);const u=new ui({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Mg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=new Map;function ci(t){_i(t instanceof Function,"Expected a class definition");let e=ib.get(t);return e?(_i(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ib.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}YI.type="NONE";const sb=YI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rd(t,e,r){return`firebase:${t}:${e}:${r}`}class io{constructor(e,r,i){this.persistence=e,this.auth=r,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=Rd(this.userKey,s.apiKey,a),this.fullPersistenceKey=Rd("persistence",s.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ui._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,i="authUser"){if(!r.length)return new io(ci(sb),e,i);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let a=s[0]||ci(sb);const o=Rd(i,e.config.apiKey,e.name);let l=null;for(const c of r)try{const h=await c._get(o);if(h){const f=ui._fromJSON(e,h);c!==a&&(l=f),a=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new io(a,e,i):(a=u[0],l&&await a._set(o,l.toJSON()),await Promise.all(r.map(async c=>{if(c!==a)try{await c._remove(o)}catch{}})),new io(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ZI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(t1(e))return"Blackberry";if(n1(e))return"Webos";if(QI(e))return"Safari";if((e.includes("chrome/")||JI(e))&&!e.includes("edge/"))return"Chrome";if(e1(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(r);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function XI(t=gn()){return/firefox\//i.test(t)}function QI(t=gn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function JI(t=gn()){return/crios\//i.test(t)}function ZI(t=gn()){return/iemobile/i.test(t)}function e1(t=gn()){return/android/i.test(t)}function t1(t=gn()){return/blackberry/i.test(t)}function n1(t=gn()){return/webos/i.test(t)}function My(t=gn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function UL(t=gn()){var e;return My(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function BL(){return nM()&&document.documentMode===10}function r1(t=gn()){return My(t)||e1(t)||n1(t)||t1(t)||/windows phone/i.test(t)||ZI(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i1(t,e=[]){let r;switch(t){case"Browser":r=ab(gn());break;case"Worker":r=`${ab(gn())}-${t}`;break;default:r=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Vo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const i=a=>new Promise((o,l)=>{try{const u=e(a);o(u)}catch(u){l(u)}});i.onAbort=r,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const i of this.queue)await i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $L(t,e={}){return Ts(t,"GET","/v2/passwordPolicy",pa(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL=6;class WL{constructor(e){var r,i,s,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:HL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,i,s,a,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,r){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(r.meetsMinPasswordLength=e.length>=i),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,r,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qL{constructor(e,r,i,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ob(this),this.idTokenSubscription=new ob(this),this.beforeStateQueue=new zL(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=ci(r)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await io.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await GI(this,{idToken:e}),i=await ui._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Er(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await _h(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Er(this.app))return Promise.reject(ss(this));const r=e?tn(e):null;return r&&Ee(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Er(this.app)?Promise.reject(ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Er(this.app)?Promise.reject(ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ci(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $L(this),r=new WL(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ku("auth","Firebase",e())}onAuthStateChanged(e,r,i){return this.registerStateListener(this.authStateSubscription,e,r,i)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,i){return this.registerStateListener(this.idTokenSubscription,e,r,i)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(i.tenantId=this.tenantId),await FL(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const i=await this.getOrInitRedirectPersistenceManager(r);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&ci(e)||this._popupRedirectResolver;Ee(r,this,"argument-error"),this.redirectPersistenceManager=await io.create(this,[ci(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,i;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,i,s){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,i,s);return()=>{o=!0,u()}}else{const u=e.addObserver(r);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=i1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(r["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;if(Er(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&xL(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Fo(t){return tn(t)}class ob{constructor(e){this.auth=e,this.observer=null,this.addObserver=cM(r=>this.observer=r)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GL(t){vf=t}function s1(t){return vf.loadJS(t)}function KL(){return vf.recaptchaEnterpriseScript}function YL(){return vf.gapiScript}function XL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class QL{constructor(){this.enterprise=new JL}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class JL{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const ZL="recaptcha-enterprise",a1="NO_RECAPTCHA";class eO{constructor(e){this.type=ZL,this.auth=Fo(e)}async verify(e="verify",r=!1){async function i(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{RL(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new PL(u);return a.tenantId==null?a._agentRecaptchaConfig=c:a._tenantRecaptchaConfigs[a.tenantId]=c,o(c.siteKey)}}).catch(u=>{l(u)})})}function s(a,o,l){const u=window.grecaptcha;nb(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(c=>{o(c)}).catch(()=>{o(a1)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new QL().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{i(this.auth).then(l=>{if(!r&&nb(window.grecaptcha))s(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=KL();u.length!==0&&(u+=l),s1(u).then(()=>{s(l,a,o)}).catch(c=>{o(c)})}}).catch(l=>{o(l)})})}}async function lb(t,e,r,i=!1,s=!1){const a=new eO(t);let o;if(s)o=a1;else try{o=await a.verify(r)}catch{o=await a.verify(r,!0)}const l=Object.assign({},e);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,c=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function ub(t,e,r,i,s){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await lb(t,e,r,r==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await lb(t,e,r,r==="getOobCode");return i(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(t,e){const r=Ay(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),a=r.getOptions();if(gh(a,e??{}))return s;Cr(s,"already-initialized")}return r.initialize({options:e})}function nO(t,e){const r=(e==null?void 0:e.persistence)||[],i=(Array.isArray(r)?r:[r]).map(ci);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function rO(t,e,r){const i=Fo(t);Ee(i._canInitEmulator,i,"emulator-config-failed"),Ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=o1(e),{host:o,port:l}=iO(e),u=l===null?"":`:${l}`;i.config.emulator={url:`${a}//${o}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),sO()}function o1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function iO(t){const e=o1(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const i=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:cb(i.substr(a.length+1))}}else{const[a,o]=i.split(":");return{host:a,port:cb(o)}}}function cb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function sO(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return li("not implemented")}_getIdTokenResponse(e){return li("not implemented")}_linkToIdToken(e,r){return li("not implemented")}_getReauthenticationResolver(e){return li("not implemented")}}async function aO(t,e){return Ts(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oO(t,e){return gf(t,"POST","/v1/accounts:signInWithPassword",pa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lO(t,e){return gf(t,"POST","/v1/accounts:signInWithEmailLink",pa(t,e))}async function uO(t,e){return gf(t,"POST","/v1/accounts:signInWithEmailLink",pa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su extends Ly{constructor(e,r,i,s=null){super("password",i),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new Su(e,r,"password")}static _fromEmailAndCode(e,r,i=null){return new Su(e,r,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ub(e,r,"signInWithPassword",oO);case"emailLink":return lO(e,{email:this._email,oobCode:this._password});default:Cr(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const i={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ub(e,i,"signUpPassword",aO);case"emailLink":return uO(e,{idToken:r,email:this._email,oobCode:this._password});default:Cr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function so(t,e){return gf(t,"POST","/v1/accounts:signInWithIdp",pa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO="http://localhost";class sa extends Ly{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new sa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Cr("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=r,a=Py(r,["providerId","signInMethod"]);if(!i||!s)return null;const o=new sa(i,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return so(e,r)}_linkToIdToken(e,r){const i=this.buildRequest();return i.idToken=r,so(e,i)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,so(e,r)}buildRequest(){const e={requestUri:cO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Yu(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function hO(t){const e=Dl(Nl(t)).link,r=e?Dl(Nl(e)).deep_link_id:null,i=Dl(Nl(t)).deep_link_id;return(i?Dl(Nl(i)).link:null)||i||r||e||t}class Oy{constructor(e){var r,i,s,a,o,l;const u=Dl(Nl(e)),c=(r=u.apiKey)!==null&&r!==void 0?r:null,h=(i=u.oobCode)!==null&&i!==void 0?i:null,f=dO((s=u.mode)!==null&&s!==void 0?s:null);Ee(c&&h&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=h,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=hO(e);try{return new Oy(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(){this.providerId=Uo.PROVIDER_ID}static credential(e,r){return Su._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const i=Oy.parseLink(r);return Ee(i,"argument-error"),Su._fromEmailAndCode(e,i.code,i.tenantId)}}Uo.PROVIDER_ID="password";Uo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Uo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu extends l1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends Qu{constructor(){super("facebook.com")}static credential(e){return sa._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bi.credential(e.oauthAccessToken)}catch{return null}}}Bi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends Qu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return sa._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:i}=e;if(!r&&!i)return null;try{return zi.credential(r,i)}catch{return null}}}zi.GOOGLE_SIGN_IN_METHOD="google.com";zi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends Qu{constructor(){super("github.com")}static credential(e){return sa._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return $i.credential(e.oauthAccessToken)}catch{return null}}}$i.GITHUB_SIGN_IN_METHOD="github.com";$i.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Qu{constructor(){super("twitter.com")}static credential(e,r){return sa._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:i}=e;if(!r||!i)return null;try{return Hi.credential(r,i)}catch{return null}}}Hi.TWITTER_SIGN_IN_METHOD="twitter.com";Hi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,i,s=!1){const a=await ui._fromIdTokenResponse(e,i,s),o=db(i);return new vo({user:a,providerId:o,_tokenResponse:i,operationType:r})}static async _forOperation(e,r,i){await e._updateTokensIfNecessary(i,!0);const s=db(i);return new vo({user:e,providerId:s,_tokenResponse:i,operationType:r})}}function db(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh extends Si{constructor(e,r,i,s){var a;super(r.code,r.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,wh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,r,i,s){return new wh(e,r,i,s)}}function u1(t,e,r,i){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?wh._fromErrorAndOperation(t,a,e,i):a})}async function fO(t,e,r=!1){const i=await Tu(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return vo._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pO(t,e,r=!1){const{auth:i}=t;if(Er(i.app))return Promise.reject(ss(i));const s="reauthenticate";try{const a=await Tu(t,u1(i,s,e,t),r);Ee(a.idToken,i,"internal-error");const o=Ny(a.idToken);Ee(o,i,"internal-error");const{sub:l}=o;return Ee(t.uid===l,i,"user-mismatch"),vo._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Cr(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c1(t,e,r=!1){if(Er(t.app))return Promise.reject(ss(t));const i="signIn",s=await u1(t,i,e),a=await vo._fromIdTokenResponse(t,i,s);return r||await t._updateCurrentUser(a.user),a}async function mO(t,e){return c1(Fo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gO(t){const e=Fo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function vO(t,e,r){return Er(t.app)?Promise.reject(ss(t)):mO(tn(t),Uo.credential(e,r)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&gO(t),i})}function yO(t,e,r,i){return tn(t).onIdTokenChanged(e,r,i)}function _O(t,e,r){return tn(t).beforeAuthStateChanged(e,r)}function wO(t,e,r,i){return tn(t).onAuthStateChanged(e,r,i)}function bO(t){return tn(t).signOut()}const bh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(bh,"1"),this.storage.removeItem(bh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xO=1e3,EO=10;class h1 extends d1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=r1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&e(r,s,i)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const i=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(i);!r&&this.localCache[i]===o||this.notifyListeners(i,o)},a=this.storage.getItem(i);BL()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,EO):s()}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:i}),!0)})},xO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}h1.type="LOCAL";const TO=h1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1 extends d1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}f1.type="SESSION";const p1=f1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const i=new yf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:i,eventType:s,data:a}=r.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(o).map(async c=>c(r.origin,a)),u=await SO(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jy(t="",e=10){let r="";for(let i=0;i<e;i++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,u)=>{const c=jy("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(p.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(){return window}function kO(t){zr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(){return typeof zr().WorkerGlobalScope<"u"&&typeof zr().importScripts=="function"}async function CO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function PO(){return m1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g1="firebaseLocalStorageDb",RO=1,xh="firebaseLocalStorage",v1="fbase_key";class Ju{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function _f(t,e){return t.transaction([xh],e?"readwrite":"readonly").objectStore(xh)}function DO(){const t=indexedDB.deleteDatabase(g1);return new Ju(t).toPromise()}function Lg(){const t=indexedDB.open(g1,RO);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(xh,{keyPath:v1})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(xh)?e(i):(i.close(),await DO(),e(await Lg()))})})}async function hb(t,e,r){const i=_f(t,!0).put({[v1]:e,value:r});return new Ju(i).toPromise()}async function NO(t,e){const r=_f(t,!1).get(e),i=await new Ju(r).toPromise();return i===void 0?null:i.value}function fb(t,e){const r=_f(t,!0).delete(e);return new Ju(r).toPromise()}const MO=800,LO=3;class y1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lg(),this.db)}async _withRetries(e){let r=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(r++>LO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return m1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yf._getInstance(PO()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await CO(),!this.activeServiceWorker)return;this.sender=new IO(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lg();return await hb(e,bh,"1"),await fb(e,bh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>hb(i,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(i=>NO(i,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>fb(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=_f(s,!1).getAll();return new Ju(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),MO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}y1.type="LOCAL";const OO=y1;new Xu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(t,e){return e?ci(e):(Ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy extends Ly{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return so(e,this._buildIdpRequest())}_linkToIdToken(e,r){return so(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return so(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function VO(t){return c1(t.auth,new Vy(t),t.bypassAuthState)}function FO(t){const{auth:e,user:r}=t;return Ee(r,e,"internal-error"),pO(r,new Vy(t),t.bypassAuthState)}async function UO(t){const{auth:e,user:r}=t;return Ee(r,e,"internal-error"),fO(r,new Vy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,r,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:i,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:r,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VO;case"linkViaPopup":case"linkViaRedirect":return UO;case"reauthViaPopup":case"reauthViaRedirect":return FO;default:Cr(this.auth,"internal-error")}}resolve(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=new Xu(2e3,1e4);class Xa extends _1{constructor(e,r,i,s,a){super(e,r,s,a),this.provider=i,this.authWindow=null,this.pollId=null,Xa.currentPopupAction&&Xa.currentPopupAction.cancel(),Xa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){_i(this.filter.length===1,"Popup operations only handle one event");const e=jy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BO.get())};e()}}Xa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO="pendingRedirect",Dd=new Map;class $O extends _1{constructor(e,r,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,i),this.eventId=null}async execute(){let e=Dd.get(this.auth._key());if(!e){try{const i=await HO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(r){e=()=>Promise.reject(r)}Dd.set(this.auth._key(),e)}return this.bypassAuthState||Dd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HO(t,e){const r=GO(e),i=qO(t);if(!await i._isAvailable())return!1;const s=await i._get(r)==="true";return await i._remove(r),s}function WO(t,e){Dd.set(t._key(),e)}function qO(t){return ci(t._redirectPersistence)}function GO(t){return Rd(zO,t.config.apiKey,t.name)}async function KO(t,e,r=!1){if(Er(t.app))return Promise.reject(ss(t));const i=Fo(t),s=jO(i,e),o=await new $O(i,s,r).execute();return o&&!r&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YO=10*60*1e3;class XO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(r=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QO(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var i;if(e.error&&!w1(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";r.onError(Br(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const i=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YO&&this.cachedEventUids.clear(),this.cachedEventUids.has(pb(e))}saveEventToCache(e){this.cachedEventUids.add(pb(e)),this.lastProcessedEventTime=Date.now()}}function pb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function w1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function QO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return w1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JO(t,e={}){return Ts(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ej=/^https?/;async function tj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await JO(t);for(const r of e)try{if(nj(r))return}catch{}Cr(t,"unauthorized-domain")}function nj(t){const e=Ng(),{protocol:r,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===i}if(!ej.test(r))return!1;if(ZO.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rj=new Xu(3e4,6e4);function mb(){const t=zr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function ij(t){return new Promise((e,r)=>{var i,s,a;function o(){mb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{mb(),r(Br(t,"network-request-failed"))},timeout:rj.get()})}if(!((s=(i=zr().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=zr().gapi)===null||a===void 0)&&a.load)o();else{const l=XL("iframefcb");return zr()[l]=()=>{gapi.load?o():r(Br(t,"network-request-failed"))},s1(`${YL()}?onload=${l}`).catch(u=>r(u))}}).catch(e=>{throw Nd=null,e})}let Nd=null;function sj(t){return Nd=Nd||ij(t),Nd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj=new Xu(5e3,15e3),oj="__/auth/iframe",lj="emulator/auth/iframe",uj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dj(t){const e=t.config;Ee(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Dy(e,lj):`https://${t.config.authDomain}/${oj}`,i={apiKey:e.apiKey,appName:t.name,v:Vo},s=cj.get(t.config.apiHost);s&&(i.eid=s);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${r}?${Yu(i).slice(1)}`}async function hj(t){const e=await sj(t),r=zr().gapi;return Ee(r,t,"internal-error"),e.open({where:document.body,url:dj(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uj,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const o=Br(t,"network-request-failed"),l=zr().setTimeout(()=>{a(o)},aj.get());function u(){zr().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pj=500,mj=600,gj="_blank",vj="http://localhost";class gb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function yj(t,e,r,i=pj,s=mj){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u=Object.assign(Object.assign({},fj),{width:i.toString(),height:s.toString(),top:a,left:o}),c=gn().toLowerCase();r&&(l=JI(c)?gj:r),XI(c)&&(e=e||vj,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[m,w])=>`${p}${m}=${w},`,"");if(UL(c)&&l!=="_self")return _j(e||"",l),new gb(null);const f=window.open(e||"",l,h);Ee(f,t,"popup-blocked");try{f.focus()}catch{}return new gb(f)}function _j(t,e){const r=document.createElement("a");r.href=t,r.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wj="__/auth/handler",bj="emulator/auth/handler",xj=encodeURIComponent("fac");async function vb(t,e,r,i,s,a){Ee(t.config.authDomain,t,"auth-domain-config-required"),Ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:Vo,eventId:s};if(e instanceof l1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",uM(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Qu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),c=u?`#${xj}=${encodeURIComponent(u)}`:"";return`${Ej(t)}?${Yu(l).slice(1)}${c}`}function Ej({config:t}){return t.emulator?Dy(t,bj):`https://${t.authDomain}/${wj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp="webStorageSupport";class Tj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=p1,this._completeRedirectFn=KO,this._overrideRedirectResult=WO}async _openPopup(e,r,i,s){var a;_i((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await vb(e,r,i,Ng(),s);return yj(e,o,jy())}async _openRedirect(e,r,i,s){await this._originValidation(e);const a=await vb(e,r,i,Ng(),s);return kO(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:a}=this.eventManagers[r];return s?Promise.resolve(s):(_i(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[r]={promise:i},i.catch(()=>{delete this.eventManagers[r]}),i}async initAndGetManager(e){const r=await hj(e),i=new XO(e);return r.register("authEvent",s=>(Ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=r,i}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Jp,{type:Jp},s=>{var a;const o=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Jp];o!==void 0&&r(!!o),Cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=tj(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return r1()||QI()||My()}}const Sj=Tj;var yb="@firebase/auth",_b="1.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Cj(t){go(new ia("auth",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=i.options;Ee(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:i1(t)},c=new qL(i,s,a,u);return nO(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,i)=>{e.getProvider("auth-internal").initialize()})),go(new ia("auth-internal",e=>{const r=Fo(e.getProvider("auth").getImmediate());return(i=>new Ij(i))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),is(yb,_b,kj(t)),is(yb,_b,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aj=5*60,Pj=MI("authIdTokenMaxAge")||Aj;let wb=null;const Rj=t=>async e=>{const r=e&&await e.getIdTokenResult(),i=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>Pj)return;const s=r==null?void 0:r.token;wb!==s&&(wb=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Dj(t=VI()){const e=Ay(t,"auth");if(e.isInitialized())return e.getImmediate();const r=tO(t,{popupRedirectResolver:Sj,persistence:[OO,TO,p1]}),i=MI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const o=Rj(a.toString());_O(r,o,()=>o(r.currentUser)),yO(r,l=>o(l))}}const s=DI("auth");return s&&rO(r,`http://${s}`),r}function Nj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}GL({loadJS(t){return new Promise((e,r)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const a=Br("internal-error");a.customData=s,r(a)},i.type="text/javascript",i.charset="UTF-8",Nj().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Cj("Browser");var Mj="firebase",Lj="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */is(Mj,Lj,"app");var bb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var as,b1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,I){function y(){}y.prototype=I.prototype,R.D=I.prototype,R.prototype=new y,R.prototype.constructor=R,R.C=function(_,S,O){for(var N=Array(arguments.length-2),K=2;K<arguments.length;K++)N[K-2]=arguments[K];return I.prototype[S].apply(_,N)}}function r(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,r),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,I,y){y||(y=0);var _=Array(16);if(typeof I=="string")for(var S=0;16>S;++S)_[S]=I.charCodeAt(y++)|I.charCodeAt(y++)<<8|I.charCodeAt(y++)<<16|I.charCodeAt(y++)<<24;else for(S=0;16>S;++S)_[S]=I[y++]|I[y++]<<8|I[y++]<<16|I[y++]<<24;I=R.g[0],y=R.g[1],S=R.g[2];var O=R.g[3],N=I+(O^y&(S^O))+_[0]+3614090360&4294967295;I=y+(N<<7&4294967295|N>>>25),N=O+(S^I&(y^S))+_[1]+3905402710&4294967295,O=I+(N<<12&4294967295|N>>>20),N=S+(y^O&(I^y))+_[2]+606105819&4294967295,S=O+(N<<17&4294967295|N>>>15),N=y+(I^S&(O^I))+_[3]+3250441966&4294967295,y=S+(N<<22&4294967295|N>>>10),N=I+(O^y&(S^O))+_[4]+4118548399&4294967295,I=y+(N<<7&4294967295|N>>>25),N=O+(S^I&(y^S))+_[5]+1200080426&4294967295,O=I+(N<<12&4294967295|N>>>20),N=S+(y^O&(I^y))+_[6]+2821735955&4294967295,S=O+(N<<17&4294967295|N>>>15),N=y+(I^S&(O^I))+_[7]+4249261313&4294967295,y=S+(N<<22&4294967295|N>>>10),N=I+(O^y&(S^O))+_[8]+1770035416&4294967295,I=y+(N<<7&4294967295|N>>>25),N=O+(S^I&(y^S))+_[9]+2336552879&4294967295,O=I+(N<<12&4294967295|N>>>20),N=S+(y^O&(I^y))+_[10]+4294925233&4294967295,S=O+(N<<17&4294967295|N>>>15),N=y+(I^S&(O^I))+_[11]+2304563134&4294967295,y=S+(N<<22&4294967295|N>>>10),N=I+(O^y&(S^O))+_[12]+1804603682&4294967295,I=y+(N<<7&4294967295|N>>>25),N=O+(S^I&(y^S))+_[13]+4254626195&4294967295,O=I+(N<<12&4294967295|N>>>20),N=S+(y^O&(I^y))+_[14]+2792965006&4294967295,S=O+(N<<17&4294967295|N>>>15),N=y+(I^S&(O^I))+_[15]+1236535329&4294967295,y=S+(N<<22&4294967295|N>>>10),N=I+(S^O&(y^S))+_[1]+4129170786&4294967295,I=y+(N<<5&4294967295|N>>>27),N=O+(y^S&(I^y))+_[6]+3225465664&4294967295,O=I+(N<<9&4294967295|N>>>23),N=S+(I^y&(O^I))+_[11]+643717713&4294967295,S=O+(N<<14&4294967295|N>>>18),N=y+(O^I&(S^O))+_[0]+3921069994&4294967295,y=S+(N<<20&4294967295|N>>>12),N=I+(S^O&(y^S))+_[5]+3593408605&4294967295,I=y+(N<<5&4294967295|N>>>27),N=O+(y^S&(I^y))+_[10]+38016083&4294967295,O=I+(N<<9&4294967295|N>>>23),N=S+(I^y&(O^I))+_[15]+3634488961&4294967295,S=O+(N<<14&4294967295|N>>>18),N=y+(O^I&(S^O))+_[4]+3889429448&4294967295,y=S+(N<<20&4294967295|N>>>12),N=I+(S^O&(y^S))+_[9]+568446438&4294967295,I=y+(N<<5&4294967295|N>>>27),N=O+(y^S&(I^y))+_[14]+3275163606&4294967295,O=I+(N<<9&4294967295|N>>>23),N=S+(I^y&(O^I))+_[3]+4107603335&4294967295,S=O+(N<<14&4294967295|N>>>18),N=y+(O^I&(S^O))+_[8]+1163531501&4294967295,y=S+(N<<20&4294967295|N>>>12),N=I+(S^O&(y^S))+_[13]+2850285829&4294967295,I=y+(N<<5&4294967295|N>>>27),N=O+(y^S&(I^y))+_[2]+4243563512&4294967295,O=I+(N<<9&4294967295|N>>>23),N=S+(I^y&(O^I))+_[7]+1735328473&4294967295,S=O+(N<<14&4294967295|N>>>18),N=y+(O^I&(S^O))+_[12]+2368359562&4294967295,y=S+(N<<20&4294967295|N>>>12),N=I+(y^S^O)+_[5]+4294588738&4294967295,I=y+(N<<4&4294967295|N>>>28),N=O+(I^y^S)+_[8]+2272392833&4294967295,O=I+(N<<11&4294967295|N>>>21),N=S+(O^I^y)+_[11]+1839030562&4294967295,S=O+(N<<16&4294967295|N>>>16),N=y+(S^O^I)+_[14]+4259657740&4294967295,y=S+(N<<23&4294967295|N>>>9),N=I+(y^S^O)+_[1]+2763975236&4294967295,I=y+(N<<4&4294967295|N>>>28),N=O+(I^y^S)+_[4]+1272893353&4294967295,O=I+(N<<11&4294967295|N>>>21),N=S+(O^I^y)+_[7]+4139469664&4294967295,S=O+(N<<16&4294967295|N>>>16),N=y+(S^O^I)+_[10]+3200236656&4294967295,y=S+(N<<23&4294967295|N>>>9),N=I+(y^S^O)+_[13]+681279174&4294967295,I=y+(N<<4&4294967295|N>>>28),N=O+(I^y^S)+_[0]+3936430074&4294967295,O=I+(N<<11&4294967295|N>>>21),N=S+(O^I^y)+_[3]+3572445317&4294967295,S=O+(N<<16&4294967295|N>>>16),N=y+(S^O^I)+_[6]+76029189&4294967295,y=S+(N<<23&4294967295|N>>>9),N=I+(y^S^O)+_[9]+3654602809&4294967295,I=y+(N<<4&4294967295|N>>>28),N=O+(I^y^S)+_[12]+3873151461&4294967295,O=I+(N<<11&4294967295|N>>>21),N=S+(O^I^y)+_[15]+530742520&4294967295,S=O+(N<<16&4294967295|N>>>16),N=y+(S^O^I)+_[2]+3299628645&4294967295,y=S+(N<<23&4294967295|N>>>9),N=I+(S^(y|~O))+_[0]+4096336452&4294967295,I=y+(N<<6&4294967295|N>>>26),N=O+(y^(I|~S))+_[7]+1126891415&4294967295,O=I+(N<<10&4294967295|N>>>22),N=S+(I^(O|~y))+_[14]+2878612391&4294967295,S=O+(N<<15&4294967295|N>>>17),N=y+(O^(S|~I))+_[5]+4237533241&4294967295,y=S+(N<<21&4294967295|N>>>11),N=I+(S^(y|~O))+_[12]+1700485571&4294967295,I=y+(N<<6&4294967295|N>>>26),N=O+(y^(I|~S))+_[3]+2399980690&4294967295,O=I+(N<<10&4294967295|N>>>22),N=S+(I^(O|~y))+_[10]+4293915773&4294967295,S=O+(N<<15&4294967295|N>>>17),N=y+(O^(S|~I))+_[1]+2240044497&4294967295,y=S+(N<<21&4294967295|N>>>11),N=I+(S^(y|~O))+_[8]+1873313359&4294967295,I=y+(N<<6&4294967295|N>>>26),N=O+(y^(I|~S))+_[15]+4264355552&4294967295,O=I+(N<<10&4294967295|N>>>22),N=S+(I^(O|~y))+_[6]+2734768916&4294967295,S=O+(N<<15&4294967295|N>>>17),N=y+(O^(S|~I))+_[13]+1309151649&4294967295,y=S+(N<<21&4294967295|N>>>11),N=I+(S^(y|~O))+_[4]+4149444226&4294967295,I=y+(N<<6&4294967295|N>>>26),N=O+(y^(I|~S))+_[11]+3174756917&4294967295,O=I+(N<<10&4294967295|N>>>22),N=S+(I^(O|~y))+_[2]+718787259&4294967295,S=O+(N<<15&4294967295|N>>>17),N=y+(O^(S|~I))+_[9]+3951481745&4294967295,R.g[0]=R.g[0]+I&4294967295,R.g[1]=R.g[1]+(S+(N<<21&4294967295|N>>>11))&4294967295,R.g[2]=R.g[2]+S&4294967295,R.g[3]=R.g[3]+O&4294967295}i.prototype.u=function(R,I){I===void 0&&(I=R.length);for(var y=I-this.blockSize,_=this.B,S=this.h,O=0;O<I;){if(S==0)for(;O<=y;)s(this,R,O),O+=this.blockSize;if(typeof R=="string"){for(;O<I;)if(_[S++]=R.charCodeAt(O++),S==this.blockSize){s(this,_),S=0;break}}else for(;O<I;)if(_[S++]=R[O++],S==this.blockSize){s(this,_),S=0;break}}this.h=S,this.o+=I},i.prototype.v=function(){var R=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);R[0]=128;for(var I=1;I<R.length-8;++I)R[I]=0;var y=8*this.o;for(I=R.length-8;I<R.length;++I)R[I]=y&255,y/=256;for(this.u(R),R=Array(16),I=y=0;4>I;++I)for(var _=0;32>_;_+=8)R[y++]=this.g[I]>>>_&255;return R};function a(R,I){var y=l;return Object.prototype.hasOwnProperty.call(y,R)?y[R]:y[R]=I(R)}function o(R,I){this.h=I;for(var y=[],_=!0,S=R.length-1;0<=S;S--){var O=R[S]|0;_&&O==I||(y[S]=O,_=!1)}this.g=y}var l={};function u(R){return-128<=R&&128>R?a(R,function(I){return new o([I|0],0>I?-1:0)}):new o([R|0],0>R?-1:0)}function c(R){if(isNaN(R)||!isFinite(R))return f;if(0>R)return D(c(-R));for(var I=[],y=1,_=0;R>=y;_++)I[_]=R/y|0,y*=4294967296;return new o(I,0)}function h(R,I){if(R.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(R.charAt(0)=="-")return D(h(R.substring(1),I));if(0<=R.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=c(Math.pow(I,8)),_=f,S=0;S<R.length;S+=8){var O=Math.min(8,R.length-S),N=parseInt(R.substring(S,S+O),I);8>O?(O=c(Math.pow(I,O)),_=_.j(O).add(c(N))):(_=_.j(y),_=_.add(c(N)))}return _}var f=u(0),p=u(1),m=u(16777216);t=o.prototype,t.m=function(){if(A(this))return-D(this).m();for(var R=0,I=1,y=0;y<this.g.length;y++){var _=this.i(y);R+=(0<=_?_:4294967296+_)*I,I*=4294967296}return R},t.toString=function(R){if(R=R||10,2>R||36<R)throw Error("radix out of range: "+R);if(w(this))return"0";if(A(this))return"-"+D(this).toString(R);for(var I=c(Math.pow(R,6)),y=this,_="";;){var S=P(y,I).g;y=T(y,S.j(I));var O=((0<y.g.length?y.g[0]:y.h)>>>0).toString(R);if(y=S,w(y))return O+_;for(;6>O.length;)O="0"+O;_=O+_}},t.i=function(R){return 0>R?0:R<this.g.length?this.g[R]:this.h};function w(R){if(R.h!=0)return!1;for(var I=0;I<R.g.length;I++)if(R.g[I]!=0)return!1;return!0}function A(R){return R.h==-1}t.l=function(R){return R=T(this,R),A(R)?-1:w(R)?0:1};function D(R){for(var I=R.g.length,y=[],_=0;_<I;_++)y[_]=~R.g[_];return new o(y,~R.h).add(p)}t.abs=function(){return A(this)?D(this):this},t.add=function(R){for(var I=Math.max(this.g.length,R.g.length),y=[],_=0,S=0;S<=I;S++){var O=_+(this.i(S)&65535)+(R.i(S)&65535),N=(O>>>16)+(this.i(S)>>>16)+(R.i(S)>>>16);_=N>>>16,O&=65535,N&=65535,y[S]=N<<16|O}return new o(y,y[y.length-1]&-2147483648?-1:0)};function T(R,I){return R.add(D(I))}t.j=function(R){if(w(this)||w(R))return f;if(A(this))return A(R)?D(this).j(D(R)):D(D(this).j(R));if(A(R))return D(this.j(D(R)));if(0>this.l(m)&&0>R.l(m))return c(this.m()*R.m());for(var I=this.g.length+R.g.length,y=[],_=0;_<2*I;_++)y[_]=0;for(_=0;_<this.g.length;_++)for(var S=0;S<R.g.length;S++){var O=this.i(_)>>>16,N=this.i(_)&65535,K=R.i(S)>>>16,ie=R.i(S)&65535;y[2*_+2*S]+=N*ie,x(y,2*_+2*S),y[2*_+2*S+1]+=O*ie,x(y,2*_+2*S+1),y[2*_+2*S+1]+=N*K,x(y,2*_+2*S+1),y[2*_+2*S+2]+=O*K,x(y,2*_+2*S+2)}for(_=0;_<I;_++)y[_]=y[2*_+1]<<16|y[2*_];for(_=I;_<2*I;_++)y[_]=0;return new o(y,0)};function x(R,I){for(;(R[I]&65535)!=R[I];)R[I+1]+=R[I]>>>16,R[I]&=65535,I++}function b(R,I){this.g=R,this.h=I}function P(R,I){if(w(I))throw Error("division by zero");if(w(R))return new b(f,f);if(A(R))return I=P(D(R),I),new b(D(I.g),D(I.h));if(A(I))return I=P(R,D(I)),new b(D(I.g),I.h);if(30<R.g.length){if(A(R)||A(I))throw Error("slowDivide_ only works with positive integers.");for(var y=p,_=I;0>=_.l(R);)y=U(y),_=U(_);var S=V(y,1),O=V(_,1);for(_=V(_,2),y=V(y,2);!w(_);){var N=O.add(_);0>=N.l(R)&&(S=S.add(y),O=N),_=V(_,1),y=V(y,1)}return I=T(R,S.j(I)),new b(S,I)}for(S=f;0<=R.l(I);){for(y=Math.max(1,Math.floor(R.m()/I.m())),_=Math.ceil(Math.log(y)/Math.LN2),_=48>=_?1:Math.pow(2,_-48),O=c(y),N=O.j(I);A(N)||0<N.l(R);)y-=_,O=c(y),N=O.j(I);w(O)&&(O=p),S=S.add(O),R=T(R,N)}return new b(S,R)}t.A=function(R){return P(this,R).h},t.and=function(R){for(var I=Math.max(this.g.length,R.g.length),y=[],_=0;_<I;_++)y[_]=this.i(_)&R.i(_);return new o(y,this.h&R.h)},t.or=function(R){for(var I=Math.max(this.g.length,R.g.length),y=[],_=0;_<I;_++)y[_]=this.i(_)|R.i(_);return new o(y,this.h|R.h)},t.xor=function(R){for(var I=Math.max(this.g.length,R.g.length),y=[],_=0;_<I;_++)y[_]=this.i(_)^R.i(_);return new o(y,this.h^R.h)};function U(R){for(var I=R.g.length+1,y=[],_=0;_<I;_++)y[_]=R.i(_)<<1|R.i(_-1)>>>31;return new o(y,R.h)}function V(R,I){var y=I>>5;I%=32;for(var _=R.g.length-y,S=[],O=0;O<_;O++)S[O]=0<I?R.i(O+y)>>>I|R.i(O+y+1)<<32-I:R.i(O+y);return new o(S,R.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,b1=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,as=o}).apply(typeof bb<"u"?bb:typeof self<"u"?self:typeof window<"u"?window:{});var td=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var x1,Ml,E1,Md,Og,T1,S1,I1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,g,E){return d==Array.prototype||d==Object.prototype||(d[g]=E.value),d};function r(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof td=="object"&&td];for(var g=0;g<d.length;++g){var E=d[g];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=r(this);function s(d,g){if(g)e:{var E=i;d=d.split(".");for(var L=0;L<d.length-1;L++){var $=d[L];if(!($ in E))break e;E=E[$]}d=d[d.length-1],L=E[d],g=g(L),g!=L&&g!=null&&e(E,d,{configurable:!0,writable:!0,value:g})}}function a(d,g){d instanceof String&&(d+="");var E=0,L=!1,$={next:function(){if(!L&&E<d.length){var G=E++;return{value:g(G,d[G]),done:!1}}return L=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}s("Array.prototype.values",function(d){return d||function(){return a(this,function(g,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(d){var g=typeof d;return g=g!="object"?g:d?Array.isArray(d)?"array":g:"null",g=="array"||g=="object"&&typeof d.length=="number"}function c(d){var g=typeof d;return g=="object"&&d!=null||g=="function"}function h(d,g,E){return d.call.apply(d.bind,arguments)}function f(d,g,E){if(!d)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,L),d.apply(g,$)}}return function(){return d.apply(g,arguments)}}function p(d,g,E){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function m(d,g){var E=Array.prototype.slice.call(arguments,1);return function(){var L=E.slice();return L.push.apply(L,arguments),d.apply(this,L)}}function w(d,g){function E(){}E.prototype=g.prototype,d.aa=g.prototype,d.prototype=new E,d.prototype.constructor=d,d.Qb=function(L,$,G){for(var ue=Array(arguments.length-2),it=2;it<arguments.length;it++)ue[it-2]=arguments[it];return g.prototype[$].apply(L,ue)}}function A(d){const g=d.length;if(0<g){const E=Array(g);for(let L=0;L<g;L++)E[L]=d[L];return E}return[]}function D(d,g){for(let E=1;E<arguments.length;E++){const L=arguments[E];if(u(L)){const $=d.length||0,G=L.length||0;d.length=$+G;for(let ue=0;ue<G;ue++)d[$+ue]=L[ue]}else d.push(L)}}class T{constructor(g,E){this.i=g,this.j=E,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function x(d){return/^[\s\xa0]*$/.test(d)}function b(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function P(d){return P[" "](d),d}P[" "]=function(){};var U=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function V(d,g,E){for(const L in d)g.call(E,d[L],L,d)}function R(d,g){for(const E in d)g.call(void 0,d[E],E,d)}function I(d){const g={};for(const E in d)g[E]=d[E];return g}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(d,g){let E,L;for(let $=1;$<arguments.length;$++){L=arguments[$];for(E in L)d[E]=L[E];for(let G=0;G<y.length;G++)E=y[G],Object.prototype.hasOwnProperty.call(L,E)&&(d[E]=L[E])}}function S(d){var g=1;d=d.split(":");const E=[];for(;0<g&&d.length;)E.push(d.shift()),g--;return d.length&&E.push(d.join(":")),E}function O(d){l.setTimeout(()=>{throw d},0)}function N(){var d=Y;let g=null;return d.g&&(g=d.g,d.g=d.g.next,d.g||(d.h=null),g.next=null),g}class K{constructor(){this.h=this.g=null}add(g,E){const L=ie.get();L.set(g,E),this.h?this.h.next=L:this.g=L,this.h=L}}var ie=new T(()=>new oe,d=>d.reset());class oe{constructor(){this.next=this.g=this.h=null}set(g,E){this.h=g,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,W=!1,Y=new K,se=()=>{const d=l.Promise.resolve(void 0);fe=()=>{d.then(re)}};var re=()=>{for(var d;d=N();){try{d.h.call(d.g)}catch(E){O(E)}var g=ie;g.j(d),100>g.h&&(g.h++,d.next=g.g,g.g=d)}W=!1};function q(){this.s=this.s,this.C=this.C}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(d,g){this.type=d,this.g=this.target=g,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,g=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const E=()=>{};l.addEventListener("test",E,g),l.removeEventListener("test",E,g)}catch{}return d}();function Q(d,g){if(H.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var E=this.type=d.type,L=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=g,g=d.relatedTarget){if(U){e:{try{P(g.nodeName);var $=!0;break e}catch{}$=!1}$||(g=null)}}else E=="mouseover"?g=d.fromElement:E=="mouseout"&&(g=d.toElement);this.relatedTarget=g,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ce[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Q.aa.h.call(this)}}w(Q,H);var ce={2:"touch",3:"pen",4:"mouse"};Q.prototype.h=function(){Q.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ge="closure_listenable_"+(1e6*Math.random()|0),je=0;function Re(d,g,E,L,$){this.listener=d,this.proxy=null,this.src=g,this.type=E,this.capture=!!L,this.ha=$,this.key=++je,this.da=this.fa=!1}function He(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function We(d){this.src=d,this.g={},this.h=0}We.prototype.add=function(d,g,E,L,$){var G=d.toString();d=this.g[G],d||(d=this.g[G]=[],this.h++);var ue=Ke(d,g,L,$);return-1<ue?(g=d[ue],E||(g.fa=!1)):(g=new Re(g,this.src,G,!!L,$),g.fa=E,d.push(g)),g};function Xe(d,g){var E=g.type;if(E in d.g){var L=d.g[E],$=Array.prototype.indexOf.call(L,g,void 0),G;(G=0<=$)&&Array.prototype.splice.call(L,$,1),G&&(He(g),d.g[E].length==0&&(delete d.g[E],d.h--))}}function Ke(d,g,E,L){for(var $=0;$<d.length;++$){var G=d[$];if(!G.da&&G.listener==g&&G.capture==!!E&&G.ha==L)return $}return-1}var qe="closure_lm_"+(1e6*Math.random()|0),nt={};function C(d,g,E,L,$){if(Array.isArray(g)){for(var G=0;G<g.length;G++)C(d,g[G],E,L,$);return null}return E=Ye(E),d&&d[ge]?d.K(g,E,c(L)?!!L.capture:!1,$):j(d,g,E,!1,L,$)}function j(d,g,E,L,$,G){if(!g)throw Error("Invalid event type");var ue=c($)?!!$.capture:!!$,it=Ie(d);if(it||(d[qe]=it=new We(d)),E=it.add(g,E,L,ue,G),E.proxy)return E;if(L=F(),E.proxy=L,L.src=d,L.listener=E,d.addEventListener)J||($=ue),$===void 0&&($=!1),d.addEventListener(g.toString(),L,$);else if(d.attachEvent)d.attachEvent(le(g.toString()),L);else if(d.addListener&&d.removeListener)d.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return E}function F(){function d(E){return g.call(d.src,d.listener,E)}const g=we;return d}function z(d,g,E,L,$){if(Array.isArray(g))for(var G=0;G<g.length;G++)z(d,g[G],E,L,$);else L=c(L)?!!L.capture:!!L,E=Ye(E),d&&d[ge]?(d=d.i,g=String(g).toString(),g in d.g&&(G=d.g[g],E=Ke(G,E,L,$),-1<E&&(He(G[E]),Array.prototype.splice.call(G,E,1),G.length==0&&(delete d.g[g],d.h--)))):d&&(d=Ie(d))&&(g=d.g[g.toString()],d=-1,g&&(d=Ke(g,E,L,$)),(E=-1<d?g[d]:null)&&X(E))}function X(d){if(typeof d!="number"&&d&&!d.da){var g=d.src;if(g&&g[ge])Xe(g.i,d);else{var E=d.type,L=d.proxy;g.removeEventListener?g.removeEventListener(E,L,d.capture):g.detachEvent?g.detachEvent(le(E),L):g.addListener&&g.removeListener&&g.removeListener(L),(E=Ie(g))?(Xe(E,d),E.h==0&&(E.src=null,g[qe]=null)):He(d)}}}function le(d){return d in nt?nt[d]:nt[d]="on"+d}function we(d,g){if(d.da)d=!0;else{g=new Q(g,this);var E=d.listener,L=d.ha||d.src;d.fa&&X(d),d=E.call(L,g)}return d}function Ie(d){return d=d[qe],d instanceof We?d:null}var Me="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ye(d){return typeof d=="function"?d:(d[Me]||(d[Me]=function(g){return d.handleEvent(g)}),d[Me])}function Ce(){q.call(this),this.i=new We(this),this.M=this,this.F=null}w(Ce,q),Ce.prototype[ge]=!0,Ce.prototype.removeEventListener=function(d,g,E,L){z(this,d,g,E,L)};function ot(d,g){var E,L=d.F;if(L)for(E=[];L;L=L.F)E.push(L);if(d=d.M,L=g.type||g,typeof g=="string")g=new H(g,d);else if(g instanceof H)g.target=g.target||d;else{var $=g;g=new H(L,d),_(g,$)}if($=!0,E)for(var G=E.length-1;0<=G;G--){var ue=g.g=E[G];$=Wt(ue,L,!0,g)&&$}if(ue=g.g=d,$=Wt(ue,L,!0,g)&&$,$=Wt(ue,L,!1,g)&&$,E)for(G=0;G<E.length;G++)ue=g.g=E[G],$=Wt(ue,L,!1,g)&&$}Ce.prototype.N=function(){if(Ce.aa.N.call(this),this.i){var d=this.i,g;for(g in d.g){for(var E=d.g[g],L=0;L<E.length;L++)He(E[L]);delete d.g[g],d.h--}}this.F=null},Ce.prototype.K=function(d,g,E,L){return this.i.add(String(d),g,!1,E,L)},Ce.prototype.L=function(d,g,E,L){return this.i.add(String(d),g,!0,E,L)};function Wt(d,g,E,L){if(g=d.i.g[String(g)],!g)return!0;g=g.concat();for(var $=!0,G=0;G<g.length;++G){var ue=g[G];if(ue&&!ue.da&&ue.capture==E){var it=ue.listener,Gt=ue.ha||ue.src;ue.fa&&Xe(d.i,ue),$=it.call(Gt,L)!==!1&&$}}return $&&!L.defaultPrevented}function Rr(d,g,E){if(typeof d=="function")E&&(d=p(d,E));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:l.setTimeout(d,g||0)}function Ai(d){d.g=Rr(()=>{d.g=null,d.i&&(d.i=!1,Ai(d))},d.l);const g=d.h;d.h=null,d.m.apply(null,g)}class Xo extends q{constructor(g,E){super(),this.m=g,this.l=E,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Ai(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kn(d){q.call(this),this.h=d,this.g={}}w(kn,q);var Cs=[];function er(d){V(d.g,function(g,E){this.g.hasOwnProperty(E)&&X(g)},d),d.g={}}kn.prototype.N=function(){kn.aa.N.call(this),er(this)},kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dr=l.JSON.stringify,Qo=l.JSON.parse,Jo=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function Zo(){}Zo.prototype.h=null;function As(d){return d.h||(d.h=d.i())}function Ps(){}var Rs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jr(){H.call(this,"d")}w(Jr,H);function el(){H.call(this,"c")}w(el,H);var Zr={},St=null;function pr(){return St=St||new Ce}Zr.La="serverreachability";function wc(d){H.call(this,Zr.La,d)}w(wc,H);function Pi(d){const g=pr();ot(g,new wc(g))}Zr.STAT_EVENT="statevent";function wa(d,g){H.call(this,Zr.STAT_EVENT,d),this.stat=g}w(wa,H);function jt(d){const g=pr();ot(g,new wa(g,d))}Zr.Ma="timingevent";function tl(d,g){H.call(this,Zr.Ma,d),this.size=g}w(tl,H);function Ds(d,g){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},g)}function sn(){this.g=!0}sn.prototype.xa=function(){this.g=!1};function ba(d,g,E,L,$,G){d.info(function(){if(d.g)if(G)for(var ue="",it=G.split("&"),Gt=0;Gt<it.length;Gt++){var Ge=it[Gt].split("=");if(1<Ge.length){var an=Ge[0];Ge=Ge[1];var on=an.split("_");ue=2<=on.length&&on[1]=="type"?ue+(an+"="+Ge+"&"):ue+(an+"=redacted&")}}else ue=null;else ue=G;return"XMLHTTP REQ ("+L+") [attempt "+$+"]: "+g+`
`+E+`
`+ue})}function bc(d,g,E,L,$,G,ue){d.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+$+"]: "+g+`
`+E+`
`+G+" "+ue})}function ei(d,g,E,L){d.info(function(){return"XMLHTTP TEXT ("+g+"): "+xc(d,E)+(L?" "+L:"")})}function nl(d,g){d.info(function(){return"TIMEOUT: "+g})}sn.prototype.info=function(){};function xc(d,g){if(!d.g)return g;if(!g)return null;try{var E=JSON.parse(g);if(E){for(d=0;d<E.length;d++)if(Array.isArray(E[d])){var L=E[d];if(!(2>L.length)){var $=L[1];if(Array.isArray($)&&!(1>$.length)){var G=$[0];if(G!="noop"&&G!="stop"&&G!="close")for(var ue=1;ue<$.length;ue++)$[ue]=""}}}}return Dr(E)}catch{return g}}var Cn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},rl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xa;function Ns(){}w(Ns,Zo),Ns.prototype.g=function(){return new XMLHttpRequest},Ns.prototype.i=function(){return{}},xa=new Ns;function mr(d,g,E,L){this.j=d,this.i=g,this.l=E,this.R=L||1,this.U=new kn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Ec}function Ec(){this.i=null,this.g="",this.h=!1}var ve={},B={};function te(d,g,E){d.L=1,d.v=kc(ti(g)),d.m=E,d.P=!0,me(d,null)}function me(d,g){d.F=Date.now(),xt(d),d.A=ti(d.v);var E=d.A,L=d.R;Array.isArray(L)||(L=[String(L)]),o0(E.i,"t",L),d.C=0,E=d.j.J,d.h=new Ec,d.g=S0(d.j,E?g:null,!d.m),0<d.O&&(d.M=new Xo(p(d.Y,d,d.g),d.O)),g=d.U,E=d.g,L=d.ca;var $="readystatechange";Array.isArray($)||($&&(Cs[0]=$.toString()),$=Cs);for(var G=0;G<$.length;G++){var ue=C(E,$[G],L||g.handleEvent,!1,g.h||g);if(!ue)break;g.g[ue.key]=ue}g=d.H?I(d.H):{},d.m?(d.u||(d.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,g)):(d.u="GET",d.g.ea(d.A,d.u,null,g)),Pi(),ba(d.i,d.u,d.A,d.l,d.R,d.m)}mr.prototype.ca=function(d){d=d.target;const g=this.M;g&&ni(d)==3?g.j():this.Y(d)},mr.prototype.Y=function(d){try{if(d==this.g)e:{const on=ni(this.g);var g=this.g.Ba();const Ia=this.g.Z();if(!(3>on)&&(on!=3||this.g&&(this.h.h||this.g.oa()||p0(this.g)))){this.J||on!=4||g==7||(g==8||0>=Ia?Pi(3):Pi(2)),An(this);var E=this.g.Z();this.X=E;t:if(rt(this)){var L=p0(this.g);d="";var $=L.length,G=ni(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gt(this),gr(this);var ue="";break t}this.h.i=new l.TextDecoder}for(g=0;g<$;g++)this.h.h=!0,d+=this.h.i.decode(L[g],{stream:!(G&&g==$-1)});L.length=0,this.h.g+=d,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=E==200,bc(this.i,this.u,this.A,this.l,this.R,on,E),this.o){if(this.T&&!this.K){t:{if(this.g){var it,Gt=this.g;if((it=Gt.g?Gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(it)){var Ge=it;break t}}Ge=null}if(E=Ge)ei(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ea(this,E);else{this.o=!1,this.s=3,jt(12),gt(this),gr(this);break e}}if(this.P){E=!0;let vr;for(;!this.J&&this.C<ue.length;)if(vr=Vt(this,ue),vr==B){on==4&&(this.s=4,jt(14),E=!1),ei(this.i,this.l,null,"[Incomplete Response]");break}else if(vr==ve){this.s=4,jt(15),ei(this.i,this.l,ue,"[Invalid Chunk]"),E=!1;break}else ei(this.i,this.l,vr,null),Ea(this,vr);if(rt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),on!=4||ue.length!=0||this.h.h||(this.s=1,jt(16),E=!1),this.o=this.o&&E,!E)ei(this.i,this.l,ue,"[Invalid Chunked Response]"),gt(this),gr(this);else if(0<ue.length&&!this.W){this.W=!0;var an=this.j;an.g==this&&an.ba&&!an.M&&(an.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),gp(an),an.M=!0,jt(11))}}else ei(this.i,this.l,ue,null),Ea(this,ue);on==4&&gt(this),this.o&&!this.J&&(on==4?b0(this.j,this):(this.o=!1,xt(this)))}else MP(this.g),E==400&&0<ue.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),gt(this),gr(this)}}}catch{}finally{}};function rt(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Vt(d,g){var E=d.C,L=g.indexOf(`
`,E);return L==-1?B:(E=Number(g.substring(E,L)),isNaN(E)?ve:(L+=1,L+E>g.length?B:(g=g.slice(L,L+E),d.C=L+E,g)))}mr.prototype.cancel=function(){this.J=!0,gt(this)};function xt(d){d.S=Date.now()+d.I,qt(d,d.I)}function qt(d,g){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ds(p(d.ba,d),g)}function An(d){d.B&&(l.clearTimeout(d.B),d.B=null)}mr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(nl(this.i,this.A),this.L!=2&&(Pi(),jt(17)),gt(this),this.s=2,gr(this)):qt(this,this.S-d)};function gr(d){d.j.G==0||d.J||b0(d.j,d)}function gt(d){An(d);var g=d.M;g&&typeof g.ma=="function"&&g.ma(),d.M=null,er(d.U),d.g&&(g=d.g,d.g=null,g.abort(),g.ma())}function Ea(d,g){try{var E=d.j;if(E.G!=0&&(E.g==d||dp(E.h,d))){if(!d.K&&dp(E.h,d)&&E.G==3){try{var L=E.Da.g.parse(g)}catch{L=null}if(Array.isArray(L)&&L.length==3){var $=L;if($[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<d.F)Nc(E),Rc(E);else break e;mp(E),jt(18)}}else E.za=$[1],0<E.za-E.T&&37500>$[2]&&E.F&&E.v==0&&!E.C&&(E.C=Ds(p(E.Za,E),6e3));if(1>=J_(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Ls(E,11)}else if((d.K||E.g==d)&&Nc(E),!x(g))for($=E.Da.g.parse(g),g=0;g<$.length;g++){let Ge=$[g];if(E.T=Ge[0],Ge=Ge[1],E.G==2)if(Ge[0]=="c"){E.K=Ge[1],E.ia=Ge[2];const an=Ge[3];an!=null&&(E.la=an,E.j.info("VER="+E.la));const on=Ge[4];on!=null&&(E.Aa=on,E.j.info("SVER="+E.Aa));const Ia=Ge[5];Ia!=null&&typeof Ia=="number"&&0<Ia&&(L=1.5*Ia,E.L=L,E.j.info("backChannelRequestTimeoutMs_="+L)),L=E;const vr=d.g;if(vr){const Lc=vr.g?vr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Lc){var G=L.h;G.g||Lc.indexOf("spdy")==-1&&Lc.indexOf("quic")==-1&&Lc.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(hp(G,G.h),G.h=null))}if(L.D){const vp=vr.g?vr.g.getResponseHeader("X-HTTP-Session-Id"):null;vp&&(L.ya=vp,lt(L.I,L.D,vp))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-d.F,E.j.info("Handshake RTT: "+E.R+"ms")),L=E;var ue=d;if(L.qa=T0(L,L.J?L.ia:null,L.W),ue.K){Z_(L.h,ue);var it=ue,Gt=L.L;Gt&&(it.I=Gt),it.B&&(An(it),xt(it)),L.g=ue}else _0(L);0<E.i.length&&Dc(E)}else Ge[0]!="stop"&&Ge[0]!="close"||Ls(E,7);else E.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?Ls(E,7):pp(E):Ge[0]!="noop"&&E.l&&E.l.ta(Ge),E.v=0)}}Pi(4)}catch{}}var Tc=class{constructor(d,g){this.g=d,this.map=g}};function X_(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Q_(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function J_(d){return d.h?1:d.g?d.g.size:0}function dp(d,g){return d.h?d.h==g:d.g?d.g.has(g):!1}function hp(d,g){d.g?d.g.add(g):d.h=g}function Z_(d,g){d.h&&d.h==g?d.h=null:d.g&&d.g.has(g)&&d.g.delete(g)}X_.prototype.cancel=function(){if(this.i=e0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function e0(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let g=d.i;for(const E of d.g.values())g=g.concat(E.D);return g}return A(d.i)}function _P(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var g=[],E=d.length,L=0;L<E;L++)g.push(d[L]);return g}g=[],E=0;for(L in d)g[E++]=d[L];return g}function wP(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var g=[];d=d.length;for(var E=0;E<d;E++)g.push(E);return g}g=[],E=0;for(const L in d)g[E++]=L;return g}}}function t0(d,g){if(d.forEach&&typeof d.forEach=="function")d.forEach(g,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,g,void 0);else for(var E=wP(d),L=_P(d),$=L.length,G=0;G<$;G++)g.call(void 0,L[G],E&&E[G],d)}var n0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function bP(d,g){if(d){d=d.split("&");for(var E=0;E<d.length;E++){var L=d[E].indexOf("="),$=null;if(0<=L){var G=d[E].substring(0,L);$=d[E].substring(L+1)}else G=d[E];g(G,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Ms(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Ms){this.h=d.h,Sc(this,d.j),this.o=d.o,this.g=d.g,Ic(this,d.s),this.l=d.l;var g=d.i,E=new al;E.i=g.i,g.g&&(E.g=new Map(g.g),E.h=g.h),r0(this,E),this.m=d.m}else d&&(g=String(d).match(n0))?(this.h=!1,Sc(this,g[1]||"",!0),this.o=il(g[2]||""),this.g=il(g[3]||"",!0),Ic(this,g[4]),this.l=il(g[5]||"",!0),r0(this,g[6]||"",!0),this.m=il(g[7]||"")):(this.h=!1,this.i=new al(null,this.h))}Ms.prototype.toString=function(){var d=[],g=this.j;g&&d.push(sl(g,i0,!0),":");var E=this.g;return(E||g=="file")&&(d.push("//"),(g=this.o)&&d.push(sl(g,i0,!0),"@"),d.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&d.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&d.push("/"),d.push(sl(E,E.charAt(0)=="/"?TP:EP,!0))),(E=this.i.toString())&&d.push("?",E),(E=this.m)&&d.push("#",sl(E,IP)),d.join("")};function ti(d){return new Ms(d)}function Sc(d,g,E){d.j=E?il(g,!0):g,d.j&&(d.j=d.j.replace(/:$/,""))}function Ic(d,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);d.s=g}else d.s=null}function r0(d,g,E){g instanceof al?(d.i=g,kP(d.i,d.h)):(E||(g=sl(g,SP)),d.i=new al(g,d.h))}function lt(d,g,E){d.i.set(g,E)}function kc(d){return lt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function il(d,g){return d?g?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function sl(d,g,E){return typeof d=="string"?(d=encodeURI(d).replace(g,xP),E&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function xP(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var i0=/[#\/\?@]/g,EP=/[#\?:]/g,TP=/[#\?]/g,SP=/[#\?@]/g,IP=/#/g;function al(d,g){this.h=this.g=null,this.i=d||null,this.j=!!g}function Ri(d){d.g||(d.g=new Map,d.h=0,d.i&&bP(d.i,function(g,E){d.add(decodeURIComponent(g.replace(/\+/g," ")),E)}))}t=al.prototype,t.add=function(d,g){Ri(this),this.i=null,d=Ta(this,d);var E=this.g.get(d);return E||this.g.set(d,E=[]),E.push(g),this.h+=1,this};function s0(d,g){Ri(d),g=Ta(d,g),d.g.has(g)&&(d.i=null,d.h-=d.g.get(g).length,d.g.delete(g))}function a0(d,g){return Ri(d),g=Ta(d,g),d.g.has(g)}t.forEach=function(d,g){Ri(this),this.g.forEach(function(E,L){E.forEach(function($){d.call(g,$,L,this)},this)},this)},t.na=function(){Ri(this);const d=Array.from(this.g.values()),g=Array.from(this.g.keys()),E=[];for(let L=0;L<g.length;L++){const $=d[L];for(let G=0;G<$.length;G++)E.push(g[L])}return E},t.V=function(d){Ri(this);let g=[];if(typeof d=="string")a0(this,d)&&(g=g.concat(this.g.get(Ta(this,d))));else{d=Array.from(this.g.values());for(let E=0;E<d.length;E++)g=g.concat(d[E])}return g},t.set=function(d,g){return Ri(this),this.i=null,d=Ta(this,d),a0(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[g]),this.h+=1,this},t.get=function(d,g){return d?(d=this.V(d),0<d.length?String(d[0]):g):g};function o0(d,g,E){s0(d,g),0<E.length&&(d.i=null,d.g.set(Ta(d,g),A(E)),d.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],g=Array.from(this.g.keys());for(var E=0;E<g.length;E++){var L=g[E];const G=encodeURIComponent(String(L)),ue=this.V(L);for(L=0;L<ue.length;L++){var $=G;ue[L]!==""&&($+="="+encodeURIComponent(String(ue[L]))),d.push($)}}return this.i=d.join("&")};function Ta(d,g){return g=String(g),d.j&&(g=g.toLowerCase()),g}function kP(d,g){g&&!d.j&&(Ri(d),d.i=null,d.g.forEach(function(E,L){var $=L.toLowerCase();L!=$&&(s0(this,L),o0(this,$,E))},d)),d.j=g}function CP(d,g){const E=new sn;if(l.Image){const L=new Image;L.onload=m(Di,E,"TestLoadImage: loaded",!0,g,L),L.onerror=m(Di,E,"TestLoadImage: error",!1,g,L),L.onabort=m(Di,E,"TestLoadImage: abort",!1,g,L),L.ontimeout=m(Di,E,"TestLoadImage: timeout",!1,g,L),l.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=d}else g(!1)}function AP(d,g){const E=new sn,L=new AbortController,$=setTimeout(()=>{L.abort(),Di(E,"TestPingServer: timeout",!1,g)},1e4);fetch(d,{signal:L.signal}).then(G=>{clearTimeout($),G.ok?Di(E,"TestPingServer: ok",!0,g):Di(E,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout($),Di(E,"TestPingServer: error",!1,g)})}function Di(d,g,E,L,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),L(E)}catch{}}function PP(){this.g=new Jo}function RP(d,g,E){const L=E||"";try{t0(d,function($,G){let ue=$;c($)&&(ue=Dr($)),g.push(L+G+"="+encodeURIComponent(ue))})}catch($){throw g.push(L+"type="+encodeURIComponent("_badmap")),$}}function Cc(d){this.l=d.Ub||null,this.j=d.eb||!1}w(Cc,Zo),Cc.prototype.g=function(){return new Ac(this.l,this.j)},Cc.prototype.i=function(d){return function(){return d}}({});function Ac(d,g){Ce.call(this),this.D=d,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Ac,Ce),t=Ac.prototype,t.open=function(d,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=g,this.readyState=1,ll(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(g.body=d),(this.D||l).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ol(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ll(this)),this.g&&(this.readyState=3,ll(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;l0(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function l0(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var g=d.value?d.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!d.done}))&&(this.response=this.responseText+=g)}d.done?ol(this):ll(this),this.readyState==3&&l0(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,ol(this))},t.Qa=function(d){this.g&&(this.response=d,ol(this))},t.ga=function(){this.g&&ol(this)};function ol(d){d.readyState=4,d.l=null,d.j=null,d.v=null,ll(d)}t.setRequestHeader=function(d,g){this.u.append(d,g)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],g=this.h.entries();for(var E=g.next();!E.done;)E=E.value,d.push(E[0]+": "+E[1]),E=g.next();return d.join(`\r
`)};function ll(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Ac.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function u0(d){let g="";return V(d,function(E,L){g+=L,g+=":",g+=E,g+=`\r
`}),g}function fp(d,g,E){e:{for(L in E){var L=!1;break e}L=!0}L||(E=u0(E),typeof d=="string"?E!=null&&encodeURIComponent(String(E)):lt(d,g,E))}function Et(d){Ce.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Et,Ce);var DP=/^https?$/i,NP=["POST","PUT"];t=Et.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,g,E,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);g=g?g.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xa.g(),this.v=this.o?As(this.o):As(xa),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(g,String(d),!0),this.B=!1}catch(G){c0(this,G);return}if(d=E||"",E=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var $ in L)E.set($,L[$]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const G of L.keys())E.set(G,L.get(G));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(E.keys()).find(G=>G.toLowerCase()=="content-type"),$=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(NP,g,void 0))||L||$||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,ue]of E)this.g.setRequestHeader(G,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{f0(this),this.u=!0,this.g.send(d),this.u=!1}catch(G){c0(this,G)}};function c0(d,g){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=g,d.m=5,d0(d),Pc(d)}function d0(d){d.A||(d.A=!0,ot(d,"complete"),ot(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,ot(this,"complete"),ot(this,"abort"),Pc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pc(this,!0)),Et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?h0(this):this.bb())},t.bb=function(){h0(this)};function h0(d){if(d.h&&typeof o<"u"&&(!d.v[1]||ni(d)!=4||d.Z()!=2)){if(d.u&&ni(d)==4)Rr(d.Ea,0,d);else if(ot(d,"readystatechange"),ni(d)==4){d.h=!1;try{const ue=d.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var E;if(!(E=g)){var L;if(L=ue===0){var $=String(d.D).match(n0)[1]||null;!$&&l.self&&l.self.location&&($=l.self.location.protocol.slice(0,-1)),L=!DP.test($?$.toLowerCase():"")}E=L}if(E)ot(d,"complete"),ot(d,"success");else{d.m=6;try{var G=2<ni(d)?d.g.statusText:""}catch{G=""}d.l=G+" ["+d.Z()+"]",d0(d)}}finally{Pc(d)}}}}function Pc(d,g){if(d.g){f0(d);const E=d.g,L=d.v[0]?()=>{}:null;d.g=null,d.v=null,g||ot(d,"ready");try{E.onreadystatechange=L}catch{}}}function f0(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function ni(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<ni(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var g=this.g.responseText;return d&&g.indexOf(d)==0&&(g=g.substring(d.length)),Qo(g)}};function p0(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function MP(d){const g={};d=(d.g&&2<=ni(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<d.length;L++){if(x(d[L]))continue;var E=S(d[L]);const $=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const G=g[$]||[];g[$]=G,G.push(E)}R(g,function(L){return L.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ul(d,g,E){return E&&E.internalChannelParams&&E.internalChannelParams[d]||g}function m0(d){this.Aa=0,this.i=[],this.j=new sn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ul("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ul("baseRetryDelayMs",5e3,d),this.cb=ul("retryDelaySeedMs",1e4,d),this.Wa=ul("forwardChannelMaxRetries",2,d),this.wa=ul("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new X_(d&&d.concurrentRequestLimit),this.Da=new PP,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=m0.prototype,t.la=8,t.G=1,t.connect=function(d,g,E,L){jt(0),this.W=d,this.H=g||{},E&&L!==void 0&&(this.H.OSID=E,this.H.OAID=L),this.F=this.X,this.I=T0(this,null,this.W),Dc(this)};function pp(d){if(g0(d),d.G==3){var g=d.U++,E=ti(d.I);if(lt(E,"SID",d.K),lt(E,"RID",g),lt(E,"TYPE","terminate"),cl(d,E),g=new mr(d,d.j,g),g.L=2,g.v=kc(ti(E)),E=!1,l.navigator&&l.navigator.sendBeacon)try{E=l.navigator.sendBeacon(g.v.toString(),"")}catch{}!E&&l.Image&&(new Image().src=g.v,E=!0),E||(g.g=S0(g.j,null),g.g.ea(g.v)),g.F=Date.now(),xt(g)}E0(d)}function Rc(d){d.g&&(gp(d),d.g.cancel(),d.g=null)}function g0(d){Rc(d),d.u&&(l.clearTimeout(d.u),d.u=null),Nc(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function Dc(d){if(!Q_(d.h)&&!d.s){d.s=!0;var g=d.Ga;fe||se(),W||(fe(),W=!0),Y.add(g,d),d.B=0}}function LP(d,g){return J_(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=g.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ds(p(d.Ga,d,g),x0(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const $=new mr(this,this.j,d);let G=this.o;if(this.S&&(G?(G=I(G),_(G,this.S)):G=this.S),this.m!==null||this.O||($.H=G,G=null),this.P)e:{for(var g=0,E=0;E<this.i.length;E++){t:{var L=this.i[E];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(g+=L,4096<g){g=E;break e}if(g===4096||E===this.i.length-1){g=E+1;break e}}g=1e3}else g=1e3;g=y0(this,$,g),E=ti(this.I),lt(E,"RID",d),lt(E,"CVER",22),this.D&&lt(E,"X-HTTP-Session-Id",this.D),cl(this,E),G&&(this.O?g="headers="+encodeURIComponent(String(u0(G)))+"&"+g:this.m&&fp(E,this.m,G)),hp(this.h,$),this.Ua&&lt(E,"TYPE","init"),this.P?(lt(E,"$req",g),lt(E,"SID","null"),$.T=!0,te($,E,null)):te($,E,g),this.G=2}}else this.G==3&&(d?v0(this,d):this.i.length==0||Q_(this.h)||v0(this))};function v0(d,g){var E;g?E=g.l:E=d.U++;const L=ti(d.I);lt(L,"SID",d.K),lt(L,"RID",E),lt(L,"AID",d.T),cl(d,L),d.m&&d.o&&fp(L,d.m,d.o),E=new mr(d,d.j,E,d.B+1),d.m===null&&(E.H=d.o),g&&(d.i=g.D.concat(d.i)),g=y0(d,E,1e3),E.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),hp(d.h,E),te(E,L,g)}function cl(d,g){d.H&&V(d.H,function(E,L){lt(g,L,E)}),d.l&&t0({},function(E,L){lt(g,L,E)})}function y0(d,g,E){E=Math.min(d.i.length,E);var L=d.l?p(d.l.Na,d.l,d):null;e:{var $=d.i;let G=-1;for(;;){const ue=["count="+E];G==-1?0<E?(G=$[0].g,ue.push("ofs="+G)):G=0:ue.push("ofs="+G);let it=!0;for(let Gt=0;Gt<E;Gt++){let Ge=$[Gt].g;const an=$[Gt].map;if(Ge-=G,0>Ge)G=Math.max(0,$[Gt].g-100),it=!1;else try{RP(an,ue,"req"+Ge+"_")}catch{L&&L(an)}}if(it){L=ue.join("&");break e}}}return d=d.i.splice(0,E),g.D=d,L}function _0(d){if(!d.g&&!d.u){d.Y=1;var g=d.Fa;fe||se(),W||(fe(),W=!0),Y.add(g,d),d.v=0}}function mp(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ds(p(d.Fa,d),x0(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,w0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ds(p(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jt(10),Rc(this),w0(this))};function gp(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function w0(d){d.g=new mr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var g=ti(d.qa);lt(g,"RID","rpc"),lt(g,"SID",d.K),lt(g,"AID",d.T),lt(g,"CI",d.F?"0":"1"),!d.F&&d.ja&&lt(g,"TO",d.ja),lt(g,"TYPE","xmlhttp"),cl(d,g),d.m&&d.o&&fp(g,d.m,d.o),d.L&&(d.g.I=d.L);var E=d.g;d=d.ia,E.L=1,E.v=kc(ti(g)),E.m=null,E.P=!0,me(E,d)}t.Za=function(){this.C!=null&&(this.C=null,Rc(this),mp(this),jt(19))};function Nc(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function b0(d,g){var E=null;if(d.g==g){Nc(d),gp(d),d.g=null;var L=2}else if(dp(d.h,g))E=g.D,Z_(d.h,g),L=1;else return;if(d.G!=0){if(g.o)if(L==1){E=g.m?g.m.length:0,g=Date.now()-g.F;var $=d.B;L=pr(),ot(L,new tl(L,E)),Dc(d)}else _0(d);else if($=g.s,$==3||$==0&&0<g.X||!(L==1&&LP(d,g)||L==2&&mp(d)))switch(E&&0<E.length&&(g=d.h,g.i=g.i.concat(E)),$){case 1:Ls(d,5);break;case 4:Ls(d,10);break;case 3:Ls(d,6);break;default:Ls(d,2)}}}function x0(d,g){let E=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(E*=2),E*g}function Ls(d,g){if(d.j.info("Error code "+g),g==2){var E=p(d.fb,d),L=d.Xa;const $=!L;L=new Ms(L||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Sc(L,"https"),kc(L),$?CP(L.toString(),E):AP(L.toString(),E)}else jt(2);d.G=0,d.l&&d.l.sa(g),E0(d),g0(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function E0(d){if(d.G=0,d.ka=[],d.l){const g=e0(d.h);(g.length!=0||d.i.length!=0)&&(D(d.ka,g),D(d.ka,d.i),d.h.i.length=0,A(d.i),d.i.length=0),d.l.ra()}}function T0(d,g,E){var L=E instanceof Ms?ti(E):new Ms(E);if(L.g!="")g&&(L.g=g+"."+L.g),Ic(L,L.s);else{var $=l.location;L=$.protocol,g=g?g+"."+$.hostname:$.hostname,$=+$.port;var G=new Ms(null);L&&Sc(G,L),g&&(G.g=g),$&&Ic(G,$),E&&(G.l=E),L=G}return E=d.D,g=d.ya,E&&g&&lt(L,E,g),lt(L,"VER",d.la),cl(d,L),L}function S0(d,g,E){if(g&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=d.Ca&&!d.pa?new Et(new Cc({eb:E})):new Et(d.pa),g.Ha(d.J),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function I0(){}t=I0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Mc(){}Mc.prototype.g=function(d,g){return new Un(d,g)};function Un(d,g){Ce.call(this),this.g=new m0(g),this.l=d,this.h=g&&g.messageUrlParams||null,d=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(d?d["X-WebChannel-Content-Type"]=g.messageContentType:d={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(d?d["X-WebChannel-Client-Profile"]=g.va:d={"X-WebChannel-Client-Profile":g.va}),this.g.S=d,(d=g&&g.Sb)&&!x(d)&&(this.g.m=d),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!x(g)&&(this.g.D=g,d=this.h,d!==null&&g in d&&(d=this.h,g in d&&delete d[g])),this.j=new Sa(this)}w(Un,Ce),Un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){pp(this.g)},Un.prototype.o=function(d){var g=this.g;if(typeof d=="string"){var E={};E.__data__=d,d=E}else this.u&&(E={},E.__data__=Dr(d),d=E);g.i.push(new Tc(g.Ya++,d)),g.G==3&&Dc(g)},Un.prototype.N=function(){this.g.l=null,delete this.j,pp(this.g),delete this.g,Un.aa.N.call(this)};function k0(d){Jr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var g=d.__sm__;if(g){e:{for(const E in g){d=E;break e}d=void 0}(this.i=d)&&(d=this.i,g=g!==null&&d in g?g[d]:void 0),this.data=g}else this.data=d}w(k0,Jr);function C0(){el.call(this),this.status=1}w(C0,el);function Sa(d){this.g=d}w(Sa,I0),Sa.prototype.ua=function(){ot(this.g,"a")},Sa.prototype.ta=function(d){ot(this.g,new k0(d))},Sa.prototype.sa=function(d){ot(this.g,new C0)},Sa.prototype.ra=function(){ot(this.g,"b")},Mc.prototype.createWebChannel=Mc.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,I1=function(){return new Mc},S1=function(){return pr()},T1=Zr,Og={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Cn.NO_ERROR=0,Cn.TIMEOUT=8,Cn.HTTP_ERROR=6,Md=Cn,rl.COMPLETE="complete",E1=rl,Ps.EventType=Rs,Rs.OPEN="a",Rs.CLOSE="b",Rs.ERROR="c",Rs.MESSAGE="d",Ce.prototype.listen=Ce.prototype.K,Ml=Ps,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,x1=Et}).apply(typeof td<"u"?td:typeof self<"u"?self:typeof window<"u"?window:{});const xb="@firebase/firestore",Eb="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new ky("@firebase/firestore");function Na(){return aa.logLevel}function he(t,...e){if(aa.logLevel<=Le.DEBUG){const r=e.map(Fy);aa.debug(`Firestore (${Bo}): ${t}`,...r)}}function wi(t,...e){if(aa.logLevel<=Le.ERROR){const r=e.map(Fy);aa.error(`Firestore (${Bo}): ${t}`,...r)}}function yo(t,...e){if(aa.logLevel<=Le.WARN){const r=e.map(Fy);aa.warn(`Firestore (${Bo}): ${t}`,...r)}}function Fy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(t="Unexpected state"){const e=`FIRESTORE (${Bo}) INTERNAL ASSERTION FAILED: `+t;throw wi(e),new Error(e)}function Qe(t,e){t||Te()}function ke(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Si{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Oj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(dn.UNAUTHENTICATED))}shutdown(){}}class jj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Vj{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Qe(this.o===void 0);let i=this.i;const s=u=>this.i!==i?(i=this.i,r(u)):Promise.resolve();let a=new fi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new fi,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new fi)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(i=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qe(typeof i.accessToken=="string"),new k1(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string"),new dn(e)}}class Fj{constructor(e,r,i){this.l=e,this.h=r,this.P=i,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Uj{constructor(e,r,i){this.l=e,this.h=r,this.P=i}getToken(){return Promise.resolve(new Fj(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Tb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Bj{constructor(e,r){this.A=r,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Er(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,r){Qe(this.o===void 0);const i=a=>{a.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,he("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const s=a=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new Tb(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Qe(typeof r.token=="string"),this.R=r.token,new Tb(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let i=0;i<t;i++)r[i]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=zj(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<r&&(i+=e.charAt(s[a]%62))}return i}}function Ve(t,e){return t<e?-1:t>e?1:0}function _o(t,e,r){return t.length===e.length&&t.every((i,s)=>r(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb=-62135596800,Ib=1e6;class Lt{static now(){return Lt.fromMillis(Date.now())}static fromDate(e){return Lt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),i=Math.floor((e-1e3*r)*Ib);return new Lt(r,i)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ye(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ye(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<Sb)throw new ye(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ib}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Sb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Lt(0,0))}static max(){return new Se(new Lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="__name__";class Or{constructor(e,r,i){r===void 0?r=0:r>e.length&&Te(),i===void 0?i=e.length-r:i>e.length-r&&Te(),this.segments=e,this.offset=r,this.len=i}get length(){return this.len}isEqual(e){return Or.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Or?e.forEach(i=>{r.push(i)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,i=this.limit();r<i;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const i=Math.min(e.length,r.length);for(let s=0;s<i;s++){const a=Or.compareSegments(e.get(s),r.get(s));if(a!==0)return a}return Math.sign(e.length-r.length)}static compareSegments(e,r){const i=Or.isNumericId(e),s=Or.isNumericId(r);return i&&!s?-1:!i&&s?1:i&&s?Or.extractNumericId(e).compare(Or.extractNumericId(r)):e<r?-1:e>r?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return as.fromString(e.substring(4,e.length-2))}}class pt extends Or{construct(e,r,i){return new pt(e,r,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const i of e){if(i.indexOf("//")>=0)throw new ye(ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);r.push(...i.split("/").filter(s=>s.length>0))}return new pt(r)}static emptyPath(){return new pt([])}}const $j=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends Or{construct(e,r,i){return new Qt(e,r,i)}static isValidIdentifier(e){return $j.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===kb}static keyField(){return new Qt([kb])}static fromServerFormat(e){const r=[];let i="",s=0;const a=()=>{if(i.length===0)throw new ye(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(i),i=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ye(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ye(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(i+=l,s++):(a(),s++)}if(a(),o)throw new ye(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(r)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(pt.fromString(e))}static fromName(e){return new be(pt.fromString(e).popFirst(5))}static empty(){return new be(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return pt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new pt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iu=-1;function Hj(t,e){const r=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Se.fromTimestamp(i===1e9?new Lt(r+1,0):new Lt(r,i));return new ps(s,be.empty(),e)}function Wj(t){return new ps(t.readTime,t.key,Iu)}class ps{constructor(e,r,i){this.readTime=e,this.documentKey=r,this.largestBatchId=i}static min(){return new ps(Se.min(),be.empty(),Iu)}static max(){return new ps(Se.max(),be.empty(),Iu)}}function qj(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=be.comparator(t.documentKey,e.documentKey),r!==0?r:Ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Kj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(t){if(t.code!==ee.FAILED_PRECONDITION||t.message!==Gj)throw t;he("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Z((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(r,a).next(i,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Z?r:Z.resolve(r)}catch(r){return Z.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Z.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Z.reject(r)}static resolve(e){return new Z((r,i)=>{r(e)})}static reject(e){return new Z((r,i)=>{i(e)})}static waitFor(e){return new Z((r,i)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&r()},u=>i(u))}),o=!0,a===s&&r()})}static or(e){let r=Z.resolve(!1);for(const i of e)r=r.next(s=>s?Z.resolve(s):i());return r}static forEach(e,r){const i=[];return e.forEach((s,a)=>{i.push(r.call(this,s,a))}),this.waitFor(i)}static mapArray(e,r){return new Z((i,s)=>{const a=e.length,o=new Array(a);let l=0;for(let u=0;u<a;u++){const c=u;r(e[c]).next(h=>{o[c]=h,++l,l===a&&i(o)},h=>s(h))}})}static doWhile(e,r){return new Z((i,s)=>{const a=()=>{e()===!0?r().next(()=>{a()},s):i()};a()})}}function Yj(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function $o(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}wf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy=-1;function bf(t){return t==null}function Eh(t){return t===0&&1/t==-1/0}function Xj(t){return typeof t=="number"&&Number.isInteger(t)&&!Eh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="";function Qj(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=Cb(e)),e=Jj(t.get(r),e);return Cb(e)}function Jj(t,e){let r=e;const i=t.length;for(let s=0;s<i;s++){const a=t.charAt(s);switch(a){case"\0":r+="";break;case A1:r+="";break;default:r+=a}}return r}function Cb(t){return t+A1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Ss(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function P1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,r){this.comparator=e,this.root=r||Xt.EMPTY}insert(e,r){return new bt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}indexOf(e){let r=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return r+i.left.size;s<0?i=i.left:(r+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,i)=>(e(r,i),!1))}toString(){const e=[];return this.inorderTraversal((r,i)=>(e.push(`${r}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nd(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nd(this.root,e,this.comparator,!1)}getReverseIterator(){return new nd(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nd(this.root,e,this.comparator,!0)}}class nd{constructor(e,r,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?i(e.key,r):1,r&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,r,i,s,a){this.key=e,this.value=r,this.color=i??Xt.RED,this.left=s??Xt.EMPTY,this.right=a??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,i,s,a){return new Xt(e??this.key,r??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,r,i),null):a===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let i,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Xt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,r,i,s,a){return this}insert(e,r,i){return new Xt(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,i)=>(e(r),!1))}forEachInRange(e,r){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let i;for(i=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Pb(this.data.getIterator())}getIteratorFrom(e){return new Pb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(i=>{r=r.add(i)}),r}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const r=this.data.getIterator(),i=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ot(this.comparator);return r.data=e,r}}class Pb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new $n([])}unionWith(e){let r=new Ot(Qt.comparator);for(const i of this.fields)r=r.add(i);for(const i of e)r=r.add(i);return new $n(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return _o(this.fields,e.fields,(r,i)=>r.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new R1("Invalid base64 string: "+a):a}}(e);return new nn(r)}static fromUint8Array(e){const r=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new nn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const i=new Uint8Array(r.length);for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const Zj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(t){if(Qe(!!t),typeof t=="string"){let e=0;const r=Zj.exec(t);if(Qe(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:It(t.seconds),nanos:It(t.nanos)}}function It(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gs(t){return typeof t=="string"?nn.fromBase64String(t):nn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D1="server_timestamp",N1="__type__",M1="__previous_value__",L1="__local_write_time__";function By(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[N1])===null||r===void 0?void 0:r.stringValue)===D1}function xf(t){const e=t.mapValue.fields[M1];return By(e)?xf(e):e}function ku(t){const e=ms(t.mapValue.fields[L1].timestampValue);return new Lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e,r,i,s,a,o,l,u,c){this.databaseId=e,this.appId=r,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}const Th="(default)";class Cu{constructor(e,r){this.projectId=e,this.database=r||Th}static empty(){return new Cu("","")}get isDefaultDatabase(){return this.database===Th}isEqual(e){return e instanceof Cu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1="__type__",tV="__max__",rd={mapValue:{}},j1="__vector__",Sh="value";function vs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?By(t)?4:rV(t)?9007199254740991:nV(t)?10:11:Te()}function Gr(t,e){if(t===e)return!0;const r=vs(t);if(r!==vs(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ku(t).isEqual(ku(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=ms(s.timestampValue),l=ms(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return gs(s.bytesValue).isEqual(gs(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return It(s.geoPointValue.latitude)===It(a.geoPointValue.latitude)&&It(s.geoPointValue.longitude)===It(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return It(s.integerValue)===It(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=It(s.doubleValue),l=It(a.doubleValue);return o===l?Eh(o)===Eh(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return _o(t.arrayValue.values||[],e.arrayValue.values||[],Gr);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(Ab(o)!==Ab(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Gr(o[u],l[u])))return!1;return!0}(t,e);default:return Te()}}function Au(t,e){return(t.values||[]).find(r=>Gr(r,e))!==void 0}function wo(t,e){if(t===e)return 0;const r=vs(t),i=vs(e);if(r!==i)return Ve(r,i);switch(r){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=It(a.integerValue||a.doubleValue),u=It(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Rb(t.timestampValue,e.timestampValue);case 4:return Rb(ku(t),ku(e));case 5:return Ve(t.stringValue,e.stringValue);case 6:return function(a,o){const l=gs(a),u=gs(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const h=Ve(l[c],u[c]);if(h!==0)return h}return Ve(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=Ve(It(a.latitude),It(o.latitude));return l!==0?l:Ve(It(a.longitude),It(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Db(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,u,c,h;const f=a.fields||{},p=o.fields||{},m=(l=f[Sh])===null||l===void 0?void 0:l.arrayValue,w=(u=p[Sh])===null||u===void 0?void 0:u.arrayValue,A=Ve(((c=m==null?void 0:m.values)===null||c===void 0?void 0:c.length)||0,((h=w==null?void 0:w.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:Db(m,w)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===rd.mapValue&&o===rd.mapValue)return 0;if(a===rd.mapValue)return 1;if(o===rd.mapValue)return-1;const l=a.fields||{},u=Object.keys(l),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const p=Ve(u[f],h[f]);if(p!==0)return p;const m=wo(l[u[f]],c[h[f]]);if(m!==0)return m}return Ve(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Te()}}function Rb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);const r=ms(t),i=ms(e),s=Ve(r.seconds,i.seconds);return s!==0?s:Ve(r.nanos,i.nanos)}function Db(t,e){const r=t.values||[],i=e.values||[];for(let s=0;s<r.length&&s<i.length;++s){const a=wo(r[s],i[s]);if(a)return a}return Ve(r.length,i.length)}function bo(t){return jg(t)}function jg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=ms(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return gs(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return be.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let i="[",s=!0;for(const a of r.values||[])s?s=!1:i+=",",i+=jg(a);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",a=!0;for(const o of i)a?a=!1:s+=",",s+=`${o}:${jg(r.fields[o])}`;return s+"}"}(t.mapValue):Te()}function Ld(t){switch(vs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xf(t);return e?16+Ld(e):16;case 5:return 2*t.stringValue.length;case 6:return gs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,a)=>s+Ld(a),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return Ss(i.fields,(a,o)=>{s+=a.length+Ld(o)}),s}(t.mapValue);default:throw Te()}}function Vg(t){return!!t&&"integerValue"in t}function zy(t){return!!t&&"arrayValue"in t}function Nb(t){return!!t&&"nullValue"in t}function Mb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Od(t){return!!t&&"mapValue"in t}function nV(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[O1])===null||r===void 0?void 0:r.stringValue)===j1}function Xl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ss(t.mapValue.fields,(r,i)=>e.mapValue.fields[r]=Xl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Xl(t.arrayValue.values[r]);return e}return Object.assign({},t)}function rV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===tV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let i=0;i<e.length-1;++i)if(r=(r.mapValue.fields||{})[e.get(i)],!Od(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xl(r)}setAll(e){let r=Qt.emptyPath(),i={},s=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const u=this.getFieldsMap(r);this.applyChanges(u,i,s),i={},s=[],r=l.popLast()}o?i[l.lastSegment()]=Xl(o):s.push(l.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,i,s)}delete(e){const r=this.field(e.popLast());Od(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Gr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=r.mapValue.fields[e.get(i)];Od(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(i)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,i){Ss(r,(s,a)=>e[s]=a);for(const s of i)delete e[s]}clone(){return new Nn(Xl(this.value))}}function V1(t){const e=[];return Ss(t.fields,(r,i)=>{const s=new Qt([r]);if(Od(i)){const a=V1(i.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new $n(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,r,i,s,a,o,l){this.key=e,this.documentType=r,this.version=i,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new fn(e,0,Se.min(),Se.min(),Se.min(),Nn.empty(),0)}static newFoundDocument(e,r,i,s){return new fn(e,1,r,Se.min(),i,s,0)}static newNoDocument(e,r){return new fn(e,2,r,Se.min(),Se.min(),Nn.empty(),0)}static newUnknownDocument(e,r){return new fn(e,3,r,Se.min(),Se.min(),Nn.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,r){this.position=e,this.inclusive=r}}function Lb(t,e,r){let i=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?i=be.comparator(be.fromName(o.referenceValue),r.key):i=wo(o,r.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function Ob(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Gr(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kh{constructor(e,r="asc"){this.field=e,this.dir=r}}function iV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F1{}class Nt extends F1{constructor(e,r,i){super(),this.field=e,this.op=r,this.value=i}static create(e,r,i){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,i):new aV(e,r,i):r==="array-contains"?new uV(e,i):r==="in"?new cV(e,i):r==="not-in"?new dV(e,i):r==="array-contains-any"?new hV(e,i):new Nt(e,r,i)}static createKeyFieldInFilter(e,r,i){return r==="in"?new oV(e,i):new lV(e,i)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(wo(r,this.value)):r!==null&&vs(this.value)===vs(r)&&this.matchesComparison(wo(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kr extends F1{constructor(e,r){super(),this.filters=e,this.op=r,this.ce=null}static create(e,r){return new Kr(e,r)}matches(e){return U1(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function U1(t){return t.op==="and"}function B1(t){return sV(t)&&U1(t)}function sV(t){for(const e of t.filters)if(e instanceof Kr)return!1;return!0}function Fg(t){if(t instanceof Nt)return t.field.canonicalString()+t.op.toString()+bo(t.value);if(B1(t))return t.filters.map(e=>Fg(e)).join(",");{const e=t.filters.map(r=>Fg(r)).join(",");return`${t.op}(${e})`}}function z1(t,e){return t instanceof Nt?function(i,s){return s instanceof Nt&&i.op===s.op&&i.field.isEqual(s.field)&&Gr(i.value,s.value)}(t,e):t instanceof Kr?function(i,s){return s instanceof Kr&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((a,o,l)=>a&&z1(o,s.filters[l]),!0):!1}(t,e):void Te()}function $1(t){return t instanceof Nt?function(r){return`${r.field.canonicalString()} ${r.op} ${bo(r.value)}`}(t):t instanceof Kr?function(r){return r.op.toString()+" {"+r.getFilters().map($1).join(" ,")+"}"}(t):"Filter"}class aV extends Nt{constructor(e,r,i){super(e,r,i),this.key=be.fromName(i.referenceValue)}matches(e){const r=be.comparator(e.key,this.key);return this.matchesComparison(r)}}class oV extends Nt{constructor(e,r){super(e,"in",r),this.keys=H1("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class lV extends Nt{constructor(e,r){super(e,"not-in",r),this.keys=H1("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function H1(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(i=>be.fromName(i.referenceValue))}class uV extends Nt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return zy(r)&&Au(r.arrayValue,this.value)}}class cV extends Nt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Au(this.value.arrayValue,r)}}class dV extends Nt{constructor(e,r){super(e,"not-in",r)}matches(e){if(Au(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Au(this.value.arrayValue,r)}}class hV extends Nt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!zy(r)||!r.arrayValue.values)&&r.arrayValue.values.some(i=>Au(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,r=null,i=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.le=null}}function jb(t,e=null,r=[],i=[],s=null,a=null,o=null){return new fV(t,e,r,i,s,a,o)}function $y(t){const e=ke(t);if(e.le===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(i=>Fg(i)).join(","),r+="|ob:",r+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),bf(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>bo(i)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>bo(i)).join(",")),e.le=r}return e.le}function Hy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!iV(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!z1(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ob(t.startAt,e.startAt)&&Ob(t.endAt,e.endAt)}function Ug(t){return be.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,r=null,i=[],s=[],a=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function pV(t,e,r,i,s,a,o,l){return new Ef(t,e,r,i,s,a,o,l)}function Wy(t){return new Ef(t)}function Vb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function mV(t){return t.collectionGroup!==null}function Ql(t){const e=ke(t);if(e.he===null){e.he=[];const r=new Set;for(const a of e.explicitOrderBy)e.he.push(a),r.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ot(Qt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.he.push(new kh(a,i))}),r.has(Qt.keyField().canonicalString())||e.he.push(new kh(Qt.keyField(),i))}return e.he}function $r(t){const e=ke(t);return e.Pe||(e.Pe=gV(e,Ql(t))),e.Pe}function gV(t,e){if(t.limitType==="F")return jb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new kh(s.field,a)});const r=t.endAt?new Ih(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ih(t.startAt.position,t.startAt.inclusive):null;return jb(t.path,t.collectionGroup,e,t.filters,t.limit,r,i)}}function Bg(t,e,r){return new Ef(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Tf(t,e){return Hy($r(t),$r(e))&&t.limitType===e.limitType}function W1(t){return`${$y($r(t))}|lt:${t.limitType}`}function Ma(t){return`Query(target=${function(r){let i=r.path.canonicalString();return r.collectionGroup!==null&&(i+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(i+=`, filters: [${r.filters.map(s=>$1(s)).join(", ")}]`),bf(r.limit)||(i+=", limit: "+r.limit),r.orderBy.length>0&&(i+=`, orderBy: [${r.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),r.startAt&&(i+=", startAt: ",i+=r.startAt.inclusive?"b:":"a:",i+=r.startAt.position.map(s=>bo(s)).join(",")),r.endAt&&(i+=", endAt: ",i+=r.endAt.inclusive?"a:":"b:",i+=r.endAt.position.map(s=>bo(s)).join(",")),`Target(${i})`}($r(t))}; limitType=${t.limitType})`}function Sf(t,e){return e.isFoundDocument()&&function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):be.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(t,e)&&function(i,s){for(const a of Ql(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(o,l,u){const c=Lb(o,l,u);return o.inclusive?c<=0:c<0}(i.startAt,Ql(i),s)||i.endAt&&!function(o,l,u){const c=Lb(o,l,u);return o.inclusive?c>=0:c>0}(i.endAt,Ql(i),s))}(t,e)}function vV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function q1(t){return(e,r)=>{let i=!1;for(const s of Ql(t)){const a=yV(s,e,r);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function yV(t,e,r){const i=t.field.isKeyField()?be.comparator(e.key,r.key):function(a,o,l){const u=o.data.field(a),c=l.data.field(a);return u!==null&&c!==null?wo(u,c):Te()}(t.field,e,r);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,r]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[r]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ss(this.inner,(r,i)=>{for(const[s,a]of i)e(s,a)})}isEmpty(){return P1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _V=new bt(be.comparator);function bi(){return _V}const G1=new bt(be.comparator);function Ll(...t){let e=G1;for(const r of t)e=e.insert(r.key,r);return e}function K1(t){let e=G1;return t.forEach((r,i)=>e=e.insert(r,i.overlayedDocument)),e}function Xs(){return Jl()}function Y1(){return Jl()}function Jl(){return new ma(t=>t.toString(),(t,e)=>t.isEqual(e))}const wV=new bt(be.comparator),bV=new Ot(be.comparator);function Oe(...t){let e=bV;for(const r of t)e=e.add(r);return e}const xV=new Ot(Ve);function EV(){return xV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eh(e)?"-0":e}}function X1(t){return{integerValue:""+t}}function TV(t,e){return Xj(e)?X1(e):qy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(){this._=void 0}}function SV(t,e,r){return t instanceof Ch?function(s,a){const o={fields:{[N1]:{stringValue:D1},[L1]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&By(a)&&(a=xf(a)),a&&(o.fields[M1]=a),{mapValue:o}}(r,e):t instanceof Pu?J1(t,e):t instanceof Ru?Z1(t,e):function(s,a){const o=Q1(s,a),l=Fb(o)+Fb(s.Ie);return Vg(o)&&Vg(s.Ie)?X1(l):qy(s.serializer,l)}(t,e)}function IV(t,e,r){return t instanceof Pu?J1(t,e):t instanceof Ru?Z1(t,e):r}function Q1(t,e){return t instanceof Ah?function(i){return Vg(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class Ch extends If{}class Pu extends If{constructor(e){super(),this.elements=e}}function J1(t,e){const r=ek(e);for(const i of t.elements)r.some(s=>Gr(s,i))||r.push(i);return{arrayValue:{values:r}}}class Ru extends If{constructor(e){super(),this.elements=e}}function Z1(t,e){let r=ek(e);for(const i of t.elements)r=r.filter(s=>!Gr(s,i));return{arrayValue:{values:r}}}class Ah extends If{constructor(e,r){super(),this.serializer=e,this.Ie=r}}function Fb(t){return It(t.integerValue||t.doubleValue)}function ek(t){return zy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function kV(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Pu&&s instanceof Pu||i instanceof Ru&&s instanceof Ru?_o(i.elements,s.elements,Gr):i instanceof Ah&&s instanceof Ah?Gr(i.Ie,s.Ie):i instanceof Ch&&s instanceof Ch}(t.transform,e.transform)}class CV{constructor(e,r){this.version=e,this.transformResults=r}}class Hr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Hr}static exists(e){return new Hr(void 0,e)}static updateTime(e){return new Hr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class kf{}function tk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rk(t.key,Hr.none()):new Zu(t.key,t.data,Hr.none());{const r=t.data,i=Nn.empty();let s=new Ot(Qt.comparator);for(let a of e.fields)if(!s.has(a)){let o=r.field(a);o===null&&a.length>1&&(a=a.popLast(),o=r.field(a)),o===null?i.delete(a):i.set(a,o),s=s.add(a)}return new Is(t.key,i,new $n(s.toArray()),Hr.none())}}function AV(t,e,r){t instanceof Zu?function(s,a,o){const l=s.value.clone(),u=Bb(s.fieldTransforms,a,o.transformResults);l.setAll(u),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Is?function(s,a,o){if(!jd(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=Bb(s.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(nk(s)),u.setAll(l),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,r):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function Zl(t,e,r,i){return t instanceof Zu?function(a,o,l,u){if(!jd(a.precondition,o))return l;const c=a.value.clone(),h=zb(a.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,r,i):t instanceof Is?function(a,o,l,u){if(!jd(a.precondition,o))return l;const c=zb(a.fieldTransforms,u,o),h=o.data;return h.setAll(nk(a)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(f=>f.field))}(t,e,r,i):function(a,o,l){return jd(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function PV(t,e){let r=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),a=Q1(i.transform,s||null);a!=null&&(r===null&&(r=Nn.empty()),r.set(i.field,a))}return r||null}function Ub(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&_o(i,s,(a,o)=>kV(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Zu extends kf{constructor(e,r,i,s=[]){super(),this.key=e,this.value=r,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Is extends kf{constructor(e,r,i,s,a=[]){super(),this.key=e,this.data=r,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function nk(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const i=t.data.field(r);e.set(r,i)}}),e}function Bb(t,e,r){const i=new Map;Qe(t.length===r.length);for(let s=0;s<r.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);i.set(a.field,IV(o,l,r[s]))}return i}function zb(t,e,r){const i=new Map;for(const s of t){const a=s.transform,o=r.data.field(s.field);i.set(s.field,SV(a,o,e))}return i}class rk extends kf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class RV extends kf{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NV{constructor(e,r,i,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,r){const i=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&AV(a,e,i[s])}}applyToLocalView(e,r){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(r=Zl(i,e,r,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(r=Zl(i,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const i=Y1();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=r.has(s.key)?null:l;const u=tk(o,l);u!==null&&i.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Se.min())}),i}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Oe())}isEqual(e){return this.batchId===e.batchId&&_o(this.mutations,e.mutations,(r,i)=>Ub(r,i))&&_o(this.baseMutations,e.baseMutations,(r,i)=>Ub(r,i))}}class Gy{constructor(e,r,i,s){this.batch=e,this.commitVersion=r,this.mutationResults=i,this.docVersions=s}static from(e,r,i){Qe(e.mutations.length===i.length);let s=function(){return wV}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,i[o].version);return new Gy(e,r,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,Be;function OV(t){switch(t){case ee.OK:return Te();case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Te()}}function ik(t){if(t===void 0)return wi("GRPC error has no .code"),ee.UNKNOWN;switch(t){case Ct.OK:return ee.OK;case Ct.CANCELLED:return ee.CANCELLED;case Ct.UNKNOWN:return ee.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return ee.INTERNAL;case Ct.UNAVAILABLE:return ee.UNAVAILABLE;case Ct.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Ct.NOT_FOUND:return ee.NOT_FOUND;case Ct.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Ct.ABORTED:return ee.ABORTED;case Ct.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Ct.DATA_LOSS:return ee.DATA_LOSS;default:return Te()}}(Be=Ct||(Ct={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV=new as([4294967295,4294967295],0);function $b(t){const e=jV().encode(t),r=new b1;return r.update(e),new Uint8Array(r.digest())}function Hb(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new as([r,i],0),new as([s,a],0)]}class Ky{constructor(e,r,i){if(this.bitmap=e,this.padding=r,this.hashCount=i,r<0||r>=8)throw new Ol(`Invalid padding: ${r}`);if(i<0)throw new Ol(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ol(`Invalid hash count: ${i}`);if(e.length===0&&r!==0)throw new Ol(`Invalid padding when bitmap length is 0: ${r}`);this.Ee=8*e.length-r,this.de=as.fromNumber(this.Ee)}Ae(e,r,i){let s=e.add(r.multiply(as.fromNumber(i)));return s.compare(VV)===1&&(s=new as([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const r=$b(e),[i,s]=Hb(r);for(let a=0;a<this.hashCount;a++){const o=this.Ae(i,s,a);if(!this.Re(o))return!1}return!0}static create(e,r,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Ky(a,s,r);return i.forEach(l=>o.insert(l)),o}insert(e){if(this.Ee===0)return;const r=$b(e),[i,s]=Hb(r);for(let a=0;a<this.hashCount;a++){const o=this.Ae(i,s,a);this.Ve(o)}}Ve(e){const r=Math.floor(e/8),i=e%8;this.bitmap[r]|=1<<i}}class Ol extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(e,r,i,s,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,i){const s=new Map;return s.set(e,ec.createSynthesizedTargetChangeForCurrentChange(e,r,i)),new Cf(Se.min(),s,new bt(Ve),bi(),Oe())}}class ec{constructor(e,r,i,s,a){this.resumeToken=e,this.current=r,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,i){return new ec(i,r,Oe(),Oe(),Oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e,r,i,s){this.me=e,this.removedTargetIds=r,this.key=i,this.fe=s}}class sk{constructor(e,r){this.targetId=e,this.ge=r}}class ak{constructor(e,r,i=nn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=i,this.cause=s}}class Wb{constructor(){this.pe=0,this.ye=qb(),this.we=nn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Oe(),r=Oe(),i=Oe();return this.ye.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:i=i.add(s);break;default:Te()}}),new ec(this.we,this.Se,e,r,i)}Me(){this.be=!1,this.ye=qb()}xe(e,r){this.be=!0,this.ye=this.ye.insert(e,r)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Qe(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class FV{constructor(e){this.ke=e,this.qe=new Map,this.Qe=bi(),this.$e=id(),this.Ke=id(),this.Ue=new bt(Ve)}We(e){for(const r of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(r,e.fe):this.ze(r,e.key,e.fe);for(const r of e.removedTargetIds)this.ze(r,e.key,e.fe)}je(e){this.forEachTarget(e,r=>{const i=this.He(r);switch(e.state){case 0:this.Je(r)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(r);break;case 3:this.Je(r)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(r)&&(this.Ye(r),i.Ce(e.resumeToken));break;default:Te()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.qe.forEach((i,s)=>{this.Je(s)&&r(s)})}Ze(e){const r=e.targetId,i=e.ge.count,s=this.Xe(r);if(s){const a=s.target;if(Ug(a))if(i===0){const o=new be(a.path);this.ze(r,o,fn.newNoDocument(o,Se.min()))}else Qe(i===1);else{const o=this.et(r);if(o!==i){const l=this.tt(e),u=l?this.nt(l,e,o):1;if(u!==0){this.Ye(r);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(r,c)}}}}}tt(e){const r=e.ge.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=r;let o,l;try{o=gs(i).toUint8Array()}catch(u){if(u instanceof R1)return yo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Ky(o,s,a)}catch(u){return yo(u instanceof Ol?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ee===0?null:l}nt(e,r,i){return r.ge.count===i-this.st(e,r.targetId)?0:2}st(e,r){const i=this.ke.getRemoteKeysForTarget(r);let s=0;return i.forEach(a=>{const o=this.ke.it(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.ze(r,a,null),s++)}),s}ot(e){const r=new Map;this.qe.forEach((a,o)=>{const l=this.Xe(o);if(l){if(a.current&&Ug(l.target)){const u=new be(l.target.path);this._t(u).has(o)||this.ut(o,u)||this.ze(o,u,fn.newNoDocument(u,e))}a.ve&&(r.set(o,a.Fe()),a.Me())}});let i=Oe();this.Ke.forEach((a,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Xe(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(a))}),this.Qe.forEach((a,o)=>o.setReadTime(e));const s=new Cf(e,r,this.Ue,this.Qe,i);return this.Qe=bi(),this.$e=id(),this.Ke=id(),this.Ue=new bt(Ve),s}Ge(e,r){if(!this.Je(e))return;const i=this.ut(e,r.key)?2:0;this.He(e).xe(r.key,i),this.Qe=this.Qe.insert(r.key,r),this.$e=this.$e.insert(r.key,this._t(r.key).add(e)),this.Ke=this.Ke.insert(r.key,this.ct(r.key).add(e))}ze(e,r,i){if(!this.Je(e))return;const s=this.He(e);this.ut(e,r)?s.xe(r,1):s.Oe(r),this.Ke=this.Ke.insert(r,this.ct(r).delete(e)),this.Ke=this.Ke.insert(r,this.ct(r).add(e)),i&&(this.Qe=this.Qe.insert(r,i))}removeTarget(e){this.qe.delete(e)}et(e){const r=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let r=this.qe.get(e);return r||(r=new Wb,this.qe.set(e,r)),r}ct(e){let r=this.Ke.get(e);return r||(r=new Ot(Ve),this.Ke=this.Ke.insert(e,r)),r}_t(e){let r=this.$e.get(e);return r||(r=new Ot(Ve),this.$e=this.$e.insert(e,r)),r}Je(e){const r=this.Xe(e)!==null;return r||he("WatchChangeAggregator","Detected inactive target",e),r}Xe(e){const r=this.qe.get(e);return r&&r.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Wb),this.ke.getRemoteKeysForTarget(e).forEach(r=>{this.ze(e,r,null)})}ut(e,r){return this.ke.getRemoteKeysForTarget(e).has(r)}}function id(){return new bt(be.comparator)}function qb(){return new bt(be.comparator)}const UV={asc:"ASCENDING",desc:"DESCENDING"},BV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zV={and:"AND",or:"OR"};class $V{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function zg(t,e){return t.useProto3Json||bf(e)?e:{value:e}}function Ph(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ok(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function HV(t,e){return Ph(t,e.toTimestamp())}function Wr(t){return Qe(!!t),Se.fromTimestamp(function(r){const i=ms(r);return new Lt(i.seconds,i.nanos)}(t))}function Yy(t,e){return $g(t,e).canonicalString()}function $g(t,e){const r=function(s){return new pt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function lk(t){const e=pt.fromString(t);return Qe(fk(e)),e}function Hg(t,e){return Yy(t.databaseId,e.path)}function Zp(t,e){const r=lk(e);if(r.get(1)!==t.databaseId.projectId)throw new ye(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ye(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new be(ck(r))}function uk(t,e){return Yy(t.databaseId,e)}function WV(t){const e=lk(t);return e.length===4?pt.emptyPath():ck(e)}function Wg(t){return new pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ck(t){return Qe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Gb(t,e,r){return{name:Hg(t,e),fields:r.value.mapValue.fields}}function qV(t,e){let r;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(c,h){return c.useProto3Json?(Qe(h===void 0||typeof h=="string"),nn.fromBase64String(h||"")):(Qe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),nn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const h=c.code===void 0?ee.UNKNOWN:ik(c.code);return new ye(h,c.message||"")}(o);r=new ak(i,s,a,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Zp(t,i.document.name),a=Wr(i.document.updateTime),o=i.document.createTime?Wr(i.document.createTime):Se.min(),l=new Nn({mapValue:{fields:i.document.fields}}),u=fn.newFoundDocument(s,a,o,l),c=i.targetIds||[],h=i.removedTargetIds||[];r=new Vd(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Zp(t,i.document),a=i.readTime?Wr(i.readTime):Se.min(),o=fn.newNoDocument(s,a),l=i.removedTargetIds||[];r=new Vd([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Zp(t,i.document),a=i.removedTargetIds||[];r=new Vd([],a,s,null)}else{if(!("filter"in e))return Te();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,o=new LV(s,a),l=i.targetId;r=new sk(l,o)}}return r}function GV(t,e){let r;if(e instanceof Zu)r={update:Gb(t,e.key,e.value)};else if(e instanceof rk)r={delete:Hg(t,e.key)};else if(e instanceof Is)r={update:Gb(t,e.key,e.data),updateMask:nF(e.fieldMask)};else{if(!(e instanceof RV))return Te();r={verify:Hg(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(i=>function(a,o){const l=o.transform;if(l instanceof Ch)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Pu)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ru)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ah)return{fieldPath:o.field.canonicalString(),increment:l.Ie};throw Te()}(0,i))),e.precondition.isNone||(r.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:HV(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Te()}(t,e.precondition)),r}function KV(t,e){return t&&t.length>0?(Qe(e!==void 0),t.map(r=>function(s,a){let o=s.updateTime?Wr(s.updateTime):Wr(a);return o.isEqual(Se.min())&&(o=Wr(a)),new CV(o,s.transformResults||[])}(r,e))):[]}function YV(t,e){return{documents:[uk(t,e.path)]}}function XV(t,e){const r={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),r.structuredQuery.from=[{collectionId:i.lastSegment()}]),r.parent=uk(t,s);const a=function(c){if(c.length!==0)return hk(Kr.create(c,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:La(p.field),direction:ZV(p.dir)}}(h))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=zg(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ht:r,parent:s}}function QV(t){let e=WV(t.parent);const r=t.structuredQuery,i=r.from?r.from.length:0;let s=null;if(i>0){Qe(i===1);const h=r.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let a=[];r.where&&(a=function(f){const p=dk(f);return p instanceof Kr&&B1(p)?p.getFilters():[p]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(p=>function(w){return new kh(Oa(w.field),function(D){switch(D){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(p))}(r.orderBy));let l=null;r.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,bf(p)?null:p}(r.limit));let u=null;r.startAt&&(u=function(f){const p=!!f.before,m=f.values||[];return new Ih(m,p)}(r.startAt));let c=null;return r.endAt&&(c=function(f){const p=!f.before,m=f.values||[];return new Ih(m,p)}(r.endAt)),pV(e,s,o,a,l,"F",u,c)}function JV(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function dk(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const i=Oa(r.unaryFilter.field);return Nt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Oa(r.unaryFilter.field);return Nt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Oa(r.unaryFilter.field);return Nt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Oa(r.unaryFilter.field);return Nt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(t):t.fieldFilter!==void 0?function(r){return Nt.create(Oa(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Kr.create(r.compositeFilter.filters.map(i=>dk(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Te()}}(r.compositeFilter.op))}(t):Te()}function ZV(t){return UV[t]}function eF(t){return BV[t]}function tF(t){return zV[t]}function La(t){return{fieldPath:t.canonicalString()}}function Oa(t){return Qt.fromServerFormat(t.fieldPath)}function hk(t){return t instanceof Nt?function(r){if(r.op==="=="){if(Mb(r.value))return{unaryFilter:{field:La(r.field),op:"IS_NAN"}};if(Nb(r.value))return{unaryFilter:{field:La(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Mb(r.value))return{unaryFilter:{field:La(r.field),op:"IS_NOT_NAN"}};if(Nb(r.value))return{unaryFilter:{field:La(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:La(r.field),op:eF(r.op),value:r.value}}}(t):t instanceof Kr?function(r){const i=r.getFilters().map(s=>hk(s));return i.length===1?i[0]:{compositeFilter:{op:tF(r.op),filters:i}}}(t):Te()}function nF(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function fk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,r,i,s,a=Se.min(),o=Se.min(),l=nn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rF{constructor(e){this.Tt=e}}function iF(t){const e=QV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Bg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{constructor(){this.Tn=new aF}addToCollectionParentIndex(e,r){return this.Tn.add(r),Z.resolve()}getCollectionParents(e,r){return Z.resolve(this.Tn.getEntries(r))}addFieldIndex(e,r){return Z.resolve()}deleteFieldIndex(e,r){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,r){return Z.resolve()}getDocumentsMatchingTarget(e,r){return Z.resolve(null)}getIndexType(e,r){return Z.resolve(0)}getFieldIndexes(e,r){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,r){return Z.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,r){return Z.resolve(ps.min())}updateCollectionGroup(e,r,i){return Z.resolve()}updateIndexEntries(e,r){return Z.resolve()}}class aF{constructor(){this.index={}}add(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r]||new Ot(pt.comparator),a=!s.has(i);return this.index[r]=s.add(i),a}has(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Ot(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pk=41943040;class Rn{static withCacheSize(e){return new Rn(e,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(pk,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new xo(0)}static Un(){return new xo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yb="LruGarbageCollector",oF=1048576;function Xb([t,e],[r,i]){const s=Ve(t,r);return s===0?Ve(e,i):s}class lF{constructor(e){this.Hn=e,this.buffer=new Ot(Xb),this.Jn=0}Yn(){return++this.Jn}Zn(e){const r=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(r);else{const i=this.buffer.last();Xb(r,i)<0&&(this.buffer=this.buffer.delete(i).add(r))}}get maxValue(){return this.buffer.last()[0]}}class uF{constructor(e,r,i){this.garbageCollector=e,this.asyncQueue=r,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){he(Yb,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){$o(r)?he(Yb,"Ignoring IndexedDB error during garbage collection: ",r):await zo(r)}await this.er(3e5)})}}class cF{constructor(e,r){this.tr=e,this.params=r}calculateTargetCount(e,r){return this.tr.nr(e).next(i=>Math.floor(r/100*i))}nthSequenceNumber(e,r){if(r===0)return Z.resolve(wf.ae);const i=new lF(r);return this.tr.forEachTarget(e,s=>i.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>i.Zn(s))).next(()=>i.maxValue)}removeTargets(e,r,i){return this.tr.removeTargets(e,r,i)}removeOrphanedDocuments(e,r){return this.tr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(Kb)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Kb):this.ir(e,r))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,r){let i,s,a,o,l,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(i=f,l=Date.now(),this.removeTargets(e,i,r))).next(f=>(a=f,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(f=>(c=Date.now(),Na()<=Le.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${a} targets in `+(u-l)+`ms
	Removed ${f} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:f})))}}function dF(t,e){return new cF(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hF{constructor(){this.changes=new ma(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const i=this.changes.get(r);return i!==void 0?Z.resolve(i):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e,r,i,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,r){let i=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(i!==null&&Zl(i.mutation,s,$n.empty(),Lt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.getLocalViewOfDocuments(e,i,Oe()).next(()=>i))}getLocalViewOfDocuments(e,r,i=Oe()){const s=Xs();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,i).next(a=>{let o=Ll();return a.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const i=Xs();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,Oe()))}populateOverlays(e,r,i){const s=[];return i.forEach(a=>{r.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,i,s){let a=bi();const o=Jl(),l=function(){return Jl()}();return r.forEach((u,c)=>{const h=i.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Is)?a=a.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),Zl(h.mutation,c,h.mutation.getFieldMask(),Lt.now())):o.set(c.key,$n.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((c,h)=>o.set(c,h)),r.forEach((c,h)=>{var f;return l.set(c,new fF(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,r){const i=Jl();let s=new bt((o,l)=>o-l),a=Oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=r.get(u);if(c===null)return;let h=i.get(u)||$n.empty();h=l.applyToLocalView(c,h),i.set(u,h);const f=(s.get(l.batchId)||Oe()).add(u);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,h=u.value,f=Y1();h.forEach(p=>{if(!a.has(p)){const m=tk(r.get(p),i.get(p));m!==null&&f.set(p,m),a=a.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return Z.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,r,i,s){return function(o){return be.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):mV(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,i,s):this.getDocumentsMatchingCollectionQuery(e,r,i,s)}getNextDocuments(e,r,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,i,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,i.largestBatchId,s-a.size):Z.resolve(Xs());let l=Iu,u=a;return o.next(c=>Z.forEach(c,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),a.get(h)?Z.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,c,a)).next(()=>this.computeViews(e,u,c,Oe())).next(h=>({batchId:l,changes:K1(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new be(r)).next(i=>{let s=Ll();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,i,s){const a=r.collectionGroup;let o=Ll();return this.indexManager.getCollectionParents(e,a).next(l=>Z.forEach(l,u=>{const c=function(f,p){return new Ef(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,c,i,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,i.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,i,a,s))).next(o=>{a.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,fn.newInvalidDocument(h)))});let l=Ll();return o.forEach((u,c)=>{const h=a.get(u);h!==void 0&&Zl(h.mutation,c,$n.empty(),Lt.now()),Sf(r,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,r){return Z.resolve(this.dr.get(r))}saveBundleMetadata(e,r){return this.dr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Wr(s.createTime)}}(r)),Z.resolve()}getNamedQuery(e,r){return Z.resolve(this.Ar.get(r))}saveNamedQuery(e,r){return this.Ar.set(r.name,function(s){return{name:s.name,query:iF(s.bundledQuery),readTime:Wr(s.readTime)}}(r)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(){this.overlays=new bt(be.comparator),this.Rr=new Map}getOverlay(e,r){return Z.resolve(this.overlays.get(r))}getOverlays(e,r){const i=Xs();return Z.forEach(r,s=>this.getOverlay(e,s).next(a=>{a!==null&&i.set(s,a)})).next(()=>i)}saveOverlays(e,r,i){return i.forEach((s,a)=>{this.Et(e,r,a)}),Z.resolve()}removeOverlaysForBatchId(e,r,i){const s=this.Rr.get(i);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Rr.delete(i)),Z.resolve()}getOverlaysForCollection(e,r,i){const s=Xs(),a=r.length+1,o=new be(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===a&&u.largestBatchId>i&&s.set(u.getKey(),u)}return Z.resolve(s)}getOverlaysForCollectionGroup(e,r,i,s){let a=new bt((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>i){let h=a.get(c.largestBatchId);h===null&&(h=Xs(),a=a.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const l=Xs(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>l.set(c,h)),!(l.size()>=s)););return Z.resolve(l)}Et(e,r,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.Rr.get(s.largestBatchId).delete(i.key);this.Rr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new MV(r,i));let a=this.Rr.get(r);a===void 0&&(a=Oe(),this.Rr.set(r,a)),this.Rr.set(r,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(){this.Vr=new Ot(Ft.mr),this.gr=new Ot(Ft.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,r){const i=new Ft(e,r);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,r){e.forEach(i=>this.addReference(i,r))}removeReference(e,r){this.wr(new Ft(e,r))}Sr(e,r){e.forEach(i=>this.removeReference(i,r))}br(e){const r=new be(new pt([])),i=new Ft(r,e),s=new Ft(r,e+1),a=[];return this.gr.forEachInRange([i,s],o=>{this.wr(o),a.push(o.key)}),a}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const r=new be(new pt([])),i=new Ft(r,e),s=new Ft(r,e+1);let a=Oe();return this.gr.forEachInRange([i,s],o=>{a=a.add(o.key)}),a}containsKey(e){const r=new Ft(e,0),i=this.Vr.firstAfterOrEqual(r);return i!==null&&e.isEqual(i.key)}}class Ft{constructor(e,r){this.key=e,this.Cr=r}static mr(e,r){return be.comparator(e.key,r.key)||Ve(e.Cr,r.Cr)}static pr(e,r){return Ve(e.Cr,r.Cr)||be.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Fr=1,this.Mr=new Ot(Ft.mr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,i,s){const a=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new NV(a,r,i,s);this.mutationQueue.push(o);for(const l of s)this.Mr=this.Mr.add(new Ft(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Z.resolve(o)}lookupMutationBatch(e,r){return Z.resolve(this.Or(r))}getNextMutationBatchAfterBatchId(e,r){const i=r+1,s=this.Nr(i),a=s<0?0:s;return Z.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?Uy:this.Fr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const i=new Ft(r,0),s=new Ft(r,Number.POSITIVE_INFINITY),a=[];return this.Mr.forEachInRange([i,s],o=>{const l=this.Or(o.Cr);a.push(l)}),Z.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let i=new Ot(Ve);return r.forEach(s=>{const a=new Ft(s,0),o=new Ft(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([a,o],l=>{i=i.add(l.Cr)})}),Z.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,r){const i=r.path,s=i.length+1;let a=i;be.isDocumentKey(a)||(a=a.child(""));const o=new Ft(new be(a),0);let l=new Ot(Ve);return this.Mr.forEachWhile(u=>{const c=u.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(l=l.add(u.Cr)),!0)},o),Z.resolve(this.Br(l))}Br(e){const r=[];return e.forEach(i=>{const s=this.Or(i);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Qe(this.Lr(r.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return Z.forEach(r.mutations,s=>{const a=new Ft(s.key,r.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,r){const i=new Ft(r,0),s=this.Mr.firstAfterOrEqual(i);return Z.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}Lr(e,r){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const r=this.Nr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e){this.kr=e,this.docs=function(){return new bt(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const i=r.key,s=this.docs.get(i),a=s?s.size:0,o=this.kr(r);return this.docs=this.docs.insert(i,{document:r.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const i=this.docs.get(r);return Z.resolve(i?i.document.mutableCopy():fn.newInvalidDocument(r))}getEntries(e,r){let i=bi();return r.forEach(s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():fn.newInvalidDocument(s))}),Z.resolve(i)}getDocumentsMatchingQuery(e,r,i,s){let a=bi();const o=r.path,l=new be(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||qj(Wj(h),i)<=0||(s.has(h.key)||Sf(r,h))&&(a=a.insert(h.key,h.mutableCopy()))}return Z.resolve(a)}getAllFromCollectionGroup(e,r,i,s){Te()}qr(e,r){return Z.forEach(this.docs,i=>r(i))}newChangeBuffer(e){return new wF(this)}getSize(e){return Z.resolve(this.size)}}class wF extends hF{constructor(e){super(),this.Ir=e}applyChanges(e){const r=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?r.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(i)}),Z.waitFor(r)}getFromCache(e,r){return this.Ir.getEntry(e,r)}getAllFromCache(e,r){return this.Ir.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bF{constructor(e){this.persistence=e,this.Qr=new ma(r=>$y(r),Hy),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Xy,this.targetCount=0,this.Ur=xo.Kn()}forEachTarget(e,r){return this.Qr.forEach((i,s)=>r(s)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,r,i){return i&&(this.lastRemoteSnapshotVersion=i),r>this.$r&&(this.$r=r),Z.resolve()}zn(e){this.Qr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Ur=new xo(r),this.highestTargetId=r),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,r){return this.zn(r),this.targetCount+=1,Z.resolve()}updateTargetData(e,r){return this.zn(r),Z.resolve()}removeTargetData(e,r){return this.Qr.delete(r.target),this.Kr.br(r.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,r,i){let s=0;const a=[];return this.Qr.forEach((o,l)=>{l.sequenceNumber<=r&&i.get(l.targetId)===null&&(this.Qr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),Z.waitFor(a).next(()=>s)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,r){const i=this.Qr.get(r)||null;return Z.resolve(i)}addMatchingKeys(e,r,i){return this.Kr.yr(r,i),Z.resolve()}removeMatchingKeys(e,r,i){this.Kr.Sr(r,i);const s=this.persistence.referenceDelegate,a=[];return s&&r.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),Z.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this.Kr.br(r),Z.resolve()}getMatchingKeysForTargetId(e,r){const i=this.Kr.vr(r);return Z.resolve(i)}containsKey(e,r){return Z.resolve(this.Kr.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,r){this.Wr={},this.overlays={},this.Gr=new wf(0),this.zr=!1,this.zr=!0,this.jr=new vF,this.referenceDelegate=e(this),this.Hr=new bF(this),this.indexManager=new sF,this.remoteDocumentCache=function(s){return new _F(s)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new rF(r),this.Yr=new mF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new gF,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let i=this.Wr[e.toKey()];return i||(i=new yF(r,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,r,i){he("MemoryPersistence","Starting transaction:",e);const s=new xF(this.Gr.next());return this.referenceDelegate.Zr(),i(s).next(a=>this.referenceDelegate.Xr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}ei(e,r){return Z.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,r)))}}class xF extends Kj{constructor(e){super(),this.currentSequenceNumber=e}}class Qy{constructor(e){this.persistence=e,this.ti=new Xy,this.ni=null}static ri(e){return new Qy(e)}get ii(){if(this.ni)return this.ni;throw Te()}addReference(e,r,i){return this.ti.addReference(i,r),this.ii.delete(i.toString()),Z.resolve()}removeReference(e,r,i){return this.ti.removeReference(i,r),this.ii.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,r){return this.ii.add(r.toString()),Z.resolve()}removeTarget(e,r){this.ti.br(r.targetId).forEach(s=>this.ii.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(a=>this.ii.add(a.toString()))}).next(()=>i.removeTargetData(e,r))}Zr(){this.ni=new Set}Xr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.ii,i=>{const s=be.fromPath(i);return this.si(e,s).next(a=>{a||r.removeEntry(s,Se.min())})}).next(()=>(this.ni=null,r.apply(e)))}updateLimboDocument(e,r){return this.si(e,r).next(i=>{i?this.ii.delete(r.toString()):this.ii.add(r.toString())})}Jr(e){return 0}si(e,r){return Z.or([()=>Z.resolve(this.ti.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.ei(e,r)])}}class Rh{constructor(e,r){this.persistence=e,this.oi=new ma(i=>Qj(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=dF(this,r)}static ri(e,r){return new Rh(e,r)}Zr(){}Xr(e){return Z.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}nr(e){const r=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>r.next(s=>i+s))}sr(e){let r=0;return this.rr(e,i=>{r++}).next(()=>r)}rr(e,r){return Z.forEach(this.oi,(i,s)=>this.ar(e,i,s).next(a=>a?Z.resolve():r(s)))}removeTargets(e,r,i){return this.persistence.getTargetCache().removeTargets(e,r,i)}removeOrphanedDocuments(e,r){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.qr(e,o=>this.ar(e,o,r).next(l=>{l||(i++,a.removeEntry(o,Se.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,r){return this.oi.set(r,e.currentSequenceNumber),Z.resolve()}removeTarget(e,r){const i=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,r,i){return this.oi.set(i,e.currentSequenceNumber),Z.resolve()}removeReference(e,r,i){return this.oi.set(i,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,r){return this.oi.set(r,e.currentSequenceNumber),Z.resolve()}Jr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Ld(e.data.value)),r}ar(e,r,i){return Z.or([()=>this.persistence.ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.oi.get(r);return Z.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jy{constructor(e,r,i,s){this.targetId=e,this.fromCache=r,this.Hi=i,this.Ji=s}static Yi(e,r){let i=Oe(),s=Oe();for(const a of r.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Jy(e,r.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return rM()?8:Yj(gn())>0?6:4}()}initialize(e,r){this.ns=e,this.indexManager=r,this.Zi=!0}getDocumentsMatchingQuery(e,r,i,s){const a={result:null};return this.rs(e,r).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ss(e,r,s,i).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new EF;return this._s(e,r,o).next(l=>{if(a.result=l,this.Xi)return this.us(e,r,o,l.size)})}).next(()=>a.result)}us(e,r,i,s){return i.documentReadCount<this.es?(Na()<=Le.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",Ma(r),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Z.resolve()):(Na()<=Le.DEBUG&&he("QueryEngine","Query:",Ma(r),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ts*s?(Na()<=Le.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",Ma(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$r(r))):Z.resolve())}rs(e,r){if(Vb(r))return Z.resolve(null);let i=$r(r);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Bg(r,null,"F"),i=$r(r)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const o=Oe(...a);return this.ns.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const c=this.cs(r,l);return this.ls(r,c,o,u.readTime)?this.rs(e,Bg(r,null,"F")):this.hs(e,c,r,u)}))})))}ss(e,r,i,s){return Vb(r)||s.isEqual(Se.min())?Z.resolve(null):this.ns.getDocuments(e,i).next(a=>{const o=this.cs(r,a);return this.ls(r,o,i,s)?Z.resolve(null):(Na()<=Le.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ma(r)),this.hs(e,o,r,Hj(s,Iu)).next(l=>l))})}cs(e,r){let i=new Ot(q1(e));return r.forEach((s,a)=>{Sf(e,a)&&(i=i.add(a))}),i}ls(e,r,i,s){if(e.limit===null)return!1;if(i.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}_s(e,r,i){return Na()<=Le.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",Ma(r)),this.ns.getDocumentsMatchingQuery(e,r,ps.min(),i)}hs(e,r,i,s){return this.ns.getDocumentsMatchingQuery(e,i,s).next(a=>(r.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zy="LocalStore",SF=3e8;class IF{constructor(e,r,i,s){this.persistence=e,this.Ps=r,this.serializer=s,this.Ts=new bt(Ve),this.Is=new ma(a=>$y(a),Hy),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pF(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ts))}}function kF(t,e,r,i){return new IF(t,e,r,i)}async function gk(t,e){const r=ke(t);return await r.persistence.runTransaction("Handle user change","readonly",i=>{let s;return r.mutationQueue.getAllMutationBatches(i).next(a=>(s=a,r.As(e),r.mutationQueue.getAllMutationBatches(i))).next(a=>{const o=[],l=[];let u=Oe();for(const c of s){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of a){l.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return r.localDocuments.getDocuments(i,u).next(c=>({Rs:c,removedBatchIds:o,addedBatchIds:l}))})})}function CF(t,e){const r=ke(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),a=r.ds.newChangeBuffer({trackRemovals:!0});return function(l,u,c,h){const f=c.batch,p=f.keys();let m=Z.resolve();return p.forEach(w=>{m=m.next(()=>h.getEntry(u,w)).next(A=>{const D=c.docVersions.get(w);Qe(D!==null),A.version.compareTo(D)<0&&(f.applyToRemoteDocument(A,c),A.isValidDocument()&&(A.setReadTime(c.commitVersion),h.addEntry(A)))})}),m.next(()=>l.mutationQueue.removeMutationBatch(u,f))}(r,i,e,a).next(()=>a.apply(i)).next(()=>r.mutationQueue.performConsistencyCheck(i)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=Oe();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>r.localDocuments.getDocuments(i,s))})}function vk(t){const e=ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Hr.getLastRemoteSnapshotVersion(r))}function AF(t,e){const r=ke(t),i=e.snapshotVersion;let s=r.Ts;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=r.ds.newChangeBuffer({trackRemovals:!0});s=r.Ts;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(r.Hr.removeMatchingKeys(a,h.removedDocuments,f).next(()=>r.Hr.addMatchingKeys(a,h.addedDocuments,f)));let m=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(nn.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,i)),s=s.insert(f,m),function(A,D,T){return A.resumeToken.approximateByteSize()===0||D.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=SF?!0:T.addedDocuments.size+T.modifiedDocuments.size+T.removedDocuments.size>0}(p,m,h)&&l.push(r.Hr.updateTargetData(a,m))});let u=bi(),c=Oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(a,h))}),l.push(PF(a,o,e.documentUpdates).next(h=>{u=h.Vs,c=h.fs})),!i.isEqual(Se.min())){const h=r.Hr.getLastRemoteSnapshotVersion(a).next(f=>r.Hr.setTargetsMetadata(a,a.currentSequenceNumber,i));l.push(h)}return Z.waitFor(l).next(()=>o.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,u,c)).next(()=>u)}).then(a=>(r.Ts=s,a))}function PF(t,e,r){let i=Oe(),s=Oe();return r.forEach(a=>i=i.add(a)),e.getEntries(t,i).next(a=>{let o=bi();return r.forEach((l,u)=>{const c=a.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Se.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):he(Zy,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Vs:o,fs:s}})}function RF(t,e){const r=ke(t);return r.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Uy),r.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function DF(t,e){const r=ke(t);return r.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return r.Hr.getTargetData(i,e).next(a=>a?(s=a,Z.resolve(s)):r.Hr.allocateTargetId(i).next(o=>(s=new Gi(e,o,"TargetPurposeListen",i.currentSequenceNumber),r.Hr.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=r.Ts.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Ts=r.Ts.insert(i.targetId,i),r.Is.set(e,i.targetId)),i})}async function qg(t,e,r){const i=ke(t),s=i.Ts.get(e),a=r?"readwrite":"readwrite-primary";try{r||await i.persistence.runTransaction("Release target",a,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!$o(o))throw o;he(Zy,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ts=i.Ts.remove(e),i.Is.delete(s.target)}function Qb(t,e,r){const i=ke(t);let s=Se.min(),a=Oe();return i.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const f=ke(u),p=f.Is.get(h);return p!==void 0?Z.resolve(f.Ts.get(p)):f.Hr.getTargetData(c,h)}(i,o,$r(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(o,l.targetId).next(u=>{a=u})}).next(()=>i.Ps.getDocumentsMatchingQuery(o,e,r?s:Se.min(),r?a:Oe())).next(l=>(NF(i,vV(e),l),{documents:l,gs:a})))}function NF(t,e,r){let i=t.Es.get(e)||Se.min();r.forEach((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),t.Es.set(e,i)}class Jb{constructor(){this.activeTargetIds=EV()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MF{constructor(){this.ho=new Jb,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,i){}addLocalQueryTarget(e,r=!0){return r&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,r,i){this.Po[e]=r}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Jb,Promise.resolve()}handleUserChange(e,r,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LF{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="ConnectivityMonitor";class ex{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){he(Zb,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){he(Zb,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sd=null;function Gg(){return sd===null?sd=function(){return 268435456+Math.round(2147483648*Math.random())}():sd++,"0x"+sd.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="RestConnection",OF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jF{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=r+"://"+e.host,this.yo=`projects/${i}/databases/${s}`,this.wo=this.databaseId.database===Th?`project_id=${i}`:`project_id=${i}&database_id=${s}`}So(e,r,i,s,a){const o=Gg(),l=this.bo(e,r.toUriEncodedString());he(em,`Sending RPC '${e}' ${o}:`,l,i);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,s,a),this.vo(e,l,u,i).then(c=>(he(em,`Received RPC '${e}' ${o}: `,c),c),c=>{throw yo(em,`RPC '${e}' ${o} failed with error: `,c,"url: ",l,"request:",i),c})}Co(e,r,i,s,a,o){return this.So(e,r,i,s,a)}Do(e,r,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>e[a]=s),i&&i.headers.forEach((s,a)=>e[a]=s)}bo(e,r){const i=OF[e];return`${this.po}/v1/${r}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class FF extends jF{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,r,i,s){const a=Gg();return new Promise((o,l)=>{const u=new x1;u.setWithCredentials(!0),u.listenOnce(E1.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Md.NO_ERROR:const h=u.getResponseJson();he(cn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),o(h);break;case Md.TIMEOUT:he(cn,`RPC '${e}' ${a} timed out`),l(new ye(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Md.HTTP_ERROR:const f=u.getStatus();if(he(cn,`RPC '${e}' ${a} failed with status:`,f,"response text:",u.getResponseText()),f>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const m=p==null?void 0:p.error;if(m&&m.status&&m.message){const w=function(D){const T=D.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(T)>=0?T:ee.UNKNOWN}(m.status);l(new ye(w,m.message))}else l(new ye(ee.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new ye(ee.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{he(cn,`RPC '${e}' ${a} completed.`)}});const c=JSON.stringify(s);he(cn,`RPC '${e}' ${a} sending request:`,s),u.send(r,"POST",c,i,15)})}Wo(e,r,i){const s=Gg(),a=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=I1(),l=S1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,r,i),u.encodeInitMessageHeaders=!0;const h=a.join("");he(cn,`Creating RPC '${e}' stream ${s}: ${h}`,u);const f=o.createWebChannel(h,u);let p=!1,m=!1;const w=new VF({Fo:D=>{m?he(cn,`Not sending because RPC '${e}' stream ${s} is closed:`,D):(p||(he(cn,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),he(cn,`RPC '${e}' stream ${s} sending:`,D),f.send(D))},Mo:()=>f.close()}),A=(D,T,x)=>{D.listen(T,b=>{try{x(b)}catch(P){setTimeout(()=>{throw P},0)}})};return A(f,Ml.EventType.OPEN,()=>{m||(he(cn,`RPC '${e}' stream ${s} transport opened.`),w.Qo())}),A(f,Ml.EventType.CLOSE,()=>{m||(m=!0,he(cn,`RPC '${e}' stream ${s} transport closed`),w.Ko())}),A(f,Ml.EventType.ERROR,D=>{m||(m=!0,yo(cn,`RPC '${e}' stream ${s} transport errored:`,D),w.Ko(new ye(ee.UNAVAILABLE,"The operation could not be completed")))}),A(f,Ml.EventType.MESSAGE,D=>{var T;if(!m){const x=D.data[0];Qe(!!x);const b=x,P=(b==null?void 0:b.error)||((T=b[0])===null||T===void 0?void 0:T.error);if(P){he(cn,`RPC '${e}' stream ${s} received error:`,P);const U=P.status;let V=function(y){const _=Ct[y];if(_!==void 0)return ik(_)}(U),R=P.message;V===void 0&&(V=ee.INTERNAL,R="Unknown error status: "+U+" with message "+P.message),m=!0,w.Ko(new ye(V,R)),f.close()}else he(cn,`RPC '${e}' stream ${s} received:`,x),w.Uo(x)}}),A(l,T1.STAT_EVENT,D=>{D.stat===Og.PROXY?he(cn,`RPC '${e}' stream ${s} detected buffering proxy`):D.stat===Og.NOPROXY&&he(cn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.$o()},0),w}}function tm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Af(t){return new $V(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e,r,i=1e3,s=1.5,a=6e4){this.Ti=e,this.timerId=r,this.Go=i,this.zo=s,this.jo=a,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const r=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),s=Math.max(0,r-i);s>0&&he("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${r} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx="PersistentStream";class _k{constructor(e,r,i,s,a,o,l,u){this.Ti=e,this.n_=i,this.r_=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new yk(e,r)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,r){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():r&&r.code===ee.RESOURCE_EXHAUSTED?(wi(r.toString()),wi("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):r&&r.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(r)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),r=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.i_===r&&this.V_(i,s)},i=>{e(()=>{const s=new ye(ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(s)})})}V_(e,r){const i=this.R_(this.i_);this.stream=this.f_(e,r),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{i(()=>this.m_(s))}),this.stream.onMessage(s=>{i(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return he(tx,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return r=>{this.Ti.enqueueAndForget(()=>this.i_===e?r():(he(tx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class UF extends _k{constructor(e,r,i,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,s,o),this.serializer=a}f_(e,r){return this.connection.Wo("Listen",e,r)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const r=qV(this.serializer,e),i=function(a){if(!("targetChange"in a))return Se.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Se.min():o.readTime?Wr(o.readTime):Se.min()}(e);return this.listener.p_(r,i)}y_(e){const r={};r.database=Wg(this.serializer),r.addTarget=function(a,o){let l;const u=o.target;if(l=Ug(u)?{documents:YV(a,u)}:{query:XV(a,u).ht},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=ok(a,o.resumeToken);const c=zg(a,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(Se.min())>0){l.readTime=Ph(a,o.snapshotVersion.toTimestamp());const c=zg(a,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const i=JV(this.serializer,e);i&&(r.labels=i),this.I_(r)}w_(e){const r={};r.database=Wg(this.serializer),r.removeTarget=e,this.I_(r)}}class BF extends _k{constructor(e,r,i,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,s,o),this.serializer=a}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,r){return this.connection.Wo("Write",e,r)}g_(e){return Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const r=KV(e.writeResults,e.commitTime),i=Wr(e.commitTime);return this.listener.v_(i,r)}C_(){const e={};e.database=Wg(this.serializer),this.I_(e)}b_(e){const r={streamToken:this.lastStreamToken,writes:e.map(i=>GV(this.serializer,i))};this.I_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zF{}class $F extends zF{constructor(e,r,i,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=i,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new ye(ee.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,r,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.So(e,$g(r,i),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ye(ee.UNKNOWN,a.toString())})}Co(e,r,i,s,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Co(e,$g(r,i),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(ee.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class HF{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(wi(r),this.N_=!1):he("OnlineStateTracker",r)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa="RemoteStore";class WF{constructor(e,r,i,s,a){this.localStore=e,this.datastore=r,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=a,this.z_.To(o=>{i.enqueueAndForget(async()=>{ga(this)&&(he(oa,"Restarting streams for network reachability change."),await async function(u){const c=ke(u);c.W_.add(4),await tc(c),c.j_.set("Unknown"),c.W_.delete(4),await Pf(c)}(this))})}),this.j_=new HF(i,s)}}async function Pf(t){if(ga(t))for(const e of t.G_)await e(!0)}async function tc(t){for(const e of t.G_)await e(!1)}function wk(t,e){const r=ke(t);r.U_.has(e.targetId)||(r.U_.set(e.targetId,e),r_(r)?n_(r):Ho(r).c_()&&t_(r,e))}function e_(t,e){const r=ke(t),i=Ho(r);r.U_.delete(e),i.c_()&&bk(r,e),r.U_.size===0&&(i.c_()?i.P_():ga(r)&&r.j_.set("Unknown"))}function t_(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Ho(t).y_(e)}function bk(t,e){t.H_.Ne(e),Ho(t).w_(e)}function n_(t){t.H_=new FV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.U_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),Ho(t).start(),t.j_.B_()}function r_(t){return ga(t)&&!Ho(t).u_()&&t.U_.size>0}function ga(t){return ke(t).W_.size===0}function xk(t){t.H_=void 0}async function qF(t){t.j_.set("Online")}async function GF(t){t.U_.forEach((e,r)=>{t_(t,e)})}async function KF(t,e){xk(t),r_(t)?(t.j_.q_(e),n_(t)):t.j_.set("Unknown")}async function YF(t,e,r){if(t.j_.set("Online"),e instanceof ak&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.U_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.U_.delete(l),s.H_.removeTarget(l))}(t,e)}catch(i){he(oa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Dh(t,i)}else if(e instanceof Vd?t.H_.We(e):e instanceof sk?t.H_.Ze(e):t.H_.je(e),!r.isEqual(Se.min()))try{const i=await vk(t.localStore);r.compareTo(i)>=0&&await function(a,o){const l=a.H_.ot(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.U_.get(c);h&&a.U_.set(c,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const h=a.U_.get(u);if(!h)return;a.U_.set(u,h.withResumeToken(nn.EMPTY_BYTE_STRING,h.snapshotVersion)),bk(a,u);const f=new Gi(h.target,u,c,h.sequenceNumber);t_(a,f)}),a.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(i){he(oa,"Failed to raise snapshot:",i),await Dh(t,i)}}async function Dh(t,e,r){if(!$o(e))throw e;t.W_.add(1),await tc(t),t.j_.set("Offline"),r||(r=()=>vk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{he(oa,"Retrying IndexedDB access"),await r(),t.W_.delete(1),await Pf(t)})}function Ek(t,e){return e().catch(r=>Dh(t,r,e))}async function Rf(t){const e=ke(t),r=ys(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:Uy;for(;XF(e);)try{const s=await RF(e.localStore,i);if(s===null){e.K_.length===0&&r.P_();break}i=s.batchId,QF(e,s)}catch(s){await Dh(e,s)}Tk(e)&&Sk(e)}function XF(t){return ga(t)&&t.K_.length<10}function QF(t,e){t.K_.push(e);const r=ys(t);r.c_()&&r.S_&&r.b_(e.mutations)}function Tk(t){return ga(t)&&!ys(t).u_()&&t.K_.length>0}function Sk(t){ys(t).start()}async function JF(t){ys(t).C_()}async function ZF(t){const e=ys(t);for(const r of t.K_)e.b_(r.mutations)}async function e4(t,e,r){const i=t.K_.shift(),s=Gy.from(i,e,r);await Ek(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Rf(t)}async function t4(t,e){e&&ys(t).S_&&await async function(i,s){if(function(o){return OV(o)&&o!==ee.ABORTED}(s.code)){const a=i.K_.shift();ys(i).h_(),await Ek(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Rf(i)}}(t,e),Tk(t)&&Sk(t)}async function nx(t,e){const r=ke(t);r.asyncQueue.verifyOperationInProgress(),he(oa,"RemoteStore received new credentials");const i=ga(r);r.W_.add(3),await tc(r),i&&r.j_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.W_.delete(3),await Pf(r)}async function n4(t,e){const r=ke(t);e?(r.W_.delete(2),await Pf(r)):e||(r.W_.add(2),await tc(r),r.j_.set("Unknown"))}function Ho(t){return t.J_||(t.J_=function(r,i,s){const a=ke(r);return a.M_(),new UF(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{xo:qF.bind(null,t),No:GF.bind(null,t),Lo:KF.bind(null,t),p_:YF.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),r_(t)?n_(t):t.j_.set("Unknown")):(await t.J_.stop(),xk(t))})),t.J_}function ys(t){return t.Y_||(t.Y_=function(r,i,s){const a=ke(r);return a.M_(),new BF(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:JF.bind(null,t),Lo:t4.bind(null,t),D_:ZF.bind(null,t),v_:e4.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await Rf(t)):(await t.Y_.stop(),t.K_.length>0&&(he(oa,`Stopping write stream with ${t.K_.length} pending writes`),t.K_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,r,i,s,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,i,s,a){const o=Date.now()+i,l=new i_(e,r,o,s,a);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function s_(t,e){if(wi("AsyncQueue",`${e}: ${t}`),$o(t))return new ye(ee.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{static emptySet(e){return new ao(e.comparator)}constructor(e){this.comparator=e?(r,i)=>e(r,i)||be.comparator(r.key,i.key):(r,i)=>be.comparator(r.key,i.key),this.keyedMap=Ll(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,i)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof ao)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const i=new ao;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=r,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rx{constructor(){this.Z_=new bt(be.comparator)}track(e){const r=e.doc.key,i=this.Z_.get(r);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(r,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(r,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(r,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(r,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(r):e.type===1&&i.type===2?this.Z_=this.Z_.insert(r,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(r,{type:2,doc:e.doc}):Te():this.Z_=this.Z_.insert(r,e)}X_(){const e=[];return this.Z_.inorderTraversal((r,i)=>{e.push(i)}),e}}class Eo{constructor(e,r,i,s,a,o,l,u,c){this.query=e,this.docs=r,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,r,i,s,a){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new Eo(e,r,ao.emptySet(r),o,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,i=e.docChanges;if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==i[s].type||!r[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r4{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class i4{constructor(){this.queries=ix(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(r,i){const s=ke(r),a=s.queries;s.queries=ix(),a.forEach((o,l)=>{for(const u of l.ta)u.onError(i)})})(this,new ye(ee.ABORTED,"Firestore shutting down"))}}function ix(){return new ma(t=>W1(t),Tf)}async function Ik(t,e){const r=ke(t);let i=3;const s=e.query;let a=r.queries.get(s);a?!a.na()&&e.ra()&&(i=2):(a=new r4,i=e.ra()?0:1);try{switch(i){case 0:a.ea=await r.onListen(s,!0);break;case 1:a.ea=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(o){const l=s_(o,`Initialization of query '${Ma(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,a),a.ta.push(e),e.sa(r.onlineState),a.ea&&e.oa(a.ea)&&a_(r)}async function kk(t,e){const r=ke(t),i=e.query;let s=3;const a=r.queries.get(i);if(a){const o=a.ta.indexOf(e);o>=0&&(a.ta.splice(o,1),a.ta.length===0?s=e.ra()?0:1:!a.na()&&e.ra()&&(s=2))}switch(s){case 0:return r.queries.delete(i),r.onUnlisten(i,!0);case 1:return r.queries.delete(i),r.onUnlisten(i,!1);case 2:return r.onLastRemoteStoreUnlisten(i);default:return}}function s4(t,e){const r=ke(t);let i=!1;for(const s of e){const a=s.query,o=r.queries.get(a);if(o){for(const l of o.ta)l.oa(s)&&(i=!0);o.ea=s}}i&&a_(r)}function a4(t,e,r){const i=ke(t),s=i.queries.get(e);if(s)for(const a of s.ta)a.onError(r);i.queries.delete(e)}function a_(t){t.ia.forEach(e=>{e.next()})}var Kg,sx;(sx=Kg||(Kg={}))._a="default",sx.Cache="cache";class Ck{constructor(e,r,i){this.query=e,this.aa=r,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Eo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.ua?this.la(e)&&(this.aa.next(e),r=!0):this.ha(e,this.onlineState)&&(this.Pa(e),r=!0),this.ca=e,r}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let r=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),r=!0),r}ha(e,r){if(!e.fromCache||!this.ra())return!0;const i=r!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}la(e){if(e.docChanges.length>0)return!0;const r=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}Pa(e){e=Eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Kg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ak{constructor(e){this.key=e}}class Pk{constructor(e){this.key=e}}class o4{constructor(e,r){this.query=e,this.fa=r,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Oe(),this.mutatedKeys=Oe(),this.ya=q1(e),this.wa=new ao(this.ya)}get Sa(){return this.fa}ba(e,r){const i=r?r.Da:new rx,s=r?r.wa:this.wa;let a=r?r.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),m=Sf(this.query,f)?f:null,w=!!p&&this.mutatedKeys.has(p.key),A=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let D=!1;p&&m?p.data.isEqual(m.data)?w!==A&&(i.track({type:3,doc:m}),D=!0):this.va(p,m)||(i.track({type:2,doc:m}),D=!0,(u&&this.ya(m,u)>0||c&&this.ya(m,c)<0)&&(l=!0)):!p&&m?(i.track({type:0,doc:m}),D=!0):p&&!m&&(i.track({type:1,doc:p}),D=!0,(u||c)&&(l=!0)),D&&(m?(o=o.add(m),a=A?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),i.track({type:1,doc:h})}return{wa:o,Da:i,ls:l,mutatedKeys:a}}va(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,i,s){const a=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((h,f)=>function(m,w){const A=D=>{switch(D){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return A(m)-A(w)}(h.type,f.type)||this.ya(h.doc,f.doc)),this.Ca(i),s=s!=null&&s;const l=r&&!s?this.Fa():[],u=this.pa.size===0&&this.current&&!s?1:0,c=u!==this.ga;return this.ga=u,o.length!==0||c?{snapshot:new Eo(this.query,e.wa,a,o,e.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new rx,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(r=>this.fa=this.fa.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.fa=this.fa.delete(r)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Oe(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const r=[];return e.forEach(i=>{this.pa.has(i)||r.push(new Pk(i))}),this.pa.forEach(i=>{e.has(i)||r.push(new Ak(i))}),r}Oa(e){this.fa=e.gs,this.pa=Oe();const r=this.ba(e.documents);return this.applyChanges(r,!0)}Na(){return Eo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const o_="SyncEngine";class l4{constructor(e,r,i){this.query=e,this.targetId=r,this.view=i}}class u4{constructor(e){this.key=e,this.Ba=!1}}class c4{constructor(e,r,i,s,a,o){this.localStore=e,this.remoteStore=r,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new ma(l=>W1(l),Tf),this.qa=new Map,this.Qa=new Set,this.$a=new bt(be.comparator),this.Ka=new Map,this.Ua=new Xy,this.Wa={},this.Ga=new Map,this.za=xo.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function d4(t,e,r=!0){const i=Ok(t);let s;const a=i.ka.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Na()):s=await Rk(i,e,r,!0),s}async function h4(t,e){const r=Ok(t);await Rk(r,e,!0,!1)}async function Rk(t,e,r,i){const s=await DF(t.localStore,$r(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,r);let l;return i&&(l=await f4(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&r&&wk(t.remoteStore,s),l}async function f4(t,e,r,i,s){t.Ha=(f,p,m)=>async function(A,D,T,x){let b=D.view.ba(T);b.ls&&(b=await Qb(A.localStore,D.query,!1).then(({documents:R})=>D.view.ba(R,b)));const P=x&&x.targetChanges.get(D.targetId),U=x&&x.targetMismatches.get(D.targetId)!=null,V=D.view.applyChanges(b,A.isPrimaryClient,P,U);return ox(A,D.targetId,V.Ma),V.snapshot}(t,f,p,m);const a=await Qb(t.localStore,e,!0),o=new o4(e,a.gs),l=o.ba(a.documents),u=ec.createSynthesizedTargetChangeForCurrentChange(r,i&&t.onlineState!=="Offline",s),c=o.applyChanges(l,t.isPrimaryClient,u);ox(t,r,c.Ma);const h=new l4(e,r,o);return t.ka.set(e,h),t.qa.has(r)?t.qa.get(r).push(e):t.qa.set(r,[e]),c.snapshot}async function p4(t,e,r){const i=ke(t),s=i.ka.get(e),a=i.qa.get(s.targetId);if(a.length>1)return i.qa.set(s.targetId,a.filter(o=>!Tf(o,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await qg(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),r&&e_(i.remoteStore,s.targetId),Yg(i,s.targetId)}).catch(zo)):(Yg(i,s.targetId),await qg(i.localStore,s.targetId,!0))}async function m4(t,e){const r=ke(t),i=r.ka.get(e),s=r.qa.get(i.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(i.targetId),e_(r.remoteStore,i.targetId))}async function g4(t,e,r){const i=E4(t);try{const s=await function(o,l){const u=ke(o),c=Lt.now(),h=l.reduce((m,w)=>m.add(w.key),Oe());let f,p;return u.persistence.runTransaction("Locally write mutations","readwrite",m=>{let w=bi(),A=Oe();return u.ds.getEntries(m,h).next(D=>{w=D,w.forEach((T,x)=>{x.isValidDocument()||(A=A.add(T))})}).next(()=>u.localDocuments.getOverlayedDocuments(m,w)).next(D=>{f=D;const T=[];for(const x of l){const b=PV(x,f.get(x.key).overlayedDocument);b!=null&&T.push(new Is(x.key,b,V1(b.value.mapValue),Hr.exists(!0)))}return u.mutationQueue.addMutationBatch(m,c,T,l)}).next(D=>{p=D;const T=D.applyToLocalDocumentSet(f,A);return u.documentOverlayCache.saveOverlays(m,D.batchId,T)})}).then(()=>({batchId:p.batchId,changes:K1(f)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let c=o.Wa[o.currentUser.toKey()];c||(c=new bt(Ve)),c=c.insert(l,u),o.Wa[o.currentUser.toKey()]=c}(i,s.batchId,r),await nc(i,s.changes),await Rf(i.remoteStore)}catch(s){const a=s_(s,"Failed to persist write");r.reject(a)}}async function Dk(t,e){const r=ke(t);try{const i=await AF(r.localStore,e);e.targetChanges.forEach((s,a)=>{const o=r.Ka.get(a);o&&(Qe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ba=!0:s.modifiedDocuments.size>0?Qe(o.Ba):s.removedDocuments.size>0&&(Qe(o.Ba),o.Ba=!1))}),await nc(r,i,e)}catch(i){await zo(i)}}function ax(t,e,r){const i=ke(t);if(i.isPrimaryClient&&r===0||!i.isPrimaryClient&&r===1){const s=[];i.ka.forEach((a,o)=>{const l=o.view.sa(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=ke(o);u.onlineState=l;let c=!1;u.queries.forEach((h,f)=>{for(const p of f.ta)p.sa(l)&&(c=!0)}),c&&a_(u)}(i.eventManager,e),s.length&&i.La.p_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function v4(t,e,r){const i=ke(t);i.sharedClientState.updateQueryState(e,"rejected",r);const s=i.Ka.get(e),a=s&&s.key;if(a){let o=new bt(be.comparator);o=o.insert(a,fn.newNoDocument(a,Se.min()));const l=Oe().add(a),u=new Cf(Se.min(),new Map,new bt(Ve),o,l);await Dk(i,u),i.$a=i.$a.remove(a),i.Ka.delete(e),l_(i)}else await qg(i.localStore,e,!1).then(()=>Yg(i,e,r)).catch(zo)}async function y4(t,e){const r=ke(t),i=e.batch.batchId;try{const s=await CF(r.localStore,e);Mk(r,i,null),Nk(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),await nc(r,s)}catch(s){await zo(s)}}async function _4(t,e,r){const i=ke(t);try{const s=await function(o,l){const u=ke(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,l).next(f=>(Qe(f!==null),h=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(i.localStore,e);Mk(i,e,r),Nk(i,e),i.sharedClientState.updateMutationState(e,"rejected",r),await nc(i,s)}catch(s){await zo(s)}}function Nk(t,e){(t.Ga.get(e)||[]).forEach(r=>{r.resolve()}),t.Ga.delete(e)}function Mk(t,e,r){const i=ke(t);let s=i.Wa[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(r?a.reject(r):a.resolve(),s=s.remove(e)),i.Wa[i.currentUser.toKey()]=s}}function Yg(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.qa.get(e))t.ka.delete(i),r&&t.La.Ja(i,r);t.qa.delete(e),t.isPrimaryClient&&t.Ua.br(e).forEach(i=>{t.Ua.containsKey(i)||Lk(t,i)})}function Lk(t,e){t.Qa.delete(e.path.canonicalString());const r=t.$a.get(e);r!==null&&(e_(t.remoteStore,r),t.$a=t.$a.remove(e),t.Ka.delete(r),l_(t))}function ox(t,e,r){for(const i of r)i instanceof Ak?(t.Ua.addReference(i.key,e),w4(t,i)):i instanceof Pk?(he(o_,"Document no longer in limbo: "+i.key),t.Ua.removeReference(i.key,e),t.Ua.containsKey(i.key)||Lk(t,i.key)):Te()}function w4(t,e){const r=e.key,i=r.path.canonicalString();t.$a.get(r)||t.Qa.has(i)||(he(o_,"New document in limbo: "+r),t.Qa.add(i),l_(t))}function l_(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const r=new be(pt.fromString(e)),i=t.za.next();t.Ka.set(i,new u4(r)),t.$a=t.$a.insert(r,i),wk(t.remoteStore,new Gi($r(Wy(r.path)),i,"TargetPurposeLimboResolution",wf.ae))}}async function nc(t,e,r){const i=ke(t),s=[],a=[],o=[];i.ka.isEmpty()||(i.ka.forEach((l,u)=>{o.push(i.Ha(u,e,r).then(c=>{var h;if((c||r)&&i.isPrimaryClient){const f=c?!c.fromCache:(h=r==null?void 0:r.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){s.push(c);const f=Jy.Yi(u.targetId,c);a.push(f)}}))}),await Promise.all(o),i.La.p_(s),await async function(u,c){const h=ke(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Z.forEach(c,p=>Z.forEach(p.Hi,m=>h.persistence.referenceDelegate.addReference(f,p.targetId,m)).next(()=>Z.forEach(p.Ji,m=>h.persistence.referenceDelegate.removeReference(f,p.targetId,m)))))}catch(f){if(!$o(f))throw f;he(Zy,"Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const m=h.Ts.get(p),w=m.snapshotVersion,A=m.withLastLimboFreeSnapshotVersion(w);h.Ts=h.Ts.insert(p,A)}}}(i.localStore,a))}async function b4(t,e){const r=ke(t);if(!r.currentUser.isEqual(e)){he(o_,"User change. New user:",e.toKey());const i=await gk(r.localStore,e);r.currentUser=e,function(a,o){a.Ga.forEach(l=>{l.forEach(u=>{u.reject(new ye(ee.CANCELLED,o))})}),a.Ga.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await nc(r,i.Rs)}}function x4(t,e){const r=ke(t),i=r.Ka.get(e);if(i&&i.Ba)return Oe().add(i.key);{let s=Oe();const a=r.qa.get(e);if(!a)return s;for(const o of a){const l=r.ka.get(o);s=s.unionWith(l.view.Sa)}return s}}function Ok(t){const e=ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Dk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=x4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=v4.bind(null,e),e.La.p_=s4.bind(null,e.eventManager),e.La.Ja=a4.bind(null,e.eventManager),e}function E4(t){const e=ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=y4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=_4.bind(null,e),e}class Nh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Af(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,r){return null}nu(e,r){return null}eu(e){return kF(this.persistence,new TF,e.initialUser,this.serializer)}Xa(e){return new mk(Qy.ri,this.serializer)}Za(e){return new MF}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nh.provider={build:()=>new Nh};class T4 extends Nh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,r){Qe(this.persistence.referenceDelegate instanceof Rh);const i=this.persistence.referenceDelegate.garbageCollector;return new uF(i,e.asyncQueue,r)}Xa(e){const r=this.cacheSizeBytes!==void 0?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new mk(i=>Rh.ri(i,r),this.serializer)}}class Xg{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ax(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=b4.bind(null,this.syncEngine),await n4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new i4}()}createDatastore(e){const r=Af(e.databaseInfo.databaseId),i=function(a){return new FF(a)}(e.databaseInfo);return function(a,o,l,u){return new $F(a,o,l,u)}(e.authCredentials,e.appCheckCredentials,i,r)}createRemoteStore(e){return function(i,s,a,o,l){return new WF(i,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>ax(this.syncEngine,r,0),function(){return ex.D()?new ex:new LF}())}createSyncEngine(e,r){return function(s,a,o,l,u,c,h){const f=new c4(s,a,o,l,u,c);return h&&(f.ja=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const a=ke(s);he(oa,"RemoteStore shutting down."),a.W_.add(5),await tc(a),a.z_.shutdown(),a.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Xg.provider={build:()=>new Xg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):wi("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="FirestoreClient";class S4{constructor(e,r,i,s,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=i,this.databaseInfo=s,this.user=dn.UNAUTHENTICATED,this.clientId=C1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async o=>{he(_s,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(he(_s,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=s_(r,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function nm(t,e){t.asyncQueue.verifyOperationInProgress(),he(_s,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let i=r.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await gk(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function lx(t,e){t.asyncQueue.verifyOperationInProgress();const r=await I4(t);he(_s,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(i=>nx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>nx(e.remoteStore,s)),t._onlineComponents=e}async function I4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){he(_s,"Using user provided OfflineComponentProvider");try{await nm(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===ee.FAILED_PRECONDITION||s.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;yo("Error using user provided cache. Falling back to memory cache: "+r),await nm(t,new Nh)}}else he(_s,"Using default OfflineComponentProvider"),await nm(t,new T4(void 0));return t._offlineComponents}async function Vk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(he(_s,"Using user provided OnlineComponentProvider"),await lx(t,t._uninitializedComponentsProvider._online)):(he(_s,"Using default OnlineComponentProvider"),await lx(t,new Xg))),t._onlineComponents}function k4(t){return Vk(t).then(e=>e.syncEngine)}async function Fk(t){const e=await Vk(t),r=e.eventManager;return r.onListen=d4.bind(null,e.syncEngine),r.onUnlisten=p4.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=h4.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=m4.bind(null,e.syncEngine),r}function C4(t,e,r={}){const i=new fi;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,c){const h=new jk({next:p=>{h.su(),o.enqueueAndForget(()=>kk(a,f));const m=p.docs.has(l);!m&&p.fromCache?c.reject(new ye(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&p.fromCache&&u&&u.source==="server"?c.reject(new ye(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new Ck(Wy(l.path),h,{includeMetadataChanges:!0,Ta:!0});return Ik(a,f)}(await Fk(t),t.asyncQueue,e,r,i)),i.promise}function A4(t,e,r={}){const i=new fi;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,c){const h=new jk({next:p=>{h.su(),o.enqueueAndForget(()=>kk(a,f)),p.fromCache&&u.source==="server"?c.reject(new ye(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new Ck(l,h,{includeMetadataChanges:!0,Ta:!0});return Ik(a,f)}(await Fk(t),t.asyncQueue,e,r,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(t,e,r){if(!r)throw new ye(ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function P4(t,e,r,i){if(e===!0&&i===!0)throw new ye(ee.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function cx(t){if(!be.isDocumentKey(t))throw new ye(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function dx(t){if(be.isDocumentKey(t))throw new ye(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function u_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Te()}function xi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ye(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=u_(t);throw new ye(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk="firestore.googleapis.com",hx=!0;class fx{constructor(e){var r,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=zk,this.ssl=hx}else this.host=e.host,this.ssl=(r=e.ssl)!==null&&r!==void 0?r:hx;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=pk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<oF)throw new ye(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}P4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Uk((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ye(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ye(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ye(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Df{constructor(e,r,i,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fx(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Oj;switch(i.type){case"firstParty":return new Uj(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ye(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const i=ux.get(r);i&&(he("ComponentProvider","Removing Datastore"),ux.delete(r),i.terminate())}(this),Promise.resolve()}}function R4(t,e,r,i={}){var s;const a=(t=xi(t,Df))._getSettings(),o=`${e}:${r}`;if(a.host!==zk&&a.host!==o&&yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){let l,u;if(typeof i.mockUserToken=="string")l=i.mockUserToken,u=dn.MOCK_USER;else{l=X2(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new ye(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new dn(c)}t._authCredentials=new jj(new k1(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,r,i){this.converter=r,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Nf(this.firestore,e,this._query)}}class Fn{constructor(e,r,i){this.converter=r,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fn(this.firestore,e,this._key)}}class os extends Nf{constructor(e,r,i){super(e,r,Wy(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fn(this.firestore,null,new be(e))}withConverter(e){return new os(this.firestore,e,this._path)}}function pn(t,e,...r){if(t=tn(t),Bk("collection","path",e),t instanceof Df){const i=pt.fromString(e,...r);return dx(i),new os(t,null,i)}{if(!(t instanceof Fn||t instanceof os))throw new ye(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(pt.fromString(e,...r));return dx(i),new os(t.firestore,null,i)}}function To(t,e,...r){if(t=tn(t),arguments.length===1&&(e=C1.newId()),Bk("doc","path",e),t instanceof Df){const i=pt.fromString(e,...r);return cx(i),new Fn(t,null,new be(i))}{if(!(t instanceof Fn||t instanceof os))throw new ye(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(pt.fromString(e,...r));return cx(i),new Fn(t.firestore,t instanceof os?t.converter:null,new be(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px="AsyncQueue";class mx{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new yk(this,"async_queue_retry"),this.Su=()=>{const i=tm();i&&he(px,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=e;const r=tm();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const r=tm();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const r=new fi;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!$o(e))throw e;he(px,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const r=this.bu.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(i);throw wi("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.pu=!1,i))));return this.bu=r,r}enqueueAfterDelay(e,r,i){this.Du(),this.wu.indexOf(e)>-1&&(r=0);const s=i_.createAndSchedule(this,e,r,i,a=>this.Fu(a));return this.fu.push(s),s}Du(){this.gu&&Te()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const r of this.fu)if(r.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((r,i)=>r.targetTimeMs-i.targetTimeMs);for(const r of this.fu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const r=this.fu.indexOf(e);this.fu.splice(r,1)}}class rc extends Df{constructor(e,r,i,s){super(e,r,i,s),this.type="firestore",this._queue=new mx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mx(e),this._firestoreClient=void 0,await e}}}function D4(t,e){const r=typeof t=="object"?t:VI(),i=typeof t=="string"?t:Th,s=Ay(r,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=K2("firestore");a&&R4(s,...a)}return s}function c_(t){if(t._terminated)throw new ye(ee.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||N4(t),t._firestoreClient}function N4(t){var e,r,i;const s=t._freezeSettings(),a=function(l,u,c,h){return new eV(l,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Uk(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new S4(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this._byteString=e}static fromBase64String(e){try{return new So(nn.fromBase64String(e))}catch(r){throw new ye(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new So(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ye(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ye(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ye(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4=/^__.*__$/;class L4{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return this.fieldMask!==null?new Is(e,this.data,this.fieldMask,r,this.fieldTransforms):new Zu(e,this.data,r,this.fieldTransforms)}}class $k{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return new Is(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function Hk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class p_{constructor(e,r,i,s,a,o){this.settings=e,this.databaseId=r,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Bu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new p_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var r;const i=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.ku({path:i,Qu:!1});return s.$u(e),s}Ku(e){var r;const i=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.ku({path:i,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Mh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Hk(this.Lu)&&M4.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class O4{constructor(e,r,i){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=i||Af(e)}ju(e,r,i,s=!1){return new p_({Lu:e,methodName:r,zu:i,path:Qt.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wk(t){const e=t._freezeSettings(),r=Af(t._databaseId);return new O4(t._databaseId,!!e.ignoreUndefinedProperties,r)}function j4(t,e,r,i,s,a={}){const o=t.ju(a.merge||a.mergeFields?2:0,e,r,s);m_("Data must be an object, but it was:",o,i);const l=qk(i,o);let u,c;if(a.merge)u=new $n(o.fieldMask),c=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const f of a.mergeFields){const p=Qg(e,f,r);if(!o.contains(p))throw new ye(ee.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Kk(h,p)||h.push(p)}u=new $n(h),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new L4(new Nn(l),u,c)}class Lf extends d_{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lf}}function V4(t,e,r,i){const s=t.ju(1,e,r);m_("Data must be an object, but it was:",s,i);const a=[],o=Nn.empty();Ss(i,(u,c)=>{const h=g_(e,u,r);c=tn(c);const f=s.Ku(h);if(c instanceof Lf)a.push(h);else{const p=Of(c,f);p!=null&&(a.push(h),o.set(h,p))}});const l=new $n(a);return new $k(o,l,s.fieldTransforms)}function F4(t,e,r,i,s,a){const o=t.ju(1,e,r),l=[Qg(e,i,r)],u=[s];if(a.length%2!=0)throw new ye(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)l.push(Qg(e,a[p])),u.push(a[p+1]);const c=[],h=Nn.empty();for(let p=l.length-1;p>=0;--p)if(!Kk(c,l[p])){const m=l[p];let w=u[p];w=tn(w);const A=o.Ku(m);if(w instanceof Lf)c.push(m);else{const D=Of(w,A);D!=null&&(c.push(m),h.set(m,D))}}const f=new $n(c);return new $k(h,f,o.fieldTransforms)}function Of(t,e){if(Gk(t=tn(t)))return m_("Unsupported field value:",e,t),qk(t,e);if(t instanceof d_)return function(i,s){if(!Hk(s.Lu))throw s.Wu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,s){const a=[];let o=0;for(const l of i){let u=Of(l,s.Uu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(i,s){if((i=tn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return TV(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Lt.fromDate(i);return{timestampValue:Ph(s.serializer,a)}}if(i instanceof Lt){const a=new Lt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ph(s.serializer,a)}}if(i instanceof h_)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof So)return{bytesValue:ok(s.serializer,i._byteString)};if(i instanceof Fn){const a=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(a))throw s.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Yy(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof f_)return function(o,l){return{mapValue:{fields:{[O1]:{stringValue:j1},[Sh]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Wu("VectorValues must only contain numeric values.");return qy(l.serializer,c)})}}}}}}(i,s);throw s.Wu(`Unsupported field value: ${u_(i)}`)}(t,e)}function qk(t,e){const r={};return P1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ss(t,(i,s)=>{const a=Of(s,e.qu(i));a!=null&&(r[i]=a)}),{mapValue:{fields:r}}}function Gk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Lt||t instanceof h_||t instanceof So||t instanceof Fn||t instanceof d_||t instanceof f_)}function m_(t,e,r){if(!Gk(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const i=u_(r);throw i==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+i)}}function Qg(t,e,r){if((e=tn(e))instanceof Mf)return e._internalPath;if(typeof e=="string")return g_(t,e);throw Mh("Field path arguments must be of type string or ",t,!1,void 0,r)}const U4=new RegExp("[~\\*/\\[\\]]");function g_(t,e,r){if(e.search(U4)>=0)throw Mh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Mf(...e.split("."))._internalPath}catch{throw Mh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Mh(t,e,r,i,s){const a=i&&!i.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${i}`),o&&(u+=` in document ${s}`),u+=")"),new ye(ee.INVALID_ARGUMENT,l+t+u)}function Kk(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,r,i,s,a){this._firestore=e,this._userDataWriter=r,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new B4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Xk("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class B4 extends Yk{data(){return super.data()}}function Xk(t,e){return typeof e=="string"?g_(t,e):e instanceof Mf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ye(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $4{convertValue(e,r="none"){switch(vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Te()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const i={};return Ss(e,(s,a)=>{i[s]=this.convertValue(a,r)}),i}convertVectorValue(e){var r,i,s;const a=(s=(i=(r=e.fields)===null||r===void 0?void 0:r[Sh].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(o=>It(o.doubleValue));return new f_(a)}convertGeoPoint(e){return new h_(It(e.latitude),It(e.longitude))}convertArray(e,r){return(e.values||[]).map(i=>this.convertValue(i,r))}convertServerTimestamp(e,r){switch(r){case"previous":const i=xf(e);return i==null?null:this.convertValue(i,r);case"estimate":return this.convertTimestamp(ku(e));default:return null}}convertTimestamp(e){const r=ms(e);return new Lt(r.seconds,r.nanos)}convertDocumentKey(e,r){const i=pt.fromString(e);Qe(fk(i));const s=new Cu(i.get(1),i.get(3)),a=new be(i.popFirst(5));return s.isEqual(r)||wi(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(t,e,r){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qk extends Yk{constructor(e,r,i,s,a,o){super(e,r,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Fd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const i=this._document.data.field(Xk("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}}}class Fd extends Qk{data(e={}){return super.data(e)}}class W4{constructor(e,r,i,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new jl(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(i=>{e.call(r,new Fd(this._firestore,this._userDataWriter,i.key,i,new jl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ye(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Fd(s._firestore,s._userDataWriter,l.doc.key,l.doc,new jl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const u=new Fd(s._firestore,s._userDataWriter,l.doc.key,l.doc,new jl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:q4(l.type),doc:u,oldIndex:c,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function q4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G4(t){t=xi(t,Fn);const e=xi(t.firestore,rc);return C4(c_(e),t._key).then(r=>K4(e,t,r))}class Jk extends $4{constructor(e){super(),this.firestore=e}convertBytes(e){return new So(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,r)}}function Ln(t){t=xi(t,Nf);const e=xi(t.firestore,rc),r=c_(e),i=new Jk(e);return z4(t._query),A4(r,t._query).then(s=>new W4(e,i,t,s))}function gx(t,e,r){t=xi(t,Fn);const i=xi(t.firestore,rc),s=H4(t.converter,e);return Zk(i,[j4(Wk(i),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Hr.none())])}function Jg(t,e,r,...i){t=xi(t,Fn);const s=xi(t.firestore,rc),a=Wk(s);let o;return o=typeof(e=tn(e))=="string"||e instanceof Mf?F4(a,"updateDoc",t._key,e,r,i):V4(a,"updateDoc",t._key,e),Zk(s,[o.toMutation(t._key,Hr.exists(!0))])}function Zk(t,e){return function(i,s){const a=new fi;return i.asyncQueue.enqueueAndForget(async()=>g4(await k4(i),s,a)),a.promise}(c_(t),e)}function K4(t,e,r){const i=r.docs.get(e._key),s=new Jk(t);return new Qk(t,s,e._key,i,new jl(r.hasPendingWrites,r.fromCache),e.converter)}(function(e,r=!0){(function(s){Bo=s})(Vo),go(new ia("firestore",(i,{instanceIdentifier:s,options:a})=>{const o=i.getProvider("app").getImmediate(),l=new rc(new Vj(i.getProvider("auth-internal")),new Bj(o,i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ye(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Cu(c.options.projectId,h)}(o,s),o);return a=Object.assign({useFetchStreams:r},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),is(xb,Eb,e),is(xb,Eb,"esm2017")})();const Y4={apiKey:"AIzaSyDGolxlZNoEzk7z46ZMtSk9YsP32MlH45Q",authDomain:"llm-hyper-audio.firebaseapp.com",projectId:"llm-hyper-audio",storageBucket:"llm-hyper-audio.firebasestorage.app",messagingSenderId:"530304773274",appId:"1:530304773274:web:1764f58974d6c2fd060323",measurementId:"G-HFEKE65YC6"},eC=jI(Y4),Rt=D4(eC),rm=Dj(eC),tC=M.createContext();function ic(){const t=M.useContext(tC);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function X4({children:t}){const[e,r]=M.useState(null),[i,s]=M.useState(!0),[a,o]=M.useState(null);M.useEffect(()=>{console.log("Setting up auth listener");const h=wO(rm,f=>{console.log("Auth state changed:",f?f.email:"No user"),r(f),s(!1)},f=>{console.error("Auth state change error:",f),o(f.message),s(!1)});return()=>h()},[]);const c={user:e,loading:i,error:a,login:async(h,f)=>{try{o(null),console.log("Attempting login with:",h);const p=await vO(rm,h,f);return r(p.user),p.user}catch(p){throw console.error("Login error:",p),o(p.message),p}},logout:async()=>{try{o(null),console.log("Logging out user"),await bO(rm),r(null)}catch(h){throw console.error("Logout error:",h),o(h.message),h}},isAuthenticated:!!e};return v.jsx(tC.Provider,{value:c,children:t})}const Q4=M.createContext();function J4({children:t}){const[e,r]=M.useState(null),[i,s]=M.useState([]),[a,o]=M.useState(!1),[l,u]=M.useState(0),T={currentVideo:e,setCurrentVideo:r,playlist:i,setPlaylist:s,isPlaying:a,setIsPlaying:o,currentTime:l,setCurrentTime:u,addToPlaylist:x=>{s(b=>[...b,x])},removeFromPlaylist:x=>{s(b=>b.filter(P=>P.id!==x))},clearPlaylist:()=>{s([]),r(null)},playVideo:x=>{r(x),o(!0)},pauseVideo:()=>{o(!1)},nextVideo:()=>{const x=i.findIndex(b=>b.id===(e==null?void 0:e.id));x<i.length-1&&r(i[x+1])},previousVideo:()=>{const x=i.findIndex(b=>b.id===(e==null?void 0:e.id));x>0&&r(i[x-1])},updatePlaylistOrder:x=>{s(x)}};return v.jsx(Q4.Provider,{value:T,children:t})}/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nC=(...t)=>t.filter((e,r,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var e3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t3=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:s="",children:a,iconNode:o,...l},u)=>M.createElement("svg",{ref:u,...e3,width:e,height:e,stroke:t,strokeWidth:i?Number(r)*24/Number(e):r,className:nC("lucide",s),...l},[...o.map(([c,h])=>M.createElement(c,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=(t,e)=>{const r=M.forwardRef(({className:i,...s},a)=>M.createElement(t3,{ref:a,iconNode:e,className:nC(`lucide-${Z4(t)}`,i),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],r3=rn("ChevronDown",n3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],s3=rn("ChevronRight",i3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a3=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],o3=rn("ChevronUp",a3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],u3=rn("CirclePlay",l3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],rC=rn("Clock",c3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],iC=rn("FileText",d3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],f3=rn("Heart",h3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],m3=rn("House",p3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g3=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],v3=rn("List",g3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y3=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],_3=rn("LogOut",y3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w3=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],b3=rn("Menu",w3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x3=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],sC=rn("Search",x3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],T3=rn("Settings",E3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],I3=rn("ShoppingBag",S3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],C3=rn("Tag",k3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],vx=rn("Upload",A3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],R3=rn("X",P3);function D3(){const{user:t,logout:e}=ic(),r=fr(),[i,s]=M.useState(!1),a=()=>{s(!i)},o=[{path:"/",label:"Home",icon:v.jsx(m3,{size:20})},{path:"/keyword-directory",label:"Directory",icon:v.jsx(v3,{size:20})},{path:"/playlist-builder",label:"Playlists",icon:v.jsx(u3,{size:20})},{path:"/transcript-summary",label:"Summarizer",icon:v.jsx(iC,{size:20})}],l=u=>r.pathname===u;return v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"fixed top-4 left-4 w-12 h-12 rounded-lg bg-white border-none shadow-sm cursor-pointer flex justify-center items-center text-gray-600 z-[51] transition-colors duration-200 ease-in-out",onClick:a,children:v.jsx(b3,{size:24})}),v.jsx("div",{className:`fixed inset-0 z-[49] transition-opacity duration-300 ease-in-out ${i?"pointer-events-auto":"pointer-events-none"}`,onClick:a}),v.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-white border-r border-gray-200 shadow-lg transition-transform duration-300 ease-in-out z-50 flex flex-col p-4 ${i?"translate-x-0":"-translate-x-full"}`,children:[v.jsx("button",{className:"absolute top-4 right-4 p-2 rounded-md bg-gray-100 border-none cursor-pointer flex justify-center items-center text-gray-600",onClick:a,children:v.jsx(R3,{size:20})}),v.jsxs("div",{className:"flex-1 overflow-auto mt-10",children:[v.jsxs("div",{children:[o.map(u=>v.jsxs(Ws,{to:u.path,className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l(u.path)?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[v.jsx("span",{className:"flex mr-3 text-inherit",children:u.icon}),v.jsx("span",{children:u.label})]},u.path)),v.jsxs(Ws,{to:"/search",className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l("/search")?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[v.jsx("span",{className:"flex mr-3 text-inherit",children:v.jsx(sC,{size:20})}),v.jsx("span",{children:"Search"})]}),v.jsxs(Ws,{to:"/playlists",className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l("/playlists")?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[v.jsx("span",{className:"flex mr-3 text-inherit",children:v.jsx(I3,{size:20})}),v.jsx("span",{children:"Playlists"})]}),v.jsxs(Ws,{to:"/favorites",className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l("/favorites")?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[v.jsx("span",{className:"flex mr-3 text-inherit",children:v.jsx(f3,{size:20})}),v.jsx("span",{children:"Favorites"})]})]}),v.jsx("div",{className:"h-px bg-gray-200 my-4"}),v.jsxs("div",{children:[v.jsxs(Ws,{to:"/settings",className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l("/settings")?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[v.jsx("span",{className:"flex mr-3 text-inherit",children:v.jsx(T3,{size:20})}),v.jsx("span",{children:"Settings"})]}),t&&v.jsxs("button",{onClick:()=>{e(),s(!1)},className:"flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out text-gray-500 font-normal w-full text-left border-none bg-transparent",children:[v.jsx("span",{className:"flex mr-3 text-inherit",children:v.jsx(_3,{size:20})}),v.jsx("span",{children:"Logout"})]})]})]})]})]})}function Os({children:t}){const{loading:e}=ic();return e?v.jsx("div",{className:"min-h-screen flex items-center justify-center",children:v.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):v.jsxs("div",{className:"flex flex-row h-screen w-full overflow-hidden bg-white",children:[v.jsx("div",{className:"flex-none w-60",children:v.jsx(D3,{})}),v.jsx("div",{className:"flex-grow overflow-y-auto",children:v.jsx("main",{className:"py-6 px-6",children:t})})]})}function js({children:t}){const{user:e,loading:r}=ic(),i=fr();return r?v.jsx("div",{className:"flex justify-center items-center min-h-screen",children:v.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):e?t:v.jsx(TI,{to:"/login",state:{from:i},replace:!0})}var aC={exports:{}},N3="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",M3=N3,L3=M3;function oC(){}function lC(){}lC.resetWarningCache=oC;var O3=function(){function t(i,s,a,o,l,u){if(u!==L3){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:lC,resetWarningCache:oC};return r.PropTypes=r,r};aC.exports=O3();var j3=aC.exports;const tt=Uu(j3);var uC={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var a="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(a=s(a,i(l)))}return a}function i(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return r.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var o="";for(var l in a)e.call(a,l)&&a[l]&&(o=s(o,l));return o}function s(a,o){return o?a?a+" "+o:a+o:a}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(uC);var V3=uC.exports;const cC=Uu(V3);var F3=["top","left","transform","className","children","innerRef"];function Zg(){return Zg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Zg.apply(this,arguments)}function U3(t,e){if(t==null)return{};var r={},i=Object.keys(t),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function Lh(t){var e=t.top,r=e===void 0?0:e,i=t.left,s=i===void 0?0:i,a=t.transform,o=t.className,l=t.children,u=t.innerRef,c=U3(t,F3);return Pe.createElement("g",Zg({ref:u,className:cC("visx-group",o),transform:a||"translate("+s+", "+r+")"},c),l)}Lh.propTypes={top:tt.number,left:tt.number,transform:tt.string,className:tt.string,children:tt.node,innerRef:tt.oneOfType([tt.string,tt.func,tt.object])};var B3=Array.prototype.slice;function z3(t){for(var e=t.length,r,i;e;)i=Math.random()*e--|0,r=t[e],t[e]=t[i],t[i]=r;return t}function $3(t){for(var e=0,r=(t=z3(B3.call(t))).length,i=[],s,a;e<r;)s=t[e],a&&dC(a,s)?++e:(a=W3(i=H3(i,s)),e=0);return a}function H3(t,e){var r,i;if(im(e,t))return[e];for(r=0;r<t.length;++r)if(ad(e,t[r])&&im(Vl(t[r],e),t))return[t[r],e];for(r=0;r<t.length-1;++r)for(i=r+1;i<t.length;++i)if(ad(Vl(t[r],t[i]),e)&&ad(Vl(t[r],e),t[i])&&ad(Vl(t[i],e),t[r])&&im(hC(t[r],t[i],e),t))return[t[r],t[i],e];throw new Error}function ad(t,e){var r=t.r-e.r,i=e.x-t.x,s=e.y-t.y;return r<0||r*r<i*i+s*s}function dC(t,e){var r=t.r-e.r+1e-6,i=e.x-t.x,s=e.y-t.y;return r>0&&r*r>i*i+s*s}function im(t,e){for(var r=0;r<e.length;++r)if(!dC(t,e[r]))return!1;return!0}function W3(t){switch(t.length){case 1:return q3(t[0]);case 2:return Vl(t[0],t[1]);case 3:return hC(t[0],t[1],t[2])}}function q3(t){return{x:t.x,y:t.y,r:t.r}}function Vl(t,e){var r=t.x,i=t.y,s=t.r,a=e.x,o=e.y,l=e.r,u=a-r,c=o-i,h=l-s,f=Math.sqrt(u*u+c*c);return{x:(r+a+u/f*h)/2,y:(i+o+c/f*h)/2,r:(f+s+l)/2}}function hC(t,e,r){var i=t.x,s=t.y,a=t.r,o=e.x,l=e.y,u=e.r,c=r.x,h=r.y,f=r.r,p=i-o,m=i-c,w=s-l,A=s-h,D=u-a,T=f-a,x=i*i+s*s-a*a,b=x-o*o-l*l+u*u,P=x-c*c-h*h+f*f,U=m*w-p*A,V=(w*P-A*b)/(U*2)-i,R=(A*D-w*T)/U,I=(m*b-p*P)/(U*2)-s,y=(p*T-m*D)/U,_=R*R+y*y-1,S=2*(a+V*R+I*y),O=V*V+I*I-a*a,N=-(_?(S+Math.sqrt(S*S-4*_*O))/(2*_):O/S);return{x:i+V+R*N,y:s+I+y*N,r:N}}function yx(t,e,r){var i=t.x-e.x,s,a,o=t.y-e.y,l,u,c=i*i+o*o;c?(a=e.r+r.r,a*=a,u=t.r+r.r,u*=u,a>u?(s=(c+u-a)/(2*c),l=Math.sqrt(Math.max(0,u/c-s*s)),r.x=t.x-s*i-l*o,r.y=t.y-s*o+l*i):(s=(c+a-u)/(2*c),l=Math.sqrt(Math.max(0,a/c-s*s)),r.x=e.x+s*i-l*o,r.y=e.y+s*o+l*i)):(r.x=e.x+r.r,r.y=e.y)}function _x(t,e){var r=t.r+e.r-1e-6,i=e.x-t.x,s=e.y-t.y;return r>0&&r*r>i*i+s*s}function wx(t){var e=t._,r=t.next._,i=e.r+r.r,s=(e.x*r.r+r.x*e.r)/i,a=(e.y*r.r+r.y*e.r)/i;return s*s+a*a}function od(t){this._=t,this.next=null,this.previous=null}function G3(t){if(!(s=t.length))return 0;var e,r,i,s,a,o,l,u,c,h,f;if(e=t[0],e.x=0,e.y=0,!(s>1))return e.r;if(r=t[1],e.x=-r.r,r.x=e.r,r.y=0,!(s>2))return e.r+r.r;yx(r,e,i=t[2]),e=new od(e),r=new od(r),i=new od(i),e.next=i.previous=r,r.next=e.previous=i,i.next=r.previous=e;e:for(l=3;l<s;++l){yx(e._,r._,i=t[l]),i=new od(i),u=r.next,c=e.previous,h=r._.r,f=e._.r;do if(h<=f){if(_x(u._,i._)){r=u,e.next=r,r.previous=e,--l;continue e}h+=u._.r,u=u.next}else{if(_x(c._,i._)){e=c,e.next=r,r.previous=e,--l;continue e}f+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=e,i.next=r,e.next=r.previous=r=i,a=wx(e);(i=i.next)!==r;)(o=wx(i))<a&&(e=i,a=o);r=e.next}for(e=[r._],i=r;(i=i.next)!==r;)e.push(i._);for(i=$3(e),l=0;l<s;++l)e=t[l],e.x-=i.x,e.y-=i.y;return i.r}function K3(t){return t==null?null:Y3(t)}function Y3(t){if(typeof t!="function")throw new Error;return t}function bx(){return 0}function X3(t){return function(){return t}}function Q3(t){return Math.sqrt(t.value)}function J3(){var t=null,e=1,r=1,i=bx;function s(a){return a.x=e/2,a.y=r/2,t?a.eachBefore(xx(t)).eachAfter(sm(i,.5)).eachBefore(Ex(1)):a.eachBefore(xx(Q3)).eachAfter(sm(bx,1)).eachAfter(sm(i,a.r/Math.min(e,r))).eachBefore(Ex(Math.min(e,r)/(2*a.r))),a}return s.radius=function(a){return arguments.length?(t=K3(a),s):t},s.size=function(a){return arguments.length?(e=+a[0],r=+a[1],s):[e,r]},s.padding=function(a){return arguments.length?(i=typeof a=="function"?a:X3(+a),s):i},s}function xx(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function sm(t,e){return function(r){if(i=r.children){var i,s,a=i.length,o=t(r)*e||0,l;if(o)for(s=0;s<a;++s)i[s].r+=o;if(l=G3(i),o)for(s=0;s<a;++s)i[s].r-=o;r.r=l+o}}}function Ex(t){return function(e){var r=e.parent;e.r*=t,r&&(e.x=r.x+t*e.x,e.y=r.y+t*e.y)}}function fC(t){var e=t.node,r=e===void 0?{x:0,y:0,r:15}:e;return Pe.createElement("circle",{cx:r.x,cy:r.y,r:r.r||15,fill:"#21D4FD"})}fC.propTypes={node:tt.shape({x:tt.number.isRequired,y:tt.number.isRequired,r:tt.number})};function pC(t){var e=t.top,r=t.left,i=t.className,s=t.root,a=t.radius,o=t.size,l=t.padding,u=t.children,c=t.nodeComponent,h=c===void 0?fC:c,f=J3();o&&f.size(o),a!==void 0&&f.radius(a),l&&f.padding(l);var p=f(s);return u?Pe.createElement(Pe.Fragment,null,u(p)):Pe.createElement(Lh,{top:e,left:r,className:cC("visx-pack",i)},h&&p.descendants().map(function(m,w){return Pe.createElement(Lh,{key:"pack-node-"+w},Pe.createElement(h,{node:m}))}))}pC.propTypes={children:tt.func,top:tt.number,left:tt.number,className:tt.string,radius:tt.func,padding:tt.number};function Z3(t){var e=0,r=t.children,i=r&&r.length;if(!i)e=1;else for(;--i>=0;)e+=r[i].value;t.value=e}function eU(){return this.eachAfter(Z3)}function tU(t,e){let r=-1;for(const i of this)t.call(e,i,++r,this);return this}function nU(t,e){for(var r=this,i=[r],s,a,o=-1;r=i.pop();)if(t.call(e,r,++o,this),s=r.children)for(a=s.length-1;a>=0;--a)i.push(s[a]);return this}function rU(t,e){for(var r=this,i=[r],s=[],a,o,l,u=-1;r=i.pop();)if(s.push(r),a=r.children)for(o=0,l=a.length;o<l;++o)i.push(a[o]);for(;r=s.pop();)t.call(e,r,++u,this);return this}function iU(t,e){let r=-1;for(const i of this)if(t.call(e,i,++r,this))return i}function sU(t){return this.eachAfter(function(e){for(var r=+t(e.data)||0,i=e.children,s=i&&i.length;--s>=0;)r+=i[s].value;e.value=r})}function aU(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function oU(t){for(var e=this,r=lU(e,t),i=[e];e!==r;)e=e.parent,i.push(e);for(var s=i.length;t!==r;)i.splice(s,0,t),t=t.parent;return i}function lU(t,e){if(t===e)return t;var r=t.ancestors(),i=e.ancestors(),s=null;for(t=r.pop(),e=i.pop();t===e;)s=t,t=r.pop(),e=i.pop();return s}function uU(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function cU(){return Array.from(this)}function dU(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function hU(){var t=this,e=[];return t.each(function(r){r!==t&&e.push({source:r.parent,target:r})}),e}function*fU(){var t=this,e,r=[t],i,s,a;do for(e=r.reverse(),r=[];t=e.pop();)if(yield t,i=t.children)for(s=0,a=i.length;s<a;++s)r.push(i[s]);while(r.length)}function v_(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=gU)):e===void 0&&(e=mU);for(var r=new Oh(t),i,s=[r],a,o,l,u;i=s.pop();)if((o=e(i.data))&&(u=(o=Array.from(o)).length))for(i.children=o,l=u-1;l>=0;--l)s.push(a=o[l]=new Oh(o[l])),a.parent=i,a.depth=i.depth+1;return r.eachBefore(yU)}function pU(){return v_(this).eachBefore(vU)}function mU(t){return t.children}function gU(t){return Array.isArray(t)?t[1]:null}function vU(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function yU(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Oh(t){this.data=t,this.depth=this.height=0,this.parent=null}Oh.prototype=v_.prototype={constructor:Oh,count:eU,each:tU,eachAfter:rU,eachBefore:nU,find:iU,sum:sU,sort:aU,path:oU,ancestors:uU,descendants:cU,leaves:dU,links:hU,copy:pU,[Symbol.iterator]:fU};var Tx=function(){function t(r){var i=r.x,s=i===void 0?0:i,a=r.y,o=a===void 0?0:a;this.x=0,this.y=0,this.x=s,this.y=o}var e=t.prototype;return e.value=function(){return{x:this.x,y:this.y}},e.toArray=function(){return[this.x,this.y]},t}();function _U(t){return!!t&&t instanceof Element}function wU(t){return!!t&&(t instanceof SVGElement||"ownerSVGElement"in t)}function bU(t){return!!t&&"createSVGPoint"in t}function xU(t){return!!t&&"getScreenCTM"in t}function EU(t){return!!t&&"changedTouches"in t}function TU(t){return!!t&&"clientX"in t}function SU(t){return!!t&&(t instanceof Event||"nativeEvent"in t&&t.nativeEvent instanceof Event)}function eu(){return eu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},eu.apply(this,arguments)}var am={x:0,y:0};function IU(t){if(!t)return eu({},am);if(EU(t))return t.changedTouches.length>0?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:eu({},am);if(TU(t))return{x:t.clientX,y:t.clientY};var e=t==null?void 0:t.target,r=e&&"getBoundingClientRect"in e?e.getBoundingClientRect():null;return r?{x:r.x+r.width/2,y:r.y+r.height/2}:eu({},am)}function Sx(t,e){if(!t||!e)return null;var r=IU(e),i=wU(t)?t.ownerSVGElement:t,s=xU(i)?i.getScreenCTM():null;if(bU(i)&&s){var a=i.createSVGPoint();return a.x=r.x,a.y=r.y,a=a.matrixTransform(s.inverse()),new Tx({x:a.x,y:a.y})}var o=t.getBoundingClientRect();return new Tx({x:r.x-o.left-t.clientLeft,y:r.y-o.top-t.clientTop})}function om(t,e){if(_U(t)&&e)return Sx(t,e);if(SU(t)){var r=t,i=r.target;if(i)return Sx(i,r)}return null}function kU(t,e,r){return Math.max(e,Math.min(t,r))}const dt={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function Ix(t,e,r){return e===0||Math.abs(e)===1/0?Math.pow(t,r*5):t*e*r/(e+r*t)}function kx(t,e,r,i=.15){return i===0?kU(t,e,r):t<e?-Ix(e-t,r-e,i)+e:t>r?+Ix(t-r,r-e,i)+r:t}function CU(t,[e,r],[i,s]){const[[a,o],[l,u]]=t;return[kx(e,a,o,i),kx(r,l,u,s)]}function AU(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function PU(t){var e=AU(t,"string");return typeof e=="symbol"?e:String(e)}function At(t,e,r){return e=PU(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Cx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function yt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Cx(Object(r),!0).forEach(function(i){At(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Cx(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}const mC={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Ax(t){return t?t[0].toUpperCase()+t.slice(1):""}const RU=["enter","leave"];function DU(t=!1,e){return t&&!RU.includes(e)}function NU(t,e="",r=!1){const i=mC[t],s=i&&i[e]||e;return"on"+Ax(t)+Ax(s)+(DU(r,s)?"Capture":"")}const MU=["gotpointercapture","lostpointercapture"];function LU(t){let e=t.substring(2).toLowerCase();const r=!!~e.indexOf("passive");r&&(e=e.replace("passive",""));const i=MU.includes(e)?"capturecapture":"capture",s=!!~e.indexOf(i);return s&&(e=e.replace("capture","")),{device:e,capture:s,passive:r}}function OU(t,e=""){const r=mC[t],i=r&&r[e]||e;return t+i}function jf(t){return"touches"in t}function gC(t){return jf(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function jU(t){return Array.from(t.touches).filter(e=>{var r,i;return e.target===t.currentTarget||((r=t.currentTarget)===null||r===void 0||(i=r.contains)===null||i===void 0?void 0:i.call(r,e.target))})}function VU(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function vC(t){return jf(t)?VU(t)[0]:t}function ev(t,e){try{const r=e.clientX-t.clientX,i=e.clientY-t.clientY,s=(e.clientX+t.clientX)/2,a=(e.clientY+t.clientY)/2,o=Math.hypot(r,i);return{angle:-(Math.atan2(r,i)*180)/Math.PI,distance:o,origin:[s,a]}}catch{}return null}function FU(t){return jU(t).map(e=>e.identifier)}function Px(t,e){const[r,i]=Array.from(t.touches).filter(s=>e.includes(s.identifier));return ev(r,i)}function lm(t){const e=vC(t);return jf(t)?e.identifier:e.pointerId}function Io(t){const e=vC(t);return[e.clientX,e.clientY]}const Rx=40,Dx=800;function yC(t){let{deltaX:e,deltaY:r,deltaMode:i}=t;return i===1?(e*=Rx,r*=Rx):i===2&&(e*=Dx,r*=Dx),[e,r]}function UU(t){var e,r;const{scrollX:i,scrollY:s,scrollLeft:a,scrollTop:o}=t.currentTarget;return[(e=i??a)!==null&&e!==void 0?e:0,(r=s??o)!==null&&r!==void 0?r:0]}function BU(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:r,altKey:i,metaKey:s,ctrlKey:a}=t;Object.assign(e,{shiftKey:r,altKey:i,metaKey:s,ctrlKey:a})}return e}function jh(t,...e){return typeof t=="function"?t(...e):t}function zU(){}function $U(...t){return t.length===0?zU:t.length===1?t[0]:function(){let e;for(const r of t)e=r.apply(this,arguments)||e;return e}}function Nx(t,e){return Object.assign({},e,t||{})}const HU=32;class _C{constructor(e,r,i){this.ctrl=e,this.args=r,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:r,ingKey:i,args:s}=this;r[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=s,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const r=this.state,i=this.config;r._active||(this.reset(),this.computeInitial(),r._active=!0,r.target=e.target,r.currentTarget=e.currentTarget,r.lastOffset=i.from?jh(i.from,r):r.offset,r.offset=r.lastOffset,r.startTime=r.timeStamp=e.timeStamp)}computeValues(e){const r=this.state;r._values=e,r.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:r,config:i,shared:s}=this;r.args=this.args;let a=0;if(e&&(r.event=e,i.preventDefault&&e.cancelable&&r.event.preventDefault(),r.type=e.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,BU(e)),s.down=s.pressed=s.buttons%2===1||s.touches>0,a=e.timeStamp-r.timeStamp,r.timeStamp=e.timeStamp,r.elapsedTime=r.timeStamp-r.startTime),r._active){const V=r._delta.map(Math.abs);dt.addTo(r._distance,V)}this.axisIntent&&this.axisIntent(e);const[o,l]=r._movement,[u,c]=i.threshold,{_step:h,values:f}=r;if(i.hasCustomTransform?(h[0]===!1&&(h[0]=Math.abs(o)>=u&&f[0]),h[1]===!1&&(h[1]=Math.abs(l)>=c&&f[1])):(h[0]===!1&&(h[0]=Math.abs(o)>=u&&Math.sign(o)*u),h[1]===!1&&(h[1]=Math.abs(l)>=c&&Math.sign(l)*c)),r.intentional=h[0]!==!1||h[1]!==!1,!r.intentional)return;const p=[0,0];if(i.hasCustomTransform){const[V,R]=f;p[0]=h[0]!==!1?V-h[0]:0,p[1]=h[1]!==!1?R-h[1]:0}else p[0]=h[0]!==!1?o-h[0]:0,p[1]=h[1]!==!1?l-h[1]:0;this.restrictToAxis&&!r._blocked&&this.restrictToAxis(p);const m=r.offset,w=r._active&&!r._blocked||r.active;w&&(r.first=r._active&&!r.active,r.last=!r._active&&r.active,r.active=s[this.ingKey]=r._active,e&&(r.first&&("bounds"in i&&(r._bounds=jh(i.bounds,r)),this.setup&&this.setup()),r.movement=p,this.computeOffset()));const[A,D]=r.offset,[[T,x],[b,P]]=r._bounds;r.overflow=[A<T?-1:A>x?1:0,D<b?-1:D>P?1:0],r._movementBound[0]=r.overflow[0]?r._movementBound[0]===!1?r._movement[0]:r._movementBound[0]:!1,r._movementBound[1]=r.overflow[1]?r._movementBound[1]===!1?r._movement[1]:r._movementBound[1]:!1;const U=r._active?i.rubberband||[0,0]:[0,0];if(r.offset=CU(r._bounds,r.offset,U),r.delta=dt.sub(r.offset,m),this.computeMovement(),w&&(!r.last||a>HU)){r.delta=dt.sub(r.offset,m);const V=r.delta.map(Math.abs);dt.addTo(r.distance,V),r.direction=r.delta.map(Math.sign),r._direction=r._delta.map(Math.sign),!r.first&&a>0&&(r.velocity=[V[0]/a,V[1]/a],r.timeDelta=a)}}emit(){const e=this.state,r=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const s=this.handler(yt(yt(yt({},r),e),{},{[this.aliasKey]:e.values}));s!==void 0&&(e.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function WU([t,e],r){const i=Math.abs(t),s=Math.abs(e);if(i>s&&i>r)return"x";if(s>i&&s>r)return"y"}class sc extends _C{constructor(...e){super(...e),At(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=dt.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=dt.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const r=this.state,i=this.config;if(!r.axis&&e){const s=typeof i.axisThreshold=="object"?i.axisThreshold[gC(e)]:i.axisThreshold;r.axis=WU(r._movement,s)}r._blocked=(i.lockDirection||!!i.axis)&&!r.axis||!!i.axis&&i.axis!==r.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const qU=t=>t,Mx=.15,wC={enabled(t=!0){return t},eventOptions(t,e,r){return yt(yt({},r.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[Mx,Mx];case!1:return[0,0];default:return dt.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return dt.toVector(t)},transform(t,e,r){const i=t||r.shared.transform;return this.hasCustomTransform=!!i,i||qU},threshold(t){return dt.toVector(t,0)}},GU=0,va=yt(yt({},wC),{},{axis(t,e,{axis:r}){if(this.lockDirection=r==="lock",!this.lockDirection)return r},axisThreshold(t=GU){return t},bounds(t={}){if(typeof t=="function")return a=>va.bounds(t(a));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:r=1/0,top:i=-1/0,bottom:s=1/0}=t;return[[e,r],[i,s]]}}),Lx={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class KU extends sc{constructor(...e){super(...e),At(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const r=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),s={left:r.left-i.left+e.offset[0],right:r.right-i.right+e.offset[0],top:r.top-i.top+e.offset[1],bottom:r.bottom-i.bottom+e.offset[1]};e._bounds=va.bounds(s)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const r=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(r.pointerButtons)?!r.pointerButtons.includes(e.buttons):r.pointerButtons!==-1&&r.pointerButtons!==e.buttons))return;const s=this.ctrl.setEventIds(e);r.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(s&&s.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=lm(e),i._pointerActive=!0,this.computeValues(Io(e)),this.computeInitial(),r.preventScrollAxis&&gC(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):r.delay>0?(this.setupDelayTrigger(e),r.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const r=this.state;r._active=!0,r._preventScroll=!0,r._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const r=this.state,i=this.config;if(!r._pointerActive)return;const s=lm(e);if(r._pointerId!==void 0&&s!==r._pointerId)return;const a=Io(e);if(document.pointerLockElement===e.target?r._delta=[e.movementX,e.movementY]:(r._delta=dt.sub(a,r._values),this.computeValues(a)),dt.addTo(r._movement,r._delta),this.compute(e),r._delayed&&r.intentional){this.timeoutStore.remove("dragDelay"),r.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!r._preventScroll)if(r.axis)if(r.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){r._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const r=this.state,i=this.config;if(!r._active||!r._pointerActive)return;const s=lm(e);if(r._pointerId!==void 0&&s!==r._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[a,o]=r._distance;if(r.tap=a<=i.tapsThreshold&&o<=i.tapsThreshold,r.tap&&i.filterTaps)r._force=!0;else{const[l,u]=r._delta,[c,h]=r._movement,[f,p]=i.swipe.velocity,[m,w]=i.swipe.distance,A=i.swipe.duration;if(r.elapsedTime<A){const D=Math.abs(l/r.timeDelta),T=Math.abs(u/r.timeDelta);D>f&&Math.abs(c)>m&&(r.swipe[0]=Math.sign(l)),T>p&&Math.abs(h)>w&&(r.swipe[1]=Math.sign(u))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const r=this.config,i=r.device;r.pointerLock&&e.currentTarget.requestPointerLock(),r.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,YU(e);const r=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",r),this.eventStore.add(this.sharedConfig.window,"touch","cancel",r),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const r=Lx[e.key];if(r){const i=this.state,s=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=r(this.config.keyboardDisplacement,s),i._keyboardActive=!0,dt.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in Lx&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const r=this.config.device;e(r,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(r,"change",this.pointerMove.bind(this)),e(r,"end",this.pointerUp.bind(this)),e(r,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function YU(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const ac=typeof window<"u"&&window.document&&window.document.createElement;function bC(){return ac&&"ontouchstart"in window}function XU(){return bC()||ac&&window.navigator.maxTouchPoints>1}function QU(){return ac&&"onpointerdown"in window}function JU(){return ac&&"exitPointerLock"in window.document}function ZU(){try{return"constructor"in GestureEvent}catch{return!1}}const ir={isBrowser:ac,gesture:ZU(),touch:bC(),touchscreen:XU(),pointer:QU(),pointerLock:JU()},eB=250,tB=180,nB=.5,rB=50,iB=250,sB=10,Ox={mouse:0,touch:0,pen:8},aB=yt(yt({},va),{},{device(t,e,{pointer:{touch:r=!1,lock:i=!1,mouse:s=!1}={}}){return this.pointerLock=i&&ir.pointerLock,ir.touch&&r?"touch":this.pointerLock?"mouse":ir.pointer&&!s?"pointer":ir.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:r}){if(this.preventScrollDelay=typeof r=="number"?r:r||r===void 0&&t?eB:void 0,!(!ir.touchscreen||r===!1))return t||(r!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:r=!0,buttons:i=1,keys:s=!0}={}}){return this.pointerButtons=i,this.keys=s,!this.pointerLock&&this.device==="pointer"&&r},threshold(t,e,{filterTaps:r=!1,tapsThreshold:i=3,axis:s=void 0}){const a=dt.toVector(t,r?i:s?1:0);return this.filterTaps=r,this.tapsThreshold=i,a},swipe({velocity:t=nB,distance:e=rB,duration:r=iB}={}){return{velocity:this.transform(dt.toVector(t)),distance:this.transform(dt.toVector(e)),duration:r}},delay(t=0){switch(t){case!0:return tB;case!1:return 0;default:return t}},axisThreshold(t){return t?yt(yt({},Ox),t):Ox},keyboardDisplacement(t=sB){return t}});function xC(t){const[e,r]=t.overflow,[i,s]=t._delta,[a,o]=t._direction;(e<0&&i>0&&a<0||e>0&&i<0&&a>0)&&(t._movement[0]=t._movementBound[0]),(r<0&&s>0&&o<0||r>0&&s<0&&o>0)&&(t._movement[1]=t._movementBound[1])}const oB=30,lB=100;class uB extends _C{constructor(...e){super(...e),At(this,"ingKey","pinching"),At(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:r,lastOffset:i}=this.state;e==="wheel"?this.state.offset=dt.add(r,i):this.state.offset=[(1+r[0])*i[0],r[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:r}=this.state;this.state.movement=[e[0]/r[0],e[1]-r[1]]}axisIntent(){const e=this.state,[r,i]=e._movement;if(!e.axis){const s=Math.abs(r)*oB-Math.abs(i);s<0?e.axis="angle":s>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const r=this.state,i=this.ctrl.touchIds;if(r._active&&r._touchIds.every(a=>i.has(a))||i.size<2)return;this.start(e),r._touchIds=Array.from(i).slice(0,2);const s=Px(e,r._touchIds);s&&this.pinchStart(e,s)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const r=this.state,i=r._pointerEvents,s=this.ctrl.pointerIds;if(r._active&&Array.from(i.keys()).every(o=>s.has(o))||(i.size<2&&i.set(e.pointerId,e),r._pointerEvents.size<2))return;this.start(e);const a=ev(...Array.from(i.values()));a&&this.pinchStart(e,a)}pinchStart(e,r){const i=this.state;i.origin=r.origin,this.computeValues([r.distance,r.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const r=Px(e,this.state._touchIds);r&&this.pinchMove(e,r)}pointerMove(e){const r=this.state._pointerEvents;if(r.has(e.pointerId)&&r.set(e.pointerId,e),!this.state._active)return;const i=ev(...Array.from(r.values()));i&&this.pinchMove(e,i)}pinchMove(e,r){const i=this.state,s=i._values[1],a=r.angle-s;let o=0;Math.abs(a)>270&&(o+=Math.sign(a)),this.computeValues([r.distance,r.angle-360*o]),i.origin=r.origin,i.turns=o,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(r=>!this.ctrl.touchIds.has(r))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const r=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}r._pointerEvents.has(e.pointerId)&&r._pointerEvents.delete(e.pointerId),r._active&&r._pointerEvents.size<2&&(r._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const r=this.state;r._active||(this.start(e),this.computeValues([e.scale,e.rotation]),r.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const r=this.state;this.computeValues([e.scale,e.rotation]),r.origin=[e.clientX,e.clientY];const i=r._movement;r._movement=[e.scale-1,e.rotation],r._delta=dt.sub(r._movement,i),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const r=this.config.modifierKey;r&&(Array.isArray(r)?!r.find(i=>e[i]):!e[r])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-yC(e)[1]/lB*i.offset[0],0],dt.addTo(i._movement,i._delta),xC(i),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const r=this.config.device;r&&(e(r,"start",this[r+"Start"].bind(this)),e(r,"change",this[r+"Move"].bind(this)),e(r,"end",this[r+"End"].bind(this)),e(r,"cancel",this[r+"End"].bind(this)),e("lostPointerCapture","",this[r+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const cB=yt(yt({},wC),{},{device(t,e,{shared:r,pointer:{touch:i=!1}={}}){if(r.target&&!ir.touch&&ir.gesture)return"gesture";if(ir.touch&&i)return"touch";if(ir.touchscreen){if(ir.pointer)return"pointer";if(ir.touch)return"touch"}},bounds(t,e,{scaleBounds:r={},angleBounds:i={}}){const s=o=>{const l=Nx(jh(r,o),{min:-1/0,max:1/0});return[l.min,l.max]},a=o=>{const l=Nx(jh(i,o),{min:-1/0,max:1/0});return[l.min,l.max]};return typeof r!="function"&&typeof i!="function"?[s(),a()]:o=>[s(o),a(o)]},threshold(t,e,r){return this.lockDirection=r.axis==="lock",dt.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});class dB extends sc{constructor(...e){super(...e),At(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(Io(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const r=Io(e),i=this.state;i._delta=dt.sub(r,i._values),dt.addTo(i._movement,i._delta),this.computeValues(r),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const hB=yt(yt({},va),{},{mouseOnly:(t=!0)=>t});class fB extends sc{constructor(...e){super(...e),At(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const r=this.state,i=UU(e);r._delta=dt.sub(i,r._values),dt.addTo(r._movement,r._delta),this.computeValues(i),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const pB=va;class mB extends sc{constructor(...e){super(...e),At(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const r=this.state;r._delta=yC(e),dt.addTo(r._movement,r._delta),xC(r),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const gB=va;class vB extends sc{constructor(...e){super(...e),At(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(Io(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const r=this.state;if(!r._active)return;r._active=!1;const i=Io(e);r._movement=r._delta=dt.sub(i,r._values),this.computeValues(i),this.compute(e),r.delta=r.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const yB=yt(yt({},va),{},{mouseOnly:(t=!0)=>t}),y_=new Map,tv=new Map;function _B(t){y_.set(t.key,t.engine),tv.set(t.key,t.resolver)}const wB={key:"drag",engine:KU,resolver:aB},bB={key:"hover",engine:vB,resolver:yB},xB={key:"move",engine:dB,resolver:hB},EB={key:"pinch",engine:uB,resolver:cB},TB={key:"scroll",engine:fB,resolver:pB},SB={key:"wheel",engine:mB,resolver:gB};function IB(t,e){if(t==null)return{};var r={},i=Object.keys(t),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function kB(t,e){if(t==null)return{};var r=IB(t,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}const CB={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=ir.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},AB=["target","eventOptions","window","enabled","transform"];function Ud(t={},e){const r={};for(const[i,s]of Object.entries(e))switch(typeof s){case"function":r[i]=s.call(r,t[i],i,t);break;case"object":r[i]=Ud(t[i],s);break;case"boolean":s&&(r[i]=t[i]);break}return r}function PB(t,e,r={}){const i=t,{target:s,eventOptions:a,window:o,enabled:l,transform:u}=i,c=kB(i,AB);if(r.shared=Ud({target:s,eventOptions:a,window:o,enabled:l,transform:u},CB),e){const h=tv.get(e);r[e]=Ud(yt({shared:r.shared},c),h)}else for(const h in c){const f=tv.get(h);f&&(r[h]=Ud(yt({shared:r.shared},c[h]),f))}return r}class EC{constructor(e,r){At(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=r}add(e,r,i,s,a){const o=this._listeners,l=OU(r,i),u=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=yt(yt({},u),a);e.addEventListener(l,s,c);const h=()=>{e.removeEventListener(l,s,c),o.delete(h)};return o.add(h),h}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class RB{constructor(){At(this,"_timeouts",new Map)}add(e,r,i=140,...s){this.remove(e),this._timeouts.set(e,window.setTimeout(r,i,...s))}remove(e){const r=this._timeouts.get(e);r&&window.clearTimeout(r)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class DB{constructor(e){At(this,"gestures",new Set),At(this,"_targetEventStore",new EC(this)),At(this,"gestureEventStores",{}),At(this,"gestureTimeoutStores",{}),At(this,"handlers",{}),At(this,"config",{}),At(this,"pointerIds",new Set),At(this,"touchIds",new Set),At(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),NB(this,e)}setEventIds(e){if(jf(e))return this.touchIds=new Set(FU(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,r){this.handlers=e,this.nativeHandlers=r}applyConfig(e,r){this.config=PB(e,r,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const r=this.config.shared,i={};let s;if(!(r.target&&(s=r.target(),!s))){if(r.enabled){for(const o of this.gestures){const l=this.config[o],u=jx(i,l.eventOptions,!!s);if(l.enabled){const c=y_.get(o);new c(this,e,o).bind(u)}}const a=jx(i,r.eventOptions,!!s);for(const o in this.nativeHandlers)a(o,"",l=>this.nativeHandlers[o](yt(yt({},this.state.shared),{},{event:l,args:e})),void 0,!0)}for(const a in i)i[a]=$U(...i[a]);if(!s)return i;for(const a in i){const{device:o,capture:l,passive:u}=LU(a);this._targetEventStore.add(s,o,"",i[a],{capture:l,passive:u})}}}}function Ca(t,e){t.gestures.add(e),t.gestureEventStores[e]=new EC(t,e),t.gestureTimeoutStores[e]=new RB}function NB(t,e){e.drag&&Ca(t,"drag"),e.wheel&&Ca(t,"wheel"),e.scroll&&Ca(t,"scroll"),e.move&&Ca(t,"move"),e.pinch&&Ca(t,"pinch"),e.hover&&Ca(t,"hover")}const jx=(t,e,r)=>(i,s,a,o={},l=!1)=>{var u,c;const h=(u=o.capture)!==null&&u!==void 0?u:e.capture,f=(c=o.passive)!==null&&c!==void 0?c:e.passive;let p=l?i:NU(i,s,h);r&&f&&(p+="Passive"),t[p]=t[p]||[],t[p].push(a)},MB=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function LB(t){const e={},r={},i=new Set;for(let s in t)MB.test(s)?(i.add(RegExp.lastMatch),r[s]=t[s]):e[s]=t[s];return[r,e,i]}function Aa(t,e,r,i,s,a){if(!t.has(r)||!y_.has(i))return;const o=r+"Start",l=r+"End",u=c=>{let h;return c.first&&o in e&&e[o](c),r in e&&(h=e[r](c)),c.last&&l in e&&e[l](c),h};s[i]=u,a[i]=a[i]||{}}function OB(t,e){const[r,i,s]=LB(t),a={};return Aa(s,r,"onDrag","drag",a,e),Aa(s,r,"onWheel","wheel",a,e),Aa(s,r,"onScroll","scroll",a,e),Aa(s,r,"onPinch","pinch",a,e),Aa(s,r,"onMove","move",a,e),Aa(s,r,"onHover","hover",a,e),{handlers:a,config:e,nativeHandlers:i}}function jB(t,e={},r,i){const s=Pe.useMemo(()=>new DB(t),[]);if(s.applyHandlers(t,i),s.applyConfig(e,r),Pe.useEffect(s.effect.bind(s)),Pe.useEffect(()=>s.clean.bind(s),[]),e.target===void 0)return s.bind.bind(s)}function VB(t){return t.forEach(_B),function(r,i){const{handlers:s,nativeHandlers:a,config:o}=OB(r,i||{});return jB(s,o,void 0,a)}}function FB(t,e){return VB([wB,EB,TB,SB,xB,bB])(t,e||{})}function UB(){return{scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0}}function TC(t){var e=t.scaleX,r=e===void 0?1:e,i=t.scaleY,s=i===void 0?1:i,a=t.translateX,o=a===void 0?0:a,l=t.translateY,u=l===void 0?0:l,c=t.skewX,h=c===void 0?0:c,f=t.skewY,p=f===void 0?0:f;return{scaleX:r,scaleY:s,translateX:o,translateY:u,skewX:h,skewY:p}}function IC(t){var e=t.scaleX,r=t.scaleY,i=t.translateX,s=t.translateY,a=t.skewX,o=t.skewY,l=e*r-o*a;return{scaleX:r/l,scaleY:e/l,translateX:(r*i-a*s)/-l,translateY:(o*i-e*s)/l,skewX:a/-l,skewY:o/-l}}function kC(t,e){var r=e.x,i=e.y;return{x:t.scaleX*r+t.skewX*i+t.translateX,y:t.skewY*r+t.scaleY*i+t.translateY}}function um(t,e){var r=e.x,i=e.y;return kC(IC(t),{x:r,y:i})}function BB(t,e){e===void 0&&(e=void 0);var r=e||t;return TC({scaleX:t,scaleY:r})}function cm(t,e){return TC({translateX:t,translateY:e})}function Vx(t,e){return{scaleX:t.scaleX*e.scaleX+t.skewX*e.skewY,scaleY:t.skewY*e.skewX+t.scaleY*e.scaleY,translateX:t.scaleX*e.translateX+t.skewX*e.translateY+t.translateX,translateY:t.skewY*e.translateX+t.scaleY*e.translateY+t.translateY,skewX:t.scaleX*e.skewX+t.skewX*e.scaleY,skewY:t.skewY*e.scaleX+t.scaleY*e.skewY}}function nv(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];switch(e.length){case 0:throw new Error("composeMatrices() requires arguments: was called with no args");case 1:return e[0];case 2:return Vx(e[0],e[1]);default:{var i=e[0],s=e[1],a=e.slice(2),o=Vx(i,s);return nv.apply(void 0,[o].concat(a))}}}function rv(){return rv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},rv.apply(this,arguments)}var zB={scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0},$B=function(e){return-e.deltaY>0?{scaleX:1.1,scaleY:1.1}:{scaleX:.9,scaleY:.9}},HB=function(e){var r=e.offset,i=r[0],s=e.lastOffset,a=s[0];return{scaleX:i-a<0?.9:1.1,scaleY:i-a<0?.9:1.1}};function CC(t){var e=t.scaleXMin,r=e===void 0?0:e,i=t.scaleXMax,s=i===void 0?1/0:i,a=t.scaleYMin,o=a===void 0?0:a,l=t.scaleYMax,u=l===void 0?1/0:l,c=t.initialTransformMatrix,h=c===void 0?zB:c,f=t.wheelDelta,p=f===void 0?$B:f,m=t.pinchDelta,w=m===void 0?HB:m,A=t.width,D=t.height,T=t.constrain,x=t.children,b=M.useRef(null),P=M.useRef(h),U=M.useState(h),V=U[0],R=U[1],I=M.useState(!1),y=I[0],_=I[1],S=M.useState(void 0),O=S[0],N=S[1],K=M.useState(void 0),ie=K[0],oe=K[1],fe=M.useCallback(function(j,F){if(T)return T(j,F);var z=j.scaleX,X=j.scaleY,le=z>s||z<r,we=X>u||X<o;return le||we?F:j},[T,r,s,o,u]),W=M.useCallback(function(j){R(function(F){var z=fe(j,F);return P.current=z,z})},[fe]),Y=M.useCallback(function(j){var F=j.x,z=j.y;return kC(V,{x:F,y:z})},[V]),se=M.useCallback(function(j){var F=j.x,z=j.y;return um(V,{x:F,y:z})},[V]),re=M.useCallback(function(){W(h)},[h,W]),q=M.useCallback(function(j){var F=j.scaleX,z=j.scaleY,X=j.point,le=z||F,we=X||{x:A/2,y:D/2},Ie=um(P.current,we),Me=nv(P.current,cm(Ie.x,Ie.y),BB(F,le),cm(-Ie.x,-Ie.y));if(W(Me),y){var Ye=P.current,Ce=Ye.translateX,ot=Ye.translateY;oe(X),N({translateX:Ce,translateY:ot})}},[D,A,y,W]),H=M.useCallback(function(j){var F=j.translateX,z=j.translateY,X=nv(V,cm(F,z));W(X)},[W,V]),J=M.useCallback(function(j){var F=j.translateX,z=j.translateY,X=rv({},V,{translateX:F,translateY:z});W(X)},[W,V]),Q=M.useCallback(function(j){var F=j.x,z=j.y,X=um(V,{x:F,y:z});J({translateX:X.x,translateY:X.y})},[J,V]),ce=M.useCallback(function(){return IC(V)},[V]),ge=M.useCallback(function(){var j=ce(),F=j.translateX,z=j.translateY,X=j.scaleX,le=j.scaleY,we=j.skewX,Ie=j.skewY;return"matrix("+X+", "+Ie+", "+we+", "+le+", "+F+", "+z+")"},[ce]),je=M.useCallback(function(j){var F=V.translateX,z=V.translateY;oe(om(j)||void 0),N({translateX:F,translateY:z}),_(!0)},[V]),Re=M.useCallback(function(j,F){var z,X;if(!(!y||!ie||!O)){var le=om(j),we=le?-(ie.x-le.x):-ie.x,Ie=le?-(ie.y-le.y):-ie.y,Me=O.translateX+we;F!=null&&F.offsetX&&(Me+=(z=F==null?void 0:F.offsetX)!=null?z:0);var Ye=O.translateY+Ie;F!=null&&F.offsetY&&(Ye+=(X=F==null?void 0:F.offsetY)!=null?X:0),J({translateX:Me,translateY:Ye})}},[y,J,ie,O]),He=M.useCallback(function(){oe(void 0),N(void 0),_(!1)},[]),We=M.useCallback(function(j){j.preventDefault();var F=om(j)||void 0,z=p(j),X=z.scaleX,le=z.scaleY;q({scaleX:X,scaleY:le,point:F})},[q,p]),Xe=M.useCallback(function(j){var F=j.origin,z=F[0],X=F[1],le=j.memo,we=le;if(b.current){var Ie,Me=(Ie=we)!=null?Ie:b.current.getBoundingClientRect(),Ye=Me.top,Ce=Me.left;we||(we={top:Ye,left:Ce});var ot=w(j),Wt=ot.scaleX,Rr=ot.scaleY;q({scaleX:Wt,scaleY:Rr,point:{x:z-Ce,y:X-Ye}})}return we},[q,w]),Ke=M.useCallback(function(){var j=V.translateX,F=V.translateY,z=V.scaleX,X=V.scaleY,le=V.skewX,we=V.skewY;return"matrix("+z+", "+we+", "+le+", "+X+", "+j+", "+F+")"},[V]),qe=M.useCallback(function(){var j={x:A/2,y:D/2},F=se(j);H({translateX:F.x-j.x,translateY:F.y-j.y})},[D,A,se,H]),nt=M.useCallback(function(){W(UB())},[W]);FB({onDragStart:function(F){var z=F.event;z instanceof KeyboardEvent||je(z)},onDrag:function(F){var z=F.event,X=F.pinching,le=F.cancel;X?(le(),He()):z instanceof KeyboardEvent||Re(z)},onDragEnd:He,onPinch:Xe,onWheel:function(F){var z=F.event,X=F.active,le=F.pinching;le||!X||We(z)}},{target:b,eventOptions:{passive:!1},drag:{filterTaps:!0}});var C={initialTransformMatrix:h,transformMatrix:V,isDragging:y,center:qe,clear:nt,scale:q,translate:H,translateTo:Q,setTranslate:J,setTransformMatrix:W,reset:re,handleWheel:We,handlePinch:Xe,dragEnd:He,dragMove:Re,dragStart:je,toString:Ke,invert:ce,toStringInvert:ge,applyToPoint:Y,applyInverseToPoint:se,containerRef:b};return Pe.createElement(Pe.Fragment,null,x(C))}CC.propTypes={width:tt.number.isRequired,height:tt.number.isRequired,wheelDelta:tt.func,scaleXMin:tt.number,scaleXMax:tt.number,scaleYMin:tt.number,scaleYMax:tt.number,constrain:tt.func,children:tt.func.isRequired};const Pa={top:40,right:40,bottom:40,left:40};function WB(t,e){const r=t.split(" "),i=[];let s="";return r.forEach(a=>{(s+" "+a).trim().length>e&&s?(i.push(s),s=a):s=s?`${s} ${a}`:a}),s&&i.push(s),i}function qB(){const[t,e]=M.useState(null),[r,i]=M.useState(!0),[s,a]=M.useState(null),[o,l]=M.useState(null),[u,c]=M.useState(null),[h,f]=M.useState({width:window.innerWidth,height:window.innerHeight}),p=Qr();if(M.useEffect(()=>{const b=()=>{f({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)},[]),M.useEffect(()=>{(async()=>{try{const P={},V=(await Ln(pn(Rt,"interviewSummaries"))).docs.map(async I=>{const y=pn(Rt,"interviewSummaries",I.id,"subSummaries");(await Ln(y)).forEach(S=>{const O=S.data();O.keywords&&O.keywords.split(",").map(N=>N.trim().toLowerCase()).forEach(N=>{P[N]=(P[N]||0)+1})})});await Promise.all(V);const R={name:"keywords",children:Object.entries(P).map(([I,y])=>({name:I,value:y}))};e(R),i(!1)}catch(P){console.error("Error fetching data:",P),a("Error loading data"),i(!1)}})()},[]),r)return v.jsxs("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:[v.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),v.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]});if(s)return v.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-50 px-6",children:v.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg max-w-xl text-center",children:s})});if(!t)return null;const m=v_(t).sum(b=>b.value).sort((b,P)=>P.value-b.value),{width:w,height:A}=h,D=w-Pa.left-Pa.right,T=A-Pa.top-Pa.bottom,x=b=>{u&&u.name===b.data.name?c(null):c({name:b.data.name,value:b.data.value,x:b.x,y:b.y,r:b.r})};return m.children&&Math.max(...m.children.map(b=>b.value)),v.jsxs("div",{className:"w-full h-screen relative bg-gray-50 font-sans overflow-hidden",children:[v.jsxs("div",{className:"absolute top-4 left-4 z-40 bg-white bg-opacity-90 p-3 rounded-lg shadow-sm max-w-md",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Keyword Visualization"}),v.jsx("p",{className:"text-sm leading-relaxed text-gray-600 m-0",children:"Explore keywords mentioned across all interviews. Bubble size indicates frequency of mentions."})]}),u&&v.jsxs("div",{className:"absolute top-24 left-4 z-50 bg-white rounded-xl shadow-md p-4 max-w-xs border border-gray-200",children:[v.jsxs("div",{className:"flex justify-between items-start",children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900 m-0",children:u.name}),v.jsx("button",{onClick:()=>c(null),className:"bg-transparent border-0 text-gray-500 text-base cursor-pointer p-1 flex items-center justify-center rounded hover:bg-gray-100 hover:text-gray-900 transition-colors",children:""})]}),v.jsxs("p",{className:"text-sm text-gray-600 mt-2 mb-4",children:["This topic appears ",v.jsx("strong",{children:u.value})," times across all interviews."]}),v.jsx("div",{children:v.jsxs("button",{onClick:()=>p(`/playlist-builder?keywords=${encodeURIComponent(u.name)}`),className:"w-full py-2.5 px-4 bg-blue-600 text-white font-medium text-sm rounded-lg cursor-pointer flex items-center justify-center hover:bg-blue-700 transition-colors shadow-sm",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4 mr-2",children:v.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),"Watch related segments"]})})]}),v.jsx(CC,{width:w,height:A,scaleXMin:.5,scaleXMax:3,scaleYMin:.5,scaleYMax:3,initialTransformMatrix:{scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0},children:b=>v.jsxs("div",{className:"w-full h-full overflow-hidden relative touch-none flex justify-center items-center",children:[v.jsxs("svg",{width:"100%",height:"100%",ref:b.containerRef,className:"bg-white rounded-xl shadow-md mx-4 my-4 mt-20",children:[v.jsx("rect",{width:"100%",height:"100%",fill:"#ffffff",rx:14,onClick:()=>{b.reset(),c(null)}}),v.jsx(pC,{root:m,size:[D,T],padding:16,children:P=>{const U=P.descendants().filter(V=>!V.children);return v.jsx(Lh,{transform:b.toString(),top:Pa.top+(T/2-P.r),left:Pa.left+(D/2-P.r),children:U.map((V,R)=>{const I=Math.max(V.r,20),y=u&&u.name===V.data.name,_=Math.min(I/3.5,14),S=Math.max(5,Math.floor(I/3)),O=WB(V.data.name,S),N=_,K=O.length>1?-((O.length-1)*N)/2:0,ie=y?"#2563eb":"#d1d5db",oe=y?3:1,fe=y?"#f0f7ff":"#ffffff";return v.jsxs("g",{transform:`translate(${V.x}, ${V.y})`,onMouseEnter:W=>l({name:V.data.name,value:V.data.value,x:W.clientX,y:W.clientY}),onMouseLeave:()=>l(null),onClick:()=>x(V),className:"cursor-pointer",children:[v.jsx("circle",{r:I,fill:fe,stroke:ie,strokeWidth:oe,style:{transition:"fill 0.3s, stroke 0.3s, stroke-width 0.3s"}}),v.jsx("text",{textAnchor:"middle",fontSize:_,fontWeight:y?"bold":"normal",fill:"#111827",pointerEvents:"none",style:{fontFamily:"Inter, system-ui, sans-serif"},children:O.map((W,Y)=>v.jsx("tspan",{x:"0",dy:Y===0?K:N,children:W},Y))})]},`circle-${R}`)})})}})]}),o&&!u&&v.jsxs("div",{className:"absolute bg-gray-900 bg-opacity-90 text-white p-2 px-3 rounded-lg pointer-events-none text-sm z-50 shadow-md max-w-xs",style:{left:o.x+8,top:o.y-20},children:[v.jsx("div",{className:"font-semibold",children:o.name}),v.jsxs("div",{children:[o.value," mentions"]}),v.jsx("div",{className:"text-xs mt-1 text-blue-200",children:"Click to explore"})]})]})}),v.jsxs("div",{className:"absolute bottom-4 right-4 bg-white bg-opacity-90 py-2 px-3 rounded-lg text-xs text-gray-600 shadow-sm flex items-center",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3.5 h-3.5 mr-1.5 text-gray-500",children:v.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})}),v.jsx("span",{children:"Scroll to zoom  Drag to pan  Click bubble to select"})]})]})}const GB="modulepreload",KB=function(t){return"/civil-rights-history-project/"+t},Fx={},YB=function(e,r,i){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(u=>{if(u=KB(u),u in Fx)return;Fx[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":GB,c||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),c)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},XB=M.lazy(()=>YB(()=>import("./MapComponent-CClknSyg.js").then(t=>t.M),[]));function QB(){const[t,e]=M.useState(!0),[r,i]=M.useState(null),[s,a]=M.useState([]);M.useEffect(()=>{u()},[]);const o=async c=>{try{await new Promise(p=>setTimeout(p,1e3));const f=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(c)}`)).json();if(f.length>0)return[parseFloat(f[0].lat),parseFloat(f[0].lon)]}catch(h){console.error("Error fetching coordinates:",h)}return null},l=c=>{if(!c)return null;const h=/(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,f=c==null?void 0:c.match(h);return f&&f[1]?f[1]:null},u=async()=>{try{e(!0);const c=await Ln(pn(Rt,"interviewSummaries")),h=[];for(const f of c.docs){const p=f.data(),{birthplace:m,name:w,videoEmbedLink:A}=p;if(m){const D=await o(m);if(D){const T=l(A),x=T?`https://img.youtube.com/vi/${T}/default.jpg`:"";h.push({position:D,name:w,birthplace:m,thumbnailURL:x,documentName:f.id})}}}console.log("Markers data:",h),a(h),e(!1)}catch(c){console.error("Error fetching birthplaces:",c),i("Failed to load map data"),e(!1)}};return r?v.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:v.jsx("div",{className:"text-red-500",children:r})}):v.jsxs("div",{className:"map-container",children:[!t&&s.length>0&&v.jsx(M.Suspense,{fallback:v.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:v.jsx(XB,{markers:s})}),t&&v.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})]})}const Yr=navigator?navigator.userAgent.toLowerCase():"no-user-agent-specified",ko=document?document.documentElement:null,JB=Yr?Yr.indexOf("phantom")!==-1:!1,oc=window&&"ActiveXObject"in window;oc&&Yr.match(/MSIE 9/i);const Vf=Yr.indexOf("webkit")!==-1;Yr.indexOf("android");const ZB=Yr.search("android [23]")!==-1,ya=window?typeof window.orientation<"u":!1,e6=navigator&&window?navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&!window.PointerEvent:!1,t6=navigator&&window?window.PointerEvent&&navigator.pointerEnabled&&navigator.maxTouchPoints:e6,AC=window?window.opera:!1;Yr.indexOf("gecko");const Co=Yr.indexOf("gecko")!==-1&&!Vf&&!AC&&!oc;Yr.indexOf("chrome");const n6=Yr.indexOf("edge/")!==-1;ko&&oc&&"transition"in ko.style;window&&"WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix;ko&&"MozPerspective"in ko.style;ko&&"OTransition"in ko.style;let Ux=window?"devicePixelRatio"in window&&window.devicePixelRatio>1:!1;if(!Ux&&window&&"matchMedia"in window){let t=window.matchMedia("(min-resolution:144dpi)");Ux=t&&t.matches}const qr=window&&!window.L_NO_TOUCH&&!JB&&(t6||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);function r6(){var t=window.innerWidth,e=window.innerHeight,r="portrait";return t>e&&(r="landscape"),r}function lc(t){return typeof t=="string"?document.getElementById(t):t}function de(t,e,r){var i=document.createElement(t);return i.className=e,r&&r.appendChild(i),i}function Fl(t,e){var r=de("button",t,e);return r.type="button",r}function iv(t){for(var e={x:0,y:0};t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;return e}function PC(t){for(var e=document.documentElement.style,r=0;r<t.length;r++)if(t[r]in e)return t[r];return!1}PC(["transition","webkitTransition","OTransition","MozTransition","msTransition"]);PC(["transformProperty","WebkitTransform","OTransform","MozTransform","msTransform"]);class Fe extends Error{constructor(e,r){super(),this.name="TLError",this.message=e||"error",this.message_key=this.message,this.detail=r||""}}const Bx={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function RC(t){Bx[t.toLowerCase()]&&(t=Bx[t.toLowerCase()]);var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(i,s,a,o){return s+s+a+a+o+o});var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null}function Ze(t,e){var r;for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}function i6(t){return t==null?!1:t==!0||String(t).toLowerCase()=="true"||Number(t)==1}function ja(t){for(var e=Array.prototype.slice.call(arguments,1),r=0,i=e.length,s;r<i;r++)s=e[r]||{},Ze(t,s);return t}const DC=[];function s6(t){DC.push(t)}function Ue(t){DC.forEach(e=>{try{e(t)}catch(r){console&&console.log&&console.log("Error handling trace",r)}})}function ri(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}const zx=function(){var t=0,e="_tl_id";return function(r){return r[e]=r[e]||++t,r[e]}}();function qn(t){return t&&typeof t.replace=="function"?t.replace(/^\s+|\s+$/g,""):""}function Sn(t,...e){for(let i of e)for(var r of Object.getOwnPropertyNames(i.prototype))t.prototype[r]=i.prototype[r]}function a6(t,e){if(e||(e=la(6)),!(e in t))return e;var r=e.match(/^(.+)(-\d+)?$/)[1],i=[];for(let a in t)a.match(/^(.+?)(-\d+)?$/)[1]==r&&i.push(a);e=r+"-"+(i.length+1);for(var s=i.length;i.indexOf(e)!=-1;s++)e=r+"-"+s;return e}function o6(t){var e=[];if(Object.keys)e=Object.keys(t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);for(var i=0;i<e.length;i++){var s=e[i];if(t[s]!=null&&typeof t[s]!="string"||qn(t[s]).length!=0)return!1}return!0}function dm(t){t=qn(t),t=t.toLowerCase();for(var e="/_,:;",r="aaaaaeeeeeiiiiooooouuuunc------",i=0,s=e.length;i<s;i++)t=t.replace(new RegExp(e.charAt(i),"g"),r.charAt(i));return t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),t=t.replace(/^([0-9])/,"_$1"),t}function la(t,e){var r=function(a){return Math.floor(Math.random()*a)},i=function(){var a="abcdefghijklmnopqurstuvwxyz";return a.substr(r(32),1)},s=function(a){for(var o="",l=0;l<a;l++)o+=i();return o};return e?e+"-"+s(t):"tl-"+s(t)}function l6(t,e,r){for(var i=0;i<t.length;i++)if(e<t[i])return t[i];return e}function u6(t,e,r){for(var i=t.length-1;i>=0;i--)if(e>t[i])return t[i];return e}function c6(t){return t==parseFloat(t)?!(t%2):void 0}function NC(t,e,r,i){for(var s=i||0,a=0;a<e.length;a++)e[a].data[r]==t&&(s=a);return s}function oo(t){return t&&(t=t.replace(/<a\b[^>]*>/i,""),t=t.replace(/<\/a>/i,""),t)}function d6(t,e){t.data=ja({},t.data,e),t.data.unique_id===""&&(t.data.unique_id=la(6))}function h6(t){return t.match(/<p>[\s\S]*?<\/p>/)?t:"<p>"+t+"</p>"}function Ao(t){return t=t.replace(/(<[^>]*>)+/g,""),t.replace('"',"'")}function sv(t,e,r){var i=function(l,u,c){c||(c="");var h=30;return u&&u.length>h&&(u=u.substring(0,h)+""),c+"<a class='tl-makelink' href='"+l+"' onclick='void(0)'>"+u+"</a>"},s=/\b(?:https?|ftp):\/\/([a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|])/gim,a=/(^|[^\/>])(www\.[\S]+(\b|$))/gim,o=/([a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+)/gim;return t.replace(s,function(l,u,c,h){if(c>0){var f=h[c-1];if(f=='"'||f=="'"||f=="=")return l}return i(l,u)}).replace(a,function(l,u,c,h,f){return i("http://"+c,c,u)}).replace(o,function(l,u,c,h){return i("mailto:"+u,u)})}function Ff(t){return t.replace(/(.*)www.dropbox.com\/(.*)/,"$1dl.dropboxusercontent.com/$2")}const _a={square:t=>{var e={w:0,h:0};return t.w>t.h&&t.h>0?(e.h=t.h,e.w=t.h):(e.w=t.w,e.h=t.w),e},r16_9:t=>t.w!==null&&t.w!==""?Math.round(t.w/16*9):t.h!==null&&t.h!==""?Math.round(t.h/9*16):0,r4_3:t=>{if(t.w!==null&&t.w!=="")return Math.round(t.w/4*3);if(t.h!==null&&t.h!=="")return Math.round(t.h/3*4)}};function f6(t){var e,r=[],i,s;e=t.toString(),e.match("&#038;")?e=e.replace("&#038;","&"):e.match("&#38;")?e=e.replace("&#38;","&"):e.match("&amp;")&&(e=e.replace("&amp;","&")),s=e.slice(e.indexOf("?")+1).split("&");for(var a=0;a<s.length;a++)i=s[a].split("="),r.push(i[0]),r[i[0]]=i[1];return r}function p6(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r+"="+t[r]);return"?"+e.join("&")}function m6(t,e){if(typeof t<"u"){var r=0;for(var i in t){if(e===r)return t[i];r++}return""}else return""}let g6=function(t){var e="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",r=e.length;return{encode:function(i){if(typeof i!="number"||i!==parseInt(i))throw'"encode" only accepts integers.';for(var s="";i;){var a=i%r;i=Math.floor(i/r),s=e[a].toString()+s}return s},decode:function(i){if(typeof i!="string")throw'"decode" only accepts strings.';for(var s=0;i;){var a=e.indexOf(i[0]);if(a<0)throw`"decode" can't find "`+i[0]+'" in the alphabet: "'+e+'"';var o=i.length-1;s+=a*Math.pow(r,o),i=i.substring(1)}return s}}}();function hm(t){if(typeof t=="string"){let s=t.match(/^\s*(\d+h)?(\d+m)?(\d+s)?\s*/i);if(s){var e=parseInt(s[1])||0,r=parseInt(s[2])||0,i=parseInt(s[3])||0;return i+r*60+e*60*60}}else if(typeof t=="number")return t;return 0}function v6(t){var e=new DOMParser().parseFromString(t,"text/html");return e.body.textContent||""}function y6(t){}function Uf(t){var e=new y6;return e.get(t)}function Du(t){return t==1?1:1-Math.pow(2,-10*t)}function Wo(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}let Vh=function(){};Vh.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments)},r=function(){};r.prototype=this.prototype;var i=new r;i.constructor=e,e.prototype=i,e.superclass=this.prototype;for(var s in this)this.hasOwnProperty(s)&&s!=="prototype"&&s!=="superclass"&&(e[s]=this[s]);return t.statics&&(ja(e,t.statics),delete t.statics),t.includes&&(ja.apply(null,[i].concat(t.includes)),delete t.includes),t.options&&i.options&&(t.options=ja({},i.options,t.options)),ja(i,t),e.extend=Vh.extend,e.include=function(a){ja(this.prototype,a)},e};class In{on(e,r,i){if(!r)throw new Fe("No callback function provided");var s=this._tl_events=this._tl_events||{};return s[e]=s[e]||[],s[e].push({action:r,context:i||this}),this}addEventListener(e,r,i){return this.on(e,r,i)}hasEventListeners(e){var r="_tl_events";return r in this&&e in this[r]&&this[r][e].length>0}removeEventListener(e,r,i){if(!this.hasEventListeners(e))return this;for(var s=0,a=this._tl_events,o=a[e].length;s<o;s++)if(a[e][s].action===r&&(!i||a[e][s].context===i))return a[e].splice(s,1),this;return this}off(e,r,i){return this.removeEventListener(e,r,i)}fire(e,r){if(!this.hasEventListeners(e))return this;for(var i=Ze({type:e,target:this},r),s=this._tl_events[e].slice(),a=0,o=s.length;a<o;a++)s[a].action?s[a].action.call(s[a].context||this,i):Ue(`no action defined for ${e} listener`);return this}}function Ei(t,e){return _6(t,e)}const _6=function(){var t=document,e=window,r=e.performance,i=r&&(r.now||r.webkitNow||r.msNow||r.mozNow),s=i?function(){return i.call(r)}:function(){return+new Date},a=t.documentElement,o=!1,l=1e3,u=/^rgb\(|#/,c=/^([+\-])=([\d\.]+)/,h=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,f=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,p=/scale\(((?:[+\-]=)?([\d\.]+))\)/,m=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,w=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,A={lineHeight:1,zoom:1,zIndex:1,opacity:1,transform:1},D=function(){var q=t.createElement("a").style,H=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],J;for(J=0;J<H.length;J++)if(H[J]in q)return H[J]}(),T=function(){return typeof t.createElement("a").style.opacity<"u"}(),x=t.defaultView&&t.defaultView.getComputedStyle?function(q,H){H=H=="transform"?D:H,H=N(H);var J=null,Q=t.defaultView.getComputedStyle(q,"");return Q&&(J=Q[H]),q.style[H]||J}:a.currentStyle?function(q,H){if(H=N(H),H=="opacity"){var J=100;try{J=q.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch{try{J=q.filters("alpha").opacity}catch{}}return J/100}var Q=q.currentStyle?q.currentStyle[H]:null;return q.style[H]||Q}:function(q,H){return q.style[N(H)]},b=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||function(q){e.setTimeout(function(){q(+new Date)},17)}}(),P=[];b(function(q){o=q>1e12!=s()>1e12});function U(q,H,J){if(Array.prototype.indexOf)return q.indexOf(H);for(J=0;J<q.length;++J)if(q[J]===H)return J}function V(q){var H,J=P.length;for(i&&q>1e12&&(q=s()),o&&(q=s()),H=J;H--;)P[H](q);P.length&&b(V)}function R(q){P.push(q)===1&&b(V)}function I(q){var H,J=U(P,q);J>=0&&(H=P.slice(J+1),P.length=J,P=P.concat(H))}function y(q,H){var J={},Q;return(Q=q.match(f))&&(J.rotate=se(Q[1],H?H.rotate:null)),(Q=q.match(p))&&(J.scale=se(Q[1],H?H.scale:null)),(Q=q.match(m))&&(J.skewx=se(Q[1],H?H.skewx:null),J.skewy=se(Q[3],H?H.skewy:null)),(Q=q.match(w))&&(J.translatex=se(Q[1],H?H.translatex:null),J.translatey=se(Q[3],H?H.translatey:null)),J}function _(q){var H="";return"rotate"in q&&(H+="rotate("+q.rotate+"deg) "),"scale"in q&&(H+="scale("+q.scale+") "),"translatex"in q&&(H+="translate("+q.translatex+"px,"+q.translatey+"px) "),"skewx"in q&&(H+="skew("+q.skewx+"deg,"+q.skewy+"deg)"),H}function S(q,H,J){return"#"+(1<<24|q<<16|H<<8|J).toString(16).slice(1)}function O(q){var H=q.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(H?S(H[1],H[2],H[3]):q).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function N(q){return q.replace(/-(.)/g,function(H,J){return J.toUpperCase()})}function K(q){return typeof q=="function"}function ie(q){return Math.sin(q*Math.PI/2)}function oe(q,H,J,Q,ce,ge){Q=K(Q)?Q:re.easings[Q]||ie;var je=q||l,Re=this,He=ge-ce,We=s(),Xe=0,Ke=0;function qe(nt){var C=nt-We;if(C>je||Xe)return ge=isFinite(ge)?ge:1,Xe?Ke&&H(ge):H(ge),I(qe),J&&J.apply(Re);isFinite(ge)?H(He*Q(C/je)+ce):H(Q(C/je))}return R(qe),{stop:function(nt){Xe=1,Ke=nt,nt||(J=null)}}}function fe(q,H){var J=q.length,Q=[],ce,ge;for(ce=0;ce<J;++ce)Q[ce]=[q[ce][0],q[ce][1]];for(ge=1;ge<J;++ge)for(ce=0;ce<J-ge;++ce)Q[ce][0]=(1-H)*Q[ce][0]+H*Q[parseInt(ce+1,10)][0],Q[ce][1]=(1-H)*Q[ce][1]+H*Q[parseInt(ce+1,10)][1];return[Q[0][0],Q[0][1]]}function W(q,H,J){var Q=[],ce,ge,je,Re;for(ce=0;ce<6;ce++)je=Math.min(15,parseInt(H.charAt(ce),16)),Re=Math.min(15,parseInt(J.charAt(ce),16)),ge=Math.floor((Re-je)*q+je),ge=ge>15?15:ge<0?0:ge,Q[ce]=ge.toString(16);return"#"+Q.join("")}function Y(q,H,J,Q,ce,ge,je){if(ce=="transform"){je={};for(var Re in J[ge][ce])je[Re]=Re in Q[ge][ce]?Math.round(((Q[ge][ce][Re]-J[ge][ce][Re])*q+J[ge][ce][Re])*l)/l:J[ge][ce][Re];return je}else return typeof J[ge][ce]=="string"?W(q,J[ge][ce],Q[ge][ce]):(je=Math.round(((Q[ge][ce]-J[ge][ce])*q+J[ge][ce])*l)/l,ce in A||(je+=H[ge][ce]||"px"),je)}function se(q,H,J,Q,ce){return(J=c.exec(q))?(ce=parseFloat(J[2]))&&H+(J[1]=="+"?1:-1)*ce:parseFloat(q)}function re(q,H){var J=q?J=isFinite(q.length)?q:[q]:[],Q,ce=H.complete,ge=H.duration,je=H.easing,Re=H.bezier,He=[],We=[],Xe=[],Ke=[],qe,nt;for(Re&&(qe=H.left,nt=H.top,delete H.right,delete H.bottom,delete H.left,delete H.top),Q=J.length;Q--;){if(He[Q]={},We[Q]={},Xe[Q]={},Re){var C=x(J[Q],"left"),j=x(J[Q],"top"),F=[se(K(qe)?qe(J[Q]):qe||0,parseFloat(C)),se(K(nt)?nt(J[Q]):nt||0,parseFloat(j))];Ke[Q]=K(Re)?Re(J[Q],F):Re,Ke[Q].push(F),Ke[Q].unshift([parseInt(C,10),parseInt(j,10)])}for(var z in H){switch(z){case"complete":case"duration":case"easing":case"bezier":continue}var X=x(J[Q],z),le,we=K(H[z])?H[z](J[Q]):H[z];if(typeof we=="string"&&u.test(we)&&!u.test(X)){delete H[z];continue}He[Q][z]=z=="transform"?y(X):typeof we=="string"&&u.test(we)?O(X).slice(1):parseFloat(X),We[Q][z]=z=="transform"?y(we,He[Q][z]):typeof we=="string"&&we.charAt(0)=="#"?O(we).slice(1):se(we,parseFloat(X)),typeof we=="string"&&(le=we.match(h))&&(Xe[Q][z]=le[1])}}return oe.apply(J,[ge,function(Ie,Me,Ye){for(Q=J.length;Q--;){Re&&(Ye=fe(Ke[Q],Ie),J[Q].style.left=Ye[0]+"px",J[Q].style.top=Ye[1]+"px");for(var Ce in H)Me=Y(Ie,Xe,He,We,Ce,Q),Ce=="transform"?J[Q].style[D]=_(Me):Ce=="opacity"&&!T?J[Q].style.filter="alpha(opacity="+Me*100+")":J[Q].style[N(Ce)]=Me}},ce,je])}return re.tween=oe,re.getStyle=x,re.bezier=fe,re.transform=D,re.parseTransform=y,re.formatTransform=_,re.easings={},re}();class Ii{show(e){e||(this._el.container.style.display="block")}hide(e){this._el.container.style.display="none"}addTo(e){e.appendChild(this._el.container),this.onAdd()}removeFrom(e){e.removeChild(this._el.container),this.onRemove()}animatePosition(e,r){var i={duration:this.options.duration,easing:this.options.ease};for(var s in e)e.hasOwnProperty(s)&&(i[s]=e[s]+"px");this.animator&&this.animator.stop(),this.animator=Ei(r,i)}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}setPosition(e,r){for(var i in e)e.hasOwnProperty(i)&&(r?r.style[i]=e[i]+"px":this._el.container.style[i]=e[i]+"px")}getPosition(){return iv(this._el.container)}}let w6=class{constructor(e,r,i){this._el={drag:e,move:e},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},i&&(this._el.move=i),this.options={enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:!1,right:!1},momentum_multiplier:2e3,duration:1e3,ease:Wo},this.animator=null,this.dragevent=this.mousedrag,qr&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},Ze(this.options,r)}enable(e){this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){Ae.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Ae.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(e){this.options.constraint=e}_onDragStart(e){qr?e.originalEvent?(this.data.pagex.start=e.originalEvent.touches[0].screenX,this.data.pagey.start=e.originalEvent.touches[0].screenY):(this.data.pagex.start=e.targetTouches[0].screenX,this.data.pagey.start=e.targetTouches[0].screenY):(this.data.pagex.start=e.pageX,this.data.pagey.start=e.pageY),this.options.enable.x&&(this._el.move.style.left=this.data.pagex.start-this._el.move.offsetWidth/2+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.pagey.start-this._el.move.offsetHeight/2+"px"),this.data.pos.start=iv(this._el.drag),this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),Ae.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Ae.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(e){this.data.sliding=!1,Ae.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Ae.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(e){e.preventDefault(),this.data.sliding=!0,qr?e.originalEvent?(this.data.pagex.end=e.originalEvent.touches[0].screenX,this.data.pagey.end=e.originalEvent.touches[0].screenY):(this.data.pagex.end=e.targetTouches[0].screenX,this.data.pagey.end=e.targetTouches[0].screenY):(this.data.pagex.end=e.pageX,this.data.pagey.end=e.pageY),this.data.pos.end=iv(this._el.drag),this.data.new_pos.x=-(this.data.pagex.start-this.data.pagex.end-this.data.pos.start.x),this.data.new_pos.y=-(this.data.pagey.start-this.data.pagey.end-this.data.pos.start.y),this.options.enable.x&&(this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var e={x:0,y:0,time:0},r={x:0,y:0,time:0},i=!1;e.time=(new Date().getTime()-this.data.time.start)*10,r.time=(new Date().getTime()-this.data.time.start)*10,r.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),r.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),e.x=Math.round(r.x/r.time),e.y=Math.round(r.y/r.time),this.data.new_pos.x=Math.min(this.data.pos.end.x+e.x),this.data.new_pos.y=Math.min(this.data.pos.end.y+e.y),this.options.enable.x?this.data.new_pos.x<0&&(this.data.new_pos.x=0):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,r.time<3e3&&(i=!0),Math.abs(r.x)>1e4&&(this.data.direction="left",r.x>0&&(this.data.direction="right")),Math.abs(r.y)>1e4&&(this.data.direction="up",r.y>0&&(this.data.direction="down")),this._animateMomentum(),i&&this.fire("swipe_"+this.data.direction,this.data)}_animateMomentum(){var e={x:this.data.new_pos.x,y:this.data.new_pos.y},r={duration:this.options.duration,easing:Du};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(e.y>this.options.constraint.bottom?e.y=this.options.constraint.bottom:e.y<this.options.constraint.top&&(e.y=this.options.constraint.top)),r.top=Math.floor(e.y)+"px"),this.options.enable.x&&((this.options.constraint.left||this.options.constraint.right)&&(e.x>this.options.constraint.left?e.x=this.options.constraint.left:e.x<this.options.constraint.right&&(e.x=this.options.constraint.right)),r.left=Math.floor(e.x)+"px"),this.animator=Ei(this._el.move,r),this.fire("momentum",this.data)}};Sn(In);var Ae={addListener:function(t,e,r,i){var s=zx(r),a="_tl_"+e+s;if(!t[a]){var o=function(c){return r.call(i||t,c||Ae._getEvent())};if(qr&&e==="dblclick"&&this.addDoubleTapListener)this.addDoubleTapListener(t,o,s);else if("addEventListener"in t)if(e==="mousewheel")t.addEventListener("DOMMouseScroll",o,!1),t.addEventListener(e,o,!1);else if(e==="mouseenter"||e==="mouseleave"){var l=o,u=e==="mouseenter"?"mouseover":"mouseout";o=function(c){if(Ae._checkMouse(t,c))return l(c)},t.addEventListener(u,o,!1)}else t.addEventListener(e,o,!1);else"attachEvent"in t&&t.attachEvent("on"+e,o);t[a]=o}},removeListener:function(t,e,r){var i=zx(r),s="_tl_"+e+i,a=t[s];a&&(qr&&e==="dblclick"&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,i):"removeEventListener"in t?e==="mousewheel"?(t.removeEventListener("DOMMouseScroll",a,!1),t.removeEventListener(e,a,!1)):e==="mouseenter"||e==="mouseleave"?t.removeEventListener(e==="mouseenter"?"mouseover":"mouseout",a,!1):t.removeEventListener(e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a),t[s]=null)},_checkMouse:function(t,e){var r=e.relatedTarget;if(!r)return!0;try{for(;r&&r!==t;)r=r.parentNode}catch{return!1}return r!==t},_getEvent:function(){var t=window.event;if(!t)for(var e=arguments.callee.caller;e&&(t=e.arguments[0],!(t&&window.Event===t.constructor));)e=e.caller;return t},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},disableClickPropagation:function(t){Ae.addListener(t,w6.START,Ae.stopPropagation),Ae.addListener(t,"click",Ae.stopPropagation),Ae.addListener(t,"dblclick",Ae.stopPropagation)},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stop:function(t){Ae.preventDefault(t),Ae.stopPropagation(t)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e}},ki=function(){var t,e,r,i,s=[],a=s.slice,o=s.filter,l=window.document,u={},c={},h={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},f=/^\s*<(\w+|!)[^>]*>/,p=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,m=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,w=/^(?:body|html)$/i,A=/([A-Z])/g,D=["val","css","html","text","data","width","height","offset"],T=["after","prepend","before","append"],x=l.createElement("table"),b=l.createElement("tr"),P={tr:l.createElement("tbody"),tbody:x,thead:x,tfoot:x,td:b,th:b,"*":l.createElement("div")},U=/complete|loaded|interactive/,V=/^[\w-]*$/,R={},I=R.toString,y={},_,S,O=l.createElement("div"),N={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},K=Array.isArray||function(C){return C instanceof Array};y.matches=function(C,j){if(!j||!C||C.nodeType!==1)return!1;var F=C.webkitMatchesSelector||C.mozMatchesSelector||C.oMatchesSelector||C.matchesSelector;if(F)return F.call(C,j);var z,X=C.parentNode,le=!X;return le&&(X=O).appendChild(C),z=~y.qsa(X,j).indexOf(C),le&&O.removeChild(C),z};function ie(C){return C==null?String(C):R[I.call(C)]||"object"}function oe(C){return ie(C)=="function"}function fe(C){return C!=null&&C==C.window}function W(C){return C!=null&&C.nodeType==C.DOCUMENT_NODE}function Y(C){return ie(C)=="object"}function se(C){return Y(C)&&!fe(C)&&Object.getPrototypeOf(C)==Object.prototype}function re(C){return typeof C.length=="number"}function q(C){return o.call(C,function(j){return j!=null})}function H(C){return C.length>0?r.fn.concat.apply([],C):C}_=function(C){return C.replace(/-+(.)?/g,function(j,F){return F?F.toUpperCase():""})};function J(C){return C.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}S=function(C){return o.call(C,function(j,F){return C.indexOf(j)==F})};function Q(C){return C in c?c[C]:c[C]=new RegExp("(^|\\s)"+C+"(\\s|$)")}function ce(C,j){return typeof j=="number"&&!h[J(C)]?j+"px":j}function ge(C){var j,F;return u[C]||(j=l.createElement(C),l.body.appendChild(j),F=getComputedStyle(j,"").getPropertyValue("display"),j.parentNode.removeChild(j),F=="none"&&(F="block"),u[C]=F),u[C]}function je(C){return"children"in C?a.call(C.children):r.map(C.childNodes,function(j){if(j.nodeType==1)return j})}y.fragment=function(C,j,F){var z,X,le;return p.test(C)&&(z=r(l.createElement(RegExp.$1))),z||(C.replace&&(C=C.replace(m,"<$1></$2>")),j===t&&(j=f.test(C)&&RegExp.$1),j in P||(j="*"),le=P[j],le.innerHTML=""+C,z=r.each(a.call(le.childNodes),function(){le.removeChild(this)})),se(F)&&(X=r(z),r.each(F,function(we,Ie){D.indexOf(we)>-1?X[we](Ie):X.attr(we,Ie)})),z},y.Z=function(C,j){return C=C||[],C.__proto__=r.fn,C.selector=j||"",C},y.isZ=function(C){return C instanceof y.Z},y.init=function(C,j){var F;if(C)if(typeof C=="string")if(C=C.trim(),C[0]=="<"&&f.test(C))F=y.fragment(C,RegExp.$1,j),C=null;else{if(j!==t)return r(j).find(C);F=y.qsa(l,C)}else{if(oe(C))return r(l).ready(C);if(y.isZ(C))return C;if(K(C))F=q(C);else if(Y(C))F=[C],C=null;else if(f.test(C))F=y.fragment(C.trim(),RegExp.$1,j),C=null;else{if(j!==t)return r(j).find(C);F=y.qsa(l,C)}}else return y.Z();return y.Z(F,C)},r=function(C,j){return y.init(C,j)};function Re(C,j,F){for(e in j)F&&(se(j[e])||K(j[e]))?(se(j[e])&&!se(C[e])&&(C[e]={}),K(j[e])&&!K(C[e])&&(C[e]=[]),Re(C[e],j[e],F)):j[e]!==t&&(C[e]=j[e])}r.extend=function(C){var j,F=a.call(arguments,1);return typeof C=="boolean"&&(j=C,C=F.shift()),F.forEach(function(z){Re(C,z,j)}),C},y.qsa=function(C,j){var F,z=j[0]=="#",X=!z&&j[0]==".",le=z||X?j.slice(1):j,we=V.test(le);return W(C)&&we&&z?(F=C.getElementById(le))?[F]:[]:C.nodeType!==1&&C.nodeType!==9?[]:a.call(we&&!z?X?C.getElementsByClassName(le):C.getElementsByTagName(j):C.querySelectorAll(j))};function He(C,j){return j==null?r(C):r(C).filter(j)}r.contains=function(C,j){return C!==j&&C.contains(j)};function We(C,j,F,z){return oe(j)?j.call(C,F,z):j}function Xe(C,j,F){F==null?C.removeAttribute(j):C.setAttribute(j,F)}function Ke(C,j){var F=C.className,z=F&&F.baseVal!==t;if(j===t)return z?F.baseVal:F;z?F.baseVal=j:C.className=j}function qe(C){var j;try{return C&&(C=="true"||(C=="false"?!1:C=="null"?null:!/^0/.test(C)&&!isNaN(j=Number(C))?j:/^[\[\{]/.test(C)?r.parseJSON(C):C))}catch{return C}}r.type=ie,r.isFunction=oe,r.isWindow=fe,r.isArray=K,r.isPlainObject=se,r.isEmptyObject=function(C){var j;for(j in C)return!1;return!0},r.inArray=function(C,j,F){return s.indexOf.call(j,C,F)},r.camelCase=_,r.trim=function(C){return C==null?"":String.prototype.trim.call(C)},r.uuid=0,r.support={},r.expr={},r.map=function(C,j){var F,z=[],X,le;if(re(C))for(X=0;X<C.length;X++)F=j(C[X],X),F!=null&&z.push(F);else for(le in C)F=j(C[le],le),F!=null&&z.push(F);return H(z)},r.each=function(C,j){var F,z;if(re(C)){for(F=0;F<C.length;F++)if(j.call(C[F],F,C[F])===!1)return C}else for(z in C)if(j.call(C[z],z,C[z])===!1)return C;return C},r.grep=function(C,j){return o.call(C,j)},window.JSON&&(r.parseJSON=JSON.parse),r.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(C,j){R["[object "+j+"]"]=j.toLowerCase()}),r.fn={forEach:s.forEach,reduce:s.reduce,push:s.push,sort:s.sort,indexOf:s.indexOf,concat:s.concat,map:function(C){return r(r.map(this,function(j,F){return C.call(j,F,j)}))},slice:function(){return r(a.apply(this,arguments))},ready:function(C){return U.test(l.readyState)&&l.body?C(r):l.addEventListener("DOMContentLoaded",function(){C(r)},!1),this},get:function(C){return C===t?a.call(this):this[C>=0?C:C+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(C){return s.every.call(this,function(j,F){return C.call(j,F,j)!==!1}),this},filter:function(C){return oe(C)?this.not(this.not(C)):r(o.call(this,function(j){return y.matches(j,C)}))},add:function(C,j){return r(S(this.concat(r(C,j))))},is:function(C){return this.length>0&&y.matches(this[0],C)},not:function(C){var j=[];if(oe(C)&&C.call!==t)this.each(function(z){C.call(this,z)||j.push(this)});else{var F=typeof C=="string"?this.filter(C):re(C)&&oe(C.item)?a.call(C):r(C);this.forEach(function(z){F.indexOf(z)<0&&j.push(z)})}return r(j)},has:function(C){return this.filter(function(){return Y(C)?r.contains(this,C):r(this).find(C).size()})},eq:function(C){return C===-1?this.slice(C):this.slice(C,+C+1)},first:function(){var C=this[0];return C&&!Y(C)?C:r(C)},last:function(){var C=this[this.length-1];return C&&!Y(C)?C:r(C)},find:function(C){var j,F=this;return typeof C=="object"?j=r(C).filter(function(){var z=this;return s.some.call(F,function(X){return r.contains(X,z)})}):this.length==1?j=r(y.qsa(this[0],C)):j=this.map(function(){return y.qsa(this,C)}),j},closest:function(C,j){var F=this[0],z=!1;for(typeof C=="object"&&(z=r(C));F&&!(z?z.indexOf(F)>=0:y.matches(F,C));)F=F!==j&&!W(F)&&F.parentNode;return r(F)},parents:function(C){for(var j=[],F=this;F.length>0;)F=r.map(F,function(z){if((z=z.parentNode)&&!W(z)&&j.indexOf(z)<0)return j.push(z),z});return He(j,C)},parent:function(C){return He(S(this.pluck("parentNode")),C)},children:function(C){return He(this.map(function(){return je(this)}),C)},contents:function(){return this.map(function(){return a.call(this.childNodes)})},siblings:function(C){return He(this.map(function(j,F){return o.call(je(F.parentNode),function(z){return z!==F})}),C)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(C){return r.map(this,function(j){return j[C]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=ge(this.nodeName))})},replaceWith:function(C){return this.before(C).remove()},wrap:function(C){var j=oe(C);if(this[0]&&!j)var F=r(C).get(0),z=F.parentNode||this.length>1;return this.each(function(X){r(this).wrapAll(j?C.call(this,X):z?F.cloneNode(!0):F)})},wrapAll:function(C){if(this[0]){r(this[0]).before(C=r(C));for(var j;(j=C.children()).length;)C=j.first();r(C).append(this)}return this},wrapInner:function(C){var j=oe(C);return this.each(function(F){var z=r(this),X=z.contents(),le=j?C.call(this,F):C;X.length?X.wrapAll(le):z.append(le)})},unwrap:function(){return this.parent().each(function(){r(this).replaceWith(r(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(C){return this.each(function(){var j=r(this);(C===t?j.css("display")=="none":C)?j.show():j.hide()})},prev:function(C){return r(this.pluck("previousElementSibling")).filter(C||"*")},next:function(C){return r(this.pluck("nextElementSibling")).filter(C||"*")},html:function(C){return arguments.length===0?this.length>0?this[0].innerHTML:null:this.each(function(j){var F=this.innerHTML;r(this).empty().append(We(this,C,j,F))})},text:function(C){return arguments.length===0?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=C===t?"":""+C})},attr:function(C,j){var F;return typeof C=="string"&&j===t?this.length==0||this[0].nodeType!==1?t:C=="value"&&this[0].nodeName=="INPUT"?this.val():!(F=this[0].getAttribute(C))&&C in this[0]?this[0][C]:F:this.each(function(z){if(this.nodeType===1)if(Y(C))for(e in C)Xe(this,e,C[e]);else Xe(this,C,We(this,j,z,this.getAttribute(C)))})},removeAttr:function(C){return this.each(function(){this.nodeType===1&&Xe(this,C)})},prop:function(C,j){return C=N[C]||C,j===t?this[0]&&this[0][C]:this.each(function(F){this[C]=We(this,j,F,this[C])})},data:function(C,j){var F=this.attr("data-"+C.replace(A,"-$1").toLowerCase(),j);return F!==null?qe(F):t},val:function(C){return arguments.length===0?this[0]&&(this[0].multiple?r(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(j){this.value=We(this,C,j,this.value)})},offset:function(C){if(C)return this.each(function(F){var z=r(this),X=We(this,C,F,z.offset()),le=z.offsetParent().offset(),we={top:X.top-le.top,left:X.left-le.left};z.css("position")=="static"&&(we.position="relative"),z.css(we)});if(this.length==0)return null;var j=this[0].getBoundingClientRect();return{left:j.left+window.pageXOffset,top:j.top+window.pageYOffset,width:Math.round(j.width),height:Math.round(j.height)}},css:function(C,j){if(arguments.length<2){var F=this[0],z=getComputedStyle(F,"");if(!F)return;if(typeof C=="string")return F.style[_(C)]||z.getPropertyValue(C);if(K(C)){var X={};return r.each(K(C)?C:[C],function(we,Ie){X[Ie]=F.style[_(Ie)]||z.getPropertyValue(Ie)}),X}}var le="";if(ie(C)=="string")!j&&j!==0?this.each(function(){this.style.removeProperty(J(C))}):le=J(C)+":"+ce(C,j);else for(e in C)!C[e]&&C[e]!==0?this.each(function(){this.style.removeProperty(J(e))}):le+=J(e)+":"+ce(e,C[e])+";";return this.each(function(){this.style.cssText+=";"+le})},index:function(C){return C?this.indexOf(r(C)[0]):this.parent().children().indexOf(this[0])},hasClass:function(C){return C?s.some.call(this,function(j){return this.test(Ke(j))},Q(C)):!1},addClass:function(C){return C?this.each(function(j){i=[];var F=Ke(this),z=We(this,C,j,F);z.split(/\s+/g).forEach(function(X){r(this).hasClass(X)||i.push(X)},this),i.length&&Ke(this,F+(F?" ":"")+i.join(" "))}):this},removeClass:function(C){return this.each(function(j){if(C===t)return Ke(this,"");i=Ke(this),We(this,C,j,i).split(/\s+/g).forEach(function(F){i=i.replace(Q(F)," ")}),Ke(this,i.trim())})},toggleClass:function(C,j){return C?this.each(function(F){var z=r(this),X=We(this,C,F,Ke(this));X.split(/\s+/g).forEach(function(le){(j===t?!z.hasClass(le):j)?z.addClass(le):z.removeClass(le)})}):this},scrollTop:function(C){if(this.length){var j="scrollTop"in this[0];return C===t?j?this[0].scrollTop:this[0].pageYOffset:this.each(j?function(){this.scrollTop=C}:function(){this.scrollTo(this.scrollX,C)})}},scrollLeft:function(C){if(this.length){var j="scrollLeft"in this[0];return C===t?j?this[0].scrollLeft:this[0].pageXOffset:this.each(j?function(){this.scrollLeft=C}:function(){this.scrollTo(C,this.scrollY)})}},position:function(){if(this.length){var C=this[0],j=this.offsetParent(),F=this.offset(),z=w.test(j[0].nodeName)?{top:0,left:0}:j.offset();return F.top-=parseFloat(r(C).css("margin-top"))||0,F.left-=parseFloat(r(C).css("margin-left"))||0,z.top+=parseFloat(r(j[0]).css("border-top-width"))||0,z.left+=parseFloat(r(j[0]).css("border-left-width"))||0,{top:F.top-z.top,left:F.left-z.left}}},offsetParent:function(){return this.map(function(){for(var C=this.offsetParent||l.body;C&&!w.test(C.nodeName)&&r(C).css("position")=="static";)C=C.offsetParent;return C})}},r.fn.detach=r.fn.remove,["width","height"].forEach(function(C){var j=C.replace(/./,function(F){return F[0].toUpperCase()});r.fn[C]=function(F){var z,X=this[0];return F===t?fe(X)?X["inner"+j]:W(X)?X.documentElement["scroll"+j]:(z=this.offset())&&z[C]:this.each(function(le){X=r(this),X.css(C,We(this,F,le,X[C]()))})}});function nt(C,j){j(C);for(var F in C.childNodes)nt(C.childNodes[F],j)}return T.forEach(function(C,j){var F=j%2;r.fn[C]=function(){var z,X=r.map(arguments,function(Ie){return z=ie(Ie),z=="object"||z=="array"||Ie==null?Ie:y.fragment(Ie)}),le,we=this.length>1;return X.length<1?this:this.each(function(Ie,Me){le=F?Me:Me.parentNode,Me=j==0?Me.nextSibling:j==1?Me.firstChild:j==2?Me:null,X.forEach(function(Ye){if(we)Ye=Ye.cloneNode(!0);else if(!le)return r(Ye).remove();nt(le.insertBefore(Ye,Me),function(Ce){Ce.nodeName!=null&&Ce.nodeName.toUpperCase()==="SCRIPT"&&(!Ce.type||Ce.type==="text/javascript")&&!Ce.src&&window.eval.call(window,Ce.innerHTML)})})})},r.fn[F?C+"To":"insert"+(j?"Before":"After")]=function(z){return r(z)[C](this),this}}),y.Z.prototype=r.fn,y.uniq=S,y.deserializeValue=qe,r.zepto=y,r}();window.Zepto=ki;window.$===void 0&&(window.$=ki);(function(t){t.zepto.qsa;var e=1,r,i=Array.prototype.slice,s=t.isFunction,a=function(y){return typeof y=="string"},o={},l={},u="onfocusin"in window,c={focus:"focusin",blur:"focusout"},h={mouseenter:"mouseover",mouseleave:"mouseout"};l.click=l.mousedown=l.mouseup=l.mousemove="MouseEvents";function f(y){return y._zid||(y._zid=e++)}function p(y,_,S,O){if(_=m(_),_.ns)var N=w(_.ns);return(o[f(y)]||[]).filter(function(K){return K&&(!_.e||K.e==_.e)&&(!_.ns||N.test(K.ns))&&(!S||f(K.fn)===f(S))&&(!O||K.sel==O)})}function m(y){var _=(""+y).split(".");return{e:_[0],ns:_.slice(1).sort().join(" ")}}function w(y){return new RegExp("(?:^| )"+y.replace(" "," .* ?")+"(?: |$)")}function A(y,_){return y.del&&!u&&y.e in c||!!_}function D(y){return h[y]||u&&c[y]||y}function T(y,_,S,O,N,K,ie){var oe=f(y),fe=o[oe]||(o[oe]=[]);_.split(/\s/).forEach(function(W){if(W=="ready")return t(document).ready(S);var Y=m(W);Y.fn=S,Y.sel=N,Y.e in h&&(S=function(re){var q=re.relatedTarget;if(!q||q!==this&&!t.contains(this,q))return Y.fn.apply(this,arguments)}),Y.del=K;var se=K||S;Y.proxy=function(re){if(re=R(re),!re.isImmediatePropagationStopped()){re.data=O;var q=se.apply(y,re._args==r?[re]:[re].concat(re._args));return q===!1&&(re.preventDefault(),re.stopPropagation()),q}},Y.i=fe.length,fe.push(Y),"addEventListener"in y&&y.addEventListener(D(Y.e),Y.proxy,A(Y,ie))})}function x(y,_,S,O,N){var K=f(y);(_||"").split(/\s/).forEach(function(ie){p(y,ie,S,O).forEach(function(oe){delete o[K][oe.i],"removeEventListener"in y&&y.removeEventListener(D(oe.e),oe.proxy,A(oe,N))})})}t.event={add:T,remove:x},t.proxy=function(y,_){if(s(y)){var S=function(){return y.apply(_,arguments)};return S._zid=f(y),S}else{if(a(_))return t.proxy(y[_],y);throw new TypeError("expected function")}},t.fn.bind=function(y,_,S){return this.on(y,_,S)},t.fn.unbind=function(y,_){return this.off(y,_)},t.fn.one=function(y,_,S,O){return this.on(y,_,S,O,1)};var b=function(){return!0},P=function(){return!1},U=/^([A-Z]|returnValue$|layer[XY]$)/,V={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function R(y,_){return(_||!y.isDefaultPrevented)&&(_||(_=y),t.each(V,function(S,O){var N=_[S];y[S]=function(){return this[O]=b,N&&N.apply(_,arguments)},y[O]=P}),(_.defaultPrevented!==r?_.defaultPrevented:"returnValue"in _?_.returnValue===!1:_.getPreventDefault&&_.getPreventDefault())&&(y.isDefaultPrevented=b)),y}function I(y){var _,S={originalEvent:y};for(_ in y)!U.test(_)&&y[_]!==r&&(S[_]=y[_]);return R(S,y)}t.fn.delegate=function(y,_,S){return this.on(_,y,S)},t.fn.undelegate=function(y,_,S){return this.off(_,y,S)},t.fn.live=function(y,_){return t(document.body).delegate(this.selector,y,_),this},t.fn.die=function(y,_){return t(document.body).undelegate(this.selector,y,_),this},t.fn.on=function(y,_,S,O,N){var K,ie,oe=this;return y&&!a(y)?(t.each(y,function(fe,W){oe.on(fe,_,S,W,N)}),oe):(!a(_)&&!s(O)&&O!==!1&&(O=S,S=_,_=r),(s(S)||S===!1)&&(O=S,S=r),O===!1&&(O=P),oe.each(function(fe,W){N&&(K=function(Y){return x(W,Y.type,O),O.apply(this,arguments)}),_&&(ie=function(Y){var se,re=t(Y.target).closest(_,W).get(0);if(re&&re!==W)return se=t.extend(I(Y),{currentTarget:re,liveFired:W}),(K||O).apply(re,[se].concat(i.call(arguments,1)))}),T(W,y,O,S,_,ie||K)}))},t.fn.off=function(y,_,S){var O=this;return y&&!a(y)?(t.each(y,function(N,K){O.off(N,_,K)}),O):(!a(_)&&!s(S)&&S!==!1&&(S=_,_=r),S===!1&&(S=P),O.each(function(){x(this,y,S,_)}))},t.fn.trigger=function(y,_){return y=a(y)||t.isPlainObject(y)?t.Event(y):R(y),y._args=_,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(y):t(this).triggerHandler(y,_)})},t.fn.triggerHandler=function(y,_){var S,O;return this.each(function(N,K){S=I(a(y)?t.Event(y):y),S._args=_,S.target=K,t.each(p(K,y.type||y),function(ie,oe){if(O=oe.proxy(S),S.isImmediatePropagationStopped())return!1})}),O},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(y){t.fn[y]=function(_){return _?this.bind(y,_):this.trigger(y)}}),["focus","blur"].forEach(function(y){t.fn[y]=function(_){return _?this.bind(y,_):this.each(function(){try{this[y]()}catch{}}),this}}),t.Event=function(y,_){a(y)||(_=y,y=_.type);var S=document.createEvent(l[y]||"Events"),O=!0;if(_)for(var N in _)N=="bubbles"?O=!!_[N]:S[N]=_[N];return S.initEvent(y,O,!0),R(S)}})(ki);(function(t){var e=0,r=window.document,i,s,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,o=/^(?:text|application)\/javascript/i,l=/^(?:text|application)\/xml/i,u="application/json",c="text/html",h=/^\s*$/;function f(_,S,O){var N=t.Event(S);return t(_).trigger(N,O),!N.isDefaultPrevented()}function p(_,S,O,N){if(_.global)return f(S||r,O,N)}t.active=0;function m(_){_.global&&t.active++===0&&p(_,null,"ajaxStart")}function w(_){_.global&&!--t.active&&p(_,null,"ajaxStop")}function A(_,S){var O=S.context;if(S.beforeSend.call(O,_,S)===!1||p(S,O,"ajaxBeforeSend",[_,S])===!1)return!1;p(S,O,"ajaxSend",[_,S])}function D(_,S,O,N){var K=O.context,ie="success";O.success.call(K,_,ie,S),N&&N.resolveWith(K,[_,ie,S]),p(O,K,"ajaxSuccess",[S,O,_]),x(ie,S,O)}function T(_,S,O,N,K){var ie=N.context;N.error.call(ie,O,S,_),K&&K.rejectWith(ie,[O,S,_]),p(N,ie,"ajaxError",[O,N,_||S]),x(S,O,N)}function x(_,S,O){var N=O.context;O.complete.call(N,S,_),p(O,N,"ajaxComplete",[S,O]),w(O)}function b(){}t.ajaxJSONP=function(_,S){if(!("type"in _))return t.ajax(_);var O=_.jsonpCallback,N=(t.isFunction(O)?O():O)||"jsonp"+ ++e,K=r.createElement("script"),ie=window[N],oe,fe=function(se){t(K).triggerHandler("error",se||"abort")},W={abort:fe},Y;return S&&S.promise(W),t(K).on("load error",function(se,re){clearTimeout(Y),t(K).off().remove(),se.type=="error"||!oe?T(null,re||"error",W,_,S):D(oe[0],W,_,S),window[N]=ie,oe&&t.isFunction(ie)&&ie(oe[0]),ie=oe=void 0}),A(W,_)===!1?(fe("abort"),W):(window[N]=function(){oe=arguments},K.src=_.url.replace(/\?(.+)=\?/,"?$1="+N),r.head.appendChild(K),_.timeout>0&&(Y=setTimeout(function(){fe("timeout")},_.timeout)),W)},t.ajaxSettings={type:"GET",beforeSend:b,success:b,error:b,complete:b,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:u,xml:"application/xml, text/xml",html:c,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0};function P(_){return _&&(_=_.split(";",2)[0]),_&&(_==c?"html":_==u?"json":o.test(_)?"script":l.test(_)&&"xml")||"text"}function U(_,S){return S==""?_:(_+"&"+S).replace(/[&?]{1,2}/,"?")}function V(_){_.processData&&_.data&&t.type(_.data)!="string"&&(_.data=t.param(_.data,_.traditional)),_.data&&(!_.type||_.type.toUpperCase()=="GET")&&(_.url=U(_.url,_.data),_.data=void 0)}t.ajax=function(_){var S=t.extend({},_||{}),O=t.Deferred&&t.Deferred();for(i in t.ajaxSettings)S[i]===void 0&&(S[i]=t.ajaxSettings[i]);m(S),S.crossDomain||(S.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(S.url)&&RegExp.$2!=window.location.host),S.url||(S.url=window.location.toString()),V(S),S.cache===!1&&(S.url=U(S.url,"_="+Date.now()));var N=S.dataType,K=/\?.+=\?/.test(S.url);if(N=="jsonp"||K)return K||(S.url=U(S.url,S.jsonp?S.jsonp+"=?":S.jsonp===!1?"":"callback=?")),t.ajaxJSONP(S,O);var ie=S.accepts[N],oe={},fe=function(H,J){oe[H.toLowerCase()]=[H,J]},W=/^([\w-]+:)\/\//.test(S.url)?RegExp.$1:window.location.protocol,Y=S.xhr(),se=Y.setRequestHeader,re;if(O&&O.promise(Y),S.crossDomain||fe("X-Requested-With","XMLHttpRequest"),fe("Accept",ie||"*/*"),(ie=S.mimeType||ie)&&(ie.indexOf(",")>-1&&(ie=ie.split(",",2)[0]),Y.overrideMimeType&&Y.overrideMimeType(ie)),(S.contentType||S.contentType!==!1&&S.data&&S.type.toUpperCase()!="GET")&&fe("Content-Type",S.contentType||"application/x-www-form-urlencoded"),S.headers)for(s in S.headers)fe(s,S.headers[s]);if(Y.setRequestHeader=fe,Y.onreadystatechange=function(){if(Y.readyState==4){Y.onreadystatechange=b,clearTimeout(re);var H,J=!1;if(Y.status>=200&&Y.status<300||Y.status==304||Y.status==0&&W=="file:"){N=N||P(S.mimeType||Y.getResponseHeader("content-type")),H=Y.responseText;try{N=="script"?(0,eval)(H):N=="xml"?H=Y.responseXML:N=="json"&&(H=h.test(H)?null:t.parseJSON(H))}catch(Q){J=Q}J?T(J,"parsererror",Y,S,O):D(H,Y,S,O)}else T(Y.statusText||null,Y.status?"error":"abort",Y,S,O)}},A(Y,S)===!1)return Y.abort(),T(null,"abort",Y,S,O),Y;if(S.xhrFields)for(s in S.xhrFields)Y[s]=S.xhrFields[s];var q="async"in S?S.async:!0;Y.open(S.type,S.url,q,S.username,S.password);for(s in oe)se.apply(Y,oe[s]);return S.timeout>0&&(re=setTimeout(function(){Y.onreadystatechange=b,Y.abort(),T(null,"timeout",Y,S,O)},S.timeout)),Y.send(S.data?S.data:null),Y};function R(_,S,O,N){var K=!t.isFunction(S);return{url:_,data:K?S:void 0,success:K?t.isFunction(O)?O:void 0:S,dataType:K&&N||O}}t.get=function(_,S,O,N){return t.ajax(R.apply(null,arguments))},t.post=function(_,S,O,N){var K=R.apply(null,arguments);return K.type="POST",t.ajax(K)},t.getJSON=function(_,S,O){var N=R.apply(null,arguments);return N.dataType="json",t.ajax(N)},t.fetchJSON=function(_){var S=new XMLHttpRequest;return new Promise(function(O,N){S.onreadystatechange=function(){try{if(S.readyState!==4)return;if(S.status>=200&&S.status<300){var K=JSON.parse(S.responseText);O(K)}else N({status:S.status,statusText:S.statusText})}catch(ie){N({status:400,statusText:`Error fetching JSON from ${_}: ${ie}`})}},S.open("GET",_,!0),S.send()})},t.fn.load=function(_,S,O){if(!this.length)return this;var N=this,K=_.split(/\s/),ie,oe=R(_,S,O),fe=oe.success;return K.length>1&&(oe.url=K[0],ie=K[1]),oe.success=function(W){N.html(ie?t("<div>").html(W.replace(a,"")).find(ie):W),fe&&fe.apply(N,arguments)},t.ajax(oe),this};var I=encodeURIComponent;function y(_,S,O,N){var K,ie=t.isArray(S),oe=t.isPlainObject(S);t.each(S,function(fe,W){K=t.type(W),N&&(fe=O?N:N+"["+(oe||K=="object"||K=="array"?fe:"")+"]"),!N&&ie?_.add(W.name,W.value):K=="array"||!O&&K=="object"?y(_,W,O,fe):_.add(fe,W)})}t.param=function(_,S){var O=[];return O.add=function(N,K){this.push(I(N)+"="+I(K))},y(O,_,S),O.join("&").replace(/%20/g,"+")}})(ki);(function(t){t.fn.serializeArray=function(){var e=[],r;return t([].slice.call(this.get(0).elements)).each(function(){r=t(this);var i=r.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&i!="submit"&&i!="reset"&&i!="button"&&(i!="radio"&&i!="checkbox"||this.checked)&&e.push({name:r.attr("name"),value:r.val()})}),e},t.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(r){e.push(encodeURIComponent(r.name)+"="+encodeURIComponent(r.value))}),e.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var r=t.Event("submit");this.eq(0).trigger(r),r.isDefaultPrevented()||this.get(0).submit()}return this}})(ki);(function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(r,i){return r=r||[],t.extend(r,t.fn),r.selector=i||"",r.__Z=!0,r},isZ:function(r){return t.type(r)==="array"&&"__Z"in r}});try{getComputedStyle(void 0)}catch{var e=getComputedStyle;window.getComputedStyle=function(i,s){try{return e(i,s)}catch{return null}}}})(ki);const Fh=ki.getJSON,qo=ki.ajax,Bf=ki.fetchJSON,jr=[["millisecond",1,function(t){}],["second",1e3,function(t){t.setMilliseconds(0)}],["minute",1e3*60,function(t){t.setSeconds(0)}],["hour",1e3*60*60,function(t){t.setMinutes(0)}],["day",1e3*60*60*24,function(t){t.setHours(0)}],["month",1e3*60*60*24*30,function(t){t.setDate(1)}],["year",1e3*60*60*24*365,function(t){t.setMonth(0)}],["decade",1e3*60*60*24*365*10,function(t){var e=t.getFullYear();t.setFullYear(e-e%10)}],["century",1e3*60*60*24*365*100,function(t){var e=t.getFullYear();t.setFullYear(e-e%100)}],["millennium",1e3*60*60*24*365*1e3,function(t){var e=t.getFullYear();t.setFullYear(e-e%1e3)}]],Vs=["millisecond","second","minute","hour","day","month","year"],$x=/^([\+-]?\d+?)(-\d{2}?)?(-\d{2}?)?$/,b6=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,Hx={base:{millisecond:"time_short",second:"time",minute:"time_no_seconds_small_date",hour:"time_no_seconds_small_date",day:"full",month:"month",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"},short:{millisecond:"time_short",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"}},zf=Vh.extend({initialize:function(t,e,r){typeof t=="number"?this.data={format:"yyyy mmmm",date_obj:new Date(t)}:Date==t.constructor?this.data={format:"yyyy mmmm",date_obj:t}:(this.data=JSON.parse(JSON.stringify(t)),this._createDateObj()),t.format&&!e&&(e=t.format),this._setFormat(e,r)},setDateFormat:function(t){this.data.format=t},getDisplayDate:function(t,e){if(this.data.display_date)return this.data.display_date;t||(t=lr.fallback),t.constructor!=lr&&(Ue("First argument to getDisplayDate must be type Language"),t=lr.fallback);var r=e||this.data.format;return t.formatDate(this.data.date_obj,r)},getMillisecond:function(){return this.getTime()},getTime:function(){return this.data.date_obj.getTime()},isBefore:function(t){if(!this.data.date_obj.constructor==t.data.date_obj.constructor)throw new Fe("date_compare_err");return"isBefore"in this.data.date_obj?this.data.date_obj.isBefore(t.data.date_obj):this.data.date_obj<t.data.date_obj},isAfter:function(t){if(!this.data.date_obj.constructor==t.data.date_obj.constructor)throw new Fe("date_compare_err");return"isAfter"in this.data.date_obj?this.data.date_obj.isAfter(t.data.date_obj):this.data.date_obj>t.data.date_obj},floor:function(t){for(var e=new Date(this.data.date_obj.getTime()),r=0;r<jr.length;r++)if(jr[r][2](e),jr[r][0]==t)return new zf(e);throw new Fe("invalid_scale_err",t)},_getDateData:function(){var t={year:0,month:1,day:1,hour:0,minute:0,second:0,millisecond:0};Ze(t,this.data);for(var e in Vs){var r=qn(t[Vs[e]]);if(!r.match(/^-?\d*$/))throw new Fe("invalid_date_err",Vs[e]+" = '"+t[Vs[e]]+"'");var i=parseInt(t[Vs[e]]);isNaN(i)&&(i=e==4||e==5?1:0),t[Vs[e]]=i}return t.month>0&&t.month<=12&&(t.month=t.month-1),t},_createDateObj:function(){var t=this._getDateData();this.data.date_obj=new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond),this.data.date_obj.getFullYear()!=t.year&&this.data.date_obj.setFullYear(t.year)},findBestFormat:function(t){for(var e=Vs,r=0;r<e.length;r++)if(this.data[e[r]])return t?t in Hx||(t="short"):t="base",Hx[t][e[r]];return""},_setFormat:function(t,e){t?this.data.format=t:this.data.format||(this.data.format=this.findBestFormat()),e?this.data.format_short=e:this.data.format_short||(this.data.format_short=this.findBestFormat(!0))},getFullYear:function(){return this.data.date_obj.getFullYear()}});function Wx(t){if(t.match($x)){var e=t.match($x).slice(1),r={year:e[0].replace("+","")};return e[1]&&(r.month=e[1].replace("-","")),e[2]&&(r.day=e[2].replace("-","")),r}if(t.match(b6))return cls.parseISODate(t);if(t.match(/^\-?\d+$/))return{year:t};var i={};if(t.match(/\d+\/\d+\/\d+/)){var s=t.match(/\d+\/\d+\/\d+/)[0];t=qn(t.replace(s,""));var a=s.split("/");i.month=a[0],i.day=a[1],i.year=a[2]}if(t.match(/\d+\/\d+/)){var s=t.match(/\d+\/\d+/)[0];t=qn(t.replace(s,""));var a=s.split("/");i.month=a[0],i.year=a[1]}if(t.match(":")){var o=t.split(":");if(i.hour=o[0],i.minute=o[1],o[2]){let l=o[2].split(".");i.second=l[0],i.millisecond=l[1]}}return i}const Nu=Vh.extend({initialize:function(t){if(this.year=parseInt(t),isNaN(this.year))throw new Fe("invalid_year_err",t)},isBefore:function(t){return this.year<t.year},isAfter:function(t){return this.year>t.year},getTime:function(){return this.year}}),av=1e6,ov=av*10,lv=ov*10,qx=lv*10;function Li(t){return function(e){var r=e.getTime();return new Nu(Math.floor(r/t)*t)}}const Bd=[["year",1,new Li(1)],["decade",10,new Li(10)],["century",100,new Li(100)],["millennium",1e3,new Li(1e3)],["age",av,new Li(av)],["epoch",ov,new Li(ov)],["era",lv,new Li(lv)],["eon",qx,new Li(qx)]],$f=zf.extend({initialize:function(t,e,r){Nu==t.constructor?this.data={date_obj:t}:(this.data=JSON.parse(JSON.stringify(t)),this._createDateObj()),t.format&&!e&&(e=t.format),this._setFormat(e,r)},_createDateObj:function(){var t=this._getDateData();this.data.date_obj=new Nu(t.year)},floor:function(t){for(var e=0;e<Bd.length;e++)if(Bd[e][0]==t){var r=Bd[e][2](this.data.date_obj);return new $f(r)}throw new Fe("invalid_scale_err",t)},getFullYear:function(){return this.data.date_obj.getTime()}}),Gx=new RegExp(/\$\{(.+?)\}/g);class lr{constructor(e,r){for(let a in Vi.en)this[a]=Vi.en[a];if(e&&typeof e=="string"&&e!="en"){var i=e;if(!(i in Vi)){console.log(`Expected language ${i} to be cached. Did you call the constructor directly?`);var s=MC(i,r);Bf(s).then(a=>{Vi[i]=a}).catch(a=>{console.log(`Error loading language [${s}] ${a.statusText} [${a.status}]`)})}Ze(this,Vi[i])}}mergeData(e){for(k in Vi.en)e[k]&&(typeof this[k]=="object"?Ze(e[k],this[k]):this[k]=e[k])}formatBigYear(e,r){var i=e.year,s=this.bigdateformats[r]||this.bigdateformats.fallback;if(s){for(var a=0;a<s.length;a++){var o=s[a];if(Math.abs(i/o[0])>1)return Kx(Math.abs(i/o[0]),o[1])}return i.toString()}else return Ue("Language file dateformats missing cosmological. Falling back."),Kx(i,r)}_(e,r){let i=this.messages[e]||lr.fallback.messages[e]||e;if(i.match(Gx)){if(!r)throw new Fe("template_message_without_context");for(let s of i.matchAll(Gx)){if(!(s[1]in r))throw new Fe("template_message_without_context");i=i.replace(s[0],r[s[1]])}}return i}formatDate(e,r){return e.constructor==Date?this.formatJSDate(e,r):e.constructor==Nu?this.formatBigYear(e,r):e.data&&e.data.date_obj?this.formatDate(e.data.date_obj,r):(Ue("Unfamiliar date presented for formatting"),e.toString())}formatJSDate(e,r){var i=this,s=function(P,U){var V=i.period_labels[P];if(V)var P=U<12?V[0]:V[1];return"<span class='tl-timeaxis-timesuffix'>"+P+"</span>"},a=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,o=/[^-+\dA-Z]/g;r||(r="full");var l=this.dateformats[r]||lr.fallback.dateformats[r];l||(l=r);var u="get",c=e[u+"Date"](),h=e[u+"Day"](),f=e[u+"Month"](),p=e[u+"FullYear"](),m=e[u+"Hours"](),w=e[u+"Minutes"](),A=e[u+"Seconds"](),D=e[u+"Milliseconds"](),T=e.getTimezoneOffset(),x={d:c,dd:ri(c),ddd:this.date.day_abbr[h],dddd:this.date.day[h],m:f+1,mm:ri(f+1),mmm:this.date.month_abbr[f],mmmm:this.date.month[f],yy:String(p).slice(2),yyyy:p<0&&this.has_negative_year_modifier()?Math.abs(p):p,h:m%12||12,hh:ri(m%12||12),H:m,HH:ri(m),M:w,MM:ri(w),s:A,ss:ri(A),l:ri(D,3),L:ri(D>99?Math.round(D/10):D),t:s("t",m),tt:s("tt",m),T:s("T",m),TT:s("TT",m),Z:(String(e).match(a)||[""]).pop().replace(o,""),o:(T>0?"-":"+")+ri(Math.floor(Math.abs(T)/60)*100+Math.abs(T)%60,4),S:["th","st","nd","rd"][c%10>3?0:(c%100-c%10!=10)*c%10]},b=l.replace(lr.DATE_FORMAT_TOKENS,function(P){return P in x?x[P]:P.slice(1,P.length-1)});return this._applyEra(b,p)}has_negative_year_modifier(){return!!(this.era_labels.negative_year.prefix||this.era_labels.negative_year.suffix)}_applyEra(e,r){var i=r<0?this.era_labels.negative_year:this.era_labels.positive_year,s="";return i.prefix&&(s+="<span>"+i.prefix+"</span> "),s+=e,i.suffix&&(s+=" <span>"+i.suffix+"</span>"),s}}async function x6(t,e){var r=MC(t,e);try{if(!Vi[t]){let i=await Bf(r);Vi[t]=i}return new lr(t,e)}catch(i){return console.log(`Error loading language [${r}] ${i.statusText}`),null}}function MC(t,e){if(/\.json$/.test(t))var r=t;else{var i="/locale/"+t+".json";/\/$/.test(e)&&(i=i.substr(1));var r=e+i}return r}function Kx(t,e){if(e.match(/%(\.(\d+))?f/)){var r=e.match(/%(\.(\d+))?f/),i=r[0];return r[2]&&(t=t.toFixed(r[2])),e.replace(i,t)}return e}lr.fallback={messages:{}};lr.DATE_FORMAT_TOKENS=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g;var Vi={en:{name:"English (built-in)",lang:"en",api:{wikipedia:"en"},messages:{loading:"Loading",wikipedia:"From Wikipedia, the free encyclopedia",error:"Error",return_to_title:"Return to Title",go_to_end:"Go to the last slide",loading_content:"Loading Content",loading_timeline:"Loading Timeline... ",swipe_to_navigate:"Swipe to Navigate<br><span class='tl-button'>OK</span>",zoom_in:"Zoom in",zoom_out:"Zoom out",unknown_read_err:"An unexpected error occurred trying to read your spreadsheet data",invalid_url_err:"Unable to read Timeline data. Make sure your URL is for a Google Spreadsheet or a Timeline JSON file.",network_err:"Unable to read your Google Spreadsheet. Make sure you have published it to the web.",missing_start_date_err:"Missing start_date",invalid_start_time_without_date:"Invalid configuration: time cannot be used without date.",invalid_end_time_without_date:"Invalid configuration: end time cannot be used without end date.",date_compare_err:"Can't compare timeline date objects on different scales",invalid_scale_err:"Invalid scale",invalid_date_err:"Invalid date: month, day and year must be numbers.",invalid_separator_error:"Invalid time: misuse of : or . as separator.",invalid_hour_err:"Invalid time (hour)",invalid_minute_err:"Invalid time (minute)",invalid_second_err:"Invalid time (second)",invalid_fractional_err:"Invalid time (fractional seconds)",invalid_second_fractional_err:"Invalid time (seconds and fractional seconds)",invalid_year_err:"Invalid year",flickr_notfound_err:"Photo not found or private",flickr_invalidurl_err:"Invalid Flickr URL",imgur_invalidurl_err:"Invalid Imgur URL",twitter_load_err:"Unable to load Tweet",twitterembed_invalidurl_err:"Invalid Twitter Embed url",wikipedia_load_err:"Unable to load Wikipedia entry",wikipedia_image_load_err:"Unable to load Wikipedia image data",spotify_invalid_url:"Invalid Spotify URL",invalid_rgb_err:"Invalid RGB argument",time_scale_scale_err:"Don't know how to get date from time for scale",axis_helper_no_options_err:"Axis helper must be configured with options",axis_helper_scale_err:"No AxisHelper available for scale",invalid_integer_option:"Invalid option valuemust be a whole number.",instagram_bad_request:"Invalid or private Instagram URL",template_message_without_context:"Required variables not provided for template translation message",aria_label_timeline:"Timeline",aria_label_timeline_navigation:"Timeline navigation",aria_label_timeline_content:"Timeline content",aria_label_zoomin:"Show less than ${start} to ${end}",aria_label_zoomout:"Show more than ${start} to ${end}"},date:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbr:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_abbr:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."]},era_labels:{positive_year:{prefix:"",suffix:""},negative_year:{prefix:"",suffix:"BCE"}},period_labels:{t:["a","p"],tt:["am","pm"],T:["A","P"],TT:["AM","PM"]},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time:"h:MM:ss TT' <small>'mmmm d',' yyyy'</small>'",time_short:"h:MM:ss TT",time_no_seconds_short:"h:MM TT",time_no_minutes_short:"h TT",time_no_seconds_small_date:"h:MM TT' <small>'mmmm d',' yyyy'</small>'",time_milliseconds:"l",full_long:"mmm d',' yyyy 'at' h:MM TT",full_long_small_date:"h:MM TT' <small>mmm d',' yyyy'</small>'"},bigdateformats:{fallback:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]],compact:[[1e9,"%.2f bya"],[1e6,"%.1f mya"],[1e3,"%.1f kya"],[1,"%f years ago"]],verbose:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]]}}};let __=new lr;lr.fallback=__;class Ci{setLanguage(e){this.language=e}getLanguage(){if(this.language){if(typeof this.language=="object")return this.language;Ue(`I18NMixins.getLanguage: this.language should be object, but is ${typeof this.language}`)}return __}_(e,r){return this.getLanguage()._(e,r)}}class Hf{constructor(e,r,i){i&&this.setLanguage(i),this._el={parent:{},container:{},message_container:{},loading_icon:{},message:{}},this.options={width:600,height:600,message_class:"tl-message",message_icon_class:"tl-loading-icon"},this.container=e,Ze(this.options,r),this._el.container=de("div",this.options.message_class),e&&(e.appendChild(this._el.container),this._el.parent=e),this.animator={},this._initLayout(),this._initEvents()}updateMessage(e){e?this._el.message.innerHTML=e:this._el.message.innerHTML=this._("loading"),!this._el.parent.atributes&&this.container.attributes&&(this.container.appendChild(this._el.container),this._el.parent=this.container)}updateDisplay(e,r){}_onMouseClick(){this.fire("clicked",this.options)}_onRemove(){this._el.parent={}}_initLayout(){this._el.message_container=de("div","tl-message-container",this._el.container),this._el.loading_icon=de("div",this.options.message_icon_class,this._el.message_container),this._el.message=de("div","tl-message-content",this._el.message_container),this.updateMessage()}_initEvents(){Ae.addListener(this._el.container,"click",this._onMouseClick,this),Ae.addListener(this,"removed",this._onRemove,this)}}Sn(Hf,Ci,In,Ii);function ld(t,r){var r=r||"start_date";t.sort(function(i,s){return i[r].isBefore(s[r])?-1:i[r].isAfter(s[r])?1:0})}function Yx(t){var e={hour:null,minute:null,second:null,millisecond:null},r=null,i=t.match(/(\s*[AaPp]\.?[Mm]\.?\s*)$/);i&&(r=qn(i[0]),t=qn(t.substring(0,t.lastIndexOf(r))));var s=[],a=t.match(/^\s*(\d{1,2})(\d{2})\s*$/);if(a?s=a.slice(1):(s=t.split(":"),s.length==1&&(s=t.split("."))),s.length>4)throw new Fe("invalid_separator_error");let o=s[0];if(e.hour=parseInt(o),r&&r.toLowerCase()[0]=="p"&&e.hour!=12?e.hour+=12:r&&r.toLowerCase()[0]=="a"&&e.hour==12&&(e.hour=0),isNaN(e.hour)||e.hour<0||e.hour>23)throw new Fe("invalid_hour_err",o);if(s.length>1){let c=s[1];if(e.minute=parseInt(c),isNaN(e.minute))throw new Fe("invalid_minute_err",c)}if(s.length>2){var l=s[2].split(/[\.,]/);if(s=l.concat(s.slice(3)),s.length>2)throw new Fe("invalid_second_fractional_err");if(e.second=parseInt(s[0]),isNaN(e.second))throw new Fe("invalid_second_err",s[0]);if(s.length==2){var u=parseInt(s[1]);if(isNaN(u))throw new Fe("invalid_fractional_err",s[1]);e.millisecond=100*u}}return e}const E6=new RegExp("(^-?\\d+$|^$)");function Xx(t){try{return Object.keys(t).forEach(e=>{let r=t[e];if(r&&r.match&&!r.match(E6))throw`invalid value ${r} for ${e}`}),!0}catch{return!1}}const Qx={human:zf,cosmological:$f};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:LC,setPrototypeOf:Jx,isFrozen:T6,getPrototypeOf:S6,getOwnPropertyDescriptor:I6}=Object;let{freeze:bn,seal:hr,create:OC}=Object,{apply:uv,construct:cv}=typeof Reflect<"u"&&Reflect;bn||(bn=function(e){return e});hr||(hr=function(e){return e});uv||(uv=function(e,r,i){return e.apply(r,i)});cv||(cv=function(e,r){return new e(...r)});const ud=xn(Array.prototype.forEach),k6=xn(Array.prototype.lastIndexOf),Zx=xn(Array.prototype.pop),wl=xn(Array.prototype.push),C6=xn(Array.prototype.splice),zd=xn(String.prototype.toLowerCase),fm=xn(String.prototype.toString),eE=xn(String.prototype.match),bl=xn(String.prototype.replace),A6=xn(String.prototype.indexOf),P6=xn(String.prototype.trim),_r=xn(Object.prototype.hasOwnProperty),vn=xn(RegExp.prototype.test),xl=R6(TypeError);function xn(t){return function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return uv(t,e,i)}}function R6(t){return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return cv(t,r)}}function De(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:zd;Jx&&Jx(t,null);let i=e.length;for(;i--;){let s=e[i];if(typeof s=="string"){const a=r(s);a!==s&&(T6(e)||(e[i]=a),s=a)}t[s]=!0}return t}function D6(t){for(let e=0;e<t.length;e++)_r(t,e)||(t[e]=null);return t}function $s(t){const e=OC(null);for(const[r,i]of LC(t))_r(t,r)&&(Array.isArray(i)?e[r]=D6(i):i&&typeof i=="object"&&i.constructor===Object?e[r]=$s(i):e[r]=i);return e}function El(t,e){for(;t!==null;){const i=I6(t,e);if(i){if(i.get)return xn(i.get);if(typeof i.value=="function")return xn(i.value)}t=S6(t)}function r(){return null}return r}const tE=bn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),pm=bn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),mm=bn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),N6=bn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),gm=bn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),M6=bn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),nE=bn(["#text"]),rE=bn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),vm=bn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),iE=bn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),cd=bn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),L6=hr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),O6=hr(/<%[\w\W]*|[\w\W]*%>/gm),j6=hr(/\$\{[\w\W]*/gm),V6=hr(/^data-[\-\w.\u00B7-\uFFFF]+$/),F6=hr(/^aria-[\-\w]+$/),jC=hr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),U6=hr(/^(?:\w+script|data):/i),B6=hr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),VC=hr(/^html$/i),z6=hr(/^[a-z][.\w]*(-[.\w]+)+$/i);var sE=Object.freeze({__proto__:null,ARIA_ATTR:F6,ATTR_WHITESPACE:B6,CUSTOM_ELEMENT:z6,DATA_ATTR:V6,DOCTYPE_NAME:VC,ERB_EXPR:O6,IS_ALLOWED_URI:jC,IS_SCRIPT_OR_DATA:U6,MUSTACHE_EXPR:L6,TMPLIT_EXPR:j6});const Tl={element:1,text:3,progressingInstruction:7,comment:8,document:9},$6=function(){return typeof window>"u"?null:window},H6=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const s="data-tt-policy-suffix";r&&r.hasAttribute(s)&&(i=r.getAttribute(s));const a="dompurify"+(i?"#"+i:"");try{return e.createPolicy(a,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},aE=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function FC(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$6();const e=ve=>FC(ve);if(e.version="3.2.4",e.removed=[],!t||!t.document||t.document.nodeType!==Tl.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const i=r,s=i.currentScript,{DocumentFragment:a,HTMLTemplateElement:o,Node:l,Element:u,NodeFilter:c,NamedNodeMap:h=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:m}=t,w=u.prototype,A=El(w,"cloneNode"),D=El(w,"remove"),T=El(w,"nextSibling"),x=El(w,"childNodes"),b=El(w,"parentNode");if(typeof o=="function"){const ve=r.createElement("template");ve.content&&ve.content.ownerDocument&&(r=ve.content.ownerDocument)}let P,U="";const{implementation:V,createNodeIterator:R,createDocumentFragment:I,getElementsByTagName:y}=r,{importNode:_}=i;let S=aE();e.isSupported=typeof LC=="function"&&typeof b=="function"&&V&&V.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:O,ERB_EXPR:N,TMPLIT_EXPR:K,DATA_ATTR:ie,ARIA_ATTR:oe,IS_SCRIPT_OR_DATA:fe,ATTR_WHITESPACE:W,CUSTOM_ELEMENT:Y}=sE;let{IS_ALLOWED_URI:se}=sE,re=null;const q=De({},[...tE,...pm,...mm,...gm,...nE]);let H=null;const J=De({},[...rE,...vm,...iE,...cd]);let Q=Object.seal(OC(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ce=null,ge=null,je=!0,Re=!0,He=!1,We=!0,Xe=!1,Ke=!0,qe=!1,nt=!1,C=!1,j=!1,F=!1,z=!1,X=!0,le=!1;const we="user-content-";let Ie=!0,Me=!1,Ye={},Ce=null;const ot=De({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Wt=null;const Rr=De({},["audio","video","img","source","image","track"]);let Ai=null;const Xo=De({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),kn="http://www.w3.org/1998/Math/MathML",Cs="http://www.w3.org/2000/svg",er="http://www.w3.org/1999/xhtml";let Dr=er,Qo=!1,Jo=null;const Zo=De({},[kn,Cs,er],fm);let As=De({},["mi","mo","mn","ms","mtext"]),Ps=De({},["annotation-xml"]);const Rs=De({},["title","style","font","a","script"]);let Jr=null;const el=["application/xhtml+xml","text/html"],Zr="text/html";let St=null,pr=null;const wc=r.createElement("form"),Pi=function(B){return B instanceof RegExp||B instanceof Function},wa=function(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(pr&&pr===B)){if((!B||typeof B!="object")&&(B={}),B=$s(B),Jr=el.indexOf(B.PARSER_MEDIA_TYPE)===-1?Zr:B.PARSER_MEDIA_TYPE,St=Jr==="application/xhtml+xml"?fm:zd,re=_r(B,"ALLOWED_TAGS")?De({},B.ALLOWED_TAGS,St):q,H=_r(B,"ALLOWED_ATTR")?De({},B.ALLOWED_ATTR,St):J,Jo=_r(B,"ALLOWED_NAMESPACES")?De({},B.ALLOWED_NAMESPACES,fm):Zo,Ai=_r(B,"ADD_URI_SAFE_ATTR")?De($s(Xo),B.ADD_URI_SAFE_ATTR,St):Xo,Wt=_r(B,"ADD_DATA_URI_TAGS")?De($s(Rr),B.ADD_DATA_URI_TAGS,St):Rr,Ce=_r(B,"FORBID_CONTENTS")?De({},B.FORBID_CONTENTS,St):ot,ce=_r(B,"FORBID_TAGS")?De({},B.FORBID_TAGS,St):{},ge=_r(B,"FORBID_ATTR")?De({},B.FORBID_ATTR,St):{},Ye=_r(B,"USE_PROFILES")?B.USE_PROFILES:!1,je=B.ALLOW_ARIA_ATTR!==!1,Re=B.ALLOW_DATA_ATTR!==!1,He=B.ALLOW_UNKNOWN_PROTOCOLS||!1,We=B.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Xe=B.SAFE_FOR_TEMPLATES||!1,Ke=B.SAFE_FOR_XML!==!1,qe=B.WHOLE_DOCUMENT||!1,j=B.RETURN_DOM||!1,F=B.RETURN_DOM_FRAGMENT||!1,z=B.RETURN_TRUSTED_TYPE||!1,C=B.FORCE_BODY||!1,X=B.SANITIZE_DOM!==!1,le=B.SANITIZE_NAMED_PROPS||!1,Ie=B.KEEP_CONTENT!==!1,Me=B.IN_PLACE||!1,se=B.ALLOWED_URI_REGEXP||jC,Dr=B.NAMESPACE||er,As=B.MATHML_TEXT_INTEGRATION_POINTS||As,Ps=B.HTML_INTEGRATION_POINTS||Ps,Q=B.CUSTOM_ELEMENT_HANDLING||{},B.CUSTOM_ELEMENT_HANDLING&&Pi(B.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Q.tagNameCheck=B.CUSTOM_ELEMENT_HANDLING.tagNameCheck),B.CUSTOM_ELEMENT_HANDLING&&Pi(B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Q.attributeNameCheck=B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),B.CUSTOM_ELEMENT_HANDLING&&typeof B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Q.allowCustomizedBuiltInElements=B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Xe&&(Re=!1),F&&(j=!0),Ye&&(re=De({},nE),H=[],Ye.html===!0&&(De(re,tE),De(H,rE)),Ye.svg===!0&&(De(re,pm),De(H,vm),De(H,cd)),Ye.svgFilters===!0&&(De(re,mm),De(H,vm),De(H,cd)),Ye.mathMl===!0&&(De(re,gm),De(H,iE),De(H,cd))),B.ADD_TAGS&&(re===q&&(re=$s(re)),De(re,B.ADD_TAGS,St)),B.ADD_ATTR&&(H===J&&(H=$s(H)),De(H,B.ADD_ATTR,St)),B.ADD_URI_SAFE_ATTR&&De(Ai,B.ADD_URI_SAFE_ATTR,St),B.FORBID_CONTENTS&&(Ce===ot&&(Ce=$s(Ce)),De(Ce,B.FORBID_CONTENTS,St)),Ie&&(re["#text"]=!0),qe&&De(re,["html","head","body"]),re.table&&(De(re,["tbody"]),delete ce.tbody),B.TRUSTED_TYPES_POLICY){if(typeof B.TRUSTED_TYPES_POLICY.createHTML!="function")throw xl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof B.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw xl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');P=B.TRUSTED_TYPES_POLICY,U=P.createHTML("")}else P===void 0&&(P=H6(m,s)),P!==null&&typeof U=="string"&&(U=P.createHTML(""));bn&&bn(B),pr=B}},jt=De({},[...pm,...mm,...N6]),tl=De({},[...gm,...M6]),Ds=function(B){let te=b(B);(!te||!te.tagName)&&(te={namespaceURI:Dr,tagName:"template"});const me=zd(B.tagName),rt=zd(te.tagName);return Jo[B.namespaceURI]?B.namespaceURI===Cs?te.namespaceURI===er?me==="svg":te.namespaceURI===kn?me==="svg"&&(rt==="annotation-xml"||As[rt]):!!jt[me]:B.namespaceURI===kn?te.namespaceURI===er?me==="math":te.namespaceURI===Cs?me==="math"&&Ps[rt]:!!tl[me]:B.namespaceURI===er?te.namespaceURI===Cs&&!Ps[rt]||te.namespaceURI===kn&&!As[rt]?!1:!tl[me]&&(Rs[me]||!jt[me]):!!(Jr==="application/xhtml+xml"&&Jo[B.namespaceURI]):!1},sn=function(B){wl(e.removed,{element:B});try{b(B).removeChild(B)}catch{D(B)}},ba=function(B,te){try{wl(e.removed,{attribute:te.getAttributeNode(B),from:te})}catch{wl(e.removed,{attribute:null,from:te})}if(te.removeAttribute(B),B==="is")if(j||F)try{sn(te)}catch{}else try{te.setAttribute(B,"")}catch{}},bc=function(B){let te=null,me=null;if(C)B="<remove></remove>"+B;else{const xt=eE(B,/^[\r\n\t ]+/);me=xt&&xt[0]}Jr==="application/xhtml+xml"&&Dr===er&&(B='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+B+"</body></html>");const rt=P?P.createHTML(B):B;if(Dr===er)try{te=new p().parseFromString(rt,Jr)}catch{}if(!te||!te.documentElement){te=V.createDocument(Dr,"template",null);try{te.documentElement.innerHTML=Qo?U:rt}catch{}}const Vt=te.body||te.documentElement;return B&&me&&Vt.insertBefore(r.createTextNode(me),Vt.childNodes[0]||null),Dr===er?y.call(te,qe?"html":"body")[0]:qe?te.documentElement:Vt},ei=function(B){return R.call(B.ownerDocument||B,B,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},nl=function(B){return B instanceof f&&(typeof B.nodeName!="string"||typeof B.textContent!="string"||typeof B.removeChild!="function"||!(B.attributes instanceof h)||typeof B.removeAttribute!="function"||typeof B.setAttribute!="function"||typeof B.namespaceURI!="string"||typeof B.insertBefore!="function"||typeof B.hasChildNodes!="function")},xc=function(B){return typeof l=="function"&&B instanceof l};function Cn(ve,B,te){ud(ve,me=>{me.call(e,B,te,pr)})}const rl=function(B){let te=null;if(Cn(S.beforeSanitizeElements,B,null),nl(B))return sn(B),!0;const me=St(B.nodeName);if(Cn(S.uponSanitizeElement,B,{tagName:me,allowedTags:re}),B.hasChildNodes()&&!xc(B.firstElementChild)&&vn(/<[/\w]/g,B.innerHTML)&&vn(/<[/\w]/g,B.textContent)||B.nodeType===Tl.progressingInstruction||Ke&&B.nodeType===Tl.comment&&vn(/<[/\w]/g,B.data))return sn(B),!0;if(!re[me]||ce[me]){if(!ce[me]&&Ns(me)&&(Q.tagNameCheck instanceof RegExp&&vn(Q.tagNameCheck,me)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(me)))return!1;if(Ie&&!Ce[me]){const rt=b(B)||B.parentNode,Vt=x(B)||B.childNodes;if(Vt&&rt){const xt=Vt.length;for(let qt=xt-1;qt>=0;--qt){const An=A(Vt[qt],!0);An.__removalCount=(B.__removalCount||0)+1,rt.insertBefore(An,T(B))}}}return sn(B),!0}return B instanceof u&&!Ds(B)||(me==="noscript"||me==="noembed"||me==="noframes")&&vn(/<\/no(script|embed|frames)/i,B.innerHTML)?(sn(B),!0):(Xe&&B.nodeType===Tl.text&&(te=B.textContent,ud([O,N,K],rt=>{te=bl(te,rt," ")}),B.textContent!==te&&(wl(e.removed,{element:B.cloneNode()}),B.textContent=te)),Cn(S.afterSanitizeElements,B,null),!1)},xa=function(B,te,me){if(X&&(te==="id"||te==="name")&&(me in r||me in wc))return!1;if(!(Re&&!ge[te]&&vn(ie,te))){if(!(je&&vn(oe,te))){if(!H[te]||ge[te]){if(!(Ns(B)&&(Q.tagNameCheck instanceof RegExp&&vn(Q.tagNameCheck,B)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(B))&&(Q.attributeNameCheck instanceof RegExp&&vn(Q.attributeNameCheck,te)||Q.attributeNameCheck instanceof Function&&Q.attributeNameCheck(te))||te==="is"&&Q.allowCustomizedBuiltInElements&&(Q.tagNameCheck instanceof RegExp&&vn(Q.tagNameCheck,me)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(me))))return!1}else if(!Ai[te]){if(!vn(se,bl(me,W,""))){if(!((te==="src"||te==="xlink:href"||te==="href")&&B!=="script"&&A6(me,"data:")===0&&Wt[B])){if(!(He&&!vn(fe,bl(me,W,"")))){if(me)return!1}}}}}}return!0},Ns=function(B){return B!=="annotation-xml"&&eE(B,Y)},mr=function(B){Cn(S.beforeSanitizeAttributes,B,null);const{attributes:te}=B;if(!te||nl(B))return;const me={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H,forceKeepAttr:void 0};let rt=te.length;for(;rt--;){const Vt=te[rt],{name:xt,namespaceURI:qt,value:An}=Vt,gr=St(xt);let gt=xt==="value"?An:P6(An);if(me.attrName=gr,me.attrValue=gt,me.keepAttr=!0,me.forceKeepAttr=void 0,Cn(S.uponSanitizeAttribute,B,me),gt=me.attrValue,le&&(gr==="id"||gr==="name")&&(ba(xt,B),gt=we+gt),Ke&&vn(/((--!?|])>)|<\/(style|title)/i,gt)){ba(xt,B);continue}if(me.forceKeepAttr||(ba(xt,B),!me.keepAttr))continue;if(!We&&vn(/\/>/i,gt)){ba(xt,B);continue}Xe&&ud([O,N,K],Tc=>{gt=bl(gt,Tc," ")});const Ea=St(B.nodeName);if(xa(Ea,gr,gt)){if(P&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!qt)switch(m.getAttributeType(Ea,gr)){case"TrustedHTML":{gt=P.createHTML(gt);break}case"TrustedScriptURL":{gt=P.createScriptURL(gt);break}}try{qt?B.setAttributeNS(qt,xt,gt):B.setAttribute(xt,gt),nl(B)?sn(B):Zx(e.removed)}catch{}}}Cn(S.afterSanitizeAttributes,B,null)},Ec=function ve(B){let te=null;const me=ei(B);for(Cn(S.beforeSanitizeShadowDOM,B,null);te=me.nextNode();)Cn(S.uponSanitizeShadowNode,te,null),rl(te),mr(te),te.content instanceof a&&ve(te.content);Cn(S.afterSanitizeShadowDOM,B,null)};return e.sanitize=function(ve){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te=null,me=null,rt=null,Vt=null;if(Qo=!ve,Qo&&(ve="<!-->"),typeof ve!="string"&&!xc(ve))if(typeof ve.toString=="function"){if(ve=ve.toString(),typeof ve!="string")throw xl("dirty is not a string, aborting")}else throw xl("toString is not a function");if(!e.isSupported)return ve;if(nt||wa(B),e.removed=[],typeof ve=="string"&&(Me=!1),Me){if(ve.nodeName){const An=St(ve.nodeName);if(!re[An]||ce[An])throw xl("root node is forbidden and cannot be sanitized in-place")}}else if(ve instanceof l)te=bc("<!---->"),me=te.ownerDocument.importNode(ve,!0),me.nodeType===Tl.element&&me.nodeName==="BODY"||me.nodeName==="HTML"?te=me:te.appendChild(me);else{if(!j&&!Xe&&!qe&&ve.indexOf("<")===-1)return P&&z?P.createHTML(ve):ve;if(te=bc(ve),!te)return j?null:z?U:""}te&&C&&sn(te.firstChild);const xt=ei(Me?ve:te);for(;rt=xt.nextNode();)rl(rt),mr(rt),rt.content instanceof a&&Ec(rt.content);if(Me)return ve;if(j){if(F)for(Vt=I.call(te.ownerDocument);te.firstChild;)Vt.appendChild(te.firstChild);else Vt=te;return(H.shadowroot||H.shadowrootmode)&&(Vt=_.call(i,Vt,!0)),Vt}let qt=qe?te.outerHTML:te.innerHTML;return qe&&re["!doctype"]&&te.ownerDocument&&te.ownerDocument.doctype&&te.ownerDocument.doctype.name&&vn(VC,te.ownerDocument.doctype.name)&&(qt="<!DOCTYPE "+te.ownerDocument.doctype.name+`>
`+qt),Xe&&ud([O,N,K],An=>{qt=bl(qt,An," ")}),P&&z?P.createHTML(qt):qt},e.setConfig=function(){let ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};wa(ve),nt=!0},e.clearConfig=function(){pr=null,nt=!1},e.isValidAttribute=function(ve,B,te){pr||wa({});const me=St(ve),rt=St(B);return xa(me,rt,te)},e.addHook=function(ve,B){typeof B=="function"&&wl(S[ve],B)},e.removeHook=function(ve,B){if(B!==void 0){const te=k6(S[ve],B);return te===-1?void 0:C6(S[ve],te,1)[0]}return Zx(S[ve])},e.removeHooks=function(ve){S[ve]=[]},e.removeAllHooks=function(){S=aE()},e}var Wf=FC();const W6={text:["headline","text"],media:["caption","credit"]},q6={start_date:["display_date"],end_date:["display_date"],slide:["display_date","group"],date:["display_date"]};Wf.addHook("afterSanitizeAttributes",function(t){if(t.nodeName=="A"&&"href"in t){"target"in t.attributes||t.setAttribute("target","_blank");let e=t.attributes.rel;e?e.value.indexOf("noopener")==-1&&t.setAttribute("rel",`noopener ${e.value}`):t.setAttribute("rel","noopener")}});function oE(t,e,r){Object.keys(r).forEach(i=>{var s=i=="slide"?t:t[i];s&&r[i].forEach(a=>{typeof s[a]<"u"&&(s[a]=e(s[a]))})})}function G6(t){return Wf.sanitize(t,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder","target"]})}class qs{constructor(e){if(this.title="",this.scale="",this.events=[],this.eras=[],this.event_dict={},this.messages={errors:[],warnings:[]},typeof e=="object"&&e.events){if(this.scale=e.scale,this.events=[],this._ensureValidScale(e.events),e.title){var r=this._assignID(e.title);this._tidyFields(e.title),this.title=e.title,this.event_dict[r]=this.title}for(var i=0;i<e.events.length;i++)try{this.addEvent(e.events[i],!0)}catch(s){this.logError(s)}e.eras&&e.eras.forEach((s,a)=>{try{this.addEra(s)}catch(o){this.logError("Era "+a+": "+o)}}),ld(this.events),ld(this.eras)}}logError(e){Ue(`logError: ${e}`),this.messages.errors.push(e)}getErrors(e){return e?this.messages.errors.join(e):this.messages.errors}validate(){(typeof this.events>"u"||typeof this.events.length>"u"||this.events.length==0)&&this.logError("Timeline configuration has no events.");for(var e=0;e<this.eras.length;e++)if(typeof this.eras[e].start_date>"u"||typeof this.eras[e].end_date>"u"){var r;this.eras[e].headline?r=this.eras[e].headline:r="era "+(e+1),this.logError("All eras must have start and end dates. ["+r+"]")}}isValid(){return this.messages.errors.length==0}addEvent(e,r){var i=this._assignID(e);return typeof e.start_date>"u"?(Ue("Missing start date, skipping event"),console.log(e),null):(this._processDates(e),this._tidyFields(e),this.events.push(e),this.event_dict[i]=e,r||ld(this.events),i)}addEra(e){var r=this._assignID(e);if(typeof e.start_date>"u")throw new Fe("missing_start_date_err",r);this._processDates(e),this._tidyFields(e),this.eras.push({start_date:e.start_date,end_date:e.end_date,headline:e.text.headline})}_assignID(e){var r=e.unique_id;return qn(r)||(r=e.text?dm(e.text.headline):null),e.unique_id=a6(this.event_dict,r),e.unique_id}_makeUniqueIdentifiers(e,r){for(var i=[e],s=0;s<r.length;s++)qn(r[s].unique_id)&&(r[s].unique_id=dm(r[s].unique_id),i.indexOf(r[s].unique_id)==-1?i.push(r[s].unique_id):r[s].unique_id="");if(i.length!=r.length+1){for(var s=0;s<r.length;s++)if(!r[s].unique_id){var a=r[s].text?dm(r[s].text.headline):null;a||(a=la(6)),i.indexOf(a)!=-1&&(a=a+"-"+s),i.push(a),r[s].unique_id=a}}}_ensureValidScale(e){if(!this.scale){this.scale="human";for(var r=0;r<e.length;r++){if(e[r].scale=="cosmological"){this.scale="cosmological";break}if(e[r].start_date&&typeof e[r].start_date.year<"u"){var i=new $f(e[r].start_date),s=i.data.date_obj.year;if(s<-271820||s>275759){this.scale="cosmological";break}}}Ue(`Determining scale dynamically: ${this.scale}`)}var a=Qx[this.scale];a||this.logError("Don't know how to process dates on scale "+this.scale)}_processDates(e){var r=Qx[this.scale];if(!(e.start_date instanceof r)){var i=e.start_date;if(e.start_date=new r(i),typeof e.end_date<"u"&&!(e.end_date instanceof r)){var s=e.end_date,a=!0;for(let o in i)a=a&&i[o]==s[o];a?(Ue("End date same as start date is redundant; dropping end date"),delete e.end_date):e.end_date=new r(s)}}}getEarliestDate(){var e=this.events[0].start_date;return this.eras&&this.eras.length>0&&this.eras[0].start_date.isBefore(e)?this.eras[0].start_date:e}getLatestDate(){for(var e=[],r=0;r<this.events.length;r++)this.events[r].end_date?e.push({date:this.events[r].end_date}):e.push({date:this.events[r].start_date});for(var r=0;r<this.eras.length;r++)this.eras[r].end_date?e.push({date:this.eras[r].end_date}):e.push({date:this.eras[r].start_date});return ld(e,"date"),e.slice(-1)[0].date}_tidyFields(e){function r(i,s,a){a||(a=""),i.hasOwnProperty(s)||(i[s]=a)}e.group&&(e.group=qn(e.group)),e.text||(e.text={}),r(e.text,"text"),r(e.text,"headline"),oE(e,G6,W6),oE(e,v6,q6)}}function K6(t,e){return t==null?"":(e=e||`
`,t.charAt(t.length-e.length)!==e?t:t.substring(0,t.length-e.length))}async function Y6(t){return new Promise((e,r)=>{if(t.data){var i=UC(BC(t.data,t),t);i.useMemoryStore=!0,e(i)}else t.url&&window.fetch(t.url,{mode:"cors"}).then(function(s){if(s.status!=200){s.headers.get("content-type")=="application/json"?s.text().then(a=>{r(JSON.parse(a))}):r({status_code:s.status,message:`Error fetching CSV: [${s.status} ${s.statusText}]`});return}return s.text?s.text():s}).then(function(s){if(s){var a=J6(s,t);a.useMemoryStore=!0,e(a)}}).catch(s=>{r({status_code:500,message:`Error fetching CSV: ${s}`})})})}function UC(t,e){return e=e||{},e.noHeaderRow!==!0&&t.length>0?{fields:t[0].map((r,i)=>r&&r.trim?r.trim():`untitled${i}`),records:t.slice(1)}:{records:t}}function X6(t){var e={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var r in t)r==="trim"?e.skipinitialspace=t.trim:e[r.toLowerCase()]=t[r];return e}function BC(t,e){(!e||e&&!e.lineterminator)&&(t=Q6(t,e));var r=X6(e);t=K6(t,r.lineterminator);var i="",s=!1,a=!1,o="",l=[],u=[],c,h;for(h=function(f){return a!==!0&&(f===""?f=null:r.skipinitialspace===!0&&(f=f.trim())),f},c=0;c<t.length;c+=1)i=t.charAt(c),s===!1&&(i===r.delimiter||i===r.lineterminator)?(o=h(o),l.push(o),i===r.lineterminator&&(u.push(l),l=[]),o="",a=!1):i!==r.quotechar?o+=i:s?t.charAt(c+1)===r.quotechar?(o+=r.quotechar,c+=1):s=!1:(s=!0,a=!0);return o=h(o),l.push(o),u.push(l),r.skipinitialrows&&(u=u.slice(r.skipinitialrows)),u}function Q6(t,e){return e&&!e.lineterminator?t.replace(/(\r\n|\n|\r)/gm,`
`):t}function J6(t,e){let r=UC(BC(t,e)),i=[];return r.records.forEach(s=>{let a={};r.fields.forEach((o,l)=>a[o]=s[l]),i.push(a)}),i}function Ra(t){if(t)return t.replace(/[\s,]+/g,"")}function Z6(t){let e={key:null,worksheet:0};var r=/\bkey=([-_A-Za-z0-9]+)&?/i,i=/docs.google.com\/spreadsheets(.*?)\/d\//;if(t.match(r))e.key=t.match(r)[1];else if(t.match(i)){var s=t.search(i)+t.match(i)[0].length,a=t.substr(s);e.key=a.split("/")[0],t.match(/\?gid=(\d+)/)&&(e.worksheet=t.match(/\?gid=(\d+)/)[1])}else t.match(/^\b[-_A-Za-z0-9]+$/)&&(e.key=t);return e.key?e:null}function e5(t){return typeof t!="string"?"":t.match(/^(https?:)?\/\/?/)?{url:t}:{color:t}}function t5(t){let e={};Object.keys(t).forEach(i=>{e[i]=qn(t[i])});var r={media:{caption:e["Media Caption"]||"",credit:e["Media Credit"]||"",url:e.Media||"",thumbnail:e["Media Thumbnail"]||"",alt:e["Alt Text"]||""},text:{headline:e.Headline||"",text:e.Text||""},display_date:e["Display Date"]||"",group:e.Group||e.Tag||"",background:e5(e.Background),type:e.Type||""};if(Object.keys(e).includes("Start Date")||Object.keys(e).includes("End Date"))e["Start Date"]&&(r.start_date=Wx(e["Start Date"])),e["End Date"]&&(r.end_date=Wx(e["End Date"]));else{if(e.Year&&(r.start_date={year:Ra(e.Year),month:Ra(e.Month)||"",day:Ra(e.Day)||""}),e["End Year"]&&(r.end_date={year:Ra(e["End Year"])||"",month:Ra(e["End Month"])||"",day:Ra(e["End Day"])||""}),e.Time)if(r.start_date)Ze(r.start_date,Yx(e.Time));else throw new Fe("invalid_start_time_without_date");if(e["End Time"])if(r.end_date)Ze(r.end_date,Yx(e["End Time"]));else throw new Fe("invalid_end_time_without_date");if(r.start_date&&!Xx(r.start_date))throw new Fe("invalid_date_err");if(r.end_date&&!Xx(r.end_date))throw new Fe("invalid_date_err")}return r}async function n5(t,e){let r=[];t=r5(t),await Y6({url:`${e}${t}`}).then(s=>{r=s}).catch(s=>{if(s.proxy_err_code=="response_not_csv")throw new Fe("Timeline could not read the data for your timeline. Make sure you have published it to the web.");let a="undefined error";throw Array.isArray(s.message)?a=s.message.join("<br>"):a=String(s.message),new Fe(a)});let i={events:[],errors:[],warnings:[],eras:[]};return r.forEach((s,a)=>{try{if(!o6(s)){let o=t5(s);a5(o,i)}}catch(o){if(o.constructor==Fe)i.errors.push(o);else{o.message&&(o=o.message);let l=s.Headline||a;i.errors.push(o+`[${l}]`)}}}),i}function r5(t){if(t=t.trim(),t.match(/^[a-zA-Z0-9-_]+$/))return`https://docs.google.com/spreadsheets/d/${t}/pub?output=csv`;if(t.startsWith("https://docs.google.com/spreadsheets/")){if(t.match(/\/pub\?output=csv$/))return t;let e=new URL(t),r=new URLSearchParams(e.search);r.set("output","csv"),r.get("gid")&&r.set("single","true"),e.search=`?${r.toString()}`;let i=e.pathname.substr(0,e.pathname.lastIndexOf("/"));return e.pathname=`${i}/pub`,e.toString()}throw new Fe("invalid_url_err",t)}async function i5(t,e){if(!e.sheets_proxy)throw new Fe("Proxy option must be set to read data from Google");var r=await n5(t,e.sheets_proxy);if(r)return r}async function s5(t,e){let r=null,i={};if(typeof e=="function"?r=e:typeof e=="object"&&(i=e,r=e.callback,typeof i.callback=="function"&&(r=i.callback)),!r)throw new Fe("Second argument to makeConfig must be either a function or an object which includes a 'callback' property with a 'function' type value");var s,a,o=Z6(t);if(o){try{a=await i5(t,i)}catch(u){s=new qs,u.name=="NetworkError"?s.logError(new Fe("network_err")):u.name=="TLError"?s.logError(u):s.logError(new Fe("unknown_read_err",u.name)),r(s);return}if(s=new qs(a),a.errors)for(var l=0;l<a.errors.length;l++)s.logError(a.errors[l]);r(s)}else qo({url:t,dataType:"json",success:function(u){try{s=new qs(u)}catch(c){s=new qs,s.logError(c)}r(s)},error:function(u,c,h){if(s=new qs,c=="parsererror")var h=new Fe("invalid_url_err");else var h=new Fe("unknown_read_err",c);s.logError(h),r(s)}})}function a5(t,e){var r="event";typeof t.type<"u"&&(r=t.type,delete t.type),r=="title"?e.title?(e.warnings.push("Multiple title slides detected."),e.events.push(t)):e.title=t:r=="era"?e.eras.push(t):e.events.push(t)}class o5{constructor(e){if(e)this.scale=e.scale,this.minor=e.minor,this.major=e.major;else throw new Fe("axis_helper_no_options_err")}getPixelsPerTick(e){return e*this.minor.factor}getMajorTicks(e){return this._getTicks(e,this.major)}getMinorTicks(e){return this._getTicks(e,this.minor)}_getTicks(e,r){for(var i=e._scaled_padding*r.factor,s=e._earliest-i,a=e._latest+i,o=[],l=s;l<a;l+=r.factor)o.push(e.getDateFromTime(l).floor(r.name));return{name:r.name,ticks:o}}}var dv={},zC=function(t,e){dv[t]=[];for(var r=0;r<e.length-1;r++){var i=e[r],s=e[r+1];dv[t].push(new o5({scale:i[3],minor:{name:i[0],factor:i[1]},major:{name:s[0],factor:s[1]}}))}};zC("human",jr);zC("cosmological",Bd);function l5(t,e){typeof e!="number"&&(e=100);var r=t.getScale(),i=dv[r];if(!i)throw new Fe("axis_helper_scale_err",r);for(var s=null,a=0;a<i.length;a++){var o=i[a],l=o.getPixelsPerTick(t._pixels_per_milli);if(l>e){if(s==null)return o;var u=Math.abs(e-l),c=Math.abs(e-l);return u<c?o:s}s=o}return i[i.length-1]}const u5={millisecond:"time_milliseconds",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"compact",epoch:"compact",era:"compact",eon:"compact",eon2:"compact"};class lE{constructor(e,r){var i=e.events;this._scale=e.scale,r=Ze({display_width:500,screen_multiplier:3,max_rows:null},r),this._display_width=r.display_width,this._screen_multiplier=r.screen_multiplier,this._pixel_width=this._screen_multiplier*this._display_width,this._group_labels=void 0,this._positions=[],this._pixels_per_milli=0,this._earliest=e.getEarliestDate().getTime(),this._latest=e.getLatestDate().getTime(),this._span_in_millis=this._latest-this._earliest,this._span_in_millis<=0&&(this._span_in_millis=this._computeDefaultSpan(e)),this._average=this._span_in_millis/i.length,this._pixels_per_milli=this.getPixelWidth()/this._span_in_millis,this._axis_helper=l5(this),this._scaled_padding=1/this.getPixelsPerTick()*(this._display_width/2),this._computePositionInfo(i,r.max_rows)}_computeDefaultSpan(e){if(e.scale=="human"){for(var r={},i=0;i<e.events.length;i++){var s=e.events[i].start_date.findBestFormat();r[s]=r[s]?r[s]+1:1}for(var i=jr.length-1;i>=0;i--)if(r.hasOwnProperty(jr[i][0])){var a=jr[jr.length-1];return jr[i+1]&&(a=jr[i+1]),a[1]}return 365*24*60*60*1e3}return 2e5}getGroupLabels(){return this._group_labels||[]}getScale(){return this._scale}getNumberOfRows(){return this._number_of_rows}getPixelWidth(){return this._pixel_width}getPosition(e){return(e-this._earliest)*this._pixels_per_milli}getPositionInfo(e){return this._positions[e]}getPixelsPerTick(){return this._axis_helper.getPixelsPerTick(this._pixels_per_milli)}getTicks(){return{major:this._axis_helper.getMajorTicks(this),minor:this._axis_helper.getMinorTicks(this)}}getDateFromTime(e){if(this._scale=="human")return new zf(e);if(this._scale=="cosmological")return new $f(new Nu(e));throw new Fe("time_scale_scale_err",this._scale)}getMajorScale(){return this._axis_helper.major.name}getMinorScale(){return this._axis_helper.minor.name}_assessGroups(e){for(var r=[],i=!1,s=0;s<e.length;s++)e[s].group&&(r.indexOf(e[s].group)<0?r.push(e[s].group):i=!0);return r.length&&i&&r.push(""),r}_computeRowInfo(e,r){for(var i=[],s=0,a=0;a<e.length;a++){var o=e[a],l=[];delete o.row;for(var u=0;u<i.length;u++)if(l.push(i[u].end-o.start),l[u]<=0){o.row=u,i[u]=o;break}if(typeof o.row>"u")if(r===null)o.row=i.length,i.push(o);else if(r>0)o.row=i.length,i.push(o),r--;else{var c=Math.min.apply(null,l),h=l.indexOf(c);o.row=h,o.end>i[h].end&&(i[h]=o),s++}}return{n_rows:i.length,n_overlaps:s}}_computePositionInfo(e,r,i){i=i||100;for(var s=[],a=!1,o=0;o<e.length;o++){var l={start:this.getPosition(e[o].start_date.getTime())};if(this._positions.push(l),typeof e[o].end_date<"u"){var u=this.getPosition(e[o].end_date.getTime());l.width=u-l.start,l.width>i?l.end=l.start+l.width:l.end=l.start+i}else l.width=i,l.end=l.start+i;e[o].group?s.indexOf(e[o].group)<0&&s.push(e[o].group):a=!0}if(s.length){a&&s.push("");for(var h=[],o=0;o<s.length;o++)h[o]={label:s[o],idx:o,positions:[],n_rows:1,n_overlaps:0};for(var o=0;o<this._positions.length;o++){var l=this._positions[o];l.group=s.indexOf(e[o].group||""),l.row=0;for(var f=h[l.group],p=f.positions.length-1;p>=0;p--)f.positions[p].end>l.start&&f.n_overlaps++;f.positions.push(l)}for(var m=s.length;;){var w=Math.max(0,r-m);if(!w||(h.sort(function(x,b){return x.n_overlaps>b.n_overlaps?-1:x.n_overlaps<b.n_overlaps?1:x.idx-b.idx}),!h[0].n_overlaps))break;for(var m=0,o=0;o<h.length;o++){var f=h[o];if(f.n_overlaps&&w){var A=this._computeRowInfo(f.positions,f.n_rows+1);f.n_rows=A.n_rows,f.n_overlaps=A.n_overlaps,w--}m+=f.n_rows}}this._number_of_rows=m,this._group_labels=[],h.sort(function(T,x){return T.idx-x.idx});for(var o=0,D=0;o<h.length;o++){this._group_labels.push({label:h[o].label,rows:h[o].n_rows});for(var p=0;p<h[o].positions.length;p++){var l=h[o].positions[p];l.row+=D}D+=h[o].n_rows}}else{var c=this._computeRowInfo(this._positions,r);this._number_of_rows=c.n_rows}}getAxisTickDateFormat(e){return this._scale=="cosmological"?"compact":u5[e]}}class $C{constructor(e){this._el={parent:{},container:{},message:{}},this.options={width:600,height:600},this.data={label:"",rows:1},this._el.container=de("div","tl-timegroup"),Ze(this.data,e),this.animator={},this._initLayout(),this._initEvents()}updateDisplay(e,r){}setRowPosition(e,r){this.options.height=r*this.data.rows,this.setPosition({top:e}),this._el.container.style.height=this.options.height+"px"}setAlternateRowColor(e,r){var i="tl-timegroup";e&&(i+=" tl-timegroup-alternate"),r&&(i+=" tl-timegroup-hidden"),this._el.container.className=i}_onMouseClick(){this.fire("clicked",this.options)}_initLayout(){this._el.message=de("div","tl-timegroup-message",this._el.container),this._el.message.innerHTML=this.data.label}_initEvents(){Ae.addListener(this._el.container,"click",this._onMouseClick,this)}_updateDisplay(e,r,i){}}Sn($C,In,Ii);class HC{constructor(e,r,i,s){this.start_date=e,this.end_date=r,this.headline=i,this._el={container:{},background:{},content_container:{},content:{},text:{}},this._text={},this._state={loaded:!1},this.options={duration:1e3,ease:Uf,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,Ze(this.options,s),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(e){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.start_date.getTime()}getEndTime(){return this.end_date?this.end_date.getTime():!1}setHeight(e){var r=12,i=1;this._el.content_container.style.height=e+"px",this._el.content.className="tl-timeera-content",Vf?(i=Math.floor(e/(r+2)),i<1&&(i=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=i):(i=e/r,i>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=i*r+"px")}setWidth(e){this.end_date&&(this._el.container.style.width=e+"px",e>this.options.marker_width_min?(this._el.content_container.style.width=e+"px",this._el.content_container.className="tl-timeera-content-container tl-timeera-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timeera-content-container"))}setClass(e){this._el.container.className=e}setRowPosition(e,r){this.setPosition({top:e}),r<56&&this._el.content_container.remove("tl-timeera-content-container-small")}setColor(e){this._el.container.className="tl-timeera tl-timeera-color"+e}_initLayout(){this._el.container=de("div","tl-timeera"),this.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timeera tl-timeera-with-end"),this._el.content_container=de("div","tl-timeera-content-container",this._el.container),this._el.background=de("div","tl-timeera-background",this._el.content_container),this._el.content=de("div","tl-timeera-content",this._el.content_container),this._el.text=de("div","tl-timeera-text",this._el.content),this._text=de("h2","tl-headline",this._el.text),this.headline&&this.headline!=""&&(this._text.innerHTML=oo(this.headline)),this.onLoaded()}_initEvents(){}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}Sn(HC,In,Ii);function c5(t){const e=t.getBoundingClientRect();return e.left>=0&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}class WC{constructor(e,r,i){i&&this.setLanguage(i),this._el={container:{},content_container:{},major:{},minor:{}},this._text={},this._state={loaded:!1},this.data={},this.options={duration:1e3,ease:Uf,width:600,height:600},this.active=!1,this.animator={},this.axis_helper={},this.minor_ticks=[],this.major_ticks=[],typeof e=="object"?this._el.container=e:this._el.container=lc(e),Ze(this.options,r),this._initLayout(),this._initEvents()}show(){}hide(){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}getLeft(){return this._el.container.style.left.slice(0,-2)}drawTicks(e,r){var i=e.getTicks();this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor",this._el.major.style.opacity=0,this._el.minor.style.opacity=0,this.major_ticks=this._createTickElements(i.major.ticks,this._el.major,e.getAxisTickDateFormat(i.major.name)),this.minor_ticks=this._createTickElements(i.minor.ticks,this._el.minor,e.getAxisTickDateFormat(i.minor.name),i.major.ticks),this.positionTicks(e,r,!0),this._el.major.className="tl-timeaxis-major tl-animate-opacity tl-timeaxis-animate-opacity",this._el.minor.className="tl-timeaxis-minor tl-animate-opacity tl-timeaxis-animate-opacity",this._el.major.style.opacity=1,this._el.minor.style.opacity=1}_createTickElements(e,r,i,s){r.innerHTML="";var a={},o=new Date(-1,13,-30);if(a[o.getTime()]=!0,s)for(var l=0;l<s.length;l++)a[s[l].getTime()]=!0;for(var u=[],l=0;l<e.length;l++){var c=e[l];if(!(c.getTime()in a)){var h=de("div","tl-timeaxis-tick",r),f=de("span","tl-timeaxis-tick-text tl-animate-opacity",h);let m=c.getDisplayDate(this.getLanguage(),i);f.innerHTML=m,u.push({tick:h,tick_text:f,display_date:m,date:c})}}return u}positionTicks(e,r,i){i?(this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor"):(this._el.major.className="tl-timeaxis-major tl-timeaxis-animate",this._el.minor.className="tl-timeaxis-minor tl-timeaxis-animate"),this._positionTickArray(this.major_ticks,e,r),this._positionTickArray(this.minor_ticks,e,r)}_positionTickArray(e,r,i){if(e[1]&&e[0]){var s=r.getPosition(e[1].date.getMillisecond())-r.getPosition(e[0].date.getMillisecond()),a=1;s<i&&(a=Math.round(i/r.getPixelsPerTick()));for(var o=1,l=0;l<e.length;l++){var u=e[l];u.tick.style.left=r.getPosition(u.date.getMillisecond())+"px",u.tick_text.innerHTML=u.display_date,a>1?o>=a?(o=1,u.tick_text.style.opacity=1,u.tick.className="tl-timeaxis-tick"):(o++,u.tick_text.style.opacity=0,u.tick.className="tl-timeaxis-tick tl-timeaxis-tick-hidden"):(u.tick_text.style.opacity=1,u.tick.className="tl-timeaxis-tick")}}}getVisibleTicks(){return{major:this._getVisibleTickArray(this.major_ticks),minor:this._getVisibleTickArray(this.minor_ticks)}}_getVisibleTickArray(e){return e.filter(({tick:r})=>c5(r))}_initLayout(){this._el.content_container=de("div","tl-timeaxis-content-container",this._el.container),this._el.major=de("div","tl-timeaxis-major",this._el.content_container),this._el.minor=de("div","tl-timeaxis-minor",this._el.content_container),this.onLoaded()}_initEvents(){}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}Sn(WC,In,Ii,Ci);class qC{constructor(e,r,i){this._el={container:{},content_container:{},content:{},headline_container:{},headline:{},date:{}},this.options={title:!1},this.data={unique_id:"",headline:"headline",text:"text"},d6(this,e),Ze(this.options,r),this._el.container=de("div","tl-text"),this._el.container.id=this.data.unique_id,this._initLayout(),i&&i.appendChild(this._el.container)}show(){}hide(){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}headlineHeight(){return this._el.headline.offsetHeight+40}addDateText(e){this._el.date.innerHTML=e}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){if(this._el.content_container=de("div","tl-text-content-container",this._el.container),this._el.headline_container=de("div","tl-text-headline-container",this._el.content_container),this.data.headline!=""){var e="tl-headline";this.options.title&&(e="tl-headline tl-headline-title"),this._el.headline=de("h2",e,this._el.headline_container),this._el.headline.innerHTML=this.data.headline}if(this._el.date=de("h3","tl-headline-date",this._el.headline_container),this.data.text!=""){var r="";r+=h6(this.options.autolink==!0?sv(this.data.text):this.data.text),this._el.content=de("div","tl-text-content",this._el.content_container),this._el.content.innerHTML=r}this.onLoaded()}}Sn(qC,In);class ht{constructor(e,r,i){i&&this.setLanguage(i),this._el={container:{},content_container:{},content:{},content_item:{},content_link:{},caption:null,credit:null,parent:{},link:null},this.player=null,this.timer=null,this.load_timer=null,this.message=null,this.media_id=null,this._state={loaded:!1,show_meta:!1,media_loaded:!1},this.data={unique_id:null,url:null,credit:null,caption:null,credit_alternate:null,caption_alternate:null,link:null,link_target:null},this.options={api_key_flickr:"bd3a7c45ddd52f3101825d41563a6125",api_key_googlemaps:"AIzaSyB9dW8e_iRrATFa8g24qB6BDBGdkrLDZYI",api_key_embedly:"",credit_height:0,caption_height:0,background:0},this.animator={},Ze(this.options,r),Ze(this.data,e),this.options.background||(this._el.container=de("div","tl-media"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._initLayout())}loadMedia(){var e=this;if(!this._state.loaded)try{this.load_timer=setTimeout(function(){e.loadingMessage(),e._loadMedia(),e._updateDisplay()},1200)}catch(r){Ue("Error loading media for ",this._media),Ue(r)}}_updateMessage(e){this.message&&this.message.updateMessage(e)}loadingMessage(){this._updateMessage(this._("loading")+" "+this.options.media_name)}errorMessage(e){e?e=this._("error")+": "+e:e=this._("error"),this._updateMessage(e)}updateMediaDisplay(e){this._state.loaded&&!this.options.background&&(ya?this._el.content_item.style.maxHeight=this.options.height/2+"px":this._el.content_item.style.maxHeight=this.options.height-this.options.credit_height-this.options.caption_height-30+"px",this._el.container.style.maxWidth=this.options.width+"px",Co&&this._el.content_item.offsetWidth>this._el.content_item.offsetHeight,this._updateMediaDisplay(e),this._state.media_loaded&&(this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")))}_loadMedia(){this.onLoaded()}_updateMediaDisplay(e){Co&&(this._el.content_item.style.maxWidth=this.options.width+"px",this._el.content_item.style.width="auto")}_getMeta(){}_getImageURL(e,r){return""}show(){}hide(){}addTo(e){e.appendChild(this._el.container),this.onAdd()}removeFrom(e){e.removeChild(this._el.container),this.onRemove()}getImageURL(e,r){return this._getImageURL(e,r)}updateDisplay(e,r,i){this._updateDisplay(e,r,i)}stopMedia(){try{this._stopMedia()}catch(e){Ue(`stopMedia() exception: ${e}`)}}loadErrorDisplay(e){try{this._el.content.removeChild(this._el.content_item)}catch{}this._el.content_item=de("div","tl-media-item tl-media-loaderror",this._el.content),this._el.content_item.innerHTML="<div class='tl-icon-"+this.options.media_type+"'></div><p>"+e+"</p>",this.onLoaded(!0)}onLoaded(e){this._state.loaded=!0,this.fire("loaded",this.data),this.message&&this.message.hide(),e||this.options.background||this.showMeta(),this.updateDisplay()}onMediaLoaded(e){this._state.media_loaded=!0,this.fire("media_loaded",this.data),this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")}showMeta(e,r){this._state.show_meta=!0,this.data.credit&&this.data.credit!=""&&(this._el.credit=de("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.options.autolink==!0?sv(this.data.credit):this.data.credit,this.options.credit_height=this._el.credit.offsetHeight),this.data.caption&&this.data.caption!=""&&(this._el.caption=de("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.options.autolink==!0?sv(this.data.caption):this.data.caption,this.options.caption_height=this._el.caption.offsetHeight),(!this.data.caption||!this.data.credit)&&this.getMeta()}getMeta(){this._getMeta()}updateMeta(){!this.data.credit&&this.data.credit_alternate&&(this._el.credit=de("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.data.credit_alternate,this.options.credit_height=this._el.credit.offsetHeight),!this.data.caption&&this.data.caption_alternate&&(this._el.caption=de("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.data.caption_alternate,this.options.caption_height=this._el.caption.offsetHeight),this.updateDisplay()}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){this.message=new Hf(this._el.container,this.options,this.getLanguage()),this._el.content_container=de("div","tl-media-content-container",this._el.container),this.data.link&&this.data.link!=""?(this._el.link=de("a","tl-media-link",this._el.content_container),this._el.link.href=this.data.link,this.data.link_target&&this.data.link_target!=""?this._el.link.target=this.data.link_target:this._el.link.target="_blank",this._el.link.target=="_blank"&&this._el.link.setAttribute("rel","noopener"),this._el.content=de("div","tl-media-content",this._el.link)):this._el.content=de("div","tl-media-content",this._el.content_container)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r),i&&(this.options.layout=i),this._el.credit&&(this.options.credit_height=this._el.credit.offsetHeight),this._el.caption&&(this.options.caption_height=this._el.caption.offsetHeight+5),this.updateMediaDisplay(this.options.layout)}domCreate(...e){return de(...e)}_stopMedia(){}}Sn(ht,In,Ci);let uE=class extends ht{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=this,r="tl-media-item tl-media-image tl-media-shadow";(this.data.url.match(/.png(\?.*)?$/)||this.data.url.match(/.svg(\?.*)?$/))&&(r="tl-media-item tl-media-image"),this._el.content_item=this.domCreate("img",r,this._el.content),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=Ao(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=Ao(this.data.caption)),this._el.content_item.addEventListener("load",function(i){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL()}getImageURL(e,r){return Ff(this.data.url)}_updateMediaDisplay(e){Co&&(this._el.content_item.style.width="auto")}};class d5{constructor(e){this.doc=e,this.pending={},this.queue={css:[],js:[]},this.styleSheets=e.styleSheets,this.env=this.getEnv(),this.head=this.doc.head||this.doc.getElementsByTagName("head")[0],this.pollCount=0}createNode(e,r){var i=this.doc.createElement(e),s;for(s in r)r.hasOwnProperty(s)&&i.setAttribute(s,r[s]);return i}finish(e){var r=this.pending[e],i,s;r&&(i=r.callback,s=r.urls,s.shift(),this.pollCount=0,s.length||(i&&i.call(r.context,r.obj),this.pending[e]=null,this.queue[e].length&&this.load(e)))}getEnv(){var e=navigator.userAgent,r={async:this.doc.createElement("script").async===!0};return(r.webkit=/AppleWebKit\//.test(e))||(r.ie=/MSIE/.test(e))||(r.opera=/Opera/.test(e))||(r.gecko=/Gecko\//.test(e))||(r.unknown=!0),r}load(e,r,i,s,a){var o=(function(){this.finish(e)}).bind(this),l=e==="css",u=[],c,h,f,p,m,w;if(r)if(r=typeof r=="string"?[r]:r.concat(),l||this.env.async||this.env.gecko||this.env.opera)this.queue[e].push({urls:r,callback:i,obj:s,context:a});else for(c=0,h=r.length;c<h;++c)this.queue[e].push({urls:[r[c]],callback:c===h-1?i:null,obj:s,context:a});if(!(this.pending[e]||!(p=this.pending[e]=this.queue[e].shift()))){for(m=p.urls,c=0,h=m.length;c<h;++c)w=m[c],l?f=this.env.gecko?this.createNode("style"):this.createNode("link",{href:w,rel:"stylesheet"}):(f=this.createNode("script",{src:w}),f.async=!1),f.className="lazyload",f.setAttribute("charset","utf-8"),this.env.ie&&!l?f.onreadystatechange=function(){/loaded|complete/.test(f.readyState)&&(f.onreadystatechange=null,o())}:l&&(this.env.gecko||this.env.webkit)?this.env.webkit?(p.urls[c]=f.href,this.pollWebKit()):(f.innerHTML='@import "'+w+'";',this.pollGecko(f)):f.onload=f.onerror=o,u.push(f);for(c=0,h=u.length;c<h;++c)this.head.appendChild(u[c])}}pollGecko(e){var r;try{r=!!e.sheet.cssRules}catch{if(this.pollCount+=1,this.pollCount<200){var i=this;setTimeout(function(){i.pollGecko(e)},50)}else r&&this.finish("css");return}this.finish("css")}pollWebKit(){var e=this.pending.css,r;if(e){for(r=this.styleSheets.length;--r>=0;)if(this.styleSheets[r].href===e.urls[0]){this.finish("css");break}this.pollCount+=1,e&&(this.pollCount<200?setTimeout(this.pollWebKit.bind(this),50):this.finish("css"))}}css(e,r,i,s){this.load("css",e,r,i,s)}js(e,r,i,s){this.load("js",e,r,i,s)}}function ua(t,e,r,i){GC.js(t,e,r,i)}function ym(t,e,r,i){GC.css(t,e,r,i)}let GC=new d5(document);class h5 extends ht{_loadMedia(){var e=this,r;this.youtube_loaded=!1,this._el.content_item=this.domCreate("div","tl-media-item tl-media-youtube tl-media-shadow",this._el.content),this._el.content_item.id=la(7),r=f6(this.data.url),this.media_id={},this.data.url.match("v=")?this.media_id.id=r.v:this.data.url.match("/embed/")?this.media_id.id=this.data.url.split("embed/")[1].split(/[?&]/)[0]:this.data.url.match(/v\/|v=|youtu\.be\//)?this.media_id.id=this.data.url.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0]:Ue("YOUTUBE IN URL BUT NOT A VALID VIDEO"),this.data.url.match("start=")?this.media_id.start=hm(this.data.url.split("start=")[1]):this.data.url.match("t=")&&(this.media_id.start=hm(this.data.url.split("t=")[1])),this.data.url.match("end=")&&(this.media_id.end=hm(this.data.url.split("end=")[1])),this.media_id.hd=typeof r.hd<"u",ua("https://www.youtube.com/iframe_api",function(){e.createMedia()})}_updateMediaDisplay(){this._el.content_item.style.height=_a.r16_9({w:this.options.width})+"px",this._el.content_item.style.width=this.options.width+"px"}_stopMedia(){if(this.youtube_loaded)try{this.player.getPlayerState()==YT.PlayerState.PLAYING&&this.player.pauseVideo()}catch(e){Ue(e)}}createMedia(){var e=this;clearTimeout(this.timer),typeof YT<"u"&&typeof YT.Player<"u"?this.player=new YT.Player(this._el.content_item.id,{playerVars:{enablejsapi:1,color:"white",controls:1,start:this.media_id.start,end:this.media_id.end,fs:1},videoId:this.media_id.id,events:{onReady:function(){e.onPlayerReady(),e.onLoaded()},onStateChange:e.onStateChange}}):this.timer=setTimeout(function(){e.createMedia()},1e3)}onPlayerReady(e){this.youtube_loaded=!0,this._el.content_item=document.getElementById(this._el.content_item.id),this.onMediaLoaded()}onStateChange(e){e.data==YT.PlayerState.ENDED&&(e.target.seekTo(0),e.target.pauseVideo())}}class f5 extends ht{_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-map tl-media-shadow",this._el.content),this.media_id=this.data.url,this.mapframe=this.domCreate("iframe","",this._el.content_item),this.mapframe.width="100%",this.mapframe.height="100%",this.mapframe.frameBorder="0",this.mapframe.src=this.makeGoogleMapsEmbedURL(this.media_id,this.options.api_key_googlemaps),this.onLoaded()}_updateMediaDisplay(){if(this._state.loaded){var e=_a.square({w:this._el.content_item.offsetWidth});this._el.content_item.style.height=e.h+"px"}}makeGoogleMapsEmbedURL(e,r){var i=!1;function s(f){function p(A,D){if(A.slice(-1)=="z")D.zoom=A;else if(A.slice(-1)=="m")D.zoom=14,D.maptype="satellite";else if(A.slice(-1)=="t"){if(i=!0,w=="place")var T=f.match(h.place)[3]+","+f.match(h.place)[4];else{var T=D.center;delete D.center}D={},D.location=T,streetview_params=A.split(",");for(let b in a.streetview){var x=parseInt(b)+1;a.streetview[b]=="pitch"&&streetview_params[x]=="90t"?D[a.streetview[b]]=0:D[a.streetview[b]]=streetview_params[x].slice(0,-1)}}return D}function m(A,D){var T={},x=D[1],b=D[D.length-1];for(let U in a[A]){var P=parseInt(U)+2;a[A][U]=="center"?T[a[A][U]]=D[P]+","+D[++P]:T[a[A][U]]=D[P]}return T=p(b,T),T.key=r,i==!0&&(A="streetview"),x+"/embed/v1/"+A+p6(T)}let w="view";return f.match(h.place)?w="place":f.match(h.directions)?w="directions":f.match(h.search)&&(w="search"),m(w,f.match(h[w]))}var a={view:["center"],place:["q","center"],directions:["origin","destination","center"],search:["q","center"],streetview:["fov","heading","pitch"]},o=/(https:\/\/.+google.+?\/maps)/,l=/@([-\d.]+),([-\d.]+)/,u=/([\w\W]+)/,c=/,((?:[-\d.]+[zmayht],?)*)/,h={view:new RegExp(o.source+"/"+l.source+c.source),place:new RegExp(o.source+"/place/"+u.source+"/"+l.source+c.source),directions:new RegExp(o.source+"/dir/"+u.source+"/"+u.source+"/"+l.source+c.source),search:new RegExp(o.source+"/search/"+u.source+"/"+l.source+c.source)};return s(e)}}class p5 extends ht{constructor(e,r,i){super(e,r,i),this.blockquote=Wf.sanitize(this.data.url)}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-blockquote",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this._el.content_item.innerHTML=this.blockquote,this.onLoaded()}updateMediaDisplay(){}}class m5 extends ht{_loadMedia(){var e,r,i=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-wikipedia",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.media_id=this.data.url.split("wiki/")[1].split("#")[0].replace("_"," "),this.media_id=this.media_id.replace(" ","%20"),r=this.data.url.split("//")[1].split(".wikipedia")[0],e="https://"+r+".wikipedia.org/w/api.php?action=query&prop=extracts|pageimages&redirects=&titles="+this.media_id+"&exintro=1&format=json&callback=?",qo({type:"GET",url:e,dataType:"json",success:function(s){i.createMedia(s)},error:function(s,a){var o="";o+=i._("wikipedia_load_err")+"<br/>"+i.media_id+"<br/>"+a,i.loadErrorDisplay(o)}})}createMedia(e){var r="";if(e.query){var i="",r={entry:{},title:"",text:"",extract:"",paragraphs:1,page_image:"",text_array:[]};r.entry=m6(e.query.pages,0),r.extract=r.entry.extract,r.title=r.entry.title,r.page_image=r.entry.thumbnail,r.extract.match("<p>")?r.text_array=r.extract.split("<p>"):r.text_array.push(r.extract);for(var s=0;s<r.text_array.length;s++)s+1<=r.paragraphs&&s+1<r.text_array.length&&(r.text+="<p>"+r.text_array[s+1]);i+="<span class='tl-icon-wikipedia'></span>",i+="<div class='tl-wikipedia-title'><h4><a href='"+this.data.url+"' target='_blank' rel='noopener'>"+r.title+"</a></h4>",i+="<span class='tl-wikipedia-source'>"+this._("wikipedia")+"</span></div>",r.page_image,i+=r.text,r.extract.match("REDIRECT")||(this._el.content_item.innerHTML=i,this.onLoaded())}}updateMediaDisplay(){}}function g5(t){if(t.match(/^.+#\/media\/.+/))return`File:${t.split("#")[1].split(":")[1]}`;if(t.match(/^.*commons.wikimedia.org\/wiki\/File:.+/)){let e=t.split("/");return e[e.length-1]}return null}function v5(t){let e={};if(t.query&&t.query.pages){let r=Object.keys(t.query.pages);e.page_id=r[0];let i=t.query.pages[e.page_id];e.url=i.imageinfo[0].thumburl,i.entityterms&&i.entityterms.label&&(e.label=i.entityterms.label[0])}return e}class cE extends ht{_loadMedia(){var e,r=Math.round(this.options.width)||1e3,i=this.getLanguage().lang.toLowerCase(),s=this;try{this.establishMediaID(),e=`https://commons.wikimedia.org/w/api.php?action=query&titles=${this.media_id}&prop=imageinfo|entityterms&iiprop=url&&iiurlwidth=${r}&format=json&origin=*&wbetlanguage=${i}`,Fh(e,function(a){let o=v5(a);o.url?(s.base_image_url=o.url,s.page_id=o.page_id,!s.data.alt&&o.label&&(s.data.alt=o.label),s.options.background||s.createMedia(),s.onLoaded()):s.loadErrorDisplay(s._("wikipedia_image_load_err"))})}catch(a){s.loadErrorDisplay(s._(a.message_key))}}establishMediaID(){let e=g5(this.data.url);if(e)this.media_id=e;else throw new Fe("Invalid Wikipedia Image URL")}createMedia(){var e=this;if(this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-wikipedia-image tl-media-shadow",this._el.content),this.data.alt)this._el.content_item.alt=this.data.alt;else if(this.page_id){let r=`M${this.page_id}`,i=`https://commons.wikimedia.org/w/api.php?action=wbgetentities&format=json&ids=${r}&format=json&origin=*`;Bf(i).then(s=>{if(s.entities&&s.entities[r]){let a=s.entities[r].labels,o=e.getLanguage().lang.toLowerCase(),l=null;a[o]?l=a[o]:o.length>2&&a[o.substr(0,2)]?l=a[o.substr(0,2)]:a.en&&(l=a.en),l?(console.log(`wikibase_id: ${e.media_id} alt ${l.value}`),e.data.alt=l.value,e._el.content_item.alt=e.data.alt):console.log(`wikibase_id: ${e.media_id} ain't got no alt`)}})}this.data.title&&(this._el.content_item.title=this.data.title),this._el.content_item.addEventListener("load",function(r){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}_getImageURL(e,r){if(e&&this.base_image_url){let i=this.base_image_url.match(/(\/[\d\.]+px-)/);if(i)return e=Math.round(e),this.base_image_url.replace(i[1],`/${e}px-`)}return this.base_image_url}}class y5 extends ht{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-soundcloud tl-media-shadow",this._el.content),this.media_id=this.data.url,e="https://soundcloud.com/oembed?url="+this.media_id+"&format=js&callback=?",Fh(e,function(i){ua("https://w.soundcloud.com/player/api.js",function(){r.createMedia(i)})})}createMedia(e){this._el.content_item.innerHTML=e.html,self.widget=SC.Widget(this._el.content_item.querySelector("iframe")),this.soundCloudCreated=!0,this.onLoaded()}_stopMedia(){this.soundCloudCreated&&self.widget.pause()}}class _5 extends ht{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vimeo tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0];var i=null;this.data.url.match(/#t=([^&]+).*/)&&(i=this.data.url.match(/#t=([^&]+).*/)[1]),e="https://player.vimeo.com/video/"+this.media_id+"?api=1&title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff",i&&(e=e+="&amp;#t="+i),this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(s){r.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=_a.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player&&this.player.contentWindow&&this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(e){Ue(e)}}}class w5 extends ht{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-dailymotion",this._el.content),this.data.url.indexOf("dai.ly/")!=-1?this.media_id=this.data.url.substr(this.data.url.indexOf("dai.ly/")+7):this.data.url.match("video")?this.media_id=this.data.url.split("video/")[1].split(/[?&]/)[0]:this.media_id=this.data.url.split("embed/")[1].split(/[?&]/)[0],this.media_id.indexOf("_")!=-1&&(this.media_id=this.media_id.split("_")[0]),e="https://www.dailymotion.com/embed/video/"+this.media_id+"?api=postMessage",this._el.content_item.innerHTML="<iframe autostart='false' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._state.loaded&&(this._el.content_item.style.height=_a.r16_9({w:this._el.content_item.offsetWidth})+"px")}_stopMedia(){this._state.loaded&&this._el.content_item.querySelector("iframe").contentWindow.postMessage('{"command":"pause","parameters":[]}',"*")}}class b5 extends ht{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vine tl-media-shadow",this._el.content),this.media_id=this.data.url.split("vine.co/v/")[1],e="https://vine.co/v/"+this.media_id+"/embed/simple",this._el.content_item.innerHTML="<iframe frameborder='0' width='100%' height='100%' src='"+e+"'></iframe><script async src='https://platform.vine.co/static/scripts/embed.js' charset='utf-8'><\/script>",this.onLoaded()}_updateMediaDisplay(){var e=_a.square({w:this._el.content_item.offsetWidth,h:this.options.height});this._el.content_item.style.height=e.h+"px"}_stopMedia(){this._el.content_item.querySelector("iframe").contentWindow.postMessage("pause","*")}}class x5 extends ht{_loadMedia(){var e,r=this;if(this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.data.url.match("^(https?:)?/*(www.)?(twitter|x).com"))this.data.url.match("status/")?this.media_id=this.data.url.split("status/")[1]:this.data.url.match("statuses/")?this.media_id=this.data.url.split("statuses/")[1]:this.media_id="";else if(this.data.url.match(`<blockquote class=['"]twitter-tweet['"]`)){var i=this.data.url.match(/(status|statuses)\/(\d+)/);if(i&&i.length>2)this.media_id=i[2];else{r.loadErrorDisplay(r._("twitterembed_invalidurl_err"));return}}e="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",qo({type:"GET",url:e,dataType:"json",success:function(s){r.createMedia(s)},error:function(s,a){var o="";o+=r._("twitter_load_err")+"<br/>"+r.media_id+"<br/>"+a,r.loadErrorDisplay(o)}})}createMedia(e){var r="",i="",s="",a="",o="",l="",u=this;i=e.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=e.author_url.split("twitter.com/")[1],a=e.html.split("</p>&mdash;")[1].split('<a href="')[1],o=a.split('">')[0],l=a.split('">')[1].split("</a>")[0],i=i.replace(/<a href/ig,'<a target="_blank" rel="noopener" href'),i.includes("pic.twitter.com")||i.includes("pic.x.com")?(ua("https://platform.twitter.com/widgets.js",function(){twttr.widgets.createTweet(u.media_id,u._el.content_item,{conversation:"none",linkColor:"#cc0000",theme:"light"})}),this.onLoaded()):(r+=i,r+="<div class='vcard'>",r+="<a href='"+o+"' class='twitter-date' rel='noopener' target='_blank'>"+l+"</a>",r+="<img src='' class='tl-media-item tl-media-image'></a>",r+="<div class='author'>",r+="<a class='screen-name url' href='"+e.author_url+"' rel='noopener' target='_blank'>",r+="<span class='avatar'></span>",r+="<span class='fn'>"+e.author_name+" <span class='tl-icon-twitter'></span></span>",r+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",r+="</a>",r+="</div>",r+="</div>",this._el.content_item.innerHTML=r,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class E5 extends ht{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text";var i=this.data.url.match(/(status|statuses)\/(\d+)/);if(i&&i.length>2)this.media_id=i[2];else{r.loadErrorDisplay(r._("twitterembed_invalidurl_err"));return}e="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",window.twttr=function(s,a,o){var l,u=s.getElementsByTagName(a)[0],c=window.twttr||{};return s.getElementById(o)||(l=s.createElement(a),l.id=o,l.src="https://platform.twitter.com/widgets.js",u.parentNode.insertBefore(l,u),c._e=[],c.ready=function(h){c._e.push(h)}),c}(document,"script","twitter-wjs"),qo({type:"GET",url:e,dataType:"json",success(s){r.createMedia(s)},error:function(s,a){var o="";o+=r._("twitter_load_err")+"<br/>"+r.media_id+"<br/>"+a,r.loadErrorDisplay(o)}})}createMedia(e){var r="",i="",s="",a="",o="",l="";i=e.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=e.author_url.split("twitter.com/")[1],a=e.html.split("</p>&mdash;")[1].split('<a href="')[1],o=a.split('">')[0],l=a.split('">')[1].split("</a>")[0],i=i.replace(/<a href/ig,'<a target="_blank" rel="noopener" href');let u=this.media_id;i.includes("pic.twitter.com")?(twttr.ready(function(c){r=document.getElementsByClassName("tl-media-twitter")[0];var h=String(u);twttr.widgets.createTweet(h,r,{conversation:"none",linkColor:"#cc0000",theme:"light"}).then(function(f){this.onLoaded()})}),this._el.content_item.innerHTML=r,this.onLoaded()):(r+=i,r+="<div class='vcard'>",r+="<a href='"+o+"' class='twitter-date' rel='noopener' target='_blank'>"+l+"</a>",r+="<div class='author'>",r+="<a class='screen-name url' href='"+e.author_url+"' rel='noopener' target='_blank'>",r+="<span class='avatar'></span>",r+="<span class='fn'>"+e.author_name+" <span class='tl-icon-twitter'></span></span>",r+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",r+="</a>",r+="</div>",r+="</div>",this._el.content_item.innerHTML=r,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class dE extends ht{_loadMedia(){var e,r=this;try{this.establishMediaID(),e="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",Fh(e,function(i){i.stat=="ok"?(r.sizes=i.sizes.size,r.options.background||r.createMedia(),r.onLoaded()):r.loadErrorDisplay(r._("flickr_notfound_err"))})}catch(i){r.loadErrorDisplay(r._(i.message_key))}}establishMediaID(){if(this.data.url.match(/flic.kr\/.+/i)){var e=this.data.url.split("/").slice(-1)[0];this.media_id=g6.decode(e)}else{var r="flickr.com/photos/",i=this.data.url.indexOf(r);if(i==-1)throw new Fe("flickr_invalidurl_err");var s=i+r.length;this.media_id=this.data.url.substr(s).split("/")[1]}}createMedia(){var e=this;this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-flickr tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=Ao(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=Ao(this.data.caption)),this._el.content_item.addEventListener("load",function(r){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}getImageURL(e,r){for(var i=this.size_label(r),s=this.sizes[this.sizes.length-2].source,a=0;a<this.sizes.length;a++)this.sizes[a].label==i&&(s=this.sizes[a].source);return s}_getMeta(){var e=this,r;r="https://api.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",Fh(r,function(i){e.data.credit_alternate="<a href='"+e.data.url+"' target='_blank' rel='noopener'>"+i.photo.owner.realname+"</a>",e.data.caption_alternate=i.photo.title._content+" "+i.photo.description._content,e.updateMeta()})}size_label(e){var r="";return e<=75?e<=0?r="Large":r="Thumbnail":e<=180?r="Small":e<=240?r="Small 320":e<=375?r="Medium":e<=480?r="Medium 640":(e<=600,r="Large"),r}}class T5 extends ht{_loadMedia(){var e=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-documentcloud tl-media-shadow",this._el.content),this._el.content_item.id=la(7),this.data.url.match(/\.html$/)?this.data.url=this._transformURL(this.data.url):this.data.url.match(/.(json|js)$/)||Ue("DOCUMENT CLOUD IN URL BUT INVALID SUFFIX"),ua(["https://assets.documentcloud.org/viewer/loader.js","https://assets.documentcloud.org/viewer/viewer.js"],function(){e.createMedia()})}_transformURL(e){return e.replace(/(.*)\.html$/,"$1.js")}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}createMedia(){DV.load(this.data.url,{container:"#"+this._el.content_item.id,showSidebar:!1}),this.onLoaded()}}const S5="830b21071290df4f81a35c56abbea096",I5="704270473831239",k5=`${I5}|${S5}`,hE=`https://graph.facebook.com/v8.0/instagram_oembed?access_token=${k5}&fields=html,thumbnail_url,author_name&url=`;function C5(t){this.oembed_response=t,this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-instagram tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=Ao(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=Ao(this.data.caption)),this._el.content_item.addEventListener("load",(function(e){this.onMediaLoaded()}).bind(this)),this._el.content_item.src=t.thumbnail_url,this.onLoaded()}function A5(t){let e=`${t.statusText} [${t.status}]`;t.status==400&&(e=this._("instagram_bad_request")),this.loadErrorDisplay(e)}class P5 extends ht{_loadMedia(){this.media_id=this.data.url.split("/p/")[1].split("/")[0],this.options.background||this.createMedia()}createMedia(){this.oembed_response=null;let e=`${hE}${this.data.url}`;try{qo({url:e,dataType:"json",success:C5,error:A5,context:this})}catch(r){console.log(`Instagram: error fetching ${e}`),console.log(r);debugger}}getImageURL(){if(this.oembed_response&&this.oembed_response.thumbnail_url)return this.oembed_response.thumbnail_url;Bf(`${hE}${this.data.url}`).then(e=>e.thumbnail_url).catch(e=>{Ue(`Instagram getImageURL Error: ${e.status} ${e.statusText}`)})}_getMeta(){this.oembed_response&&this.oembed_response.author_name&&(this.data.credit_alternate=`Instagram: <a href="https://instagram.com/${this.oembed_response.author_name}" target="_blank">@${this.oembed_response.author_name}</a>`),this.updateMeta()}sizes(e){var r="";return e<=150?r="t":e<=306?r="m":r="l",r}}class R5 extends ht{_loadMedia(){this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-profile tl-media-shadow",this._el.content),this._el.content_item.src=this.data.url,this.onLoaded()}_updateMediaDisplay(e){Co&&(this._el.content_item.style.maxWidth=this.options.width/2-40+"px")}}class D5 extends ht{_loadMedia(){var e;if(this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this.data.url.match(/open\?id=([^&]+)/)){var r=this.data.url.match(/open\?id=([^&]+)/)[1];e="https://drive.google.com/file/d/"+r+"/preview"}else if(this.data.url.match(/file\/d\/([^/]*)\/?/)){var r=this.data.url.match(/file\/d\/([^/]*)\/?/)[1];e="https://drive.google.com/file/d/"+r+"/preview"}else e=this.data.url;this._el.content_item.innerHTML="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}function N5(t){return t.match(/^spotify:/)?t:(t=new URL(t),`spotify${t.pathname.replace(/\/$/,"").replace(/\//g,":")}`)}class M5 extends ht{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-spotify",this._el.content),this.media_id=N5(this.data.url),this.media_id?(e="https://embed.spotify.com/?uri="+this.media_id+"&theme=white&view=coverart",this.player=this.domCreate("iframe","tl-media-shadow",this._el.content_item),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.onLoaded()):this.loadErrorDisplay(this._("spotify_invalid_url"))}_updateMediaDisplay(e){var r=this.options.height,i=0,s=0;ya?r=this.options.height/2:r=this.options.height-this.options.credit_height-this.options.caption_height-30,this._el.content_item.style.maxHeight="none",Ue(r),Ue(this.options.width),r>this.options.width?(Ue("height is greater"),i=this.options.width+80+"px",s=this.options.width+"px"):(Ue("width is greater"),Ue(this.options.width),i=r+"px",s=r-80+"px"),this.player.style.width=s,this.player.style.height=i,this._el.credit&&(this._el.credit.style.width=s),this._el.caption&&(this._el.caption.style.width=s)}_stopMedia(){}}class L5 extends ht{constructor(e,r,i){super(e,r,i),this.iframe=Wf.sanitize(this.data.url,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder"]})}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this._el.content_item.innerHTML=this.iframe,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class O5 extends ht{_loadMedia(){try{var e=this;if(this.data.url.match(`<blockquote class=['"]imgur-embed-pub['"]`)){var r=this.data.url.match(/(imgur\.com)\/(\w+)/);this.media_id=r[2],this.data.url="http://imgur.com/gallery/"+this.media_id}else this.data.url&&(this.media_id=this.data.url.split("/").slice(-1)[0]);ua(["https://s.imgur.com/min/embed.js"],function(){e.createMedia()})}catch{this.loadErrorDisplay(this._("imgur_invalidurl_err"))}}createMedia(){var e=this,r="https://api.imgur.com/oembed.json?url="+this.data.url;this._el.content_item=this.domCreate("div","tl-media-item tl-media-image tl-media-imgur",this._el.content),qo({type:"GET",url:r,dataType:"json",success:function(i){try{e._el.content_item.innerHTML=i.html,setInterval(function(){document.querySelector("blockquote.imgur-embed-pub")==null?clearInterval():(imgurEmbed.createIframe(),document.getElementById("imageElement").removeAttribute("style"),document.getElementById("image").removeAttribute("style"))},2e3)}catch{Ue("Error processing imgur ajax response")}},error:function(i,s,a){s=="parsererror"?e.loadErrorDisplay(e._("imgur_invalidurl_err")):e.loadErrorDisplay(e._("unknown_read_err",s))}}),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.width=this.options.width+"px",this._el.content_item.style.height=_a.r16_9({w:this.options.width})+"px"}}class j5 extends ht{_loadMedia(){var e=Ff(this.data.url);this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content);var r="";oc||n6||e.match(/dl.dropboxusercontent.com/)?r="<iframe class='doc' frameborder='0' width='100%' height='100%' src='//docs.google.com/viewer?url="+e+"&amp;embedded=true'></iframe>":r="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this._el.content_item.innerHTML=r,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class V5 extends ht{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=Ff(this.data.url),r=this,r=this,i="tl-media-item tl-media-audio tl-media-shadow";this._el.content_item=this.domCreate("audio",i,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){r.onMediaLoaded()}),this._el.source_item.src=e,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 audio with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(e){Co&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(e,r){var i=e.match(r),s="audio/";switch(i[1]){case"mp3":s+="mpeg";break;case"wav":s+="wav";break;case"m4a":s+="mp4";break;default:s="audio";break}return s}}class F5 extends ht{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=Ff(this.data.url),r=this,r=this,i="tl-media-item tl-media-video tl-media-shadow";this._el.content_item=this.domCreate("video",i,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){r.onMediaLoaded()}),this._el.source_item.src=e,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 video with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(e){Co&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(e,r){var i=e.match(r),s="video/";switch(i[1]){case"mp4":s+="mp4";break;case"webm":s+="webm";break;default:s="video";break}return s}}class U5 extends ht{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-wistia tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/https?:\/\/(.+)?(wistia\.com|wi\.st)\/medias\/(.*)/)[3],Ue(`Wistia: media_id: ${this.media_id}`),e="https://fast.wistia.com/embed/iframe/"+this.media_id+"?version=v1&controlsVisibleOnLoad=true&playerColor=aae3d8",this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(i){r.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=_a.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(e){Ue(e)}}}function Uh(t,e){var r={},i=[{type:"youtube",name:"YouTube",match_str:"^(https?:)?/*(www.|m.)?youtube|youtu.be",cls:h5},{type:"vimeo",name:"Vimeo",match_str:"^(https?:)?/*(player.)?vimeo.com",cls:_5},{type:"dailymotion",name:"DailyMotion",match_str:"^(https?:)?/*(www.)?(dailymotion.com|dai.ly)",cls:w5},{type:"vine",name:"Vine",match_str:"^(https?:)?/*(www.)?vine.co",cls:b5},{type:"soundcloud",name:"SoundCloud",match_str:"^(https?:)?/*(player.)?soundcloud.com",cls:y5},{type:"twitter",name:"Twitter",match_str:"^(https?:)?/*(www.)?(twitter|x).com",cls:x5},{type:"twitterembed",name:"TwitterEmbed",match_str:`<blockquote class=['"]twitter-tweet['"]`,cls:E5},{type:"googlemaps",name:"Google Map",match_str:/google.+?\/maps\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/search\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/place\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/dir\/([\w\W]+)\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)/,cls:f5},{type:"flickr",name:"Flickr",match_str:"^(https?:)?/*(www.)?flickr.com/photos",cls:dE},{type:"flickr",name:"Flickr",match_str:"^(https?://)?flic.kr/.*",cls:dE},{type:"instagram",name:"Instagram",match_str:/^(https?:)?\/*(www.)?(instagr.am|^(https?:)?\/*(www.)?instagram.com)\/p\//,cls:P5},{type:"profile",name:"Profile",match_str:/^(https?:)?\/*(www.)?instagr.am\/[a-zA-Z0-9]{2,}|^(https?:)?\/*(www.)?instagram.com\/[a-zA-Z0-9]{2,}/,cls:R5},{type:"documentcloud",name:"Document Cloud",match_str:/documentcloud.org\//,cls:T5},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://.+.wiki[mp]edia.org.+#/media/.+.(jpg|jpeg|png|gif|svg|webp)",cls:cE},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://commons.wikimedia.org/wiki/File:.+.(jpg|jpeg|png|gif|svg|webp)",cls:cE},{type:"wikipedia",name:"Wikipedia",match_str:"^(https?:)?/.+.wikipedia.org",cls:m5},{type:"image",name:"Image",match_str:/(jpg|jpeg|png|gif|svg|webp)(\?.*)?$/i,cls:uE},{type:"imgur",name:"Imgur",match_str:/^.*imgur.com\/.+$|<blockquote class=['\"]imgur-embed-pub['\"]/i,cls:O5},{type:"googledocs",name:"Google Doc",match_str:"^(https?:)?/*[^.]*.google.com/[^/]*/d/[^/]*/[^/]*?usp=shar.*|^(https?:)?/*drive.google.com/open?id=[^&]*&authuser=0|^(https?:)?//*drive.google.com/open\\?id=[^&]*|^(https?:)?/*[^.]*.googledrive.com/host/[^/]*/",cls:D5},{type:"pdf",name:"PDF",match_str:/^.*\.pdf(\?.*)?(\#.*)?/,cls:j5},{type:"spotify",name:"spotify",match_str:"spotify",cls:M5},{type:"iframe",name:"iFrame",match_str:"iframe",cls:L5},{type:"blockquote",name:"Quote",match_str:"blockquote",cls:p5},{type:"video",name:"Video",match_str:/(mp4|webm)(\?.*)?$/i,cls:F5},{type:"wistia",name:"Wistia",match_str:/https?:\/\/(.+)?(wistia\.com|wi\.st)\/.*/i,cls:U5},{type:"audio",name:"Audio",match_str:/(mp3|wav|m4a)(\?.*)?$/i,cls:V5},{type:"imageblank",name:"Imageblank",match_str:"",cls:uE}];if(e){if(t instanceof Array)return!1;for(var s=0;s<i.length;s++)switch(i[s].type){case"flickr":case"image":case"instagram":if(t.url.match(i[s].match_str))return r=i[s],r;break}}else for(var s=0;s<i.length;s++)if(t.url.match(i[s].match_str))return i[s];return!1}class KC{constructor(e,r){this._el={container:{},content_container:{},media_container:{},timespan:{},line_left:{},line_right:{},content:{},text:{},media:{}},this._text={},this._state={loaded:!1},this.data={unique_id:"",background:null,date:{year:0,month:0,day:0,hour:0,minute:0,second:0,millisecond:0,thumbnail:"",format:""},text:{headline:"",text:""},media:null},this.options={duration:1e3,ease:Uf,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,this.ariaLabel="",Ze(this.options,r),Ze(this.data,e),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(e){this.active=e,this.active&&this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end tl-timemarker-active":this.active?this._el.container.className="tl-timemarker tl-timemarker-active":this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end":this._el.container.className="tl-timemarker",this._el.container.ariaLabel=this.ariaLabel,this.active?this._el.container.ariaLabel+=", shown":this._el.container.ariaLabel+=", press space to show"}setFocus(e={preventScroll:!0}){this._el.container.focus(e)}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}loadMedia(){this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0)}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.data.start_date.getTime()}getEndTime(){return this.data.end_date?this.data.end_date.getTime():!1}setHeight(e){var r=12,i=1;this._el.content_container.style.height=e+"px",this._el.timespan_content.style.height=e+"px",e<=30?this._el.content.className="tl-timemarker-content tl-timemarker-content-small":this._el.content.className="tl-timemarker-content",e<=56?this._el.content_container.classList.add("tl-timemarker-content-container-small"):this._el.content_container.classList.remove("tl-timemarker-content-container-small"),Vf?(i=Math.floor(e/(r+2)),i<1&&(i=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=i):(i=e/r,i>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=i*r+"px")}setWidth(e){this.data.end_date&&(this._el.container.style.width=e+"px",e>this.options.marker_width_min?(this._el.content_container.style.width=e+"px",this._el.content_container.className="tl-timemarker-content-container tl-timemarker-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timemarker-content-container"))}setClass(e){this._el.container.className=e}setRowPosition(e,r){this.setPosition({top:e}),this._el.timespan.style.height=r+"px"}getFormattedDate(){if(qn(this.data.display_date).length>0)return this.data.display_date;let e="";return this.data.end_date&&(e=" to "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(e=(e?"from ":"")+this.data.start_date.getDisplayDate(this.getLanguage())+e),e}_onMarkerClick(e){this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerKeydown(e){/Space|Enter/.test(e.code)&&this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerBlur(e){this.fire("markerblur",{unique_id:this.data.unique_id})}_initLayout(){if(this._el.container=de("div","tl-timemarker"),this._el.container.setAttribute("tabindex","-1"),this.data.unique_id&&(this._el.container.id=this.data.unique_id+"-marker"),this.data.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timemarker tl-timemarker-with-end"),this._el.timespan=de("div","tl-timemarker-timespan",this._el.container),this._el.timespan_content=de("div","tl-timemarker-timespan-content",this._el.timespan),this._el.content_container=de("div","tl-timemarker-content-container",this._el.container),this._el.content=de("div","tl-timemarker-content",this._el.content_container),this._el.line_left=de("div","tl-timemarker-line-left",this._el.timespan),this._el.line_right=de("div","tl-timemarker-line-right",this._el.timespan),this.data.media){this._el.media_container=de("div","tl-timemarker-media-container",this._el.content);var e={url:this.data.media.thumbnail},r=this.data.media.thumbnail?Uh(e,!0):null;if(r){var i=new r.cls(e);i.on("loaded",(function(){this._el.media=de("img","tl-timemarker-media",this._el.media_container),this._el.media.src=i.getImageURL()}).bind(this)),i.loadMedia()}else{var s=Uh(this.data.media).type;this._el.media=de("span","tl-icon-"+s,this._el.media_container)}}this._el.text=de("div","tl-timemarker-text",this._el.content),this._text=de("h2","tl-headline",this._el.text),this.data.text.headline&&this.data.text.headline!=""?this._text.innerHTML=oo(this.data.text.headline):this.data.text.text&&this.data.text.text!=""?this._text.innerHTML=oo(this.data.text.text):this.data.media&&this.data.media.caption&&this.data.media.caption!=""&&(this._text.innerHTML=oo(this.data.media.caption));const a=this.getFormattedDate();this.ariaLabel=`${this._text.innerHTML}, ${a}`,this.onLoaded()}_initEvents(){Ae.addListener(this._el.container,"click",this._onMarkerClick,this),Ae.addListener(this._el.container,"keydown",this._onMarkerKeydown,this),Ae.addListener(this._el.container,"blur",this._onMarkerBlur,this)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}Sn(KC,Ci,In,Ii);class w_{constructor(e,r,i){this._el={drag:e,move:e},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},r&&(this._el.move=r),this.options={snap:!1,enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:0,right:!1},momentum_multiplier:2e3,duration:1e3,ease:Wo},this.animator=null,this.dragevent=this.mousedrag,qr&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},Ze(this.options,i)}enable(e){Ae.addListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Ae.addListener(this._el.drag,this.dragevent.up,this._onDragEnd,this),this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){Ae.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Ae.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(e){this.options.constraint=e}_onDragStart(e){this.animator&&this.animator.stop(),qr?e.originalEvent?(this.data.pagex.start=e.originalEvent.touches[0].screenX,this.data.pagey.start=e.originalEvent.touches[0].screenY):(this.data.pagex.start=e.targetTouches[0].screenX,this.data.pagey.start=e.targetTouches[0].screenY):(this.data.pagex.start=e.pageX,this.data.pagey.start=e.pageY),this.options.enable.x,this.options.enable.y,this.data.pos.start={x:this._el.move.offsetLeft,y:this._el.move.offsetTop},this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),Ae.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Ae.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(e){this.data.sliding=!1,Ae.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Ae.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(e){var r={x:0,y:0};this.data.sliding=!0,qr?e.originalEvent?(this.data.pagex.end=e.originalEvent.touches[0].screenX,this.data.pagey.end=e.originalEvent.touches[0].screenY):(this.data.pagex.end=e.targetTouches[0].screenX,this.data.pagey.end=e.targetTouches[0].screenY):(this.data.pagex.end=e.pageX,this.data.pagey.end=e.pageY),r.x=this.data.pagex.start-this.data.pagex.end,r.y=this.data.pagey.start-this.data.pagey.end,this.data.pos.end={x:this._el.drag.offsetLeft,y:this._el.drag.offsetTop},this.data.new_pos.x=-(r.x-this.data.pos.start.x),this.data.new_pos.y=-(r.y-this.data.pos.start.y),this.options.enable.x&&Math.abs(r.x)>Math.abs(r.y)&&(e.preventDefault(),this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&Math.abs(r.y)>Math.abs(r.y)&&(e.preventDefault(),this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var e={x:0,y:0,time:0},r={x:0,y:0,time:0},i={x:!1,y:!1},s=!1;this.data.direction=null,e.time=(new Date().getTime()-this.data.time.start)*10,r.time=(new Date().getTime()-this.data.time.start)*10,r.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),r.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),e.x=Math.round(r.x/r.time),e.y=Math.round(r.y/r.time),this.data.new_pos.x=Math.min(this.data.new_pos.x+e.x),this.data.new_pos.y=Math.min(this.data.new_pos.y+e.y),this.options.enable.x?this.options.constraint.left&&this.data.new_pos.x>this.options.constraint.left&&(this.data.new_pos.x=this.options.constraint.left):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,r.time<2e3&&(s=!0),this.options.enable.x&&this.options.enable.y?Math.abs(r.x)>Math.abs(r.y)?i.x=!0:i.y=!0:this.options.enable.x?Math.abs(r.x)>Math.abs(r.y)&&(i.x=!0):Math.abs(r.y)>Math.abs(r.x)&&(i.y=!0),i.x&&(Math.abs(r.x)>this._el.drag.offsetWidth/2&&(s=!0),Math.abs(r.x)>1e4&&(this.data.direction="left",r.x>0&&(this.data.direction="right"))),i.y&&(Math.abs(r.y)>this._el.drag.offsetHeight/2&&(s=!0),Math.abs(r.y)>1e4&&(this.data.direction="up",r.y>0&&(this.data.direction="down"))),r.time<1e3||this._animateMomentum(),s&&this.data.direction?this.fire("swipe_"+this.data.direction,this.data):this.data.direction?this.fire("swipe_nodirection",this.data):this.options.snap&&(this.animator.stop(),this.animator=Ei(this._el.move,{top:this.data.pos.start.y,left:this.data.pos.start.x,duration:this.options.duration,easing:Du}))}_animateMomentum(){var e={x:this.data.new_pos.x,y:this.data.new_pos.y},r={duration:this.options.duration,easing:Du};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(e.y>this.options.constraint.bottom?e.y=this.options.constraint.bottom:e.y<this.options.constraint.top&&(e.y=this.options.constraint.top)),r.top=Math.floor(e.y)+"px"),this.options.enable.x&&(this.options.constraint.left&&e.x>=this.options.constraint.left&&(e.x=this.options.constraint.left),this.options.constraint.right&&e.x<this.options.constraint.right&&(e.x=this.options.constraint.right),r.left=Math.floor(e.x)+"px"),this.animator=Ei(this._el.move,r),this.fire("momentum",this.data)}}Sn(w_,In);class YC{constructor(e,r,i,s){this.language=s,this._el={parent:{},container:{},slider:{},slider_background:{},line:{},marker_container_mask:{},marker_container:{},marker_item_container:{},timeaxis:{},timeaxis_background:{}},this.collapsed=!1,typeof e=="object"?this._el.container=e:this._el.container=lc(e),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","application"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline_navigation")),this._el.container.setAttribute("aria-description",'Navigate between markers with arrow keys. Press "Home" for the first and "End" for the last markers'),this.config=r,this.options={width:600,height:600,duration:1e3,ease:Wo,has_groups:!1,optimal_tick_width:50,scale_factor:2,marker_padding:5,timenav_height_min:150,marker_height_min:30,marker_width_min:100,zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89]},this.animator=null,this.ready=!1,this._markers=[],this._eras=[],this.has_eras=!1,this._groups=[],this._calculated_row_height=100,this.current_id="",this.current_focused_id="",this.timescale={},this.timeaxis={},this.max_rows=6,this.animate_css=!1,this._swipable,Ze(this.options,i)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this._onLoaded()}positionMarkers(e){for(var r=0;r<this._markers.length;r++){var i=this.timescale.getPositionInfo(r);e?this._markers[r].setClass("tl-timemarker tl-timemarker-fast"):this._markers[r].setClass("tl-timemarker"),this._markers[r].setPosition({left:i.start}),this._markers[r].setWidth(i.width)}}updateDisplay(e,r,i){let s=!1;e&&(this.options.width==0&&e>0&&(s=!0),this.options.width=e),r&&r!=this.options.height&&(this.options.height=r,this.timescale=this._getTimeScale()),this._assignRowsToMarkers(),this._el.slider_background.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._el.slider_background.style.left=-(this.options.width/2)+"px",this._el.slider.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._swipable.updateConstraint({top:!1,bottom:!1,left:this.options.width/2,right:-(this.timescale.getPixelWidth()-this.options.width/2)}),s&&this._drawTimeline(),this.goToId(this.current_id,!0)}_getTimeScale(){var e=0;try{e=parseInt(this.options.marker_height_min)}catch{Ue("Invalid value for marker_height_min option."),e=30}return e==0&&(Ue("marker_height_min option must not be zero."),e=30),this.max_rows=Math.round((this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding)/e),this.max_rows<1&&(this.max_rows=1),new lE(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows})}_updateTimeScale(e){this.options.scale_factor=e,this._updateDrawTimeline()}zoomIn(){var e=l6(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(e)}zoomOut(){var e=u6(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(e)}setZoom(e){var r=this.options.zoom_sequence[e];typeof r=="number"?this.setZoomFactor(r):console.warn("Invalid zoom level. Please use an index number between 0 and "+(this.options.zoom_sequence.length-1))}setZoomFactor(e){e<=this.options.zoom_sequence[0]?this.fire("zoomtoggle",{zoom:"out",show:!1}):this.fire("zoomtoggle",{zoom:"out",show:!0}),e>=this.options.zoom_sequence[this.options.zoom_sequence.length-1]?this.fire("zoomtoggle",{zoom:"in",show:!1}):this.fire("zoomtoggle",{zoom:"in",show:!0}),e==0&&(console.warn("Zoom factor must be greater than zero. Using 0.1"),e=.1),this.options.scale_factor=e,this.goToId(this.current_id,!this._updateDrawTimeline(!0),!0)}_createGroups(){this._groups=[];var e=this.timescale.getGroupLabels();if(e){this.options.has_groups=!0;for(var r=0;r<e.length;r++)this._createGroup(e[r])}}_createGroup(e){var r=new $C(e);this._addGroup(r),this._groups.push(r)}_addGroup(e){e.addTo(this._el.container)}_positionGroups(){if(this.options.has_groups){var e=this.options.height-this._el.timeaxis_background.offsetHeight,r=Math.floor(e/this.timescale.getNumberOfRows()-this.options.marker_padding);this.timescale.getGroupLabels();for(var i=0,s=0;i<this._groups.length;i++){var a=Math.floor(s*(r+this.options.marker_padding)),o=!1;a>e-this.options.marker_padding&&(o=!0),this._groups[i].setRowPosition(a,this._calculated_row_height+this.options.marker_padding/2),this._groups[i].setAlternateRowColor(c6(i),o),s+=this._groups[i].data.rows}}}_addMarker(e){e.addTo(this._el.marker_item_container),e.on("markerclick",this._onMarkerClick,this),e.on("added",this._onMarkerAdded,this)}_createMarker(e,r){var i=new KC(e,this.options);this._addMarker(i),r<0?this._markers.push(i):this._markers.splice(r,0,i)}_createMarkers(e){for(var r=0;r<e.length;r++)this._createMarker(e[r],-1)}_removeMarker(e){e.removeFrom(this._el.marker_item_container)}_destroyMarker(e){this._removeMarker(this._markers[e]),this._markers.splice(e,1)}_calculateMarkerHeight(e){return e/this.timescale.getNumberOfRows()-this.options.marker_padding}_calculateRowHeight(e){return e/this.timescale.getNumberOfRows()}_calculateAvailableHeight(){return this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding}_calculateMinimumTimeNavHeight(){return this.timescale.getNumberOfRows()*this.options.marker_height_min+this._el.timeaxis_background.offsetHeight+this.options.marker_padding}getMinimumHeight(){return this._calculateMinimumTimeNavHeight()}_assignRowsToMarkers(){var e=this._calculateAvailableHeight(),r=this._calculateMarkerHeight(e);this._positionGroups(),this._calculated_row_height=this._calculateRowHeight(e);for(var i=0;i<this._markers.length;i++){this._markers[i].setHeight(r);var s=this.timescale.getPositionInfo(i).row,a=Math.floor(s*(r+this.options.marker_padding))+this.options.marker_padding,o=e-a+this.options.marker_padding;this._markers[i].setRowPosition(a,o)}}_resetMarkersActive(){for(var e=0;e<this._markers.length;e++)this._markers[e].setActive(!1)}_resetMarkersBlurListeners(){for(var e=0;e<this._markers.length;e++)this._markers[e].off("markerblur",this._onMarkerBlur,this)}_findMarkerIndex(e){var r=-1;return(typeof e=="string"||e instanceof String)&&(r=NC(e,this._markers,"unique_id",r)),r}_createEras(e){for(var r=0;r<e.length;r++){var i=e[r],s=new HC(i.start_date,i.end_date,i.headline,this.options);this._eras.push(s),s.addTo(this._el.marker_item_container),s.on("added",this._onEraAdded,this)}}_positionEras(e){for(var r=0,i=0;i<this._eras.length;i++){var s={start:0,end:0,width:0};s.start=this.timescale.getPosition(this._eras[i].start_date.getTime()),s.end=this.timescale.getPosition(this._eras[i].end_date.getTime()),s.width=s.end-s.start,e?this._eras[i].setClass("tl-timeera tl-timeera-fast"):this._eras[i].setClass("tl-timeera"),this._eras[i].setPosition({left:s.start}),this._eras[i].setWidth(s.width),r++,r>5&&(r=0),this._eras[i].setColor(r)}}createMarker(e,r){this._createMarker(e,r)}createMarkers(e){this._createMarkers(e)}destroyMarker(e){this._destroyMarker(e)}destroyMarkerId(e){this.destroyMarker(this._findMarkerIndex(e))}goTo(e,r,i){var s=this.options.ease,a=this.options.duration,o=e<0?0:e;this._resetMarkersActive(),e>=0&&e<this._markers.length&&this._markers[e].setActive(!0),this.animateMovement(o,r,i,a,s),e>=0&&e<this._markers.length?this.current_id=this.current_focused_id=this._markers[e].data.unique_id:this.current_id=this.current_focused_id="",this._setLabelWithCurrentMarker()}goToId(e,r,i){this.goTo(this._findMarkerIndex(e),r,i)}focusOn(e,r,i){const s=this.options.ease,a=this.options.duration,o=e<0?0:e;this.animateMovement(o,r,i,a,s),this._resetMarkersBlurListeners(),e>=0&&e<this._markers.length&&(this._markers[e].setFocus(),this.current_focused_id=this._markers[e].data.unique_id,this._markers[e].on("markerblur",this._onMarkerBlur,this))}focusNext(){const e=this._findMarkerIndex(this.current_focused_id);e+1<this._markers.length?this.focusOn(e+1):this.focusOn(e)}focusPrevious(){const e=this._findMarkerIndex(this.current_focused_id);e-1>=0?this.focusOn(e-1):this.focusOn(e)}animateMovement(e,r,i,s,a){this.animator&&this.animator.stop(),r?(this._el.slider.className="tl-timenav-slider",this._el.slider.style.left=-this._markers[e].getLeft()+this.options.width/2+"px"):i?(this._el.slider.className="tl-timenav-slider tl-timenav-slider-animate",this.animate_css=!0,this._el.slider.style.left=-this._markers[e].getLeft()+this.options.width/2+"px"):(this._el.slider.className="tl-timenav-slider",this.animator=Ei(this._el.slider,{left:-this._markers[e].getLeft()+this.options.width/2+"px",duration:s,easing:a})),e>=0&&e<this._markers.length?this.current_id=this._markers[e].data.unique_id:this.current_id="",this._dispatchVisibleTicksChange()}goToId(e,r,i){this.goTo(this._findMarkerIndex(e),r,i)}_dispatchVisibleTicksChange(){this.ticks_change_timeout&&(clearTimeout(this.ticks_change_timeout),this.ticks_change_timeout=null),this.ticks_change_timeout=setTimeout(()=>{const e=this.timeaxis.getVisibleTicks();this.fire("visible_ticks_change",{visible_ticks:e})},this.options.duration)}_onLoaded(){this.ready=!0,this.fire("loaded",this.config)}_onMarkerAdded(e){this.fire("dateAdded",this.config)}_onEraAdded(e){this.fire("eraAdded",this.config)}_onMarkerRemoved(e){this.fire("dateRemoved",this.config)}_onMarkerClick(e){this.goToId(e.unique_id),this.fire("change",{unique_id:e.unique_id})}_onMarkerBlur(e){this.current_focused_id!==this.current_id&&this.focusOn(this._findMarkerIndex(this.current_id))}_onMouseScroll(e){var r=0,i=0,s={right:-(this.timescale.getPixelWidth()-this.options.width/2),left:this.options.width/2};e||(e=window.event),e.originalEvent&&(e=e.originalEvent),typeof e.wheelDeltaX<"u"&&(r=e.wheelDeltaY/6,Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)?r=e.wheelDeltaX/6:r=0),r&&(e.preventDefault&&e.preventDefault(),e.returnValue=!1),i=parseInt(this._el.slider.style.left.replace("px",""))+r,i>s.left?i=s.left:i<s.right&&(i=s.right),this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1),this._el.slider.style.left=i+"px"}_onDragMove(e){this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1)}_onKeydown(e){switch(Ae.stopPropagation(e),e.key){case"ArrowUp":case"ArrowRight":{this.focusNext();break}case"ArrowDown":case"ArrowLeft":{this.focusPrevious();break}case"Home":{this.focusOn(0);break}case"End":{this.focusOn(this._markers.length-1);break}}}_drawTimeline(e){this.timescale=this._getTimeScale(),this.timeaxis.drawTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(e),this._assignRowsToMarkers(),this._createGroups(),this._positionGroups(),this.has_eras&&this._positionEras(e)}_updateDrawTimeline(e){var r=!1;if(e){var i=new lE(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows});this.timescale.getMajorScale()==i.getMajorScale()&&this.timescale.getMinorScale()==i.getMinorScale()&&(r=!0)}else r=!0;return r?(this.timescale=this._getTimeScale(),this.timeaxis.positionTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(),this._assignRowsToMarkers(),this._positionGroups(),this.has_eras&&this._positionEras(),this.updateDisplay()):this._drawTimeline(!0),r}_setLabelWithCurrentMarker(){const e=this._markers[this._findMarkerIndex(this.current_focused_id)],r=e&&e.ariaLabel?`, ${e.ariaLabel}, shown`:"";this._el.container.setAttribute("aria-label",`Timeline navigation ${r}`)}_initLayout(){this._el.line=de("div","tl-timenav-line",this._el.container),this._el.slider=de("div","tl-timenav-slider",this._el.container),this._el.slider_background=de("div","tl-timenav-slider-background",this._el.slider),this._el.marker_container_mask=de("div","tl-timenav-container-mask",this._el.slider),this._el.marker_container=de("div","tl-timenav-container",this._el.marker_container_mask),this._el.marker_item_container=de("div","tl-timenav-item-container",this._el.marker_container),this._el.timeaxis=de("div","tl-timeaxis",this._el.slider),this._el.timeaxis_background=de("div","tl-timeaxis-background",this._el.container),this.timeaxis=new WC(this._el.timeaxis,this.options,this.language),this._swipable=new w_(this._el.slider_background,this._el.slider,{enable:{x:!0,y:!1},constraint:{top:!1,bottom:!1,left:this.options.width/2,right:!1},snap:!1}),this._swipable.enable()}_initEvents(){this._swipable.on("dragmove",this._onDragMove,this),Ae.addListener(this._el.container,"mousewheel",this._onMouseScroll,this),Ae.addListener(this._el.container,"DOMMouseScroll",this._onMouseScroll,this),Ae.addListener(this._el.container,"keydown",this._onKeydown,this)}_initData(){this._createMarkers(this.config.events),this.config.eras&&this.config.eras.length>0&&(this.has_eras=!0,this._createEras(this.config.eras)),this._drawTimeline()}}Sn(YC,In,Ii,Ci);var _m=function(){function t(e,r){for(var i=0;i<r.length;i++){var s=r[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();function wm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(function(){if(typeof window>"u"||typeof Element>"u")return;var t=Array.prototype.slice,e=Element.prototype.matches||Element.prototype.msMatchesSelector,r=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","details","summary","iframe","object","embed","video","[contenteditable]"].join(","),i=function(){function c(h,f){wm(this,c),this._inertManager=f,this._rootElement=h,this._managedNodes=new Set,this._rootElement.hasAttribute("aria-hidden")?this._savedAriaHidden=this._rootElement.getAttribute("aria-hidden"):this._savedAriaHidden=null,this._rootElement.setAttribute("aria-hidden","true"),this._makeSubtreeUnfocusable(this._rootElement),this._observer=new MutationObserver(this._onMutation.bind(this)),this._observer.observe(this._rootElement,{attributes:!0,childList:!0,subtree:!0})}return _m(c,[{key:"destructor",value:function(){this._observer.disconnect(),this._rootElement&&(this._savedAriaHidden!==null?this._rootElement.setAttribute("aria-hidden",this._savedAriaHidden):this._rootElement.removeAttribute("aria-hidden")),this._managedNodes.forEach(function(f){this._unmanageNode(f.node)},this),this._observer=null,this._rootElement=null,this._managedNodes=null,this._inertManager=null}},{key:"_makeSubtreeUnfocusable",value:function(f){var p=this;o(f,function(D){return p._visitNode(D)});var m=document.activeElement;if(!document.body.contains(f)){for(var w=f,A=void 0;w;){if(w.nodeType===Node.DOCUMENT_FRAGMENT_NODE){A=w;break}w=w.parentNode}A&&(m=A.activeElement)}f.contains(m)&&(m.blur(),m===document.activeElement&&document.body.focus())}},{key:"_visitNode",value:function(f){if(f.nodeType===Node.ELEMENT_NODE){var p=f;p!==this._rootElement&&p.hasAttribute("inert")&&this._adoptInertRoot(p),(e.call(p,r)||p.hasAttribute("tabindex"))&&this._manageNode(p)}}},{key:"_manageNode",value:function(f){var p=this._inertManager.register(f,this);this._managedNodes.add(p)}},{key:"_unmanageNode",value:function(f){var p=this._inertManager.deregister(f,this);p&&this._managedNodes.delete(p)}},{key:"_unmanageSubtree",value:function(f){var p=this;o(f,function(m){return p._unmanageNode(m)})}},{key:"_adoptInertRoot",value:function(f){var p=this._inertManager.getInertRoot(f);p||(this._inertManager.setInert(f,!0),p=this._inertManager.getInertRoot(f)),p.managedNodes.forEach(function(m){this._manageNode(m.node)},this)}},{key:"_onMutation",value:function(f,p){f.forEach(function(m){var w=m.target;if(m.type==="childList")t.call(m.addedNodes).forEach(function(D){this._makeSubtreeUnfocusable(D)},this),t.call(m.removedNodes).forEach(function(D){this._unmanageSubtree(D)},this);else if(m.type==="attributes"){if(m.attributeName==="tabindex")this._manageNode(w);else if(w!==this._rootElement&&m.attributeName==="inert"&&w.hasAttribute("inert")){this._adoptInertRoot(w);var A=this._inertManager.getInertRoot(w);this._managedNodes.forEach(function(D){w.contains(D.node)&&A._manageNode(D.node)})}}},this)}},{key:"managedNodes",get:function(){return new Set(this._managedNodes)}},{key:"hasSavedAriaHidden",get:function(){return this._savedAriaHidden!==null}},{key:"savedAriaHidden",set:function(f){this._savedAriaHidden=f},get:function(){return this._savedAriaHidden}}]),c}(),s=function(){function c(h,f){wm(this,c),this._node=h,this._overrodeFocusMethod=!1,this._inertRoots=new Set([f]),this._savedTabIndex=null,this._destroyed=!1,this.ensureUntabbable()}return _m(c,[{key:"destructor",value:function(){if(this._throwIfDestroyed(),this._node&&this._node.nodeType===Node.ELEMENT_NODE){var f=this._node;this._savedTabIndex!==null?f.setAttribute("tabindex",this._savedTabIndex):f.removeAttribute("tabindex"),this._overrodeFocusMethod&&delete f.focus}this._node=null,this._inertRoots=null,this._destroyed=!0}},{key:"_throwIfDestroyed",value:function(){if(this.destroyed)throw new Error("Trying to access destroyed InertNode")}},{key:"ensureUntabbable",value:function(){if(this.node.nodeType===Node.ELEMENT_NODE){var f=this.node;if(e.call(f,r)){if(f.tabIndex===-1&&this.hasSavedTabIndex)return;f.hasAttribute("tabindex")&&(this._savedTabIndex=f.tabIndex),f.setAttribute("tabindex","-1"),f.nodeType===Node.ELEMENT_NODE&&(f.focus=function(){},this._overrodeFocusMethod=!0)}else f.hasAttribute("tabindex")&&(this._savedTabIndex=f.tabIndex,f.removeAttribute("tabindex"))}}},{key:"addInertRoot",value:function(f){this._throwIfDestroyed(),this._inertRoots.add(f)}},{key:"removeInertRoot",value:function(f){this._throwIfDestroyed(),this._inertRoots.delete(f),this._inertRoots.size===0&&this.destructor()}},{key:"destroyed",get:function(){return this._destroyed}},{key:"hasSavedTabIndex",get:function(){return this._savedTabIndex!==null}},{key:"node",get:function(){return this._throwIfDestroyed(),this._node}},{key:"savedTabIndex",set:function(f){this._throwIfDestroyed(),this._savedTabIndex=f},get:function(){return this._throwIfDestroyed(),this._savedTabIndex}}]),c}(),a=function(){function c(h){if(wm(this,c),!h)throw new Error("Missing required argument; InertManager needs to wrap a document.");this._document=h,this._managedNodes=new Map,this._inertRoots=new Map,this._observer=new MutationObserver(this._watchForInert.bind(this)),l(h.head||h.body||h.documentElement),h.readyState==="loading"?h.addEventListener("DOMContentLoaded",this._onDocumentLoaded.bind(this)):this._onDocumentLoaded()}return _m(c,[{key:"setInert",value:function(f,p){if(p){if(this._inertRoots.has(f))return;var m=new i(f,this);if(f.setAttribute("inert",""),this._inertRoots.set(f,m),!this._document.body.contains(f))for(var w=f.parentNode;w;)w.nodeType===11&&l(w),w=w.parentNode}else{if(!this._inertRoots.has(f))return;var A=this._inertRoots.get(f);A.destructor(),this._inertRoots.delete(f),f.removeAttribute("inert")}}},{key:"getInertRoot",value:function(f){return this._inertRoots.get(f)}},{key:"register",value:function(f,p){var m=this._managedNodes.get(f);return m!==void 0?m.addInertRoot(p):m=new s(f,p),this._managedNodes.set(f,m),m}},{key:"deregister",value:function(f,p){var m=this._managedNodes.get(f);return m?(m.removeInertRoot(p),m.destroyed&&this._managedNodes.delete(f),m):null}},{key:"_onDocumentLoaded",value:function(){var f=t.call(this._document.querySelectorAll("[inert]"));f.forEach(function(p){this.setInert(p,!0)},this),this._observer.observe(this._document.body||this._document.documentElement,{attributes:!0,subtree:!0,childList:!0})}},{key:"_watchForInert",value:function(f,p){var m=this;f.forEach(function(w){switch(w.type){case"childList":t.call(w.addedNodes).forEach(function(T){if(T.nodeType===Node.ELEMENT_NODE){var x=t.call(T.querySelectorAll("[inert]"));e.call(T,"[inert]")&&x.unshift(T),x.forEach(function(b){this.setInert(b,!0)},m)}},m);break;case"attributes":if(w.attributeName!=="inert")return;var A=w.target,D=A.hasAttribute("inert");m.setInert(A,D);break}},this)}}]),c}();function o(c,h,f){if(c.nodeType==Node.ELEMENT_NODE){var p=c;h&&h(p);var m=p.shadowRoot;if(m){o(m,h);return}if(p.localName=="content"){for(var w=p,A=w.getDistributedNodes?w.getDistributedNodes():[],D=0;D<A.length;D++)o(A[D],h);return}if(p.localName=="slot"){for(var T=p,x=T.assignedNodes?T.assignedNodes({flatten:!0}):[],b=0;b<x.length;b++)o(x[b],h);return}}for(var P=c.firstChild;P!=null;)o(P,h),P=P.nextSibling}function l(c){if(!c.querySelector("style#inert-style, link#inert-style")){var h=document.createElement("style");h.setAttribute("id","inert-style"),h.textContent=`
[inert] {
  pointer-events: none;
  cursor: default;
}

[inert], [inert] * {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
`,c.appendChild(h)}}if(!HTMLElement.prototype.hasOwnProperty("inert")){var u=new a(document);Object.defineProperty(HTMLElement.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(h){u.setInert(this,h)}})}})();class XC{constructor(e,r,i,s){s&&this.setLanguage(s),this._el={container:{},scroll_container:{},background:{},content_container:{},content:{}},this._media=null,this._mediaclass={},this._text={},this._background_media=null,this._state={loaded:!1},this.has={headline:!1,text:!1,media:!1,title:!1,background:{image:!1,color:!1,color_value:""}},this.has.title=i,this.data={unique_id:null,background:null,start_date:null,end_date:null,location:null,text:null,media:null,autolink:!0},this.options={duration:1e3,slide_padding_lr:40,ease:Uf,width:600,height:600,skinny_size:650,media_name:""},this.active=!1,this.animator={},Ze(this.options,r),Ze(this.data,e),this._initLayout(),this._initEvents()}show(){this.animator=Ei(this._el.slider_container,{left:-(this._el.container.offsetWidth*n)+"px",duration:this.options.duration,easing:this.options.ease})}hide(){}setActive(e){this.active=e,this.active?(this.data.background&&this.fire("background_change",this.has.background),this._setInteractive(!0),this.loadMedia()):(this.stopMedia(),this._setInteractive(!1))}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r,i){var s,a=this.options.slide_padding_lr,o=this.options.slide_padding_lr;e?this.options.width=e:this.options.width=this._el.container.offsetWidth,s=this.options.width-this.options.slide_padding_lr*2,ya&&this.options.width<=this.options.skinny_size?(a=0,o=0,s=this.options.width):i=="landscape"||this.options.width<=this.options.skinny_size&&(a=50,o=50,s=this.options.width-a-o),this._el.content.style.paddingLeft=a+"px",this._el.content.style.paddingRight=o+"px",this._el.content.style.width=s+"px",r?this.options.height=r:this.options.height=this._el.container.offsetHeight,this._media&&(!this.has.text&&this.has.headline?this._media.updateDisplay(s,this.options.height-this._text.headlineHeight(),i):!this.has.text&&!this.has.headline?this._media.updateDisplay(s,this.options.height,i):this.options.width<=this.options.skinny_size?this._media.updateDisplay(s,this.options.height,i):this._media.updateDisplay(s/2,this.options.height,i)),this._updateBackgroundDisplay()}loadMedia(){var e=this;this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0),this._background_media&&!this._background_media._state.loaded&&(this._background_media.on("loaded",function(){e._updateBackgroundDisplay()}),this._background_media.loadMedia())}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getBackground(){return this.has.background}scrollToTop(){this._el.container.scrollTop=0}getFormattedDate(){if(qn(this.data.display_date).length>0)return this.data.display_date;var e="";return this.has.title||(this.data.end_date&&(e=" &mdash; "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(e=this.data.start_date.getDisplayDate(this.getLanguage())+e)),e}_initLayout(){if(this._el.container=de("div","tl-slide"),this.has.title&&(this._el.container.className="tl-slide tl-slide-titleslide"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._el.scroll_container=de("div","tl-slide-scrollable-container",this._el.container),this._el.content_container=de("div","tl-slide-content-container",this._el.scroll_container),this._el.content=de("div","tl-slide-content",this._el.content_container),this._el.background=de("div","tl-slide-background",this._el.container),this.data.background){if(this.data.background.url){var e=Uh(this.data.background,!0);e&&(this._background_media=new e.cls(this.data.background,{background:1}),this.has.background.image=!0,this._el.container.className+=" tl-full-image-background",this.has.background.color_value="#000",this._el.background.style.display="block"),this.data.background.alt&&(this._el.background.setAttribute("role","img"),this._el.background.setAttribute("aria-label",this.data.background.alt))}this.data.background.color&&(this.has.background.color=!0,this._el.container.className+=" tl-full-color-background",this.has.background.color_value=this.data.background.color),this.data.background.text_background&&(this._el.container.className+=" tl-text-background")}this.data.media&&this.data.media.url&&this.data.media.url!=""&&(this.has.media=!0),this.data.text&&this.data.text.text&&(this.has.text=!0),this.data.text&&this.data.text.headline&&(this.has.headline=!0),this.has.media&&(this.data.media.mediatype=Uh(this.data.media),this.options.media_name=this.data.media.mediatype.name,this.options.media_type=this.data.media.mediatype.type,this.options.autolink=this.data.autolink,this._media=new this.data.media.mediatype.cls(this.data.media,this.options,this.getLanguage())),(this.has.text||this.has.headline)&&(this._text=new qC(this.data.text,{title:this.has.title,language:this.getLanguage(),autolink:this.data.autolink}),this._text.addDateText(this.getFormattedDate())),!this.has.text&&!this.has.headline&&this.has.media?(this._el.container.classList.add("tl-slide-media-only"),this._media.addTo(this._el.content)):this.has.headline&&this.has.media&&!this.has.text?(this._el.container.classList.add("tl-slide-media-only"),this._text.addTo(this._el.content),this._media.addTo(this._el.content)):this.has.text&&this.has.media?(this._text.addTo(this._el.content),this._media.addTo(this._el.content)):(this.has.text||this.has.headline)&&(this._el.container.classList.add("tl-slide-text-only"),this._text.addTo(this._el.content)),this.onLoaded()}_initEvents(){}_updateBackgroundDisplay(){this._background_media&&this._background_media._state.loaded&&(this._el.background.style.backgroundImage="url('"+this._background_media.getImageURL(this.options.width,this.options.height)+"')")}_setInteractive(e){e?this._el.container.removeAttribute("inert"):this._el.container.setAttribute("inert",!0)}}Sn(XC,Ci,In,Ii);class hv{constructor(e,r,i){this._el={container:{},content_container:{},icon:{},title:{},description:{}},this.mediatype={},this.data={title:"Navigation",description:"Description",date:"Date"},this.options={direction:"previous"},this.animator=null,Ze(this.options,r),Ze(this.data,e),this._el.container=Fl("tl-slidenav-"+this.options.direction),ya&&this._el.container.setAttribute("ontouchstart"," "),this._initLayout(),this._initEvents(),i&&i.appendChild(this._el.container)}update(e){var r={title:"",description:"",date:e.getFormattedDate()};e.data.text&&e.data.text.headline&&(r.title=e.data.text.headline),this._update(r)}setColor(e){e?this._el.content_container.className="tl-slidenav-content-container tl-slidenav-inverted":this._el.content_container.className="tl-slidenav-content-container"}_onMouseClick(){this.fire("clicked",this.options)}_update(e){this.data=Ze(this.data,e);const r=oo(this.data.title);this._el.title.innerHTML=r;const i=oo(this.data.date);this._el.description.innerHTML=i,this._el.container.setAttribute("aria-label",`${this.options.direction}, ${r}, ${i}`)}_initLayout(){this._el.content_container=de("div","tl-slidenav-content-container",this._el.container),this._el.icon=de("div","tl-slidenav-icon",this._el.content_container),this._el.title=de("div","tl-slidenav-title",this._el.content_container),this._el.description=de("div","tl-slidenav-description",this._el.content_container),this._el.icon.innerHTML="&nbsp;",this._update()}_initEvents(){Ae.addListener(this._el.container,"click",this._onMouseClick,this)}}Sn(hv,Ii,In);class QC{constructor(e,r,i,s){s&&this.setLanguage(s),this._el={container:{},background:{},slider_container_mask:{},slider_container:{},slider_item_container:{}},this._nav={},this._nav.previous={},this._nav.next={},this.slide_spacing=0,this._slides=[],this._swipable,this.preloadTimer,this._message,this.current_id="",this.data={},this.options={id:"",layout:"portrait",width:600,height:600,default_bg_color:{r:255,g:255,b:255},slide_padding_lr:40,start_at_slide:1,slide_default_fade:"0%",duration:1e3,ease:Wo,dragging:!0,trackResize:!0},typeof e=="object"?(this._el.container=e,this.options.id=la(6,"tl")):(this.options.id=e,this._el.container=lc(e)),this._el.container.id||(this._el.container.id=this.options.id),this.animator=null,Ze(this.options,i),Ze(this.data,r)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this.goTo(this.options.start_at_slide),this._onLoaded()}_addSlide(e){e.addTo(this._el.slider_item_container),e.on("added",this._onSlideAdded,this),e.on("background_change",this._onBackgroundChange,this)}_createSlide(e,r,i){var s=new XC(e,this.options,r,this.getLanguage());this._addSlide(s),i<0?this._slides.push(s):this._slides.splice(i,0,s)}_createSlides(e){for(var r=0;r<e.length;r++)e[r].unique_id==""&&(e[r].unique_id=la(6,"tl-slide")),this._createSlide(e[r],!1,-1)}_removeSlide(e){e.removeFrom(this._el.slider_item_container),e.off("added",this._onSlideRemoved,this),e.off("background_change",this._onBackgroundChange)}_destroySlide(e){this._removeSlide(this._slides[e]),this._slides.splice(e,1)}_findSlideIndex(e){var r=e;return(typeof e=="string"||e instanceof String)&&(r=NC(e,this._slides,"unique_id")),r}updateDisplay(e,r,i,s){var a,o;typeof s>"u"?o=this.options.layout:o=s,this.options.layout=o,e?this.options.width=e:this.options.width=this._el.container.offsetWidth,r?this.options.height=r:this.options.height=this._el.container.offsetHeight,this.slide_spacing=this.options.width*2,a=this.options.height/2,this._nav.next.setPosition({top:a}),this._nav.previous.setPosition({top:a});for(var l=0;l<this._slides.length;l++)this._slides[l].updateDisplay(this.options.width,this.options.height,o),this._slides[l].setPosition({left:this.slide_spacing*l,top:0});this.goToId(this.current_id,!0,!0)}createSlide(e,r){this._createSlide(e,!1,r)}createSlides(e){this._createSlides(e)}destroySlide(e){this._destroySlide(e)}destroySlideId(e){this.destroySlide(this._findSlideIndex(e))}goTo(e,r,i){e=parseInt(e),isNaN(e)&&(e=0);var s=this;this.changeBackground({color_value:"",image:!1}),this.preloadTimer&&clearTimeout(this.preloadTimer);for(var a=0;a<this._slides.length;a++)this._slides[a].setActive(!1);e<this._slides.length&&e>=0&&(this.current_id=this._slides[e].data.unique_id,this.animator&&this.animator.stop(),this._swipable&&this._swipable.stopMomentum(),r?(this._el.slider_container.style.left=-(this.slide_spacing*e)+"px",this._onSlideChange(i)):this.animator=Ei(this._el.slider_container,{left:-(this.slide_spacing*e)+"px",duration:this.options.duration,easing:this.options.ease,complete:this._onSlideChange(i)}),this._slides[e].setActive(!0),this._slides[e+1]?(this.showNav(this._nav.next,!0),this._nav.next.update(this._slides[e+1])):this.showNav(this._nav.next,!1),this._slides[e-1]?(this.showNav(this._nav.previous,!0),this._nav.previous.update(this._slides[e-1])):this.showNav(this._nav.previous,!1),this.preloadTimer=setTimeout(function(){s.preloadSlides(e)},this.options.duration))}goToId(e,r,i){this.goTo(this._findSlideIndex(e),r,i)}preloadSlides(e){this._slides[e+1]&&(this._slides[e+1].loadMedia(),this._slides[e+1].scrollToTop()),this._slides[e+2]&&(this._slides[e+2].loadMedia(),this._slides[e+2].scrollToTop()),this._slides[e-1]&&(this._slides[e-1].loadMedia(),this._slides[e-1].scrollToTop()),this._slides[e-2]&&(this._slides[e-2].loadMedia(),this._slides[e-2].scrollToTop())}next(){var e=this._findSlideIndex(this.current_id);e+1<this._slides.length?this.goTo(e+1):this.goTo(e)}previous(){var e=this._findSlideIndex(this.current_id);e-1>=0?this.goTo(e-1):this.goTo(e)}showNav(e,r){this.options.width<=500&&ya?e.hide():r?e.show():e.hide()}changeBackground(e){var r={r:256,g:256,b:256};e.color_value&&e.color_value!=""?(r=RC(e.color_value),r||(Ue("Invalid color value "+e.color_value),r=this.options.default_bg_color)):(r=this.options.default_bg_color,e.color_value="rgb("+r.r+" , "+r.g+", "+r.b+")"),r.r+""+r.g+r.b,this._el.background.style.backgroundImage="none",e.color_value?this._el.background.style.backgroundColor=e.color_value:this._el.background.style.backgroundColor="transparent",r.r<255||r.g<255||r.b<255||e.image?(this._nav.next.setColor(!0),this._nav.previous.setColor(!0)):(this._nav.next.setColor(!1),this._nav.previous.setColor(!1))}_updateDrawSlides(){for(var e=this.options.layout,r=0;r<this._slides.length;r++)this._slides[r].updateDisplay(this.options.width,this.options.height,e),this._slides[r].setPosition({left:this.slide_spacing*r,top:0});this.goToId(this.current_id,!0,!1)}_initLayout(){this._el.container.classList.add("tl-storyslider"),this._nav.previous=new hv({title:"Previous",description:"description"},{direction:"previous"},this._el.container),this._nav.next=new hv({title:"Next",description:"description"},{direction:"next"},this._el.container),this._el.slider_container_mask=de("div","tl-slider-container-mask",this._el.container),this._el.background=de("div","tl-slider-background tl-animate",this._el.container),this._el.slider_container=de("div","tl-slider-container tlanimate",this._el.slider_container_mask),this._el.slider_item_container=de("div","tl-slider-item-container",this._el.slider_container),this._el.slider_container.setAttribute("aria-live","polite"),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this._el.slider_container.style.left="0px",qr&&(this._swipable=new w_(this._el.slider_container_mask,this._el.slider_container,{enable:{x:!0,y:!1},snap:!0}),this._swipable.enable(),this._message=new Hf(this._el.container,{message_class:"tl-message-full",message_icon_class:"tl-icon-swipe-left"},this.getLanguage()),this._message.updateMessage(this._("swipe_to_navigate")),this._message.addTo(this._el.container))}_initEvents(){this._nav.next.on("clicked",this._onNavigation,this),this._nav.previous.on("clicked",this._onNavigation,this),this._message&&this._message.on("clicked",this._onMessageClick,this),this._swipable&&(this._swipable.on("swipe_left",this._onNavigation,this),this._swipable.on("swipe_right",this._onNavigation,this),this._swipable.on("swipe_nodirection",this._onSwipeNoDirection,this))}_initData(){this.data.title&&this._createSlide(this.data.title,!0,-1),this._createSlides(this.data.events)}_onBackgroundChange(e){var r=this._findSlideIndex(this.current_id),i=this._slides[r].getBackground();this.changeBackground(e),this.fire("colorchange",i)}_onMessageClick(e){this._message.hide()}_onSwipeNoDirection(e){this.goToId(this.current_id)}_onNavigation(e){e.direction=="next"||e.direction=="left"?this.next():(e.direction=="previous"||e.direction=="right")&&this.previous(),this.fire("nav_"+e.direction,this.data)}_onSlideAdded(e){Ue("slideadded"),this.fire("slideAdded",this.data)}_onSlideRemoved(e){this.fire("slideRemoved",this.data)}_onSlideChange(e){e||this.fire("change",{unique_id:this.current_id})}_onMouseClick(e){}_fireMouseEvent(e){if(this._loaded){var r=e.type;r=r==="mouseenter"?"mouseover":r==="mouseleave"?"mouseout":r,this.hasEventListeners(r)&&(r==="contextmenu"&&Ae.preventDefault(e),this.fire(r,{latlng:"something",layerPoint:"something else"}))}}_onLoaded(){this.fire("loaded",this.data)}}Sn(QC,Ci,In);class JC{constructor(e,r,i,s){this._el={parent:{},container:{},button_forwardtoend:{},button_backtostart:{},button_zoomin:{},button_zoomout:{},arrow:{},line:{},coverbar:{},grip:{}},this.collapsed=!1,typeof e=="object"?this._el.container=e:this._el.container=lc(e),r&&(this._el.parent=r),this.data={visible_ticks_dates:{}},this.options={width:600,height:600,duration:1e3,ease:Wo,menubar_default_y:0},this.animator={},this.setLanguage(s),Ze(this.options,i),this._initLayout(),this._initEvents()}show(e){this.options.duration}hide(e){}toogleZoomIn(e){e?this._el.button_zoomin.removeAttribute("disabled"):this._el.button_zoomin.setAttribute("disabled",!0)}toogleZoomOut(e){e?this._el.button_zoomout.removeAttribute("disabled"):this._el.button_zoomout.setAttribute("disabled",!0)}changeVisibleTicks(e){const r=e.minor;if(!r.length){this.data.visible_ticks_dates={};return}const s=r[0].date.getFullYear(),o=r[r.length-1].date.getFullYear();this.data.visible_ticks_dates={start:s,end:o},this._updateZoomAriaLabels()}setSticky(e){this.options.menubar_default_y=e}setColor(e){e?this._el.container.className="tl-menubar tl-menubar-inverted":this._el.container.className="tl-menubar"}updateDisplay(e,r,i,s){this._updateDisplay(e,r,i,s)}_onButtonZoomIn(e){this.fire("zoom_in",e)}_onButtonZoomOut(e){this.fire("zoom_out",e)}_onButtonForwardToEnd(e){this.fire("forward_to_end",e)}_onButtonBackToStart(e){this.fire("back_to_start",e)}_initLayout(){this._el.button_zoomin=Fl("tl-menubar-button",this._el.container),this._el.button_zoomout=Fl("tl-menubar-button",this._el.container),this._el.button_forwardtoend=Fl("tl-menubar-button",this._el.container),this._el.button_backtostart=Fl("tl-menubar-button",this._el.container),ya&&this._el.container.setAttribute("ontouchstart"," "),this._el.button_backtostart.innerHTML="<span class='tl-icon-goback'></span>",this._el.button_backtostart.setAttribute("aria-label",this._("return_to_title")),this._el.button_forwardtoend.innerHTML="<span class='tl-icon-goend'></span>",this._el.button_forwardtoend.setAttribute("aria-label",this._("go_to_end")),this._el.button_zoomin.innerHTML="<span class='tl-icon-zoom-in'></span>",this._el.button_zoomin.setAttribute("aria-label",this._("zoom_in")),this._el.button_zoomout.innerHTML="<span class='tl-icon-zoom-out'></span>",this._el.button_zoomout.setAttribute("aria-label",this._("zoom_out"))}_initEvents(){Ae.addListener(this._el.button_forwardtoend,"click",this._onButtonForwardToEnd,this),Ae.addListener(this._el.button_backtostart,"click",this._onButtonBackToStart,this),Ae.addListener(this._el.button_zoomin,"click",this._onButtonZoomIn,this),Ae.addListener(this._el.button_zoomout,"click",this._onButtonZoomOut,this)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}_updateZoomAriaLabels(){Object.keys(this.data.visible_ticks_dates).length==0?(this._el.button_zoomin.setAttribute("aria-description",""),this._el.button_zoomout.setAttribute("aria-description","")):(this._el.button_zoomin.setAttribute("aria-description",this._("aria_label_zoomin",this.data.visible_ticks_dates)),this._el.button_zoomout.setAttribute("aria-description",this._("aria_label_zoomout",this.data.visible_ticks_dates)))}}Sn(JC,Ii,In,Ci);let fv=null;if(document){let t=document.getElementsByTagName("script");t&&t.length>0&&(fv=t[t.length-1].src)}function B5(t){return function(e){if(t.config){var r=e.key,i=t._getSlideIndex(self.current_id),s=t.config.events.length-1,a=t.config.title?s+1:s,o=0;r=="ArrowLeft"?i!=o&&t.goToPrev():r=="ArrowRight"&&i!=a&&t.goToNext()}}}class ZC{constructor(e,r,i){if(i||(i={}),this.ready=!1,this._el={container:lc(e),storyslider:{},timenav:{},menubar:{}},i.lang&&!i.language&&(i.language=i.lang),this.language=__,this._storyslider={},this._timenav={},this._menubar={},this._loaded={storyslider:!1,timenav:!1},this.config=null,this.options={script_path:"https://cdn.knightlab.com/libs/timeline3/latest/js/",height:this._el.container.offsetHeight,width:this._el.container.offsetWidth,debug:!1,font:"default",is_embed:!1,is_full_embed:!1,hash_bookmark:!1,default_bg_color:{r:255,g:255,b:255},scale_factor:2,layout:"landscape",timenav_position:"bottom",optimal_tick_width:60,base_class:"tl-timeline",timenav_height:null,timenav_height_percentage:25,timenav_mobile_height_percentage:40,timenav_height_min:175,marker_height_min:30,marker_width_min:100,marker_padding:5,start_at_slide:0,start_at_end:!1,menubar_height:0,skinny_size:650,medium_size:800,use_bc:!1,duration:1e3,ease:Wo,dragging:!0,trackResize:!0,map_type:"stamen:toner-lite",slide_padding_lr:100,slide_default_fade:"0%",zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89],language:"en",ga_measurement_id:null,ga_property_id:null,track_events:["back_to_start","nav_next","nav_previous","zoom_in","zoom_out"],theme:null,sheets_proxy:"https://sheets-proxy.knightlab.com/proxy/",soundcite:!1},this.animator_timenav=null,this.animator_storyslider=null,this.animator_menubar=null,this.message=new Hf(this._el.container,{message_class:"tl-message-full"}),typeof i.default_bg_color=="string"){var s=RC(i.default_bg_color);s?i.default_bg_color=s:(delete i.default_bg_color,Ue("Invalid default background color. Ignoring."))}Ze(this.options,i),this.options.script_path||(this.options.script_path=this.determineScriptPath()),i.soundcite&&this.on("ready",()=>{Ue("Loading Soundcite resources "),ym("https://cdn.knightlab.com/libs/soundcite/latest/css/player.css"),ua("https://cdn.knightlab.com/libs/soundcite/latest/js/soundcite.min.js")}),this._loadStyles(),document.addEventListener("keydown",B5(this)),window.addEventListener("resize",(function(a){this.updateDisplay()}).bind(this)),this.options.debug&&s6(console.log),this._el.container.classList.add("tl-timeline"),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","region"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline")),this.options.is_embed&&this._el.container.classList.add("tl-timeline-embed"),this.options.is_full_embed&&this._el.container.classList.add("tl-timeline-full-embed"),this._loadLanguage(r)}_loadStyles(){let e=null,r=null;if(this.options.font&&(this.options.font.indexOf("http")==0||this.options.font.match(/\.css$/)))e=this.options.font;else if(this.options.font){let i="../css/fonts/font."+this.options.font.toLowerCase()+".css";e=new URL(i,this.options.script_path).toString()}if(e&&ym(e),this.options.theme&&(this.options.theme.indexOf("http")==0||this.options.theme.match(/\.css$/)))r=this.options.theme;else if(this.options.theme){let i="../css/themes/timeline.theme."+this.options.theme.toLowerCase()+".css";r=new URL(i,this.options.script_path).toString()}r&&ym(r)}_loadLanguage(e){try{var r=this.options.language,i=this.options.script_path;x6(r,i).then(s=>{s?(this.language=s,this.message.setLanguage(this.language),this.showMessage(this._("loading_timeline"))):this.showMessage(`Error loading ${r}`),this._initData(e)})}catch(s){this.showMessage(this._translateError(s))}}_initData(e){typeof e=="string"?s5(e,{callback:(function(r){this.setConfig(r)}).bind(this),sheets_proxy:this.options.sheets_proxy}):qs==e.constructor?this.setConfig(e):this.setConfig(new qs(e))}_translateError(e){return e.hasOwnProperty("stack")&&Ue(e.stack),e.message_key?this._(e.message_key)+(e.detail?" ["+e.detail+"]":""):e}showMessage(e){this.message?this.message.updateMessage(e):(Ue("No message display available."),Ue(e))}determineScriptPath(){let e=null;if(fv)e=fv;else{let r=document.getElementById("timeline-script-tag");r&&(e=r.src)}if(!e){let r=document.getElementsByTagName("script");for(let i=r.length-1;i>=0;i--)if(r[i].src){e=r[i].src;break}}return e?e.substr(0,e.lastIndexOf("/")+1):""}setConfig(e){if(this.config=e,this.config.isValid()&&(this.config.validate(),this._validateOptions()),this.config.isValid())try{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this._onDataLoaded.bind(this)):this._onDataLoaded()}catch(a){this.showMessage("<strong>"+this._("error")+":</strong> "+this._translateError(a))}else{for(var r=[],i=0,s=this.config.getErrors();i<s.length;i++)r.push(this._translateError(s[i]));this.showMessage("<strong>"+this._("error")+":</strong> "+r.join("<br>"))}}_onDataLoaded(){this.fire("dataloaded"),this._initLayout(),this._initEvents(),this._initAnalytics(),this.message&&this.message.hide();let e=(i,s)=>{i.reduce((a,o)=>a||o.isIntersecting,!1)&&this.updateDisplay()};new IntersectionObserver(e.bind(this)).observe(this._el.container),this.ready=!0,this.fire("ready")}_initLayout(){this.message.removeFrom(this._el.container),this._el.container.innerHTML="",this.options.timenav_position=="top"?(this._el.timenav=de("div","tl-timenav",this._el.container),this._el.menubar=de("div","tl-menubar",this._el.container),this._el.storyslider=de("div","tl-storyslider",this._el.container)):(this._el.storyslider=de("div","tl-storyslider",this._el.container),this._el.timenav=de("div","tl-timenav",this._el.container),this._el.menubar=de("div","tl-menubar",this._el.container)),this._el.attribution=de("div","tl-attribution",this._el.container),this._el.attribution.innerHTML="<a href='https://timeline.knightlab.com' target='_blank' rel='noopener'><span class='tl-knightlab-logo'></span>TimelineJS</a>",this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.timenav_height=this._calculateTimeNavHeight(this.options.timenav_height),this._timenav=new YC(this._el.timenav,this.config,this.options,this.language),this._timenav.on("loaded",this._onTimeNavLoaded,this),this._timenav.options.height=this.options.timenav_height,this._timenav.init(),this.options.initial_zoom&&this.setZoom(this.options.initial_zoom),this._storyslider=new QC(this._el.storyslider,this.config,this.options,this.language),this._el.storyslider.setAttribute("role","group"),this._el.storyslider.setAttribute("aria-label",this._("aria_label_timeline_content")),this._storyslider.on("loaded",this._onStorySliderLoaded,this),this._storyslider.init(),this._menubar=new JC(this._el.menubar,this._el.container,this.options,this.getLanguage()),this.options.layout=="portrait"?this.options.storyslider_height=this.options.height-this.options.timenav_height-1:this.options.storyslider_height=this.options.height-1,this._updateDisplay()}_initEvents(){this._timenav.on("change",this._onTimeNavChange,this),this._timenav.on("zoomtoggle",this._onZoomToggle,this),this._timenav.on("visible_ticks_change",this._onVisibleTicksChange,this),this._storyslider.on("change",this._onSlideChange,this),this._storyslider.on("colorchange",this._onColorChange,this),this._storyslider.on("nav_next",this._onStorySliderNext,this),this._storyslider.on("nav_previous",this._onStorySliderPrevious,this),this._menubar.on("zoom_in",this._onZoomIn,this),this._menubar.on("zoom_out",this._onZoomOut,this),this._menubar.on("forward_to_end",this._onForwardToEnd,this),this._menubar.on("back_to_start",this._onBackToStart,this)}_onColorChange(e){this.fire("color_change",{unique_id:this.current_id},this)}_onSlideChange(e){this.current_id!=e.unique_id&&(this.current_id=e.unique_id,this._timenav.goToId(this.current_id),this._onChange(e))}_onTimeNavChange(e){this.current_id!=e.unique_id&&(this.current_id=e.unique_id,this._storyslider.goToId(this.current_id),this._onChange(e))}_onZoomToggle(e){e.zoom=="in"?this._menubar.toogleZoomIn(e.show):e.zoom=="out"&&this._menubar.toogleZoomOut(e.show)}_onChange(e){this.fire("change",{unique_id:this.current_id},this),this.options.hash_bookmark&&this.current_id&&this._updateHashBookmark(this.current_id)}_onVisibleTicksChange(e){this._menubar.changeVisibleTicks(e.visible_ticks)}_onForwardToEnd(e){this.goToEnd(),this.fire("forward_to_end",{unique_id:this.current_id},this)}_onBackToStart(e){this.goToStart(),this.fire("back_to_start",{unique_id:this.current_id},this)}_onZoomIn(e){this._timenav.zoomIn(),this.fire("zoom_in",{zoom_level:this._timenav.options.scale_factor},this)}_onZoomOut(e){this._timenav.zoomOut(),this.fire("zoom_out",{zoom_level:this._timenav.options.scale_factor},this)}_onTimeNavLoaded(){this._loaded.timenav=!0,this._onLoaded()}_onStorySliderLoaded(){this._loaded.storyslider=!0,this._onLoaded()}_onStorySliderNext(e){this.fire("nav_next",e)}_onStorySliderPrevious(e){this.fire("nav_previous",e)}_updateDisplay(e,r,i){var s=this.options.duration,a=this.options.base_class,o=0;i&&(s=i),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.width<=this.options.skinny_size?(a+=" tl-skinny",this.options.layout="portrait"):this.options.width<=this.options.medium_size?(a+=" tl-medium",this.options.layout="landscape"):this.options.layout="landscape",qr&&(this.options.layout=r6()),ya?(a+=" tl-mobile",this.options.timenav_height=this._calculateTimeNavHeight(e,this.options.timenav_mobile_height_percentage)):this.options.timenav_height=this._calculateTimeNavHeight(e),this.options.layout=="portrait"?a+=" tl-layout-portrait":a+=" tl-layout-landscape",this.options.storyslider_height=this.options.height-this.options.timenav_height,this.options.timenav_position=="top"?o=Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-39/2:o=Math.round(this.options.storyslider_height+1+Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-35/2),r?(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this.animator_storyslider&&this.animator_storyslider.stop(),this.animator_storyslider=Ei(this._el.storyslider,{height:this.options.storyslider_height+"px",duration:s/2,easing:Du}),this.animator_menubar&&this.animator_menubar.stop(),this.animator_menubar=Ei(this._el.menubar,{top:o+"px",duration:s/2,easing:Du})):(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this._el.storyslider.style.height=this.options.storyslider_height+"px",this._el.menubar.style.top=o+"px"),this.message&&this.message.updateDisplay(this.options.width,this.options.height),this._timenav.updateDisplay(this.options.width,this.options.timenav_height,r),this._storyslider.updateDisplay(this.options.width,this.options.storyslider_height,r,this.options.layout),this.language.direction=="rtl"&&(a+=" tl-rtl"),this._el.container.className=a}_calculateTimeNavHeight(e,r){var i=0;return(this.options.timenav_height_percentage||r)&&(r?i=Math.round(this.options.height/100*r):i=Math.round(this.options.height/100*this.options.timenav_height_percentage)),this._timenav.ready&&this.options.timenav_height_min<this._timenav.getMinimumHeight()&&(this.options.timenav_height_min=this._timenav.getMinimumHeight()),i<this.options.timenav_height_min&&(i=this.options.timenav_height_min),i=i-this.options.marker_padding*2,i}_validateOptions(){for(var e=["timenav_height","timenav_height_min","marker_height_min","marker_width_min","marker_padding","start_at_slide","slide_padding_lr"],r=0;r<e.length;r++){var i=e[r],s=this.options[i];let a=!0;typeof s=="number"?a=s==parseInt(s):typeof s=="string"&&(a=s.match(/^\s*(\-?\d+)?\s*$/)),a||this.config.logError({message_key:"invalid_integer_option",detail:i})}}_getSlideIndex(e){if(this.config){if(this.config.title&&this.config.title.unique_id==e)return 0;for(var r=0;r<this.config.events.length;r++)if(e==this.config.events[r].unique_id)return this.config.title?r+1:r}return-1}_getEventIndex(e){for(var r=0;r<this.config.events.length;r++)if(e==this.config.events[r].unique_id)return r;return-1}_onLoaded(){if(this._loaded.storyslider&&this._loaded.timenav&&(this.fire("loaded",this.config),i6(this.options.start_at_end)||this.options.start_at_slide>this.config.events.length?this.goToEnd():this.goTo(this.options.start_at_slide),this.options.hash_bookmark)){window.location.hash!=""?this.goToId(window.location.hash.replace("#event-","")):this._updateHashBookmark(this.current_id);let e=this;window.addEventListener("hashchange",function(){window.location.hash.indexOf("#event-")==0&&e.goToId(window.location.hash.replace("#event-",""))},!1)}}_updateHashBookmark(e){if(e){var r="#event-"+e.toString();window.history.replaceState(null,"Browsing TimelineJS",r),this.fire("hash_updated",{unique_id:this.current_id,hashbookmark:"#event-"+e.toString()},this)}}zoomIn(){this._timenav.zoomIn()}zoomOut(){this._timenav.zoomOut()}setZoom(e){this._timenav.setZoom(e)}goToId(e){this.current_id!=e&&(this.current_id=e,this._timenav.goToId(this.current_id),this._storyslider.goToId(this.current_id,!1,!0),this.fire("change",{unique_id:this.current_id},this))}goTo(e){if(!(e<0))try{this.config.title?e===0?this.goToId(this.config.title.unique_id):this.goToId(this.config.events[e-1].unique_id):this.goToId(this.config.events[e].unique_id)}catch{return}}goToStart(){this.goTo(0)}goToEnd(){var e=this.config.events.length-1;this.goTo(this.config.title?e+1:e)}goToPrev(){this.goTo(this._getSlideIndex(this.current_id)-1),this.focusContainer()}goToNext(){this.goTo(this._getSlideIndex(this.current_id)+1),this.focusContainer()}add(e){var r=this.config.addEvent(e),i=this._getEventIndex(r),s=this.config.events[i];this._storyslider.createSlide(s,this.config.title?i+1:i),this._storyslider._updateDrawSlides(),this._timenav.createMarker(s,i),this._timenav._updateDrawTimeline(!1),this.fire("added",{unique_id:r})}remove(e){if(e>=0&&e<this.config.events.length){this.config.events[e].unique_id==this.current_id&&(e<this.config.events.length-1?this.goTo(e+1):this.goTo(e-1));var r=this.config.events.splice(e,1);delete this.config.event_dict[r[0].unique_id],this._storyslider.destroySlide(this.config.title?e+1:e),this._storyslider._updateDrawSlides(),this._timenav.destroyMarker(e),this._timenav._updateDrawTimeline(!1),this.fire("removed",{unique_id:r[0].unique_id})}}removeId(e){this.remove(this._getEventIndex(e))}getData(e){if(this.config.title){if(e==0)return this.config.title;if(e>0&&e<=this.config.events.length)return this.config.events[e-1]}else if(e>=0&&e<this.config.events.length)return this.config.events[e];return null}getDataById(e){return this.getData(this._getSlideIndex(e))}getSlide(e){return e>=0&&e<this._storyslider._slides.length?this._storyslider._slides[e]:null}getSlideById(e){return this.getSlide(this._getSlideIndex(e))}getCurrentSlide(){return this.getSlideById(this.current_id)}updateDisplay(){this.ready?this._updateDisplay():Ue("updateDisplay called but timeline is not in ready state")}focusContainer(){this._el.container.focus()}_initGoogleAnalytics(e){ua(`https://www.googletagmanager.com/gtag/js?id=${e}`),window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",e)}_initAnalytics(){let e=this.options.ga_measurement_id||this.options.ga_property_id||null;if(e){this._initGoogleAnalytics(e);var r=this.options.track_events;for(let s=0;s<r.length;s++){var i=r[s];this.addEventListener(i,function(a){gtag("event",a.type)})}}}}Sn(ZC,Ci,In);function z5(){const t=M.useRef(null),[e,r]=M.useState(null),[i,s]=M.useState(!0),[a,o]=M.useState(null),l=Qr(),u=M.useRef();u.current=l,M.useEffect(()=>{async function f(){try{const p=await Ln(pn(Rt,"timelineEvents")),m=c(p);r({title:{media:{url:"",caption:"",credit:""},text:{headline:"Civil Rights Movement Timeline",text:"Key events from the Civil Rights Movement, identified from interviews from the Library of Congress Civil Rights History Project."}},events:m}),s(!1)}catch(p){console.error("Error fetching timeline data:",p),o("Failed to load timeline events."),s(!1)}}f()},[]),M.useEffect(()=>{if(e&&t.current){t.current.innerHTML="";try{new ZC(t.current,e),setTimeout(h,1e3)}catch(f){console.error("Error initializing Timeline.js:",f),o("Failed to initialize timeline.")}}},[e]);const c=f=>f.docs.map(p=>{const m=p.data(),w=new Date(m.date),A=m.keywords?m.keywords.split(",").map(T=>T.trim()):[],D=`
        ${m.description||""}
        <br><br>
        <button 
          class="relevant-interviews-button" 
          data-keywords="${encodeURIComponent(A.join(","))}"
          style="background-color: #2563eb; color: white; padding: 10px 16px; border: none; border-radius: 8px; cursor: pointer; display: flex; align-items: center; font-family: inherit; font-size: 14px; font-weight: 500; transition: background-color 0.2s; box-shadow: 0 1px 3px rgba(0,0,0,0.1);"
          onmouseover="this.style.backgroundColor = '#1d4ed8'"
          onmouseout="this.style.backgroundColor = '#2563eb'"
        >
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" style="width: 20px; height: 20px; margin-right: 8px;">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
          </svg>
          Relevant Interviews
        </button>
      `;return{start_date:{year:w.getFullYear(),month:w.getMonth()+1,day:w.getDate()},text:{headline:m.title,text:D},media:{url:m.mediaUrl||"",caption:m.mediaCaption||"",credit:m.mediaCredit||""}}}),h=()=>{document.querySelectorAll(".relevant-interviews-button").forEach(f=>{f.addEventListener("click",function(p){p.preventDefault(),p.stopPropagation();const m=this.dataset.keywords;m&&u.current(`/playlist-builder?keywords=${m}`)})})};return i?v.jsxs("div",{className:"flex justify-center items-center h-96 bg-gray-50",children:[v.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),v.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):a?v.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg text-center mx-auto my-6 max-w-xl",children:a}):v.jsxs("div",{className:"w-full max-w-7xl mx-auto p-6 bg-gray-50 font-sans",children:[v.jsxs("div",{className:"mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Civil Rights Timeline"}),v.jsx("p",{className:"text-base leading-relaxed text-gray-600",children:"Explore key events from the Civil Rights Movement, with links to relevant interview recordings."})]}),v.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden p-0 mb-6",children:v.jsx("div",{ref:t,id:"timeline-embed",style:{height:"600px",width:"100%",position:"relative"}})}),v.jsx("div",{className:"bg-indigo-50 rounded-xl p-4 px-6 border-l-4 border-indigo-500",children:v.jsxs("p",{className:"text-sm leading-relaxed text-indigo-800 m-0",children:[v.jsx("strong",{children:"Tip:"}),' Click on any event to see details, and use the "Relevant Interviews" button to find related interview recordings.']})})]})}function $5(){const[t,e]=M.useState([]),[r,i]=M.useState(!0),[s,a]=M.useState(null),[o,l]=M.useState(""),[u,c]=M.useState(null),[h,f]=M.useState(!1),p=Qr();M.useEffect(()=>{A()},[]),M.useEffect(()=>{u&&f(!0)},[u]);const m=()=>{f(!1)},w=I=>{const y=I==null?void 0:I.match(/embed\/([a-zA-Z0-9_-]+)/);return y?y[1]:null},A=async()=>{try{i(!0);const I=await Ln(pn(Rt,"interviewSummaries")),y=[];I.forEach(_=>{const S=_.data(),O=w(S.videoEmbedLink);y.push({id:_.id,name:S.name||"Unknown Name",role:S.role||"Unknown Role",videoEmbedLink:S.videoEmbedLink,thumbnailUrl:O?`https://img.youtube.com/vi/${O}/hqdefault.jpg`:null})}),e(y),i(!1)}catch(I){console.error("Error fetching people:",I),a("Failed to load interview subjects"),i(!1)}},D=()=>{if(!u)return;const I=t.filter(_=>_.name.toLowerCase().includes(o.toLowerCase())),y=I.findIndex(_=>_.id===u.id);y>0?c(I[y-1]):c(I[I.length-1])},T=()=>{if(!u)return;const I=t.filter(_=>_.name.toLowerCase().includes(o.toLowerCase())),y=I.findIndex(_=>_.id===u.id);y<I.length-1?c(I[y+1]):c(I[0])};M.useEffect(()=>{const I=y=>{h&&(y.key==="ArrowLeft"?D():y.key==="ArrowRight"?T():y.key==="Escape"&&m())};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[h,u,o]);const x=()=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:v.jsx("polyline",{points:"15 18 9 12 15 6"})}),b=()=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:v.jsx("polyline",{points:"9 18 15 12 9 6"})}),P=()=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),v.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),U=({person:I,isOpen:y,onClose:_,onPrev:S,onNext:O})=>{if(!y||!I)return null;const N=K=>{K.target===K.currentTarget&&_()};return v.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:[v.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60",onClick:N}),v.jsx("button",{className:"absolute left-4 md:left-8 z-50 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:K=>{K.stopPropagation(),S()},"aria-label":"Previous person",children:v.jsx(x,{})}),v.jsx("button",{className:"absolute right-4 md:right-8 z-50 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:K=>{K.stopPropagation(),O()},"aria-label":"Next person",children:v.jsx(b,{})}),v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-md w-full overflow-hidden animate-fadeIn z-50 relative",children:[v.jsxs("div",{className:"relative",children:[I.thumbnailUrl&&v.jsx("div",{className:"w-full h-48 overflow-hidden",children:v.jsx("img",{src:I.thumbnailUrl,alt:I.name,className:"w-full h-full object-cover scale-125"})}),v.jsx("button",{className:"absolute top-2 right-2 bg-black bg-opacity-60 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:_,"aria-label":"Close",children:v.jsx(P,{})})]}),v.jsxs("div",{className:"p-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:I.name}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:I.role}),v.jsx("button",{onClick:()=>p(`/interview-player?documentName=${encodeURIComponent(I.id)}`),className:"w-full bg-blue-600 text-white px-4 py-3 rounded-md hover:bg-blue-700 transition-colors duration-200 font-medium",children:"View Interview"})]})]})]})},V=({person:I})=>{const y=(u==null?void 0:u.id)===I.id;return v.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[v.jsx("div",{}),v.jsx("div",{className:`w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 rounded-md 
                    overflow-hidden shadow-md cursor-pointer transition-all duration-200
                    ${y?"ring-4 ring-blue-500":"hover:ring-2 hover:ring-blue-300"}`,onClick:()=>c(I),style:{touchAction:"manipulation"},children:I.thumbnailUrl?v.jsx("div",{className:"w-full h-full overflow-hidden",children:v.jsx("img",{src:I.thumbnailUrl,alt:I.name,className:"w-full h-full object-cover object-center scale-150",draggable:!1,loading:"lazy"})}):v.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:v.jsx("span",{className:"text-gray-400 text-xs",children:"No photo"})})}),v.jsx("div",{className:"text-center w-full",children:v.jsx("p",{className:`text-xs sm:text-sm truncate max-w-full ${y?"font-bold text-blue-600":"text-gray-700"}`,children:I.name})})]})};if(r)return v.jsx("div",{className:"flex justify-center items-center h-screen",children:v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(s)return v.jsx("div",{className:"flex justify-center items-center h-screen",children:v.jsx("div",{className:"text-red-500",children:s})});if(t.length===0)return v.jsx("div",{className:"flex justify-center items-center h-screen",children:v.jsx("div",{className:"text-gray-500",children:"No interview subjects found"})});const R=t.filter(I=>I.name.toLowerCase().includes(o.toLowerCase()));return v.jsxs("div",{className:"container mx-auto px-4 py-8 min-h-screen",children:[v.jsxs("div",{className:"mb-6 max-w-xl mx-auto text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:o?`${R.length} of ${t.length} People`:`${t.length} People`}),v.jsx("input",{type:"text",value:o,onChange:I=>l(I.target.value),placeholder:"Search by name...",className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring focus:border-blue-300"})]}),v.jsx("div",{className:"max-w-6xl mx-auto",children:v.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 gap-x-4 gap-y-6",children:R.map(I=>v.jsx(V,{person:I},I.id))})}),v.jsx(U,{person:u,isOpen:h,onClose:m,onPrev:D,onNext:T})]})}function H5({activeVisualization:t}){return v.jsxs("div",{className:"w-full max-w-5xl mx-auto p-6 bg-white shadow-md rounded-md",children:[t==="keywords"&&v.jsx(qB,{}),t==="map"&&v.jsx(QB,{}),t==="timeline"&&v.jsx(z5,{}),t==="people"&&v.jsx($5,{})]})}function W5(){const[t,e]=M.useState("timeline"),{user:r}=ic(),i=["timeline","keywords","map","people"];return v.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[v.jsx("div",{className:"text-center mb-8",children:v.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text mb-6",children:"Civil Rights History Project"})}),v.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden transition-all duration-300 mb-6",children:[v.jsx("div",{className:"border-b border-gray-200",children:v.jsx("ul",{className:"flex flex-wrap m-0 p-0 list-none",children:i.map(s=>v.jsx("li",{className:"flex-1",children:v.jsx("button",{onClick:()=>e(s),className:`w-full py-4 px-1 text-sm text-center transition-all duration-300 cursor-pointer border-0 ${t===s?"bg-indigo-50 text-blue-800 font-semibold border-b-2 border-blue-600":"bg-transparent text-gray-500 font-normal border-b-0"}`,children:s.charAt(0).toUpperCase()+s.slice(1)})},s))})}),v.jsx("div",{className:"p-6",children:v.jsx(H5,{activeVisualization:t})})]})]})}function q5(){var m,w;const[t,e]=M.useState(""),[r,i]=M.useState(""),[s,a]=M.useState(!1),[o,l]=M.useState(""),{login:u}=ic(),c=Qr(),f=((w=(m=fr().state)==null?void 0:m.from)==null?void 0:w.pathname)||"/",p=async A=>{if(A.preventDefault(),!t||!r){l("Please enter both email and password");return}try{a(!0),l(""),await u(t,r),c(f,{replace:!0})}catch(D){console.error("Login error:",D);let T="Failed to log in";D.code==="auth/invalid-email"?T="Invalid email address":D.code==="auth/user-not-found"?T="No account found with this email":D.code==="auth/wrong-password"?T="Incorrect password":D.code==="auth/too-many-requests"&&(T="Too many failed login attempts. Please try again later"),l(T)}finally{a(!1)}};return v.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6 font-sans",children:[v.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[v.jsxs("div",{className:"mb-8",children:[v.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-4",children:"Sign in to your account"}),v.jsx("p",{className:"text-sm text-center text-gray-500 mt-2",children:"Enter your credentials to access your account"})]}),o&&v.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mb-6 rounded",children:v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx("svg",{className:"h-5 w-5 text-red-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),v.jsx("div",{className:"ml-3",children:v.jsx("p",{className:"text-sm text-red-700",children:o})})]})}),v.jsxs("form",{className:"mt-6",onSubmit:p,children:[v.jsxs("div",{className:"mb-6",children:[v.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),v.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:A=>e(A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"you@example.com"})]}),v.jsxs("div",{className:"mb-6",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2",children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),v.jsx("a",{href:"#",className:"text-xs text-blue-600 hover:text-blue-700 transition-colors",children:"Forgot password?"})]}),v.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:r,onChange:A=>i(A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:""})]}),v.jsx("div",{className:"mt-8",children:v.jsx("button",{type:"submit",disabled:s,className:`w-full flex justify-center items-center py-3 px-4 relative bg-blue-600 text-white text-sm font-medium border-0 rounded-lg shadow-sm transition-colors ${s?"opacity-70 cursor-not-allowed":"hover:bg-blue-700 cursor-pointer"}`,children:s?v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"absolute left-6 flex items-center",children:v.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[v.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),v.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),v.jsx("span",{children:"Signing in..."})]}):v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"absolute left-6 flex items-center",children:v.jsx("svg",{className:"h-5 w-5 text-blue-200",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),v.jsx("span",{children:"Sign in"})]})})}),v.jsx("div",{className:"mt-6 text-center",children:v.jsxs("p",{className:"text-sm text-gray-500",children:["Don't have an account?"," ",v.jsx("a",{href:"#",className:"text-blue-600 font-medium hover:text-blue-700 transition-colors",children:"Sign up"})]})})]})]}),v.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})}function pv(t){return t?t.split(",").map(e=>e.trim().toLowerCase()).filter(e=>e.length>0):[]}function tu(t){if(!t)return null;const e=t.match(/embed\/([a-zA-Z0-9_-]+)/);return e?e[1]:null}function G5(t){if(!t)return"00:00";const e=t.match(/(?:\[)?(\d{1,2}:\d{2}(?::\d{2})?)/);return e?e[1]:"00:00"}function mv(t){if(!t)return 0;const e=t.split(":").map(Number);return e.length===2?e[0]*60+e[1]:e.length===3?e[0]*3600+e[1]*60+e[2]:0}function dd(t){if(t==null)return"0:00";const e=Math.floor(t/3600),r=Math.floor(t%3600/60),i=Math.floor(t%60);return e>0?`${e}:${r.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`:`${r}:${i.toString().padStart(2,"0")}`}function nu(t){if(!t)return{startSeconds:0,endSeconds:0};const e=t.split("-").map(s=>s.trim());if(e.length!==2)return{startSeconds:0,endSeconds:0};const r=mv(e[0]),i=mv(e[1]);return{startSeconds:r,endSeconds:i}}const K5=({videoQueue:t,currentVideoIndex:e,setCurrentVideoIndex:r,currentTime:i,totalDuration:s})=>{const a=M.useRef(null),o=M.useRef(null),[l,u]=M.useState(0),[c,h]=M.useState(0),[f,p]=M.useState(null);M.useEffect(()=>{let w=0;for(let A=0;A<e;A++)if(t[A]){const{startSeconds:D,endSeconds:T}=nu(t[A].timestamp);w+=T-D||300}if(w+=i,h(w),s&&s>0){const A=w/s*100;u(Math.min(A,100))}},[t,e,i,s]);const m=t.map((w,A)=>{const{startSeconds:D,endSeconds:T}=nu(w.timestamp),x=T-D||300,b=x/s*100,P=tu(w.videoEmbedLink);return{id:A,width:b,duration:x,isActive:A===e,videoId:P,name:w.name||"Untitled"}});return v.jsxs("div",{children:[v.jsx("div",{ref:a,style:{position:"relative",width:"100%",backgroundColor:"#e5e7eb",marginBottom:"10px",borderRadius:"8px",overflow:"hidden",padding:"10px",boxSizing:"border-box",border:"1px solid #d1d5db",display:"flex"},children:m.map(w=>v.jsxs("div",{onClick:()=>r(w.id),onMouseEnter:()=>p(w.id),onMouseLeave:()=>p(null),style:{width:`${w.width}%`,minWidth:"60px",padding:"0 2px",boxSizing:"border-box",position:"relative",cursor:"pointer"},children:[v.jsxs("div",{style:{position:"relative",overflow:"hidden",borderRadius:"6px",border:`2px solid ${w.isActive?"#3b82f6":"#d1d5db"}`,height:"70px",boxShadow:w.isActive?"0 2px 5px rgba(0,0,0,0.2)":"none"},children:[v.jsx("img",{src:`https://img.youtube.com/vi/${w.videoId}/mqdefault.jpg`,alt:`Thumbnail for segment ${w.id+1}`,style:{width:"100%",maxHeight:"80px",objectFit:"contain",borderRadius:"6px"},onError:A=>{A.target.src="https://via.placeholder.com/120x60?text=No+Thumbnail"}}),w.isActive&&v.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${i/w.duration*100}%`,backgroundColor:"rgba(255, 0, 0, 0.5)",transition:"width 0.2s linear"}}),v.jsx("div",{style:{position:"absolute",bottom:"0",left:"0",right:"0",backgroundColor:"rgba(0,0,0,0.6)",color:"white",fontSize:"11px",textAlign:"center",padding:"2px 0"},children:dd(w.duration)})]}),f===w.id&&v.jsxs("div",{style:{position:"absolute",top:"-30px",left:"50%",transform:"translateX(-50%)",backgroundColor:"#1f2937",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",zIndex:50,whiteSpace:"nowrap"},children:[w.name," (",dd(w.duration),")"]})]},`thumb-${w.id}`))}),v.jsxs("div",{style:{position:"relative",width:"100%",height:"8px",backgroundColor:"#d1d5db",borderRadius:"4px",overflow:"hidden",marginBottom:"10px"},children:[m.map(w=>v.jsx("div",{style:{width:`${w.width}%`,height:"100%",backgroundColor:w.isActive?"#bfdbfe":"#f3f4f6",borderRight:"1px solid #d1d5db",position:"relative"},children:w.isActive&&v.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${i/w.duration*100}%`,backgroundColor:"#3b82f6",opacity:.7}})},`bar-${w.id}`)),v.jsx("div",{ref:o,style:{position:"absolute",top:"-3px",left:`${l}%`,transform:"translateX(-50%)",width:"4px",height:"14px",backgroundColor:"red",borderRadius:"2px",zIndex:9999,transition:"left 0.1s linear"},children:v.jsx("div",{style:{position:"absolute",top:"-4px",left:"50%",transform:"translate(-50%, -50%)",width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"red"}})})]}),v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 10px",backgroundColor:"#f3f4f6",borderRadius:"4px",fontSize:"12px",marginBottom:"10px"},children:[v.jsx("div",{children:dd(c)}),v.jsxs("div",{style:{fontWeight:"bold"},children:[l.toFixed(1),"%"]}),v.jsx("div",{children:dd(s)})]})]})},Y5=({onPrevious:t,onPlay:e,onPause:r,onNext:i,isPlaying:s,hasPrevious:a,hasNext:o})=>v.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"24px",padding:"12px",backgroundColor:"#f3f4f6",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",margin:"20px auto",border:"2px solid #d1d5db",maxWidth:"320px"},children:[v.jsx("button",{onClick:t,disabled:!a,style:{padding:"12px",borderRadius:"9999px",backgroundColor:a?"#3b82f6":"#9ca3af",color:"white",border:"none",cursor:a?"pointer":"not-allowed",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),v.jsx("button",{onClick:s?r:e,style:{padding:"16px",borderRadius:"9999px",backgroundColor:"#3b82f6",color:"white",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:s?v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6"})}):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})}),v.jsx("button",{onClick:i,disabled:!o,style:{padding:"12px",borderRadius:"9999px",backgroundColor:o?"#3b82f6":"#9ca3af",color:"white",border:"none",cursor:o?"pointer":"not-allowed",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),X5=({nextKeyword:t,thumbnailUrl:e,onPlay:r})=>v.jsxs("div",{style:{width:"240px",backgroundColor:"#f3f4f6",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",border:"2px solid #d1d5db",overflow:"hidden"},children:[v.jsx("div",{className:"relative",children:v.jsxs("div",{style:{width:"100%",height:"120px",backgroundImage:e?`url(${e})`:"none",backgroundColor:e?"transparent":"#e5e7eb",backgroundSize:"cover",backgroundPosition:"center"},children:[!e&&v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"text-gray-400",children:[v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),v.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:v.jsx("button",{onClick:r,style:{padding:"12px",borderRadius:"9999px",backgroundColor:"#3b82f6",color:"white",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})})})]})}),v.jsxs("div",{style:{padding:"12px"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[v.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",color:"#374151",margin:0},children:"Up Next"}),v.jsx("span",{style:{backgroundColor:"#dbeafe",color:"#1e40af",fontSize:"12px",fontWeight:"500",padding:"2px 8px",borderRadius:"4px"},children:t})]}),v.jsx("p",{style:{fontSize:"12px",color:"#6b7280",margin:0},children:"Plays automatically when current playlist ends"})]})]}),Q5=({onClick:t})=>v.jsx("button",{onClick:t,className:"flex items-center justify-center p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 focus:outline-none transition-colors duration-200",title:"Shuffle and get new clips",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{d:"M8 5a1 1 0 100 2h5.586l-1.293 1.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L13.586 5H8zM12 15a1 1 0 100-2H6.414l1.293-1.293a1 1 0 10-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L6.414 15H12z"})})}),J5=({isOpen:t,onConfirm:e,onCancel:r,message:i})=>t?v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:v.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm mx-auto",children:[v.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Confirmation"}),v.jsx("p",{className:"text-sm text-gray-600 mb-4",children:i}),v.jsxs("div",{className:"flex justify-end space-x-3",children:[v.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),v.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Confirm"})]})]})}):null,Z5=({metadata:t,onMetadataUpdate:e})=>{const[r,i]=M.useState(!1),[s,a]=M.useState(!1),[o,l]=M.useState({}),[u,c]=M.useState(!1),[h,f]=M.useState(null),[p,m]=M.useState(!1);if(!t)return null;const w=()=>{l({...t}),a(!0),f(null),m(!1)},A=(R,I)=>{l(y=>({...y,[R]:I}))},D=async()=>{try{c(!0),f(null);let R;if(t.documentName&&t.id)R=To(Rt,"interviewSummaries",t.documentName,"subSummaries",t.id);else{console.error("Unable to determine document path"),f("Unable to determine document path for saving"),c(!1);return}const I={...o};delete I.id,delete I.documentName,await Jg(R,I),e&&e(o),m(!0),c(!1),setTimeout(()=>{a(!1),m(!1)},1500)}catch(R){console.error("Error updating document:",R),f(`Error saving changes: ${R.message}`),c(!1)}},T=()=>{a(!1),l({}),f(null),m(!1)},x=["summary"],b=Object.keys(t).filter(R=>!x.includes(R)&&t[R]!==void 0),P=["id","documentName","createdAt","updatedAt"],U=R=>!P.includes(R),V=(R,I)=>{const y=U(R);return typeof I=="boolean"?v.jsxs("select",{disabled:!y,value:o[R].toString(),onChange:_=>A(R,_.target.value==="true"),className:`w-full px-2 py-1 text-sm border rounded ${y?"border-blue-300":"bg-gray-100"}`,children:[v.jsx("option",{value:"true",children:"True"}),v.jsx("option",{value:"false",children:"False"})]}):typeof I=="number"?v.jsx("input",{type:"number",disabled:!y,value:o[R],onChange:_=>A(R,Number(_.target.value)),className:`w-full px-2 py-1 text-sm border rounded ${y?"border-blue-300":"bg-gray-100"}`}):typeof I=="object"?v.jsx("textarea",{disabled:!0,value:JSON.stringify(I,null,2),className:"w-full px-2 py-1 text-sm border rounded bg-gray-100",rows:3}):v.jsx("input",{type:"text",disabled:!y,value:o[R]||"",onChange:_=>A(R,_.target.value),className:`w-full px-2 py-1 text-sm border rounded ${y?"border-blue-300":"bg-gray-100"}`})};return v.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6 border border-gray-100",children:[v.jsxs("div",{className:"flex justify-between items-center mb-3",children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Clip Metadata"}),v.jsx("div",{className:"flex space-x-2",children:s?v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:D,disabled:u,className:"px-3 py-1 bg-blue-600 text-white text-sm font-medium rounded hover:bg-blue-700 transition-colors disabled:bg-blue-300",children:u?"Saving...":"Save"}),v.jsx("button",{onClick:T,disabled:u,className:"px-3 py-1 bg-gray-200 text-gray-800 text-sm font-medium rounded hover:bg-gray-300 transition-colors disabled:bg-gray-100",children:"Cancel"})]}):v.jsxs(v.Fragment,{children:[v.jsx("button",{onClick:w,className:"px-3 py-1 bg-gray-100 text-blue-600 hover:bg-gray-200 text-sm font-medium rounded transition-colors",children:"Edit"}),v.jsx("button",{onClick:()=>i(!r),className:"px-3 py-1 text-blue-600 hover:text-blue-800 text-sm font-medium",children:r?"Show Less":"Show All"})]})})]}),p&&v.jsx("div",{className:"mb-3 p-2 bg-green-100 text-green-800 text-sm rounded",children:"Changes saved successfully"}),h&&v.jsx("div",{className:"mb-3 p-2 bg-red-100 text-red-800 text-sm rounded",children:h}),v.jsx("div",{className:"grid grid-cols-2 gap-4",children:["id","documentName","timestamp","keywords"].map(R=>t[R]&&v.jsxs("div",{className:"mb-2",children:[v.jsxs("span",{className:"block text-sm font-medium text-gray-500",children:[R,":"]}),s?V(R,t[R]):v.jsx("span",{className:"block text-sm text-gray-800 break-words",children:typeof t[R]=="object"?JSON.stringify(t[R]):String(t[R])})]},R))}),r&&v.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:v.jsx("div",{className:"grid grid-cols-2 gap-4",children:b.filter(R=>!["id","documentName","timestamp","keywords"].includes(R)).map(R=>v.jsxs("div",{className:"mb-2",children:[v.jsxs("span",{className:"block text-sm font-medium text-gray-500",children:[R,":"]}),s?V(R,t[R]):v.jsx("span",{className:"block text-sm text-gray-800 break-words",children:typeof t[R]=="object"?JSON.stringify(t[R]):String(t[R])})]},R))})})]})},ez=({currentKeyword:t,excludeIds:e=[]})=>{const[r,i]=M.useState([]),[s,a]=M.useState(!0),[o,l]=M.useState(null);M.useEffect(()=>{t&&u(t)},[t]);const u=async h=>{try{a(!0);const f=pv(h);if(f.length===0){i([]),a(!1);return}const p=await Ln(pn(Rt,"interviewSummaries")),m=[];for(const A of p.docs){const D=A.id,T=A.data(),x=T.videoEmbedLink,b=c(x);console.log(x?`Parent document ${D} has videoEmbedLink: ${x.substring(0,50)}...`:`Parent document ${D} has no videoEmbedLink`);const P=pn(Rt,"interviewSummaries",D,"subSummaries");(await Ln(P)).forEach(V=>{const R=V.data(),I=(R.keywords||"").split(",").map(_=>_.trim().toLowerCase());f.some(_=>I.includes(_))&&!e.includes(V.id)&&m.push({id:V.id,documentName:D,...R,...T,thumbnailUrl:b,_debug_parentVideoEmbedLink:x})})}const w=m.filter(A=>A.thumbnailUrl).length;console.log(`Found thumbnails for ${w} out of ${m.length} clips`),i(m),a(!1)}catch(f){console.error("Error fetching related clips:",f),l("Error loading related clips"),a(!1)}},c=h=>{if(!h)return null;try{let f=tu(h);if(!f){if(h.includes("youtube.com/watch"))f=new URL(h).searchParams.get("v");else if(h.includes("youtube.com/embed/")){const p=h.split("youtube.com/embed/");p.length>1&&(f=p[1].split("?")[0])}else if(h.includes("youtu.be/")){const p=h.split("youtu.be/");p.length>1&&(f=p[1].split("?")[0])}else if(h.includes("<iframe")&&h.includes("src=")){const p=h.match(/src=["'](.*?)["']/);if(p&&p[1])return c(p[1])}}if(f)return`https://img.youtube.com/vi/${f}/mqdefault.jpg`;console.log("Could not extract video ID from:",h)}catch(f){console.error("Error extracting video ID for thumbnail:",f,"from link:",h)}return null};return s?v.jsx("div",{className:"py-4",children:v.jsx("div",{className:"flex justify-center items-center",children:v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})})}):o?v.jsx("div",{className:"p-4 bg-red-50 text-red-700 rounded-md",children:o}):r.length===0?null:v.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-sm p-6",children:[v.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Related Clips"}),v.jsx("div",{className:"overflow-x-auto pb-4",children:v.jsx("div",{className:"flex space-x-4",style:{minWidth:"min-content"},children:r.map(h=>v.jsxs("div",{className:"flex-shrink-0 w-64 bg-gray-50 rounded-md overflow-hidden shadow-sm",children:[h.thumbnailUrl?v.jsx("div",{className:"relative pb-[56.25%] bg-gray-200",children:v.jsx("img",{src:h.thumbnailUrl,alt:h.name||"Video thumbnail",className:"absolute top-0 left-0 w-full h-full object-cover",onError:f=>{console.log("Thumbnail failed to load:",h.thumbnailUrl),f.target.onerror=null,f.target.style.display="none",f.target.parentElement.innerHTML=`
                        <div class="absolute top-0 left-0 w-full h-full flex items-center justify-center bg-gray-200">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                          </svg>
                        </div>
                      `}})}):v.jsxs("div",{className:"h-36 bg-gray-200 flex flex-col items-center justify-center",children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),v.jsx("span",{className:"text-gray-500 text-sm",children:"Video Preview"})]}),v.jsxs("div",{className:"p-3",children:[v.jsx("h4",{className:"font-medium text-gray-900 line-clamp-1",title:h.name,children:h.name||"Unnamed clip"}),v.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-1",title:h.topic||"",children:h.topic||"No topic"}),h.timestamp&&v.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.timestamp})]})]},h.id))})})]})},tz=()=>{const[t]=Iy(),e=Qr(),[r,i]=M.useState(""),[s,a]=M.useState([]),[o,l]=M.useState(0),[u,c]=M.useState(!0),[h,f]=M.useState(null),[p,m]=M.useState(!0),[w,A]=M.useState(0),[D,T]=M.useState(0),[x,b]=M.useState(0),[P,U]=M.useState(!1),[V,R]=M.useState([]),[I,y]=M.useState(""),[_,S]=M.useState(""),[O,N]=M.useState(!1),K=M.useRef(null),ie=M.useRef(null),oe=M.useRef(Date.now()),fe=M.useRef(null);M.useEffect(()=>{if(s.length>0){const F=s.reduce((z,X)=>{const{startSeconds:le,endSeconds:we}=nu(X.timestamp);return z+(we-le||300)},0);console.log("Calculated total duration:",F),b(F)}},[s]),M.useEffect(()=>{const F=t.get("keywords");F&&(console.log(`Found keyword: ${F}`),i(F))},[t]),M.useEffect(()=>{r&&(console.log(`Searching videos for: ${r}`),je())},[r]),M.useEffect(()=>{Y()},[]),M.useEffect(()=>{V.length>0&&r&&se()},[V,r]),M.useEffect(()=>(O&&I&&(fe.current&&clearTimeout(fe.current),fe.current=setTimeout(()=>{console.log(`Navigating to next playlist: ${I}`),e(`?keywords=${encodeURIComponent(I)}`),N(!1)},3e3)),()=>{fe.current&&clearTimeout(fe.current)}),[O,I,e]),M.useEffect(()=>(ie.current&&(clearInterval(ie.current),ie.current=null),s.length>0&&p&&(console.log("Starting timer for manual time tracking"),ie.current=setInterval(()=>{A(F=>{const z=F+1;T(W()+z);const X=s[o];if(X){const{startSeconds:le,endSeconds:we}=nu(X.timestamp),Ie=we-le;if(z>=Ie)return console.log("End of video reached, auto-advancing"),o===s.length-1?(console.log("Playlist ended, preparing to play next keyword"),N(!0),z):(setTimeout(()=>l(Me=>Me+1),500),0)}return z})},1e3)),()=>{ie.current&&clearInterval(ie.current)}),[s,o,p]),M.useEffect(()=>{s.length>0&&(A(0),oe.current=Date.now(),console.log("Video index changed to:",o))},[o]);const W=()=>{if(!s.length)return 0;let F=0;for(let z=0;z<o;z++){const{startSeconds:X,endSeconds:le}=nu(s[z].timestamp);F+=le-X||300}return F},Y=async()=>{try{const F=new Set,z=await Ln(pn(Rt,"interviewSummaries"));for(const le of z.docs){const we=le.id,Ie=pn(Rt,"interviewSummaries",we,"subSummaries");(await Ln(Ie)).forEach(Ye=>{(Ye.data().keywords||"").split(",").map(Wt=>Wt.trim().toLowerCase()).forEach(Wt=>{Wt&&F.add(Wt)})})}const X=Array.from(F);console.log(`Found ${X.length} total keywords:`,X),R(X)}catch(F){console.error("Error fetching available keywords:",F)}},se=()=>{if(V.length===0)return;const F=V.filter(le=>le!==r);if(F.length===0)return;const z=Math.floor(Math.random()*F.length),X=F[z];console.log(`Selected next keyword: ${X}`),y(X),re(X)},re=async F=>{try{const z=pv(F);if(z.length===0)return;const X=await Re(z);if(X.length>0){const le=X[0];if(le.videoEmbedLink){const we=tu(le.videoEmbedLink);if(we){const Ie=`https://img.youtube.com/vi/${we}/mqdefault.jpg`;S(Ie);return}}}S("")}catch(z){console.error("Error fetching thumbnail:",z),S("")}},q=()=>{I&&e(`?keywords=${encodeURIComponent(I)}`)},H=()=>{U(!0)},J=()=>{U(!1),je()},Q=()=>{U(!1)},ce=F=>{a(z=>{const X=[...z];return X[o]={...X[o],...F},X})},ge=F=>F.sort(()=>Math.random()-.5),je=async()=>{try{c(!0);const F=pv(r);if(F.length===0){f("Please enter at least one keyword"),c(!1);return}let z=await Re(F);z.length>0?(z=ge(z).slice(0,3),z.forEach(X=>{X.thumbnailUrl||console.log("Missing thumbnail for clip:",X.id,"in document:",X.documentName)}),console.log(`Selected ${z.length} random videos`),a(z),l(0),m(!0),A(0),T(0),oe.current=Date.now(),N(!1)):f("No videos found for this keyword"),c(!1)}catch(F){console.error("Error searching videos:",F),f("Error searching videos"),c(!1)}},Re=async F=>{const z=await Ln(pn(Rt,"interviewSummaries")),X=[];for(const le of z.docs){const we=le.id,Ie=le.data(),Me=Ie.videoEmbedLink,Ye=Me?`https://img.youtube.com/vi/${tu(Me)}/mqdefault.jpg`:null,Ce=pn(Rt,"interviewSummaries",we,"subSummaries");(await Ln(Ce)).forEach(Wt=>{const Rr=Wt.data(),Ai=(Rr.keywords||"").split(",").map(kn=>kn.trim().toLowerCase());F.some(kn=>Ai.includes(kn))&&X.push({id:Wt.id,documentName:we,...Rr,...Ie,thumbnailUrl:Ye})})}return X},He=()=>{o<s.length-1&&(l(o+1),m(!0))},We=()=>{o>0&&(l(o-1),m(!0))},Xe=()=>{if(K.current)try{console.log("Play requested"),K.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*"),m(!0),oe.current=Date.now()}catch(F){console.error("Error playing video:",F)}},Ke=()=>{if(K.current)try{console.log("Pause requested"),K.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"pauseVideo"}),"*"),m(!1)}catch(F){console.error("Error pausing video:",F)}},qe=()=>!s.length||o>=s.length?null:s[o],nt=()=>{const F=qe();if(!F)return"";try{const z=tu(F.videoEmbedLink),[X]=F.timestamp.split(" - "),le=mv(G5(X));return`https://www.youtube.com/embed/${z}?autoplay=1&start=${le}&controls=0&enablejsapi=1&origin=${window.location.origin}`}catch(z){return console.error("Error getting embed URL:",z),""}};if(u)return v.jsx("div",{className:"flex justify-center items-center h-64",children:v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(h)return v.jsx("div",{className:"max-w-7xl mx-auto p-4",children:v.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:v.jsx("p",{children:h})})});const C=qe(),j=s.length>0;return v.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[v.jsxs("div",{className:"mb-6",children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Keyword Playlist"}),v.jsx("div",{className:"flex items-center",children:v.jsx("span",{className:"bg-blue-100 text-blue-800 text-sm font-semibold px-3 py-1 rounded-md",children:r})})]}),v.jsxs("div",{className:"relative",children:[I&&v.jsx("div",{className:"absolute top-0 right-0 z-10",children:v.jsx(X5,{nextKeyword:I,thumbnailUrl:_,onPlay:q})}),v.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[v.jsx("div",{className:"w-full max-w-2xl h-120 bg-black mx-auto relative rounded-lg overflow-hidden",children:C?v.jsx("iframe",{ref:K,src:nt(),width:"720",height:"480",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"YouTube video player",className:"absolute top-0 left-0 w-full h-full"}):v.jsx("div",{className:"flex items-center justify-center w-full h-full text-white font-medium",children:"No videos available"})}),j&&v.jsx("div",{className:"mt-6 mb-4 w-full max-w-2xl mx-auto",children:v.jsx(K5,{videoQueue:s,currentVideoIndex:o,setCurrentVideoIndex:l,currentTime:w,totalDuration:x})}),v.jsxs("div",{className:"w-full max-w-2xl mx-auto flex justify-center items-center py-3 mt-5",children:[v.jsx(Y5,{onPrevious:We,onPlay:Xe,onPause:Ke,onNext:He,isPlaying:p,hasPrevious:o>0,hasNext:o<s.length-1}),v.jsx("div",{className:"ml-4",children:v.jsx(Q5,{onClick:H})})]})]}),C&&v.jsx(Z5,{metadata:C,onMetadataUpdate:ce}),C&&v.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:C.name}),v.jsx("p",{className:"text-sm italic text-gray-500 mb-4",children:C.role}),v.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:v.jsx("p",{className:"m-0 text-base leading-relaxed text-gray-700",children:C.summary})})]})]}),r&&s.length>0&&v.jsx(ez,{currentKeyword:r,excludeIds:s.map(F=>F.id)}),v.jsx(J5,{isOpen:P,onConfirm:J,onCancel:Q,message:"Are you sure you want to hear a new set of clips on this topic?"})]})};function gv(t,e){return gv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},gv(t,e)}function eA(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,gv(t,e)}function xe(){return xe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},xe.apply(null,arguments)}function Mu(t){"@babel/helpers - typeof";return Mu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mu(t)}function nz(t,e){if(Mu(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(Mu(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rz(t){var e=nz(t,"string");return Mu(e)=="symbol"?e:e+""}function iz(t,e,r){return(e=rz(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function fE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function pE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?fE(Object(r),!0).forEach(function(i){iz(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):fE(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function Pn(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var mE=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),gE=function(){return Math.random().toString(36).substring(7).split("").join(".")},vE={INIT:"@@redux/INIT"+gE(),REPLACE:"@@redux/REPLACE"+gE()};function sz(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function tA(t,e,r){var i;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Pn(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Pn(1));return r(tA)(t,e)}if(typeof t!="function")throw new Error(Pn(2));var s=t,a=e,o=[],l=o,u=!1;function c(){l===o&&(l=o.slice())}function h(){if(u)throw new Error(Pn(3));return a}function f(A){if(typeof A!="function")throw new Error(Pn(4));if(u)throw new Error(Pn(5));var D=!0;return c(),l.push(A),function(){if(D){if(u)throw new Error(Pn(6));D=!1,c();var x=l.indexOf(A);l.splice(x,1),o=null}}}function p(A){if(!sz(A))throw new Error(Pn(7));if(typeof A.type>"u")throw new Error(Pn(8));if(u)throw new Error(Pn(9));try{u=!0,a=s(a,A)}finally{u=!1}for(var D=o=l,T=0;T<D.length;T++){var x=D[T];x()}return A}function m(A){if(typeof A!="function")throw new Error(Pn(10));s=A,p({type:vE.REPLACE})}function w(){var A,D=f;return A={subscribe:function(x){if(typeof x!="object"||x===null)throw new Error(Pn(11));function b(){x.next&&x.next(h())}b();var P=D(b);return{unsubscribe:P}}},A[mE]=function(){return this},A}return p({type:vE.INIT}),i={dispatch:p,subscribe:f,getState:h,replaceReducer:m},i[mE]=w,i}function yE(t,e){return function(){return e(t.apply(this,arguments))}}function _E(t,e){if(typeof t=="function")return yE(t,e);if(typeof t!="object"||t===null)throw new Error(Pn(16));var r={};for(var i in t){var s=t[i];typeof s=="function"&&(r[i]=yE(s,e))}return r}function nA(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(i){return i}:e.length===1?e[0]:e.reduce(function(i,s){return function(){return i(s.apply(void 0,arguments))}})}function az(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(i){return function(){var s=i.apply(void 0,arguments),a=function(){throw new Error(Pn(15))},o={getState:s.getState,dispatch:function(){return a.apply(void 0,arguments)}},l=e.map(function(u){return u(o)});return a=nA.apply(void 0,l)(s.dispatch),pE(pE({},s),{},{dispatch:a})}}}var rA=Pe.createContext(null);function oz(t){t()}var iA=oz,lz=function(e){return iA=e},uz=function(){return iA};function cz(){var t=uz(),e=null,r=null;return{clear:function(){e=null,r=null},notify:function(){t(function(){for(var s=e;s;)s.callback(),s=s.next})},get:function(){for(var s=[],a=e;a;)s.push(a),a=a.next;return s},subscribe:function(s){var a=!0,o=r={callback:s,next:null,prev:r};return o.prev?o.prev.next=o:e=o,function(){!a||e===null||(a=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var wE={notify:function(){},get:function(){return[]}};function sA(t,e){var r,i=wE;function s(f){return u(),i.subscribe(f)}function a(){i.notify()}function o(){h.onStateChange&&h.onStateChange()}function l(){return!!r}function u(){r||(r=e?e.addNestedSub(o):t.subscribe(o),i=cz())}function c(){r&&(r(),r=void 0,i.clear(),i=wE)}var h={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:o,isSubscribed:l,trySubscribe:u,tryUnsubscribe:c,getListeners:function(){return i}};return h}var aA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?M.useLayoutEffect:M.useEffect;function dz(t){var e=t.store,r=t.context,i=t.children,s=M.useMemo(function(){var l=sA(e);return{store:e,subscription:l}},[e]),a=M.useMemo(function(){return e.getState()},[e]);aA(function(){var l=s.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[s,a]);var o=r||rA;return Pe.createElement(o.Provider,{value:s},i)}function Bh(t,e){if(t==null)return{};var r={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;r[i]=t[i]}return r}var oA={exports:{}},et={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ht=typeof Symbol=="function"&&Symbol.for,b_=Ht?Symbol.for("react.element"):60103,x_=Ht?Symbol.for("react.portal"):60106,qf=Ht?Symbol.for("react.fragment"):60107,Gf=Ht?Symbol.for("react.strict_mode"):60108,Kf=Ht?Symbol.for("react.profiler"):60114,Yf=Ht?Symbol.for("react.provider"):60109,Xf=Ht?Symbol.for("react.context"):60110,E_=Ht?Symbol.for("react.async_mode"):60111,Qf=Ht?Symbol.for("react.concurrent_mode"):60111,Jf=Ht?Symbol.for("react.forward_ref"):60112,Zf=Ht?Symbol.for("react.suspense"):60113,hz=Ht?Symbol.for("react.suspense_list"):60120,ep=Ht?Symbol.for("react.memo"):60115,tp=Ht?Symbol.for("react.lazy"):60116,fz=Ht?Symbol.for("react.block"):60121,pz=Ht?Symbol.for("react.fundamental"):60117,mz=Ht?Symbol.for("react.responder"):60118,gz=Ht?Symbol.for("react.scope"):60119;function Zn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case b_:switch(t=t.type,t){case E_:case Qf:case qf:case Kf:case Gf:case Zf:return t;default:switch(t=t&&t.$$typeof,t){case Xf:case Jf:case tp:case ep:case Yf:return t;default:return e}}case x_:return e}}}function lA(t){return Zn(t)===Qf}et.AsyncMode=E_;et.ConcurrentMode=Qf;et.ContextConsumer=Xf;et.ContextProvider=Yf;et.Element=b_;et.ForwardRef=Jf;et.Fragment=qf;et.Lazy=tp;et.Memo=ep;et.Portal=x_;et.Profiler=Kf;et.StrictMode=Gf;et.Suspense=Zf;et.isAsyncMode=function(t){return lA(t)||Zn(t)===E_};et.isConcurrentMode=lA;et.isContextConsumer=function(t){return Zn(t)===Xf};et.isContextProvider=function(t){return Zn(t)===Yf};et.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===b_};et.isForwardRef=function(t){return Zn(t)===Jf};et.isFragment=function(t){return Zn(t)===qf};et.isLazy=function(t){return Zn(t)===tp};et.isMemo=function(t){return Zn(t)===ep};et.isPortal=function(t){return Zn(t)===x_};et.isProfiler=function(t){return Zn(t)===Kf};et.isStrictMode=function(t){return Zn(t)===Gf};et.isSuspense=function(t){return Zn(t)===Zf};et.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===qf||t===Qf||t===Kf||t===Gf||t===Zf||t===hz||typeof t=="object"&&t!==null&&(t.$$typeof===tp||t.$$typeof===ep||t.$$typeof===Yf||t.$$typeof===Xf||t.$$typeof===Jf||t.$$typeof===pz||t.$$typeof===mz||t.$$typeof===gz||t.$$typeof===fz)};et.typeOf=Zn;oA.exports=et;var vz=oA.exports,T_=vz,yz={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},_z={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},wz={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},uA={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},S_={};S_[T_.ForwardRef]=wz;S_[T_.Memo]=uA;function bE(t){return T_.isMemo(t)?uA:S_[t.$$typeof]||yz}var bz=Object.defineProperty,xz=Object.getOwnPropertyNames,xE=Object.getOwnPropertySymbols,Ez=Object.getOwnPropertyDescriptor,Tz=Object.getPrototypeOf,EE=Object.prototype;function cA(t,e,r){if(typeof e!="string"){if(EE){var i=Tz(e);i&&i!==EE&&cA(t,i,r)}var s=xz(e);xE&&(s=s.concat(xE(e)));for(var a=bE(t),o=bE(e),l=0;l<s.length;++l){var u=s[l];if(!_z[u]&&!(r&&r[u])&&!(o&&o[u])&&!(a&&a[u])){var c=Ez(e,u);try{bz(t,u,c)}catch{}}}}return t}var Sz=cA;const TE=Uu(Sz);var dA={exports:{}},st={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var np=60103,rp=60106,uc=60107,cc=60108,dc=60114,hc=60109,fc=60110,pc=60112,mc=60113,I_=60120,gc=60115,vc=60116,hA=60121,fA=60122,pA=60117,mA=60129,gA=60131;if(typeof Symbol=="function"&&Symbol.for){var Kt=Symbol.for;np=Kt("react.element"),rp=Kt("react.portal"),uc=Kt("react.fragment"),cc=Kt("react.strict_mode"),dc=Kt("react.profiler"),hc=Kt("react.provider"),fc=Kt("react.context"),pc=Kt("react.forward_ref"),mc=Kt("react.suspense"),I_=Kt("react.suspense_list"),gc=Kt("react.memo"),vc=Kt("react.lazy"),hA=Kt("react.block"),fA=Kt("react.server.block"),pA=Kt("react.fundamental"),mA=Kt("react.debug_trace_mode"),gA=Kt("react.legacy_hidden")}function Pr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case np:switch(t=t.type,t){case uc:case dc:case cc:case mc:case I_:return t;default:switch(t=t&&t.$$typeof,t){case fc:case pc:case vc:case gc:case hc:return t;default:return e}}case rp:return e}}}var Iz=hc,kz=np,Cz=pc,Az=uc,Pz=vc,Rz=gc,Dz=rp,Nz=dc,Mz=cc,Lz=mc;st.ContextConsumer=fc;st.ContextProvider=Iz;st.Element=kz;st.ForwardRef=Cz;st.Fragment=Az;st.Lazy=Pz;st.Memo=Rz;st.Portal=Dz;st.Profiler=Nz;st.StrictMode=Mz;st.Suspense=Lz;st.isAsyncMode=function(){return!1};st.isConcurrentMode=function(){return!1};st.isContextConsumer=function(t){return Pr(t)===fc};st.isContextProvider=function(t){return Pr(t)===hc};st.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===np};st.isForwardRef=function(t){return Pr(t)===pc};st.isFragment=function(t){return Pr(t)===uc};st.isLazy=function(t){return Pr(t)===vc};st.isMemo=function(t){return Pr(t)===gc};st.isPortal=function(t){return Pr(t)===rp};st.isProfiler=function(t){return Pr(t)===dc};st.isStrictMode=function(t){return Pr(t)===cc};st.isSuspense=function(t){return Pr(t)===mc};st.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===uc||t===dc||t===mA||t===cc||t===mc||t===I_||t===gA||typeof t=="object"&&t!==null&&(t.$$typeof===vc||t.$$typeof===gc||t.$$typeof===hc||t.$$typeof===fc||t.$$typeof===pc||t.$$typeof===pA||t.$$typeof===hA||t[0]===fA)};st.typeOf=Pr;dA.exports=st;var Oz=dA.exports,jz=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Vz=["reactReduxForwardedRef"],Fz=[],Uz=[null,null];function Bz(t,e){var r=t[1];return[e.payload,r+1]}function SE(t,e,r){aA(function(){return t.apply(void 0,e)},r)}function zz(t,e,r,i,s,a,o){t.current=i,e.current=s,r.current=!1,a.current&&(a.current=null,o())}function $z(t,e,r,i,s,a,o,l,u,c){if(t){var h=!1,f=null,p=function(){if(!h){var A=e.getState(),D,T;try{D=i(A,s.current)}catch(x){T=x,f=x}T||(f=null),D===a.current?o.current||u():(a.current=D,l.current=D,o.current=!0,c({type:"STORE_UPDATED",payload:{error:T}}))}};r.onStateChange=p,r.trySubscribe(),p();var m=function(){if(h=!0,r.tryUnsubscribe(),r.onStateChange=null,f)throw f};return m}}var Hz=function(){return[null,0]};function Wz(t,e){e===void 0&&(e={});var r=e,i=r.getDisplayName,s=i===void 0?function(b){return"ConnectAdvanced("+b+")"}:i,a=r.methodName,o=a===void 0?"connectAdvanced":a,l=r.renderCountProp,u=l===void 0?void 0:l,c=r.shouldHandleStateChanges,h=c===void 0?!0:c,f=r.storeKey,p=f===void 0?"store":f;r.withRef;var m=r.forwardRef,w=m===void 0?!1:m,A=r.context,D=A===void 0?rA:A,T=Bh(r,jz),x=D;return function(P){var U=P.displayName||P.name||"Component",V=s(U),R=xe({},T,{getDisplayName:s,methodName:o,renderCountProp:u,shouldHandleStateChanges:h,storeKey:p,displayName:V,wrappedComponentName:U,WrappedComponent:P}),I=T.pure;function y(K){return t(K.dispatch,R)}var _=I?M.useMemo:function(K){return K()};function S(K){var ie=M.useMemo(function(){var z=K.reactReduxForwardedRef,X=Bh(K,Vz);return[K.context,z,X]},[K]),oe=ie[0],fe=ie[1],W=ie[2],Y=M.useMemo(function(){return oe&&oe.Consumer&&Oz.isContextConsumer(Pe.createElement(oe.Consumer,null))?oe:x},[oe,x]),se=M.useContext(Y),re=!!K.store&&!!K.store.getState&&!!K.store.dispatch;se&&se.store;var q=re?K.store:se.store,H=M.useMemo(function(){return y(q)},[q]),J=M.useMemo(function(){if(!h)return Uz;var z=sA(q,re?null:se.subscription),X=z.notifyNestedSubs.bind(z);return[z,X]},[q,re,se]),Q=J[0],ce=J[1],ge=M.useMemo(function(){return re?se:xe({},se,{subscription:Q})},[re,se,Q]),je=M.useReducer(Bz,Fz,Hz),Re=je[0],He=Re[0],We=je[1];if(He&&He.error)throw He.error;var Xe=M.useRef(),Ke=M.useRef(W),qe=M.useRef(),nt=M.useRef(!1),C=_(function(){return qe.current&&W===Ke.current?qe.current:H(q.getState(),W)},[q,He,W]);SE(zz,[Ke,Xe,nt,W,C,qe,ce]),SE($z,[h,q,Q,H,Ke,Xe,nt,qe,ce,We],[q,Q,H]);var j=M.useMemo(function(){return Pe.createElement(P,xe({},C,{ref:fe}))},[fe,P,C]),F=M.useMemo(function(){return h?Pe.createElement(Y.Provider,{value:ge},j):j},[Y,j,ge]);return F}var O=I?Pe.memo(S):S;if(O.WrappedComponent=P,O.displayName=S.displayName=V,w){var N=Pe.forwardRef(function(ie,oe){return Pe.createElement(O,xe({},ie,{reactReduxForwardedRef:oe}))});return N.displayName=V,N.WrappedComponent=P,TE(N,P)}return TE(O,P)}}function IE(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function bm(t,e){if(IE(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(e,r[s])||!IE(t[r[s]],e[r[s]]))return!1;return!0}function qz(t,e){var r={},i=function(o){var l=t[o];typeof l=="function"&&(r[o]=function(){return e(l.apply(void 0,arguments))})};for(var s in t)i(s);return r}function k_(t){return function(r,i){var s=t(r,i);function a(){return s}return a.dependsOnOwnProps=!1,a}}function kE(t){return t.dependsOnOwnProps!==null&&t.dependsOnOwnProps!==void 0?!!t.dependsOnOwnProps:t.length!==1}function vA(t,e){return function(i,s){s.displayName;var a=function(l,u){return a.dependsOnOwnProps?a.mapToProps(l,u):a.mapToProps(l)};return a.dependsOnOwnProps=!0,a.mapToProps=function(l,u){a.mapToProps=t,a.dependsOnOwnProps=kE(t);var c=a(l,u);return typeof c=="function"&&(a.mapToProps=c,a.dependsOnOwnProps=kE(c),c=a(l,u)),c},a}}function Gz(t){return typeof t=="function"?vA(t):void 0}function Kz(t){return t?void 0:k_(function(e){return{dispatch:e}})}function Yz(t){return t&&typeof t=="object"?k_(function(e){return qz(t,e)}):void 0}const Xz=[Gz,Kz,Yz];function Qz(t){return typeof t=="function"?vA(t):void 0}function Jz(t){return t?void 0:k_(function(){return{}})}const Zz=[Qz,Jz];function e$(t,e,r){return xe({},r,t,e)}function t$(t){return function(r,i){i.displayName;var s=i.pure,a=i.areMergedPropsEqual,o=!1,l;return function(c,h,f){var p=t(c,h,f);return o?(!s||!a(p,l))&&(l=p):(o=!0,l=p),l}}}function n$(t){return typeof t=="function"?t$(t):void 0}function r$(t){return t?void 0:function(){return e$}}const i$=[n$,r$];var s$=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function a$(t,e,r,i){return function(a,o){return r(t(a,o),e(i,o),o)}}function o$(t,e,r,i,s){var a=s.areStatesEqual,o=s.areOwnPropsEqual,l=s.areStatePropsEqual,u=!1,c,h,f,p,m;function w(b,P){return c=b,h=P,f=t(c,h),p=e(i,h),m=r(f,p,h),u=!0,m}function A(){return f=t(c,h),e.dependsOnOwnProps&&(p=e(i,h)),m=r(f,p,h),m}function D(){return t.dependsOnOwnProps&&(f=t(c,h)),e.dependsOnOwnProps&&(p=e(i,h)),m=r(f,p,h),m}function T(){var b=t(c,h),P=!l(b,f);return f=b,P&&(m=r(f,p,h)),m}function x(b,P){var U=!o(P,h),V=!a(b,c,P,h);return c=b,h=P,U&&V?A():U?D():V?T():m}return function(P,U){return u?x(P,U):w(P,U)}}function l$(t,e){var r=e.initMapStateToProps,i=e.initMapDispatchToProps,s=e.initMergeProps,a=Bh(e,s$),o=r(t,a),l=i(t,a),u=s(t,a),c=a.pure?o$:a$;return c(o,l,u,t,a)}var u$=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function xm(t,e,r){for(var i=e.length-1;i>=0;i--){var s=e[i](t);if(s)return s}return function(a,o){throw new Error("Invalid value of type "+typeof t+" for "+r+" argument when connecting component "+o.wrappedComponentName+".")}}function c$(t,e){return t===e}function d$(t){var e=t===void 0?{}:t,r=e.connectHOC,i=r===void 0?Wz:r,s=e.mapStateToPropsFactories,a=s===void 0?Zz:s,o=e.mapDispatchToPropsFactories,l=o===void 0?Xz:o,u=e.mergePropsFactories,c=u===void 0?i$:u,h=e.selectorFactory,f=h===void 0?l$:h;return function(m,w,A,D){D===void 0&&(D={});var T=D,x=T.pure,b=x===void 0?!0:x,P=T.areStatesEqual,U=P===void 0?c$:P,V=T.areOwnPropsEqual,R=V===void 0?bm:V,I=T.areStatePropsEqual,y=I===void 0?bm:I,_=T.areMergedPropsEqual,S=_===void 0?bm:_,O=Bh(T,u$),N=xm(m,a,"mapStateToProps"),K=xm(w,l,"mapDispatchToProps"),ie=xm(A,c,"mergeProps");return i(f,xe({methodName:"connect",getDisplayName:function(fe){return"Connect("+fe+")"},shouldHandleStateChanges:!!m,initMapStateToProps:N,initMapDispatchToProps:K,initMergeProps:ie,pure:b,areStatesEqual:U,areOwnPropsEqual:R,areStatePropsEqual:y,areMergedPropsEqual:S},O))}}const yA=d$();lz(vy.unstable_batchedUpdates);function h$(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function _A(t,e){var r=M.useState(function(){return{inputs:e,result:t()}})[0],i=M.useRef(!0),s=M.useRef(r),a=i.current||!!(e&&s.current.inputs&&h$(e,s.current.inputs)),o=a?s.current:{inputs:e,result:t()};return M.useEffect(function(){i.current=!1,s.current=o},[o]),o.result}function f$(t,e){return _A(function(){return t},e)}var ze=_A,_e=f$,p$="Invariant failed";function m$(t,e){throw new Error(p$)}var Tr=function(e){var r=e.top,i=e.right,s=e.bottom,a=e.left,o=i-a,l=s-r,u={top:r,right:i,bottom:s,left:a,width:o,height:l,x:a,y:r,center:{x:(i+a)/2,y:(s+r)/2}};return u},C_=function(e,r){return{top:e.top-r.top,left:e.left-r.left,bottom:e.bottom+r.bottom,right:e.right+r.right}},CE=function(e,r){return{top:e.top+r.top,left:e.left+r.left,bottom:e.bottom-r.bottom,right:e.right-r.right}},g$=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},Em={top:0,right:0,bottom:0,left:0},A_=function(e){var r=e.borderBox,i=e.margin,s=i===void 0?Em:i,a=e.border,o=a===void 0?Em:a,l=e.padding,u=l===void 0?Em:l,c=Tr(C_(r,s)),h=Tr(CE(r,o)),f=Tr(CE(h,u));return{marginBox:c,borderBox:Tr(r),paddingBox:h,contentBox:f,margin:s,border:o,padding:u}},tr=function(e){var r=e.slice(0,-2),i=e.slice(-2);if(i!=="px")return 0;var s=Number(r);return isNaN(s)&&m$(),s},v$=function(){return{x:window.pageXOffset,y:window.pageYOffset}},zh=function(e,r){var i=e.borderBox,s=e.border,a=e.margin,o=e.padding,l=g$(i,r);return A_({borderBox:l,border:s,margin:a,padding:o})},$h=function(e,r){return r===void 0&&(r=v$()),zh(e,r)},wA=function(e,r){var i={top:tr(r.marginTop),right:tr(r.marginRight),bottom:tr(r.marginBottom),left:tr(r.marginLeft)},s={top:tr(r.paddingTop),right:tr(r.paddingRight),bottom:tr(r.paddingBottom),left:tr(r.paddingLeft)},a={top:tr(r.borderTopWidth),right:tr(r.borderRightWidth),bottom:tr(r.borderBottomWidth),left:tr(r.borderLeftWidth)};return A_({borderBox:e,margin:i,padding:s,border:a})},bA=function(e){var r=e.getBoundingClientRect(),i=window.getComputedStyle(e);return wA(r,i)},AE=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function y$(t,e){return!!(t===e||AE(t)&&AE(e))}function _$(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!y$(t[r],e[r]))return!1;return!0}function zt(t,e){e===void 0&&(e=_$);var r,i=[],s,a=!1;function o(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return a&&r===this&&e(l,i)||(s=t.apply(this,l),a=!0,r=this,i=l),s}return o}var Lu=function(e){var r=[],i=null,s=function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];r=l,!i&&(i=requestAnimationFrame(function(){i=null,e.apply(void 0,r)}))};return s.cancel=function(){i&&(cancelAnimationFrame(i),i=null)},s};function xA(t,e){}xA.bind(null,"warn");xA.bind(null,"error");function ls(){}function w$(t,e){return xe({},t,{},e)}function ar(t,e,r){var i=e.map(function(s){var a=w$(r,s.options);return t.addEventListener(s.eventName,s.fn,a),function(){t.removeEventListener(s.eventName,s.fn,a)}});return function(){i.forEach(function(a){a()})}}var b$="Invariant failed";function Hh(t){this.message=t}Hh.prototype.toString=function(){return this.message};function ae(t,e){throw new Hh(b$)}var x$=function(t){eA(e,t);function e(){for(var i,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return i=t.call.apply(t,[this].concat(a))||this,i.callbacks=null,i.unbind=ls,i.onWindowError=function(l){var u=i.getCallbacks();u.isDragging()&&u.tryAbort();var c=l.error;c instanceof Hh&&l.preventDefault()},i.getCallbacks=function(){if(!i.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return i.callbacks},i.setCallbacks=function(l){i.callbacks=l},i}var r=e.prototype;return r.componentDidMount=function(){this.unbind=ar(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(s){if(s instanceof Hh){this.setState({});return}throw s},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},e}(Pe.Component),E$=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Wh=function(e){return e+1},T$=function(e){return`
  You have lifted an item in position `+Wh(e.source.index)+`
`},EA=function(e,r){var i=e.droppableId===r.droppableId,s=Wh(e.index),a=Wh(r.index);return i?`
      You have moved the item from position `+s+`
      to position `+a+`
    `:`
    You have moved the item from position `+s+`
    in list `+e.droppableId+`
    to list `+r.droppableId+`
    in position `+a+`
  `},TA=function(e,r,i){var s=r.droppableId===i.droppableId;return s?`
      The item `+e+`
      has been combined with `+i.draggableId:`
      The item `+e+`
      in list `+r.droppableId+`
      has been combined with `+i.draggableId+`
      in list `+i.droppableId+`
    `},S$=function(e){var r=e.destination;if(r)return EA(e.source,r);var i=e.combine;return i?TA(e.draggableId,e.source,i):"You are over an area that cannot be dropped on"},PE=function(e){return`
  The item has returned to its starting position
  of `+Wh(e.index)+`
`},I$=function(e){if(e.reason==="CANCEL")return`
      Movement cancelled.
      `+PE(e.source)+`
    `;var r=e.destination,i=e.combine;return r?`
      You have dropped the item.
      `+EA(e.source,r)+`
    `:i?`
      You have dropped the item.
      `+TA(e.draggableId,e.source,i)+`
    `:`
    The item has been dropped while not over a drop area.
    `+PE(e.source)+`
  `},$d={dragHandleUsageInstructions:E$,onDragStart:T$,onDragUpdate:S$,onDragEnd:I$},$t={x:0,y:0},Jt=function(e,r){return{x:e.x+r.x,y:e.y+r.y}},Hn=function(e,r){return{x:e.x-r.x,y:e.y-r.y}},us=function(e,r){return e.x===r.x&&e.y===r.y},Go=function(e){return{x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}},ca=function(e,r,i){var s;return i===void 0&&(i=0),s={},s[e]=r,s[e==="x"?"y":"x"]=i,s},Ou=function(e,r){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))},RE=function(e,r){return Math.min.apply(Math,r.map(function(i){return Ou(e,i)}))},SA=function(e){return function(r){return{x:e(r.x),y:e(r.y)}}},k$=function(t,e){var r=Tr({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return r.width<=0||r.height<=0?null:r},yc=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},DE=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},C$={top:0,right:0,bottom:0,left:0},A$=function(e,r){return r?yc(e,r.scroll.diff.displacement):e},P$=function(e,r,i){if(i&&i.increasedBy){var s;return xe({},e,(s={},s[r.end]=e[r.end]+i.increasedBy[r.line],s))}return e},R$=function(e,r){return r&&r.shouldClipSubject?k$(r.pageMarginBox,e):Tr(e)},Po=function(t){var e=t.page,r=t.withPlaceholder,i=t.axis,s=t.frame,a=A$(e.marginBox,s),o=P$(a,i,r),l=R$(o,s);return{page:e,withPlaceholder:r,active:l}},P_=function(t,e){t.frame||ae();var r=t.frame,i=Hn(e,r.scroll.initial),s=Go(i),a=xe({},r,{scroll:{initial:r.scroll.initial,current:e,diff:{value:i,displacement:s},max:r.scroll.max}}),o=Po({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:a}),l=xe({},t,{frame:a,subject:o});return l};function qh(t){return Object.values?Object.values(t):Object.keys(t).map(function(e){return t[e]})}function R_(t,e){if(t.findIndex)return t.findIndex(e);for(var r=0;r<t.length;r++)if(e(t[r]))return r;return-1}function ks(t,e){if(t.find)return t.find(e);var r=R_(t,e);if(r!==-1)return t[r]}function IA(t){return Array.prototype.slice.call(t)}var kA=zt(function(t){return t.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),CA=zt(function(t){return t.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),ip=zt(function(t){return qh(t)}),D$=zt(function(t){return qh(t)}),Ko=zt(function(t,e){var r=D$(e).filter(function(i){return t===i.descriptor.droppableId}).sort(function(i,s){return i.descriptor.index-s.descriptor.index});return r});function D_(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function sp(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var ap=zt(function(t,e){return e.filter(function(r){return r.descriptor.id!==t.descriptor.id})}),N$=function(t){var e=t.isMovingForward,r=t.draggable,i=t.destination,s=t.insideDestination,a=t.previousImpact;if(!i.isCombineEnabled)return null;var o=D_(a);if(!o)return null;function l(A){var D={type:"COMBINE",combine:{draggableId:A,droppableId:i.descriptor.id}};return xe({},a,{at:D})}var u=a.displaced.all,c=u.length?u[0]:null;if(e)return c?l(c):null;var h=ap(r,s);if(!c){if(!h.length)return null;var f=h[h.length-1];return l(f.descriptor.id)}var p=R_(h,function(A){return A.descriptor.id===c});p===-1&&ae();var m=p-1;if(m<0)return null;var w=h[m];return l(w.descriptor.id)},Yo=function(t,e){return t.descriptor.droppableId===e.descriptor.id},AA={point:$t,value:0},ju={invisible:{},visible:{},all:[]},M$={displaced:ju,displacedBy:AA,at:null},ur=function(t,e){return function(r){return t<=r&&r<=e}},PA=function(t){var e=ur(t.top,t.bottom),r=ur(t.left,t.right);return function(i){var s=e(i.top)&&e(i.bottom)&&r(i.left)&&r(i.right);if(s)return!0;var a=e(i.top)||e(i.bottom),o=r(i.left)||r(i.right),l=a&&o;if(l)return!0;var u=i.top<t.top&&i.bottom>t.bottom,c=i.left<t.left&&i.right>t.right,h=u&&c;if(h)return!0;var f=u&&o||c&&a;return f}},L$=function(t){var e=ur(t.top,t.bottom),r=ur(t.left,t.right);return function(i){var s=e(i.top)&&e(i.bottom)&&r(i.left)&&r(i.right);return s}},N_={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},RA={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},O$=function(t){return function(e){var r=ur(e.top,e.bottom),i=ur(e.left,e.right);return function(s){return t===N_?r(s.top)&&r(s.bottom):i(s.left)&&i(s.right)}}},j$=function(e,r){var i=r.frame?r.frame.scroll.diff.displacement:$t;return yc(e,i)},V$=function(e,r,i){return r.subject.active?i(r.subject.active)(e):!1},F$=function(e,r,i){return i(r)(e)},M_=function(e){var r=e.target,i=e.destination,s=e.viewport,a=e.withDroppableDisplacement,o=e.isVisibleThroughFrameFn,l=a?j$(r,i):r;return V$(l,i,o)&&F$(l,s,o)},U$=function(e){return M_(xe({},e,{isVisibleThroughFrameFn:PA}))},DA=function(e){return M_(xe({},e,{isVisibleThroughFrameFn:L$}))},B$=function(e){return M_(xe({},e,{isVisibleThroughFrameFn:O$(e.destination.axis)}))},z$=function(e,r,i){if(typeof i=="boolean")return i;if(!r)return!0;var s=r.invisible,a=r.visible;if(s[e])return!1;var o=a[e];return o?o.shouldAnimate:!0};function $$(t,e){var r=t.page.marginBox,i={top:e.point.y,right:0,bottom:0,left:e.point.x};return Tr(C_(r,i))}function Vu(t){var e=t.afterDragging,r=t.destination,i=t.displacedBy,s=t.viewport,a=t.forceShouldAnimate,o=t.last;return e.reduce(function(u,c){var h=$$(c,i),f=c.descriptor.id;u.all.push(f);var p=U$({target:h,destination:r,viewport:s,withDroppableDisplacement:!0});if(!p)return u.invisible[c.descriptor.id]=!0,u;var m=z$(f,o,a),w={draggableId:f,shouldAnimate:m};return u.visible[f]=w,u},{all:[],visible:{},invisible:{}})}function H$(t,e){if(!t.length)return 0;var r=t[t.length-1].descriptor.index;return e.inHomeList?r:r+1}function NE(t){var e=t.insideDestination,r=t.inHomeList,i=t.displacedBy,s=t.destination,a=H$(e,{inHomeList:r});return{displaced:ju,displacedBy:i,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:a}}}}function Gh(t){var e=t.draggable,r=t.insideDestination,i=t.destination,s=t.viewport,a=t.displacedBy,o=t.last,l=t.index,u=t.forceShouldAnimate,c=Yo(e,i);if(l==null)return NE({insideDestination:r,inHomeList:c,displacedBy:a,destination:i});var h=ks(r,function(A){return A.descriptor.index===l});if(!h)return NE({insideDestination:r,inHomeList:c,displacedBy:a,destination:i});var f=ap(e,r),p=r.indexOf(h),m=f.slice(p),w=Vu({afterDragging:m,destination:i,displacedBy:a,last:o,viewport:s.frame,forceShouldAnimate:u});return{displaced:w,displacedBy:a,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:l}}}}function ws(t,e){return!!e.effected[t]}var W$=function(t){var e=t.isMovingForward,r=t.destination,i=t.draggables,s=t.combine,a=t.afterCritical;if(!r.isCombineEnabled)return null;var o=s.draggableId,l=i[o],u=l.descriptor.index,c=ws(o,a);return c?e?u:u-1:e?u+1:u},q$=function(t){var e=t.isMovingForward,r=t.isInHomeList,i=t.insideDestination,s=t.location;if(!i.length)return null;var a=s.index,o=e?a+1:a-1,l=i[0].descriptor.index,u=i[i.length-1].descriptor.index,c=r?u:u+1;return o<l||o>c?null:o},G$=function(t){var e=t.isMovingForward,r=t.isInHomeList,i=t.draggable,s=t.draggables,a=t.destination,o=t.insideDestination,l=t.previousImpact,u=t.viewport,c=t.afterCritical,h=l.at;if(h||ae(),h.type==="REORDER"){var f=q$({isMovingForward:e,isInHomeList:r,location:h.destination,insideDestination:o});return f==null?null:Gh({draggable:i,insideDestination:o,destination:a,viewport:u,last:l.displaced,displacedBy:l.displacedBy,index:f})}var p=W$({isMovingForward:e,destination:a,displaced:l.displaced,draggables:s,combine:h.combine,afterCritical:c});return p==null?null:Gh({draggable:i,insideDestination:o,destination:a,viewport:u,last:l.displaced,displacedBy:l.displacedBy,index:p})},K$=function(t){var e=t.displaced,r=t.afterCritical,i=t.combineWith,s=t.displacedBy,a=!!(e.visible[i]||e.invisible[i]);return ws(i,r)?a?$t:Go(s.point):a?s.point:$t},Y$=function(t){var e=t.afterCritical,r=t.impact,i=t.draggables,s=sp(r);s||ae();var a=s.draggableId,o=i[a].page.borderBox.center,l=K$({displaced:r.displaced,afterCritical:e,combineWith:a,displacedBy:r.displacedBy});return Jt(o,l)},NA=function(e,r){return r.margin[e.start]+r.borderBox[e.size]/2},X$=function(e,r){return r.margin[e.end]+r.borderBox[e.size]/2},L_=function(e,r,i){return r[e.crossAxisStart]+i.margin[e.crossAxisStart]+i.borderBox[e.crossAxisSize]/2},ME=function(e){var r=e.axis,i=e.moveRelativeTo,s=e.isMoving;return ca(r.line,i.marginBox[r.end]+NA(r,s),L_(r,i.marginBox,s))},LE=function(e){var r=e.axis,i=e.moveRelativeTo,s=e.isMoving;return ca(r.line,i.marginBox[r.start]-X$(r,s),L_(r,i.marginBox,s))},Q$=function(e){var r=e.axis,i=e.moveInto,s=e.isMoving;return ca(r.line,i.contentBox[r.start]+NA(r,s),L_(r,i.contentBox,s))},J$=function(t){var e=t.impact,r=t.draggable,i=t.draggables,s=t.droppable,a=t.afterCritical,o=Ko(s.descriptor.id,i),l=r.page,u=s.axis;if(!o.length)return Q$({axis:u,moveInto:s.page,isMoving:l});var c=e.displaced,h=e.displacedBy,f=c.all[0];if(f){var p=i[f];if(ws(f,a))return LE({axis:u,moveRelativeTo:p.page,isMoving:l});var m=zh(p.page,h.point);return LE({axis:u,moveRelativeTo:m,isMoving:l})}var w=o[o.length-1];if(w.descriptor.id===r.descriptor.id)return l.borderBox.center;if(ws(w.descriptor.id,a)){var A=zh(w.page,Go(a.displacedBy.point));return ME({axis:u,moveRelativeTo:A,isMoving:l})}return ME({axis:u,moveRelativeTo:w.page,isMoving:l})},vv=function(t,e){var r=t.frame;return r?Jt(e,r.scroll.diff.displacement):e},Z$=function(e){var r=e.impact,i=e.draggable,s=e.droppable,a=e.draggables,o=e.afterCritical,l=i.page.borderBox.center,u=r.at;return!s||!u?l:u.type==="REORDER"?J$({impact:r,draggable:i,draggables:a,droppable:s,afterCritical:o}):Y$({impact:r,draggables:a,afterCritical:o})},op=function(t){var e=Z$(t),r=t.droppable,i=r?vv(r,e):e;return i},MA=function(t,e){var r=Hn(e,t.scroll.initial),i=Go(r),s=Tr({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),a={frame:s,scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:r,displacement:i}}};return a};function OE(t,e){return t.map(function(r){return e[r]})}function e9(t,e){for(var r=0;r<e.length;r++){var i=e[r].visible[t];if(i)return i}return null}var t9=function(t){var e=t.impact,r=t.viewport,i=t.destination,s=t.draggables,a=t.maxScrollChange,o=MA(r,Jt(r.scroll.current,a)),l=i.frame?P_(i,Jt(i.frame.scroll.current,a)):i,u=e.displaced,c=Vu({afterDragging:OE(u.all,s),destination:i,displacedBy:e.displacedBy,viewport:o.frame,last:u,forceShouldAnimate:!1}),h=Vu({afterDragging:OE(u.all,s),destination:l,displacedBy:e.displacedBy,viewport:r.frame,last:u,forceShouldAnimate:!1}),f={},p={},m=[u,c,h];u.all.forEach(function(A){var D=e9(A,m);if(D){p[A]=D;return}f[A]=!0});var w=xe({},e,{displaced:{all:u.all,invisible:f,visible:p}});return w},n9=function(t,e){return Jt(t.scroll.diff.displacement,e)},O_=function(t){var e=t.pageBorderBoxCenter,r=t.draggable,i=t.viewport,s=n9(i,e),a=Hn(s,r.page.borderBox.center);return Jt(r.client.borderBox.center,a)},LA=function(t){var e=t.draggable,r=t.destination,i=t.newPageBorderBoxCenter,s=t.viewport,a=t.withDroppableDisplacement,o=t.onlyOnMainAxis,l=o===void 0?!1:o,u=Hn(i,e.page.borderBox.center),c=yc(e.page.borderBox,u),h={target:c,destination:r,withDroppableDisplacement:a,viewport:s};return l?B$(h):DA(h)},r9=function(t){var e=t.isMovingForward,r=t.draggable,i=t.destination,s=t.draggables,a=t.previousImpact,o=t.viewport,l=t.previousPageBorderBoxCenter,u=t.previousClientSelection,c=t.afterCritical;if(!i.isEnabled)return null;var h=Ko(i.descriptor.id,s),f=Yo(r,i),p=N$({isMovingForward:e,draggable:r,destination:i,insideDestination:h,previousImpact:a})||G$({isMovingForward:e,isInHomeList:f,draggable:r,draggables:s,destination:i,insideDestination:h,previousImpact:a,viewport:o,afterCritical:c});if(!p)return null;var m=op({impact:p,draggable:r,droppable:i,draggables:s,afterCritical:c}),w=LA({draggable:r,destination:i,newPageBorderBoxCenter:m,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(w){var A=O_({pageBorderBoxCenter:m,draggable:r,viewport:o});return{clientSelection:A,impact:p,scrollJumpRequest:null}}var D=Hn(m,l),T=t9({impact:p,viewport:o,destination:i,draggables:s,maxScrollChange:D});return{clientSelection:u,impact:T,scrollJumpRequest:D}},yn=function(e){var r=e.subject.active;return r||ae(),r},i9=function(t){var e=t.isMovingForward,r=t.pageBorderBoxCenter,i=t.source,s=t.droppables,a=t.viewport,o=i.subject.active;if(!o)return null;var l=i.axis,u=ur(o[l.start],o[l.end]),c=ip(s).filter(function(f){return f!==i}).filter(function(f){return f.isEnabled}).filter(function(f){return!!f.subject.active}).filter(function(f){return PA(a.frame)(yn(f))}).filter(function(f){var p=yn(f);return e?o[l.crossAxisEnd]<p[l.crossAxisEnd]:p[l.crossAxisStart]<o[l.crossAxisStart]}).filter(function(f){var p=yn(f),m=ur(p[l.start],p[l.end]);return u(p[l.start])||u(p[l.end])||m(o[l.start])||m(o[l.end])}).sort(function(f,p){var m=yn(f)[l.crossAxisStart],w=yn(p)[l.crossAxisStart];return e?m-w:w-m}).filter(function(f,p,m){return yn(f)[l.crossAxisStart]===yn(m[0])[l.crossAxisStart]});if(!c.length)return null;if(c.length===1)return c[0];var h=c.filter(function(f){var p=ur(yn(f)[l.start],yn(f)[l.end]);return p(r[l.line])});return h.length===1?h[0]:h.length>1?h.sort(function(f,p){return yn(f)[l.start]-yn(p)[l.start]})[0]:c.sort(function(f,p){var m=RE(r,DE(yn(f))),w=RE(r,DE(yn(p)));return m!==w?m-w:yn(f)[l.start]-yn(p)[l.start]})[0]},jE=function(e,r){var i=e.page.borderBox.center;return ws(e.descriptor.id,r)?Hn(i,r.displacedBy.point):i},s9=function(e,r){var i=e.page.borderBox;return ws(e.descriptor.id,r)?yc(i,Go(r.displacedBy.point)):i},a9=function(t){var e=t.pageBorderBoxCenter,r=t.viewport,i=t.destination,s=t.insideDestination,a=t.afterCritical,o=s.filter(function(l){return DA({target:s9(l,a),destination:i,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(l,u){var c=Ou(e,vv(i,jE(l,a))),h=Ou(e,vv(i,jE(u,a)));return c<h?-1:h<c?1:l.descriptor.index-u.descriptor.index});return o[0]||null},_c=zt(function(e,r){var i=r[e.line];return{value:i,point:ca(e.line,i)}}),o9=function(e,r,i){var s=e.axis;if(e.descriptor.mode==="virtual")return ca(s.line,r[s.line]);var a=e.subject.page.contentBox[s.size],o=Ko(e.descriptor.id,i),l=o.reduce(function(h,f){return h+f.client.marginBox[s.size]},0),u=l+r[s.line],c=u-a;return c<=0?null:ca(s.line,c)},OA=function(e,r){return xe({},e,{scroll:xe({},e.scroll,{max:r})})},jA=function(e,r,i){var s=e.frame;Yo(r,e)&&ae(),e.subject.withPlaceholder&&ae();var a=_c(e.axis,r.displaceBy).point,o=o9(e,a,i),l={placeholderSize:a,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){var u=Po({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:e.frame});return xe({},e,{subject:u})}var c=o?Jt(s.scroll.max,o):s.scroll.max,h=OA(s,c),f=Po({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:h});return xe({},e,{subject:f,frame:h})},l9=function(e){var r=e.subject.withPlaceholder;r||ae();var i=e.frame;if(!i){var s=Po({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return xe({},e,{subject:s})}var a=r.oldFrameMaxScroll;a||ae();var o=OA(i,a),l=Po({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return xe({},e,{subject:l,frame:o})},u9=function(t){var e=t.previousPageBorderBoxCenter,r=t.moveRelativeTo,i=t.insideDestination,s=t.draggable,a=t.draggables,o=t.destination,l=t.viewport,u=t.afterCritical;if(!r){if(i.length)return null;var c={displaced:ju,displacedBy:AA,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},h=op({impact:c,draggable:s,droppable:o,draggables:a,afterCritical:u}),f=Yo(s,o)?o:jA(o,s,a),p=LA({draggable:s,destination:f,newPageBorderBoxCenter:h,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return p?c:null}var m=e[o.axis.line]<=r.page.borderBox.center[o.axis.line],w=function(){var D=r.descriptor.index;return r.descriptor.id===s.descriptor.id||m?D:D+1}(),A=_c(o.axis,s.displaceBy);return Gh({draggable:s,insideDestination:i,destination:o,viewport:l,displacedBy:A,last:ju,index:w})},c9=function(t){var e=t.isMovingForward,r=t.previousPageBorderBoxCenter,i=t.draggable,s=t.isOver,a=t.draggables,o=t.droppables,l=t.viewport,u=t.afterCritical,c=i9({isMovingForward:e,pageBorderBoxCenter:r,source:s,droppables:o,viewport:l});if(!c)return null;var h=Ko(c.descriptor.id,a),f=a9({pageBorderBoxCenter:r,viewport:l,destination:c,insideDestination:h,afterCritical:u}),p=u9({previousPageBorderBoxCenter:r,destination:c,draggable:i,draggables:a,moveRelativeTo:f,insideDestination:h,viewport:l,afterCritical:u});if(!p)return null;var m=op({impact:p,draggable:i,droppable:c,draggables:a,afterCritical:u}),w=O_({pageBorderBoxCenter:m,draggable:i,viewport:l});return{clientSelection:w,impact:p,scrollJumpRequest:null}},Gn=function(t){var e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null},d9=function(e,r){var i=Gn(e);return i?r[i]:null},h9=function(t){var e=t.state,r=t.type,i=d9(e.impact,e.dimensions.droppables),s=!!i,a=e.dimensions.droppables[e.critical.droppable.id],o=i||a,l=o.axis.direction,u=l==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||l==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(u&&!s)return null;var c=r==="MOVE_DOWN"||r==="MOVE_RIGHT",h=e.dimensions.draggables[e.critical.draggable.id],f=e.current.page.borderBoxCenter,p=e.dimensions,m=p.draggables,w=p.droppables;return u?r9({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:h,destination:o,draggables:m,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):c9({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:h,isOver:o,draggables:m,droppables:w,viewport:e.viewport,afterCritical:e.afterCritical})};function Hs(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function VA(t){var e=ur(t.top,t.bottom),r=ur(t.left,t.right);return function(s){return e(s.y)&&r(s.x)}}function f9(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function p9(t){var e=t.pageBorderBox,r=t.draggable,i=t.candidates,s=r.page.borderBox.center,a=i.map(function(o){var l=o.axis,u=ca(o.axis.line,e.center[l.line],o.page.borderBox.center[l.crossAxisLine]);return{id:o.descriptor.id,distance:Ou(s,u)}}).sort(function(o,l){return l.distance-o.distance});return a[0]?a[0].id:null}function m9(t){var e=t.pageBorderBox,r=t.draggable,i=t.droppables,s=ip(i).filter(function(a){if(!a.isEnabled)return!1;var o=a.subject.active;if(!o||!f9(e,o))return!1;if(VA(o)(e.center))return!0;var l=a.axis,u=o.center[l.crossAxisLine],c=e[l.crossAxisStart],h=e[l.crossAxisEnd],f=ur(o[l.crossAxisStart],o[l.crossAxisEnd]),p=f(c),m=f(h);return!p&&!m?!0:p?c<u:h>u});return s.length?s.length===1?s[0].descriptor.id:p9({pageBorderBox:e,draggable:r,candidates:s}):null}var FA=function(e,r){return Tr(yc(e,r))},g9=function(t,e){var r=t.frame;return r?FA(e,r.scroll.diff.value):e};function UA(t){var e=t.displaced,r=t.id;return!!(e.visible[r]||e.invisible[r])}function v9(t){var e=t.draggable,r=t.closest,i=t.inHomeList;return r?i&&r.descriptor.index>e.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var y9=function(t){var e=t.pageBorderBoxWithDroppableScroll,r=t.draggable,i=t.destination,s=t.insideDestination,a=t.last,o=t.viewport,l=t.afterCritical,u=i.axis,c=_c(i.axis,r.displaceBy),h=c.value,f=e[u.start],p=e[u.end],m=ap(r,s),w=ks(m,function(D){var T=D.descriptor.id,x=D.page.borderBox.center[u.line],b=ws(T,l),P=UA({displaced:a,id:T});return b?P?p<=x:f<x-h:P?p<=x+h:f<x}),A=v9({draggable:r,closest:w,inHomeList:Yo(r,i)});return Gh({draggable:r,insideDestination:s,destination:i,viewport:o,last:a,displacedBy:c,index:A})},_9=4,w9=function(t){var e=t.draggable,r=t.pageBorderBoxWithDroppableScroll,i=t.previousImpact,s=t.destination,a=t.insideDestination,o=t.afterCritical;if(!s.isCombineEnabled)return null;var l=s.axis,u=_c(s.axis,e.displaceBy),c=u.value,h=r[l.start],f=r[l.end],p=ap(e,a),m=ks(p,function(A){var D=A.descriptor.id,T=A.page.borderBox,x=T[l.size],b=x/_9,P=ws(D,o),U=UA({displaced:i.displaced,id:D});return P?U?f>T[l.start]+b&&f<T[l.end]-b:h>T[l.start]-c+b&&h<T[l.end]-c-b:U?f>T[l.start]+c+b&&f<T[l.end]+c-b:h>T[l.start]+b&&h<T[l.end]-b});if(!m)return null;var w={displacedBy:u,displaced:i.displaced,at:{type:"COMBINE",combine:{draggableId:m.descriptor.id,droppableId:s.descriptor.id}}};return w},BA=function(t){var e=t.pageOffset,r=t.draggable,i=t.draggables,s=t.droppables,a=t.previousImpact,o=t.viewport,l=t.afterCritical,u=FA(r.page.borderBox,e),c=m9({pageBorderBox:u,draggable:r,droppables:s});if(!c)return M$;var h=s[c],f=Ko(h.descriptor.id,i),p=g9(h,u);return w9({pageBorderBoxWithDroppableScroll:p,draggable:r,previousImpact:a,destination:h,insideDestination:f,afterCritical:l})||y9({pageBorderBoxWithDroppableScroll:p,draggable:r,destination:h,insideDestination:f,last:a.displaced,viewport:o,afterCritical:l})},j_=function(t,e){var r;return xe({},t,(r={},r[e.descriptor.id]=e,r))},b9=function(e){var r=e.previousImpact,i=e.impact,s=e.droppables,a=Gn(r),o=Gn(i);if(!a||a===o)return s;var l=s[a];if(!l.subject.withPlaceholder)return s;var u=l9(l);return j_(s,u)},x9=function(t){var e=t.draggable,r=t.draggables,i=t.droppables,s=t.previousImpact,a=t.impact,o=b9({previousImpact:s,impact:a,droppables:i}),l=Gn(a);if(!l)return o;var u=i[l];if(Yo(e,u)||u.subject.withPlaceholder)return o;var c=jA(u,e,r);return j_(o,c)},ru=function(t){var e=t.state,r=t.clientSelection,i=t.dimensions,s=t.viewport,a=t.impact,o=t.scrollJumpRequest,l=s||e.viewport,u=i||e.dimensions,c=r||e.current.client.selection,h=Hn(c,e.initial.client.selection),f={offset:h,selection:c,borderBoxCenter:Jt(e.initial.client.borderBoxCenter,h)},p={selection:Jt(f.selection,l.scroll.current),borderBoxCenter:Jt(f.borderBoxCenter,l.scroll.current),offset:Jt(f.offset,l.scroll.diff.value)},m={client:f,page:p};if(e.phase==="COLLECTING")return xe({phase:"COLLECTING"},e,{dimensions:u,viewport:l,current:m});var w=u.draggables[e.critical.draggable.id],A=a||BA({pageOffset:p.offset,draggable:w,draggables:u.draggables,droppables:u.droppables,previousImpact:e.impact,viewport:l,afterCritical:e.afterCritical}),D=x9({draggable:w,impact:A,previousImpact:e.impact,draggables:u.draggables,droppables:u.droppables}),T=xe({},e,{current:m,dimensions:{draggables:u.draggables,droppables:D},impact:A,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return T};function E9(t,e){return t.map(function(r){return e[r]})}var zA=function(t){var e=t.impact,r=t.viewport,i=t.draggables,s=t.destination,a=t.forceShouldAnimate,o=e.displaced,l=E9(o.all,i),u=Vu({afterDragging:l,destination:s,displacedBy:e.displacedBy,viewport:r.frame,forceShouldAnimate:a,last:o});return xe({},e,{displaced:u})},$A=function(t){var e=t.impact,r=t.draggable,i=t.droppable,s=t.draggables,a=t.viewport,o=t.afterCritical,l=op({impact:e,draggable:r,draggables:s,droppable:i,afterCritical:o});return O_({pageBorderBoxCenter:l,draggable:r,viewport:a})},HA=function(t){var e=t.state,r=t.dimensions,i=t.viewport;e.movementMode!=="SNAP"&&ae();var s=e.impact,a=i||e.viewport,o=r||e.dimensions,l=o.draggables,u=o.droppables,c=l[e.critical.draggable.id],h=Gn(s);h||ae();var f=u[h],p=zA({impact:s,viewport:a,destination:f,draggables:l}),m=$A({impact:p,draggable:c,droppable:f,draggables:l,viewport:a,afterCritical:e.afterCritical});return ru({impact:p,clientSelection:m,state:e,dimensions:o,viewport:a})},T9=function(t){return{index:t.index,droppableId:t.droppableId}},WA=function(t){var e=t.draggable,r=t.home,i=t.draggables,s=t.viewport,a=_c(r.axis,e.displaceBy),o=Ko(r.descriptor.id,i),l=o.indexOf(e);l===-1&&ae();var u=o.slice(l+1),c=u.reduce(function(m,w){return m[w.descriptor.id]=!0,m},{}),h={inVirtualList:r.descriptor.mode==="virtual",displacedBy:a,effected:c},f=Vu({afterDragging:u,destination:r,displacedBy:a,last:null,viewport:s.frame,forceShouldAnimate:!1}),p={displaced:f,displacedBy:a,at:{type:"REORDER",destination:T9(e.descriptor)}};return{impact:p,afterCritical:h}},S9=function(t,e){return{draggables:t.draggables,droppables:j_(t.droppables,e)}},I9=function(t){var e=t.draggable,r=t.offset,i=t.initialWindowScroll,s=zh(e.client,r),a=$h(s,i),o=xe({},e,{placeholder:xe({},e.placeholder,{client:s}),client:s,page:a});return o},k9=function(t){var e=t.frame;return e||ae(),e},C9=function(t){var e=t.additions,r=t.updatedDroppables,i=t.viewport,s=i.scroll.diff.value;return e.map(function(a){var o=a.descriptor.droppableId,l=r[o],u=k9(l),c=u.scroll.diff.value,h=Jt(s,c),f=I9({draggable:a,offset:h,initialWindowScroll:i.scroll.initial});return f})},A9=function(t){var e=t.state,r=t.published,i=r.modified.map(function(b){var P=e.dimensions.droppables[b.droppableId],U=P_(P,b.scroll);return U}),s=xe({},e.dimensions.droppables,{},kA(i)),a=CA(C9({additions:r.additions,updatedDroppables:s,viewport:e.viewport})),o=xe({},e.dimensions.draggables,{},a);r.removals.forEach(function(b){delete o[b]});var l={droppables:s,draggables:o},u=Gn(e.impact),c=u?l.droppables[u]:null,h=l.draggables[e.critical.draggable.id],f=l.droppables[e.critical.droppable.id],p=WA({draggable:h,home:f,draggables:o,viewport:e.viewport}),m=p.impact,w=p.afterCritical,A=c&&c.isCombineEnabled?e.impact:m,D=BA({pageOffset:e.current.page.offset,draggable:l.draggables[e.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:A,viewport:e.viewport,afterCritical:w}),T=xe({phase:"DRAGGING"},e,{phase:"DRAGGING",impact:D,onLiftImpact:m,dimensions:l,afterCritical:w,forceShouldAnimate:!1});if(e.phase==="COLLECTING")return T;var x=xe({phase:"DROP_PENDING"},T,{phase:"DROP_PENDING",reason:e.reason,isWaiting:!1});return x},yv=function(e){return e.movementMode==="SNAP"},Tm=function(e,r,i){var s=S9(e.dimensions,r);return!yv(e)||i?ru({state:e,dimensions:s}):HA({state:e,dimensions:s})};function Sm(t){return t.isDragging&&t.movementMode==="SNAP"?xe({phase:"DRAGGING"},t,{scrollJumpRequest:null}):t}var VE={phase:"IDLE",completed:null,shouldFlush:!1},P9=function(t,e){if(t===void 0&&(t=VE),e.type==="FLUSH")return xe({},VE,{shouldFlush:!0});if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&ae();var r=e.payload,i=r.critical,s=r.clientSelection,a=r.viewport,o=r.dimensions,l=r.movementMode,u=o.draggables[i.draggable.id],c=o.droppables[i.droppable.id],h={selection:s,borderBoxCenter:u.client.borderBox.center,offset:$t},f={client:h,page:{selection:Jt(h.selection,a.scroll.initial),borderBoxCenter:Jt(h.selection,a.scroll.initial),offset:Jt(h.selection,a.scroll.diff.value)}},p=ip(o.droppables).every(function(We){return!We.isFixedOnPage}),m=WA({draggable:u,home:c,draggables:o.draggables,viewport:a}),w=m.impact,A=m.afterCritical,D={phase:"DRAGGING",isDragging:!0,critical:i,movementMode:l,dimensions:o,initial:f,current:f,isWindowScrollAllowed:p,impact:w,afterCritical:A,onLiftImpact:w,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null};return D}if(e.type==="COLLECTION_STARTING"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&ae();var T=xe({phase:"COLLECTING"},t,{phase:"COLLECTING"});return T}if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||ae(),A9({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;Hs(t)||ae();var x=e.payload.client;return us(x,t.current.client.selection)?t:ru({state:t,clientSelection:x,impact:yv(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return Sm(t);Hs(t)||ae();var b=e.payload,P=b.id,U=b.newScroll,V=t.dimensions.droppables[P];if(!V)return t;var R=P_(V,U);return Tm(t,R,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;Hs(t)||ae();var I=e.payload,y=I.id,_=I.isEnabled,S=t.dimensions.droppables[y];S||ae(),S.isEnabled===_&&ae();var O=xe({},S,{isEnabled:_});return Tm(t,O,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;Hs(t)||ae();var N=e.payload,K=N.id,ie=N.isCombineEnabled,oe=t.dimensions.droppables[K];oe||ae(),oe.isCombineEnabled===ie&&ae();var fe=xe({},oe,{isCombineEnabled:ie});return Tm(t,fe,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;Hs(t)||ae(),t.isWindowScrollAllowed||ae();var W=e.payload.newScroll;if(us(t.viewport.scroll.current,W))return Sm(t);var Y=MA(t.viewport,W);return yv(t)?HA({state:t,viewport:Y}):ru({state:t,viewport:Y})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Hs(t))return t;var se=e.payload.maxScroll;if(us(se,t.viewport.scroll.max))return t;var re=xe({},t.viewport,{scroll:xe({},t.viewport.scroll,{max:se})});return xe({phase:"DRAGGING"},t,{viewport:re})}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&ae();var q=h9({state:t,type:e.type});return q?ru({state:t,impact:q.impact,clientSelection:q.clientSelection,scrollJumpRequest:q.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){var H=e.payload.reason;t.phase!=="COLLECTING"&&ae();var J=xe({phase:"DROP_PENDING"},t,{phase:"DROP_PENDING",isWaiting:!0,reason:H});return J}if(e.type==="DROP_ANIMATE"){var Q=e.payload,ce=Q.completed,ge=Q.dropDuration,je=Q.newHomeClientOffset;t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||ae();var Re={phase:"DROP_ANIMATING",completed:ce,dropDuration:ge,newHomeClientOffset:je,dimensions:t.dimensions};return Re}if(e.type==="DROP_COMPLETE"){var He=e.payload.completed;return{phase:"IDLE",completed:He,shouldFlush:!1}}return t},R9=function(e){return{type:"BEFORE_INITIAL_CAPTURE",payload:e}},D9=function(e){return{type:"LIFT",payload:e}},N9=function(e){return{type:"INITIAL_PUBLISH",payload:e}},M9=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},L9=function(){return{type:"COLLECTION_STARTING",payload:null}},O9=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},j9=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},V9=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},qA=function(e){return{type:"MOVE",payload:e}},F9=function(e){return{type:"MOVE_BY_WINDOW_SCROLL",payload:e}},U9=function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}},B9=function(){return{type:"MOVE_UP",payload:null}},z9=function(){return{type:"MOVE_DOWN",payload:null}},$9=function(){return{type:"MOVE_RIGHT",payload:null}},H9=function(){return{type:"MOVE_LEFT",payload:null}},V_=function(){return{type:"FLUSH",payload:null}},W9=function(e){return{type:"DROP_ANIMATE",payload:e}},F_=function(e){return{type:"DROP_COMPLETE",payload:e}},GA=function(e){return{type:"DROP",payload:e}},q9=function(e){return{type:"DROP_PENDING",payload:e}},KA=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},G9=function(t){return function(e){var r=e.getState,i=e.dispatch;return function(s){return function(a){if(a.type!=="LIFT"){s(a);return}var o=a.payload,l=o.id,u=o.clientSelection,c=o.movementMode,h=r();h.phase==="DROP_ANIMATING"&&i(F_({completed:h.completed})),r().phase!=="IDLE"&&ae(),i(V_()),i(R9({draggableId:l,movementMode:c}));var f={shouldPublishImmediately:c==="SNAP"},p={draggableId:l,scrollOptions:f},m=t.startPublishing(p),w=m.critical,A=m.dimensions,D=m.viewport;i(N9({critical:w,dimensions:A,clientSelection:u,movementMode:c,viewport:D}))}}}},K9=function(t){return function(){return function(e){return function(r){r.type==="INITIAL_PUBLISH"&&t.dragging(),r.type==="DROP_ANIMATE"&&t.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&t.resting(),e(r)}}}},U_={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Fu={opacity:{drop:0,combining:.7},scale:{drop:.75}},B_={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Fs=B_.outOfTheWay+"s "+U_.outOfTheWay,iu={fluid:"opacity "+Fs,snap:"transform "+Fs+", opacity "+Fs,drop:function(e){var r=e+"s "+U_.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+Fs,placeholder:"height "+Fs+", width "+Fs+", margin "+Fs},FE=function(e){return us(e,$t)?null:"translate("+e.x+"px, "+e.y+"px)"},_v={moveTo:FE,drop:function(e,r){var i=FE(e);return i?r?i+" scale("+Fu.scale.drop+")":i:null}},wv=B_.minDropTime,YA=B_.maxDropTime,Y9=YA-wv,UE=1500,X9=.6,Q9=function(t){var e=t.current,r=t.destination,i=t.reason,s=Ou(e,r);if(s<=0)return wv;if(s>=UE)return YA;var a=s/UE,o=wv+Y9*a,l=i==="CANCEL"?o*X9:o;return Number(l.toFixed(2))},J9=function(t){var e=t.impact,r=t.draggable,i=t.dimensions,s=t.viewport,a=t.afterCritical,o=i.draggables,l=i.droppables,u=Gn(e),c=u?l[u]:null,h=l[r.descriptor.droppableId],f=$A({impact:e,draggable:r,draggables:o,afterCritical:a,droppable:c||h,viewport:s}),p=Hn(f,r.client.borderBox.center);return p},Z9=function(t){var e=t.draggables,r=t.reason,i=t.lastImpact,s=t.home,a=t.viewport,o=t.onLiftImpact;if(!i.at||r!=="DROP"){var l=zA({draggables:e,impact:o,destination:s,viewport:a,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(i.at.type==="REORDER")return{impact:i,didDropInsideDroppable:!0};var u=xe({},i,{displaced:ju});return{impact:u,didDropInsideDroppable:!0}},eH=function(t){var e=t.getState,r=t.dispatch;return function(i){return function(s){if(s.type!=="DROP"){i(s);return}var a=e(),o=s.payload.reason;if(a.phase==="COLLECTING"){r(q9({reason:o}));return}if(a.phase!=="IDLE"){var l=a.phase==="DROP_PENDING"&&a.isWaiting;l&&ae(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||ae();var u=a.critical,c=a.dimensions,h=c.draggables[a.critical.draggable.id],f=Z9({reason:o,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),p=f.impact,m=f.didDropInsideDroppable,w=m?D_(p):null,A=m?sp(p):null,D={index:u.draggable.index,droppableId:u.droppable.id},T={draggableId:h.descriptor.id,type:h.descriptor.type,source:D,reason:o,mode:a.movementMode,destination:w,combine:A},x=J9({impact:p,draggable:h,dimensions:c,viewport:a.viewport,afterCritical:a.afterCritical}),b={critical:a.critical,afterCritical:a.afterCritical,result:T,impact:p},P=!us(a.current.client.offset,x)||!!T.combine;if(!P){r(F_({completed:b}));return}var U=Q9({current:a.current.client.offset,destination:x,reason:o}),V={newHomeClientOffset:x,dropDuration:U,completed:b};r(W9(V))}}}},XA=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function tH(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||t()}}}function nH(t){var e=t.onWindowScroll;function r(){e(XA())}var i=Lu(r),s=tH(i),a=ls;function o(){return a!==ls}function l(){o()&&ae(),a=ar(window,[s])}function u(){o()||ae(),i.cancel(),a(),a=ls}return{start:l,stop:u,isActive:o}}var rH=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},iH=function(t){var e=nH({onWindowScroll:function(i){t.dispatch(F9({newScroll:i}))}});return function(r){return function(i){!e.isActive()&&i.type==="INITIAL_PUBLISH"&&e.start(),e.isActive()&&rH(i)&&e.stop(),r(i)}}},sH=function(t){var e=!1,r=!1,i=setTimeout(function(){r=!0}),s=function(o){e||r||(e=!0,t(o),clearTimeout(i))};return s.wasCalled=function(){return e},s},aH=function(){var t=[],e=function(a){var o=R_(t,function(c){return c.timerId===a});o===-1&&ae();var l=t.splice(o,1),u=l[0];u.callback()},r=function(a){var o=setTimeout(function(){return e(o)}),l={timerId:o,callback:a};t.push(l)},i=function(){if(t.length){var a=[].concat(t);t.length=0,a.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:r,flush:i}},oH=function(e,r){return e==null&&r==null?!0:e==null||r==null?!1:e.droppableId===r.droppableId&&e.index===r.index},lH=function(e,r){return e==null&&r==null?!0:e==null||r==null?!1:e.draggableId===r.draggableId&&e.droppableId===r.droppableId},uH=function(e,r){if(e===r)return!0;var i=e.draggable.id===r.draggable.id&&e.draggable.droppableId===r.draggable.droppableId&&e.draggable.type===r.draggable.type&&e.draggable.index===r.draggable.index,s=e.droppable.id===r.droppable.id&&e.droppable.type===r.droppable.type;return i&&s},Sl=function(e,r){r()},hd=function(e,r){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:r}},Im=function(e,r,i,s){if(!e){i(s(r));return}var a=sH(i),o={announce:a};e(r,o),a.wasCalled()||i(s(r))},cH=function(t,e){var r=aH(),i=null,s=function(p,m){i&&ae(),Sl("onBeforeCapture",function(){var w=t().onBeforeCapture;if(w){var A={draggableId:p,mode:m};w(A)}})},a=function(p,m){i&&ae(),Sl("onBeforeDragStart",function(){var w=t().onBeforeDragStart;w&&w(hd(p,m))})},o=function(p,m){i&&ae();var w=hd(p,m);i={mode:m,lastCritical:p,lastLocation:w.source,lastCombine:null},r.add(function(){Sl("onDragStart",function(){return Im(t().onDragStart,w,e,$d.onDragStart)})})},l=function(p,m){var w=D_(m),A=sp(m);i||ae();var D=!uH(p,i.lastCritical);D&&(i.lastCritical=p);var T=!oH(i.lastLocation,w);T&&(i.lastLocation=w);var x=!lH(i.lastCombine,A);if(x&&(i.lastCombine=A),!(!D&&!T&&!x)){var b=xe({},hd(p,i.mode),{combine:A,destination:w});r.add(function(){Sl("onDragUpdate",function(){return Im(t().onDragUpdate,b,e,$d.onDragUpdate)})})}},u=function(){i||ae(),r.flush()},c=function(p){i||ae(),i=null,Sl("onDragEnd",function(){return Im(t().onDragEnd,p,e,$d.onDragEnd)})},h=function(){if(i){var p=xe({},hd(i.lastCritical,i.mode),{combine:null,destination:null,reason:"CANCEL"});c(p)}};return{beforeCapture:s,beforeStart:a,start:o,update:l,flush:u,drop:c,abort:h}},dH=function(t,e){var r=cH(t,e);return function(i){return function(s){return function(a){if(a.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(a.type==="INITIAL_PUBLISH"){var o=a.payload.critical;r.beforeStart(o,a.payload.movementMode),s(a),r.start(o,a.payload.movementMode);return}if(a.type==="DROP_COMPLETE"){var l=a.payload.completed.result;r.flush(),s(a),r.drop(l);return}if(s(a),a.type==="FLUSH"){r.abort();return}var u=i.getState();u.phase==="DRAGGING"&&r.update(u.critical,u.impact)}}}},hH=function(t){return function(e){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){e(r);return}var i=t.getState();i.phase!=="DROP_ANIMATING"&&ae(),t.dispatch(F_({completed:i.completed}))}}},fH=function(t){var e=null,r=null;function i(){r&&(cancelAnimationFrame(r),r=null),e&&(e(),e=null)}return function(s){return function(a){if((a.type==="FLUSH"||a.type==="DROP_COMPLETE"||a.type==="DROP_ANIMATION_FINISHED")&&i(),s(a),a.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var u=t.getState();u.phase==="DROP_ANIMATING"&&t.dispatch(KA())}};r=requestAnimationFrame(function(){r=null,e=ar(window,[o])})}}}},pH=function(t){return function(){return function(e){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&t.stopPublishing(),e(r)}}}},mH=function(t){var e=!1;return function(){return function(r){return function(i){if(i.type==="INITIAL_PUBLISH"){e=!0,t.tryRecordFocus(i.payload.critical.draggable.id),r(i),t.tryRestoreFocusRecorded();return}if(r(i),!!e){if(i.type==="FLUSH"){e=!1,t.tryRestoreFocusRecorded();return}if(i.type==="DROP_COMPLETE"){e=!1;var s=i.payload.completed.result;s.combine&&t.tryShiftRecord(s.draggableId,s.combine.draggableId),t.tryRestoreFocusRecorded()}}}}}},gH=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},vH=function(t){return function(e){return function(r){return function(i){if(gH(i)){t.stop(),r(i);return}if(i.type==="INITIAL_PUBLISH"){r(i);var s=e.getState();s.phase!=="DRAGGING"&&ae(),t.start(s);return}r(i),t.scroll(e.getState())}}}},yH=function(t){return function(e){return function(r){if(e(r),r.type==="PUBLISH_WHILE_DRAGGING"){var i=t.getState();i.phase==="DROP_PENDING"&&(i.isWaiting||t.dispatch(GA({reason:i.reason})))}}}},_H=nA,wH=function(t){var e=t.dimensionMarshal,r=t.focusMarshal,i=t.styleMarshal,s=t.getResponders,a=t.announce,o=t.autoScroller;return tA(P9,_H(az(K9(i),pH(e),G9(e),eH,hH,fH,yH,vH(o),iH,mH(r),dH(s,a))))},km=function(){return{additions:{},removals:{},modified:{}}};function bH(t){var e=t.registry,r=t.callbacks,i=km(),s=null,a=function(){s||(r.collectionStarting(),s=requestAnimationFrame(function(){s=null;var h=i,f=h.additions,p=h.removals,m=h.modified,w=Object.keys(f).map(function(T){return e.draggable.getById(T).getDimension($t)}).sort(function(T,x){return T.descriptor.index-x.descriptor.index}),A=Object.keys(m).map(function(T){var x=e.droppable.getById(T),b=x.callbacks.getScrollWhileDragging();return{droppableId:T,scroll:b}}),D={additions:w,removals:Object.keys(p),modified:A};i=km(),r.publish(D)}))},o=function(h){var f=h.descriptor.id;i.additions[f]=h,i.modified[h.descriptor.droppableId]=!0,i.removals[f]&&delete i.removals[f],a()},l=function(h){var f=h.descriptor;i.removals[f.id]=!0,i.modified[f.droppableId]=!0,i.additions[f.id]&&delete i.additions[f.id],a()},u=function(){s&&(cancelAnimationFrame(s),s=null,i=km())};return{add:o,remove:l,stop:u}}var QA=function(t){var e=t.scrollHeight,r=t.scrollWidth,i=t.height,s=t.width,a=Hn({x:r,y:e},{x:s,y:i}),o={x:Math.max(0,a.x),y:Math.max(0,a.y)};return o},JA=function(){var t=document.documentElement;return t||ae(),t},ZA=function(){var t=JA(),e=QA({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight});return e},xH=function(){var t=XA(),e=ZA(),r=t.y,i=t.x,s=JA(),a=s.clientWidth,o=s.clientHeight,l=i+a,u=r+o,c=Tr({top:r,left:i,right:l,bottom:u}),h={frame:c,scroll:{initial:t,current:t,max:e,diff:{value:$t,displacement:$t}}};return h},EH=function(t){var e=t.critical,r=t.scrollOptions,i=t.registry,s=xH(),a=s.scroll.current,o=e.droppable,l=i.droppable.getAllByType(o.type).map(function(f){return f.callbacks.getDimensionAndWatchScroll(a,r)}),u=i.draggable.getAllByType(e.draggable.type).map(function(f){return f.getDimension(a)}),c={draggables:CA(u),droppables:kA(l)},h={dimensions:c,critical:e,viewport:s};return h};function BE(t,e,r){if(r.descriptor.id===e.id||r.descriptor.type!==e.type)return!1;var i=t.droppable.getById(r.descriptor.droppableId);return i.descriptor.mode==="virtual"}var TH=function(t,e){var r=null,i=bH({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),s=function(m,w){t.droppable.exists(m)||ae(),r&&e.updateDroppableIsEnabled({id:m,isEnabled:w})},a=function(m,w){r&&(t.droppable.exists(m)||ae(),e.updateDroppableIsCombineEnabled({id:m,isCombineEnabled:w}))},o=function(m,w){r&&(t.droppable.exists(m)||ae(),e.updateDroppableScroll({id:m,newScroll:w}))},l=function(m,w){r&&t.droppable.getById(m).callbacks.scroll(w)},u=function(){if(r){i.stop();var m=r.critical.droppable;t.droppable.getAllByType(m.type).forEach(function(w){return w.callbacks.dragStopped()}),r.unsubscribe(),r=null}},c=function(m){r||ae();var w=r.critical.draggable;m.type==="ADDITION"&&BE(t,w,m.value)&&i.add(m.value),m.type==="REMOVAL"&&BE(t,w,m.value)&&i.remove(m.value)},h=function(m){r&&ae();var w=t.draggable.getById(m.draggableId),A=t.droppable.getById(w.descriptor.droppableId),D={draggable:w.descriptor,droppable:A.descriptor},T=t.subscribe(c);return r={critical:D,unsubscribe:T},EH({critical:D,registry:t,scrollOptions:m.scrollOptions})},f={updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:a,scrollDroppable:l,updateDroppableScroll:o,startPublishing:h,stopPublishing:u};return f},eP=function(t,e){return t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP"},SH=function(t){window.scrollBy(t.x,t.y)},IH=zt(function(t){return ip(t).filter(function(e){return!(!e.isEnabled||!e.frame)})}),kH=function(e,r){var i=ks(IH(r),function(s){return s.frame||ae(),VA(s.frame.pageMarginBox)(e)});return i},CH=function(t){var e=t.center,r=t.destination,i=t.droppables;if(r){var s=i[r];return s.frame?s:null}var a=kH(e,i);return a},cs={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(e){return Math.pow(e,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},AH=function(t,e){var r=t[e.size]*cs.startFromPercentage,i=t[e.size]*cs.maxScrollAtPercentage,s={startScrollingFrom:r,maxScrollValueAt:i};return s},tP=function(t){var e=t.startOfRange,r=t.endOfRange,i=t.current,s=r-e;if(s===0)return 0;var a=i-e,o=a/s;return o},z_=1,PH=function(t,e){if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return cs.maxPixelScroll;if(t===e.startScrollingFrom)return z_;var r=tP({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),i=1-r,s=cs.maxPixelScroll*cs.ease(i);return Math.ceil(s)},zE=cs.durationDampening.accelerateAt,$E=cs.durationDampening.stopDampeningAt,RH=function(t,e){var r=e,i=$E,s=Date.now(),a=s-r;if(a>=$E)return t;if(a<zE)return z_;var o=tP({startOfRange:zE,endOfRange:i,current:a}),l=t*cs.ease(o);return Math.ceil(l)},HE=function(t){var e=t.distanceToEdge,r=t.thresholds,i=t.dragStartTime,s=t.shouldUseTimeDampening,a=PH(e,r);return a===0?0:s?Math.max(RH(a,i),z_):a},WE=function(t){var e=t.container,r=t.distanceToEdges,i=t.dragStartTime,s=t.axis,a=t.shouldUseTimeDampening,o=AH(e,s),l=r[s.end]<r[s.start];return l?HE({distanceToEdge:r[s.end],thresholds:o,dragStartTime:i,shouldUseTimeDampening:a}):-1*HE({distanceToEdge:r[s.start],thresholds:o,dragStartTime:i,shouldUseTimeDampening:a})},DH=function(t){var e=t.container,r=t.subject,i=t.proposedScroll,s=r.height>e.height,a=r.width>e.width;return!a&&!s?i:a&&s?null:{x:a?0:i.x,y:s?0:i.y}},NH=SA(function(t){return t===0?0:t}),nP=function(t){var e=t.dragStartTime,r=t.container,i=t.subject,s=t.center,a=t.shouldUseTimeDampening,o={top:s.y-r.top,right:r.right-s.x,bottom:r.bottom-s.y,left:s.x-r.left},l=WE({container:r,distanceToEdges:o,dragStartTime:e,axis:N_,shouldUseTimeDampening:a}),u=WE({container:r,distanceToEdges:o,dragStartTime:e,axis:RA,shouldUseTimeDampening:a}),c=NH({x:u,y:l});if(us(c,$t))return null;var h=DH({container:r,subject:i,proposedScroll:c});return h?us(h,$t)?null:h:null},MH=SA(function(t){return t===0?0:t>0?1:-1}),$_=function(){var t=function(r,i){return r<0?r:r>i?r-i:0};return function(e){var r=e.current,i=e.max,s=e.change,a=Jt(r,s),o={x:t(a.x,i.x),y:t(a.y,i.y)};return us(o,$t)?null:o}}(),rP=function(e){var r=e.max,i=e.current,s=e.change,a={x:Math.max(i.x,r.x),y:Math.max(i.y,r.y)},o=MH(s),l=$_({max:a,current:i,change:o});return!l||o.x!==0&&l.x===0||o.y!==0&&l.y===0},H_=function(e,r){return rP({current:e.scroll.current,max:e.scroll.max,change:r})},LH=function(e,r){if(!H_(e,r))return null;var i=e.scroll.max,s=e.scroll.current;return $_({current:s,max:i,change:r})},W_=function(e,r){var i=e.frame;return i?rP({current:i.scroll.current,max:i.scroll.max,change:r}):!1},OH=function(e,r){var i=e.frame;return!i||!W_(e,r)?null:$_({current:i.scroll.current,max:i.scroll.max,change:r})},jH=function(t){var e=t.viewport,r=t.subject,i=t.center,s=t.dragStartTime,a=t.shouldUseTimeDampening,o=nP({dragStartTime:s,container:e.frame,subject:r,center:i,shouldUseTimeDampening:a});return o&&H_(e,o)?o:null},VH=function(t){var e=t.droppable,r=t.subject,i=t.center,s=t.dragStartTime,a=t.shouldUseTimeDampening,o=e.frame;if(!o)return null;var l=nP({dragStartTime:s,container:o.pageMarginBox,subject:r,center:i,shouldUseTimeDampening:a});return l&&W_(e,l)?l:null},qE=function(t){var e=t.state,r=t.dragStartTime,i=t.shouldUseTimeDampening,s=t.scrollWindow,a=t.scrollDroppable,o=e.current.page.borderBoxCenter,l=e.dimensions.draggables[e.critical.draggable.id],u=l.page.marginBox;if(e.isWindowScrollAllowed){var c=e.viewport,h=jH({dragStartTime:r,viewport:c,subject:u,center:o,shouldUseTimeDampening:i});if(h){s(h);return}}var f=CH({center:o,destination:Gn(e.impact),droppables:e.dimensions.droppables});if(f){var p=VH({dragStartTime:r,droppable:f,subject:u,center:o,shouldUseTimeDampening:i});p&&a(f.descriptor.id,p)}},FH=function(t){var e=t.scrollWindow,r=t.scrollDroppable,i=Lu(e),s=Lu(r),a=null,o=function(h){a||ae();var f=a,p=f.shouldUseTimeDampening,m=f.dragStartTime;qE({state:h,scrollWindow:i,scrollDroppable:s,dragStartTime:m,shouldUseTimeDampening:p})},l=function(h){a&&ae();var f=Date.now(),p=!1,m=function(){p=!0};qE({state:h,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:m,scrollDroppable:m}),a={dragStartTime:f,shouldUseTimeDampening:p},p&&o(h)},u=function(){a&&(i.cancel(),s.cancel(),a=null)};return{start:l,stop:u,scroll:o}},UH=function(t){var e=t.move,r=t.scrollDroppable,i=t.scrollWindow,s=function(c,h){var f=Jt(c.current.client.selection,h);e({client:f})},a=function(c,h){if(!W_(c,h))return h;var f=OH(c,h);if(!f)return r(c.descriptor.id,h),null;var p=Hn(h,f);r(c.descriptor.id,p);var m=Hn(h,p);return m},o=function(c,h,f){if(!c||!H_(h,f))return f;var p=LH(h,f);if(!p)return i(f),null;var m=Hn(f,p);i(m);var w=Hn(f,m);return w},l=function(c){var h=c.scrollJumpRequest;if(h){var f=Gn(c.impact);f||ae();var p=a(c.dimensions.droppables[f],h);if(p){var m=c.viewport,w=o(c.isWindowScrollAllowed,m,p);w&&s(c,w)}}};return l},BH=function(t){var e=t.scrollDroppable,r=t.scrollWindow,i=t.move,s=FH({scrollWindow:r,scrollDroppable:e}),a=UH({move:i,scrollWindow:r,scrollDroppable:e}),o=function(c){if(c.phase==="DRAGGING"){if(c.movementMode==="FLUID"){s.scroll(c);return}c.scrollJumpRequest&&a(c)}},l={scroll:o,start:s.start,stop:s.stop};return l},Ro="data-rbd",Do=function(){var t=Ro+"-drag-handle";return{base:t,draggableId:t+"-draggable-id",contextId:t+"-context-id"}}(),bv=function(){var t=Ro+"-draggable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),zH=function(){var t=Ro+"-droppable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),GE={contextId:Ro+"-scroll-container-context-id"},$H=function(e){return function(r){return"["+r+'="'+e+'"]'}},Il=function(e,r){return e.map(function(i){var s=i.styles[r];return s?i.selector+" { "+s+" }":""}).join(" ")},HH="pointer-events: none;",WH=function(t){var e=$H(t),r=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(Do.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:HH,dropAnimating:l}}}(),i=function(){var l=`
      transition: `+iu.outOfTheWay+`;
    `;return{selector:e(bv.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),s={selector:e(zH.contextId),styles:{always:"overflow-anchor: none;"}},a={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[i,r,s,a];return{always:Il(o,"always"),resting:Il(o,"resting"),dragging:Il(o,"dragging"),dropAnimating:Il(o,"dropAnimating"),userCancel:Il(o,"userCancel")}},Kn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?M.useLayoutEffect:M.useEffect,Cm=function(){var e=document.querySelector("head");return e||ae(),e},KE=function(e){var r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.type="text/css",r};function qH(t,e){var r=ze(function(){return WH(t)},[t]),i=M.useRef(null),s=M.useRef(null),a=_e(zt(function(f){var p=s.current;p||ae(),p.textContent=f}),[]),o=_e(function(f){var p=i.current;p||ae(),p.textContent=f},[]);Kn(function(){!i.current&&!s.current||ae();var f=KE(e),p=KE(e);return i.current=f,s.current=p,f.setAttribute(Ro+"-always",t),p.setAttribute(Ro+"-dynamic",t),Cm().appendChild(f),Cm().appendChild(p),o(r.always),a(r.resting),function(){var m=function(A){var D=A.current;D||ae(),Cm().removeChild(D),A.current=null};m(i),m(s)}},[e,o,a,r.always,r.resting,t]);var l=_e(function(){return a(r.dragging)},[a,r.dragging]),u=_e(function(f){if(f==="DROP"){a(r.dropAnimating);return}a(r.userCancel)},[a,r.dropAnimating,r.userCancel]),c=_e(function(){s.current&&a(r.resting)},[a,r.resting]),h=ze(function(){return{dragging:l,dropping:u,resting:c}},[l,u,c]);return h}var iP=function(t){return t&&t.ownerDocument?t.ownerDocument.defaultView:window};function lp(t){return t instanceof iP(t).HTMLElement}function GH(t,e){var r="["+Do.contextId+'="'+t+'"]',i=IA(document.querySelectorAll(r));if(!i.length)return null;var s=ks(i,function(a){return a.getAttribute(Do.draggableId)===e});return!s||!lp(s)?null:s}function KH(t){var e=M.useRef({}),r=M.useRef(null),i=M.useRef(null),s=M.useRef(!1),a=_e(function(p,m){var w={id:p,focus:m};return e.current[p]=w,function(){var D=e.current,T=D[p];T!==w&&delete D[p]}},[]),o=_e(function(p){var m=GH(t,p);m&&m!==document.activeElement&&m.focus()},[t]),l=_e(function(p,m){r.current===p&&(r.current=m)},[]),u=_e(function(){i.current||s.current&&(i.current=requestAnimationFrame(function(){i.current=null;var p=r.current;p&&o(p)}))},[o]),c=_e(function(p){r.current=null;var m=document.activeElement;m&&m.getAttribute(Do.draggableId)===p&&(r.current=p)},[]);Kn(function(){return s.current=!0,function(){s.current=!1;var p=i.current;p&&cancelAnimationFrame(p)}},[]);var h=ze(function(){return{register:a,tryRecordFocus:c,tryRestoreFocusRecorded:u,tryShiftRecord:l}},[a,c,u,l]);return h}function YH(){var t={draggables:{},droppables:{}},e=[];function r(f){return e.push(f),function(){var m=e.indexOf(f);m!==-1&&e.splice(m,1)}}function i(f){e.length&&e.forEach(function(p){return p(f)})}function s(f){return t.draggables[f]||null}function a(f){var p=s(f);return p||ae(),p}var o={register:function(p){t.draggables[p.descriptor.id]=p,i({type:"ADDITION",value:p})},update:function(p,m){var w=t.draggables[m.descriptor.id];w&&w.uniqueId===p.uniqueId&&(delete t.draggables[m.descriptor.id],t.draggables[p.descriptor.id]=p)},unregister:function(p){var m=p.descriptor.id,w=s(m);w&&p.uniqueId===w.uniqueId&&(delete t.draggables[m],i({type:"REMOVAL",value:p}))},getById:a,findById:s,exists:function(p){return!!s(p)},getAllByType:function(p){return qh(t.draggables).filter(function(m){return m.descriptor.type===p})}};function l(f){return t.droppables[f]||null}function u(f){var p=l(f);return p||ae(),p}var c={register:function(p){t.droppables[p.descriptor.id]=p},unregister:function(p){var m=l(p.descriptor.id);m&&p.uniqueId===m.uniqueId&&delete t.droppables[p.descriptor.id]},getById:u,findById:l,exists:function(p){return!!l(p)},getAllByType:function(p){return qh(t.droppables).filter(function(m){return m.descriptor.type===p})}};function h(){t.draggables={},t.droppables={},e.length=0}return{draggable:o,droppable:c,subscribe:r,clean:h}}function XH(){var t=ze(YH,[]);return M.useEffect(function(){return function(){requestAnimationFrame(t.clean)}},[t]),t}var q_=Pe.createContext(null),Kh=function(){var t=document.body;return t||ae(),t},QH={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},JH=function(e){return"rbd-announcement-"+e};function ZH(t){var e=ze(function(){return JH(t)},[t]),r=M.useRef(null);M.useEffect(function(){var a=document.createElement("div");return r.current=a,a.id=e,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),xe(a.style,QH),Kh().appendChild(a),function(){setTimeout(function(){var u=Kh();u.contains(a)&&u.removeChild(a),a===r.current&&(r.current=null)})}},[e]);var i=_e(function(s){var a=r.current;if(a){a.textContent=s;return}},[]);return i}var eW=0,tW={separator:"::"};function G_(t,e){return e===void 0&&(e=tW),ze(function(){return""+t+e.separator+eW++},[e.separator,t])}function nW(t){var e=t.contextId,r=t.uniqueId;return"rbd-hidden-text-"+e+"-"+r}function rW(t){var e=t.contextId,r=t.text,i=G_("hidden-text",{separator:"-"}),s=ze(function(){return nW({contextId:e,uniqueId:i})},[i,e]);return M.useEffect(function(){var o=document.createElement("div");return o.id=s,o.textContent=r,o.style.display="none",Kh().appendChild(o),function(){var u=Kh();u.contains(o)&&u.removeChild(o)}},[s,r]),s}var up=Pe.createContext(null);function sP(t){var e=M.useRef(t);return M.useEffect(function(){e.current=t}),e}function iW(){var t=null;function e(){return!!t}function r(o){return o===t}function i(o){t&&ae();var l={abandon:o};return t=l,l}function s(){t||ae(),t=null}function a(){t&&(t.abandon(),s())}return{isClaimed:e,isActive:r,claim:i,release:s,tryAbandon:a}}var sW=9,aW=13,K_=27,aP=32,oW=33,lW=34,uW=35,cW=36,dW=37,hW=38,fW=39,pW=40,fd,mW=(fd={},fd[aW]=!0,fd[sW]=!0,fd),oP=function(t){mW[t.keyCode]&&t.preventDefault()},cp=function(){var t="visibilitychange";if(typeof document>"u")return t;var e=[t,"ms"+t,"webkit"+t,"moz"+t,"o"+t],r=ks(e,function(i){return"on"+i in document});return r||t}(),lP=0,YE=5;function gW(t,e){return Math.abs(e.x-t.x)>=YE||Math.abs(e.y-t.y)>=YE}var XE={type:"IDLE"};function vW(t){var e=t.cancel,r=t.completed,i=t.getPhase,s=t.setPhase;return[{eventName:"mousemove",fn:function(o){var l=o.button,u=o.clientX,c=o.clientY;if(l===lP){var h={x:u,y:c},f=i();if(f.type==="DRAGGING"){o.preventDefault(),f.actions.move(h);return}f.type!=="PENDING"&&ae();var p=f.point;if(gW(p,h)){o.preventDefault();var m=f.actions.fluidLift(h);s({type:"DRAGGING",actions:m})}}}},{eventName:"mouseup",fn:function(o){var l=i();if(l.type!=="DRAGGING"){e();return}o.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(o){i().type==="DRAGGING"&&o.preventDefault(),e()}},{eventName:"keydown",fn:function(o){var l=i();if(l.type==="PENDING"){e();return}if(o.keyCode===K_){o.preventDefault(),e();return}oP(o)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){i().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:function(o){var l=i();if(l.type==="IDLE"&&ae(),l.actions.shouldRespectForcePress()){e();return}o.preventDefault()}},{eventName:cp,fn:e}]}function yW(t){var e=M.useRef(XE),r=M.useRef(ls),i=ze(function(){return{eventName:"mousedown",fn:function(f){if(!f.defaultPrevented&&f.button===lP&&!(f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)){var p=t.findClosestDraggableId(f);if(p){var m=t.tryGetLock(p,o,{sourceEvent:f});if(m){f.preventDefault();var w={x:f.clientX,y:f.clientY};r.current(),c(m,w)}}}}}},[t]),s=ze(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(f){if(!f.defaultPrevented){var p=t.findClosestDraggableId(f);if(p){var m=t.findOptionsForDraggable(p);m&&(m.shouldRespectForcePress||t.canGetLock(p)&&f.preventDefault())}}}}},[t]),a=_e(function(){var f={passive:!1,capture:!0};r.current=ar(window,[s,i],f)},[s,i]),o=_e(function(){var h=e.current;h.type!=="IDLE"&&(e.current=XE,r.current(),a())},[a]),l=_e(function(){var h=e.current;o(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[o]),u=_e(function(){var f={capture:!0,passive:!1},p=vW({cancel:l,completed:o,getPhase:function(){return e.current},setPhase:function(w){e.current=w}});r.current=ar(window,p,f)},[l,o]),c=_e(function(f,p){e.current.type!=="IDLE"&&ae(),e.current={type:"PENDING",point:p,actions:f},u()},[u]);Kn(function(){return a(),function(){r.current()}},[a])}var Da;function _W(){}var wW=(Da={},Da[lW]=!0,Da[oW]=!0,Da[cW]=!0,Da[uW]=!0,Da);function bW(t,e){function r(){e(),t.cancel()}function i(){e(),t.drop()}return[{eventName:"keydown",fn:function(a){if(a.keyCode===K_){a.preventDefault(),r();return}if(a.keyCode===aP){a.preventDefault(),i();return}if(a.keyCode===pW){a.preventDefault(),t.moveDown();return}if(a.keyCode===hW){a.preventDefault(),t.moveUp();return}if(a.keyCode===fW){a.preventDefault(),t.moveRight();return}if(a.keyCode===dW){a.preventDefault(),t.moveLeft();return}if(wW[a.keyCode]){a.preventDefault();return}oP(a)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:cp,fn:r}]}function xW(t){var e=M.useRef(_W),r=ze(function(){return{eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==aP)return;var o=t.findClosestDraggableId(a);if(!o)return;var l=t.tryGetLock(o,h,{sourceEvent:a});if(!l)return;a.preventDefault();var u=!0,c=l.snapLift();e.current();function h(){u||ae(),u=!1,e.current(),i()}e.current=ar(window,bW(c,h),{capture:!0,passive:!1})}}},[t]),i=_e(function(){var a={passive:!1,capture:!0};e.current=ar(window,[r],a)},[r]);Kn(function(){return i(),function(){e.current()}},[i])}var Am={type:"IDLE"},EW=120,TW=.15;function SW(t){var e=t.cancel,r=t.getPhase;return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:function(s){s.preventDefault()}},{eventName:"keydown",fn:function(s){if(r().type!=="DRAGGING"){e();return}s.keyCode===K_&&s.preventDefault(),e()}},{eventName:cp,fn:e}]}function IW(t){var e=t.cancel,r=t.completed,i=t.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(a){var o=i();if(o.type!=="DRAGGING"){e();return}o.hasMoved=!0;var l=a.touches[0],u=l.clientX,c=l.clientY,h={x:u,y:c};a.preventDefault(),o.actions.move(h)}},{eventName:"touchend",fn:function(a){var o=i();if(o.type!=="DRAGGING"){e();return}a.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(a){if(i().type!=="DRAGGING"){e();return}a.preventDefault(),e()}},{eventName:"touchforcechange",fn:function(a){var o=i();o.type==="IDLE"&&ae();var l=a.touches[0];if(l){var u=l.force>=TW;if(u){var c=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){c&&e();return}if(c){if(o.hasMoved){a.preventDefault();return}e();return}a.preventDefault()}}}},{eventName:cp,fn:e}]}function kW(t){var e=M.useRef(Am),r=M.useRef(ls),i=_e(function(){return e.current},[]),s=_e(function(m){e.current=m},[]),a=ze(function(){return{eventName:"touchstart",fn:function(m){if(!m.defaultPrevented){var w=t.findClosestDraggableId(m);if(w){var A=t.tryGetLock(w,l,{sourceEvent:m});if(A){var D=m.touches[0],T=D.clientX,x=D.clientY,b={x:T,y:x};r.current(),f(A,b)}}}}}},[t]),o=_e(function(){var m={capture:!0,passive:!1};r.current=ar(window,[a],m)},[a]),l=_e(function(){var p=e.current;p.type!=="IDLE"&&(p.type==="PENDING"&&clearTimeout(p.longPressTimerId),s(Am),r.current(),o())},[o,s]),u=_e(function(){var p=e.current;l(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[l]),c=_e(function(){var m={capture:!0,passive:!1},w={cancel:u,completed:l,getPhase:i},A=ar(window,IW(w),m),D=ar(window,SW(w),m);r.current=function(){A(),D()}},[u,i,l]),h=_e(function(){var m=i();m.type!=="PENDING"&&ae();var w=m.actions.fluidLift(m.point);s({type:"DRAGGING",actions:w,hasMoved:!1})},[i,s]),f=_e(function(m,w){i().type!=="IDLE"&&ae();var A=setTimeout(h,EW);s({type:"PENDING",point:w,actions:m,longPressTimerId:A}),c()},[c,i,s,h]);Kn(function(){return o(),function(){r.current();var w=i();w.type==="PENDING"&&(clearTimeout(w.longPressTimerId),s(Am))}},[i,o,s]),Kn(function(){var m=ar(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return m},[])}var CW={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function uP(t,e){if(e==null)return!1;var r=!!CW[e.tagName.toLowerCase()];if(r)return!0;var i=e.getAttribute("contenteditable");return i==="true"||i===""?!0:e===t?!1:uP(t,e.parentElement)}function AW(t,e){var r=e.target;return lp(r)?uP(t,r):!1}var PW=function(t){return Tr(t.getBoundingClientRect()).center};function RW(t){return t instanceof iP(t).Element}var DW=function(){var t="matches";if(typeof document>"u")return t;var e=[t,"msMatchesSelector","webkitMatchesSelector"],r=ks(e,function(i){return i in Element.prototype});return r||t}();function cP(t,e){return t==null?null:t[DW](e)?t:cP(t.parentElement,e)}function NW(t,e){return t.closest?t.closest(e):cP(t,e)}function MW(t){return"["+Do.contextId+'="'+t+'"]'}function LW(t,e){var r=e.target;if(!RW(r))return null;var i=MW(t),s=NW(r,i);return!s||!lp(s)?null:s}function OW(t,e){var r=LW(t,e);return r?r.getAttribute(Do.draggableId):null}function jW(t,e){var r="["+bv.contextId+'="'+t+'"]',i=IA(document.querySelectorAll(r)),s=ks(i,function(a){return a.getAttribute(bv.id)===e});return!s||!lp(s)?null:s}function VW(t){t.preventDefault()}function pd(t){var e=t.expected,r=t.phase,i=t.isLockActive;return t.shouldWarn,!(!i()||e!==r)}function dP(t){var e=t.lockAPI,r=t.store,i=t.registry,s=t.draggableId;if(e.isClaimed())return!1;var a=i.draggable.findById(s);return!(!a||!a.options.isEnabled||!eP(r.getState(),s))}function FW(t){var e=t.lockAPI,r=t.contextId,i=t.store,s=t.registry,a=t.draggableId,o=t.forceSensorStop,l=t.sourceEvent,u=dP({lockAPI:e,store:i,registry:s,draggableId:a});if(!u)return null;var c=s.draggable.getById(a),h=jW(r,c.descriptor.id);if(!h||l&&!c.options.canDragInteractiveElements&&AW(h,l))return null;var f=e.claim(o||ls),p="PRE_DRAG";function m(){return c.options.shouldRespectForcePress}function w(){return e.isActive(f)}function A(V,R){pd({expected:V,phase:p,isLockActive:w,shouldWarn:!0})&&i.dispatch(R())}var D=A.bind(null,"DRAGGING");function T(V){function R(){e.release(),p="COMPLETED"}p!=="PRE_DRAG"&&(R(),p!=="PRE_DRAG"&&ae()),i.dispatch(D9(V.liftActionArgs)),p="DRAGGING";function I(y,_){if(_===void 0&&(_={shouldBlockNextClick:!1}),V.cleanup(),_.shouldBlockNextClick){var S=ar(window,[{eventName:"click",fn:VW,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(S)}R(),i.dispatch(GA({reason:y}))}return xe({isActive:function(){return pd({expected:"DRAGGING",phase:p,isLockActive:w,shouldWarn:!1})},shouldRespectForcePress:m,drop:function(_){return I("DROP",_)},cancel:function(_){return I("CANCEL",_)}},V.actions)}function x(V){var R=Lu(function(y){D(function(){return qA({client:y})})}),I=T({liftActionArgs:{id:a,clientSelection:V,movementMode:"FLUID"},cleanup:function(){return R.cancel()},actions:{move:R}});return xe({},I,{move:R})}function b(){var V={moveUp:function(){return D(B9)},moveRight:function(){return D($9)},moveDown:function(){return D(z9)},moveLeft:function(){return D(H9)}};return T({liftActionArgs:{id:a,clientSelection:PW(h),movementMode:"SNAP"},cleanup:ls,actions:V})}function P(){var V=pd({expected:"PRE_DRAG",phase:p,isLockActive:w,shouldWarn:!0});V&&e.release()}var U={isActive:function(){return pd({expected:"PRE_DRAG",phase:p,isLockActive:w,shouldWarn:!1})},shouldRespectForcePress:m,fluidLift:x,snapLift:b,abort:P};return U}var UW=[yW,xW,kW];function BW(t){var e=t.contextId,r=t.store,i=t.registry,s=t.customSensors,a=t.enableDefaultSensors,o=[].concat(a?UW:[],s||[]),l=M.useState(function(){return iW()})[0],u=_e(function(x,b){x.isDragging&&!b.isDragging&&l.tryAbandon()},[l]);Kn(function(){var x=r.getState(),b=r.subscribe(function(){var P=r.getState();u(x,P),x=P});return b},[l,r,u]),Kn(function(){return l.tryAbandon},[l.tryAbandon]);for(var c=_e(function(T){return dP({lockAPI:l,registry:i,store:r,draggableId:T})},[l,i,r]),h=_e(function(T,x,b){return FW({lockAPI:l,registry:i,contextId:e,store:r,draggableId:T,forceSensorStop:x,sourceEvent:b&&b.sourceEvent?b.sourceEvent:null})},[e,l,i,r]),f=_e(function(T){return OW(e,T)},[e]),p=_e(function(T){var x=i.draggable.findById(T);return x?x.options:null},[i.draggable]),m=_e(function(){l.isClaimed()&&(l.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(V_()))},[l,r]),w=_e(l.isClaimed,[l]),A=ze(function(){return{canGetLock:c,tryGetLock:h,findClosestDraggableId:f,findOptionsForDraggable:p,tryReleaseLock:m,isLockClaimed:w}},[c,h,f,p,m,w]),D=0;D<o.length;D++)o[D](A)}var zW=function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}};function kl(t){return t.current||ae(),t.current}function $W(t){var e=t.contextId,r=t.setCallbacks,i=t.sensors,s=t.nonce,a=t.dragHandleUsageInstructions,o=M.useRef(null),l=sP(t),u=_e(function(){return zW(l.current)},[l]),c=ZH(e),h=rW({contextId:e,text:a}),f=qH(e,s),p=_e(function(y){kl(o).dispatch(y)},[]),m=ze(function(){return _E({publishWhileDragging:M9,updateDroppableScroll:O9,updateDroppableIsEnabled:j9,updateDroppableIsCombineEnabled:V9,collectionStarting:L9},p)},[p]),w=XH(),A=ze(function(){return TH(w,m)},[w,m]),D=ze(function(){return BH(xe({scrollWindow:SH,scrollDroppable:A.scrollDroppable},_E({move:qA},p)))},[A.scrollDroppable,p]),T=KH(e),x=ze(function(){return wH({announce:c,autoScroller:D,dimensionMarshal:A,focusMarshal:T,getResponders:u,styleMarshal:f})},[c,D,A,T,u,f]);o.current=x;var b=_e(function(){var y=kl(o),_=y.getState();_.phase!=="IDLE"&&y.dispatch(V_())},[]),P=_e(function(){var y=kl(o).getState();return y.isDragging||y.phase==="DROP_ANIMATING"},[]),U=ze(function(){return{isDragging:P,tryAbort:b}},[P,b]);r(U);var V=_e(function(y){return eP(kl(o).getState(),y)},[]),R=_e(function(){return Hs(kl(o).getState())},[]),I=ze(function(){return{marshal:A,focus:T,contextId:e,canLift:V,isMovementAllowed:R,dragHandleUsageInstructionsId:h,registry:w}},[e,A,h,T,V,R,w]);return BW({contextId:e,store:x,registry:w,customSensors:i,enableDefaultSensors:t.enableDefaultSensors!==!1}),M.useEffect(function(){return b},[b]),Pe.createElement(up.Provider,{value:I},Pe.createElement(dz,{context:q_,store:x},t.children))}var HW=0;function WW(){return ze(function(){return""+HW++},[])}function qW(t){var e=WW(),r=t.dragHandleUsageInstructions||$d.dragHandleUsageInstructions;return Pe.createElement(x$,null,function(i){return Pe.createElement($W,{nonce:t.nonce,contextId:e,setCallbacks:i,dragHandleUsageInstructions:r,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd},t.children)})}var hP=function(e){return function(r){return e===r}},GW=hP("scroll"),KW=hP("auto"),QE=function(e,r){return r(e.overflowX)||r(e.overflowY)},YW=function(e){var r=window.getComputedStyle(e),i={overflowX:r.overflowX,overflowY:r.overflowY};return QE(i,GW)||QE(i,KW)},XW=function(){return!1},QW=function t(e){return e==null?null:e===document.body?XW()?e:null:e===document.documentElement?null:YW(e)?e:t(e.parentElement)},xv=function(t){return{x:t.scrollLeft,y:t.scrollTop}},JW=function t(e){if(!e)return!1;var r=window.getComputedStyle(e);return r.position==="fixed"?!0:t(e.parentElement)},ZW=function(t){var e=QW(t),r=JW(t);return{closestScrollable:e,isFixedOnPage:r}},e8=function(t){var e=t.descriptor,r=t.isEnabled,i=t.isCombineEnabled,s=t.isFixedOnPage,a=t.direction,o=t.client,l=t.page,u=t.closest,c=function(){if(!u)return null;var m=u.scrollSize,w=u.client,A=QA({scrollHeight:m.scrollHeight,scrollWidth:m.scrollWidth,height:w.paddingBox.height,width:w.paddingBox.width});return{pageMarginBox:u.page.marginBox,frameClient:w,scrollSize:m,shouldClipSubject:u.shouldClipSubject,scroll:{initial:u.scroll,current:u.scroll,max:A,diff:{value:$t,displacement:$t}}}}(),h=a==="vertical"?N_:RA,f=Po({page:l,withPlaceholder:null,axis:h,frame:c}),p={descriptor:e,isCombineEnabled:i,isFixedOnPage:s,axis:h,isEnabled:r,client:o,page:l,frame:c,subject:f};return p},t8=function(e,r){var i=bA(e);if(!r||e!==r)return i;var s=i.paddingBox.top-r.scrollTop,a=i.paddingBox.left-r.scrollLeft,o=s+r.scrollHeight,l=a+r.scrollWidth,u={top:s,right:l,bottom:o,left:a},c=C_(u,i.border),h=A_({borderBox:c,margin:i.margin,border:i.border,padding:i.padding});return h},n8=function(t){var e=t.ref,r=t.descriptor,i=t.env,s=t.windowScroll,a=t.direction,o=t.isDropDisabled,l=t.isCombineEnabled,u=t.shouldClipSubject,c=i.closestScrollable,h=t8(e,c),f=$h(h,s),p=function(){if(!c)return null;var w=bA(c),A={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:w,page:$h(w,s),scroll:xv(c),scrollSize:A,shouldClipSubject:u}}(),m=e8({descriptor:r,isEnabled:!o,isCombineEnabled:l,isFixedOnPage:i.isFixedOnPage,direction:a,client:h,page:f,closest:p});return m},r8={passive:!1},i8={passive:!0},JE=function(t){return t.shouldPublishImmediately?r8:i8};function Yh(t){var e=M.useContext(t);return e||ae(),e}var md=function(e){return e&&e.env.closestScrollable||null};function s8(t){var e=M.useRef(null),r=Yh(up),i=G_("droppable"),s=r.registry,a=r.marshal,o=sP(t),l=ze(function(){return{id:t.droppableId,type:t.type,mode:t.mode}},[t.droppableId,t.mode,t.type]),u=M.useRef(l),c=ze(function(){return zt(function(P,U){e.current||ae();var V={x:P,y:U};a.updateDroppableScroll(l.id,V)})},[l.id,a]),h=_e(function(){var P=e.current;return!P||!P.env.closestScrollable?$t:xv(P.env.closestScrollable)},[]),f=_e(function(){var P=h();c(P.x,P.y)},[h,c]),p=ze(function(){return Lu(f)},[f]),m=_e(function(){var P=e.current,U=md(P);P&&U||ae();var V=P.scrollOptions;if(V.shouldPublishImmediately){f();return}p()},[p,f]),w=_e(function(P,U){e.current&&ae();var V=o.current,R=V.getDroppableRef();R||ae();var I=ZW(R),y={ref:R,descriptor:l,env:I,scrollOptions:U};e.current=y;var _=n8({ref:R,descriptor:l,env:I,windowScroll:P,direction:V.direction,isDropDisabled:V.isDropDisabled,isCombineEnabled:V.isCombineEnabled,shouldClipSubject:!V.ignoreContainerClipping}),S=I.closestScrollable;return S&&(S.setAttribute(GE.contextId,r.contextId),S.addEventListener("scroll",m,JE(y.scrollOptions))),_},[r.contextId,l,m,o]),A=_e(function(){var P=e.current,U=md(P);return P&&U||ae(),xv(U)},[]),D=_e(function(){var P=e.current;P||ae();var U=md(P);e.current=null,U&&(p.cancel(),U.removeAttribute(GE.contextId),U.removeEventListener("scroll",m,JE(P.scrollOptions)))},[m,p]),T=_e(function(P){var U=e.current;U||ae();var V=md(U);V||ae(),V.scrollTop+=P.y,V.scrollLeft+=P.x},[]),x=ze(function(){return{getDimensionAndWatchScroll:w,getScrollWhileDragging:A,dragStopped:D,scroll:T}},[D,w,A,T]),b=ze(function(){return{uniqueId:i,descriptor:l,callbacks:x}},[x,l,i]);Kn(function(){return u.current=b.descriptor,s.droppable.register(b),function(){e.current&&D(),s.droppable.unregister(b)}},[x,l,D,b,a,s.droppable]),Kn(function(){e.current&&a.updateDroppableIsEnabled(u.current.id,!t.isDropDisabled)},[t.isDropDisabled,a]),Kn(function(){e.current&&a.updateDroppableIsCombineEnabled(u.current.id,t.isCombineEnabled)},[t.isCombineEnabled,a])}function Pm(){}var ZE={width:0,height:0,margin:C$},a8=function(e){var r=e.isAnimatingOpenOnMount,i=e.placeholder,s=e.animate;return r||s==="close"?ZE:{height:i.client.borderBox.height,width:i.client.borderBox.width,margin:i.client.margin}},o8=function(e){var r=e.isAnimatingOpenOnMount,i=e.placeholder,s=e.animate,a=a8({isAnimatingOpenOnMount:r,placeholder:i,animate:s});return{display:i.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:s!=="none"?iu.placeholder:null}};function l8(t){var e=M.useRef(null),r=_e(function(){e.current&&(clearTimeout(e.current),e.current=null)},[]),i=t.animate,s=t.onTransitionEnd,a=t.onClose,o=t.contextId,l=M.useState(t.animate==="open"),u=l[0],c=l[1];M.useEffect(function(){return u?i!=="open"?(r(),c(!1),Pm):e.current?Pm:(e.current=setTimeout(function(){e.current=null,c(!1)}),r):Pm},[i,u,r]);var h=_e(function(p){p.propertyName==="height"&&(s(),i==="close"&&a())},[i,a,s]),f=o8({isAnimatingOpenOnMount:u,animate:t.animate,placeholder:t.placeholder});return Pe.createElement(t.placeholder.tagName,{style:f,"data-rbd-placeholder-context-id":o,onTransitionEnd:h,ref:t.innerRef})}var u8=Pe.memo(l8),Y_=Pe.createContext(null),c8=function(t){eA(e,t);function e(){for(var i,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return i=t.call.apply(t,[this].concat(a))||this,i.state={isVisible:!!i.props.on,data:i.props.on,animate:i.props.shouldAnimate&&i.props.on?"open":"none"},i.onClose=function(){i.state.animate==="close"&&i.setState({isVisible:!1})},i}e.getDerivedStateFromProps=function(s,a){return s.shouldAnimate?s.on?{isVisible:!0,data:s.on,animate:"open"}:a.isVisible?{isVisible:!0,data:a.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!s.on,data:s.on,animate:"none"}};var r=e.prototype;return r.render=function(){if(!this.state.isVisible)return null;var s={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(s)},e}(Pe.PureComponent),eT={dragging:5e3,dropAnimating:4500},d8=function(e,r){return r?iu.drop(r.duration):e?iu.snap:iu.fluid},h8=function(e,r){return e?r?Fu.opacity.drop:Fu.opacity.combining:null},f8=function(e){return e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP"};function p8(t){var e=t.dimension,r=e.client,i=t.offset,s=t.combineWith,a=t.dropping,o=!!s,l=f8(t),u=!!a,c=u?_v.drop(i,o):_v.moveTo(i),h={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:d8(l,a),transform:c,opacity:h8(o,u),zIndex:u?eT.dropAnimating:eT.dragging,pointerEvents:"none"};return h}function m8(t){return{transform:_v.moveTo(t.offset),transition:t.shouldAnimateDisplacement?null:"none"}}function g8(t){return t.type==="DRAGGING"?p8(t):m8(t)}function v8(t,e,r){r===void 0&&(r=$t);var i=window.getComputedStyle(e),s=e.getBoundingClientRect(),a=wA(s,i),o=$h(a,r),l={client:a,tagName:e.tagName.toLowerCase(),display:i.display},u={x:a.marginBox.width,y:a.marginBox.height},c={descriptor:t,placeholder:l,displaceBy:u,client:a,page:o};return c}function y8(t){var e=G_("draggable"),r=t.descriptor,i=t.registry,s=t.getDraggableRef,a=t.canDragInteractiveElements,o=t.shouldRespectForcePress,l=t.isEnabled,u=ze(function(){return{canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:l}},[a,l,o]),c=_e(function(m){var w=s();return w||ae(),v8(r,w,m)},[r,s]),h=ze(function(){return{uniqueId:e,descriptor:r,options:u,getDimension:c}},[r,c,u,e]),f=M.useRef(h),p=M.useRef(!0);Kn(function(){return i.draggable.register(f.current),function(){return i.draggable.unregister(f.current)}},[i.draggable]),Kn(function(){if(p.current){p.current=!1;return}var m=f.current;f.current=h,i.draggable.update(h,m)},[h,i.draggable])}function _8(t){t.preventDefault()}function w8(t){var e=M.useRef(null),r=_e(function(y){e.current=y},[]),i=_e(function(){return e.current},[]),s=Yh(up),a=s.contextId,o=s.dragHandleUsageInstructionsId,l=s.registry,u=Yh(Y_),c=u.type,h=u.droppableId,f=ze(function(){return{id:t.draggableId,index:t.index,type:c,droppableId:h}},[t.draggableId,t.index,c,h]),p=t.children,m=t.draggableId,w=t.isEnabled,A=t.shouldRespectForcePress,D=t.canDragInteractiveElements,T=t.isClone,x=t.mapped,b=t.dropAnimationFinished;if(!T){var P=ze(function(){return{descriptor:f,registry:l,getDraggableRef:i,canDragInteractiveElements:D,shouldRespectForcePress:A,isEnabled:w}},[f,l,i,D,A,w]);y8(P)}var U=ze(function(){return w?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":m,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:_8}:null},[a,o,m,w]),V=_e(function(y){x.type==="DRAGGING"&&x.dropping&&y.propertyName==="transform"&&b()},[b,x]),R=ze(function(){var y=g8(x),_=x.type==="DRAGGING"&&x.dropping?V:null,S={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":m,style:y,onTransitionEnd:_},dragHandleProps:U};return S},[a,U,m,x,V,r]),I=ze(function(){return{draggableId:f.id,type:f.type,source:{index:f.index,droppableId:f.droppableId}}},[f.droppableId,f.id,f.index,f.type]);return p(R,x.snapshot,I)}var fP=function(t,e){return t===e},pP=function(t){var e=t.combine,r=t.destination;return r?r.droppableId:e?e.droppableId:null},b8=function(e){return e.combine?e.combine.draggableId:null},x8=function(e){return e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null};function E8(){var t=zt(function(s,a){return{x:s,y:a}}),e=zt(function(s,a,o,l,u){return{isDragging:!0,isClone:a,isDropAnimating:!!u,dropAnimation:u,mode:s,draggingOver:o,combineWith:l,combineTargetFor:null}}),r=zt(function(s,a,o,l,u,c,h){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:u,combineWith:c,mode:a,offset:s,dimension:o,forceShouldAnimate:h,snapshot:e(a,l,u,c,null)}}}),i=function(a,o){if(a.isDragging){if(a.critical.draggable.id!==o.draggableId)return null;var l=a.current.client.offset,u=a.dimensions.draggables[o.draggableId],c=Gn(a.impact),h=x8(a.impact),f=a.forceShouldAnimate;return r(t(l.x,l.y),a.movementMode,u,o.isClone,c,h,f)}if(a.phase==="DROP_ANIMATING"){var p=a.completed;if(p.result.draggableId!==o.draggableId)return null;var m=o.isClone,w=a.dimensions.draggables[o.draggableId],A=p.result,D=A.mode,T=pP(A),x=b8(A),b=a.dropDuration,P={duration:b,curve:U_.drop,moveTo:a.newHomeClientOffset,opacity:x?Fu.opacity.drop:null,scale:x?Fu.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:w,dropping:P,draggingOver:T,combineWith:x,mode:D,forceShouldAnimate:null,snapshot:e(D,m,T,x,P)}}}return null};return i}function mP(t){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}var T8={mapped:{type:"SECONDARY",offset:$t,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:mP(null)}};function S8(){var t=zt(function(o,l){return{x:o,y:l}}),e=zt(mP),r=zt(function(o,l,u){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:u,snapshot:e(l)}}}),i=function(l){return l?r($t,l,!0):null},s=function(l,u,c,h){var f=c.displaced.visible[l],p=!!(h.inVirtualList&&h.effected[l]),m=sp(c),w=m&&m.draggableId===l?u:null;if(!f){if(!p)return i(w);if(c.displaced.invisible[l])return null;var A=Go(h.displacedBy.point),D=t(A.x,A.y);return r(D,w,!0)}if(p)return i(w);var T=c.displacedBy.point,x=t(T.x,T.y);return r(x,w,f.shouldAnimate)},a=function(l,u){if(l.isDragging)return l.critical.draggable.id===u.draggableId?null:s(u.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var c=l.completed;return c.result.draggableId===u.draggableId?null:s(u.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null};return a}var I8=function(){var e=E8(),r=S8(),i=function(a,o){return e(a,o)||r(a,o)||T8};return i},k8={dropAnimationFinished:KA},C8=yA(I8,k8,null,{context:q_,pure:!0,areStatePropsEqual:fP})(w8);function gP(t){var e=Yh(Y_),r=e.isUsingCloneFor;return r===t.draggableId&&!t.isClone?null:Pe.createElement(C8,t)}function A8(t){var e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,r=!!t.disableInteractiveElementBlocking,i=!!t.shouldRespectForcePress;return Pe.createElement(gP,xe({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:r,shouldRespectForcePress:i}))}function P8(t){var e=M.useContext(up);e||ae();var r=e.contextId,i=e.isMovementAllowed,s=M.useRef(null),a=M.useRef(null),o=t.children,l=t.droppableId,u=t.type,c=t.mode,h=t.direction,f=t.ignoreContainerClipping,p=t.isDropDisabled,m=t.isCombineEnabled,w=t.snapshot,A=t.useClone,D=t.updateViewportMaxScroll,T=t.getContainerForClone,x=_e(function(){return s.current},[]),b=_e(function(S){s.current=S},[]);_e(function(){return a.current},[]);var P=_e(function(S){a.current=S},[]),U=_e(function(){i()&&D({maxScroll:ZA()})},[i,D]);s8({droppableId:l,type:u,mode:c,direction:h,isDropDisabled:p,isCombineEnabled:m,ignoreContainerClipping:f,getDroppableRef:x});var V=Pe.createElement(c8,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},function(S){var O=S.onClose,N=S.data,K=S.animate;return Pe.createElement(u8,{placeholder:N,onClose:O,innerRef:P,animate:K,contextId:r,onTransitionEnd:U})}),R=ze(function(){return{innerRef:b,placeholder:V,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":r}}},[r,l,V,b]),I=A?A.dragging.draggableId:null,y=ze(function(){return{droppableId:l,type:u,isUsingCloneFor:I}},[l,I,u]);function _(){if(!A)return null;var S=A.dragging,O=A.render,N=Pe.createElement(gP,{draggableId:S.draggableId,index:S.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(K,ie){return O(K,ie,S)});return oN.createPortal(N,T())}return Pe.createElement(Y_.Provider,{value:y},o(R,w),_())}var Rm=function(e,r){return e===r.droppable.type},tT=function(e,r){return r.draggables[e.draggable.id]},R8=function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=xe({},e,{shouldAnimatePlaceholder:!1}),i=zt(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),s=zt(function(o,l,u,c,h,f){var p=h.descriptor.id,m=h.descriptor.droppableId===o;if(m){var w=f?{render:f,dragging:i(h.descriptor)}:null,A={isDraggingOver:u,draggingOverWith:u?p:null,draggingFromThisWith:p,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!1,snapshot:A,useClone:w}}if(!l)return r;if(!c)return e;var D={isDraggingOver:u,draggingOverWith:p,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!0,snapshot:D,useClone:null}}),a=function(l,u){var c=u.droppableId,h=u.type,f=!u.isDropDisabled,p=u.renderClone;if(l.isDragging){var m=l.critical;if(!Rm(h,m))return r;var w=tT(m,l.dimensions),A=Gn(l.impact)===c;return s(c,f,A,A,w,p)}if(l.phase==="DROP_ANIMATING"){var D=l.completed;if(!Rm(h,D.critical))return r;var T=tT(D.critical,l.dimensions);return s(c,f,pP(D.result)===c,Gn(D.impact)===c,T,p)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var x=l.completed;if(!Rm(h,x.critical))return r;var b=Gn(x.impact)===c,P=!!(x.impact.at&&x.impact.at.type==="COMBINE"),U=x.critical.droppable.id===c;return b?P?e:r:U?e:r}return r};return a},D8={updateViewportMaxScroll:U9};function N8(){return document.body||ae(),document.body}var M8={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:N8},vP=yA(R8,D8,null,{context:q_,pure:!0,areStatePropsEqual:fP})(P8);vP.defaultProps=M8;function L8(){const[t]=Iy(),[e,r]=M.useState([]),[i,s]=M.useState(0),[a,o]=M.useState(!0),[l,u]=M.useState(null),[c,h]=M.useState(!1),[f,p]=M.useState(!1),[m,w]=M.useState("");M.useRef(null),M.useRef(null),M.useEffect(()=>{const P=t.get("keywords");P&&searchAndBuildPlaylist(P)},[t]);const A=P=>{const U=P==null?void 0:P.match(/embed\/([a-zA-Z0-9_-]+)/);return U?U[1]:null},D=P=>{if(!P.destination)return;const U=Array.from(e),[V]=U.splice(P.source.index,1);U.splice(P.destination.index,0,V);const R=U.map((I,y)=>({...I,playlistOrder:y}));r(R),T(R)},T=async P=>{try{const U=t.get("keywords"),V=To(Rt,"keywordPlaylists",U);await Jg(V,{items:P.map(R=>({documentName:R.documentName,playlistOrder:R.playlistOrder}))})}catch(U){console.error("Error saving playlist order:",U)}},x=()=>{p(!0),w(document.getElementById("overallSummaryContent").innerText)},b=async()=>{try{const P=t.get("keywords"),U=To(Rt,"keywordSummaries",P);await Jg(U,{summary:m}),document.getElementById("overallSummaryContent").innerText=m,p(!1)}catch(P){console.error("Error saving description:",P)}};return v.jsx("div",{className:"container mx-auto px-4 py-8",children:v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[v.jsx("div",{className:"lg:col-span-1",children:v.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[v.jsxs("div",{className:"mb-4",children:[v.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Playlist Info"}),v.jsxs("p",{id:"totalDuration",children:["Total Duration: ",formatTime(getTotalPlaylistDuration(e))]})]}),v.jsxs("div",{className:"mb-4",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2",children:[v.jsx("h3",{className:"text-xl font-semibold",children:"Playlist Summary"}),v.jsx("button",{onClick:x,className:"text-blue-500 hover:text-blue-700",children:" Edit"})]}),f?v.jsxs("div",{className:"space-y-2",children:[v.jsx("textarea",{value:m,onChange:P=>w(P.target.value),className:"w-full h-40 p-2 border rounded"}),v.jsxs("div",{className:"flex justify-end space-x-2",children:[v.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),v.jsx("button",{onClick:b,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"})]})]}):v.jsx("p",{id:"overallSummaryContent",className:"text-gray-700"})]})]})}),v.jsx("div",{className:"lg:col-span-2",children:v.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:currentVideo&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"mb-4",children:[v.jsx("h2",{className:"text-2xl font-bold",children:currentVideo.name}),v.jsx("p",{className:"text-gray-600",children:currentVideo.role})]}),v.jsx("div",{id:"player",className:"w-full aspect-video mb-4"}),v.jsx(qW,{onDragEnd:D,children:v.jsx(vP,{droppableId:"timeline",direction:"horizontal",children:P=>v.jsx("div",{ref:P.innerRef,...P.droppableProps,className:"relative h-20 bg-gray-100 rounded mb-4",children:v.jsxs("div",{className:"absolute inset-0 flex",children:[e.map((U,V)=>v.jsx(A8,{draggableId:`${U.documentName}-${V}`,index:V,children:(R,I)=>v.jsx("div",{ref:R.innerRef,...R.draggableProps,...R.dragHandleProps,className:`relative h-full cursor-move transition-colors
                                    ${V===i?"bg-blue-500":"bg-gray-300"}
                                    ${I.isDragging?"ring-2 ring-blue-400":""}`,style:{...R.draggableProps.style,width:`${yP(U)/O8(e)*100}%`},children:v.jsx("img",{src:`https://img.youtube.com/vi/${A(U.videoEmbedLink)}/default.jpg`,alt:"Thumbnail",className:"absolute inset-0 w-full h-full object-cover opacity-50"})})},`${U.documentName}-${V}`)),P.placeholder]})})})}),v.jsxs("div",{className:"flex justify-center space-x-4",children:[v.jsx("button",{onClick:handleSkipPrevious,disabled:i===0,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:v.jsx("span",{className:"material-icons",children:"skip_previous"})}),v.jsx("button",{onClick:handlePlayPause,className:"p-2 rounded-full bg-blue-500 hover:bg-blue-600 text-white",children:v.jsx("span",{id:"playPauseIcon",className:"material-icons",children:"pause"})}),v.jsx("button",{onClick:handleSkipNext,disabled:i===e.length-1,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:v.jsx("span",{className:"material-icons",children:"skip_next"})})]}),v.jsxs("div",{className:"mt-6",children:[v.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Summary"}),v.jsx("p",{className:"text-gray-700",children:currentVideo.summary})]})]})})})]})})}function yP(t){const e=convertTimestampToSeconds(extractStartTimestamp(t.timestamp));return convertTimestampToSeconds(extractStartTimestamp(t.timestamp.split(" - ")[1]))-e}function O8(t){return t.reduce((e,r)=>e+yP(r),0)}function j8(){const[t,e]=M.useState(!0),[r,i]=M.useState(null),[s,a]=M.useState([]),[o,l]=M.useState(null),[u,c]=M.useState(""),h=Qr();M.useEffect(()=>{f()},[]);const f=async()=>{try{e(!0);const b={},P=await Ln(pn(Rt,"interviewSummaries"));for(const V of P.docs){const R=V.id,I=pn(Rt,"interviewSummaries",R,"subSummaries");(await Ln(I)).forEach(_=>{const S=_.data();S.keywords&&S.keywords.split(",").map(N=>N.trim().toLowerCase()).forEach(N=>{b[N]||(b[N]={count:0,summaries:[]}),b[N].count++,b[N].summaries.push(S)})})}const U=Object.entries(b).map(([V,R])=>{let I=0;return R.summaries.forEach(y=>{if(y.timestamp&&y.timestamp.includes(" - ")){const _=p(y.timestamp),S=p(y.timestamp.split(" - ")[1]);I+=Math.max(0,m(S)-m(_))}}),{keyword:V,count:R.count,totalLengthSeconds:I,summaries:R.summaries}}).sort((V,R)=>R.count-V.count);a(U),e(!1)}catch(b){console.error("Error fetching keywords:",b),i("Failed to load keyword data"),e(!1)}},p=b=>{const P=b.match(/(?:\[)?(\d{1,2}:\d{2}(?::\d{2})?)/);return P?P[1]:"00:00"},m=b=>{const P=b.split(":").map(Number);return P.length===2?P[0]*60+P[1]:P.length===3?P[0]*3600+P[1]*60+P[2]:0},w=b=>{const P=Math.floor(b/3600),U=Math.floor(b%3600/60),V=b%60;return P>0?`${P}:${U.toString().padStart(2,"0")}:${V.toString().padStart(2,"0")}`:`${U}:${V.toString().padStart(2,"0")}`},A=b=>{l(o===b?null:b)},D=b=>{h(`/playlist-builder?keywords=${encodeURIComponent(b)}`)},T=b=>{h(`/playlist-editor?keywords=${encodeURIComponent(b)}`)},x=u?s.filter(b=>b.keyword.toLowerCase().includes(u.toLowerCase())):s;return t?v.jsxs("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:[v.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),v.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):r?v.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:v.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg shadow-sm",children:r})}):v.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[v.jsxs("div",{className:"mb-8",children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Keyword Directory"}),v.jsx("p",{className:"text-base text-gray-600 max-w-3xl leading-relaxed",children:"Browse all keywords from the interview collection. Click on any keyword to see details, or create a custom playlist based on specific keywords."})]}),v.jsx("div",{className:"mb-6",children:v.jsxs("div",{className:"max-w-md",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter Keywords"}),v.jsx("input",{type:"text",placeholder:"Type to filter...",value:u,onChange:b=>c(b.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})}),v.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"flex flex-col items-center p-4 bg-blue-50 rounded-lg",children:[v.jsx("div",{className:"text-2xl font-bold text-blue-800 mb-2",children:s.length}),v.jsx("div",{className:"text-sm text-gray-500",children:"Total Keywords"})]}),v.jsxs("div",{className:"flex flex-col items-center p-4 bg-green-50 rounded-lg",children:[v.jsx("div",{className:"text-2xl font-bold text-green-800 mb-2",children:s.reduce((b,P)=>b+P.count,0)}),v.jsx("div",{className:"text-sm text-gray-500",children:"Total Clips"})]}),v.jsxs("div",{className:"flex flex-col items-center p-4 bg-purple-50 rounded-lg",children:[v.jsx("div",{className:"text-2xl font-bold text-purple-800 mb-2",children:w(s.reduce((b,P)=>b+P.totalLengthSeconds,0))}),v.jsx("div",{className:"text-sm text-gray-500",children:"Total Content Duration"})]})]})}),v.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:x.length===0?v.jsx("div",{className:"p-6 text-center text-gray-500",children:"No keywords found matching your search."}):v.jsx("ul",{className:"list-none m-0 p-0 border-t border-gray-100",children:x.map(b=>v.jsx("li",{className:"border-b border-gray-100 transition-colors hover:bg-gray-50",children:v.jsxs("div",{className:"p-6",children:[v.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-blue-600 mb-2 cursor-pointer transition-colors hover:text-blue-800",onClick:()=>A(b.keyword),children:b.keyword}),v.jsxs("div",{className:"my-2",children:[v.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-blue-100 text-blue-800 text-xs font-medium mr-2",children:[b.count," clips"]}),v.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-green-100 text-green-800 text-xs font-medium",children:[w(b.totalLengthSeconds)," total length"]})]})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsxs("button",{onClick:()=>D(b.keyword),className:"inline-flex items-center px-3 py-2 border-0 rounded-md bg-blue-600 text-white text-sm font-medium cursor-pointer transition-colors hover:bg-blue-700",children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"mr-1.5",children:[v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Play"]}),v.jsxs("button",{onClick:()=>T(b.keyword),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md bg-white text-gray-600 text-sm font-medium cursor-pointer transition-colors hover:bg-gray-50",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"mr-1.5",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]})]})]}),o===b.keyword&&v.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[v.jsx("h4",{className:"text-base font-medium text-gray-600 mb-4",children:"Recent Clips:"}),v.jsx("div",{className:"flex flex-col gap-4",children:b.summaries.slice(0,3).map((P,U)=>v.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-xs text-gray-500",children:P.timestamp}),P.documentName&&v.jsx("span",{className:"text-xs font-medium text-blue-600",children:P.documentName})]}),v.jsxs("p",{className:"mt-2 text-gray-600 text-sm leading-relaxed",children:[P.summary.substring(0,200),P.summary.length>200?"...":""]})]},U))}),b.summaries.length>3&&v.jsx("div",{className:"mt-4 text-right",children:v.jsxs("button",{onClick:()=>D(b.keyword),className:"text-blue-600 text-sm font-medium bg-transparent border-0 cursor-pointer transition-colors hover:text-blue-800",children:["View all ",b.summaries.length," clips "]})})]})]})},b.keyword))})})]})}function V8(){const[t,e]=M.useState(!1),[r,i]=M.useState(null),[s,a]=M.useState(null),o=M.useRef(null),[l,u]=M.useState(null),[c,h]=M.useState(1),f=async(T,x)=>{try{e(!0),i(null);const b=prompt("Enter the name of the document for this interview:");if(!b){i("Document name is required");return}const P=await p(T),U=await m(P);await A(b.trim(),U),a(U),h(2)}catch(b){console.error("Error processing files:",b),i("Failed to process transcript")}finally{e(!1)}},p=T=>new Promise((x,b)=>{const P=new FileReader;P.onload=U=>x(U.target.result),P.onerror=U=>b(U),P.readAsText(T)});console.log(void 0);const m=async(T,x=3,b=2e3)=>{try{const V=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer undefined"},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:`
        You are an assistant that processes interview transcripts into structured summaries with timestamps and keywords.
        
        Always output the content in the following strict format:
        Overall Summary:
        [Provide a concise overall summary here.]
        
        Key Points:
        1. Title: [First key topic]
           Timestamp: [Start time - End time]
           Keywords: [Comma-separated list of keywords]
           Summary: [Provide a short summary of the first key topic.]
      `},{role:"user",content:`Here is a transcript:
${T}

Generate an overall summary, key points with timestamps, and keywords.`}],max_tokens:1e3})});if(!V.ok){if(V.status===429&&x>0)return console.warn(`Rate limit exceeded. Retrying in ${b}ms...`),await new Promise(I=>setTimeout(I,b)),m(T,x-1,b*2);throw new Error(`API request failed: ${V.statusText}`)}const R=await V.json();return w(R.choices[0].message.content)}catch(P){throw console.error("Error communicating with OpenAI API:",P),P}},w=T=>{const x=T.match(/Overall Summary:\s*(.+)/i),b=x?x[1].trim():"No summary found.",P=[],U=/\d+\.\s*Title:\s*(.+?)\s*Timestamp:\s*(.+?)\s*Keywords:\s*(.+?)\s*Summary:\s*(.+?)(?=\d+\.|$)/gs;let V;for(;(V=U.exec(T))!==null;)P.push({topic:V[1].trim(),timestamp:V[2].trim(),keywords:V[3].trim(),summary:V[4].trim()});return{overallSummary:b,keyPoints:P}},A=async(T,x)=>{try{const b=To(pn(Rt,"interviewSummaries"),T);await gx(b,{documentName:T,mainSummary:x.overallSummary,createdAt:new Date});for(const P of x.keyPoints){const U=P.topic.replace(/[^a-zA-Z0-9-_]/g,"_"),V=To(pn(Rt,"interviewSummaries",T,"subSummaries"),U);await gx(V,{topic:P.topic,timestamp:P.timestamp,keywords:P.keywords,summary:P.summary})}}catch(b){throw console.error("Error storing processed transcript:",b),b}},D=T=>{if(!o.current)return;const x=T.split(" - ")[0],b=x.split(":").map(Number);if(b.length!==2||b.some(isNaN)){console.error("Invalid timestamp format:",x);return}const P=b[0],U=b[1],V=P*60+U;isFinite(V)&&(o.current.currentTime=V,o.current.play())};return v.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[v.jsxs("div",{className:"mb-8",children:[v.jsx("h1",{className:"text-2xl font-bold mb-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text",children:"Transcript Summarizer"}),v.jsx("p",{className:"text-base leading-relaxed text-gray-600 max-w-3xl",children:"Upload interview transcripts to generate AI-powered summaries with timestamps and keywords"})]}),v.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[c===1&&v.jsxs("div",{className:"p-8",children:[v.jsxs("div",{className:"mb-8",children:[v.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-900 flex items-center",children:[v.jsx(iC,{className:"mr-2 text-blue-600",size:20}),"Upload Interview Files"]}),v.jsxs("div",{className:"flex flex-col gap-6",children:[v.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Transcript File (.txt)"}),v.jsx("div",{className:"flex items-center justify-center w-full",children:v.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer bg-white hover:bg-gray-100 transition-colors p-4",children:[v.jsxs("div",{className:"flex flex-col items-center justify-center",children:[v.jsx(vx,{className:"w-10 h-10 mb-3 text-gray-400"}),v.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[v.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),v.jsx("p",{className:"text-xs text-gray-500",children:"Upload your interview transcript file (TXT)"})]}),v.jsx("input",{type:"file",accept:".txt",className:"hidden",onChange:T=>{var x;return((x=T.target.files)==null?void 0:x[0])&&f(T.target.files[0],null)}})]})})]}),v.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Audio File (optional)"}),v.jsx("div",{className:"flex items-center justify-center w-full",children:v.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer bg-white hover:bg-gray-100 transition-colors p-4",children:[v.jsxs("div",{className:"flex flex-col items-center justify-center",children:[v.jsx(vx,{className:"w-10 h-10 mb-3 text-gray-400"}),v.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[v.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),v.jsx("p",{className:"text-xs text-gray-500",children:"MP3, WAV, or other audio formats"})]}),v.jsx("input",{type:"file",accept:"audio/*",className:"hidden",onChange:T=>{var x;return((x=T.target.files)==null?void 0:x[0])&&u(URL.createObjectURL(T.target.files[0]))}})]})})]})]})]}),l&&v.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[v.jsx("h3",{className:"text-base font-medium mb-3 text-gray-900",children:"Audio Preview"}),v.jsx("audio",{ref:o,src:l,controls:!0,className:"w-full"})]})]}),t&&v.jsxs("div",{className:"flex flex-col justify-center items-center py-20",children:[v.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-500 rounded-full animate-spin mb-4"}),v.jsx("p",{className:"text-gray-500 animate-pulse",children:"Processing transcript..."}),v.jsx("style",{children:`
              @keyframes spin {
                to { transform: rotate(360deg); }
              }
              @keyframes pulse {
                0%, 100% { opacity: 1; }
                50% { opacity: 0.5; }
              }
            `})]}),r&&v.jsx("div",{className:"m-8 bg-red-100 border border-red-300 text-red-700 px-6 py-4 rounded-lg",children:v.jsxs("div",{className:"flex",children:[v.jsx("svg",{className:"w-6 h-6 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),v.jsxs("div",{children:[v.jsx("p",{className:"font-medium",children:"Error"}),v.jsx("p",{className:"text-sm",children:r})]})]})}),c===2&&s&&v.jsxs("div",{children:[l&&v.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6",children:v.jsx("audio",{ref:o,src:l,controls:!0,className:"w-full"})}),v.jsxs("div",{className:"p-8 border-b border-gray-200",children:[v.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Overall Summary"}),v.jsx("p",{className:"text-gray-600 leading-relaxed text-base",children:s.overallSummary})]}),v.jsxs("div",{className:"p-8",children:[v.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:"Key Points"}),v.jsx("div",{className:"flex flex-col gap-6",children:s.keyPoints.map((T,x)=>v.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 transition-all duration-300 shadow-sm hover:shadow-md",children:[v.jsxs("div",{className:"flex items-start mb-4",children:[v.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 mr-3 flex-shrink-0 font-semibold",children:x+1}),v.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:T.topic})]}),v.jsxs("div",{className:"flex items-center mb-4 text-blue-600 hover:text-blue-800 cursor-pointer transition-colors",onClick:()=>D(T.timestamp),children:[v.jsx(rC,{size:16,className:"mr-2"}),v.jsx("span",{className:"font-medium",children:T.timestamp})]}),v.jsx("div",{className:"mb-4",children:v.jsxs("div",{className:"flex items-start mb-2",children:[v.jsx(C3,{size:16,className:"mr-2 text-gray-500 mt-0.5"}),v.jsx("div",{className:"flex flex-wrap gap-2",children:T.keywords.split(",").map((b,P)=>v.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-xs rounded-full font-medium",children:b.trim()},P))})]})}),v.jsx("p",{className:"text-gray-600 leading-relaxed text-sm",children:T.summary})]},x))})]}),v.jsx("div",{className:"p-8 border-t border-gray-200 flex justify-center",children:v.jsxs("button",{onClick:()=>{h(1),a(null),u(null),i(null)},className:"flex items-center px-6 py-3 bg-gray-100 text-gray-600 font-medium rounded-lg hover:bg-gray-200 transition-colors",children:[v.jsx(s3,{className:"w-5 h-5 mr-2 transform rotate-180"}),"Process Another Transcript"]})})]})]})]})}function F8(){const[t,e]=M.useState(""),r=Qr(),i=s=>{s.preventDefault(),t.trim()?r(`/playlist-builder?keywords=${encodeURIComponent(t)}`):alert("Please enter at least one keyword.")};return v.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans flex flex-col items-center justify-center",children:[v.jsxs("div",{className:"w-full max-w-3xl text-center mb-16",children:[v.jsx("h1",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text",children:"Search Interviews"}),v.jsx("p",{className:"text-base leading-relaxed text-gray-600 mb-10 max-w-xl mx-auto",children:"Enter keywords separated by commas to find relevant interviews and create custom playlists"}),v.jsx("form",{onSubmit:i,className:"w-full",children:v.jsxs("div",{className:"relative w-full",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:v.jsx(sC,{className:"w-5 h-5 text-gray-500"})}),v.jsx("input",{type:"text",value:t,onChange:s=>e(s.target.value),placeholder:"civil rights, voting, education...",className:"w-full pl-12 pr-32 py-5 border border-gray-200 bg-white rounded-xl shadow-sm outline-none text-base text-gray-900 transition-all duration-300 focus:shadow-blue-300 focus:ring-2 focus:ring-blue-500"}),v.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-medium rounded-lg shadow-sm border-none cursor-pointer transition-all duration-300 hover:from-blue-700 hover:to-indigo-700 hover:shadow-md",children:"Search"})]})})]}),v.jsx("div",{className:"w-full max-w-3xl",children:v.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[v.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Popular Keywords"}),v.jsx("div",{className:"flex flex-wrap gap-2",children:["civil rights","voting","education","segregation","protests","leadership","communities","legislation","equality","freedom"].map(s=>v.jsx("button",{onClick:()=>{e(s),r(`/playlist-builder?keywords=${encodeURIComponent(s)}`)},className:"px-4 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm border-none cursor-pointer transition-colors duration-200 hover:bg-blue-100 hover:text-blue-800",children:s},s))})]})})]})}function U8(){const[t]=Iy(),e=t.get("documentName"),[r,i]=M.useState(!0),[s,a]=M.useState(null),[o,l]=M.useState(null),[u,c]=M.useState([]),[h,f]=M.useState(null),[p,m]=M.useState(!1),[w,A]=M.useState(!1),[D,T]=M.useState(null),x=M.useRef(null),b=y=>{if(!y)return null;const _=y.match(/(?:embed\/|watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return _?_[1]:null},P=y=>{if(!y)return 0;const S=y.split(" - ")[0].replace(/[\[\]]/g,"").trim().split(":").map(Number);return S.length===3?S[0]*3600+S[1]*60+S[2]:S.length===2?S[0]*60+S[1]:0},U=y=>Array.isArray(y)?y:typeof y=="string"?y.split(",").map(_=>_.trim()):[];M.useEffect(()=>{if(!e){a("Document name is missing"),i(!1);return}async function y(){try{i(!0);const _=To(Rt,"interviewSummaries",e),S=await G4(_);if(!S.exists()){a("Interview not found"),i(!1);return}const O=S.data();l(O);const N=pn(Rt,"interviewSummaries",e,"subSummaries"),K=await Ln(N),ie=[];K.forEach(oe=>{ie.push({id:oe.id,...oe.data()})}),ie.sort((oe,fe)=>P(oe.timestamp)-P(fe.timestamp)),c(ie),i(!1)}catch(_){console.error("Error fetching interview data:",_),a("Failed to load interview data"),i(!1)}}y()},[e]),M.useEffect(()=>{if(window.YT&&window.YT.Player){A(!0);return}const y=document.createElement("script");y.src="https://www.youtube.com/iframe_api",y.async=!0,y.onload=()=>{window.YT&&window.YT.Player&&A(!0)},document.body.appendChild(y),window.onYouTubeIframeAPIReady=()=>{A(!0)}},[]),M.useEffect(()=>{if(!w||!(o!=null&&o.videoEmbedLink)||!D)return;const y=b(o.videoEmbedLink);if(!y){console.error("Invalid YouTube video link");return}return x.current&&typeof x.current.destroy=="function"&&(x.current.destroy(),m(!1)),x.current=new window.YT.Player(D,{videoId:y,width:"100%",height:"100%",playerVars:{autoplay:0,controls:1,rel:0,modestbranding:1},events:{onReady:()=>{m(!0),console.log("Player is ready")},onError:_=>{console.error("YouTube player error:",_.data)}}}),()=>{x.current&&typeof x.current.destroy=="function"&&(x.current.destroy(),x.current=null)}},[w,o,D]);const V=y=>{console.log("Seeking to",y,"seconds"),x.current&&typeof x.current.seekTo=="function"&&(x.current.seekTo(y,!0),x.current.playVideo())},R=y=>{f(h===y?null:y)},I=({summary:y,index:_,isOpen:S})=>{const O=M.useRef(null),[N,K]=M.useState(0);M.useEffect(()=>{O.current&&K(O.current.scrollHeight)},[S,y]);const ie=P(y.timestamp),oe=U(y.keywords);return v.jsxs("div",{className:"accordion-item border-b border-gray-200 dark:border-gray-700",children:[v.jsxs("button",{onClick:()=>R(_),className:`w-full flex items-center justify-between p-4 text-left transition-colors ${S?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"text-gray-800 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700/30"}`,children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("span",{className:"w-6 h-6 bg-blue-100 dark:bg-blue-900/40 rounded-full flex items-center justify-center text-blue-700 dark:text-blue-300 font-bold mr-3",children:_+1}),v.jsx("span",{className:"font-bold",children:y.topic})]}),S?v.jsx(o3,{size:18}):v.jsx(r3,{size:18})]}),v.jsx("div",{style:{height:S?N:0,overflow:"hidden",transition:"height 0.3s ease"},children:v.jsxs("div",{ref:O,className:"p-4 bg-gray-50 dark:bg-gray-800",children:[v.jsxs("button",{onClick:fe=>{fe.stopPropagation(),V(ie)},className:`flex items-center mb-4 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors ${p?"cursor-pointer":"opacity-50 cursor-wait"}`,disabled:!p,children:[v.jsx(rC,{size:16,className:"mr-2"}),v.jsx("span",{className:"font-bold",children:y.timestamp?y.timestamp.split(" - ")[0].replace(/[\[\]]/g,"").trim():"Unknown time"})]}),oe.length>0&&v.jsx("div",{className:"mb-4 text-sm",children:v.jsx("span",{className:"font-bold",children:oe.map((fe,W)=>v.jsxs("span",{children:[fe,W<oe.length-1?", ":""]},W))})}),v.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:y.summary})]})})]})};return r?v.jsx("div",{className:"flex justify-center items-center h-64",children:v.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):s?v.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800/30 text-red-700 dark:text-red-300 px-6 py-4 rounded-xl",children:v.jsxs("p",{children:[v.jsx("strong",{children:"Error:"})," ",s]})}):v.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[v.jsxs("div",{className:"w-full relative bg-black",style:{height:"360px"},children:[v.jsx("div",{className:"absolute inset-0",ref:T}),!p&&v.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 pointer-events-none",children:v.jsx("div",{className:"w-10 h-10 border-4 border-white/50 border-t-white rounded-full animate-spin"})})]}),v.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden",children:v.jsxs("div",{className:"p-6 border-t border-gray-100 dark:border-gray-700",children:[v.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800 dark:text-white",children:"Overview"}),v.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:(o==null?void 0:o.mainSummary)||"No summary available"})]})}),v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden",children:[v.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700",children:v.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Interview Segments"})}),u.map((y,_)=>v.jsx(I,{summary:y,index:_,isOpen:h===_},y.id||_)),u.length===0&&v.jsx("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:"No segments available for this interview"})]})]})}function B8(){return v.jsxs(a2,{children:[v.jsx(Mr,{path:"/login",element:v.jsx(q5,{})}),v.jsx(Mr,{path:"/",element:v.jsx(js,{children:v.jsx(Os,{children:v.jsx(W5,{})})})}),v.jsx(Mr,{path:"/playlist-builder",element:v.jsx(js,{children:v.jsx(Os,{children:v.jsx(tz,{})})})}),v.jsx(Mr,{path:"/playlist-editor",element:v.jsx(js,{children:v.jsx(Os,{children:v.jsx(L8,{})})})}),v.jsx(Mr,{path:"/keyword-directory",element:v.jsx(js,{children:v.jsx(Os,{children:v.jsx(j8,{})})})}),v.jsx(Mr,{path:"/transcript-summary",element:v.jsx(js,{children:v.jsx(Os,{children:v.jsx(V8,{})})})}),v.jsx(Mr,{path:"/search",element:v.jsx(js,{children:v.jsx(Os,{children:v.jsx(F8,{})})})}),v.jsx(Mr,{path:"/interview-player",element:v.jsx(js,{children:v.jsx(Os,{children:v.jsx(U8,{})})})}),v.jsx(Mr,{path:"*",element:v.jsx(TI,{to:"/",replace:!0})})]})}Dm.createRoot(document.getElementById("root")).render(v.jsx(Pe.StrictMode,{children:v.jsx(R2,{children:v.jsx(X4,{children:v.jsx(J4,{children:v.jsx(B8,{})})})})}));export{Pe as R,YB as _,vy as a,z8 as c,Uu as g,v as j,M as r};
