(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var jc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function No(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var dT={exports:{}},Jh={},hT={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $u=Symbol.for("react.element"),YP=Symbol.for("react.portal"),XP=Symbol.for("react.fragment"),QP=Symbol.for("react.strict_mode"),JP=Symbol.for("react.profiler"),ZP=Symbol.for("react.provider"),eR=Symbol.for("react.context"),tR=Symbol.for("react.forward_ref"),nR=Symbol.for("react.suspense"),rR=Symbol.for("react.memo"),iR=Symbol.for("react.lazy"),D0=Symbol.iterator;function sR(t){return t===null||typeof t!="object"?null:(t=D0&&t[D0]||t["@@iterator"],typeof t=="function"?t:null)}var fT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},pT=Object.assign,mT={};function Mo(t,e,r){this.props=t,this.context=e,this.refs=mT,this.updater=r||fT}Mo.prototype.isReactComponent={};Mo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function gT(){}gT.prototype=Mo.prototype;function Iv(t,e,r){this.props=t,this.context=e,this.refs=mT,this.updater=r||fT}var kv=Iv.prototype=new gT;kv.constructor=Iv;pT(kv,Mo.prototype);kv.isPureReactComponent=!0;var N0=Array.isArray,vT=Object.prototype.hasOwnProperty,Cv={current:null},yT={key:!0,ref:!0,__self:!0,__source:!0};function _T(t,e,r){var i,s={},a=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)vT.call(e,i)&&!yT.hasOwnProperty(i)&&(s[i]=e[i]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:$u,type:t,key:a,ref:o,props:s,_owner:Cv.current}}function aR(t,e){return{$$typeof:$u,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Av(t){return typeof t=="object"&&t!==null&&t.$$typeof===$u}function oR(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var M0=/\/+/g;function wp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?oR(""+t.key):e.toString(36)}function yd(t,e,r,i,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case $u:case YP:o=!0}}if(o)return o=t,s=s(o),t=i===""?"."+wp(o,0):i,N0(s)?(r="",t!=null&&(r=t.replace(M0,"$&/")+"/"),yd(s,e,r,"",function(c){return c})):s!=null&&(Av(s)&&(s=aR(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(M0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,i=i===""?".":i+":",N0(t))for(var l=0;l<t.length;l++){a=t[l];var u=i+wp(a,l);o+=yd(a,e,r,u,s)}else if(u=sR(t),typeof u=="function")for(t=u.call(t),l=0;!(a=t.next()).done;)a=a.value,u=i+wp(a,l++),o+=yd(a,e,r,u,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Vc(t,e,r){if(t==null)return t;var i=[],s=0;return yd(t,i,"","",function(a){return e.call(r,a,s++)}),i}function lR(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var En={current:null},_d={transition:null},uR={ReactCurrentDispatcher:En,ReactCurrentBatchConfig:_d,ReactCurrentOwner:Cv};function wT(){throw Error("act(...) is not supported in production builds of React.")}Me.Children={map:Vc,forEach:function(t,e,r){Vc(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Vc(t,function(){e++}),e},toArray:function(t){return Vc(t,function(e){return e})||[]},only:function(t){if(!Av(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Me.Component=Mo;Me.Fragment=XP;Me.Profiler=JP;Me.PureComponent=Iv;Me.StrictMode=QP;Me.Suspense=nR;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uR;Me.act=wT;Me.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=pT({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Cv.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)vT.call(e,u)&&!yT.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:$u,type:t.type,key:s,ref:a,props:i,_owner:o}};Me.createContext=function(t){return t={$$typeof:eR,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ZP,_context:t},t.Consumer=t};Me.createElement=_T;Me.createFactory=function(t){var e=_T.bind(null,t);return e.type=t,e};Me.createRef=function(){return{current:null}};Me.forwardRef=function(t){return{$$typeof:tR,render:t}};Me.isValidElement=Av;Me.lazy=function(t){return{$$typeof:iR,_payload:{_status:-1,_result:t},_init:lR}};Me.memo=function(t,e){return{$$typeof:rR,type:t,compare:e===void 0?null:e}};Me.startTransition=function(t){var e=_d.transition;_d.transition={};try{t()}finally{_d.transition=e}};Me.unstable_act=wT;Me.useCallback=function(t,e){return En.current.useCallback(t,e)};Me.useContext=function(t){return En.current.useContext(t)};Me.useDebugValue=function(){};Me.useDeferredValue=function(t){return En.current.useDeferredValue(t)};Me.useEffect=function(t,e){return En.current.useEffect(t,e)};Me.useId=function(){return En.current.useId()};Me.useImperativeHandle=function(t,e,r){return En.current.useImperativeHandle(t,e,r)};Me.useInsertionEffect=function(t,e){return En.current.useInsertionEffect(t,e)};Me.useLayoutEffect=function(t,e){return En.current.useLayoutEffect(t,e)};Me.useMemo=function(t,e){return En.current.useMemo(t,e)};Me.useReducer=function(t,e,r){return En.current.useReducer(t,e,r)};Me.useRef=function(t){return En.current.useRef(t)};Me.useState=function(t){return En.current.useState(t)};Me.useSyncExternalStore=function(t,e,r){return En.current.useSyncExternalStore(t,e,r)};Me.useTransition=function(){return En.current.useTransition()};Me.version="18.3.1";hT.exports=Me;var L=hT.exports;const Re=No(L);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cR=L,dR=Symbol.for("react.element"),hR=Symbol.for("react.fragment"),fR=Object.prototype.hasOwnProperty,pR=cR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mR={key:!0,ref:!0,__self:!0,__source:!0};function bT(t,e,r){var i,s={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)fR.call(e,i)&&!mR.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:dR,type:t,key:a,ref:o,props:s,_owner:pR.current}}Jh.Fragment=hR;Jh.jsx=bT;Jh.jsxs=bT;dT.exports=Jh;var m=dT.exports,Lm={},xT={exports:{}},Qn={},ET={exports:{}},TT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,Y){var re=q.length;q.push(Y);e:for(;0<re;){var ne=re-1>>>1,W=q[ne];if(0<s(W,Y))q[ne]=Y,q[re]=W,re=ne;else break e}}function r(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var Y=q[0],re=q.pop();if(re!==Y){q[0]=re;e:for(var ne=0,W=q.length,H=W>>>1;ne<H;){var J=2*(ne+1)-1,X=q[J],ce=J+1,me=q[ce];if(0>s(X,re))ce<W&&0>s(me,X)?(q[ne]=me,q[ce]=re,ne=ce):(q[ne]=X,q[J]=re,ne=J);else if(ce<W&&0>s(me,re))q[ne]=me,q[ce]=re,ne=ce;else break e}}return Y}function s(q,Y){var re=q.sortIndex-Y.sortIndex;return re!==0?re:q.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],h=1,f=null,p=3,g=!1,_=!1,A=!1,R=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(q){for(var Y=r(c);Y!==null;){if(Y.callback===null)i(c);else if(Y.startTime<=q)i(c),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=r(c)}}function D(q){if(A=!1,T(q),!_)if(r(u)!==null)_=!0,ie(U);else{var Y=r(c);Y!==null&&de(D,Y.startTime-q)}}function U(q,Y){_=!1,A&&(A=!1,E(I),I=-1),g=!0;var re=p;try{for(T(Y),f=r(u);f!==null&&(!(f.expirationTime>Y)||q&&!S());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,p=f.priorityLevel;var W=ne(f.expirationTime<=Y);Y=t.unstable_now(),typeof W=="function"?f.callback=W:f===r(u)&&i(u),T(Y)}else i(u);f=r(u)}if(f!==null)var H=!0;else{var J=r(c);J!==null&&de(D,J.startTime-Y),H=!1}return H}finally{f=null,p=re,g=!1}}var j=!1,P=null,I=-1,y=5,w=-1;function S(){return!(t.unstable_now()-w<y)}function M(){if(P!==null){var q=t.unstable_now();w=q;var Y=!0;try{Y=P(!0,q)}finally{Y?N():(j=!1,P=null)}}else j=!1}var N;if(typeof b=="function")N=function(){b(M)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,ee=G.port2;G.port1.onmessage=M,N=function(){ee.postMessage(null)}}else N=function(){R(M,0)};function ie(q){P=q,j||(j=!0,N())}function de(q,Y){I=R(function(){q(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){_||g||(_=!0,ie(U))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(q){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var re=p;p=Y;try{return q()}finally{p=re}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,Y){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var re=p;p=q;try{return Y()}finally{p=re}},t.unstable_scheduleCallback=function(q,Y,re){var ne=t.unstable_now();switch(typeof re=="object"&&re!==null?(re=re.delay,re=typeof re=="number"&&0<re?ne+re:ne):re=ne,q){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=re+W,q={id:h++,callback:Y,priorityLevel:q,startTime:re,expirationTime:W,sortIndex:-1},re>ne?(q.sortIndex=re,e(c,q),r(u)===null&&q===r(c)&&(A?(E(I),I=-1):A=!0,de(D,re-ne))):(q.sortIndex=W,e(u,q),_||g||(_=!0,ie(U))),q},t.unstable_shouldYield=S,t.unstable_wrapCallback=function(q){var Y=p;return function(){var re=p;p=Y;try{return q.apply(this,arguments)}finally{p=re}}}})(TT);ET.exports=TT;var gR=ET.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vR=L,Yn=gR;function ae(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var ST=new Set,ou={};function da(t,e){lo(t,e),lo(t+"Capture",e)}function lo(t,e){for(ou[t]=e,t=0;t<e.length;t++)ST.add(e[t])}var pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Om=Object.prototype.hasOwnProperty,yR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,L0={},O0={};function _R(t){return Om.call(O0,t)?!0:Om.call(L0,t)?!1:yR.test(t)?O0[t]=!0:(L0[t]=!0,!1)}function wR(t,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function bR(t,e,r,i){if(e===null||typeof e>"u"||wR(t,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tn(t,e,r,i,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var en={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){en[t]=new Tn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];en[e]=new Tn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){en[t]=new Tn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){en[t]=new Tn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){en[t]=new Tn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){en[t]=new Tn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){en[t]=new Tn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){en[t]=new Tn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){en[t]=new Tn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Pv=/[\-:]([a-z])/g;function Rv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Pv,Rv);en[e]=new Tn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Pv,Rv);en[e]=new Tn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Pv,Rv);en[e]=new Tn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){en[t]=new Tn(t,1,!1,t.toLowerCase(),null,!1,!1)});en.xlinkHref=new Tn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){en[t]=new Tn(t,1,!1,t.toLowerCase(),null,!0,!0)});function Dv(t,e,r,i){var s=en.hasOwnProperty(e)?en[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bR(e,r,s,i)&&(r=null),i||s===null?_R(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,i=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,i?t.setAttributeNS(i,e,r):t.setAttribute(e,r))))}var Ti=vR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fc=Symbol.for("react.element"),Va=Symbol.for("react.portal"),Fa=Symbol.for("react.fragment"),Nv=Symbol.for("react.strict_mode"),jm=Symbol.for("react.profiler"),IT=Symbol.for("react.provider"),kT=Symbol.for("react.context"),Mv=Symbol.for("react.forward_ref"),Vm=Symbol.for("react.suspense"),Fm=Symbol.for("react.suspense_list"),Lv=Symbol.for("react.memo"),Oi=Symbol.for("react.lazy"),CT=Symbol.for("react.offscreen"),j0=Symbol.iterator;function hl(t){return t===null||typeof t!="object"?null:(t=j0&&t[j0]||t["@@iterator"],typeof t=="function"?t:null)}var wt=Object.assign,bp;function Pl(t){if(bp===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);bp=e&&e[1]||""}return`
`+bp+t}var xp=!1;function Ep(t,e){if(!t||xp)return"";xp=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),a=i.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{xp=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Pl(t):""}function xR(t){switch(t.tag){case 5:return Pl(t.type);case 16:return Pl("Lazy");case 13:return Pl("Suspense");case 19:return Pl("SuspenseList");case 0:case 2:case 15:return t=Ep(t.type,!1),t;case 11:return t=Ep(t.type.render,!1),t;case 1:return t=Ep(t.type,!0),t;default:return""}}function Um(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Fa:return"Fragment";case Va:return"Portal";case jm:return"Profiler";case Nv:return"StrictMode";case Vm:return"Suspense";case Fm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case kT:return(t.displayName||"Context")+".Consumer";case IT:return(t._context.displayName||"Context")+".Provider";case Mv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Lv:return e=t.displayName||null,e!==null?e:Um(t.type)||"Memo";case Oi:e=t._payload,t=t._init;try{return Um(t(e))}catch{}}return null}function ER(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Um(e);case 8:return e===Nv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ds(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function AT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function TR(t){var e=AT(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Uc(t){t._valueTracker||(t._valueTracker=TR(t))}function PT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return t&&(i=AT(t)?t.checked?"true":"false":t.value),t=i,t!==r?(e.setValue(t),!0):!1}function qd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bm(t,e){var r=e.checked;return wt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function V0(t,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=ds(e.value!=null?e.value:r),t._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function RT(t,e){e=e.checked,e!=null&&Dv(t,"checked",e,!1)}function $m(t,e){RT(t,e);var r=ds(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?zm(t,e.type,r):e.hasOwnProperty("defaultValue")&&zm(t,e.type,ds(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function F0(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function zm(t,e,r){(e!=="number"||qd(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Rl=Array.isArray;function Qa(t,e,r,i){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&i&&(t[r].defaultSelected=!0)}else{for(r=""+ds(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Hm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ae(91));return wt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function U0(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ae(92));if(Rl(r)){if(1<r.length)throw Error(ae(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:ds(r)}}function DT(t,e){var r=ds(e.value),i=ds(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),i!=null&&(t.defaultValue=""+i)}function B0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function NT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?NT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Bc,MT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Bc=Bc||document.createElement("div"),Bc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Bc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function lu(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var $l={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},SR=["Webkit","ms","Moz","O"];Object.keys($l).forEach(function(t){SR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$l[e]=$l[t]})});function LT(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||$l.hasOwnProperty(t)&&$l[t]?(""+e).trim():e+"px"}function OT(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=LT(r,e[r],i);r==="float"&&(r="cssFloat"),i?t.setProperty(r,s):t[r]=s}}var IR=wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qm(t,e){if(e){if(IR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ae(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ae(62))}}function Gm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Km=null;function Ov(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ym=null,Ja=null,Za=null;function $0(t){if(t=Wu(t)){if(typeof Ym!="function")throw Error(ae(280));var e=t.stateNode;e&&(e=rf(e),Ym(t.stateNode,t.type,e))}}function jT(t){Ja?Za?Za.push(t):Za=[t]:Ja=t}function VT(){if(Ja){var t=Ja,e=Za;if(Za=Ja=null,$0(t),e)for(t=0;t<e.length;t++)$0(e[t])}}function FT(t,e){return t(e)}function UT(){}var Tp=!1;function BT(t,e,r){if(Tp)return t(e,r);Tp=!0;try{return FT(t,e,r)}finally{Tp=!1,(Ja!==null||Za!==null)&&(UT(),VT())}}function uu(t,e){var r=t.stateNode;if(r===null)return null;var i=rf(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ae(231,e,typeof r));return r}var Xm=!1;if(pi)try{var fl={};Object.defineProperty(fl,"passive",{get:function(){Xm=!0}}),window.addEventListener("test",fl,fl),window.removeEventListener("test",fl,fl)}catch{Xm=!1}function kR(t,e,r,i,s,a,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(r,c)}catch(h){this.onError(h)}}var zl=!1,Gd=null,Kd=!1,Qm=null,CR={onError:function(t){zl=!0,Gd=t}};function AR(t,e,r,i,s,a,o,l,u){zl=!1,Gd=null,kR.apply(CR,arguments)}function PR(t,e,r,i,s,a,o,l,u){if(AR.apply(this,arguments),zl){if(zl){var c=Gd;zl=!1,Gd=null}else throw Error(ae(198));Kd||(Kd=!0,Qm=c)}}function ha(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function $T(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function z0(t){if(ha(t)!==t)throw Error(ae(188))}function RR(t){var e=t.alternate;if(!e){if(e=ha(t),e===null)throw Error(ae(188));return e!==t?null:t}for(var r=t,i=e;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(i=s.return,i!==null){r=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return z0(s),t;if(a===i)return z0(s),e;a=a.sibling}throw Error(ae(188))}if(r.return!==i.return)r=s,i=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,i=a;break}if(l===i){o=!0,i=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,i=s;break}if(l===i){o=!0,i=a,r=s;break}l=l.sibling}if(!o)throw Error(ae(189))}}if(r.alternate!==i)throw Error(ae(190))}if(r.tag!==3)throw Error(ae(188));return r.stateNode.current===r?t:e}function zT(t){return t=RR(t),t!==null?HT(t):null}function HT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=HT(t);if(e!==null)return e;t=t.sibling}return null}var WT=Yn.unstable_scheduleCallback,H0=Yn.unstable_cancelCallback,DR=Yn.unstable_shouldYield,NR=Yn.unstable_requestPaint,kt=Yn.unstable_now,MR=Yn.unstable_getCurrentPriorityLevel,jv=Yn.unstable_ImmediatePriority,qT=Yn.unstable_UserBlockingPriority,Yd=Yn.unstable_NormalPriority,LR=Yn.unstable_LowPriority,GT=Yn.unstable_IdlePriority,Zh=null,Fr=null;function OR(t){if(Fr&&typeof Fr.onCommitFiberRoot=="function")try{Fr.onCommitFiberRoot(Zh,t,void 0,(t.current.flags&128)===128)}catch{}}var Sr=Math.clz32?Math.clz32:FR,jR=Math.log,VR=Math.LN2;function FR(t){return t>>>=0,t===0?32:31-(jR(t)/VR|0)|0}var $c=64,zc=4194304;function Dl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xd(t,e){var r=t.pendingLanes;if(r===0)return 0;var i=0,s=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?i=Dl(l):(a&=o,a!==0&&(i=Dl(a)))}else o=r&~s,o!==0?i=Dl(o):a!==0&&(i=Dl(a));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(i&4&&(i|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)r=31-Sr(e),s=1<<r,i|=t[r],e&=~s;return i}function UR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BR(t,e){for(var r=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Sr(a),l=1<<o,u=s[o];u===-1?(!(l&r)||l&i)&&(s[o]=UR(l,e)):u<=e&&(t.expiredLanes|=l),a&=~l}}function Jm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function KT(){var t=$c;return $c<<=1,!($c&4194240)&&($c=64),t}function Sp(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function zu(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Sr(e),t[e]=r}function $R(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Sr(r),a=1<<s;e[s]=0,i[s]=-1,t[s]=-1,r&=~a}}function Vv(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var i=31-Sr(r),s=1<<i;s&e|t[i]&e&&(t[i]|=e),r&=~s}}var Je=0;function XT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var QT,Fv,JT,ZT,eS,Zm=!1,Hc=[],Ki=null,Yi=null,Xi=null,cu=new Map,du=new Map,Fi=[],zR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function W0(t,e){switch(t){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":Yi=null;break;case"mouseover":case"mouseout":Xi=null;break;case"pointerover":case"pointerout":cu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":du.delete(e.pointerId)}}function pl(t,e,r,i,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:a,targetContainers:[s]},e!==null&&(e=Wu(e),e!==null&&Fv(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function HR(t,e,r,i,s){switch(e){case"focusin":return Ki=pl(Ki,t,e,r,i,s),!0;case"dragenter":return Yi=pl(Yi,t,e,r,i,s),!0;case"mouseover":return Xi=pl(Xi,t,e,r,i,s),!0;case"pointerover":var a=s.pointerId;return cu.set(a,pl(cu.get(a)||null,t,e,r,i,s)),!0;case"gotpointercapture":return a=s.pointerId,du.set(a,pl(du.get(a)||null,t,e,r,i,s)),!0}return!1}function tS(t){var e=Gs(t.target);if(e!==null){var r=ha(e);if(r!==null){if(e=r.tag,e===13){if(e=$T(r),e!==null){t.blockedOn=e,eS(t.priority,function(){JT(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=eg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var i=new r.constructor(r.type,r);Km=i,r.target.dispatchEvent(i),Km=null}else return e=Wu(r),e!==null&&Fv(e),t.blockedOn=r,!1;e.shift()}return!0}function q0(t,e,r){wd(t)&&r.delete(e)}function WR(){Zm=!1,Ki!==null&&wd(Ki)&&(Ki=null),Yi!==null&&wd(Yi)&&(Yi=null),Xi!==null&&wd(Xi)&&(Xi=null),cu.forEach(q0),du.forEach(q0)}function ml(t,e){t.blockedOn===e&&(t.blockedOn=null,Zm||(Zm=!0,Yn.unstable_scheduleCallback(Yn.unstable_NormalPriority,WR)))}function hu(t){function e(s){return ml(s,t)}if(0<Hc.length){ml(Hc[0],t);for(var r=1;r<Hc.length;r++){var i=Hc[r];i.blockedOn===t&&(i.blockedOn=null)}}for(Ki!==null&&ml(Ki,t),Yi!==null&&ml(Yi,t),Xi!==null&&ml(Xi,t),cu.forEach(e),du.forEach(e),r=0;r<Fi.length;r++)i=Fi[r],i.blockedOn===t&&(i.blockedOn=null);for(;0<Fi.length&&(r=Fi[0],r.blockedOn===null);)tS(r),r.blockedOn===null&&Fi.shift()}var eo=Ti.ReactCurrentBatchConfig,Qd=!0;function qR(t,e,r,i){var s=Je,a=eo.transition;eo.transition=null;try{Je=1,Uv(t,e,r,i)}finally{Je=s,eo.transition=a}}function GR(t,e,r,i){var s=Je,a=eo.transition;eo.transition=null;try{Je=4,Uv(t,e,r,i)}finally{Je=s,eo.transition=a}}function Uv(t,e,r,i){if(Qd){var s=eg(t,e,r,i);if(s===null)Lp(t,e,i,Jd,r),W0(t,i);else if(HR(s,t,e,r,i))i.stopPropagation();else if(W0(t,i),e&4&&-1<zR.indexOf(t)){for(;s!==null;){var a=Wu(s);if(a!==null&&QT(a),a=eg(t,e,r,i),a===null&&Lp(t,e,i,Jd,r),a===s)break;s=a}s!==null&&i.stopPropagation()}else Lp(t,e,i,null,r)}}var Jd=null;function eg(t,e,r,i){if(Jd=null,t=Ov(i),t=Gs(t),t!==null)if(e=ha(t),e===null)t=null;else if(r=e.tag,r===13){if(t=$T(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jd=t,null}function nS(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MR()){case jv:return 1;case qT:return 4;case Yd:case LR:return 16;case GT:return 536870912;default:return 16}default:return 16}}var Wi=null,Bv=null,bd=null;function rS(){if(bd)return bd;var t,e=Bv,r=e.length,i,s="value"in Wi?Wi.value:Wi.textContent,a=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(i=1;i<=o&&e[r-i]===s[a-i];i++);return bd=s.slice(t,1<i?1-i:void 0)}function xd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Wc(){return!0}function G0(){return!1}function Jn(t){function e(r,i,s,a,o){this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Wc:G0,this.isPropagationStopped=G0,this}return wt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Wc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Wc)},persist:function(){},isPersistent:Wc}),e}var Lo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$v=Jn(Lo),Hu=wt({},Lo,{view:0,detail:0}),KR=Jn(Hu),Ip,kp,gl,ef=wt({},Hu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==gl&&(gl&&t.type==="mousemove"?(Ip=t.screenX-gl.screenX,kp=t.screenY-gl.screenY):kp=Ip=0,gl=t),Ip)},movementY:function(t){return"movementY"in t?t.movementY:kp}}),K0=Jn(ef),YR=wt({},ef,{dataTransfer:0}),XR=Jn(YR),QR=wt({},Hu,{relatedTarget:0}),Cp=Jn(QR),JR=wt({},Lo,{animationName:0,elapsedTime:0,pseudoElement:0}),ZR=Jn(JR),eD=wt({},Lo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tD=Jn(eD),nD=wt({},Lo,{data:0}),Y0=Jn(nD),rD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},sD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=sD[t])?!!e[t]:!1}function zv(){return aD}var oD=wt({},Hu,{key:function(t){if(t.key){var e=rD[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=xd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iD[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zv,charCode:function(t){return t.type==="keypress"?xd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?xd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lD=Jn(oD),uD=wt({},ef,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),X0=Jn(uD),cD=wt({},Hu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zv}),dD=Jn(cD),hD=wt({},Lo,{propertyName:0,elapsedTime:0,pseudoElement:0}),fD=Jn(hD),pD=wt({},ef,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),mD=Jn(pD),gD=[9,13,27,32],Hv=pi&&"CompositionEvent"in window,Hl=null;pi&&"documentMode"in document&&(Hl=document.documentMode);var vD=pi&&"TextEvent"in window&&!Hl,iS=pi&&(!Hv||Hl&&8<Hl&&11>=Hl),Q0=" ",J0=!1;function sS(t,e){switch(t){case"keyup":return gD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aS(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ua=!1;function yD(t,e){switch(t){case"compositionend":return aS(e);case"keypress":return e.which!==32?null:(J0=!0,Q0);case"textInput":return t=e.data,t===Q0&&J0?null:t;default:return null}}function _D(t,e){if(Ua)return t==="compositionend"||!Hv&&sS(t,e)?(t=rS(),bd=Bv=Wi=null,Ua=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return iS&&e.locale!=="ko"?null:e.data;default:return null}}var wD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Z0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wD[t.type]:e==="textarea"}function oS(t,e,r,i){jT(i),e=Zd(e,"onChange"),0<e.length&&(r=new $v("onChange","change",null,r,i),t.push({event:r,listeners:e}))}var Wl=null,fu=null;function bD(t){yS(t,0)}function tf(t){var e=za(t);if(PT(e))return t}function xD(t,e){if(t==="change")return e}var lS=!1;if(pi){var Ap;if(pi){var Pp="oninput"in document;if(!Pp){var ew=document.createElement("div");ew.setAttribute("oninput","return;"),Pp=typeof ew.oninput=="function"}Ap=Pp}else Ap=!1;lS=Ap&&(!document.documentMode||9<document.documentMode)}function tw(){Wl&&(Wl.detachEvent("onpropertychange",uS),fu=Wl=null)}function uS(t){if(t.propertyName==="value"&&tf(fu)){var e=[];oS(e,fu,t,Ov(t)),BT(bD,e)}}function ED(t,e,r){t==="focusin"?(tw(),Wl=e,fu=r,Wl.attachEvent("onpropertychange",uS)):t==="focusout"&&tw()}function TD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tf(fu)}function SD(t,e){if(t==="click")return tf(e)}function ID(t,e){if(t==="input"||t==="change")return tf(e)}function kD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var kr=typeof Object.is=="function"?Object.is:kD;function pu(t,e){if(kr(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!Om.call(e,s)||!kr(t[s],e[s]))return!1}return!0}function nw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function rw(t,e){var r=nw(t);t=0;for(var i;r;){if(r.nodeType===3){if(i=t+r.textContent.length,t<=e&&i>=e)return{node:r,offset:e-t};t=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=nw(r)}}function cS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?cS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function dS(){for(var t=window,e=qd();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=qd(t.document)}return e}function Wv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function CD(t){var e=dS(),r=t.focusedElem,i=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&cS(r.ownerDocument.documentElement,r)){if(i!==null&&Wv(r)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,a=Math.min(i.start,s);i=i.end===void 0?a:Math.min(i.end,s),!t.extend&&a>i&&(s=i,i=a,a=s),s=rw(r,a);var o=rw(r,i);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var AD=pi&&"documentMode"in document&&11>=document.documentMode,Ba=null,tg=null,ql=null,ng=!1;function iw(t,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ng||Ba==null||Ba!==qd(i)||(i=Ba,"selectionStart"in i&&Wv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ql&&pu(ql,i)||(ql=i,i=Zd(tg,"onSelect"),0<i.length&&(e=new $v("onSelect","select",null,e,r),t.push({event:e,listeners:i}),e.target=Ba)))}function qc(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var $a={animationend:qc("Animation","AnimationEnd"),animationiteration:qc("Animation","AnimationIteration"),animationstart:qc("Animation","AnimationStart"),transitionend:qc("Transition","TransitionEnd")},Rp={},hS={};pi&&(hS=document.createElement("div").style,"AnimationEvent"in window||(delete $a.animationend.animation,delete $a.animationiteration.animation,delete $a.animationstart.animation),"TransitionEvent"in window||delete $a.transitionend.transition);function nf(t){if(Rp[t])return Rp[t];if(!$a[t])return t;var e=$a[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in hS)return Rp[t]=e[r];return t}var fS=nf("animationend"),pS=nf("animationiteration"),mS=nf("animationstart"),gS=nf("transitionend"),vS=new Map,sw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function bs(t,e){vS.set(t,e),da(e,[t])}for(var Dp=0;Dp<sw.length;Dp++){var Np=sw[Dp],PD=Np.toLowerCase(),RD=Np[0].toUpperCase()+Np.slice(1);bs(PD,"on"+RD)}bs(fS,"onAnimationEnd");bs(pS,"onAnimationIteration");bs(mS,"onAnimationStart");bs("dblclick","onDoubleClick");bs("focusin","onFocus");bs("focusout","onBlur");bs(gS,"onTransitionEnd");lo("onMouseEnter",["mouseout","mouseover"]);lo("onMouseLeave",["mouseout","mouseover"]);lo("onPointerEnter",["pointerout","pointerover"]);lo("onPointerLeave",["pointerout","pointerover"]);da("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));da("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));da("onBeforeInput",["compositionend","keypress","textInput","paste"]);da("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));da("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));da("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Nl));function aw(t,e,r){var i=t.type||"unknown-event";t.currentTarget=r,PR(i,e,void 0,t),t.currentTarget=null}function yS(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var i=t[r],s=i.event;i=i.listeners;e:{var a=void 0;if(e)for(var o=i.length-1;0<=o;o--){var l=i[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==a&&s.isPropagationStopped())break e;aw(s,l,c),a=u}else for(o=0;o<i.length;o++){if(l=i[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==a&&s.isPropagationStopped())break e;aw(s,l,c),a=u}}}if(Kd)throw t=Qm,Kd=!1,Qm=null,t}function ut(t,e){var r=e[og];r===void 0&&(r=e[og]=new Set);var i=t+"__bubble";r.has(i)||(_S(e,t,2,!1),r.add(i))}function Mp(t,e,r){var i=0;e&&(i|=4),_S(r,t,i,e)}var Gc="_reactListening"+Math.random().toString(36).slice(2);function mu(t){if(!t[Gc]){t[Gc]=!0,ST.forEach(function(r){r!=="selectionchange"&&(DD.has(r)||Mp(r,!1,t),Mp(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Gc]||(e[Gc]=!0,Mp("selectionchange",!1,e))}}function _S(t,e,r,i){switch(nS(e)){case 1:var s=qR;break;case 4:s=GR;break;default:s=Uv}r=s.bind(null,e,r,t),s=void 0,!Xm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Lp(t,e,r,i,s){var a=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Gs(l),o===null)return;if(u=o.tag,u===5||u===6){i=a=o;continue e}l=l.parentNode}}i=i.return}BT(function(){var c=a,h=Ov(r),f=[];e:{var p=vS.get(t);if(p!==void 0){var g=$v,_=t;switch(t){case"keypress":if(xd(r)===0)break e;case"keydown":case"keyup":g=lD;break;case"focusin":_="focus",g=Cp;break;case"focusout":_="blur",g=Cp;break;case"beforeblur":case"afterblur":g=Cp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=K0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=XR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=dD;break;case fS:case pS:case mS:g=ZR;break;case gS:g=fD;break;case"scroll":g=KR;break;case"wheel":g=mD;break;case"copy":case"cut":case"paste":g=tD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=X0}var A=(e&4)!==0,R=!A&&t==="scroll",E=A?p!==null?p+"Capture":null:p;A=[];for(var b=c,T;b!==null;){T=b;var D=T.stateNode;if(T.tag===5&&D!==null&&(T=D,E!==null&&(D=uu(b,E),D!=null&&A.push(gu(b,D,T)))),R)break;b=b.return}0<A.length&&(p=new g(p,_,null,r,h),f.push({event:p,listeners:A}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&r!==Km&&(_=r.relatedTarget||r.fromElement)&&(Gs(_)||_[mi]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(_=r.relatedTarget||r.toElement,g=c,_=_?Gs(_):null,_!==null&&(R=ha(_),_!==R||_.tag!==5&&_.tag!==6)&&(_=null)):(g=null,_=c),g!==_)){if(A=K0,D="onMouseLeave",E="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(A=X0,D="onPointerLeave",E="onPointerEnter",b="pointer"),R=g==null?p:za(g),T=_==null?p:za(_),p=new A(D,b+"leave",g,r,h),p.target=R,p.relatedTarget=T,D=null,Gs(h)===c&&(A=new A(E,b+"enter",_,r,h),A.target=T,A.relatedTarget=R,D=A),R=D,g&&_)t:{for(A=g,E=_,b=0,T=A;T;T=ka(T))b++;for(T=0,D=E;D;D=ka(D))T++;for(;0<b-T;)A=ka(A),b--;for(;0<T-b;)E=ka(E),T--;for(;b--;){if(A===E||E!==null&&A===E.alternate)break t;A=ka(A),E=ka(E)}A=null}else A=null;g!==null&&ow(f,p,g,A,!1),_!==null&&R!==null&&ow(f,R,_,A,!0)}}e:{if(p=c?za(c):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var U=xD;else if(Z0(p))if(lS)U=ID;else{U=TD;var j=ED}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(U=SD);if(U&&(U=U(t,c))){oS(f,U,r,h);break e}j&&j(t,p,c),t==="focusout"&&(j=p._wrapperState)&&j.controlled&&p.type==="number"&&zm(p,"number",p.value)}switch(j=c?za(c):window,t){case"focusin":(Z0(j)||j.contentEditable==="true")&&(Ba=j,tg=c,ql=null);break;case"focusout":ql=tg=Ba=null;break;case"mousedown":ng=!0;break;case"contextmenu":case"mouseup":case"dragend":ng=!1,iw(f,r,h);break;case"selectionchange":if(AD)break;case"keydown":case"keyup":iw(f,r,h)}var P;if(Hv)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Ua?sS(t,r)&&(I="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(iS&&r.locale!=="ko"&&(Ua||I!=="onCompositionStart"?I==="onCompositionEnd"&&Ua&&(P=rS()):(Wi=h,Bv="value"in Wi?Wi.value:Wi.textContent,Ua=!0)),j=Zd(c,I),0<j.length&&(I=new Y0(I,t,null,r,h),f.push({event:I,listeners:j}),P?I.data=P:(P=aS(r),P!==null&&(I.data=P)))),(P=vD?yD(t,r):_D(t,r))&&(c=Zd(c,"onBeforeInput"),0<c.length&&(h=new Y0("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:c}),h.data=P))}yS(f,e)})}function gu(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Zd(t,e){for(var r=e+"Capture",i=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=uu(t,r),a!=null&&i.unshift(gu(t,a,s)),a=uu(t,e),a!=null&&i.push(gu(t,a,s))),t=t.return}return i}function ka(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ow(t,e,r,i,s){for(var a=e._reactName,o=[];r!==null&&r!==i;){var l=r,u=l.alternate,c=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&c!==null&&(l=c,s?(u=uu(r,a),u!=null&&o.unshift(gu(r,u,l))):s||(u=uu(r,a),u!=null&&o.push(gu(r,u,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var ND=/\r\n?/g,MD=/\u0000|\uFFFD/g;function lw(t){return(typeof t=="string"?t:""+t).replace(ND,`
`).replace(MD,"")}function Kc(t,e,r){if(e=lw(e),lw(t)!==e&&r)throw Error(ae(425))}function eh(){}var rg=null,ig=null;function sg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ag=typeof setTimeout=="function"?setTimeout:void 0,LD=typeof clearTimeout=="function"?clearTimeout:void 0,uw=typeof Promise=="function"?Promise:void 0,OD=typeof queueMicrotask=="function"?queueMicrotask:typeof uw<"u"?function(t){return uw.resolve(null).then(t).catch(jD)}:ag;function jD(t){setTimeout(function(){throw t})}function Op(t,e){var r=e,i=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(i===0){t.removeChild(s),hu(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=s}while(r);hu(e)}function Qi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function cw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Oo=Math.random().toString(36).slice(2),Vr="__reactFiber$"+Oo,vu="__reactProps$"+Oo,mi="__reactContainer$"+Oo,og="__reactEvents$"+Oo,VD="__reactListeners$"+Oo,FD="__reactHandles$"+Oo;function Gs(t){var e=t[Vr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[mi]||r[Vr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=cw(t);t!==null;){if(r=t[Vr])return r;t=cw(t)}return e}t=r,r=t.parentNode}return null}function Wu(t){return t=t[Vr]||t[mi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function za(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ae(33))}function rf(t){return t[vu]||null}var lg=[],Ha=-1;function xs(t){return{current:t}}function ct(t){0>Ha||(t.current=lg[Ha],lg[Ha]=null,Ha--)}function at(t,e){Ha++,lg[Ha]=t.current,t.current=e}var hs={},mn=xs(hs),On=xs(!1),Zs=hs;function uo(t,e){var r=t.type.contextTypes;if(!r)return hs;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=e[a];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function jn(t){return t=t.childContextTypes,t!=null}function th(){ct(On),ct(mn)}function dw(t,e,r){if(mn.current!==hs)throw Error(ae(168));at(mn,e),at(On,r)}function wS(t,e,r){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(ae(108,ER(t)||"Unknown",s));return wt({},r,i)}function nh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||hs,Zs=mn.current,at(mn,t),at(On,On.current),!0}function hw(t,e,r){var i=t.stateNode;if(!i)throw Error(ae(169));r?(t=wS(t,e,Zs),i.__reactInternalMemoizedMergedChildContext=t,ct(On),ct(mn),at(mn,t)):ct(On),at(On,r)}var si=null,sf=!1,jp=!1;function bS(t){si===null?si=[t]:si.push(t)}function UD(t){sf=!0,bS(t)}function Es(){if(!jp&&si!==null){jp=!0;var t=0,e=Je;try{var r=si;for(Je=1;t<r.length;t++){var i=r[t];do i=i(!0);while(i!==null)}si=null,sf=!1}catch(s){throw si!==null&&(si=si.slice(t+1)),WT(jv,Es),s}finally{Je=e,jp=!1}}return null}var Wa=[],qa=0,rh=null,ih=0,nr=[],rr=0,ea=null,ai=1,oi="";function Us(t,e){Wa[qa++]=ih,Wa[qa++]=rh,rh=t,ih=e}function xS(t,e,r){nr[rr++]=ai,nr[rr++]=oi,nr[rr++]=ea,ea=t;var i=ai;t=oi;var s=32-Sr(i)-1;i&=~(1<<s),r+=1;var a=32-Sr(e)+s;if(30<a){var o=s-s%5;a=(i&(1<<o)-1).toString(32),i>>=o,s-=o,ai=1<<32-Sr(e)+s|r<<s|i,oi=a+t}else ai=1<<a|r<<s|i,oi=t}function qv(t){t.return!==null&&(Us(t,1),xS(t,1,0))}function Gv(t){for(;t===rh;)rh=Wa[--qa],Wa[qa]=null,ih=Wa[--qa],Wa[qa]=null;for(;t===ea;)ea=nr[--rr],nr[rr]=null,oi=nr[--rr],nr[rr]=null,ai=nr[--rr],nr[rr]=null}var Wn=null,$n=null,ft=!1,xr=null;function ES(t,e){var r=sr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function fw(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Wn=t,$n=Qi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Wn=t,$n=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=ea!==null?{id:ai,overflow:oi}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=sr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,Wn=t,$n=null,!0):!1;default:return!1}}function ug(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cg(t){if(ft){var e=$n;if(e){var r=e;if(!fw(t,e)){if(ug(t))throw Error(ae(418));e=Qi(r.nextSibling);var i=Wn;e&&fw(t,e)?ES(i,r):(t.flags=t.flags&-4097|2,ft=!1,Wn=t)}}else{if(ug(t))throw Error(ae(418));t.flags=t.flags&-4097|2,ft=!1,Wn=t}}}function pw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Wn=t}function Yc(t){if(t!==Wn)return!1;if(!ft)return pw(t),ft=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!sg(t.type,t.memoizedProps)),e&&(e=$n)){if(ug(t))throw TS(),Error(ae(418));for(;e;)ES(t,e),e=Qi(e.nextSibling)}if(pw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ae(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){$n=Qi(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}$n=null}}else $n=Wn?Qi(t.stateNode.nextSibling):null;return!0}function TS(){for(var t=$n;t;)t=Qi(t.nextSibling)}function co(){$n=Wn=null,ft=!1}function Kv(t){xr===null?xr=[t]:xr.push(t)}var BD=Ti.ReactCurrentBatchConfig;function vl(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ae(309));var i=r.stateNode}if(!i)throw Error(ae(147,t));var s=i,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(ae(284));if(!r._owner)throw Error(ae(290,t))}return t}function Xc(t,e){throw t=Object.prototype.toString.call(e),Error(ae(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function mw(t){var e=t._init;return e(t._payload)}function SS(t){function e(E,b){if(t){var T=E.deletions;T===null?(E.deletions=[b],E.flags|=16):T.push(b)}}function r(E,b){if(!t)return null;for(;b!==null;)e(E,b),b=b.sibling;return null}function i(E,b){for(E=new Map;b!==null;)b.key!==null?E.set(b.key,b):E.set(b.index,b),b=b.sibling;return E}function s(E,b){return E=ts(E,b),E.index=0,E.sibling=null,E}function a(E,b,T){return E.index=T,t?(T=E.alternate,T!==null?(T=T.index,T<b?(E.flags|=2,b):T):(E.flags|=2,b)):(E.flags|=1048576,b)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,b,T,D){return b===null||b.tag!==6?(b=Hp(T,E.mode,D),b.return=E,b):(b=s(b,T),b.return=E,b)}function u(E,b,T,D){var U=T.type;return U===Fa?h(E,b,T.props.children,D,T.key):b!==null&&(b.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Oi&&mw(U)===b.type)?(D=s(b,T.props),D.ref=vl(E,b,T),D.return=E,D):(D=Ad(T.type,T.key,T.props,null,E.mode,D),D.ref=vl(E,b,T),D.return=E,D)}function c(E,b,T,D){return b===null||b.tag!==4||b.stateNode.containerInfo!==T.containerInfo||b.stateNode.implementation!==T.implementation?(b=Wp(T,E.mode,D),b.return=E,b):(b=s(b,T.children||[]),b.return=E,b)}function h(E,b,T,D,U){return b===null||b.tag!==7?(b=Js(T,E.mode,D,U),b.return=E,b):(b=s(b,T),b.return=E,b)}function f(E,b,T){if(typeof b=="string"&&b!==""||typeof b=="number")return b=Hp(""+b,E.mode,T),b.return=E,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Fc:return T=Ad(b.type,b.key,b.props,null,E.mode,T),T.ref=vl(E,null,b),T.return=E,T;case Va:return b=Wp(b,E.mode,T),b.return=E,b;case Oi:var D=b._init;return f(E,D(b._payload),T)}if(Rl(b)||hl(b))return b=Js(b,E.mode,T,null),b.return=E,b;Xc(E,b)}return null}function p(E,b,T,D){var U=b!==null?b.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return U!==null?null:l(E,b,""+T,D);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Fc:return T.key===U?u(E,b,T,D):null;case Va:return T.key===U?c(E,b,T,D):null;case Oi:return U=T._init,p(E,b,U(T._payload),D)}if(Rl(T)||hl(T))return U!==null?null:h(E,b,T,D,null);Xc(E,T)}return null}function g(E,b,T,D,U){if(typeof D=="string"&&D!==""||typeof D=="number")return E=E.get(T)||null,l(b,E,""+D,U);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case Fc:return E=E.get(D.key===null?T:D.key)||null,u(b,E,D,U);case Va:return E=E.get(D.key===null?T:D.key)||null,c(b,E,D,U);case Oi:var j=D._init;return g(E,b,T,j(D._payload),U)}if(Rl(D)||hl(D))return E=E.get(T)||null,h(b,E,D,U,null);Xc(b,D)}return null}function _(E,b,T,D){for(var U=null,j=null,P=b,I=b=0,y=null;P!==null&&I<T.length;I++){P.index>I?(y=P,P=null):y=P.sibling;var w=p(E,P,T[I],D);if(w===null){P===null&&(P=y);break}t&&P&&w.alternate===null&&e(E,P),b=a(w,b,I),j===null?U=w:j.sibling=w,j=w,P=y}if(I===T.length)return r(E,P),ft&&Us(E,I),U;if(P===null){for(;I<T.length;I++)P=f(E,T[I],D),P!==null&&(b=a(P,b,I),j===null?U=P:j.sibling=P,j=P);return ft&&Us(E,I),U}for(P=i(E,P);I<T.length;I++)y=g(P,E,I,T[I],D),y!==null&&(t&&y.alternate!==null&&P.delete(y.key===null?I:y.key),b=a(y,b,I),j===null?U=y:j.sibling=y,j=y);return t&&P.forEach(function(S){return e(E,S)}),ft&&Us(E,I),U}function A(E,b,T,D){var U=hl(T);if(typeof U!="function")throw Error(ae(150));if(T=U.call(T),T==null)throw Error(ae(151));for(var j=U=null,P=b,I=b=0,y=null,w=T.next();P!==null&&!w.done;I++,w=T.next()){P.index>I?(y=P,P=null):y=P.sibling;var S=p(E,P,w.value,D);if(S===null){P===null&&(P=y);break}t&&P&&S.alternate===null&&e(E,P),b=a(S,b,I),j===null?U=S:j.sibling=S,j=S,P=y}if(w.done)return r(E,P),ft&&Us(E,I),U;if(P===null){for(;!w.done;I++,w=T.next())w=f(E,w.value,D),w!==null&&(b=a(w,b,I),j===null?U=w:j.sibling=w,j=w);return ft&&Us(E,I),U}for(P=i(E,P);!w.done;I++,w=T.next())w=g(P,E,I,w.value,D),w!==null&&(t&&w.alternate!==null&&P.delete(w.key===null?I:w.key),b=a(w,b,I),j===null?U=w:j.sibling=w,j=w);return t&&P.forEach(function(M){return e(E,M)}),ft&&Us(E,I),U}function R(E,b,T,D){if(typeof T=="object"&&T!==null&&T.type===Fa&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Fc:e:{for(var U=T.key,j=b;j!==null;){if(j.key===U){if(U=T.type,U===Fa){if(j.tag===7){r(E,j.sibling),b=s(j,T.props.children),b.return=E,E=b;break e}}else if(j.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Oi&&mw(U)===j.type){r(E,j.sibling),b=s(j,T.props),b.ref=vl(E,j,T),b.return=E,E=b;break e}r(E,j);break}else e(E,j);j=j.sibling}T.type===Fa?(b=Js(T.props.children,E.mode,D,T.key),b.return=E,E=b):(D=Ad(T.type,T.key,T.props,null,E.mode,D),D.ref=vl(E,b,T),D.return=E,E=D)}return o(E);case Va:e:{for(j=T.key;b!==null;){if(b.key===j)if(b.tag===4&&b.stateNode.containerInfo===T.containerInfo&&b.stateNode.implementation===T.implementation){r(E,b.sibling),b=s(b,T.children||[]),b.return=E,E=b;break e}else{r(E,b);break}else e(E,b);b=b.sibling}b=Wp(T,E.mode,D),b.return=E,E=b}return o(E);case Oi:return j=T._init,R(E,b,j(T._payload),D)}if(Rl(T))return _(E,b,T,D);if(hl(T))return A(E,b,T,D);Xc(E,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,b!==null&&b.tag===6?(r(E,b.sibling),b=s(b,T),b.return=E,E=b):(r(E,b),b=Hp(T,E.mode,D),b.return=E,E=b),o(E)):r(E,b)}return R}var ho=SS(!0),IS=SS(!1),sh=xs(null),ah=null,Ga=null,Yv=null;function Xv(){Yv=Ga=ah=null}function Qv(t){var e=sh.current;ct(sh),t._currentValue=e}function dg(t,e,r){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===r)break;t=t.return}}function to(t,e){ah=t,Yv=Ga=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Mn=!0),t.firstContext=null)}function cr(t){var e=t._currentValue;if(Yv!==t)if(t={context:t,memoizedValue:e,next:null},Ga===null){if(ah===null)throw Error(ae(308));Ga=t,ah.dependencies={lanes:0,firstContext:t}}else Ga=Ga.next=t;return e}var Ks=null;function Jv(t){Ks===null?Ks=[t]:Ks.push(t)}function kS(t,e,r,i){var s=e.interleaved;return s===null?(r.next=r,Jv(e)):(r.next=s.next,s.next=r),e.interleaved=r,gi(t,i)}function gi(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var ji=!1;function Zv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function CS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function di(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ji(t,e,r){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ze&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,gi(t,r)}return s=i.interleaved,s===null?(e.next=e,Jv(i)):(e.next=s.next,s.next=e),i.interleaved=e,gi(t,r)}function Ed(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,Vv(t,r)}}function gw(t,e){var r=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=e:a=a.next=e}else s=a=e;r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:i.shared,effects:i.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function oh(t,e,r,i){var s=t.updateQueue;ji=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?a=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=c:l.next=c,h.lastBaseUpdate=u))}if(a!==null){var f=s.baseState;o=0,h=c=u=null,l=a;do{var p=l.lane,g=l.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,A=l;switch(p=e,g=r,A.tag){case 1:if(_=A.payload,typeof _=="function"){f=_.call(g,f,p);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=A.payload,p=typeof _=="function"?_.call(g,f,p):_,p==null)break e;f=wt({},f,p);break e;case 2:ji=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(c=h=g,u=f):h=h.next=g,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(u=f),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);na|=o,t.lanes=o,t.memoizedState=f}}function vw(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=r,typeof s!="function")throw Error(ae(191,s));s.call(i)}}}var qu={},Ur=xs(qu),yu=xs(qu),_u=xs(qu);function Ys(t){if(t===qu)throw Error(ae(174));return t}function ey(t,e){switch(at(_u,e),at(yu,t),at(Ur,qu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wm(e,t)}ct(Ur),at(Ur,e)}function fo(){ct(Ur),ct(yu),ct(_u)}function AS(t){Ys(_u.current);var e=Ys(Ur.current),r=Wm(e,t.type);e!==r&&(at(yu,t),at(Ur,r))}function ty(t){yu.current===t&&(ct(Ur),ct(yu))}var vt=xs(0);function lh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vp=[];function ny(){for(var t=0;t<Vp.length;t++)Vp[t]._workInProgressVersionPrimary=null;Vp.length=0}var Td=Ti.ReactCurrentDispatcher,Fp=Ti.ReactCurrentBatchConfig,ta=0,_t=null,Dt=null,Ut=null,uh=!1,Gl=!1,wu=0,$D=0;function ln(){throw Error(ae(321))}function ry(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!kr(t[r],e[r]))return!1;return!0}function iy(t,e,r,i,s,a){if(ta=a,_t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Td.current=t===null||t.memoizedState===null?qD:GD,t=r(i,s),Gl){a=0;do{if(Gl=!1,wu=0,25<=a)throw Error(ae(301));a+=1,Ut=Dt=null,e.updateQueue=null,Td.current=KD,t=r(i,s)}while(Gl)}if(Td.current=ch,e=Dt!==null&&Dt.next!==null,ta=0,Ut=Dt=_t=null,uh=!1,e)throw Error(ae(300));return t}function sy(){var t=wu!==0;return wu=0,t}function Lr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ut===null?_t.memoizedState=Ut=t:Ut=Ut.next=t,Ut}function dr(){if(Dt===null){var t=_t.alternate;t=t!==null?t.memoizedState:null}else t=Dt.next;var e=Ut===null?_t.memoizedState:Ut.next;if(e!==null)Ut=e,Dt=t;else{if(t===null)throw Error(ae(310));Dt=t,t={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},Ut===null?_t.memoizedState=Ut=t:Ut=Ut.next=t}return Ut}function bu(t,e){return typeof e=="function"?e(t):e}function Up(t){var e=dr(),r=e.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=t;var i=Dt,s=i.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}i.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,i=i.baseState;var l=o=null,u=null,c=a;do{var h=c.lane;if((ta&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=f,o=i):u=u.next=f,_t.lanes|=h,na|=h}c=c.next}while(c!==null&&c!==a);u===null?o=i:u.next=l,kr(i,e.memoizedState)||(Mn=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=u,r.lastRenderedState=i}if(t=r.interleaved,t!==null){s=t;do a=s.lane,_t.lanes|=a,na|=a,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Bp(t){var e=dr(),r=e.queue;if(r===null)throw Error(ae(311));r.lastRenderedReducer=t;var i=r.dispatch,s=r.pending,a=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);kr(a,e.memoizedState)||(Mn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,i]}function PS(){}function RS(t,e){var r=_t,i=dr(),s=e(),a=!kr(i.memoizedState,s);if(a&&(i.memoizedState=s,Mn=!0),i=i.queue,ay(MS.bind(null,r,i,t),[t]),i.getSnapshot!==e||a||Ut!==null&&Ut.memoizedState.tag&1){if(r.flags|=2048,xu(9,NS.bind(null,r,i,s,e),void 0,null),Bt===null)throw Error(ae(349));ta&30||DS(r,e,s)}return s}function DS(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function NS(t,e,r,i){e.value=r,e.getSnapshot=i,LS(e)&&OS(t)}function MS(t,e,r){return r(function(){LS(e)&&OS(t)})}function LS(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!kr(t,r)}catch{return!0}}function OS(t){var e=gi(t,1);e!==null&&Ir(e,t,1,-1)}function yw(t){var e=Lr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bu,lastRenderedState:t},e.queue=t,t=t.dispatch=WD.bind(null,_t,t),[e.memoizedState,t]}function xu(t,e,r,i){return t={tag:t,create:e,destroy:r,deps:i,next:null},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(i=r.next,r.next=t,t.next=i,e.lastEffect=t)),t}function jS(){return dr().memoizedState}function Sd(t,e,r,i){var s=Lr();_t.flags|=t,s.memoizedState=xu(1|e,r,void 0,i===void 0?null:i)}function af(t,e,r,i){var s=dr();i=i===void 0?null:i;var a=void 0;if(Dt!==null){var o=Dt.memoizedState;if(a=o.destroy,i!==null&&ry(i,o.deps)){s.memoizedState=xu(e,r,a,i);return}}_t.flags|=t,s.memoizedState=xu(1|e,r,a,i)}function _w(t,e){return Sd(8390656,8,t,e)}function ay(t,e){return af(2048,8,t,e)}function VS(t,e){return af(4,2,t,e)}function FS(t,e){return af(4,4,t,e)}function US(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function BS(t,e,r){return r=r!=null?r.concat([t]):null,af(4,4,US.bind(null,e,t),r)}function oy(){}function $S(t,e){var r=dr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&ry(e,i[1])?i[0]:(r.memoizedState=[t,e],t)}function zS(t,e){var r=dr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&ry(e,i[1])?i[0]:(t=t(),r.memoizedState=[t,e],t)}function HS(t,e,r){return ta&21?(kr(r,e)||(r=KT(),_t.lanes|=r,na|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Mn=!0),t.memoizedState=r)}function zD(t,e){var r=Je;Je=r!==0&&4>r?r:4,t(!0);var i=Fp.transition;Fp.transition={};try{t(!1),e()}finally{Je=r,Fp.transition=i}}function WS(){return dr().memoizedState}function HD(t,e,r){var i=es(t);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},qS(t))GS(e,r);else if(r=kS(t,e,r,i),r!==null){var s=wn();Ir(r,t,i,s),KS(r,e,i)}}function WD(t,e,r){var i=es(t),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(qS(t))GS(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,r);if(s.hasEagerState=!0,s.eagerState=l,kr(l,o)){var u=e.interleaved;u===null?(s.next=s,Jv(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=kS(t,e,s,i),r!==null&&(s=wn(),Ir(r,t,i,s),KS(r,e,i))}}function qS(t){var e=t.alternate;return t===_t||e!==null&&e===_t}function GS(t,e){Gl=uh=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function KS(t,e,r){if(r&4194240){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,Vv(t,r)}}var ch={readContext:cr,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useInsertionEffect:ln,useLayoutEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useMutableSource:ln,useSyncExternalStore:ln,useId:ln,unstable_isNewReconciler:!1},qD={readContext:cr,useCallback:function(t,e){return Lr().memoizedState=[t,e===void 0?null:e],t},useContext:cr,useEffect:_w,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Sd(4194308,4,US.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Sd(4194308,4,t,e)},useInsertionEffect:function(t,e){return Sd(4,2,t,e)},useMemo:function(t,e){var r=Lr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var i=Lr();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=HD.bind(null,_t,t),[i.memoizedState,t]},useRef:function(t){var e=Lr();return t={current:t},e.memoizedState=t},useState:yw,useDebugValue:oy,useDeferredValue:function(t){return Lr().memoizedState=t},useTransition:function(){var t=yw(!1),e=t[0];return t=zD.bind(null,t[1]),Lr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var i=_t,s=Lr();if(ft){if(r===void 0)throw Error(ae(407));r=r()}else{if(r=e(),Bt===null)throw Error(ae(349));ta&30||DS(i,e,r)}s.memoizedState=r;var a={value:r,getSnapshot:e};return s.queue=a,_w(MS.bind(null,i,a,t),[t]),i.flags|=2048,xu(9,NS.bind(null,i,a,r,e),void 0,null),r},useId:function(){var t=Lr(),e=Bt.identifierPrefix;if(ft){var r=oi,i=ai;r=(i&~(1<<32-Sr(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=wu++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=$D++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},GD={readContext:cr,useCallback:$S,useContext:cr,useEffect:ay,useImperativeHandle:BS,useInsertionEffect:VS,useLayoutEffect:FS,useMemo:zS,useReducer:Up,useRef:jS,useState:function(){return Up(bu)},useDebugValue:oy,useDeferredValue:function(t){var e=dr();return HS(e,Dt.memoizedState,t)},useTransition:function(){var t=Up(bu)[0],e=dr().memoizedState;return[t,e]},useMutableSource:PS,useSyncExternalStore:RS,useId:WS,unstable_isNewReconciler:!1},KD={readContext:cr,useCallback:$S,useContext:cr,useEffect:ay,useImperativeHandle:BS,useInsertionEffect:VS,useLayoutEffect:FS,useMemo:zS,useReducer:Bp,useRef:jS,useState:function(){return Bp(bu)},useDebugValue:oy,useDeferredValue:function(t){var e=dr();return Dt===null?e.memoizedState=t:HS(e,Dt.memoizedState,t)},useTransition:function(){var t=Bp(bu)[0],e=dr().memoizedState;return[t,e]},useMutableSource:PS,useSyncExternalStore:RS,useId:WS,unstable_isNewReconciler:!1};function wr(t,e){if(t&&t.defaultProps){e=wt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function hg(t,e,r,i){e=t.memoizedState,r=r(i,e),r=r==null?e:wt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var of={isMounted:function(t){return(t=t._reactInternals)?ha(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var i=wn(),s=es(t),a=di(i,s);a.payload=e,r!=null&&(a.callback=r),e=Ji(t,a,s),e!==null&&(Ir(e,t,s,i),Ed(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var i=wn(),s=es(t),a=di(i,s);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=Ji(t,a,s),e!==null&&(Ir(e,t,s,i),Ed(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=wn(),i=es(t),s=di(r,i);s.tag=2,e!=null&&(s.callback=e),e=Ji(t,s,i),e!==null&&(Ir(e,t,i,r),Ed(e,t,i))}};function ww(t,e,r,i,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,a,o):e.prototype&&e.prototype.isPureReactComponent?!pu(r,i)||!pu(s,a):!0}function YS(t,e,r){var i=!1,s=hs,a=e.contextType;return typeof a=="object"&&a!==null?a=cr(a):(s=jn(e)?Zs:mn.current,i=e.contextTypes,a=(i=i!=null)?uo(t,s):hs),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=of,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function bw(t,e,r,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==t&&of.enqueueReplaceState(e,e.state,null)}function fg(t,e,r,i){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Zv(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=cr(a):(a=jn(e)?Zs:mn.current,s.context=uo(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(hg(t,e,a,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&of.enqueueReplaceState(s,s.state,null),oh(t,r,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function po(t,e){try{var r="",i=e;do r+=xR(i),i=i.return;while(i);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function $p(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function pg(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var YD=typeof WeakMap=="function"?WeakMap:Map;function XS(t,e,r){r=di(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){hh||(hh=!0,Tg=i),pg(t,e)},r}function QS(t,e,r){r=di(-1,r),r.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;r.payload=function(){return i(s)},r.callback=function(){pg(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){pg(t,e),typeof i!="function"&&(Zi===null?Zi=new Set([this]):Zi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function xw(t,e,r){var i=t.pingCache;if(i===null){i=t.pingCache=new YD;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(r)||(s.add(r),t=uN.bind(null,t,e,r),e.then(t,t))}function Ew(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Tw(t,e,r,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=di(-1,1),e.tag=2,Ji(r,e,1))),r.lanes|=1),t)}var XD=Ti.ReactCurrentOwner,Mn=!1;function _n(t,e,r,i){e.child=t===null?IS(e,null,r,i):ho(e,t.child,r,i)}function Sw(t,e,r,i,s){r=r.render;var a=e.ref;return to(e,s),i=iy(t,e,r,i,a,s),r=sy(),t!==null&&!Mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,vi(t,e,s)):(ft&&r&&qv(e),e.flags|=1,_n(t,e,i,s),e.child)}function Iw(t,e,r,i,s){if(t===null){var a=r.type;return typeof a=="function"&&!my(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,JS(t,e,a,i,s)):(t=Ad(r.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:pu,r(o,i)&&t.ref===e.ref)return vi(t,e,s)}return e.flags|=1,t=ts(a,i),t.ref=e.ref,t.return=e,e.child=t}function JS(t,e,r,i,s){if(t!==null){var a=t.memoizedProps;if(pu(a,i)&&t.ref===e.ref)if(Mn=!1,e.pendingProps=i=a,(t.lanes&s)!==0)t.flags&131072&&(Mn=!0);else return e.lanes=t.lanes,vi(t,e,s)}return mg(t,e,r,i,s)}function ZS(t,e,r){var i=e.pendingProps,s=i.children,a=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},at(Ya,Bn),Bn|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,at(Ya,Bn),Bn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=a!==null?a.baseLanes:r,at(Ya,Bn),Bn|=i}else a!==null?(i=a.baseLanes|r,e.memoizedState=null):i=r,at(Ya,Bn),Bn|=i;return _n(t,e,s,r),e.child}function eI(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function mg(t,e,r,i,s){var a=jn(r)?Zs:mn.current;return a=uo(e,a),to(e,s),r=iy(t,e,r,i,a,s),i=sy(),t!==null&&!Mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,vi(t,e,s)):(ft&&i&&qv(e),e.flags|=1,_n(t,e,r,s),e.child)}function kw(t,e,r,i,s){if(jn(r)){var a=!0;nh(e)}else a=!1;if(to(e,s),e.stateNode===null)Id(t,e),YS(e,r,i),fg(e,r,i,s),i=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=r.contextType;typeof c=="object"&&c!==null?c=cr(c):(c=jn(r)?Zs:mn.current,c=uo(e,c));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||u!==c)&&bw(e,o,i,c),ji=!1;var p=e.memoizedState;o.state=p,oh(e,i,o,s),u=e.memoizedState,l!==i||p!==u||On.current||ji?(typeof h=="function"&&(hg(e,r,h,i),u=e.memoizedState),(l=ji||ww(e,r,l,i,p,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),o.props=i,o.state=u,o.context=c,i=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,CS(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:wr(e.type,l),o.props=c,f=e.pendingProps,p=o.context,u=r.contextType,typeof u=="object"&&u!==null?u=cr(u):(u=jn(r)?Zs:mn.current,u=uo(e,u));var g=r.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||p!==u)&&bw(e,o,i,u),ji=!1,p=e.memoizedState,o.state=p,oh(e,i,o,s);var _=e.memoizedState;l!==f||p!==_||On.current||ji?(typeof g=="function"&&(hg(e,r,g,i),_=e.memoizedState),(c=ji||ww(e,r,c,i,p,_,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,_,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,_,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=_),o.props=i,o.state=_,o.context=u,i=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return gg(t,e,r,i,a,s)}function gg(t,e,r,i,s,a){eI(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&hw(e,r,!1),vi(t,e,a);i=e.stateNode,XD.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=ho(e,t.child,null,a),e.child=ho(e,null,l,a)):_n(t,e,l,a),e.memoizedState=i.state,s&&hw(e,r,!0),e.child}function tI(t){var e=t.stateNode;e.pendingContext?dw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&dw(t,e.context,!1),ey(t,e.containerInfo)}function Cw(t,e,r,i,s){return co(),Kv(s),e.flags|=256,_n(t,e,r,i),e.child}var vg={dehydrated:null,treeContext:null,retryLane:0};function yg(t){return{baseLanes:t,cachePool:null,transitions:null}}function nI(t,e,r){var i=e.pendingProps,s=vt.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),at(vt,s&1),t===null)return cg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,a?(i=e.mode,a=e.child,o={mode:"hidden",children:o},!(i&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=cf(o,i,0,null),t=Js(t,i,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=yg(r),e.memoizedState=vg,t):ly(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return QD(t,e,o,i,l,s,r);if(a){a=i.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=ts(s,u),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=ts(l,a):(a=Js(a,o,r,null),a.flags|=2),a.return=e,i.return=e,i.sibling=a,e.child=i,i=a,a=e.child,o=t.child.memoizedState,o=o===null?yg(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=vg,i}return a=t.child,t=a.sibling,i=ts(a,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=i,e.memoizedState=null,i}function ly(t,e){return e=cf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qc(t,e,r,i){return i!==null&&Kv(i),ho(e,t.child,null,r),t=ly(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function QD(t,e,r,i,s,a,o){if(r)return e.flags&256?(e.flags&=-257,i=$p(Error(ae(422))),Qc(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=i.fallback,s=e.mode,i=cf({mode:"visible",children:i.children},s,0,null),a=Js(a,s,o,null),a.flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,e.mode&1&&ho(e,t.child,null,o),e.child.memoizedState=yg(o),e.memoizedState=vg,a);if(!(e.mode&1))return Qc(t,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,a=Error(ae(419)),i=$p(a,i,void 0),Qc(t,e,o,i)}if(l=(o&t.childLanes)!==0,Mn||l){if(i=Bt,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,gi(t,s),Ir(i,t,s,-1))}return py(),i=$p(Error(ae(421))),Qc(t,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=cN.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,$n=Qi(s.nextSibling),Wn=e,ft=!0,xr=null,t!==null&&(nr[rr++]=ai,nr[rr++]=oi,nr[rr++]=ea,ai=t.id,oi=t.overflow,ea=e),e=ly(e,i.children),e.flags|=4096,e)}function Aw(t,e,r){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),dg(t.return,e,r)}function zp(t,e,r,i,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=r,a.tailMode=s)}function rI(t,e,r){var i=e.pendingProps,s=i.revealOrder,a=i.tail;if(_n(t,e,i.children,r),i=vt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Aw(t,r,e);else if(t.tag===19)Aw(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(at(vt,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&lh(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),zp(e,!1,s,r,a);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&lh(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}zp(e,!0,r,null,a);break;case"together":zp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Id(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function vi(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),na|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ae(153));if(e.child!==null){for(t=e.child,r=ts(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=ts(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function JD(t,e,r){switch(e.tag){case 3:tI(e),co();break;case 5:AS(e);break;case 1:jn(e.type)&&nh(e);break;case 4:ey(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;at(sh,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(at(vt,vt.current&1),e.flags|=128,null):r&e.child.childLanes?nI(t,e,r):(at(vt,vt.current&1),t=vi(t,e,r),t!==null?t.sibling:null);at(vt,vt.current&1);break;case 19:if(i=(r&e.childLanes)!==0,t.flags&128){if(i)return rI(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),at(vt,vt.current),i)break;return null;case 22:case 23:return e.lanes=0,ZS(t,e,r)}return vi(t,e,r)}var iI,_g,sI,aI;iI=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};_g=function(){};sI=function(t,e,r,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,Ys(Ur.current);var a=null;switch(r){case"input":s=Bm(t,s),i=Bm(t,i),a=[];break;case"select":s=wt({},s,{value:void 0}),i=wt({},i,{value:void 0}),a=[];break;case"textarea":s=Hm(t,s),i=Hm(t,i),a=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=eh)}qm(r,i);var o;r=null;for(c in s)if(!i.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ou.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in i){var u=i[c];if(l=s!=null?s[c]:void 0,i.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(a||(a=[]),a.push(c,r)),r=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ou.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&ut("scroll",t),a||l===u||(a=[])):(a=a||[]).push(c,u))}r&&(a=a||[]).push("style",r);var c=a;(e.updateQueue=c)&&(e.flags|=4)}};aI=function(t,e,r,i){r!==i&&(e.flags|=4)};function yl(t,e){if(!ft)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function un(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,i=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=r,e}function ZD(t,e,r){var i=e.pendingProps;switch(Gv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return un(e),null;case 1:return jn(e.type)&&th(),un(e),null;case 3:return i=e.stateNode,fo(),ct(On),ct(mn),ny(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Yc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xr!==null&&(kg(xr),xr=null))),_g(t,e),un(e),null;case 5:ty(e);var s=Ys(_u.current);if(r=e.type,t!==null&&e.stateNode!=null)sI(t,e,r,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ae(166));return un(e),null}if(t=Ys(Ur.current),Yc(e)){i=e.stateNode,r=e.type;var a=e.memoizedProps;switch(i[Vr]=e,i[vu]=a,t=(e.mode&1)!==0,r){case"dialog":ut("cancel",i),ut("close",i);break;case"iframe":case"object":case"embed":ut("load",i);break;case"video":case"audio":for(s=0;s<Nl.length;s++)ut(Nl[s],i);break;case"source":ut("error",i);break;case"img":case"image":case"link":ut("error",i),ut("load",i);break;case"details":ut("toggle",i);break;case"input":V0(i,a),ut("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},ut("invalid",i);break;case"textarea":U0(i,a),ut("invalid",i)}qm(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?i.textContent!==l&&(a.suppressHydrationWarning!==!0&&Kc(i.textContent,l,t),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Kc(i.textContent,l,t),s=["children",""+l]):ou.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ut("scroll",i)}switch(r){case"input":Uc(i),F0(i,a,!0);break;case"textarea":Uc(i),B0(i);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(i.onclick=eh)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=NT(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(r,{is:i.is}):(t=o.createElement(r),r==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,r),t[Vr]=e,t[vu]=i,iI(t,e,!1,!1),e.stateNode=t;e:{switch(o=Gm(r,i),r){case"dialog":ut("cancel",t),ut("close",t),s=i;break;case"iframe":case"object":case"embed":ut("load",t),s=i;break;case"video":case"audio":for(s=0;s<Nl.length;s++)ut(Nl[s],t);s=i;break;case"source":ut("error",t),s=i;break;case"img":case"image":case"link":ut("error",t),ut("load",t),s=i;break;case"details":ut("toggle",t),s=i;break;case"input":V0(t,i),s=Bm(t,i),ut("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=wt({},i,{value:void 0}),ut("invalid",t);break;case"textarea":U0(t,i),s=Hm(t,i),ut("invalid",t);break;default:s=i}qm(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?OT(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&MT(t,u)):a==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&lu(t,u):typeof u=="number"&&lu(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ou.hasOwnProperty(a)?u!=null&&a==="onScroll"&&ut("scroll",t):u!=null&&Dv(t,a,u,o))}switch(r){case"input":Uc(t),F0(t,i,!1);break;case"textarea":Uc(t),B0(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ds(i.value));break;case"select":t.multiple=!!i.multiple,a=i.value,a!=null?Qa(t,!!i.multiple,a,!1):i.defaultValue!=null&&Qa(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=eh)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return un(e),null;case 6:if(t&&e.stateNode!=null)aI(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ae(166));if(r=Ys(_u.current),Ys(Ur.current),Yc(e)){if(i=e.stateNode,r=e.memoizedProps,i[Vr]=e,(a=i.nodeValue!==r)&&(t=Wn,t!==null))switch(t.tag){case 3:Kc(i.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Kc(i.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Vr]=e,e.stateNode=i}return un(e),null;case 13:if(ct(vt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ft&&$n!==null&&e.mode&1&&!(e.flags&128))TS(),co(),e.flags|=98560,a=!1;else if(a=Yc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!a)throw Error(ae(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ae(317));a[Vr]=e}else co(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;un(e),a=!1}else xr!==null&&(kg(xr),xr=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||vt.current&1?Mt===0&&(Mt=3):py())),e.updateQueue!==null&&(e.flags|=4),un(e),null);case 4:return fo(),_g(t,e),t===null&&mu(e.stateNode.containerInfo),un(e),null;case 10:return Qv(e.type._context),un(e),null;case 17:return jn(e.type)&&th(),un(e),null;case 19:if(ct(vt),a=e.memoizedState,a===null)return un(e),null;if(i=(e.flags&128)!==0,o=a.rendering,o===null)if(i)yl(a,!1);else{if(Mt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=lh(t),o!==null){for(e.flags|=128,yl(a,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)a=r,t=i,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return at(vt,vt.current&1|2),e.child}t=t.sibling}a.tail!==null&&kt()>mo&&(e.flags|=128,i=!0,yl(a,!1),e.lanes=4194304)}else{if(!i)if(t=lh(o),t!==null){if(e.flags|=128,i=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),yl(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!ft)return un(e),null}else 2*kt()-a.renderingStartTime>mo&&r!==1073741824&&(e.flags|=128,i=!0,yl(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=kt(),e.sibling=null,r=vt.current,at(vt,i?r&1|2:r&1),e):(un(e),null);case 22:case 23:return fy(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Bn&1073741824&&(un(e),e.subtreeFlags&6&&(e.flags|=8192)):un(e),null;case 24:return null;case 25:return null}throw Error(ae(156,e.tag))}function eN(t,e){switch(Gv(e),e.tag){case 1:return jn(e.type)&&th(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return fo(),ct(On),ct(mn),ny(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ty(e),null;case 13:if(ct(vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ae(340));co()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ct(vt),null;case 4:return fo(),null;case 10:return Qv(e.type._context),null;case 22:case 23:return fy(),null;case 24:return null;default:return null}}var Jc=!1,hn=!1,tN=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Ka(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Tt(t,e,i)}else r.current=null}function wg(t,e,r){try{r()}catch(i){Tt(t,e,i)}}var Pw=!1;function nN(t,e){if(rg=Qd,t=dS(),Wv(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,u=-1,c=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==a||i!==0&&f.nodeType!==3||(u=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===r&&++c===s&&(l=o),p===a&&++h===i&&(u=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(ig={focusedElem:t,selectionRange:r},Qd=!1,pe=e;pe!==null;)if(e=pe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,pe=t;else for(;pe!==null;){e=pe;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var A=_.memoizedProps,R=_.memoizedState,E=e.stateNode,b=E.getSnapshotBeforeUpdate(e.elementType===e.type?A:wr(e.type,A),R);E.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ae(163))}}catch(D){Tt(e,e.return,D)}if(t=e.sibling,t!==null){t.return=e.return,pe=t;break}pe=e.return}return _=Pw,Pw=!1,_}function Kl(t,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&wg(e,r,a)}s=s.next}while(s!==i)}}function lf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function bg(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function oI(t){var e=t.alternate;e!==null&&(t.alternate=null,oI(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vr],delete e[vu],delete e[og],delete e[VD],delete e[FD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function lI(t){return t.tag===5||t.tag===3||t.tag===4}function Rw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xg(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=eh));else if(i!==4&&(t=t.child,t!==null))for(xg(t,e,r),t=t.sibling;t!==null;)xg(t,e,r),t=t.sibling}function Eg(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Eg(t,e,r),t=t.sibling;t!==null;)Eg(t,e,r),t=t.sibling}var Yt=null,br=!1;function Ni(t,e,r){for(r=r.child;r!==null;)uI(t,e,r),r=r.sibling}function uI(t,e,r){if(Fr&&typeof Fr.onCommitFiberUnmount=="function")try{Fr.onCommitFiberUnmount(Zh,r)}catch{}switch(r.tag){case 5:hn||Ka(r,e);case 6:var i=Yt,s=br;Yt=null,Ni(t,e,r),Yt=i,br=s,Yt!==null&&(br?(t=Yt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Yt.removeChild(r.stateNode));break;case 18:Yt!==null&&(br?(t=Yt,r=r.stateNode,t.nodeType===8?Op(t.parentNode,r):t.nodeType===1&&Op(t,r),hu(t)):Op(Yt,r.stateNode));break;case 4:i=Yt,s=br,Yt=r.stateNode.containerInfo,br=!0,Ni(t,e,r),Yt=i,br=s;break;case 0:case 11:case 14:case 15:if(!hn&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&wg(r,e,o),s=s.next}while(s!==i)}Ni(t,e,r);break;case 1:if(!hn&&(Ka(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(l){Tt(r,e,l)}Ni(t,e,r);break;case 21:Ni(t,e,r);break;case 22:r.mode&1?(hn=(i=hn)||r.memoizedState!==null,Ni(t,e,r),hn=i):Ni(t,e,r);break;default:Ni(t,e,r)}}function Dw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new tN),e.forEach(function(i){var s=dN.bind(null,t,i);r.has(i)||(r.add(i),i.then(s,s))})}}function yr(t,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Yt=l.stateNode,br=!1;break e;case 3:Yt=l.stateNode.containerInfo,br=!0;break e;case 4:Yt=l.stateNode.containerInfo,br=!0;break e}l=l.return}if(Yt===null)throw Error(ae(160));uI(a,o,s),Yt=null,br=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Tt(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)cI(e,t),e=e.sibling}function cI(t,e){var r=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yr(e,t),Nr(t),i&4){try{Kl(3,t,t.return),lf(3,t)}catch(A){Tt(t,t.return,A)}try{Kl(5,t,t.return)}catch(A){Tt(t,t.return,A)}}break;case 1:yr(e,t),Nr(t),i&512&&r!==null&&Ka(r,r.return);break;case 5:if(yr(e,t),Nr(t),i&512&&r!==null&&Ka(r,r.return),t.flags&32){var s=t.stateNode;try{lu(s,"")}catch(A){Tt(t,t.return,A)}}if(i&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&RT(s,a),Gm(l,o);var c=Gm(l,a);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?OT(s,f):h==="dangerouslySetInnerHTML"?MT(s,f):h==="children"?lu(s,f):Dv(s,h,f,c)}switch(l){case"input":$m(s,a);break;case"textarea":DT(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var g=a.value;g!=null?Qa(s,!!a.multiple,g,!1):p!==!!a.multiple&&(a.defaultValue!=null?Qa(s,!!a.multiple,a.defaultValue,!0):Qa(s,!!a.multiple,a.multiple?[]:"",!1))}s[vu]=a}catch(A){Tt(t,t.return,A)}}break;case 6:if(yr(e,t),Nr(t),i&4){if(t.stateNode===null)throw Error(ae(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(A){Tt(t,t.return,A)}}break;case 3:if(yr(e,t),Nr(t),i&4&&r!==null&&r.memoizedState.isDehydrated)try{hu(e.containerInfo)}catch(A){Tt(t,t.return,A)}break;case 4:yr(e,t),Nr(t);break;case 13:yr(e,t),Nr(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(dy=kt())),i&4&&Dw(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(hn=(c=hn)||h,yr(e,t),hn=c):yr(e,t),Nr(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(pe=t,h=t.child;h!==null;){for(f=pe=h;pe!==null;){switch(p=pe,g=p.child,p.tag){case 0:case 11:case 14:case 15:Kl(4,p,p.return);break;case 1:Ka(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){i=p,r=p.return;try{e=i,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(A){Tt(i,r,A)}}break;case 5:Ka(p,p.return);break;case 22:if(p.memoizedState!==null){Mw(f);continue}}g!==null?(g.return=p,pe=g):Mw(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,c?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=LT("display",o))}catch(A){Tt(t,t.return,A)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(A){Tt(t,t.return,A)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:yr(e,t),Nr(t),i&4&&Dw(t);break;case 21:break;default:yr(e,t),Nr(t)}}function Nr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(lI(r)){var i=r;break e}r=r.return}throw Error(ae(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(lu(s,""),i.flags&=-33);var a=Rw(t);Eg(t,a,s);break;case 3:case 4:var o=i.stateNode.containerInfo,l=Rw(t);xg(t,l,o);break;default:throw Error(ae(161))}}catch(u){Tt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function rN(t,e,r){pe=t,dI(t)}function dI(t,e,r){for(var i=(t.mode&1)!==0;pe!==null;){var s=pe,a=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||Jc;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||hn;l=Jc;var c=hn;if(Jc=o,(hn=u)&&!c)for(pe=s;pe!==null;)o=pe,u=o.child,o.tag===22&&o.memoizedState!==null?Lw(s):u!==null?(u.return=o,pe=u):Lw(s);for(;a!==null;)pe=a,dI(a),a=a.sibling;pe=s,Jc=l,hn=c}Nw(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,pe=a):Nw(t)}}function Nw(t){for(;pe!==null;){var e=pe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hn||lf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!hn)if(r===null)i.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:wr(e.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&vw(e,a,i);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}vw(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&hu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ae(163))}hn||e.flags&512&&bg(e)}catch(p){Tt(e,e.return,p)}}if(e===t){pe=null;break}if(r=e.sibling,r!==null){r.return=e.return,pe=r;break}pe=e.return}}function Mw(t){for(;pe!==null;){var e=pe;if(e===t){pe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,pe=r;break}pe=e.return}}function Lw(t){for(;pe!==null;){var e=pe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{lf(4,e)}catch(u){Tt(e,r,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(u){Tt(e,s,u)}}var a=e.return;try{bg(e)}catch(u){Tt(e,a,u)}break;case 5:var o=e.return;try{bg(e)}catch(u){Tt(e,o,u)}}}catch(u){Tt(e,e.return,u)}if(e===t){pe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,pe=l;break}pe=e.return}}var iN=Math.ceil,dh=Ti.ReactCurrentDispatcher,uy=Ti.ReactCurrentOwner,or=Ti.ReactCurrentBatchConfig,ze=0,Bt=null,Pt=null,Zt=0,Bn=0,Ya=xs(0),Mt=0,Eu=null,na=0,uf=0,cy=0,Yl=null,Dn=null,dy=0,mo=1/0,ii=null,hh=!1,Tg=null,Zi=null,Zc=!1,qi=null,fh=0,Xl=0,Sg=null,kd=-1,Cd=0;function wn(){return ze&6?kt():kd!==-1?kd:kd=kt()}function es(t){return t.mode&1?ze&2&&Zt!==0?Zt&-Zt:BD.transition!==null?(Cd===0&&(Cd=KT()),Cd):(t=Je,t!==0||(t=window.event,t=t===void 0?16:nS(t.type)),t):1}function Ir(t,e,r,i){if(50<Xl)throw Xl=0,Sg=null,Error(ae(185));zu(t,r,i),(!(ze&2)||t!==Bt)&&(t===Bt&&(!(ze&2)&&(uf|=r),Mt===4&&Ui(t,Zt)),Vn(t,i),r===1&&ze===0&&!(e.mode&1)&&(mo=kt()+500,sf&&Es()))}function Vn(t,e){var r=t.callbackNode;BR(t,e);var i=Xd(t,t===Bt?Zt:0);if(i===0)r!==null&&H0(r),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(r!=null&&H0(r),e===1)t.tag===0?UD(Ow.bind(null,t)):bS(Ow.bind(null,t)),OD(function(){!(ze&6)&&Es()}),r=null;else{switch(XT(i)){case 1:r=jv;break;case 4:r=qT;break;case 16:r=Yd;break;case 536870912:r=GT;break;default:r=Yd}r=_I(r,hI.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function hI(t,e){if(kd=-1,Cd=0,ze&6)throw Error(ae(327));var r=t.callbackNode;if(no()&&t.callbackNode!==r)return null;var i=Xd(t,t===Bt?Zt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=ph(t,i);else{e=i;var s=ze;ze|=2;var a=pI();(Bt!==t||Zt!==e)&&(ii=null,mo=kt()+500,Qs(t,e));do try{oN();break}catch(l){fI(t,l)}while(!0);Xv(),dh.current=a,ze=s,Pt!==null?e=0:(Bt=null,Zt=0,e=Mt)}if(e!==0){if(e===2&&(s=Jm(t),s!==0&&(i=s,e=Ig(t,s))),e===1)throw r=Eu,Qs(t,0),Ui(t,i),Vn(t,kt()),r;if(e===6)Ui(t,i);else{if(s=t.current.alternate,!(i&30)&&!sN(s)&&(e=ph(t,i),e===2&&(a=Jm(t),a!==0&&(i=a,e=Ig(t,a))),e===1))throw r=Eu,Qs(t,0),Ui(t,i),Vn(t,kt()),r;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(ae(345));case 2:Bs(t,Dn,ii);break;case 3:if(Ui(t,i),(i&130023424)===i&&(e=dy+500-kt(),10<e)){if(Xd(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){wn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ag(Bs.bind(null,t,Dn,ii),e);break}Bs(t,Dn,ii);break;case 4:if(Ui(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var o=31-Sr(i);a=1<<o,o=e[o],o>s&&(s=o),i&=~a}if(i=s,i=kt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*iN(i/1960))-i,10<i){t.timeoutHandle=ag(Bs.bind(null,t,Dn,ii),i);break}Bs(t,Dn,ii);break;case 5:Bs(t,Dn,ii);break;default:throw Error(ae(329))}}}return Vn(t,kt()),t.callbackNode===r?hI.bind(null,t):null}function Ig(t,e){var r=Yl;return t.current.memoizedState.isDehydrated&&(Qs(t,e).flags|=256),t=ph(t,e),t!==2&&(e=Dn,Dn=r,e!==null&&kg(e)),t}function kg(t){Dn===null?Dn=t:Dn.push.apply(Dn,t)}function sN(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var s=r[i],a=s.getSnapshot;s=s.value;try{if(!kr(a(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ui(t,e){for(e&=~cy,e&=~uf,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Sr(e),i=1<<r;t[r]=-1,e&=~i}}function Ow(t){if(ze&6)throw Error(ae(327));no();var e=Xd(t,0);if(!(e&1))return Vn(t,kt()),null;var r=ph(t,e);if(t.tag!==0&&r===2){var i=Jm(t);i!==0&&(e=i,r=Ig(t,i))}if(r===1)throw r=Eu,Qs(t,0),Ui(t,e),Vn(t,kt()),r;if(r===6)throw Error(ae(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bs(t,Dn,ii),Vn(t,kt()),null}function hy(t,e){var r=ze;ze|=1;try{return t(e)}finally{ze=r,ze===0&&(mo=kt()+500,sf&&Es())}}function ra(t){qi!==null&&qi.tag===0&&!(ze&6)&&no();var e=ze;ze|=1;var r=or.transition,i=Je;try{if(or.transition=null,Je=1,t)return t()}finally{Je=i,or.transition=r,ze=e,!(ze&6)&&Es()}}function fy(){Bn=Ya.current,ct(Ya)}function Qs(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,LD(r)),Pt!==null)for(r=Pt.return;r!==null;){var i=r;switch(Gv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&th();break;case 3:fo(),ct(On),ct(mn),ny();break;case 5:ty(i);break;case 4:fo();break;case 13:ct(vt);break;case 19:ct(vt);break;case 10:Qv(i.type._context);break;case 22:case 23:fy()}r=r.return}if(Bt=t,Pt=t=ts(t.current,null),Zt=Bn=e,Mt=0,Eu=null,cy=uf=na=0,Dn=Yl=null,Ks!==null){for(e=0;e<Ks.length;e++)if(r=Ks[e],i=r.interleaved,i!==null){r.interleaved=null;var s=i.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,i.next=o}r.pending=i}Ks=null}return t}function fI(t,e){do{var r=Pt;try{if(Xv(),Td.current=ch,uh){for(var i=_t.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}uh=!1}if(ta=0,Ut=Dt=_t=null,Gl=!1,wu=0,uy.current=null,r===null||r.return===null){Mt=1,Eu=e,Pt=null;break}e:{var a=t,o=r.return,l=r,u=e;if(e=Zt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=Ew(o);if(g!==null){g.flags&=-257,Tw(g,o,l,a,e),g.mode&1&&xw(a,c,e),e=g,u=c;var _=e.updateQueue;if(_===null){var A=new Set;A.add(u),e.updateQueue=A}else _.add(u);break e}else{if(!(e&1)){xw(a,c,e),py();break e}u=Error(ae(426))}}else if(ft&&l.mode&1){var R=Ew(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Tw(R,o,l,a,e),Kv(po(u,l));break e}}a=u=po(u,l),Mt!==4&&(Mt=2),Yl===null?Yl=[a]:Yl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var E=XS(a,u,e);gw(a,E);break e;case 1:l=u;var b=a.type,T=a.stateNode;if(!(a.flags&128)&&(typeof b.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Zi===null||!Zi.has(T)))){a.flags|=65536,e&=-e,a.lanes|=e;var D=QS(a,l,e);gw(a,D);break e}}a=a.return}while(a!==null)}gI(r)}catch(U){e=U,Pt===r&&r!==null&&(Pt=r=r.return);continue}break}while(!0)}function pI(){var t=dh.current;return dh.current=ch,t===null?ch:t}function py(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),Bt===null||!(na&268435455)&&!(uf&268435455)||Ui(Bt,Zt)}function ph(t,e){var r=ze;ze|=2;var i=pI();(Bt!==t||Zt!==e)&&(ii=null,Qs(t,e));do try{aN();break}catch(s){fI(t,s)}while(!0);if(Xv(),ze=r,dh.current=i,Pt!==null)throw Error(ae(261));return Bt=null,Zt=0,Mt}function aN(){for(;Pt!==null;)mI(Pt)}function oN(){for(;Pt!==null&&!DR();)mI(Pt)}function mI(t){var e=yI(t.alternate,t,Bn);t.memoizedProps=t.pendingProps,e===null?gI(t):Pt=e,uy.current=null}function gI(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=eN(r,e),r!==null){r.flags&=32767,Pt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Mt=6,Pt=null;return}}else if(r=ZD(r,e,Bn),r!==null){Pt=r;return}if(e=e.sibling,e!==null){Pt=e;return}Pt=e=t}while(e!==null);Mt===0&&(Mt=5)}function Bs(t,e,r){var i=Je,s=or.transition;try{or.transition=null,Je=1,lN(t,e,r,i)}finally{or.transition=s,Je=i}return null}function lN(t,e,r,i){do no();while(qi!==null);if(ze&6)throw Error(ae(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ae(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if($R(t,a),t===Bt&&(Pt=Bt=null,Zt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Zc||(Zc=!0,_I(Yd,function(){return no(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=or.transition,or.transition=null;var o=Je;Je=1;var l=ze;ze|=4,uy.current=null,nN(t,r),cI(r,t),CD(ig),Qd=!!rg,ig=rg=null,t.current=r,rN(r),NR(),ze=l,Je=o,or.transition=a}else t.current=r;if(Zc&&(Zc=!1,qi=t,fh=s),a=t.pendingLanes,a===0&&(Zi=null),OR(r.stateNode),Vn(t,kt()),e!==null)for(i=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(hh)throw hh=!1,t=Tg,Tg=null,t;return fh&1&&t.tag!==0&&no(),a=t.pendingLanes,a&1?t===Sg?Xl++:(Xl=0,Sg=t):Xl=0,Es(),null}function no(){if(qi!==null){var t=XT(fh),e=or.transition,r=Je;try{if(or.transition=null,Je=16>t?16:t,qi===null)var i=!1;else{if(t=qi,qi=null,fh=0,ze&6)throw Error(ae(331));var s=ze;for(ze|=4,pe=t.current;pe!==null;){var a=pe,o=a.child;if(pe.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(pe=c;pe!==null;){var h=pe;switch(h.tag){case 0:case 11:case 15:Kl(8,h,a)}var f=h.child;if(f!==null)f.return=h,pe=f;else for(;pe!==null;){h=pe;var p=h.sibling,g=h.return;if(oI(h),h===c){pe=null;break}if(p!==null){p.return=g,pe=p;break}pe=g}}}var _=a.alternate;if(_!==null){var A=_.child;if(A!==null){_.child=null;do{var R=A.sibling;A.sibling=null,A=R}while(A!==null)}}pe=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,pe=o;else e:for(;pe!==null;){if(a=pe,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Kl(9,a,a.return)}var E=a.sibling;if(E!==null){E.return=a.return,pe=E;break e}pe=a.return}}var b=t.current;for(pe=b;pe!==null;){o=pe;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,pe=T;else e:for(o=b;pe!==null;){if(l=pe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:lf(9,l)}}catch(U){Tt(l,l.return,U)}if(l===o){pe=null;break e}var D=l.sibling;if(D!==null){D.return=l.return,pe=D;break e}pe=l.return}}if(ze=s,Es(),Fr&&typeof Fr.onPostCommitFiberRoot=="function")try{Fr.onPostCommitFiberRoot(Zh,t)}catch{}i=!0}return i}finally{Je=r,or.transition=e}}return!1}function jw(t,e,r){e=po(r,e),e=XS(t,e,1),t=Ji(t,e,1),e=wn(),t!==null&&(zu(t,1,e),Vn(t,e))}function Tt(t,e,r){if(t.tag===3)jw(t,t,r);else for(;e!==null;){if(e.tag===3){jw(e,t,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Zi===null||!Zi.has(i))){t=po(r,t),t=QS(e,t,1),e=Ji(e,t,1),t=wn(),e!==null&&(zu(e,1,t),Vn(e,t));break}}e=e.return}}function uN(t,e,r){var i=t.pingCache;i!==null&&i.delete(e),e=wn(),t.pingedLanes|=t.suspendedLanes&r,Bt===t&&(Zt&r)===r&&(Mt===4||Mt===3&&(Zt&130023424)===Zt&&500>kt()-dy?Qs(t,0):cy|=r),Vn(t,e)}function vI(t,e){e===0&&(t.mode&1?(e=zc,zc<<=1,!(zc&130023424)&&(zc=4194304)):e=1);var r=wn();t=gi(t,e),t!==null&&(zu(t,e,r),Vn(t,r))}function cN(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),vI(t,r)}function dN(t,e){var r=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ae(314))}i!==null&&i.delete(e),vI(t,r)}var yI;yI=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||On.current)Mn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Mn=!1,JD(t,e,r);Mn=!!(t.flags&131072)}else Mn=!1,ft&&e.flags&1048576&&xS(e,ih,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Id(t,e),t=e.pendingProps;var s=uo(e,mn.current);to(e,r),s=iy(null,e,i,t,s,r);var a=sy();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jn(i)?(a=!0,nh(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Zv(e),s.updater=of,e.stateNode=s,s._reactInternals=e,fg(e,i,t,r),e=gg(null,e,i,!0,a,r)):(e.tag=0,ft&&a&&qv(e),_n(null,e,s,r),e=e.child),e;case 16:i=e.elementType;e:{switch(Id(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=fN(i),t=wr(i,t),s){case 0:e=mg(null,e,i,t,r);break e;case 1:e=kw(null,e,i,t,r);break e;case 11:e=Sw(null,e,i,t,r);break e;case 14:e=Iw(null,e,i,wr(i.type,t),r);break e}throw Error(ae(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:wr(i,s),mg(t,e,i,s,r);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:wr(i,s),kw(t,e,i,s,r);case 3:e:{if(tI(e),t===null)throw Error(ae(387));i=e.pendingProps,a=e.memoizedState,s=a.element,CS(t,e),oh(e,i,null,r);var o=e.memoizedState;if(i=o.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=po(Error(ae(423)),e),e=Cw(t,e,i,r,s);break e}else if(i!==s){s=po(Error(ae(424)),e),e=Cw(t,e,i,r,s);break e}else for($n=Qi(e.stateNode.containerInfo.firstChild),Wn=e,ft=!0,xr=null,r=IS(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(co(),i===s){e=vi(t,e,r);break e}_n(t,e,i,r)}e=e.child}return e;case 5:return AS(e),t===null&&cg(e),i=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,sg(i,s)?o=null:a!==null&&sg(i,a)&&(e.flags|=32),eI(t,e),_n(t,e,o,r),e.child;case 6:return t===null&&cg(e),null;case 13:return nI(t,e,r);case 4:return ey(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ho(e,null,i,r):_n(t,e,i,r),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:wr(i,s),Sw(t,e,i,s,r);case 7:return _n(t,e,e.pendingProps,r),e.child;case 8:return _n(t,e,e.pendingProps.children,r),e.child;case 12:return _n(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,at(sh,i._currentValue),i._currentValue=o,a!==null)if(kr(a.value,o)){if(a.children===s.children&&!On.current){e=vi(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(a.tag===1){u=di(-1,r&-r),u.tag=2;var c=a.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}a.lanes|=r,u=a.alternate,u!==null&&(u.lanes|=r),dg(a.return,r,e),l.lanes|=r;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ae(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),dg(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}_n(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,to(e,r),s=cr(s),i=i(s),e.flags|=1,_n(t,e,i,r),e.child;case 14:return i=e.type,s=wr(i,e.pendingProps),s=wr(i.type,s),Iw(t,e,i,s,r);case 15:return JS(t,e,e.type,e.pendingProps,r);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:wr(i,s),Id(t,e),e.tag=1,jn(i)?(t=!0,nh(e)):t=!1,to(e,r),YS(e,i,s),fg(e,i,s,r),gg(null,e,i,!0,t,r);case 19:return rI(t,e,r);case 22:return ZS(t,e,r)}throw Error(ae(156,e.tag))};function _I(t,e){return WT(t,e)}function hN(t,e,r,i){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(t,e,r,i){return new hN(t,e,r,i)}function my(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fN(t){if(typeof t=="function")return my(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Mv)return 11;if(t===Lv)return 14}return 2}function ts(t,e){var r=t.alternate;return r===null?(r=sr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Ad(t,e,r,i,s,a){var o=2;if(i=t,typeof t=="function")my(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Fa:return Js(r.children,s,a,e);case Nv:o=8,s|=8;break;case jm:return t=sr(12,r,e,s|2),t.elementType=jm,t.lanes=a,t;case Vm:return t=sr(13,r,e,s),t.elementType=Vm,t.lanes=a,t;case Fm:return t=sr(19,r,e,s),t.elementType=Fm,t.lanes=a,t;case CT:return cf(r,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case IT:o=10;break e;case kT:o=9;break e;case Mv:o=11;break e;case Lv:o=14;break e;case Oi:o=16,i=null;break e}throw Error(ae(130,t==null?t:typeof t,""))}return e=sr(o,r,e,s),e.elementType=t,e.type=i,e.lanes=a,e}function Js(t,e,r,i){return t=sr(7,t,i,e),t.lanes=r,t}function cf(t,e,r,i){return t=sr(22,t,i,e),t.elementType=CT,t.lanes=r,t.stateNode={isHidden:!1},t}function Hp(t,e,r){return t=sr(6,t,null,e),t.lanes=r,t}function Wp(t,e,r){return e=sr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function pN(t,e,r,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sp(0),this.expirationTimes=Sp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sp(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function gy(t,e,r,i,s,a,o,l,u){return t=new pN(t,e,r,l,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=sr(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zv(a),t}function mN(t,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Va,key:i==null?null:""+i,children:t,containerInfo:e,implementation:r}}function wI(t){if(!t)return hs;t=t._reactInternals;e:{if(ha(t)!==t||t.tag!==1)throw Error(ae(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ae(171))}if(t.tag===1){var r=t.type;if(jn(r))return wS(t,r,e)}return e}function bI(t,e,r,i,s,a,o,l,u){return t=gy(r,i,!0,t,s,a,o,l,u),t.context=wI(null),r=t.current,i=wn(),s=es(r),a=di(i,s),a.callback=e??null,Ji(r,a,s),t.current.lanes=s,zu(t,s,i),Vn(t,i),t}function df(t,e,r,i){var s=e.current,a=wn(),o=es(s);return r=wI(r),e.context===null?e.context=r:e.pendingContext=r,e=di(a,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Ji(s,e,o),t!==null&&(Ir(t,s,o,a),Ed(t,s,o)),o}function mh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Vw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function vy(t,e){Vw(t,e),(t=t.alternate)&&Vw(t,e)}function gN(){return null}var xI=typeof reportError=="function"?reportError:function(t){console.error(t)};function yy(t){this._internalRoot=t}hf.prototype.render=yy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ae(409));df(t,e,null,null)};hf.prototype.unmount=yy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ra(function(){df(null,t,null,null)}),e[mi]=null}};function hf(t){this._internalRoot=t}hf.prototype.unstable_scheduleHydration=function(t){if(t){var e=ZT();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Fi.length&&e!==0&&e<Fi[r].priority;r++);Fi.splice(r,0,t),r===0&&tS(t)}};function _y(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ff(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Fw(){}function vN(t,e,r,i,s){if(s){if(typeof i=="function"){var a=i;i=function(){var c=mh(o);a.call(c)}}var o=bI(e,i,t,0,null,!1,!1,"",Fw);return t._reactRootContainer=o,t[mi]=o.current,mu(t.nodeType===8?t.parentNode:t),ra(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var c=mh(u);l.call(c)}}var u=gy(t,0,!1,null,null,!1,!1,"",Fw);return t._reactRootContainer=u,t[mi]=u.current,mu(t.nodeType===8?t.parentNode:t),ra(function(){df(e,u,r,i)}),u}function pf(t,e,r,i,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var u=mh(o);l.call(u)}}df(e,o,t,s)}else o=vN(r,e,t,s,i);return mh(o)}QT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Dl(e.pendingLanes);r!==0&&(Vv(e,r|1),Vn(e,kt()),!(ze&6)&&(mo=kt()+500,Es()))}break;case 13:ra(function(){var i=gi(t,1);if(i!==null){var s=wn();Ir(i,t,1,s)}}),vy(t,1)}};Fv=function(t){if(t.tag===13){var e=gi(t,134217728);if(e!==null){var r=wn();Ir(e,t,134217728,r)}vy(t,134217728)}};JT=function(t){if(t.tag===13){var e=es(t),r=gi(t,e);if(r!==null){var i=wn();Ir(r,t,e,i)}vy(t,e)}};ZT=function(){return Je};eS=function(t,e){var r=Je;try{return Je=t,e()}finally{Je=r}};Ym=function(t,e,r){switch(e){case"input":if($m(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==t&&i.form===t.form){var s=rf(i);if(!s)throw Error(ae(90));PT(i),$m(i,s)}}}break;case"textarea":DT(t,r);break;case"select":e=r.value,e!=null&&Qa(t,!!r.multiple,e,!1)}};FT=hy;UT=ra;var yN={usingClientEntryPoint:!1,Events:[Wu,za,rf,jT,VT,hy]},_l={findFiberByHostInstance:Gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},_N={bundleType:_l.bundleType,version:_l.version,rendererPackageName:_l.rendererPackageName,rendererConfig:_l.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ti.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=zT(t),t===null?null:t.stateNode},findFiberByHostInstance:_l.findFiberByHostInstance||gN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ed=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ed.isDisabled&&ed.supportsFiber)try{Zh=ed.inject(_N),Fr=ed}catch{}}Qn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=yN;Qn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!_y(e))throw Error(ae(200));return mN(t,e,null,r)};Qn.createRoot=function(t,e){if(!_y(t))throw Error(ae(299));var r=!1,i="",s=xI;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=gy(t,1,!1,null,null,r,!1,i,s),t[mi]=e.current,mu(t.nodeType===8?t.parentNode:t),new yy(e)};Qn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ae(188)):(t=Object.keys(t).join(","),Error(ae(268,t)));return t=zT(e),t=t===null?null:t.stateNode,t};Qn.flushSync=function(t){return ra(t)};Qn.hydrate=function(t,e,r){if(!ff(e))throw Error(ae(200));return pf(null,t,e,!0,r)};Qn.hydrateRoot=function(t,e,r){if(!_y(t))throw Error(ae(405));var i=r!=null&&r.hydratedSources||null,s=!1,a="",o=xI;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=bI(e,null,t,1,r??null,s,!1,a,o),t[mi]=e.current,mu(t),i)for(t=0;t<i.length;t++)r=i[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new hf(e)};Qn.render=function(t,e,r){if(!ff(e))throw Error(ae(200));return pf(null,t,e,!1,r)};Qn.unmountComponentAtNode=function(t){if(!ff(t))throw Error(ae(40));return t._reactRootContainer?(ra(function(){pf(null,null,t,!1,function(){t._reactRootContainer=null,t[mi]=null})}),!0):!1};Qn.unstable_batchedUpdates=hy;Qn.unstable_renderSubtreeIntoContainer=function(t,e,r,i){if(!ff(r))throw Error(ae(200));if(t==null||t._reactInternals===void 0)throw Error(ae(38));return pf(t,e,r,!1,i)};Qn.version="18.3.1-next-f1338f8080-20240426";function EI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(EI)}catch(t){console.error(t)}}EI(),xT.exports=Qn;var wy=xT.exports;const wN=No(wy);var Uw=wy;Lm.createRoot=Uw.createRoot,Lm.hydrateRoot=Uw.hydrateRoot;var by={};Object.defineProperty(by,"__esModule",{value:!0});by.parse=kN;by.serialize=CN;const bN=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,xN=/^[\u0021-\u003A\u003C-\u007E]*$/,EN=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,TN=/^[\u0020-\u003A\u003D-\u007E]*$/,SN=Object.prototype.toString,IN=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function kN(t,e){const r=new IN,i=t.length;if(i<2)return r;const s=(e==null?void 0:e.decode)||AN;let a=0;do{const o=t.indexOf("=",a);if(o===-1)break;const l=t.indexOf(";",a),u=l===-1?i:l;if(o>u){a=t.lastIndexOf(";",o-1)+1;continue}const c=Bw(t,a,o),h=$w(t,o,c),f=t.slice(c,h);if(r[f]===void 0){let p=Bw(t,o+1,u),g=$w(t,u,p);const _=s(t.slice(p,g));r[f]=_}a=u+1}while(a<i);return r}function Bw(t,e,r){do{const i=t.charCodeAt(e);if(i!==32&&i!==9)return e}while(++e<r);return r}function $w(t,e,r){for(;e>r;){const i=t.charCodeAt(--e);if(i!==32&&i!==9)return e+1}return r}function CN(t,e,r){const i=(r==null?void 0:r.encode)||encodeURIComponent;if(!bN.test(t))throw new TypeError(`argument name is invalid: ${t}`);const s=i(e);if(!xN.test(s))throw new TypeError(`argument val is invalid: ${e}`);let a=t+"="+s;if(!r)return a;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);a+="; Max-Age="+r.maxAge}if(r.domain){if(!EN.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);a+="; Domain="+r.domain}if(r.path){if(!TN.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);a+="; Path="+r.path}if(r.expires){if(!PN(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.partitioned&&(a+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return a}function AN(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function PN(t){return SN.call(t)==="[object Date]"}/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var zw="popstate";function RN(t={}){function e(s,a){let{pathname:o="/",search:l="",hash:u=""}=fa(s.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Cg("",{pathname:o,search:l,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(s,a){let o=s.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=s.location.href,c=u.indexOf("#");l=c===-1?u:u.slice(0,c)}return l+"#"+(typeof a=="string"?a:Tu(a))}function i(s,a){Xn(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return NN(e,r,i,t)}function mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Xn(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function DN(){return Math.random().toString(36).substring(2,10)}function Hw(t,e){return{usr:t.state,key:t.key,idx:e}}function Cg(t,e,r=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?fa(e):e,state:r,key:e&&e.key||i||DN()}}function Tu({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function fa(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function NN(t,e,r,i={}){let{window:s=document.defaultView,v5Compat:a=!1}=i,o=s.history,l="POP",u=null,c=h();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function h(){return(o.state||{idx:null}).idx}function f(){l="POP";let R=h(),E=R==null?null:R-c;c=R,u&&u({action:l,location:A.location,delta:E})}function p(R,E){l="PUSH";let b=Cg(A.location,R,E);r&&r(b,R),c=h()+1;let T=Hw(b,c),D=A.createHref(b);try{o.pushState(T,"",D)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;s.location.assign(D)}a&&u&&u({action:l,location:A.location,delta:1})}function g(R,E){l="REPLACE";let b=Cg(A.location,R,E);r&&r(b,R),c=h();let T=Hw(b,c),D=A.createHref(b);o.replaceState(T,"",D),a&&u&&u({action:l,location:A.location,delta:0})}function _(R){let E=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof R=="string"?R:Tu(R);return b=b.replace(/ $/,"%20"),mt(E,`No window.location.(origin|href) available to create URL for href: ${b}`),new URL(b,E)}let A={get action(){return l},get location(){return t(s,o)},listen(R){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(zw,f),u=R,()=>{s.removeEventListener(zw,f),u=null}},createHref(R){return e(s,R)},createURL:_,encodeLocation(R){let E=_(R);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:p,replace:g,go(R){return o.go(R)}};return A}function TI(t,e,r="/"){return MN(t,e,r,!1)}function MN(t,e,r,i){let s=typeof e=="string"?fa(e):e,a=fs(s.pathname||"/",r);if(a==null)return null;let o=SI(t);LN(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=qN(a);l=HN(o[u],c,i)}return l}function SI(t,e=[],r=[],i=""){let s=(a,o,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(mt(u.relativePath.startsWith(i),`Absolute route path "${u.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(i.length));let c=hi([i,u.relativePath]),h=r.concat(u);a.children&&a.children.length>0&&(mt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),SI(a.children,e,h,c)),!(a.path==null&&!a.index)&&e.push({path:c,score:$N(c,a.index),routesMeta:h})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let u of II(a.path))s(a,o,u)}),e}function II(t){let e=t.split("/");if(e.length===0)return[];let[r,...i]=e,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let o=II(i.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function LN(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:zN(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var ON=/^:[\w-]+$/,jN=3,VN=2,FN=1,UN=10,BN=-2,Ww=t=>t==="*";function $N(t,e){let r=t.split("/"),i=r.length;return r.some(Ww)&&(i+=BN),e&&(i+=VN),r.filter(s=>!Ww(s)).reduce((s,a)=>s+(ON.test(a)?jN:a===""?FN:UN),i)}function zN(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function HN(t,e,r=!1){let{routesMeta:i}=t,s={},a="/",o=[];for(let l=0;l<i.length;++l){let u=i[l],c=l===i.length-1,h=a==="/"?e:e.slice(a.length)||"/",f=gh({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),p=u.route;if(!f&&c&&r&&!i[i.length-1].route.index&&(f=gh({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:hi([a,f.pathname]),pathnameBase:XN(hi([a,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(a=hi([a,f.pathnameBase]))}return o}function gh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,i]=WN(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:i.reduce((c,{paramName:h,isOptional:f},p)=>{if(h==="*"){let _=l[p]||"";o=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const g=l[p];return f&&!g?c[h]=void 0:c[h]=(g||"").replace(/%2F/g,"/"),c},{}),pathname:a,pathnameBase:o,pattern:t}}function WN(t,e=!1,r=!0){Xn(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function qN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Xn(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function fs(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=t.charAt(r);return i&&i!=="/"?null:t.slice(r)||"/"}function GN(t,e="/"){let{pathname:r,search:i="",hash:s=""}=typeof t=="string"?fa(t):t;return{pathname:r?r.startsWith("/")?r:KN(r,e):e,search:QN(i),hash:JN(s)}}function KN(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function qp(t,e,r,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function YN(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function xy(t){let e=YN(t);return e.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase)}function Ey(t,e,r,i=!1){let s;typeof t=="string"?s=fa(t):(s={...t},mt(!s.pathname||!s.pathname.includes("?"),qp("?","pathname","search",s)),mt(!s.pathname||!s.pathname.includes("#"),qp("#","pathname","hash",s)),mt(!s.search||!s.search.includes("#"),qp("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=r;else{let f=e.length-1;if(!i&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}l=f>=0?e[f]:"/"}let u=GN(s,l),c=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}var hi=t=>t.join("/").replace(/\/\/+/g,"/"),XN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),QN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,JN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ZN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var kI=["POST","PUT","PATCH","DELETE"];new Set(kI);var e2=["GET",...kI];new Set(e2);var jo=L.createContext(null);jo.displayName="DataRouter";var mf=L.createContext(null);mf.displayName="DataRouterState";var CI=L.createContext({isTransitioning:!1});CI.displayName="ViewTransition";var t2=L.createContext(new Map);t2.displayName="Fetchers";var n2=L.createContext(null);n2.displayName="Await";var Ar=L.createContext(null);Ar.displayName="Navigation";var Gu=L.createContext(null);Gu.displayName="Location";var Xr=L.createContext({outlet:null,matches:[],isDataRoute:!1});Xr.displayName="Route";var Ty=L.createContext(null);Ty.displayName="RouteError";function r2(t,{relative:e}={}){mt(Vo(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=L.useContext(Ar),{hash:s,pathname:a,search:o}=Ku(t,{relative:e}),l=a;return r!=="/"&&(l=a==="/"?r:hi([r,a])),i.createHref({pathname:l,search:o,hash:s})}function Vo(){return L.useContext(Gu)!=null}function fr(){return mt(Vo(),"useLocation() may be used only in the context of a <Router> component."),L.useContext(Gu).location}var AI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function PI(t){L.useContext(Ar).static||L.useLayoutEffect(t)}function Qr(){let{isDataRoute:t}=L.useContext(Xr);return t?g2():i2()}function i2(){mt(Vo(),"useNavigate() may be used only in the context of a <Router> component.");let t=L.useContext(jo),{basename:e,navigator:r}=L.useContext(Ar),{matches:i}=L.useContext(Xr),{pathname:s}=fr(),a=JSON.stringify(xy(i)),o=L.useRef(!1);return PI(()=>{o.current=!0}),L.useCallback((u,c={})=>{if(Xn(o.current,AI),!o.current)return;if(typeof u=="number"){r.go(u);return}let h=Ey(u,JSON.parse(a),s,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:hi([e,h.pathname])),(c.replace?r.replace:r.push)(h,c.state,c)},[e,r,a,s,t])}L.createContext(null);function Ku(t,{relative:e}={}){let{matches:r}=L.useContext(Xr),{pathname:i}=fr(),s=JSON.stringify(xy(r));return L.useMemo(()=>Ey(t,JSON.parse(s),i,e==="path"),[t,s,i,e])}function s2(t,e){return RI(t,e)}function RI(t,e,r,i){var b;mt(Vo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:a}=L.useContext(Ar),{matches:o}=L.useContext(Xr),l=o[o.length-1],u=l?l.params:{},c=l?l.pathname:"/",h=l?l.pathnameBase:"/",f=l&&l.route;{let T=f&&f.path||"";DI(c,!f||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let p=fr(),g;if(e){let T=typeof e=="string"?fa(e):e;mt(h==="/"||((b=T.pathname)==null?void 0:b.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${T.pathname}" was given in the \`location\` prop.`),g=T}else g=p;let _=g.pathname||"/",A=_;if(h!=="/"){let T=h.replace(/^\//,"").split("/");A="/"+_.replace(/^\//,"").split("/").slice(T.length).join("/")}let R=!a&&r&&r.matches&&r.matches.length>0?r.matches:TI(t,{pathname:A});Xn(f||R!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),Xn(R==null||R[R.length-1].route.element!==void 0||R[R.length-1].route.Component!==void 0||R[R.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let E=c2(R&&R.map(T=>Object.assign({},T,{params:Object.assign({},u,T.params),pathname:hi([h,s.encodeLocation?s.encodeLocation(T.pathname).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?h:hi([h,s.encodeLocation?s.encodeLocation(T.pathnameBase).pathname:T.pathnameBase])})),o,r,i);return e&&E?L.createElement(Gu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},E):E}function a2(){let t=m2(),e=ZN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=L.createElement(L.Fragment,null,L.createElement("p",null," Hey developer "),L.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",L.createElement("code",{style:a},"ErrorBoundary")," or"," ",L.createElement("code",{style:a},"errorElement")," prop on your route.")),L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),r?L.createElement("pre",{style:s},r):null,o)}var o2=L.createElement(a2,null),l2=class extends L.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?L.createElement(Xr.Provider,{value:this.props.routeContext},L.createElement(Ty.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function u2({routeContext:t,match:e,children:r}){let i=L.useContext(jo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),L.createElement(Xr.Provider,{value:t},r)}function c2(t,e=[],r=null,i=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,a=r==null?void 0:r.errors;if(a!=null){let u=s.findIndex(c=>c.route.id&&(a==null?void 0:a[c.route.id])!==void 0);mt(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let o=!1,l=-1;if(r)for(let u=0;u<s.length;u++){let c=s[u];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(l=u),c.route.id){let{loaderData:h,errors:f}=r,p=c.route.loader&&!h.hasOwnProperty(c.route.id)&&(!f||f[c.route.id]===void 0);if(c.route.lazy||p){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((u,c,h)=>{let f,p=!1,g=null,_=null;r&&(f=a&&c.route.id?a[c.route.id]:void 0,g=c.route.errorElement||o2,o&&(l<0&&h===0?(DI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,_=null):l===h&&(p=!0,_=c.route.hydrateFallbackElement||null)));let A=e.concat(s.slice(0,h+1)),R=()=>{let E;return f?E=g:p?E=_:c.route.Component?E=L.createElement(c.route.Component,null):c.route.element?E=c.route.element:E=u,L.createElement(u2,{match:c,routeContext:{outlet:u,matches:A,isDataRoute:r!=null},children:E})};return r&&(c.route.ErrorBoundary||c.route.errorElement||h===0)?L.createElement(l2,{location:r.location,revalidation:r.revalidation,component:g,error:f,children:R(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):R()},null)}function Sy(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function d2(t){let e=L.useContext(jo);return mt(e,Sy(t)),e}function h2(t){let e=L.useContext(mf);return mt(e,Sy(t)),e}function f2(t){let e=L.useContext(Xr);return mt(e,Sy(t)),e}function Iy(t){let e=f2(t),r=e.matches[e.matches.length-1];return mt(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function p2(){return Iy("useRouteId")}function m2(){var i;let t=L.useContext(Ty),e=h2("useRouteError"),r=Iy("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[r]}function g2(){let{router:t}=d2("useNavigate"),e=Iy("useNavigate"),r=L.useRef(!1);return PI(()=>{r.current=!0}),L.useCallback(async(s,a={})=>{Xn(r.current,AI),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...a}))},[t,e])}var qw={};function DI(t,e,r){!e&&!qw[t]&&(qw[t]=!0,Xn(!1,r))}L.memo(v2);function v2({routes:t,future:e,state:r}){return RI(t,void 0,r,e)}function NI({to:t,replace:e,state:r,relative:i}){mt(Vo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=L.useContext(Ar);Xn(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=L.useContext(Xr),{pathname:o}=fr(),l=Qr(),u=Ey(t,xy(a),o,i==="path"),c=JSON.stringify(u);return L.useEffect(()=>{l(JSON.parse(c),{replace:e,state:r,relative:i})},[l,c,i,e,r]),null}function Mr(t){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function y2({basename:t="/",children:e=null,location:r,navigationType:i="POP",navigator:s,static:a=!1}){mt(!Vo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=L.useMemo(()=>({basename:o,navigator:s,static:a,future:{}}),[o,s,a]);typeof r=="string"&&(r=fa(r));let{pathname:u="/",search:c="",hash:h="",state:f=null,key:p="default"}=r,g=L.useMemo(()=>{let _=fs(u,o);return _==null?null:{location:{pathname:_,search:c,hash:h,state:f,key:p},navigationType:i}},[o,u,c,h,f,p,i]);return Xn(g!=null,`<Router basename="${o}"> is not able to match the URL "${u}${c}${h}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:L.createElement(Ar.Provider,{value:l},L.createElement(Gu.Provider,{children:e,value:g}))}function _2({children:t,location:e}){return s2(Ag(t),e)}function Ag(t,e=[]){let r=[];return L.Children.forEach(t,(i,s)=>{if(!L.isValidElement(i))return;let a=[...e,s];if(i.type===L.Fragment){r.push.apply(r,Ag(i.props.children,a));return}mt(i.type===Mr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Ag(i.props.children,a)),r.push(o)}),r}var Pd="get",Rd="application/x-www-form-urlencoded";function gf(t){return t!=null&&typeof t.tagName=="string"}function w2(t){return gf(t)&&t.tagName.toLowerCase()==="button"}function b2(t){return gf(t)&&t.tagName.toLowerCase()==="form"}function x2(t){return gf(t)&&t.tagName.toLowerCase()==="input"}function E2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function T2(t,e){return t.button===0&&(!e||e==="_self")&&!E2(t)}function Pg(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let i=t[r];return e.concat(Array.isArray(i)?i.map(s=>[r,s]):[[r,i]])},[]))}function S2(t,e){let r=Pg(t);return e&&e.forEach((i,s)=>{r.has(s)||e.getAll(s).forEach(a=>{r.append(s,a)})}),r}var td=null;function I2(){if(td===null)try{new FormData(document.createElement("form"),0),td=!1}catch{td=!0}return td}var k2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Gp(t){return t!=null&&!k2.has(t)?(Xn(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Rd}"`),null):t}function C2(t,e){let r,i,s,a,o;if(b2(t)){let l=t.getAttribute("action");i=l?fs(l,e):null,r=t.getAttribute("method")||Pd,s=Gp(t.getAttribute("enctype"))||Rd,a=new FormData(t)}else if(w2(t)||x2(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||l.getAttribute("action");if(i=u?fs(u,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||Pd,s=Gp(t.getAttribute("formenctype"))||Gp(l.getAttribute("enctype"))||Rd,a=new FormData(l,t),!I2()){let{name:c,type:h,value:f}=t;if(h==="image"){let p=c?`${c}.`:"";a.append(`${p}x`,"0"),a.append(`${p}y`,"0")}else c&&a.append(c,f)}}else{if(gf(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Pd,i=null,s=Rd,o=t}return a&&s==="text/plain"&&(o=a,a=void 0),{action:i,method:r.toLowerCase(),encType:s,formData:a,body:o}}function ky(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function A2(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function P2(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function R2(t,e,r){let i=await Promise.all(t.map(async s=>{let a=e.routes[s.route.id];if(a){let o=await A2(a,r);return o.links?o.links():[]}return[]}));return L2(i.flat(1).filter(P2).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Gw(t,e,r,i,s,a){let o=(u,c)=>r[c]?u.route.id!==r[c].route.id:!0,l=(u,c)=>{var h;return r[c].pathname!==u.pathname||((h=r[c].route.path)==null?void 0:h.endsWith("*"))&&r[c].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,c)=>o(u,c)||l(u,c)):a==="data"?e.filter((u,c)=>{var f;let h=i.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,c)||l(u,c))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function D2(t,e){return N2(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function N2(t){return[...new Set(t)]}function M2(t){let e={},r=Object.keys(t).sort();for(let i of r)e[i]=t[i];return e}function L2(t,e){let r=new Set;return new Set(e),t.reduce((i,s)=>{let a=JSON.stringify(M2(s));return r.has(a)||(r.add(a),i.push({key:a,link:s})),i},[])}function O2(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function j2(){let t=L.useContext(jo);return ky(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function V2(){let t=L.useContext(mf);return ky(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Cy=L.createContext(void 0);Cy.displayName="FrameworkContext";function MI(){let t=L.useContext(Cy);return ky(t,"You must render this element inside a <HydratedRouter> element"),t}function F2(t,e){let r=L.useContext(Cy),[i,s]=L.useState(!1),[a,o]=L.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:c,onMouseLeave:h,onTouchStart:f}=e,p=L.useRef(null);L.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let A=E=>{E.forEach(b=>{o(b.isIntersecting)})},R=new IntersectionObserver(A,{threshold:.5});return p.current&&R.observe(p.current),()=>{R.disconnect()}}},[t]),L.useEffect(()=>{if(i){let A=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(A)}}},[i]);let g=()=>{s(!0)},_=()=>{s(!1),o(!1)};return r?t!=="intent"?[a,p,{}]:[a,p,{onFocus:wl(l,g),onBlur:wl(u,_),onMouseEnter:wl(c,g),onMouseLeave:wl(h,_),onTouchStart:wl(f,g)}]:[!1,p,{}]}function wl(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function U2({page:t,...e}){let{router:r}=j2(),i=L.useMemo(()=>TI(r.routes,t,r.basename),[r.routes,t,r.basename]);return i?L.createElement($2,{page:t,matches:i,...e}):null}function B2(t){let{manifest:e,routeModules:r}=MI(),[i,s]=L.useState([]);return L.useEffect(()=>{let a=!1;return R2(t,e,r).then(o=>{a||s(o)}),()=>{a=!0}},[t,e,r]),i}function $2({page:t,matches:e,...r}){let i=fr(),{manifest:s,routeModules:a}=MI(),{loaderData:o,matches:l}=V2(),u=L.useMemo(()=>Gw(t,e,l,s,i,"data"),[t,e,l,s,i]),c=L.useMemo(()=>Gw(t,e,l,s,i,"assets"),[t,e,l,s,i]),h=L.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let g=new Set,_=!1;if(e.forEach(R=>{var b;let E=s.routes[R.route.id];!E||!E.hasLoader||(!u.some(T=>T.route.id===R.route.id)&&R.route.id in o&&((b=a[R.route.id])!=null&&b.shouldRevalidate)||E.hasClientLoader?_=!0:g.add(R.route.id))}),g.size===0)return[];let A=O2(t);return _&&g.size>0&&A.searchParams.set("_routes",e.filter(R=>g.has(R.route.id)).map(R=>R.route.id).join(",")),[A.pathname+A.search]},[o,i,s,u,e,t,a]),f=L.useMemo(()=>D2(c,s),[c,s]),p=B2(c);return L.createElement(L.Fragment,null,h.map(g=>L.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...r})),f.map(g=>L.createElement("link",{key:g,rel:"modulepreload",href:g,...r})),p.map(({key:g,link:_})=>L.createElement("link",{key:g,..._})))}function z2(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var LI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{LI&&(window.__reactRouterVersion="7.1.5")}catch{}function H2({basename:t,children:e,window:r}){let i=L.useRef();i.current==null&&(i.current=RN({window:r,v5Compat:!0}));let s=i.current,[a,o]=L.useState({action:s.action,location:s.location}),l=L.useCallback(u=>{L.startTransition(()=>o(u))},[o]);return L.useLayoutEffect(()=>s.listen(l),[s,l]),L.createElement(y2,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:s})}var OI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ws=L.forwardRef(function({onClick:e,discover:r="render",prefetch:i="none",relative:s,reloadDocument:a,replace:o,state:l,target:u,to:c,preventScrollReset:h,viewTransition:f,...p},g){let{basename:_}=L.useContext(Ar),A=typeof c=="string"&&OI.test(c),R,E=!1;if(typeof c=="string"&&A&&(R=c,LI))try{let y=new URL(window.location.href),w=c.startsWith("//")?new URL(y.protocol+c):new URL(c),S=fs(w.pathname,_);w.origin===y.origin&&S!=null?c=S+w.search+w.hash:E=!0}catch{Xn(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=r2(c,{relative:s}),[T,D,U]=F2(i,p),j=K2(c,{replace:o,state:l,target:u,preventScrollReset:h,relative:s,viewTransition:f});function P(y){e&&e(y),y.defaultPrevented||j(y)}let I=L.createElement("a",{...p,...U,href:R||b,onClick:E||a?e:P,ref:z2(g,D),target:u,"data-discover":!A&&r==="render"?"true":void 0});return T&&!A?L.createElement(L.Fragment,null,I,L.createElement(U2,{page:b})):I});Ws.displayName="Link";var W2=L.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:i="",end:s=!1,style:a,to:o,viewTransition:l,children:u,...c},h){let f=Ku(o,{relative:c.relative}),p=fr(),g=L.useContext(mf),{navigator:_,basename:A}=L.useContext(Ar),R=g!=null&&Z2(f)&&l===!0,E=_.encodeLocation?_.encodeLocation(f).pathname:f.pathname,b=p.pathname,T=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;r||(b=b.toLowerCase(),T=T?T.toLowerCase():null,E=E.toLowerCase()),T&&A&&(T=fs(T,A)||T);const D=E!=="/"&&E.endsWith("/")?E.length-1:E.length;let U=b===E||!s&&b.startsWith(E)&&b.charAt(D)==="/",j=T!=null&&(T===E||!s&&T.startsWith(E)&&T.charAt(E.length)==="/"),P={isActive:U,isPending:j,isTransitioning:R},I=U?e:void 0,y;typeof i=="function"?y=i(P):y=[i,U?"active":null,j?"pending":null,R?"transitioning":null].filter(Boolean).join(" ");let w=typeof a=="function"?a(P):a;return L.createElement(Ws,{...c,"aria-current":I,className:y,ref:h,style:w,to:o,viewTransition:l},typeof u=="function"?u(P):u)});W2.displayName="NavLink";var q2=L.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:i,replace:s,state:a,method:o=Pd,action:l,onSubmit:u,relative:c,preventScrollReset:h,viewTransition:f,...p},g)=>{let _=Q2(),A=J2(l,{relative:c}),R=o.toLowerCase()==="get"?"get":"post",E=typeof l=="string"&&OI.test(l),b=T=>{if(u&&u(T),T.defaultPrevented)return;T.preventDefault();let D=T.nativeEvent.submitter,U=(D==null?void 0:D.getAttribute("formmethod"))||o;_(D||T.currentTarget,{fetcherKey:e,method:U,navigate:r,replace:s,state:a,relative:c,preventScrollReset:h,viewTransition:f})};return L.createElement("form",{ref:g,method:R,action:A,onSubmit:i?u:b,...p,"data-discover":!E&&t==="render"?"true":void 0})});q2.displayName="Form";function G2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function jI(t){let e=L.useContext(jo);return mt(e,G2(t)),e}function K2(t,{target:e,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}={}){let l=Qr(),u=fr(),c=Ku(t,{relative:a});return L.useCallback(h=>{if(T2(h,e)){h.preventDefault();let f=r!==void 0?r:Tu(u)===Tu(c);l(t,{replace:f,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[u,l,c,r,i,e,t,s,a,o])}function Ay(t){Xn(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=L.useRef(Pg(t)),r=L.useRef(!1),i=fr(),s=L.useMemo(()=>S2(i.search,r.current?null:e.current),[i.search]),a=Qr(),o=L.useCallback((l,u)=>{const c=Pg(typeof l=="function"?l(s):l);r.current=!0,a("?"+c,u)},[a,s]);return[s,o]}var Y2=0,X2=()=>`__${String(++Y2)}__`;function Q2(){let{router:t}=jI("useSubmit"),{basename:e}=L.useContext(Ar),r=p2();return L.useCallback(async(i,s={})=>{let{action:a,method:o,encType:l,formData:u,body:c}=C2(i,e);if(s.navigate===!1){let h=s.fetcherKey||X2();await t.fetch(h,r,s.action||a,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await t.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:u,body:c,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function J2(t,{relative:e}={}){let{basename:r}=L.useContext(Ar),i=L.useContext(Xr);mt(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a={...Ku(t||".",{relative:e})},o=fr();if(t==null){a.search=o.search;let l=new URLSearchParams(a.search),u=l.getAll("index");if(u.some(h=>h==="")){l.delete("index"),u.filter(f=>f).forEach(f=>l.append("index",f));let h=l.toString();a.search=h?`?${h}`:""}}return(!t||t===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:hi([r,a.pathname])),Tu(a)}function Z2(t,e={}){let r=L.useContext(CI);mt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=jI("useViewTransitionState"),s=Ku(t,{relative:e.relative});if(!r.isTransitioning)return!1;let a=fs(r.currentLocation.pathname,i)||r.currentLocation.pathname,o=fs(r.nextLocation.pathname,i)||r.nextLocation.pathname;return gh(s.pathname,o)!=null||gh(s.pathname,a)!=null}new TextEncoder;var Kw={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI=function(t){const e=[];let r=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},eM=function(t){const e=[];let r=0,i=0;for(;r<t.length;){const s=t[r++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[r++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[r++],o=t[r++],l=t[r++],u=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const a=t[r++],o=t[r++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},FI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,h=a>>2,f=(a&3)<<4|l>>4;let p=(l&15)<<2|c>>6,g=c&63;u||(g=64,o||(p=64)),i.push(r[h],r[f],r[p],r[g])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(VI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eM(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const a=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const c=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,a==null||l==null||c==null||f==null)throw new tM;const p=a<<2|l>>4;if(i.push(p),c!==64){const g=l<<4&240|c>>2;if(i.push(g),f!==64){const _=c<<6&192|f;i.push(_)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tM extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nM=function(t){const e=VI(t);return FI.encodeByteArray(e,!0)},vh=function(t){return nM(t).replace(/\./g,"")},UI=function(t){try{return FI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM=()=>rM().__FIREBASE_DEFAULTS__,sM=()=>{if(typeof process>"u"||typeof Kw>"u")return;const t=Kw.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},aM=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&UI(t[1]);return e&&JSON.parse(e)},vf=()=>{try{return iM()||sM()||aM()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},BI=t=>{var e,r;return(r=(e=vf())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},oM=t=>{const e=BI(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),i]:[e.substring(0,r),i]},$I=()=>{var t;return(t=vf())===null||t===void 0?void 0:t.config},zI=t=>{var e;return(e=vf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lM{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,i)=>{r?this.reject(r):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uM(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[vh(JSON.stringify(r)),vh(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cM(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gn())}function dM(){var t;const e=(t=vf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function pM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function mM(){const t=gn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gM(){return!dM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function vM(){try{return typeof indexedDB=="object"}catch{return!1}}function yM(){return new Promise((t,e)=>{try{let r=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _M="FirebaseError";class Si extends Error{constructor(e,r,i){super(r),this.code=e,this.customData=i,this.name=_M,Object.setPrototypeOf(this,Si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yu.prototype.create)}}class Yu{constructor(e,r,i){this.service=e,this.serviceName=r,this.errors=i}create(e,...r){const i=r[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?wM(a,i):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Si(s,l,i)}}function wM(t,e){return t.replace(bM,(r,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const bM=/\{\$([^}]+)}/g;function xM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function yh(t,e){if(t===e)return!0;const r=Object.keys(t),i=Object.keys(e);for(const s of r){if(!i.includes(s))return!1;const a=t[s],o=e[s];if(Yw(a)&&Yw(o)){if(!yh(a,o))return!1}else if(a!==o)return!1}for(const s of i)if(!r.includes(s))return!1;return!0}function Yw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(t){const e=[];for(const[r,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ml(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Ll(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function EM(t,e){const r=new TM(t,e);return r.subscribe.bind(r)}class TM{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,i){let s;if(e===void 0&&r===void 0&&i===void 0)throw new Error("Missing Observer.");SM(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:i},s.next===void 0&&(s.next=Kp),s.error===void 0&&(s.error=Kp),s.complete===void 0&&(s.complete=Kp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SM(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Kp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(t){return t&&t._delegate?t._delegate:t}class ia{constructor(e,r,i){this.name=e,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IM=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const i=new lM;if(this.instancesDeferred.set(r,i),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CM(e))try{this.getOrInitializeService({instanceIdentifier:$s})}catch{}for(const[r,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=$s){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=$s){return this.instances.has(e)}getOptions(e=$s){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:r});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);i===l&&o.resolve(s)}return s}onInit(e,r){var i;const s=this.normalizeInstanceIdentifier(r),a=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&e(o,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const i=this.onInitCallbacks.get(r);if(i)for(const s of i)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:kM(e),options:r}),this.instances.set(e,i),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=$s){return this.component?this.component.multipleInstances?e:$s:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function kM(t){return t===$s?void 0:t}function CM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new IM(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Oe||(Oe={}));const PM={debug:Oe.DEBUG,verbose:Oe.VERBOSE,info:Oe.INFO,warn:Oe.WARN,error:Oe.ERROR,silent:Oe.SILENT},RM=Oe.INFO,DM={[Oe.DEBUG]:"log",[Oe.VERBOSE]:"log",[Oe.INFO]:"info",[Oe.WARN]:"warn",[Oe.ERROR]:"error"},NM=(t,e,...r)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=DM[e];if(s)console[s](`[${i}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Py{constructor(e){this.name=e,this._logLevel=RM,this._logHandler=NM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Oe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Oe.DEBUG,...e),this._logHandler(this,Oe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Oe.VERBOSE,...e),this._logHandler(this,Oe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Oe.INFO,...e),this._logHandler(this,Oe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Oe.WARN,...e),this._logHandler(this,Oe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Oe.ERROR,...e),this._logHandler(this,Oe.ERROR,...e)}}const MM=(t,e)=>e.some(r=>t instanceof r);let Xw,Qw;function LM(){return Xw||(Xw=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OM(){return Qw||(Qw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HI=new WeakMap,Rg=new WeakMap,WI=new WeakMap,Yp=new WeakMap,Ry=new WeakMap;function jM(t){const e=new Promise((r,i)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(ns(t.result)),s()},o=()=>{i(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&HI.set(r,t)}).catch(()=>{}),Ry.set(e,t),e}function VM(t){if(Rg.has(t))return;const e=new Promise((r,i)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),s()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});Rg.set(t,e)}let Dg={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Rg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||WI.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ns(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function FM(t){Dg=t(Dg)}function UM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const i=t.call(Xp(this),e,...r);return WI.set(i,e.sort?e.sort():[e]),ns(i)}:OM().includes(t)?function(...e){return t.apply(Xp(this),e),ns(HI.get(this))}:function(...e){return ns(t.apply(Xp(this),e))}}function BM(t){return typeof t=="function"?UM(t):(t instanceof IDBTransaction&&VM(t),MM(t,LM())?new Proxy(t,Dg):t)}function ns(t){if(t instanceof IDBRequest)return jM(t);if(Yp.has(t))return Yp.get(t);const e=BM(t);return e!==t&&(Yp.set(t,e),Ry.set(e,t)),e}const Xp=t=>Ry.get(t);function $M(t,e,{blocked:r,upgrade:i,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=ns(o);return i&&o.addEventListener("upgradeneeded",u=>{i(ns(o.result),u.oldVersion,u.newVersion,ns(o.transaction),u)}),r&&o.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{a&&u.addEventListener("close",()=>a()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const zM=["get","getKey","getAll","getAllKeys","count"],HM=["put","add","delete","clear"],Qp=new Map;function Jw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qp.get(e))return Qp.get(e);const r=e.replace(/FromIndex$/,""),i=e!==r,s=HM.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(s||zM.includes(r)))return;const a=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return i&&(c=c.index(l.shift())),(await Promise.all([c[r](...l),s&&u.done]))[0]};return Qp.set(e,a),a}FM(t=>({...t,get:(e,r,i)=>Jw(e,r)||t.get(e,r,i),has:(e,r)=>!!Jw(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(qM(r)){const i=r.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(r=>r).join(" ")}}function qM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ng="@firebase/app",Zw="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi=new Py("@firebase/app"),GM="@firebase/app-compat",KM="@firebase/analytics-compat",YM="@firebase/analytics",XM="@firebase/app-check-compat",QM="@firebase/app-check",JM="@firebase/auth",ZM="@firebase/auth-compat",eL="@firebase/database",tL="@firebase/data-connect",nL="@firebase/database-compat",rL="@firebase/functions",iL="@firebase/functions-compat",sL="@firebase/installations",aL="@firebase/installations-compat",oL="@firebase/messaging",lL="@firebase/messaging-compat",uL="@firebase/performance",cL="@firebase/performance-compat",dL="@firebase/remote-config",hL="@firebase/remote-config-compat",fL="@firebase/storage",pL="@firebase/storage-compat",mL="@firebase/firestore",gL="@firebase/vertexai",vL="@firebase/firestore-compat",yL="firebase",_L="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg="[DEFAULT]",wL={[Ng]:"fire-core",[GM]:"fire-core-compat",[YM]:"fire-analytics",[KM]:"fire-analytics-compat",[QM]:"fire-app-check",[XM]:"fire-app-check-compat",[JM]:"fire-auth",[ZM]:"fire-auth-compat",[eL]:"fire-rtdb",[tL]:"fire-data-connect",[nL]:"fire-rtdb-compat",[rL]:"fire-fn",[iL]:"fire-fn-compat",[sL]:"fire-iid",[aL]:"fire-iid-compat",[oL]:"fire-fcm",[lL]:"fire-fcm-compat",[uL]:"fire-perf",[cL]:"fire-perf-compat",[dL]:"fire-rc",[hL]:"fire-rc-compat",[fL]:"fire-gcs",[pL]:"fire-gcs-compat",[mL]:"fire-fst",[vL]:"fire-fst-compat",[gL]:"fire-vertex","fire-js":"fire-js",[yL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h=new Map,bL=new Map,Lg=new Map;function eb(t,e){try{t.container.addComponent(e)}catch(r){yi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function go(t){const e=t.name;if(Lg.has(e))return yi.debug(`There were multiple attempts to register component ${e}.`),!1;Lg.set(e,t);for(const r of _h.values())eb(r,t);for(const r of bL.values())eb(r,t);return!0}function Dy(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Er(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},rs=new Yu("app","Firebase",xL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EL{constructor(e,r,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ia("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw rs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fo=_L;function qI(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Mg,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw rs.create("bad-app-name",{appName:String(s)});if(r||(r=$I()),!r)throw rs.create("no-options");const a=_h.get(s);if(a){if(yh(r,a.options)&&yh(i,a.config))return a;throw rs.create("duplicate-app",{appName:s})}const o=new AM(s);for(const u of Lg.values())o.addComponent(u);const l=new EL(r,i,o);return _h.set(s,l),l}function GI(t=Mg){const e=_h.get(t);if(!e&&t===Mg&&$I())return qI();if(!e)throw rs.create("no-app",{appName:t});return e}function is(t,e,r){var i;let s=(i=wL[t])!==null&&i!==void 0?i:t;r&&(s+=`-${r}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${s}" with version "${e}":`];a&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),yi.warn(l.join(" "));return}go(new ia(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL="firebase-heartbeat-database",SL=1,Su="firebase-heartbeat-store";let Jp=null;function KI(){return Jp||(Jp=$M(TL,SL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Su)}catch(r){console.warn(r)}}}}).catch(t=>{throw rs.create("idb-open",{originalErrorMessage:t.message})})),Jp}async function IL(t){try{const r=(await KI()).transaction(Su),i=await r.objectStore(Su).get(YI(t));return await r.done,i}catch(e){if(e instanceof Si)yi.warn(e.message);else{const r=rs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});yi.warn(r.message)}}}async function tb(t,e){try{const i=(await KI()).transaction(Su,"readwrite");await i.objectStore(Su).put(e,YI(t)),await i.done}catch(r){if(r instanceof Si)yi.warn(r.message);else{const i=rs.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});yi.warn(i.message)}}}function YI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL=1024,CL=30;class AL{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new RL(r),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=nb();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>CL){const o=DL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){yi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=nb(),{heartbeatsToSend:i,unsentEntries:s}=PL(this._heartbeatsCache.heartbeats),a=vh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return yi.warn(r),""}}}function nb(){return new Date().toISOString().substring(0,10)}function PL(t,e=kL){const r=[];let i=t.slice();for(const s of t){const a=r.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),rb(r)>e){a.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),rb(r)>e){r.pop();break}i=i.slice(1)}return{heartbeatsToSend:r,unsentEntries:i}}class RL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return vM()?yM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await IL(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return tb(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return tb(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function rb(t){return vh(JSON.stringify({version:2,heartbeats:t})).length}function DL(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let i=1;i<t.length;i++)t[i].date<r&&(r=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NL(t){go(new ia("platform-logger",e=>new WM(e),"PRIVATE")),go(new ia("heartbeat",e=>new AL(e),"PRIVATE")),is(Ng,Zw,t),is(Ng,Zw,"esm2017"),is("fire-js","")}NL("");function Ny(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r}function XI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ML=XI,QI=new Yu("auth","Firebase",XI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh=new Py("@firebase/auth");function LL(t,...e){wh.logLevel<=Oe.WARN&&wh.warn(`Auth (${Fo}): ${t}`,...e)}function Dd(t,...e){wh.logLevel<=Oe.ERROR&&wh.error(`Auth (${Fo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(t,...e){throw My(t,...e)}function Br(t,...e){return My(t,...e)}function JI(t,e,r){const i=Object.assign(Object.assign({},ML()),{[e]:r});return new Yu("auth","Firebase",i).create(e,{appName:t.name})}function ss(t){return JI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function My(t,...e){if(typeof t!="string"){const r=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(r,...i)}return QI.create(t,...e)}function Ee(t,e,...r){if(!t)throw My(e,...r)}function li(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Dd(e),new Error(e)}function _i(t,e){t||li(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function OL(){return ib()==="http:"||ib()==="https:"}function ib(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OL()||fM()||"connection"in navigator)?navigator.onLine:!0}function VL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,r){this.shortDelay=e,this.longDelay=r,_i(r>e,"Short delay should be less than long delay!"),this.isMobile=cM()||pM()}get(){return jL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(t,e){_i(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{static initialize(e,r,i){this.fetchImpl=e,r&&(this.headersImpl=r),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;li("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;li("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;li("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UL=new Qu(3e4,6e4);function pa(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ts(t,e,r,i,s={}){return e1(t,s,async()=>{let a={},o={};i&&(e==="GET"?o=i:a={body:JSON.stringify(i)});const l=Xu(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},a);return hM()||(c.referrerPolicy="no-referrer"),ZI.fetch()(t1(t,t.config.apiHost,r,l),c)})}async function e1(t,e,r){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},FL),e);try{const s=new $L(t),a=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw nd(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw nd(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw nd(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw nd(t,"user-disabled",o);const h=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw JI(t,h,c);Cr(t,h)}}catch(s){if(s instanceof Si)throw s;Cr(t,"network-request-failed",{message:String(s)})}}async function yf(t,e,r,i,s={}){const a=await Ts(t,e,r,i,s);return"mfaPendingCredential"in a&&Cr(t,"multi-factor-auth-required",{_serverResponse:a}),a}function t1(t,e,r,i){const s=`${e}${r}?${i}`;return t.config.emulator?Ly(t.config,s):`${t.config.apiScheme}://${s}`}function BL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class $L{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,i)=>{this.timer=setTimeout(()=>i(Br(this.auth,"network-request-failed")),UL.get())})}}function nd(t,e,r){const i={appName:t.name};r.email&&(i.email=r.email),r.phoneNumber&&(i.phoneNumber=r.phoneNumber);const s=Br(t,e,i);return s.customData._tokenResponse=r,s}function sb(t){return t!==void 0&&t.enterprise!==void 0}class zL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return BL(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function HL(t,e){return Ts(t,"GET","/v2/recaptchaConfig",pa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WL(t,e){return Ts(t,"POST","/v1/accounts:delete",e)}async function n1(t,e){return Ts(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qL(t,e=!1){const r=tn(t),i=await r.getIdToken(e),s=Oy(i);Ee(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:Ql(Zp(s.auth_time)),issuedAtTime:Ql(Zp(s.iat)),expirationTime:Ql(Zp(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Zp(t){return Number(t)*1e3}function Oy(t){const[e,r,i]=t.split(".");if(e===void 0||r===void 0||i===void 0)return Dd("JWT malformed, contained fewer than 3 sections"),null;try{const s=UI(r);return s?JSON.parse(s):(Dd("Failed to decode base64 JWT payload"),null)}catch(s){return Dd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function ab(t){const e=Oy(t);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iu(t,e,r=!1){if(r)return e;try{return await e}catch(i){throw i instanceof Si&&GL(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function GL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ql(this.lastLoginAt),this.creationTime=Ql(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bh(t){var e;const r=t.auth,i=await t.getIdToken(),s=await Iu(t,n1(r,{idToken:i}));Ee(s==null?void 0:s.users.length,r,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?r1(a.providerUserInfo):[],l=XL(t.providerData,o),u=t.isAnonymous,c=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),h=u?c:!1,f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new jg(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function YL(t){const e=tn(t);await bh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XL(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function r1(t){return t.map(e=>{var{providerId:r}=e,i=Ny(e,["providerId"]);return{providerId:r,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QL(t,e){const r=await e1(t,{},async()=>{const i=Xu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=t1(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",ZI.fetch()(o,{method:"POST",headers:l,body:i})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function JL(t,e){return Ts(t,"POST","/v2/accounts:revokeToken",pa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ab(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const r=ab(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:i,refreshToken:s,expiresIn:a}=await QL(e,r);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,r,i){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,r){const{refreshToken:i,accessToken:s,expirationTime:a}=r,o=new ro;return i&&(Ee(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),s&&(Ee(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(Ee(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ro,this.toJSON())}_performRefresh(){return li("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(t,e){Ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ui{constructor(e){var{uid:r,auth:i,stsTokenManager:s}=e,a=Ny(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new jg(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await Iu(this,this.stsTokenManager.getToken(this.auth,e));return Ee(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return qL(this,e)}reload(){return YL(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new ui(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),r&&await bh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Er(this.auth.app))return Promise.reject(ss(this.auth));const e=await this.getIdToken();return await Iu(this,WL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var i,s,a,o,l,u,c,h;const f=(i=r.displayName)!==null&&i!==void 0?i:void 0,p=(s=r.email)!==null&&s!==void 0?s:void 0,g=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,_=(o=r.photoURL)!==null&&o!==void 0?o:void 0,A=(l=r.tenantId)!==null&&l!==void 0?l:void 0,R=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,E=(c=r.createdAt)!==null&&c!==void 0?c:void 0,b=(h=r.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:T,emailVerified:D,isAnonymous:U,providerData:j,stsTokenManager:P}=r;Ee(T&&P,e,"internal-error");const I=ro.fromJSON(this.name,P);Ee(typeof T=="string",e,"internal-error"),Mi(f,e.name),Mi(p,e.name),Ee(typeof D=="boolean",e,"internal-error"),Ee(typeof U=="boolean",e,"internal-error"),Mi(g,e.name),Mi(_,e.name),Mi(A,e.name),Mi(R,e.name),Mi(E,e.name),Mi(b,e.name);const y=new ui({uid:T,auth:e,email:p,emailVerified:D,displayName:f,isAnonymous:U,photoURL:_,phoneNumber:g,tenantId:A,stsTokenManager:I,createdAt:E,lastLoginAt:b});return j&&Array.isArray(j)&&(y.providerData=j.map(w=>Object.assign({},w))),R&&(y._redirectEventId=R),y}static async _fromIdTokenResponse(e,r,i=!1){const s=new ro;s.updateFromServerResponse(r);const a=new ui({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await bh(a),a}static async _fromGetAccountInfoResponse(e,r,i){const s=r.users[0];Ee(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?r1(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new ro;l.updateFromIdToken(i);const u=new ui({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new jg(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob=new Map;function ci(t){_i(t instanceof Function,"Expected a class definition");let e=ob.get(t);return e?(_i(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ob.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}i1.type="NONE";const lb=i1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nd(t,e,r){return`firebase:${t}:${e}:${r}`}class io{constructor(e,r,i){this.persistence=e,this.auth=r,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=Nd(this.userKey,s.apiKey,a),this.fullPersistenceKey=Nd("persistence",s.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ui._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,i="authUser"){if(!r.length)return new io(ci(lb),e,i);const s=(await Promise.all(r.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let a=s[0]||ci(lb);const o=Nd(i,e.config.apiKey,e.name);let l=null;for(const c of r)try{const h=await c._get(o);if(h){const f=ui._fromJSON(e,h);c!==a&&(l=f),a=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new io(a,e,i):(a=u[0],l&&await a._set(o,l.toJSON()),await Promise.all(r.map(async c=>{if(c!==a)try{await c._remove(o)}catch{}})),new io(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ub(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(l1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(s1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(c1(e))return"Blackberry";if(d1(e))return"Webos";if(a1(e))return"Safari";if((e.includes("chrome/")||o1(e))&&!e.includes("edge/"))return"Chrome";if(u1(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(r);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function s1(t=gn()){return/firefox\//i.test(t)}function a1(t=gn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function o1(t=gn()){return/crios\//i.test(t)}function l1(t=gn()){return/iemobile/i.test(t)}function u1(t=gn()){return/android/i.test(t)}function c1(t=gn()){return/blackberry/i.test(t)}function d1(t=gn()){return/webos/i.test(t)}function jy(t=gn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function ZL(t=gn()){var e;return jy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function eO(){return mM()&&document.documentMode===10}function h1(t=gn()){return jy(t)||u1(t)||d1(t)||c1(t)||/windows phone/i.test(t)||l1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f1(t,e=[]){let r;switch(t){case"Browser":r=ub(gn());break;case"Worker":r=`${ub(gn())}-${t}`;break;default:r=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Fo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const i=a=>new Promise((o,l)=>{try{const u=e(a);o(u)}catch(u){l(u)}});i.onAbort=r,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const i of this.queue)await i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nO(t,e={}){return Ts(t,"GET","/v2/passwordPolicy",pa(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=6;class iO{constructor(e){var r,i,s,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:rO,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,i,s,a,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,r){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(r.meetsMinPasswordLength=e.length>=i),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,r,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sO{constructor(e,r,i,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cb(this),this.idTokenSubscription=new cb(this),this.beforeStateQueue=new tO(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=ci(r)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await io.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await n1(this,{idToken:e}),i=await ui._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Er(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await bh(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=VL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Er(this.app))return Promise.reject(ss(this));const r=e?tn(e):null;return r&&Ee(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Er(this.app)?Promise.reject(ss(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Er(this.app)?Promise.reject(ss(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ci(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nO(this),r=new iO(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Yu("auth","Firebase",e())}onAuthStateChanged(e,r,i){return this.registerStateListener(this.authStateSubscription,e,r,i)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,i){return this.registerStateListener(this.idTokenSubscription,e,r,i)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(i.tenantId=this.tenantId),await JL(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const i=await this.getOrInitRedirectPersistenceManager(r);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&ci(e)||this._popupRedirectResolver;Ee(r,this,"argument-error"),this.redirectPersistenceManager=await io.create(this,[ci(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,i;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,i,s){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,i,s);return()=>{o=!0,u()}}else{const u=e.addObserver(r);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=f1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(r["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;if(Er(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&LL(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Uo(t){return tn(t)}class cb{constructor(e){this.auth=e,this.observer=null,this.addObserver=EM(r=>this.observer=r)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _f={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aO(t){_f=t}function p1(t){return _f.loadJS(t)}function oO(){return _f.recaptchaEnterpriseScript}function lO(){return _f.gapiScript}function uO(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class cO{constructor(){this.enterprise=new dO}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class dO{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const hO="recaptcha-enterprise",m1="NO_RECAPTCHA";class fO{constructor(e){this.type=hO,this.auth=Uo(e)}async verify(e="verify",r=!1){async function i(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{HL(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new zL(u);return a.tenantId==null?a._agentRecaptchaConfig=c:a._tenantRecaptchaConfigs[a.tenantId]=c,o(c.siteKey)}}).catch(u=>{l(u)})})}function s(a,o,l){const u=window.grecaptcha;sb(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(c=>{o(c)}).catch(()=>{o(m1)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new cO().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{i(this.auth).then(l=>{if(!r&&sb(window.grecaptcha))s(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=oO();u.length!==0&&(u+=l),p1(u).then(()=>{s(l,a,o)}).catch(c=>{o(c)})}}).catch(l=>{o(l)})})}}async function db(t,e,r,i=!1,s=!1){const a=new fO(t);let o;if(s)o=m1;else try{o=await a.verify(r)}catch{o=await a.verify(r,!0)}const l=Object.assign({},e);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,c=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function hb(t,e,r,i,s){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await db(t,e,r,r==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await db(t,e,r,r==="getOobCode");return i(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(t,e){const r=Dy(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),a=r.getOptions();if(yh(a,e??{}))return s;Cr(s,"already-initialized")}return r.initialize({options:e})}function mO(t,e){const r=(e==null?void 0:e.persistence)||[],i=(Array.isArray(r)?r:[r]).map(ci);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function gO(t,e,r){const i=Uo(t);Ee(i._canInitEmulator,i,"emulator-config-failed"),Ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=g1(e),{host:o,port:l}=vO(e),u=l===null?"":`:${l}`;i.config.emulator={url:`${a}//${o}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),yO()}function g1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function vO(t){const e=g1(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const i=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:fb(i.substr(a.length+1))}}else{const[a,o]=i.split(":");return{host:a,port:fb(o)}}}function fb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function yO(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return li("not implemented")}_getIdTokenResponse(e){return li("not implemented")}_linkToIdToken(e,r){return li("not implemented")}_getReauthenticationResolver(e){return li("not implemented")}}async function _O(t,e){return Ts(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wO(t,e){return yf(t,"POST","/v1/accounts:signInWithPassword",pa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bO(t,e){return yf(t,"POST","/v1/accounts:signInWithEmailLink",pa(t,e))}async function xO(t,e){return yf(t,"POST","/v1/accounts:signInWithEmailLink",pa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku extends Vy{constructor(e,r,i,s=null){super("password",i),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new ku(e,r,"password")}static _fromEmailAndCode(e,r,i=null){return new ku(e,r,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hb(e,r,"signInWithPassword",wO);case"emailLink":return bO(e,{email:this._email,oobCode:this._password});default:Cr(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const i={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return hb(e,i,"signUpPassword",_O);case"emailLink":return xO(e,{idToken:r,email:this._email,oobCode:this._password});default:Cr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function so(t,e){return yf(t,"POST","/v1/accounts:signInWithIdp",pa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO="http://localhost";class sa extends Vy{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new sa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Cr("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=r,a=Ny(r,["providerId","signInMethod"]);if(!i||!s)return null;const o=new sa(i,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return so(e,r)}_linkToIdToken(e,r){const i=this.buildRequest();return i.idToken=r,so(e,i)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,so(e,r)}buildRequest(){const e={requestUri:EO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Xu(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function SO(t){const e=Ml(Ll(t)).link,r=e?Ml(Ll(e)).deep_link_id:null,i=Ml(Ll(t)).deep_link_id;return(i?Ml(Ll(i)).link:null)||i||r||e||t}class Fy{constructor(e){var r,i,s,a,o,l;const u=Ml(Ll(e)),c=(r=u.apiKey)!==null&&r!==void 0?r:null,h=(i=u.oobCode)!==null&&i!==void 0?i:null,f=TO((s=u.mode)!==null&&s!==void 0?s:null);Ee(c&&h&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=h,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=SO(e);try{return new Fy(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.providerId=Bo.PROVIDER_ID}static credential(e,r){return ku._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const i=Fy.parseLink(r);return Ee(i,"argument-error"),ku._fromEmailAndCode(e,i.code,i.tenantId)}}Bo.PROVIDER_ID="password";Bo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Bo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends v1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends Ju{constructor(){super("facebook.com")}static credential(e){return sa._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bi.credential(e.oauthAccessToken)}catch{return null}}}Bi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends Ju{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return sa._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:i}=e;if(!r&&!i)return null;try{return $i.credential(r,i)}catch{return null}}}$i.GOOGLE_SIGN_IN_METHOD="google.com";$i.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends Ju{constructor(){super("github.com")}static credential(e){return sa._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return zi.credential(e.oauthAccessToken)}catch{return null}}}zi.GITHUB_SIGN_IN_METHOD="github.com";zi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi extends Ju{constructor(){super("twitter.com")}static credential(e,r){return sa._fromParams({providerId:Hi.PROVIDER_ID,signInMethod:Hi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return Hi.credentialFromTaggedObject(e)}static credentialFromError(e){return Hi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:i}=e;if(!r||!i)return null;try{return Hi.credential(r,i)}catch{return null}}}Hi.TWITTER_SIGN_IN_METHOD="twitter.com";Hi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,i,s=!1){const a=await ui._fromIdTokenResponse(e,i,s),o=pb(i);return new vo({user:a,providerId:o,_tokenResponse:i,operationType:r})}static async _forOperation(e,r,i){await e._updateTokensIfNecessary(i,!0);const s=pb(i);return new vo({user:e,providerId:s,_tokenResponse:i,operationType:r})}}function pb(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh extends Si{constructor(e,r,i,s){var a;super(r.code,r.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,xh.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,r,i,s){return new xh(e,r,i,s)}}function y1(t,e,r,i){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?xh._fromErrorAndOperation(t,a,e,i):a})}async function IO(t,e,r=!1){const i=await Iu(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return vo._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kO(t,e,r=!1){const{auth:i}=t;if(Er(i.app))return Promise.reject(ss(i));const s="reauthenticate";try{const a=await Iu(t,y1(i,s,e,t),r);Ee(a.idToken,i,"internal-error");const o=Oy(a.idToken);Ee(o,i,"internal-error");const{sub:l}=o;return Ee(t.uid===l,i,"user-mismatch"),vo._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Cr(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _1(t,e,r=!1){if(Er(t.app))return Promise.reject(ss(t));const i="signIn",s=await y1(t,i,e),a=await vo._fromIdTokenResponse(t,i,s);return r||await t._updateCurrentUser(a.user),a}async function CO(t,e){return _1(Uo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AO(t){const e=Uo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function PO(t,e,r){return Er(t.app)?Promise.reject(ss(t)):CO(tn(t),Bo.credential(e,r)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&AO(t),i})}function RO(t,e,r,i){return tn(t).onIdTokenChanged(e,r,i)}function DO(t,e,r){return tn(t).beforeAuthStateChanged(e,r)}function NO(t,e,r,i){return tn(t).onAuthStateChanged(e,r,i)}function MO(t){return tn(t).signOut()}const Eh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Eh,"1"),this.storage.removeItem(Eh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=1e3,OO=10;class b1 extends w1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=h1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&e(r,s,i)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const i=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(i);!r&&this.localCache[i]===o||this.notifyListeners(i,o)},a=this.storage.getItem(i);eO()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,OO):s()}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:i}),!0)})},LO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}b1.type="LOCAL";const jO=b1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1 extends w1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}x1.type="SESSION";const E1=x1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const i=new wf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:i,eventType:s,data:a}=r.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(o).map(async c=>c(r.origin,a)),u=await VO(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uy(t="",e=10){let r="";for(let i=0;i<e;i++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,u)=>{const c=Uy("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===c)switch(p.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(p.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:r},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $r(){return window}function UO(t){$r().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(){return typeof $r().WorkerGlobalScope<"u"&&typeof $r().importScripts=="function"}async function BO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function $O(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function zO(){return T1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S1="firebaseLocalStorageDb",HO=1,Th="firebaseLocalStorage",I1="fbase_key";class Zu{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function bf(t,e){return t.transaction([Th],e?"readwrite":"readonly").objectStore(Th)}function WO(){const t=indexedDB.deleteDatabase(S1);return new Zu(t).toPromise()}function Vg(){const t=indexedDB.open(S1,HO);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(Th,{keyPath:I1})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(Th)?e(i):(i.close(),await WO(),e(await Vg()))})})}async function mb(t,e,r){const i=bf(t,!0).put({[I1]:e,value:r});return new Zu(i).toPromise()}async function qO(t,e){const r=bf(t,!1).get(e),i=await new Zu(r).toPromise();return i===void 0?null:i.value}function gb(t,e){const r=bf(t,!0).delete(e);return new Zu(r).toPromise()}const GO=800,KO=3;class k1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Vg(),this.db)}async _withRetries(e){let r=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(r++>KO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return T1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wf._getInstance(zO()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await BO(),!this.activeServiceWorker)return;this.sender=new FO(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||$O()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Vg();return await mb(e,Eh,"1"),await gb(e,Eh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>mb(i,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(i=>qO(i,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>gb(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=bf(s,!1).getAll();return new Zu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),GO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}k1.type="LOCAL";const YO=k1;new Qu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(t,e){return e?ci(e):(Ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class By extends Vy{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return so(e,this._buildIdpRequest())}_linkToIdToken(e,r){return so(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return so(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function QO(t){return _1(t.auth,new By(t),t.bypassAuthState)}function JO(t){const{auth:e,user:r}=t;return Ee(r,e,"internal-error"),kO(r,new By(t),t.bypassAuthState)}async function ZO(t){const{auth:e,user:r}=t;return Ee(r,e,"internal-error"),IO(r,new By(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,r,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:i,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:r,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return QO;case"linkViaPopup":case"linkViaRedirect":return ZO;case"reauthViaPopup":case"reauthViaRedirect":return JO;default:Cr(this.auth,"internal-error")}}resolve(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=new Qu(2e3,1e4);class Xa extends C1{constructor(e,r,i,s,a){super(e,r,s,a),this.provider=i,this.authWindow=null,this.pollId=null,Xa.currentPopupAction&&Xa.currentPopupAction.cancel(),Xa.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){_i(this.filter.length===1,"Popup operations only handle one event");const e=Uy();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xa.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ej.get())};e()}}Xa.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tj="pendingRedirect",Md=new Map;class nj extends C1{constructor(e,r,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,i),this.eventId=null}async execute(){let e=Md.get(this.auth._key());if(!e){try{const i=await rj(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(r){e=()=>Promise.reject(r)}Md.set(this.auth._key(),e)}return this.bypassAuthState||Md.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rj(t,e){const r=aj(e),i=sj(t);if(!await i._isAvailable())return!1;const s=await i._get(r)==="true";return await i._remove(r),s}function ij(t,e){Md.set(t._key(),e)}function sj(t){return ci(t._redirectPersistence)}function aj(t){return Nd(tj,t.config.apiKey,t.name)}async function oj(t,e,r=!1){if(Er(t.app))return Promise.reject(ss(t));const i=Uo(t),s=XO(i,e),o=await new nj(i,s,r).execute();return o&&!r&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lj=10*60*1e3;class uj{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(r=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!cj(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var i;if(e.error&&!A1(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";r.onError(Br(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const i=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=lj&&this.cachedEventUids.clear(),this.cachedEventUids.has(vb(e))}saveEventToCache(e){this.cachedEventUids.add(vb(e)),this.lastProcessedEventTime=Date.now()}}function vb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function A1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function cj(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return A1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dj(t,e={}){return Ts(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hj=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,fj=/^https?/;async function pj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await dj(t);for(const r of e)try{if(mj(r))return}catch{}Cr(t,"unauthorized-domain")}function mj(t){const e=Og(),{protocol:r,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===i}if(!fj.test(r))return!1;if(hj.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=new Qu(3e4,6e4);function yb(){const t=$r().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function vj(t){return new Promise((e,r)=>{var i,s,a;function o(){yb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yb(),r(Br(t,"network-request-failed"))},timeout:gj.get()})}if(!((s=(i=$r().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=$r().gapi)===null||a===void 0)&&a.load)o();else{const l=uO("iframefcb");return $r()[l]=()=>{gapi.load?o():r(Br(t,"network-request-failed"))},p1(`${lO()}?onload=${l}`).catch(u=>r(u))}}).catch(e=>{throw Ld=null,e})}let Ld=null;function yj(t){return Ld=Ld||vj(t),Ld}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=new Qu(5e3,15e3),wj="__/auth/iframe",bj="emulator/auth/iframe",xj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ej=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Tj(t){const e=t.config;Ee(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Ly(e,bj):`https://${t.config.authDomain}/${wj}`,i={apiKey:e.apiKey,appName:t.name,v:Fo},s=Ej.get(t.config.apiHost);s&&(i.eid=s);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${r}?${Xu(i).slice(1)}`}async function Sj(t){const e=await yj(t),r=$r().gapi;return Ee(r,t,"internal-error"),e.open({where:document.body,url:Tj(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xj,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const o=Br(t,"network-request-failed"),l=$r().setTimeout(()=>{a(o)},_j.get());function u(){$r().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},kj=500,Cj=600,Aj="_blank",Pj="http://localhost";class _b{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Rj(t,e,r,i=kj,s=Cj){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u=Object.assign(Object.assign({},Ij),{width:i.toString(),height:s.toString(),top:a,left:o}),c=gn().toLowerCase();r&&(l=o1(c)?Aj:r),s1(c)&&(e=e||Pj,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[g,_])=>`${p}${g}=${_},`,"");if(ZL(c)&&l!=="_self")return Dj(e||"",l),new _b(null);const f=window.open(e||"",l,h);Ee(f,t,"popup-blocked");try{f.focus()}catch{}return new _b(f)}function Dj(t,e){const r=document.createElement("a");r.href=t,r.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nj="__/auth/handler",Mj="emulator/auth/handler",Lj=encodeURIComponent("fac");async function wb(t,e,r,i,s,a){Ee(t.config.authDomain,t,"auth-domain-config-required"),Ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:Fo,eventId:s};if(e instanceof v1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",xM(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Ju){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),c=u?`#${Lj}=${encodeURIComponent(u)}`:"";return`${Oj(t)}?${Xu(l).slice(1)}${c}`}function Oj({config:t}){return t.emulator?Ly(t,Mj):`https://${t.authDomain}/${Nj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const em="webStorageSupport";class jj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=E1,this._completeRedirectFn=oj,this._overrideRedirectResult=ij}async _openPopup(e,r,i,s){var a;_i((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await wb(e,r,i,Og(),s);return Rj(e,o,Uy())}async _openRedirect(e,r,i,s){await this._originValidation(e);const a=await wb(e,r,i,Og(),s);return UO(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:a}=this.eventManagers[r];return s?Promise.resolve(s):(_i(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[r]={promise:i},i.catch(()=>{delete this.eventManagers[r]}),i}async initAndGetManager(e){const r=await Sj(e),i=new uj(e);return r.register("authEvent",s=>(Ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=r,i}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(em,{type:em},s=>{var a;const o=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[em];o!==void 0&&r(!!o),Cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=pj(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return h1()||a1()||jy()}}const Vj=jj;var bb="@firebase/auth",xb="1.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Bj(t){go(new ia("auth",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=i.options;Ee(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:f1(t)},c=new sO(i,s,a,u);return mO(c,r),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,i)=>{e.getProvider("auth-internal").initialize()})),go(new ia("auth-internal",e=>{const r=Uo(e.getProvider("auth").getImmediate());return(i=>new Fj(i))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),is(bb,xb,Uj(t)),is(bb,xb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $j=5*60,zj=zI("authIdTokenMaxAge")||$j;let Eb=null;const Hj=t=>async e=>{const r=e&&await e.getIdTokenResult(),i=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>zj)return;const s=r==null?void 0:r.token;Eb!==s&&(Eb=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Wj(t=GI()){const e=Dy(t,"auth");if(e.isInitialized())return e.getImmediate();const r=pO(t,{popupRedirectResolver:Vj,persistence:[YO,jO,E1]}),i=zI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const o=Hj(a.toString());DO(r,o,()=>o(r.currentUser)),RO(r,l=>o(l))}}const s=BI("auth");return s&&gO(r,`http://${s}`),r}function qj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}aO({loadJS(t){return new Promise((e,r)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const a=Br("internal-error");a.customData=s,r(a)},i.type="text/javascript",i.charset="UTF-8",qj().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Bj("Browser");var Gj="firebase",Kj="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */is(Gj,Kj,"app");var Tb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var as,P1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,I){function y(){}y.prototype=I.prototype,P.D=I.prototype,P.prototype=new y,P.prototype.constructor=P,P.C=function(w,S,M){for(var N=Array(arguments.length-2),G=2;G<arguments.length;G++)N[G-2]=arguments[G];return I.prototype[S].apply(w,N)}}function r(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,r),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(P,I,y){y||(y=0);var w=Array(16);if(typeof I=="string")for(var S=0;16>S;++S)w[S]=I.charCodeAt(y++)|I.charCodeAt(y++)<<8|I.charCodeAt(y++)<<16|I.charCodeAt(y++)<<24;else for(S=0;16>S;++S)w[S]=I[y++]|I[y++]<<8|I[y++]<<16|I[y++]<<24;I=P.g[0],y=P.g[1],S=P.g[2];var M=P.g[3],N=I+(M^y&(S^M))+w[0]+3614090360&4294967295;I=y+(N<<7&4294967295|N>>>25),N=M+(S^I&(y^S))+w[1]+3905402710&4294967295,M=I+(N<<12&4294967295|N>>>20),N=S+(y^M&(I^y))+w[2]+606105819&4294967295,S=M+(N<<17&4294967295|N>>>15),N=y+(I^S&(M^I))+w[3]+3250441966&4294967295,y=S+(N<<22&4294967295|N>>>10),N=I+(M^y&(S^M))+w[4]+4118548399&4294967295,I=y+(N<<7&4294967295|N>>>25),N=M+(S^I&(y^S))+w[5]+1200080426&4294967295,M=I+(N<<12&4294967295|N>>>20),N=S+(y^M&(I^y))+w[6]+2821735955&4294967295,S=M+(N<<17&4294967295|N>>>15),N=y+(I^S&(M^I))+w[7]+4249261313&4294967295,y=S+(N<<22&4294967295|N>>>10),N=I+(M^y&(S^M))+w[8]+1770035416&4294967295,I=y+(N<<7&4294967295|N>>>25),N=M+(S^I&(y^S))+w[9]+2336552879&4294967295,M=I+(N<<12&4294967295|N>>>20),N=S+(y^M&(I^y))+w[10]+4294925233&4294967295,S=M+(N<<17&4294967295|N>>>15),N=y+(I^S&(M^I))+w[11]+2304563134&4294967295,y=S+(N<<22&4294967295|N>>>10),N=I+(M^y&(S^M))+w[12]+1804603682&4294967295,I=y+(N<<7&4294967295|N>>>25),N=M+(S^I&(y^S))+w[13]+4254626195&4294967295,M=I+(N<<12&4294967295|N>>>20),N=S+(y^M&(I^y))+w[14]+2792965006&4294967295,S=M+(N<<17&4294967295|N>>>15),N=y+(I^S&(M^I))+w[15]+1236535329&4294967295,y=S+(N<<22&4294967295|N>>>10),N=I+(S^M&(y^S))+w[1]+4129170786&4294967295,I=y+(N<<5&4294967295|N>>>27),N=M+(y^S&(I^y))+w[6]+3225465664&4294967295,M=I+(N<<9&4294967295|N>>>23),N=S+(I^y&(M^I))+w[11]+643717713&4294967295,S=M+(N<<14&4294967295|N>>>18),N=y+(M^I&(S^M))+w[0]+3921069994&4294967295,y=S+(N<<20&4294967295|N>>>12),N=I+(S^M&(y^S))+w[5]+3593408605&4294967295,I=y+(N<<5&4294967295|N>>>27),N=M+(y^S&(I^y))+w[10]+38016083&4294967295,M=I+(N<<9&4294967295|N>>>23),N=S+(I^y&(M^I))+w[15]+3634488961&4294967295,S=M+(N<<14&4294967295|N>>>18),N=y+(M^I&(S^M))+w[4]+3889429448&4294967295,y=S+(N<<20&4294967295|N>>>12),N=I+(S^M&(y^S))+w[9]+568446438&4294967295,I=y+(N<<5&4294967295|N>>>27),N=M+(y^S&(I^y))+w[14]+3275163606&4294967295,M=I+(N<<9&4294967295|N>>>23),N=S+(I^y&(M^I))+w[3]+4107603335&4294967295,S=M+(N<<14&4294967295|N>>>18),N=y+(M^I&(S^M))+w[8]+1163531501&4294967295,y=S+(N<<20&4294967295|N>>>12),N=I+(S^M&(y^S))+w[13]+2850285829&4294967295,I=y+(N<<5&4294967295|N>>>27),N=M+(y^S&(I^y))+w[2]+4243563512&4294967295,M=I+(N<<9&4294967295|N>>>23),N=S+(I^y&(M^I))+w[7]+1735328473&4294967295,S=M+(N<<14&4294967295|N>>>18),N=y+(M^I&(S^M))+w[12]+2368359562&4294967295,y=S+(N<<20&4294967295|N>>>12),N=I+(y^S^M)+w[5]+4294588738&4294967295,I=y+(N<<4&4294967295|N>>>28),N=M+(I^y^S)+w[8]+2272392833&4294967295,M=I+(N<<11&4294967295|N>>>21),N=S+(M^I^y)+w[11]+1839030562&4294967295,S=M+(N<<16&4294967295|N>>>16),N=y+(S^M^I)+w[14]+4259657740&4294967295,y=S+(N<<23&4294967295|N>>>9),N=I+(y^S^M)+w[1]+2763975236&4294967295,I=y+(N<<4&4294967295|N>>>28),N=M+(I^y^S)+w[4]+1272893353&4294967295,M=I+(N<<11&4294967295|N>>>21),N=S+(M^I^y)+w[7]+4139469664&4294967295,S=M+(N<<16&4294967295|N>>>16),N=y+(S^M^I)+w[10]+3200236656&4294967295,y=S+(N<<23&4294967295|N>>>9),N=I+(y^S^M)+w[13]+681279174&4294967295,I=y+(N<<4&4294967295|N>>>28),N=M+(I^y^S)+w[0]+3936430074&4294967295,M=I+(N<<11&4294967295|N>>>21),N=S+(M^I^y)+w[3]+3572445317&4294967295,S=M+(N<<16&4294967295|N>>>16),N=y+(S^M^I)+w[6]+76029189&4294967295,y=S+(N<<23&4294967295|N>>>9),N=I+(y^S^M)+w[9]+3654602809&4294967295,I=y+(N<<4&4294967295|N>>>28),N=M+(I^y^S)+w[12]+3873151461&4294967295,M=I+(N<<11&4294967295|N>>>21),N=S+(M^I^y)+w[15]+530742520&4294967295,S=M+(N<<16&4294967295|N>>>16),N=y+(S^M^I)+w[2]+3299628645&4294967295,y=S+(N<<23&4294967295|N>>>9),N=I+(S^(y|~M))+w[0]+4096336452&4294967295,I=y+(N<<6&4294967295|N>>>26),N=M+(y^(I|~S))+w[7]+1126891415&4294967295,M=I+(N<<10&4294967295|N>>>22),N=S+(I^(M|~y))+w[14]+2878612391&4294967295,S=M+(N<<15&4294967295|N>>>17),N=y+(M^(S|~I))+w[5]+4237533241&4294967295,y=S+(N<<21&4294967295|N>>>11),N=I+(S^(y|~M))+w[12]+1700485571&4294967295,I=y+(N<<6&4294967295|N>>>26),N=M+(y^(I|~S))+w[3]+2399980690&4294967295,M=I+(N<<10&4294967295|N>>>22),N=S+(I^(M|~y))+w[10]+4293915773&4294967295,S=M+(N<<15&4294967295|N>>>17),N=y+(M^(S|~I))+w[1]+2240044497&4294967295,y=S+(N<<21&4294967295|N>>>11),N=I+(S^(y|~M))+w[8]+1873313359&4294967295,I=y+(N<<6&4294967295|N>>>26),N=M+(y^(I|~S))+w[15]+4264355552&4294967295,M=I+(N<<10&4294967295|N>>>22),N=S+(I^(M|~y))+w[6]+2734768916&4294967295,S=M+(N<<15&4294967295|N>>>17),N=y+(M^(S|~I))+w[13]+1309151649&4294967295,y=S+(N<<21&4294967295|N>>>11),N=I+(S^(y|~M))+w[4]+4149444226&4294967295,I=y+(N<<6&4294967295|N>>>26),N=M+(y^(I|~S))+w[11]+3174756917&4294967295,M=I+(N<<10&4294967295|N>>>22),N=S+(I^(M|~y))+w[2]+718787259&4294967295,S=M+(N<<15&4294967295|N>>>17),N=y+(M^(S|~I))+w[9]+3951481745&4294967295,P.g[0]=P.g[0]+I&4294967295,P.g[1]=P.g[1]+(S+(N<<21&4294967295|N>>>11))&4294967295,P.g[2]=P.g[2]+S&4294967295,P.g[3]=P.g[3]+M&4294967295}i.prototype.u=function(P,I){I===void 0&&(I=P.length);for(var y=I-this.blockSize,w=this.B,S=this.h,M=0;M<I;){if(S==0)for(;M<=y;)s(this,P,M),M+=this.blockSize;if(typeof P=="string"){for(;M<I;)if(w[S++]=P.charCodeAt(M++),S==this.blockSize){s(this,w),S=0;break}}else for(;M<I;)if(w[S++]=P[M++],S==this.blockSize){s(this,w),S=0;break}}this.h=S,this.o+=I},i.prototype.v=function(){var P=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);P[0]=128;for(var I=1;I<P.length-8;++I)P[I]=0;var y=8*this.o;for(I=P.length-8;I<P.length;++I)P[I]=y&255,y/=256;for(this.u(P),P=Array(16),I=y=0;4>I;++I)for(var w=0;32>w;w+=8)P[y++]=this.g[I]>>>w&255;return P};function a(P,I){var y=l;return Object.prototype.hasOwnProperty.call(y,P)?y[P]:y[P]=I(P)}function o(P,I){this.h=I;for(var y=[],w=!0,S=P.length-1;0<=S;S--){var M=P[S]|0;w&&M==I||(y[S]=M,w=!1)}this.g=y}var l={};function u(P){return-128<=P&&128>P?a(P,function(I){return new o([I|0],0>I?-1:0)}):new o([P|0],0>P?-1:0)}function c(P){if(isNaN(P)||!isFinite(P))return f;if(0>P)return R(c(-P));for(var I=[],y=1,w=0;P>=y;w++)I[w]=P/y|0,y*=4294967296;return new o(I,0)}function h(P,I){if(P.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(P.charAt(0)=="-")return R(h(P.substring(1),I));if(0<=P.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=c(Math.pow(I,8)),w=f,S=0;S<P.length;S+=8){var M=Math.min(8,P.length-S),N=parseInt(P.substring(S,S+M),I);8>M?(M=c(Math.pow(I,M)),w=w.j(M).add(c(N))):(w=w.j(y),w=w.add(c(N)))}return w}var f=u(0),p=u(1),g=u(16777216);t=o.prototype,t.m=function(){if(A(this))return-R(this).m();for(var P=0,I=1,y=0;y<this.g.length;y++){var w=this.i(y);P+=(0<=w?w:4294967296+w)*I,I*=4294967296}return P},t.toString=function(P){if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(_(this))return"0";if(A(this))return"-"+R(this).toString(P);for(var I=c(Math.pow(P,6)),y=this,w="";;){var S=D(y,I).g;y=E(y,S.j(I));var M=((0<y.g.length?y.g[0]:y.h)>>>0).toString(P);if(y=S,_(y))return M+w;for(;6>M.length;)M="0"+M;w=M+w}},t.i=function(P){return 0>P?0:P<this.g.length?this.g[P]:this.h};function _(P){if(P.h!=0)return!1;for(var I=0;I<P.g.length;I++)if(P.g[I]!=0)return!1;return!0}function A(P){return P.h==-1}t.l=function(P){return P=E(this,P),A(P)?-1:_(P)?0:1};function R(P){for(var I=P.g.length,y=[],w=0;w<I;w++)y[w]=~P.g[w];return new o(y,~P.h).add(p)}t.abs=function(){return A(this)?R(this):this},t.add=function(P){for(var I=Math.max(this.g.length,P.g.length),y=[],w=0,S=0;S<=I;S++){var M=w+(this.i(S)&65535)+(P.i(S)&65535),N=(M>>>16)+(this.i(S)>>>16)+(P.i(S)>>>16);w=N>>>16,M&=65535,N&=65535,y[S]=N<<16|M}return new o(y,y[y.length-1]&-2147483648?-1:0)};function E(P,I){return P.add(R(I))}t.j=function(P){if(_(this)||_(P))return f;if(A(this))return A(P)?R(this).j(R(P)):R(R(this).j(P));if(A(P))return R(this.j(R(P)));if(0>this.l(g)&&0>P.l(g))return c(this.m()*P.m());for(var I=this.g.length+P.g.length,y=[],w=0;w<2*I;w++)y[w]=0;for(w=0;w<this.g.length;w++)for(var S=0;S<P.g.length;S++){var M=this.i(w)>>>16,N=this.i(w)&65535,G=P.i(S)>>>16,ee=P.i(S)&65535;y[2*w+2*S]+=N*ee,b(y,2*w+2*S),y[2*w+2*S+1]+=M*ee,b(y,2*w+2*S+1),y[2*w+2*S+1]+=N*G,b(y,2*w+2*S+1),y[2*w+2*S+2]+=M*G,b(y,2*w+2*S+2)}for(w=0;w<I;w++)y[w]=y[2*w+1]<<16|y[2*w];for(w=I;w<2*I;w++)y[w]=0;return new o(y,0)};function b(P,I){for(;(P[I]&65535)!=P[I];)P[I+1]+=P[I]>>>16,P[I]&=65535,I++}function T(P,I){this.g=P,this.h=I}function D(P,I){if(_(I))throw Error("division by zero");if(_(P))return new T(f,f);if(A(P))return I=D(R(P),I),new T(R(I.g),R(I.h));if(A(I))return I=D(P,R(I)),new T(R(I.g),I.h);if(30<P.g.length){if(A(P)||A(I))throw Error("slowDivide_ only works with positive integers.");for(var y=p,w=I;0>=w.l(P);)y=U(y),w=U(w);var S=j(y,1),M=j(w,1);for(w=j(w,2),y=j(y,2);!_(w);){var N=M.add(w);0>=N.l(P)&&(S=S.add(y),M=N),w=j(w,1),y=j(y,1)}return I=E(P,S.j(I)),new T(S,I)}for(S=f;0<=P.l(I);){for(y=Math.max(1,Math.floor(P.m()/I.m())),w=Math.ceil(Math.log(y)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),M=c(y),N=M.j(I);A(N)||0<N.l(P);)y-=w,M=c(y),N=M.j(I);_(M)&&(M=p),S=S.add(M),P=E(P,N)}return new T(S,P)}t.A=function(P){return D(this,P).h},t.and=function(P){for(var I=Math.max(this.g.length,P.g.length),y=[],w=0;w<I;w++)y[w]=this.i(w)&P.i(w);return new o(y,this.h&P.h)},t.or=function(P){for(var I=Math.max(this.g.length,P.g.length),y=[],w=0;w<I;w++)y[w]=this.i(w)|P.i(w);return new o(y,this.h|P.h)},t.xor=function(P){for(var I=Math.max(this.g.length,P.g.length),y=[],w=0;w<I;w++)y[w]=this.i(w)^P.i(w);return new o(y,this.h^P.h)};function U(P){for(var I=P.g.length+1,y=[],w=0;w<I;w++)y[w]=P.i(w)<<1|P.i(w-1)>>>31;return new o(y,P.h)}function j(P,I){var y=I>>5;I%=32;for(var w=P.g.length-y,S=[],M=0;M<w;M++)S[M]=0<I?P.i(M+y)>>>I|P.i(M+y+1)<<32-I:P.i(M+y);return new o(S,P.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,P1=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,as=o}).apply(typeof Tb<"u"?Tb:typeof self<"u"?self:typeof window<"u"?window:{});var rd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var R1,Ol,D1,Od,Fg,N1,M1,L1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,v,x){return d==Array.prototype||d==Object.prototype||(d[v]=x.value),d};function r(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof rd=="object"&&rd];for(var v=0;v<d.length;++v){var x=d[v];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var i=r(this);function s(d,v){if(v)e:{var x=i;d=d.split(".");for(var O=0;O<d.length-1;O++){var z=d[O];if(!(z in x))break e;x=x[z]}d=d[d.length-1],O=x[d],v=v(O),v!=O&&v!=null&&e(x,d,{configurable:!0,writable:!0,value:v})}}function a(d,v){d instanceof String&&(d+="");var x=0,O=!1,z={next:function(){if(!O&&x<d.length){var K=x++;return{value:v(K,d[K]),done:!1}}return O=!0,{done:!0,value:void 0}}};return z[Symbol.iterator]=function(){return z},z}s("Array.prototype.values",function(d){return d||function(){return a(this,function(v,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(d){var v=typeof d;return v=v!="object"?v:d?Array.isArray(d)?"array":v:"null",v=="array"||v=="object"&&typeof d.length=="number"}function c(d){var v=typeof d;return v=="object"&&d!=null||v=="function"}function h(d,v,x){return d.call.apply(d.bind,arguments)}function f(d,v,x){if(!d)throw Error();if(2<arguments.length){var O=Array.prototype.slice.call(arguments,2);return function(){var z=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(z,O),d.apply(v,z)}}return function(){return d.apply(v,arguments)}}function p(d,v,x){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function g(d,v){var x=Array.prototype.slice.call(arguments,1);return function(){var O=x.slice();return O.push.apply(O,arguments),d.apply(this,O)}}function _(d,v){function x(){}x.prototype=v.prototype,d.aa=v.prototype,d.prototype=new x,d.prototype.constructor=d,d.Qb=function(O,z,K){for(var ue=Array(arguments.length-2),it=2;it<arguments.length;it++)ue[it-2]=arguments[it];return v.prototype[z].apply(O,ue)}}function A(d){const v=d.length;if(0<v){const x=Array(v);for(let O=0;O<v;O++)x[O]=d[O];return x}return[]}function R(d,v){for(let x=1;x<arguments.length;x++){const O=arguments[x];if(u(O)){const z=d.length||0,K=O.length||0;d.length=z+K;for(let ue=0;ue<K;ue++)d[z+ue]=O[ue]}else d.push(O)}}class E{constructor(v,x){this.i=v,this.j=x,this.h=0,this.g=null}get(){let v;return 0<this.h?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function b(d){return/^[\s\xa0]*$/.test(d)}function T(){var d=l.navigator;return d&&(d=d.userAgent)?d:""}function D(d){return D[" "](d),d}D[" "]=function(){};var U=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function j(d,v,x){for(const O in d)v.call(x,d[O],O,d)}function P(d,v){for(const x in d)v.call(void 0,d[x],x,d)}function I(d){const v={};for(const x in d)v[x]=d[x];return v}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(d,v){let x,O;for(let z=1;z<arguments.length;z++){O=arguments[z];for(x in O)d[x]=O[x];for(let K=0;K<y.length;K++)x=y[K],Object.prototype.hasOwnProperty.call(O,x)&&(d[x]=O[x])}}function S(d){var v=1;d=d.split(":");const x=[];for(;0<v&&d.length;)x.push(d.shift()),v--;return d.length&&x.push(d.join(":")),x}function M(d){l.setTimeout(()=>{throw d},0)}function N(){var d=Y;let v=null;return d.g&&(v=d.g,d.g=d.g.next,d.g||(d.h=null),v.next=null),v}class G{constructor(){this.h=this.g=null}add(v,x){const O=ee.get();O.set(v,x),this.h?this.h.next=O:this.g=O,this.h=O}}var ee=new E(()=>new ie,d=>d.reset());class ie{constructor(){this.next=this.g=this.h=null}set(v,x){this.h=v,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let de,q=!1,Y=new G,re=()=>{const d=l.Promise.resolve(void 0);de=()=>{d.then(ne)}};var ne=()=>{for(var d;d=N();){try{d.h.call(d.g)}catch(x){M(x)}var v=ee;v.j(d),100>v.h&&(v.h++,d.next=v.g,v.g=d)}q=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(d,v){this.type=d,this.g=this.target=v,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var d=!1,v=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const x=()=>{};l.addEventListener("test",x,v),l.removeEventListener("test",x,v)}catch{}return d}();function X(d,v){if(H.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var x=this.type=d.type,O=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=v,v=d.relatedTarget){if(U){e:{try{D(v.nodeName);var z=!0;break e}catch{}z=!1}z||(v=null)}}else x=="mouseover"?v=d.fromElement:x=="mouseout"&&(v=d.toElement);this.relatedTarget=v,O?(this.clientX=O.clientX!==void 0?O.clientX:O.pageX,this.clientY=O.clientY!==void 0?O.clientY:O.pageY,this.screenX=O.screenX||0,this.screenY=O.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ce[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&X.aa.h.call(this)}}_(X,H);var ce={2:"touch",3:"pen",4:"mouse"};X.prototype.h=function(){X.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var me="closure_listenable_"+(1e6*Math.random()|0),De=0;function Ae(d,v,x,O,z){this.listener=d,this.proxy=null,this.src=v,this.type=x,this.capture=!!O,this.ha=z,this.key=++De,this.da=this.fa=!1}function He(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function We(d){this.src=d,this.g={},this.h=0}We.prototype.add=function(d,v,x,O,z){var K=d.toString();d=this.g[K],d||(d=this.g[K]=[],this.h++);var ue=Ke(d,v,O,z);return-1<ue?(v=d[ue],x||(v.fa=!1)):(v=new Ae(v,this.src,K,!!O,z),v.fa=x,d.push(v)),v};function Xe(d,v){var x=v.type;if(x in d.g){var O=d.g[x],z=Array.prototype.indexOf.call(O,v,void 0),K;(K=0<=z)&&Array.prototype.splice.call(O,z,1),K&&(He(v),d.g[x].length==0&&(delete d.g[x],d.h--))}}function Ke(d,v,x,O){for(var z=0;z<d.length;++z){var K=d[z];if(!K.da&&K.listener==v&&K.capture==!!x&&K.ha==O)return z}return-1}var qe="closure_lm_"+(1e6*Math.random()|0),nt={};function C(d,v,x,O,z){if(Array.isArray(v)){for(var K=0;K<v.length;K++)C(d,v[K],x,O,z);return null}return x=Ye(x),d&&d[me]?d.K(v,x,c(O)?!!O.capture:!1,z):V(d,v,x,!1,O,z)}function V(d,v,x,O,z,K){if(!v)throw Error("Invalid event type");var ue=c(z)?!!z.capture:!!z,it=Ie(d);if(it||(d[qe]=it=new We(d)),x=it.add(v,x,O,ue,K),x.proxy)return x;if(O=F(),x.proxy=O,O.src=d,O.listener=x,d.addEventListener)J||(z=ue),z===void 0&&(z=!1),d.addEventListener(v.toString(),O,z);else if(d.attachEvent)d.attachEvent(le(v.toString()),O);else if(d.addListener&&d.removeListener)d.addListener(O);else throw Error("addEventListener and attachEvent are unavailable.");return x}function F(){function d(x){return v.call(d.src,d.listener,x)}const v=we;return d}function $(d,v,x,O,z){if(Array.isArray(v))for(var K=0;K<v.length;K++)$(d,v[K],x,O,z);else O=c(O)?!!O.capture:!!O,x=Ye(x),d&&d[me]?(d=d.i,v=String(v).toString(),v in d.g&&(K=d.g[v],x=Ke(K,x,O,z),-1<x&&(He(K[x]),Array.prototype.splice.call(K,x,1),K.length==0&&(delete d.g[v],d.h--)))):d&&(d=Ie(d))&&(v=d.g[v.toString()],d=-1,v&&(d=Ke(v,x,O,z)),(x=-1<d?v[d]:null)&&Q(x))}function Q(d){if(typeof d!="number"&&d&&!d.da){var v=d.src;if(v&&v[me])Xe(v.i,d);else{var x=d.type,O=d.proxy;v.removeEventListener?v.removeEventListener(x,O,d.capture):v.detachEvent?v.detachEvent(le(x),O):v.addListener&&v.removeListener&&v.removeListener(O),(x=Ie(v))?(Xe(x,d),x.h==0&&(x.src=null,v[qe]=null)):He(d)}}}function le(d){return d in nt?nt[d]:nt[d]="on"+d}function we(d,v){if(d.da)d=!0;else{v=new X(v,this);var x=d.listener,O=d.ha||d.src;d.fa&&Q(d),d=x.call(O,v)}return d}function Ie(d){return d=d[qe],d instanceof We?d:null}var Le="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ye(d){return typeof d=="function"?d:(d[Le]||(d[Le]=function(v){return d.handleEvent(v)}),d[Le])}function Ce(){W.call(this),this.i=new We(this),this.M=this,this.F=null}_(Ce,W),Ce.prototype[me]=!0,Ce.prototype.removeEventListener=function(d,v,x,O){$(this,d,v,x,O)};function ot(d,v){var x,O=d.F;if(O)for(x=[];O;O=O.F)x.push(O);if(d=d.M,O=v.type||v,typeof v=="string")v=new H(v,d);else if(v instanceof H)v.target=v.target||d;else{var z=v;v=new H(O,d),w(v,z)}if(z=!0,x)for(var K=x.length-1;0<=K;K--){var ue=v.g=x[K];z=Wt(ue,O,!0,v)&&z}if(ue=v.g=d,z=Wt(ue,O,!0,v)&&z,z=Wt(ue,O,!1,v)&&z,x)for(K=0;K<x.length;K++)ue=v.g=x[K],z=Wt(ue,O,!1,v)&&z}Ce.prototype.N=function(){if(Ce.aa.N.call(this),this.i){var d=this.i,v;for(v in d.g){for(var x=d.g[v],O=0;O<x.length;O++)He(x[O]);delete d.g[v],d.h--}}this.F=null},Ce.prototype.K=function(d,v,x,O){return this.i.add(String(d),v,!1,x,O)},Ce.prototype.L=function(d,v,x,O){return this.i.add(String(d),v,!0,x,O)};function Wt(d,v,x,O){if(v=d.i.g[String(v)],!v)return!0;v=v.concat();for(var z=!0,K=0;K<v.length;++K){var ue=v[K];if(ue&&!ue.da&&ue.capture==x){var it=ue.listener,Gt=ue.ha||ue.src;ue.fa&&Xe(d.i,ue),z=it.call(Gt,O)!==!1&&z}}return z&&!O.defaultPrevented}function Rr(d,v,x){if(typeof d=="function")x&&(d=p(d,x));else if(d&&typeof d.handleEvent=="function")d=p(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(v)?-1:l.setTimeout(d,v||0)}function Ai(d){d.g=Rr(()=>{d.g=null,d.i&&(d.i=!1,Ai(d))},d.l);const v=d.h;d.h=null,d.m.apply(null,v)}class Qo extends W{constructor(v,x){super(),this.m=v,this.l=x,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:Ai(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function kn(d){W.call(this),this.h=d,this.g={}}_(kn,W);var Cs=[];function er(d){j(d.g,function(v,x){this.g.hasOwnProperty(x)&&Q(v)},d),d.g={}}kn.prototype.N=function(){kn.aa.N.call(this),er(this)},kn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dr=l.JSON.stringify,Jo=l.JSON.parse,Zo=class{stringify(d){return l.JSON.stringify(d,void 0)}parse(d){return l.JSON.parse(d,void 0)}};function el(){}el.prototype.h=null;function As(d){return d.h||(d.h=d.i())}function Ps(){}var Rs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Jr(){H.call(this,"d")}_(Jr,H);function tl(){H.call(this,"c")}_(tl,H);var Zr={},St=null;function pr(){return St=St||new Ce}Zr.La="serverreachability";function bc(d){H.call(this,Zr.La,d)}_(bc,H);function Pi(d){const v=pr();ot(v,new bc(v))}Zr.STAT_EVENT="statevent";function wa(d,v){H.call(this,Zr.STAT_EVENT,d),this.stat=v}_(wa,H);function jt(d){const v=pr();ot(v,new wa(v,d))}Zr.Ma="timingevent";function nl(d,v){H.call(this,Zr.Ma,d),this.size=v}_(nl,H);function Ds(d,v){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){d()},v)}function sn(){this.g=!0}sn.prototype.xa=function(){this.g=!1};function ba(d,v,x,O,z,K){d.info(function(){if(d.g)if(K)for(var ue="",it=K.split("&"),Gt=0;Gt<it.length;Gt++){var Ge=it[Gt].split("=");if(1<Ge.length){var an=Ge[0];Ge=Ge[1];var on=an.split("_");ue=2<=on.length&&on[1]=="type"?ue+(an+"="+Ge+"&"):ue+(an+"=redacted&")}}else ue=null;else ue=K;return"XMLHTTP REQ ("+O+") [attempt "+z+"]: "+v+`
`+x+`
`+ue})}function xc(d,v,x,O,z,K,ue){d.info(function(){return"XMLHTTP RESP ("+O+") [ attempt "+z+"]: "+v+`
`+x+`
`+K+" "+ue})}function ei(d,v,x,O){d.info(function(){return"XMLHTTP TEXT ("+v+"): "+Ec(d,x)+(O?" "+O:"")})}function rl(d,v){d.info(function(){return"TIMEOUT: "+v})}sn.prototype.info=function(){};function Ec(d,v){if(!d.g)return v;if(!v)return null;try{var x=JSON.parse(v);if(x){for(d=0;d<x.length;d++)if(Array.isArray(x[d])){var O=x[d];if(!(2>O.length)){var z=O[1];if(Array.isArray(z)&&!(1>z.length)){var K=z[0];if(K!="noop"&&K!="stop"&&K!="close")for(var ue=1;ue<z.length;ue++)z[ue]=""}}}}return Dr(x)}catch{return v}}var Cn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},il={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xa;function Ns(){}_(Ns,el),Ns.prototype.g=function(){return new XMLHttpRequest},Ns.prototype.i=function(){return{}},xa=new Ns;function mr(d,v,x,O){this.j=d,this.i=v,this.l=x,this.R=O||1,this.U=new kn(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Tc}function Tc(){this.i=null,this.g="",this.h=!1}var ve={},B={};function se(d,v,x){d.L=1,d.v=Cc(ti(v)),d.m=x,d.P=!0,ge(d,null)}function ge(d,v){d.F=Date.now(),xt(d),d.A=ti(d.v);var x=d.A,O=d.R;Array.isArray(O)||(O=[String(O)]),c0(x.i,"t",O),d.C=0,x=d.j.J,d.h=new Tc,d.g=C0(d.j,x?v:null,!d.m),0<d.O&&(d.M=new Qo(p(d.Y,d,d.g),d.O)),v=d.U,x=d.g,O=d.ca;var z="readystatechange";Array.isArray(z)||(z&&(Cs[0]=z.toString()),z=Cs);for(var K=0;K<z.length;K++){var ue=C(x,z[K],O||v.handleEvent,!1,v.h||v);if(!ue)break;v.g[ue.key]=ue}v=d.H?I(d.H):{},d.m?(d.u||(d.u="POST"),v["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,v)):(d.u="GET",d.g.ea(d.A,d.u,null,v)),Pi(),ba(d.i,d.u,d.A,d.l,d.R,d.m)}mr.prototype.ca=function(d){d=d.target;const v=this.M;v&&ni(d)==3?v.j():this.Y(d)},mr.prototype.Y=function(d){try{if(d==this.g)e:{const on=ni(this.g);var v=this.g.Ba();const Ia=this.g.Z();if(!(3>on)&&(on!=3||this.g&&(this.h.h||this.g.oa()||v0(this.g)))){this.J||on!=4||v==7||(v==8||0>=Ia?Pi(3):Pi(2)),An(this);var x=this.g.Z();this.X=x;t:if(rt(this)){var O=v0(this.g);d="";var z=O.length,K=ni(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gt(this),gr(this);var ue="";break t}this.h.i=new l.TextDecoder}for(v=0;v<z;v++)this.h.h=!0,d+=this.h.i.decode(O[v],{stream:!(K&&v==z-1)});O.length=0,this.h.g+=d,this.C=0,ue=this.h.g}else ue=this.g.oa();if(this.o=x==200,xc(this.i,this.u,this.A,this.l,this.R,on,x),this.o){if(this.T&&!this.K){t:{if(this.g){var it,Gt=this.g;if((it=Gt.g?Gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!b(it)){var Ge=it;break t}}Ge=null}if(x=Ge)ei(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ea(this,x);else{this.o=!1,this.s=3,jt(12),gt(this),gr(this);break e}}if(this.P){x=!0;let vr;for(;!this.J&&this.C<ue.length;)if(vr=Vt(this,ue),vr==B){on==4&&(this.s=4,jt(14),x=!1),ei(this.i,this.l,null,"[Incomplete Response]");break}else if(vr==ve){this.s=4,jt(15),ei(this.i,this.l,ue,"[Invalid Chunk]"),x=!1;break}else ei(this.i,this.l,vr,null),Ea(this,vr);if(rt(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),on!=4||ue.length!=0||this.h.h||(this.s=1,jt(16),x=!1),this.o=this.o&&x,!x)ei(this.i,this.l,ue,"[Invalid Chunked Response]"),gt(this),gr(this);else if(0<ue.length&&!this.W){this.W=!0;var an=this.j;an.g==this&&an.ba&&!an.M&&(an.j.info("Great, no buffering proxy detected. Bytes received: "+ue.length),yp(an),an.M=!0,jt(11))}}else ei(this.i,this.l,ue,null),Ea(this,ue);on==4&&gt(this),this.o&&!this.J&&(on==4?T0(this.j,this):(this.o=!1,xt(this)))}else GP(this.g),x==400&&0<ue.indexOf("Unknown SID")?(this.s=3,jt(12)):(this.s=0,jt(13)),gt(this),gr(this)}}}catch{}finally{}};function rt(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Vt(d,v){var x=d.C,O=v.indexOf(`
`,x);return O==-1?B:(x=Number(v.substring(x,O)),isNaN(x)?ve:(O+=1,O+x>v.length?B:(v=v.slice(O,O+x),d.C=O+x,v)))}mr.prototype.cancel=function(){this.J=!0,gt(this)};function xt(d){d.S=Date.now()+d.I,qt(d,d.I)}function qt(d,v){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Ds(p(d.ba,d),v)}function An(d){d.B&&(l.clearTimeout(d.B),d.B=null)}mr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(rl(this.i,this.A),this.L!=2&&(Pi(),jt(17)),gt(this),this.s=2,gr(this)):qt(this,this.S-d)};function gr(d){d.j.G==0||d.J||T0(d.j,d)}function gt(d){An(d);var v=d.M;v&&typeof v.ma=="function"&&v.ma(),d.M=null,er(d.U),d.g&&(v=d.g,d.g=null,v.abort(),v.ma())}function Ea(d,v){try{var x=d.j;if(x.G!=0&&(x.g==d||fp(x.h,d))){if(!d.K&&fp(x.h,d)&&x.G==3){try{var O=x.Da.g.parse(v)}catch{O=null}if(Array.isArray(O)&&O.length==3){var z=O;if(z[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<d.F)Mc(x),Dc(x);else break e;vp(x),jt(18)}}else x.za=z[1],0<x.za-x.T&&37500>z[2]&&x.F&&x.v==0&&!x.C&&(x.C=Ds(p(x.Za,x),6e3));if(1>=t0(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else Ls(x,11)}else if((d.K||x.g==d)&&Mc(x),!b(v))for(z=x.Da.g.parse(v),v=0;v<z.length;v++){let Ge=z[v];if(x.T=Ge[0],Ge=Ge[1],x.G==2)if(Ge[0]=="c"){x.K=Ge[1],x.ia=Ge[2];const an=Ge[3];an!=null&&(x.la=an,x.j.info("VER="+x.la));const on=Ge[4];on!=null&&(x.Aa=on,x.j.info("SVER="+x.Aa));const Ia=Ge[5];Ia!=null&&typeof Ia=="number"&&0<Ia&&(O=1.5*Ia,x.L=O,x.j.info("backChannelRequestTimeoutMs_="+O)),O=x;const vr=d.g;if(vr){const Oc=vr.g?vr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oc){var K=O.h;K.g||Oc.indexOf("spdy")==-1&&Oc.indexOf("quic")==-1&&Oc.indexOf("h2")==-1||(K.j=K.l,K.g=new Set,K.h&&(pp(K,K.h),K.h=null))}if(O.D){const _p=vr.g?vr.g.getResponseHeader("X-HTTP-Session-Id"):null;_p&&(O.ya=_p,lt(O.I,O.D,_p))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-d.F,x.j.info("Handshake RTT: "+x.R+"ms")),O=x;var ue=d;if(O.qa=k0(O,O.J?O.ia:null,O.W),ue.K){n0(O.h,ue);var it=ue,Gt=O.L;Gt&&(it.I=Gt),it.B&&(An(it),xt(it)),O.g=ue}else x0(O);0<x.i.length&&Nc(x)}else Ge[0]!="stop"&&Ge[0]!="close"||Ls(x,7);else x.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?Ls(x,7):gp(x):Ge[0]!="noop"&&x.l&&x.l.ta(Ge),x.v=0)}}Pi(4)}catch{}}var Sc=class{constructor(d,v){this.g=d,this.map=v}};function Z_(d){this.l=d||10,l.PerformanceNavigationTiming?(d=l.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function e0(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function t0(d){return d.h?1:d.g?d.g.size:0}function fp(d,v){return d.h?d.h==v:d.g?d.g.has(v):!1}function pp(d,v){d.g?d.g.add(v):d.h=v}function n0(d,v){d.h&&d.h==v?d.h=null:d.g&&d.g.has(v)&&d.g.delete(v)}Z_.prototype.cancel=function(){if(this.i=r0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function r0(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let v=d.i;for(const x of d.g.values())v=v.concat(x.D);return v}return A(d.i)}function DP(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(u(d)){for(var v=[],x=d.length,O=0;O<x;O++)v.push(d[O]);return v}v=[],x=0;for(O in d)v[x++]=d[O];return v}function NP(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(u(d)||typeof d=="string"){var v=[];d=d.length;for(var x=0;x<d;x++)v.push(x);return v}v=[],x=0;for(const O in d)v[x++]=O;return v}}}function i0(d,v){if(d.forEach&&typeof d.forEach=="function")d.forEach(v,void 0);else if(u(d)||typeof d=="string")Array.prototype.forEach.call(d,v,void 0);else for(var x=NP(d),O=DP(d),z=O.length,K=0;K<z;K++)v.call(void 0,O[K],x&&x[K],d)}var s0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function MP(d,v){if(d){d=d.split("&");for(var x=0;x<d.length;x++){var O=d[x].indexOf("="),z=null;if(0<=O){var K=d[x].substring(0,O);z=d[x].substring(O+1)}else K=d[x];v(K,z?decodeURIComponent(z.replace(/\+/g," ")):"")}}}function Ms(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof Ms){this.h=d.h,Ic(this,d.j),this.o=d.o,this.g=d.g,kc(this,d.s),this.l=d.l;var v=d.i,x=new ol;x.i=v.i,v.g&&(x.g=new Map(v.g),x.h=v.h),a0(this,x),this.m=d.m}else d&&(v=String(d).match(s0))?(this.h=!1,Ic(this,v[1]||"",!0),this.o=sl(v[2]||""),this.g=sl(v[3]||"",!0),kc(this,v[4]),this.l=sl(v[5]||"",!0),a0(this,v[6]||"",!0),this.m=sl(v[7]||"")):(this.h=!1,this.i=new ol(null,this.h))}Ms.prototype.toString=function(){var d=[],v=this.j;v&&d.push(al(v,o0,!0),":");var x=this.g;return(x||v=="file")&&(d.push("//"),(v=this.o)&&d.push(al(v,o0,!0),"@"),d.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&d.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&d.push("/"),d.push(al(x,x.charAt(0)=="/"?jP:OP,!0))),(x=this.i.toString())&&d.push("?",x),(x=this.m)&&d.push("#",al(x,FP)),d.join("")};function ti(d){return new Ms(d)}function Ic(d,v,x){d.j=x?sl(v,!0):v,d.j&&(d.j=d.j.replace(/:$/,""))}function kc(d,v){if(v){if(v=Number(v),isNaN(v)||0>v)throw Error("Bad port number "+v);d.s=v}else d.s=null}function a0(d,v,x){v instanceof ol?(d.i=v,UP(d.i,d.h)):(x||(v=al(v,VP)),d.i=new ol(v,d.h))}function lt(d,v,x){d.i.set(v,x)}function Cc(d){return lt(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function sl(d,v){return d?v?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function al(d,v,x){return typeof d=="string"?(d=encodeURI(d).replace(v,LP),x&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function LP(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var o0=/[#\/\?@]/g,OP=/[#\?:]/g,jP=/[#\?]/g,VP=/[#\?@]/g,FP=/#/g;function ol(d,v){this.h=this.g=null,this.i=d||null,this.j=!!v}function Ri(d){d.g||(d.g=new Map,d.h=0,d.i&&MP(d.i,function(v,x){d.add(decodeURIComponent(v.replace(/\+/g," ")),x)}))}t=ol.prototype,t.add=function(d,v){Ri(this),this.i=null,d=Ta(this,d);var x=this.g.get(d);return x||this.g.set(d,x=[]),x.push(v),this.h+=1,this};function l0(d,v){Ri(d),v=Ta(d,v),d.g.has(v)&&(d.i=null,d.h-=d.g.get(v).length,d.g.delete(v))}function u0(d,v){return Ri(d),v=Ta(d,v),d.g.has(v)}t.forEach=function(d,v){Ri(this),this.g.forEach(function(x,O){x.forEach(function(z){d.call(v,z,O,this)},this)},this)},t.na=function(){Ri(this);const d=Array.from(this.g.values()),v=Array.from(this.g.keys()),x=[];for(let O=0;O<v.length;O++){const z=d[O];for(let K=0;K<z.length;K++)x.push(v[O])}return x},t.V=function(d){Ri(this);let v=[];if(typeof d=="string")u0(this,d)&&(v=v.concat(this.g.get(Ta(this,d))));else{d=Array.from(this.g.values());for(let x=0;x<d.length;x++)v=v.concat(d[x])}return v},t.set=function(d,v){return Ri(this),this.i=null,d=Ta(this,d),u0(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[v]),this.h+=1,this},t.get=function(d,v){return d?(d=this.V(d),0<d.length?String(d[0]):v):v};function c0(d,v,x){l0(d,v),0<x.length&&(d.i=null,d.g.set(Ta(d,v),A(x)),d.h+=x.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],v=Array.from(this.g.keys());for(var x=0;x<v.length;x++){var O=v[x];const K=encodeURIComponent(String(O)),ue=this.V(O);for(O=0;O<ue.length;O++){var z=K;ue[O]!==""&&(z+="="+encodeURIComponent(String(ue[O]))),d.push(z)}}return this.i=d.join("&")};function Ta(d,v){return v=String(v),d.j&&(v=v.toLowerCase()),v}function UP(d,v){v&&!d.j&&(Ri(d),d.i=null,d.g.forEach(function(x,O){var z=O.toLowerCase();O!=z&&(l0(this,O),c0(this,z,x))},d)),d.j=v}function BP(d,v){const x=new sn;if(l.Image){const O=new Image;O.onload=g(Di,x,"TestLoadImage: loaded",!0,v,O),O.onerror=g(Di,x,"TestLoadImage: error",!1,v,O),O.onabort=g(Di,x,"TestLoadImage: abort",!1,v,O),O.ontimeout=g(Di,x,"TestLoadImage: timeout",!1,v,O),l.setTimeout(function(){O.ontimeout&&O.ontimeout()},1e4),O.src=d}else v(!1)}function $P(d,v){const x=new sn,O=new AbortController,z=setTimeout(()=>{O.abort(),Di(x,"TestPingServer: timeout",!1,v)},1e4);fetch(d,{signal:O.signal}).then(K=>{clearTimeout(z),K.ok?Di(x,"TestPingServer: ok",!0,v):Di(x,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout(z),Di(x,"TestPingServer: error",!1,v)})}function Di(d,v,x,O,z){try{z&&(z.onload=null,z.onerror=null,z.onabort=null,z.ontimeout=null),O(x)}catch{}}function zP(){this.g=new Zo}function HP(d,v,x){const O=x||"";try{i0(d,function(z,K){let ue=z;c(z)&&(ue=Dr(z)),v.push(O+K+"="+encodeURIComponent(ue))})}catch(z){throw v.push(O+"type="+encodeURIComponent("_badmap")),z}}function Ac(d){this.l=d.Ub||null,this.j=d.eb||!1}_(Ac,el),Ac.prototype.g=function(){return new Pc(this.l,this.j)},Ac.prototype.i=function(d){return function(){return d}}({});function Pc(d,v){Ce.call(this),this.D=d,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Pc,Ce),t=Pc.prototype,t.open=function(d,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=v,this.readyState=1,ul(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const v={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(v.body=d),(this.D||l).fetch(new Request(this.A,v)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ll(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,ul(this)),this.g&&(this.readyState=3,ul(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;d0(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function d0(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var v=d.value?d.value:new Uint8Array(0);(v=this.v.decode(v,{stream:!d.done}))&&(this.response=this.responseText+=v)}d.done?ll(this):ul(this),this.readyState==3&&d0(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,ll(this))},t.Qa=function(d){this.g&&(this.response=d,ll(this))},t.ga=function(){this.g&&ll(this)};function ll(d){d.readyState=4,d.l=null,d.j=null,d.v=null,ul(d)}t.setRequestHeader=function(d,v){this.u.append(d,v)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],v=this.h.entries();for(var x=v.next();!x.done;)x=x.value,d.push(x[0]+": "+x[1]),x=v.next();return d.join(`\r
`)};function ul(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Pc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function h0(d){let v="";return j(d,function(x,O){v+=O,v+=":",v+=x,v+=`\r
`}),v}function mp(d,v,x){e:{for(O in x){var O=!1;break e}O=!0}O||(x=h0(x),typeof d=="string"?x!=null&&encodeURIComponent(String(x)):lt(d,v,x))}function Et(d){Ce.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Et,Ce);var WP=/^https?$/i,qP=["POST","PUT"];t=Et.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,v,x,O){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);v=v?v.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xa.g(),this.v=this.o?As(this.o):As(xa),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(v,String(d),!0),this.B=!1}catch(K){f0(this,K);return}if(d=x||"",x=new Map(this.headers),O)if(Object.getPrototypeOf(O)===Object.prototype)for(var z in O)x.set(z,O[z]);else if(typeof O.keys=="function"&&typeof O.get=="function")for(const K of O.keys())x.set(K,O.get(K));else throw Error("Unknown input type for opt_headers: "+String(O));O=Array.from(x.keys()).find(K=>K.toLowerCase()=="content-type"),z=l.FormData&&d instanceof l.FormData,!(0<=Array.prototype.indexOf.call(qP,v,void 0))||O||z||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[K,ue]of x)this.g.setRequestHeader(K,ue);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{g0(this),this.u=!0,this.g.send(d),this.u=!1}catch(K){f0(this,K)}};function f0(d,v){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=v,d.m=5,p0(d),Rc(d)}function p0(d){d.A||(d.A=!0,ot(d,"complete"),ot(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,ot(this,"complete"),ot(this,"abort"),Rc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Rc(this,!0)),Et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?m0(this):this.bb())},t.bb=function(){m0(this)};function m0(d){if(d.h&&typeof o<"u"&&(!d.v[1]||ni(d)!=4||d.Z()!=2)){if(d.u&&ni(d)==4)Rr(d.Ea,0,d);else if(ot(d,"readystatechange"),ni(d)==4){d.h=!1;try{const ue=d.Z();e:switch(ue){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var x;if(!(x=v)){var O;if(O=ue===0){var z=String(d.D).match(s0)[1]||null;!z&&l.self&&l.self.location&&(z=l.self.location.protocol.slice(0,-1)),O=!WP.test(z?z.toLowerCase():"")}x=O}if(x)ot(d,"complete"),ot(d,"success");else{d.m=6;try{var K=2<ni(d)?d.g.statusText:""}catch{K=""}d.l=K+" ["+d.Z()+"]",p0(d)}}finally{Rc(d)}}}}function Rc(d,v){if(d.g){g0(d);const x=d.g,O=d.v[0]?()=>{}:null;d.g=null,d.v=null,v||ot(d,"ready");try{x.onreadystatechange=O}catch{}}}function g0(d){d.I&&(l.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function ni(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<ni(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var v=this.g.responseText;return d&&v.indexOf(d)==0&&(v=v.substring(d.length)),Jo(v)}};function v0(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function GP(d){const v={};d=(d.g&&2<=ni(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let O=0;O<d.length;O++){if(b(d[O]))continue;var x=S(d[O]);const z=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const K=v[z]||[];v[z]=K,K.push(x)}P(v,function(O){return O.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function cl(d,v,x){return x&&x.internalChannelParams&&x.internalChannelParams[d]||v}function y0(d){this.Aa=0,this.i=[],this.j=new sn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=cl("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=cl("baseRetryDelayMs",5e3,d),this.cb=cl("retryDelaySeedMs",1e4,d),this.Wa=cl("forwardChannelMaxRetries",2,d),this.wa=cl("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Z_(d&&d.concurrentRequestLimit),this.Da=new zP,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=y0.prototype,t.la=8,t.G=1,t.connect=function(d,v,x,O){jt(0),this.W=d,this.H=v||{},x&&O!==void 0&&(this.H.OSID=x,this.H.OAID=O),this.F=this.X,this.I=k0(this,null,this.W),Nc(this)};function gp(d){if(_0(d),d.G==3){var v=d.U++,x=ti(d.I);if(lt(x,"SID",d.K),lt(x,"RID",v),lt(x,"TYPE","terminate"),dl(d,x),v=new mr(d,d.j,v),v.L=2,v.v=Cc(ti(x)),x=!1,l.navigator&&l.navigator.sendBeacon)try{x=l.navigator.sendBeacon(v.v.toString(),"")}catch{}!x&&l.Image&&(new Image().src=v.v,x=!0),x||(v.g=C0(v.j,null),v.g.ea(v.v)),v.F=Date.now(),xt(v)}I0(d)}function Dc(d){d.g&&(yp(d),d.g.cancel(),d.g=null)}function _0(d){Dc(d),d.u&&(l.clearTimeout(d.u),d.u=null),Mc(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&l.clearTimeout(d.s),d.s=null)}function Nc(d){if(!e0(d.h)&&!d.s){d.s=!0;var v=d.Ga;de||re(),q||(de(),q=!0),Y.add(v,d),d.B=0}}function KP(d,v){return t0(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=v.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Ds(p(d.Ga,d,v),S0(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const z=new mr(this,this.j,d);let K=this.o;if(this.S&&(K?(K=I(K),w(K,this.S)):K=this.S),this.m!==null||this.O||(z.H=K,K=null),this.P)e:{for(var v=0,x=0;x<this.i.length;x++){t:{var O=this.i[x];if("__data__"in O.map&&(O=O.map.__data__,typeof O=="string")){O=O.length;break t}O=void 0}if(O===void 0)break;if(v+=O,4096<v){v=x;break e}if(v===4096||x===this.i.length-1){v=x+1;break e}}v=1e3}else v=1e3;v=b0(this,z,v),x=ti(this.I),lt(x,"RID",d),lt(x,"CVER",22),this.D&&lt(x,"X-HTTP-Session-Id",this.D),dl(this,x),K&&(this.O?v="headers="+encodeURIComponent(String(h0(K)))+"&"+v:this.m&&mp(x,this.m,K)),pp(this.h,z),this.Ua&&lt(x,"TYPE","init"),this.P?(lt(x,"$req",v),lt(x,"SID","null"),z.T=!0,se(z,x,null)):se(z,x,v),this.G=2}}else this.G==3&&(d?w0(this,d):this.i.length==0||e0(this.h)||w0(this))};function w0(d,v){var x;v?x=v.l:x=d.U++;const O=ti(d.I);lt(O,"SID",d.K),lt(O,"RID",x),lt(O,"AID",d.T),dl(d,O),d.m&&d.o&&mp(O,d.m,d.o),x=new mr(d,d.j,x,d.B+1),d.m===null&&(x.H=d.o),v&&(d.i=v.D.concat(d.i)),v=b0(d,x,1e3),x.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),pp(d.h,x),se(x,O,v)}function dl(d,v){d.H&&j(d.H,function(x,O){lt(v,O,x)}),d.l&&i0({},function(x,O){lt(v,O,x)})}function b0(d,v,x){x=Math.min(d.i.length,x);var O=d.l?p(d.l.Na,d.l,d):null;e:{var z=d.i;let K=-1;for(;;){const ue=["count="+x];K==-1?0<x?(K=z[0].g,ue.push("ofs="+K)):K=0:ue.push("ofs="+K);let it=!0;for(let Gt=0;Gt<x;Gt++){let Ge=z[Gt].g;const an=z[Gt].map;if(Ge-=K,0>Ge)K=Math.max(0,z[Gt].g-100),it=!1;else try{HP(an,ue,"req"+Ge+"_")}catch{O&&O(an)}}if(it){O=ue.join("&");break e}}}return d=d.i.splice(0,x),v.D=d,O}function x0(d){if(!d.g&&!d.u){d.Y=1;var v=d.Fa;de||re(),q||(de(),q=!0),Y.add(v,d),d.v=0}}function vp(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Ds(p(d.Fa,d),S0(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,E0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Ds(p(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,jt(10),Dc(this),E0(this))};function yp(d){d.A!=null&&(l.clearTimeout(d.A),d.A=null)}function E0(d){d.g=new mr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var v=ti(d.qa);lt(v,"RID","rpc"),lt(v,"SID",d.K),lt(v,"AID",d.T),lt(v,"CI",d.F?"0":"1"),!d.F&&d.ja&&lt(v,"TO",d.ja),lt(v,"TYPE","xmlhttp"),dl(d,v),d.m&&d.o&&mp(v,d.m,d.o),d.L&&(d.g.I=d.L);var x=d.g;d=d.ia,x.L=1,x.v=Cc(ti(v)),x.m=null,x.P=!0,ge(x,d)}t.Za=function(){this.C!=null&&(this.C=null,Dc(this),vp(this),jt(19))};function Mc(d){d.C!=null&&(l.clearTimeout(d.C),d.C=null)}function T0(d,v){var x=null;if(d.g==v){Mc(d),yp(d),d.g=null;var O=2}else if(fp(d.h,v))x=v.D,n0(d.h,v),O=1;else return;if(d.G!=0){if(v.o)if(O==1){x=v.m?v.m.length:0,v=Date.now()-v.F;var z=d.B;O=pr(),ot(O,new nl(O,x)),Nc(d)}else x0(d);else if(z=v.s,z==3||z==0&&0<v.X||!(O==1&&KP(d,v)||O==2&&vp(d)))switch(x&&0<x.length&&(v=d.h,v.i=v.i.concat(x)),z){case 1:Ls(d,5);break;case 4:Ls(d,10);break;case 3:Ls(d,6);break;default:Ls(d,2)}}}function S0(d,v){let x=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(x*=2),x*v}function Ls(d,v){if(d.j.info("Error code "+v),v==2){var x=p(d.fb,d),O=d.Xa;const z=!O;O=new Ms(O||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ic(O,"https"),Cc(O),z?BP(O.toString(),x):$P(O.toString(),x)}else jt(2);d.G=0,d.l&&d.l.sa(v),I0(d),_0(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),jt(2)):(this.j.info("Failed to ping google.com"),jt(1))};function I0(d){if(d.G=0,d.ka=[],d.l){const v=r0(d.h);(v.length!=0||d.i.length!=0)&&(R(d.ka,v),R(d.ka,d.i),d.h.i.length=0,A(d.i),d.i.length=0),d.l.ra()}}function k0(d,v,x){var O=x instanceof Ms?ti(x):new Ms(x);if(O.g!="")v&&(O.g=v+"."+O.g),kc(O,O.s);else{var z=l.location;O=z.protocol,v=v?v+"."+z.hostname:z.hostname,z=+z.port;var K=new Ms(null);O&&Ic(K,O),v&&(K.g=v),z&&kc(K,z),x&&(K.l=x),O=K}return x=d.D,v=d.ya,x&&v&&lt(O,x,v),lt(O,"VER",d.la),dl(d,O),O}function C0(d,v,x){if(v&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return v=d.Ca&&!d.pa?new Et(new Ac({eb:x})):new Et(d.pa),v.Ha(d.J),v}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function A0(){}t=A0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Lc(){}Lc.prototype.g=function(d,v){return new Un(d,v)};function Un(d,v){Ce.call(this),this.g=new y0(v),this.l=d,this.h=v&&v.messageUrlParams||null,d=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(d?d["X-WebChannel-Content-Type"]=v.messageContentType:d={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.va&&(d?d["X-WebChannel-Client-Profile"]=v.va:d={"X-WebChannel-Client-Profile":v.va}),this.g.S=d,(d=v&&v.Sb)&&!b(d)&&(this.g.m=d),this.v=v&&v.supportsCrossDomainXhr||!1,this.u=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!b(v)&&(this.g.D=v,d=this.h,d!==null&&v in d&&(d=this.h,v in d&&delete d[v])),this.j=new Sa(this)}_(Un,Ce),Un.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Un.prototype.close=function(){gp(this.g)},Un.prototype.o=function(d){var v=this.g;if(typeof d=="string"){var x={};x.__data__=d,d=x}else this.u&&(x={},x.__data__=Dr(d),d=x);v.i.push(new Sc(v.Ya++,d)),v.G==3&&Nc(v)},Un.prototype.N=function(){this.g.l=null,delete this.j,gp(this.g),delete this.g,Un.aa.N.call(this)};function P0(d){Jr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var v=d.__sm__;if(v){e:{for(const x in v){d=x;break e}d=void 0}(this.i=d)&&(d=this.i,v=v!==null&&d in v?v[d]:void 0),this.data=v}else this.data=d}_(P0,Jr);function R0(){tl.call(this),this.status=1}_(R0,tl);function Sa(d){this.g=d}_(Sa,A0),Sa.prototype.ua=function(){ot(this.g,"a")},Sa.prototype.ta=function(d){ot(this.g,new P0(d))},Sa.prototype.sa=function(d){ot(this.g,new R0)},Sa.prototype.ra=function(){ot(this.g,"b")},Lc.prototype.createWebChannel=Lc.prototype.g,Un.prototype.send=Un.prototype.o,Un.prototype.open=Un.prototype.m,Un.prototype.close=Un.prototype.close,L1=function(){return new Lc},M1=function(){return pr()},N1=Zr,Fg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Cn.NO_ERROR=0,Cn.TIMEOUT=8,Cn.HTTP_ERROR=6,Od=Cn,il.COMPLETE="complete",D1=il,Ps.EventType=Rs,Rs.OPEN="a",Rs.CLOSE="b",Rs.ERROR="c",Rs.MESSAGE="d",Ce.prototype.listen=Ce.prototype.K,Ol=Ps,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,R1=Et}).apply(typeof rd<"u"?rd:typeof self<"u"?self:typeof window<"u"?window:{});const Sb="@firebase/firestore",Ib="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}dn.UNAUTHENTICATED=new dn(null),dn.GOOGLE_CREDENTIALS=new dn("google-credentials-uid"),dn.FIRST_PARTY=new dn("first-party-uid"),dn.MOCK_USER=new dn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $o="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa=new Py("@firebase/firestore");function Na(){return aa.logLevel}function fe(t,...e){if(aa.logLevel<=Oe.DEBUG){const r=e.map($y);aa.debug(`Firestore (${$o}): ${t}`,...r)}}function wi(t,...e){if(aa.logLevel<=Oe.ERROR){const r=e.map($y);aa.error(`Firestore (${$o}): ${t}`,...r)}}function yo(t,...e){if(aa.logLevel<=Oe.WARN){const r=e.map($y);aa.warn(`Firestore (${$o}): ${t}`,...r)}}function $y(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(t="Unexpected state"){const e=`FIRESTORE (${$o}) INTERNAL ASSERTION FAILED: `+t;throw wi(e),new Error(e)}function Qe(t,e){t||Te()}function ke(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Si{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O1{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Yj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(dn.UNAUTHENTICATED))}shutdown(){}}class Xj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Qj{constructor(e){this.t=e,this.currentUser=dn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Qe(this.o===void 0);let i=this.i;const s=u=>this.i!==i?(i=this.i,r(u)):Promise.resolve();let a=new fi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new fi,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new fi)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(i=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Qe(typeof i.accessToken=="string"),new O1(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string"),new dn(e)}}class Jj{constructor(e,r,i){this.l=e,this.h=r,this.P=i,this.type="FirstParty",this.user=dn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Zj{constructor(e,r,i){this.l=e,this.h=r,this.P=i}getToken(){return Promise.resolve(new Jj(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(dn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eV{constructor(e,r){this.A=r,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,Er(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,r){Qe(this.o===void 0);const i=a=>{a.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,fe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const s=a=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new kb(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Qe(typeof r.token=="string"),this.R=r.token,new kb(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tV(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let i=0;i<t;i++)r[i]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=tV(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<r&&(i+=e.charAt(s[a]%62))}return i}}function Ve(t,e){return t<e?-1:t>e?1:0}function _o(t,e,r){return t.length===e.length&&t.every((i,s)=>r(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb=-62135596800,Ab=1e6;class Lt{static now(){return Lt.fromMillis(Date.now())}static fromDate(e){return Lt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),i=Math.floor((e-1e3*r)*Ab);return new Lt(r,i)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ye(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ye(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<Cb)throw new ye(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ab}_compareTo(e){return this.seconds===e.seconds?Ve(this.nanoseconds,e.nanoseconds):Ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Cb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Lt(0,0))}static max(){return new Se(new Lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="__name__";class Or{constructor(e,r,i){r===void 0?r=0:r>e.length&&Te(),i===void 0?i=e.length-r:i>e.length-r&&Te(),this.segments=e,this.offset=r,this.len=i}get length(){return this.len}isEqual(e){return Or.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Or?e.forEach(i=>{r.push(i)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,i=this.limit();r<i;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const i=Math.min(e.length,r.length);for(let s=0;s<i;s++){const a=Or.compareSegments(e.get(s),r.get(s));if(a!==0)return a}return Math.sign(e.length-r.length)}static compareSegments(e,r){const i=Or.isNumericId(e),s=Or.isNumericId(r);return i&&!s?-1:!i&&s?1:i&&s?Or.extractNumericId(e).compare(Or.extractNumericId(r)):e<r?-1:e>r?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return as.fromString(e.substring(4,e.length-2))}}class pt extends Or{construct(e,r,i){return new pt(e,r,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const i of e){if(i.indexOf("//")>=0)throw new ye(te.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);r.push(...i.split("/").filter(s=>s.length>0))}return new pt(r)}static emptyPath(){return new pt([])}}const nV=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Qt extends Or{construct(e,r,i){return new Qt(e,r,i)}static isValidIdentifier(e){return nV.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Qt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Pb}static keyField(){return new Qt([Pb])}static fromServerFormat(e){const r=[];let i="",s=0;const a=()=>{if(i.length===0)throw new ye(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(i),i=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ye(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ye(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(i+=l,s++):(a(),s++)}if(a(),o)throw new ye(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Qt(r)}static emptyPath(){return new Qt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.path=e}static fromPath(e){return new be(pt.fromString(e))}static fromName(e){return new be(pt.fromString(e).popFirst(5))}static empty(){return new be(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return pt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new be(new pt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=-1;function rV(t,e){const r=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Se.fromTimestamp(i===1e9?new Lt(r+1,0):new Lt(r,i));return new ps(s,be.empty(),e)}function iV(t){return new ps(t.readTime,t.key,Cu)}class ps{constructor(e,r,i){this.readTime=e,this.documentKey=r,this.largestBatchId=i}static min(){return new ps(Se.min(),be.empty(),Cu)}static max(){return new ps(Se.max(),be.empty(),Cu)}}function sV(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=be.comparator(t.documentKey,e.documentKey),r!==0?r:Ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aV="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oV{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zo(t){if(t.code!==te.FAILED_PRECONDITION||t.message!==aV)throw t;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Z((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(r,a).next(i,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Z?r:Z.resolve(r)}catch(r){return Z.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Z.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Z.reject(r)}static resolve(e){return new Z((r,i)=>{r(e)})}static reject(e){return new Z((r,i)=>{i(e)})}static waitFor(e){return new Z((r,i)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&r()},u=>i(u))}),o=!0,a===s&&r()})}static or(e){let r=Z.resolve(!1);for(const i of e)r=r.next(s=>s?Z.resolve(s):i());return r}static forEach(e,r){const i=[];return e.forEach((s,a)=>{i.push(r.call(this,s,a))}),this.waitFor(i)}static mapArray(e,r){return new Z((i,s)=>{const a=e.length,o=new Array(a);let l=0;for(let u=0;u<a;u++){const c=u;r(e[c]).next(h=>{o[c]=h,++l,l===a&&i(o)},h=>s(h))}})}static doWhile(e,r){return new Z((i,s)=>{const a=()=>{e()===!0?r().next(()=>{a()},s):i()};a()})}}function lV(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function Ho(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}xf.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zy=-1;function Ef(t){return t==null}function Sh(t){return t===0&&1/t==-1/0}function uV(t){return typeof t=="number"&&Number.isInteger(t)&&!Sh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V1="";function cV(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=Rb(e)),e=dV(t.get(r),e);return Rb(e)}function dV(t,e){let r=e;const i=t.length;for(let s=0;s<i;s++){const a=t.charAt(s);switch(a){case"\0":r+="";break;case V1:r+="";break;default:r+=a}}return r}function Rb(t){return t+V1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Ss(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function F1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,r){this.comparator=e,this.root=r||Xt.EMPTY}insert(e,r){return new bt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}indexOf(e){let r=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return r+i.left.size;s<0?i=i.left:(r+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,i)=>(e(r,i),!1))}toString(){const e=[];return this.inorderTraversal((r,i)=>(e.push(`${r}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new id(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new id(this.root,e,this.comparator,!1)}getReverseIterator(){return new id(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new id(this.root,e,this.comparator,!0)}}class id{constructor(e,r,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?i(e.key,r):1,r&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,r,i,s,a){this.key=e,this.value=r,this.color=i??Xt.RED,this.left=s??Xt.EMPTY,this.right=a??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,i,s,a){return new Xt(e??this.key,r??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,r,i),null):a===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let i,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Xt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,r,i,s,a){return this}insert(e,r,i){return new Xt(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,i)=>(e(r),!1))}forEachInRange(e,r){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let i;for(i=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Nb(this.data.getIterator())}getIteratorFrom(e){return new Nb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(i=>{r=r.add(i)}),r}isEqual(e){if(!(e instanceof Ot)||this.size!==e.size)return!1;const r=this.data.getIterator(),i=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Ot(this.comparator);return r.data=e,r}}class Nb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.fields=e,e.sort(Qt.comparator)}static empty(){return new zn([])}unionWith(e){let r=new Ot(Qt.comparator);for(const i of this.fields)r=r.add(i);for(const i of e)r=r.add(i);return new zn(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return _o(this.fields,e.fields,(r,i)=>r.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new U1("Invalid base64 string: "+a):a}}(e);return new nn(r)}static fromUint8Array(e){const r=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new nn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const i=new Uint8Array(r.length);for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nn.EMPTY_BYTE_STRING=new nn("");const hV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(t){if(Qe(!!t),typeof t=="string"){let e=0;const r=hV.exec(t);if(Qe(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:It(t.seconds),nanos:It(t.nanos)}}function It(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gs(t){return typeof t=="string"?nn.fromBase64String(t):nn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1="server_timestamp",$1="__type__",z1="__previous_value__",H1="__local_write_time__";function Hy(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[$1])===null||r===void 0?void 0:r.stringValue)===B1}function Tf(t){const e=t.mapValue.fields[z1];return Hy(e)?Tf(e):e}function Au(t){const e=ms(t.mapValue.fields[H1].timestampValue);return new Lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fV{constructor(e,r,i,s,a,o,l,u,c){this.databaseId=e,this.appId=r,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}const Ih="(default)";class Pu{constructor(e,r){this.projectId=e,this.database=r||Ih}static empty(){return new Pu("","")}get isDefaultDatabase(){return this.database===Ih}isEqual(e){return e instanceof Pu&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W1="__type__",pV="__max__",sd={mapValue:{}},q1="__vector__",kh="value";function vs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hy(t)?4:gV(t)?9007199254740991:mV(t)?10:11:Te()}function Gr(t,e){if(t===e)return!0;const r=vs(t);if(r!==vs(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Au(t).isEqual(Au(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=ms(s.timestampValue),l=ms(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return gs(s.bytesValue).isEqual(gs(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return It(s.geoPointValue.latitude)===It(a.geoPointValue.latitude)&&It(s.geoPointValue.longitude)===It(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return It(s.integerValue)===It(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=It(s.doubleValue),l=It(a.doubleValue);return o===l?Sh(o)===Sh(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return _o(t.arrayValue.values||[],e.arrayValue.values||[],Gr);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(Db(o)!==Db(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Gr(o[u],l[u])))return!1;return!0}(t,e);default:return Te()}}function Ru(t,e){return(t.values||[]).find(r=>Gr(r,e))!==void 0}function wo(t,e){if(t===e)return 0;const r=vs(t),i=vs(e);if(r!==i)return Ve(r,i);switch(r){case 0:case 9007199254740991:return 0;case 1:return Ve(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=It(a.integerValue||a.doubleValue),u=It(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Mb(t.timestampValue,e.timestampValue);case 4:return Mb(Au(t),Au(e));case 5:return Ve(t.stringValue,e.stringValue);case 6:return function(a,o){const l=gs(a),u=gs(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const h=Ve(l[c],u[c]);if(h!==0)return h}return Ve(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=Ve(It(a.latitude),It(o.latitude));return l!==0?l:Ve(It(a.longitude),It(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Lb(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,u,c,h;const f=a.fields||{},p=o.fields||{},g=(l=f[kh])===null||l===void 0?void 0:l.arrayValue,_=(u=p[kh])===null||u===void 0?void 0:u.arrayValue,A=Ve(((c=g==null?void 0:g.values)===null||c===void 0?void 0:c.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:Lb(g,_)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===sd.mapValue&&o===sd.mapValue)return 0;if(a===sd.mapValue)return 1;if(o===sd.mapValue)return-1;const l=a.fields||{},u=Object.keys(l),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const p=Ve(u[f],h[f]);if(p!==0)return p;const g=wo(l[u[f]],c[h[f]]);if(g!==0)return g}return Ve(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Te()}}function Mb(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ve(t,e);const r=ms(t),i=ms(e),s=Ve(r.seconds,i.seconds);return s!==0?s:Ve(r.nanos,i.nanos)}function Lb(t,e){const r=t.values||[],i=e.values||[];for(let s=0;s<r.length&&s<i.length;++s){const a=wo(r[s],i[s]);if(a)return a}return Ve(r.length,i.length)}function bo(t){return Ug(t)}function Ug(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=ms(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return gs(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return be.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let i="[",s=!0;for(const a of r.values||[])s?s=!1:i+=",",i+=Ug(a);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",a=!0;for(const o of i)a?a=!1:s+=",",s+=`${o}:${Ug(r.fields[o])}`;return s+"}"}(t.mapValue):Te()}function jd(t){switch(vs(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Tf(t);return e?16+jd(e):16;case 5:return 2*t.stringValue.length;case 6:return gs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,a)=>s+jd(a),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return Ss(i.fields,(a,o)=>{s+=a.length+jd(o)}),s}(t.mapValue);default:throw Te()}}function Bg(t){return!!t&&"integerValue"in t}function Wy(t){return!!t&&"arrayValue"in t}function Ob(t){return!!t&&"nullValue"in t}function jb(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vd(t){return!!t&&"mapValue"in t}function mV(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[W1])===null||r===void 0?void 0:r.stringValue)===q1}function Jl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ss(t.mapValue.fields,(r,i)=>e.mapValue.fields[r]=Jl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Jl(t.arrayValue.values[r]);return e}return Object.assign({},t)}function gV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===pV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nn{constructor(e){this.value=e}static empty(){return new Nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let i=0;i<e.length-1;++i)if(r=(r.mapValue.fields||{})[e.get(i)],!Vd(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Jl(r)}setAll(e){let r=Qt.emptyPath(),i={},s=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const u=this.getFieldsMap(r);this.applyChanges(u,i,s),i={},s=[],r=l.popLast()}o?i[l.lastSegment()]=Jl(o):s.push(l.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,i,s)}delete(e){const r=this.field(e.popLast());Vd(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Gr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=r.mapValue.fields[e.get(i)];Vd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(i)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,i){Ss(r,(s,a)=>e[s]=a);for(const s of i)delete e[s]}clone(){return new Nn(Jl(this.value))}}function G1(t){const e=[];return Ss(t.fields,(r,i)=>{const s=new Qt([r]);if(Vd(i)){const a=G1(i.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new zn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,r,i,s,a,o,l){this.key=e,this.documentType=r,this.version=i,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new fn(e,0,Se.min(),Se.min(),Se.min(),Nn.empty(),0)}static newFoundDocument(e,r,i,s){return new fn(e,1,r,Se.min(),i,s,0)}static newNoDocument(e,r){return new fn(e,2,r,Se.min(),Se.min(),Nn.empty(),0)}static newUnknownDocument(e,r){return new fn(e,3,r,Se.min(),Se.min(),Nn.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof fn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new fn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch{constructor(e,r){this.position=e,this.inclusive=r}}function Vb(t,e,r){let i=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?i=be.comparator(be.fromName(o.referenceValue),r.key):i=wo(o,r.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function Fb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Gr(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,r="asc"){this.field=e,this.dir=r}}function vV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K1{}class Nt extends K1{constructor(e,r,i){super(),this.field=e,this.op=r,this.value=i}static create(e,r,i){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,i):new _V(e,r,i):r==="array-contains"?new xV(e,i):r==="in"?new EV(e,i):r==="not-in"?new TV(e,i):r==="array-contains-any"?new SV(e,i):new Nt(e,r,i)}static createKeyFieldInFilter(e,r,i){return r==="in"?new wV(e,i):new bV(e,i)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(wo(r,this.value)):r!==null&&vs(this.value)===vs(r)&&this.matchesComparison(wo(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kr extends K1{constructor(e,r){super(),this.filters=e,this.op=r,this.ce=null}static create(e,r){return new Kr(e,r)}matches(e){return Y1(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function Y1(t){return t.op==="and"}function X1(t){return yV(t)&&Y1(t)}function yV(t){for(const e of t.filters)if(e instanceof Kr)return!1;return!0}function $g(t){if(t instanceof Nt)return t.field.canonicalString()+t.op.toString()+bo(t.value);if(X1(t))return t.filters.map(e=>$g(e)).join(",");{const e=t.filters.map(r=>$g(r)).join(",");return`${t.op}(${e})`}}function Q1(t,e){return t instanceof Nt?function(i,s){return s instanceof Nt&&i.op===s.op&&i.field.isEqual(s.field)&&Gr(i.value,s.value)}(t,e):t instanceof Kr?function(i,s){return s instanceof Kr&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((a,o,l)=>a&&Q1(o,s.filters[l]),!0):!1}(t,e):void Te()}function J1(t){return t instanceof Nt?function(r){return`${r.field.canonicalString()} ${r.op} ${bo(r.value)}`}(t):t instanceof Kr?function(r){return r.op.toString()+" {"+r.getFilters().map(J1).join(" ,")+"}"}(t):"Filter"}class _V extends Nt{constructor(e,r,i){super(e,r,i),this.key=be.fromName(i.referenceValue)}matches(e){const r=be.comparator(e.key,this.key);return this.matchesComparison(r)}}class wV extends Nt{constructor(e,r){super(e,"in",r),this.keys=Z1("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class bV extends Nt{constructor(e,r){super(e,"not-in",r),this.keys=Z1("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function Z1(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(i=>be.fromName(i.referenceValue))}class xV extends Nt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Wy(r)&&Ru(r.arrayValue,this.value)}}class EV extends Nt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Ru(this.value.arrayValue,r)}}class TV extends Nt{constructor(e,r){super(e,"not-in",r)}matches(e){if(Ru(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Ru(this.value.arrayValue,r)}}class SV extends Nt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Wy(r)||!r.arrayValue.values)&&r.arrayValue.values.some(i=>Ru(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{constructor(e,r=null,i=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.le=null}}function Ub(t,e=null,r=[],i=[],s=null,a=null,o=null){return new IV(t,e,r,i,s,a,o)}function qy(t){const e=ke(t);if(e.le===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(i=>$g(i)).join(","),r+="|ob:",r+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),Ef(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>bo(i)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>bo(i)).join(",")),e.le=r}return e.le}function Gy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!vV(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!Q1(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Fb(t.startAt,e.startAt)&&Fb(t.endAt,e.endAt)}function zg(t){return be.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e,r=null,i=[],s=[],a=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function kV(t,e,r,i,s,a,o,l){return new Sf(t,e,r,i,s,a,o,l)}function Ky(t){return new Sf(t)}function Bb(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function CV(t){return t.collectionGroup!==null}function Zl(t){const e=ke(t);if(e.he===null){e.he=[];const r=new Set;for(const a of e.explicitOrderBy)e.he.push(a),r.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ot(Qt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.he.push(new Ah(a,i))}),r.has(Qt.keyField().canonicalString())||e.he.push(new Ah(Qt.keyField(),i))}return e.he}function zr(t){const e=ke(t);return e.Pe||(e.Pe=AV(e,Zl(t))),e.Pe}function AV(t,e){if(t.limitType==="F")return Ub(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Ah(s.field,a)});const r=t.endAt?new Ch(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Ch(t.startAt.position,t.startAt.inclusive):null;return Ub(t.path,t.collectionGroup,e,t.filters,t.limit,r,i)}}function Hg(t,e,r){return new Sf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function If(t,e){return Gy(zr(t),zr(e))&&t.limitType===e.limitType}function ek(t){return`${qy(zr(t))}|lt:${t.limitType}`}function Ma(t){return`Query(target=${function(r){let i=r.path.canonicalString();return r.collectionGroup!==null&&(i+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(i+=`, filters: [${r.filters.map(s=>J1(s)).join(", ")}]`),Ef(r.limit)||(i+=", limit: "+r.limit),r.orderBy.length>0&&(i+=`, orderBy: [${r.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),r.startAt&&(i+=", startAt: ",i+=r.startAt.inclusive?"b:":"a:",i+=r.startAt.position.map(s=>bo(s)).join(",")),r.endAt&&(i+=", endAt: ",i+=r.endAt.inclusive?"a:":"b:",i+=r.endAt.position.map(s=>bo(s)).join(",")),`Target(${i})`}(zr(t))}; limitType=${t.limitType})`}function kf(t,e){return e.isFoundDocument()&&function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):be.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(t,e)&&function(i,s){for(const a of Zl(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(o,l,u){const c=Vb(o,l,u);return o.inclusive?c<=0:c<0}(i.startAt,Zl(i),s)||i.endAt&&!function(o,l,u){const c=Vb(o,l,u);return o.inclusive?c>=0:c>0}(i.endAt,Zl(i),s))}(t,e)}function PV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tk(t){return(e,r)=>{let i=!1;for(const s of Zl(t)){const a=RV(s,e,r);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function RV(t,e,r){const i=t.field.isKeyField()?be.comparator(e.key,r.key):function(a,o,l){const u=o.data.field(a),c=l.data.field(a);return u!==null&&c!==null?wo(u,c):Te()}(t.field,e,r);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,r]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[r]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ss(this.inner,(r,i)=>{for(const[s,a]of i)e(s,a)})}isEmpty(){return F1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NV=new bt(be.comparator);function bi(){return NV}const nk=new bt(be.comparator);function jl(...t){let e=nk;for(const r of t)e=e.insert(r.key,r);return e}function rk(t){let e=nk;return t.forEach((r,i)=>e=e.insert(r,i.overlayedDocument)),e}function Xs(){return eu()}function ik(){return eu()}function eu(){return new ma(t=>t.toString(),(t,e)=>t.isEqual(e))}const MV=new bt(be.comparator),LV=new Ot(be.comparator);function je(...t){let e=LV;for(const r of t)e=e.add(r);return e}const OV=new Ot(Ve);function jV(){return OV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sh(e)?"-0":e}}function sk(t){return{integerValue:""+t}}function VV(t,e){return uV(e)?sk(e):Yy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cf{constructor(){this._=void 0}}function FV(t,e,r){return t instanceof Ph?function(s,a){const o={fields:{[$1]:{stringValue:B1},[H1]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Hy(a)&&(a=Tf(a)),a&&(o.fields[z1]=a),{mapValue:o}}(r,e):t instanceof Du?ok(t,e):t instanceof Nu?lk(t,e):function(s,a){const o=ak(s,a),l=$b(o)+$b(s.Ie);return Bg(o)&&Bg(s.Ie)?sk(l):Yy(s.serializer,l)}(t,e)}function UV(t,e,r){return t instanceof Du?ok(t,e):t instanceof Nu?lk(t,e):r}function ak(t,e){return t instanceof Rh?function(i){return Bg(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class Ph extends Cf{}class Du extends Cf{constructor(e){super(),this.elements=e}}function ok(t,e){const r=uk(e);for(const i of t.elements)r.some(s=>Gr(s,i))||r.push(i);return{arrayValue:{values:r}}}class Nu extends Cf{constructor(e){super(),this.elements=e}}function lk(t,e){let r=uk(e);for(const i of t.elements)r=r.filter(s=>!Gr(s,i));return{arrayValue:{values:r}}}class Rh extends Cf{constructor(e,r){super(),this.serializer=e,this.Ie=r}}function $b(t){return It(t.integerValue||t.doubleValue)}function uk(t){return Wy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function BV(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Du&&s instanceof Du||i instanceof Nu&&s instanceof Nu?_o(i.elements,s.elements,Gr):i instanceof Rh&&s instanceof Rh?Gr(i.Ie,s.Ie):i instanceof Ph&&s instanceof Ph}(t.transform,e.transform)}class $V{constructor(e,r){this.version=e,this.transformResults=r}}class Hr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Hr}static exists(e){return new Hr(void 0,e)}static updateTime(e){return new Hr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Fd(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Af{}function ck(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hk(t.key,Hr.none()):new ec(t.key,t.data,Hr.none());{const r=t.data,i=Nn.empty();let s=new Ot(Qt.comparator);for(let a of e.fields)if(!s.has(a)){let o=r.field(a);o===null&&a.length>1&&(a=a.popLast(),o=r.field(a)),o===null?i.delete(a):i.set(a,o),s=s.add(a)}return new Is(t.key,i,new zn(s.toArray()),Hr.none())}}function zV(t,e,r){t instanceof ec?function(s,a,o){const l=s.value.clone(),u=Hb(s.fieldTransforms,a,o.transformResults);l.setAll(u),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Is?function(s,a,o){if(!Fd(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=Hb(s.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(dk(s)),u.setAll(l),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,r):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function tu(t,e,r,i){return t instanceof ec?function(a,o,l,u){if(!Fd(a.precondition,o))return l;const c=a.value.clone(),h=Wb(a.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,r,i):t instanceof Is?function(a,o,l,u){if(!Fd(a.precondition,o))return l;const c=Wb(a.fieldTransforms,u,o),h=o.data;return h.setAll(dk(a)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(f=>f.field))}(t,e,r,i):function(a,o,l){return Fd(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function HV(t,e){let r=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),a=ak(i.transform,s||null);a!=null&&(r===null&&(r=Nn.empty()),r.set(i.field,a))}return r||null}function zb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&_o(i,s,(a,o)=>BV(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ec extends Af{constructor(e,r,i,s=[]){super(),this.key=e,this.value=r,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Is extends Af{constructor(e,r,i,s,a=[]){super(),this.key=e,this.data=r,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function dk(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const i=t.data.field(r);e.set(r,i)}}),e}function Hb(t,e,r){const i=new Map;Qe(t.length===r.length);for(let s=0;s<r.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);i.set(a.field,UV(o,l,r[s]))}return i}function Wb(t,e,r){const i=new Map;for(const s of t){const a=s.transform,o=r.data.field(s.field);i.set(s.field,FV(a,o,e))}return i}class hk extends Af{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class WV extends Af{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qV{constructor(e,r,i,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,r){const i=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&zV(a,e,i[s])}}applyToLocalView(e,r){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(r=tu(i,e,r,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(r=tu(i,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const i=ik();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=r.has(s.key)?null:l;const u=ck(o,l);u!==null&&i.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Se.min())}),i}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),je())}isEqual(e){return this.batchId===e.batchId&&_o(this.mutations,e.mutations,(r,i)=>zb(r,i))&&_o(this.baseMutations,e.baseMutations,(r,i)=>zb(r,i))}}class Xy{constructor(e,r,i,s){this.batch=e,this.commitVersion=r,this.mutationResults=i,this.docVersions=s}static from(e,r,i){Qe(e.mutations.length===i.length);let s=function(){return MV}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,i[o].version);return new Xy(e,r,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GV{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,Be;function YV(t){switch(t){case te.OK:return Te();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Te()}}function fk(t){if(t===void 0)return wi("GRPC error has no .code"),te.UNKNOWN;switch(t){case Ct.OK:return te.OK;case Ct.CANCELLED:return te.CANCELLED;case Ct.UNKNOWN:return te.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return te.INTERNAL;case Ct.UNAVAILABLE:return te.UNAVAILABLE;case Ct.UNAUTHENTICATED:return te.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case Ct.NOT_FOUND:return te.NOT_FOUND;case Ct.ALREADY_EXISTS:return te.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return te.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case Ct.ABORTED:return te.ABORTED;case Ct.OUT_OF_RANGE:return te.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return te.UNIMPLEMENTED;case Ct.DATA_LOSS:return te.DATA_LOSS;default:return Te()}}(Be=Ct||(Ct={}))[Be.OK=0]="OK",Be[Be.CANCELLED=1]="CANCELLED",Be[Be.UNKNOWN=2]="UNKNOWN",Be[Be.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Be[Be.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Be[Be.NOT_FOUND=5]="NOT_FOUND",Be[Be.ALREADY_EXISTS=6]="ALREADY_EXISTS",Be[Be.PERMISSION_DENIED=7]="PERMISSION_DENIED",Be[Be.UNAUTHENTICATED=16]="UNAUTHENTICATED",Be[Be.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Be[Be.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Be[Be.ABORTED=10]="ABORTED",Be[Be.OUT_OF_RANGE=11]="OUT_OF_RANGE",Be[Be.UNIMPLEMENTED=12]="UNIMPLEMENTED",Be[Be.INTERNAL=13]="INTERNAL",Be[Be.UNAVAILABLE=14]="UNAVAILABLE",Be[Be.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QV=new as([4294967295,4294967295],0);function qb(t){const e=XV().encode(t),r=new P1;return r.update(e),new Uint8Array(r.digest())}function Gb(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new as([r,i],0),new as([s,a],0)]}class Qy{constructor(e,r,i){if(this.bitmap=e,this.padding=r,this.hashCount=i,r<0||r>=8)throw new Vl(`Invalid padding: ${r}`);if(i<0)throw new Vl(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Vl(`Invalid hash count: ${i}`);if(e.length===0&&r!==0)throw new Vl(`Invalid padding when bitmap length is 0: ${r}`);this.Ee=8*e.length-r,this.de=as.fromNumber(this.Ee)}Ae(e,r,i){let s=e.add(r.multiply(as.fromNumber(i)));return s.compare(QV)===1&&(s=new as([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const r=qb(e),[i,s]=Gb(r);for(let a=0;a<this.hashCount;a++){const o=this.Ae(i,s,a);if(!this.Re(o))return!1}return!0}static create(e,r,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new Qy(a,s,r);return i.forEach(l=>o.insert(l)),o}insert(e){if(this.Ee===0)return;const r=qb(e),[i,s]=Gb(r);for(let a=0;a<this.hashCount;a++){const o=this.Ae(i,s,a);this.Ve(o)}}Ve(e){const r=Math.floor(e/8),i=e%8;this.bitmap[r]|=1<<i}}class Vl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,r,i,s,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,i){const s=new Map;return s.set(e,tc.createSynthesizedTargetChangeForCurrentChange(e,r,i)),new Pf(Se.min(),s,new bt(Ve),bi(),je())}}class tc{constructor(e,r,i,s,a){this.resumeToken=e,this.current=r,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,i){return new tc(i,r,je(),je(),je())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{constructor(e,r,i,s){this.me=e,this.removedTargetIds=r,this.key=i,this.fe=s}}class pk{constructor(e,r){this.targetId=e,this.ge=r}}class mk{constructor(e,r,i=nn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=i,this.cause=s}}class Kb{constructor(){this.pe=0,this.ye=Yb(),this.we=nn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=je(),r=je(),i=je();return this.ye.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:i=i.add(s);break;default:Te()}}),new tc(this.we,this.Se,e,r,i)}Me(){this.be=!1,this.ye=Yb()}xe(e,r){this.be=!0,this.ye=this.ye.insert(e,r)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Qe(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class JV{constructor(e){this.ke=e,this.qe=new Map,this.Qe=bi(),this.$e=ad(),this.Ke=ad(),this.Ue=new bt(Ve)}We(e){for(const r of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(r,e.fe):this.ze(r,e.key,e.fe);for(const r of e.removedTargetIds)this.ze(r,e.key,e.fe)}je(e){this.forEachTarget(e,r=>{const i=this.He(r);switch(e.state){case 0:this.Je(r)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(r);break;case 3:this.Je(r)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(r)&&(this.Ye(r),i.Ce(e.resumeToken));break;default:Te()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.qe.forEach((i,s)=>{this.Je(s)&&r(s)})}Ze(e){const r=e.targetId,i=e.ge.count,s=this.Xe(r);if(s){const a=s.target;if(zg(a))if(i===0){const o=new be(a.path);this.ze(r,o,fn.newNoDocument(o,Se.min()))}else Qe(i===1);else{const o=this.et(r);if(o!==i){const l=this.tt(e),u=l?this.nt(l,e,o):1;if(u!==0){this.Ye(r);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(r,c)}}}}}tt(e){const r=e.ge.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=r;let o,l;try{o=gs(i).toUint8Array()}catch(u){if(u instanceof U1)return yo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Qy(o,s,a)}catch(u){return yo(u instanceof Vl?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ee===0?null:l}nt(e,r,i){return r.ge.count===i-this.st(e,r.targetId)?0:2}st(e,r){const i=this.ke.getRemoteKeysForTarget(r);let s=0;return i.forEach(a=>{const o=this.ke.it(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.ze(r,a,null),s++)}),s}ot(e){const r=new Map;this.qe.forEach((a,o)=>{const l=this.Xe(o);if(l){if(a.current&&zg(l.target)){const u=new be(l.target.path);this._t(u).has(o)||this.ut(o,u)||this.ze(o,u,fn.newNoDocument(u,e))}a.ve&&(r.set(o,a.Fe()),a.Me())}});let i=je();this.Ke.forEach((a,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Xe(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(a))}),this.Qe.forEach((a,o)=>o.setReadTime(e));const s=new Pf(e,r,this.Ue,this.Qe,i);return this.Qe=bi(),this.$e=ad(),this.Ke=ad(),this.Ue=new bt(Ve),s}Ge(e,r){if(!this.Je(e))return;const i=this.ut(e,r.key)?2:0;this.He(e).xe(r.key,i),this.Qe=this.Qe.insert(r.key,r),this.$e=this.$e.insert(r.key,this._t(r.key).add(e)),this.Ke=this.Ke.insert(r.key,this.ct(r.key).add(e))}ze(e,r,i){if(!this.Je(e))return;const s=this.He(e);this.ut(e,r)?s.xe(r,1):s.Oe(r),this.Ke=this.Ke.insert(r,this.ct(r).delete(e)),this.Ke=this.Ke.insert(r,this.ct(r).add(e)),i&&(this.Qe=this.Qe.insert(r,i))}removeTarget(e){this.qe.delete(e)}et(e){const r=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let r=this.qe.get(e);return r||(r=new Kb,this.qe.set(e,r)),r}ct(e){let r=this.Ke.get(e);return r||(r=new Ot(Ve),this.Ke=this.Ke.insert(e,r)),r}_t(e){let r=this.$e.get(e);return r||(r=new Ot(Ve),this.$e=this.$e.insert(e,r)),r}Je(e){const r=this.Xe(e)!==null;return r||fe("WatchChangeAggregator","Detected inactive target",e),r}Xe(e){const r=this.qe.get(e);return r&&r.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new Kb),this.ke.getRemoteKeysForTarget(e).forEach(r=>{this.ze(e,r,null)})}ut(e,r){return this.ke.getRemoteKeysForTarget(e).has(r)}}function ad(){return new bt(be.comparator)}function Yb(){return new bt(be.comparator)}const ZV={asc:"ASCENDING",desc:"DESCENDING"},eF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tF={and:"AND",or:"OR"};class nF{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Wg(t,e){return t.useProto3Json||Ef(e)?e:{value:e}}function Dh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function rF(t,e){return Dh(t,e.toTimestamp())}function Wr(t){return Qe(!!t),Se.fromTimestamp(function(r){const i=ms(r);return new Lt(i.seconds,i.nanos)}(t))}function Jy(t,e){return qg(t,e).canonicalString()}function qg(t,e){const r=function(s){return new pt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function vk(t){const e=pt.fromString(t);return Qe(xk(e)),e}function Gg(t,e){return Jy(t.databaseId,e.path)}function tm(t,e){const r=vk(e);if(r.get(1)!==t.databaseId.projectId)throw new ye(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ye(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new be(_k(r))}function yk(t,e){return Jy(t.databaseId,e)}function iF(t){const e=vk(t);return e.length===4?pt.emptyPath():_k(e)}function Kg(t){return new pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function _k(t){return Qe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Xb(t,e,r){return{name:Gg(t,e),fields:r.value.mapValue.fields}}function sF(t,e){let r;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(c,h){return c.useProto3Json?(Qe(h===void 0||typeof h=="string"),nn.fromBase64String(h||"")):(Qe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),nn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const h=c.code===void 0?te.UNKNOWN:fk(c.code);return new ye(h,c.message||"")}(o);r=new mk(i,s,a,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=tm(t,i.document.name),a=Wr(i.document.updateTime),o=i.document.createTime?Wr(i.document.createTime):Se.min(),l=new Nn({mapValue:{fields:i.document.fields}}),u=fn.newFoundDocument(s,a,o,l),c=i.targetIds||[],h=i.removedTargetIds||[];r=new Ud(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=tm(t,i.document),a=i.readTime?Wr(i.readTime):Se.min(),o=fn.newNoDocument(s,a),l=i.removedTargetIds||[];r=new Ud([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=tm(t,i.document),a=i.removedTargetIds||[];r=new Ud([],a,s,null)}else{if(!("filter"in e))return Te();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,o=new KV(s,a),l=i.targetId;r=new pk(l,o)}}return r}function aF(t,e){let r;if(e instanceof ec)r={update:Xb(t,e.key,e.value)};else if(e instanceof hk)r={delete:Gg(t,e.key)};else if(e instanceof Is)r={update:Xb(t,e.key,e.data),updateMask:mF(e.fieldMask)};else{if(!(e instanceof WV))return Te();r={verify:Gg(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(i=>function(a,o){const l=o.transform;if(l instanceof Ph)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Du)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Nu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Rh)return{fieldPath:o.field.canonicalString(),increment:l.Ie};throw Te()}(0,i))),e.precondition.isNone||(r.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:rF(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Te()}(t,e.precondition)),r}function oF(t,e){return t&&t.length>0?(Qe(e!==void 0),t.map(r=>function(s,a){let o=s.updateTime?Wr(s.updateTime):Wr(a);return o.isEqual(Se.min())&&(o=Wr(a)),new $V(o,s.transformResults||[])}(r,e))):[]}function lF(t,e){return{documents:[yk(t,e.path)]}}function uF(t,e){const r={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),r.structuredQuery.from=[{collectionId:i.lastSegment()}]),r.parent=yk(t,s);const a=function(c){if(c.length!==0)return bk(Kr.create(c,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const o=function(c){if(c.length!==0)return c.map(h=>function(p){return{field:La(p.field),direction:hF(p.dir)}}(h))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=Wg(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ht:r,parent:s}}function cF(t){let e=iF(t.parent);const r=t.structuredQuery,i=r.from?r.from.length:0;let s=null;if(i>0){Qe(i===1);const h=r.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let a=[];r.where&&(a=function(f){const p=wk(f);return p instanceof Kr&&X1(p)?p.getFilters():[p]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(p=>function(_){return new Ah(Oa(_.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(r.orderBy));let l=null;r.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,Ef(p)?null:p}(r.limit));let u=null;r.startAt&&(u=function(f){const p=!!f.before,g=f.values||[];return new Ch(g,p)}(r.startAt));let c=null;return r.endAt&&(c=function(f){const p=!f.before,g=f.values||[];return new Ch(g,p)}(r.endAt)),kV(e,s,o,a,l,"F",u,c)}function dF(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function wk(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const i=Oa(r.unaryFilter.field);return Nt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Oa(r.unaryFilter.field);return Nt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=Oa(r.unaryFilter.field);return Nt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Oa(r.unaryFilter.field);return Nt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(t):t.fieldFilter!==void 0?function(r){return Nt.create(Oa(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Kr.create(r.compositeFilter.filters.map(i=>wk(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Te()}}(r.compositeFilter.op))}(t):Te()}function hF(t){return ZV[t]}function fF(t){return eF[t]}function pF(t){return tF[t]}function La(t){return{fieldPath:t.canonicalString()}}function Oa(t){return Qt.fromServerFormat(t.fieldPath)}function bk(t){return t instanceof Nt?function(r){if(r.op==="=="){if(jb(r.value))return{unaryFilter:{field:La(r.field),op:"IS_NAN"}};if(Ob(r.value))return{unaryFilter:{field:La(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(jb(r.value))return{unaryFilter:{field:La(r.field),op:"IS_NOT_NAN"}};if(Ob(r.value))return{unaryFilter:{field:La(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:La(r.field),op:fF(r.op),value:r.value}}}(t):t instanceof Kr?function(r){const i=r.getFilters().map(s=>bk(s));return i.length===1?i[0]:{compositeFilter:{op:pF(r.op),filters:i}}}(t):Te()}function mF(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function xk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e,r,i,s,a=Se.min(),o=Se.min(),l=nn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Gi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Gi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e){this.Tt=e}}function vF(t){const e=cF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Hg(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(){this.Tn=new _F}addToCollectionParentIndex(e,r){return this.Tn.add(r),Z.resolve()}getCollectionParents(e,r){return Z.resolve(this.Tn.getEntries(r))}addFieldIndex(e,r){return Z.resolve()}deleteFieldIndex(e,r){return Z.resolve()}deleteAllFieldIndexes(e){return Z.resolve()}createTargetIndexes(e,r){return Z.resolve()}getDocumentsMatchingTarget(e,r){return Z.resolve(null)}getIndexType(e,r){return Z.resolve(0)}getFieldIndexes(e,r){return Z.resolve([])}getNextCollectionGroupToUpdate(e){return Z.resolve(null)}getMinOffset(e,r){return Z.resolve(ps.min())}getMinOffsetFromCollectionGroup(e,r){return Z.resolve(ps.min())}updateCollectionGroup(e,r,i){return Z.resolve()}updateIndexEntries(e,r){return Z.resolve()}}class _F{constructor(){this.index={}}add(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r]||new Ot(pt.comparator),a=!s.has(i);return this.index[r]=s.add(i),a}has(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Ot(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ek=41943040;class Rn{static withCacheSize(e){return new Rn(e,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn.DEFAULT_COLLECTION_PERCENTILE=10,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Rn.DEFAULT=new Rn(Ek,Rn.DEFAULT_COLLECTION_PERCENTILE,Rn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Rn.DISABLED=new Rn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new xo(0)}static Un(){return new xo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="LruGarbageCollector",wF=1048576;function Zb([t,e],[r,i]){const s=Ve(t,r);return s===0?Ve(e,i):s}class bF{constructor(e){this.Hn=e,this.buffer=new Ot(Zb),this.Jn=0}Yn(){return++this.Jn}Zn(e){const r=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(r);else{const i=this.buffer.last();Zb(r,i)<0&&(this.buffer=this.buffer.delete(i).add(r))}}get maxValue(){return this.buffer.last()[0]}}class xF{constructor(e,r,i){this.garbageCollector=e,this.asyncQueue=r,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){fe(Jb,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){Ho(r)?fe(Jb,"Ignoring IndexedDB error during garbage collection: ",r):await zo(r)}await this.er(3e5)})}}class EF{constructor(e,r){this.tr=e,this.params=r}calculateTargetCount(e,r){return this.tr.nr(e).next(i=>Math.floor(r/100*i))}nthSequenceNumber(e,r){if(r===0)return Z.resolve(xf.ae);const i=new bF(r);return this.tr.forEachTarget(e,s=>i.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>i.Zn(s))).next(()=>i.maxValue)}removeTargets(e,r,i){return this.tr.removeTargets(e,r,i)}removeOrphanedDocuments(e,r){return this.tr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),Z.resolve(Qb)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qb):this.ir(e,r))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,r){let i,s,a,o,l,u,c;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(i=f,l=Date.now(),this.removeTargets(e,i,r))).next(f=>(a=f,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(f=>(c=Date.now(),Na()<=Oe.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${a} targets in `+(u-l)+`ms
	Removed ${f} documents in `+(c-u)+`ms
Total Duration: ${c-h}ms`),Z.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:f})))}}function TF(t,e){return new EF(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SF{constructor(){this.changes=new ma(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,fn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const i=this.changes.get(r);return i!==void 0?Z.resolve(i):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IF{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kF{constructor(e,r,i,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,r){let i=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(i!==null&&tu(i.mutation,s,zn.empty(),Lt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.getLocalViewOfDocuments(e,i,je()).next(()=>i))}getLocalViewOfDocuments(e,r,i=je()){const s=Xs();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,i).next(a=>{let o=jl();return a.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const i=Xs();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,je()))}populateOverlays(e,r,i){const s=[];return i.forEach(a=>{r.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,i,s){let a=bi();const o=eu(),l=function(){return eu()}();return r.forEach((u,c)=>{const h=i.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof Is)?a=a.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),tu(h.mutation,c,h.mutation.getFieldMask(),Lt.now())):o.set(c.key,zn.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((c,h)=>o.set(c,h)),r.forEach((c,h)=>{var f;return l.set(c,new IF(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,r){const i=eu();let s=new bt((o,l)=>o-l),a=je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=r.get(u);if(c===null)return;let h=i.get(u)||zn.empty();h=l.applyToLocalView(c,h),i.set(u,h);const f=(s.get(l.batchId)||je()).add(u);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,h=u.value,f=ik();h.forEach(p=>{if(!a.has(p)){const g=ck(r.get(p),i.get(p));g!==null&&f.set(p,g),a=a.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return Z.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,r,i,s){return function(o){return be.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):CV(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,i,s):this.getDocumentsMatchingCollectionQuery(e,r,i,s)}getNextDocuments(e,r,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,i,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,i.largestBatchId,s-a.size):Z.resolve(Xs());let l=Cu,u=a;return o.next(c=>Z.forEach(c,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),a.get(h)?Z.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,c,a)).next(()=>this.computeViews(e,u,c,je())).next(h=>({batchId:l,changes:rk(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new be(r)).next(i=>{let s=jl();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,i,s){const a=r.collectionGroup;let o=jl();return this.indexManager.getCollectionParents(e,a).next(l=>Z.forEach(l,u=>{const c=function(f,p){return new Sf(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,c,i,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,i.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,i,a,s))).next(o=>{a.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,fn.newInvalidDocument(h)))});let l=jl();return o.forEach((u,c)=>{const h=a.get(u);h!==void 0&&tu(h.mutation,c,zn.empty(),Lt.now()),kf(r,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CF{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,r){return Z.resolve(this.dr.get(r))}saveBundleMetadata(e,r){return this.dr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Wr(s.createTime)}}(r)),Z.resolve()}getNamedQuery(e,r){return Z.resolve(this.Ar.get(r))}saveNamedQuery(e,r){return this.Ar.set(r.name,function(s){return{name:s.name,query:vF(s.bundledQuery),readTime:Wr(s.readTime)}}(r)),Z.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AF{constructor(){this.overlays=new bt(be.comparator),this.Rr=new Map}getOverlay(e,r){return Z.resolve(this.overlays.get(r))}getOverlays(e,r){const i=Xs();return Z.forEach(r,s=>this.getOverlay(e,s).next(a=>{a!==null&&i.set(s,a)})).next(()=>i)}saveOverlays(e,r,i){return i.forEach((s,a)=>{this.Et(e,r,a)}),Z.resolve()}removeOverlaysForBatchId(e,r,i){const s=this.Rr.get(i);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Rr.delete(i)),Z.resolve()}getOverlaysForCollection(e,r,i){const s=Xs(),a=r.length+1,o=new be(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!r.isPrefixOf(c.path))break;c.path.length===a&&u.largestBatchId>i&&s.set(u.getKey(),u)}return Z.resolve(s)}getOverlaysForCollectionGroup(e,r,i,s){let a=new bt((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===r&&c.largestBatchId>i){let h=a.get(c.largestBatchId);h===null&&(h=Xs(),a=a.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const l=Xs(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>l.set(c,h)),!(l.size()>=s)););return Z.resolve(l)}Et(e,r,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.Rr.get(s.largestBatchId).delete(i.key);this.Rr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new GV(r,i));let a=this.Rr.get(r);a===void 0&&(a=je(),this.Rr.set(r,a)),this.Rr.set(r,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PF{constructor(){this.sessionToken=nn.EMPTY_BYTE_STRING}getSessionToken(e){return Z.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Z.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zy{constructor(){this.Vr=new Ot(Ft.mr),this.gr=new Ot(Ft.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,r){const i=new Ft(e,r);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,r){e.forEach(i=>this.addReference(i,r))}removeReference(e,r){this.wr(new Ft(e,r))}Sr(e,r){e.forEach(i=>this.removeReference(i,r))}br(e){const r=new be(new pt([])),i=new Ft(r,e),s=new Ft(r,e+1),a=[];return this.gr.forEachInRange([i,s],o=>{this.wr(o),a.push(o.key)}),a}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const r=new be(new pt([])),i=new Ft(r,e),s=new Ft(r,e+1);let a=je();return this.gr.forEachInRange([i,s],o=>{a=a.add(o.key)}),a}containsKey(e){const r=new Ft(e,0),i=this.Vr.firstAfterOrEqual(r);return i!==null&&e.isEqual(i.key)}}class Ft{constructor(e,r){this.key=e,this.Cr=r}static mr(e,r){return be.comparator(e.key,r.key)||Ve(e.Cr,r.Cr)}static pr(e,r){return Ve(e.Cr,r.Cr)||be.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Fr=1,this.Mr=new Ot(Ft.mr)}checkEmpty(e){return Z.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,i,s){const a=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new qV(a,r,i,s);this.mutationQueue.push(o);for(const l of s)this.Mr=this.Mr.add(new Ft(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return Z.resolve(o)}lookupMutationBatch(e,r){return Z.resolve(this.Or(r))}getNextMutationBatchAfterBatchId(e,r){const i=r+1,s=this.Nr(i),a=s<0?0:s;return Z.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Z.resolve(this.mutationQueue.length===0?zy:this.Fr-1)}getAllMutationBatches(e){return Z.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const i=new Ft(r,0),s=new Ft(r,Number.POSITIVE_INFINITY),a=[];return this.Mr.forEachInRange([i,s],o=>{const l=this.Or(o.Cr);a.push(l)}),Z.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let i=new Ot(Ve);return r.forEach(s=>{const a=new Ft(s,0),o=new Ft(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([a,o],l=>{i=i.add(l.Cr)})}),Z.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,r){const i=r.path,s=i.length+1;let a=i;be.isDocumentKey(a)||(a=a.child(""));const o=new Ft(new be(a),0);let l=new Ot(Ve);return this.Mr.forEachWhile(u=>{const c=u.key.path;return!!i.isPrefixOf(c)&&(c.length===s&&(l=l.add(u.Cr)),!0)},o),Z.resolve(this.Br(l))}Br(e){const r=[];return e.forEach(i=>{const s=this.Or(i);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Qe(this.Lr(r.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return Z.forEach(r.mutations,s=>{const a=new Ft(s.key,r.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,r){const i=new Ft(r,0),s=this.Mr.firstAfterOrEqual(i);return Z.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Z.resolve()}Lr(e,r){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const r=this.Nr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DF{constructor(e){this.kr=e,this.docs=function(){return new bt(be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const i=r.key,s=this.docs.get(i),a=s?s.size:0,o=this.kr(r);return this.docs=this.docs.insert(i,{document:r.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const i=this.docs.get(r);return Z.resolve(i?i.document.mutableCopy():fn.newInvalidDocument(r))}getEntries(e,r){let i=bi();return r.forEach(s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():fn.newInvalidDocument(s))}),Z.resolve(i)}getDocumentsMatchingQuery(e,r,i,s){let a=bi();const o=r.path,l=new be(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||sV(iV(h),i)<=0||(s.has(h.key)||kf(r,h))&&(a=a.insert(h.key,h.mutableCopy()))}return Z.resolve(a)}getAllFromCollectionGroup(e,r,i,s){Te()}qr(e,r){return Z.forEach(this.docs,i=>r(i))}newChangeBuffer(e){return new NF(this)}getSize(e){return Z.resolve(this.size)}}class NF extends SF{constructor(e){super(),this.Ir=e}applyChanges(e){const r=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?r.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(i)}),Z.waitFor(r)}getFromCache(e,r){return this.Ir.getEntry(e,r)}getAllFromCache(e,r){return this.Ir.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MF{constructor(e){this.persistence=e,this.Qr=new ma(r=>qy(r),Gy),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Zy,this.targetCount=0,this.Ur=xo.Kn()}forEachTarget(e,r){return this.Qr.forEach((i,s)=>r(s)),Z.resolve()}getLastRemoteSnapshotVersion(e){return Z.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Z.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),Z.resolve(this.highestTargetId)}setTargetsMetadata(e,r,i){return i&&(this.lastRemoteSnapshotVersion=i),r>this.$r&&(this.$r=r),Z.resolve()}zn(e){this.Qr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Ur=new xo(r),this.highestTargetId=r),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,r){return this.zn(r),this.targetCount+=1,Z.resolve()}updateTargetData(e,r){return this.zn(r),Z.resolve()}removeTargetData(e,r){return this.Qr.delete(r.target),this.Kr.br(r.targetId),this.targetCount-=1,Z.resolve()}removeTargets(e,r,i){let s=0;const a=[];return this.Qr.forEach((o,l)=>{l.sequenceNumber<=r&&i.get(l.targetId)===null&&(this.Qr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),Z.waitFor(a).next(()=>s)}getTargetCount(e){return Z.resolve(this.targetCount)}getTargetData(e,r){const i=this.Qr.get(r)||null;return Z.resolve(i)}addMatchingKeys(e,r,i){return this.Kr.yr(r,i),Z.resolve()}removeMatchingKeys(e,r,i){this.Kr.Sr(r,i);const s=this.persistence.referenceDelegate,a=[];return s&&r.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),Z.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this.Kr.br(r),Z.resolve()}getMatchingKeysForTargetId(e,r){const i=this.Kr.vr(r);return Z.resolve(i)}containsKey(e,r){return Z.resolve(this.Kr.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(e,r){this.Wr={},this.overlays={},this.Gr=new xf(0),this.zr=!1,this.zr=!0,this.jr=new PF,this.referenceDelegate=e(this),this.Hr=new MF(this),this.indexManager=new yF,this.remoteDocumentCache=function(s){return new DF(s)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new gF(r),this.Yr=new CF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new AF,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let i=this.Wr[e.toKey()];return i||(i=new RF(r,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,r,i){fe("MemoryPersistence","Starting transaction:",e);const s=new LF(this.Gr.next());return this.referenceDelegate.Zr(),i(s).next(a=>this.referenceDelegate.Xr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}ei(e,r){return Z.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,r)))}}class LF extends oV{constructor(e){super(),this.currentSequenceNumber=e}}class e_{constructor(e){this.persistence=e,this.ti=new Zy,this.ni=null}static ri(e){return new e_(e)}get ii(){if(this.ni)return this.ni;throw Te()}addReference(e,r,i){return this.ti.addReference(i,r),this.ii.delete(i.toString()),Z.resolve()}removeReference(e,r,i){return this.ti.removeReference(i,r),this.ii.add(i.toString()),Z.resolve()}markPotentiallyOrphaned(e,r){return this.ii.add(r.toString()),Z.resolve()}removeTarget(e,r){this.ti.br(r.targetId).forEach(s=>this.ii.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(a=>this.ii.add(a.toString()))}).next(()=>i.removeTargetData(e,r))}Zr(){this.ni=new Set}Xr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Z.forEach(this.ii,i=>{const s=be.fromPath(i);return this.si(e,s).next(a=>{a||r.removeEntry(s,Se.min())})}).next(()=>(this.ni=null,r.apply(e)))}updateLimboDocument(e,r){return this.si(e,r).next(i=>{i?this.ii.delete(r.toString()):this.ii.add(r.toString())})}Jr(e){return 0}si(e,r){return Z.or([()=>Z.resolve(this.ti.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.ei(e,r)])}}class Nh{constructor(e,r){this.persistence=e,this.oi=new ma(i=>cV(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=TF(this,r)}static ri(e,r){return new Nh(e,r)}Zr(){}Xr(e){return Z.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}nr(e){const r=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>r.next(s=>i+s))}sr(e){let r=0;return this.rr(e,i=>{r++}).next(()=>r)}rr(e,r){return Z.forEach(this.oi,(i,s)=>this.ar(e,i,s).next(a=>a?Z.resolve():r(s)))}removeTargets(e,r,i){return this.persistence.getTargetCache().removeTargets(e,r,i)}removeOrphanedDocuments(e,r){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.qr(e,o=>this.ar(e,o,r).next(l=>{l||(i++,a.removeEntry(o,Se.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,r){return this.oi.set(r,e.currentSequenceNumber),Z.resolve()}removeTarget(e,r){const i=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,r,i){return this.oi.set(i,e.currentSequenceNumber),Z.resolve()}removeReference(e,r,i){return this.oi.set(i,e.currentSequenceNumber),Z.resolve()}updateLimboDocument(e,r){return this.oi.set(r,e.currentSequenceNumber),Z.resolve()}Jr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=jd(e.data.value)),r}ar(e,r,i){return Z.or([()=>this.persistence.ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.oi.get(r);return Z.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t_{constructor(e,r,i,s){this.targetId=e,this.fromCache=r,this.Hi=i,this.Ji=s}static Yi(e,r){let i=je(),s=je();for(const a of r.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new t_(e,r.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jF{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return gM()?8:lV(gn())>0?6:4}()}initialize(e,r){this.ns=e,this.indexManager=r,this.Zi=!0}getDocumentsMatchingQuery(e,r,i,s){const a={result:null};return this.rs(e,r).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ss(e,r,s,i).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new OF;return this._s(e,r,o).next(l=>{if(a.result=l,this.Xi)return this.us(e,r,o,l.size)})}).next(()=>a.result)}us(e,r,i,s){return i.documentReadCount<this.es?(Na()<=Oe.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Ma(r),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Z.resolve()):(Na()<=Oe.DEBUG&&fe("QueryEngine","Query:",Ma(r),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ts*s?(Na()<=Oe.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Ma(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,zr(r))):Z.resolve())}rs(e,r){if(Bb(r))return Z.resolve(null);let i=zr(r);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Hg(r,null,"F"),i=zr(r)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const o=je(...a);return this.ns.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const c=this.cs(r,l);return this.ls(r,c,o,u.readTime)?this.rs(e,Hg(r,null,"F")):this.hs(e,c,r,u)}))})))}ss(e,r,i,s){return Bb(r)||s.isEqual(Se.min())?Z.resolve(null):this.ns.getDocuments(e,i).next(a=>{const o=this.cs(r,a);return this.ls(r,o,i,s)?Z.resolve(null):(Na()<=Oe.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ma(r)),this.hs(e,o,r,rV(s,Cu)).next(l=>l))})}cs(e,r){let i=new Ot(tk(e));return r.forEach((s,a)=>{kf(e,a)&&(i=i.add(a))}),i}ls(e,r,i,s){if(e.limit===null)return!1;if(i.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}_s(e,r,i){return Na()<=Oe.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Ma(r)),this.ns.getDocumentsMatchingQuery(e,r,ps.min(),i)}hs(e,r,i,s){return this.ns.getDocumentsMatchingQuery(e,i,s).next(a=>(r.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_="LocalStore",VF=3e8;class FF{constructor(e,r,i,s){this.persistence=e,this.Ps=r,this.serializer=s,this.Ts=new bt(Ve),this.Is=new ma(a=>qy(a),Gy),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new kF(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ts))}}function UF(t,e,r,i){return new FF(t,e,r,i)}async function Sk(t,e){const r=ke(t);return await r.persistence.runTransaction("Handle user change","readonly",i=>{let s;return r.mutationQueue.getAllMutationBatches(i).next(a=>(s=a,r.As(e),r.mutationQueue.getAllMutationBatches(i))).next(a=>{const o=[],l=[];let u=je();for(const c of s){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of a){l.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return r.localDocuments.getDocuments(i,u).next(c=>({Rs:c,removedBatchIds:o,addedBatchIds:l}))})})}function BF(t,e){const r=ke(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),a=r.ds.newChangeBuffer({trackRemovals:!0});return function(l,u,c,h){const f=c.batch,p=f.keys();let g=Z.resolve();return p.forEach(_=>{g=g.next(()=>h.getEntry(u,_)).next(A=>{const R=c.docVersions.get(_);Qe(R!==null),A.version.compareTo(R)<0&&(f.applyToRemoteDocument(A,c),A.isValidDocument()&&(A.setReadTime(c.commitVersion),h.addEntry(A)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(u,f))}(r,i,e,a).next(()=>a.apply(i)).next(()=>r.mutationQueue.performConsistencyCheck(i)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=je();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>r.localDocuments.getDocuments(i,s))})}function Ik(t){const e=ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Hr.getLastRemoteSnapshotVersion(r))}function $F(t,e){const r=ke(t),i=e.snapshotVersion;let s=r.Ts;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=r.ds.newChangeBuffer({trackRemovals:!0});s=r.Ts;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(r.Hr.removeMatchingKeys(a,h.removedDocuments,f).next(()=>r.Hr.addMatchingKeys(a,h.addedDocuments,f)));let g=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(nn.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,i)),s=s.insert(f,g),function(A,R,E){return A.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=VF?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(p,g,h)&&l.push(r.Hr.updateTargetData(a,g))});let u=bi(),c=je();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(a,h))}),l.push(zF(a,o,e.documentUpdates).next(h=>{u=h.Vs,c=h.fs})),!i.isEqual(Se.min())){const h=r.Hr.getLastRemoteSnapshotVersion(a).next(f=>r.Hr.setTargetsMetadata(a,a.currentSequenceNumber,i));l.push(h)}return Z.waitFor(l).next(()=>o.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,u,c)).next(()=>u)}).then(a=>(r.Ts=s,a))}function zF(t,e,r){let i=je(),s=je();return r.forEach(a=>i=i.add(a)),e.getEntries(t,i).next(a=>{let o=bi();return r.forEach((l,u)=>{const c=a.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Se.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):fe(n_,"Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Vs:o,fs:s}})}function HF(t,e){const r=ke(t);return r.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=zy),r.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function WF(t,e){const r=ke(t);return r.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return r.Hr.getTargetData(i,e).next(a=>a?(s=a,Z.resolve(s)):r.Hr.allocateTargetId(i).next(o=>(s=new Gi(e,o,"TargetPurposeListen",i.currentSequenceNumber),r.Hr.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=r.Ts.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Ts=r.Ts.insert(i.targetId,i),r.Is.set(e,i.targetId)),i})}async function Yg(t,e,r){const i=ke(t),s=i.Ts.get(e),a=r?"readwrite":"readwrite-primary";try{r||await i.persistence.runTransaction("Release target",a,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ho(o))throw o;fe(n_,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ts=i.Ts.remove(e),i.Is.delete(s.target)}function ex(t,e,r){const i=ke(t);let s=Se.min(),a=je();return i.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const f=ke(u),p=f.Is.get(h);return p!==void 0?Z.resolve(f.Ts.get(p)):f.Hr.getTargetData(c,h)}(i,o,zr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(o,l.targetId).next(u=>{a=u})}).next(()=>i.Ps.getDocumentsMatchingQuery(o,e,r?s:Se.min(),r?a:je())).next(l=>(qF(i,PV(e),l),{documents:l,gs:a})))}function qF(t,e,r){let i=t.Es.get(e)||Se.min();r.forEach((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),t.Es.set(e,i)}class tx{constructor(){this.activeTargetIds=jV()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GF{constructor(){this.ho=new tx,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,i){}addLocalQueryTarget(e,r=!0){return r&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,r,i){this.Po[e]=r}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new tx,Promise.resolve()}handleUserChange(e,r,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KF{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx="ConnectivityMonitor";class rx{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){fe(nx,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){fe(nx,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let od=null;function Xg(){return od===null?od=function(){return 268435456+Math.round(2147483648*Math.random())}():od++,"0x"+od.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="RestConnection",YF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class XF{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=r+"://"+e.host,this.yo=`projects/${i}/databases/${s}`,this.wo=this.databaseId.database===Ih?`project_id=${i}`:`project_id=${i}&database_id=${s}`}So(e,r,i,s,a){const o=Xg(),l=this.bo(e,r.toUriEncodedString());fe(nm,`Sending RPC '${e}' ${o}:`,l,i);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,s,a),this.vo(e,l,u,i).then(c=>(fe(nm,`Received RPC '${e}' ${o}: `,c),c),c=>{throw yo(nm,`RPC '${e}' ${o} failed with error: `,c,"url: ",l,"request:",i),c})}Co(e,r,i,s,a,o){return this.So(e,r,i,s,a)}Do(e,r,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$o}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>e[a]=s),i&&i.headers.forEach((s,a)=>e[a]=s)}bo(e,r){const i=YF[e];return`${this.po}/v1/${r}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class JF extends XF{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,r,i,s){const a=Xg();return new Promise((o,l)=>{const u=new R1;u.setWithCredentials(!0),u.listenOnce(D1.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Od.NO_ERROR:const h=u.getResponseJson();fe(cn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),o(h);break;case Od.TIMEOUT:fe(cn,`RPC '${e}' ${a} timed out`),l(new ye(te.DEADLINE_EXCEEDED,"Request time out"));break;case Od.HTTP_ERROR:const f=u.getStatus();if(fe(cn,`RPC '${e}' ${a} failed with status:`,f,"response text:",u.getResponseText()),f>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const _=function(R){const E=R.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(E)>=0?E:te.UNKNOWN}(g.status);l(new ye(_,g.message))}else l(new ye(te.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new ye(te.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{fe(cn,`RPC '${e}' ${a} completed.`)}});const c=JSON.stringify(s);fe(cn,`RPC '${e}' ${a} sending request:`,s),u.send(r,"POST",c,i,15)})}Wo(e,r,i){const s=Xg(),a=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=L1(),l=M1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,r,i),u.encodeInitMessageHeaders=!0;const h=a.join("");fe(cn,`Creating RPC '${e}' stream ${s}: ${h}`,u);const f=o.createWebChannel(h,u);let p=!1,g=!1;const _=new QF({Fo:R=>{g?fe(cn,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(p||(fe(cn,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),fe(cn,`RPC '${e}' stream ${s} sending:`,R),f.send(R))},Mo:()=>f.close()}),A=(R,E,b)=>{R.listen(E,T=>{try{b(T)}catch(D){setTimeout(()=>{throw D},0)}})};return A(f,Ol.EventType.OPEN,()=>{g||(fe(cn,`RPC '${e}' stream ${s} transport opened.`),_.Qo())}),A(f,Ol.EventType.CLOSE,()=>{g||(g=!0,fe(cn,`RPC '${e}' stream ${s} transport closed`),_.Ko())}),A(f,Ol.EventType.ERROR,R=>{g||(g=!0,yo(cn,`RPC '${e}' stream ${s} transport errored:`,R),_.Ko(new ye(te.UNAVAILABLE,"The operation could not be completed")))}),A(f,Ol.EventType.MESSAGE,R=>{var E;if(!g){const b=R.data[0];Qe(!!b);const T=b,D=(T==null?void 0:T.error)||((E=T[0])===null||E===void 0?void 0:E.error);if(D){fe(cn,`RPC '${e}' stream ${s} received error:`,D);const U=D.status;let j=function(y){const w=Ct[y];if(w!==void 0)return fk(w)}(U),P=D.message;j===void 0&&(j=te.INTERNAL,P="Unknown error status: "+U+" with message "+D.message),g=!0,_.Ko(new ye(j,P)),f.close()}else fe(cn,`RPC '${e}' stream ${s} received:`,b),_.Uo(b)}}),A(l,N1.STAT_EVENT,R=>{R.stat===Fg.PROXY?fe(cn,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===Fg.NOPROXY&&fe(cn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.$o()},0),_}}function rm(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(t){return new nF(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kk{constructor(e,r,i=1e3,s=1.5,a=6e4){this.Ti=e,this.timerId=r,this.Go=i,this.zo=s,this.jo=a,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const r=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),s=Math.max(0,r-i);s>0&&fe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${r} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix="PersistentStream";class Ck{constructor(e,r,i,s,a,o,l,u){this.Ti=e,this.n_=i,this.r_=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new kk(e,r)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,r){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():r&&r.code===te.RESOURCE_EXHAUSTED?(wi(r.toString()),wi("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):r&&r.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(r)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),r=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.i_===r&&this.V_(i,s)},i=>{e(()=>{const s=new ye(te.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(s)})})}V_(e,r){const i=this.R_(this.i_);this.stream=this.f_(e,r),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{i(()=>this.m_(s))}),this.stream.onMessage(s=>{i(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return fe(ix,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return r=>{this.Ti.enqueueAndForget(()=>this.i_===e?r():(fe(ix,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ZF extends Ck{constructor(e,r,i,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,s,o),this.serializer=a}f_(e,r){return this.connection.Wo("Listen",e,r)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const r=sF(this.serializer,e),i=function(a){if(!("targetChange"in a))return Se.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Se.min():o.readTime?Wr(o.readTime):Se.min()}(e);return this.listener.p_(r,i)}y_(e){const r={};r.database=Kg(this.serializer),r.addTarget=function(a,o){let l;const u=o.target;if(l=zg(u)?{documents:lF(a,u)}:{query:uF(a,u).ht},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=gk(a,o.resumeToken);const c=Wg(a,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(Se.min())>0){l.readTime=Dh(a,o.snapshotVersion.toTimestamp());const c=Wg(a,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const i=dF(this.serializer,e);i&&(r.labels=i),this.I_(r)}w_(e){const r={};r.database=Kg(this.serializer),r.removeTarget=e,this.I_(r)}}class e4 extends Ck{constructor(e,r,i,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,s,o),this.serializer=a}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,r){return this.connection.Wo("Write",e,r)}g_(e){return Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const r=oF(e.writeResults,e.commitTime),i=Wr(e.commitTime);return this.listener.v_(i,r)}C_(){const e={};e.database=Kg(this.serializer),this.I_(e)}b_(e){const r={streamToken:this.lastStreamToken,writes:e.map(i=>aF(this.serializer,i))};this.I_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t4{}class n4 extends t4{constructor(e,r,i,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=i,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new ye(te.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,r,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.So(e,qg(r,i),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ye(te.UNKNOWN,a.toString())})}Co(e,r,i,s,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Co(e,qg(r,i),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(te.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class r4{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(wi(r),this.N_=!1):fe("OnlineStateTracker",r)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oa="RemoteStore";class i4{constructor(e,r,i,s,a){this.localStore=e,this.datastore=r,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=a,this.z_.To(o=>{i.enqueueAndForget(async()=>{ga(this)&&(fe(oa,"Restarting streams for network reachability change."),await async function(u){const c=ke(u);c.W_.add(4),await nc(c),c.j_.set("Unknown"),c.W_.delete(4),await Df(c)}(this))})}),this.j_=new r4(i,s)}}async function Df(t){if(ga(t))for(const e of t.G_)await e(!0)}async function nc(t){for(const e of t.G_)await e(!1)}function Ak(t,e){const r=ke(t);r.U_.has(e.targetId)||(r.U_.set(e.targetId,e),a_(r)?s_(r):Wo(r).c_()&&i_(r,e))}function r_(t,e){const r=ke(t),i=Wo(r);r.U_.delete(e),i.c_()&&Pk(r,e),r.U_.size===0&&(i.c_()?i.P_():ga(r)&&r.j_.set("Unknown"))}function i_(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Wo(t).y_(e)}function Pk(t,e){t.H_.Ne(e),Wo(t).w_(e)}function s_(t){t.H_=new JV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.U_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),Wo(t).start(),t.j_.B_()}function a_(t){return ga(t)&&!Wo(t).u_()&&t.U_.size>0}function ga(t){return ke(t).W_.size===0}function Rk(t){t.H_=void 0}async function s4(t){t.j_.set("Online")}async function a4(t){t.U_.forEach((e,r)=>{i_(t,e)})}async function o4(t,e){Rk(t),a_(t)?(t.j_.q_(e),s_(t)):t.j_.set("Unknown")}async function l4(t,e,r){if(t.j_.set("Online"),e instanceof mk&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.U_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.U_.delete(l),s.H_.removeTarget(l))}(t,e)}catch(i){fe(oa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Mh(t,i)}else if(e instanceof Ud?t.H_.We(e):e instanceof pk?t.H_.Ze(e):t.H_.je(e),!r.isEqual(Se.min()))try{const i=await Ik(t.localStore);r.compareTo(i)>=0&&await function(a,o){const l=a.H_.ot(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.U_.get(c);h&&a.U_.set(c,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const h=a.U_.get(u);if(!h)return;a.U_.set(u,h.withResumeToken(nn.EMPTY_BYTE_STRING,h.snapshotVersion)),Pk(a,u);const f=new Gi(h.target,u,c,h.sequenceNumber);i_(a,f)}),a.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(i){fe(oa,"Failed to raise snapshot:",i),await Mh(t,i)}}async function Mh(t,e,r){if(!Ho(e))throw e;t.W_.add(1),await nc(t),t.j_.set("Offline"),r||(r=()=>Ik(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{fe(oa,"Retrying IndexedDB access"),await r(),t.W_.delete(1),await Df(t)})}function Dk(t,e){return e().catch(r=>Mh(t,r,e))}async function Nf(t){const e=ke(t),r=ys(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:zy;for(;u4(e);)try{const s=await HF(e.localStore,i);if(s===null){e.K_.length===0&&r.P_();break}i=s.batchId,c4(e,s)}catch(s){await Mh(e,s)}Nk(e)&&Mk(e)}function u4(t){return ga(t)&&t.K_.length<10}function c4(t,e){t.K_.push(e);const r=ys(t);r.c_()&&r.S_&&r.b_(e.mutations)}function Nk(t){return ga(t)&&!ys(t).u_()&&t.K_.length>0}function Mk(t){ys(t).start()}async function d4(t){ys(t).C_()}async function h4(t){const e=ys(t);for(const r of t.K_)e.b_(r.mutations)}async function f4(t,e,r){const i=t.K_.shift(),s=Xy.from(i,e,r);await Dk(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Nf(t)}async function p4(t,e){e&&ys(t).S_&&await async function(i,s){if(function(o){return YV(o)&&o!==te.ABORTED}(s.code)){const a=i.K_.shift();ys(i).h_(),await Dk(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Nf(i)}}(t,e),Nk(t)&&Mk(t)}async function sx(t,e){const r=ke(t);r.asyncQueue.verifyOperationInProgress(),fe(oa,"RemoteStore received new credentials");const i=ga(r);r.W_.add(3),await nc(r),i&&r.j_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.W_.delete(3),await Df(r)}async function m4(t,e){const r=ke(t);e?(r.W_.delete(2),await Df(r)):e||(r.W_.add(2),await nc(r),r.j_.set("Unknown"))}function Wo(t){return t.J_||(t.J_=function(r,i,s){const a=ke(r);return a.M_(),new ZF(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{xo:s4.bind(null,t),No:a4.bind(null,t),Lo:o4.bind(null,t),p_:l4.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),a_(t)?s_(t):t.j_.set("Unknown")):(await t.J_.stop(),Rk(t))})),t.J_}function ys(t){return t.Y_||(t.Y_=function(r,i,s){const a=ke(r);return a.M_(),new e4(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:d4.bind(null,t),Lo:p4.bind(null,t),D_:h4.bind(null,t),v_:f4.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await Nf(t)):(await t.Y_.stop(),t.K_.length>0&&(fe(oa,`Stopping write stream with ${t.K_.length} pending writes`),t.K_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e,r,i,s,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new fi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,i,s,a){const o=Date.now()+i,l=new o_(e,r,o,s,a);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function l_(t,e){if(wi("AsyncQueue",`${e}: ${t}`),Ho(t))return new ye(te.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{static emptySet(e){return new ao(e.comparator)}constructor(e){this.comparator=e?(r,i)=>e(r,i)||be.comparator(r.key,i.key):(r,i)=>be.comparator(r.key,i.key),this.keyedMap=jl(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,i)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof ao)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const i=new ao;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=r,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{constructor(){this.Z_=new bt(be.comparator)}track(e){const r=e.doc.key,i=this.Z_.get(r);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(r,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(r,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(r,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(r,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(r):e.type===1&&i.type===2?this.Z_=this.Z_.insert(r,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(r,{type:2,doc:e.doc}):Te():this.Z_=this.Z_.insert(r,e)}X_(){const e=[];return this.Z_.inorderTraversal((r,i)=>{e.push(i)}),e}}class Eo{constructor(e,r,i,s,a,o,l,u,c){this.query=e,this.docs=r,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,r,i,s,a){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new Eo(e,r,ao.emptySet(r),o,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&If(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,i=e.docChanges;if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==i[s].type||!r[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g4{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class v4{constructor(){this.queries=ox(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(r,i){const s=ke(r),a=s.queries;s.queries=ox(),a.forEach((o,l)=>{for(const u of l.ta)u.onError(i)})})(this,new ye(te.ABORTED,"Firestore shutting down"))}}function ox(){return new ma(t=>ek(t),If)}async function Lk(t,e){const r=ke(t);let i=3;const s=e.query;let a=r.queries.get(s);a?!a.na()&&e.ra()&&(i=2):(a=new g4,i=e.ra()?0:1);try{switch(i){case 0:a.ea=await r.onListen(s,!0);break;case 1:a.ea=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(o){const l=l_(o,`Initialization of query '${Ma(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,a),a.ta.push(e),e.sa(r.onlineState),a.ea&&e.oa(a.ea)&&u_(r)}async function Ok(t,e){const r=ke(t),i=e.query;let s=3;const a=r.queries.get(i);if(a){const o=a.ta.indexOf(e);o>=0&&(a.ta.splice(o,1),a.ta.length===0?s=e.ra()?0:1:!a.na()&&e.ra()&&(s=2))}switch(s){case 0:return r.queries.delete(i),r.onUnlisten(i,!0);case 1:return r.queries.delete(i),r.onUnlisten(i,!1);case 2:return r.onLastRemoteStoreUnlisten(i);default:return}}function y4(t,e){const r=ke(t);let i=!1;for(const s of e){const a=s.query,o=r.queries.get(a);if(o){for(const l of o.ta)l.oa(s)&&(i=!0);o.ea=s}}i&&u_(r)}function _4(t,e,r){const i=ke(t),s=i.queries.get(e);if(s)for(const a of s.ta)a.onError(r);i.queries.delete(e)}function u_(t){t.ia.forEach(e=>{e.next()})}var Qg,lx;(lx=Qg||(Qg={}))._a="default",lx.Cache="cache";class jk{constructor(e,r,i){this.query=e,this.aa=r,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Eo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.ua?this.la(e)&&(this.aa.next(e),r=!0):this.ha(e,this.onlineState)&&(this.Pa(e),r=!0),this.ca=e,r}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let r=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),r=!0),r}ha(e,r){if(!e.fromCache||!this.ra())return!0;const i=r!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}la(e){if(e.docChanges.length>0)return!0;const r=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}Pa(e){e=Eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Qg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e){this.key=e}}class Fk{constructor(e){this.key=e}}class w4{constructor(e,r){this.query=e,this.fa=r,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=je(),this.mutatedKeys=je(),this.ya=tk(e),this.wa=new ao(this.ya)}get Sa(){return this.fa}ba(e,r){const i=r?r.Da:new ax,s=r?r.wa:this.wa;let a=r?r.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),g=kf(this.query,f)?f:null,_=!!p&&this.mutatedKeys.has(p.key),A=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let R=!1;p&&g?p.data.isEqual(g.data)?_!==A&&(i.track({type:3,doc:g}),R=!0):this.va(p,g)||(i.track({type:2,doc:g}),R=!0,(u&&this.ya(g,u)>0||c&&this.ya(g,c)<0)&&(l=!0)):!p&&g?(i.track({type:0,doc:g}),R=!0):p&&!g&&(i.track({type:1,doc:p}),R=!0,(u||c)&&(l=!0)),R&&(g?(o=o.add(g),a=A?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),i.track({type:1,doc:h})}return{wa:o,Da:i,ls:l,mutatedKeys:a}}va(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,i,s){const a=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((h,f)=>function(g,_){const A=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return A(g)-A(_)}(h.type,f.type)||this.ya(h.doc,f.doc)),this.Ca(i),s=s!=null&&s;const l=r&&!s?this.Fa():[],u=this.pa.size===0&&this.current&&!s?1:0,c=u!==this.ga;return this.ga=u,o.length!==0||c?{snapshot:new Eo(this.query,e.wa,a,o,e.mutatedKeys,u===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new ax,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(r=>this.fa=this.fa.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.fa=this.fa.delete(r)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=je(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const r=[];return e.forEach(i=>{this.pa.has(i)||r.push(new Fk(i))}),this.pa.forEach(i=>{e.has(i)||r.push(new Vk(i))}),r}Oa(e){this.fa=e.gs,this.pa=je();const r=this.ba(e.documents);return this.applyChanges(r,!0)}Na(){return Eo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const c_="SyncEngine";class b4{constructor(e,r,i){this.query=e,this.targetId=r,this.view=i}}class x4{constructor(e){this.key=e,this.Ba=!1}}class E4{constructor(e,r,i,s,a,o){this.localStore=e,this.remoteStore=r,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new ma(l=>ek(l),If),this.qa=new Map,this.Qa=new Set,this.$a=new bt(be.comparator),this.Ka=new Map,this.Ua=new Zy,this.Wa={},this.Ga=new Map,this.za=xo.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function T4(t,e,r=!0){const i=Wk(t);let s;const a=i.ka.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Na()):s=await Uk(i,e,r,!0),s}async function S4(t,e){const r=Wk(t);await Uk(r,e,!0,!1)}async function Uk(t,e,r,i){const s=await WF(t.localStore,zr(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,r);let l;return i&&(l=await I4(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&r&&Ak(t.remoteStore,s),l}async function I4(t,e,r,i,s){t.Ha=(f,p,g)=>async function(A,R,E,b){let T=R.view.ba(E);T.ls&&(T=await ex(A.localStore,R.query,!1).then(({documents:P})=>R.view.ba(P,T)));const D=b&&b.targetChanges.get(R.targetId),U=b&&b.targetMismatches.get(R.targetId)!=null,j=R.view.applyChanges(T,A.isPrimaryClient,D,U);return cx(A,R.targetId,j.Ma),j.snapshot}(t,f,p,g);const a=await ex(t.localStore,e,!0),o=new w4(e,a.gs),l=o.ba(a.documents),u=tc.createSynthesizedTargetChangeForCurrentChange(r,i&&t.onlineState!=="Offline",s),c=o.applyChanges(l,t.isPrimaryClient,u);cx(t,r,c.Ma);const h=new b4(e,r,o);return t.ka.set(e,h),t.qa.has(r)?t.qa.get(r).push(e):t.qa.set(r,[e]),c.snapshot}async function k4(t,e,r){const i=ke(t),s=i.ka.get(e),a=i.qa.get(s.targetId);if(a.length>1)return i.qa.set(s.targetId,a.filter(o=>!If(o,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Yg(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),r&&r_(i.remoteStore,s.targetId),Jg(i,s.targetId)}).catch(zo)):(Jg(i,s.targetId),await Yg(i.localStore,s.targetId,!0))}async function C4(t,e){const r=ke(t),i=r.ka.get(e),s=r.qa.get(i.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(i.targetId),r_(r.remoteStore,i.targetId))}async function A4(t,e,r){const i=O4(t);try{const s=await function(o,l){const u=ke(o),c=Lt.now(),h=l.reduce((g,_)=>g.add(_.key),je());let f,p;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=bi(),A=je();return u.ds.getEntries(g,h).next(R=>{_=R,_.forEach((E,b)=>{b.isValidDocument()||(A=A.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,_)).next(R=>{f=R;const E=[];for(const b of l){const T=HV(b,f.get(b.key).overlayedDocument);T!=null&&E.push(new Is(b.key,T,G1(T.value.mapValue),Hr.exists(!0)))}return u.mutationQueue.addMutationBatch(g,c,E,l)}).next(R=>{p=R;const E=R.applyToLocalDocumentSet(f,A);return u.documentOverlayCache.saveOverlays(g,R.batchId,E)})}).then(()=>({batchId:p.batchId,changes:rk(f)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let c=o.Wa[o.currentUser.toKey()];c||(c=new bt(Ve)),c=c.insert(l,u),o.Wa[o.currentUser.toKey()]=c}(i,s.batchId,r),await rc(i,s.changes),await Nf(i.remoteStore)}catch(s){const a=l_(s,"Failed to persist write");r.reject(a)}}async function Bk(t,e){const r=ke(t);try{const i=await $F(r.localStore,e);e.targetChanges.forEach((s,a)=>{const o=r.Ka.get(a);o&&(Qe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ba=!0:s.modifiedDocuments.size>0?Qe(o.Ba):s.removedDocuments.size>0&&(Qe(o.Ba),o.Ba=!1))}),await rc(r,i,e)}catch(i){await zo(i)}}function ux(t,e,r){const i=ke(t);if(i.isPrimaryClient&&r===0||!i.isPrimaryClient&&r===1){const s=[];i.ka.forEach((a,o)=>{const l=o.view.sa(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=ke(o);u.onlineState=l;let c=!1;u.queries.forEach((h,f)=>{for(const p of f.ta)p.sa(l)&&(c=!0)}),c&&u_(u)}(i.eventManager,e),s.length&&i.La.p_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function P4(t,e,r){const i=ke(t);i.sharedClientState.updateQueryState(e,"rejected",r);const s=i.Ka.get(e),a=s&&s.key;if(a){let o=new bt(be.comparator);o=o.insert(a,fn.newNoDocument(a,Se.min()));const l=je().add(a),u=new Pf(Se.min(),new Map,new bt(Ve),o,l);await Bk(i,u),i.$a=i.$a.remove(a),i.Ka.delete(e),d_(i)}else await Yg(i.localStore,e,!1).then(()=>Jg(i,e,r)).catch(zo)}async function R4(t,e){const r=ke(t),i=e.batch.batchId;try{const s=await BF(r.localStore,e);zk(r,i,null),$k(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),await rc(r,s)}catch(s){await zo(s)}}async function D4(t,e,r){const i=ke(t);try{const s=await function(o,l){const u=ke(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,l).next(f=>(Qe(f!==null),h=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(i.localStore,e);zk(i,e,r),$k(i,e),i.sharedClientState.updateMutationState(e,"rejected",r),await rc(i,s)}catch(s){await zo(s)}}function $k(t,e){(t.Ga.get(e)||[]).forEach(r=>{r.resolve()}),t.Ga.delete(e)}function zk(t,e,r){const i=ke(t);let s=i.Wa[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(r?a.reject(r):a.resolve(),s=s.remove(e)),i.Wa[i.currentUser.toKey()]=s}}function Jg(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.qa.get(e))t.ka.delete(i),r&&t.La.Ja(i,r);t.qa.delete(e),t.isPrimaryClient&&t.Ua.br(e).forEach(i=>{t.Ua.containsKey(i)||Hk(t,i)})}function Hk(t,e){t.Qa.delete(e.path.canonicalString());const r=t.$a.get(e);r!==null&&(r_(t.remoteStore,r),t.$a=t.$a.remove(e),t.Ka.delete(r),d_(t))}function cx(t,e,r){for(const i of r)i instanceof Vk?(t.Ua.addReference(i.key,e),N4(t,i)):i instanceof Fk?(fe(c_,"Document no longer in limbo: "+i.key),t.Ua.removeReference(i.key,e),t.Ua.containsKey(i.key)||Hk(t,i.key)):Te()}function N4(t,e){const r=e.key,i=r.path.canonicalString();t.$a.get(r)||t.Qa.has(i)||(fe(c_,"New document in limbo: "+r),t.Qa.add(i),d_(t))}function d_(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const r=new be(pt.fromString(e)),i=t.za.next();t.Ka.set(i,new x4(r)),t.$a=t.$a.insert(r,i),Ak(t.remoteStore,new Gi(zr(Ky(r.path)),i,"TargetPurposeLimboResolution",xf.ae))}}async function rc(t,e,r){const i=ke(t),s=[],a=[],o=[];i.ka.isEmpty()||(i.ka.forEach((l,u)=>{o.push(i.Ha(u,e,r).then(c=>{var h;if((c||r)&&i.isPrimaryClient){const f=c?!c.fromCache:(h=r==null?void 0:r.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){s.push(c);const f=t_.Yi(u.targetId,c);a.push(f)}}))}),await Promise.all(o),i.La.p_(s),await async function(u,c){const h=ke(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Z.forEach(c,p=>Z.forEach(p.Hi,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>Z.forEach(p.Ji,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!Ho(f))throw f;fe(n_,"Failed to update sequence numbers: "+f)}for(const f of c){const p=f.targetId;if(!f.fromCache){const g=h.Ts.get(p),_=g.snapshotVersion,A=g.withLastLimboFreeSnapshotVersion(_);h.Ts=h.Ts.insert(p,A)}}}(i.localStore,a))}async function M4(t,e){const r=ke(t);if(!r.currentUser.isEqual(e)){fe(c_,"User change. New user:",e.toKey());const i=await Sk(r.localStore,e);r.currentUser=e,function(a,o){a.Ga.forEach(l=>{l.forEach(u=>{u.reject(new ye(te.CANCELLED,o))})}),a.Ga.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await rc(r,i.Rs)}}function L4(t,e){const r=ke(t),i=r.Ka.get(e);if(i&&i.Ba)return je().add(i.key);{let s=je();const a=r.qa.get(e);if(!a)return s;for(const o of a){const l=r.ka.get(o);s=s.unionWith(l.view.Sa)}return s}}function Wk(t){const e=ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Bk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=L4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=P4.bind(null,e),e.La.p_=y4.bind(null,e.eventManager),e.La.Ja=_4.bind(null,e.eventManager),e}function O4(t){const e=ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=R4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=D4.bind(null,e),e}class Lh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Rf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,r){return null}nu(e,r){return null}eu(e){return UF(this.persistence,new jF,e.initialUser,this.serializer)}Xa(e){return new Tk(e_.ri,this.serializer)}Za(e){return new GF}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Lh.provider={build:()=>new Lh};class j4 extends Lh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,r){Qe(this.persistence.referenceDelegate instanceof Nh);const i=this.persistence.referenceDelegate.garbageCollector;return new xF(i,e.asyncQueue,r)}Xa(e){const r=this.cacheSizeBytes!==void 0?Rn.withCacheSize(this.cacheSizeBytes):Rn.DEFAULT;return new Tk(i=>Nh.ri(i,r),this.serializer)}}class Zg{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ux(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=M4.bind(null,this.syncEngine),await m4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new v4}()}createDatastore(e){const r=Rf(e.databaseInfo.databaseId),i=function(a){return new JF(a)}(e.databaseInfo);return function(a,o,l,u){return new n4(a,o,l,u)}(e.authCredentials,e.appCheckCredentials,i,r)}createRemoteStore(e){return function(i,s,a,o,l){return new i4(i,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>ux(this.syncEngine,r,0),function(){return rx.D()?new rx:new KF}())}createSyncEngine(e,r){return function(s,a,o,l,u,c,h){const f=new E4(s,a,o,l,u,c);return h&&(f.ja=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const a=ke(s);fe(oa,"RemoteStore shutting down."),a.W_.add(5),await nc(a),a.z_.shutdown(),a.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Zg.provider={build:()=>new Zg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):wi("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _s="FirestoreClient";class V4{constructor(e,r,i,s,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=i,this.databaseInfo=s,this.user=dn.UNAUTHENTICATED,this.clientId=j1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async o=>{fe(_s,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(fe(_s,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=l_(r,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function im(t,e){t.asyncQueue.verifyOperationInProgress(),fe(_s,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let i=r.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await Sk(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function dx(t,e){t.asyncQueue.verifyOperationInProgress();const r=await F4(t);fe(_s,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(i=>sx(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>sx(e.remoteStore,s)),t._onlineComponents=e}async function F4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){fe(_s,"Using user provided OfflineComponentProvider");try{await im(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===te.FAILED_PRECONDITION||s.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;yo("Error using user provided cache. Falling back to memory cache: "+r),await im(t,new Lh)}}else fe(_s,"Using default OfflineComponentProvider"),await im(t,new j4(void 0));return t._offlineComponents}async function Gk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(fe(_s,"Using user provided OnlineComponentProvider"),await dx(t,t._uninitializedComponentsProvider._online)):(fe(_s,"Using default OnlineComponentProvider"),await dx(t,new Zg))),t._onlineComponents}function U4(t){return Gk(t).then(e=>e.syncEngine)}async function Kk(t){const e=await Gk(t),r=e.eventManager;return r.onListen=T4.bind(null,e.syncEngine),r.onUnlisten=k4.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=S4.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=C4.bind(null,e.syncEngine),r}function B4(t,e,r={}){const i=new fi;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,c){const h=new qk({next:p=>{h.su(),o.enqueueAndForget(()=>Ok(a,f));const g=p.docs.has(l);!g&&p.fromCache?c.reject(new ye(te.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&u&&u.source==="server"?c.reject(new ye(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new jk(Ky(l.path),h,{includeMetadataChanges:!0,Ta:!0});return Lk(a,f)}(await Kk(t),t.asyncQueue,e,r,i)),i.promise}function $4(t,e,r={}){const i=new fi;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,c){const h=new qk({next:p=>{h.su(),o.enqueueAndForget(()=>Ok(a,f)),p.fromCache&&u.source==="server"?c.reject(new ye(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(p)},error:p=>c.reject(p)}),f=new jk(l,h,{includeMetadataChanges:!0,Ta:!0});return Lk(a,f)}(await Kk(t),t.asyncQueue,e,r,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xk(t,e,r){if(!r)throw new ye(te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function z4(t,e,r,i){if(e===!0&&i===!0)throw new ye(te.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function fx(t){if(!be.isDocumentKey(t))throw new ye(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function px(t){if(be.isDocumentKey(t))throw new ye(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function h_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Te()}function xi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ye(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=h_(t);throw new ye(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk="firestore.googleapis.com",mx=!0;class gx{constructor(e){var r,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Qk,this.ssl=mx}else this.host=e.host,this.ssl=(r=e.ssl)!==null&&r!==void 0?r:mx;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ek;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<wF)throw new ye(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}z4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Yk((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ye(te.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mf{constructor(e,r,i,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gx(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Yj;switch(i.type){case"firstParty":return new Zj(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ye(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const i=hx.get(r);i&&(fe("ComponentProvider","Removing Datastore"),hx.delete(r),i.terminate())}(this),Promise.resolve()}}function H4(t,e,r,i={}){var s;const a=(t=xi(t,Mf))._getSettings(),o=`${e}:${r}`;if(a.host!==Qk&&a.host!==o&&yo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){let l,u;if(typeof i.mockUserToken=="string")l=i.mockUserToken,u=dn.MOCK_USER;else{l=uM(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new ye(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new dn(c)}t._authCredentials=new Xj(new O1(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,r,i){this.converter=r,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Lf(this.firestore,e,this._query)}}class Fn{constructor(e,r,i){this.converter=r,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new os(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fn(this.firestore,e,this._key)}}class os extends Lf{constructor(e,r,i){super(e,r,Ky(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fn(this.firestore,null,new be(e))}withConverter(e){return new os(this.firestore,e,this._path)}}function pn(t,e,...r){if(t=tn(t),Xk("collection","path",e),t instanceof Mf){const i=pt.fromString(e,...r);return px(i),new os(t,null,i)}{if(!(t instanceof Fn||t instanceof os))throw new ye(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(pt.fromString(e,...r));return px(i),new os(t.firestore,null,i)}}function To(t,e,...r){if(t=tn(t),arguments.length===1&&(e=j1.newId()),Xk("doc","path",e),t instanceof Mf){const i=pt.fromString(e,...r);return fx(i),new Fn(t,null,new be(i))}{if(!(t instanceof Fn||t instanceof os))throw new ye(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(pt.fromString(e,...r));return fx(i),new Fn(t.firestore,t instanceof os?t.converter:null,new be(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vx="AsyncQueue";class yx{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new kk(this,"async_queue_retry"),this.Su=()=>{const i=rm();i&&fe(vx,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=e;const r=rm();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const r=rm();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const r=new fi;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Ho(e))throw e;fe(vx,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const r=this.bu.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(i);throw wi("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.pu=!1,i))));return this.bu=r,r}enqueueAfterDelay(e,r,i){this.Du(),this.wu.indexOf(e)>-1&&(r=0);const s=o_.createAndSchedule(this,e,r,i,a=>this.Fu(a));return this.fu.push(s),s}Du(){this.gu&&Te()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const r of this.fu)if(r.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((r,i)=>r.targetTimeMs-i.targetTimeMs);for(const r of this.fu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const r=this.fu.indexOf(e);this.fu.splice(r,1)}}class ic extends Mf{constructor(e,r,i,s){super(e,r,i,s),this.type="firestore",this._queue=new yx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new yx(e),this._firestoreClient=void 0,await e}}}function W4(t,e){const r=typeof t=="object"?t:GI(),i=typeof t=="string"?t:Ih,s=Dy(r,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=oM("firestore");a&&H4(s,...a)}return s}function f_(t){if(t._terminated)throw new ye(te.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||q4(t),t._firestoreClient}function q4(t){var e,r,i;const s=t._freezeSettings(),a=function(l,u,c,h){return new fV(l,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Yk(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new V4(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e){this._byteString=e}static fromBase64String(e){try{return new So(nn.fromBase64String(e))}catch(r){throw new ye(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new So(nn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ye(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ye(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ye(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ve(this._lat,e._lat)||Ve(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g_{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G4=/^__.*__$/;class K4{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return this.fieldMask!==null?new Is(e,this.data,this.fieldMask,r,this.fieldTransforms):new ec(e,this.data,r,this.fieldTransforms)}}class Jk{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return new Is(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function Zk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class v_{constructor(e,r,i,s,a,o){this.settings=e,this.databaseId=r,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Bu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new v_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var r;const i=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.ku({path:i,Qu:!1});return s.$u(e),s}Ku(e){var r;const i=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.ku({path:i,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Oh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Zk(this.Lu)&&G4.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class Y4{constructor(e,r,i){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=i||Rf(e)}ju(e,r,i,s=!1){return new v_({Lu:e,methodName:r,zu:i,path:Qt.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eC(t){const e=t._freezeSettings(),r=Rf(t._databaseId);return new Y4(t._databaseId,!!e.ignoreUndefinedProperties,r)}function X4(t,e,r,i,s,a={}){const o=t.ju(a.merge||a.mergeFields?2:0,e,r,s);y_("Data must be an object, but it was:",o,i);const l=tC(i,o);let u,c;if(a.merge)u=new zn(o.fieldMask),c=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const f of a.mergeFields){const p=ev(e,f,r);if(!o.contains(p))throw new ye(te.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);rC(h,p)||h.push(p)}u=new zn(h),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new K4(new Nn(l),u,c)}class jf extends p_{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jf}}function Q4(t,e,r,i){const s=t.ju(1,e,r);y_("Data must be an object, but it was:",s,i);const a=[],o=Nn.empty();Ss(i,(u,c)=>{const h=__(e,u,r);c=tn(c);const f=s.Ku(h);if(c instanceof jf)a.push(h);else{const p=Vf(c,f);p!=null&&(a.push(h),o.set(h,p))}});const l=new zn(a);return new Jk(o,l,s.fieldTransforms)}function J4(t,e,r,i,s,a){const o=t.ju(1,e,r),l=[ev(e,i,r)],u=[s];if(a.length%2!=0)throw new ye(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)l.push(ev(e,a[p])),u.push(a[p+1]);const c=[],h=Nn.empty();for(let p=l.length-1;p>=0;--p)if(!rC(c,l[p])){const g=l[p];let _=u[p];_=tn(_);const A=o.Ku(g);if(_ instanceof jf)c.push(g);else{const R=Vf(_,A);R!=null&&(c.push(g),h.set(g,R))}}const f=new zn(c);return new Jk(h,f,o.fieldTransforms)}function Vf(t,e){if(nC(t=tn(t)))return y_("Unsupported field value:",e,t),tC(t,e);if(t instanceof p_)return function(i,s){if(!Zk(s.Lu))throw s.Wu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,s){const a=[];let o=0;for(const l of i){let u=Vf(l,s.Uu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(i,s){if((i=tn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return VV(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Lt.fromDate(i);return{timestampValue:Dh(s.serializer,a)}}if(i instanceof Lt){const a=new Lt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Dh(s.serializer,a)}}if(i instanceof m_)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof So)return{bytesValue:gk(s.serializer,i._byteString)};if(i instanceof Fn){const a=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(a))throw s.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Jy(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof g_)return function(o,l){return{mapValue:{fields:{[W1]:{stringValue:q1},[kh]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Wu("VectorValues must only contain numeric values.");return Yy(l.serializer,c)})}}}}}}(i,s);throw s.Wu(`Unsupported field value: ${h_(i)}`)}(t,e)}function tC(t,e){const r={};return F1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ss(t,(i,s)=>{const a=Vf(s,e.qu(i));a!=null&&(r[i]=a)}),{mapValue:{fields:r}}}function nC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Lt||t instanceof m_||t instanceof So||t instanceof Fn||t instanceof p_||t instanceof g_)}function y_(t,e,r){if(!nC(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const i=h_(r);throw i==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+i)}}function ev(t,e,r){if((e=tn(e))instanceof Of)return e._internalPath;if(typeof e=="string")return __(t,e);throw Oh("Field path arguments must be of type string or ",t,!1,void 0,r)}const Z4=new RegExp("[~\\*/\\[\\]]");function __(t,e,r){if(e.search(Z4)>=0)throw Oh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Of(...e.split("."))._internalPath}catch{throw Oh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Oh(t,e,r,i,s){const a=i&&!i.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${i}`),o&&(u+=` in document ${s}`),u+=")"),new ye(te.INVALID_ARGUMENT,l+t+u)}function rC(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,r,i,s,a){this._firestore=e,this._userDataWriter=r,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Fn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new e3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(sC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class e3 extends iC{data(){return super.data()}}function sC(t,e){return typeof e=="string"?__(t,e):e instanceof Of?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ye(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class n3{convertValue(e,r="none"){switch(vs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Te()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const i={};return Ss(e,(s,a)=>{i[s]=this.convertValue(a,r)}),i}convertVectorValue(e){var r,i,s;const a=(s=(i=(r=e.fields)===null||r===void 0?void 0:r[kh].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(o=>It(o.doubleValue));return new g_(a)}convertGeoPoint(e){return new m_(It(e.latitude),It(e.longitude))}convertArray(e,r){return(e.values||[]).map(i=>this.convertValue(i,r))}convertServerTimestamp(e,r){switch(r){case"previous":const i=Tf(e);return i==null?null:this.convertValue(i,r);case"estimate":return this.convertTimestamp(Au(e));default:return null}}convertTimestamp(e){const r=ms(e);return new Lt(r.seconds,r.nanos)}convertDocumentKey(e,r){const i=pt.fromString(e);Qe(xk(i));const s=new Pu(i.get(1),i.get(3)),a=new be(i.popFirst(5));return s.isEqual(r)||wi(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(t,e,r){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class aC extends iC{constructor(e,r,i,s,a,o){super(e,r,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Bd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const i=this._document.data.field(sC("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}}}class Bd extends aC{data(e={}){return super.data(e)}}class i3{constructor(e,r,i,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new Fl(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(i=>{e.call(r,new Bd(this._firestore,this._userDataWriter,i.key,i,new Fl(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ye(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Bd(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Fl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const u=new Bd(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Fl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,h=-1;return l.type!==0&&(c=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:s3(l.type),doc:u,oldIndex:c,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function s3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(t){t=xi(t,Fn);const e=xi(t.firestore,ic);return B4(f_(e),t._key).then(r=>o3(e,t,r))}class oC extends n3{constructor(e){super(),this.firestore=e}convertBytes(e){return new So(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Fn(this.firestore,null,r)}}function Ln(t){t=xi(t,Lf);const e=xi(t.firestore,ic),r=f_(e),i=new oC(e);return t3(t._query),$4(r,t._query).then(s=>new i3(e,i,t,s))}function _x(t,e,r){t=xi(t,Fn);const i=xi(t.firestore,ic),s=r3(t.converter,e);return lC(i,[X4(eC(i),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Hr.none())])}function tv(t,e,r,...i){t=xi(t,Fn);const s=xi(t.firestore,ic),a=eC(s);let o;return o=typeof(e=tn(e))=="string"||e instanceof Of?J4(a,"updateDoc",t._key,e,r,i):Q4(a,"updateDoc",t._key,e),lC(s,[o.toMutation(t._key,Hr.exists(!0))])}function lC(t,e){return function(i,s){const a=new fi;return i.asyncQueue.enqueueAndForget(async()=>A4(await U4(i),s,a)),a.promise}(f_(t),e)}function o3(t,e,r){const i=r.docs.get(e._key),s=new oC(t);return new aC(t,s,e._key,i,new Fl(r.hasPendingWrites,r.fromCache),e.converter)}(function(e,r=!0){(function(s){$o=s})(Fo),go(new ia("firestore",(i,{instanceIdentifier:s,options:a})=>{const o=i.getProvider("app").getImmediate(),l=new ic(new Qj(i.getProvider("auth-internal")),new eV(o,i.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ye(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pu(c.options.projectId,h)}(o,s),o);return a=Object.assign({useFetchStreams:r},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),is(Sb,Ib,e),is(Sb,Ib,"esm2017")})();const l3={apiKey:"AIzaSyDGolxlZNoEzk7z46ZMtSk9YsP32MlH45Q",authDomain:"llm-hyper-audio.firebaseapp.com",projectId:"llm-hyper-audio",storageBucket:"llm-hyper-audio.firebasestorage.app",messagingSenderId:"530304773274",appId:"1:530304773274:web:1764f58974d6c2fd060323",measurementId:"G-HFEKE65YC6"},uC=qI(l3),Rt=W4(uC),sm=Wj(uC),cC=L.createContext();function sc(){const t=L.useContext(cC);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function u3({children:t}){const[e,r]=L.useState(null),[i,s]=L.useState(!0),[a,o]=L.useState(null);L.useEffect(()=>{console.log("Setting up auth listener");const h=NO(sm,f=>{console.log("Auth state changed:",f?f.email:"No user"),r(f),s(!1)},f=>{console.error("Auth state change error:",f),o(f.message),s(!1)});return()=>h()},[]);const c={user:e,loading:i,error:a,login:async(h,f)=>{try{o(null),console.log("Attempting login with:",h);const p=await PO(sm,h,f);return r(p.user),p.user}catch(p){throw console.error("Login error:",p),o(p.message),p}},logout:async()=>{try{o(null),console.log("Logging out user"),await MO(sm),r(null)}catch(h){throw console.error("Logout error:",h),o(h.message),h}},isAuthenticated:!!e};return m.jsx(cC.Provider,{value:c,children:t})}const c3=L.createContext();function d3({children:t}){const[e,r]=L.useState(null),[i,s]=L.useState([]),[a,o]=L.useState(!1),[l,u]=L.useState(0),E={currentVideo:e,setCurrentVideo:r,playlist:i,setPlaylist:s,isPlaying:a,setIsPlaying:o,currentTime:l,setCurrentTime:u,addToPlaylist:b=>{s(T=>[...T,b])},removeFromPlaylist:b=>{s(T=>T.filter(D=>D.id!==b))},clearPlaylist:()=>{s([]),r(null)},playVideo:b=>{r(b),o(!0)},pauseVideo:()=>{o(!1)},nextVideo:()=>{const b=i.findIndex(T=>T.id===(e==null?void 0:e.id));b<i.length-1&&r(i[b+1])},previousVideo:()=>{const b=i.findIndex(T=>T.id===(e==null?void 0:e.id));b>0&&r(i[b-1])},updatePlaylistOrder:b=>{s(b)}};return m.jsx(c3.Provider,{value:E,children:t})}/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),dC=(...t)=>t.filter((e,r,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var f3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p3=L.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:s="",children:a,iconNode:o,...l},u)=>L.createElement("svg",{ref:u,...f3,width:e,height:e,stroke:t,strokeWidth:i?Number(r)*24/Number(e):r,className:dC("lucide",s),...l},[...o.map(([c,h])=>L.createElement(c,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=(t,e)=>{const r=L.forwardRef(({className:i,...s},a)=>L.createElement(p3,{ref:a,iconNode:e,className:dC(`lucide-${h3(t)}`,i),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],g3=rn("ChevronDown",m3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],y3=rn("ChevronRight",v3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],w3=rn("ChevronUp",_3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],x3=rn("CirclePlay",b3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],hC=rn("Clock",E3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],fC=rn("FileText",T3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S3=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],I3=rn("Heart",S3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k3=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],C3=rn("House",k3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A3=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],P3=rn("List",A3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],D3=rn("LogOut",R3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N3=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],M3=rn("Menu",N3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],pC=rn("Search",L3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],j3=rn("Settings",O3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],F3=rn("ShoppingBag",V3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U3=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],B3=rn("Tag",U3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $3=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],wx=rn("Upload",$3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],H3=rn("X",z3);function W3(){const{user:t,logout:e}=sc(),r=fr(),[i,s]=L.useState(!1),a=()=>{s(!i)},o=[{path:"/",label:"Home",icon:m.jsx(C3,{size:20})},{path:"/keyword-directory",label:"Directory",icon:m.jsx(P3,{size:20})},{path:"/playlist-builder",label:"Playlists",icon:m.jsx(x3,{size:20})},{path:"/transcript-summary",label:"Summarizer",icon:m.jsx(fC,{size:20})}],l=u=>r.pathname===u;return m.jsxs(m.Fragment,{children:[m.jsx("button",{className:"fixed top-4 left-4 w-12 h-12 rounded-lg bg-white border-none shadow-sm cursor-pointer flex justify-center items-center text-gray-600 z-[51] transition-colors duration-200 ease-in-out",onClick:a,children:m.jsx(M3,{size:24})}),m.jsx("div",{className:`fixed inset-0 z-[49] transition-opacity duration-300 ease-in-out ${i?"pointer-events-auto":"pointer-events-none"}`,onClick:a}),m.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-white border-r border-gray-200 shadow-lg transition-transform duration-300 ease-in-out z-50 flex flex-col p-4 ${i?"translate-x-0":"-translate-x-full"}`,children:[m.jsx("button",{className:"absolute top-4 right-4 p-2 rounded-md bg-gray-100 border-none cursor-pointer flex justify-center items-center text-gray-600",onClick:a,children:m.jsx(H3,{size:20})}),m.jsxs("div",{className:"flex-1 overflow-auto mt-10",children:[m.jsxs("div",{children:[o.map(u=>m.jsxs(Ws,{to:u.path,className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l(u.path)?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[m.jsx("span",{className:"flex mr-3 text-inherit",children:u.icon}),m.jsx("span",{children:u.label})]},u.path)),m.jsxs(Ws,{to:"/search",className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l("/search")?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[m.jsx("span",{className:"flex mr-3 text-inherit",children:m.jsx(pC,{size:20})}),m.jsx("span",{children:"Search"})]}),m.jsxs(Ws,{to:"/playlists",className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l("/playlists")?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[m.jsx("span",{className:"flex mr-3 text-inherit",children:m.jsx(F3,{size:20})}),m.jsx("span",{children:"Playlists"})]}),m.jsxs(Ws,{to:"/favorites",className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l("/favorites")?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[m.jsx("span",{className:"flex mr-3 text-inherit",children:m.jsx(I3,{size:20})}),m.jsx("span",{children:"Favorites"})]})]}),m.jsx("div",{className:"h-px bg-gray-200 my-4"}),m.jsxs("div",{children:[m.jsxs(Ws,{to:"/settings",className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l("/settings")?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[m.jsx("span",{className:"flex mr-3 text-inherit",children:m.jsx(j3,{size:20})}),m.jsx("span",{children:"Settings"})]}),t&&m.jsxs("button",{onClick:()=>{e(),s(!1)},className:"flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out text-gray-500 font-normal w-full text-left border-none bg-transparent",children:[m.jsx("span",{className:"flex mr-3 text-inherit",children:m.jsx(D3,{size:20})}),m.jsx("span",{children:"Logout"})]})]})]})]})]})}function Os({children:t}){const{loading:e}=sc();return e?m.jsx("div",{className:"min-h-screen flex items-center justify-center",children:m.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):m.jsxs("div",{className:"flex flex-row h-screen w-full overflow-hidden bg-white",children:[m.jsx("div",{className:"flex-none w-16",children:m.jsx(W3,{})}),m.jsx("div",{className:"flex-grow overflow-y-auto",children:m.jsx("main",{className:"py-6 px-6 w-full",children:t})})]})}function js({children:t}){const{user:e,loading:r}=sc(),i=fr();return r?m.jsx("div",{className:"flex justify-center items-center min-h-screen",children:m.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):e?t:m.jsx(NI,{to:"/login",state:{from:i},replace:!0})}var mC={exports:{}},q3="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",G3=q3,K3=G3;function gC(){}function vC(){}vC.resetWarningCache=gC;var Y3=function(){function t(i,s,a,o,l,u){if(u!==K3){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:vC,resetWarningCache:gC};return r.PropTypes=r,r};mC.exports=Y3();var X3=mC.exports;const tt=No(X3);var yC={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var a="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(a=s(a,i(l)))}return a}function i(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return r.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var o="";for(var l in a)e.call(a,l)&&a[l]&&(o=s(o,l));return o}function s(a,o){return o?a?a+" "+o:a+o:a}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(yC);var Q3=yC.exports;const _C=No(Q3);var J3=["top","left","transform","className","children","innerRef"];function nv(){return nv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},nv.apply(this,arguments)}function Z3(t,e){if(t==null)return{};var r={},i=Object.keys(t),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function jh(t){var e=t.top,r=e===void 0?0:e,i=t.left,s=i===void 0?0:i,a=t.transform,o=t.className,l=t.children,u=t.innerRef,c=Z3(t,J3);return Re.createElement("g",nv({ref:u,className:_C("visx-group",o),transform:a||"translate("+s+", "+r+")"},c),l)}jh.propTypes={top:tt.number,left:tt.number,transform:tt.string,className:tt.string,children:tt.node,innerRef:tt.oneOfType([tt.string,tt.func,tt.object])};var eU=Array.prototype.slice;function tU(t){for(var e=t.length,r,i;e;)i=Math.random()*e--|0,r=t[e],t[e]=t[i],t[i]=r;return t}function nU(t){for(var e=0,r=(t=tU(eU.call(t))).length,i=[],s,a;e<r;)s=t[e],a&&wC(a,s)?++e:(a=iU(i=rU(i,s)),e=0);return a}function rU(t,e){var r,i;if(am(e,t))return[e];for(r=0;r<t.length;++r)if(ld(e,t[r])&&am(Ul(t[r],e),t))return[t[r],e];for(r=0;r<t.length-1;++r)for(i=r+1;i<t.length;++i)if(ld(Ul(t[r],t[i]),e)&&ld(Ul(t[r],e),t[i])&&ld(Ul(t[i],e),t[r])&&am(bC(t[r],t[i],e),t))return[t[r],t[i],e];throw new Error}function ld(t,e){var r=t.r-e.r,i=e.x-t.x,s=e.y-t.y;return r<0||r*r<i*i+s*s}function wC(t,e){var r=t.r-e.r+1e-6,i=e.x-t.x,s=e.y-t.y;return r>0&&r*r>i*i+s*s}function am(t,e){for(var r=0;r<e.length;++r)if(!wC(t,e[r]))return!1;return!0}function iU(t){switch(t.length){case 1:return sU(t[0]);case 2:return Ul(t[0],t[1]);case 3:return bC(t[0],t[1],t[2])}}function sU(t){return{x:t.x,y:t.y,r:t.r}}function Ul(t,e){var r=t.x,i=t.y,s=t.r,a=e.x,o=e.y,l=e.r,u=a-r,c=o-i,h=l-s,f=Math.sqrt(u*u+c*c);return{x:(r+a+u/f*h)/2,y:(i+o+c/f*h)/2,r:(f+s+l)/2}}function bC(t,e,r){var i=t.x,s=t.y,a=t.r,o=e.x,l=e.y,u=e.r,c=r.x,h=r.y,f=r.r,p=i-o,g=i-c,_=s-l,A=s-h,R=u-a,E=f-a,b=i*i+s*s-a*a,T=b-o*o-l*l+u*u,D=b-c*c-h*h+f*f,U=g*_-p*A,j=(_*D-A*T)/(U*2)-i,P=(A*R-_*E)/U,I=(g*T-p*D)/(U*2)-s,y=(p*E-g*R)/U,w=P*P+y*y-1,S=2*(a+j*P+I*y),M=j*j+I*I-a*a,N=-(w?(S+Math.sqrt(S*S-4*w*M))/(2*w):M/S);return{x:i+j+P*N,y:s+I+y*N,r:N}}function bx(t,e,r){var i=t.x-e.x,s,a,o=t.y-e.y,l,u,c=i*i+o*o;c?(a=e.r+r.r,a*=a,u=t.r+r.r,u*=u,a>u?(s=(c+u-a)/(2*c),l=Math.sqrt(Math.max(0,u/c-s*s)),r.x=t.x-s*i-l*o,r.y=t.y-s*o+l*i):(s=(c+a-u)/(2*c),l=Math.sqrt(Math.max(0,a/c-s*s)),r.x=e.x+s*i-l*o,r.y=e.y+s*o+l*i)):(r.x=e.x+r.r,r.y=e.y)}function xx(t,e){var r=t.r+e.r-1e-6,i=e.x-t.x,s=e.y-t.y;return r>0&&r*r>i*i+s*s}function Ex(t){var e=t._,r=t.next._,i=e.r+r.r,s=(e.x*r.r+r.x*e.r)/i,a=(e.y*r.r+r.y*e.r)/i;return s*s+a*a}function ud(t){this._=t,this.next=null,this.previous=null}function aU(t){if(!(s=t.length))return 0;var e,r,i,s,a,o,l,u,c,h,f;if(e=t[0],e.x=0,e.y=0,!(s>1))return e.r;if(r=t[1],e.x=-r.r,r.x=e.r,r.y=0,!(s>2))return e.r+r.r;bx(r,e,i=t[2]),e=new ud(e),r=new ud(r),i=new ud(i),e.next=i.previous=r,r.next=e.previous=i,i.next=r.previous=e;e:for(l=3;l<s;++l){bx(e._,r._,i=t[l]),i=new ud(i),u=r.next,c=e.previous,h=r._.r,f=e._.r;do if(h<=f){if(xx(u._,i._)){r=u,e.next=r,r.previous=e,--l;continue e}h+=u._.r,u=u.next}else{if(xx(c._,i._)){e=c,e.next=r,r.previous=e,--l;continue e}f+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=e,i.next=r,e.next=r.previous=r=i,a=Ex(e);(i=i.next)!==r;)(o=Ex(i))<a&&(e=i,a=o);r=e.next}for(e=[r._],i=r;(i=i.next)!==r;)e.push(i._);for(i=nU(e),l=0;l<s;++l)e=t[l],e.x-=i.x,e.y-=i.y;return i.r}function oU(t){return t==null?null:lU(t)}function lU(t){if(typeof t!="function")throw new Error;return t}function Tx(){return 0}function uU(t){return function(){return t}}function cU(t){return Math.sqrt(t.value)}function dU(){var t=null,e=1,r=1,i=Tx;function s(a){return a.x=e/2,a.y=r/2,t?a.eachBefore(Sx(t)).eachAfter(om(i,.5)).eachBefore(Ix(1)):a.eachBefore(Sx(cU)).eachAfter(om(Tx,1)).eachAfter(om(i,a.r/Math.min(e,r))).eachBefore(Ix(Math.min(e,r)/(2*a.r))),a}return s.radius=function(a){return arguments.length?(t=oU(a),s):t},s.size=function(a){return arguments.length?(e=+a[0],r=+a[1],s):[e,r]},s.padding=function(a){return arguments.length?(i=typeof a=="function"?a:uU(+a),s):i},s}function Sx(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function om(t,e){return function(r){if(i=r.children){var i,s,a=i.length,o=t(r)*e||0,l;if(o)for(s=0;s<a;++s)i[s].r+=o;if(l=aU(i),o)for(s=0;s<a;++s)i[s].r-=o;r.r=l+o}}}function Ix(t){return function(e){var r=e.parent;e.r*=t,r&&(e.x=r.x+t*e.x,e.y=r.y+t*e.y)}}function xC(t){var e=t.node,r=e===void 0?{x:0,y:0,r:15}:e;return Re.createElement("circle",{cx:r.x,cy:r.y,r:r.r||15,fill:"#21D4FD"})}xC.propTypes={node:tt.shape({x:tt.number.isRequired,y:tt.number.isRequired,r:tt.number})};function EC(t){var e=t.top,r=t.left,i=t.className,s=t.root,a=t.radius,o=t.size,l=t.padding,u=t.children,c=t.nodeComponent,h=c===void 0?xC:c,f=dU();o&&f.size(o),a!==void 0&&f.radius(a),l&&f.padding(l);var p=f(s);return u?Re.createElement(Re.Fragment,null,u(p)):Re.createElement(jh,{top:e,left:r,className:_C("visx-pack",i)},h&&p.descendants().map(function(g,_){return Re.createElement(jh,{key:"pack-node-"+_},Re.createElement(h,{node:g}))}))}EC.propTypes={children:tt.func,top:tt.number,left:tt.number,className:tt.string,radius:tt.func,padding:tt.number};function hU(t){var e=0,r=t.children,i=r&&r.length;if(!i)e=1;else for(;--i>=0;)e+=r[i].value;t.value=e}function fU(){return this.eachAfter(hU)}function pU(t,e){let r=-1;for(const i of this)t.call(e,i,++r,this);return this}function mU(t,e){for(var r=this,i=[r],s,a,o=-1;r=i.pop();)if(t.call(e,r,++o,this),s=r.children)for(a=s.length-1;a>=0;--a)i.push(s[a]);return this}function gU(t,e){for(var r=this,i=[r],s=[],a,o,l,u=-1;r=i.pop();)if(s.push(r),a=r.children)for(o=0,l=a.length;o<l;++o)i.push(a[o]);for(;r=s.pop();)t.call(e,r,++u,this);return this}function vU(t,e){let r=-1;for(const i of this)if(t.call(e,i,++r,this))return i}function yU(t){return this.eachAfter(function(e){for(var r=+t(e.data)||0,i=e.children,s=i&&i.length;--s>=0;)r+=i[s].value;e.value=r})}function _U(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function wU(t){for(var e=this,r=bU(e,t),i=[e];e!==r;)e=e.parent,i.push(e);for(var s=i.length;t!==r;)i.splice(s,0,t),t=t.parent;return i}function bU(t,e){if(t===e)return t;var r=t.ancestors(),i=e.ancestors(),s=null;for(t=r.pop(),e=i.pop();t===e;)s=t,t=r.pop(),e=i.pop();return s}function xU(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function EU(){return Array.from(this)}function TU(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function SU(){var t=this,e=[];return t.each(function(r){r!==t&&e.push({source:r.parent,target:r})}),e}function*IU(){var t=this,e,r=[t],i,s,a;do for(e=r.reverse(),r=[];t=e.pop();)if(yield t,i=t.children)for(s=0,a=i.length;s<a;++s)r.push(i[s]);while(r.length)}function w_(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=AU)):e===void 0&&(e=CU);for(var r=new Vh(t),i,s=[r],a,o,l,u;i=s.pop();)if((o=e(i.data))&&(u=(o=Array.from(o)).length))for(i.children=o,l=u-1;l>=0;--l)s.push(a=o[l]=new Vh(o[l])),a.parent=i,a.depth=i.depth+1;return r.eachBefore(RU)}function kU(){return w_(this).eachBefore(PU)}function CU(t){return t.children}function AU(t){return Array.isArray(t)?t[1]:null}function PU(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function RU(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Vh(t){this.data=t,this.depth=this.height=0,this.parent=null}Vh.prototype=w_.prototype={constructor:Vh,count:fU,each:pU,eachAfter:gU,eachBefore:mU,find:vU,sum:yU,sort:_U,path:wU,ancestors:xU,descendants:EU,leaves:TU,links:SU,copy:kU,[Symbol.iterator]:IU};var kx=function(){function t(r){var i=r.x,s=i===void 0?0:i,a=r.y,o=a===void 0?0:a;this.x=0,this.y=0,this.x=s,this.y=o}var e=t.prototype;return e.value=function(){return{x:this.x,y:this.y}},e.toArray=function(){return[this.x,this.y]},t}();function DU(t){return!!t&&t instanceof Element}function NU(t){return!!t&&(t instanceof SVGElement||"ownerSVGElement"in t)}function MU(t){return!!t&&"createSVGPoint"in t}function LU(t){return!!t&&"getScreenCTM"in t}function OU(t){return!!t&&"changedTouches"in t}function jU(t){return!!t&&"clientX"in t}function VU(t){return!!t&&(t instanceof Event||"nativeEvent"in t&&t.nativeEvent instanceof Event)}function nu(){return nu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},nu.apply(this,arguments)}var lm={x:0,y:0};function FU(t){if(!t)return nu({},lm);if(OU(t))return t.changedTouches.length>0?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:nu({},lm);if(jU(t))return{x:t.clientX,y:t.clientY};var e=t==null?void 0:t.target,r=e&&"getBoundingClientRect"in e?e.getBoundingClientRect():null;return r?{x:r.x+r.width/2,y:r.y+r.height/2}:nu({},lm)}function Cx(t,e){if(!t||!e)return null;var r=FU(e),i=NU(t)?t.ownerSVGElement:t,s=LU(i)?i.getScreenCTM():null;if(MU(i)&&s){var a=i.createSVGPoint();return a.x=r.x,a.y=r.y,a=a.matrixTransform(s.inverse()),new kx({x:a.x,y:a.y})}var o=t.getBoundingClientRect();return new kx({x:r.x-o.left-t.clientLeft,y:r.y-o.top-t.clientTop})}function um(t,e){if(DU(t)&&e)return Cx(t,e);if(VU(t)){var r=t,i=r.target;if(i)return Cx(i,r)}return null}function UU(t,e,r){return Math.max(e,Math.min(t,r))}const dt={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function Ax(t,e,r){return e===0||Math.abs(e)===1/0?Math.pow(t,r*5):t*e*r/(e+r*t)}function Px(t,e,r,i=.15){return i===0?UU(t,e,r):t<e?-Ax(e-t,r-e,i)+e:t>r?+Ax(t-r,r-e,i)+r:t}function BU(t,[e,r],[i,s]){const[[a,o],[l,u]]=t;return[Px(e,a,o,i),Px(r,l,u,s)]}function $U(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zU(t){var e=$U(t,"string");return typeof e=="symbol"?e:String(e)}function At(t,e,r){return e=zU(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Rx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function yt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Rx(Object(r),!0).forEach(function(i){At(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Rx(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}const TC={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Dx(t){return t?t[0].toUpperCase()+t.slice(1):""}const HU=["enter","leave"];function WU(t=!1,e){return t&&!HU.includes(e)}function qU(t,e="",r=!1){const i=TC[t],s=i&&i[e]||e;return"on"+Dx(t)+Dx(s)+(WU(r,s)?"Capture":"")}const GU=["gotpointercapture","lostpointercapture"];function KU(t){let e=t.substring(2).toLowerCase();const r=!!~e.indexOf("passive");r&&(e=e.replace("passive",""));const i=GU.includes(e)?"capturecapture":"capture",s=!!~e.indexOf(i);return s&&(e=e.replace("capture","")),{device:e,capture:s,passive:r}}function YU(t,e=""){const r=TC[t],i=r&&r[e]||e;return t+i}function Ff(t){return"touches"in t}function IC(t){return Ff(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function XU(t){return Array.from(t.touches).filter(e=>{var r,i;return e.target===t.currentTarget||((r=t.currentTarget)===null||r===void 0||(i=r.contains)===null||i===void 0?void 0:i.call(r,e.target))})}function QU(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function kC(t){return Ff(t)?QU(t)[0]:t}function rv(t,e){try{const r=e.clientX-t.clientX,i=e.clientY-t.clientY,s=(e.clientX+t.clientX)/2,a=(e.clientY+t.clientY)/2,o=Math.hypot(r,i);return{angle:-(Math.atan2(r,i)*180)/Math.PI,distance:o,origin:[s,a]}}catch{}return null}function JU(t){return XU(t).map(e=>e.identifier)}function Nx(t,e){const[r,i]=Array.from(t.touches).filter(s=>e.includes(s.identifier));return rv(r,i)}function cm(t){const e=kC(t);return Ff(t)?e.identifier:e.pointerId}function Io(t){const e=kC(t);return[e.clientX,e.clientY]}const Mx=40,Lx=800;function CC(t){let{deltaX:e,deltaY:r,deltaMode:i}=t;return i===1?(e*=Mx,r*=Mx):i===2&&(e*=Lx,r*=Lx),[e,r]}function ZU(t){var e,r;const{scrollX:i,scrollY:s,scrollLeft:a,scrollTop:o}=t.currentTarget;return[(e=i??a)!==null&&e!==void 0?e:0,(r=s??o)!==null&&r!==void 0?r:0]}function eB(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:r,altKey:i,metaKey:s,ctrlKey:a}=t;Object.assign(e,{shiftKey:r,altKey:i,metaKey:s,ctrlKey:a})}return e}function Fh(t,...e){return typeof t=="function"?t(...e):t}function tB(){}function nB(...t){return t.length===0?tB:t.length===1?t[0]:function(){let e;for(const r of t)e=r.apply(this,arguments)||e;return e}}function Ox(t,e){return Object.assign({},e,t||{})}const rB=32;class AC{constructor(e,r,i){this.ctrl=e,this.args=r,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:r,ingKey:i,args:s}=this;r[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=s,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const r=this.state,i=this.config;r._active||(this.reset(),this.computeInitial(),r._active=!0,r.target=e.target,r.currentTarget=e.currentTarget,r.lastOffset=i.from?Fh(i.from,r):r.offset,r.offset=r.lastOffset,r.startTime=r.timeStamp=e.timeStamp)}computeValues(e){const r=this.state;r._values=e,r.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:r,config:i,shared:s}=this;r.args=this.args;let a=0;if(e&&(r.event=e,i.preventDefault&&e.cancelable&&r.event.preventDefault(),r.type=e.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,eB(e)),s.down=s.pressed=s.buttons%2===1||s.touches>0,a=e.timeStamp-r.timeStamp,r.timeStamp=e.timeStamp,r.elapsedTime=r.timeStamp-r.startTime),r._active){const j=r._delta.map(Math.abs);dt.addTo(r._distance,j)}this.axisIntent&&this.axisIntent(e);const[o,l]=r._movement,[u,c]=i.threshold,{_step:h,values:f}=r;if(i.hasCustomTransform?(h[0]===!1&&(h[0]=Math.abs(o)>=u&&f[0]),h[1]===!1&&(h[1]=Math.abs(l)>=c&&f[1])):(h[0]===!1&&(h[0]=Math.abs(o)>=u&&Math.sign(o)*u),h[1]===!1&&(h[1]=Math.abs(l)>=c&&Math.sign(l)*c)),r.intentional=h[0]!==!1||h[1]!==!1,!r.intentional)return;const p=[0,0];if(i.hasCustomTransform){const[j,P]=f;p[0]=h[0]!==!1?j-h[0]:0,p[1]=h[1]!==!1?P-h[1]:0}else p[0]=h[0]!==!1?o-h[0]:0,p[1]=h[1]!==!1?l-h[1]:0;this.restrictToAxis&&!r._blocked&&this.restrictToAxis(p);const g=r.offset,_=r._active&&!r._blocked||r.active;_&&(r.first=r._active&&!r.active,r.last=!r._active&&r.active,r.active=s[this.ingKey]=r._active,e&&(r.first&&("bounds"in i&&(r._bounds=Fh(i.bounds,r)),this.setup&&this.setup()),r.movement=p,this.computeOffset()));const[A,R]=r.offset,[[E,b],[T,D]]=r._bounds;r.overflow=[A<E?-1:A>b?1:0,R<T?-1:R>D?1:0],r._movementBound[0]=r.overflow[0]?r._movementBound[0]===!1?r._movement[0]:r._movementBound[0]:!1,r._movementBound[1]=r.overflow[1]?r._movementBound[1]===!1?r._movement[1]:r._movementBound[1]:!1;const U=r._active?i.rubberband||[0,0]:[0,0];if(r.offset=BU(r._bounds,r.offset,U),r.delta=dt.sub(r.offset,g),this.computeMovement(),_&&(!r.last||a>rB)){r.delta=dt.sub(r.offset,g);const j=r.delta.map(Math.abs);dt.addTo(r.distance,j),r.direction=r.delta.map(Math.sign),r._direction=r._delta.map(Math.sign),!r.first&&a>0&&(r.velocity=[j[0]/a,j[1]/a],r.timeDelta=a)}}emit(){const e=this.state,r=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const s=this.handler(yt(yt(yt({},r),e),{},{[this.aliasKey]:e.values}));s!==void 0&&(e.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function iB([t,e],r){const i=Math.abs(t),s=Math.abs(e);if(i>s&&i>r)return"x";if(s>i&&s>r)return"y"}class ac extends AC{constructor(...e){super(...e),At(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=dt.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=dt.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const r=this.state,i=this.config;if(!r.axis&&e){const s=typeof i.axisThreshold=="object"?i.axisThreshold[IC(e)]:i.axisThreshold;r.axis=iB(r._movement,s)}r._blocked=(i.lockDirection||!!i.axis)&&!r.axis||!!i.axis&&i.axis!==r.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const sB=t=>t,jx=.15,PC={enabled(t=!0){return t},eventOptions(t,e,r){return yt(yt({},r.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[jx,jx];case!1:return[0,0];default:return dt.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return dt.toVector(t)},transform(t,e,r){const i=t||r.shared.transform;return this.hasCustomTransform=!!i,i||sB},threshold(t){return dt.toVector(t,0)}},aB=0,va=yt(yt({},PC),{},{axis(t,e,{axis:r}){if(this.lockDirection=r==="lock",!this.lockDirection)return r},axisThreshold(t=aB){return t},bounds(t={}){if(typeof t=="function")return a=>va.bounds(t(a));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:r=1/0,top:i=-1/0,bottom:s=1/0}=t;return[[e,r],[i,s]]}}),Vx={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class oB extends ac{constructor(...e){super(...e),At(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const r=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),s={left:r.left-i.left+e.offset[0],right:r.right-i.right+e.offset[0],top:r.top-i.top+e.offset[1],bottom:r.bottom-i.bottom+e.offset[1]};e._bounds=va.bounds(s)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const r=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(r.pointerButtons)?!r.pointerButtons.includes(e.buttons):r.pointerButtons!==-1&&r.pointerButtons!==e.buttons))return;const s=this.ctrl.setEventIds(e);r.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(s&&s.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=cm(e),i._pointerActive=!0,this.computeValues(Io(e)),this.computeInitial(),r.preventScrollAxis&&IC(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):r.delay>0?(this.setupDelayTrigger(e),r.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const r=this.state;r._active=!0,r._preventScroll=!0,r._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const r=this.state,i=this.config;if(!r._pointerActive)return;const s=cm(e);if(r._pointerId!==void 0&&s!==r._pointerId)return;const a=Io(e);if(document.pointerLockElement===e.target?r._delta=[e.movementX,e.movementY]:(r._delta=dt.sub(a,r._values),this.computeValues(a)),dt.addTo(r._movement,r._delta),this.compute(e),r._delayed&&r.intentional){this.timeoutStore.remove("dragDelay"),r.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!r._preventScroll)if(r.axis)if(r.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){r._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const r=this.state,i=this.config;if(!r._active||!r._pointerActive)return;const s=cm(e);if(r._pointerId!==void 0&&s!==r._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[a,o]=r._distance;if(r.tap=a<=i.tapsThreshold&&o<=i.tapsThreshold,r.tap&&i.filterTaps)r._force=!0;else{const[l,u]=r._delta,[c,h]=r._movement,[f,p]=i.swipe.velocity,[g,_]=i.swipe.distance,A=i.swipe.duration;if(r.elapsedTime<A){const R=Math.abs(l/r.timeDelta),E=Math.abs(u/r.timeDelta);R>f&&Math.abs(c)>g&&(r.swipe[0]=Math.sign(l)),E>p&&Math.abs(h)>_&&(r.swipe[1]=Math.sign(u))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const r=this.config,i=r.device;r.pointerLock&&e.currentTarget.requestPointerLock(),r.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,lB(e);const r=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",r),this.eventStore.add(this.sharedConfig.window,"touch","cancel",r),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const r=Vx[e.key];if(r){const i=this.state,s=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=r(this.config.keyboardDisplacement,s),i._keyboardActive=!0,dt.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in Vx&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const r=this.config.device;e(r,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(r,"change",this.pointerMove.bind(this)),e(r,"end",this.pointerUp.bind(this)),e(r,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function lB(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const oc=typeof window<"u"&&window.document&&window.document.createElement;function RC(){return oc&&"ontouchstart"in window}function uB(){return RC()||oc&&window.navigator.maxTouchPoints>1}function cB(){return oc&&"onpointerdown"in window}function dB(){return oc&&"exitPointerLock"in window.document}function hB(){try{return"constructor"in GestureEvent}catch{return!1}}const ir={isBrowser:oc,gesture:hB(),touch:RC(),touchscreen:uB(),pointer:cB(),pointerLock:dB()},fB=250,pB=180,mB=.5,gB=50,vB=250,yB=10,Fx={mouse:0,touch:0,pen:8},_B=yt(yt({},va),{},{device(t,e,{pointer:{touch:r=!1,lock:i=!1,mouse:s=!1}={}}){return this.pointerLock=i&&ir.pointerLock,ir.touch&&r?"touch":this.pointerLock?"mouse":ir.pointer&&!s?"pointer":ir.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:r}){if(this.preventScrollDelay=typeof r=="number"?r:r||r===void 0&&t?fB:void 0,!(!ir.touchscreen||r===!1))return t||(r!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:r=!0,buttons:i=1,keys:s=!0}={}}){return this.pointerButtons=i,this.keys=s,!this.pointerLock&&this.device==="pointer"&&r},threshold(t,e,{filterTaps:r=!1,tapsThreshold:i=3,axis:s=void 0}){const a=dt.toVector(t,r?i:s?1:0);return this.filterTaps=r,this.tapsThreshold=i,a},swipe({velocity:t=mB,distance:e=gB,duration:r=vB}={}){return{velocity:this.transform(dt.toVector(t)),distance:this.transform(dt.toVector(e)),duration:r}},delay(t=0){switch(t){case!0:return pB;case!1:return 0;default:return t}},axisThreshold(t){return t?yt(yt({},Fx),t):Fx},keyboardDisplacement(t=yB){return t}});function DC(t){const[e,r]=t.overflow,[i,s]=t._delta,[a,o]=t._direction;(e<0&&i>0&&a<0||e>0&&i<0&&a>0)&&(t._movement[0]=t._movementBound[0]),(r<0&&s>0&&o<0||r>0&&s<0&&o>0)&&(t._movement[1]=t._movementBound[1])}const wB=30,bB=100;class xB extends AC{constructor(...e){super(...e),At(this,"ingKey","pinching"),At(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:r,lastOffset:i}=this.state;e==="wheel"?this.state.offset=dt.add(r,i):this.state.offset=[(1+r[0])*i[0],r[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:r}=this.state;this.state.movement=[e[0]/r[0],e[1]-r[1]]}axisIntent(){const e=this.state,[r,i]=e._movement;if(!e.axis){const s=Math.abs(r)*wB-Math.abs(i);s<0?e.axis="angle":s>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const r=this.state,i=this.ctrl.touchIds;if(r._active&&r._touchIds.every(a=>i.has(a))||i.size<2)return;this.start(e),r._touchIds=Array.from(i).slice(0,2);const s=Nx(e,r._touchIds);s&&this.pinchStart(e,s)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const r=this.state,i=r._pointerEvents,s=this.ctrl.pointerIds;if(r._active&&Array.from(i.keys()).every(o=>s.has(o))||(i.size<2&&i.set(e.pointerId,e),r._pointerEvents.size<2))return;this.start(e);const a=rv(...Array.from(i.values()));a&&this.pinchStart(e,a)}pinchStart(e,r){const i=this.state;i.origin=r.origin,this.computeValues([r.distance,r.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const r=Nx(e,this.state._touchIds);r&&this.pinchMove(e,r)}pointerMove(e){const r=this.state._pointerEvents;if(r.has(e.pointerId)&&r.set(e.pointerId,e),!this.state._active)return;const i=rv(...Array.from(r.values()));i&&this.pinchMove(e,i)}pinchMove(e,r){const i=this.state,s=i._values[1],a=r.angle-s;let o=0;Math.abs(a)>270&&(o+=Math.sign(a)),this.computeValues([r.distance,r.angle-360*o]),i.origin=r.origin,i.turns=o,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(r=>!this.ctrl.touchIds.has(r))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const r=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}r._pointerEvents.has(e.pointerId)&&r._pointerEvents.delete(e.pointerId),r._active&&r._pointerEvents.size<2&&(r._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const r=this.state;r._active||(this.start(e),this.computeValues([e.scale,e.rotation]),r.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const r=this.state;this.computeValues([e.scale,e.rotation]),r.origin=[e.clientX,e.clientY];const i=r._movement;r._movement=[e.scale-1,e.rotation],r._delta=dt.sub(r._movement,i),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const r=this.config.modifierKey;r&&(Array.isArray(r)?!r.find(i=>e[i]):!e[r])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-CC(e)[1]/bB*i.offset[0],0],dt.addTo(i._movement,i._delta),DC(i),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const r=this.config.device;r&&(e(r,"start",this[r+"Start"].bind(this)),e(r,"change",this[r+"Move"].bind(this)),e(r,"end",this[r+"End"].bind(this)),e(r,"cancel",this[r+"End"].bind(this)),e("lostPointerCapture","",this[r+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const EB=yt(yt({},PC),{},{device(t,e,{shared:r,pointer:{touch:i=!1}={}}){if(r.target&&!ir.touch&&ir.gesture)return"gesture";if(ir.touch&&i)return"touch";if(ir.touchscreen){if(ir.pointer)return"pointer";if(ir.touch)return"touch"}},bounds(t,e,{scaleBounds:r={},angleBounds:i={}}){const s=o=>{const l=Ox(Fh(r,o),{min:-1/0,max:1/0});return[l.min,l.max]},a=o=>{const l=Ox(Fh(i,o),{min:-1/0,max:1/0});return[l.min,l.max]};return typeof r!="function"&&typeof i!="function"?[s(),a()]:o=>[s(o),a(o)]},threshold(t,e,r){return this.lockDirection=r.axis==="lock",dt.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});class TB extends ac{constructor(...e){super(...e),At(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(Io(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const r=Io(e),i=this.state;i._delta=dt.sub(r,i._values),dt.addTo(i._movement,i._delta),this.computeValues(r),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const SB=yt(yt({},va),{},{mouseOnly:(t=!0)=>t});class IB extends ac{constructor(...e){super(...e),At(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const r=this.state,i=ZU(e);r._delta=dt.sub(i,r._values),dt.addTo(r._movement,r._delta),this.computeValues(i),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const kB=va;class CB extends ac{constructor(...e){super(...e),At(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const r=this.state;r._delta=CC(e),dt.addTo(r._movement,r._delta),DC(r),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const AB=va;class PB extends ac{constructor(...e){super(...e),At(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(Io(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const r=this.state;if(!r._active)return;r._active=!1;const i=Io(e);r._movement=r._delta=dt.sub(i,r._values),this.computeValues(i),this.compute(e),r.delta=r.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const RB=yt(yt({},va),{},{mouseOnly:(t=!0)=>t}),b_=new Map,iv=new Map;function DB(t){b_.set(t.key,t.engine),iv.set(t.key,t.resolver)}const NB={key:"drag",engine:oB,resolver:_B},MB={key:"hover",engine:PB,resolver:RB},LB={key:"move",engine:TB,resolver:SB},OB={key:"pinch",engine:xB,resolver:EB},jB={key:"scroll",engine:IB,resolver:kB},VB={key:"wheel",engine:CB,resolver:AB};function FB(t,e){if(t==null)return{};var r={},i=Object.keys(t),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function UB(t,e){if(t==null)return{};var r=FB(t,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}const BB={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=ir.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},$B=["target","eventOptions","window","enabled","transform"];function $d(t={},e){const r={};for(const[i,s]of Object.entries(e))switch(typeof s){case"function":r[i]=s.call(r,t[i],i,t);break;case"object":r[i]=$d(t[i],s);break;case"boolean":s&&(r[i]=t[i]);break}return r}function zB(t,e,r={}){const i=t,{target:s,eventOptions:a,window:o,enabled:l,transform:u}=i,c=UB(i,$B);if(r.shared=$d({target:s,eventOptions:a,window:o,enabled:l,transform:u},BB),e){const h=iv.get(e);r[e]=$d(yt({shared:r.shared},c),h)}else for(const h in c){const f=iv.get(h);f&&(r[h]=$d(yt({shared:r.shared},c[h]),f))}return r}class NC{constructor(e,r){At(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=r}add(e,r,i,s,a){const o=this._listeners,l=YU(r,i),u=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},c=yt(yt({},u),a);e.addEventListener(l,s,c);const h=()=>{e.removeEventListener(l,s,c),o.delete(h)};return o.add(h),h}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class HB{constructor(){At(this,"_timeouts",new Map)}add(e,r,i=140,...s){this.remove(e),this._timeouts.set(e,window.setTimeout(r,i,...s))}remove(e){const r=this._timeouts.get(e);r&&window.clearTimeout(r)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class WB{constructor(e){At(this,"gestures",new Set),At(this,"_targetEventStore",new NC(this)),At(this,"gestureEventStores",{}),At(this,"gestureTimeoutStores",{}),At(this,"handlers",{}),At(this,"config",{}),At(this,"pointerIds",new Set),At(this,"touchIds",new Set),At(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),qB(this,e)}setEventIds(e){if(Ff(e))return this.touchIds=new Set(JU(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,r){this.handlers=e,this.nativeHandlers=r}applyConfig(e,r){this.config=zB(e,r,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const r=this.config.shared,i={};let s;if(!(r.target&&(s=r.target(),!s))){if(r.enabled){for(const o of this.gestures){const l=this.config[o],u=Ux(i,l.eventOptions,!!s);if(l.enabled){const c=b_.get(o);new c(this,e,o).bind(u)}}const a=Ux(i,r.eventOptions,!!s);for(const o in this.nativeHandlers)a(o,"",l=>this.nativeHandlers[o](yt(yt({},this.state.shared),{},{event:l,args:e})),void 0,!0)}for(const a in i)i[a]=nB(...i[a]);if(!s)return i;for(const a in i){const{device:o,capture:l,passive:u}=KU(a);this._targetEventStore.add(s,o,"",i[a],{capture:l,passive:u})}}}}function Ca(t,e){t.gestures.add(e),t.gestureEventStores[e]=new NC(t,e),t.gestureTimeoutStores[e]=new HB}function qB(t,e){e.drag&&Ca(t,"drag"),e.wheel&&Ca(t,"wheel"),e.scroll&&Ca(t,"scroll"),e.move&&Ca(t,"move"),e.pinch&&Ca(t,"pinch"),e.hover&&Ca(t,"hover")}const Ux=(t,e,r)=>(i,s,a,o={},l=!1)=>{var u,c;const h=(u=o.capture)!==null&&u!==void 0?u:e.capture,f=(c=o.passive)!==null&&c!==void 0?c:e.passive;let p=l?i:qU(i,s,h);r&&f&&(p+="Passive"),t[p]=t[p]||[],t[p].push(a)},GB=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function KB(t){const e={},r={},i=new Set;for(let s in t)GB.test(s)?(i.add(RegExp.lastMatch),r[s]=t[s]):e[s]=t[s];return[r,e,i]}function Aa(t,e,r,i,s,a){if(!t.has(r)||!b_.has(i))return;const o=r+"Start",l=r+"End",u=c=>{let h;return c.first&&o in e&&e[o](c),r in e&&(h=e[r](c)),c.last&&l in e&&e[l](c),h};s[i]=u,a[i]=a[i]||{}}function YB(t,e){const[r,i,s]=KB(t),a={};return Aa(s,r,"onDrag","drag",a,e),Aa(s,r,"onWheel","wheel",a,e),Aa(s,r,"onScroll","scroll",a,e),Aa(s,r,"onPinch","pinch",a,e),Aa(s,r,"onMove","move",a,e),Aa(s,r,"onHover","hover",a,e),{handlers:a,config:e,nativeHandlers:i}}function XB(t,e={},r,i){const s=Re.useMemo(()=>new WB(t),[]);if(s.applyHandlers(t,i),s.applyConfig(e,r),Re.useEffect(s.effect.bind(s)),Re.useEffect(()=>s.clean.bind(s),[]),e.target===void 0)return s.bind.bind(s)}function QB(t){return t.forEach(DB),function(r,i){const{handlers:s,nativeHandlers:a,config:o}=YB(r,i||{});return XB(s,o,void 0,a)}}function JB(t,e){return QB([NB,OB,jB,VB,LB,MB])(t,e||{})}function ZB(){return{scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0}}function MC(t){var e=t.scaleX,r=e===void 0?1:e,i=t.scaleY,s=i===void 0?1:i,a=t.translateX,o=a===void 0?0:a,l=t.translateY,u=l===void 0?0:l,c=t.skewX,h=c===void 0?0:c,f=t.skewY,p=f===void 0?0:f;return{scaleX:r,scaleY:s,translateX:o,translateY:u,skewX:h,skewY:p}}function LC(t){var e=t.scaleX,r=t.scaleY,i=t.translateX,s=t.translateY,a=t.skewX,o=t.skewY,l=e*r-o*a;return{scaleX:r/l,scaleY:e/l,translateX:(r*i-a*s)/-l,translateY:(o*i-e*s)/l,skewX:a/-l,skewY:o/-l}}function OC(t,e){var r=e.x,i=e.y;return{x:t.scaleX*r+t.skewX*i+t.translateX,y:t.skewY*r+t.scaleY*i+t.translateY}}function dm(t,e){var r=e.x,i=e.y;return OC(LC(t),{x:r,y:i})}function e6(t,e){e===void 0&&(e=void 0);var r=e||t;return MC({scaleX:t,scaleY:r})}function hm(t,e){return MC({translateX:t,translateY:e})}function Bx(t,e){return{scaleX:t.scaleX*e.scaleX+t.skewX*e.skewY,scaleY:t.skewY*e.skewX+t.scaleY*e.scaleY,translateX:t.scaleX*e.translateX+t.skewX*e.translateY+t.translateX,translateY:t.skewY*e.translateX+t.scaleY*e.translateY+t.translateY,skewX:t.scaleX*e.skewX+t.skewX*e.scaleY,skewY:t.skewY*e.scaleX+t.scaleY*e.skewY}}function sv(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];switch(e.length){case 0:throw new Error("composeMatrices() requires arguments: was called with no args");case 1:return e[0];case 2:return Bx(e[0],e[1]);default:{var i=e[0],s=e[1],a=e.slice(2),o=Bx(i,s);return sv.apply(void 0,[o].concat(a))}}}function av(){return av=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},av.apply(this,arguments)}var t6={scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0},n6=function(e){return-e.deltaY>0?{scaleX:1.1,scaleY:1.1}:{scaleX:.9,scaleY:.9}},r6=function(e){var r=e.offset,i=r[0],s=e.lastOffset,a=s[0];return{scaleX:i-a<0?.9:1.1,scaleY:i-a<0?.9:1.1}};function jC(t){var e=t.scaleXMin,r=e===void 0?0:e,i=t.scaleXMax,s=i===void 0?1/0:i,a=t.scaleYMin,o=a===void 0?0:a,l=t.scaleYMax,u=l===void 0?1/0:l,c=t.initialTransformMatrix,h=c===void 0?t6:c,f=t.wheelDelta,p=f===void 0?n6:f,g=t.pinchDelta,_=g===void 0?r6:g,A=t.width,R=t.height,E=t.constrain,b=t.children,T=L.useRef(null),D=L.useRef(h),U=L.useState(h),j=U[0],P=U[1],I=L.useState(!1),y=I[0],w=I[1],S=L.useState(void 0),M=S[0],N=S[1],G=L.useState(void 0),ee=G[0],ie=G[1],de=L.useCallback(function(V,F){if(E)return E(V,F);var $=V.scaleX,Q=V.scaleY,le=$>s||$<r,we=Q>u||Q<o;return le||we?F:V},[E,r,s,o,u]),q=L.useCallback(function(V){P(function(F){var $=de(V,F);return D.current=$,$})},[de]),Y=L.useCallback(function(V){var F=V.x,$=V.y;return OC(j,{x:F,y:$})},[j]),re=L.useCallback(function(V){var F=V.x,$=V.y;return dm(j,{x:F,y:$})},[j]),ne=L.useCallback(function(){q(h)},[h,q]),W=L.useCallback(function(V){var F=V.scaleX,$=V.scaleY,Q=V.point,le=$||F,we=Q||{x:A/2,y:R/2},Ie=dm(D.current,we),Le=sv(D.current,hm(Ie.x,Ie.y),e6(F,le),hm(-Ie.x,-Ie.y));if(q(Le),y){var Ye=D.current,Ce=Ye.translateX,ot=Ye.translateY;ie(Q),N({translateX:Ce,translateY:ot})}},[R,A,y,q]),H=L.useCallback(function(V){var F=V.translateX,$=V.translateY,Q=sv(j,hm(F,$));q(Q)},[q,j]),J=L.useCallback(function(V){var F=V.translateX,$=V.translateY,Q=av({},j,{translateX:F,translateY:$});q(Q)},[q,j]),X=L.useCallback(function(V){var F=V.x,$=V.y,Q=dm(j,{x:F,y:$});J({translateX:Q.x,translateY:Q.y})},[J,j]),ce=L.useCallback(function(){return LC(j)},[j]),me=L.useCallback(function(){var V=ce(),F=V.translateX,$=V.translateY,Q=V.scaleX,le=V.scaleY,we=V.skewX,Ie=V.skewY;return"matrix("+Q+", "+Ie+", "+we+", "+le+", "+F+", "+$+")"},[ce]),De=L.useCallback(function(V){var F=j.translateX,$=j.translateY;ie(um(V)||void 0),N({translateX:F,translateY:$}),w(!0)},[j]),Ae=L.useCallback(function(V,F){var $,Q;if(!(!y||!ee||!M)){var le=um(V),we=le?-(ee.x-le.x):-ee.x,Ie=le?-(ee.y-le.y):-ee.y,Le=M.translateX+we;F!=null&&F.offsetX&&(Le+=($=F==null?void 0:F.offsetX)!=null?$:0);var Ye=M.translateY+Ie;F!=null&&F.offsetY&&(Ye+=(Q=F==null?void 0:F.offsetY)!=null?Q:0),J({translateX:Le,translateY:Ye})}},[y,J,ee,M]),He=L.useCallback(function(){ie(void 0),N(void 0),w(!1)},[]),We=L.useCallback(function(V){V.preventDefault();var F=um(V)||void 0,$=p(V),Q=$.scaleX,le=$.scaleY;W({scaleX:Q,scaleY:le,point:F})},[W,p]),Xe=L.useCallback(function(V){var F=V.origin,$=F[0],Q=F[1],le=V.memo,we=le;if(T.current){var Ie,Le=(Ie=we)!=null?Ie:T.current.getBoundingClientRect(),Ye=Le.top,Ce=Le.left;we||(we={top:Ye,left:Ce});var ot=_(V),Wt=ot.scaleX,Rr=ot.scaleY;W({scaleX:Wt,scaleY:Rr,point:{x:$-Ce,y:Q-Ye}})}return we},[W,_]),Ke=L.useCallback(function(){var V=j.translateX,F=j.translateY,$=j.scaleX,Q=j.scaleY,le=j.skewX,we=j.skewY;return"matrix("+$+", "+we+", "+le+", "+Q+", "+V+", "+F+")"},[j]),qe=L.useCallback(function(){var V={x:A/2,y:R/2},F=re(V);H({translateX:F.x-V.x,translateY:F.y-V.y})},[R,A,re,H]),nt=L.useCallback(function(){q(ZB())},[q]);JB({onDragStart:function(F){var $=F.event;$ instanceof KeyboardEvent||De($)},onDrag:function(F){var $=F.event,Q=F.pinching,le=F.cancel;Q?(le(),He()):$ instanceof KeyboardEvent||Ae($)},onDragEnd:He,onPinch:Xe,onWheel:function(F){var $=F.event,Q=F.active,le=F.pinching;le||!Q||We($)}},{target:T,eventOptions:{passive:!1},drag:{filterTaps:!0}});var C={initialTransformMatrix:h,transformMatrix:j,isDragging:y,center:qe,clear:nt,scale:W,translate:H,translateTo:X,setTranslate:J,setTransformMatrix:q,reset:ne,handleWheel:We,handlePinch:Xe,dragEnd:He,dragMove:Ae,dragStart:De,toString:Ke,invert:ce,toStringInvert:me,applyToPoint:Y,applyInverseToPoint:re,containerRef:T};return Re.createElement(Re.Fragment,null,b(C))}jC.propTypes={width:tt.number.isRequired,height:tt.number.isRequired,wheelDelta:tt.func,scaleXMin:tt.number,scaleXMax:tt.number,scaleYMin:tt.number,scaleYMax:tt.number,constrain:tt.func,children:tt.func.isRequired};function i6(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var VC=i6,s6=typeof jc=="object"&&jc&&jc.Object===Object&&jc,a6=s6,o6=a6,l6=typeof self=="object"&&self&&self.Object===Object&&self,u6=o6||l6||Function("return this")(),FC=u6,c6=FC,d6=function(){return c6.Date.now()},h6=d6,f6=/\s/;function p6(t){for(var e=t.length;e--&&f6.test(t.charAt(e)););return e}var m6=p6,g6=m6,v6=/^\s+/;function y6(t){return t&&t.slice(0,g6(t)+1).replace(v6,"")}var _6=y6,w6=FC,b6=w6.Symbol,UC=b6,$x=UC,BC=Object.prototype,x6=BC.hasOwnProperty,E6=BC.toString,bl=$x?$x.toStringTag:void 0;function T6(t){var e=x6.call(t,bl),r=t[bl];try{t[bl]=void 0;var i=!0}catch{}var s=E6.call(t);return i&&(e?t[bl]=r:delete t[bl]),s}var S6=T6,I6=Object.prototype,k6=I6.toString;function C6(t){return k6.call(t)}var A6=C6,zx=UC,P6=S6,R6=A6,D6="[object Null]",N6="[object Undefined]",Hx=zx?zx.toStringTag:void 0;function M6(t){return t==null?t===void 0?N6:D6:Hx&&Hx in Object(t)?P6(t):R6(t)}var L6=M6;function O6(t){return t!=null&&typeof t=="object"}var j6=O6,V6=L6,F6=j6,U6="[object Symbol]";function B6(t){return typeof t=="symbol"||F6(t)&&V6(t)==U6}var $6=B6,z6=_6,Wx=VC,H6=$6,qx=NaN,W6=/^[-+]0x[0-9a-f]+$/i,q6=/^0b[01]+$/i,G6=/^0o[0-7]+$/i,K6=parseInt;function Y6(t){if(typeof t=="number")return t;if(H6(t))return qx;if(Wx(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=Wx(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=z6(t);var r=q6.test(t);return r||G6.test(t)?K6(t.slice(2),r?2:8):W6.test(t)?qx:+t}var X6=Y6,Q6=VC,fm=h6,Gx=X6,J6="Expected a function",Z6=Math.max,e5=Math.min;function t5(t,e,r){var i,s,a,o,l,u,c=0,h=!1,f=!1,p=!0;if(typeof t!="function")throw new TypeError(J6);e=Gx(e)||0,Q6(r)&&(h=!!r.leading,f="maxWait"in r,a=f?Z6(Gx(r.maxWait)||0,e):a,p="trailing"in r?!!r.trailing:p);function g(j){var P=i,I=s;return i=s=void 0,c=j,o=t.apply(I,P),o}function _(j){return c=j,l=setTimeout(E,e),h?g(j):o}function A(j){var P=j-u,I=j-c,y=e-P;return f?e5(y,a-I):y}function R(j){var P=j-u,I=j-c;return u===void 0||P>=e||P<0||f&&I>=a}function E(){var j=fm();if(R(j))return b(j);l=setTimeout(E,A(j))}function b(j){return l=void 0,p&&i?g(j):(i=s=void 0,o)}function T(){l!==void 0&&clearTimeout(l),c=0,i=u=s=l=void 0}function D(){return l===void 0?o:b(fm())}function U(){var j=fm(),P=R(j);if(i=arguments,s=this,u=j,P){if(l===void 0)return _(u);if(f)return clearTimeout(l),l=setTimeout(E,e),g(u)}return l===void 0&&(l=setTimeout(E,e)),o}return U.cancel=T,U.flush=D,U}var n5=t5;const r5=No(n5),Pa={top:40,right:40,bottom:40,left:40};function i5(t,e){const r=t.split(" "),i=[];let s="";return r.forEach(a=>{(s+" "+a).trim().length>e&&s?(i.push(s),s=a):s=s?`${s} ${a}`:a}),s&&i.push(s),i}function s5(){var S;const[t,e]=L.useState(null),[r,i]=L.useState(!0),[s,a]=L.useState(null),[o,l]=L.useState(null),[u,c]=L.useState(null),[h,f]=L.useState({width:window.innerWidth,height:window.innerHeight}),[p,g]=L.useState(150),[_,A]=L.useState(""),[R,E]=L.useState(1),b=Qr(),T=L.useCallback(r5(M=>{l(M)},50),[]);L.useEffect(()=>{const M=()=>{f({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",M),()=>window.removeEventListener("resize",M)},[]),L.useEffect(()=>{(async()=>{try{const N={},ee=(await Ln(pn(Rt,"interviewSummaries"))).docs.map(async de=>{const q=pn(Rt,"interviewSummaries",de.id,"subSummaries");(await Ln(q)).forEach(re=>{const ne=re.data();ne.keywords&&ne.keywords.split(",").map(W=>W.trim().toLowerCase()).forEach(W=>{N[W]=(N[W]||0)+1})})});await Promise.all(ee);const ie={name:"keywords",children:Object.entries(N).map(([de,q])=>({name:de,value:q}))};e(ie),i(!1)}catch(N){console.error("Error fetching data:",N),a("Error loading data"),i(!1)}})()},[]);const D=L.useMemo(()=>{if(!t)return null;let M=t.children;_&&(M=M.filter(ie=>ie.name.toLowerCase().includes(_.toLowerCase()))),M=M.filter(ie=>ie.value>=R),M=[...M].sort((ie,de)=>de.value-ie.value);const N=M.slice(0,p),G=M.slice(p),ee={name:"keywords",children:N};if(G.length>0&&!_){const ie=G.reduce((q,Y)=>q+Y.value,0),de=G.length;ee.children.push({name:`${de} more keywords`,value:ie,isOthers:!0})}return ee},[t,p,_,R]);if(r)return m.jsxs("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:[m.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),m.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]});if(s)return m.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-50 px-6",children:m.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg max-w-xl text-center",children:s})});if(!D)return null;const U=w_(D).sum(M=>M.value).sort((M,N)=>N.value-M.value),{width:j,height:P}=h,I=j-Pa.left-Pa.right,y=P-Pa.top-Pa.bottom,w=M=>{if(M.data.isOthers){g(N=>N+50);return}u&&u.name===M.data.name?c(null):c({name:M.data.name,value:M.data.value,x:M.x,y:M.y,r:M.r})};return U.children&&Math.max(...U.children.map(M=>M.value)),m.jsxs("div",{className:"w-full h-screen relative bg-gray-50 font-sans overflow-hidden",children:[m.jsxs("div",{className:"absolute top-4 left-4 z-40 bg-white bg-opacity-90 p-4 rounded-lg shadow-sm w-72",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:"Keyword Visualization"}),m.jsx("div",{className:"mb-3",children:m.jsx("input",{type:"text",placeholder:"Search keywords...",value:_,onChange:M=>A(M.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-sm"})}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Visible Keywords"}),m.jsxs("select",{value:p,onChange:M=>g(Number(M.target.value)),className:"w-full px-2 py-1.5 border border-gray-300 rounded-md text-sm",children:[m.jsx("option",{value:"50",children:"Top 50"}),m.jsx("option",{value:"100",children:"Top 100"}),m.jsx("option",{value:"150",children:"Top 150"}),m.jsx("option",{value:"200",children:"Top 200"}),m.jsx("option",{value:"300",children:"Top 300"}),m.jsx("option",{value:"500",children:"Top 500"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Min. Frequency"}),m.jsxs("select",{value:R,onChange:M=>E(Number(M.target.value)),className:"w-full px-2 py-1.5 border border-gray-300 rounded-md text-sm",children:[m.jsx("option",{value:"1",children:"1+"}),m.jsx("option",{value:"2",children:"2+"}),m.jsx("option",{value:"3",children:"3+"}),m.jsx("option",{value:"5",children:"5+"}),m.jsx("option",{value:"10",children:"10+"})]})]})]}),m.jsxs("p",{className:"text-xs text-gray-500 mt-3",children:["Showing ",((S=U.children)==null?void 0:S.length)||0," keywords",t&&t.children&&` of ${t.children.length} total`]})]}),u&&m.jsxs("div",{className:"absolute top-36 left-4 z-50 bg-white rounded-xl shadow-md p-4 max-w-xs border border-gray-200",children:[m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 m-0",children:u.name}),m.jsx("button",{onClick:()=>c(null),className:"bg-transparent border-0 text-gray-500 text-base cursor-pointer p-1 flex items-center justify-center rounded hover:bg-gray-100 hover:text-gray-900 transition-colors",children:""})]}),m.jsxs("p",{className:"text-sm text-gray-600 mt-2 mb-4",children:["This topic appears ",m.jsx("strong",{children:u.value})," times across all interviews."]}),m.jsx("div",{children:m.jsxs("button",{onClick:()=>b(`/playlist-builder?keywords=${encodeURIComponent(u.name)}`),className:"w-full py-2.5 px-4 bg-blue-600 text-white font-medium text-sm rounded-lg cursor-pointer flex items-center justify-center hover:bg-blue-700 transition-colors shadow-sm",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4 mr-2",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),"Watch related segments"]})})]}),m.jsx(jC,{width:j,height:P,scaleXMin:.5,scaleXMax:3,scaleYMin:.5,scaleYMax:3,initialTransformMatrix:{scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0},children:M=>m.jsxs("div",{className:"w-full h-full overflow-hidden relative touch-none flex justify-center items-center",children:[m.jsxs("svg",{width:"100%",height:"100%",ref:M.containerRef,className:"bg-white rounded-xl shadow-md mx-4 my-4 mt-20",children:[m.jsx("rect",{width:"100%",height:"100%",fill:"#ffffff",rx:14,onClick:()=>{M.reset(),c(null)}}),m.jsx(EC,{root:U,size:[I,y],padding:16,children:N=>{const G=N.descendants().filter(ee=>!ee.children);return m.jsx(jh,{transform:M.toString(),top:Pa.top+(y/2-N.r),left:Pa.left+(I/2-N.r),children:G.map((ee,ie)=>{const de=Math.max(ee.r,20),q=u&&u.name===ee.data.name,Y=ee.data.isOthers,re=Math.min(de/3.5,14),ne=Math.max(5,Math.floor(de/3)),W=i5(ee.data.name,ne),H=re,J=W.length>1?-((W.length-1)*H)/2:0,X=q?"#2563eb":Y?"#9ca3af":"#d1d5db",ce=q?3:1,me=q?"#f0f7ff":Y?"#f3f4f6":"#ffffff";return m.jsxs("g",{transform:`translate(${ee.x}, ${ee.y})`,onMouseEnter:()=>T({name:ee.data.name,value:ee.data.value,x:ee.x,y:ee.y,isOthers:ee.data.isOthers}),onMouseLeave:()=>T(null),onClick:()=>w(ee),className:"cursor-pointer",children:[m.jsx("circle",{r:de,fill:me,stroke:X,strokeWidth:ce,style:{transition:"fill 0.3s, stroke 0.3s, stroke-width 0.3s"}}),m.jsx("text",{textAnchor:"middle",fontSize:re,fontWeight:q?"bold":"normal",fill:Y?"#6b7280":"#111827",pointerEvents:"none",style:{fontFamily:"Inter, system-ui, sans-serif"},children:W.map((De,Ae)=>m.jsx("tspan",{x:"0",dy:Ae===0?J:H,children:De},Ae))})]},`circle-${ie}`)})})}})]}),o&&!u&&m.jsxs("div",{className:"absolute bg-gray-900 bg-opacity-90 text-white p-2 px-3 rounded-lg pointer-events-none text-sm z-50 shadow-md max-w-xs",style:{left:M.transformMatrix.translateX+o.x*M.transformMatrix.scaleX,top:M.transformMatrix.translateY+o.y*M.transformMatrix.scaleY-20},children:[m.jsx("div",{className:"font-semibold",children:o.name}),m.jsxs("div",{children:[o.value," mentions"]}),m.jsx("div",{className:"text-xs mt-1 text-blue-200",children:o.isOthers?"Click to show more keywords":"Click to explore"})]})]})}),m.jsxs("div",{className:"absolute bottom-4 right-4 bg-white bg-opacity-90 py-2 px-3 rounded-lg text-xs text-gray-600 shadow-sm flex items-center",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3.5 h-3.5 mr-1.5 text-gray-500",children:m.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})}),m.jsx("span",{children:"Scroll to zoom  Drag to pan  Click bubble to select"})]})]})}const a5="modulepreload",o5=function(t){return"/civil-rights-history-project/"+t},Kx={},l5=function(e,r,i){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(u=>{if(u=o5(u),u in Kx)return;Kx[u]=!0;const c=u.endsWith(".css"),h=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=c?"stylesheet":a5,c||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),c)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},u5=L.lazy(()=>l5(()=>import("./MapComponent-Bls9iizY.js").then(t=>t.M),[]));function c5(){const[t,e]=L.useState(!0),[r,i]=L.useState(null),[s,a]=L.useState([]);L.useEffect(()=>{u()},[]);const o=async c=>{try{await new Promise(p=>setTimeout(p,1e3));const f=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(c)}`)).json();if(f.length>0)return[parseFloat(f[0].lat),parseFloat(f[0].lon)]}catch(h){console.error("Error fetching coordinates:",h)}return null},l=c=>{if(!c)return null;const h=/(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,f=c==null?void 0:c.match(h);return f&&f[1]?f[1]:null},u=async()=>{try{e(!0);const c=await Ln(pn(Rt,"interviewSummaries")),h=[];for(const f of c.docs){const p=f.data(),{birthplace:g,name:_,videoEmbedLink:A}=p;if(g){const R=await o(g);if(R){const E=l(A),b=E?`https://img.youtube.com/vi/${E}/default.jpg`:"";h.push({position:R,name:_,birthplace:g,thumbnailURL:b,documentName:f.id})}}}console.log("Markers data:",h),a(h),e(!1)}catch(c){console.error("Error fetching birthplaces:",c),i("Failed to load map data"),e(!1)}};return r?m.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:m.jsx("div",{className:"text-red-500",children:r})}):m.jsxs("div",{className:"map-container",children:[!t&&s.length>0&&m.jsx(L.Suspense,{fallback:m.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}),children:m.jsx(u5,{markers:s})}),t&&m.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})})]})}const Yr=navigator?navigator.userAgent.toLowerCase():"no-user-agent-specified",ko=document?document.documentElement:null,d5=Yr?Yr.indexOf("phantom")!==-1:!1,lc=window&&"ActiveXObject"in window;lc&&Yr.match(/MSIE 9/i);const Uf=Yr.indexOf("webkit")!==-1;Yr.indexOf("android");const h5=Yr.search("android [23]")!==-1,ya=window?typeof window.orientation<"u":!1,f5=navigator&&window?navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&!window.PointerEvent:!1,p5=navigator&&window?window.PointerEvent&&navigator.pointerEnabled&&navigator.maxTouchPoints:f5,$C=window?window.opera:!1;Yr.indexOf("gecko");const Co=Yr.indexOf("gecko")!==-1&&!Uf&&!$C&&!lc;Yr.indexOf("chrome");const m5=Yr.indexOf("edge/")!==-1;ko&&lc&&"transition"in ko.style;window&&"WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix;ko&&"MozPerspective"in ko.style;ko&&"OTransition"in ko.style;let Yx=window?"devicePixelRatio"in window&&window.devicePixelRatio>1:!1;if(!Yx&&window&&"matchMedia"in window){let t=window.matchMedia("(min-resolution:144dpi)");Yx=t&&t.matches}const qr=window&&!window.L_NO_TOUCH&&!d5&&(p5||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);function g5(){var t=window.innerWidth,e=window.innerHeight,r="portrait";return t>e&&(r="landscape"),r}function uc(t){return typeof t=="string"?document.getElementById(t):t}function he(t,e,r){var i=document.createElement(t);return i.className=e,r&&r.appendChild(i),i}function Bl(t,e){var r=he("button",t,e);return r.type="button",r}function ov(t){for(var e={x:0,y:0};t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;return e}function zC(t){for(var e=document.documentElement.style,r=0;r<t.length;r++)if(t[r]in e)return t[r];return!1}zC(["transition","webkitTransition","OTransition","MozTransition","msTransition"]);zC(["transformProperty","WebkitTransform","OTransform","MozTransform","msTransform"]);class Fe extends Error{constructor(e,r){super(),this.name="TLError",this.message=e||"error",this.message_key=this.message,this.detail=r||""}}const Xx={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function HC(t){Xx[t.toLowerCase()]&&(t=Xx[t.toLowerCase()]);var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(i,s,a,o){return s+s+a+a+o+o});var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null}function Ze(t,e){var r;for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}function v5(t){return t==null?!1:t==!0||String(t).toLowerCase()=="true"||Number(t)==1}function ja(t){for(var e=Array.prototype.slice.call(arguments,1),r=0,i=e.length,s;r<i;r++)s=e[r]||{},Ze(t,s);return t}const WC=[];function y5(t){WC.push(t)}function Ue(t){WC.forEach(e=>{try{e(t)}catch(r){console&&console.log&&console.log("Error handling trace",r)}})}function ri(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}const Qx=function(){var t=0,e="_tl_id";return function(r){return r[e]=r[e]||++t,r[e]}}();function qn(t){return t&&typeof t.replace=="function"?t.replace(/^\s+|\s+$/g,""):""}function Sn(t,...e){for(let i of e)for(var r of Object.getOwnPropertyNames(i.prototype))t.prototype[r]=i.prototype[r]}function _5(t,e){if(e||(e=la(6)),!(e in t))return e;var r=e.match(/^(.+)(-\d+)?$/)[1],i=[];for(let a in t)a.match(/^(.+?)(-\d+)?$/)[1]==r&&i.push(a);e=r+"-"+(i.length+1);for(var s=i.length;i.indexOf(e)!=-1;s++)e=r+"-"+s;return e}function w5(t){var e=[];if(Object.keys)e=Object.keys(t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);for(var i=0;i<e.length;i++){var s=e[i];if(t[s]!=null&&typeof t[s]!="string"||qn(t[s]).length!=0)return!1}return!0}function pm(t){t=qn(t),t=t.toLowerCase();for(var e="/_,:;",r="aaaaaeeeeeiiiiooooouuuunc------",i=0,s=e.length;i<s;i++)t=t.replace(new RegExp(e.charAt(i),"g"),r.charAt(i));return t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),t=t.replace(/^([0-9])/,"_$1"),t}function la(t,e){var r=function(a){return Math.floor(Math.random()*a)},i=function(){var a="abcdefghijklmnopqurstuvwxyz";return a.substr(r(32),1)},s=function(a){for(var o="",l=0;l<a;l++)o+=i();return o};return e?e+"-"+s(t):"tl-"+s(t)}function b5(t,e,r){for(var i=0;i<t.length;i++)if(e<t[i])return t[i];return e}function x5(t,e,r){for(var i=t.length-1;i>=0;i--)if(e>t[i])return t[i];return e}function E5(t){return t==parseFloat(t)?!(t%2):void 0}function qC(t,e,r,i){for(var s=i||0,a=0;a<e.length;a++)e[a].data[r]==t&&(s=a);return s}function oo(t){return t&&(t=t.replace(/<a\b[^>]*>/i,""),t=t.replace(/<\/a>/i,""),t)}function T5(t,e){t.data=ja({},t.data,e),t.data.unique_id===""&&(t.data.unique_id=la(6))}function S5(t){return t.match(/<p>[\s\S]*?<\/p>/)?t:"<p>"+t+"</p>"}function Ao(t){return t=t.replace(/(<[^>]*>)+/g,""),t.replace('"',"'")}function lv(t,e,r){var i=function(l,u,c){c||(c="");var h=30;return u&&u.length>h&&(u=u.substring(0,h)+""),c+"<a class='tl-makelink' href='"+l+"' onclick='void(0)'>"+u+"</a>"},s=/\b(?:https?|ftp):\/\/([a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|])/gim,a=/(^|[^\/>])(www\.[\S]+(\b|$))/gim,o=/([a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+)/gim;return t.replace(s,function(l,u,c,h){if(c>0){var f=h[c-1];if(f=='"'||f=="'"||f=="=")return l}return i(l,u)}).replace(a,function(l,u,c,h,f){return i("http://"+c,c,u)}).replace(o,function(l,u,c,h){return i("mailto:"+u,u)})}function Bf(t){return t.replace(/(.*)www.dropbox.com\/(.*)/,"$1dl.dropboxusercontent.com/$2")}const _a={square:t=>{var e={w:0,h:0};return t.w>t.h&&t.h>0?(e.h=t.h,e.w=t.h):(e.w=t.w,e.h=t.w),e},r16_9:t=>t.w!==null&&t.w!==""?Math.round(t.w/16*9):t.h!==null&&t.h!==""?Math.round(t.h/9*16):0,r4_3:t=>{if(t.w!==null&&t.w!=="")return Math.round(t.w/4*3);if(t.h!==null&&t.h!=="")return Math.round(t.h/3*4)}};function I5(t){var e,r=[],i,s;e=t.toString(),e.match("&#038;")?e=e.replace("&#038;","&"):e.match("&#38;")?e=e.replace("&#38;","&"):e.match("&amp;")&&(e=e.replace("&amp;","&")),s=e.slice(e.indexOf("?")+1).split("&");for(var a=0;a<s.length;a++)i=s[a].split("="),r.push(i[0]),r[i[0]]=i[1];return r}function k5(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r+"="+t[r]);return"?"+e.join("&")}function C5(t,e){if(typeof t<"u"){var r=0;for(var i in t){if(e===r)return t[i];r++}return""}else return""}let A5=function(t){var e="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",r=e.length;return{encode:function(i){if(typeof i!="number"||i!==parseInt(i))throw'"encode" only accepts integers.';for(var s="";i;){var a=i%r;i=Math.floor(i/r),s=e[a].toString()+s}return s},decode:function(i){if(typeof i!="string")throw'"decode" only accepts strings.';for(var s=0;i;){var a=e.indexOf(i[0]);if(a<0)throw`"decode" can't find "`+i[0]+'" in the alphabet: "'+e+'"';var o=i.length-1;s+=a*Math.pow(r,o),i=i.substring(1)}return s}}}();function mm(t){if(typeof t=="string"){let s=t.match(/^\s*(\d+h)?(\d+m)?(\d+s)?\s*/i);if(s){var e=parseInt(s[1])||0,r=parseInt(s[2])||0,i=parseInt(s[3])||0;return i+r*60+e*60*60}}else if(typeof t=="number")return t;return 0}function P5(t){var e=new DOMParser().parseFromString(t,"text/html");return e.body.textContent||""}function R5(t){}function $f(t){var e=new R5;return e.get(t)}function Mu(t){return t==1?1:1-Math.pow(2,-10*t)}function qo(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}let Uh=function(){};Uh.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments)},r=function(){};r.prototype=this.prototype;var i=new r;i.constructor=e,e.prototype=i,e.superclass=this.prototype;for(var s in this)this.hasOwnProperty(s)&&s!=="prototype"&&s!=="superclass"&&(e[s]=this[s]);return t.statics&&(ja(e,t.statics),delete t.statics),t.includes&&(ja.apply(null,[i].concat(t.includes)),delete t.includes),t.options&&i.options&&(t.options=ja({},i.options,t.options)),ja(i,t),e.extend=Uh.extend,e.include=function(a){ja(this.prototype,a)},e};class In{on(e,r,i){if(!r)throw new Fe("No callback function provided");var s=this._tl_events=this._tl_events||{};return s[e]=s[e]||[],s[e].push({action:r,context:i||this}),this}addEventListener(e,r,i){return this.on(e,r,i)}hasEventListeners(e){var r="_tl_events";return r in this&&e in this[r]&&this[r][e].length>0}removeEventListener(e,r,i){if(!this.hasEventListeners(e))return this;for(var s=0,a=this._tl_events,o=a[e].length;s<o;s++)if(a[e][s].action===r&&(!i||a[e][s].context===i))return a[e].splice(s,1),this;return this}off(e,r,i){return this.removeEventListener(e,r,i)}fire(e,r){if(!this.hasEventListeners(e))return this;for(var i=Ze({type:e,target:this},r),s=this._tl_events[e].slice(),a=0,o=s.length;a<o;a++)s[a].action?s[a].action.call(s[a].context||this,i):Ue(`no action defined for ${e} listener`);return this}}function Ei(t,e){return D5(t,e)}const D5=function(){var t=document,e=window,r=e.performance,i=r&&(r.now||r.webkitNow||r.msNow||r.mozNow),s=i?function(){return i.call(r)}:function(){return+new Date},a=t.documentElement,o=!1,l=1e3,u=/^rgb\(|#/,c=/^([+\-])=([\d\.]+)/,h=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,f=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,p=/scale\(((?:[+\-]=)?([\d\.]+))\)/,g=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,_=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,A={lineHeight:1,zoom:1,zIndex:1,opacity:1,transform:1},R=function(){var W=t.createElement("a").style,H=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],J;for(J=0;J<H.length;J++)if(H[J]in W)return H[J]}(),E=function(){return typeof t.createElement("a").style.opacity<"u"}(),b=t.defaultView&&t.defaultView.getComputedStyle?function(W,H){H=H=="transform"?R:H,H=N(H);var J=null,X=t.defaultView.getComputedStyle(W,"");return X&&(J=X[H]),W.style[H]||J}:a.currentStyle?function(W,H){if(H=N(H),H=="opacity"){var J=100;try{J=W.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch{try{J=W.filters("alpha").opacity}catch{}}return J/100}var X=W.currentStyle?W.currentStyle[H]:null;return W.style[H]||X}:function(W,H){return W.style[N(H)]},T=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||function(W){e.setTimeout(function(){W(+new Date)},17)}}(),D=[];T(function(W){o=W>1e12!=s()>1e12});function U(W,H,J){if(Array.prototype.indexOf)return W.indexOf(H);for(J=0;J<W.length;++J)if(W[J]===H)return J}function j(W){var H,J=D.length;for(i&&W>1e12&&(W=s()),o&&(W=s()),H=J;H--;)D[H](W);D.length&&T(j)}function P(W){D.push(W)===1&&T(j)}function I(W){var H,J=U(D,W);J>=0&&(H=D.slice(J+1),D.length=J,D=D.concat(H))}function y(W,H){var J={},X;return(X=W.match(f))&&(J.rotate=re(X[1],H?H.rotate:null)),(X=W.match(p))&&(J.scale=re(X[1],H?H.scale:null)),(X=W.match(g))&&(J.skewx=re(X[1],H?H.skewx:null),J.skewy=re(X[3],H?H.skewy:null)),(X=W.match(_))&&(J.translatex=re(X[1],H?H.translatex:null),J.translatey=re(X[3],H?H.translatey:null)),J}function w(W){var H="";return"rotate"in W&&(H+="rotate("+W.rotate+"deg) "),"scale"in W&&(H+="scale("+W.scale+") "),"translatex"in W&&(H+="translate("+W.translatex+"px,"+W.translatey+"px) "),"skewx"in W&&(H+="skew("+W.skewx+"deg,"+W.skewy+"deg)"),H}function S(W,H,J){return"#"+(1<<24|W<<16|H<<8|J).toString(16).slice(1)}function M(W){var H=W.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(H?S(H[1],H[2],H[3]):W).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function N(W){return W.replace(/-(.)/g,function(H,J){return J.toUpperCase()})}function G(W){return typeof W=="function"}function ee(W){return Math.sin(W*Math.PI/2)}function ie(W,H,J,X,ce,me){X=G(X)?X:ne.easings[X]||ee;var De=W||l,Ae=this,He=me-ce,We=s(),Xe=0,Ke=0;function qe(nt){var C=nt-We;if(C>De||Xe)return me=isFinite(me)?me:1,Xe?Ke&&H(me):H(me),I(qe),J&&J.apply(Ae);isFinite(me)?H(He*X(C/De)+ce):H(X(C/De))}return P(qe),{stop:function(nt){Xe=1,Ke=nt,nt||(J=null)}}}function de(W,H){var J=W.length,X=[],ce,me;for(ce=0;ce<J;++ce)X[ce]=[W[ce][0],W[ce][1]];for(me=1;me<J;++me)for(ce=0;ce<J-me;++ce)X[ce][0]=(1-H)*X[ce][0]+H*X[parseInt(ce+1,10)][0],X[ce][1]=(1-H)*X[ce][1]+H*X[parseInt(ce+1,10)][1];return[X[0][0],X[0][1]]}function q(W,H,J){var X=[],ce,me,De,Ae;for(ce=0;ce<6;ce++)De=Math.min(15,parseInt(H.charAt(ce),16)),Ae=Math.min(15,parseInt(J.charAt(ce),16)),me=Math.floor((Ae-De)*W+De),me=me>15?15:me<0?0:me,X[ce]=me.toString(16);return"#"+X.join("")}function Y(W,H,J,X,ce,me,De){if(ce=="transform"){De={};for(var Ae in J[me][ce])De[Ae]=Ae in X[me][ce]?Math.round(((X[me][ce][Ae]-J[me][ce][Ae])*W+J[me][ce][Ae])*l)/l:J[me][ce][Ae];return De}else return typeof J[me][ce]=="string"?q(W,J[me][ce],X[me][ce]):(De=Math.round(((X[me][ce]-J[me][ce])*W+J[me][ce])*l)/l,ce in A||(De+=H[me][ce]||"px"),De)}function re(W,H,J,X,ce){return(J=c.exec(W))?(ce=parseFloat(J[2]))&&H+(J[1]=="+"?1:-1)*ce:parseFloat(W)}function ne(W,H){var J=W?J=isFinite(W.length)?W:[W]:[],X,ce=H.complete,me=H.duration,De=H.easing,Ae=H.bezier,He=[],We=[],Xe=[],Ke=[],qe,nt;for(Ae&&(qe=H.left,nt=H.top,delete H.right,delete H.bottom,delete H.left,delete H.top),X=J.length;X--;){if(He[X]={},We[X]={},Xe[X]={},Ae){var C=b(J[X],"left"),V=b(J[X],"top"),F=[re(G(qe)?qe(J[X]):qe||0,parseFloat(C)),re(G(nt)?nt(J[X]):nt||0,parseFloat(V))];Ke[X]=G(Ae)?Ae(J[X],F):Ae,Ke[X].push(F),Ke[X].unshift([parseInt(C,10),parseInt(V,10)])}for(var $ in H){switch($){case"complete":case"duration":case"easing":case"bezier":continue}var Q=b(J[X],$),le,we=G(H[$])?H[$](J[X]):H[$];if(typeof we=="string"&&u.test(we)&&!u.test(Q)){delete H[$];continue}He[X][$]=$=="transform"?y(Q):typeof we=="string"&&u.test(we)?M(Q).slice(1):parseFloat(Q),We[X][$]=$=="transform"?y(we,He[X][$]):typeof we=="string"&&we.charAt(0)=="#"?M(we).slice(1):re(we,parseFloat(Q)),typeof we=="string"&&(le=we.match(h))&&(Xe[X][$]=le[1])}}return ie.apply(J,[me,function(Ie,Le,Ye){for(X=J.length;X--;){Ae&&(Ye=de(Ke[X],Ie),J[X].style.left=Ye[0]+"px",J[X].style.top=Ye[1]+"px");for(var Ce in H)Le=Y(Ie,Xe,He,We,Ce,X),Ce=="transform"?J[X].style[R]=w(Le):Ce=="opacity"&&!E?J[X].style.filter="alpha(opacity="+Le*100+")":J[X].style[N(Ce)]=Le}},ce,De])}return ne.tween=ie,ne.getStyle=b,ne.bezier=de,ne.transform=R,ne.parseTransform=y,ne.formatTransform=w,ne.easings={},ne}();class Ii{show(e){e||(this._el.container.style.display="block")}hide(e){this._el.container.style.display="none"}addTo(e){e.appendChild(this._el.container),this.onAdd()}removeFrom(e){e.removeChild(this._el.container),this.onRemove()}animatePosition(e,r){var i={duration:this.options.duration,easing:this.options.ease};for(var s in e)e.hasOwnProperty(s)&&(i[s]=e[s]+"px");this.animator&&this.animator.stop(),this.animator=Ei(r,i)}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}setPosition(e,r){for(var i in e)e.hasOwnProperty(i)&&(r?r.style[i]=e[i]+"px":this._el.container.style[i]=e[i]+"px")}getPosition(){return ov(this._el.container)}}let N5=class{constructor(e,r,i){this._el={drag:e,move:e},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},i&&(this._el.move=i),this.options={enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:!1,right:!1},momentum_multiplier:2e3,duration:1e3,ease:qo},this.animator=null,this.dragevent=this.mousedrag,qr&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},Ze(this.options,r)}enable(e){this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){Pe.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Pe.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(e){this.options.constraint=e}_onDragStart(e){qr?e.originalEvent?(this.data.pagex.start=e.originalEvent.touches[0].screenX,this.data.pagey.start=e.originalEvent.touches[0].screenY):(this.data.pagex.start=e.targetTouches[0].screenX,this.data.pagey.start=e.targetTouches[0].screenY):(this.data.pagex.start=e.pageX,this.data.pagey.start=e.pageY),this.options.enable.x&&(this._el.move.style.left=this.data.pagex.start-this._el.move.offsetWidth/2+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.pagey.start-this._el.move.offsetHeight/2+"px"),this.data.pos.start=ov(this._el.drag),this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),Pe.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Pe.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(e){this.data.sliding=!1,Pe.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Pe.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(e){e.preventDefault(),this.data.sliding=!0,qr?e.originalEvent?(this.data.pagex.end=e.originalEvent.touches[0].screenX,this.data.pagey.end=e.originalEvent.touches[0].screenY):(this.data.pagex.end=e.targetTouches[0].screenX,this.data.pagey.end=e.targetTouches[0].screenY):(this.data.pagex.end=e.pageX,this.data.pagey.end=e.pageY),this.data.pos.end=ov(this._el.drag),this.data.new_pos.x=-(this.data.pagex.start-this.data.pagex.end-this.data.pos.start.x),this.data.new_pos.y=-(this.data.pagey.start-this.data.pagey.end-this.data.pos.start.y),this.options.enable.x&&(this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var e={x:0,y:0,time:0},r={x:0,y:0,time:0},i=!1;e.time=(new Date().getTime()-this.data.time.start)*10,r.time=(new Date().getTime()-this.data.time.start)*10,r.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),r.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),e.x=Math.round(r.x/r.time),e.y=Math.round(r.y/r.time),this.data.new_pos.x=Math.min(this.data.pos.end.x+e.x),this.data.new_pos.y=Math.min(this.data.pos.end.y+e.y),this.options.enable.x?this.data.new_pos.x<0&&(this.data.new_pos.x=0):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,r.time<3e3&&(i=!0),Math.abs(r.x)>1e4&&(this.data.direction="left",r.x>0&&(this.data.direction="right")),Math.abs(r.y)>1e4&&(this.data.direction="up",r.y>0&&(this.data.direction="down")),this._animateMomentum(),i&&this.fire("swipe_"+this.data.direction,this.data)}_animateMomentum(){var e={x:this.data.new_pos.x,y:this.data.new_pos.y},r={duration:this.options.duration,easing:Mu};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(e.y>this.options.constraint.bottom?e.y=this.options.constraint.bottom:e.y<this.options.constraint.top&&(e.y=this.options.constraint.top)),r.top=Math.floor(e.y)+"px"),this.options.enable.x&&((this.options.constraint.left||this.options.constraint.right)&&(e.x>this.options.constraint.left?e.x=this.options.constraint.left:e.x<this.options.constraint.right&&(e.x=this.options.constraint.right)),r.left=Math.floor(e.x)+"px"),this.animator=Ei(this._el.move,r),this.fire("momentum",this.data)}};Sn(In);var Pe={addListener:function(t,e,r,i){var s=Qx(r),a="_tl_"+e+s;if(!t[a]){var o=function(c){return r.call(i||t,c||Pe._getEvent())};if(qr&&e==="dblclick"&&this.addDoubleTapListener)this.addDoubleTapListener(t,o,s);else if("addEventListener"in t)if(e==="mousewheel")t.addEventListener("DOMMouseScroll",o,!1),t.addEventListener(e,o,!1);else if(e==="mouseenter"||e==="mouseleave"){var l=o,u=e==="mouseenter"?"mouseover":"mouseout";o=function(c){if(Pe._checkMouse(t,c))return l(c)},t.addEventListener(u,o,!1)}else t.addEventListener(e,o,!1);else"attachEvent"in t&&t.attachEvent("on"+e,o);t[a]=o}},removeListener:function(t,e,r){var i=Qx(r),s="_tl_"+e+i,a=t[s];a&&(qr&&e==="dblclick"&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,i):"removeEventListener"in t?e==="mousewheel"?(t.removeEventListener("DOMMouseScroll",a,!1),t.removeEventListener(e,a,!1)):e==="mouseenter"||e==="mouseleave"?t.removeEventListener(e==="mouseenter"?"mouseover":"mouseout",a,!1):t.removeEventListener(e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a),t[s]=null)},_checkMouse:function(t,e){var r=e.relatedTarget;if(!r)return!0;try{for(;r&&r!==t;)r=r.parentNode}catch{return!1}return r!==t},_getEvent:function(){var t=window.event;if(!t)for(var e=arguments.callee.caller;e&&(t=e.arguments[0],!(t&&window.Event===t.constructor));)e=e.caller;return t},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},disableClickPropagation:function(t){Pe.addListener(t,N5.START,Pe.stopPropagation),Pe.addListener(t,"click",Pe.stopPropagation),Pe.addListener(t,"dblclick",Pe.stopPropagation)},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stop:function(t){Pe.preventDefault(t),Pe.stopPropagation(t)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e}},ki=function(){var t,e,r,i,s=[],a=s.slice,o=s.filter,l=window.document,u={},c={},h={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},f=/^\s*<(\w+|!)[^>]*>/,p=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,g=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,_=/^(?:body|html)$/i,A=/([A-Z])/g,R=["val","css","html","text","data","width","height","offset"],E=["after","prepend","before","append"],b=l.createElement("table"),T=l.createElement("tr"),D={tr:l.createElement("tbody"),tbody:b,thead:b,tfoot:b,td:T,th:T,"*":l.createElement("div")},U=/complete|loaded|interactive/,j=/^[\w-]*$/,P={},I=P.toString,y={},w,S,M=l.createElement("div"),N={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},G=Array.isArray||function(C){return C instanceof Array};y.matches=function(C,V){if(!V||!C||C.nodeType!==1)return!1;var F=C.webkitMatchesSelector||C.mozMatchesSelector||C.oMatchesSelector||C.matchesSelector;if(F)return F.call(C,V);var $,Q=C.parentNode,le=!Q;return le&&(Q=M).appendChild(C),$=~y.qsa(Q,V).indexOf(C),le&&M.removeChild(C),$};function ee(C){return C==null?String(C):P[I.call(C)]||"object"}function ie(C){return ee(C)=="function"}function de(C){return C!=null&&C==C.window}function q(C){return C!=null&&C.nodeType==C.DOCUMENT_NODE}function Y(C){return ee(C)=="object"}function re(C){return Y(C)&&!de(C)&&Object.getPrototypeOf(C)==Object.prototype}function ne(C){return typeof C.length=="number"}function W(C){return o.call(C,function(V){return V!=null})}function H(C){return C.length>0?r.fn.concat.apply([],C):C}w=function(C){return C.replace(/-+(.)?/g,function(V,F){return F?F.toUpperCase():""})};function J(C){return C.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}S=function(C){return o.call(C,function(V,F){return C.indexOf(V)==F})};function X(C){return C in c?c[C]:c[C]=new RegExp("(^|\\s)"+C+"(\\s|$)")}function ce(C,V){return typeof V=="number"&&!h[J(C)]?V+"px":V}function me(C){var V,F;return u[C]||(V=l.createElement(C),l.body.appendChild(V),F=getComputedStyle(V,"").getPropertyValue("display"),V.parentNode.removeChild(V),F=="none"&&(F="block"),u[C]=F),u[C]}function De(C){return"children"in C?a.call(C.children):r.map(C.childNodes,function(V){if(V.nodeType==1)return V})}y.fragment=function(C,V,F){var $,Q,le;return p.test(C)&&($=r(l.createElement(RegExp.$1))),$||(C.replace&&(C=C.replace(g,"<$1></$2>")),V===t&&(V=f.test(C)&&RegExp.$1),V in D||(V="*"),le=D[V],le.innerHTML=""+C,$=r.each(a.call(le.childNodes),function(){le.removeChild(this)})),re(F)&&(Q=r($),r.each(F,function(we,Ie){R.indexOf(we)>-1?Q[we](Ie):Q.attr(we,Ie)})),$},y.Z=function(C,V){return C=C||[],C.__proto__=r.fn,C.selector=V||"",C},y.isZ=function(C){return C instanceof y.Z},y.init=function(C,V){var F;if(C)if(typeof C=="string")if(C=C.trim(),C[0]=="<"&&f.test(C))F=y.fragment(C,RegExp.$1,V),C=null;else{if(V!==t)return r(V).find(C);F=y.qsa(l,C)}else{if(ie(C))return r(l).ready(C);if(y.isZ(C))return C;if(G(C))F=W(C);else if(Y(C))F=[C],C=null;else if(f.test(C))F=y.fragment(C.trim(),RegExp.$1,V),C=null;else{if(V!==t)return r(V).find(C);F=y.qsa(l,C)}}else return y.Z();return y.Z(F,C)},r=function(C,V){return y.init(C,V)};function Ae(C,V,F){for(e in V)F&&(re(V[e])||G(V[e]))?(re(V[e])&&!re(C[e])&&(C[e]={}),G(V[e])&&!G(C[e])&&(C[e]=[]),Ae(C[e],V[e],F)):V[e]!==t&&(C[e]=V[e])}r.extend=function(C){var V,F=a.call(arguments,1);return typeof C=="boolean"&&(V=C,C=F.shift()),F.forEach(function($){Ae(C,$,V)}),C},y.qsa=function(C,V){var F,$=V[0]=="#",Q=!$&&V[0]==".",le=$||Q?V.slice(1):V,we=j.test(le);return q(C)&&we&&$?(F=C.getElementById(le))?[F]:[]:C.nodeType!==1&&C.nodeType!==9?[]:a.call(we&&!$?Q?C.getElementsByClassName(le):C.getElementsByTagName(V):C.querySelectorAll(V))};function He(C,V){return V==null?r(C):r(C).filter(V)}r.contains=function(C,V){return C!==V&&C.contains(V)};function We(C,V,F,$){return ie(V)?V.call(C,F,$):V}function Xe(C,V,F){F==null?C.removeAttribute(V):C.setAttribute(V,F)}function Ke(C,V){var F=C.className,$=F&&F.baseVal!==t;if(V===t)return $?F.baseVal:F;$?F.baseVal=V:C.className=V}function qe(C){var V;try{return C&&(C=="true"||(C=="false"?!1:C=="null"?null:!/^0/.test(C)&&!isNaN(V=Number(C))?V:/^[\[\{]/.test(C)?r.parseJSON(C):C))}catch{return C}}r.type=ee,r.isFunction=ie,r.isWindow=de,r.isArray=G,r.isPlainObject=re,r.isEmptyObject=function(C){var V;for(V in C)return!1;return!0},r.inArray=function(C,V,F){return s.indexOf.call(V,C,F)},r.camelCase=w,r.trim=function(C){return C==null?"":String.prototype.trim.call(C)},r.uuid=0,r.support={},r.expr={},r.map=function(C,V){var F,$=[],Q,le;if(ne(C))for(Q=0;Q<C.length;Q++)F=V(C[Q],Q),F!=null&&$.push(F);else for(le in C)F=V(C[le],le),F!=null&&$.push(F);return H($)},r.each=function(C,V){var F,$;if(ne(C)){for(F=0;F<C.length;F++)if(V.call(C[F],F,C[F])===!1)return C}else for($ in C)if(V.call(C[$],$,C[$])===!1)return C;return C},r.grep=function(C,V){return o.call(C,V)},window.JSON&&(r.parseJSON=JSON.parse),r.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(C,V){P["[object "+V+"]"]=V.toLowerCase()}),r.fn={forEach:s.forEach,reduce:s.reduce,push:s.push,sort:s.sort,indexOf:s.indexOf,concat:s.concat,map:function(C){return r(r.map(this,function(V,F){return C.call(V,F,V)}))},slice:function(){return r(a.apply(this,arguments))},ready:function(C){return U.test(l.readyState)&&l.body?C(r):l.addEventListener("DOMContentLoaded",function(){C(r)},!1),this},get:function(C){return C===t?a.call(this):this[C>=0?C:C+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(C){return s.every.call(this,function(V,F){return C.call(V,F,V)!==!1}),this},filter:function(C){return ie(C)?this.not(this.not(C)):r(o.call(this,function(V){return y.matches(V,C)}))},add:function(C,V){return r(S(this.concat(r(C,V))))},is:function(C){return this.length>0&&y.matches(this[0],C)},not:function(C){var V=[];if(ie(C)&&C.call!==t)this.each(function($){C.call(this,$)||V.push(this)});else{var F=typeof C=="string"?this.filter(C):ne(C)&&ie(C.item)?a.call(C):r(C);this.forEach(function($){F.indexOf($)<0&&V.push($)})}return r(V)},has:function(C){return this.filter(function(){return Y(C)?r.contains(this,C):r(this).find(C).size()})},eq:function(C){return C===-1?this.slice(C):this.slice(C,+C+1)},first:function(){var C=this[0];return C&&!Y(C)?C:r(C)},last:function(){var C=this[this.length-1];return C&&!Y(C)?C:r(C)},find:function(C){var V,F=this;return typeof C=="object"?V=r(C).filter(function(){var $=this;return s.some.call(F,function(Q){return r.contains(Q,$)})}):this.length==1?V=r(y.qsa(this[0],C)):V=this.map(function(){return y.qsa(this,C)}),V},closest:function(C,V){var F=this[0],$=!1;for(typeof C=="object"&&($=r(C));F&&!($?$.indexOf(F)>=0:y.matches(F,C));)F=F!==V&&!q(F)&&F.parentNode;return r(F)},parents:function(C){for(var V=[],F=this;F.length>0;)F=r.map(F,function($){if(($=$.parentNode)&&!q($)&&V.indexOf($)<0)return V.push($),$});return He(V,C)},parent:function(C){return He(S(this.pluck("parentNode")),C)},children:function(C){return He(this.map(function(){return De(this)}),C)},contents:function(){return this.map(function(){return a.call(this.childNodes)})},siblings:function(C){return He(this.map(function(V,F){return o.call(De(F.parentNode),function($){return $!==F})}),C)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(C){return r.map(this,function(V){return V[C]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=me(this.nodeName))})},replaceWith:function(C){return this.before(C).remove()},wrap:function(C){var V=ie(C);if(this[0]&&!V)var F=r(C).get(0),$=F.parentNode||this.length>1;return this.each(function(Q){r(this).wrapAll(V?C.call(this,Q):$?F.cloneNode(!0):F)})},wrapAll:function(C){if(this[0]){r(this[0]).before(C=r(C));for(var V;(V=C.children()).length;)C=V.first();r(C).append(this)}return this},wrapInner:function(C){var V=ie(C);return this.each(function(F){var $=r(this),Q=$.contents(),le=V?C.call(this,F):C;Q.length?Q.wrapAll(le):$.append(le)})},unwrap:function(){return this.parent().each(function(){r(this).replaceWith(r(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(C){return this.each(function(){var V=r(this);(C===t?V.css("display")=="none":C)?V.show():V.hide()})},prev:function(C){return r(this.pluck("previousElementSibling")).filter(C||"*")},next:function(C){return r(this.pluck("nextElementSibling")).filter(C||"*")},html:function(C){return arguments.length===0?this.length>0?this[0].innerHTML:null:this.each(function(V){var F=this.innerHTML;r(this).empty().append(We(this,C,V,F))})},text:function(C){return arguments.length===0?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=C===t?"":""+C})},attr:function(C,V){var F;return typeof C=="string"&&V===t?this.length==0||this[0].nodeType!==1?t:C=="value"&&this[0].nodeName=="INPUT"?this.val():!(F=this[0].getAttribute(C))&&C in this[0]?this[0][C]:F:this.each(function($){if(this.nodeType===1)if(Y(C))for(e in C)Xe(this,e,C[e]);else Xe(this,C,We(this,V,$,this.getAttribute(C)))})},removeAttr:function(C){return this.each(function(){this.nodeType===1&&Xe(this,C)})},prop:function(C,V){return C=N[C]||C,V===t?this[0]&&this[0][C]:this.each(function(F){this[C]=We(this,V,F,this[C])})},data:function(C,V){var F=this.attr("data-"+C.replace(A,"-$1").toLowerCase(),V);return F!==null?qe(F):t},val:function(C){return arguments.length===0?this[0]&&(this[0].multiple?r(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(V){this.value=We(this,C,V,this.value)})},offset:function(C){if(C)return this.each(function(F){var $=r(this),Q=We(this,C,F,$.offset()),le=$.offsetParent().offset(),we={top:Q.top-le.top,left:Q.left-le.left};$.css("position")=="static"&&(we.position="relative"),$.css(we)});if(this.length==0)return null;var V=this[0].getBoundingClientRect();return{left:V.left+window.pageXOffset,top:V.top+window.pageYOffset,width:Math.round(V.width),height:Math.round(V.height)}},css:function(C,V){if(arguments.length<2){var F=this[0],$=getComputedStyle(F,"");if(!F)return;if(typeof C=="string")return F.style[w(C)]||$.getPropertyValue(C);if(G(C)){var Q={};return r.each(G(C)?C:[C],function(we,Ie){Q[Ie]=F.style[w(Ie)]||$.getPropertyValue(Ie)}),Q}}var le="";if(ee(C)=="string")!V&&V!==0?this.each(function(){this.style.removeProperty(J(C))}):le=J(C)+":"+ce(C,V);else for(e in C)!C[e]&&C[e]!==0?this.each(function(){this.style.removeProperty(J(e))}):le+=J(e)+":"+ce(e,C[e])+";";return this.each(function(){this.style.cssText+=";"+le})},index:function(C){return C?this.indexOf(r(C)[0]):this.parent().children().indexOf(this[0])},hasClass:function(C){return C?s.some.call(this,function(V){return this.test(Ke(V))},X(C)):!1},addClass:function(C){return C?this.each(function(V){i=[];var F=Ke(this),$=We(this,C,V,F);$.split(/\s+/g).forEach(function(Q){r(this).hasClass(Q)||i.push(Q)},this),i.length&&Ke(this,F+(F?" ":"")+i.join(" "))}):this},removeClass:function(C){return this.each(function(V){if(C===t)return Ke(this,"");i=Ke(this),We(this,C,V,i).split(/\s+/g).forEach(function(F){i=i.replace(X(F)," ")}),Ke(this,i.trim())})},toggleClass:function(C,V){return C?this.each(function(F){var $=r(this),Q=We(this,C,F,Ke(this));Q.split(/\s+/g).forEach(function(le){(V===t?!$.hasClass(le):V)?$.addClass(le):$.removeClass(le)})}):this},scrollTop:function(C){if(this.length){var V="scrollTop"in this[0];return C===t?V?this[0].scrollTop:this[0].pageYOffset:this.each(V?function(){this.scrollTop=C}:function(){this.scrollTo(this.scrollX,C)})}},scrollLeft:function(C){if(this.length){var V="scrollLeft"in this[0];return C===t?V?this[0].scrollLeft:this[0].pageXOffset:this.each(V?function(){this.scrollLeft=C}:function(){this.scrollTo(C,this.scrollY)})}},position:function(){if(this.length){var C=this[0],V=this.offsetParent(),F=this.offset(),$=_.test(V[0].nodeName)?{top:0,left:0}:V.offset();return F.top-=parseFloat(r(C).css("margin-top"))||0,F.left-=parseFloat(r(C).css("margin-left"))||0,$.top+=parseFloat(r(V[0]).css("border-top-width"))||0,$.left+=parseFloat(r(V[0]).css("border-left-width"))||0,{top:F.top-$.top,left:F.left-$.left}}},offsetParent:function(){return this.map(function(){for(var C=this.offsetParent||l.body;C&&!_.test(C.nodeName)&&r(C).css("position")=="static";)C=C.offsetParent;return C})}},r.fn.detach=r.fn.remove,["width","height"].forEach(function(C){var V=C.replace(/./,function(F){return F[0].toUpperCase()});r.fn[C]=function(F){var $,Q=this[0];return F===t?de(Q)?Q["inner"+V]:q(Q)?Q.documentElement["scroll"+V]:($=this.offset())&&$[C]:this.each(function(le){Q=r(this),Q.css(C,We(this,F,le,Q[C]()))})}});function nt(C,V){V(C);for(var F in C.childNodes)nt(C.childNodes[F],V)}return E.forEach(function(C,V){var F=V%2;r.fn[C]=function(){var $,Q=r.map(arguments,function(Ie){return $=ee(Ie),$=="object"||$=="array"||Ie==null?Ie:y.fragment(Ie)}),le,we=this.length>1;return Q.length<1?this:this.each(function(Ie,Le){le=F?Le:Le.parentNode,Le=V==0?Le.nextSibling:V==1?Le.firstChild:V==2?Le:null,Q.forEach(function(Ye){if(we)Ye=Ye.cloneNode(!0);else if(!le)return r(Ye).remove();nt(le.insertBefore(Ye,Le),function(Ce){Ce.nodeName!=null&&Ce.nodeName.toUpperCase()==="SCRIPT"&&(!Ce.type||Ce.type==="text/javascript")&&!Ce.src&&window.eval.call(window,Ce.innerHTML)})})})},r.fn[F?C+"To":"insert"+(V?"Before":"After")]=function($){return r($)[C](this),this}}),y.Z.prototype=r.fn,y.uniq=S,y.deserializeValue=qe,r.zepto=y,r}();window.Zepto=ki;window.$===void 0&&(window.$=ki);(function(t){t.zepto.qsa;var e=1,r,i=Array.prototype.slice,s=t.isFunction,a=function(y){return typeof y=="string"},o={},l={},u="onfocusin"in window,c={focus:"focusin",blur:"focusout"},h={mouseenter:"mouseover",mouseleave:"mouseout"};l.click=l.mousedown=l.mouseup=l.mousemove="MouseEvents";function f(y){return y._zid||(y._zid=e++)}function p(y,w,S,M){if(w=g(w),w.ns)var N=_(w.ns);return(o[f(y)]||[]).filter(function(G){return G&&(!w.e||G.e==w.e)&&(!w.ns||N.test(G.ns))&&(!S||f(G.fn)===f(S))&&(!M||G.sel==M)})}function g(y){var w=(""+y).split(".");return{e:w[0],ns:w.slice(1).sort().join(" ")}}function _(y){return new RegExp("(?:^| )"+y.replace(" "," .* ?")+"(?: |$)")}function A(y,w){return y.del&&!u&&y.e in c||!!w}function R(y){return h[y]||u&&c[y]||y}function E(y,w,S,M,N,G,ee){var ie=f(y),de=o[ie]||(o[ie]=[]);w.split(/\s/).forEach(function(q){if(q=="ready")return t(document).ready(S);var Y=g(q);Y.fn=S,Y.sel=N,Y.e in h&&(S=function(ne){var W=ne.relatedTarget;if(!W||W!==this&&!t.contains(this,W))return Y.fn.apply(this,arguments)}),Y.del=G;var re=G||S;Y.proxy=function(ne){if(ne=P(ne),!ne.isImmediatePropagationStopped()){ne.data=M;var W=re.apply(y,ne._args==r?[ne]:[ne].concat(ne._args));return W===!1&&(ne.preventDefault(),ne.stopPropagation()),W}},Y.i=de.length,de.push(Y),"addEventListener"in y&&y.addEventListener(R(Y.e),Y.proxy,A(Y,ee))})}function b(y,w,S,M,N){var G=f(y);(w||"").split(/\s/).forEach(function(ee){p(y,ee,S,M).forEach(function(ie){delete o[G][ie.i],"removeEventListener"in y&&y.removeEventListener(R(ie.e),ie.proxy,A(ie,N))})})}t.event={add:E,remove:b},t.proxy=function(y,w){if(s(y)){var S=function(){return y.apply(w,arguments)};return S._zid=f(y),S}else{if(a(w))return t.proxy(y[w],y);throw new TypeError("expected function")}},t.fn.bind=function(y,w,S){return this.on(y,w,S)},t.fn.unbind=function(y,w){return this.off(y,w)},t.fn.one=function(y,w,S,M){return this.on(y,w,S,M,1)};var T=function(){return!0},D=function(){return!1},U=/^([A-Z]|returnValue$|layer[XY]$)/,j={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function P(y,w){return(w||!y.isDefaultPrevented)&&(w||(w=y),t.each(j,function(S,M){var N=w[S];y[S]=function(){return this[M]=T,N&&N.apply(w,arguments)},y[M]=D}),(w.defaultPrevented!==r?w.defaultPrevented:"returnValue"in w?w.returnValue===!1:w.getPreventDefault&&w.getPreventDefault())&&(y.isDefaultPrevented=T)),y}function I(y){var w,S={originalEvent:y};for(w in y)!U.test(w)&&y[w]!==r&&(S[w]=y[w]);return P(S,y)}t.fn.delegate=function(y,w,S){return this.on(w,y,S)},t.fn.undelegate=function(y,w,S){return this.off(w,y,S)},t.fn.live=function(y,w){return t(document.body).delegate(this.selector,y,w),this},t.fn.die=function(y,w){return t(document.body).undelegate(this.selector,y,w),this},t.fn.on=function(y,w,S,M,N){var G,ee,ie=this;return y&&!a(y)?(t.each(y,function(de,q){ie.on(de,w,S,q,N)}),ie):(!a(w)&&!s(M)&&M!==!1&&(M=S,S=w,w=r),(s(S)||S===!1)&&(M=S,S=r),M===!1&&(M=D),ie.each(function(de,q){N&&(G=function(Y){return b(q,Y.type,M),M.apply(this,arguments)}),w&&(ee=function(Y){var re,ne=t(Y.target).closest(w,q).get(0);if(ne&&ne!==q)return re=t.extend(I(Y),{currentTarget:ne,liveFired:q}),(G||M).apply(ne,[re].concat(i.call(arguments,1)))}),E(q,y,M,S,w,ee||G)}))},t.fn.off=function(y,w,S){var M=this;return y&&!a(y)?(t.each(y,function(N,G){M.off(N,w,G)}),M):(!a(w)&&!s(S)&&S!==!1&&(S=w,w=r),S===!1&&(S=D),M.each(function(){b(this,y,S,w)}))},t.fn.trigger=function(y,w){return y=a(y)||t.isPlainObject(y)?t.Event(y):P(y),y._args=w,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(y):t(this).triggerHandler(y,w)})},t.fn.triggerHandler=function(y,w){var S,M;return this.each(function(N,G){S=I(a(y)?t.Event(y):y),S._args=w,S.target=G,t.each(p(G,y.type||y),function(ee,ie){if(M=ie.proxy(S),S.isImmediatePropagationStopped())return!1})}),M},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(y){t.fn[y]=function(w){return w?this.bind(y,w):this.trigger(y)}}),["focus","blur"].forEach(function(y){t.fn[y]=function(w){return w?this.bind(y,w):this.each(function(){try{this[y]()}catch{}}),this}}),t.Event=function(y,w){a(y)||(w=y,y=w.type);var S=document.createEvent(l[y]||"Events"),M=!0;if(w)for(var N in w)N=="bubbles"?M=!!w[N]:S[N]=w[N];return S.initEvent(y,M,!0),P(S)}})(ki);(function(t){var e=0,r=window.document,i,s,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,o=/^(?:text|application)\/javascript/i,l=/^(?:text|application)\/xml/i,u="application/json",c="text/html",h=/^\s*$/;function f(w,S,M){var N=t.Event(S);return t(w).trigger(N,M),!N.isDefaultPrevented()}function p(w,S,M,N){if(w.global)return f(S||r,M,N)}t.active=0;function g(w){w.global&&t.active++===0&&p(w,null,"ajaxStart")}function _(w){w.global&&!--t.active&&p(w,null,"ajaxStop")}function A(w,S){var M=S.context;if(S.beforeSend.call(M,w,S)===!1||p(S,M,"ajaxBeforeSend",[w,S])===!1)return!1;p(S,M,"ajaxSend",[w,S])}function R(w,S,M,N){var G=M.context,ee="success";M.success.call(G,w,ee,S),N&&N.resolveWith(G,[w,ee,S]),p(M,G,"ajaxSuccess",[S,M,w]),b(ee,S,M)}function E(w,S,M,N,G){var ee=N.context;N.error.call(ee,M,S,w),G&&G.rejectWith(ee,[M,S,w]),p(N,ee,"ajaxError",[M,N,w||S]),b(S,M,N)}function b(w,S,M){var N=M.context;M.complete.call(N,S,w),p(M,N,"ajaxComplete",[S,M]),_(M)}function T(){}t.ajaxJSONP=function(w,S){if(!("type"in w))return t.ajax(w);var M=w.jsonpCallback,N=(t.isFunction(M)?M():M)||"jsonp"+ ++e,G=r.createElement("script"),ee=window[N],ie,de=function(re){t(G).triggerHandler("error",re||"abort")},q={abort:de},Y;return S&&S.promise(q),t(G).on("load error",function(re,ne){clearTimeout(Y),t(G).off().remove(),re.type=="error"||!ie?E(null,ne||"error",q,w,S):R(ie[0],q,w,S),window[N]=ee,ie&&t.isFunction(ee)&&ee(ie[0]),ee=ie=void 0}),A(q,w)===!1?(de("abort"),q):(window[N]=function(){ie=arguments},G.src=w.url.replace(/\?(.+)=\?/,"?$1="+N),r.head.appendChild(G),w.timeout>0&&(Y=setTimeout(function(){de("timeout")},w.timeout)),q)},t.ajaxSettings={type:"GET",beforeSend:T,success:T,error:T,complete:T,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:u,xml:"application/xml, text/xml",html:c,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0};function D(w){return w&&(w=w.split(";",2)[0]),w&&(w==c?"html":w==u?"json":o.test(w)?"script":l.test(w)&&"xml")||"text"}function U(w,S){return S==""?w:(w+"&"+S).replace(/[&?]{1,2}/,"?")}function j(w){w.processData&&w.data&&t.type(w.data)!="string"&&(w.data=t.param(w.data,w.traditional)),w.data&&(!w.type||w.type.toUpperCase()=="GET")&&(w.url=U(w.url,w.data),w.data=void 0)}t.ajax=function(w){var S=t.extend({},w||{}),M=t.Deferred&&t.Deferred();for(i in t.ajaxSettings)S[i]===void 0&&(S[i]=t.ajaxSettings[i]);g(S),S.crossDomain||(S.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(S.url)&&RegExp.$2!=window.location.host),S.url||(S.url=window.location.toString()),j(S),S.cache===!1&&(S.url=U(S.url,"_="+Date.now()));var N=S.dataType,G=/\?.+=\?/.test(S.url);if(N=="jsonp"||G)return G||(S.url=U(S.url,S.jsonp?S.jsonp+"=?":S.jsonp===!1?"":"callback=?")),t.ajaxJSONP(S,M);var ee=S.accepts[N],ie={},de=function(H,J){ie[H.toLowerCase()]=[H,J]},q=/^([\w-]+:)\/\//.test(S.url)?RegExp.$1:window.location.protocol,Y=S.xhr(),re=Y.setRequestHeader,ne;if(M&&M.promise(Y),S.crossDomain||de("X-Requested-With","XMLHttpRequest"),de("Accept",ee||"*/*"),(ee=S.mimeType||ee)&&(ee.indexOf(",")>-1&&(ee=ee.split(",",2)[0]),Y.overrideMimeType&&Y.overrideMimeType(ee)),(S.contentType||S.contentType!==!1&&S.data&&S.type.toUpperCase()!="GET")&&de("Content-Type",S.contentType||"application/x-www-form-urlencoded"),S.headers)for(s in S.headers)de(s,S.headers[s]);if(Y.setRequestHeader=de,Y.onreadystatechange=function(){if(Y.readyState==4){Y.onreadystatechange=T,clearTimeout(ne);var H,J=!1;if(Y.status>=200&&Y.status<300||Y.status==304||Y.status==0&&q=="file:"){N=N||D(S.mimeType||Y.getResponseHeader("content-type")),H=Y.responseText;try{N=="script"?(0,eval)(H):N=="xml"?H=Y.responseXML:N=="json"&&(H=h.test(H)?null:t.parseJSON(H))}catch(X){J=X}J?E(J,"parsererror",Y,S,M):R(H,Y,S,M)}else E(Y.statusText||null,Y.status?"error":"abort",Y,S,M)}},A(Y,S)===!1)return Y.abort(),E(null,"abort",Y,S,M),Y;if(S.xhrFields)for(s in S.xhrFields)Y[s]=S.xhrFields[s];var W="async"in S?S.async:!0;Y.open(S.type,S.url,W,S.username,S.password);for(s in ie)re.apply(Y,ie[s]);return S.timeout>0&&(ne=setTimeout(function(){Y.onreadystatechange=T,Y.abort(),E(null,"timeout",Y,S,M)},S.timeout)),Y.send(S.data?S.data:null),Y};function P(w,S,M,N){var G=!t.isFunction(S);return{url:w,data:G?S:void 0,success:G?t.isFunction(M)?M:void 0:S,dataType:G&&N||M}}t.get=function(w,S,M,N){return t.ajax(P.apply(null,arguments))},t.post=function(w,S,M,N){var G=P.apply(null,arguments);return G.type="POST",t.ajax(G)},t.getJSON=function(w,S,M){var N=P.apply(null,arguments);return N.dataType="json",t.ajax(N)},t.fetchJSON=function(w){var S=new XMLHttpRequest;return new Promise(function(M,N){S.onreadystatechange=function(){try{if(S.readyState!==4)return;if(S.status>=200&&S.status<300){var G=JSON.parse(S.responseText);M(G)}else N({status:S.status,statusText:S.statusText})}catch(ee){N({status:400,statusText:`Error fetching JSON from ${w}: ${ee}`})}},S.open("GET",w,!0),S.send()})},t.fn.load=function(w,S,M){if(!this.length)return this;var N=this,G=w.split(/\s/),ee,ie=P(w,S,M),de=ie.success;return G.length>1&&(ie.url=G[0],ee=G[1]),ie.success=function(q){N.html(ee?t("<div>").html(q.replace(a,"")).find(ee):q),de&&de.apply(N,arguments)},t.ajax(ie),this};var I=encodeURIComponent;function y(w,S,M,N){var G,ee=t.isArray(S),ie=t.isPlainObject(S);t.each(S,function(de,q){G=t.type(q),N&&(de=M?N:N+"["+(ie||G=="object"||G=="array"?de:"")+"]"),!N&&ee?w.add(q.name,q.value):G=="array"||!M&&G=="object"?y(w,q,M,de):w.add(de,q)})}t.param=function(w,S){var M=[];return M.add=function(N,G){this.push(I(N)+"="+I(G))},y(M,w,S),M.join("&").replace(/%20/g,"+")}})(ki);(function(t){t.fn.serializeArray=function(){var e=[],r;return t([].slice.call(this.get(0).elements)).each(function(){r=t(this);var i=r.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&i!="submit"&&i!="reset"&&i!="button"&&(i!="radio"&&i!="checkbox"||this.checked)&&e.push({name:r.attr("name"),value:r.val()})}),e},t.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(r){e.push(encodeURIComponent(r.name)+"="+encodeURIComponent(r.value))}),e.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var r=t.Event("submit");this.eq(0).trigger(r),r.isDefaultPrevented()||this.get(0).submit()}return this}})(ki);(function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(r,i){return r=r||[],t.extend(r,t.fn),r.selector=i||"",r.__Z=!0,r},isZ:function(r){return t.type(r)==="array"&&"__Z"in r}});try{getComputedStyle(void 0)}catch{var e=getComputedStyle;window.getComputedStyle=function(i,s){try{return e(i,s)}catch{return null}}}})(ki);const Bh=ki.getJSON,Go=ki.ajax,zf=ki.fetchJSON,jr=[["millisecond",1,function(t){}],["second",1e3,function(t){t.setMilliseconds(0)}],["minute",1e3*60,function(t){t.setSeconds(0)}],["hour",1e3*60*60,function(t){t.setMinutes(0)}],["day",1e3*60*60*24,function(t){t.setHours(0)}],["month",1e3*60*60*24*30,function(t){t.setDate(1)}],["year",1e3*60*60*24*365,function(t){t.setMonth(0)}],["decade",1e3*60*60*24*365*10,function(t){var e=t.getFullYear();t.setFullYear(e-e%10)}],["century",1e3*60*60*24*365*100,function(t){var e=t.getFullYear();t.setFullYear(e-e%100)}],["millennium",1e3*60*60*24*365*1e3,function(t){var e=t.getFullYear();t.setFullYear(e-e%1e3)}]],Vs=["millisecond","second","minute","hour","day","month","year"],Jx=/^([\+-]?\d+?)(-\d{2}?)?(-\d{2}?)?$/,M5=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,Zx={base:{millisecond:"time_short",second:"time",minute:"time_no_seconds_small_date",hour:"time_no_seconds_small_date",day:"full",month:"month",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"},short:{millisecond:"time_short",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"}},Hf=Uh.extend({initialize:function(t,e,r){typeof t=="number"?this.data={format:"yyyy mmmm",date_obj:new Date(t)}:Date==t.constructor?this.data={format:"yyyy mmmm",date_obj:t}:(this.data=JSON.parse(JSON.stringify(t)),this._createDateObj()),t.format&&!e&&(e=t.format),this._setFormat(e,r)},setDateFormat:function(t){this.data.format=t},getDisplayDate:function(t,e){if(this.data.display_date)return this.data.display_date;t||(t=lr.fallback),t.constructor!=lr&&(Ue("First argument to getDisplayDate must be type Language"),t=lr.fallback);var r=e||this.data.format;return t.formatDate(this.data.date_obj,r)},getMillisecond:function(){return this.getTime()},getTime:function(){return this.data.date_obj.getTime()},isBefore:function(t){if(!this.data.date_obj.constructor==t.data.date_obj.constructor)throw new Fe("date_compare_err");return"isBefore"in this.data.date_obj?this.data.date_obj.isBefore(t.data.date_obj):this.data.date_obj<t.data.date_obj},isAfter:function(t){if(!this.data.date_obj.constructor==t.data.date_obj.constructor)throw new Fe("date_compare_err");return"isAfter"in this.data.date_obj?this.data.date_obj.isAfter(t.data.date_obj):this.data.date_obj>t.data.date_obj},floor:function(t){for(var e=new Date(this.data.date_obj.getTime()),r=0;r<jr.length;r++)if(jr[r][2](e),jr[r][0]==t)return new Hf(e);throw new Fe("invalid_scale_err",t)},_getDateData:function(){var t={year:0,month:1,day:1,hour:0,minute:0,second:0,millisecond:0};Ze(t,this.data);for(var e in Vs){var r=qn(t[Vs[e]]);if(!r.match(/^-?\d*$/))throw new Fe("invalid_date_err",Vs[e]+" = '"+t[Vs[e]]+"'");var i=parseInt(t[Vs[e]]);isNaN(i)&&(i=e==4||e==5?1:0),t[Vs[e]]=i}return t.month>0&&t.month<=12&&(t.month=t.month-1),t},_createDateObj:function(){var t=this._getDateData();this.data.date_obj=new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond),this.data.date_obj.getFullYear()!=t.year&&this.data.date_obj.setFullYear(t.year)},findBestFormat:function(t){for(var e=Vs,r=0;r<e.length;r++)if(this.data[e[r]])return t?t in Zx||(t="short"):t="base",Zx[t][e[r]];return""},_setFormat:function(t,e){t?this.data.format=t:this.data.format||(this.data.format=this.findBestFormat()),e?this.data.format_short=e:this.data.format_short||(this.data.format_short=this.findBestFormat(!0))},getFullYear:function(){return this.data.date_obj.getFullYear()}});function eE(t){if(t.match(Jx)){var e=t.match(Jx).slice(1),r={year:e[0].replace("+","")};return e[1]&&(r.month=e[1].replace("-","")),e[2]&&(r.day=e[2].replace("-","")),r}if(t.match(M5))return cls.parseISODate(t);if(t.match(/^\-?\d+$/))return{year:t};var i={};if(t.match(/\d+\/\d+\/\d+/)){var s=t.match(/\d+\/\d+\/\d+/)[0];t=qn(t.replace(s,""));var a=s.split("/");i.month=a[0],i.day=a[1],i.year=a[2]}if(t.match(/\d+\/\d+/)){var s=t.match(/\d+\/\d+/)[0];t=qn(t.replace(s,""));var a=s.split("/");i.month=a[0],i.year=a[1]}if(t.match(":")){var o=t.split(":");if(i.hour=o[0],i.minute=o[1],o[2]){let l=o[2].split(".");i.second=l[0],i.millisecond=l[1]}}return i}const Lu=Uh.extend({initialize:function(t){if(this.year=parseInt(t),isNaN(this.year))throw new Fe("invalid_year_err",t)},isBefore:function(t){return this.year<t.year},isAfter:function(t){return this.year>t.year},getTime:function(){return this.year}}),uv=1e6,cv=uv*10,dv=cv*10,tE=dv*10;function Li(t){return function(e){var r=e.getTime();return new Lu(Math.floor(r/t)*t)}}const zd=[["year",1,new Li(1)],["decade",10,new Li(10)],["century",100,new Li(100)],["millennium",1e3,new Li(1e3)],["age",uv,new Li(uv)],["epoch",cv,new Li(cv)],["era",dv,new Li(dv)],["eon",tE,new Li(tE)]],Wf=Hf.extend({initialize:function(t,e,r){Lu==t.constructor?this.data={date_obj:t}:(this.data=JSON.parse(JSON.stringify(t)),this._createDateObj()),t.format&&!e&&(e=t.format),this._setFormat(e,r)},_createDateObj:function(){var t=this._getDateData();this.data.date_obj=new Lu(t.year)},floor:function(t){for(var e=0;e<zd.length;e++)if(zd[e][0]==t){var r=zd[e][2](this.data.date_obj);return new Wf(r)}throw new Fe("invalid_scale_err",t)},getFullYear:function(){return this.data.date_obj.getTime()}}),nE=new RegExp(/\$\{(.+?)\}/g);class lr{constructor(e,r){for(let a in Vi.en)this[a]=Vi.en[a];if(e&&typeof e=="string"&&e!="en"){var i=e;if(!(i in Vi)){console.log(`Expected language ${i} to be cached. Did you call the constructor directly?`);var s=GC(i,r);zf(s).then(a=>{Vi[i]=a}).catch(a=>{console.log(`Error loading language [${s}] ${a.statusText} [${a.status}]`)})}Ze(this,Vi[i])}}mergeData(e){for(k in Vi.en)e[k]&&(typeof this[k]=="object"?Ze(e[k],this[k]):this[k]=e[k])}formatBigYear(e,r){var i=e.year,s=this.bigdateformats[r]||this.bigdateformats.fallback;if(s){for(var a=0;a<s.length;a++){var o=s[a];if(Math.abs(i/o[0])>1)return rE(Math.abs(i/o[0]),o[1])}return i.toString()}else return Ue("Language file dateformats missing cosmological. Falling back."),rE(i,r)}_(e,r){let i=this.messages[e]||lr.fallback.messages[e]||e;if(i.match(nE)){if(!r)throw new Fe("template_message_without_context");for(let s of i.matchAll(nE)){if(!(s[1]in r))throw new Fe("template_message_without_context");i=i.replace(s[0],r[s[1]])}}return i}formatDate(e,r){return e.constructor==Date?this.formatJSDate(e,r):e.constructor==Lu?this.formatBigYear(e,r):e.data&&e.data.date_obj?this.formatDate(e.data.date_obj,r):(Ue("Unfamiliar date presented for formatting"),e.toString())}formatJSDate(e,r){var i=this,s=function(D,U){var j=i.period_labels[D];if(j)var D=U<12?j[0]:j[1];return"<span class='tl-timeaxis-timesuffix'>"+D+"</span>"},a=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,o=/[^-+\dA-Z]/g;r||(r="full");var l=this.dateformats[r]||lr.fallback.dateformats[r];l||(l=r);var u="get",c=e[u+"Date"](),h=e[u+"Day"](),f=e[u+"Month"](),p=e[u+"FullYear"](),g=e[u+"Hours"](),_=e[u+"Minutes"](),A=e[u+"Seconds"](),R=e[u+"Milliseconds"](),E=e.getTimezoneOffset(),b={d:c,dd:ri(c),ddd:this.date.day_abbr[h],dddd:this.date.day[h],m:f+1,mm:ri(f+1),mmm:this.date.month_abbr[f],mmmm:this.date.month[f],yy:String(p).slice(2),yyyy:p<0&&this.has_negative_year_modifier()?Math.abs(p):p,h:g%12||12,hh:ri(g%12||12),H:g,HH:ri(g),M:_,MM:ri(_),s:A,ss:ri(A),l:ri(R,3),L:ri(R>99?Math.round(R/10):R),t:s("t",g),tt:s("tt",g),T:s("T",g),TT:s("TT",g),Z:(String(e).match(a)||[""]).pop().replace(o,""),o:(E>0?"-":"+")+ri(Math.floor(Math.abs(E)/60)*100+Math.abs(E)%60,4),S:["th","st","nd","rd"][c%10>3?0:(c%100-c%10!=10)*c%10]},T=l.replace(lr.DATE_FORMAT_TOKENS,function(D){return D in b?b[D]:D.slice(1,D.length-1)});return this._applyEra(T,p)}has_negative_year_modifier(){return!!(this.era_labels.negative_year.prefix||this.era_labels.negative_year.suffix)}_applyEra(e,r){var i=r<0?this.era_labels.negative_year:this.era_labels.positive_year,s="";return i.prefix&&(s+="<span>"+i.prefix+"</span> "),s+=e,i.suffix&&(s+=" <span>"+i.suffix+"</span>"),s}}async function L5(t,e){var r=GC(t,e);try{if(!Vi[t]){let i=await zf(r);Vi[t]=i}return new lr(t,e)}catch(i){return console.log(`Error loading language [${r}] ${i.statusText}`),null}}function GC(t,e){if(/\.json$/.test(t))var r=t;else{var i="/locale/"+t+".json";/\/$/.test(e)&&(i=i.substr(1));var r=e+i}return r}function rE(t,e){if(e.match(/%(\.(\d+))?f/)){var r=e.match(/%(\.(\d+))?f/),i=r[0];return r[2]&&(t=t.toFixed(r[2])),e.replace(i,t)}return e}lr.fallback={messages:{}};lr.DATE_FORMAT_TOKENS=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g;var Vi={en:{name:"English (built-in)",lang:"en",api:{wikipedia:"en"},messages:{loading:"Loading",wikipedia:"From Wikipedia, the free encyclopedia",error:"Error",return_to_title:"Return to Title",go_to_end:"Go to the last slide",loading_content:"Loading Content",loading_timeline:"Loading Timeline... ",swipe_to_navigate:"Swipe to Navigate<br><span class='tl-button'>OK</span>",zoom_in:"Zoom in",zoom_out:"Zoom out",unknown_read_err:"An unexpected error occurred trying to read your spreadsheet data",invalid_url_err:"Unable to read Timeline data. Make sure your URL is for a Google Spreadsheet or a Timeline JSON file.",network_err:"Unable to read your Google Spreadsheet. Make sure you have published it to the web.",missing_start_date_err:"Missing start_date",invalid_start_time_without_date:"Invalid configuration: time cannot be used without date.",invalid_end_time_without_date:"Invalid configuration: end time cannot be used without end date.",date_compare_err:"Can't compare timeline date objects on different scales",invalid_scale_err:"Invalid scale",invalid_date_err:"Invalid date: month, day and year must be numbers.",invalid_separator_error:"Invalid time: misuse of : or . as separator.",invalid_hour_err:"Invalid time (hour)",invalid_minute_err:"Invalid time (minute)",invalid_second_err:"Invalid time (second)",invalid_fractional_err:"Invalid time (fractional seconds)",invalid_second_fractional_err:"Invalid time (seconds and fractional seconds)",invalid_year_err:"Invalid year",flickr_notfound_err:"Photo not found or private",flickr_invalidurl_err:"Invalid Flickr URL",imgur_invalidurl_err:"Invalid Imgur URL",twitter_load_err:"Unable to load Tweet",twitterembed_invalidurl_err:"Invalid Twitter Embed url",wikipedia_load_err:"Unable to load Wikipedia entry",wikipedia_image_load_err:"Unable to load Wikipedia image data",spotify_invalid_url:"Invalid Spotify URL",invalid_rgb_err:"Invalid RGB argument",time_scale_scale_err:"Don't know how to get date from time for scale",axis_helper_no_options_err:"Axis helper must be configured with options",axis_helper_scale_err:"No AxisHelper available for scale",invalid_integer_option:"Invalid option valuemust be a whole number.",instagram_bad_request:"Invalid or private Instagram URL",template_message_without_context:"Required variables not provided for template translation message",aria_label_timeline:"Timeline",aria_label_timeline_navigation:"Timeline navigation",aria_label_timeline_content:"Timeline content",aria_label_zoomin:"Show less than ${start} to ${end}",aria_label_zoomout:"Show more than ${start} to ${end}"},date:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbr:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_abbr:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."]},era_labels:{positive_year:{prefix:"",suffix:""},negative_year:{prefix:"",suffix:"BCE"}},period_labels:{t:["a","p"],tt:["am","pm"],T:["A","P"],TT:["AM","PM"]},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time:"h:MM:ss TT' <small>'mmmm d',' yyyy'</small>'",time_short:"h:MM:ss TT",time_no_seconds_short:"h:MM TT",time_no_minutes_short:"h TT",time_no_seconds_small_date:"h:MM TT' <small>'mmmm d',' yyyy'</small>'",time_milliseconds:"l",full_long:"mmm d',' yyyy 'at' h:MM TT",full_long_small_date:"h:MM TT' <small>mmm d',' yyyy'</small>'"},bigdateformats:{fallback:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]],compact:[[1e9,"%.2f bya"],[1e6,"%.1f mya"],[1e3,"%.1f kya"],[1,"%f years ago"]],verbose:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]]}}};let x_=new lr;lr.fallback=x_;class Ci{setLanguage(e){this.language=e}getLanguage(){if(this.language){if(typeof this.language=="object")return this.language;Ue(`I18NMixins.getLanguage: this.language should be object, but is ${typeof this.language}`)}return x_}_(e,r){return this.getLanguage()._(e,r)}}class qf{constructor(e,r,i){i&&this.setLanguage(i),this._el={parent:{},container:{},message_container:{},loading_icon:{},message:{}},this.options={width:600,height:600,message_class:"tl-message",message_icon_class:"tl-loading-icon"},this.container=e,Ze(this.options,r),this._el.container=he("div",this.options.message_class),e&&(e.appendChild(this._el.container),this._el.parent=e),this.animator={},this._initLayout(),this._initEvents()}updateMessage(e){e?this._el.message.innerHTML=e:this._el.message.innerHTML=this._("loading"),!this._el.parent.atributes&&this.container.attributes&&(this.container.appendChild(this._el.container),this._el.parent=this.container)}updateDisplay(e,r){}_onMouseClick(){this.fire("clicked",this.options)}_onRemove(){this._el.parent={}}_initLayout(){this._el.message_container=he("div","tl-message-container",this._el.container),this._el.loading_icon=he("div",this.options.message_icon_class,this._el.message_container),this._el.message=he("div","tl-message-content",this._el.message_container),this.updateMessage()}_initEvents(){Pe.addListener(this._el.container,"click",this._onMouseClick,this),Pe.addListener(this,"removed",this._onRemove,this)}}Sn(qf,Ci,In,Ii);function cd(t,r){var r=r||"start_date";t.sort(function(i,s){return i[r].isBefore(s[r])?-1:i[r].isAfter(s[r])?1:0})}function iE(t){var e={hour:null,minute:null,second:null,millisecond:null},r=null,i=t.match(/(\s*[AaPp]\.?[Mm]\.?\s*)$/);i&&(r=qn(i[0]),t=qn(t.substring(0,t.lastIndexOf(r))));var s=[],a=t.match(/^\s*(\d{1,2})(\d{2})\s*$/);if(a?s=a.slice(1):(s=t.split(":"),s.length==1&&(s=t.split("."))),s.length>4)throw new Fe("invalid_separator_error");let o=s[0];if(e.hour=parseInt(o),r&&r.toLowerCase()[0]=="p"&&e.hour!=12?e.hour+=12:r&&r.toLowerCase()[0]=="a"&&e.hour==12&&(e.hour=0),isNaN(e.hour)||e.hour<0||e.hour>23)throw new Fe("invalid_hour_err",o);if(s.length>1){let c=s[1];if(e.minute=parseInt(c),isNaN(e.minute))throw new Fe("invalid_minute_err",c)}if(s.length>2){var l=s[2].split(/[\.,]/);if(s=l.concat(s.slice(3)),s.length>2)throw new Fe("invalid_second_fractional_err");if(e.second=parseInt(s[0]),isNaN(e.second))throw new Fe("invalid_second_err",s[0]);if(s.length==2){var u=parseInt(s[1]);if(isNaN(u))throw new Fe("invalid_fractional_err",s[1]);e.millisecond=100*u}}return e}const O5=new RegExp("(^-?\\d+$|^$)");function sE(t){try{return Object.keys(t).forEach(e=>{let r=t[e];if(r&&r.match&&!r.match(O5))throw`invalid value ${r} for ${e}`}),!0}catch{return!1}}const aE={human:Hf,cosmological:Wf};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:KC,setPrototypeOf:oE,isFrozen:j5,getPrototypeOf:V5,getOwnPropertyDescriptor:F5}=Object;let{freeze:bn,seal:hr,create:YC}=Object,{apply:hv,construct:fv}=typeof Reflect<"u"&&Reflect;bn||(bn=function(e){return e});hr||(hr=function(e){return e});hv||(hv=function(e,r,i){return e.apply(r,i)});fv||(fv=function(e,r){return new e(...r)});const dd=xn(Array.prototype.forEach),U5=xn(Array.prototype.lastIndexOf),lE=xn(Array.prototype.pop),xl=xn(Array.prototype.push),B5=xn(Array.prototype.splice),Hd=xn(String.prototype.toLowerCase),gm=xn(String.prototype.toString),uE=xn(String.prototype.match),El=xn(String.prototype.replace),$5=xn(String.prototype.indexOf),z5=xn(String.prototype.trim),_r=xn(Object.prototype.hasOwnProperty),vn=xn(RegExp.prototype.test),Tl=H5(TypeError);function xn(t){return function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return hv(t,e,i)}}function H5(t){return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return fv(t,r)}}function Ne(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Hd;oE&&oE(t,null);let i=e.length;for(;i--;){let s=e[i];if(typeof s=="string"){const a=r(s);a!==s&&(j5(e)||(e[i]=a),s=a)}t[s]=!0}return t}function W5(t){for(let e=0;e<t.length;e++)_r(t,e)||(t[e]=null);return t}function zs(t){const e=YC(null);for(const[r,i]of KC(t))_r(t,r)&&(Array.isArray(i)?e[r]=W5(i):i&&typeof i=="object"&&i.constructor===Object?e[r]=zs(i):e[r]=i);return e}function Sl(t,e){for(;t!==null;){const i=F5(t,e);if(i){if(i.get)return xn(i.get);if(typeof i.value=="function")return xn(i.value)}t=V5(t)}function r(){return null}return r}const cE=bn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),vm=bn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),ym=bn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),q5=bn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),_m=bn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),G5=bn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),dE=bn(["#text"]),hE=bn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),wm=bn(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),fE=bn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),hd=bn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),K5=hr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Y5=hr(/<%[\w\W]*|[\w\W]*%>/gm),X5=hr(/\$\{[\w\W]*/gm),Q5=hr(/^data-[\-\w.\u00B7-\uFFFF]+$/),J5=hr(/^aria-[\-\w]+$/),XC=hr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Z5=hr(/^(?:\w+script|data):/i),e$=hr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),QC=hr(/^html$/i),t$=hr(/^[a-z][.\w]*(-[.\w]+)+$/i);var pE=Object.freeze({__proto__:null,ARIA_ATTR:J5,ATTR_WHITESPACE:e$,CUSTOM_ELEMENT:t$,DATA_ATTR:Q5,DOCTYPE_NAME:QC,ERB_EXPR:Y5,IS_ALLOWED_URI:XC,IS_SCRIPT_OR_DATA:Z5,MUSTACHE_EXPR:K5,TMPLIT_EXPR:X5});const Il={element:1,text:3,progressingInstruction:7,comment:8,document:9},n$=function(){return typeof window>"u"?null:window},r$=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const s="data-tt-policy-suffix";r&&r.hasAttribute(s)&&(i=r.getAttribute(s));const a="dompurify"+(i?"#"+i:"");try{return e.createPolicy(a,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},mE=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function JC(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:n$();const e=ve=>JC(ve);if(e.version="3.2.4",e.removed=[],!t||!t.document||t.document.nodeType!==Il.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const i=r,s=i.currentScript,{DocumentFragment:a,HTMLTemplateElement:o,Node:l,Element:u,NodeFilter:c,NamedNodeMap:h=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:g}=t,_=u.prototype,A=Sl(_,"cloneNode"),R=Sl(_,"remove"),E=Sl(_,"nextSibling"),b=Sl(_,"childNodes"),T=Sl(_,"parentNode");if(typeof o=="function"){const ve=r.createElement("template");ve.content&&ve.content.ownerDocument&&(r=ve.content.ownerDocument)}let D,U="";const{implementation:j,createNodeIterator:P,createDocumentFragment:I,getElementsByTagName:y}=r,{importNode:w}=i;let S=mE();e.isSupported=typeof KC=="function"&&typeof T=="function"&&j&&j.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:M,ERB_EXPR:N,TMPLIT_EXPR:G,DATA_ATTR:ee,ARIA_ATTR:ie,IS_SCRIPT_OR_DATA:de,ATTR_WHITESPACE:q,CUSTOM_ELEMENT:Y}=pE;let{IS_ALLOWED_URI:re}=pE,ne=null;const W=Ne({},[...cE,...vm,...ym,..._m,...dE]);let H=null;const J=Ne({},[...hE,...wm,...fE,...hd]);let X=Object.seal(YC(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ce=null,me=null,De=!0,Ae=!0,He=!1,We=!0,Xe=!1,Ke=!0,qe=!1,nt=!1,C=!1,V=!1,F=!1,$=!1,Q=!0,le=!1;const we="user-content-";let Ie=!0,Le=!1,Ye={},Ce=null;const ot=Ne({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Wt=null;const Rr=Ne({},["audio","video","img","source","image","track"]);let Ai=null;const Qo=Ne({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),kn="http://www.w3.org/1998/Math/MathML",Cs="http://www.w3.org/2000/svg",er="http://www.w3.org/1999/xhtml";let Dr=er,Jo=!1,Zo=null;const el=Ne({},[kn,Cs,er],gm);let As=Ne({},["mi","mo","mn","ms","mtext"]),Ps=Ne({},["annotation-xml"]);const Rs=Ne({},["title","style","font","a","script"]);let Jr=null;const tl=["application/xhtml+xml","text/html"],Zr="text/html";let St=null,pr=null;const bc=r.createElement("form"),Pi=function(B){return B instanceof RegExp||B instanceof Function},wa=function(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(pr&&pr===B)){if((!B||typeof B!="object")&&(B={}),B=zs(B),Jr=tl.indexOf(B.PARSER_MEDIA_TYPE)===-1?Zr:B.PARSER_MEDIA_TYPE,St=Jr==="application/xhtml+xml"?gm:Hd,ne=_r(B,"ALLOWED_TAGS")?Ne({},B.ALLOWED_TAGS,St):W,H=_r(B,"ALLOWED_ATTR")?Ne({},B.ALLOWED_ATTR,St):J,Zo=_r(B,"ALLOWED_NAMESPACES")?Ne({},B.ALLOWED_NAMESPACES,gm):el,Ai=_r(B,"ADD_URI_SAFE_ATTR")?Ne(zs(Qo),B.ADD_URI_SAFE_ATTR,St):Qo,Wt=_r(B,"ADD_DATA_URI_TAGS")?Ne(zs(Rr),B.ADD_DATA_URI_TAGS,St):Rr,Ce=_r(B,"FORBID_CONTENTS")?Ne({},B.FORBID_CONTENTS,St):ot,ce=_r(B,"FORBID_TAGS")?Ne({},B.FORBID_TAGS,St):{},me=_r(B,"FORBID_ATTR")?Ne({},B.FORBID_ATTR,St):{},Ye=_r(B,"USE_PROFILES")?B.USE_PROFILES:!1,De=B.ALLOW_ARIA_ATTR!==!1,Ae=B.ALLOW_DATA_ATTR!==!1,He=B.ALLOW_UNKNOWN_PROTOCOLS||!1,We=B.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Xe=B.SAFE_FOR_TEMPLATES||!1,Ke=B.SAFE_FOR_XML!==!1,qe=B.WHOLE_DOCUMENT||!1,V=B.RETURN_DOM||!1,F=B.RETURN_DOM_FRAGMENT||!1,$=B.RETURN_TRUSTED_TYPE||!1,C=B.FORCE_BODY||!1,Q=B.SANITIZE_DOM!==!1,le=B.SANITIZE_NAMED_PROPS||!1,Ie=B.KEEP_CONTENT!==!1,Le=B.IN_PLACE||!1,re=B.ALLOWED_URI_REGEXP||XC,Dr=B.NAMESPACE||er,As=B.MATHML_TEXT_INTEGRATION_POINTS||As,Ps=B.HTML_INTEGRATION_POINTS||Ps,X=B.CUSTOM_ELEMENT_HANDLING||{},B.CUSTOM_ELEMENT_HANDLING&&Pi(B.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(X.tagNameCheck=B.CUSTOM_ELEMENT_HANDLING.tagNameCheck),B.CUSTOM_ELEMENT_HANDLING&&Pi(B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(X.attributeNameCheck=B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),B.CUSTOM_ELEMENT_HANDLING&&typeof B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(X.allowCustomizedBuiltInElements=B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Xe&&(Ae=!1),F&&(V=!0),Ye&&(ne=Ne({},dE),H=[],Ye.html===!0&&(Ne(ne,cE),Ne(H,hE)),Ye.svg===!0&&(Ne(ne,vm),Ne(H,wm),Ne(H,hd)),Ye.svgFilters===!0&&(Ne(ne,ym),Ne(H,wm),Ne(H,hd)),Ye.mathMl===!0&&(Ne(ne,_m),Ne(H,fE),Ne(H,hd))),B.ADD_TAGS&&(ne===W&&(ne=zs(ne)),Ne(ne,B.ADD_TAGS,St)),B.ADD_ATTR&&(H===J&&(H=zs(H)),Ne(H,B.ADD_ATTR,St)),B.ADD_URI_SAFE_ATTR&&Ne(Ai,B.ADD_URI_SAFE_ATTR,St),B.FORBID_CONTENTS&&(Ce===ot&&(Ce=zs(Ce)),Ne(Ce,B.FORBID_CONTENTS,St)),Ie&&(ne["#text"]=!0),qe&&Ne(ne,["html","head","body"]),ne.table&&(Ne(ne,["tbody"]),delete ce.tbody),B.TRUSTED_TYPES_POLICY){if(typeof B.TRUSTED_TYPES_POLICY.createHTML!="function")throw Tl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof B.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Tl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');D=B.TRUSTED_TYPES_POLICY,U=D.createHTML("")}else D===void 0&&(D=r$(g,s)),D!==null&&typeof U=="string"&&(U=D.createHTML(""));bn&&bn(B),pr=B}},jt=Ne({},[...vm,...ym,...q5]),nl=Ne({},[..._m,...G5]),Ds=function(B){let se=T(B);(!se||!se.tagName)&&(se={namespaceURI:Dr,tagName:"template"});const ge=Hd(B.tagName),rt=Hd(se.tagName);return Zo[B.namespaceURI]?B.namespaceURI===Cs?se.namespaceURI===er?ge==="svg":se.namespaceURI===kn?ge==="svg"&&(rt==="annotation-xml"||As[rt]):!!jt[ge]:B.namespaceURI===kn?se.namespaceURI===er?ge==="math":se.namespaceURI===Cs?ge==="math"&&Ps[rt]:!!nl[ge]:B.namespaceURI===er?se.namespaceURI===Cs&&!Ps[rt]||se.namespaceURI===kn&&!As[rt]?!1:!nl[ge]&&(Rs[ge]||!jt[ge]):!!(Jr==="application/xhtml+xml"&&Zo[B.namespaceURI]):!1},sn=function(B){xl(e.removed,{element:B});try{T(B).removeChild(B)}catch{R(B)}},ba=function(B,se){try{xl(e.removed,{attribute:se.getAttributeNode(B),from:se})}catch{xl(e.removed,{attribute:null,from:se})}if(se.removeAttribute(B),B==="is")if(V||F)try{sn(se)}catch{}else try{se.setAttribute(B,"")}catch{}},xc=function(B){let se=null,ge=null;if(C)B="<remove></remove>"+B;else{const xt=uE(B,/^[\r\n\t ]+/);ge=xt&&xt[0]}Jr==="application/xhtml+xml"&&Dr===er&&(B='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+B+"</body></html>");const rt=D?D.createHTML(B):B;if(Dr===er)try{se=new p().parseFromString(rt,Jr)}catch{}if(!se||!se.documentElement){se=j.createDocument(Dr,"template",null);try{se.documentElement.innerHTML=Jo?U:rt}catch{}}const Vt=se.body||se.documentElement;return B&&ge&&Vt.insertBefore(r.createTextNode(ge),Vt.childNodes[0]||null),Dr===er?y.call(se,qe?"html":"body")[0]:qe?se.documentElement:Vt},ei=function(B){return P.call(B.ownerDocument||B,B,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},rl=function(B){return B instanceof f&&(typeof B.nodeName!="string"||typeof B.textContent!="string"||typeof B.removeChild!="function"||!(B.attributes instanceof h)||typeof B.removeAttribute!="function"||typeof B.setAttribute!="function"||typeof B.namespaceURI!="string"||typeof B.insertBefore!="function"||typeof B.hasChildNodes!="function")},Ec=function(B){return typeof l=="function"&&B instanceof l};function Cn(ve,B,se){dd(ve,ge=>{ge.call(e,B,se,pr)})}const il=function(B){let se=null;if(Cn(S.beforeSanitizeElements,B,null),rl(B))return sn(B),!0;const ge=St(B.nodeName);if(Cn(S.uponSanitizeElement,B,{tagName:ge,allowedTags:ne}),B.hasChildNodes()&&!Ec(B.firstElementChild)&&vn(/<[/\w]/g,B.innerHTML)&&vn(/<[/\w]/g,B.textContent)||B.nodeType===Il.progressingInstruction||Ke&&B.nodeType===Il.comment&&vn(/<[/\w]/g,B.data))return sn(B),!0;if(!ne[ge]||ce[ge]){if(!ce[ge]&&Ns(ge)&&(X.tagNameCheck instanceof RegExp&&vn(X.tagNameCheck,ge)||X.tagNameCheck instanceof Function&&X.tagNameCheck(ge)))return!1;if(Ie&&!Ce[ge]){const rt=T(B)||B.parentNode,Vt=b(B)||B.childNodes;if(Vt&&rt){const xt=Vt.length;for(let qt=xt-1;qt>=0;--qt){const An=A(Vt[qt],!0);An.__removalCount=(B.__removalCount||0)+1,rt.insertBefore(An,E(B))}}}return sn(B),!0}return B instanceof u&&!Ds(B)||(ge==="noscript"||ge==="noembed"||ge==="noframes")&&vn(/<\/no(script|embed|frames)/i,B.innerHTML)?(sn(B),!0):(Xe&&B.nodeType===Il.text&&(se=B.textContent,dd([M,N,G],rt=>{se=El(se,rt," ")}),B.textContent!==se&&(xl(e.removed,{element:B.cloneNode()}),B.textContent=se)),Cn(S.afterSanitizeElements,B,null),!1)},xa=function(B,se,ge){if(Q&&(se==="id"||se==="name")&&(ge in r||ge in bc))return!1;if(!(Ae&&!me[se]&&vn(ee,se))){if(!(De&&vn(ie,se))){if(!H[se]||me[se]){if(!(Ns(B)&&(X.tagNameCheck instanceof RegExp&&vn(X.tagNameCheck,B)||X.tagNameCheck instanceof Function&&X.tagNameCheck(B))&&(X.attributeNameCheck instanceof RegExp&&vn(X.attributeNameCheck,se)||X.attributeNameCheck instanceof Function&&X.attributeNameCheck(se))||se==="is"&&X.allowCustomizedBuiltInElements&&(X.tagNameCheck instanceof RegExp&&vn(X.tagNameCheck,ge)||X.tagNameCheck instanceof Function&&X.tagNameCheck(ge))))return!1}else if(!Ai[se]){if(!vn(re,El(ge,q,""))){if(!((se==="src"||se==="xlink:href"||se==="href")&&B!=="script"&&$5(ge,"data:")===0&&Wt[B])){if(!(He&&!vn(de,El(ge,q,"")))){if(ge)return!1}}}}}}return!0},Ns=function(B){return B!=="annotation-xml"&&uE(B,Y)},mr=function(B){Cn(S.beforeSanitizeAttributes,B,null);const{attributes:se}=B;if(!se||rl(B))return;const ge={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H,forceKeepAttr:void 0};let rt=se.length;for(;rt--;){const Vt=se[rt],{name:xt,namespaceURI:qt,value:An}=Vt,gr=St(xt);let gt=xt==="value"?An:z5(An);if(ge.attrName=gr,ge.attrValue=gt,ge.keepAttr=!0,ge.forceKeepAttr=void 0,Cn(S.uponSanitizeAttribute,B,ge),gt=ge.attrValue,le&&(gr==="id"||gr==="name")&&(ba(xt,B),gt=we+gt),Ke&&vn(/((--!?|])>)|<\/(style|title)/i,gt)){ba(xt,B);continue}if(ge.forceKeepAttr||(ba(xt,B),!ge.keepAttr))continue;if(!We&&vn(/\/>/i,gt)){ba(xt,B);continue}Xe&&dd([M,N,G],Sc=>{gt=El(gt,Sc," ")});const Ea=St(B.nodeName);if(xa(Ea,gr,gt)){if(D&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!qt)switch(g.getAttributeType(Ea,gr)){case"TrustedHTML":{gt=D.createHTML(gt);break}case"TrustedScriptURL":{gt=D.createScriptURL(gt);break}}try{qt?B.setAttributeNS(qt,xt,gt):B.setAttribute(xt,gt),rl(B)?sn(B):lE(e.removed)}catch{}}}Cn(S.afterSanitizeAttributes,B,null)},Tc=function ve(B){let se=null;const ge=ei(B);for(Cn(S.beforeSanitizeShadowDOM,B,null);se=ge.nextNode();)Cn(S.uponSanitizeShadowNode,se,null),il(se),mr(se),se.content instanceof a&&ve(se.content);Cn(S.afterSanitizeShadowDOM,B,null)};return e.sanitize=function(ve){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},se=null,ge=null,rt=null,Vt=null;if(Jo=!ve,Jo&&(ve="<!-->"),typeof ve!="string"&&!Ec(ve))if(typeof ve.toString=="function"){if(ve=ve.toString(),typeof ve!="string")throw Tl("dirty is not a string, aborting")}else throw Tl("toString is not a function");if(!e.isSupported)return ve;if(nt||wa(B),e.removed=[],typeof ve=="string"&&(Le=!1),Le){if(ve.nodeName){const An=St(ve.nodeName);if(!ne[An]||ce[An])throw Tl("root node is forbidden and cannot be sanitized in-place")}}else if(ve instanceof l)se=xc("<!---->"),ge=se.ownerDocument.importNode(ve,!0),ge.nodeType===Il.element&&ge.nodeName==="BODY"||ge.nodeName==="HTML"?se=ge:se.appendChild(ge);else{if(!V&&!Xe&&!qe&&ve.indexOf("<")===-1)return D&&$?D.createHTML(ve):ve;if(se=xc(ve),!se)return V?null:$?U:""}se&&C&&sn(se.firstChild);const xt=ei(Le?ve:se);for(;rt=xt.nextNode();)il(rt),mr(rt),rt.content instanceof a&&Tc(rt.content);if(Le)return ve;if(V){if(F)for(Vt=I.call(se.ownerDocument);se.firstChild;)Vt.appendChild(se.firstChild);else Vt=se;return(H.shadowroot||H.shadowrootmode)&&(Vt=w.call(i,Vt,!0)),Vt}let qt=qe?se.outerHTML:se.innerHTML;return qe&&ne["!doctype"]&&se.ownerDocument&&se.ownerDocument.doctype&&se.ownerDocument.doctype.name&&vn(QC,se.ownerDocument.doctype.name)&&(qt="<!DOCTYPE "+se.ownerDocument.doctype.name+`>
`+qt),Xe&&dd([M,N,G],An=>{qt=El(qt,An," ")}),D&&$?D.createHTML(qt):qt},e.setConfig=function(){let ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};wa(ve),nt=!0},e.clearConfig=function(){pr=null,nt=!1},e.isValidAttribute=function(ve,B,se){pr||wa({});const ge=St(ve),rt=St(B);return xa(ge,rt,se)},e.addHook=function(ve,B){typeof B=="function"&&xl(S[ve],B)},e.removeHook=function(ve,B){if(B!==void 0){const se=U5(S[ve],B);return se===-1?void 0:B5(S[ve],se,1)[0]}return lE(S[ve])},e.removeHooks=function(ve){S[ve]=[]},e.removeAllHooks=function(){S=mE()},e}var Gf=JC();const i$={text:["headline","text"],media:["caption","credit"]},s$={start_date:["display_date"],end_date:["display_date"],slide:["display_date","group"],date:["display_date"]};Gf.addHook("afterSanitizeAttributes",function(t){if(t.nodeName=="A"&&"href"in t){"target"in t.attributes||t.setAttribute("target","_blank");let e=t.attributes.rel;e?e.value.indexOf("noopener")==-1&&t.setAttribute("rel",`noopener ${e.value}`):t.setAttribute("rel","noopener")}});function gE(t,e,r){Object.keys(r).forEach(i=>{var s=i=="slide"?t:t[i];s&&r[i].forEach(a=>{typeof s[a]<"u"&&(s[a]=e(s[a]))})})}function a$(t){return Gf.sanitize(t,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder","target"]})}class qs{constructor(e){if(this.title="",this.scale="",this.events=[],this.eras=[],this.event_dict={},this.messages={errors:[],warnings:[]},typeof e=="object"&&e.events){if(this.scale=e.scale,this.events=[],this._ensureValidScale(e.events),e.title){var r=this._assignID(e.title);this._tidyFields(e.title),this.title=e.title,this.event_dict[r]=this.title}for(var i=0;i<e.events.length;i++)try{this.addEvent(e.events[i],!0)}catch(s){this.logError(s)}e.eras&&e.eras.forEach((s,a)=>{try{this.addEra(s)}catch(o){this.logError("Era "+a+": "+o)}}),cd(this.events),cd(this.eras)}}logError(e){Ue(`logError: ${e}`),this.messages.errors.push(e)}getErrors(e){return e?this.messages.errors.join(e):this.messages.errors}validate(){(typeof this.events>"u"||typeof this.events.length>"u"||this.events.length==0)&&this.logError("Timeline configuration has no events.");for(var e=0;e<this.eras.length;e++)if(typeof this.eras[e].start_date>"u"||typeof this.eras[e].end_date>"u"){var r;this.eras[e].headline?r=this.eras[e].headline:r="era "+(e+1),this.logError("All eras must have start and end dates. ["+r+"]")}}isValid(){return this.messages.errors.length==0}addEvent(e,r){var i=this._assignID(e);return typeof e.start_date>"u"?(Ue("Missing start date, skipping event"),console.log(e),null):(this._processDates(e),this._tidyFields(e),this.events.push(e),this.event_dict[i]=e,r||cd(this.events),i)}addEra(e){var r=this._assignID(e);if(typeof e.start_date>"u")throw new Fe("missing_start_date_err",r);this._processDates(e),this._tidyFields(e),this.eras.push({start_date:e.start_date,end_date:e.end_date,headline:e.text.headline})}_assignID(e){var r=e.unique_id;return qn(r)||(r=e.text?pm(e.text.headline):null),e.unique_id=_5(this.event_dict,r),e.unique_id}_makeUniqueIdentifiers(e,r){for(var i=[e],s=0;s<r.length;s++)qn(r[s].unique_id)&&(r[s].unique_id=pm(r[s].unique_id),i.indexOf(r[s].unique_id)==-1?i.push(r[s].unique_id):r[s].unique_id="");if(i.length!=r.length+1){for(var s=0;s<r.length;s++)if(!r[s].unique_id){var a=r[s].text?pm(r[s].text.headline):null;a||(a=la(6)),i.indexOf(a)!=-1&&(a=a+"-"+s),i.push(a),r[s].unique_id=a}}}_ensureValidScale(e){if(!this.scale){this.scale="human";for(var r=0;r<e.length;r++){if(e[r].scale=="cosmological"){this.scale="cosmological";break}if(e[r].start_date&&typeof e[r].start_date.year<"u"){var i=new Wf(e[r].start_date),s=i.data.date_obj.year;if(s<-271820||s>275759){this.scale="cosmological";break}}}Ue(`Determining scale dynamically: ${this.scale}`)}var a=aE[this.scale];a||this.logError("Don't know how to process dates on scale "+this.scale)}_processDates(e){var r=aE[this.scale];if(!(e.start_date instanceof r)){var i=e.start_date;if(e.start_date=new r(i),typeof e.end_date<"u"&&!(e.end_date instanceof r)){var s=e.end_date,a=!0;for(let o in i)a=a&&i[o]==s[o];a?(Ue("End date same as start date is redundant; dropping end date"),delete e.end_date):e.end_date=new r(s)}}}getEarliestDate(){var e=this.events[0].start_date;return this.eras&&this.eras.length>0&&this.eras[0].start_date.isBefore(e)?this.eras[0].start_date:e}getLatestDate(){for(var e=[],r=0;r<this.events.length;r++)this.events[r].end_date?e.push({date:this.events[r].end_date}):e.push({date:this.events[r].start_date});for(var r=0;r<this.eras.length;r++)this.eras[r].end_date?e.push({date:this.eras[r].end_date}):e.push({date:this.eras[r].start_date});return cd(e,"date"),e.slice(-1)[0].date}_tidyFields(e){function r(i,s,a){a||(a=""),i.hasOwnProperty(s)||(i[s]=a)}e.group&&(e.group=qn(e.group)),e.text||(e.text={}),r(e.text,"text"),r(e.text,"headline"),gE(e,a$,i$),gE(e,P5,s$)}}function o$(t,e){return t==null?"":(e=e||`
`,t.charAt(t.length-e.length)!==e?t:t.substring(0,t.length-e.length))}async function l$(t){return new Promise((e,r)=>{if(t.data){var i=ZC(eA(t.data,t),t);i.useMemoryStore=!0,e(i)}else t.url&&window.fetch(t.url,{mode:"cors"}).then(function(s){if(s.status!=200){s.headers.get("content-type")=="application/json"?s.text().then(a=>{r(JSON.parse(a))}):r({status_code:s.status,message:`Error fetching CSV: [${s.status} ${s.statusText}]`});return}return s.text?s.text():s}).then(function(s){if(s){var a=d$(s,t);a.useMemoryStore=!0,e(a)}}).catch(s=>{r({status_code:500,message:`Error fetching CSV: ${s}`})})})}function ZC(t,e){return e=e||{},e.noHeaderRow!==!0&&t.length>0?{fields:t[0].map((r,i)=>r&&r.trim?r.trim():`untitled${i}`),records:t.slice(1)}:{records:t}}function u$(t){var e={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var r in t)r==="trim"?e.skipinitialspace=t.trim:e[r.toLowerCase()]=t[r];return e}function eA(t,e){(!e||e&&!e.lineterminator)&&(t=c$(t,e));var r=u$(e);t=o$(t,r.lineterminator);var i="",s=!1,a=!1,o="",l=[],u=[],c,h;for(h=function(f){return a!==!0&&(f===""?f=null:r.skipinitialspace===!0&&(f=f.trim())),f},c=0;c<t.length;c+=1)i=t.charAt(c),s===!1&&(i===r.delimiter||i===r.lineterminator)?(o=h(o),l.push(o),i===r.lineterminator&&(u.push(l),l=[]),o="",a=!1):i!==r.quotechar?o+=i:s?t.charAt(c+1)===r.quotechar?(o+=r.quotechar,c+=1):s=!1:(s=!0,a=!0);return o=h(o),l.push(o),u.push(l),r.skipinitialrows&&(u=u.slice(r.skipinitialrows)),u}function c$(t,e){return e&&!e.lineterminator?t.replace(/(\r\n|\n|\r)/gm,`
`):t}function d$(t,e){let r=ZC(eA(t,e)),i=[];return r.records.forEach(s=>{let a={};r.fields.forEach((o,l)=>a[o]=s[l]),i.push(a)}),i}function Ra(t){if(t)return t.replace(/[\s,]+/g,"")}function h$(t){let e={key:null,worksheet:0};var r=/\bkey=([-_A-Za-z0-9]+)&?/i,i=/docs.google.com\/spreadsheets(.*?)\/d\//;if(t.match(r))e.key=t.match(r)[1];else if(t.match(i)){var s=t.search(i)+t.match(i)[0].length,a=t.substr(s);e.key=a.split("/")[0],t.match(/\?gid=(\d+)/)&&(e.worksheet=t.match(/\?gid=(\d+)/)[1])}else t.match(/^\b[-_A-Za-z0-9]+$/)&&(e.key=t);return e.key?e:null}function f$(t){return typeof t!="string"?"":t.match(/^(https?:)?\/\/?/)?{url:t}:{color:t}}function p$(t){let e={};Object.keys(t).forEach(i=>{e[i]=qn(t[i])});var r={media:{caption:e["Media Caption"]||"",credit:e["Media Credit"]||"",url:e.Media||"",thumbnail:e["Media Thumbnail"]||"",alt:e["Alt Text"]||""},text:{headline:e.Headline||"",text:e.Text||""},display_date:e["Display Date"]||"",group:e.Group||e.Tag||"",background:f$(e.Background),type:e.Type||""};if(Object.keys(e).includes("Start Date")||Object.keys(e).includes("End Date"))e["Start Date"]&&(r.start_date=eE(e["Start Date"])),e["End Date"]&&(r.end_date=eE(e["End Date"]));else{if(e.Year&&(r.start_date={year:Ra(e.Year),month:Ra(e.Month)||"",day:Ra(e.Day)||""}),e["End Year"]&&(r.end_date={year:Ra(e["End Year"])||"",month:Ra(e["End Month"])||"",day:Ra(e["End Day"])||""}),e.Time)if(r.start_date)Ze(r.start_date,iE(e.Time));else throw new Fe("invalid_start_time_without_date");if(e["End Time"])if(r.end_date)Ze(r.end_date,iE(e["End Time"]));else throw new Fe("invalid_end_time_without_date");if(r.start_date&&!sE(r.start_date))throw new Fe("invalid_date_err");if(r.end_date&&!sE(r.end_date))throw new Fe("invalid_date_err")}return r}async function m$(t,e){let r=[];t=g$(t),await l$({url:`${e}${t}`}).then(s=>{r=s}).catch(s=>{if(s.proxy_err_code=="response_not_csv")throw new Fe("Timeline could not read the data for your timeline. Make sure you have published it to the web.");let a="undefined error";throw Array.isArray(s.message)?a=s.message.join("<br>"):a=String(s.message),new Fe(a)});let i={events:[],errors:[],warnings:[],eras:[]};return r.forEach((s,a)=>{try{if(!w5(s)){let o=p$(s);_$(o,i)}}catch(o){if(o.constructor==Fe)i.errors.push(o);else{o.message&&(o=o.message);let l=s.Headline||a;i.errors.push(o+`[${l}]`)}}}),i}function g$(t){if(t=t.trim(),t.match(/^[a-zA-Z0-9-_]+$/))return`https://docs.google.com/spreadsheets/d/${t}/pub?output=csv`;if(t.startsWith("https://docs.google.com/spreadsheets/")){if(t.match(/\/pub\?output=csv$/))return t;let e=new URL(t),r=new URLSearchParams(e.search);r.set("output","csv"),r.get("gid")&&r.set("single","true"),e.search=`?${r.toString()}`;let i=e.pathname.substr(0,e.pathname.lastIndexOf("/"));return e.pathname=`${i}/pub`,e.toString()}throw new Fe("invalid_url_err",t)}async function v$(t,e){if(!e.sheets_proxy)throw new Fe("Proxy option must be set to read data from Google");var r=await m$(t,e.sheets_proxy);if(r)return r}async function y$(t,e){let r=null,i={};if(typeof e=="function"?r=e:typeof e=="object"&&(i=e,r=e.callback,typeof i.callback=="function"&&(r=i.callback)),!r)throw new Fe("Second argument to makeConfig must be either a function or an object which includes a 'callback' property with a 'function' type value");var s,a,o=h$(t);if(o){try{a=await v$(t,i)}catch(u){s=new qs,u.name=="NetworkError"?s.logError(new Fe("network_err")):u.name=="TLError"?s.logError(u):s.logError(new Fe("unknown_read_err",u.name)),r(s);return}if(s=new qs(a),a.errors)for(var l=0;l<a.errors.length;l++)s.logError(a.errors[l]);r(s)}else Go({url:t,dataType:"json",success:function(u){try{s=new qs(u)}catch(c){s=new qs,s.logError(c)}r(s)},error:function(u,c,h){if(s=new qs,c=="parsererror")var h=new Fe("invalid_url_err");else var h=new Fe("unknown_read_err",c);s.logError(h),r(s)}})}function _$(t,e){var r="event";typeof t.type<"u"&&(r=t.type,delete t.type),r=="title"?e.title?(e.warnings.push("Multiple title slides detected."),e.events.push(t)):e.title=t:r=="era"?e.eras.push(t):e.events.push(t)}class w${constructor(e){if(e)this.scale=e.scale,this.minor=e.minor,this.major=e.major;else throw new Fe("axis_helper_no_options_err")}getPixelsPerTick(e){return e*this.minor.factor}getMajorTicks(e){return this._getTicks(e,this.major)}getMinorTicks(e){return this._getTicks(e,this.minor)}_getTicks(e,r){for(var i=e._scaled_padding*r.factor,s=e._earliest-i,a=e._latest+i,o=[],l=s;l<a;l+=r.factor)o.push(e.getDateFromTime(l).floor(r.name));return{name:r.name,ticks:o}}}var pv={},tA=function(t,e){pv[t]=[];for(var r=0;r<e.length-1;r++){var i=e[r],s=e[r+1];pv[t].push(new w$({scale:i[3],minor:{name:i[0],factor:i[1]},major:{name:s[0],factor:s[1]}}))}};tA("human",jr);tA("cosmological",zd);function b$(t,e){typeof e!="number"&&(e=100);var r=t.getScale(),i=pv[r];if(!i)throw new Fe("axis_helper_scale_err",r);for(var s=null,a=0;a<i.length;a++){var o=i[a],l=o.getPixelsPerTick(t._pixels_per_milli);if(l>e){if(s==null)return o;var u=Math.abs(e-l),c=Math.abs(e-l);return u<c?o:s}s=o}return i[i.length-1]}const x$={millisecond:"time_milliseconds",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"compact",epoch:"compact",era:"compact",eon:"compact",eon2:"compact"};class vE{constructor(e,r){var i=e.events;this._scale=e.scale,r=Ze({display_width:500,screen_multiplier:3,max_rows:null},r),this._display_width=r.display_width,this._screen_multiplier=r.screen_multiplier,this._pixel_width=this._screen_multiplier*this._display_width,this._group_labels=void 0,this._positions=[],this._pixels_per_milli=0,this._earliest=e.getEarliestDate().getTime(),this._latest=e.getLatestDate().getTime(),this._span_in_millis=this._latest-this._earliest,this._span_in_millis<=0&&(this._span_in_millis=this._computeDefaultSpan(e)),this._average=this._span_in_millis/i.length,this._pixels_per_milli=this.getPixelWidth()/this._span_in_millis,this._axis_helper=b$(this),this._scaled_padding=1/this.getPixelsPerTick()*(this._display_width/2),this._computePositionInfo(i,r.max_rows)}_computeDefaultSpan(e){if(e.scale=="human"){for(var r={},i=0;i<e.events.length;i++){var s=e.events[i].start_date.findBestFormat();r[s]=r[s]?r[s]+1:1}for(var i=jr.length-1;i>=0;i--)if(r.hasOwnProperty(jr[i][0])){var a=jr[jr.length-1];return jr[i+1]&&(a=jr[i+1]),a[1]}return 365*24*60*60*1e3}return 2e5}getGroupLabels(){return this._group_labels||[]}getScale(){return this._scale}getNumberOfRows(){return this._number_of_rows}getPixelWidth(){return this._pixel_width}getPosition(e){return(e-this._earliest)*this._pixels_per_milli}getPositionInfo(e){return this._positions[e]}getPixelsPerTick(){return this._axis_helper.getPixelsPerTick(this._pixels_per_milli)}getTicks(){return{major:this._axis_helper.getMajorTicks(this),minor:this._axis_helper.getMinorTicks(this)}}getDateFromTime(e){if(this._scale=="human")return new Hf(e);if(this._scale=="cosmological")return new Wf(new Lu(e));throw new Fe("time_scale_scale_err",this._scale)}getMajorScale(){return this._axis_helper.major.name}getMinorScale(){return this._axis_helper.minor.name}_assessGroups(e){for(var r=[],i=!1,s=0;s<e.length;s++)e[s].group&&(r.indexOf(e[s].group)<0?r.push(e[s].group):i=!0);return r.length&&i&&r.push(""),r}_computeRowInfo(e,r){for(var i=[],s=0,a=0;a<e.length;a++){var o=e[a],l=[];delete o.row;for(var u=0;u<i.length;u++)if(l.push(i[u].end-o.start),l[u]<=0){o.row=u,i[u]=o;break}if(typeof o.row>"u")if(r===null)o.row=i.length,i.push(o);else if(r>0)o.row=i.length,i.push(o),r--;else{var c=Math.min.apply(null,l),h=l.indexOf(c);o.row=h,o.end>i[h].end&&(i[h]=o),s++}}return{n_rows:i.length,n_overlaps:s}}_computePositionInfo(e,r,i){i=i||100;for(var s=[],a=!1,o=0;o<e.length;o++){var l={start:this.getPosition(e[o].start_date.getTime())};if(this._positions.push(l),typeof e[o].end_date<"u"){var u=this.getPosition(e[o].end_date.getTime());l.width=u-l.start,l.width>i?l.end=l.start+l.width:l.end=l.start+i}else l.width=i,l.end=l.start+i;e[o].group?s.indexOf(e[o].group)<0&&s.push(e[o].group):a=!0}if(s.length){a&&s.push("");for(var h=[],o=0;o<s.length;o++)h[o]={label:s[o],idx:o,positions:[],n_rows:1,n_overlaps:0};for(var o=0;o<this._positions.length;o++){var l=this._positions[o];l.group=s.indexOf(e[o].group||""),l.row=0;for(var f=h[l.group],p=f.positions.length-1;p>=0;p--)f.positions[p].end>l.start&&f.n_overlaps++;f.positions.push(l)}for(var g=s.length;;){var _=Math.max(0,r-g);if(!_||(h.sort(function(b,T){return b.n_overlaps>T.n_overlaps?-1:b.n_overlaps<T.n_overlaps?1:b.idx-T.idx}),!h[0].n_overlaps))break;for(var g=0,o=0;o<h.length;o++){var f=h[o];if(f.n_overlaps&&_){var A=this._computeRowInfo(f.positions,f.n_rows+1);f.n_rows=A.n_rows,f.n_overlaps=A.n_overlaps,_--}g+=f.n_rows}}this._number_of_rows=g,this._group_labels=[],h.sort(function(E,b){return E.idx-b.idx});for(var o=0,R=0;o<h.length;o++){this._group_labels.push({label:h[o].label,rows:h[o].n_rows});for(var p=0;p<h[o].positions.length;p++){var l=h[o].positions[p];l.row+=R}R+=h[o].n_rows}}else{var c=this._computeRowInfo(this._positions,r);this._number_of_rows=c.n_rows}}getAxisTickDateFormat(e){return this._scale=="cosmological"?"compact":x$[e]}}class nA{constructor(e){this._el={parent:{},container:{},message:{}},this.options={width:600,height:600},this.data={label:"",rows:1},this._el.container=he("div","tl-timegroup"),Ze(this.data,e),this.animator={},this._initLayout(),this._initEvents()}updateDisplay(e,r){}setRowPosition(e,r){this.options.height=r*this.data.rows,this.setPosition({top:e}),this._el.container.style.height=this.options.height+"px"}setAlternateRowColor(e,r){var i="tl-timegroup";e&&(i+=" tl-timegroup-alternate"),r&&(i+=" tl-timegroup-hidden"),this._el.container.className=i}_onMouseClick(){this.fire("clicked",this.options)}_initLayout(){this._el.message=he("div","tl-timegroup-message",this._el.container),this._el.message.innerHTML=this.data.label}_initEvents(){Pe.addListener(this._el.container,"click",this._onMouseClick,this)}_updateDisplay(e,r,i){}}Sn(nA,In,Ii);class rA{constructor(e,r,i,s){this.start_date=e,this.end_date=r,this.headline=i,this._el={container:{},background:{},content_container:{},content:{},text:{}},this._text={},this._state={loaded:!1},this.options={duration:1e3,ease:$f,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,Ze(this.options,s),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(e){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.start_date.getTime()}getEndTime(){return this.end_date?this.end_date.getTime():!1}setHeight(e){var r=12,i=1;this._el.content_container.style.height=e+"px",this._el.content.className="tl-timeera-content",Uf?(i=Math.floor(e/(r+2)),i<1&&(i=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=i):(i=e/r,i>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=i*r+"px")}setWidth(e){this.end_date&&(this._el.container.style.width=e+"px",e>this.options.marker_width_min?(this._el.content_container.style.width=e+"px",this._el.content_container.className="tl-timeera-content-container tl-timeera-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timeera-content-container"))}setClass(e){this._el.container.className=e}setRowPosition(e,r){this.setPosition({top:e}),r<56&&this._el.content_container.remove("tl-timeera-content-container-small")}setColor(e){this._el.container.className="tl-timeera tl-timeera-color"+e}_initLayout(){this._el.container=he("div","tl-timeera"),this.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timeera tl-timeera-with-end"),this._el.content_container=he("div","tl-timeera-content-container",this._el.container),this._el.background=he("div","tl-timeera-background",this._el.content_container),this._el.content=he("div","tl-timeera-content",this._el.content_container),this._el.text=he("div","tl-timeera-text",this._el.content),this._text=he("h2","tl-headline",this._el.text),this.headline&&this.headline!=""&&(this._text.innerHTML=oo(this.headline)),this.onLoaded()}_initEvents(){}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}Sn(rA,In,Ii);function E$(t){const e=t.getBoundingClientRect();return e.left>=0&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}class iA{constructor(e,r,i){i&&this.setLanguage(i),this._el={container:{},content_container:{},major:{},minor:{}},this._text={},this._state={loaded:!1},this.data={},this.options={duration:1e3,ease:$f,width:600,height:600},this.active=!1,this.animator={},this.axis_helper={},this.minor_ticks=[],this.major_ticks=[],typeof e=="object"?this._el.container=e:this._el.container=uc(e),Ze(this.options,r),this._initLayout(),this._initEvents()}show(){}hide(){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}getLeft(){return this._el.container.style.left.slice(0,-2)}drawTicks(e,r){var i=e.getTicks();this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor",this._el.major.style.opacity=0,this._el.minor.style.opacity=0,this.major_ticks=this._createTickElements(i.major.ticks,this._el.major,e.getAxisTickDateFormat(i.major.name)),this.minor_ticks=this._createTickElements(i.minor.ticks,this._el.minor,e.getAxisTickDateFormat(i.minor.name),i.major.ticks),this.positionTicks(e,r,!0),this._el.major.className="tl-timeaxis-major tl-animate-opacity tl-timeaxis-animate-opacity",this._el.minor.className="tl-timeaxis-minor tl-animate-opacity tl-timeaxis-animate-opacity",this._el.major.style.opacity=1,this._el.minor.style.opacity=1}_createTickElements(e,r,i,s){r.innerHTML="";var a={},o=new Date(-1,13,-30);if(a[o.getTime()]=!0,s)for(var l=0;l<s.length;l++)a[s[l].getTime()]=!0;for(var u=[],l=0;l<e.length;l++){var c=e[l];if(!(c.getTime()in a)){var h=he("div","tl-timeaxis-tick",r),f=he("span","tl-timeaxis-tick-text tl-animate-opacity",h);let g=c.getDisplayDate(this.getLanguage(),i);f.innerHTML=g,u.push({tick:h,tick_text:f,display_date:g,date:c})}}return u}positionTicks(e,r,i){i?(this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor"):(this._el.major.className="tl-timeaxis-major tl-timeaxis-animate",this._el.minor.className="tl-timeaxis-minor tl-timeaxis-animate"),this._positionTickArray(this.major_ticks,e,r),this._positionTickArray(this.minor_ticks,e,r)}_positionTickArray(e,r,i){if(e[1]&&e[0]){var s=r.getPosition(e[1].date.getMillisecond())-r.getPosition(e[0].date.getMillisecond()),a=1;s<i&&(a=Math.round(i/r.getPixelsPerTick()));for(var o=1,l=0;l<e.length;l++){var u=e[l];u.tick.style.left=r.getPosition(u.date.getMillisecond())+"px",u.tick_text.innerHTML=u.display_date,a>1?o>=a?(o=1,u.tick_text.style.opacity=1,u.tick.className="tl-timeaxis-tick"):(o++,u.tick_text.style.opacity=0,u.tick.className="tl-timeaxis-tick tl-timeaxis-tick-hidden"):(u.tick_text.style.opacity=1,u.tick.className="tl-timeaxis-tick")}}}getVisibleTicks(){return{major:this._getVisibleTickArray(this.major_ticks),minor:this._getVisibleTickArray(this.minor_ticks)}}_getVisibleTickArray(e){return e.filter(({tick:r})=>E$(r))}_initLayout(){this._el.content_container=he("div","tl-timeaxis-content-container",this._el.container),this._el.major=he("div","tl-timeaxis-major",this._el.content_container),this._el.minor=he("div","tl-timeaxis-minor",this._el.content_container),this.onLoaded()}_initEvents(){}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}Sn(iA,In,Ii,Ci);class sA{constructor(e,r,i){this._el={container:{},content_container:{},content:{},headline_container:{},headline:{},date:{}},this.options={title:!1},this.data={unique_id:"",headline:"headline",text:"text"},T5(this,e),Ze(this.options,r),this._el.container=he("div","tl-text"),this._el.container.id=this.data.unique_id,this._initLayout(),i&&i.appendChild(this._el.container)}show(){}hide(){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}headlineHeight(){return this._el.headline.offsetHeight+40}addDateText(e){this._el.date.innerHTML=e}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){if(this._el.content_container=he("div","tl-text-content-container",this._el.container),this._el.headline_container=he("div","tl-text-headline-container",this._el.content_container),this.data.headline!=""){var e="tl-headline";this.options.title&&(e="tl-headline tl-headline-title"),this._el.headline=he("h2",e,this._el.headline_container),this._el.headline.innerHTML=this.data.headline}if(this._el.date=he("h3","tl-headline-date",this._el.headline_container),this.data.text!=""){var r="";r+=S5(this.options.autolink==!0?lv(this.data.text):this.data.text),this._el.content=he("div","tl-text-content",this._el.content_container),this._el.content.innerHTML=r}this.onLoaded()}}Sn(sA,In);class ht{constructor(e,r,i){i&&this.setLanguage(i),this._el={container:{},content_container:{},content:{},content_item:{},content_link:{},caption:null,credit:null,parent:{},link:null},this.player=null,this.timer=null,this.load_timer=null,this.message=null,this.media_id=null,this._state={loaded:!1,show_meta:!1,media_loaded:!1},this.data={unique_id:null,url:null,credit:null,caption:null,credit_alternate:null,caption_alternate:null,link:null,link_target:null},this.options={api_key_flickr:"bd3a7c45ddd52f3101825d41563a6125",api_key_googlemaps:"AIzaSyB9dW8e_iRrATFa8g24qB6BDBGdkrLDZYI",api_key_embedly:"",credit_height:0,caption_height:0,background:0},this.animator={},Ze(this.options,r),Ze(this.data,e),this.options.background||(this._el.container=he("div","tl-media"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._initLayout())}loadMedia(){var e=this;if(!this._state.loaded)try{this.load_timer=setTimeout(function(){e.loadingMessage(),e._loadMedia(),e._updateDisplay()},1200)}catch(r){Ue("Error loading media for ",this._media),Ue(r)}}_updateMessage(e){this.message&&this.message.updateMessage(e)}loadingMessage(){this._updateMessage(this._("loading")+" "+this.options.media_name)}errorMessage(e){e?e=this._("error")+": "+e:e=this._("error"),this._updateMessage(e)}updateMediaDisplay(e){this._state.loaded&&!this.options.background&&(ya?this._el.content_item.style.maxHeight=this.options.height/2+"px":this._el.content_item.style.maxHeight=this.options.height-this.options.credit_height-this.options.caption_height-30+"px",this._el.container.style.maxWidth=this.options.width+"px",Co&&this._el.content_item.offsetWidth>this._el.content_item.offsetHeight,this._updateMediaDisplay(e),this._state.media_loaded&&(this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")))}_loadMedia(){this.onLoaded()}_updateMediaDisplay(e){Co&&(this._el.content_item.style.maxWidth=this.options.width+"px",this._el.content_item.style.width="auto")}_getMeta(){}_getImageURL(e,r){return""}show(){}hide(){}addTo(e){e.appendChild(this._el.container),this.onAdd()}removeFrom(e){e.removeChild(this._el.container),this.onRemove()}getImageURL(e,r){return this._getImageURL(e,r)}updateDisplay(e,r,i){this._updateDisplay(e,r,i)}stopMedia(){try{this._stopMedia()}catch(e){Ue(`stopMedia() exception: ${e}`)}}loadErrorDisplay(e){try{this._el.content.removeChild(this._el.content_item)}catch{}this._el.content_item=he("div","tl-media-item tl-media-loaderror",this._el.content),this._el.content_item.innerHTML="<div class='tl-icon-"+this.options.media_type+"'></div><p>"+e+"</p>",this.onLoaded(!0)}onLoaded(e){this._state.loaded=!0,this.fire("loaded",this.data),this.message&&this.message.hide(),e||this.options.background||this.showMeta(),this.updateDisplay()}onMediaLoaded(e){this._state.media_loaded=!0,this.fire("media_loaded",this.data),this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")}showMeta(e,r){this._state.show_meta=!0,this.data.credit&&this.data.credit!=""&&(this._el.credit=he("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.options.autolink==!0?lv(this.data.credit):this.data.credit,this.options.credit_height=this._el.credit.offsetHeight),this.data.caption&&this.data.caption!=""&&(this._el.caption=he("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.options.autolink==!0?lv(this.data.caption):this.data.caption,this.options.caption_height=this._el.caption.offsetHeight),(!this.data.caption||!this.data.credit)&&this.getMeta()}getMeta(){this._getMeta()}updateMeta(){!this.data.credit&&this.data.credit_alternate&&(this._el.credit=he("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.data.credit_alternate,this.options.credit_height=this._el.credit.offsetHeight),!this.data.caption&&this.data.caption_alternate&&(this._el.caption=he("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.data.caption_alternate,this.options.caption_height=this._el.caption.offsetHeight),this.updateDisplay()}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){this.message=new qf(this._el.container,this.options,this.getLanguage()),this._el.content_container=he("div","tl-media-content-container",this._el.container),this.data.link&&this.data.link!=""?(this._el.link=he("a","tl-media-link",this._el.content_container),this._el.link.href=this.data.link,this.data.link_target&&this.data.link_target!=""?this._el.link.target=this.data.link_target:this._el.link.target="_blank",this._el.link.target=="_blank"&&this._el.link.setAttribute("rel","noopener"),this._el.content=he("div","tl-media-content",this._el.link)):this._el.content=he("div","tl-media-content",this._el.content_container)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r),i&&(this.options.layout=i),this._el.credit&&(this.options.credit_height=this._el.credit.offsetHeight),this._el.caption&&(this.options.caption_height=this._el.caption.offsetHeight+5),this.updateMediaDisplay(this.options.layout)}domCreate(...e){return he(...e)}_stopMedia(){}}Sn(ht,In,Ci);let yE=class extends ht{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=this,r="tl-media-item tl-media-image tl-media-shadow";(this.data.url.match(/.png(\?.*)?$/)||this.data.url.match(/.svg(\?.*)?$/))&&(r="tl-media-item tl-media-image"),this._el.content_item=this.domCreate("img",r,this._el.content),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=Ao(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=Ao(this.data.caption)),this._el.content_item.addEventListener("load",function(i){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL()}getImageURL(e,r){return Bf(this.data.url)}_updateMediaDisplay(e){Co&&(this._el.content_item.style.width="auto")}};class T${constructor(e){this.doc=e,this.pending={},this.queue={css:[],js:[]},this.styleSheets=e.styleSheets,this.env=this.getEnv(),this.head=this.doc.head||this.doc.getElementsByTagName("head")[0],this.pollCount=0}createNode(e,r){var i=this.doc.createElement(e),s;for(s in r)r.hasOwnProperty(s)&&i.setAttribute(s,r[s]);return i}finish(e){var r=this.pending[e],i,s;r&&(i=r.callback,s=r.urls,s.shift(),this.pollCount=0,s.length||(i&&i.call(r.context,r.obj),this.pending[e]=null,this.queue[e].length&&this.load(e)))}getEnv(){var e=navigator.userAgent,r={async:this.doc.createElement("script").async===!0};return(r.webkit=/AppleWebKit\//.test(e))||(r.ie=/MSIE/.test(e))||(r.opera=/Opera/.test(e))||(r.gecko=/Gecko\//.test(e))||(r.unknown=!0),r}load(e,r,i,s,a){var o=(function(){this.finish(e)}).bind(this),l=e==="css",u=[],c,h,f,p,g,_;if(r)if(r=typeof r=="string"?[r]:r.concat(),l||this.env.async||this.env.gecko||this.env.opera)this.queue[e].push({urls:r,callback:i,obj:s,context:a});else for(c=0,h=r.length;c<h;++c)this.queue[e].push({urls:[r[c]],callback:c===h-1?i:null,obj:s,context:a});if(!(this.pending[e]||!(p=this.pending[e]=this.queue[e].shift()))){for(g=p.urls,c=0,h=g.length;c<h;++c)_=g[c],l?f=this.env.gecko?this.createNode("style"):this.createNode("link",{href:_,rel:"stylesheet"}):(f=this.createNode("script",{src:_}),f.async=!1),f.className="lazyload",f.setAttribute("charset","utf-8"),this.env.ie&&!l?f.onreadystatechange=function(){/loaded|complete/.test(f.readyState)&&(f.onreadystatechange=null,o())}:l&&(this.env.gecko||this.env.webkit)?this.env.webkit?(p.urls[c]=f.href,this.pollWebKit()):(f.innerHTML='@import "'+_+'";',this.pollGecko(f)):f.onload=f.onerror=o,u.push(f);for(c=0,h=u.length;c<h;++c)this.head.appendChild(u[c])}}pollGecko(e){var r;try{r=!!e.sheet.cssRules}catch{if(this.pollCount+=1,this.pollCount<200){var i=this;setTimeout(function(){i.pollGecko(e)},50)}else r&&this.finish("css");return}this.finish("css")}pollWebKit(){var e=this.pending.css,r;if(e){for(r=this.styleSheets.length;--r>=0;)if(this.styleSheets[r].href===e.urls[0]){this.finish("css");break}this.pollCount+=1,e&&(this.pollCount<200?setTimeout(this.pollWebKit.bind(this),50):this.finish("css"))}}css(e,r,i,s){this.load("css",e,r,i,s)}js(e,r,i,s){this.load("js",e,r,i,s)}}function ua(t,e,r,i){aA.js(t,e,r,i)}function bm(t,e,r,i){aA.css(t,e,r,i)}let aA=new T$(document);class S$ extends ht{_loadMedia(){var e=this,r;this.youtube_loaded=!1,this._el.content_item=this.domCreate("div","tl-media-item tl-media-youtube tl-media-shadow",this._el.content),this._el.content_item.id=la(7),r=I5(this.data.url),this.media_id={},this.data.url.match("v=")?this.media_id.id=r.v:this.data.url.match("/embed/")?this.media_id.id=this.data.url.split("embed/")[1].split(/[?&]/)[0]:this.data.url.match(/v\/|v=|youtu\.be\//)?this.media_id.id=this.data.url.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0]:Ue("YOUTUBE IN URL BUT NOT A VALID VIDEO"),this.data.url.match("start=")?this.media_id.start=mm(this.data.url.split("start=")[1]):this.data.url.match("t=")&&(this.media_id.start=mm(this.data.url.split("t=")[1])),this.data.url.match("end=")&&(this.media_id.end=mm(this.data.url.split("end=")[1])),this.media_id.hd=typeof r.hd<"u",ua("https://www.youtube.com/iframe_api",function(){e.createMedia()})}_updateMediaDisplay(){this._el.content_item.style.height=_a.r16_9({w:this.options.width})+"px",this._el.content_item.style.width=this.options.width+"px"}_stopMedia(){if(this.youtube_loaded)try{this.player.getPlayerState()==YT.PlayerState.PLAYING&&this.player.pauseVideo()}catch(e){Ue(e)}}createMedia(){var e=this;clearTimeout(this.timer),typeof YT<"u"&&typeof YT.Player<"u"?this.player=new YT.Player(this._el.content_item.id,{playerVars:{enablejsapi:1,color:"white",controls:1,start:this.media_id.start,end:this.media_id.end,fs:1},videoId:this.media_id.id,events:{onReady:function(){e.onPlayerReady(),e.onLoaded()},onStateChange:e.onStateChange}}):this.timer=setTimeout(function(){e.createMedia()},1e3)}onPlayerReady(e){this.youtube_loaded=!0,this._el.content_item=document.getElementById(this._el.content_item.id),this.onMediaLoaded()}onStateChange(e){e.data==YT.PlayerState.ENDED&&(e.target.seekTo(0),e.target.pauseVideo())}}class I$ extends ht{_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-map tl-media-shadow",this._el.content),this.media_id=this.data.url,this.mapframe=this.domCreate("iframe","",this._el.content_item),this.mapframe.width="100%",this.mapframe.height="100%",this.mapframe.frameBorder="0",this.mapframe.src=this.makeGoogleMapsEmbedURL(this.media_id,this.options.api_key_googlemaps),this.onLoaded()}_updateMediaDisplay(){if(this._state.loaded){var e=_a.square({w:this._el.content_item.offsetWidth});this._el.content_item.style.height=e.h+"px"}}makeGoogleMapsEmbedURL(e,r){var i=!1;function s(f){function p(A,R){if(A.slice(-1)=="z")R.zoom=A;else if(A.slice(-1)=="m")R.zoom=14,R.maptype="satellite";else if(A.slice(-1)=="t"){if(i=!0,_=="place")var E=f.match(h.place)[3]+","+f.match(h.place)[4];else{var E=R.center;delete R.center}R={},R.location=E,streetview_params=A.split(",");for(let T in a.streetview){var b=parseInt(T)+1;a.streetview[T]=="pitch"&&streetview_params[b]=="90t"?R[a.streetview[T]]=0:R[a.streetview[T]]=streetview_params[b].slice(0,-1)}}return R}function g(A,R){var E={},b=R[1],T=R[R.length-1];for(let U in a[A]){var D=parseInt(U)+2;a[A][U]=="center"?E[a[A][U]]=R[D]+","+R[++D]:E[a[A][U]]=R[D]}return E=p(T,E),E.key=r,i==!0&&(A="streetview"),b+"/embed/v1/"+A+k5(E)}let _="view";return f.match(h.place)?_="place":f.match(h.directions)?_="directions":f.match(h.search)&&(_="search"),g(_,f.match(h[_]))}var a={view:["center"],place:["q","center"],directions:["origin","destination","center"],search:["q","center"],streetview:["fov","heading","pitch"]},o=/(https:\/\/.+google.+?\/maps)/,l=/@([-\d.]+),([-\d.]+)/,u=/([\w\W]+)/,c=/,((?:[-\d.]+[zmayht],?)*)/,h={view:new RegExp(o.source+"/"+l.source+c.source),place:new RegExp(o.source+"/place/"+u.source+"/"+l.source+c.source),directions:new RegExp(o.source+"/dir/"+u.source+"/"+u.source+"/"+l.source+c.source),search:new RegExp(o.source+"/search/"+u.source+"/"+l.source+c.source)};return s(e)}}class k$ extends ht{constructor(e,r,i){super(e,r,i),this.blockquote=Gf.sanitize(this.data.url)}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-blockquote",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this._el.content_item.innerHTML=this.blockquote,this.onLoaded()}updateMediaDisplay(){}}class C$ extends ht{_loadMedia(){var e,r,i=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-wikipedia",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.media_id=this.data.url.split("wiki/")[1].split("#")[0].replace("_"," "),this.media_id=this.media_id.replace(" ","%20"),r=this.data.url.split("//")[1].split(".wikipedia")[0],e="https://"+r+".wikipedia.org/w/api.php?action=query&prop=extracts|pageimages&redirects=&titles="+this.media_id+"&exintro=1&format=json&callback=?",Go({type:"GET",url:e,dataType:"json",success:function(s){i.createMedia(s)},error:function(s,a){var o="";o+=i._("wikipedia_load_err")+"<br/>"+i.media_id+"<br/>"+a,i.loadErrorDisplay(o)}})}createMedia(e){var r="";if(e.query){var i="",r={entry:{},title:"",text:"",extract:"",paragraphs:1,page_image:"",text_array:[]};r.entry=C5(e.query.pages,0),r.extract=r.entry.extract,r.title=r.entry.title,r.page_image=r.entry.thumbnail,r.extract.match("<p>")?r.text_array=r.extract.split("<p>"):r.text_array.push(r.extract);for(var s=0;s<r.text_array.length;s++)s+1<=r.paragraphs&&s+1<r.text_array.length&&(r.text+="<p>"+r.text_array[s+1]);i+="<span class='tl-icon-wikipedia'></span>",i+="<div class='tl-wikipedia-title'><h4><a href='"+this.data.url+"' target='_blank' rel='noopener'>"+r.title+"</a></h4>",i+="<span class='tl-wikipedia-source'>"+this._("wikipedia")+"</span></div>",r.page_image,i+=r.text,r.extract.match("REDIRECT")||(this._el.content_item.innerHTML=i,this.onLoaded())}}updateMediaDisplay(){}}function A$(t){if(t.match(/^.+#\/media\/.+/))return`File:${t.split("#")[1].split(":")[1]}`;if(t.match(/^.*commons.wikimedia.org\/wiki\/File:.+/)){let e=t.split("/");return e[e.length-1]}return null}function P$(t){let e={};if(t.query&&t.query.pages){let r=Object.keys(t.query.pages);e.page_id=r[0];let i=t.query.pages[e.page_id];e.url=i.imageinfo[0].thumburl,i.entityterms&&i.entityterms.label&&(e.label=i.entityterms.label[0])}return e}class _E extends ht{_loadMedia(){var e,r=Math.round(this.options.width)||1e3,i=this.getLanguage().lang.toLowerCase(),s=this;try{this.establishMediaID(),e=`https://commons.wikimedia.org/w/api.php?action=query&titles=${this.media_id}&prop=imageinfo|entityterms&iiprop=url&&iiurlwidth=${r}&format=json&origin=*&wbetlanguage=${i}`,Bh(e,function(a){let o=P$(a);o.url?(s.base_image_url=o.url,s.page_id=o.page_id,!s.data.alt&&o.label&&(s.data.alt=o.label),s.options.background||s.createMedia(),s.onLoaded()):s.loadErrorDisplay(s._("wikipedia_image_load_err"))})}catch(a){s.loadErrorDisplay(s._(a.message_key))}}establishMediaID(){let e=A$(this.data.url);if(e)this.media_id=e;else throw new Fe("Invalid Wikipedia Image URL")}createMedia(){var e=this;if(this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-wikipedia-image tl-media-shadow",this._el.content),this.data.alt)this._el.content_item.alt=this.data.alt;else if(this.page_id){let r=`M${this.page_id}`,i=`https://commons.wikimedia.org/w/api.php?action=wbgetentities&format=json&ids=${r}&format=json&origin=*`;zf(i).then(s=>{if(s.entities&&s.entities[r]){let a=s.entities[r].labels,o=e.getLanguage().lang.toLowerCase(),l=null;a[o]?l=a[o]:o.length>2&&a[o.substr(0,2)]?l=a[o.substr(0,2)]:a.en&&(l=a.en),l?(console.log(`wikibase_id: ${e.media_id} alt ${l.value}`),e.data.alt=l.value,e._el.content_item.alt=e.data.alt):console.log(`wikibase_id: ${e.media_id} ain't got no alt`)}})}this.data.title&&(this._el.content_item.title=this.data.title),this._el.content_item.addEventListener("load",function(r){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}_getImageURL(e,r){if(e&&this.base_image_url){let i=this.base_image_url.match(/(\/[\d\.]+px-)/);if(i)return e=Math.round(e),this.base_image_url.replace(i[1],`/${e}px-`)}return this.base_image_url}}class R$ extends ht{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-soundcloud tl-media-shadow",this._el.content),this.media_id=this.data.url,e="https://soundcloud.com/oembed?url="+this.media_id+"&format=js&callback=?",Bh(e,function(i){ua("https://w.soundcloud.com/player/api.js",function(){r.createMedia(i)})})}createMedia(e){this._el.content_item.innerHTML=e.html,self.widget=SC.Widget(this._el.content_item.querySelector("iframe")),this.soundCloudCreated=!0,this.onLoaded()}_stopMedia(){this.soundCloudCreated&&self.widget.pause()}}class D$ extends ht{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vimeo tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0];var i=null;this.data.url.match(/#t=([^&]+).*/)&&(i=this.data.url.match(/#t=([^&]+).*/)[1]),e="https://player.vimeo.com/video/"+this.media_id+"?api=1&title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff",i&&(e=e+="&amp;#t="+i),this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(s){r.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=_a.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player&&this.player.contentWindow&&this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(e){Ue(e)}}}class N$ extends ht{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-dailymotion",this._el.content),this.data.url.indexOf("dai.ly/")!=-1?this.media_id=this.data.url.substr(this.data.url.indexOf("dai.ly/")+7):this.data.url.match("video")?this.media_id=this.data.url.split("video/")[1].split(/[?&]/)[0]:this.media_id=this.data.url.split("embed/")[1].split(/[?&]/)[0],this.media_id.indexOf("_")!=-1&&(this.media_id=this.media_id.split("_")[0]),e="https://www.dailymotion.com/embed/video/"+this.media_id+"?api=postMessage",this._el.content_item.innerHTML="<iframe autostart='false' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._state.loaded&&(this._el.content_item.style.height=_a.r16_9({w:this._el.content_item.offsetWidth})+"px")}_stopMedia(){this._state.loaded&&this._el.content_item.querySelector("iframe").contentWindow.postMessage('{"command":"pause","parameters":[]}',"*")}}class M$ extends ht{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vine tl-media-shadow",this._el.content),this.media_id=this.data.url.split("vine.co/v/")[1],e="https://vine.co/v/"+this.media_id+"/embed/simple",this._el.content_item.innerHTML="<iframe frameborder='0' width='100%' height='100%' src='"+e+"'></iframe><script async src='https://platform.vine.co/static/scripts/embed.js' charset='utf-8'><\/script>",this.onLoaded()}_updateMediaDisplay(){var e=_a.square({w:this._el.content_item.offsetWidth,h:this.options.height});this._el.content_item.style.height=e.h+"px"}_stopMedia(){this._el.content_item.querySelector("iframe").contentWindow.postMessage("pause","*")}}class L$ extends ht{_loadMedia(){var e,r=this;if(this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.data.url.match("^(https?:)?/*(www.)?(twitter|x).com"))this.data.url.match("status/")?this.media_id=this.data.url.split("status/")[1]:this.data.url.match("statuses/")?this.media_id=this.data.url.split("statuses/")[1]:this.media_id="";else if(this.data.url.match(`<blockquote class=['"]twitter-tweet['"]`)){var i=this.data.url.match(/(status|statuses)\/(\d+)/);if(i&&i.length>2)this.media_id=i[2];else{r.loadErrorDisplay(r._("twitterembed_invalidurl_err"));return}}e="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",Go({type:"GET",url:e,dataType:"json",success:function(s){r.createMedia(s)},error:function(s,a){var o="";o+=r._("twitter_load_err")+"<br/>"+r.media_id+"<br/>"+a,r.loadErrorDisplay(o)}})}createMedia(e){var r="",i="",s="",a="",o="",l="",u=this;i=e.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=e.author_url.split("twitter.com/")[1],a=e.html.split("</p>&mdash;")[1].split('<a href="')[1],o=a.split('">')[0],l=a.split('">')[1].split("</a>")[0],i=i.replace(/<a href/ig,'<a target="_blank" rel="noopener" href'),i.includes("pic.twitter.com")||i.includes("pic.x.com")?(ua("https://platform.twitter.com/widgets.js",function(){twttr.widgets.createTweet(u.media_id,u._el.content_item,{conversation:"none",linkColor:"#cc0000",theme:"light"})}),this.onLoaded()):(r+=i,r+="<div class='vcard'>",r+="<a href='"+o+"' class='twitter-date' rel='noopener' target='_blank'>"+l+"</a>",r+="<img src='' class='tl-media-item tl-media-image'></a>",r+="<div class='author'>",r+="<a class='screen-name url' href='"+e.author_url+"' rel='noopener' target='_blank'>",r+="<span class='avatar'></span>",r+="<span class='fn'>"+e.author_name+" <span class='tl-icon-twitter'></span></span>",r+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",r+="</a>",r+="</div>",r+="</div>",this._el.content_item.innerHTML=r,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class O$ extends ht{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text";var i=this.data.url.match(/(status|statuses)\/(\d+)/);if(i&&i.length>2)this.media_id=i[2];else{r.loadErrorDisplay(r._("twitterembed_invalidurl_err"));return}e="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",window.twttr=function(s,a,o){var l,u=s.getElementsByTagName(a)[0],c=window.twttr||{};return s.getElementById(o)||(l=s.createElement(a),l.id=o,l.src="https://platform.twitter.com/widgets.js",u.parentNode.insertBefore(l,u),c._e=[],c.ready=function(h){c._e.push(h)}),c}(document,"script","twitter-wjs"),Go({type:"GET",url:e,dataType:"json",success(s){r.createMedia(s)},error:function(s,a){var o="";o+=r._("twitter_load_err")+"<br/>"+r.media_id+"<br/>"+a,r.loadErrorDisplay(o)}})}createMedia(e){var r="",i="",s="",a="",o="",l="";i=e.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=e.author_url.split("twitter.com/")[1],a=e.html.split("</p>&mdash;")[1].split('<a href="')[1],o=a.split('">')[0],l=a.split('">')[1].split("</a>")[0],i=i.replace(/<a href/ig,'<a target="_blank" rel="noopener" href');let u=this.media_id;i.includes("pic.twitter.com")?(twttr.ready(function(c){r=document.getElementsByClassName("tl-media-twitter")[0];var h=String(u);twttr.widgets.createTweet(h,r,{conversation:"none",linkColor:"#cc0000",theme:"light"}).then(function(f){this.onLoaded()})}),this._el.content_item.innerHTML=r,this.onLoaded()):(r+=i,r+="<div class='vcard'>",r+="<a href='"+o+"' class='twitter-date' rel='noopener' target='_blank'>"+l+"</a>",r+="<div class='author'>",r+="<a class='screen-name url' href='"+e.author_url+"' rel='noopener' target='_blank'>",r+="<span class='avatar'></span>",r+="<span class='fn'>"+e.author_name+" <span class='tl-icon-twitter'></span></span>",r+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",r+="</a>",r+="</div>",r+="</div>",this._el.content_item.innerHTML=r,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class wE extends ht{_loadMedia(){var e,r=this;try{this.establishMediaID(),e="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",Bh(e,function(i){i.stat=="ok"?(r.sizes=i.sizes.size,r.options.background||r.createMedia(),r.onLoaded()):r.loadErrorDisplay(r._("flickr_notfound_err"))})}catch(i){r.loadErrorDisplay(r._(i.message_key))}}establishMediaID(){if(this.data.url.match(/flic.kr\/.+/i)){var e=this.data.url.split("/").slice(-1)[0];this.media_id=A5.decode(e)}else{var r="flickr.com/photos/",i=this.data.url.indexOf(r);if(i==-1)throw new Fe("flickr_invalidurl_err");var s=i+r.length;this.media_id=this.data.url.substr(s).split("/")[1]}}createMedia(){var e=this;this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-flickr tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=Ao(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=Ao(this.data.caption)),this._el.content_item.addEventListener("load",function(r){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}getImageURL(e,r){for(var i=this.size_label(r),s=this.sizes[this.sizes.length-2].source,a=0;a<this.sizes.length;a++)this.sizes[a].label==i&&(s=this.sizes[a].source);return s}_getMeta(){var e=this,r;r="https://api.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",Bh(r,function(i){e.data.credit_alternate="<a href='"+e.data.url+"' target='_blank' rel='noopener'>"+i.photo.owner.realname+"</a>",e.data.caption_alternate=i.photo.title._content+" "+i.photo.description._content,e.updateMeta()})}size_label(e){var r="";return e<=75?e<=0?r="Large":r="Thumbnail":e<=180?r="Small":e<=240?r="Small 320":e<=375?r="Medium":e<=480?r="Medium 640":(e<=600,r="Large"),r}}class j$ extends ht{_loadMedia(){var e=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-documentcloud tl-media-shadow",this._el.content),this._el.content_item.id=la(7),this.data.url.match(/\.html$/)?this.data.url=this._transformURL(this.data.url):this.data.url.match(/.(json|js)$/)||Ue("DOCUMENT CLOUD IN URL BUT INVALID SUFFIX"),ua(["https://assets.documentcloud.org/viewer/loader.js","https://assets.documentcloud.org/viewer/viewer.js"],function(){e.createMedia()})}_transformURL(e){return e.replace(/(.*)\.html$/,"$1.js")}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}createMedia(){DV.load(this.data.url,{container:"#"+this._el.content_item.id,showSidebar:!1}),this.onLoaded()}}const V$="830b21071290df4f81a35c56abbea096",F$="704270473831239",U$=`${F$}|${V$}`,bE=`https://graph.facebook.com/v8.0/instagram_oembed?access_token=${U$}&fields=html,thumbnail_url,author_name&url=`;function B$(t){this.oembed_response=t,this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-instagram tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=Ao(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=Ao(this.data.caption)),this._el.content_item.addEventListener("load",(function(e){this.onMediaLoaded()}).bind(this)),this._el.content_item.src=t.thumbnail_url,this.onLoaded()}function $$(t){let e=`${t.statusText} [${t.status}]`;t.status==400&&(e=this._("instagram_bad_request")),this.loadErrorDisplay(e)}class z$ extends ht{_loadMedia(){this.media_id=this.data.url.split("/p/")[1].split("/")[0],this.options.background||this.createMedia()}createMedia(){this.oembed_response=null;let e=`${bE}${this.data.url}`;try{Go({url:e,dataType:"json",success:B$,error:$$,context:this})}catch(r){console.log(`Instagram: error fetching ${e}`),console.log(r);debugger}}getImageURL(){if(this.oembed_response&&this.oembed_response.thumbnail_url)return this.oembed_response.thumbnail_url;zf(`${bE}${this.data.url}`).then(e=>e.thumbnail_url).catch(e=>{Ue(`Instagram getImageURL Error: ${e.status} ${e.statusText}`)})}_getMeta(){this.oembed_response&&this.oembed_response.author_name&&(this.data.credit_alternate=`Instagram: <a href="https://instagram.com/${this.oembed_response.author_name}" target="_blank">@${this.oembed_response.author_name}</a>`),this.updateMeta()}sizes(e){var r="";return e<=150?r="t":e<=306?r="m":r="l",r}}class H$ extends ht{_loadMedia(){this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-profile tl-media-shadow",this._el.content),this._el.content_item.src=this.data.url,this.onLoaded()}_updateMediaDisplay(e){Co&&(this._el.content_item.style.maxWidth=this.options.width/2-40+"px")}}class W$ extends ht{_loadMedia(){var e;if(this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this.data.url.match(/open\?id=([^&]+)/)){var r=this.data.url.match(/open\?id=([^&]+)/)[1];e="https://drive.google.com/file/d/"+r+"/preview"}else if(this.data.url.match(/file\/d\/([^/]*)\/?/)){var r=this.data.url.match(/file\/d\/([^/]*)\/?/)[1];e="https://drive.google.com/file/d/"+r+"/preview"}else e=this.data.url;this._el.content_item.innerHTML="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}function q$(t){return t.match(/^spotify:/)?t:(t=new URL(t),`spotify${t.pathname.replace(/\/$/,"").replace(/\//g,":")}`)}class G$ extends ht{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-spotify",this._el.content),this.media_id=q$(this.data.url),this.media_id?(e="https://embed.spotify.com/?uri="+this.media_id+"&theme=white&view=coverart",this.player=this.domCreate("iframe","tl-media-shadow",this._el.content_item),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.onLoaded()):this.loadErrorDisplay(this._("spotify_invalid_url"))}_updateMediaDisplay(e){var r=this.options.height,i=0,s=0;ya?r=this.options.height/2:r=this.options.height-this.options.credit_height-this.options.caption_height-30,this._el.content_item.style.maxHeight="none",Ue(r),Ue(this.options.width),r>this.options.width?(Ue("height is greater"),i=this.options.width+80+"px",s=this.options.width+"px"):(Ue("width is greater"),Ue(this.options.width),i=r+"px",s=r-80+"px"),this.player.style.width=s,this.player.style.height=i,this._el.credit&&(this._el.credit.style.width=s),this._el.caption&&(this._el.caption.style.width=s)}_stopMedia(){}}class K$ extends ht{constructor(e,r,i){super(e,r,i),this.iframe=Gf.sanitize(this.data.url,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder"]})}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this._el.content_item.innerHTML=this.iframe,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class Y$ extends ht{_loadMedia(){try{var e=this;if(this.data.url.match(`<blockquote class=['"]imgur-embed-pub['"]`)){var r=this.data.url.match(/(imgur\.com)\/(\w+)/);this.media_id=r[2],this.data.url="http://imgur.com/gallery/"+this.media_id}else this.data.url&&(this.media_id=this.data.url.split("/").slice(-1)[0]);ua(["https://s.imgur.com/min/embed.js"],function(){e.createMedia()})}catch{this.loadErrorDisplay(this._("imgur_invalidurl_err"))}}createMedia(){var e=this,r="https://api.imgur.com/oembed.json?url="+this.data.url;this._el.content_item=this.domCreate("div","tl-media-item tl-media-image tl-media-imgur",this._el.content),Go({type:"GET",url:r,dataType:"json",success:function(i){try{e._el.content_item.innerHTML=i.html,setInterval(function(){document.querySelector("blockquote.imgur-embed-pub")==null?clearInterval():(imgurEmbed.createIframe(),document.getElementById("imageElement").removeAttribute("style"),document.getElementById("image").removeAttribute("style"))},2e3)}catch{Ue("Error processing imgur ajax response")}},error:function(i,s,a){s=="parsererror"?e.loadErrorDisplay(e._("imgur_invalidurl_err")):e.loadErrorDisplay(e._("unknown_read_err",s))}}),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.width=this.options.width+"px",this._el.content_item.style.height=_a.r16_9({w:this.options.width})+"px"}}class X$ extends ht{_loadMedia(){var e=Bf(this.data.url);this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content);var r="";lc||m5||e.match(/dl.dropboxusercontent.com/)?r="<iframe class='doc' frameborder='0' width='100%' height='100%' src='//docs.google.com/viewer?url="+e+"&amp;embedded=true'></iframe>":r="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this._el.content_item.innerHTML=r,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class Q$ extends ht{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=Bf(this.data.url),r=this,r=this,i="tl-media-item tl-media-audio tl-media-shadow";this._el.content_item=this.domCreate("audio",i,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){r.onMediaLoaded()}),this._el.source_item.src=e,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 audio with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(e){Co&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(e,r){var i=e.match(r),s="audio/";switch(i[1]){case"mp3":s+="mpeg";break;case"wav":s+="wav";break;case"m4a":s+="mp4";break;default:s="audio";break}return s}}class J$ extends ht{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=Bf(this.data.url),r=this,r=this,i="tl-media-item tl-media-video tl-media-shadow";this._el.content_item=this.domCreate("video",i,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){r.onMediaLoaded()}),this._el.source_item.src=e,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 video with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(e){Co&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(e,r){var i=e.match(r),s="video/";switch(i[1]){case"mp4":s+="mp4";break;case"webm":s+="webm";break;default:s="video";break}return s}}class Z$ extends ht{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-wistia tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/https?:\/\/(.+)?(wistia\.com|wi\.st)\/medias\/(.*)/)[3],Ue(`Wistia: media_id: ${this.media_id}`),e="https://fast.wistia.com/embed/iframe/"+this.media_id+"?version=v1&controlsVisibleOnLoad=true&playerColor=aae3d8",this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(i){r.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=_a.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(e){Ue(e)}}}function $h(t,e){var r={},i=[{type:"youtube",name:"YouTube",match_str:"^(https?:)?/*(www.|m.)?youtube|youtu.be",cls:S$},{type:"vimeo",name:"Vimeo",match_str:"^(https?:)?/*(player.)?vimeo.com",cls:D$},{type:"dailymotion",name:"DailyMotion",match_str:"^(https?:)?/*(www.)?(dailymotion.com|dai.ly)",cls:N$},{type:"vine",name:"Vine",match_str:"^(https?:)?/*(www.)?vine.co",cls:M$},{type:"soundcloud",name:"SoundCloud",match_str:"^(https?:)?/*(player.)?soundcloud.com",cls:R$},{type:"twitter",name:"Twitter",match_str:"^(https?:)?/*(www.)?(twitter|x).com",cls:L$},{type:"twitterembed",name:"TwitterEmbed",match_str:`<blockquote class=['"]twitter-tweet['"]`,cls:O$},{type:"googlemaps",name:"Google Map",match_str:/google.+?\/maps\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/search\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/place\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/dir\/([\w\W]+)\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)/,cls:I$},{type:"flickr",name:"Flickr",match_str:"^(https?:)?/*(www.)?flickr.com/photos",cls:wE},{type:"flickr",name:"Flickr",match_str:"^(https?://)?flic.kr/.*",cls:wE},{type:"instagram",name:"Instagram",match_str:/^(https?:)?\/*(www.)?(instagr.am|^(https?:)?\/*(www.)?instagram.com)\/p\//,cls:z$},{type:"profile",name:"Profile",match_str:/^(https?:)?\/*(www.)?instagr.am\/[a-zA-Z0-9]{2,}|^(https?:)?\/*(www.)?instagram.com\/[a-zA-Z0-9]{2,}/,cls:H$},{type:"documentcloud",name:"Document Cloud",match_str:/documentcloud.org\//,cls:j$},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://.+.wiki[mp]edia.org.+#/media/.+.(jpg|jpeg|png|gif|svg|webp)",cls:_E},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://commons.wikimedia.org/wiki/File:.+.(jpg|jpeg|png|gif|svg|webp)",cls:_E},{type:"wikipedia",name:"Wikipedia",match_str:"^(https?:)?/.+.wikipedia.org",cls:C$},{type:"image",name:"Image",match_str:/(jpg|jpeg|png|gif|svg|webp)(\?.*)?$/i,cls:yE},{type:"imgur",name:"Imgur",match_str:/^.*imgur.com\/.+$|<blockquote class=['\"]imgur-embed-pub['\"]/i,cls:Y$},{type:"googledocs",name:"Google Doc",match_str:"^(https?:)?/*[^.]*.google.com/[^/]*/d/[^/]*/[^/]*?usp=shar.*|^(https?:)?/*drive.google.com/open?id=[^&]*&authuser=0|^(https?:)?//*drive.google.com/open\\?id=[^&]*|^(https?:)?/*[^.]*.googledrive.com/host/[^/]*/",cls:W$},{type:"pdf",name:"PDF",match_str:/^.*\.pdf(\?.*)?(\#.*)?/,cls:X$},{type:"spotify",name:"spotify",match_str:"spotify",cls:G$},{type:"iframe",name:"iFrame",match_str:"iframe",cls:K$},{type:"blockquote",name:"Quote",match_str:"blockquote",cls:k$},{type:"video",name:"Video",match_str:/(mp4|webm)(\?.*)?$/i,cls:J$},{type:"wistia",name:"Wistia",match_str:/https?:\/\/(.+)?(wistia\.com|wi\.st)\/.*/i,cls:Z$},{type:"audio",name:"Audio",match_str:/(mp3|wav|m4a)(\?.*)?$/i,cls:Q$},{type:"imageblank",name:"Imageblank",match_str:"",cls:yE}];if(e){if(t instanceof Array)return!1;for(var s=0;s<i.length;s++)switch(i[s].type){case"flickr":case"image":case"instagram":if(t.url.match(i[s].match_str))return r=i[s],r;break}}else for(var s=0;s<i.length;s++)if(t.url.match(i[s].match_str))return i[s];return!1}class oA{constructor(e,r){this._el={container:{},content_container:{},media_container:{},timespan:{},line_left:{},line_right:{},content:{},text:{},media:{}},this._text={},this._state={loaded:!1},this.data={unique_id:"",background:null,date:{year:0,month:0,day:0,hour:0,minute:0,second:0,millisecond:0,thumbnail:"",format:""},text:{headline:"",text:""},media:null},this.options={duration:1e3,ease:$f,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,this.ariaLabel="",Ze(this.options,r),Ze(this.data,e),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(e){this.active=e,this.active&&this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end tl-timemarker-active":this.active?this._el.container.className="tl-timemarker tl-timemarker-active":this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end":this._el.container.className="tl-timemarker",this._el.container.ariaLabel=this.ariaLabel,this.active?this._el.container.ariaLabel+=", shown":this._el.container.ariaLabel+=", press space to show"}setFocus(e={preventScroll:!0}){this._el.container.focus(e)}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}loadMedia(){this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0)}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.data.start_date.getTime()}getEndTime(){return this.data.end_date?this.data.end_date.getTime():!1}setHeight(e){var r=12,i=1;this._el.content_container.style.height=e+"px",this._el.timespan_content.style.height=e+"px",e<=30?this._el.content.className="tl-timemarker-content tl-timemarker-content-small":this._el.content.className="tl-timemarker-content",e<=56?this._el.content_container.classList.add("tl-timemarker-content-container-small"):this._el.content_container.classList.remove("tl-timemarker-content-container-small"),Uf?(i=Math.floor(e/(r+2)),i<1&&(i=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=i):(i=e/r,i>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=i*r+"px")}setWidth(e){this.data.end_date&&(this._el.container.style.width=e+"px",e>this.options.marker_width_min?(this._el.content_container.style.width=e+"px",this._el.content_container.className="tl-timemarker-content-container tl-timemarker-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timemarker-content-container"))}setClass(e){this._el.container.className=e}setRowPosition(e,r){this.setPosition({top:e}),this._el.timespan.style.height=r+"px"}getFormattedDate(){if(qn(this.data.display_date).length>0)return this.data.display_date;let e="";return this.data.end_date&&(e=" to "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(e=(e?"from ":"")+this.data.start_date.getDisplayDate(this.getLanguage())+e),e}_onMarkerClick(e){this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerKeydown(e){/Space|Enter/.test(e.code)&&this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerBlur(e){this.fire("markerblur",{unique_id:this.data.unique_id})}_initLayout(){if(this._el.container=he("div","tl-timemarker"),this._el.container.setAttribute("tabindex","-1"),this.data.unique_id&&(this._el.container.id=this.data.unique_id+"-marker"),this.data.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timemarker tl-timemarker-with-end"),this._el.timespan=he("div","tl-timemarker-timespan",this._el.container),this._el.timespan_content=he("div","tl-timemarker-timespan-content",this._el.timespan),this._el.content_container=he("div","tl-timemarker-content-container",this._el.container),this._el.content=he("div","tl-timemarker-content",this._el.content_container),this._el.line_left=he("div","tl-timemarker-line-left",this._el.timespan),this._el.line_right=he("div","tl-timemarker-line-right",this._el.timespan),this.data.media){this._el.media_container=he("div","tl-timemarker-media-container",this._el.content);var e={url:this.data.media.thumbnail},r=this.data.media.thumbnail?$h(e,!0):null;if(r){var i=new r.cls(e);i.on("loaded",(function(){this._el.media=he("img","tl-timemarker-media",this._el.media_container),this._el.media.src=i.getImageURL()}).bind(this)),i.loadMedia()}else{var s=$h(this.data.media).type;this._el.media=he("span","tl-icon-"+s,this._el.media_container)}}this._el.text=he("div","tl-timemarker-text",this._el.content),this._text=he("h2","tl-headline",this._el.text),this.data.text.headline&&this.data.text.headline!=""?this._text.innerHTML=oo(this.data.text.headline):this.data.text.text&&this.data.text.text!=""?this._text.innerHTML=oo(this.data.text.text):this.data.media&&this.data.media.caption&&this.data.media.caption!=""&&(this._text.innerHTML=oo(this.data.media.caption));const a=this.getFormattedDate();this.ariaLabel=`${this._text.innerHTML}, ${a}`,this.onLoaded()}_initEvents(){Pe.addListener(this._el.container,"click",this._onMarkerClick,this),Pe.addListener(this._el.container,"keydown",this._onMarkerKeydown,this),Pe.addListener(this._el.container,"blur",this._onMarkerBlur,this)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}Sn(oA,Ci,In,Ii);class E_{constructor(e,r,i){this._el={drag:e,move:e},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},r&&(this._el.move=r),this.options={snap:!1,enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:0,right:!1},momentum_multiplier:2e3,duration:1e3,ease:qo},this.animator=null,this.dragevent=this.mousedrag,qr&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},Ze(this.options,i)}enable(e){Pe.addListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Pe.addListener(this._el.drag,this.dragevent.up,this._onDragEnd,this),this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){Pe.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Pe.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(e){this.options.constraint=e}_onDragStart(e){this.animator&&this.animator.stop(),qr?e.originalEvent?(this.data.pagex.start=e.originalEvent.touches[0].screenX,this.data.pagey.start=e.originalEvent.touches[0].screenY):(this.data.pagex.start=e.targetTouches[0].screenX,this.data.pagey.start=e.targetTouches[0].screenY):(this.data.pagex.start=e.pageX,this.data.pagey.start=e.pageY),this.options.enable.x,this.options.enable.y,this.data.pos.start={x:this._el.move.offsetLeft,y:this._el.move.offsetTop},this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),Pe.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Pe.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(e){this.data.sliding=!1,Pe.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Pe.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(e){var r={x:0,y:0};this.data.sliding=!0,qr?e.originalEvent?(this.data.pagex.end=e.originalEvent.touches[0].screenX,this.data.pagey.end=e.originalEvent.touches[0].screenY):(this.data.pagex.end=e.targetTouches[0].screenX,this.data.pagey.end=e.targetTouches[0].screenY):(this.data.pagex.end=e.pageX,this.data.pagey.end=e.pageY),r.x=this.data.pagex.start-this.data.pagex.end,r.y=this.data.pagey.start-this.data.pagey.end,this.data.pos.end={x:this._el.drag.offsetLeft,y:this._el.drag.offsetTop},this.data.new_pos.x=-(r.x-this.data.pos.start.x),this.data.new_pos.y=-(r.y-this.data.pos.start.y),this.options.enable.x&&Math.abs(r.x)>Math.abs(r.y)&&(e.preventDefault(),this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&Math.abs(r.y)>Math.abs(r.y)&&(e.preventDefault(),this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var e={x:0,y:0,time:0},r={x:0,y:0,time:0},i={x:!1,y:!1},s=!1;this.data.direction=null,e.time=(new Date().getTime()-this.data.time.start)*10,r.time=(new Date().getTime()-this.data.time.start)*10,r.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),r.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),e.x=Math.round(r.x/r.time),e.y=Math.round(r.y/r.time),this.data.new_pos.x=Math.min(this.data.new_pos.x+e.x),this.data.new_pos.y=Math.min(this.data.new_pos.y+e.y),this.options.enable.x?this.options.constraint.left&&this.data.new_pos.x>this.options.constraint.left&&(this.data.new_pos.x=this.options.constraint.left):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,r.time<2e3&&(s=!0),this.options.enable.x&&this.options.enable.y?Math.abs(r.x)>Math.abs(r.y)?i.x=!0:i.y=!0:this.options.enable.x?Math.abs(r.x)>Math.abs(r.y)&&(i.x=!0):Math.abs(r.y)>Math.abs(r.x)&&(i.y=!0),i.x&&(Math.abs(r.x)>this._el.drag.offsetWidth/2&&(s=!0),Math.abs(r.x)>1e4&&(this.data.direction="left",r.x>0&&(this.data.direction="right"))),i.y&&(Math.abs(r.y)>this._el.drag.offsetHeight/2&&(s=!0),Math.abs(r.y)>1e4&&(this.data.direction="up",r.y>0&&(this.data.direction="down"))),r.time<1e3||this._animateMomentum(),s&&this.data.direction?this.fire("swipe_"+this.data.direction,this.data):this.data.direction?this.fire("swipe_nodirection",this.data):this.options.snap&&(this.animator.stop(),this.animator=Ei(this._el.move,{top:this.data.pos.start.y,left:this.data.pos.start.x,duration:this.options.duration,easing:Mu}))}_animateMomentum(){var e={x:this.data.new_pos.x,y:this.data.new_pos.y},r={duration:this.options.duration,easing:Mu};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(e.y>this.options.constraint.bottom?e.y=this.options.constraint.bottom:e.y<this.options.constraint.top&&(e.y=this.options.constraint.top)),r.top=Math.floor(e.y)+"px"),this.options.enable.x&&(this.options.constraint.left&&e.x>=this.options.constraint.left&&(e.x=this.options.constraint.left),this.options.constraint.right&&e.x<this.options.constraint.right&&(e.x=this.options.constraint.right),r.left=Math.floor(e.x)+"px"),this.animator=Ei(this._el.move,r),this.fire("momentum",this.data)}}Sn(E_,In);class lA{constructor(e,r,i,s){this.language=s,this._el={parent:{},container:{},slider:{},slider_background:{},line:{},marker_container_mask:{},marker_container:{},marker_item_container:{},timeaxis:{},timeaxis_background:{}},this.collapsed=!1,typeof e=="object"?this._el.container=e:this._el.container=uc(e),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","application"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline_navigation")),this._el.container.setAttribute("aria-description",'Navigate between markers with arrow keys. Press "Home" for the first and "End" for the last markers'),this.config=r,this.options={width:600,height:600,duration:1e3,ease:qo,has_groups:!1,optimal_tick_width:50,scale_factor:2,marker_padding:5,timenav_height_min:150,marker_height_min:30,marker_width_min:100,zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89]},this.animator=null,this.ready=!1,this._markers=[],this._eras=[],this.has_eras=!1,this._groups=[],this._calculated_row_height=100,this.current_id="",this.current_focused_id="",this.timescale={},this.timeaxis={},this.max_rows=6,this.animate_css=!1,this._swipable,Ze(this.options,i)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this._onLoaded()}positionMarkers(e){for(var r=0;r<this._markers.length;r++){var i=this.timescale.getPositionInfo(r);e?this._markers[r].setClass("tl-timemarker tl-timemarker-fast"):this._markers[r].setClass("tl-timemarker"),this._markers[r].setPosition({left:i.start}),this._markers[r].setWidth(i.width)}}updateDisplay(e,r,i){let s=!1;e&&(this.options.width==0&&e>0&&(s=!0),this.options.width=e),r&&r!=this.options.height&&(this.options.height=r,this.timescale=this._getTimeScale()),this._assignRowsToMarkers(),this._el.slider_background.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._el.slider_background.style.left=-(this.options.width/2)+"px",this._el.slider.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._swipable.updateConstraint({top:!1,bottom:!1,left:this.options.width/2,right:-(this.timescale.getPixelWidth()-this.options.width/2)}),s&&this._drawTimeline(),this.goToId(this.current_id,!0)}_getTimeScale(){var e=0;try{e=parseInt(this.options.marker_height_min)}catch{Ue("Invalid value for marker_height_min option."),e=30}return e==0&&(Ue("marker_height_min option must not be zero."),e=30),this.max_rows=Math.round((this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding)/e),this.max_rows<1&&(this.max_rows=1),new vE(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows})}_updateTimeScale(e){this.options.scale_factor=e,this._updateDrawTimeline()}zoomIn(){var e=b5(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(e)}zoomOut(){var e=x5(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(e)}setZoom(e){var r=this.options.zoom_sequence[e];typeof r=="number"?this.setZoomFactor(r):console.warn("Invalid zoom level. Please use an index number between 0 and "+(this.options.zoom_sequence.length-1))}setZoomFactor(e){e<=this.options.zoom_sequence[0]?this.fire("zoomtoggle",{zoom:"out",show:!1}):this.fire("zoomtoggle",{zoom:"out",show:!0}),e>=this.options.zoom_sequence[this.options.zoom_sequence.length-1]?this.fire("zoomtoggle",{zoom:"in",show:!1}):this.fire("zoomtoggle",{zoom:"in",show:!0}),e==0&&(console.warn("Zoom factor must be greater than zero. Using 0.1"),e=.1),this.options.scale_factor=e,this.goToId(this.current_id,!this._updateDrawTimeline(!0),!0)}_createGroups(){this._groups=[];var e=this.timescale.getGroupLabels();if(e){this.options.has_groups=!0;for(var r=0;r<e.length;r++)this._createGroup(e[r])}}_createGroup(e){var r=new nA(e);this._addGroup(r),this._groups.push(r)}_addGroup(e){e.addTo(this._el.container)}_positionGroups(){if(this.options.has_groups){var e=this.options.height-this._el.timeaxis_background.offsetHeight,r=Math.floor(e/this.timescale.getNumberOfRows()-this.options.marker_padding);this.timescale.getGroupLabels();for(var i=0,s=0;i<this._groups.length;i++){var a=Math.floor(s*(r+this.options.marker_padding)),o=!1;a>e-this.options.marker_padding&&(o=!0),this._groups[i].setRowPosition(a,this._calculated_row_height+this.options.marker_padding/2),this._groups[i].setAlternateRowColor(E5(i),o),s+=this._groups[i].data.rows}}}_addMarker(e){e.addTo(this._el.marker_item_container),e.on("markerclick",this._onMarkerClick,this),e.on("added",this._onMarkerAdded,this)}_createMarker(e,r){var i=new oA(e,this.options);this._addMarker(i),r<0?this._markers.push(i):this._markers.splice(r,0,i)}_createMarkers(e){for(var r=0;r<e.length;r++)this._createMarker(e[r],-1)}_removeMarker(e){e.removeFrom(this._el.marker_item_container)}_destroyMarker(e){this._removeMarker(this._markers[e]),this._markers.splice(e,1)}_calculateMarkerHeight(e){return e/this.timescale.getNumberOfRows()-this.options.marker_padding}_calculateRowHeight(e){return e/this.timescale.getNumberOfRows()}_calculateAvailableHeight(){return this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding}_calculateMinimumTimeNavHeight(){return this.timescale.getNumberOfRows()*this.options.marker_height_min+this._el.timeaxis_background.offsetHeight+this.options.marker_padding}getMinimumHeight(){return this._calculateMinimumTimeNavHeight()}_assignRowsToMarkers(){var e=this._calculateAvailableHeight(),r=this._calculateMarkerHeight(e);this._positionGroups(),this._calculated_row_height=this._calculateRowHeight(e);for(var i=0;i<this._markers.length;i++){this._markers[i].setHeight(r);var s=this.timescale.getPositionInfo(i).row,a=Math.floor(s*(r+this.options.marker_padding))+this.options.marker_padding,o=e-a+this.options.marker_padding;this._markers[i].setRowPosition(a,o)}}_resetMarkersActive(){for(var e=0;e<this._markers.length;e++)this._markers[e].setActive(!1)}_resetMarkersBlurListeners(){for(var e=0;e<this._markers.length;e++)this._markers[e].off("markerblur",this._onMarkerBlur,this)}_findMarkerIndex(e){var r=-1;return(typeof e=="string"||e instanceof String)&&(r=qC(e,this._markers,"unique_id",r)),r}_createEras(e){for(var r=0;r<e.length;r++){var i=e[r],s=new rA(i.start_date,i.end_date,i.headline,this.options);this._eras.push(s),s.addTo(this._el.marker_item_container),s.on("added",this._onEraAdded,this)}}_positionEras(e){for(var r=0,i=0;i<this._eras.length;i++){var s={start:0,end:0,width:0};s.start=this.timescale.getPosition(this._eras[i].start_date.getTime()),s.end=this.timescale.getPosition(this._eras[i].end_date.getTime()),s.width=s.end-s.start,e?this._eras[i].setClass("tl-timeera tl-timeera-fast"):this._eras[i].setClass("tl-timeera"),this._eras[i].setPosition({left:s.start}),this._eras[i].setWidth(s.width),r++,r>5&&(r=0),this._eras[i].setColor(r)}}createMarker(e,r){this._createMarker(e,r)}createMarkers(e){this._createMarkers(e)}destroyMarker(e){this._destroyMarker(e)}destroyMarkerId(e){this.destroyMarker(this._findMarkerIndex(e))}goTo(e,r,i){var s=this.options.ease,a=this.options.duration,o=e<0?0:e;this._resetMarkersActive(),e>=0&&e<this._markers.length&&this._markers[e].setActive(!0),this.animateMovement(o,r,i,a,s),e>=0&&e<this._markers.length?this.current_id=this.current_focused_id=this._markers[e].data.unique_id:this.current_id=this.current_focused_id="",this._setLabelWithCurrentMarker()}goToId(e,r,i){this.goTo(this._findMarkerIndex(e),r,i)}focusOn(e,r,i){const s=this.options.ease,a=this.options.duration,o=e<0?0:e;this.animateMovement(o,r,i,a,s),this._resetMarkersBlurListeners(),e>=0&&e<this._markers.length&&(this._markers[e].setFocus(),this.current_focused_id=this._markers[e].data.unique_id,this._markers[e].on("markerblur",this._onMarkerBlur,this))}focusNext(){const e=this._findMarkerIndex(this.current_focused_id);e+1<this._markers.length?this.focusOn(e+1):this.focusOn(e)}focusPrevious(){const e=this._findMarkerIndex(this.current_focused_id);e-1>=0?this.focusOn(e-1):this.focusOn(e)}animateMovement(e,r,i,s,a){this.animator&&this.animator.stop(),r?(this._el.slider.className="tl-timenav-slider",this._el.slider.style.left=-this._markers[e].getLeft()+this.options.width/2+"px"):i?(this._el.slider.className="tl-timenav-slider tl-timenav-slider-animate",this.animate_css=!0,this._el.slider.style.left=-this._markers[e].getLeft()+this.options.width/2+"px"):(this._el.slider.className="tl-timenav-slider",this.animator=Ei(this._el.slider,{left:-this._markers[e].getLeft()+this.options.width/2+"px",duration:s,easing:a})),e>=0&&e<this._markers.length?this.current_id=this._markers[e].data.unique_id:this.current_id="",this._dispatchVisibleTicksChange()}goToId(e,r,i){this.goTo(this._findMarkerIndex(e),r,i)}_dispatchVisibleTicksChange(){this.ticks_change_timeout&&(clearTimeout(this.ticks_change_timeout),this.ticks_change_timeout=null),this.ticks_change_timeout=setTimeout(()=>{const e=this.timeaxis.getVisibleTicks();this.fire("visible_ticks_change",{visible_ticks:e})},this.options.duration)}_onLoaded(){this.ready=!0,this.fire("loaded",this.config)}_onMarkerAdded(e){this.fire("dateAdded",this.config)}_onEraAdded(e){this.fire("eraAdded",this.config)}_onMarkerRemoved(e){this.fire("dateRemoved",this.config)}_onMarkerClick(e){this.goToId(e.unique_id),this.fire("change",{unique_id:e.unique_id})}_onMarkerBlur(e){this.current_focused_id!==this.current_id&&this.focusOn(this._findMarkerIndex(this.current_id))}_onMouseScroll(e){var r=0,i=0,s={right:-(this.timescale.getPixelWidth()-this.options.width/2),left:this.options.width/2};e||(e=window.event),e.originalEvent&&(e=e.originalEvent),typeof e.wheelDeltaX<"u"&&(r=e.wheelDeltaY/6,Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)?r=e.wheelDeltaX/6:r=0),r&&(e.preventDefault&&e.preventDefault(),e.returnValue=!1),i=parseInt(this._el.slider.style.left.replace("px",""))+r,i>s.left?i=s.left:i<s.right&&(i=s.right),this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1),this._el.slider.style.left=i+"px"}_onDragMove(e){this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1)}_onKeydown(e){switch(Pe.stopPropagation(e),e.key){case"ArrowUp":case"ArrowRight":{this.focusNext();break}case"ArrowDown":case"ArrowLeft":{this.focusPrevious();break}case"Home":{this.focusOn(0);break}case"End":{this.focusOn(this._markers.length-1);break}}}_drawTimeline(e){this.timescale=this._getTimeScale(),this.timeaxis.drawTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(e),this._assignRowsToMarkers(),this._createGroups(),this._positionGroups(),this.has_eras&&this._positionEras(e)}_updateDrawTimeline(e){var r=!1;if(e){var i=new vE(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows});this.timescale.getMajorScale()==i.getMajorScale()&&this.timescale.getMinorScale()==i.getMinorScale()&&(r=!0)}else r=!0;return r?(this.timescale=this._getTimeScale(),this.timeaxis.positionTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(),this._assignRowsToMarkers(),this._positionGroups(),this.has_eras&&this._positionEras(),this.updateDisplay()):this._drawTimeline(!0),r}_setLabelWithCurrentMarker(){const e=this._markers[this._findMarkerIndex(this.current_focused_id)],r=e&&e.ariaLabel?`, ${e.ariaLabel}, shown`:"";this._el.container.setAttribute("aria-label",`Timeline navigation ${r}`)}_initLayout(){this._el.line=he("div","tl-timenav-line",this._el.container),this._el.slider=he("div","tl-timenav-slider",this._el.container),this._el.slider_background=he("div","tl-timenav-slider-background",this._el.slider),this._el.marker_container_mask=he("div","tl-timenav-container-mask",this._el.slider),this._el.marker_container=he("div","tl-timenav-container",this._el.marker_container_mask),this._el.marker_item_container=he("div","tl-timenav-item-container",this._el.marker_container),this._el.timeaxis=he("div","tl-timeaxis",this._el.slider),this._el.timeaxis_background=he("div","tl-timeaxis-background",this._el.container),this.timeaxis=new iA(this._el.timeaxis,this.options,this.language),this._swipable=new E_(this._el.slider_background,this._el.slider,{enable:{x:!0,y:!1},constraint:{top:!1,bottom:!1,left:this.options.width/2,right:!1},snap:!1}),this._swipable.enable()}_initEvents(){this._swipable.on("dragmove",this._onDragMove,this),Pe.addListener(this._el.container,"mousewheel",this._onMouseScroll,this),Pe.addListener(this._el.container,"DOMMouseScroll",this._onMouseScroll,this),Pe.addListener(this._el.container,"keydown",this._onKeydown,this)}_initData(){this._createMarkers(this.config.events),this.config.eras&&this.config.eras.length>0&&(this.has_eras=!0,this._createEras(this.config.eras)),this._drawTimeline()}}Sn(lA,In,Ii,Ci);var xm=function(){function t(e,r){for(var i=0;i<r.length;i++){var s=r[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();function Em(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(function(){if(typeof window>"u"||typeof Element>"u")return;var t=Array.prototype.slice,e=Element.prototype.matches||Element.prototype.msMatchesSelector,r=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","details","summary","iframe","object","embed","video","[contenteditable]"].join(","),i=function(){function c(h,f){Em(this,c),this._inertManager=f,this._rootElement=h,this._managedNodes=new Set,this._rootElement.hasAttribute("aria-hidden")?this._savedAriaHidden=this._rootElement.getAttribute("aria-hidden"):this._savedAriaHidden=null,this._rootElement.setAttribute("aria-hidden","true"),this._makeSubtreeUnfocusable(this._rootElement),this._observer=new MutationObserver(this._onMutation.bind(this)),this._observer.observe(this._rootElement,{attributes:!0,childList:!0,subtree:!0})}return xm(c,[{key:"destructor",value:function(){this._observer.disconnect(),this._rootElement&&(this._savedAriaHidden!==null?this._rootElement.setAttribute("aria-hidden",this._savedAriaHidden):this._rootElement.removeAttribute("aria-hidden")),this._managedNodes.forEach(function(f){this._unmanageNode(f.node)},this),this._observer=null,this._rootElement=null,this._managedNodes=null,this._inertManager=null}},{key:"_makeSubtreeUnfocusable",value:function(f){var p=this;o(f,function(R){return p._visitNode(R)});var g=document.activeElement;if(!document.body.contains(f)){for(var _=f,A=void 0;_;){if(_.nodeType===Node.DOCUMENT_FRAGMENT_NODE){A=_;break}_=_.parentNode}A&&(g=A.activeElement)}f.contains(g)&&(g.blur(),g===document.activeElement&&document.body.focus())}},{key:"_visitNode",value:function(f){if(f.nodeType===Node.ELEMENT_NODE){var p=f;p!==this._rootElement&&p.hasAttribute("inert")&&this._adoptInertRoot(p),(e.call(p,r)||p.hasAttribute("tabindex"))&&this._manageNode(p)}}},{key:"_manageNode",value:function(f){var p=this._inertManager.register(f,this);this._managedNodes.add(p)}},{key:"_unmanageNode",value:function(f){var p=this._inertManager.deregister(f,this);p&&this._managedNodes.delete(p)}},{key:"_unmanageSubtree",value:function(f){var p=this;o(f,function(g){return p._unmanageNode(g)})}},{key:"_adoptInertRoot",value:function(f){var p=this._inertManager.getInertRoot(f);p||(this._inertManager.setInert(f,!0),p=this._inertManager.getInertRoot(f)),p.managedNodes.forEach(function(g){this._manageNode(g.node)},this)}},{key:"_onMutation",value:function(f,p){f.forEach(function(g){var _=g.target;if(g.type==="childList")t.call(g.addedNodes).forEach(function(R){this._makeSubtreeUnfocusable(R)},this),t.call(g.removedNodes).forEach(function(R){this._unmanageSubtree(R)},this);else if(g.type==="attributes"){if(g.attributeName==="tabindex")this._manageNode(_);else if(_!==this._rootElement&&g.attributeName==="inert"&&_.hasAttribute("inert")){this._adoptInertRoot(_);var A=this._inertManager.getInertRoot(_);this._managedNodes.forEach(function(R){_.contains(R.node)&&A._manageNode(R.node)})}}},this)}},{key:"managedNodes",get:function(){return new Set(this._managedNodes)}},{key:"hasSavedAriaHidden",get:function(){return this._savedAriaHidden!==null}},{key:"savedAriaHidden",set:function(f){this._savedAriaHidden=f},get:function(){return this._savedAriaHidden}}]),c}(),s=function(){function c(h,f){Em(this,c),this._node=h,this._overrodeFocusMethod=!1,this._inertRoots=new Set([f]),this._savedTabIndex=null,this._destroyed=!1,this.ensureUntabbable()}return xm(c,[{key:"destructor",value:function(){if(this._throwIfDestroyed(),this._node&&this._node.nodeType===Node.ELEMENT_NODE){var f=this._node;this._savedTabIndex!==null?f.setAttribute("tabindex",this._savedTabIndex):f.removeAttribute("tabindex"),this._overrodeFocusMethod&&delete f.focus}this._node=null,this._inertRoots=null,this._destroyed=!0}},{key:"_throwIfDestroyed",value:function(){if(this.destroyed)throw new Error("Trying to access destroyed InertNode")}},{key:"ensureUntabbable",value:function(){if(this.node.nodeType===Node.ELEMENT_NODE){var f=this.node;if(e.call(f,r)){if(f.tabIndex===-1&&this.hasSavedTabIndex)return;f.hasAttribute("tabindex")&&(this._savedTabIndex=f.tabIndex),f.setAttribute("tabindex","-1"),f.nodeType===Node.ELEMENT_NODE&&(f.focus=function(){},this._overrodeFocusMethod=!0)}else f.hasAttribute("tabindex")&&(this._savedTabIndex=f.tabIndex,f.removeAttribute("tabindex"))}}},{key:"addInertRoot",value:function(f){this._throwIfDestroyed(),this._inertRoots.add(f)}},{key:"removeInertRoot",value:function(f){this._throwIfDestroyed(),this._inertRoots.delete(f),this._inertRoots.size===0&&this.destructor()}},{key:"destroyed",get:function(){return this._destroyed}},{key:"hasSavedTabIndex",get:function(){return this._savedTabIndex!==null}},{key:"node",get:function(){return this._throwIfDestroyed(),this._node}},{key:"savedTabIndex",set:function(f){this._throwIfDestroyed(),this._savedTabIndex=f},get:function(){return this._throwIfDestroyed(),this._savedTabIndex}}]),c}(),a=function(){function c(h){if(Em(this,c),!h)throw new Error("Missing required argument; InertManager needs to wrap a document.");this._document=h,this._managedNodes=new Map,this._inertRoots=new Map,this._observer=new MutationObserver(this._watchForInert.bind(this)),l(h.head||h.body||h.documentElement),h.readyState==="loading"?h.addEventListener("DOMContentLoaded",this._onDocumentLoaded.bind(this)):this._onDocumentLoaded()}return xm(c,[{key:"setInert",value:function(f,p){if(p){if(this._inertRoots.has(f))return;var g=new i(f,this);if(f.setAttribute("inert",""),this._inertRoots.set(f,g),!this._document.body.contains(f))for(var _=f.parentNode;_;)_.nodeType===11&&l(_),_=_.parentNode}else{if(!this._inertRoots.has(f))return;var A=this._inertRoots.get(f);A.destructor(),this._inertRoots.delete(f),f.removeAttribute("inert")}}},{key:"getInertRoot",value:function(f){return this._inertRoots.get(f)}},{key:"register",value:function(f,p){var g=this._managedNodes.get(f);return g!==void 0?g.addInertRoot(p):g=new s(f,p),this._managedNodes.set(f,g),g}},{key:"deregister",value:function(f,p){var g=this._managedNodes.get(f);return g?(g.removeInertRoot(p),g.destroyed&&this._managedNodes.delete(f),g):null}},{key:"_onDocumentLoaded",value:function(){var f=t.call(this._document.querySelectorAll("[inert]"));f.forEach(function(p){this.setInert(p,!0)},this),this._observer.observe(this._document.body||this._document.documentElement,{attributes:!0,subtree:!0,childList:!0})}},{key:"_watchForInert",value:function(f,p){var g=this;f.forEach(function(_){switch(_.type){case"childList":t.call(_.addedNodes).forEach(function(E){if(E.nodeType===Node.ELEMENT_NODE){var b=t.call(E.querySelectorAll("[inert]"));e.call(E,"[inert]")&&b.unshift(E),b.forEach(function(T){this.setInert(T,!0)},g)}},g);break;case"attributes":if(_.attributeName!=="inert")return;var A=_.target,R=A.hasAttribute("inert");g.setInert(A,R);break}},this)}}]),c}();function o(c,h,f){if(c.nodeType==Node.ELEMENT_NODE){var p=c;h&&h(p);var g=p.shadowRoot;if(g){o(g,h);return}if(p.localName=="content"){for(var _=p,A=_.getDistributedNodes?_.getDistributedNodes():[],R=0;R<A.length;R++)o(A[R],h);return}if(p.localName=="slot"){for(var E=p,b=E.assignedNodes?E.assignedNodes({flatten:!0}):[],T=0;T<b.length;T++)o(b[T],h);return}}for(var D=c.firstChild;D!=null;)o(D,h),D=D.nextSibling}function l(c){if(!c.querySelector("style#inert-style, link#inert-style")){var h=document.createElement("style");h.setAttribute("id","inert-style"),h.textContent=`
[inert] {
  pointer-events: none;
  cursor: default;
}

[inert], [inert] * {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
`,c.appendChild(h)}}if(!HTMLElement.prototype.hasOwnProperty("inert")){var u=new a(document);Object.defineProperty(HTMLElement.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(h){u.setInert(this,h)}})}})();class uA{constructor(e,r,i,s){s&&this.setLanguage(s),this._el={container:{},scroll_container:{},background:{},content_container:{},content:{}},this._media=null,this._mediaclass={},this._text={},this._background_media=null,this._state={loaded:!1},this.has={headline:!1,text:!1,media:!1,title:!1,background:{image:!1,color:!1,color_value:""}},this.has.title=i,this.data={unique_id:null,background:null,start_date:null,end_date:null,location:null,text:null,media:null,autolink:!0},this.options={duration:1e3,slide_padding_lr:40,ease:$f,width:600,height:600,skinny_size:650,media_name:""},this.active=!1,this.animator={},Ze(this.options,r),Ze(this.data,e),this._initLayout(),this._initEvents()}show(){this.animator=Ei(this._el.slider_container,{left:-(this._el.container.offsetWidth*n)+"px",duration:this.options.duration,easing:this.options.ease})}hide(){}setActive(e){this.active=e,this.active?(this.data.background&&this.fire("background_change",this.has.background),this._setInteractive(!0),this.loadMedia()):(this.stopMedia(),this._setInteractive(!1))}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r,i){var s,a=this.options.slide_padding_lr,o=this.options.slide_padding_lr;e?this.options.width=e:this.options.width=this._el.container.offsetWidth,s=this.options.width-this.options.slide_padding_lr*2,ya&&this.options.width<=this.options.skinny_size?(a=0,o=0,s=this.options.width):i=="landscape"||this.options.width<=this.options.skinny_size&&(a=50,o=50,s=this.options.width-a-o),this._el.content.style.paddingLeft=a+"px",this._el.content.style.paddingRight=o+"px",this._el.content.style.width=s+"px",r?this.options.height=r:this.options.height=this._el.container.offsetHeight,this._media&&(!this.has.text&&this.has.headline?this._media.updateDisplay(s,this.options.height-this._text.headlineHeight(),i):!this.has.text&&!this.has.headline?this._media.updateDisplay(s,this.options.height,i):this.options.width<=this.options.skinny_size?this._media.updateDisplay(s,this.options.height,i):this._media.updateDisplay(s/2,this.options.height,i)),this._updateBackgroundDisplay()}loadMedia(){var e=this;this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0),this._background_media&&!this._background_media._state.loaded&&(this._background_media.on("loaded",function(){e._updateBackgroundDisplay()}),this._background_media.loadMedia())}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getBackground(){return this.has.background}scrollToTop(){this._el.container.scrollTop=0}getFormattedDate(){if(qn(this.data.display_date).length>0)return this.data.display_date;var e="";return this.has.title||(this.data.end_date&&(e=" &mdash; "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(e=this.data.start_date.getDisplayDate(this.getLanguage())+e)),e}_initLayout(){if(this._el.container=he("div","tl-slide"),this.has.title&&(this._el.container.className="tl-slide tl-slide-titleslide"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._el.scroll_container=he("div","tl-slide-scrollable-container",this._el.container),this._el.content_container=he("div","tl-slide-content-container",this._el.scroll_container),this._el.content=he("div","tl-slide-content",this._el.content_container),this._el.background=he("div","tl-slide-background",this._el.container),this.data.background){if(this.data.background.url){var e=$h(this.data.background,!0);e&&(this._background_media=new e.cls(this.data.background,{background:1}),this.has.background.image=!0,this._el.container.className+=" tl-full-image-background",this.has.background.color_value="#000",this._el.background.style.display="block"),this.data.background.alt&&(this._el.background.setAttribute("role","img"),this._el.background.setAttribute("aria-label",this.data.background.alt))}this.data.background.color&&(this.has.background.color=!0,this._el.container.className+=" tl-full-color-background",this.has.background.color_value=this.data.background.color),this.data.background.text_background&&(this._el.container.className+=" tl-text-background")}this.data.media&&this.data.media.url&&this.data.media.url!=""&&(this.has.media=!0),this.data.text&&this.data.text.text&&(this.has.text=!0),this.data.text&&this.data.text.headline&&(this.has.headline=!0),this.has.media&&(this.data.media.mediatype=$h(this.data.media),this.options.media_name=this.data.media.mediatype.name,this.options.media_type=this.data.media.mediatype.type,this.options.autolink=this.data.autolink,this._media=new this.data.media.mediatype.cls(this.data.media,this.options,this.getLanguage())),(this.has.text||this.has.headline)&&(this._text=new sA(this.data.text,{title:this.has.title,language:this.getLanguage(),autolink:this.data.autolink}),this._text.addDateText(this.getFormattedDate())),!this.has.text&&!this.has.headline&&this.has.media?(this._el.container.classList.add("tl-slide-media-only"),this._media.addTo(this._el.content)):this.has.headline&&this.has.media&&!this.has.text?(this._el.container.classList.add("tl-slide-media-only"),this._text.addTo(this._el.content),this._media.addTo(this._el.content)):this.has.text&&this.has.media?(this._text.addTo(this._el.content),this._media.addTo(this._el.content)):(this.has.text||this.has.headline)&&(this._el.container.classList.add("tl-slide-text-only"),this._text.addTo(this._el.content)),this.onLoaded()}_initEvents(){}_updateBackgroundDisplay(){this._background_media&&this._background_media._state.loaded&&(this._el.background.style.backgroundImage="url('"+this._background_media.getImageURL(this.options.width,this.options.height)+"')")}_setInteractive(e){e?this._el.container.removeAttribute("inert"):this._el.container.setAttribute("inert",!0)}}Sn(uA,Ci,In,Ii);class mv{constructor(e,r,i){this._el={container:{},content_container:{},icon:{},title:{},description:{}},this.mediatype={},this.data={title:"Navigation",description:"Description",date:"Date"},this.options={direction:"previous"},this.animator=null,Ze(this.options,r),Ze(this.data,e),this._el.container=Bl("tl-slidenav-"+this.options.direction),ya&&this._el.container.setAttribute("ontouchstart"," "),this._initLayout(),this._initEvents(),i&&i.appendChild(this._el.container)}update(e){var r={title:"",description:"",date:e.getFormattedDate()};e.data.text&&e.data.text.headline&&(r.title=e.data.text.headline),this._update(r)}setColor(e){e?this._el.content_container.className="tl-slidenav-content-container tl-slidenav-inverted":this._el.content_container.className="tl-slidenav-content-container"}_onMouseClick(){this.fire("clicked",this.options)}_update(e){this.data=Ze(this.data,e);const r=oo(this.data.title);this._el.title.innerHTML=r;const i=oo(this.data.date);this._el.description.innerHTML=i,this._el.container.setAttribute("aria-label",`${this.options.direction}, ${r}, ${i}`)}_initLayout(){this._el.content_container=he("div","tl-slidenav-content-container",this._el.container),this._el.icon=he("div","tl-slidenav-icon",this._el.content_container),this._el.title=he("div","tl-slidenav-title",this._el.content_container),this._el.description=he("div","tl-slidenav-description",this._el.content_container),this._el.icon.innerHTML="&nbsp;",this._update()}_initEvents(){Pe.addListener(this._el.container,"click",this._onMouseClick,this)}}Sn(mv,Ii,In);class cA{constructor(e,r,i,s){s&&this.setLanguage(s),this._el={container:{},background:{},slider_container_mask:{},slider_container:{},slider_item_container:{}},this._nav={},this._nav.previous={},this._nav.next={},this.slide_spacing=0,this._slides=[],this._swipable,this.preloadTimer,this._message,this.current_id="",this.data={},this.options={id:"",layout:"portrait",width:600,height:600,default_bg_color:{r:255,g:255,b:255},slide_padding_lr:40,start_at_slide:1,slide_default_fade:"0%",duration:1e3,ease:qo,dragging:!0,trackResize:!0},typeof e=="object"?(this._el.container=e,this.options.id=la(6,"tl")):(this.options.id=e,this._el.container=uc(e)),this._el.container.id||(this._el.container.id=this.options.id),this.animator=null,Ze(this.options,i),Ze(this.data,r)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this.goTo(this.options.start_at_slide),this._onLoaded()}_addSlide(e){e.addTo(this._el.slider_item_container),e.on("added",this._onSlideAdded,this),e.on("background_change",this._onBackgroundChange,this)}_createSlide(e,r,i){var s=new uA(e,this.options,r,this.getLanguage());this._addSlide(s),i<0?this._slides.push(s):this._slides.splice(i,0,s)}_createSlides(e){for(var r=0;r<e.length;r++)e[r].unique_id==""&&(e[r].unique_id=la(6,"tl-slide")),this._createSlide(e[r],!1,-1)}_removeSlide(e){e.removeFrom(this._el.slider_item_container),e.off("added",this._onSlideRemoved,this),e.off("background_change",this._onBackgroundChange)}_destroySlide(e){this._removeSlide(this._slides[e]),this._slides.splice(e,1)}_findSlideIndex(e){var r=e;return(typeof e=="string"||e instanceof String)&&(r=qC(e,this._slides,"unique_id")),r}updateDisplay(e,r,i,s){var a,o;typeof s>"u"?o=this.options.layout:o=s,this.options.layout=o,e?this.options.width=e:this.options.width=this._el.container.offsetWidth,r?this.options.height=r:this.options.height=this._el.container.offsetHeight,this.slide_spacing=this.options.width*2,a=this.options.height/2,this._nav.next.setPosition({top:a}),this._nav.previous.setPosition({top:a});for(var l=0;l<this._slides.length;l++)this._slides[l].updateDisplay(this.options.width,this.options.height,o),this._slides[l].setPosition({left:this.slide_spacing*l,top:0});this.goToId(this.current_id,!0,!0)}createSlide(e,r){this._createSlide(e,!1,r)}createSlides(e){this._createSlides(e)}destroySlide(e){this._destroySlide(e)}destroySlideId(e){this.destroySlide(this._findSlideIndex(e))}goTo(e,r,i){e=parseInt(e),isNaN(e)&&(e=0);var s=this;this.changeBackground({color_value:"",image:!1}),this.preloadTimer&&clearTimeout(this.preloadTimer);for(var a=0;a<this._slides.length;a++)this._slides[a].setActive(!1);e<this._slides.length&&e>=0&&(this.current_id=this._slides[e].data.unique_id,this.animator&&this.animator.stop(),this._swipable&&this._swipable.stopMomentum(),r?(this._el.slider_container.style.left=-(this.slide_spacing*e)+"px",this._onSlideChange(i)):this.animator=Ei(this._el.slider_container,{left:-(this.slide_spacing*e)+"px",duration:this.options.duration,easing:this.options.ease,complete:this._onSlideChange(i)}),this._slides[e].setActive(!0),this._slides[e+1]?(this.showNav(this._nav.next,!0),this._nav.next.update(this._slides[e+1])):this.showNav(this._nav.next,!1),this._slides[e-1]?(this.showNav(this._nav.previous,!0),this._nav.previous.update(this._slides[e-1])):this.showNav(this._nav.previous,!1),this.preloadTimer=setTimeout(function(){s.preloadSlides(e)},this.options.duration))}goToId(e,r,i){this.goTo(this._findSlideIndex(e),r,i)}preloadSlides(e){this._slides[e+1]&&(this._slides[e+1].loadMedia(),this._slides[e+1].scrollToTop()),this._slides[e+2]&&(this._slides[e+2].loadMedia(),this._slides[e+2].scrollToTop()),this._slides[e-1]&&(this._slides[e-1].loadMedia(),this._slides[e-1].scrollToTop()),this._slides[e-2]&&(this._slides[e-2].loadMedia(),this._slides[e-2].scrollToTop())}next(){var e=this._findSlideIndex(this.current_id);e+1<this._slides.length?this.goTo(e+1):this.goTo(e)}previous(){var e=this._findSlideIndex(this.current_id);e-1>=0?this.goTo(e-1):this.goTo(e)}showNav(e,r){this.options.width<=500&&ya?e.hide():r?e.show():e.hide()}changeBackground(e){var r={r:256,g:256,b:256};e.color_value&&e.color_value!=""?(r=HC(e.color_value),r||(Ue("Invalid color value "+e.color_value),r=this.options.default_bg_color)):(r=this.options.default_bg_color,e.color_value="rgb("+r.r+" , "+r.g+", "+r.b+")"),r.r+""+r.g+r.b,this._el.background.style.backgroundImage="none",e.color_value?this._el.background.style.backgroundColor=e.color_value:this._el.background.style.backgroundColor="transparent",r.r<255||r.g<255||r.b<255||e.image?(this._nav.next.setColor(!0),this._nav.previous.setColor(!0)):(this._nav.next.setColor(!1),this._nav.previous.setColor(!1))}_updateDrawSlides(){for(var e=this.options.layout,r=0;r<this._slides.length;r++)this._slides[r].updateDisplay(this.options.width,this.options.height,e),this._slides[r].setPosition({left:this.slide_spacing*r,top:0});this.goToId(this.current_id,!0,!1)}_initLayout(){this._el.container.classList.add("tl-storyslider"),this._nav.previous=new mv({title:"Previous",description:"description"},{direction:"previous"},this._el.container),this._nav.next=new mv({title:"Next",description:"description"},{direction:"next"},this._el.container),this._el.slider_container_mask=he("div","tl-slider-container-mask",this._el.container),this._el.background=he("div","tl-slider-background tl-animate",this._el.container),this._el.slider_container=he("div","tl-slider-container tlanimate",this._el.slider_container_mask),this._el.slider_item_container=he("div","tl-slider-item-container",this._el.slider_container),this._el.slider_container.setAttribute("aria-live","polite"),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this._el.slider_container.style.left="0px",qr&&(this._swipable=new E_(this._el.slider_container_mask,this._el.slider_container,{enable:{x:!0,y:!1},snap:!0}),this._swipable.enable(),this._message=new qf(this._el.container,{message_class:"tl-message-full",message_icon_class:"tl-icon-swipe-left"},this.getLanguage()),this._message.updateMessage(this._("swipe_to_navigate")),this._message.addTo(this._el.container))}_initEvents(){this._nav.next.on("clicked",this._onNavigation,this),this._nav.previous.on("clicked",this._onNavigation,this),this._message&&this._message.on("clicked",this._onMessageClick,this),this._swipable&&(this._swipable.on("swipe_left",this._onNavigation,this),this._swipable.on("swipe_right",this._onNavigation,this),this._swipable.on("swipe_nodirection",this._onSwipeNoDirection,this))}_initData(){this.data.title&&this._createSlide(this.data.title,!0,-1),this._createSlides(this.data.events)}_onBackgroundChange(e){var r=this._findSlideIndex(this.current_id),i=this._slides[r].getBackground();this.changeBackground(e),this.fire("colorchange",i)}_onMessageClick(e){this._message.hide()}_onSwipeNoDirection(e){this.goToId(this.current_id)}_onNavigation(e){e.direction=="next"||e.direction=="left"?this.next():(e.direction=="previous"||e.direction=="right")&&this.previous(),this.fire("nav_"+e.direction,this.data)}_onSlideAdded(e){Ue("slideadded"),this.fire("slideAdded",this.data)}_onSlideRemoved(e){this.fire("slideRemoved",this.data)}_onSlideChange(e){e||this.fire("change",{unique_id:this.current_id})}_onMouseClick(e){}_fireMouseEvent(e){if(this._loaded){var r=e.type;r=r==="mouseenter"?"mouseover":r==="mouseleave"?"mouseout":r,this.hasEventListeners(r)&&(r==="contextmenu"&&Pe.preventDefault(e),this.fire(r,{latlng:"something",layerPoint:"something else"}))}}_onLoaded(){this.fire("loaded",this.data)}}Sn(cA,Ci,In);class dA{constructor(e,r,i,s){this._el={parent:{},container:{},button_forwardtoend:{},button_backtostart:{},button_zoomin:{},button_zoomout:{},arrow:{},line:{},coverbar:{},grip:{}},this.collapsed=!1,typeof e=="object"?this._el.container=e:this._el.container=uc(e),r&&(this._el.parent=r),this.data={visible_ticks_dates:{}},this.options={width:600,height:600,duration:1e3,ease:qo,menubar_default_y:0},this.animator={},this.setLanguage(s),Ze(this.options,i),this._initLayout(),this._initEvents()}show(e){this.options.duration}hide(e){}toogleZoomIn(e){e?this._el.button_zoomin.removeAttribute("disabled"):this._el.button_zoomin.setAttribute("disabled",!0)}toogleZoomOut(e){e?this._el.button_zoomout.removeAttribute("disabled"):this._el.button_zoomout.setAttribute("disabled",!0)}changeVisibleTicks(e){const r=e.minor;if(!r.length){this.data.visible_ticks_dates={};return}const s=r[0].date.getFullYear(),o=r[r.length-1].date.getFullYear();this.data.visible_ticks_dates={start:s,end:o},this._updateZoomAriaLabels()}setSticky(e){this.options.menubar_default_y=e}setColor(e){e?this._el.container.className="tl-menubar tl-menubar-inverted":this._el.container.className="tl-menubar"}updateDisplay(e,r,i,s){this._updateDisplay(e,r,i,s)}_onButtonZoomIn(e){this.fire("zoom_in",e)}_onButtonZoomOut(e){this.fire("zoom_out",e)}_onButtonForwardToEnd(e){this.fire("forward_to_end",e)}_onButtonBackToStart(e){this.fire("back_to_start",e)}_initLayout(){this._el.button_zoomin=Bl("tl-menubar-button",this._el.container),this._el.button_zoomout=Bl("tl-menubar-button",this._el.container),this._el.button_forwardtoend=Bl("tl-menubar-button",this._el.container),this._el.button_backtostart=Bl("tl-menubar-button",this._el.container),ya&&this._el.container.setAttribute("ontouchstart"," "),this._el.button_backtostart.innerHTML="<span class='tl-icon-goback'></span>",this._el.button_backtostart.setAttribute("aria-label",this._("return_to_title")),this._el.button_forwardtoend.innerHTML="<span class='tl-icon-goend'></span>",this._el.button_forwardtoend.setAttribute("aria-label",this._("go_to_end")),this._el.button_zoomin.innerHTML="<span class='tl-icon-zoom-in'></span>",this._el.button_zoomin.setAttribute("aria-label",this._("zoom_in")),this._el.button_zoomout.innerHTML="<span class='tl-icon-zoom-out'></span>",this._el.button_zoomout.setAttribute("aria-label",this._("zoom_out"))}_initEvents(){Pe.addListener(this._el.button_forwardtoend,"click",this._onButtonForwardToEnd,this),Pe.addListener(this._el.button_backtostart,"click",this._onButtonBackToStart,this),Pe.addListener(this._el.button_zoomin,"click",this._onButtonZoomIn,this),Pe.addListener(this._el.button_zoomout,"click",this._onButtonZoomOut,this)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}_updateZoomAriaLabels(){Object.keys(this.data.visible_ticks_dates).length==0?(this._el.button_zoomin.setAttribute("aria-description",""),this._el.button_zoomout.setAttribute("aria-description","")):(this._el.button_zoomin.setAttribute("aria-description",this._("aria_label_zoomin",this.data.visible_ticks_dates)),this._el.button_zoomout.setAttribute("aria-description",this._("aria_label_zoomout",this.data.visible_ticks_dates)))}}Sn(dA,Ii,In,Ci);let gv=null;if(document){let t=document.getElementsByTagName("script");t&&t.length>0&&(gv=t[t.length-1].src)}function ez(t){return function(e){if(t.config){var r=e.key,i=t._getSlideIndex(self.current_id),s=t.config.events.length-1,a=t.config.title?s+1:s,o=0;r=="ArrowLeft"?i!=o&&t.goToPrev():r=="ArrowRight"&&i!=a&&t.goToNext()}}}class hA{constructor(e,r,i){if(i||(i={}),this.ready=!1,this._el={container:uc(e),storyslider:{},timenav:{},menubar:{}},i.lang&&!i.language&&(i.language=i.lang),this.language=x_,this._storyslider={},this._timenav={},this._menubar={},this._loaded={storyslider:!1,timenav:!1},this.config=null,this.options={script_path:"https://cdn.knightlab.com/libs/timeline3/latest/js/",height:this._el.container.offsetHeight,width:this._el.container.offsetWidth,debug:!1,font:"default",is_embed:!1,is_full_embed:!1,hash_bookmark:!1,default_bg_color:{r:255,g:255,b:255},scale_factor:2,layout:"landscape",timenav_position:"bottom",optimal_tick_width:60,base_class:"tl-timeline",timenav_height:null,timenav_height_percentage:25,timenav_mobile_height_percentage:40,timenav_height_min:175,marker_height_min:30,marker_width_min:100,marker_padding:5,start_at_slide:0,start_at_end:!1,menubar_height:0,skinny_size:650,medium_size:800,use_bc:!1,duration:1e3,ease:qo,dragging:!0,trackResize:!0,map_type:"stamen:toner-lite",slide_padding_lr:100,slide_default_fade:"0%",zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89],language:"en",ga_measurement_id:null,ga_property_id:null,track_events:["back_to_start","nav_next","nav_previous","zoom_in","zoom_out"],theme:null,sheets_proxy:"https://sheets-proxy.knightlab.com/proxy/",soundcite:!1},this.animator_timenav=null,this.animator_storyslider=null,this.animator_menubar=null,this.message=new qf(this._el.container,{message_class:"tl-message-full"}),typeof i.default_bg_color=="string"){var s=HC(i.default_bg_color);s?i.default_bg_color=s:(delete i.default_bg_color,Ue("Invalid default background color. Ignoring."))}Ze(this.options,i),this.options.script_path||(this.options.script_path=this.determineScriptPath()),i.soundcite&&this.on("ready",()=>{Ue("Loading Soundcite resources "),bm("https://cdn.knightlab.com/libs/soundcite/latest/css/player.css"),ua("https://cdn.knightlab.com/libs/soundcite/latest/js/soundcite.min.js")}),this._loadStyles(),document.addEventListener("keydown",ez(this)),window.addEventListener("resize",(function(a){this.updateDisplay()}).bind(this)),this.options.debug&&y5(console.log),this._el.container.classList.add("tl-timeline"),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","region"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline")),this.options.is_embed&&this._el.container.classList.add("tl-timeline-embed"),this.options.is_full_embed&&this._el.container.classList.add("tl-timeline-full-embed"),this._loadLanguage(r)}_loadStyles(){let e=null,r=null;if(this.options.font&&(this.options.font.indexOf("http")==0||this.options.font.match(/\.css$/)))e=this.options.font;else if(this.options.font){let i="../css/fonts/font."+this.options.font.toLowerCase()+".css";e=new URL(i,this.options.script_path).toString()}if(e&&bm(e),this.options.theme&&(this.options.theme.indexOf("http")==0||this.options.theme.match(/\.css$/)))r=this.options.theme;else if(this.options.theme){let i="../css/themes/timeline.theme."+this.options.theme.toLowerCase()+".css";r=new URL(i,this.options.script_path).toString()}r&&bm(r)}_loadLanguage(e){try{var r=this.options.language,i=this.options.script_path;L5(r,i).then(s=>{s?(this.language=s,this.message.setLanguage(this.language),this.showMessage(this._("loading_timeline"))):this.showMessage(`Error loading ${r}`),this._initData(e)})}catch(s){this.showMessage(this._translateError(s))}}_initData(e){typeof e=="string"?y$(e,{callback:(function(r){this.setConfig(r)}).bind(this),sheets_proxy:this.options.sheets_proxy}):qs==e.constructor?this.setConfig(e):this.setConfig(new qs(e))}_translateError(e){return e.hasOwnProperty("stack")&&Ue(e.stack),e.message_key?this._(e.message_key)+(e.detail?" ["+e.detail+"]":""):e}showMessage(e){this.message?this.message.updateMessage(e):(Ue("No message display available."),Ue(e))}determineScriptPath(){let e=null;if(gv)e=gv;else{let r=document.getElementById("timeline-script-tag");r&&(e=r.src)}if(!e){let r=document.getElementsByTagName("script");for(let i=r.length-1;i>=0;i--)if(r[i].src){e=r[i].src;break}}return e?e.substr(0,e.lastIndexOf("/")+1):""}setConfig(e){if(this.config=e,this.config.isValid()&&(this.config.validate(),this._validateOptions()),this.config.isValid())try{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this._onDataLoaded.bind(this)):this._onDataLoaded()}catch(a){this.showMessage("<strong>"+this._("error")+":</strong> "+this._translateError(a))}else{for(var r=[],i=0,s=this.config.getErrors();i<s.length;i++)r.push(this._translateError(s[i]));this.showMessage("<strong>"+this._("error")+":</strong> "+r.join("<br>"))}}_onDataLoaded(){this.fire("dataloaded"),this._initLayout(),this._initEvents(),this._initAnalytics(),this.message&&this.message.hide();let e=(i,s)=>{i.reduce((a,o)=>a||o.isIntersecting,!1)&&this.updateDisplay()};new IntersectionObserver(e.bind(this)).observe(this._el.container),this.ready=!0,this.fire("ready")}_initLayout(){this.message.removeFrom(this._el.container),this._el.container.innerHTML="",this.options.timenav_position=="top"?(this._el.timenav=he("div","tl-timenav",this._el.container),this._el.menubar=he("div","tl-menubar",this._el.container),this._el.storyslider=he("div","tl-storyslider",this._el.container)):(this._el.storyslider=he("div","tl-storyslider",this._el.container),this._el.timenav=he("div","tl-timenav",this._el.container),this._el.menubar=he("div","tl-menubar",this._el.container)),this._el.attribution=he("div","tl-attribution",this._el.container),this._el.attribution.innerHTML="<a href='https://timeline.knightlab.com' target='_blank' rel='noopener'><span class='tl-knightlab-logo'></span>TimelineJS</a>",this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.timenav_height=this._calculateTimeNavHeight(this.options.timenav_height),this._timenav=new lA(this._el.timenav,this.config,this.options,this.language),this._timenav.on("loaded",this._onTimeNavLoaded,this),this._timenav.options.height=this.options.timenav_height,this._timenav.init(),this.options.initial_zoom&&this.setZoom(this.options.initial_zoom),this._storyslider=new cA(this._el.storyslider,this.config,this.options,this.language),this._el.storyslider.setAttribute("role","group"),this._el.storyslider.setAttribute("aria-label",this._("aria_label_timeline_content")),this._storyslider.on("loaded",this._onStorySliderLoaded,this),this._storyslider.init(),this._menubar=new dA(this._el.menubar,this._el.container,this.options,this.getLanguage()),this.options.layout=="portrait"?this.options.storyslider_height=this.options.height-this.options.timenav_height-1:this.options.storyslider_height=this.options.height-1,this._updateDisplay()}_initEvents(){this._timenav.on("change",this._onTimeNavChange,this),this._timenav.on("zoomtoggle",this._onZoomToggle,this),this._timenav.on("visible_ticks_change",this._onVisibleTicksChange,this),this._storyslider.on("change",this._onSlideChange,this),this._storyslider.on("colorchange",this._onColorChange,this),this._storyslider.on("nav_next",this._onStorySliderNext,this),this._storyslider.on("nav_previous",this._onStorySliderPrevious,this),this._menubar.on("zoom_in",this._onZoomIn,this),this._menubar.on("zoom_out",this._onZoomOut,this),this._menubar.on("forward_to_end",this._onForwardToEnd,this),this._menubar.on("back_to_start",this._onBackToStart,this)}_onColorChange(e){this.fire("color_change",{unique_id:this.current_id},this)}_onSlideChange(e){this.current_id!=e.unique_id&&(this.current_id=e.unique_id,this._timenav.goToId(this.current_id),this._onChange(e))}_onTimeNavChange(e){this.current_id!=e.unique_id&&(this.current_id=e.unique_id,this._storyslider.goToId(this.current_id),this._onChange(e))}_onZoomToggle(e){e.zoom=="in"?this._menubar.toogleZoomIn(e.show):e.zoom=="out"&&this._menubar.toogleZoomOut(e.show)}_onChange(e){this.fire("change",{unique_id:this.current_id},this),this.options.hash_bookmark&&this.current_id&&this._updateHashBookmark(this.current_id)}_onVisibleTicksChange(e){this._menubar.changeVisibleTicks(e.visible_ticks)}_onForwardToEnd(e){this.goToEnd(),this.fire("forward_to_end",{unique_id:this.current_id},this)}_onBackToStart(e){this.goToStart(),this.fire("back_to_start",{unique_id:this.current_id},this)}_onZoomIn(e){this._timenav.zoomIn(),this.fire("zoom_in",{zoom_level:this._timenav.options.scale_factor},this)}_onZoomOut(e){this._timenav.zoomOut(),this.fire("zoom_out",{zoom_level:this._timenav.options.scale_factor},this)}_onTimeNavLoaded(){this._loaded.timenav=!0,this._onLoaded()}_onStorySliderLoaded(){this._loaded.storyslider=!0,this._onLoaded()}_onStorySliderNext(e){this.fire("nav_next",e)}_onStorySliderPrevious(e){this.fire("nav_previous",e)}_updateDisplay(e,r,i){var s=this.options.duration,a=this.options.base_class,o=0;i&&(s=i),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.width<=this.options.skinny_size?(a+=" tl-skinny",this.options.layout="portrait"):this.options.width<=this.options.medium_size?(a+=" tl-medium",this.options.layout="landscape"):this.options.layout="landscape",qr&&(this.options.layout=g5()),ya?(a+=" tl-mobile",this.options.timenav_height=this._calculateTimeNavHeight(e,this.options.timenav_mobile_height_percentage)):this.options.timenav_height=this._calculateTimeNavHeight(e),this.options.layout=="portrait"?a+=" tl-layout-portrait":a+=" tl-layout-landscape",this.options.storyslider_height=this.options.height-this.options.timenav_height,this.options.timenav_position=="top"?o=Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-39/2:o=Math.round(this.options.storyslider_height+1+Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-35/2),r?(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this.animator_storyslider&&this.animator_storyslider.stop(),this.animator_storyslider=Ei(this._el.storyslider,{height:this.options.storyslider_height+"px",duration:s/2,easing:Mu}),this.animator_menubar&&this.animator_menubar.stop(),this.animator_menubar=Ei(this._el.menubar,{top:o+"px",duration:s/2,easing:Mu})):(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this._el.storyslider.style.height=this.options.storyslider_height+"px",this._el.menubar.style.top=o+"px"),this.message&&this.message.updateDisplay(this.options.width,this.options.height),this._timenav.updateDisplay(this.options.width,this.options.timenav_height,r),this._storyslider.updateDisplay(this.options.width,this.options.storyslider_height,r,this.options.layout),this.language.direction=="rtl"&&(a+=" tl-rtl"),this._el.container.className=a}_calculateTimeNavHeight(e,r){var i=0;return(this.options.timenav_height_percentage||r)&&(r?i=Math.round(this.options.height/100*r):i=Math.round(this.options.height/100*this.options.timenav_height_percentage)),this._timenav.ready&&this.options.timenav_height_min<this._timenav.getMinimumHeight()&&(this.options.timenav_height_min=this._timenav.getMinimumHeight()),i<this.options.timenav_height_min&&(i=this.options.timenav_height_min),i=i-this.options.marker_padding*2,i}_validateOptions(){for(var e=["timenav_height","timenav_height_min","marker_height_min","marker_width_min","marker_padding","start_at_slide","slide_padding_lr"],r=0;r<e.length;r++){var i=e[r],s=this.options[i];let a=!0;typeof s=="number"?a=s==parseInt(s):typeof s=="string"&&(a=s.match(/^\s*(\-?\d+)?\s*$/)),a||this.config.logError({message_key:"invalid_integer_option",detail:i})}}_getSlideIndex(e){if(this.config){if(this.config.title&&this.config.title.unique_id==e)return 0;for(var r=0;r<this.config.events.length;r++)if(e==this.config.events[r].unique_id)return this.config.title?r+1:r}return-1}_getEventIndex(e){for(var r=0;r<this.config.events.length;r++)if(e==this.config.events[r].unique_id)return r;return-1}_onLoaded(){if(this._loaded.storyslider&&this._loaded.timenav&&(this.fire("loaded",this.config),v5(this.options.start_at_end)||this.options.start_at_slide>this.config.events.length?this.goToEnd():this.goTo(this.options.start_at_slide),this.options.hash_bookmark)){window.location.hash!=""?this.goToId(window.location.hash.replace("#event-","")):this._updateHashBookmark(this.current_id);let e=this;window.addEventListener("hashchange",function(){window.location.hash.indexOf("#event-")==0&&e.goToId(window.location.hash.replace("#event-",""))},!1)}}_updateHashBookmark(e){if(e){var r="#event-"+e.toString();window.history.replaceState(null,"Browsing TimelineJS",r),this.fire("hash_updated",{unique_id:this.current_id,hashbookmark:"#event-"+e.toString()},this)}}zoomIn(){this._timenav.zoomIn()}zoomOut(){this._timenav.zoomOut()}setZoom(e){this._timenav.setZoom(e)}goToId(e){this.current_id!=e&&(this.current_id=e,this._timenav.goToId(this.current_id),this._storyslider.goToId(this.current_id,!1,!0),this.fire("change",{unique_id:this.current_id},this))}goTo(e){if(!(e<0))try{this.config.title?e===0?this.goToId(this.config.title.unique_id):this.goToId(this.config.events[e-1].unique_id):this.goToId(this.config.events[e].unique_id)}catch{return}}goToStart(){this.goTo(0)}goToEnd(){var e=this.config.events.length-1;this.goTo(this.config.title?e+1:e)}goToPrev(){this.goTo(this._getSlideIndex(this.current_id)-1),this.focusContainer()}goToNext(){this.goTo(this._getSlideIndex(this.current_id)+1),this.focusContainer()}add(e){var r=this.config.addEvent(e),i=this._getEventIndex(r),s=this.config.events[i];this._storyslider.createSlide(s,this.config.title?i+1:i),this._storyslider._updateDrawSlides(),this._timenav.createMarker(s,i),this._timenav._updateDrawTimeline(!1),this.fire("added",{unique_id:r})}remove(e){if(e>=0&&e<this.config.events.length){this.config.events[e].unique_id==this.current_id&&(e<this.config.events.length-1?this.goTo(e+1):this.goTo(e-1));var r=this.config.events.splice(e,1);delete this.config.event_dict[r[0].unique_id],this._storyslider.destroySlide(this.config.title?e+1:e),this._storyslider._updateDrawSlides(),this._timenav.destroyMarker(e),this._timenav._updateDrawTimeline(!1),this.fire("removed",{unique_id:r[0].unique_id})}}removeId(e){this.remove(this._getEventIndex(e))}getData(e){if(this.config.title){if(e==0)return this.config.title;if(e>0&&e<=this.config.events.length)return this.config.events[e-1]}else if(e>=0&&e<this.config.events.length)return this.config.events[e];return null}getDataById(e){return this.getData(this._getSlideIndex(e))}getSlide(e){return e>=0&&e<this._storyslider._slides.length?this._storyslider._slides[e]:null}getSlideById(e){return this.getSlide(this._getSlideIndex(e))}getCurrentSlide(){return this.getSlideById(this.current_id)}updateDisplay(){this.ready?this._updateDisplay():Ue("updateDisplay called but timeline is not in ready state")}focusContainer(){this._el.container.focus()}_initGoogleAnalytics(e){ua(`https://www.googletagmanager.com/gtag/js?id=${e}`),window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",e)}_initAnalytics(){let e=this.options.ga_measurement_id||this.options.ga_property_id||null;if(e){this._initGoogleAnalytics(e);var r=this.options.track_events;for(let s=0;s<r.length;s++){var i=r[s];this.addEventListener(i,function(a){gtag("event",a.type)})}}}}Sn(hA,Ci,In);function tz(){const t=L.useRef(null),[e,r]=L.useState(null),[i,s]=L.useState(!0),[a,o]=L.useState(null),l=Qr(),u=L.useRef();u.current=l,L.useEffect(()=>{async function f(){try{const p=await Ln(pn(Rt,"timelineEvents")),g=c(p);r({title:{media:{url:"",caption:"",credit:""},text:{headline:"Civil Rights Movement Timeline",text:"Key events from the Civil Rights Movement, identified from interviews from the Library of Congress Civil Rights History Project."}},events:g}),s(!1)}catch(p){console.error("Error fetching timeline data:",p),o("Failed to load timeline events."),s(!1)}}f()},[]),L.useEffect(()=>{if(e&&t.current){t.current.innerHTML="";try{new hA(t.current,e),setTimeout(h,1e3)}catch(f){console.error("Error initializing Timeline.js:",f),o("Failed to initialize timeline.")}}},[e]);const c=f=>f.docs.map(p=>{const g=p.data(),_=new Date(g.date),A=g.keywords?g.keywords.split(",").map(E=>E.trim()):[],R=`
        ${g.description||""}
        <br><br>
        <button 
          class="relevant-interviews-button" 
          data-keywords="${encodeURIComponent(A.join(","))}"
          style="background-color: #2563eb; color: white; padding: 10px 16px; border: none; border-radius: 8px; cursor: pointer; display: flex; align-items: center; font-family: inherit; font-size: 14px; font-weight: 500; transition: background-color 0.2s; box-shadow: 0 1px 3px rgba(0,0,0,0.1);"
          onmouseover="this.style.backgroundColor = '#1d4ed8'"
          onmouseout="this.style.backgroundColor = '#2563eb'"
        >
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" style="width: 20px; height: 20px; margin-right: 8px;">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
          </svg>
          Relevant Interviews
        </button>
      `;return{start_date:{year:_.getFullYear(),month:_.getMonth()+1,day:_.getDate()},text:{headline:g.title,text:R},media:{url:g.mediaUrl||"",caption:g.mediaCaption||"",credit:g.mediaCredit||""}}}),h=()=>{document.querySelectorAll(".relevant-interviews-button").forEach(f=>{f.addEventListener("click",function(p){p.preventDefault(),p.stopPropagation();const g=this.dataset.keywords;g&&u.current(`/playlist-builder?keywords=${g}`)})})};return i?m.jsxs("div",{className:"flex justify-center items-center h-96 bg-gray-50",children:[m.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),m.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):a?m.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg text-center mx-auto my-6 max-w-xl",children:a}):m.jsxs("div",{className:"w-full max-w-7xl mx-auto p-6 bg-gray-50 font-sans",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Civil Rights Timeline"}),m.jsx("p",{className:"text-base leading-relaxed text-gray-600",children:"Explore key events from the Civil Rights Movement, with links to relevant interview recordings."})]}),m.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden p-0 mb-6",children:m.jsx("div",{ref:t,id:"timeline-embed",style:{height:"600px",width:"100%",position:"relative"}})}),m.jsx("div",{className:"bg-indigo-50 rounded-xl p-4 px-6 border-l-4 border-indigo-500",children:m.jsxs("p",{className:"text-sm leading-relaxed text-indigo-800 m-0",children:[m.jsx("strong",{children:"Tip:"}),' Click on any event to see details, and use the "Relevant Interviews" button to find related interview recordings.']})})]})}function nz(){const[t,e]=L.useState([]),[r,i]=L.useState(!0),[s,a]=L.useState(null),[o,l]=L.useState(""),[u,c]=L.useState(null),[h,f]=L.useState(!1),p=Qr();L.useEffect(()=>{A()},[]),L.useEffect(()=>{u&&f(!0)},[u]);const g=()=>{f(!1)},_=I=>{const y=I==null?void 0:I.match(/embed\/([a-zA-Z0-9_-]+)/);return y?y[1]:null},A=async()=>{try{i(!0);const I=await Ln(pn(Rt,"interviewSummaries")),y=[];I.forEach(w=>{const S=w.data(),M=_(S.videoEmbedLink);y.push({id:w.id,name:S.name||"Unknown Name",role:S.role||"Unknown Role",videoEmbedLink:S.videoEmbedLink,thumbnailUrl:M?`https://img.youtube.com/vi/${M}/hqdefault.jpg`:null})}),e(y),i(!1)}catch(I){console.error("Error fetching people:",I),a("Failed to load interview subjects"),i(!1)}},R=()=>{if(!u)return;const I=t.filter(w=>w.name.toLowerCase().includes(o.toLowerCase())),y=I.findIndex(w=>w.id===u.id);y>0?c(I[y-1]):c(I[I.length-1])},E=()=>{if(!u)return;const I=t.filter(w=>w.name.toLowerCase().includes(o.toLowerCase())),y=I.findIndex(w=>w.id===u.id);y<I.length-1?c(I[y+1]):c(I[0])};L.useEffect(()=>{const I=y=>{h&&(y.key==="ArrowLeft"?R():y.key==="ArrowRight"?E():y.key==="Escape"&&g())};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[h,u,o]);const b=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("polyline",{points:"15 18 9 12 15 6"})}),T=()=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:m.jsx("polyline",{points:"9 18 15 12 9 6"})}),D=()=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),m.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),U=({person:I,isOpen:y,onClose:w,onPrev:S,onNext:M})=>{if(!y||!I)return null;const N=G=>{G.target===G.currentTarget&&w()};return m.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:[m.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60",onClick:N}),m.jsx("button",{className:"absolute left-4 md:left-8 z-50 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:G=>{G.stopPropagation(),S()},"aria-label":"Previous person",children:m.jsx(b,{})}),m.jsx("button",{className:"absolute right-4 md:right-8 z-50 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:G=>{G.stopPropagation(),M()},"aria-label":"Next person",children:m.jsx(T,{})}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-md w-full overflow-hidden animate-fadeIn z-50 relative",children:[m.jsxs("div",{className:"relative",children:[I.thumbnailUrl&&m.jsx("div",{className:"w-full h-48 overflow-hidden",children:m.jsx("img",{src:I.thumbnailUrl,alt:I.name,className:"w-full h-full object-cover scale-125"})}),m.jsx("button",{className:"absolute top-2 right-2 bg-black bg-opacity-60 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:w,"aria-label":"Close",children:m.jsx(D,{})})]}),m.jsxs("div",{className:"p-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:I.name}),m.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:I.role}),m.jsx("button",{onClick:()=>p(`/interview-player?documentName=${encodeURIComponent(I.id)}`),className:"w-full bg-blue-600 text-white px-4 py-3 rounded-md hover:bg-blue-700 transition-colors duration-200 font-medium",children:"View Interview"})]})]})]})},j=({person:I})=>{const y=(u==null?void 0:u.id)===I.id;return m.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[m.jsx("div",{}),m.jsx("div",{className:`w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 rounded-md 
                    overflow-hidden shadow-md cursor-pointer transition-all duration-200
                    ${y?"ring-4 ring-blue-500":"hover:ring-2 hover:ring-blue-300"}`,onClick:()=>c(I),style:{touchAction:"manipulation"},children:I.thumbnailUrl?m.jsx("div",{className:"w-full h-full overflow-hidden",children:m.jsx("img",{src:I.thumbnailUrl,alt:I.name,className:"w-full h-full object-cover object-center scale-150",draggable:!1,loading:"lazy"})}):m.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:m.jsx("span",{className:"text-gray-400 text-xs",children:"No photo"})})}),m.jsx("div",{className:"text-center w-full",children:m.jsx("p",{className:`text-xs sm:text-sm truncate max-w-full ${y?"font-bold text-blue-600":"text-gray-700"}`,children:I.name})})]})};if(r)return m.jsx("div",{className:"flex justify-center items-center h-screen",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(s)return m.jsx("div",{className:"flex justify-center items-center h-screen",children:m.jsx("div",{className:"text-red-500",children:s})});if(t.length===0)return m.jsx("div",{className:"flex justify-center items-center h-screen",children:m.jsx("div",{className:"text-gray-500",children:"No interview subjects found"})});const P=t.filter(I=>I.name.toLowerCase().includes(o.toLowerCase()));return m.jsxs("div",{className:"container mx-auto px-4 py-8 min-h-screen",children:[m.jsxs("div",{className:"mb-6 max-w-xl mx-auto text-center",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:o?`${P.length} of ${t.length} People`:`${t.length} People`}),m.jsx("input",{type:"text",value:o,onChange:I=>l(I.target.value),placeholder:"Search by name...",className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring focus:border-blue-300"})]}),m.jsx("div",{className:"max-w-6xl mx-auto",children:m.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 gap-x-4 gap-y-6",children:P.map(I=>m.jsx(j,{person:I},I.id))})}),m.jsx(U,{person:u,isOpen:h,onClose:g,onPrev:R,onNext:E})]})}function rz({activeVisualization:t}){return m.jsxs("div",{className:"w-full max-w-5xl mx-auto p-6 bg-white shadow-md rounded-md",children:[t==="keywords"&&m.jsx(s5,{}),t==="map"&&m.jsx(c5,{}),t==="timeline"&&m.jsx(tz,{}),t==="people"&&m.jsx(nz,{})]})}function iz(){const[t,e]=L.useState("timeline"),{user:r}=sc(),i=["timeline","keywords","map","people"];return m.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[m.jsx("div",{className:"text-center mb-8",children:m.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text mb-6",children:"Civil Rights History Project"})}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden transition-all duration-300 mb-6",children:[m.jsx("div",{className:"border-b border-gray-200",children:m.jsx("ul",{className:"flex flex-wrap m-0 p-0 list-none",children:i.map(s=>m.jsx("li",{className:"flex-1",children:m.jsx("button",{onClick:()=>e(s),className:`w-full py-4 px-1 text-sm text-center transition-all duration-300 cursor-pointer border-0 ${t===s?"bg-indigo-50 text-blue-800 font-semibold border-b-2 border-blue-600":"bg-transparent text-gray-500 font-normal border-b-0"}`,children:s.charAt(0).toUpperCase()+s.slice(1)})},s))})}),m.jsx("div",{className:"p-6",children:m.jsx(rz,{activeVisualization:t})})]})]})}function sz(){var g,_;const[t,e]=L.useState(""),[r,i]=L.useState(""),[s,a]=L.useState(!1),[o,l]=L.useState(""),{login:u}=sc(),c=Qr(),f=((_=(g=fr().state)==null?void 0:g.from)==null?void 0:_.pathname)||"/",p=async A=>{if(A.preventDefault(),!t||!r){l("Please enter both email and password");return}try{a(!0),l(""),await u(t,r),c(f,{replace:!0})}catch(R){console.error("Login error:",R);let E="Failed to log in";R.code==="auth/invalid-email"?E="Invalid email address":R.code==="auth/user-not-found"?E="No account found with this email":R.code==="auth/wrong-password"?E="Incorrect password":R.code==="auth/too-many-requests"&&(E="Too many failed login attempts. Please try again later"),l(E)}finally{a(!1)}};return m.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6 font-sans",children:[m.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-4",children:"Sign in to your account"}),m.jsx("p",{className:"text-sm text-center text-gray-500 mt-2",children:"Enter your credentials to access your account"})]}),o&&m.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mb-6 rounded",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-red-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm text-red-700",children:o})})]})}),m.jsxs("form",{className:"mt-6",onSubmit:p,children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),m.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:A=>e(A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"you@example.com"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),m.jsx("a",{href:"#",className:"text-xs text-blue-600 hover:text-blue-700 transition-colors",children:"Forgot password?"})]}),m.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:r,onChange:A=>i(A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:""})]}),m.jsx("div",{className:"mt-8",children:m.jsx("button",{type:"submit",disabled:s,className:`w-full flex justify-center items-center py-3 px-4 relative bg-blue-600 text-white text-sm font-medium border-0 rounded-lg shadow-sm transition-colors ${s?"opacity-70 cursor-not-allowed":"hover:bg-blue-700 cursor-pointer"}`,children:s?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"absolute left-6 flex items-center",children:m.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),m.jsx("span",{children:"Signing in..."})]}):m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"absolute left-6 flex items-center",children:m.jsx("svg",{className:"h-5 w-5 text-blue-200",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),m.jsx("span",{children:"Sign in"})]})})}),m.jsx("div",{className:"mt-6 text-center",children:m.jsxs("p",{className:"text-sm text-gray-500",children:["Don't have an account?"," ",m.jsx("a",{href:"#",className:"text-blue-600 font-medium hover:text-blue-700 transition-colors",children:"Sign up"})]})})]})]}),m.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})}function vv(t){return t?t.split(",").map(e=>e.trim().toLowerCase()).filter(e=>e.length>0):[]}function ru(t){if(!t)return null;const e=t.match(/embed\/([a-zA-Z0-9_-]+)/);return e?e[1]:null}function az(t){if(!t)return"00:00";const e=t.match(/(?:\[)?(\d{1,2}:\d{2}(?::\d{2})?)/);return e?e[1]:"00:00"}function yv(t){if(!t)return 0;const e=t.split(":").map(Number);return e.length===2?e[0]*60+e[1]:e.length===3?e[0]*3600+e[1]*60+e[2]:0}function fd(t){if(t==null)return"0:00";const e=Math.floor(t/3600),r=Math.floor(t%3600/60),i=Math.floor(t%60);return e>0?`${e}:${r.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`:`${r}:${i.toString().padStart(2,"0")}`}function iu(t){if(!t)return{startSeconds:0,endSeconds:0};const e=t.split("-").map(s=>s.trim());if(e.length!==2)return{startSeconds:0,endSeconds:0};const r=yv(e[0]),i=yv(e[1]);return{startSeconds:r,endSeconds:i}}const oz=({videoQueue:t,currentVideoIndex:e,setCurrentVideoIndex:r,currentTime:i,totalDuration:s})=>{const a=L.useRef(null),o=L.useRef(null),[l,u]=L.useState(0),[c,h]=L.useState(0),[f,p]=L.useState(null);L.useEffect(()=>{let _=0;for(let A=0;A<e;A++)if(t[A]){const{startSeconds:R,endSeconds:E}=iu(t[A].timestamp);_+=E-R||300}if(_+=i,h(_),s&&s>0){const A=_/s*100;u(Math.min(A,100))}},[t,e,i,s]);const g=t.map((_,A)=>{const{startSeconds:R,endSeconds:E}=iu(_.timestamp),b=E-R||300,T=b/s*100,D=ru(_.videoEmbedLink);return{id:A,width:T,duration:b,isActive:A===e,videoId:D,name:_.name||"Untitled"}});return m.jsxs("div",{children:[m.jsx("div",{ref:a,style:{position:"relative",width:"100%",backgroundColor:"#e5e7eb",marginBottom:"10px",borderRadius:"8px",overflow:"hidden",padding:"10px",boxSizing:"border-box",border:"1px solid #d1d5db",display:"flex"},children:g.map(_=>m.jsxs("div",{onClick:()=>r(_.id),onMouseEnter:()=>p(_.id),onMouseLeave:()=>p(null),style:{width:`${_.width}%`,minWidth:"60px",padding:"0 2px",boxSizing:"border-box",position:"relative",cursor:"pointer"},children:[m.jsxs("div",{style:{position:"relative",overflow:"hidden",borderRadius:"6px",border:`2px solid ${_.isActive?"#3b82f6":"#d1d5db"}`,height:"70px",boxShadow:_.isActive?"0 2px 5px rgba(0,0,0,0.2)":"none"},children:[m.jsx("img",{src:`https://img.youtube.com/vi/${_.videoId}/mqdefault.jpg`,alt:`Thumbnail for segment ${_.id+1}`,style:{width:"100%",maxHeight:"80px",objectFit:"contain",borderRadius:"6px"},onError:A=>{A.target.src="https://via.placeholder.com/120x60?text=No+Thumbnail"}}),_.isActive&&m.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${i/_.duration*100}%`,backgroundColor:"rgba(255, 0, 0, 0.5)",transition:"width 0.2s linear"}}),m.jsx("div",{style:{position:"absolute",bottom:"0",left:"0",right:"0",backgroundColor:"rgba(0,0,0,0.6)",color:"white",fontSize:"11px",textAlign:"center",padding:"2px 0"},children:fd(_.duration)})]}),f===_.id&&m.jsxs("div",{style:{position:"absolute",top:"-30px",left:"50%",transform:"translateX(-50%)",backgroundColor:"#1f2937",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",zIndex:50,whiteSpace:"nowrap"},children:[_.name," (",fd(_.duration),")"]})]},`thumb-${_.id}`))}),m.jsxs("div",{style:{position:"relative",width:"100%",height:"8px",backgroundColor:"#d1d5db",borderRadius:"4px",overflow:"hidden",marginBottom:"10px"},children:[g.map(_=>m.jsx("div",{style:{width:`${_.width}%`,height:"100%",backgroundColor:_.isActive?"#bfdbfe":"#f3f4f6",borderRight:"1px solid #d1d5db",position:"relative"},children:_.isActive&&m.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${i/_.duration*100}%`,backgroundColor:"#3b82f6",opacity:.7}})},`bar-${_.id}`)),m.jsx("div",{ref:o,style:{position:"absolute",top:"-3px",left:`${l}%`,transform:"translateX(-50%)",width:"4px",height:"14px",backgroundColor:"red",borderRadius:"2px",zIndex:9999,transition:"left 0.1s linear"},children:m.jsx("div",{style:{position:"absolute",top:"-4px",left:"50%",transform:"translate(-50%, -50%)",width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"red"}})})]}),m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 10px",backgroundColor:"#f3f4f6",borderRadius:"4px",fontSize:"12px",marginBottom:"10px"},children:[m.jsx("div",{children:fd(c)}),m.jsxs("div",{style:{fontWeight:"bold"},children:[l.toFixed(1),"%"]}),m.jsx("div",{children:fd(s)})]})]})},lz=({onPrevious:t,onPlay:e,onPause:r,onNext:i,isPlaying:s,hasPrevious:a,hasNext:o})=>m.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"24px",padding:"12px",backgroundColor:"#f3f4f6",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",margin:"20px auto",border:"2px solid #d1d5db",maxWidth:"320px"},children:[m.jsx("button",{onClick:t,disabled:!a,style:{padding:"12px",borderRadius:"9999px",backgroundColor:a?"#3b82f6":"#9ca3af",color:"white",border:"none",cursor:a?"pointer":"not-allowed",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),m.jsx("button",{onClick:s?r:e,style:{padding:"16px",borderRadius:"9999px",backgroundColor:"#3b82f6",color:"white",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:s?m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6"})}):m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})}),m.jsx("button",{onClick:i,disabled:!o,style:{padding:"12px",borderRadius:"9999px",backgroundColor:o?"#3b82f6":"#9ca3af",color:"white",border:"none",cursor:o?"pointer":"not-allowed",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),uz=({nextKeyword:t,thumbnailUrl:e,onPlay:r})=>m.jsxs("div",{style:{width:"240px",backgroundColor:"#f3f4f6",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",border:"2px solid #d1d5db",overflow:"hidden"},children:[m.jsx("div",{className:"relative",children:m.jsxs("div",{style:{width:"100%",height:"120px",backgroundImage:e?`url(${e})`:"none",backgroundColor:e?"transparent":"#e5e7eb",backgroundSize:"cover",backgroundPosition:"center"},children:[!e&&m.jsx("div",{className:"flex items-center justify-center h-full",children:m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"text-gray-400",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsx("button",{onClick:r,style:{padding:"12px",borderRadius:"9999px",backgroundColor:"#3b82f6",color:"white",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})})})]})}),m.jsxs("div",{style:{padding:"12px"},children:[m.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[m.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",color:"#374151",margin:0},children:"Up Next"}),m.jsx("span",{style:{backgroundColor:"#dbeafe",color:"#1e40af",fontSize:"12px",fontWeight:"500",padding:"2px 8px",borderRadius:"4px"},children:t})]}),m.jsx("p",{style:{fontSize:"12px",color:"#6b7280",margin:0},children:"Plays automatically when current playlist ends"})]})]}),cz=({onClick:t})=>m.jsx("button",{onClick:t,className:"flex items-center justify-center p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 focus:outline-none transition-colors duration-200",title:"Shuffle and get new clips",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{d:"M8 5a1 1 0 100 2h5.586l-1.293 1.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L13.586 5H8zM12 15a1 1 0 100-2H6.414l1.293-1.293a1 1 0 10-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L6.414 15H12z"})})}),dz=({isOpen:t,onConfirm:e,onCancel:r,message:i})=>t?m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm mx-auto",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Confirmation"}),m.jsx("p",{className:"text-sm text-gray-600 mb-4",children:i}),m.jsxs("div",{className:"flex justify-end space-x-3",children:[m.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),m.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Confirm"})]})]})}):null,hz=({metadata:t,onMetadataUpdate:e})=>{const[r,i]=L.useState(!1),[s,a]=L.useState(!1),[o,l]=L.useState({}),[u,c]=L.useState(!1),[h,f]=L.useState(null),[p,g]=L.useState(!1);if(!t)return null;const _=()=>{l({...t}),a(!0),f(null),g(!1)},A=(P,I)=>{l(y=>({...y,[P]:I}))},R=async()=>{try{c(!0),f(null);let P;if(t.documentName&&t.id)P=To(Rt,"interviewSummaries",t.documentName,"subSummaries",t.id);else{console.error("Unable to determine document path"),f("Unable to determine document path for saving"),c(!1);return}const I={...o};delete I.id,delete I.documentName,await tv(P,I),e&&e(o),g(!0),c(!1),setTimeout(()=>{a(!1),g(!1)},1500)}catch(P){console.error("Error updating document:",P),f(`Error saving changes: ${P.message}`),c(!1)}},E=()=>{a(!1),l({}),f(null),g(!1)},b=["summary"],T=Object.keys(t).filter(P=>!b.includes(P)&&t[P]!==void 0),D=["id","documentName","createdAt","updatedAt"],U=P=>!D.includes(P),j=(P,I)=>{const y=U(P);return typeof I=="boolean"?m.jsxs("select",{disabled:!y,value:o[P].toString(),onChange:w=>A(P,w.target.value==="true"),className:`w-full px-2 py-1 text-sm border rounded ${y?"border-blue-300":"bg-gray-100"}`,children:[m.jsx("option",{value:"true",children:"True"}),m.jsx("option",{value:"false",children:"False"})]}):typeof I=="number"?m.jsx("input",{type:"number",disabled:!y,value:o[P],onChange:w=>A(P,Number(w.target.value)),className:`w-full px-2 py-1 text-sm border rounded ${y?"border-blue-300":"bg-gray-100"}`}):typeof I=="object"?m.jsx("textarea",{disabled:!0,value:JSON.stringify(I,null,2),className:"w-full px-2 py-1 text-sm border rounded bg-gray-100",rows:3}):m.jsx("input",{type:"text",disabled:!y,value:o[P]||"",onChange:w=>A(P,w.target.value),className:`w-full px-2 py-1 text-sm border rounded ${y?"border-blue-300":"bg-gray-100"}`})};return m.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 mb-6 border border-gray-100",children:[m.jsxs("div",{className:"flex justify-between items-center mb-3",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Clip Metadata"}),m.jsx("div",{className:"flex space-x-2",children:s?m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:R,disabled:u,className:"px-3 py-1 bg-blue-600 text-white text-sm font-medium rounded hover:bg-blue-700 transition-colors disabled:bg-blue-300",children:u?"Saving...":"Save"}),m.jsx("button",{onClick:E,disabled:u,className:"px-3 py-1 bg-gray-200 text-gray-800 text-sm font-medium rounded hover:bg-gray-300 transition-colors disabled:bg-gray-100",children:"Cancel"})]}):m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:_,className:"px-3 py-1 bg-gray-100 text-blue-600 hover:bg-gray-200 text-sm font-medium rounded transition-colors",children:"Edit"}),m.jsx("button",{onClick:()=>i(!r),className:"px-3 py-1 text-blue-600 hover:text-blue-800 text-sm font-medium",children:r?"Show Less":"Show All"})]})})]}),p&&m.jsx("div",{className:"mb-3 p-2 bg-green-100 text-green-800 text-sm rounded",children:"Changes saved successfully"}),h&&m.jsx("div",{className:"mb-3 p-2 bg-red-100 text-red-800 text-sm rounded",children:h}),m.jsx("div",{className:"grid grid-cols-2 gap-4",children:["id","documentName","timestamp","keywords"].map(P=>t[P]&&m.jsxs("div",{className:"mb-2",children:[m.jsxs("span",{className:"block text-sm font-medium text-gray-500",children:[P,":"]}),s?j(P,t[P]):m.jsx("span",{className:"block text-sm text-gray-800 break-words",children:typeof t[P]=="object"?JSON.stringify(t[P]):String(t[P])})]},P))}),r&&m.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:m.jsx("div",{className:"grid grid-cols-2 gap-4",children:T.filter(P=>!["id","documentName","timestamp","keywords"].includes(P)).map(P=>m.jsxs("div",{className:"mb-2",children:[m.jsxs("span",{className:"block text-sm font-medium text-gray-500",children:[P,":"]}),s?j(P,t[P]):m.jsx("span",{className:"block text-sm text-gray-800 break-words",children:typeof t[P]=="object"?JSON.stringify(t[P]):String(t[P])})]},P))})})]})},fz=({currentKeyword:t,excludeIds:e=[]})=>{const[r,i]=L.useState([]),[s,a]=L.useState(!0),[o,l]=L.useState(null);L.useEffect(()=>{t&&u(t)},[t]);const u=async h=>{try{a(!0);const f=vv(h);if(f.length===0){i([]),a(!1);return}const p=await Ln(pn(Rt,"interviewSummaries")),g=[];for(const A of p.docs){const R=A.id,E=A.data(),b=E.videoEmbedLink,T=c(b);console.log(b?`Parent document ${R} has videoEmbedLink: ${b.substring(0,50)}...`:`Parent document ${R} has no videoEmbedLink`);const D=pn(Rt,"interviewSummaries",R,"subSummaries");(await Ln(D)).forEach(j=>{const P=j.data(),I=(P.keywords||"").split(",").map(w=>w.trim().toLowerCase());f.some(w=>I.includes(w))&&!e.includes(j.id)&&g.push({id:j.id,documentName:R,...P,...E,thumbnailUrl:T,_debug_parentVideoEmbedLink:b})})}const _=g.filter(A=>A.thumbnailUrl).length;console.log(`Found thumbnails for ${_} out of ${g.length} clips`),i(g),a(!1)}catch(f){console.error("Error fetching related clips:",f),l("Error loading related clips"),a(!1)}},c=h=>{if(!h)return null;try{let f=ru(h);if(!f){if(h.includes("youtube.com/watch"))f=new URL(h).searchParams.get("v");else if(h.includes("youtube.com/embed/")){const p=h.split("youtube.com/embed/");p.length>1&&(f=p[1].split("?")[0])}else if(h.includes("youtu.be/")){const p=h.split("youtu.be/");p.length>1&&(f=p[1].split("?")[0])}else if(h.includes("<iframe")&&h.includes("src=")){const p=h.match(/src=["'](.*?)["']/);if(p&&p[1])return c(p[1])}}if(f)return`https://img.youtube.com/vi/${f}/mqdefault.jpg`;console.log("Could not extract video ID from:",h)}catch(f){console.error("Error extracting video ID for thumbnail:",f,"from link:",h)}return null};return s?m.jsx("div",{className:"py-4",children:m.jsx("div",{className:"flex justify-center items-center",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})})}):o?m.jsx("div",{className:"p-4 bg-red-50 text-red-700 rounded-md",children:o}):r.length===0?null:m.jsxs("div",{className:"mt-8 bg-white rounded-xl shadow-sm p-6",children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Related Clips"}),m.jsx("div",{className:"overflow-x-auto pb-4",children:m.jsx("div",{className:"flex space-x-4",style:{minWidth:"min-content"},children:r.map(h=>m.jsxs("div",{className:"flex-shrink-0 w-64 bg-gray-50 rounded-md overflow-hidden shadow-sm",children:[h.thumbnailUrl?m.jsx("div",{className:"relative pb-[56.25%] bg-gray-200",children:m.jsx("img",{src:h.thumbnailUrl,alt:h.name||"Video thumbnail",className:"absolute top-0 left-0 w-full h-full object-cover",onError:f=>{console.log("Thumbnail failed to load:",h.thumbnailUrl),f.target.onerror=null,f.target.style.display="none",f.target.parentElement.innerHTML=`
                        <div class="absolute top-0 left-0 w-full h-full flex items-center justify-center bg-gray-200">
                          <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                          </svg>
                        </div>
                      `}})}):m.jsxs("div",{className:"h-36 bg-gray-200 flex flex-col items-center justify-center",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),m.jsx("span",{className:"text-gray-500 text-sm",children:"Video Preview"})]}),m.jsxs("div",{className:"p-3",children:[m.jsx("h4",{className:"font-medium text-gray-900 line-clamp-1",title:h.name,children:h.name||"Unnamed clip"}),m.jsx("p",{className:"text-sm text-gray-500 mt-1 line-clamp-1",title:h.topic||"",children:h.topic||"No topic"}),h.timestamp&&m.jsx("p",{className:"text-xs text-gray-400 mt-1",children:h.timestamp})]})]},h.id))})})]})},pz=()=>{const[t]=Ay(),e=Qr(),[r,i]=L.useState(""),[s,a]=L.useState([]),[o,l]=L.useState(0),[u,c]=L.useState(!0),[h,f]=L.useState(null),[p,g]=L.useState(!0),[_,A]=L.useState(0),[R,E]=L.useState(0),[b,T]=L.useState(0),[D,U]=L.useState(!1),[j,P]=L.useState([]),[I,y]=L.useState(""),[w,S]=L.useState(""),[M,N]=L.useState(!1),G=L.useRef(null),ee=L.useRef(null),ie=L.useRef(Date.now()),de=L.useRef(null);L.useEffect(()=>{if(s.length>0){const F=s.reduce(($,Q)=>{const{startSeconds:le,endSeconds:we}=iu(Q.timestamp);return $+(we-le||300)},0);console.log("Calculated total duration:",F),T(F)}},[s]),L.useEffect(()=>{const F=t.get("keywords");F&&(console.log(`Found keyword: ${F}`),i(F))},[t]),L.useEffect(()=>{r&&(console.log(`Searching videos for: ${r}`),De())},[r]),L.useEffect(()=>{Y()},[]),L.useEffect(()=>{j.length>0&&r&&re()},[j,r]),L.useEffect(()=>(M&&I&&(de.current&&clearTimeout(de.current),de.current=setTimeout(()=>{console.log(`Navigating to next playlist: ${I}`),e(`?keywords=${encodeURIComponent(I)}`),N(!1)},3e3)),()=>{de.current&&clearTimeout(de.current)}),[M,I,e]),L.useEffect(()=>(ee.current&&(clearInterval(ee.current),ee.current=null),s.length>0&&p&&(console.log("Starting timer for manual time tracking"),ee.current=setInterval(()=>{A(F=>{const $=F+1;E(q()+$);const Q=s[o];if(Q){const{startSeconds:le,endSeconds:we}=iu(Q.timestamp),Ie=we-le;if($>=Ie)return console.log("End of video reached, auto-advancing"),o===s.length-1?(console.log("Playlist ended, preparing to play next keyword"),N(!0),$):(setTimeout(()=>l(Le=>Le+1),500),0)}return $})},1e3)),()=>{ee.current&&clearInterval(ee.current)}),[s,o,p]),L.useEffect(()=>{s.length>0&&(A(0),ie.current=Date.now(),console.log("Video index changed to:",o))},[o]);const q=()=>{if(!s.length)return 0;let F=0;for(let $=0;$<o;$++){const{startSeconds:Q,endSeconds:le}=iu(s[$].timestamp);F+=le-Q||300}return F},Y=async()=>{try{const F=new Set,$=await Ln(pn(Rt,"interviewSummaries"));for(const le of $.docs){const we=le.id,Ie=pn(Rt,"interviewSummaries",we,"subSummaries");(await Ln(Ie)).forEach(Ye=>{(Ye.data().keywords||"").split(",").map(Wt=>Wt.trim().toLowerCase()).forEach(Wt=>{Wt&&F.add(Wt)})})}const Q=Array.from(F);console.log(`Found ${Q.length} total keywords:`,Q),P(Q)}catch(F){console.error("Error fetching available keywords:",F)}},re=()=>{if(j.length===0)return;const F=j.filter(le=>le!==r);if(F.length===0)return;const $=Math.floor(Math.random()*F.length),Q=F[$];console.log(`Selected next keyword: ${Q}`),y(Q),ne(Q)},ne=async F=>{try{const $=vv(F);if($.length===0)return;const Q=await Ae($);if(Q.length>0){const le=Q[0];if(le.videoEmbedLink){const we=ru(le.videoEmbedLink);if(we){const Ie=`https://img.youtube.com/vi/${we}/mqdefault.jpg`;S(Ie);return}}}S("")}catch($){console.error("Error fetching thumbnail:",$),S("")}},W=()=>{I&&e(`?keywords=${encodeURIComponent(I)}`)},H=()=>{U(!0)},J=()=>{U(!1),De()},X=()=>{U(!1)},ce=F=>{a($=>{const Q=[...$];return Q[o]={...Q[o],...F},Q})},me=F=>F.sort(()=>Math.random()-.5),De=async()=>{try{c(!0);const F=vv(r);if(F.length===0){f("Please enter at least one keyword"),c(!1);return}let $=await Ae(F);$.length>0?($=me($).slice(0,3),$.forEach(Q=>{Q.thumbnailUrl||console.log("Missing thumbnail for clip:",Q.id,"in document:",Q.documentName)}),console.log(`Selected ${$.length} random videos`),a($),l(0),g(!0),A(0),E(0),ie.current=Date.now(),N(!1)):f("No videos found for this keyword"),c(!1)}catch(F){console.error("Error searching videos:",F),f("Error searching videos"),c(!1)}},Ae=async F=>{const $=await Ln(pn(Rt,"interviewSummaries")),Q=[];for(const le of $.docs){const we=le.id,Ie=le.data(),Le=Ie.videoEmbedLink,Ye=Le?`https://img.youtube.com/vi/${ru(Le)}/mqdefault.jpg`:null,Ce=pn(Rt,"interviewSummaries",we,"subSummaries");(await Ln(Ce)).forEach(Wt=>{const Rr=Wt.data(),Ai=(Rr.keywords||"").split(",").map(kn=>kn.trim().toLowerCase());F.some(kn=>Ai.includes(kn))&&Q.push({id:Wt.id,documentName:we,...Rr,...Ie,thumbnailUrl:Ye})})}return Q},He=()=>{o<s.length-1&&(l(o+1),g(!0))},We=()=>{o>0&&(l(o-1),g(!0))},Xe=()=>{if(G.current)try{console.log("Play requested"),G.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*"),g(!0),ie.current=Date.now()}catch(F){console.error("Error playing video:",F)}},Ke=()=>{if(G.current)try{console.log("Pause requested"),G.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"pauseVideo"}),"*"),g(!1)}catch(F){console.error("Error pausing video:",F)}},qe=()=>!s.length||o>=s.length?null:s[o],nt=()=>{const F=qe();if(!F)return"";try{const $=ru(F.videoEmbedLink),[Q]=F.timestamp.split(" - "),le=yv(az(Q));return`https://www.youtube.com/embed/${$}?autoplay=1&start=${le}&controls=0&enablejsapi=1&origin=${window.location.origin}`}catch($){return console.error("Error getting embed URL:",$),""}};if(u)return m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(h)return m.jsx("div",{className:"max-w-7xl mx-auto p-4",children:m.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:m.jsx("p",{children:h})})});const C=qe(),V=s.length>0;return m.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Keyword Playlist"}),m.jsx("div",{className:"flex items-center",children:m.jsx("span",{className:"bg-blue-100 text-blue-800 text-sm font-semibold px-3 py-1 rounded-md",children:r})})]}),m.jsxs("div",{className:"relative",children:[I&&m.jsx("div",{className:"absolute top-0 right-0 z-10",children:m.jsx(uz,{nextKeyword:I,thumbnailUrl:w,onPlay:W})}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[m.jsx("div",{className:"w-full max-w-2xl h-120 bg-black mx-auto relative rounded-lg overflow-hidden",children:C?m.jsx("iframe",{ref:G,src:nt(),width:"720",height:"480",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"YouTube video player",className:"absolute top-0 left-0 w-full h-full"}):m.jsx("div",{className:"flex items-center justify-center w-full h-full text-white font-medium",children:"No videos available"})}),V&&m.jsx("div",{className:"mt-6 mb-4 w-full max-w-2xl mx-auto",children:m.jsx(oz,{videoQueue:s,currentVideoIndex:o,setCurrentVideoIndex:l,currentTime:_,totalDuration:b})}),m.jsxs("div",{className:"w-full max-w-2xl mx-auto flex justify-center items-center py-3 mt-5",children:[m.jsx(lz,{onPrevious:We,onPlay:Xe,onPause:Ke,onNext:He,isPlaying:p,hasPrevious:o>0,hasNext:o<s.length-1}),m.jsx("div",{className:"ml-4",children:m.jsx(cz,{onClick:H})})]})]}),C&&m.jsx(hz,{metadata:C,onMetadataUpdate:ce}),C&&m.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[m.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:C.name}),m.jsx("p",{className:"text-sm italic text-gray-500 mb-4",children:C.role}),m.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:m.jsx("p",{className:"m-0 text-base leading-relaxed text-gray-700",children:C.summary})})]})]}),r&&s.length>0&&m.jsx(fz,{currentKeyword:r,excludeIds:s.map(F=>F.id)}),m.jsx(dz,{isOpen:D,onConfirm:J,onCancel:X,message:"Are you sure you want to hear a new set of clips on this topic?"})]})};function _v(t,e){return _v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},_v(t,e)}function fA(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,_v(t,e)}function xe(){return xe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},xe.apply(null,arguments)}function Ou(t){"@babel/helpers - typeof";return Ou=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ou(t)}function mz(t,e){if(Ou(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(Ou(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function gz(t){var e=mz(t,"string");return Ou(e)=="symbol"?e:e+""}function vz(t,e,r){return(e=gz(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function xE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function EE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?xE(Object(r),!0).forEach(function(i){vz(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):xE(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function Pn(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var TE=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),SE=function(){return Math.random().toString(36).substring(7).split("").join(".")},IE={INIT:"@@redux/INIT"+SE(),REPLACE:"@@redux/REPLACE"+SE()};function yz(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function pA(t,e,r){var i;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Pn(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Pn(1));return r(pA)(t,e)}if(typeof t!="function")throw new Error(Pn(2));var s=t,a=e,o=[],l=o,u=!1;function c(){l===o&&(l=o.slice())}function h(){if(u)throw new Error(Pn(3));return a}function f(A){if(typeof A!="function")throw new Error(Pn(4));if(u)throw new Error(Pn(5));var R=!0;return c(),l.push(A),function(){if(R){if(u)throw new Error(Pn(6));R=!1,c();var b=l.indexOf(A);l.splice(b,1),o=null}}}function p(A){if(!yz(A))throw new Error(Pn(7));if(typeof A.type>"u")throw new Error(Pn(8));if(u)throw new Error(Pn(9));try{u=!0,a=s(a,A)}finally{u=!1}for(var R=o=l,E=0;E<R.length;E++){var b=R[E];b()}return A}function g(A){if(typeof A!="function")throw new Error(Pn(10));s=A,p({type:IE.REPLACE})}function _(){var A,R=f;return A={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(Pn(11));function T(){b.next&&b.next(h())}T();var D=R(T);return{unsubscribe:D}}},A[TE]=function(){return this},A}return p({type:IE.INIT}),i={dispatch:p,subscribe:f,getState:h,replaceReducer:g},i[TE]=_,i}function kE(t,e){return function(){return e(t.apply(this,arguments))}}function CE(t,e){if(typeof t=="function")return kE(t,e);if(typeof t!="object"||t===null)throw new Error(Pn(16));var r={};for(var i in t){var s=t[i];typeof s=="function"&&(r[i]=kE(s,e))}return r}function mA(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(i){return i}:e.length===1?e[0]:e.reduce(function(i,s){return function(){return i(s.apply(void 0,arguments))}})}function _z(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(i){return function(){var s=i.apply(void 0,arguments),a=function(){throw new Error(Pn(15))},o={getState:s.getState,dispatch:function(){return a.apply(void 0,arguments)}},l=e.map(function(u){return u(o)});return a=mA.apply(void 0,l)(s.dispatch),EE(EE({},s),{},{dispatch:a})}}}var gA=Re.createContext(null);function wz(t){t()}var vA=wz,bz=function(e){return vA=e},xz=function(){return vA};function Ez(){var t=xz(),e=null,r=null;return{clear:function(){e=null,r=null},notify:function(){t(function(){for(var s=e;s;)s.callback(),s=s.next})},get:function(){for(var s=[],a=e;a;)s.push(a),a=a.next;return s},subscribe:function(s){var a=!0,o=r={callback:s,next:null,prev:r};return o.prev?o.prev.next=o:e=o,function(){!a||e===null||(a=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var AE={notify:function(){},get:function(){return[]}};function yA(t,e){var r,i=AE;function s(f){return u(),i.subscribe(f)}function a(){i.notify()}function o(){h.onStateChange&&h.onStateChange()}function l(){return!!r}function u(){r||(r=e?e.addNestedSub(o):t.subscribe(o),i=Ez())}function c(){r&&(r(),r=void 0,i.clear(),i=AE)}var h={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:o,isSubscribed:l,trySubscribe:u,tryUnsubscribe:c,getListeners:function(){return i}};return h}var _A=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?L.useLayoutEffect:L.useEffect;function Tz(t){var e=t.store,r=t.context,i=t.children,s=L.useMemo(function(){var l=yA(e);return{store:e,subscription:l}},[e]),a=L.useMemo(function(){return e.getState()},[e]);_A(function(){var l=s.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[s,a]);var o=r||gA;return Re.createElement(o.Provider,{value:s},i)}function zh(t,e){if(t==null)return{};var r={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;r[i]=t[i]}return r}var wA={exports:{}},et={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ht=typeof Symbol=="function"&&Symbol.for,T_=Ht?Symbol.for("react.element"):60103,S_=Ht?Symbol.for("react.portal"):60106,Kf=Ht?Symbol.for("react.fragment"):60107,Yf=Ht?Symbol.for("react.strict_mode"):60108,Xf=Ht?Symbol.for("react.profiler"):60114,Qf=Ht?Symbol.for("react.provider"):60109,Jf=Ht?Symbol.for("react.context"):60110,I_=Ht?Symbol.for("react.async_mode"):60111,Zf=Ht?Symbol.for("react.concurrent_mode"):60111,ep=Ht?Symbol.for("react.forward_ref"):60112,tp=Ht?Symbol.for("react.suspense"):60113,Sz=Ht?Symbol.for("react.suspense_list"):60120,np=Ht?Symbol.for("react.memo"):60115,rp=Ht?Symbol.for("react.lazy"):60116,Iz=Ht?Symbol.for("react.block"):60121,kz=Ht?Symbol.for("react.fundamental"):60117,Cz=Ht?Symbol.for("react.responder"):60118,Az=Ht?Symbol.for("react.scope"):60119;function Zn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case T_:switch(t=t.type,t){case I_:case Zf:case Kf:case Xf:case Yf:case tp:return t;default:switch(t=t&&t.$$typeof,t){case Jf:case ep:case rp:case np:case Qf:return t;default:return e}}case S_:return e}}}function bA(t){return Zn(t)===Zf}et.AsyncMode=I_;et.ConcurrentMode=Zf;et.ContextConsumer=Jf;et.ContextProvider=Qf;et.Element=T_;et.ForwardRef=ep;et.Fragment=Kf;et.Lazy=rp;et.Memo=np;et.Portal=S_;et.Profiler=Xf;et.StrictMode=Yf;et.Suspense=tp;et.isAsyncMode=function(t){return bA(t)||Zn(t)===I_};et.isConcurrentMode=bA;et.isContextConsumer=function(t){return Zn(t)===Jf};et.isContextProvider=function(t){return Zn(t)===Qf};et.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===T_};et.isForwardRef=function(t){return Zn(t)===ep};et.isFragment=function(t){return Zn(t)===Kf};et.isLazy=function(t){return Zn(t)===rp};et.isMemo=function(t){return Zn(t)===np};et.isPortal=function(t){return Zn(t)===S_};et.isProfiler=function(t){return Zn(t)===Xf};et.isStrictMode=function(t){return Zn(t)===Yf};et.isSuspense=function(t){return Zn(t)===tp};et.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Kf||t===Zf||t===Xf||t===Yf||t===tp||t===Sz||typeof t=="object"&&t!==null&&(t.$$typeof===rp||t.$$typeof===np||t.$$typeof===Qf||t.$$typeof===Jf||t.$$typeof===ep||t.$$typeof===kz||t.$$typeof===Cz||t.$$typeof===Az||t.$$typeof===Iz)};et.typeOf=Zn;wA.exports=et;var Pz=wA.exports,k_=Pz,Rz={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Dz={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Nz={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},xA={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},C_={};C_[k_.ForwardRef]=Nz;C_[k_.Memo]=xA;function PE(t){return k_.isMemo(t)?xA:C_[t.$$typeof]||Rz}var Mz=Object.defineProperty,Lz=Object.getOwnPropertyNames,RE=Object.getOwnPropertySymbols,Oz=Object.getOwnPropertyDescriptor,jz=Object.getPrototypeOf,DE=Object.prototype;function EA(t,e,r){if(typeof e!="string"){if(DE){var i=jz(e);i&&i!==DE&&EA(t,i,r)}var s=Lz(e);RE&&(s=s.concat(RE(e)));for(var a=PE(t),o=PE(e),l=0;l<s.length;++l){var u=s[l];if(!Dz[u]&&!(r&&r[u])&&!(o&&o[u])&&!(a&&a[u])){var c=Oz(e,u);try{Mz(t,u,c)}catch{}}}}return t}var Vz=EA;const NE=No(Vz);var TA={exports:{}},st={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ip=60103,sp=60106,cc=60107,dc=60108,hc=60114,fc=60109,pc=60110,mc=60112,gc=60113,A_=60120,vc=60115,yc=60116,SA=60121,IA=60122,kA=60117,CA=60129,AA=60131;if(typeof Symbol=="function"&&Symbol.for){var Kt=Symbol.for;ip=Kt("react.element"),sp=Kt("react.portal"),cc=Kt("react.fragment"),dc=Kt("react.strict_mode"),hc=Kt("react.profiler"),fc=Kt("react.provider"),pc=Kt("react.context"),mc=Kt("react.forward_ref"),gc=Kt("react.suspense"),A_=Kt("react.suspense_list"),vc=Kt("react.memo"),yc=Kt("react.lazy"),SA=Kt("react.block"),IA=Kt("react.server.block"),kA=Kt("react.fundamental"),CA=Kt("react.debug_trace_mode"),AA=Kt("react.legacy_hidden")}function Pr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case ip:switch(t=t.type,t){case cc:case hc:case dc:case gc:case A_:return t;default:switch(t=t&&t.$$typeof,t){case pc:case mc:case yc:case vc:case fc:return t;default:return e}}case sp:return e}}}var Fz=fc,Uz=ip,Bz=mc,$z=cc,zz=yc,Hz=vc,Wz=sp,qz=hc,Gz=dc,Kz=gc;st.ContextConsumer=pc;st.ContextProvider=Fz;st.Element=Uz;st.ForwardRef=Bz;st.Fragment=$z;st.Lazy=zz;st.Memo=Hz;st.Portal=Wz;st.Profiler=qz;st.StrictMode=Gz;st.Suspense=Kz;st.isAsyncMode=function(){return!1};st.isConcurrentMode=function(){return!1};st.isContextConsumer=function(t){return Pr(t)===pc};st.isContextProvider=function(t){return Pr(t)===fc};st.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===ip};st.isForwardRef=function(t){return Pr(t)===mc};st.isFragment=function(t){return Pr(t)===cc};st.isLazy=function(t){return Pr(t)===yc};st.isMemo=function(t){return Pr(t)===vc};st.isPortal=function(t){return Pr(t)===sp};st.isProfiler=function(t){return Pr(t)===hc};st.isStrictMode=function(t){return Pr(t)===dc};st.isSuspense=function(t){return Pr(t)===gc};st.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===cc||t===hc||t===CA||t===dc||t===gc||t===A_||t===AA||typeof t=="object"&&t!==null&&(t.$$typeof===yc||t.$$typeof===vc||t.$$typeof===fc||t.$$typeof===pc||t.$$typeof===mc||t.$$typeof===kA||t.$$typeof===SA||t[0]===IA)};st.typeOf=Pr;TA.exports=st;var Yz=TA.exports,Xz=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Qz=["reactReduxForwardedRef"],Jz=[],Zz=[null,null];function e9(t,e){var r=t[1];return[e.payload,r+1]}function ME(t,e,r){_A(function(){return t.apply(void 0,e)},r)}function t9(t,e,r,i,s,a,o){t.current=i,e.current=s,r.current=!1,a.current&&(a.current=null,o())}function n9(t,e,r,i,s,a,o,l,u,c){if(t){var h=!1,f=null,p=function(){if(!h){var A=e.getState(),R,E;try{R=i(A,s.current)}catch(b){E=b,f=b}E||(f=null),R===a.current?o.current||u():(a.current=R,l.current=R,o.current=!0,c({type:"STORE_UPDATED",payload:{error:E}}))}};r.onStateChange=p,r.trySubscribe(),p();var g=function(){if(h=!0,r.tryUnsubscribe(),r.onStateChange=null,f)throw f};return g}}var r9=function(){return[null,0]};function i9(t,e){e===void 0&&(e={});var r=e,i=r.getDisplayName,s=i===void 0?function(T){return"ConnectAdvanced("+T+")"}:i,a=r.methodName,o=a===void 0?"connectAdvanced":a,l=r.renderCountProp,u=l===void 0?void 0:l,c=r.shouldHandleStateChanges,h=c===void 0?!0:c,f=r.storeKey,p=f===void 0?"store":f;r.withRef;var g=r.forwardRef,_=g===void 0?!1:g,A=r.context,R=A===void 0?gA:A,E=zh(r,Xz),b=R;return function(D){var U=D.displayName||D.name||"Component",j=s(U),P=xe({},E,{getDisplayName:s,methodName:o,renderCountProp:u,shouldHandleStateChanges:h,storeKey:p,displayName:j,wrappedComponentName:U,WrappedComponent:D}),I=E.pure;function y(G){return t(G.dispatch,P)}var w=I?L.useMemo:function(G){return G()};function S(G){var ee=L.useMemo(function(){var $=G.reactReduxForwardedRef,Q=zh(G,Qz);return[G.context,$,Q]},[G]),ie=ee[0],de=ee[1],q=ee[2],Y=L.useMemo(function(){return ie&&ie.Consumer&&Yz.isContextConsumer(Re.createElement(ie.Consumer,null))?ie:b},[ie,b]),re=L.useContext(Y),ne=!!G.store&&!!G.store.getState&&!!G.store.dispatch;re&&re.store;var W=ne?G.store:re.store,H=L.useMemo(function(){return y(W)},[W]),J=L.useMemo(function(){if(!h)return Zz;var $=yA(W,ne?null:re.subscription),Q=$.notifyNestedSubs.bind($);return[$,Q]},[W,ne,re]),X=J[0],ce=J[1],me=L.useMemo(function(){return ne?re:xe({},re,{subscription:X})},[ne,re,X]),De=L.useReducer(e9,Jz,r9),Ae=De[0],He=Ae[0],We=De[1];if(He&&He.error)throw He.error;var Xe=L.useRef(),Ke=L.useRef(q),qe=L.useRef(),nt=L.useRef(!1),C=w(function(){return qe.current&&q===Ke.current?qe.current:H(W.getState(),q)},[W,He,q]);ME(t9,[Ke,Xe,nt,q,C,qe,ce]),ME(n9,[h,W,X,H,Ke,Xe,nt,qe,ce,We],[W,X,H]);var V=L.useMemo(function(){return Re.createElement(D,xe({},C,{ref:de}))},[de,D,C]),F=L.useMemo(function(){return h?Re.createElement(Y.Provider,{value:me},V):V},[Y,V,me]);return F}var M=I?Re.memo(S):S;if(M.WrappedComponent=D,M.displayName=S.displayName=j,_){var N=Re.forwardRef(function(ee,ie){return Re.createElement(M,xe({},ee,{reactReduxForwardedRef:ie}))});return N.displayName=j,N.WrappedComponent=D,NE(N,D)}return NE(M,D)}}function LE(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Tm(t,e){if(LE(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(e,r[s])||!LE(t[r[s]],e[r[s]]))return!1;return!0}function s9(t,e){var r={},i=function(o){var l=t[o];typeof l=="function"&&(r[o]=function(){return e(l.apply(void 0,arguments))})};for(var s in t)i(s);return r}function P_(t){return function(r,i){var s=t(r,i);function a(){return s}return a.dependsOnOwnProps=!1,a}}function OE(t){return t.dependsOnOwnProps!==null&&t.dependsOnOwnProps!==void 0?!!t.dependsOnOwnProps:t.length!==1}function PA(t,e){return function(i,s){s.displayName;var a=function(l,u){return a.dependsOnOwnProps?a.mapToProps(l,u):a.mapToProps(l)};return a.dependsOnOwnProps=!0,a.mapToProps=function(l,u){a.mapToProps=t,a.dependsOnOwnProps=OE(t);var c=a(l,u);return typeof c=="function"&&(a.mapToProps=c,a.dependsOnOwnProps=OE(c),c=a(l,u)),c},a}}function a9(t){return typeof t=="function"?PA(t):void 0}function o9(t){return t?void 0:P_(function(e){return{dispatch:e}})}function l9(t){return t&&typeof t=="object"?P_(function(e){return s9(t,e)}):void 0}const u9=[a9,o9,l9];function c9(t){return typeof t=="function"?PA(t):void 0}function d9(t){return t?void 0:P_(function(){return{}})}const h9=[c9,d9];function f9(t,e,r){return xe({},r,t,e)}function p9(t){return function(r,i){i.displayName;var s=i.pure,a=i.areMergedPropsEqual,o=!1,l;return function(c,h,f){var p=t(c,h,f);return o?(!s||!a(p,l))&&(l=p):(o=!0,l=p),l}}}function m9(t){return typeof t=="function"?p9(t):void 0}function g9(t){return t?void 0:function(){return f9}}const v9=[m9,g9];var y9=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function _9(t,e,r,i){return function(a,o){return r(t(a,o),e(i,o),o)}}function w9(t,e,r,i,s){var a=s.areStatesEqual,o=s.areOwnPropsEqual,l=s.areStatePropsEqual,u=!1,c,h,f,p,g;function _(T,D){return c=T,h=D,f=t(c,h),p=e(i,h),g=r(f,p,h),u=!0,g}function A(){return f=t(c,h),e.dependsOnOwnProps&&(p=e(i,h)),g=r(f,p,h),g}function R(){return t.dependsOnOwnProps&&(f=t(c,h)),e.dependsOnOwnProps&&(p=e(i,h)),g=r(f,p,h),g}function E(){var T=t(c,h),D=!l(T,f);return f=T,D&&(g=r(f,p,h)),g}function b(T,D){var U=!o(D,h),j=!a(T,c,D,h);return c=T,h=D,U&&j?A():U?R():j?E():g}return function(D,U){return u?b(D,U):_(D,U)}}function b9(t,e){var r=e.initMapStateToProps,i=e.initMapDispatchToProps,s=e.initMergeProps,a=zh(e,y9),o=r(t,a),l=i(t,a),u=s(t,a),c=a.pure?w9:_9;return c(o,l,u,t,a)}var x9=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function Sm(t,e,r){for(var i=e.length-1;i>=0;i--){var s=e[i](t);if(s)return s}return function(a,o){throw new Error("Invalid value of type "+typeof t+" for "+r+" argument when connecting component "+o.wrappedComponentName+".")}}function E9(t,e){return t===e}function T9(t){var e=t===void 0?{}:t,r=e.connectHOC,i=r===void 0?i9:r,s=e.mapStateToPropsFactories,a=s===void 0?h9:s,o=e.mapDispatchToPropsFactories,l=o===void 0?u9:o,u=e.mergePropsFactories,c=u===void 0?v9:u,h=e.selectorFactory,f=h===void 0?b9:h;return function(g,_,A,R){R===void 0&&(R={});var E=R,b=E.pure,T=b===void 0?!0:b,D=E.areStatesEqual,U=D===void 0?E9:D,j=E.areOwnPropsEqual,P=j===void 0?Tm:j,I=E.areStatePropsEqual,y=I===void 0?Tm:I,w=E.areMergedPropsEqual,S=w===void 0?Tm:w,M=zh(E,x9),N=Sm(g,a,"mapStateToProps"),G=Sm(_,l,"mapDispatchToProps"),ee=Sm(A,c,"mergeProps");return i(f,xe({methodName:"connect",getDisplayName:function(de){return"Connect("+de+")"},shouldHandleStateChanges:!!g,initMapStateToProps:N,initMapDispatchToProps:G,initMergeProps:ee,pure:T,areStatesEqual:U,areOwnPropsEqual:P,areStatePropsEqual:y,areMergedPropsEqual:S},M))}}const RA=T9();bz(wy.unstable_batchedUpdates);function S9(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function DA(t,e){var r=L.useState(function(){return{inputs:e,result:t()}})[0],i=L.useRef(!0),s=L.useRef(r),a=i.current||!!(e&&s.current.inputs&&S9(e,s.current.inputs)),o=a?s.current:{inputs:e,result:t()};return L.useEffect(function(){i.current=!1,s.current=o},[o]),o.result}function I9(t,e){return DA(function(){return t},e)}var $e=DA,_e=I9,k9="Invariant failed";function C9(t,e){throw new Error(k9)}var Tr=function(e){var r=e.top,i=e.right,s=e.bottom,a=e.left,o=i-a,l=s-r,u={top:r,right:i,bottom:s,left:a,width:o,height:l,x:a,y:r,center:{x:(i+a)/2,y:(s+r)/2}};return u},R_=function(e,r){return{top:e.top-r.top,left:e.left-r.left,bottom:e.bottom+r.bottom,right:e.right+r.right}},jE=function(e,r){return{top:e.top+r.top,left:e.left+r.left,bottom:e.bottom-r.bottom,right:e.right-r.right}},A9=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},Im={top:0,right:0,bottom:0,left:0},D_=function(e){var r=e.borderBox,i=e.margin,s=i===void 0?Im:i,a=e.border,o=a===void 0?Im:a,l=e.padding,u=l===void 0?Im:l,c=Tr(R_(r,s)),h=Tr(jE(r,o)),f=Tr(jE(h,u));return{marginBox:c,borderBox:Tr(r),paddingBox:h,contentBox:f,margin:s,border:o,padding:u}},tr=function(e){var r=e.slice(0,-2),i=e.slice(-2);if(i!=="px")return 0;var s=Number(r);return isNaN(s)&&C9(),s},P9=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Hh=function(e,r){var i=e.borderBox,s=e.border,a=e.margin,o=e.padding,l=A9(i,r);return D_({borderBox:l,border:s,margin:a,padding:o})},Wh=function(e,r){return r===void 0&&(r=P9()),Hh(e,r)},NA=function(e,r){var i={top:tr(r.marginTop),right:tr(r.marginRight),bottom:tr(r.marginBottom),left:tr(r.marginLeft)},s={top:tr(r.paddingTop),right:tr(r.paddingRight),bottom:tr(r.paddingBottom),left:tr(r.paddingLeft)},a={top:tr(r.borderTopWidth),right:tr(r.borderRightWidth),bottom:tr(r.borderBottomWidth),left:tr(r.borderLeftWidth)};return D_({borderBox:e,margin:i,padding:s,border:a})},MA=function(e){var r=e.getBoundingClientRect(),i=window.getComputedStyle(e);return NA(r,i)},VE=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function R9(t,e){return!!(t===e||VE(t)&&VE(e))}function D9(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!R9(t[r],e[r]))return!1;return!0}function $t(t,e){e===void 0&&(e=D9);var r,i=[],s,a=!1;function o(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return a&&r===this&&e(l,i)||(s=t.apply(this,l),a=!0,r=this,i=l),s}return o}var ju=function(e){var r=[],i=null,s=function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];r=l,!i&&(i=requestAnimationFrame(function(){i=null,e.apply(void 0,r)}))};return s.cancel=function(){i&&(cancelAnimationFrame(i),i=null)},s};function LA(t,e){}LA.bind(null,"warn");LA.bind(null,"error");function ls(){}function N9(t,e){return xe({},t,{},e)}function ar(t,e,r){var i=e.map(function(s){var a=N9(r,s.options);return t.addEventListener(s.eventName,s.fn,a),function(){t.removeEventListener(s.eventName,s.fn,a)}});return function(){i.forEach(function(a){a()})}}var M9="Invariant failed";function qh(t){this.message=t}qh.prototype.toString=function(){return this.message};function oe(t,e){throw new qh(M9)}var L9=function(t){fA(e,t);function e(){for(var i,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return i=t.call.apply(t,[this].concat(a))||this,i.callbacks=null,i.unbind=ls,i.onWindowError=function(l){var u=i.getCallbacks();u.isDragging()&&u.tryAbort();var c=l.error;c instanceof qh&&l.preventDefault()},i.getCallbacks=function(){if(!i.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return i.callbacks},i.setCallbacks=function(l){i.callbacks=l},i}var r=e.prototype;return r.componentDidMount=function(){this.unbind=ar(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(s){if(s instanceof qh){this.setState({});return}throw s},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},e}(Re.Component),O9=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Gh=function(e){return e+1},j9=function(e){return`
  You have lifted an item in position `+Gh(e.source.index)+`
`},OA=function(e,r){var i=e.droppableId===r.droppableId,s=Gh(e.index),a=Gh(r.index);return i?`
      You have moved the item from position `+s+`
      to position `+a+`
    `:`
    You have moved the item from position `+s+`
    in list `+e.droppableId+`
    to list `+r.droppableId+`
    in position `+a+`
  `},jA=function(e,r,i){var s=r.droppableId===i.droppableId;return s?`
      The item `+e+`
      has been combined with `+i.draggableId:`
      The item `+e+`
      in list `+r.droppableId+`
      has been combined with `+i.draggableId+`
      in list `+i.droppableId+`
    `},V9=function(e){var r=e.destination;if(r)return OA(e.source,r);var i=e.combine;return i?jA(e.draggableId,e.source,i):"You are over an area that cannot be dropped on"},FE=function(e){return`
  The item has returned to its starting position
  of `+Gh(e.index)+`
`},F9=function(e){if(e.reason==="CANCEL")return`
      Movement cancelled.
      `+FE(e.source)+`
    `;var r=e.destination,i=e.combine;return r?`
      You have dropped the item.
      `+OA(e.source,r)+`
    `:i?`
      You have dropped the item.
      `+jA(e.draggableId,e.source,i)+`
    `:`
    The item has been dropped while not over a drop area.
    `+FE(e.source)+`
  `},Wd={dragHandleUsageInstructions:O9,onDragStart:j9,onDragUpdate:V9,onDragEnd:F9},zt={x:0,y:0},Jt=function(e,r){return{x:e.x+r.x,y:e.y+r.y}},Hn=function(e,r){return{x:e.x-r.x,y:e.y-r.y}},us=function(e,r){return e.x===r.x&&e.y===r.y},Ko=function(e){return{x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}},ca=function(e,r,i){var s;return i===void 0&&(i=0),s={},s[e]=r,s[e==="x"?"y":"x"]=i,s},Vu=function(e,r){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))},UE=function(e,r){return Math.min.apply(Math,r.map(function(i){return Vu(e,i)}))},VA=function(e){return function(r){return{x:e(r.x),y:e(r.y)}}},U9=function(t,e){var r=Tr({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return r.width<=0||r.height<=0?null:r},_c=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},BE=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},B9={top:0,right:0,bottom:0,left:0},$9=function(e,r){return r?_c(e,r.scroll.diff.displacement):e},z9=function(e,r,i){if(i&&i.increasedBy){var s;return xe({},e,(s={},s[r.end]=e[r.end]+i.increasedBy[r.line],s))}return e},H9=function(e,r){return r&&r.shouldClipSubject?U9(r.pageMarginBox,e):Tr(e)},Po=function(t){var e=t.page,r=t.withPlaceholder,i=t.axis,s=t.frame,a=$9(e.marginBox,s),o=z9(a,i,r),l=H9(o,s);return{page:e,withPlaceholder:r,active:l}},N_=function(t,e){t.frame||oe();var r=t.frame,i=Hn(e,r.scroll.initial),s=Ko(i),a=xe({},r,{scroll:{initial:r.scroll.initial,current:e,diff:{value:i,displacement:s},max:r.scroll.max}}),o=Po({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:a}),l=xe({},t,{frame:a,subject:o});return l};function Kh(t){return Object.values?Object.values(t):Object.keys(t).map(function(e){return t[e]})}function M_(t,e){if(t.findIndex)return t.findIndex(e);for(var r=0;r<t.length;r++)if(e(t[r]))return r;return-1}function ks(t,e){if(t.find)return t.find(e);var r=M_(t,e);if(r!==-1)return t[r]}function FA(t){return Array.prototype.slice.call(t)}var UA=$t(function(t){return t.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),BA=$t(function(t){return t.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),ap=$t(function(t){return Kh(t)}),W9=$t(function(t){return Kh(t)}),Yo=$t(function(t,e){var r=W9(e).filter(function(i){return t===i.descriptor.droppableId}).sort(function(i,s){return i.descriptor.index-s.descriptor.index});return r});function L_(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function op(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var lp=$t(function(t,e){return e.filter(function(r){return r.descriptor.id!==t.descriptor.id})}),q9=function(t){var e=t.isMovingForward,r=t.draggable,i=t.destination,s=t.insideDestination,a=t.previousImpact;if(!i.isCombineEnabled)return null;var o=L_(a);if(!o)return null;function l(A){var R={type:"COMBINE",combine:{draggableId:A,droppableId:i.descriptor.id}};return xe({},a,{at:R})}var u=a.displaced.all,c=u.length?u[0]:null;if(e)return c?l(c):null;var h=lp(r,s);if(!c){if(!h.length)return null;var f=h[h.length-1];return l(f.descriptor.id)}var p=M_(h,function(A){return A.descriptor.id===c});p===-1&&oe();var g=p-1;if(g<0)return null;var _=h[g];return l(_.descriptor.id)},Xo=function(t,e){return t.descriptor.droppableId===e.descriptor.id},$A={point:zt,value:0},Fu={invisible:{},visible:{},all:[]},G9={displaced:Fu,displacedBy:$A,at:null},ur=function(t,e){return function(r){return t<=r&&r<=e}},zA=function(t){var e=ur(t.top,t.bottom),r=ur(t.left,t.right);return function(i){var s=e(i.top)&&e(i.bottom)&&r(i.left)&&r(i.right);if(s)return!0;var a=e(i.top)||e(i.bottom),o=r(i.left)||r(i.right),l=a&&o;if(l)return!0;var u=i.top<t.top&&i.bottom>t.bottom,c=i.left<t.left&&i.right>t.right,h=u&&c;if(h)return!0;var f=u&&o||c&&a;return f}},K9=function(t){var e=ur(t.top,t.bottom),r=ur(t.left,t.right);return function(i){var s=e(i.top)&&e(i.bottom)&&r(i.left)&&r(i.right);return s}},O_={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},HA={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},Y9=function(t){return function(e){var r=ur(e.top,e.bottom),i=ur(e.left,e.right);return function(s){return t===O_?r(s.top)&&r(s.bottom):i(s.left)&&i(s.right)}}},X9=function(e,r){var i=r.frame?r.frame.scroll.diff.displacement:zt;return _c(e,i)},Q9=function(e,r,i){return r.subject.active?i(r.subject.active)(e):!1},J9=function(e,r,i){return i(r)(e)},j_=function(e){var r=e.target,i=e.destination,s=e.viewport,a=e.withDroppableDisplacement,o=e.isVisibleThroughFrameFn,l=a?X9(r,i):r;return Q9(l,i,o)&&J9(l,s,o)},Z9=function(e){return j_(xe({},e,{isVisibleThroughFrameFn:zA}))},WA=function(e){return j_(xe({},e,{isVisibleThroughFrameFn:K9}))},eH=function(e){return j_(xe({},e,{isVisibleThroughFrameFn:Y9(e.destination.axis)}))},tH=function(e,r,i){if(typeof i=="boolean")return i;if(!r)return!0;var s=r.invisible,a=r.visible;if(s[e])return!1;var o=a[e];return o?o.shouldAnimate:!0};function nH(t,e){var r=t.page.marginBox,i={top:e.point.y,right:0,bottom:0,left:e.point.x};return Tr(R_(r,i))}function Uu(t){var e=t.afterDragging,r=t.destination,i=t.displacedBy,s=t.viewport,a=t.forceShouldAnimate,o=t.last;return e.reduce(function(u,c){var h=nH(c,i),f=c.descriptor.id;u.all.push(f);var p=Z9({target:h,destination:r,viewport:s,withDroppableDisplacement:!0});if(!p)return u.invisible[c.descriptor.id]=!0,u;var g=tH(f,o,a),_={draggableId:f,shouldAnimate:g};return u.visible[f]=_,u},{all:[],visible:{},invisible:{}})}function rH(t,e){if(!t.length)return 0;var r=t[t.length-1].descriptor.index;return e.inHomeList?r:r+1}function $E(t){var e=t.insideDestination,r=t.inHomeList,i=t.displacedBy,s=t.destination,a=rH(e,{inHomeList:r});return{displaced:Fu,displacedBy:i,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:a}}}}function Yh(t){var e=t.draggable,r=t.insideDestination,i=t.destination,s=t.viewport,a=t.displacedBy,o=t.last,l=t.index,u=t.forceShouldAnimate,c=Xo(e,i);if(l==null)return $E({insideDestination:r,inHomeList:c,displacedBy:a,destination:i});var h=ks(r,function(A){return A.descriptor.index===l});if(!h)return $E({insideDestination:r,inHomeList:c,displacedBy:a,destination:i});var f=lp(e,r),p=r.indexOf(h),g=f.slice(p),_=Uu({afterDragging:g,destination:i,displacedBy:a,last:o,viewport:s.frame,forceShouldAnimate:u});return{displaced:_,displacedBy:a,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:l}}}}function ws(t,e){return!!e.effected[t]}var iH=function(t){var e=t.isMovingForward,r=t.destination,i=t.draggables,s=t.combine,a=t.afterCritical;if(!r.isCombineEnabled)return null;var o=s.draggableId,l=i[o],u=l.descriptor.index,c=ws(o,a);return c?e?u:u-1:e?u+1:u},sH=function(t){var e=t.isMovingForward,r=t.isInHomeList,i=t.insideDestination,s=t.location;if(!i.length)return null;var a=s.index,o=e?a+1:a-1,l=i[0].descriptor.index,u=i[i.length-1].descriptor.index,c=r?u:u+1;return o<l||o>c?null:o},aH=function(t){var e=t.isMovingForward,r=t.isInHomeList,i=t.draggable,s=t.draggables,a=t.destination,o=t.insideDestination,l=t.previousImpact,u=t.viewport,c=t.afterCritical,h=l.at;if(h||oe(),h.type==="REORDER"){var f=sH({isMovingForward:e,isInHomeList:r,location:h.destination,insideDestination:o});return f==null?null:Yh({draggable:i,insideDestination:o,destination:a,viewport:u,last:l.displaced,displacedBy:l.displacedBy,index:f})}var p=iH({isMovingForward:e,destination:a,displaced:l.displaced,draggables:s,combine:h.combine,afterCritical:c});return p==null?null:Yh({draggable:i,insideDestination:o,destination:a,viewport:u,last:l.displaced,displacedBy:l.displacedBy,index:p})},oH=function(t){var e=t.displaced,r=t.afterCritical,i=t.combineWith,s=t.displacedBy,a=!!(e.visible[i]||e.invisible[i]);return ws(i,r)?a?zt:Ko(s.point):a?s.point:zt},lH=function(t){var e=t.afterCritical,r=t.impact,i=t.draggables,s=op(r);s||oe();var a=s.draggableId,o=i[a].page.borderBox.center,l=oH({displaced:r.displaced,afterCritical:e,combineWith:a,displacedBy:r.displacedBy});return Jt(o,l)},qA=function(e,r){return r.margin[e.start]+r.borderBox[e.size]/2},uH=function(e,r){return r.margin[e.end]+r.borderBox[e.size]/2},V_=function(e,r,i){return r[e.crossAxisStart]+i.margin[e.crossAxisStart]+i.borderBox[e.crossAxisSize]/2},zE=function(e){var r=e.axis,i=e.moveRelativeTo,s=e.isMoving;return ca(r.line,i.marginBox[r.end]+qA(r,s),V_(r,i.marginBox,s))},HE=function(e){var r=e.axis,i=e.moveRelativeTo,s=e.isMoving;return ca(r.line,i.marginBox[r.start]-uH(r,s),V_(r,i.marginBox,s))},cH=function(e){var r=e.axis,i=e.moveInto,s=e.isMoving;return ca(r.line,i.contentBox[r.start]+qA(r,s),V_(r,i.contentBox,s))},dH=function(t){var e=t.impact,r=t.draggable,i=t.draggables,s=t.droppable,a=t.afterCritical,o=Yo(s.descriptor.id,i),l=r.page,u=s.axis;if(!o.length)return cH({axis:u,moveInto:s.page,isMoving:l});var c=e.displaced,h=e.displacedBy,f=c.all[0];if(f){var p=i[f];if(ws(f,a))return HE({axis:u,moveRelativeTo:p.page,isMoving:l});var g=Hh(p.page,h.point);return HE({axis:u,moveRelativeTo:g,isMoving:l})}var _=o[o.length-1];if(_.descriptor.id===r.descriptor.id)return l.borderBox.center;if(ws(_.descriptor.id,a)){var A=Hh(_.page,Ko(a.displacedBy.point));return zE({axis:u,moveRelativeTo:A,isMoving:l})}return zE({axis:u,moveRelativeTo:_.page,isMoving:l})},wv=function(t,e){var r=t.frame;return r?Jt(e,r.scroll.diff.displacement):e},hH=function(e){var r=e.impact,i=e.draggable,s=e.droppable,a=e.draggables,o=e.afterCritical,l=i.page.borderBox.center,u=r.at;return!s||!u?l:u.type==="REORDER"?dH({impact:r,draggable:i,draggables:a,droppable:s,afterCritical:o}):lH({impact:r,draggables:a,afterCritical:o})},up=function(t){var e=hH(t),r=t.droppable,i=r?wv(r,e):e;return i},GA=function(t,e){var r=Hn(e,t.scroll.initial),i=Ko(r),s=Tr({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),a={frame:s,scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:r,displacement:i}}};return a};function WE(t,e){return t.map(function(r){return e[r]})}function fH(t,e){for(var r=0;r<e.length;r++){var i=e[r].visible[t];if(i)return i}return null}var pH=function(t){var e=t.impact,r=t.viewport,i=t.destination,s=t.draggables,a=t.maxScrollChange,o=GA(r,Jt(r.scroll.current,a)),l=i.frame?N_(i,Jt(i.frame.scroll.current,a)):i,u=e.displaced,c=Uu({afterDragging:WE(u.all,s),destination:i,displacedBy:e.displacedBy,viewport:o.frame,last:u,forceShouldAnimate:!1}),h=Uu({afterDragging:WE(u.all,s),destination:l,displacedBy:e.displacedBy,viewport:r.frame,last:u,forceShouldAnimate:!1}),f={},p={},g=[u,c,h];u.all.forEach(function(A){var R=fH(A,g);if(R){p[A]=R;return}f[A]=!0});var _=xe({},e,{displaced:{all:u.all,invisible:f,visible:p}});return _},mH=function(t,e){return Jt(t.scroll.diff.displacement,e)},F_=function(t){var e=t.pageBorderBoxCenter,r=t.draggable,i=t.viewport,s=mH(i,e),a=Hn(s,r.page.borderBox.center);return Jt(r.client.borderBox.center,a)},KA=function(t){var e=t.draggable,r=t.destination,i=t.newPageBorderBoxCenter,s=t.viewport,a=t.withDroppableDisplacement,o=t.onlyOnMainAxis,l=o===void 0?!1:o,u=Hn(i,e.page.borderBox.center),c=_c(e.page.borderBox,u),h={target:c,destination:r,withDroppableDisplacement:a,viewport:s};return l?eH(h):WA(h)},gH=function(t){var e=t.isMovingForward,r=t.draggable,i=t.destination,s=t.draggables,a=t.previousImpact,o=t.viewport,l=t.previousPageBorderBoxCenter,u=t.previousClientSelection,c=t.afterCritical;if(!i.isEnabled)return null;var h=Yo(i.descriptor.id,s),f=Xo(r,i),p=q9({isMovingForward:e,draggable:r,destination:i,insideDestination:h,previousImpact:a})||aH({isMovingForward:e,isInHomeList:f,draggable:r,draggables:s,destination:i,insideDestination:h,previousImpact:a,viewport:o,afterCritical:c});if(!p)return null;var g=up({impact:p,draggable:r,droppable:i,draggables:s,afterCritical:c}),_=KA({draggable:r,destination:i,newPageBorderBoxCenter:g,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(_){var A=F_({pageBorderBoxCenter:g,draggable:r,viewport:o});return{clientSelection:A,impact:p,scrollJumpRequest:null}}var R=Hn(g,l),E=pH({impact:p,viewport:o,destination:i,draggables:s,maxScrollChange:R});return{clientSelection:u,impact:E,scrollJumpRequest:R}},yn=function(e){var r=e.subject.active;return r||oe(),r},vH=function(t){var e=t.isMovingForward,r=t.pageBorderBoxCenter,i=t.source,s=t.droppables,a=t.viewport,o=i.subject.active;if(!o)return null;var l=i.axis,u=ur(o[l.start],o[l.end]),c=ap(s).filter(function(f){return f!==i}).filter(function(f){return f.isEnabled}).filter(function(f){return!!f.subject.active}).filter(function(f){return zA(a.frame)(yn(f))}).filter(function(f){var p=yn(f);return e?o[l.crossAxisEnd]<p[l.crossAxisEnd]:p[l.crossAxisStart]<o[l.crossAxisStart]}).filter(function(f){var p=yn(f),g=ur(p[l.start],p[l.end]);return u(p[l.start])||u(p[l.end])||g(o[l.start])||g(o[l.end])}).sort(function(f,p){var g=yn(f)[l.crossAxisStart],_=yn(p)[l.crossAxisStart];return e?g-_:_-g}).filter(function(f,p,g){return yn(f)[l.crossAxisStart]===yn(g[0])[l.crossAxisStart]});if(!c.length)return null;if(c.length===1)return c[0];var h=c.filter(function(f){var p=ur(yn(f)[l.start],yn(f)[l.end]);return p(r[l.line])});return h.length===1?h[0]:h.length>1?h.sort(function(f,p){return yn(f)[l.start]-yn(p)[l.start]})[0]:c.sort(function(f,p){var g=UE(r,BE(yn(f))),_=UE(r,BE(yn(p)));return g!==_?g-_:yn(f)[l.start]-yn(p)[l.start]})[0]},qE=function(e,r){var i=e.page.borderBox.center;return ws(e.descriptor.id,r)?Hn(i,r.displacedBy.point):i},yH=function(e,r){var i=e.page.borderBox;return ws(e.descriptor.id,r)?_c(i,Ko(r.displacedBy.point)):i},_H=function(t){var e=t.pageBorderBoxCenter,r=t.viewport,i=t.destination,s=t.insideDestination,a=t.afterCritical,o=s.filter(function(l){return WA({target:yH(l,a),destination:i,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(l,u){var c=Vu(e,wv(i,qE(l,a))),h=Vu(e,wv(i,qE(u,a)));return c<h?-1:h<c?1:l.descriptor.index-u.descriptor.index});return o[0]||null},wc=$t(function(e,r){var i=r[e.line];return{value:i,point:ca(e.line,i)}}),wH=function(e,r,i){var s=e.axis;if(e.descriptor.mode==="virtual")return ca(s.line,r[s.line]);var a=e.subject.page.contentBox[s.size],o=Yo(e.descriptor.id,i),l=o.reduce(function(h,f){return h+f.client.marginBox[s.size]},0),u=l+r[s.line],c=u-a;return c<=0?null:ca(s.line,c)},YA=function(e,r){return xe({},e,{scroll:xe({},e.scroll,{max:r})})},XA=function(e,r,i){var s=e.frame;Xo(r,e)&&oe(),e.subject.withPlaceholder&&oe();var a=wc(e.axis,r.displaceBy).point,o=wH(e,a,i),l={placeholderSize:a,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){var u=Po({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:e.frame});return xe({},e,{subject:u})}var c=o?Jt(s.scroll.max,o):s.scroll.max,h=YA(s,c),f=Po({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:h});return xe({},e,{subject:f,frame:h})},bH=function(e){var r=e.subject.withPlaceholder;r||oe();var i=e.frame;if(!i){var s=Po({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return xe({},e,{subject:s})}var a=r.oldFrameMaxScroll;a||oe();var o=YA(i,a),l=Po({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return xe({},e,{subject:l,frame:o})},xH=function(t){var e=t.previousPageBorderBoxCenter,r=t.moveRelativeTo,i=t.insideDestination,s=t.draggable,a=t.draggables,o=t.destination,l=t.viewport,u=t.afterCritical;if(!r){if(i.length)return null;var c={displaced:Fu,displacedBy:$A,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},h=up({impact:c,draggable:s,droppable:o,draggables:a,afterCritical:u}),f=Xo(s,o)?o:XA(o,s,a),p=KA({draggable:s,destination:f,newPageBorderBoxCenter:h,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return p?c:null}var g=e[o.axis.line]<=r.page.borderBox.center[o.axis.line],_=function(){var R=r.descriptor.index;return r.descriptor.id===s.descriptor.id||g?R:R+1}(),A=wc(o.axis,s.displaceBy);return Yh({draggable:s,insideDestination:i,destination:o,viewport:l,displacedBy:A,last:Fu,index:_})},EH=function(t){var e=t.isMovingForward,r=t.previousPageBorderBoxCenter,i=t.draggable,s=t.isOver,a=t.draggables,o=t.droppables,l=t.viewport,u=t.afterCritical,c=vH({isMovingForward:e,pageBorderBoxCenter:r,source:s,droppables:o,viewport:l});if(!c)return null;var h=Yo(c.descriptor.id,a),f=_H({pageBorderBoxCenter:r,viewport:l,destination:c,insideDestination:h,afterCritical:u}),p=xH({previousPageBorderBoxCenter:r,destination:c,draggable:i,draggables:a,moveRelativeTo:f,insideDestination:h,viewport:l,afterCritical:u});if(!p)return null;var g=up({impact:p,draggable:i,droppable:c,draggables:a,afterCritical:u}),_=F_({pageBorderBoxCenter:g,draggable:i,viewport:l});return{clientSelection:_,impact:p,scrollJumpRequest:null}},Gn=function(t){var e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null},TH=function(e,r){var i=Gn(e);return i?r[i]:null},SH=function(t){var e=t.state,r=t.type,i=TH(e.impact,e.dimensions.droppables),s=!!i,a=e.dimensions.droppables[e.critical.droppable.id],o=i||a,l=o.axis.direction,u=l==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||l==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(u&&!s)return null;var c=r==="MOVE_DOWN"||r==="MOVE_RIGHT",h=e.dimensions.draggables[e.critical.draggable.id],f=e.current.page.borderBoxCenter,p=e.dimensions,g=p.draggables,_=p.droppables;return u?gH({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:h,destination:o,draggables:g,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):EH({isMovingForward:c,previousPageBorderBoxCenter:f,draggable:h,isOver:o,draggables:g,droppables:_,viewport:e.viewport,afterCritical:e.afterCritical})};function Hs(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function QA(t){var e=ur(t.top,t.bottom),r=ur(t.left,t.right);return function(s){return e(s.y)&&r(s.x)}}function IH(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function kH(t){var e=t.pageBorderBox,r=t.draggable,i=t.candidates,s=r.page.borderBox.center,a=i.map(function(o){var l=o.axis,u=ca(o.axis.line,e.center[l.line],o.page.borderBox.center[l.crossAxisLine]);return{id:o.descriptor.id,distance:Vu(s,u)}}).sort(function(o,l){return l.distance-o.distance});return a[0]?a[0].id:null}function CH(t){var e=t.pageBorderBox,r=t.draggable,i=t.droppables,s=ap(i).filter(function(a){if(!a.isEnabled)return!1;var o=a.subject.active;if(!o||!IH(e,o))return!1;if(QA(o)(e.center))return!0;var l=a.axis,u=o.center[l.crossAxisLine],c=e[l.crossAxisStart],h=e[l.crossAxisEnd],f=ur(o[l.crossAxisStart],o[l.crossAxisEnd]),p=f(c),g=f(h);return!p&&!g?!0:p?c<u:h>u});return s.length?s.length===1?s[0].descriptor.id:kH({pageBorderBox:e,draggable:r,candidates:s}):null}var JA=function(e,r){return Tr(_c(e,r))},AH=function(t,e){var r=t.frame;return r?JA(e,r.scroll.diff.value):e};function ZA(t){var e=t.displaced,r=t.id;return!!(e.visible[r]||e.invisible[r])}function PH(t){var e=t.draggable,r=t.closest,i=t.inHomeList;return r?i&&r.descriptor.index>e.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var RH=function(t){var e=t.pageBorderBoxWithDroppableScroll,r=t.draggable,i=t.destination,s=t.insideDestination,a=t.last,o=t.viewport,l=t.afterCritical,u=i.axis,c=wc(i.axis,r.displaceBy),h=c.value,f=e[u.start],p=e[u.end],g=lp(r,s),_=ks(g,function(R){var E=R.descriptor.id,b=R.page.borderBox.center[u.line],T=ws(E,l),D=ZA({displaced:a,id:E});return T?D?p<=b:f<b-h:D?p<=b+h:f<b}),A=PH({draggable:r,closest:_,inHomeList:Xo(r,i)});return Yh({draggable:r,insideDestination:s,destination:i,viewport:o,last:a,displacedBy:c,index:A})},DH=4,NH=function(t){var e=t.draggable,r=t.pageBorderBoxWithDroppableScroll,i=t.previousImpact,s=t.destination,a=t.insideDestination,o=t.afterCritical;if(!s.isCombineEnabled)return null;var l=s.axis,u=wc(s.axis,e.displaceBy),c=u.value,h=r[l.start],f=r[l.end],p=lp(e,a),g=ks(p,function(A){var R=A.descriptor.id,E=A.page.borderBox,b=E[l.size],T=b/DH,D=ws(R,o),U=ZA({displaced:i.displaced,id:R});return D?U?f>E[l.start]+T&&f<E[l.end]-T:h>E[l.start]-c+T&&h<E[l.end]-c-T:U?f>E[l.start]+c+T&&f<E[l.end]+c-T:h>E[l.start]+T&&h<E[l.end]-T});if(!g)return null;var _={displacedBy:u,displaced:i.displaced,at:{type:"COMBINE",combine:{draggableId:g.descriptor.id,droppableId:s.descriptor.id}}};return _},eP=function(t){var e=t.pageOffset,r=t.draggable,i=t.draggables,s=t.droppables,a=t.previousImpact,o=t.viewport,l=t.afterCritical,u=JA(r.page.borderBox,e),c=CH({pageBorderBox:u,draggable:r,droppables:s});if(!c)return G9;var h=s[c],f=Yo(h.descriptor.id,i),p=AH(h,u);return NH({pageBorderBoxWithDroppableScroll:p,draggable:r,previousImpact:a,destination:h,insideDestination:f,afterCritical:l})||RH({pageBorderBoxWithDroppableScroll:p,draggable:r,destination:h,insideDestination:f,last:a.displaced,viewport:o,afterCritical:l})},U_=function(t,e){var r;return xe({},t,(r={},r[e.descriptor.id]=e,r))},MH=function(e){var r=e.previousImpact,i=e.impact,s=e.droppables,a=Gn(r),o=Gn(i);if(!a||a===o)return s;var l=s[a];if(!l.subject.withPlaceholder)return s;var u=bH(l);return U_(s,u)},LH=function(t){var e=t.draggable,r=t.draggables,i=t.droppables,s=t.previousImpact,a=t.impact,o=MH({previousImpact:s,impact:a,droppables:i}),l=Gn(a);if(!l)return o;var u=i[l];if(Xo(e,u)||u.subject.withPlaceholder)return o;var c=XA(u,e,r);return U_(o,c)},su=function(t){var e=t.state,r=t.clientSelection,i=t.dimensions,s=t.viewport,a=t.impact,o=t.scrollJumpRequest,l=s||e.viewport,u=i||e.dimensions,c=r||e.current.client.selection,h=Hn(c,e.initial.client.selection),f={offset:h,selection:c,borderBoxCenter:Jt(e.initial.client.borderBoxCenter,h)},p={selection:Jt(f.selection,l.scroll.current),borderBoxCenter:Jt(f.borderBoxCenter,l.scroll.current),offset:Jt(f.offset,l.scroll.diff.value)},g={client:f,page:p};if(e.phase==="COLLECTING")return xe({phase:"COLLECTING"},e,{dimensions:u,viewport:l,current:g});var _=u.draggables[e.critical.draggable.id],A=a||eP({pageOffset:p.offset,draggable:_,draggables:u.draggables,droppables:u.droppables,previousImpact:e.impact,viewport:l,afterCritical:e.afterCritical}),R=LH({draggable:_,impact:A,previousImpact:e.impact,draggables:u.draggables,droppables:u.droppables}),E=xe({},e,{current:g,dimensions:{draggables:u.draggables,droppables:R},impact:A,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return E};function OH(t,e){return t.map(function(r){return e[r]})}var tP=function(t){var e=t.impact,r=t.viewport,i=t.draggables,s=t.destination,a=t.forceShouldAnimate,o=e.displaced,l=OH(o.all,i),u=Uu({afterDragging:l,destination:s,displacedBy:e.displacedBy,viewport:r.frame,forceShouldAnimate:a,last:o});return xe({},e,{displaced:u})},nP=function(t){var e=t.impact,r=t.draggable,i=t.droppable,s=t.draggables,a=t.viewport,o=t.afterCritical,l=up({impact:e,draggable:r,draggables:s,droppable:i,afterCritical:o});return F_({pageBorderBoxCenter:l,draggable:r,viewport:a})},rP=function(t){var e=t.state,r=t.dimensions,i=t.viewport;e.movementMode!=="SNAP"&&oe();var s=e.impact,a=i||e.viewport,o=r||e.dimensions,l=o.draggables,u=o.droppables,c=l[e.critical.draggable.id],h=Gn(s);h||oe();var f=u[h],p=tP({impact:s,viewport:a,destination:f,draggables:l}),g=nP({impact:p,draggable:c,droppable:f,draggables:l,viewport:a,afterCritical:e.afterCritical});return su({impact:p,clientSelection:g,state:e,dimensions:o,viewport:a})},jH=function(t){return{index:t.index,droppableId:t.droppableId}},iP=function(t){var e=t.draggable,r=t.home,i=t.draggables,s=t.viewport,a=wc(r.axis,e.displaceBy),o=Yo(r.descriptor.id,i),l=o.indexOf(e);l===-1&&oe();var u=o.slice(l+1),c=u.reduce(function(g,_){return g[_.descriptor.id]=!0,g},{}),h={inVirtualList:r.descriptor.mode==="virtual",displacedBy:a,effected:c},f=Uu({afterDragging:u,destination:r,displacedBy:a,last:null,viewport:s.frame,forceShouldAnimate:!1}),p={displaced:f,displacedBy:a,at:{type:"REORDER",destination:jH(e.descriptor)}};return{impact:p,afterCritical:h}},VH=function(t,e){return{draggables:t.draggables,droppables:U_(t.droppables,e)}},FH=function(t){var e=t.draggable,r=t.offset,i=t.initialWindowScroll,s=Hh(e.client,r),a=Wh(s,i),o=xe({},e,{placeholder:xe({},e.placeholder,{client:s}),client:s,page:a});return o},UH=function(t){var e=t.frame;return e||oe(),e},BH=function(t){var e=t.additions,r=t.updatedDroppables,i=t.viewport,s=i.scroll.diff.value;return e.map(function(a){var o=a.descriptor.droppableId,l=r[o],u=UH(l),c=u.scroll.diff.value,h=Jt(s,c),f=FH({draggable:a,offset:h,initialWindowScroll:i.scroll.initial});return f})},$H=function(t){var e=t.state,r=t.published,i=r.modified.map(function(T){var D=e.dimensions.droppables[T.droppableId],U=N_(D,T.scroll);return U}),s=xe({},e.dimensions.droppables,{},UA(i)),a=BA(BH({additions:r.additions,updatedDroppables:s,viewport:e.viewport})),o=xe({},e.dimensions.draggables,{},a);r.removals.forEach(function(T){delete o[T]});var l={droppables:s,draggables:o},u=Gn(e.impact),c=u?l.droppables[u]:null,h=l.draggables[e.critical.draggable.id],f=l.droppables[e.critical.droppable.id],p=iP({draggable:h,home:f,draggables:o,viewport:e.viewport}),g=p.impact,_=p.afterCritical,A=c&&c.isCombineEnabled?e.impact:g,R=eP({pageOffset:e.current.page.offset,draggable:l.draggables[e.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:A,viewport:e.viewport,afterCritical:_}),E=xe({phase:"DRAGGING"},e,{phase:"DRAGGING",impact:R,onLiftImpact:g,dimensions:l,afterCritical:_,forceShouldAnimate:!1});if(e.phase==="COLLECTING")return E;var b=xe({phase:"DROP_PENDING"},E,{phase:"DROP_PENDING",reason:e.reason,isWaiting:!1});return b},bv=function(e){return e.movementMode==="SNAP"},km=function(e,r,i){var s=VH(e.dimensions,r);return!bv(e)||i?su({state:e,dimensions:s}):rP({state:e,dimensions:s})};function Cm(t){return t.isDragging&&t.movementMode==="SNAP"?xe({phase:"DRAGGING"},t,{scrollJumpRequest:null}):t}var GE={phase:"IDLE",completed:null,shouldFlush:!1},zH=function(t,e){if(t===void 0&&(t=GE),e.type==="FLUSH")return xe({},GE,{shouldFlush:!0});if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&oe();var r=e.payload,i=r.critical,s=r.clientSelection,a=r.viewport,o=r.dimensions,l=r.movementMode,u=o.draggables[i.draggable.id],c=o.droppables[i.droppable.id],h={selection:s,borderBoxCenter:u.client.borderBox.center,offset:zt},f={client:h,page:{selection:Jt(h.selection,a.scroll.initial),borderBoxCenter:Jt(h.selection,a.scroll.initial),offset:Jt(h.selection,a.scroll.diff.value)}},p=ap(o.droppables).every(function(We){return!We.isFixedOnPage}),g=iP({draggable:u,home:c,draggables:o.draggables,viewport:a}),_=g.impact,A=g.afterCritical,R={phase:"DRAGGING",isDragging:!0,critical:i,movementMode:l,dimensions:o,initial:f,current:f,isWindowScrollAllowed:p,impact:_,afterCritical:A,onLiftImpact:_,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null};return R}if(e.type==="COLLECTION_STARTING"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&oe();var E=xe({phase:"COLLECTING"},t,{phase:"COLLECTING"});return E}if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||oe(),$H({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;Hs(t)||oe();var b=e.payload.client;return us(b,t.current.client.selection)?t:su({state:t,clientSelection:b,impact:bv(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return Cm(t);Hs(t)||oe();var T=e.payload,D=T.id,U=T.newScroll,j=t.dimensions.droppables[D];if(!j)return t;var P=N_(j,U);return km(t,P,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;Hs(t)||oe();var I=e.payload,y=I.id,w=I.isEnabled,S=t.dimensions.droppables[y];S||oe(),S.isEnabled===w&&oe();var M=xe({},S,{isEnabled:w});return km(t,M,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;Hs(t)||oe();var N=e.payload,G=N.id,ee=N.isCombineEnabled,ie=t.dimensions.droppables[G];ie||oe(),ie.isCombineEnabled===ee&&oe();var de=xe({},ie,{isCombineEnabled:ee});return km(t,de,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;Hs(t)||oe(),t.isWindowScrollAllowed||oe();var q=e.payload.newScroll;if(us(t.viewport.scroll.current,q))return Cm(t);var Y=GA(t.viewport,q);return bv(t)?rP({state:t,viewport:Y}):su({state:t,viewport:Y})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Hs(t))return t;var re=e.payload.maxScroll;if(us(re,t.viewport.scroll.max))return t;var ne=xe({},t.viewport,{scroll:xe({},t.viewport.scroll,{max:re})});return xe({phase:"DRAGGING"},t,{viewport:ne})}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&oe();var W=SH({state:t,type:e.type});return W?su({state:t,impact:W.impact,clientSelection:W.clientSelection,scrollJumpRequest:W.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){var H=e.payload.reason;t.phase!=="COLLECTING"&&oe();var J=xe({phase:"DROP_PENDING"},t,{phase:"DROP_PENDING",isWaiting:!0,reason:H});return J}if(e.type==="DROP_ANIMATE"){var X=e.payload,ce=X.completed,me=X.dropDuration,De=X.newHomeClientOffset;t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||oe();var Ae={phase:"DROP_ANIMATING",completed:ce,dropDuration:me,newHomeClientOffset:De,dimensions:t.dimensions};return Ae}if(e.type==="DROP_COMPLETE"){var He=e.payload.completed;return{phase:"IDLE",completed:He,shouldFlush:!1}}return t},HH=function(e){return{type:"BEFORE_INITIAL_CAPTURE",payload:e}},WH=function(e){return{type:"LIFT",payload:e}},qH=function(e){return{type:"INITIAL_PUBLISH",payload:e}},GH=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},KH=function(){return{type:"COLLECTION_STARTING",payload:null}},YH=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},XH=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},QH=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},sP=function(e){return{type:"MOVE",payload:e}},JH=function(e){return{type:"MOVE_BY_WINDOW_SCROLL",payload:e}},ZH=function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}},eW=function(){return{type:"MOVE_UP",payload:null}},tW=function(){return{type:"MOVE_DOWN",payload:null}},nW=function(){return{type:"MOVE_RIGHT",payload:null}},rW=function(){return{type:"MOVE_LEFT",payload:null}},B_=function(){return{type:"FLUSH",payload:null}},iW=function(e){return{type:"DROP_ANIMATE",payload:e}},$_=function(e){return{type:"DROP_COMPLETE",payload:e}},aP=function(e){return{type:"DROP",payload:e}},sW=function(e){return{type:"DROP_PENDING",payload:e}},oP=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},aW=function(t){return function(e){var r=e.getState,i=e.dispatch;return function(s){return function(a){if(a.type!=="LIFT"){s(a);return}var o=a.payload,l=o.id,u=o.clientSelection,c=o.movementMode,h=r();h.phase==="DROP_ANIMATING"&&i($_({completed:h.completed})),r().phase!=="IDLE"&&oe(),i(B_()),i(HH({draggableId:l,movementMode:c}));var f={shouldPublishImmediately:c==="SNAP"},p={draggableId:l,scrollOptions:f},g=t.startPublishing(p),_=g.critical,A=g.dimensions,R=g.viewport;i(qH({critical:_,dimensions:A,clientSelection:u,movementMode:c,viewport:R}))}}}},oW=function(t){return function(){return function(e){return function(r){r.type==="INITIAL_PUBLISH"&&t.dragging(),r.type==="DROP_ANIMATE"&&t.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&t.resting(),e(r)}}}},z_={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},Bu={opacity:{drop:0,combining:.7},scale:{drop:.75}},H_={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Fs=H_.outOfTheWay+"s "+z_.outOfTheWay,au={fluid:"opacity "+Fs,snap:"transform "+Fs+", opacity "+Fs,drop:function(e){var r=e+"s "+z_.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+Fs,placeholder:"height "+Fs+", width "+Fs+", margin "+Fs},KE=function(e){return us(e,zt)?null:"translate("+e.x+"px, "+e.y+"px)"},xv={moveTo:KE,drop:function(e,r){var i=KE(e);return i?r?i+" scale("+Bu.scale.drop+")":i:null}},Ev=H_.minDropTime,lP=H_.maxDropTime,lW=lP-Ev,YE=1500,uW=.6,cW=function(t){var e=t.current,r=t.destination,i=t.reason,s=Vu(e,r);if(s<=0)return Ev;if(s>=YE)return lP;var a=s/YE,o=Ev+lW*a,l=i==="CANCEL"?o*uW:o;return Number(l.toFixed(2))},dW=function(t){var e=t.impact,r=t.draggable,i=t.dimensions,s=t.viewport,a=t.afterCritical,o=i.draggables,l=i.droppables,u=Gn(e),c=u?l[u]:null,h=l[r.descriptor.droppableId],f=nP({impact:e,draggable:r,draggables:o,afterCritical:a,droppable:c||h,viewport:s}),p=Hn(f,r.client.borderBox.center);return p},hW=function(t){var e=t.draggables,r=t.reason,i=t.lastImpact,s=t.home,a=t.viewport,o=t.onLiftImpact;if(!i.at||r!=="DROP"){var l=tP({draggables:e,impact:o,destination:s,viewport:a,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(i.at.type==="REORDER")return{impact:i,didDropInsideDroppable:!0};var u=xe({},i,{displaced:Fu});return{impact:u,didDropInsideDroppable:!0}},fW=function(t){var e=t.getState,r=t.dispatch;return function(i){return function(s){if(s.type!=="DROP"){i(s);return}var a=e(),o=s.payload.reason;if(a.phase==="COLLECTING"){r(sW({reason:o}));return}if(a.phase!=="IDLE"){var l=a.phase==="DROP_PENDING"&&a.isWaiting;l&&oe(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||oe();var u=a.critical,c=a.dimensions,h=c.draggables[a.critical.draggable.id],f=hW({reason:o,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),p=f.impact,g=f.didDropInsideDroppable,_=g?L_(p):null,A=g?op(p):null,R={index:u.draggable.index,droppableId:u.droppable.id},E={draggableId:h.descriptor.id,type:h.descriptor.type,source:R,reason:o,mode:a.movementMode,destination:_,combine:A},b=dW({impact:p,draggable:h,dimensions:c,viewport:a.viewport,afterCritical:a.afterCritical}),T={critical:a.critical,afterCritical:a.afterCritical,result:E,impact:p},D=!us(a.current.client.offset,b)||!!E.combine;if(!D){r($_({completed:T}));return}var U=cW({current:a.current.client.offset,destination:b,reason:o}),j={newHomeClientOffset:b,dropDuration:U,completed:T};r(iW(j))}}}},uP=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function pW(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||t()}}}function mW(t){var e=t.onWindowScroll;function r(){e(uP())}var i=ju(r),s=pW(i),a=ls;function o(){return a!==ls}function l(){o()&&oe(),a=ar(window,[s])}function u(){o()||oe(),i.cancel(),a(),a=ls}return{start:l,stop:u,isActive:o}}var gW=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},vW=function(t){var e=mW({onWindowScroll:function(i){t.dispatch(JH({newScroll:i}))}});return function(r){return function(i){!e.isActive()&&i.type==="INITIAL_PUBLISH"&&e.start(),e.isActive()&&gW(i)&&e.stop(),r(i)}}},yW=function(t){var e=!1,r=!1,i=setTimeout(function(){r=!0}),s=function(o){e||r||(e=!0,t(o),clearTimeout(i))};return s.wasCalled=function(){return e},s},_W=function(){var t=[],e=function(a){var o=M_(t,function(c){return c.timerId===a});o===-1&&oe();var l=t.splice(o,1),u=l[0];u.callback()},r=function(a){var o=setTimeout(function(){return e(o)}),l={timerId:o,callback:a};t.push(l)},i=function(){if(t.length){var a=[].concat(t);t.length=0,a.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:r,flush:i}},wW=function(e,r){return e==null&&r==null?!0:e==null||r==null?!1:e.droppableId===r.droppableId&&e.index===r.index},bW=function(e,r){return e==null&&r==null?!0:e==null||r==null?!1:e.draggableId===r.draggableId&&e.droppableId===r.droppableId},xW=function(e,r){if(e===r)return!0;var i=e.draggable.id===r.draggable.id&&e.draggable.droppableId===r.draggable.droppableId&&e.draggable.type===r.draggable.type&&e.draggable.index===r.draggable.index,s=e.droppable.id===r.droppable.id&&e.droppable.type===r.droppable.type;return i&&s},kl=function(e,r){r()},pd=function(e,r){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:r}},Am=function(e,r,i,s){if(!e){i(s(r));return}var a=yW(i),o={announce:a};e(r,o),a.wasCalled()||i(s(r))},EW=function(t,e){var r=_W(),i=null,s=function(p,g){i&&oe(),kl("onBeforeCapture",function(){var _=t().onBeforeCapture;if(_){var A={draggableId:p,mode:g};_(A)}})},a=function(p,g){i&&oe(),kl("onBeforeDragStart",function(){var _=t().onBeforeDragStart;_&&_(pd(p,g))})},o=function(p,g){i&&oe();var _=pd(p,g);i={mode:g,lastCritical:p,lastLocation:_.source,lastCombine:null},r.add(function(){kl("onDragStart",function(){return Am(t().onDragStart,_,e,Wd.onDragStart)})})},l=function(p,g){var _=L_(g),A=op(g);i||oe();var R=!xW(p,i.lastCritical);R&&(i.lastCritical=p);var E=!wW(i.lastLocation,_);E&&(i.lastLocation=_);var b=!bW(i.lastCombine,A);if(b&&(i.lastCombine=A),!(!R&&!E&&!b)){var T=xe({},pd(p,i.mode),{combine:A,destination:_});r.add(function(){kl("onDragUpdate",function(){return Am(t().onDragUpdate,T,e,Wd.onDragUpdate)})})}},u=function(){i||oe(),r.flush()},c=function(p){i||oe(),i=null,kl("onDragEnd",function(){return Am(t().onDragEnd,p,e,Wd.onDragEnd)})},h=function(){if(i){var p=xe({},pd(i.lastCritical,i.mode),{combine:null,destination:null,reason:"CANCEL"});c(p)}};return{beforeCapture:s,beforeStart:a,start:o,update:l,flush:u,drop:c,abort:h}},TW=function(t,e){var r=EW(t,e);return function(i){return function(s){return function(a){if(a.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(a.type==="INITIAL_PUBLISH"){var o=a.payload.critical;r.beforeStart(o,a.payload.movementMode),s(a),r.start(o,a.payload.movementMode);return}if(a.type==="DROP_COMPLETE"){var l=a.payload.completed.result;r.flush(),s(a),r.drop(l);return}if(s(a),a.type==="FLUSH"){r.abort();return}var u=i.getState();u.phase==="DRAGGING"&&r.update(u.critical,u.impact)}}}},SW=function(t){return function(e){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){e(r);return}var i=t.getState();i.phase!=="DROP_ANIMATING"&&oe(),t.dispatch($_({completed:i.completed}))}}},IW=function(t){var e=null,r=null;function i(){r&&(cancelAnimationFrame(r),r=null),e&&(e(),e=null)}return function(s){return function(a){if((a.type==="FLUSH"||a.type==="DROP_COMPLETE"||a.type==="DROP_ANIMATION_FINISHED")&&i(),s(a),a.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var u=t.getState();u.phase==="DROP_ANIMATING"&&t.dispatch(oP())}};r=requestAnimationFrame(function(){r=null,e=ar(window,[o])})}}}},kW=function(t){return function(){return function(e){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&t.stopPublishing(),e(r)}}}},CW=function(t){var e=!1;return function(){return function(r){return function(i){if(i.type==="INITIAL_PUBLISH"){e=!0,t.tryRecordFocus(i.payload.critical.draggable.id),r(i),t.tryRestoreFocusRecorded();return}if(r(i),!!e){if(i.type==="FLUSH"){e=!1,t.tryRestoreFocusRecorded();return}if(i.type==="DROP_COMPLETE"){e=!1;var s=i.payload.completed.result;s.combine&&t.tryShiftRecord(s.draggableId,s.combine.draggableId),t.tryRestoreFocusRecorded()}}}}}},AW=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},PW=function(t){return function(e){return function(r){return function(i){if(AW(i)){t.stop(),r(i);return}if(i.type==="INITIAL_PUBLISH"){r(i);var s=e.getState();s.phase!=="DRAGGING"&&oe(),t.start(s);return}r(i),t.scroll(e.getState())}}}},RW=function(t){return function(e){return function(r){if(e(r),r.type==="PUBLISH_WHILE_DRAGGING"){var i=t.getState();i.phase==="DROP_PENDING"&&(i.isWaiting||t.dispatch(aP({reason:i.reason})))}}}},DW=mA,NW=function(t){var e=t.dimensionMarshal,r=t.focusMarshal,i=t.styleMarshal,s=t.getResponders,a=t.announce,o=t.autoScroller;return pA(zH,DW(_z(oW(i),kW(e),aW(e),fW,SW,IW,RW,PW(o),vW,CW(r),TW(s,a))))},Pm=function(){return{additions:{},removals:{},modified:{}}};function MW(t){var e=t.registry,r=t.callbacks,i=Pm(),s=null,a=function(){s||(r.collectionStarting(),s=requestAnimationFrame(function(){s=null;var h=i,f=h.additions,p=h.removals,g=h.modified,_=Object.keys(f).map(function(E){return e.draggable.getById(E).getDimension(zt)}).sort(function(E,b){return E.descriptor.index-b.descriptor.index}),A=Object.keys(g).map(function(E){var b=e.droppable.getById(E),T=b.callbacks.getScrollWhileDragging();return{droppableId:E,scroll:T}}),R={additions:_,removals:Object.keys(p),modified:A};i=Pm(),r.publish(R)}))},o=function(h){var f=h.descriptor.id;i.additions[f]=h,i.modified[h.descriptor.droppableId]=!0,i.removals[f]&&delete i.removals[f],a()},l=function(h){var f=h.descriptor;i.removals[f.id]=!0,i.modified[f.droppableId]=!0,i.additions[f.id]&&delete i.additions[f.id],a()},u=function(){s&&(cancelAnimationFrame(s),s=null,i=Pm())};return{add:o,remove:l,stop:u}}var cP=function(t){var e=t.scrollHeight,r=t.scrollWidth,i=t.height,s=t.width,a=Hn({x:r,y:e},{x:s,y:i}),o={x:Math.max(0,a.x),y:Math.max(0,a.y)};return o},dP=function(){var t=document.documentElement;return t||oe(),t},hP=function(){var t=dP(),e=cP({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight});return e},LW=function(){var t=uP(),e=hP(),r=t.y,i=t.x,s=dP(),a=s.clientWidth,o=s.clientHeight,l=i+a,u=r+o,c=Tr({top:r,left:i,right:l,bottom:u}),h={frame:c,scroll:{initial:t,current:t,max:e,diff:{value:zt,displacement:zt}}};return h},OW=function(t){var e=t.critical,r=t.scrollOptions,i=t.registry,s=LW(),a=s.scroll.current,o=e.droppable,l=i.droppable.getAllByType(o.type).map(function(f){return f.callbacks.getDimensionAndWatchScroll(a,r)}),u=i.draggable.getAllByType(e.draggable.type).map(function(f){return f.getDimension(a)}),c={draggables:BA(u),droppables:UA(l)},h={dimensions:c,critical:e,viewport:s};return h};function XE(t,e,r){if(r.descriptor.id===e.id||r.descriptor.type!==e.type)return!1;var i=t.droppable.getById(r.descriptor.droppableId);return i.descriptor.mode==="virtual"}var jW=function(t,e){var r=null,i=MW({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),s=function(g,_){t.droppable.exists(g)||oe(),r&&e.updateDroppableIsEnabled({id:g,isEnabled:_})},a=function(g,_){r&&(t.droppable.exists(g)||oe(),e.updateDroppableIsCombineEnabled({id:g,isCombineEnabled:_}))},o=function(g,_){r&&(t.droppable.exists(g)||oe(),e.updateDroppableScroll({id:g,newScroll:_}))},l=function(g,_){r&&t.droppable.getById(g).callbacks.scroll(_)},u=function(){if(r){i.stop();var g=r.critical.droppable;t.droppable.getAllByType(g.type).forEach(function(_){return _.callbacks.dragStopped()}),r.unsubscribe(),r=null}},c=function(g){r||oe();var _=r.critical.draggable;g.type==="ADDITION"&&XE(t,_,g.value)&&i.add(g.value),g.type==="REMOVAL"&&XE(t,_,g.value)&&i.remove(g.value)},h=function(g){r&&oe();var _=t.draggable.getById(g.draggableId),A=t.droppable.getById(_.descriptor.droppableId),R={draggable:_.descriptor,droppable:A.descriptor},E=t.subscribe(c);return r={critical:R,unsubscribe:E},OW({critical:R,registry:t,scrollOptions:g.scrollOptions})},f={updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:a,scrollDroppable:l,updateDroppableScroll:o,startPublishing:h,stopPublishing:u};return f},fP=function(t,e){return t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP"},VW=function(t){window.scrollBy(t.x,t.y)},FW=$t(function(t){return ap(t).filter(function(e){return!(!e.isEnabled||!e.frame)})}),UW=function(e,r){var i=ks(FW(r),function(s){return s.frame||oe(),QA(s.frame.pageMarginBox)(e)});return i},BW=function(t){var e=t.center,r=t.destination,i=t.droppables;if(r){var s=i[r];return s.frame?s:null}var a=UW(e,i);return a},cs={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(e){return Math.pow(e,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},$W=function(t,e){var r=t[e.size]*cs.startFromPercentage,i=t[e.size]*cs.maxScrollAtPercentage,s={startScrollingFrom:r,maxScrollValueAt:i};return s},pP=function(t){var e=t.startOfRange,r=t.endOfRange,i=t.current,s=r-e;if(s===0)return 0;var a=i-e,o=a/s;return o},W_=1,zW=function(t,e){if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return cs.maxPixelScroll;if(t===e.startScrollingFrom)return W_;var r=pP({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),i=1-r,s=cs.maxPixelScroll*cs.ease(i);return Math.ceil(s)},QE=cs.durationDampening.accelerateAt,JE=cs.durationDampening.stopDampeningAt,HW=function(t,e){var r=e,i=JE,s=Date.now(),a=s-r;if(a>=JE)return t;if(a<QE)return W_;var o=pP({startOfRange:QE,endOfRange:i,current:a}),l=t*cs.ease(o);return Math.ceil(l)},ZE=function(t){var e=t.distanceToEdge,r=t.thresholds,i=t.dragStartTime,s=t.shouldUseTimeDampening,a=zW(e,r);return a===0?0:s?Math.max(HW(a,i),W_):a},eT=function(t){var e=t.container,r=t.distanceToEdges,i=t.dragStartTime,s=t.axis,a=t.shouldUseTimeDampening,o=$W(e,s),l=r[s.end]<r[s.start];return l?ZE({distanceToEdge:r[s.end],thresholds:o,dragStartTime:i,shouldUseTimeDampening:a}):-1*ZE({distanceToEdge:r[s.start],thresholds:o,dragStartTime:i,shouldUseTimeDampening:a})},WW=function(t){var e=t.container,r=t.subject,i=t.proposedScroll,s=r.height>e.height,a=r.width>e.width;return!a&&!s?i:a&&s?null:{x:a?0:i.x,y:s?0:i.y}},qW=VA(function(t){return t===0?0:t}),mP=function(t){var e=t.dragStartTime,r=t.container,i=t.subject,s=t.center,a=t.shouldUseTimeDampening,o={top:s.y-r.top,right:r.right-s.x,bottom:r.bottom-s.y,left:s.x-r.left},l=eT({container:r,distanceToEdges:o,dragStartTime:e,axis:O_,shouldUseTimeDampening:a}),u=eT({container:r,distanceToEdges:o,dragStartTime:e,axis:HA,shouldUseTimeDampening:a}),c=qW({x:u,y:l});if(us(c,zt))return null;var h=WW({container:r,subject:i,proposedScroll:c});return h?us(h,zt)?null:h:null},GW=VA(function(t){return t===0?0:t>0?1:-1}),q_=function(){var t=function(r,i){return r<0?r:r>i?r-i:0};return function(e){var r=e.current,i=e.max,s=e.change,a=Jt(r,s),o={x:t(a.x,i.x),y:t(a.y,i.y)};return us(o,zt)?null:o}}(),gP=function(e){var r=e.max,i=e.current,s=e.change,a={x:Math.max(i.x,r.x),y:Math.max(i.y,r.y)},o=GW(s),l=q_({max:a,current:i,change:o});return!l||o.x!==0&&l.x===0||o.y!==0&&l.y===0},G_=function(e,r){return gP({current:e.scroll.current,max:e.scroll.max,change:r})},KW=function(e,r){if(!G_(e,r))return null;var i=e.scroll.max,s=e.scroll.current;return q_({current:s,max:i,change:r})},K_=function(e,r){var i=e.frame;return i?gP({current:i.scroll.current,max:i.scroll.max,change:r}):!1},YW=function(e,r){var i=e.frame;return!i||!K_(e,r)?null:q_({current:i.scroll.current,max:i.scroll.max,change:r})},XW=function(t){var e=t.viewport,r=t.subject,i=t.center,s=t.dragStartTime,a=t.shouldUseTimeDampening,o=mP({dragStartTime:s,container:e.frame,subject:r,center:i,shouldUseTimeDampening:a});return o&&G_(e,o)?o:null},QW=function(t){var e=t.droppable,r=t.subject,i=t.center,s=t.dragStartTime,a=t.shouldUseTimeDampening,o=e.frame;if(!o)return null;var l=mP({dragStartTime:s,container:o.pageMarginBox,subject:r,center:i,shouldUseTimeDampening:a});return l&&K_(e,l)?l:null},tT=function(t){var e=t.state,r=t.dragStartTime,i=t.shouldUseTimeDampening,s=t.scrollWindow,a=t.scrollDroppable,o=e.current.page.borderBoxCenter,l=e.dimensions.draggables[e.critical.draggable.id],u=l.page.marginBox;if(e.isWindowScrollAllowed){var c=e.viewport,h=XW({dragStartTime:r,viewport:c,subject:u,center:o,shouldUseTimeDampening:i});if(h){s(h);return}}var f=BW({center:o,destination:Gn(e.impact),droppables:e.dimensions.droppables});if(f){var p=QW({dragStartTime:r,droppable:f,subject:u,center:o,shouldUseTimeDampening:i});p&&a(f.descriptor.id,p)}},JW=function(t){var e=t.scrollWindow,r=t.scrollDroppable,i=ju(e),s=ju(r),a=null,o=function(h){a||oe();var f=a,p=f.shouldUseTimeDampening,g=f.dragStartTime;tT({state:h,scrollWindow:i,scrollDroppable:s,dragStartTime:g,shouldUseTimeDampening:p})},l=function(h){a&&oe();var f=Date.now(),p=!1,g=function(){p=!0};tT({state:h,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:g,scrollDroppable:g}),a={dragStartTime:f,shouldUseTimeDampening:p},p&&o(h)},u=function(){a&&(i.cancel(),s.cancel(),a=null)};return{start:l,stop:u,scroll:o}},ZW=function(t){var e=t.move,r=t.scrollDroppable,i=t.scrollWindow,s=function(c,h){var f=Jt(c.current.client.selection,h);e({client:f})},a=function(c,h){if(!K_(c,h))return h;var f=YW(c,h);if(!f)return r(c.descriptor.id,h),null;var p=Hn(h,f);r(c.descriptor.id,p);var g=Hn(h,p);return g},o=function(c,h,f){if(!c||!G_(h,f))return f;var p=KW(h,f);if(!p)return i(f),null;var g=Hn(f,p);i(g);var _=Hn(f,g);return _},l=function(c){var h=c.scrollJumpRequest;if(h){var f=Gn(c.impact);f||oe();var p=a(c.dimensions.droppables[f],h);if(p){var g=c.viewport,_=o(c.isWindowScrollAllowed,g,p);_&&s(c,_)}}};return l},e8=function(t){var e=t.scrollDroppable,r=t.scrollWindow,i=t.move,s=JW({scrollWindow:r,scrollDroppable:e}),a=ZW({move:i,scrollWindow:r,scrollDroppable:e}),o=function(c){if(c.phase==="DRAGGING"){if(c.movementMode==="FLUID"){s.scroll(c);return}c.scrollJumpRequest&&a(c)}},l={scroll:o,start:s.start,stop:s.stop};return l},Ro="data-rbd",Do=function(){var t=Ro+"-drag-handle";return{base:t,draggableId:t+"-draggable-id",contextId:t+"-context-id"}}(),Tv=function(){var t=Ro+"-draggable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),t8=function(){var t=Ro+"-droppable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),nT={contextId:Ro+"-scroll-container-context-id"},n8=function(e){return function(r){return"["+r+'="'+e+'"]'}},Cl=function(e,r){return e.map(function(i){var s=i.styles[r];return s?i.selector+" { "+s+" }":""}).join(" ")},r8="pointer-events: none;",i8=function(t){var e=n8(t),r=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(Do.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:r8,dropAnimating:l}}}(),i=function(){var l=`
      transition: `+au.outOfTheWay+`;
    `;return{selector:e(Tv.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),s={selector:e(t8.contextId),styles:{always:"overflow-anchor: none;"}},a={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[i,r,s,a];return{always:Cl(o,"always"),resting:Cl(o,"resting"),dragging:Cl(o,"dragging"),dropAnimating:Cl(o,"dropAnimating"),userCancel:Cl(o,"userCancel")}},Kn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?L.useLayoutEffect:L.useEffect,Rm=function(){var e=document.querySelector("head");return e||oe(),e},rT=function(e){var r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.type="text/css",r};function s8(t,e){var r=$e(function(){return i8(t)},[t]),i=L.useRef(null),s=L.useRef(null),a=_e($t(function(f){var p=s.current;p||oe(),p.textContent=f}),[]),o=_e(function(f){var p=i.current;p||oe(),p.textContent=f},[]);Kn(function(){!i.current&&!s.current||oe();var f=rT(e),p=rT(e);return i.current=f,s.current=p,f.setAttribute(Ro+"-always",t),p.setAttribute(Ro+"-dynamic",t),Rm().appendChild(f),Rm().appendChild(p),o(r.always),a(r.resting),function(){var g=function(A){var R=A.current;R||oe(),Rm().removeChild(R),A.current=null};g(i),g(s)}},[e,o,a,r.always,r.resting,t]);var l=_e(function(){return a(r.dragging)},[a,r.dragging]),u=_e(function(f){if(f==="DROP"){a(r.dropAnimating);return}a(r.userCancel)},[a,r.dropAnimating,r.userCancel]),c=_e(function(){s.current&&a(r.resting)},[a,r.resting]),h=$e(function(){return{dragging:l,dropping:u,resting:c}},[l,u,c]);return h}var vP=function(t){return t&&t.ownerDocument?t.ownerDocument.defaultView:window};function cp(t){return t instanceof vP(t).HTMLElement}function a8(t,e){var r="["+Do.contextId+'="'+t+'"]',i=FA(document.querySelectorAll(r));if(!i.length)return null;var s=ks(i,function(a){return a.getAttribute(Do.draggableId)===e});return!s||!cp(s)?null:s}function o8(t){var e=L.useRef({}),r=L.useRef(null),i=L.useRef(null),s=L.useRef(!1),a=_e(function(p,g){var _={id:p,focus:g};return e.current[p]=_,function(){var R=e.current,E=R[p];E!==_&&delete R[p]}},[]),o=_e(function(p){var g=a8(t,p);g&&g!==document.activeElement&&g.focus()},[t]),l=_e(function(p,g){r.current===p&&(r.current=g)},[]),u=_e(function(){i.current||s.current&&(i.current=requestAnimationFrame(function(){i.current=null;var p=r.current;p&&o(p)}))},[o]),c=_e(function(p){r.current=null;var g=document.activeElement;g&&g.getAttribute(Do.draggableId)===p&&(r.current=p)},[]);Kn(function(){return s.current=!0,function(){s.current=!1;var p=i.current;p&&cancelAnimationFrame(p)}},[]);var h=$e(function(){return{register:a,tryRecordFocus:c,tryRestoreFocusRecorded:u,tryShiftRecord:l}},[a,c,u,l]);return h}function l8(){var t={draggables:{},droppables:{}},e=[];function r(f){return e.push(f),function(){var g=e.indexOf(f);g!==-1&&e.splice(g,1)}}function i(f){e.length&&e.forEach(function(p){return p(f)})}function s(f){return t.draggables[f]||null}function a(f){var p=s(f);return p||oe(),p}var o={register:function(p){t.draggables[p.descriptor.id]=p,i({type:"ADDITION",value:p})},update:function(p,g){var _=t.draggables[g.descriptor.id];_&&_.uniqueId===p.uniqueId&&(delete t.draggables[g.descriptor.id],t.draggables[p.descriptor.id]=p)},unregister:function(p){var g=p.descriptor.id,_=s(g);_&&p.uniqueId===_.uniqueId&&(delete t.draggables[g],i({type:"REMOVAL",value:p}))},getById:a,findById:s,exists:function(p){return!!s(p)},getAllByType:function(p){return Kh(t.draggables).filter(function(g){return g.descriptor.type===p})}};function l(f){return t.droppables[f]||null}function u(f){var p=l(f);return p||oe(),p}var c={register:function(p){t.droppables[p.descriptor.id]=p},unregister:function(p){var g=l(p.descriptor.id);g&&p.uniqueId===g.uniqueId&&delete t.droppables[p.descriptor.id]},getById:u,findById:l,exists:function(p){return!!l(p)},getAllByType:function(p){return Kh(t.droppables).filter(function(g){return g.descriptor.type===p})}};function h(){t.draggables={},t.droppables={},e.length=0}return{draggable:o,droppable:c,subscribe:r,clean:h}}function u8(){var t=$e(l8,[]);return L.useEffect(function(){return function(){requestAnimationFrame(t.clean)}},[t]),t}var Y_=Re.createContext(null),Xh=function(){var t=document.body;return t||oe(),t},c8={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},d8=function(e){return"rbd-announcement-"+e};function h8(t){var e=$e(function(){return d8(t)},[t]),r=L.useRef(null);L.useEffect(function(){var a=document.createElement("div");return r.current=a,a.id=e,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),xe(a.style,c8),Xh().appendChild(a),function(){setTimeout(function(){var u=Xh();u.contains(a)&&u.removeChild(a),a===r.current&&(r.current=null)})}},[e]);var i=_e(function(s){var a=r.current;if(a){a.textContent=s;return}},[]);return i}var f8=0,p8={separator:"::"};function X_(t,e){return e===void 0&&(e=p8),$e(function(){return""+t+e.separator+f8++},[e.separator,t])}function m8(t){var e=t.contextId,r=t.uniqueId;return"rbd-hidden-text-"+e+"-"+r}function g8(t){var e=t.contextId,r=t.text,i=X_("hidden-text",{separator:"-"}),s=$e(function(){return m8({contextId:e,uniqueId:i})},[i,e]);return L.useEffect(function(){var o=document.createElement("div");return o.id=s,o.textContent=r,o.style.display="none",Xh().appendChild(o),function(){var u=Xh();u.contains(o)&&u.removeChild(o)}},[s,r]),s}var dp=Re.createContext(null);function yP(t){var e=L.useRef(t);return L.useEffect(function(){e.current=t}),e}function v8(){var t=null;function e(){return!!t}function r(o){return o===t}function i(o){t&&oe();var l={abandon:o};return t=l,l}function s(){t||oe(),t=null}function a(){t&&(t.abandon(),s())}return{isClaimed:e,isActive:r,claim:i,release:s,tryAbandon:a}}var y8=9,_8=13,Q_=27,_P=32,w8=33,b8=34,x8=35,E8=36,T8=37,S8=38,I8=39,k8=40,md,C8=(md={},md[_8]=!0,md[y8]=!0,md),wP=function(t){C8[t.keyCode]&&t.preventDefault()},hp=function(){var t="visibilitychange";if(typeof document>"u")return t;var e=[t,"ms"+t,"webkit"+t,"moz"+t,"o"+t],r=ks(e,function(i){return"on"+i in document});return r||t}(),bP=0,iT=5;function A8(t,e){return Math.abs(e.x-t.x)>=iT||Math.abs(e.y-t.y)>=iT}var sT={type:"IDLE"};function P8(t){var e=t.cancel,r=t.completed,i=t.getPhase,s=t.setPhase;return[{eventName:"mousemove",fn:function(o){var l=o.button,u=o.clientX,c=o.clientY;if(l===bP){var h={x:u,y:c},f=i();if(f.type==="DRAGGING"){o.preventDefault(),f.actions.move(h);return}f.type!=="PENDING"&&oe();var p=f.point;if(A8(p,h)){o.preventDefault();var g=f.actions.fluidLift(h);s({type:"DRAGGING",actions:g})}}}},{eventName:"mouseup",fn:function(o){var l=i();if(l.type!=="DRAGGING"){e();return}o.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(o){i().type==="DRAGGING"&&o.preventDefault(),e()}},{eventName:"keydown",fn:function(o){var l=i();if(l.type==="PENDING"){e();return}if(o.keyCode===Q_){o.preventDefault(),e();return}wP(o)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){i().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:function(o){var l=i();if(l.type==="IDLE"&&oe(),l.actions.shouldRespectForcePress()){e();return}o.preventDefault()}},{eventName:hp,fn:e}]}function R8(t){var e=L.useRef(sT),r=L.useRef(ls),i=$e(function(){return{eventName:"mousedown",fn:function(f){if(!f.defaultPrevented&&f.button===bP&&!(f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)){var p=t.findClosestDraggableId(f);if(p){var g=t.tryGetLock(p,o,{sourceEvent:f});if(g){f.preventDefault();var _={x:f.clientX,y:f.clientY};r.current(),c(g,_)}}}}}},[t]),s=$e(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(f){if(!f.defaultPrevented){var p=t.findClosestDraggableId(f);if(p){var g=t.findOptionsForDraggable(p);g&&(g.shouldRespectForcePress||t.canGetLock(p)&&f.preventDefault())}}}}},[t]),a=_e(function(){var f={passive:!1,capture:!0};r.current=ar(window,[s,i],f)},[s,i]),o=_e(function(){var h=e.current;h.type!=="IDLE"&&(e.current=sT,r.current(),a())},[a]),l=_e(function(){var h=e.current;o(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[o]),u=_e(function(){var f={capture:!0,passive:!1},p=P8({cancel:l,completed:o,getPhase:function(){return e.current},setPhase:function(_){e.current=_}});r.current=ar(window,p,f)},[l,o]),c=_e(function(f,p){e.current.type!=="IDLE"&&oe(),e.current={type:"PENDING",point:p,actions:f},u()},[u]);Kn(function(){return a(),function(){r.current()}},[a])}var Da;function D8(){}var N8=(Da={},Da[b8]=!0,Da[w8]=!0,Da[E8]=!0,Da[x8]=!0,Da);function M8(t,e){function r(){e(),t.cancel()}function i(){e(),t.drop()}return[{eventName:"keydown",fn:function(a){if(a.keyCode===Q_){a.preventDefault(),r();return}if(a.keyCode===_P){a.preventDefault(),i();return}if(a.keyCode===k8){a.preventDefault(),t.moveDown();return}if(a.keyCode===S8){a.preventDefault(),t.moveUp();return}if(a.keyCode===I8){a.preventDefault(),t.moveRight();return}if(a.keyCode===T8){a.preventDefault(),t.moveLeft();return}if(N8[a.keyCode]){a.preventDefault();return}wP(a)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:hp,fn:r}]}function L8(t){var e=L.useRef(D8),r=$e(function(){return{eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==_P)return;var o=t.findClosestDraggableId(a);if(!o)return;var l=t.tryGetLock(o,h,{sourceEvent:a});if(!l)return;a.preventDefault();var u=!0,c=l.snapLift();e.current();function h(){u||oe(),u=!1,e.current(),i()}e.current=ar(window,M8(c,h),{capture:!0,passive:!1})}}},[t]),i=_e(function(){var a={passive:!1,capture:!0};e.current=ar(window,[r],a)},[r]);Kn(function(){return i(),function(){e.current()}},[i])}var Dm={type:"IDLE"},O8=120,j8=.15;function V8(t){var e=t.cancel,r=t.getPhase;return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:function(s){s.preventDefault()}},{eventName:"keydown",fn:function(s){if(r().type!=="DRAGGING"){e();return}s.keyCode===Q_&&s.preventDefault(),e()}},{eventName:hp,fn:e}]}function F8(t){var e=t.cancel,r=t.completed,i=t.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(a){var o=i();if(o.type!=="DRAGGING"){e();return}o.hasMoved=!0;var l=a.touches[0],u=l.clientX,c=l.clientY,h={x:u,y:c};a.preventDefault(),o.actions.move(h)}},{eventName:"touchend",fn:function(a){var o=i();if(o.type!=="DRAGGING"){e();return}a.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(a){if(i().type!=="DRAGGING"){e();return}a.preventDefault(),e()}},{eventName:"touchforcechange",fn:function(a){var o=i();o.type==="IDLE"&&oe();var l=a.touches[0];if(l){var u=l.force>=j8;if(u){var c=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){c&&e();return}if(c){if(o.hasMoved){a.preventDefault();return}e();return}a.preventDefault()}}}},{eventName:hp,fn:e}]}function U8(t){var e=L.useRef(Dm),r=L.useRef(ls),i=_e(function(){return e.current},[]),s=_e(function(g){e.current=g},[]),a=$e(function(){return{eventName:"touchstart",fn:function(g){if(!g.defaultPrevented){var _=t.findClosestDraggableId(g);if(_){var A=t.tryGetLock(_,l,{sourceEvent:g});if(A){var R=g.touches[0],E=R.clientX,b=R.clientY,T={x:E,y:b};r.current(),f(A,T)}}}}}},[t]),o=_e(function(){var g={capture:!0,passive:!1};r.current=ar(window,[a],g)},[a]),l=_e(function(){var p=e.current;p.type!=="IDLE"&&(p.type==="PENDING"&&clearTimeout(p.longPressTimerId),s(Dm),r.current(),o())},[o,s]),u=_e(function(){var p=e.current;l(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[l]),c=_e(function(){var g={capture:!0,passive:!1},_={cancel:u,completed:l,getPhase:i},A=ar(window,F8(_),g),R=ar(window,V8(_),g);r.current=function(){A(),R()}},[u,i,l]),h=_e(function(){var g=i();g.type!=="PENDING"&&oe();var _=g.actions.fluidLift(g.point);s({type:"DRAGGING",actions:_,hasMoved:!1})},[i,s]),f=_e(function(g,_){i().type!=="IDLE"&&oe();var A=setTimeout(h,O8);s({type:"PENDING",point:_,actions:g,longPressTimerId:A}),c()},[c,i,s,h]);Kn(function(){return o(),function(){r.current();var _=i();_.type==="PENDING"&&(clearTimeout(_.longPressTimerId),s(Dm))}},[i,o,s]),Kn(function(){var g=ar(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return g},[])}var B8={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function xP(t,e){if(e==null)return!1;var r=!!B8[e.tagName.toLowerCase()];if(r)return!0;var i=e.getAttribute("contenteditable");return i==="true"||i===""?!0:e===t?!1:xP(t,e.parentElement)}function $8(t,e){var r=e.target;return cp(r)?xP(t,r):!1}var z8=function(t){return Tr(t.getBoundingClientRect()).center};function H8(t){return t instanceof vP(t).Element}var W8=function(){var t="matches";if(typeof document>"u")return t;var e=[t,"msMatchesSelector","webkitMatchesSelector"],r=ks(e,function(i){return i in Element.prototype});return r||t}();function EP(t,e){return t==null?null:t[W8](e)?t:EP(t.parentElement,e)}function q8(t,e){return t.closest?t.closest(e):EP(t,e)}function G8(t){return"["+Do.contextId+'="'+t+'"]'}function K8(t,e){var r=e.target;if(!H8(r))return null;var i=G8(t),s=q8(r,i);return!s||!cp(s)?null:s}function Y8(t,e){var r=K8(t,e);return r?r.getAttribute(Do.draggableId):null}function X8(t,e){var r="["+Tv.contextId+'="'+t+'"]',i=FA(document.querySelectorAll(r)),s=ks(i,function(a){return a.getAttribute(Tv.id)===e});return!s||!cp(s)?null:s}function Q8(t){t.preventDefault()}function gd(t){var e=t.expected,r=t.phase,i=t.isLockActive;return t.shouldWarn,!(!i()||e!==r)}function TP(t){var e=t.lockAPI,r=t.store,i=t.registry,s=t.draggableId;if(e.isClaimed())return!1;var a=i.draggable.findById(s);return!(!a||!a.options.isEnabled||!fP(r.getState(),s))}function J8(t){var e=t.lockAPI,r=t.contextId,i=t.store,s=t.registry,a=t.draggableId,o=t.forceSensorStop,l=t.sourceEvent,u=TP({lockAPI:e,store:i,registry:s,draggableId:a});if(!u)return null;var c=s.draggable.getById(a),h=X8(r,c.descriptor.id);if(!h||l&&!c.options.canDragInteractiveElements&&$8(h,l))return null;var f=e.claim(o||ls),p="PRE_DRAG";function g(){return c.options.shouldRespectForcePress}function _(){return e.isActive(f)}function A(j,P){gd({expected:j,phase:p,isLockActive:_,shouldWarn:!0})&&i.dispatch(P())}var R=A.bind(null,"DRAGGING");function E(j){function P(){e.release(),p="COMPLETED"}p!=="PRE_DRAG"&&(P(),p!=="PRE_DRAG"&&oe()),i.dispatch(WH(j.liftActionArgs)),p="DRAGGING";function I(y,w){if(w===void 0&&(w={shouldBlockNextClick:!1}),j.cleanup(),w.shouldBlockNextClick){var S=ar(window,[{eventName:"click",fn:Q8,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(S)}P(),i.dispatch(aP({reason:y}))}return xe({isActive:function(){return gd({expected:"DRAGGING",phase:p,isLockActive:_,shouldWarn:!1})},shouldRespectForcePress:g,drop:function(w){return I("DROP",w)},cancel:function(w){return I("CANCEL",w)}},j.actions)}function b(j){var P=ju(function(y){R(function(){return sP({client:y})})}),I=E({liftActionArgs:{id:a,clientSelection:j,movementMode:"FLUID"},cleanup:function(){return P.cancel()},actions:{move:P}});return xe({},I,{move:P})}function T(){var j={moveUp:function(){return R(eW)},moveRight:function(){return R(nW)},moveDown:function(){return R(tW)},moveLeft:function(){return R(rW)}};return E({liftActionArgs:{id:a,clientSelection:z8(h),movementMode:"SNAP"},cleanup:ls,actions:j})}function D(){var j=gd({expected:"PRE_DRAG",phase:p,isLockActive:_,shouldWarn:!0});j&&e.release()}var U={isActive:function(){return gd({expected:"PRE_DRAG",phase:p,isLockActive:_,shouldWarn:!1})},shouldRespectForcePress:g,fluidLift:b,snapLift:T,abort:D};return U}var Z8=[R8,L8,U8];function eq(t){var e=t.contextId,r=t.store,i=t.registry,s=t.customSensors,a=t.enableDefaultSensors,o=[].concat(a?Z8:[],s||[]),l=L.useState(function(){return v8()})[0],u=_e(function(b,T){b.isDragging&&!T.isDragging&&l.tryAbandon()},[l]);Kn(function(){var b=r.getState(),T=r.subscribe(function(){var D=r.getState();u(b,D),b=D});return T},[l,r,u]),Kn(function(){return l.tryAbandon},[l.tryAbandon]);for(var c=_e(function(E){return TP({lockAPI:l,registry:i,store:r,draggableId:E})},[l,i,r]),h=_e(function(E,b,T){return J8({lockAPI:l,registry:i,contextId:e,store:r,draggableId:E,forceSensorStop:b,sourceEvent:T&&T.sourceEvent?T.sourceEvent:null})},[e,l,i,r]),f=_e(function(E){return Y8(e,E)},[e]),p=_e(function(E){var b=i.draggable.findById(E);return b?b.options:null},[i.draggable]),g=_e(function(){l.isClaimed()&&(l.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(B_()))},[l,r]),_=_e(l.isClaimed,[l]),A=$e(function(){return{canGetLock:c,tryGetLock:h,findClosestDraggableId:f,findOptionsForDraggable:p,tryReleaseLock:g,isLockClaimed:_}},[c,h,f,p,g,_]),R=0;R<o.length;R++)o[R](A)}var tq=function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}};function Al(t){return t.current||oe(),t.current}function nq(t){var e=t.contextId,r=t.setCallbacks,i=t.sensors,s=t.nonce,a=t.dragHandleUsageInstructions,o=L.useRef(null),l=yP(t),u=_e(function(){return tq(l.current)},[l]),c=h8(e),h=g8({contextId:e,text:a}),f=s8(e,s),p=_e(function(y){Al(o).dispatch(y)},[]),g=$e(function(){return CE({publishWhileDragging:GH,updateDroppableScroll:YH,updateDroppableIsEnabled:XH,updateDroppableIsCombineEnabled:QH,collectionStarting:KH},p)},[p]),_=u8(),A=$e(function(){return jW(_,g)},[_,g]),R=$e(function(){return e8(xe({scrollWindow:VW,scrollDroppable:A.scrollDroppable},CE({move:sP},p)))},[A.scrollDroppable,p]),E=o8(e),b=$e(function(){return NW({announce:c,autoScroller:R,dimensionMarshal:A,focusMarshal:E,getResponders:u,styleMarshal:f})},[c,R,A,E,u,f]);o.current=b;var T=_e(function(){var y=Al(o),w=y.getState();w.phase!=="IDLE"&&y.dispatch(B_())},[]),D=_e(function(){var y=Al(o).getState();return y.isDragging||y.phase==="DROP_ANIMATING"},[]),U=$e(function(){return{isDragging:D,tryAbort:T}},[D,T]);r(U);var j=_e(function(y){return fP(Al(o).getState(),y)},[]),P=_e(function(){return Hs(Al(o).getState())},[]),I=$e(function(){return{marshal:A,focus:E,contextId:e,canLift:j,isMovementAllowed:P,dragHandleUsageInstructionsId:h,registry:_}},[e,A,h,E,j,P,_]);return eq({contextId:e,store:b,registry:_,customSensors:i,enableDefaultSensors:t.enableDefaultSensors!==!1}),L.useEffect(function(){return T},[T]),Re.createElement(dp.Provider,{value:I},Re.createElement(Tz,{context:Y_,store:b},t.children))}var rq=0;function iq(){return $e(function(){return""+rq++},[])}function sq(t){var e=iq(),r=t.dragHandleUsageInstructions||Wd.dragHandleUsageInstructions;return Re.createElement(L9,null,function(i){return Re.createElement(nq,{nonce:t.nonce,contextId:e,setCallbacks:i,dragHandleUsageInstructions:r,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd},t.children)})}var SP=function(e){return function(r){return e===r}},aq=SP("scroll"),oq=SP("auto"),aT=function(e,r){return r(e.overflowX)||r(e.overflowY)},lq=function(e){var r=window.getComputedStyle(e),i={overflowX:r.overflowX,overflowY:r.overflowY};return aT(i,aq)||aT(i,oq)},uq=function(){return!1},cq=function t(e){return e==null?null:e===document.body?uq()?e:null:e===document.documentElement?null:lq(e)?e:t(e.parentElement)},Sv=function(t){return{x:t.scrollLeft,y:t.scrollTop}},dq=function t(e){if(!e)return!1;var r=window.getComputedStyle(e);return r.position==="fixed"?!0:t(e.parentElement)},hq=function(t){var e=cq(t),r=dq(t);return{closestScrollable:e,isFixedOnPage:r}},fq=function(t){var e=t.descriptor,r=t.isEnabled,i=t.isCombineEnabled,s=t.isFixedOnPage,a=t.direction,o=t.client,l=t.page,u=t.closest,c=function(){if(!u)return null;var g=u.scrollSize,_=u.client,A=cP({scrollHeight:g.scrollHeight,scrollWidth:g.scrollWidth,height:_.paddingBox.height,width:_.paddingBox.width});return{pageMarginBox:u.page.marginBox,frameClient:_,scrollSize:g,shouldClipSubject:u.shouldClipSubject,scroll:{initial:u.scroll,current:u.scroll,max:A,diff:{value:zt,displacement:zt}}}}(),h=a==="vertical"?O_:HA,f=Po({page:l,withPlaceholder:null,axis:h,frame:c}),p={descriptor:e,isCombineEnabled:i,isFixedOnPage:s,axis:h,isEnabled:r,client:o,page:l,frame:c,subject:f};return p},pq=function(e,r){var i=MA(e);if(!r||e!==r)return i;var s=i.paddingBox.top-r.scrollTop,a=i.paddingBox.left-r.scrollLeft,o=s+r.scrollHeight,l=a+r.scrollWidth,u={top:s,right:l,bottom:o,left:a},c=R_(u,i.border),h=D_({borderBox:c,margin:i.margin,border:i.border,padding:i.padding});return h},mq=function(t){var e=t.ref,r=t.descriptor,i=t.env,s=t.windowScroll,a=t.direction,o=t.isDropDisabled,l=t.isCombineEnabled,u=t.shouldClipSubject,c=i.closestScrollable,h=pq(e,c),f=Wh(h,s),p=function(){if(!c)return null;var _=MA(c),A={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:_,page:Wh(_,s),scroll:Sv(c),scrollSize:A,shouldClipSubject:u}}(),g=fq({descriptor:r,isEnabled:!o,isCombineEnabled:l,isFixedOnPage:i.isFixedOnPage,direction:a,client:h,page:f,closest:p});return g},gq={passive:!1},vq={passive:!0},oT=function(t){return t.shouldPublishImmediately?gq:vq};function Qh(t){var e=L.useContext(t);return e||oe(),e}var vd=function(e){return e&&e.env.closestScrollable||null};function yq(t){var e=L.useRef(null),r=Qh(dp),i=X_("droppable"),s=r.registry,a=r.marshal,o=yP(t),l=$e(function(){return{id:t.droppableId,type:t.type,mode:t.mode}},[t.droppableId,t.mode,t.type]),u=L.useRef(l),c=$e(function(){return $t(function(D,U){e.current||oe();var j={x:D,y:U};a.updateDroppableScroll(l.id,j)})},[l.id,a]),h=_e(function(){var D=e.current;return!D||!D.env.closestScrollable?zt:Sv(D.env.closestScrollable)},[]),f=_e(function(){var D=h();c(D.x,D.y)},[h,c]),p=$e(function(){return ju(f)},[f]),g=_e(function(){var D=e.current,U=vd(D);D&&U||oe();var j=D.scrollOptions;if(j.shouldPublishImmediately){f();return}p()},[p,f]),_=_e(function(D,U){e.current&&oe();var j=o.current,P=j.getDroppableRef();P||oe();var I=hq(P),y={ref:P,descriptor:l,env:I,scrollOptions:U};e.current=y;var w=mq({ref:P,descriptor:l,env:I,windowScroll:D,direction:j.direction,isDropDisabled:j.isDropDisabled,isCombineEnabled:j.isCombineEnabled,shouldClipSubject:!j.ignoreContainerClipping}),S=I.closestScrollable;return S&&(S.setAttribute(nT.contextId,r.contextId),S.addEventListener("scroll",g,oT(y.scrollOptions))),w},[r.contextId,l,g,o]),A=_e(function(){var D=e.current,U=vd(D);return D&&U||oe(),Sv(U)},[]),R=_e(function(){var D=e.current;D||oe();var U=vd(D);e.current=null,U&&(p.cancel(),U.removeAttribute(nT.contextId),U.removeEventListener("scroll",g,oT(D.scrollOptions)))},[g,p]),E=_e(function(D){var U=e.current;U||oe();var j=vd(U);j||oe(),j.scrollTop+=D.y,j.scrollLeft+=D.x},[]),b=$e(function(){return{getDimensionAndWatchScroll:_,getScrollWhileDragging:A,dragStopped:R,scroll:E}},[R,_,A,E]),T=$e(function(){return{uniqueId:i,descriptor:l,callbacks:b}},[b,l,i]);Kn(function(){return u.current=T.descriptor,s.droppable.register(T),function(){e.current&&R(),s.droppable.unregister(T)}},[b,l,R,T,a,s.droppable]),Kn(function(){e.current&&a.updateDroppableIsEnabled(u.current.id,!t.isDropDisabled)},[t.isDropDisabled,a]),Kn(function(){e.current&&a.updateDroppableIsCombineEnabled(u.current.id,t.isCombineEnabled)},[t.isCombineEnabled,a])}function Nm(){}var lT={width:0,height:0,margin:B9},_q=function(e){var r=e.isAnimatingOpenOnMount,i=e.placeholder,s=e.animate;return r||s==="close"?lT:{height:i.client.borderBox.height,width:i.client.borderBox.width,margin:i.client.margin}},wq=function(e){var r=e.isAnimatingOpenOnMount,i=e.placeholder,s=e.animate,a=_q({isAnimatingOpenOnMount:r,placeholder:i,animate:s});return{display:i.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:s!=="none"?au.placeholder:null}};function bq(t){var e=L.useRef(null),r=_e(function(){e.current&&(clearTimeout(e.current),e.current=null)},[]),i=t.animate,s=t.onTransitionEnd,a=t.onClose,o=t.contextId,l=L.useState(t.animate==="open"),u=l[0],c=l[1];L.useEffect(function(){return u?i!=="open"?(r(),c(!1),Nm):e.current?Nm:(e.current=setTimeout(function(){e.current=null,c(!1)}),r):Nm},[i,u,r]);var h=_e(function(p){p.propertyName==="height"&&(s(),i==="close"&&a())},[i,a,s]),f=wq({isAnimatingOpenOnMount:u,animate:t.animate,placeholder:t.placeholder});return Re.createElement(t.placeholder.tagName,{style:f,"data-rbd-placeholder-context-id":o,onTransitionEnd:h,ref:t.innerRef})}var xq=Re.memo(bq),J_=Re.createContext(null),Eq=function(t){fA(e,t);function e(){for(var i,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return i=t.call.apply(t,[this].concat(a))||this,i.state={isVisible:!!i.props.on,data:i.props.on,animate:i.props.shouldAnimate&&i.props.on?"open":"none"},i.onClose=function(){i.state.animate==="close"&&i.setState({isVisible:!1})},i}e.getDerivedStateFromProps=function(s,a){return s.shouldAnimate?s.on?{isVisible:!0,data:s.on,animate:"open"}:a.isVisible?{isVisible:!0,data:a.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!s.on,data:s.on,animate:"none"}};var r=e.prototype;return r.render=function(){if(!this.state.isVisible)return null;var s={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(s)},e}(Re.PureComponent),uT={dragging:5e3,dropAnimating:4500},Tq=function(e,r){return r?au.drop(r.duration):e?au.snap:au.fluid},Sq=function(e,r){return e?r?Bu.opacity.drop:Bu.opacity.combining:null},Iq=function(e){return e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP"};function kq(t){var e=t.dimension,r=e.client,i=t.offset,s=t.combineWith,a=t.dropping,o=!!s,l=Iq(t),u=!!a,c=u?xv.drop(i,o):xv.moveTo(i),h={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Tq(l,a),transform:c,opacity:Sq(o,u),zIndex:u?uT.dropAnimating:uT.dragging,pointerEvents:"none"};return h}function Cq(t){return{transform:xv.moveTo(t.offset),transition:t.shouldAnimateDisplacement?null:"none"}}function Aq(t){return t.type==="DRAGGING"?kq(t):Cq(t)}function Pq(t,e,r){r===void 0&&(r=zt);var i=window.getComputedStyle(e),s=e.getBoundingClientRect(),a=NA(s,i),o=Wh(a,r),l={client:a,tagName:e.tagName.toLowerCase(),display:i.display},u={x:a.marginBox.width,y:a.marginBox.height},c={descriptor:t,placeholder:l,displaceBy:u,client:a,page:o};return c}function Rq(t){var e=X_("draggable"),r=t.descriptor,i=t.registry,s=t.getDraggableRef,a=t.canDragInteractiveElements,o=t.shouldRespectForcePress,l=t.isEnabled,u=$e(function(){return{canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:l}},[a,l,o]),c=_e(function(g){var _=s();return _||oe(),Pq(r,_,g)},[r,s]),h=$e(function(){return{uniqueId:e,descriptor:r,options:u,getDimension:c}},[r,c,u,e]),f=L.useRef(h),p=L.useRef(!0);Kn(function(){return i.draggable.register(f.current),function(){return i.draggable.unregister(f.current)}},[i.draggable]),Kn(function(){if(p.current){p.current=!1;return}var g=f.current;f.current=h,i.draggable.update(h,g)},[h,i.draggable])}function Dq(t){t.preventDefault()}function Nq(t){var e=L.useRef(null),r=_e(function(y){e.current=y},[]),i=_e(function(){return e.current},[]),s=Qh(dp),a=s.contextId,o=s.dragHandleUsageInstructionsId,l=s.registry,u=Qh(J_),c=u.type,h=u.droppableId,f=$e(function(){return{id:t.draggableId,index:t.index,type:c,droppableId:h}},[t.draggableId,t.index,c,h]),p=t.children,g=t.draggableId,_=t.isEnabled,A=t.shouldRespectForcePress,R=t.canDragInteractiveElements,E=t.isClone,b=t.mapped,T=t.dropAnimationFinished;if(!E){var D=$e(function(){return{descriptor:f,registry:l,getDraggableRef:i,canDragInteractiveElements:R,shouldRespectForcePress:A,isEnabled:_}},[f,l,i,R,A,_]);Rq(D)}var U=$e(function(){return _?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":g,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:Dq}:null},[a,o,g,_]),j=_e(function(y){b.type==="DRAGGING"&&b.dropping&&y.propertyName==="transform"&&T()},[T,b]),P=$e(function(){var y=Aq(b),w=b.type==="DRAGGING"&&b.dropping?j:null,S={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":g,style:y,onTransitionEnd:w},dragHandleProps:U};return S},[a,U,g,b,j,r]),I=$e(function(){return{draggableId:f.id,type:f.type,source:{index:f.index,droppableId:f.droppableId}}},[f.droppableId,f.id,f.index,f.type]);return p(P,b.snapshot,I)}var IP=function(t,e){return t===e},kP=function(t){var e=t.combine,r=t.destination;return r?r.droppableId:e?e.droppableId:null},Mq=function(e){return e.combine?e.combine.draggableId:null},Lq=function(e){return e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null};function Oq(){var t=$t(function(s,a){return{x:s,y:a}}),e=$t(function(s,a,o,l,u){return{isDragging:!0,isClone:a,isDropAnimating:!!u,dropAnimation:u,mode:s,draggingOver:o,combineWith:l,combineTargetFor:null}}),r=$t(function(s,a,o,l,u,c,h){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:u,combineWith:c,mode:a,offset:s,dimension:o,forceShouldAnimate:h,snapshot:e(a,l,u,c,null)}}}),i=function(a,o){if(a.isDragging){if(a.critical.draggable.id!==o.draggableId)return null;var l=a.current.client.offset,u=a.dimensions.draggables[o.draggableId],c=Gn(a.impact),h=Lq(a.impact),f=a.forceShouldAnimate;return r(t(l.x,l.y),a.movementMode,u,o.isClone,c,h,f)}if(a.phase==="DROP_ANIMATING"){var p=a.completed;if(p.result.draggableId!==o.draggableId)return null;var g=o.isClone,_=a.dimensions.draggables[o.draggableId],A=p.result,R=A.mode,E=kP(A),b=Mq(A),T=a.dropDuration,D={duration:T,curve:z_.drop,moveTo:a.newHomeClientOffset,opacity:b?Bu.opacity.drop:null,scale:b?Bu.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:_,dropping:D,draggingOver:E,combineWith:b,mode:R,forceShouldAnimate:null,snapshot:e(R,g,E,b,D)}}}return null};return i}function CP(t){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}var jq={mapped:{type:"SECONDARY",offset:zt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:CP(null)}};function Vq(){var t=$t(function(o,l){return{x:o,y:l}}),e=$t(CP),r=$t(function(o,l,u){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:u,snapshot:e(l)}}}),i=function(l){return l?r(zt,l,!0):null},s=function(l,u,c,h){var f=c.displaced.visible[l],p=!!(h.inVirtualList&&h.effected[l]),g=op(c),_=g&&g.draggableId===l?u:null;if(!f){if(!p)return i(_);if(c.displaced.invisible[l])return null;var A=Ko(h.displacedBy.point),R=t(A.x,A.y);return r(R,_,!0)}if(p)return i(_);var E=c.displacedBy.point,b=t(E.x,E.y);return r(b,_,f.shouldAnimate)},a=function(l,u){if(l.isDragging)return l.critical.draggable.id===u.draggableId?null:s(u.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var c=l.completed;return c.result.draggableId===u.draggableId?null:s(u.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null};return a}var Fq=function(){var e=Oq(),r=Vq(),i=function(a,o){return e(a,o)||r(a,o)||jq};return i},Uq={dropAnimationFinished:oP},Bq=RA(Fq,Uq,null,{context:Y_,pure:!0,areStatePropsEqual:IP})(Nq);function AP(t){var e=Qh(J_),r=e.isUsingCloneFor;return r===t.draggableId&&!t.isClone?null:Re.createElement(Bq,t)}function $q(t){var e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,r=!!t.disableInteractiveElementBlocking,i=!!t.shouldRespectForcePress;return Re.createElement(AP,xe({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:r,shouldRespectForcePress:i}))}function zq(t){var e=L.useContext(dp);e||oe();var r=e.contextId,i=e.isMovementAllowed,s=L.useRef(null),a=L.useRef(null),o=t.children,l=t.droppableId,u=t.type,c=t.mode,h=t.direction,f=t.ignoreContainerClipping,p=t.isDropDisabled,g=t.isCombineEnabled,_=t.snapshot,A=t.useClone,R=t.updateViewportMaxScroll,E=t.getContainerForClone,b=_e(function(){return s.current},[]),T=_e(function(S){s.current=S},[]);_e(function(){return a.current},[]);var D=_e(function(S){a.current=S},[]),U=_e(function(){i()&&R({maxScroll:hP()})},[i,R]);yq({droppableId:l,type:u,mode:c,direction:h,isDropDisabled:p,isCombineEnabled:g,ignoreContainerClipping:f,getDroppableRef:b});var j=Re.createElement(Eq,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},function(S){var M=S.onClose,N=S.data,G=S.animate;return Re.createElement(xq,{placeholder:N,onClose:M,innerRef:D,animate:G,contextId:r,onTransitionEnd:U})}),P=$e(function(){return{innerRef:T,placeholder:j,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":r}}},[r,l,j,T]),I=A?A.dragging.draggableId:null,y=$e(function(){return{droppableId:l,type:u,isUsingCloneFor:I}},[l,I,u]);function w(){if(!A)return null;var S=A.dragging,M=A.render,N=Re.createElement(AP,{draggableId:S.draggableId,index:S.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(G,ee){return M(G,ee,S)});return wN.createPortal(N,E())}return Re.createElement(J_.Provider,{value:y},o(P,_),w())}var Mm=function(e,r){return e===r.droppable.type},cT=function(e,r){return r.draggables[e.draggable.id]},Hq=function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=xe({},e,{shouldAnimatePlaceholder:!1}),i=$t(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),s=$t(function(o,l,u,c,h,f){var p=h.descriptor.id,g=h.descriptor.droppableId===o;if(g){var _=f?{render:f,dragging:i(h.descriptor)}:null,A={isDraggingOver:u,draggingOverWith:u?p:null,draggingFromThisWith:p,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!1,snapshot:A,useClone:_}}if(!l)return r;if(!c)return e;var R={isDraggingOver:u,draggingOverWith:p,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!0,snapshot:R,useClone:null}}),a=function(l,u){var c=u.droppableId,h=u.type,f=!u.isDropDisabled,p=u.renderClone;if(l.isDragging){var g=l.critical;if(!Mm(h,g))return r;var _=cT(g,l.dimensions),A=Gn(l.impact)===c;return s(c,f,A,A,_,p)}if(l.phase==="DROP_ANIMATING"){var R=l.completed;if(!Mm(h,R.critical))return r;var E=cT(R.critical,l.dimensions);return s(c,f,kP(R.result)===c,Gn(R.impact)===c,E,p)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var b=l.completed;if(!Mm(h,b.critical))return r;var T=Gn(b.impact)===c,D=!!(b.impact.at&&b.impact.at.type==="COMBINE"),U=b.critical.droppable.id===c;return T?D?e:r:U?e:r}return r};return a},Wq={updateViewportMaxScroll:ZH};function qq(){return document.body||oe(),document.body}var Gq={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:qq},PP=RA(Hq,Wq,null,{context:Y_,pure:!0,areStatePropsEqual:IP})(zq);PP.defaultProps=Gq;function Kq(){const[t]=Ay(),[e,r]=L.useState([]),[i,s]=L.useState(0),[a,o]=L.useState(!0),[l,u]=L.useState(null),[c,h]=L.useState(!1),[f,p]=L.useState(!1),[g,_]=L.useState("");L.useRef(null),L.useRef(null),L.useEffect(()=>{const D=t.get("keywords");D&&searchAndBuildPlaylist(D)},[t]);const A=D=>{const U=D==null?void 0:D.match(/embed\/([a-zA-Z0-9_-]+)/);return U?U[1]:null},R=D=>{if(!D.destination)return;const U=Array.from(e),[j]=U.splice(D.source.index,1);U.splice(D.destination.index,0,j);const P=U.map((I,y)=>({...I,playlistOrder:y}));r(P),E(P)},E=async D=>{try{const U=t.get("keywords"),j=To(Rt,"keywordPlaylists",U);await tv(j,{items:D.map(P=>({documentName:P.documentName,playlistOrder:P.playlistOrder}))})}catch(U){console.error("Error saving playlist order:",U)}},b=()=>{p(!0),_(document.getElementById("overallSummaryContent").innerText)},T=async()=>{try{const D=t.get("keywords"),U=To(Rt,"keywordSummaries",D);await tv(U,{summary:g}),document.getElementById("overallSummaryContent").innerText=g,p(!1)}catch(D){console.error("Error saving description:",D)}};return m.jsx("div",{className:"container mx-auto px-4 py-8",children:m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[m.jsx("div",{className:"lg:col-span-1",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Playlist Info"}),m.jsxs("p",{id:"totalDuration",children:["Total Duration: ",formatTime(getTotalPlaylistDuration(e))]})]}),m.jsxs("div",{className:"mb-4",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("h3",{className:"text-xl font-semibold",children:"Playlist Summary"}),m.jsx("button",{onClick:b,className:"text-blue-500 hover:text-blue-700",children:" Edit"})]}),f?m.jsxs("div",{className:"space-y-2",children:[m.jsx("textarea",{value:g,onChange:D=>_(D.target.value),className:"w-full h-40 p-2 border rounded"}),m.jsxs("div",{className:"flex justify-end space-x-2",children:[m.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),m.jsx("button",{onClick:T,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"})]})]}):m.jsx("p",{id:"overallSummaryContent",className:"text-gray-700"})]})]})}),m.jsx("div",{className:"lg:col-span-2",children:m.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:currentVideo&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("h2",{className:"text-2xl font-bold",children:currentVideo.name}),m.jsx("p",{className:"text-gray-600",children:currentVideo.role})]}),m.jsx("div",{id:"player",className:"w-full aspect-video mb-4"}),m.jsx(sq,{onDragEnd:R,children:m.jsx(PP,{droppableId:"timeline",direction:"horizontal",children:D=>m.jsx("div",{ref:D.innerRef,...D.droppableProps,className:"relative h-20 bg-gray-100 rounded mb-4",children:m.jsxs("div",{className:"absolute inset-0 flex",children:[e.map((U,j)=>m.jsx($q,{draggableId:`${U.documentName}-${j}`,index:j,children:(P,I)=>m.jsx("div",{ref:P.innerRef,...P.draggableProps,...P.dragHandleProps,className:`relative h-full cursor-move transition-colors
                                    ${j===i?"bg-blue-500":"bg-gray-300"}
                                    ${I.isDragging?"ring-2 ring-blue-400":""}`,style:{...P.draggableProps.style,width:`${RP(U)/Yq(e)*100}%`},children:m.jsx("img",{src:`https://img.youtube.com/vi/${A(U.videoEmbedLink)}/default.jpg`,alt:"Thumbnail",className:"absolute inset-0 w-full h-full object-cover opacity-50"})})},`${U.documentName}-${j}`)),D.placeholder]})})})}),m.jsxs("div",{className:"flex justify-center space-x-4",children:[m.jsx("button",{onClick:handleSkipPrevious,disabled:i===0,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:m.jsx("span",{className:"material-icons",children:"skip_previous"})}),m.jsx("button",{onClick:handlePlayPause,className:"p-2 rounded-full bg-blue-500 hover:bg-blue-600 text-white",children:m.jsx("span",{id:"playPauseIcon",className:"material-icons",children:"pause"})}),m.jsx("button",{onClick:handleSkipNext,disabled:i===e.length-1,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:m.jsx("span",{className:"material-icons",children:"skip_next"})})]}),m.jsxs("div",{className:"mt-6",children:[m.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Summary"}),m.jsx("p",{className:"text-gray-700",children:currentVideo.summary})]})]})})})]})})}function RP(t){const e=convertTimestampToSeconds(extractStartTimestamp(t.timestamp));return convertTimestampToSeconds(extractStartTimestamp(t.timestamp.split(" - ")[1]))-e}function Yq(t){return t.reduce((e,r)=>e+RP(r),0)}function Xq(){const[t,e]=L.useState(!0),[r,i]=L.useState(null),[s,a]=L.useState([]),[o,l]=L.useState(null),[u,c]=L.useState(""),h=Qr();L.useEffect(()=>{f()},[]);const f=async()=>{try{e(!0);const T={},D=await Ln(pn(Rt,"interviewSummaries"));for(const j of D.docs){const P=j.id,I=pn(Rt,"interviewSummaries",P,"subSummaries");(await Ln(I)).forEach(w=>{const S=w.data();S.keywords&&S.keywords.split(",").map(N=>N.trim().toLowerCase()).forEach(N=>{T[N]||(T[N]={count:0,summaries:[]}),T[N].count++,T[N].summaries.push(S)})})}const U=Object.entries(T).map(([j,P])=>{let I=0;return P.summaries.forEach(y=>{if(y.timestamp&&y.timestamp.includes(" - ")){const w=p(y.timestamp),S=p(y.timestamp.split(" - ")[1]);I+=Math.max(0,g(S)-g(w))}}),{keyword:j,count:P.count,totalLengthSeconds:I,summaries:P.summaries}}).sort((j,P)=>P.count-j.count);a(U),e(!1)}catch(T){console.error("Error fetching keywords:",T),i("Failed to load keyword data"),e(!1)}},p=T=>{const D=T.match(/(?:\[)?(\d{1,2}:\d{2}(?::\d{2})?)/);return D?D[1]:"00:00"},g=T=>{const D=T.split(":").map(Number);return D.length===2?D[0]*60+D[1]:D.length===3?D[0]*3600+D[1]*60+D[2]:0},_=T=>{const D=Math.floor(T/3600),U=Math.floor(T%3600/60),j=T%60;return D>0?`${D}:${U.toString().padStart(2,"0")}:${j.toString().padStart(2,"0")}`:`${U}:${j.toString().padStart(2,"0")}`},A=T=>{l(o===T?null:T)},R=T=>{h(`/playlist-builder?keywords=${encodeURIComponent(T)}`)},E=T=>{h(`/playlist-editor?keywords=${encodeURIComponent(T)}`)},b=u?s.filter(T=>T.keyword.toLowerCase().includes(u.toLowerCase())):s;return t?m.jsxs("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:[m.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),m.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):r?m.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:m.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg shadow-sm",children:r})}):m.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Keyword Directory"}),m.jsx("p",{className:"text-base text-gray-600 max-w-3xl leading-relaxed",children:"Browse all keywords from the interview collection. Click on any keyword to see details, or create a custom playlist based on specific keywords."})]}),m.jsx("div",{className:"mb-6",children:m.jsxs("div",{className:"max-w-md",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter Keywords"}),m.jsx("input",{type:"text",placeholder:"Type to filter...",value:u,onChange:T=>c(T.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})}),m.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"flex flex-col items-center p-4 bg-blue-50 rounded-lg",children:[m.jsx("div",{className:"text-2xl font-bold text-blue-800 mb-2",children:s.length}),m.jsx("div",{className:"text-sm text-gray-500",children:"Total Keywords"})]}),m.jsxs("div",{className:"flex flex-col items-center p-4 bg-green-50 rounded-lg",children:[m.jsx("div",{className:"text-2xl font-bold text-green-800 mb-2",children:s.reduce((T,D)=>T+D.count,0)}),m.jsx("div",{className:"text-sm text-gray-500",children:"Total Clips"})]}),m.jsxs("div",{className:"flex flex-col items-center p-4 bg-purple-50 rounded-lg",children:[m.jsx("div",{className:"text-2xl font-bold text-purple-800 mb-2",children:_(s.reduce((T,D)=>T+D.totalLengthSeconds,0))}),m.jsx("div",{className:"text-sm text-gray-500",children:"Total Content Duration"})]})]})}),m.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:b.length===0?m.jsx("div",{className:"p-6 text-center text-gray-500",children:"No keywords found matching your search."}):m.jsx("ul",{className:"list-none m-0 p-0 border-t border-gray-100",children:b.map(T=>m.jsx("li",{className:"border-b border-gray-100 transition-colors hover:bg-gray-50",children:m.jsxs("div",{className:"p-6",children:[m.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-blue-600 mb-2 cursor-pointer transition-colors hover:text-blue-800",onClick:()=>A(T.keyword),children:T.keyword}),m.jsxs("div",{className:"my-2",children:[m.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-blue-100 text-blue-800 text-xs font-medium mr-2",children:[T.count," clips"]}),m.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-green-100 text-green-800 text-xs font-medium",children:[_(T.totalLengthSeconds)," total length"]})]})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs("button",{onClick:()=>R(T.keyword),className:"inline-flex items-center px-3 py-2 border-0 rounded-md bg-blue-600 text-white text-sm font-medium cursor-pointer transition-colors hover:bg-blue-700",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"mr-1.5",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Play"]}),m.jsxs("button",{onClick:()=>E(T.keyword),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md bg-white text-gray-600 text-sm font-medium cursor-pointer transition-colors hover:bg-gray-50",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"mr-1.5",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]})]})]}),o===T.keyword&&m.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[m.jsx("h4",{className:"text-base font-medium text-gray-600 mb-4",children:"Recent Clips:"}),m.jsx("div",{className:"flex flex-col gap-4",children:T.summaries.slice(0,3).map((D,U)=>m.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("span",{className:"text-xs text-gray-500",children:D.timestamp}),D.documentName&&m.jsx("span",{className:"text-xs font-medium text-blue-600",children:D.documentName})]}),m.jsxs("p",{className:"mt-2 text-gray-600 text-sm leading-relaxed",children:[D.summary.substring(0,200),D.summary.length>200?"...":""]})]},U))}),T.summaries.length>3&&m.jsx("div",{className:"mt-4 text-right",children:m.jsxs("button",{onClick:()=>R(T.keyword),className:"text-blue-600 text-sm font-medium bg-transparent border-0 cursor-pointer transition-colors hover:text-blue-800",children:["View all ",T.summaries.length," clips "]})})]})]})},T.keyword))})})]})}function Qq(){const[t,e]=L.useState(!1),[r,i]=L.useState(null),[s,a]=L.useState(null),o=L.useRef(null),[l,u]=L.useState(null),[c,h]=L.useState(1),f=async(E,b)=>{try{e(!0),i(null);const T=prompt("Enter the name of the document for this interview:");if(!T){i("Document name is required");return}const D=await p(E),U=await g(D);await A(T.trim(),U),a(U),h(2)}catch(T){console.error("Error processing files:",T),i("Failed to process transcript")}finally{e(!1)}},p=E=>new Promise((b,T)=>{const D=new FileReader;D.onload=U=>b(U.target.result),D.onerror=U=>T(U),D.readAsText(E)});console.log(void 0);const g=async(E,b=3,T=2e3)=>{try{const j=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer undefined"},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:`
        You are an assistant that processes interview transcripts into structured summaries with timestamps and keywords.
        
        Always output the content in the following strict format:
        Overall Summary:
        [Provide a concise overall summary here.]
        
        Key Points:
        1. Title: [First key topic]
           Timestamp: [Start time - End time]
           Keywords: [Comma-separated list of keywords]
           Summary: [Provide a short summary of the first key topic.]
      `},{role:"user",content:`Here is a transcript:
${E}

Generate an overall summary, key points with timestamps, and keywords.`}],max_tokens:1e3})});if(!j.ok){if(j.status===429&&b>0)return console.warn(`Rate limit exceeded. Retrying in ${T}ms...`),await new Promise(I=>setTimeout(I,T)),g(E,b-1,T*2);throw new Error(`API request failed: ${j.statusText}`)}const P=await j.json();return _(P.choices[0].message.content)}catch(D){throw console.error("Error communicating with OpenAI API:",D),D}},_=E=>{const b=E.match(/Overall Summary:\s*(.+)/i),T=b?b[1].trim():"No summary found.",D=[],U=/\d+\.\s*Title:\s*(.+?)\s*Timestamp:\s*(.+?)\s*Keywords:\s*(.+?)\s*Summary:\s*(.+?)(?=\d+\.|$)/gs;let j;for(;(j=U.exec(E))!==null;)D.push({topic:j[1].trim(),timestamp:j[2].trim(),keywords:j[3].trim(),summary:j[4].trim()});return{overallSummary:T,keyPoints:D}},A=async(E,b)=>{try{const T=To(pn(Rt,"interviewSummaries"),E);await _x(T,{documentName:E,mainSummary:b.overallSummary,createdAt:new Date});for(const D of b.keyPoints){const U=D.topic.replace(/[^a-zA-Z0-9-_]/g,"_"),j=To(pn(Rt,"interviewSummaries",E,"subSummaries"),U);await _x(j,{topic:D.topic,timestamp:D.timestamp,keywords:D.keywords,summary:D.summary})}}catch(T){throw console.error("Error storing processed transcript:",T),T}},R=E=>{if(!o.current)return;const b=E.split(" - ")[0],T=b.split(":").map(Number);if(T.length!==2||T.some(isNaN)){console.error("Invalid timestamp format:",b);return}const D=T[0],U=T[1],j=D*60+U;isFinite(j)&&(o.current.currentTime=j,o.current.play())};return m.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("h1",{className:"text-2xl font-bold mb-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text",children:"Transcript Summarizer"}),m.jsx("p",{className:"text-base leading-relaxed text-gray-600 max-w-3xl",children:"Upload interview transcripts to generate AI-powered summaries with timestamps and keywords"})]}),m.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[c===1&&m.jsxs("div",{className:"p-8",children:[m.jsxs("div",{className:"mb-8",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-900 flex items-center",children:[m.jsx(fC,{className:"mr-2 text-blue-600",size:20}),"Upload Interview Files"]}),m.jsxs("div",{className:"flex flex-col gap-6",children:[m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Transcript File (.txt)"}),m.jsx("div",{className:"flex items-center justify-center w-full",children:m.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer bg-white hover:bg-gray-100 transition-colors p-4",children:[m.jsxs("div",{className:"flex flex-col items-center justify-center",children:[m.jsx(wx,{className:"w-10 h-10 mb-3 text-gray-400"}),m.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[m.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),m.jsx("p",{className:"text-xs text-gray-500",children:"Upload your interview transcript file (TXT)"})]}),m.jsx("input",{type:"file",accept:".txt",className:"hidden",onChange:E=>{var b;return((b=E.target.files)==null?void 0:b[0])&&f(E.target.files[0],null)}})]})})]}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Audio File (optional)"}),m.jsx("div",{className:"flex items-center justify-center w-full",children:m.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer bg-white hover:bg-gray-100 transition-colors p-4",children:[m.jsxs("div",{className:"flex flex-col items-center justify-center",children:[m.jsx(wx,{className:"w-10 h-10 mb-3 text-gray-400"}),m.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[m.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),m.jsx("p",{className:"text-xs text-gray-500",children:"MP3, WAV, or other audio formats"})]}),m.jsx("input",{type:"file",accept:"audio/*",className:"hidden",onChange:E=>{var b;return((b=E.target.files)==null?void 0:b[0])&&u(URL.createObjectURL(E.target.files[0]))}})]})})]})]})]}),l&&m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[m.jsx("h3",{className:"text-base font-medium mb-3 text-gray-900",children:"Audio Preview"}),m.jsx("audio",{ref:o,src:l,controls:!0,className:"w-full"})]})]}),t&&m.jsxs("div",{className:"flex flex-col justify-center items-center py-20",children:[m.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-500 rounded-full animate-spin mb-4"}),m.jsx("p",{className:"text-gray-500 animate-pulse",children:"Processing transcript..."}),m.jsx("style",{children:`
              @keyframes spin {
                to { transform: rotate(360deg); }
              }
              @keyframes pulse {
                0%, 100% { opacity: 1; }
                50% { opacity: 0.5; }
              }
            `})]}),r&&m.jsx("div",{className:"m-8 bg-red-100 border border-red-300 text-red-700 px-6 py-4 rounded-lg",children:m.jsxs("div",{className:"flex",children:[m.jsx("svg",{className:"w-6 h-6 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),m.jsxs("div",{children:[m.jsx("p",{className:"font-medium",children:"Error"}),m.jsx("p",{className:"text-sm",children:r})]})]})}),c===2&&s&&m.jsxs("div",{children:[l&&m.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6",children:m.jsx("audio",{ref:o,src:l,controls:!0,className:"w-full"})}),m.jsxs("div",{className:"p-8 border-b border-gray-200",children:[m.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Overall Summary"}),m.jsx("p",{className:"text-gray-600 leading-relaxed text-base",children:s.overallSummary})]}),m.jsxs("div",{className:"p-8",children:[m.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:"Key Points"}),m.jsx("div",{className:"flex flex-col gap-6",children:s.keyPoints.map((E,b)=>m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 transition-all duration-300 shadow-sm hover:shadow-md",children:[m.jsxs("div",{className:"flex items-start mb-4",children:[m.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 mr-3 flex-shrink-0 font-semibold",children:b+1}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:E.topic})]}),m.jsxs("div",{className:"flex items-center mb-4 text-blue-600 hover:text-blue-800 cursor-pointer transition-colors",onClick:()=>R(E.timestamp),children:[m.jsx(hC,{size:16,className:"mr-2"}),m.jsx("span",{className:"font-medium",children:E.timestamp})]}),m.jsx("div",{className:"mb-4",children:m.jsxs("div",{className:"flex items-start mb-2",children:[m.jsx(B3,{size:16,className:"mr-2 text-gray-500 mt-0.5"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:E.keywords.split(",").map((T,D)=>m.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-xs rounded-full font-medium",children:T.trim()},D))})]})}),m.jsx("p",{className:"text-gray-600 leading-relaxed text-sm",children:E.summary})]},b))})]}),m.jsx("div",{className:"p-8 border-t border-gray-200 flex justify-center",children:m.jsxs("button",{onClick:()=>{h(1),a(null),u(null),i(null)},className:"flex items-center px-6 py-3 bg-gray-100 text-gray-600 font-medium rounded-lg hover:bg-gray-200 transition-colors",children:[m.jsx(y3,{className:"w-5 h-5 mr-2 transform rotate-180"}),"Process Another Transcript"]})})]})]})]})}function Jq(){const[t,e]=L.useState(""),r=Qr(),i=s=>{s.preventDefault(),t.trim()?r(`/playlist-builder?keywords=${encodeURIComponent(t)}`):alert("Please enter at least one keyword.")};return m.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans flex flex-col items-center justify-center",children:[m.jsxs("div",{className:"w-full max-w-3xl text-center mb-16",children:[m.jsx("h1",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text",children:"Search Interviews"}),m.jsx("p",{className:"text-base leading-relaxed text-gray-600 mb-10 max-w-xl mx-auto",children:"Enter keywords separated by commas to find relevant interviews and create custom playlists"}),m.jsx("form",{onSubmit:i,className:"w-full",children:m.jsxs("div",{className:"relative w-full",children:[m.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:m.jsx(pC,{className:"w-5 h-5 text-gray-500"})}),m.jsx("input",{type:"text",value:t,onChange:s=>e(s.target.value),placeholder:"civil rights, voting, education...",className:"w-full pl-12 pr-32 py-5 border border-gray-200 bg-white rounded-xl shadow-sm outline-none text-base text-gray-900 transition-all duration-300 focus:shadow-blue-300 focus:ring-2 focus:ring-blue-500"}),m.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-medium rounded-lg shadow-sm border-none cursor-pointer transition-all duration-300 hover:from-blue-700 hover:to-indigo-700 hover:shadow-md",children:"Search"})]})})]}),m.jsx("div",{className:"w-full max-w-3xl",children:m.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[m.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Popular Keywords"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:["civil rights","voting","education","segregation","protests","leadership","communities","legislation","equality","freedom"].map(s=>m.jsx("button",{onClick:()=>{e(s),r(`/playlist-builder?keywords=${encodeURIComponent(s)}`)},className:"px-4 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm border-none cursor-pointer transition-colors duration-200 hover:bg-blue-100 hover:text-blue-800",children:s},s))})]})})]})}function Zq(){const[t]=Ay(),e=t.get("documentName"),[r,i]=L.useState(!0),[s,a]=L.useState(null),[o,l]=L.useState(null),[u,c]=L.useState([]),[h,f]=L.useState(null),[p,g]=L.useState(!1),[_,A]=L.useState(!1),[R,E]=L.useState(null),b=L.useRef(null),T=y=>{if(!y)return null;const w=y.match(/(?:embed\/|watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return w?w[1]:null},D=y=>{if(!y)return 0;const S=y.split(" - ")[0].replace(/[\[\]]/g,"").trim().split(":").map(Number);return S.length===3?S[0]*3600+S[1]*60+S[2]:S.length===2?S[0]*60+S[1]:0},U=y=>Array.isArray(y)?y:typeof y=="string"?y.split(",").map(w=>w.trim()):[];L.useEffect(()=>{if(!e){a("Document name is missing"),i(!1);return}async function y(){try{i(!0);const w=To(Rt,"interviewSummaries",e),S=await a3(w);if(!S.exists()){a("Interview not found"),i(!1);return}const M=S.data();l(M);const N=pn(Rt,"interviewSummaries",e,"subSummaries"),G=await Ln(N),ee=[];G.forEach(ie=>{ee.push({id:ie.id,...ie.data()})}),ee.sort((ie,de)=>D(ie.timestamp)-D(de.timestamp)),c(ee),i(!1)}catch(w){console.error("Error fetching interview data:",w),a("Failed to load interview data"),i(!1)}}y()},[e]),L.useEffect(()=>{if(window.YT&&window.YT.Player){A(!0);return}const y=document.createElement("script");y.src="https://www.youtube.com/iframe_api",y.async=!0,y.onload=()=>{window.YT&&window.YT.Player&&A(!0)},document.body.appendChild(y),window.onYouTubeIframeAPIReady=()=>{A(!0)}},[]),L.useEffect(()=>{if(!_||!(o!=null&&o.videoEmbedLink)||!R)return;const y=T(o.videoEmbedLink);if(!y){console.error("Invalid YouTube video link");return}return b.current&&typeof b.current.destroy=="function"&&(b.current.destroy(),g(!1)),b.current=new window.YT.Player(R,{videoId:y,width:"100%",height:"100%",playerVars:{autoplay:0,controls:1,rel:0,modestbranding:1},events:{onReady:()=>{g(!0),console.log("Player is ready")},onError:w=>{console.error("YouTube player error:",w.data)}}}),()=>{b.current&&typeof b.current.destroy=="function"&&(b.current.destroy(),b.current=null)}},[_,o,R]);const j=y=>{console.log("Seeking to",y,"seconds"),b.current&&typeof b.current.seekTo=="function"&&(b.current.seekTo(y,!0),b.current.playVideo())},P=y=>{f(h===y?null:y)},I=({summary:y,index:w,isOpen:S})=>{const M=L.useRef(null),[N,G]=L.useState(0);L.useEffect(()=>{M.current&&G(M.current.scrollHeight)},[S,y]);const ee=D(y.timestamp),ie=U(y.keywords);return m.jsxs("div",{className:"accordion-item border-b border-gray-200 dark:border-gray-700",children:[m.jsxs("button",{onClick:()=>P(w),className:`w-full flex items-center justify-between p-4 text-left transition-colors ${S?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"text-gray-800 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700/30"}`,children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("span",{className:"w-6 h-6 bg-blue-100 dark:bg-blue-900/40 rounded-full flex items-center justify-center text-blue-700 dark:text-blue-300 font-bold mr-3",children:w+1}),m.jsx("span",{className:"font-bold",children:y.topic})]}),S?m.jsx(w3,{size:18}):m.jsx(g3,{size:18})]}),m.jsx("div",{style:{height:S?N:0,overflow:"hidden",transition:"height 0.3s ease"},children:m.jsxs("div",{ref:M,className:"p-4 bg-gray-50 dark:bg-gray-800",children:[m.jsxs("button",{onClick:de=>{de.stopPropagation(),j(ee)},className:`flex items-center mb-4 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors ${p?"cursor-pointer":"opacity-50 cursor-wait"}`,disabled:!p,children:[m.jsx(hC,{size:16,className:"mr-2"}),m.jsx("span",{className:"font-bold",children:y.timestamp?y.timestamp.split(" - ")[0].replace(/[\[\]]/g,"").trim():"Unknown time"})]}),ie.length>0&&m.jsx("div",{className:"mb-4 text-sm",children:m.jsx("span",{className:"font-bold",children:ie.map((de,q)=>m.jsxs("span",{children:[de,q<ie.length-1?", ":""]},q))})}),m.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:y.summary})]})})]})};return r?m.jsx("div",{className:"flex justify-center items-center h-64",children:m.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):s?m.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800/30 text-red-700 dark:text-red-300 px-6 py-4 rounded-xl",children:m.jsxs("p",{children:[m.jsx("strong",{children:"Error:"})," ",s]})}):m.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[m.jsxs("div",{className:"w-full relative bg-black",style:{height:"360px"},children:[m.jsx("div",{className:"absolute inset-0",ref:E}),!p&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 pointer-events-none",children:m.jsx("div",{className:"w-10 h-10 border-4 border-white/50 border-t-white rounded-full animate-spin"})})]}),m.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden",children:m.jsxs("div",{className:"p-6 border-t border-gray-100 dark:border-gray-700",children:[m.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800 dark:text-white",children:"Overview"}),m.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:(o==null?void 0:o.mainSummary)||"No summary available"})]})}),m.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden",children:[m.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700",children:m.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Interview Segments"})}),u.map((y,w)=>m.jsx(I,{summary:y,index:w,isOpen:h===w},y.id||w)),u.length===0&&m.jsx("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:"No segments available for this interview"})]})]})}function eG(){return m.jsxs(_2,{children:[m.jsx(Mr,{path:"/login",element:m.jsx(sz,{})}),m.jsx(Mr,{path:"/",element:m.jsx(js,{children:m.jsx(Os,{children:m.jsx(iz,{})})})}),m.jsx(Mr,{path:"/playlist-builder",element:m.jsx(js,{children:m.jsx(Os,{children:m.jsx(pz,{})})})}),m.jsx(Mr,{path:"/playlist-editor",element:m.jsx(js,{children:m.jsx(Os,{children:m.jsx(Kq,{})})})}),m.jsx(Mr,{path:"/keyword-directory",element:m.jsx(js,{children:m.jsx(Os,{children:m.jsx(Xq,{})})})}),m.jsx(Mr,{path:"/transcript-summary",element:m.jsx(js,{children:m.jsx(Os,{children:m.jsx(Qq,{})})})}),m.jsx(Mr,{path:"/search",element:m.jsx(js,{children:m.jsx(Os,{children:m.jsx(Jq,{})})})}),m.jsx(Mr,{path:"/interview-player",element:m.jsx(js,{children:m.jsx(Os,{children:m.jsx(Zq,{})})})}),m.jsx(Mr,{path:"*",element:m.jsx(NI,{to:"/",replace:!0})})]})}Lm.createRoot(document.getElementById("root")).render(m.jsx(Re.StrictMode,{children:m.jsx(H2,{children:m.jsx(u3,{children:m.jsx(d3,{children:m.jsx(eG,{})})})})}));export{Re as R,l5 as _,wy as a,jc as c,No as g,m as j,L as r};
