const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-IzfhpVb_.js","assets/leaflet-src-DaWPXrwE.js"])))=>i.map(i=>d[i]);
(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=r(s);fetch(s.href,a)}})();var F8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rT={exports:{}},Yh={},iT={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fu=Symbol.for("react.element"),jP=Symbol.for("react.portal"),VP=Symbol.for("react.fragment"),FP=Symbol.for("react.strict_mode"),UP=Symbol.for("react.profiler"),BP=Symbol.for("react.provider"),zP=Symbol.for("react.context"),$P=Symbol.for("react.forward_ref"),HP=Symbol.for("react.suspense"),WP=Symbol.for("react.memo"),qP=Symbol.for("react.lazy"),k0=Symbol.iterator;function GP(t){return t===null||typeof t!="object"?null:(t=k0&&t[k0]||t["@@iterator"],typeof t=="function"?t:null)}var sT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aT=Object.assign,oT={};function Ro(t,e,r){this.props=t,this.context=e,this.refs=oT,this.updater=r||sT}Ro.prototype.isReactComponent={};Ro.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ro.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function lT(){}lT.prototype=Ro.prototype;function bv(t,e,r){this.props=t,this.context=e,this.refs=oT,this.updater=r||sT}var xv=bv.prototype=new lT;xv.constructor=bv;aT(xv,Ro.prototype);xv.isPureReactComponent=!0;var C0=Array.isArray,uT=Object.prototype.hasOwnProperty,Ev={current:null},cT={key:!0,ref:!0,__self:!0,__source:!0};function dT(t,e,r){var i,s={},a=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)uT.call(e,i)&&!cT.hasOwnProperty(i)&&(s[i]=e[i]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)s[i]===void 0&&(s[i]=l[i]);return{$$typeof:Fu,type:t,key:a,ref:o,props:s,_owner:Ev.current}}function KP(t,e){return{$$typeof:Fu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Tv(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fu}function YP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var A0=/\/+/g;function vp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?YP(""+t.key):e.toString(36)}function md(t,e,r,i,s){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Fu:case jP:o=!0}}if(o)return o=t,s=s(o),t=i===""?"."+vp(o,0):i,C0(s)?(r="",t!=null&&(r=t.replace(A0,"$&/")+"/"),md(s,e,r,"",function(d){return d})):s!=null&&(Tv(s)&&(s=KP(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(A0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,i=i===""?".":i+":",C0(t))for(var l=0;l<t.length;l++){a=t[l];var u=i+vp(a,l);o+=md(a,e,r,u,s)}else if(u=GP(t),typeof u=="function")for(t=u.call(t),l=0;!(a=t.next()).done;)a=a.value,u=i+vp(a,l++),o+=md(a,e,r,u,s);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Lc(t,e,r){if(t==null)return t;var i=[],s=0;return md(t,i,"","",function(a){return e.call(r,a,s++)}),i}function XP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var bn={current:null},gd={transition:null},QP={ReactCurrentDispatcher:bn,ReactCurrentBatchConfig:gd,ReactCurrentOwner:Ev};function hT(){throw Error("act(...) is not supported in production builds of React.")}De.Children={map:Lc,forEach:function(t,e,r){Lc(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Lc(t,function(){e++}),e},toArray:function(t){return Lc(t,function(e){return e})||[]},only:function(t){if(!Tv(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};De.Component=Ro;De.Fragment=VP;De.Profiler=UP;De.PureComponent=bv;De.StrictMode=FP;De.Suspense=HP;De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QP;De.act=hT;De.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=aT({},t.props),s=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Ev.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)uT.call(e,u)&&!cT.hasOwnProperty(u)&&(i[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)i.children=r;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];i.children=l}return{$$typeof:Fu,type:t.type,key:s,ref:a,props:i,_owner:o}};De.createContext=function(t){return t={$$typeof:zP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:BP,_context:t},t.Consumer=t};De.createElement=dT;De.createFactory=function(t){var e=dT.bind(null,t);return e.type=t,e};De.createRef=function(){return{current:null}};De.forwardRef=function(t){return{$$typeof:$P,render:t}};De.isValidElement=Tv;De.lazy=function(t){return{$$typeof:qP,_payload:{_status:-1,_result:t},_init:XP}};De.memo=function(t,e){return{$$typeof:WP,type:t,compare:e===void 0?null:e}};De.startTransition=function(t){var e=gd.transition;gd.transition={};try{t()}finally{gd.transition=e}};De.unstable_act=hT;De.useCallback=function(t,e){return bn.current.useCallback(t,e)};De.useContext=function(t){return bn.current.useContext(t)};De.useDebugValue=function(){};De.useDeferredValue=function(t){return bn.current.useDeferredValue(t)};De.useEffect=function(t,e){return bn.current.useEffect(t,e)};De.useId=function(){return bn.current.useId()};De.useImperativeHandle=function(t,e,r){return bn.current.useImperativeHandle(t,e,r)};De.useInsertionEffect=function(t,e){return bn.current.useInsertionEffect(t,e)};De.useLayoutEffect=function(t,e){return bn.current.useLayoutEffect(t,e)};De.useMemo=function(t,e){return bn.current.useMemo(t,e)};De.useReducer=function(t,e,r){return bn.current.useReducer(t,e,r)};De.useRef=function(t){return bn.current.useRef(t)};De.useState=function(t){return bn.current.useState(t)};De.useSyncExternalStore=function(t,e,r){return bn.current.useSyncExternalStore(t,e,r)};De.useTransition=function(){return bn.current.useTransition()};De.version="18.3.1";iT.exports=De;var M=iT.exports;const Pe=Vu(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JP=M,ZP=Symbol.for("react.element"),eR=Symbol.for("react.fragment"),tR=Object.prototype.hasOwnProperty,nR=JP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rR={key:!0,ref:!0,__self:!0,__source:!0};function fT(t,e,r){var i,s={},a=null,o=null;r!==void 0&&(a=""+r),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)tR.call(e,i)&&!rR.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:ZP,type:t,key:a,ref:o,props:s,_owner:nR.current}}Yh.Fragment=eR;Yh.jsx=fT;Yh.jsxs=fT;rT.exports=Yh;var v=rT.exports,Rm={},pT={exports:{}},Gn={},mT={exports:{}},gT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,Y){var se=q.length;q.push(Y);e:for(;0<se;){var re=se-1>>>1,W=q[re];if(0<s(W,Y))q[re]=Y,q[se]=W,se=re;else break e}}function r(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var Y=q[0],se=q.pop();if(se!==Y){q[0]=se;e:for(var re=0,W=q.length,H=W>>>1;re<H;){var Q=2*(re+1)-1,X=q[Q],ue=Q+1,ge=q[ue];if(0>s(X,se))ue<W&&0>s(ge,X)?(q[re]=ge,q[ue]=se,re=ue):(q[re]=X,q[Q]=se,re=Q);else if(ue<W&&0>s(ge,se))q[re]=ge,q[ue]=se,re=ue;else break e}}return Y}function s(q,Y){var se=q.sortIndex-Y.sortIndex;return se!==0?se:q.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,f=null,p=3,g=!1,_=!1,A=!1,P=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(q){for(var Y=r(d);Y!==null;){if(Y.callback===null)i(d);else if(Y.startTime<=q)i(d),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=r(d)}}function R(q){if(A=!1,x(q),!_)if(r(u)!==null)_=!0,oe(F);else{var Y=r(d);Y!==null&&he(R,Y.startTime-q)}}function F(q,Y){_=!1,A&&(A=!1,S(I),I=-1),g=!0;var se=p;try{for(x(Y),f=r(u);f!==null&&(!(f.expirationTime>Y)||q&&!T());){var re=f.callback;if(typeof re=="function"){f.callback=null,p=f.priorityLevel;var W=re(f.expirationTime<=Y);Y=t.unstable_now(),typeof W=="function"?f.callback=W:f===r(u)&&i(u),x(Y)}else i(u);f=r(u)}if(f!==null)var H=!0;else{var Q=r(d);Q!==null&&he(R,Q.startTime-Y),H=!1}return H}finally{f=null,p=se,g=!1}}var V=!1,N=null,I=-1,y=5,b=-1;function T(){return!(t.unstable_now()-b<y)}function O(){if(N!==null){var q=t.unstable_now();b=q;var Y=!0;try{Y=N(!0,q)}finally{Y?D():(V=!1,N=null)}}else V=!1}var D;if(typeof w=="function")D=function(){w(O)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,ie=K.port2;K.port1.onmessage=O,D=function(){ie.postMessage(null)}}else D=function(){P(O,0)};function oe(q){N=q,V||(V=!0,D())}function he(q,Y){I=P(function(){q(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){_||g||(_=!0,oe(F))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(q){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var se=p;p=Y;try{return q()}finally{p=se}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,Y){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var se=p;p=q;try{return Y()}finally{p=se}},t.unstable_scheduleCallback=function(q,Y,se){var re=t.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?re+se:re):se=re,q){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=se+W,q={id:h++,callback:Y,priorityLevel:q,startTime:se,expirationTime:W,sortIndex:-1},se>re?(q.sortIndex=se,e(d,q),r(u)===null&&q===r(d)&&(A?(S(I),I=-1):A=!0,he(R,se-re))):(q.sortIndex=W,e(u,q),_||g||(_=!0,oe(F))),q},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(q){var Y=p;return function(){var se=p;p=Y;try{return q.apply(this,arguments)}finally{p=se}}}})(gT);mT.exports=gT;var iR=mT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sR=M,qn=iR;function ne(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var vT=new Set,nu={};function ca(t,e){oo(t,e),oo(t+"Capture",e)}function oo(t,e){for(nu[t]=e,t=0;t<e.length;t++)vT.add(e[t])}var fi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Dm=Object.prototype.hasOwnProperty,aR=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P0={},R0={};function oR(t){return Dm.call(R0,t)?!0:Dm.call(P0,t)?!1:aR.test(t)?R0[t]=!0:(P0[t]=!0,!1)}function lR(t,e,r,i){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uR(t,e,r,i){if(e===null||typeof e>"u"||lR(t,e,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xn(t,e,r,i,s,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var Zt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Zt[t]=new xn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Zt[e]=new xn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Zt[t]=new xn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Zt[t]=new xn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Zt[t]=new xn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Zt[t]=new xn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Zt[t]=new xn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Zt[t]=new xn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Zt[t]=new xn(t,5,!1,t.toLowerCase(),null,!1,!1)});var Sv=/[\-:]([a-z])/g;function Iv(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Sv,Iv);Zt[e]=new xn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Sv,Iv);Zt[e]=new xn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Sv,Iv);Zt[e]=new xn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Zt[t]=new xn(t,1,!1,t.toLowerCase(),null,!1,!1)});Zt.xlinkHref=new xn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Zt[t]=new xn(t,1,!1,t.toLowerCase(),null,!0,!0)});function kv(t,e,r,i){var s=Zt.hasOwnProperty(e)?Zt[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uR(e,r,s,i)&&(r=null),i||s===null?oR(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,i=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,i?t.setAttributeNS(i,e,r):t.setAttribute(e,r))))}var Ei=sR.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Oc=Symbol.for("react.element"),ja=Symbol.for("react.portal"),Va=Symbol.for("react.fragment"),Cv=Symbol.for("react.strict_mode"),Nm=Symbol.for("react.profiler"),yT=Symbol.for("react.provider"),_T=Symbol.for("react.context"),Av=Symbol.for("react.forward_ref"),Mm=Symbol.for("react.suspense"),Lm=Symbol.for("react.suspense_list"),Pv=Symbol.for("react.memo"),Mi=Symbol.for("react.lazy"),wT=Symbol.for("react.offscreen"),D0=Symbol.iterator;function ul(t){return t===null||typeof t!="object"?null:(t=D0&&t[D0]||t["@@iterator"],typeof t=="function"?t:null)}var wt=Object.assign,yp;function Il(t){if(yp===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);yp=e&&e[1]||""}return`
`+yp+t}var _p=!1;function wp(t,e){if(!t||_p)return"";_p=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var i=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){i=d}t.call(e.prototype)}else{try{throw Error()}catch(d){i=d}t()}}catch(d){if(d&&i&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),a=i.stack.split(`
`),o=s.length-1,l=a.length-1;1<=o&&0<=l&&s[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==a[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{_p=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Il(t):""}function cR(t){switch(t.tag){case 5:return Il(t.type);case 16:return Il("Lazy");case 13:return Il("Suspense");case 19:return Il("SuspenseList");case 0:case 2:case 15:return t=wp(t.type,!1),t;case 11:return t=wp(t.type.render,!1),t;case 1:return t=wp(t.type,!0),t;default:return""}}function Om(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Va:return"Fragment";case ja:return"Portal";case Nm:return"Profiler";case Cv:return"StrictMode";case Mm:return"Suspense";case Lm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _T:return(t.displayName||"Context")+".Consumer";case yT:return(t._context.displayName||"Context")+".Provider";case Av:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pv:return e=t.displayName||null,e!==null?e:Om(t.type)||"Memo";case Mi:e=t._payload,t=t._init;try{return Om(t(e))}catch{}}return null}function dR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Om(e);case 8:return e===Cv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function us(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function bT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hR(t){var e=bT(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,a=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){i=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function jc(t){t._valueTracker||(t._valueTracker=hR(t))}function xT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),i="";return t&&(i=bT(t)?t.checked?"true":"false":t.value),t=i,t!==r?(e.setValue(t),!0):!1}function $d(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jm(t,e){var r=e.checked;return wt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function N0(t,e){var r=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;r=us(e.value!=null?e.value:r),t._wrapperState={initialChecked:i,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ET(t,e){e=e.checked,e!=null&&kv(t,"checked",e,!1)}function Vm(t,e){ET(t,e);var r=us(e.value),i=e.type;if(r!=null)i==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fm(t,e.type,r):e.hasOwnProperty("defaultValue")&&Fm(t,e.type,us(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function M0(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Fm(t,e,r){(e!=="number"||$d(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var kl=Array.isArray;function Xa(t,e,r,i){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&i&&(t[r].defaultSelected=!0)}else{for(r=""+us(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Um(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ne(91));return wt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function L0(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(ne(92));if(kl(r)){if(1<r.length)throw Error(ne(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:us(r)}}function TT(t,e){var r=us(e.value),i=us(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),i!=null&&(t.defaultValue=""+i)}function O0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ST(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ST(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Vc,IT=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Vc=Vc||document.createElement("div"),Vc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Vc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ru(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var Vl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fR=["Webkit","ms","Moz","O"];Object.keys(Vl).forEach(function(t){fR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vl[e]=Vl[t]})});function kT(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||Vl.hasOwnProperty(t)&&Vl[t]?(""+e).trim():e+"px"}function CT(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var i=r.indexOf("--")===0,s=kT(r,e[r],i);r==="float"&&(r="cssFloat"),i?t.setProperty(r,s):t[r]=s}}var pR=wt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zm(t,e){if(e){if(pR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ne(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ne(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ne(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ne(62))}}function $m(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hm=null;function Rv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wm=null,Qa=null,Ja=null;function j0(t){if(t=zu(t)){if(typeof Wm!="function")throw Error(ne(280));var e=t.stateNode;e&&(e=ef(e),Wm(t.stateNode,t.type,e))}}function AT(t){Qa?Ja?Ja.push(t):Ja=[t]:Qa=t}function PT(){if(Qa){var t=Qa,e=Ja;if(Ja=Qa=null,j0(t),e)for(t=0;t<e.length;t++)j0(e[t])}}function RT(t,e){return t(e)}function DT(){}var bp=!1;function NT(t,e,r){if(bp)return t(e,r);bp=!0;try{return RT(t,e,r)}finally{bp=!1,(Qa!==null||Ja!==null)&&(DT(),PT())}}function iu(t,e){var r=t.stateNode;if(r===null)return null;var i=ef(r);if(i===null)return null;r=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(ne(231,e,typeof r));return r}var qm=!1;if(fi)try{var cl={};Object.defineProperty(cl,"passive",{get:function(){qm=!0}}),window.addEventListener("test",cl,cl),window.removeEventListener("test",cl,cl)}catch{qm=!1}function mR(t,e,r,i,s,a,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(h){this.onError(h)}}var Fl=!1,Hd=null,Wd=!1,Gm=null,gR={onError:function(t){Fl=!0,Hd=t}};function vR(t,e,r,i,s,a,o,l,u){Fl=!1,Hd=null,mR.apply(gR,arguments)}function yR(t,e,r,i,s,a,o,l,u){if(vR.apply(this,arguments),Fl){if(Fl){var d=Hd;Fl=!1,Hd=null}else throw Error(ne(198));Wd||(Wd=!0,Gm=d)}}function da(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function MT(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function V0(t){if(da(t)!==t)throw Error(ne(188))}function _R(t){var e=t.alternate;if(!e){if(e=da(t),e===null)throw Error(ne(188));return e!==t?null:t}for(var r=t,i=e;;){var s=r.return;if(s===null)break;var a=s.alternate;if(a===null){if(i=s.return,i!==null){r=i;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===r)return V0(s),t;if(a===i)return V0(s),e;a=a.sibling}throw Error(ne(188))}if(r.return!==i.return)r=s,i=a;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,i=a;break}if(l===i){o=!0,i=s,r=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===r){o=!0,r=a,i=s;break}if(l===i){o=!0,i=a,r=s;break}l=l.sibling}if(!o)throw Error(ne(189))}}if(r.alternate!==i)throw Error(ne(190))}if(r.tag!==3)throw Error(ne(188));return r.stateNode.current===r?t:e}function LT(t){return t=_R(t),t!==null?OT(t):null}function OT(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=OT(t);if(e!==null)return e;t=t.sibling}return null}var jT=qn.unstable_scheduleCallback,F0=qn.unstable_cancelCallback,wR=qn.unstable_shouldYield,bR=qn.unstable_requestPaint,kt=qn.unstable_now,xR=qn.unstable_getCurrentPriorityLevel,Dv=qn.unstable_ImmediatePriority,VT=qn.unstable_UserBlockingPriority,qd=qn.unstable_NormalPriority,ER=qn.unstable_LowPriority,FT=qn.unstable_IdlePriority,Xh=null,Fr=null;function TR(t){if(Fr&&typeof Fr.onCommitFiberRoot=="function")try{Fr.onCommitFiberRoot(Xh,t,void 0,(t.current.flags&128)===128)}catch{}}var Tr=Math.clz32?Math.clz32:kR,SR=Math.log,IR=Math.LN2;function kR(t){return t>>>=0,t===0?32:31-(SR(t)/IR|0)|0}var Fc=64,Uc=4194304;function Cl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gd(t,e){var r=t.pendingLanes;if(r===0)return 0;var i=0,s=t.suspendedLanes,a=t.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?i=Cl(l):(a&=o,a!==0&&(i=Cl(a)))}else o=r&~s,o!==0?i=Cl(o):a!==0&&(i=Cl(a));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,a=e&-e,s>=a||s===16&&(a&4194240)!==0))return e;if(i&4&&(i|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)r=31-Tr(e),s=1<<r,i|=t[r],e&=~s;return i}function CR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AR(t,e){for(var r=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Tr(a),l=1<<o,u=s[o];u===-1?(!(l&r)||l&i)&&(s[o]=CR(l,e)):u<=e&&(t.expiredLanes|=l),a&=~l}}function Km(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function UT(){var t=Fc;return Fc<<=1,!(Fc&4194240)&&(Fc=64),t}function xp(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Uu(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Tr(e),t[e]=r}function PR(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Tr(r),a=1<<s;e[s]=0,i[s]=-1,t[s]=-1,r&=~a}}function Nv(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var i=31-Tr(r),s=1<<i;s&e|t[i]&e&&(t[i]|=e),r&=~s}}var et=0;function BT(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zT,Mv,$T,HT,WT,Ym=!1,Bc=[],qi=null,Gi=null,Ki=null,su=new Map,au=new Map,ji=[],RR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function U0(t,e){switch(t){case"focusin":case"focusout":qi=null;break;case"dragenter":case"dragleave":Gi=null;break;case"mouseover":case"mouseout":Ki=null;break;case"pointerover":case"pointerout":su.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":au.delete(e.pointerId)}}function dl(t,e,r,i,s,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:r,eventSystemFlags:i,nativeEvent:a,targetContainers:[s]},e!==null&&(e=zu(e),e!==null&&Mv(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function DR(t,e,r,i,s){switch(e){case"focusin":return qi=dl(qi,t,e,r,i,s),!0;case"dragenter":return Gi=dl(Gi,t,e,r,i,s),!0;case"mouseover":return Ki=dl(Ki,t,e,r,i,s),!0;case"pointerover":var a=s.pointerId;return su.set(a,dl(su.get(a)||null,t,e,r,i,s)),!0;case"gotpointercapture":return a=s.pointerId,au.set(a,dl(au.get(a)||null,t,e,r,i,s)),!0}return!1}function qT(t){var e=qs(t.target);if(e!==null){var r=da(e);if(r!==null){if(e=r.tag,e===13){if(e=MT(r),e!==null){t.blockedOn=e,WT(t.priority,function(){$T(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=Xm(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var i=new r.constructor(r.type,r);Hm=i,r.target.dispatchEvent(i),Hm=null}else return e=zu(r),e!==null&&Mv(e),t.blockedOn=r,!1;e.shift()}return!0}function B0(t,e,r){vd(t)&&r.delete(e)}function NR(){Ym=!1,qi!==null&&vd(qi)&&(qi=null),Gi!==null&&vd(Gi)&&(Gi=null),Ki!==null&&vd(Ki)&&(Ki=null),su.forEach(B0),au.forEach(B0)}function hl(t,e){t.blockedOn===e&&(t.blockedOn=null,Ym||(Ym=!0,qn.unstable_scheduleCallback(qn.unstable_NormalPriority,NR)))}function ou(t){function e(s){return hl(s,t)}if(0<Bc.length){hl(Bc[0],t);for(var r=1;r<Bc.length;r++){var i=Bc[r];i.blockedOn===t&&(i.blockedOn=null)}}for(qi!==null&&hl(qi,t),Gi!==null&&hl(Gi,t),Ki!==null&&hl(Ki,t),su.forEach(e),au.forEach(e),r=0;r<ji.length;r++)i=ji[r],i.blockedOn===t&&(i.blockedOn=null);for(;0<ji.length&&(r=ji[0],r.blockedOn===null);)qT(r),r.blockedOn===null&&ji.shift()}var Za=Ei.ReactCurrentBatchConfig,Kd=!0;function MR(t,e,r,i){var s=et,a=Za.transition;Za.transition=null;try{et=1,Lv(t,e,r,i)}finally{et=s,Za.transition=a}}function LR(t,e,r,i){var s=et,a=Za.transition;Za.transition=null;try{et=4,Lv(t,e,r,i)}finally{et=s,Za.transition=a}}function Lv(t,e,r,i){if(Kd){var s=Xm(t,e,r,i);if(s===null)Dp(t,e,i,Yd,r),U0(t,i);else if(DR(s,t,e,r,i))i.stopPropagation();else if(U0(t,i),e&4&&-1<RR.indexOf(t)){for(;s!==null;){var a=zu(s);if(a!==null&&zT(a),a=Xm(t,e,r,i),a===null&&Dp(t,e,i,Yd,r),a===s)break;s=a}s!==null&&i.stopPropagation()}else Dp(t,e,i,null,r)}}var Yd=null;function Xm(t,e,r,i){if(Yd=null,t=Rv(i),t=qs(t),t!==null)if(e=da(t),e===null)t=null;else if(r=e.tag,r===13){if(t=MT(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yd=t,null}function GT(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(xR()){case Dv:return 1;case VT:return 4;case qd:case ER:return 16;case FT:return 536870912;default:return 16}default:return 16}}var $i=null,Ov=null,yd=null;function KT(){if(yd)return yd;var t,e=Ov,r=e.length,i,s="value"in $i?$i.value:$i.textContent,a=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(i=1;i<=o&&e[r-i]===s[a-i];i++);return yd=s.slice(t,1<i?1-i:void 0)}function _d(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function zc(){return!0}function z0(){return!1}function Kn(t){function e(r,i,s,a,o){this._reactName=r,this._targetInst=s,this.type=i,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?zc:z0,this.isPropagationStopped=z0,this}return wt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=zc)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=zc)},persist:function(){},isPersistent:zc}),e}var Do={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jv=Kn(Do),Bu=wt({},Do,{view:0,detail:0}),OR=Kn(Bu),Ep,Tp,fl,Qh=wt({},Bu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==fl&&(fl&&t.type==="mousemove"?(Ep=t.screenX-fl.screenX,Tp=t.screenY-fl.screenY):Tp=Ep=0,fl=t),Ep)},movementY:function(t){return"movementY"in t?t.movementY:Tp}}),$0=Kn(Qh),jR=wt({},Qh,{dataTransfer:0}),VR=Kn(jR),FR=wt({},Bu,{relatedTarget:0}),Sp=Kn(FR),UR=wt({},Do,{animationName:0,elapsedTime:0,pseudoElement:0}),BR=Kn(UR),zR=wt({},Do,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$R=Kn(zR),HR=wt({},Do,{data:0}),H0=Kn(HR),WR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},GR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function KR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=GR[t])?!!e[t]:!1}function Vv(){return KR}var YR=wt({},Bu,{key:function(t){if(t.key){var e=WR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_d(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vv,charCode:function(t){return t.type==="keypress"?_d(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_d(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),XR=Kn(YR),QR=wt({},Qh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),W0=Kn(QR),JR=wt({},Bu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vv}),ZR=Kn(JR),eD=wt({},Do,{propertyName:0,elapsedTime:0,pseudoElement:0}),tD=Kn(eD),nD=wt({},Qh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rD=Kn(nD),iD=[9,13,27,32],Fv=fi&&"CompositionEvent"in window,Ul=null;fi&&"documentMode"in document&&(Ul=document.documentMode);var sD=fi&&"TextEvent"in window&&!Ul,XT=fi&&(!Fv||Ul&&8<Ul&&11>=Ul),q0=" ",G0=!1;function QT(t,e){switch(t){case"keyup":return iD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function JT(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fa=!1;function aD(t,e){switch(t){case"compositionend":return JT(e);case"keypress":return e.which!==32?null:(G0=!0,q0);case"textInput":return t=e.data,t===q0&&G0?null:t;default:return null}}function oD(t,e){if(Fa)return t==="compositionend"||!Fv&&QT(t,e)?(t=KT(),yd=Ov=$i=null,Fa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return XT&&e.locale!=="ko"?null:e.data;default:return null}}var lD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function K0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lD[t.type]:e==="textarea"}function ZT(t,e,r,i){AT(i),e=Xd(e,"onChange"),0<e.length&&(r=new jv("onChange","change",null,r,i),t.push({event:r,listeners:e}))}var Bl=null,lu=null;function uD(t){cS(t,0)}function Jh(t){var e=za(t);if(xT(e))return t}function cD(t,e){if(t==="change")return e}var eS=!1;if(fi){var Ip;if(fi){var kp="oninput"in document;if(!kp){var Y0=document.createElement("div");Y0.setAttribute("oninput","return;"),kp=typeof Y0.oninput=="function"}Ip=kp}else Ip=!1;eS=Ip&&(!document.documentMode||9<document.documentMode)}function X0(){Bl&&(Bl.detachEvent("onpropertychange",tS),lu=Bl=null)}function tS(t){if(t.propertyName==="value"&&Jh(lu)){var e=[];ZT(e,lu,t,Rv(t)),NT(uD,e)}}function dD(t,e,r){t==="focusin"?(X0(),Bl=e,lu=r,Bl.attachEvent("onpropertychange",tS)):t==="focusout"&&X0()}function hD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Jh(lu)}function fD(t,e){if(t==="click")return Jh(e)}function pD(t,e){if(t==="input"||t==="change")return Jh(e)}function mD(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ir=typeof Object.is=="function"?Object.is:mD;function uu(t,e){if(Ir(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var s=r[i];if(!Dm.call(e,s)||!Ir(t[s],e[s]))return!1}return!0}function Q0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function J0(t,e){var r=Q0(t);t=0;for(var i;r;){if(r.nodeType===3){if(i=t+r.textContent.length,t<=e&&i>=e)return{node:r,offset:e-t};t=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Q0(r)}}function nS(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?nS(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rS(){for(var t=window,e=$d();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=$d(t.document)}return e}function Uv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function gD(t){var e=rS(),r=t.focusedElem,i=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&nS(r.ownerDocument.documentElement,r)){if(i!==null&&Uv(r)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,a=Math.min(i.start,s);i=i.end===void 0?a:Math.min(i.end,s),!t.extend&&a>i&&(s=i,i=a,a=s),s=J0(r,a);var o=J0(r,i);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),a>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var vD=fi&&"documentMode"in document&&11>=document.documentMode,Ua=null,Qm=null,zl=null,Jm=!1;function Z0(t,e,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Jm||Ua==null||Ua!==$d(i)||(i=Ua,"selectionStart"in i&&Uv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),zl&&uu(zl,i)||(zl=i,i=Xd(Qm,"onSelect"),0<i.length&&(e=new jv("onSelect","select",null,e,r),t.push({event:e,listeners:i}),e.target=Ua)))}function $c(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Ba={animationend:$c("Animation","AnimationEnd"),animationiteration:$c("Animation","AnimationIteration"),animationstart:$c("Animation","AnimationStart"),transitionend:$c("Transition","TransitionEnd")},Cp={},iS={};fi&&(iS=document.createElement("div").style,"AnimationEvent"in window||(delete Ba.animationend.animation,delete Ba.animationiteration.animation,delete Ba.animationstart.animation),"TransitionEvent"in window||delete Ba.transitionend.transition);function Zh(t){if(Cp[t])return Cp[t];if(!Ba[t])return t;var e=Ba[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in iS)return Cp[t]=e[r];return t}var sS=Zh("animationend"),aS=Zh("animationiteration"),oS=Zh("animationstart"),lS=Zh("transitionend"),uS=new Map,ew="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _s(t,e){uS.set(t,e),ca(e,[t])}for(var Ap=0;Ap<ew.length;Ap++){var Pp=ew[Ap],yD=Pp.toLowerCase(),_D=Pp[0].toUpperCase()+Pp.slice(1);_s(yD,"on"+_D)}_s(sS,"onAnimationEnd");_s(aS,"onAnimationIteration");_s(oS,"onAnimationStart");_s("dblclick","onDoubleClick");_s("focusin","onFocus");_s("focusout","onBlur");_s(lS,"onTransitionEnd");oo("onMouseEnter",["mouseout","mouseover"]);oo("onMouseLeave",["mouseout","mouseover"]);oo("onPointerEnter",["pointerout","pointerover"]);oo("onPointerLeave",["pointerout","pointerover"]);ca("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ca("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ca("onBeforeInput",["compositionend","keypress","textInput","paste"]);ca("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ca("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ca("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Al="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Al));function tw(t,e,r){var i=t.type||"unknown-event";t.currentTarget=r,yR(i,e,void 0,t),t.currentTarget=null}function cS(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var i=t[r],s=i.event;i=i.listeners;e:{var a=void 0;if(e)for(var o=i.length-1;0<=o;o--){var l=i[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==a&&s.isPropagationStopped())break e;tw(s,l,d),a=u}else for(o=0;o<i.length;o++){if(l=i[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==a&&s.isPropagationStopped())break e;tw(s,l,d),a=u}}}if(Wd)throw t=Gm,Wd=!1,Gm=null,t}function ut(t,e){var r=e[rg];r===void 0&&(r=e[rg]=new Set);var i=t+"__bubble";r.has(i)||(dS(e,t,2,!1),r.add(i))}function Rp(t,e,r){var i=0;e&&(i|=4),dS(r,t,i,e)}var Hc="_reactListening"+Math.random().toString(36).slice(2);function cu(t){if(!t[Hc]){t[Hc]=!0,vT.forEach(function(r){r!=="selectionchange"&&(wD.has(r)||Rp(r,!1,t),Rp(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Hc]||(e[Hc]=!0,Rp("selectionchange",!1,e))}}function dS(t,e,r,i){switch(GT(e)){case 1:var s=MR;break;case 4:s=LR;break;default:s=Lv}r=s.bind(null,e,r,t),s=void 0,!qm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function Dp(t,e,r,i,s){var a=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=i.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=qs(l),o===null)return;if(u=o.tag,u===5||u===6){i=a=o;continue e}l=l.parentNode}}i=i.return}NT(function(){var d=a,h=Rv(r),f=[];e:{var p=uS.get(t);if(p!==void 0){var g=jv,_=t;switch(t){case"keypress":if(_d(r)===0)break e;case"keydown":case"keyup":g=XR;break;case"focusin":_="focus",g=Sp;break;case"focusout":_="blur",g=Sp;break;case"beforeblur":case"afterblur":g=Sp;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=$0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=VR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=ZR;break;case sS:case aS:case oS:g=BR;break;case lS:g=tD;break;case"scroll":g=OR;break;case"wheel":g=rD;break;case"copy":case"cut":case"paste":g=$R;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=W0}var A=(e&4)!==0,P=!A&&t==="scroll",S=A?p!==null?p+"Capture":null:p;A=[];for(var w=d,x;w!==null;){x=w;var R=x.stateNode;if(x.tag===5&&R!==null&&(x=R,S!==null&&(R=iu(w,S),R!=null&&A.push(du(w,R,x)))),P)break;w=w.return}0<A.length&&(p=new g(p,_,null,r,h),f.push({event:p,listeners:A}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",p&&r!==Hm&&(_=r.relatedTarget||r.fromElement)&&(qs(_)||_[pi]))break e;if((g||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,g?(_=r.relatedTarget||r.toElement,g=d,_=_?qs(_):null,_!==null&&(P=da(_),_!==P||_.tag!==5&&_.tag!==6)&&(_=null)):(g=null,_=d),g!==_)){if(A=$0,R="onMouseLeave",S="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(A=W0,R="onPointerLeave",S="onPointerEnter",w="pointer"),P=g==null?p:za(g),x=_==null?p:za(_),p=new A(R,w+"leave",g,r,h),p.target=P,p.relatedTarget=x,R=null,qs(h)===d&&(A=new A(S,w+"enter",_,r,h),A.target=x,A.relatedTarget=P,R=A),P=R,g&&_)t:{for(A=g,S=_,w=0,x=A;x;x=Ia(x))w++;for(x=0,R=S;R;R=Ia(R))x++;for(;0<w-x;)A=Ia(A),w--;for(;0<x-w;)S=Ia(S),x--;for(;w--;){if(A===S||S!==null&&A===S.alternate)break t;A=Ia(A),S=Ia(S)}A=null}else A=null;g!==null&&nw(f,p,g,A,!1),_!==null&&P!==null&&nw(f,P,_,A,!0)}}e:{if(p=d?za(d):window,g=p.nodeName&&p.nodeName.toLowerCase(),g==="select"||g==="input"&&p.type==="file")var F=cD;else if(K0(p))if(eS)F=pD;else{F=hD;var V=dD}else(g=p.nodeName)&&g.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(F=fD);if(F&&(F=F(t,d))){ZT(f,F,r,h);break e}V&&V(t,p,d),t==="focusout"&&(V=p._wrapperState)&&V.controlled&&p.type==="number"&&Fm(p,"number",p.value)}switch(V=d?za(d):window,t){case"focusin":(K0(V)||V.contentEditable==="true")&&(Ua=V,Qm=d,zl=null);break;case"focusout":zl=Qm=Ua=null;break;case"mousedown":Jm=!0;break;case"contextmenu":case"mouseup":case"dragend":Jm=!1,Z0(f,r,h);break;case"selectionchange":if(vD)break;case"keydown":case"keyup":Z0(f,r,h)}var N;if(Fv)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Fa?QT(t,r)&&(I="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(I="onCompositionStart");I&&(XT&&r.locale!=="ko"&&(Fa||I!=="onCompositionStart"?I==="onCompositionEnd"&&Fa&&(N=KT()):($i=h,Ov="value"in $i?$i.value:$i.textContent,Fa=!0)),V=Xd(d,I),0<V.length&&(I=new H0(I,t,null,r,h),f.push({event:I,listeners:V}),N?I.data=N:(N=JT(r),N!==null&&(I.data=N)))),(N=sD?aD(t,r):oD(t,r))&&(d=Xd(d,"onBeforeInput"),0<d.length&&(h=new H0("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:d}),h.data=N))}cS(f,e)})}function du(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Xd(t,e){for(var r=e+"Capture",i=[];t!==null;){var s=t,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=iu(t,r),a!=null&&i.unshift(du(t,a,s)),a=iu(t,e),a!=null&&i.push(du(t,a,s))),t=t.return}return i}function Ia(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function nw(t,e,r,i,s){for(var a=e._reactName,o=[];r!==null&&r!==i;){var l=r,u=l.alternate,d=l.stateNode;if(u!==null&&u===i)break;l.tag===5&&d!==null&&(l=d,s?(u=iu(r,a),u!=null&&o.unshift(du(r,u,l))):s||(u=iu(r,a),u!=null&&o.push(du(r,u,l)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var bD=/\r\n?/g,xD=/\u0000|\uFFFD/g;function rw(t){return(typeof t=="string"?t:""+t).replace(bD,`
`).replace(xD,"")}function Wc(t,e,r){if(e=rw(e),rw(t)!==e&&r)throw Error(ne(425))}function Qd(){}var Zm=null,eg=null;function tg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ng=typeof setTimeout=="function"?setTimeout:void 0,ED=typeof clearTimeout=="function"?clearTimeout:void 0,iw=typeof Promise=="function"?Promise:void 0,TD=typeof queueMicrotask=="function"?queueMicrotask:typeof iw<"u"?function(t){return iw.resolve(null).then(t).catch(SD)}:ng;function SD(t){setTimeout(function(){throw t})}function Np(t,e){var r=e,i=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(i===0){t.removeChild(s),ou(e);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=s}while(r);ou(e)}function Yi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function sw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var No=Math.random().toString(36).slice(2),Vr="__reactFiber$"+No,hu="__reactProps$"+No,pi="__reactContainer$"+No,rg="__reactEvents$"+No,ID="__reactListeners$"+No,kD="__reactHandles$"+No;function qs(t){var e=t[Vr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[pi]||r[Vr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=sw(t);t!==null;){if(r=t[Vr])return r;t=sw(t)}return e}t=r,r=t.parentNode}return null}function zu(t){return t=t[Vr]||t[pi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function za(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ne(33))}function ef(t){return t[hu]||null}var ig=[],$a=-1;function ws(t){return{current:t}}function ct(t){0>$a||(t.current=ig[$a],ig[$a]=null,$a--)}function ot(t,e){$a++,ig[$a]=t.current,t.current=e}var cs={},fn=ws(cs),Nn=ws(!1),Js=cs;function lo(t,e){var r=t.type.contextTypes;if(!r)return cs;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in r)s[a]=e[a];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Mn(t){return t=t.childContextTypes,t!=null}function Jd(){ct(Nn),ct(fn)}function aw(t,e,r){if(fn.current!==cs)throw Error(ne(168));ot(fn,e),ot(Nn,r)}function hS(t,e,r){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(ne(108,dR(t)||"Unknown",s));return wt({},r,i)}function Zd(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||cs,Js=fn.current,ot(fn,t),ot(Nn,Nn.current),!0}function ow(t,e,r){var i=t.stateNode;if(!i)throw Error(ne(169));r?(t=hS(t,e,Js),i.__reactInternalMemoizedMergedChildContext=t,ct(Nn),ct(fn),ot(fn,t)):ct(Nn),ot(Nn,r)}var ii=null,tf=!1,Mp=!1;function fS(t){ii===null?ii=[t]:ii.push(t)}function CD(t){tf=!0,fS(t)}function bs(){if(!Mp&&ii!==null){Mp=!0;var t=0,e=et;try{var r=ii;for(et=1;t<r.length;t++){var i=r[t];do i=i(!0);while(i!==null)}ii=null,tf=!1}catch(s){throw ii!==null&&(ii=ii.slice(t+1)),jT(Dv,bs),s}finally{et=e,Mp=!1}}return null}var Ha=[],Wa=0,eh=null,th=0,Jn=[],Zn=0,Zs=null,si=1,ai="";function Fs(t,e){Ha[Wa++]=th,Ha[Wa++]=eh,eh=t,th=e}function pS(t,e,r){Jn[Zn++]=si,Jn[Zn++]=ai,Jn[Zn++]=Zs,Zs=t;var i=si;t=ai;var s=32-Tr(i)-1;i&=~(1<<s),r+=1;var a=32-Tr(e)+s;if(30<a){var o=s-s%5;a=(i&(1<<o)-1).toString(32),i>>=o,s-=o,si=1<<32-Tr(e)+s|r<<s|i,ai=a+t}else si=1<<a|r<<s|i,ai=t}function Bv(t){t.return!==null&&(Fs(t,1),pS(t,1,0))}function zv(t){for(;t===eh;)eh=Ha[--Wa],Ha[Wa]=null,th=Ha[--Wa],Ha[Wa]=null;for(;t===Zs;)Zs=Jn[--Zn],Jn[Zn]=null,ai=Jn[--Zn],Jn[Zn]=null,si=Jn[--Zn],Jn[Zn]=null}var zn=null,Fn=null,ft=!1,br=null;function mS(t,e){var r=tr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function lw(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zn=t,Fn=Yi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zn=t,Fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Zs!==null?{id:si,overflow:ai}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=tr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,zn=t,Fn=null,!0):!1;default:return!1}}function sg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ag(t){if(ft){var e=Fn;if(e){var r=e;if(!lw(t,e)){if(sg(t))throw Error(ne(418));e=Yi(r.nextSibling);var i=zn;e&&lw(t,e)?mS(i,r):(t.flags=t.flags&-4097|2,ft=!1,zn=t)}}else{if(sg(t))throw Error(ne(418));t.flags=t.flags&-4097|2,ft=!1,zn=t}}}function uw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zn=t}function qc(t){if(t!==zn)return!1;if(!ft)return uw(t),ft=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tg(t.type,t.memoizedProps)),e&&(e=Fn)){if(sg(t))throw gS(),Error(ne(418));for(;e;)mS(t,e),e=Yi(e.nextSibling)}if(uw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ne(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){Fn=Yi(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}Fn=null}}else Fn=zn?Yi(t.stateNode.nextSibling):null;return!0}function gS(){for(var t=Fn;t;)t=Yi(t.nextSibling)}function uo(){Fn=zn=null,ft=!1}function $v(t){br===null?br=[t]:br.push(t)}var AD=Ei.ReactCurrentBatchConfig;function pl(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ne(309));var i=r.stateNode}if(!i)throw Error(ne(147,t));var s=i,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=s.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(ne(284));if(!r._owner)throw Error(ne(290,t))}return t}function Gc(t,e){throw t=Object.prototype.toString.call(e),Error(ne(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function cw(t){var e=t._init;return e(t._payload)}function vS(t){function e(S,w){if(t){var x=S.deletions;x===null?(S.deletions=[w],S.flags|=16):x.push(w)}}function r(S,w){if(!t)return null;for(;w!==null;)e(S,w),w=w.sibling;return null}function i(S,w){for(S=new Map;w!==null;)w.key!==null?S.set(w.key,w):S.set(w.index,w),w=w.sibling;return S}function s(S,w){return S=Zi(S,w),S.index=0,S.sibling=null,S}function a(S,w,x){return S.index=x,t?(x=S.alternate,x!==null?(x=x.index,x<w?(S.flags|=2,w):x):(S.flags|=2,w)):(S.flags|=1048576,w)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function l(S,w,x,R){return w===null||w.tag!==6?(w=Bp(x,S.mode,R),w.return=S,w):(w=s(w,x),w.return=S,w)}function u(S,w,x,R){var F=x.type;return F===Va?h(S,w,x.props.children,R,x.key):w!==null&&(w.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Mi&&cw(F)===w.type)?(R=s(w,x.props),R.ref=pl(S,w,x),R.return=S,R):(R=Id(x.type,x.key,x.props,null,S.mode,R),R.ref=pl(S,w,x),R.return=S,R)}function d(S,w,x,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=zp(x,S.mode,R),w.return=S,w):(w=s(w,x.children||[]),w.return=S,w)}function h(S,w,x,R,F){return w===null||w.tag!==7?(w=Qs(x,S.mode,R,F),w.return=S,w):(w=s(w,x),w.return=S,w)}function f(S,w,x){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Bp(""+w,S.mode,x),w.return=S,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Oc:return x=Id(w.type,w.key,w.props,null,S.mode,x),x.ref=pl(S,null,w),x.return=S,x;case ja:return w=zp(w,S.mode,x),w.return=S,w;case Mi:var R=w._init;return f(S,R(w._payload),x)}if(kl(w)||ul(w))return w=Qs(w,S.mode,x,null),w.return=S,w;Gc(S,w)}return null}function p(S,w,x,R){var F=w!==null?w.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return F!==null?null:l(S,w,""+x,R);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Oc:return x.key===F?u(S,w,x,R):null;case ja:return x.key===F?d(S,w,x,R):null;case Mi:return F=x._init,p(S,w,F(x._payload),R)}if(kl(x)||ul(x))return F!==null?null:h(S,w,x,R,null);Gc(S,x)}return null}function g(S,w,x,R,F){if(typeof R=="string"&&R!==""||typeof R=="number")return S=S.get(x)||null,l(w,S,""+R,F);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Oc:return S=S.get(R.key===null?x:R.key)||null,u(w,S,R,F);case ja:return S=S.get(R.key===null?x:R.key)||null,d(w,S,R,F);case Mi:var V=R._init;return g(S,w,x,V(R._payload),F)}if(kl(R)||ul(R))return S=S.get(x)||null,h(w,S,R,F,null);Gc(w,R)}return null}function _(S,w,x,R){for(var F=null,V=null,N=w,I=w=0,y=null;N!==null&&I<x.length;I++){N.index>I?(y=N,N=null):y=N.sibling;var b=p(S,N,x[I],R);if(b===null){N===null&&(N=y);break}t&&N&&b.alternate===null&&e(S,N),w=a(b,w,I),V===null?F=b:V.sibling=b,V=b,N=y}if(I===x.length)return r(S,N),ft&&Fs(S,I),F;if(N===null){for(;I<x.length;I++)N=f(S,x[I],R),N!==null&&(w=a(N,w,I),V===null?F=N:V.sibling=N,V=N);return ft&&Fs(S,I),F}for(N=i(S,N);I<x.length;I++)y=g(N,S,I,x[I],R),y!==null&&(t&&y.alternate!==null&&N.delete(y.key===null?I:y.key),w=a(y,w,I),V===null?F=y:V.sibling=y,V=y);return t&&N.forEach(function(T){return e(S,T)}),ft&&Fs(S,I),F}function A(S,w,x,R){var F=ul(x);if(typeof F!="function")throw Error(ne(150));if(x=F.call(x),x==null)throw Error(ne(151));for(var V=F=null,N=w,I=w=0,y=null,b=x.next();N!==null&&!b.done;I++,b=x.next()){N.index>I?(y=N,N=null):y=N.sibling;var T=p(S,N,b.value,R);if(T===null){N===null&&(N=y);break}t&&N&&T.alternate===null&&e(S,N),w=a(T,w,I),V===null?F=T:V.sibling=T,V=T,N=y}if(b.done)return r(S,N),ft&&Fs(S,I),F;if(N===null){for(;!b.done;I++,b=x.next())b=f(S,b.value,R),b!==null&&(w=a(b,w,I),V===null?F=b:V.sibling=b,V=b);return ft&&Fs(S,I),F}for(N=i(S,N);!b.done;I++,b=x.next())b=g(N,S,I,b.value,R),b!==null&&(t&&b.alternate!==null&&N.delete(b.key===null?I:b.key),w=a(b,w,I),V===null?F=b:V.sibling=b,V=b);return t&&N.forEach(function(O){return e(S,O)}),ft&&Fs(S,I),F}function P(S,w,x,R){if(typeof x=="object"&&x!==null&&x.type===Va&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Oc:e:{for(var F=x.key,V=w;V!==null;){if(V.key===F){if(F=x.type,F===Va){if(V.tag===7){r(S,V.sibling),w=s(V,x.props.children),w.return=S,S=w;break e}}else if(V.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Mi&&cw(F)===V.type){r(S,V.sibling),w=s(V,x.props),w.ref=pl(S,V,x),w.return=S,S=w;break e}r(S,V);break}else e(S,V);V=V.sibling}x.type===Va?(w=Qs(x.props.children,S.mode,R,x.key),w.return=S,S=w):(R=Id(x.type,x.key,x.props,null,S.mode,R),R.ref=pl(S,w,x),R.return=S,S=R)}return o(S);case ja:e:{for(V=x.key;w!==null;){if(w.key===V)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){r(S,w.sibling),w=s(w,x.children||[]),w.return=S,S=w;break e}else{r(S,w);break}else e(S,w);w=w.sibling}w=zp(x,S.mode,R),w.return=S,S=w}return o(S);case Mi:return V=x._init,P(S,w,V(x._payload),R)}if(kl(x))return _(S,w,x,R);if(ul(x))return A(S,w,x,R);Gc(S,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,w!==null&&w.tag===6?(r(S,w.sibling),w=s(w,x),w.return=S,S=w):(r(S,w),w=Bp(x,S.mode,R),w.return=S,S=w),o(S)):r(S,w)}return P}var co=vS(!0),yS=vS(!1),nh=ws(null),rh=null,qa=null,Hv=null;function Wv(){Hv=qa=rh=null}function qv(t){var e=nh.current;ct(nh),t._currentValue=e}function og(t,e,r){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===r)break;t=t.return}}function eo(t,e){rh=t,Hv=qa=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rn=!0),t.firstContext=null)}function or(t){var e=t._currentValue;if(Hv!==t)if(t={context:t,memoizedValue:e,next:null},qa===null){if(rh===null)throw Error(ne(308));qa=t,rh.dependencies={lanes:0,firstContext:t}}else qa=qa.next=t;return e}var Gs=null;function Gv(t){Gs===null?Gs=[t]:Gs.push(t)}function _S(t,e,r,i){var s=e.interleaved;return s===null?(r.next=r,Gv(e)):(r.next=s.next,s.next=r),e.interleaved=r,mi(t,i)}function mi(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Li=!1;function Kv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wS(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ci(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xi(t,e,r){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,$e&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,mi(t,r)}return s=i.interleaved,s===null?(e.next=e,Gv(i)):(e.next=s.next,s.next=e),i.interleaved=e,mi(t,r)}function wd(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,Nv(t,r)}}function dw(t,e){var r=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var s=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?s=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?s=a=e:a=a.next=e}else s=a=e;r={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:i.shared,effects:i.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function ih(t,e,r,i){var s=t.updateQueue;Li=!1;var a=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?a=d:o.next=d,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=u))}if(a!==null){var f=s.baseState;o=0,h=d=u=null,l=a;do{var p=l.lane,g=l.eventTime;if((i&p)===p){h!==null&&(h=h.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,A=l;switch(p=e,g=r,A.tag){case 1:if(_=A.payload,typeof _=="function"){f=_.call(g,f,p);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=A.payload,p=typeof _=="function"?_.call(g,f,p):_,p==null)break e;f=wt({},f,p);break e;case 2:Li=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else g={eventTime:g,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=g,u=f):h=h.next=g,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(h===null&&(u=f),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else a===null&&(s.shared.lanes=0);ta|=o,t.lanes=o,t.memoizedState=f}}function hw(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=r,typeof s!="function")throw Error(ne(191,s));s.call(i)}}}var $u={},Ur=ws($u),fu=ws($u),pu=ws($u);function Ks(t){if(t===$u)throw Error(ne(174));return t}function Yv(t,e){switch(ot(pu,e),ot(fu,t),ot(Ur,$u),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Bm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Bm(e,t)}ct(Ur),ot(Ur,e)}function ho(){ct(Ur),ct(fu),ct(pu)}function bS(t){Ks(pu.current);var e=Ks(Ur.current),r=Bm(e,t.type);e!==r&&(ot(fu,t),ot(Ur,r))}function Xv(t){fu.current===t&&(ct(Ur),ct(fu))}var vt=ws(0);function sh(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Lp=[];function Qv(){for(var t=0;t<Lp.length;t++)Lp[t]._workInProgressVersionPrimary=null;Lp.length=0}var bd=Ei.ReactCurrentDispatcher,Op=Ei.ReactCurrentBatchConfig,ea=0,_t=null,Rt=null,Ft=null,ah=!1,$l=!1,mu=0,PD=0;function on(){throw Error(ne(321))}function Jv(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ir(t[r],e[r]))return!1;return!0}function Zv(t,e,r,i,s,a){if(ea=a,_t=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bd.current=t===null||t.memoizedState===null?MD:LD,t=r(i,s),$l){a=0;do{if($l=!1,mu=0,25<=a)throw Error(ne(301));a+=1,Ft=Rt=null,e.updateQueue=null,bd.current=OD,t=r(i,s)}while($l)}if(bd.current=oh,e=Rt!==null&&Rt.next!==null,ea=0,Ft=Rt=_t=null,ah=!1,e)throw Error(ne(300));return t}function ey(){var t=mu!==0;return mu=0,t}function Lr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ft===null?_t.memoizedState=Ft=t:Ft=Ft.next=t,Ft}function lr(){if(Rt===null){var t=_t.alternate;t=t!==null?t.memoizedState:null}else t=Rt.next;var e=Ft===null?_t.memoizedState:Ft.next;if(e!==null)Ft=e,Rt=t;else{if(t===null)throw Error(ne(310));Rt=t,t={memoizedState:Rt.memoizedState,baseState:Rt.baseState,baseQueue:Rt.baseQueue,queue:Rt.queue,next:null},Ft===null?_t.memoizedState=Ft=t:Ft=Ft.next=t}return Ft}function gu(t,e){return typeof e=="function"?e(t):e}function jp(t){var e=lr(),r=e.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=t;var i=Rt,s=i.baseQueue,a=r.pending;if(a!==null){if(s!==null){var o=s.next;s.next=a.next,a.next=o}i.baseQueue=s=a,r.pending=null}if(s!==null){a=s.next,i=i.baseState;var l=o=null,u=null,d=a;do{var h=d.lane;if((ea&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),i=d.hasEagerState?d.eagerState:t(i,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=f,o=i):u=u.next=f,_t.lanes|=h,ta|=h}d=d.next}while(d!==null&&d!==a);u===null?o=i:u.next=l,Ir(i,e.memoizedState)||(Rn=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=u,r.lastRenderedState=i}if(t=r.interleaved,t!==null){s=t;do a=s.lane,_t.lanes|=a,ta|=a,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function Vp(t){var e=lr(),r=e.queue;if(r===null)throw Error(ne(311));r.lastRenderedReducer=t;var i=r.dispatch,s=r.pending,a=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do a=t(a,o.action),o=o.next;while(o!==s);Ir(a,e.memoizedState)||(Rn=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),r.lastRenderedState=a}return[a,i]}function xS(){}function ES(t,e){var r=_t,i=lr(),s=e(),a=!Ir(i.memoizedState,s);if(a&&(i.memoizedState=s,Rn=!0),i=i.queue,ty(IS.bind(null,r,i,t),[t]),i.getSnapshot!==e||a||Ft!==null&&Ft.memoizedState.tag&1){if(r.flags|=2048,vu(9,SS.bind(null,r,i,s,e),void 0,null),Ut===null)throw Error(ne(349));ea&30||TS(r,e,s)}return s}function TS(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function SS(t,e,r,i){e.value=r,e.getSnapshot=i,kS(e)&&CS(t)}function IS(t,e,r){return r(function(){kS(e)&&CS(t)})}function kS(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ir(t,r)}catch{return!0}}function CS(t){var e=mi(t,1);e!==null&&Sr(e,t,1,-1)}function fw(t){var e=Lr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:gu,lastRenderedState:t},e.queue=t,t=t.dispatch=ND.bind(null,_t,t),[e.memoizedState,t]}function vu(t,e,r,i){return t={tag:t,create:e,destroy:r,deps:i,next:null},e=_t.updateQueue,e===null?(e={lastEffect:null,stores:null},_t.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(i=r.next,r.next=t,t.next=i,e.lastEffect=t)),t}function AS(){return lr().memoizedState}function xd(t,e,r,i){var s=Lr();_t.flags|=t,s.memoizedState=vu(1|e,r,void 0,i===void 0?null:i)}function nf(t,e,r,i){var s=lr();i=i===void 0?null:i;var a=void 0;if(Rt!==null){var o=Rt.memoizedState;if(a=o.destroy,i!==null&&Jv(i,o.deps)){s.memoizedState=vu(e,r,a,i);return}}_t.flags|=t,s.memoizedState=vu(1|e,r,a,i)}function pw(t,e){return xd(8390656,8,t,e)}function ty(t,e){return nf(2048,8,t,e)}function PS(t,e){return nf(4,2,t,e)}function RS(t,e){return nf(4,4,t,e)}function DS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function NS(t,e,r){return r=r!=null?r.concat([t]):null,nf(4,4,DS.bind(null,e,t),r)}function ny(){}function MS(t,e){var r=lr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&Jv(e,i[1])?i[0]:(r.memoizedState=[t,e],t)}function LS(t,e){var r=lr();e=e===void 0?null:e;var i=r.memoizedState;return i!==null&&e!==null&&Jv(e,i[1])?i[0]:(t=t(),r.memoizedState=[t,e],t)}function OS(t,e,r){return ea&21?(Ir(r,e)||(r=UT(),_t.lanes|=r,ta|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rn=!0),t.memoizedState=r)}function RD(t,e){var r=et;et=r!==0&&4>r?r:4,t(!0);var i=Op.transition;Op.transition={};try{t(!1),e()}finally{et=r,Op.transition=i}}function jS(){return lr().memoizedState}function DD(t,e,r){var i=Ji(t);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},VS(t))FS(e,r);else if(r=_S(t,e,r,i),r!==null){var s=yn();Sr(r,t,i,s),US(r,e,i)}}function ND(t,e,r){var i=Ji(t),s={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(VS(t))FS(e,s);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,r);if(s.hasEagerState=!0,s.eagerState=l,Ir(l,o)){var u=e.interleaved;u===null?(s.next=s,Gv(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=_S(t,e,s,i),r!==null&&(s=yn(),Sr(r,t,i,s),US(r,e,i))}}function VS(t){var e=t.alternate;return t===_t||e!==null&&e===_t}function FS(t,e){$l=ah=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function US(t,e,r){if(r&4194240){var i=e.lanes;i&=t.pendingLanes,r|=i,e.lanes=r,Nv(t,r)}}var oh={readContext:or,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useInsertionEffect:on,useLayoutEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useMutableSource:on,useSyncExternalStore:on,useId:on,unstable_isNewReconciler:!1},MD={readContext:or,useCallback:function(t,e){return Lr().memoizedState=[t,e===void 0?null:e],t},useContext:or,useEffect:pw,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,xd(4194308,4,DS.bind(null,e,t),r)},useLayoutEffect:function(t,e){return xd(4194308,4,t,e)},useInsertionEffect:function(t,e){return xd(4,2,t,e)},useMemo:function(t,e){var r=Lr();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var i=Lr();return e=r!==void 0?r(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=DD.bind(null,_t,t),[i.memoizedState,t]},useRef:function(t){var e=Lr();return t={current:t},e.memoizedState=t},useState:fw,useDebugValue:ny,useDeferredValue:function(t){return Lr().memoizedState=t},useTransition:function(){var t=fw(!1),e=t[0];return t=RD.bind(null,t[1]),Lr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var i=_t,s=Lr();if(ft){if(r===void 0)throw Error(ne(407));r=r()}else{if(r=e(),Ut===null)throw Error(ne(349));ea&30||TS(i,e,r)}s.memoizedState=r;var a={value:r,getSnapshot:e};return s.queue=a,pw(IS.bind(null,i,a,t),[t]),i.flags|=2048,vu(9,SS.bind(null,i,a,r,e),void 0,null),r},useId:function(){var t=Lr(),e=Ut.identifierPrefix;if(ft){var r=ai,i=si;r=(i&~(1<<32-Tr(i)-1)).toString(32)+r,e=":"+e+"R"+r,r=mu++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=PD++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},LD={readContext:or,useCallback:MS,useContext:or,useEffect:ty,useImperativeHandle:NS,useInsertionEffect:PS,useLayoutEffect:RS,useMemo:LS,useReducer:jp,useRef:AS,useState:function(){return jp(gu)},useDebugValue:ny,useDeferredValue:function(t){var e=lr();return OS(e,Rt.memoizedState,t)},useTransition:function(){var t=jp(gu)[0],e=lr().memoizedState;return[t,e]},useMutableSource:xS,useSyncExternalStore:ES,useId:jS,unstable_isNewReconciler:!1},OD={readContext:or,useCallback:MS,useContext:or,useEffect:ty,useImperativeHandle:NS,useInsertionEffect:PS,useLayoutEffect:RS,useMemo:LS,useReducer:Vp,useRef:AS,useState:function(){return Vp(gu)},useDebugValue:ny,useDeferredValue:function(t){var e=lr();return Rt===null?e.memoizedState=t:OS(e,Rt.memoizedState,t)},useTransition:function(){var t=Vp(gu)[0],e=lr().memoizedState;return[t,e]},useMutableSource:xS,useSyncExternalStore:ES,useId:jS,unstable_isNewReconciler:!1};function _r(t,e){if(t&&t.defaultProps){e=wt({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function lg(t,e,r,i){e=t.memoizedState,r=r(i,e),r=r==null?e:wt({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var rf={isMounted:function(t){return(t=t._reactInternals)?da(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var i=yn(),s=Ji(t),a=ci(i,s);a.payload=e,r!=null&&(a.callback=r),e=Xi(t,a,s),e!==null&&(Sr(e,t,s,i),wd(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var i=yn(),s=Ji(t),a=ci(i,s);a.tag=1,a.payload=e,r!=null&&(a.callback=r),e=Xi(t,a,s),e!==null&&(Sr(e,t,s,i),wd(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=yn(),i=Ji(t),s=ci(r,i);s.tag=2,e!=null&&(s.callback=e),e=Xi(t,s,i),e!==null&&(Sr(e,t,i,r),wd(e,t,i))}};function mw(t,e,r,i,s,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,a,o):e.prototype&&e.prototype.isPureReactComponent?!uu(r,i)||!uu(s,a):!0}function BS(t,e,r){var i=!1,s=cs,a=e.contextType;return typeof a=="object"&&a!==null?a=or(a):(s=Mn(e)?Js:fn.current,i=e.contextTypes,a=(i=i!=null)?lo(t,s):cs),e=new e(r,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rf,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=a),e}function gw(t,e,r,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,i),e.state!==t&&rf.enqueueReplaceState(e,e.state,null)}function ug(t,e,r,i){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Kv(t);var a=e.contextType;typeof a=="object"&&a!==null?s.context=or(a):(a=Mn(e)?Js:fn.current,s.context=lo(t,a)),s.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(lg(t,e,a,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&rf.enqueueReplaceState(s,s.state,null),ih(t,r,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function fo(t,e){try{var r="",i=e;do r+=cR(i),i=i.return;while(i);var s=r}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:s,digest:null}}function Fp(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function cg(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var jD=typeof WeakMap=="function"?WeakMap:Map;function zS(t,e,r){r=ci(-1,r),r.tag=3,r.payload={element:null};var i=e.value;return r.callback=function(){uh||(uh=!0,wg=i),cg(t,e)},r}function $S(t,e,r){r=ci(-1,r),r.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;r.payload=function(){return i(s)},r.callback=function(){cg(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){cg(t,e),typeof i!="function"&&(Qi===null?Qi=new Set([this]):Qi.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function vw(t,e,r){var i=t.pingCache;if(i===null){i=t.pingCache=new jD;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(r)||(s.add(r),t=QD.bind(null,t,e,r),e.then(t,t))}function yw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _w(t,e,r,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=ci(-1,1),e.tag=2,Xi(r,e,1))),r.lanes|=1),t)}var VD=Ei.ReactCurrentOwner,Rn=!1;function vn(t,e,r,i){e.child=t===null?yS(e,null,r,i):co(e,t.child,r,i)}function ww(t,e,r,i,s){r=r.render;var a=e.ref;return eo(e,s),i=Zv(t,e,r,i,a,s),r=ey(),t!==null&&!Rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gi(t,e,s)):(ft&&r&&Bv(e),e.flags|=1,vn(t,e,i,s),e.child)}function bw(t,e,r,i,s){if(t===null){var a=r.type;return typeof a=="function"&&!cy(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=a,HS(t,e,a,i,s)):(t=Id(r.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&s)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:uu,r(o,i)&&t.ref===e.ref)return gi(t,e,s)}return e.flags|=1,t=Zi(a,i),t.ref=e.ref,t.return=e,e.child=t}function HS(t,e,r,i,s){if(t!==null){var a=t.memoizedProps;if(uu(a,i)&&t.ref===e.ref)if(Rn=!1,e.pendingProps=i=a,(t.lanes&s)!==0)t.flags&131072&&(Rn=!0);else return e.lanes=t.lanes,gi(t,e,s)}return dg(t,e,r,i,s)}function WS(t,e,r){var i=e.pendingProps,s=i.children,a=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ot(Ka,Vn),Vn|=r;else{if(!(r&1073741824))return t=a!==null?a.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ot(Ka,Vn),Vn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=a!==null?a.baseLanes:r,ot(Ka,Vn),Vn|=i}else a!==null?(i=a.baseLanes|r,e.memoizedState=null):i=r,ot(Ka,Vn),Vn|=i;return vn(t,e,s,r),e.child}function qS(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function dg(t,e,r,i,s){var a=Mn(r)?Js:fn.current;return a=lo(e,a),eo(e,s),r=Zv(t,e,r,i,a,s),i=ey(),t!==null&&!Rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,gi(t,e,s)):(ft&&i&&Bv(e),e.flags|=1,vn(t,e,r,s),e.child)}function xw(t,e,r,i,s){if(Mn(r)){var a=!0;Zd(e)}else a=!1;if(eo(e,s),e.stateNode===null)Ed(t,e),BS(e,r,i),ug(e,r,i,s),i=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=or(d):(d=Mn(r)?Js:fn.current,d=lo(e,d));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||u!==d)&&gw(e,o,i,d),Li=!1;var p=e.memoizedState;o.state=p,ih(e,i,o,s),u=e.memoizedState,l!==i||p!==u||Nn.current||Li?(typeof h=="function"&&(lg(e,r,h,i),u=e.memoizedState),(l=Li||mw(e,r,l,i,p,u,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=u),o.props=i,o.state=u,o.context=d,i=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,wS(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:_r(e.type,l),o.props=d,f=e.pendingProps,p=o.context,u=r.contextType,typeof u=="object"&&u!==null?u=or(u):(u=Mn(r)?Js:fn.current,u=lo(e,u));var g=r.getDerivedStateFromProps;(h=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||p!==u)&&gw(e,o,i,u),Li=!1,p=e.memoizedState,o.state=p,ih(e,i,o,s);var _=e.memoizedState;l!==f||p!==_||Nn.current||Li?(typeof g=="function"&&(lg(e,r,g,i),_=e.memoizedState),(d=Li||mw(e,r,d,i,p,_,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,_,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,_,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=_),o.props=i,o.state=_,o.context=u,i=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),i=!1)}return hg(t,e,r,i,a,s)}function hg(t,e,r,i,s,a){qS(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return s&&ow(e,r,!1),gi(t,e,a);i=e.stateNode,VD.current=e;var l=o&&typeof r.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=co(e,t.child,null,a),e.child=co(e,null,l,a)):vn(t,e,l,a),e.memoizedState=i.state,s&&ow(e,r,!0),e.child}function GS(t){var e=t.stateNode;e.pendingContext?aw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&aw(t,e.context,!1),Yv(t,e.containerInfo)}function Ew(t,e,r,i,s){return uo(),$v(s),e.flags|=256,vn(t,e,r,i),e.child}var fg={dehydrated:null,treeContext:null,retryLane:0};function pg(t){return{baseLanes:t,cachePool:null,transitions:null}}function KS(t,e,r){var i=e.pendingProps,s=vt.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ot(vt,s&1),t===null)return ag(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,a?(i=e.mode,a=e.child,o={mode:"hidden",children:o},!(i&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=of(o,i,0,null),t=Qs(t,i,r,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=pg(r),e.memoizedState=fg,t):ry(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return FD(t,e,o,i,l,s,r);if(a){a=i.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:i.children};return!(o&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=u,e.deletions=null):(i=Zi(s,u),i.subtreeFlags=s.subtreeFlags&14680064),l!==null?a=Zi(l,a):(a=Qs(a,o,r,null),a.flags|=2),a.return=e,i.return=e,i.sibling=a,e.child=i,i=a,a=e.child,o=t.child.memoizedState,o=o===null?pg(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~r,e.memoizedState=fg,i}return a=t.child,t=a.sibling,i=Zi(a,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=r),i.return=e,i.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=i,e.memoizedState=null,i}function ry(t,e){return e=of({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Kc(t,e,r,i){return i!==null&&$v(i),co(e,t.child,null,r),t=ry(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function FD(t,e,r,i,s,a,o){if(r)return e.flags&256?(e.flags&=-257,i=Fp(Error(ne(422))),Kc(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=i.fallback,s=e.mode,i=of({mode:"visible",children:i.children},s,0,null),a=Qs(a,s,o,null),a.flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,e.mode&1&&co(e,t.child,null,o),e.child.memoizedState=pg(o),e.memoizedState=fg,a);if(!(e.mode&1))return Kc(t,e,o,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var l=i.dgst;return i=l,a=Error(ne(419)),i=Fp(a,i,void 0),Kc(t,e,o,i)}if(l=(o&t.childLanes)!==0,Rn||l){if(i=Ut,i!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|o)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,mi(t,s),Sr(i,t,s,-1))}return uy(),i=Fp(Error(ne(421))),Kc(t,e,o,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=JD.bind(null,t),s._reactRetry=e,null):(t=a.treeContext,Fn=Yi(s.nextSibling),zn=e,ft=!0,br=null,t!==null&&(Jn[Zn++]=si,Jn[Zn++]=ai,Jn[Zn++]=Zs,si=t.id,ai=t.overflow,Zs=e),e=ry(e,i.children),e.flags|=4096,e)}function Tw(t,e,r){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),og(t.return,e,r)}function Up(t,e,r,i,s){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:s}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=r,a.tailMode=s)}function YS(t,e,r){var i=e.pendingProps,s=i.revealOrder,a=i.tail;if(vn(t,e,i.children,r),i=vt.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Tw(t,r,e);else if(t.tag===19)Tw(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ot(vt,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&sh(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),Up(e,!1,s,r,a);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&sh(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}Up(e,!0,r,null,a);break;case"together":Up(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ed(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function gi(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),ta|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ne(153));if(e.child!==null){for(t=e.child,r=Zi(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Zi(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function UD(t,e,r){switch(e.tag){case 3:GS(e),uo();break;case 5:bS(e);break;case 1:Mn(e.type)&&Zd(e);break;case 4:Yv(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;ot(nh,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(ot(vt,vt.current&1),e.flags|=128,null):r&e.child.childLanes?KS(t,e,r):(ot(vt,vt.current&1),t=gi(t,e,r),t!==null?t.sibling:null);ot(vt,vt.current&1);break;case 19:if(i=(r&e.childLanes)!==0,t.flags&128){if(i)return YS(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ot(vt,vt.current),i)break;return null;case 22:case 23:return e.lanes=0,WS(t,e,r)}return gi(t,e,r)}var XS,mg,QS,JS;XS=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};mg=function(){};QS=function(t,e,r,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,Ks(Ur.current);var a=null;switch(r){case"input":s=jm(t,s),i=jm(t,i),a=[];break;case"select":s=wt({},s,{value:void 0}),i=wt({},i,{value:void 0}),a=[];break;case"textarea":s=Um(t,s),i=Um(t,i),a=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Qd)}zm(r,i);var o;r=null;for(d in s)if(!i.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(nu.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in i){var u=i[d];if(l=s!=null?s[d]:void 0,i.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(r||(r={}),r[o]=u[o])}else r||(a||(a=[]),a.push(d,r)),r=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(a=a||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(a=a||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(nu.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ut("scroll",t),a||l===u||(a=[])):(a=a||[]).push(d,u))}r&&(a=a||[]).push("style",r);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};JS=function(t,e,r,i){r!==i&&(e.flags|=4)};function ml(t,e){if(!ft)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ln(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,i=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=r,e}function BD(t,e,r){var i=e.pendingProps;switch(zv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ln(e),null;case 1:return Mn(e.type)&&Jd(),ln(e),null;case 3:return i=e.stateNode,ho(),ct(Nn),ct(fn),Qv(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(qc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,br!==null&&(Eg(br),br=null))),mg(t,e),ln(e),null;case 5:Xv(e);var s=Ks(pu.current);if(r=e.type,t!==null&&e.stateNode!=null)QS(t,e,r,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ne(166));return ln(e),null}if(t=Ks(Ur.current),qc(e)){i=e.stateNode,r=e.type;var a=e.memoizedProps;switch(i[Vr]=e,i[hu]=a,t=(e.mode&1)!==0,r){case"dialog":ut("cancel",i),ut("close",i);break;case"iframe":case"object":case"embed":ut("load",i);break;case"video":case"audio":for(s=0;s<Al.length;s++)ut(Al[s],i);break;case"source":ut("error",i);break;case"img":case"image":case"link":ut("error",i),ut("load",i);break;case"details":ut("toggle",i);break;case"input":N0(i,a),ut("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},ut("invalid",i);break;case"textarea":L0(i,a),ut("invalid",i)}zm(r,a),s=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?i.textContent!==l&&(a.suppressHydrationWarning!==!0&&Wc(i.textContent,l,t),s=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&Wc(i.textContent,l,t),s=["children",""+l]):nu.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ut("scroll",i)}switch(r){case"input":jc(i),M0(i,a,!0);break;case"textarea":jc(i),O0(i);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(i.onclick=Qd)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ST(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(r,{is:i.is}):(t=o.createElement(r),r==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,r),t[Vr]=e,t[hu]=i,XS(t,e,!1,!1),e.stateNode=t;e:{switch(o=$m(r,i),r){case"dialog":ut("cancel",t),ut("close",t),s=i;break;case"iframe":case"object":case"embed":ut("load",t),s=i;break;case"video":case"audio":for(s=0;s<Al.length;s++)ut(Al[s],t);s=i;break;case"source":ut("error",t),s=i;break;case"img":case"image":case"link":ut("error",t),ut("load",t),s=i;break;case"details":ut("toggle",t),s=i;break;case"input":N0(t,i),s=jm(t,i),ut("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=wt({},i,{value:void 0}),ut("invalid",t);break;case"textarea":L0(t,i),s=Um(t,i),ut("invalid",t);break;default:s=i}zm(r,s),l=s;for(a in l)if(l.hasOwnProperty(a)){var u=l[a];a==="style"?CT(t,u):a==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&IT(t,u)):a==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&ru(t,u):typeof u=="number"&&ru(t,""+u):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(nu.hasOwnProperty(a)?u!=null&&a==="onScroll"&&ut("scroll",t):u!=null&&kv(t,a,u,o))}switch(r){case"input":jc(t),M0(t,i,!1);break;case"textarea":jc(t),O0(t);break;case"option":i.value!=null&&t.setAttribute("value",""+us(i.value));break;case"select":t.multiple=!!i.multiple,a=i.value,a!=null?Xa(t,!!i.multiple,a,!1):i.defaultValue!=null&&Xa(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Qd)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ln(e),null;case 6:if(t&&e.stateNode!=null)JS(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ne(166));if(r=Ks(pu.current),Ks(Ur.current),qc(e)){if(i=e.stateNode,r=e.memoizedProps,i[Vr]=e,(a=i.nodeValue!==r)&&(t=zn,t!==null))switch(t.tag){case 3:Wc(i.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Wc(i.nodeValue,r,(t.mode&1)!==0)}a&&(e.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Vr]=e,e.stateNode=i}return ln(e),null;case 13:if(ct(vt),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ft&&Fn!==null&&e.mode&1&&!(e.flags&128))gS(),uo(),e.flags|=98560,a=!1;else if(a=qc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!a)throw Error(ne(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ne(317));a[Vr]=e}else uo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ln(e),a=!1}else br!==null&&(Eg(br),br=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||vt.current&1?Nt===0&&(Nt=3):uy())),e.updateQueue!==null&&(e.flags|=4),ln(e),null);case 4:return ho(),mg(t,e),t===null&&cu(e.stateNode.containerInfo),ln(e),null;case 10:return qv(e.type._context),ln(e),null;case 17:return Mn(e.type)&&Jd(),ln(e),null;case 19:if(ct(vt),a=e.memoizedState,a===null)return ln(e),null;if(i=(e.flags&128)!==0,o=a.rendering,o===null)if(i)ml(a,!1);else{if(Nt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=sh(t),o!==null){for(e.flags|=128,ml(a,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=r,r=e.child;r!==null;)a=r,t=i,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ot(vt,vt.current&1|2),e.child}t=t.sibling}a.tail!==null&&kt()>po&&(e.flags|=128,i=!0,ml(a,!1),e.lanes=4194304)}else{if(!i)if(t=sh(o),t!==null){if(e.flags|=128,i=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ml(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!ft)return ln(e),null}else 2*kt()-a.renderingStartTime>po&&r!==1073741824&&(e.flags|=128,i=!0,ml(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(r=a.last,r!==null?r.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=kt(),e.sibling=null,r=vt.current,ot(vt,i?r&1|2:r&1),e):(ln(e),null);case 22:case 23:return ly(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Vn&1073741824&&(ln(e),e.subtreeFlags&6&&(e.flags|=8192)):ln(e),null;case 24:return null;case 25:return null}throw Error(ne(156,e.tag))}function zD(t,e){switch(zv(e),e.tag){case 1:return Mn(e.type)&&Jd(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ho(),ct(Nn),ct(fn),Qv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xv(e),null;case 13:if(ct(vt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ne(340));uo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ct(vt),null;case 4:return ho(),null;case 10:return qv(e.type._context),null;case 22:case 23:return ly(),null;case 24:return null;default:return null}}var Yc=!1,dn=!1,$D=typeof WeakSet=="function"?WeakSet:Set,pe=null;function Ga(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){Tt(t,e,i)}else r.current=null}function gg(t,e,r){try{r()}catch(i){Tt(t,e,i)}}var Sw=!1;function HD(t,e){if(Zm=Kd,t=rS(),Uv(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var s=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,l=-1,u=-1,d=0,h=0,f=t,p=null;t:for(;;){for(var g;f!==r||s!==0&&f.nodeType!==3||(l=o+s),f!==a||i!==0&&f.nodeType!==3||(u=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)p=f,f=g;for(;;){if(f===t)break t;if(p===r&&++d===s&&(l=o),p===a&&++h===i&&(u=o),(g=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=g}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(eg={focusedElem:t,selectionRange:r},Kd=!1,pe=e;pe!==null;)if(e=pe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,pe=t;else for(;pe!==null;){e=pe;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var A=_.memoizedProps,P=_.memoizedState,S=e.stateNode,w=S.getSnapshotBeforeUpdate(e.elementType===e.type?A:_r(e.type,A),P);S.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ne(163))}}catch(R){Tt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,pe=t;break}pe=e.return}return _=Sw,Sw=!1,_}function Hl(t,e,r){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var a=s.destroy;s.destroy=void 0,a!==void 0&&gg(e,r,a)}s=s.next}while(s!==i)}}function sf(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var i=r.create;r.destroy=i()}r=r.next}while(r!==e)}}function vg(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function ZS(t){var e=t.alternate;e!==null&&(t.alternate=null,ZS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vr],delete e[hu],delete e[rg],delete e[ID],delete e[kD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function eI(t){return t.tag===5||t.tag===3||t.tag===4}function Iw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||eI(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function yg(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Qd));else if(i!==4&&(t=t.child,t!==null))for(yg(t,e,r),t=t.sibling;t!==null;)yg(t,e,r),t=t.sibling}function _g(t,e,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(_g(t,e,r),t=t.sibling;t!==null;)_g(t,e,r),t=t.sibling}var Gt=null,wr=!1;function Ri(t,e,r){for(r=r.child;r!==null;)tI(t,e,r),r=r.sibling}function tI(t,e,r){if(Fr&&typeof Fr.onCommitFiberUnmount=="function")try{Fr.onCommitFiberUnmount(Xh,r)}catch{}switch(r.tag){case 5:dn||Ga(r,e);case 6:var i=Gt,s=wr;Gt=null,Ri(t,e,r),Gt=i,wr=s,Gt!==null&&(wr?(t=Gt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Gt.removeChild(r.stateNode));break;case 18:Gt!==null&&(wr?(t=Gt,r=r.stateNode,t.nodeType===8?Np(t.parentNode,r):t.nodeType===1&&Np(t,r),ou(t)):Np(Gt,r.stateNode));break;case 4:i=Gt,s=wr,Gt=r.stateNode.containerInfo,wr=!0,Ri(t,e,r),Gt=i,wr=s;break;case 0:case 11:case 14:case 15:if(!dn&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var a=s,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&gg(r,e,o),s=s.next}while(s!==i)}Ri(t,e,r);break;case 1:if(!dn&&(Ga(r,e),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(l){Tt(r,e,l)}Ri(t,e,r);break;case 21:Ri(t,e,r);break;case 22:r.mode&1?(dn=(i=dn)||r.memoizedState!==null,Ri(t,e,r),dn=i):Ri(t,e,r);break;default:Ri(t,e,r)}}function kw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new $D),e.forEach(function(i){var s=ZD.bind(null,t,i);r.has(i)||(r.add(i),i.then(s,s))})}}function vr(t,e){var r=e.deletions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Gt=l.stateNode,wr=!1;break e;case 3:Gt=l.stateNode.containerInfo,wr=!0;break e;case 4:Gt=l.stateNode.containerInfo,wr=!0;break e}l=l.return}if(Gt===null)throw Error(ne(160));tI(a,o,s),Gt=null,wr=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Tt(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nI(e,t),e=e.sibling}function nI(t,e){var r=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vr(e,t),Nr(t),i&4){try{Hl(3,t,t.return),sf(3,t)}catch(A){Tt(t,t.return,A)}try{Hl(5,t,t.return)}catch(A){Tt(t,t.return,A)}}break;case 1:vr(e,t),Nr(t),i&512&&r!==null&&Ga(r,r.return);break;case 5:if(vr(e,t),Nr(t),i&512&&r!==null&&Ga(r,r.return),t.flags&32){var s=t.stateNode;try{ru(s,"")}catch(A){Tt(t,t.return,A)}}if(i&4&&(s=t.stateNode,s!=null)){var a=t.memoizedProps,o=r!==null?r.memoizedProps:a,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&ET(s,a),$m(l,o);var d=$m(l,a);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?CT(s,f):h==="dangerouslySetInnerHTML"?IT(s,f):h==="children"?ru(s,f):kv(s,h,f,d)}switch(l){case"input":Vm(s,a);break;case"textarea":TT(s,a);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var g=a.value;g!=null?Xa(s,!!a.multiple,g,!1):p!==!!a.multiple&&(a.defaultValue!=null?Xa(s,!!a.multiple,a.defaultValue,!0):Xa(s,!!a.multiple,a.multiple?[]:"",!1))}s[hu]=a}catch(A){Tt(t,t.return,A)}}break;case 6:if(vr(e,t),Nr(t),i&4){if(t.stateNode===null)throw Error(ne(162));s=t.stateNode,a=t.memoizedProps;try{s.nodeValue=a}catch(A){Tt(t,t.return,A)}}break;case 3:if(vr(e,t),Nr(t),i&4&&r!==null&&r.memoizedState.isDehydrated)try{ou(e.containerInfo)}catch(A){Tt(t,t.return,A)}break;case 4:vr(e,t),Nr(t);break;case 13:vr(e,t),Nr(t),s=t.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(ay=kt())),i&4&&kw(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(dn=(d=dn)||h,vr(e,t),dn=d):vr(e,t),Nr(t),i&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(pe=t,h=t.child;h!==null;){for(f=pe=h;pe!==null;){switch(p=pe,g=p.child,p.tag){case 0:case 11:case 14:case 15:Hl(4,p,p.return);break;case 1:Ga(p,p.return);var _=p.stateNode;if(typeof _.componentWillUnmount=="function"){i=p,r=p.return;try{e=i,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(A){Tt(i,r,A)}}break;case 5:Ga(p,p.return);break;case 22:if(p.memoizedState!==null){Aw(f);continue}}g!==null?(g.return=p,pe=g):Aw(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,d?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=kT("display",o))}catch(A){Tt(t,t.return,A)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(A){Tt(t,t.return,A)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:vr(e,t),Nr(t),i&4&&kw(t);break;case 21:break;default:vr(e,t),Nr(t)}}function Nr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(eI(r)){var i=r;break e}r=r.return}throw Error(ne(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(ru(s,""),i.flags&=-33);var a=Iw(t);_g(t,a,s);break;case 3:case 4:var o=i.stateNode.containerInfo,l=Iw(t);yg(t,l,o);break;default:throw Error(ne(161))}}catch(u){Tt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function WD(t,e,r){pe=t,rI(t)}function rI(t,e,r){for(var i=(t.mode&1)!==0;pe!==null;){var s=pe,a=s.child;if(s.tag===22&&i){var o=s.memoizedState!==null||Yc;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||dn;l=Yc;var d=dn;if(Yc=o,(dn=u)&&!d)for(pe=s;pe!==null;)o=pe,u=o.child,o.tag===22&&o.memoizedState!==null?Pw(s):u!==null?(u.return=o,pe=u):Pw(s);for(;a!==null;)pe=a,rI(a),a=a.sibling;pe=s,Yc=l,dn=d}Cw(t)}else s.subtreeFlags&8772&&a!==null?(a.return=s,pe=a):Cw(t)}}function Cw(t){for(;pe!==null;){var e=pe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dn||sf(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!dn)if(r===null)i.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:_r(e.type,r.memoizedProps);i.componentDidUpdate(s,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&hw(e,a,i);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}hw(e,o,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&ou(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ne(163))}dn||e.flags&512&&vg(e)}catch(p){Tt(e,e.return,p)}}if(e===t){pe=null;break}if(r=e.sibling,r!==null){r.return=e.return,pe=r;break}pe=e.return}}function Aw(t){for(;pe!==null;){var e=pe;if(e===t){pe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,pe=r;break}pe=e.return}}function Pw(t){for(;pe!==null;){var e=pe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{sf(4,e)}catch(u){Tt(e,r,u)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(u){Tt(e,s,u)}}var a=e.return;try{vg(e)}catch(u){Tt(e,a,u)}break;case 5:var o=e.return;try{vg(e)}catch(u){Tt(e,o,u)}}}catch(u){Tt(e,e.return,u)}if(e===t){pe=null;break}var l=e.sibling;if(l!==null){l.return=e.return,pe=l;break}pe=e.return}}var qD=Math.ceil,lh=Ei.ReactCurrentDispatcher,iy=Ei.ReactCurrentOwner,ir=Ei.ReactCurrentBatchConfig,$e=0,Ut=null,Pt=null,Jt=0,Vn=0,Ka=ws(0),Nt=0,yu=null,ta=0,af=0,sy=0,Wl=null,An=null,ay=0,po=1/0,ri=null,uh=!1,wg=null,Qi=null,Xc=!1,Hi=null,ch=0,ql=0,bg=null,Td=-1,Sd=0;function yn(){return $e&6?kt():Td!==-1?Td:Td=kt()}function Ji(t){return t.mode&1?$e&2&&Jt!==0?Jt&-Jt:AD.transition!==null?(Sd===0&&(Sd=UT()),Sd):(t=et,t!==0||(t=window.event,t=t===void 0?16:GT(t.type)),t):1}function Sr(t,e,r,i){if(50<ql)throw ql=0,bg=null,Error(ne(185));Uu(t,r,i),(!($e&2)||t!==Ut)&&(t===Ut&&(!($e&2)&&(af|=r),Nt===4&&Vi(t,Jt)),Ln(t,i),r===1&&$e===0&&!(e.mode&1)&&(po=kt()+500,tf&&bs()))}function Ln(t,e){var r=t.callbackNode;AR(t,e);var i=Gd(t,t===Ut?Jt:0);if(i===0)r!==null&&F0(r),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(r!=null&&F0(r),e===1)t.tag===0?CD(Rw.bind(null,t)):fS(Rw.bind(null,t)),TD(function(){!($e&6)&&bs()}),r=null;else{switch(BT(i)){case 1:r=Dv;break;case 4:r=VT;break;case 16:r=qd;break;case 536870912:r=FT;break;default:r=qd}r=dI(r,iI.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function iI(t,e){if(Td=-1,Sd=0,$e&6)throw Error(ne(327));var r=t.callbackNode;if(to()&&t.callbackNode!==r)return null;var i=Gd(t,t===Ut?Jt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=dh(t,i);else{e=i;var s=$e;$e|=2;var a=aI();(Ut!==t||Jt!==e)&&(ri=null,po=kt()+500,Xs(t,e));do try{YD();break}catch(l){sI(t,l)}while(!0);Wv(),lh.current=a,$e=s,Pt!==null?e=0:(Ut=null,Jt=0,e=Nt)}if(e!==0){if(e===2&&(s=Km(t),s!==0&&(i=s,e=xg(t,s))),e===1)throw r=yu,Xs(t,0),Vi(t,i),Ln(t,kt()),r;if(e===6)Vi(t,i);else{if(s=t.current.alternate,!(i&30)&&!GD(s)&&(e=dh(t,i),e===2&&(a=Km(t),a!==0&&(i=a,e=xg(t,a))),e===1))throw r=yu,Xs(t,0),Vi(t,i),Ln(t,kt()),r;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(ne(345));case 2:Us(t,An,ri);break;case 3:if(Vi(t,i),(i&130023424)===i&&(e=ay+500-kt(),10<e)){if(Gd(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){yn(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ng(Us.bind(null,t,An,ri),e);break}Us(t,An,ri);break;case 4:if(Vi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var o=31-Tr(i);a=1<<o,o=e[o],o>s&&(s=o),i&=~a}if(i=s,i=kt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*qD(i/1960))-i,10<i){t.timeoutHandle=ng(Us.bind(null,t,An,ri),i);break}Us(t,An,ri);break;case 5:Us(t,An,ri);break;default:throw Error(ne(329))}}}return Ln(t,kt()),t.callbackNode===r?iI.bind(null,t):null}function xg(t,e){var r=Wl;return t.current.memoizedState.isDehydrated&&(Xs(t,e).flags|=256),t=dh(t,e),t!==2&&(e=An,An=r,e!==null&&Eg(e)),t}function Eg(t){An===null?An=t:An.push.apply(An,t)}function GD(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var s=r[i],a=s.getSnapshot;s=s.value;try{if(!Ir(a(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Vi(t,e){for(e&=~sy,e&=~af,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Tr(e),i=1<<r;t[r]=-1,e&=~i}}function Rw(t){if($e&6)throw Error(ne(327));to();var e=Gd(t,0);if(!(e&1))return Ln(t,kt()),null;var r=dh(t,e);if(t.tag!==0&&r===2){var i=Km(t);i!==0&&(e=i,r=xg(t,i))}if(r===1)throw r=yu,Xs(t,0),Vi(t,e),Ln(t,kt()),r;if(r===6)throw Error(ne(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Us(t,An,ri),Ln(t,kt()),null}function oy(t,e){var r=$e;$e|=1;try{return t(e)}finally{$e=r,$e===0&&(po=kt()+500,tf&&bs())}}function na(t){Hi!==null&&Hi.tag===0&&!($e&6)&&to();var e=$e;$e|=1;var r=ir.transition,i=et;try{if(ir.transition=null,et=1,t)return t()}finally{et=i,ir.transition=r,$e=e,!($e&6)&&bs()}}function ly(){Vn=Ka.current,ct(Ka)}function Xs(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,ED(r)),Pt!==null)for(r=Pt.return;r!==null;){var i=r;switch(zv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Jd();break;case 3:ho(),ct(Nn),ct(fn),Qv();break;case 5:Xv(i);break;case 4:ho();break;case 13:ct(vt);break;case 19:ct(vt);break;case 10:qv(i.type._context);break;case 22:case 23:ly()}r=r.return}if(Ut=t,Pt=t=Zi(t.current,null),Jt=Vn=e,Nt=0,yu=null,sy=af=ta=0,An=Wl=null,Gs!==null){for(e=0;e<Gs.length;e++)if(r=Gs[e],i=r.interleaved,i!==null){r.interleaved=null;var s=i.next,a=r.pending;if(a!==null){var o=a.next;a.next=s,i.next=o}r.pending=i}Gs=null}return t}function sI(t,e){do{var r=Pt;try{if(Wv(),bd.current=oh,ah){for(var i=_t.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}ah=!1}if(ea=0,Ft=Rt=_t=null,$l=!1,mu=0,iy.current=null,r===null||r.return===null){Nt=1,yu=e,Pt=null;break}e:{var a=t,o=r.return,l=r,u=e;if(e=Jt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var g=yw(o);if(g!==null){g.flags&=-257,_w(g,o,l,a,e),g.mode&1&&vw(a,d,e),e=g,u=d;var _=e.updateQueue;if(_===null){var A=new Set;A.add(u),e.updateQueue=A}else _.add(u);break e}else{if(!(e&1)){vw(a,d,e),uy();break e}u=Error(ne(426))}}else if(ft&&l.mode&1){var P=yw(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),_w(P,o,l,a,e),$v(fo(u,l));break e}}a=u=fo(u,l),Nt!==4&&(Nt=2),Wl===null?Wl=[a]:Wl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var S=zS(a,u,e);dw(a,S);break e;case 1:l=u;var w=a.type,x=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Qi===null||!Qi.has(x)))){a.flags|=65536,e&=-e,a.lanes|=e;var R=$S(a,l,e);dw(a,R);break e}}a=a.return}while(a!==null)}lI(r)}catch(F){e=F,Pt===r&&r!==null&&(Pt=r=r.return);continue}break}while(!0)}function aI(){var t=lh.current;return lh.current=oh,t===null?oh:t}function uy(){(Nt===0||Nt===3||Nt===2)&&(Nt=4),Ut===null||!(ta&268435455)&&!(af&268435455)||Vi(Ut,Jt)}function dh(t,e){var r=$e;$e|=2;var i=aI();(Ut!==t||Jt!==e)&&(ri=null,Xs(t,e));do try{KD();break}catch(s){sI(t,s)}while(!0);if(Wv(),$e=r,lh.current=i,Pt!==null)throw Error(ne(261));return Ut=null,Jt=0,Nt}function KD(){for(;Pt!==null;)oI(Pt)}function YD(){for(;Pt!==null&&!wR();)oI(Pt)}function oI(t){var e=cI(t.alternate,t,Vn);t.memoizedProps=t.pendingProps,e===null?lI(t):Pt=e,iy.current=null}function lI(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=zD(r,e),r!==null){r.flags&=32767,Pt=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Nt=6,Pt=null;return}}else if(r=BD(r,e,Vn),r!==null){Pt=r;return}if(e=e.sibling,e!==null){Pt=e;return}Pt=e=t}while(e!==null);Nt===0&&(Nt=5)}function Us(t,e,r){var i=et,s=ir.transition;try{ir.transition=null,et=1,XD(t,e,r,i)}finally{ir.transition=s,et=i}return null}function XD(t,e,r,i){do to();while(Hi!==null);if($e&6)throw Error(ne(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(ne(177));t.callbackNode=null,t.callbackPriority=0;var a=r.lanes|r.childLanes;if(PR(t,a),t===Ut&&(Pt=Ut=null,Jt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Xc||(Xc=!0,dI(qd,function(){return to(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=ir.transition,ir.transition=null;var o=et;et=1;var l=$e;$e|=4,iy.current=null,HD(t,r),nI(r,t),gD(eg),Kd=!!Zm,eg=Zm=null,t.current=r,WD(r),bR(),$e=l,et=o,ir.transition=a}else t.current=r;if(Xc&&(Xc=!1,Hi=t,ch=s),a=t.pendingLanes,a===0&&(Qi=null),TR(r.stateNode),Ln(t,kt()),e!==null)for(i=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],i(s.value,{componentStack:s.stack,digest:s.digest});if(uh)throw uh=!1,t=wg,wg=null,t;return ch&1&&t.tag!==0&&to(),a=t.pendingLanes,a&1?t===bg?ql++:(ql=0,bg=t):ql=0,bs(),null}function to(){if(Hi!==null){var t=BT(ch),e=ir.transition,r=et;try{if(ir.transition=null,et=16>t?16:t,Hi===null)var i=!1;else{if(t=Hi,Hi=null,ch=0,$e&6)throw Error(ne(331));var s=$e;for($e|=4,pe=t.current;pe!==null;){var a=pe,o=a.child;if(pe.flags&16){var l=a.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(pe=d;pe!==null;){var h=pe;switch(h.tag){case 0:case 11:case 15:Hl(8,h,a)}var f=h.child;if(f!==null)f.return=h,pe=f;else for(;pe!==null;){h=pe;var p=h.sibling,g=h.return;if(ZS(h),h===d){pe=null;break}if(p!==null){p.return=g,pe=p;break}pe=g}}}var _=a.alternate;if(_!==null){var A=_.child;if(A!==null){_.child=null;do{var P=A.sibling;A.sibling=null,A=P}while(A!==null)}}pe=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,pe=o;else e:for(;pe!==null;){if(a=pe,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Hl(9,a,a.return)}var S=a.sibling;if(S!==null){S.return=a.return,pe=S;break e}pe=a.return}}var w=t.current;for(pe=w;pe!==null;){o=pe;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,pe=x;else e:for(o=w;pe!==null;){if(l=pe,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:sf(9,l)}}catch(F){Tt(l,l.return,F)}if(l===o){pe=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,pe=R;break e}pe=l.return}}if($e=s,bs(),Fr&&typeof Fr.onPostCommitFiberRoot=="function")try{Fr.onPostCommitFiberRoot(Xh,t)}catch{}i=!0}return i}finally{et=r,ir.transition=e}}return!1}function Dw(t,e,r){e=fo(r,e),e=zS(t,e,1),t=Xi(t,e,1),e=yn(),t!==null&&(Uu(t,1,e),Ln(t,e))}function Tt(t,e,r){if(t.tag===3)Dw(t,t,r);else for(;e!==null;){if(e.tag===3){Dw(e,t,r);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Qi===null||!Qi.has(i))){t=fo(r,t),t=$S(e,t,1),e=Xi(e,t,1),t=yn(),e!==null&&(Uu(e,1,t),Ln(e,t));break}}e=e.return}}function QD(t,e,r){var i=t.pingCache;i!==null&&i.delete(e),e=yn(),t.pingedLanes|=t.suspendedLanes&r,Ut===t&&(Jt&r)===r&&(Nt===4||Nt===3&&(Jt&130023424)===Jt&&500>kt()-ay?Xs(t,0):sy|=r),Ln(t,e)}function uI(t,e){e===0&&(t.mode&1?(e=Uc,Uc<<=1,!(Uc&130023424)&&(Uc=4194304)):e=1);var r=yn();t=mi(t,e),t!==null&&(Uu(t,e,r),Ln(t,r))}function JD(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),uI(t,r)}function ZD(t,e){var r=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(ne(314))}i!==null&&i.delete(e),uI(t,r)}var cI;cI=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Nn.current)Rn=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Rn=!1,UD(t,e,r);Rn=!!(t.flags&131072)}else Rn=!1,ft&&e.flags&1048576&&pS(e,th,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Ed(t,e),t=e.pendingProps;var s=lo(e,fn.current);eo(e,r),s=Zv(null,e,i,t,s,r);var a=ey();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Mn(i)?(a=!0,Zd(e)):a=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Kv(e),s.updater=rf,e.stateNode=s,s._reactInternals=e,ug(e,i,t,r),e=hg(null,e,i,!0,a,r)):(e.tag=0,ft&&a&&Bv(e),vn(null,e,s,r),e=e.child),e;case 16:i=e.elementType;e:{switch(Ed(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=tN(i),t=_r(i,t),s){case 0:e=dg(null,e,i,t,r);break e;case 1:e=xw(null,e,i,t,r);break e;case 11:e=ww(null,e,i,t,r);break e;case 14:e=bw(null,e,i,_r(i.type,t),r);break e}throw Error(ne(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:_r(i,s),dg(t,e,i,s,r);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:_r(i,s),xw(t,e,i,s,r);case 3:e:{if(GS(e),t===null)throw Error(ne(387));i=e.pendingProps,a=e.memoizedState,s=a.element,wS(t,e),ih(e,i,null,r);var o=e.memoizedState;if(i=o.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){s=fo(Error(ne(423)),e),e=Ew(t,e,i,r,s);break e}else if(i!==s){s=fo(Error(ne(424)),e),e=Ew(t,e,i,r,s);break e}else for(Fn=Yi(e.stateNode.containerInfo.firstChild),zn=e,ft=!0,br=null,r=yS(e,null,i,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(uo(),i===s){e=gi(t,e,r);break e}vn(t,e,i,r)}e=e.child}return e;case 5:return bS(e),t===null&&ag(e),i=e.type,s=e.pendingProps,a=t!==null?t.memoizedProps:null,o=s.children,tg(i,s)?o=null:a!==null&&tg(i,a)&&(e.flags|=32),qS(t,e),vn(t,e,o,r),e.child;case 6:return t===null&&ag(e),null;case 13:return KS(t,e,r);case 4:return Yv(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=co(e,null,i,r):vn(t,e,i,r),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:_r(i,s),ww(t,e,i,s,r);case 7:return vn(t,e,e.pendingProps,r),e.child;case 8:return vn(t,e,e.pendingProps.children,r),e.child;case 12:return vn(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,a=e.memoizedProps,o=s.value,ot(nh,i._currentValue),i._currentValue=o,a!==null)if(Ir(a.value,o)){if(a.children===s.children&&!Nn.current){e=gi(t,e,r);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var u=l.firstContext;u!==null;){if(u.context===i){if(a.tag===1){u=ci(-1,r&-r),u.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}a.lanes|=r,u=a.alternate,u!==null&&(u.lanes|=r),og(a.return,r,e),l.lanes|=r;break}u=u.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(ne(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),og(o,r,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}vn(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,eo(e,r),s=or(s),i=i(s),e.flags|=1,vn(t,e,i,r),e.child;case 14:return i=e.type,s=_r(i,e.pendingProps),s=_r(i.type,s),bw(t,e,i,s,r);case 15:return HS(t,e,e.type,e.pendingProps,r);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:_r(i,s),Ed(t,e),e.tag=1,Mn(i)?(t=!0,Zd(e)):t=!1,eo(e,r),BS(e,i,s),ug(e,i,s,r),hg(null,e,i,!0,t,r);case 19:return YS(t,e,r);case 22:return WS(t,e,r)}throw Error(ne(156,e.tag))};function dI(t,e){return jT(t,e)}function eN(t,e,r,i){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(t,e,r,i){return new eN(t,e,r,i)}function cy(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tN(t){if(typeof t=="function")return cy(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Av)return 11;if(t===Pv)return 14}return 2}function Zi(t,e){var r=t.alternate;return r===null?(r=tr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Id(t,e,r,i,s,a){var o=2;if(i=t,typeof t=="function")cy(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Va:return Qs(r.children,s,a,e);case Cv:o=8,s|=8;break;case Nm:return t=tr(12,r,e,s|2),t.elementType=Nm,t.lanes=a,t;case Mm:return t=tr(13,r,e,s),t.elementType=Mm,t.lanes=a,t;case Lm:return t=tr(19,r,e,s),t.elementType=Lm,t.lanes=a,t;case wT:return of(r,s,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case yT:o=10;break e;case _T:o=9;break e;case Av:o=11;break e;case Pv:o=14;break e;case Mi:o=16,i=null;break e}throw Error(ne(130,t==null?t:typeof t,""))}return e=tr(o,r,e,s),e.elementType=t,e.type=i,e.lanes=a,e}function Qs(t,e,r,i){return t=tr(7,t,i,e),t.lanes=r,t}function of(t,e,r,i){return t=tr(22,t,i,e),t.elementType=wT,t.lanes=r,t.stateNode={isHidden:!1},t}function Bp(t,e,r){return t=tr(6,t,null,e),t.lanes=r,t}function zp(t,e,r){return e=tr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nN(t,e,r,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xp(0),this.expirationTimes=xp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xp(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function dy(t,e,r,i,s,a,o,l,u){return t=new nN(t,e,r,l,u),e===1?(e=1,a===!0&&(e|=8)):e=0,a=tr(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kv(a),t}function rN(t,e,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ja,key:i==null?null:""+i,children:t,containerInfo:e,implementation:r}}function hI(t){if(!t)return cs;t=t._reactInternals;e:{if(da(t)!==t||t.tag!==1)throw Error(ne(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Mn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ne(171))}if(t.tag===1){var r=t.type;if(Mn(r))return hS(t,r,e)}return e}function fI(t,e,r,i,s,a,o,l,u){return t=dy(r,i,!0,t,s,a,o,l,u),t.context=hI(null),r=t.current,i=yn(),s=Ji(r),a=ci(i,s),a.callback=e??null,Xi(r,a,s),t.current.lanes=s,Uu(t,s,i),Ln(t,i),t}function lf(t,e,r,i){var s=e.current,a=yn(),o=Ji(s);return r=hI(r),e.context===null?e.context=r:e.pendingContext=r,e=ci(a,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Xi(s,e,o),t!==null&&(Sr(t,s,o,a),wd(t,s,o)),o}function hh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Nw(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function hy(t,e){Nw(t,e),(t=t.alternate)&&Nw(t,e)}function iN(){return null}var pI=typeof reportError=="function"?reportError:function(t){console.error(t)};function fy(t){this._internalRoot=t}uf.prototype.render=fy.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ne(409));lf(t,e,null,null)};uf.prototype.unmount=fy.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;na(function(){lf(null,t,null,null)}),e[pi]=null}};function uf(t){this._internalRoot=t}uf.prototype.unstable_scheduleHydration=function(t){if(t){var e=HT();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ji.length&&e!==0&&e<ji[r].priority;r++);ji.splice(r,0,t),r===0&&qT(t)}};function py(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function cf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Mw(){}function sN(t,e,r,i,s){if(s){if(typeof i=="function"){var a=i;i=function(){var d=hh(o);a.call(d)}}var o=fI(e,i,t,0,null,!1,!1,"",Mw);return t._reactRootContainer=o,t[pi]=o.current,cu(t.nodeType===8?t.parentNode:t),na(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var l=i;i=function(){var d=hh(u);l.call(d)}}var u=dy(t,0,!1,null,null,!1,!1,"",Mw);return t._reactRootContainer=u,t[pi]=u.current,cu(t.nodeType===8?t.parentNode:t),na(function(){lf(e,u,r,i)}),u}function df(t,e,r,i,s){var a=r._reactRootContainer;if(a){var o=a;if(typeof s=="function"){var l=s;s=function(){var u=hh(o);l.call(u)}}lf(e,o,t,s)}else o=sN(r,e,t,s,i);return hh(o)}zT=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Cl(e.pendingLanes);r!==0&&(Nv(e,r|1),Ln(e,kt()),!($e&6)&&(po=kt()+500,bs()))}break;case 13:na(function(){var i=mi(t,1);if(i!==null){var s=yn();Sr(i,t,1,s)}}),hy(t,1)}};Mv=function(t){if(t.tag===13){var e=mi(t,134217728);if(e!==null){var r=yn();Sr(e,t,134217728,r)}hy(t,134217728)}};$T=function(t){if(t.tag===13){var e=Ji(t),r=mi(t,e);if(r!==null){var i=yn();Sr(r,t,e,i)}hy(t,e)}};HT=function(){return et};WT=function(t,e){var r=et;try{return et=t,e()}finally{et=r}};Wm=function(t,e,r){switch(e){case"input":if(Vm(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var i=r[e];if(i!==t&&i.form===t.form){var s=ef(i);if(!s)throw Error(ne(90));xT(i),Vm(i,s)}}}break;case"textarea":TT(t,r);break;case"select":e=r.value,e!=null&&Xa(t,!!r.multiple,e,!1)}};RT=oy;DT=na;var aN={usingClientEntryPoint:!1,Events:[zu,za,ef,AT,PT,oy]},gl={findFiberByHostInstance:qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oN={bundleType:gl.bundleType,version:gl.version,rendererPackageName:gl.rendererPackageName,rendererConfig:gl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ei.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=LT(t),t===null?null:t.stateNode},findFiberByHostInstance:gl.findFiberByHostInstance||iN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Qc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Qc.isDisabled&&Qc.supportsFiber)try{Xh=Qc.inject(oN),Fr=Qc}catch{}}Gn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aN;Gn.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!py(e))throw Error(ne(200));return rN(t,e,null,r)};Gn.createRoot=function(t,e){if(!py(t))throw Error(ne(299));var r=!1,i="",s=pI;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=dy(t,1,!1,null,null,r,!1,i,s),t[pi]=e.current,cu(t.nodeType===8?t.parentNode:t),new fy(e)};Gn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ne(188)):(t=Object.keys(t).join(","),Error(ne(268,t)));return t=LT(e),t=t===null?null:t.stateNode,t};Gn.flushSync=function(t){return na(t)};Gn.hydrate=function(t,e,r){if(!cf(e))throw Error(ne(200));return df(null,t,e,!0,r)};Gn.hydrateRoot=function(t,e,r){if(!py(t))throw Error(ne(405));var i=r!=null&&r.hydratedSources||null,s=!1,a="",o=pI;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=fI(e,null,t,1,r??null,s,!1,a,o),t[pi]=e.current,cu(t),i)for(t=0;t<i.length;t++)r=i[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new uf(e)};Gn.render=function(t,e,r){if(!cf(e))throw Error(ne(200));return df(null,t,e,!1,r)};Gn.unmountComponentAtNode=function(t){if(!cf(t))throw Error(ne(40));return t._reactRootContainer?(na(function(){df(null,null,t,!1,function(){t._reactRootContainer=null,t[pi]=null})}),!0):!1};Gn.unstable_batchedUpdates=oy;Gn.unstable_renderSubtreeIntoContainer=function(t,e,r,i){if(!cf(r))throw Error(ne(200));if(t==null||t._reactInternals===void 0)throw Error(ne(38));return df(t,e,r,!1,i)};Gn.version="18.3.1-next-f1338f8080-20240426";function mI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mI)}catch(t){console.error(t)}}mI(),pT.exports=Gn;var my=pT.exports;const lN=Vu(my);var Lw=my;Rm.createRoot=Lw.createRoot,Rm.hydrateRoot=Lw.hydrateRoot;var gy={};Object.defineProperty(gy,"__esModule",{value:!0});gy.parse=mN;gy.serialize=gN;const uN=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,cN=/^[\u0021-\u003A\u003C-\u007E]*$/,dN=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,hN=/^[\u0020-\u003A\u003D-\u007E]*$/,fN=Object.prototype.toString,pN=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function mN(t,e){const r=new pN,i=t.length;if(i<2)return r;const s=(e==null?void 0:e.decode)||vN;let a=0;do{const o=t.indexOf("=",a);if(o===-1)break;const l=t.indexOf(";",a),u=l===-1?i:l;if(o>u){a=t.lastIndexOf(";",o-1)+1;continue}const d=Ow(t,a,o),h=jw(t,o,d),f=t.slice(d,h);if(r[f]===void 0){let p=Ow(t,o+1,u),g=jw(t,u,p);const _=s(t.slice(p,g));r[f]=_}a=u+1}while(a<i);return r}function Ow(t,e,r){do{const i=t.charCodeAt(e);if(i!==32&&i!==9)return e}while(++e<r);return r}function jw(t,e,r){for(;e>r;){const i=t.charCodeAt(--e);if(i!==32&&i!==9)return e+1}return r}function gN(t,e,r){const i=(r==null?void 0:r.encode)||encodeURIComponent;if(!uN.test(t))throw new TypeError(`argument name is invalid: ${t}`);const s=i(e);if(!cN.test(s))throw new TypeError(`argument val is invalid: ${e}`);let a=t+"="+s;if(!r)return a;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);a+="; Max-Age="+r.maxAge}if(r.domain){if(!dN.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);a+="; Domain="+r.domain}if(r.path){if(!hN.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);a+="; Path="+r.path}if(r.expires){if(!yN(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);a+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.partitioned&&(a+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return a}function vN(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function yN(t){return fN.call(t)==="[object Date]"}/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Vw="popstate";function _N(t={}){function e(i,s){let{pathname:a,search:o,hash:l}=i.location;return Tg("",{pathname:a,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(i,s){return typeof s=="string"?s:_u(s)}return bN(e,r,null,t)}function mt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ur(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wN(){return Math.random().toString(36).substring(2,10)}function Fw(t,e){return{usr:t.state,key:t.key,idx:e}}function Tg(t,e,r=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Mo(e):e,state:r,key:e&&e.key||i||wN()}}function _u({pathname:t="/",search:e="",hash:r=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Mo(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substring(r),t=t.substring(0,r));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function bN(t,e,r,i={}){let{window:s=document.defaultView,v5Compat:a=!1}=i,o=s.history,l="POP",u=null,d=h();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function h(){return(o.state||{idx:null}).idx}function f(){l="POP";let P=h(),S=P==null?null:P-d;d=P,u&&u({action:l,location:A.location,delta:S})}function p(P,S){l="PUSH";let w=Tg(A.location,P,S);d=h()+1;let x=Fw(w,d),R=A.createHref(w);try{o.pushState(x,"",R)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;s.location.assign(R)}a&&u&&u({action:l,location:A.location,delta:1})}function g(P,S){l="REPLACE";let w=Tg(A.location,P,S);d=h();let x=Fw(w,d),R=A.createHref(w);o.replaceState(x,"",R),a&&u&&u({action:l,location:A.location,delta:0})}function _(P){let S=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof P=="string"?P:_u(P);return w=w.replace(/ $/,"%20"),mt(S,`No window.location.(origin|href) available to create URL for href: ${w}`),new URL(w,S)}let A={get action(){return l},get location(){return t(s,o)},listen(P){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Vw,f),u=P,()=>{s.removeEventListener(Vw,f),u=null}},createHref(P){return e(s,P)},createURL:_,encodeLocation(P){let S=_(P);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:p,replace:g,go(P){return o.go(P)}};return A}function gI(t,e,r="/"){return xN(t,e,r,!1)}function xN(t,e,r,i){let s=typeof e=="string"?Mo(e):e,a=ds(s.pathname||"/",r);if(a==null)return null;let o=vI(t);EN(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=MN(a);l=DN(o[u],d,i)}return l}function vI(t,e=[],r=[],i=""){let s=(a,o,l)=>{let u={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};u.relativePath.startsWith("/")&&(mt(u.relativePath.startsWith(i),`Absolute route path "${u.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(i.length));let d=di([i,u.relativePath]),h=r.concat(u);a.children&&a.children.length>0&&(mt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),vI(a.children,e,h,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:PN(d,a.index),routesMeta:h})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))s(a,o);else for(let u of yI(a.path))s(a,o,u)}),e}function yI(t){let e=t.split("/");if(e.length===0)return[];let[r,...i]=e,s=r.endsWith("?"),a=r.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let o=yI(i.join("/")),l=[];return l.push(...o.map(u=>u===""?a:[a,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function EN(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:RN(e.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var TN=/^:[\w-]+$/,SN=3,IN=2,kN=1,CN=10,AN=-2,Uw=t=>t==="*";function PN(t,e){let r=t.split("/"),i=r.length;return r.some(Uw)&&(i+=AN),e&&(i+=IN),r.filter(s=>!Uw(s)).reduce((s,a)=>s+(TN.test(a)?SN:a===""?kN:CN),i)}function RN(t,e){return t.length===e.length&&t.slice(0,-1).every((i,s)=>i===e[s])?t[t.length-1]-e[e.length-1]:0}function DN(t,e,r=!1){let{routesMeta:i}=t,s={},a="/",o=[];for(let l=0;l<i.length;++l){let u=i[l],d=l===i.length-1,h=a==="/"?e:e.slice(a.length)||"/",f=fh({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),p=u.route;if(!f&&d&&r&&!i[i.length-1].route.index&&(f=fh({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:di([a,f.pathname]),pathnameBase:VN(di([a,f.pathnameBase])),route:p}),f.pathnameBase!=="/"&&(a=di([a,f.pathnameBase]))}return o}function fh(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,i]=NN(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:i.reduce((d,{paramName:h,isOptional:f},p)=>{if(h==="*"){let _=l[p]||"";o=a.slice(0,a.length-_.length).replace(/(.)\/+$/,"$1")}const g=l[p];return f&&!g?d[h]=void 0:d[h]=(g||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function NN(t,e=!1,r=!0){ur(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(i.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function MN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ur(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function ds(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,i=t.charAt(r);return i&&i!=="/"?null:t.slice(r)||"/"}function LN(t,e="/"){let{pathname:r,search:i="",hash:s=""}=typeof t=="string"?Mo(t):t;return{pathname:r?r.startsWith("/")?r:ON(r,e):e,search:FN(i),hash:UN(s)}}function ON(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function $p(t,e,r,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function jN(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function vy(t){let e=jN(t);return e.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase)}function yy(t,e,r,i=!1){let s;typeof t=="string"?s=Mo(t):(s={...t},mt(!s.pathname||!s.pathname.includes("?"),$p("?","pathname","search",s)),mt(!s.pathname||!s.pathname.includes("#"),$p("#","pathname","hash",s)),mt(!s.search||!s.search.includes("#"),$p("#","search","hash",s)));let a=t===""||s.pathname==="",o=a?"/":s.pathname,l;if(o==null)l=r;else{let f=e.length-1;if(!i&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),f-=1;s.pathname=p.join("/")}l=f>=0?e[f]:"/"}let u=LN(s,l),d=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}var di=t=>t.join("/").replace(/\/\/+/g,"/"),VN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),FN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,UN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function BN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var _I=["POST","PUT","PATCH","DELETE"];new Set(_I);var zN=["GET",..._I];new Set(zN);var Lo=M.createContext(null);Lo.displayName="DataRouter";var hf=M.createContext(null);hf.displayName="DataRouterState";var wI=M.createContext({isTransitioning:!1});wI.displayName="ViewTransition";var $N=M.createContext(new Map);$N.displayName="Fetchers";var HN=M.createContext(null);HN.displayName="Await";var Cr=M.createContext(null);Cr.displayName="Navigation";var Hu=M.createContext(null);Hu.displayName="Location";var Xr=M.createContext({outlet:null,matches:[],isDataRoute:!1});Xr.displayName="Route";var _y=M.createContext(null);_y.displayName="RouteError";function WN(t,{relative:e}={}){mt(Oo(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=M.useContext(Cr),{hash:s,pathname:a,search:o}=Wu(t,{relative:e}),l=a;return r!=="/"&&(l=a==="/"?r:di([r,a])),i.createHref({pathname:l,search:o,hash:s})}function Oo(){return M.useContext(Hu)!=null}function dr(){return mt(Oo(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(Hu).location}var bI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xI(t){M.useContext(Cr).static||M.useLayoutEffect(t)}function xs(){let{isDataRoute:t}=M.useContext(Xr);return t?i2():qN()}function qN(){mt(Oo(),"useNavigate() may be used only in the context of a <Router> component.");let t=M.useContext(Lo),{basename:e,navigator:r}=M.useContext(Cr),{matches:i}=M.useContext(Xr),{pathname:s}=dr(),a=JSON.stringify(vy(i)),o=M.useRef(!1);return xI(()=>{o.current=!0}),M.useCallback((u,d={})=>{if(ur(o.current,bI),!o.current)return;if(typeof u=="number"){r.go(u);return}let h=yy(u,JSON.parse(a),s,d.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:di([e,h.pathname])),(d.replace?r.replace:r.push)(h,d.state,d)},[e,r,a,s,t])}M.createContext(null);function Wu(t,{relative:e}={}){let{matches:r}=M.useContext(Xr),{pathname:i}=dr(),s=JSON.stringify(vy(r));return M.useMemo(()=>yy(t,JSON.parse(s),i,e==="path"),[t,s,i,e])}function GN(t,e){return EI(t,e)}function EI(t,e,r,i){var w;mt(Oo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:a}=M.useContext(Cr),{matches:o}=M.useContext(Xr),l=o[o.length-1],u=l?l.params:{},d=l?l.pathname:"/",h=l?l.pathnameBase:"/",f=l&&l.route;{let x=f&&f.path||"";TI(d,!f||x.endsWith("*")||x.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${x}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${x}"> to <Route path="${x==="/"?"*":`${x}/*`}">.`)}let p=dr(),g;if(e){let x=typeof e=="string"?Mo(e):e;mt(h==="/"||((w=x.pathname)==null?void 0:w.startsWith(h)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${x.pathname}" was given in the \`location\` prop.`),g=x}else g=p;let _=g.pathname||"/",A=_;if(h!=="/"){let x=h.replace(/^\//,"").split("/");A="/"+_.replace(/^\//,"").split("/").slice(x.length).join("/")}let P=!a&&r&&r.matches&&r.matches.length>0?r.matches:gI(t,{pathname:A});ur(f||P!=null,`No routes matched location "${g.pathname}${g.search}${g.hash}" `),ur(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${g.pathname}${g.search}${g.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let S=JN(P&&P.map(x=>Object.assign({},x,{params:Object.assign({},u,x.params),pathname:di([h,s.encodeLocation?s.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?h:di([h,s.encodeLocation?s.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),o,r,i);return e&&S?M.createElement(Hu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...g},navigationType:"POP"}},S):S}function KN(){let t=r2(),e=BN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=M.createElement(M.Fragment,null,M.createElement("p",null,"💿 Hey developer 👋"),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:a},"ErrorBoundary")," or"," ",M.createElement("code",{style:a},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},e),r?M.createElement("pre",{style:s},r):null,o)}var YN=M.createElement(KN,null),XN=class extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?M.createElement(Xr.Provider,{value:this.props.routeContext},M.createElement(_y.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function QN({routeContext:t,match:e,children:r}){let i=M.useContext(Lo);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),M.createElement(Xr.Provider,{value:t},r)}function JN(t,e=[],r=null,i=null){if(t==null){if(!r)return null;if(r.errors)t=r.matches;else if(e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let s=t,a=r==null?void 0:r.errors;if(a!=null){let u=s.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);mt(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),s=s.slice(0,Math.min(s.length,u+1))}let o=!1,l=-1;if(r)for(let u=0;u<s.length;u++){let d=s[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:h,errors:f}=r,p=d.route.loader&&!h.hasOwnProperty(d.route.id)&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){o=!0,l>=0?s=s.slice(0,l+1):s=[s[0]];break}}}return s.reduceRight((u,d,h)=>{let f,p=!1,g=null,_=null;r&&(f=a&&d.route.id?a[d.route.id]:void 0,g=d.route.errorElement||YN,o&&(l<0&&h===0?(TI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,_=null):l===h&&(p=!0,_=d.route.hydrateFallbackElement||null)));let A=e.concat(s.slice(0,h+1)),P=()=>{let S;return f?S=g:p?S=_:d.route.Component?S=M.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=u,M.createElement(QN,{match:d,routeContext:{outlet:u,matches:A,isDataRoute:r!=null},children:S})};return r&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?M.createElement(XN,{location:r.location,revalidation:r.revalidation,component:g,error:f,children:P(),routeContext:{outlet:null,matches:A,isDataRoute:!0}}):P()},null)}function wy(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function ZN(t){let e=M.useContext(Lo);return mt(e,wy(t)),e}function e2(t){let e=M.useContext(hf);return mt(e,wy(t)),e}function t2(t){let e=M.useContext(Xr);return mt(e,wy(t)),e}function by(t){let e=t2(t),r=e.matches[e.matches.length-1];return mt(r.route.id,`${t} can only be used on routes that contain a unique "id"`),r.route.id}function n2(){return by("useRouteId")}function r2(){var i;let t=M.useContext(_y),e=e2("useRouteError"),r=by("useRouteError");return t!==void 0?t:(i=e.errors)==null?void 0:i[r]}function i2(){let{router:t}=ZN("useNavigate"),e=by("useNavigate"),r=M.useRef(!1);return xI(()=>{r.current=!0}),M.useCallback(async(s,a={})=>{ur(r.current,bI),r.current&&(typeof s=="number"?t.navigate(s):await t.navigate(s,{fromRouteId:e,...a}))},[t,e])}var Bw={};function TI(t,e,r){!e&&!Bw[t]&&(Bw[t]=!0,ur(!1,r))}M.memo(s2);function s2({routes:t,future:e,state:r}){return EI(t,void 0,r,e)}function SI({to:t,replace:e,state:r,relative:i}){mt(Oo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=M.useContext(Cr);ur(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=M.useContext(Xr),{pathname:o}=dr(),l=xs(),u=yy(t,vy(a),o,i==="path"),d=JSON.stringify(u);return M.useEffect(()=>{l(JSON.parse(d),{replace:e,state:r,relative:i})},[l,d,i,e,r]),null}function Mr(t){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function a2({basename:t="/",children:e=null,location:r,navigationType:i="POP",navigator:s,static:a=!1}){mt(!Oo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=M.useMemo(()=>({basename:o,navigator:s,static:a,future:{}}),[o,s,a]);typeof r=="string"&&(r=Mo(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,g=M.useMemo(()=>{let _=ds(u,o);return _==null?null:{location:{pathname:_,search:d,hash:h,state:f,key:p},navigationType:i}},[o,u,d,h,f,p,i]);return ur(g!=null,`<Router basename="${o}"> is not able to match the URL "${u}${d}${h}" because it does not start with the basename, so the <Router> won't render anything.`),g==null?null:M.createElement(Cr.Provider,{value:l},M.createElement(Hu.Provider,{children:e,value:g}))}function o2({children:t,location:e}){return GN(Sg(t),e)}function Sg(t,e=[]){let r=[];return M.Children.forEach(t,(i,s)=>{if(!M.isValidElement(i))return;let a=[...e,s];if(i.type===M.Fragment){r.push.apply(r,Sg(i.props.children,a));return}mt(i.type===Mr,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let o={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=Sg(i.props.children,a)),r.push(o)}),r}var kd="get",Cd="application/x-www-form-urlencoded";function ff(t){return t!=null&&typeof t.tagName=="string"}function l2(t){return ff(t)&&t.tagName.toLowerCase()==="button"}function u2(t){return ff(t)&&t.tagName.toLowerCase()==="form"}function c2(t){return ff(t)&&t.tagName.toLowerCase()==="input"}function d2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function h2(t,e){return t.button===0&&(!e||e==="_self")&&!d2(t)}function Ig(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let i=t[r];return e.concat(Array.isArray(i)?i.map(s=>[r,s]):[[r,i]])},[]))}function f2(t,e){let r=Ig(t);return e&&e.forEach((i,s)=>{r.has(s)||e.getAll(s).forEach(a=>{r.append(s,a)})}),r}var Jc=null;function p2(){if(Jc===null)try{new FormData(document.createElement("form"),0),Jc=!1}catch{Jc=!0}return Jc}var m2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Hp(t){return t!=null&&!m2.has(t)?(ur(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Cd}"`),null):t}function g2(t,e){let r,i,s,a,o;if(u2(t)){let l=t.getAttribute("action");i=l?ds(l,e):null,r=t.getAttribute("method")||kd,s=Hp(t.getAttribute("enctype"))||Cd,a=new FormData(t)}else if(l2(t)||c2(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=t.getAttribute("formaction")||l.getAttribute("action");if(i=u?ds(u,e):null,r=t.getAttribute("formmethod")||l.getAttribute("method")||kd,s=Hp(t.getAttribute("formenctype"))||Hp(l.getAttribute("enctype"))||Cd,a=new FormData(l,t),!p2()){let{name:d,type:h,value:f}=t;if(h==="image"){let p=d?`${d}.`:"";a.append(`${p}x`,"0"),a.append(`${p}y`,"0")}else d&&a.append(d,f)}}else{if(ff(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=kd,i=null,s=Cd,o=t}return a&&s==="text/plain"&&(o=a,a=void 0),{action:i,method:r.toLowerCase(),encType:s,formData:a,body:o}}function xy(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function v2(t,e){if(t.id in e)return e[t.id];try{let r=await import(t.module);return e[t.id]=r,r}catch(r){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function y2(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function _2(t,e,r){let i=await Promise.all(t.map(async s=>{let a=e.routes[s.route.id];if(a){let o=await v2(a,r);return o.links?o.links():[]}return[]}));return E2(i.flat(1).filter(y2).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function zw(t,e,r,i,s,a){let o=(u,d)=>r[d]?u.route.id!==r[d].route.id:!0,l=(u,d)=>{var h;return r[d].pathname!==u.pathname||((h=r[d].route.path)==null?void 0:h.endsWith("*"))&&r[d].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,d)=>o(u,d)||l(u,d)):a==="data"?e.filter((u,d)=>{var f;let h=i.routes[u.route.id];if(!h||!h.hasLoader)return!1;if(o(u,d)||l(u,d))return!0;if(u.route.shouldRevalidate){let p=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((f=r[0])==null?void 0:f.params)||{},nextUrl:new URL(t,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function w2(t,e){return b2(t.map(r=>{let i=e.routes[r.route.id];if(!i)return[];let s=[i.module];return i.imports&&(s=s.concat(i.imports)),s}).flat(1))}function b2(t){return[...new Set(t)]}function x2(t){let e={},r=Object.keys(t).sort();for(let i of r)e[i]=t[i];return e}function E2(t,e){let r=new Set;return new Set(e),t.reduce((i,s)=>{let a=JSON.stringify(x2(s));return r.has(a)||(r.add(a),i.push({key:a,link:s})),i},[])}function T2(t){let e=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function S2(){let t=M.useContext(Lo);return xy(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function I2(){let t=M.useContext(hf);return xy(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Ey=M.createContext(void 0);Ey.displayName="FrameworkContext";function II(){let t=M.useContext(Ey);return xy(t,"You must render this element inside a <HydratedRouter> element"),t}function k2(t,e){let r=M.useContext(Ey),[i,s]=M.useState(!1),[a,o]=M.useState(!1),{onFocus:l,onBlur:u,onMouseEnter:d,onMouseLeave:h,onTouchStart:f}=e,p=M.useRef(null);M.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let A=S=>{S.forEach(w=>{o(w.isIntersecting)})},P=new IntersectionObserver(A,{threshold:.5});return p.current&&P.observe(p.current),()=>{P.disconnect()}}},[t]),M.useEffect(()=>{if(i){let A=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(A)}}},[i]);let g=()=>{s(!0)},_=()=>{s(!1),o(!1)};return r?t!=="intent"?[a,p,{}]:[a,p,{onFocus:vl(l,g),onBlur:vl(u,_),onMouseEnter:vl(d,g),onMouseLeave:vl(h,_),onTouchStart:vl(f,g)}]:[!1,p,{}]}function vl(t,e){return r=>{t&&t(r),r.defaultPrevented||e(r)}}function C2({page:t,...e}){let{router:r}=S2(),i=M.useMemo(()=>gI(r.routes,t,r.basename),[r.routes,t,r.basename]);return i?M.createElement(P2,{page:t,matches:i,...e}):null}function A2(t){let{manifest:e,routeModules:r}=II(),[i,s]=M.useState([]);return M.useEffect(()=>{let a=!1;return _2(t,e,r).then(o=>{a||s(o)}),()=>{a=!0}},[t,e,r]),i}function P2({page:t,matches:e,...r}){let i=dr(),{manifest:s,routeModules:a}=II(),{loaderData:o,matches:l}=I2(),u=M.useMemo(()=>zw(t,e,l,s,i,"data"),[t,e,l,s,i]),d=M.useMemo(()=>zw(t,e,l,s,i,"assets"),[t,e,l,s,i]),h=M.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let g=new Set,_=!1;if(e.forEach(P=>{var w;let S=s.routes[P.route.id];!S||!S.hasLoader||(!u.some(x=>x.route.id===P.route.id)&&P.route.id in o&&((w=a[P.route.id])!=null&&w.shouldRevalidate)||S.hasClientLoader?_=!0:g.add(P.route.id))}),g.size===0)return[];let A=T2(t);return _&&g.size>0&&A.searchParams.set("_routes",e.filter(P=>g.has(P.route.id)).map(P=>P.route.id).join(",")),[A.pathname+A.search]},[o,i,s,u,e,t,a]),f=M.useMemo(()=>w2(d,s),[d,s]),p=A2(d);return M.createElement(M.Fragment,null,h.map(g=>M.createElement("link",{key:g,rel:"prefetch",as:"fetch",href:g,...r})),f.map(g=>M.createElement("link",{key:g,rel:"modulepreload",href:g,...r})),p.map(({key:g,link:_})=>M.createElement("link",{key:g,..._})))}function R2(...t){return e=>{t.forEach(r=>{typeof r=="function"?r(e):r!=null&&(r.current=e)})}}var kI=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{kI&&(window.__reactRouterVersion="7.1.5")}catch{}function D2({basename:t,children:e,window:r}){let i=M.useRef();i.current==null&&(i.current=_N({window:r,v5Compat:!0}));let s=i.current,[a,o]=M.useState({action:s.action,location:s.location}),l=M.useCallback(u=>{M.startTransition(()=>o(u))},[o]);return M.useLayoutEffect(()=>s.listen(l),[s,l]),M.createElement(a2,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:s})}var CI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Hs=M.forwardRef(function({onClick:e,discover:r="render",prefetch:i="none",relative:s,reloadDocument:a,replace:o,state:l,target:u,to:d,preventScrollReset:h,viewTransition:f,...p},g){let{basename:_}=M.useContext(Cr),A=typeof d=="string"&&CI.test(d),P,S=!1;if(typeof d=="string"&&A&&(P=d,kI))try{let y=new URL(window.location.href),b=d.startsWith("//")?new URL(y.protocol+d):new URL(d),T=ds(b.pathname,_);b.origin===y.origin&&T!=null?d=T+b.search+b.hash:S=!0}catch{ur(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=WN(d,{relative:s}),[x,R,F]=k2(i,p),V=O2(d,{replace:o,state:l,target:u,preventScrollReset:h,relative:s,viewTransition:f});function N(y){e&&e(y),y.defaultPrevented||V(y)}let I=M.createElement("a",{...p,...F,href:P||w,onClick:S||a?e:N,ref:R2(g,R),target:u,"data-discover":!A&&r==="render"?"true":void 0});return x&&!A?M.createElement(M.Fragment,null,I,M.createElement(C2,{page:w})):I});Hs.displayName="Link";var N2=M.forwardRef(function({"aria-current":e="page",caseSensitive:r=!1,className:i="",end:s=!1,style:a,to:o,viewTransition:l,children:u,...d},h){let f=Wu(o,{relative:d.relative}),p=dr(),g=M.useContext(hf),{navigator:_,basename:A}=M.useContext(Cr),P=g!=null&&B2(f)&&l===!0,S=_.encodeLocation?_.encodeLocation(f).pathname:f.pathname,w=p.pathname,x=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;r||(w=w.toLowerCase(),x=x?x.toLowerCase():null,S=S.toLowerCase()),x&&A&&(x=ds(x,A)||x);const R=S!=="/"&&S.endsWith("/")?S.length-1:S.length;let F=w===S||!s&&w.startsWith(S)&&w.charAt(R)==="/",V=x!=null&&(x===S||!s&&x.startsWith(S)&&x.charAt(S.length)==="/"),N={isActive:F,isPending:V,isTransitioning:P},I=F?e:void 0,y;typeof i=="function"?y=i(N):y=[i,F?"active":null,V?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let b=typeof a=="function"?a(N):a;return M.createElement(Hs,{...d,"aria-current":I,className:y,ref:h,style:b,to:o,viewTransition:l},typeof u=="function"?u(N):u)});N2.displayName="NavLink";var M2=M.forwardRef(({discover:t="render",fetcherKey:e,navigate:r,reloadDocument:i,replace:s,state:a,method:o=kd,action:l,onSubmit:u,relative:d,preventScrollReset:h,viewTransition:f,...p},g)=>{let _=F2(),A=U2(l,{relative:d}),P=o.toLowerCase()==="get"?"get":"post",S=typeof l=="string"&&CI.test(l),w=x=>{if(u&&u(x),x.defaultPrevented)return;x.preventDefault();let R=x.nativeEvent.submitter,F=(R==null?void 0:R.getAttribute("formmethod"))||o;_(R||x.currentTarget,{fetcherKey:e,method:F,navigate:r,replace:s,state:a,relative:d,preventScrollReset:h,viewTransition:f})};return M.createElement("form",{ref:g,method:P,action:A,onSubmit:i?u:w,...p,"data-discover":!S&&t==="render"?"true":void 0})});M2.displayName="Form";function L2(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function AI(t){let e=M.useContext(Lo);return mt(e,L2(t)),e}function O2(t,{target:e,replace:r,state:i,preventScrollReset:s,relative:a,viewTransition:o}={}){let l=xs(),u=dr(),d=Wu(t,{relative:a});return M.useCallback(h=>{if(h2(h,e)){h.preventDefault();let f=r!==void 0?r:_u(u)===_u(d);l(t,{replace:f,state:i,preventScrollReset:s,relative:a,viewTransition:o})}},[u,l,d,r,i,e,t,s,a,o])}function Ty(t){ur(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=M.useRef(Ig(t)),r=M.useRef(!1),i=dr(),s=M.useMemo(()=>f2(i.search,r.current?null:e.current),[i.search]),a=xs(),o=M.useCallback((l,u)=>{const d=Ig(typeof l=="function"?l(s):l);r.current=!0,a("?"+d,u)},[a,s]);return[s,o]}var j2=0,V2=()=>`__${String(++j2)}__`;function F2(){let{router:t}=AI("useSubmit"),{basename:e}=M.useContext(Cr),r=n2();return M.useCallback(async(i,s={})=>{let{action:a,method:o,encType:l,formData:u,body:d}=g2(i,e);if(s.navigate===!1){let h=s.fetcherKey||V2();await t.fetch(h,r,s.action||a,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||o,formEncType:s.encType||l,flushSync:s.flushSync})}else await t.navigate(s.action||a,{preventScrollReset:s.preventScrollReset,formData:u,body:d,formMethod:s.method||o,formEncType:s.encType||l,replace:s.replace,state:s.state,fromRouteId:r,flushSync:s.flushSync,viewTransition:s.viewTransition})},[t,e,r])}function U2(t,{relative:e}={}){let{basename:r}=M.useContext(Cr),i=M.useContext(Xr);mt(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a={...Wu(t||".",{relative:e})},o=dr();if(t==null){a.search=o.search;let l=new URLSearchParams(a.search),u=l.getAll("index");if(u.some(h=>h==="")){l.delete("index"),u.filter(f=>f).forEach(f=>l.append("index",f));let h=l.toString();a.search=h?`?${h}`:""}}return(!t||t===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:di([r,a.pathname])),_u(a)}function B2(t,e={}){let r=M.useContext(wI);mt(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=AI("useViewTransitionState"),s=Wu(t,{relative:e.relative});if(!r.isTransitioning)return!1;let a=ds(r.currentLocation.pathname,i)||r.currentLocation.pathname,o=ds(r.nextLocation.pathname,i)||r.nextLocation.pathname;return fh(s.pathname,o)!=null||fh(s.pathname,a)!=null}new TextEncoder;var $w={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI=function(t){const e=[];let r=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},z2=function(t){const e=[];let r=0,i=0;for(;r<t.length;){const s=t[r++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const a=t[r++];e[i++]=String.fromCharCode((s&31)<<6|a&63)}else if(s>239&&s<365){const a=t[r++],o=t[r++],l=t[r++],u=((s&7)<<18|(a&63)<<12|(o&63)<<6|l&63)-65536;e[i++]=String.fromCharCode(55296+(u>>10)),e[i++]=String.fromCharCode(56320+(u&1023))}else{const a=t[r++],o=t[r++];e[i++]=String.fromCharCode((s&15)<<12|(a&63)<<6|o&63)}}return e.join("")},RI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const a=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,h=a>>2,f=(a&3)<<4|l>>4;let p=(l&15)<<2|d>>6,g=d&63;u||(g=64,o||(p=64)),i.push(r[h],r[f],r[p],r[g])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(PI(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):z2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const a=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const d=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,a==null||l==null||d==null||f==null)throw new $2;const p=a<<2|l>>4;if(i.push(p),d!==64){const g=l<<4&240|d>>2;if(i.push(g),f!==64){const _=d<<6&192|f;i.push(_)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class $2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const H2=function(t){const e=PI(t);return RI.encodeByteArray(e,!0)},ph=function(t){return H2(t).replace(/\./g,"")},DI=function(t){try{return RI.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=()=>W2().__FIREBASE_DEFAULTS__,G2=()=>{if(typeof process>"u"||typeof $w>"u")return;const t=$w.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},K2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&DI(t[1]);return e&&JSON.parse(e)},pf=()=>{try{return q2()||G2()||K2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},NI=t=>{var e,r;return(r=(e=pf())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},Y2=t=>{const e=NI(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),i]:[e.substring(0,r),i]},MI=()=>{var t;return(t=pf())===null||t===void 0?void 0:t.config},LI=t=>{var e;return(e=pf())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,i)=>{r?this.reject(r):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q2(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,a=t.sub||t.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ph(JSON.stringify(r)),ph(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function J2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pn())}function Z2(){var t;const e=(t=pf())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eM(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tM(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function nM(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rM(){const t=pn();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function iM(){return!Z2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function sM(){try{return typeof indexedDB=="object"}catch{return!1}}function aM(){return new Promise((t,e)=>{try{let r=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var a;e(((a=s.error)===null||a===void 0?void 0:a.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oM="FirebaseError";class Ti extends Error{constructor(e,r,i){super(r),this.code=e,this.customData=i,this.name=oM,Object.setPrototypeOf(this,Ti.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qu.prototype.create)}}class qu{constructor(e,r,i){this.service=e,this.serviceName=r,this.errors=i}create(e,...r){const i=r[0]||{},s=`${this.service}/${e}`,a=this.errors[e],o=a?lM(a,i):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Ti(s,l,i)}}function lM(t,e){return t.replace(uM,(r,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const uM=/\{\$([^}]+)}/g;function cM(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function mh(t,e){if(t===e)return!0;const r=Object.keys(t),i=Object.keys(e);for(const s of r){if(!i.includes(s))return!1;const a=t[s],o=e[s];if(Hw(a)&&Hw(o)){if(!mh(a,o))return!1}else if(a!==o)return!1}for(const s of i)if(!r.includes(s))return!1;return!0}function Hw(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(t){const e=[];for(const[r,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Pl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,a]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(a)}}),e}function Rl(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function dM(t,e){const r=new hM(t,e);return r.subscribe.bind(r)}class hM{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,i){let s;if(e===void 0&&r===void 0&&i===void 0)throw new Error("Missing Observer.");fM(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:i},s.next===void 0&&(s.next=Wp),s.error===void 0&&(s.error=Wp),s.complete===void 0&&(s.complete=Wp);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fM(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Wp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(t){return t&&t._delegate?t._delegate:t}class ra{constructor(e,r,i){this.name=e,this.instanceFactory=r,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pM=class{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const i=new X2;if(this.instancesDeferred.set(r,i),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(a){if(s)return null;throw a}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gM(e))try{this.getOrInitializeService({instanceIdentifier:Bs})}catch{}for(const[r,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const a=this.getOrInitializeService({instanceIdentifier:s});i.resolve(a)}catch{}}}}clearInstance(e=Bs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Bs){return this.instances.has(e)}getOptions(e=Bs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:r});for(const[a,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(a);i===l&&o.resolve(s)}return s}onInit(e,r){var i;const s=this.normalizeInstanceIdentifier(r),a=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;a.add(e),this.onInitCallbacks.set(s,a);const o=this.instances.get(s);return o&&e(o,s),()=>{a.delete(e)}}invokeOnInitCallbacks(e,r){const i=this.onInitCallbacks.get(r);if(i)for(const s of i)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:mM(e),options:r}),this.instances.set(e,i),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Bs){return this.component?this.component.multipleInstances?e:Bs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function mM(t){return t===Bs?void 0:t}function gM(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new pM(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Me||(Me={}));const yM={debug:Me.DEBUG,verbose:Me.VERBOSE,info:Me.INFO,warn:Me.WARN,error:Me.ERROR,silent:Me.SILENT},_M=Me.INFO,wM={[Me.DEBUG]:"log",[Me.VERBOSE]:"log",[Me.INFO]:"info",[Me.WARN]:"warn",[Me.ERROR]:"error"},bM=(t,e,...r)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=wM[e];if(s)console[s](`[${i}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Sy{constructor(e){this.name=e,this._logLevel=_M,this._logHandler=bM,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yM[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Me.DEBUG,...e),this._logHandler(this,Me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Me.VERBOSE,...e),this._logHandler(this,Me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Me.INFO,...e),this._logHandler(this,Me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Me.WARN,...e),this._logHandler(this,Me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Me.ERROR,...e),this._logHandler(this,Me.ERROR,...e)}}const xM=(t,e)=>e.some(r=>t instanceof r);let Ww,qw;function EM(){return Ww||(Ww=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TM(){return qw||(qw=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const OI=new WeakMap,kg=new WeakMap,jI=new WeakMap,qp=new WeakMap,Iy=new WeakMap;function SM(t){const e=new Promise((r,i)=>{const s=()=>{t.removeEventListener("success",a),t.removeEventListener("error",o)},a=()=>{r(es(t.result)),s()},o=()=>{i(t.error),s()};t.addEventListener("success",a),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&OI.set(r,t)}).catch(()=>{}),Iy.set(e,t),e}function IM(t){if(kg.has(t))return;const e=new Promise((r,i)=>{const s=()=>{t.removeEventListener("complete",a),t.removeEventListener("error",o),t.removeEventListener("abort",o)},a=()=>{r(),s()},o=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",a),t.addEventListener("error",o),t.addEventListener("abort",o)});kg.set(t,e)}let Cg={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return kg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||jI.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return es(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function kM(t){Cg=t(Cg)}function CM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const i=t.call(Gp(this),e,...r);return jI.set(i,e.sort?e.sort():[e]),es(i)}:TM().includes(t)?function(...e){return t.apply(Gp(this),e),es(OI.get(this))}:function(...e){return es(t.apply(Gp(this),e))}}function AM(t){return typeof t=="function"?CM(t):(t instanceof IDBTransaction&&IM(t),xM(t,EM())?new Proxy(t,Cg):t)}function es(t){if(t instanceof IDBRequest)return SM(t);if(qp.has(t))return qp.get(t);const e=AM(t);return e!==t&&(qp.set(t,e),Iy.set(e,t)),e}const Gp=t=>Iy.get(t);function PM(t,e,{blocked:r,upgrade:i,blocking:s,terminated:a}={}){const o=indexedDB.open(t,e),l=es(o);return i&&o.addEventListener("upgradeneeded",u=>{i(es(o.result),u.oldVersion,u.newVersion,es(o.transaction),u)}),r&&o.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{a&&u.addEventListener("close",()=>a()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const RM=["get","getKey","getAll","getAllKeys","count"],DM=["put","add","delete","clear"],Kp=new Map;function Gw(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Kp.get(e))return Kp.get(e);const r=e.replace(/FromIndex$/,""),i=e!==r,s=DM.includes(r);if(!(r in(i?IDBIndex:IDBObjectStore).prototype)||!(s||RM.includes(r)))return;const a=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return i&&(d=d.index(l.shift())),(await Promise.all([d[r](...l),s&&u.done]))[0]};return Kp.set(e,a),a}kM(t=>({...t,get:(e,r,i)=>Gw(e,r)||t.get(e,r,i),has:(e,r)=>!!Gw(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(MM(r)){const i=r.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(r=>r).join(" ")}}function MM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ag="@firebase/app",Kw="0.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vi=new Sy("@firebase/app"),LM="@firebase/app-compat",OM="@firebase/analytics-compat",jM="@firebase/analytics",VM="@firebase/app-check-compat",FM="@firebase/app-check",UM="@firebase/auth",BM="@firebase/auth-compat",zM="@firebase/database",$M="@firebase/data-connect",HM="@firebase/database-compat",WM="@firebase/functions",qM="@firebase/functions-compat",GM="@firebase/installations",KM="@firebase/installations-compat",YM="@firebase/messaging",XM="@firebase/messaging-compat",QM="@firebase/performance",JM="@firebase/performance-compat",ZM="@firebase/remote-config",eL="@firebase/remote-config-compat",tL="@firebase/storage",nL="@firebase/storage-compat",rL="@firebase/firestore",iL="@firebase/vertexai",sL="@firebase/firestore-compat",aL="firebase",oL="11.3.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="[DEFAULT]",lL={[Ag]:"fire-core",[LM]:"fire-core-compat",[jM]:"fire-analytics",[OM]:"fire-analytics-compat",[FM]:"fire-app-check",[VM]:"fire-app-check-compat",[UM]:"fire-auth",[BM]:"fire-auth-compat",[zM]:"fire-rtdb",[$M]:"fire-data-connect",[HM]:"fire-rtdb-compat",[WM]:"fire-fn",[qM]:"fire-fn-compat",[GM]:"fire-iid",[KM]:"fire-iid-compat",[YM]:"fire-fcm",[XM]:"fire-fcm-compat",[QM]:"fire-perf",[JM]:"fire-perf-compat",[ZM]:"fire-rc",[eL]:"fire-rc-compat",[tL]:"fire-gcs",[nL]:"fire-gcs-compat",[rL]:"fire-fst",[sL]:"fire-fst-compat",[iL]:"fire-vertex","fire-js":"fire-js",[aL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gh=new Map,uL=new Map,Rg=new Map;function Yw(t,e){try{t.container.addComponent(e)}catch(r){vi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function mo(t){const e=t.name;if(Rg.has(e))return vi.debug(`There were multiple attempts to register component ${e}.`),!1;Rg.set(e,t);for(const r of gh.values())Yw(r,t);for(const r of uL.values())Yw(r,t);return!0}function ky(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function xr(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ts=new qu("app","Firebase",cL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dL{constructor(e,r,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ra("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ts.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jo=oL;function VI(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:Pg,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw ts.create("bad-app-name",{appName:String(s)});if(r||(r=MI()),!r)throw ts.create("no-options");const a=gh.get(s);if(a){if(mh(r,a.options)&&mh(i,a.config))return a;throw ts.create("duplicate-app",{appName:s})}const o=new vM(s);for(const u of Rg.values())o.addComponent(u);const l=new dL(r,i,o);return gh.set(s,l),l}function FI(t=Pg){const e=gh.get(t);if(!e&&t===Pg&&MI())return VI();if(!e)throw ts.create("no-app",{appName:t});return e}function ns(t,e,r){var i;let s=(i=lL[t])!==null&&i!==void 0?i:t;r&&(s+=`-${r}`);const a=s.match(/\s|\//),o=e.match(/\s|\//);if(a||o){const l=[`Unable to register library "${s}" with version "${e}":`];a&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),a&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),vi.warn(l.join(" "));return}mo(new ra(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hL="firebase-heartbeat-database",fL=1,wu="firebase-heartbeat-store";let Yp=null;function UI(){return Yp||(Yp=PM(hL,fL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(wu)}catch(r){console.warn(r)}}}}).catch(t=>{throw ts.create("idb-open",{originalErrorMessage:t.message})})),Yp}async function pL(t){try{const r=(await UI()).transaction(wu),i=await r.objectStore(wu).get(BI(t));return await r.done,i}catch(e){if(e instanceof Ti)vi.warn(e.message);else{const r=ts.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});vi.warn(r.message)}}}async function Xw(t,e){try{const i=(await UI()).transaction(wu,"readwrite");await i.objectStore(wu).put(e,BI(t)),await i.done}catch(r){if(r instanceof Ti)vi.warn(r.message);else{const i=ts.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});vi.warn(i.message)}}}function BI(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mL=1024,gL=30;class vL{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new _L(r),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=Qw();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(o=>o.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:s}),this._heartbeatsCache.heartbeats.length>gL){const o=wL(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){vi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Qw(),{heartbeatsToSend:i,unsentEntries:s}=yL(this._heartbeatsCache.heartbeats),a=ph(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(r){return vi.warn(r),""}}}function Qw(){return new Date().toISOString().substring(0,10)}function yL(t,e=mL){const r=[];let i=t.slice();for(const s of t){const a=r.find(o=>o.agent===s.agent);if(a){if(a.dates.push(s.date),Jw(r)>e){a.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),Jw(r)>e){r.pop();break}i=i.slice(1)}return{heartbeatsToSend:r,unsentEntries:i}}class _L{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return sM()?aM().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await pL(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return Xw(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return Xw(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Jw(t){return ph(JSON.stringify({version:2,heartbeats:t})).length}function wL(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let i=1;i<t.length;i++)t[i].date<r&&(r=t[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(t){mo(new ra("platform-logger",e=>new NM(e),"PRIVATE")),mo(new ra("heartbeat",e=>new vL(e),"PRIVATE")),ns(Ag,Kw,t),ns(Ag,Kw,"esm2017"),ns("fire-js","")}bL("");function Cy(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(r[i[s]]=t[i[s]]);return r}function zI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xL=zI,$I=new qu("auth","Firebase",zI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vh=new Sy("@firebase/auth");function EL(t,...e){vh.logLevel<=Me.WARN&&vh.warn(`Auth (${jo}): ${t}`,...e)}function Ad(t,...e){vh.logLevel<=Me.ERROR&&vh.error(`Auth (${jo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(t,...e){throw Ay(t,...e)}function Br(t,...e){return Ay(t,...e)}function HI(t,e,r){const i=Object.assign(Object.assign({},xL()),{[e]:r});return new qu("auth","Firebase",i).create(e,{appName:t.name})}function rs(t){return HI(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ay(t,...e){if(typeof t!="string"){const r=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(r,...i)}return $I.create(t,...e)}function Ee(t,e,...r){if(!t)throw Ay(e,...r)}function oi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ad(e),new Error(e)}function yi(t,e){t||oi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function TL(){return Zw()==="http:"||Zw()==="https:"}function Zw(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TL()||tM()||"connection"in navigator)?navigator.onLine:!0}function IL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,r){this.shortDelay=e,this.longDelay=r,yi(r>e,"Short delay should be less than long delay!"),this.isMobile=J2()||nM()}get(){return SL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Py(t,e){yi(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{static initialize(e,r,i){this.fetchImpl=e,r&&(this.headersImpl=r),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;oi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;oi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;oi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CL=new Ku(3e4,6e4);function ha(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Es(t,e,r,i,s={}){return qI(t,s,async()=>{let a={},o={};i&&(e==="GET"?o=i:a={body:JSON.stringify(i)});const l=Gu(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},a);return eM()||(d.referrerPolicy="no-referrer"),WI.fetch()(GI(t,t.config.apiHost,r,l),d)})}async function qI(t,e,r){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},kL),e);try{const s=new PL(t),a=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const o=await a.json();if("needConfirmation"in o)throw Zc(t,"account-exists-with-different-credential",o);if(a.ok&&!("errorMessage"in o))return o;{const l=a.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zc(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Zc(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Zc(t,"user-disabled",o);const h=i[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw HI(t,h,d);kr(t,h)}}catch(s){if(s instanceof Ti)throw s;kr(t,"network-request-failed",{message:String(s)})}}async function mf(t,e,r,i,s={}){const a=await Es(t,e,r,i,s);return"mfaPendingCredential"in a&&kr(t,"multi-factor-auth-required",{_serverResponse:a}),a}function GI(t,e,r,i){const s=`${e}${r}?${i}`;return t.config.emulator?Py(t.config,s):`${t.config.apiScheme}://${s}`}function AL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PL{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,i)=>{this.timer=setTimeout(()=>i(Br(this.auth,"network-request-failed")),CL.get())})}}function Zc(t,e,r){const i={appName:t.name};r.email&&(i.email=r.email),r.phoneNumber&&(i.phoneNumber=r.phoneNumber);const s=Br(t,e,i);return s.customData._tokenResponse=r,s}function eb(t){return t!==void 0&&t.enterprise!==void 0}class RL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return AL(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function DL(t,e){return Es(t,"GET","/v2/recaptchaConfig",ha(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NL(t,e){return Es(t,"POST","/v1/accounts:delete",e)}async function KI(t,e){return Es(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gl(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ML(t,e=!1){const r=en(t),i=await r.getIdToken(e),s=Ry(i);Ee(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const a=typeof s.firebase=="object"?s.firebase:void 0,o=a==null?void 0:a.sign_in_provider;return{claims:s,token:i,authTime:Gl(Xp(s.auth_time)),issuedAtTime:Gl(Xp(s.iat)),expirationTime:Gl(Xp(s.exp)),signInProvider:o||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Xp(t){return Number(t)*1e3}function Ry(t){const[e,r,i]=t.split(".");if(e===void 0||r===void 0||i===void 0)return Ad("JWT malformed, contained fewer than 3 sections"),null;try{const s=DI(r);return s?JSON.parse(s):(Ad("Failed to decode base64 JWT payload"),null)}catch(s){return Ad("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function tb(t){const e=Ry(t);return Ee(e,"internal-error"),Ee(typeof e.exp<"u","internal-error"),Ee(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bu(t,e,r=!1){if(r)return e;try{return await e}catch(i){throw i instanceof Ti&&LL(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function LL({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OL{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Gl(this.lastLoginAt),this.creationTime=Gl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yh(t){var e;const r=t.auth,i=await t.getIdToken(),s=await bu(t,KI(r,{idToken:i}));Ee(s==null?void 0:s.users.length,r,"internal-error");const a=s.users[0];t._notifyReloadListener(a);const o=!((e=a.providerUserInfo)===null||e===void 0)&&e.length?YI(a.providerUserInfo):[],l=VL(t.providerData,o),u=t.isAnonymous,d=!(t.email&&a.passwordHash)&&!(l!=null&&l.length),h=u?d:!1,f={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:l,metadata:new Ng(a.createdAt,a.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function jL(t){const e=en(t);await yh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function VL(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function YI(t){return t.map(e=>{var{providerId:r}=e,i=Cy(e,["providerId"]);return{providerId:r,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FL(t,e){const r=await qI(t,{},async()=>{const i=Gu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:a}=t.config,o=GI(t,s,"/v1/token",`key=${a}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",WI.fetch()(o,{method:"POST",headers:l,body:i})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function UL(t,e){return Es(t,"POST","/v2/accounts:revokeToken",ha(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ee(e.idToken,"internal-error"),Ee(typeof e.idToken<"u","internal-error"),Ee(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):tb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){Ee(e.length!==0,"internal-error");const r=tb(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(Ee(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:i,refreshToken:s,expiresIn:a}=await FL(e,r);this.updateTokensAndExpiration(i,s,Number(a))}updateTokensAndExpiration(e,r,i){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,r){const{refreshToken:i,accessToken:s,expirationTime:a}=r,o=new no;return i&&(Ee(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),s&&(Ee(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),a&&(Ee(typeof a=="number","internal-error",{appName:e}),o.expirationTime=a),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new no,this.toJSON())}_performRefresh(){return oi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Di(t,e){Ee(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class li{constructor(e){var{uid:r,auth:i,stsTokenManager:s}=e,a=Cy(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new OL(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?[...a.providerData]:[],this.metadata=new Ng(a.createdAt||void 0,a.lastLoginAt||void 0)}async getIdToken(e){const r=await bu(this,this.stsTokenManager.getToken(this.auth,e));return Ee(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return ML(this,e)}reload(){return jL(this)}_assign(e){this!==e&&(Ee(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new li(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){Ee(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),r&&await yh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(xr(this.auth.app))return Promise.reject(rs(this.auth));const e=await this.getIdToken();return await bu(this,NL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var i,s,a,o,l,u,d,h;const f=(i=r.displayName)!==null&&i!==void 0?i:void 0,p=(s=r.email)!==null&&s!==void 0?s:void 0,g=(a=r.phoneNumber)!==null&&a!==void 0?a:void 0,_=(o=r.photoURL)!==null&&o!==void 0?o:void 0,A=(l=r.tenantId)!==null&&l!==void 0?l:void 0,P=(u=r._redirectEventId)!==null&&u!==void 0?u:void 0,S=(d=r.createdAt)!==null&&d!==void 0?d:void 0,w=(h=r.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:x,emailVerified:R,isAnonymous:F,providerData:V,stsTokenManager:N}=r;Ee(x&&N,e,"internal-error");const I=no.fromJSON(this.name,N);Ee(typeof x=="string",e,"internal-error"),Di(f,e.name),Di(p,e.name),Ee(typeof R=="boolean",e,"internal-error"),Ee(typeof F=="boolean",e,"internal-error"),Di(g,e.name),Di(_,e.name),Di(A,e.name),Di(P,e.name),Di(S,e.name),Di(w,e.name);const y=new li({uid:x,auth:e,email:p,emailVerified:R,displayName:f,isAnonymous:F,photoURL:_,phoneNumber:g,tenantId:A,stsTokenManager:I,createdAt:S,lastLoginAt:w});return V&&Array.isArray(V)&&(y.providerData=V.map(b=>Object.assign({},b))),P&&(y._redirectEventId=P),y}static async _fromIdTokenResponse(e,r,i=!1){const s=new no;s.updateFromServerResponse(r);const a=new li({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await yh(a),a}static async _fromGetAccountInfoResponse(e,r,i){const s=r.users[0];Ee(s.localId!==void 0,"internal-error");const a=s.providerUserInfo!==void 0?YI(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(a!=null&&a.length),l=new no;l.updateFromIdToken(i);const u=new li({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ng(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(a!=null&&a.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb=new Map;function ui(t){yi(t instanceof Function,"Expected a class definition");let e=nb.get(t);return e?(yi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,nb.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}XI.type="NONE";const rb=XI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pd(t,e,r){return`firebase:${t}:${e}:${r}`}class ro{constructor(e,r,i){this.persistence=e,this.auth=r,this.userKey=i;const{config:s,name:a}=this.auth;this.fullUserKey=Pd(this.userKey,s.apiKey,a),this.fullPersistenceKey=Pd("persistence",s.apiKey,a),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?li._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,i="authUser"){if(!r.length)return new ro(ui(rb),e,i);const s=(await Promise.all(r.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let a=s[0]||ui(rb);const o=Pd(i,e.config.apiKey,e.name);let l=null;for(const d of r)try{const h=await d._get(o);if(h){const f=li._fromJSON(e,h);d!==a&&(l=f),a=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!a._shouldAllowMigration||!u.length?new ro(a,e,i):(a=u[0],l&&await a._set(o,l.toJSON()),await Promise.all(r.map(async d=>{if(d!==a)try{await d._remove(o)}catch{}})),new ro(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(e1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(n1(e))return"Blackberry";if(r1(e))return"Webos";if(JI(e))return"Safari";if((e.includes("chrome/")||ZI(e))&&!e.includes("edge/"))return"Chrome";if(t1(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(r);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function QI(t=pn()){return/firefox\//i.test(t)}function JI(t=pn()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZI(t=pn()){return/crios\//i.test(t)}function e1(t=pn()){return/iemobile/i.test(t)}function t1(t=pn()){return/android/i.test(t)}function n1(t=pn()){return/blackberry/i.test(t)}function r1(t=pn()){return/webos/i.test(t)}function Dy(t=pn()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function BL(t=pn()){var e;return Dy(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zL(){return rM()&&document.documentMode===10}function i1(t=pn()){return Dy(t)||t1(t)||r1(t)||n1(t)||/windows phone/i.test(t)||e1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s1(t,e=[]){let r;switch(t){case"Browser":r=ib(pn());break;case"Worker":r=`${ib(pn())}-${t}`;break;default:r=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${jo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const i=a=>new Promise((o,l)=>{try{const u=e(a);o(u)}catch(u){l(u)}});i.onAbort=r,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const i of this.queue)await i(e),i.onAbort&&r.push(i.onAbort)}catch(i){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HL(t,e={}){return Es(t,"GET","/v2/passwordPolicy",ha(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WL=6;class qL{constructor(e){var r,i,s,a;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:WL,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(a=e.forceUpgradeOnSignin)!==null&&a!==void 0?a:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,i,s,a,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(r=u.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsUppercaseLetter)!==null&&a!==void 0?a:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,r){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(r.meetsMinPasswordLength=e.length>=i),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,r,i,s,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GL{constructor(e,r,i,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sb(this),this.idTokenSubscription=new sb(this),this.beforeStateQueue=new $L(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=$I,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=ui(r)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await ro.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await KI(this,{idToken:e}),i=await li._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(i)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(xr(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,a=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,a=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(a)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Ee(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await yh(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=IL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(xr(this.app))return Promise.reject(rs(this));const r=e?en(e):null;return r&&Ee(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&Ee(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return xr(this.app)?Promise.reject(rs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return xr(this.app)?Promise.reject(rs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(ui(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HL(this),r=new qL(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qu("auth","Firebase",e())}onAuthStateChanged(e,r,i){return this.registerStateListener(this.authStateSubscription,e,r,i)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,i){return this.registerStateListener(this.idTokenSubscription,e,r,i)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(i.tenantId=this.tenantId),await UL(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const i=await this.getOrInitRedirectPersistenceManager(r);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&ui(e)||this._popupRedirectResolver;Ee(r,this,"argument-error"),this.redirectPersistenceManager=await ro.create(this,[ui(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,i;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,i,s){if(this._deleted)return()=>{};const a=typeof r=="function"?r:r.next.bind(r);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ee(l,this,"internal-error"),l.then(()=>{o||a(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,i,s);return()=>{o=!0,u()}}else{const u=e.addObserver(r);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ee(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=s1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(r["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;if(xr(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&EL(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Vo(t){return en(t)}class sb{constructor(e){this.auth=e,this.observer=null,this.addObserver=dM(r=>this.observer=r)}get next(){return Ee(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function KL(t){gf=t}function a1(t){return gf.loadJS(t)}function YL(){return gf.recaptchaEnterpriseScript}function XL(){return gf.gapiScript}function QL(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class JL{constructor(){this.enterprise=new ZL}ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}class ZL{ready(e){e()}execute(e,r){return Promise.resolve("token")}render(e,r){return""}}const eO="recaptcha-enterprise",o1="NO_RECAPTCHA";class tO{constructor(e){this.type=eO,this.auth=Vo(e)}async verify(e="verify",r=!1){async function i(a){if(!r){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(o,l)=>{DL(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new RL(u);return a.tenantId==null?a._agentRecaptchaConfig=d:a._tenantRecaptchaConfigs[a.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function s(a,o,l){const u=window.grecaptcha;eb(u)?u.enterprise.ready(()=>{u.enterprise.execute(a,{action:e}).then(d=>{o(d)}).catch(()=>{o(o1)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new JL().execute("siteKey",{action:"verify"}):new Promise((a,o)=>{i(this.auth).then(l=>{if(!r&&eb(window.grecaptcha))s(l,a,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=YL();u.length!==0&&(u+=l),a1(u).then(()=>{s(l,a,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function ab(t,e,r,i=!1,s=!1){const a=new tO(t);let o;if(s)o=o1;else try{o=await a.verify(r)}catch{o=await a.verify(r,!0)}const l=Object.assign({},e);if(r==="mfaSmsEnrollment"||r==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return i?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function ob(t,e,r,i,s){var a;if(!((a=t._getRecaptchaConfig())===null||a===void 0)&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await ab(t,e,r,r==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await ab(t,e,r,r==="getOobCode");return i(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nO(t,e){const r=ky(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),a=r.getOptions();if(mh(a,e??{}))return s;kr(s,"already-initialized")}return r.initialize({options:e})}function rO(t,e){const r=(e==null?void 0:e.persistence)||[],i=(Array.isArray(r)?r:[r]).map(ui);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function iO(t,e,r){const i=Vo(t);Ee(i._canInitEmulator,i,"emulator-config-failed"),Ee(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,a=l1(e),{host:o,port:l}=sO(e),u=l===null?"":`:${l}`;i.config.emulator={url:`${a}//${o}${u}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:l,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:s})}),aO()}function l1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function sO(t){const e=l1(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const i=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const a=s[1];return{host:a,port:lb(i.substr(a.length+1))}}else{const[a,o]=i.split(":");return{host:a,port:lb(o)}}}function lb(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function aO(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ny{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return oi("not implemented")}_getIdTokenResponse(e){return oi("not implemented")}_linkToIdToken(e,r){return oi("not implemented")}_getReauthenticationResolver(e){return oi("not implemented")}}async function oO(t,e){return Es(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lO(t,e){return mf(t,"POST","/v1/accounts:signInWithPassword",ha(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uO(t,e){return mf(t,"POST","/v1/accounts:signInWithEmailLink",ha(t,e))}async function cO(t,e){return mf(t,"POST","/v1/accounts:signInWithEmailLink",ha(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu extends Ny{constructor(e,r,i,s=null){super("password",i),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new xu(e,r,"password")}static _fromEmailAndCode(e,r,i=null){return new xu(e,r,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ob(e,r,"signInWithPassword",lO);case"emailLink":return uO(e,{email:this._email,oobCode:this._password});default:kr(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const i={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ob(e,i,"signUpPassword",oO);case"emailLink":return cO(e,{idToken:r,email:this._email,oobCode:this._password});default:kr(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function io(t,e){return mf(t,"POST","/v1/accounts:signInWithIdp",ha(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dO="http://localhost";class ia extends Ny{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new ia(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):kr("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=r,a=Cy(r,["providerId","signInMethod"]);if(!i||!s)return null;const o=new ia(i,s);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return io(e,r)}_linkToIdToken(e,r){const i=this.buildRequest();return i.idToken=r,io(e,i)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,io(e,r)}buildRequest(){const e={requestUri:dO,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=Gu(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hO(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fO(t){const e=Pl(Rl(t)).link,r=e?Pl(Rl(e)).deep_link_id:null,i=Pl(Rl(t)).deep_link_id;return(i?Pl(Rl(i)).link:null)||i||r||e||t}class My{constructor(e){var r,i,s,a,o,l;const u=Pl(Rl(e)),d=(r=u.apiKey)!==null&&r!==void 0?r:null,h=(i=u.oobCode)!==null&&i!==void 0?i:null,f=hO((s=u.mode)!==null&&s!==void 0?s:null);Ee(d&&h&&f,"argument-error"),this.apiKey=d,this.operation=f,this.code=h,this.continueUrl=(a=u.continueUrl)!==null&&a!==void 0?a:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const r=fO(e);try{return new My(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(){this.providerId=Fo.PROVIDER_ID}static credential(e,r){return xu._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const i=My.parseLink(r);return Ee(i,"argument-error"),xu._fromEmailAndCode(e,i.code,i.tenantId)}}Fo.PROVIDER_ID="password";Fo.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fo.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu extends u1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Yu{constructor(){super("facebook.com")}static credential(e){return ia._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fi.credential(e.oauthAccessToken)}catch{return null}}}Fi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui extends Yu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return ia._fromParams({providerId:Ui.PROVIDER_ID,signInMethod:Ui.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Ui.credentialFromTaggedObject(e)}static credentialFromError(e){return Ui.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:i}=e;if(!r&&!i)return null;try{return Ui.credential(r,i)}catch{return null}}}Ui.GOOGLE_SIGN_IN_METHOD="google.com";Ui.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi extends Yu{constructor(){super("github.com")}static credential(e){return ia._fromParams({providerId:Bi.PROVIDER_ID,signInMethod:Bi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bi.credentialFromTaggedObject(e)}static credentialFromError(e){return Bi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bi.credential(e.oauthAccessToken)}catch{return null}}}Bi.GITHUB_SIGN_IN_METHOD="github.com";Bi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi extends Yu{constructor(){super("twitter.com")}static credential(e,r){return ia._fromParams({providerId:zi.PROVIDER_ID,signInMethod:zi.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return zi.credentialFromTaggedObject(e)}static credentialFromError(e){return zi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:i}=e;if(!r||!i)return null;try{return zi.credential(r,i)}catch{return null}}}zi.TWITTER_SIGN_IN_METHOD="twitter.com";zi.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,i,s=!1){const a=await li._fromIdTokenResponse(e,i,s),o=ub(i);return new go({user:a,providerId:o,_tokenResponse:i,operationType:r})}static async _forOperation(e,r,i){await e._updateTokensIfNecessary(i,!0);const s=ub(i);return new go({user:e,providerId:s,_tokenResponse:i,operationType:r})}}function ub(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h extends Ti{constructor(e,r,i,s){var a;super(r.code,r.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,_h.prototype),this.customData={appName:e.name,tenantId:(a=e.tenantId)!==null&&a!==void 0?a:void 0,_serverResponse:r.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,r,i,s){return new _h(e,r,i,s)}}function c1(t,e,r,i){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?_h._fromErrorAndOperation(t,a,e,i):a})}async function pO(t,e,r=!1){const i=await bu(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return go._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mO(t,e,r=!1){const{auth:i}=t;if(xr(i.app))return Promise.reject(rs(i));const s="reauthenticate";try{const a=await bu(t,c1(i,s,e,t),r);Ee(a.idToken,i,"internal-error");const o=Ry(a.idToken);Ee(o,i,"internal-error");const{sub:l}=o;return Ee(t.uid===l,i,"user-mismatch"),go._forOperation(t,s,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&kr(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d1(t,e,r=!1){if(xr(t.app))return Promise.reject(rs(t));const i="signIn",s=await c1(t,i,e),a=await go._fromIdTokenResponse(t,i,s);return r||await t._updateCurrentUser(a.user),a}async function gO(t,e){return d1(Vo(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vO(t){const e=Vo(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function yO(t,e,r){return xr(t.app)?Promise.reject(rs(t)):gO(en(t),Fo.credential(e,r)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&vO(t),i})}function _O(t,e,r,i){return en(t).onIdTokenChanged(e,r,i)}function wO(t,e,r){return en(t).beforeAuthStateChanged(e,r)}function bO(t,e,r,i){return en(t).onAuthStateChanged(e,r,i)}function xO(t){return en(t).signOut()}const wh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(wh,"1"),this.storage.removeItem(wh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=1e3,TO=10;class f1 extends h1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=i1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const i=this.storage.getItem(r),s=this.localCache[r];i!==s&&e(r,s,i)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const i=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(i);!r&&this.localCache[i]===o||this.notifyListeners(i,o)},a=this.storage.getItem(i);zL()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,TO):s()}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:i}),!0)})},EO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}f1.type="LOCAL";const SO=f1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1 extends h1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}p1.type="SESSION";const m1=p1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const i=new vf(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:i,eventType:s,data:a}=r.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const l=Array.from(o).map(async d=>d(r.origin,a)),u=await IO(l);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}vf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ly(t="",e=10){let r="";for(let i=0;i<e;i++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let a,o;return new Promise((l,u)=>{const d=Ly("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(f){const p=f;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(h),a=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),l(p.data.response);break;default:clearTimeout(h),clearTimeout(a),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:r},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zr(){return window}function CO(t){zr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(){return typeof zr().WorkerGlobalScope<"u"&&typeof zr().importScripts=="function"}async function AO(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function PO(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function RO(){return g1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v1="firebaseLocalStorageDb",DO=1,bh="firebaseLocalStorage",y1="fbase_key";class Xu{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function yf(t,e){return t.transaction([bh],e?"readwrite":"readonly").objectStore(bh)}function NO(){const t=indexedDB.deleteDatabase(v1);return new Xu(t).toPromise()}function Mg(){const t=indexedDB.open(v1,DO);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(bh,{keyPath:y1})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(bh)?e(i):(i.close(),await NO(),e(await Mg()))})})}async function cb(t,e,r){const i=yf(t,!0).put({[y1]:e,value:r});return new Xu(i).toPromise()}async function MO(t,e){const r=yf(t,!1).get(e),i=await new Xu(r).toPromise();return i===void 0?null:i.value}function db(t,e){const r=yf(t,!0).delete(e);return new Xu(r).toPromise()}const LO=800,OO=3;class _1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mg(),this.db)}async _withRetries(e){let r=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(r++>OO)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return g1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=vf._getInstance(RO()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await AO(),!this.activeServiceWorker)return;this.sender=new kO(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||PO()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mg();return await cb(e,wh,"1"),await db(e,wh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(i=>cb(i,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(i=>MO(i,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>db(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const a=yf(s,!1).getAll();return new Xu(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:a}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(a)&&(this.notifyListeners(s,a),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),LO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_1.type="LOCAL";const jO=_1;new Ku(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(t,e){return e?ui(e):(Ee(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oy extends Ny{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return io(e,this._buildIdpRequest())}_linkToIdToken(e,r){return io(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return io(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function FO(t){return d1(t.auth,new Oy(t),t.bypassAuthState)}function UO(t){const{auth:e,user:r}=t;return Ee(r,e,"internal-error"),mO(r,new Oy(t),t.bypassAuthState)}async function BO(t){const{auth:e,user:r}=t;return Ee(r,e,"internal-error"),pO(r,new Oy(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,r,i,s,a=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:i,postBody:s,tenantId:a,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:r,sessionId:i,tenantId:a||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return FO;case"linkViaPopup":case"linkViaRedirect":return BO;case"reauthViaPopup":case"reauthViaRedirect":return UO;default:kr(this.auth,"internal-error")}}resolve(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){yi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=new Ku(2e3,1e4);class Ya extends w1{constructor(e,r,i,s,a){super(e,r,s,a),this.provider=i,this.authWindow=null,this.pollId=null,Ya.currentPopupAction&&Ya.currentPopupAction.cancel(),Ya.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ee(e,this.auth,"internal-error"),e}async onExecution(){yi(this.filter.length===1,"Popup operations only handle one event");const e=Ly();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Br(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Br(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ya.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,i;if(!((i=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Br(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zO.get())};e()}}Ya.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $O="pendingRedirect",Rd=new Map;class HO extends w1{constructor(e,r,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,i),this.eventId=null}async execute(){let e=Rd.get(this.auth._key());if(!e){try{const i=await WO(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(r){e=()=>Promise.reject(r)}Rd.set(this.auth._key(),e)}return this.bypassAuthState||Rd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function WO(t,e){const r=KO(e),i=GO(t);if(!await i._isAvailable())return!1;const s=await i._get(r)==="true";return await i._remove(r),s}function qO(t,e){Rd.set(t._key(),e)}function GO(t){return ui(t._redirectPersistence)}function KO(t){return Pd($O,t.config.apiKey,t.name)}async function YO(t,e,r=!1){if(xr(t.app))return Promise.reject(rs(t));const i=Vo(t),s=VO(i,e),o=await new HO(i,s,r).execute();return o&&!r&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XO=10*60*1e3;class QO{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(r=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!JO(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var i;if(e.error&&!b1(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";r.onError(Br(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const i=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=XO&&this.cachedEventUids.clear(),this.cachedEventUids.has(hb(e))}saveEventToCache(e){this.cachedEventUids.add(hb(e)),this.lastProcessedEventTime=Date.now()}}function hb(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function b1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function JO(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return b1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZO(t,e={}){return Es(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ej=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tj=/^https?/;async function nj(t){if(t.config.emulator)return;const{authorizedDomains:e}=await ZO(t);for(const r of e)try{if(rj(r))return}catch{}kr(t,"unauthorized-domain")}function rj(t){const e=Dg(),{protocol:r,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&i===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===i}if(!tj.test(r))return!1;if(ej.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ij=new Ku(3e4,6e4);function fb(){const t=zr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function sj(t){return new Promise((e,r)=>{var i,s,a;function o(){fb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{fb(),r(Br(t,"network-request-failed"))},timeout:ij.get()})}if(!((s=(i=zr().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((a=zr().gapi)===null||a===void 0)&&a.load)o();else{const l=QL("iframefcb");return zr()[l]=()=>{gapi.load?o():r(Br(t,"network-request-failed"))},a1(`${XL()}?onload=${l}`).catch(u=>r(u))}}).catch(e=>{throw Dd=null,e})}let Dd=null;function aj(t){return Dd=Dd||sj(t),Dd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oj=new Ku(5e3,15e3),lj="__/auth/iframe",uj="emulator/auth/iframe",cj={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dj=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hj(t){const e=t.config;Ee(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Py(e,uj):`https://${t.config.authDomain}/${lj}`,i={apiKey:e.apiKey,appName:t.name,v:jo},s=dj.get(t.config.apiHost);s&&(i.eid=s);const a=t._getFrameworks();return a.length&&(i.fw=a.join(",")),`${r}?${Gu(i).slice(1)}`}async function fj(t){const e=await aj(t),r=zr().gapi;return Ee(r,t,"internal-error"),e.open({where:document.body,url:hj(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cj,dontclear:!0},i=>new Promise(async(s,a)=>{await i.restyle({setHideOnLeave:!1});const o=Br(t,"network-request-failed"),l=zr().setTimeout(()=>{a(o)},oj.get());function u(){zr().clearTimeout(l),s(i)}i.ping(u).then(u,()=>{a(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mj=500,gj=600,vj="_blank",yj="http://localhost";class pb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _j(t,e,r,i=mj,s=gj){const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let l="";const u=Object.assign(Object.assign({},pj),{width:i.toString(),height:s.toString(),top:a,left:o}),d=pn().toLowerCase();r&&(l=ZI(d)?vj:r),QI(d)&&(e=e||yj,u.scrollbars="yes");const h=Object.entries(u).reduce((p,[g,_])=>`${p}${g}=${_},`,"");if(BL(d)&&l!=="_self")return wj(e||"",l),new pb(null);const f=window.open(e||"",l,h);Ee(f,t,"popup-blocked");try{f.focus()}catch{}return new pb(f)}function wj(t,e){const r=document.createElement("a");r.href=t,r.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bj="__/auth/handler",xj="emulator/auth/handler",Ej=encodeURIComponent("fac");async function mb(t,e,r,i,s,a){Ee(t.config.authDomain,t,"auth-domain-config-required"),Ee(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:jo,eventId:s};if(e instanceof u1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",cM(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof Yu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),d=u?`#${Ej}=${encodeURIComponent(u)}`:"";return`${Tj(t)}?${Gu(l).slice(1)}${d}`}function Tj({config:t}){return t.emulator?Py(t,xj):`https://${t.authDomain}/${bj}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp="webStorageSupport";class Sj{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=m1,this._completeRedirectFn=YO,this._overrideRedirectResult=qO}async _openPopup(e,r,i,s){var a;yi((a=this.eventManagers[e._key()])===null||a===void 0?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await mb(e,r,i,Dg(),s);return _j(e,o,Ly())}async _openRedirect(e,r,i,s){await this._originValidation(e);const a=await mb(e,r,i,Dg(),s);return CO(a),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:a}=this.eventManagers[r];return s?Promise.resolve(s):(yi(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[r]={promise:i},i.catch(()=>{delete this.eventManagers[r]}),i}async initAndGetManager(e){const r=await fj(e),i=new QO(e);return r.register("authEvent",s=>(Ee(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=r,i}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(Qp,{type:Qp},s=>{var a;const o=(a=s==null?void 0:s[0])===null||a===void 0?void 0:a[Qp];o!==void 0&&r(!!o),kr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=nj(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return i1()||JI()||Dy()}}const Ij=Sj;var gb="@firebase/auth",vb="1.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){Ee(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Aj(t){mo(new ra("auth",(e,{options:r})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=i.options;Ee(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:s1(t)},d=new GL(i,s,a,u);return rO(d,r),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,i)=>{e.getProvider("auth-internal").initialize()})),mo(new ra("auth-internal",e=>{const r=Vo(e.getProvider("auth").getImmediate());return(i=>new kj(i))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),ns(gb,vb,Cj(t)),ns(gb,vb,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=5*60,Rj=LI("authIdTokenMaxAge")||Pj;let yb=null;const Dj=t=>async e=>{const r=e&&await e.getIdTokenResult(),i=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(i&&i>Rj)return;const s=r==null?void 0:r.token;yb!==s&&(yb=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Nj(t=FI()){const e=ky(t,"auth");if(e.isInitialized())return e.getImmediate();const r=nO(t,{popupRedirectResolver:Ij,persistence:[jO,SO,m1]}),i=LI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const o=Dj(a.toString());wO(r,o,()=>o(r.currentUser)),_O(r,l=>o(l))}}const s=NI("auth");return s&&iO(r,`http://${s}`),r}function Mj(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}KL({loadJS(t){return new Promise((e,r)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const a=Br("internal-error");a.customData=s,r(a)},i.type="text/javascript",i.charset="UTF-8",Mj().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Aj("Browser");var Lj="firebase",Oj="11.3.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ns(Lj,Oj,"app");var _b=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var is,x1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,I){function y(){}y.prototype=I.prototype,N.D=I.prototype,N.prototype=new y,N.prototype.constructor=N,N.C=function(b,T,O){for(var D=Array(arguments.length-2),K=2;K<arguments.length;K++)D[K-2]=arguments[K];return I.prototype[T].apply(b,D)}}function r(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,r),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,I,y){y||(y=0);var b=Array(16);if(typeof I=="string")for(var T=0;16>T;++T)b[T]=I.charCodeAt(y++)|I.charCodeAt(y++)<<8|I.charCodeAt(y++)<<16|I.charCodeAt(y++)<<24;else for(T=0;16>T;++T)b[T]=I[y++]|I[y++]<<8|I[y++]<<16|I[y++]<<24;I=N.g[0],y=N.g[1],T=N.g[2];var O=N.g[3],D=I+(O^y&(T^O))+b[0]+3614090360&4294967295;I=y+(D<<7&4294967295|D>>>25),D=O+(T^I&(y^T))+b[1]+3905402710&4294967295,O=I+(D<<12&4294967295|D>>>20),D=T+(y^O&(I^y))+b[2]+606105819&4294967295,T=O+(D<<17&4294967295|D>>>15),D=y+(I^T&(O^I))+b[3]+3250441966&4294967295,y=T+(D<<22&4294967295|D>>>10),D=I+(O^y&(T^O))+b[4]+4118548399&4294967295,I=y+(D<<7&4294967295|D>>>25),D=O+(T^I&(y^T))+b[5]+1200080426&4294967295,O=I+(D<<12&4294967295|D>>>20),D=T+(y^O&(I^y))+b[6]+2821735955&4294967295,T=O+(D<<17&4294967295|D>>>15),D=y+(I^T&(O^I))+b[7]+4249261313&4294967295,y=T+(D<<22&4294967295|D>>>10),D=I+(O^y&(T^O))+b[8]+1770035416&4294967295,I=y+(D<<7&4294967295|D>>>25),D=O+(T^I&(y^T))+b[9]+2336552879&4294967295,O=I+(D<<12&4294967295|D>>>20),D=T+(y^O&(I^y))+b[10]+4294925233&4294967295,T=O+(D<<17&4294967295|D>>>15),D=y+(I^T&(O^I))+b[11]+2304563134&4294967295,y=T+(D<<22&4294967295|D>>>10),D=I+(O^y&(T^O))+b[12]+1804603682&4294967295,I=y+(D<<7&4294967295|D>>>25),D=O+(T^I&(y^T))+b[13]+4254626195&4294967295,O=I+(D<<12&4294967295|D>>>20),D=T+(y^O&(I^y))+b[14]+2792965006&4294967295,T=O+(D<<17&4294967295|D>>>15),D=y+(I^T&(O^I))+b[15]+1236535329&4294967295,y=T+(D<<22&4294967295|D>>>10),D=I+(T^O&(y^T))+b[1]+4129170786&4294967295,I=y+(D<<5&4294967295|D>>>27),D=O+(y^T&(I^y))+b[6]+3225465664&4294967295,O=I+(D<<9&4294967295|D>>>23),D=T+(I^y&(O^I))+b[11]+643717713&4294967295,T=O+(D<<14&4294967295|D>>>18),D=y+(O^I&(T^O))+b[0]+3921069994&4294967295,y=T+(D<<20&4294967295|D>>>12),D=I+(T^O&(y^T))+b[5]+3593408605&4294967295,I=y+(D<<5&4294967295|D>>>27),D=O+(y^T&(I^y))+b[10]+38016083&4294967295,O=I+(D<<9&4294967295|D>>>23),D=T+(I^y&(O^I))+b[15]+3634488961&4294967295,T=O+(D<<14&4294967295|D>>>18),D=y+(O^I&(T^O))+b[4]+3889429448&4294967295,y=T+(D<<20&4294967295|D>>>12),D=I+(T^O&(y^T))+b[9]+568446438&4294967295,I=y+(D<<5&4294967295|D>>>27),D=O+(y^T&(I^y))+b[14]+3275163606&4294967295,O=I+(D<<9&4294967295|D>>>23),D=T+(I^y&(O^I))+b[3]+4107603335&4294967295,T=O+(D<<14&4294967295|D>>>18),D=y+(O^I&(T^O))+b[8]+1163531501&4294967295,y=T+(D<<20&4294967295|D>>>12),D=I+(T^O&(y^T))+b[13]+2850285829&4294967295,I=y+(D<<5&4294967295|D>>>27),D=O+(y^T&(I^y))+b[2]+4243563512&4294967295,O=I+(D<<9&4294967295|D>>>23),D=T+(I^y&(O^I))+b[7]+1735328473&4294967295,T=O+(D<<14&4294967295|D>>>18),D=y+(O^I&(T^O))+b[12]+2368359562&4294967295,y=T+(D<<20&4294967295|D>>>12),D=I+(y^T^O)+b[5]+4294588738&4294967295,I=y+(D<<4&4294967295|D>>>28),D=O+(I^y^T)+b[8]+2272392833&4294967295,O=I+(D<<11&4294967295|D>>>21),D=T+(O^I^y)+b[11]+1839030562&4294967295,T=O+(D<<16&4294967295|D>>>16),D=y+(T^O^I)+b[14]+4259657740&4294967295,y=T+(D<<23&4294967295|D>>>9),D=I+(y^T^O)+b[1]+2763975236&4294967295,I=y+(D<<4&4294967295|D>>>28),D=O+(I^y^T)+b[4]+1272893353&4294967295,O=I+(D<<11&4294967295|D>>>21),D=T+(O^I^y)+b[7]+4139469664&4294967295,T=O+(D<<16&4294967295|D>>>16),D=y+(T^O^I)+b[10]+3200236656&4294967295,y=T+(D<<23&4294967295|D>>>9),D=I+(y^T^O)+b[13]+681279174&4294967295,I=y+(D<<4&4294967295|D>>>28),D=O+(I^y^T)+b[0]+3936430074&4294967295,O=I+(D<<11&4294967295|D>>>21),D=T+(O^I^y)+b[3]+3572445317&4294967295,T=O+(D<<16&4294967295|D>>>16),D=y+(T^O^I)+b[6]+76029189&4294967295,y=T+(D<<23&4294967295|D>>>9),D=I+(y^T^O)+b[9]+3654602809&4294967295,I=y+(D<<4&4294967295|D>>>28),D=O+(I^y^T)+b[12]+3873151461&4294967295,O=I+(D<<11&4294967295|D>>>21),D=T+(O^I^y)+b[15]+530742520&4294967295,T=O+(D<<16&4294967295|D>>>16),D=y+(T^O^I)+b[2]+3299628645&4294967295,y=T+(D<<23&4294967295|D>>>9),D=I+(T^(y|~O))+b[0]+4096336452&4294967295,I=y+(D<<6&4294967295|D>>>26),D=O+(y^(I|~T))+b[7]+1126891415&4294967295,O=I+(D<<10&4294967295|D>>>22),D=T+(I^(O|~y))+b[14]+2878612391&4294967295,T=O+(D<<15&4294967295|D>>>17),D=y+(O^(T|~I))+b[5]+4237533241&4294967295,y=T+(D<<21&4294967295|D>>>11),D=I+(T^(y|~O))+b[12]+1700485571&4294967295,I=y+(D<<6&4294967295|D>>>26),D=O+(y^(I|~T))+b[3]+2399980690&4294967295,O=I+(D<<10&4294967295|D>>>22),D=T+(I^(O|~y))+b[10]+4293915773&4294967295,T=O+(D<<15&4294967295|D>>>17),D=y+(O^(T|~I))+b[1]+2240044497&4294967295,y=T+(D<<21&4294967295|D>>>11),D=I+(T^(y|~O))+b[8]+1873313359&4294967295,I=y+(D<<6&4294967295|D>>>26),D=O+(y^(I|~T))+b[15]+4264355552&4294967295,O=I+(D<<10&4294967295|D>>>22),D=T+(I^(O|~y))+b[6]+2734768916&4294967295,T=O+(D<<15&4294967295|D>>>17),D=y+(O^(T|~I))+b[13]+1309151649&4294967295,y=T+(D<<21&4294967295|D>>>11),D=I+(T^(y|~O))+b[4]+4149444226&4294967295,I=y+(D<<6&4294967295|D>>>26),D=O+(y^(I|~T))+b[11]+3174756917&4294967295,O=I+(D<<10&4294967295|D>>>22),D=T+(I^(O|~y))+b[2]+718787259&4294967295,T=O+(D<<15&4294967295|D>>>17),D=y+(O^(T|~I))+b[9]+3951481745&4294967295,N.g[0]=N.g[0]+I&4294967295,N.g[1]=N.g[1]+(T+(D<<21&4294967295|D>>>11))&4294967295,N.g[2]=N.g[2]+T&4294967295,N.g[3]=N.g[3]+O&4294967295}i.prototype.u=function(N,I){I===void 0&&(I=N.length);for(var y=I-this.blockSize,b=this.B,T=this.h,O=0;O<I;){if(T==0)for(;O<=y;)s(this,N,O),O+=this.blockSize;if(typeof N=="string"){for(;O<I;)if(b[T++]=N.charCodeAt(O++),T==this.blockSize){s(this,b),T=0;break}}else for(;O<I;)if(b[T++]=N[O++],T==this.blockSize){s(this,b),T=0;break}}this.h=T,this.o+=I},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var I=1;I<N.length-8;++I)N[I]=0;var y=8*this.o;for(I=N.length-8;I<N.length;++I)N[I]=y&255,y/=256;for(this.u(N),N=Array(16),I=y=0;4>I;++I)for(var b=0;32>b;b+=8)N[y++]=this.g[I]>>>b&255;return N};function a(N,I){var y=l;return Object.prototype.hasOwnProperty.call(y,N)?y[N]:y[N]=I(N)}function o(N,I){this.h=I;for(var y=[],b=!0,T=N.length-1;0<=T;T--){var O=N[T]|0;b&&O==I||(y[T]=O,b=!1)}this.g=y}var l={};function u(N){return-128<=N&&128>N?a(N,function(I){return new o([I|0],0>I?-1:0)}):new o([N|0],0>N?-1:0)}function d(N){if(isNaN(N)||!isFinite(N))return f;if(0>N)return P(d(-N));for(var I=[],y=1,b=0;N>=y;b++)I[b]=N/y|0,y*=4294967296;return new o(I,0)}function h(N,I){if(N.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N.charAt(0)=="-")return P(h(N.substring(1),I));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var y=d(Math.pow(I,8)),b=f,T=0;T<N.length;T+=8){var O=Math.min(8,N.length-T),D=parseInt(N.substring(T,T+O),I);8>O?(O=d(Math.pow(I,O)),b=b.j(O).add(d(D))):(b=b.j(y),b=b.add(d(D)))}return b}var f=u(0),p=u(1),g=u(16777216);t=o.prototype,t.m=function(){if(A(this))return-P(this).m();for(var N=0,I=1,y=0;y<this.g.length;y++){var b=this.i(y);N+=(0<=b?b:4294967296+b)*I,I*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(_(this))return"0";if(A(this))return"-"+P(this).toString(N);for(var I=d(Math.pow(N,6)),y=this,b="";;){var T=R(y,I).g;y=S(y,T.j(I));var O=((0<y.g.length?y.g[0]:y.h)>>>0).toString(N);if(y=T,_(y))return O+b;for(;6>O.length;)O="0"+O;b=O+b}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function _(N){if(N.h!=0)return!1;for(var I=0;I<N.g.length;I++)if(N.g[I]!=0)return!1;return!0}function A(N){return N.h==-1}t.l=function(N){return N=S(this,N),A(N)?-1:_(N)?0:1};function P(N){for(var I=N.g.length,y=[],b=0;b<I;b++)y[b]=~N.g[b];return new o(y,~N.h).add(p)}t.abs=function(){return A(this)?P(this):this},t.add=function(N){for(var I=Math.max(this.g.length,N.g.length),y=[],b=0,T=0;T<=I;T++){var O=b+(this.i(T)&65535)+(N.i(T)&65535),D=(O>>>16)+(this.i(T)>>>16)+(N.i(T)>>>16);b=D>>>16,O&=65535,D&=65535,y[T]=D<<16|O}return new o(y,y[y.length-1]&-2147483648?-1:0)};function S(N,I){return N.add(P(I))}t.j=function(N){if(_(this)||_(N))return f;if(A(this))return A(N)?P(this).j(P(N)):P(P(this).j(N));if(A(N))return P(this.j(P(N)));if(0>this.l(g)&&0>N.l(g))return d(this.m()*N.m());for(var I=this.g.length+N.g.length,y=[],b=0;b<2*I;b++)y[b]=0;for(b=0;b<this.g.length;b++)for(var T=0;T<N.g.length;T++){var O=this.i(b)>>>16,D=this.i(b)&65535,K=N.i(T)>>>16,ie=N.i(T)&65535;y[2*b+2*T]+=D*ie,w(y,2*b+2*T),y[2*b+2*T+1]+=O*ie,w(y,2*b+2*T+1),y[2*b+2*T+1]+=D*K,w(y,2*b+2*T+1),y[2*b+2*T+2]+=O*K,w(y,2*b+2*T+2)}for(b=0;b<I;b++)y[b]=y[2*b+1]<<16|y[2*b];for(b=I;b<2*I;b++)y[b]=0;return new o(y,0)};function w(N,I){for(;(N[I]&65535)!=N[I];)N[I+1]+=N[I]>>>16,N[I]&=65535,I++}function x(N,I){this.g=N,this.h=I}function R(N,I){if(_(I))throw Error("division by zero");if(_(N))return new x(f,f);if(A(N))return I=R(P(N),I),new x(P(I.g),P(I.h));if(A(I))return I=R(N,P(I)),new x(P(I.g),I.h);if(30<N.g.length){if(A(N)||A(I))throw Error("slowDivide_ only works with positive integers.");for(var y=p,b=I;0>=b.l(N);)y=F(y),b=F(b);var T=V(y,1),O=V(b,1);for(b=V(b,2),y=V(y,2);!_(b);){var D=O.add(b);0>=D.l(N)&&(T=T.add(y),O=D),b=V(b,1),y=V(y,1)}return I=S(N,T.j(I)),new x(T,I)}for(T=f;0<=N.l(I);){for(y=Math.max(1,Math.floor(N.m()/I.m())),b=Math.ceil(Math.log(y)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),O=d(y),D=O.j(I);A(D)||0<D.l(N);)y-=b,O=d(y),D=O.j(I);_(O)&&(O=p),T=T.add(O),N=S(N,D)}return new x(T,N)}t.A=function(N){return R(this,N).h},t.and=function(N){for(var I=Math.max(this.g.length,N.g.length),y=[],b=0;b<I;b++)y[b]=this.i(b)&N.i(b);return new o(y,this.h&N.h)},t.or=function(N){for(var I=Math.max(this.g.length,N.g.length),y=[],b=0;b<I;b++)y[b]=this.i(b)|N.i(b);return new o(y,this.h|N.h)},t.xor=function(N){for(var I=Math.max(this.g.length,N.g.length),y=[],b=0;b<I;b++)y[b]=this.i(b)^N.i(b);return new o(y,this.h^N.h)};function F(N){for(var I=N.g.length+1,y=[],b=0;b<I;b++)y[b]=N.i(b)<<1|N.i(b-1)>>>31;return new o(y,N.h)}function V(N,I){var y=I>>5;I%=32;for(var b=N.g.length-y,T=[],O=0;O<b;O++)T[O]=0<I?N.i(O+y)>>>I|N.i(O+y+1)<<32-I:N.i(O+y);return new o(T,N.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,x1=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,is=o}).apply(typeof _b<"u"?_b:typeof self<"u"?self:typeof window<"u"?window:{});var ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var E1,Dl,T1,Nd,Lg,S1,I1,k1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,m,E){return c==Array.prototype||c==Object.prototype||(c[m]=E.value),c};function r(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof ed=="object"&&ed];for(var m=0;m<c.length;++m){var E=c[m];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var i=r(this);function s(c,m){if(m)e:{var E=i;c=c.split(".");for(var L=0;L<c.length-1;L++){var $=c[L];if(!($ in E))break e;E=E[$]}c=c[c.length-1],L=E[c],m=m(L),m!=L&&m!=null&&e(E,c,{configurable:!0,writable:!0,value:m})}}function a(c,m){c instanceof String&&(c+="");var E=0,L=!1,$={next:function(){if(!L&&E<c.length){var G=E++;return{value:m(G,c[G]),done:!1}}return L=!0,{done:!0,value:void 0}}};return $[Symbol.iterator]=function(){return $},$}s("Array.prototype.values",function(c){return c||function(){return a(this,function(m,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(c){var m=typeof c;return m=m!="object"?m:c?Array.isArray(c)?"array":m:"null",m=="array"||m=="object"&&typeof c.length=="number"}function d(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function h(c,m,E){return c.call.apply(c.bind,arguments)}function f(c,m,E){if(!c)throw Error();if(2<arguments.length){var L=Array.prototype.slice.call(arguments,2);return function(){var $=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply($,L),c.apply(m,$)}}return function(){return c.apply(m,arguments)}}function p(c,m,E){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,p.apply(null,arguments)}function g(c,m){var E=Array.prototype.slice.call(arguments,1);return function(){var L=E.slice();return L.push.apply(L,arguments),c.apply(this,L)}}function _(c,m){function E(){}E.prototype=m.prototype,c.aa=m.prototype,c.prototype=new E,c.prototype.constructor=c,c.Qb=function(L,$,G){for(var le=Array(arguments.length-2),st=2;st<arguments.length;st++)le[st-2]=arguments[st];return m.prototype[$].apply(L,le)}}function A(c){const m=c.length;if(0<m){const E=Array(m);for(let L=0;L<m;L++)E[L]=c[L];return E}return[]}function P(c,m){for(let E=1;E<arguments.length;E++){const L=arguments[E];if(u(L)){const $=c.length||0,G=L.length||0;c.length=$+G;for(let le=0;le<G;le++)c[$+le]=L[le]}else c.push(L)}}class S{constructor(m,E){this.i=m,this.j=E,this.h=0,this.g=null}get(){let m;return 0<this.h?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function w(c){return/^[\s\xa0]*$/.test(c)}function x(){var c=l.navigator;return c&&(c=c.userAgent)?c:""}function R(c){return R[" "](c),c}R[" "]=function(){};var F=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function V(c,m,E){for(const L in c)m.call(E,c[L],L,c)}function N(c,m){for(const E in c)m.call(void 0,c[E],E,c)}function I(c){const m={};for(const E in c)m[E]=c[E];return m}const y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(c,m){let E,L;for(let $=1;$<arguments.length;$++){L=arguments[$];for(E in L)c[E]=L[E];for(let G=0;G<y.length;G++)E=y[G],Object.prototype.hasOwnProperty.call(L,E)&&(c[E]=L[E])}}function T(c){var m=1;c=c.split(":");const E=[];for(;0<m&&c.length;)E.push(c.shift()),m--;return c.length&&E.push(c.join(":")),E}function O(c){l.setTimeout(()=>{throw c},0)}function D(){var c=Y;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class K{constructor(){this.h=this.g=null}add(m,E){const L=ie.get();L.set(m,E),this.h?this.h.next=L:this.g=L,this.h=L}}var ie=new S(()=>new oe,c=>c.reset());class oe{constructor(){this.next=this.g=this.h=null}set(m,E){this.h=m,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let he,q=!1,Y=new K,se=()=>{const c=l.Promise.resolve(void 0);he=()=>{c.then(re)}};var re=()=>{for(var c;c=D();){try{c.h.call(c.g)}catch(E){O(E)}var m=ie;m.j(c),100>m.h&&(m.h++,c.next=m.g,m.g=c)}q=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function H(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}H.prototype.h=function(){this.defaultPrevented=!0};var Q=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const E=()=>{};l.addEventListener("test",E,m),l.removeEventListener("test",E,m)}catch{}return c}();function X(c,m){if(H.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var E=this.type=c.type,L=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget){if(F){e:{try{R(m.nodeName);var $=!0;break e}catch{}$=!1}$||(m=null)}}else E=="mouseover"?m=c.fromElement:E=="mouseout"&&(m=c.toElement);this.relatedTarget=m,L?(this.clientX=L.clientX!==void 0?L.clientX:L.pageX,this.clientY=L.clientY!==void 0?L.clientY:L.pageY,this.screenX=L.screenX||0,this.screenY=L.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:ue[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&X.aa.h.call(this)}}_(X,H);var ue={2:"touch",3:"pen",4:"mouse"};X.prototype.h=function(){X.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var ge="closure_listenable_"+(1e6*Math.random()|0),Oe=0;function Ne(c,m,E,L,$){this.listener=c,this.proxy=null,this.src=m,this.type=E,this.capture=!!L,this.ha=$,this.key=++Oe,this.da=this.fa=!1}function He(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function We(c){this.src=c,this.g={},this.h=0}We.prototype.add=function(c,m,E,L,$){var G=c.toString();c=this.g[G],c||(c=this.g[G]=[],this.h++);var le=qe(c,m,L,$);return-1<le?(m=c[le],E||(m.fa=!1)):(m=new Ne(m,this.src,G,!!L,$),m.fa=E,c.push(m)),m};function Qe(c,m){var E=m.type;if(E in c.g){var L=c.g[E],$=Array.prototype.indexOf.call(L,m,void 0),G;(G=0<=$)&&Array.prototype.splice.call(L,$,1),G&&(He(m),c.g[E].length==0&&(delete c.g[E],c.h--))}}function qe(c,m,E,L){for(var $=0;$<c.length;++$){var G=c[$];if(!G.da&&G.listener==m&&G.capture==!!E&&G.ha==L)return $}return-1}var Ke="closure_lm_"+(1e6*Math.random()|0),Ye={};function C(c,m,E,L,$){if(Array.isArray(m)){for(var G=0;G<m.length;G++)C(c,m[G],E,L,$);return null}return E=Xe(E),c&&c[ge]?c.K(m,E,d(L)?!!L.capture:!1,$):j(c,m,E,!1,L,$)}function j(c,m,E,L,$,G){if(!m)throw Error("Invalid event type");var le=d($)?!!$.capture:!!$,st=Ce(c);if(st||(c[Ke]=st=new We(c)),E=st.add(m,E,L,le,G),E.proxy)return E;if(L=U(),E.proxy=L,L.src=c,L.listener=E,c.addEventListener)Q||($=le),$===void 0&&($=!1),c.addEventListener(m.toString(),L,$);else if(c.attachEvent)c.attachEvent(ce(m.toString()),L);else if(c.addListener&&c.removeListener)c.addListener(L);else throw Error("addEventListener and attachEvent are unavailable.");return E}function U(){function c(E){return m.call(c.src,c.listener,E)}const m=be;return c}function z(c,m,E,L,$){if(Array.isArray(m))for(var G=0;G<m.length;G++)z(c,m[G],E,L,$);else L=d(L)?!!L.capture:!!L,E=Xe(E),c&&c[ge]?(c=c.i,m=String(m).toString(),m in c.g&&(G=c.g[m],E=qe(G,E,L,$),-1<E&&(He(G[E]),Array.prototype.splice.call(G,E,1),G.length==0&&(delete c.g[m],c.h--)))):c&&(c=Ce(c))&&(m=c.g[m.toString()],c=-1,m&&(c=qe(m,E,L,$)),(E=-1<c?m[c]:null)&&Z(E))}function Z(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[ge])Qe(m.i,c);else{var E=c.type,L=c.proxy;m.removeEventListener?m.removeEventListener(E,L,c.capture):m.detachEvent?m.detachEvent(ce(E),L):m.addListener&&m.removeListener&&m.removeListener(L),(E=Ce(m))?(Qe(E,c),E.h==0&&(E.src=null,m[Ke]=null)):He(c)}}}function ce(c){return c in Ye?Ye[c]:Ye[c]="on"+c}function be(c,m){if(c.da)c=!0;else{m=new X(m,this);var E=c.listener,L=c.ha||c.src;c.fa&&Z(c),c=E.call(L,m)}return c}function Ce(c){return c=c[Ke],c instanceof We?c:null}var Be="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xe(c){return typeof c=="function"?c:(c[Be]||(c[Be]=function(m){return c.handleEvent(m)}),c[Be])}function Ie(){W.call(this),this.i=new We(this),this.M=this,this.F=null}_(Ie,W),Ie.prototype[ge]=!0,Ie.prototype.removeEventListener=function(c,m,E,L){z(this,c,m,E,L)};function Je(c,m){var E,L=c.F;if(L)for(E=[];L;L=L.F)E.push(L);if(c=c.M,L=m.type||m,typeof m=="string")m=new H(m,c);else if(m instanceof H)m.target=m.target||c;else{var $=m;m=new H(L,c),b(m,$)}if($=!0,E)for(var G=E.length-1;0<=G;G--){var le=m.g=E[G];$=Pr(le,L,!0,m)&&$}if(le=m.g=c,$=Pr(le,L,!0,m)&&$,$=Pr(le,L,!1,m)&&$,E)for(G=0;G<E.length;G++)le=m.g=E[G],$=Pr(le,L,!1,m)&&$}Ie.prototype.N=function(){if(Ie.aa.N.call(this),this.i){var c=this.i,m;for(m in c.g){for(var E=c.g[m],L=0;L<E.length;L++)He(E[L]);delete c.g[m],c.h--}}this.F=null},Ie.prototype.K=function(c,m,E,L){return this.i.add(String(c),m,!1,E,L)},Ie.prototype.L=function(c,m,E,L){return this.i.add(String(c),m,!0,E,L)};function Pr(c,m,E,L){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();for(var $=!0,G=0;G<m.length;++G){var le=m[G];if(le&&!le.da&&le.capture==E){var st=le.listener,Wt=le.ha||le.src;le.fa&&Qe(c.i,le),$=st.call(Wt,L)!==!1&&$}}return $&&!L.defaultPrevented}function hr(c,m,E){if(typeof c=="function")E&&(c=p(c,E));else if(c&&typeof c.handleEvent=="function")c=p(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(m)?-1:l.setTimeout(c,m||0)}function ya(c){c.g=hr(()=>{c.g=null,c.i&&(c.i=!1,ya(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class yc extends W{constructor(m,E){super(),this.m=m,this.l=E,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:ya(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Rr(c){W.call(this),this.h=c,this.g={}}_(Rr,W);var ks=[];function Xn(c){V(c.g,function(m,E){this.g.hasOwnProperty(E)&&Z(m)},c),c.g={}}Rr.prototype.N=function(){Rr.aa.N.call(this),Xn(this)},Rr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Dr=l.JSON.stringify,Yo=l.JSON.parse,Xo=class{stringify(c){return l.JSON.stringify(c,void 0)}parse(c){return l.JSON.parse(c,void 0)}};function Qo(){}Qo.prototype.h=null;function Cs(c){return c.h||(c.h=c.i())}function As(){}var Ps={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Qr(){H.call(this,"d")}_(Qr,H);function Jo(){H.call(this,"c")}_(Jo,H);var Jr={},St=null;function fr(){return St=St||new Ie}Jr.La="serverreachability";function _c(c){H.call(this,Jr.La,c)}_(_c,H);function Ci(c){const m=fr();Je(m,new _c(m))}Jr.STAT_EVENT="statevent";function _a(c,m){H.call(this,Jr.STAT_EVENT,c),this.stat=m}_(_a,H);function Ot(c){const m=fr();Je(m,new _a(m,c))}Jr.Ma="timingevent";function Zo(c,m){H.call(this,Jr.Ma,c),this.size=m}_(Zo,H);function Rs(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){c()},m)}function rn(){this.g=!0}rn.prototype.xa=function(){this.g=!1};function wa(c,m,E,L,$,G){c.info(function(){if(c.g)if(G)for(var le="",st=G.split("&"),Wt=0;Wt<st.length;Wt++){var Ge=st[Wt].split("=");if(1<Ge.length){var sn=Ge[0];Ge=Ge[1];var an=sn.split("_");le=2<=an.length&&an[1]=="type"?le+(sn+"="+Ge+"&"):le+(sn+"=redacted&")}}else le=null;else le=G;return"XMLHTTP REQ ("+L+") [attempt "+$+"]: "+m+`
`+E+`
`+le})}function wc(c,m,E,L,$,G,le){c.info(function(){return"XMLHTTP RESP ("+L+") [ attempt "+$+"]: "+m+`
`+E+`
`+G+" "+le})}function Zr(c,m,E,L){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+bc(c,E)+(L?" "+L:"")})}function el(c,m){c.info(function(){return"TIMEOUT: "+m})}rn.prototype.info=function(){};function bc(c,m){if(!c.g)return m;if(!m)return null;try{var E=JSON.parse(m);if(E){for(c=0;c<E.length;c++)if(Array.isArray(E[c])){var L=E[c];if(!(2>L.length)){var $=L[1];if(Array.isArray($)&&!(1>$.length)){var G=$[0];if(G!="noop"&&G!="stop"&&G!="close")for(var le=1;le<$.length;le++)$[le]=""}}}}return Dr(E)}catch{return m}}var Sn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},tl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ba;function Ds(){}_(Ds,Qo),Ds.prototype.g=function(){return new XMLHttpRequest},Ds.prototype.i=function(){return{}},ba=new Ds;function pr(c,m,E,L){this.j=c,this.i=m,this.l=E,this.R=L||1,this.U=new Rr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new xc}function xc(){this.i=null,this.g="",this.h=!1}var ve={},B={};function te(c,m,E){c.L=1,c.v=Ic(ei(m)),c.m=E,c.P=!0,me(c,null)}function me(c,m){c.F=Date.now(),xt(c),c.A=ei(c.v);var E=c.A,L=c.R;Array.isArray(L)||(L=[String(L)]),s0(E.i,"t",L),c.C=0,E=c.j.J,c.h=new xc,c.g=E0(c.j,E?m:null,!c.m),0<c.O&&(c.M=new yc(p(c.Y,c,c.g),c.O)),m=c.U,E=c.g,L=c.ca;var $="readystatechange";Array.isArray($)||($&&(ks[0]=$.toString()),$=ks);for(var G=0;G<$.length;G++){var le=C(E,$[G],L||m.handleEvent,!1,m.h||m);if(!le)break;m.g[le.key]=le}m=c.H?I(c.H):{},c.m?(c.u||(c.u="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,m)):(c.u="GET",c.g.ea(c.A,c.u,null,m)),Ci(),wa(c.i,c.u,c.A,c.l,c.R,c.m)}pr.prototype.ca=function(c){c=c.target;const m=this.M;m&&ti(c)==3?m.j():this.Y(c)},pr.prototype.Y=function(c){try{if(c==this.g)e:{const an=ti(this.g);var m=this.g.Ba();const Sa=this.g.Z();if(!(3>an)&&(an!=3||this.g&&(this.h.h||this.g.oa()||h0(this.g)))){this.J||an!=4||m==7||(m==8||0>=Sa?Ci(3):Ci(2)),In(this);var E=this.g.Z();this.X=E;t:if(it(this)){var L=h0(this.g);c="";var $=L.length,G=ti(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gt(this),mr(this);var le="";break t}this.h.i=new l.TextDecoder}for(m=0;m<$;m++)this.h.h=!0,c+=this.h.i.decode(L[m],{stream:!(G&&m==$-1)});L.length=0,this.h.g+=c,this.C=0,le=this.h.g}else le=this.g.oa();if(this.o=E==200,wc(this.i,this.u,this.A,this.l,this.R,an,E),this.o){if(this.T&&!this.K){t:{if(this.g){var st,Wt=this.g;if((st=Wt.g?Wt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(st)){var Ge=st;break t}}Ge=null}if(E=Ge)Zr(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xa(this,E);else{this.o=!1,this.s=3,Ot(12),gt(this),mr(this);break e}}if(this.P){E=!0;let gr;for(;!this.J&&this.C<le.length;)if(gr=jt(this,le),gr==B){an==4&&(this.s=4,Ot(14),E=!1),Zr(this.i,this.l,null,"[Incomplete Response]");break}else if(gr==ve){this.s=4,Ot(15),Zr(this.i,this.l,le,"[Invalid Chunk]"),E=!1;break}else Zr(this.i,this.l,gr,null),xa(this,gr);if(it(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),an!=4||le.length!=0||this.h.h||(this.s=1,Ot(16),E=!1),this.o=this.o&&E,!E)Zr(this.i,this.l,le,"[Invalid Chunked Response]"),gt(this),mr(this);else if(0<le.length&&!this.W){this.W=!0;var sn=this.j;sn.g==this&&sn.ba&&!sn.M&&(sn.j.info("Great, no buffering proxy detected. Bytes received: "+le.length),mp(sn),sn.M=!0,Ot(11))}}else Zr(this.i,this.l,le,null),xa(this,le);an==4&&gt(this),this.o&&!this.J&&(an==4?_0(this.j,this):(this.o=!1,xt(this)))}else LP(this.g),E==400&&0<le.indexOf("Unknown SID")?(this.s=3,Ot(12)):(this.s=0,Ot(13)),gt(this),mr(this)}}}catch{}finally{}};function it(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function jt(c,m){var E=c.C,L=m.indexOf(`
`,E);return L==-1?B:(E=Number(m.substring(E,L)),isNaN(E)?ve:(L+=1,L+E>m.length?B:(m=m.slice(L,L+E),c.C=L+E,m)))}pr.prototype.cancel=function(){this.J=!0,gt(this)};function xt(c){c.S=Date.now()+c.I,Ht(c,c.I)}function Ht(c,m){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Rs(p(c.ba,c),m)}function In(c){c.B&&(l.clearTimeout(c.B),c.B=null)}pr.prototype.ba=function(){this.B=null;const c=Date.now();0<=c-this.S?(el(this.i,this.A),this.L!=2&&(Ci(),Ot(17)),gt(this),this.s=2,mr(this)):Ht(this,this.S-c)};function mr(c){c.j.G==0||c.J||_0(c.j,c)}function gt(c){In(c);var m=c.M;m&&typeof m.ma=="function"&&m.ma(),c.M=null,Xn(c.U),c.g&&(m=c.g,c.g=null,m.abort(),m.ma())}function xa(c,m){try{var E=c.j;if(E.G!=0&&(E.g==c||cp(E.h,c))){if(!c.K&&cp(E.h,c)&&E.G==3){try{var L=E.Da.g.parse(m)}catch{L=null}if(Array.isArray(L)&&L.length==3){var $=L;if($[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<c.F)Dc(E),Pc(E);else break e;pp(E),Ot(18)}}else E.za=$[1],0<E.za-E.T&&37500>$[2]&&E.F&&E.v==0&&!E.C&&(E.C=Rs(p(E.Za,E),6e3));if(1>=X_(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else Ms(E,11)}else if((c.K||E.g==c)&&Dc(E),!w(m))for($=E.Da.g.parse(m),m=0;m<$.length;m++){let Ge=$[m];if(E.T=Ge[0],Ge=Ge[1],E.G==2)if(Ge[0]=="c"){E.K=Ge[1],E.ia=Ge[2];const sn=Ge[3];sn!=null&&(E.la=sn,E.j.info("VER="+E.la));const an=Ge[4];an!=null&&(E.Aa=an,E.j.info("SVER="+E.Aa));const Sa=Ge[5];Sa!=null&&typeof Sa=="number"&&0<Sa&&(L=1.5*Sa,E.L=L,E.j.info("backChannelRequestTimeoutMs_="+L)),L=E;const gr=c.g;if(gr){const Mc=gr.g?gr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mc){var G=L.h;G.g||Mc.indexOf("spdy")==-1&&Mc.indexOf("quic")==-1&&Mc.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(dp(G,G.h),G.h=null))}if(L.D){const gp=gr.g?gr.g.getResponseHeader("X-HTTP-Session-Id"):null;gp&&(L.ya=gp,lt(L.I,L.D,gp))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-c.F,E.j.info("Handshake RTT: "+E.R+"ms")),L=E;var le=c;if(L.qa=x0(L,L.J?L.ia:null,L.W),le.K){Q_(L.h,le);var st=le,Wt=L.L;Wt&&(st.I=Wt),st.B&&(In(st),xt(st)),L.g=le}else v0(L);0<E.i.length&&Rc(E)}else Ge[0]!="stop"&&Ge[0]!="close"||Ms(E,7);else E.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?Ms(E,7):fp(E):Ge[0]!="noop"&&E.l&&E.l.ta(Ge),E.v=0)}}Ci(4)}catch{}}var Ec=class{constructor(c,m){this.g=c,this.map=m}};function K_(c){this.l=c||10,l.PerformanceNavigationTiming?(c=l.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Y_(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function X_(c){return c.h?1:c.g?c.g.size:0}function cp(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function dp(c,m){c.g?c.g.add(m):c.h=m}function Q_(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}K_.prototype.cancel=function(){if(this.i=J_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function J_(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const E of c.g.values())m=m.concat(E.D);return m}return A(c.i)}function wP(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var m=[],E=c.length,L=0;L<E;L++)m.push(c[L]);return m}m=[],E=0;for(L in c)m[E++]=c[L];return m}function bP(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var m=[];c=c.length;for(var E=0;E<c;E++)m.push(E);return m}m=[],E=0;for(const L in c)m[E++]=L;return m}}}function Z_(c,m){if(c.forEach&&typeof c.forEach=="function")c.forEach(m,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,m,void 0);else for(var E=bP(c),L=wP(c),$=L.length,G=0;G<$;G++)m.call(void 0,L[G],E&&E[G],c)}var e0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function xP(c,m){if(c){c=c.split("&");for(var E=0;E<c.length;E++){var L=c[E].indexOf("="),$=null;if(0<=L){var G=c[E].substring(0,L);$=c[E].substring(L+1)}else G=c[E];m(G,$?decodeURIComponent($.replace(/\+/g," ")):"")}}}function Ns(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Ns){this.h=c.h,Tc(this,c.j),this.o=c.o,this.g=c.g,Sc(this,c.s),this.l=c.l;var m=c.i,E=new il;E.i=m.i,m.g&&(E.g=new Map(m.g),E.h=m.h),t0(this,E),this.m=c.m}else c&&(m=String(c).match(e0))?(this.h=!1,Tc(this,m[1]||"",!0),this.o=nl(m[2]||""),this.g=nl(m[3]||"",!0),Sc(this,m[4]),this.l=nl(m[5]||"",!0),t0(this,m[6]||"",!0),this.m=nl(m[7]||"")):(this.h=!1,this.i=new il(null,this.h))}Ns.prototype.toString=function(){var c=[],m=this.j;m&&c.push(rl(m,n0,!0),":");var E=this.g;return(E||m=="file")&&(c.push("//"),(m=this.o)&&c.push(rl(m,n0,!0),"@"),c.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&c.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&c.push("/"),c.push(rl(E,E.charAt(0)=="/"?SP:TP,!0))),(E=this.i.toString())&&c.push("?",E),(E=this.m)&&c.push("#",rl(E,kP)),c.join("")};function ei(c){return new Ns(c)}function Tc(c,m,E){c.j=E?nl(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function Sc(c,m){if(m){if(m=Number(m),isNaN(m)||0>m)throw Error("Bad port number "+m);c.s=m}else c.s=null}function t0(c,m,E){m instanceof il?(c.i=m,CP(c.i,c.h)):(E||(m=rl(m,IP)),c.i=new il(m,c.h))}function lt(c,m,E){c.i.set(m,E)}function Ic(c){return lt(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function nl(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function rl(c,m,E){return typeof c=="string"?(c=encodeURI(c).replace(m,EP),E&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function EP(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var n0=/[#\/\?@]/g,TP=/[#\?:]/g,SP=/[#\?]/g,IP=/[#\?@]/g,kP=/#/g;function il(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function Ai(c){c.g||(c.g=new Map,c.h=0,c.i&&xP(c.i,function(m,E){c.add(decodeURIComponent(m.replace(/\+/g," ")),E)}))}t=il.prototype,t.add=function(c,m){Ai(this),this.i=null,c=Ea(this,c);var E=this.g.get(c);return E||this.g.set(c,E=[]),E.push(m),this.h+=1,this};function r0(c,m){Ai(c),m=Ea(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function i0(c,m){return Ai(c),m=Ea(c,m),c.g.has(m)}t.forEach=function(c,m){Ai(this),this.g.forEach(function(E,L){E.forEach(function($){c.call(m,$,L,this)},this)},this)},t.na=function(){Ai(this);const c=Array.from(this.g.values()),m=Array.from(this.g.keys()),E=[];for(let L=0;L<m.length;L++){const $=c[L];for(let G=0;G<$.length;G++)E.push(m[L])}return E},t.V=function(c){Ai(this);let m=[];if(typeof c=="string")i0(this,c)&&(m=m.concat(this.g.get(Ea(this,c))));else{c=Array.from(this.g.values());for(let E=0;E<c.length;E++)m=m.concat(c[E])}return m},t.set=function(c,m){return Ai(this),this.i=null,c=Ea(this,c),i0(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},t.get=function(c,m){return c?(c=this.V(c),0<c.length?String(c[0]):m):m};function s0(c,m,E){r0(c,m),0<E.length&&(c.i=null,c.g.set(Ea(c,m),A(E)),c.h+=E.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(var E=0;E<m.length;E++){var L=m[E];const G=encodeURIComponent(String(L)),le=this.V(L);for(L=0;L<le.length;L++){var $=G;le[L]!==""&&($+="="+encodeURIComponent(String(le[L]))),c.push($)}}return this.i=c.join("&")};function Ea(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function CP(c,m){m&&!c.j&&(Ai(c),c.i=null,c.g.forEach(function(E,L){var $=L.toLowerCase();L!=$&&(r0(this,L),s0(this,$,E))},c)),c.j=m}function AP(c,m){const E=new rn;if(l.Image){const L=new Image;L.onload=g(Pi,E,"TestLoadImage: loaded",!0,m,L),L.onerror=g(Pi,E,"TestLoadImage: error",!1,m,L),L.onabort=g(Pi,E,"TestLoadImage: abort",!1,m,L),L.ontimeout=g(Pi,E,"TestLoadImage: timeout",!1,m,L),l.setTimeout(function(){L.ontimeout&&L.ontimeout()},1e4),L.src=c}else m(!1)}function PP(c,m){const E=new rn,L=new AbortController,$=setTimeout(()=>{L.abort(),Pi(E,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:L.signal}).then(G=>{clearTimeout($),G.ok?Pi(E,"TestPingServer: ok",!0,m):Pi(E,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout($),Pi(E,"TestPingServer: error",!1,m)})}function Pi(c,m,E,L,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),L(E)}catch{}}function RP(){this.g=new Xo}function DP(c,m,E){const L=E||"";try{Z_(c,function($,G){let le=$;d($)&&(le=Dr($)),m.push(L+G+"="+encodeURIComponent(le))})}catch($){throw m.push(L+"type="+encodeURIComponent("_badmap")),$}}function kc(c){this.l=c.Ub||null,this.j=c.eb||!1}_(kc,Qo),kc.prototype.g=function(){return new Cc(this.l,this.j)},kc.prototype.i=function(c){return function(){return c}}({});function Cc(c,m){Ie.call(this),this.D=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}_(Cc,Ie),t=Cc.prototype,t.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=m,this.readyState=1,al(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const m={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(m.body=c),(this.D||l).fetch(new Request(this.A,m)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sl(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,al(this)),this.g&&(this.readyState=3,al(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;a0(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function a0(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.v.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?sl(this):al(this),this.readyState==3&&a0(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,sl(this))},t.Qa=function(c){this.g&&(this.response=c,sl(this))},t.ga=function(){this.g&&sl(this)};function sl(c){c.readyState=4,c.l=null,c.j=null,c.v=null,al(c)}t.setRequestHeader=function(c,m){this.u.append(c,m)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var E=m.next();!E.done;)E=E.value,c.push(E[0]+": "+E[1]),E=m.next();return c.join(`\r
`)};function al(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Cc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function o0(c){let m="";return V(c,function(E,L){m+=L,m+=":",m+=E,m+=`\r
`}),m}function hp(c,m,E){e:{for(L in E){var L=!1;break e}L=!0}L||(E=o0(E),typeof c=="string"?E!=null&&encodeURIComponent(String(E)):lt(c,m,E))}function Et(c){Ie.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}_(Et,Ie);var NP=/^https?$/i,MP=["POST","PUT"];t=Et.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,m,E,L){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ba.g(),this.v=this.o?Cs(this.o):Cs(ba),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(G){l0(this,G);return}if(c=E||"",E=new Map(this.headers),L)if(Object.getPrototypeOf(L)===Object.prototype)for(var $ in L)E.set($,L[$]);else if(typeof L.keys=="function"&&typeof L.get=="function")for(const G of L.keys())E.set(G,L.get(G));else throw Error("Unknown input type for opt_headers: "+String(L));L=Array.from(E.keys()).find(G=>G.toLowerCase()=="content-type"),$=l.FormData&&c instanceof l.FormData,!(0<=Array.prototype.indexOf.call(MP,m,void 0))||L||$||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,le]of E)this.g.setRequestHeader(G,le);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{d0(this),this.u=!0,this.g.send(c),this.u=!1}catch(G){l0(this,G)}};function l0(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.m=5,u0(c),Ac(c)}function u0(c){c.A||(c.A=!0,Je(c,"complete"),Je(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Je(this,"complete"),Je(this,"abort"),Ac(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ac(this,!0)),Et.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?c0(this):this.bb())},t.bb=function(){c0(this)};function c0(c){if(c.h&&typeof o<"u"&&(!c.v[1]||ti(c)!=4||c.Z()!=2)){if(c.u&&ti(c)==4)hr(c.Ea,0,c);else if(Je(c,"readystatechange"),ti(c)==4){c.h=!1;try{const le=c.Z();e:switch(le){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var E;if(!(E=m)){var L;if(L=le===0){var $=String(c.D).match(e0)[1]||null;!$&&l.self&&l.self.location&&($=l.self.location.protocol.slice(0,-1)),L=!NP.test($?$.toLowerCase():"")}E=L}if(E)Je(c,"complete"),Je(c,"success");else{c.m=6;try{var G=2<ti(c)?c.g.statusText:""}catch{G=""}c.l=G+" ["+c.Z()+"]",u0(c)}}finally{Ac(c)}}}}function Ac(c,m){if(c.g){d0(c);const E=c.g,L=c.v[0]?()=>{}:null;c.g=null,c.v=null,m||Je(c,"ready");try{E.onreadystatechange=L}catch{}}}function d0(c){c.I&&(l.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function ti(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<ti(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Yo(m)}};function h0(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function LP(c){const m={};c=(c.g&&2<=ti(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let L=0;L<c.length;L++){if(w(c[L]))continue;var E=T(c[L]);const $=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const G=m[$]||[];m[$]=G,G.push(E)}N(m,function(L){return L.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ol(c,m,E){return E&&E.internalChannelParams&&E.internalChannelParams[c]||m}function f0(c){this.Aa=0,this.i=[],this.j=new rn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ol("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ol("baseRetryDelayMs",5e3,c),this.cb=ol("retryDelaySeedMs",1e4,c),this.Wa=ol("forwardChannelMaxRetries",2,c),this.wa=ol("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new K_(c&&c.concurrentRequestLimit),this.Da=new RP,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=f0.prototype,t.la=8,t.G=1,t.connect=function(c,m,E,L){Ot(0),this.W=c,this.H=m||{},E&&L!==void 0&&(this.H.OSID=E,this.H.OAID=L),this.F=this.X,this.I=x0(this,null,this.W),Rc(this)};function fp(c){if(p0(c),c.G==3){var m=c.U++,E=ei(c.I);if(lt(E,"SID",c.K),lt(E,"RID",m),lt(E,"TYPE","terminate"),ll(c,E),m=new pr(c,c.j,m),m.L=2,m.v=Ic(ei(E)),E=!1,l.navigator&&l.navigator.sendBeacon)try{E=l.navigator.sendBeacon(m.v.toString(),"")}catch{}!E&&l.Image&&(new Image().src=m.v,E=!0),E||(m.g=E0(m.j,null),m.g.ea(m.v)),m.F=Date.now(),xt(m)}b0(c)}function Pc(c){c.g&&(mp(c),c.g.cancel(),c.g=null)}function p0(c){Pc(c),c.u&&(l.clearTimeout(c.u),c.u=null),Dc(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&l.clearTimeout(c.s),c.s=null)}function Rc(c){if(!Y_(c.h)&&!c.s){c.s=!0;var m=c.Ga;he||se(),q||(he(),q=!0),Y.add(m,c),c.B=0}}function OP(c,m){return X_(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=m.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Rs(p(c.Ga,c,m),w0(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;const $=new pr(this,this.j,c);let G=this.o;if(this.S&&(G?(G=I(G),b(G,this.S)):G=this.S),this.m!==null||this.O||($.H=G,G=null),this.P)e:{for(var m=0,E=0;E<this.i.length;E++){t:{var L=this.i[E];if("__data__"in L.map&&(L=L.map.__data__,typeof L=="string")){L=L.length;break t}L=void 0}if(L===void 0)break;if(m+=L,4096<m){m=E;break e}if(m===4096||E===this.i.length-1){m=E+1;break e}}m=1e3}else m=1e3;m=g0(this,$,m),E=ei(this.I),lt(E,"RID",c),lt(E,"CVER",22),this.D&&lt(E,"X-HTTP-Session-Id",this.D),ll(this,E),G&&(this.O?m="headers="+encodeURIComponent(String(o0(G)))+"&"+m:this.m&&hp(E,this.m,G)),dp(this.h,$),this.Ua&&lt(E,"TYPE","init"),this.P?(lt(E,"$req",m),lt(E,"SID","null"),$.T=!0,te($,E,null)):te($,E,m),this.G=2}}else this.G==3&&(c?m0(this,c):this.i.length==0||Y_(this.h)||m0(this))};function m0(c,m){var E;m?E=m.l:E=c.U++;const L=ei(c.I);lt(L,"SID",c.K),lt(L,"RID",E),lt(L,"AID",c.T),ll(c,L),c.m&&c.o&&hp(L,c.m,c.o),E=new pr(c,c.j,E,c.B+1),c.m===null&&(E.H=c.o),m&&(c.i=m.D.concat(c.i)),m=g0(c,E,1e3),E.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),dp(c.h,E),te(E,L,m)}function ll(c,m){c.H&&V(c.H,function(E,L){lt(m,L,E)}),c.l&&Z_({},function(E,L){lt(m,L,E)})}function g0(c,m,E){E=Math.min(c.i.length,E);var L=c.l?p(c.l.Na,c.l,c):null;e:{var $=c.i;let G=-1;for(;;){const le=["count="+E];G==-1?0<E?(G=$[0].g,le.push("ofs="+G)):G=0:le.push("ofs="+G);let st=!0;for(let Wt=0;Wt<E;Wt++){let Ge=$[Wt].g;const sn=$[Wt].map;if(Ge-=G,0>Ge)G=Math.max(0,$[Wt].g-100),st=!1;else try{DP(sn,le,"req"+Ge+"_")}catch{L&&L(sn)}}if(st){L=le.join("&");break e}}}return c=c.i.splice(0,E),m.D=c,L}function v0(c){if(!c.g&&!c.u){c.Y=1;var m=c.Fa;he||se(),q||(he(),q=!0),Y.add(m,c),c.v=0}}function pp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Rs(p(c.Fa,c),w0(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,y0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Rs(p(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ot(10),Pc(this),y0(this))};function mp(c){c.A!=null&&(l.clearTimeout(c.A),c.A=null)}function y0(c){c.g=new pr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var m=ei(c.qa);lt(m,"RID","rpc"),lt(m,"SID",c.K),lt(m,"AID",c.T),lt(m,"CI",c.F?"0":"1"),!c.F&&c.ja&&lt(m,"TO",c.ja),lt(m,"TYPE","xmlhttp"),ll(c,m),c.m&&c.o&&hp(m,c.m,c.o),c.L&&(c.g.I=c.L);var E=c.g;c=c.ia,E.L=1,E.v=Ic(ei(m)),E.m=null,E.P=!0,me(E,c)}t.Za=function(){this.C!=null&&(this.C=null,Pc(this),pp(this),Ot(19))};function Dc(c){c.C!=null&&(l.clearTimeout(c.C),c.C=null)}function _0(c,m){var E=null;if(c.g==m){Dc(c),mp(c),c.g=null;var L=2}else if(cp(c.h,m))E=m.D,Q_(c.h,m),L=1;else return;if(c.G!=0){if(m.o)if(L==1){E=m.m?m.m.length:0,m=Date.now()-m.F;var $=c.B;L=fr(),Je(L,new Zo(L,E)),Rc(c)}else v0(c);else if($=m.s,$==3||$==0&&0<m.X||!(L==1&&OP(c,m)||L==2&&pp(c)))switch(E&&0<E.length&&(m=c.h,m.i=m.i.concat(E)),$){case 1:Ms(c,5);break;case 4:Ms(c,10);break;case 3:Ms(c,6);break;default:Ms(c,2)}}}function w0(c,m){let E=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(E*=2),E*m}function Ms(c,m){if(c.j.info("Error code "+m),m==2){var E=p(c.fb,c),L=c.Xa;const $=!L;L=new Ns(L||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Tc(L,"https"),Ic(L),$?AP(L.toString(),E):PP(L.toString(),E)}else Ot(2);c.G=0,c.l&&c.l.sa(m),b0(c),p0(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function b0(c){if(c.G=0,c.ka=[],c.l){const m=J_(c.h);(m.length!=0||c.i.length!=0)&&(P(c.ka,m),P(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function x0(c,m,E){var L=E instanceof Ns?ei(E):new Ns(E);if(L.g!="")m&&(L.g=m+"."+L.g),Sc(L,L.s);else{var $=l.location;L=$.protocol,m=m?m+"."+$.hostname:$.hostname,$=+$.port;var G=new Ns(null);L&&Tc(G,L),m&&(G.g=m),$&&Sc(G,$),E&&(G.l=E),L=G}return E=c.D,m=c.ya,E&&m&&lt(L,E,m),lt(L,"VER",c.la),ll(c,L),L}function E0(c,m,E){if(m&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Ca&&!c.pa?new Et(new kc({eb:E})):new Et(c.pa),m.Ha(c.J),m}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function T0(){}t=T0.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Nc(){}Nc.prototype.g=function(c,m){return new jn(c,m)};function jn(c,m){Ie.call(this),this.g=new f0(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.va&&(c?c["X-WebChannel-Client-Profile"]=m.va:c={"X-WebChannel-Client-Profile":m.va}),this.g.S=c,(c=m&&m.Sb)&&!w(c)&&(this.g.m=c),this.v=m&&m.supportsCrossDomainXhr||!1,this.u=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!w(m)&&(this.g.D=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Ta(this)}_(jn,Ie),jn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},jn.prototype.close=function(){fp(this.g)},jn.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var E={};E.__data__=c,c=E}else this.u&&(E={},E.__data__=Dr(c),c=E);m.i.push(new Ec(m.Ya++,c)),m.G==3&&Rc(m)},jn.prototype.N=function(){this.g.l=null,delete this.j,fp(this.g),delete this.g,jn.aa.N.call(this)};function S0(c){Qr.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const E in m){c=E;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}_(S0,Qr);function I0(){Jo.call(this),this.status=1}_(I0,Jo);function Ta(c){this.g=c}_(Ta,T0),Ta.prototype.ua=function(){Je(this.g,"a")},Ta.prototype.ta=function(c){Je(this.g,new S0(c))},Ta.prototype.sa=function(c){Je(this.g,new I0)},Ta.prototype.ra=function(){Je(this.g,"b")},Nc.prototype.createWebChannel=Nc.prototype.g,jn.prototype.send=jn.prototype.o,jn.prototype.open=jn.prototype.m,jn.prototype.close=jn.prototype.close,k1=function(){return new Nc},I1=function(){return fr()},S1=Jr,Lg={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Sn.NO_ERROR=0,Sn.TIMEOUT=8,Sn.HTTP_ERROR=6,Nd=Sn,tl.COMPLETE="complete",T1=tl,As.EventType=Ps,Ps.OPEN="a",Ps.CLOSE="b",Ps.ERROR="c",Ps.MESSAGE="d",Ie.prototype.listen=Ie.prototype.K,Dl=As,Et.prototype.listenOnce=Et.prototype.L,Et.prototype.getLastError=Et.prototype.Ka,Et.prototype.getLastErrorCode=Et.prototype.Ba,Et.prototype.getStatus=Et.prototype.Z,Et.prototype.getResponseJson=Et.prototype.Oa,Et.prototype.getResponseText=Et.prototype.oa,Et.prototype.send=Et.prototype.ea,Et.prototype.setWithCredentials=Et.prototype.Ha,E1=Et}).apply(typeof ed<"u"?ed:typeof self<"u"?self:typeof window<"u"?window:{});const wb="@firebase/firestore",bb="4.7.8";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}cn.UNAUTHENTICATED=new cn(null),cn.GOOGLE_CREDENTIALS=new cn("google-credentials-uid"),cn.FIRST_PARTY=new cn("first-party-uid"),cn.MOCK_USER=new cn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo="11.3.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sa=new Sy("@firebase/firestore");function Da(){return sa.logLevel}function fe(t,...e){if(sa.logLevel<=Me.DEBUG){const r=e.map(jy);sa.debug(`Firestore (${Uo}): ${t}`,...r)}}function _i(t,...e){if(sa.logLevel<=Me.ERROR){const r=e.map(jy);sa.error(`Firestore (${Uo}): ${t}`,...r)}}function vo(t,...e){if(sa.logLevel<=Me.WARN){const r=e.map(jy);sa.warn(`Firestore (${Uo}): ${t}`,...r)}}function jy(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(t="Unexpected state"){const e=`FIRESTORE (${Uo}) INTERNAL ASSERTION FAILED: `+t;throw _i(e),new Error(e)}function Ze(t,e){t||Te()}function ke(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Ti{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(cn.UNAUTHENTICATED))}shutdown(){}}class Vj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class Fj{constructor(e){this.t=e,this.currentUser=cn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Ze(this.o===void 0);let i=this.i;const s=u=>this.i!==i?(i=this.i,r(u)):Promise.resolve();let a=new hi;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new hi,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=a;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new hi)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(i=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ze(typeof i.accessToken=="string"),new C1(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ze(e===null||typeof e=="string"),new cn(e)}}class Uj{constructor(e,r,i){this.l=e,this.h=r,this.P=i,this.type="FirstParty",this.user=cn.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Bj{constructor(e,r,i){this.l=e,this.h=r,this.P=i}getToken(){return Promise.resolve(new Uj(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(cn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class zj{constructor(e,r){this.A=r,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,xr(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,r){Ze(this.o===void 0);const i=a=>{a.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const o=a.token!==this.R;return this.R=a.token,fe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>i(a))};const s=a=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(a=>s(a)),setTimeout(()=>{if(!this.appCheck){const a=this.A.getImmediate({optional:!0});a?s(a):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new xb(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Ze(typeof r.token=="string"),this.R=r.token,new xb(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $j(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let i=0;i<t;i++)r[i]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=$j(40);for(let a=0;a<s.length;++a)i.length<20&&s[a]<r&&(i+=e.charAt(s[a]%62))}return i}}function je(t,e){return t<e?-1:t>e?1:0}function yo(t,e,r){return t.length===e.length&&t.every((i,s)=>r(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eb=-62135596800,Tb=1e6;class Mt{static now(){return Mt.fromMillis(Date.now())}static fromDate(e){return Mt.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),i=Math.floor((e-1e3*r)*Tb);return new Mt(r,i)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new ye(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new ye(ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<Eb)throw new ye(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tb}_compareTo(e){return this.seconds===e.seconds?je(this.nanoseconds,e.nanoseconds):je(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Eb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{static fromTimestamp(e){return new Se(e)}static min(){return new Se(new Mt(0,0))}static max(){return new Se(new Mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sb="__name__";class Or{constructor(e,r,i){r===void 0?r=0:r>e.length&&Te(),i===void 0?i=e.length-r:i>e.length-r&&Te(),this.segments=e,this.offset=r,this.len=i}get length(){return this.len}isEqual(e){return Or.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof Or?e.forEach(i=>{r.push(i)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,i=this.limit();r<i;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const i=Math.min(e.length,r.length);for(let s=0;s<i;s++){const a=Or.compareSegments(e.get(s),r.get(s));if(a!==0)return a}return Math.sign(e.length-r.length)}static compareSegments(e,r){const i=Or.isNumericId(e),s=Or.isNumericId(r);return i&&!s?-1:!i&&s?1:i&&s?Or.extractNumericId(e).compare(Or.extractNumericId(r)):e<r?-1:e>r?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return is.fromString(e.substring(4,e.length-2))}}class pt extends Or{construct(e,r,i){return new pt(e,r,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const i of e){if(i.indexOf("//")>=0)throw new ye(ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);r.push(...i.split("/").filter(s=>s.length>0))}return new pt(r)}static emptyPath(){return new pt([])}}const Hj=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Yt extends Or{construct(e,r,i){return new Yt(e,r,i)}static isValidIdentifier(e){return Hj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Sb}static keyField(){return new Yt([Sb])}static fromServerFormat(e){const r=[];let i="",s=0;const a=()=>{if(i.length===0)throw new ye(ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(i),i=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new ye(ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new ye(ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(i+=l,s++):(a(),s++)}if(a(),o)throw new ye(ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Yt(r)}static emptyPath(){return new Yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(e){this.path=e}static fromPath(e){return new we(pt.fromString(e))}static fromName(e){return new we(pt.fromString(e).popFirst(5))}static empty(){return new we(pt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return pt.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new we(new pt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eu=-1;function Wj(t,e){const r=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=Se.fromTimestamp(i===1e9?new Mt(r+1,0):new Mt(r,i));return new hs(s,we.empty(),e)}function qj(t){return new hs(t.readTime,t.key,Eu)}class hs{constructor(e,r,i){this.readTime=e,this.documentKey=r,this.largestBatchId=i}static min(){return new hs(Se.min(),we.empty(),Eu)}static max(){return new hs(Se.max(),we.empty(),Eu)}}function Gj(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=we.comparator(t.documentKey,e.documentKey),r!==0?r:je(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Yj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(t){if(t.code!==ee.FAILED_PRECONDITION||t.message!==Kj)throw t;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&Te(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new J((i,s)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,s)},this.catchCallback=a=>{this.wrapFailure(r,a).next(i,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof J?r:J.resolve(r)}catch(r){return J.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):J.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):J.reject(r)}static resolve(e){return new J((r,i)=>{r(e)})}static reject(e){return new J((r,i)=>{i(e)})}static waitFor(e){return new J((r,i)=>{let s=0,a=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++a,o&&a===s&&r()},u=>i(u))}),o=!0,a===s&&r()})}static or(e){let r=J.resolve(!1);for(const i of e)r=r.next(s=>s?J.resolve(s):i());return r}static forEach(e,r){const i=[];return e.forEach((s,a)=>{i.push(r.call(this,s,a))}),this.waitFor(i)}static mapArray(e,r){return new J((i,s)=>{const a=e.length,o=new Array(a);let l=0;for(let u=0;u<a;u++){const d=u;r(e[d]).next(h=>{o[d]=h,++l,l===a&&i(o)},h=>s(h))}})}static doWhile(e,r){return new J((i,s)=>{const a=()=>{e()===!0?r().next(()=>{a()},s):i()};a()})}}function Xj(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function zo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=i=>this.oe(i),this._e=i=>r.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}_f.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vy=-1;function wf(t){return t==null}function xh(t){return t===0&&1/t==-1/0}function Qj(t){return typeof t=="number"&&Number.isInteger(t)&&!xh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P1="";function Jj(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=Ib(e)),e=Zj(t.get(r),e);return Ib(e)}function Zj(t,e){let r=e;const i=t.length;for(let s=0;s<i;s++){const a=t.charAt(s);switch(a){case"\0":r+="";break;case P1:r+="";break;default:r+=a}}return r}function Ib(t){return t+P1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Ts(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function R1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,r){this.comparator=e,this.root=r||Kt.EMPTY}insert(e,r){return new bt(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Kt.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Kt.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return r.value;i<0?r=r.left:i>0&&(r=r.right)}return null}indexOf(e){let r=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return r+i.left.size;s<0?i=i.left:(r+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,i)=>(e(r,i),!1))}toString(){const e=[];return this.inorderTraversal((r,i)=>(e.push(`${r}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new td(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new td(this.root,e,this.comparator,!1)}getReverseIterator(){return new td(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new td(this.root,e,this.comparator,!0)}}class td{constructor(e,r,i,s){this.isReverse=s,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=r?i(e.key,r):1,r&&s&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Kt{constructor(e,r,i,s,a){this.key=e,this.value=r,this.color=i??Kt.RED,this.left=s??Kt.EMPTY,this.right=a??Kt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,i,s,a){return new Kt(e??this.key,r??this.value,i??this.color,s??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,i){let s=this;const a=i(e,s.key);return s=a<0?s.copy(null,null,null,s.left.insert(e,r,i),null):a===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Kt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let i,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Kt.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Kt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Kt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Te();const e=this.left.check();if(e!==this.right.check())throw Te();return e+(this.isRed()?0:1)}}Kt.EMPTY=null,Kt.RED=!0,Kt.BLACK=!1;Kt.EMPTY=new class{constructor(){this.size=0}get key(){throw Te()}get value(){throw Te()}get color(){throw Te()}get left(){throw Te()}get right(){throw Te()}copy(e,r,i,s,a){return this}insert(e,r,i){return new Kt(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,i)=>(e(r),!1))}forEachInRange(e,r){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let i;for(i=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new Cb(this.data.getIterator())}getIteratorFrom(e){return new Cb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(i=>{r=r.add(i)}),r}isEqual(e){if(!(e instanceof Lt)||this.size!==e.size)return!1;const r=this.data.getIterator(),i=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=i.getNext().key;if(this.comparator(s,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Lt(this.comparator);return r.data=e,r}}class Cb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(e){this.fields=e,e.sort(Yt.comparator)}static empty(){return new Un([])}unionWith(e){let r=new Lt(Yt.comparator);for(const i of this.fields)r=r.add(i);for(const i of e)r=r.add(i);return new Un(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return yo(this.fields,e.fields,(r,i)=>r.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new D1("Invalid base64 string: "+a):a}}(e);return new tn(r)}static fromUint8Array(e){const r=function(s){let a="";for(let o=0;o<s.length;++o)a+=String.fromCharCode(s[o]);return a}(e);return new tn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const i=new Uint8Array(r.length);for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return je(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const eV=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fs(t){if(Ze(!!t),typeof t=="string"){let e=0;const r=eV.exec(t);if(Ze(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:It(t.seconds),nanos:It(t.nanos)}}function It(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ps(t){return typeof t=="string"?tn.fromBase64String(t):tn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1="server_timestamp",M1="__type__",L1="__previous_value__",O1="__local_write_time__";function Fy(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[M1])===null||r===void 0?void 0:r.stringValue)===N1}function bf(t){const e=t.mapValue.fields[L1];return Fy(e)?bf(e):e}function Tu(t){const e=fs(t.mapValue.fields[O1].timestampValue);return new Mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e,r,i,s,a,o,l,u,d){this.databaseId=e,this.appId=r,this.persistenceKey=i,this.host=s,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}const Eh="(default)";class Su{constructor(e,r){this.projectId=e,this.database=r||Eh}static empty(){return new Su("","")}get isDefaultDatabase(){return this.database===Eh}isEqual(e){return e instanceof Su&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="__type__",nV="__max__",nd={mapValue:{}},V1="__vector__",Th="value";function ms(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fy(t)?4:iV(t)?9007199254740991:rV(t)?10:11:Te()}function Gr(t,e){if(t===e)return!0;const r=ms(t);if(r!==ms(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Tu(t).isEqual(Tu(e));case 3:return function(s,a){if(typeof s.timestampValue=="string"&&typeof a.timestampValue=="string"&&s.timestampValue.length===a.timestampValue.length)return s.timestampValue===a.timestampValue;const o=fs(s.timestampValue),l=fs(a.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,a){return ps(s.bytesValue).isEqual(ps(a.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,a){return It(s.geoPointValue.latitude)===It(a.geoPointValue.latitude)&&It(s.geoPointValue.longitude)===It(a.geoPointValue.longitude)}(t,e);case 2:return function(s,a){if("integerValue"in s&&"integerValue"in a)return It(s.integerValue)===It(a.integerValue);if("doubleValue"in s&&"doubleValue"in a){const o=It(s.doubleValue),l=It(a.doubleValue);return o===l?xh(o)===xh(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return yo(t.arrayValue.values||[],e.arrayValue.values||[],Gr);case 10:case 11:return function(s,a){const o=s.mapValue.fields||{},l=a.mapValue.fields||{};if(kb(o)!==kb(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Gr(o[u],l[u])))return!1;return!0}(t,e);default:return Te()}}function Iu(t,e){return(t.values||[]).find(r=>Gr(r,e))!==void 0}function _o(t,e){if(t===e)return 0;const r=ms(t),i=ms(e);if(r!==i)return je(r,i);switch(r){case 0:case 9007199254740991:return 0;case 1:return je(t.booleanValue,e.booleanValue);case 2:return function(a,o){const l=It(a.integerValue||a.doubleValue),u=It(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Ab(t.timestampValue,e.timestampValue);case 4:return Ab(Tu(t),Tu(e));case 5:return je(t.stringValue,e.stringValue);case 6:return function(a,o){const l=ps(a),u=ps(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(a,o){const l=a.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const h=je(l[d],u[d]);if(h!==0)return h}return je(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(a,o){const l=je(It(a.latitude),It(o.latitude));return l!==0?l:je(It(a.longitude),It(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Pb(t.arrayValue,e.arrayValue);case 10:return function(a,o){var l,u,d,h;const f=a.fields||{},p=o.fields||{},g=(l=f[Th])===null||l===void 0?void 0:l.arrayValue,_=(u=p[Th])===null||u===void 0?void 0:u.arrayValue,A=je(((d=g==null?void 0:g.values)===null||d===void 0?void 0:d.length)||0,((h=_==null?void 0:_.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:Pb(g,_)}(t.mapValue,e.mapValue);case 11:return function(a,o){if(a===nd.mapValue&&o===nd.mapValue)return 0;if(a===nd.mapValue)return 1;if(o===nd.mapValue)return-1;const l=a.fields||{},u=Object.keys(l),d=o.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const p=je(u[f],h[f]);if(p!==0)return p;const g=_o(l[u[f]],d[h[f]]);if(g!==0)return g}return je(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Te()}}function Ab(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return je(t,e);const r=fs(t),i=fs(e),s=je(r.seconds,i.seconds);return s!==0?s:je(r.nanos,i.nanos)}function Pb(t,e){const r=t.values||[],i=e.values||[];for(let s=0;s<r.length&&s<i.length;++s){const a=_o(r[s],i[s]);if(a)return a}return je(r.length,i.length)}function wo(t){return Og(t)}function Og(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const i=fs(r);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return ps(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return we.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let i="[",s=!0;for(const a of r.values||[])s?s=!1:i+=",",i+=Og(a);return i+"]"}(t.arrayValue):"mapValue"in t?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",a=!0;for(const o of i)a?a=!1:s+=",",s+=`${o}:${Og(r.fields[o])}`;return s+"}"}(t.mapValue):Te()}function Md(t){switch(ms(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=bf(t);return e?16+Md(e):16;case 5:return 2*t.stringValue.length;case 6:return ps(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((s,a)=>s+Md(a),0)}(t.arrayValue);case 10:case 11:return function(i){let s=0;return Ts(i.fields,(a,o)=>{s+=a.length+Md(o)}),s}(t.mapValue);default:throw Te()}}function jg(t){return!!t&&"integerValue"in t}function Uy(t){return!!t&&"arrayValue"in t}function Rb(t){return!!t&&"nullValue"in t}function Db(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ld(t){return!!t&&"mapValue"in t}function rV(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{})[j1])===null||r===void 0?void 0:r.stringValue)===V1}function Kl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ts(t.mapValue.fields,(r,i)=>e.mapValue.fields[r]=Kl(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Kl(t.arrayValue.values[r]);return e}return Object.assign({},t)}function iV(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===nV}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let i=0;i<e.length-1;++i)if(r=(r.mapValue.fields||{})[e.get(i)],!Ld(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Kl(r)}setAll(e){let r=Yt.emptyPath(),i={},s=[];e.forEach((o,l)=>{if(!r.isImmediateParentOf(l)){const u=this.getFieldsMap(r);this.applyChanges(u,i,s),i={},s=[],r=l.popLast()}o?i[l.lastSegment()]=Kl(o):s.push(l.lastSegment())});const a=this.getFieldsMap(r);this.applyChanges(a,i,s)}delete(e){const r=this.field(e.popLast());Ld(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Gr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=r.mapValue.fields[e.get(i)];Ld(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(i)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,i){Ts(r,(s,a)=>e[s]=a);for(const s of i)delete e[s]}clone(){return new Pn(Kl(this.value))}}function F1(t){const e=[];return Ts(t.fields,(r,i)=>{const s=new Yt([r]);if(Ld(i)){const a=F1(i.mapValue).fields;if(a.length===0)e.push(s);else for(const o of a)e.push(s.child(o))}else e.push(s)}),new Un(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e,r,i,s,a,o,l){this.key=e,this.documentType=r,this.version=i,this.readTime=s,this.createTime=a,this.data=o,this.documentState=l}static newInvalidDocument(e){return new hn(e,0,Se.min(),Se.min(),Se.min(),Pn.empty(),0)}static newFoundDocument(e,r,i,s){return new hn(e,1,r,Se.min(),i,s,0)}static newNoDocument(e,r){return new hn(e,2,r,Se.min(),Se.min(),Pn.empty(),0)}static newUnknownDocument(e,r){return new hn(e,3,r,Se.min(),Se.min(),Pn.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof hn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new hn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sh{constructor(e,r){this.position=e,this.inclusive=r}}function Nb(t,e,r){let i=0;for(let s=0;s<t.position.length;s++){const a=e[s],o=t.position[s];if(a.field.isKeyField()?i=we.comparator(we.fromName(o.referenceValue),r.key):i=_o(o,r.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function Mb(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Gr(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,r="asc"){this.field=e,this.dir=r}}function sV(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{}class Dt extends U1{constructor(e,r,i){super(),this.field=e,this.op=r,this.value=i}static create(e,r,i){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,i):new oV(e,r,i):r==="array-contains"?new cV(e,i):r==="in"?new dV(e,i):r==="not-in"?new hV(e,i):r==="array-contains-any"?new fV(e,i):new Dt(e,r,i)}static createKeyFieldInFilter(e,r,i){return r==="in"?new lV(e,i):new uV(e,i)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(_o(r,this.value)):r!==null&&ms(this.value)===ms(r)&&this.matchesComparison(_o(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Te()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Kr extends U1{constructor(e,r){super(),this.filters=e,this.op=r,this.ce=null}static create(e,r){return new Kr(e,r)}matches(e){return B1(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function B1(t){return t.op==="and"}function z1(t){return aV(t)&&B1(t)}function aV(t){for(const e of t.filters)if(e instanceof Kr)return!1;return!0}function Vg(t){if(t instanceof Dt)return t.field.canonicalString()+t.op.toString()+wo(t.value);if(z1(t))return t.filters.map(e=>Vg(e)).join(",");{const e=t.filters.map(r=>Vg(r)).join(",");return`${t.op}(${e})`}}function $1(t,e){return t instanceof Dt?function(i,s){return s instanceof Dt&&i.op===s.op&&i.field.isEqual(s.field)&&Gr(i.value,s.value)}(t,e):t instanceof Kr?function(i,s){return s instanceof Kr&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((a,o,l)=>a&&$1(o,s.filters[l]),!0):!1}(t,e):void Te()}function H1(t){return t instanceof Dt?function(r){return`${r.field.canonicalString()} ${r.op} ${wo(r.value)}`}(t):t instanceof Kr?function(r){return r.op.toString()+" {"+r.getFilters().map(H1).join(" ,")+"}"}(t):"Filter"}class oV extends Dt{constructor(e,r,i){super(e,r,i),this.key=we.fromName(i.referenceValue)}matches(e){const r=we.comparator(e.key,this.key);return this.matchesComparison(r)}}class lV extends Dt{constructor(e,r){super(e,"in",r),this.keys=W1("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class uV extends Dt{constructor(e,r){super(e,"not-in",r),this.keys=W1("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function W1(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(i=>we.fromName(i.referenceValue))}class cV extends Dt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Uy(r)&&Iu(r.arrayValue,this.value)}}class dV extends Dt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Iu(this.value.arrayValue,r)}}class hV extends Dt{constructor(e,r){super(e,"not-in",r)}matches(e){if(Iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!Iu(this.value.arrayValue,r)}}class fV extends Dt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Uy(r)||!r.arrayValue.values)&&r.arrayValue.values.some(i=>Iu(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(e,r=null,i=[],s=[],a=null,o=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=i,this.filters=s,this.limit=a,this.startAt=o,this.endAt=l,this.le=null}}function Lb(t,e=null,r=[],i=[],s=null,a=null,o=null){return new pV(t,e,r,i,s,a,o)}function By(t){const e=ke(t);if(e.le===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(i=>Vg(i)).join(","),r+="|ob:",r+=e.orderBy.map(i=>function(a){return a.field.canonicalString()+a.dir}(i)).join(","),wf(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(i=>wo(i)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(i=>wo(i)).join(",")),e.le=r}return e.le}function zy(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!sV(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!$1(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Mb(t.startAt,e.startAt)&&Mb(t.endAt,e.endAt)}function Fg(t){return we.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xf{constructor(e,r=null,i=[],s=[],a=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=i,this.filters=s,this.limit=a,this.limitType=o,this.startAt=l,this.endAt=u,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function mV(t,e,r,i,s,a,o,l){return new xf(t,e,r,i,s,a,o,l)}function $y(t){return new xf(t)}function Ob(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function gV(t){return t.collectionGroup!==null}function Yl(t){const e=ke(t);if(e.he===null){e.he=[];const r=new Set;for(const a of e.explicitOrderBy)e.he.push(a),r.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Lt(Yt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(a=>{r.has(a.canonicalString())||a.isKeyField()||e.he.push(new Ih(a,i))}),r.has(Yt.keyField().canonicalString())||e.he.push(new Ih(Yt.keyField(),i))}return e.he}function $r(t){const e=ke(t);return e.Pe||(e.Pe=vV(e,Yl(t))),e.Pe}function vV(t,e){if(t.limitType==="F")return Lb(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const a=s.dir==="desc"?"asc":"desc";return new Ih(s.field,a)});const r=t.endAt?new Sh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Sh(t.startAt.position,t.startAt.inclusive):null;return Lb(t.path,t.collectionGroup,e,t.filters,t.limit,r,i)}}function Ug(t,e,r){return new xf(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Ef(t,e){return zy($r(t),$r(e))&&t.limitType===e.limitType}function q1(t){return`${By($r(t))}|lt:${t.limitType}`}function Na(t){return`Query(target=${function(r){let i=r.path.canonicalString();return r.collectionGroup!==null&&(i+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(i+=`, filters: [${r.filters.map(s=>H1(s)).join(", ")}]`),wf(r.limit)||(i+=", limit: "+r.limit),r.orderBy.length>0&&(i+=`, orderBy: [${r.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),r.startAt&&(i+=", startAt: ",i+=r.startAt.inclusive?"b:":"a:",i+=r.startAt.position.map(s=>wo(s)).join(",")),r.endAt&&(i+=", endAt: ",i+=r.endAt.inclusive?"a:":"b:",i+=r.endAt.position.map(s=>wo(s)).join(",")),`Target(${i})`}($r(t))}; limitType=${t.limitType})`}function Tf(t,e){return e.isFoundDocument()&&function(i,s){const a=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):we.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)}(t,e)&&function(i,s){for(const a of Yl(i))if(!a.field.isKeyField()&&s.data.field(a.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const a of i.filters)if(!a.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(o,l,u){const d=Nb(o,l,u);return o.inclusive?d<=0:d<0}(i.startAt,Yl(i),s)||i.endAt&&!function(o,l,u){const d=Nb(o,l,u);return o.inclusive?d>=0:d>0}(i.endAt,Yl(i),s))}(t,e)}function yV(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function G1(t){return(e,r)=>{let i=!1;for(const s of Yl(t)){const a=_V(s,e,r);if(a!==0)return a;i=i||s.field.isKeyField()}return 0}}function _V(t,e,r){const i=t.field.isKeyField()?we.comparator(e.key,r.key):function(a,o,l){const u=o.data.field(a),d=l.data.field(a);return u!==null&&d!==null?_o(u,d):Te()}(t.field,e,r);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return Te()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i!==void 0){for(const[s,a]of i)if(this.equalsFn(s,e))return a}}has(e){return this.get(e)!==void 0}set(e,r){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,r]],void this.innerSize++;for(let a=0;a<s.length;a++)if(this.equalsFn(s[a][0],e))return void(s[a]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[r]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ts(this.inner,(r,i)=>{for(const[s,a]of i)e(s,a)})}isEmpty(){return R1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV=new bt(we.comparator);function wi(){return wV}const K1=new bt(we.comparator);function Nl(...t){let e=K1;for(const r of t)e=e.insert(r.key,r);return e}function Y1(t){let e=K1;return t.forEach((r,i)=>e=e.insert(r,i.overlayedDocument)),e}function Ys(){return Xl()}function X1(){return Xl()}function Xl(){return new fa(t=>t.toString(),(t,e)=>t.isEqual(e))}const bV=new bt(we.comparator),xV=new Lt(we.comparator);function Le(...t){let e=xV;for(const r of t)e=e.add(r);return e}const EV=new Lt(je);function TV(){return EV}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hy(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xh(e)?"-0":e}}function Q1(t){return{integerValue:""+t}}function SV(t,e){return Qj(e)?Q1(e):Hy(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(){this._=void 0}}function IV(t,e,r){return t instanceof kh?function(s,a){const o={fields:{[M1]:{stringValue:N1},[O1]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return a&&Fy(a)&&(a=bf(a)),a&&(o.fields[L1]=a),{mapValue:o}}(r,e):t instanceof ku?Z1(t,e):t instanceof Cu?ek(t,e):function(s,a){const o=J1(s,a),l=jb(o)+jb(s.Ie);return jg(o)&&jg(s.Ie)?Q1(l):Hy(s.serializer,l)}(t,e)}function kV(t,e,r){return t instanceof ku?Z1(t,e):t instanceof Cu?ek(t,e):r}function J1(t,e){return t instanceof Ch?function(i){return jg(i)||function(a){return!!a&&"doubleValue"in a}(i)}(e)?e:{integerValue:0}:null}class kh extends Sf{}class ku extends Sf{constructor(e){super(),this.elements=e}}function Z1(t,e){const r=tk(e);for(const i of t.elements)r.some(s=>Gr(s,i))||r.push(i);return{arrayValue:{values:r}}}class Cu extends Sf{constructor(e){super(),this.elements=e}}function ek(t,e){let r=tk(e);for(const i of t.elements)r=r.filter(s=>!Gr(s,i));return{arrayValue:{values:r}}}class Ch extends Sf{constructor(e,r){super(),this.serializer=e,this.Ie=r}}function jb(t){return It(t.integerValue||t.doubleValue)}function tk(t){return Uy(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function CV(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof ku&&s instanceof ku||i instanceof Cu&&s instanceof Cu?yo(i.elements,s.elements,Gr):i instanceof Ch&&s instanceof Ch?Gr(i.Ie,s.Ie):i instanceof kh&&s instanceof kh}(t.transform,e.transform)}class AV{constructor(e,r){this.version=e,this.transformResults=r}}class Hr{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Hr}static exists(e){return new Hr(void 0,e)}static updateTime(e){return new Hr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Od(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class If{}function nk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new ik(t.key,Hr.none()):new Qu(t.key,t.data,Hr.none());{const r=t.data,i=Pn.empty();let s=new Lt(Yt.comparator);for(let a of e.fields)if(!s.has(a)){let o=r.field(a);o===null&&a.length>1&&(a=a.popLast(),o=r.field(a)),o===null?i.delete(a):i.set(a,o),s=s.add(a)}return new Ss(t.key,i,new Un(s.toArray()),Hr.none())}}function PV(t,e,r){t instanceof Qu?function(s,a,o){const l=s.value.clone(),u=Fb(s.fieldTransforms,a,o.transformResults);l.setAll(u),a.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Ss?function(s,a,o){if(!Od(s.precondition,a))return void a.convertToUnknownDocument(o.version);const l=Fb(s.fieldTransforms,a,o.transformResults),u=a.data;u.setAll(rk(s)),u.setAll(l),a.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,r):function(s,a,o){a.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function Ql(t,e,r,i){return t instanceof Qu?function(a,o,l,u){if(!Od(a.precondition,o))return l;const d=a.value.clone(),h=Ub(a.fieldTransforms,u,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,r,i):t instanceof Ss?function(a,o,l,u){if(!Od(a.precondition,o))return l;const d=Ub(a.fieldTransforms,u,o),h=o.data;return h.setAll(rk(a)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(f=>f.field))}(t,e,r,i):function(a,o,l){return Od(a.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,r)}function RV(t,e){let r=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),a=J1(i.transform,s||null);a!=null&&(r===null&&(r=Pn.empty()),r.set(i.field,a))}return r||null}function Vb(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&yo(i,s,(a,o)=>CV(a,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Qu extends If{constructor(e,r,i,s=[]){super(),this.key=e,this.value=r,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ss extends If{constructor(e,r,i,s,a=[]){super(),this.key=e,this.data=r,this.fieldMask=i,this.precondition=s,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function rk(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const i=t.data.field(r);e.set(r,i)}}),e}function Fb(t,e,r){const i=new Map;Ze(t.length===r.length);for(let s=0;s<r.length;s++){const a=t[s],o=a.transform,l=e.data.field(a.field);i.set(a.field,kV(o,l,r[s]))}return i}function Ub(t,e,r){const i=new Map;for(const s of t){const a=s.transform,o=r.data.field(s.field);i.set(s.field,IV(a,o,e))}return i}class ik extends If{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class NV extends If{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MV{constructor(e,r,i,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,r){const i=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const a=this.mutations[s];a.key.isEqual(e.key)&&PV(a,e,i[s])}}applyToLocalView(e,r){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(r=Ql(i,e,r,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(r=Ql(i,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const i=X1();return this.mutations.forEach(s=>{const a=e.get(s.key),o=a.overlayedDocument;let l=this.applyToLocalView(o,a.mutatedFields);l=r.has(s.key)?null:l;const u=nk(o,l);u!==null&&i.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(Se.min())}),i}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Le())}isEqual(e){return this.batchId===e.batchId&&yo(this.mutations,e.mutations,(r,i)=>Vb(r,i))&&yo(this.baseMutations,e.baseMutations,(r,i)=>Vb(r,i))}}class Wy{constructor(e,r,i,s){this.batch=e,this.commitVersion=r,this.mutationResults=i,this.docVersions=s}static from(e,r,i){Ze(e.mutations.length===i.length);let s=function(){return bV}();const a=e.mutations;for(let o=0;o<a.length;o++)s=s.insert(a[o].key,i[o].version);return new Wy(e,r,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ct,Ue;function jV(t){switch(t){case ee.OK:return Te();case ee.CANCELLED:case ee.UNKNOWN:case ee.DEADLINE_EXCEEDED:case ee.RESOURCE_EXHAUSTED:case ee.INTERNAL:case ee.UNAVAILABLE:case ee.UNAUTHENTICATED:return!1;case ee.INVALID_ARGUMENT:case ee.NOT_FOUND:case ee.ALREADY_EXISTS:case ee.PERMISSION_DENIED:case ee.FAILED_PRECONDITION:case ee.ABORTED:case ee.OUT_OF_RANGE:case ee.UNIMPLEMENTED:case ee.DATA_LOSS:return!0;default:return Te()}}function sk(t){if(t===void 0)return _i("GRPC error has no .code"),ee.UNKNOWN;switch(t){case Ct.OK:return ee.OK;case Ct.CANCELLED:return ee.CANCELLED;case Ct.UNKNOWN:return ee.UNKNOWN;case Ct.DEADLINE_EXCEEDED:return ee.DEADLINE_EXCEEDED;case Ct.RESOURCE_EXHAUSTED:return ee.RESOURCE_EXHAUSTED;case Ct.INTERNAL:return ee.INTERNAL;case Ct.UNAVAILABLE:return ee.UNAVAILABLE;case Ct.UNAUTHENTICATED:return ee.UNAUTHENTICATED;case Ct.INVALID_ARGUMENT:return ee.INVALID_ARGUMENT;case Ct.NOT_FOUND:return ee.NOT_FOUND;case Ct.ALREADY_EXISTS:return ee.ALREADY_EXISTS;case Ct.PERMISSION_DENIED:return ee.PERMISSION_DENIED;case Ct.FAILED_PRECONDITION:return ee.FAILED_PRECONDITION;case Ct.ABORTED:return ee.ABORTED;case Ct.OUT_OF_RANGE:return ee.OUT_OF_RANGE;case Ct.UNIMPLEMENTED:return ee.UNIMPLEMENTED;case Ct.DATA_LOSS:return ee.DATA_LOSS;default:return Te()}}(Ue=Ct||(Ct={}))[Ue.OK=0]="OK",Ue[Ue.CANCELLED=1]="CANCELLED",Ue[Ue.UNKNOWN=2]="UNKNOWN",Ue[Ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ue[Ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ue[Ue.NOT_FOUND=5]="NOT_FOUND",Ue[Ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ue[Ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ue[Ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ue[Ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ue[Ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ue[Ue.ABORTED=10]="ABORTED",Ue[Ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ue[Ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ue[Ue.INTERNAL=13]="INTERNAL",Ue[Ue.UNAVAILABLE=14]="UNAVAILABLE",Ue[Ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VV(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV=new is([4294967295,4294967295],0);function Bb(t){const e=VV().encode(t),r=new x1;return r.update(e),new Uint8Array(r.digest())}function zb(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new is([r,i],0),new is([s,a],0)]}class qy{constructor(e,r,i){if(this.bitmap=e,this.padding=r,this.hashCount=i,r<0||r>=8)throw new Ml(`Invalid padding: ${r}`);if(i<0)throw new Ml(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Ml(`Invalid hash count: ${i}`);if(e.length===0&&r!==0)throw new Ml(`Invalid padding when bitmap length is 0: ${r}`);this.Ee=8*e.length-r,this.de=is.fromNumber(this.Ee)}Ae(e,r,i){let s=e.add(r.multiply(is.fromNumber(i)));return s.compare(FV)===1&&(s=new is([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const r=Bb(e),[i,s]=zb(r);for(let a=0;a<this.hashCount;a++){const o=this.Ae(i,s,a);if(!this.Re(o))return!1}return!0}static create(e,r,i){const s=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),o=new qy(a,s,r);return i.forEach(l=>o.insert(l)),o}insert(e){if(this.Ee===0)return;const r=Bb(e),[i,s]=zb(r);for(let a=0;a<this.hashCount;a++){const o=this.Ae(i,s,a);this.Ve(o)}}Ve(e){const r=Math.floor(e/8),i=e%8;this.bitmap[r]|=1<<i}}class Ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,r,i,s,a){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,r,i){const s=new Map;return s.set(e,Ju.createSynthesizedTargetChangeForCurrentChange(e,r,i)),new kf(Se.min(),s,new bt(je),wi(),Le())}}class Ju{constructor(e,r,i,s,a){this.resumeToken=e,this.current=r,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,r,i){return new Ju(i,r,Le(),Le(),Le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,r,i,s){this.me=e,this.removedTargetIds=r,this.key=i,this.fe=s}}class ak{constructor(e,r){this.targetId=e,this.ge=r}}class ok{constructor(e,r,i=tn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=i,this.cause=s}}class $b{constructor(){this.pe=0,this.ye=Hb(),this.we=tn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Le(),r=Le(),i=Le();return this.ye.forEach((s,a)=>{switch(a){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:i=i.add(s);break;default:Te()}}),new Ju(this.we,this.Se,e,r,i)}Me(){this.be=!1,this.ye=Hb()}xe(e,r){this.be=!0,this.ye=this.ye.insert(e,r)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,Ze(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class UV{constructor(e){this.ke=e,this.qe=new Map,this.Qe=wi(),this.$e=rd(),this.Ke=rd(),this.Ue=new bt(je)}We(e){for(const r of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(r,e.fe):this.ze(r,e.key,e.fe);for(const r of e.removedTargetIds)this.ze(r,e.key,e.fe)}je(e){this.forEachTarget(e,r=>{const i=this.He(r);switch(e.state){case 0:this.Je(r)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(r);break;case 3:this.Je(r)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(r)&&(this.Ye(r),i.Ce(e.resumeToken));break;default:Te()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.qe.forEach((i,s)=>{this.Je(s)&&r(s)})}Ze(e){const r=e.targetId,i=e.ge.count,s=this.Xe(r);if(s){const a=s.target;if(Fg(a))if(i===0){const o=new we(a.path);this.ze(r,o,hn.newNoDocument(o,Se.min()))}else Ze(i===1);else{const o=this.et(r);if(o!==i){const l=this.tt(e),u=l?this.nt(l,e,o):1;if(u!==0){this.Ye(r);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(r,d)}}}}}tt(e){const r=e.ge.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:a=0}=r;let o,l;try{o=ps(i).toUint8Array()}catch(u){if(u instanceof D1)return vo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new qy(o,s,a)}catch(u){return vo(u instanceof Ml?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ee===0?null:l}nt(e,r,i){return r.ge.count===i-this.st(e,r.targetId)?0:2}st(e,r){const i=this.ke.getRemoteKeysForTarget(r);let s=0;return i.forEach(a=>{const o=this.ke.it(),l=`projects/${o.projectId}/databases/${o.database}/documents/${a.path.canonicalString()}`;e.mightContain(l)||(this.ze(r,a,null),s++)}),s}ot(e){const r=new Map;this.qe.forEach((a,o)=>{const l=this.Xe(o);if(l){if(a.current&&Fg(l.target)){const u=new we(l.target.path);this._t(u).has(o)||this.ut(o,u)||this.ze(o,u,hn.newNoDocument(u,e))}a.ve&&(r.set(o,a.Fe()),a.Me())}});let i=Le();this.Ke.forEach((a,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Xe(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(i=i.add(a))}),this.Qe.forEach((a,o)=>o.setReadTime(e));const s=new kf(e,r,this.Ue,this.Qe,i);return this.Qe=wi(),this.$e=rd(),this.Ke=rd(),this.Ue=new bt(je),s}Ge(e,r){if(!this.Je(e))return;const i=this.ut(e,r.key)?2:0;this.He(e).xe(r.key,i),this.Qe=this.Qe.insert(r.key,r),this.$e=this.$e.insert(r.key,this._t(r.key).add(e)),this.Ke=this.Ke.insert(r.key,this.ct(r.key).add(e))}ze(e,r,i){if(!this.Je(e))return;const s=this.He(e);this.ut(e,r)?s.xe(r,1):s.Oe(r),this.Ke=this.Ke.insert(r,this.ct(r).delete(e)),this.Ke=this.Ke.insert(r,this.ct(r).add(e)),i&&(this.Qe=this.Qe.insert(r,i))}removeTarget(e){this.qe.delete(e)}et(e){const r=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let r=this.qe.get(e);return r||(r=new $b,this.qe.set(e,r)),r}ct(e){let r=this.Ke.get(e);return r||(r=new Lt(je),this.Ke=this.Ke.insert(e,r)),r}_t(e){let r=this.$e.get(e);return r||(r=new Lt(je),this.$e=this.$e.insert(e,r)),r}Je(e){const r=this.Xe(e)!==null;return r||fe("WatchChangeAggregator","Detected inactive target",e),r}Xe(e){const r=this.qe.get(e);return r&&r.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new $b),this.ke.getRemoteKeysForTarget(e).forEach(r=>{this.ze(e,r,null)})}ut(e,r){return this.ke.getRemoteKeysForTarget(e).has(r)}}function rd(){return new bt(we.comparator)}function Hb(){return new bt(we.comparator)}const BV={asc:"ASCENDING",desc:"DESCENDING"},zV={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},$V={and:"AND",or:"OR"};class HV{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Bg(t,e){return t.useProto3Json||wf(e)?e:{value:e}}function Ah(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function lk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function WV(t,e){return Ah(t,e.toTimestamp())}function Wr(t){return Ze(!!t),Se.fromTimestamp(function(r){const i=fs(r);return new Mt(i.seconds,i.nanos)}(t))}function Gy(t,e){return zg(t,e).canonicalString()}function zg(t,e){const r=function(s){return new pt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function uk(t){const e=pt.fromString(t);return Ze(pk(e)),e}function $g(t,e){return Gy(t.databaseId,e.path)}function Jp(t,e){const r=uk(e);if(r.get(1)!==t.databaseId.projectId)throw new ye(ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new ye(ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new we(dk(r))}function ck(t,e){return Gy(t.databaseId,e)}function qV(t){const e=uk(t);return e.length===4?pt.emptyPath():dk(e)}function Hg(t){return new pt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function dk(t){return Ze(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Wb(t,e,r){return{name:$g(t,e),fields:r.value.mapValue.fields}}function GV(t,e){let r;if("targetChange"in e){e.targetChange;const i=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Te()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],a=function(d,h){return d.useProto3Json?(Ze(h===void 0||typeof h=="string"),tn.fromBase64String(h||"")):(Ze(h===void 0||h instanceof Buffer||h instanceof Uint8Array),tn.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?ee.UNKNOWN:sk(d.code);return new ye(h,d.message||"")}(o);r=new ok(i,s,a,l||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Jp(t,i.document.name),a=Wr(i.document.updateTime),o=i.document.createTime?Wr(i.document.createTime):Se.min(),l=new Pn({mapValue:{fields:i.document.fields}}),u=hn.newFoundDocument(s,a,o,l),d=i.targetIds||[],h=i.removedTargetIds||[];r=new jd(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Jp(t,i.document),a=i.readTime?Wr(i.readTime):Se.min(),o=hn.newNoDocument(s,a),l=i.removedTargetIds||[];r=new jd([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Jp(t,i.document),a=i.removedTargetIds||[];r=new jd([],a,s,null)}else{if(!("filter"in e))return Te();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:a}=i,o=new OV(s,a),l=i.targetId;r=new ak(l,o)}}return r}function KV(t,e){let r;if(e instanceof Qu)r={update:Wb(t,e.key,e.value)};else if(e instanceof ik)r={delete:$g(t,e.key)};else if(e instanceof Ss)r={update:Wb(t,e.key,e.data),updateMask:rF(e.fieldMask)};else{if(!(e instanceof NV))return Te();r={verify:$g(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(i=>function(a,o){const l=o.transform;if(l instanceof kh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ku)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Cu)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ch)return{fieldPath:o.field.canonicalString(),increment:l.Ie};throw Te()}(0,i))),e.precondition.isNone||(r.currentDocument=function(s,a){return a.updateTime!==void 0?{updateTime:WV(s,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Te()}(t,e.precondition)),r}function YV(t,e){return t&&t.length>0?(Ze(e!==void 0),t.map(r=>function(s,a){let o=s.updateTime?Wr(s.updateTime):Wr(a);return o.isEqual(Se.min())&&(o=Wr(a)),new AV(o,s.transformResults||[])}(r,e))):[]}function XV(t,e){return{documents:[ck(t,e.path)]}}function QV(t,e){const r={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),r.structuredQuery.from=[{collectionId:i.lastSegment()}]),r.parent=ck(t,s);const a=function(d){if(d.length!==0)return fk(Kr.create(d,"and"))}(e.filters);a&&(r.structuredQuery.where=a);const o=function(d){if(d.length!==0)return d.map(h=>function(p){return{field:Ma(p.field),direction:eF(p.dir)}}(h))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const l=Bg(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ht:r,parent:s}}function JV(t){let e=qV(t.parent);const r=t.structuredQuery,i=r.from?r.from.length:0;let s=null;if(i>0){Ze(i===1);const h=r.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let a=[];r.where&&(a=function(f){const p=hk(f);return p instanceof Kr&&z1(p)?p.getFilters():[p]}(r.where));let o=[];r.orderBy&&(o=function(f){return f.map(p=>function(_){return new Ih(La(_.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(p))}(r.orderBy));let l=null;r.limit&&(l=function(f){let p;return p=typeof f=="object"?f.value:f,wf(p)?null:p}(r.limit));let u=null;r.startAt&&(u=function(f){const p=!!f.before,g=f.values||[];return new Sh(g,p)}(r.startAt));let d=null;return r.endAt&&(d=function(f){const p=!f.before,g=f.values||[];return new Sh(g,p)}(r.endAt)),mV(e,s,o,a,l,"F",u,d)}function ZV(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Te()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function hk(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const i=La(r.unaryFilter.field);return Dt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=La(r.unaryFilter.field);return Dt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=La(r.unaryFilter.field);return Dt.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=La(r.unaryFilter.field);return Dt.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Te()}}(t):t.fieldFilter!==void 0?function(r){return Dt.create(La(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Te()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Kr.create(r.compositeFilter.filters.map(i=>hk(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Te()}}(r.compositeFilter.op))}(t):Te()}function eF(t){return BV[t]}function tF(t){return zV[t]}function nF(t){return $V[t]}function Ma(t){return{fieldPath:t.canonicalString()}}function La(t){return Yt.fromServerFormat(t.fieldPath)}function fk(t){return t instanceof Dt?function(r){if(r.op==="=="){if(Db(r.value))return{unaryFilter:{field:Ma(r.field),op:"IS_NAN"}};if(Rb(r.value))return{unaryFilter:{field:Ma(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Db(r.value))return{unaryFilter:{field:Ma(r.field),op:"IS_NOT_NAN"}};if(Rb(r.value))return{unaryFilter:{field:Ma(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ma(r.field),op:tF(r.op),value:r.value}}}(t):t instanceof Kr?function(r){const i=r.getFilters().map(s=>fk(s));return i.length===1?i[0]:{compositeFilter:{op:nF(r.op),filters:i}}}(t):Te()}function rF(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function pk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,r,i,s,a=Se.min(),o=Se.min(),l=tn.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Wi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Wi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(e){this.Tt=e}}function sF(t){const e=JV({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Ug(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aF{constructor(){this.Tn=new oF}addToCollectionParentIndex(e,r){return this.Tn.add(r),J.resolve()}getCollectionParents(e,r){return J.resolve(this.Tn.getEntries(r))}addFieldIndex(e,r){return J.resolve()}deleteFieldIndex(e,r){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,r){return J.resolve()}getDocumentsMatchingTarget(e,r){return J.resolve(null)}getIndexType(e,r){return J.resolve(0)}getFieldIndexes(e,r){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,r){return J.resolve(hs.min())}getMinOffsetFromCollectionGroup(e,r){return J.resolve(hs.min())}updateCollectionGroup(e,r,i){return J.resolve()}updateIndexEntries(e,r){return J.resolve()}}class oF{constructor(){this.index={}}add(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r]||new Lt(pt.comparator),a=!s.has(i);return this.index[r]=s.add(i),a}has(e){const r=e.lastSegment(),i=e.popLast(),s=this.index[r];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Lt(pt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},mk=41943040;class Cn{static withCacheSize(e){return new Cn(e,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn.DEFAULT_COLLECTION_PERCENTILE=10,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cn.DEFAULT=new Cn(mk,Cn.DEFAULT_COLLECTION_PERCENTILE,Cn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cn.DISABLED=new Cn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new bo(0)}static Un(){return new bo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb="LruGarbageCollector",lF=1048576;function Kb([t,e],[r,i]){const s=je(t,r);return s===0?je(e,i):s}class uF{constructor(e){this.Hn=e,this.buffer=new Lt(Kb),this.Jn=0}Yn(){return++this.Jn}Zn(e){const r=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(r);else{const i=this.buffer.last();Kb(r,i)<0&&(this.buffer=this.buffer.delete(i).add(r))}}get maxValue(){return this.buffer.last()[0]}}class cF{constructor(e,r,i){this.garbageCollector=e,this.asyncQueue=r,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){fe(Gb,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){zo(r)?fe(Gb,"Ignoring IndexedDB error during garbage collection: ",r):await Bo(r)}await this.er(3e5)})}}class dF{constructor(e,r){this.tr=e,this.params=r}calculateTargetCount(e,r){return this.tr.nr(e).next(i=>Math.floor(r/100*i))}nthSequenceNumber(e,r){if(r===0)return J.resolve(_f.ae);const i=new uF(r);return this.tr.forEachTarget(e,s=>i.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>i.Zn(s))).next(()=>i.maxValue)}removeTargets(e,r,i){return this.tr.removeTargets(e,r,i)}removeOrphanedDocuments(e,r){return this.tr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(qb)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),qb):this.ir(e,r))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,r){let i,s,a,o,l,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(i=f,l=Date.now(),this.removeTargets(e,i,r))).next(f=>(a=f,u=Date.now(),this.removeOrphanedDocuments(e,i))).next(f=>(d=Date.now(),Da()<=Me.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${a} targets in `+(u-l)+`ms
	Removed ${f} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:a,documentsRemoved:f})))}}function hF(t,e){return new dF(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{constructor(){this.changes=new fa(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const i=this.changes.get(r);return i!==void 0?J.resolve(i):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pF{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mF{constructor(e,r,i,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,r){let i=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(i!==null&&Ql(i.mutation,s,Un.empty(),Mt.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.getLocalViewOfDocuments(e,i,Le()).next(()=>i))}getLocalViewOfDocuments(e,r,i=Le()){const s=Ys();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,i).next(a=>{let o=Nl();return a.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const i=Ys();return this.populateOverlays(e,i,r).next(()=>this.computeViews(e,r,i,Le()))}populateOverlays(e,r,i){const s=[];return i.forEach(a=>{r.has(a)||s.push(a)}),this.documentOverlayCache.getOverlays(e,s).next(a=>{a.forEach((o,l)=>{r.set(o,l)})})}computeViews(e,r,i,s){let a=wi();const o=Xl(),l=function(){return Xl()}();return r.forEach((u,d)=>{const h=i.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Ss)?a=a.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Ql(h.mutation,d,h.mutation.getFieldMask(),Mt.now())):o.set(d.key,Un.empty())}),this.recalculateAndSaveOverlays(e,a).next(u=>(u.forEach((d,h)=>o.set(d,h)),r.forEach((d,h)=>{var f;return l.set(d,new pF(h,(f=o.get(d))!==null&&f!==void 0?f:null))}),l))}recalculateAndSaveOverlays(e,r){const i=Xl();let s=new bt((o,l)=>o-l),a=Le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=r.get(u);if(d===null)return;let h=i.get(u)||Un.empty();h=l.applyToLocalView(d,h),i.set(u,h);const f=(s.get(l.batchId)||Le()).add(u);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,h=u.value,f=X1();h.forEach(p=>{if(!a.has(p)){const g=nk(r.get(p),i.get(p));g!==null&&f.set(p,g),a=a.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,f))}return J.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,r,i,s){return function(o){return we.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):gV(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,i,s):this.getDocumentsMatchingCollectionQuery(e,r,i,s)}getNextDocuments(e,r,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,i,s).next(a=>{const o=s-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,i.largestBatchId,s-a.size):J.resolve(Ys());let l=Eu,u=a;return o.next(d=>J.forEach(d,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),a.get(h)?J.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{u=u.insert(h,p)}))).next(()=>this.populateOverlays(e,d,a)).next(()=>this.computeViews(e,u,d,Le())).next(h=>({batchId:l,changes:Y1(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new we(r)).next(i=>{let s=Nl();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,i,s){const a=r.collectionGroup;let o=Nl();return this.indexManager.getCollectionParents(e,a).next(l=>J.forEach(l,u=>{const d=function(f,p){return new xf(p,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,u.child(a));return this.getDocumentsMatchingCollectionQuery(e,d,i,s).next(h=>{h.forEach((f,p)=>{o=o.insert(f,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,i,s){let a;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,i.largestBatchId).next(o=>(a=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,i,a,s))).next(o=>{a.forEach((u,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,hn.newInvalidDocument(h)))});let l=Nl();return o.forEach((u,d)=>{const h=a.get(u);h!==void 0&&Ql(h.mutation,d,Un.empty(),Mt.now()),Tf(r,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gF{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,r){return J.resolve(this.dr.get(r))}saveBundleMetadata(e,r){return this.dr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Wr(s.createTime)}}(r)),J.resolve()}getNamedQuery(e,r){return J.resolve(this.Ar.get(r))}saveNamedQuery(e,r){return this.Ar.set(r.name,function(s){return{name:s.name,query:sF(s.bundledQuery),readTime:Wr(s.readTime)}}(r)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(){this.overlays=new bt(we.comparator),this.Rr=new Map}getOverlay(e,r){return J.resolve(this.overlays.get(r))}getOverlays(e,r){const i=Ys();return J.forEach(r,s=>this.getOverlay(e,s).next(a=>{a!==null&&i.set(s,a)})).next(()=>i)}saveOverlays(e,r,i){return i.forEach((s,a)=>{this.Et(e,r,a)}),J.resolve()}removeOverlaysForBatchId(e,r,i){const s=this.Rr.get(i);return s!==void 0&&(s.forEach(a=>this.overlays=this.overlays.remove(a)),this.Rr.delete(i)),J.resolve()}getOverlaysForCollection(e,r,i){const s=Ys(),a=r.length+1,o=new we(r.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!r.isPrefixOf(d.path))break;d.path.length===a&&u.largestBatchId>i&&s.set(u.getKey(),u)}return J.resolve(s)}getOverlaysForCollectionGroup(e,r,i,s){let a=new bt((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===r&&d.largestBatchId>i){let h=a.get(d.largestBatchId);h===null&&(h=Ys(),a=a.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Ys(),u=a.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return J.resolve(l)}Et(e,r,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.Rr.get(s.largestBatchId).delete(i.key);this.Rr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new LV(r,i));let a=this.Rr.get(r);a===void 0&&(a=Le(),this.Rr.set(r,a)),this.Rr.set(r,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yF{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(){this.Vr=new Lt(Vt.mr),this.gr=new Lt(Vt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,r){const i=new Vt(e,r);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,r){e.forEach(i=>this.addReference(i,r))}removeReference(e,r){this.wr(new Vt(e,r))}Sr(e,r){e.forEach(i=>this.removeReference(i,r))}br(e){const r=new we(new pt([])),i=new Vt(r,e),s=new Vt(r,e+1),a=[];return this.gr.forEachInRange([i,s],o=>{this.wr(o),a.push(o.key)}),a}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const r=new we(new pt([])),i=new Vt(r,e),s=new Vt(r,e+1);let a=Le();return this.gr.forEachInRange([i,s],o=>{a=a.add(o.key)}),a}containsKey(e){const r=new Vt(e,0),i=this.Vr.firstAfterOrEqual(r);return i!==null&&e.isEqual(i.key)}}class Vt{constructor(e,r){this.key=e,this.Cr=r}static mr(e,r){return we.comparator(e.key,r.key)||je(e.Cr,r.Cr)}static pr(e,r){return je(e.Cr,r.Cr)||we.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Fr=1,this.Mr=new Lt(Vt.mr)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,i,s){const a=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new MV(a,r,i,s);this.mutationQueue.push(o);for(const l of s)this.Mr=this.Mr.add(new Vt(l.key,a)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return J.resolve(o)}lookupMutationBatch(e,r){return J.resolve(this.Or(r))}getNextMutationBatchAfterBatchId(e,r){const i=r+1,s=this.Nr(i),a=s<0?0:s;return J.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?Vy:this.Fr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const i=new Vt(r,0),s=new Vt(r,Number.POSITIVE_INFINITY),a=[];return this.Mr.forEachInRange([i,s],o=>{const l=this.Or(o.Cr);a.push(l)}),J.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,r){let i=new Lt(je);return r.forEach(s=>{const a=new Vt(s,0),o=new Vt(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([a,o],l=>{i=i.add(l.Cr)})}),J.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,r){const i=r.path,s=i.length+1;let a=i;we.isDocumentKey(a)||(a=a.child(""));const o=new Vt(new we(a),0);let l=new Lt(je);return this.Mr.forEachWhile(u=>{const d=u.key.path;return!!i.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.Cr)),!0)},o),J.resolve(this.Br(l))}Br(e){const r=[];return e.forEach(i=>{const s=this.Or(i);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Ze(this.Lr(r.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return J.forEach(r.mutations,s=>{const a=new Vt(s.key,r.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,r){const i=new Vt(r,0),s=this.Mr.firstAfterOrEqual(i);return J.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}Lr(e,r){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const r=this.Nr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wF{constructor(e){this.kr=e,this.docs=function(){return new bt(we.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const i=r.key,s=this.docs.get(i),a=s?s.size:0,o=this.kr(r);return this.docs=this.docs.insert(i,{document:r.mutableCopy(),size:o}),this.size+=o-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const i=this.docs.get(r);return J.resolve(i?i.document.mutableCopy():hn.newInvalidDocument(r))}getEntries(e,r){let i=wi();return r.forEach(s=>{const a=this.docs.get(s);i=i.insert(s,a?a.document.mutableCopy():hn.newInvalidDocument(s))}),J.resolve(i)}getDocumentsMatchingQuery(e,r,i,s){let a=wi();const o=r.path,l=new we(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||Gj(qj(h),i)<=0||(s.has(h.key)||Tf(r,h))&&(a=a.insert(h.key,h.mutableCopy()))}return J.resolve(a)}getAllFromCollectionGroup(e,r,i,s){Te()}qr(e,r){return J.forEach(this.docs,i=>r(i))}newChangeBuffer(e){return new bF(this)}getSize(e){return J.resolve(this.size)}}class bF extends fF{constructor(e){super(),this.Ir=e}applyChanges(e){const r=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?r.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(i)}),J.waitFor(r)}getFromCache(e,r){return this.Ir.getEntry(e,r)}getAllFromCache(e,r){return this.Ir.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xF{constructor(e){this.persistence=e,this.Qr=new fa(r=>By(r),zy),this.lastRemoteSnapshotVersion=Se.min(),this.highestTargetId=0,this.$r=0,this.Kr=new Ky,this.targetCount=0,this.Ur=bo.Kn()}forEachTarget(e,r){return this.Qr.forEach((i,s)=>r(s)),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,r,i){return i&&(this.lastRemoteSnapshotVersion=i),r>this.$r&&(this.$r=r),J.resolve()}zn(e){this.Qr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Ur=new bo(r),this.highestTargetId=r),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,r){return this.zn(r),this.targetCount+=1,J.resolve()}updateTargetData(e,r){return this.zn(r),J.resolve()}removeTargetData(e,r){return this.Qr.delete(r.target),this.Kr.br(r.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,r,i){let s=0;const a=[];return this.Qr.forEach((o,l)=>{l.sequenceNumber<=r&&i.get(l.targetId)===null&&(this.Qr.delete(o),a.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),J.waitFor(a).next(()=>s)}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,r){const i=this.Qr.get(r)||null;return J.resolve(i)}addMatchingKeys(e,r,i){return this.Kr.yr(r,i),J.resolve()}removeMatchingKeys(e,r,i){this.Kr.Sr(r,i);const s=this.persistence.referenceDelegate,a=[];return s&&r.forEach(o=>{a.push(s.markPotentiallyOrphaned(e,o))}),J.waitFor(a)}removeMatchingKeysForTargetId(e,r){return this.Kr.br(r),J.resolve()}getMatchingKeysForTargetId(e,r){const i=this.Kr.vr(r);return J.resolve(i)}containsKey(e,r){return J.resolve(this.Kr.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,r){this.Wr={},this.overlays={},this.Gr=new _f(0),this.zr=!1,this.zr=!0,this.jr=new yF,this.referenceDelegate=e(this),this.Hr=new xF(this),this.indexManager=new aF,this.remoteDocumentCache=function(s){return new wF(s)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new iF(r),this.Yr=new gF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new vF,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let i=this.Wr[e.toKey()];return i||(i=new _F(r,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,r,i){fe("MemoryPersistence","Starting transaction:",e);const s=new EF(this.Gr.next());return this.referenceDelegate.Zr(),i(s).next(a=>this.referenceDelegate.Xr(s).next(()=>a)).toPromise().then(a=>(s.raiseOnCommittedEvent(),a))}ei(e,r){return J.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,r)))}}class EF extends Yj{constructor(e){super(),this.currentSequenceNumber=e}}class Yy{constructor(e){this.persistence=e,this.ti=new Ky,this.ni=null}static ri(e){return new Yy(e)}get ii(){if(this.ni)return this.ni;throw Te()}addReference(e,r,i){return this.ti.addReference(i,r),this.ii.delete(i.toString()),J.resolve()}removeReference(e,r,i){return this.ti.removeReference(i,r),this.ii.add(i.toString()),J.resolve()}markPotentiallyOrphaned(e,r){return this.ii.add(r.toString()),J.resolve()}removeTarget(e,r){this.ti.br(r.targetId).forEach(s=>this.ii.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(a=>this.ii.add(a.toString()))}).next(()=>i.removeTargetData(e,r))}Zr(){this.ni=new Set}Xr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.ii,i=>{const s=we.fromPath(i);return this.si(e,s).next(a=>{a||r.removeEntry(s,Se.min())})}).next(()=>(this.ni=null,r.apply(e)))}updateLimboDocument(e,r){return this.si(e,r).next(i=>{i?this.ii.delete(r.toString()):this.ii.add(r.toString())})}Jr(e){return 0}si(e,r){return J.or([()=>J.resolve(this.ti.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.ei(e,r)])}}class Ph{constructor(e,r){this.persistence=e,this.oi=new fa(i=>Jj(i.path),(i,s)=>i.isEqual(s)),this.garbageCollector=hF(this,r)}static ri(e,r){return new Ph(e,r)}Zr(){}Xr(e){return J.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}nr(e){const r=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>r.next(s=>i+s))}sr(e){let r=0;return this.rr(e,i=>{r++}).next(()=>r)}rr(e,r){return J.forEach(this.oi,(i,s)=>this.ar(e,i,s).next(a=>a?J.resolve():r(s)))}removeTargets(e,r,i){return this.persistence.getTargetCache().removeTargets(e,r,i)}removeOrphanedDocuments(e,r){let i=0;const s=this.persistence.getRemoteDocumentCache(),a=s.newChangeBuffer();return s.qr(e,o=>this.ar(e,o,r).next(l=>{l||(i++,a.removeEntry(o,Se.min()))})).next(()=>a.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,r){return this.oi.set(r,e.currentSequenceNumber),J.resolve()}removeTarget(e,r){const i=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,r,i){return this.oi.set(i,e.currentSequenceNumber),J.resolve()}removeReference(e,r,i){return this.oi.set(i,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,r){return this.oi.set(r,e.currentSequenceNumber),J.resolve()}Jr(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=Md(e.data.value)),r}ar(e,r,i){return J.or([()=>this.persistence.ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.oi.get(r);return J.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xy{constructor(e,r,i,s){this.targetId=e,this.fromCache=r,this.Hi=i,this.Ji=s}static Yi(e,r){let i=Le(),s=Le();for(const a of r.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:s=s.add(a.doc.key)}return new Xy(e,r.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TF{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SF{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return iM()?8:Xj(pn())>0?6:4}()}initialize(e,r){this.ns=e,this.indexManager=r,this.Zi=!0}getDocumentsMatchingQuery(e,r,i,s){const a={result:null};return this.rs(e,r).next(o=>{a.result=o}).next(()=>{if(!a.result)return this.ss(e,r,s,i).next(o=>{a.result=o})}).next(()=>{if(a.result)return;const o=new TF;return this._s(e,r,o).next(l=>{if(a.result=l,this.Xi)return this.us(e,r,o,l.size)})}).next(()=>a.result)}us(e,r,i,s){return i.documentReadCount<this.es?(Da()<=Me.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",Na(r),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),J.resolve()):(Da()<=Me.DEBUG&&fe("QueryEngine","Query:",Na(r),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.ts*s?(Da()<=Me.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",Na(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,$r(r))):J.resolve())}rs(e,r){if(Ob(r))return J.resolve(null);let i=$r(r);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Ug(r,null,"F"),i=$r(r)),this.indexManager.getDocumentsMatchingTarget(e,i).next(a=>{const o=Le(...a);return this.ns.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,i).next(u=>{const d=this.cs(r,l);return this.ls(r,d,o,u.readTime)?this.rs(e,Ug(r,null,"F")):this.hs(e,d,r,u)}))})))}ss(e,r,i,s){return Ob(r)||s.isEqual(Se.min())?J.resolve(null):this.ns.getDocuments(e,i).next(a=>{const o=this.cs(r,a);return this.ls(r,o,i,s)?J.resolve(null):(Da()<=Me.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Na(r)),this.hs(e,o,r,Wj(s,Eu)).next(l=>l))})}cs(e,r){let i=new Lt(G1(e));return r.forEach((s,a)=>{Tf(e,a)&&(i=i.add(a))}),i}ls(e,r,i,s){if(e.limit===null)return!1;if(i.size!==r.size)return!0;const a=e.limitType==="F"?r.last():r.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(s)>0)}_s(e,r,i){return Da()<=Me.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",Na(r)),this.ns.getDocumentsMatchingQuery(e,r,hs.min(),i)}hs(e,r,i,s){return this.ns.getDocumentsMatchingQuery(e,i,s).next(a=>(r.forEach(o=>{a=a.insert(o.key,o)}),a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="LocalStore",IF=3e8;class kF{constructor(e,r,i,s){this.persistence=e,this.Ps=r,this.serializer=s,this.Ts=new bt(je),this.Is=new fa(a=>By(a),zy),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mF(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.Ts))}}function CF(t,e,r,i){return new kF(t,e,r,i)}async function vk(t,e){const r=ke(t);return await r.persistence.runTransaction("Handle user change","readonly",i=>{let s;return r.mutationQueue.getAllMutationBatches(i).next(a=>(s=a,r.As(e),r.mutationQueue.getAllMutationBatches(i))).next(a=>{const o=[],l=[];let u=Le();for(const d of s){o.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of a){l.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return r.localDocuments.getDocuments(i,u).next(d=>({Rs:d,removedBatchIds:o,addedBatchIds:l}))})})}function AF(t,e){const r=ke(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),a=r.ds.newChangeBuffer({trackRemovals:!0});return function(l,u,d,h){const f=d.batch,p=f.keys();let g=J.resolve();return p.forEach(_=>{g=g.next(()=>h.getEntry(u,_)).next(A=>{const P=d.docVersions.get(_);Ze(P!==null),A.version.compareTo(P)<0&&(f.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),h.addEntry(A)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(u,f))}(r,i,e,a).next(()=>a.apply(i)).next(()=>r.mutationQueue.performConsistencyCheck(i)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(l){let u=Le();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>r.localDocuments.getDocuments(i,s))})}function yk(t){const e=ke(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Hr.getLastRemoteSnapshotVersion(r))}function PF(t,e){const r=ke(t),i=e.snapshotVersion;let s=r.Ts;return r.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const o=r.ds.newChangeBuffer({trackRemovals:!0});s=r.Ts;const l=[];e.targetChanges.forEach((h,f)=>{const p=s.get(f);if(!p)return;l.push(r.Hr.removeMatchingKeys(a,h.removedDocuments,f).next(()=>r.Hr.addMatchingKeys(a,h.addedDocuments,f)));let g=p.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(tn.EMPTY_BYTE_STRING,Se.min()).withLastLimboFreeSnapshotVersion(Se.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,i)),s=s.insert(f,g),function(A,P,S){return A.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=IF?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(p,g,h)&&l.push(r.Hr.updateTargetData(a,g))});let u=wi(),d=Le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(a,h))}),l.push(RF(a,o,e.documentUpdates).next(h=>{u=h.Vs,d=h.fs})),!i.isEqual(Se.min())){const h=r.Hr.getLastRemoteSnapshotVersion(a).next(f=>r.Hr.setTargetsMetadata(a,a.currentSequenceNumber,i));l.push(h)}return J.waitFor(l).next(()=>o.apply(a)).next(()=>r.localDocuments.getLocalViewOfDocuments(a,u,d)).next(()=>u)}).then(a=>(r.Ts=s,a))}function RF(t,e,r){let i=Le(),s=Le();return r.forEach(a=>i=i.add(a)),e.getEntries(t,i).next(a=>{let o=wi();return r.forEach((l,u)=>{const d=a.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(Se.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):fe(Qy,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Vs:o,fs:s}})}function DF(t,e){const r=ke(t);return r.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=Vy),r.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function NF(t,e){const r=ke(t);return r.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return r.Hr.getTargetData(i,e).next(a=>a?(s=a,J.resolve(s)):r.Hr.allocateTargetId(i).next(o=>(s=new Wi(e,o,"TargetPurposeListen",i.currentSequenceNumber),r.Hr.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=r.Ts.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.Ts=r.Ts.insert(i.targetId,i),r.Is.set(e,i.targetId)),i})}async function Wg(t,e,r){const i=ke(t),s=i.Ts.get(e),a=r?"readwrite":"readwrite-primary";try{r||await i.persistence.runTransaction("Release target",a,o=>i.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!zo(o))throw o;fe(Qy,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ts=i.Ts.remove(e),i.Is.delete(s.target)}function Yb(t,e,r){const i=ke(t);let s=Se.min(),a=Le();return i.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,h){const f=ke(u),p=f.Is.get(h);return p!==void 0?J.resolve(f.Ts.get(p)):f.Hr.getTargetData(d,h)}(i,o,$r(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(o,l.targetId).next(u=>{a=u})}).next(()=>i.Ps.getDocumentsMatchingQuery(o,e,r?s:Se.min(),r?a:Le())).next(l=>(MF(i,yV(e),l),{documents:l,gs:a})))}function MF(t,e,r){let i=t.Es.get(e)||Se.min();r.forEach((s,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)}),t.Es.set(e,i)}class Xb{constructor(){this.activeTargetIds=TV()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class LF{constructor(){this.ho=new Xb,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,i){}addLocalQueryTarget(e,r=!0){return r&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,r,i){this.Po[e]=r}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new Xb,Promise.resolve()}handleUserChange(e,r,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OF{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qb="ConnectivityMonitor";class Jb{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){fe(Qb,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){fe(Qb,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let id=null;function qg(){return id===null?id=function(){return 268435456+Math.round(2147483648*Math.random())}():id++,"0x"+id.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp="RestConnection",jF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class VF{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=r+"://"+e.host,this.yo=`projects/${i}/databases/${s}`,this.wo=this.databaseId.database===Eh?`project_id=${i}`:`project_id=${i}&database_id=${s}`}So(e,r,i,s,a){const o=qg(),l=this.bo(e,r.toUriEncodedString());fe(Zp,`Sending RPC '${e}' ${o}:`,l,i);const u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(u,s,a),this.vo(e,l,u,i).then(d=>(fe(Zp,`Received RPC '${e}' ${o}: `,d),d),d=>{throw vo(Zp,`RPC '${e}' ${o} failed with error: `,d,"url: ",l,"request:",i),d})}Co(e,r,i,s,a,o){return this.So(e,r,i,s,a)}Do(e,r,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Uo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,a)=>e[a]=s),i&&i.headers.forEach((s,a)=>e[a]=s)}bo(e,r){const i=jF[e];return`${this.po}/v1/${r}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FF{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const un="WebChannelConnection";class UF extends VF{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,r,i,s){const a=qg();return new Promise((o,l)=>{const u=new E1;u.setWithCredentials(!0),u.listenOnce(T1.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Nd.NO_ERROR:const h=u.getResponseJson();fe(un,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),o(h);break;case Nd.TIMEOUT:fe(un,`RPC '${e}' ${a} timed out`),l(new ye(ee.DEADLINE_EXCEEDED,"Request time out"));break;case Nd.HTTP_ERROR:const f=u.getStatus();if(fe(un,`RPC '${e}' ${a} failed with status:`,f,"response text:",u.getResponseText()),f>0){let p=u.getResponseJson();Array.isArray(p)&&(p=p[0]);const g=p==null?void 0:p.error;if(g&&g.status&&g.message){const _=function(P){const S=P.toLowerCase().replace(/_/g,"-");return Object.values(ee).indexOf(S)>=0?S:ee.UNKNOWN}(g.status);l(new ye(_,g.message))}else l(new ye(ee.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new ye(ee.UNAVAILABLE,"Connection failed."));break;default:Te()}}finally{fe(un,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(s);fe(un,`RPC '${e}' ${a} sending request:`,s),u.send(r,"POST",d,i,15)})}Wo(e,r,i){const s=qg(),a=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=k1(),l=I1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,r,i),u.encodeInitMessageHeaders=!0;const h=a.join("");fe(un,`Creating RPC '${e}' stream ${s}: ${h}`,u);const f=o.createWebChannel(h,u);let p=!1,g=!1;const _=new FF({Fo:P=>{g?fe(un,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(p||(fe(un,`Opening RPC '${e}' stream ${s} transport.`),f.open(),p=!0),fe(un,`RPC '${e}' stream ${s} sending:`,P),f.send(P))},Mo:()=>f.close()}),A=(P,S,w)=>{P.listen(S,x=>{try{w(x)}catch(R){setTimeout(()=>{throw R},0)}})};return A(f,Dl.EventType.OPEN,()=>{g||(fe(un,`RPC '${e}' stream ${s} transport opened.`),_.Qo())}),A(f,Dl.EventType.CLOSE,()=>{g||(g=!0,fe(un,`RPC '${e}' stream ${s} transport closed`),_.Ko())}),A(f,Dl.EventType.ERROR,P=>{g||(g=!0,vo(un,`RPC '${e}' stream ${s} transport errored:`,P),_.Ko(new ye(ee.UNAVAILABLE,"The operation could not be completed")))}),A(f,Dl.EventType.MESSAGE,P=>{var S;if(!g){const w=P.data[0];Ze(!!w);const x=w,R=(x==null?void 0:x.error)||((S=x[0])===null||S===void 0?void 0:S.error);if(R){fe(un,`RPC '${e}' stream ${s} received error:`,R);const F=R.status;let V=function(y){const b=Ct[y];if(b!==void 0)return sk(b)}(F),N=R.message;V===void 0&&(V=ee.INTERNAL,N="Unknown error status: "+F+" with message "+R.message),g=!0,_.Ko(new ye(V,N)),f.close()}else fe(un,`RPC '${e}' stream ${s} received:`,w),_.Uo(w)}}),A(l,S1.STAT_EVENT,P=>{P.stat===Lg.PROXY?fe(un,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===Lg.NOPROXY&&fe(un,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.$o()},0),_}}function em(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(t){return new HV(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,r,i=1e3,s=1.5,a=6e4){this.Ti=e,this.timerId=r,this.Go=i,this.zo=s,this.jo=a,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const r=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),s=Math.max(0,r-i);s>0&&fe("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${r} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="PersistentStream";class wk{constructor(e,r,i,s,a,o,l,u){this.Ti=e,this.n_=i,this.r_=s,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new _k(e,r)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,r){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():r&&r.code===ee.RESOURCE_EXHAUSTED?(_i(r.toString()),_i("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):r&&r.code===ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(r)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),r=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.i_===r&&this.V_(i,s)},i=>{e(()=>{const s=new ye(ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(s)})})}V_(e,r){const i=this.R_(this.i_);this.stream=this.f_(e,r),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{i(()=>this.m_(s))}),this.stream.onMessage(s=>{i(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return fe(Zb,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return r=>{this.Ti.enqueueAndForget(()=>this.i_===e?r():(fe(Zb,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class BF extends wk{constructor(e,r,i,s,a,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,s,o),this.serializer=a}f_(e,r){return this.connection.Wo("Listen",e,r)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const r=GV(this.serializer,e),i=function(a){if(!("targetChange"in a))return Se.min();const o=a.targetChange;return o.targetIds&&o.targetIds.length?Se.min():o.readTime?Wr(o.readTime):Se.min()}(e);return this.listener.p_(r,i)}y_(e){const r={};r.database=Hg(this.serializer),r.addTarget=function(a,o){let l;const u=o.target;if(l=Fg(u)?{documents:XV(a,u)}:{query:QV(a,u).ht},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=lk(a,o.resumeToken);const d=Bg(a,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(Se.min())>0){l.readTime=Ah(a,o.snapshotVersion.toTimestamp());const d=Bg(a,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const i=ZV(this.serializer,e);i&&(r.labels=i),this.I_(r)}w_(e){const r={};r.database=Hg(this.serializer),r.removeTarget=e,this.I_(r)}}class zF extends wk{constructor(e,r,i,s,a,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,s,o),this.serializer=a}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,r){return this.connection.Wo("Write",e,r)}g_(e){return Ze(!!e.streamToken),this.lastStreamToken=e.streamToken,Ze(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){Ze(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const r=YV(e.writeResults,e.commitTime),i=Wr(e.commitTime);return this.listener.v_(i,r)}C_(){const e={};e.database=Hg(this.serializer),this.I_(e)}b_(e){const r={streamToken:this.lastStreamToken,writes:e.map(i=>KV(this.serializer,i))};this.I_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $F{}class HF extends $F{constructor(e,r,i,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=i,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new ye(ee.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,r,i,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.So(e,zg(r,i),s,a,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ye(ee.UNKNOWN,a.toString())})}Co(e,r,i,s,a){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Co(e,zg(r,i),s,o,l,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ye(ee.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class WF{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(_i(r),this.N_=!1):fe("OnlineStateTracker",r)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aa="RemoteStore";class qF{constructor(e,r,i,s,a){this.localStore=e,this.datastore=r,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=a,this.z_.To(o=>{i.enqueueAndForget(async()=>{pa(this)&&(fe(aa,"Restarting streams for network reachability change."),await async function(u){const d=ke(u);d.W_.add(4),await Zu(d),d.j_.set("Unknown"),d.W_.delete(4),await Af(d)}(this))})}),this.j_=new WF(i,s)}}async function Af(t){if(pa(t))for(const e of t.G_)await e(!0)}async function Zu(t){for(const e of t.G_)await e(!1)}function bk(t,e){const r=ke(t);r.U_.has(e.targetId)||(r.U_.set(e.targetId,e),t_(r)?e_(r):$o(r).c_()&&Zy(r,e))}function Jy(t,e){const r=ke(t),i=$o(r);r.U_.delete(e),i.c_()&&xk(r,e),r.U_.size===0&&(i.c_()?i.P_():pa(r)&&r.j_.set("Unknown"))}function Zy(t,e){if(t.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Se.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}$o(t).y_(e)}function xk(t,e){t.H_.Ne(e),$o(t).w_(e)}function e_(t){t.H_=new UV({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>t.U_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),$o(t).start(),t.j_.B_()}function t_(t){return pa(t)&&!$o(t).u_()&&t.U_.size>0}function pa(t){return ke(t).W_.size===0}function Ek(t){t.H_=void 0}async function GF(t){t.j_.set("Online")}async function KF(t){t.U_.forEach((e,r)=>{Zy(t,e)})}async function YF(t,e){Ek(t),t_(t)?(t.j_.q_(e),e_(t)):t.j_.set("Unknown")}async function XF(t,e,r){if(t.j_.set("Online"),e instanceof ok&&e.state===2&&e.cause)try{await async function(s,a){const o=a.cause;for(const l of a.targetIds)s.U_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.U_.delete(l),s.H_.removeTarget(l))}(t,e)}catch(i){fe(aa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Rh(t,i)}else if(e instanceof jd?t.H_.We(e):e instanceof ak?t.H_.Ze(e):t.H_.je(e),!r.isEqual(Se.min()))try{const i=await yk(t.localStore);r.compareTo(i)>=0&&await function(a,o){const l=a.H_.ot(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=a.U_.get(d);h&&a.U_.set(d,h.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const h=a.U_.get(u);if(!h)return;a.U_.set(u,h.withResumeToken(tn.EMPTY_BYTE_STRING,h.snapshotVersion)),xk(a,u);const f=new Wi(h.target,u,d,h.sequenceNumber);Zy(a,f)}),a.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(i){fe(aa,"Failed to raise snapshot:",i),await Rh(t,i)}}async function Rh(t,e,r){if(!zo(e))throw e;t.W_.add(1),await Zu(t),t.j_.set("Offline"),r||(r=()=>yk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{fe(aa,"Retrying IndexedDB access"),await r(),t.W_.delete(1),await Af(t)})}function Tk(t,e){return e().catch(r=>Rh(t,r,e))}async function Pf(t){const e=ke(t),r=gs(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:Vy;for(;QF(e);)try{const s=await DF(e.localStore,i);if(s===null){e.K_.length===0&&r.P_();break}i=s.batchId,JF(e,s)}catch(s){await Rh(e,s)}Sk(e)&&Ik(e)}function QF(t){return pa(t)&&t.K_.length<10}function JF(t,e){t.K_.push(e);const r=gs(t);r.c_()&&r.S_&&r.b_(e.mutations)}function Sk(t){return pa(t)&&!gs(t).u_()&&t.K_.length>0}function Ik(t){gs(t).start()}async function ZF(t){gs(t).C_()}async function e4(t){const e=gs(t);for(const r of t.K_)e.b_(r.mutations)}async function t4(t,e,r){const i=t.K_.shift(),s=Wy.from(i,e,r);await Tk(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Pf(t)}async function n4(t,e){e&&gs(t).S_&&await async function(i,s){if(function(o){return jV(o)&&o!==ee.ABORTED}(s.code)){const a=i.K_.shift();gs(i).h_(),await Tk(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s)),await Pf(i)}}(t,e),Sk(t)&&Ik(t)}async function ex(t,e){const r=ke(t);r.asyncQueue.verifyOperationInProgress(),fe(aa,"RemoteStore received new credentials");const i=pa(r);r.W_.add(3),await Zu(r),i&&r.j_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.W_.delete(3),await Af(r)}async function r4(t,e){const r=ke(t);e?(r.W_.delete(2),await Af(r)):e||(r.W_.add(2),await Zu(r),r.j_.set("Unknown"))}function $o(t){return t.J_||(t.J_=function(r,i,s){const a=ke(r);return a.M_(),new BF(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{xo:GF.bind(null,t),No:KF.bind(null,t),Lo:YF.bind(null,t),p_:XF.bind(null,t)}),t.G_.push(async e=>{e?(t.J_.h_(),t_(t)?e_(t):t.j_.set("Unknown")):(await t.J_.stop(),Ek(t))})),t.J_}function gs(t){return t.Y_||(t.Y_=function(r,i,s){const a=ke(r);return a.M_(),new zF(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,s)}(t.datastore,t.asyncQueue,{xo:()=>Promise.resolve(),No:ZF.bind(null,t),Lo:n4.bind(null,t),D_:e4.bind(null,t),v_:t4.bind(null,t)}),t.G_.push(async e=>{e?(t.Y_.h_(),await Pf(t)):(await t.Y_.stop(),t.K_.length>0&&(fe(aa,`Stopping write stream with ${t.K_.length} pending writes`),t.K_=[]))})),t.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_{constructor(e,r,i,s,a){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=i,this.op=s,this.removalCallback=a,this.deferred=new hi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,i,s,a){const o=Date.now()+i,l=new n_(e,r,o,s,a);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function r_(t,e){if(_i("AsyncQueue",`${e}: ${t}`),zo(t))return new ye(ee.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{static emptySet(e){return new so(e.comparator)}constructor(e){this.comparator=e?(r,i)=>e(r,i)||we.comparator(r.key,i.key):(r,i)=>we.comparator(r.key,i.key),this.keyedMap=Nl(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,i)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof so)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,a=i.getNext().key;if(!s.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const i=new so;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=r,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(){this.Z_=new bt(we.comparator)}track(e){const r=e.doc.key,i=this.Z_.get(r);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(r,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(r,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(r,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(r,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(r):e.type===1&&i.type===2?this.Z_=this.Z_.insert(r,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(r,{type:2,doc:e.doc}):Te():this.Z_=this.Z_.insert(r,e)}X_(){const e=[];return this.Z_.inorderTraversal((r,i)=>{e.push(i)}),e}}class xo{constructor(e,r,i,s,a,o,l,u,d){this.query=e,this.docs=r,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,r,i,s,a){const o=[];return r.forEach(l=>{o.push({type:0,doc:l})}),new xo(e,r,so.emptySet(r),o,i,s,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ef(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,i=e.docChanges;if(r.length!==i.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==i[s].type||!r[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class s4{constructor(){this.queries=nx(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(r,i){const s=ke(r),a=s.queries;s.queries=nx(),a.forEach((o,l)=>{for(const u of l.ta)u.onError(i)})})(this,new ye(ee.ABORTED,"Firestore shutting down"))}}function nx(){return new fa(t=>q1(t),Ef)}async function kk(t,e){const r=ke(t);let i=3;const s=e.query;let a=r.queries.get(s);a?!a.na()&&e.ra()&&(i=2):(a=new i4,i=e.ra()?0:1);try{switch(i){case 0:a.ea=await r.onListen(s,!0);break;case 1:a.ea=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(o){const l=r_(o,`Initialization of query '${Na(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,a),a.ta.push(e),e.sa(r.onlineState),a.ea&&e.oa(a.ea)&&i_(r)}async function Ck(t,e){const r=ke(t),i=e.query;let s=3;const a=r.queries.get(i);if(a){const o=a.ta.indexOf(e);o>=0&&(a.ta.splice(o,1),a.ta.length===0?s=e.ra()?0:1:!a.na()&&e.ra()&&(s=2))}switch(s){case 0:return r.queries.delete(i),r.onUnlisten(i,!0);case 1:return r.queries.delete(i),r.onUnlisten(i,!1);case 2:return r.onLastRemoteStoreUnlisten(i);default:return}}function a4(t,e){const r=ke(t);let i=!1;for(const s of e){const a=s.query,o=r.queries.get(a);if(o){for(const l of o.ta)l.oa(s)&&(i=!0);o.ea=s}}i&&i_(r)}function o4(t,e,r){const i=ke(t),s=i.queries.get(e);if(s)for(const a of s.ta)a.onError(r);i.queries.delete(e)}function i_(t){t.ia.forEach(e=>{e.next()})}var Gg,rx;(rx=Gg||(Gg={}))._a="default",rx.Cache="cache";class Ak{constructor(e,r,i){this.query=e,this.aa=r,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new xo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.ua?this.la(e)&&(this.aa.next(e),r=!0):this.ha(e,this.onlineState)&&(this.Pa(e),r=!0),this.ca=e,r}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let r=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),r=!0),r}ha(e,r){if(!e.fromCache||!this.ra())return!0;const i=r!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}la(e){if(e.docChanges.length>0)return!0;const r=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}Pa(e){e=xo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==Gg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e){this.key=e}}class Rk{constructor(e){this.key=e}}class l4{constructor(e,r){this.query=e,this.fa=r,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Le(),this.mutatedKeys=Le(),this.ya=G1(e),this.wa=new so(this.ya)}get Sa(){return this.fa}ba(e,r){const i=r?r.Da:new tx,s=r?r.wa:this.wa;let a=r?r.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const p=s.get(h),g=Tf(this.query,f)?f:null,_=!!p&&this.mutatedKeys.has(p.key),A=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let P=!1;p&&g?p.data.isEqual(g.data)?_!==A&&(i.track({type:3,doc:g}),P=!0):this.va(p,g)||(i.track({type:2,doc:g}),P=!0,(u&&this.ya(g,u)>0||d&&this.ya(g,d)<0)&&(l=!0)):!p&&g?(i.track({type:0,doc:g}),P=!0):p&&!g&&(i.track({type:1,doc:p}),P=!0,(u||d)&&(l=!0)),P&&(g?(o=o.add(g),a=A?a.add(h):a.delete(h)):(o=o.delete(h),a=a.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),a=a.delete(h.key),i.track({type:1,doc:h})}return{wa:o,Da:i,ls:l,mutatedKeys:a}}va(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,i,s){const a=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((h,f)=>function(g,_){const A=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Te()}};return A(g)-A(_)}(h.type,f.type)||this.ya(h.doc,f.doc)),this.Ca(i),s=s!=null&&s;const l=r&&!s?this.Fa():[],u=this.pa.size===0&&this.current&&!s?1:0,d=u!==this.ga;return this.ga=u,o.length!==0||d?{snapshot:new xo(this.query,e.wa,a,o,e.mutatedKeys,u===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:l}:{Ma:l}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new tx,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(r=>this.fa=this.fa.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.fa=this.fa.delete(r)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Le(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const r=[];return e.forEach(i=>{this.pa.has(i)||r.push(new Rk(i))}),this.pa.forEach(i=>{e.has(i)||r.push(new Pk(i))}),r}Oa(e){this.fa=e.gs,this.pa=Le();const r=this.ba(e.documents);return this.applyChanges(r,!0)}Na(){return xo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const s_="SyncEngine";class u4{constructor(e,r,i){this.query=e,this.targetId=r,this.view=i}}class c4{constructor(e){this.key=e,this.Ba=!1}}class d4{constructor(e,r,i,s,a,o){this.localStore=e,this.remoteStore=r,this.eventManager=i,this.sharedClientState=s,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new fa(l=>q1(l),Ef),this.qa=new Map,this.Qa=new Set,this.$a=new bt(we.comparator),this.Ka=new Map,this.Ua=new Ky,this.Wa={},this.Ga=new Map,this.za=bo.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function h4(t,e,r=!0){const i=jk(t);let s;const a=i.ka.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),s=a.view.Na()):s=await Dk(i,e,r,!0),s}async function f4(t,e){const r=jk(t);await Dk(r,e,!0,!1)}async function Dk(t,e,r,i){const s=await NF(t.localStore,$r(e)),a=s.targetId,o=t.sharedClientState.addLocalQueryTarget(a,r);let l;return i&&(l=await p4(t,e,a,o==="current",s.resumeToken)),t.isPrimaryClient&&r&&bk(t.remoteStore,s),l}async function p4(t,e,r,i,s){t.Ha=(f,p,g)=>async function(A,P,S,w){let x=P.view.ba(S);x.ls&&(x=await Yb(A.localStore,P.query,!1).then(({documents:N})=>P.view.ba(N,x)));const R=w&&w.targetChanges.get(P.targetId),F=w&&w.targetMismatches.get(P.targetId)!=null,V=P.view.applyChanges(x,A.isPrimaryClient,R,F);return sx(A,P.targetId,V.Ma),V.snapshot}(t,f,p,g);const a=await Yb(t.localStore,e,!0),o=new l4(e,a.gs),l=o.ba(a.documents),u=Ju.createSynthesizedTargetChangeForCurrentChange(r,i&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);sx(t,r,d.Ma);const h=new u4(e,r,o);return t.ka.set(e,h),t.qa.has(r)?t.qa.get(r).push(e):t.qa.set(r,[e]),d.snapshot}async function m4(t,e,r){const i=ke(t),s=i.ka.get(e),a=i.qa.get(s.targetId);if(a.length>1)return i.qa.set(s.targetId,a.filter(o=>!Ef(o,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Wg(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),r&&Jy(i.remoteStore,s.targetId),Kg(i,s.targetId)}).catch(Bo)):(Kg(i,s.targetId),await Wg(i.localStore,s.targetId,!0))}async function g4(t,e){const r=ke(t),i=r.ka.get(e),s=r.qa.get(i.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(i.targetId),Jy(r.remoteStore,i.targetId))}async function v4(t,e,r){const i=T4(t);try{const s=await function(o,l){const u=ke(o),d=Mt.now(),h=l.reduce((g,_)=>g.add(_.key),Le());let f,p;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=wi(),A=Le();return u.ds.getEntries(g,h).next(P=>{_=P,_.forEach((S,w)=>{w.isValidDocument()||(A=A.add(S))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,_)).next(P=>{f=P;const S=[];for(const w of l){const x=RV(w,f.get(w.key).overlayedDocument);x!=null&&S.push(new Ss(w.key,x,F1(x.value.mapValue),Hr.exists(!0)))}return u.mutationQueue.addMutationBatch(g,d,S,l)}).next(P=>{p=P;const S=P.applyToLocalDocumentSet(f,A);return u.documentOverlayCache.saveOverlays(g,P.batchId,S)})}).then(()=>({batchId:p.batchId,changes:Y1(f)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Wa[o.currentUser.toKey()];d||(d=new bt(je)),d=d.insert(l,u),o.Wa[o.currentUser.toKey()]=d}(i,s.batchId,r),await ec(i,s.changes),await Pf(i.remoteStore)}catch(s){const a=r_(s,"Failed to persist write");r.reject(a)}}async function Nk(t,e){const r=ke(t);try{const i=await PF(r.localStore,e);e.targetChanges.forEach((s,a)=>{const o=r.Ka.get(a);o&&(Ze(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.Ba=!0:s.modifiedDocuments.size>0?Ze(o.Ba):s.removedDocuments.size>0&&(Ze(o.Ba),o.Ba=!1))}),await ec(r,i,e)}catch(i){await Bo(i)}}function ix(t,e,r){const i=ke(t);if(i.isPrimaryClient&&r===0||!i.isPrimaryClient&&r===1){const s=[];i.ka.forEach((a,o)=>{const l=o.view.sa(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=ke(o);u.onlineState=l;let d=!1;u.queries.forEach((h,f)=>{for(const p of f.ta)p.sa(l)&&(d=!0)}),d&&i_(u)}(i.eventManager,e),s.length&&i.La.p_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function y4(t,e,r){const i=ke(t);i.sharedClientState.updateQueryState(e,"rejected",r);const s=i.Ka.get(e),a=s&&s.key;if(a){let o=new bt(we.comparator);o=o.insert(a,hn.newNoDocument(a,Se.min()));const l=Le().add(a),u=new kf(Se.min(),new Map,new bt(je),o,l);await Nk(i,u),i.$a=i.$a.remove(a),i.Ka.delete(e),a_(i)}else await Wg(i.localStore,e,!1).then(()=>Kg(i,e,r)).catch(Bo)}async function _4(t,e){const r=ke(t),i=e.batch.batchId;try{const s=await AF(r.localStore,e);Lk(r,i,null),Mk(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),await ec(r,s)}catch(s){await Bo(s)}}async function w4(t,e,r){const i=ke(t);try{const s=await function(o,l){const u=ke(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,l).next(f=>(Ze(f!==null),h=f.keys(),u.mutationQueue.removeMutationBatch(d,f))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(i.localStore,e);Lk(i,e,r),Mk(i,e),i.sharedClientState.updateMutationState(e,"rejected",r),await ec(i,s)}catch(s){await Bo(s)}}function Mk(t,e){(t.Ga.get(e)||[]).forEach(r=>{r.resolve()}),t.Ga.delete(e)}function Lk(t,e,r){const i=ke(t);let s=i.Wa[i.currentUser.toKey()];if(s){const a=s.get(e);a&&(r?a.reject(r):a.resolve(),s=s.remove(e)),i.Wa[i.currentUser.toKey()]=s}}function Kg(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.qa.get(e))t.ka.delete(i),r&&t.La.Ja(i,r);t.qa.delete(e),t.isPrimaryClient&&t.Ua.br(e).forEach(i=>{t.Ua.containsKey(i)||Ok(t,i)})}function Ok(t,e){t.Qa.delete(e.path.canonicalString());const r=t.$a.get(e);r!==null&&(Jy(t.remoteStore,r),t.$a=t.$a.remove(e),t.Ka.delete(r),a_(t))}function sx(t,e,r){for(const i of r)i instanceof Pk?(t.Ua.addReference(i.key,e),b4(t,i)):i instanceof Rk?(fe(s_,"Document no longer in limbo: "+i.key),t.Ua.removeReference(i.key,e),t.Ua.containsKey(i.key)||Ok(t,i.key)):Te()}function b4(t,e){const r=e.key,i=r.path.canonicalString();t.$a.get(r)||t.Qa.has(i)||(fe(s_,"New document in limbo: "+r),t.Qa.add(i),a_(t))}function a_(t){for(;t.Qa.size>0&&t.$a.size<t.maxConcurrentLimboResolutions;){const e=t.Qa.values().next().value;t.Qa.delete(e);const r=new we(pt.fromString(e)),i=t.za.next();t.Ka.set(i,new c4(r)),t.$a=t.$a.insert(r,i),bk(t.remoteStore,new Wi($r($y(r.path)),i,"TargetPurposeLimboResolution",_f.ae))}}async function ec(t,e,r){const i=ke(t),s=[],a=[],o=[];i.ka.isEmpty()||(i.ka.forEach((l,u)=>{o.push(i.Ha(u,e,r).then(d=>{var h;if((d||r)&&i.isPrimaryClient){const f=d?!d.fromCache:(h=r==null?void 0:r.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(d){s.push(d);const f=Xy.Yi(u.targetId,d);a.push(f)}}))}),await Promise.all(o),i.La.p_(s),await async function(u,d){const h=ke(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>J.forEach(d,p=>J.forEach(p.Hi,g=>h.persistence.referenceDelegate.addReference(f,p.targetId,g)).next(()=>J.forEach(p.Ji,g=>h.persistence.referenceDelegate.removeReference(f,p.targetId,g)))))}catch(f){if(!zo(f))throw f;fe(Qy,"Failed to update sequence numbers: "+f)}for(const f of d){const p=f.targetId;if(!f.fromCache){const g=h.Ts.get(p),_=g.snapshotVersion,A=g.withLastLimboFreeSnapshotVersion(_);h.Ts=h.Ts.insert(p,A)}}}(i.localStore,a))}async function x4(t,e){const r=ke(t);if(!r.currentUser.isEqual(e)){fe(s_,"User change. New user:",e.toKey());const i=await vk(r.localStore,e);r.currentUser=e,function(a,o){a.Ga.forEach(l=>{l.forEach(u=>{u.reject(new ye(ee.CANCELLED,o))})}),a.Ga.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await ec(r,i.Rs)}}function E4(t,e){const r=ke(t),i=r.Ka.get(e);if(i&&i.Ba)return Le().add(i.key);{let s=Le();const a=r.qa.get(e);if(!a)return s;for(const o of a){const l=r.ka.get(o);s=s.unionWith(l.view.Sa)}return s}}function jk(t){const e=ke(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Nk.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=E4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=y4.bind(null,e),e.La.p_=a4.bind(null,e.eventManager),e.La.Ja=o4.bind(null,e.eventManager),e}function T4(t){const e=ke(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=_4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=w4.bind(null,e),e}class Dh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cf(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,r){return null}nu(e,r){return null}eu(e){return CF(this.persistence,new SF,e.initialUser,this.serializer)}Xa(e){return new gk(Yy.ri,this.serializer)}Za(e){return new LF}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Dh.provider={build:()=>new Dh};class S4 extends Dh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,r){Ze(this.persistence.referenceDelegate instanceof Ph);const i=this.persistence.referenceDelegate.garbageCollector;return new cF(i,e.asyncQueue,r)}Xa(e){const r=this.cacheSizeBytes!==void 0?Cn.withCacheSize(this.cacheSizeBytes):Cn.DEFAULT;return new gk(i=>Ph.ri(i,r),this.serializer)}}class Yg{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>ix(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=x4.bind(null,this.syncEngine),await r4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new s4}()}createDatastore(e){const r=Cf(e.databaseInfo.databaseId),i=function(a){return new UF(a)}(e.databaseInfo);return function(a,o,l,u){return new HF(a,o,l,u)}(e.authCredentials,e.appCheckCredentials,i,r)}createRemoteStore(e){return function(i,s,a,o,l){return new qF(i,s,a,o,l)}(this.localStore,this.datastore,e.asyncQueue,r=>ix(this.syncEngine,r,0),function(){return Jb.D()?new Jb:new OF}())}createSyncEngine(e,r){return function(s,a,o,l,u,d,h){const f=new d4(s,a,o,l,u,d);return h&&(f.ja=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const a=ke(s);fe(aa,"RemoteStore shutting down."),a.W_.add(5),await Zu(a),a.z_.shutdown(),a.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}Yg.provider={build:()=>new Yg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):_i("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs="FirestoreClient";class I4{constructor(e,r,i,s,a){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=i,this.databaseInfo=s,this.user=cn.UNAUTHENTICATED,this.clientId=A1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,async o=>{fe(vs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(fe(vs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new hi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const i=r_(r,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function tm(t,e){t.asyncQueue.verifyOperationInProgress(),fe(vs,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let i=r.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await vk(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ax(t,e){t.asyncQueue.verifyOperationInProgress();const r=await k4(t);fe(vs,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(i=>ex(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>ex(e.remoteStore,s)),t._onlineComponents=e}async function k4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){fe(vs,"Using user provided OfflineComponentProvider");try{await tm(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===ee.FAILED_PRECONDITION||s.code===ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;vo("Error using user provided cache. Falling back to memory cache: "+r),await tm(t,new Dh)}}else fe(vs,"Using default OfflineComponentProvider"),await tm(t,new S4(void 0));return t._offlineComponents}async function Fk(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(fe(vs,"Using user provided OnlineComponentProvider"),await ax(t,t._uninitializedComponentsProvider._online)):(fe(vs,"Using default OnlineComponentProvider"),await ax(t,new Yg))),t._onlineComponents}function C4(t){return Fk(t).then(e=>e.syncEngine)}async function Uk(t){const e=await Fk(t),r=e.eventManager;return r.onListen=h4.bind(null,e.syncEngine),r.onUnlisten=m4.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=f4.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=g4.bind(null,e.syncEngine),r}function A4(t,e,r={}){const i=new hi;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,d){const h=new Vk({next:p=>{h.su(),o.enqueueAndForget(()=>Ck(a,f));const g=p.docs.has(l);!g&&p.fromCache?d.reject(new ye(ee.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&p.fromCache&&u&&u.source==="server"?d.reject(new ye(ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new Ak($y(l.path),h,{includeMetadataChanges:!0,Ta:!0});return kk(a,f)}(await Uk(t),t.asyncQueue,e,r,i)),i.promise}function P4(t,e,r={}){const i=new hi;return t.asyncQueue.enqueueAndForget(async()=>function(a,o,l,u,d){const h=new Vk({next:p=>{h.su(),o.enqueueAndForget(()=>Ck(a,f)),p.fromCache&&u.source==="server"?d.reject(new ye(ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),f=new Ak(l,h,{includeMetadataChanges:!0,Ta:!0});return kk(a,f)}(await Uk(t),t.asyncQueue,e,r,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ox=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(t,e,r){if(!r)throw new ye(ee.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function R4(t,e,r,i){if(e===!0&&i===!0)throw new ye(ee.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function lx(t){if(!we.isDocumentKey(t))throw new ye(ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function ux(t){if(we.isDocumentKey(t))throw new ye(ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function o_(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Te()}function bi(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ye(ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=o_(t);throw new ye(ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="firestore.googleapis.com",cx=!0;class dx{constructor(e){var r,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ye(ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=$k,this.ssl=cx}else this.host=e.host,this.ssl=(r=e.ssl)!==null&&r!==void 0?r:cx;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=mk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<lF)throw new ye(ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}R4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Bk((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(a){if(a.timeoutSeconds!==void 0){if(isNaN(a.timeoutSeconds))throw new ye(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (must not be NaN)`);if(a.timeoutSeconds<5)throw new ye(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (minimum allowed value is 5)`);if(a.timeoutSeconds>30)throw new ye(ee.INVALID_ARGUMENT,`invalid long polling timeout: ${a.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rf{constructor(e,r,i,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dx(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new jj;switch(i.type){case"firstParty":return new Bj(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ye(ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const i=ox.get(r);i&&(fe("ComponentProvider","Removing Datastore"),ox.delete(r),i.terminate())}(this),Promise.resolve()}}function D4(t,e,r,i={}){var s;const a=(t=bi(t,Rf))._getSettings(),o=`${e}:${r}`;if(a.host!==$k&&a.host!==o&&vo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){let l,u;if(typeof i.mockUserToken=="string")l=i.mockUserToken,u=cn.MOCK_USER;else{l=Q2(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=i.mockUserToken.sub||i.mockUserToken.user_id;if(!d)throw new ye(ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new cn(d)}t._authCredentials=new Vj(new C1(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df{constructor(e,r,i){this.converter=r,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Df(this.firestore,e,this._query)}}class On{constructor(e,r,i){this.converter=r,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ss(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new On(this.firestore,e,this._key)}}class ss extends Df{constructor(e,r,i){super(e,r,$y(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new On(this.firestore,null,new we(e))}withConverter(e){return new ss(this.firestore,e,this._path)}}function Dn(t,e,...r){if(t=en(t),zk("collection","path",e),t instanceof Rf){const i=pt.fromString(e,...r);return ux(i),new ss(t,null,i)}{if(!(t instanceof On||t instanceof ss))throw new ye(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(pt.fromString(e,...r));return ux(i),new ss(t.firestore,null,i)}}function Au(t,e,...r){if(t=en(t),arguments.length===1&&(e=A1.newId()),zk("doc","path",e),t instanceof Rf){const i=pt.fromString(e,...r);return lx(i),new On(t,null,new we(i))}{if(!(t instanceof On||t instanceof ss))throw new ye(ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(pt.fromString(e,...r));return lx(i),new On(t.firestore,t instanceof ss?t.converter:null,new we(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="AsyncQueue";class fx{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new _k(this,"async_queue_retry"),this.Su=()=>{const i=em();i&&fe(hx,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.bu=e;const r=em();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const r=em();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const r=new hi;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!zo(e))throw e;fe(hx,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const r=this.bu.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(i);throw _i("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.pu=!1,i))));return this.bu=r,r}enqueueAfterDelay(e,r,i){this.Du(),this.wu.indexOf(e)>-1&&(r=0);const s=n_.createAndSchedule(this,e,r,i,a=>this.Fu(a));return this.fu.push(s),s}Du(){this.gu&&Te()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const r of this.fu)if(r.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((r,i)=>r.targetTimeMs-i.targetTimeMs);for(const r of this.fu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const r=this.fu.indexOf(e);this.fu.splice(r,1)}}class tc extends Rf{constructor(e,r,i,s){super(e,r,i,s),this.type="firestore",this._queue=new fx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new fx(e),this._firestoreClient=void 0,await e}}}function N4(t,e){const r=typeof t=="object"?t:FI(),i=typeof t=="string"?t:Eh,s=ky(r,"firestore").getImmediate({identifier:i});if(!s._initialized){const a=Y2("firestore");a&&D4(s,...a)}return s}function l_(t){if(t._terminated)throw new ye(ee.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||M4(t),t._firestoreClient}function M4(t){var e,r,i;const s=t._freezeSettings(),a=function(l,u,d,h){return new tV(l,u,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Bk(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new I4(t._authCredentials,t._appCheckCredentials,t._queue,a,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Eo(tn.fromBase64String(e))}catch(r){throw new ye(ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Eo(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new ye(ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u_{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new ye(ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new ye(ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return je(this._lat,e._lat)||je(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==s[a])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L4=/^__.*__$/;class O4{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return this.fieldMask!==null?new Ss(e,this.data,this.fieldMask,r,this.fieldTransforms):new Qu(e,this.data,r,this.fieldTransforms)}}class Hk{constructor(e,r,i){this.data=e,this.fieldMask=r,this.fieldTransforms=i}toMutation(e,r){return new Ss(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function Wk(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Te()}}class h_{constructor(e,r,i,s,a,o){this.settings=e,this.databaseId=r,this.serializer=i,this.ignoreUndefinedProperties=s,a===void 0&&this.Bu(),this.fieldTransforms=a||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new h_(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var r;const i=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.ku({path:i,Qu:!1});return s.$u(e),s}Ku(e){var r;const i=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.ku({path:i,Qu:!1});return s.Bu(),s}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Nh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(Wk(this.Lu)&&L4.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class j4{constructor(e,r,i){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=i||Cf(e)}ju(e,r,i,s=!1){return new h_({Lu:e,methodName:r,zu:i,path:Yt.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function qk(t){const e=t._freezeSettings(),r=Cf(t._databaseId);return new j4(t._databaseId,!!e.ignoreUndefinedProperties,r)}function V4(t,e,r,i,s,a={}){const o=t.ju(a.merge||a.mergeFields?2:0,e,r,s);f_("Data must be an object, but it was:",o,i);const l=Gk(i,o);let u,d;if(a.merge)u=new Un(o.fieldMask),d=o.fieldTransforms;else if(a.mergeFields){const h=[];for(const f of a.mergeFields){const p=Xg(e,f,r);if(!o.contains(p))throw new ye(ee.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);Yk(h,p)||h.push(p)}u=new Un(h),d=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,d=o.fieldTransforms;return new O4(new Pn(l),u,d)}class Mf extends u_{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mf}}function F4(t,e,r,i){const s=t.ju(1,e,r);f_("Data must be an object, but it was:",s,i);const a=[],o=Pn.empty();Ts(i,(u,d)=>{const h=p_(e,u,r);d=en(d);const f=s.Ku(h);if(d instanceof Mf)a.push(h);else{const p=Lf(d,f);p!=null&&(a.push(h),o.set(h,p))}});const l=new Un(a);return new Hk(o,l,s.fieldTransforms)}function U4(t,e,r,i,s,a){const o=t.ju(1,e,r),l=[Xg(e,i,r)],u=[s];if(a.length%2!=0)throw new ye(ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<a.length;p+=2)l.push(Xg(e,a[p])),u.push(a[p+1]);const d=[],h=Pn.empty();for(let p=l.length-1;p>=0;--p)if(!Yk(d,l[p])){const g=l[p];let _=u[p];_=en(_);const A=o.Ku(g);if(_ instanceof Mf)d.push(g);else{const P=Lf(_,A);P!=null&&(d.push(g),h.set(g,P))}}const f=new Un(d);return new Hk(h,f,o.fieldTransforms)}function Lf(t,e){if(Kk(t=en(t)))return f_("Unsupported field value:",e,t),Gk(t,e);if(t instanceof u_)return function(i,s){if(!Wk(s.Lu))throw s.Wu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(s);a&&s.fieldTransforms.push(a)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,s){const a=[];let o=0;for(const l of i){let u=Lf(l,s.Uu(o));u==null&&(u={nullValue:"NULL_VALUE"}),a.push(u),o++}return{arrayValue:{values:a}}}(t,e)}return function(i,s){if((i=en(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return SV(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Mt.fromDate(i);return{timestampValue:Ah(s.serializer,a)}}if(i instanceof Mt){const a=new Mt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ah(s.serializer,a)}}if(i instanceof c_)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Eo)return{bytesValue:lk(s.serializer,i._byteString)};if(i instanceof On){const a=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(a))throw s.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Gy(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof d_)return function(o,l){return{mapValue:{fields:{[j1]:{stringValue:V1},[Th]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Wu("VectorValues must only contain numeric values.");return Hy(l.serializer,d)})}}}}}}(i,s);throw s.Wu(`Unsupported field value: ${o_(i)}`)}(t,e)}function Gk(t,e){const r={};return R1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ts(t,(i,s)=>{const a=Lf(s,e.qu(i));a!=null&&(r[i]=a)}),{mapValue:{fields:r}}}function Kk(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Mt||t instanceof c_||t instanceof Eo||t instanceof On||t instanceof u_||t instanceof d_)}function f_(t,e,r){if(!Kk(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const i=o_(r);throw i==="an object"?e.Wu(t+" a custom object"):e.Wu(t+" "+i)}}function Xg(t,e,r){if((e=en(e))instanceof Nf)return e._internalPath;if(typeof e=="string")return p_(t,e);throw Nh("Field path arguments must be of type string or ",t,!1,void 0,r)}const B4=new RegExp("[~\\*/\\[\\]]");function p_(t,e,r){if(e.search(B4)>=0)throw Nh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Nf(...e.split("."))._internalPath}catch{throw Nh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Nh(t,e,r,i,s){const a=i&&!i.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(a||o)&&(u+=" (found",a&&(u+=` in field ${i}`),o&&(u+=` in document ${s}`),u+=")"),new ye(ee.INVALID_ARGUMENT,l+t+u)}function Yk(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xk{constructor(e,r,i,s,a){this._firestore=e,this._userDataWriter=r,this._key=i,this._document=s,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new On(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new z4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Qk("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class z4 extends Xk{data(){return super.data()}}function Qk(t,e){return typeof e=="string"?p_(t,e):e instanceof Nf?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ye(ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class H4{convertValue(e,r="none"){switch(ms(e)){case 0:return null;case 1:return e.booleanValue;case 2:return It(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(ps(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw Te()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const i={};return Ts(e,(s,a)=>{i[s]=this.convertValue(a,r)}),i}convertVectorValue(e){var r,i,s;const a=(s=(i=(r=e.fields)===null||r===void 0?void 0:r[Th].arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(o=>It(o.doubleValue));return new d_(a)}convertGeoPoint(e){return new c_(It(e.latitude),It(e.longitude))}convertArray(e,r){return(e.values||[]).map(i=>this.convertValue(i,r))}convertServerTimestamp(e,r){switch(r){case"previous":const i=bf(e);return i==null?null:this.convertValue(i,r);case"estimate":return this.convertTimestamp(Tu(e));default:return null}}convertTimestamp(e){const r=fs(e);return new Mt(r.seconds,r.nanos)}convertDocumentKey(e,r){const i=pt.fromString(e);Ze(pk(i));const s=new Su(i.get(1),i.get(3)),a=new we(i.popFirst(5));return s.isEqual(r)||_i(`Document ${a} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W4(t,e,r){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Jk extends Xk{constructor(e,r,i,s,a,o){super(e,r,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new Vd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const i=this._document.data.field(Qk("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,r.serverTimestamps)}}}class Vd extends Jk{data(e={}){return super.data(e)}}class q4{constructor(e,r,i,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new Ll(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(i=>{e.call(r,new Vd(this._firestore,this._userDataWriter,i.key,i,new Ll(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new ye(ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,a){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Vd(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ll(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>a||l.type!==3).map(l=>{const u=new Vd(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ll(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:G4(l.type),doc:u,oldIndex:d,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function G4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Te()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K4(t){t=bi(t,On);const e=bi(t.firestore,tc);return A4(l_(e),t._key).then(r=>Y4(e,t,r))}class Zk extends H4{constructor(e){super(),this.firestore=e}convertBytes(e){return new Eo(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new On(this.firestore,null,r)}}function nr(t){t=bi(t,Df);const e=bi(t.firestore,tc),r=l_(e),i=new Zk(e);return $4(t._query),P4(r,t._query).then(s=>new q4(e,i,t,s))}function px(t,e,r){t=bi(t,On);const i=bi(t.firestore,tc),s=W4(t.converter,e);return eC(i,[V4(qk(i),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Hr.none())])}function mx(t,e,r,...i){t=bi(t,On);const s=bi(t.firestore,tc),a=qk(s);let o;return o=typeof(e=en(e))=="string"||e instanceof Nf?U4(a,"updateDoc",t._key,e,r,i):F4(a,"updateDoc",t._key,e),eC(s,[o.toMutation(t._key,Hr.exists(!0))])}function eC(t,e){return function(i,s){const a=new hi;return i.asyncQueue.enqueueAndForget(async()=>v4(await C4(i),s,a)),a.promise}(l_(t),e)}function Y4(t,e,r){const i=r.docs.get(e._key),s=new Zk(t);return new Jk(t,s,e._key,i,new Ll(r.hasPendingWrites,r.fromCache),e.converter)}(function(e,r=!0){(function(s){Uo=s})(jo),mo(new ra("firestore",(i,{instanceIdentifier:s,options:a})=>{const o=i.getProvider("app").getImmediate(),l=new tc(new Fj(i.getProvider("auth-internal")),new zj(o,i.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new ye(ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Su(d.options.projectId,h)}(o,s),o);return a=Object.assign({useFetchStreams:r},a),l._setSettings(a),l},"PUBLIC").setMultipleInstances(!0)),ns(wb,bb,e),ns(wb,bb,"esm2017")})();const X4={apiKey:"AIzaSyDGolxlZNoEzk7z46ZMtSk9YsP32MlH45Q",authDomain:"llm-hyper-audio.firebaseapp.com",projectId:"llm-hyper-audio",storageBucket:"llm-hyper-audio.firebasestorage.app",messagingSenderId:"530304773274",appId:"1:530304773274:web:1764f58974d6c2fd060323",measurementId:"G-HFEKE65YC6"},tC=VI(X4),Xt=N4(tC),nm=Nj(tC),nC=M.createContext();function nc(){const t=M.useContext(nC);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function Q4({children:t}){const[e,r]=M.useState(null),[i,s]=M.useState(!0),[a,o]=M.useState(null);M.useEffect(()=>{console.log("Setting up auth listener");const h=bO(nm,f=>{console.log("Auth state changed:",f?f.email:"No user"),r(f),s(!1)},f=>{console.error("Auth state change error:",f),o(f.message),s(!1)});return()=>h()},[]);const d={user:e,loading:i,error:a,login:async(h,f)=>{try{o(null),console.log("Attempting login with:",h);const p=await yO(nm,h,f);return r(p.user),p.user}catch(p){throw console.error("Login error:",p),o(p.message),p}},logout:async()=>{try{o(null),console.log("Logging out user"),await xO(nm),r(null)}catch(h){throw console.error("Logout error:",h),o(h.message),h}},isAuthenticated:!!e};return v.jsx(nC.Provider,{value:d,children:t})}const J4=M.createContext();function Z4({children:t}){const[e,r]=M.useState(null),[i,s]=M.useState([]),[a,o]=M.useState(!1),[l,u]=M.useState(0),S={currentVideo:e,setCurrentVideo:r,playlist:i,setPlaylist:s,isPlaying:a,setIsPlaying:o,currentTime:l,setCurrentTime:u,addToPlaylist:w=>{s(x=>[...x,w])},removeFromPlaylist:w=>{s(x=>x.filter(R=>R.id!==w))},clearPlaylist:()=>{s([]),r(null)},playVideo:w=>{r(w),o(!0)},pauseVideo:()=>{o(!1)},nextVideo:()=>{const w=i.findIndex(x=>x.id===(e==null?void 0:e.id));w<i.length-1&&r(i[w+1])},previousVideo:()=>{const w=i.findIndex(x=>x.id===(e==null?void 0:e.id));w>0&&r(i[w-1])},updatePlaylistOrder:w=>{s(w)}};return v.jsx(J4.Provider,{value:S,children:t})}/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e3=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),rC=(...t)=>t.filter((e,r,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===r).join(" ").trim();/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var t3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n3=M.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:s="",children:a,iconNode:o,...l},u)=>M.createElement("svg",{ref:u,...t3,width:e,height:e,stroke:t,strokeWidth:i?Number(r)*24/Number(e):r,className:rC("lucide",s),...l},[...o.map(([d,h])=>M.createElement(d,h)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=(t,e)=>{const r=M.forwardRef(({className:i,...s},a)=>M.createElement(n3,{ref:a,iconNode:e,className:rC(`lucide-${e3(t)}`,i),...s}));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r3=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],i3=nn("ChevronDown",r3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s3=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],a3=nn("ChevronRight",s3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o3=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],l3=nn("ChevronUp",o3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],c3=nn("CirclePlay",u3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d3=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],iC=nn("Clock",d3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h3=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],sC=nn("FileText",h3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f3=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],p3=nn("Heart",f3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m3=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],g3=nn("House",m3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v3=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],y3=nn("List",v3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _3=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],w3=nn("LogOut",_3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b3=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],x3=nn("Menu",b3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E3=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],aC=nn("Search",E3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],S3=nn("Settings",T3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I3=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],k3=nn("ShoppingBag",I3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C3=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],A3=nn("Tag",C3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],gx=nn("Upload",P3);/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],D3=nn("X",R3);function N3(){const{user:t,logout:e}=nc(),r=dr(),[i,s]=M.useState(!1),a=()=>{s(!i)},o=[{path:"/",label:"Home",icon:v.jsx(g3,{size:20})},{path:"/keyword-directory",label:"Directory",icon:v.jsx(y3,{size:20})},{path:"/playlist-builder",label:"Playlists",icon:v.jsx(c3,{size:20})},{path:"/transcript-summary",label:"Summarizer",icon:v.jsx(sC,{size:20})}],l=u=>r.pathname===u;return v.jsxs(v.Fragment,{children:[v.jsx("button",{className:"fixed top-4 left-4 w-12 h-12 rounded-lg bg-white border-none shadow-sm cursor-pointer flex justify-center items-center text-gray-600 z-[51] transition-colors duration-200 ease-in-out",onClick:a,children:v.jsx(x3,{size:24})}),v.jsx("div",{className:`fixed inset-0 z-[49] transition-opacity duration-300 ease-in-out ${i?"pointer-events-auto":"pointer-events-none"}`,onClick:a}),v.jsxs("div",{className:`fixed top-0 left-0 h-screen w-64 bg-white border-r border-gray-200 shadow-lg transition-transform duration-300 ease-in-out z-50 flex flex-col p-4 ${i?"translate-x-0":"-translate-x-full"}`,children:[v.jsx("button",{className:"absolute top-4 right-4 p-2 rounded-md bg-gray-100 border-none cursor-pointer flex justify-center items-center text-gray-600",onClick:a,children:v.jsx(D3,{size:20})}),v.jsxs("div",{className:"flex-1 overflow-auto mt-10",children:[v.jsxs("div",{children:[o.map(u=>v.jsxs(Hs,{to:u.path,className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l(u.path)?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[v.jsx("span",{className:"flex mr-3 text-inherit",children:u.icon}),v.jsx("span",{children:u.label})]},u.path)),v.jsxs(Hs,{to:"/search",className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l("/search")?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[v.jsx("span",{className:"flex mr-3 text-inherit",children:v.jsx(aC,{size:20})}),v.jsx("span",{children:"Search"})]}),v.jsxs(Hs,{to:"/playlists",className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l("/playlists")?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[v.jsx("span",{className:"flex mr-3 text-inherit",children:v.jsx(k3,{size:20})}),v.jsx("span",{children:"Playlists"})]}),v.jsxs(Hs,{to:"/favorites",className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l("/favorites")?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[v.jsx("span",{className:"flex mr-3 text-inherit",children:v.jsx(p3,{size:20})}),v.jsx("span",{children:"Favorites"})]})]}),v.jsx("div",{className:"h-px bg-gray-200 my-4"}),v.jsxs("div",{children:[v.jsxs(Hs,{to:"/settings",className:`flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out no-underline ${l("/settings")?"bg-indigo-50 text-blue-800 font-semibold":"bg-transparent text-gray-500 font-normal"}`,onClick:()=>s(!1),children:[v.jsx("span",{className:"flex mr-3 text-inherit",children:v.jsx(S3,{size:20})}),v.jsx("span",{children:"Settings"})]}),t&&v.jsxs("button",{onClick:()=>{e(),s(!1)},className:"flex items-center px-4 py-3 rounded-lg mb-2 transition-all duration-200 ease-in-out text-gray-500 font-normal w-full text-left border-none bg-transparent",children:[v.jsx("span",{className:"flex mr-3 text-inherit",children:v.jsx(w3,{size:20})}),v.jsx("span",{children:"Logout"})]})]})]})]})]})}function Ls({children:t}){const{loading:e}=nc();return e?v.jsx("div",{className:"min-h-screen flex items-center justify-center",children:v.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):v.jsxs("div",{className:"flex flex-row h-screen w-full overflow-hidden bg-white",children:[v.jsx("div",{className:"flex-none w-60",children:v.jsx(N3,{})}),v.jsx("div",{className:"flex-grow overflow-y-auto",children:v.jsx("main",{className:"py-6 px-6",children:t})})]})}function Os({children:t}){const{user:e,loading:r}=nc(),i=dr();return r?v.jsx("div",{className:"flex justify-center items-center min-h-screen",children:v.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):e?t:v.jsx(SI,{to:"/login",state:{from:i},replace:!0})}var oC={exports:{}},M3="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",L3=M3,O3=L3;function lC(){}function uC(){}uC.resetWarningCache=lC;var j3=function(){function t(i,s,a,o,l,u){if(u!==O3){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:uC,resetWarningCache:lC};return r.PropTypes=r,r};oC.exports=j3();var V3=oC.exports;const rt=Vu(V3);var cC={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var a="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(a=s(a,i(l)))}return a}function i(a){if(typeof a=="string"||typeof a=="number")return a;if(typeof a!="object")return"";if(Array.isArray(a))return r.apply(null,a);if(a.toString!==Object.prototype.toString&&!a.toString.toString().includes("[native code]"))return a.toString();var o="";for(var l in a)e.call(a,l)&&a[l]&&(o=s(o,l));return o}function s(a,o){return o?a?a+" "+o:a+o:a}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(cC);var F3=cC.exports;const dC=Vu(F3);var U3=["top","left","transform","className","children","innerRef"];function Qg(){return Qg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Qg.apply(this,arguments)}function B3(t,e){if(t==null)return{};var r={},i=Object.keys(t),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function Mh(t){var e=t.top,r=e===void 0?0:e,i=t.left,s=i===void 0?0:i,a=t.transform,o=t.className,l=t.children,u=t.innerRef,d=B3(t,U3);return Pe.createElement("g",Qg({ref:u,className:dC("visx-group",o),transform:a||"translate("+s+", "+r+")"},d),l)}Mh.propTypes={top:rt.number,left:rt.number,transform:rt.string,className:rt.string,children:rt.node,innerRef:rt.oneOfType([rt.string,rt.func,rt.object])};var z3=Array.prototype.slice;function $3(t){for(var e=t.length,r,i;e;)i=Math.random()*e--|0,r=t[e],t[e]=t[i],t[i]=r;return t}function H3(t){for(var e=0,r=(t=$3(z3.call(t))).length,i=[],s,a;e<r;)s=t[e],a&&hC(a,s)?++e:(a=q3(i=W3(i,s)),e=0);return a}function W3(t,e){var r,i;if(rm(e,t))return[e];for(r=0;r<t.length;++r)if(sd(e,t[r])&&rm(Ol(t[r],e),t))return[t[r],e];for(r=0;r<t.length-1;++r)for(i=r+1;i<t.length;++i)if(sd(Ol(t[r],t[i]),e)&&sd(Ol(t[r],e),t[i])&&sd(Ol(t[i],e),t[r])&&rm(fC(t[r],t[i],e),t))return[t[r],t[i],e];throw new Error}function sd(t,e){var r=t.r-e.r,i=e.x-t.x,s=e.y-t.y;return r<0||r*r<i*i+s*s}function hC(t,e){var r=t.r-e.r+1e-6,i=e.x-t.x,s=e.y-t.y;return r>0&&r*r>i*i+s*s}function rm(t,e){for(var r=0;r<e.length;++r)if(!hC(t,e[r]))return!1;return!0}function q3(t){switch(t.length){case 1:return G3(t[0]);case 2:return Ol(t[0],t[1]);case 3:return fC(t[0],t[1],t[2])}}function G3(t){return{x:t.x,y:t.y,r:t.r}}function Ol(t,e){var r=t.x,i=t.y,s=t.r,a=e.x,o=e.y,l=e.r,u=a-r,d=o-i,h=l-s,f=Math.sqrt(u*u+d*d);return{x:(r+a+u/f*h)/2,y:(i+o+d/f*h)/2,r:(f+s+l)/2}}function fC(t,e,r){var i=t.x,s=t.y,a=t.r,o=e.x,l=e.y,u=e.r,d=r.x,h=r.y,f=r.r,p=i-o,g=i-d,_=s-l,A=s-h,P=u-a,S=f-a,w=i*i+s*s-a*a,x=w-o*o-l*l+u*u,R=w-d*d-h*h+f*f,F=g*_-p*A,V=(_*R-A*x)/(F*2)-i,N=(A*P-_*S)/F,I=(g*x-p*R)/(F*2)-s,y=(p*S-g*P)/F,b=N*N+y*y-1,T=2*(a+V*N+I*y),O=V*V+I*I-a*a,D=-(b?(T+Math.sqrt(T*T-4*b*O))/(2*b):O/T);return{x:i+V+N*D,y:s+I+y*D,r:D}}function vx(t,e,r){var i=t.x-e.x,s,a,o=t.y-e.y,l,u,d=i*i+o*o;d?(a=e.r+r.r,a*=a,u=t.r+r.r,u*=u,a>u?(s=(d+u-a)/(2*d),l=Math.sqrt(Math.max(0,u/d-s*s)),r.x=t.x-s*i-l*o,r.y=t.y-s*o+l*i):(s=(d+a-u)/(2*d),l=Math.sqrt(Math.max(0,a/d-s*s)),r.x=e.x+s*i-l*o,r.y=e.y+s*o+l*i)):(r.x=e.x+r.r,r.y=e.y)}function yx(t,e){var r=t.r+e.r-1e-6,i=e.x-t.x,s=e.y-t.y;return r>0&&r*r>i*i+s*s}function _x(t){var e=t._,r=t.next._,i=e.r+r.r,s=(e.x*r.r+r.x*e.r)/i,a=(e.y*r.r+r.y*e.r)/i;return s*s+a*a}function ad(t){this._=t,this.next=null,this.previous=null}function K3(t){if(!(s=t.length))return 0;var e,r,i,s,a,o,l,u,d,h,f;if(e=t[0],e.x=0,e.y=0,!(s>1))return e.r;if(r=t[1],e.x=-r.r,r.x=e.r,r.y=0,!(s>2))return e.r+r.r;vx(r,e,i=t[2]),e=new ad(e),r=new ad(r),i=new ad(i),e.next=i.previous=r,r.next=e.previous=i,i.next=r.previous=e;e:for(l=3;l<s;++l){vx(e._,r._,i=t[l]),i=new ad(i),u=r.next,d=e.previous,h=r._.r,f=e._.r;do if(h<=f){if(yx(u._,i._)){r=u,e.next=r,r.previous=e,--l;continue e}h+=u._.r,u=u.next}else{if(yx(d._,i._)){e=d,e.next=r,r.previous=e,--l;continue e}f+=d._.r,d=d.previous}while(u!==d.next);for(i.previous=e,i.next=r,e.next=r.previous=r=i,a=_x(e);(i=i.next)!==r;)(o=_x(i))<a&&(e=i,a=o);r=e.next}for(e=[r._],i=r;(i=i.next)!==r;)e.push(i._);for(i=H3(e),l=0;l<s;++l)e=t[l],e.x-=i.x,e.y-=i.y;return i.r}function Y3(t){return t==null?null:X3(t)}function X3(t){if(typeof t!="function")throw new Error;return t}function wx(){return 0}function Q3(t){return function(){return t}}function J3(t){return Math.sqrt(t.value)}function Z3(){var t=null,e=1,r=1,i=wx;function s(a){return a.x=e/2,a.y=r/2,t?a.eachBefore(bx(t)).eachAfter(im(i,.5)).eachBefore(xx(1)):a.eachBefore(bx(J3)).eachAfter(im(wx,1)).eachAfter(im(i,a.r/Math.min(e,r))).eachBefore(xx(Math.min(e,r)/(2*a.r))),a}return s.radius=function(a){return arguments.length?(t=Y3(a),s):t},s.size=function(a){return arguments.length?(e=+a[0],r=+a[1],s):[e,r]},s.padding=function(a){return arguments.length?(i=typeof a=="function"?a:Q3(+a),s):i},s}function bx(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function im(t,e){return function(r){if(i=r.children){var i,s,a=i.length,o=t(r)*e||0,l;if(o)for(s=0;s<a;++s)i[s].r+=o;if(l=K3(i),o)for(s=0;s<a;++s)i[s].r-=o;r.r=l+o}}}function xx(t){return function(e){var r=e.parent;e.r*=t,r&&(e.x=r.x+t*e.x,e.y=r.y+t*e.y)}}function pC(t){var e=t.node,r=e===void 0?{x:0,y:0,r:15}:e;return Pe.createElement("circle",{cx:r.x,cy:r.y,r:r.r||15,fill:"#21D4FD"})}pC.propTypes={node:rt.shape({x:rt.number.isRequired,y:rt.number.isRequired,r:rt.number})};function mC(t){var e=t.top,r=t.left,i=t.className,s=t.root,a=t.radius,o=t.size,l=t.padding,u=t.children,d=t.nodeComponent,h=d===void 0?pC:d,f=Z3();o&&f.size(o),a!==void 0&&f.radius(a),l&&f.padding(l);var p=f(s);return u?Pe.createElement(Pe.Fragment,null,u(p)):Pe.createElement(Mh,{top:e,left:r,className:dC("visx-pack",i)},h&&p.descendants().map(function(g,_){return Pe.createElement(Mh,{key:"pack-node-"+_},Pe.createElement(h,{node:g}))}))}mC.propTypes={children:rt.func,top:rt.number,left:rt.number,className:rt.string,radius:rt.func,padding:rt.number};function eU(t){var e=0,r=t.children,i=r&&r.length;if(!i)e=1;else for(;--i>=0;)e+=r[i].value;t.value=e}function tU(){return this.eachAfter(eU)}function nU(t,e){let r=-1;for(const i of this)t.call(e,i,++r,this);return this}function rU(t,e){for(var r=this,i=[r],s,a,o=-1;r=i.pop();)if(t.call(e,r,++o,this),s=r.children)for(a=s.length-1;a>=0;--a)i.push(s[a]);return this}function iU(t,e){for(var r=this,i=[r],s=[],a,o,l,u=-1;r=i.pop();)if(s.push(r),a=r.children)for(o=0,l=a.length;o<l;++o)i.push(a[o]);for(;r=s.pop();)t.call(e,r,++u,this);return this}function sU(t,e){let r=-1;for(const i of this)if(t.call(e,i,++r,this))return i}function aU(t){return this.eachAfter(function(e){for(var r=+t(e.data)||0,i=e.children,s=i&&i.length;--s>=0;)r+=i[s].value;e.value=r})}function oU(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function lU(t){for(var e=this,r=uU(e,t),i=[e];e!==r;)e=e.parent,i.push(e);for(var s=i.length;t!==r;)i.splice(s,0,t),t=t.parent;return i}function uU(t,e){if(t===e)return t;var r=t.ancestors(),i=e.ancestors(),s=null;for(t=r.pop(),e=i.pop();t===e;)s=t,t=r.pop(),e=i.pop();return s}function cU(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function dU(){return Array.from(this)}function hU(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function fU(){var t=this,e=[];return t.each(function(r){r!==t&&e.push({source:r.parent,target:r})}),e}function*pU(){var t=this,e,r=[t],i,s,a;do for(e=r.reverse(),r=[];t=e.pop();)if(yield t,i=t.children)for(s=0,a=i.length;s<a;++s)r.push(i[s]);while(r.length)}function m_(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=vU)):e===void 0&&(e=gU);for(var r=new Lh(t),i,s=[r],a,o,l,u;i=s.pop();)if((o=e(i.data))&&(u=(o=Array.from(o)).length))for(i.children=o,l=u-1;l>=0;--l)s.push(a=o[l]=new Lh(o[l])),a.parent=i,a.depth=i.depth+1;return r.eachBefore(_U)}function mU(){return m_(this).eachBefore(yU)}function gU(t){return t.children}function vU(t){return Array.isArray(t)?t[1]:null}function yU(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function _U(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Lh(t){this.data=t,this.depth=this.height=0,this.parent=null}Lh.prototype=m_.prototype={constructor:Lh,count:tU,each:nU,eachAfter:iU,eachBefore:rU,find:sU,sum:aU,sort:oU,path:lU,ancestors:cU,descendants:dU,leaves:hU,links:fU,copy:mU,[Symbol.iterator]:pU};var Ex=function(){function t(r){var i=r.x,s=i===void 0?0:i,a=r.y,o=a===void 0?0:a;this.x=0,this.y=0,this.x=s,this.y=o}var e=t.prototype;return e.value=function(){return{x:this.x,y:this.y}},e.toArray=function(){return[this.x,this.y]},t}();function wU(t){return!!t&&t instanceof Element}function bU(t){return!!t&&(t instanceof SVGElement||"ownerSVGElement"in t)}function xU(t){return!!t&&"createSVGPoint"in t}function EU(t){return!!t&&"getScreenCTM"in t}function TU(t){return!!t&&"changedTouches"in t}function SU(t){return!!t&&"clientX"in t}function IU(t){return!!t&&(t instanceof Event||"nativeEvent"in t&&t.nativeEvent instanceof Event)}function Jl(){return Jl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},Jl.apply(this,arguments)}var sm={x:0,y:0};function kU(t){if(!t)return Jl({},sm);if(TU(t))return t.changedTouches.length>0?{x:t.changedTouches[0].clientX,y:t.changedTouches[0].clientY}:Jl({},sm);if(SU(t))return{x:t.clientX,y:t.clientY};var e=t==null?void 0:t.target,r=e&&"getBoundingClientRect"in e?e.getBoundingClientRect():null;return r?{x:r.x+r.width/2,y:r.y+r.height/2}:Jl({},sm)}function Tx(t,e){if(!t||!e)return null;var r=kU(e),i=bU(t)?t.ownerSVGElement:t,s=EU(i)?i.getScreenCTM():null;if(xU(i)&&s){var a=i.createSVGPoint();return a.x=r.x,a.y=r.y,a=a.matrixTransform(s.inverse()),new Ex({x:a.x,y:a.y})}var o=t.getBoundingClientRect();return new Ex({x:r.x-o.left-t.clientLeft,y:r.y-o.top-t.clientTop})}function am(t,e){if(wU(t)&&e)return Tx(t,e);if(IU(t)){var r=t,i=r.target;if(i)return Tx(i,r)}return null}function CU(t,e,r){return Math.max(e,Math.min(t,r))}const dt={toVector(t,e){return t===void 0&&(t=e),Array.isArray(t)?t:[t,t]},add(t,e){return[t[0]+e[0],t[1]+e[1]]},sub(t,e){return[t[0]-e[0],t[1]-e[1]]},addTo(t,e){t[0]+=e[0],t[1]+=e[1]},subTo(t,e){t[0]-=e[0],t[1]-=e[1]}};function Sx(t,e,r){return e===0||Math.abs(e)===1/0?Math.pow(t,r*5):t*e*r/(e+r*t)}function Ix(t,e,r,i=.15){return i===0?CU(t,e,r):t<e?-Sx(e-t,r-e,i)+e:t>r?+Sx(t-r,r-e,i)+r:t}function AU(t,[e,r],[i,s]){const[[a,o],[l,u]]=t;return[Ix(e,a,o,i),Ix(r,l,u,s)]}function PU(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function RU(t){var e=PU(t,"string");return typeof e=="symbol"?e:String(e)}function At(t,e,r){return e=RU(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function kx(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function yt(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?kx(Object(r),!0).forEach(function(i){At(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):kx(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}const gC={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Cx(t){return t?t[0].toUpperCase()+t.slice(1):""}const DU=["enter","leave"];function NU(t=!1,e){return t&&!DU.includes(e)}function MU(t,e="",r=!1){const i=gC[t],s=i&&i[e]||e;return"on"+Cx(t)+Cx(s)+(NU(r,s)?"Capture":"")}const LU=["gotpointercapture","lostpointercapture"];function OU(t){let e=t.substring(2).toLowerCase();const r=!!~e.indexOf("passive");r&&(e=e.replace("passive",""));const i=LU.includes(e)?"capturecapture":"capture",s=!!~e.indexOf(i);return s&&(e=e.replace("capture","")),{device:e,capture:s,passive:r}}function jU(t,e=""){const r=gC[t],i=r&&r[e]||e;return t+i}function Of(t){return"touches"in t}function vC(t){return Of(t)?"touch":"pointerType"in t?t.pointerType:"mouse"}function VU(t){return Array.from(t.touches).filter(e=>{var r,i;return e.target===t.currentTarget||((r=t.currentTarget)===null||r===void 0||(i=r.contains)===null||i===void 0?void 0:i.call(r,e.target))})}function FU(t){return t.type==="touchend"||t.type==="touchcancel"?t.changedTouches:t.targetTouches}function yC(t){return Of(t)?FU(t)[0]:t}function Jg(t,e){try{const r=e.clientX-t.clientX,i=e.clientY-t.clientY,s=(e.clientX+t.clientX)/2,a=(e.clientY+t.clientY)/2,o=Math.hypot(r,i);return{angle:-(Math.atan2(r,i)*180)/Math.PI,distance:o,origin:[s,a]}}catch{}return null}function UU(t){return VU(t).map(e=>e.identifier)}function Ax(t,e){const[r,i]=Array.from(t.touches).filter(s=>e.includes(s.identifier));return Jg(r,i)}function om(t){const e=yC(t);return Of(t)?e.identifier:e.pointerId}function To(t){const e=yC(t);return[e.clientX,e.clientY]}const Px=40,Rx=800;function _C(t){let{deltaX:e,deltaY:r,deltaMode:i}=t;return i===1?(e*=Px,r*=Px):i===2&&(e*=Rx,r*=Rx),[e,r]}function BU(t){var e,r;const{scrollX:i,scrollY:s,scrollLeft:a,scrollTop:o}=t.currentTarget;return[(e=i??a)!==null&&e!==void 0?e:0,(r=s??o)!==null&&r!==void 0?r:0]}function zU(t){const e={};if("buttons"in t&&(e.buttons=t.buttons),"shiftKey"in t){const{shiftKey:r,altKey:i,metaKey:s,ctrlKey:a}=t;Object.assign(e,{shiftKey:r,altKey:i,metaKey:s,ctrlKey:a})}return e}function Oh(t,...e){return typeof t=="function"?t(...e):t}function $U(){}function HU(...t){return t.length===0?$U:t.length===1?t[0]:function(){let e;for(const r of t)e=r.apply(this,arguments)||e;return e}}function Dx(t,e){return Object.assign({},e,t||{})}const WU=32;class wC{constructor(e,r,i){this.ctrl=e,this.args=r,this.key=i,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:r,ingKey:i,args:s}=this;r[i]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=s,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const r=this.state,i=this.config;r._active||(this.reset(),this.computeInitial(),r._active=!0,r.target=e.target,r.currentTarget=e.currentTarget,r.lastOffset=i.from?Oh(i.from,r):r.offset,r.offset=r.lastOffset,r.startTime=r.timeStamp=e.timeStamp)}computeValues(e){const r=this.state;r._values=e,r.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:r,config:i,shared:s}=this;r.args=this.args;let a=0;if(e&&(r.event=e,i.preventDefault&&e.cancelable&&r.event.preventDefault(),r.type=e.type,s.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,s.locked=!!document.pointerLockElement,Object.assign(s,zU(e)),s.down=s.pressed=s.buttons%2===1||s.touches>0,a=e.timeStamp-r.timeStamp,r.timeStamp=e.timeStamp,r.elapsedTime=r.timeStamp-r.startTime),r._active){const V=r._delta.map(Math.abs);dt.addTo(r._distance,V)}this.axisIntent&&this.axisIntent(e);const[o,l]=r._movement,[u,d]=i.threshold,{_step:h,values:f}=r;if(i.hasCustomTransform?(h[0]===!1&&(h[0]=Math.abs(o)>=u&&f[0]),h[1]===!1&&(h[1]=Math.abs(l)>=d&&f[1])):(h[0]===!1&&(h[0]=Math.abs(o)>=u&&Math.sign(o)*u),h[1]===!1&&(h[1]=Math.abs(l)>=d&&Math.sign(l)*d)),r.intentional=h[0]!==!1||h[1]!==!1,!r.intentional)return;const p=[0,0];if(i.hasCustomTransform){const[V,N]=f;p[0]=h[0]!==!1?V-h[0]:0,p[1]=h[1]!==!1?N-h[1]:0}else p[0]=h[0]!==!1?o-h[0]:0,p[1]=h[1]!==!1?l-h[1]:0;this.restrictToAxis&&!r._blocked&&this.restrictToAxis(p);const g=r.offset,_=r._active&&!r._blocked||r.active;_&&(r.first=r._active&&!r.active,r.last=!r._active&&r.active,r.active=s[this.ingKey]=r._active,e&&(r.first&&("bounds"in i&&(r._bounds=Oh(i.bounds,r)),this.setup&&this.setup()),r.movement=p,this.computeOffset()));const[A,P]=r.offset,[[S,w],[x,R]]=r._bounds;r.overflow=[A<S?-1:A>w?1:0,P<x?-1:P>R?1:0],r._movementBound[0]=r.overflow[0]?r._movementBound[0]===!1?r._movement[0]:r._movementBound[0]:!1,r._movementBound[1]=r.overflow[1]?r._movementBound[1]===!1?r._movement[1]:r._movementBound[1]:!1;const F=r._active?i.rubberband||[0,0]:[0,0];if(r.offset=AU(r._bounds,r.offset,F),r.delta=dt.sub(r.offset,g),this.computeMovement(),_&&(!r.last||a>WU)){r.delta=dt.sub(r.offset,g);const V=r.delta.map(Math.abs);dt.addTo(r.distance,V),r.direction=r.delta.map(Math.sign),r._direction=r._delta.map(Math.sign),!r.first&&a>0&&(r.velocity=[V[0]/a,V[1]/a],r.timeDelta=a)}}emit(){const e=this.state,r=this.shared,i=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!i.triggerAllEvents)return;const s=this.handler(yt(yt(yt({},r),e),{},{[this.aliasKey]:e.values}));s!==void 0&&(e.memo=s)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function qU([t,e],r){const i=Math.abs(t),s=Math.abs(e);if(i>s&&i>r)return"x";if(s>i&&s>r)return"y"}class rc extends wC{constructor(...e){super(...e),At(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=dt.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=dt.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const r=this.state,i=this.config;if(!r.axis&&e){const s=typeof i.axisThreshold=="object"?i.axisThreshold[vC(e)]:i.axisThreshold;r.axis=qU(r._movement,s)}r._blocked=(i.lockDirection||!!i.axis)&&!r.axis||!!i.axis&&i.axis!==r.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0;break}}}const GU=t=>t,Nx=.15,bC={enabled(t=!0){return t},eventOptions(t,e,r){return yt(yt({},r.shared.eventOptions),t)},preventDefault(t=!1){return t},triggerAllEvents(t=!1){return t},rubberband(t=0){switch(t){case!0:return[Nx,Nx];case!1:return[0,0];default:return dt.toVector(t)}},from(t){if(typeof t=="function")return t;if(t!=null)return dt.toVector(t)},transform(t,e,r){const i=t||r.shared.transform;return this.hasCustomTransform=!!i,i||GU},threshold(t){return dt.toVector(t,0)}},KU=0,ma=yt(yt({},bC),{},{axis(t,e,{axis:r}){if(this.lockDirection=r==="lock",!this.lockDirection)return r},axisThreshold(t=KU){return t},bounds(t={}){if(typeof t=="function")return a=>ma.bounds(t(a));if("current"in t)return()=>t.current;if(typeof HTMLElement=="function"&&t instanceof HTMLElement)return t;const{left:e=-1/0,right:r=1/0,top:i=-1/0,bottom:s=1/0}=t;return[[e,r],[i,s]]}}),Mx={ArrowRight:(t,e=1)=>[t*e,0],ArrowLeft:(t,e=1)=>[-1*t*e,0],ArrowUp:(t,e=1)=>[0,-1*t*e],ArrowDown:(t,e=1)=>[0,t*e]};class YU extends rc{constructor(...e){super(...e),At(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const r=e._bounds.getBoundingClientRect(),i=e.currentTarget.getBoundingClientRect(),s={left:r.left-i.left+e.offset[0],right:r.right-i.right+e.offset[0],top:r.top-i.top+e.offset[1],bottom:r.bottom-i.bottom+e.offset[1]};e._bounds=ma.bounds(s)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const r=this.config,i=this.state;if(e.buttons!=null&&(Array.isArray(r.pointerButtons)?!r.pointerButtons.includes(e.buttons):r.pointerButtons!==-1&&r.pointerButtons!==e.buttons))return;const s=this.ctrl.setEventIds(e);r.pointerCapture&&e.target.setPointerCapture(e.pointerId),!(s&&s.size>1&&i._pointerActive)&&(this.start(e),this.setupPointer(e),i._pointerId=om(e),i._pointerActive=!0,this.computeValues(To(e)),this.computeInitial(),r.preventScrollAxis&&vC(e)!=="mouse"?(i._active=!1,this.setupScrollPrevention(e)):r.delay>0?(this.setupDelayTrigger(e),r.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const r=this.state;r._active=!0,r._preventScroll=!0,r._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const r=this.state,i=this.config;if(!r._pointerActive)return;const s=om(e);if(r._pointerId!==void 0&&s!==r._pointerId)return;const a=To(e);if(document.pointerLockElement===e.target?r._delta=[e.movementX,e.movementY]:(r._delta=dt.sub(a,r._values),this.computeValues(a)),dt.addTo(r._movement,r._delta),this.compute(e),r._delayed&&r.intentional){this.timeoutStore.remove("dragDelay"),r.active=!1,this.startPointerDrag(e);return}if(i.preventScrollAxis&&!r._preventScroll)if(r.axis)if(r.axis===i.preventScrollAxis||i.preventScrollAxis==="xy"){r._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(e);return}else return;this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch{}const r=this.state,i=this.config;if(!r._active||!r._pointerActive)return;const s=om(e);if(r._pointerId!==void 0&&s!==r._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[a,o]=r._distance;if(r.tap=a<=i.tapsThreshold&&o<=i.tapsThreshold,r.tap&&i.filterTaps)r._force=!0;else{const[l,u]=r._delta,[d,h]=r._movement,[f,p]=i.swipe.velocity,[g,_]=i.swipe.distance,A=i.swipe.duration;if(r.elapsedTime<A){const P=Math.abs(l/r.timeDelta),S=Math.abs(u/r.timeDelta);P>f&&Math.abs(d)>g&&(r.swipe[0]=Math.sign(l)),S>p&&Math.abs(h)>_&&(r.swipe[1]=Math.sign(u))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const r=this.config,i=r.device;r.pointerLock&&e.currentTarget.requestPointerLock(),r.pointerCapture||(this.eventStore.add(this.sharedConfig.window,i,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,i,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,XU(e);const r=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",r),this.eventStore.add(this.sharedConfig.window,"touch","cancel",r),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(e)},this.config.delay)}keyDown(e){const r=Mx[e.key];if(r){const i=this.state,s=e.shiftKey?10:e.altKey?.1:1;this.start(e),i._delta=r(this.config.keyboardDisplacement,s),i._keyboardActive=!0,dt.addTo(i._movement,i._delta),this.compute(e),this.emit()}}keyUp(e){e.key in Mx&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const r=this.config.device;e(r,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(r,"change",this.pointerMove.bind(this)),e(r,"end",this.pointerUp.bind(this)),e(r,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function XU(t){"persist"in t&&typeof t.persist=="function"&&t.persist()}const ic=typeof window<"u"&&window.document&&window.document.createElement;function xC(){return ic&&"ontouchstart"in window}function QU(){return xC()||ic&&window.navigator.maxTouchPoints>1}function JU(){return ic&&"onpointerdown"in window}function ZU(){return ic&&"exitPointerLock"in window.document}function eB(){try{return"constructor"in GestureEvent}catch{return!1}}const er={isBrowser:ic,gesture:eB(),touch:xC(),touchscreen:QU(),pointer:JU(),pointerLock:ZU()},tB=250,nB=180,rB=.5,iB=50,sB=250,aB=10,Lx={mouse:0,touch:0,pen:8},oB=yt(yt({},ma),{},{device(t,e,{pointer:{touch:r=!1,lock:i=!1,mouse:s=!1}={}}){return this.pointerLock=i&&er.pointerLock,er.touch&&r?"touch":this.pointerLock?"mouse":er.pointer&&!s?"pointer":er.touch?"touch":"mouse"},preventScrollAxis(t,e,{preventScroll:r}){if(this.preventScrollDelay=typeof r=="number"?r:r||r===void 0&&t?tB:void 0,!(!er.touchscreen||r===!1))return t||(r!==void 0?"y":void 0)},pointerCapture(t,e,{pointer:{capture:r=!0,buttons:i=1,keys:s=!0}={}}){return this.pointerButtons=i,this.keys=s,!this.pointerLock&&this.device==="pointer"&&r},threshold(t,e,{filterTaps:r=!1,tapsThreshold:i=3,axis:s=void 0}){const a=dt.toVector(t,r?i:s?1:0);return this.filterTaps=r,this.tapsThreshold=i,a},swipe({velocity:t=rB,distance:e=iB,duration:r=sB}={}){return{velocity:this.transform(dt.toVector(t)),distance:this.transform(dt.toVector(e)),duration:r}},delay(t=0){switch(t){case!0:return nB;case!1:return 0;default:return t}},axisThreshold(t){return t?yt(yt({},Lx),t):Lx},keyboardDisplacement(t=aB){return t}});function EC(t){const[e,r]=t.overflow,[i,s]=t._delta,[a,o]=t._direction;(e<0&&i>0&&a<0||e>0&&i<0&&a>0)&&(t._movement[0]=t._movementBound[0]),(r<0&&s>0&&o<0||r>0&&s<0&&o>0)&&(t._movement[1]=t._movementBound[1])}const lB=30,uB=100;class cB extends wC{constructor(...e){super(...e),At(this,"ingKey","pinching"),At(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:r,lastOffset:i}=this.state;e==="wheel"?this.state.offset=dt.add(r,i):this.state.offset=[(1+r[0])*i[0],r[1]+i[1]]}computeMovement(){const{offset:e,lastOffset:r}=this.state;this.state.movement=[e[0]/r[0],e[1]-r[1]]}axisIntent(){const e=this.state,[r,i]=e._movement;if(!e.axis){const s=Math.abs(r)*lB-Math.abs(i);s<0?e.axis="angle":s>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&(this.state.axis==="scale"?e[1]=0:this.state.axis==="angle"&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout(()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()},0)}touchStart(e){this.ctrl.setEventIds(e);const r=this.state,i=this.ctrl.touchIds;if(r._active&&r._touchIds.every(a=>i.has(a))||i.size<2)return;this.start(e),r._touchIds=Array.from(i).slice(0,2);const s=Ax(e,r._touchIds);s&&this.pinchStart(e,s)}pointerStart(e){if(e.buttons!=null&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const r=this.state,i=r._pointerEvents,s=this.ctrl.pointerIds;if(r._active&&Array.from(i.keys()).every(o=>s.has(o))||(i.size<2&&i.set(e.pointerId,e),r._pointerEvents.size<2))return;this.start(e);const a=Jg(...Array.from(i.values()));a&&this.pinchStart(e,a)}pinchStart(e,r){const i=this.state;i.origin=r.origin,this.computeValues([r.distance,r.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const r=Ax(e,this.state._touchIds);r&&this.pinchMove(e,r)}pointerMove(e){const r=this.state._pointerEvents;if(r.has(e.pointerId)&&r.set(e.pointerId,e),!this.state._active)return;const i=Jg(...Array.from(r.values()));i&&this.pinchMove(e,i)}pinchMove(e,r){const i=this.state,s=i._values[1],a=r.angle-s;let o=0;Math.abs(a)>270&&(o+=Math.sign(a)),this.computeValues([r.distance,r.angle-360*o]),i.origin=r.origin,i.turns=o,i._movement=[i._values[0]/i._initial[0]-1,i._values[1]-i._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some(r=>!this.ctrl.touchIds.has(r))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const r=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch{}r._pointerEvents.has(e.pointerId)&&r._pointerEvents.delete(e.pointerId),r._active&&r._pointerEvents.size<2&&(r._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const r=this.state;r._active||(this.start(e),this.computeValues([e.scale,e.rotation]),r.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const r=this.state;this.computeValues([e.scale,e.rotation]),r.origin=[e.clientX,e.clientY];const i=r._movement;r._movement=[e.scale-1,e.rotation],r._delta=dt.sub(r._movement,i),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const r=this.config.modifierKey;r&&(Array.isArray(r)?!r.find(i=>e[i]):!e[r])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const i=this.state;i._delta=[-_C(e)[1]/uB*i.offset[0],0],dt.addTo(i._movement,i._delta),EC(i),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const r=this.config.device;r&&(e(r,"start",this[r+"Start"].bind(this)),e(r,"change",this[r+"Move"].bind(this)),e(r,"end",this[r+"End"].bind(this)),e(r,"cancel",this[r+"End"].bind(this)),e("lostPointerCapture","",this[r+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}}const dB=yt(yt({},bC),{},{device(t,e,{shared:r,pointer:{touch:i=!1}={}}){if(r.target&&!er.touch&&er.gesture)return"gesture";if(er.touch&&i)return"touch";if(er.touchscreen){if(er.pointer)return"pointer";if(er.touch)return"touch"}},bounds(t,e,{scaleBounds:r={},angleBounds:i={}}){const s=o=>{const l=Dx(Oh(r,o),{min:-1/0,max:1/0});return[l.min,l.max]},a=o=>{const l=Dx(Oh(i,o),{min:-1/0,max:1/0});return[l.min,l.max]};return typeof r!="function"&&typeof i!="function"?[s(),a()]:o=>[s(o),a(o)]},threshold(t,e,r){return this.lockDirection=r.axis==="lock",dt.toVector(t,this.lockDirection?[.1,3]:0)},modifierKey(t){return t===void 0?"ctrlKey":t},pinchOnWheel(t=!0){return t}});class hB extends rc{constructor(...e){super(...e),At(this,"ingKey","moving")}move(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(To(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const r=To(e),i=this.state;i._delta=dt.sub(r,i._values),dt.addTo(i._movement,i._delta),this.computeValues(r),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}}const fB=yt(yt({},ma),{},{mouseOnly:(t=!0)=>t});class pB extends rc{constructor(...e){super(...e),At(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const r=this.state,i=BU(e);r._delta=dt.sub(i,r._values),dt.addTo(r._movement,r._delta),this.computeValues(i),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}}const mB=ma;class gB extends rc{constructor(...e){super(...e),At(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const r=this.state;r._delta=_C(e),dt.addTo(r._movement,r._delta),EC(r),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}}const vB=ma;class yB extends rc{constructor(...e){super(...e),At(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&e.pointerType!=="mouse"||(this.start(e),this.computeValues(To(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&e.pointerType!=="mouse")return;const r=this.state;if(!r._active)return;r._active=!1;const i=To(e);r._movement=r._delta=dt.sub(i,r._values),this.computeValues(i),this.compute(e),r.delta=r.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}}const _B=yt(yt({},ma),{},{mouseOnly:(t=!0)=>t}),g_=new Map,Zg=new Map;function wB(t){g_.set(t.key,t.engine),Zg.set(t.key,t.resolver)}const bB={key:"drag",engine:YU,resolver:oB},xB={key:"hover",engine:yB,resolver:_B},EB={key:"move",engine:hB,resolver:fB},TB={key:"pinch",engine:cB,resolver:dB},SB={key:"scroll",engine:pB,resolver:mB},IB={key:"wheel",engine:gB,resolver:vB};function kB(t,e){if(t==null)return{};var r={},i=Object.keys(t),s,a;for(a=0;a<i.length;a++)s=i[a],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function CB(t,e){if(t==null)return{};var r=kB(t,e),i,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(s=0;s<a.length;s++)i=a[s],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(r[i]=t[i])}return r}const AB={target(t){if(t)return()=>"current"in t?t.current:t},enabled(t=!0){return t},window(t=er.isBrowser?window:void 0){return t},eventOptions({passive:t=!0,capture:e=!1}={}){return{passive:t,capture:e}},transform(t){return t}},PB=["target","eventOptions","window","enabled","transform"];function Fd(t={},e){const r={};for(const[i,s]of Object.entries(e))switch(typeof s){case"function":r[i]=s.call(r,t[i],i,t);break;case"object":r[i]=Fd(t[i],s);break;case"boolean":s&&(r[i]=t[i]);break}return r}function RB(t,e,r={}){const i=t,{target:s,eventOptions:a,window:o,enabled:l,transform:u}=i,d=CB(i,PB);if(r.shared=Fd({target:s,eventOptions:a,window:o,enabled:l,transform:u},AB),e){const h=Zg.get(e);r[e]=Fd(yt({shared:r.shared},d),h)}else for(const h in d){const f=Zg.get(h);f&&(r[h]=Fd(yt({shared:r.shared},d[h]),f))}return r}class TC{constructor(e,r){At(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=r}add(e,r,i,s,a){const o=this._listeners,l=jU(r,i),u=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},d=yt(yt({},u),a);e.addEventListener(l,s,d);const h=()=>{e.removeEventListener(l,s,d),o.delete(h)};return o.add(h),h}clean(){this._listeners.forEach(e=>e()),this._listeners.clear()}}class DB{constructor(){At(this,"_timeouts",new Map)}add(e,r,i=140,...s){this.remove(e),this._timeouts.set(e,window.setTimeout(r,i,...s))}remove(e){const r=this._timeouts.get(e);r&&window.clearTimeout(r)}clean(){this._timeouts.forEach(e=>void window.clearTimeout(e)),this._timeouts.clear()}}class NB{constructor(e){At(this,"gestures",new Set),At(this,"_targetEventStore",new TC(this)),At(this,"gestureEventStores",{}),At(this,"gestureTimeoutStores",{}),At(this,"handlers",{}),At(this,"config",{}),At(this,"pointerIds",new Set),At(this,"touchIds",new Set),At(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),MB(this,e)}setEventIds(e){if(Of(e))return this.touchIds=new Set(UU(e)),this.touchIds;if("pointerId"in e)return e.type==="pointerup"||e.type==="pointercancel"?this.pointerIds.delete(e.pointerId):e.type==="pointerdown"&&this.pointerIds.add(e.pointerId),this.pointerIds}applyHandlers(e,r){this.handlers=e,this.nativeHandlers=r}applyConfig(e,r){this.config=RB(e,r,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...e){const r=this.config.shared,i={};let s;if(!(r.target&&(s=r.target(),!s))){if(r.enabled){for(const o of this.gestures){const l=this.config[o],u=Ox(i,l.eventOptions,!!s);if(l.enabled){const d=g_.get(o);new d(this,e,o).bind(u)}}const a=Ox(i,r.eventOptions,!!s);for(const o in this.nativeHandlers)a(o,"",l=>this.nativeHandlers[o](yt(yt({},this.state.shared),{},{event:l,args:e})),void 0,!0)}for(const a in i)i[a]=HU(...i[a]);if(!s)return i;for(const a in i){const{device:o,capture:l,passive:u}=OU(a);this._targetEventStore.add(s,o,"",i[a],{capture:l,passive:u})}}}}function ka(t,e){t.gestures.add(e),t.gestureEventStores[e]=new TC(t,e),t.gestureTimeoutStores[e]=new DB}function MB(t,e){e.drag&&ka(t,"drag"),e.wheel&&ka(t,"wheel"),e.scroll&&ka(t,"scroll"),e.move&&ka(t,"move"),e.pinch&&ka(t,"pinch"),e.hover&&ka(t,"hover")}const Ox=(t,e,r)=>(i,s,a,o={},l=!1)=>{var u,d;const h=(u=o.capture)!==null&&u!==void 0?u:e.capture,f=(d=o.passive)!==null&&d!==void 0?d:e.passive;let p=l?i:MU(i,s,h);r&&f&&(p+="Passive"),t[p]=t[p]||[],t[p].push(a)},LB=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function OB(t){const e={},r={},i=new Set;for(let s in t)LB.test(s)?(i.add(RegExp.lastMatch),r[s]=t[s]):e[s]=t[s];return[r,e,i]}function Ca(t,e,r,i,s,a){if(!t.has(r)||!g_.has(i))return;const o=r+"Start",l=r+"End",u=d=>{let h;return d.first&&o in e&&e[o](d),r in e&&(h=e[r](d)),d.last&&l in e&&e[l](d),h};s[i]=u,a[i]=a[i]||{}}function jB(t,e){const[r,i,s]=OB(t),a={};return Ca(s,r,"onDrag","drag",a,e),Ca(s,r,"onWheel","wheel",a,e),Ca(s,r,"onScroll","scroll",a,e),Ca(s,r,"onPinch","pinch",a,e),Ca(s,r,"onMove","move",a,e),Ca(s,r,"onHover","hover",a,e),{handlers:a,config:e,nativeHandlers:i}}function VB(t,e={},r,i){const s=Pe.useMemo(()=>new NB(t),[]);if(s.applyHandlers(t,i),s.applyConfig(e,r),Pe.useEffect(s.effect.bind(s)),Pe.useEffect(()=>s.clean.bind(s),[]),e.target===void 0)return s.bind.bind(s)}function FB(t){return t.forEach(wB),function(r,i){const{handlers:s,nativeHandlers:a,config:o}=jB(r,i||{});return VB(s,o,void 0,a)}}function UB(t,e){return FB([bB,TB,SB,IB,EB,xB])(t,e||{})}function BB(){return{scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0}}function IC(t){var e=t.scaleX,r=e===void 0?1:e,i=t.scaleY,s=i===void 0?1:i,a=t.translateX,o=a===void 0?0:a,l=t.translateY,u=l===void 0?0:l,d=t.skewX,h=d===void 0?0:d,f=t.skewY,p=f===void 0?0:f;return{scaleX:r,scaleY:s,translateX:o,translateY:u,skewX:h,skewY:p}}function kC(t){var e=t.scaleX,r=t.scaleY,i=t.translateX,s=t.translateY,a=t.skewX,o=t.skewY,l=e*r-o*a;return{scaleX:r/l,scaleY:e/l,translateX:(r*i-a*s)/-l,translateY:(o*i-e*s)/l,skewX:a/-l,skewY:o/-l}}function CC(t,e){var r=e.x,i=e.y;return{x:t.scaleX*r+t.skewX*i+t.translateX,y:t.skewY*r+t.scaleY*i+t.translateY}}function lm(t,e){var r=e.x,i=e.y;return CC(kC(t),{x:r,y:i})}function zB(t,e){e===void 0&&(e=void 0);var r=e||t;return IC({scaleX:t,scaleY:r})}function um(t,e){return IC({translateX:t,translateY:e})}function jx(t,e){return{scaleX:t.scaleX*e.scaleX+t.skewX*e.skewY,scaleY:t.skewY*e.skewX+t.scaleY*e.scaleY,translateX:t.scaleX*e.translateX+t.skewX*e.translateY+t.translateX,translateY:t.skewY*e.translateX+t.scaleY*e.translateY+t.translateY,skewX:t.scaleX*e.skewX+t.skewX*e.scaleY,skewY:t.skewY*e.scaleX+t.scaleY*e.skewY}}function ev(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];switch(e.length){case 0:throw new Error("composeMatrices() requires arguments: was called with no args");case 1:return e[0];case 2:return jx(e[0],e[1]);default:{var i=e[0],s=e[1],a=e.slice(2),o=jx(i,s);return ev.apply(void 0,[o].concat(a))}}}function tv(){return tv=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},tv.apply(this,arguments)}var $B={scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0},HB=function(e){return-e.deltaY>0?{scaleX:1.1,scaleY:1.1}:{scaleX:.9,scaleY:.9}},WB=function(e){var r=e.offset,i=r[0],s=e.lastOffset,a=s[0];return{scaleX:i-a<0?.9:1.1,scaleY:i-a<0?.9:1.1}};function AC(t){var e=t.scaleXMin,r=e===void 0?0:e,i=t.scaleXMax,s=i===void 0?1/0:i,a=t.scaleYMin,o=a===void 0?0:a,l=t.scaleYMax,u=l===void 0?1/0:l,d=t.initialTransformMatrix,h=d===void 0?$B:d,f=t.wheelDelta,p=f===void 0?HB:f,g=t.pinchDelta,_=g===void 0?WB:g,A=t.width,P=t.height,S=t.constrain,w=t.children,x=M.useRef(null),R=M.useRef(h),F=M.useState(h),V=F[0],N=F[1],I=M.useState(!1),y=I[0],b=I[1],T=M.useState(void 0),O=T[0],D=T[1],K=M.useState(void 0),ie=K[0],oe=K[1],he=M.useCallback(function(j,U){if(S)return S(j,U);var z=j.scaleX,Z=j.scaleY,ce=z>s||z<r,be=Z>u||Z<o;return ce||be?U:j},[S,r,s,o,u]),q=M.useCallback(function(j){N(function(U){var z=he(j,U);return R.current=z,z})},[he]),Y=M.useCallback(function(j){var U=j.x,z=j.y;return CC(V,{x:U,y:z})},[V]),se=M.useCallback(function(j){var U=j.x,z=j.y;return lm(V,{x:U,y:z})},[V]),re=M.useCallback(function(){q(h)},[h,q]),W=M.useCallback(function(j){var U=j.scaleX,z=j.scaleY,Z=j.point,ce=z||U,be=Z||{x:A/2,y:P/2},Ce=lm(R.current,be),Be=ev(R.current,um(Ce.x,Ce.y),zB(U,ce),um(-Ce.x,-Ce.y));if(q(Be),y){var Xe=R.current,Ie=Xe.translateX,Je=Xe.translateY;oe(Z),D({translateX:Ie,translateY:Je})}},[P,A,y,q]),H=M.useCallback(function(j){var U=j.translateX,z=j.translateY,Z=ev(V,um(U,z));q(Z)},[q,V]),Q=M.useCallback(function(j){var U=j.translateX,z=j.translateY,Z=tv({},V,{translateX:U,translateY:z});q(Z)},[q,V]),X=M.useCallback(function(j){var U=j.x,z=j.y,Z=lm(V,{x:U,y:z});Q({translateX:Z.x,translateY:Z.y})},[Q,V]),ue=M.useCallback(function(){return kC(V)},[V]),ge=M.useCallback(function(){var j=ue(),U=j.translateX,z=j.translateY,Z=j.scaleX,ce=j.scaleY,be=j.skewX,Ce=j.skewY;return"matrix("+Z+", "+Ce+", "+be+", "+ce+", "+U+", "+z+")"},[ue]),Oe=M.useCallback(function(j){var U=V.translateX,z=V.translateY;oe(am(j)||void 0),D({translateX:U,translateY:z}),b(!0)},[V]),Ne=M.useCallback(function(j,U){var z,Z;if(!(!y||!ie||!O)){var ce=am(j),be=ce?-(ie.x-ce.x):-ie.x,Ce=ce?-(ie.y-ce.y):-ie.y,Be=O.translateX+be;U!=null&&U.offsetX&&(Be+=(z=U==null?void 0:U.offsetX)!=null?z:0);var Xe=O.translateY+Ce;U!=null&&U.offsetY&&(Xe+=(Z=U==null?void 0:U.offsetY)!=null?Z:0),Q({translateX:Be,translateY:Xe})}},[y,Q,ie,O]),He=M.useCallback(function(){oe(void 0),D(void 0),b(!1)},[]),We=M.useCallback(function(j){j.preventDefault();var U=am(j)||void 0,z=p(j),Z=z.scaleX,ce=z.scaleY;W({scaleX:Z,scaleY:ce,point:U})},[W,p]),Qe=M.useCallback(function(j){var U=j.origin,z=U[0],Z=U[1],ce=j.memo,be=ce;if(x.current){var Ce,Be=(Ce=be)!=null?Ce:x.current.getBoundingClientRect(),Xe=Be.top,Ie=Be.left;be||(be={top:Xe,left:Ie});var Je=_(j),Pr=Je.scaleX,hr=Je.scaleY;W({scaleX:Pr,scaleY:hr,point:{x:z-Ie,y:Z-Xe}})}return be},[W,_]),qe=M.useCallback(function(){var j=V.translateX,U=V.translateY,z=V.scaleX,Z=V.scaleY,ce=V.skewX,be=V.skewY;return"matrix("+z+", "+be+", "+ce+", "+Z+", "+j+", "+U+")"},[V]),Ke=M.useCallback(function(){var j={x:A/2,y:P/2},U=se(j);H({translateX:U.x-j.x,translateY:U.y-j.y})},[P,A,se,H]),Ye=M.useCallback(function(){q(BB())},[q]);UB({onDragStart:function(U){var z=U.event;z instanceof KeyboardEvent||Oe(z)},onDrag:function(U){var z=U.event,Z=U.pinching,ce=U.cancel;Z?(ce(),He()):z instanceof KeyboardEvent||Ne(z)},onDragEnd:He,onPinch:Qe,onWheel:function(U){var z=U.event,Z=U.active,ce=U.pinching;ce||!Z||We(z)}},{target:x,eventOptions:{passive:!1},drag:{filterTaps:!0}});var C={initialTransformMatrix:h,transformMatrix:V,isDragging:y,center:Ke,clear:Ye,scale:W,translate:H,translateTo:X,setTranslate:Q,setTransformMatrix:q,reset:re,handleWheel:We,handlePinch:Qe,dragEnd:He,dragMove:Ne,dragStart:Oe,toString:qe,invert:ue,toStringInvert:ge,applyToPoint:Y,applyInverseToPoint:se,containerRef:x};return Pe.createElement(Pe.Fragment,null,w(C))}AC.propTypes={width:rt.number.isRequired,height:rt.number.isRequired,wheelDelta:rt.func,scaleXMin:rt.number,scaleXMax:rt.number,scaleYMin:rt.number,scaleYMax:rt.number,constrain:rt.func,children:rt.func.isRequired};const Aa={top:40,right:40,bottom:40,left:40};function qB(t,e){const r=t.split(" "),i=[];let s="";return r.forEach(a=>{(s+" "+a).trim().length>e&&s?(i.push(s),s=a):s=s?`${s} ${a}`:a}),s&&i.push(s),i}function GB(){const[t,e]=M.useState(null),[r,i]=M.useState(!0),[s,a]=M.useState(null),[o,l]=M.useState(null),[u,d]=M.useState(null),[h,f]=M.useState({width:window.innerWidth,height:window.innerHeight});if(M.useEffect(()=>{const w=()=>{f({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",w),()=>window.removeEventListener("resize",w)},[]),M.useEffect(()=>{(async()=>{try{const x={},F=(await nr(Dn(Xt,"interviewSummaries"))).docs.map(async N=>{const I=Dn(Xt,"interviewSummaries",N.id,"subSummaries");(await nr(I)).forEach(b=>{const T=b.data();T.keywords&&T.keywords.split(",").map(O=>O.trim().toLowerCase()).forEach(O=>{x[O]=(x[O]||0)+1})})});await Promise.all(F);const V={name:"keywords",children:Object.entries(x).map(([N,I])=>({name:N,value:I}))};e(V),i(!1)}catch(x){console.error("Error fetching data:",x),a("Error loading data"),i(!1)}})()},[]),r)return v.jsxs("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:[v.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),v.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]});if(s)return v.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-50 px-6",children:v.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg max-w-xl text-center",children:s})});if(!t)return null;const p=m_(t).sum(w=>w.value).sort((w,x)=>x.value-w.value),{width:g,height:_}=h,A=g-Aa.left-Aa.right,P=_-Aa.top-Aa.bottom,S=w=>{u&&u.name===w.data.name?d(null):d({name:w.data.name,value:w.data.value,x:w.x,y:w.y,r:w.r})};return p.children&&Math.max(...p.children.map(w=>w.value)),v.jsxs("div",{className:"w-full h-screen relative bg-gray-50 font-sans overflow-hidden",children:[v.jsxs("div",{className:"absolute top-4 left-4 z-40 bg-white bg-opacity-90 p-3 rounded-lg shadow-sm max-w-md",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Keyword Visualization"}),v.jsx("p",{className:"text-sm leading-relaxed text-gray-600 m-0",children:"Explore keywords mentioned across all interviews. Bubble size indicates frequency of mentions."})]}),u&&v.jsxs("div",{className:"absolute top-24 left-4 z-50 bg-white rounded-xl shadow-md p-4 max-w-xs border border-gray-200",children:[v.jsxs("div",{className:"flex justify-between items-start",children:[v.jsx("h3",{className:"text-lg font-semibold text-gray-900 m-0",children:u.name}),v.jsx("button",{onClick:()=>d(null),className:"bg-transparent border-0 text-gray-500 text-base cursor-pointer p-1 flex items-center justify-center rounded hover:bg-gray-100 hover:text-gray-900 transition-colors",children:"✕"})]}),v.jsxs("p",{className:"text-sm text-gray-600 mt-2 mb-4",children:["This topic appears ",v.jsx("strong",{children:u.value})," times across all interviews."]}),v.jsx("div",{children:v.jsxs("button",{onClick:()=>window.location.href=`/playlist-builder?keywords=${encodeURIComponent(u.name)}`,className:"w-full py-2.5 px-4 bg-blue-600 text-white font-medium text-sm rounded-lg cursor-pointer flex items-center justify-center hover:bg-blue-700 transition-colors shadow-sm",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-4 h-4 mr-2",children:v.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})}),"Watch related segments"]})})]}),v.jsx(AC,{width:g,height:_,scaleXMin:.5,scaleXMax:3,scaleYMin:.5,scaleYMax:3,initialTransformMatrix:{scaleX:1,scaleY:1,translateX:0,translateY:0,skewX:0,skewY:0},children:w=>v.jsxs("div",{className:"w-full h-full overflow-hidden relative touch-none flex justify-center items-center",children:[v.jsxs("svg",{width:"100%",height:"100%",ref:w.containerRef,className:"bg-white rounded-xl shadow-md mx-4 my-4 mt-20",children:[v.jsx("rect",{width:"100%",height:"100%",fill:"#ffffff",rx:14,onClick:()=>{w.reset(),d(null)}}),v.jsx(mC,{root:p,size:[A,P],padding:16,children:x=>{const R=x.descendants().filter(F=>!F.children);return v.jsx(Mh,{transform:w.toString(),top:Aa.top+(P/2-x.r),left:Aa.left+(A/2-x.r),children:R.map((F,V)=>{const N=Math.max(F.r,20),I=u&&u.name===F.data.name,y=Math.min(N/3.5,14),b=Math.max(5,Math.floor(N/3)),T=qB(F.data.name,b),O=y,D=T.length>1?-((T.length-1)*O)/2:0,K=I?"#2563eb":"#d1d5db",ie=I?3:1,oe=I?"#f0f7ff":"#ffffff";return v.jsxs("g",{transform:`translate(${F.x}, ${F.y})`,onMouseEnter:he=>l({name:F.data.name,value:F.data.value,x:he.clientX,y:he.clientY}),onMouseLeave:()=>l(null),onClick:()=>S(F),className:"cursor-pointer",children:[v.jsx("circle",{r:N,fill:oe,stroke:K,strokeWidth:ie,style:{transition:"fill 0.3s, stroke 0.3s, stroke-width 0.3s"}}),v.jsx("text",{textAnchor:"middle",fontSize:y,fontWeight:I?"bold":"normal",fill:"#111827",pointerEvents:"none",style:{fontFamily:"Inter, system-ui, sans-serif"},children:T.map((he,q)=>v.jsx("tspan",{x:"0",dy:q===0?D:O,children:he},q))})]},`circle-${V}`)})})}})]}),o&&!u&&v.jsxs("div",{className:"absolute bg-gray-900 bg-opacity-90 text-white p-2 px-3 rounded-lg pointer-events-none text-sm z-50 shadow-md max-w-xs",style:{left:o.x+8,top:o.y-20},children:[v.jsx("div",{className:"font-semibold",children:o.name}),v.jsxs("div",{children:[o.value," mentions"]}),v.jsx("div",{className:"text-xs mt-1 text-blue-200",children:"Click to explore"})]})]})}),v.jsxs("div",{className:"absolute bottom-4 right-4 bg-white bg-opacity-90 py-2 px-3 rounded-lg text-xs text-gray-600 shadow-sm flex items-center",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-3.5 h-3.5 mr-1.5 text-gray-500",children:v.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})}),v.jsx("span",{children:"Scroll to zoom • Drag to pan • Click bubble to select"})]})]})}const KB="modulepreload",YB=function(t){return"/Civil-Rights-History-LLM/"+t},Vx={},Fx=function(e,r,i){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(u=>{if(u=YB(u),u in Vx)return;Vx[u]=!0;const d=u.endsWith(".css"),h=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${h}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":KB,d||(f.as="script"),f.crossOrigin="",f.href=u,l&&f.setAttribute("nonce",l),document.head.appendChild(f),d)return new Promise((p,g)=>{f.addEventListener("load",p),f.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})};function XB(){const[t,e]=M.useState(!0),[r,i]=M.useState(null),[s,a]=M.useState([]),[o,l]=M.useState(!1);M.useEffect(()=>{let p=!0,g=null,_=null;return typeof window<"u"&&(async()=>{try{if(g=await Fx(()=>import("./leaflet-src-DaWPXrwE.js").then(P=>P.l),[]),_=await Fx(()=>import("./index-IzfhpVb_.js"),__vite__mapDeps([0,1])),!p)return;delete g.Icon.Default.prototype._getIconUrl,g.Icon.Default.mergeOptions({iconUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png"}),l(!0)}catch(P){console.error("Failed to initialize map:",P),p&&(i("Failed to load map library"),e(!1))}})(),()=>{p=!1}},[]),M.useEffect(()=>{h()},[]);const u=async p=>{try{await new Promise(A=>setTimeout(A,1e3));const _=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(p)}`)).json();if(_.length>0)return[parseFloat(_[0].lat),parseFloat(_[0].lon)]}catch(g){console.error("Error fetching coordinates:",g)}return null},d=p=>{if(!p)return null;const g=/(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,_=p==null?void 0:p.match(g);return _&&_[1]?_[1]:null},h=async()=>{try{e(!0);const p=await nr(Dn(Xt,"interviewSummaries")),g=[];for(const _ of p.docs){const A=_.data(),{birthplace:P,name:S,videoEmbedLink:w}=A;if(P){const x=await u(P);if(x){const R=d(w),F=R?`https://img.youtube.com/vi/${R}/default.jpg`:"";g.push({position:x,name:S,birthplace:P,thumbnailURL:F,documentName:_.id})}}}console.log("Markers data:",g),a(g),e(!1)}catch(p){console.error("Error fetching birthplaces:",p),i("Failed to load map data"),e(!1)}},f=()=>{if(!o)return null;const{MapContainer:p,TileLayer:g,Marker:_,Popup:A}=require("react-leaflet");return v.jsxs(p,{center:[39.8283,-98.5795],zoom:4,style:{height:"600px",width:"100%"},className:"rounded-lg shadow-lg",children:[v.jsx(g,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),s.map((P,S)=>v.jsx(_,{position:P.position,children:v.jsx(A,{children:v.jsxs("div",{className:"text-center",children:[v.jsx("h3",{className:"font-bold mb-2",children:P.name}),v.jsx("p",{className:"text-gray-600 mb-2",children:P.birthplace}),P.thumbnailURL&&v.jsx("img",{src:P.thumbnailURL,alt:"Video thumbnail",className:"w-30 h-auto mb-2 mx-auto"}),v.jsx("a",{href:`/accordion?documentName=${encodeURIComponent(P.documentName)}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-700 transition-colors",children:"View Interview Summary"})]})})},S))]})};return t?v.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})}):r?v.jsx("div",{style:{height:"600px"},className:"flex justify-center items-center",children:v.jsx("div",{className:"text-red-500",children:r})}):v.jsx("div",{className:"map-container",children:f()})}const Yr=navigator?navigator.userAgent.toLowerCase():"no-user-agent-specified",So=document?document.documentElement:null,QB=Yr?Yr.indexOf("phantom")!==-1:!1,sc=window&&"ActiveXObject"in window;sc&&Yr.match(/MSIE 9/i);const jf=Yr.indexOf("webkit")!==-1;Yr.indexOf("android");const JB=Yr.search("android [23]")!==-1,ga=window?typeof window.orientation<"u":!1,ZB=navigator&&window?navigator.msPointerEnabled&&navigator.msMaxTouchPoints&&!window.PointerEvent:!1,e6=navigator&&window?window.PointerEvent&&navigator.pointerEnabled&&navigator.maxTouchPoints:ZB,PC=window?window.opera:!1;Yr.indexOf("gecko");const Io=Yr.indexOf("gecko")!==-1&&!jf&&!PC&&!sc;Yr.indexOf("chrome");const t6=Yr.indexOf("edge/")!==-1;So&&sc&&"transition"in So.style;window&&"WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix;So&&"MozPerspective"in So.style;So&&"OTransition"in So.style;let Ux=window?"devicePixelRatio"in window&&window.devicePixelRatio>1:!1;if(!Ux&&window&&"matchMedia"in window){let t=window.matchMedia("(min-resolution:144dpi)");Ux=t&&t.matches}const qr=window&&!window.L_NO_TOUCH&&!QB&&(e6||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);function n6(){var t=window.innerWidth,e=window.innerHeight,r="portrait";return t>e&&(r="landscape"),r}function ac(t){return typeof t=="string"?document.getElementById(t):t}function de(t,e,r){var i=document.createElement(t);return i.className=e,r&&r.appendChild(i),i}function jl(t,e){var r=de("button",t,e);return r.type="button",r}function nv(t){for(var e={x:0,y:0};t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e.x+=t.offsetLeft,e.y+=t.offsetTop,t=t.offsetParent;return e}function RC(t){for(var e=document.documentElement.style,r=0;r<t.length;r++)if(t[r]in e)return t[r];return!1}RC(["transition","webkitTransition","OTransition","MozTransition","msTransition"]);RC(["transformProperty","WebkitTransform","OTransform","MozTransform","msTransform"]);class Ve extends Error{constructor(e,r){super(),this.name="TLError",this.message=e||"error",this.message_key=this.message,this.detail=r||""}}const Bx={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function DC(t){Bx[t.toLowerCase()]&&(t=Bx[t.toLowerCase()]);var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(e,function(i,s,a,o){return s+s+a+a+o+o});var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r?{r:parseInt(r[1],16),g:parseInt(r[2],16),b:parseInt(r[3],16)}:null}function tt(t,e){var r;for(r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}function r6(t){return t==null?!1:t==!0||String(t).toLowerCase()=="true"||Number(t)==1}function Oa(t){for(var e=Array.prototype.slice.call(arguments,1),r=0,i=e.length,s;r<i;r++)s=e[r]||{},tt(t,s);return t}const NC=[];function i6(t){NC.push(t)}function Fe(t){NC.forEach(e=>{try{e(t)}catch(r){console&&console.log&&console.log("Error handling trace",r)}})}function ni(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}const zx=function(){var t=0,e="_tl_id";return function(r){return r[e]=r[e]||++t,r[e]}}();function $n(t){return t&&typeof t.replace=="function"?t.replace(/^\s+|\s+$/g,""):""}function En(t,...e){for(let i of e)for(var r of Object.getOwnPropertyNames(i.prototype))t.prototype[r]=i.prototype[r]}function s6(t,e){if(e||(e=oa(6)),!(e in t))return e;var r=e.match(/^(.+)(-\d+)?$/)[1],i=[];for(let a in t)a.match(/^(.+?)(-\d+)?$/)[1]==r&&i.push(a);e=r+"-"+(i.length+1);for(var s=i.length;i.indexOf(e)!=-1;s++)e=r+"-"+s;return e}function a6(t){var e=[];if(Object.keys)e=Object.keys(t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);for(var i=0;i<e.length;i++){var s=e[i];if(t[s]!=null&&typeof t[s]!="string"||$n(t[s]).length!=0)return!1}return!0}function cm(t){t=$n(t),t=t.toLowerCase();for(var e="ãàáäâẽèéëêìíïîõòóöôùúüûñç·/_,:;",r="aaaaaeeeeeiiiiooooouuuunc------",i=0,s=e.length;i<s;i++)t=t.replace(new RegExp(e.charAt(i),"g"),r.charAt(i));return t=t.replace(/[^a-z0-9 -]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-"),t=t.replace(/^([0-9])/,"_$1"),t}function oa(t,e){var r=function(a){return Math.floor(Math.random()*a)},i=function(){var a="abcdefghijklmnopqurstuvwxyz";return a.substr(r(32),1)},s=function(a){for(var o="",l=0;l<a;l++)o+=i();return o};return e?e+"-"+s(t):"tl-"+s(t)}function o6(t,e,r){for(var i=0;i<t.length;i++)if(e<t[i])return t[i];return e}function l6(t,e,r){for(var i=t.length-1;i>=0;i--)if(e>t[i])return t[i];return e}function u6(t){return t==parseFloat(t)?!(t%2):void 0}function MC(t,e,r,i){for(var s=i||0,a=0;a<e.length;a++)e[a].data[r]==t&&(s=a);return s}function ao(t){return t&&(t=t.replace(/<a\b[^>]*>/i,""),t=t.replace(/<\/a>/i,""),t)}function c6(t,e){t.data=Oa({},t.data,e),t.data.unique_id===""&&(t.data.unique_id=oa(6))}function d6(t){return t.match(/<p>[\s\S]*?<\/p>/)?t:"<p>"+t+"</p>"}function ko(t){return t=t.replace(/(<[^>]*>)+/g,""),t.replace('"',"'")}function rv(t,e,r){var i=function(l,u,d){d||(d="");var h=30;return u&&u.length>h&&(u=u.substring(0,h)+"…"),d+"<a class='tl-makelink' href='"+l+"' onclick='void(0)'>"+u+"</a>"},s=/\b(?:https?|ftp):\/\/([a-z0-9-+&@#\/%?=~_|!:,.;]*[a-z0-9-+&@#\/%=~_|])/gim,a=/(^|[^\/>])(www\.[\S]+(\b|$))/gim,o=/([a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+)/gim;return t.replace(s,function(l,u,d,h){if(d>0){var f=h[d-1];if(f=='"'||f=="'"||f=="=")return l}return i(l,u)}).replace(a,function(l,u,d,h,f){return i("http://"+d,d,u)}).replace(o,function(l,u,d,h){return i("mailto:"+u,u)})}function Vf(t){return t.replace(/(.*)www.dropbox.com\/(.*)/,"$1dl.dropboxusercontent.com/$2")}const va={square:t=>{var e={w:0,h:0};return t.w>t.h&&t.h>0?(e.h=t.h,e.w=t.h):(e.w=t.w,e.h=t.w),e},r16_9:t=>t.w!==null&&t.w!==""?Math.round(t.w/16*9):t.h!==null&&t.h!==""?Math.round(t.h/9*16):0,r4_3:t=>{if(t.w!==null&&t.w!=="")return Math.round(t.w/4*3);if(t.h!==null&&t.h!=="")return Math.round(t.h/3*4)}};function h6(t){var e,r=[],i,s;e=t.toString(),e.match("&#038;")?e=e.replace("&#038;","&"):e.match("&#38;")?e=e.replace("&#38;","&"):e.match("&amp;")&&(e=e.replace("&amp;","&")),s=e.slice(e.indexOf("?")+1).split("&");for(var a=0;a<s.length;a++)i=s[a].split("="),r.push(i[0]),r[i[0]]=i[1];return r}function f6(t){var e=[];for(var r in t)t.hasOwnProperty(r)&&e.push(r+"="+t[r]);return"?"+e.join("&")}function p6(t,e){if(typeof t<"u"){var r=0;for(var i in t){if(e===r)return t[i];r++}return""}else return""}let m6=function(t){var e="123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",r=e.length;return{encode:function(i){if(typeof i!="number"||i!==parseInt(i))throw'"encode" only accepts integers.';for(var s="";i;){var a=i%r;i=Math.floor(i/r),s=e[a].toString()+s}return s},decode:function(i){if(typeof i!="string")throw'"decode" only accepts strings.';for(var s=0;i;){var a=e.indexOf(i[0]);if(a<0)throw`"decode" can't find "`+i[0]+'" in the alphabet: "'+e+'"';var o=i.length-1;s+=a*Math.pow(r,o),i=i.substring(1)}return s}}}();function dm(t){if(typeof t=="string"){let s=t.match(/^\s*(\d+h)?(\d+m)?(\d+s)?\s*/i);if(s){var e=parseInt(s[1])||0,r=parseInt(s[2])||0,i=parseInt(s[3])||0;return i+r*60+e*60*60}}else if(typeof t=="number")return t;return 0}function g6(t){var e=new DOMParser().parseFromString(t,"text/html");return e.body.textContent||""}function v6(t){}function Ff(t){var e=new v6;return e.get(t)}function Pu(t){return t==1?1:1-Math.pow(2,-10*t)}function Ho(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}let jh=function(){};jh.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments)},r=function(){};r.prototype=this.prototype;var i=new r;i.constructor=e,e.prototype=i,e.superclass=this.prototype;for(var s in this)this.hasOwnProperty(s)&&s!=="prototype"&&s!=="superclass"&&(e[s]=this[s]);return t.statics&&(Oa(e,t.statics),delete t.statics),t.includes&&(Oa.apply(null,[i].concat(t.includes)),delete t.includes),t.options&&i.options&&(t.options=Oa({},i.options,t.options)),Oa(i,t),e.extend=jh.extend,e.include=function(a){Oa(this.prototype,a)},e};class Tn{on(e,r,i){if(!r)throw new Ve("No callback function provided");var s=this._tl_events=this._tl_events||{};return s[e]=s[e]||[],s[e].push({action:r,context:i||this}),this}addEventListener(e,r,i){return this.on(e,r,i)}hasEventListeners(e){var r="_tl_events";return r in this&&e in this[r]&&this[r][e].length>0}removeEventListener(e,r,i){if(!this.hasEventListeners(e))return this;for(var s=0,a=this._tl_events,o=a[e].length;s<o;s++)if(a[e][s].action===r&&(!i||a[e][s].context===i))return a[e].splice(s,1),this;return this}off(e,r,i){return this.removeEventListener(e,r,i)}fire(e,r){if(!this.hasEventListeners(e))return this;for(var i=tt({type:e,target:this},r),s=this._tl_events[e].slice(),a=0,o=s.length;a<o;a++)s[a].action?s[a].action.call(s[a].context||this,i):Fe(`no action defined for ${e} listener`);return this}}function xi(t,e){return y6(t,e)}const y6=function(){var t=document,e=window,r=e.performance,i=r&&(r.now||r.webkitNow||r.msNow||r.mozNow),s=i?function(){return i.call(r)}:function(){return+new Date},a=t.documentElement,o=!1,l=1e3,u=/^rgb\(|#/,d=/^([+\-])=([\d\.]+)/,h=/^(?:[\+\-]=?)?\d+(?:\.\d+)?(%|in|cm|mm|em|ex|pt|pc|px)$/,f=/rotate\(((?:[+\-]=)?([\-\d\.]+))deg\)/,p=/scale\(((?:[+\-]=)?([\d\.]+))\)/,g=/skew\(((?:[+\-]=)?([\-\d\.]+))deg, ?((?:[+\-]=)?([\-\d\.]+))deg\)/,_=/translate\(((?:[+\-]=)?([\-\d\.]+))px, ?((?:[+\-]=)?([\-\d\.]+))px\)/,A={lineHeight:1,zoom:1,zIndex:1,opacity:1,transform:1},P=function(){var W=t.createElement("a").style,H=["webkitTransform","MozTransform","OTransform","msTransform","Transform"],Q;for(Q=0;Q<H.length;Q++)if(H[Q]in W)return H[Q]}(),S=function(){return typeof t.createElement("a").style.opacity<"u"}(),w=t.defaultView&&t.defaultView.getComputedStyle?function(W,H){H=H=="transform"?P:H,H=D(H);var Q=null,X=t.defaultView.getComputedStyle(W,"");return X&&(Q=X[H]),W.style[H]||Q}:a.currentStyle?function(W,H){if(H=D(H),H=="opacity"){var Q=100;try{Q=W.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch{try{Q=W.filters("alpha").opacity}catch{}}return Q/100}var X=W.currentStyle?W.currentStyle[H]:null;return W.style[H]||X}:function(W,H){return W.style[D(H)]},x=function(){return e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||function(W){e.setTimeout(function(){W(+new Date)},17)}}(),R=[];x(function(W){o=W>1e12!=s()>1e12});function F(W,H,Q){if(Array.prototype.indexOf)return W.indexOf(H);for(Q=0;Q<W.length;++Q)if(W[Q]===H)return Q}function V(W){var H,Q=R.length;for(i&&W>1e12&&(W=s()),o&&(W=s()),H=Q;H--;)R[H](W);R.length&&x(V)}function N(W){R.push(W)===1&&x(V)}function I(W){var H,Q=F(R,W);Q>=0&&(H=R.slice(Q+1),R.length=Q,R=R.concat(H))}function y(W,H){var Q={},X;return(X=W.match(f))&&(Q.rotate=se(X[1],H?H.rotate:null)),(X=W.match(p))&&(Q.scale=se(X[1],H?H.scale:null)),(X=W.match(g))&&(Q.skewx=se(X[1],H?H.skewx:null),Q.skewy=se(X[3],H?H.skewy:null)),(X=W.match(_))&&(Q.translatex=se(X[1],H?H.translatex:null),Q.translatey=se(X[3],H?H.translatey:null)),Q}function b(W){var H="";return"rotate"in W&&(H+="rotate("+W.rotate+"deg) "),"scale"in W&&(H+="scale("+W.scale+") "),"translatex"in W&&(H+="translate("+W.translatex+"px,"+W.translatey+"px) "),"skewx"in W&&(H+="skew("+W.skewx+"deg,"+W.skewy+"deg)"),H}function T(W,H,Q){return"#"+(1<<24|W<<16|H<<8|Q).toString(16).slice(1)}function O(W){var H=W.match(/rgba?\((\d+),\s*(\d+),\s*(\d+)/);return(H?T(H[1],H[2],H[3]):W).replace(/#(\w)(\w)(\w)$/,"#$1$1$2$2$3$3")}function D(W){return W.replace(/-(.)/g,function(H,Q){return Q.toUpperCase()})}function K(W){return typeof W=="function"}function ie(W){return Math.sin(W*Math.PI/2)}function oe(W,H,Q,X,ue,ge){X=K(X)?X:re.easings[X]||ie;var Oe=W||l,Ne=this,He=ge-ue,We=s(),Qe=0,qe=0;function Ke(Ye){var C=Ye-We;if(C>Oe||Qe)return ge=isFinite(ge)?ge:1,Qe?qe&&H(ge):H(ge),I(Ke),Q&&Q.apply(Ne);isFinite(ge)?H(He*X(C/Oe)+ue):H(X(C/Oe))}return N(Ke),{stop:function(Ye){Qe=1,qe=Ye,Ye||(Q=null)}}}function he(W,H){var Q=W.length,X=[],ue,ge;for(ue=0;ue<Q;++ue)X[ue]=[W[ue][0],W[ue][1]];for(ge=1;ge<Q;++ge)for(ue=0;ue<Q-ge;++ue)X[ue][0]=(1-H)*X[ue][0]+H*X[parseInt(ue+1,10)][0],X[ue][1]=(1-H)*X[ue][1]+H*X[parseInt(ue+1,10)][1];return[X[0][0],X[0][1]]}function q(W,H,Q){var X=[],ue,ge,Oe,Ne;for(ue=0;ue<6;ue++)Oe=Math.min(15,parseInt(H.charAt(ue),16)),Ne=Math.min(15,parseInt(Q.charAt(ue),16)),ge=Math.floor((Ne-Oe)*W+Oe),ge=ge>15?15:ge<0?0:ge,X[ue]=ge.toString(16);return"#"+X.join("")}function Y(W,H,Q,X,ue,ge,Oe){if(ue=="transform"){Oe={};for(var Ne in Q[ge][ue])Oe[Ne]=Ne in X[ge][ue]?Math.round(((X[ge][ue][Ne]-Q[ge][ue][Ne])*W+Q[ge][ue][Ne])*l)/l:Q[ge][ue][Ne];return Oe}else return typeof Q[ge][ue]=="string"?q(W,Q[ge][ue],X[ge][ue]):(Oe=Math.round(((X[ge][ue]-Q[ge][ue])*W+Q[ge][ue])*l)/l,ue in A||(Oe+=H[ge][ue]||"px"),Oe)}function se(W,H,Q,X,ue){return(Q=d.exec(W))?(ue=parseFloat(Q[2]))&&H+(Q[1]=="+"?1:-1)*ue:parseFloat(W)}function re(W,H){var Q=W?Q=isFinite(W.length)?W:[W]:[],X,ue=H.complete,ge=H.duration,Oe=H.easing,Ne=H.bezier,He=[],We=[],Qe=[],qe=[],Ke,Ye;for(Ne&&(Ke=H.left,Ye=H.top,delete H.right,delete H.bottom,delete H.left,delete H.top),X=Q.length;X--;){if(He[X]={},We[X]={},Qe[X]={},Ne){var C=w(Q[X],"left"),j=w(Q[X],"top"),U=[se(K(Ke)?Ke(Q[X]):Ke||0,parseFloat(C)),se(K(Ye)?Ye(Q[X]):Ye||0,parseFloat(j))];qe[X]=K(Ne)?Ne(Q[X],U):Ne,qe[X].push(U),qe[X].unshift([parseInt(C,10),parseInt(j,10)])}for(var z in H){switch(z){case"complete":case"duration":case"easing":case"bezier":continue}var Z=w(Q[X],z),ce,be=K(H[z])?H[z](Q[X]):H[z];if(typeof be=="string"&&u.test(be)&&!u.test(Z)){delete H[z];continue}He[X][z]=z=="transform"?y(Z):typeof be=="string"&&u.test(be)?O(Z).slice(1):parseFloat(Z),We[X][z]=z=="transform"?y(be,He[X][z]):typeof be=="string"&&be.charAt(0)=="#"?O(be).slice(1):se(be,parseFloat(Z)),typeof be=="string"&&(ce=be.match(h))&&(Qe[X][z]=ce[1])}}return oe.apply(Q,[ge,function(Ce,Be,Xe){for(X=Q.length;X--;){Ne&&(Xe=he(qe[X],Ce),Q[X].style.left=Xe[0]+"px",Q[X].style.top=Xe[1]+"px");for(var Ie in H)Be=Y(Ce,Qe,He,We,Ie,X),Ie=="transform"?Q[X].style[P]=b(Be):Ie=="opacity"&&!S?Q[X].style.filter="alpha(opacity="+Be*100+")":Q[X].style[D(Ie)]=Be}},ue,Oe])}return re.tween=oe,re.getStyle=w,re.bezier=he,re.transform=P,re.parseTransform=y,re.formatTransform=b,re.easings={},re}();class Si{show(e){e||(this._el.container.style.display="block")}hide(e){this._el.container.style.display="none"}addTo(e){e.appendChild(this._el.container),this.onAdd()}removeFrom(e){e.removeChild(this._el.container),this.onRemove()}animatePosition(e,r){var i={duration:this.options.duration,easing:this.options.ease};for(var s in e)e.hasOwnProperty(s)&&(i[s]=e[s]+"px");this.animator&&this.animator.stop(),this.animator=xi(r,i)}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}setPosition(e,r){for(var i in e)e.hasOwnProperty(i)&&(r?r.style[i]=e[i]+"px":this._el.container.style[i]=e[i]+"px")}getPosition(){return nv(this._el.container)}}let _6=class{constructor(e,r,i){this._el={drag:e,move:e},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},i&&(this._el.move=i),this.options={enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:!1,right:!1},momentum_multiplier:2e3,duration:1e3,ease:Ho},this.animator=null,this.dragevent=this.mousedrag,qr&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},tt(this.options,r)}enable(e){this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){Ae.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Ae.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(e){this.options.constraint=e}_onDragStart(e){qr?e.originalEvent?(this.data.pagex.start=e.originalEvent.touches[0].screenX,this.data.pagey.start=e.originalEvent.touches[0].screenY):(this.data.pagex.start=e.targetTouches[0].screenX,this.data.pagey.start=e.targetTouches[0].screenY):(this.data.pagex.start=e.pageX,this.data.pagey.start=e.pageY),this.options.enable.x&&(this._el.move.style.left=this.data.pagex.start-this._el.move.offsetWidth/2+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.pagey.start-this._el.move.offsetHeight/2+"px"),this.data.pos.start=nv(this._el.drag),this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),Ae.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Ae.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(e){this.data.sliding=!1,Ae.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Ae.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(e){e.preventDefault(),this.data.sliding=!0,qr?e.originalEvent?(this.data.pagex.end=e.originalEvent.touches[0].screenX,this.data.pagey.end=e.originalEvent.touches[0].screenY):(this.data.pagex.end=e.targetTouches[0].screenX,this.data.pagey.end=e.targetTouches[0].screenY):(this.data.pagex.end=e.pageX,this.data.pagey.end=e.pageY),this.data.pos.end=nv(this._el.drag),this.data.new_pos.x=-(this.data.pagex.start-this.data.pagex.end-this.data.pos.start.x),this.data.new_pos.y=-(this.data.pagey.start-this.data.pagey.end-this.data.pos.start.y),this.options.enable.x&&(this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&(this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var e={x:0,y:0,time:0},r={x:0,y:0,time:0},i=!1;e.time=(new Date().getTime()-this.data.time.start)*10,r.time=(new Date().getTime()-this.data.time.start)*10,r.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),r.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),e.x=Math.round(r.x/r.time),e.y=Math.round(r.y/r.time),this.data.new_pos.x=Math.min(this.data.pos.end.x+e.x),this.data.new_pos.y=Math.min(this.data.pos.end.y+e.y),this.options.enable.x?this.data.new_pos.x<0&&(this.data.new_pos.x=0):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,r.time<3e3&&(i=!0),Math.abs(r.x)>1e4&&(this.data.direction="left",r.x>0&&(this.data.direction="right")),Math.abs(r.y)>1e4&&(this.data.direction="up",r.y>0&&(this.data.direction="down")),this._animateMomentum(),i&&this.fire("swipe_"+this.data.direction,this.data)}_animateMomentum(){var e={x:this.data.new_pos.x,y:this.data.new_pos.y},r={duration:this.options.duration,easing:Pu};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(e.y>this.options.constraint.bottom?e.y=this.options.constraint.bottom:e.y<this.options.constraint.top&&(e.y=this.options.constraint.top)),r.top=Math.floor(e.y)+"px"),this.options.enable.x&&((this.options.constraint.left||this.options.constraint.right)&&(e.x>this.options.constraint.left?e.x=this.options.constraint.left:e.x<this.options.constraint.right&&(e.x=this.options.constraint.right)),r.left=Math.floor(e.x)+"px"),this.animator=xi(this._el.move,r),this.fire("momentum",this.data)}};En(Tn);var Ae={addListener:function(t,e,r,i){var s=zx(r),a="_tl_"+e+s;if(!t[a]){var o=function(d){return r.call(i||t,d||Ae._getEvent())};if(qr&&e==="dblclick"&&this.addDoubleTapListener)this.addDoubleTapListener(t,o,s);else if("addEventListener"in t)if(e==="mousewheel")t.addEventListener("DOMMouseScroll",o,!1),t.addEventListener(e,o,!1);else if(e==="mouseenter"||e==="mouseleave"){var l=o,u=e==="mouseenter"?"mouseover":"mouseout";o=function(d){if(Ae._checkMouse(t,d))return l(d)},t.addEventListener(u,o,!1)}else t.addEventListener(e,o,!1);else"attachEvent"in t&&t.attachEvent("on"+e,o);t[a]=o}},removeListener:function(t,e,r){var i=zx(r),s="_tl_"+e+i,a=t[s];a&&(qr&&e==="dblclick"&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,i):"removeEventListener"in t?e==="mousewheel"?(t.removeEventListener("DOMMouseScroll",a,!1),t.removeEventListener(e,a,!1)):e==="mouseenter"||e==="mouseleave"?t.removeEventListener(e==="mouseenter"?"mouseover":"mouseout",a,!1):t.removeEventListener(e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a),t[s]=null)},_checkMouse:function(t,e){var r=e.relatedTarget;if(!r)return!0;try{for(;r&&r!==t;)r=r.parentNode}catch{return!1}return r!==t},_getEvent:function(){var t=window.event;if(!t)for(var e=arguments.callee.caller;e&&(t=e.arguments[0],!(t&&window.Event===t.constructor));)e=e.caller;return t},stopPropagation:function(t){t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},disableClickPropagation:function(t){Ae.addListener(t,_6.START,Ae.stopPropagation),Ae.addListener(t,"click",Ae.stopPropagation),Ae.addListener(t,"dblclick",Ae.stopPropagation)},preventDefault:function(t){t.preventDefault?t.preventDefault():t.returnValue=!1},stop:function(t){Ae.preventDefault(t),Ae.stopPropagation(t)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e}},Ii=function(){var t,e,r,i,s=[],a=s.slice,o=s.filter,l=window.document,u={},d={},h={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},f=/^\s*<(\w+|!)[^>]*>/,p=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,g=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,_=/^(?:body|html)$/i,A=/([A-Z])/g,P=["val","css","html","text","data","width","height","offset"],S=["after","prepend","before","append"],w=l.createElement("table"),x=l.createElement("tr"),R={tr:l.createElement("tbody"),tbody:w,thead:w,tfoot:w,td:x,th:x,"*":l.createElement("div")},F=/complete|loaded|interactive/,V=/^[\w-]*$/,N={},I=N.toString,y={},b,T,O=l.createElement("div"),D={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},K=Array.isArray||function(C){return C instanceof Array};y.matches=function(C,j){if(!j||!C||C.nodeType!==1)return!1;var U=C.webkitMatchesSelector||C.mozMatchesSelector||C.oMatchesSelector||C.matchesSelector;if(U)return U.call(C,j);var z,Z=C.parentNode,ce=!Z;return ce&&(Z=O).appendChild(C),z=~y.qsa(Z,j).indexOf(C),ce&&O.removeChild(C),z};function ie(C){return C==null?String(C):N[I.call(C)]||"object"}function oe(C){return ie(C)=="function"}function he(C){return C!=null&&C==C.window}function q(C){return C!=null&&C.nodeType==C.DOCUMENT_NODE}function Y(C){return ie(C)=="object"}function se(C){return Y(C)&&!he(C)&&Object.getPrototypeOf(C)==Object.prototype}function re(C){return typeof C.length=="number"}function W(C){return o.call(C,function(j){return j!=null})}function H(C){return C.length>0?r.fn.concat.apply([],C):C}b=function(C){return C.replace(/-+(.)?/g,function(j,U){return U?U.toUpperCase():""})};function Q(C){return C.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}T=function(C){return o.call(C,function(j,U){return C.indexOf(j)==U})};function X(C){return C in d?d[C]:d[C]=new RegExp("(^|\\s)"+C+"(\\s|$)")}function ue(C,j){return typeof j=="number"&&!h[Q(C)]?j+"px":j}function ge(C){var j,U;return u[C]||(j=l.createElement(C),l.body.appendChild(j),U=getComputedStyle(j,"").getPropertyValue("display"),j.parentNode.removeChild(j),U=="none"&&(U="block"),u[C]=U),u[C]}function Oe(C){return"children"in C?a.call(C.children):r.map(C.childNodes,function(j){if(j.nodeType==1)return j})}y.fragment=function(C,j,U){var z,Z,ce;return p.test(C)&&(z=r(l.createElement(RegExp.$1))),z||(C.replace&&(C=C.replace(g,"<$1></$2>")),j===t&&(j=f.test(C)&&RegExp.$1),j in R||(j="*"),ce=R[j],ce.innerHTML=""+C,z=r.each(a.call(ce.childNodes),function(){ce.removeChild(this)})),se(U)&&(Z=r(z),r.each(U,function(be,Ce){P.indexOf(be)>-1?Z[be](Ce):Z.attr(be,Ce)})),z},y.Z=function(C,j){return C=C||[],C.__proto__=r.fn,C.selector=j||"",C},y.isZ=function(C){return C instanceof y.Z},y.init=function(C,j){var U;if(C)if(typeof C=="string")if(C=C.trim(),C[0]=="<"&&f.test(C))U=y.fragment(C,RegExp.$1,j),C=null;else{if(j!==t)return r(j).find(C);U=y.qsa(l,C)}else{if(oe(C))return r(l).ready(C);if(y.isZ(C))return C;if(K(C))U=W(C);else if(Y(C))U=[C],C=null;else if(f.test(C))U=y.fragment(C.trim(),RegExp.$1,j),C=null;else{if(j!==t)return r(j).find(C);U=y.qsa(l,C)}}else return y.Z();return y.Z(U,C)},r=function(C,j){return y.init(C,j)};function Ne(C,j,U){for(e in j)U&&(se(j[e])||K(j[e]))?(se(j[e])&&!se(C[e])&&(C[e]={}),K(j[e])&&!K(C[e])&&(C[e]=[]),Ne(C[e],j[e],U)):j[e]!==t&&(C[e]=j[e])}r.extend=function(C){var j,U=a.call(arguments,1);return typeof C=="boolean"&&(j=C,C=U.shift()),U.forEach(function(z){Ne(C,z,j)}),C},y.qsa=function(C,j){var U,z=j[0]=="#",Z=!z&&j[0]==".",ce=z||Z?j.slice(1):j,be=V.test(ce);return q(C)&&be&&z?(U=C.getElementById(ce))?[U]:[]:C.nodeType!==1&&C.nodeType!==9?[]:a.call(be&&!z?Z?C.getElementsByClassName(ce):C.getElementsByTagName(j):C.querySelectorAll(j))};function He(C,j){return j==null?r(C):r(C).filter(j)}r.contains=function(C,j){return C!==j&&C.contains(j)};function We(C,j,U,z){return oe(j)?j.call(C,U,z):j}function Qe(C,j,U){U==null?C.removeAttribute(j):C.setAttribute(j,U)}function qe(C,j){var U=C.className,z=U&&U.baseVal!==t;if(j===t)return z?U.baseVal:U;z?U.baseVal=j:C.className=j}function Ke(C){var j;try{return C&&(C=="true"||(C=="false"?!1:C=="null"?null:!/^0/.test(C)&&!isNaN(j=Number(C))?j:/^[\[\{]/.test(C)?r.parseJSON(C):C))}catch{return C}}r.type=ie,r.isFunction=oe,r.isWindow=he,r.isArray=K,r.isPlainObject=se,r.isEmptyObject=function(C){var j;for(j in C)return!1;return!0},r.inArray=function(C,j,U){return s.indexOf.call(j,C,U)},r.camelCase=b,r.trim=function(C){return C==null?"":String.prototype.trim.call(C)},r.uuid=0,r.support={},r.expr={},r.map=function(C,j){var U,z=[],Z,ce;if(re(C))for(Z=0;Z<C.length;Z++)U=j(C[Z],Z),U!=null&&z.push(U);else for(ce in C)U=j(C[ce],ce),U!=null&&z.push(U);return H(z)},r.each=function(C,j){var U,z;if(re(C)){for(U=0;U<C.length;U++)if(j.call(C[U],U,C[U])===!1)return C}else for(z in C)if(j.call(C[z],z,C[z])===!1)return C;return C},r.grep=function(C,j){return o.call(C,j)},window.JSON&&(r.parseJSON=JSON.parse),r.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(C,j){N["[object "+j+"]"]=j.toLowerCase()}),r.fn={forEach:s.forEach,reduce:s.reduce,push:s.push,sort:s.sort,indexOf:s.indexOf,concat:s.concat,map:function(C){return r(r.map(this,function(j,U){return C.call(j,U,j)}))},slice:function(){return r(a.apply(this,arguments))},ready:function(C){return F.test(l.readyState)&&l.body?C(r):l.addEventListener("DOMContentLoaded",function(){C(r)},!1),this},get:function(C){return C===t?a.call(this):this[C>=0?C:C+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(C){return s.every.call(this,function(j,U){return C.call(j,U,j)!==!1}),this},filter:function(C){return oe(C)?this.not(this.not(C)):r(o.call(this,function(j){return y.matches(j,C)}))},add:function(C,j){return r(T(this.concat(r(C,j))))},is:function(C){return this.length>0&&y.matches(this[0],C)},not:function(C){var j=[];if(oe(C)&&C.call!==t)this.each(function(z){C.call(this,z)||j.push(this)});else{var U=typeof C=="string"?this.filter(C):re(C)&&oe(C.item)?a.call(C):r(C);this.forEach(function(z){U.indexOf(z)<0&&j.push(z)})}return r(j)},has:function(C){return this.filter(function(){return Y(C)?r.contains(this,C):r(this).find(C).size()})},eq:function(C){return C===-1?this.slice(C):this.slice(C,+C+1)},first:function(){var C=this[0];return C&&!Y(C)?C:r(C)},last:function(){var C=this[this.length-1];return C&&!Y(C)?C:r(C)},find:function(C){var j,U=this;return typeof C=="object"?j=r(C).filter(function(){var z=this;return s.some.call(U,function(Z){return r.contains(Z,z)})}):this.length==1?j=r(y.qsa(this[0],C)):j=this.map(function(){return y.qsa(this,C)}),j},closest:function(C,j){var U=this[0],z=!1;for(typeof C=="object"&&(z=r(C));U&&!(z?z.indexOf(U)>=0:y.matches(U,C));)U=U!==j&&!q(U)&&U.parentNode;return r(U)},parents:function(C){for(var j=[],U=this;U.length>0;)U=r.map(U,function(z){if((z=z.parentNode)&&!q(z)&&j.indexOf(z)<0)return j.push(z),z});return He(j,C)},parent:function(C){return He(T(this.pluck("parentNode")),C)},children:function(C){return He(this.map(function(){return Oe(this)}),C)},contents:function(){return this.map(function(){return a.call(this.childNodes)})},siblings:function(C){return He(this.map(function(j,U){return o.call(Oe(U.parentNode),function(z){return z!==U})}),C)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(C){return r.map(this,function(j){return j[C]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=""),getComputedStyle(this,"").getPropertyValue("display")=="none"&&(this.style.display=ge(this.nodeName))})},replaceWith:function(C){return this.before(C).remove()},wrap:function(C){var j=oe(C);if(this[0]&&!j)var U=r(C).get(0),z=U.parentNode||this.length>1;return this.each(function(Z){r(this).wrapAll(j?C.call(this,Z):z?U.cloneNode(!0):U)})},wrapAll:function(C){if(this[0]){r(this[0]).before(C=r(C));for(var j;(j=C.children()).length;)C=j.first();r(C).append(this)}return this},wrapInner:function(C){var j=oe(C);return this.each(function(U){var z=r(this),Z=z.contents(),ce=j?C.call(this,U):C;Z.length?Z.wrapAll(ce):z.append(ce)})},unwrap:function(){return this.parent().each(function(){r(this).replaceWith(r(this).children())}),this},clone:function(){return this.map(function(){return this.cloneNode(!0)})},hide:function(){return this.css("display","none")},toggle:function(C){return this.each(function(){var j=r(this);(C===t?j.css("display")=="none":C)?j.show():j.hide()})},prev:function(C){return r(this.pluck("previousElementSibling")).filter(C||"*")},next:function(C){return r(this.pluck("nextElementSibling")).filter(C||"*")},html:function(C){return arguments.length===0?this.length>0?this[0].innerHTML:null:this.each(function(j){var U=this.innerHTML;r(this).empty().append(We(this,C,j,U))})},text:function(C){return arguments.length===0?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=C===t?"":""+C})},attr:function(C,j){var U;return typeof C=="string"&&j===t?this.length==0||this[0].nodeType!==1?t:C=="value"&&this[0].nodeName=="INPUT"?this.val():!(U=this[0].getAttribute(C))&&C in this[0]?this[0][C]:U:this.each(function(z){if(this.nodeType===1)if(Y(C))for(e in C)Qe(this,e,C[e]);else Qe(this,C,We(this,j,z,this.getAttribute(C)))})},removeAttr:function(C){return this.each(function(){this.nodeType===1&&Qe(this,C)})},prop:function(C,j){return C=D[C]||C,j===t?this[0]&&this[0][C]:this.each(function(U){this[C]=We(this,j,U,this[C])})},data:function(C,j){var U=this.attr("data-"+C.replace(A,"-$1").toLowerCase(),j);return U!==null?Ke(U):t},val:function(C){return arguments.length===0?this[0]&&(this[0].multiple?r(this[0]).find("option").filter(function(){return this.selected}).pluck("value"):this[0].value):this.each(function(j){this.value=We(this,C,j,this.value)})},offset:function(C){if(C)return this.each(function(U){var z=r(this),Z=We(this,C,U,z.offset()),ce=z.offsetParent().offset(),be={top:Z.top-ce.top,left:Z.left-ce.left};z.css("position")=="static"&&(be.position="relative"),z.css(be)});if(this.length==0)return null;var j=this[0].getBoundingClientRect();return{left:j.left+window.pageXOffset,top:j.top+window.pageYOffset,width:Math.round(j.width),height:Math.round(j.height)}},css:function(C,j){if(arguments.length<2){var U=this[0],z=getComputedStyle(U,"");if(!U)return;if(typeof C=="string")return U.style[b(C)]||z.getPropertyValue(C);if(K(C)){var Z={};return r.each(K(C)?C:[C],function(be,Ce){Z[Ce]=U.style[b(Ce)]||z.getPropertyValue(Ce)}),Z}}var ce="";if(ie(C)=="string")!j&&j!==0?this.each(function(){this.style.removeProperty(Q(C))}):ce=Q(C)+":"+ue(C,j);else for(e in C)!C[e]&&C[e]!==0?this.each(function(){this.style.removeProperty(Q(e))}):ce+=Q(e)+":"+ue(e,C[e])+";";return this.each(function(){this.style.cssText+=";"+ce})},index:function(C){return C?this.indexOf(r(C)[0]):this.parent().children().indexOf(this[0])},hasClass:function(C){return C?s.some.call(this,function(j){return this.test(qe(j))},X(C)):!1},addClass:function(C){return C?this.each(function(j){i=[];var U=qe(this),z=We(this,C,j,U);z.split(/\s+/g).forEach(function(Z){r(this).hasClass(Z)||i.push(Z)},this),i.length&&qe(this,U+(U?" ":"")+i.join(" "))}):this},removeClass:function(C){return this.each(function(j){if(C===t)return qe(this,"");i=qe(this),We(this,C,j,i).split(/\s+/g).forEach(function(U){i=i.replace(X(U)," ")}),qe(this,i.trim())})},toggleClass:function(C,j){return C?this.each(function(U){var z=r(this),Z=We(this,C,U,qe(this));Z.split(/\s+/g).forEach(function(ce){(j===t?!z.hasClass(ce):j)?z.addClass(ce):z.removeClass(ce)})}):this},scrollTop:function(C){if(this.length){var j="scrollTop"in this[0];return C===t?j?this[0].scrollTop:this[0].pageYOffset:this.each(j?function(){this.scrollTop=C}:function(){this.scrollTo(this.scrollX,C)})}},scrollLeft:function(C){if(this.length){var j="scrollLeft"in this[0];return C===t?j?this[0].scrollLeft:this[0].pageXOffset:this.each(j?function(){this.scrollLeft=C}:function(){this.scrollTo(C,this.scrollY)})}},position:function(){if(this.length){var C=this[0],j=this.offsetParent(),U=this.offset(),z=_.test(j[0].nodeName)?{top:0,left:0}:j.offset();return U.top-=parseFloat(r(C).css("margin-top"))||0,U.left-=parseFloat(r(C).css("margin-left"))||0,z.top+=parseFloat(r(j[0]).css("border-top-width"))||0,z.left+=parseFloat(r(j[0]).css("border-left-width"))||0,{top:U.top-z.top,left:U.left-z.left}}},offsetParent:function(){return this.map(function(){for(var C=this.offsetParent||l.body;C&&!_.test(C.nodeName)&&r(C).css("position")=="static";)C=C.offsetParent;return C})}},r.fn.detach=r.fn.remove,["width","height"].forEach(function(C){var j=C.replace(/./,function(U){return U[0].toUpperCase()});r.fn[C]=function(U){var z,Z=this[0];return U===t?he(Z)?Z["inner"+j]:q(Z)?Z.documentElement["scroll"+j]:(z=this.offset())&&z[C]:this.each(function(ce){Z=r(this),Z.css(C,We(this,U,ce,Z[C]()))})}});function Ye(C,j){j(C);for(var U in C.childNodes)Ye(C.childNodes[U],j)}return S.forEach(function(C,j){var U=j%2;r.fn[C]=function(){var z,Z=r.map(arguments,function(Ce){return z=ie(Ce),z=="object"||z=="array"||Ce==null?Ce:y.fragment(Ce)}),ce,be=this.length>1;return Z.length<1?this:this.each(function(Ce,Be){ce=U?Be:Be.parentNode,Be=j==0?Be.nextSibling:j==1?Be.firstChild:j==2?Be:null,Z.forEach(function(Xe){if(be)Xe=Xe.cloneNode(!0);else if(!ce)return r(Xe).remove();Ye(ce.insertBefore(Xe,Be),function(Ie){Ie.nodeName!=null&&Ie.nodeName.toUpperCase()==="SCRIPT"&&(!Ie.type||Ie.type==="text/javascript")&&!Ie.src&&window.eval.call(window,Ie.innerHTML)})})})},r.fn[U?C+"To":"insert"+(j?"Before":"After")]=function(z){return r(z)[C](this),this}}),y.Z.prototype=r.fn,y.uniq=T,y.deserializeValue=Ke,r.zepto=y,r}();window.Zepto=Ii;window.$===void 0&&(window.$=Ii);(function(t){t.zepto.qsa;var e=1,r,i=Array.prototype.slice,s=t.isFunction,a=function(y){return typeof y=="string"},o={},l={},u="onfocusin"in window,d={focus:"focusin",blur:"focusout"},h={mouseenter:"mouseover",mouseleave:"mouseout"};l.click=l.mousedown=l.mouseup=l.mousemove="MouseEvents";function f(y){return y._zid||(y._zid=e++)}function p(y,b,T,O){if(b=g(b),b.ns)var D=_(b.ns);return(o[f(y)]||[]).filter(function(K){return K&&(!b.e||K.e==b.e)&&(!b.ns||D.test(K.ns))&&(!T||f(K.fn)===f(T))&&(!O||K.sel==O)})}function g(y){var b=(""+y).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function _(y){return new RegExp("(?:^| )"+y.replace(" "," .* ?")+"(?: |$)")}function A(y,b){return y.del&&!u&&y.e in d||!!b}function P(y){return h[y]||u&&d[y]||y}function S(y,b,T,O,D,K,ie){var oe=f(y),he=o[oe]||(o[oe]=[]);b.split(/\s/).forEach(function(q){if(q=="ready")return t(document).ready(T);var Y=g(q);Y.fn=T,Y.sel=D,Y.e in h&&(T=function(re){var W=re.relatedTarget;if(!W||W!==this&&!t.contains(this,W))return Y.fn.apply(this,arguments)}),Y.del=K;var se=K||T;Y.proxy=function(re){if(re=N(re),!re.isImmediatePropagationStopped()){re.data=O;var W=se.apply(y,re._args==r?[re]:[re].concat(re._args));return W===!1&&(re.preventDefault(),re.stopPropagation()),W}},Y.i=he.length,he.push(Y),"addEventListener"in y&&y.addEventListener(P(Y.e),Y.proxy,A(Y,ie))})}function w(y,b,T,O,D){var K=f(y);(b||"").split(/\s/).forEach(function(ie){p(y,ie,T,O).forEach(function(oe){delete o[K][oe.i],"removeEventListener"in y&&y.removeEventListener(P(oe.e),oe.proxy,A(oe,D))})})}t.event={add:S,remove:w},t.proxy=function(y,b){if(s(y)){var T=function(){return y.apply(b,arguments)};return T._zid=f(y),T}else{if(a(b))return t.proxy(y[b],y);throw new TypeError("expected function")}},t.fn.bind=function(y,b,T){return this.on(y,b,T)},t.fn.unbind=function(y,b){return this.off(y,b)},t.fn.one=function(y,b,T,O){return this.on(y,b,T,O,1)};var x=function(){return!0},R=function(){return!1},F=/^([A-Z]|returnValue$|layer[XY]$)/,V={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};function N(y,b){return(b||!y.isDefaultPrevented)&&(b||(b=y),t.each(V,function(T,O){var D=b[T];y[T]=function(){return this[O]=x,D&&D.apply(b,arguments)},y[O]=R}),(b.defaultPrevented!==r?b.defaultPrevented:"returnValue"in b?b.returnValue===!1:b.getPreventDefault&&b.getPreventDefault())&&(y.isDefaultPrevented=x)),y}function I(y){var b,T={originalEvent:y};for(b in y)!F.test(b)&&y[b]!==r&&(T[b]=y[b]);return N(T,y)}t.fn.delegate=function(y,b,T){return this.on(b,y,T)},t.fn.undelegate=function(y,b,T){return this.off(b,y,T)},t.fn.live=function(y,b){return t(document.body).delegate(this.selector,y,b),this},t.fn.die=function(y,b){return t(document.body).undelegate(this.selector,y,b),this},t.fn.on=function(y,b,T,O,D){var K,ie,oe=this;return y&&!a(y)?(t.each(y,function(he,q){oe.on(he,b,T,q,D)}),oe):(!a(b)&&!s(O)&&O!==!1&&(O=T,T=b,b=r),(s(T)||T===!1)&&(O=T,T=r),O===!1&&(O=R),oe.each(function(he,q){D&&(K=function(Y){return w(q,Y.type,O),O.apply(this,arguments)}),b&&(ie=function(Y){var se,re=t(Y.target).closest(b,q).get(0);if(re&&re!==q)return se=t.extend(I(Y),{currentTarget:re,liveFired:q}),(K||O).apply(re,[se].concat(i.call(arguments,1)))}),S(q,y,O,T,b,ie||K)}))},t.fn.off=function(y,b,T){var O=this;return y&&!a(y)?(t.each(y,function(D,K){O.off(D,b,K)}),O):(!a(b)&&!s(T)&&T!==!1&&(T=b,b=r),T===!1&&(T=R),O.each(function(){w(this,y,T,b)}))},t.fn.trigger=function(y,b){return y=a(y)||t.isPlainObject(y)?t.Event(y):N(y),y._args=b,this.each(function(){"dispatchEvent"in this?this.dispatchEvent(y):t(this).triggerHandler(y,b)})},t.fn.triggerHandler=function(y,b){var T,O;return this.each(function(D,K){T=I(a(y)?t.Event(y):y),T._args=b,T.target=K,t.each(p(K,y.type||y),function(ie,oe){if(O=oe.proxy(T),T.isImmediatePropagationStopped())return!1})}),O},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach(function(y){t.fn[y]=function(b){return b?this.bind(y,b):this.trigger(y)}}),["focus","blur"].forEach(function(y){t.fn[y]=function(b){return b?this.bind(y,b):this.each(function(){try{this[y]()}catch{}}),this}}),t.Event=function(y,b){a(y)||(b=y,y=b.type);var T=document.createEvent(l[y]||"Events"),O=!0;if(b)for(var D in b)D=="bubbles"?O=!!b[D]:T[D]=b[D];return T.initEvent(y,O,!0),N(T)}})(Ii);(function(t){var e=0,r=window.document,i,s,a=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,o=/^(?:text|application)\/javascript/i,l=/^(?:text|application)\/xml/i,u="application/json",d="text/html",h=/^\s*$/;function f(b,T,O){var D=t.Event(T);return t(b).trigger(D,O),!D.isDefaultPrevented()}function p(b,T,O,D){if(b.global)return f(T||r,O,D)}t.active=0;function g(b){b.global&&t.active++===0&&p(b,null,"ajaxStart")}function _(b){b.global&&!--t.active&&p(b,null,"ajaxStop")}function A(b,T){var O=T.context;if(T.beforeSend.call(O,b,T)===!1||p(T,O,"ajaxBeforeSend",[b,T])===!1)return!1;p(T,O,"ajaxSend",[b,T])}function P(b,T,O,D){var K=O.context,ie="success";O.success.call(K,b,ie,T),D&&D.resolveWith(K,[b,ie,T]),p(O,K,"ajaxSuccess",[T,O,b]),w(ie,T,O)}function S(b,T,O,D,K){var ie=D.context;D.error.call(ie,O,T,b),K&&K.rejectWith(ie,[O,T,b]),p(D,ie,"ajaxError",[O,D,b||T]),w(T,O,D)}function w(b,T,O){var D=O.context;O.complete.call(D,T,b),p(O,D,"ajaxComplete",[T,O]),_(O)}function x(){}t.ajaxJSONP=function(b,T){if(!("type"in b))return t.ajax(b);var O=b.jsonpCallback,D=(t.isFunction(O)?O():O)||"jsonp"+ ++e,K=r.createElement("script"),ie=window[D],oe,he=function(se){t(K).triggerHandler("error",se||"abort")},q={abort:he},Y;return T&&T.promise(q),t(K).on("load error",function(se,re){clearTimeout(Y),t(K).off().remove(),se.type=="error"||!oe?S(null,re||"error",q,b,T):P(oe[0],q,b,T),window[D]=ie,oe&&t.isFunction(ie)&&ie(oe[0]),ie=oe=void 0}),A(q,b)===!1?(he("abort"),q):(window[D]=function(){oe=arguments},K.src=b.url.replace(/\?(.+)=\?/,"?$1="+D),r.head.appendChild(K),b.timeout>0&&(Y=setTimeout(function(){he("timeout")},b.timeout)),q)},t.ajaxSettings={type:"GET",beforeSend:x,success:x,error:x,complete:x,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:u,xml:"application/xml, text/xml",html:d,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0};function R(b){return b&&(b=b.split(";",2)[0]),b&&(b==d?"html":b==u?"json":o.test(b)?"script":l.test(b)&&"xml")||"text"}function F(b,T){return T==""?b:(b+"&"+T).replace(/[&?]{1,2}/,"?")}function V(b){b.processData&&b.data&&t.type(b.data)!="string"&&(b.data=t.param(b.data,b.traditional)),b.data&&(!b.type||b.type.toUpperCase()=="GET")&&(b.url=F(b.url,b.data),b.data=void 0)}t.ajax=function(b){var T=t.extend({},b||{}),O=t.Deferred&&t.Deferred();for(i in t.ajaxSettings)T[i]===void 0&&(T[i]=t.ajaxSettings[i]);g(T),T.crossDomain||(T.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(T.url)&&RegExp.$2!=window.location.host),T.url||(T.url=window.location.toString()),V(T),T.cache===!1&&(T.url=F(T.url,"_="+Date.now()));var D=T.dataType,K=/\?.+=\?/.test(T.url);if(D=="jsonp"||K)return K||(T.url=F(T.url,T.jsonp?T.jsonp+"=?":T.jsonp===!1?"":"callback=?")),t.ajaxJSONP(T,O);var ie=T.accepts[D],oe={},he=function(H,Q){oe[H.toLowerCase()]=[H,Q]},q=/^([\w-]+:)\/\//.test(T.url)?RegExp.$1:window.location.protocol,Y=T.xhr(),se=Y.setRequestHeader,re;if(O&&O.promise(Y),T.crossDomain||he("X-Requested-With","XMLHttpRequest"),he("Accept",ie||"*/*"),(ie=T.mimeType||ie)&&(ie.indexOf(",")>-1&&(ie=ie.split(",",2)[0]),Y.overrideMimeType&&Y.overrideMimeType(ie)),(T.contentType||T.contentType!==!1&&T.data&&T.type.toUpperCase()!="GET")&&he("Content-Type",T.contentType||"application/x-www-form-urlencoded"),T.headers)for(s in T.headers)he(s,T.headers[s]);if(Y.setRequestHeader=he,Y.onreadystatechange=function(){if(Y.readyState==4){Y.onreadystatechange=x,clearTimeout(re);var H,Q=!1;if(Y.status>=200&&Y.status<300||Y.status==304||Y.status==0&&q=="file:"){D=D||R(T.mimeType||Y.getResponseHeader("content-type")),H=Y.responseText;try{D=="script"?(0,eval)(H):D=="xml"?H=Y.responseXML:D=="json"&&(H=h.test(H)?null:t.parseJSON(H))}catch(X){Q=X}Q?S(Q,"parsererror",Y,T,O):P(H,Y,T,O)}else S(Y.statusText||null,Y.status?"error":"abort",Y,T,O)}},A(Y,T)===!1)return Y.abort(),S(null,"abort",Y,T,O),Y;if(T.xhrFields)for(s in T.xhrFields)Y[s]=T.xhrFields[s];var W="async"in T?T.async:!0;Y.open(T.type,T.url,W,T.username,T.password);for(s in oe)se.apply(Y,oe[s]);return T.timeout>0&&(re=setTimeout(function(){Y.onreadystatechange=x,Y.abort(),S(null,"timeout",Y,T,O)},T.timeout)),Y.send(T.data?T.data:null),Y};function N(b,T,O,D){var K=!t.isFunction(T);return{url:b,data:K?T:void 0,success:K?t.isFunction(O)?O:void 0:T,dataType:K&&D||O}}t.get=function(b,T,O,D){return t.ajax(N.apply(null,arguments))},t.post=function(b,T,O,D){var K=N.apply(null,arguments);return K.type="POST",t.ajax(K)},t.getJSON=function(b,T,O){var D=N.apply(null,arguments);return D.dataType="json",t.ajax(D)},t.fetchJSON=function(b){var T=new XMLHttpRequest;return new Promise(function(O,D){T.onreadystatechange=function(){try{if(T.readyState!==4)return;if(T.status>=200&&T.status<300){var K=JSON.parse(T.responseText);O(K)}else D({status:T.status,statusText:T.statusText})}catch(ie){D({status:400,statusText:`Error fetching JSON from ${b}: ${ie}`})}},T.open("GET",b,!0),T.send()})},t.fn.load=function(b,T,O){if(!this.length)return this;var D=this,K=b.split(/\s/),ie,oe=N(b,T,O),he=oe.success;return K.length>1&&(oe.url=K[0],ie=K[1]),oe.success=function(q){D.html(ie?t("<div>").html(q.replace(a,"")).find(ie):q),he&&he.apply(D,arguments)},t.ajax(oe),this};var I=encodeURIComponent;function y(b,T,O,D){var K,ie=t.isArray(T),oe=t.isPlainObject(T);t.each(T,function(he,q){K=t.type(q),D&&(he=O?D:D+"["+(oe||K=="object"||K=="array"?he:"")+"]"),!D&&ie?b.add(q.name,q.value):K=="array"||!O&&K=="object"?y(b,q,O,he):b.add(he,q)})}t.param=function(b,T){var O=[];return O.add=function(D,K){this.push(I(D)+"="+I(K))},y(O,b,T),O.join("&").replace(/%20/g,"+")}})(Ii);(function(t){t.fn.serializeArray=function(){var e=[],r;return t([].slice.call(this.get(0).elements)).each(function(){r=t(this);var i=r.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&i!="submit"&&i!="reset"&&i!="button"&&(i!="radio"&&i!="checkbox"||this.checked)&&e.push({name:r.attr("name"),value:r.val()})}),e},t.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(r){e.push(encodeURIComponent(r.name)+"="+encodeURIComponent(r.value))}),e.join("&")},t.fn.submit=function(e){if(e)this.bind("submit",e);else if(this.length){var r=t.Event("submit");this.eq(0).trigger(r),r.isDefaultPrevented()||this.get(0).submit()}return this}})(Ii);(function(t){"__proto__"in{}||t.extend(t.zepto,{Z:function(r,i){return r=r||[],t.extend(r,t.fn),r.selector=i||"",r.__Z=!0,r},isZ:function(r){return t.type(r)==="array"&&"__Z"in r}});try{getComputedStyle(void 0)}catch{var e=getComputedStyle;window.getComputedStyle=function(i,s){try{return e(i,s)}catch{return null}}}})(Ii);const Vh=Ii.getJSON,Wo=Ii.ajax,Uf=Ii.fetchJSON,jr=[["millisecond",1,function(t){}],["second",1e3,function(t){t.setMilliseconds(0)}],["minute",1e3*60,function(t){t.setSeconds(0)}],["hour",1e3*60*60,function(t){t.setMinutes(0)}],["day",1e3*60*60*24,function(t){t.setHours(0)}],["month",1e3*60*60*24*30,function(t){t.setDate(1)}],["year",1e3*60*60*24*365,function(t){t.setMonth(0)}],["decade",1e3*60*60*24*365*10,function(t){var e=t.getFullYear();t.setFullYear(e-e%10)}],["century",1e3*60*60*24*365*100,function(t){var e=t.getFullYear();t.setFullYear(e-e%100)}],["millennium",1e3*60*60*24*365*1e3,function(t){var e=t.getFullYear();t.setFullYear(e-e%1e3)}]],js=["millisecond","second","minute","hour","day","month","year"],$x=/^([\+-]?\d+?)(-\d{2}?)?(-\d{2}?)?$/,w6=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/,Hx={base:{millisecond:"time_short",second:"time",minute:"time_no_seconds_small_date",hour:"time_no_seconds_small_date",day:"full",month:"month",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"},short:{millisecond:"time_short",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"fallback",epoch:"fallback",era:"fallback",eon:"fallback",eon2:"fallback"}},Bf=jh.extend({initialize:function(t,e,r){typeof t=="number"?this.data={format:"yyyy mmmm",date_obj:new Date(t)}:Date==t.constructor?this.data={format:"yyyy mmmm",date_obj:t}:(this.data=JSON.parse(JSON.stringify(t)),this._createDateObj()),t.format&&!e&&(e=t.format),this._setFormat(e,r)},setDateFormat:function(t){this.data.format=t},getDisplayDate:function(t,e){if(this.data.display_date)return this.data.display_date;t||(t=sr.fallback),t.constructor!=sr&&(Fe("First argument to getDisplayDate must be type Language"),t=sr.fallback);var r=e||this.data.format;return t.formatDate(this.data.date_obj,r)},getMillisecond:function(){return this.getTime()},getTime:function(){return this.data.date_obj.getTime()},isBefore:function(t){if(!this.data.date_obj.constructor==t.data.date_obj.constructor)throw new Ve("date_compare_err");return"isBefore"in this.data.date_obj?this.data.date_obj.isBefore(t.data.date_obj):this.data.date_obj<t.data.date_obj},isAfter:function(t){if(!this.data.date_obj.constructor==t.data.date_obj.constructor)throw new Ve("date_compare_err");return"isAfter"in this.data.date_obj?this.data.date_obj.isAfter(t.data.date_obj):this.data.date_obj>t.data.date_obj},floor:function(t){for(var e=new Date(this.data.date_obj.getTime()),r=0;r<jr.length;r++)if(jr[r][2](e),jr[r][0]==t)return new Bf(e);throw new Ve("invalid_scale_err",t)},_getDateData:function(){var t={year:0,month:1,day:1,hour:0,minute:0,second:0,millisecond:0};tt(t,this.data);for(var e in js){var r=$n(t[js[e]]);if(!r.match(/^-?\d*$/))throw new Ve("invalid_date_err",js[e]+" = '"+t[js[e]]+"'");var i=parseInt(t[js[e]]);isNaN(i)&&(i=e==4||e==5?1:0),t[js[e]]=i}return t.month>0&&t.month<=12&&(t.month=t.month-1),t},_createDateObj:function(){var t=this._getDateData();this.data.date_obj=new Date(t.year,t.month,t.day,t.hour,t.minute,t.second,t.millisecond),this.data.date_obj.getFullYear()!=t.year&&this.data.date_obj.setFullYear(t.year)},findBestFormat:function(t){for(var e=js,r=0;r<e.length;r++)if(this.data[e[r]])return t?t in Hx||(t="short"):t="base",Hx[t][e[r]];return""},_setFormat:function(t,e){t?this.data.format=t:this.data.format||(this.data.format=this.findBestFormat()),e?this.data.format_short=e:this.data.format_short||(this.data.format_short=this.findBestFormat(!0))},getFullYear:function(){return this.data.date_obj.getFullYear()}});function Wx(t){if(t.match($x)){var e=t.match($x).slice(1),r={year:e[0].replace("+","")};return e[1]&&(r.month=e[1].replace("-","")),e[2]&&(r.day=e[2].replace("-","")),r}if(t.match(w6))return cls.parseISODate(t);if(t.match(/^\-?\d+$/))return{year:t};var i={};if(t.match(/\d+\/\d+\/\d+/)){var s=t.match(/\d+\/\d+\/\d+/)[0];t=$n(t.replace(s,""));var a=s.split("/");i.month=a[0],i.day=a[1],i.year=a[2]}if(t.match(/\d+\/\d+/)){var s=t.match(/\d+\/\d+/)[0];t=$n(t.replace(s,""));var a=s.split("/");i.month=a[0],i.year=a[1]}if(t.match(":")){var o=t.split(":");if(i.hour=o[0],i.minute=o[1],o[2]){let l=o[2].split(".");i.second=l[0],i.millisecond=l[1]}}return i}const Ru=jh.extend({initialize:function(t){if(this.year=parseInt(t),isNaN(this.year))throw new Ve("invalid_year_err",t)},isBefore:function(t){return this.year<t.year},isAfter:function(t){return this.year>t.year},getTime:function(){return this.year}}),iv=1e6,sv=iv*10,av=sv*10,qx=av*10;function Ni(t){return function(e){var r=e.getTime();return new Ru(Math.floor(r/t)*t)}}const Ud=[["year",1,new Ni(1)],["decade",10,new Ni(10)],["century",100,new Ni(100)],["millennium",1e3,new Ni(1e3)],["age",iv,new Ni(iv)],["epoch",sv,new Ni(sv)],["era",av,new Ni(av)],["eon",qx,new Ni(qx)]],zf=Bf.extend({initialize:function(t,e,r){Ru==t.constructor?this.data={date_obj:t}:(this.data=JSON.parse(JSON.stringify(t)),this._createDateObj()),t.format&&!e&&(e=t.format),this._setFormat(e,r)},_createDateObj:function(){var t=this._getDateData();this.data.date_obj=new Ru(t.year)},floor:function(t){for(var e=0;e<Ud.length;e++)if(Ud[e][0]==t){var r=Ud[e][2](this.data.date_obj);return new zf(r)}throw new Ve("invalid_scale_err",t)},getFullYear:function(){return this.data.date_obj.getTime()}}),Gx=new RegExp(/\$\{(.+?)\}/g);class sr{constructor(e,r){for(let a in Oi.en)this[a]=Oi.en[a];if(e&&typeof e=="string"&&e!="en"){var i=e;if(!(i in Oi)){console.log(`Expected language ${i} to be cached. Did you call the constructor directly?`);var s=LC(i,r);Uf(s).then(a=>{Oi[i]=a}).catch(a=>{console.log(`Error loading language [${s}] ${a.statusText} [${a.status}]`)})}tt(this,Oi[i])}}mergeData(e){for(k in Oi.en)e[k]&&(typeof this[k]=="object"?tt(e[k],this[k]):this[k]=e[k])}formatBigYear(e,r){var i=e.year,s=this.bigdateformats[r]||this.bigdateformats.fallback;if(s){for(var a=0;a<s.length;a++){var o=s[a];if(Math.abs(i/o[0])>1)return Kx(Math.abs(i/o[0]),o[1])}return i.toString()}else return Fe("Language file dateformats missing cosmological. Falling back."),Kx(i,r)}_(e,r){let i=this.messages[e]||sr.fallback.messages[e]||e;if(i.match(Gx)){if(!r)throw new Ve("template_message_without_context");for(let s of i.matchAll(Gx)){if(!(s[1]in r))throw new Ve("template_message_without_context");i=i.replace(s[0],r[s[1]])}}return i}formatDate(e,r){return e.constructor==Date?this.formatJSDate(e,r):e.constructor==Ru?this.formatBigYear(e,r):e.data&&e.data.date_obj?this.formatDate(e.data.date_obj,r):(Fe("Unfamiliar date presented for formatting"),e.toString())}formatJSDate(e,r){var i=this,s=function(R,F){var V=i.period_labels[R];if(V)var R=F<12?V[0]:V[1];return"<span class='tl-timeaxis-timesuffix'>"+R+"</span>"},a=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,o=/[^-+\dA-Z]/g;r||(r="full");var l=this.dateformats[r]||sr.fallback.dateformats[r];l||(l=r);var u="get",d=e[u+"Date"](),h=e[u+"Day"](),f=e[u+"Month"](),p=e[u+"FullYear"](),g=e[u+"Hours"](),_=e[u+"Minutes"](),A=e[u+"Seconds"](),P=e[u+"Milliseconds"](),S=e.getTimezoneOffset(),w={d,dd:ni(d),ddd:this.date.day_abbr[h],dddd:this.date.day[h],m:f+1,mm:ni(f+1),mmm:this.date.month_abbr[f],mmmm:this.date.month[f],yy:String(p).slice(2),yyyy:p<0&&this.has_negative_year_modifier()?Math.abs(p):p,h:g%12||12,hh:ni(g%12||12),H:g,HH:ni(g),M:_,MM:ni(_),s:A,ss:ni(A),l:ni(P,3),L:ni(P>99?Math.round(P/10):P),t:s("t",g),tt:s("tt",g),T:s("T",g),TT:s("TT",g),Z:(String(e).match(a)||[""]).pop().replace(o,""),o:(S>0?"-":"+")+ni(Math.floor(Math.abs(S)/60)*100+Math.abs(S)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10]},x=l.replace(sr.DATE_FORMAT_TOKENS,function(R){return R in w?w[R]:R.slice(1,R.length-1)});return this._applyEra(x,p)}has_negative_year_modifier(){return!!(this.era_labels.negative_year.prefix||this.era_labels.negative_year.suffix)}_applyEra(e,r){var i=r<0?this.era_labels.negative_year:this.era_labels.positive_year,s="";return i.prefix&&(s+="<span>"+i.prefix+"</span> "),s+=e,i.suffix&&(s+=" <span>"+i.suffix+"</span>"),s}}async function b6(t,e){var r=LC(t,e);try{if(!Oi[t]){let i=await Uf(r);Oi[t]=i}return new sr(t,e)}catch(i){return console.log(`Error loading language [${r}] ${i.statusText}`),null}}function LC(t,e){if(/\.json$/.test(t))var r=t;else{var i="/locale/"+t+".json";/\/$/.test(e)&&(i=i.substr(1));var r=e+i}return r}function Kx(t,e){if(e.match(/%(\.(\d+))?f/)){var r=e.match(/%(\.(\d+))?f/),i=r[0];return r[2]&&(t=t.toFixed(r[2])),e.replace(i,t)}return e}sr.fallback={messages:{}};sr.DATE_FORMAT_TOKENS=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g;var Oi={en:{name:"English (built-in)",lang:"en",api:{wikipedia:"en"},messages:{loading:"Loading",wikipedia:"From Wikipedia, the free encyclopedia",error:"Error",return_to_title:"Return to Title",go_to_end:"Go to the last slide",loading_content:"Loading Content",loading_timeline:"Loading Timeline... ",swipe_to_navigate:"Swipe to Navigate<br><span class='tl-button'>OK</span>",zoom_in:"Zoom in",zoom_out:"Zoom out",unknown_read_err:"An unexpected error occurred trying to read your spreadsheet data",invalid_url_err:"Unable to read Timeline data. Make sure your URL is for a Google Spreadsheet or a Timeline JSON file.",network_err:"Unable to read your Google Spreadsheet. Make sure you have published it to the web.",missing_start_date_err:"Missing start_date",invalid_start_time_without_date:"Invalid configuration: time cannot be used without date.",invalid_end_time_without_date:"Invalid configuration: end time cannot be used without end date.",date_compare_err:"Can't compare timeline date objects on different scales",invalid_scale_err:"Invalid scale",invalid_date_err:"Invalid date: month, day and year must be numbers.",invalid_separator_error:"Invalid time: misuse of : or . as separator.",invalid_hour_err:"Invalid time (hour)",invalid_minute_err:"Invalid time (minute)",invalid_second_err:"Invalid time (second)",invalid_fractional_err:"Invalid time (fractional seconds)",invalid_second_fractional_err:"Invalid time (seconds and fractional seconds)",invalid_year_err:"Invalid year",flickr_notfound_err:"Photo not found or private",flickr_invalidurl_err:"Invalid Flickr URL",imgur_invalidurl_err:"Invalid Imgur URL",twitter_load_err:"Unable to load Tweet",twitterembed_invalidurl_err:"Invalid Twitter Embed url",wikipedia_load_err:"Unable to load Wikipedia entry",wikipedia_image_load_err:"Unable to load Wikipedia image data",spotify_invalid_url:"Invalid Spotify URL",invalid_rgb_err:"Invalid RGB argument",time_scale_scale_err:"Don't know how to get date from time for scale",axis_helper_no_options_err:"Axis helper must be configured with options",axis_helper_scale_err:"No AxisHelper available for scale",invalid_integer_option:"Invalid option value—must be a whole number.",instagram_bad_request:"Invalid or private Instagram URL",template_message_without_context:"Required variables not provided for template translation message",aria_label_timeline:"Timeline",aria_label_timeline_navigation:"Timeline navigation",aria_label_timeline_content:"Timeline content",aria_label_zoomin:"Show less than ${start} to ${end}",aria_label_zoomout:"Show more than ${start} to ${end}"},date:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],month_abbr:["Jan.","Feb.","March","April","May","June","July","Aug.","Sept.","Oct.","Nov.","Dec."],day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_abbr:["Sun.","Mon.","Tues.","Wed.","Thurs.","Fri.","Sat."]},era_labels:{positive_year:{prefix:"",suffix:""},negative_year:{prefix:"",suffix:"BCE"}},period_labels:{t:["a","p"],tt:["am","pm"],T:["A","P"],TT:["AM","PM"]},dateformats:{year:"yyyy",month_short:"mmm",month:"mmmm yyyy",full_short:"mmm d",full:"mmmm d',' yyyy",time:"h:MM:ss TT' <small>'mmmm d',' yyyy'</small>'",time_short:"h:MM:ss TT",time_no_seconds_short:"h:MM TT",time_no_minutes_short:"h TT",time_no_seconds_small_date:"h:MM TT' <small>'mmmm d',' yyyy'</small>'",time_milliseconds:"l",full_long:"mmm d',' yyyy 'at' h:MM TT",full_long_small_date:"h:MM TT' <small>mmm d',' yyyy'</small>'"},bigdateformats:{fallback:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]],compact:[[1e9,"%.2f bya"],[1e6,"%.1f mya"],[1e3,"%.1f kya"],[1,"%f years ago"]],verbose:[[1e9,"%.2f billion years ago"],[1e6,"%.1f million years ago"],[1e3,"%.1f thousand years ago"],[1,"%f years ago"]]}}};let v_=new sr;sr.fallback=v_;class ki{setLanguage(e){this.language=e}getLanguage(){if(this.language){if(typeof this.language=="object")return this.language;Fe(`I18NMixins.getLanguage: this.language should be object, but is ${typeof this.language}`)}return v_}_(e,r){return this.getLanguage()._(e,r)}}class $f{constructor(e,r,i){i&&this.setLanguage(i),this._el={parent:{},container:{},message_container:{},loading_icon:{},message:{}},this.options={width:600,height:600,message_class:"tl-message",message_icon_class:"tl-loading-icon"},this.container=e,tt(this.options,r),this._el.container=de("div",this.options.message_class),e&&(e.appendChild(this._el.container),this._el.parent=e),this.animator={},this._initLayout(),this._initEvents()}updateMessage(e){e?this._el.message.innerHTML=e:this._el.message.innerHTML=this._("loading"),!this._el.parent.atributes&&this.container.attributes&&(this.container.appendChild(this._el.container),this._el.parent=this.container)}updateDisplay(e,r){}_onMouseClick(){this.fire("clicked",this.options)}_onRemove(){this._el.parent={}}_initLayout(){this._el.message_container=de("div","tl-message-container",this._el.container),this._el.loading_icon=de("div",this.options.message_icon_class,this._el.message_container),this._el.message=de("div","tl-message-content",this._el.message_container),this.updateMessage()}_initEvents(){Ae.addListener(this._el.container,"click",this._onMouseClick,this),Ae.addListener(this,"removed",this._onRemove,this)}}En($f,ki,Tn,Si);function od(t,r){var r=r||"start_date";t.sort(function(i,s){return i[r].isBefore(s[r])?-1:i[r].isAfter(s[r])?1:0})}function Yx(t){var e={hour:null,minute:null,second:null,millisecond:null},r=null,i=t.match(/(\s*[AaPp]\.?[Mm]\.?\s*)$/);i&&(r=$n(i[0]),t=$n(t.substring(0,t.lastIndexOf(r))));var s=[],a=t.match(/^\s*(\d{1,2})(\d{2})\s*$/);if(a?s=a.slice(1):(s=t.split(":"),s.length==1&&(s=t.split("."))),s.length>4)throw new Ve("invalid_separator_error");let o=s[0];if(e.hour=parseInt(o),r&&r.toLowerCase()[0]=="p"&&e.hour!=12?e.hour+=12:r&&r.toLowerCase()[0]=="a"&&e.hour==12&&(e.hour=0),isNaN(e.hour)||e.hour<0||e.hour>23)throw new Ve("invalid_hour_err",o);if(s.length>1){let d=s[1];if(e.minute=parseInt(d),isNaN(e.minute))throw new Ve("invalid_minute_err",d)}if(s.length>2){var l=s[2].split(/[\.,]/);if(s=l.concat(s.slice(3)),s.length>2)throw new Ve("invalid_second_fractional_err");if(e.second=parseInt(s[0]),isNaN(e.second))throw new Ve("invalid_second_err",s[0]);if(s.length==2){var u=parseInt(s[1]);if(isNaN(u))throw new Ve("invalid_fractional_err",s[1]);e.millisecond=100*u}}return e}const x6=new RegExp("(^-?\\d+$|^$)");function Xx(t){try{return Object.keys(t).forEach(e=>{let r=t[e];if(r&&r.match&&!r.match(x6))throw`invalid value ${r} for ${e}`}),!0}catch{return!1}}const Qx={human:Bf,cosmological:zf};/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:OC,setPrototypeOf:Jx,isFrozen:E6,getPrototypeOf:T6,getOwnPropertyDescriptor:S6}=Object;let{freeze:_n,seal:cr,create:jC}=Object,{apply:ov,construct:lv}=typeof Reflect<"u"&&Reflect;_n||(_n=function(e){return e});cr||(cr=function(e){return e});ov||(ov=function(e,r,i){return e.apply(r,i)});lv||(lv=function(e,r){return new e(...r)});const ld=wn(Array.prototype.forEach),I6=wn(Array.prototype.lastIndexOf),Zx=wn(Array.prototype.pop),yl=wn(Array.prototype.push),k6=wn(Array.prototype.splice),Bd=wn(String.prototype.toLowerCase),hm=wn(String.prototype.toString),eE=wn(String.prototype.match),_l=wn(String.prototype.replace),C6=wn(String.prototype.indexOf),A6=wn(String.prototype.trim),yr=wn(Object.prototype.hasOwnProperty),mn=wn(RegExp.prototype.test),wl=P6(TypeError);function wn(t){return function(e){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return ov(t,e,i)}}function P6(t){return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return lv(t,r)}}function Re(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Bd;Jx&&Jx(t,null);let i=e.length;for(;i--;){let s=e[i];if(typeof s=="string"){const a=r(s);a!==s&&(E6(e)||(e[i]=a),s=a)}t[s]=!0}return t}function R6(t){for(let e=0;e<t.length;e++)yr(t,e)||(t[e]=null);return t}function zs(t){const e=jC(null);for(const[r,i]of OC(t))yr(t,r)&&(Array.isArray(i)?e[r]=R6(i):i&&typeof i=="object"&&i.constructor===Object?e[r]=zs(i):e[r]=i);return e}function bl(t,e){for(;t!==null;){const i=S6(t,e);if(i){if(i.get)return wn(i.get);if(typeof i.value=="function")return wn(i.value)}t=T6(t)}function r(){return null}return r}const tE=_n(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),fm=_n(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),pm=_n(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),D6=_n(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mm=_n(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),N6=_n(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),nE=_n(["#text"]),rE=_n(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),gm=_n(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),iE=_n(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ud=_n(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),M6=cr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),L6=cr(/<%[\w\W]*|[\w\W]*%>/gm),O6=cr(/\$\{[\w\W]*/gm),j6=cr(/^data-[\-\w.\u00B7-\uFFFF]+$/),V6=cr(/^aria-[\-\w]+$/),VC=cr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),F6=cr(/^(?:\w+script|data):/i),U6=cr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),FC=cr(/^html$/i),B6=cr(/^[a-z][.\w]*(-[.\w]+)+$/i);var sE=Object.freeze({__proto__:null,ARIA_ATTR:V6,ATTR_WHITESPACE:U6,CUSTOM_ELEMENT:B6,DATA_ATTR:j6,DOCTYPE_NAME:FC,ERB_EXPR:L6,IS_ALLOWED_URI:VC,IS_SCRIPT_OR_DATA:F6,MUSTACHE_EXPR:M6,TMPLIT_EXPR:O6});const xl={element:1,text:3,progressingInstruction:7,comment:8,document:9},z6=function(){return typeof window>"u"?null:window},$6=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const s="data-tt-policy-suffix";r&&r.hasAttribute(s)&&(i=r.getAttribute(s));const a="dompurify"+(i?"#"+i:"");try{return e.createPolicy(a,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},aE=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function UC(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:z6();const e=ve=>UC(ve);if(e.version="3.2.4",e.removed=[],!t||!t.document||t.document.nodeType!==xl.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const i=r,s=i.currentScript,{DocumentFragment:a,HTMLTemplateElement:o,Node:l,Element:u,NodeFilter:d,NamedNodeMap:h=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:g}=t,_=u.prototype,A=bl(_,"cloneNode"),P=bl(_,"remove"),S=bl(_,"nextSibling"),w=bl(_,"childNodes"),x=bl(_,"parentNode");if(typeof o=="function"){const ve=r.createElement("template");ve.content&&ve.content.ownerDocument&&(r=ve.content.ownerDocument)}let R,F="";const{implementation:V,createNodeIterator:N,createDocumentFragment:I,getElementsByTagName:y}=r,{importNode:b}=i;let T=aE();e.isSupported=typeof OC=="function"&&typeof x=="function"&&V&&V.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:O,ERB_EXPR:D,TMPLIT_EXPR:K,DATA_ATTR:ie,ARIA_ATTR:oe,IS_SCRIPT_OR_DATA:he,ATTR_WHITESPACE:q,CUSTOM_ELEMENT:Y}=sE;let{IS_ALLOWED_URI:se}=sE,re=null;const W=Re({},[...tE,...fm,...pm,...mm,...nE]);let H=null;const Q=Re({},[...rE,...gm,...iE,...ud]);let X=Object.seal(jC(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ue=null,ge=null,Oe=!0,Ne=!0,He=!1,We=!0,Qe=!1,qe=!0,Ke=!1,Ye=!1,C=!1,j=!1,U=!1,z=!1,Z=!0,ce=!1;const be="user-content-";let Ce=!0,Be=!1,Xe={},Ie=null;const Je=Re({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Pr=null;const hr=Re({},["audio","video","img","source","image","track"]);let ya=null;const yc=Re({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Rr="http://www.w3.org/1998/Math/MathML",ks="http://www.w3.org/2000/svg",Xn="http://www.w3.org/1999/xhtml";let Dr=Xn,Yo=!1,Xo=null;const Qo=Re({},[Rr,ks,Xn],hm);let Cs=Re({},["mi","mo","mn","ms","mtext"]),As=Re({},["annotation-xml"]);const Ps=Re({},["title","style","font","a","script"]);let Qr=null;const Jo=["application/xhtml+xml","text/html"],Jr="text/html";let St=null,fr=null;const _c=r.createElement("form"),Ci=function(B){return B instanceof RegExp||B instanceof Function},_a=function(){let B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(fr&&fr===B)){if((!B||typeof B!="object")&&(B={}),B=zs(B),Qr=Jo.indexOf(B.PARSER_MEDIA_TYPE)===-1?Jr:B.PARSER_MEDIA_TYPE,St=Qr==="application/xhtml+xml"?hm:Bd,re=yr(B,"ALLOWED_TAGS")?Re({},B.ALLOWED_TAGS,St):W,H=yr(B,"ALLOWED_ATTR")?Re({},B.ALLOWED_ATTR,St):Q,Xo=yr(B,"ALLOWED_NAMESPACES")?Re({},B.ALLOWED_NAMESPACES,hm):Qo,ya=yr(B,"ADD_URI_SAFE_ATTR")?Re(zs(yc),B.ADD_URI_SAFE_ATTR,St):yc,Pr=yr(B,"ADD_DATA_URI_TAGS")?Re(zs(hr),B.ADD_DATA_URI_TAGS,St):hr,Ie=yr(B,"FORBID_CONTENTS")?Re({},B.FORBID_CONTENTS,St):Je,ue=yr(B,"FORBID_TAGS")?Re({},B.FORBID_TAGS,St):{},ge=yr(B,"FORBID_ATTR")?Re({},B.FORBID_ATTR,St):{},Xe=yr(B,"USE_PROFILES")?B.USE_PROFILES:!1,Oe=B.ALLOW_ARIA_ATTR!==!1,Ne=B.ALLOW_DATA_ATTR!==!1,He=B.ALLOW_UNKNOWN_PROTOCOLS||!1,We=B.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Qe=B.SAFE_FOR_TEMPLATES||!1,qe=B.SAFE_FOR_XML!==!1,Ke=B.WHOLE_DOCUMENT||!1,j=B.RETURN_DOM||!1,U=B.RETURN_DOM_FRAGMENT||!1,z=B.RETURN_TRUSTED_TYPE||!1,C=B.FORCE_BODY||!1,Z=B.SANITIZE_DOM!==!1,ce=B.SANITIZE_NAMED_PROPS||!1,Ce=B.KEEP_CONTENT!==!1,Be=B.IN_PLACE||!1,se=B.ALLOWED_URI_REGEXP||VC,Dr=B.NAMESPACE||Xn,Cs=B.MATHML_TEXT_INTEGRATION_POINTS||Cs,As=B.HTML_INTEGRATION_POINTS||As,X=B.CUSTOM_ELEMENT_HANDLING||{},B.CUSTOM_ELEMENT_HANDLING&&Ci(B.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(X.tagNameCheck=B.CUSTOM_ELEMENT_HANDLING.tagNameCheck),B.CUSTOM_ELEMENT_HANDLING&&Ci(B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(X.attributeNameCheck=B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),B.CUSTOM_ELEMENT_HANDLING&&typeof B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(X.allowCustomizedBuiltInElements=B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Qe&&(Ne=!1),U&&(j=!0),Xe&&(re=Re({},nE),H=[],Xe.html===!0&&(Re(re,tE),Re(H,rE)),Xe.svg===!0&&(Re(re,fm),Re(H,gm),Re(H,ud)),Xe.svgFilters===!0&&(Re(re,pm),Re(H,gm),Re(H,ud)),Xe.mathMl===!0&&(Re(re,mm),Re(H,iE),Re(H,ud))),B.ADD_TAGS&&(re===W&&(re=zs(re)),Re(re,B.ADD_TAGS,St)),B.ADD_ATTR&&(H===Q&&(H=zs(H)),Re(H,B.ADD_ATTR,St)),B.ADD_URI_SAFE_ATTR&&Re(ya,B.ADD_URI_SAFE_ATTR,St),B.FORBID_CONTENTS&&(Ie===Je&&(Ie=zs(Ie)),Re(Ie,B.FORBID_CONTENTS,St)),Ce&&(re["#text"]=!0),Ke&&Re(re,["html","head","body"]),re.table&&(Re(re,["tbody"]),delete ue.tbody),B.TRUSTED_TYPES_POLICY){if(typeof B.TRUSTED_TYPES_POLICY.createHTML!="function")throw wl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof B.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw wl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');R=B.TRUSTED_TYPES_POLICY,F=R.createHTML("")}else R===void 0&&(R=$6(g,s)),R!==null&&typeof F=="string"&&(F=R.createHTML(""));_n&&_n(B),fr=B}},Ot=Re({},[...fm,...pm,...D6]),Zo=Re({},[...mm,...N6]),Rs=function(B){let te=x(B);(!te||!te.tagName)&&(te={namespaceURI:Dr,tagName:"template"});const me=Bd(B.tagName),it=Bd(te.tagName);return Xo[B.namespaceURI]?B.namespaceURI===ks?te.namespaceURI===Xn?me==="svg":te.namespaceURI===Rr?me==="svg"&&(it==="annotation-xml"||Cs[it]):!!Ot[me]:B.namespaceURI===Rr?te.namespaceURI===Xn?me==="math":te.namespaceURI===ks?me==="math"&&As[it]:!!Zo[me]:B.namespaceURI===Xn?te.namespaceURI===ks&&!As[it]||te.namespaceURI===Rr&&!Cs[it]?!1:!Zo[me]&&(Ps[me]||!Ot[me]):!!(Qr==="application/xhtml+xml"&&Xo[B.namespaceURI]):!1},rn=function(B){yl(e.removed,{element:B});try{x(B).removeChild(B)}catch{P(B)}},wa=function(B,te){try{yl(e.removed,{attribute:te.getAttributeNode(B),from:te})}catch{yl(e.removed,{attribute:null,from:te})}if(te.removeAttribute(B),B==="is")if(j||U)try{rn(te)}catch{}else try{te.setAttribute(B,"")}catch{}},wc=function(B){let te=null,me=null;if(C)B="<remove></remove>"+B;else{const xt=eE(B,/^[\r\n\t ]+/);me=xt&&xt[0]}Qr==="application/xhtml+xml"&&Dr===Xn&&(B='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+B+"</body></html>");const it=R?R.createHTML(B):B;if(Dr===Xn)try{te=new p().parseFromString(it,Qr)}catch{}if(!te||!te.documentElement){te=V.createDocument(Dr,"template",null);try{te.documentElement.innerHTML=Yo?F:it}catch{}}const jt=te.body||te.documentElement;return B&&me&&jt.insertBefore(r.createTextNode(me),jt.childNodes[0]||null),Dr===Xn?y.call(te,Ke?"html":"body")[0]:Ke?te.documentElement:jt},Zr=function(B){return N.call(B.ownerDocument||B,B,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},el=function(B){return B instanceof f&&(typeof B.nodeName!="string"||typeof B.textContent!="string"||typeof B.removeChild!="function"||!(B.attributes instanceof h)||typeof B.removeAttribute!="function"||typeof B.setAttribute!="function"||typeof B.namespaceURI!="string"||typeof B.insertBefore!="function"||typeof B.hasChildNodes!="function")},bc=function(B){return typeof l=="function"&&B instanceof l};function Sn(ve,B,te){ld(ve,me=>{me.call(e,B,te,fr)})}const tl=function(B){let te=null;if(Sn(T.beforeSanitizeElements,B,null),el(B))return rn(B),!0;const me=St(B.nodeName);if(Sn(T.uponSanitizeElement,B,{tagName:me,allowedTags:re}),B.hasChildNodes()&&!bc(B.firstElementChild)&&mn(/<[/\w]/g,B.innerHTML)&&mn(/<[/\w]/g,B.textContent)||B.nodeType===xl.progressingInstruction||qe&&B.nodeType===xl.comment&&mn(/<[/\w]/g,B.data))return rn(B),!0;if(!re[me]||ue[me]){if(!ue[me]&&Ds(me)&&(X.tagNameCheck instanceof RegExp&&mn(X.tagNameCheck,me)||X.tagNameCheck instanceof Function&&X.tagNameCheck(me)))return!1;if(Ce&&!Ie[me]){const it=x(B)||B.parentNode,jt=w(B)||B.childNodes;if(jt&&it){const xt=jt.length;for(let Ht=xt-1;Ht>=0;--Ht){const In=A(jt[Ht],!0);In.__removalCount=(B.__removalCount||0)+1,it.insertBefore(In,S(B))}}}return rn(B),!0}return B instanceof u&&!Rs(B)||(me==="noscript"||me==="noembed"||me==="noframes")&&mn(/<\/no(script|embed|frames)/i,B.innerHTML)?(rn(B),!0):(Qe&&B.nodeType===xl.text&&(te=B.textContent,ld([O,D,K],it=>{te=_l(te,it," ")}),B.textContent!==te&&(yl(e.removed,{element:B.cloneNode()}),B.textContent=te)),Sn(T.afterSanitizeElements,B,null),!1)},ba=function(B,te,me){if(Z&&(te==="id"||te==="name")&&(me in r||me in _c))return!1;if(!(Ne&&!ge[te]&&mn(ie,te))){if(!(Oe&&mn(oe,te))){if(!H[te]||ge[te]){if(!(Ds(B)&&(X.tagNameCheck instanceof RegExp&&mn(X.tagNameCheck,B)||X.tagNameCheck instanceof Function&&X.tagNameCheck(B))&&(X.attributeNameCheck instanceof RegExp&&mn(X.attributeNameCheck,te)||X.attributeNameCheck instanceof Function&&X.attributeNameCheck(te))||te==="is"&&X.allowCustomizedBuiltInElements&&(X.tagNameCheck instanceof RegExp&&mn(X.tagNameCheck,me)||X.tagNameCheck instanceof Function&&X.tagNameCheck(me))))return!1}else if(!ya[te]){if(!mn(se,_l(me,q,""))){if(!((te==="src"||te==="xlink:href"||te==="href")&&B!=="script"&&C6(me,"data:")===0&&Pr[B])){if(!(He&&!mn(he,_l(me,q,"")))){if(me)return!1}}}}}}return!0},Ds=function(B){return B!=="annotation-xml"&&eE(B,Y)},pr=function(B){Sn(T.beforeSanitizeAttributes,B,null);const{attributes:te}=B;if(!te||el(B))return;const me={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H,forceKeepAttr:void 0};let it=te.length;for(;it--;){const jt=te[it],{name:xt,namespaceURI:Ht,value:In}=jt,mr=St(xt);let gt=xt==="value"?In:A6(In);if(me.attrName=mr,me.attrValue=gt,me.keepAttr=!0,me.forceKeepAttr=void 0,Sn(T.uponSanitizeAttribute,B,me),gt=me.attrValue,ce&&(mr==="id"||mr==="name")&&(wa(xt,B),gt=be+gt),qe&&mn(/((--!?|])>)|<\/(style|title)/i,gt)){wa(xt,B);continue}if(me.forceKeepAttr||(wa(xt,B),!me.keepAttr))continue;if(!We&&mn(/\/>/i,gt)){wa(xt,B);continue}Qe&&ld([O,D,K],Ec=>{gt=_l(gt,Ec," ")});const xa=St(B.nodeName);if(ba(xa,mr,gt)){if(R&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!Ht)switch(g.getAttributeType(xa,mr)){case"TrustedHTML":{gt=R.createHTML(gt);break}case"TrustedScriptURL":{gt=R.createScriptURL(gt);break}}try{Ht?B.setAttributeNS(Ht,xt,gt):B.setAttribute(xt,gt),el(B)?rn(B):Zx(e.removed)}catch{}}}Sn(T.afterSanitizeAttributes,B,null)},xc=function ve(B){let te=null;const me=Zr(B);for(Sn(T.beforeSanitizeShadowDOM,B,null);te=me.nextNode();)Sn(T.uponSanitizeShadowNode,te,null),tl(te),pr(te),te.content instanceof a&&ve(te.content);Sn(T.afterSanitizeShadowDOM,B,null)};return e.sanitize=function(ve){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},te=null,me=null,it=null,jt=null;if(Yo=!ve,Yo&&(ve="<!-->"),typeof ve!="string"&&!bc(ve))if(typeof ve.toString=="function"){if(ve=ve.toString(),typeof ve!="string")throw wl("dirty is not a string, aborting")}else throw wl("toString is not a function");if(!e.isSupported)return ve;if(Ye||_a(B),e.removed=[],typeof ve=="string"&&(Be=!1),Be){if(ve.nodeName){const In=St(ve.nodeName);if(!re[In]||ue[In])throw wl("root node is forbidden and cannot be sanitized in-place")}}else if(ve instanceof l)te=wc("<!---->"),me=te.ownerDocument.importNode(ve,!0),me.nodeType===xl.element&&me.nodeName==="BODY"||me.nodeName==="HTML"?te=me:te.appendChild(me);else{if(!j&&!Qe&&!Ke&&ve.indexOf("<")===-1)return R&&z?R.createHTML(ve):ve;if(te=wc(ve),!te)return j?null:z?F:""}te&&C&&rn(te.firstChild);const xt=Zr(Be?ve:te);for(;it=xt.nextNode();)tl(it),pr(it),it.content instanceof a&&xc(it.content);if(Be)return ve;if(j){if(U)for(jt=I.call(te.ownerDocument);te.firstChild;)jt.appendChild(te.firstChild);else jt=te;return(H.shadowroot||H.shadowrootmode)&&(jt=b.call(i,jt,!0)),jt}let Ht=Ke?te.outerHTML:te.innerHTML;return Ke&&re["!doctype"]&&te.ownerDocument&&te.ownerDocument.doctype&&te.ownerDocument.doctype.name&&mn(FC,te.ownerDocument.doctype.name)&&(Ht="<!DOCTYPE "+te.ownerDocument.doctype.name+`>
`+Ht),Qe&&ld([O,D,K],In=>{Ht=_l(Ht,In," ")}),R&&z?R.createHTML(Ht):Ht},e.setConfig=function(){let ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};_a(ve),Ye=!0},e.clearConfig=function(){fr=null,Ye=!1},e.isValidAttribute=function(ve,B,te){fr||_a({});const me=St(ve),it=St(B);return ba(me,it,te)},e.addHook=function(ve,B){typeof B=="function"&&yl(T[ve],B)},e.removeHook=function(ve,B){if(B!==void 0){const te=I6(T[ve],B);return te===-1?void 0:k6(T[ve],te,1)[0]}return Zx(T[ve])},e.removeHooks=function(ve){T[ve]=[]},e.removeAllHooks=function(){T=aE()},e}var Hf=UC();const H6={text:["headline","text"],media:["caption","credit"]},W6={start_date:["display_date"],end_date:["display_date"],slide:["display_date","group"],date:["display_date"]};Hf.addHook("afterSanitizeAttributes",function(t){if(t.nodeName=="A"&&"href"in t){"target"in t.attributes||t.setAttribute("target","_blank");let e=t.attributes.rel;e?e.value.indexOf("noopener")==-1&&t.setAttribute("rel",`noopener ${e.value}`):t.setAttribute("rel","noopener")}});function oE(t,e,r){Object.keys(r).forEach(i=>{var s=i=="slide"?t:t[i];s&&r[i].forEach(a=>{typeof s[a]<"u"&&(s[a]=e(s[a]))})})}function q6(t){return Hf.sanitize(t,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder","target"]})}class Ws{constructor(e){if(this.title="",this.scale="",this.events=[],this.eras=[],this.event_dict={},this.messages={errors:[],warnings:[]},typeof e=="object"&&e.events){if(this.scale=e.scale,this.events=[],this._ensureValidScale(e.events),e.title){var r=this._assignID(e.title);this._tidyFields(e.title),this.title=e.title,this.event_dict[r]=this.title}for(var i=0;i<e.events.length;i++)try{this.addEvent(e.events[i],!0)}catch(s){this.logError(s)}e.eras&&e.eras.forEach((s,a)=>{try{this.addEra(s)}catch(o){this.logError("Era "+a+": "+o)}}),od(this.events),od(this.eras)}}logError(e){Fe(`logError: ${e}`),this.messages.errors.push(e)}getErrors(e){return e?this.messages.errors.join(e):this.messages.errors}validate(){(typeof this.events>"u"||typeof this.events.length>"u"||this.events.length==0)&&this.logError("Timeline configuration has no events.");for(var e=0;e<this.eras.length;e++)if(typeof this.eras[e].start_date>"u"||typeof this.eras[e].end_date>"u"){var r;this.eras[e].headline?r=this.eras[e].headline:r="era "+(e+1),this.logError("All eras must have start and end dates. ["+r+"]")}}isValid(){return this.messages.errors.length==0}addEvent(e,r){var i=this._assignID(e);return typeof e.start_date>"u"?(Fe("Missing start date, skipping event"),console.log(e),null):(this._processDates(e),this._tidyFields(e),this.events.push(e),this.event_dict[i]=e,r||od(this.events),i)}addEra(e){var r=this._assignID(e);if(typeof e.start_date>"u")throw new Ve("missing_start_date_err",r);this._processDates(e),this._tidyFields(e),this.eras.push({start_date:e.start_date,end_date:e.end_date,headline:e.text.headline})}_assignID(e){var r=e.unique_id;return $n(r)||(r=e.text?cm(e.text.headline):null),e.unique_id=s6(this.event_dict,r),e.unique_id}_makeUniqueIdentifiers(e,r){for(var i=[e],s=0;s<r.length;s++)$n(r[s].unique_id)&&(r[s].unique_id=cm(r[s].unique_id),i.indexOf(r[s].unique_id)==-1?i.push(r[s].unique_id):r[s].unique_id="");if(i.length!=r.length+1){for(var s=0;s<r.length;s++)if(!r[s].unique_id){var a=r[s].text?cm(r[s].text.headline):null;a||(a=oa(6)),i.indexOf(a)!=-1&&(a=a+"-"+s),i.push(a),r[s].unique_id=a}}}_ensureValidScale(e){if(!this.scale){this.scale="human";for(var r=0;r<e.length;r++){if(e[r].scale=="cosmological"){this.scale="cosmological";break}if(e[r].start_date&&typeof e[r].start_date.year<"u"){var i=new zf(e[r].start_date),s=i.data.date_obj.year;if(s<-271820||s>275759){this.scale="cosmological";break}}}Fe(`Determining scale dynamically: ${this.scale}`)}var a=Qx[this.scale];a||this.logError("Don't know how to process dates on scale "+this.scale)}_processDates(e){var r=Qx[this.scale];if(!(e.start_date instanceof r)){var i=e.start_date;if(e.start_date=new r(i),typeof e.end_date<"u"&&!(e.end_date instanceof r)){var s=e.end_date,a=!0;for(let o in i)a=a&&i[o]==s[o];a?(Fe("End date same as start date is redundant; dropping end date"),delete e.end_date):e.end_date=new r(s)}}}getEarliestDate(){var e=this.events[0].start_date;return this.eras&&this.eras.length>0&&this.eras[0].start_date.isBefore(e)?this.eras[0].start_date:e}getLatestDate(){for(var e=[],r=0;r<this.events.length;r++)this.events[r].end_date?e.push({date:this.events[r].end_date}):e.push({date:this.events[r].start_date});for(var r=0;r<this.eras.length;r++)this.eras[r].end_date?e.push({date:this.eras[r].end_date}):e.push({date:this.eras[r].start_date});return od(e,"date"),e.slice(-1)[0].date}_tidyFields(e){function r(i,s,a){a||(a=""),i.hasOwnProperty(s)||(i[s]=a)}e.group&&(e.group=$n(e.group)),e.text||(e.text={}),r(e.text,"text"),r(e.text,"headline"),oE(e,q6,H6),oE(e,g6,W6)}}function G6(t,e){return t==null?"":(e=e||`
`,t.charAt(t.length-e.length)!==e?t:t.substring(0,t.length-e.length))}async function K6(t){return new Promise((e,r)=>{if(t.data){var i=BC(zC(t.data,t),t);i.useMemoryStore=!0,e(i)}else t.url&&window.fetch(t.url,{mode:"cors"}).then(function(s){if(s.status!=200){s.headers.get("content-type")=="application/json"?s.text().then(a=>{r(JSON.parse(a))}):r({status_code:s.status,message:`Error fetching CSV: [${s.status} ${s.statusText}]`});return}return s.text?s.text():s}).then(function(s){if(s){var a=Q6(s,t);a.useMemoryStore=!0,e(a)}}).catch(s=>{r({status_code:500,message:`Error fetching CSV: ${s}`})})})}function BC(t,e){return e=e||{},e.noHeaderRow!==!0&&t.length>0?{fields:t[0].map((r,i)=>r&&r.trim?r.trim():`untitled${i}`),records:t.slice(1)}:{records:t}}function Y6(t){var e={delimiter:",",doublequote:!0,lineterminator:`
`,quotechar:'"',skipinitialspace:!0,skipinitialrows:0};for(var r in t)r==="trim"?e.skipinitialspace=t.trim:e[r.toLowerCase()]=t[r];return e}function zC(t,e){(!e||e&&!e.lineterminator)&&(t=X6(t,e));var r=Y6(e);t=G6(t,r.lineterminator);var i="",s=!1,a=!1,o="",l=[],u=[],d,h;for(h=function(f){return a!==!0&&(f===""?f=null:r.skipinitialspace===!0&&(f=f.trim())),f},d=0;d<t.length;d+=1)i=t.charAt(d),s===!1&&(i===r.delimiter||i===r.lineterminator)?(o=h(o),l.push(o),i===r.lineterminator&&(u.push(l),l=[]),o="",a=!1):i!==r.quotechar?o+=i:s?t.charAt(d+1)===r.quotechar?(o+=r.quotechar,d+=1):s=!1:(s=!0,a=!0);return o=h(o),l.push(o),u.push(l),r.skipinitialrows&&(u=u.slice(r.skipinitialrows)),u}function X6(t,e){return e&&!e.lineterminator?t.replace(/(\r\n|\n|\r)/gm,`
`):t}function Q6(t,e){let r=BC(zC(t,e)),i=[];return r.records.forEach(s=>{let a={};r.fields.forEach((o,l)=>a[o]=s[l]),i.push(a)}),i}function Pa(t){if(t)return t.replace(/[\s,]+/g,"")}function J6(t){let e={key:null,worksheet:0};var r=/\bkey=([-_A-Za-z0-9]+)&?/i,i=/docs.google.com\/spreadsheets(.*?)\/d\//;if(t.match(r))e.key=t.match(r)[1];else if(t.match(i)){var s=t.search(i)+t.match(i)[0].length,a=t.substr(s);e.key=a.split("/")[0],t.match(/\?gid=(\d+)/)&&(e.worksheet=t.match(/\?gid=(\d+)/)[1])}else t.match(/^\b[-_A-Za-z0-9]+$/)&&(e.key=t);return e.key?e:null}function Z6(t){return typeof t!="string"?"":t.match(/^(https?:)?\/\/?/)?{url:t}:{color:t}}function e5(t){let e={};Object.keys(t).forEach(i=>{e[i]=$n(t[i])});var r={media:{caption:e["Media Caption"]||"",credit:e["Media Credit"]||"",url:e.Media||"",thumbnail:e["Media Thumbnail"]||"",alt:e["Alt Text"]||""},text:{headline:e.Headline||"",text:e.Text||""},display_date:e["Display Date"]||"",group:e.Group||e.Tag||"",background:Z6(e.Background),type:e.Type||""};if(Object.keys(e).includes("Start Date")||Object.keys(e).includes("End Date"))e["Start Date"]&&(r.start_date=Wx(e["Start Date"])),e["End Date"]&&(r.end_date=Wx(e["End Date"]));else{if(e.Year&&(r.start_date={year:Pa(e.Year),month:Pa(e.Month)||"",day:Pa(e.Day)||""}),e["End Year"]&&(r.end_date={year:Pa(e["End Year"])||"",month:Pa(e["End Month"])||"",day:Pa(e["End Day"])||""}),e.Time)if(r.start_date)tt(r.start_date,Yx(e.Time));else throw new Ve("invalid_start_time_without_date");if(e["End Time"])if(r.end_date)tt(r.end_date,Yx(e["End Time"]));else throw new Ve("invalid_end_time_without_date");if(r.start_date&&!Xx(r.start_date))throw new Ve("invalid_date_err");if(r.end_date&&!Xx(r.end_date))throw new Ve("invalid_date_err")}return r}async function t5(t,e){let r=[];t=n5(t),await K6({url:`${e}${t}`}).then(s=>{r=s}).catch(s=>{if(s.proxy_err_code=="response_not_csv")throw new Ve("Timeline could not read the data for your timeline. Make sure you have published it to the web.");let a="undefined error";throw Array.isArray(s.message)?a=s.message.join("<br>"):a=String(s.message),new Ve(a)});let i={events:[],errors:[],warnings:[],eras:[]};return r.forEach((s,a)=>{try{if(!a6(s)){let o=e5(s);s5(o,i)}}catch(o){if(o.constructor==Ve)i.errors.push(o);else{o.message&&(o=o.message);let l=s.Headline||a;i.errors.push(o+`[${l}]`)}}}),i}function n5(t){if(t=t.trim(),t.match(/^[a-zA-Z0-9-_]+$/))return`https://docs.google.com/spreadsheets/d/${t}/pub?output=csv`;if(t.startsWith("https://docs.google.com/spreadsheets/")){if(t.match(/\/pub\?output=csv$/))return t;let e=new URL(t),r=new URLSearchParams(e.search);r.set("output","csv"),r.get("gid")&&r.set("single","true"),e.search=`?${r.toString()}`;let i=e.pathname.substr(0,e.pathname.lastIndexOf("/"));return e.pathname=`${i}/pub`,e.toString()}throw new Ve("invalid_url_err",t)}async function r5(t,e){if(!e.sheets_proxy)throw new Ve("Proxy option must be set to read data from Google");var r=await t5(t,e.sheets_proxy);if(r)return r}async function i5(t,e){let r=null,i={};if(typeof e=="function"?r=e:typeof e=="object"&&(i=e,r=e.callback,typeof i.callback=="function"&&(r=i.callback)),!r)throw new Ve("Second argument to makeConfig must be either a function or an object which includes a 'callback' property with a 'function' type value");var s,a,o=J6(t);if(o){try{a=await r5(t,i)}catch(u){s=new Ws,u.name=="NetworkError"?s.logError(new Ve("network_err")):u.name=="TLError"?s.logError(u):s.logError(new Ve("unknown_read_err",u.name)),r(s);return}if(s=new Ws(a),a.errors)for(var l=0;l<a.errors.length;l++)s.logError(a.errors[l]);r(s)}else Wo({url:t,dataType:"json",success:function(u){try{s=new Ws(u)}catch(d){s=new Ws,s.logError(d)}r(s)},error:function(u,d,h){if(s=new Ws,d=="parsererror")var h=new Ve("invalid_url_err");else var h=new Ve("unknown_read_err",d);s.logError(h),r(s)}})}function s5(t,e){var r="event";typeof t.type<"u"&&(r=t.type,delete t.type),r=="title"?e.title?(e.warnings.push("Multiple title slides detected."),e.events.push(t)):e.title=t:r=="era"?e.eras.push(t):e.events.push(t)}class a5{constructor(e){if(e)this.scale=e.scale,this.minor=e.minor,this.major=e.major;else throw new Ve("axis_helper_no_options_err")}getPixelsPerTick(e){return e*this.minor.factor}getMajorTicks(e){return this._getTicks(e,this.major)}getMinorTicks(e){return this._getTicks(e,this.minor)}_getTicks(e,r){for(var i=e._scaled_padding*r.factor,s=e._earliest-i,a=e._latest+i,o=[],l=s;l<a;l+=r.factor)o.push(e.getDateFromTime(l).floor(r.name));return{name:r.name,ticks:o}}}var uv={},$C=function(t,e){uv[t]=[];for(var r=0;r<e.length-1;r++){var i=e[r],s=e[r+1];uv[t].push(new a5({scale:i[3],minor:{name:i[0],factor:i[1]},major:{name:s[0],factor:s[1]}}))}};$C("human",jr);$C("cosmological",Ud);function o5(t,e){typeof e!="number"&&(e=100);var r=t.getScale(),i=uv[r];if(!i)throw new Ve("axis_helper_scale_err",r);for(var s=null,a=0;a<i.length;a++){var o=i[a],l=o.getPixelsPerTick(t._pixels_per_milli);if(l>e){if(s==null)return o;var u=Math.abs(e-l),d=Math.abs(e-l);return u<d?o:s}s=o}return i[i.length-1]}const l5={millisecond:"time_milliseconds",second:"time_short",minute:"time_no_seconds_short",hour:"time_no_minutes_short",day:"full_short",month:"month_short",year:"year",decade:"year",century:"year",millennium:"year",age:"compact",epoch:"compact",era:"compact",eon:"compact",eon2:"compact"};class lE{constructor(e,r){var i=e.events;this._scale=e.scale,r=tt({display_width:500,screen_multiplier:3,max_rows:null},r),this._display_width=r.display_width,this._screen_multiplier=r.screen_multiplier,this._pixel_width=this._screen_multiplier*this._display_width,this._group_labels=void 0,this._positions=[],this._pixels_per_milli=0,this._earliest=e.getEarliestDate().getTime(),this._latest=e.getLatestDate().getTime(),this._span_in_millis=this._latest-this._earliest,this._span_in_millis<=0&&(this._span_in_millis=this._computeDefaultSpan(e)),this._average=this._span_in_millis/i.length,this._pixels_per_milli=this.getPixelWidth()/this._span_in_millis,this._axis_helper=o5(this),this._scaled_padding=1/this.getPixelsPerTick()*(this._display_width/2),this._computePositionInfo(i,r.max_rows)}_computeDefaultSpan(e){if(e.scale=="human"){for(var r={},i=0;i<e.events.length;i++){var s=e.events[i].start_date.findBestFormat();r[s]=r[s]?r[s]+1:1}for(var i=jr.length-1;i>=0;i--)if(r.hasOwnProperty(jr[i][0])){var a=jr[jr.length-1];return jr[i+1]&&(a=jr[i+1]),a[1]}return 365*24*60*60*1e3}return 2e5}getGroupLabels(){return this._group_labels||[]}getScale(){return this._scale}getNumberOfRows(){return this._number_of_rows}getPixelWidth(){return this._pixel_width}getPosition(e){return(e-this._earliest)*this._pixels_per_milli}getPositionInfo(e){return this._positions[e]}getPixelsPerTick(){return this._axis_helper.getPixelsPerTick(this._pixels_per_milli)}getTicks(){return{major:this._axis_helper.getMajorTicks(this),minor:this._axis_helper.getMinorTicks(this)}}getDateFromTime(e){if(this._scale=="human")return new Bf(e);if(this._scale=="cosmological")return new zf(new Ru(e));throw new Ve("time_scale_scale_err",this._scale)}getMajorScale(){return this._axis_helper.major.name}getMinorScale(){return this._axis_helper.minor.name}_assessGroups(e){for(var r=[],i=!1,s=0;s<e.length;s++)e[s].group&&(r.indexOf(e[s].group)<0?r.push(e[s].group):i=!0);return r.length&&i&&r.push(""),r}_computeRowInfo(e,r){for(var i=[],s=0,a=0;a<e.length;a++){var o=e[a],l=[];delete o.row;for(var u=0;u<i.length;u++)if(l.push(i[u].end-o.start),l[u]<=0){o.row=u,i[u]=o;break}if(typeof o.row>"u")if(r===null)o.row=i.length,i.push(o);else if(r>0)o.row=i.length,i.push(o),r--;else{var d=Math.min.apply(null,l),h=l.indexOf(d);o.row=h,o.end>i[h].end&&(i[h]=o),s++}}return{n_rows:i.length,n_overlaps:s}}_computePositionInfo(e,r,i){i=i||100;for(var s=[],a=!1,o=0;o<e.length;o++){var l={start:this.getPosition(e[o].start_date.getTime())};if(this._positions.push(l),typeof e[o].end_date<"u"){var u=this.getPosition(e[o].end_date.getTime());l.width=u-l.start,l.width>i?l.end=l.start+l.width:l.end=l.start+i}else l.width=i,l.end=l.start+i;e[o].group?s.indexOf(e[o].group)<0&&s.push(e[o].group):a=!0}if(s.length){a&&s.push("");for(var h=[],o=0;o<s.length;o++)h[o]={label:s[o],idx:o,positions:[],n_rows:1,n_overlaps:0};for(var o=0;o<this._positions.length;o++){var l=this._positions[o];l.group=s.indexOf(e[o].group||""),l.row=0;for(var f=h[l.group],p=f.positions.length-1;p>=0;p--)f.positions[p].end>l.start&&f.n_overlaps++;f.positions.push(l)}for(var g=s.length;;){var _=Math.max(0,r-g);if(!_||(h.sort(function(w,x){return w.n_overlaps>x.n_overlaps?-1:w.n_overlaps<x.n_overlaps?1:w.idx-x.idx}),!h[0].n_overlaps))break;for(var g=0,o=0;o<h.length;o++){var f=h[o];if(f.n_overlaps&&_){var A=this._computeRowInfo(f.positions,f.n_rows+1);f.n_rows=A.n_rows,f.n_overlaps=A.n_overlaps,_--}g+=f.n_rows}}this._number_of_rows=g,this._group_labels=[],h.sort(function(S,w){return S.idx-w.idx});for(var o=0,P=0;o<h.length;o++){this._group_labels.push({label:h[o].label,rows:h[o].n_rows});for(var p=0;p<h[o].positions.length;p++){var l=h[o].positions[p];l.row+=P}P+=h[o].n_rows}}else{var d=this._computeRowInfo(this._positions,r);this._number_of_rows=d.n_rows}}getAxisTickDateFormat(e){return this._scale=="cosmological"?"compact":l5[e]}}class HC{constructor(e){this._el={parent:{},container:{},message:{}},this.options={width:600,height:600},this.data={label:"",rows:1},this._el.container=de("div","tl-timegroup"),tt(this.data,e),this.animator={},this._initLayout(),this._initEvents()}updateDisplay(e,r){}setRowPosition(e,r){this.options.height=r*this.data.rows,this.setPosition({top:e}),this._el.container.style.height=this.options.height+"px"}setAlternateRowColor(e,r){var i="tl-timegroup";e&&(i+=" tl-timegroup-alternate"),r&&(i+=" tl-timegroup-hidden"),this._el.container.className=i}_onMouseClick(){this.fire("clicked",this.options)}_initLayout(){this._el.message=de("div","tl-timegroup-message",this._el.container),this._el.message.innerHTML=this.data.label}_initEvents(){Ae.addListener(this._el.container,"click",this._onMouseClick,this)}_updateDisplay(e,r,i){}}En(HC,Tn,Si);class WC{constructor(e,r,i,s){this.start_date=e,this.end_date=r,this.headline=i,this._el={container:{},background:{},content_container:{},content:{},text:{}},this._text={},this._state={loaded:!1},this.options={duration:1e3,ease:Ff,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,tt(this.options,s),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(e){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.start_date.getTime()}getEndTime(){return this.end_date?this.end_date.getTime():!1}setHeight(e){var r=12,i=1;this._el.content_container.style.height=e+"px",this._el.content.className="tl-timeera-content",jf?(i=Math.floor(e/(r+2)),i<1&&(i=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=i):(i=e/r,i>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=i*r+"px")}setWidth(e){this.end_date&&(this._el.container.style.width=e+"px",e>this.options.marker_width_min?(this._el.content_container.style.width=e+"px",this._el.content_container.className="tl-timeera-content-container tl-timeera-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timeera-content-container"))}setClass(e){this._el.container.className=e}setRowPosition(e,r){this.setPosition({top:e}),r<56&&this._el.content_container.remove("tl-timeera-content-container-small")}setColor(e){this._el.container.className="tl-timeera tl-timeera-color"+e}_initLayout(){this._el.container=de("div","tl-timeera"),this.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timeera tl-timeera-with-end"),this._el.content_container=de("div","tl-timeera-content-container",this._el.container),this._el.background=de("div","tl-timeera-background",this._el.content_container),this._el.content=de("div","tl-timeera-content",this._el.content_container),this._el.text=de("div","tl-timeera-text",this._el.content),this._text=de("h2","tl-headline",this._el.text),this.headline&&this.headline!=""&&(this._text.innerHTML=ao(this.headline)),this.onLoaded()}_initEvents(){}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}En(WC,Tn,Si);function u5(t){const e=t.getBoundingClientRect();return e.left>=0&&e.right<=(window.innerWidth||document.documentElement.clientWidth)}class qC{constructor(e,r,i){i&&this.setLanguage(i),this._el={container:{},content_container:{},major:{},minor:{}},this._text={},this._state={loaded:!1},this.data={},this.options={duration:1e3,ease:Ff,width:600,height:600},this.active=!1,this.animator={},this.axis_helper={},this.minor_ticks=[],this.major_ticks=[],typeof e=="object"?this._el.container=e:this._el.container=ac(e),tt(this.options,r),this._initLayout(),this._initEvents()}show(){}hide(){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}getLeft(){return this._el.container.style.left.slice(0,-2)}drawTicks(e,r){var i=e.getTicks();this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor",this._el.major.style.opacity=0,this._el.minor.style.opacity=0,this.major_ticks=this._createTickElements(i.major.ticks,this._el.major,e.getAxisTickDateFormat(i.major.name)),this.minor_ticks=this._createTickElements(i.minor.ticks,this._el.minor,e.getAxisTickDateFormat(i.minor.name),i.major.ticks),this.positionTicks(e,r,!0),this._el.major.className="tl-timeaxis-major tl-animate-opacity tl-timeaxis-animate-opacity",this._el.minor.className="tl-timeaxis-minor tl-animate-opacity tl-timeaxis-animate-opacity",this._el.major.style.opacity=1,this._el.minor.style.opacity=1}_createTickElements(e,r,i,s){r.innerHTML="";var a={},o=new Date(-1,13,-30);if(a[o.getTime()]=!0,s)for(var l=0;l<s.length;l++)a[s[l].getTime()]=!0;for(var u=[],l=0;l<e.length;l++){var d=e[l];if(!(d.getTime()in a)){var h=de("div","tl-timeaxis-tick",r),f=de("span","tl-timeaxis-tick-text tl-animate-opacity",h);let g=d.getDisplayDate(this.getLanguage(),i);f.innerHTML=g,u.push({tick:h,tick_text:f,display_date:g,date:d})}}return u}positionTicks(e,r,i){i?(this._el.major.className="tl-timeaxis-major",this._el.minor.className="tl-timeaxis-minor"):(this._el.major.className="tl-timeaxis-major tl-timeaxis-animate",this._el.minor.className="tl-timeaxis-minor tl-timeaxis-animate"),this._positionTickArray(this.major_ticks,e,r),this._positionTickArray(this.minor_ticks,e,r)}_positionTickArray(e,r,i){if(e[1]&&e[0]){var s=r.getPosition(e[1].date.getMillisecond())-r.getPosition(e[0].date.getMillisecond()),a=1;s<i&&(a=Math.round(i/r.getPixelsPerTick()));for(var o=1,l=0;l<e.length;l++){var u=e[l];u.tick.style.left=r.getPosition(u.date.getMillisecond())+"px",u.tick_text.innerHTML=u.display_date,a>1?o>=a?(o=1,u.tick_text.style.opacity=1,u.tick.className="tl-timeaxis-tick"):(o++,u.tick_text.style.opacity=0,u.tick.className="tl-timeaxis-tick tl-timeaxis-tick-hidden"):(u.tick_text.style.opacity=1,u.tick.className="tl-timeaxis-tick")}}}getVisibleTicks(){return{major:this._getVisibleTickArray(this.major_ticks),minor:this._getVisibleTickArray(this.minor_ticks)}}_getVisibleTickArray(e){return e.filter(({tick:r})=>u5(r))}_initLayout(){this._el.content_container=de("div","tl-timeaxis-content-container",this._el.container),this._el.major=de("div","tl-timeaxis-major",this._el.content_container),this._el.minor=de("div","tl-timeaxis-minor",this._el.content_container),this.onLoaded()}_initEvents(){}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}En(qC,Tn,Si,ki);class GC{constructor(e,r,i){this._el={container:{},content_container:{},content:{},headline_container:{},headline:{},date:{}},this.options={title:!1},this.data={unique_id:"",headline:"headline",text:"text"},c6(this,e),tt(this.options,r),this._el.container=de("div","tl-text"),this._el.container.id=this.data.unique_id,this._initLayout(),i&&i.appendChild(this._el.container)}show(){}hide(){}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}headlineHeight(){return this._el.headline.offsetHeight+40}addDateText(e){this._el.date.innerHTML=e}onLoaded(){this.fire("loaded",this.data)}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){if(this._el.content_container=de("div","tl-text-content-container",this._el.container),this._el.headline_container=de("div","tl-text-headline-container",this._el.content_container),this.data.headline!=""){var e="tl-headline";this.options.title&&(e="tl-headline tl-headline-title"),this._el.headline=de("h2",e,this._el.headline_container),this._el.headline.innerHTML=this.data.headline}if(this._el.date=de("h3","tl-headline-date",this._el.headline_container),this.data.text!=""){var r="";r+=d6(this.options.autolink==!0?rv(this.data.text):this.data.text),this._el.content=de("div","tl-text-content",this._el.content_container),this._el.content.innerHTML=r}this.onLoaded()}}En(GC,Tn);class ht{constructor(e,r,i){i&&this.setLanguage(i),this._el={container:{},content_container:{},content:{},content_item:{},content_link:{},caption:null,credit:null,parent:{},link:null},this.player=null,this.timer=null,this.load_timer=null,this.message=null,this.media_id=null,this._state={loaded:!1,show_meta:!1,media_loaded:!1},this.data={unique_id:null,url:null,credit:null,caption:null,credit_alternate:null,caption_alternate:null,link:null,link_target:null},this.options={api_key_flickr:"bd3a7c45ddd52f3101825d41563a6125",api_key_googlemaps:"AIzaSyB9dW8e_iRrATFa8g24qB6BDBGdkrLDZYI",api_key_embedly:"",credit_height:0,caption_height:0,background:0},this.animator={},tt(this.options,r),tt(this.data,e),this.options.background||(this._el.container=de("div","tl-media"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._initLayout())}loadMedia(){var e=this;if(!this._state.loaded)try{this.load_timer=setTimeout(function(){e.loadingMessage(),e._loadMedia(),e._updateDisplay()},1200)}catch(r){Fe("Error loading media for ",this._media),Fe(r)}}_updateMessage(e){this.message&&this.message.updateMessage(e)}loadingMessage(){this._updateMessage(this._("loading")+" "+this.options.media_name)}errorMessage(e){e?e=this._("error")+": "+e:e=this._("error"),this._updateMessage(e)}updateMediaDisplay(e){this._state.loaded&&!this.options.background&&(ga?this._el.content_item.style.maxHeight=this.options.height/2+"px":this._el.content_item.style.maxHeight=this.options.height-this.options.credit_height-this.options.caption_height-30+"px",this._el.container.style.maxWidth=this.options.width+"px",Io&&this._el.content_item.offsetWidth>this._el.content_item.offsetHeight,this._updateMediaDisplay(e),this._state.media_loaded&&(this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")))}_loadMedia(){this.onLoaded()}_updateMediaDisplay(e){Io&&(this._el.content_item.style.maxWidth=this.options.width+"px",this._el.content_item.style.width="auto")}_getMeta(){}_getImageURL(e,r){return""}show(){}hide(){}addTo(e){e.appendChild(this._el.container),this.onAdd()}removeFrom(e){e.removeChild(this._el.container),this.onRemove()}getImageURL(e,r){return this._getImageURL(e,r)}updateDisplay(e,r,i){this._updateDisplay(e,r,i)}stopMedia(){try{this._stopMedia()}catch(e){Fe(`stopMedia() exception: ${e}`)}}loadErrorDisplay(e){try{this._el.content.removeChild(this._el.content_item)}catch{}this._el.content_item=de("div","tl-media-item tl-media-loaderror",this._el.content),this._el.content_item.innerHTML="<div class='tl-icon-"+this.options.media_type+"'></div><p>"+e+"</p>",this.onLoaded(!0)}onLoaded(e){this._state.loaded=!0,this.fire("loaded",this.data),this.message&&this.message.hide(),e||this.options.background||this.showMeta(),this.updateDisplay()}onMediaLoaded(e){this._state.media_loaded=!0,this.fire("media_loaded",this.data),this._el.credit&&(this._el.credit.style.width=this._el.content_item.offsetWidth+"px"),this._el.caption&&(this._el.caption.style.width=this._el.content_item.offsetWidth+"px")}showMeta(e,r){this._state.show_meta=!0,this.data.credit&&this.data.credit!=""&&(this._el.credit=de("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.options.autolink==!0?rv(this.data.credit):this.data.credit,this.options.credit_height=this._el.credit.offsetHeight),this.data.caption&&this.data.caption!=""&&(this._el.caption=de("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.options.autolink==!0?rv(this.data.caption):this.data.caption,this.options.caption_height=this._el.caption.offsetHeight),(!this.data.caption||!this.data.credit)&&this.getMeta()}getMeta(){this._getMeta()}updateMeta(){!this.data.credit&&this.data.credit_alternate&&(this._el.credit=de("div","tl-credit",this._el.content_container),this._el.credit.innerHTML=this.data.credit_alternate,this.options.credit_height=this._el.credit.offsetHeight),!this.data.caption&&this.data.caption_alternate&&(this._el.caption=de("div","tl-caption",this._el.content_container),this._el.caption.innerHTML=this.data.caption_alternate,this.options.caption_height=this._el.caption.offsetHeight),this.updateDisplay()}onAdd(){this.fire("added",this.data)}onRemove(){this.fire("removed",this.data)}_initLayout(){this.message=new $f(this._el.container,this.options,this.getLanguage()),this._el.content_container=de("div","tl-media-content-container",this._el.container),this.data.link&&this.data.link!=""?(this._el.link=de("a","tl-media-link",this._el.content_container),this._el.link.href=this.data.link,this.data.link_target&&this.data.link_target!=""?this._el.link.target=this.data.link_target:this._el.link.target="_blank",this._el.link.target=="_blank"&&this._el.link.setAttribute("rel","noopener"),this._el.content=de("div","tl-media-content",this._el.link)):this._el.content=de("div","tl-media-content",this._el.content_container)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r),i&&(this.options.layout=i),this._el.credit&&(this.options.credit_height=this._el.credit.offsetHeight),this._el.caption&&(this.options.caption_height=this._el.caption.offsetHeight+5),this.updateMediaDisplay(this.options.layout)}domCreate(...e){return de(...e)}_stopMedia(){}}En(ht,Tn,ki);let uE=class extends ht{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=this,r="tl-media-item tl-media-image tl-media-shadow";(this.data.url.match(/.png(\?.*)?$/)||this.data.url.match(/.svg(\?.*)?$/))&&(r="tl-media-item tl-media-image"),this._el.content_item=this.domCreate("img",r,this._el.content),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=ko(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=ko(this.data.caption)),this._el.content_item.addEventListener("load",function(i){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL()}getImageURL(e,r){return Vf(this.data.url)}_updateMediaDisplay(e){Io&&(this._el.content_item.style.width="auto")}};class c5{constructor(e){this.doc=e,this.pending={},this.queue={css:[],js:[]},this.styleSheets=e.styleSheets,this.env=this.getEnv(),this.head=this.doc.head||this.doc.getElementsByTagName("head")[0],this.pollCount=0}createNode(e,r){var i=this.doc.createElement(e),s;for(s in r)r.hasOwnProperty(s)&&i.setAttribute(s,r[s]);return i}finish(e){var r=this.pending[e],i,s;r&&(i=r.callback,s=r.urls,s.shift(),this.pollCount=0,s.length||(i&&i.call(r.context,r.obj),this.pending[e]=null,this.queue[e].length&&this.load(e)))}getEnv(){var e=navigator.userAgent,r={async:this.doc.createElement("script").async===!0};return(r.webkit=/AppleWebKit\//.test(e))||(r.ie=/MSIE/.test(e))||(r.opera=/Opera/.test(e))||(r.gecko=/Gecko\//.test(e))||(r.unknown=!0),r}load(e,r,i,s,a){var o=(function(){this.finish(e)}).bind(this),l=e==="css",u=[],d,h,f,p,g,_;if(r)if(r=typeof r=="string"?[r]:r.concat(),l||this.env.async||this.env.gecko||this.env.opera)this.queue[e].push({urls:r,callback:i,obj:s,context:a});else for(d=0,h=r.length;d<h;++d)this.queue[e].push({urls:[r[d]],callback:d===h-1?i:null,obj:s,context:a});if(!(this.pending[e]||!(p=this.pending[e]=this.queue[e].shift()))){for(g=p.urls,d=0,h=g.length;d<h;++d)_=g[d],l?f=this.env.gecko?this.createNode("style"):this.createNode("link",{href:_,rel:"stylesheet"}):(f=this.createNode("script",{src:_}),f.async=!1),f.className="lazyload",f.setAttribute("charset","utf-8"),this.env.ie&&!l?f.onreadystatechange=function(){/loaded|complete/.test(f.readyState)&&(f.onreadystatechange=null,o())}:l&&(this.env.gecko||this.env.webkit)?this.env.webkit?(p.urls[d]=f.href,this.pollWebKit()):(f.innerHTML='@import "'+_+'";',this.pollGecko(f)):f.onload=f.onerror=o,u.push(f);for(d=0,h=u.length;d<h;++d)this.head.appendChild(u[d])}}pollGecko(e){var r;try{r=!!e.sheet.cssRules}catch{if(this.pollCount+=1,this.pollCount<200){var i=this;setTimeout(function(){i.pollGecko(e)},50)}else r&&this.finish("css");return}this.finish("css")}pollWebKit(){var e=this.pending.css,r;if(e){for(r=this.styleSheets.length;--r>=0;)if(this.styleSheets[r].href===e.urls[0]){this.finish("css");break}this.pollCount+=1,e&&(this.pollCount<200?setTimeout(this.pollWebKit.bind(this),50):this.finish("css"))}}css(e,r,i,s){this.load("css",e,r,i,s)}js(e,r,i,s){this.load("js",e,r,i,s)}}function la(t,e,r,i){KC.js(t,e,r,i)}function vm(t,e,r,i){KC.css(t,e,r,i)}let KC=new c5(document);class d5 extends ht{_loadMedia(){var e=this,r;this.youtube_loaded=!1,this._el.content_item=this.domCreate("div","tl-media-item tl-media-youtube tl-media-shadow",this._el.content),this._el.content_item.id=oa(7),r=h6(this.data.url),this.media_id={},this.data.url.match("v=")?this.media_id.id=r.v:this.data.url.match("/embed/")?this.media_id.id=this.data.url.split("embed/")[1].split(/[?&]/)[0]:this.data.url.match(/v\/|v=|youtu\.be\//)?this.media_id.id=this.data.url.split(/v\/|v=|youtu\.be\//)[1].split(/[?&]/)[0]:Fe("YOUTUBE IN URL BUT NOT A VALID VIDEO"),this.data.url.match("start=")?this.media_id.start=dm(this.data.url.split("start=")[1]):this.data.url.match("t=")&&(this.media_id.start=dm(this.data.url.split("t=")[1])),this.data.url.match("end=")&&(this.media_id.end=dm(this.data.url.split("end=")[1])),this.media_id.hd=typeof r.hd<"u",la("https://www.youtube.com/iframe_api",function(){e.createMedia()})}_updateMediaDisplay(){this._el.content_item.style.height=va.r16_9({w:this.options.width})+"px",this._el.content_item.style.width=this.options.width+"px"}_stopMedia(){if(this.youtube_loaded)try{this.player.getPlayerState()==YT.PlayerState.PLAYING&&this.player.pauseVideo()}catch(e){Fe(e)}}createMedia(){var e=this;clearTimeout(this.timer),typeof YT<"u"&&typeof YT.Player<"u"?this.player=new YT.Player(this._el.content_item.id,{playerVars:{enablejsapi:1,color:"white",controls:1,start:this.media_id.start,end:this.media_id.end,fs:1},videoId:this.media_id.id,events:{onReady:function(){e.onPlayerReady(),e.onLoaded()},onStateChange:e.onStateChange}}):this.timer=setTimeout(function(){e.createMedia()},1e3)}onPlayerReady(e){this.youtube_loaded=!0,this._el.content_item=document.getElementById(this._el.content_item.id),this.onMediaLoaded()}onStateChange(e){e.data==YT.PlayerState.ENDED&&(e.target.seekTo(0),e.target.pauseVideo())}}class h5 extends ht{_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-map tl-media-shadow",this._el.content),this.media_id=this.data.url,this.mapframe=this.domCreate("iframe","",this._el.content_item),this.mapframe.width="100%",this.mapframe.height="100%",this.mapframe.frameBorder="0",this.mapframe.src=this.makeGoogleMapsEmbedURL(this.media_id,this.options.api_key_googlemaps),this.onLoaded()}_updateMediaDisplay(){if(this._state.loaded){var e=va.square({w:this._el.content_item.offsetWidth});this._el.content_item.style.height=e.h+"px"}}makeGoogleMapsEmbedURL(e,r){var i=!1;function s(f){function p(A,P){if(A.slice(-1)=="z")P.zoom=A;else if(A.slice(-1)=="m")P.zoom=14,P.maptype="satellite";else if(A.slice(-1)=="t"){if(i=!0,_=="place")var S=f.match(h.place)[3]+","+f.match(h.place)[4];else{var S=P.center;delete P.center}P={},P.location=S,streetview_params=A.split(",");for(let x in a.streetview){var w=parseInt(x)+1;a.streetview[x]=="pitch"&&streetview_params[w]=="90t"?P[a.streetview[x]]=0:P[a.streetview[x]]=streetview_params[w].slice(0,-1)}}return P}function g(A,P){var S={},w=P[1],x=P[P.length-1];for(let F in a[A]){var R=parseInt(F)+2;a[A][F]=="center"?S[a[A][F]]=P[R]+","+P[++R]:S[a[A][F]]=P[R]}return S=p(x,S),S.key=r,i==!0&&(A="streetview"),w+"/embed/v1/"+A+f6(S)}let _="view";return f.match(h.place)?_="place":f.match(h.directions)?_="directions":f.match(h.search)&&(_="search"),g(_,f.match(h[_]))}var a={view:["center"],place:["q","center"],directions:["origin","destination","center"],search:["q","center"],streetview:["fov","heading","pitch"]},o=/(https:\/\/.+google.+?\/maps)/,l=/@([-\d.]+),([-\d.]+)/,u=/([\w\W]+)/,d=/,((?:[-\d.]+[zmayht],?)*)/,h={view:new RegExp(o.source+"/"+l.source+d.source),place:new RegExp(o.source+"/place/"+u.source+"/"+l.source+d.source),directions:new RegExp(o.source+"/dir/"+u.source+"/"+u.source+"/"+l.source+d.source),search:new RegExp(o.source+"/search/"+u.source+"/"+l.source+d.source)};return s(e)}}class f5 extends ht{constructor(e,r,i){super(e,r,i),this.blockquote=Hf.sanitize(this.data.url)}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-blockquote",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this._el.content_item.innerHTML=this.blockquote,this.onLoaded()}updateMediaDisplay(){}}class p5 extends ht{_loadMedia(){var e,r,i=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-wikipedia",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.media_id=this.data.url.split("wiki/")[1].split("#")[0].replace("_"," "),this.media_id=this.media_id.replace(" ","%20"),r=this.data.url.split("//")[1].split(".wikipedia")[0],e="https://"+r+".wikipedia.org/w/api.php?action=query&prop=extracts|pageimages&redirects=&titles="+this.media_id+"&exintro=1&format=json&callback=?",Wo({type:"GET",url:e,dataType:"json",success:function(s){i.createMedia(s)},error:function(s,a){var o="";o+=i._("wikipedia_load_err")+"<br/>"+i.media_id+"<br/>"+a,i.loadErrorDisplay(o)}})}createMedia(e){var r="";if(e.query){var i="",r={entry:{},title:"",text:"",extract:"",paragraphs:1,page_image:"",text_array:[]};r.entry=p6(e.query.pages,0),r.extract=r.entry.extract,r.title=r.entry.title,r.page_image=r.entry.thumbnail,r.extract.match("<p>")?r.text_array=r.extract.split("<p>"):r.text_array.push(r.extract);for(var s=0;s<r.text_array.length;s++)s+1<=r.paragraphs&&s+1<r.text_array.length&&(r.text+="<p>"+r.text_array[s+1]);i+="<span class='tl-icon-wikipedia'></span>",i+="<div class='tl-wikipedia-title'><h4><a href='"+this.data.url+"' target='_blank' rel='noopener'>"+r.title+"</a></h4>",i+="<span class='tl-wikipedia-source'>"+this._("wikipedia")+"</span></div>",r.page_image,i+=r.text,r.extract.match("REDIRECT")||(this._el.content_item.innerHTML=i,this.onLoaded())}}updateMediaDisplay(){}}function m5(t){if(t.match(/^.+#\/media\/.+/))return`File:${t.split("#")[1].split(":")[1]}`;if(t.match(/^.*commons.wikimedia.org\/wiki\/File:.+/)){let e=t.split("/");return e[e.length-1]}return null}function g5(t){let e={};if(t.query&&t.query.pages){let r=Object.keys(t.query.pages);e.page_id=r[0];let i=t.query.pages[e.page_id];e.url=i.imageinfo[0].thumburl,i.entityterms&&i.entityterms.label&&(e.label=i.entityterms.label[0])}return e}class cE extends ht{_loadMedia(){var e,r=Math.round(this.options.width)||1e3,i=this.getLanguage().lang.toLowerCase(),s=this;try{this.establishMediaID(),e=`https://commons.wikimedia.org/w/api.php?action=query&titles=${this.media_id}&prop=imageinfo|entityterms&iiprop=url&&iiurlwidth=${r}&format=json&origin=*&wbetlanguage=${i}`,Vh(e,function(a){let o=g5(a);o.url?(s.base_image_url=o.url,s.page_id=o.page_id,!s.data.alt&&o.label&&(s.data.alt=o.label),s.options.background||s.createMedia(),s.onLoaded()):s.loadErrorDisplay(s._("wikipedia_image_load_err"))})}catch(a){s.loadErrorDisplay(s._(a.message_key))}}establishMediaID(){let e=m5(this.data.url);if(e)this.media_id=e;else throw new Ve("Invalid Wikipedia Image URL")}createMedia(){var e=this;if(this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-wikipedia-image tl-media-shadow",this._el.content),this.data.alt)this._el.content_item.alt=this.data.alt;else if(this.page_id){let r=`M${this.page_id}`,i=`https://commons.wikimedia.org/w/api.php?action=wbgetentities&format=json&ids=${r}&format=json&origin=*`;Uf(i).then(s=>{if(s.entities&&s.entities[r]){let a=s.entities[r].labels,o=e.getLanguage().lang.toLowerCase(),l=null;a[o]?l=a[o]:o.length>2&&a[o.substr(0,2)]?l=a[o.substr(0,2)]:a.en&&(l=a.en),l?(console.log(`wikibase_id: ${e.media_id} alt ${l.value}`),e.data.alt=l.value,e._el.content_item.alt=e.data.alt):console.log(`wikibase_id: ${e.media_id} ain't got no alt`)}})}this.data.title&&(this._el.content_item.title=this.data.title),this._el.content_item.addEventListener("load",function(r){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}_getImageURL(e,r){if(e&&this.base_image_url){let i=this.base_image_url.match(/(\/[\d\.]+px-)/);if(i)return e=Math.round(e),this.base_image_url.replace(i[1],`/${e}px-`)}return this.base_image_url}}class v5 extends ht{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-soundcloud tl-media-shadow",this._el.content),this.media_id=this.data.url,e="https://soundcloud.com/oembed?url="+this.media_id+"&format=js&callback=?",Vh(e,function(i){la("https://w.soundcloud.com/player/api.js",function(){r.createMedia(i)})})}createMedia(e){this._el.content_item.innerHTML=e.html,self.widget=SC.Widget(this._el.content_item.querySelector("iframe")),this.soundCloudCreated=!0,this.onLoaded()}_stopMedia(){this.soundCloudCreated&&self.widget.pause()}}class y5 extends ht{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vimeo tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/video\/|\/\/vimeo\.com\//)[1].split(/[?&]/)[0];var i=null;this.data.url.match(/#t=([^&]+).*/)&&(i=this.data.url.match(/#t=([^&]+).*/)[1]),e="https://player.vimeo.com/video/"+this.media_id+"?api=1&title=0&amp;byline=0&amp;portrait=0&amp;color=ffffff",i&&(e=e+="&amp;#t="+i),this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(s){r.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=va.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player&&this.player.contentWindow&&this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(e){Fe(e)}}}class _5 extends ht{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-dailymotion",this._el.content),this.data.url.indexOf("dai.ly/")!=-1?this.media_id=this.data.url.substr(this.data.url.indexOf("dai.ly/")+7):this.data.url.match("video")?this.media_id=this.data.url.split("video/")[1].split(/[?&]/)[0]:this.media_id=this.data.url.split("embed/")[1].split(/[?&]/)[0],this.media_id.indexOf("_")!=-1&&(this.media_id=this.media_id.split("_")[0]),e="https://www.dailymotion.com/embed/video/"+this.media_id+"?api=postMessage",this._el.content_item.innerHTML="<iframe autostart='false' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._state.loaded&&(this._el.content_item.style.height=va.r16_9({w:this._el.content_item.offsetWidth})+"px")}_stopMedia(){this._state.loaded&&this._el.content_item.querySelector("iframe").contentWindow.postMessage('{"command":"pause","parameters":[]}',"*")}}class w5 extends ht{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-vine tl-media-shadow",this._el.content),this.media_id=this.data.url.split("vine.co/v/")[1],e="https://vine.co/v/"+this.media_id+"/embed/simple",this._el.content_item.innerHTML="<iframe frameborder='0' width='100%' height='100%' src='"+e+"'></iframe><script async src='https://platform.vine.co/static/scripts/embed.js' charset='utf-8'><\/script>",this.onLoaded()}_updateMediaDisplay(){var e=va.square({w:this._el.content_item.offsetWidth,h:this.options.height});this._el.content_item.style.height=e.h+"px"}_stopMedia(){this._el.content_item.querySelector("iframe").contentWindow.postMessage("pause","*")}}class b5 extends ht{_loadMedia(){var e,r=this;if(this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text",this.data.url.match("^(https?:)?/*(www.)?(twitter|x).com"))this.data.url.match("status/")?this.media_id=this.data.url.split("status/")[1]:this.data.url.match("statuses/")?this.media_id=this.data.url.split("statuses/")[1]:this.media_id="";else if(this.data.url.match(`<blockquote class=['"]twitter-tweet['"]`)){var i=this.data.url.match(/(status|statuses)\/(\d+)/);if(i&&i.length>2)this.media_id=i[2];else{r.loadErrorDisplay(r._("twitterembed_invalidurl_err"));return}}e="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",Wo({type:"GET",url:e,dataType:"json",success:function(s){r.createMedia(s)},error:function(s,a){var o="";o+=r._("twitter_load_err")+"<br/>"+r.media_id+"<br/>"+a,r.loadErrorDisplay(o)}})}createMedia(e){var r="",i="",s="",a="",o="",l="",u=this;i=e.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=e.author_url.split("twitter.com/")[1],a=e.html.split("</p>&mdash;")[1].split('<a href="')[1],o=a.split('">')[0],l=a.split('">')[1].split("</a>")[0],i=i.replace(/<a href/ig,'<a target="_blank" rel="noopener" href'),i.includes("pic.twitter.com")||i.includes("pic.x.com")?(la("https://platform.twitter.com/widgets.js",function(){twttr.widgets.createTweet(u.media_id,u._el.content_item,{conversation:"none",linkColor:"#cc0000",theme:"light"})}),this.onLoaded()):(r+=i,r+="<div class='vcard'>",r+="<a href='"+o+"' class='twitter-date' rel='noopener' target='_blank'>"+l+"</a>",r+="<img src='' class='tl-media-item tl-media-image'></a>",r+="<div class='author'>",r+="<a class='screen-name url' href='"+e.author_url+"' rel='noopener' target='_blank'>",r+="<span class='avatar'></span>",r+="<span class='fn'>"+e.author_name+" <span class='tl-icon-twitter'></span></span>",r+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",r+="</a>",r+="</div>",r+="</div>",this._el.content_item.innerHTML=r,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class x5 extends ht{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-twitter",this._el.content),this._el.content_container.className="tl-media-content-container tl-media-content-container-text";var i=this.data.url.match(/(status|statuses)\/(\d+)/);if(i&&i.length>2)this.media_id=i[2];else{r.loadErrorDisplay(r._("twitterembed_invalidurl_err"));return}e="https://api.twitter.com/1/statuses/oembed.json?id="+this.media_id+"&omit_script=true&include_entities=true&callback=?",window.twttr=function(s,a,o){var l,u=s.getElementsByTagName(a)[0],d=window.twttr||{};return s.getElementById(o)||(l=s.createElement(a),l.id=o,l.src="https://platform.twitter.com/widgets.js",u.parentNode.insertBefore(l,u),d._e=[],d.ready=function(h){d._e.push(h)}),d}(document,"script","twitter-wjs"),Wo({type:"GET",url:e,dataType:"json",success(s){r.createMedia(s)},error:function(s,a){var o="";o+=r._("twitter_load_err")+"<br/>"+r.media_id+"<br/>"+a,r.loadErrorDisplay(o)}})}createMedia(e){var r="",i="",s="",a="",o="",l="";i=e.html.split("</p>&mdash;")[0]+"</p></blockquote>",s=e.author_url.split("twitter.com/")[1],a=e.html.split("</p>&mdash;")[1].split('<a href="')[1],o=a.split('">')[0],l=a.split('">')[1].split("</a>")[0],i=i.replace(/<a href/ig,'<a target="_blank" rel="noopener" href');let u=this.media_id;i.includes("pic.twitter.com")?(twttr.ready(function(d){r=document.getElementsByClassName("tl-media-twitter")[0];var h=String(u);twttr.widgets.createTweet(h,r,{conversation:"none",linkColor:"#cc0000",theme:"light"}).then(function(f){this.onLoaded()})}),this._el.content_item.innerHTML=r,this.onLoaded()):(r+=i,r+="<div class='vcard'>",r+="<a href='"+o+"' class='twitter-date' rel='noopener' target='_blank'>"+l+"</a>",r+="<div class='author'>",r+="<a class='screen-name url' href='"+e.author_url+"' rel='noopener' target='_blank'>",r+="<span class='avatar'></span>",r+="<span class='fn'>"+e.author_name+" <span class='tl-icon-twitter'></span></span>",r+="<span class='nickname'>@"+s+"<span class='thumbnail-inline'></span></span>",r+="</a>",r+="</div>",r+="</div>",this._el.content_item.innerHTML=r,this.onLoaded())}updateMediaDisplay(){}_updateMediaDisplay(){}}class dE extends ht{_loadMedia(){var e,r=this;try{this.establishMediaID(),e="https://api.flickr.com/services/rest/?method=flickr.photos.getSizes&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",Vh(e,function(i){i.stat=="ok"?(r.sizes=i.sizes.size,r.options.background||r.createMedia(),r.onLoaded()):r.loadErrorDisplay(r._("flickr_notfound_err"))})}catch(i){r.loadErrorDisplay(r._(i.message_key))}}establishMediaID(){if(this.data.url.match(/flic.kr\/.+/i)){var e=this.data.url.split("/").slice(-1)[0];this.media_id=m6.decode(e)}else{var r="flickr.com/photos/",i=this.data.url.indexOf(r);if(i==-1)throw new Ve("flickr_invalidurl_err");var s=i+r.length;this.media_id=this.data.url.substr(s).split("/")[1]}}createMedia(){var e=this;this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-flickr tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=ko(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=ko(this.data.caption)),this._el.content_item.addEventListener("load",function(r){e.onMediaLoaded()}),this._el.content_item.src=this.getImageURL(this.options.width,this.options.height)}getImageURL(e,r){for(var i=this.size_label(r),s=this.sizes[this.sizes.length-2].source,a=0;a<this.sizes.length;a++)this.sizes[a].label==i&&(s=this.sizes[a].source);return s}_getMeta(){var e=this,r;r="https://api.flickr.com/services/rest/?method=flickr.photos.getInfo&api_key="+this.options.api_key_flickr+"&photo_id="+this.media_id+"&format=json&jsoncallback=?",Vh(r,function(i){e.data.credit_alternate="<a href='"+e.data.url+"' target='_blank' rel='noopener'>"+i.photo.owner.realname+"</a>",e.data.caption_alternate=i.photo.title._content+" "+i.photo.description._content,e.updateMeta()})}size_label(e){var r="";return e<=75?e<=0?r="Large":r="Thumbnail":e<=180?r="Small":e<=240?r="Small 320":e<=375?r="Medium":e<=480?r="Medium 640":(e<=600,r="Large"),r}}class E5 extends ht{_loadMedia(){var e=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-documentcloud tl-media-shadow",this._el.content),this._el.content_item.id=oa(7),this.data.url.match(/\.html$/)?this.data.url=this._transformURL(this.data.url):this.data.url.match(/.(json|js)$/)||Fe("DOCUMENT CLOUD IN URL BUT INVALID SUFFIX"),la(["https://assets.documentcloud.org/viewer/loader.js","https://assets.documentcloud.org/viewer/viewer.js"],function(){e.createMedia()})}_transformURL(e){return e.replace(/(.*)\.html$/,"$1.js")}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}createMedia(){DV.load(this.data.url,{container:"#"+this._el.content_item.id,showSidebar:!1}),this.onLoaded()}}const T5="830b21071290df4f81a35c56abbea096",S5="704270473831239",I5=`${S5}|${T5}`,hE=`https://graph.facebook.com/v8.0/instagram_oembed?access_token=${I5}&fields=html,thumbnail_url,author_name&url=`;function k5(t){this.oembed_response=t,this._el.content_link=this.domCreate("a","",this._el.content),this._el.content_link.href=this.data.url,this._el.content_link.target="_blank",this._el.content_link.setAttribute("rel","noopener"),this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-instagram tl-media-shadow",this._el.content_link),this.data.alt?this._el.content_item.alt=this.data.alt:this.data.caption&&(this._el.content_item.alt=ko(this.data.caption)),this.data.title?this._el.content_item.title=this.data.title:this.data.caption&&(this._el.content_item.title=ko(this.data.caption)),this._el.content_item.addEventListener("load",(function(e){this.onMediaLoaded()}).bind(this)),this._el.content_item.src=t.thumbnail_url,this.onLoaded()}function C5(t){let e=`${t.statusText} [${t.status}]`;t.status==400&&(e=this._("instagram_bad_request")),this.loadErrorDisplay(e)}class A5 extends ht{_loadMedia(){this.media_id=this.data.url.split("/p/")[1].split("/")[0],this.options.background||this.createMedia()}createMedia(){this.oembed_response=null;let e=`${hE}${this.data.url}`;try{Wo({url:e,dataType:"json",success:k5,error:C5,context:this})}catch(r){console.log(`Instagram: error fetching ${e}`),console.log(r);debugger}}getImageURL(){if(this.oembed_response&&this.oembed_response.thumbnail_url)return this.oembed_response.thumbnail_url;Uf(`${hE}${this.data.url}`).then(e=>e.thumbnail_url).catch(e=>{Fe(`Instagram getImageURL Error: ${e.status} ${e.statusText}`)})}_getMeta(){this.oembed_response&&this.oembed_response.author_name&&(this.data.credit_alternate=`Instagram: <a href="https://instagram.com/${this.oembed_response.author_name}" target="_blank">@${this.oembed_response.author_name}</a>`),this.updateMeta()}sizes(e){var r="";return e<=150?r="t":e<=306?r="m":r="l",r}}class P5 extends ht{_loadMedia(){this._el.content_item=this.domCreate("img","tl-media-item tl-media-image tl-media-profile tl-media-shadow",this._el.content),this._el.content_item.src=this.data.url,this.onLoaded()}_updateMediaDisplay(e){Io&&(this._el.content_item.style.maxWidth=this.options.width/2-40+"px")}}class R5 extends ht{_loadMedia(){var e;if(this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this.data.url.match(/open\?id=([^&]+)/)){var r=this.data.url.match(/open\?id=([^&]+)/)[1];e="https://drive.google.com/file/d/"+r+"/preview"}else if(this.data.url.match(/file\/d\/([^/]*)\/?/)){var r=this.data.url.match(/file\/d\/([^/]*)\/?/)[1];e="https://drive.google.com/file/d/"+r+"/preview"}else e=this.data.url;this._el.content_item.innerHTML="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}function D5(t){return t.match(/^spotify:/)?t:(t=new URL(t),`spotify${t.pathname.replace(/\/$/,"").replace(/\//g,":")}`)}class N5 extends ht{_loadMedia(){var e;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-spotify",this._el.content),this.media_id=D5(this.data.url),this.media_id?(e="https://embed.spotify.com/?uri="+this.media_id+"&theme=white&view=coverart",this.player=this.domCreate("iframe","tl-media-shadow",this._el.content_item),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.onLoaded()):this.loadErrorDisplay(this._("spotify_invalid_url"))}_updateMediaDisplay(e){var r=this.options.height,i=0,s=0;ga?r=this.options.height/2:r=this.options.height-this.options.credit_height-this.options.caption_height-30,this._el.content_item.style.maxHeight="none",Fe(r),Fe(this.options.width),r>this.options.width?(Fe("height is greater"),i=this.options.width+80+"px",s=this.options.width+"px"):(Fe("width is greater"),Fe(this.options.width),i=r+"px",s=r-80+"px"),this.player.style.width=s,this.player.style.height=i,this._el.credit&&(this._el.credit.style.width=s),this._el.caption&&(this._el.caption.style.width=s)}_stopMedia(){}}class M5 extends ht{constructor(e,r,i){super(e,r,i),this.iframe=Hf.sanitize(this.data.url,{ADD_TAGS:["iframe"],ADD_ATTR:["frameborder"]})}_loadMedia(){this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content),this._el.content_item.innerHTML=this.iframe,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class L5 extends ht{_loadMedia(){try{var e=this;if(this.data.url.match(`<blockquote class=['"]imgur-embed-pub['"]`)){var r=this.data.url.match(/(imgur\.com)\/(\w+)/);this.media_id=r[2],this.data.url="http://imgur.com/gallery/"+this.media_id}else this.data.url&&(this.media_id=this.data.url.split("/").slice(-1)[0]);la(["https://s.imgur.com/min/embed.js"],function(){e.createMedia()})}catch{this.loadErrorDisplay(this._("imgur_invalidurl_err"))}}createMedia(){var e=this,r="https://api.imgur.com/oembed.json?url="+this.data.url;this._el.content_item=this.domCreate("div","tl-media-item tl-media-image tl-media-imgur",this._el.content),Wo({type:"GET",url:r,dataType:"json",success:function(i){try{e._el.content_item.innerHTML=i.html,setInterval(function(){document.querySelector("blockquote.imgur-embed-pub")==null?clearInterval():(imgurEmbed.createIframe(),document.getElementById("imageElement").removeAttribute("style"),document.getElementById("image").removeAttribute("style"))},2e3)}catch{Fe("Error processing imgur ajax response")}},error:function(i,s,a){s=="parsererror"?e.loadErrorDisplay(e._("imgur_invalidurl_err")):e.loadErrorDisplay(e._("unknown_read_err",s))}}),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.width=this.options.width+"px",this._el.content_item.style.height=va.r16_9({w:this.options.width})+"px"}}class O5 extends ht{_loadMedia(){var e=Vf(this.data.url);this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe",this._el.content);var r="";sc||t6||e.match(/dl.dropboxusercontent.com/)?r="<iframe class='doc' frameborder='0' width='100%' height='100%' src='//docs.google.com/viewer?url="+e+"&amp;embedded=true'></iframe>":r="<iframe class='doc' frameborder='0' width='100%' height='100%' src='"+e+"'></iframe>",this._el.content_item.innerHTML=r,this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=this.options.height+"px"}}class j5 extends ht{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=Vf(this.data.url),r=this,r=this,i="tl-media-item tl-media-audio tl-media-shadow";this._el.content_item=this.domCreate("audio",i,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){r.onMediaLoaded()}),this._el.source_item.src=e,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 audio with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(e){Io&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(e,r){var i=e.match(r),s="audio/";switch(i[1]){case"mp3":s+="mpeg";break;case"wav":s+="wav";break;case"m4a":s+="mp4";break;default:s="audio";break}return s}}class V5 extends ht{_loadMedia(){this.loadingMessage(),this.options.background||this.createMedia(),this.onLoaded()}createMedia(){var e=Vf(this.data.url),r=this,r=this,i="tl-media-item tl-media-video tl-media-shadow";this._el.content_item=this.domCreate("video",i,this._el.content),this._el.content_item.controls=!0,this._el.source_item=this.domCreate("source","",this._el.content_item),this._el.content_item.addEventListener("load",function(s){r.onMediaLoaded()}),this._el.source_item.src=e,this._el.source_item.type=this._getType(this.data.url,this.data.mediatype.match_str),this._el.content_item.innerHTML+="Your browser doesn't support HTML5 video with "+this._el.source_item.type,this.player_element=this._el.content_item}_updateMediaDisplay(e){Io&&(this._el.content_item.style.width="auto")}_stopMedia(){this.player_element&&this.player_element.pause()}_getType(e,r){var i=e.match(r),s="video/";switch(i[1]){case"mp4":s+="mp4";break;case"webm":s+="webm";break;default:s="video";break}return s}}class F5 extends ht{_loadMedia(){var e,r=this;this._el.content_item=this.domCreate("div","tl-media-item tl-media-iframe tl-media-wistia tl-media-shadow",this._el.content),this.media_id=this.data.url.split(/https?:\/\/(.+)?(wistia\.com|wi\.st)\/medias\/(.*)/)[3],Fe(`Wistia: media_id: ${this.media_id}`),e="https://fast.wistia.com/embed/iframe/"+this.media_id+"?version=v1&controlsVisibleOnLoad=true&playerColor=aae3d8",this.player=this.domCreate("iframe","",this._el.content_item),this.player.addEventListener("load",function(i){r.onMediaLoaded()}),this.player.width="100%",this.player.height="100%",this.player.frameBorder="0",this.player.src=e,this.player.setAttribute("allowfullscreen",""),this.player.setAttribute("webkitallowfullscreen",""),this.player.setAttribute("mozallowfullscreen",""),this.onLoaded()}_updateMediaDisplay(){this._el.content_item.style.height=va.r16_9({w:this._el.content_item.offsetWidth})+"px"}_stopMedia(){try{this.player.contentWindow.postMessage(JSON.stringify({method:"pause"}),"https://player.vimeo.com")}catch(e){Fe(e)}}}function Fh(t,e){var r={},i=[{type:"youtube",name:"YouTube",match_str:"^(https?:)?/*(www.|m.)?youtube|youtu.be",cls:d5},{type:"vimeo",name:"Vimeo",match_str:"^(https?:)?/*(player.)?vimeo.com",cls:y5},{type:"dailymotion",name:"DailyMotion",match_str:"^(https?:)?/*(www.)?(dailymotion.com|dai.ly)",cls:_5},{type:"vine",name:"Vine",match_str:"^(https?:)?/*(www.)?vine.co",cls:w5},{type:"soundcloud",name:"SoundCloud",match_str:"^(https?:)?/*(player.)?soundcloud.com",cls:v5},{type:"twitter",name:"Twitter",match_str:"^(https?:)?/*(www.)?(twitter|x).com",cls:b5},{type:"twitterembed",name:"TwitterEmbed",match_str:`<blockquote class=['"]twitter-tweet['"]`,cls:x5},{type:"googlemaps",name:"Google Map",match_str:/google.+?\/maps\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/search\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/place\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)|google.+?\/maps\/dir\/([\w\W]+)\/([\w\W]+)\/@([-\d.]+),([-\d.]+),((?:[-\d.]+[zmayht],?)*)/,cls:h5},{type:"flickr",name:"Flickr",match_str:"^(https?:)?/*(www.)?flickr.com/photos",cls:dE},{type:"flickr",name:"Flickr",match_str:"^(https?://)?flic.kr/.*",cls:dE},{type:"instagram",name:"Instagram",match_str:/^(https?:)?\/*(www.)?(instagr.am|^(https?:)?\/*(www.)?instagram.com)\/p\//,cls:A5},{type:"profile",name:"Profile",match_str:/^(https?:)?\/*(www.)?instagr.am\/[a-zA-Z0-9]{2,}|^(https?:)?\/*(www.)?instagram.com\/[a-zA-Z0-9]{2,}/,cls:P5},{type:"documentcloud",name:"Document Cloud",match_str:/documentcloud.org\//,cls:E5},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://.+.wiki[mp]edia.org.+#/media/.+.(jpg|jpeg|png|gif|svg|webp)",cls:cE},{type:"wikipedia-image",name:"WikipediaImage",match_str:"^https://commons.wikimedia.org/wiki/File:.+.(jpg|jpeg|png|gif|svg|webp)",cls:cE},{type:"wikipedia",name:"Wikipedia",match_str:"^(https?:)?/.+.wikipedia.org",cls:p5},{type:"image",name:"Image",match_str:/(jpg|jpeg|png|gif|svg|webp)(\?.*)?$/i,cls:uE},{type:"imgur",name:"Imgur",match_str:/^.*imgur.com\/.+$|<blockquote class=['\"]imgur-embed-pub['\"]/i,cls:L5},{type:"googledocs",name:"Google Doc",match_str:"^(https?:)?/*[^.]*.google.com/[^/]*/d/[^/]*/[^/]*?usp=shar.*|^(https?:)?/*drive.google.com/open?id=[^&]*&authuser=0|^(https?:)?//*drive.google.com/open\\?id=[^&]*|^(https?:)?/*[^.]*.googledrive.com/host/[^/]*/",cls:R5},{type:"pdf",name:"PDF",match_str:/^.*\.pdf(\?.*)?(\#.*)?/,cls:O5},{type:"spotify",name:"spotify",match_str:"spotify",cls:N5},{type:"iframe",name:"iFrame",match_str:"iframe",cls:M5},{type:"blockquote",name:"Quote",match_str:"blockquote",cls:f5},{type:"video",name:"Video",match_str:/(mp4|webm)(\?.*)?$/i,cls:V5},{type:"wistia",name:"Wistia",match_str:/https?:\/\/(.+)?(wistia\.com|wi\.st)\/.*/i,cls:F5},{type:"audio",name:"Audio",match_str:/(mp3|wav|m4a)(\?.*)?$/i,cls:j5},{type:"imageblank",name:"Imageblank",match_str:"",cls:uE}];if(e){if(t instanceof Array)return!1;for(var s=0;s<i.length;s++)switch(i[s].type){case"flickr":case"image":case"instagram":if(t.url.match(i[s].match_str))return r=i[s],r;break}}else for(var s=0;s<i.length;s++)if(t.url.match(i[s].match_str))return i[s];return!1}class YC{constructor(e,r){this._el={container:{},content_container:{},media_container:{},timespan:{},line_left:{},line_right:{},content:{},text:{},media:{}},this._text={},this._state={loaded:!1},this.data={unique_id:"",background:null,date:{year:0,month:0,day:0,hour:0,minute:0,second:0,millisecond:0,thumbnail:"",format:""},text:{headline:"",text:""},media:null},this.options={duration:1e3,ease:Ff,width:600,height:600,marker_width_min:100},this.active=!1,this.animator={},this.has_end_date=!1,this.ariaLabel="",tt(this.options,r),tt(this.data,e),this._initLayout(),this._initEvents()}show(){}hide(){}setActive(e){this.active=e,this.active&&this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end tl-timemarker-active":this.active?this._el.container.className="tl-timemarker tl-timemarker-active":this.has_end_date?this._el.container.className="tl-timemarker tl-timemarker-with-end":this._el.container.className="tl-timemarker",this._el.container.ariaLabel=this.ariaLabel,this.active?this._el.container.ariaLabel+=", shown":this._el.container.ariaLabel+=", press space to show"}setFocus(e={preventScroll:!0}){this._el.container.focus(e)}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r){this._updateDisplay(e,r)}loadMedia(){this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0)}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getLeft(){return this._el.container.style.left.slice(0,-2)}getTime(){return this.data.start_date.getTime()}getEndTime(){return this.data.end_date?this.data.end_date.getTime():!1}setHeight(e){var r=12,i=1;this._el.content_container.style.height=e+"px",this._el.timespan_content.style.height=e+"px",e<=30?this._el.content.className="tl-timemarker-content tl-timemarker-content-small":this._el.content.className="tl-timemarker-content",e<=56?this._el.content_container.classList.add("tl-timemarker-content-container-small"):this._el.content_container.classList.remove("tl-timemarker-content-container-small"),jf?(i=Math.floor(e/(r+2)),i<1&&(i=1),this._text.className="tl-headline",this._text.style.webkitLineClamp=i):(i=e/r,i>1?this._text.className="tl-headline tl-headline-fadeout":this._text.className="tl-headline",this._text.style.height=i*r+"px")}setWidth(e){this.data.end_date&&(this._el.container.style.width=e+"px",e>this.options.marker_width_min?(this._el.content_container.style.width=e+"px",this._el.content_container.className="tl-timemarker-content-container tl-timemarker-content-container-long"):(this._el.content_container.style.width=this.options.marker_width_min+"px",this._el.content_container.className="tl-timemarker-content-container"))}setClass(e){this._el.container.className=e}setRowPosition(e,r){this.setPosition({top:e}),this._el.timespan.style.height=r+"px"}getFormattedDate(){if($n(this.data.display_date).length>0)return this.data.display_date;let e="";return this.data.end_date&&(e=" to "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(e=(e?"from ":"")+this.data.start_date.getDisplayDate(this.getLanguage())+e),e}_onMarkerClick(e){this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerKeydown(e){/Space|Enter/.test(e.code)&&this.fire("markerclick",{unique_id:this.data.unique_id})}_onMarkerBlur(e){this.fire("markerblur",{unique_id:this.data.unique_id})}_initLayout(){if(this._el.container=de("div","tl-timemarker"),this._el.container.setAttribute("tabindex","-1"),this.data.unique_id&&(this._el.container.id=this.data.unique_id+"-marker"),this.data.end_date&&(this.has_end_date=!0,this._el.container.className="tl-timemarker tl-timemarker-with-end"),this._el.timespan=de("div","tl-timemarker-timespan",this._el.container),this._el.timespan_content=de("div","tl-timemarker-timespan-content",this._el.timespan),this._el.content_container=de("div","tl-timemarker-content-container",this._el.container),this._el.content=de("div","tl-timemarker-content",this._el.content_container),this._el.line_left=de("div","tl-timemarker-line-left",this._el.timespan),this._el.line_right=de("div","tl-timemarker-line-right",this._el.timespan),this.data.media){this._el.media_container=de("div","tl-timemarker-media-container",this._el.content);var e={url:this.data.media.thumbnail},r=this.data.media.thumbnail?Fh(e,!0):null;if(r){var i=new r.cls(e);i.on("loaded",(function(){this._el.media=de("img","tl-timemarker-media",this._el.media_container),this._el.media.src=i.getImageURL()}).bind(this)),i.loadMedia()}else{var s=Fh(this.data.media).type;this._el.media=de("span","tl-icon-"+s,this._el.media_container)}}this._el.text=de("div","tl-timemarker-text",this._el.content),this._text=de("h2","tl-headline",this._el.text),this.data.text.headline&&this.data.text.headline!=""?this._text.innerHTML=ao(this.data.text.headline):this.data.text.text&&this.data.text.text!=""?this._text.innerHTML=ao(this.data.text.text):this.data.media&&this.data.media.caption&&this.data.media.caption!=""&&(this._text.innerHTML=ao(this.data.media.caption));const a=this.getFormattedDate();this.ariaLabel=`${this._text.innerHTML}, ${a}`,this.onLoaded()}_initEvents(){Ae.addListener(this._el.container,"click",this._onMarkerClick,this),Ae.addListener(this._el.container,"keydown",this._onMarkerKeydown,this),Ae.addListener(this._el.container,"blur",this._onMarkerBlur,this)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}}En(YC,ki,Tn,Si);class y_{constructor(e,r,i){this._el={drag:e,move:e},this.mousedrag={down:"mousedown",up:"mouseup",leave:"mouseleave",move:"mousemove"},this.touchdrag={down:"touchstart",up:"touchend",leave:"mouseleave",move:"touchmove"},r&&(this._el.move=r),this.options={snap:!1,enable:{x:!0,y:!0},constraint:{top:!1,bottom:!1,left:0,right:!1},momentum_multiplier:2e3,duration:1e3,ease:Ho},this.animator=null,this.dragevent=this.mousedrag,qr&&(this.dragevent=this.touchdrag),this.data={sliding:!1,direction:"none",pagex:{start:0,end:0},pagey:{start:0,end:0},pos:{start:{x:0,y:0},end:{x:0,y:0}},new_pos:{x:0,y:0},new_pos_parent:{x:0,y:0},time:{start:0,end:0},touch:!1},tt(this.options,i)}enable(e){Ae.addListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Ae.addListener(this._el.drag,this.dragevent.up,this._onDragEnd,this),this.data.pos.start=0,this._el.move.style.left=this.data.pos.start.x+"px",this._el.move.style.top=this.data.pos.start.y+"px",this._el.move.style.position="absolute"}disable(){Ae.removeListener(this._el.drag,this.dragevent.down,this._onDragStart,this),Ae.removeListener(this._el.drag,this.dragevent.up,this._onDragEnd,this)}stopMomentum(){this.animator&&this.animator.stop()}updateConstraint(e){this.options.constraint=e}_onDragStart(e){this.animator&&this.animator.stop(),qr?e.originalEvent?(this.data.pagex.start=e.originalEvent.touches[0].screenX,this.data.pagey.start=e.originalEvent.touches[0].screenY):(this.data.pagex.start=e.targetTouches[0].screenX,this.data.pagey.start=e.targetTouches[0].screenY):(this.data.pagex.start=e.pageX,this.data.pagey.start=e.pageY),this.options.enable.x,this.options.enable.y,this.data.pos.start={x:this._el.move.offsetLeft,y:this._el.move.offsetTop},this.data.time.start=new Date().getTime(),this.fire("dragstart",this.data),Ae.addListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Ae.addListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this)}_onDragEnd(e){this.data.sliding=!1,Ae.removeListener(this._el.drag,this.dragevent.move,this._onDragMove,this),Ae.removeListener(this._el.drag,this.dragevent.leave,this._onDragEnd,this),this.fire("dragend",this.data),this._momentum()}_onDragMove(e){var r={x:0,y:0};this.data.sliding=!0,qr?e.originalEvent?(this.data.pagex.end=e.originalEvent.touches[0].screenX,this.data.pagey.end=e.originalEvent.touches[0].screenY):(this.data.pagex.end=e.targetTouches[0].screenX,this.data.pagey.end=e.targetTouches[0].screenY):(this.data.pagex.end=e.pageX,this.data.pagey.end=e.pageY),r.x=this.data.pagex.start-this.data.pagex.end,r.y=this.data.pagey.start-this.data.pagey.end,this.data.pos.end={x:this._el.drag.offsetLeft,y:this._el.drag.offsetTop},this.data.new_pos.x=-(r.x-this.data.pos.start.x),this.data.new_pos.y=-(r.y-this.data.pos.start.y),this.options.enable.x&&Math.abs(r.x)>Math.abs(r.y)&&(e.preventDefault(),this._el.move.style.left=this.data.new_pos.x+"px"),this.options.enable.y&&Math.abs(r.y)>Math.abs(r.y)&&(e.preventDefault(),this._el.move.style.top=this.data.new_pos.y+"px"),this.fire("dragmove",this.data)}_momentum(){var e={x:0,y:0,time:0},r={x:0,y:0,time:0},i={x:!1,y:!1},s=!1;this.data.direction=null,e.time=(new Date().getTime()-this.data.time.start)*10,r.time=(new Date().getTime()-this.data.time.start)*10,r.x=this.options.momentum_multiplier*(Math.abs(this.data.pagex.end)-Math.abs(this.data.pagex.start)),r.y=this.options.momentum_multiplier*(Math.abs(this.data.pagey.end)-Math.abs(this.data.pagey.start)),e.x=Math.round(r.x/r.time),e.y=Math.round(r.y/r.time),this.data.new_pos.x=Math.min(this.data.new_pos.x+e.x),this.data.new_pos.y=Math.min(this.data.new_pos.y+e.y),this.options.enable.x?this.options.constraint.left&&this.data.new_pos.x>this.options.constraint.left&&(this.data.new_pos.x=this.options.constraint.left):this.data.new_pos.x=this.data.pos.start.x,this.options.enable.y?this.data.new_pos.y<0&&(this.data.new_pos.y=0):this.data.new_pos.y=this.data.pos.start.y,r.time<2e3&&(s=!0),this.options.enable.x&&this.options.enable.y?Math.abs(r.x)>Math.abs(r.y)?i.x=!0:i.y=!0:this.options.enable.x?Math.abs(r.x)>Math.abs(r.y)&&(i.x=!0):Math.abs(r.y)>Math.abs(r.x)&&(i.y=!0),i.x&&(Math.abs(r.x)>this._el.drag.offsetWidth/2&&(s=!0),Math.abs(r.x)>1e4&&(this.data.direction="left",r.x>0&&(this.data.direction="right"))),i.y&&(Math.abs(r.y)>this._el.drag.offsetHeight/2&&(s=!0),Math.abs(r.y)>1e4&&(this.data.direction="up",r.y>0&&(this.data.direction="down"))),r.time<1e3||this._animateMomentum(),s&&this.data.direction?this.fire("swipe_"+this.data.direction,this.data):this.data.direction?this.fire("swipe_nodirection",this.data):this.options.snap&&(this.animator.stop(),this.animator=xi(this._el.move,{top:this.data.pos.start.y,left:this.data.pos.start.x,duration:this.options.duration,easing:Pu}))}_animateMomentum(){var e={x:this.data.new_pos.x,y:this.data.new_pos.y},r={duration:this.options.duration,easing:Pu};this.options.enable.y&&((this.options.constraint.top||this.options.constraint.bottom)&&(e.y>this.options.constraint.bottom?e.y=this.options.constraint.bottom:e.y<this.options.constraint.top&&(e.y=this.options.constraint.top)),r.top=Math.floor(e.y)+"px"),this.options.enable.x&&(this.options.constraint.left&&e.x>=this.options.constraint.left&&(e.x=this.options.constraint.left),this.options.constraint.right&&e.x<this.options.constraint.right&&(e.x=this.options.constraint.right),r.left=Math.floor(e.x)+"px"),this.animator=xi(this._el.move,r),this.fire("momentum",this.data)}}En(y_,Tn);class XC{constructor(e,r,i,s){this.language=s,this._el={parent:{},container:{},slider:{},slider_background:{},line:{},marker_container_mask:{},marker_container:{},marker_item_container:{},timeaxis:{},timeaxis_background:{}},this.collapsed=!1,typeof e=="object"?this._el.container=e:this._el.container=ac(e),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","application"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline_navigation")),this._el.container.setAttribute("aria-description",'Navigate between markers with arrow keys. Press "Home" for the first and "End" for the last markers'),this.config=r,this.options={width:600,height:600,duration:1e3,ease:Ho,has_groups:!1,optimal_tick_width:50,scale_factor:2,marker_padding:5,timenav_height_min:150,marker_height_min:30,marker_width_min:100,zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89]},this.animator=null,this.ready=!1,this._markers=[],this._eras=[],this.has_eras=!1,this._groups=[],this._calculated_row_height=100,this.current_id="",this.current_focused_id="",this.timescale={},this.timeaxis={},this.max_rows=6,this.animate_css=!1,this._swipable,tt(this.options,i)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this._onLoaded()}positionMarkers(e){for(var r=0;r<this._markers.length;r++){var i=this.timescale.getPositionInfo(r);e?this._markers[r].setClass("tl-timemarker tl-timemarker-fast"):this._markers[r].setClass("tl-timemarker"),this._markers[r].setPosition({left:i.start}),this._markers[r].setWidth(i.width)}}updateDisplay(e,r,i){let s=!1;e&&(this.options.width==0&&e>0&&(s=!0),this.options.width=e),r&&r!=this.options.height&&(this.options.height=r,this.timescale=this._getTimeScale()),this._assignRowsToMarkers(),this._el.slider_background.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._el.slider_background.style.left=-(this.options.width/2)+"px",this._el.slider.style.width=this.timescale.getPixelWidth()+this.options.width+"px",this._swipable.updateConstraint({top:!1,bottom:!1,left:this.options.width/2,right:-(this.timescale.getPixelWidth()-this.options.width/2)}),s&&this._drawTimeline(),this.goToId(this.current_id,!0)}_getTimeScale(){var e=0;try{e=parseInt(this.options.marker_height_min)}catch{Fe("Invalid value for marker_height_min option."),e=30}return e==0&&(Fe("marker_height_min option must not be zero."),e=30),this.max_rows=Math.round((this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding)/e),this.max_rows<1&&(this.max_rows=1),new lE(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows})}_updateTimeScale(e){this.options.scale_factor=e,this._updateDrawTimeline()}zoomIn(){var e=o6(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(e)}zoomOut(){var e=l6(this.options.zoom_sequence,this.options.scale_factor);this.setZoomFactor(e)}setZoom(e){var r=this.options.zoom_sequence[e];typeof r=="number"?this.setZoomFactor(r):console.warn("Invalid zoom level. Please use an index number between 0 and "+(this.options.zoom_sequence.length-1))}setZoomFactor(e){e<=this.options.zoom_sequence[0]?this.fire("zoomtoggle",{zoom:"out",show:!1}):this.fire("zoomtoggle",{zoom:"out",show:!0}),e>=this.options.zoom_sequence[this.options.zoom_sequence.length-1]?this.fire("zoomtoggle",{zoom:"in",show:!1}):this.fire("zoomtoggle",{zoom:"in",show:!0}),e==0&&(console.warn("Zoom factor must be greater than zero. Using 0.1"),e=.1),this.options.scale_factor=e,this.goToId(this.current_id,!this._updateDrawTimeline(!0),!0)}_createGroups(){this._groups=[];var e=this.timescale.getGroupLabels();if(e){this.options.has_groups=!0;for(var r=0;r<e.length;r++)this._createGroup(e[r])}}_createGroup(e){var r=new HC(e);this._addGroup(r),this._groups.push(r)}_addGroup(e){e.addTo(this._el.container)}_positionGroups(){if(this.options.has_groups){var e=this.options.height-this._el.timeaxis_background.offsetHeight,r=Math.floor(e/this.timescale.getNumberOfRows()-this.options.marker_padding);this.timescale.getGroupLabels();for(var i=0,s=0;i<this._groups.length;i++){var a=Math.floor(s*(r+this.options.marker_padding)),o=!1;a>e-this.options.marker_padding&&(o=!0),this._groups[i].setRowPosition(a,this._calculated_row_height+this.options.marker_padding/2),this._groups[i].setAlternateRowColor(u6(i),o),s+=this._groups[i].data.rows}}}_addMarker(e){e.addTo(this._el.marker_item_container),e.on("markerclick",this._onMarkerClick,this),e.on("added",this._onMarkerAdded,this)}_createMarker(e,r){var i=new YC(e,this.options);this._addMarker(i),r<0?this._markers.push(i):this._markers.splice(r,0,i)}_createMarkers(e){for(var r=0;r<e.length;r++)this._createMarker(e[r],-1)}_removeMarker(e){e.removeFrom(this._el.marker_item_container)}_destroyMarker(e){this._removeMarker(this._markers[e]),this._markers.splice(e,1)}_calculateMarkerHeight(e){return e/this.timescale.getNumberOfRows()-this.options.marker_padding}_calculateRowHeight(e){return e/this.timescale.getNumberOfRows()}_calculateAvailableHeight(){return this.options.height-this._el.timeaxis_background.offsetHeight-this.options.marker_padding}_calculateMinimumTimeNavHeight(){return this.timescale.getNumberOfRows()*this.options.marker_height_min+this._el.timeaxis_background.offsetHeight+this.options.marker_padding}getMinimumHeight(){return this._calculateMinimumTimeNavHeight()}_assignRowsToMarkers(){var e=this._calculateAvailableHeight(),r=this._calculateMarkerHeight(e);this._positionGroups(),this._calculated_row_height=this._calculateRowHeight(e);for(var i=0;i<this._markers.length;i++){this._markers[i].setHeight(r);var s=this.timescale.getPositionInfo(i).row,a=Math.floor(s*(r+this.options.marker_padding))+this.options.marker_padding,o=e-a+this.options.marker_padding;this._markers[i].setRowPosition(a,o)}}_resetMarkersActive(){for(var e=0;e<this._markers.length;e++)this._markers[e].setActive(!1)}_resetMarkersBlurListeners(){for(var e=0;e<this._markers.length;e++)this._markers[e].off("markerblur",this._onMarkerBlur,this)}_findMarkerIndex(e){var r=-1;return(typeof e=="string"||e instanceof String)&&(r=MC(e,this._markers,"unique_id",r)),r}_createEras(e){for(var r=0;r<e.length;r++){var i=e[r],s=new WC(i.start_date,i.end_date,i.headline,this.options);this._eras.push(s),s.addTo(this._el.marker_item_container),s.on("added",this._onEraAdded,this)}}_positionEras(e){for(var r=0,i=0;i<this._eras.length;i++){var s={start:0,end:0,width:0};s.start=this.timescale.getPosition(this._eras[i].start_date.getTime()),s.end=this.timescale.getPosition(this._eras[i].end_date.getTime()),s.width=s.end-s.start,e?this._eras[i].setClass("tl-timeera tl-timeera-fast"):this._eras[i].setClass("tl-timeera"),this._eras[i].setPosition({left:s.start}),this._eras[i].setWidth(s.width),r++,r>5&&(r=0),this._eras[i].setColor(r)}}createMarker(e,r){this._createMarker(e,r)}createMarkers(e){this._createMarkers(e)}destroyMarker(e){this._destroyMarker(e)}destroyMarkerId(e){this.destroyMarker(this._findMarkerIndex(e))}goTo(e,r,i){var s=this.options.ease,a=this.options.duration,o=e<0?0:e;this._resetMarkersActive(),e>=0&&e<this._markers.length&&this._markers[e].setActive(!0),this.animateMovement(o,r,i,a,s),e>=0&&e<this._markers.length?this.current_id=this.current_focused_id=this._markers[e].data.unique_id:this.current_id=this.current_focused_id="",this._setLabelWithCurrentMarker()}goToId(e,r,i){this.goTo(this._findMarkerIndex(e),r,i)}focusOn(e,r,i){const s=this.options.ease,a=this.options.duration,o=e<0?0:e;this.animateMovement(o,r,i,a,s),this._resetMarkersBlurListeners(),e>=0&&e<this._markers.length&&(this._markers[e].setFocus(),this.current_focused_id=this._markers[e].data.unique_id,this._markers[e].on("markerblur",this._onMarkerBlur,this))}focusNext(){const e=this._findMarkerIndex(this.current_focused_id);e+1<this._markers.length?this.focusOn(e+1):this.focusOn(e)}focusPrevious(){const e=this._findMarkerIndex(this.current_focused_id);e-1>=0?this.focusOn(e-1):this.focusOn(e)}animateMovement(e,r,i,s,a){this.animator&&this.animator.stop(),r?(this._el.slider.className="tl-timenav-slider",this._el.slider.style.left=-this._markers[e].getLeft()+this.options.width/2+"px"):i?(this._el.slider.className="tl-timenav-slider tl-timenav-slider-animate",this.animate_css=!0,this._el.slider.style.left=-this._markers[e].getLeft()+this.options.width/2+"px"):(this._el.slider.className="tl-timenav-slider",this.animator=xi(this._el.slider,{left:-this._markers[e].getLeft()+this.options.width/2+"px",duration:s,easing:a})),e>=0&&e<this._markers.length?this.current_id=this._markers[e].data.unique_id:this.current_id="",this._dispatchVisibleTicksChange()}goToId(e,r,i){this.goTo(this._findMarkerIndex(e),r,i)}_dispatchVisibleTicksChange(){this.ticks_change_timeout&&(clearTimeout(this.ticks_change_timeout),this.ticks_change_timeout=null),this.ticks_change_timeout=setTimeout(()=>{const e=this.timeaxis.getVisibleTicks();this.fire("visible_ticks_change",{visible_ticks:e})},this.options.duration)}_onLoaded(){this.ready=!0,this.fire("loaded",this.config)}_onMarkerAdded(e){this.fire("dateAdded",this.config)}_onEraAdded(e){this.fire("eraAdded",this.config)}_onMarkerRemoved(e){this.fire("dateRemoved",this.config)}_onMarkerClick(e){this.goToId(e.unique_id),this.fire("change",{unique_id:e.unique_id})}_onMarkerBlur(e){this.current_focused_id!==this.current_id&&this.focusOn(this._findMarkerIndex(this.current_id))}_onMouseScroll(e){var r=0,i=0,s={right:-(this.timescale.getPixelWidth()-this.options.width/2),left:this.options.width/2};e||(e=window.event),e.originalEvent&&(e=e.originalEvent),typeof e.wheelDeltaX<"u"&&(r=e.wheelDeltaY/6,Math.abs(e.wheelDeltaX)>Math.abs(e.wheelDeltaY)?r=e.wheelDeltaX/6:r=0),r&&(e.preventDefault&&e.preventDefault(),e.returnValue=!1),i=parseInt(this._el.slider.style.left.replace("px",""))+r,i>s.left?i=s.left:i<s.right&&(i=s.right),this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1),this._el.slider.style.left=i+"px"}_onDragMove(e){this.animate_css&&(this._el.slider.className="tl-timenav-slider",this.animate_css=!1)}_onKeydown(e){switch(Ae.stopPropagation(e),e.key){case"ArrowUp":case"ArrowRight":{this.focusNext();break}case"ArrowDown":case"ArrowLeft":{this.focusPrevious();break}case"Home":{this.focusOn(0);break}case"End":{this.focusOn(this._markers.length-1);break}}}_drawTimeline(e){this.timescale=this._getTimeScale(),this.timeaxis.drawTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(e),this._assignRowsToMarkers(),this._createGroups(),this._positionGroups(),this.has_eras&&this._positionEras(e)}_updateDrawTimeline(e){var r=!1;if(e){var i=new lE(this.config,{display_width:this._el.container.offsetWidth,screen_multiplier:this.options.scale_factor,max_rows:this.max_rows});this.timescale.getMajorScale()==i.getMajorScale()&&this.timescale.getMinorScale()==i.getMinorScale()&&(r=!0)}else r=!0;return r?(this.timescale=this._getTimeScale(),this.timeaxis.positionTicks(this.timescale,this.options.optimal_tick_width),this.positionMarkers(),this._assignRowsToMarkers(),this._positionGroups(),this.has_eras&&this._positionEras(),this.updateDisplay()):this._drawTimeline(!0),r}_setLabelWithCurrentMarker(){const e=this._markers[this._findMarkerIndex(this.current_focused_id)],r=e&&e.ariaLabel?`, ${e.ariaLabel}, shown`:"";this._el.container.setAttribute("aria-label",`Timeline navigation ${r}`)}_initLayout(){this._el.line=de("div","tl-timenav-line",this._el.container),this._el.slider=de("div","tl-timenav-slider",this._el.container),this._el.slider_background=de("div","tl-timenav-slider-background",this._el.slider),this._el.marker_container_mask=de("div","tl-timenav-container-mask",this._el.slider),this._el.marker_container=de("div","tl-timenav-container",this._el.marker_container_mask),this._el.marker_item_container=de("div","tl-timenav-item-container",this._el.marker_container),this._el.timeaxis=de("div","tl-timeaxis",this._el.slider),this._el.timeaxis_background=de("div","tl-timeaxis-background",this._el.container),this.timeaxis=new qC(this._el.timeaxis,this.options,this.language),this._swipable=new y_(this._el.slider_background,this._el.slider,{enable:{x:!0,y:!1},constraint:{top:!1,bottom:!1,left:this.options.width/2,right:!1},snap:!1}),this._swipable.enable()}_initEvents(){this._swipable.on("dragmove",this._onDragMove,this),Ae.addListener(this._el.container,"mousewheel",this._onMouseScroll,this),Ae.addListener(this._el.container,"DOMMouseScroll",this._onMouseScroll,this),Ae.addListener(this._el.container,"keydown",this._onKeydown,this)}_initData(){this._createMarkers(this.config.events),this.config.eras&&this.config.eras.length>0&&(this.has_eras=!0,this._createEras(this.config.eras)),this._drawTimeline()}}En(XC,Tn,Si,ki);var ym=function(){function t(e,r){for(var i=0;i<r.length;i++){var s=r[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}return function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),e}}();function _m(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(function(){if(typeof window>"u"||typeof Element>"u")return;var t=Array.prototype.slice,e=Element.prototype.matches||Element.prototype.msMatchesSelector,r=["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","details","summary","iframe","object","embed","video","[contenteditable]"].join(","),i=function(){function d(h,f){_m(this,d),this._inertManager=f,this._rootElement=h,this._managedNodes=new Set,this._rootElement.hasAttribute("aria-hidden")?this._savedAriaHidden=this._rootElement.getAttribute("aria-hidden"):this._savedAriaHidden=null,this._rootElement.setAttribute("aria-hidden","true"),this._makeSubtreeUnfocusable(this._rootElement),this._observer=new MutationObserver(this._onMutation.bind(this)),this._observer.observe(this._rootElement,{attributes:!0,childList:!0,subtree:!0})}return ym(d,[{key:"destructor",value:function(){this._observer.disconnect(),this._rootElement&&(this._savedAriaHidden!==null?this._rootElement.setAttribute("aria-hidden",this._savedAriaHidden):this._rootElement.removeAttribute("aria-hidden")),this._managedNodes.forEach(function(f){this._unmanageNode(f.node)},this),this._observer=null,this._rootElement=null,this._managedNodes=null,this._inertManager=null}},{key:"_makeSubtreeUnfocusable",value:function(f){var p=this;o(f,function(P){return p._visitNode(P)});var g=document.activeElement;if(!document.body.contains(f)){for(var _=f,A=void 0;_;){if(_.nodeType===Node.DOCUMENT_FRAGMENT_NODE){A=_;break}_=_.parentNode}A&&(g=A.activeElement)}f.contains(g)&&(g.blur(),g===document.activeElement&&document.body.focus())}},{key:"_visitNode",value:function(f){if(f.nodeType===Node.ELEMENT_NODE){var p=f;p!==this._rootElement&&p.hasAttribute("inert")&&this._adoptInertRoot(p),(e.call(p,r)||p.hasAttribute("tabindex"))&&this._manageNode(p)}}},{key:"_manageNode",value:function(f){var p=this._inertManager.register(f,this);this._managedNodes.add(p)}},{key:"_unmanageNode",value:function(f){var p=this._inertManager.deregister(f,this);p&&this._managedNodes.delete(p)}},{key:"_unmanageSubtree",value:function(f){var p=this;o(f,function(g){return p._unmanageNode(g)})}},{key:"_adoptInertRoot",value:function(f){var p=this._inertManager.getInertRoot(f);p||(this._inertManager.setInert(f,!0),p=this._inertManager.getInertRoot(f)),p.managedNodes.forEach(function(g){this._manageNode(g.node)},this)}},{key:"_onMutation",value:function(f,p){f.forEach(function(g){var _=g.target;if(g.type==="childList")t.call(g.addedNodes).forEach(function(P){this._makeSubtreeUnfocusable(P)},this),t.call(g.removedNodes).forEach(function(P){this._unmanageSubtree(P)},this);else if(g.type==="attributes"){if(g.attributeName==="tabindex")this._manageNode(_);else if(_!==this._rootElement&&g.attributeName==="inert"&&_.hasAttribute("inert")){this._adoptInertRoot(_);var A=this._inertManager.getInertRoot(_);this._managedNodes.forEach(function(P){_.contains(P.node)&&A._manageNode(P.node)})}}},this)}},{key:"managedNodes",get:function(){return new Set(this._managedNodes)}},{key:"hasSavedAriaHidden",get:function(){return this._savedAriaHidden!==null}},{key:"savedAriaHidden",set:function(f){this._savedAriaHidden=f},get:function(){return this._savedAriaHidden}}]),d}(),s=function(){function d(h,f){_m(this,d),this._node=h,this._overrodeFocusMethod=!1,this._inertRoots=new Set([f]),this._savedTabIndex=null,this._destroyed=!1,this.ensureUntabbable()}return ym(d,[{key:"destructor",value:function(){if(this._throwIfDestroyed(),this._node&&this._node.nodeType===Node.ELEMENT_NODE){var f=this._node;this._savedTabIndex!==null?f.setAttribute("tabindex",this._savedTabIndex):f.removeAttribute("tabindex"),this._overrodeFocusMethod&&delete f.focus}this._node=null,this._inertRoots=null,this._destroyed=!0}},{key:"_throwIfDestroyed",value:function(){if(this.destroyed)throw new Error("Trying to access destroyed InertNode")}},{key:"ensureUntabbable",value:function(){if(this.node.nodeType===Node.ELEMENT_NODE){var f=this.node;if(e.call(f,r)){if(f.tabIndex===-1&&this.hasSavedTabIndex)return;f.hasAttribute("tabindex")&&(this._savedTabIndex=f.tabIndex),f.setAttribute("tabindex","-1"),f.nodeType===Node.ELEMENT_NODE&&(f.focus=function(){},this._overrodeFocusMethod=!0)}else f.hasAttribute("tabindex")&&(this._savedTabIndex=f.tabIndex,f.removeAttribute("tabindex"))}}},{key:"addInertRoot",value:function(f){this._throwIfDestroyed(),this._inertRoots.add(f)}},{key:"removeInertRoot",value:function(f){this._throwIfDestroyed(),this._inertRoots.delete(f),this._inertRoots.size===0&&this.destructor()}},{key:"destroyed",get:function(){return this._destroyed}},{key:"hasSavedTabIndex",get:function(){return this._savedTabIndex!==null}},{key:"node",get:function(){return this._throwIfDestroyed(),this._node}},{key:"savedTabIndex",set:function(f){this._throwIfDestroyed(),this._savedTabIndex=f},get:function(){return this._throwIfDestroyed(),this._savedTabIndex}}]),d}(),a=function(){function d(h){if(_m(this,d),!h)throw new Error("Missing required argument; InertManager needs to wrap a document.");this._document=h,this._managedNodes=new Map,this._inertRoots=new Map,this._observer=new MutationObserver(this._watchForInert.bind(this)),l(h.head||h.body||h.documentElement),h.readyState==="loading"?h.addEventListener("DOMContentLoaded",this._onDocumentLoaded.bind(this)):this._onDocumentLoaded()}return ym(d,[{key:"setInert",value:function(f,p){if(p){if(this._inertRoots.has(f))return;var g=new i(f,this);if(f.setAttribute("inert",""),this._inertRoots.set(f,g),!this._document.body.contains(f))for(var _=f.parentNode;_;)_.nodeType===11&&l(_),_=_.parentNode}else{if(!this._inertRoots.has(f))return;var A=this._inertRoots.get(f);A.destructor(),this._inertRoots.delete(f),f.removeAttribute("inert")}}},{key:"getInertRoot",value:function(f){return this._inertRoots.get(f)}},{key:"register",value:function(f,p){var g=this._managedNodes.get(f);return g!==void 0?g.addInertRoot(p):g=new s(f,p),this._managedNodes.set(f,g),g}},{key:"deregister",value:function(f,p){var g=this._managedNodes.get(f);return g?(g.removeInertRoot(p),g.destroyed&&this._managedNodes.delete(f),g):null}},{key:"_onDocumentLoaded",value:function(){var f=t.call(this._document.querySelectorAll("[inert]"));f.forEach(function(p){this.setInert(p,!0)},this),this._observer.observe(this._document.body||this._document.documentElement,{attributes:!0,subtree:!0,childList:!0})}},{key:"_watchForInert",value:function(f,p){var g=this;f.forEach(function(_){switch(_.type){case"childList":t.call(_.addedNodes).forEach(function(S){if(S.nodeType===Node.ELEMENT_NODE){var w=t.call(S.querySelectorAll("[inert]"));e.call(S,"[inert]")&&w.unshift(S),w.forEach(function(x){this.setInert(x,!0)},g)}},g);break;case"attributes":if(_.attributeName!=="inert")return;var A=_.target,P=A.hasAttribute("inert");g.setInert(A,P);break}},this)}}]),d}();function o(d,h,f){if(d.nodeType==Node.ELEMENT_NODE){var p=d;h&&h(p);var g=p.shadowRoot;if(g){o(g,h);return}if(p.localName=="content"){for(var _=p,A=_.getDistributedNodes?_.getDistributedNodes():[],P=0;P<A.length;P++)o(A[P],h);return}if(p.localName=="slot"){for(var S=p,w=S.assignedNodes?S.assignedNodes({flatten:!0}):[],x=0;x<w.length;x++)o(w[x],h);return}}for(var R=d.firstChild;R!=null;)o(R,h),R=R.nextSibling}function l(d){if(!d.querySelector("style#inert-style, link#inert-style")){var h=document.createElement("style");h.setAttribute("id","inert-style"),h.textContent=`
[inert] {
  pointer-events: none;
  cursor: default;
}

[inert], [inert] * {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}
`,d.appendChild(h)}}if(!HTMLElement.prototype.hasOwnProperty("inert")){var u=new a(document);Object.defineProperty(HTMLElement.prototype,"inert",{enumerable:!0,get:function(){return this.hasAttribute("inert")},set:function(h){u.setInert(this,h)}})}})();class QC{constructor(e,r,i,s){s&&this.setLanguage(s),this._el={container:{},scroll_container:{},background:{},content_container:{},content:{}},this._media=null,this._mediaclass={},this._text={},this._background_media=null,this._state={loaded:!1},this.has={headline:!1,text:!1,media:!1,title:!1,background:{image:!1,color:!1,color_value:""}},this.has.title=i,this.data={unique_id:null,background:null,start_date:null,end_date:null,location:null,text:null,media:null,autolink:!0},this.options={duration:1e3,slide_padding_lr:40,ease:Ff,width:600,height:600,skinny_size:650,media_name:""},this.active=!1,this.animator={},tt(this.options,r),tt(this.data,e),this._initLayout(),this._initEvents()}show(){this.animator=xi(this._el.slider_container,{left:-(this._el.container.offsetWidth*n)+"px",duration:this.options.duration,easing:this.options.ease})}hide(){}setActive(e){this.active=e,this.active?(this.data.background&&this.fire("background_change",this.has.background),this._setInteractive(!0),this.loadMedia()):(this.stopMedia(),this._setInteractive(!1))}addTo(e){e.appendChild(this._el.container)}removeFrom(e){e.removeChild(this._el.container)}updateDisplay(e,r,i){var s,a=this.options.slide_padding_lr,o=this.options.slide_padding_lr;e?this.options.width=e:this.options.width=this._el.container.offsetWidth,s=this.options.width-this.options.slide_padding_lr*2,ga&&this.options.width<=this.options.skinny_size?(a=0,o=0,s=this.options.width):i=="landscape"||this.options.width<=this.options.skinny_size&&(a=50,o=50,s=this.options.width-a-o),this._el.content.style.paddingLeft=a+"px",this._el.content.style.paddingRight=o+"px",this._el.content.style.width=s+"px",r?this.options.height=r:this.options.height=this._el.container.offsetHeight,this._media&&(!this.has.text&&this.has.headline?this._media.updateDisplay(s,this.options.height-this._text.headlineHeight(),i):!this.has.text&&!this.has.headline?this._media.updateDisplay(s,this.options.height,i):this.options.width<=this.options.skinny_size?this._media.updateDisplay(s,this.options.height,i):this._media.updateDisplay(s/2,this.options.height,i)),this._updateBackgroundDisplay()}loadMedia(){var e=this;this._media&&!this._state.loaded&&(this._media.loadMedia(),this._state.loaded=!0),this._background_media&&!this._background_media._state.loaded&&(this._background_media.on("loaded",function(){e._updateBackgroundDisplay()}),this._background_media.loadMedia())}stopMedia(){this._media&&this._state.loaded&&this._media.stopMedia()}getBackground(){return this.has.background}scrollToTop(){this._el.container.scrollTop=0}getFormattedDate(){if($n(this.data.display_date).length>0)return this.data.display_date;var e="";return this.has.title||(this.data.end_date&&(e=" &mdash; "+this.data.end_date.getDisplayDate(this.getLanguage())),this.data.start_date&&(e=this.data.start_date.getDisplayDate(this.getLanguage())+e)),e}_initLayout(){if(this._el.container=de("div","tl-slide"),this.has.title&&(this._el.container.className="tl-slide tl-slide-titleslide"),this.data.unique_id&&(this._el.container.id=this.data.unique_id),this._el.scroll_container=de("div","tl-slide-scrollable-container",this._el.container),this._el.content_container=de("div","tl-slide-content-container",this._el.scroll_container),this._el.content=de("div","tl-slide-content",this._el.content_container),this._el.background=de("div","tl-slide-background",this._el.container),this.data.background){if(this.data.background.url){var e=Fh(this.data.background,!0);e&&(this._background_media=new e.cls(this.data.background,{background:1}),this.has.background.image=!0,this._el.container.className+=" tl-full-image-background",this.has.background.color_value="#000",this._el.background.style.display="block"),this.data.background.alt&&(this._el.background.setAttribute("role","img"),this._el.background.setAttribute("aria-label",this.data.background.alt))}this.data.background.color&&(this.has.background.color=!0,this._el.container.className+=" tl-full-color-background",this.has.background.color_value=this.data.background.color),this.data.background.text_background&&(this._el.container.className+=" tl-text-background")}this.data.media&&this.data.media.url&&this.data.media.url!=""&&(this.has.media=!0),this.data.text&&this.data.text.text&&(this.has.text=!0),this.data.text&&this.data.text.headline&&(this.has.headline=!0),this.has.media&&(this.data.media.mediatype=Fh(this.data.media),this.options.media_name=this.data.media.mediatype.name,this.options.media_type=this.data.media.mediatype.type,this.options.autolink=this.data.autolink,this._media=new this.data.media.mediatype.cls(this.data.media,this.options,this.getLanguage())),(this.has.text||this.has.headline)&&(this._text=new GC(this.data.text,{title:this.has.title,language:this.getLanguage(),autolink:this.data.autolink}),this._text.addDateText(this.getFormattedDate())),!this.has.text&&!this.has.headline&&this.has.media?(this._el.container.classList.add("tl-slide-media-only"),this._media.addTo(this._el.content)):this.has.headline&&this.has.media&&!this.has.text?(this._el.container.classList.add("tl-slide-media-only"),this._text.addTo(this._el.content),this._media.addTo(this._el.content)):this.has.text&&this.has.media?(this._text.addTo(this._el.content),this._media.addTo(this._el.content)):(this.has.text||this.has.headline)&&(this._el.container.classList.add("tl-slide-text-only"),this._text.addTo(this._el.content)),this.onLoaded()}_initEvents(){}_updateBackgroundDisplay(){this._background_media&&this._background_media._state.loaded&&(this._el.background.style.backgroundImage="url('"+this._background_media.getImageURL(this.options.width,this.options.height)+"')")}_setInteractive(e){e?this._el.container.removeAttribute("inert"):this._el.container.setAttribute("inert",!0)}}En(QC,ki,Tn,Si);class cv{constructor(e,r,i){this._el={container:{},content_container:{},icon:{},title:{},description:{}},this.mediatype={},this.data={title:"Navigation",description:"Description",date:"Date"},this.options={direction:"previous"},this.animator=null,tt(this.options,r),tt(this.data,e),this._el.container=jl("tl-slidenav-"+this.options.direction),ga&&this._el.container.setAttribute("ontouchstart"," "),this._initLayout(),this._initEvents(),i&&i.appendChild(this._el.container)}update(e){var r={title:"",description:"",date:e.getFormattedDate()};e.data.text&&e.data.text.headline&&(r.title=e.data.text.headline),this._update(r)}setColor(e){e?this._el.content_container.className="tl-slidenav-content-container tl-slidenav-inverted":this._el.content_container.className="tl-slidenav-content-container"}_onMouseClick(){this.fire("clicked",this.options)}_update(e){this.data=tt(this.data,e);const r=ao(this.data.title);this._el.title.innerHTML=r;const i=ao(this.data.date);this._el.description.innerHTML=i,this._el.container.setAttribute("aria-label",`${this.options.direction}, ${r}, ${i}`)}_initLayout(){this._el.content_container=de("div","tl-slidenav-content-container",this._el.container),this._el.icon=de("div","tl-slidenav-icon",this._el.content_container),this._el.title=de("div","tl-slidenav-title",this._el.content_container),this._el.description=de("div","tl-slidenav-description",this._el.content_container),this._el.icon.innerHTML="&nbsp;",this._update()}_initEvents(){Ae.addListener(this._el.container,"click",this._onMouseClick,this)}}En(cv,Si,Tn);class JC{constructor(e,r,i,s){s&&this.setLanguage(s),this._el={container:{},background:{},slider_container_mask:{},slider_container:{},slider_item_container:{}},this._nav={},this._nav.previous={},this._nav.next={},this.slide_spacing=0,this._slides=[],this._swipable,this.preloadTimer,this._message,this.current_id="",this.data={},this.options={id:"",layout:"portrait",width:600,height:600,default_bg_color:{r:255,g:255,b:255},slide_padding_lr:40,start_at_slide:1,slide_default_fade:"0%",duration:1e3,ease:Ho,dragging:!0,trackResize:!0},typeof e=="object"?(this._el.container=e,this.options.id=oa(6,"tl")):(this.options.id=e,this._el.container=ac(e)),this._el.container.id||(this._el.container.id=this.options.id),this.animator=null,tt(this.options,i),tt(this.data,r)}init(){this._initLayout(),this._initEvents(),this._initData(),this.updateDisplay(),this.goTo(this.options.start_at_slide),this._onLoaded()}_addSlide(e){e.addTo(this._el.slider_item_container),e.on("added",this._onSlideAdded,this),e.on("background_change",this._onBackgroundChange,this)}_createSlide(e,r,i){var s=new QC(e,this.options,r,this.getLanguage());this._addSlide(s),i<0?this._slides.push(s):this._slides.splice(i,0,s)}_createSlides(e){for(var r=0;r<e.length;r++)e[r].unique_id==""&&(e[r].unique_id=oa(6,"tl-slide")),this._createSlide(e[r],!1,-1)}_removeSlide(e){e.removeFrom(this._el.slider_item_container),e.off("added",this._onSlideRemoved,this),e.off("background_change",this._onBackgroundChange)}_destroySlide(e){this._removeSlide(this._slides[e]),this._slides.splice(e,1)}_findSlideIndex(e){var r=e;return(typeof e=="string"||e instanceof String)&&(r=MC(e,this._slides,"unique_id")),r}updateDisplay(e,r,i,s){var a,o;typeof s>"u"?o=this.options.layout:o=s,this.options.layout=o,e?this.options.width=e:this.options.width=this._el.container.offsetWidth,r?this.options.height=r:this.options.height=this._el.container.offsetHeight,this.slide_spacing=this.options.width*2,a=this.options.height/2,this._nav.next.setPosition({top:a}),this._nav.previous.setPosition({top:a});for(var l=0;l<this._slides.length;l++)this._slides[l].updateDisplay(this.options.width,this.options.height,o),this._slides[l].setPosition({left:this.slide_spacing*l,top:0});this.goToId(this.current_id,!0,!0)}createSlide(e,r){this._createSlide(e,!1,r)}createSlides(e){this._createSlides(e)}destroySlide(e){this._destroySlide(e)}destroySlideId(e){this.destroySlide(this._findSlideIndex(e))}goTo(e,r,i){e=parseInt(e),isNaN(e)&&(e=0);var s=this;this.changeBackground({color_value:"",image:!1}),this.preloadTimer&&clearTimeout(this.preloadTimer);for(var a=0;a<this._slides.length;a++)this._slides[a].setActive(!1);e<this._slides.length&&e>=0&&(this.current_id=this._slides[e].data.unique_id,this.animator&&this.animator.stop(),this._swipable&&this._swipable.stopMomentum(),r?(this._el.slider_container.style.left=-(this.slide_spacing*e)+"px",this._onSlideChange(i)):this.animator=xi(this._el.slider_container,{left:-(this.slide_spacing*e)+"px",duration:this.options.duration,easing:this.options.ease,complete:this._onSlideChange(i)}),this._slides[e].setActive(!0),this._slides[e+1]?(this.showNav(this._nav.next,!0),this._nav.next.update(this._slides[e+1])):this.showNav(this._nav.next,!1),this._slides[e-1]?(this.showNav(this._nav.previous,!0),this._nav.previous.update(this._slides[e-1])):this.showNav(this._nav.previous,!1),this.preloadTimer=setTimeout(function(){s.preloadSlides(e)},this.options.duration))}goToId(e,r,i){this.goTo(this._findSlideIndex(e),r,i)}preloadSlides(e){this._slides[e+1]&&(this._slides[e+1].loadMedia(),this._slides[e+1].scrollToTop()),this._slides[e+2]&&(this._slides[e+2].loadMedia(),this._slides[e+2].scrollToTop()),this._slides[e-1]&&(this._slides[e-1].loadMedia(),this._slides[e-1].scrollToTop()),this._slides[e-2]&&(this._slides[e-2].loadMedia(),this._slides[e-2].scrollToTop())}next(){var e=this._findSlideIndex(this.current_id);e+1<this._slides.length?this.goTo(e+1):this.goTo(e)}previous(){var e=this._findSlideIndex(this.current_id);e-1>=0?this.goTo(e-1):this.goTo(e)}showNav(e,r){this.options.width<=500&&ga?e.hide():r?e.show():e.hide()}changeBackground(e){var r={r:256,g:256,b:256};e.color_value&&e.color_value!=""?(r=DC(e.color_value),r||(Fe("Invalid color value "+e.color_value),r=this.options.default_bg_color)):(r=this.options.default_bg_color,e.color_value="rgb("+r.r+" , "+r.g+", "+r.b+")"),r.r+""+r.g+r.b,this._el.background.style.backgroundImage="none",e.color_value?this._el.background.style.backgroundColor=e.color_value:this._el.background.style.backgroundColor="transparent",r.r<255||r.g<255||r.b<255||e.image?(this._nav.next.setColor(!0),this._nav.previous.setColor(!0)):(this._nav.next.setColor(!1),this._nav.previous.setColor(!1))}_updateDrawSlides(){for(var e=this.options.layout,r=0;r<this._slides.length;r++)this._slides[r].updateDisplay(this.options.width,this.options.height,e),this._slides[r].setPosition({left:this.slide_spacing*r,top:0});this.goToId(this.current_id,!0,!1)}_initLayout(){this._el.container.classList.add("tl-storyslider"),this._nav.previous=new cv({title:"Previous",description:"description"},{direction:"previous"},this._el.container),this._nav.next=new cv({title:"Next",description:"description"},{direction:"next"},this._el.container),this._el.slider_container_mask=de("div","tl-slider-container-mask",this._el.container),this._el.background=de("div","tl-slider-background tl-animate",this._el.container),this._el.slider_container=de("div","tl-slider-container tlanimate",this._el.slider_container_mask),this._el.slider_item_container=de("div","tl-slider-item-container",this._el.slider_container),this._el.slider_container.setAttribute("aria-live","polite"),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this._el.slider_container.style.left="0px",qr&&(this._swipable=new y_(this._el.slider_container_mask,this._el.slider_container,{enable:{x:!0,y:!1},snap:!0}),this._swipable.enable(),this._message=new $f(this._el.container,{message_class:"tl-message-full",message_icon_class:"tl-icon-swipe-left"},this.getLanguage()),this._message.updateMessage(this._("swipe_to_navigate")),this._message.addTo(this._el.container))}_initEvents(){this._nav.next.on("clicked",this._onNavigation,this),this._nav.previous.on("clicked",this._onNavigation,this),this._message&&this._message.on("clicked",this._onMessageClick,this),this._swipable&&(this._swipable.on("swipe_left",this._onNavigation,this),this._swipable.on("swipe_right",this._onNavigation,this),this._swipable.on("swipe_nodirection",this._onSwipeNoDirection,this))}_initData(){this.data.title&&this._createSlide(this.data.title,!0,-1),this._createSlides(this.data.events)}_onBackgroundChange(e){var r=this._findSlideIndex(this.current_id),i=this._slides[r].getBackground();this.changeBackground(e),this.fire("colorchange",i)}_onMessageClick(e){this._message.hide()}_onSwipeNoDirection(e){this.goToId(this.current_id)}_onNavigation(e){e.direction=="next"||e.direction=="left"?this.next():(e.direction=="previous"||e.direction=="right")&&this.previous(),this.fire("nav_"+e.direction,this.data)}_onSlideAdded(e){Fe("slideadded"),this.fire("slideAdded",this.data)}_onSlideRemoved(e){this.fire("slideRemoved",this.data)}_onSlideChange(e){e||this.fire("change",{unique_id:this.current_id})}_onMouseClick(e){}_fireMouseEvent(e){if(this._loaded){var r=e.type;r=r==="mouseenter"?"mouseover":r==="mouseleave"?"mouseout":r,this.hasEventListeners(r)&&(r==="contextmenu"&&Ae.preventDefault(e),this.fire(r,{latlng:"something",layerPoint:"something else"}))}}_onLoaded(){this.fire("loaded",this.data)}}En(JC,ki,Tn);class ZC{constructor(e,r,i,s){this._el={parent:{},container:{},button_forwardtoend:{},button_backtostart:{},button_zoomin:{},button_zoomout:{},arrow:{},line:{},coverbar:{},grip:{}},this.collapsed=!1,typeof e=="object"?this._el.container=e:this._el.container=ac(e),r&&(this._el.parent=r),this.data={visible_ticks_dates:{}},this.options={width:600,height:600,duration:1e3,ease:Ho,menubar_default_y:0},this.animator={},this.setLanguage(s),tt(this.options,i),this._initLayout(),this._initEvents()}show(e){this.options.duration}hide(e){}toogleZoomIn(e){e?this._el.button_zoomin.removeAttribute("disabled"):this._el.button_zoomin.setAttribute("disabled",!0)}toogleZoomOut(e){e?this._el.button_zoomout.removeAttribute("disabled"):this._el.button_zoomout.setAttribute("disabled",!0)}changeVisibleTicks(e){const r=e.minor;if(!r.length){this.data.visible_ticks_dates={};return}const s=r[0].date.getFullYear(),o=r[r.length-1].date.getFullYear();this.data.visible_ticks_dates={start:s,end:o},this._updateZoomAriaLabels()}setSticky(e){this.options.menubar_default_y=e}setColor(e){e?this._el.container.className="tl-menubar tl-menubar-inverted":this._el.container.className="tl-menubar"}updateDisplay(e,r,i,s){this._updateDisplay(e,r,i,s)}_onButtonZoomIn(e){this.fire("zoom_in",e)}_onButtonZoomOut(e){this.fire("zoom_out",e)}_onButtonForwardToEnd(e){this.fire("forward_to_end",e)}_onButtonBackToStart(e){this.fire("back_to_start",e)}_initLayout(){this._el.button_zoomin=jl("tl-menubar-button",this._el.container),this._el.button_zoomout=jl("tl-menubar-button",this._el.container),this._el.button_forwardtoend=jl("tl-menubar-button",this._el.container),this._el.button_backtostart=jl("tl-menubar-button",this._el.container),ga&&this._el.container.setAttribute("ontouchstart"," "),this._el.button_backtostart.innerHTML="<span class='tl-icon-goback'></span>",this._el.button_backtostart.setAttribute("aria-label",this._("return_to_title")),this._el.button_forwardtoend.innerHTML="<span class='tl-icon-goend'></span>",this._el.button_forwardtoend.setAttribute("aria-label",this._("go_to_end")),this._el.button_zoomin.innerHTML="<span class='tl-icon-zoom-in'></span>",this._el.button_zoomin.setAttribute("aria-label",this._("zoom_in")),this._el.button_zoomout.innerHTML="<span class='tl-icon-zoom-out'></span>",this._el.button_zoomout.setAttribute("aria-label",this._("zoom_out"))}_initEvents(){Ae.addListener(this._el.button_forwardtoend,"click",this._onButtonForwardToEnd,this),Ae.addListener(this._el.button_backtostart,"click",this._onButtonBackToStart,this),Ae.addListener(this._el.button_zoomin,"click",this._onButtonZoomIn,this),Ae.addListener(this._el.button_zoomout,"click",this._onButtonZoomOut,this)}_updateDisplay(e,r,i){e&&(this.options.width=e),r&&(this.options.height=r)}_updateZoomAriaLabels(){Object.keys(this.data.visible_ticks_dates).length==0?(this._el.button_zoomin.setAttribute("aria-description",""),this._el.button_zoomout.setAttribute("aria-description","")):(this._el.button_zoomin.setAttribute("aria-description",this._("aria_label_zoomin",this.data.visible_ticks_dates)),this._el.button_zoomout.setAttribute("aria-description",this._("aria_label_zoomout",this.data.visible_ticks_dates)))}}En(ZC,Si,Tn,ki);let dv=null;if(document){let t=document.getElementsByTagName("script");t&&t.length>0&&(dv=t[t.length-1].src)}function U5(t){return function(e){if(t.config){var r=e.key,i=t._getSlideIndex(self.current_id),s=t.config.events.length-1,a=t.config.title?s+1:s,o=0;r=="ArrowLeft"?i!=o&&t.goToPrev():r=="ArrowRight"&&i!=a&&t.goToNext()}}}class eA{constructor(e,r,i){if(i||(i={}),this.ready=!1,this._el={container:ac(e),storyslider:{},timenav:{},menubar:{}},i.lang&&!i.language&&(i.language=i.lang),this.language=v_,this._storyslider={},this._timenav={},this._menubar={},this._loaded={storyslider:!1,timenav:!1},this.config=null,this.options={script_path:"https://cdn.knightlab.com/libs/timeline3/latest/js/",height:this._el.container.offsetHeight,width:this._el.container.offsetWidth,debug:!1,font:"default",is_embed:!1,is_full_embed:!1,hash_bookmark:!1,default_bg_color:{r:255,g:255,b:255},scale_factor:2,layout:"landscape",timenav_position:"bottom",optimal_tick_width:60,base_class:"tl-timeline",timenav_height:null,timenav_height_percentage:25,timenav_mobile_height_percentage:40,timenav_height_min:175,marker_height_min:30,marker_width_min:100,marker_padding:5,start_at_slide:0,start_at_end:!1,menubar_height:0,skinny_size:650,medium_size:800,use_bc:!1,duration:1e3,ease:Ho,dragging:!0,trackResize:!0,map_type:"stamen:toner-lite",slide_padding_lr:100,slide_default_fade:"0%",zoom_sequence:[.5,1,2,3,5,8,13,21,34,55,89],language:"en",ga_measurement_id:null,ga_property_id:null,track_events:["back_to_start","nav_next","nav_previous","zoom_in","zoom_out"],theme:null,sheets_proxy:"https://sheets-proxy.knightlab.com/proxy/",soundcite:!1},this.animator_timenav=null,this.animator_storyslider=null,this.animator_menubar=null,this.message=new $f(this._el.container,{message_class:"tl-message-full"}),typeof i.default_bg_color=="string"){var s=DC(i.default_bg_color);s?i.default_bg_color=s:(delete i.default_bg_color,Fe("Invalid default background color. Ignoring."))}tt(this.options,i),this.options.script_path||(this.options.script_path=this.determineScriptPath()),i.soundcite&&this.on("ready",()=>{Fe("Loading Soundcite resources "),vm("https://cdn.knightlab.com/libs/soundcite/latest/css/player.css"),la("https://cdn.knightlab.com/libs/soundcite/latest/js/soundcite.min.js")}),this._loadStyles(),document.addEventListener("keydown",U5(this)),window.addEventListener("resize",(function(a){this.updateDisplay()}).bind(this)),this.options.debug&&i6(console.log),this._el.container.classList.add("tl-timeline"),this._el.container.setAttribute("tabindex","0"),this._el.container.setAttribute("role","region"),this._el.container.setAttribute("aria-label",this._("aria_label_timeline")),this.options.is_embed&&this._el.container.classList.add("tl-timeline-embed"),this.options.is_full_embed&&this._el.container.classList.add("tl-timeline-full-embed"),this._loadLanguage(r)}_loadStyles(){let e=null,r=null;if(this.options.font&&(this.options.font.indexOf("http")==0||this.options.font.match(/\.css$/)))e=this.options.font;else if(this.options.font){let i="../css/fonts/font."+this.options.font.toLowerCase()+".css";e=new URL(i,this.options.script_path).toString()}if(e&&vm(e),this.options.theme&&(this.options.theme.indexOf("http")==0||this.options.theme.match(/\.css$/)))r=this.options.theme;else if(this.options.theme){let i="../css/themes/timeline.theme."+this.options.theme.toLowerCase()+".css";r=new URL(i,this.options.script_path).toString()}r&&vm(r)}_loadLanguage(e){try{var r=this.options.language,i=this.options.script_path;b6(r,i).then(s=>{s?(this.language=s,this.message.setLanguage(this.language),this.showMessage(this._("loading_timeline"))):this.showMessage(`Error loading ${r}`),this._initData(e)})}catch(s){this.showMessage(this._translateError(s))}}_initData(e){typeof e=="string"?i5(e,{callback:(function(r){this.setConfig(r)}).bind(this),sheets_proxy:this.options.sheets_proxy}):Ws==e.constructor?this.setConfig(e):this.setConfig(new Ws(e))}_translateError(e){return e.hasOwnProperty("stack")&&Fe(e.stack),e.message_key?this._(e.message_key)+(e.detail?" ["+e.detail+"]":""):e}showMessage(e){this.message?this.message.updateMessage(e):(Fe("No message display available."),Fe(e))}determineScriptPath(){let e=null;if(dv)e=dv;else{let r=document.getElementById("timeline-script-tag");r&&(e=r.src)}if(!e){let r=document.getElementsByTagName("script");for(let i=r.length-1;i>=0;i--)if(r[i].src){e=r[i].src;break}}return e?e.substr(0,e.lastIndexOf("/")+1):""}setConfig(e){if(this.config=e,this.config.isValid()&&(this.config.validate(),this._validateOptions()),this.config.isValid())try{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",this._onDataLoaded.bind(this)):this._onDataLoaded()}catch(a){this.showMessage("<strong>"+this._("error")+":</strong> "+this._translateError(a))}else{for(var r=[],i=0,s=this.config.getErrors();i<s.length;i++)r.push(this._translateError(s[i]));this.showMessage("<strong>"+this._("error")+":</strong> "+r.join("<br>"))}}_onDataLoaded(){this.fire("dataloaded"),this._initLayout(),this._initEvents(),this._initAnalytics(),this.message&&this.message.hide();let e=(i,s)=>{i.reduce((a,o)=>a||o.isIntersecting,!1)&&this.updateDisplay()};new IntersectionObserver(e.bind(this)).observe(this._el.container),this.ready=!0,this.fire("ready")}_initLayout(){this.message.removeFrom(this._el.container),this._el.container.innerHTML="",this.options.timenav_position=="top"?(this._el.timenav=de("div","tl-timenav",this._el.container),this._el.menubar=de("div","tl-menubar",this._el.container),this._el.storyslider=de("div","tl-storyslider",this._el.container)):(this._el.storyslider=de("div","tl-storyslider",this._el.container),this._el.timenav=de("div","tl-timenav",this._el.container),this._el.menubar=de("div","tl-menubar",this._el.container)),this._el.attribution=de("div","tl-attribution",this._el.container),this._el.attribution.innerHTML="<a href='https://timeline.knightlab.com' target='_blank' rel='noopener'><span class='tl-knightlab-logo'></span>TimelineJS</a>",this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.timenav_height=this._calculateTimeNavHeight(this.options.timenav_height),this._timenav=new XC(this._el.timenav,this.config,this.options,this.language),this._timenav.on("loaded",this._onTimeNavLoaded,this),this._timenav.options.height=this.options.timenav_height,this._timenav.init(),this.options.initial_zoom&&this.setZoom(this.options.initial_zoom),this._storyslider=new JC(this._el.storyslider,this.config,this.options,this.language),this._el.storyslider.setAttribute("role","group"),this._el.storyslider.setAttribute("aria-label",this._("aria_label_timeline_content")),this._storyslider.on("loaded",this._onStorySliderLoaded,this),this._storyslider.init(),this._menubar=new ZC(this._el.menubar,this._el.container,this.options,this.getLanguage()),this.options.layout=="portrait"?this.options.storyslider_height=this.options.height-this.options.timenav_height-1:this.options.storyslider_height=this.options.height-1,this._updateDisplay()}_initEvents(){this._timenav.on("change",this._onTimeNavChange,this),this._timenav.on("zoomtoggle",this._onZoomToggle,this),this._timenav.on("visible_ticks_change",this._onVisibleTicksChange,this),this._storyslider.on("change",this._onSlideChange,this),this._storyslider.on("colorchange",this._onColorChange,this),this._storyslider.on("nav_next",this._onStorySliderNext,this),this._storyslider.on("nav_previous",this._onStorySliderPrevious,this),this._menubar.on("zoom_in",this._onZoomIn,this),this._menubar.on("zoom_out",this._onZoomOut,this),this._menubar.on("forward_to_end",this._onForwardToEnd,this),this._menubar.on("back_to_start",this._onBackToStart,this)}_onColorChange(e){this.fire("color_change",{unique_id:this.current_id},this)}_onSlideChange(e){this.current_id!=e.unique_id&&(this.current_id=e.unique_id,this._timenav.goToId(this.current_id),this._onChange(e))}_onTimeNavChange(e){this.current_id!=e.unique_id&&(this.current_id=e.unique_id,this._storyslider.goToId(this.current_id),this._onChange(e))}_onZoomToggle(e){e.zoom=="in"?this._menubar.toogleZoomIn(e.show):e.zoom=="out"&&this._menubar.toogleZoomOut(e.show)}_onChange(e){this.fire("change",{unique_id:this.current_id},this),this.options.hash_bookmark&&this.current_id&&this._updateHashBookmark(this.current_id)}_onVisibleTicksChange(e){this._menubar.changeVisibleTicks(e.visible_ticks)}_onForwardToEnd(e){this.goToEnd(),this.fire("forward_to_end",{unique_id:this.current_id},this)}_onBackToStart(e){this.goToStart(),this.fire("back_to_start",{unique_id:this.current_id},this)}_onZoomIn(e){this._timenav.zoomIn(),this.fire("zoom_in",{zoom_level:this._timenav.options.scale_factor},this)}_onZoomOut(e){this._timenav.zoomOut(),this.fire("zoom_out",{zoom_level:this._timenav.options.scale_factor},this)}_onTimeNavLoaded(){this._loaded.timenav=!0,this._onLoaded()}_onStorySliderLoaded(){this._loaded.storyslider=!0,this._onLoaded()}_onStorySliderNext(e){this.fire("nav_next",e)}_onStorySliderPrevious(e){this.fire("nav_previous",e)}_updateDisplay(e,r,i){var s=this.options.duration,a=this.options.base_class,o=0;i&&(s=i),this.options.width=this._el.container.offsetWidth,this.options.height=this._el.container.offsetHeight,this.options.width<=this.options.skinny_size?(a+=" tl-skinny",this.options.layout="portrait"):this.options.width<=this.options.medium_size?(a+=" tl-medium",this.options.layout="landscape"):this.options.layout="landscape",qr&&(this.options.layout=n6()),ga?(a+=" tl-mobile",this.options.timenav_height=this._calculateTimeNavHeight(e,this.options.timenav_mobile_height_percentage)):this.options.timenav_height=this._calculateTimeNavHeight(e),this.options.layout=="portrait"?a+=" tl-layout-portrait":a+=" tl-layout-landscape",this.options.storyslider_height=this.options.height-this.options.timenav_height,this.options.timenav_position=="top"?o=Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-39/2:o=Math.round(this.options.storyslider_height+1+Math.ceil(this.options.timenav_height)/2-this._el.menubar.offsetHeight/2-35/2),r?(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this.animator_storyslider&&this.animator_storyslider.stop(),this.animator_storyslider=xi(this._el.storyslider,{height:this.options.storyslider_height+"px",duration:s/2,easing:Pu}),this.animator_menubar&&this.animator_menubar.stop(),this.animator_menubar=xi(this._el.menubar,{top:o+"px",duration:s/2,easing:Pu})):(this._el.timenav.style.height=Math.ceil(this.options.timenav_height)+"px",this._el.storyslider.style.height=this.options.storyslider_height+"px",this._el.menubar.style.top=o+"px"),this.message&&this.message.updateDisplay(this.options.width,this.options.height),this._timenav.updateDisplay(this.options.width,this.options.timenav_height,r),this._storyslider.updateDisplay(this.options.width,this.options.storyslider_height,r,this.options.layout),this.language.direction=="rtl"&&(a+=" tl-rtl"),this._el.container.className=a}_calculateTimeNavHeight(e,r){var i=0;return(this.options.timenav_height_percentage||r)&&(r?i=Math.round(this.options.height/100*r):i=Math.round(this.options.height/100*this.options.timenav_height_percentage)),this._timenav.ready&&this.options.timenav_height_min<this._timenav.getMinimumHeight()&&(this.options.timenav_height_min=this._timenav.getMinimumHeight()),i<this.options.timenav_height_min&&(i=this.options.timenav_height_min),i=i-this.options.marker_padding*2,i}_validateOptions(){for(var e=["timenav_height","timenav_height_min","marker_height_min","marker_width_min","marker_padding","start_at_slide","slide_padding_lr"],r=0;r<e.length;r++){var i=e[r],s=this.options[i];let a=!0;typeof s=="number"?a=s==parseInt(s):typeof s=="string"&&(a=s.match(/^\s*(\-?\d+)?\s*$/)),a||this.config.logError({message_key:"invalid_integer_option",detail:i})}}_getSlideIndex(e){if(this.config){if(this.config.title&&this.config.title.unique_id==e)return 0;for(var r=0;r<this.config.events.length;r++)if(e==this.config.events[r].unique_id)return this.config.title?r+1:r}return-1}_getEventIndex(e){for(var r=0;r<this.config.events.length;r++)if(e==this.config.events[r].unique_id)return r;return-1}_onLoaded(){if(this._loaded.storyslider&&this._loaded.timenav&&(this.fire("loaded",this.config),r6(this.options.start_at_end)||this.options.start_at_slide>this.config.events.length?this.goToEnd():this.goTo(this.options.start_at_slide),this.options.hash_bookmark)){window.location.hash!=""?this.goToId(window.location.hash.replace("#event-","")):this._updateHashBookmark(this.current_id);let e=this;window.addEventListener("hashchange",function(){window.location.hash.indexOf("#event-")==0&&e.goToId(window.location.hash.replace("#event-",""))},!1)}}_updateHashBookmark(e){if(e){var r="#event-"+e.toString();window.history.replaceState(null,"Browsing TimelineJS",r),this.fire("hash_updated",{unique_id:this.current_id,hashbookmark:"#event-"+e.toString()},this)}}zoomIn(){this._timenav.zoomIn()}zoomOut(){this._timenav.zoomOut()}setZoom(e){this._timenav.setZoom(e)}goToId(e){this.current_id!=e&&(this.current_id=e,this._timenav.goToId(this.current_id),this._storyslider.goToId(this.current_id,!1,!0),this.fire("change",{unique_id:this.current_id},this))}goTo(e){if(!(e<0))try{this.config.title?e===0?this.goToId(this.config.title.unique_id):this.goToId(this.config.events[e-1].unique_id):this.goToId(this.config.events[e].unique_id)}catch{return}}goToStart(){this.goTo(0)}goToEnd(){var e=this.config.events.length-1;this.goTo(this.config.title?e+1:e)}goToPrev(){this.goTo(this._getSlideIndex(this.current_id)-1),this.focusContainer()}goToNext(){this.goTo(this._getSlideIndex(this.current_id)+1),this.focusContainer()}add(e){var r=this.config.addEvent(e),i=this._getEventIndex(r),s=this.config.events[i];this._storyslider.createSlide(s,this.config.title?i+1:i),this._storyslider._updateDrawSlides(),this._timenav.createMarker(s,i),this._timenav._updateDrawTimeline(!1),this.fire("added",{unique_id:r})}remove(e){if(e>=0&&e<this.config.events.length){this.config.events[e].unique_id==this.current_id&&(e<this.config.events.length-1?this.goTo(e+1):this.goTo(e-1));var r=this.config.events.splice(e,1);delete this.config.event_dict[r[0].unique_id],this._storyslider.destroySlide(this.config.title?e+1:e),this._storyslider._updateDrawSlides(),this._timenav.destroyMarker(e),this._timenav._updateDrawTimeline(!1),this.fire("removed",{unique_id:r[0].unique_id})}}removeId(e){this.remove(this._getEventIndex(e))}getData(e){if(this.config.title){if(e==0)return this.config.title;if(e>0&&e<=this.config.events.length)return this.config.events[e-1]}else if(e>=0&&e<this.config.events.length)return this.config.events[e];return null}getDataById(e){return this.getData(this._getSlideIndex(e))}getSlide(e){return e>=0&&e<this._storyslider._slides.length?this._storyslider._slides[e]:null}getSlideById(e){return this.getSlide(this._getSlideIndex(e))}getCurrentSlide(){return this.getSlideById(this.current_id)}updateDisplay(){this.ready?this._updateDisplay():Fe("updateDisplay called but timeline is not in ready state")}focusContainer(){this._el.container.focus()}_initGoogleAnalytics(e){la(`https://www.googletagmanager.com/gtag/js?id=${e}`),window.dataLayer=window.dataLayer||[],window.gtag=function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config",e)}_initAnalytics(){let e=this.options.ga_measurement_id||this.options.ga_property_id||null;if(e){this._initGoogleAnalytics(e);var r=this.options.track_events;for(let s=0;s<r.length;s++){var i=r[s];this.addEventListener(i,function(a){gtag("event",a.type)})}}}}En(eA,ki,Tn);function B5(){const t=M.useRef(null),[e,r]=M.useState(null),[i,s]=M.useState(!0),[a,o]=M.useState(null);M.useEffect(()=>{async function d(){try{const h=await nr(Dn(Xt,"timelineEvents")),f=l(h);r({title:{media:{url:"",caption:"",credit:""},text:{headline:"Civil Rights Movement Timeline",text:"Key events from the Civil Rights Movement, identified from interviews from the Library of Congress Civil Rights History Project."}},events:f}),s(!1)}catch(h){console.error("Error fetching timeline data:",h),o("Failed to load timeline events."),s(!1)}}d()},[]),M.useEffect(()=>{if(e&&t.current){t.current.innerHTML="";try{new eA(t.current,e),setTimeout(u,1e3)}catch(d){console.error("Error initializing Timeline.js:",d),o("Failed to initialize timeline.")}}},[e]);const l=d=>d.docs.map(h=>{const f=h.data(),p=new Date(f.date),g=f.keywords?f.keywords.split(",").map(A=>A.trim()):[],_=`
        ${f.description||""}
        <br><br>
        <button 
          class="relevant-interviews-button" 
          data-keywords="${encodeURIComponent(g.join(","))}"
          style="background-color: #2563eb; color: white; padding: 10px 16px; border: none; border-radius: 8px; cursor: pointer; display: flex; align-items: center; font-family: inherit; font-size: 14px; font-weight: 500; transition: background-color 0.2s; box-shadow: 0 1px 3px rgba(0,0,0,0.1);"
          onmouseover="this.style.backgroundColor = '#1d4ed8'"
          onmouseout="this.style.backgroundColor = '#2563eb'"
        >
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" style="width: 20px; height: 20px; margin-right: 8px;">
            <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd" />
          </svg>
          Relevant Interviews
        </button>
      `;return{start_date:{year:p.getFullYear(),month:p.getMonth()+1,day:p.getDate()},text:{headline:f.title,text:_},media:{url:f.mediaUrl||"",caption:f.mediaCaption||"",credit:f.mediaCredit||""}}}),u=()=>{document.querySelectorAll(".relevant-interviews-button").forEach(d=>{d.addEventListener("click",function(h){h.preventDefault(),h.stopPropagation();const f=this.dataset.keywords;f&&(window.location.href=`/playlist-builder?keywords=${f}`)})})};return i?v.jsxs("div",{className:"flex justify-center items-center h-96 bg-gray-50",children:[v.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),v.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):a?v.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg text-center mx-auto my-6 max-w-xl",children:a}):v.jsxs("div",{className:"w-full max-w-7xl mx-auto p-6 bg-gray-50 font-sans",children:[v.jsxs("div",{className:"mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Civil Rights Timeline"}),v.jsx("p",{className:"text-base leading-relaxed text-gray-600",children:"Explore key events from the Civil Rights Movement, with links to relevant interview recordings."})]}),v.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden p-0 mb-6",children:v.jsx("div",{ref:t,id:"timeline-embed",style:{height:"600px",width:"100%",position:"relative"}})}),v.jsx("div",{className:"bg-indigo-50 rounded-xl p-4 px-6 border-l-4 border-indigo-500",children:v.jsxs("p",{className:"text-sm leading-relaxed text-indigo-800 m-0",children:[v.jsx("strong",{children:"Tip:"}),' Click on any event to see details, and use the "Relevant Interviews" button to find related interview recordings.']})})]})}function z5(){const[t,e]=M.useState([]),[r,i]=M.useState(!0),[s,a]=M.useState(null),[o,l]=M.useState(""),[u,d]=M.useState(null),[h,f]=M.useState(!1),p=xs();M.useEffect(()=>{A()},[]),M.useEffect(()=>{u&&f(!0)},[u]);const g=()=>{f(!1)},_=I=>{const y=I==null?void 0:I.match(/embed\/([a-zA-Z0-9_-]+)/);return y?y[1]:null},A=async()=>{try{i(!0);const I=await nr(Dn(Xt,"interviewSummaries")),y=[];I.forEach(b=>{const T=b.data(),O=_(T.videoEmbedLink);y.push({id:b.id,name:T.name||"Unknown Name",role:T.role||"Unknown Role",videoEmbedLink:T.videoEmbedLink,thumbnailUrl:O?`https://img.youtube.com/vi/${O}/hqdefault.jpg`:null})}),e(y),i(!1)}catch(I){console.error("Error fetching people:",I),a("Failed to load interview subjects"),i(!1)}},P=()=>{if(!u)return;const I=t.filter(b=>b.name.toLowerCase().includes(o.toLowerCase())),y=I.findIndex(b=>b.id===u.id);y>0?d(I[y-1]):d(I[I.length-1])},S=()=>{if(!u)return;const I=t.filter(b=>b.name.toLowerCase().includes(o.toLowerCase())),y=I.findIndex(b=>b.id===u.id);y<I.length-1?d(I[y+1]):d(I[0])};M.useEffect(()=>{const I=y=>{h&&(y.key==="ArrowLeft"?P():y.key==="ArrowRight"?S():y.key==="Escape"&&g())};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[h,u,o]);const w=()=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:v.jsx("polyline",{points:"15 18 9 12 15 6"})}),x=()=>v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:v.jsx("polyline",{points:"9 18 15 12 9 6"})}),R=()=>v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[v.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),v.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),F=({person:I,isOpen:y,onClose:b,onPrev:T,onNext:O})=>{if(!y||!I)return null;const D=K=>{K.target===K.currentTarget&&b()};return v.jsxs("div",{className:"fixed inset-0 flex items-center justify-center z-50 p-4",children:[v.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-60",onClick:D}),v.jsx("button",{className:"absolute left-4 md:left-8 z-50 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:K=>{K.stopPropagation(),T()},"aria-label":"Previous person",children:v.jsx(w,{})}),v.jsx("button",{className:"absolute right-4 md:right-8 z-50 bg-black bg-opacity-60 text-white rounded-full w-10 h-10 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:K=>{K.stopPropagation(),O()},"aria-label":"Next person",children:v.jsx(x,{})}),v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-md w-full overflow-hidden animate-fadeIn z-50 relative",children:[v.jsxs("div",{className:"relative",children:[I.thumbnailUrl&&v.jsx("div",{className:"w-full h-48 overflow-hidden",children:v.jsx("img",{src:I.thumbnailUrl,alt:I.name,className:"w-full h-full object-cover scale-125"})}),v.jsx("button",{className:"absolute top-2 right-2 bg-black bg-opacity-60 text-white rounded-full w-8 h-8 flex items-center justify-center hover:bg-opacity-80 transition-colors",onClick:b,"aria-label":"Close",children:v.jsx(R,{})})]}),v.jsxs("div",{className:"p-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white mb-2",children:I.name}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:I.role}),v.jsx("button",{onClick:()=>p(`/interview-player?documentName=${encodeURIComponent(I.id)}`),className:"w-full bg-blue-600 text-white px-4 py-3 rounded-md hover:bg-blue-700 transition-colors duration-200 font-medium",children:"View Interview"})]})]})]})},V=({person:I})=>{const y=(u==null?void 0:u.id)===I.id;return v.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[v.jsx("div",{}),v.jsx("div",{className:`w-20 h-20 sm:w-24 sm:h-24 md:w-28 md:h-28 rounded-md 
                    overflow-hidden shadow-md cursor-pointer transition-all duration-200
                    ${y?"ring-4 ring-blue-500":"hover:ring-2 hover:ring-blue-300"}`,onClick:()=>d(I),style:{touchAction:"manipulation"},children:I.thumbnailUrl?v.jsx("div",{className:"w-full h-full overflow-hidden",children:v.jsx("img",{src:I.thumbnailUrl,alt:I.name,className:"w-full h-full object-cover object-center scale-150",draggable:!1,loading:"lazy"})}):v.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:v.jsx("span",{className:"text-gray-400 text-xs",children:"No photo"})})}),v.jsx("div",{className:"text-center w-full",children:v.jsx("p",{className:`text-xs sm:text-sm truncate max-w-full ${y?"font-bold text-blue-600":"text-gray-700"}`,children:I.name})})]})};if(r)return v.jsx("div",{className:"flex justify-center items-center h-screen",children:v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(s)return v.jsx("div",{className:"flex justify-center items-center h-screen",children:v.jsx("div",{className:"text-red-500",children:s})});if(t.length===0)return v.jsx("div",{className:"flex justify-center items-center h-screen",children:v.jsx("div",{className:"text-gray-500",children:"No interview subjects found"})});const N=t.filter(I=>I.name.toLowerCase().includes(o.toLowerCase()));return v.jsxs("div",{className:"container mx-auto px-4 py-8 min-h-screen",children:[v.jsxs("div",{className:"mb-6 max-w-xl mx-auto text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:o?`${N.length} of ${t.length} People`:`${t.length} People`}),v.jsx("input",{type:"text",value:o,onChange:I=>l(I.target.value),placeholder:"Search by name...",className:"w-full p-3 border border-gray-300 rounded-md focus:outline-none focus:ring focus:border-blue-300"})]}),v.jsx("div",{className:"max-w-6xl mx-auto",children:v.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 xl:grid-cols-7 gap-x-4 gap-y-6",children:N.map(I=>v.jsx(V,{person:I},I.id))})}),v.jsx(F,{person:u,isOpen:h,onClose:g,onPrev:P,onNext:S})]})}function $5({activeVisualization:t}){return v.jsxs("div",{className:"w-full max-w-5xl mx-auto p-6 bg-white shadow-md rounded-md",children:[t==="keywords"&&v.jsx(GB,{}),t==="map"&&v.jsx(XB,{}),t==="timeline"&&v.jsx(B5,{}),t==="people"&&v.jsx(z5,{})]})}function H5(){const[t,e]=M.useState("timeline"),{user:r}=nc(),i=["timeline","keywords","map","people"];return v.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[v.jsx("div",{className:"text-center mb-8",children:v.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text mb-6",children:"Civil Rights History Project"})}),v.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden transition-all duration-300 mb-6",children:[v.jsx("div",{className:"border-b border-gray-200",children:v.jsx("ul",{className:"flex flex-wrap m-0 p-0 list-none",children:i.map(s=>v.jsx("li",{className:"flex-1",children:v.jsx("button",{onClick:()=>e(s),className:`w-full py-4 px-1 text-sm text-center transition-all duration-300 cursor-pointer border-0 ${t===s?"bg-indigo-50 text-blue-800 font-semibold border-b-2 border-blue-600":"bg-transparent text-gray-500 font-normal border-b-0"}`,children:s.charAt(0).toUpperCase()+s.slice(1)})},s))})}),v.jsx("div",{className:"p-6",children:v.jsx($5,{activeVisualization:t})})]})]})}function W5(){var g,_;const[t,e]=M.useState(""),[r,i]=M.useState(""),[s,a]=M.useState(!1),[o,l]=M.useState(""),{login:u}=nc(),d=xs(),f=((_=(g=dr().state)==null?void 0:g.from)==null?void 0:_.pathname)||"/",p=async A=>{if(A.preventDefault(),!t||!r){l("Please enter both email and password");return}try{a(!0),l(""),await u(t,r),d(f,{replace:!0})}catch(P){console.error("Login error:",P);let S="Failed to log in";P.code==="auth/invalid-email"?S="Invalid email address":P.code==="auth/user-not-found"?S="No account found with this email":P.code==="auth/wrong-password"?S="Incorrect password":P.code==="auth/too-many-requests"&&(S="Too many failed login attempts. Please try again later"),l(S)}finally{a(!1)}};return v.jsxs("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6 font-sans",children:[v.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-xl shadow-md",children:[v.jsxs("div",{className:"mb-8",children:[v.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-4",children:"Sign in to your account"}),v.jsx("p",{className:"text-sm text-center text-gray-500 mt-2",children:"Enter your credentials to access your account"})]}),o&&v.jsx("div",{className:"bg-red-100 border-l-4 border-red-500 p-4 mb-6 rounded",children:v.jsxs("div",{className:"flex",children:[v.jsx("div",{className:"flex-shrink-0",children:v.jsx("svg",{className:"h-5 w-5 text-red-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),v.jsx("div",{className:"ml-3",children:v.jsx("p",{className:"text-sm text-red-700",children:o})})]})}),v.jsxs("form",{className:"mt-6",onSubmit:p,children:[v.jsxs("div",{className:"mb-6",children:[v.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email address"}),v.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:A=>e(A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"you@example.com"})]}),v.jsxs("div",{className:"mb-6",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2",children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),v.jsx("a",{href:"#",className:"text-xs text-blue-600 hover:text-blue-700 transition-colors",children:"Forgot password?"})]}),v.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:r,onChange:A=>i(A.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm text-gray-900 bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"••••••••"})]}),v.jsx("div",{className:"mt-8",children:v.jsx("button",{type:"submit",disabled:s,className:`w-full flex justify-center items-center py-3 px-4 relative bg-blue-600 text-white text-sm font-medium border-0 rounded-lg shadow-sm transition-colors ${s?"opacity-70 cursor-not-allowed":"hover:bg-blue-700 cursor-pointer"}`,children:s?v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"absolute left-6 flex items-center",children:v.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[v.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),v.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),v.jsx("span",{children:"Signing in..."})]}):v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"absolute left-6 flex items-center",children:v.jsx("svg",{className:"h-5 w-5 text-blue-200",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),v.jsx("span",{children:"Sign in"})]})})}),v.jsx("div",{className:"mt-6 text-center",children:v.jsxs("p",{className:"text-sm text-gray-500",children:["Don't have an account?"," ",v.jsx("a",{href:"#",className:"text-blue-600 font-medium hover:text-blue-700 transition-colors",children:"Sign up"})]})})]})]}),v.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
      `})]})}function fE(t){return t?t.split(",").map(e=>e.trim().toLowerCase()).filter(e=>e.length>0):[]}function hv(t){if(!t)return null;const e=t.match(/embed\/([a-zA-Z0-9_-]+)/);return e?e[1]:null}function q5(t){if(!t)return"00:00";const e=t.match(/(?:\[)?(\d{1,2}:\d{2}(?::\d{2})?)/);return e?e[1]:"00:00"}function fv(t){if(!t)return 0;const e=t.split(":").map(Number);return e.length===2?e[0]*60+e[1]:e.length===3?e[0]*3600+e[1]*60+e[2]:0}function cd(t){if(t==null)return"0:00";const e=Math.floor(t/3600),r=Math.floor(t%3600/60),i=Math.floor(t%60);return e>0?`${e}:${r.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`:`${r}:${i.toString().padStart(2,"0")}`}function Zl(t){if(!t)return{startSeconds:0,endSeconds:0};const e=t.split("-").map(s=>s.trim());if(e.length!==2)return{startSeconds:0,endSeconds:0};const r=fv(e[0]),i=fv(e[1]);return{startSeconds:r,endSeconds:i}}const G5=({videoQueue:t,currentVideoIndex:e,setCurrentVideoIndex:r,currentTime:i,totalDuration:s})=>{const a=M.useRef(null),o=M.useRef(null),[l,u]=M.useState(0),[d,h]=M.useState(0),[f,p]=M.useState(null);M.useEffect(()=>{let _=0;for(let A=0;A<e;A++)if(t[A]){const{startSeconds:P,endSeconds:S}=Zl(t[A].timestamp);_+=S-P||300}if(_+=i,h(_),s&&s>0){const A=_/s*100;u(Math.min(A,100))}},[t,e,i,s]);const g=t.map((_,A)=>{const{startSeconds:P,endSeconds:S}=Zl(_.timestamp),w=S-P||300,x=w/s*100,R=hv(_.videoEmbedLink);return{id:A,width:x,duration:w,isActive:A===e,videoId:R,name:_.name||"Untitled"}});return v.jsxs("div",{children:[v.jsx("div",{ref:a,style:{position:"relative",width:"100%",backgroundColor:"#e5e7eb",marginBottom:"10px",borderRadius:"8px",overflow:"hidden",padding:"10px",boxSizing:"border-box",border:"1px solid #d1d5db",display:"flex"},children:g.map(_=>v.jsxs("div",{onClick:()=>r(_.id),onMouseEnter:()=>p(_.id),onMouseLeave:()=>p(null),style:{width:`${_.width}%`,minWidth:"60px",padding:"0 2px",boxSizing:"border-box",position:"relative",cursor:"pointer"},children:[v.jsxs("div",{style:{position:"relative",overflow:"hidden",borderRadius:"6px",border:`2px solid ${_.isActive?"#3b82f6":"#d1d5db"}`,height:"70px",boxShadow:_.isActive?"0 2px 5px rgba(0,0,0,0.2)":"none"},children:[v.jsx("img",{src:`https://img.youtube.com/vi/${_.videoId}/mqdefault.jpg`,alt:`Thumbnail for segment ${_.id+1}`,style:{width:"100%",maxHeight:"80px",objectFit:"contain",borderRadius:"6px"},onError:A=>{A.target.src="https://via.placeholder.com/120x60?text=No+Thumbnail"}}),_.isActive&&v.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${i/_.duration*100}%`,backgroundColor:"rgba(255, 0, 0, 0.5)",transition:"width 0.2s linear"}}),v.jsx("div",{style:{position:"absolute",bottom:"0",left:"0",right:"0",backgroundColor:"rgba(0,0,0,0.6)",color:"white",fontSize:"11px",textAlign:"center",padding:"2px 0"},children:cd(_.duration)})]}),f===_.id&&v.jsxs("div",{style:{position:"absolute",top:"-30px",left:"50%",transform:"translateX(-50%)",backgroundColor:"#1f2937",color:"white",padding:"2px 6px",borderRadius:"4px",fontSize:"11px",zIndex:50,whiteSpace:"nowrap"},children:[_.name," (",cd(_.duration),")"]})]},`thumb-${_.id}`))}),v.jsxs("div",{style:{position:"relative",width:"100%",height:"8px",backgroundColor:"#d1d5db",borderRadius:"4px",overflow:"hidden",marginBottom:"10px"},children:[g.map(_=>v.jsx("div",{style:{width:`${_.width}%`,height:"100%",backgroundColor:_.isActive?"#bfdbfe":"#f3f4f6",borderRight:"1px solid #d1d5db",position:"relative"},children:_.isActive&&v.jsx("div",{style:{position:"absolute",top:0,left:0,height:"100%",width:`${i/_.duration*100}%`,backgroundColor:"#3b82f6",opacity:.7}})},`bar-${_.id}`)),v.jsx("div",{ref:o,style:{position:"absolute",top:"-3px",left:`${l}%`,transform:"translateX(-50%)",width:"4px",height:"14px",backgroundColor:"red",borderRadius:"2px",zIndex:9999,transition:"left 0.1s linear"},children:v.jsx("div",{style:{position:"absolute",top:"-4px",left:"50%",transform:"translate(-50%, -50%)",width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"red"}})})]}),v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"4px 10px",backgroundColor:"#f3f4f6",borderRadius:"4px",fontSize:"12px",marginBottom:"10px"},children:[v.jsx("div",{children:cd(d)}),v.jsxs("div",{style:{fontWeight:"bold"},children:[l.toFixed(1),"%"]}),v.jsx("div",{children:cd(s)})]})]})},K5=({onPrevious:t,onPlay:e,onPause:r,onNext:i,isPlaying:s,hasPrevious:a,hasNext:o})=>v.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"24px",padding:"12px",backgroundColor:"#f3f4f6",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",margin:"20px auto",border:"2px solid #d1d5db",maxWidth:"320px"},children:[v.jsx("button",{onClick:t,disabled:!a,style:{padding:"12px",borderRadius:"9999px",backgroundColor:a?"#3b82f6":"#9ca3af",color:"white",border:"none",cursor:a?"pointer":"not-allowed",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),v.jsx("button",{onClick:s?r:e,style:{padding:"16px",borderRadius:"9999px",backgroundColor:"#3b82f6",color:"white",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:s?v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 9v6m4-6v6"})}):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})}),v.jsx("button",{onClick:i,disabled:!o,style:{padding:"12px",borderRadius:"9999px",backgroundColor:o?"#3b82f6":"#9ca3af",color:"white",border:"none",cursor:o?"pointer":"not-allowed",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),Y5=({nextKeyword:t,thumbnailUrl:e,onPlay:r})=>v.jsxs("div",{style:{width:"240px",backgroundColor:"#f3f4f6",borderRadius:"8px",boxShadow:"0 2px 5px rgba(0,0,0,0.1)",border:"2px solid #d1d5db",overflow:"hidden"},children:[v.jsx("div",{className:"relative",children:v.jsxs("div",{style:{width:"100%",height:"120px",backgroundImage:e?`url(${e})`:"none",backgroundColor:e?"transparent":"#e5e7eb",backgroundSize:"cover",backgroundPosition:"center"},children:[!e&&v.jsx("div",{className:"flex items-center justify-center h-full",children:v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"text-gray-400",children:[v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]})}),v.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:v.jsx("button",{onClick:r,style:{padding:"12px",borderRadius:"9999px",backgroundColor:"#3b82f6",color:"white",border:"none",cursor:"pointer",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",display:"flex",alignItems:"center",justifyContent:"center"},children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"})})})})]})}),v.jsxs("div",{style:{padding:"12px"},children:[v.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[v.jsx("h3",{style:{fontSize:"14px",fontWeight:"600",color:"#374151",margin:0},children:"Up Next"}),v.jsx("span",{style:{backgroundColor:"#dbeafe",color:"#1e40af",fontSize:"12px",fontWeight:"500",padding:"2px 8px",borderRadius:"4px"},children:t})]}),v.jsx("p",{style:{fontSize:"12px",color:"#6b7280",margin:0},children:"Plays automatically when current playlist ends"})]})]}),X5=({onClick:t})=>v.jsx("button",{onClick:t,className:"flex items-center justify-center p-2 rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 focus:outline-none transition-colors duration-200",title:"Shuffle and get new clips",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{d:"M8 5a1 1 0 100 2h5.586l-1.293 1.293a1 1 0 001.414 1.414l3-3a1 1 0 000-1.414l-3-3a1 1 0 10-1.414 1.414L13.586 5H8zM12 15a1 1 0 100-2H6.414l1.293-1.293a1 1 0 10-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L6.414 15H12z"})})}),Q5=({isOpen:t,onConfirm:e,onCancel:r,message:i})=>t?v.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:v.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-sm mx-auto",children:[v.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Confirmation"}),v.jsx("p",{className:"text-sm text-gray-600 mb-4",children:i}),v.jsxs("div",{className:"flex justify-end space-x-3",children:[v.jsx("button",{onClick:r,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500",children:"Cancel"}),v.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Confirm"})]})]})}):null,J5=()=>{const[t]=Ty(),e=xs(),[r,i]=M.useState(""),[s,a]=M.useState([]),[o,l]=M.useState(0),[u,d]=M.useState(!0),[h,f]=M.useState(null),[p,g]=M.useState(!0),[_,A]=M.useState(0),[P,S]=M.useState(0),[w,x]=M.useState(0),[R,F]=M.useState(!1),[V,N]=M.useState([]),[I,y]=M.useState(""),[b,T]=M.useState(""),[O,D]=M.useState(!1),K=M.useRef(null),ie=M.useRef(null),oe=M.useRef(Date.now()),he=M.useRef(null);M.useEffect(()=>{if(s.length>0){const j=s.reduce((U,z)=>{const{startSeconds:Z,endSeconds:ce}=Zl(z.timestamp);return U+(ce-Z||300)},0);console.log("Calculated total duration:",j),x(j)}},[s]),M.useEffect(()=>{const j=t.get("keywords");j&&(console.log(`Found keyword: ${j}`),i(j))},[t]),M.useEffect(()=>{r&&(console.log(`Searching videos for: ${r}`),ge())},[r]),M.useEffect(()=>{Y()},[]),M.useEffect(()=>{V.length>0&&r&&se()},[V,r]),M.useEffect(()=>(O&&I&&(he.current&&clearTimeout(he.current),he.current=setTimeout(()=>{console.log(`Navigating to next playlist: ${I}`),e(`?keywords=${encodeURIComponent(I)}`),D(!1)},3e3)),()=>{he.current&&clearTimeout(he.current)}),[O,I,e]),M.useEffect(()=>(ie.current&&(clearInterval(ie.current),ie.current=null),s.length>0&&p&&(console.log("Starting timer for manual time tracking"),ie.current=setInterval(()=>{A(j=>{const U=j+1;S(q()+U);const z=s[o];if(z){const{startSeconds:Z,endSeconds:ce}=Zl(z.timestamp),be=ce-Z;if(U>=be)return console.log("End of video reached, auto-advancing"),o===s.length-1?(console.log("Playlist ended, preparing to play next keyword"),D(!0),U):(setTimeout(()=>l(Ce=>Ce+1),500),0)}return U})},1e3)),()=>{ie.current&&clearInterval(ie.current)}),[s,o,p]),M.useEffect(()=>{s.length>0&&(A(0),oe.current=Date.now(),console.log("Video index changed to:",o))},[o]);const q=()=>{if(!s.length)return 0;let j=0;for(let U=0;U<o;U++){const{startSeconds:z,endSeconds:Z}=Zl(s[U].timestamp);j+=Z-z||300}return j},Y=async()=>{try{const j=new Set,U=await nr(Dn(Xt,"interviewSummaries"));for(const Z of U.docs){const ce=Z.id,be=Dn(Xt,"interviewSummaries",ce,"subSummaries");(await nr(be)).forEach(Be=>{(Be.data().keywords||"").split(",").map(Je=>Je.trim().toLowerCase()).forEach(Je=>{Je&&j.add(Je)})})}const z=Array.from(j);console.log(`Found ${z.length} total keywords:`,z),N(z)}catch(j){console.error("Error fetching available keywords:",j)}},se=()=>{if(V.length===0)return;const j=V.filter(Z=>Z!==r);if(j.length===0)return;const U=Math.floor(Math.random()*j.length),z=j[U];console.log(`Selected next keyword: ${z}`),y(z),re(z)},re=async j=>{try{const U=fE(j);if(U.length===0)return;const z=await Oe(U);if(z.length>0){const Z=z[0];if(Z.videoEmbedLink){const ce=hv(Z.videoEmbedLink);if(ce){const be=`https://img.youtube.com/vi/${ce}/mqdefault.jpg`;T(be);return}}}T("")}catch(U){console.error("Error fetching thumbnail:",U),T("")}},W=()=>{I&&e(`?keywords=${encodeURIComponent(I)}`)},H=()=>{F(!0)},Q=()=>{F(!1),ge()},X=()=>{F(!1)},ue=j=>j.sort(()=>Math.random()-.5),ge=async()=>{try{d(!0);const j=fE(r);if(j.length===0){f("Please enter at least one keyword"),d(!1);return}let U=await Oe(j);U.length>0?(U=ue(U).slice(0,3),console.log(`Selected ${U.length} random videos`),a(U),l(0),g(!0),A(0),S(0),oe.current=Date.now(),D(!1)):f("No videos found for this keyword"),d(!1)}catch(j){console.error("Error searching videos:",j),f("Error searching videos"),d(!1)}},Oe=async j=>{const U=await nr(Dn(Xt,"interviewSummaries")),z=[];for(const Z of U.docs){const ce=Z.id,be=Z.data(),Ce=Dn(Xt,"interviewSummaries",ce,"subSummaries");(await nr(Ce)).forEach(Xe=>{const Ie=Xe.data(),Je=(Ie.keywords||"").split(",").map(hr=>hr.trim().toLowerCase());j.some(hr=>Je.includes(hr))&&z.push({id:Xe.id,documentName:ce,...Ie,...be})})}return z},Ne=()=>{o<s.length-1&&(l(o+1),g(!0))},He=()=>{o>0&&(l(o-1),g(!0))},We=()=>{if(K.current)try{console.log("Play requested"),K.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"playVideo"}),"*"),g(!0),oe.current=Date.now()}catch(j){console.error("Error playing video:",j)}},Qe=()=>{if(K.current)try{console.log("Pause requested"),K.current.contentWindow.postMessage(JSON.stringify({event:"command",func:"pauseVideo"}),"*"),g(!1)}catch(j){console.error("Error pausing video:",j)}},qe=()=>!s.length||o>=s.length?null:s[o],Ke=()=>{const j=qe();if(!j)return"";try{const U=hv(j.videoEmbedLink),[z]=j.timestamp.split(" - "),Z=fv(q5(z));return`https://www.youtube.com/embed/${U}?autoplay=1&start=${Z}&controls=0&enablejsapi=1&origin=${window.location.origin}`}catch(U){return console.error("Error getting embed URL:",U),""}};if(u)return v.jsx("div",{className:"flex justify-center items-center h-64",children:v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500"})});if(h)return v.jsx("div",{className:"max-w-7xl mx-auto p-4",children:v.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:v.jsx("p",{children:h})})});const Ye=qe(),C=s.length>0;return v.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[v.jsxs("div",{className:"mb-6",children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Keyword Playlist"}),v.jsx("div",{className:"flex items-center",children:v.jsx("span",{className:"bg-blue-100 text-blue-800 text-sm font-semibold px-3 py-1 rounded-md",children:r})})]}),v.jsxs("div",{className:"relative",children:[I&&v.jsx("div",{className:"absolute top-0 right-0 z-10",children:v.jsx(Y5,{nextKeyword:I,thumbnailUrl:b,onPlay:W})}),v.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[v.jsx("div",{className:"w-full max-w-2xl h-120 bg-black mx-auto relative rounded-lg overflow-hidden",children:Ye?v.jsx("iframe",{ref:K,src:Ke(),width:"720",height:"480",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"YouTube video player",className:"absolute top-0 left-0 w-full h-full"}):v.jsx("div",{className:"flex items-center justify-center w-full h-full text-white font-medium",children:"No videos available"})}),C&&v.jsx("div",{className:"mt-6 mb-4 w-full max-w-2xl mx-auto",children:v.jsx(G5,{videoQueue:s,currentVideoIndex:o,setCurrentVideoIndex:l,currentTime:_,totalDuration:w})}),v.jsxs("div",{className:"w-full max-w-2xl mx-auto flex justify-center items-center py-3 mt-5",children:[v.jsx(K5,{onPrevious:He,onPlay:We,onPause:Qe,onNext:Ne,isPlaying:p,hasPrevious:o>0,hasNext:o<s.length-1}),v.jsx("div",{className:"ml-4",children:v.jsx(X5,{onClick:H})})]}),Ye&&v.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-6",children:[v.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:Ye.name}),v.jsx("p",{className:"text-sm italic text-gray-500 mb-4",children:Ye.role}),v.jsx("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200",children:v.jsx("p",{className:"m-0 text-base leading-relaxed text-gray-700",children:Ye.summary})})]})]})]}),v.jsx(Q5,{isOpen:R,onConfirm:Q,onCancel:X,message:"Are you sure you want to hear a new set of clips on this topic?"})]})};function pv(t,e){return pv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},pv(t,e)}function tA(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,pv(t,e)}function xe(){return xe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var i in r)({}).hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},xe.apply(null,arguments)}function Du(t){"@babel/helpers - typeof";return Du=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Du(t)}function Z5(t,e){if(Du(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var i=r.call(t,e);if(Du(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ez(t){var e=Z5(t,"string");return Du(e)=="symbol"?e:e+""}function tz(t,e,r){return(e=ez(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function pE(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,i)}return r}function mE(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?pE(Object(r),!0).forEach(function(i){tz(t,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pE(Object(r)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(r,i))})}return t}function kn(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var gE=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),vE=function(){return Math.random().toString(36).substring(7).split("").join(".")},yE={INIT:"@@redux/INIT"+vE(),REPLACE:"@@redux/REPLACE"+vE()};function nz(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function nA(t,e,r){var i;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(kn(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(kn(1));return r(nA)(t,e)}if(typeof t!="function")throw new Error(kn(2));var s=t,a=e,o=[],l=o,u=!1;function d(){l===o&&(l=o.slice())}function h(){if(u)throw new Error(kn(3));return a}function f(A){if(typeof A!="function")throw new Error(kn(4));if(u)throw new Error(kn(5));var P=!0;return d(),l.push(A),function(){if(P){if(u)throw new Error(kn(6));P=!1,d();var w=l.indexOf(A);l.splice(w,1),o=null}}}function p(A){if(!nz(A))throw new Error(kn(7));if(typeof A.type>"u")throw new Error(kn(8));if(u)throw new Error(kn(9));try{u=!0,a=s(a,A)}finally{u=!1}for(var P=o=l,S=0;S<P.length;S++){var w=P[S];w()}return A}function g(A){if(typeof A!="function")throw new Error(kn(10));s=A,p({type:yE.REPLACE})}function _(){var A,P=f;return A={subscribe:function(w){if(typeof w!="object"||w===null)throw new Error(kn(11));function x(){w.next&&w.next(h())}x();var R=P(x);return{unsubscribe:R}}},A[gE]=function(){return this},A}return p({type:yE.INIT}),i={dispatch:p,subscribe:f,getState:h,replaceReducer:g},i[gE]=_,i}function _E(t,e){return function(){return e(t.apply(this,arguments))}}function wE(t,e){if(typeof t=="function")return _E(t,e);if(typeof t!="object"||t===null)throw new Error(kn(16));var r={};for(var i in t){var s=t[i];typeof s=="function"&&(r[i]=_E(s,e))}return r}function rA(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(i){return i}:e.length===1?e[0]:e.reduce(function(i,s){return function(){return i(s.apply(void 0,arguments))}})}function rz(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(i){return function(){var s=i.apply(void 0,arguments),a=function(){throw new Error(kn(15))},o={getState:s.getState,dispatch:function(){return a.apply(void 0,arguments)}},l=e.map(function(u){return u(o)});return a=rA.apply(void 0,l)(s.dispatch),mE(mE({},s),{},{dispatch:a})}}}var iA=Pe.createContext(null);function iz(t){t()}var sA=iz,sz=function(e){return sA=e},az=function(){return sA};function oz(){var t=az(),e=null,r=null;return{clear:function(){e=null,r=null},notify:function(){t(function(){for(var s=e;s;)s.callback(),s=s.next})},get:function(){for(var s=[],a=e;a;)s.push(a),a=a.next;return s},subscribe:function(s){var a=!0,o=r={callback:s,next:null,prev:r};return o.prev?o.prev.next=o:e=o,function(){!a||e===null||(a=!1,o.next?o.next.prev=o.prev:r=o.prev,o.prev?o.prev.next=o.next:e=o.next)}}}}var bE={notify:function(){},get:function(){return[]}};function aA(t,e){var r,i=bE;function s(f){return u(),i.subscribe(f)}function a(){i.notify()}function o(){h.onStateChange&&h.onStateChange()}function l(){return!!r}function u(){r||(r=e?e.addNestedSub(o):t.subscribe(o),i=oz())}function d(){r&&(r(),r=void 0,i.clear(),i=bE)}var h={addNestedSub:s,notifyNestedSubs:a,handleChangeWrapper:o,isSubscribed:l,trySubscribe:u,tryUnsubscribe:d,getListeners:function(){return i}};return h}var oA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?M.useLayoutEffect:M.useEffect;function lz(t){var e=t.store,r=t.context,i=t.children,s=M.useMemo(function(){var l=aA(e);return{store:e,subscription:l}},[e]),a=M.useMemo(function(){return e.getState()},[e]);oA(function(){var l=s.subscription;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),function(){l.tryUnsubscribe(),l.onStateChange=null}},[s,a]);var o=r||iA;return Pe.createElement(o.Provider,{value:s},i)}function Uh(t,e){if(t==null)return{};var r={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;r[i]=t[i]}return r}var lA={exports:{}},nt={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $t=typeof Symbol=="function"&&Symbol.for,__=$t?Symbol.for("react.element"):60103,w_=$t?Symbol.for("react.portal"):60106,Wf=$t?Symbol.for("react.fragment"):60107,qf=$t?Symbol.for("react.strict_mode"):60108,Gf=$t?Symbol.for("react.profiler"):60114,Kf=$t?Symbol.for("react.provider"):60109,Yf=$t?Symbol.for("react.context"):60110,b_=$t?Symbol.for("react.async_mode"):60111,Xf=$t?Symbol.for("react.concurrent_mode"):60111,Qf=$t?Symbol.for("react.forward_ref"):60112,Jf=$t?Symbol.for("react.suspense"):60113,uz=$t?Symbol.for("react.suspense_list"):60120,Zf=$t?Symbol.for("react.memo"):60115,ep=$t?Symbol.for("react.lazy"):60116,cz=$t?Symbol.for("react.block"):60121,dz=$t?Symbol.for("react.fundamental"):60117,hz=$t?Symbol.for("react.responder"):60118,fz=$t?Symbol.for("react.scope"):60119;function Yn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case __:switch(t=t.type,t){case b_:case Xf:case Wf:case Gf:case qf:case Jf:return t;default:switch(t=t&&t.$$typeof,t){case Yf:case Qf:case ep:case Zf:case Kf:return t;default:return e}}case w_:return e}}}function uA(t){return Yn(t)===Xf}nt.AsyncMode=b_;nt.ConcurrentMode=Xf;nt.ContextConsumer=Yf;nt.ContextProvider=Kf;nt.Element=__;nt.ForwardRef=Qf;nt.Fragment=Wf;nt.Lazy=ep;nt.Memo=Zf;nt.Portal=w_;nt.Profiler=Gf;nt.StrictMode=qf;nt.Suspense=Jf;nt.isAsyncMode=function(t){return uA(t)||Yn(t)===b_};nt.isConcurrentMode=uA;nt.isContextConsumer=function(t){return Yn(t)===Yf};nt.isContextProvider=function(t){return Yn(t)===Kf};nt.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===__};nt.isForwardRef=function(t){return Yn(t)===Qf};nt.isFragment=function(t){return Yn(t)===Wf};nt.isLazy=function(t){return Yn(t)===ep};nt.isMemo=function(t){return Yn(t)===Zf};nt.isPortal=function(t){return Yn(t)===w_};nt.isProfiler=function(t){return Yn(t)===Gf};nt.isStrictMode=function(t){return Yn(t)===qf};nt.isSuspense=function(t){return Yn(t)===Jf};nt.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Wf||t===Xf||t===Gf||t===qf||t===Jf||t===uz||typeof t=="object"&&t!==null&&(t.$$typeof===ep||t.$$typeof===Zf||t.$$typeof===Kf||t.$$typeof===Yf||t.$$typeof===Qf||t.$$typeof===dz||t.$$typeof===hz||t.$$typeof===fz||t.$$typeof===cz)};nt.typeOf=Yn;lA.exports=nt;var pz=lA.exports,x_=pz,mz={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},gz={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},vz={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},cA={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},E_={};E_[x_.ForwardRef]=vz;E_[x_.Memo]=cA;function xE(t){return x_.isMemo(t)?cA:E_[t.$$typeof]||mz}var yz=Object.defineProperty,_z=Object.getOwnPropertyNames,EE=Object.getOwnPropertySymbols,wz=Object.getOwnPropertyDescriptor,bz=Object.getPrototypeOf,TE=Object.prototype;function dA(t,e,r){if(typeof e!="string"){if(TE){var i=bz(e);i&&i!==TE&&dA(t,i,r)}var s=_z(e);EE&&(s=s.concat(EE(e)));for(var a=xE(t),o=xE(e),l=0;l<s.length;++l){var u=s[l];if(!gz[u]&&!(r&&r[u])&&!(o&&o[u])&&!(a&&a[u])){var d=wz(e,u);try{yz(t,u,d)}catch{}}}}return t}var xz=dA;const SE=Vu(xz);var hA={exports:{}},at={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tp=60103,np=60106,oc=60107,lc=60108,uc=60114,cc=60109,dc=60110,hc=60112,fc=60113,T_=60120,pc=60115,mc=60116,fA=60121,pA=60122,mA=60117,gA=60129,vA=60131;if(typeof Symbol=="function"&&Symbol.for){var qt=Symbol.for;tp=qt("react.element"),np=qt("react.portal"),oc=qt("react.fragment"),lc=qt("react.strict_mode"),uc=qt("react.profiler"),cc=qt("react.provider"),dc=qt("react.context"),hc=qt("react.forward_ref"),fc=qt("react.suspense"),T_=qt("react.suspense_list"),pc=qt("react.memo"),mc=qt("react.lazy"),fA=qt("react.block"),pA=qt("react.server.block"),mA=qt("react.fundamental"),gA=qt("react.debug_trace_mode"),vA=qt("react.legacy_hidden")}function Ar(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case tp:switch(t=t.type,t){case oc:case uc:case lc:case fc:case T_:return t;default:switch(t=t&&t.$$typeof,t){case dc:case hc:case mc:case pc:case cc:return t;default:return e}}case np:return e}}}var Ez=cc,Tz=tp,Sz=hc,Iz=oc,kz=mc,Cz=pc,Az=np,Pz=uc,Rz=lc,Dz=fc;at.ContextConsumer=dc;at.ContextProvider=Ez;at.Element=Tz;at.ForwardRef=Sz;at.Fragment=Iz;at.Lazy=kz;at.Memo=Cz;at.Portal=Az;at.Profiler=Pz;at.StrictMode=Rz;at.Suspense=Dz;at.isAsyncMode=function(){return!1};at.isConcurrentMode=function(){return!1};at.isContextConsumer=function(t){return Ar(t)===dc};at.isContextProvider=function(t){return Ar(t)===cc};at.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===tp};at.isForwardRef=function(t){return Ar(t)===hc};at.isFragment=function(t){return Ar(t)===oc};at.isLazy=function(t){return Ar(t)===mc};at.isMemo=function(t){return Ar(t)===pc};at.isPortal=function(t){return Ar(t)===np};at.isProfiler=function(t){return Ar(t)===uc};at.isStrictMode=function(t){return Ar(t)===lc};at.isSuspense=function(t){return Ar(t)===fc};at.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===oc||t===uc||t===gA||t===lc||t===fc||t===T_||t===vA||typeof t=="object"&&t!==null&&(t.$$typeof===mc||t.$$typeof===pc||t.$$typeof===cc||t.$$typeof===dc||t.$$typeof===hc||t.$$typeof===mA||t.$$typeof===fA||t[0]===pA)};at.typeOf=Ar;hA.exports=at;var Nz=hA.exports,Mz=["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"],Lz=["reactReduxForwardedRef"],Oz=[],jz=[null,null];function Vz(t,e){var r=t[1];return[e.payload,r+1]}function IE(t,e,r){oA(function(){return t.apply(void 0,e)},r)}function Fz(t,e,r,i,s,a,o){t.current=i,e.current=s,r.current=!1,a.current&&(a.current=null,o())}function Uz(t,e,r,i,s,a,o,l,u,d){if(t){var h=!1,f=null,p=function(){if(!h){var A=e.getState(),P,S;try{P=i(A,s.current)}catch(w){S=w,f=w}S||(f=null),P===a.current?o.current||u():(a.current=P,l.current=P,o.current=!0,d({type:"STORE_UPDATED",payload:{error:S}}))}};r.onStateChange=p,r.trySubscribe(),p();var g=function(){if(h=!0,r.tryUnsubscribe(),r.onStateChange=null,f)throw f};return g}}var Bz=function(){return[null,0]};function zz(t,e){e===void 0&&(e={});var r=e,i=r.getDisplayName,s=i===void 0?function(x){return"ConnectAdvanced("+x+")"}:i,a=r.methodName,o=a===void 0?"connectAdvanced":a,l=r.renderCountProp,u=l===void 0?void 0:l,d=r.shouldHandleStateChanges,h=d===void 0?!0:d,f=r.storeKey,p=f===void 0?"store":f;r.withRef;var g=r.forwardRef,_=g===void 0?!1:g,A=r.context,P=A===void 0?iA:A,S=Uh(r,Mz),w=P;return function(R){var F=R.displayName||R.name||"Component",V=s(F),N=xe({},S,{getDisplayName:s,methodName:o,renderCountProp:u,shouldHandleStateChanges:h,storeKey:p,displayName:V,wrappedComponentName:F,WrappedComponent:R}),I=S.pure;function y(K){return t(K.dispatch,N)}var b=I?M.useMemo:function(K){return K()};function T(K){var ie=M.useMemo(function(){var z=K.reactReduxForwardedRef,Z=Uh(K,Lz);return[K.context,z,Z]},[K]),oe=ie[0],he=ie[1],q=ie[2],Y=M.useMemo(function(){return oe&&oe.Consumer&&Nz.isContextConsumer(Pe.createElement(oe.Consumer,null))?oe:w},[oe,w]),se=M.useContext(Y),re=!!K.store&&!!K.store.getState&&!!K.store.dispatch;se&&se.store;var W=re?K.store:se.store,H=M.useMemo(function(){return y(W)},[W]),Q=M.useMemo(function(){if(!h)return jz;var z=aA(W,re?null:se.subscription),Z=z.notifyNestedSubs.bind(z);return[z,Z]},[W,re,se]),X=Q[0],ue=Q[1],ge=M.useMemo(function(){return re?se:xe({},se,{subscription:X})},[re,se,X]),Oe=M.useReducer(Vz,Oz,Bz),Ne=Oe[0],He=Ne[0],We=Oe[1];if(He&&He.error)throw He.error;var Qe=M.useRef(),qe=M.useRef(q),Ke=M.useRef(),Ye=M.useRef(!1),C=b(function(){return Ke.current&&q===qe.current?Ke.current:H(W.getState(),q)},[W,He,q]);IE(Fz,[qe,Qe,Ye,q,C,Ke,ue]),IE(Uz,[h,W,X,H,qe,Qe,Ye,Ke,ue,We],[W,X,H]);var j=M.useMemo(function(){return Pe.createElement(R,xe({},C,{ref:he}))},[he,R,C]),U=M.useMemo(function(){return h?Pe.createElement(Y.Provider,{value:ge},j):j},[Y,j,ge]);return U}var O=I?Pe.memo(T):T;if(O.WrappedComponent=R,O.displayName=T.displayName=V,_){var D=Pe.forwardRef(function(ie,oe){return Pe.createElement(O,xe({},ie,{reactReduxForwardedRef:oe}))});return D.displayName=V,D.WrappedComponent=R,SE(D,R)}return SE(O,R)}}function kE(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function wm(t,e){if(kE(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(var s=0;s<r.length;s++)if(!Object.prototype.hasOwnProperty.call(e,r[s])||!kE(t[r[s]],e[r[s]]))return!1;return!0}function $z(t,e){var r={},i=function(o){var l=t[o];typeof l=="function"&&(r[o]=function(){return e(l.apply(void 0,arguments))})};for(var s in t)i(s);return r}function S_(t){return function(r,i){var s=t(r,i);function a(){return s}return a.dependsOnOwnProps=!1,a}}function CE(t){return t.dependsOnOwnProps!==null&&t.dependsOnOwnProps!==void 0?!!t.dependsOnOwnProps:t.length!==1}function yA(t,e){return function(i,s){s.displayName;var a=function(l,u){return a.dependsOnOwnProps?a.mapToProps(l,u):a.mapToProps(l)};return a.dependsOnOwnProps=!0,a.mapToProps=function(l,u){a.mapToProps=t,a.dependsOnOwnProps=CE(t);var d=a(l,u);return typeof d=="function"&&(a.mapToProps=d,a.dependsOnOwnProps=CE(d),d=a(l,u)),d},a}}function Hz(t){return typeof t=="function"?yA(t):void 0}function Wz(t){return t?void 0:S_(function(e){return{dispatch:e}})}function qz(t){return t&&typeof t=="object"?S_(function(e){return $z(t,e)}):void 0}const Gz=[Hz,Wz,qz];function Kz(t){return typeof t=="function"?yA(t):void 0}function Yz(t){return t?void 0:S_(function(){return{}})}const Xz=[Kz,Yz];function Qz(t,e,r){return xe({},r,t,e)}function Jz(t){return function(r,i){i.displayName;var s=i.pure,a=i.areMergedPropsEqual,o=!1,l;return function(d,h,f){var p=t(d,h,f);return o?(!s||!a(p,l))&&(l=p):(o=!0,l=p),l}}}function Zz(t){return typeof t=="function"?Jz(t):void 0}function e$(t){return t?void 0:function(){return Qz}}const t$=[Zz,e$];var n$=["initMapStateToProps","initMapDispatchToProps","initMergeProps"];function r$(t,e,r,i){return function(a,o){return r(t(a,o),e(i,o),o)}}function i$(t,e,r,i,s){var a=s.areStatesEqual,o=s.areOwnPropsEqual,l=s.areStatePropsEqual,u=!1,d,h,f,p,g;function _(x,R){return d=x,h=R,f=t(d,h),p=e(i,h),g=r(f,p,h),u=!0,g}function A(){return f=t(d,h),e.dependsOnOwnProps&&(p=e(i,h)),g=r(f,p,h),g}function P(){return t.dependsOnOwnProps&&(f=t(d,h)),e.dependsOnOwnProps&&(p=e(i,h)),g=r(f,p,h),g}function S(){var x=t(d,h),R=!l(x,f);return f=x,R&&(g=r(f,p,h)),g}function w(x,R){var F=!o(R,h),V=!a(x,d,R,h);return d=x,h=R,F&&V?A():F?P():V?S():g}return function(R,F){return u?w(R,F):_(R,F)}}function s$(t,e){var r=e.initMapStateToProps,i=e.initMapDispatchToProps,s=e.initMergeProps,a=Uh(e,n$),o=r(t,a),l=i(t,a),u=s(t,a),d=a.pure?i$:r$;return d(o,l,u,t,a)}var a$=["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"];function bm(t,e,r){for(var i=e.length-1;i>=0;i--){var s=e[i](t);if(s)return s}return function(a,o){throw new Error("Invalid value of type "+typeof t+" for "+r+" argument when connecting component "+o.wrappedComponentName+".")}}function o$(t,e){return t===e}function l$(t){var e=t===void 0?{}:t,r=e.connectHOC,i=r===void 0?zz:r,s=e.mapStateToPropsFactories,a=s===void 0?Xz:s,o=e.mapDispatchToPropsFactories,l=o===void 0?Gz:o,u=e.mergePropsFactories,d=u===void 0?t$:u,h=e.selectorFactory,f=h===void 0?s$:h;return function(g,_,A,P){P===void 0&&(P={});var S=P,w=S.pure,x=w===void 0?!0:w,R=S.areStatesEqual,F=R===void 0?o$:R,V=S.areOwnPropsEqual,N=V===void 0?wm:V,I=S.areStatePropsEqual,y=I===void 0?wm:I,b=S.areMergedPropsEqual,T=b===void 0?wm:b,O=Uh(S,a$),D=bm(g,a,"mapStateToProps"),K=bm(_,l,"mapDispatchToProps"),ie=bm(A,d,"mergeProps");return i(f,xe({methodName:"connect",getDisplayName:function(he){return"Connect("+he+")"},shouldHandleStateChanges:!!g,initMapStateToProps:D,initMapDispatchToProps:K,initMergeProps:ie,pure:x,areStatesEqual:F,areOwnPropsEqual:N,areStatePropsEqual:y,areMergedPropsEqual:T},O))}}const _A=l$();sz(my.unstable_batchedUpdates);function u$(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function wA(t,e){var r=M.useState(function(){return{inputs:e,result:t()}})[0],i=M.useRef(!0),s=M.useRef(r),a=i.current||!!(e&&s.current.inputs&&u$(e,s.current.inputs)),o=a?s.current:{inputs:e,result:t()};return M.useEffect(function(){i.current=!1,s.current=o},[o]),o.result}function c$(t,e){return wA(function(){return t},e)}var ze=wA,_e=c$,d$="Invariant failed";function h$(t,e){throw new Error(d$)}var Er=function(e){var r=e.top,i=e.right,s=e.bottom,a=e.left,o=i-a,l=s-r,u={top:r,right:i,bottom:s,left:a,width:o,height:l,x:a,y:r,center:{x:(i+a)/2,y:(s+r)/2}};return u},I_=function(e,r){return{top:e.top-r.top,left:e.left-r.left,bottom:e.bottom+r.bottom,right:e.right+r.right}},AE=function(e,r){return{top:e.top+r.top,left:e.left+r.left,bottom:e.bottom-r.bottom,right:e.right-r.right}},f$=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},xm={top:0,right:0,bottom:0,left:0},k_=function(e){var r=e.borderBox,i=e.margin,s=i===void 0?xm:i,a=e.border,o=a===void 0?xm:a,l=e.padding,u=l===void 0?xm:l,d=Er(I_(r,s)),h=Er(AE(r,o)),f=Er(AE(h,u));return{marginBox:d,borderBox:Er(r),paddingBox:h,contentBox:f,margin:s,border:o,padding:u}},Qn=function(e){var r=e.slice(0,-2),i=e.slice(-2);if(i!=="px")return 0;var s=Number(r);return isNaN(s)&&h$(),s},p$=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Bh=function(e,r){var i=e.borderBox,s=e.border,a=e.margin,o=e.padding,l=f$(i,r);return k_({borderBox:l,border:s,margin:a,padding:o})},zh=function(e,r){return r===void 0&&(r=p$()),Bh(e,r)},bA=function(e,r){var i={top:Qn(r.marginTop),right:Qn(r.marginRight),bottom:Qn(r.marginBottom),left:Qn(r.marginLeft)},s={top:Qn(r.paddingTop),right:Qn(r.paddingRight),bottom:Qn(r.paddingBottom),left:Qn(r.paddingLeft)},a={top:Qn(r.borderTopWidth),right:Qn(r.borderRightWidth),bottom:Qn(r.borderBottomWidth),left:Qn(r.borderLeftWidth)};return k_({borderBox:e,margin:i,padding:s,border:a})},xA=function(e){var r=e.getBoundingClientRect(),i=window.getComputedStyle(e);return bA(r,i)},PE=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function m$(t,e){return!!(t===e||PE(t)&&PE(e))}function g$(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!m$(t[r],e[r]))return!1;return!0}function Bt(t,e){e===void 0&&(e=g$);var r,i=[],s,a=!1;function o(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return a&&r===this&&e(l,i)||(s=t.apply(this,l),a=!0,r=this,i=l),s}return o}var Nu=function(e){var r=[],i=null,s=function(){for(var o=arguments.length,l=new Array(o),u=0;u<o;u++)l[u]=arguments[u];r=l,!i&&(i=requestAnimationFrame(function(){i=null,e.apply(void 0,r)}))};return s.cancel=function(){i&&(cancelAnimationFrame(i),i=null)},s};function EA(t,e){}EA.bind(null,"warn");EA.bind(null,"error");function as(){}function v$(t,e){return xe({},t,{},e)}function rr(t,e,r){var i=e.map(function(s){var a=v$(r,s.options);return t.addEventListener(s.eventName,s.fn,a),function(){t.removeEventListener(s.eventName,s.fn,a)}});return function(){i.forEach(function(a){a()})}}var y$="Invariant failed";function $h(t){this.message=t}$h.prototype.toString=function(){return this.message};function ae(t,e){throw new $h(y$)}var _$=function(t){tA(e,t);function e(){for(var i,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return i=t.call.apply(t,[this].concat(a))||this,i.callbacks=null,i.unbind=as,i.onWindowError=function(l){var u=i.getCallbacks();u.isDragging()&&u.tryAbort();var d=l.error;d instanceof $h&&l.preventDefault()},i.getCallbacks=function(){if(!i.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return i.callbacks},i.setCallbacks=function(l){i.callbacks=l},i}var r=e.prototype;return r.componentDidMount=function(){this.unbind=rr(window,[{eventName:"error",fn:this.onWindowError}])},r.componentDidCatch=function(s){if(s instanceof $h){this.setState({});return}throw s},r.componentWillUnmount=function(){this.unbind()},r.render=function(){return this.props.children(this.setCallbacks)},e}(Pe.Component),w$=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Hh=function(e){return e+1},b$=function(e){return`
  You have lifted an item in position `+Hh(e.source.index)+`
`},TA=function(e,r){var i=e.droppableId===r.droppableId,s=Hh(e.index),a=Hh(r.index);return i?`
      You have moved the item from position `+s+`
      to position `+a+`
    `:`
    You have moved the item from position `+s+`
    in list `+e.droppableId+`
    to list `+r.droppableId+`
    in position `+a+`
  `},SA=function(e,r,i){var s=r.droppableId===i.droppableId;return s?`
      The item `+e+`
      has been combined with `+i.draggableId:`
      The item `+e+`
      in list `+r.droppableId+`
      has been combined with `+i.draggableId+`
      in list `+i.droppableId+`
    `},x$=function(e){var r=e.destination;if(r)return TA(e.source,r);var i=e.combine;return i?SA(e.draggableId,e.source,i):"You are over an area that cannot be dropped on"},RE=function(e){return`
  The item has returned to its starting position
  of `+Hh(e.index)+`
`},E$=function(e){if(e.reason==="CANCEL")return`
      Movement cancelled.
      `+RE(e.source)+`
    `;var r=e.destination,i=e.combine;return r?`
      You have dropped the item.
      `+TA(e.source,r)+`
    `:i?`
      You have dropped the item.
      `+SA(e.draggableId,e.source,i)+`
    `:`
    The item has been dropped while not over a drop area.
    `+RE(e.source)+`
  `},zd={dragHandleUsageInstructions:w$,onDragStart:b$,onDragUpdate:x$,onDragEnd:E$},zt={x:0,y:0},Qt=function(e,r){return{x:e.x+r.x,y:e.y+r.y}},Bn=function(e,r){return{x:e.x-r.x,y:e.y-r.y}},os=function(e,r){return e.x===r.x&&e.y===r.y},qo=function(e){return{x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}},ua=function(e,r,i){var s;return i===void 0&&(i=0),s={},s[e]=r,s[e==="x"?"y":"x"]=i,s},Mu=function(e,r){return Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))},DE=function(e,r){return Math.min.apply(Math,r.map(function(i){return Mu(e,i)}))},IA=function(e){return function(r){return{x:e(r.x),y:e(r.y)}}},T$=function(t,e){var r=Er({top:Math.max(e.top,t.top),right:Math.min(e.right,t.right),bottom:Math.min(e.bottom,t.bottom),left:Math.max(e.left,t.left)});return r.width<=0||r.height<=0?null:r},gc=function(e,r){return{top:e.top+r.y,left:e.left+r.x,bottom:e.bottom+r.y,right:e.right+r.x}},NE=function(e){return[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}]},S$={top:0,right:0,bottom:0,left:0},I$=function(e,r){return r?gc(e,r.scroll.diff.displacement):e},k$=function(e,r,i){if(i&&i.increasedBy){var s;return xe({},e,(s={},s[r.end]=e[r.end]+i.increasedBy[r.line],s))}return e},C$=function(e,r){return r&&r.shouldClipSubject?T$(r.pageMarginBox,e):Er(e)},Co=function(t){var e=t.page,r=t.withPlaceholder,i=t.axis,s=t.frame,a=I$(e.marginBox,s),o=k$(a,i,r),l=C$(o,s);return{page:e,withPlaceholder:r,active:l}},C_=function(t,e){t.frame||ae();var r=t.frame,i=Bn(e,r.scroll.initial),s=qo(i),a=xe({},r,{scroll:{initial:r.scroll.initial,current:e,diff:{value:i,displacement:s},max:r.scroll.max}}),o=Co({page:t.subject.page,withPlaceholder:t.subject.withPlaceholder,axis:t.axis,frame:a}),l=xe({},t,{frame:a,subject:o});return l};function Wh(t){return Object.values?Object.values(t):Object.keys(t).map(function(e){return t[e]})}function A_(t,e){if(t.findIndex)return t.findIndex(e);for(var r=0;r<t.length;r++)if(e(t[r]))return r;return-1}function Is(t,e){if(t.find)return t.find(e);var r=A_(t,e);if(r!==-1)return t[r]}function kA(t){return Array.prototype.slice.call(t)}var CA=Bt(function(t){return t.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),AA=Bt(function(t){return t.reduce(function(e,r){return e[r.descriptor.id]=r,e},{})}),rp=Bt(function(t){return Wh(t)}),A$=Bt(function(t){return Wh(t)}),Go=Bt(function(t,e){var r=A$(e).filter(function(i){return t===i.descriptor.droppableId}).sort(function(i,s){return i.descriptor.index-s.descriptor.index});return r});function P_(t){return t.at&&t.at.type==="REORDER"?t.at.destination:null}function ip(t){return t.at&&t.at.type==="COMBINE"?t.at.combine:null}var sp=Bt(function(t,e){return e.filter(function(r){return r.descriptor.id!==t.descriptor.id})}),P$=function(t){var e=t.isMovingForward,r=t.draggable,i=t.destination,s=t.insideDestination,a=t.previousImpact;if(!i.isCombineEnabled)return null;var o=P_(a);if(!o)return null;function l(A){var P={type:"COMBINE",combine:{draggableId:A,droppableId:i.descriptor.id}};return xe({},a,{at:P})}var u=a.displaced.all,d=u.length?u[0]:null;if(e)return d?l(d):null;var h=sp(r,s);if(!d){if(!h.length)return null;var f=h[h.length-1];return l(f.descriptor.id)}var p=A_(h,function(A){return A.descriptor.id===d});p===-1&&ae();var g=p-1;if(g<0)return null;var _=h[g];return l(_.descriptor.id)},Ko=function(t,e){return t.descriptor.droppableId===e.descriptor.id},PA={point:zt,value:0},Lu={invisible:{},visible:{},all:[]},R$={displaced:Lu,displacedBy:PA,at:null},ar=function(t,e){return function(r){return t<=r&&r<=e}},RA=function(t){var e=ar(t.top,t.bottom),r=ar(t.left,t.right);return function(i){var s=e(i.top)&&e(i.bottom)&&r(i.left)&&r(i.right);if(s)return!0;var a=e(i.top)||e(i.bottom),o=r(i.left)||r(i.right),l=a&&o;if(l)return!0;var u=i.top<t.top&&i.bottom>t.bottom,d=i.left<t.left&&i.right>t.right,h=u&&d;if(h)return!0;var f=u&&o||d&&a;return f}},D$=function(t){var e=ar(t.top,t.bottom),r=ar(t.left,t.right);return function(i){var s=e(i.top)&&e(i.bottom)&&r(i.left)&&r(i.right);return s}},R_={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},DA={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"},N$=function(t){return function(e){var r=ar(e.top,e.bottom),i=ar(e.left,e.right);return function(s){return t===R_?r(s.top)&&r(s.bottom):i(s.left)&&i(s.right)}}},M$=function(e,r){var i=r.frame?r.frame.scroll.diff.displacement:zt;return gc(e,i)},L$=function(e,r,i){return r.subject.active?i(r.subject.active)(e):!1},O$=function(e,r,i){return i(r)(e)},D_=function(e){var r=e.target,i=e.destination,s=e.viewport,a=e.withDroppableDisplacement,o=e.isVisibleThroughFrameFn,l=a?M$(r,i):r;return L$(l,i,o)&&O$(l,s,o)},j$=function(e){return D_(xe({},e,{isVisibleThroughFrameFn:RA}))},NA=function(e){return D_(xe({},e,{isVisibleThroughFrameFn:D$}))},V$=function(e){return D_(xe({},e,{isVisibleThroughFrameFn:N$(e.destination.axis)}))},F$=function(e,r,i){if(typeof i=="boolean")return i;if(!r)return!0;var s=r.invisible,a=r.visible;if(s[e])return!1;var o=a[e];return o?o.shouldAnimate:!0};function U$(t,e){var r=t.page.marginBox,i={top:e.point.y,right:0,bottom:0,left:e.point.x};return Er(I_(r,i))}function Ou(t){var e=t.afterDragging,r=t.destination,i=t.displacedBy,s=t.viewport,a=t.forceShouldAnimate,o=t.last;return e.reduce(function(u,d){var h=U$(d,i),f=d.descriptor.id;u.all.push(f);var p=j$({target:h,destination:r,viewport:s,withDroppableDisplacement:!0});if(!p)return u.invisible[d.descriptor.id]=!0,u;var g=F$(f,o,a),_={draggableId:f,shouldAnimate:g};return u.visible[f]=_,u},{all:[],visible:{},invisible:{}})}function B$(t,e){if(!t.length)return 0;var r=t[t.length-1].descriptor.index;return e.inHomeList?r:r+1}function ME(t){var e=t.insideDestination,r=t.inHomeList,i=t.displacedBy,s=t.destination,a=B$(e,{inHomeList:r});return{displaced:Lu,displacedBy:i,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:a}}}}function qh(t){var e=t.draggable,r=t.insideDestination,i=t.destination,s=t.viewport,a=t.displacedBy,o=t.last,l=t.index,u=t.forceShouldAnimate,d=Ko(e,i);if(l==null)return ME({insideDestination:r,inHomeList:d,displacedBy:a,destination:i});var h=Is(r,function(A){return A.descriptor.index===l});if(!h)return ME({insideDestination:r,inHomeList:d,displacedBy:a,destination:i});var f=sp(e,r),p=r.indexOf(h),g=f.slice(p),_=Ou({afterDragging:g,destination:i,displacedBy:a,last:o,viewport:s.frame,forceShouldAnimate:u});return{displaced:_,displacedBy:a,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:l}}}}function ys(t,e){return!!e.effected[t]}var z$=function(t){var e=t.isMovingForward,r=t.destination,i=t.draggables,s=t.combine,a=t.afterCritical;if(!r.isCombineEnabled)return null;var o=s.draggableId,l=i[o],u=l.descriptor.index,d=ys(o,a);return d?e?u:u-1:e?u+1:u},$$=function(t){var e=t.isMovingForward,r=t.isInHomeList,i=t.insideDestination,s=t.location;if(!i.length)return null;var a=s.index,o=e?a+1:a-1,l=i[0].descriptor.index,u=i[i.length-1].descriptor.index,d=r?u:u+1;return o<l||o>d?null:o},H$=function(t){var e=t.isMovingForward,r=t.isInHomeList,i=t.draggable,s=t.draggables,a=t.destination,o=t.insideDestination,l=t.previousImpact,u=t.viewport,d=t.afterCritical,h=l.at;if(h||ae(),h.type==="REORDER"){var f=$$({isMovingForward:e,isInHomeList:r,location:h.destination,insideDestination:o});return f==null?null:qh({draggable:i,insideDestination:o,destination:a,viewport:u,last:l.displaced,displacedBy:l.displacedBy,index:f})}var p=z$({isMovingForward:e,destination:a,displaced:l.displaced,draggables:s,combine:h.combine,afterCritical:d});return p==null?null:qh({draggable:i,insideDestination:o,destination:a,viewport:u,last:l.displaced,displacedBy:l.displacedBy,index:p})},W$=function(t){var e=t.displaced,r=t.afterCritical,i=t.combineWith,s=t.displacedBy,a=!!(e.visible[i]||e.invisible[i]);return ys(i,r)?a?zt:qo(s.point):a?s.point:zt},q$=function(t){var e=t.afterCritical,r=t.impact,i=t.draggables,s=ip(r);s||ae();var a=s.draggableId,o=i[a].page.borderBox.center,l=W$({displaced:r.displaced,afterCritical:e,combineWith:a,displacedBy:r.displacedBy});return Qt(o,l)},MA=function(e,r){return r.margin[e.start]+r.borderBox[e.size]/2},G$=function(e,r){return r.margin[e.end]+r.borderBox[e.size]/2},N_=function(e,r,i){return r[e.crossAxisStart]+i.margin[e.crossAxisStart]+i.borderBox[e.crossAxisSize]/2},LE=function(e){var r=e.axis,i=e.moveRelativeTo,s=e.isMoving;return ua(r.line,i.marginBox[r.end]+MA(r,s),N_(r,i.marginBox,s))},OE=function(e){var r=e.axis,i=e.moveRelativeTo,s=e.isMoving;return ua(r.line,i.marginBox[r.start]-G$(r,s),N_(r,i.marginBox,s))},K$=function(e){var r=e.axis,i=e.moveInto,s=e.isMoving;return ua(r.line,i.contentBox[r.start]+MA(r,s),N_(r,i.contentBox,s))},Y$=function(t){var e=t.impact,r=t.draggable,i=t.draggables,s=t.droppable,a=t.afterCritical,o=Go(s.descriptor.id,i),l=r.page,u=s.axis;if(!o.length)return K$({axis:u,moveInto:s.page,isMoving:l});var d=e.displaced,h=e.displacedBy,f=d.all[0];if(f){var p=i[f];if(ys(f,a))return OE({axis:u,moveRelativeTo:p.page,isMoving:l});var g=Bh(p.page,h.point);return OE({axis:u,moveRelativeTo:g,isMoving:l})}var _=o[o.length-1];if(_.descriptor.id===r.descriptor.id)return l.borderBox.center;if(ys(_.descriptor.id,a)){var A=Bh(_.page,qo(a.displacedBy.point));return LE({axis:u,moveRelativeTo:A,isMoving:l})}return LE({axis:u,moveRelativeTo:_.page,isMoving:l})},mv=function(t,e){var r=t.frame;return r?Qt(e,r.scroll.diff.displacement):e},X$=function(e){var r=e.impact,i=e.draggable,s=e.droppable,a=e.draggables,o=e.afterCritical,l=i.page.borderBox.center,u=r.at;return!s||!u?l:u.type==="REORDER"?Y$({impact:r,draggable:i,draggables:a,droppable:s,afterCritical:o}):q$({impact:r,draggables:a,afterCritical:o})},ap=function(t){var e=X$(t),r=t.droppable,i=r?mv(r,e):e;return i},LA=function(t,e){var r=Bn(e,t.scroll.initial),i=qo(r),s=Er({top:e.y,bottom:e.y+t.frame.height,left:e.x,right:e.x+t.frame.width}),a={frame:s,scroll:{initial:t.scroll.initial,max:t.scroll.max,current:e,diff:{value:r,displacement:i}}};return a};function jE(t,e){return t.map(function(r){return e[r]})}function Q$(t,e){for(var r=0;r<e.length;r++){var i=e[r].visible[t];if(i)return i}return null}var J$=function(t){var e=t.impact,r=t.viewport,i=t.destination,s=t.draggables,a=t.maxScrollChange,o=LA(r,Qt(r.scroll.current,a)),l=i.frame?C_(i,Qt(i.frame.scroll.current,a)):i,u=e.displaced,d=Ou({afterDragging:jE(u.all,s),destination:i,displacedBy:e.displacedBy,viewport:o.frame,last:u,forceShouldAnimate:!1}),h=Ou({afterDragging:jE(u.all,s),destination:l,displacedBy:e.displacedBy,viewport:r.frame,last:u,forceShouldAnimate:!1}),f={},p={},g=[u,d,h];u.all.forEach(function(A){var P=Q$(A,g);if(P){p[A]=P;return}f[A]=!0});var _=xe({},e,{displaced:{all:u.all,invisible:f,visible:p}});return _},Z$=function(t,e){return Qt(t.scroll.diff.displacement,e)},M_=function(t){var e=t.pageBorderBoxCenter,r=t.draggable,i=t.viewport,s=Z$(i,e),a=Bn(s,r.page.borderBox.center);return Qt(r.client.borderBox.center,a)},OA=function(t){var e=t.draggable,r=t.destination,i=t.newPageBorderBoxCenter,s=t.viewport,a=t.withDroppableDisplacement,o=t.onlyOnMainAxis,l=o===void 0?!1:o,u=Bn(i,e.page.borderBox.center),d=gc(e.page.borderBox,u),h={target:d,destination:r,withDroppableDisplacement:a,viewport:s};return l?V$(h):NA(h)},e9=function(t){var e=t.isMovingForward,r=t.draggable,i=t.destination,s=t.draggables,a=t.previousImpact,o=t.viewport,l=t.previousPageBorderBoxCenter,u=t.previousClientSelection,d=t.afterCritical;if(!i.isEnabled)return null;var h=Go(i.descriptor.id,s),f=Ko(r,i),p=P$({isMovingForward:e,draggable:r,destination:i,insideDestination:h,previousImpact:a})||H$({isMovingForward:e,isInHomeList:f,draggable:r,draggables:s,destination:i,insideDestination:h,previousImpact:a,viewport:o,afterCritical:d});if(!p)return null;var g=ap({impact:p,draggable:r,droppable:i,draggables:s,afterCritical:d}),_=OA({draggable:r,destination:i,newPageBorderBoxCenter:g,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});if(_){var A=M_({pageBorderBoxCenter:g,draggable:r,viewport:o});return{clientSelection:A,impact:p,scrollJumpRequest:null}}var P=Bn(g,l),S=J$({impact:p,viewport:o,destination:i,draggables:s,maxScrollChange:P});return{clientSelection:u,impact:S,scrollJumpRequest:P}},gn=function(e){var r=e.subject.active;return r||ae(),r},t9=function(t){var e=t.isMovingForward,r=t.pageBorderBoxCenter,i=t.source,s=t.droppables,a=t.viewport,o=i.subject.active;if(!o)return null;var l=i.axis,u=ar(o[l.start],o[l.end]),d=rp(s).filter(function(f){return f!==i}).filter(function(f){return f.isEnabled}).filter(function(f){return!!f.subject.active}).filter(function(f){return RA(a.frame)(gn(f))}).filter(function(f){var p=gn(f);return e?o[l.crossAxisEnd]<p[l.crossAxisEnd]:p[l.crossAxisStart]<o[l.crossAxisStart]}).filter(function(f){var p=gn(f),g=ar(p[l.start],p[l.end]);return u(p[l.start])||u(p[l.end])||g(o[l.start])||g(o[l.end])}).sort(function(f,p){var g=gn(f)[l.crossAxisStart],_=gn(p)[l.crossAxisStart];return e?g-_:_-g}).filter(function(f,p,g){return gn(f)[l.crossAxisStart]===gn(g[0])[l.crossAxisStart]});if(!d.length)return null;if(d.length===1)return d[0];var h=d.filter(function(f){var p=ar(gn(f)[l.start],gn(f)[l.end]);return p(r[l.line])});return h.length===1?h[0]:h.length>1?h.sort(function(f,p){return gn(f)[l.start]-gn(p)[l.start]})[0]:d.sort(function(f,p){var g=DE(r,NE(gn(f))),_=DE(r,NE(gn(p)));return g!==_?g-_:gn(f)[l.start]-gn(p)[l.start]})[0]},VE=function(e,r){var i=e.page.borderBox.center;return ys(e.descriptor.id,r)?Bn(i,r.displacedBy.point):i},n9=function(e,r){var i=e.page.borderBox;return ys(e.descriptor.id,r)?gc(i,qo(r.displacedBy.point)):i},r9=function(t){var e=t.pageBorderBoxCenter,r=t.viewport,i=t.destination,s=t.insideDestination,a=t.afterCritical,o=s.filter(function(l){return NA({target:n9(l,a),destination:i,viewport:r.frame,withDroppableDisplacement:!0})}).sort(function(l,u){var d=Mu(e,mv(i,VE(l,a))),h=Mu(e,mv(i,VE(u,a)));return d<h?-1:h<d?1:l.descriptor.index-u.descriptor.index});return o[0]||null},vc=Bt(function(e,r){var i=r[e.line];return{value:i,point:ua(e.line,i)}}),i9=function(e,r,i){var s=e.axis;if(e.descriptor.mode==="virtual")return ua(s.line,r[s.line]);var a=e.subject.page.contentBox[s.size],o=Go(e.descriptor.id,i),l=o.reduce(function(h,f){return h+f.client.marginBox[s.size]},0),u=l+r[s.line],d=u-a;return d<=0?null:ua(s.line,d)},jA=function(e,r){return xe({},e,{scroll:xe({},e.scroll,{max:r})})},VA=function(e,r,i){var s=e.frame;Ko(r,e)&&ae(),e.subject.withPlaceholder&&ae();var a=vc(e.axis,r.displaceBy).point,o=i9(e,a,i),l={placeholderSize:a,increasedBy:o,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){var u=Co({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:e.frame});return xe({},e,{subject:u})}var d=o?Qt(s.scroll.max,o):s.scroll.max,h=jA(s,d),f=Co({page:e.subject.page,withPlaceholder:l,axis:e.axis,frame:h});return xe({},e,{subject:f,frame:h})},s9=function(e){var r=e.subject.withPlaceholder;r||ae();var i=e.frame;if(!i){var s=Co({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return xe({},e,{subject:s})}var a=r.oldFrameMaxScroll;a||ae();var o=jA(i,a),l=Co({page:e.subject.page,axis:e.axis,frame:o,withPlaceholder:null});return xe({},e,{subject:l,frame:o})},a9=function(t){var e=t.previousPageBorderBoxCenter,r=t.moveRelativeTo,i=t.insideDestination,s=t.draggable,a=t.draggables,o=t.destination,l=t.viewport,u=t.afterCritical;if(!r){if(i.length)return null;var d={displaced:Lu,displacedBy:PA,at:{type:"REORDER",destination:{droppableId:o.descriptor.id,index:0}}},h=ap({impact:d,draggable:s,droppable:o,draggables:a,afterCritical:u}),f=Ko(s,o)?o:VA(o,s,a),p=OA({draggable:s,destination:f,newPageBorderBoxCenter:h,viewport:l.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0});return p?d:null}var g=e[o.axis.line]<=r.page.borderBox.center[o.axis.line],_=function(){var P=r.descriptor.index;return r.descriptor.id===s.descriptor.id||g?P:P+1}(),A=vc(o.axis,s.displaceBy);return qh({draggable:s,insideDestination:i,destination:o,viewport:l,displacedBy:A,last:Lu,index:_})},o9=function(t){var e=t.isMovingForward,r=t.previousPageBorderBoxCenter,i=t.draggable,s=t.isOver,a=t.draggables,o=t.droppables,l=t.viewport,u=t.afterCritical,d=t9({isMovingForward:e,pageBorderBoxCenter:r,source:s,droppables:o,viewport:l});if(!d)return null;var h=Go(d.descriptor.id,a),f=r9({pageBorderBoxCenter:r,viewport:l,destination:d,insideDestination:h,afterCritical:u}),p=a9({previousPageBorderBoxCenter:r,destination:d,draggable:i,draggables:a,moveRelativeTo:f,insideDestination:h,viewport:l,afterCritical:u});if(!p)return null;var g=ap({impact:p,draggable:i,droppable:d,draggables:a,afterCritical:u}),_=M_({pageBorderBoxCenter:g,draggable:i,viewport:l});return{clientSelection:_,impact:p,scrollJumpRequest:null}},Hn=function(t){var e=t.at;return e?e.type==="REORDER"?e.destination.droppableId:e.combine.droppableId:null},l9=function(e,r){var i=Hn(e);return i?r[i]:null},u9=function(t){var e=t.state,r=t.type,i=l9(e.impact,e.dimensions.droppables),s=!!i,a=e.dimensions.droppables[e.critical.droppable.id],o=i||a,l=o.axis.direction,u=l==="vertical"&&(r==="MOVE_UP"||r==="MOVE_DOWN")||l==="horizontal"&&(r==="MOVE_LEFT"||r==="MOVE_RIGHT");if(u&&!s)return null;var d=r==="MOVE_DOWN"||r==="MOVE_RIGHT",h=e.dimensions.draggables[e.critical.draggable.id],f=e.current.page.borderBoxCenter,p=e.dimensions,g=p.draggables,_=p.droppables;return u?e9({isMovingForward:d,previousPageBorderBoxCenter:f,draggable:h,destination:o,draggables:g,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):o9({isMovingForward:d,previousPageBorderBoxCenter:f,draggable:h,isOver:o,draggables:g,droppables:_,viewport:e.viewport,afterCritical:e.afterCritical})};function $s(t){return t.phase==="DRAGGING"||t.phase==="COLLECTING"}function FA(t){var e=ar(t.top,t.bottom),r=ar(t.left,t.right);return function(s){return e(s.y)&&r(s.x)}}function c9(t,e){return t.left<e.right&&t.right>e.left&&t.top<e.bottom&&t.bottom>e.top}function d9(t){var e=t.pageBorderBox,r=t.draggable,i=t.candidates,s=r.page.borderBox.center,a=i.map(function(o){var l=o.axis,u=ua(o.axis.line,e.center[l.line],o.page.borderBox.center[l.crossAxisLine]);return{id:o.descriptor.id,distance:Mu(s,u)}}).sort(function(o,l){return l.distance-o.distance});return a[0]?a[0].id:null}function h9(t){var e=t.pageBorderBox,r=t.draggable,i=t.droppables,s=rp(i).filter(function(a){if(!a.isEnabled)return!1;var o=a.subject.active;if(!o||!c9(e,o))return!1;if(FA(o)(e.center))return!0;var l=a.axis,u=o.center[l.crossAxisLine],d=e[l.crossAxisStart],h=e[l.crossAxisEnd],f=ar(o[l.crossAxisStart],o[l.crossAxisEnd]),p=f(d),g=f(h);return!p&&!g?!0:p?d<u:h>u});return s.length?s.length===1?s[0].descriptor.id:d9({pageBorderBox:e,draggable:r,candidates:s}):null}var UA=function(e,r){return Er(gc(e,r))},f9=function(t,e){var r=t.frame;return r?UA(e,r.scroll.diff.value):e};function BA(t){var e=t.displaced,r=t.id;return!!(e.visible[r]||e.invisible[r])}function p9(t){var e=t.draggable,r=t.closest,i=t.inHomeList;return r?i&&r.descriptor.index>e.descriptor.index?r.descriptor.index-1:r.descriptor.index:null}var m9=function(t){var e=t.pageBorderBoxWithDroppableScroll,r=t.draggable,i=t.destination,s=t.insideDestination,a=t.last,o=t.viewport,l=t.afterCritical,u=i.axis,d=vc(i.axis,r.displaceBy),h=d.value,f=e[u.start],p=e[u.end],g=sp(r,s),_=Is(g,function(P){var S=P.descriptor.id,w=P.page.borderBox.center[u.line],x=ys(S,l),R=BA({displaced:a,id:S});return x?R?p<=w:f<w-h:R?p<=w+h:f<w}),A=p9({draggable:r,closest:_,inHomeList:Ko(r,i)});return qh({draggable:r,insideDestination:s,destination:i,viewport:o,last:a,displacedBy:d,index:A})},g9=4,v9=function(t){var e=t.draggable,r=t.pageBorderBoxWithDroppableScroll,i=t.previousImpact,s=t.destination,a=t.insideDestination,o=t.afterCritical;if(!s.isCombineEnabled)return null;var l=s.axis,u=vc(s.axis,e.displaceBy),d=u.value,h=r[l.start],f=r[l.end],p=sp(e,a),g=Is(p,function(A){var P=A.descriptor.id,S=A.page.borderBox,w=S[l.size],x=w/g9,R=ys(P,o),F=BA({displaced:i.displaced,id:P});return R?F?f>S[l.start]+x&&f<S[l.end]-x:h>S[l.start]-d+x&&h<S[l.end]-d-x:F?f>S[l.start]+d+x&&f<S[l.end]+d-x:h>S[l.start]+x&&h<S[l.end]-x});if(!g)return null;var _={displacedBy:u,displaced:i.displaced,at:{type:"COMBINE",combine:{draggableId:g.descriptor.id,droppableId:s.descriptor.id}}};return _},zA=function(t){var e=t.pageOffset,r=t.draggable,i=t.draggables,s=t.droppables,a=t.previousImpact,o=t.viewport,l=t.afterCritical,u=UA(r.page.borderBox,e),d=h9({pageBorderBox:u,draggable:r,droppables:s});if(!d)return R$;var h=s[d],f=Go(h.descriptor.id,i),p=f9(h,u);return v9({pageBorderBoxWithDroppableScroll:p,draggable:r,previousImpact:a,destination:h,insideDestination:f,afterCritical:l})||m9({pageBorderBoxWithDroppableScroll:p,draggable:r,destination:h,insideDestination:f,last:a.displaced,viewport:o,afterCritical:l})},L_=function(t,e){var r;return xe({},t,(r={},r[e.descriptor.id]=e,r))},y9=function(e){var r=e.previousImpact,i=e.impact,s=e.droppables,a=Hn(r),o=Hn(i);if(!a||a===o)return s;var l=s[a];if(!l.subject.withPlaceholder)return s;var u=s9(l);return L_(s,u)},_9=function(t){var e=t.draggable,r=t.draggables,i=t.droppables,s=t.previousImpact,a=t.impact,o=y9({previousImpact:s,impact:a,droppables:i}),l=Hn(a);if(!l)return o;var u=i[l];if(Ko(e,u)||u.subject.withPlaceholder)return o;var d=VA(u,e,r);return L_(o,d)},eu=function(t){var e=t.state,r=t.clientSelection,i=t.dimensions,s=t.viewport,a=t.impact,o=t.scrollJumpRequest,l=s||e.viewport,u=i||e.dimensions,d=r||e.current.client.selection,h=Bn(d,e.initial.client.selection),f={offset:h,selection:d,borderBoxCenter:Qt(e.initial.client.borderBoxCenter,h)},p={selection:Qt(f.selection,l.scroll.current),borderBoxCenter:Qt(f.borderBoxCenter,l.scroll.current),offset:Qt(f.offset,l.scroll.diff.value)},g={client:f,page:p};if(e.phase==="COLLECTING")return xe({phase:"COLLECTING"},e,{dimensions:u,viewport:l,current:g});var _=u.draggables[e.critical.draggable.id],A=a||zA({pageOffset:p.offset,draggable:_,draggables:u.draggables,droppables:u.droppables,previousImpact:e.impact,viewport:l,afterCritical:e.afterCritical}),P=_9({draggable:_,impact:A,previousImpact:e.impact,draggables:u.draggables,droppables:u.droppables}),S=xe({},e,{current:g,dimensions:{draggables:u.draggables,droppables:P},impact:A,viewport:l,scrollJumpRequest:o||null,forceShouldAnimate:o?!1:null});return S};function w9(t,e){return t.map(function(r){return e[r]})}var $A=function(t){var e=t.impact,r=t.viewport,i=t.draggables,s=t.destination,a=t.forceShouldAnimate,o=e.displaced,l=w9(o.all,i),u=Ou({afterDragging:l,destination:s,displacedBy:e.displacedBy,viewport:r.frame,forceShouldAnimate:a,last:o});return xe({},e,{displaced:u})},HA=function(t){var e=t.impact,r=t.draggable,i=t.droppable,s=t.draggables,a=t.viewport,o=t.afterCritical,l=ap({impact:e,draggable:r,draggables:s,droppable:i,afterCritical:o});return M_({pageBorderBoxCenter:l,draggable:r,viewport:a})},WA=function(t){var e=t.state,r=t.dimensions,i=t.viewport;e.movementMode!=="SNAP"&&ae();var s=e.impact,a=i||e.viewport,o=r||e.dimensions,l=o.draggables,u=o.droppables,d=l[e.critical.draggable.id],h=Hn(s);h||ae();var f=u[h],p=$A({impact:s,viewport:a,destination:f,draggables:l}),g=HA({impact:p,draggable:d,droppable:f,draggables:l,viewport:a,afterCritical:e.afterCritical});return eu({impact:p,clientSelection:g,state:e,dimensions:o,viewport:a})},b9=function(t){return{index:t.index,droppableId:t.droppableId}},qA=function(t){var e=t.draggable,r=t.home,i=t.draggables,s=t.viewport,a=vc(r.axis,e.displaceBy),o=Go(r.descriptor.id,i),l=o.indexOf(e);l===-1&&ae();var u=o.slice(l+1),d=u.reduce(function(g,_){return g[_.descriptor.id]=!0,g},{}),h={inVirtualList:r.descriptor.mode==="virtual",displacedBy:a,effected:d},f=Ou({afterDragging:u,destination:r,displacedBy:a,last:null,viewport:s.frame,forceShouldAnimate:!1}),p={displaced:f,displacedBy:a,at:{type:"REORDER",destination:b9(e.descriptor)}};return{impact:p,afterCritical:h}},x9=function(t,e){return{draggables:t.draggables,droppables:L_(t.droppables,e)}},E9=function(t){var e=t.draggable,r=t.offset,i=t.initialWindowScroll,s=Bh(e.client,r),a=zh(s,i),o=xe({},e,{placeholder:xe({},e.placeholder,{client:s}),client:s,page:a});return o},T9=function(t){var e=t.frame;return e||ae(),e},S9=function(t){var e=t.additions,r=t.updatedDroppables,i=t.viewport,s=i.scroll.diff.value;return e.map(function(a){var o=a.descriptor.droppableId,l=r[o],u=T9(l),d=u.scroll.diff.value,h=Qt(s,d),f=E9({draggable:a,offset:h,initialWindowScroll:i.scroll.initial});return f})},I9=function(t){var e=t.state,r=t.published,i=r.modified.map(function(x){var R=e.dimensions.droppables[x.droppableId],F=C_(R,x.scroll);return F}),s=xe({},e.dimensions.droppables,{},CA(i)),a=AA(S9({additions:r.additions,updatedDroppables:s,viewport:e.viewport})),o=xe({},e.dimensions.draggables,{},a);r.removals.forEach(function(x){delete o[x]});var l={droppables:s,draggables:o},u=Hn(e.impact),d=u?l.droppables[u]:null,h=l.draggables[e.critical.draggable.id],f=l.droppables[e.critical.droppable.id],p=qA({draggable:h,home:f,draggables:o,viewport:e.viewport}),g=p.impact,_=p.afterCritical,A=d&&d.isCombineEnabled?e.impact:g,P=zA({pageOffset:e.current.page.offset,draggable:l.draggables[e.critical.draggable.id],draggables:l.draggables,droppables:l.droppables,previousImpact:A,viewport:e.viewport,afterCritical:_}),S=xe({phase:"DRAGGING"},e,{phase:"DRAGGING",impact:P,onLiftImpact:g,dimensions:l,afterCritical:_,forceShouldAnimate:!1});if(e.phase==="COLLECTING")return S;var w=xe({phase:"DROP_PENDING"},S,{phase:"DROP_PENDING",reason:e.reason,isWaiting:!1});return w},gv=function(e){return e.movementMode==="SNAP"},Em=function(e,r,i){var s=x9(e.dimensions,r);return!gv(e)||i?eu({state:e,dimensions:s}):WA({state:e,dimensions:s})};function Tm(t){return t.isDragging&&t.movementMode==="SNAP"?xe({phase:"DRAGGING"},t,{scrollJumpRequest:null}):t}var FE={phase:"IDLE",completed:null,shouldFlush:!1},k9=function(t,e){if(t===void 0&&(t=FE),e.type==="FLUSH")return xe({},FE,{shouldFlush:!0});if(e.type==="INITIAL_PUBLISH"){t.phase!=="IDLE"&&ae();var r=e.payload,i=r.critical,s=r.clientSelection,a=r.viewport,o=r.dimensions,l=r.movementMode,u=o.draggables[i.draggable.id],d=o.droppables[i.droppable.id],h={selection:s,borderBoxCenter:u.client.borderBox.center,offset:zt},f={client:h,page:{selection:Qt(h.selection,a.scroll.initial),borderBoxCenter:Qt(h.selection,a.scroll.initial),offset:Qt(h.selection,a.scroll.diff.value)}},p=rp(o.droppables).every(function(We){return!We.isFixedOnPage}),g=qA({draggable:u,home:d,draggables:o.draggables,viewport:a}),_=g.impact,A=g.afterCritical,P={phase:"DRAGGING",isDragging:!0,critical:i,movementMode:l,dimensions:o,initial:f,current:f,isWindowScrollAllowed:p,impact:_,afterCritical:A,onLiftImpact:_,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null};return P}if(e.type==="COLLECTION_STARTING"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&ae();var S=xe({phase:"COLLECTING"},t,{phase:"COLLECTING"});return S}if(e.type==="PUBLISH_WHILE_DRAGGING")return t.phase==="COLLECTING"||t.phase==="DROP_PENDING"||ae(),I9({state:t,published:e.payload});if(e.type==="MOVE"){if(t.phase==="DROP_PENDING")return t;$s(t)||ae();var w=e.payload.client;return os(w,t.current.client.selection)?t:eu({state:t,clientSelection:w,impact:gv(t)?t.impact:null})}if(e.type==="UPDATE_DROPPABLE_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="COLLECTING")return Tm(t);$s(t)||ae();var x=e.payload,R=x.id,F=x.newScroll,V=t.dimensions.droppables[R];if(!V)return t;var N=C_(V,F);return Em(t,N,!1)}if(e.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(t.phase==="DROP_PENDING")return t;$s(t)||ae();var I=e.payload,y=I.id,b=I.isEnabled,T=t.dimensions.droppables[y];T||ae(),T.isEnabled===b&&ae();var O=xe({},T,{isEnabled:b});return Em(t,O,!0)}if(e.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(t.phase==="DROP_PENDING")return t;$s(t)||ae();var D=e.payload,K=D.id,ie=D.isCombineEnabled,oe=t.dimensions.droppables[K];oe||ae(),oe.isCombineEnabled===ie&&ae();var he=xe({},oe,{isCombineEnabled:ie});return Em(t,he,!0)}if(e.type==="MOVE_BY_WINDOW_SCROLL"){if(t.phase==="DROP_PENDING"||t.phase==="DROP_ANIMATING")return t;$s(t)||ae(),t.isWindowScrollAllowed||ae();var q=e.payload.newScroll;if(os(t.viewport.scroll.current,q))return Tm(t);var Y=LA(t.viewport,q);return gv(t)?WA({state:t,viewport:Y}):eu({state:t,viewport:Y})}if(e.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!$s(t))return t;var se=e.payload.maxScroll;if(os(se,t.viewport.scroll.max))return t;var re=xe({},t.viewport,{scroll:xe({},t.viewport.scroll,{max:se})});return xe({phase:"DRAGGING"},t,{viewport:re})}if(e.type==="MOVE_UP"||e.type==="MOVE_DOWN"||e.type==="MOVE_LEFT"||e.type==="MOVE_RIGHT"){if(t.phase==="COLLECTING"||t.phase==="DROP_PENDING")return t;t.phase!=="DRAGGING"&&ae();var W=u9({state:t,type:e.type});return W?eu({state:t,impact:W.impact,clientSelection:W.clientSelection,scrollJumpRequest:W.scrollJumpRequest}):t}if(e.type==="DROP_PENDING"){var H=e.payload.reason;t.phase!=="COLLECTING"&&ae();var Q=xe({phase:"DROP_PENDING"},t,{phase:"DROP_PENDING",isWaiting:!0,reason:H});return Q}if(e.type==="DROP_ANIMATE"){var X=e.payload,ue=X.completed,ge=X.dropDuration,Oe=X.newHomeClientOffset;t.phase==="DRAGGING"||t.phase==="DROP_PENDING"||ae();var Ne={phase:"DROP_ANIMATING",completed:ue,dropDuration:ge,newHomeClientOffset:Oe,dimensions:t.dimensions};return Ne}if(e.type==="DROP_COMPLETE"){var He=e.payload.completed;return{phase:"IDLE",completed:He,shouldFlush:!1}}return t},C9=function(e){return{type:"BEFORE_INITIAL_CAPTURE",payload:e}},A9=function(e){return{type:"LIFT",payload:e}},P9=function(e){return{type:"INITIAL_PUBLISH",payload:e}},R9=function(e){return{type:"PUBLISH_WHILE_DRAGGING",payload:e}},D9=function(){return{type:"COLLECTION_STARTING",payload:null}},N9=function(e){return{type:"UPDATE_DROPPABLE_SCROLL",payload:e}},M9=function(e){return{type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}},L9=function(e){return{type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}},GA=function(e){return{type:"MOVE",payload:e}},O9=function(e){return{type:"MOVE_BY_WINDOW_SCROLL",payload:e}},j9=function(e){return{type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}},V9=function(){return{type:"MOVE_UP",payload:null}},F9=function(){return{type:"MOVE_DOWN",payload:null}},U9=function(){return{type:"MOVE_RIGHT",payload:null}},B9=function(){return{type:"MOVE_LEFT",payload:null}},O_=function(){return{type:"FLUSH",payload:null}},z9=function(e){return{type:"DROP_ANIMATE",payload:e}},j_=function(e){return{type:"DROP_COMPLETE",payload:e}},KA=function(e){return{type:"DROP",payload:e}},$9=function(e){return{type:"DROP_PENDING",payload:e}},YA=function(){return{type:"DROP_ANIMATION_FINISHED",payload:null}},H9=function(t){return function(e){var r=e.getState,i=e.dispatch;return function(s){return function(a){if(a.type!=="LIFT"){s(a);return}var o=a.payload,l=o.id,u=o.clientSelection,d=o.movementMode,h=r();h.phase==="DROP_ANIMATING"&&i(j_({completed:h.completed})),r().phase!=="IDLE"&&ae(),i(O_()),i(C9({draggableId:l,movementMode:d}));var f={shouldPublishImmediately:d==="SNAP"},p={draggableId:l,scrollOptions:f},g=t.startPublishing(p),_=g.critical,A=g.dimensions,P=g.viewport;i(P9({critical:_,dimensions:A,clientSelection:u,movementMode:d,viewport:P}))}}}},W9=function(t){return function(){return function(e){return function(r){r.type==="INITIAL_PUBLISH"&&t.dragging(),r.type==="DROP_ANIMATE"&&t.dropping(r.payload.completed.result.reason),(r.type==="FLUSH"||r.type==="DROP_COMPLETE")&&t.resting(),e(r)}}}},V_={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},ju={opacity:{drop:0,combining:.7},scale:{drop:.75}},F_={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Vs=F_.outOfTheWay+"s "+V_.outOfTheWay,tu={fluid:"opacity "+Vs,snap:"transform "+Vs+", opacity "+Vs,drop:function(e){var r=e+"s "+V_.drop;return"transform "+r+", opacity "+r},outOfTheWay:"transform "+Vs,placeholder:"height "+Vs+", width "+Vs+", margin "+Vs},UE=function(e){return os(e,zt)?null:"translate("+e.x+"px, "+e.y+"px)"},vv={moveTo:UE,drop:function(e,r){var i=UE(e);return i?r?i+" scale("+ju.scale.drop+")":i:null}},yv=F_.minDropTime,XA=F_.maxDropTime,q9=XA-yv,BE=1500,G9=.6,K9=function(t){var e=t.current,r=t.destination,i=t.reason,s=Mu(e,r);if(s<=0)return yv;if(s>=BE)return XA;var a=s/BE,o=yv+q9*a,l=i==="CANCEL"?o*G9:o;return Number(l.toFixed(2))},Y9=function(t){var e=t.impact,r=t.draggable,i=t.dimensions,s=t.viewport,a=t.afterCritical,o=i.draggables,l=i.droppables,u=Hn(e),d=u?l[u]:null,h=l[r.descriptor.droppableId],f=HA({impact:e,draggable:r,draggables:o,afterCritical:a,droppable:d||h,viewport:s}),p=Bn(f,r.client.borderBox.center);return p},X9=function(t){var e=t.draggables,r=t.reason,i=t.lastImpact,s=t.home,a=t.viewport,o=t.onLiftImpact;if(!i.at||r!=="DROP"){var l=$A({draggables:e,impact:o,destination:s,viewport:a,forceShouldAnimate:!0});return{impact:l,didDropInsideDroppable:!1}}if(i.at.type==="REORDER")return{impact:i,didDropInsideDroppable:!0};var u=xe({},i,{displaced:Lu});return{impact:u,didDropInsideDroppable:!0}},Q9=function(t){var e=t.getState,r=t.dispatch;return function(i){return function(s){if(s.type!=="DROP"){i(s);return}var a=e(),o=s.payload.reason;if(a.phase==="COLLECTING"){r($9({reason:o}));return}if(a.phase!=="IDLE"){var l=a.phase==="DROP_PENDING"&&a.isWaiting;l&&ae(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||ae();var u=a.critical,d=a.dimensions,h=d.draggables[a.critical.draggable.id],f=X9({reason:o,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),p=f.impact,g=f.didDropInsideDroppable,_=g?P_(p):null,A=g?ip(p):null,P={index:u.draggable.index,droppableId:u.droppable.id},S={draggableId:h.descriptor.id,type:h.descriptor.type,source:P,reason:o,mode:a.movementMode,destination:_,combine:A},w=Y9({impact:p,draggable:h,dimensions:d,viewport:a.viewport,afterCritical:a.afterCritical}),x={critical:a.critical,afterCritical:a.afterCritical,result:S,impact:p},R=!os(a.current.client.offset,w)||!!S.combine;if(!R){r(j_({completed:x}));return}var F=K9({current:a.current.client.offset,destination:w,reason:o}),V={newHomeClientOffset:w,dropDuration:F,completed:x};r(z9(V))}}}},QA=function(){return{x:window.pageXOffset,y:window.pageYOffset}};function J9(t){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(r){r.target!==window&&r.target!==window.document||t()}}}function Z9(t){var e=t.onWindowScroll;function r(){e(QA())}var i=Nu(r),s=J9(i),a=as;function o(){return a!==as}function l(){o()&&ae(),a=rr(window,[s])}function u(){o()||ae(),i.cancel(),a(),a=as}return{start:l,stop:u,isActive:o}}var eH=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},tH=function(t){var e=Z9({onWindowScroll:function(i){t.dispatch(O9({newScroll:i}))}});return function(r){return function(i){!e.isActive()&&i.type==="INITIAL_PUBLISH"&&e.start(),e.isActive()&&eH(i)&&e.stop(),r(i)}}},nH=function(t){var e=!1,r=!1,i=setTimeout(function(){r=!0}),s=function(o){e||r||(e=!0,t(o),clearTimeout(i))};return s.wasCalled=function(){return e},s},rH=function(){var t=[],e=function(a){var o=A_(t,function(d){return d.timerId===a});o===-1&&ae();var l=t.splice(o,1),u=l[0];u.callback()},r=function(a){var o=setTimeout(function(){return e(o)}),l={timerId:o,callback:a};t.push(l)},i=function(){if(t.length){var a=[].concat(t);t.length=0,a.forEach(function(o){clearTimeout(o.timerId),o.callback()})}};return{add:r,flush:i}},iH=function(e,r){return e==null&&r==null?!0:e==null||r==null?!1:e.droppableId===r.droppableId&&e.index===r.index},sH=function(e,r){return e==null&&r==null?!0:e==null||r==null?!1:e.draggableId===r.draggableId&&e.droppableId===r.droppableId},aH=function(e,r){if(e===r)return!0;var i=e.draggable.id===r.draggable.id&&e.draggable.droppableId===r.draggable.droppableId&&e.draggable.type===r.draggable.type&&e.draggable.index===r.draggable.index,s=e.droppable.id===r.droppable.id&&e.droppable.type===r.droppable.type;return i&&s},El=function(e,r){r()},dd=function(e,r){return{draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:r}},Sm=function(e,r,i,s){if(!e){i(s(r));return}var a=nH(i),o={announce:a};e(r,o),a.wasCalled()||i(s(r))},oH=function(t,e){var r=rH(),i=null,s=function(p,g){i&&ae(),El("onBeforeCapture",function(){var _=t().onBeforeCapture;if(_){var A={draggableId:p,mode:g};_(A)}})},a=function(p,g){i&&ae(),El("onBeforeDragStart",function(){var _=t().onBeforeDragStart;_&&_(dd(p,g))})},o=function(p,g){i&&ae();var _=dd(p,g);i={mode:g,lastCritical:p,lastLocation:_.source,lastCombine:null},r.add(function(){El("onDragStart",function(){return Sm(t().onDragStart,_,e,zd.onDragStart)})})},l=function(p,g){var _=P_(g),A=ip(g);i||ae();var P=!aH(p,i.lastCritical);P&&(i.lastCritical=p);var S=!iH(i.lastLocation,_);S&&(i.lastLocation=_);var w=!sH(i.lastCombine,A);if(w&&(i.lastCombine=A),!(!P&&!S&&!w)){var x=xe({},dd(p,i.mode),{combine:A,destination:_});r.add(function(){El("onDragUpdate",function(){return Sm(t().onDragUpdate,x,e,zd.onDragUpdate)})})}},u=function(){i||ae(),r.flush()},d=function(p){i||ae(),i=null,El("onDragEnd",function(){return Sm(t().onDragEnd,p,e,zd.onDragEnd)})},h=function(){if(i){var p=xe({},dd(i.lastCritical,i.mode),{combine:null,destination:null,reason:"CANCEL"});d(p)}};return{beforeCapture:s,beforeStart:a,start:o,update:l,flush:u,drop:d,abort:h}},lH=function(t,e){var r=oH(t,e);return function(i){return function(s){return function(a){if(a.type==="BEFORE_INITIAL_CAPTURE"){r.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(a.type==="INITIAL_PUBLISH"){var o=a.payload.critical;r.beforeStart(o,a.payload.movementMode),s(a),r.start(o,a.payload.movementMode);return}if(a.type==="DROP_COMPLETE"){var l=a.payload.completed.result;r.flush(),s(a),r.drop(l);return}if(s(a),a.type==="FLUSH"){r.abort();return}var u=i.getState();u.phase==="DRAGGING"&&r.update(u.critical,u.impact)}}}},uH=function(t){return function(e){return function(r){if(r.type!=="DROP_ANIMATION_FINISHED"){e(r);return}var i=t.getState();i.phase!=="DROP_ANIMATING"&&ae(),t.dispatch(j_({completed:i.completed}))}}},cH=function(t){var e=null,r=null;function i(){r&&(cancelAnimationFrame(r),r=null),e&&(e(),e=null)}return function(s){return function(a){if((a.type==="FLUSH"||a.type==="DROP_COMPLETE"||a.type==="DROP_ANIMATION_FINISHED")&&i(),s(a),a.type==="DROP_ANIMATE"){var o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){var u=t.getState();u.phase==="DROP_ANIMATING"&&t.dispatch(YA())}};r=requestAnimationFrame(function(){r=null,e=rr(window,[o])})}}}},dH=function(t){return function(){return function(e){return function(r){(r.type==="DROP_COMPLETE"||r.type==="FLUSH"||r.type==="DROP_ANIMATE")&&t.stopPublishing(),e(r)}}}},hH=function(t){var e=!1;return function(){return function(r){return function(i){if(i.type==="INITIAL_PUBLISH"){e=!0,t.tryRecordFocus(i.payload.critical.draggable.id),r(i),t.tryRestoreFocusRecorded();return}if(r(i),!!e){if(i.type==="FLUSH"){e=!1,t.tryRestoreFocusRecorded();return}if(i.type==="DROP_COMPLETE"){e=!1;var s=i.payload.completed.result;s.combine&&t.tryShiftRecord(s.draggableId,s.combine.draggableId),t.tryRestoreFocusRecorded()}}}}}},fH=function(e){return e.type==="DROP_COMPLETE"||e.type==="DROP_ANIMATE"||e.type==="FLUSH"},pH=function(t){return function(e){return function(r){return function(i){if(fH(i)){t.stop(),r(i);return}if(i.type==="INITIAL_PUBLISH"){r(i);var s=e.getState();s.phase!=="DRAGGING"&&ae(),t.start(s);return}r(i),t.scroll(e.getState())}}}},mH=function(t){return function(e){return function(r){if(e(r),r.type==="PUBLISH_WHILE_DRAGGING"){var i=t.getState();i.phase==="DROP_PENDING"&&(i.isWaiting||t.dispatch(KA({reason:i.reason})))}}}},gH=rA,vH=function(t){var e=t.dimensionMarshal,r=t.focusMarshal,i=t.styleMarshal,s=t.getResponders,a=t.announce,o=t.autoScroller;return nA(k9,gH(rz(W9(i),dH(e),H9(e),Q9,uH,cH,mH,pH(o),tH,hH(r),lH(s,a))))},Im=function(){return{additions:{},removals:{},modified:{}}};function yH(t){var e=t.registry,r=t.callbacks,i=Im(),s=null,a=function(){s||(r.collectionStarting(),s=requestAnimationFrame(function(){s=null;var h=i,f=h.additions,p=h.removals,g=h.modified,_=Object.keys(f).map(function(S){return e.draggable.getById(S).getDimension(zt)}).sort(function(S,w){return S.descriptor.index-w.descriptor.index}),A=Object.keys(g).map(function(S){var w=e.droppable.getById(S),x=w.callbacks.getScrollWhileDragging();return{droppableId:S,scroll:x}}),P={additions:_,removals:Object.keys(p),modified:A};i=Im(),r.publish(P)}))},o=function(h){var f=h.descriptor.id;i.additions[f]=h,i.modified[h.descriptor.droppableId]=!0,i.removals[f]&&delete i.removals[f],a()},l=function(h){var f=h.descriptor;i.removals[f.id]=!0,i.modified[f.droppableId]=!0,i.additions[f.id]&&delete i.additions[f.id],a()},u=function(){s&&(cancelAnimationFrame(s),s=null,i=Im())};return{add:o,remove:l,stop:u}}var JA=function(t){var e=t.scrollHeight,r=t.scrollWidth,i=t.height,s=t.width,a=Bn({x:r,y:e},{x:s,y:i}),o={x:Math.max(0,a.x),y:Math.max(0,a.y)};return o},ZA=function(){var t=document.documentElement;return t||ae(),t},eP=function(){var t=ZA(),e=JA({scrollHeight:t.scrollHeight,scrollWidth:t.scrollWidth,width:t.clientWidth,height:t.clientHeight});return e},_H=function(){var t=QA(),e=eP(),r=t.y,i=t.x,s=ZA(),a=s.clientWidth,o=s.clientHeight,l=i+a,u=r+o,d=Er({top:r,left:i,right:l,bottom:u}),h={frame:d,scroll:{initial:t,current:t,max:e,diff:{value:zt,displacement:zt}}};return h},wH=function(t){var e=t.critical,r=t.scrollOptions,i=t.registry,s=_H(),a=s.scroll.current,o=e.droppable,l=i.droppable.getAllByType(o.type).map(function(f){return f.callbacks.getDimensionAndWatchScroll(a,r)}),u=i.draggable.getAllByType(e.draggable.type).map(function(f){return f.getDimension(a)}),d={draggables:AA(u),droppables:CA(l)},h={dimensions:d,critical:e,viewport:s};return h};function zE(t,e,r){if(r.descriptor.id===e.id||r.descriptor.type!==e.type)return!1;var i=t.droppable.getById(r.descriptor.droppableId);return i.descriptor.mode==="virtual"}var bH=function(t,e){var r=null,i=yH({callbacks:{publish:e.publishWhileDragging,collectionStarting:e.collectionStarting},registry:t}),s=function(g,_){t.droppable.exists(g)||ae(),r&&e.updateDroppableIsEnabled({id:g,isEnabled:_})},a=function(g,_){r&&(t.droppable.exists(g)||ae(),e.updateDroppableIsCombineEnabled({id:g,isCombineEnabled:_}))},o=function(g,_){r&&(t.droppable.exists(g)||ae(),e.updateDroppableScroll({id:g,newScroll:_}))},l=function(g,_){r&&t.droppable.getById(g).callbacks.scroll(_)},u=function(){if(r){i.stop();var g=r.critical.droppable;t.droppable.getAllByType(g.type).forEach(function(_){return _.callbacks.dragStopped()}),r.unsubscribe(),r=null}},d=function(g){r||ae();var _=r.critical.draggable;g.type==="ADDITION"&&zE(t,_,g.value)&&i.add(g.value),g.type==="REMOVAL"&&zE(t,_,g.value)&&i.remove(g.value)},h=function(g){r&&ae();var _=t.draggable.getById(g.draggableId),A=t.droppable.getById(_.descriptor.droppableId),P={draggable:_.descriptor,droppable:A.descriptor},S=t.subscribe(d);return r={critical:P,unsubscribe:S},wH({critical:P,registry:t,scrollOptions:g.scrollOptions})},f={updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:a,scrollDroppable:l,updateDroppableScroll:o,startPublishing:h,stopPublishing:u};return f},tP=function(t,e){return t.phase==="IDLE"?!0:t.phase!=="DROP_ANIMATING"||t.completed.result.draggableId===e?!1:t.completed.result.reason==="DROP"},xH=function(t){window.scrollBy(t.x,t.y)},EH=Bt(function(t){return rp(t).filter(function(e){return!(!e.isEnabled||!e.frame)})}),TH=function(e,r){var i=Is(EH(r),function(s){return s.frame||ae(),FA(s.frame.pageMarginBox)(e)});return i},SH=function(t){var e=t.center,r=t.destination,i=t.droppables;if(r){var s=i[r];return s.frame?s:null}var a=TH(e,i);return a},ls={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:function(e){return Math.pow(e,2)},durationDampening:{stopDampeningAt:1200,accelerateAt:360}},IH=function(t,e){var r=t[e.size]*ls.startFromPercentage,i=t[e.size]*ls.maxScrollAtPercentage,s={startScrollingFrom:r,maxScrollValueAt:i};return s},nP=function(t){var e=t.startOfRange,r=t.endOfRange,i=t.current,s=r-e;if(s===0)return 0;var a=i-e,o=a/s;return o},U_=1,kH=function(t,e){if(t>e.startScrollingFrom)return 0;if(t<=e.maxScrollValueAt)return ls.maxPixelScroll;if(t===e.startScrollingFrom)return U_;var r=nP({startOfRange:e.maxScrollValueAt,endOfRange:e.startScrollingFrom,current:t}),i=1-r,s=ls.maxPixelScroll*ls.ease(i);return Math.ceil(s)},$E=ls.durationDampening.accelerateAt,HE=ls.durationDampening.stopDampeningAt,CH=function(t,e){var r=e,i=HE,s=Date.now(),a=s-r;if(a>=HE)return t;if(a<$E)return U_;var o=nP({startOfRange:$E,endOfRange:i,current:a}),l=t*ls.ease(o);return Math.ceil(l)},WE=function(t){var e=t.distanceToEdge,r=t.thresholds,i=t.dragStartTime,s=t.shouldUseTimeDampening,a=kH(e,r);return a===0?0:s?Math.max(CH(a,i),U_):a},qE=function(t){var e=t.container,r=t.distanceToEdges,i=t.dragStartTime,s=t.axis,a=t.shouldUseTimeDampening,o=IH(e,s),l=r[s.end]<r[s.start];return l?WE({distanceToEdge:r[s.end],thresholds:o,dragStartTime:i,shouldUseTimeDampening:a}):-1*WE({distanceToEdge:r[s.start],thresholds:o,dragStartTime:i,shouldUseTimeDampening:a})},AH=function(t){var e=t.container,r=t.subject,i=t.proposedScroll,s=r.height>e.height,a=r.width>e.width;return!a&&!s?i:a&&s?null:{x:a?0:i.x,y:s?0:i.y}},PH=IA(function(t){return t===0?0:t}),rP=function(t){var e=t.dragStartTime,r=t.container,i=t.subject,s=t.center,a=t.shouldUseTimeDampening,o={top:s.y-r.top,right:r.right-s.x,bottom:r.bottom-s.y,left:s.x-r.left},l=qE({container:r,distanceToEdges:o,dragStartTime:e,axis:R_,shouldUseTimeDampening:a}),u=qE({container:r,distanceToEdges:o,dragStartTime:e,axis:DA,shouldUseTimeDampening:a}),d=PH({x:u,y:l});if(os(d,zt))return null;var h=AH({container:r,subject:i,proposedScroll:d});return h?os(h,zt)?null:h:null},RH=IA(function(t){return t===0?0:t>0?1:-1}),B_=function(){var t=function(r,i){return r<0?r:r>i?r-i:0};return function(e){var r=e.current,i=e.max,s=e.change,a=Qt(r,s),o={x:t(a.x,i.x),y:t(a.y,i.y)};return os(o,zt)?null:o}}(),iP=function(e){var r=e.max,i=e.current,s=e.change,a={x:Math.max(i.x,r.x),y:Math.max(i.y,r.y)},o=RH(s),l=B_({max:a,current:i,change:o});return!l||o.x!==0&&l.x===0||o.y!==0&&l.y===0},z_=function(e,r){return iP({current:e.scroll.current,max:e.scroll.max,change:r})},DH=function(e,r){if(!z_(e,r))return null;var i=e.scroll.max,s=e.scroll.current;return B_({current:s,max:i,change:r})},$_=function(e,r){var i=e.frame;return i?iP({current:i.scroll.current,max:i.scroll.max,change:r}):!1},NH=function(e,r){var i=e.frame;return!i||!$_(e,r)?null:B_({current:i.scroll.current,max:i.scroll.max,change:r})},MH=function(t){var e=t.viewport,r=t.subject,i=t.center,s=t.dragStartTime,a=t.shouldUseTimeDampening,o=rP({dragStartTime:s,container:e.frame,subject:r,center:i,shouldUseTimeDampening:a});return o&&z_(e,o)?o:null},LH=function(t){var e=t.droppable,r=t.subject,i=t.center,s=t.dragStartTime,a=t.shouldUseTimeDampening,o=e.frame;if(!o)return null;var l=rP({dragStartTime:s,container:o.pageMarginBox,subject:r,center:i,shouldUseTimeDampening:a});return l&&$_(e,l)?l:null},GE=function(t){var e=t.state,r=t.dragStartTime,i=t.shouldUseTimeDampening,s=t.scrollWindow,a=t.scrollDroppable,o=e.current.page.borderBoxCenter,l=e.dimensions.draggables[e.critical.draggable.id],u=l.page.marginBox;if(e.isWindowScrollAllowed){var d=e.viewport,h=MH({dragStartTime:r,viewport:d,subject:u,center:o,shouldUseTimeDampening:i});if(h){s(h);return}}var f=SH({center:o,destination:Hn(e.impact),droppables:e.dimensions.droppables});if(f){var p=LH({dragStartTime:r,droppable:f,subject:u,center:o,shouldUseTimeDampening:i});p&&a(f.descriptor.id,p)}},OH=function(t){var e=t.scrollWindow,r=t.scrollDroppable,i=Nu(e),s=Nu(r),a=null,o=function(h){a||ae();var f=a,p=f.shouldUseTimeDampening,g=f.dragStartTime;GE({state:h,scrollWindow:i,scrollDroppable:s,dragStartTime:g,shouldUseTimeDampening:p})},l=function(h){a&&ae();var f=Date.now(),p=!1,g=function(){p=!0};GE({state:h,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:g,scrollDroppable:g}),a={dragStartTime:f,shouldUseTimeDampening:p},p&&o(h)},u=function(){a&&(i.cancel(),s.cancel(),a=null)};return{start:l,stop:u,scroll:o}},jH=function(t){var e=t.move,r=t.scrollDroppable,i=t.scrollWindow,s=function(d,h){var f=Qt(d.current.client.selection,h);e({client:f})},a=function(d,h){if(!$_(d,h))return h;var f=NH(d,h);if(!f)return r(d.descriptor.id,h),null;var p=Bn(h,f);r(d.descriptor.id,p);var g=Bn(h,p);return g},o=function(d,h,f){if(!d||!z_(h,f))return f;var p=DH(h,f);if(!p)return i(f),null;var g=Bn(f,p);i(g);var _=Bn(f,g);return _},l=function(d){var h=d.scrollJumpRequest;if(h){var f=Hn(d.impact);f||ae();var p=a(d.dimensions.droppables[f],h);if(p){var g=d.viewport,_=o(d.isWindowScrollAllowed,g,p);_&&s(d,_)}}};return l},VH=function(t){var e=t.scrollDroppable,r=t.scrollWindow,i=t.move,s=OH({scrollWindow:r,scrollDroppable:e}),a=jH({move:i,scrollWindow:r,scrollDroppable:e}),o=function(d){if(d.phase==="DRAGGING"){if(d.movementMode==="FLUID"){s.scroll(d);return}d.scrollJumpRequest&&a(d)}},l={scroll:o,start:s.start,stop:s.stop};return l},Ao="data-rbd",Po=function(){var t=Ao+"-drag-handle";return{base:t,draggableId:t+"-draggable-id",contextId:t+"-context-id"}}(),_v=function(){var t=Ao+"-draggable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),FH=function(){var t=Ao+"-droppable";return{base:t,contextId:t+"-context-id",id:t+"-id"}}(),KE={contextId:Ao+"-scroll-container-context-id"},UH=function(e){return function(r){return"["+r+'="'+e+'"]'}},Tl=function(e,r){return e.map(function(i){var s=i.styles[r];return s?i.selector+" { "+s+" }":""}).join(" ")},BH="pointer-events: none;",zH=function(t){var e=UH(t),r=function(){var l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:e(Po.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:BH,dropAnimating:l}}}(),i=function(){var l=`
      transition: `+tu.outOfTheWay+`;
    `;return{selector:e(_v.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}}(),s={selector:e(FH.contextId),styles:{always:"overflow-anchor: none;"}},a={selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}},o=[i,r,s,a];return{always:Tl(o,"always"),resting:Tl(o,"resting"),dragging:Tl(o,"dragging"),dropAnimating:Tl(o,"dropAnimating"),userCancel:Tl(o,"userCancel")}},Wn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?M.useLayoutEffect:M.useEffect,km=function(){var e=document.querySelector("head");return e||ae(),e},YE=function(e){var r=document.createElement("style");return e&&r.setAttribute("nonce",e),r.type="text/css",r};function $H(t,e){var r=ze(function(){return zH(t)},[t]),i=M.useRef(null),s=M.useRef(null),a=_e(Bt(function(f){var p=s.current;p||ae(),p.textContent=f}),[]),o=_e(function(f){var p=i.current;p||ae(),p.textContent=f},[]);Wn(function(){!i.current&&!s.current||ae();var f=YE(e),p=YE(e);return i.current=f,s.current=p,f.setAttribute(Ao+"-always",t),p.setAttribute(Ao+"-dynamic",t),km().appendChild(f),km().appendChild(p),o(r.always),a(r.resting),function(){var g=function(A){var P=A.current;P||ae(),km().removeChild(P),A.current=null};g(i),g(s)}},[e,o,a,r.always,r.resting,t]);var l=_e(function(){return a(r.dragging)},[a,r.dragging]),u=_e(function(f){if(f==="DROP"){a(r.dropAnimating);return}a(r.userCancel)},[a,r.dropAnimating,r.userCancel]),d=_e(function(){s.current&&a(r.resting)},[a,r.resting]),h=ze(function(){return{dragging:l,dropping:u,resting:d}},[l,u,d]);return h}var sP=function(t){return t&&t.ownerDocument?t.ownerDocument.defaultView:window};function op(t){return t instanceof sP(t).HTMLElement}function HH(t,e){var r="["+Po.contextId+'="'+t+'"]',i=kA(document.querySelectorAll(r));if(!i.length)return null;var s=Is(i,function(a){return a.getAttribute(Po.draggableId)===e});return!s||!op(s)?null:s}function WH(t){var e=M.useRef({}),r=M.useRef(null),i=M.useRef(null),s=M.useRef(!1),a=_e(function(p,g){var _={id:p,focus:g};return e.current[p]=_,function(){var P=e.current,S=P[p];S!==_&&delete P[p]}},[]),o=_e(function(p){var g=HH(t,p);g&&g!==document.activeElement&&g.focus()},[t]),l=_e(function(p,g){r.current===p&&(r.current=g)},[]),u=_e(function(){i.current||s.current&&(i.current=requestAnimationFrame(function(){i.current=null;var p=r.current;p&&o(p)}))},[o]),d=_e(function(p){r.current=null;var g=document.activeElement;g&&g.getAttribute(Po.draggableId)===p&&(r.current=p)},[]);Wn(function(){return s.current=!0,function(){s.current=!1;var p=i.current;p&&cancelAnimationFrame(p)}},[]);var h=ze(function(){return{register:a,tryRecordFocus:d,tryRestoreFocusRecorded:u,tryShiftRecord:l}},[a,d,u,l]);return h}function qH(){var t={draggables:{},droppables:{}},e=[];function r(f){return e.push(f),function(){var g=e.indexOf(f);g!==-1&&e.splice(g,1)}}function i(f){e.length&&e.forEach(function(p){return p(f)})}function s(f){return t.draggables[f]||null}function a(f){var p=s(f);return p||ae(),p}var o={register:function(p){t.draggables[p.descriptor.id]=p,i({type:"ADDITION",value:p})},update:function(p,g){var _=t.draggables[g.descriptor.id];_&&_.uniqueId===p.uniqueId&&(delete t.draggables[g.descriptor.id],t.draggables[p.descriptor.id]=p)},unregister:function(p){var g=p.descriptor.id,_=s(g);_&&p.uniqueId===_.uniqueId&&(delete t.draggables[g],i({type:"REMOVAL",value:p}))},getById:a,findById:s,exists:function(p){return!!s(p)},getAllByType:function(p){return Wh(t.draggables).filter(function(g){return g.descriptor.type===p})}};function l(f){return t.droppables[f]||null}function u(f){var p=l(f);return p||ae(),p}var d={register:function(p){t.droppables[p.descriptor.id]=p},unregister:function(p){var g=l(p.descriptor.id);g&&p.uniqueId===g.uniqueId&&delete t.droppables[p.descriptor.id]},getById:u,findById:l,exists:function(p){return!!l(p)},getAllByType:function(p){return Wh(t.droppables).filter(function(g){return g.descriptor.type===p})}};function h(){t.draggables={},t.droppables={},e.length=0}return{draggable:o,droppable:d,subscribe:r,clean:h}}function GH(){var t=ze(qH,[]);return M.useEffect(function(){return function(){requestAnimationFrame(t.clean)}},[t]),t}var H_=Pe.createContext(null),Gh=function(){var t=document.body;return t||ae(),t},KH={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},YH=function(e){return"rbd-announcement-"+e};function XH(t){var e=ze(function(){return YH(t)},[t]),r=M.useRef(null);M.useEffect(function(){var a=document.createElement("div");return r.current=a,a.id=e,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),xe(a.style,KH),Gh().appendChild(a),function(){setTimeout(function(){var u=Gh();u.contains(a)&&u.removeChild(a),a===r.current&&(r.current=null)})}},[e]);var i=_e(function(s){var a=r.current;if(a){a.textContent=s;return}},[]);return i}var QH=0,JH={separator:"::"};function W_(t,e){return e===void 0&&(e=JH),ze(function(){return""+t+e.separator+QH++},[e.separator,t])}function ZH(t){var e=t.contextId,r=t.uniqueId;return"rbd-hidden-text-"+e+"-"+r}function eW(t){var e=t.contextId,r=t.text,i=W_("hidden-text",{separator:"-"}),s=ze(function(){return ZH({contextId:e,uniqueId:i})},[i,e]);return M.useEffect(function(){var o=document.createElement("div");return o.id=s,o.textContent=r,o.style.display="none",Gh().appendChild(o),function(){var u=Gh();u.contains(o)&&u.removeChild(o)}},[s,r]),s}var lp=Pe.createContext(null);function aP(t){var e=M.useRef(t);return M.useEffect(function(){e.current=t}),e}function tW(){var t=null;function e(){return!!t}function r(o){return o===t}function i(o){t&&ae();var l={abandon:o};return t=l,l}function s(){t||ae(),t=null}function a(){t&&(t.abandon(),s())}return{isClaimed:e,isActive:r,claim:i,release:s,tryAbandon:a}}var nW=9,rW=13,q_=27,oP=32,iW=33,sW=34,aW=35,oW=36,lW=37,uW=38,cW=39,dW=40,hd,hW=(hd={},hd[rW]=!0,hd[nW]=!0,hd),lP=function(t){hW[t.keyCode]&&t.preventDefault()},up=function(){var t="visibilitychange";if(typeof document>"u")return t;var e=[t,"ms"+t,"webkit"+t,"moz"+t,"o"+t],r=Is(e,function(i){return"on"+i in document});return r||t}(),uP=0,XE=5;function fW(t,e){return Math.abs(e.x-t.x)>=XE||Math.abs(e.y-t.y)>=XE}var QE={type:"IDLE"};function pW(t){var e=t.cancel,r=t.completed,i=t.getPhase,s=t.setPhase;return[{eventName:"mousemove",fn:function(o){var l=o.button,u=o.clientX,d=o.clientY;if(l===uP){var h={x:u,y:d},f=i();if(f.type==="DRAGGING"){o.preventDefault(),f.actions.move(h);return}f.type!=="PENDING"&&ae();var p=f.point;if(fW(p,h)){o.preventDefault();var g=f.actions.fluidLift(h);s({type:"DRAGGING",actions:g})}}}},{eventName:"mouseup",fn:function(o){var l=i();if(l.type!=="DRAGGING"){e();return}o.preventDefault(),l.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"mousedown",fn:function(o){i().type==="DRAGGING"&&o.preventDefault(),e()}},{eventName:"keydown",fn:function(o){var l=i();if(l.type==="PENDING"){e();return}if(o.keyCode===q_){o.preventDefault(),e();return}lP(o)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:function(){i().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:function(o){var l=i();if(l.type==="IDLE"&&ae(),l.actions.shouldRespectForcePress()){e();return}o.preventDefault()}},{eventName:up,fn:e}]}function mW(t){var e=M.useRef(QE),r=M.useRef(as),i=ze(function(){return{eventName:"mousedown",fn:function(f){if(!f.defaultPrevented&&f.button===uP&&!(f.ctrlKey||f.metaKey||f.shiftKey||f.altKey)){var p=t.findClosestDraggableId(f);if(p){var g=t.tryGetLock(p,o,{sourceEvent:f});if(g){f.preventDefault();var _={x:f.clientX,y:f.clientY};r.current(),d(g,_)}}}}}},[t]),s=ze(function(){return{eventName:"webkitmouseforcewillbegin",fn:function(f){if(!f.defaultPrevented){var p=t.findClosestDraggableId(f);if(p){var g=t.findOptionsForDraggable(p);g&&(g.shouldRespectForcePress||t.canGetLock(p)&&f.preventDefault())}}}}},[t]),a=_e(function(){var f={passive:!1,capture:!0};r.current=rr(window,[s,i],f)},[s,i]),o=_e(function(){var h=e.current;h.type!=="IDLE"&&(e.current=QE,r.current(),a())},[a]),l=_e(function(){var h=e.current;o(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[o]),u=_e(function(){var f={capture:!0,passive:!1},p=pW({cancel:l,completed:o,getPhase:function(){return e.current},setPhase:function(_){e.current=_}});r.current=rr(window,p,f)},[l,o]),d=_e(function(f,p){e.current.type!=="IDLE"&&ae(),e.current={type:"PENDING",point:p,actions:f},u()},[u]);Wn(function(){return a(),function(){r.current()}},[a])}var Ra;function gW(){}var vW=(Ra={},Ra[sW]=!0,Ra[iW]=!0,Ra[oW]=!0,Ra[aW]=!0,Ra);function yW(t,e){function r(){e(),t.cancel()}function i(){e(),t.drop()}return[{eventName:"keydown",fn:function(a){if(a.keyCode===q_){a.preventDefault(),r();return}if(a.keyCode===oP){a.preventDefault(),i();return}if(a.keyCode===dW){a.preventDefault(),t.moveDown();return}if(a.keyCode===uW){a.preventDefault(),t.moveUp();return}if(a.keyCode===cW){a.preventDefault(),t.moveRight();return}if(a.keyCode===lW){a.preventDefault(),t.moveLeft();return}if(vW[a.keyCode]){a.preventDefault();return}lP(a)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:up,fn:r}]}function _W(t){var e=M.useRef(gW),r=ze(function(){return{eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==oP)return;var o=t.findClosestDraggableId(a);if(!o)return;var l=t.tryGetLock(o,h,{sourceEvent:a});if(!l)return;a.preventDefault();var u=!0,d=l.snapLift();e.current();function h(){u||ae(),u=!1,e.current(),i()}e.current=rr(window,yW(d,h),{capture:!0,passive:!1})}}},[t]),i=_e(function(){var a={passive:!1,capture:!0};e.current=rr(window,[r],a)},[r]);Wn(function(){return i(),function(){e.current()}},[i])}var Cm={type:"IDLE"},wW=120,bW=.15;function xW(t){var e=t.cancel,r=t.getPhase;return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:function(s){s.preventDefault()}},{eventName:"keydown",fn:function(s){if(r().type!=="DRAGGING"){e();return}s.keyCode===q_&&s.preventDefault(),e()}},{eventName:up,fn:e}]}function EW(t){var e=t.cancel,r=t.completed,i=t.getPhase;return[{eventName:"touchmove",options:{capture:!1},fn:function(a){var o=i();if(o.type!=="DRAGGING"){e();return}o.hasMoved=!0;var l=a.touches[0],u=l.clientX,d=l.clientY,h={x:u,y:d};a.preventDefault(),o.actions.move(h)}},{eventName:"touchend",fn:function(a){var o=i();if(o.type!=="DRAGGING"){e();return}a.preventDefault(),o.actions.drop({shouldBlockNextClick:!0}),r()}},{eventName:"touchcancel",fn:function(a){if(i().type!=="DRAGGING"){e();return}a.preventDefault(),e()}},{eventName:"touchforcechange",fn:function(a){var o=i();o.type==="IDLE"&&ae();var l=a.touches[0];if(l){var u=l.force>=bW;if(u){var d=o.actions.shouldRespectForcePress();if(o.type==="PENDING"){d&&e();return}if(d){if(o.hasMoved){a.preventDefault();return}e();return}a.preventDefault()}}}},{eventName:up,fn:e}]}function TW(t){var e=M.useRef(Cm),r=M.useRef(as),i=_e(function(){return e.current},[]),s=_e(function(g){e.current=g},[]),a=ze(function(){return{eventName:"touchstart",fn:function(g){if(!g.defaultPrevented){var _=t.findClosestDraggableId(g);if(_){var A=t.tryGetLock(_,l,{sourceEvent:g});if(A){var P=g.touches[0],S=P.clientX,w=P.clientY,x={x:S,y:w};r.current(),f(A,x)}}}}}},[t]),o=_e(function(){var g={capture:!0,passive:!1};r.current=rr(window,[a],g)},[a]),l=_e(function(){var p=e.current;p.type!=="IDLE"&&(p.type==="PENDING"&&clearTimeout(p.longPressTimerId),s(Cm),r.current(),o())},[o,s]),u=_e(function(){var p=e.current;l(),p.type==="DRAGGING"&&p.actions.cancel({shouldBlockNextClick:!0}),p.type==="PENDING"&&p.actions.abort()},[l]),d=_e(function(){var g={capture:!0,passive:!1},_={cancel:u,completed:l,getPhase:i},A=rr(window,EW(_),g),P=rr(window,xW(_),g);r.current=function(){A(),P()}},[u,i,l]),h=_e(function(){var g=i();g.type!=="PENDING"&&ae();var _=g.actions.fluidLift(g.point);s({type:"DRAGGING",actions:_,hasMoved:!1})},[i,s]),f=_e(function(g,_){i().type!=="IDLE"&&ae();var A=setTimeout(h,wW);s({type:"PENDING",point:_,actions:g,longPressTimerId:A}),d()},[d,i,s,h]);Wn(function(){return o(),function(){r.current();var _=i();_.type==="PENDING"&&(clearTimeout(_.longPressTimerId),s(Cm))}},[i,o,s]),Wn(function(){var g=rr(window,[{eventName:"touchmove",fn:function(){},options:{capture:!1,passive:!1}}]);return g},[])}var SW={input:!0,button:!0,textarea:!0,select:!0,option:!0,optgroup:!0,video:!0,audio:!0};function cP(t,e){if(e==null)return!1;var r=!!SW[e.tagName.toLowerCase()];if(r)return!0;var i=e.getAttribute("contenteditable");return i==="true"||i===""?!0:e===t?!1:cP(t,e.parentElement)}function IW(t,e){var r=e.target;return op(r)?cP(t,r):!1}var kW=function(t){return Er(t.getBoundingClientRect()).center};function CW(t){return t instanceof sP(t).Element}var AW=function(){var t="matches";if(typeof document>"u")return t;var e=[t,"msMatchesSelector","webkitMatchesSelector"],r=Is(e,function(i){return i in Element.prototype});return r||t}();function dP(t,e){return t==null?null:t[AW](e)?t:dP(t.parentElement,e)}function PW(t,e){return t.closest?t.closest(e):dP(t,e)}function RW(t){return"["+Po.contextId+'="'+t+'"]'}function DW(t,e){var r=e.target;if(!CW(r))return null;var i=RW(t),s=PW(r,i);return!s||!op(s)?null:s}function NW(t,e){var r=DW(t,e);return r?r.getAttribute(Po.draggableId):null}function MW(t,e){var r="["+_v.contextId+'="'+t+'"]',i=kA(document.querySelectorAll(r)),s=Is(i,function(a){return a.getAttribute(_v.id)===e});return!s||!op(s)?null:s}function LW(t){t.preventDefault()}function fd(t){var e=t.expected,r=t.phase,i=t.isLockActive;return t.shouldWarn,!(!i()||e!==r)}function hP(t){var e=t.lockAPI,r=t.store,i=t.registry,s=t.draggableId;if(e.isClaimed())return!1;var a=i.draggable.findById(s);return!(!a||!a.options.isEnabled||!tP(r.getState(),s))}function OW(t){var e=t.lockAPI,r=t.contextId,i=t.store,s=t.registry,a=t.draggableId,o=t.forceSensorStop,l=t.sourceEvent,u=hP({lockAPI:e,store:i,registry:s,draggableId:a});if(!u)return null;var d=s.draggable.getById(a),h=MW(r,d.descriptor.id);if(!h||l&&!d.options.canDragInteractiveElements&&IW(h,l))return null;var f=e.claim(o||as),p="PRE_DRAG";function g(){return d.options.shouldRespectForcePress}function _(){return e.isActive(f)}function A(V,N){fd({expected:V,phase:p,isLockActive:_,shouldWarn:!0})&&i.dispatch(N())}var P=A.bind(null,"DRAGGING");function S(V){function N(){e.release(),p="COMPLETED"}p!=="PRE_DRAG"&&(N(),p!=="PRE_DRAG"&&ae()),i.dispatch(A9(V.liftActionArgs)),p="DRAGGING";function I(y,b){if(b===void 0&&(b={shouldBlockNextClick:!1}),V.cleanup(),b.shouldBlockNextClick){var T=rr(window,[{eventName:"click",fn:LW,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(T)}N(),i.dispatch(KA({reason:y}))}return xe({isActive:function(){return fd({expected:"DRAGGING",phase:p,isLockActive:_,shouldWarn:!1})},shouldRespectForcePress:g,drop:function(b){return I("DROP",b)},cancel:function(b){return I("CANCEL",b)}},V.actions)}function w(V){var N=Nu(function(y){P(function(){return GA({client:y})})}),I=S({liftActionArgs:{id:a,clientSelection:V,movementMode:"FLUID"},cleanup:function(){return N.cancel()},actions:{move:N}});return xe({},I,{move:N})}function x(){var V={moveUp:function(){return P(V9)},moveRight:function(){return P(U9)},moveDown:function(){return P(F9)},moveLeft:function(){return P(B9)}};return S({liftActionArgs:{id:a,clientSelection:kW(h),movementMode:"SNAP"},cleanup:as,actions:V})}function R(){var V=fd({expected:"PRE_DRAG",phase:p,isLockActive:_,shouldWarn:!0});V&&e.release()}var F={isActive:function(){return fd({expected:"PRE_DRAG",phase:p,isLockActive:_,shouldWarn:!1})},shouldRespectForcePress:g,fluidLift:w,snapLift:x,abort:R};return F}var jW=[mW,_W,TW];function VW(t){var e=t.contextId,r=t.store,i=t.registry,s=t.customSensors,a=t.enableDefaultSensors,o=[].concat(a?jW:[],s||[]),l=M.useState(function(){return tW()})[0],u=_e(function(w,x){w.isDragging&&!x.isDragging&&l.tryAbandon()},[l]);Wn(function(){var w=r.getState(),x=r.subscribe(function(){var R=r.getState();u(w,R),w=R});return x},[l,r,u]),Wn(function(){return l.tryAbandon},[l.tryAbandon]);for(var d=_e(function(S){return hP({lockAPI:l,registry:i,store:r,draggableId:S})},[l,i,r]),h=_e(function(S,w,x){return OW({lockAPI:l,registry:i,contextId:e,store:r,draggableId:S,forceSensorStop:w,sourceEvent:x&&x.sourceEvent?x.sourceEvent:null})},[e,l,i,r]),f=_e(function(S){return NW(e,S)},[e]),p=_e(function(S){var w=i.draggable.findById(S);return w?w.options:null},[i.draggable]),g=_e(function(){l.isClaimed()&&(l.tryAbandon(),r.getState().phase!=="IDLE"&&r.dispatch(O_()))},[l,r]),_=_e(l.isClaimed,[l]),A=ze(function(){return{canGetLock:d,tryGetLock:h,findClosestDraggableId:f,findOptionsForDraggable:p,tryReleaseLock:g,isLockClaimed:_}},[d,h,f,p,g,_]),P=0;P<o.length;P++)o[P](A)}var FW=function(e){return{onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}};function Sl(t){return t.current||ae(),t.current}function UW(t){var e=t.contextId,r=t.setCallbacks,i=t.sensors,s=t.nonce,a=t.dragHandleUsageInstructions,o=M.useRef(null),l=aP(t),u=_e(function(){return FW(l.current)},[l]),d=XH(e),h=eW({contextId:e,text:a}),f=$H(e,s),p=_e(function(y){Sl(o).dispatch(y)},[]),g=ze(function(){return wE({publishWhileDragging:R9,updateDroppableScroll:N9,updateDroppableIsEnabled:M9,updateDroppableIsCombineEnabled:L9,collectionStarting:D9},p)},[p]),_=GH(),A=ze(function(){return bH(_,g)},[_,g]),P=ze(function(){return VH(xe({scrollWindow:xH,scrollDroppable:A.scrollDroppable},wE({move:GA},p)))},[A.scrollDroppable,p]),S=WH(e),w=ze(function(){return vH({announce:d,autoScroller:P,dimensionMarshal:A,focusMarshal:S,getResponders:u,styleMarshal:f})},[d,P,A,S,u,f]);o.current=w;var x=_e(function(){var y=Sl(o),b=y.getState();b.phase!=="IDLE"&&y.dispatch(O_())},[]),R=_e(function(){var y=Sl(o).getState();return y.isDragging||y.phase==="DROP_ANIMATING"},[]),F=ze(function(){return{isDragging:R,tryAbort:x}},[R,x]);r(F);var V=_e(function(y){return tP(Sl(o).getState(),y)},[]),N=_e(function(){return $s(Sl(o).getState())},[]),I=ze(function(){return{marshal:A,focus:S,contextId:e,canLift:V,isMovementAllowed:N,dragHandleUsageInstructionsId:h,registry:_}},[e,A,h,S,V,N,_]);return VW({contextId:e,store:w,registry:_,customSensors:i,enableDefaultSensors:t.enableDefaultSensors!==!1}),M.useEffect(function(){return x},[x]),Pe.createElement(lp.Provider,{value:I},Pe.createElement(lz,{context:H_,store:w},t.children))}var BW=0;function zW(){return ze(function(){return""+BW++},[])}function $W(t){var e=zW(),r=t.dragHandleUsageInstructions||zd.dragHandleUsageInstructions;return Pe.createElement(_$,null,function(i){return Pe.createElement(UW,{nonce:t.nonce,contextId:e,setCallbacks:i,dragHandleUsageInstructions:r,enableDefaultSensors:t.enableDefaultSensors,sensors:t.sensors,onBeforeCapture:t.onBeforeCapture,onBeforeDragStart:t.onBeforeDragStart,onDragStart:t.onDragStart,onDragUpdate:t.onDragUpdate,onDragEnd:t.onDragEnd},t.children)})}var fP=function(e){return function(r){return e===r}},HW=fP("scroll"),WW=fP("auto"),JE=function(e,r){return r(e.overflowX)||r(e.overflowY)},qW=function(e){var r=window.getComputedStyle(e),i={overflowX:r.overflowX,overflowY:r.overflowY};return JE(i,HW)||JE(i,WW)},GW=function(){return!1},KW=function t(e){return e==null?null:e===document.body?GW()?e:null:e===document.documentElement?null:qW(e)?e:t(e.parentElement)},wv=function(t){return{x:t.scrollLeft,y:t.scrollTop}},YW=function t(e){if(!e)return!1;var r=window.getComputedStyle(e);return r.position==="fixed"?!0:t(e.parentElement)},XW=function(t){var e=KW(t),r=YW(t);return{closestScrollable:e,isFixedOnPage:r}},QW=function(t){var e=t.descriptor,r=t.isEnabled,i=t.isCombineEnabled,s=t.isFixedOnPage,a=t.direction,o=t.client,l=t.page,u=t.closest,d=function(){if(!u)return null;var g=u.scrollSize,_=u.client,A=JA({scrollHeight:g.scrollHeight,scrollWidth:g.scrollWidth,height:_.paddingBox.height,width:_.paddingBox.width});return{pageMarginBox:u.page.marginBox,frameClient:_,scrollSize:g,shouldClipSubject:u.shouldClipSubject,scroll:{initial:u.scroll,current:u.scroll,max:A,diff:{value:zt,displacement:zt}}}}(),h=a==="vertical"?R_:DA,f=Co({page:l,withPlaceholder:null,axis:h,frame:d}),p={descriptor:e,isCombineEnabled:i,isFixedOnPage:s,axis:h,isEnabled:r,client:o,page:l,frame:d,subject:f};return p},JW=function(e,r){var i=xA(e);if(!r||e!==r)return i;var s=i.paddingBox.top-r.scrollTop,a=i.paddingBox.left-r.scrollLeft,o=s+r.scrollHeight,l=a+r.scrollWidth,u={top:s,right:l,bottom:o,left:a},d=I_(u,i.border),h=k_({borderBox:d,margin:i.margin,border:i.border,padding:i.padding});return h},ZW=function(t){var e=t.ref,r=t.descriptor,i=t.env,s=t.windowScroll,a=t.direction,o=t.isDropDisabled,l=t.isCombineEnabled,u=t.shouldClipSubject,d=i.closestScrollable,h=JW(e,d),f=zh(h,s),p=function(){if(!d)return null;var _=xA(d),A={scrollHeight:d.scrollHeight,scrollWidth:d.scrollWidth};return{client:_,page:zh(_,s),scroll:wv(d),scrollSize:A,shouldClipSubject:u}}(),g=QW({descriptor:r,isEnabled:!o,isCombineEnabled:l,isFixedOnPage:i.isFixedOnPage,direction:a,client:h,page:f,closest:p});return g},e8={passive:!1},t8={passive:!0},ZE=function(t){return t.shouldPublishImmediately?e8:t8};function Kh(t){var e=M.useContext(t);return e||ae(),e}var pd=function(e){return e&&e.env.closestScrollable||null};function n8(t){var e=M.useRef(null),r=Kh(lp),i=W_("droppable"),s=r.registry,a=r.marshal,o=aP(t),l=ze(function(){return{id:t.droppableId,type:t.type,mode:t.mode}},[t.droppableId,t.mode,t.type]),u=M.useRef(l),d=ze(function(){return Bt(function(R,F){e.current||ae();var V={x:R,y:F};a.updateDroppableScroll(l.id,V)})},[l.id,a]),h=_e(function(){var R=e.current;return!R||!R.env.closestScrollable?zt:wv(R.env.closestScrollable)},[]),f=_e(function(){var R=h();d(R.x,R.y)},[h,d]),p=ze(function(){return Nu(f)},[f]),g=_e(function(){var R=e.current,F=pd(R);R&&F||ae();var V=R.scrollOptions;if(V.shouldPublishImmediately){f();return}p()},[p,f]),_=_e(function(R,F){e.current&&ae();var V=o.current,N=V.getDroppableRef();N||ae();var I=XW(N),y={ref:N,descriptor:l,env:I,scrollOptions:F};e.current=y;var b=ZW({ref:N,descriptor:l,env:I,windowScroll:R,direction:V.direction,isDropDisabled:V.isDropDisabled,isCombineEnabled:V.isCombineEnabled,shouldClipSubject:!V.ignoreContainerClipping}),T=I.closestScrollable;return T&&(T.setAttribute(KE.contextId,r.contextId),T.addEventListener("scroll",g,ZE(y.scrollOptions))),b},[r.contextId,l,g,o]),A=_e(function(){var R=e.current,F=pd(R);return R&&F||ae(),wv(F)},[]),P=_e(function(){var R=e.current;R||ae();var F=pd(R);e.current=null,F&&(p.cancel(),F.removeAttribute(KE.contextId),F.removeEventListener("scroll",g,ZE(R.scrollOptions)))},[g,p]),S=_e(function(R){var F=e.current;F||ae();var V=pd(F);V||ae(),V.scrollTop+=R.y,V.scrollLeft+=R.x},[]),w=ze(function(){return{getDimensionAndWatchScroll:_,getScrollWhileDragging:A,dragStopped:P,scroll:S}},[P,_,A,S]),x=ze(function(){return{uniqueId:i,descriptor:l,callbacks:w}},[w,l,i]);Wn(function(){return u.current=x.descriptor,s.droppable.register(x),function(){e.current&&P(),s.droppable.unregister(x)}},[w,l,P,x,a,s.droppable]),Wn(function(){e.current&&a.updateDroppableIsEnabled(u.current.id,!t.isDropDisabled)},[t.isDropDisabled,a]),Wn(function(){e.current&&a.updateDroppableIsCombineEnabled(u.current.id,t.isCombineEnabled)},[t.isCombineEnabled,a])}function Am(){}var eT={width:0,height:0,margin:S$},r8=function(e){var r=e.isAnimatingOpenOnMount,i=e.placeholder,s=e.animate;return r||s==="close"?eT:{height:i.client.borderBox.height,width:i.client.borderBox.width,margin:i.client.margin}},i8=function(e){var r=e.isAnimatingOpenOnMount,i=e.placeholder,s=e.animate,a=r8({isAnimatingOpenOnMount:r,placeholder:i,animate:s});return{display:i.display,boxSizing:"border-box",width:a.width,height:a.height,marginTop:a.margin.top,marginRight:a.margin.right,marginBottom:a.margin.bottom,marginLeft:a.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:s!=="none"?tu.placeholder:null}};function s8(t){var e=M.useRef(null),r=_e(function(){e.current&&(clearTimeout(e.current),e.current=null)},[]),i=t.animate,s=t.onTransitionEnd,a=t.onClose,o=t.contextId,l=M.useState(t.animate==="open"),u=l[0],d=l[1];M.useEffect(function(){return u?i!=="open"?(r(),d(!1),Am):e.current?Am:(e.current=setTimeout(function(){e.current=null,d(!1)}),r):Am},[i,u,r]);var h=_e(function(p){p.propertyName==="height"&&(s(),i==="close"&&a())},[i,a,s]),f=i8({isAnimatingOpenOnMount:u,animate:t.animate,placeholder:t.placeholder});return Pe.createElement(t.placeholder.tagName,{style:f,"data-rbd-placeholder-context-id":o,onTransitionEnd:h,ref:t.innerRef})}var a8=Pe.memo(s8),G_=Pe.createContext(null),o8=function(t){tA(e,t);function e(){for(var i,s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];return i=t.call.apply(t,[this].concat(a))||this,i.state={isVisible:!!i.props.on,data:i.props.on,animate:i.props.shouldAnimate&&i.props.on?"open":"none"},i.onClose=function(){i.state.animate==="close"&&i.setState({isVisible:!1})},i}e.getDerivedStateFromProps=function(s,a){return s.shouldAnimate?s.on?{isVisible:!0,data:s.on,animate:"open"}:a.isVisible?{isVisible:!0,data:a.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!s.on,data:s.on,animate:"none"}};var r=e.prototype;return r.render=function(){if(!this.state.isVisible)return null;var s={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(s)},e}(Pe.PureComponent),tT={dragging:5e3,dropAnimating:4500},l8=function(e,r){return r?tu.drop(r.duration):e?tu.snap:tu.fluid},u8=function(e,r){return e?r?ju.opacity.drop:ju.opacity.combining:null},c8=function(e){return e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP"};function d8(t){var e=t.dimension,r=e.client,i=t.offset,s=t.combineWith,a=t.dropping,o=!!s,l=c8(t),u=!!a,d=u?vv.drop(i,o):vv.moveTo(i),h={position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:l8(l,a),transform:d,opacity:u8(o,u),zIndex:u?tT.dropAnimating:tT.dragging,pointerEvents:"none"};return h}function h8(t){return{transform:vv.moveTo(t.offset),transition:t.shouldAnimateDisplacement?null:"none"}}function f8(t){return t.type==="DRAGGING"?d8(t):h8(t)}function p8(t,e,r){r===void 0&&(r=zt);var i=window.getComputedStyle(e),s=e.getBoundingClientRect(),a=bA(s,i),o=zh(a,r),l={client:a,tagName:e.tagName.toLowerCase(),display:i.display},u={x:a.marginBox.width,y:a.marginBox.height},d={descriptor:t,placeholder:l,displaceBy:u,client:a,page:o};return d}function m8(t){var e=W_("draggable"),r=t.descriptor,i=t.registry,s=t.getDraggableRef,a=t.canDragInteractiveElements,o=t.shouldRespectForcePress,l=t.isEnabled,u=ze(function(){return{canDragInteractiveElements:a,shouldRespectForcePress:o,isEnabled:l}},[a,l,o]),d=_e(function(g){var _=s();return _||ae(),p8(r,_,g)},[r,s]),h=ze(function(){return{uniqueId:e,descriptor:r,options:u,getDimension:d}},[r,d,u,e]),f=M.useRef(h),p=M.useRef(!0);Wn(function(){return i.draggable.register(f.current),function(){return i.draggable.unregister(f.current)}},[i.draggable]),Wn(function(){if(p.current){p.current=!1;return}var g=f.current;f.current=h,i.draggable.update(h,g)},[h,i.draggable])}function g8(t){t.preventDefault()}function v8(t){var e=M.useRef(null),r=_e(function(y){e.current=y},[]),i=_e(function(){return e.current},[]),s=Kh(lp),a=s.contextId,o=s.dragHandleUsageInstructionsId,l=s.registry,u=Kh(G_),d=u.type,h=u.droppableId,f=ze(function(){return{id:t.draggableId,index:t.index,type:d,droppableId:h}},[t.draggableId,t.index,d,h]),p=t.children,g=t.draggableId,_=t.isEnabled,A=t.shouldRespectForcePress,P=t.canDragInteractiveElements,S=t.isClone,w=t.mapped,x=t.dropAnimationFinished;if(!S){var R=ze(function(){return{descriptor:f,registry:l,getDraggableRef:i,canDragInteractiveElements:P,shouldRespectForcePress:A,isEnabled:_}},[f,l,i,P,A,_]);m8(R)}var F=ze(function(){return _?{tabIndex:0,role:"button","aria-describedby":o,"data-rbd-drag-handle-draggable-id":g,"data-rbd-drag-handle-context-id":a,draggable:!1,onDragStart:g8}:null},[a,o,g,_]),V=_e(function(y){w.type==="DRAGGING"&&w.dropping&&y.propertyName==="transform"&&x()},[x,w]),N=ze(function(){var y=f8(w),b=w.type==="DRAGGING"&&w.dropping?V:null,T={innerRef:r,draggableProps:{"data-rbd-draggable-context-id":a,"data-rbd-draggable-id":g,style:y,onTransitionEnd:b},dragHandleProps:F};return T},[a,F,g,w,V,r]),I=ze(function(){return{draggableId:f.id,type:f.type,source:{index:f.index,droppableId:f.droppableId}}},[f.droppableId,f.id,f.index,f.type]);return p(N,w.snapshot,I)}var pP=function(t,e){return t===e},mP=function(t){var e=t.combine,r=t.destination;return r?r.droppableId:e?e.droppableId:null},y8=function(e){return e.combine?e.combine.draggableId:null},_8=function(e){return e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null};function w8(){var t=Bt(function(s,a){return{x:s,y:a}}),e=Bt(function(s,a,o,l,u){return{isDragging:!0,isClone:a,isDropAnimating:!!u,dropAnimation:u,mode:s,draggingOver:o,combineWith:l,combineTargetFor:null}}),r=Bt(function(s,a,o,l,u,d,h){return{mapped:{type:"DRAGGING",dropping:null,draggingOver:u,combineWith:d,mode:a,offset:s,dimension:o,forceShouldAnimate:h,snapshot:e(a,l,u,d,null)}}}),i=function(a,o){if(a.isDragging){if(a.critical.draggable.id!==o.draggableId)return null;var l=a.current.client.offset,u=a.dimensions.draggables[o.draggableId],d=Hn(a.impact),h=_8(a.impact),f=a.forceShouldAnimate;return r(t(l.x,l.y),a.movementMode,u,o.isClone,d,h,f)}if(a.phase==="DROP_ANIMATING"){var p=a.completed;if(p.result.draggableId!==o.draggableId)return null;var g=o.isClone,_=a.dimensions.draggables[o.draggableId],A=p.result,P=A.mode,S=mP(A),w=y8(A),x=a.dropDuration,R={duration:x,curve:V_.drop,moveTo:a.newHomeClientOffset,opacity:w?ju.opacity.drop:null,scale:w?ju.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:_,dropping:R,draggingOver:S,combineWith:w,mode:P,forceShouldAnimate:null,snapshot:e(P,g,S,w,R)}}}return null};return i}function gP(t){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:t,combineWith:null}}var b8={mapped:{type:"SECONDARY",offset:zt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:gP(null)}};function x8(){var t=Bt(function(o,l){return{x:o,y:l}}),e=Bt(gP),r=Bt(function(o,l,u){return l===void 0&&(l=null),{mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:u,snapshot:e(l)}}}),i=function(l){return l?r(zt,l,!0):null},s=function(l,u,d,h){var f=d.displaced.visible[l],p=!!(h.inVirtualList&&h.effected[l]),g=ip(d),_=g&&g.draggableId===l?u:null;if(!f){if(!p)return i(_);if(d.displaced.invisible[l])return null;var A=qo(h.displacedBy.point),P=t(A.x,A.y);return r(P,_,!0)}if(p)return i(_);var S=d.displacedBy.point,w=t(S.x,S.y);return r(w,_,f.shouldAnimate)},a=function(l,u){if(l.isDragging)return l.critical.draggable.id===u.draggableId?null:s(u.draggableId,l.critical.draggable.id,l.impact,l.afterCritical);if(l.phase==="DROP_ANIMATING"){var d=l.completed;return d.result.draggableId===u.draggableId?null:s(u.draggableId,d.result.draggableId,d.impact,d.afterCritical)}return null};return a}var E8=function(){var e=w8(),r=x8(),i=function(a,o){return e(a,o)||r(a,o)||b8};return i},T8={dropAnimationFinished:YA},S8=_A(E8,T8,null,{context:H_,pure:!0,areStatePropsEqual:pP})(v8);function vP(t){var e=Kh(G_),r=e.isUsingCloneFor;return r===t.draggableId&&!t.isClone?null:Pe.createElement(S8,t)}function I8(t){var e=typeof t.isDragDisabled=="boolean"?!t.isDragDisabled:!0,r=!!t.disableInteractiveElementBlocking,i=!!t.shouldRespectForcePress;return Pe.createElement(vP,xe({},t,{isClone:!1,isEnabled:e,canDragInteractiveElements:r,shouldRespectForcePress:i}))}function k8(t){var e=M.useContext(lp);e||ae();var r=e.contextId,i=e.isMovementAllowed,s=M.useRef(null),a=M.useRef(null),o=t.children,l=t.droppableId,u=t.type,d=t.mode,h=t.direction,f=t.ignoreContainerClipping,p=t.isDropDisabled,g=t.isCombineEnabled,_=t.snapshot,A=t.useClone,P=t.updateViewportMaxScroll,S=t.getContainerForClone,w=_e(function(){return s.current},[]),x=_e(function(T){s.current=T},[]);_e(function(){return a.current},[]);var R=_e(function(T){a.current=T},[]),F=_e(function(){i()&&P({maxScroll:eP()})},[i,P]);n8({droppableId:l,type:u,mode:d,direction:h,isDropDisabled:p,isCombineEnabled:g,ignoreContainerClipping:f,getDroppableRef:w});var V=Pe.createElement(o8,{on:t.placeholder,shouldAnimate:t.shouldAnimatePlaceholder},function(T){var O=T.onClose,D=T.data,K=T.animate;return Pe.createElement(a8,{placeholder:D,onClose:O,innerRef:R,animate:K,contextId:r,onTransitionEnd:F})}),N=ze(function(){return{innerRef:x,placeholder:V,droppableProps:{"data-rbd-droppable-id":l,"data-rbd-droppable-context-id":r}}},[r,l,V,x]),I=A?A.dragging.draggableId:null,y=ze(function(){return{droppableId:l,type:u,isUsingCloneFor:I}},[l,I,u]);function b(){if(!A)return null;var T=A.dragging,O=A.render,D=Pe.createElement(vP,{draggableId:T.draggableId,index:T.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},function(K,ie){return O(K,ie,T)});return lN.createPortal(D,S())}return Pe.createElement(G_.Provider,{value:y},o(N,_),b())}var Pm=function(e,r){return e===r.droppable.type},nT=function(e,r){return r.draggables[e.draggable.id]},C8=function(){var e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},r=xe({},e,{shouldAnimatePlaceholder:!1}),i=Bt(function(o){return{draggableId:o.id,type:o.type,source:{index:o.index,droppableId:o.droppableId}}}),s=Bt(function(o,l,u,d,h,f){var p=h.descriptor.id,g=h.descriptor.droppableId===o;if(g){var _=f?{render:f,dragging:i(h.descriptor)}:null,A={isDraggingOver:u,draggingOverWith:u?p:null,draggingFromThisWith:p,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!1,snapshot:A,useClone:_}}if(!l)return r;if(!d)return e;var P={isDraggingOver:u,draggingOverWith:p,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:h.placeholder,shouldAnimatePlaceholder:!0,snapshot:P,useClone:null}}),a=function(l,u){var d=u.droppableId,h=u.type,f=!u.isDropDisabled,p=u.renderClone;if(l.isDragging){var g=l.critical;if(!Pm(h,g))return r;var _=nT(g,l.dimensions),A=Hn(l.impact)===d;return s(d,f,A,A,_,p)}if(l.phase==="DROP_ANIMATING"){var P=l.completed;if(!Pm(h,P.critical))return r;var S=nT(P.critical,l.dimensions);return s(d,f,mP(P.result)===d,Hn(P.impact)===d,S,p)}if(l.phase==="IDLE"&&l.completed&&!l.shouldFlush){var w=l.completed;if(!Pm(h,w.critical))return r;var x=Hn(w.impact)===d,R=!!(w.impact.at&&w.impact.at.type==="COMBINE"),F=w.critical.droppable.id===d;return x?R?e:r:F?e:r}return r};return a},A8={updateViewportMaxScroll:j9};function P8(){return document.body||ae(),document.body}var R8={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:P8},yP=_A(C8,A8,null,{context:H_,pure:!0,areStatePropsEqual:pP})(k8);yP.defaultProps=R8;function D8(){const[t]=Ty(),[e,r]=M.useState([]),[i,s]=M.useState(0),[a,o]=M.useState(!0),[l,u]=M.useState(null),[d,h]=M.useState(!1),[f,p]=M.useState(!1),[g,_]=M.useState("");M.useRef(null),M.useRef(null),M.useEffect(()=>{const R=t.get("keywords");R&&searchAndBuildPlaylist(R)},[t]);const A=R=>{const F=R==null?void 0:R.match(/embed\/([a-zA-Z0-9_-]+)/);return F?F[1]:null},P=R=>{if(!R.destination)return;const F=Array.from(e),[V]=F.splice(R.source.index,1);F.splice(R.destination.index,0,V);const N=F.map((I,y)=>({...I,playlistOrder:y}));r(N),S(N)},S=async R=>{try{const F=t.get("keywords"),V=Au(Xt,"keywordPlaylists",F);await mx(V,{items:R.map(N=>({documentName:N.documentName,playlistOrder:N.playlistOrder}))})}catch(F){console.error("Error saving playlist order:",F)}},w=()=>{p(!0),_(document.getElementById("overallSummaryContent").innerText)},x=async()=>{try{const R=t.get("keywords"),F=Au(Xt,"keywordSummaries",R);await mx(F,{summary:g}),document.getElementById("overallSummaryContent").innerText=g,p(!1)}catch(R){console.error("Error saving description:",R)}};return v.jsx("div",{className:"container mx-auto px-4 py-8",children:v.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[v.jsx("div",{className:"lg:col-span-1",children:v.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[v.jsxs("div",{className:"mb-4",children:[v.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Playlist Info"}),v.jsxs("p",{id:"totalDuration",children:["Total Duration: ",formatTime(getTotalPlaylistDuration(e))]})]}),v.jsxs("div",{className:"mb-4",children:[v.jsxs("div",{className:"flex justify-between items-center mb-2",children:[v.jsx("h3",{className:"text-xl font-semibold",children:"Playlist Summary"}),v.jsx("button",{onClick:w,className:"text-blue-500 hover:text-blue-700",children:"✏️ Edit"})]}),f?v.jsxs("div",{className:"space-y-2",children:[v.jsx("textarea",{value:g,onChange:R=>_(R.target.value),className:"w-full h-40 p-2 border rounded"}),v.jsxs("div",{className:"flex justify-end space-x-2",children:[v.jsx("button",{onClick:()=>p(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800",children:"Cancel"}),v.jsx("button",{onClick:x,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:"Save"})]})]}):v.jsx("p",{id:"overallSummaryContent",className:"text-gray-700"})]})]})}),v.jsx("div",{className:"lg:col-span-2",children:v.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:currentVideo&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"mb-4",children:[v.jsx("h2",{className:"text-2xl font-bold",children:currentVideo.name}),v.jsx("p",{className:"text-gray-600",children:currentVideo.role})]}),v.jsx("div",{id:"player",className:"w-full aspect-video mb-4"}),v.jsx($W,{onDragEnd:P,children:v.jsx(yP,{droppableId:"timeline",direction:"horizontal",children:R=>v.jsx("div",{ref:R.innerRef,...R.droppableProps,className:"relative h-20 bg-gray-100 rounded mb-4",children:v.jsxs("div",{className:"absolute inset-0 flex",children:[e.map((F,V)=>v.jsx(I8,{draggableId:`${F.documentName}-${V}`,index:V,children:(N,I)=>v.jsx("div",{ref:N.innerRef,...N.draggableProps,...N.dragHandleProps,className:`relative h-full cursor-move transition-colors
                                    ${V===i?"bg-blue-500":"bg-gray-300"}
                                    ${I.isDragging?"ring-2 ring-blue-400":""}`,style:{...N.draggableProps.style,width:`${_P(F)/N8(e)*100}%`},children:v.jsx("img",{src:`https://img.youtube.com/vi/${A(F.videoEmbedLink)}/default.jpg`,alt:"Thumbnail",className:"absolute inset-0 w-full h-full object-cover opacity-50"})})},`${F.documentName}-${V}`)),R.placeholder]})})})}),v.jsxs("div",{className:"flex justify-center space-x-4",children:[v.jsx("button",{onClick:handleSkipPrevious,disabled:i===0,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:v.jsx("span",{className:"material-icons",children:"skip_previous"})}),v.jsx("button",{onClick:handlePlayPause,className:"p-2 rounded-full bg-blue-500 hover:bg-blue-600 text-white",children:v.jsx("span",{id:"playPauseIcon",className:"material-icons",children:"pause"})}),v.jsx("button",{onClick:handleSkipNext,disabled:i===e.length-1,className:"p-2 rounded-full bg-gray-200 hover:bg-gray-300 disabled:opacity-50",children:v.jsx("span",{className:"material-icons",children:"skip_next"})})]}),v.jsxs("div",{className:"mt-6",children:[v.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Summary"}),v.jsx("p",{className:"text-gray-700",children:currentVideo.summary})]})]})})})]})})}function _P(t){const e=convertTimestampToSeconds(extractStartTimestamp(t.timestamp));return convertTimestampToSeconds(extractStartTimestamp(t.timestamp.split(" - ")[1]))-e}function N8(t){return t.reduce((e,r)=>e+_P(r),0)}function M8(){const[t,e]=M.useState(!0),[r,i]=M.useState(null),[s,a]=M.useState([]),[o,l]=M.useState(null),[u,d]=M.useState(""),h=xs();M.useEffect(()=>{f()},[]);const f=async()=>{try{e(!0);const x={},R=await nr(Dn(Xt,"interviewSummaries"));for(const V of R.docs){const N=V.id,I=Dn(Xt,"interviewSummaries",N,"subSummaries");(await nr(I)).forEach(b=>{const T=b.data();T.keywords&&T.keywords.split(",").map(D=>D.trim().toLowerCase()).forEach(D=>{x[D]||(x[D]={count:0,summaries:[]}),x[D].count++,x[D].summaries.push(T)})})}const F=Object.entries(x).map(([V,N])=>{let I=0;return N.summaries.forEach(y=>{if(y.timestamp&&y.timestamp.includes(" - ")){const b=p(y.timestamp),T=p(y.timestamp.split(" - ")[1]);I+=Math.max(0,g(T)-g(b))}}),{keyword:V,count:N.count,totalLengthSeconds:I,summaries:N.summaries}}).sort((V,N)=>N.count-V.count);a(F),e(!1)}catch(x){console.error("Error fetching keywords:",x),i("Failed to load keyword data"),e(!1)}},p=x=>{const R=x.match(/(?:\[)?(\d{1,2}:\d{2}(?::\d{2})?)/);return R?R[1]:"00:00"},g=x=>{const R=x.split(":").map(Number);return R.length===2?R[0]*60+R[1]:R.length===3?R[0]*3600+R[1]*60+R[2]:0},_=x=>{const R=Math.floor(x/3600),F=Math.floor(x%3600/60),V=x%60;return R>0?`${R}:${F.toString().padStart(2,"0")}:${V.toString().padStart(2,"0")}`:`${F}:${V.toString().padStart(2,"0")}`},A=x=>{l(o===x?null:x)},P=x=>{h(`/playlist-builder?keywords=${encodeURIComponent(x)}`)},S=x=>{h(`/playlist-editor?keywords=${encodeURIComponent(x)}`)},w=u?s.filter(x=>x.keyword.toLowerCase().includes(u.toLowerCase())):s;return t?v.jsxs("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:[v.jsx("div",{className:"w-12 h-12 border-4 border-gray-200 border-t-blue-500 rounded-full animate-spin"}),v.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]}):r?v.jsx("div",{className:"flex justify-center items-center h-screen bg-gray-50",children:v.jsx("div",{className:"bg-red-100 border border-red-500 text-red-700 px-6 py-4 rounded-lg shadow-sm",children:r})}):v.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[v.jsxs("div",{className:"mb-8",children:[v.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Keyword Directory"}),v.jsx("p",{className:"text-base text-gray-600 max-w-3xl leading-relaxed",children:"Browse all keywords from the interview collection. Click on any keyword to see details, or create a custom playlist based on specific keywords."})]}),v.jsx("div",{className:"mb-6",children:v.jsxs("div",{className:"max-w-md",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter Keywords"}),v.jsx("input",{type:"text",placeholder:"Type to filter...",value:u,onChange:x=>d(x.target.value),className:"w-full px-4 py-2.5 border border-gray-300 rounded-lg shadow-sm text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})}),v.jsx("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:v.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:[v.jsxs("div",{className:"flex flex-col items-center p-4 bg-blue-50 rounded-lg",children:[v.jsx("div",{className:"text-2xl font-bold text-blue-800 mb-2",children:s.length}),v.jsx("div",{className:"text-sm text-gray-500",children:"Total Keywords"})]}),v.jsxs("div",{className:"flex flex-col items-center p-4 bg-green-50 rounded-lg",children:[v.jsx("div",{className:"text-2xl font-bold text-green-800 mb-2",children:s.reduce((x,R)=>x+R.count,0)}),v.jsx("div",{className:"text-sm text-gray-500",children:"Total Mentions"})]}),v.jsxs("div",{className:"flex flex-col items-center p-4 bg-purple-50 rounded-lg",children:[v.jsx("div",{className:"text-2xl font-bold text-purple-800 mb-2",children:_(s.reduce((x,R)=>x+R.totalLengthSeconds,0))}),v.jsx("div",{className:"text-sm text-gray-500",children:"Total Content Duration"})]})]})}),v.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:w.length===0?v.jsx("div",{className:"p-6 text-center text-gray-500",children:"No keywords found matching your search."}):v.jsx("ul",{className:"list-none m-0 p-0 border-t border-gray-100",children:w.map(x=>v.jsx("li",{className:"border-b border-gray-100 transition-colors hover:bg-gray-50",children:v.jsxs("div",{className:"p-6",children:[v.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-blue-600 mb-2 cursor-pointer transition-colors hover:text-blue-800",onClick:()=>A(x.keyword),children:x.keyword}),v.jsxs("div",{className:"my-2",children:[v.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-blue-100 text-blue-800 text-xs font-medium mr-2",children:[x.count," mentions"]}),v.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full bg-green-100 text-green-800 text-xs font-medium",children:[_(x.totalLengthSeconds)," total length"]})]})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsxs("button",{onClick:()=>P(x.keyword),className:"inline-flex items-center px-3 py-2 border-0 rounded-md bg-blue-600 text-white text-sm font-medium cursor-pointer transition-colors hover:bg-blue-700",children:[v.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"mr-1.5",children:[v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),"Play"]}),v.jsxs("button",{onClick:()=>S(x.keyword),className:"inline-flex items-center px-3 py-2 border border-gray-300 rounded-md bg-white text-gray-600 text-sm font-medium cursor-pointer transition-colors hover:bg-gray-50",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",className:"mr-1.5",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit"]})]})]}),o===x.keyword&&v.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[v.jsx("h4",{className:"text-base font-medium text-gray-600 mb-4",children:"Recent Mentions:"}),v.jsx("div",{className:"flex flex-col gap-4",children:x.summaries.slice(0,3).map((R,F)=>v.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-xs text-gray-500",children:R.timestamp}),R.documentName&&v.jsx("span",{className:"text-xs font-medium text-blue-600",children:R.documentName})]}),v.jsxs("p",{className:"mt-2 text-gray-600 text-sm leading-relaxed",children:[R.summary.substring(0,200),R.summary.length>200?"...":""]})]},F))}),x.summaries.length>3&&v.jsx("div",{className:"mt-4 text-right",children:v.jsxs("button",{onClick:()=>P(x.keyword),className:"text-blue-600 text-sm font-medium bg-transparent border-0 cursor-pointer transition-colors hover:text-blue-800",children:["View all ",x.summaries.length," mentions →"]})})]})]})},x.keyword))})})]})}function L8(){const[t,e]=M.useState(!1),[r,i]=M.useState(null),[s,a]=M.useState(null),o=M.useRef(null),[l,u]=M.useState(null),[d,h]=M.useState(1),f=async(S,w)=>{try{e(!0),i(null);const x=prompt("Enter the name of the document for this interview:");if(!x){i("Document name is required");return}const R=await p(S),F=await g(R);await A(x.trim(),F),a(F),h(2)}catch(x){console.error("Error processing files:",x),i("Failed to process transcript")}finally{e(!1)}},p=S=>new Promise((w,x)=>{const R=new FileReader;R.onload=F=>w(F.target.result),R.onerror=F=>x(F),R.readAsText(S)});console.log("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");const g=async(S,w=3,x=2e3)=>{try{const V=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer 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"},body:JSON.stringify({model:"gpt-4o-mini",messages:[{role:"system",content:`
        You are an assistant that processes interview transcripts into structured summaries with timestamps and keywords.
        
        Always output the content in the following strict format:
        Overall Summary:
        [Provide a concise overall summary here.]
        
        Key Points:
        1. Title: [First key topic]
           Timestamp: [Start time - End time]
           Keywords: [Comma-separated list of keywords]
           Summary: [Provide a short summary of the first key topic.]
      `},{role:"user",content:`Here is a transcript:
${S}

Generate an overall summary, key points with timestamps, and keywords.`}],max_tokens:1e3})});if(!V.ok){if(V.status===429&&w>0)return console.warn(`Rate limit exceeded. Retrying in ${x}ms...`),await new Promise(I=>setTimeout(I,x)),g(S,w-1,x*2);throw new Error(`API request failed: ${V.statusText}`)}const N=await V.json();return _(N.choices[0].message.content)}catch(R){throw console.error("Error communicating with OpenAI API:",R),R}},_=S=>{const w=S.match(/Overall Summary:\s*(.+)/i),x=w?w[1].trim():"No summary found.",R=[],F=/\d+\.\s*Title:\s*(.+?)\s*Timestamp:\s*(.+?)\s*Keywords:\s*(.+?)\s*Summary:\s*(.+?)(?=\d+\.|$)/gs;let V;for(;(V=F.exec(S))!==null;)R.push({topic:V[1].trim(),timestamp:V[2].trim(),keywords:V[3].trim(),summary:V[4].trim()});return{overallSummary:x,keyPoints:R}},A=async(S,w)=>{try{const x=Au(Dn(Xt,"interviewSummaries"),S);await px(x,{documentName:S,mainSummary:w.overallSummary,createdAt:new Date});for(const R of w.keyPoints){const F=R.topic.replace(/[^a-zA-Z0-9-_]/g,"_"),V=Au(Dn(Xt,"interviewSummaries",S,"subSummaries"),F);await px(V,{topic:R.topic,timestamp:R.timestamp,keywords:R.keywords,summary:R.summary})}}catch(x){throw console.error("Error storing processed transcript:",x),x}},P=S=>{if(!o.current)return;const w=S.split(" - ")[0],x=w.split(":").map(Number);if(x.length!==2||x.some(isNaN)){console.error("Invalid timestamp format:",w);return}const R=x[0],F=x[1],V=R*60+F;isFinite(V)&&(o.current.currentTime=V,o.current.play())};return v.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans",children:[v.jsxs("div",{className:"mb-8",children:[v.jsx("h1",{className:"text-2xl font-bold mb-3 bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text",children:"Transcript Summarizer"}),v.jsx("p",{className:"text-base leading-relaxed text-gray-600 max-w-3xl",children:"Upload interview transcripts to generate AI-powered summaries with timestamps and keywords"})]}),v.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:[d===1&&v.jsxs("div",{className:"p-8",children:[v.jsxs("div",{className:"mb-8",children:[v.jsxs("h2",{className:"text-xl font-semibold mb-4 text-gray-900 flex items-center",children:[v.jsx(sC,{className:"mr-2 text-blue-600",size:20}),"Upload Interview Files"]}),v.jsxs("div",{className:"flex flex-col gap-6",children:[v.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Transcript File (.txt)"}),v.jsx("div",{className:"flex items-center justify-center w-full",children:v.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer bg-white hover:bg-gray-100 transition-colors p-4",children:[v.jsxs("div",{className:"flex flex-col items-center justify-center",children:[v.jsx(gx,{className:"w-10 h-10 mb-3 text-gray-400"}),v.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[v.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),v.jsx("p",{className:"text-xs text-gray-500",children:"Upload your interview transcript file (TXT)"})]}),v.jsx("input",{type:"file",accept:".txt",className:"hidden",onChange:S=>{var w;return((w=S.target.files)==null?void 0:w[0])&&f(S.target.files[0],null)}})]})})]}),v.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Audio File (optional)"}),v.jsx("div",{className:"flex items-center justify-center w-full",children:v.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed border-gray-300 rounded-lg cursor-pointer bg-white hover:bg-gray-100 transition-colors p-4",children:[v.jsxs("div",{className:"flex flex-col items-center justify-center",children:[v.jsx(gx,{className:"w-10 h-10 mb-3 text-gray-400"}),v.jsxs("p",{className:"mb-2 text-sm text-gray-500",children:[v.jsx("span",{className:"font-semibold",children:"Click to upload"})," or drag and drop"]}),v.jsx("p",{className:"text-xs text-gray-500",children:"MP3, WAV, or other audio formats"})]}),v.jsx("input",{type:"file",accept:"audio/*",className:"hidden",onChange:S=>{var w;return((w=S.target.files)==null?void 0:w[0])&&u(URL.createObjectURL(S.target.files[0]))}})]})})]})]})]}),l&&v.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-6",children:[v.jsx("h3",{className:"text-base font-medium mb-3 text-gray-900",children:"Audio Preview"}),v.jsx("audio",{ref:o,src:l,controls:!0,className:"w-full"})]})]}),t&&v.jsxs("div",{className:"flex flex-col justify-center items-center py-20",children:[v.jsx("div",{className:"w-16 h-16 border-4 border-blue-200 border-t-blue-500 rounded-full animate-spin mb-4"}),v.jsx("p",{className:"text-gray-500 animate-pulse",children:"Processing transcript..."}),v.jsx("style",{children:`
              @keyframes spin {
                to { transform: rotate(360deg); }
              }
              @keyframes pulse {
                0%, 100% { opacity: 1; }
                50% { opacity: 0.5; }
              }
            `})]}),r&&v.jsx("div",{className:"m-8 bg-red-100 border border-red-300 text-red-700 px-6 py-4 rounded-lg",children:v.jsxs("div",{className:"flex",children:[v.jsx("svg",{className:"w-6 h-6 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),v.jsxs("div",{children:[v.jsx("p",{className:"font-medium",children:"Error"}),v.jsx("p",{className:"text-sm",children:r})]})]})}),d===2&&s&&v.jsxs("div",{children:[l&&v.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 p-6",children:v.jsx("audio",{ref:o,src:l,controls:!0,className:"w-full"})}),v.jsxs("div",{className:"p-8 border-b border-gray-200",children:[v.jsx("h2",{className:"text-2xl font-bold mb-4 text-gray-900",children:"Overall Summary"}),v.jsx("p",{className:"text-gray-600 leading-relaxed text-base",children:s.overallSummary})]}),v.jsxs("div",{className:"p-8",children:[v.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:"Key Points"}),v.jsx("div",{className:"flex flex-col gap-6",children:s.keyPoints.map((S,w)=>v.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 transition-all duration-300 shadow-sm hover:shadow-md",children:[v.jsxs("div",{className:"flex items-start mb-4",children:[v.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 mr-3 flex-shrink-0 font-semibold",children:w+1}),v.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:S.topic})]}),v.jsxs("div",{className:"flex items-center mb-4 text-blue-600 hover:text-blue-800 cursor-pointer transition-colors",onClick:()=>P(S.timestamp),children:[v.jsx(iC,{size:16,className:"mr-2"}),v.jsx("span",{className:"font-medium",children:S.timestamp})]}),v.jsx("div",{className:"mb-4",children:v.jsxs("div",{className:"flex items-start mb-2",children:[v.jsx(A3,{size:16,className:"mr-2 text-gray-500 mt-0.5"}),v.jsx("div",{className:"flex flex-wrap gap-2",children:S.keywords.split(",").map((x,R)=>v.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-xs rounded-full font-medium",children:x.trim()},R))})]})}),v.jsx("p",{className:"text-gray-600 leading-relaxed text-sm",children:S.summary})]},w))})]}),v.jsx("div",{className:"p-8 border-t border-gray-200 flex justify-center",children:v.jsxs("button",{onClick:()=>{h(1),a(null),u(null),i(null)},className:"flex items-center px-6 py-3 bg-gray-100 text-gray-600 font-medium rounded-lg hover:bg-gray-200 transition-colors",children:[v.jsx(a3,{className:"w-5 h-5 mr-2 transform rotate-180"}),"Process Another Transcript"]})})]})]})]})}function O8(){const[t,e]=M.useState(""),r=xs(),i=s=>{s.preventDefault(),t.trim()?r(`/playlist-builder?keywords=${encodeURIComponent(t)}`):alert("Please enter at least one keyword.")};return v.jsxs("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen font-sans flex flex-col items-center justify-center",children:[v.jsxs("div",{className:"w-full max-w-3xl text-center mb-16",children:[v.jsx("h1",{className:"text-3xl font-bold mb-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-transparent bg-clip-text",children:"Search Interviews"}),v.jsx("p",{className:"text-base leading-relaxed text-gray-600 mb-10 max-w-xl mx-auto",children:"Enter keywords separated by commas to find relevant interviews and create custom playlists"}),v.jsx("form",{onSubmit:i,className:"w-full",children:v.jsxs("div",{className:"relative w-full",children:[v.jsx("div",{className:"absolute inset-y-0 left-0 flex items-center pl-4 pointer-events-none",children:v.jsx(aC,{className:"w-5 h-5 text-gray-500"})}),v.jsx("input",{type:"text",value:t,onChange:s=>e(s.target.value),placeholder:"civil rights, voting, education...",className:"w-full pl-12 pr-32 py-5 border border-gray-200 bg-white rounded-xl shadow-sm outline-none text-base text-gray-900 transition-all duration-300 focus:shadow-blue-300 focus:ring-2 focus:ring-blue-500"}),v.jsx("button",{type:"submit",className:"absolute right-3 top-1/2 transform -translate-y-1/2 px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white font-medium rounded-lg shadow-sm border-none cursor-pointer transition-all duration-300 hover:from-blue-700 hover:to-indigo-700 hover:shadow-md",children:"Search"})]})})]}),v.jsx("div",{className:"w-full max-w-3xl",children:v.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[v.jsx("h2",{className:"text-lg font-semibold mb-4 text-gray-900",children:"Popular Keywords"}),v.jsx("div",{className:"flex flex-wrap gap-2",children:["civil rights","voting","education","segregation","protests","leadership","communities","legislation","equality","freedom"].map(s=>v.jsx("button",{onClick:()=>{e(s),r(`/playlist-builder?keywords=${encodeURIComponent(s)}`)},className:"px-4 py-2 bg-gray-100 text-gray-600 rounded-lg text-sm border-none cursor-pointer transition-colors duration-200 hover:bg-blue-100 hover:text-blue-800",children:s},s))})]})})]})}function j8(){const[t]=Ty(),e=t.get("documentName"),[r,i]=M.useState(!0),[s,a]=M.useState(null),[o,l]=M.useState(null),[u,d]=M.useState([]),[h,f]=M.useState(null),[p,g]=M.useState(!1),[_,A]=M.useState(!1),[P,S]=M.useState(null),w=M.useRef(null),x=y=>{if(!y)return null;const b=y.match(/(?:embed\/|watch\?v=|youtu\.be\/)([a-zA-Z0-9_-]{11})/);return b?b[1]:null},R=y=>{if(!y)return 0;const T=y.split(" - ")[0].replace(/[\[\]]/g,"").trim().split(":").map(Number);return T.length===3?T[0]*3600+T[1]*60+T[2]:T.length===2?T[0]*60+T[1]:0},F=y=>Array.isArray(y)?y:typeof y=="string"?y.split(",").map(b=>b.trim()):[];M.useEffect(()=>{if(!e){a("Document name is missing"),i(!1);return}async function y(){try{i(!0);const b=Au(Xt,"interviewSummaries",e),T=await K4(b);if(!T.exists()){a("Interview not found"),i(!1);return}const O=T.data();l(O);const D=Dn(Xt,"interviewSummaries",e,"subSummaries"),K=await nr(D),ie=[];K.forEach(oe=>{ie.push({id:oe.id,...oe.data()})}),ie.sort((oe,he)=>R(oe.timestamp)-R(he.timestamp)),d(ie),i(!1)}catch(b){console.error("Error fetching interview data:",b),a("Failed to load interview data"),i(!1)}}y()},[e]),M.useEffect(()=>{if(window.YT&&window.YT.Player){A(!0);return}const y=document.createElement("script");y.src="https://www.youtube.com/iframe_api",y.async=!0,y.onload=()=>{window.YT&&window.YT.Player&&A(!0)},document.body.appendChild(y),window.onYouTubeIframeAPIReady=()=>{A(!0)}},[]),M.useEffect(()=>{if(!_||!(o!=null&&o.videoEmbedLink)||!P)return;const y=x(o.videoEmbedLink);if(!y){console.error("Invalid YouTube video link");return}return w.current&&typeof w.current.destroy=="function"&&(w.current.destroy(),g(!1)),w.current=new window.YT.Player(P,{videoId:y,width:"100%",height:"100%",playerVars:{autoplay:0,controls:1,rel:0,modestbranding:1},events:{onReady:()=>{g(!0),console.log("Player is ready")},onError:b=>{console.error("YouTube player error:",b.data)}}}),()=>{w.current&&typeof w.current.destroy=="function"&&(w.current.destroy(),w.current=null)}},[_,o,P]);const V=y=>{console.log("Seeking to",y,"seconds"),w.current&&typeof w.current.seekTo=="function"&&(w.current.seekTo(y,!0),w.current.playVideo())},N=y=>{f(h===y?null:y)},I=({summary:y,index:b,isOpen:T})=>{const O=M.useRef(null),[D,K]=M.useState(0);M.useEffect(()=>{O.current&&K(O.current.scrollHeight)},[T,y]);const ie=R(y.timestamp),oe=F(y.keywords);return v.jsxs("div",{className:"accordion-item border-b border-gray-200 dark:border-gray-700",children:[v.jsxs("button",{onClick:()=>N(b),className:`w-full flex items-center justify-between p-4 text-left transition-colors ${T?"bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-300":"text-gray-800 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700/30"}`,children:[v.jsxs("div",{className:"flex items-center",children:[v.jsx("span",{className:"w-6 h-6 bg-blue-100 dark:bg-blue-900/40 rounded-full flex items-center justify-center text-blue-700 dark:text-blue-300 font-bold mr-3",children:b+1}),v.jsx("span",{className:"font-bold",children:y.topic})]}),T?v.jsx(l3,{size:18}):v.jsx(i3,{size:18})]}),v.jsx("div",{style:{height:T?D:0,overflow:"hidden",transition:"height 0.3s ease"},children:v.jsxs("div",{ref:O,className:"p-4 bg-gray-50 dark:bg-gray-800",children:[v.jsxs("button",{onClick:he=>{he.stopPropagation(),V(ie)},className:`flex items-center mb-4 text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300 transition-colors ${p?"cursor-pointer":"opacity-50 cursor-wait"}`,disabled:!p,children:[v.jsx(iC,{size:16,className:"mr-2"}),v.jsx("span",{className:"font-bold",children:y.timestamp?y.timestamp.split(" - ")[0].replace(/[\[\]]/g,"").trim():"Unknown time"})]}),oe.length>0&&v.jsx("div",{className:"mb-4 text-sm",children:v.jsx("span",{className:"font-bold",children:oe.map((he,q)=>v.jsxs("span",{children:[he,q<oe.length-1?", ":""]},q))})}),v.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:y.summary})]})})]})};return r?v.jsx("div",{className:"flex justify-center items-center h-64",children:v.jsx("div",{className:"w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):s?v.jsx("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800/30 text-red-700 dark:text-red-300 px-6 py-4 rounded-xl",children:v.jsxs("p",{children:[v.jsx("strong",{children:"Error:"})," ",s]})}):v.jsxs("div",{className:"max-w-7xl mx-auto space-y-8",children:[v.jsxs("div",{className:"w-full relative bg-black",style:{height:"360px"},children:[v.jsx("div",{className:"absolute inset-0",ref:S}),!p&&v.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 pointer-events-none",children:v.jsx("div",{className:"w-10 h-10 border-4 border-white/50 border-t-white rounded-full animate-spin"})})]}),v.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden",children:v.jsxs("div",{className:"p-6 border-t border-gray-100 dark:border-gray-700",children:[v.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800 dark:text-white",children:"Overview"}),v.jsx("p",{className:"text-gray-700 dark:text-gray-300 leading-relaxed",children:(o==null?void 0:o.mainSummary)||"No summary available"})]})}),v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden",children:[v.jsx("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700",children:v.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"Interview Segments"})}),u.map((y,b)=>v.jsx(I,{summary:y,index:b,isOpen:h===b},y.id||b)),u.length===0&&v.jsx("div",{className:"p-6 text-center text-gray-500 dark:text-gray-400",children:"No segments available for this interview"})]})]})}function V8(){return v.jsxs(o2,{children:[v.jsx(Mr,{path:"/login",element:v.jsx(W5,{})}),v.jsx(Mr,{path:"/",element:v.jsx(Os,{children:v.jsx(Ls,{children:v.jsx(H5,{})})})}),v.jsx(Mr,{path:"/playlist-builder",element:v.jsx(Os,{children:v.jsx(Ls,{children:v.jsx(J5,{})})})}),v.jsx(Mr,{path:"/playlist-editor",element:v.jsx(Os,{children:v.jsx(Ls,{children:v.jsx(D8,{})})})}),v.jsx(Mr,{path:"/keyword-directory",element:v.jsx(Os,{children:v.jsx(Ls,{children:v.jsx(M8,{})})})}),v.jsx(Mr,{path:"/transcript-summary",element:v.jsx(Os,{children:v.jsx(Ls,{children:v.jsx(L8,{})})})}),v.jsx(Mr,{path:"/search",element:v.jsx(Os,{children:v.jsx(Ls,{children:v.jsx(O8,{})})})}),v.jsx(Mr,{path:"/interview-player",element:v.jsx(Os,{children:v.jsx(Ls,{children:v.jsx(j8,{})})})}),v.jsx(Mr,{path:"*",element:v.jsx(SI,{to:"/",replace:!0})})]})}Rm.createRoot(document.getElementById("root")).render(v.jsx(Pe.StrictMode,{children:v.jsx(D2,{children:v.jsx(Q4,{children:v.jsx(Z4,{children:v.jsx(V8,{})})})})}));export{Pe as R,my as a,F8 as c,Vu as g,M as r};
